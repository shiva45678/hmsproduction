import{j as e,B as v}from"./index-D_kqlrGT.js";import{u as y,r as l}from"./react-vendor-Cc0P4_ZX.js";/* empty css                           */import{z as f,E as N,X as C}from"./ui-vendor-SmiJk_kJ.js";import"./utils-vendor-azd6ta8e.js";import"./ai-vendor-CB5T-uN5.js";import"./chart-vendor-BcjzKorn.js";const D=()=>{const p=y(),[r,x]=l.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[o,c]=l.useState(!1),[u,d]=l.useState(null),[s,a]=l.useState(null);l.useEffect(()=>{if(s){const t=setTimeout(()=>a(null),5e3);return()=>clearTimeout(t)}},[s]);const i=t=>{const{name:m,value:n,type:b}=t.target;x(g=>({...g,[m]:b==="number"?parseFloat(n):n}))},h=async t=>{if(t.preventDefault(),c(!0),d(null),a(null),!r.name||!r.price||!r.period||r.interval===void 0||r.interval<=0){d("Please fill in all required fields (Name, Price, Period, Interval > 0)."),c(!1);return}try{await v(r),a({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{p("/dashboard/clinic-subscriptions")},2e3)}catch(m){const n=m.message||"Failed to create clinic plan.";d(n),a({type:"error",message:n})}finally{c(!1)}},j=()=>{p(-1)};return e.jsxs("div",{className:"subscription-page-container",children:[s&&e.jsxs("div",{className:`${s.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[e.jsxs("div",{className:"flex items-center",children:[s.type==="success"?e.jsx(f,{size:18,className:"mr-2 text-green-500"}):e.jsx(N,{size:18,className:"mr-2 text-red-500"}),e.jsx("span",{children:s.message})]}),e.jsx("button",{onClick:()=>a(null),className:`${s.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:e.jsx(C,{size:16})})]}),e.jsxs("div",{className:"subscription-form",children:[e.jsx("h1",{children:"Add New Clinic Subscription Plan"}),u&&e.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:u}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"name",children:["Plan Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name||"",onChange:i,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",rows:3,value:r.description||"",onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"price",children:["Price (INR) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:r.price!==void 0?r.price:"",onChange:i,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"period",children:["Billing Period ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"period",name:"period",value:r.period||"monthly",onChange:i,required:!0,children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"interval",children:["Interval ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:r.interval||1,onChange:i,required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),e.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:r.razorpay_plan_id||"",onChange:i})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:j,className:"subscription-btn subscription-btn-secondary",children:"Back"}),e.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Creating...":"Create Plan"]})]})]})]})]})};export{D as default};

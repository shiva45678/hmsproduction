import{u as w,j as t,f as v}from"./index-B0SGsixC.js";import{r as s}from"./react-vendor-Cc0P4_ZX.js";import{X as z,y as A,k as F,N as C,F as I,aJ as L,aq as T,n as k}from"./ui-vendor-CZgqa0n4.js";import"./utils-vendor-azd6ta8e.js";import"./ai-vendor-CB5T-uN5.js";import"./chart-vendor-BcjzKorn.js";const g="tutorialCurrentStep",O=({onActionComplete:e})=>{const[l,m]=s.useState(!1),[a,j]=s.useState(!1),[d,p]=s.useState(null),h=async()=>{var o,u;m(!0);try{const n=await v("/api/drugs/import-defaults",{method:"POST"}),i=await n.json();if(n.ok){j(!0);const f=((o=i.details)==null?void 0:o.added)||0,x=((u=i.details)==null?void 0:u.updated)||0,N=`Added: ${f}, Updated: ${x}`;p(N),e(!0,"Default medications imported successfully!","pharmacyImport")}else e(!1,"Failed to import medications.")}catch{e(!1,"Error importing medications.")}finally{m(!1)}};return t.jsxs("div",{className:"tutorial-interactive-component center-content",children:[t.jsx("p",{className:"action-hint",children:"One click to populate your inventory."}),a?t.jsxs("div",{className:"success-badge flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{size:16})," Imported"]}),d&&t.jsx("span",{className:"text-xs opacity-80 mt-1",children:d})]}):t.jsx("button",{onClick:h,className:"tutorial-button primary",disabled:l,children:l?t.jsxs(t.Fragment,{children:[t.jsx(k,{size:18,className:"animate-spin"})," Importing ~80 items..."]}):t.jsxs(t.Fragment,{children:[t.jsx(C,{size:18})," Import Drugs"]})})]})},B=({onActionComplete:e})=>{const[l,m]=s.useState(!1),[a,j]=s.useState(!1),[d,p]=s.useState(null),h=async()=>{var o,u;m(!0);try{const n=await v("/api/lab-tests/import-defaults",{method:"POST"}),i=await n.json();if(n.ok){j(!0);const f=((o=i.details)==null?void 0:o.added)||0,x=((u=i.details)==null?void 0:u.updated)||0,N=`Added: ${f}, Updated: ${x}`;p(N),e(!0,"Default lab tests imported successfully!","labImport")}else e(!1,"Failed to import lab tests.")}catch{e(!1,"Error importing lab tests.")}finally{m(!1)}};return t.jsxs("div",{className:"tutorial-interactive-component center-content",children:[t.jsx("p",{className:"action-hint",children:"Setup your lab with common tests."}),a?t.jsxs("div",{className:"success-badge flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{size:16})," Imported"]}),d&&t.jsx("span",{className:"text-xs opacity-80 mt-1",children:d})]}):t.jsx("button",{onClick:h,className:"tutorial-button primary",disabled:l,children:l?t.jsxs(t.Fragment,{children:[t.jsx(k,{size:18,className:"animate-spin"})," Importing ~25 items..."]}):t.jsxs(t.Fragment,{children:[t.jsx(I,{size:18})," Import Tests"]})})]})},$=({onOpenCommandBar:e})=>t.jsxs("div",{className:"tutorial-interactive-component center-content",children:[t.jsx("p",{className:"action-hint",children:"Ready to experience the power? Open the command bar to start."}),t.jsx("button",{onClick:e,className:"tutorial-button primary large-button",children:t.jsxs("div",{className:"flex items-center gap-2",children:["Open Command Bar ",t.jsx("span",{className:"shortcut-hint-badge",children:"Ctrl+K"})]})})]}),S=[{title:"Welcome to Newtons Ai HMS",description:"Your all-in-one clinic management solution. Let's get your clinic ready in less than 2 minutes.",icon:t.jsx(F,{size:48,className:"step-icon welcome"}),component:null,actionText:"Get Started"},{title:"Pharmacy Setup",description:"Start by populating your pharmacy. We can import a standard list of medicines for you.",icon:t.jsx(C,{size:48,className:"step-icon pharmacy"}),component:O,actionText:"Next",showSkip:!0},{title:"Lab Configuration",description:"Next, let's set up your lab. Import common lab tests to start generating reports immediately.",icon:t.jsx(I,{size:48,className:"step-icon lab"}),component:B,actionText:"Next",showSkip:!0},{title:"Power at Your Fingertips",description:"The Command Bar is your central hub for everything. Search patients, add orders, or use AI tools instantly.",icon:t.jsx(L,{size:48,className:"step-icon ai"}),component:$,actionText:null,isLast:!0}],W=({onClose:e,onMarkAsSeen:l})=>{const{openCommandBar:m}=w(),[a,j]=s.useState(()=>{const c=localStorage.getItem(g);return c?parseInt(c,10):0}),[d,p]=s.useState(!1),[h,o]=s.useState(null),[u,n]=s.useState(null);s.useEffect(()=>{localStorage.setItem(g,a.toString()),o(null)},[a]);const i=()=>{p(!0),setTimeout(()=>{j(c=>Math.min(c+1,S.length-1)),p(!1)},300)},f=(c,y,b)=>{n(c),o(y),c&&(b==="pharmacyImport"||b==="labImport")&&setTimeout(i,1e3)},x=()=>{l(),e(),localStorage.removeItem(g)},N=()=>{x(),setTimeout(()=>{m()},100)},r=S[a];return t.jsx("div",{className:"tutorial-overlay",children:t.jsxs("div",{className:`tutorial-card ${d?"fade-out":"fade-in"}`,children:[t.jsxs("div",{className:"tutorial-visual",children:[t.jsx("div",{className:"icon-circle",children:r.icon}),t.jsx("div",{className:"step-indicators",children:S.map((c,y)=>t.jsx("div",{className:`step-dot ${y===a?"active":""} ${y<a?"completed":""}`},y))})]}),t.jsxs("div",{className:"tutorial-content",children:[t.jsx("button",{className:"close-button",onClick:x,title:"Close Tutorial",children:t.jsx(z,{size:20})}),t.jsxs("div",{className:"text-content",children:[t.jsx("h2",{children:r.title}),t.jsx("p",{className:"description",children:r.description})]}),t.jsxs("div",{className:"interactive-area",children:[r.component?t.jsx(r.component,{onActionComplete:f,onOpenCommandBar:N}):null,h&&t.jsx("div",{className:`status-message ${u?"success":"error"}`,children:h})]}),t.jsxs("div",{className:"action-footer",children:[r.showSkip&&t.jsx("button",{onClick:i,className:"tutorial-button text-only",children:"Skip for now"}),r.actionText&&t.jsxs("button",{onClick:i,className:"tutorial-button primary",children:[r.actionText," ",t.jsx(A,{size:16})]})]})]})]})})};export{W as default};

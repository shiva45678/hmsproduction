const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditComplaintPage-CUfdr_TI.js","assets/EditComplaintPage-CcMBOQ67.css","assets/AddPatientPage-DctKKfma.js","assets/AddPatientPage-CvaX_3Vg.css"])))=>i.map(i=>d[i]);
var GG=Object.defineProperty;var RM=t=>{throw TypeError(t)};var WG=(t,e,n)=>e in t?GG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var br=(t,e,n)=>WG(t,typeof e!="symbol"?e+"":e,n),H_=(t,e,n)=>e.has(t)||RM("Cannot "+n);var Re=(t,e,n)=>(H_(t,e,"read from private field"),n?n.call(t):e.get(t)),Ut=(t,e,n)=>e.has(t)?RM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Pt=(t,e,n,a)=>(H_(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n),wn=(t,e,n)=>(H_(t,e,"access private method"),n);var cj=(t,e,n,a)=>({set _(i){Pt(t,e,i,n)},get _(){return Re(t,e,a)}});function YG(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(a,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G_={exports:{}},$x={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LM;function KG(){if(LM)return $x;LM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:a,key:o,ref:i!==void 0?i:null,props:s}}return $x.Fragment=e,$x.jsx=n,$x.jsxs=n,$x}var FM;function QG(){return FM||(FM=1,G_.exports=KG()),G_.exports}var r=QG(),W_={exports:{}},xn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $M;function XG(){if($M)return xn;$M=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function S(z,ce,je){this.props=z,this.context=ce,this.refs=j,this.updater=je||x}S.prototype.isReactComponent={},S.prototype.setState=function(z,ce){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ce,"setState")},S.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function _(){}_.prototype=S.prototype;function T(z,ce,je){this.props=z,this.context=ce,this.refs=j,this.updater=je||x}var C=T.prototype=new _;C.constructor=T,b(C,S.prototype),C.isPureReactComponent=!0;var E=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function I(z,ce,je,Y,Ie,Ue){return je=Ue.ref,{$$typeof:t,type:z,key:ce,ref:je!==void 0?je:null,props:Ue}}function F(z,ce){return I(z.type,ce,void 0,void 0,void 0,z.props)}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function $(z){var ce={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(je){return ce[je]})}var L=/\/+/g;function V(z,ce){return typeof z=="object"&&z!==null&&z.key!=null?$(""+z.key):ce.toString(36)}function H(){}function ne(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(H,H):(z.status="pending",z.then(function(ce){z.status==="pending"&&(z.status="fulfilled",z.value=ce)},function(ce){z.status==="pending"&&(z.status="rejected",z.reason=ce)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Q(z,ce,je,Y,Ie){var Ue=typeof z;(Ue==="undefined"||Ue==="boolean")&&(z=null);var ze=!1;if(z===null)ze=!0;else switch(Ue){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(z.$$typeof){case t:case e:ze=!0;break;case f:return ze=z._init,Q(ze(z._payload),ce,je,Y,Ie)}}if(ze)return Ie=Ie(z),ze=Y===""?"."+V(z,0):Y,E(Ie)?(je="",ze!=null&&(je=ze.replace(L,"$&/")+"/"),Q(Ie,ce,je,"",function(Ce){return Ce})):Ie!=null&&(B(Ie)&&(Ie=F(Ie,je+(Ie.key==null||z&&z.key===Ie.key?"":(""+Ie.key).replace(L,"$&/")+"/")+ze)),ce.push(Ie)),1;ze=0;var Le=Y===""?".":Y+":";if(E(z))for(var be=0;be<z.length;be++)Y=z[be],Ue=Le+V(Y,be),ze+=Q(Y,ce,je,Ue,Ie);else if(be=g(z),typeof be=="function")for(z=be.call(z),be=0;!(Y=z.next()).done;)Y=Y.value,Ue=Le+V(Y,be++),ze+=Q(Y,ce,je,Ue,Ie);else if(Ue==="object"){if(typeof z.then=="function")return Q(ne(z),ce,je,Y,Ie);throw ce=String(z),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return ze}function q(z,ce,je){if(z==null)return z;var Y=[],Ie=0;return Q(z,Y,"","",function(Ue){return ce.call(je,Ue,Ie++)}),Y}function G(z){if(z._status===-1){var ce=z._result;ce=ce(),ce.then(function(je){(z._status===0||z._status===-1)&&(z._status=1,z._result=je)},function(je){(z._status===0||z._status===-1)&&(z._status=2,z._result=je)}),z._status===-1&&(z._status=0,z._result=ce)}if(z._status===1)return z._result.default;throw z._result}var ie=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function W(){}return xn.Children={map:q,forEach:function(z,ce,je){q(z,function(){ce.apply(this,arguments)},je)},count:function(z){var ce=0;return q(z,function(){ce++}),ce},toArray:function(z){return q(z,function(ce){return ce})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},xn.Component=S,xn.Fragment=n,xn.Profiler=i,xn.PureComponent=T,xn.StrictMode=a,xn.Suspense=c,xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,xn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return k.H.useMemoCache(z)}},xn.cache=function(z){return function(){return z.apply(null,arguments)}},xn.cloneElement=function(z,ce,je){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Y=b({},z.props),Ie=z.key,Ue=void 0;if(ce!=null)for(ze in ce.ref!==void 0&&(Ue=void 0),ce.key!==void 0&&(Ie=""+ce.key),ce)!O.call(ce,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&ce.ref===void 0||(Y[ze]=ce[ze]);var ze=arguments.length-2;if(ze===1)Y.children=je;else if(1<ze){for(var Le=Array(ze),be=0;be<ze;be++)Le[be]=arguments[be+2];Y.children=Le}return I(z.type,Ie,void 0,void 0,Ue,Y)},xn.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},xn.createElement=function(z,ce,je){var Y,Ie={},Ue=null;if(ce!=null)for(Y in ce.key!==void 0&&(Ue=""+ce.key),ce)O.call(ce,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(Ie[Y]=ce[Y]);var ze=arguments.length-2;if(ze===1)Ie.children=je;else if(1<ze){for(var Le=Array(ze),be=0;be<ze;be++)Le[be]=arguments[be+2];Ie.children=Le}if(z&&z.defaultProps)for(Y in ze=z.defaultProps,ze)Ie[Y]===void 0&&(Ie[Y]=ze[Y]);return I(z,Ue,void 0,void 0,null,Ie)},xn.createRef=function(){return{current:null}},xn.forwardRef=function(z){return{$$typeof:l,render:z}},xn.isValidElement=B,xn.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:G}},xn.memo=function(z,ce){return{$$typeof:d,type:z,compare:ce===void 0?null:ce}},xn.startTransition=function(z){var ce=k.T,je={};k.T=je;try{var Y=z(),Ie=k.S;Ie!==null&&Ie(je,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(W,ie)}catch(Ue){ie(Ue)}finally{k.T=ce}},xn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},xn.use=function(z){return k.H.use(z)},xn.useActionState=function(z,ce,je){return k.H.useActionState(z,ce,je)},xn.useCallback=function(z,ce){return k.H.useCallback(z,ce)},xn.useContext=function(z){return k.H.useContext(z)},xn.useDebugValue=function(){},xn.useDeferredValue=function(z,ce){return k.H.useDeferredValue(z,ce)},xn.useEffect=function(z,ce,je){var Y=k.H;if(typeof je=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(z,ce)},xn.useId=function(){return k.H.useId()},xn.useImperativeHandle=function(z,ce,je){return k.H.useImperativeHandle(z,ce,je)},xn.useInsertionEffect=function(z,ce){return k.H.useInsertionEffect(z,ce)},xn.useLayoutEffect=function(z,ce){return k.H.useLayoutEffect(z,ce)},xn.useMemo=function(z,ce){return k.H.useMemo(z,ce)},xn.useOptimistic=function(z,ce){return k.H.useOptimistic(z,ce)},xn.useReducer=function(z,ce,je){return k.H.useReducer(z,ce,je)},xn.useRef=function(z){return k.H.useRef(z)},xn.useState=function(z){return k.H.useState(z)},xn.useSyncExternalStore=function(z,ce,je){return k.H.useSyncExternalStore(z,ce,je)},xn.useTransition=function(){return k.H.useTransition()},xn.version="19.1.0",xn}var BM;function kO(){return BM||(BM=1,W_.exports=XG()),W_.exports}var v=kO();const Se=Wn(v),zM=YG({__proto__:null,default:Se},[v]);var Y_={exports:{}},Bx={},K_={exports:{}},Q_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM;function JG(){return qM||(qM=1,function(t){function e(q,G){var ie=q.length;q.push(G);e:for(;0<ie;){var W=ie-1>>>1,z=q[W];if(0<i(z,G))q[W]=G,q[ie]=z,ie=W;else break e}}function n(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var G=q[0],ie=q.pop();if(ie!==G){q[0]=ie;e:for(var W=0,z=q.length,ce=z>>>1;W<ce;){var je=2*(W+1)-1,Y=q[je],Ie=je+1,Ue=q[Ie];if(0>i(Y,ie))Ie<z&&0>i(Ue,Y)?(q[W]=Ue,q[Ie]=ie,W=Ie):(q[W]=Y,q[je]=ie,W=je);else if(Ie<z&&0>i(Ue,ie))q[W]=Ue,q[Ie]=ie,W=Ie;else break e}}return G}function i(q,G){var ie=q.sortIndex-G.sortIndex;return ie!==0?ie:q.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,p=null,g=3,x=!1,b=!1,j=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function E(q){for(var G=n(d);G!==null;){if(G.callback===null)a(d);else if(G.startTime<=q)a(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(d)}}function k(q){if(j=!1,E(q),!b)if(n(c)!==null)b=!0,O||(O=!0,V());else{var G=n(d);G!==null&&Q(k,G.startTime-q)}}var O=!1,I=-1,F=5,B=-1;function $(){return S?!0:!(t.unstable_now()-B<F)}function L(){if(S=!1,O){var q=t.unstable_now();B=q;var G=!0;try{e:{b=!1,j&&(j=!1,T(I),I=-1),x=!0;var ie=g;try{t:{for(E(q),p=n(c);p!==null&&!(p.expirationTime>q&&$());){var W=p.callback;if(typeof W=="function"){p.callback=null,g=p.priorityLevel;var z=W(p.expirationTime<=q);if(q=t.unstable_now(),typeof z=="function"){p.callback=z,E(q),G=!0;break t}p===n(c)&&a(c),E(q)}else a(c);p=n(c)}if(p!==null)G=!0;else{var ce=n(d);ce!==null&&Q(k,ce.startTime-q),G=!1}}break e}finally{p=null,g=ie,x=!1}G=void 0}}finally{G?V():O=!1}}}var V;if(typeof C=="function")V=function(){C(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ne=H.port2;H.port1.onmessage=L,V=function(){ne.postMessage(null)}}else V=function(){_(L,0)};function Q(q,G){I=_(function(){q(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var ie=g;g=G;try{return q()}finally{g=ie}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(q,G){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ie=g;g=q;try{return G()}finally{g=ie}},t.unstable_scheduleCallback=function(q,G,ie){var W=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?W+ie:W):ie=W,q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ie+z,q={id:f++,callback:G,priorityLevel:q,startTime:ie,expirationTime:z,sortIndex:-1},ie>W?(q.sortIndex=ie,e(d,q),n(c)===null&&q===n(d)&&(j?(T(I),I=-1):j=!0,Q(k,ie-W))):(q.sortIndex=z,e(c,q),b||x||(b=!0,O||(O=!0,V()))),q},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(q){var G=g;return function(){var ie=g;g=G;try{return q.apply(this,arguments)}finally{g=ie}}}}(Q_)),Q_}var UM;function ZG(){return UM||(UM=1,K_.exports=JG()),K_.exports}var X_={exports:{}},ci={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VM;function eW(){if(VM)return ci;VM=1;var t=kO();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:d,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,ci.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(c,d,null,f)},ci.flushSync=function(c){var d=o.T,f=a.p;try{if(o.T=null,a.p=2,c)return c()}finally{o.T=d,a.p=f,a.d.f()}},ci.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,a.d.C(c,d))},ci.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},ci.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?a.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:x}):f==="script"&&a.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ci.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);a.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&a.d.M(c)},ci.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);a.d.L(c,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ci.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=l(d.as,d.crossOrigin);a.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else a.d.m(c)},ci.requestFormReset=function(c){a.d.r(c)},ci.unstable_batchedUpdates=function(c,d){return c(d)},ci.useFormState=function(c,d,f){return o.H.useFormState(c,d,f)},ci.useFormStatus=function(){return o.H.useHostTransitionStatus()},ci.version="19.1.0",ci}var HM;function XB(){if(HM)return X_.exports;HM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),X_.exports=eW(),X_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM;function tW(){if(GM)return Bx;GM=1;var t=ZG(),e=kO(),n=XB();function a(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var h=u,m=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(m=h.return),u=h.return;while(u)}return h.tag===3?m:null}function o(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function l(u){if(s(u)!==u)throw Error(a(188))}function c(u){var h=u.alternate;if(!h){if(h=s(u),h===null)throw Error(a(188));return h!==u?null:u}for(var m=u,N=h;;){var A=m.return;if(A===null)break;var R=A.alternate;if(R===null){if(N=A.return,N!==null){m=N;continue}break}if(A.child===R.child){for(R=A.child;R;){if(R===m)return l(A),u;if(R===N)return l(A),h;R=R.sibling}throw Error(a(188))}if(m.return!==N.return)m=A,N=R;else{for(var J=!1,pe=A.child;pe;){if(pe===m){J=!0,m=A,N=R;break}if(pe===N){J=!0,N=A,m=R;break}pe=pe.sibling}if(!J){for(pe=R.child;pe;){if(pe===m){J=!0,m=R,N=A;break}if(pe===N){J=!0,N=R,m=A;break}pe=pe.sibling}if(!J)throw Error(a(189))}}if(m.alternate!==N)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?u:h}function d(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=d(u),h!==null)return h;u=u.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function V(u){return u===null||typeof u!="object"?null:(u=L&&u[L]||u["@@iterator"],typeof u=="function"?u:null)}var H=Symbol.for("react.client.reference");function ne(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===H?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case S:return"Profiler";case j:return"StrictMode";case k:return"Suspense";case O:return"SuspenseList";case B:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case x:return"Portal";case C:return(u.displayName||"Context")+".Provider";case T:return(u._context.displayName||"Context")+".Consumer";case E:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case I:return h=u.displayName||null,h!==null?h:ne(u.type)||"Memo";case F:h=u._payload,u=u._init;try{return ne(u(h))}catch{}}return null}var Q=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},W=[],z=-1;function ce(u){return{current:u}}function je(u){0>z||(u.current=W[z],W[z]=null,z--)}function Y(u,h){z++,W[z]=u.current,u.current=h}var Ie=ce(null),Ue=ce(null),ze=ce(null),Le=ce(null);function be(u,h){switch(Y(ze,h),Y(Ue,u),Y(Ie,null),h.nodeType){case 9:case 11:u=(u=h.documentElement)&&(u=u.namespaceURI)?Or(u):0;break;default:if(u=h.tagName,h=h.namespaceURI)h=Or(h),u=Lr(h,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}je(Ie),Y(Ie,u)}function Ce(){je(Ie),je(Ue),je(ze)}function Ae(u){u.memoizedState!==null&&Y(Le,u);var h=Ie.current,m=Lr(h,u.type);h!==m&&(Y(Ue,u),Y(Ie,m))}function me(u){Ue.current===u&&(je(Ie),je(Ue)),Le.current===u&&(je(Le),$u._currentValue=ie)}var ye=Object.prototype.hasOwnProperty,le=t.unstable_scheduleCallback,X=t.unstable_cancelCallback,ae=t.unstable_shouldYield,de=t.unstable_requestPaint,ee=t.unstable_now,Ne=t.unstable_getCurrentPriorityLevel,Te=t.unstable_ImmediatePriority,Fe=t.unstable_UserBlockingPriority,xe=t.unstable_NormalPriority,te=t.unstable_LowPriority,oe=t.unstable_IdlePriority,_e=t.log,Oe=t.unstable_setDisableYieldValue,K=null,ge=null;function ue(u){if(typeof _e=="function"&&Oe(u),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(K,u)}catch{}}var fe=Math.clz32?Math.clz32:$e,Ee=Math.log,Ke=Math.LN2;function $e(u){return u>>>=0,u===0?32:31-(Ee(u)/Ke|0)|0}var We=256,it=4194304;function wt(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function we(u,h,m){var N=u.pendingLanes;if(N===0)return 0;var A=0,R=u.suspendedLanes,J=u.pingedLanes;u=u.warmLanes;var pe=N&134217727;return pe!==0?(N=pe&~R,N!==0?A=wt(N):(J&=pe,J!==0?A=wt(J):m||(m=pe&~u,m!==0&&(A=wt(m))))):(pe=N&~R,pe!==0?A=wt(pe):J!==0?A=wt(J):m||(m=N&~u,m!==0&&(A=wt(m)))),A===0?0:h!==0&&h!==A&&(h&R)===0&&(R=A&-A,m=h&-h,R>=m||R===32&&(m&4194048)!==0)?h:A}function Xe(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function Je(u,h){switch(u){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ct(){var u=We;return We<<=1,(We&4194048)===0&&(We=256),u}function Ct(){var u=it;return it<<=1,(it&62914560)===0&&(it=4194304),u}function bt(u){for(var h=[],m=0;31>m;m++)h.push(u);return h}function ke(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ot(u,h,m,N,A,R){var J=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var pe=u.entanglements,De=u.expirationTimes,Ze=u.hiddenUpdates;for(m=J&~m;0<m;){var ut=31-fe(m),pt=1<<ut;pe[ut]=0,De[ut]=-1;var nt=Ze[ut];if(nt!==null)for(Ze[ut]=null,ut=0;ut<nt.length;ut++){var et=nt[ut];et!==null&&(et.lane&=-536870913)}m&=~pt}N!==0&&Tt(u,N,0),R!==0&&A===0&&u.tag!==0&&(u.suspendedLanes|=R&~(J&~h))}function Tt(u,h,m){u.pendingLanes|=h,u.suspendedLanes&=~h;var N=31-fe(h);u.entangledLanes|=h,u.entanglements[N]=u.entanglements[N]|1073741824|m&4194090}function Ve(u,h){var m=u.entangledLanes|=h;for(u=u.entanglements;m;){var N=31-fe(m),A=1<<N;A&h|u[N]&h&&(u[N]|=h),m&=~A}}function jt(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function kt(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Yn(){var u=G.p;return u!==0?u:(u=window.event,u===void 0?32:rj(u.type))}function vt(u,h){var m=G.p;try{return G.p=u,h()}finally{G.p=m}}var Ot=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Ot,ln="__reactProps$"+Ot,er="__reactContainer$"+Ot,Tn="__reactEvents$"+Ot,va="__reactListeners$"+Ot,Ka="__reactHandles$"+Ot,Br="__reactResources$"+Ot,ka="__reactMarker$"+Ot;function zi(u){delete u[Vt],delete u[ln],delete u[Tn],delete u[va],delete u[Ka]}function In(u){var h=u[Vt];if(h)return h;for(var m=u.parentNode;m;){if(h=m[er]||m[Vt]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(u=H1(u);u!==null;){if(m=u[Vt])return m;u=H1(u)}return h}u=m,m=u.parentNode}return null}function tt(u){if(u=u[Vt]||u[er]){var h=u.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return u}return null}function gt(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u.stateNode;throw Error(a(33))}function St(u){var h=u[Br];return h||(h=u[Br]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Dt(u){u[ka]=!0}var Nn=new Set,Rn={};function ba(u,h){yi(u,h),yi(u+"Capture",h)}function yi(u,h){for(Rn[u]=h,u=0;u<h.length;u++)Nn.add(h[u])}var co=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Td={},kd={};function BS(u){return ye.call(kd,u)?!0:ye.call(Td,u)?!1:co.test(u)?kd[u]=!0:(Td[u]=!0,!1)}function $f(u,h,m){if(BS(h))if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(h);return;case"boolean":var N=h.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){u.removeAttribute(h);return}}u.setAttribute(h,""+m)}}function Bf(u,h,m){if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttribute(h,""+m)}}function Ls(u,h,m,N){if(N===null)u.removeAttribute(m);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(h,m,""+N)}}var zf,Yg;function Kc(u){if(zf===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);zf=h&&h[1]||"",Yg=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zf+u+Yg}var Kg=!1;function Qg(u,h){if(!u||Kg)return"";Kg=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(h){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(et){var nt=et}Reflect.construct(u,[],pt)}else{try{pt.call()}catch(et){nt=et}u.call(pt.prototype)}}else{try{throw Error()}catch(et){nt=et}(pt=u())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(et){if(et&&nt&&typeof et.stack=="string")return[et.stack,nt.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=N.DetermineComponentFrameRoot(),J=R[0],pe=R[1];if(J&&pe){var De=J.split(`
`),Ze=pe.split(`
`);for(A=N=0;N<De.length&&!De[N].includes("DetermineComponentFrameRoot");)N++;for(;A<Ze.length&&!Ze[A].includes("DetermineComponentFrameRoot");)A++;if(N===De.length||A===Ze.length)for(N=De.length-1,A=Ze.length-1;1<=N&&0<=A&&De[N]!==Ze[A];)A--;for(;1<=N&&0<=A;N--,A--)if(De[N]!==Ze[A]){if(N!==1||A!==1)do if(N--,A--,0>A||De[N]!==Ze[A]){var ut=`
`+De[N].replace(" at new "," at ");return u.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",u.displayName)),ut}while(1<=N&&0<=A);break}}}finally{Kg=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?Kc(m):""}function zS(u){switch(u.tag){case 26:case 27:case 5:return Kc(u.type);case 16:return Kc("Lazy");case 13:return Kc("Suspense");case 19:return Kc("SuspenseList");case 0:case 15:return Qg(u.type,!1);case 11:return Qg(u.type.render,!1);case 1:return Qg(u.type,!0);case 31:return Kc("Activity");default:return""}}function Xg(u){try{var h="";do h+=zS(u),u=u.return;while(u);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function xi(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Jg(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Zg(u){var h=Jg(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),N=""+u[h];if(!u.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,R=m.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return A.call(this)},set:function(J){N=""+J,R.call(this,J)}}),Object.defineProperty(u,h,{enumerable:m.enumerable}),{getValue:function(){return N},setValue:function(J){N=""+J},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function qf(u){u._valueTracker||(u._valueTracker=Zg(u))}function ey(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var m=h.getValue(),N="";return u&&(N=Jg(u)?u.checked?"true":"false":u.value),u=N,u!==m?(h.setValue(u),!0):!1}function ql(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Gb=/[\n"\\]/g;function qi(u){return u.replace(Gb,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Uf(u,h,m,N,A,R,J,pe){u.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?u.type=J:u.removeAttribute("type"),h!=null?J==="number"?(h===0&&u.value===""||u.value!=h)&&(u.value=""+xi(h)):u.value!==""+xi(h)&&(u.value=""+xi(h)):J!=="submit"&&J!=="reset"||u.removeAttribute("value"),h!=null?Ad(u,J,xi(h)):m!=null?Ad(u,J,xi(m)):N!=null&&u.removeAttribute("value"),A==null&&R!=null&&(u.defaultChecked=!!R),A!=null&&(u.checked=A&&typeof A!="function"&&typeof A!="symbol"),pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?u.name=""+xi(pe):u.removeAttribute("name")}function ty(u,h,m,N,A,R,J,pe){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(u.type=R),h!=null||m!=null){if(!(R!=="submit"&&R!=="reset"||h!=null))return;m=m!=null?""+xi(m):"",h=h!=null?""+xi(h):m,pe||h===u.value||(u.value=h),u.defaultValue=h}N=N??A,N=typeof N!="function"&&typeof N!="symbol"&&!!N,u.checked=pe?u.checked:!!N,u.defaultChecked=!!N,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(u.name=J)}function Ad(u,h,m){h==="number"&&ql(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function Qc(u,h,m,N){if(u=u.options,h){h={};for(var A=0;A<m.length;A++)h["$"+m[A]]=!0;for(m=0;m<u.length;m++)A=h.hasOwnProperty("$"+u[m].value),u[m].selected!==A&&(u[m].selected=A),A&&N&&(u[m].defaultSelected=!0)}else{for(m=""+xi(m),h=null,A=0;A<u.length;A++){if(u[A].value===m){u[A].selected=!0,N&&(u[A].defaultSelected=!0);return}h!==null||u[A].disabled||(h=u[A])}h!==null&&(h.selected=!0)}}function ny(u,h,m){if(h!=null&&(h=""+xi(h),h!==u.value&&(u.value=h),m==null)){u.defaultValue!==h&&(u.defaultValue=h);return}u.defaultValue=m!=null?""+xi(m):""}function Vf(u,h,m,N){if(h==null){if(N!=null){if(m!=null)throw Error(a(92));if(Q(N)){if(1<N.length)throw Error(a(93));N=N[0]}m=N}m==null&&(m=""),h=m}m=xi(h),u.defaultValue=m,N=u.textContent,N===m&&N!==""&&N!==null&&(u.value=N)}function Go(u,h){if(h){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=h;return}}u.textContent=h}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ry(u,h,m){var N=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?N?u.setProperty(h,""):h==="float"?u.cssFloat="":u[h]="":N?u.setProperty(h,m):typeof m!="number"||m===0||Xc.has(h)?h==="float"?u.cssFloat=m:u[h]=(""+m).trim():u[h]=m+"px"}function ay(u,h,m){if(h!=null&&typeof h!="object")throw Error(a(62));if(u=u.style,m!=null){for(var N in m)!m.hasOwnProperty(N)||h!=null&&h.hasOwnProperty(N)||(N.indexOf("--")===0?u.setProperty(N,""):N==="float"?u.cssFloat="":u[N]="");for(var A in h)N=h[A],h.hasOwnProperty(A)&&m[A]!==N&&ry(u,A,N)}else for(var R in h)h.hasOwnProperty(R)&&ry(u,R,h[R])}function iy(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ed(u){return Yb.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Hf=null;function sy(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Jc=null,Zc=null;function oy(u){var h=tt(u);if(h&&(u=h.stateNode)){var m=u[ln]||null;e:switch(u=h.stateNode,h.type){case"input":if(Uf(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+qi(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var N=m[h];if(N!==u&&N.form===u.form){var A=N[ln]||null;if(!A)throw Error(a(90));Uf(N,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(h=0;h<m.length;h++)N=m[h],N.form===u.form&&ey(N)}break e;case"textarea":ny(u,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Qc(u,!!m.multiple,h,!1)}}}var ly=!1;function Kb(u,h,m){if(ly)return u(h,m);ly=!0;try{var N=u(h);return N}finally{if(ly=!1,(Jc!==null||Zc!==null)&&(Hp(),Jc&&(h=Jc,u=Zc,Zc=Jc=null,oy(h),u)))for(h=0;h<u.length;h++)oy(u[h])}}function Pd(u,h){var m=u.stateNode;if(m===null)return null;var N=m[ln]||null;if(N===null)return null;m=N[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(u=u.type,N=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!N;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(a(231,h,typeof m));return m}var uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=!1;if(uo)try{var Dd={};Object.defineProperty(Dd,"passive",{get:function(){Od=!0}}),window.addEventListener("test",Dd,Dd),window.removeEventListener("test",Dd,Dd)}catch{Od=!1}var Wo=null,cy=null,Gf=null;function Qb(){if(Gf)return Gf;var u,h=cy,m=h.length,N,A="value"in Wo?Wo.value:Wo.textContent,R=A.length;for(u=0;u<m&&h[u]===A[u];u++);var J=m-u;for(N=1;N<=J&&h[m-N]===A[R-N];N++);return Gf=A.slice(u,1<N?1-N:void 0)}function or(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function tr(){return!0}function Xb(){return!1}function Qa(u){function h(m,N,A,R,J){this._reactName=m,this._targetInst=A,this.type=N,this.nativeEvent=R,this.target=J,this.currentTarget=null;for(var pe in u)u.hasOwnProperty(pe)&&(m=u[pe],this[pe]=m?m(R):R[pe]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?tr:Xb,this.isPropagationStopped=Xb,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),h}var Ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wf=Qa(Ul),Md=f({},Ul,{view:0,detail:0}),qS=Qa(Md),Yf,uy,Yr,eu=f({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Yr&&(Yr&&u.type==="mousemove"?(Yf=u.screenX-Yr.screenX,uy=u.screenY-Yr.screenY):uy=Yf=0,Yr=u),Yf)},movementY:function(u){return"movementY"in u?u.movementY:uy}}),Yo=Qa(eu),Jb=f({},eu,{dataTransfer:0}),dy=Qa(Jb),Ui=f({},Md,{relatedTarget:0}),Kf=Qa(Ui),Zb=f({},Ul,{animationName:0,elapsedTime:0,pseudoElement:0}),e0=Qa(Zb),t0=f({},Ul,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),n0=Qa(t0),r0=f({},Ul,{data:0}),Xa=Qa(r0),US={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a0(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=VS[u])?!!h[u]:!1}function Fs(){return a0}var Qf=f({},Md,{key:function(u){if(u.key){var h=US[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=or(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Vi[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(u){return u.type==="keypress"?or(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?or(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),hy=Qa(Qf),kr=f({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ho=Qa(kr),fy=f({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),HS=Qa(fy),py=f({},Ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),GS=Qa(py),WS=f({},eu,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=Qa(WS),i0=f({},Ul,{newState:0,oldState:0}),Xf=Qa(i0),tu=[9,13,27,32],my=uo&&"CompositionEvent"in window,nu=null;uo&&"documentMode"in document&&(nu=document.documentMode);var s0=uo&&"TextEvent"in window&&!nu,Jf=uo&&(!my||nu&&8<nu&&11>=nu),Zf=" ",gy=!1;function o0(u,h){switch(u){case"keyup":return tu.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ep(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Ko=!1;function KS(u,h){switch(u){case"compositionend":return ep(h);case"keypress":return h.which!==32?null:(gy=!0,Zf);case"textInput":return u=h.data,u===Zf&&gy?null:u;default:return null}}function l0(u,h){if(Ko)return u==="compositionend"||!my&&o0(u,h)?(u=Qb(),Gf=cy=Wo=null,Ko=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Jf&&h.locale!=="ko"?null:h.data;default:return null}}var vi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tp(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!vi[u.type]:h==="textarea"}function ru(u,h,m,N){Jc?Zc?Zc.push(N):Zc=[N]:Jc=N,h=Jp(h,"onChange"),0<h.length&&(m=new Wf("onChange","change",null,m,N),u.push({event:m,listeners:h}))}var au=null,iu=null;function QS(u){L1(u,0)}function np(u){var h=gt(u);if(ey(h))return u}function c0(u,h){if(u==="change")return h}var u0=!1;if(uo){var yy;if(uo){var Qo="oninput"in document;if(!Qo){var d0=document.createElement("div");d0.setAttribute("oninput","return;"),Qo=typeof d0.oninput=="function"}yy=Qo}else yy=!1;u0=yy&&(!document.documentMode||9<document.documentMode)}function h0(){au&&(au.detachEvent("onpropertychange",rp),iu=au=null)}function rp(u){if(u.propertyName==="value"&&np(iu)){var h=[];ru(h,iu,u,sy(u)),Kb(QS,h)}}function f0(u,h,m){u==="focusin"?(h0(),au=h,iu=m,au.attachEvent("onpropertychange",rp)):u==="focusout"&&h0()}function Xo(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return np(iu)}function ap(u,h){if(u==="click")return np(h)}function XS(u,h){if(u==="input"||u==="change")return np(h)}function JS(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var bi=typeof Object.is=="function"?Object.is:JS;function $s(u,h){if(bi(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var m=Object.keys(u),N=Object.keys(h);if(m.length!==N.length)return!1;for(N=0;N<m.length;N++){var A=m[N];if(!ye.call(h,A)||!bi(u[A],h[A]))return!1}return!0}function Hi(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function xy(u,h){var m=Hi(u);u=0;for(var N;m;){if(m.nodeType===3){if(N=u+m.textContent.length,u<=h&&N>=h)return{node:m,offset:h-u};u=N}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Hi(m)}}function p0(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?p0(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function m0(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var h=ql(u.document);h instanceof u.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)u=h.contentWindow;else break;h=ql(u.document)}return h}function vy(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}var ZS=uo&&"documentMode"in document&&11>=document.documentMode,su=null,Jo=null,He=null,st=!1;function rt(u,h,m){var N=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;st||su==null||su!==ql(N)||(N=su,"selectionStart"in N&&vy(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),He&&$s(He,N)||(He=N,N=Jp(Jo,"onSelect"),0<N.length&&(h=new Wf("onSelect","select",null,h,m),u.push({event:h,listeners:N}),h.target=su)))}function At(u,h){var m={};return m[u.toLowerCase()]=h.toLowerCase(),m["Webkit"+u]="webkit"+h,m["Moz"+u]="moz"+h,m}var Jt={animationend:At("Animation","AnimationEnd"),animationiteration:At("Animation","AnimationIteration"),animationstart:At("Animation","AnimationStart"),transitionrun:At("Transition","TransitionRun"),transitionstart:At("Transition","TransitionStart"),transitioncancel:At("Transition","TransitionCancel"),transitionend:At("Transition","TransitionEnd")},$n={},Kr={};uo&&(Kr=document.createElement("div").style,"AnimationEvent"in window||(delete Jt.animationend.animation,delete Jt.animationiteration.animation,delete Jt.animationstart.animation),"TransitionEvent"in window||delete Jt.transitionend.transition);function Bn(u){if($n[u])return $n[u];if(!Jt[u])return u;var h=Jt[u],m;for(m in h)if(h.hasOwnProperty(m)&&m in Kr)return $n[u]=h[m];return u}var ip=Bn("animationend"),g0=Bn("animationiteration"),ji=Bn("animationstart"),sp=Bn("transitionrun"),e_=Bn("transitionstart"),ou=Bn("transitioncancel"),Id=Bn("transitionend"),Rd=new Map,Kn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kn.push("scrollEnd");function ps(u,h){Rd.set(u,h),ba(h,[u])}var by=new WeakMap;function Ba(u,h){if(typeof u=="object"&&u!==null){var m=by.get(u);return m!==void 0?m:(h={value:u,source:h,stack:Xg(h)},by.set(u,h),h)}return{value:u,source:h,stack:Xg(h)}}var Gi=[],lu=0,jy=0;function Vl(){for(var u=lu,h=jy=lu=0;h<u;){var m=Gi[h];Gi[h++]=null;var N=Gi[h];Gi[h++]=null;var A=Gi[h];Gi[h++]=null;var R=Gi[h];if(Gi[h++]=null,N!==null&&A!==null){var J=N.pending;J===null?A.next=A:(A.next=J.next,J.next=A),N.pending=A}R!==0&&Ld(m,A,R)}}function ms(u,h,m,N){Gi[lu++]=u,Gi[lu++]=h,Gi[lu++]=m,Gi[lu++]=N,jy|=N,u.lanes|=N,u=u.alternate,u!==null&&(u.lanes|=N)}function cu(u,h,m,N){return ms(u,h,m,N),Fd(u)}function Hl(u,h){return ms(u,null,null,h),Fd(u)}function Ld(u,h,m){u.lanes|=m;var N=u.alternate;N!==null&&(N.lanes|=m);for(var A=!1,R=u.return;R!==null;)R.childLanes|=m,N=R.alternate,N!==null&&(N.childLanes|=m),R.tag===22&&(u=R.stateNode,u===null||u._visibility&1||(A=!0)),u=R,R=R.return;return u.tag===3?(R=u.stateNode,A&&h!==null&&(A=31-fe(m),u=R.hiddenUpdates,N=u[A],N===null?u[A]=[h]:N.push(h),h.lane=m|536870912),R):null}function Fd(u){if(50<Pu)throw Pu=0,mx=null,Error(a(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}var Gl={};function op(u,h,m,N){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(u,h,m,N){return new op(u,h,m,N)}function Wl(u){return u=u.prototype,!(!u||!u.isReactComponent)}function za(u,h){var m=u.alternate;return m===null?(m=Ja(u.tag,h,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=h,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,h=u.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function $d(u,h){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,h=m.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function lp(u,h,m,N,A,R){var J=0;if(N=u,typeof u=="function")Wl(u)&&(J=1);else if(typeof u=="string")J=P_(u,m,Ie.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case B:return u=Ja(31,m,h,A),u.elementType=B,u.lanes=R,u;case b:return Yl(m.children,A,R,h);case j:J=8,A|=24;break;case S:return u=Ja(12,m,h,A|2),u.elementType=S,u.lanes=R,u;case k:return u=Ja(13,m,h,A),u.elementType=k,u.lanes=R,u;case O:return u=Ja(19,m,h,A),u.elementType=O,u.lanes=R,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case _:case C:J=10;break e;case T:J=9;break e;case E:J=11;break e;case I:J=14;break e;case F:J=16,N=null;break e}J=29,m=Error(a(130,u===null?"null":typeof u,"")),N=null}return h=Ja(J,m,h,A),h.elementType=u,h.type=N,h.lanes=R,h}function Yl(u,h,m,N){return u=Ja(7,u,N,h),u.lanes=m,u}function wy(u,h,m){return u=Ja(6,u,null,h),u.lanes=m,u}function uu(u,h,m){return h=Ja(4,u.children!==null?u.children:[],u.key,h),h.lanes=m,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}var fo=[],Zo=0,cp=null,Bd=0,Wi=[],Yi=0,Nr=null,Ar=1,po="";function Kl(u,h){fo[Zo++]=Bd,fo[Zo++]=cp,cp=u,Bd=h}function Ny(u,h,m){Wi[Yi++]=Ar,Wi[Yi++]=po,Wi[Yi++]=Nr,Nr=u;var N=Ar;u=po;var A=32-fe(N)-1;N&=~(1<<A),m+=1;var R=32-fe(h)+A;if(30<R){var J=A-A%5;R=(N&(1<<J)-1).toString(32),N>>=J,A-=J,Ar=1<<32-fe(h)+A|m<<A|N,po=R+u}else Ar=1<<R|m<<A|N,po=u}function Sy(u){u.return!==null&&(Kl(u,1),Ny(u,1,0))}function zd(u){for(;u===cp;)cp=fo[--Zo],fo[Zo]=null,Bd=fo[--Zo],fo[Zo]=null;for(;u===Nr;)Nr=Wi[--Yi],Wi[Yi]=null,po=Wi[--Yi],Wi[Yi]=null,Ar=Wi[--Yi],Wi[Yi]=null}var na=null,Er=null,kn=!1,gs=null,Za=!1,du=Error(a(519));function Ki(u){var h=Error(a(418,""));throw el(Ba(h,u)),du}function y0(u){var h=u.stateNode,m=u.type,N=u.memoizedProps;switch(h[Vt]=u,h[ln]=N,m){case"dialog":_n("cancel",h),_n("close",h);break;case"iframe":case"object":case"embed":_n("load",h);break;case"video":case"audio":for(m=0;m<Ah.length;m++)_n(Ah[m],h);break;case"source":_n("error",h);break;case"img":case"image":case"link":_n("error",h),_n("load",h);break;case"details":_n("toggle",h);break;case"input":_n("invalid",h),ty(h,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0),qf(h);break;case"select":_n("invalid",h);break;case"textarea":_n("invalid",h),Vf(h,N.value,N.defaultValue,N.children),qf(h)}m=N.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||N.suppressHydrationWarning===!0||B1(h.textContent,m)?(N.popover!=null&&(_n("beforetoggle",h),_n("toggle",h)),N.onScroll!=null&&_n("scroll",h),N.onScrollEnd!=null&&_n("scrollend",h),N.onClick!=null&&(h.onclick=Zp),h=!0):h=!1,h||Ki(u)}function x0(u){for(na=u.return;na;)switch(na.tag){case 5:case 13:Za=!1;return;case 27:case 3:Za=!0;return;default:na=na.return}}function qd(u){if(u!==na)return!1;if(!kn)return x0(u),kn=!0,!1;var h=u.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||tm(u.type,u.memoizedProps)),m=!m),m&&Er&&Ki(u),x0(u),h===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(h===0){Er=ws(u.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;u=u.nextSibling}Er=null}}else h===27?(h=Er,ts(u.type)?(u=Ax,Ax=null,Er=u):Er=h):Er=na?ws(u.stateNode.nextSibling):null;return!0}function Ud(){Er=na=null,kn=!1}function v0(){var u=gs;return u!==null&&(oi===null?oi=u:oi.push.apply(oi,u),gs=null),u}function el(u){gs===null?gs=[u]:gs.push(u)}var Ql=ce(null),tl=null,he=null;function wi(u,h,m){Y(Ql,h._currentValue),h._currentValue=m}function Qi(u){u._currentValue=Ql.current,je(Ql)}function ei(u,h,m){for(;u!==null;){var N=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,N!==null&&(N.childLanes|=h)):N!==null&&(N.childLanes&h)!==h&&(N.childLanes|=h),u===m)break;u=u.return}}function vn(u,h,m,N){var A=u.child;for(A!==null&&(A.return=u);A!==null;){var R=A.dependencies;if(R!==null){var J=A.child;R=R.firstContext;e:for(;R!==null;){var pe=R;R=A;for(var De=0;De<h.length;De++)if(pe.context===h[De]){R.lanes|=m,pe=R.alternate,pe!==null&&(pe.lanes|=m),ei(R.return,m,u),N||(J=null);break e}R=pe.next}}else if(A.tag===18){if(J=A.return,J===null)throw Error(a(341));J.lanes|=m,R=J.alternate,R!==null&&(R.lanes|=m),ei(J,m,u),J=null}else J=A.child;if(J!==null)J.return=A;else for(J=A;J!==null;){if(J===u){J=null;break}if(A=J.sibling,A!==null){A.return=J.return,J=A;break}J=J.return}A=J}}function Vd(u,h,m,N){u=null;for(var A=h,R=!1;A!==null;){if(!R){if((A.flags&524288)!==0)R=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var J=A.alternate;if(J===null)throw Error(a(387));if(J=J.memoizedProps,J!==null){var pe=A.type;bi(A.pendingProps.value,J.value)||(u!==null?u.push(pe):u=[pe])}}else if(A===Le.current){if(J=A.alternate,J===null)throw Error(a(387));J.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(u!==null?u.push($u):u=[$u])}A=A.return}u!==null&&vn(h,u,m,N),h.flags|=262144}function up(u){for(u=u.firstContext;u!==null;){if(!bi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Xl(u){tl=u,he=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function zr(u){return b0(tl,u)}function dp(u,h){return tl===null&&Xl(u),b0(u,h)}function b0(u,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},he===null){if(u===null)throw Error(a(308));he=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else he=he.next=h;return m}var t_=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(m,N){u.push(N)}};this.abort=function(){h.aborted=!0,u.forEach(function(m){return m()})}},n_=t.unstable_scheduleCallback,r_=t.unstable_NormalPriority,mr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _y(){return{controller:new t_,data:new Map,refCount:0}}function Hd(u){u.refCount--,u.refCount===0&&n_(r_,function(){u.controller.abort()})}var Gd=null,Cy=0,hu=0,ti=null;function a_(u,h){if(Gd===null){var m=Gd=[];Cy=0,hu=Xp(),ti={status:"pending",value:void 0,then:function(N){m.push(N)}}}return Cy++,h.then(j0,j0),h}function j0(){if(--Cy===0&&Gd!==null){ti!==null&&(ti.status="fulfilled");var u=Gd;Gd=null,hu=0,ti=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function i_(u,h){var m=[],N={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return u.then(function(){N.status="fulfilled",N.value=h;for(var A=0;A<m.length;A++)(0,m[A])(h)},function(A){for(N.status="rejected",N.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),N}var w0=q.S;q.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&a_(u,h),w0!==null&&w0(u,h)};var Jl=ce(null);function mo(){var u=Jl.current;return u!==null?u:vr.pooledCache}function hp(u,h){h===null?Y(Jl,Jl.current):Y(Jl,h.pool)}function N0(){var u=mo();return u===null?null:{parent:mr._currentValue,pool:u}}var qa=Error(a(460)),S0=Error(a(474)),fp=Error(a(542)),Ty={then:function(){}};function _0(u){return u=u.status,u==="fulfilled"||u==="rejected"}function pp(){}function ky(u,h,m){switch(m=u[m],m===void 0?u.push(h):m!==h&&(h.then(pp,pp),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,T0(u),u;default:if(typeof h.status=="string")h.then(pp,pp);else{if(u=vr,u!==null&&100<u.shellSuspendCounter)throw Error(a(482));u=h,u.status="pending",u.then(function(N){if(h.status==="pending"){var A=h;A.status="fulfilled",A.value=N}},function(N){if(h.status==="pending"){var A=h;A.status="rejected",A.reason=N}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,T0(u),u}throw fu=h,qa}}var fu=null;function C0(){if(fu===null)throw Error(a(459));var u=fu;return fu=null,u}function T0(u){if(u===qa||u===fp)throw Error(a(483))}var Bs=!1;function Zl(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pu(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function nl(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function go(u,h,m){var N=u.updateQueue;if(N===null)return null;if(N=N.shared,(rr&2)!==0){var A=N.pending;return A===null?h.next=h:(h.next=A.next,A.next=h),N.pending=h,h=Fd(u),Ld(u,null,m),h}return ms(u,N,h,m),Fd(u)}function Wd(u,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var N=h.lanes;N&=u.pendingLanes,m|=N,h.lanes=m,Ve(u,m)}}function ys(u,h){var m=u.updateQueue,N=u.alternate;if(N!==null&&(N=N.updateQueue,m===N)){var A=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var J={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};R===null?A=R=J:R=R.next=J,m=m.next}while(m!==null);R===null?A=R=h:R=R.next=h}else A=R=h;m={baseState:N.baseState,firstBaseUpdate:A,lastBaseUpdate:R,shared:N.shared,callbacks:N.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=h}var Yd=!1;function xs(){if(Yd){var u=ti;if(u!==null)throw u}}function Aa(u,h,m,N){Yd=!1;var A=u.updateQueue;Bs=!1;var R=A.firstBaseUpdate,J=A.lastBaseUpdate,pe=A.shared.pending;if(pe!==null){A.shared.pending=null;var De=pe,Ze=De.next;De.next=null,J===null?R=Ze:J.next=Ze,J=De;var ut=u.alternate;ut!==null&&(ut=ut.updateQueue,pe=ut.lastBaseUpdate,pe!==J&&(pe===null?ut.firstBaseUpdate=Ze:pe.next=Ze,ut.lastBaseUpdate=De))}if(R!==null){var pt=A.baseState;J=0,ut=Ze=De=null,pe=R;do{var nt=pe.lane&-536870913,et=nt!==pe.lane;if(et?(Ln&nt)===nt:(N&nt)===nt){nt!==0&&nt===hu&&(Yd=!0),ut!==null&&(ut=ut.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Yt=u,Wt=pe;nt=h;var cr=m;switch(Wt.tag){case 1:if(Yt=Wt.payload,typeof Yt=="function"){pt=Yt.call(cr,pt,nt);break e}pt=Yt;break e;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=Wt.payload,nt=typeof Yt=="function"?Yt.call(cr,pt,nt):Yt,nt==null)break e;pt=f({},pt,nt);break e;case 2:Bs=!0}}nt=pe.callback,nt!==null&&(u.flags|=64,et&&(u.flags|=8192),et=A.callbacks,et===null?A.callbacks=[nt]:et.push(nt))}else et={lane:nt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},ut===null?(Ze=ut=et,De=pt):ut=ut.next=et,J|=nt;if(pe=pe.next,pe===null){if(pe=A.shared.pending,pe===null)break;et=pe,pe=et.next,et.next=null,A.lastBaseUpdate=et,A.shared.pending=null}}while(!0);ut===null&&(De=pt),A.baseState=De,A.firstBaseUpdate=Ze,A.lastBaseUpdate=ut,R===null&&(A.shared.lanes=0),dl|=J,u.lanes=J,u.memoizedState=pt}}function k0(u,h){if(typeof u!="function")throw Error(a(191,u));u.call(h)}function Ay(u,h){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)k0(m[u],h)}var ec=ce(null),rl=ce(0);function yo(u,h){u=Co,Y(rl,u),Y(ec,h),Co=u|h.baseLanes}function mp(){Y(rl,Co),Y(ec,ec.current)}function Ey(){Co=rl.current,je(ec),je(rl)}var vs=0,yn=null,nr=null,An=null,mu=!1,tc=!1,Ea=!1,gu=0,al=0,Xi=null,A0=0;function En(){throw Error(a(321))}function Kd(u,h){if(h===null)return!1;for(var m=0;m<h.length&&m<u.length;m++)if(!bi(u[m],h[m]))return!1;return!0}function Py(u,h,m,N,A,R){return vs=R,yn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,q.H=u===null||u.memoizedState===null?q0:Ky,Ea=!1,R=m(N,A),Ea=!1,tc&&(R=P0(h,m,N,A)),E0(u),R}function E0(u){q.H=sh;var h=nr!==null&&nr.next!==null;if(vs=0,An=nr=yn=null,mu=!1,al=0,Xi=null,h)throw Error(a(300));u===null||da||(u=u.dependencies,u!==null&&up(u)&&(da=!0))}function P0(u,h,m,N){yn=u;var A=0;do{if(tc&&(Xi=null),al=0,tc=!1,25<=A)throw Error(a(301));if(A+=1,An=nr=null,u.updateQueue!=null){var R=u.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}q.H=U0,R=h(m,N)}while(tc);return R}function Oy(){var u=q.H,h=u.useState()[0];return h=typeof h.then=="function"?Qd(h):h,u=u.useState()[0],(nr!==null?nr.memoizedState:null)!==u&&(yn.flags|=1024),h}function Dy(){var u=gu!==0;return gu=0,u}function nc(u,h,m){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~m}function gp(u){if(mu){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}mu=!1}vs=0,An=nr=yn=null,tc=!1,al=gu=0,Xi=null}function ni(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?yn.memoizedState=An=u:An=An.next=u,An}function Qr(){if(nr===null){var u=yn.alternate;u=u!==null?u.memoizedState:null}else u=nr.next;var h=An===null?yn.memoizedState:An.next;if(h!==null)An=h,nr=u;else{if(u===null)throw yn.alternate===null?Error(a(467)):Error(a(310));nr=u,u={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},An===null?yn.memoizedState=An=u:An=An.next=u}return An}function rc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qd(u){var h=al;return al+=1,Xi===null&&(Xi=[]),u=ky(Xi,u,h),h=yn,(An===null?h.memoizedState:An.next)===null&&(h=h.alternate,q.H=h===null||h.memoizedState===null?q0:Ky),u}function yp(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Qd(u);if(u.$$typeof===C)return zr(u)}throw Error(a(438,String(u)))}function Xd(u){var h=null,m=yn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var N=yn.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(h={data:N.data.map(function(A){return A.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=rc(),yn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(u),N=0;N<u;N++)m[N]=$;return h.index++,m}function zs(u,h){return typeof h=="function"?h(u):h}function xp(u){var h=Qr();return My(h,nr,u)}function My(u,h,m){var N=u.queue;if(N===null)throw Error(a(311));N.lastRenderedReducer=m;var A=u.baseQueue,R=N.pending;if(R!==null){if(A!==null){var J=A.next;A.next=R.next,R.next=J}h.baseQueue=A=R,N.pending=null}if(R=u.baseState,A===null)u.memoizedState=R;else{h=A.next;var pe=J=null,De=null,Ze=h,ut=!1;do{var pt=Ze.lane&-536870913;if(pt!==Ze.lane?(Ln&pt)===pt:(vs&pt)===pt){var nt=Ze.revertLane;if(nt===0)De!==null&&(De=De.next={lane:0,revertLane:0,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),pt===hu&&(ut=!0);else if((vs&nt)===nt){Ze=Ze.next,nt===hu&&(ut=!0);continue}else pt={lane:0,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},De===null?(pe=De=pt,J=R):De=De.next=pt,yn.lanes|=nt,dl|=nt;pt=Ze.action,Ea&&m(R,pt),R=Ze.hasEagerState?Ze.eagerState:m(R,pt)}else nt={lane:pt,revertLane:Ze.revertLane,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},De===null?(pe=De=nt,J=R):De=De.next=nt,yn.lanes|=pt,dl|=pt;Ze=Ze.next}while(Ze!==null&&Ze!==h);if(De===null?J=R:De.next=pe,!bi(R,u.memoizedState)&&(da=!0,ut&&(m=ti,m!==null)))throw m;u.memoizedState=R,u.baseState=J,u.baseQueue=De,N.lastRenderedState=R}return A===null&&(N.lanes=0),[u.memoizedState,N.dispatch]}function Iy(u){var h=Qr(),m=h.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=u;var N=m.dispatch,A=m.pending,R=h.memoizedState;if(A!==null){m.pending=null;var J=A=A.next;do R=u(R,J.action),J=J.next;while(J!==A);bi(R,h.memoizedState)||(da=!0),h.memoizedState=R,h.baseQueue===null&&(h.baseState=R),m.lastRenderedState=R}return[R,N]}function Ry(u,h,m){var N=yn,A=Qr(),R=kn;if(R){if(m===void 0)throw Error(a(407));m=m()}else m=h();var J=!bi((nr||A).memoizedState,m);J&&(A.memoizedState=m,da=!0),A=A.queue;var pe=bp.bind(null,N,A,u);if(eh(2048,8,pe,[u]),A.getSnapshot!==h||J||An!==null&&An.memoizedState.tag&1){if(N.flags|=2048,yu(9,_p(),O0.bind(null,N,A,m,h),null),vr===null)throw Error(a(349));R||(vs&124)!==0||vp(N,h,m)}return m}function vp(u,h,m){u.flags|=16384,u={getSnapshot:h,value:m},h=yn.updateQueue,h===null?(h=rc(),yn.updateQueue=h,h.stores=[u]):(m=h.stores,m===null?h.stores=[u]:m.push(u))}function O0(u,h,m,N){h.value=m,h.getSnapshot=N,Ly(h)&&Fy(u)}function bp(u,h,m){return m(function(){Ly(h)&&Fy(u)})}function Ly(u){var h=u.getSnapshot;u=u.value;try{var m=h();return!bi(u,m)}catch{return!0}}function Fy(u){var h=Hl(u,2);h!==null&&Ti(h,u,2)}function jp(u){var h=ni();if(typeof u=="function"){var m=u;if(u=m(),Ea){ue(!0);try{m()}finally{ue(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:u},h}function Jd(u,h,m,N){return u.baseState=m,My(u,nr,typeof N=="function"?N:zs)}function s_(u,h,m,N,A){if(Ap(u))throw Error(a(485));if(u=h.action,u!==null){var R={payload:A,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){R.listeners.push(J)}};q.T!==null?m(!0):R.isTransition=!1,N(R),m=h.pending,m===null?(R.next=h.pending=R,$y(h,R)):(R.next=m.next,h.pending=m.next=R)}}function $y(u,h){var m=h.action,N=h.payload,A=u.state;if(h.isTransition){var R=q.T,J={};q.T=J;try{var pe=m(A,N),De=q.S;De!==null&&De(J,pe),By(u,h,pe)}catch(Ze){wp(u,h,Ze)}finally{q.T=R}}else try{R=m(A,N),By(u,h,R)}catch(Ze){wp(u,h,Ze)}}function By(u,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(N){D0(u,h,N)},function(N){return wp(u,h,N)}):D0(u,h,m)}function D0(u,h,m){h.status="fulfilled",h.value=m,M0(h),u.state=m,h=u.pending,h!==null&&(m=h.next,m===h?u.pending=null:(m=m.next,h.next=m,$y(u,m)))}function wp(u,h,m){var N=u.pending;if(u.pending=null,N!==null){N=N.next;do h.status="rejected",h.reason=m,M0(h),h=h.next;while(h!==N)}u.action=null}function M0(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function Np(u,h){return h}function zy(u,h){if(kn){var m=vr.formState;if(m!==null){e:{var N=yn;if(kn){if(Er){t:{for(var A=Er,R=Za;A.nodeType!==8;){if(!R){A=null;break t}if(A=ws(A.nextSibling),A===null){A=null;break t}}R=A.data,A=R==="F!"||R==="F"?A:null}if(A){Er=ws(A.nextSibling),N=A.data==="F!";break e}}Ki(N)}N=!1}N&&(h=m[0])}}return m=ni(),m.memoizedState=m.baseState=h,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Np,lastRenderedState:h},m.queue=N,m=Gy.bind(null,yn,N),N.dispatch=m,N=jp(!1),R=Wy.bind(null,yn,!1,N.queue),N=ni(),A={state:h,dispatch:null,action:u,pending:null},N.queue=A,m=s_.bind(null,yn,A,R,m),A.dispatch=m,N.memoizedState=u,[h,m,!1]}function Sp(u){var h=Qr();return I0(h,nr,u)}function I0(u,h,m){if(h=My(u,h,Np)[0],u=xp(zs)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var N=Qd(h)}catch(J){throw J===qa?fp:J}else N=h;h=Qr();var A=h.queue,R=A.dispatch;return m!==h.memoizedState&&(yn.flags|=2048,yu(9,_p(),qy.bind(null,A,m),null)),[N,R,u]}function qy(u,h){u.action=h}function mn(u){var h=Qr(),m=nr;if(m!==null)return I0(h,m,u);Qr(),h=h.memoizedState,m=Qr();var N=m.queue.dispatch;return m.memoizedState=u,[h,N,!1]}function yu(u,h,m,N){return u={tag:u,create:m,deps:N,inst:h,next:null},h=yn.updateQueue,h===null&&(h=rc(),yn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=u.next=u:(N=m.next,m.next=u,u.next=N,h.lastEffect=u),u}function _p(){return{destroy:void 0,resource:void 0}}function xu(){return Qr().memoizedState}function Zd(u,h,m,N){var A=ni();N=N===void 0?null:N,yn.flags|=u,A.memoizedState=yu(1|h,_p(),m,N)}function eh(u,h,m,N){var A=Qr();N=N===void 0?null:N;var R=A.memoizedState.inst;nr!==null&&N!==null&&Kd(N,nr.memoizedState.deps)?A.memoizedState=yu(h,R,m,N):(yn.flags|=u,A.memoizedState=yu(1|h,R,m,N))}function R0(u,h){Zd(8390656,8,u,h)}function Ni(u,h){eh(2048,8,u,h)}function L0(u,h){return eh(4,2,u,h)}function th(u,h){return eh(4,4,u,h)}function Cp(u,h){if(typeof h=="function"){u=u();var m=h(u);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function Uy(u,h,m){m=m!=null?m.concat([u]):null,eh(4,4,Cp.bind(null,h,u),m)}function Tp(){}function ri(u,h){var m=Qr();h=h===void 0?null:h;var N=m.memoizedState;return h!==null&&Kd(h,N[1])?N[0]:(m.memoizedState=[u,h],u)}function xo(u,h){var m=Qr();h=h===void 0?null:h;var N=m.memoizedState;if(h!==null&&Kd(h,N[1]))return N[0];if(N=u(),Ea){ue(!0);try{u()}finally{ue(!1)}}return m.memoizedState=[N,h],N}function nh(u,h,m){return m===void 0||(vs&1073741824)!==0?u.memoizedState=h:(u.memoizedState=m,u=g1(),yn.lanes|=u,dl|=u,m)}function Vy(u,h,m,N){return bi(m,h)?m:ec.current!==null?(u=nh(u,m,N),bi(u,h)||(da=!0),u):(vs&42)===0?(da=!0,u.memoizedState=m):(u=g1(),yn.lanes|=u,dl|=u,h)}function rh(u,h,m,N,A){var R=G.p;G.p=R!==0&&8>R?R:8;var J=q.T,pe={};q.T=pe,Wy(u,!1,h,m);try{var De=A(),Ze=q.S;if(Ze!==null&&Ze(pe,De),De!==null&&typeof De=="object"&&typeof De.then=="function"){var ut=i_(De,N);ac(u,h,ut,Oa(u))}else ac(u,h,N,Oa(u))}catch(pt){ac(u,h,{then:function(){},status:"rejected",reason:pt},Oa())}finally{G.p=R,q.T=J}}function F0(){}function ah(u,h,m,N){if(u.tag!==5)throw Error(a(476));var A=Hy(u).queue;rh(u,A,h,ie,m===null?F0:function(){return kp(u),m(N)})}function Hy(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:ie},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:m},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function kp(u){var h=Hy(u).next.queue;ac(u,h,{},Oa())}function ih(){return zr($u)}function vo(){return Qr().memoizedState}function $0(){return Qr().memoizedState}function il(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var m=Oa();u=nl(m);var N=go(h,u,m);N!==null&&(Ti(N,h,m),Wd(N,h,m)),h={cache:_y()},u.payload=h;return}h=h.return}}function B0(u,h,m){var N=Oa();m={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Ap(u)?z0(h,m):(m=cu(u,h,m,N),m!==null&&(Ti(m,u,N),Yy(m,h,N)))}function Gy(u,h,m){var N=Oa();ac(u,h,m,N)}function ac(u,h,m,N){var A={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Ap(u))z0(h,A);else{var R=u.alternate;if(u.lanes===0&&(R===null||R.lanes===0)&&(R=h.lastRenderedReducer,R!==null))try{var J=h.lastRenderedState,pe=R(J,m);if(A.hasEagerState=!0,A.eagerState=pe,bi(pe,J))return ms(u,h,A,0),vr===null&&Vl(),!1}catch{}finally{}if(m=cu(u,h,A,N),m!==null)return Ti(m,u,N),Yy(m,h,N),!0}return!1}function Wy(u,h,m,N){if(N={lane:2,revertLane:Xp(),action:N,hasEagerState:!1,eagerState:null,next:null},Ap(u)){if(h)throw Error(a(479))}else h=cu(u,m,N,2),h!==null&&Ti(h,u,2)}function Ap(u){var h=u.alternate;return u===yn||h!==null&&h===yn}function z0(u,h){tc=mu=!0;var m=u.pending;m===null?h.next=h:(h.next=m.next,m.next=h),u.pending=h}function Yy(u,h,m){if((m&4194048)!==0){var N=h.lanes;N&=u.pendingLanes,m|=N,h.lanes=m,Ve(u,m)}}var sh={readContext:zr,use:yp,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En},q0={readContext:zr,use:yp,useCallback:function(u,h){return ni().memoizedState=[u,h===void 0?null:h],u},useContext:zr,useEffect:R0,useImperativeHandle:function(u,h,m){m=m!=null?m.concat([u]):null,Zd(4194308,4,Cp.bind(null,h,u),m)},useLayoutEffect:function(u,h){return Zd(4194308,4,u,h)},useInsertionEffect:function(u,h){Zd(4,2,u,h)},useMemo:function(u,h){var m=ni();h=h===void 0?null:h;var N=u();if(Ea){ue(!0);try{u()}finally{ue(!1)}}return m.memoizedState=[N,h],N},useReducer:function(u,h,m){var N=ni();if(m!==void 0){var A=m(h);if(Ea){ue(!0);try{m(h)}finally{ue(!1)}}}else A=h;return N.memoizedState=N.baseState=A,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:A},N.queue=u,u=u.dispatch=B0.bind(null,yn,u),[N.memoizedState,u]},useRef:function(u){var h=ni();return u={current:u},h.memoizedState=u},useState:function(u){u=jp(u);var h=u.queue,m=Gy.bind(null,yn,h);return h.dispatch=m,[u.memoizedState,m]},useDebugValue:Tp,useDeferredValue:function(u,h){var m=ni();return nh(m,u,h)},useTransition:function(){var u=jp(!1);return u=rh.bind(null,yn,u.queue,!0,!1),ni().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,m){var N=yn,A=ni();if(kn){if(m===void 0)throw Error(a(407));m=m()}else{if(m=h(),vr===null)throw Error(a(349));(Ln&124)!==0||vp(N,h,m)}A.memoizedState=m;var R={value:m,getSnapshot:h};return A.queue=R,R0(bp.bind(null,N,R,u),[u]),N.flags|=2048,yu(9,_p(),O0.bind(null,N,R,m,h),null),m},useId:function(){var u=ni(),h=vr.identifierPrefix;if(kn){var m=po,N=Ar;m=(N&~(1<<32-fe(N)-1)).toString(32)+m,h=""+h+"R"+m,m=gu++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=A0++,h=""+h+"r"+m.toString(32)+"";return u.memoizedState=h},useHostTransitionStatus:ih,useFormState:zy,useActionState:zy,useOptimistic:function(u){var h=ni();h.memoizedState=h.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=Wy.bind(null,yn,!0,m),m.dispatch=h,[u,h]},useMemoCache:Xd,useCacheRefresh:function(){return ni().memoizedState=il.bind(null,yn)}},Ky={readContext:zr,use:yp,useCallback:ri,useContext:zr,useEffect:Ni,useImperativeHandle:Uy,useInsertionEffect:L0,useLayoutEffect:th,useMemo:xo,useReducer:xp,useRef:xu,useState:function(){return xp(zs)},useDebugValue:Tp,useDeferredValue:function(u,h){var m=Qr();return Vy(m,nr.memoizedState,u,h)},useTransition:function(){var u=xp(zs)[0],h=Qr().memoizedState;return[typeof u=="boolean"?u:Qd(u),h]},useSyncExternalStore:Ry,useId:vo,useHostTransitionStatus:ih,useFormState:Sp,useActionState:Sp,useOptimistic:function(u,h){var m=Qr();return Jd(m,nr,u,h)},useMemoCache:Xd,useCacheRefresh:$0},U0={readContext:zr,use:yp,useCallback:ri,useContext:zr,useEffect:Ni,useImperativeHandle:Uy,useInsertionEffect:L0,useLayoutEffect:th,useMemo:xo,useReducer:Iy,useRef:xu,useState:function(){return Iy(zs)},useDebugValue:Tp,useDeferredValue:function(u,h){var m=Qr();return nr===null?nh(m,u,h):Vy(m,nr.memoizedState,u,h)},useTransition:function(){var u=Iy(zs)[0],h=Qr().memoizedState;return[typeof u=="boolean"?u:Qd(u),h]},useSyncExternalStore:Ry,useId:vo,useHostTransitionStatus:ih,useFormState:mn,useActionState:mn,useOptimistic:function(u,h){var m=Qr();return nr!==null?Jd(m,nr,u,h):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:$0},ra=null,ai=0;function Ep(u){var h=ai;return ai+=1,ra===null&&(ra=[]),ky(ra,u,h)}function oh(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function ic(u,h){throw h.$$typeof===p?Error(a(525)):(u=Object.prototype.toString.call(h),Error(a(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function sc(u){var h=u._init;return h(u._payload)}function Qy(u){function h(Ge,qe){if(u){var Qe=Ge.deletions;Qe===null?(Ge.deletions=[qe],Ge.flags|=16):Qe.push(qe)}}function m(Ge,qe){if(!u)return null;for(;qe!==null;)h(Ge,qe),qe=qe.sibling;return null}function N(Ge){for(var qe=new Map;Ge!==null;)Ge.key!==null?qe.set(Ge.key,Ge):qe.set(Ge.index,Ge),Ge=Ge.sibling;return qe}function A(Ge,qe){return Ge=za(Ge,qe),Ge.index=0,Ge.sibling=null,Ge}function R(Ge,qe,Qe){return Ge.index=Qe,u?(Qe=Ge.alternate,Qe!==null?(Qe=Qe.index,Qe<qe?(Ge.flags|=67108866,qe):Qe):(Ge.flags|=67108866,qe)):(Ge.flags|=1048576,qe)}function J(Ge){return u&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function pe(Ge,qe,Qe,ht){return qe===null||qe.tag!==6?(qe=wy(Qe,Ge.mode,ht),qe.return=Ge,qe):(qe=A(qe,Qe),qe.return=Ge,qe)}function De(Ge,qe,Qe,ht){var Mt=Qe.type;return Mt===b?ut(Ge,qe,Qe.props.children,ht,Qe.key):qe!==null&&(qe.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===F&&sc(Mt)===qe.type)?(qe=A(qe,Qe.props),oh(qe,Qe),qe.return=Ge,qe):(qe=lp(Qe.type,Qe.key,Qe.props,null,Ge.mode,ht),oh(qe,Qe),qe.return=Ge,qe)}function Ze(Ge,qe,Qe,ht){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==Qe.containerInfo||qe.stateNode.implementation!==Qe.implementation?(qe=uu(Qe,Ge.mode,ht),qe.return=Ge,qe):(qe=A(qe,Qe.children||[]),qe.return=Ge,qe)}function ut(Ge,qe,Qe,ht,Mt){return qe===null||qe.tag!==7?(qe=Yl(Qe,Ge.mode,ht,Mt),qe.return=Ge,qe):(qe=A(qe,Qe),qe.return=Ge,qe)}function pt(Ge,qe,Qe){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return qe=wy(""+qe,Ge.mode,Qe),qe.return=Ge,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case g:return Qe=lp(qe.type,qe.key,qe.props,null,Ge.mode,Qe),oh(Qe,qe),Qe.return=Ge,Qe;case x:return qe=uu(qe,Ge.mode,Qe),qe.return=Ge,qe;case F:var ht=qe._init;return qe=ht(qe._payload),pt(Ge,qe,Qe)}if(Q(qe)||V(qe))return qe=Yl(qe,Ge.mode,Qe,null),qe.return=Ge,qe;if(typeof qe.then=="function")return pt(Ge,Ep(qe),Qe);if(qe.$$typeof===C)return pt(Ge,dp(Ge,qe),Qe);ic(Ge,qe)}return null}function nt(Ge,qe,Qe,ht){var Mt=qe!==null?qe.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Mt!==null?null:pe(Ge,qe,""+Qe,ht);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:return Qe.key===Mt?De(Ge,qe,Qe,ht):null;case x:return Qe.key===Mt?Ze(Ge,qe,Qe,ht):null;case F:return Mt=Qe._init,Qe=Mt(Qe._payload),nt(Ge,qe,Qe,ht)}if(Q(Qe)||V(Qe))return Mt!==null?null:ut(Ge,qe,Qe,ht,null);if(typeof Qe.then=="function")return nt(Ge,qe,Ep(Qe),ht);if(Qe.$$typeof===C)return nt(Ge,qe,dp(Ge,Qe),ht);ic(Ge,Qe)}return null}function et(Ge,qe,Qe,ht,Mt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Ge=Ge.get(Qe)||null,pe(qe,Ge,""+ht,Mt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case g:return Ge=Ge.get(ht.key===null?Qe:ht.key)||null,De(qe,Ge,ht,Mt);case x:return Ge=Ge.get(ht.key===null?Qe:ht.key)||null,Ze(qe,Ge,ht,Mt);case F:var bn=ht._init;return ht=bn(ht._payload),et(Ge,qe,Qe,ht,Mt)}if(Q(ht)||V(ht))return Ge=Ge.get(Qe)||null,ut(qe,Ge,ht,Mt,null);if(typeof ht.then=="function")return et(Ge,qe,Qe,Ep(ht),Mt);if(ht.$$typeof===C)return et(Ge,qe,Qe,dp(qe,ht),Mt);ic(qe,ht)}return null}function Yt(Ge,qe,Qe,ht){for(var Mt=null,bn=null,Bt=qe,Kt=qe=0,pa=null;Bt!==null&&Kt<Qe.length;Kt++){Bt.index>Kt?(pa=Bt,Bt=null):pa=Bt.sibling;var zn=nt(Ge,Bt,Qe[Kt],ht);if(zn===null){Bt===null&&(Bt=pa);break}u&&Bt&&zn.alternate===null&&h(Ge,Bt),qe=R(zn,qe,Kt),bn===null?Mt=zn:bn.sibling=zn,bn=zn,Bt=pa}if(Kt===Qe.length)return m(Ge,Bt),kn&&Kl(Ge,Kt),Mt;if(Bt===null){for(;Kt<Qe.length;Kt++)Bt=pt(Ge,Qe[Kt],ht),Bt!==null&&(qe=R(Bt,qe,Kt),bn===null?Mt=Bt:bn.sibling=Bt,bn=Bt);return kn&&Kl(Ge,Kt),Mt}for(Bt=N(Bt);Kt<Qe.length;Kt++)pa=et(Bt,Ge,Kt,Qe[Kt],ht),pa!==null&&(u&&pa.alternate!==null&&Bt.delete(pa.key===null?Kt:pa.key),qe=R(pa,qe,Kt),bn===null?Mt=pa:bn.sibling=pa,bn=pa);return u&&Bt.forEach(function(jl){return h(Ge,jl)}),kn&&Kl(Ge,Kt),Mt}function Wt(Ge,qe,Qe,ht){if(Qe==null)throw Error(a(151));for(var Mt=null,bn=null,Bt=qe,Kt=qe=0,pa=null,zn=Qe.next();Bt!==null&&!zn.done;Kt++,zn=Qe.next()){Bt.index>Kt?(pa=Bt,Bt=null):pa=Bt.sibling;var jl=nt(Ge,Bt,zn.value,ht);if(jl===null){Bt===null&&(Bt=pa);break}u&&Bt&&jl.alternate===null&&h(Ge,Bt),qe=R(jl,qe,Kt),bn===null?Mt=jl:bn.sibling=jl,bn=jl,Bt=pa}if(zn.done)return m(Ge,Bt),kn&&Kl(Ge,Kt),Mt;if(Bt===null){for(;!zn.done;Kt++,zn=Qe.next())zn=pt(Ge,zn.value,ht),zn!==null&&(qe=R(zn,qe,Kt),bn===null?Mt=zn:bn.sibling=zn,bn=zn);return kn&&Kl(Ge,Kt),Mt}for(Bt=N(Bt);!zn.done;Kt++,zn=Qe.next())zn=et(Bt,Ge,Kt,zn.value,ht),zn!==null&&(u&&zn.alternate!==null&&Bt.delete(zn.key===null?Kt:zn.key),qe=R(zn,qe,Kt),bn===null?Mt=zn:bn.sibling=zn,bn=zn);return u&&Bt.forEach(function(q_){return h(Ge,q_)}),kn&&Kl(Ge,Kt),Mt}function cr(Ge,qe,Qe,ht){if(typeof Qe=="object"&&Qe!==null&&Qe.type===b&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case g:e:{for(var Mt=Qe.key;qe!==null;){if(qe.key===Mt){if(Mt=Qe.type,Mt===b){if(qe.tag===7){m(Ge,qe.sibling),ht=A(qe,Qe.props.children),ht.return=Ge,Ge=ht;break e}}else if(qe.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===F&&sc(Mt)===qe.type){m(Ge,qe.sibling),ht=A(qe,Qe.props),oh(ht,Qe),ht.return=Ge,Ge=ht;break e}m(Ge,qe);break}else h(Ge,qe);qe=qe.sibling}Qe.type===b?(ht=Yl(Qe.props.children,Ge.mode,ht,Qe.key),ht.return=Ge,Ge=ht):(ht=lp(Qe.type,Qe.key,Qe.props,null,Ge.mode,ht),oh(ht,Qe),ht.return=Ge,Ge=ht)}return J(Ge);case x:e:{for(Mt=Qe.key;qe!==null;){if(qe.key===Mt)if(qe.tag===4&&qe.stateNode.containerInfo===Qe.containerInfo&&qe.stateNode.implementation===Qe.implementation){m(Ge,qe.sibling),ht=A(qe,Qe.children||[]),ht.return=Ge,Ge=ht;break e}else{m(Ge,qe);break}else h(Ge,qe);qe=qe.sibling}ht=uu(Qe,Ge.mode,ht),ht.return=Ge,Ge=ht}return J(Ge);case F:return Mt=Qe._init,Qe=Mt(Qe._payload),cr(Ge,qe,Qe,ht)}if(Q(Qe))return Yt(Ge,qe,Qe,ht);if(V(Qe)){if(Mt=V(Qe),typeof Mt!="function")throw Error(a(150));return Qe=Mt.call(Qe),Wt(Ge,qe,Qe,ht)}if(typeof Qe.then=="function")return cr(Ge,qe,Ep(Qe),ht);if(Qe.$$typeof===C)return cr(Ge,qe,dp(Ge,Qe),ht);ic(Ge,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint"?(Qe=""+Qe,qe!==null&&qe.tag===6?(m(Ge,qe.sibling),ht=A(qe,Qe),ht.return=Ge,Ge=ht):(m(Ge,qe),ht=wy(Qe,Ge.mode,ht),ht.return=Ge,Ge=ht),J(Ge)):m(Ge,qe)}return function(Ge,qe,Qe,ht){try{ai=0;var Mt=cr(Ge,qe,Qe,ht);return ra=null,Mt}catch(Bt){if(Bt===qa||Bt===fp)throw Bt;var bn=Ja(29,Bt,null,Ge.mode);return bn.lanes=ht,bn.return=Ge,bn}finally{}}}var oc=Qy(!0),V0=Qy(!1),Si=ce(null),Ua=null;function Ji(u){var h=u.alternate;Y(qr,qr.current&1),Y(Si,u),Ua===null&&(h===null||ec.current!==null||h.memoizedState!==null)&&(Ua=u)}function H0(u){if(u.tag===22){if(Y(qr,qr.current),Y(Si,u),Ua===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(Ua=u)}}else bo()}function bo(){Y(qr,qr.current),Y(Si,Si.current)}function qs(u){je(Si),Ua===u&&(Ua=null),je(qr)}var qr=ce(0);function lh(u){for(var h=u;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||Ha(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function vu(u,h,m,N){h=u.memoizedState,m=m(N,h),m=m==null?h:f({},h,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var ch={enqueueSetState:function(u,h,m){u=u._reactInternals;var N=Oa(),A=nl(N);A.payload=h,m!=null&&(A.callback=m),h=go(u,A,N),h!==null&&(Ti(h,u,N),Wd(h,u,N))},enqueueReplaceState:function(u,h,m){u=u._reactInternals;var N=Oa(),A=nl(N);A.tag=1,A.payload=h,m!=null&&(A.callback=m),h=go(u,A,N),h!==null&&(Ti(h,u,N),Wd(h,u,N))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var m=Oa(),N=nl(m);N.tag=2,h!=null&&(N.callback=h),h=go(u,N,m),h!==null&&(Ti(h,u,m),Wd(h,u,m))}};function uh(u,h,m,N,A,R,J){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(N,R,J):h.prototype&&h.prototype.isPureReactComponent?!$s(m,N)||!$s(A,R):!0}function G0(u,h,m,N){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,N),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,N),h.state!==u&&ch.enqueueReplaceState(h,h.state,null)}function sl(u,h){var m=h;if("ref"in h){m={};for(var N in h)N!=="ref"&&(m[N]=h[N])}if(u=u.defaultProps){m===h&&(m=f({},m));for(var A in u)m[A]===void 0&&(m[A]=u[A])}return m}var lc=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function Xy(u){lc(u)}function Pp(u){console.error(u)}function W0(u){lc(u)}function dh(u,h){try{var m=u.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(N){setTimeout(function(){throw N})}}function Us(u,h,m){try{var N=u.onCaughtError;N(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Op(u,h,m){return m=nl(m),m.tag=3,m.payload={element:null},m.callback=function(){dh(u,h)},m}function Jy(u){return u=nl(u),u.tag=3,u}function Y0(u,h,m,N){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var R=N.value;u.payload=function(){return A(R)},u.callback=function(){Us(h,m,N)}}var J=m.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(u.callback=function(){Us(h,m,N),typeof A!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var pe=N.stack;this.componentDidCatch(N.value,{componentStack:pe!==null?pe:""})})}function K0(u,h,m,N,A){if(m.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(h=m.alternate,h!==null&&Vd(h,m,A,!0),m=Si.current,m!==null){switch(m.tag){case 13:return Ua===null?yx():m.alternate===null&&Ur===0&&(Ur=3),m.flags&=-257,m.flags|=65536,m.lanes=A,N===Ty?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([N]):h.add(N),bx(u,N,A)),!1;case 22:return m.flags|=65536,N===Ty?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([N])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([N]):m.add(N)),bx(u,N,A)),!1}throw Error(a(435,m.tag))}return bx(u,N,A),yx(),!1}if(kn)return h=Si.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=A,N!==du&&(u=Error(a(422),{cause:N}),el(Ba(u,m)))):(N!==du&&(h=Error(a(423),{cause:N}),el(Ba(h,m))),u=u.current.alternate,u.flags|=65536,A&=-A,u.lanes|=A,N=Ba(N,m),A=Op(u.stateNode,N,A),ys(u,A),Ur!==4&&(Ur=2)),!1;var R=Error(a(520),{cause:N});if(R=Ba(R,m),jh===null?jh=[R]:jh.push(R),Ur!==4&&(Ur=2),h===null)return!0;N=Ba(N,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,u=A&-A,m.lanes|=u,u=Op(m.stateNode,N,u),ys(m,u),!1;case 1:if(h=m.type,R=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(hl===null||!hl.has(R))))return m.flags|=65536,A&=-A,m.lanes|=A,A=Jy(A),Y0(A,u,m,N),ys(m,A),!1}m=m.return}while(m!==null);return!1}var Q0=Error(a(461)),da=!1;function Sr(u,h,m,N){h.child=u===null?V0(h,null,m,N):oc(h,u.child,m,N)}function Dp(u,h,m,N,A){m=m.render;var R=h.ref;if("ref"in N){var J={};for(var pe in N)pe!=="ref"&&(J[pe]=N[pe])}else J=N;return Xl(h),N=Py(u,h,m,J,R,A),pe=Dy(),u!==null&&!da?(nc(u,h,A),jo(u,h,A)):(kn&&pe&&Sy(h),h.flags|=1,Sr(u,h,N,A),h.child)}function Mp(u,h,m,N,A){if(u===null){var R=m.type;return typeof R=="function"&&!Wl(R)&&R.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=R,Ip(u,h,R,N,A)):(u=lp(m.type,null,N,h,h.mode,A),u.ref=h.ref,u.return=h,h.child=u)}if(R=u.child,!bs(u,A)){var J=R.memoizedProps;if(m=m.compare,m=m!==null?m:$s,m(J,N)&&u.ref===h.ref)return jo(u,h,A)}return h.flags|=1,u=za(R,N),u.ref=h.ref,u.return=h,h.child=u}function Ip(u,h,m,N,A){if(u!==null){var R=u.memoizedProps;if($s(R,N)&&u.ref===h.ref)if(da=!1,h.pendingProps=N=R,bs(u,A))(u.flags&131072)!==0&&(da=!0);else return h.lanes=u.lanes,jo(u,h,A)}return bu(u,h,m,N,A)}function hh(u,h,m){var N=h.pendingProps,A=N.children,R=u!==null?u.memoizedState:null;if(N.mode==="hidden"){if((h.flags&128)!==0){if(N=R!==null?R.baseLanes|m:m,u!==null){for(A=h.child=u.child,R=0;A!==null;)R=R|A.lanes|A.childLanes,A=A.sibling;h.childLanes=R&~N}else h.childLanes=0,h.child=null;return cc(u,h,N,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&hp(h,R!==null?R.cachePool:null),R!==null?yo(h,R):mp(),H0(h);else return h.lanes=h.childLanes=536870912,cc(u,h,R!==null?R.baseLanes|m:m,m)}else R!==null?(hp(h,R.cachePool),yo(h,R),bo(),h.memoizedState=null):(u!==null&&hp(h,null),mp(),bo());return Sr(u,h,A,m),h.child}function cc(u,h,m,N){var A=mo();return A=A===null?null:{parent:mr._currentValue,pool:A},h.memoizedState={baseLanes:m,cachePool:A},u!==null&&hp(h,null),mp(),H0(h),u!==null&&Vd(u,h,N,!0),null}function qt(u,h){var m=h.ref;if(m===null)u!==null&&u.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(a(284));(u===null||u.ref!==m)&&(h.flags|=4194816)}}function bu(u,h,m,N,A){return Xl(h),m=Py(u,h,m,N,void 0,A),N=Dy(),u!==null&&!da?(nc(u,h,A),jo(u,h,A)):(kn&&N&&Sy(h),h.flags|=1,Sr(u,h,m,A),h.child)}function Rp(u,h,m,N,A,R){return Xl(h),h.updateQueue=null,m=P0(h,N,m,A),E0(u),N=Dy(),u!==null&&!da?(nc(u,h,R),jo(u,h,R)):(kn&&N&&Sy(h),h.flags|=1,Sr(u,h,m,R),h.child)}function ol(u,h,m,N,A){if(Xl(h),h.stateNode===null){var R=Gl,J=m.contextType;typeof J=="object"&&J!==null&&(R=zr(J)),R=new m(N,R),h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=ch,h.stateNode=R,R._reactInternals=h,R=h.stateNode,R.props=N,R.state=h.memoizedState,R.refs={},Zl(h),J=m.contextType,R.context=typeof J=="object"&&J!==null?zr(J):Gl,R.state=h.memoizedState,J=m.getDerivedStateFromProps,typeof J=="function"&&(vu(h,m,J,N),R.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(J=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),J!==R.state&&ch.enqueueReplaceState(R,R.state,null),Aa(h,N,R,A),xs(),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308),N=!0}else if(u===null){R=h.stateNode;var pe=h.memoizedProps,De=sl(m,pe);R.props=De;var Ze=R.context,ut=m.contextType;J=Gl,typeof ut=="object"&&ut!==null&&(J=zr(ut));var pt=m.getDerivedStateFromProps;ut=typeof pt=="function"||typeof R.getSnapshotBeforeUpdate=="function",pe=h.pendingProps!==pe,ut||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(pe||Ze!==J)&&G0(h,R,N,J),Bs=!1;var nt=h.memoizedState;R.state=nt,Aa(h,N,R,A),xs(),Ze=h.memoizedState,pe||nt!==Ze||Bs?(typeof pt=="function"&&(vu(h,m,pt,N),Ze=h.memoizedState),(De=Bs||uh(h,m,De,N,nt,Ze,J))?(ut||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(h.flags|=4194308)):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=N,h.memoizedState=Ze),R.props=N,R.state=Ze,R.context=J,N=De):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),N=!1)}else{R=h.stateNode,pu(u,h),J=h.memoizedProps,ut=sl(m,J),R.props=ut,pt=h.pendingProps,nt=R.context,Ze=m.contextType,De=Gl,typeof Ze=="object"&&Ze!==null&&(De=zr(Ze)),pe=m.getDerivedStateFromProps,(Ze=typeof pe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(J!==pt||nt!==De)&&G0(h,R,N,De),Bs=!1,nt=h.memoizedState,R.state=nt,Aa(h,N,R,A),xs();var et=h.memoizedState;J!==pt||nt!==et||Bs||u!==null&&u.dependencies!==null&&up(u.dependencies)?(typeof pe=="function"&&(vu(h,m,pe,N),et=h.memoizedState),(ut=Bs||uh(h,m,ut,N,nt,et,De)||u!==null&&u.dependencies!==null&&up(u.dependencies))?(Ze||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(N,et,De),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(N,et,De)),typeof R.componentDidUpdate=="function"&&(h.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof R.componentDidUpdate!="function"||J===u.memoizedProps&&nt===u.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&nt===u.memoizedState||(h.flags|=1024),h.memoizedProps=N,h.memoizedState=et),R.props=N,R.state=et,R.context=De,N=ut):(typeof R.componentDidUpdate!="function"||J===u.memoizedProps&&nt===u.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&nt===u.memoizedState||(h.flags|=1024),N=!1)}return R=N,qt(u,h),N=(h.flags&128)!==0,R||N?(R=h.stateNode,m=N&&typeof m.getDerivedStateFromError!="function"?null:R.render(),h.flags|=1,u!==null&&N?(h.child=oc(h,u.child,null,A),h.child=oc(h,null,m,A)):Sr(u,h,m,A),h.memoizedState=R.state,u=h.child):u=jo(u,h,A),u}function X0(u,h,m,N){return Ud(),h.flags|=256,Sr(u,h,m,N),h.child}var fh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lp(u){return{baseLanes:u,cachePool:N0()}}function ha(u,h,m){return u=u!==null?u.childLanes&~m:0,h&&(u|=es),u}function J0(u,h,m){var N=h.pendingProps,A=!1,R=(h.flags&128)!==0,J;if((J=R)||(J=u!==null&&u.memoizedState===null?!1:(qr.current&2)!==0),J&&(A=!0,h.flags&=-129),J=(h.flags&32)!==0,h.flags&=-33,u===null){if(kn){if(A?Ji(h):bo(),kn){var pe=Er,De;if(De=pe){e:{for(De=pe,pe=Za;De.nodeType!==8;){if(!pe){pe=null;break e}if(De=ws(De.nextSibling),De===null){pe=null;break e}}pe=De}pe!==null?(h.memoizedState={dehydrated:pe,treeContext:Nr!==null?{id:Ar,overflow:po}:null,retryLane:536870912,hydrationErrors:null},De=Ja(18,null,null,0),De.stateNode=pe,De.return=h,h.child=De,na=h,Er=null,De=!0):De=!1}De||Ki(h)}if(pe=h.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null))return Ha(pe)?h.lanes=32:h.lanes=536870912,null;qs(h)}return pe=N.children,N=N.fallback,A?(bo(),A=h.mode,pe=ph({mode:"hidden",children:pe},A),N=Yl(N,A,m,null),pe.return=h,N.return=h,pe.sibling=N,h.child=pe,A=h.child,A.memoizedState=Lp(m),A.childLanes=ha(u,J,m),h.memoizedState=fh,N):(Ji(h),Zy(h,pe))}if(De=u.memoizedState,De!==null&&(pe=De.dehydrated,pe!==null)){if(R)h.flags&256?(Ji(h),h.flags&=-257,h=ex(u,h,m)):h.memoizedState!==null?(bo(),h.child=u.child,h.flags|=128,h=null):(bo(),A=N.fallback,pe=h.mode,N=ph({mode:"visible",children:N.children},pe),A=Yl(A,pe,m,null),A.flags|=2,N.return=h,A.return=h,N.sibling=A,h.child=N,oc(h,u.child,null,m),N=h.child,N.memoizedState=Lp(m),N.childLanes=ha(u,J,m),h.memoizedState=fh,h=A);else if(Ji(h),Ha(pe)){if(J=pe.nextSibling&&pe.nextSibling.dataset,J)var Ze=J.dgst;J=Ze,N=Error(a(419)),N.stack="",N.digest=J,el({value:N,source:null,stack:null}),h=ex(u,h,m)}else if(da||Vd(u,h,m,!1),J=(m&u.childLanes)!==0,da||J){if(J=vr,J!==null&&(N=m&-m,N=(N&42)!==0?1:jt(N),N=(N&(J.suspendedLanes|m))!==0?0:N,N!==0&&N!==De.retryLane))throw De.retryLane=N,Hl(u,N),Ti(J,u,N),Q0;pe.data==="$?"||yx(),h=ex(u,h,m)}else pe.data==="$?"?(h.flags|=192,h.child=u.child,h=null):(u=De.treeContext,Er=ws(pe.nextSibling),na=h,kn=!0,gs=null,Za=!1,u!==null&&(Wi[Yi++]=Ar,Wi[Yi++]=po,Wi[Yi++]=Nr,Ar=u.id,po=u.overflow,Nr=h),h=Zy(h,N.children),h.flags|=4096);return h}return A?(bo(),A=N.fallback,pe=h.mode,De=u.child,Ze=De.sibling,N=za(De,{mode:"hidden",children:N.children}),N.subtreeFlags=De.subtreeFlags&65011712,Ze!==null?A=za(Ze,A):(A=Yl(A,pe,m,null),A.flags|=2),A.return=h,N.return=h,N.sibling=A,h.child=N,N=A,A=h.child,pe=u.child.memoizedState,pe===null?pe=Lp(m):(De=pe.cachePool,De!==null?(Ze=mr._currentValue,De=De.parent!==Ze?{parent:Ze,pool:Ze}:De):De=N0(),pe={baseLanes:pe.baseLanes|m,cachePool:De}),A.memoizedState=pe,A.childLanes=ha(u,J,m),h.memoizedState=fh,N):(Ji(h),m=u.child,u=m.sibling,m=za(m,{mode:"visible",children:N.children}),m.return=h,m.sibling=null,u!==null&&(J=h.deletions,J===null?(h.deletions=[u],h.flags|=16):J.push(u)),h.child=m,h.memoizedState=null,m)}function Zy(u,h){return h=ph({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function ph(u,h){return u=Ja(22,u,null,h),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function ex(u,h,m){return oc(h,u.child,null,m),u=Zy(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function tx(u,h,m){u.lanes|=h;var N=u.alternate;N!==null&&(N.lanes|=h),ei(u.return,h,m)}function nx(u,h,m,N,A){var R=u.memoizedState;R===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:N,tail:m,tailMode:A}:(R.isBackwards=h,R.rendering=null,R.renderingStartTime=0,R.last=N,R.tail=m,R.tailMode=A)}function Z0(u,h,m){var N=h.pendingProps,A=N.revealOrder,R=N.tail;if(Sr(u,h,N.children,m),N=qr.current,(N&2)!==0)N=N&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&tx(u,m,h);else if(u.tag===19)tx(u,m,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}N&=1}switch(Y(qr,N),A){case"forwards":for(m=h.child,A=null;m!==null;)u=m.alternate,u!==null&&lh(u)===null&&(A=m),m=m.sibling;m=A,m===null?(A=h.child,h.child=null):(A=m.sibling,m.sibling=null),nx(h,!1,A,m,R);break;case"backwards":for(m=null,A=h.child,h.child=null;A!==null;){if(u=A.alternate,u!==null&&lh(u)===null){h.child=A;break}u=A.sibling,A.sibling=m,m=A,A=u}nx(h,!0,m,null,R);break;case"together":nx(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function jo(u,h,m){if(u!==null&&(h.dependencies=u.dependencies),dl|=h.lanes,(m&h.childLanes)===0)if(u!==null){if(Vd(u,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(a(153));if(h.child!==null){for(u=h.child,m=za(u,u.pendingProps),h.child=m,m.return=h;u.sibling!==null;)u=u.sibling,m=m.sibling=za(u,u.pendingProps),m.return=h;m.sibling=null}return h.child}function bs(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&up(u)))}function Va(u,h,m){switch(h.tag){case 3:be(h,h.stateNode.containerInfo),wi(h,mr,u.memoizedState.cache),Ud();break;case 27:case 5:Ae(h);break;case 4:be(h,h.stateNode.containerInfo);break;case 10:wi(h,h.type,h.memoizedProps.value);break;case 13:var N=h.memoizedState;if(N!==null)return N.dehydrated!==null?(Ji(h),h.flags|=128,null):(m&h.child.childLanes)!==0?J0(u,h,m):(Ji(h),u=jo(u,h,m),u!==null?u.sibling:null);Ji(h);break;case 19:var A=(u.flags&128)!==0;if(N=(m&h.childLanes)!==0,N||(Vd(u,h,m,!1),N=(m&h.childLanes)!==0),A){if(N)return Z0(u,h,m);h.flags|=128}if(A=h.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Y(qr,qr.current),N)break;return null;case 22:case 23:return h.lanes=0,hh(u,h,m);case 24:wi(h,mr,u.memoizedState.cache)}return jo(u,h,m)}function Fp(u,h,m){if(u!==null)if(u.memoizedProps!==h.pendingProps)da=!0;else{if(!bs(u,m)&&(h.flags&128)===0)return da=!1,Va(u,h,m);da=(u.flags&131072)!==0}else da=!1,kn&&(h.flags&1048576)!==0&&Ny(h,Bd,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var N=h.elementType,A=N._init;if(N=A(N._payload),h.type=N,typeof N=="function")Wl(N)?(u=sl(N,u),h.tag=1,h=ol(null,h,N,u,m)):(h.tag=0,h=bu(null,h,N,u,m));else{if(N!=null){if(A=N.$$typeof,A===E){h.tag=11,h=Dp(null,h,N,u,m);break e}else if(A===I){h.tag=14,h=Mp(null,h,N,u,m);break e}}throw h=ne(N)||N,Error(a(306,h,""))}}return h;case 0:return bu(u,h,h.type,h.pendingProps,m);case 1:return N=h.type,A=sl(N,h.pendingProps),ol(u,h,N,A,m);case 3:e:{if(be(h,h.stateNode.containerInfo),u===null)throw Error(a(387));N=h.pendingProps;var R=h.memoizedState;A=R.element,pu(u,h),Aa(h,N,null,m);var J=h.memoizedState;if(N=J.cache,wi(h,mr,N),N!==R.cache&&vn(h,[mr],m,!0),xs(),N=J.element,R.isDehydrated)if(R={element:N,isDehydrated:!1,cache:J.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=X0(u,h,N,m);break e}else if(N!==A){A=Ba(Error(a(424)),h),el(A),h=X0(u,h,N,m);break e}else{switch(u=h.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Er=ws(u.firstChild),na=h,kn=!0,gs=null,Za=!0,m=V0(h,null,N,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Ud(),N===A){h=jo(u,h,m);break e}Sr(u,h,N,m)}h=h.child}return h;case 26:return qt(u,h),u===null?(m=K1(h.type,null,h.pendingProps,null))?h.memoizedState=m:kn||(m=h.type,u=h.pendingProps,N=hc(ze.current).createElement(m),N[Vt]=h,N[ln]=u,sa(N,m,u),Dt(N),h.stateNode=N):h.memoizedState=K1(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:return Ae(h),u===null&&kn&&(N=h.stateNode=G1(h.type,h.pendingProps,ze.current),na=h,Za=!0,A=Er,ts(h.type)?(Ax=A,Er=ws(N.firstChild)):Er=A),Sr(u,h,h.pendingProps.children,m),qt(u,h),u===null&&(h.flags|=4194304),h.child;case 5:return u===null&&kn&&((A=N=Er)&&(N=V1(N,h.type,h.pendingProps,Za),N!==null?(h.stateNode=N,na=h,Er=ws(N.firstChild),Za=!1,A=!0):A=!1),A||Ki(h)),Ae(h),A=h.type,R=h.pendingProps,J=u!==null?u.memoizedProps:null,N=R.children,tm(A,R)?N=null:J!==null&&tm(A,J)&&(h.flags|=32),h.memoizedState!==null&&(A=Py(u,h,Oy,null,null,m),$u._currentValue=A),qt(u,h),Sr(u,h,N,m),h.child;case 6:return u===null&&kn&&((u=m=Er)&&(m=rm(m,h.pendingProps,Za),m!==null?(h.stateNode=m,na=h,Er=null,u=!0):u=!1),u||Ki(h)),null;case 13:return J0(u,h,m);case 4:return be(h,h.stateNode.containerInfo),N=h.pendingProps,u===null?h.child=oc(h,null,N,m):Sr(u,h,N,m),h.child;case 11:return Dp(u,h,h.type,h.pendingProps,m);case 7:return Sr(u,h,h.pendingProps,m),h.child;case 8:return Sr(u,h,h.pendingProps.children,m),h.child;case 12:return Sr(u,h,h.pendingProps.children,m),h.child;case 10:return N=h.pendingProps,wi(h,h.type,N.value),Sr(u,h,N.children,m),h.child;case 9:return A=h.type._context,N=h.pendingProps.children,Xl(h),A=zr(A),N=N(A),h.flags|=1,Sr(u,h,N,m),h.child;case 14:return Mp(u,h,h.type,h.pendingProps,m);case 15:return Ip(u,h,h.type,h.pendingProps,m);case 19:return Z0(u,h,m);case 31:return N=h.pendingProps,m=h.mode,N={mode:N.mode,children:N.children},u===null?(m=ph(N,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=za(u.child,N),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return hh(u,h,m);case 24:return Xl(h),N=zr(mr),u===null?(A=mo(),A===null&&(A=vr,R=_y(),A.pooledCache=R,R.refCount++,R!==null&&(A.pooledCacheLanes|=m),A=R),h.memoizedState={parent:N,cache:A},Zl(h),wi(h,mr,A)):((u.lanes&m)!==0&&(pu(u,h),Aa(h,null,null,m),xs()),A=u.memoizedState,R=h.memoizedState,A.parent!==N?(A={parent:N,cache:N},h.memoizedState=A,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=A),wi(h,mr,N)):(N=R.cache,wi(h,mr,N),N!==A.cache&&vn(h,[mr],m,!0))),Sr(u,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function wo(u){u.flags|=4}function $p(u,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!oa(h)){if(h=Si.current,h!==null&&((Ln&4194048)===Ln?Ua!==null:(Ln&62914560)!==Ln&&(Ln&536870912)===0||h!==Ua))throw fu=Ty,S0;u.flags|=8192}}function Bp(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?Ct():536870912,u.lanes|=h,Tu|=h)}function mh(u,h){if(!kn)switch(u.tailMode){case"hidden":h=u.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var N=null;m!==null;)m.alternate!==null&&(N=m),m=m.sibling;N===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:N.sibling=null}}function gr(u){var h=u.alternate!==null&&u.alternate.child===u.child,m=0,N=0;if(h)for(var A=u.child;A!==null;)m|=A.lanes|A.childLanes,N|=A.subtreeFlags&65011712,N|=A.flags&65011712,A.return=u,A=A.sibling;else for(A=u.child;A!==null;)m|=A.lanes|A.childLanes,N|=A.subtreeFlags,N|=A.flags,A.return=u,A=A.sibling;return u.subtreeFlags|=N,u.childLanes=m,h}function e1(u,h,m){var N=h.pendingProps;switch(zd(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(h),null;case 1:return gr(h),null;case 3:return m=h.stateNode,N=null,u!==null&&(N=u.memoizedState.cache),h.memoizedState.cache!==N&&(h.flags|=2048),Qi(mr),Ce(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(qd(h)?wo(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,v0())),gr(h),null;case 26:return m=h.memoizedState,u===null?(wo(h),m!==null?(gr(h),$p(h,m)):(gr(h),h.flags&=-16777217)):m?m!==u.memoizedState?(wo(h),gr(h),$p(h,m)):(gr(h),h.flags&=-16777217):(u.memoizedProps!==N&&wo(h),gr(h),h.flags&=-16777217),null;case 27:me(h),m=ze.current;var A=h.type;if(u!==null&&h.stateNode!=null)u.memoizedProps!==N&&wo(h);else{if(!N){if(h.stateNode===null)throw Error(a(166));return gr(h),null}u=Ie.current,qd(h)?y0(h):(u=G1(A,N,m),h.stateNode=u,wo(h))}return gr(h),null;case 5:if(me(h),m=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==N&&wo(h);else{if(!N){if(h.stateNode===null)throw Error(a(166));return gr(h),null}if(u=Ie.current,qd(h))y0(h);else{switch(A=hc(ze.current),u){case 1:u=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=A.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof N.is=="string"?A.createElement("select",{is:N.is}):A.createElement("select"),N.multiple?u.multiple=!0:N.size&&(u.size=N.size);break;default:u=typeof N.is=="string"?A.createElement(m,{is:N.is}):A.createElement(m)}}u[Vt]=h,u[ln]=N;e:for(A=h.child;A!==null;){if(A.tag===5||A.tag===6)u.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}h.stateNode=u;e:switch(sa(u,m,N),m){case"button":case"input":case"select":case"textarea":u=!!N.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&wo(h)}}return gr(h),h.flags&=-16777217,null;case 6:if(u&&h.stateNode!=null)u.memoizedProps!==N&&wo(h);else{if(typeof N!="string"&&h.stateNode===null)throw Error(a(166));if(u=ze.current,qd(h)){if(u=h.stateNode,m=h.memoizedProps,N=null,A=na,A!==null)switch(A.tag){case 27:case 5:N=A.memoizedProps}u[Vt]=h,u=!!(u.nodeValue===m||N!==null&&N.suppressHydrationWarning===!0||B1(u.nodeValue,m)),u||Ki(h)}else u=hc(u).createTextNode(N),u[Vt]=h,h.stateNode=u}return gr(h),null;case 13:if(N=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(A=qd(h),N!==null&&N.dehydrated!==null){if(u===null){if(!A)throw Error(a(318));if(A=h.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));A[Vt]=h}else Ud(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;gr(h),A=!1}else A=v0(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=A),A=!0;if(!A)return h.flags&256?(qs(h),h):(qs(h),null)}if(qs(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=N!==null,u=u!==null&&u.memoizedState!==null,m){N=h.child,A=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(A=N.alternate.memoizedState.cachePool.pool);var R=null;N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(R=N.memoizedState.cachePool.pool),R!==A&&(N.flags|=2048)}return m!==u&&m&&(h.child.flags|=8192),Bp(h,h.updateQueue),gr(h),null;case 4:return Ce(),u===null&&_x(h.stateNode.containerInfo),gr(h),null;case 10:return Qi(h.type),gr(h),null;case 19:if(je(qr),A=h.memoizedState,A===null)return gr(h),null;if(N=(h.flags&128)!==0,R=A.rendering,R===null)if(N)mh(A,!1);else{if(Ur!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(R=lh(u),R!==null){for(h.flags|=128,mh(A,!1),u=R.updateQueue,h.updateQueue=u,Bp(h,u),h.subtreeFlags=0,u=m,m=h.child;m!==null;)$d(m,u),m=m.sibling;return Y(qr,qr.current&1|2),h.child}u=u.sibling}A.tail!==null&&ee()>ku&&(h.flags|=128,N=!0,mh(A,!1),h.lanes=4194304)}else{if(!N)if(u=lh(R),u!==null){if(h.flags|=128,N=!0,u=u.updateQueue,h.updateQueue=u,Bp(h,u),mh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!R.alternate&&!kn)return gr(h),null}else 2*ee()-A.renderingStartTime>ku&&m!==536870912&&(h.flags|=128,N=!0,mh(A,!1),h.lanes=4194304);A.isBackwards?(R.sibling=h.child,h.child=R):(u=A.last,u!==null?u.sibling=R:h.child=R,A.last=R)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=ee(),h.sibling=null,u=qr.current,Y(qr,N?u&1|2:u&1),h):(gr(h),null);case 22:case 23:return qs(h),Ey(),N=h.memoizedState!==null,u!==null?u.memoizedState!==null!==N&&(h.flags|=8192):N&&(h.flags|=8192),N?(m&536870912)!==0&&(h.flags&128)===0&&(gr(h),h.subtreeFlags&6&&(h.flags|=8192)):gr(h),m=h.updateQueue,m!==null&&Bp(h,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),N=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(N=h.memoizedState.cachePool.pool),N!==m&&(h.flags|=2048),u!==null&&je(Jl),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Qi(mr),gr(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function t1(u,h){switch(zd(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Qi(mr),Ce(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return me(h),null;case 13:if(qs(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Ud()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return je(qr),null;case 4:return Ce(),null;case 10:return Qi(h.type),null;case 22:case 23:return qs(h),Ey(),u!==null&&je(Jl),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return Qi(mr),null;case 25:return null;default:return null}}function n1(u,h){switch(zd(h),h.tag){case 3:Qi(mr),Ce();break;case 26:case 27:case 5:me(h);break;case 4:Ce();break;case 13:qs(h);break;case 19:je(qr);break;case 10:Qi(h.type);break;case 22:case 23:qs(h),Ey(),u!==null&&je(Jl);break;case 24:Qi(mr)}}function gh(u,h){try{var m=h.updateQueue,N=m!==null?m.lastEffect:null;if(N!==null){var A=N.next;m=A;do{if((m.tag&u)===u){N=void 0;var R=m.create,J=m.inst;N=R(),J.destroy=N}m=m.next}while(m!==A)}}catch(pe){yr(h,h.return,pe)}}function ll(u,h,m){try{var N=h.updateQueue,A=N!==null?N.lastEffect:null;if(A!==null){var R=A.next;N=R;do{if((N.tag&u)===u){var J=N.inst,pe=J.destroy;if(pe!==void 0){J.destroy=void 0,A=h;var De=m,Ze=pe;try{Ze()}catch(ut){yr(A,De,ut)}}}N=N.next}while(N!==R)}}catch(ut){yr(h,h.return,ut)}}function r1(u){var h=u.updateQueue;if(h!==null){var m=u.stateNode;try{Ay(h,m)}catch(N){yr(u,u.return,N)}}}function rx(u,h,m){m.props=sl(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(N){yr(u,h,N)}}function ju(u,h){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var N=u.stateNode;break;case 30:N=u.stateNode;break;default:N=u.stateNode}typeof m=="function"?u.refCleanup=m(N):m.current=N}}catch(A){yr(u,h,A)}}function Vs(u,h){var m=u.ref,N=u.refCleanup;if(m!==null)if(typeof N=="function")try{N()}catch(A){yr(u,h,A)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){yr(u,h,A)}else m.current=null}function zp(u){var h=u.type,m=u.memoizedProps,N=u.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&N.focus();break e;case"img":m.src?N.src=m.src:m.srcSet&&(N.srcset=m.srcSet)}}catch(A){yr(u,u.return,A)}}function qp(u,h,m){try{var N=u.stateNode;j_(N,u.type,m,h),N[ln]=h}catch(A){yr(u,u.return,A)}}function wu(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&ts(u.type)||u.tag===4}function yh(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||wu(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&ts(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Up(u,h,m){var N=u.tag;if(N===5||N===6)u=u.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(u),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=Zp));else if(N!==4&&(N===27&&ts(u.type)&&(m=u.stateNode,h=null),u=u.child,u!==null))for(Up(u,h,m),u=u.sibling;u!==null;)Up(u,h,m),u=u.sibling}function xh(u,h,m){var N=u.tag;if(N===5||N===6)u=u.stateNode,h?m.insertBefore(u,h):m.appendChild(u);else if(N!==4&&(N===27&&ts(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(xh(u,h,m),u=u.sibling;u!==null;)xh(u,h,m),u=u.sibling}function vh(u){var h=u.stateNode,m=u.memoizedProps;try{for(var N=u.type,A=h.attributes;A.length;)h.removeAttributeNode(A[0]);sa(h,N,m),h[Vt]=u,h[ln]=m}catch(R){yr(u,u.return,R)}}var Hs=!1,Xn=!1,No=!1,a1=typeof WeakSet=="function"?WeakSet:Set,aa=null;function o_(u,h){if(u=u.containerInfo,js=om,u=m0(u),vy(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var N=m.getSelection&&m.getSelection();if(N&&N.rangeCount!==0){m=N.anchorNode;var A=N.anchorOffset,R=N.focusNode;N=N.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var J=0,pe=-1,De=-1,Ze=0,ut=0,pt=u,nt=null;t:for(;;){for(var et;pt!==m||A!==0&&pt.nodeType!==3||(pe=J+A),pt!==R||N!==0&&pt.nodeType!==3||(De=J+N),pt.nodeType===3&&(J+=pt.nodeValue.length),(et=pt.firstChild)!==null;)nt=pt,pt=et;for(;;){if(pt===u)break t;if(nt===m&&++Ze===A&&(pe=J),nt===R&&++ut===N&&(De=J),(et=pt.nextSibling)!==null)break;pt=nt,nt=pt.parentNode}pt=et}m=pe===-1||De===-1?null:{start:pe,end:De}}else m=null}m=m||{start:0,end:0}}else m=null;for(em={focusedElem:u,selectionRange:m},om=!1,aa=h;aa!==null;)if(h=aa,u=h.child,(h.subtreeFlags&1024)!==0&&u!==null)u.return=h,aa=u;else for(;aa!==null;){switch(h=aa,R=h.alternate,u=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&R!==null){u=void 0,m=h,A=R.memoizedProps,R=R.memoizedState,N=m.stateNode;try{var Yt=sl(m.type,A,m.elementType===m.type);u=N.getSnapshotBeforeUpdate(Yt,R),N.__reactInternalSnapshotBeforeUpdate=u}catch(Wt){yr(m,m.return,Wt)}}break;case 3:if((u&1024)!==0){if(u=h.stateNode.containerInfo,m=u.nodeType,m===9)kx(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":kx(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(a(163))}if(u=h.sibling,u!==null){u.return=h.return,aa=u;break}aa=h.return}}function i1(u,h,m){var N=m.flags;switch(m.tag){case 0:case 11:case 15:cl(u,m),N&4&&gh(5,m);break;case 1:if(cl(u,m),N&4)if(u=m.stateNode,h===null)try{u.componentDidMount()}catch(J){yr(m,m.return,J)}else{var A=sl(m.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(A,h,u.__reactInternalSnapshotBeforeUpdate)}catch(J){yr(m,m.return,J)}}N&64&&r1(m),N&512&&ju(m,m.return);break;case 3:if(cl(u,m),N&64&&(u=m.updateQueue,u!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{Ay(u,h)}catch(J){yr(m,m.return,J)}}break;case 27:h===null&&N&4&&vh(m);case 26:case 5:cl(u,m),h===null&&N&4&&zp(m),N&512&&ju(m,m.return);break;case 12:cl(u,m);break;case 13:cl(u,m),N&4&&l1(u,m),N&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=Yp.bind(null,m),Mu(u,m))));break;case 22:if(N=m.memoizedState!==null||Hs,!N){h=h!==null&&h.memoizedState!==null||Xn,A=Hs;var R=Xn;Hs=N,(Xn=h)&&!R?_o(u,m,(m.subtreeFlags&8772)!==0):cl(u,m),Hs=A,Xn=R}break;case 30:break;default:cl(u,m)}}function s1(u){var h=u.alternate;h!==null&&(u.alternate=null,s1(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&zi(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Pr=null,ii=!1;function So(u,h,m){for(m=m.child;m!==null;)o1(u,h,m),m=m.sibling}function o1(u,h,m){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(K,m)}catch{}switch(m.tag){case 26:Xn||Vs(m,h),So(u,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Xn||Vs(m,h);var N=Pr,A=ii;ts(m.type)&&(Pr=m.stateNode,ii=!1),So(u,h,m),Eh(m.stateNode),Pr=N,ii=A;break;case 5:Xn||Vs(m,h);case 6:if(N=Pr,A=ii,Pr=null,So(u,h,m),Pr=N,ii=A,Pr!==null)if(ii)try{(Pr.nodeType===9?Pr.body:Pr.nodeName==="HTML"?Pr.ownerDocument.body:Pr).removeChild(m.stateNode)}catch(R){yr(m,h,R)}else try{Pr.removeChild(m.stateNode)}catch(R){yr(m,h,R)}break;case 18:Pr!==null&&(ii?(u=Pr,nm(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),Fh(u)):nm(Pr,m.stateNode));break;case 4:N=Pr,A=ii,Pr=m.stateNode.containerInfo,ii=!0,So(u,h,m),Pr=N,ii=A;break;case 0:case 11:case 14:case 15:Xn||ll(2,m,h),Xn||ll(4,m,h),So(u,h,m);break;case 1:Xn||(Vs(m,h),N=m.stateNode,typeof N.componentWillUnmount=="function"&&rx(m,h,N)),So(u,h,m);break;case 21:So(u,h,m);break;case 22:Xn=(N=Xn)||m.memoizedState!==null,So(u,h,m),Xn=N;break;default:So(u,h,m)}}function l1(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Fh(u)}catch(m){yr(h,h.return,m)}}function l_(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new a1),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new a1),h;default:throw Error(a(435,u.tag))}}function ax(u,h){var m=l_(u);h.forEach(function(N){var A=p_.bind(null,u,N);m.has(N)||(m.add(N),N.then(A,A))})}function _i(u,h){var m=h.deletions;if(m!==null)for(var N=0;N<m.length;N++){var A=m[N],R=u,J=h,pe=J;e:for(;pe!==null;){switch(pe.tag){case 27:if(ts(pe.type)){Pr=pe.stateNode,ii=!1;break e}break;case 5:Pr=pe.stateNode,ii=!1;break e;case 3:case 4:Pr=pe.stateNode.containerInfo,ii=!0;break e}pe=pe.return}if(Pr===null)throw Error(a(160));o1(R,J,A),Pr=null,ii=!1,R=A.alternate,R!==null&&(R.return=null),A.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)ix(h,u),h=h.sibling}var Zi=null;function ix(u,h){var m=u.alternate,N=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:_i(h,u),si(u),N&4&&(ll(3,u,u.return),gh(3,u),ll(5,u,u.return));break;case 1:_i(h,u),si(u),N&512&&(Xn||m===null||Vs(m,m.return)),N&64&&Hs&&(u=u.updateQueue,u!==null&&(N=u.callbacks,N!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?N:m.concat(N))));break;case 26:var A=Zi;if(_i(h,u),si(u),N&512&&(Xn||m===null||Vs(m,m.return)),N&4){var R=m!==null?m.memoizedState:null;if(N=u.memoizedState,m===null)if(N===null)if(u.stateNode===null){e:{N=u.type,m=u.memoizedProps,A=A.ownerDocument||A;t:switch(N){case"title":R=A.getElementsByTagName("title")[0],(!R||R[ka]||R[Vt]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=A.createElement(N),A.head.insertBefore(R,A.querySelector("head > title"))),sa(R,N,m),R[Vt]=u,Dt(R),N=R;break e;case"link":var J=J1("link","href",A).get(N+(m.href||""));if(J){for(var pe=0;pe<J.length;pe++)if(R=J[pe],R.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&R.getAttribute("rel")===(m.rel==null?null:m.rel)&&R.getAttribute("title")===(m.title==null?null:m.title)&&R.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){J.splice(pe,1);break t}}R=A.createElement(N),sa(R,N,m),A.head.appendChild(R);break;case"meta":if(J=J1("meta","content",A).get(N+(m.content||""))){for(pe=0;pe<J.length;pe++)if(R=J[pe],R.getAttribute("content")===(m.content==null?null:""+m.content)&&R.getAttribute("name")===(m.name==null?null:m.name)&&R.getAttribute("property")===(m.property==null?null:m.property)&&R.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&R.getAttribute("charset")===(m.charSet==null?null:m.charSet)){J.splice(pe,1);break t}}R=A.createElement(N),sa(R,N,m),A.head.appendChild(R);break;default:throw Error(a(468,N))}R[Vt]=u,Dt(R),N=R}u.stateNode=N}else Z1(A,u.type,u.stateNode);else u.stateNode=X1(A,N,u.memoizedProps);else R!==N?(R===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):R.count--,N===null?Z1(A,u.type,u.stateNode):X1(A,N,u.memoizedProps)):N===null&&u.stateNode!==null&&qp(u,u.memoizedProps,m.memoizedProps)}break;case 27:_i(h,u),si(u),N&512&&(Xn||m===null||Vs(m,m.return)),m!==null&&N&4&&qp(u,u.memoizedProps,m.memoizedProps);break;case 5:if(_i(h,u),si(u),N&512&&(Xn||m===null||Vs(m,m.return)),u.flags&32){A=u.stateNode;try{Go(A,"")}catch(et){yr(u,u.return,et)}}N&4&&u.stateNode!=null&&(A=u.memoizedProps,qp(u,A,m!==null?m.memoizedProps:A)),N&1024&&(No=!0);break;case 6:if(_i(h,u),si(u),N&4){if(u.stateNode===null)throw Error(a(162));N=u.memoizedProps,m=u.stateNode;try{m.nodeValue=N}catch(et){yr(u,u.return,et)}}break;case 3:if(Fu=null,A=Zi,Zi=dn(h.containerInfo),_i(h,u),Zi=A,si(u),N&4&&m!==null&&m.memoizedState.isDehydrated)try{Fh(h.containerInfo)}catch(et){yr(u,u.return,et)}No&&(No=!1,c1(u));break;case 4:N=Zi,Zi=dn(u.stateNode.containerInfo),_i(h,u),si(u),Zi=N;break;case 12:_i(h,u),si(u);break;case 13:_i(h,u),si(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(hx=ee()),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,ax(u,N)));break;case 22:A=u.memoizedState!==null;var De=m!==null&&m.memoizedState!==null,Ze=Hs,ut=Xn;if(Hs=Ze||A,Xn=ut||De,_i(h,u),Xn=ut,Hs=Ze,si(u),N&8192)e:for(h=u.stateNode,h._visibility=A?h._visibility&-2:h._visibility|1,A&&(m===null||De||Hs||Xn||uc(u)),m=null,h=u;;){if(h.tag===5||h.tag===26){if(m===null){De=m=h;try{if(R=De.stateNode,A)J=R.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{pe=De.stateNode;var pt=De.memoizedProps.style,nt=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;pe.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(et){yr(De,De.return,et)}}}else if(h.tag===6){if(m===null){De=h;try{De.stateNode.nodeValue=A?"":De.memoizedProps}catch(et){yr(De,De.return,et)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}N&4&&(N=u.updateQueue,N!==null&&(m=N.retryQueue,m!==null&&(N.retryQueue=null,ax(u,m))));break;case 19:_i(h,u),si(u),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,ax(u,N)));break;case 30:break;case 21:break;default:_i(h,u),si(u)}}function si(u){var h=u.flags;if(h&2){try{for(var m,N=u.return;N!==null;){if(wu(N)){m=N;break}N=N.return}if(m==null)throw Error(a(160));switch(m.tag){case 27:var A=m.stateNode,R=yh(u);xh(u,R,A);break;case 5:var J=m.stateNode;m.flags&32&&(Go(J,""),m.flags&=-33);var pe=yh(u);xh(u,pe,J);break;case 3:case 4:var De=m.stateNode.containerInfo,Ze=yh(u);Up(u,Ze,De);break;default:throw Error(a(161))}}catch(ut){yr(u,u.return,ut)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function c1(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;c1(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),u=u.sibling}}function cl(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)i1(u,h.alternate,h),h=h.sibling}function uc(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:ll(4,h,h.return),uc(h);break;case 1:Vs(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&rx(h,h.return,m),uc(h);break;case 27:Eh(h.stateNode);case 26:case 5:Vs(h,h.return),uc(h);break;case 22:h.memoizedState===null&&uc(h);break;case 30:uc(h);break;default:uc(h)}u=u.sibling}}function _o(u,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var N=h.alternate,A=u,R=h,J=R.flags;switch(R.tag){case 0:case 11:case 15:_o(A,R,m),gh(4,R);break;case 1:if(_o(A,R,m),N=R,A=N.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ze){yr(N,N.return,Ze)}if(N=R,A=N.updateQueue,A!==null){var pe=N.stateNode;try{var De=A.shared.hiddenCallbacks;if(De!==null)for(A.shared.hiddenCallbacks=null,A=0;A<De.length;A++)k0(De[A],pe)}catch(Ze){yr(N,N.return,Ze)}}m&&J&64&&r1(R),ju(R,R.return);break;case 27:vh(R);case 26:case 5:_o(A,R,m),m&&N===null&&J&4&&zp(R),ju(R,R.return);break;case 12:_o(A,R,m);break;case 13:_o(A,R,m),m&&J&4&&l1(A,R);break;case 22:R.memoizedState===null&&_o(A,R,m),ju(R,R.return);break;case 30:break;default:_o(A,R,m)}h=h.sibling}}function sx(u,h){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&Hd(m))}function ox(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Hd(u))}function Gs(u,h,m,N){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)u1(u,h,m,N),h=h.sibling}function u1(u,h,m,N){var A=h.flags;switch(h.tag){case 0:case 11:case 15:Gs(u,h,m,N),A&2048&&gh(9,h);break;case 1:Gs(u,h,m,N);break;case 3:Gs(u,h,m,N),A&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Hd(u)));break;case 12:if(A&2048){Gs(u,h,m,N),u=h.stateNode;try{var R=h.memoizedProps,J=R.id,pe=R.onPostCommit;typeof pe=="function"&&pe(J,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(De){yr(h,h.return,De)}}else Gs(u,h,m,N);break;case 13:Gs(u,h,m,N);break;case 23:break;case 22:R=h.stateNode,J=h.alternate,h.memoizedState!==null?R._visibility&2?Gs(u,h,m,N):bh(u,h):R._visibility&2?Gs(u,h,m,N):(R._visibility|=2,Nu(u,h,m,N,(h.subtreeFlags&10256)!==0)),A&2048&&sx(J,h);break;case 24:Gs(u,h,m,N),A&2048&&ox(h.alternate,h);break;default:Gs(u,h,m,N)}}function Nu(u,h,m,N,A){for(A=A&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var R=u,J=h,pe=m,De=N,Ze=J.flags;switch(J.tag){case 0:case 11:case 15:Nu(R,J,pe,De,A),gh(8,J);break;case 23:break;case 22:var ut=J.stateNode;J.memoizedState!==null?ut._visibility&2?Nu(R,J,pe,De,A):bh(R,J):(ut._visibility|=2,Nu(R,J,pe,De,A)),A&&Ze&2048&&sx(J.alternate,J);break;case 24:Nu(R,J,pe,De,A),A&&Ze&2048&&ox(J.alternate,J);break;default:Nu(R,J,pe,De,A)}h=h.sibling}}function bh(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=u,N=h,A=N.flags;switch(N.tag){case 22:bh(m,N),A&2048&&sx(N.alternate,N);break;case 24:bh(m,N),A&2048&&ox(N.alternate,N);break;default:bh(m,N)}h=h.sibling}}var Pa=8192;function Su(u){if(u.subtreeFlags&Pa)for(u=u.child;u!==null;)d1(u),u=u.sibling}function d1(u){switch(u.tag){case 26:Su(u),u.flags&Pa&&u.memoizedState!==null&&D_(Zi,u.memoizedState,u.memoizedProps);break;case 5:Su(u);break;case 3:case 4:var h=Zi;Zi=dn(u.stateNode.containerInfo),Su(u),Zi=h;break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=Pa,Pa=16777216,Su(u),Pa=h):Su(u));break;default:Su(u)}}function h1(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function _u(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];aa=N,p1(N,u)}h1(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)f1(u),u=u.sibling}function f1(u){switch(u.tag){case 0:case 11:case 15:_u(u),u.flags&2048&&ll(9,u,u.return);break;case 3:_u(u);break;case 12:_u(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&2&&(u.return===null||u.return.tag!==13)?(h._visibility&=-3,Vp(u)):_u(u);break;default:_u(u)}}function Vp(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];aa=N,p1(N,u)}h1(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:ll(8,h,h.return),Vp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,Vp(h));break;default:Vp(h)}u=u.sibling}}function p1(u,h){for(;aa!==null;){var m=aa;switch(m.tag){case 0:case 11:case 15:ll(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var N=m.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:Hd(m.memoizedState.cache)}if(N=m.child,N!==null)N.return=m,aa=N;else e:for(m=u;aa!==null;){N=aa;var A=N.sibling,R=N.return;if(s1(N),N===m){aa=null;break e}if(A!==null){A.return=R,aa=A;break e}aa=R}}}var c_={getCacheForType:function(u){var h=zr(mr),m=h.data.get(u);return m===void 0&&(m=u(),h.data.set(u,m)),m}},lx=typeof WeakMap=="function"?WeakMap:Map,rr=0,vr=null,Sn=null,Ln=0,ar=0,Ci=null,ul=!1,Cu=!1,cx=!1,Co=0,Ur=0,dl=0,dc=0,ux=0,es=0,Tu=0,jh=null,oi=null,dx=!1,hx=0,ku=1/0,wh=null,hl=null,ja=0,fl=null,Au=null,Eu=0,fx=0,px=null,m1=null,Pu=0,mx=null;function Oa(){if((rr&2)!==0&&Ln!==0)return Ln&-Ln;if(q.T!==null){var u=hu;return u!==0?u:Xp()}return Yn()}function g1(){es===0&&(es=(Ln&536870912)===0||kn?ct():536870912);var u=Si.current;return u!==null&&(u.flags|=32),es}function Ti(u,h,m){(u===vr&&(ar===2||ar===9)||u.cancelPendingCommit!==null)&&(Ou(u,0),pl(u,Ln,es,!1)),ke(u,m),((rr&2)===0||u!==vr)&&(u===vr&&((rr&2)===0&&(dc|=m),Ur===4&&pl(u,Ln,es,!1)),Ws(u))}function y1(u,h,m){if((rr&6)!==0)throw Error(a(327));var N=!m&&(h&124)===0&&(h&u.expiredLanes)===0||Xe(u,h),A=N?h_(u,h):xx(u,h,!0),R=N;do{if(A===0){Cu&&!N&&pl(u,h,0,!1);break}else{if(m=u.current.alternate,R&&!u_(m)){A=xx(u,h,!1),R=!1;continue}if(A===2){if(R=h,u.errorRecoveryDisabledLanes&R)var J=0;else J=u.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){h=J;e:{var pe=u;A=jh;var De=pe.current.memoizedState.isDehydrated;if(De&&(Ou(pe,J).flags|=256),J=xx(pe,J,!1),J!==2){if(cx&&!De){pe.errorRecoveryDisabledLanes|=R,dc|=R,A=4;break e}R=oi,oi=A,R!==null&&(oi===null?oi=R:oi.push.apply(oi,R))}A=J}if(R=!1,A!==2)continue}}if(A===1){Ou(u,0),pl(u,h,0,!0);break}e:{switch(N=u,R=A,R){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:pl(N,h,es,!ul);break e;case 2:oi=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(A=hx+300-ee(),10<A)){if(pl(N,h,es,!ul),we(N,0,!0)!==0)break e;N.timeoutHandle=z1(x1.bind(null,N,m,oi,wh,dx,h,es,dc,Tu,ul,R,2,-0,0),A);break e}x1(N,m,oi,wh,dx,h,es,dc,Tu,ul,R,0,-0,0)}}break}while(!0);Ws(u)}function x1(u,h,m,N,A,R,J,pe,De,Ze,ut,pt,nt,et){if(u.timeoutHandle=-1,pt=h.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(fa={stylesheets:null,count:0,unsuspend:O_},d1(h),pt=M_(),pt!==null)){u.cancelPendingCommit=pt(Nh.bind(null,u,h,R,m,N,A,J,pe,De,ut,1,nt,et)),pl(u,R,J,!Ze);return}Nh(u,h,R,m,N,A,J,pe,De)}function u_(u){for(var h=u;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var N=0;N<m.length;N++){var A=m[N],R=A.getSnapshot;A=A.value;try{if(!bi(R(),A))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function pl(u,h,m,N){h&=~ux,h&=~dc,u.suspendedLanes|=h,u.pingedLanes&=~h,N&&(u.warmLanes|=h),N=u.expirationTimes;for(var A=h;0<A;){var R=31-fe(A),J=1<<R;N[R]=-1,A&=~J}m!==0&&Tt(u,m,h)}function Hp(){return(rr&6)===0?(Ch(0),!1):!0}function gx(){if(Sn!==null){if(ar===0)var u=Sn.return;else u=Sn,he=tl=null,gp(u),ra=null,ai=0,u=Sn;for(;u!==null;)n1(u.alternate,u),u=u.return;Sn=null}}function Ou(u,h){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,N_(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),gx(),vr=u,Sn=m=za(u.current,null),Ln=h,ar=0,Ci=null,ul=!1,Cu=Xe(u,h),cx=!1,Tu=es=ux=dc=dl=Ur=0,oi=jh=null,dx=!1,(h&8)!==0&&(h|=h&32);var N=u.entangledLanes;if(N!==0)for(u=u.entanglements,N&=h;0<N;){var A=31-fe(N),R=1<<A;h|=u[A],N&=~R}return Co=h,Vl(),m}function v1(u,h){yn=null,q.H=sh,h===qa||h===fp?(h=C0(),ar=3):h===S0?(h=C0(),ar=4):ar=h===Q0?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Ci=h,Sn===null&&(Ur=1,dh(u,Ba(h,u.current)))}function b1(){var u=q.H;return q.H=sh,u===null?sh:u}function j1(){var u=q.A;return q.A=c_,u}function yx(){Ur=4,ul||(Ln&4194048)!==Ln&&Si.current!==null||(Cu=!0),(dl&134217727)===0&&(dc&134217727)===0||vr===null||pl(vr,Ln,es,!1)}function xx(u,h,m){var N=rr;rr|=2;var A=b1(),R=j1();(vr!==u||Ln!==h)&&(wh=null,Ou(u,h)),h=!1;var J=Ur;e:do try{if(ar!==0&&Sn!==null){var pe=Sn,De=Ci;switch(ar){case 8:gx(),J=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(h=!0);var Ze=ar;if(ar=0,Ci=null,Du(u,pe,De,Ze),m&&Cu){J=0;break e}break;default:Ze=ar,ar=0,Ci=null,Du(u,pe,De,Ze)}}d_(),J=Ur;break}catch(ut){v1(u,ut)}while(!0);return h&&u.shellSuspendCounter++,he=tl=null,rr=N,q.H=A,q.A=R,Sn===null&&(vr=null,Ln=0,Vl()),J}function d_(){for(;Sn!==null;)vx(Sn)}function h_(u,h){var m=rr;rr|=2;var N=b1(),A=j1();vr!==u||Ln!==h?(wh=null,ku=ee()+500,Ou(u,h)):Cu=Xe(u,h);e:do try{if(ar!==0&&Sn!==null){h=Sn;var R=Ci;t:switch(ar){case 1:ar=0,Ci=null,Du(u,h,R,1);break;case 2:case 9:if(_0(R)){ar=0,Ci=null,N1(h);break}h=function(){ar!==2&&ar!==9||vr!==u||(ar=7),Ws(u)},R.then(h,h);break e;case 3:ar=7;break e;case 4:ar=5;break e;case 7:_0(R)?(ar=0,Ci=null,N1(h)):(ar=0,Ci=null,Du(u,h,R,7));break;case 5:var J=null;switch(Sn.tag){case 26:J=Sn.memoizedState;case 5:case 27:var pe=Sn;if(!J||oa(J)){ar=0,Ci=null;var De=pe.sibling;if(De!==null)Sn=De;else{var Ze=pe.return;Ze!==null?(Sn=Ze,Gp(Ze)):Sn=null}break t}}ar=0,Ci=null,Du(u,h,R,5);break;case 6:ar=0,Ci=null,Du(u,h,R,6);break;case 8:gx(),Ur=6;break e;default:throw Error(a(462))}}w1();break}catch(ut){v1(u,ut)}while(!0);return he=tl=null,q.H=N,q.A=A,rr=m,Sn!==null?0:(vr=null,Ln=0,Vl(),Ur)}function w1(){for(;Sn!==null&&!ae();)vx(Sn)}function vx(u){var h=Fp(u.alternate,u,Co);u.memoizedProps=u.pendingProps,h===null?Gp(u):Sn=h}function N1(u){var h=u,m=h.alternate;switch(h.tag){case 15:case 0:h=Rp(m,h,h.pendingProps,h.type,void 0,Ln);break;case 11:h=Rp(m,h,h.pendingProps,h.type.render,h.ref,Ln);break;case 5:gp(h);default:n1(m,h),h=Sn=$d(h,Co),h=Fp(m,h,Co)}u.memoizedProps=u.pendingProps,h===null?Gp(u):Sn=h}function Du(u,h,m,N){he=tl=null,gp(h),ra=null,ai=0;var A=h.return;try{if(K0(u,A,h,m,Ln)){Ur=1,dh(u,Ba(m,u.current)),Sn=null;return}}catch(R){if(A!==null)throw Sn=A,R;Ur=1,dh(u,Ba(m,u.current)),Sn=null;return}h.flags&32768?(kn||N===1?u=!0:Cu||(Ln&536870912)!==0?u=!1:(ul=u=!0,(N===2||N===9||N===3||N===6)&&(N=Si.current,N!==null&&N.tag===13&&(N.flags|=16384))),S1(h,u)):Gp(h)}function Gp(u){var h=u;do{if((h.flags&32768)!==0){S1(h,ul);return}u=h.return;var m=e1(h.alternate,h,Co);if(m!==null){Sn=m;return}if(h=h.sibling,h!==null){Sn=h;return}Sn=h=u}while(h!==null);Ur===0&&(Ur=5)}function S1(u,h){do{var m=t1(u.alternate,u);if(m!==null){m.flags&=32767,Sn=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(u=u.sibling,u!==null)){Sn=u;return}Sn=u=m}while(u!==null);Ur=6,Sn=null}function Nh(u,h,m,N,A,R,J,pe,De){u.cancelPendingCommit=null;do Wp();while(ja!==0);if((rr&6)!==0)throw Error(a(327));if(h!==null){if(h===u.current)throw Error(a(177));if(R=h.lanes|h.childLanes,R|=jy,ot(u,m,R,J,pe,De),u===vr&&(Sn=vr=null,Ln=0),Au=h,fl=u,Eu=m,fx=R,px=A,m1=N,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,O1(xe,function(){return A1(),null})):(u.callbackNode=null,u.callbackPriority=0),N=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||N){N=q.T,q.T=null,A=G.p,G.p=2,J=rr,rr|=4;try{o_(u,h,m)}finally{rr=J,G.p=A,q.T=N}}ja=1,_1(),C1(),T1()}}function _1(){if(ja===1){ja=0;var u=fl,h=Au,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=q.T,q.T=null;var N=G.p;G.p=2;var A=rr;rr|=4;try{ix(h,u);var R=em,J=m0(u.containerInfo),pe=R.focusedElem,De=R.selectionRange;if(J!==pe&&pe&&pe.ownerDocument&&p0(pe.ownerDocument.documentElement,pe)){if(De!==null&&vy(pe)){var Ze=De.start,ut=De.end;if(ut===void 0&&(ut=Ze),"selectionStart"in pe)pe.selectionStart=Ze,pe.selectionEnd=Math.min(ut,pe.value.length);else{var pt=pe.ownerDocument||document,nt=pt&&pt.defaultView||window;if(nt.getSelection){var et=nt.getSelection(),Yt=pe.textContent.length,Wt=Math.min(De.start,Yt),cr=De.end===void 0?Wt:Math.min(De.end,Yt);!et.extend&&Wt>cr&&(J=cr,cr=Wt,Wt=J);var Ge=xy(pe,Wt),qe=xy(pe,cr);if(Ge&&qe&&(et.rangeCount!==1||et.anchorNode!==Ge.node||et.anchorOffset!==Ge.offset||et.focusNode!==qe.node||et.focusOffset!==qe.offset)){var Qe=pt.createRange();Qe.setStart(Ge.node,Ge.offset),et.removeAllRanges(),Wt>cr?(et.addRange(Qe),et.extend(qe.node,qe.offset)):(Qe.setEnd(qe.node,qe.offset),et.addRange(Qe))}}}}for(pt=[],et=pe;et=et.parentNode;)et.nodeType===1&&pt.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof pe.focus=="function"&&pe.focus(),pe=0;pe<pt.length;pe++){var ht=pt[pe];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}om=!!js,em=js=null}finally{rr=A,G.p=N,q.T=m}}u.current=h,ja=2}}function C1(){if(ja===2){ja=0;var u=fl,h=Au,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=q.T,q.T=null;var N=G.p;G.p=2;var A=rr;rr|=4;try{i1(u,h.alternate,h)}finally{rr=A,G.p=N,q.T=m}}ja=3}}function T1(){if(ja===4||ja===3){ja=0,de();var u=fl,h=Au,m=Eu,N=m1;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?ja=5:(ja=0,Au=fl=null,k1(u,u.pendingLanes));var A=u.pendingLanes;if(A===0&&(hl=null),kt(m),h=h.stateNode,ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(K,h,void 0,(h.current.flags&128)===128)}catch{}if(N!==null){h=q.T,A=G.p,G.p=2,q.T=null;try{for(var R=u.onRecoverableError,J=0;J<N.length;J++){var pe=N[J];R(pe.value,{componentStack:pe.stack})}}finally{q.T=h,G.p=A}}(Eu&3)!==0&&Wp(),Ws(u),A=u.pendingLanes,(m&4194090)!==0&&(A&42)!==0?u===mx?Pu++:(Pu=0,mx=u):Pu=0,Ch(0)}}function k1(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,Hd(h)))}function Wp(u){return _1(),C1(),T1(),A1()}function A1(){if(ja!==5)return!1;var u=fl,h=fx;fx=0;var m=kt(Eu),N=q.T,A=G.p;try{G.p=32>m?32:m,q.T=null,m=px,px=null;var R=fl,J=Eu;if(ja=0,Au=fl=null,Eu=0,(rr&6)!==0)throw Error(a(331));var pe=rr;if(rr|=4,f1(R.current),u1(R,R.current,J,m),rr=pe,Ch(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(K,R)}catch{}return!0}finally{G.p=A,q.T=N,k1(u,h)}}function E1(u,h,m){h=Ba(m,h),h=Op(u.stateNode,h,2),u=go(u,h,2),u!==null&&(ke(u,2),Ws(u))}function yr(u,h,m){if(u.tag===3)E1(u,u,m);else for(;h!==null;){if(h.tag===3){E1(h,u,m);break}else if(h.tag===1){var N=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(hl===null||!hl.has(N))){u=Ba(m,u),m=Jy(2),N=go(h,m,2),N!==null&&(Y0(m,N,h,u),ke(N,2),Ws(N));break}}h=h.return}}function bx(u,h,m){var N=u.pingCache;if(N===null){N=u.pingCache=new lx;var A=new Set;N.set(h,A)}else A=N.get(h),A===void 0&&(A=new Set,N.set(h,A));A.has(m)||(cx=!0,A.add(m),u=f_.bind(null,u,h,m),h.then(u,u))}function f_(u,h,m){var N=u.pingCache;N!==null&&N.delete(h),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,vr===u&&(Ln&m)===m&&(Ur===4||Ur===3&&(Ln&62914560)===Ln&&300>ee()-hx?(rr&2)===0&&Ou(u,0):ux|=m,Tu===Ln&&(Tu=0)),Ws(u)}function P1(u,h){h===0&&(h=Ct()),u=Hl(u,h),u!==null&&(ke(u,h),Ws(u))}function Yp(u){var h=u.memoizedState,m=0;h!==null&&(m=h.retryLane),P1(u,m)}function p_(u,h){var m=0;switch(u.tag){case 13:var N=u.stateNode,A=u.memoizedState;A!==null&&(m=A.retryLane);break;case 19:N=u.stateNode;break;case 22:N=u.stateNode._retryCache;break;default:throw Error(a(314))}N!==null&&N.delete(h),P1(u,m)}function O1(u,h){return le(u,h)}var Sh=null,ml=null,Kp=!1,_h=!1,Qp=!1,gl=0;function Ws(u){u!==ml&&u.next===null&&(ml===null?Sh=ml=u:ml=ml.next=u),_h=!0,Kp||(Kp=!0,jx())}function Ch(u,h){if(!Qp&&_h){Qp=!0;do for(var m=!1,N=Sh;N!==null;){if(u!==0){var A=N.pendingLanes;if(A===0)var R=0;else{var J=N.suspendedLanes,pe=N.pingedLanes;R=(1<<31-fe(42|u)+1)-1,R&=A&~(J&~pe),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(m=!0,M1(N,R))}else R=Ln,R=we(N,N===vr?R:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(R&3)===0||Xe(N,R)||(m=!0,M1(N,R));N=N.next}while(m);Qp=!1}}function m_(){Th()}function Th(){_h=Kp=!1;var u=0;gl!==0&&(w_()&&(u=gl),gl=0);for(var h=ee(),m=null,N=Sh;N!==null;){var A=N.next,R=kh(N,h);R===0?(N.next=null,m===null?Sh=A:m.next=A,A===null&&(ml=m)):(m=N,(u!==0||(R&3)!==0)&&(_h=!0)),N=A}Ch(u)}function kh(u,h){for(var m=u.suspendedLanes,N=u.pingedLanes,A=u.expirationTimes,R=u.pendingLanes&-62914561;0<R;){var J=31-fe(R),pe=1<<J,De=A[J];De===-1?((pe&m)===0||(pe&N)!==0)&&(A[J]=Je(pe,h)):De<=h&&(u.expiredLanes|=pe),R&=~pe}if(h=vr,m=Ln,m=we(u,u===h?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N=u.callbackNode,m===0||u===h&&(ar===2||ar===9)||u.cancelPendingCommit!==null)return N!==null&&N!==null&&X(N),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||Xe(u,m)){if(h=m&-m,h===u.callbackPriority)return h;switch(N!==null&&X(N),kt(m)){case 2:case 8:m=Fe;break;case 32:m=xe;break;case 268435456:m=oe;break;default:m=xe}return N=D1.bind(null,u),m=le(m,N),u.callbackPriority=h,u.callbackNode=m,h}return N!==null&&N!==null&&X(N),u.callbackPriority=2,u.callbackNode=null,2}function D1(u,h){if(ja!==0&&ja!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(Wp()&&u.callbackNode!==m)return null;var N=Ln;return N=we(u,u===vr?N:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N===0?null:(y1(u,N,h),kh(u,ee()),u.callbackNode!=null&&u.callbackNode===m?D1.bind(null,u):null)}function M1(u,h){if(Wp())return null;y1(u,h,!0)}function jx(){S_(function(){(rr&6)!==0?le(Te,m_):Th()})}function Xp(){return gl===0&&(gl=ct()),gl}function I1(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Ed(""+u)}function R1(u,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,u.id&&m.setAttribute("form",u.id),h.parentNode.insertBefore(m,h),u=new FormData(u),m.parentNode.removeChild(m),u}function g_(u,h,m,N,A){if(h==="submit"&&m&&m.stateNode===A){var R=I1((A[ln]||null).action),J=N.submitter;J&&(h=(h=J[ln]||null)?I1(h.formAction):J.getAttribute("formAction"),h!==null&&(R=h,J=null));var pe=new Wf("action","action",null,N,A);u.push({event:pe,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(gl!==0){var De=J?R1(A,J):new FormData(A);ah(m,{pending:!0,data:De,method:A.method,action:R},null,De)}}else typeof R=="function"&&(pe.preventDefault(),De=J?R1(A,J):new FormData(A),ah(m,{pending:!0,data:De,method:A.method,action:R},R,De))},currentTarget:A}]})}}for(var wx=0;wx<Kn.length;wx++){var Nx=Kn[wx],y_=Nx.toLowerCase(),x_=Nx[0].toUpperCase()+Nx.slice(1);ps(y_,"on"+x_)}ps(ip,"onAnimationEnd"),ps(g0,"onAnimationIteration"),ps(ji,"onAnimationStart"),ps("dblclick","onDoubleClick"),ps("focusin","onFocus"),ps("focusout","onBlur"),ps(sp,"onTransitionRun"),ps(e_,"onTransitionStart"),ps(ou,"onTransitionCancel"),ps(Id,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ah="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ah));function L1(u,h){h=(h&4)!==0;for(var m=0;m<u.length;m++){var N=u[m],A=N.event;N=N.listeners;e:{var R=void 0;if(h)for(var J=N.length-1;0<=J;J--){var pe=N[J],De=pe.instance,Ze=pe.currentTarget;if(pe=pe.listener,De!==R&&A.isPropagationStopped())break e;R=pe,A.currentTarget=Ze;try{R(A)}catch(ut){lc(ut)}A.currentTarget=null,R=De}else for(J=0;J<N.length;J++){if(pe=N[J],De=pe.instance,Ze=pe.currentTarget,pe=pe.listener,De!==R&&A.isPropagationStopped())break e;R=pe,A.currentTarget=Ze;try{R(A)}catch(ut){lc(ut)}A.currentTarget=null,R=De}}}}function _n(u,h){var m=h[Tn];m===void 0&&(m=h[Tn]=new Set);var N=u+"__bubble";m.has(N)||(F1(h,u,2,!1),m.add(N))}function Sx(u,h,m){var N=0;h&&(N|=4),F1(m,u,N,h)}var li="_reactListening"+Math.random().toString(36).slice(2);function _x(u){if(!u[li]){u[li]=!0,Nn.forEach(function(m){m!=="selectionchange"&&(v_.has(m)||Sx(m,!1,u),Sx(m,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[li]||(h[li]=!0,Sx("selectionchange",!1,h))}}function F1(u,h,m,N){switch(rj(h)){case 2:var A=L_;break;case 8:A=Bu;break;default:A=Ix}m=A.bind(null,h,m,u),A=void 0,!Od||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(A=!0),N?A!==void 0?u.addEventListener(h,m,{capture:!0,passive:A}):u.addEventListener(h,m,!0):A!==void 0?u.addEventListener(h,m,{passive:A}):u.addEventListener(h,m,!1)}function To(u,h,m,N,A){var R=N;if((h&1)===0&&(h&2)===0&&N!==null)e:for(;;){if(N===null)return;var J=N.tag;if(J===3||J===4){var pe=N.stateNode.containerInfo;if(pe===A)break;if(J===4)for(J=N.return;J!==null;){var De=J.tag;if((De===3||De===4)&&J.stateNode.containerInfo===A)return;J=J.return}for(;pe!==null;){if(J=In(pe),J===null)return;if(De=J.tag,De===5||De===6||De===26||De===27){N=R=J;continue e}pe=pe.parentNode}}N=N.return}Kb(function(){var Ze=R,ut=sy(m),pt=[];e:{var nt=Rd.get(u);if(nt!==void 0){var et=Wf,Yt=u;switch(u){case"keypress":if(or(m)===0)break e;case"keydown":case"keyup":et=hy;break;case"focusin":Yt="focus",et=Kf;break;case"focusout":Yt="blur",et=Kf;break;case"beforeblur":case"afterblur":et=Kf;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=HS;break;case ip:case g0:case ji:et=e0;break;case Id:et=GS;break;case"scroll":case"scrollend":et=qS;break;case"wheel":et=YS;break;case"copy":case"cut":case"paste":et=n0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=ho;break;case"toggle":case"beforetoggle":et=Xf}var Wt=(h&4)!==0,cr=!Wt&&(u==="scroll"||u==="scrollend"),Ge=Wt?nt!==null?nt+"Capture":null:nt;Wt=[];for(var qe=Ze,Qe;qe!==null;){var ht=qe;if(Qe=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||Qe===null||Ge===null||(ht=Pd(qe,Ge),ht!=null&&Wt.push(sn(qe,ht,Qe))),cr)break;qe=qe.return}0<Wt.length&&(nt=new et(nt,Yt,null,m,ut),pt.push({event:nt,listeners:Wt}))}}if((h&7)===0){e:{if(nt=u==="mouseover"||u==="pointerover",et=u==="mouseout"||u==="pointerout",nt&&m!==Hf&&(Yt=m.relatedTarget||m.fromElement)&&(In(Yt)||Yt[er]))break e;if((et||nt)&&(nt=ut.window===ut?ut:(nt=ut.ownerDocument)?nt.defaultView||nt.parentWindow:window,et?(Yt=m.relatedTarget||m.toElement,et=Ze,Yt=Yt?In(Yt):null,Yt!==null&&(cr=s(Yt),Wt=Yt.tag,Yt!==cr||Wt!==5&&Wt!==27&&Wt!==6)&&(Yt=null)):(et=null,Yt=Ze),et!==Yt)){if(Wt=Yo,ht="onMouseLeave",Ge="onMouseEnter",qe="mouse",(u==="pointerout"||u==="pointerover")&&(Wt=ho,ht="onPointerLeave",Ge="onPointerEnter",qe="pointer"),cr=et==null?nt:gt(et),Qe=Yt==null?nt:gt(Yt),nt=new Wt(ht,qe+"leave",et,m,ut),nt.target=cr,nt.relatedTarget=Qe,ht=null,In(ut)===Ze&&(Wt=new Wt(Ge,qe+"enter",Yt,m,ut),Wt.target=Qe,Wt.relatedTarget=cr,ht=Wt),cr=ht,et&&Yt)t:{for(Wt=et,Ge=Yt,qe=0,Qe=Wt;Qe;Qe=ia(Qe))qe++;for(Qe=0,ht=Ge;ht;ht=ia(ht))Qe++;for(;0<qe-Qe;)Wt=ia(Wt),qe--;for(;0<Qe-qe;)Ge=ia(Ge),Qe--;for(;qe--;){if(Wt===Ge||Ge!==null&&Wt===Ge.alternate)break t;Wt=ia(Wt),Ge=ia(Ge)}Wt=null}else Wt=null;et!==null&&Vr(pt,nt,et,Wt,!1),Yt!==null&&cr!==null&&Vr(pt,cr,Yt,Wt,!0)}}e:{if(nt=Ze?gt(Ze):window,et=nt.nodeName&&nt.nodeName.toLowerCase(),et==="select"||et==="input"&&nt.type==="file")var Mt=c0;else if(tp(nt))if(u0)Mt=XS;else{Mt=Xo;var bn=f0}else et=nt.nodeName,!et||et.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?Ze&&iy(Ze.elementType)&&(Mt=c0):Mt=ap;if(Mt&&(Mt=Mt(u,Ze))){ru(pt,Mt,m,ut);break e}bn&&bn(u,nt,Ze),u==="focusout"&&Ze&&nt.type==="number"&&Ze.memoizedProps.value!=null&&Ad(nt,"number",nt.value)}switch(bn=Ze?gt(Ze):window,u){case"focusin":(tp(bn)||bn.contentEditable==="true")&&(su=bn,Jo=Ze,He=null);break;case"focusout":He=Jo=su=null;break;case"mousedown":st=!0;break;case"contextmenu":case"mouseup":case"dragend":st=!1,rt(pt,m,ut);break;case"selectionchange":if(ZS)break;case"keydown":case"keyup":rt(pt,m,ut)}var Bt;if(my)e:{switch(u){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else Ko?o0(u,m)&&(Kt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Kt="onCompositionStart");Kt&&(Jf&&m.locale!=="ko"&&(Ko||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&Ko&&(Bt=Qb()):(Wo=ut,cy="value"in Wo?Wo.value:Wo.textContent,Ko=!0)),bn=Jp(Ze,Kt),0<bn.length&&(Kt=new Xa(Kt,u,null,m,ut),pt.push({event:Kt,listeners:bn}),Bt?Kt.data=Bt:(Bt=ep(m),Bt!==null&&(Kt.data=Bt)))),(Bt=s0?KS(u,m):l0(u,m))&&(Kt=Jp(Ze,"onBeforeInput"),0<Kt.length&&(bn=new Xa("onBeforeInput","beforeinput",null,m,ut),pt.push({event:bn,listeners:Kt}),bn.data=Bt)),g_(pt,u,Ze,m,ut)}L1(pt,h)})}function sn(u,h,m){return{instance:u,listener:h,currentTarget:m}}function Jp(u,h){for(var m=h+"Capture",N=[];u!==null;){var A=u,R=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||R===null||(A=Pd(u,m),A!=null&&N.unshift(sn(u,A,R)),A=Pd(u,h),A!=null&&N.push(sn(u,A,R))),u.tag===3)return N;u=u.return}return[]}function ia(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function Vr(u,h,m,N,A){for(var R=h._reactName,J=[];m!==null&&m!==N;){var pe=m,De=pe.alternate,Ze=pe.stateNode;if(pe=pe.tag,De!==null&&De===N)break;pe!==5&&pe!==26&&pe!==27||Ze===null||(De=Ze,A?(Ze=Pd(m,R),Ze!=null&&J.unshift(sn(m,Ze,De))):A||(Ze=Pd(m,R),Ze!=null&&J.push(sn(m,Ze,De)))),m=m.return}J.length!==0&&u.push({event:h,listeners:J})}var b_=/\r\n?/g,yl=/\u0000|\uFFFD/g;function $1(u){return(typeof u=="string"?u:""+u).replace(b_,`
`).replace(yl,"")}function B1(u,h){return h=$1(h),$1(u)===h}function Zp(){}function lr(u,h,m,N,A,R){switch(m){case"children":typeof N=="string"?h==="body"||h==="textarea"&&N===""||Go(u,N):(typeof N=="number"||typeof N=="bigint")&&h!=="body"&&Go(u,""+N);break;case"className":Bf(u,"class",N);break;case"tabIndex":Bf(u,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":Bf(u,m,N);break;case"style":ay(u,N,R);break;case"data":if(h!=="object"){Bf(u,"data",N);break}case"src":case"href":if(N===""&&(h!=="a"||m!=="href")){u.removeAttribute(m);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(m);break}N=Ed(""+N),u.setAttribute(m,N);break;case"action":case"formAction":if(typeof N=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(m==="formAction"?(h!=="input"&&lr(u,h,"name",A.name,A,null),lr(u,h,"formEncType",A.formEncType,A,null),lr(u,h,"formMethod",A.formMethod,A,null),lr(u,h,"formTarget",A.formTarget,A,null)):(lr(u,h,"encType",A.encType,A,null),lr(u,h,"method",A.method,A,null),lr(u,h,"target",A.target,A,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(m);break}N=Ed(""+N),u.setAttribute(m,N);break;case"onClick":N!=null&&(u.onclick=Zp);break;case"onScroll":N!=null&&_n("scroll",u);break;case"onScrollEnd":N!=null&&_n("scrollend",u);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(a(61));if(m=N.__html,m!=null){if(A.children!=null)throw Error(a(60));u.innerHTML=m}}break;case"multiple":u.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":u.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){u.removeAttribute("xlink:href");break}m=Ed(""+N),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,""+N):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":N===!0?u.setAttribute(m,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(m,N):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?u.setAttribute(m,N):u.removeAttribute(m);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?u.removeAttribute(m):u.setAttribute(m,N);break;case"popover":_n("beforetoggle",u),_n("toggle",u),$f(u,"popover",N);break;case"xlinkActuate":Ls(u,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":Ls(u,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":Ls(u,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":Ls(u,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":Ls(u,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":Ls(u,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":Ls(u,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":Ls(u,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":Ls(u,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":$f(u,"is",N);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Wb.get(m)||m,$f(u,m,N))}}function Cx(u,h,m,N,A,R){switch(m){case"style":ay(u,N,R);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(a(61));if(m=N.__html,m!=null){if(A.children!=null)throw Error(a(60));u.innerHTML=m}}break;case"children":typeof N=="string"?Go(u,N):(typeof N=="number"||typeof N=="bigint")&&Go(u,""+N);break;case"onScroll":N!=null&&_n("scroll",u);break;case"onScrollEnd":N!=null&&_n("scrollend",u);break;case"onClick":N!=null&&(u.onclick=Zp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rn.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),h=m.slice(2,A?m.length-7:void 0),R=u[ln]||null,R=R!=null?R[m]:null,typeof R=="function"&&u.removeEventListener(h,R,A),typeof N=="function")){typeof R!="function"&&R!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(h,N,A);break e}m in u?u[m]=N:N===!0?u.setAttribute(m,""):$f(u,m,N)}}}function sa(u,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",u),_n("load",u);var N=!1,A=!1,R;for(R in m)if(m.hasOwnProperty(R)){var J=m[R];if(J!=null)switch(R){case"src":N=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:lr(u,h,R,J,m,null)}}A&&lr(u,h,"srcSet",m.srcSet,m,null),N&&lr(u,h,"src",m.src,m,null);return;case"input":_n("invalid",u);var pe=R=J=A=null,De=null,Ze=null;for(N in m)if(m.hasOwnProperty(N)){var ut=m[N];if(ut!=null)switch(N){case"name":A=ut;break;case"type":J=ut;break;case"checked":De=ut;break;case"defaultChecked":Ze=ut;break;case"value":R=ut;break;case"defaultValue":pe=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(a(137,h));break;default:lr(u,h,N,ut,m,null)}}ty(u,R,pe,De,Ze,J,A,!1),qf(u);return;case"select":_n("invalid",u),N=J=R=null;for(A in m)if(m.hasOwnProperty(A)&&(pe=m[A],pe!=null))switch(A){case"value":R=pe;break;case"defaultValue":J=pe;break;case"multiple":N=pe;default:lr(u,h,A,pe,m,null)}h=R,m=J,u.multiple=!!N,h!=null?Qc(u,!!N,h,!1):m!=null&&Qc(u,!!N,m,!0);return;case"textarea":_n("invalid",u),R=A=N=null;for(J in m)if(m.hasOwnProperty(J)&&(pe=m[J],pe!=null))switch(J){case"value":N=pe;break;case"defaultValue":A=pe;break;case"children":R=pe;break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(91));break;default:lr(u,h,J,pe,m,null)}Vf(u,N,A,R),qf(u);return;case"option":for(De in m)if(m.hasOwnProperty(De)&&(N=m[De],N!=null))switch(De){case"selected":u.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:lr(u,h,De,N,m,null)}return;case"dialog":_n("beforetoggle",u),_n("toggle",u),_n("cancel",u),_n("close",u);break;case"iframe":case"object":_n("load",u);break;case"video":case"audio":for(N=0;N<Ah.length;N++)_n(Ah[N],u);break;case"image":_n("error",u),_n("load",u);break;case"details":_n("toggle",u);break;case"embed":case"source":case"link":_n("error",u),_n("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ze in m)if(m.hasOwnProperty(Ze)&&(N=m[Ze],N!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:lr(u,h,Ze,N,m,null)}return;default:if(iy(h)){for(ut in m)m.hasOwnProperty(ut)&&(N=m[ut],N!==void 0&&Cx(u,h,ut,N,m,void 0));return}}for(pe in m)m.hasOwnProperty(pe)&&(N=m[pe],N!=null&&lr(u,h,pe,N,m,null))}function j_(u,h,m,N){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,R=null,J=null,pe=null,De=null,Ze=null,ut=null;for(et in m){var pt=m[et];if(m.hasOwnProperty(et)&&pt!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":De=pt;default:N.hasOwnProperty(et)||lr(u,h,et,null,N,pt)}}for(var nt in N){var et=N[nt];if(pt=m[nt],N.hasOwnProperty(nt)&&(et!=null||pt!=null))switch(nt){case"type":R=et;break;case"name":A=et;break;case"checked":Ze=et;break;case"defaultChecked":ut=et;break;case"value":J=et;break;case"defaultValue":pe=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(a(137,h));break;default:et!==pt&&lr(u,h,nt,et,N,pt)}}Uf(u,J,pe,De,Ze,ut,R,A);return;case"select":et=J=pe=nt=null;for(R in m)if(De=m[R],m.hasOwnProperty(R)&&De!=null)switch(R){case"value":break;case"multiple":et=De;default:N.hasOwnProperty(R)||lr(u,h,R,null,N,De)}for(A in N)if(R=N[A],De=m[A],N.hasOwnProperty(A)&&(R!=null||De!=null))switch(A){case"value":nt=R;break;case"defaultValue":pe=R;break;case"multiple":J=R;default:R!==De&&lr(u,h,A,R,N,De)}h=pe,m=J,N=et,nt!=null?Qc(u,!!m,nt,!1):!!N!=!!m&&(h!=null?Qc(u,!!m,h,!0):Qc(u,!!m,m?[]:"",!1));return;case"textarea":et=nt=null;for(pe in m)if(A=m[pe],m.hasOwnProperty(pe)&&A!=null&&!N.hasOwnProperty(pe))switch(pe){case"value":break;case"children":break;default:lr(u,h,pe,null,N,A)}for(J in N)if(A=N[J],R=m[J],N.hasOwnProperty(J)&&(A!=null||R!=null))switch(J){case"value":nt=A;break;case"defaultValue":et=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:A!==R&&lr(u,h,J,A,N,R)}ny(u,nt,et);return;case"option":for(var Yt in m)if(nt=m[Yt],m.hasOwnProperty(Yt)&&nt!=null&&!N.hasOwnProperty(Yt))switch(Yt){case"selected":u.selected=!1;break;default:lr(u,h,Yt,null,N,nt)}for(De in N)if(nt=N[De],et=m[De],N.hasOwnProperty(De)&&nt!==et&&(nt!=null||et!=null))switch(De){case"selected":u.selected=nt&&typeof nt!="function"&&typeof nt!="symbol";break;default:lr(u,h,De,nt,N,et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in m)nt=m[Wt],m.hasOwnProperty(Wt)&&nt!=null&&!N.hasOwnProperty(Wt)&&lr(u,h,Wt,null,N,nt);for(Ze in N)if(nt=N[Ze],et=m[Ze],N.hasOwnProperty(Ze)&&nt!==et&&(nt!=null||et!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(a(137,h));break;default:lr(u,h,Ze,nt,N,et)}return;default:if(iy(h)){for(var cr in m)nt=m[cr],m.hasOwnProperty(cr)&&nt!==void 0&&!N.hasOwnProperty(cr)&&Cx(u,h,cr,void 0,N,nt);for(ut in N)nt=N[ut],et=m[ut],!N.hasOwnProperty(ut)||nt===et||nt===void 0&&et===void 0||Cx(u,h,ut,nt,N,et);return}}for(var Ge in m)nt=m[Ge],m.hasOwnProperty(Ge)&&nt!=null&&!N.hasOwnProperty(Ge)&&lr(u,h,Ge,null,N,nt);for(pt in N)nt=N[pt],et=m[pt],!N.hasOwnProperty(pt)||nt===et||nt==null&&et==null||lr(u,h,pt,nt,N,et)}var js=null,em=null;function hc(u){return u.nodeType===9?u:u.ownerDocument}function Or(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lr(u,h){if(u===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&h==="foreignObject"?0:u}function tm(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Tx=null;function w_(){var u=window.event;return u&&u.type==="popstate"?u===Tx?!1:(Tx=u,!0):(Tx=null,!1)}var z1=typeof setTimeout=="function"?setTimeout:void 0,N_=typeof clearTimeout=="function"?clearTimeout:void 0,q1=typeof Promise=="function"?Promise:void 0,S_=typeof queueMicrotask=="function"?queueMicrotask:typeof q1<"u"?function(u){return q1.resolve(null).then(u).catch(U1)}:z1;function U1(u){setTimeout(function(){throw u})}function ts(u){return u==="head"}function nm(u,h){var m=h,N=0,A=0;do{var R=m.nextSibling;if(u.removeChild(m),R&&R.nodeType===8)if(m=R.data,m==="/$"){if(0<N&&8>N){m=N;var J=u.ownerDocument;if(m&1&&Eh(J.documentElement),m&2&&Eh(J.body),m&4)for(m=J.head,Eh(m),J=m.firstChild;J;){var pe=J.nextSibling,De=J.nodeName;J[ka]||De==="SCRIPT"||De==="STYLE"||De==="LINK"&&J.rel.toLowerCase()==="stylesheet"||m.removeChild(J),J=pe}}if(A===0){u.removeChild(R),Fh(h);return}A--}else m==="$"||m==="$?"||m==="$!"?A++:N=m.charCodeAt(0)-48;else N=0;m=R}while(m);Fh(h)}function kx(u){var h=u.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":kx(m),zi(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function V1(u,h,m,N){for(;u.nodeType===1;){var A=m;if(u.nodeName.toLowerCase()!==h.toLowerCase()){if(!N&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(N){if(!u[ka])switch(h){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(R=u.getAttribute("rel"),R==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(R!==A.rel||u.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||u.getAttribute("title")!==(A.title==null?null:A.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(R=u.getAttribute("src"),(R!==(A.src==null?null:A.src)||u.getAttribute("type")!==(A.type==null?null:A.type)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&R&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(h==="input"&&u.type==="hidden"){var R=A.name==null?null:""+A.name;if(A.type==="hidden"&&u.getAttribute("name")===R)return u}else return u;if(u=ws(u.nextSibling),u===null)break}return null}function rm(u,h,m){if(h==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=ws(u.nextSibling),u===null))return null;return u}function Ha(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function Mu(u,h){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")h();else{var N=function(){h(),m.removeEventListener("DOMContentLoaded",N)};m.addEventListener("DOMContentLoaded",N),u._reactRetry=N}}function ws(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return u}var Ax=null;function H1(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return u;h--}else m==="/$"&&h++}u=u.previousSibling}return null}function G1(u,h,m){switch(h=hc(m),u){case"html":if(u=h.documentElement,!u)throw Error(a(452));return u;case"head":if(u=h.head,!u)throw Error(a(453));return u;case"body":if(u=h.body,!u)throw Error(a(454));return u;default:throw Error(a(451))}}function Eh(u){for(var h=u.attributes;h.length;)u.removeAttributeNode(h[0]);zi(u)}var ki=new Map,Ys=new Set;function dn(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Ks=G.d;G.d={f:ns,r:W1,D:__,C:Y1,L:am,m:C_,X:k_,S:T_,M:A_};function ns(){var u=Ks.f(),h=Hp();return u||h}function W1(u){var h=tt(u);h!==null&&h.tag===5&&h.type==="form"?kp(h):Ks.r(u)}var Iu=typeof document>"u"?null:document;function Qn(u,h,m){var N=Iu;if(N&&typeof h=="string"&&h){var A=qi(h);A='link[rel="'+u+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),Ys.has(A)||(Ys.add(A),u={rel:u,crossOrigin:m,href:h},N.querySelector(A)===null&&(h=N.createElement("link"),sa(h,"link",u),Dt(h),N.head.appendChild(h)))}}function __(u){Ks.D(u),Qn("dns-prefetch",u,null)}function Y1(u,h){Ks.C(u,h),Qn("preconnect",u,h)}function am(u,h,m){Ks.L(u,h,m);var N=Iu;if(N&&u&&h){var A='link[rel="preload"][as="'+qi(h)+'"]';h==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+qi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+qi(m.imageSizes)+'"]')):A+='[href="'+qi(u)+'"]';var R=A;switch(h){case"style":R=Ru(u);break;case"script":R=Lu(u)}ki.has(R)||(u=f({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:u,as:h},m),ki.set(R,u),N.querySelector(A)!==null||h==="style"&&N.querySelector(Ph(R))||h==="script"&&N.querySelector(Oh(R))||(h=N.createElement("link"),sa(h,"link",u),Dt(h),N.head.appendChild(h)))}}function C_(u,h){Ks.m(u,h);var m=Iu;if(m&&u){var N=h&&typeof h.as=="string"?h.as:"script",A='link[rel="modulepreload"][as="'+qi(N)+'"][href="'+qi(u)+'"]',R=A;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=Lu(u)}if(!ki.has(R)&&(u=f({rel:"modulepreload",href:u},h),ki.set(R,u),m.querySelector(A)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Oh(R)))return}N=m.createElement("link"),sa(N,"link",u),Dt(N),m.head.appendChild(N)}}}function T_(u,h,m){Ks.S(u,h,m);var N=Iu;if(N&&u){var A=St(N).hoistableStyles,R=Ru(u);h=h||"default";var J=A.get(R);if(!J){var pe={loading:0,preload:null};if(J=N.querySelector(Ph(R)))pe.loading=5;else{u=f({rel:"stylesheet",href:u,"data-precedence":h},m),(m=ki.get(R))&&Dh(u,m);var De=J=N.createElement("link");Dt(De),sa(De,"link",u),De._p=new Promise(function(Ze,ut){De.onload=Ze,De.onerror=ut}),De.addEventListener("load",function(){pe.loading|=1}),De.addEventListener("error",function(){pe.loading|=2}),pe.loading|=4,im(J,h,N)}J={type:"stylesheet",instance:J,count:1,state:pe},A.set(R,J)}}}function k_(u,h){Ks.X(u,h);var m=Iu;if(m&&u){var N=St(m).hoistableScripts,A=Lu(u),R=N.get(A);R||(R=m.querySelector(Oh(A)),R||(u=f({src:u,async:!0},h),(h=ki.get(A))&&Ex(u,h),R=m.createElement("script"),Dt(R),sa(R,"link",u),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},N.set(A,R))}}function A_(u,h){Ks.M(u,h);var m=Iu;if(m&&u){var N=St(m).hoistableScripts,A=Lu(u),R=N.get(A);R||(R=m.querySelector(Oh(A)),R||(u=f({src:u,async:!0,type:"module"},h),(h=ki.get(A))&&Ex(u,h),R=m.createElement("script"),Dt(R),sa(R,"link",u),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},N.set(A,R))}}function K1(u,h,m,N){var A=(A=ze.current)?dn(A):null;if(!A)throw Error(a(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Ru(m.href),m=St(A).hoistableStyles,N=m.get(h),N||(N={type:"style",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Ru(m.href);var R=St(A).hoistableStyles,J=R.get(u);if(J||(A=A.ownerDocument||A,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(u,J),(R=A.querySelector(Ph(u)))&&!R._p&&(J.instance=R,J.state.loading=5),ki.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},ki.set(u,m),R||E_(A,u,m,J.state))),h&&N===null)throw Error(a(528,""));return J}if(h&&N!==null)throw Error(a(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Lu(m),m=St(A).hoistableScripts,N=m.get(h),N||(N={type:"script",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,u))}}function Ru(u){return'href="'+qi(u)+'"'}function Ph(u){return'link[rel="stylesheet"]['+u+"]"}function Q1(u){return f({},u,{"data-precedence":u.precedence,precedence:null})}function E_(u,h,m,N){u.querySelector('link[rel="preload"][as="style"]['+h+"]")?N.loading=1:(h=u.createElement("link"),N.preload=h,h.addEventListener("load",function(){return N.loading|=1}),h.addEventListener("error",function(){return N.loading|=2}),sa(h,"link",m),Dt(h),u.head.appendChild(h))}function Lu(u){return'[src="'+qi(u)+'"]'}function Oh(u){return"script[async]"+u}function X1(u,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var N=u.querySelector('style[data-href~="'+qi(m.href)+'"]');if(N)return h.instance=N,Dt(N),N;var A=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return N=(u.ownerDocument||u).createElement("style"),Dt(N),sa(N,"style",A),im(N,m.precedence,u),h.instance=N;case"stylesheet":A=Ru(m.href);var R=u.querySelector(Ph(A));if(R)return h.state.loading|=4,h.instance=R,Dt(R),R;N=Q1(m),(A=ki.get(A))&&Dh(N,A),R=(u.ownerDocument||u).createElement("link"),Dt(R);var J=R;return J._p=new Promise(function(pe,De){J.onload=pe,J.onerror=De}),sa(R,"link",N),h.state.loading|=4,im(R,m.precedence,u),h.instance=R;case"script":return R=Lu(m.src),(A=u.querySelector(Oh(R)))?(h.instance=A,Dt(A),A):(N=m,(A=ki.get(R))&&(N=f({},m),Ex(N,A)),u=u.ownerDocument||u,A=u.createElement("script"),Dt(A),sa(A,"link",N),u.head.appendChild(A),h.instance=A);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(N=h.instance,h.state.loading|=4,im(N,m.precedence,u));return h.instance}function im(u,h,m){for(var N=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=N.length?N[N.length-1]:null,R=A,J=0;J<N.length;J++){var pe=N[J];if(pe.dataset.precedence===h)R=pe;else if(R!==A)break}R?R.parentNode.insertBefore(u,R.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(u,h.firstChild))}function Dh(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.title==null&&(u.title=h.title)}function Ex(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.integrity==null&&(u.integrity=h.integrity)}var Fu=null;function J1(u,h,m){if(Fu===null){var N=new Map,A=Fu=new Map;A.set(m,N)}else A=Fu,N=A.get(m),N||(N=new Map,A.set(m,N));if(N.has(u))return N;for(N.set(u,null),m=m.getElementsByTagName(u),A=0;A<m.length;A++){var R=m[A];if(!(R[ka]||R[Vt]||u==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var J=R.getAttribute(h)||"";J=u+J;var pe=N.get(J);pe?pe.push(R):N.set(J,[R])}}return N}function Z1(u,h,m){u=u.ownerDocument||u,u.head.insertBefore(m,h==="title"?u.querySelector("head > title"):null)}function P_(u,h,m){if(m===1||h.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return u=h.disabled,typeof h.precedence=="string"&&u==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function oa(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var fa=null;function O_(){}function D_(u,h,m){if(fa===null)throw Error(a(475));var N=fa;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=Ru(m.href),R=u.querySelector(Ph(A));if(R){u=R._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(N.count++,N=Mh.bind(N),u.then(N,N)),h.state.loading|=4,h.instance=R,Dt(R);return}R=u.ownerDocument||u,m=Q1(m),(A=ki.get(A))&&Dh(m,A),R=R.createElement("link"),Dt(R);var J=R;J._p=new Promise(function(pe,De){J.onload=pe,J.onerror=De}),sa(R,"link",m),h.instance=R}N.stylesheets===null&&(N.stylesheets=new Map),N.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(N.count++,h=Mh.bind(N),u.addEventListener("load",h),u.addEventListener("error",h))}}function M_(){if(fa===null)throw Error(a(475));var u=fa;return u.stylesheets&&u.count===0&&Px(u,u.stylesheets),0<u.count?function(h){var m=setTimeout(function(){if(u.stylesheets&&Px(u,u.stylesheets),u.unsuspend){var N=u.unsuspend;u.unsuspend=null,N()}},6e4);return u.unsuspend=h,function(){u.unsuspend=null,clearTimeout(m)}}:null}function Mh(){if(this.count--,this.count===0){if(this.stylesheets)Px(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var sm=null;function Px(u,h){u.stylesheets=null,u.unsuspend!==null&&(u.count++,sm=new Map,h.forEach(I_,u),sm=null,Mh.call(u))}function I_(u,h){if(!(h.state.loading&4)){var m=sm.get(u);if(m)var N=m.get(null);else{m=new Map,sm.set(u,m);for(var A=u.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<A.length;R++){var J=A[R];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(m.set(J.dataset.precedence,J),N=J)}N&&m.set(null,N)}A=h.instance,J=A.getAttribute("data-precedence"),R=m.get(J)||N,R===N&&m.set(null,A),m.set(J,A),this.count++,N=Mh.bind(this),A.addEventListener("load",N),A.addEventListener("error",N),R?R.parentNode.insertBefore(A,R.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(A,u.firstChild)),h.state.loading|=4}}var $u={$$typeof:C,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function R_(u,h,m,N,A,R,J,pe){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=N,this.onUncaughtError=A,this.onCaughtError=R,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function ej(u,h,m,N,A,R,J,pe,De,Ze,ut,pt){return u=new R_(u,h,m,J,pe,De,Ze,pt),h=1,R===!0&&(h|=24),R=Ja(3,null,null,h),u.current=R,R.stateNode=u,h=_y(),h.refCount++,u.pooledCache=h,h.refCount++,R.memoizedState={element:N,isDehydrated:m,cache:h},Zl(R),u}function tj(u){return u?(u=Gl,u):Gl}function Ox(u,h,m,N,A,R){A=tj(A),N.context===null?N.context=A:N.pendingContext=A,N=nl(h),N.payload={element:m},R=R===void 0?null:R,R!==null&&(N.callback=R),m=go(u,N,h),m!==null&&(Ti(m,u,h),Wd(m,u,h))}function Dx(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<h?m:h}}function Mx(u,h){Dx(u,h),(u=u.alternate)&&Dx(u,h)}function nj(u){if(u.tag===13){var h=Hl(u,67108864);h!==null&&Ti(h,u,67108864),Mx(u,67108864)}}var om=!0;function L_(u,h,m,N){var A=q.T;q.T=null;var R=G.p;try{G.p=2,Ix(u,h,m,N)}finally{G.p=R,q.T=A}}function Bu(u,h,m,N){var A=q.T;q.T=null;var R=G.p;try{G.p=8,Ix(u,h,m,N)}finally{G.p=R,q.T=A}}function Ix(u,h,m,N){if(om){var A=Rx(N);if(A===null)To(u,h,N,lm,m),aj(u,N);else if($_(A,u,h,m,N))N.stopPropagation();else if(aj(u,N),h&4&&-1<F_.indexOf(u)){for(;A!==null;){var R=tt(A);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var J=wt(R.pendingLanes);if(J!==0){var pe=R;for(pe.pendingLanes|=2,pe.entangledLanes|=2;J;){var De=1<<31-fe(J);pe.entanglements[1]|=De,J&=~De}Ws(R),(rr&6)===0&&(ku=ee()+500,Ch(0))}}break;case 13:pe=Hl(R,2),pe!==null&&Ti(pe,R,2),Hp(),Mx(R,2)}if(R=Rx(N),R===null&&To(u,h,N,lm,m),R===A)break;A=R}A!==null&&N.stopPropagation()}else To(u,h,N,null,m)}}function Rx(u){return u=sy(u),Lx(u)}var lm=null;function Lx(u){if(lm=null,u=In(u),u!==null){var h=s(u);if(h===null)u=null;else{var m=h.tag;if(m===13){if(u=o(h),u!==null)return u;u=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null)}}return lm=u,null}function rj(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ne()){case Te:return 2;case Fe:return 8;case xe:case te:return 32;case oe:return 268435456;default:return 32}default:return 32}}var cm=!1,ko=null,xl=null,vl=null,Ih=new Map,Rh=new Map,bl=[],F_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aj(u,h){switch(u){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":xl=null;break;case"mouseover":case"mouseout":vl=null;break;case"pointerover":case"pointerout":Ih.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(h.pointerId)}}function Lh(u,h,m,N,A,R){return u===null||u.nativeEvent!==R?(u={blockedOn:h,domEventName:m,eventSystemFlags:N,nativeEvent:R,targetContainers:[A]},h!==null&&(h=tt(h),h!==null&&nj(h)),u):(u.eventSystemFlags|=N,h=u.targetContainers,A!==null&&h.indexOf(A)===-1&&h.push(A),u)}function $_(u,h,m,N,A){switch(h){case"focusin":return ko=Lh(ko,u,h,m,N,A),!0;case"dragenter":return xl=Lh(xl,u,h,m,N,A),!0;case"mouseover":return vl=Lh(vl,u,h,m,N,A),!0;case"pointerover":var R=A.pointerId;return Ih.set(R,Lh(Ih.get(R)||null,u,h,m,N,A)),!0;case"gotpointercapture":return R=A.pointerId,Rh.set(R,Lh(Rh.get(R)||null,u,h,m,N,A)),!0}return!1}function ij(u){var h=In(u.target);if(h!==null){var m=s(h);if(m!==null){if(h=m.tag,h===13){if(h=o(m),h!==null){u.blockedOn=h,vt(u.priority,function(){if(m.tag===13){var N=Oa();N=jt(N);var A=Hl(m,N);A!==null&&Ti(A,m,N),Mx(m,N)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function um(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var m=Rx(u.nativeEvent);if(m===null){m=u.nativeEvent;var N=new m.constructor(m.type,m);Hf=N,m.target.dispatchEvent(N),Hf=null}else return h=tt(m),h!==null&&nj(h),u.blockedOn=m,!1;h.shift()}return!0}function sj(u,h,m){um(u)&&m.delete(h)}function B_(){cm=!1,ko!==null&&um(ko)&&(ko=null),xl!==null&&um(xl)&&(xl=null),vl!==null&&um(vl)&&(vl=null),Ih.forEach(sj),Rh.forEach(sj)}function dm(u,h){u.blockedOn===h&&(u.blockedOn=null,cm||(cm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,B_)))}var hm=null;function oj(u){hm!==u&&(hm=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hm===u&&(hm=null);for(var h=0;h<u.length;h+=3){var m=u[h],N=u[h+1],A=u[h+2];if(typeof N!="function"){if(Lx(N||m)===null)continue;break}var R=tt(m);R!==null&&(u.splice(h,3),h-=3,ah(R,{pending:!0,data:A,method:m.method,action:N},N,A))}}))}function Fh(u){function h(De){return dm(De,u)}ko!==null&&dm(ko,u),xl!==null&&dm(xl,u),vl!==null&&dm(vl,u),Ih.forEach(h),Rh.forEach(h);for(var m=0;m<bl.length;m++){var N=bl[m];N.blockedOn===u&&(N.blockedOn=null)}for(;0<bl.length&&(m=bl[0],m.blockedOn===null);)ij(m),m.blockedOn===null&&bl.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(N=0;N<m.length;N+=3){var A=m[N],R=m[N+1],J=A[ln]||null;if(typeof R=="function")J||oj(m);else if(J){var pe=null;if(R&&R.hasAttribute("formAction")){if(A=R,J=R[ln]||null)pe=J.formAction;else if(Lx(A)!==null)continue}else pe=J.action;typeof pe=="function"?m[N+1]=pe:(m.splice(N,3),N-=3),oj(m)}}}function Fx(u){this._internalRoot=u}fm.prototype.render=Fx.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(a(409));var m=h.current,N=Oa();Ox(m,N,u,h,null,null)},fm.prototype.unmount=Fx.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;Ox(u.current,2,null,u,null,null),Hp(),h[er]=null}};function fm(u){this._internalRoot=u}fm.prototype.unstable_scheduleHydration=function(u){if(u){var h=Yn();u={blockedOn:null,target:u,priority:h};for(var m=0;m<bl.length&&h!==0&&h<bl[m].priority;m++);bl.splice(m,0,u),m===0&&ij(u)}};var lj=e.version;if(lj!=="19.1.0")throw Error(a(527,lj,"19.1.0"));G.findDOMNode=function(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(a(188)):(u=Object.keys(u).join(","),Error(a(268,u)));return u=c(h),u=u!==null?d(u):null,u=u===null?null:u.stateNode,u};var z_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{K=pm.inject(z_),ge=pm}catch{}}return Bx.createRoot=function(u,h){if(!i(u))throw Error(a(299));var m=!1,N="",A=Xy,R=Pp,J=W0,pe=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(R=h.onCaughtError),h.onRecoverableError!==void 0&&(J=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(pe=h.unstable_transitionCallbacks)),h=ej(u,1,!1,null,null,m,N,A,R,J,pe,null),u[er]=h.current,_x(u),new Fx(h)},Bx.hydrateRoot=function(u,h,m){if(!i(u))throw Error(a(299));var N=!1,A="",R=Xy,J=Pp,pe=W0,De=null,Ze=null;return m!=null&&(m.unstable_strictMode===!0&&(N=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(J=m.onCaughtError),m.onRecoverableError!==void 0&&(pe=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(De=m.unstable_transitionCallbacks),m.formState!==void 0&&(Ze=m.formState)),h=ej(u,1,!0,h,m??null,N,A,R,J,pe,De,Ze),h.context=tj(null),m=h.current,N=Oa(),N=jt(N),A=nl(N),A.callback=null,go(m,A,N),m=N,h.current.lanes=m,ke(h,m),Ws(h),u[er]=h.current,_x(u),new fm(h)},Bx.version="19.1.0",Bx}var WM;function nW(){if(WM)return Y_.exports;WM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Y_.exports=tW(),Y_.exports}var rW=nW(),Og=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},aW={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ku,TO,BB,iW=(BB=class{constructor(){Ut(this,Ku,aW);Ut(this,TO,!1)}setTimeoutProvider(t){Pt(this,Ku,t)}setTimeout(t,e){return Re(this,Ku).setTimeout(t,e)}clearTimeout(t){Re(this,Ku).clearTimeout(t)}setInterval(t,e){return Re(this,Ku).setInterval(t,e)}clearInterval(t){Re(this,Ku).clearInterval(t)}},Ku=new WeakMap,TO=new WeakMap,BB),Qh=new iW;function sW(t){setTimeout(t,0)}var gf=typeof window>"u"||"Deno"in globalThis;function Di(){}function oW(t,e){return typeof t=="function"?t(e):t}function KA(t){return typeof t=="number"&&t>=0&&t!==1/0}function JB(t,e){return Math.max(t+(e||0)-Date.now(),0)}function od(t,e){return typeof t=="function"?t(e):t}function Zs(t,e){return typeof t=="function"?t(e):t}function YM(t,e){const{type:n="all",exact:a,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(a){if(e.queryHash!==AO(o,e.options))return!1}else if(!Tv(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function KM(t,e){const{exact:n,status:a,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(yf(e.options.mutationKey)!==yf(s))return!1}else if(!Tv(e.options.mutationKey,s))return!1}return!(a&&e.state.status!==a||i&&!i(e))}function AO(t,e){return((e==null?void 0:e.queryKeyHashFn)||yf)(t)}function yf(t){return JSON.stringify(t,(e,n)=>QA(n)?Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{}):n)}function Tv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Tv(t[n],e[n])):!1}var lW=Object.prototype.hasOwnProperty;function ZB(t,e,n=0){if(t===e)return t;if(n>500)return e;const a=QM(t)&&QM(e);if(!a&&!(QA(t)&&QA(e)))return e;const s=(a?t:Object.keys(t)).length,o=a?e:Object.keys(e),l=o.length,c=a?new Array(l):{};let d=0;for(let f=0;f<l;f++){const p=a?f:o[f],g=t[p],x=e[p];if(g===x){c[p]=g,(a?f<s:lW.call(t,p))&&d++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){c[p]=x;continue}const b=ZB(g,x,n+1);c[p]=b,b===g&&d++}return s===l&&d===s?t:c}function sw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function QM(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function QA(t){if(!XM(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!XM(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function XM(t){return Object.prototype.toString.call(t)==="[object Object]"}function cW(t){return new Promise(e=>{Qh.setTimeout(e,t)})}function XA(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ZB(t,e):e}function uW(t,e,n=0){const a=[...t,e];return n&&a.length>n?a.slice(1):a}function dW(t,e,n=0){const a=[e,...t];return n&&a.length>n?a.slice(0,-1):a}var EO=Symbol();function ez(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===EO?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function PO(t,e){return typeof t=="function"?t(...e):!!t}function hW(t,e,n){let a=!1,i;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(i??(i=e()),a||(a=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),t}var nf,Qu,zm,zB,fW=(zB=class extends Og{constructor(){super();Ut(this,nf);Ut(this,Qu);Ut(this,zm);Pt(this,zm,e=>{if(!gf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Re(this,Qu)||this.setEventListener(Re(this,zm))}onUnsubscribe(){var e;this.hasListeners()||((e=Re(this,Qu))==null||e.call(this),Pt(this,Qu,void 0))}setEventListener(e){var n;Pt(this,zm,e),(n=Re(this,Qu))==null||n.call(this),Pt(this,Qu,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){Re(this,nf)!==e&&(Pt(this,nf,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Re(this,nf)=="boolean"?Re(this,nf):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},nf=new WeakMap,Qu=new WeakMap,zm=new WeakMap,zB),OO=new fW;function JA(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function a(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{a({status:"fulfilled",value:i}),t(i)},n.reject=i=>{a({status:"rejected",reason:i}),e(i)},n}var pW=sW;function mW(){let t=[],e=0,n=l=>{l()},a=l=>{l()},i=pW;const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{a(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{i=l}}}var Sa=mW(),qm,Xu,Um,qB,gW=(qB=class extends Og{constructor(){super();Ut(this,qm,!0);Ut(this,Xu);Ut(this,Um);Pt(this,Um,e=>{if(!gf&&window.addEventListener){const n=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}})}onSubscribe(){Re(this,Xu)||this.setEventListener(Re(this,Um))}onUnsubscribe(){var e;this.hasListeners()||((e=Re(this,Xu))==null||e.call(this),Pt(this,Xu,void 0))}setEventListener(e){var n;Pt(this,Um,e),(n=Re(this,Xu))==null||n.call(this),Pt(this,Xu,e(this.setOnline.bind(this)))}setOnline(e){Re(this,qm)!==e&&(Pt(this,qm,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return Re(this,qm)}},qm=new WeakMap,Xu=new WeakMap,Um=new WeakMap,qB),ow=new gW;function yW(t){return Math.min(1e3*2**t,3e4)}function tz(t){return(t??"online")==="online"?ow.isOnline():!0}var ZA=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function nz(t){let e=!1,n=0,a;const i=JA(),s=()=>i.status!=="pending",o=j=>{var S;if(!s()){const _=new ZA(j);g(_),(S=t.onCancel)==null||S.call(t,_)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>OO.isFocused()&&(t.networkMode==="always"||ow.isOnline())&&t.canRun(),f=()=>tz(t.networkMode)&&t.canRun(),p=j=>{s()||(a==null||a(),i.resolve(j))},g=j=>{s()||(a==null||a(),i.reject(j))},x=()=>new Promise(j=>{var S;a=_=>{(s()||d())&&j(_)},(S=t.onPause)==null||S.call(t)}).then(()=>{var j;a=void 0,s()||(j=t.onContinue)==null||j.call(t)}),b=()=>{if(s())return;let j;const S=n===0?t.initialPromise:void 0;try{j=S??t.fn()}catch(_){j=Promise.reject(_)}Promise.resolve(j).then(p).catch(_=>{var O;if(s())return;const T=t.retry??(gf?0:3),C=t.retryDelay??yW,E=typeof C=="function"?C(n,_):C,k=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,_);if(e||!k){g(_);return}n++,(O=t.onFail)==null||O.call(t,n,_),cW(E).then(()=>d()?void 0:x()).then(()=>{e?g(_):b()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?b():x().then(b),i)}}var rf,UB,rz=(UB=class{constructor(){Ut(this,rf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),KA(this.gcTime)&&Pt(this,rf,Qh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(gf?1/0:5*60*1e3))}clearGcTimeout(){Re(this,rf)&&(Qh.clearTimeout(Re(this,rf)),Pt(this,rf,void 0))}},rf=new WeakMap,UB),af,Vm,Js,sf,Da,vb,of,Oo,mc,VB,xW=(VB=class extends rz{constructor(e){super();Ut(this,Oo);Ut(this,af);Ut(this,Vm);Ut(this,Js);Ut(this,sf);Ut(this,Da);Ut(this,vb);Ut(this,of);Pt(this,of,!1),Pt(this,vb,e.defaultOptions),this.setOptions(e.options),this.observers=[],Pt(this,sf,e.client),Pt(this,Js,Re(this,sf).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Pt(this,af,ZM(this.options)),this.state=e.state??Re(this,af),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Re(this,Da))==null?void 0:e.promise}setOptions(e){if(this.options={...Re(this,vb),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=ZM(this.options);n.data!==void 0&&(this.setState(JM(n.data,n.dataUpdatedAt)),Pt(this,af,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Re(this,Js).remove(this)}setData(e,n){const a=XA(this.state.data,e,this.options);return wn(this,Oo,mc).call(this,{data:a,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),a}setState(e,n){wn(this,Oo,mc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var a,i;const n=(a=Re(this,Da))==null?void 0:a.promise;return(i=Re(this,Da))==null||i.cancel(e),n?n.then(Di).catch(Di):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Re(this,af))}isActive(){return this.observers.some(e=>Zs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===EO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>od(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!JB(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Re(this,Da))==null||n.continue()}onOnline(){var n;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Re(this,Da))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Re(this,Js).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Re(this,Da)&&(Re(this,of)?Re(this,Da).cancel({revert:!0}):Re(this,Da).cancelRetry()),this.scheduleGc()),Re(this,Js).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wn(this,Oo,mc).call(this,{type:"invalidate"})}async fetch(e,n){var c,d,f,p,g,x,b,j,S,_,T,C;if(this.state.fetchStatus!=="idle"&&((c=Re(this,Da))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Re(this,Da))return Re(this,Da).continueRetry(),Re(this,Da).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(k=>k.options.queryFn);E&&this.setOptions(E.options)}const a=new AbortController,i=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(Pt(this,of,!0),a.signal)})},s=()=>{const E=ez(this.options,n),O=(()=>{const I={client:Re(this,sf),queryKey:this.queryKey,meta:this.meta};return i(I),I})();return Pt(this,of,!1),this.options.persister?this.options.persister(E,O,this):E(O)},l=(()=>{const E={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Re(this,sf),state:this.state,fetchFn:s};return i(E),E})();(d=this.options.behavior)==null||d.onFetch(l,this),Pt(this,Vm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&wn(this,Oo,mc).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Pt(this,Da,nz({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:E=>{E instanceof ZA&&E.revert&&this.setState({...Re(this,Vm),fetchStatus:"idle"}),a.abort()},onFail:(E,k)=>{wn(this,Oo,mc).call(this,{type:"failed",failureCount:E,error:k})},onPause:()=>{wn(this,Oo,mc).call(this,{type:"pause"})},onContinue:()=>{wn(this,Oo,mc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const E=await Re(this,Da).start();if(E===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(E),(x=(g=Re(this,Js).config).onSuccess)==null||x.call(g,E,this),(j=(b=Re(this,Js).config).onSettled)==null||j.call(b,E,this.state.error,this),E}catch(E){if(E instanceof ZA){if(E.silent)return Re(this,Da).promise;if(E.revert){if(this.state.data===void 0)throw E;return this.state.data}}throw wn(this,Oo,mc).call(this,{type:"error",error:E}),(_=(S=Re(this,Js).config).onError)==null||_.call(S,E,this),(C=(T=Re(this,Js).config).onSettled)==null||C.call(T,this.state.data,E,this),E}finally{this.scheduleGc()}}},af=new WeakMap,Vm=new WeakMap,Js=new WeakMap,sf=new WeakMap,Da=new WeakMap,vb=new WeakMap,of=new WeakMap,Oo=new WeakSet,mc=function(e){const n=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...az(a.data,this.options),fetchMeta:e.meta??null};case"success":const i={...a,...JM(e.data,e.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Pt(this,Vm,e.manual?i:void 0),i;case"error":const s=e.error;return{...a,error:s,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=n(this.state),Sa.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),Re(this,Js).notify({query:this,type:"updated",action:e})})},VB);function az(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tz(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function JM(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function ZM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,a=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var as,Un,bb,Pi,lf,Hm,yc,Ju,jb,Gm,Wm,cf,uf,Zu,Ym,pr,cv,eE,tE,nE,rE,aE,iE,sE,iz,HB,vW=(HB=class extends Og{constructor(e,n){super();Ut(this,pr);Ut(this,as);Ut(this,Un);Ut(this,bb);Ut(this,Pi);Ut(this,lf);Ut(this,Hm);Ut(this,yc);Ut(this,Ju);Ut(this,jb);Ut(this,Gm);Ut(this,Wm);Ut(this,cf);Ut(this,uf);Ut(this,Zu);Ut(this,Ym,new Set);this.options=n,Pt(this,as,e),Pt(this,Ju,null),Pt(this,yc,JA()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Re(this,Un).addObserver(this),eI(Re(this,Un),this.options)?wn(this,pr,cv).call(this):this.updateResult(),wn(this,pr,rE).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return oE(Re(this,Un),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return oE(Re(this,Un),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,wn(this,pr,aE).call(this),wn(this,pr,iE).call(this),Re(this,Un).removeObserver(this)}setOptions(e){const n=this.options,a=Re(this,Un);if(this.options=Re(this,as).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Zs(this.options.enabled,Re(this,Un))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");wn(this,pr,sE).call(this),Re(this,Un).setOptions(this.options),n._defaulted&&!sw(this.options,n)&&Re(this,as).getQueryCache().notify({type:"observerOptionsUpdated",query:Re(this,Un),observer:this});const i=this.hasListeners();i&&tI(Re(this,Un),a,this.options,n)&&wn(this,pr,cv).call(this),this.updateResult(),i&&(Re(this,Un)!==a||Zs(this.options.enabled,Re(this,Un))!==Zs(n.enabled,Re(this,Un))||od(this.options.staleTime,Re(this,Un))!==od(n.staleTime,Re(this,Un)))&&wn(this,pr,eE).call(this);const s=wn(this,pr,tE).call(this);i&&(Re(this,Un)!==a||Zs(this.options.enabled,Re(this,Un))!==Zs(n.enabled,Re(this,Un))||s!==Re(this,Zu))&&wn(this,pr,nE).call(this,s)}getOptimisticResult(e){const n=Re(this,as).getQueryCache().build(Re(this,as),e),a=this.createResult(n,e);return jW(this,a)&&(Pt(this,Pi,a),Pt(this,Hm,this.options),Pt(this,lf,Re(this,Un).state)),a}getCurrentResult(){return Re(this,Pi)}trackResult(e,n){return new Proxy(e,{get:(a,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Re(this,yc).status==="pending"&&Re(this,yc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,i))})}trackProp(e){Re(this,Ym).add(e)}getCurrentQuery(){return Re(this,Un)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Re(this,as).defaultQueryOptions(e),a=Re(this,as).getQueryCache().build(Re(this,as),n);return a.fetch().then(()=>this.createResult(a,n))}fetch(e){return wn(this,pr,cv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Re(this,Pi)))}createResult(e,n){var B;const a=Re(this,Un),i=this.options,s=Re(this,Pi),o=Re(this,lf),l=Re(this,Hm),d=e!==a?e.state:Re(this,bb),{state:f}=e;let p={...f},g=!1,x;if(n._optimisticResults){const $=this.hasListeners(),L=!$&&eI(e,n),V=$&&tI(e,a,n,i);(L||V)&&(p={...p,...az(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:b,errorUpdatedAt:j,status:S}=p;x=p.data;let _=!1;if(n.placeholderData!==void 0&&x===void 0&&S==="pending"){let $;s!=null&&s.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?($=s.data,_=!0):$=typeof n.placeholderData=="function"?n.placeholderData((B=Re(this,Wm))==null?void 0:B.state.data,Re(this,Wm)):n.placeholderData,$!==void 0&&(S="success",x=XA(s==null?void 0:s.data,$,n),g=!0)}if(n.select&&x!==void 0&&!_)if(s&&x===(o==null?void 0:o.data)&&n.select===Re(this,jb))x=Re(this,Gm);else try{Pt(this,jb,n.select),x=n.select(x),x=XA(s==null?void 0:s.data,x,n),Pt(this,Gm,x),Pt(this,Ju,null)}catch($){Pt(this,Ju,$)}Re(this,Ju)&&(b=Re(this,Ju),x=Re(this,Gm),j=Date.now(),S="error");const T=p.fetchStatus==="fetching",C=S==="pending",E=S==="error",k=C&&T,O=x!==void 0,F={status:S,fetchStatus:p.fetchStatus,isPending:C,isSuccess:S==="success",isError:E,isInitialLoading:k,isLoading:k,data:x,dataUpdatedAt:p.dataUpdatedAt,error:b,errorUpdatedAt:j,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:E&&!O,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:E&&O,isStale:DO(e,n),refetch:this.refetch,promise:Re(this,yc),isEnabled:Zs(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const $=F.data!==void 0,L=F.status==="error"&&!$,V=Q=>{L?Q.reject(F.error):$&&Q.resolve(F.data)},H=()=>{const Q=Pt(this,yc,F.promise=JA());V(Q)},ne=Re(this,yc);switch(ne.status){case"pending":e.queryHash===a.queryHash&&V(ne);break;case"fulfilled":(L||F.data!==ne.value)&&H();break;case"rejected":(!L||F.error!==ne.reason)&&H();break}}return F}updateResult(){const e=Re(this,Pi),n=this.createResult(Re(this,Un),this.options);if(Pt(this,lf,Re(this,Un).state),Pt(this,Hm,this.options),Re(this,lf).data!==void 0&&Pt(this,Wm,Re(this,Un)),sw(n,e))return;Pt(this,Pi,n);const a=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!Re(this,Ym).size)return!0;const o=new Set(s??Re(this,Ym));return this.options.throwOnError&&o.add("error"),Object.keys(Re(this,Pi)).some(l=>{const c=l;return Re(this,Pi)[c]!==e[c]&&o.has(c)})};wn(this,pr,iz).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&wn(this,pr,rE).call(this)}},as=new WeakMap,Un=new WeakMap,bb=new WeakMap,Pi=new WeakMap,lf=new WeakMap,Hm=new WeakMap,yc=new WeakMap,Ju=new WeakMap,jb=new WeakMap,Gm=new WeakMap,Wm=new WeakMap,cf=new WeakMap,uf=new WeakMap,Zu=new WeakMap,Ym=new WeakMap,pr=new WeakSet,cv=function(e){wn(this,pr,sE).call(this);let n=Re(this,Un).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Di)),n},eE=function(){wn(this,pr,aE).call(this);const e=od(this.options.staleTime,Re(this,Un));if(gf||Re(this,Pi).isStale||!KA(e))return;const a=JB(Re(this,Pi).dataUpdatedAt,e)+1;Pt(this,cf,Qh.setTimeout(()=>{Re(this,Pi).isStale||this.updateResult()},a))},tE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Re(this,Un)):this.options.refetchInterval)??!1},nE=function(e){wn(this,pr,iE).call(this),Pt(this,Zu,e),!(gf||Zs(this.options.enabled,Re(this,Un))===!1||!KA(Re(this,Zu))||Re(this,Zu)===0)&&Pt(this,uf,Qh.setInterval(()=>{(this.options.refetchIntervalInBackground||OO.isFocused())&&wn(this,pr,cv).call(this)},Re(this,Zu)))},rE=function(){wn(this,pr,eE).call(this),wn(this,pr,nE).call(this,wn(this,pr,tE).call(this))},aE=function(){Re(this,cf)&&(Qh.clearTimeout(Re(this,cf)),Pt(this,cf,void 0))},iE=function(){Re(this,uf)&&(Qh.clearInterval(Re(this,uf)),Pt(this,uf,void 0))},sE=function(){const e=Re(this,as).getQueryCache().build(Re(this,as),this.options);if(e===Re(this,Un))return;const n=Re(this,Un);Pt(this,Un,e),Pt(this,bb,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},iz=function(e){Sa.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Re(this,Pi))}),Re(this,as).getQueryCache().notify({query:Re(this,Un),type:"observerResultsUpdated"})})},HB);function bW(t,e){return Zs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function eI(t,e){return bW(t,e)||t.state.data!==void 0&&oE(t,e,e.refetchOnMount)}function oE(t,e,n){if(Zs(e.enabled,t)!==!1&&od(e.staleTime,t)!=="static"){const a=typeof n=="function"?n(t):n;return a==="always"||a!==!1&&DO(t,e)}return!1}function tI(t,e,n,a){return(t!==e||Zs(a.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&DO(t,n)}function DO(t,e){return Zs(e.enabled,t)!==!1&&t.isStaleByTime(od(e.staleTime,t))}function jW(t,e){return!sw(t.getCurrentResult(),e)}function nI(t){return{onFetch:(e,n)=>{var f,p,g,x,b;const a=e.options,i=(g=(p=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,s=((x=e.state.data)==null?void 0:x.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let j=!1;const S=C=>{hW(C,()=>e.signal,()=>j=!0)},_=ez(e.options,e.fetchOptions),T=async(C,E,k)=>{if(j)return Promise.reject();if(E==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:E,direction:k?"backward":"forward",meta:e.options.meta};return S(L),L})(),F=await _(I),{maxPages:B}=e.options,$=k?dW:uW;return{pages:$(C.pages,F,B),pageParams:$(C.pageParams,E,B)}};if(i&&s.length){const C=i==="backward",E=C?wW:rI,k={pages:s,pageParams:o},O=E(a,k);l=await T(k,O,C)}else{const C=t??s.length;do{const E=c===0?o[0]??a.initialPageParam:rI(a,l);if(c>0&&E==null)break;l=await T(l,E),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var j,S;return(S=(j=e.options).persister)==null?void 0:S.call(j,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function rI(t,{pages:e,pageParams:n}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,n[a],n):void 0}function wW(t,{pages:e,pageParams:n}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,n[0],n):void 0}var wb,Nl,Oi,df,Sl,Hu,GB,NW=(GB=class extends rz{constructor(e){super();Ut(this,Sl);Ut(this,wb);Ut(this,Nl);Ut(this,Oi);Ut(this,df);Pt(this,wb,e.client),this.mutationId=e.mutationId,Pt(this,Oi,e.mutationCache),Pt(this,Nl,[]),this.state=e.state||sz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Re(this,Nl).includes(e)||(Re(this,Nl).push(e),this.clearGcTimeout(),Re(this,Oi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Pt(this,Nl,Re(this,Nl).filter(n=>n!==e)),this.scheduleGc(),Re(this,Oi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Re(this,Nl).length||(this.state.status==="pending"?this.scheduleGc():Re(this,Oi).remove(this))}continue(){var e;return((e=Re(this,df))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,d,f,p,g,x,b,j,S,_,T,C,E,k,O,I,F,B;const n=()=>{wn(this,Sl,Hu).call(this,{type:"continue"})},a={client:Re(this,wb),meta:this.options.meta,mutationKey:this.options.mutationKey};Pt(this,df,nz({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:($,L)=>{wn(this,Sl,Hu).call(this,{type:"failed",failureCount:$,error:L})},onPause:()=>{wn(this,Sl,Hu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Re(this,Oi).canRun(this)}));const i=this.state.status==="pending",s=!Re(this,df).canStart();try{if(i)n();else{wn(this,Sl,Hu).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(o=Re(this,Oi).config).onMutate)==null?void 0:l.call(o,e,this,a));const L=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,a));L!==this.state.context&&wn(this,Sl,Hu).call(this,{type:"pending",context:L,variables:e,isPaused:s})}const $=await Re(this,df).start();return await((p=(f=Re(this,Oi).config).onSuccess)==null?void 0:p.call(f,$,e,this.state.context,this,a)),await((x=(g=this.options).onSuccess)==null?void 0:x.call(g,$,e,this.state.context,a)),await((j=(b=Re(this,Oi).config).onSettled)==null?void 0:j.call(b,$,null,this.state.variables,this.state.context,this,a)),await((_=(S=this.options).onSettled)==null?void 0:_.call(S,$,null,e,this.state.context,a)),wn(this,Sl,Hu).call(this,{type:"success",data:$}),$}catch($){try{await((C=(T=Re(this,Oi).config).onError)==null?void 0:C.call(T,$,e,this.state.context,this,a))}catch(L){Promise.reject(L)}try{await((k=(E=this.options).onError)==null?void 0:k.call(E,$,e,this.state.context,a))}catch(L){Promise.reject(L)}try{await((I=(O=Re(this,Oi).config).onSettled)==null?void 0:I.call(O,void 0,$,this.state.variables,this.state.context,this,a))}catch(L){Promise.reject(L)}try{await((B=(F=this.options).onSettled)==null?void 0:B.call(F,void 0,$,e,this.state.context,a))}catch(L){Promise.reject(L)}throw wn(this,Sl,Hu).call(this,{type:"error",error:$}),$}finally{Re(this,Oi).runNext(this)}}},wb=new WeakMap,Nl=new WeakMap,Oi=new WeakMap,df=new WeakMap,Sl=new WeakSet,Hu=function(e){const n=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Sa.batch(()=>{Re(this,Nl).forEach(a=>{a.onMutationUpdate(e)}),Re(this,Oi).notify({mutation:this,type:"updated",action:e})})},GB);function sz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xc,Do,Nb,WB,SW=(WB=class extends Og{constructor(e={}){super();Ut(this,xc);Ut(this,Do);Ut(this,Nb);this.config=e,Pt(this,xc,new Set),Pt(this,Do,new Map),Pt(this,Nb,0)}build(e,n,a){const i=new NW({client:e,mutationCache:this,mutationId:++cj(this,Nb)._,options:e.defaultMutationOptions(n),state:a});return this.add(i),i}add(e){Re(this,xc).add(e);const n=uj(e);if(typeof n=="string"){const a=Re(this,Do).get(n);a?a.push(e):Re(this,Do).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Re(this,xc).delete(e)){const n=uj(e);if(typeof n=="string"){const a=Re(this,Do).get(n);if(a)if(a.length>1){const i=a.indexOf(e);i!==-1&&a.splice(i,1)}else a[0]===e&&Re(this,Do).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=uj(e);if(typeof n=="string"){const a=Re(this,Do).get(n),i=a==null?void 0:a.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var a;const n=uj(e);if(typeof n=="string"){const i=(a=Re(this,Do).get(n))==null?void 0:a.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Sa.batch(()=>{Re(this,xc).forEach(e=>{this.notify({type:"removed",mutation:e})}),Re(this,xc).clear(),Re(this,Do).clear()})}getAll(){return Array.from(Re(this,xc))}find(e){const n={exact:!0,...e};return this.getAll().find(a=>KM(n,a))}findAll(e={}){return this.getAll().filter(n=>KM(e,n))}notify(e){Sa.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Sa.batch(()=>Promise.all(e.map(n=>n.continue().catch(Di))))}},xc=new WeakMap,Do=new WeakMap,Nb=new WeakMap,WB);function uj(t){var e;return(e=t.options.scope)==null?void 0:e.id}var vc,ed,is,bc,Pc,Wj,lE,YB,_W=(YB=class extends Og{constructor(n,a){super();Ut(this,Pc);Ut(this,vc);Ut(this,ed);Ut(this,is);Ut(this,bc);Pt(this,vc,n),this.setOptions(a),this.bindMethods(),wn(this,Pc,Wj).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const a=this.options;this.options=Re(this,vc).defaultMutationOptions(n),sw(this.options,a)||Re(this,vc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Re(this,is),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&yf(a.mutationKey)!==yf(this.options.mutationKey)?this.reset():((i=Re(this,is))==null?void 0:i.state.status)==="pending"&&Re(this,is).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Re(this,is))==null||n.removeObserver(this)}onMutationUpdate(n){wn(this,Pc,Wj).call(this),wn(this,Pc,lE).call(this,n)}getCurrentResult(){return Re(this,ed)}reset(){var n;(n=Re(this,is))==null||n.removeObserver(this),Pt(this,is,void 0),wn(this,Pc,Wj).call(this),wn(this,Pc,lE).call(this)}mutate(n,a){var i;return Pt(this,bc,a),(i=Re(this,is))==null||i.removeObserver(this),Pt(this,is,Re(this,vc).getMutationCache().build(Re(this,vc),this.options)),Re(this,is).addObserver(this),Re(this,is).execute(n)}},vc=new WeakMap,ed=new WeakMap,is=new WeakMap,bc=new WeakMap,Pc=new WeakSet,Wj=function(){var a;const n=((a=Re(this,is))==null?void 0:a.state)??sz();Pt(this,ed,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},lE=function(n){Sa.batch(()=>{var a,i,s,o,l,c,d,f;if(Re(this,bc)&&this.hasListeners()){const p=Re(this,ed).variables,g=Re(this,ed).context,x={client:Re(this,vc),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(i=(a=Re(this,bc)).onSuccess)==null||i.call(a,n.data,p,g,x)}catch(b){Promise.reject(b)}try{(o=(s=Re(this,bc)).onSettled)==null||o.call(s,n.data,null,p,g,x)}catch(b){Promise.reject(b)}}else if((n==null?void 0:n.type)==="error"){try{(c=(l=Re(this,bc)).onError)==null||c.call(l,n.error,p,g,x)}catch(b){Promise.reject(b)}try{(f=(d=Re(this,bc)).onSettled)==null||f.call(d,void 0,n.error,p,g,x)}catch(b){Promise.reject(b)}}}this.listeners.forEach(p=>{p(Re(this,ed))})})},YB),_l,KB,CW=(KB=class extends Og{constructor(e={}){super();Ut(this,_l);this.config=e,Pt(this,_l,new Map)}build(e,n,a){const i=n.queryKey,s=n.queryHash??AO(i,n);let o=this.get(s);return o||(o=new xW({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:a,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Re(this,_l).has(e.queryHash)||(Re(this,_l).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Re(this,_l).get(e.queryHash);n&&(e.destroy(),n===e&&Re(this,_l).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Sa.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Re(this,_l).get(e)}getAll(){return[...Re(this,_l).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(a=>YM(n,a))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(a=>YM(e,a)):n}notify(e){Sa.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Sa.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Sa.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},_l=new WeakMap,KB),Jr,td,nd,Km,Qm,rd,Xm,Jm,QB,TW=(QB=class{constructor(t={}){Ut(this,Jr);Ut(this,td);Ut(this,nd);Ut(this,Km);Ut(this,Qm);Ut(this,rd);Ut(this,Xm);Ut(this,Jm);Pt(this,Jr,t.queryCache||new CW),Pt(this,td,t.mutationCache||new SW),Pt(this,nd,t.defaultOptions||{}),Pt(this,Km,new Map),Pt(this,Qm,new Map),Pt(this,rd,0)}mount(){cj(this,rd)._++,Re(this,rd)===1&&(Pt(this,Xm,OO.subscribe(async t=>{t&&(await this.resumePausedMutations(),Re(this,Jr).onFocus())})),Pt(this,Jm,ow.subscribe(async t=>{t&&(await this.resumePausedMutations(),Re(this,Jr).onOnline())})))}unmount(){var t,e;cj(this,rd)._--,Re(this,rd)===0&&((t=Re(this,Xm))==null||t.call(this),Pt(this,Xm,void 0),(e=Re(this,Jm))==null||e.call(this),Pt(this,Jm,void 0))}isFetching(t){return Re(this,Jr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Re(this,td).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Re(this,Jr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Re(this,Jr).build(this,e),a=n.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(od(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return Re(this,Jr).findAll(t).map(({queryKey:e,state:n})=>{const a=n.data;return[e,a]})}setQueryData(t,e,n){const a=this.defaultQueryOptions({queryKey:t}),i=Re(this,Jr).get(a.queryHash),s=i==null?void 0:i.state.data,o=oW(e,s);if(o!==void 0)return Re(this,Jr).build(this,a).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Sa.batch(()=>Re(this,Jr).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Re(this,Jr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Re(this,Jr);Sa.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Re(this,Jr);return Sa.batch(()=>(n.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},a=Sa.batch(()=>Re(this,Jr).findAll(t).map(i=>i.cancel(n)));return Promise.all(a).then(Di).catch(Di)}invalidateQueries(t,e={}){return Sa.batch(()=>(Re(this,Jr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},a=Sa.batch(()=>Re(this,Jr).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Di)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(a).then(Di)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Re(this,Jr).build(this,e);return n.isStaleByTime(od(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Di).catch(Di)}fetchInfiniteQuery(t){return t.behavior=nI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Di).catch(Di)}ensureInfiniteQueryData(t){return t.behavior=nI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ow.isOnline()?Re(this,td).resumePausedMutations():Promise.resolve()}getQueryCache(){return Re(this,Jr)}getMutationCache(){return Re(this,td)}getDefaultOptions(){return Re(this,nd)}setDefaultOptions(t){Pt(this,nd,t)}setQueryDefaults(t,e){Re(this,Km).set(yf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Re(this,Km).values()],n={};return e.forEach(a=>{Tv(t,a.queryKey)&&Object.assign(n,a.defaultOptions)}),n}setMutationDefaults(t,e){Re(this,Qm).set(yf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Re(this,Qm).values()],n={};return e.forEach(a=>{Tv(t,a.mutationKey)&&Object.assign(n,a.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Re(this,nd).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=AO(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===EO&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Re(this,nd).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Re(this,Jr).clear(),Re(this,td).clear()}},Jr=new WeakMap,td=new WeakMap,nd=new WeakMap,Km=new WeakMap,Qm=new WeakMap,rd=new WeakMap,Xm=new WeakMap,Jm=new WeakMap,QB),oz=v.createContext(void 0),ds=t=>{const e=v.useContext(oz);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},kW=({client:t,children:e})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(oz.Provider,{value:t,children:e})),lz=v.createContext(!1),AW=()=>v.useContext(lz);lz.Provider;function EW(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var PW=v.createContext(EW()),OW=()=>v.useContext(PW),DW=(t,e,n)=>{const a=n!=null&&n.state.error&&typeof t.throwOnError=="function"?PO(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||a)&&(e.isReset()||(t.retryOnMount=!1))},MW=t=>{v.useEffect(()=>{t.clearReset()},[t])},IW=({result:t,errorResetBoundary:e,throwOnError:n,query:a,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&a&&(i&&t.data===void 0||PO(n,[t.error,a])),RW=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...i)=>n(a(...i)):n(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},LW=(t,e)=>t.isLoading&&t.isFetching&&!e,FW=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,aI=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function $W(t,e,n){var g,x,b,j;const a=AW(),i=OW(),s=ds(),o=s.defaultQueryOptions(t);(x=(g=s.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||x.call(g,o);const l=s.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",RW(o),DW(o,i,l),MW(i);const c=!s.getQueryCache().get(o.queryHash),[d]=v.useState(()=>new e(s,o)),f=d.getOptimisticResult(o),p=!a&&t.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(S=>{const _=p?d.subscribe(Sa.batchCalls(S)):Di;return d.updateResult(),_},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),v.useEffect(()=>{d.setOptions(o)},[o,d]),FW(o,f))throw aI(o,d,i);if(IW({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;if((j=(b=s.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||j.call(b,o,f),o.experimental_prefetchInRender&&!gf&&LW(f,a)){const S=c?aI(o,d,i):l==null?void 0:l.promise;S==null||S.catch(Di).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?f:d.trackResult(f)}function DN(t,e){return $W(t,vW)}function BW(t,e){const n=ds(),[a]=v.useState(()=>new _W(n,t));v.useEffect(()=>{a.setOptions(t)},[a,t]);const i=v.useSyncExternalStore(v.useCallback(o=>a.subscribe(Sa.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),s=v.useCallback((o,l)=>{a.mutate(o,l).catch(Di)},[a]);if(i.error&&PO(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const zW=new TW({defaultOptions:{queries:{staleTime:0,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!1}}}),Gt={clinicSettings:["clinicSettings"],clinicSubscription:["clinicSubscription"],patients:{all:["patients"],list:t=>["patients","list",t],detail:t=>["patients","detail",t],context:t=>["patients","context",t]},queue:{all:["queue"],today:["queue","today"],entry:t=>["queue","entry",t],latest:t=>["queue","patient",t,"latest"]},staff:{all:["staff"],list:["staff","list"],detail:t=>["staff","detail",t]},pharmacyOrders:{all:["pharmacyOrders"],detail:t=>["pharmacyOrders","detail",t],byPatient:t=>["pharmacyOrders","patient",t]},labOrders:{all:["labOrders"],detail:t=>["labOrders","detail",t],byPatient:t=>["labOrders","patient",t]},drugs:{all:["drugs"],list:["drugs","list"],detail:t=>["drugs","detail",t]},labTests:{all:["labTests"],list:["labTests","list"]},patientDebts:{balance:t=>["patientDebts","balance",t]},dental:{records:t=>["dental","records",t]}},qW="modulepreload",UW=function(t){return"/"+t},iI={},MN=function(e,n,a){let i=Promise.resolve();if(n&&n.length>0){let o=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(n.map(d=>{if(d=UW(d),d in iI)return;iI[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":qW,f||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((x,b)=>{g.addEventListener("load",x),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},km=({message:t="Newtons Ai HMS",fullScreen:e=!1})=>r.jsx("div",{className:`loading-container ${e?"fullscreen":""}`,children:r.jsxs("div",{className:"loading-content",children:[r.jsxs("div",{className:"spinner-ring",children:[r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{})]}),r.jsx("div",{className:"loading-title",children:t}),e&&r.jsx("div",{className:"loading-subtitle",children:"Optimizing your experience..."})]})});function VW(t={}){const{nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i}=t,[s,o]=v.useState(!1),l=v.useRef(a);l.current=a;const c=v.useRef(i);return c.current=i,v.useEffect(()=>{const d=document.createElement("script");return d.src="https://accounts.google.com/gsi/client",n&&(d.src+=`?hl=${n}`),d.async=!0,d.defer=!0,d.nonce=e,d.onload=()=>{var f;o(!0),(f=l.current)===null||f===void 0||f.call(l)},d.onerror=()=>{var f;o(!1),(f=c.current)===null||f===void 0||f.call(c)},document.body.appendChild(d),()=>{document.body.removeChild(d)}},[e]),s}const cz=v.createContext(null);function HW({clientId:t,nonce:e,locale:n,onScriptLoadSuccess:a,onScriptLoadError:i,children:s}){const o=VW({nonce:e,onScriptLoadSuccess:a,onScriptLoadError:i,locale:n}),l=v.useMemo(()=>({locale:n,clientId:t,scriptLoadedSuccessfully:o}),[t,o]);return Se.createElement(cz.Provider,{value:l},s)}function GW(){const t=v.useContext(cz);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function WW(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const YW={large:40,medium:32,small:20};function KW({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:a,type:i="standard",theme:s="outline",size:o="large",text:l,shape:c,logo_alignment:d,width:f,click_listener:p,state:g,containerProps:x,...b}){const j=v.useRef(null),{clientId:S,locale:_,scriptLoadedSuccessfully:T}=GW(),C=v.useRef(t);C.current=t;const E=v.useRef(e);E.current=e;const k=v.useRef(a);return k.current=a,v.useEffect(()=>{var O,I,F,B,$,L,V,H,ne;if(T)return(F=(I=(O=window==null?void 0:window.google)===null||O===void 0?void 0:O.accounts)===null||I===void 0?void 0:I.id)===null||F===void 0||F.initialize({client_id:S,callback:Q=>{var q;if(!(Q!=null&&Q.credential))return(q=E.current)===null||q===void 0?void 0:q.call(E);const{credential:G,select_by:ie}=Q;C.current({credential:G,clientId:WW(Q),select_by:ie})},...b}),(L=($=(B=window==null?void 0:window.google)===null||B===void 0?void 0:B.accounts)===null||$===void 0?void 0:$.id)===null||L===void 0||L.renderButton(j.current,{type:i,theme:s,size:o,text:l,shape:c,logo_alignment:d,width:f,locale:_,click_listener:p,state:g}),n&&((ne=(H=(V=window==null?void 0:window.google)===null||V===void 0?void 0:V.accounts)===null||H===void 0?void 0:H.id)===null||ne===void 0||ne.prompt(k.current)),()=>{var Q,q,G;n&&((G=(q=(Q=window==null?void 0:window.google)===null||Q===void 0?void 0:Q.accounts)===null||q===void 0?void 0:q.id)===null||G===void 0||G.cancel())}},[S,T,n,i,s,o,l,c,d,f,_]),Se.createElement("div",{...x,ref:j,style:{height:YW[o],...x==null?void 0:x.style}})}var zx={},sI;function QW(){if(sI)return zx;sI=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.parse=o,zx.serialize=d;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,x){const b=new s,j=g.length;if(j<2)return b;const S=(x==null?void 0:x.decode)||f;let _=0;do{const T=g.indexOf("=",_);if(T===-1)break;const C=g.indexOf(";",_),E=C===-1?j:C;if(T>E){_=g.lastIndexOf(";",T-1)+1;continue}const k=l(g,_,T),O=c(g,T,k),I=g.slice(k,O);if(b[I]===void 0){let F=l(g,T+1,E),B=c(g,E,F);const $=S(g.slice(F,B));b[I]=$}_=E+1}while(_<j);return b}function l(g,x,b){do{const j=g.charCodeAt(x);if(j!==32&&j!==9)return x}while(++x<b);return b}function c(g,x,b){for(;x>b;){const j=g.charCodeAt(--x);if(j!==32&&j!==9)return x+1}return b}function d(g,x,b){const j=(b==null?void 0:b.encode)||encodeURIComponent;if(!t.test(g))throw new TypeError(`argument name is invalid: ${g}`);const S=j(x);if(!e.test(S))throw new TypeError(`argument val is invalid: ${x}`);let _=g+"="+S;if(!b)return _;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);_+="; Max-Age="+b.maxAge}if(b.domain){if(!n.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);_+="; Domain="+b.domain}if(b.path){if(!a.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);_+="; Path="+b.path}if(b.expires){if(!p(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);_+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(_+="; HttpOnly"),b.secure&&(_+="; Secure"),b.partitioned&&(_+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return _}function f(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return i.call(g)==="[object Date]"}return zx}QW();var oI="popstate";function XW(t={}){function e(a,i){let{pathname:s,search:o,hash:l}=a.location;return cE("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){return typeof i=="string"?i:kv(i)}return ZW(e,n,null,t)}function Gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function io(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JW(){return Math.random().toString(36).substring(2,10)}function lI(t,e){return{usr:t.state,key:t.key,idx:e}}function cE(t,e,n=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Dg(e):e,state:n,key:e&&e.key||a||JW()}}function kv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Dg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substring(a),t=t.substring(0,a)),t&&(e.pathname=t)}return e}function ZW(t,e,n,a={}){let{window:i=document.defaultView,v5Compat:s=!1}=a,o=i.history,l="POP",c=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let S=f(),_=S==null?null:S-d;d=S,c&&c({action:l,location:j.location,delta:_})}function g(S,_){l="PUSH";let T=cE(j.location,S,_);d=f()+1;let C=lI(T,d),E=j.createHref(T);try{o.pushState(C,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(E)}s&&c&&c({action:l,location:j.location,delta:1})}function x(S,_){l="REPLACE";let T=cE(j.location,S,_);d=f();let C=lI(T,d),E=j.createHref(T);o.replaceState(C,"",E),s&&c&&c({action:l,location:j.location,delta:0})}function b(S){return eY(S)}let j={get action(){return l},get location(){return t(i,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(oI,p),c=S,()=>{i.removeEventListener(oI,p),c=null}},createHref(S){return e(i,S)},createURL:b,encodeLocation(S){let _=b(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:x,go(S){return o.go(S)}};return j}function eY(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Gr(n,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:kv(t);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function uz(t,e,n="/"){return tY(t,e,n,!1)}function tY(t,e,n,a){let i=typeof e=="string"?Dg(e):e,s=Oc(i.pathname||"/",n);if(s==null)return null;let o=dz(t);nY(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=fY(s);l=dY(o[c],d,a)}return l}function dz(t,e=[],n=[],a=""){let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Gr(c.relativePath.startsWith(a),`Absolute route path "${c.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(a.length));let d=_c([a,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(Gr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),dz(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:cY(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of hz(s.path))i(s,o,c)}),e}function hz(t){let e=t.split("/");if(e.length===0)return[];let[n,...a]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(a.length===0)return i?[s,""]:[s];let o=hz(a.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function nY(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uY(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var rY=/^:[\w-]+$/,aY=3,iY=2,sY=1,oY=10,lY=-2,cI=t=>t==="*";function cY(t,e){let n=t.split("/"),a=n.length;return n.some(cI)&&(a+=lY),e&&(a+=iY),n.filter(i=>!cI(i)).reduce((i,s)=>i+(rY.test(s)?aY:s===""?sY:oY),a)}function uY(t,e){return t.length===e.length&&t.slice(0,-1).every((a,i)=>a===e[i])?t[t.length-1]-e[e.length-1]:0}function dY(t,e,n=!1){let{routesMeta:a}=t,i={},s="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=lw({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!p&&d&&n&&!a[a.length-1].route.index&&(p=lw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:_c([s,p.pathname]),pathnameBase:yY(_c([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=_c([s,p.pathnameBase]))}return o}function lw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=hY(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:a.reduce((d,{paramName:f,isOptional:p},g)=>{if(f==="*"){let b=l[g]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[g];return p&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function hY(t,e=!1,n=!0){io(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function fY(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return io(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Oc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}function pY(t,e="/"){let{pathname:n,search:a="",hash:i=""}=typeof t=="string"?Dg(t):t;return{pathname:n?n.startsWith("/")?n:mY(n,e):e,search:xY(a),hash:vY(i)}}function mY(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function J_(t,e,n,a){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gY(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function MO(t){let e=gY(t);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function IO(t,e,n,a=!1){let i;typeof t=="string"?i=Dg(t):(i={...t},Gr(!i.pathname||!i.pathname.includes("?"),J_("?","pathname","search",i)),Gr(!i.pathname||!i.pathname.includes("#"),J_("#","pathname","hash",i)),Gr(!i.search||!i.search.includes("#"),J_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!a&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=pY(i,l),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}var _c=t=>t.join("/").replace(/\/\/+/g,"/"),yY=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vY=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var fz=["POST","PUT","PATCH","DELETE"];new Set(fz);var jY=["GET",...fz];new Set(jY);var Mg=v.createContext(null);Mg.displayName="DataRouter";var IN=v.createContext(null);IN.displayName="DataRouterState";var pz=v.createContext({isTransitioning:!1});pz.displayName="ViewTransition";var wY=v.createContext(new Map);wY.displayName="Fetchers";var NY=v.createContext(null);NY.displayName="Await";var Uo=v.createContext(null);Uo.displayName="Navigation";var Sb=v.createContext(null);Sb.displayName="Location";var Vo=v.createContext({outlet:null,matches:[],isDataRoute:!1});Vo.displayName="Route";var RO=v.createContext(null);RO.displayName="RouteError";function SY(t,{relative:e}={}){Gr(Ig(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=v.useContext(Uo),{hash:i,pathname:s,search:o}=_b(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:_c([n,s])),a.createHref({pathname:l,search:o,hash:i})}function Ig(){return v.useContext(Sb)!=null}function $r(){return Gr(Ig(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Sb).location}var mz="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gz(t){v.useContext(Uo).static||v.useLayoutEffect(t)}function Lt(){let{isDataRoute:t}=v.useContext(Vo);return t?LY():_Y()}function _Y(){Gr(Ig(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Mg),{basename:e,navigator:n}=v.useContext(Uo),{matches:a}=v.useContext(Vo),{pathname:i}=$r(),s=JSON.stringify(MO(a)),o=v.useRef(!1);return gz(()=>{o.current=!0}),v.useCallback((c,d={})=>{if(io(o.current,mz),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=IO(c,JSON.parse(s),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:_c([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,s,i,t])}v.createContext(null);function Fa(){let{matches:t}=v.useContext(Vo),e=t[t.length-1];return e?e.params:{}}function _b(t,{relative:e}={}){let{matches:n}=v.useContext(Vo),{pathname:a}=$r(),i=JSON.stringify(MO(n));return v.useMemo(()=>IO(t,JSON.parse(i),a,e==="path"),[t,i,a,e])}function CY(t,e){return yz(t,e)}function yz(t,e,n,a){var T;Gr(Ig(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=v.useContext(Uo),{matches:o}=v.useContext(Vo),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";xz(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let g=$r(),x;if(e){let C=typeof e=="string"?Dg(e):e;Gr(f==="/"||((T=C.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=g;let b=x.pathname||"/",j=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=!s&&n&&n.matches&&n.matches.length>0?n.matches:uz(t,{pathname:j});io(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),io(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=PY(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:_c([f,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:_c([f,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,a);return e&&_?v.createElement(Sb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function TY(){let t=RY(),e=bY(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},s={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,o)}var kY=v.createElement(TY,null),AY=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(Vo.Provider,{value:this.props.routeContext},v.createElement(RO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function EY({routeContext:t,match:e,children:n}){let a=v.useContext(Mg);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Vo.Provider,{value:t},n)}function PY(t,e=[],n=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let c=i.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);Gr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=n,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,d,f)=>{let p,g=!1,x=null,b=null;n&&(p=s&&d.route.id?s[d.route.id]:void 0,x=d.route.errorElement||kY,o&&(l<0&&f===0?(xz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):l===f&&(g=!0,b=d.route.hydrateFallbackElement||null)));let j=e.concat(i.slice(0,f+1)),S=()=>{let _;return p?_=x:g?_=b:d.route.Component?_=v.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=c,v.createElement(EY,{match:d,routeContext:{outlet:c,matches:j,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?v.createElement(AY,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:S(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):S()},null)}function LO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OY(t){let e=v.useContext(Mg);return Gr(e,LO(t)),e}function DY(t){let e=v.useContext(IN);return Gr(e,LO(t)),e}function MY(t){let e=v.useContext(Vo);return Gr(e,LO(t)),e}function FO(t){let e=MY(t),n=e.matches[e.matches.length-1];return Gr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function IY(){return FO("useRouteId")}function RY(){var a;let t=v.useContext(RO),e=DY("useRouteError"),n=FO("useRouteError");return t!==void 0?t:(a=e.errors)==null?void 0:a[n]}function LY(){let{router:t}=OY("useNavigate"),e=FO("useNavigate"),n=v.useRef(!1);return gz(()=>{n.current=!0}),v.useCallback(async(i,s={})=>{io(n.current,mz),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var uI={};function xz(t,e,n){!e&&!uI[t]&&(uI[t]=!0,io(!1,n))}v.memo(FY);function FY({routes:t,future:e,state:n}){return yz(t,void 0,n,e)}function tn({to:t,replace:e,state:n,relative:a}){Gr(Ig(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=v.useContext(Uo);io(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(Vo),{pathname:o}=$r(),l=Lt(),c=IO(t,MO(s),o,a==="path"),d=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:a})},[l,d,a,e,n]),null}function xt(t){Gr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $Y({basename:t="/",children:e=null,location:n,navigationType:a="POP",navigator:i,static:s=!1}){Gr(!Ig(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Dg(n));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:g="default"}=n,x=v.useMemo(()=>{let b=Oc(c,o);return b==null?null:{location:{pathname:b,search:d,hash:f,state:p,key:g},navigationType:a}},[o,c,d,f,p,g,a]);return io(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(Uo.Provider,{value:l},v.createElement(Sb.Provider,{children:e,value:x}))}function _m({children:t,location:e}){return CY(uE(t),e)}function uE(t,e=[]){let n=[];return v.Children.forEach(t,(a,i)=>{if(!v.isValidElement(a))return;let s=[...e,i];if(a.type===v.Fragment){n.push.apply(n,uE(a.props.children,s));return}Gr(a.type===xt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gr(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||s.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=uE(a.props.children,s)),n.push(o)}),n}var Yj="get",Kj="application/x-www-form-urlencoded";function RN(t){return t!=null&&typeof t.tagName=="string"}function BY(t){return RN(t)&&t.tagName.toLowerCase()==="button"}function zY(t){return RN(t)&&t.tagName.toLowerCase()==="form"}function qY(t){return RN(t)&&t.tagName.toLowerCase()==="input"}function UY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function VY(t,e){return t.button===0&&(!e||e==="_self")&&!UY(t)}function dE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let a=t[n];return e.concat(Array.isArray(a)?a.map(i=>[n,i]):[[n,a]])},[]))}function HY(t,e){let n=dE(t);return e&&e.forEach((a,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var dj=null;function GY(){if(dj===null)try{new FormData(document.createElement("form"),0),dj=!1}catch{dj=!0}return dj}var WY=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Z_(t){return t!=null&&!WY.has(t)?(io(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kj}"`),null):t}function YY(t,e){let n,a,i,s,o;if(zY(t)){let l=t.getAttribute("action");a=l?Oc(l,e):null,n=t.getAttribute("method")||Yj,i=Z_(t.getAttribute("enctype"))||Kj,s=new FormData(t)}else if(BY(t)||qY(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(a=c?Oc(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Yj,i=Z_(t.getAttribute("formenctype"))||Z_(l.getAttribute("enctype"))||Kj,s=new FormData(l,t),!GY()){let{name:d,type:f,value:p}=t;if(f==="image"){let g=d?`${d}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else d&&s.append(d,p)}}else{if(RN(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yj,a=null,i=Kj,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:a,method:n.toLowerCase(),encType:i,formData:s,body:o}}function $O(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function KY(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QY(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function XY(t,e,n){let a=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await KY(s,n);return o.links?o.links():[]}return[]}));return tK(a.flat(1).filter(QY).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function dI(t,e,n,a,i,s){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>{var f;return n[d].pathname!==c.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):s==="data"?e.filter((c,d)=>{var p;let f=a.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function JY(t,e,{includeHydrateFallback:n}={}){return ZY(t.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function ZY(t){return[...new Set(t)]}function eK(t){let e={},n=Object.keys(t).sort();for(let a of n)e[a]=t[a];return e}function tK(t,e){let n=new Set;return new Set(e),t.reduce((a,i)=>{let s=JSON.stringify(eK(i));return n.has(s)||(n.add(s),a.push({key:s,link:i})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nK=new Set([100,101,204,205]);function rK(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Oc(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function vz(){let t=v.useContext(Mg);return $O(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function aK(){let t=v.useContext(IN);return $O(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var BO=v.createContext(void 0);BO.displayName="FrameworkContext";function bz(){let t=v.useContext(BO);return $O(t,"You must render this element inside a <HydratedRouter> element"),t}function iK(t,e){let n=v.useContext(BO),[a,i]=v.useState(!1),[s,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,g=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let j=_=>{_.forEach(T=>{o(T.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return g.current&&S.observe(g.current),()=>{S.disconnect()}}},[t]),v.useEffect(()=>{if(a){let j=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(j)}}},[a]);let x=()=>{i(!0)},b=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,g,{}]:[s,g,{onFocus:qx(l,x),onBlur:qx(c,b),onMouseEnter:qx(d,x),onMouseLeave:qx(f,b),onTouchStart:qx(p,x)}]:[!1,g,{}]}function qx(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function sK({page:t,...e}){let{router:n}=vz(),a=v.useMemo(()=>uz(n.routes,t,n.basename),[n.routes,t,n.basename]);return a?v.createElement(lK,{page:t,matches:a,...e}):null}function oK(t){let{manifest:e,routeModules:n}=bz(),[a,i]=v.useState([]);return v.useEffect(()=>{let s=!1;return XY(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),a}function lK({page:t,matches:e,...n}){let a=$r(),{manifest:i,routeModules:s}=bz(),{basename:o}=vz(),{loaderData:l,matches:c}=aK(),d=v.useMemo(()=>dI(t,e,c,i,a,"data"),[t,e,c,i,a]),f=v.useMemo(()=>dI(t,e,c,i,a,"assets"),[t,e,c,i,a]),p=v.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let b=new Set,j=!1;if(e.forEach(_=>{var C;let T=i.routes[_.route.id];!T||!T.hasLoader||(!d.some(E=>E.route.id===_.route.id)&&_.route.id in l&&((C=s[_.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?j=!0:b.add(_.route.id))}),b.size===0)return[];let S=rK(t,o);return j&&b.size>0&&S.searchParams.set("_routes",e.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[o,l,a,i,d,e,t,s]),g=v.useMemo(()=>JY(f,i),[f,i]),x=oK(f);return v.createElement(v.Fragment,null,p.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),g.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:j})=>v.createElement("link",{key:b,...j})))}function cK(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var jz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jz&&(window.__reactRouterVersion="7.6.0")}catch{}function uK({basename:t,children:e,window:n}){let a=v.useRef();a.current==null&&(a.current=XW({window:n,v5Compat:!0}));let i=a.current,[s,o]=v.useState({action:i.action,location:i.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>i.listen(l),[i,l]),v.createElement($Y,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var wz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_r=v.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:i,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:p,...g},x){let{basename:b}=v.useContext(Uo),j=typeof d=="string"&&wz.test(d),S,_=!1;if(typeof d=="string"&&j&&(S=d,jz))try{let B=new URL(window.location.href),$=d.startsWith("//")?new URL(B.protocol+d):new URL(d),L=Oc($.pathname,b);$.origin===B.origin&&L!=null?d=L+$.search+$.hash:_=!0}catch{io(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=SY(d,{relative:i}),[C,E,k]=iK(a,g),O=pK(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:i,viewTransition:p});function I(B){e&&e(B),B.defaultPrevented||O(B)}let F=v.createElement("a",{...g,...k,href:S||T,onClick:_||s?e:I,ref:cK(x,E),target:c,"data-discover":!j&&n==="render"?"true":void 0});return C&&!j?v.createElement(v.Fragment,null,F,v.createElement(sK,{page:T})):F});_r.displayName="Link";var dK=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:i=!1,style:s,to:o,viewTransition:l,children:c,...d},f){let p=_b(o,{relative:d.relative}),g=$r(),x=v.useContext(IN),{navigator:b,basename:j}=v.useContext(Uo),S=x!=null&&vK(p)&&l===!0,_=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,T=g.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&j&&(C=Oc(C,j)||C);const E=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let k=T===_||!i&&T.startsWith(_)&&T.charAt(E)==="/",O=C!=null&&(C===_||!i&&C.startsWith(_)&&C.charAt(_.length)==="/"),I={isActive:k,isPending:O,isTransitioning:S},F=k?e:void 0,B;typeof a=="function"?B=a(I):B=[a,k?"active":null,O?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let $=typeof s=="function"?s(I):s;return v.createElement(_r,{...d,"aria-current":F,className:B,ref:f,style:$,to:o,viewTransition:l},typeof c=="function"?c(I):c)});dK.displayName="NavLink";var hK=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:i,state:s,method:o=Yj,action:l,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:p,...g},x)=>{let b=yK(),j=xK(l,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&wz.test(l),T=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let E=C.nativeEvent.submitter,k=(E==null?void 0:E.getAttribute("formmethod"))||o;b(E||C.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:s,relative:d,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:j,onSubmit:a?c:T,...g,"data-discover":!_&&t==="render"?"true":void 0})});hK.displayName="Form";function fK(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nz(t){let e=v.useContext(Mg);return Gr(e,fK(t)),e}function pK(t,{target:e,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}={}){let l=Lt(),c=$r(),d=_b(t,{relative:s});return v.useCallback(f=>{if(VY(f,e)){f.preventDefault();let p=n!==void 0?n:kv(c)===kv(d);l(t,{replace:p,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[c,l,d,n,a,e,t,i,s,o])}function Sz(t){io(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=v.useRef(dE(t)),n=v.useRef(!1),a=$r(),i=v.useMemo(()=>HY(a.search,n.current?null:e.current),[a.search]),s=Lt(),o=v.useCallback((l,c)=>{const d=dE(typeof l=="function"?l(i):l);n.current=!0,s("?"+d,c)},[s,i]);return[i,o]}var mK=0,gK=()=>`__${String(++mK)}__`;function yK(){let{router:t}=Nz("useSubmit"),{basename:e}=v.useContext(Uo),n=IY();return v.useCallback(async(a,i={})=>{let{action:s,method:o,encType:l,formData:c,body:d}=YY(a,e);if(i.navigate===!1){let f=i.fetcherKey||gK();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function xK(t,{relative:e}={}){let{basename:n}=v.useContext(Uo),a=v.useContext(Vo);Gr(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),s={..._b(t||".",{relative:e})},o=$r();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(f=>f==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:_c([n,s.pathname])),kv(s)}function vK(t,e={}){let n=v.useContext(pz);Gr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Nz("useViewTransitionState"),i=_b(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Oc(n.currentLocation.pathname,a)||n.currentLocation.pathname,o=Oc(n.nextLocation.pathname,a)||n.nextLocation.pathname;return lw(i.pathname,o)!=null||lw(i.pathname,s)!=null}[...nK];var zO=XB();class bK extends v.Component{constructor(){super(...arguments);br(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){console.error("Uncaught error:",n,a)}render(){return this.state.hasError?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"5px"},children:[r.jsx("h1",{children:"Something went wrong."}),r.jsx("p",{children:"We are sorry for the inconvenience. Please try again later."})]}):this.props.children}}const _z=v.createContext(void 0),jK=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState({startDate:null,endDate:null}),[s,o]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState(null),p=v.useCallback(()=>n(!0),[]),g=v.useCallback(()=>n(!1),[]),x=v.useCallback(()=>n(E=>!E),[]),b=v.useCallback(E=>{f(()=>E)},[]),j=v.useCallback(E=>{d?d(E):console.warn("Analysis navigator not registered")},[d]),[S,_]=v.useState(null),T=v.useCallback(E=>{_(()=>E)},[]),C=v.useCallback(async()=>S?await S():(console.warn("Analysis refresher not registered"),null),[S]);return r.jsx(_z.Provider,{value:{isOpen:e,openAssistant:p,closeAssistant:g,toggleAssistant:x,analysisDateRange:a,setAnalysisDateRange:i,analysisData:s,setAnalysisData:o,analysisNavigate:j,registerAnalysisNavigator:b,refreshAnalysis:C,registerAnalysisRefresher:T,pageContext:l,setPageContext:c},children:t})},LN=()=>{const t=v.useContext(_z);if(t===void 0)throw new Error("useClinicAssistantContext must be used within a ClinicAssistantProvider");return t},Cz=v.createContext(void 0),wK=({children:t})=>{const[e,n]=v.useState([]),[a,i]=v.useState(null),[s,o]=v.useState(""),[l,c]=v.useState(0),[d,f]=v.useState([]),p=v.useCallback(j=>{n(S=>[...S,j])},[]),g=v.useCallback((j,S)=>{n(_=>_.map(T=>T.id===j?{...T,...S}:T))},[]),x=v.useCallback(j=>{n(S=>S.filter(_=>_.id!==j))},[]),b=v.useCallback(()=>{n([]),i(null),o(""),c(0),f([])},[]);return r.jsx(Cz.Provider,{value:{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:d,setDistributors:f,addPurchaseRow:p,updatePurchaseRow:g,removePurchaseRow:x,resetPurchase:b},children:t})},Tz=()=>{const t=v.useContext(Cz);if(!t)throw new Error("usePurchaseContext must be used within a PurchaseProvider");return t},kz=v.createContext(void 0),NK=({children:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(""),s=v.useCallback(()=>n(!0),[]),o=v.useCallback(()=>n(!1),[]),l=v.useCallback(()=>n(c=>!c),[]);return v.useEffect(()=>{const c=d=>{(d.ctrlKey||d.metaKey)&&d.key==="k"&&(d.preventDefault(),l()),d.key==="Escape"&&e&&o()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,l,o]),r.jsx(kz.Provider,{value:{isOpen:e,openCommandBar:s,closeCommandBar:o,toggleCommandBar:l,preFilledQuery:a,setPreFilledQuery:i},children:t})},Dc=()=>{const t=v.useContext(kz);if(t===void 0)throw new Error("useCommandBar must be used within a CommandBarProvider");return t};function Mc(t){return Array.isArray?Array.isArray(t):Pz(t)==="[object Array]"}function SK(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function _K(t){return t==null?"":SK(t)}function kl(t){return typeof t=="string"}function Az(t){return typeof t=="number"}function CK(t){return t===!0||t===!1||TK(t)&&Pz(t)=="[object Boolean]"}function Ez(t){return typeof t=="object"}function TK(t){return Ez(t)&&t!==null}function As(t){return t!=null}function eC(t){return!t.trim().length}function Pz(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const kK="Incorrect 'index' type",AK=t=>`Invalid value for key ${t}`,EK=t=>`Pattern length exceeds max of ${t}.`,PK=t=>`Missing ${t} property in key`,OK=t=>`Property 'weight' in key '${t}' must be a positive integer`,hI=Object.prototype.hasOwnProperty;class DK{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(a=>{let i=Oz(a);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(a=>{a.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Oz(t){let e=null,n=null,a=null,i=1,s=null;if(kl(t)||Mc(t))a=t,e=fI(t),n=hE(t);else{if(!hI.call(t,"name"))throw new Error(PK("name"));const o=t.name;if(a=o,hI.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(OK(o));e=fI(o),n=hE(o),s=t.getFn}return{path:e,id:n,weight:i,src:a,getFn:s}}function fI(t){return Mc(t)?t:t.split(".")}function hE(t){return Mc(t)?t.join("."):t}function MK(t,e){let n=[],a=!1;const i=(s,o,l)=>{if(As(s))if(!o[l])n.push(s);else{let c=o[l];const d=s[c];if(!As(d))return;if(l===o.length-1&&(kl(d)||Az(d)||CK(d)))n.push(_K(d));else if(Mc(d)){a=!0;for(let f=0,p=d.length;f<p;f+=1)i(d[f],o,l+1)}else o.length&&i(d,o,l+1)}};return i(t,kl(e)?e.split("."):e,0),a?n:n[0]}const IK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},RK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},LK={location:0,threshold:.6,distance:100},FK={useExtendedSearch:!1,getFn:MK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var cn={...RK,...IK,...LK,...FK};const $K=/[^ ]+/g;function BK(t=1,e=3){const n=new Map,a=Math.pow(10,e);return{get(i){const s=i.match($K).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),l=parseFloat(Math.round(o*a)/a);return n.set(s,l),l},clear(){n.clear()}}}class qO{constructor({getFn:e=cn.getFn,fieldNormWeight:n=cn.fieldNormWeight}={}){this.norm=BK(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,a)=>{this._keysMap[n.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,kl(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();kl(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,a=this.size();n<a;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!As(e)||eC(e))return;let a={v:e,i:n,n:this.norm.get(e)};this.records.push(a)}_addObject(e,n){let a={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(As(o)){if(Mc(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:d,value:f}=c.pop();if(As(f))if(kl(f)&&!eC(f)){let p={v:f,i:d,n:this.norm.get(f)};l.push(p)}else Mc(f)&&f.forEach((p,g)=>{c.push({nestedArrIndex:g,value:p})})}a.$[s]=l}else if(kl(o)&&!eC(o)){let l={v:o,n:this.norm.get(o)};a.$[s]=l}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function Dz(t,e,{getFn:n=cn.getFn,fieldNormWeight:a=cn.fieldNormWeight}={}){const i=new qO({getFn:n,fieldNormWeight:a});return i.setKeys(t.map(Oz)),i.setSources(e),i.create(),i}function zK(t,{getFn:e=cn.getFn,fieldNormWeight:n=cn.fieldNormWeight}={}){const{keys:a,records:i}=t,s=new qO({getFn:e,fieldNormWeight:n});return s.setKeys(a),s.setIndexRecords(i),s}function hj(t,{errors:e=0,currentLocation:n=0,expectedLocation:a=0,distance:i=cn.distance,ignoreLocation:s=cn.ignoreLocation}={}){const o=e/t.length;if(s)return o;const l=Math.abs(a-n);return i?o+l/i:l?1:o}function qK(t=[],e=cn.minMatchCharLength){let n=[],a=-1,i=-1,s=0;for(let o=t.length;s<o;s+=1){let l=t[s];l&&a===-1?a=s:!l&&a!==-1&&(i=s-1,i-a+1>=e&&n.push([a,i]),a=-1)}return t[s-1]&&s-a>=e&&n.push([a,s-1]),n}const Yh=32;function UK(t,e,n,{location:a=cn.location,distance:i=cn.distance,threshold:s=cn.threshold,findAllMatches:o=cn.findAllMatches,minMatchCharLength:l=cn.minMatchCharLength,includeMatches:c=cn.includeMatches,ignoreLocation:d=cn.ignoreLocation}={}){if(e.length>Yh)throw new Error(EK(Yh));const f=e.length,p=t.length,g=Math.max(0,Math.min(a,p));let x=s,b=g;const j=l>1||c,S=j?Array(p):[];let _;for(;(_=t.indexOf(e,b))>-1;){let I=hj(e,{currentLocation:_,expectedLocation:g,distance:i,ignoreLocation:d});if(x=Math.min(I,x),b=_+f,j){let F=0;for(;F<f;)S[_+F]=1,F+=1}}b=-1;let T=[],C=1,E=f+p;const k=1<<f-1;for(let I=0;I<f;I+=1){let F=0,B=E;for(;F<B;)hj(e,{errors:I,currentLocation:g+B,expectedLocation:g,distance:i,ignoreLocation:d})<=x?F=B:E=B,B=Math.floor((E-F)/2+F);E=B;let $=Math.max(1,g-B+1),L=o?p:Math.min(g+B,p)+f,V=Array(L+2);V[L+1]=(1<<I)-1;for(let ne=L;ne>=$;ne-=1){let Q=ne-1,q=n[t.charAt(Q)];if(j&&(S[Q]=+!!q),V[ne]=(V[ne+1]<<1|1)&q,I&&(V[ne]|=(T[ne+1]|T[ne])<<1|1|T[ne+1]),V[ne]&k&&(C=hj(e,{errors:I,currentLocation:Q,expectedLocation:g,distance:i,ignoreLocation:d}),C<=x)){if(x=C,b=Q,b<=g)break;$=Math.max(1,2*g-b)}}if(hj(e,{errors:I+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>x)break;T=V}const O={isMatch:b>=0,score:Math.max(.001,C)};if(j){const I=qK(S,l);I.length?c&&(O.indices=I):O.isMatch=!1}return O}function VK(t){let e={};for(let n=0,a=t.length;n<a;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<a-n-1}return e}const cw=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Mz{constructor(e,{location:n=cn.location,threshold:a=cn.threshold,distance:i=cn.distance,includeMatches:s=cn.includeMatches,findAllMatches:o=cn.findAllMatches,minMatchCharLength:l=cn.minMatchCharLength,isCaseSensitive:c=cn.isCaseSensitive,ignoreDiacritics:d=cn.ignoreDiacritics,ignoreLocation:f=cn.ignoreLocation}={}){if(this.options={location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:f},e=c?e:e.toLowerCase(),e=d?cw(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const p=(x,b)=>{this.chunks.push({pattern:x,alphabet:VK(x),startIndex:b})},g=this.pattern.length;if(g>Yh){let x=0;const b=g%Yh,j=g-b;for(;x<j;)p(this.pattern.substr(x,Yh),x),x+=Yh;if(b){const S=g-Yh;p(this.pattern.substr(S),S)}}else p(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=a?cw(e):e,this.pattern===e){let j={isMatch:!0,score:0};return i&&(j.indices=[[0,e.length-1]]),j}const{location:s,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,ignoreLocation:f}=this.options;let p=[],g=0,x=!1;this.chunks.forEach(({pattern:j,alphabet:S,startIndex:_})=>{const{isMatch:T,score:C,indices:E}=UK(e,j,S,{location:s+_,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,includeMatches:i,ignoreLocation:f});T&&(x=!0),g+=C,T&&E&&(p=[...p,...E])});let b={isMatch:x,score:x?g/this.chunks.length:1};return x&&i&&(b.indices=p),b}}class fd{constructor(e){this.pattern=e}static isMultiMatch(e){return pI(e,this.multiRegex)}static isSingleMatch(e){return pI(e,this.singleRegex)}search(){}}function pI(t,e){const n=t.match(e);return n?n[1]:null}class HK extends fd{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class GK extends fd{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const a=e.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class WK extends fd{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class YK extends fd{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class KK extends fd{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class QK extends fd{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Iz extends fd{constructor(e,{location:n=cn.location,threshold:a=cn.threshold,distance:i=cn.distance,includeMatches:s=cn.includeMatches,findAllMatches:o=cn.findAllMatches,minMatchCharLength:l=cn.minMatchCharLength,isCaseSensitive:c=cn.isCaseSensitive,ignoreDiacritics:d=cn.ignoreDiacritics,ignoreLocation:f=cn.ignoreLocation}={}){super(e),this._bitapSearch=new Mz(e,{location:n,threshold:a,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Rz extends fd{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,a;const i=[],s=this.pattern.length;for(;(a=e.indexOf(this.pattern,n))>-1;)n=a+s,i.push([a,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const fE=[HK,Rz,WK,YK,QK,KK,GK,Iz],mI=fE.length,XK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,JK="|";function ZK(t,e={}){return t.split(JK).map(n=>{let a=n.trim().split(XK).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=a.length;s<o;s+=1){const l=a[s];let c=!1,d=-1;for(;!c&&++d<mI;){const f=fE[d];let p=f.isMultiMatch(l);p&&(i.push(new f(p,e)),c=!0)}if(!c)for(d=-1;++d<mI;){const f=fE[d];let p=f.isSingleMatch(l);if(p){i.push(new f(p,e));break}}}return i})}const eQ=new Set([Iz.type,Rz.type]);class tQ{constructor(e,{isCaseSensitive:n=cn.isCaseSensitive,ignoreDiacritics:a=cn.ignoreDiacritics,includeMatches:i=cn.includeMatches,minMatchCharLength:s=cn.minMatchCharLength,ignoreLocation:o=cn.ignoreLocation,findAllMatches:l=cn.findAllMatches,location:c=cn.location,threshold:d=cn.threshold,distance:f=cn.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:a,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:c,threshold:d,distance:f},e=n?e:e.toLowerCase(),e=a?cw(e):e,this.pattern=e,this.query=ZK(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:i,ignoreDiacritics:s}=this.options;e=i?e:e.toLowerCase(),e=s?cw(e):e;let o=0,l=[],c=0;for(let d=0,f=n.length;d<f;d+=1){const p=n[d];l.length=0,o=0;for(let g=0,x=p.length;g<x;g+=1){const b=p[g],{isMatch:j,indices:S,score:_}=b.search(e);if(j){if(o+=1,c+=_,a){const T=b.constructor.type;eQ.has(T)?l=[...l,...S]:l.push(S)}}else{c=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:c/o};return a&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const pE=[];function nQ(...t){pE.push(...t)}function mE(t,e){for(let n=0,a=pE.length;n<a;n+=1){let i=pE[n];if(i.condition(t,e))return new i(t,e)}return new Mz(t,e)}const uw={AND:"$and",OR:"$or"},gE={PATH:"$path",PATTERN:"$val"},yE=t=>!!(t[uw.AND]||t[uw.OR]),rQ=t=>!!t[gE.PATH],aQ=t=>!Mc(t)&&Ez(t)&&!yE(t),gI=t=>({[uw.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Lz(t,e,{auto:n=!0}={}){const a=i=>{let s=Object.keys(i);const o=rQ(i);if(!o&&s.length>1&&!yE(i))return a(gI(i));if(aQ(i)){const c=o?i[gE.PATH]:s[0],d=o?i[gE.PATTERN]:i[c];if(!kl(d))throw new Error(AK(c));const f={keyId:hE(c),pattern:d};return n&&(f.searcher=mE(d,e)),f}let l={children:[],operator:s[0]};return s.forEach(c=>{const d=i[c];Mc(d)&&d.forEach(f=>{l.children.push(a(f))})}),l};return yE(t)||(t=gI(t)),a(t)}function iQ(t,{ignoreFieldNorm:e=cn.ignoreFieldNorm}){t.forEach(n=>{let a=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;a*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:s))}),n.score=a})}function sQ(t,e){const n=t.matches;e.matches=[],As(n)&&n.forEach(a=>{if(!As(a.indices)||!a.indices.length)return;const{indices:i,value:s}=a;let o={indices:i,value:s};a.key&&(o.key=a.key.src),a.idx>-1&&(o.refIndex=a.idx),e.matches.push(o)})}function oQ(t,e){e.score=t.score}function lQ(t,e,{includeMatches:n=cn.includeMatches,includeScore:a=cn.includeScore}={}){const i=[];return n&&i.push(sQ),a&&i.push(oQ),t.map(s=>{const{idx:o}=s,l={item:e[o],refIndex:o};return i.length&&i.forEach(c=>{c(s,l)}),l})}class oo{constructor(e,n={},a){this.options={...cn,...n},this.options.useExtendedSearch,this._keyStore=new DK(this.options.keys),this.setCollection(e,a)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof qO))throw new Error(kK);this._myIndex=n||Dz(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){As(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let a=0,i=this._docs.length;a<i;a+=1){const s=this._docs[a];e(s,a)&&(this.removeAt(a),a-=1,i-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:a,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let c=kl(e)?kl(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return iQ(c,{ignoreFieldNorm:l}),s&&c.sort(o),Az(n)&&n>-1&&(c=c.slice(0,n)),lQ(c,this._docs,{includeMatches:a,includeScore:i})}_searchStringList(e){const n=mE(e,this.options),{records:a}=this._myIndex,i=[];return a.forEach(({v:s,i:o,n:l})=>{if(!As(s))return;const{isMatch:c,score:d,indices:f}=n.searchIn(s);c&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:f}]})}),i}_searchLogical(e){const n=Lz(e,this.options),a=(l,c,d)=>{if(!l.children){const{keyId:p,searcher:g}=l,x=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:g});return x&&x.length?[{idx:d,item:c,matches:x}]:[]}const f=[];for(let p=0,g=l.children.length;p<g;p+=1){const x=l.children[p],b=a(x,c,d);if(b.length)f.push(...b);else if(l.operator===uw.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:c})=>{if(As(l)){let d=a(n,l,c);d.length&&(s[c]||(s[c]={idx:c,item:l,matches:[]},o.push(s[c])),d.forEach(({matches:f})=>{s[c].matches.push(...f)}))}}),o}_searchObjectList(e){const n=mE(e,this.options),{keys:a,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!As(o))return;let c=[];a.forEach((d,f)=>{c.push(...this._findMatches({key:d,value:o[f],searcher:n}))}),c.length&&s.push({idx:l,item:o,matches:c})}),s}_findMatches({key:e,value:n,searcher:a}){if(!As(n))return[];let i=[];if(Mc(n))n.forEach(({v:s,i:o,n:l})=>{if(!As(s))return;const{isMatch:c,score:d,indices:f}=a.searchIn(s);c&&i.push({score:d,key:e,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:c,indices:d}=a.searchIn(s);l&&i.push({score:c,key:e,value:s,norm:o,indices:d})}return i}}oo.version="7.1.0";oo.createIndex=Dz;oo.parseIndex=zK;oo.config=cn;oo.parseQuery=Lz;nQ(tQ);var tC,yI;function cQ(){if(yI)return tC;yI=1;var t="Expected a function",e=NaN,n="[object Symbol]",a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof no=="object"&&no&&no.Object===Object&&no,d=typeof self=="object"&&self&&self.Object===Object&&self,f=c||d||Function("return this")(),p=Object.prototype,g=p.toString,x=Math.max,b=Math.min,j=function(){return f.Date.now()};function S(k,O,I){var F,B,$,L,V,H,ne=0,Q=!1,q=!1,G=!0;if(typeof k!="function")throw new TypeError(t);O=E(O)||0,_(I)&&(Q=!!I.leading,q="maxWait"in I,$=q?x(E(I.maxWait)||0,O):$,G="trailing"in I?!!I.trailing:G);function ie(Le){var be=F,Ce=B;return F=B=void 0,ne=Le,L=k.apply(Ce,be),L}function W(Le){return ne=Le,V=setTimeout(je,O),Q?ie(Le):L}function z(Le){var be=Le-H,Ce=Le-ne,Ae=O-be;return q?b(Ae,$-Ce):Ae}function ce(Le){var be=Le-H,Ce=Le-ne;return H===void 0||be>=O||be<0||q&&Ce>=$}function je(){var Le=j();if(ce(Le))return Y(Le);V=setTimeout(je,z(Le))}function Y(Le){return V=void 0,G&&F?ie(Le):(F=B=void 0,L)}function Ie(){V!==void 0&&clearTimeout(V),ne=0,F=H=B=V=void 0}function Ue(){return V===void 0?L:Y(j())}function ze(){var Le=j(),be=ce(Le);if(F=arguments,B=this,H=Le,be){if(V===void 0)return W(H);if(q)return V=setTimeout(je,O),ie(H)}return V===void 0&&(V=setTimeout(je,O)),L}return ze.cancel=Ie,ze.flush=Ue,ze}function _(k){var O=typeof k;return!!k&&(O=="object"||O=="function")}function T(k){return!!k&&typeof k=="object"}function C(k){return typeof k=="symbol"||T(k)&&g.call(k)==n}function E(k){if(typeof k=="number")return k;if(C(k))return e;if(_(k)){var O=typeof k.valueOf=="function"?k.valueOf():k;k=_(O)?O+"":O}if(typeof k!="string")return k===0?k:+k;k=k.replace(a,"");var I=s.test(k);return I||o.test(k)?l(k.slice(2),I?2:8):i.test(k)?e:+k}return tC=S,tC}var uQ=cQ();const qc=Wn(uQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hQ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),xI=t=>{const e=hQ(t);return e.charAt(0).toUpperCase()+e.slice(1)},Fz=(...t)=>t.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=v.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:i="",children:s,iconNode:o,...l},c)=>v.createElement("svg",{ref:c,...fQ,width:e,height:e,stroke:t,strokeWidth:a?Number(n)*24/Number(e):n,className:Fz("lucide",i),...l},[...o.map(([d,f])=>v.createElement(d,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(t,e)=>{const n=v.forwardRef(({className:a,...i},s)=>v.createElement(pQ,{ref:s,iconNode:e,className:Fz(`lucide-${dQ(xI(t))}`,`lucide-${t}`,a),...i}));return n.displayName=xI(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],jc=dt("activity",mQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],$z=dt("align-justify",gQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],vI=dt("arrow-down",yQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],on=dt("arrow-left",xQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],bI=dt("arrow-up",vQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],jQ=dt("beaker",bQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],NQ=dt("bed-double",wQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],_Q=dt("bed",SQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],TQ=dt("bell",CQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],jI=dt("book-open",kQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Av=dt("bot",AQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],PQ=dt("brain-circuit",EQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],UO=dt("brain",OQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M12 11v4",key:"a6ujw6"}],["path",{d:"M14 13h-4",key:"1pl8zg"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M18 6v14",key:"1mu4gy"}],["path",{d:"M6 6v14",key:"1s15cj"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],MQ=dt("briefcase-medical",DQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],RQ=dt("building",IQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],wI=dt("calendar-check-2",LQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],VO=dt("calendar-days",FQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ua=dt("calendar",$Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],xE=dt("camera",BQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],vE=dt("chart-pie",zQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Lo=dt("check",qQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bz=dt("chevron-down",UQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Cb=dt("chevron-left",VQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pd=dt("chevron-right",HQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],WQ=dt("chevron-up",GQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ea=dt("circle-alert",YQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ll=dt("circle-check-big",KQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],uv=dt("circle-check",QQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fj=dt("circle-help",XQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],NI=dt("circle-minus",JQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ps=dt("circle-plus",ZQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],tX=dt("circle-user",eX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],dw=dt("clipboard-list",nX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Qj=dt("clipboard",rX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Tb=dt("clock",aX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],sX=dt("command",iX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],SI=dt("copy",oX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],hw=dt("credit-card",lX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],cd=dt("dollar-sign",cX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],zz=dt("download",uX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Im=dt("eye",dX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],fX=dt("file-check",hX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ra=dt("file-text",pX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],nC=dt("file",mX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],yX=dt("film",gX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],ls=dt("flask-conical",xX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],bX=dt("funnel",vX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],bE=dt("globe",jX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],xf=dt("grid-3x3",wX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Ya=dt("hash",NX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],_X=dt("heart-pulse",SX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],TX=dt("heart",CX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],jE=dt("house",kX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_I=dt("image",AX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Al=dt("info",EX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],qz=dt("key",PX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Zm=dt("layout-dashboard",OX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Uz=dt("layout-grid",DX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],CI=dt("lightbulb",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Vz=dt("link",IX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],kb=dt("list",RX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ic=dt("loader-circle",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],$X=dt("loader",FX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zX=dt("lock",BX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],UX=dt("log-out",qX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],TI=dt("mail",VX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Hz=dt("map-pin",HX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Gz=dt("maximize-2",GX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],rC=dt("message-circle",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],KX=dt("mic-off",YX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],FN=dt("mic",QX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],JX=dt("minimize-2",XX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],eJ=dt("monitor",ZX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],nJ=dt("music",tJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],kI=dt("package-open",rJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ud=dt("package",aJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],sJ=dt("palette",iJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],AI=dt("panels-top-left",oJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],HO=dt("paperclip",lJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],uJ=dt("pause",cJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ro=dt("pen",dJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],fJ=dt("pencil",hJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],mJ=dt("percent",pJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],eg=dt("phone",gJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Cc=dt("pill",yJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Wz=dt("play",xJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Gn=dt("plus",vJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],vf=dt("printer",bJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],wE=dt("refresh-cw",jJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],EI=dt("rocket",wJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],SJ=dt("rotate-ccw",NJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Yz=dt("rotate-cw",_J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cs=dt("save",CJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Fn=dt("search",TJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$N=dt("send",kJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],PI=dt("server-crash",AJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dd=dt("settings",EJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Kz=dt("share-2",PJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],DJ=dt("shield-check",OJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],tg=dt("shield",MJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],NE=dt("shopping-cart",IJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],LJ=dt("smile",RJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],fw=dt("sparkles",FJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Bo=dt("split",$J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],$i=dt("square-pen",BJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],qJ=dt("square",zJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],OI=dt("star",UJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],bf=dt("stethoscope",VJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Ab=dt("table",HJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],WJ=dt("tag",GJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],KJ=dt("target",YJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Vn=dt("trash-2",QJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],JJ=dt("trending-up",XJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],eZ=dt("triangle-alert",ZJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],GO=dt("truck",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],SE=dt("upload",nZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Qz=dt("user-check",rZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],BN=dt("user-plus",aZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jn=dt("user",iZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Os=dt("users",sZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],lZ=dt("video",oZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],pw=dt("wallet",cZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$t=dt("x",uZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],DI=dt("zap",dZ);function hZ(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const fZ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,pZ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,mZ={};function MI(t,e){return(mZ.jsx?pZ:fZ).test(t)}const gZ=/[ \t\n\f\r]/g;function yZ(t){return typeof t=="object"?t.type==="text"?II(t.value):!1:II(t)}function II(t){return t.replace(gZ,"")===""}class Eb{constructor(e,n,a){this.normal=n,this.property=e,a&&(this.space=a)}}Eb.prototype.normal={};Eb.prototype.property={};Eb.prototype.space=void 0;function Xz(t,e){const n={},a={};for(const i of t)Object.assign(n,i.property),Object.assign(a,i.normal);return new Eb(n,a,e)}function _E(t){return t.toLowerCase()}class hs{constructor(e,n){this.attribute=n,this.property=e}}hs.prototype.attribute="";hs.prototype.booleanish=!1;hs.prototype.boolean=!1;hs.prototype.commaOrSpaceSeparated=!1;hs.prototype.commaSeparated=!1;hs.prototype.defined=!1;hs.prototype.mustUseProperty=!1;hs.prototype.number=!1;hs.prototype.overloadedBoolean=!1;hs.prototype.property="";hs.prototype.spaceSeparated=!1;hs.prototype.space=void 0;let xZ=0;const gn=Df(),ma=Df(),Jz=Df(),_t=Df(),Dr=Df(),Rm=Df(),_s=Df();function Df(){return 2**++xZ}const CE=Object.freeze(Object.defineProperty({__proto__:null,boolean:gn,booleanish:ma,commaOrSpaceSeparated:_s,commaSeparated:Rm,number:_t,overloadedBoolean:Jz,spaceSeparated:Dr},Symbol.toStringTag,{value:"Module"})),aC=Object.keys(CE);class WO extends hs{constructor(e,n,a,i){let s=-1;if(super(e,n),RI(this,"space",i),typeof a=="number")for(;++s<aC.length;){const o=aC[s];RI(this,aC[s],(a&CE[o])===CE[o])}}}WO.prototype.defined=!0;function RI(t,e,n){n&&(t[e]=n)}function Rg(t){const e={},n={};for(const[a,i]of Object.entries(t.properties)){const s=new WO(a,t.transform(t.attributes||{},a),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(a)&&(s.mustUseProperty=!0),e[a]=s,n[_E(a)]=a,n[_E(s.attribute)]=a}return new Eb(e,n,t.space)}const Zz=Rg({properties:{ariaActiveDescendant:null,ariaAtomic:ma,ariaAutoComplete:null,ariaBusy:ma,ariaChecked:ma,ariaColCount:_t,ariaColIndex:_t,ariaColSpan:_t,ariaControls:Dr,ariaCurrent:null,ariaDescribedBy:Dr,ariaDetails:null,ariaDisabled:ma,ariaDropEffect:Dr,ariaErrorMessage:null,ariaExpanded:ma,ariaFlowTo:Dr,ariaGrabbed:ma,ariaHasPopup:null,ariaHidden:ma,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Dr,ariaLevel:_t,ariaLive:null,ariaModal:ma,ariaMultiLine:ma,ariaMultiSelectable:ma,ariaOrientation:null,ariaOwns:Dr,ariaPlaceholder:null,ariaPosInSet:_t,ariaPressed:ma,ariaReadOnly:ma,ariaRelevant:null,ariaRequired:ma,ariaRoleDescription:Dr,ariaRowCount:_t,ariaRowIndex:_t,ariaRowSpan:_t,ariaSelected:ma,ariaSetSize:_t,ariaSort:null,ariaValueMax:_t,ariaValueMin:_t,ariaValueNow:_t,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function eq(t,e){return e in t?t[e]:e}function tq(t,e){return eq(t,e.toLowerCase())}const vZ=Rg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Rm,acceptCharset:Dr,accessKey:Dr,action:null,allow:null,allowFullScreen:gn,allowPaymentRequest:gn,allowUserMedia:gn,alt:null,as:null,async:gn,autoCapitalize:null,autoComplete:Dr,autoFocus:gn,autoPlay:gn,blocking:Dr,capture:null,charSet:null,checked:gn,cite:null,className:Dr,cols:_t,colSpan:null,content:null,contentEditable:ma,controls:gn,controlsList:Dr,coords:_t|Rm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:gn,defer:gn,dir:null,dirName:null,disabled:gn,download:Jz,draggable:ma,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:gn,formTarget:null,headers:Dr,height:_t,hidden:gn,high:_t,href:null,hrefLang:null,htmlFor:Dr,httpEquiv:Dr,id:null,imageSizes:null,imageSrcSet:null,inert:gn,inputMode:null,integrity:null,is:null,isMap:gn,itemId:null,itemProp:Dr,itemRef:Dr,itemScope:gn,itemType:Dr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:gn,low:_t,manifest:null,max:null,maxLength:_t,media:null,method:null,min:null,minLength:_t,multiple:gn,muted:gn,name:null,nonce:null,noModule:gn,noValidate:gn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:gn,optimum:_t,pattern:null,ping:Dr,placeholder:null,playsInline:gn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:gn,referrerPolicy:null,rel:Dr,required:gn,reversed:gn,rows:_t,rowSpan:_t,sandbox:Dr,scope:null,scoped:gn,seamless:gn,selected:gn,shadowRootClonable:gn,shadowRootDelegatesFocus:gn,shadowRootMode:null,shape:null,size:_t,sizes:null,slot:null,span:_t,spellCheck:ma,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_t,step:null,style:null,tabIndex:_t,target:null,title:null,translate:null,type:null,typeMustMatch:gn,useMap:null,value:ma,width:_t,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Dr,axis:null,background:null,bgColor:null,border:_t,borderColor:null,bottomMargin:_t,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:gn,declare:gn,event:null,face:null,frame:null,frameBorder:null,hSpace:_t,leftMargin:_t,link:null,longDesc:null,lowSrc:null,marginHeight:_t,marginWidth:_t,noResize:gn,noHref:gn,noShade:gn,noWrap:gn,object:null,profile:null,prompt:null,rev:null,rightMargin:_t,rules:null,scheme:null,scrolling:ma,standby:null,summary:null,text:null,topMargin:_t,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_t,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:gn,disableRemotePlayback:gn,prefix:null,property:null,results:_t,security:null,unselectable:null},space:"html",transform:tq}),bZ=Rg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:_s,accentHeight:_t,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_t,amplitude:_t,arabicForm:null,ascent:_t,attributeName:null,attributeType:null,azimuth:_t,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_t,by:null,calcMode:null,capHeight:_t,className:Dr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_t,diffuseConstant:_t,direction:null,display:null,dur:null,divisor:_t,dominantBaseline:null,download:gn,dx:null,dy:null,edgeMode:null,editable:null,elevation:_t,enableBackground:null,end:null,event:null,exponent:_t,externalResourcesRequired:null,fill:null,fillOpacity:_t,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Rm,g2:Rm,glyphName:Rm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_t,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_t,horizOriginX:_t,horizOriginY:_t,id:null,ideographic:_t,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_t,k:_t,k1:_t,k2:_t,k3:_t,k4:_t,kernelMatrix:_s,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_t,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_t,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_t,overlineThickness:_t,paintOrder:null,panose1:null,path:null,pathLength:_t,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Dr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_t,pointsAtY:_t,pointsAtZ:_t,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:_s,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:_s,rev:_s,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:_s,requiredFeatures:_s,requiredFonts:_s,requiredFormats:_s,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_t,specularExponent:_t,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_t,strikethroughThickness:_t,string:null,stroke:null,strokeDashArray:_s,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_t,strokeOpacity:_t,strokeWidth:null,style:null,surfaceScale:_t,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:_s,tabIndex:_t,tableValues:null,target:null,targetX:_t,targetY:_t,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:_s,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:_t,underlineThickness:_t,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_t,values:null,vAlphabetic:_t,vMathematical:_t,vectorEffect:null,vHanging:_t,vIdeographic:_t,version:null,vertAdvY:_t,vertOriginX:_t,vertOriginY:_t,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_t,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:eq}),nq=Rg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),rq=Rg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:tq}),aq=Rg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),jZ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},wZ=/[A-Z]/g,LI=/-[a-z]/g,NZ=/^data[-\w.:]+$/i;function SZ(t,e){const n=_E(e);let a=e,i=hs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&NZ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(LI,CZ);a="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!LI.test(s)){let o=s.replace(wZ,_Z);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=WO}return new i(a,e)}function _Z(t){return"-"+t.toLowerCase()}function CZ(t){return t.charAt(1).toUpperCase()}const TZ=Xz([Zz,vZ,nq,rq,aq],"html"),YO=Xz([Zz,bZ,nq,rq,aq],"svg");function kZ(t){return t.join(" ").trim()}var mm={},iC,FI;function AZ(){if(FI)return iC;FI=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,d="/",f="*",p="",g="comment",x="declaration";iC=function(j,S){if(typeof j!="string")throw new TypeError("First argument must be a string");if(!j)return[];S=S||{};var _=1,T=1;function C(H){var ne=H.match(e);ne&&(_+=ne.length);var Q=H.lastIndexOf(c);T=~Q?H.length-Q:T+H.length}function E(){var H={line:_,column:T};return function(ne){return ne.position=new k(H),F(),ne}}function k(H){this.start=H,this.end={line:_,column:T},this.source=S.source}k.prototype.content=j;function O(H){var ne=new Error(S.source+":"+_+":"+T+": "+H);if(ne.reason=H,ne.filename=S.source,ne.line=_,ne.column=T,ne.source=j,!S.silent)throw ne}function I(H){var ne=H.exec(j);if(ne){var Q=ne[0];return C(Q),j=j.slice(Q.length),ne}}function F(){I(n)}function B(H){var ne;for(H=H||[];ne=$();)ne!==!1&&H.push(ne);return H}function $(){var H=E();if(!(d!=j.charAt(0)||f!=j.charAt(1))){for(var ne=2;p!=j.charAt(ne)&&(f!=j.charAt(ne)||d!=j.charAt(ne+1));)++ne;if(ne+=2,p===j.charAt(ne-1))return O("End of comment missing");var Q=j.slice(2,ne-2);return T+=2,C(Q),j=j.slice(ne),T+=2,H({type:g,comment:Q})}}function L(){var H=E(),ne=I(a);if(ne){if($(),!I(i))return O("property missing ':'");var Q=I(s),q=H({type:x,property:b(ne[0].replace(t,p)),value:Q?b(Q[0].replace(t,p)):p});return I(o),q}}function V(){var H=[];B(H);for(var ne;ne=L();)ne!==!1&&(H.push(ne),B(H));return H}return F(),V()};function b(j){return j?j.replace(l,p):p}return iC}var $I;function EZ(){if($I)return mm;$I=1;var t=mm&&mm.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(mm,"__esModule",{value:!0}),mm.default=n;var e=t(AZ());function n(a,i){var s=null;if(!a||typeof a!="string")return s;var o=(0,e.default)(a),l=typeof i=="function";return o.forEach(function(c){if(c.type==="declaration"){var d=c.property,f=c.value;l?i(d,f,c):f&&(s=s||{},s[d]=f)}}),s}return mm}var Ux={},BI;function PZ(){if(BI)return Ux;BI=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,a=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(d){return!d||n.test(d)||t.test(d)},o=function(d,f){return f.toUpperCase()},l=function(d,f){return"".concat(f,"-")},c=function(d,f){return f===void 0&&(f={}),s(d)?d:(d=d.toLowerCase(),f.reactCompat?d=d.replace(i,l):d=d.replace(a,l),d.replace(e,o))};return Ux.camelCase=c,Ux}var Vx,zI;function OZ(){if(zI)return Vx;zI=1;var t=Vx&&Vx.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(EZ()),n=PZ();function a(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return a.default=a,Vx=a,Vx}var DZ=OZ();const MZ=Wn(DZ),iq=sq("end"),KO=sq("start");function sq(t){return e;function e(n){const a=n&&n.position&&n.position[t]||{};if(typeof a.line=="number"&&a.line>0&&typeof a.column=="number"&&a.column>0)return{line:a.line,column:a.column,offset:typeof a.offset=="number"&&a.offset>-1?a.offset:void 0}}}function IZ(t){const e=KO(t),n=iq(t);if(e&&n)return{start:e,end:n}}function yv(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?qI(t.position):"start"in t||"end"in t?qI(t):"line"in t||"column"in t?TE(t):""}function TE(t){return UI(t&&t.line)+":"+UI(t&&t.column)}function qI(t){return TE(t&&t.start)+"-"+TE(t&&t.end)}function UI(t){return t&&typeof t=="number"?t:1}class gi extends Error{constructor(e,n,a){super(),typeof n=="string"&&(a=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof a=="string"){const c=a.indexOf(":");c===-1?s.ruleId=a:(s.source=a.slice(0,c),s.ruleId=a.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=yv(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}gi.prototype.file="";gi.prototype.name="";gi.prototype.reason="";gi.prototype.message="";gi.prototype.stack="";gi.prototype.column=void 0;gi.prototype.line=void 0;gi.prototype.ancestors=void 0;gi.prototype.cause=void 0;gi.prototype.fatal=void 0;gi.prototype.place=void 0;gi.prototype.ruleId=void 0;gi.prototype.source=void 0;const QO={}.hasOwnProperty,RZ=new Map,LZ=/[A-Z]/g,FZ=new Set(["table","tbody","thead","tfoot","tr"]),$Z=new Set(["td","th"]),oq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function BZ(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let a;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");a=YZ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");a=WZ(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:a,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?YO:TZ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=lq(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function lq(t,e,n){if(e.type==="element")return zZ(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return qZ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return VZ(t,e,n);if(e.type==="mdxjsEsm")return UZ(t,e);if(e.type==="root")return HZ(t,e,n);if(e.type==="text")return GZ(t,e)}function zZ(t,e,n){const a=t.schema;let i=a;e.tagName.toLowerCase()==="svg"&&a.space==="html"&&(i=YO,t.schema=i),t.ancestors.push(e);const s=uq(t,e.tagName,!1),o=KZ(t,e);let l=JO(t,e);return FZ.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!yZ(c):!0})),cq(t,o,s,e),XO(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function qZ(t,e){if(e.data&&e.data.estree&&t.evaluater){const a=e.data.estree.body[0];return a.type,t.evaluater.evaluateExpression(a.expression)}Ev(t,e.position)}function UZ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Ev(t,e.position)}function VZ(t,e,n){const a=t.schema;let i=a;e.name==="svg"&&a.space==="html"&&(i=YO,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:uq(t,e.name,!0),o=QZ(t,e),l=JO(t,e);return cq(t,o,s,e),XO(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function HZ(t,e,n){const a={};return XO(a,JO(t,e)),t.create(e,t.Fragment,a,n)}function GZ(t,e){return e.value}function cq(t,e,n,a){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=a)}function XO(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function WZ(t,e,n){return a;function a(i,s,o,l){const d=Array.isArray(o.children)?n:e;return l?d(s,o,l):d(s,o)}}function YZ(t,e){return n;function n(a,i,s,o){const l=Array.isArray(s.children),c=KO(a);return e(i,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function KZ(t,e){const n={};let a,i;for(i in e.properties)if(i!=="children"&&QO.call(e.properties,i)){const s=XZ(t,i,e.properties[i]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&$Z.has(e.tagName)?a=l:n[o]=l}}if(a){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=a}return n}function QZ(t,e){const n={};for(const a of e.attributes)if(a.type==="mdxJsxExpressionAttribute")if(a.data&&a.data.estree&&t.evaluater){const s=a.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Ev(t,e.position);else{const i=a.name;let s;if(a.value&&typeof a.value=="object")if(a.value.data&&a.value.data.estree&&t.evaluater){const l=a.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else Ev(t,e.position);else s=a.value===null?!0:a.value;n[i]=s}return n}function JO(t,e){const n=[];let a=-1;const i=t.passKeys?new Map:RZ;for(;++a<e.children.length;){const s=e.children[a];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const d=i.get(c)||0;o=c+"-"+d,i.set(c,d+1)}}const l=lq(t,s,o);l!==void 0&&n.push(l)}return n}function XZ(t,e,n){const a=SZ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=a.commaSeparated?hZ(n):kZ(n)),a.property==="style"){let i=typeof n=="object"?n:JZ(t,String(n));return t.stylePropertyNameCase==="css"&&(i=ZZ(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&a.space?jZ[a.property]||a.property:a.attribute,n]}}function JZ(t,e){try{return MZ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const a=n,i=new gi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:a,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=oq+"#cannot-parse-style-attribute",i}}function uq(t,e,n){let a;if(!n)a={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const l=MI(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}a=o}else a=MI(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(a.type==="Literal"){const i=a.value;return QO.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(a);Ev(t)}function Ev(t,e){const n=new gi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=oq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ZZ(t){const e={};let n;for(n in t)QO.call(t,n)&&(e[eee(n)]=t[n]);return e}function eee(t){let e=t.replace(LZ,tee);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function tee(t){return"-"+t.toLowerCase()}const sC={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},nee={};function ZO(t,e){const n=nee,a=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return dq(t,a,i)}function dq(t,e,n){if(ree(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return VI(t.children,e,n)}return Array.isArray(t)?VI(t,e,n):""}function VI(t,e,n){const a=[];let i=-1;for(;++i<t.length;)a[i]=dq(t[i],e,n);return a.join("")}function ree(t){return!!(t&&typeof t=="object")}const HI=document.createElement("i");function eD(t){const e="&"+t+";";HI.innerHTML=e;const n=HI.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ds(t,e,n,a){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,a.length<1e4)o=Array.from(a),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<a.length;)o=a.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function eo(t,e){return t.length>0?(Ds(t,t.length,0,e),t):e}const GI={}.hasOwnProperty;function hq(t){const e={};let n=-1;for(;++n<t.length;)aee(e,t[n]);return e}function aee(t,e){let n;for(n in e){const i=(GI.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){GI.call(i,o)||(i[o]=[]);const l=s[o];iee(i[o],Array.isArray(l)?l:l?[l]:[])}}}function iee(t,e){let n=-1;const a=[];for(;++n<e.length;)(e[n].add==="after"?t:a).push(e[n]);Ds(t,0,0,a)}function fq(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Fo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ii=md(/[A-Za-z]/),pi=md(/[\dA-Za-z]/),see=md(/[#-'*+\--9=?A-Z^-~]/);function mw(t){return t!==null&&(t<32||t===127)}const kE=md(/\d/),oee=md(/[\dA-Fa-f]/),lee=md(/[!-/:-@[-`{-~]/);function Qt(t){return t!==null&&t<-2}function Tr(t){return t!==null&&(t<0||t===32)}function Dn(t){return t===-2||t===-1||t===32}const zN=md(new RegExp("\\p{P}|\\p{S}","u")),jf=md(/\s/);function md(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Lg(t){const e=[];let n=-1,a=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&pi(t.charCodeAt(n+1))&&pi(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(a,n),encodeURIComponent(o)),a=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(a)}function Hn(t,e,n,a){const i=a?a-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Dn(c)?(t.enter(n),l(c)):e(c)}function l(c){return Dn(c)&&s++<i?(t.consume(c),l):(t.exit(n),e(c))}}const cee={tokenize:uee};function uee(t){const e=t.attempt(this.parser.constructs.contentInitial,a,i);let n;return e;function a(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Hn(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Qt(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const dee={tokenize:hee},WI={tokenize:fee};function hee(t){const e=this,n=[];let a=0,i,s,o;return l;function l(C){if(a<n.length){const E=n[a];return e.containerState=E[1],t.attempt(E[0].continuation,c,d)(C)}return d(C)}function c(C){if(a++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&T();const E=e.events.length;let k=E,O;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){O=e.events[k][1].end;break}_(a);let I=E;for(;I<e.events.length;)e.events[I][1].end={...O},I++;return Ds(e.events,k+1,0,e.events.slice(E)),e.events.length=I,d(C)}return l(C)}function d(C){if(a===n.length){if(!i)return g(C);if(i.currentConstruct&&i.currentConstruct.concrete)return b(C);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(WI,f,p)(C)}function f(C){return i&&T(),_(a),g(C)}function p(C){return e.parser.lazy[e.now().line]=a!==n.length,o=e.now().offset,b(C)}function g(C){return e.containerState={},t.attempt(WI,x,b)(C)}function x(C){return a++,n.push([e.currentConstruct,e.containerState]),g(C)}function b(C){if(C===null){i&&T(),_(0),t.consume(C);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),j(C)}function j(C){if(C===null){S(t.exit("chunkFlow"),!0),_(0),t.consume(C);return}return Qt(C)?(t.consume(C),S(t.exit("chunkFlow")),a=0,e.interrupt=void 0,l):(t.consume(C),j)}function S(C,E){const k=e.sliceStream(C);if(E&&k.push(null),C.previous=s,s&&(s.next=C),s=C,i.defineSkip(C.start),i.write(k),e.parser.lazy[C.start.line]){let O=i.events.length;for(;O--;)if(i.events[O][1].start.offset<o&&(!i.events[O][1].end||i.events[O][1].end.offset>o))return;const I=e.events.length;let F=I,B,$;for(;F--;)if(e.events[F][0]==="exit"&&e.events[F][1].type==="chunkFlow"){if(B){$=e.events[F][1].end;break}B=!0}for(_(a),O=I;O<e.events.length;)e.events[O][1].end={...$},O++;Ds(e.events,F+1,0,e.events.slice(I)),e.events.length=O}}function _(C){let E=n.length;for(;E-- >C;){const k=n[E];e.containerState=k[1],k[0].exit.call(e,t)}n.length=C}function T(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function fee(t,e,n){return Hn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ng(t){if(t===null||Tr(t)||jf(t))return 1;if(zN(t))return 2}function qN(t,e,n){const a=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!a.includes(s)&&(e=s(e,n),a.push(s))}return e}const AE={name:"attention",resolveAll:pee,tokenize:mee};function pee(t,e){let n=-1,a,i,s,o,l,c,d,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(a=n;a--;)if(t[a][0]==="exit"&&t[a][1].type==="attentionSequence"&&t[a][1]._open&&e.sliceSerialize(t[a][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[a][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[a][1].end.offset-t[a][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[a][1].end.offset-t[a][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[a][1].end},g={...t[n][1].start};YI(p,-c),YI(g,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...t[a][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},s={type:c>1?"strongText":"emphasisText",start:{...t[a][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[a][1].end={...o.start},t[n][1].start={...l.end},d=[],t[a][1].end.offset-t[a][1].start.offset&&(d=eo(d,[["enter",t[a][1],e],["exit",t[a][1],e]])),d=eo(d,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),d=eo(d,qN(e.parser.constructs.insideSpan.null,t.slice(a+1,n),e)),d=eo(d,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,d=eo(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,Ds(t,a-1,n-a+3,d),n=a+d.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function mee(t,e){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,i=ng(a);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;const d=t.exit("attentionSequence"),f=ng(c),p=!f||f===2&&i||n.includes(c),g=!i||i===2&&f||n.includes(a);return d._open=!!(s===42?p:p&&(i||!g)),d._close=!!(s===42?g:g&&(f||!p)),e(c)}}function YI(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const gee={name:"autolink",tokenize:yee};function yee(t,e,n){let a=0;return i;function i(x){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(x){return Ii(x)?(t.consume(x),o):x===64?n(x):d(x)}function o(x){return x===43||x===45||x===46||pi(x)?(a=1,l(x)):d(x)}function l(x){return x===58?(t.consume(x),a=0,c):(x===43||x===45||x===46||pi(x))&&a++<32?(t.consume(x),l):(a=0,d(x))}function c(x){return x===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):x===null||x===32||x===60||mw(x)?n(x):(t.consume(x),c)}function d(x){return x===64?(t.consume(x),f):see(x)?(t.consume(x),d):n(x)}function f(x){return pi(x)?p(x):n(x)}function p(x){return x===46?(t.consume(x),a=0,f):x===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):g(x)}function g(x){if((x===45||pi(x))&&a++<63){const b=x===45?g:p;return t.consume(x),b}return n(x)}}const Pb={partial:!0,tokenize:xee};function xee(t,e,n){return a;function a(s){return Dn(s)?Hn(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Qt(s)?e(s):n(s)}}const pq={continuation:{tokenize:bee},exit:jee,name:"blockQuote",tokenize:vee};function vee(t,e,n){const a=this;return i;function i(o){if(o===62){const l=a.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Dn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function bee(t,e,n){const a=this;return i;function i(o){return Dn(o)?Hn(t,s,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(pq,e,n)(o)}}function jee(t){t.exit("blockQuote")}const mq={name:"characterEscape",tokenize:wee};function wee(t,e,n){return a;function a(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return lee(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const gq={name:"characterReference",tokenize:Nee};function Nee(t,e,n){const a=this;let i=0,s,o;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),c}function c(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),s=31,o=pi,f(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=oee,f):(t.enter("characterReferenceValue"),s=7,o=kE,f(p))}function f(p){if(p===59&&i){const g=t.exit("characterReferenceValue");return o===pi&&!eD(a.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(p)&&i++<s?(t.consume(p),f):n(p)}}const KI={partial:!0,tokenize:_ee},QI={concrete:!0,name:"codeFenced",tokenize:See};function See(t,e,n){const a=this,i={partial:!0,tokenize:k};let s=0,o=0,l;return c;function c(O){return d(O)}function d(O){const I=a.events[a.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=O,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(O)}function f(O){return O===l?(o++,t.consume(O),f):o<3?n(O):(t.exit("codeFencedFenceSequence"),Dn(O)?Hn(t,p,"whitespace")(O):p(O))}function p(O){return O===null||Qt(O)?(t.exit("codeFencedFence"),a.interrupt?e(O):t.check(KI,j,E)(O)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(O))}function g(O){return O===null||Qt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(O)):Dn(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Hn(t,x,"whitespace")(O)):O===96&&O===l?n(O):(t.consume(O),g)}function x(O){return O===null||Qt(O)?p(O):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(O))}function b(O){return O===null||Qt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(O)):O===96&&O===l?n(O):(t.consume(O),b)}function j(O){return t.attempt(i,E,S)(O)}function S(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),_}function _(O){return s>0&&Dn(O)?Hn(t,T,"linePrefix",s+1)(O):T(O)}function T(O){return O===null||Qt(O)?t.check(KI,j,E)(O):(t.enter("codeFlowValue"),C(O))}function C(O){return O===null||Qt(O)?(t.exit("codeFlowValue"),T(O)):(t.consume(O),C)}function E(O){return t.exit("codeFenced"),e(O)}function k(O,I,F){let B=0;return $;function $(Q){return O.enter("lineEnding"),O.consume(Q),O.exit("lineEnding"),L}function L(Q){return O.enter("codeFencedFence"),Dn(Q)?Hn(O,V,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):V(Q)}function V(Q){return Q===l?(O.enter("codeFencedFenceSequence"),H(Q)):F(Q)}function H(Q){return Q===l?(B++,O.consume(Q),H):B>=o?(O.exit("codeFencedFenceSequence"),Dn(Q)?Hn(O,ne,"whitespace")(Q):ne(Q)):F(Q)}function ne(Q){return Q===null||Qt(Q)?(O.exit("codeFencedFence"),I(Q)):F(Q)}}}function _ee(t,e,n){const a=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}const oC={name:"codeIndented",tokenize:Tee},Cee={partial:!0,tokenize:kee};function Tee(t,e,n){const a=this;return i;function i(d){return t.enter("codeIndented"),Hn(t,s,"linePrefix",5)(d)}function s(d){const f=a.events[a.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):Qt(d)?t.attempt(Cee,o,c)(d):(t.enter("codeFlowValue"),l(d))}function l(d){return d===null||Qt(d)?(t.exit("codeFlowValue"),o(d)):(t.consume(d),l)}function c(d){return t.exit("codeIndented"),e(d)}}function kee(t,e,n){const a=this;return i;function i(o){return a.parser.lazy[a.now().line]?n(o):Qt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Hn(t,s,"linePrefix",5)(o)}function s(o){const l=a.events[a.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Qt(o)?i(o):n(o)}}const Aee={name:"codeText",previous:Pee,resolve:Eee,tokenize:Oee};function Eee(t){let e=t.length-4,n=3,a,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(a=n;++a<e;)if(t[a][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(a=n-1,e++;++a<=e;)i===void 0?a!==e&&t[a][1].type!=="lineEnding"&&(i=a):(a===e||t[a][1].type==="lineEnding")&&(t[i][1].type="codeTextData",a!==i+2&&(t[i][1].end=t[a-1][1].end,t.splice(i+2,a-i-2),e-=a-i-2,a=i+2),i=void 0);return t}function Pee(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Oee(t,e,n){let a=0,i,s;return o;function o(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),a++,l):(t.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),c):p===96?(s=t.enter("codeTextSequence"),i=0,f(p)):Qt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||Qt(p)?(t.exit("codeTextData"),c(p)):(t.consume(p),d)}function f(p){return p===96?(t.consume(p),i++,f):i===a?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(s.type="codeTextData",d(p))}}class Dee{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const a=n??Number.POSITIVE_INFINITY;return a<this.left.length?this.left.slice(e,a):e>this.left.length?this.right.slice(this.right.length-a+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-a+this.left.length).reverse())}splice(e,n,a){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return a&&Hx(this.left,a),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Hx(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Hx(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Hx(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Hx(this.left,n.reverse())}}}function Hx(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function yq(t){const e={};let n=-1,a,i,s,o,l,c,d;const f=new Dee(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(a=f.get(n),n&&a[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=a[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(a[0]==="enter")a[1].contentType&&(Object.assign(e,Mee(f,n)),n=e[n],d=!0);else if(a[1]._container){for(s=n,i=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(a[1].end={...f.get(i)[1].start},l=f.slice(i,n),l.unshift(a),f.splice(i,n-i+1,l))}}return Ds(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!d}function Mee(t,e){const n=t.get(e)[1],a=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=a.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let f,p,g=-1,x=n,b=0,j=0;const S=[j];for(;x;){for(;t.get(++i)[1]!==x;);s.push(i),x._tokenizer||(f=a.sliceStream(x),x.next||f.push(null),p&&o.defineSkip(x.start),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=x,x=x.next}for(x=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(j=g+1,S.push(j),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(o.events=[],x?(x._tokenizer=void 0,x.previous=void 0):S.pop(),g=S.length;g--;){const _=l.slice(S[g],S[g+1]),T=s.pop();c.push([T,T+_.length-1]),t.splice(T,2,_)}for(c.reverse(),g=-1;++g<c.length;)d[b+c[g][0]]=b+c[g][1],b+=c[g][1]-c[g][0]-1;return d}const Iee={resolve:Lee,tokenize:Fee},Ree={partial:!0,tokenize:$ee};function Lee(t){return yq(t),t}function Fee(t,e){let n;return a;function a(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):Qt(l)?t.check(Ree,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function $ee(t,e,n){const a=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Hn(t,s,"linePrefix")}function s(o){if(o===null||Qt(o))return n(o);const l=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(a.parser.constructs.flow,n,e)(o)}}function xq(t,e,n,a,i,s,o,l,c){const d=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(_){return _===60?(t.enter(a),t.enter(i),t.enter(s),t.consume(_),t.exit(s),g):_===null||_===32||_===41||mw(_)?n(_):(t.enter(a),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),j(_))}function g(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(i),t.exit(a),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),x(_))}function x(_){return _===62?(t.exit("chunkString"),t.exit(l),g(_)):_===null||_===60||Qt(_)?n(_):(t.consume(_),_===92?b:x)}function b(_){return _===60||_===62||_===92?(t.consume(_),x):x(_)}function j(_){return!f&&(_===null||_===41||Tr(_))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(a),e(_)):f<d&&_===40?(t.consume(_),f++,j):_===41?(t.consume(_),f--,j):_===null||_===32||_===40||mw(_)?n(_):(t.consume(_),_===92?S:j)}function S(_){return _===40||_===41||_===92?(t.consume(_),j):j(_)}}function vq(t,e,n,a,i,s){const o=this;let l=0,c;return d;function d(x){return t.enter(a),t.enter(i),t.consume(x),t.exit(i),t.enter(s),f}function f(x){return l>999||x===null||x===91||x===93&&!c||x===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(x):x===93?(t.exit(s),t.enter(i),t.consume(x),t.exit(i),t.exit(a),e):Qt(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||x===91||x===93||Qt(x)||l++>999?(t.exit("chunkString"),f(x)):(t.consume(x),c||(c=!Dn(x)),x===92?g:p)}function g(x){return x===91||x===92||x===93?(t.consume(x),l++,p):p(x)}}function bq(t,e,n,a,i,s){let o;return l;function l(g){return g===34||g===39||g===40?(t.enter(a),t.enter(i),t.consume(g),t.exit(i),o=g===40?41:g,c):n(g)}function c(g){return g===o?(t.enter(i),t.consume(g),t.exit(i),t.exit(a),e):(t.enter(s),d(g))}function d(g){return g===o?(t.exit(s),c(o)):g===null?n(g):Qt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),Hn(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===o||g===null||Qt(g)?(t.exit("chunkString"),d(g)):(t.consume(g),g===92?p:f)}function p(g){return g===o||g===92?(t.consume(g),f):f(g)}}function xv(t,e){let n;return a;function a(i){return Qt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,a):Dn(i)?Hn(t,a,n?"linePrefix":"lineSuffix")(i):e(i)}}const Bee={name:"definition",tokenize:qee},zee={partial:!0,tokenize:Uee};function qee(t,e,n){const a=this;let i;return s;function s(x){return t.enter("definition"),o(x)}function o(x){return vq.call(a,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return i=Fo(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),c):n(x)}function c(x){return Tr(x)?xv(t,d)(x):d(x)}function d(x){return xq(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function f(x){return t.attempt(zee,p,p)(x)}function p(x){return Dn(x)?Hn(t,g,"whitespace")(x):g(x)}function g(x){return x===null||Qt(x)?(t.exit("definition"),a.parser.defined.push(i),e(x)):n(x)}}function Uee(t,e,n){return a;function a(l){return Tr(l)?xv(t,i)(l):n(l)}function i(l){return bq(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Dn(l)?Hn(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Qt(l)?e(l):n(l)}}const Vee={name:"hardBreakEscape",tokenize:Hee};function Hee(t,e,n){return a;function a(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Qt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const Gee={name:"headingAtx",resolve:Wee,tokenize:Yee};function Wee(t,e){let n=t.length-2,a=3,i,s;return t[a][1].type==="whitespace"&&(a+=2),n-2>a&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(a===n-1||n-4>a&&t[n-2][1].type==="whitespace")&&(n-=a+1===n?2:4),n>a&&(i={type:"atxHeadingText",start:t[a][1].start,end:t[n][1].end},s={type:"chunkText",start:t[a][1].start,end:t[n][1].end,contentType:"text"},Ds(t,a,n-a+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function Yee(t,e,n){let a=0;return i;function i(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&a++<6?(t.consume(f),o):f===null||Tr(f)?(t.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||Qt(f)?(t.exit("atxHeading"),e(f)):Dn(f)?Hn(t,l,"whitespace")(f):(t.enter("atxHeadingText"),d(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),l(f))}function d(f){return f===null||f===35||Tr(f)?(t.exit("atxHeadingText"),l(f)):(t.consume(f),d)}}const Kee=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],XI=["pre","script","style","textarea"],Qee={concrete:!0,name:"htmlFlow",resolveTo:Zee,tokenize:ete},Xee={partial:!0,tokenize:nte},Jee={partial:!0,tokenize:tte};function Zee(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function ete(t,e,n){const a=this;let i,s,o,l,c;return d;function d(Y){return f(Y)}function f(Y){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(Y),p}function p(Y){return Y===33?(t.consume(Y),g):Y===47?(t.consume(Y),s=!0,j):Y===63?(t.consume(Y),i=3,a.interrupt?e:z):Ii(Y)?(t.consume(Y),o=String.fromCharCode(Y),S):n(Y)}function g(Y){return Y===45?(t.consume(Y),i=2,x):Y===91?(t.consume(Y),i=5,l=0,b):Ii(Y)?(t.consume(Y),i=4,a.interrupt?e:z):n(Y)}function x(Y){return Y===45?(t.consume(Y),a.interrupt?e:z):n(Y)}function b(Y){const Ie="CDATA[";return Y===Ie.charCodeAt(l++)?(t.consume(Y),l===Ie.length?a.interrupt?e:V:b):n(Y)}function j(Y){return Ii(Y)?(t.consume(Y),o=String.fromCharCode(Y),S):n(Y)}function S(Y){if(Y===null||Y===47||Y===62||Tr(Y)){const Ie=Y===47,Ue=o.toLowerCase();return!Ie&&!s&&XI.includes(Ue)?(i=1,a.interrupt?e(Y):V(Y)):Kee.includes(o.toLowerCase())?(i=6,Ie?(t.consume(Y),_):a.interrupt?e(Y):V(Y)):(i=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(Y):s?T(Y):C(Y))}return Y===45||pi(Y)?(t.consume(Y),o+=String.fromCharCode(Y),S):n(Y)}function _(Y){return Y===62?(t.consume(Y),a.interrupt?e:V):n(Y)}function T(Y){return Dn(Y)?(t.consume(Y),T):$(Y)}function C(Y){return Y===47?(t.consume(Y),$):Y===58||Y===95||Ii(Y)?(t.consume(Y),E):Dn(Y)?(t.consume(Y),C):$(Y)}function E(Y){return Y===45||Y===46||Y===58||Y===95||pi(Y)?(t.consume(Y),E):k(Y)}function k(Y){return Y===61?(t.consume(Y),O):Dn(Y)?(t.consume(Y),k):C(Y)}function O(Y){return Y===null||Y===60||Y===61||Y===62||Y===96?n(Y):Y===34||Y===39?(t.consume(Y),c=Y,I):Dn(Y)?(t.consume(Y),O):F(Y)}function I(Y){return Y===c?(t.consume(Y),c=null,B):Y===null||Qt(Y)?n(Y):(t.consume(Y),I)}function F(Y){return Y===null||Y===34||Y===39||Y===47||Y===60||Y===61||Y===62||Y===96||Tr(Y)?k(Y):(t.consume(Y),F)}function B(Y){return Y===47||Y===62||Dn(Y)?C(Y):n(Y)}function $(Y){return Y===62?(t.consume(Y),L):n(Y)}function L(Y){return Y===null||Qt(Y)?V(Y):Dn(Y)?(t.consume(Y),L):n(Y)}function V(Y){return Y===45&&i===2?(t.consume(Y),q):Y===60&&i===1?(t.consume(Y),G):Y===62&&i===4?(t.consume(Y),ce):Y===63&&i===3?(t.consume(Y),z):Y===93&&i===5?(t.consume(Y),W):Qt(Y)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Xee,je,H)(Y)):Y===null||Qt(Y)?(t.exit("htmlFlowData"),H(Y)):(t.consume(Y),V)}function H(Y){return t.check(Jee,ne,je)(Y)}function ne(Y){return t.enter("lineEnding"),t.consume(Y),t.exit("lineEnding"),Q}function Q(Y){return Y===null||Qt(Y)?H(Y):(t.enter("htmlFlowData"),V(Y))}function q(Y){return Y===45?(t.consume(Y),z):V(Y)}function G(Y){return Y===47?(t.consume(Y),o="",ie):V(Y)}function ie(Y){if(Y===62){const Ie=o.toLowerCase();return XI.includes(Ie)?(t.consume(Y),ce):V(Y)}return Ii(Y)&&o.length<8?(t.consume(Y),o+=String.fromCharCode(Y),ie):V(Y)}function W(Y){return Y===93?(t.consume(Y),z):V(Y)}function z(Y){return Y===62?(t.consume(Y),ce):Y===45&&i===2?(t.consume(Y),z):V(Y)}function ce(Y){return Y===null||Qt(Y)?(t.exit("htmlFlowData"),je(Y)):(t.consume(Y),ce)}function je(Y){return t.exit("htmlFlow"),e(Y)}}function tte(t,e,n){const a=this;return i;function i(o){return Qt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}function nte(t,e,n){return a;function a(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Pb,e,n)}}const rte={name:"htmlText",tokenize:ate};function ate(t,e,n){const a=this;let i,s,o;return l;function l(z){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(z),c}function c(z){return z===33?(t.consume(z),d):z===47?(t.consume(z),k):z===63?(t.consume(z),C):Ii(z)?(t.consume(z),F):n(z)}function d(z){return z===45?(t.consume(z),f):z===91?(t.consume(z),s=0,b):Ii(z)?(t.consume(z),T):n(z)}function f(z){return z===45?(t.consume(z),x):n(z)}function p(z){return z===null?n(z):z===45?(t.consume(z),g):Qt(z)?(o=p,G(z)):(t.consume(z),p)}function g(z){return z===45?(t.consume(z),x):p(z)}function x(z){return z===62?q(z):z===45?g(z):p(z)}function b(z){const ce="CDATA[";return z===ce.charCodeAt(s++)?(t.consume(z),s===ce.length?j:b):n(z)}function j(z){return z===null?n(z):z===93?(t.consume(z),S):Qt(z)?(o=j,G(z)):(t.consume(z),j)}function S(z){return z===93?(t.consume(z),_):j(z)}function _(z){return z===62?q(z):z===93?(t.consume(z),_):j(z)}function T(z){return z===null||z===62?q(z):Qt(z)?(o=T,G(z)):(t.consume(z),T)}function C(z){return z===null?n(z):z===63?(t.consume(z),E):Qt(z)?(o=C,G(z)):(t.consume(z),C)}function E(z){return z===62?q(z):C(z)}function k(z){return Ii(z)?(t.consume(z),O):n(z)}function O(z){return z===45||pi(z)?(t.consume(z),O):I(z)}function I(z){return Qt(z)?(o=I,G(z)):Dn(z)?(t.consume(z),I):q(z)}function F(z){return z===45||pi(z)?(t.consume(z),F):z===47||z===62||Tr(z)?B(z):n(z)}function B(z){return z===47?(t.consume(z),q):z===58||z===95||Ii(z)?(t.consume(z),$):Qt(z)?(o=B,G(z)):Dn(z)?(t.consume(z),B):q(z)}function $(z){return z===45||z===46||z===58||z===95||pi(z)?(t.consume(z),$):L(z)}function L(z){return z===61?(t.consume(z),V):Qt(z)?(o=L,G(z)):Dn(z)?(t.consume(z),L):B(z)}function V(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(t.consume(z),i=z,H):Qt(z)?(o=V,G(z)):Dn(z)?(t.consume(z),V):(t.consume(z),ne)}function H(z){return z===i?(t.consume(z),i=void 0,Q):z===null?n(z):Qt(z)?(o=H,G(z)):(t.consume(z),H)}function ne(z){return z===null||z===34||z===39||z===60||z===61||z===96?n(z):z===47||z===62||Tr(z)?B(z):(t.consume(z),ne)}function Q(z){return z===47||z===62||Tr(z)?B(z):n(z)}function q(z){return z===62?(t.consume(z),t.exit("htmlTextData"),t.exit("htmlText"),e):n(z)}function G(z){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),ie}function ie(z){return Dn(z)?Hn(t,W,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):W(z)}function W(z){return t.enter("htmlTextData"),o(z)}}const tD={name:"labelEnd",resolveAll:lte,resolveTo:cte,tokenize:ute},ite={tokenize:dte},ste={tokenize:hte},ote={tokenize:fte};function lte(t){let e=-1;const n=[];for(;++e<t.length;){const a=t[e][1];if(n.push(t[e]),a.type==="labelImage"||a.type==="labelLink"||a.type==="labelEnd"){const i=a.type==="labelImage"?4:2;a.type="data",e+=i}}return t.length!==n.length&&Ds(t,0,t.length,n),t}function cte(t,e){let n=t.length,a=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){a=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},f={type:"labelText",start:{...t[s+a+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",c,e],["enter",d,e]],l=eo(l,t.slice(s+1,s+a+3)),l=eo(l,[["enter",f,e]]),l=eo(l,qN(e.parser.constructs.insideSpan.null,t.slice(s+a+4,o-3),e)),l=eo(l,[["exit",f,e],t[o-2],t[o-1],["exit",d,e]]),l=eo(l,t.slice(o+1)),l=eo(l,[["exit",c,e]]),Ds(t,s,t.length,l),t}function ute(t,e,n){const a=this;let i=a.events.length,s,o;for(;i--;)if((a.events[i][1].type==="labelImage"||a.events[i][1].type==="labelLink")&&!a.events[i][1]._balanced){s=a.events[i][1];break}return l;function l(g){return s?s._inactive?p(g):(o=a.parser.defined.includes(Fo(a.sliceSerialize({start:s.end,end:a.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),c):n(g)}function c(g){return g===40?t.attempt(ite,f,o?f:p)(g):g===91?t.attempt(ste,f,o?d:p)(g):o?f(g):p(g)}function d(g){return t.attempt(ote,f,p)(g)}function f(g){return e(g)}function p(g){return s._balanced=!0,n(g)}}function dte(t,e,n){return a;function a(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),i}function i(p){return Tr(p)?xv(t,s)(p):s(p)}function s(p){return p===41?f(p):xq(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return Tr(p)?xv(t,c)(p):f(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?bq(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function d(p){return Tr(p)?xv(t,f)(p):f(p)}function f(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function hte(t,e,n){const a=this;return i;function i(l){return vq.call(a,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return a.parser.defined.includes(Fo(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function fte(t,e,n){return a;function a(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const pte={name:"labelStartImage",resolveAll:tD.resolveAll,tokenize:mte};function mte(t,e,n){const a=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(l):e(l)}}const gte={name:"labelStartLink",resolveAll:tD.resolveAll,tokenize:yte};function yte(t,e,n){const a=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(o):e(o)}}const lC={name:"lineEnding",tokenize:xte};function xte(t,e){return n;function n(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Hn(t,e,"linePrefix")}}const Xj={name:"thematicBreak",tokenize:vte};function vte(t,e,n){let a=0,i;return s;function s(d){return t.enter("thematicBreak"),o(d)}function o(d){return i=d,l(d)}function l(d){return d===i?(t.enter("thematicBreakSequence"),c(d)):a>=3&&(d===null||Qt(d))?(t.exit("thematicBreak"),e(d)):n(d)}function c(d){return d===i?(t.consume(d),a++,c):(t.exit("thematicBreakSequence"),Dn(d)?Hn(t,l,"whitespace")(d):l(d))}}const rs={continuation:{tokenize:Nte},exit:_te,name:"list",tokenize:wte},bte={partial:!0,tokenize:Cte},jte={partial:!0,tokenize:Ste};function wte(t,e,n){const a=this,i=a.events[a.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(x){const b=a.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!a.containerState.marker||x===a.containerState.marker:kE(x)){if(a.containerState.type||(a.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),x===42||x===45?t.check(Xj,n,d)(x):d(x);if(!a.interrupt||x===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(x)}return n(x)}function c(x){return kE(x)&&++o<10?(t.consume(x),c):(!a.interrupt||o<2)&&(a.containerState.marker?x===a.containerState.marker:x===41||x===46)?(t.exit("listItemValue"),d(x)):n(x)}function d(x){return t.enter("listItemMarker"),t.consume(x),t.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||x,t.check(Pb,a.interrupt?n:f,t.attempt(bte,g,p))}function f(x){return a.containerState.initialBlankLine=!0,s++,g(x)}function p(x){return Dn(x)?(t.enter("listItemPrefixWhitespace"),t.consume(x),t.exit("listItemPrefixWhitespace"),g):n(x)}function g(x){return a.containerState.size=s+a.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(x)}}function Nte(t,e,n){const a=this;return a.containerState._closeFlow=void 0,t.check(Pb,i,s);function i(l){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,Hn(t,e,"listItemIndent",a.containerState.size+1)(l)}function s(l){return a.containerState.furtherBlankLines||!Dn(l)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,o(l)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,t.attempt(jte,e,o)(l))}function o(l){return a.containerState._closeFlow=!0,a.interrupt=void 0,Hn(t,t.attempt(rs,e,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Ste(t,e,n){const a=this;return Hn(t,i,"listItemIndent",a.containerState.size+1);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===a.containerState.size?e(s):n(s)}}function _te(t){t.exit(this.containerState.type)}function Cte(t,e,n){const a=this;return Hn(t,i,"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=a.events[a.events.length-1];return!Dn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const JI={name:"setextUnderline",resolveTo:Tte,tokenize:kte};function Tte(t,e){let n=t.length,a,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){a=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[a][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[a][1],e]),t[a][1].end={...t[s][1].end}):t[a][1]=o,t.push(["exit",o,e]),t}function kte(t,e,n){const a=this;let i;return s;function s(d){let f=a.events.length,p;for(;f--;)if(a.events[f][1].type!=="lineEnding"&&a.events[f][1].type!=="linePrefix"&&a.events[f][1].type!=="content"){p=a.events[f][1].type==="paragraph";break}return!a.parser.lazy[a.now().line]&&(a.interrupt||p)?(t.enter("setextHeadingLine"),i=d,o(d)):n(d)}function o(d){return t.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(t.consume(d),l):(t.exit("setextHeadingLineSequence"),Dn(d)?Hn(t,c,"lineSuffix")(d):c(d))}function c(d){return d===null||Qt(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const Ate={tokenize:Ete};function Ete(t){const e=this,n=t.attempt(Pb,a,t.attempt(this.parser.constructs.flowInitial,i,Hn(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Iee,i)),"linePrefix")));return n;function a(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Pte={resolveAll:wq()},Ote=jq("string"),Dte=jq("text");function jq(t){return{resolveAll:wq(t==="text"?Mte:void 0),tokenize:e};function e(n){const a=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(f){return d(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return d(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function d(f){if(f===null)return!0;const p=i[f];let g=-1;if(p)for(;++g<p.length;){const x=p[g];if(!x.previous||x.previous.call(a,a.previous))return!0}return!1}}}function wq(t){return e;function e(n,a){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,a):n}}function Mte(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const a=t[n-1][1],i=e.sliceStream(a);let s=i.length,o=-1,l=0,c;for(;s--;){const d=i[s];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const d={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:a.start._bufferIndex+o,_index:a.start._index+s,line:a.end.line,column:a.end.column-l,offset:a.end.offset-l},end:{...a.end}};a.end={...d.start},a.start.offset===a.end.offset?Object.assign(a,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const Ite={42:rs,43:rs,45:rs,48:rs,49:rs,50:rs,51:rs,52:rs,53:rs,54:rs,55:rs,56:rs,57:rs,62:pq},Rte={91:Bee},Lte={[-2]:oC,[-1]:oC,32:oC},Fte={35:Gee,42:Xj,45:[JI,Xj],60:Qee,61:JI,95:Xj,96:QI,126:QI},$te={38:gq,92:mq},Bte={[-5]:lC,[-4]:lC,[-3]:lC,33:pte,38:gq,42:AE,60:[gee,rte],91:gte,92:[Vee,mq],93:tD,95:AE,96:Aee},zte={null:[AE,Pte]},qte={null:[42,95]},Ute={null:[]},Vte=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:qte,contentInitial:Rte,disable:Ute,document:Ite,flow:Fte,flowInitial:Lte,insideSpan:zte,string:$te,text:Bte},Symbol.toStringTag,{value:"Module"}));function Hte(t,e,n){let a={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const c={attempt:I(k),check:I(O),consume:T,enter:C,exit:E,interrupt:I(O,{interrupt:!0})},d={code:null,containerState:{},defineSkip:j,events:[],now:b,parser:t,previous:null,sliceSerialize:g,sliceStream:x,write:p};let f=e.tokenize.call(d,c);return e.resolveAll&&s.push(e),d;function p(L){return o=eo(o,L),S(),o[o.length-1]!==null?[]:(F(e,0),d.events=qN(s,d.events,d),d.events)}function g(L,V){return Wte(x(L),V)}function x(L){return Gte(o,L)}function b(){const{_bufferIndex:L,_index:V,line:H,column:ne,offset:Q}=a;return{_bufferIndex:L,_index:V,line:H,column:ne,offset:Q}}function j(L){i[L.line]=L.column,$()}function S(){let L;for(;a._index<o.length;){const V=o[a._index];if(typeof V=="string")for(L=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===L&&a._bufferIndex<V.length;)_(V.charCodeAt(a._bufferIndex));else _(V)}}function _(L){f=f(L)}function T(L){Qt(L)?(a.line++,a.column=1,a.offset+=L===-3?2:1,$()):L!==-1&&(a.column++,a.offset++),a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===o[a._index].length&&(a._bufferIndex=-1,a._index++)),d.previous=L}function C(L,V){const H=V||{};return H.type=L,H.start=b(),d.events.push(["enter",H,d]),l.push(H),H}function E(L){const V=l.pop();return V.end=b(),d.events.push(["exit",V,d]),V}function k(L,V){F(L,V.from)}function O(L,V){V.restore()}function I(L,V){return H;function H(ne,Q,q){let G,ie,W,z;return Array.isArray(ne)?je(ne):"tokenize"in ne?je([ne]):ce(ne);function ce(ze){return Le;function Le(be){const Ce=be!==null&&ze[be],Ae=be!==null&&ze.null,me=[...Array.isArray(Ce)?Ce:Ce?[Ce]:[],...Array.isArray(Ae)?Ae:Ae?[Ae]:[]];return je(me)(be)}}function je(ze){return G=ze,ie=0,ze.length===0?q:Y(ze[ie])}function Y(ze){return Le;function Le(be){return z=B(),W=ze,ze.partial||(d.currentConstruct=ze),ze.name&&d.parser.constructs.disable.null.includes(ze.name)?Ue():ze.tokenize.call(V?Object.assign(Object.create(d),V):d,c,Ie,Ue)(be)}}function Ie(ze){return L(W,z),Q}function Ue(ze){return z.restore(),++ie<G.length?Y(G[ie]):q}}}function F(L,V){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&Ds(d.events,V,d.events.length-V,L.resolve(d.events.slice(V),d)),L.resolveTo&&(d.events=L.resolveTo(d.events,d))}function B(){const L=b(),V=d.previous,H=d.currentConstruct,ne=d.events.length,Q=Array.from(l);return{from:ne,restore:q};function q(){a=L,d.previous=V,d.currentConstruct=H,d.events.length=ne,l=Q,$()}}function $(){a.line in i&&a.column<2&&(a.column=i[a.line],a.offset+=i[a.line]-1)}}function Gte(t,e){const n=e.start._index,a=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(a,s)];else{if(o=t.slice(n,i),a>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(a):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function Wte(t,e){let n=-1;const a=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,a.push(o)}return a.join("")}function Yte(t){const a={constructs:hq([Vte,...(t||{}).extensions||[]]),content:i(cee),defined:[],document:i(dee),flow:i(Ate),lazy:{},string:i(Ote),text:i(Dte)};return a;function i(s){return o;function o(l){return Hte(a,s,l)}}}function Kte(t){for(;!yq(t););return t}const ZI=/[\0\t\n\r]/g;function Qte(){let t=1,e="",n=!0,a;return i;function i(s,o,l){const c=[];let d,f,p,g,x;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),p=0,e="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(ZI.lastIndex=p,d=ZI.exec(s),g=d&&d.index!==void 0?d.index:s.length,x=s.charCodeAt(g),!d){e=s.slice(p);break}if(x===10&&p===g&&a)c.push(-3),a=void 0;else switch(a&&(c.push(-5),a=void 0),p<g&&(c.push(s.slice(p,g)),t+=g-p),x){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:a=!0,t=1}p=g+1}return l&&(a&&c.push(-5),e&&c.push(e),c.push(null)),c}}const Xte=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Jte(t){return t.replace(Xte,Zte)}function Zte(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return fq(n.slice(s?2:1),s?16:10)}return eD(n)||t}const Nq={}.hasOwnProperty;function ene(t,e,n){return typeof e!="string"&&(n=e,e=void 0),tne(n)(Kte(Yte(n).document().write(Qte()(t,e,!0))))}function tne(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Te),autolinkProtocol:B,autolinkEmail:B,atxHeading:s(ae),blockQuote:s(Ae),characterEscape:B,characterReference:B,codeFenced:s(me),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(me,o),codeText:s(ye,o),codeTextData:B,data:B,codeFlowValue:B,definition:s(le),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(X),hardBreakEscape:s(de),hardBreakTrailing:s(de),htmlFlow:s(ee,o),htmlFlowData:B,htmlText:s(ee,o),htmlTextData:B,image:s(Ne),label:o,link:s(Te),listItem:s(xe),listItemValue:g,listOrdered:s(Fe,p),listUnordered:s(Fe),paragraph:s(te),reference:Y,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ae),strong:s(oe),thematicBreak:s(Oe)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:Ce,autolinkProtocol:be,blockQuote:c(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:Ue,characterReferenceMarkerNumeric:Ue,characterReferenceValue:ze,characterReference:Le,codeFenced:c(S),codeFencedFence:j,codeFencedFenceInfo:x,codeFencedFenceMeta:b,codeFlowValue:$,codeIndented:c(_),codeText:c(Q),codeTextData:$,data:$,definition:c(),definitionDestinationString:E,definitionLabelString:T,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(V),hardBreakTrailing:c(V),htmlFlow:c(H),htmlFlowData:$,htmlText:c(ne),htmlTextData:$,image:c(G),label:W,labelText:ie,lineEnding:L,link:c(q),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Ie,resourceDestinationString:z,resourceTitleString:ce,resource:je,setextHeading:c(F),setextHeadingLineSequence:I,setextHeadingText:O,strong:c(),thematicBreak:c()}};Sq(e,(t||{}).mdastExtensions||[]);const n={};return a;function a(K){let ge={type:"root",children:[]};const ue={stack:[ge],tokenStack:[],config:e,enter:l,exit:d,buffer:o,resume:f,data:n},fe=[];let Ee=-1;for(;++Ee<K.length;)if(K[Ee][1].type==="listOrdered"||K[Ee][1].type==="listUnordered")if(K[Ee][0]==="enter")fe.push(Ee);else{const Ke=fe.pop();Ee=i(K,Ke,Ee)}for(Ee=-1;++Ee<K.length;){const Ke=e[K[Ee][0]];Nq.call(Ke,K[Ee][1].type)&&Ke[K[Ee][1].type].call(Object.assign({sliceSerialize:K[Ee][2].sliceSerialize},ue),K[Ee][1])}if(ue.tokenStack.length>0){const Ke=ue.tokenStack[ue.tokenStack.length-1];(Ke[1]||eR).call(ue,void 0,Ke[0])}for(ge.position={start:zu(K.length>0?K[0][1].start:{line:1,column:1,offset:0}),end:zu(K.length>0?K[K.length-2][1].end:{line:1,column:1,offset:0})},Ee=-1;++Ee<e.transforms.length;)ge=e.transforms[Ee](ge)||ge;return ge}function i(K,ge,ue){let fe=ge-1,Ee=-1,Ke=!1,$e,We,it,wt;for(;++fe<=ue;){const we=K[fe];switch(we[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{we[0]==="enter"?Ee++:Ee--,wt=void 0;break}case"lineEndingBlank":{we[0]==="enter"&&($e&&!wt&&!Ee&&!it&&(it=fe),wt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:wt=void 0}if(!Ee&&we[0]==="enter"&&we[1].type==="listItemPrefix"||Ee===-1&&we[0]==="exit"&&(we[1].type==="listUnordered"||we[1].type==="listOrdered")){if($e){let Xe=fe;for(We=void 0;Xe--;){const Je=K[Xe];if(Je[1].type==="lineEnding"||Je[1].type==="lineEndingBlank"){if(Je[0]==="exit")continue;We&&(K[We][1].type="lineEndingBlank",Ke=!0),Je[1].type="lineEnding",We=Xe}else if(!(Je[1].type==="linePrefix"||Je[1].type==="blockQuotePrefix"||Je[1].type==="blockQuotePrefixWhitespace"||Je[1].type==="blockQuoteMarker"||Je[1].type==="listItemIndent"))break}it&&(!We||it<We)&&($e._spread=!0),$e.end=Object.assign({},We?K[We][1].start:we[1].end),K.splice(We||fe,0,["exit",$e,we[2]]),fe++,ue++}if(we[1].type==="listItemPrefix"){const Xe={type:"listItem",_spread:!1,start:Object.assign({},we[1].start),end:void 0};$e=Xe,K.splice(fe,0,["enter",Xe,we[2]]),fe++,ue++,it=void 0,wt=!0}}}return K[ge][1]._spread=Ke,ue}function s(K,ge){return ue;function ue(fe){l.call(this,K(fe),fe),ge&&ge.call(this,fe)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(K,ge,ue){this.stack[this.stack.length-1].children.push(K),this.stack.push(K),this.tokenStack.push([ge,ue||void 0]),K.position={start:zu(ge.start),end:void 0}}function c(K){return ge;function ge(ue){K&&K.call(this,ue),d.call(this,ue)}}function d(K,ge){const ue=this.stack.pop(),fe=this.tokenStack.pop();if(fe)fe[0].type!==K.type&&(ge?ge.call(this,K,fe[0]):(fe[1]||eR).call(this,K,fe[0]));else throw new Error("Cannot close `"+K.type+"` ("+yv({start:K.start,end:K.end})+"): its not open");ue.position.end=zu(K.end)}function f(){return ZO(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(K){if(this.data.expectingFirstListItemValue){const ge=this.stack[this.stack.length-2];ge.start=Number.parseInt(this.sliceSerialize(K),10),this.data.expectingFirstListItemValue=void 0}}function x(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.lang=K}function b(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.meta=K}function j(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.value=K.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.value=K.replace(/(\r?\n|\r)$/g,"")}function T(K){const ge=this.resume(),ue=this.stack[this.stack.length-1];ue.label=ge,ue.identifier=Fo(this.sliceSerialize(K)).toLowerCase()}function C(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.title=K}function E(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.url=K}function k(K){const ge=this.stack[this.stack.length-1];if(!ge.depth){const ue=this.sliceSerialize(K).length;ge.depth=ue}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function I(K){const ge=this.stack[this.stack.length-1];ge.depth=this.sliceSerialize(K).codePointAt(0)===61?1:2}function F(){this.data.setextHeadingSlurpLineEnding=void 0}function B(K){const ue=this.stack[this.stack.length-1].children;let fe=ue[ue.length-1];(!fe||fe.type!=="text")&&(fe=_e(),fe.position={start:zu(K.start),end:void 0},ue.push(fe)),this.stack.push(fe)}function $(K){const ge=this.stack.pop();ge.value+=this.sliceSerialize(K),ge.position.end=zu(K.end)}function L(K){const ge=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ue=ge.children[ge.children.length-1];ue.position.end=zu(K.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ge.type)&&(B.call(this,K),$.call(this,K))}function V(){this.data.atHardBreak=!0}function H(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.value=K}function ne(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.value=K}function Q(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.value=K}function q(){const K=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";K.type+="Reference",K.referenceType=ge,delete K.url,delete K.title}else delete K.identifier,delete K.label;this.data.referenceType=void 0}function G(){const K=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";K.type+="Reference",K.referenceType=ge,delete K.url,delete K.title}else delete K.identifier,delete K.label;this.data.referenceType=void 0}function ie(K){const ge=this.sliceSerialize(K),ue=this.stack[this.stack.length-2];ue.label=Jte(ge),ue.identifier=Fo(ge).toLowerCase()}function W(){const K=this.stack[this.stack.length-1],ge=this.resume(),ue=this.stack[this.stack.length-1];if(this.data.inReference=!0,ue.type==="link"){const fe=K.children;ue.children=fe}else ue.alt=ge}function z(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.url=K}function ce(){const K=this.resume(),ge=this.stack[this.stack.length-1];ge.title=K}function je(){this.data.inReference=void 0}function Y(){this.data.referenceType="collapsed"}function Ie(K){const ge=this.resume(),ue=this.stack[this.stack.length-1];ue.label=ge,ue.identifier=Fo(this.sliceSerialize(K)).toLowerCase(),this.data.referenceType="full"}function Ue(K){this.data.characterReferenceType=K.type}function ze(K){const ge=this.sliceSerialize(K),ue=this.data.characterReferenceType;let fe;ue?(fe=fq(ge,ue==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):fe=eD(ge);const Ee=this.stack[this.stack.length-1];Ee.value+=fe}function Le(K){const ge=this.stack.pop();ge.position.end=zu(K.end)}function be(K){$.call(this,K);const ge=this.stack[this.stack.length-1];ge.url=this.sliceSerialize(K)}function Ce(K){$.call(this,K);const ge=this.stack[this.stack.length-1];ge.url="mailto:"+this.sliceSerialize(K)}function Ae(){return{type:"blockquote",children:[]}}function me(){return{type:"code",lang:null,meta:null,value:""}}function ye(){return{type:"inlineCode",value:""}}function le(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function X(){return{type:"emphasis",children:[]}}function ae(){return{type:"heading",depth:0,children:[]}}function de(){return{type:"break"}}function ee(){return{type:"html",value:""}}function Ne(){return{type:"image",title:null,url:"",alt:null}}function Te(){return{type:"link",title:null,url:"",children:[]}}function Fe(K){return{type:"list",ordered:K.type==="listOrdered",start:null,spread:K._spread,children:[]}}function xe(K){return{type:"listItem",spread:K._spread,checked:null,children:[]}}function te(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function _e(){return{type:"text",value:""}}function Oe(){return{type:"thematicBreak"}}}function zu(t){return{line:t.line,column:t.column,offset:t.offset}}function Sq(t,e){let n=-1;for(;++n<e.length;){const a=e[n];Array.isArray(a)?Sq(t,a):nne(t,a)}}function nne(t,e){let n;for(n in e)if(Nq.call(e,n))switch(n){case"canContainEols":{const a=e[n];a&&t[n].push(...a);break}case"transforms":{const a=e[n];a&&t[n].push(...a);break}case"enter":case"exit":{const a=e[n];a&&Object.assign(t[n],a);break}}}function eR(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+yv({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+yv({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+yv({start:e.start,end:e.end})+") is still open")}function rne(t){const e=this;e.parser=n;function n(a){return ene(a,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function ane(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function ine(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function sne(t,e){const n=e.value?e.value+`
`:"",a={};e.lang&&(a.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:a,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function one(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function lne(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cne(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",a=String(e.identifier).toUpperCase(),i=Lg(a.toLowerCase()),s=t.footnoteOrder.indexOf(a);let o,l=t.footnoteCounts.get(a);l===void 0?(l=0,t.footnoteOrder.push(a),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(a,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,d),t.applyData(e,d)}function une(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dne(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function _q(t,e){const n=e.referenceType;let a="]";if(n==="collapsed"?a+="[]":n==="full"&&(a+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+a}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=a:i.push({type:"text",value:a}),i}function hne(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return _q(t,e);const i={src:Lg(a.url||""),alt:e.alt};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function fne(t,e){const n={src:Lg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,a),t.applyData(e,a)}function pne(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const a={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,a),t.applyData(e,a)}function mne(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return _q(t,e);const i={href:Lg(a.url||"")};a.title!==null&&a.title!==void 0&&(i.title=a.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function gne(t,e){const n={href:Lg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function yne(t,e,n){const a=t.all(e),i=n?xne(n):Cq(e),s={},o=[];if(typeof e.checked=="boolean"){const f=a[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},a.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<a.length;){const f=a[l];(i||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?o.push(...f.children):o.push(f)}const c=a[a.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,d),t.applyData(e,d)}function xne(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let a=-1;for(;!e&&++a<n.length;)e=Cq(n[a])}return e}function Cq(t){const e=t.spread;return e??t.children.length>1}function vne(t,e){const n={},a=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<a.length;){const o=a[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(a,!0)};return t.patch(e,s),t.applyData(e,s)}function bne(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function jne(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function wne(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Nne(t,e){const n=t.all(e),a=n.shift(),i=[];if(a){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([a],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=KO(e.children[1]),c=iq(e.children[e.children.length-1]);l&&c&&(o.position={start:l,end:c}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function Sne(t,e,n){const a=n?n.children:void 0,s=(a?a.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let c=-1;const d=[];for(;++c<l;){const p=e.children[c],g={},x=o?o[c]:void 0;x&&(g.align=x);let b={type:"element",tagName:s,properties:g,children:[]};p&&(b.children=t.all(p),t.patch(p,b),b=t.applyData(p,b)),d.push(b)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,f),t.applyData(e,f)}function _ne(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const tR=9,nR=32;function Cne(t){const e=String(t),n=/\r?\n|\r/g;let a=n.exec(e),i=0;const s=[];for(;a;)s.push(rR(e.slice(i,a.index),i>0,!0),a[0]),i=a.index+a[0].length,a=n.exec(e);return s.push(rR(e.slice(i),i>0,!1)),s.join("")}function rR(t,e,n){let a=0,i=t.length;if(e){let s=t.codePointAt(a);for(;s===tR||s===nR;)a++,s=t.codePointAt(a)}if(n){let s=t.codePointAt(i-1);for(;s===tR||s===nR;)i--,s=t.codePointAt(i-1)}return i>a?t.slice(a,i):""}function Tne(t,e){const n={type:"text",value:Cne(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function kne(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Ane={blockquote:ane,break:ine,code:sne,delete:one,emphasis:lne,footnoteReference:cne,heading:une,html:dne,imageReference:hne,image:fne,inlineCode:pne,linkReference:mne,link:gne,listItem:yne,list:vne,paragraph:bne,root:jne,strong:wne,table:Nne,tableCell:_ne,tableRow:Sne,text:Tne,thematicBreak:kne,toml:pj,yaml:pj,definition:pj,footnoteDefinition:pj};function pj(){}const Tq=-1,UN=0,vv=1,gw=2,nD=3,rD=4,aD=5,iD=6,kq=7,Aq=8,aR=typeof self=="object"?self:globalThis,Ene=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),a=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case UN:case Tq:return n(o,i);case vv:{const l=n([],i);for(const c of o)l.push(a(c));return l}case gw:{const l=n({},i);for(const[c,d]of o)l[a(c)]=a(d);return l}case nD:return n(new Date(o),i);case rD:{const{source:l,flags:c}=o;return n(new RegExp(l,c),i)}case aD:{const l=n(new Map,i);for(const[c,d]of o)l.set(a(c),a(d));return l}case iD:{const l=n(new Set,i);for(const c of o)l.add(a(c));return l}case kq:{const{name:l,message:c}=o;return n(new aR[l](c),i)}case Aq:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new aR[s](o),i)};return a},iR=t=>Ene(new Map,t)(0),gm="",{toString:Pne}={},{keys:One}=Object,Gx=t=>{const e=typeof t;if(e!=="object"||!t)return[UN,e];const n=Pne.call(t).slice(8,-1);switch(n){case"Array":return[vv,gm];case"Object":return[gw,gm];case"Date":return[nD,gm];case"RegExp":return[rD,gm];case"Map":return[aD,gm];case"Set":return[iD,gm];case"DataView":return[vv,n]}return n.includes("Array")?[vv,n]:n.includes("Error")?[kq,n]:[gw,n]},mj=([t,e])=>t===UN&&(e==="function"||e==="symbol"),Dne=(t,e,n,a)=>{const i=(o,l)=>{const c=a.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=Gx(o);switch(l){case UN:{let f=o;switch(c){case"bigint":l=Aq,f=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return i([Tq],o)}return i([l,f],o)}case vv:{if(c){let g=o;return c==="DataView"?g=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(g=new Uint8Array(o)),i([c,[...g]],o)}const f=[],p=i([l,f],o);for(const g of o)f.push(s(g));return p}case gw:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],p=i([l,f],o);for(const g of One(o))(t||!mj(Gx(o[g])))&&f.push([s(g),s(o[g])]);return p}case nD:return i([l,o.toISOString()],o);case rD:{const{source:f,flags:p}=o;return i([l,{source:f,flags:p}],o)}case aD:{const f=[],p=i([l,f],o);for(const[g,x]of o)(t||!(mj(Gx(g))||mj(Gx(x))))&&f.push([s(g),s(x)]);return p}case iD:{const f=[],p=i([l,f],o);for(const g of o)(t||!mj(Gx(g)))&&f.push(s(g));return p}}const{message:d}=o;return i([l,{name:c,message:d}],o)};return s},sR=(t,{json:e,lossy:n}={})=>{const a=[];return Dne(!(e||n),!!e,new Map,a)(t),a},yw=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?iR(sR(t,e)):structuredClone(t):(t,e)=>iR(sR(t,e));function Mne(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Ine(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Rne(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Mne,a=t.options.footnoteBackLabel||Ine,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[c]);if(!d)continue;const f=t.all(d),p=String(d.identifier).toUpperCase(),g=Lg(p.toLowerCase());let x=0;const b=[],j=t.footnoteCounts.get(p);for(;j!==void 0&&++x<=j;){b.length>0&&b.push({type:"text",value:" "});let T=typeof n=="string"?n:n(c,x);typeof T=="string"&&(T={type:"text",value:T}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof a=="string"?a:a(c,x),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const S=f[f.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const T=S.children[S.children.length-1];T&&T.type==="text"?T.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...b)}else f.push(...b);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(f,!0)};t.patch(d,_),l.push(_)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...yw(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const VN=function(t){if(t==null)return Bne;if(typeof t=="function")return HN(t);if(typeof t=="object")return Array.isArray(t)?Lne(t):Fne(t);if(typeof t=="string")return $ne(t);throw new Error("Expected function, string, or object as test")};function Lne(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=VN(t[n]);return HN(a);function a(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Fne(t){const e=t;return HN(n);function n(a){const i=a;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function $ne(t){return HN(e);function e(n){return n&&n.type===t}}function HN(t){return e;function e(n,a,i){return!!(zne(n)&&t.call(this,n,typeof a=="number"?a:void 0,i||void 0))}}function Bne(){return!0}function zne(t){return t!==null&&typeof t=="object"&&"type"in t}const Eq=[],qne=!0,EE=!1,Une="skip";function Pq(t,e,n,a){let i;typeof e=="function"&&typeof n!="function"?(a=n,n=e):i=e;const s=VN(i),o=a?-1:1;l(t,void 0,[])();function l(c,d,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const x=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return g;function g(){let x=Eq,b,j,S;if((!e||s(c,d,f[f.length-1]||void 0))&&(x=Vne(n(c,f)),x[0]===EE))return x;if("children"in c&&c.children){const _=c;if(_.children&&x[0]!==Une)for(j=(a?_.children.length:-1)+o,S=f.concat(_);j>-1&&j<_.children.length;){const T=_.children[j];if(b=l(T,j,S)(),b[0]===EE)return b;j=typeof b[1]=="number"?b[1]:j+o}}return x}}}function Vne(t){return Array.isArray(t)?t:typeof t=="number"?[qne,t]:t==null?Eq:[t]}function sD(t,e,n,a){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=a),Pq(t,s,l,i);function l(c,d){const f=d[d.length-1],p=f?f.children.indexOf(c):void 0;return o(c,p,f)}}const PE={}.hasOwnProperty,Hne={};function Gne(t,e){const n=e||Hne,a=new Map,i=new Map,s=new Map,o={...Ane,...n.handlers},l={all:d,applyData:Yne,definitionById:a,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:Wne,wrap:Qne};return sD(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?a:i,g=String(f.identifier).toUpperCase();p.has(g)||p.set(g,f)}}),l;function c(f,p){const g=f.type,x=l.handlers[g];if(PE.call(l.handlers,g)&&x)return x(l,f,p);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in f){const{children:j,...S}=f,_=yw(S);return _.children=l.all(f),_}return yw(f)}return(l.options.unknownHandler||Kne)(l,f,p)}function d(f){const p=[];if("children"in f){const g=f.children;let x=-1;for(;++x<g.length;){const b=l.one(g[x],f);if(b){if(x&&g[x-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=oR(b.value)),!Array.isArray(b)&&b.type==="element")){const j=b.children[0];j&&j.type==="text"&&(j.value=oR(j.value))}Array.isArray(b)?p.push(...b):p.push(b)}}}return p}}function Wne(t,e){t.position&&(e.position=IZ(t))}function Yne(t,e){let n=e;if(t&&t.data){const a=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof a=="string")if(n.type==="element")n.tagName=a;else{const o="children"in n?n.children:[n];n={type:"element",tagName:a,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,yw(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Kne(t,e){const n=e.data||{},a="value"in e&&!(PE.call(n,"hProperties")||PE.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function Qne(t,e){const n=[];let a=-1;for(e&&n.push({type:"text",value:`
`});++a<t.length;)a&&n.push({type:"text",value:`
`}),n.push(t[a]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function oR(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function lR(t,e){const n=Gne(t,e),a=n.one(t,void 0),i=Rne(n),s=Array.isArray(a)?{type:"root",children:a}:a||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Xne(t,e){return t&&"run"in t?async function(n,a){const i=lR(n,{file:a,...e});await t.run(i,a)}:function(n,a){return lR(n,{file:a,...t||e})}}function cR(t){if(t)throw t}var cC,uR;function Jne(){if(uR)return cC;uR=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var f=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!f&&!p)return!1;var g;for(g in d);return typeof g>"u"||t.call(d,g)},o=function(d,f){n&&f.name==="__proto__"?n(d,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):d[f.name]=f.newValue},l=function(d,f){if(f==="__proto__")if(t.call(d,f)){if(a)return a(d,f).value}else return;return d[f]};return cC=function c(){var d,f,p,g,x,b,j=arguments[0],S=1,_=arguments.length,T=!1;for(typeof j=="boolean"&&(T=j,j=arguments[1]||{},S=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});S<_;++S)if(d=arguments[S],d!=null)for(f in d)p=l(j,f),g=l(d,f),j!==g&&(T&&g&&(s(g)||(x=i(g)))?(x?(x=!1,b=p&&i(p)?p:[]):b=p&&s(p)?p:{},o(j,{name:f,newValue:c(T,b,g)})):typeof g<"u"&&o(j,{name:f,newValue:g}));return j},cC}var Zne=Jne();const uC=Wn(Zne);function OE(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function ere(){const t=[],e={run:n,use:a};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(c,...d){const f=t[++s];let p=-1;if(c){o(c);return}for(;++p<i.length;)(d[p]===null||d[p]===void 0)&&(d[p]=i[p]);i=d,f?tre(f,l)(...d):o(null,...d)}}function a(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function tre(t,e){let n;return a;function a(...o){const l=t.length>o.length;let c;l&&o.push(i);try{c=t.apply(this,o)}catch(d){const f=d;if(l&&n)throw f;return i(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(o,...l){n||(n=!0,e(o,...l))}function s(o){i(null,o)}}const wl={basename:nre,dirname:rre,extname:are,join:ire,sep:"/"};function nre(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ob(t);let n=0,a=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1);return a<0?"":t.slice(n,a)}if(e===t)return"";let o=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(a=i):(l=-1,a=o));return n===a?a=o:a<0&&(a=t.length),t.slice(n,a)}function rre(t){if(Ob(t),t.length===0)return".";let e=-1,n=t.length,a;for(;--n;)if(t.codePointAt(n)===47){if(a){e=n;break}}else a||(a=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function are(t){Ob(t);let e=t.length,n=-1,a=0,i=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){a=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===a+1?"":t.slice(i,n)}function ire(...t){let e=-1,n;for(;++e<t.length;)Ob(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":sre(n)}function sre(t){Ob(t);const e=t.codePointAt(0)===47;let n=ore(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function ore(t,e){let n="",a=0,i=-1,s=0,o=-1,l,c;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||a!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",a=0):(n=n.slice(0,c),a=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",a=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",a=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),a=o-i-1;i=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Ob(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const lre={cwd:cre};function cre(){return"/"}function DE(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function ure(t){if(typeof t=="string")t=new URL(t);else if(!DE(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return dre(t)}function dre(t){if(t.hostname!==""){const a=new TypeError('File URL host must be "localhost" or empty on darwin');throw a.code="ERR_INVALID_FILE_URL_HOST",a}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const a=e.codePointAt(n+2);if(a===70||a===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const dC=["history","path","basename","stem","extname","dirname"];class Oq{constructor(e){let n;e?DE(e)?n={path:e}:typeof e=="string"||hre(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":lre.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let a=-1;for(;++a<dC.length;){const s=dC[a];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)dC.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?wl.basename(this.path):void 0}set basename(e){fC(e,"basename"),hC(e,"basename"),this.path=wl.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?wl.dirname(this.path):void 0}set dirname(e){dR(this.basename,"dirname"),this.path=wl.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?wl.extname(this.path):void 0}set extname(e){if(hC(e,"extname"),dR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=wl.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){DE(e)&&(e=ure(e)),fC(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?wl.basename(this.path,this.extname):void 0}set stem(e){fC(e,"stem"),hC(e,"stem"),this.path=wl.join(this.dirname||"",e+(this.extname||""))}fail(e,n,a){const i=this.message(e,n,a);throw i.fatal=!0,i}info(e,n,a){const i=this.message(e,n,a);return i.fatal=void 0,i}message(e,n,a){const i=new gi(e,n,a);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function hC(t,e){if(t&&t.includes(wl.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+wl.sep+"`")}function fC(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function dR(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function hre(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const fre=function(t){const a=this.constructor.prototype,i=a[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,a),s},pre={}.hasOwnProperty;class oD extends fre{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ere()}copy(){const e=new oD;let n=-1;for(;++n<this.attachers.length;){const a=this.attachers[n];e.use(...a)}return e.data(uC(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(gC("data",this.frozen),this.namespace[e]=n,this):pre.call(this.namespace,e)&&this.namespace[e]||void 0:e?(gC("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...a]=this.attachers[this.freezeIndex];if(a[0]===!1)continue;a[0]===!0&&(a[0]=void 0);const i=n.call(e,...a);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=gj(e),a=this.parser||this.Parser;return pC("parse",a),a(String(n),n)}process(e,n){const a=this;return this.freeze(),pC("process",this.parser||this.Parser),mC("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const l=gj(e),c=a.parse(l);a.run(c,l,function(f,p,g){if(f||!p||!g)return d(f);const x=p,b=a.stringify(x,g);yre(b)?g.value=b:g.result=b,d(f,g)});function d(f,p){f||!p?o(f):s?s(p):n(void 0,p)}}}processSync(e){let n=!1,a;return this.freeze(),pC("processSync",this.parser||this.Parser),mC("processSync",this.compiler||this.Compiler),this.process(e,i),fR("processSync","process",n),a;function i(s,o){n=!0,cR(s),a=o}}run(e,n,a){hR(e),this.freeze();const i=this.transformers;return!a&&typeof n=="function"&&(a=n,n=void 0),a?s(void 0,a):new Promise(s);function s(o,l){const c=gj(n);i.run(e,c,d);function d(f,p,g){const x=p||e;f?l(f):o?o(x):a(void 0,x,g)}}}runSync(e,n){let a=!1,i;return this.run(e,n,s),fR("runSync","run",a),i;function s(o,l){cR(o),i=l,a=!0}}stringify(e,n){this.freeze();const a=gj(n),i=this.compiler||this.Compiler;return mC("stringify",i),hR(e),i(e,a)}use(e,...n){const a=this.attachers,i=this.namespace;if(gC("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[f,...p]=d;c(f,p)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=uC(!0,i.settings,d.settings))}function l(d){let f=-1;if(d!=null)if(Array.isArray(d))for(;++f<d.length;){const p=d[f];s(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,f){let p=-1,g=-1;for(;++p<a.length;)if(a[p][0]===d){g=p;break}if(g===-1)a.push([d,...f]);else if(f.length>0){let[x,...b]=f;const j=a[g][1];OE(j)&&OE(x)&&(x=uC(!0,j,x)),a[g]=[d,x,...b]}}}}const mre=new oD().freeze();function pC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function mC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function gC(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function hR(t){if(!OE(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function fR(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function gj(t){return gre(t)?t:new Oq(t)}function gre(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function yre(t){return typeof t=="string"||xre(t)}function xre(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const vre="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",pR=[],mR={allowDangerousHtml:!0},bre=/^(https?|ircs?|mailto|xmpp)$/i,jre=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function wf(t){const e=wre(t),n=Nre(t);return Sre(e.runSync(e.parse(n),n),t)}function wre(t){const e=t.rehypePlugins||pR,n=t.remarkPlugins||pR,a=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...mR}:mR;return mre().use(rne).use(n).use(Xne,a).use(e)}function Nre(t){const e=t.children||"",n=new Oq;return typeof e=="string"&&(n.value=e),n}function Sre(t,e){const n=e.allowedElements,a=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||_re;for(const f of jre)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+vre+f.id,void 0);return sD(t,d),BZ(t,{Fragment:r.Fragment,components:i,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function d(f,p,g){if(f.type==="raw"&&g&&typeof p=="number")return o?g.children.splice(p,1):g.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let x;for(x in sC)if(Object.hasOwn(sC,x)&&Object.hasOwn(f.properties,x)){const b=f.properties[x],j=sC[x];(j===null||j.includes(f.tagName))&&(f.properties[x]=c(String(b||""),x,f))}}if(f.type==="element"){let x=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!x&&a&&typeof p=="number"&&(x=!a(f,p,g)),x&&g&&typeof p=="number")return l&&f.children?g.children.splice(p,1,...f.children):g.children.splice(p,1),p}}}function _re(t){const e=t.indexOf(":"),n=t.indexOf("?"),a=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||a!==-1&&e>a||bre.test(t.slice(0,e))?t:""}function gR(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let a=0,i=n.indexOf(e);for(;i!==-1;)a++,i=n.indexOf(e,i+e.length);return a}function Cre(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Tre(t,e,n){const i=VN((n||{}).ignore||[]),s=kre(e);let o=-1;for(;++o<s.length;)Pq(t,"text",l);function l(d,f){let p=-1,g;for(;++p<f.length;){const x=f[p],b=g?g.children:void 0;if(i(x,b?b.indexOf(x):void 0,g))return;g=x}if(g)return c(d,f)}function c(d,f){const p=f[f.length-1],g=s[o][0],x=s[o][1];let b=0;const S=p.children.indexOf(d);let _=!1,T=[];g.lastIndex=0;let C=g.exec(d.value);for(;C;){const E=C.index,k={index:C.index,input:C.input,stack:[...f,d]};let O=x(...C,k);if(typeof O=="string"&&(O=O.length>0?{type:"text",value:O}:void 0),O===!1?g.lastIndex=E+1:(b!==E&&T.push({type:"text",value:d.value.slice(b,E)}),Array.isArray(O)?T.push(...O):O&&T.push(O),b=E+C[0].length,_=!0),!g.global)break;C=g.exec(d.value)}return _?(b<d.value.length&&T.push({type:"text",value:d.value.slice(b)}),p.children.splice(S,1,...T)):T=[d],S+T.length}}function kre(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let a=-1;for(;++a<n.length;){const i=n[a];e.push([Are(i[0]),Ere(i[1])])}return e}function Are(t){return typeof t=="string"?new RegExp(Cre(t),"g"):t}function Ere(t){return typeof t=="function"?t:function(){return t}}const yC="phrasing",xC=["autolink","link","image","label"];function Pre(){return{transforms:[Fre],enter:{literalAutolink:Dre,literalAutolinkEmail:vC,literalAutolinkHttp:vC,literalAutolinkWww:vC},exit:{literalAutolink:Lre,literalAutolinkEmail:Rre,literalAutolinkHttp:Mre,literalAutolinkWww:Ire}}}function Ore(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:yC,notInConstruct:xC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:yC,notInConstruct:xC},{character:":",before:"[ps]",after:"\\/",inConstruct:yC,notInConstruct:xC}]}}function Dre(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function vC(t){this.config.enter.autolinkProtocol.call(this,t)}function Mre(t){this.config.exit.autolinkProtocol.call(this,t)}function Ire(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Rre(t){this.config.exit.autolinkEmail.call(this,t)}function Lre(t){this.exit(t)}function Fre(t){Tre(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,$re],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Bre]],{ignore:["link","linkReference"]})}function $re(t,e,n,a,i){let s="";if(!Dq(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!zre(n)))return!1;const o=qre(n+a);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function Bre(t,e,n,a){return!Dq(a,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function zre(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function qre(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],a=n.indexOf(")");const i=gR(t,"(");let s=gR(t,")");for(;a!==-1&&i>s;)t+=n.slice(0,a+1),n=n.slice(a+1),a=n.indexOf(")"),s++;return[t,n]}function Dq(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||jf(n)||zN(n))&&(!e||n!==47)}Mq.peek=Xre;function Ure(){this.buffer()}function Vre(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Hre(){this.buffer()}function Gre(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Wre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Fo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Yre(t){this.exit(t)}function Kre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Fo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Qre(t){this.exit(t)}function Xre(){return"["}function Mq(t,e,n,a){const i=n.createTracker(a);let s=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=i.move("]"),s}function Jre(){return{enter:{gfmFootnoteCallString:Ure,gfmFootnoteCall:Vre,gfmFootnoteDefinitionLabelString:Hre,gfmFootnoteDefinition:Gre},exit:{gfmFootnoteCallString:Wre,gfmFootnoteCall:Yre,gfmFootnoteDefinitionLabelString:Kre,gfmFootnoteDefinition:Qre}}}function Zre(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Mq},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(a,i,s,o){const l=s.createTracker(o);let c=l.move("[^");const d=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(a),{before:c,after:"]"})),f(),c+=l.move("]:"),a.children&&a.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(a,l.current()),e?Iq:eae))),d(),c}}function eae(t,e,n){return e===0?t:Iq(t,e,n)}function Iq(t,e,n){return(n?"":"    ")+t}const tae=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Rq.peek=sae;function nae(){return{canContainEols:["delete"],enter:{strikethrough:aae},exit:{strikethrough:iae}}}function rae(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:tae}],handlers:{delete:Rq}}}function aae(t){this.enter({type:"delete",children:[]},t)}function iae(t){this.exit(t)}function Rq(t,e,n,a){const i=n.createTracker(a),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function sae(){return"~"}function oae(t){return t.length}function lae(t,e){const n=e||{},a=(n.align||[]).concat(),i=n.stringLength||oae,s=[],o=[],l=[],c=[];let d=0,f=-1;for(;++f<t.length;){const j=[],S=[];let _=-1;for(t[f].length>d&&(d=t[f].length);++_<t[f].length;){const T=cae(t[f][_]);if(n.alignDelimiters!==!1){const C=i(T);S[_]=C,(c[_]===void 0||C>c[_])&&(c[_]=C)}j.push(T)}o[f]=j,l[f]=S}let p=-1;if(typeof a=="object"&&"length"in a)for(;++p<d;)s[p]=yR(a[p]);else{const j=yR(a);for(;++p<d;)s[p]=j}p=-1;const g=[],x=[];for(;++p<d;){const j=s[p];let S="",_="";j===99?(S=":",_=":"):j===108?S=":":j===114&&(_=":");let T=n.alignDelimiters===!1?1:Math.max(1,c[p]-S.length-_.length);const C=S+"-".repeat(T)+_;n.alignDelimiters!==!1&&(T=S.length+T+_.length,T>c[p]&&(c[p]=T),x[p]=T),g[p]=C}o.splice(1,0,g),l.splice(1,0,x),f=-1;const b=[];for(;++f<o.length;){const j=o[f],S=l[f];p=-1;const _=[];for(;++p<d;){const T=j[p]||"";let C="",E="";if(n.alignDelimiters!==!1){const k=c[p]-(S[p]||0),O=s[p];O===114?C=" ".repeat(k):O===99?k%2?(C=" ".repeat(k/2+.5),E=" ".repeat(k/2-.5)):(C=" ".repeat(k/2),E=C):E=" ".repeat(k)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(C),_.push(T),n.alignDelimiters!==!1&&_.push(E),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&_.push("|")}b.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return b.join(`
`)}function cae(t){return t==null?"":String(t)}function yR(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function uae(t,e,n,a){const i=n.enter("blockquote"),s=n.createTracker(a);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),dae);return i(),o}function dae(t,e,n){return">"+(n?"":" ")+t}function hae(t,e){return xR(t,e.inConstruct,!0)&&!xR(t,e.notInConstruct,!1)}function xR(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let a=-1;for(;++a<e.length;)if(t.includes(e[a]))return!0;return!1}function vR(t,e,n,a){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&hae(n.stack,n.unsafe[i]))return/[ \t]/.test(a.before)?"":" ";return`\\
`}function fae(t,e){const n=String(t);let a=n.indexOf(e),i=a,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;a!==-1;)a===i?++s>o&&(o=s):s=1,i=a+e.length,a=n.indexOf(e,i);return o}function pae(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function mae(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function gae(t,e,n,a){const i=mae(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(pae(t,n)){const p=n.enter("codeIndented"),g=n.indentLines(s,yae);return p(),g}const l=n.createTracker(a),c=i.repeat(Math.max(fae(s,i)+1,3)),d=n.enter("codeFenced");let f=l.move(c);if(t.lang){const p=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...l.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...l.current()})),p()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),d(),f}function yae(t,e,n){return(n?"":"    ")+t}function lD(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function xae(t,e,n,a){const i=lD(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(a);let d=c.move("[");return d+=c.move(n.safe(n.associationId(t),{before:d,after:"]",...c.current()})),d+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+i),d+=c.move(n.safe(t.title,{before:d,after:i,...c.current()})),d+=c.move(i),l()),o(),d}function vae(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Pv(t){return"&#x"+t.toString(16).toUpperCase()+";"}function xw(t,e,n){const a=ng(t),i=ng(e);return a===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:a===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Lq.peek=bae;function Lq(t,e,n,a){const i=vae(n),s=n.enter("emphasis"),o=n.createTracker(a),l=o.move(i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const d=c.charCodeAt(0),f=xw(a.before.charCodeAt(a.before.length-1),d,i);f.inside&&(c=Pv(d)+c.slice(1));const p=c.charCodeAt(c.length-1),g=xw(a.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+Pv(p));const x=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function bae(t,e,n){return n.options.emphasis||"*"}function jae(t,e){let n=!1;return sD(t,function(a){if("value"in a&&/\r?\n|\r/.test(a.value)||a.type==="break")return n=!0,EE}),!!((!t.depth||t.depth<3)&&ZO(t)&&(e.options.setext||n))}function wae(t,e,n,a){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(a);if(jae(t,n)){const f=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return p(),f(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(d)&&(d=Pv(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,n.options.closeAtx&&(d+=" "+o),c(),l(),d}Fq.peek=Nae;function Fq(t){return t.value||""}function Nae(){return"<"}$q.peek=Sae;function $q(t,e,n,a){const i=lD(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(a);let d=c.move("![");return d+=c.move(n.safe(t.alt,{before:d,after:"]",...c.current()})),d+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+i),d+=c.move(n.safe(t.title,{before:d,after:i,...c.current()})),d+=c.move(i),l()),d+=c.move(")"),o(),d}function Sae(){return"!"}Bq.peek=_ae;function Bq(t,e,n,a){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("![");const d=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),i==="full"||!d||d!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function _ae(){return"!"}zq.peek=Cae;function zq(t,e,n){let a=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(a);)i+="`";for(/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^`|`$/.test(a))&&(a=" "+a+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(a);){let d=c.index;a.charCodeAt(d)===10&&a.charCodeAt(d-1)===13&&d--,a=a.slice(0,d)+" "+a.slice(c.index+1)}}return i+a+i}function Cae(){return"`"}function qq(t,e){const n=ZO(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Uq.peek=Tae;function Uq(t,e,n,a){const i=lD(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(a);let l,c;if(qq(t,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let p=o.move("<");return p+=o.move(n.containerPhrasing(t,{before:p,after:">",...o.current()})),p+=o.move(">"),l(),n.stack=f,p}l=n.enter("link"),c=n.enter("label");let d=o.move("[");return d+=o.move(n.containerPhrasing(t,{before:d,after:"](",...o.current()})),d+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(n.safe(t.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(c=n.enter("destinationRaw"),d+=o.move(n.safe(t.url,{before:d,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),d+=o.move(" "+i),d+=o.move(n.safe(t.title,{before:d,after:i,...o.current()})),d+=o.move(i),c()),d+=o.move(")"),l(),d}function Tae(t,e,n){return qq(t,n)?"<":"["}Vq.peek=kae;function Vq(t,e,n,a){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("[");const d=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),i==="full"||!d||d!==p?c+=l.move(p+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function kae(){return"["}function cD(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Aae(t){const e=cD(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Eae(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Hq(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Pae(t,e,n,a){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?Eae(n):cD(n);const l=t.ordered?o==="."?")":".":Aae(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),Hq(n)===o&&f){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const d=n.containerFlow(t,a);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),d}function Oae(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Dae(t,e,n,a){const i=Oae(n);let s=n.bulletCurrent||cD(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(a);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,l.current()),f);return c(),d;function f(p,g,x){return g?(x?"":" ".repeat(o))+p:(x?s:s+" ".repeat(o-s.length))+p}}function Mae(t,e,n,a){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,a);return s(),i(),o}const Iae=VN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Rae(t,e,n,a){return(t.children.some(function(o){return Iae(o)})?n.containerPhrasing:n.containerFlow).call(n,t,a)}function Lae(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Gq.peek=Fae;function Gq(t,e,n,a){const i=Lae(n),s=n.enter("strong"),o=n.createTracker(a),l=o.move(i+i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const d=c.charCodeAt(0),f=xw(a.before.charCodeAt(a.before.length-1),d,i);f.inside&&(c=Pv(d)+c.slice(1));const p=c.charCodeAt(c.length-1),g=xw(a.after.charCodeAt(0),p,i);g.inside&&(c=c.slice(0,-1)+Pv(p));const x=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:f.outside},l+c+x}function Fae(t,e,n){return n.options.strong||"*"}function $ae(t,e,n,a){return n.safe(t.value,a)}function Bae(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function zae(t,e,n){const a=(Hq(n)+(n.options.ruleSpaces?" ":"")).repeat(Bae(n));return n.options.ruleSpaces?a.slice(0,-1):a}const Wq={blockquote:uae,break:vR,code:gae,definition:xae,emphasis:Lq,hardBreak:vR,heading:wae,html:Fq,image:$q,imageReference:Bq,inlineCode:zq,link:Uq,linkReference:Vq,list:Pae,listItem:Dae,paragraph:Mae,root:Rae,strong:Gq,text:$ae,thematicBreak:zae};function qae(){return{enter:{table:Uae,tableData:bR,tableHeader:bR,tableRow:Hae},exit:{codeText:Gae,table:Vae,tableData:bC,tableHeader:bC,tableRow:bC}}}function Uae(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Vae(t){this.exit(t),this.data.inTable=void 0}function Hae(t){this.enter({type:"tableRow",children:[]},t)}function bC(t){this.exit(t)}function bR(t){this.enter({type:"tableCell",children:[]},t)}function Gae(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Wae));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Wae(t,e){return e==="|"?e:t}function Yae(t){const e=t||{},n=e.tableCellPadding,a=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:o,tableCell:c,tableRow:l}};function o(x,b,j,S){return d(f(x,j,S),x.align)}function l(x,b,j,S){const _=p(x,j,S),T=d([_]);return T.slice(0,T.indexOf(`
`))}function c(x,b,j,S){const _=j.enter("tableCell"),T=j.enter("phrasing"),C=j.containerPhrasing(x,{...S,before:s,after:s});return T(),_(),C}function d(x,b){return lae(x,{align:b,alignDelimiters:a,padding:n,stringLength:i})}function f(x,b,j){const S=x.children;let _=-1;const T=[],C=b.enter("table");for(;++_<S.length;)T[_]=p(S[_],b,j);return C(),T}function p(x,b,j){const S=x.children;let _=-1;const T=[],C=b.enter("tableRow");for(;++_<S.length;)T[_]=c(S[_],x,b,j);return C(),T}function g(x,b,j){let S=Wq.inlineCode(x,b,j);return j.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function Kae(){return{exit:{taskListCheckValueChecked:jR,taskListCheckValueUnchecked:jR,paragraph:Xae}}}function Qae(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Jae}}}function jR(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Xae(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const a=n.children[0];if(a&&a.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const l=i[s];if(l.type==="paragraph"){o=l;break}}o===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}}this.exit(t)}function Jae(t,e,n,a){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(a);s&&l.move(o);let c=Wq.listItem(t,e,n,{...a,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),c;function d(f){return f+o}}function Zae(){return[Pre(),Jre(),nae(),qae(),Kae()]}function eie(t){return{extensions:[Ore(),Zre(t),rae(),Yae(t),Qae()]}}const tie={tokenize:oie,partial:!0},Yq={tokenize:lie,partial:!0},Kq={tokenize:cie,partial:!0},Qq={tokenize:uie,partial:!0},nie={tokenize:die,partial:!0},Xq={name:"wwwAutolink",tokenize:iie,previous:Zq},Jq={name:"protocolAutolink",tokenize:sie,previous:eU},Uc={name:"emailAutolink",tokenize:aie,previous:tU},Fl={};function rie(){return{text:Fl}}let $h=48;for(;$h<123;)Fl[$h]=Uc,$h++,$h===58?$h=65:$h===91&&($h=97);Fl[43]=Uc;Fl[45]=Uc;Fl[46]=Uc;Fl[95]=Uc;Fl[72]=[Uc,Jq];Fl[104]=[Uc,Jq];Fl[87]=[Uc,Xq];Fl[119]=[Uc,Xq];function aie(t,e,n){const a=this;let i,s;return o;function o(p){return!ME(p)||!tU.call(a,a.previous)||uD(a.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(p))}function l(p){return ME(p)?(t.consume(p),l):p===64?(t.consume(p),c):n(p)}function c(p){return p===46?t.check(nie,f,d)(p):p===45||p===95||pi(p)?(s=!0,t.consume(p),c):f(p)}function d(p){return t.consume(p),i=!0,c}function f(p){return s&&i&&Ii(a.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function iie(t,e,n){const a=this;return i;function i(o){return o!==87&&o!==119||!Zq.call(a,a.previous)||uD(a.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(tie,t.attempt(Yq,t.attempt(Kq,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function sie(t,e,n){const a=this;let i="",s=!1;return o;function o(p){return(p===72||p===104)&&eU.call(a,a.previous)&&!uD(a.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),t.consume(p),l):n(p)}function l(p){if(Ii(p)&&i.length<5)return i+=String.fromCodePoint(p),t.consume(p),l;if(p===58){const g=i.toLowerCase();if(g==="http"||g==="https")return t.consume(p),c}return n(p)}function c(p){return p===47?(t.consume(p),s?d:(s=!0,c)):n(p)}function d(p){return p===null||mw(p)||Tr(p)||jf(p)||zN(p)?n(p):t.attempt(Yq,t.attempt(Kq,f),n)(p)}function f(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function oie(t,e,n){let a=0;return i;function i(o){return(o===87||o===119)&&a<3?(a++,t.consume(o),i):o===46&&a===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function lie(t,e,n){let a,i,s;return o;function o(d){return d===46||d===95?t.check(Qq,c,l)(d):d===null||Tr(d)||jf(d)||d!==45&&zN(d)?c(d):(s=!0,t.consume(d),o)}function l(d){return d===95?a=!0:(i=a,a=void 0),t.consume(d),o}function c(d){return i||a||!s?n(d):e(d)}}function cie(t,e){let n=0,a=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&a<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Qq,e,s)(o):o===null||Tr(o)||jf(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&a++,t.consume(o),i}}function uie(t,e,n){return a;function a(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),a):l===38?(t.consume(l),s):l===93?(t.consume(l),i):l===60||l===null||Tr(l)||jf(l)?e(l):n(l)}function i(l){return l===null||l===40||l===91||Tr(l)||jf(l)?e(l):a(l)}function s(l){return Ii(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),a):Ii(l)?(t.consume(l),o):n(l)}}function die(t,e,n){return a;function a(s){return t.consume(s),i}function i(s){return pi(s)?n(s):e(s)}}function Zq(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Tr(t)}function eU(t){return!Ii(t)}function tU(t){return!(t===47||ME(t))}function ME(t){return t===43||t===45||t===46||t===95||pi(t)}function uD(t){let e=t.length,n=!1;for(;e--;){const a=t[e][1];if((a.type==="labelLink"||a.type==="labelImage")&&!a._balanced){n=!0;break}if(a._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const hie={tokenize:bie,partial:!0};function fie(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:yie,continuation:{tokenize:xie},exit:vie}},text:{91:{name:"gfmFootnoteCall",tokenize:gie},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:pie,resolveTo:mie}}}}function pie(t,e,n){const a=this;let i=a.events.length;const s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let o;for(;i--;){const c=a.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const d=Fo(a.sliceSerialize({start:o.end,end:a.now()}));return d.codePointAt(0)!==94||!s.includes(d.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function mie(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const a={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",a,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",a,e]];return t.splice(n,t.length-n+1,...l),t}function gie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s=0,o;return l;function l(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(s>999||p===93&&!o||p===null||p===91||Tr(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return i.includes(Fo(a.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return Tr(p)||(o=!0),s++,t.consume(p),p===92?f:d}function f(p){return p===91||p===92||p===93?(t.consume(p),s++,d):d(p)}}function yie(t,e,n){const a=this,i=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(b){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(b){return b===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(b)}function f(b){if(o>999||b===93&&!l||b===null||b===91||Tr(b))return n(b);if(b===93){t.exit("chunkString");const j=t.exit("gfmFootnoteDefinitionLabelString");return s=Fo(a.sliceSerialize(j)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return Tr(b)||(l=!0),o++,t.consume(b),b===92?p:f}function p(b){return b===91||b===92||b===93?(t.consume(b),o++,f):f(b)}function g(b){return b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),i.includes(s)||i.push(s),Hn(t,x,"gfmFootnoteDefinitionWhitespace")):n(b)}function x(b){return e(b)}}function xie(t,e,n){return t.check(Pb,e,t.attempt(hie,e,n))}function vie(t){t.exit("gfmFootnoteDefinition")}function bie(t,e,n){const a=this;return Hn(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=a.events[a.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function jie(t){let n=(t||{}).singleTilde;const a={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:a},insideSpan:{null:[a]},attentionMarkers:{null:[126]}};function i(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let d=c;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[c][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[c][1].end)},p={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[c][1].start)},g=[["enter",f,l],["enter",o[d][1],l],["exit",o[d][1],l],["enter",p,l]],x=l.parser.constructs.insideSpan.null;x&&Ds(g,g.length,0,qN(x,o.slice(d+1,c),l)),Ds(g,g.length,0,[["exit",p,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),Ds(o,d-1,c-d+3,g),c=d+g.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const d=this.previous,f=this.events;let p=0;return g;function g(b){return d===126&&f[f.length-1][1].type!=="characterEscape"?c(b):(o.enter("strikethroughSequenceTemporary"),x(b))}function x(b){const j=ng(d);if(b===126)return p>1?c(b):(o.consume(b),p++,x);if(p<2&&!n)return c(b);const S=o.exit("strikethroughSequenceTemporary"),_=ng(b);return S._open=!_||_===2&&!!j,S._close=!j||j===2&&!!_,l(b)}}}class wie{constructor(){this.map=[]}add(e,n,a){Nie(this,e,n,a)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const a=[];for(;n>0;)n-=1,a.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];a.push(e.slice()),e.length=0;let i=a.pop();for(;i;){for(const s of i)e.push(s);i=a.pop()}this.map.length=0}}function Nie(t,e,n,a){let i=0;if(!(n===0&&a.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...a);return}i+=1}t.map.push([e,n,a])}}function Sie(t,e){let n=!1;const a=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&a.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=a.length-1;a[s]=a[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return a}function _ie(){return{flow:{null:{name:"table",tokenize:Cie,resolveAll:Tie}}}}function Cie(t,e,n){const a=this;let i=0,s=0,o;return l;function l($){let L=a.events.length-1;for(;L>-1;){const ne=a.events[L][1].type;if(ne==="lineEnding"||ne==="linePrefix")L--;else break}const V=L>-1?a.events[L][1].type:null,H=V==="tableHead"||V==="tableRow"?O:c;return H===O&&a.parser.lazy[a.now().line]?n($):H($)}function c($){return t.enter("tableHead"),t.enter("tableRow"),d($)}function d($){return $===124||(o=!0,s+=1),f($)}function f($){return $===null?n($):Qt($)?s>1?(s=0,a.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),x):n($):Dn($)?Hn(t,f,"whitespace")($):(s+=1,o&&(o=!1,i+=1),$===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),o=!0,f):(t.enter("data"),p($)))}function p($){return $===null||$===124||Tr($)?(t.exit("data"),f($)):(t.consume($),$===92?g:p)}function g($){return $===92||$===124?(t.consume($),p):p($)}function x($){return a.interrupt=!1,a.parser.lazy[a.now().line]?n($):(t.enter("tableDelimiterRow"),o=!1,Dn($)?Hn(t,b,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):b($))}function b($){return $===45||$===58?S($):$===124?(o=!0,t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),j):k($)}function j($){return Dn($)?Hn(t,S,"whitespace")($):S($)}function S($){return $===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),_):$===45?(s+=1,_($)):$===null||Qt($)?E($):k($)}function _($){return $===45?(t.enter("tableDelimiterFiller"),T($)):k($)}function T($){return $===45?(t.consume($),T):$===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C($))}function C($){return Dn($)?Hn(t,E,"whitespace")($):E($)}function E($){return $===124?b($):$===null||Qt($)?!o||i!==s?k($):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e($)):k($)}function k($){return n($)}function O($){return t.enter("tableRow"),I($)}function I($){return $===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),I):$===null||Qt($)?(t.exit("tableRow"),e($)):Dn($)?Hn(t,I,"whitespace")($):(t.enter("data"),F($))}function F($){return $===null||$===124||Tr($)?(t.exit("data"),I($)):(t.consume($),$===92?B:F)}function B($){return $===92||$===124?(t.consume($),F):F($)}}function Tie(t,e){let n=-1,a=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,d,f,p;const g=new wie;for(;++n<t.length;){const x=t[n],b=x[1];x[0]==="enter"?b.type==="tableHead"?(l=!1,c!==0&&(wR(g,e,c,d,f),f=void 0,c=0),d={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",d,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(a=!0,p=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},g.add(n,0,[["enter",f,e]])),i=b.type==="tableDelimiterRow"?2:f?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(a=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],p=yj(g,e,s,i,void 0,p),s=[0,0,0,0]),o[2]=n)):b.type==="tableCellDivider"&&(a?a=!1:(s[1]!==0&&(o[0]=o[1],p=yj(g,e,s,i,void 0,p)),s=o,o=[s[1],n,0,0])):b.type==="tableHead"?(l=!0,c=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],p=yj(g,e,s,i,n,p)):o[1]!==0&&(p=yj(g,e,o,i,n,p)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&wR(g,e,c,d,f),g.consume(e.events),n=-1;++n<e.events.length;){const x=e.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=Sie(e.events,n))}return t}function yj(t,e,n,a,i,s){const o=a===1?"tableHeader":a===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Cm(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=Cm(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const d=Cm(e.events,n[2]),f=Cm(e.events,n[3]),p={type:l,start:Object.assign({},d),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",p,e]]),a!==2){const g=e.events[n[2]],x=e.events[n[3]];if(g[1].end=Object.assign({},x[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,j=n[3]-n[2]-1;t.add(b,j,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return i!==void 0&&(s.end=Object.assign({},Cm(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function wR(t,e,n,a,i){const s=[],o=Cm(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),a.end=Object.assign({},o),s.push(["exit",a,e]),t.add(n+1,0,s)}function Cm(t,e){const n=t[e],a=n[0]==="enter"?"start":"end";return n[1][a]}const kie={name:"tasklistCheck",tokenize:Eie};function Aie(){return{text:{91:kie}}}function Eie(t,e,n){const a=this;return i;function i(c){return a.previous!==null||!a._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return Tr(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Qt(c)?e(c):Dn(c)?t.check({tokenize:Pie},e,n)(c):n(c)}}function Pie(t,e,n){return Hn(t,a,"whitespace");function a(i){return i===null?n(i):e(i)}}function Oie(t){return hq([rie(),fie(),jie(t),_ie(),Aie()])}const Die={};function Nf(t){const e=this,n=t||Die,a=e.data(),i=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),o=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);i.push(Oie(n)),s.push(Zae()),o.push(eie(n))}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Mie,Iie;function Rie(){return{geminiUrl:Mie,vertexUrl:Iie}}function Lie(t,e,n){var a,i,s;if(!(!((a=t.httpOptions)===null||a===void 0)&&a.baseUrl)){const o=Rie();return t.vertexai?(i=o.vertexUrl)!==null&&i!==void 0?i:e:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Db{}function un(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(a,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function D(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];D(f,e.slice(s+1),n[d])}else for(const d of c)D(d,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];D(c[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const a=e[e.length-1],i=t[a];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else t[a]=n}function P(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const a=e[n];if(a.endsWith("[]")){const i=a.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(o=>P(o,e.slice(n+1))):void 0}else return}else t=t[a]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function nU(t,e){const n=Wr(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function rU(t,e){return Array.isArray(e)?e.map(n=>vw(t,n)):[vw(t,e)]}function vw(t,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Fie(t,e){const n=vw(t,e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function $ie(t,e){const n=vw(t,e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function NR(t,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function aU(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>NR(t,n)):[NR(t,e)]}function IE(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function SR(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function _R(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ss(t,e){if(e==null)throw new Error("ContentUnion is required");return IE(e)?e:{role:"user",parts:aU(t,e)}}function iU(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const a=ss(t,n);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(t.isVertexAI()){const n=ss(t,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ss(t,n)):[ss(t,e)]}function gd(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(SR(e)||_R(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ss(t,e)]}const n=[],a=[],i=IE(e[0]);for(const s of e){const o=IE(s);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)n.push(s);else{if(SR(s)||_R(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");a.push(s)}}return i||n.push({role:"user",parts:aU(t,a)}),n}function sU(t,e){return e}function oU(t,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function GN(t,e){return e}function WN(t,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function Bie(t,e,n,a=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===a;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function yd(t,e){if(typeof e!="string")throw new Error("name must be a string");return Bie(t,e,"cachedContents")}function lU(t,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function xd(t,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function zie(t){return t!=null&&typeof t=="object"&&"name"in t}function qie(t){return t!=null&&typeof t=="object"&&"video"in t}function Uie(t){return t!=null&&typeof t=="object"&&"uri"in t}function cU(t,e){var n;let a;if(zie(e)&&(a=e.name),!(Uie(e)&&(a=e.uri,a===void 0))&&!(qie(e)&&(a=(n=e.video)===null||n===void 0?void 0:n.uri,a===void 0))){if(typeof e=="string"&&(a=e),a===void 0)throw new Error("Could not extract file name from the provided input.");if(a.startsWith("https://")){const s=a.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${a}`);a=s[0]}else a.startsWith("files/")&&(a=a.split("files/")[1]);return a}}function uU(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function dU(t,e){for(const n of["models","tunedModels","publisherModels"])if(Vie(e,n))return e[n];return[]}function Vie(t,e){return t!==null&&typeof t=="object"&&e in t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hie(t,e){const n={};if(P(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=P(e,["data"]);a!=null&&D(n,["data"],a);const i=P(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function Gie(t,e){const n={};if(P(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=P(e,["thought"]);a!=null&&D(n,["thought"],a);const i=P(e,["inlineData"]);i!=null&&D(n,["inlineData"],Hie(t,i));const s=P(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=P(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=P(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=P(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=P(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=P(e,["text"]);return f!=null&&D(n,["text"],f),n}function CR(t,e){const n={},a=P(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Gie(t,o))),D(n,["parts"],s)}const i=P(e,["role"]);return i!=null&&D(n,["role"],i),n}function Wie(){return{}}function Yie(t,e){const n={},a=P(e,["mode"]);a!=null&&D(n,["mode"],a);const i=P(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function Kie(t,e){const n={},a=P(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],Yie(t,a)),n}function Qie(t,e){const n={};if(P(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");P(e,["googleSearch"])!=null&&D(n,["googleSearch"],Wie());const i=P(e,["googleSearchRetrieval"]);if(i!=null&&D(n,["googleSearchRetrieval"],Kie(t,i)),P(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(P(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=P(e,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=P(e,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function Xie(t,e){const n={},a=P(e,["mode"]);a!=null&&D(n,["mode"],a);const i=P(e,["allowedFunctionNames"]);return i!=null&&D(n,["allowedFunctionNames"],i),n}function Jie(t,e){const n={},a=P(e,["functionCallingConfig"]);if(a!=null&&D(n,["functionCallingConfig"],Xie(t,a)),P(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function Zie(t,e,n){const a={},i=P(e,["ttl"]);n!==void 0&&i!=null&&D(n,["ttl"],i);const s=P(e,["expireTime"]);n!==void 0&&s!=null&&D(n,["expireTime"],s);const o=P(e,["displayName"]);n!==void 0&&o!=null&&D(n,["displayName"],o);const l=P(e,["contents"]);if(n!==void 0&&l!=null){let p=gd(t,l);Array.isArray(p)&&(p=p.map(g=>CR(t,g))),D(n,["contents"],p)}const c=P(e,["systemInstruction"]);n!==void 0&&c!=null&&D(n,["systemInstruction"],CR(t,ss(t,c)));const d=P(e,["tools"]);if(n!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>Qie(t,g))),D(n,["tools"],p)}const f=P(e,["toolConfig"]);return n!==void 0&&f!=null&&D(n,["toolConfig"],Jie(t,f)),a}function ese(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["model"],nU(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],Zie(t,i,n)),n}function tse(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["_url","name"],yd(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function nse(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["_url","name"],yd(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function rse(t,e,n){const a={},i=P(e,["ttl"]);n!==void 0&&i!=null&&D(n,["ttl"],i);const s=P(e,["expireTime"]);return n!==void 0&&s!=null&&D(n,["expireTime"],s),a}function ase(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["_url","name"],yd(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],rse(t,i,n)),n}function ise(t,e,n){const a={},i=P(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=P(e,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),a}function sse(t,e){const n={},a=P(e,["config"]);return a!=null&&D(n,["config"],ise(t,a,n)),n}function ose(t,e){const n={},a=P(e,["displayName"]);a!=null&&D(n,["displayName"],a);const i=P(e,["data"]);i!=null&&D(n,["data"],i);const s=P(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function lse(t,e){const n={},a=P(e,["videoMetadata"]);a!=null&&D(n,["videoMetadata"],a);const i=P(e,["thought"]);i!=null&&D(n,["thought"],i);const s=P(e,["inlineData"]);s!=null&&D(n,["inlineData"],ose(t,s));const o=P(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=P(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=P(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=P(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=P(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=P(e,["text"]);return p!=null&&D(n,["text"],p),n}function TR(t,e){const n={},a=P(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>lse(t,o))),D(n,["parts"],s)}const i=P(e,["role"]);return i!=null&&D(n,["role"],i),n}function cse(){return{}}function use(t,e){const n={},a=P(e,["mode"]);a!=null&&D(n,["mode"],a);const i=P(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function dse(t,e){const n={},a=P(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],use(t,a)),n}function hse(){return{}}function fse(t,e){const n={},a=P(e,["apiKeyString"]);return a!=null&&D(n,["apiKeyString"],a),n}function pse(t,e){const n={},a=P(e,["apiKeyConfig"]);a!=null&&D(n,["apiKeyConfig"],fse(t,a));const i=P(e,["authType"]);i!=null&&D(n,["authType"],i);const s=P(e,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=P(e,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=P(e,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=P(e,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function mse(t,e){const n={},a=P(e,["authConfig"]);return a!=null&&D(n,["authConfig"],pse(t,a)),n}function gse(t,e){const n={},a=P(e,["retrieval"]);a!=null&&D(n,["retrieval"],a),P(e,["googleSearch"])!=null&&D(n,["googleSearch"],cse());const s=P(e,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],dse(t,s)),P(e,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],hse());const l=P(e,["googleMaps"]);l!=null&&D(n,["googleMaps"],mse(t,l));const c=P(e,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const d=P(e,["functionDeclarations"]);return d!=null&&D(n,["functionDeclarations"],d),n}function yse(t,e){const n={},a=P(e,["mode"]);a!=null&&D(n,["mode"],a);const i=P(e,["allowedFunctionNames"]);return i!=null&&D(n,["allowedFunctionNames"],i),n}function xse(t,e){const n={},a=P(e,["latitude"]);a!=null&&D(n,["latitude"],a);const i=P(e,["longitude"]);return i!=null&&D(n,["longitude"],i),n}function vse(t,e){const n={},a=P(e,["latLng"]);return a!=null&&D(n,["latLng"],xse(t,a)),n}function bse(t,e){const n={},a=P(e,["functionCallingConfig"]);a!=null&&D(n,["functionCallingConfig"],yse(t,a));const i=P(e,["retrievalConfig"]);return i!=null&&D(n,["retrievalConfig"],vse(t,i)),n}function jse(t,e,n){const a={},i=P(e,["ttl"]);n!==void 0&&i!=null&&D(n,["ttl"],i);const s=P(e,["expireTime"]);n!==void 0&&s!=null&&D(n,["expireTime"],s);const o=P(e,["displayName"]);n!==void 0&&o!=null&&D(n,["displayName"],o);const l=P(e,["contents"]);if(n!==void 0&&l!=null){let p=gd(t,l);Array.isArray(p)&&(p=p.map(g=>TR(t,g))),D(n,["contents"],p)}const c=P(e,["systemInstruction"]);n!==void 0&&c!=null&&D(n,["systemInstruction"],TR(t,ss(t,c)));const d=P(e,["tools"]);if(n!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>gse(t,g))),D(n,["tools"],p)}const f=P(e,["toolConfig"]);return n!==void 0&&f!=null&&D(n,["toolConfig"],bse(t,f)),a}function wse(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["model"],nU(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],jse(t,i,n)),n}function Nse(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["_url","name"],yd(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function Sse(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["_url","name"],yd(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function _se(t,e,n){const a={},i=P(e,["ttl"]);n!==void 0&&i!=null&&D(n,["ttl"],i);const s=P(e,["expireTime"]);return n!==void 0&&s!=null&&D(n,["expireTime"],s),a}function Cse(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["_url","name"],yd(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],_se(t,i,n)),n}function Tse(t,e,n){const a={},i=P(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=P(e,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),a}function kse(t,e){const n={},a=P(e,["config"]);return a!=null&&D(n,["config"],Tse(t,a,n)),n}function Jj(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=P(e,["model"]);s!=null&&D(n,["model"],s);const o=P(e,["createTime"]);o!=null&&D(n,["createTime"],o);const l=P(e,["updateTime"]);l!=null&&D(n,["updateTime"],l);const c=P(e,["expireTime"]);c!=null&&D(n,["expireTime"],c);const d=P(e,["usageMetadata"]);return d!=null&&D(n,["usageMetadata"],d),n}function Ase(){return{}}function Ese(t,e){const n={},a=P(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=P(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Jj(t,o))),D(n,["cachedContents"],s)}return n}function Zj(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=P(e,["model"]);s!=null&&D(n,["model"],s);const o=P(e,["createTime"]);o!=null&&D(n,["createTime"],o);const l=P(e,["updateTime"]);l!=null&&D(n,["updateTime"],l);const c=P(e,["expireTime"]);c!=null&&D(n,["expireTime"],c);const d=P(e,["usageMetadata"]);return d!=null&&D(n,["usageMetadata"],d),n}function Pse(){return{}}function Ose(t,e){const n={},a=P(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=P(e,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Zj(t,o))),D(n,["cachedContents"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rg;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(rg||(rg={}));class YN{constructor(e,n,a,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,a,i)}init(e,n,a){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};a?typeof a=="object"?o=Object.assign({},a):o=a:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(kR||(kR={}));var AR;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(AR||(AR={}));var ER;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(ER||(ER={}));var PR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(PR||(PR={}));var OR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(OR||(OR={}));var DR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(DR||(DR={}));var MR;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(MR||(MR={}));var ag;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT"})(ag||(ag={}));var IR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY"})(IR||(IR={}));var RR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(RR||(RR={}));var LR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(LR||(LR={}));var FR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(FR||(FR={}));var $R;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($R||($R={}));var hd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(hd||(hd={}));var BR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(BR||(BR={}));var RE;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(RE||(RE={}));var zR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(zR||(zR={}));var qR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(qR||(qR={}));var UR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(UR||(UR={}));var VR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(VR||(VR={}));var HR;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(HR||(HR={}));var GR;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(GR||(GR={}));var WR;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(WR||(WR={}));var YR;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(YR||(YR={}));var KR;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(KR||(KR={}));var QR;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(QR||(QR={}));var XR;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(XR||(XR={}));var JR;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(JR||(JR={}));var ZR;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(ZR||(ZR={}));var e4;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(e4||(e4={}));var t4;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(t4||(t4={}));var n4;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(n4||(n4={}));var r4;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(r4||(r4={}));var a4;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(a4||(a4={}));class xj{get text(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const g of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,b]of Object.entries(g))x!=="text"&&x!=="thought"&&(b!==null||b!==void 0)&&p.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(p))g!=="inlineData"&&(x!==null||x!==void 0)&&f.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,a,i,s,o,l,c;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,a,i,s,o,l,c,d;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,a,i,s,o,l,c,d;if(((i=(a=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||a===void 0?void 0:a.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class i4{}class s4{}class Dse{}class Mse{}class o4{}class l4{}class c4{}class Ise{}class u4{}class d4{}class h4{}class Rse{}class LE{constructor(e){const n={};for(const a of e.headers.entries())n[a[0]]=a[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Lse{}class Fse{}class $se{get text(){var e,n,a;let i="",s=!1;const o=[];for(const l of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,i+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,a;let i="";const s=[];for(const o of(a=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&a!==void 0?a:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&s.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bse extends Db{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new YN(rg.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(n),n)}async create(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=wse(this.apiClient,e);return l=un("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}else{const d=ese(this.apiClient,e);return l=un("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Jj(this.apiClient,f))}}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Nse(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}else{const d=tse(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Jj(this.apiClient,f))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Sse(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Pse(),p=new d4;return Object.assign(p,f),p})}else{const d=nse(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Ase(),p=new d4;return Object.assign(p,f),p})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Cse(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}else{const d=ase(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Jj(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=kse(this.apiClient,e);return l=un("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Ose(this.apiClient,f),g=new h4;return Object.assign(g,p),g})}else{const d=sse(this.apiClient,e);return l=un("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Ese(this.apiClient,f),g=new h4;return Object.assign(g,p),g})}}}function f4(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],a=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hi(t){return this instanceof hi?(this.v=t,this):new hi(t)}function bw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(x){return function(b){return Promise.resolve(b).then(x,p)}}function l(x,b){a[x]&&(i[x]=function(j){return new Promise(function(S,_){s.push([x,j,S,_])>1||c(x,j)})},b&&(i[x]=b(i[x])))}function c(x,b){try{d(a[x](b))}catch(j){g(s[0][3],j)}}function d(x){x.value instanceof hi?Promise.resolve(x.value.v).then(f,p):g(s[0][2],x)}function f(x){c("next",x)}function p(x){c("throw",x)}function g(x,b){x(b),s.shift(),s.length&&c(s[0][0],s[0][1])}}function FE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof f4=="function"?f4(t):t[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(s){n[s]=t[s]&&function(o){return new Promise(function(l,c){o=t[s](o),i(l,c,o.done,o.value)})}}function i(s,o,l,c){Promise.resolve(c).then(function(d){s({value:d,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zse(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:hU(n)}function hU(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function qse(t){if(t.length!==0){if(t[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Use(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let a=0,i=t[0];for(;a<n;)if(t[a].role==="user")i=t[a],a++;else{const s=[];let o=!0;for(;a<n&&t[a].role==="model";)s.push(t[a]),o&&!hU(t[a])&&(o=!1),a++;o&&(e.push(i),e.push(...s))}return e}class Vse{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Hse(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class Hse{constructor(e,n,a,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=a,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),qse(s)}async sendMessage(e){var n;await this.sendPromise;const a=ss(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o;const c=(o=(s=(await i).candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,d=c?[c]:[];this.recordHistory(a,d)})(),await this.sendPromise,i}async sendMessageStream(e){var n;await this.sendPromise;const a=ss(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,a)}getHistory(e=!1){return e?Use(this.history):this.history}processStreamResponse(e,n){var a,i;return bw(this,arguments,function*(){var o,l,c,d;const f=[];try{for(var p=!0,g=FE(e),x;x=yield hi(g.next()),o=x.done,!o;p=!0){d=x.value,p=!1;const b=d;if(zse(b)){const j=(i=(a=b.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content;j!==void 0&&f.push(j)}yield yield hi(b)}}catch(b){l={error:b}}finally{try{!p&&!o&&(c=g.return)&&(yield hi(c.call(g)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(e,n){let a=[];n.length>0&&n.every(i=>i.role==="model")?a=n:a.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gse(t,e,n){const a={},i=P(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=P(e,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),a}function Wse(t,e){const n={},a=P(e,["config"]);return a!=null&&D(n,["config"],Gse(t,a,n)),n}function Yse(t,e){const n={},a=P(e,["details"]);a!=null&&D(n,["details"],a);const i=P(e,["message"]);i!=null&&D(n,["message"],i);const s=P(e,["code"]);return s!=null&&D(n,["code"],s),n}function Kse(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=P(e,["mimeType"]);s!=null&&D(n,["mimeType"],s);const o=P(e,["sizeBytes"]);o!=null&&D(n,["sizeBytes"],o);const l=P(e,["createTime"]);l!=null&&D(n,["createTime"],l);const c=P(e,["expirationTime"]);c!=null&&D(n,["expirationTime"],c);const d=P(e,["updateTime"]);d!=null&&D(n,["updateTime"],d);const f=P(e,["sha256Hash"]);f!=null&&D(n,["sha256Hash"],f);const p=P(e,["uri"]);p!=null&&D(n,["uri"],p);const g=P(e,["downloadUri"]);g!=null&&D(n,["downloadUri"],g);const x=P(e,["state"]);x!=null&&D(n,["state"],x);const b=P(e,["source"]);b!=null&&D(n,["source"],b);const j=P(e,["videoMetadata"]);j!=null&&D(n,["videoMetadata"],j);const S=P(e,["error"]);return S!=null&&D(n,["error"],Yse(t,S)),n}function Qse(t,e){const n={},a=P(e,["file"]);a!=null&&D(n,["file"],Kse(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function Xse(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["_url","file"],cU(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function Jse(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["_url","file"],cU(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function Zse(t,e){const n={},a=P(e,["details"]);a!=null&&D(n,["details"],a);const i=P(e,["message"]);i!=null&&D(n,["message"],i);const s=P(e,["code"]);return s!=null&&D(n,["code"],s),n}function $E(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=P(e,["mimeType"]);s!=null&&D(n,["mimeType"],s);const o=P(e,["sizeBytes"]);o!=null&&D(n,["sizeBytes"],o);const l=P(e,["createTime"]);l!=null&&D(n,["createTime"],l);const c=P(e,["expirationTime"]);c!=null&&D(n,["expirationTime"],c);const d=P(e,["updateTime"]);d!=null&&D(n,["updateTime"],d);const f=P(e,["sha256Hash"]);f!=null&&D(n,["sha256Hash"],f);const p=P(e,["uri"]);p!=null&&D(n,["uri"],p);const g=P(e,["downloadUri"]);g!=null&&D(n,["downloadUri"],g);const x=P(e,["state"]);x!=null&&D(n,["state"],x);const b=P(e,["source"]);b!=null&&D(n,["source"],b);const j=P(e,["videoMetadata"]);j!=null&&D(n,["videoMetadata"],j);const S=P(e,["error"]);return S!=null&&D(n,["error"],Zse(t,S)),n}function eoe(t,e){const n={},a=P(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=P(e,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>$E(t,o))),D(n,["files"],s)}return n}function toe(){return{}}function noe(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class roe extends Db{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new YN(rg.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>$E(this.apiClient,n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Wse(this.apiClient,e);return s=un("files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=eoe(this.apiClient,c),f=new Rse;return Object.assign(f,d),f})}}async createInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Qse(this.apiClient,e);return s=un("upload/v1beta/files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=toe(),d=new Lse;return Object.assign(d,c),d})}}async get(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Xse(this.apiClient,e);return s=un("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>$E(this.apiClient,c))}}async delete(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Jse(this.apiClient,e);return s=un("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(()=>{const c=noe(),d=new Fse;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aoe(t,e){const n={};if(P(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=P(e,["data"]);a!=null&&D(n,["data"],a);const i=P(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function ioe(t,e){const n={},a=P(e,["displayName"]);a!=null&&D(n,["displayName"],a);const i=P(e,["data"]);i!=null&&D(n,["data"],i);const s=P(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function soe(t,e){const n={};if(P(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=P(e,["thought"]);a!=null&&D(n,["thought"],a);const i=P(e,["inlineData"]);i!=null&&D(n,["inlineData"],aoe(t,i));const s=P(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=P(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=P(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=P(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=P(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=P(e,["text"]);return f!=null&&D(n,["text"],f),n}function ooe(t,e){const n={},a=P(e,["videoMetadata"]);a!=null&&D(n,["videoMetadata"],a);const i=P(e,["thought"]);i!=null&&D(n,["thought"],i);const s=P(e,["inlineData"]);s!=null&&D(n,["inlineData"],ioe(t,s));const o=P(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=P(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=P(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=P(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=P(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=P(e,["text"]);return p!=null&&D(n,["text"],p),n}function loe(t,e){const n={},a=P(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>soe(t,o))),D(n,["parts"],s)}const i=P(e,["role"]);return i!=null&&D(n,["role"],i),n}function coe(t,e){const n={},a=P(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>ooe(t,o))),D(n,["parts"],s)}const i=P(e,["role"]);return i!=null&&D(n,["role"],i),n}function uoe(){return{}}function doe(){return{}}function hoe(t,e){const n={},a=P(e,["mode"]);a!=null&&D(n,["mode"],a);const i=P(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function foe(t,e){const n={},a=P(e,["mode"]);a!=null&&D(n,["mode"],a);const i=P(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function poe(t,e){const n={},a=P(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],hoe(t,a)),n}function moe(t,e){const n={},a=P(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],foe(t,a)),n}function goe(){return{}}function yoe(t,e){const n={},a=P(e,["apiKeyString"]);return a!=null&&D(n,["apiKeyString"],a),n}function xoe(t,e){const n={},a=P(e,["apiKeyConfig"]);a!=null&&D(n,["apiKeyConfig"],yoe(t,a));const i=P(e,["authType"]);i!=null&&D(n,["authType"],i);const s=P(e,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=P(e,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=P(e,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=P(e,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function voe(t,e){const n={},a=P(e,["authConfig"]);return a!=null&&D(n,["authConfig"],xoe(t,a)),n}function boe(t,e){const n={};if(P(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");P(e,["googleSearch"])!=null&&D(n,["googleSearch"],uoe());const i=P(e,["googleSearchRetrieval"]);if(i!=null&&D(n,["googleSearchRetrieval"],poe(t,i)),P(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(P(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=P(e,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=P(e,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function joe(t,e){const n={},a=P(e,["retrieval"]);a!=null&&D(n,["retrieval"],a),P(e,["googleSearch"])!=null&&D(n,["googleSearch"],doe());const s=P(e,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],moe(t,s)),P(e,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],goe());const l=P(e,["googleMaps"]);l!=null&&D(n,["googleMaps"],voe(t,l));const c=P(e,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const d=P(e,["functionDeclarations"]);return d!=null&&D(n,["functionDeclarations"],d),n}function woe(t,e){const n={},a=P(e,["handle"]);if(a!=null&&D(n,["handle"],a),P(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function Noe(t,e){const n={},a=P(e,["handle"]);a!=null&&D(n,["handle"],a);const i=P(e,["transparent"]);return i!=null&&D(n,["transparent"],i),n}function p4(){return{}}function m4(){return{}}function Soe(t,e){const n={},a=P(e,["disabled"]);a!=null&&D(n,["disabled"],a);const i=P(e,["startOfSpeechSensitivity"]);i!=null&&D(n,["startOfSpeechSensitivity"],i);const s=P(e,["endOfSpeechSensitivity"]);s!=null&&D(n,["endOfSpeechSensitivity"],s);const o=P(e,["prefixPaddingMs"]);o!=null&&D(n,["prefixPaddingMs"],o);const l=P(e,["silenceDurationMs"]);return l!=null&&D(n,["silenceDurationMs"],l),n}function _oe(t,e){const n={},a=P(e,["disabled"]);a!=null&&D(n,["disabled"],a);const i=P(e,["startOfSpeechSensitivity"]);i!=null&&D(n,["startOfSpeechSensitivity"],i);const s=P(e,["endOfSpeechSensitivity"]);s!=null&&D(n,["endOfSpeechSensitivity"],s);const o=P(e,["prefixPaddingMs"]);o!=null&&D(n,["prefixPaddingMs"],o);const l=P(e,["silenceDurationMs"]);return l!=null&&D(n,["silenceDurationMs"],l),n}function Coe(t,e){const n={},a=P(e,["automaticActivityDetection"]);a!=null&&D(n,["automaticActivityDetection"],Soe(t,a));const i=P(e,["activityHandling"]);i!=null&&D(n,["activityHandling"],i);const s=P(e,["turnCoverage"]);return s!=null&&D(n,["turnCoverage"],s),n}function Toe(t,e){const n={},a=P(e,["automaticActivityDetection"]);a!=null&&D(n,["automaticActivityDetection"],_oe(t,a));const i=P(e,["activityHandling"]);i!=null&&D(n,["activityHandling"],i);const s=P(e,["turnCoverage"]);return s!=null&&D(n,["turnCoverage"],s),n}function koe(t,e){const n={},a=P(e,["targetTokens"]);return a!=null&&D(n,["targetTokens"],a),n}function Aoe(t,e){const n={},a=P(e,["targetTokens"]);return a!=null&&D(n,["targetTokens"],a),n}function Eoe(t,e){const n={},a=P(e,["triggerTokens"]);a!=null&&D(n,["triggerTokens"],a);const i=P(e,["slidingWindow"]);return i!=null&&D(n,["slidingWindow"],koe(t,i)),n}function Poe(t,e){const n={},a=P(e,["triggerTokens"]);a!=null&&D(n,["triggerTokens"],a);const i=P(e,["slidingWindow"]);return i!=null&&D(n,["slidingWindow"],Aoe(t,i)),n}function Ooe(t,e,n){const a={},i=P(e,["generationConfig"]);n!==void 0&&i!=null&&D(n,["setup","generationConfig"],i);const s=P(e,["responseModalities"]);n!==void 0&&s!=null&&D(n,["setup","generationConfig","responseModalities"],s);const o=P(e,["temperature"]);n!==void 0&&o!=null&&D(n,["setup","generationConfig","temperature"],o);const l=P(e,["topP"]);n!==void 0&&l!=null&&D(n,["setup","generationConfig","topP"],l);const c=P(e,["topK"]);n!==void 0&&c!=null&&D(n,["setup","generationConfig","topK"],c);const d=P(e,["maxOutputTokens"]);n!==void 0&&d!=null&&D(n,["setup","generationConfig","maxOutputTokens"],d);const f=P(e,["mediaResolution"]);n!==void 0&&f!=null&&D(n,["setup","generationConfig","mediaResolution"],f);const p=P(e,["seed"]);n!==void 0&&p!=null&&D(n,["setup","generationConfig","seed"],p);const g=P(e,["speechConfig"]);n!==void 0&&g!=null&&D(n,["setup","generationConfig","speechConfig"],g);const x=P(e,["systemInstruction"]);n!==void 0&&x!=null&&D(n,["setup","systemInstruction"],loe(t,ss(t,x)));const b=P(e,["tools"]);if(n!==void 0&&b!=null){let E=WN(t,b);Array.isArray(E)&&(E=E.map(k=>boe(t,GN(t,k)))),D(n,["setup","tools"],E)}const j=P(e,["sessionResumption"]);n!==void 0&&j!=null&&D(n,["setup","sessionResumption"],woe(t,j));const S=P(e,["inputAudioTranscription"]);n!==void 0&&S!=null&&D(n,["setup","inputAudioTranscription"],p4());const _=P(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&D(n,["setup","outputAudioTranscription"],p4());const T=P(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&D(n,["setup","realtimeInputConfig"],Coe(t,T));const C=P(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&D(n,["setup","contextWindowCompression"],Eoe(t,C)),a}function Doe(t,e,n){const a={},i=P(e,["generationConfig"]);n!==void 0&&i!=null&&D(n,["setup","generationConfig"],i);const s=P(e,["responseModalities"]);n!==void 0&&s!=null&&D(n,["setup","generationConfig","responseModalities"],s);const o=P(e,["temperature"]);n!==void 0&&o!=null&&D(n,["setup","generationConfig","temperature"],o);const l=P(e,["topP"]);n!==void 0&&l!=null&&D(n,["setup","generationConfig","topP"],l);const c=P(e,["topK"]);n!==void 0&&c!=null&&D(n,["setup","generationConfig","topK"],c);const d=P(e,["maxOutputTokens"]);n!==void 0&&d!=null&&D(n,["setup","generationConfig","maxOutputTokens"],d);const f=P(e,["mediaResolution"]);n!==void 0&&f!=null&&D(n,["setup","generationConfig","mediaResolution"],f);const p=P(e,["seed"]);n!==void 0&&p!=null&&D(n,["setup","generationConfig","seed"],p);const g=P(e,["speechConfig"]);n!==void 0&&g!=null&&D(n,["setup","generationConfig","speechConfig"],g);const x=P(e,["systemInstruction"]);n!==void 0&&x!=null&&D(n,["setup","systemInstruction"],coe(t,ss(t,x)));const b=P(e,["tools"]);if(n!==void 0&&b!=null){let E=WN(t,b);Array.isArray(E)&&(E=E.map(k=>joe(t,GN(t,k)))),D(n,["setup","tools"],E)}const j=P(e,["sessionResumption"]);n!==void 0&&j!=null&&D(n,["setup","sessionResumption"],Noe(t,j));const S=P(e,["inputAudioTranscription"]);n!==void 0&&S!=null&&D(n,["setup","inputAudioTranscription"],m4());const _=P(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&D(n,["setup","outputAudioTranscription"],m4());const T=P(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&D(n,["setup","realtimeInputConfig"],Toe(t,T));const C=P(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&D(n,["setup","contextWindowCompression"],Poe(t,C)),a}function Moe(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["setup","model"],Wr(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],Ooe(t,i,n)),n}function Ioe(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["setup","model"],Wr(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],Doe(t,i,n)),n}function Roe(){return{}}function Loe(){return{}}function Foe(){return{}}function $oe(){return{}}function Boe(t,e){const n={},a=P(e,["media"]);a!=null&&D(n,["mediaChunks"],rU(t,a));const i=P(e,["audio"]);i!=null&&D(n,["audio"],$ie(t,i));const s=P(e,["audioStreamEnd"]);s!=null&&D(n,["audioStreamEnd"],s);const o=P(e,["video"]);o!=null&&D(n,["video"],Fie(t,o));const l=P(e,["text"]);return l!=null&&D(n,["text"],l),P(e,["activityStart"])!=null&&D(n,["activityStart"],Roe()),P(e,["activityEnd"])!=null&&D(n,["activityEnd"],Foe()),n}function zoe(t,e){const n={},a=P(e,["media"]);if(a!=null&&D(n,["mediaChunks"],rU(t,a)),P(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=P(e,["audioStreamEnd"]);if(i!=null&&D(n,["audioStreamEnd"],i),P(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(P(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return P(e,["activityStart"])!=null&&D(n,["activityStart"],Loe()),P(e,["activityEnd"])!=null&&D(n,["activityEnd"],$oe()),n}function qoe(){return{}}function Uoe(){return{}}function Voe(t,e){const n={},a=P(e,["data"]);a!=null&&D(n,["data"],a);const i=P(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function Hoe(t,e){const n={},a=P(e,["displayName"]);a!=null&&D(n,["displayName"],a);const i=P(e,["data"]);i!=null&&D(n,["data"],i);const s=P(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Goe(t,e){const n={},a=P(e,["thought"]);a!=null&&D(n,["thought"],a);const i=P(e,["inlineData"]);i!=null&&D(n,["inlineData"],Voe(t,i));const s=P(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=P(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=P(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=P(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=P(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=P(e,["text"]);return f!=null&&D(n,["text"],f),n}function Woe(t,e){const n={},a=P(e,["videoMetadata"]);a!=null&&D(n,["videoMetadata"],a);const i=P(e,["thought"]);i!=null&&D(n,["thought"],i);const s=P(e,["inlineData"]);s!=null&&D(n,["inlineData"],Hoe(t,s));const o=P(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=P(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=P(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=P(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=P(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=P(e,["text"]);return p!=null&&D(n,["text"],p),n}function Yoe(t,e){const n={},a=P(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Goe(t,o))),D(n,["parts"],s)}const i=P(e,["role"]);return i!=null&&D(n,["role"],i),n}function Koe(t,e){const n={},a=P(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Woe(t,o))),D(n,["parts"],s)}const i=P(e,["role"]);return i!=null&&D(n,["role"],i),n}function g4(t,e){const n={},a=P(e,["text"]);a!=null&&D(n,["text"],a);const i=P(e,["finished"]);return i!=null&&D(n,["finished"],i),n}function y4(t,e){const n={},a=P(e,["text"]);a!=null&&D(n,["text"],a);const i=P(e,["finished"]);return i!=null&&D(n,["finished"],i),n}function Qoe(t,e){const n={},a=P(e,["modelTurn"]);a!=null&&D(n,["modelTurn"],Yoe(t,a));const i=P(e,["turnComplete"]);i!=null&&D(n,["turnComplete"],i);const s=P(e,["interrupted"]);s!=null&&D(n,["interrupted"],s);const o=P(e,["groundingMetadata"]);o!=null&&D(n,["groundingMetadata"],o);const l=P(e,["generationComplete"]);l!=null&&D(n,["generationComplete"],l);const c=P(e,["inputTranscription"]);c!=null&&D(n,["inputTranscription"],g4(t,c));const d=P(e,["outputTranscription"]);return d!=null&&D(n,["outputTranscription"],g4(t,d)),n}function Xoe(t,e){const n={},a=P(e,["modelTurn"]);a!=null&&D(n,["modelTurn"],Koe(t,a));const i=P(e,["turnComplete"]);i!=null&&D(n,["turnComplete"],i);const s=P(e,["interrupted"]);s!=null&&D(n,["interrupted"],s);const o=P(e,["groundingMetadata"]);o!=null&&D(n,["groundingMetadata"],o);const l=P(e,["generationComplete"]);l!=null&&D(n,["generationComplete"],l);const c=P(e,["inputTranscription"]);c!=null&&D(n,["inputTranscription"],y4(t,c));const d=P(e,["outputTranscription"]);return d!=null&&D(n,["outputTranscription"],y4(t,d)),n}function Joe(t,e){const n={},a=P(e,["id"]);a!=null&&D(n,["id"],a);const i=P(e,["args"]);i!=null&&D(n,["args"],i);const s=P(e,["name"]);return s!=null&&D(n,["name"],s),n}function Zoe(t,e){const n={},a=P(e,["args"]);a!=null&&D(n,["args"],a);const i=P(e,["name"]);return i!=null&&D(n,["name"],i),n}function ele(t,e){const n={},a=P(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>Joe(t,s))),D(n,["functionCalls"],i)}return n}function tle(t,e){const n={},a=P(e,["functionCalls"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>Zoe(t,s))),D(n,["functionCalls"],i)}return n}function nle(t,e){const n={},a=P(e,["ids"]);return a!=null&&D(n,["ids"],a),n}function rle(t,e){const n={},a=P(e,["ids"]);return a!=null&&D(n,["ids"],a),n}function vj(t,e){const n={},a=P(e,["modality"]);a!=null&&D(n,["modality"],a);const i=P(e,["tokenCount"]);return i!=null&&D(n,["tokenCount"],i),n}function bj(t,e){const n={},a=P(e,["modality"]);a!=null&&D(n,["modality"],a);const i=P(e,["tokenCount"]);return i!=null&&D(n,["tokenCount"],i),n}function ale(t,e){const n={},a=P(e,["promptTokenCount"]);a!=null&&D(n,["promptTokenCount"],a);const i=P(e,["cachedContentTokenCount"]);i!=null&&D(n,["cachedContentTokenCount"],i);const s=P(e,["responseTokenCount"]);s!=null&&D(n,["responseTokenCount"],s);const o=P(e,["toolUsePromptTokenCount"]);o!=null&&D(n,["toolUsePromptTokenCount"],o);const l=P(e,["thoughtsTokenCount"]);l!=null&&D(n,["thoughtsTokenCount"],l);const c=P(e,["totalTokenCount"]);c!=null&&D(n,["totalTokenCount"],c);const d=P(e,["promptTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(b=>vj(t,b))),D(n,["promptTokensDetails"],x)}const f=P(e,["cacheTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(b=>vj(t,b))),D(n,["cacheTokensDetails"],x)}const p=P(e,["responseTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>vj(t,b))),D(n,["responseTokensDetails"],x)}const g=P(e,["toolUsePromptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(b=>vj(t,b))),D(n,["toolUsePromptTokensDetails"],x)}return n}function ile(t,e){const n={},a=P(e,["promptTokenCount"]);a!=null&&D(n,["promptTokenCount"],a);const i=P(e,["cachedContentTokenCount"]);i!=null&&D(n,["cachedContentTokenCount"],i);const s=P(e,["candidatesTokenCount"]);s!=null&&D(n,["responseTokenCount"],s);const o=P(e,["toolUsePromptTokenCount"]);o!=null&&D(n,["toolUsePromptTokenCount"],o);const l=P(e,["thoughtsTokenCount"]);l!=null&&D(n,["thoughtsTokenCount"],l);const c=P(e,["totalTokenCount"]);c!=null&&D(n,["totalTokenCount"],c);const d=P(e,["promptTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(j=>bj(t,j))),D(n,["promptTokensDetails"],b)}const f=P(e,["cacheTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(j=>bj(t,j))),D(n,["cacheTokensDetails"],b)}const p=P(e,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(j=>bj(t,j))),D(n,["responseTokensDetails"],b)}const g=P(e,["toolUsePromptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(j=>bj(t,j))),D(n,["toolUsePromptTokensDetails"],b)}const x=P(e,["trafficType"]);return x!=null&&D(n,["trafficType"],x),n}function sle(t,e){const n={},a=P(e,["timeLeft"]);return a!=null&&D(n,["timeLeft"],a),n}function ole(t,e){const n={},a=P(e,["timeLeft"]);return a!=null&&D(n,["timeLeft"],a),n}function lle(t,e){const n={},a=P(e,["newHandle"]);a!=null&&D(n,["newHandle"],a);const i=P(e,["resumable"]);i!=null&&D(n,["resumable"],i);const s=P(e,["lastConsumedClientMessageIndex"]);return s!=null&&D(n,["lastConsumedClientMessageIndex"],s),n}function cle(t,e){const n={},a=P(e,["newHandle"]);a!=null&&D(n,["newHandle"],a);const i=P(e,["resumable"]);i!=null&&D(n,["resumable"],i);const s=P(e,["lastConsumedClientMessageIndex"]);return s!=null&&D(n,["lastConsumedClientMessageIndex"],s),n}function ule(t,e){const n={};P(e,["setupComplete"])!=null&&D(n,["setupComplete"],qoe());const i=P(e,["serverContent"]);i!=null&&D(n,["serverContent"],Qoe(t,i));const s=P(e,["toolCall"]);s!=null&&D(n,["toolCall"],ele(t,s));const o=P(e,["toolCallCancellation"]);o!=null&&D(n,["toolCallCancellation"],nle(t,o));const l=P(e,["usageMetadata"]);l!=null&&D(n,["usageMetadata"],ale(t,l));const c=P(e,["goAway"]);c!=null&&D(n,["goAway"],sle(t,c));const d=P(e,["sessionResumptionUpdate"]);return d!=null&&D(n,["sessionResumptionUpdate"],lle(t,d)),n}function dle(t,e){const n={};P(e,["setupComplete"])!=null&&D(n,["setupComplete"],Uoe());const i=P(e,["serverContent"]);i!=null&&D(n,["serverContent"],Xoe(t,i));const s=P(e,["toolCall"]);s!=null&&D(n,["toolCall"],tle(t,s));const o=P(e,["toolCallCancellation"]);o!=null&&D(n,["toolCallCancellation"],rle(t,o));const l=P(e,["usageMetadata"]);l!=null&&D(n,["usageMetadata"],ile(t,l));const c=P(e,["goAway"]);c!=null&&D(n,["goAway"],ole(t,c));const d=P(e,["sessionResumptionUpdate"]);return d!=null&&D(n,["sessionResumptionUpdate"],cle(t,d)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hle(t,e){const n={};if(P(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=P(e,["data"]);a!=null&&D(n,["data"],a);const i=P(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function fle(t,e){const n={};if(P(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const a=P(e,["thought"]);a!=null&&D(n,["thought"],a);const i=P(e,["inlineData"]);i!=null&&D(n,["inlineData"],hle(t,i));const s=P(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=P(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=P(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=P(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=P(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=P(e,["text"]);return f!=null&&D(n,["text"],f),n}function KN(t,e){const n={},a=P(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>fle(t,o))),D(n,["parts"],s)}const i=P(e,["role"]);return i!=null&&D(n,["role"],i),n}function ple(t,e){const n={};if(P(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=P(e,["category"]);a!=null&&D(n,["category"],a);const i=P(e,["threshold"]);return i!=null&&D(n,["threshold"],i),n}function mle(){return{}}function gle(t,e){const n={},a=P(e,["mode"]);a!=null&&D(n,["mode"],a);const i=P(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function yle(t,e){const n={},a=P(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],gle(t,a)),n}function xle(t,e){const n={};if(P(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");P(e,["googleSearch"])!=null&&D(n,["googleSearch"],mle());const i=P(e,["googleSearchRetrieval"]);if(i!=null&&D(n,["googleSearchRetrieval"],yle(t,i)),P(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(P(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=P(e,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=P(e,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function vle(t,e){const n={},a=P(e,["mode"]);a!=null&&D(n,["mode"],a);const i=P(e,["allowedFunctionNames"]);return i!=null&&D(n,["allowedFunctionNames"],i),n}function ble(t,e){const n={},a=P(e,["functionCallingConfig"]);if(a!=null&&D(n,["functionCallingConfig"],vle(t,a)),P(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function jle(t,e){const n={},a=P(e,["voiceName"]);return a!=null&&D(n,["voiceName"],a),n}function wle(t,e){const n={},a=P(e,["prebuiltVoiceConfig"]);return a!=null&&D(n,["prebuiltVoiceConfig"],jle(t,a)),n}function Nle(t,e){const n={},a=P(e,["voiceConfig"]);a!=null&&D(n,["voiceConfig"],wle(t,a));const i=P(e,["languageCode"]);return i!=null&&D(n,["languageCode"],i),n}function Sle(t,e){const n={},a=P(e,["includeThoughts"]);a!=null&&D(n,["includeThoughts"],a);const i=P(e,["thinkingBudget"]);return i!=null&&D(n,["thinkingBudget"],i),n}function _le(t,e,n){const a={},i=P(e,["systemInstruction"]);n!==void 0&&i!=null&&D(n,["systemInstruction"],KN(t,ss(t,i)));const s=P(e,["temperature"]);s!=null&&D(a,["temperature"],s);const o=P(e,["topP"]);o!=null&&D(a,["topP"],o);const l=P(e,["topK"]);l!=null&&D(a,["topK"],l);const c=P(e,["candidateCount"]);c!=null&&D(a,["candidateCount"],c);const d=P(e,["maxOutputTokens"]);d!=null&&D(a,["maxOutputTokens"],d);const f=P(e,["stopSequences"]);f!=null&&D(a,["stopSequences"],f);const p=P(e,["responseLogprobs"]);p!=null&&D(a,["responseLogprobs"],p);const g=P(e,["logprobs"]);g!=null&&D(a,["logprobs"],g);const x=P(e,["presencePenalty"]);x!=null&&D(a,["presencePenalty"],x);const b=P(e,["frequencyPenalty"]);b!=null&&D(a,["frequencyPenalty"],b);const j=P(e,["seed"]);j!=null&&D(a,["seed"],j);const S=P(e,["responseMimeType"]);S!=null&&D(a,["responseMimeType"],S);const _=P(e,["responseSchema"]);if(_!=null&&D(a,["responseSchema"],sU(t,_)),P(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(P(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=P(e,["safetySettings"]);if(n!==void 0&&T!=null){let $=T;Array.isArray($)&&($=$.map(L=>ple(t,L))),D(n,["safetySettings"],$)}const C=P(e,["tools"]);if(n!==void 0&&C!=null){let $=WN(t,C);Array.isArray($)&&($=$.map(L=>xle(t,GN(t,L)))),D(n,["tools"],$)}const E=P(e,["toolConfig"]);if(n!==void 0&&E!=null&&D(n,["toolConfig"],ble(t,E)),P(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=P(e,["cachedContent"]);n!==void 0&&k!=null&&D(n,["cachedContent"],yd(t,k));const O=P(e,["responseModalities"]);O!=null&&D(a,["responseModalities"],O);const I=P(e,["mediaResolution"]);I!=null&&D(a,["mediaResolution"],I);const F=P(e,["speechConfig"]);if(F!=null&&D(a,["speechConfig"],Nle(t,oU(t,F))),P(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=P(e,["thinkingConfig"]);return B!=null&&D(a,["thinkingConfig"],Sle(t,B)),a}function x4(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>KN(t,l))),D(n,["contents"],o)}const s=P(e,["config"]);return s!=null&&D(n,["generationConfig"],_le(t,s,n)),n}function Cle(t,e,n){const a={},i=P(e,["taskType"]);n!==void 0&&i!=null&&D(n,["requests[]","taskType"],i);const s=P(e,["title"]);n!==void 0&&s!=null&&D(n,["requests[]","title"],s);const o=P(e,["outputDimensionality"]);if(n!==void 0&&o!=null&&D(n,["requests[]","outputDimensionality"],o),P(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(P(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function Tle(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["contents"]);i!=null&&D(n,["requests[]","content"],iU(t,i));const s=P(e,["config"]);s!=null&&D(n,["config"],Cle(t,s,n));const o=P(e,["model"]);return o!==void 0&&D(n,["requests[]","model"],Wr(t,o)),n}function kle(t,e,n){const a={};if(P(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(P(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=P(e,["numberOfImages"]);n!==void 0&&i!=null&&D(n,["parameters","sampleCount"],i);const s=P(e,["aspectRatio"]);n!==void 0&&s!=null&&D(n,["parameters","aspectRatio"],s);const o=P(e,["guidanceScale"]);if(n!==void 0&&o!=null&&D(n,["parameters","guidanceScale"],o),P(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=P(e,["safetyFilterLevel"]);n!==void 0&&l!=null&&D(n,["parameters","safetySetting"],l);const c=P(e,["personGeneration"]);n!==void 0&&c!=null&&D(n,["parameters","personGeneration"],c);const d=P(e,["includeSafetyAttributes"]);n!==void 0&&d!=null&&D(n,["parameters","includeSafetyAttributes"],d);const f=P(e,["includeRaiReason"]);n!==void 0&&f!=null&&D(n,["parameters","includeRaiReason"],f);const p=P(e,["language"]);n!==void 0&&p!=null&&D(n,["parameters","language"],p);const g=P(e,["outputMimeType"]);n!==void 0&&g!=null&&D(n,["parameters","outputOptions","mimeType"],g);const x=P(e,["outputCompressionQuality"]);if(n!==void 0&&x!=null&&D(n,["parameters","outputOptions","compressionQuality"],x),P(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(P(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function Ale(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["prompt"]);i!=null&&D(n,["instances[0]","prompt"],i);const s=P(e,["config"]);return s!=null&&D(n,["config"],kle(t,s,n)),n}function Ele(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","name"],Wr(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function Ple(t,e,n){const a={},i=P(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=P(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=P(e,["filter"]);n!==void 0&&o!=null&&D(n,["_query","filter"],o);const l=P(e,["queryBase"]);return n!==void 0&&l!=null&&D(n,["_url","models_url"],uU(t,l)),a}function Ole(t,e){const n={},a=P(e,["config"]);return a!=null&&D(n,["config"],Ple(t,a,n)),n}function Dle(t,e,n){const a={},i=P(e,["displayName"]);n!==void 0&&i!=null&&D(n,["displayName"],i);const s=P(e,["description"]);n!==void 0&&s!=null&&D(n,["description"],s);const o=P(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&D(n,["defaultCheckpointId"],o),a}function Mle(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","name"],Wr(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],Dle(t,i,n)),n}function Ile(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","name"],Wr(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function Rle(t,e){const n={};if(P(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(P(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(P(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Lle(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>KN(t,l))),D(n,["contents"],o)}const s=P(e,["config"]);return s!=null&&D(n,["config"],Rle(t,s)),n}function Fle(t,e){const n={};if(P(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=P(e,["imageBytes"]);a!=null&&D(n,["bytesBase64Encoded"],xd(t,a));const i=P(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function $le(t,e,n){const a={},i=P(e,["numberOfVideos"]);if(n!==void 0&&i!=null&&D(n,["parameters","sampleCount"],i),P(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(P(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=P(e,["durationSeconds"]);if(n!==void 0&&s!=null&&D(n,["parameters","durationSeconds"],s),P(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=P(e,["aspectRatio"]);if(n!==void 0&&o!=null&&D(n,["parameters","aspectRatio"],o),P(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=P(e,["personGeneration"]);if(n!==void 0&&l!=null&&D(n,["parameters","personGeneration"],l),P(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=P(e,["negativePrompt"]);if(n!==void 0&&c!=null&&D(n,["parameters","negativePrompt"],c),P(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function Ble(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["prompt"]);i!=null&&D(n,["instances[0]","prompt"],i);const s=P(e,["image"]);s!=null&&D(n,["instances[0]","image"],Fle(t,s));const o=P(e,["config"]);return o!=null&&D(n,["config"],$le(t,o,n)),n}function zle(t,e){const n={},a=P(e,["displayName"]);a!=null&&D(n,["displayName"],a);const i=P(e,["data"]);i!=null&&D(n,["data"],i);const s=P(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function qle(t,e){const n={},a=P(e,["videoMetadata"]);a!=null&&D(n,["videoMetadata"],a);const i=P(e,["thought"]);i!=null&&D(n,["thought"],i);const s=P(e,["inlineData"]);s!=null&&D(n,["inlineData"],zle(t,s));const o=P(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=P(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=P(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=P(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=P(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=P(e,["text"]);return p!=null&&D(n,["text"],p),n}function Fg(t,e){const n={},a=P(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>qle(t,o))),D(n,["parts"],s)}const i=P(e,["role"]);return i!=null&&D(n,["role"],i),n}function Ule(t,e){const n={},a=P(e,["featureSelectionPreference"]);return a!=null&&D(n,["featureSelectionPreference"],a),n}function Vle(t,e){const n={},a=P(e,["method"]);a!=null&&D(n,["method"],a);const i=P(e,["category"]);i!=null&&D(n,["category"],i);const s=P(e,["threshold"]);return s!=null&&D(n,["threshold"],s),n}function Hle(){return{}}function Gle(t,e){const n={},a=P(e,["mode"]);a!=null&&D(n,["mode"],a);const i=P(e,["dynamicThreshold"]);return i!=null&&D(n,["dynamicThreshold"],i),n}function Wle(t,e){const n={},a=P(e,["dynamicRetrievalConfig"]);return a!=null&&D(n,["dynamicRetrievalConfig"],Gle(t,a)),n}function Yle(){return{}}function Kle(t,e){const n={},a=P(e,["apiKeyString"]);return a!=null&&D(n,["apiKeyString"],a),n}function Qle(t,e){const n={},a=P(e,["apiKeyConfig"]);a!=null&&D(n,["apiKeyConfig"],Kle(t,a));const i=P(e,["authType"]);i!=null&&D(n,["authType"],i);const s=P(e,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=P(e,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=P(e,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=P(e,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function Xle(t,e){const n={},a=P(e,["authConfig"]);return a!=null&&D(n,["authConfig"],Qle(t,a)),n}function fU(t,e){const n={},a=P(e,["retrieval"]);a!=null&&D(n,["retrieval"],a),P(e,["googleSearch"])!=null&&D(n,["googleSearch"],Hle());const s=P(e,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],Wle(t,s)),P(e,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],Yle());const l=P(e,["googleMaps"]);l!=null&&D(n,["googleMaps"],Xle(t,l));const c=P(e,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const d=P(e,["functionDeclarations"]);return d!=null&&D(n,["functionDeclarations"],d),n}function Jle(t,e){const n={},a=P(e,["mode"]);a!=null&&D(n,["mode"],a);const i=P(e,["allowedFunctionNames"]);return i!=null&&D(n,["allowedFunctionNames"],i),n}function Zle(t,e){const n={},a=P(e,["latitude"]);a!=null&&D(n,["latitude"],a);const i=P(e,["longitude"]);return i!=null&&D(n,["longitude"],i),n}function ece(t,e){const n={},a=P(e,["latLng"]);return a!=null&&D(n,["latLng"],Zle(t,a)),n}function tce(t,e){const n={},a=P(e,["functionCallingConfig"]);a!=null&&D(n,["functionCallingConfig"],Jle(t,a));const i=P(e,["retrievalConfig"]);return i!=null&&D(n,["retrievalConfig"],ece(t,i)),n}function nce(t,e){const n={},a=P(e,["voiceName"]);return a!=null&&D(n,["voiceName"],a),n}function rce(t,e){const n={},a=P(e,["prebuiltVoiceConfig"]);return a!=null&&D(n,["prebuiltVoiceConfig"],nce(t,a)),n}function ace(t,e){const n={},a=P(e,["voiceConfig"]);a!=null&&D(n,["voiceConfig"],rce(t,a));const i=P(e,["languageCode"]);return i!=null&&D(n,["languageCode"],i),n}function ice(t,e){const n={},a=P(e,["includeThoughts"]);a!=null&&D(n,["includeThoughts"],a);const i=P(e,["thinkingBudget"]);return i!=null&&D(n,["thinkingBudget"],i),n}function sce(t,e,n){const a={},i=P(e,["systemInstruction"]);n!==void 0&&i!=null&&D(n,["systemInstruction"],Fg(t,ss(t,i)));const s=P(e,["temperature"]);s!=null&&D(a,["temperature"],s);const o=P(e,["topP"]);o!=null&&D(a,["topP"],o);const l=P(e,["topK"]);l!=null&&D(a,["topK"],l);const c=P(e,["candidateCount"]);c!=null&&D(a,["candidateCount"],c);const d=P(e,["maxOutputTokens"]);d!=null&&D(a,["maxOutputTokens"],d);const f=P(e,["stopSequences"]);f!=null&&D(a,["stopSequences"],f);const p=P(e,["responseLogprobs"]);p!=null&&D(a,["responseLogprobs"],p);const g=P(e,["logprobs"]);g!=null&&D(a,["logprobs"],g);const x=P(e,["presencePenalty"]);x!=null&&D(a,["presencePenalty"],x);const b=P(e,["frequencyPenalty"]);b!=null&&D(a,["frequencyPenalty"],b);const j=P(e,["seed"]);j!=null&&D(a,["seed"],j);const S=P(e,["responseMimeType"]);S!=null&&D(a,["responseMimeType"],S);const _=P(e,["responseSchema"]);_!=null&&D(a,["responseSchema"],sU(t,_));const T=P(e,["routingConfig"]);T!=null&&D(a,["routingConfig"],T);const C=P(e,["modelSelectionConfig"]);C!=null&&D(a,["modelConfig"],Ule(t,C));const E=P(e,["safetySettings"]);if(n!==void 0&&E!=null){let ne=E;Array.isArray(ne)&&(ne=ne.map(Q=>Vle(t,Q))),D(n,["safetySettings"],ne)}const k=P(e,["tools"]);if(n!==void 0&&k!=null){let ne=WN(t,k);Array.isArray(ne)&&(ne=ne.map(Q=>fU(t,GN(t,Q)))),D(n,["tools"],ne)}const O=P(e,["toolConfig"]);n!==void 0&&O!=null&&D(n,["toolConfig"],tce(t,O));const I=P(e,["labels"]);n!==void 0&&I!=null&&D(n,["labels"],I);const F=P(e,["cachedContent"]);n!==void 0&&F!=null&&D(n,["cachedContent"],yd(t,F));const B=P(e,["responseModalities"]);B!=null&&D(a,["responseModalities"],B);const $=P(e,["mediaResolution"]);$!=null&&D(a,["mediaResolution"],$);const L=P(e,["speechConfig"]);L!=null&&D(a,["speechConfig"],ace(t,oU(t,L)));const V=P(e,["audioTimestamp"]);V!=null&&D(a,["audioTimestamp"],V);const H=P(e,["thinkingConfig"]);return H!=null&&D(a,["thinkingConfig"],ice(t,H)),a}function v4(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>Fg(t,l))),D(n,["contents"],o)}const s=P(e,["config"]);return s!=null&&D(n,["generationConfig"],sce(t,s,n)),n}function oce(t,e,n){const a={},i=P(e,["taskType"]);n!==void 0&&i!=null&&D(n,["instances[]","task_type"],i);const s=P(e,["title"]);n!==void 0&&s!=null&&D(n,["instances[]","title"],s);const o=P(e,["outputDimensionality"]);n!==void 0&&o!=null&&D(n,["parameters","outputDimensionality"],o);const l=P(e,["mimeType"]);n!==void 0&&l!=null&&D(n,["instances[]","mimeType"],l);const c=P(e,["autoTruncate"]);return n!==void 0&&c!=null&&D(n,["parameters","autoTruncate"],c),a}function lce(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["contents"]);i!=null&&D(n,["instances[]","content"],iU(t,i));const s=P(e,["config"]);return s!=null&&D(n,["config"],oce(t,s,n)),n}function cce(t,e,n){const a={},i=P(e,["outputGcsUri"]);n!==void 0&&i!=null&&D(n,["parameters","storageUri"],i);const s=P(e,["negativePrompt"]);n!==void 0&&s!=null&&D(n,["parameters","negativePrompt"],s);const o=P(e,["numberOfImages"]);n!==void 0&&o!=null&&D(n,["parameters","sampleCount"],o);const l=P(e,["aspectRatio"]);n!==void 0&&l!=null&&D(n,["parameters","aspectRatio"],l);const c=P(e,["guidanceScale"]);n!==void 0&&c!=null&&D(n,["parameters","guidanceScale"],c);const d=P(e,["seed"]);n!==void 0&&d!=null&&D(n,["parameters","seed"],d);const f=P(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&D(n,["parameters","safetySetting"],f);const p=P(e,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const g=P(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&D(n,["parameters","includeSafetyAttributes"],g);const x=P(e,["includeRaiReason"]);n!==void 0&&x!=null&&D(n,["parameters","includeRaiReason"],x);const b=P(e,["language"]);n!==void 0&&b!=null&&D(n,["parameters","language"],b);const j=P(e,["outputMimeType"]);n!==void 0&&j!=null&&D(n,["parameters","outputOptions","mimeType"],j);const S=P(e,["outputCompressionQuality"]);n!==void 0&&S!=null&&D(n,["parameters","outputOptions","compressionQuality"],S);const _=P(e,["addWatermark"]);n!==void 0&&_!=null&&D(n,["parameters","addWatermark"],_);const T=P(e,["enhancePrompt"]);return n!==void 0&&T!=null&&D(n,["parameters","enhancePrompt"],T),a}function uce(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["prompt"]);i!=null&&D(n,["instances[0]","prompt"],i);const s=P(e,["config"]);return s!=null&&D(n,["config"],cce(t,s,n)),n}function dD(t,e){const n={},a=P(e,["gcsUri"]);a!=null&&D(n,["gcsUri"],a);const i=P(e,["imageBytes"]);i!=null&&D(n,["bytesBase64Encoded"],xd(t,i));const s=P(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function dce(t,e){const n={},a=P(e,["maskMode"]);a!=null&&D(n,["maskMode"],a);const i=P(e,["segmentationClasses"]);i!=null&&D(n,["maskClasses"],i);const s=P(e,["maskDilation"]);return s!=null&&D(n,["dilation"],s),n}function hce(t,e){const n={},a=P(e,["controlType"]);a!=null&&D(n,["controlType"],a);const i=P(e,["enableControlImageComputation"]);return i!=null&&D(n,["computeControl"],i),n}function fce(t,e){const n={},a=P(e,["styleDescription"]);return a!=null&&D(n,["styleDescription"],a),n}function pce(t,e){const n={},a=P(e,["subjectType"]);a!=null&&D(n,["subjectType"],a);const i=P(e,["subjectDescription"]);return i!=null&&D(n,["subjectDescription"],i),n}function mce(t,e){const n={},a=P(e,["referenceImage"]);a!=null&&D(n,["referenceImage"],dD(t,a));const i=P(e,["referenceId"]);i!=null&&D(n,["referenceId"],i);const s=P(e,["referenceType"]);s!=null&&D(n,["referenceType"],s);const o=P(e,["maskImageConfig"]);o!=null&&D(n,["maskImageConfig"],dce(t,o));const l=P(e,["controlImageConfig"]);l!=null&&D(n,["controlImageConfig"],hce(t,l));const c=P(e,["styleImageConfig"]);c!=null&&D(n,["styleImageConfig"],fce(t,c));const d=P(e,["subjectImageConfig"]);return d!=null&&D(n,["subjectImageConfig"],pce(t,d)),n}function gce(t,e,n){const a={},i=P(e,["outputGcsUri"]);n!==void 0&&i!=null&&D(n,["parameters","storageUri"],i);const s=P(e,["negativePrompt"]);n!==void 0&&s!=null&&D(n,["parameters","negativePrompt"],s);const o=P(e,["numberOfImages"]);n!==void 0&&o!=null&&D(n,["parameters","sampleCount"],o);const l=P(e,["aspectRatio"]);n!==void 0&&l!=null&&D(n,["parameters","aspectRatio"],l);const c=P(e,["guidanceScale"]);n!==void 0&&c!=null&&D(n,["parameters","guidanceScale"],c);const d=P(e,["seed"]);n!==void 0&&d!=null&&D(n,["parameters","seed"],d);const f=P(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&D(n,["parameters","safetySetting"],f);const p=P(e,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const g=P(e,["includeSafetyAttributes"]);n!==void 0&&g!=null&&D(n,["parameters","includeSafetyAttributes"],g);const x=P(e,["includeRaiReason"]);n!==void 0&&x!=null&&D(n,["parameters","includeRaiReason"],x);const b=P(e,["language"]);n!==void 0&&b!=null&&D(n,["parameters","language"],b);const j=P(e,["outputMimeType"]);n!==void 0&&j!=null&&D(n,["parameters","outputOptions","mimeType"],j);const S=P(e,["outputCompressionQuality"]);n!==void 0&&S!=null&&D(n,["parameters","outputOptions","compressionQuality"],S);const _=P(e,["editMode"]);n!==void 0&&_!=null&&D(n,["parameters","editMode"],_);const T=P(e,["baseSteps"]);return n!==void 0&&T!=null&&D(n,["parameters","editConfig","baseSteps"],T),a}function yce(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["prompt"]);i!=null&&D(n,["instances[0]","prompt"],i);const s=P(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>mce(t,c))),D(n,["instances[0]","referenceImages"],l)}const o=P(e,["config"]);return o!=null&&D(n,["config"],gce(t,o,n)),n}function xce(t,e,n){const a={},i=P(e,["includeRaiReason"]);n!==void 0&&i!=null&&D(n,["parameters","includeRaiReason"],i);const s=P(e,["outputMimeType"]);n!==void 0&&s!=null&&D(n,["parameters","outputOptions","mimeType"],s);const o=P(e,["outputCompressionQuality"]);n!==void 0&&o!=null&&D(n,["parameters","outputOptions","compressionQuality"],o);const l=P(e,["numberOfImages"]);n!==void 0&&l!=null&&D(n,["parameters","sampleCount"],l);const c=P(e,["mode"]);return n!==void 0&&c!=null&&D(n,["parameters","mode"],c),a}function vce(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["image"]);i!=null&&D(n,["instances[0]","image"],dD(t,i));const s=P(e,["upscaleFactor"]);s!=null&&D(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=P(e,["config"]);return o!=null&&D(n,["config"],xce(t,o,n)),n}function bce(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","name"],Wr(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function jce(t,e,n){const a={},i=P(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=P(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=P(e,["filter"]);n!==void 0&&o!=null&&D(n,["_query","filter"],o);const l=P(e,["queryBase"]);return n!==void 0&&l!=null&&D(n,["_url","models_url"],uU(t,l)),a}function wce(t,e){const n={},a=P(e,["config"]);return a!=null&&D(n,["config"],jce(t,a,n)),n}function Nce(t,e,n){const a={},i=P(e,["displayName"]);n!==void 0&&i!=null&&D(n,["displayName"],i);const s=P(e,["description"]);n!==void 0&&s!=null&&D(n,["description"],s);const o=P(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&D(n,["defaultCheckpointId"],o),a}function Sce(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],Nce(t,i,n)),n}function _ce(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","name"],Wr(t,a));const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function Cce(t,e,n){const a={},i=P(e,["systemInstruction"]);n!==void 0&&i!=null&&D(n,["systemInstruction"],Fg(t,ss(t,i)));const s=P(e,["tools"]);if(n!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>fU(t,c))),D(n,["tools"],l)}const o=P(e,["generationConfig"]);return n!==void 0&&o!=null&&D(n,["generationConfig"],o),a}function Tce(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>Fg(t,l))),D(n,["contents"],o)}const s=P(e,["config"]);return s!=null&&D(n,["config"],Cce(t,s,n)),n}function kce(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["contents"]);if(i!=null){let o=gd(t,i);Array.isArray(o)&&(o=o.map(l=>Fg(t,l))),D(n,["contents"],o)}const s=P(e,["config"]);return s!=null&&D(n,["config"],s),n}function Ace(t,e,n){const a={},i=P(e,["numberOfVideos"]);n!==void 0&&i!=null&&D(n,["parameters","sampleCount"],i);const s=P(e,["outputGcsUri"]);n!==void 0&&s!=null&&D(n,["parameters","storageUri"],s);const o=P(e,["fps"]);n!==void 0&&o!=null&&D(n,["parameters","fps"],o);const l=P(e,["durationSeconds"]);n!==void 0&&l!=null&&D(n,["parameters","durationSeconds"],l);const c=P(e,["seed"]);n!==void 0&&c!=null&&D(n,["parameters","seed"],c);const d=P(e,["aspectRatio"]);n!==void 0&&d!=null&&D(n,["parameters","aspectRatio"],d);const f=P(e,["resolution"]);n!==void 0&&f!=null&&D(n,["parameters","resolution"],f);const p=P(e,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const g=P(e,["pubsubTopic"]);n!==void 0&&g!=null&&D(n,["parameters","pubsubTopic"],g);const x=P(e,["negativePrompt"]);n!==void 0&&x!=null&&D(n,["parameters","negativePrompt"],x);const b=P(e,["enhancePrompt"]);return n!==void 0&&b!=null&&D(n,["parameters","enhancePrompt"],b),a}function Ece(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["_url","model"],Wr(t,a));const i=P(e,["prompt"]);i!=null&&D(n,["instances[0]","prompt"],i);const s=P(e,["image"]);s!=null&&D(n,["instances[0]","image"],dD(t,s));const o=P(e,["config"]);return o!=null&&D(n,["config"],Ace(t,o,n)),n}function Pce(t,e){const n={},a=P(e,["data"]);a!=null&&D(n,["data"],a);const i=P(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function Oce(t,e){const n={},a=P(e,["thought"]);a!=null&&D(n,["thought"],a);const i=P(e,["inlineData"]);i!=null&&D(n,["inlineData"],Pce(t,i));const s=P(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=P(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=P(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=P(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=P(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=P(e,["text"]);return f!=null&&D(n,["text"],f),n}function Dce(t,e){const n={},a=P(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Oce(t,o))),D(n,["parts"],s)}const i=P(e,["role"]);return i!=null&&D(n,["role"],i),n}function Mce(t,e){const n={},a=P(e,["citationSources"]);return a!=null&&D(n,["citations"],a),n}function Ice(t,e){const n={},a=P(e,["content"]);a!=null&&D(n,["content"],Dce(t,a));const i=P(e,["citationMetadata"]);i!=null&&D(n,["citationMetadata"],Mce(t,i));const s=P(e,["tokenCount"]);s!=null&&D(n,["tokenCount"],s);const o=P(e,["finishReason"]);o!=null&&D(n,["finishReason"],o);const l=P(e,["avgLogprobs"]);l!=null&&D(n,["avgLogprobs"],l);const c=P(e,["groundingMetadata"]);c!=null&&D(n,["groundingMetadata"],c);const d=P(e,["index"]);d!=null&&D(n,["index"],d);const f=P(e,["logprobsResult"]);f!=null&&D(n,["logprobsResult"],f);const p=P(e,["safetyRatings"]);return p!=null&&D(n,["safetyRatings"],p),n}function b4(t,e){const n={},a=P(e,["candidates"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Ice(t,c))),D(n,["candidates"],l)}const i=P(e,["modelVersion"]);i!=null&&D(n,["modelVersion"],i);const s=P(e,["promptFeedback"]);s!=null&&D(n,["promptFeedback"],s);const o=P(e,["usageMetadata"]);return o!=null&&D(n,["usageMetadata"],o),n}function Rce(t,e){const n={},a=P(e,["values"]);return a!=null&&D(n,["values"],a),n}function Lce(){return{}}function Fce(t,e){const n={},a=P(e,["embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Rce(t,o))),D(n,["embeddings"],s)}return P(e,["metadata"])!=null&&D(n,["metadata"],Lce()),n}function $ce(t,e){const n={},a=P(e,["bytesBase64Encoded"]);a!=null&&D(n,["imageBytes"],xd(t,a));const i=P(e,["mimeType"]);return i!=null&&D(n,["mimeType"],i),n}function pU(t,e){const n={},a=P(e,["safetyAttributes","categories"]);a!=null&&D(n,["categories"],a);const i=P(e,["safetyAttributes","scores"]);i!=null&&D(n,["scores"],i);const s=P(e,["contentType"]);return s!=null&&D(n,["contentType"],s),n}function Bce(t,e){const n={},a=P(e,["_self"]);a!=null&&D(n,["image"],$ce(t,a));const i=P(e,["raiFilteredReason"]);i!=null&&D(n,["raiFilteredReason"],i);const s=P(e,["_self"]);return s!=null&&D(n,["safetyAttributes"],pU(t,s)),n}function zce(t,e){const n={},a=P(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Bce(t,o))),D(n,["generatedImages"],s)}const i=P(e,["positivePromptSafetyAttributes"]);return i!=null&&D(n,["positivePromptSafetyAttributes"],pU(t,i)),n}function qce(t,e){const n={},a=P(e,["baseModel"]);a!=null&&D(n,["baseModel"],a);const i=P(e,["createTime"]);i!=null&&D(n,["createTime"],i);const s=P(e,["updateTime"]);return s!=null&&D(n,["updateTime"],s),n}function BE(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=P(e,["description"]);s!=null&&D(n,["description"],s);const o=P(e,["version"]);o!=null&&D(n,["version"],o);const l=P(e,["_self"]);l!=null&&D(n,["tunedModelInfo"],qce(t,l));const c=P(e,["inputTokenLimit"]);c!=null&&D(n,["inputTokenLimit"],c);const d=P(e,["outputTokenLimit"]);d!=null&&D(n,["outputTokenLimit"],d);const f=P(e,["supportedGenerationMethods"]);return f!=null&&D(n,["supportedActions"],f),n}function Uce(t,e){const n={},a=P(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=P(e,["_self"]);if(i!=null){let s=dU(t,i);Array.isArray(s)&&(s=s.map(o=>BE(t,o))),D(n,["models"],s)}return n}function Vce(){return{}}function Hce(t,e){const n={},a=P(e,["totalTokens"]);a!=null&&D(n,["totalTokens"],a);const i=P(e,["cachedContentTokenCount"]);return i!=null&&D(n,["cachedContentTokenCount"],i),n}function Gce(t,e){const n={},a=P(e,["video","uri"]);a!=null&&D(n,["uri"],a);const i=P(e,["video","encodedVideo"]);i!=null&&D(n,["videoBytes"],xd(t,i));const s=P(e,["encoding"]);return s!=null&&D(n,["mimeType"],s),n}function Wce(t,e){const n={},a=P(e,["_self"]);return a!=null&&D(n,["video"],Gce(t,a)),n}function Yce(t,e){const n={},a=P(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Wce(t,l))),D(n,["generatedVideos"],o)}const i=P(e,["raiMediaFilteredCount"]);i!=null&&D(n,["raiMediaFilteredCount"],i);const s=P(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function Kce(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["metadata"]);i!=null&&D(n,["metadata"],i);const s=P(e,["done"]);s!=null&&D(n,["done"],s);const o=P(e,["error"]);o!=null&&D(n,["error"],o);const l=P(e,["response","generateVideoResponse"]);return l!=null&&D(n,["response"],Yce(t,l)),n}function Qce(t,e){const n={},a=P(e,["displayName"]);a!=null&&D(n,["displayName"],a);const i=P(e,["data"]);i!=null&&D(n,["data"],i);const s=P(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Xce(t,e){const n={},a=P(e,["videoMetadata"]);a!=null&&D(n,["videoMetadata"],a);const i=P(e,["thought"]);i!=null&&D(n,["thought"],i);const s=P(e,["inlineData"]);s!=null&&D(n,["inlineData"],Qce(t,s));const o=P(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=P(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=P(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=P(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=P(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=P(e,["text"]);return p!=null&&D(n,["text"],p),n}function Jce(t,e){const n={},a=P(e,["parts"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Xce(t,o))),D(n,["parts"],s)}const i=P(e,["role"]);return i!=null&&D(n,["role"],i),n}function Zce(t,e){const n={},a=P(e,["citations"]);return a!=null&&D(n,["citations"],a),n}function eue(t,e){const n={},a=P(e,["content"]);a!=null&&D(n,["content"],Jce(t,a));const i=P(e,["citationMetadata"]);i!=null&&D(n,["citationMetadata"],Zce(t,i));const s=P(e,["finishMessage"]);s!=null&&D(n,["finishMessage"],s);const o=P(e,["finishReason"]);o!=null&&D(n,["finishReason"],o);const l=P(e,["avgLogprobs"]);l!=null&&D(n,["avgLogprobs"],l);const c=P(e,["groundingMetadata"]);c!=null&&D(n,["groundingMetadata"],c);const d=P(e,["index"]);d!=null&&D(n,["index"],d);const f=P(e,["logprobsResult"]);f!=null&&D(n,["logprobsResult"],f);const p=P(e,["safetyRatings"]);return p!=null&&D(n,["safetyRatings"],p),n}function j4(t,e){const n={},a=P(e,["candidates"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>eue(t,f))),D(n,["candidates"],d)}const i=P(e,["createTime"]);i!=null&&D(n,["createTime"],i);const s=P(e,["responseId"]);s!=null&&D(n,["responseId"],s);const o=P(e,["modelVersion"]);o!=null&&D(n,["modelVersion"],o);const l=P(e,["promptFeedback"]);l!=null&&D(n,["promptFeedback"],l);const c=P(e,["usageMetadata"]);return c!=null&&D(n,["usageMetadata"],c),n}function tue(t,e){const n={},a=P(e,["truncated"]);a!=null&&D(n,["truncated"],a);const i=P(e,["token_count"]);return i!=null&&D(n,["tokenCount"],i),n}function nue(t,e){const n={},a=P(e,["values"]);a!=null&&D(n,["values"],a);const i=P(e,["statistics"]);return i!=null&&D(n,["statistics"],tue(t,i)),n}function rue(t,e){const n={},a=P(e,["billableCharacterCount"]);return a!=null&&D(n,["billableCharacterCount"],a),n}function aue(t,e){const n={},a=P(e,["predictions[]","embeddings"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>nue(t,o))),D(n,["embeddings"],s)}const i=P(e,["metadata"]);return i!=null&&D(n,["metadata"],rue(t,i)),n}function iue(t,e){const n={},a=P(e,["gcsUri"]);a!=null&&D(n,["gcsUri"],a);const i=P(e,["bytesBase64Encoded"]);i!=null&&D(n,["imageBytes"],xd(t,i));const s=P(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function mU(t,e){const n={},a=P(e,["safetyAttributes","categories"]);a!=null&&D(n,["categories"],a);const i=P(e,["safetyAttributes","scores"]);i!=null&&D(n,["scores"],i);const s=P(e,["contentType"]);return s!=null&&D(n,["contentType"],s),n}function hD(t,e){const n={},a=P(e,["_self"]);a!=null&&D(n,["image"],iue(t,a));const i=P(e,["raiFilteredReason"]);i!=null&&D(n,["raiFilteredReason"],i);const s=P(e,["_self"]);s!=null&&D(n,["safetyAttributes"],mU(t,s));const o=P(e,["prompt"]);return o!=null&&D(n,["enhancedPrompt"],o),n}function sue(t,e){const n={},a=P(e,["predictions"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>hD(t,o))),D(n,["generatedImages"],s)}const i=P(e,["positivePromptSafetyAttributes"]);return i!=null&&D(n,["positivePromptSafetyAttributes"],mU(t,i)),n}function oue(t,e){const n={},a=P(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>hD(t,s))),D(n,["generatedImages"],i)}return n}function lue(t,e){const n={},a=P(e,["predictions"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>hD(t,s))),D(n,["generatedImages"],i)}return n}function cue(t,e){const n={},a=P(e,["endpoint"]);a!=null&&D(n,["name"],a);const i=P(e,["deployedModelId"]);return i!=null&&D(n,["deployedModelId"],i),n}function uue(t,e){const n={},a=P(e,["labels","google-vertex-llm-tuning-base-model-id"]);a!=null&&D(n,["baseModel"],a);const i=P(e,["createTime"]);i!=null&&D(n,["createTime"],i);const s=P(e,["updateTime"]);return s!=null&&D(n,["updateTime"],s),n}function due(t,e){const n={},a=P(e,["checkpointId"]);a!=null&&D(n,["checkpointId"],a);const i=P(e,["epoch"]);i!=null&&D(n,["epoch"],i);const s=P(e,["step"]);return s!=null&&D(n,["step"],s),n}function zE(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["displayName"]);i!=null&&D(n,["displayName"],i);const s=P(e,["description"]);s!=null&&D(n,["description"],s);const o=P(e,["versionId"]);o!=null&&D(n,["version"],o);const l=P(e,["deployedModels"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(x=>cue(t,x))),D(n,["endpoints"],g)}const c=P(e,["labels"]);c!=null&&D(n,["labels"],c);const d=P(e,["_self"]);d!=null&&D(n,["tunedModelInfo"],uue(t,d));const f=P(e,["defaultCheckpointId"]);f!=null&&D(n,["defaultCheckpointId"],f);const p=P(e,["checkpoints"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>due(t,x))),D(n,["checkpoints"],g)}return n}function hue(t,e){const n={},a=P(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=P(e,["_self"]);if(i!=null){let s=dU(t,i);Array.isArray(s)&&(s=s.map(o=>zE(t,o))),D(n,["models"],s)}return n}function fue(){return{}}function pue(t,e){const n={},a=P(e,["totalTokens"]);return a!=null&&D(n,["totalTokens"],a),n}function mue(t,e){const n={},a=P(e,["tokensInfo"]);return a!=null&&D(n,["tokensInfo"],a),n}function gue(t,e){const n={},a=P(e,["gcsUri"]);a!=null&&D(n,["uri"],a);const i=P(e,["bytesBase64Encoded"]);i!=null&&D(n,["videoBytes"],xd(t,i));const s=P(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function yue(t,e){const n={},a=P(e,["_self"]);return a!=null&&D(n,["video"],gue(t,a)),n}function xue(t,e){const n={},a=P(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>yue(t,l))),D(n,["generatedVideos"],o)}const i=P(e,["raiMediaFilteredCount"]);i!=null&&D(n,["raiMediaFilteredCount"],i);const s=P(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function vue(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["metadata"]);i!=null&&D(n,["metadata"],i);const s=P(e,["done"]);s!=null&&D(n,["done"],s);const o=P(e,["error"]);o!=null&&D(n,["error"],o);const l=P(e,["response"]);return l!=null&&D(n,["response"],xue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bue="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jue(t,e,n){const a=new $se;let i;if(n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),t.isVertexAI()){const s=dle(t,i);Object.assign(a,s)}else{const s=ule(t,i);Object.assign(a,s)}e(a)}class wue{constructor(e,n,a){this.apiClient=e,this.auth=n,this.webSocketFactory=a}async connect(e){var n,a,i,s;const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const d=Cue(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d);else{const E=this.apiClient.getApiKey();c=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${E}`}let f=()=>{};const p=new Promise(E=>{f=E}),g=e.callbacks,x=function(){var E;(E=g==null?void 0:g.onopen)===null||E===void 0||E.call(g),f({})},b=this.apiClient,j={onopen:x,onmessage:E=>{jue(b,g.onmessage,E)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(E){},onclose:(a=g==null?void 0:g.onclose)!==null&&a!==void 0?a:function(E){}},S=this.webSocketFactory.create(c,_ue(d),j);S.connect(),await p;let _=Wr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const E=this.apiClient.getProject(),k=this.apiClient.getLocation();_=`projects/${E}/locations/${k}/`+_}let T={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[hd.AUDIO]}:e.config.responseModalities=[hd.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=Ioe(this.apiClient,C):T=Moe(this.apiClient,C),delete T.config,S.send(JSON.stringify(T)),new Sue(S,this.apiClient)}}const Nue={turnComplete:!0};class Sue{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let a=[];try{a=gd(e,n.turns),e.isVertexAI()?a=a.map(i=>Fg(e,i)):a=a.map(i=>KN(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:a,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let a=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?a=n.functionResponses:a=[n.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const s of a){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(bue)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},Nue),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:zoe(this.apiClient,e)}:n={realtimeInput:Boe(this.apiClient,e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function _ue(t){const e={};return t.forEach((n,a)=>{e[a]=n}),e}function Cue(t){const e=new Headers;for(const[n,a]of Object.entries(t))e.append(n,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tue extends Db{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(a=>{var i;let s;const o=[];if(a!=null&&a.generatedImages)for(const c of a.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let l;return s?l={generatedImages:o,positivePromptSafetyAttributes:s}:l={generatedImages:o},l}),this.list=async n=>{var a;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((a=o.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new YN(rg.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const a={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(a.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async n=>{let a={numberOfImages:1,mode:"upscale"};n.config&&(a=Object.assign(Object.assign({},a),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:a};return await this.upscaleImageInternal(i)}}async generateContentInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=v4(this.apiClient,e);return l=un("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=j4(this.apiClient,f),g=new xj;return Object.assign(g,p),g})}else{const d=x4(this.apiClient,e);return l=un("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=b4(this.apiClient,f),g=new xj;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=v4(this.apiClient,e);l=un("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(p){return bw(this,arguments,function*(){var g,x,b,j;try{for(var S=!0,_=FE(p),T;T=yield hi(_.next()),g=T.done,!g;S=!0){j=T.value,S=!1;const E=j4(f,yield hi(j.json())),k=new xj;Object.assign(k,E),yield yield hi(k)}}catch(C){x={error:C}}finally{try{!S&&!g&&(b=_.return)&&(yield hi(b.call(_)))}finally{if(x)throw x.error}}})})}else{const d=x4(this.apiClient,e);l=un("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return bw(this,arguments,function*(){var g,x,b,j;try{for(var S=!0,_=FE(p),T;T=yield hi(_.next()),g=T.done,!g;S=!0){j=T.value,S=!1;const E=b4(f,yield hi(j.json())),k=new xj;Object.assign(k,E),yield yield hi(k)}}catch(C){x={error:C}}finally{try{!S&&!g&&(b=_.return)&&(yield hi(b.call(_)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=lce(this.apiClient,e);return l=un("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=aue(this.apiClient,f),g=new i4;return Object.assign(g,p),g})}else{const d=Tle(this.apiClient,e);return l=un("{model}:batchEmbedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Fce(this.apiClient,f),g=new i4;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=uce(this.apiClient,e);return l=un("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=sue(this.apiClient,f),g=new s4;return Object.assign(g,p),g})}else{const d=Ale(this.apiClient,e);return l=un("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=zce(this.apiClient,f),g=new s4;return Object.assign(g,p),g})}}async editImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=yce(this.apiClient,e);return s=un("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=oue(this.apiClient,c),f=new Dse;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=vce(this.apiClient,e);return s=un("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=lue(this.apiClient,c),f=new Mse;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=bce(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>zE(this.apiClient,f))}else{const d=Ele(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>BE(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=wce(this.apiClient,e);return l=un("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=hue(this.apiClient,f),g=new o4;return Object.assign(g,p),g})}else{const d=Ole(this.apiClient,e);return l=un("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Uce(this.apiClient,f),g=new o4;return Object.assign(g,p),g})}}async update(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Sce(this.apiClient,e);return l=un("{model}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>zE(this.apiClient,f))}else{const d=Mle(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>BE(this.apiClient,f))}}async delete(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=_ce(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(()=>{const f=fue(),p=new l4;return Object.assign(p,f),p})}else{const d=Ile(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Vce(),p=new l4;return Object.assign(p,f),p})}}async countTokens(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Tce(this.apiClient,e);return l=un("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=pue(this.apiClient,f),g=new c4;return Object.assign(g,p),g})}else{const d=Lle(this.apiClient,e);return l=un("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Hce(this.apiClient,f),g=new c4;return Object.assign(g,p),g})}}async computeTokens(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=kce(this.apiClient,e);return s=un("{model}:computeTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>{const d=mue(this.apiClient,c),f=new Ise;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Ece(this.apiClient,e);return l=un("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>vue(this.apiClient,f))}else{const d=Ble(this.apiClient,e);return l=un("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Kce(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kue(t,e){const n={},a=P(e,["operationName"]);a!=null&&D(n,["_url","operationName"],a);const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function Aue(t,e){const n={},a=P(e,["operationName"]);a!=null&&D(n,["_url","operationName"],a);const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function Eue(t,e){const n={},a=P(e,["operationName"]);a!=null&&D(n,["operationName"],a);const i=P(e,["resourceName"]);i!=null&&D(n,["_url","resourceName"],i);const s=P(e,["config"]);return s!=null&&D(n,["config"],s),n}function Pue(t,e){const n={},a=P(e,["video","uri"]);a!=null&&D(n,["uri"],a);const i=P(e,["video","encodedVideo"]);i!=null&&D(n,["videoBytes"],xd(t,i));const s=P(e,["encoding"]);return s!=null&&D(n,["mimeType"],s),n}function Oue(t,e){const n={},a=P(e,["_self"]);return a!=null&&D(n,["video"],Pue(t,a)),n}function Due(t,e){const n={},a=P(e,["generatedSamples"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Oue(t,l))),D(n,["generatedVideos"],o)}const i=P(e,["raiMediaFilteredCount"]);i!=null&&D(n,["raiMediaFilteredCount"],i);const s=P(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function Mue(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["metadata"]);i!=null&&D(n,["metadata"],i);const s=P(e,["done"]);s!=null&&D(n,["done"],s);const o=P(e,["error"]);o!=null&&D(n,["error"],o);const l=P(e,["response","generateVideoResponse"]);return l!=null&&D(n,["response"],Due(t,l)),n}function Iue(t,e){const n={},a=P(e,["gcsUri"]);a!=null&&D(n,["uri"],a);const i=P(e,["bytesBase64Encoded"]);i!=null&&D(n,["videoBytes"],xd(t,i));const s=P(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Rue(t,e){const n={},a=P(e,["_self"]);return a!=null&&D(n,["video"],Iue(t,a)),n}function Lue(t,e){const n={},a=P(e,["videos"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Rue(t,l))),D(n,["generatedVideos"],o)}const i=P(e,["raiMediaFilteredCount"]);i!=null&&D(n,["raiMediaFilteredCount"],i);const s=P(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function w4(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["metadata"]);i!=null&&D(n,["metadata"],i);const s=P(e,["done"]);s!=null&&D(n,["done"],s);const o=P(e,["error"]);o!=null&&D(n,["error"],o);const l=P(e,["response"]);return l!=null&&D(n,["response"],Lue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fue extends Db{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,a=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;return a&&"httpOptions"in a&&(s=a.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:a})}async getVideosOperationInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Aue(this.apiClient,e);return l=un("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>w4(this.apiClient,f))}else{const d=kue(this.apiClient,e);return l=un("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Mue(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=Eue(this.apiClient,e);return s=un("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>w4(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $ue="Content-Type",Bue="X-Server-Timeout",zue="User-Agent",que="x-goog-api-client",Uue="0.14.1",Vue=`google-genai-sdk/${Uue}`,Hue="v1beta1",Gue="v1beta",N4=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class gU extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class qE extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class Wue{constructor(e){var n,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Hue,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:Gue,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,a){const i=[this.getRequestUrlInternal(n)];return a&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))i.searchParams.append(o,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const a=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?a[i]=Object.assign(Object.assign({},a[i]),s):s!==void 0&&(a[i]=s);return a}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,a);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,a){if(n&&n.timeout||a){const i=new AbortController,s=i.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>i.abort(),n.timeout),a&&a.addEventListener("abort",()=>{i.abort()}),e.signal=s}return e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await S4(i),new LE(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:a})).then(async i=>(await S4(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return bw(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:c}=yield hi(i.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(c);try{const p=JSON.parse(d);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),x=g.status,b=g.code,j=`got status: ${x}. ${JSON.stringify(p)}`;if(b>=400&&b<500)throw new gU(j);if(b>=500&&b<600)throw new qE(j)}}catch(p){const g=p;if(g.name==="ClientError"||g.name==="ServerError")throw p}o+=d;let f=o.match(N4);for(;f;){const p=f[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield hi(new LE(g)),o=o.slice(f[0].length),f=o.match(N4)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},n=Vue+" "+this.clientOptions.userAgentExtra;return e[zue]=n,e[que]=n,e[$ue]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[a,i]of Object.entries(e.headers))n.append(a,i);e.timeout&&e.timeout>0&&n.append(Bue,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var a;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const l=(a=n==null?void 0:n.mimeType)!==null&&a!==void 0?a:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,n);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var a;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:un("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(a=o==null?void 0:o.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function S4(t){var e;if(t===void 0)throw new qE("response is undefined");if(!t.ok){const n=t.status,a=t.statusText;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=`got status: ${n} ${a}. ${JSON.stringify(i)}`;throw n>=400&&n<500?new gU(s):n>=500&&n<600?new qE(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yue(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["_url","name"],a);const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function Kue(t,e,n){const a={},i=P(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=P(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=P(e,["filter"]);return n!==void 0&&o!=null&&D(n,["_query","filter"],o),a}function Que(t,e){const n={},a=P(e,["config"]);return a!=null&&D(n,["config"],Kue(t,a,n)),n}function Xue(t,e){const n={},a=P(e,["textInput"]);a!=null&&D(n,["textInput"],a);const i=P(e,["output"]);return i!=null&&D(n,["output"],i),n}function Jue(t,e){const n={};if(P(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=P(e,["examples"]);if(a!=null){let i=a;Array.isArray(i)&&(i=i.map(s=>Xue(t,s))),D(n,["examples","examples"],i)}return n}function Zue(t,e,n){const a={};if(P(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=P(e,["tunedModelDisplayName"]);if(n!==void 0&&i!=null&&D(n,["displayName"],i),P(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=P(e,["epochCount"]);n!==void 0&&s!=null&&D(n,["tuningTask","hyperparameters","epochCount"],s);const o=P(e,["learningRateMultiplier"]);if(o!=null&&D(a,["tuningTask","hyperparameters","learningRateMultiplier"],o),P(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(P(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=P(e,["batchSize"]);n!==void 0&&l!=null&&D(n,["tuningTask","hyperparameters","batchSize"],l);const c=P(e,["learningRate"]);return n!==void 0&&c!=null&&D(n,["tuningTask","hyperparameters","learningRate"],c),a}function ede(t,e){const n={},a=P(e,["baseModel"]);a!=null&&D(n,["baseModel"],a);const i=P(e,["trainingDataset"]);i!=null&&D(n,["tuningTask","trainingData"],Jue(t,i));const s=P(e,["config"]);return s!=null&&D(n,["config"],Zue(t,s,n)),n}function tde(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["_url","name"],a);const i=P(e,["config"]);return i!=null&&D(n,["config"],i),n}function nde(t,e,n){const a={},i=P(e,["pageSize"]);n!==void 0&&i!=null&&D(n,["_query","pageSize"],i);const s=P(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=P(e,["filter"]);return n!==void 0&&o!=null&&D(n,["_query","filter"],o),a}function rde(t,e){const n={},a=P(e,["config"]);return a!=null&&D(n,["config"],nde(t,a,n)),n}function ade(t,e,n){const a={},i=P(e,["gcsUri"]);if(n!==void 0&&i!=null&&D(n,["supervisedTuningSpec","trainingDatasetUri"],i),P(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function ide(t,e){const n={},a=P(e,["gcsUri"]);return a!=null&&D(n,["validationDatasetUri"],a),n}function sde(t,e,n){const a={},i=P(e,["validationDataset"]);n!==void 0&&i!=null&&D(n,["supervisedTuningSpec"],ide(t,i));const s=P(e,["tunedModelDisplayName"]);n!==void 0&&s!=null&&D(n,["tunedModelDisplayName"],s);const o=P(e,["description"]);n!==void 0&&o!=null&&D(n,["description"],o);const l=P(e,["epochCount"]);n!==void 0&&l!=null&&D(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=P(e,["learningRateMultiplier"]);n!==void 0&&c!=null&&D(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const d=P(e,["exportLastCheckpointOnly"]);n!==void 0&&d!=null&&D(n,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const f=P(e,["adapterSize"]);if(n!==void 0&&f!=null&&D(n,["supervisedTuningSpec","hyperParameters","adapterSize"],f),P(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(P(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return a}function ode(t,e){const n={},a=P(e,["baseModel"]);a!=null&&D(n,["baseModel"],a);const i=P(e,["trainingDataset"]);i!=null&&D(n,["supervisedTuningSpec","trainingDatasetUri"],ade(t,i,n));const s=P(e,["config"]);return s!=null&&D(n,["config"],sde(t,s,n)),n}function lde(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["model"],a);const i=P(e,["name"]);return i!=null&&D(n,["endpoint"],i),n}function yU(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["state"]);i!=null&&D(n,["state"],lU(t,i));const s=P(e,["createTime"]);s!=null&&D(n,["createTime"],s);const o=P(e,["tuningTask","startTime"]);o!=null&&D(n,["startTime"],o);const l=P(e,["tuningTask","completeTime"]);l!=null&&D(n,["endTime"],l);const c=P(e,["updateTime"]);c!=null&&D(n,["updateTime"],c);const d=P(e,["description"]);d!=null&&D(n,["description"],d);const f=P(e,["baseModel"]);f!=null&&D(n,["baseModel"],f);const p=P(e,["_self"]);p!=null&&D(n,["tunedModel"],lde(t,p));const g=P(e,["distillationSpec"]);g!=null&&D(n,["distillationSpec"],g);const x=P(e,["experiment"]);x!=null&&D(n,["experiment"],x);const b=P(e,["labels"]);b!=null&&D(n,["labels"],b);const j=P(e,["pipelineJob"]);j!=null&&D(n,["pipelineJob"],j);const S=P(e,["tunedModelDisplayName"]);return S!=null&&D(n,["tunedModelDisplayName"],S),n}function cde(t,e){const n={},a=P(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=P(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>yU(t,o))),D(n,["tuningJobs"],s)}return n}function ude(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["metadata"]);i!=null&&D(n,["metadata"],i);const s=P(e,["done"]);s!=null&&D(n,["done"],s);const o=P(e,["error"]);return o!=null&&D(n,["error"],o),n}function dde(t,e){const n={},a=P(e,["checkpointId"]);a!=null&&D(n,["checkpointId"],a);const i=P(e,["epoch"]);i!=null&&D(n,["epoch"],i);const s=P(e,["step"]);s!=null&&D(n,["step"],s);const o=P(e,["endpoint"]);return o!=null&&D(n,["endpoint"],o),n}function hde(t,e){const n={},a=P(e,["model"]);a!=null&&D(n,["model"],a);const i=P(e,["endpoint"]);i!=null&&D(n,["endpoint"],i);const s=P(e,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>dde(t,l))),D(n,["checkpoints"],o)}return n}function UE(t,e){const n={},a=P(e,["name"]);a!=null&&D(n,["name"],a);const i=P(e,["state"]);i!=null&&D(n,["state"],lU(t,i));const s=P(e,["createTime"]);s!=null&&D(n,["createTime"],s);const o=P(e,["startTime"]);o!=null&&D(n,["startTime"],o);const l=P(e,["endTime"]);l!=null&&D(n,["endTime"],l);const c=P(e,["updateTime"]);c!=null&&D(n,["updateTime"],c);const d=P(e,["error"]);d!=null&&D(n,["error"],d);const f=P(e,["description"]);f!=null&&D(n,["description"],f);const p=P(e,["baseModel"]);p!=null&&D(n,["baseModel"],p);const g=P(e,["tunedModel"]);g!=null&&D(n,["tunedModel"],hde(t,g));const x=P(e,["supervisedTuningSpec"]);x!=null&&D(n,["supervisedTuningSpec"],x);const b=P(e,["tuningDataStats"]);b!=null&&D(n,["tuningDataStats"],b);const j=P(e,["encryptionSpec"]);j!=null&&D(n,["encryptionSpec"],j);const S=P(e,["partnerModelTuningSpec"]);S!=null&&D(n,["partnerModelTuningSpec"],S);const _=P(e,["distillationSpec"]);_!=null&&D(n,["distillationSpec"],_);const T=P(e,["experiment"]);T!=null&&D(n,["experiment"],T);const C=P(e,["labels"]);C!=null&&D(n,["labels"],C);const E=P(e,["pipelineJob"]);E!=null&&D(n,["pipelineJob"],E);const k=P(e,["tunedModelDisplayName"]);return k!=null&&D(n,["tunedModelDisplayName"],k),n}function fde(t,e){const n={},a=P(e,["nextPageToken"]);a!=null&&D(n,["nextPageToken"],a);const i=P(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>UE(t,o))),D(n,["tuningJobs"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pde extends Db{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new YN(rg.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const a=await this.tuneMldevInternal(n);let i="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?i=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(i=a.name.split("/operations/")[0]),{name:i,state:RE.JOB_STATE_QUEUED}}}}async getInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=tde(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>UE(this.apiClient,f))}else{const d=Yue(this.apiClient,e);return l=un("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>yU(this.apiClient,f))}}async listInternal(e){var n,a,i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=rde(this.apiClient,e);return l=un("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),o.then(f=>{const p=fde(this.apiClient,f),g=new u4;return Object.assign(g,p),g})}else{const d=Que(this.apiClient,e);return l=un("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=cde(this.apiClient,f),g=new u4;return Object.assign(g,p),g})}}async tuneInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI()){const l=ode(this.apiClient,e);return s=un("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>UE(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,a;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ede(this.apiClient,e);return s=un("tunedModels",l._url),o=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),i.then(c=>ude(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mde{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const gde=1024*1024*8,yde=3,xde=1e3,vde=2,jC="x-goog-upload-status";async function bde(t,e,n){var a,i,s;let o=0,l=0,c=new LE(new Response),d="upload";for(o=t.size;l<o;){const p=Math.min(gde,o-l),g=t.slice(l,l+p);l+p>=o&&(d+=", finalize");let x=0,b=xde;for(;x<yde&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((a=c==null?void 0:c.headers)===null||a===void 0)&&a[jC]));)x++,await wde(b),b=b*vde;if(l+=p,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[jC])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[jC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function jde(t){return{size:t.size,type:t.type}}function wde(t){return new Promise(e=>setTimeout(e,t))}class Nde{async upload(e,n,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bde(e,n,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jde(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sde{create(e,n,a){return new _de(e,n,a)}}class _de{constructor(e,n,a){this.url=e,this.headers=n,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _4="x-goog-api-key";class Cde{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(_4)===null&&e.append(_4,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tde="gl-node/";class xU{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const a=Lie(e,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const i=new Cde(this.apiKey);this.apiClient=new Wue({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Tde+"web",uploader:new Nde,downloader:new mde}),this.models=new Tue(this.apiClient),this.live=new wue(this.apiClient,i,new Sde),this.chats=new Vse(this.models,this.apiClient),this.caches=new Bse(this.apiClient),this.files=new roe(this.apiClient),this.operations=new Fue(this.apiClient),this.tunings=new pde(this.apiClient)}}const kde=()=>{const t=localStorage.getItem("currentClinicId");return t||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},vU=()=>localStorage.getItem("authToken");class Ade{constructor(){br(this,"listeners",[]);br(this,"activeRequests",0)}subscribe(e){return this.listeners.push(e),e(this.activeRequests>0),()=>this.unsubscribe(e)}unsubscribe(e){this.listeners=this.listeners.filter(n=>n!==e)}notify(e){e?this.activeRequests++:this.activeRequests=Math.max(0,this.activeRequests-1);const n=this.activeRequests>0;this.listeners.forEach(a=>a(n))}}const VE=new Ade,Ede="https://backend.newtons.in",Pde=()=>localStorage.getItem("authToken"),se=async(t,e={})=>{const n=Pde(),a={...e.headers};n&&(a.Authorization=`Bearer ${n}`),!(e.body instanceof FormData)&&!a["Content-Type"]&&(a["Content-Type"]="application/json");const i=a;let s=t.startsWith("/")?t:`/${t}`;s.startsWith("/api/")||(s=`/api${s}`);const o=`${Ede}${s}`;VE.notify(!0);try{console.log(`Making API call to: ${o}`);const l=await fetch(o,{...e,headers:i});if(l.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!l.ok){let c=`HTTP error! status: ${l.status}`;try{const d=await l.json();c=(d==null?void 0:d.message)||(d==null?void 0:d.error)||c}catch{}throw console.error(`API Error: ${l.status} ${l.statusText} - ${c}`),new Error(c)}return l}catch(l){throw l instanceof TypeError&&l.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",l):console.error("API Fetch Error:",l),l}finally{VE.notify(!1)}},wC="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Ode="models/gemini-3-flash-preview",Dde=`You are an intelligent Clinic Hub Assistant for a Clinic Management System. Your role is to help the Clinic Administrator or Doctor manage their clinic ecosystem efficiently.

You have access to the current state of the clinic settings and the staff list. You can perform actions to update these settings or manage staff members.

**Capabilities:**
1.  **View Settings & Staff:** User can ask about current charges, clinic details, or staff members. Answer based on the provided context.
2.  **Update Settings:** Change fees, clinic name, address, etc.
3.  **Manage Staff:** Add new staff members or update existing ones.
4.  **Voice AI Settings:** Update the \`voice_ai_language\` for the Live API Assistant. Available codes:
    -   India: \`en-US\` (English), \`hi-IN\` (Hindi), \`te-IN\` (Telugu), \`bn-IN\` (Bengali), \`mr-IN\` (Marathi), \`ta-IN\` (Tamil), \`gu-IN\` (Gujarati), \`kn-IN\` (Kannada), \`ml-IN\` (Malayalam), \`pa-IN\` (Punjabi)
    -   Global: \`es-ES\` (Spanish), \`fr-FR\` (French), \`de-DE\` (German), \`it-IT\` (Italian), \`pt-PT\` (Portuguese), \`ru-RU\` (Russian), \`ja-JP\` (Japanese), \`ko-KR\` (Korean), \`zh-CN\` (Chinese), \`ar-SA\` (Arabic).
5.  **Analyze Financials & Inventory:** Access the Analysis Dashboard to view revenue, expenses, and inventory movement. Set date ranges to filter data.
6.  **Manage Inventory:** Update pharmacy tokens (drugs) and lab tests. You will reference items by their **Serial Number** as provided in the context.
7.  **Purchase Management:** Search for distributors, select one, and build a purchase order by adding items. You can add multiple items at once. Editing items uses Serial Numbers.
8.  **Looping & Reasoning:** You should think step-by-step. If a user request involves multiple steps or if you need to check something after an action, you can continue the loop.
9.  **Follow-up:** If critical information is missing, ask the user.
10.  **Manage Custom Columns:** You can add or remove custom columns/fields for various entities (patients, drugs, lab_tests). Use the \`manage_custom_columns\` action.
11.  **Custom Fields Data:** When searching or updating items (like drugs or patients), pay attention to their \`custom_fields\`. You can update these fields using the \`update_drug\` (or similar) action by passing a \`custom_fields\` object with key-value pairs. Keys must match the \`key\` defined in the Clinic Settings.
12.  **Custom Tables:** You can create entirely new tables to track anything (e.g., "Gym Members", "Diet Plans"). Use \`create_custom_table\`. You can then add rows to these tables using \`add_table_row\` (requires Table ID) and update them with \`update_table_row\`. meaningful descriptions are helpful.
13.  **Dashboards:** You can create persistent custom dashboards using \`create_custom_dashboard\` or show a specialized temporary view using \`render_temporary_dashboard\`.
     - Use \`render_temporary_dashboard\` when the user asks to "show", "view", or "see" data (e.g., "Show me John's meds").
     - Use \`create_custom_dashboard\` when the user explicitly asks to "create a dashboard" or "save a view".
     - **Data Sources:** Use the provided "Dashboard Data Sources" context to know valid keys (e.g., \`api:patients\`, \`table:123\`).
       - **Advanced Features:** You can add **Charts** (bar, line, pie) and **Filters** to widgets.
       - **Filters (SERVER-SIDE):** Use the \`filters\` array in config. Filters are applied on the server for efficiency.
         - **Supported Operators:**
           - \`equals\` or \`eq\`: Exact match
           - \`neq\` or \`not_equals\`: Not equal
           - \`contains\` or \`like\`: Case-insensitive substring match
           - \`starts_with\`: Value starts with
           - \`ends_with\`: Value ends with
           - \`gt\` or \`greater_than\`: Greater than
           - \`gte\`: Greater than or equal
           - \`lt\` or \`less_than\`: Less than
           - \`lte\`: Less than or equal
           - \`in\`: Value in array (value should be array)
           - \`not_in\`: Value not in array
           - \`is_null\`: Field is null
           - \`is_not_null\`: Field is not null
           - \`between\`: Value between two values (value should be [min, max])
         - **Filterable Fields:** The "Dashboard Data Sources" in context includes a \`filterableFields\` list for each source. You **MUST** use these fields.
           - **Mixed Tables:** Sources like \`api:pharmacy-orders\` or \`api:lab-orders\` support filtering by associated **Patient** data using \`patient_name\`, \`patient_phone\`, and \`token\`.
         - **Example 1:** User: "Show pharmacy orders for John" -> Action: \`render_temporary_dashboard\` with widget config: \`filters: [{ field: 'patient_name', operator: 'contains', value: 'John' }]\`
         - **Example 2:** User: "Show orders for Token 123" -> \`filters: [{ field: 'token', operator: 'equals', value: 123 }]\`
         - **Example 3:** \`filters: [{ field: 'expiry_date', operator: 'lt', value: '2024-01-01' }, { field: 'stock', operator: 'gt', value: 0 }]\`
         - Smartly infer dates for "expired" (lt today), "expiring this week" (between today and next week), etc.
       - **Charts:** Set \`type: 'chart'\`. Config requires \`chartType\`, \`xAxisKey\` (category), \`dataKey\` (value).

**Interpretation Rules:**
- **Analysis Dates:** When the user asks for analysis (financial or inventory) for a specific time range (e.g., "last month", "yesterday"), you **MUST** include \`startDate\` and \`endDate\` in the \`navigate_to\` action for \`/dashboard/analysis\`.
- If the user says "add drug", "buy medicine", or "new stock", they **usually mean "Add Item to Purchase Order"** (use \`add_purchase_items\` or navigate to \`/dashboard/purchase\`).
- **Prerequisite:** If you are using ANY purchase tools (\`add_purchase_items\`, \`search_distributor_purchase\`, \`set_distributor_purchase\`, \`edit_purchase_items\`), you **MUST** include a \`navigate_to\` action with \`page: "/dashboard/purchase"\` as the **FIRST** action in your list, unless you are already on that page.
- **ONLY** use \`update_drug\` (create) if the user explicitly says "create new drug definition" or "add to master inventory".
- The correct route for purchasing is \`/dashboard/purchase\`.

- **Drug Name & Brand Handling (CRITICAL):**
  - "Name" refers to the **Composition Name** (or Generic Name).
  - "Brand Name" refers to the **Brand Name**.
  - **Auto-Computation:** If the user provides a *Brand Name* (e.g., "Tab Dolo 650"), you **MUST** automatically:
    1.  Infer the **Composition** (e.g., "Tab Paracetamol 650mg") and use it for the "name" field.
    2.  Use the provided brand for the "brand_name" field (e.g., "Dolo 650").
    3.  Infer the **pack size** if implied (e.g., "1x10") and use it for the "pack" field.
  - If the user provides only a Brand Name and you cannot confidently infer the Composition, you **MUST** use \`ask_followup_question\` to ask the user for the composition.
  - Apply this logic to both \`add_purchase_items\` and \`update_drug\` actions.

- **Inventory Navigation:** If you execute "update_drug" or "search_pharmacy_inventory", you **MUST** include a "navigate_to" action for "/dashboard/inventory". If you searched for or updated a specific term, append it as "?search=Term" (e.g. "/dashboard/inventory?search=Paracetamol").
- **Lab Navigation:** If you execute "update_lab_test", you **MUST** include a "navigate_to" action for "/lab-inventory", unless you are already on that page.

**Action Tools:**
You can perform the following actions. Return a JSON array of actions.

\`\`\`json
[
    {
        "action": "update_clinic_settings",
        "updates": {
            "admissionCharge": "number string",
            "perDayCharge": "number string",
            "otherCharges": "number string",
            "name": "string",
            "address": "string",
            "notes": "string",
            "logoUrl": "string",
            "upi_id": "string",
            "low_stock_threshold": number,
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "gemini_api_key": "string",
            "voice_ai_language": "string (e.g. 'en-US', 'te-IN')"
        }
    },
    {
        "action": "create_staff_member",
        "staff": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null
        }
    },
    {
        "action": "update_staff_member",
        "id": "string | number",
        "updates": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null,
            "active": boolean
        }
    },
    {
        "action": "set_analysis_dates",
        "startDate": "YYYY-MM-DD",
        "endDate": "YYYY-MM-DD"
    },
    {
        "action": "navigate_to",
        "page": "/dashboard/inventory" | "/lab-inventory" | "/dashboard/queue" | "/dashboard/staff" | "/dashboard/purchase" | "/dashboard/analysis" | "/dashboard/clinic-hub" | "/billing" | "/dashboard/patients",
        "section": "financial" | "inventory" | "string (optional)",
        "startDate": "YYYY-MM-DD (optional, for analysis page)",
        "endDate": "YYYY-MM-DD (optional, for analysis page)"
    },
    {
        "action": "highlight_section",
        "elementId": "string"
    },
    {
        "action": "refresh_analysis"
    },
    {
        "action": "ask_followup_question",
        "question": "string"
    },
    {
        "action": "search_pharmacy_inventory",
        "query": "string (name, brand, or composition)"
    },
    {
        "action": "update_drug",
        "id": "number",
        "updates": {
            "name": "string",
            "brand_name": "string",
            "description": "string",
            "mrp": "number (MRP)",
            "stock": "number",
            "pack": "string (e.g. strip, bottle)",
            "supplier": "string",
            "expiry_date": "YYYY-MM-DD",
            "rate": "number",
            "box_number": "string",
            "gst": "number",
            "margin": "number",
            "discount": "number",
            "batch": "string",
            "hsn_code": "string",
            "mfg": "string",
            "mfg": "string",
            "loose": "number",
            "custom_fields": "object { key: value } (Optional: Update custom field values)"
        }
    },
    {
        "action": "update_lab_test",
        "serial_number": 1,
        "updates": {
            "name": "string",
            "price": "number",
            "description": "string",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit }"
        }
    },
    {
        "action": "search_lab_inventory",
        "query": "string (test name or description)"
    },
    {
        "action": "create_lab_test",
        "test": {
            "name": "string",
            "price": "number",
            "description": "string (optional)",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit } (optional)"
        }
    },
    {
        "action": "search_distributor_purchase",
        "query": "string"
    },
    {
        "action": "set_distributor_purchase",
        "distributorId": "string"
    },
    {
        "action": "add_purchase_items",
        "items": [
            {
                "name": "string (Composition Name)",
                "brand_name": "string",
                "stock": "number (quantity)",
                "rate": "number (buying price)",
                "mrp": "number",
                "pack": "string",
                "expiry_date": "YYYY-MM-DD",
                "batch": "string",
                "discount": "number",
                "gst": "number"
            }
        ]
    },
    {
        "action": "edit_purchase_items",
        "updates": [
            {
                "serial_number": "number (The Row # from context)",
                "field": "string (name, stock, rate, etc.)",
                "value": "string | number"
            }
        ]
    },
    {
        "action": "end_task",
        "summary": "string"
    },
    {
        "action": "open_new_case",
        "name": "string (Patient Name)",
        "age": "number (optional)",
        "gender": "M | F | O (optional)",
        "phone": "string (optional)",
        "complaint": "string (The medical complaint/reason)"
    },
    {
        "action": "manage_custom_columns",
        "entity": "patients" | "drugs" | "lab_tests",
        "operation": "add" | "remove",
        "column": {
            "label": "string",
            "type": "text" | "number" | "date" | "boolean",
            "required": boolean
        }
    },
    {
        "action": "create_custom_table",
        "name": "string",
        "description": "string (optional)",
        "columns": [
            {
                "label": "string",
                "type": "text" | "number" | "date" | "boolean",
                "required": boolean
            }
        ]
    },
    {
        "action": "add_table_row",
        "tableId": "string (The ID of the custom table)",
        "data": "object { key: value } (Keys must match column keys derived from labels)"
    },
    {
        "tableId": "string",
        "recordId": "string (The ID of the row/record to update)",
        "data": "object { key: value } (Updates to apply)"
    },
    {
        "action": "create_custom_dashboard",
        "name": "string",
        "description": "string (optional)",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string (one of the keys from Dashboard Data Sources, e.g. api:patients, table:xyz)",
                "config": "object { columns?: string[], label?: string, chartType?: 'bar'|'line'|'pie', xAxisKey?: string, dataKey?: string, filters?: Array<{field, operator, value}> }"
            }
        ]
    },
    {
        "action": "render_temporary_dashboard",
        "title": "string",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string",
                "config": "object { columns?: [], label?, chartType?, xAxisKey?, dataKey?, filters?: [] }"
            }
        ]
    }
]
\`\`\`

**Navigation Reference:**
- **Pharmacy Inventory:** \`/dashboard/inventory\`
- **Lab Inventory:** \`/lab-inventory\`
- **Doctor Queue:** \`/dashboard/queue\`
- **Staff Management:** \`/dashboard/staff\`
- **All Patients:** \`/dashboard/patients\`
- **Billing:** \`/billing\`
- **Purchase Page:** \`/dashboard/purchase\`
- **Analysis:** \`/dashboard/analysis\`
- **Clinic Hub:** \`/dashboard/clinic-hub\`
\`\`\`

**Rules:**
-   **Always** return a JSON array as the last part of your response.
-   If the user's request is satisfied, use the \`end_task\` action with a summary of what was done.
-   If you need more info, use \`ask_followup_question\`.
-   If you perform an action (like updating settings), and there's nothing else to do *immediately* but you want to confirm it's done, you can return the action. The system will execute it and call you back with the result. Then you can \`end_task\`.
-   For \`create_staff_member\`, if password is not provided by user, generate a secure random password and mention it in the summary.
-   Update numeric strings as strings (e.g., "500.00").
-   **CRITICAL DO's and DON'Ts:**
    -   **DO NOT** fill in empty fields (like \`gemini_api_key\`, \`logoUrl\`, \`upi_id\`, etc.) with fake, placeholder, or example data.
    -   **ONLY** update fields that the user *intentionally* asked to change.
    -   **PRESERVE** existing values for any fields not explicitly mentioned in the user's request.
    -   If a field is empty and the user didn't ask to set it, **leave it empty**.
    -   Do not invent values.
`;async function Mde(){var n;if(!vU()&&wC)return wC;let e=null;try{const a=await se("/api/clinics/settings");if(a.ok){const i=await a.json();(n=i.gemini_api_key)!=null&&n.trim()&&(e=i.gemini_api_key.trim())}}catch(a){console.warn("Error fetching updated key",a)}if(e)return e;try{const a=await se("/api/global-settings/app_gemini_api_key");if(a.ok){const s=(await a.json()).value;if(s&&s.trim()!=="")return s.trim()}}catch(a){console.warn("Could not fetch global API key.",a)}return wC}async function Ide(t,e,n=[],a){var f,p,g,x,b,j;let i=(f=e.settings)==null?void 0:f.gemini_api_key;if(!i||!i.trim())try{i=await Mde()}catch(S){console.warn("Using fallback key or failing:",S)}if(!i)throw new Error("No Gemini API Key provided in settings or environment.");const s=new xU({apiKey:i}),o=[];o.push({role:"user",parts:[{text:Dde}]}),o.push({role:"model",parts:[{text:"Understood. I am ready to assist with Clinic Hub management."}]}),n.forEach(S=>{o.push({role:S.role,parts:[{text:S.text}]})});const d=[{text:`
    Context:
    ${`
    --- Current Clinic Context ---
    Settings: ${JSON.stringify(e.settings,null,2)}
    
    Custom Columns Configuration: ${JSON.stringify(e.settings.custom_columns_config||{},null,2)}

    Custom Tables (Available for adding/editing rows): ${JSON.stringify(e.customTables||[],null,2)}
    
    Dashboard Data Sources (Use these keys for widgets): ${JSON.stringify(e.dashboardDataSources||[],null,2)}

    --- DYNAMIC CONTEXT DATA (Configured tables with <200 rows) ---
    ${Object.entries(e.dynamicContextData||{}).map(([S,_])=>{const T=(_.data||[]).slice(0,50).map((C,E)=>({_sn:E+1,...C}));return`${_.label||S} (${_.count||0} records): ${JSON.stringify(T,null,2)}`}).join(`

`)}
    --- END DYNAMIC CONTEXT ---

    Staff List: ${JSON.stringify(e.staffList.map(S=>({id:S.id||S._id,name:S.name,role:S.role,email:S.email,active:S.active,opd_fee:S.opd_fee})),null,2)}
    
    Previous Action Results (if any): ${JSON.stringify(e.actionResults||[],null,2)}

    Analysis Data (if active): ${JSON.stringify(e.analysisData||{},null,2)}

    Pharmacy Inventory: ${e.pharmacyInventory?JSON.stringify(e.pharmacyInventory,null,2):"Not loaded. Use 'search_pharmacy_inventory' to find items."}

    Distributors List: ${JSON.stringify((e.distributors||[]).map(S=>({serial_number:S.serial_number,name:S.name,contact_person:S.contact_person,phone:S.phone,remainingBalance:S.remainingBalance})),null,2)}

    Lab Tests Inventory: ${JSON.stringify((e.labInventory||[]).map(S=>({serial:S.serial_number,name:S.name,price:S.price,description:S.description,default_parameters:S.default_parameters})),null,2)}

    Current Purchase Page Rows: ${JSON.stringify((e.purchaseRows||[]).map((S,_)=>({serial_number:_+1,name:S.name,stock:S.stock,rate:S.rate,mrp:S.mrp,net_value:(S.stock*S.rate).toFixed(2)})),null,2)}

    Current Application Page Context: ${e.pageContext?JSON.stringify(e.pageContext,null,2):"Unknown/General Dashboard"}
    `}

    User Query/Input:
    ${t}
    `}];if(a){const S=a.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"");d.push({inlineData:{data:S,mimeType:"image/jpeg"}})}o.push({role:"user",parts:d});try{const S={model:Ode,contents:o,generationConfig:{temperature:.7,maxOutputTokens:2048,responseMimeType:"text/plain"}},_=await s.models.generateContentStream(S);let T="";for await(const C of _){const E=C;E.text&&typeof E.text=="function"?T+=E.text():(j=(b=(x=(g=(p=E.candidates)==null?void 0:p[0])==null?void 0:g.content)==null?void 0:x.parts)==null?void 0:b[0])!=null&&j.text&&(T+=E.candidates[0].content.parts[0].text)}if(!T)throw new Error("Empty response from AI");return T}catch(S){throw console.error("Gemini Interaction Error:",S),new Error("Failed to communicate with AI Assistant.")}}const fD=({settings:t,staffList:e,onSettingsUpdate:n,onStaffUpdate:a,onHighlight:i,enableDynamicContext:s=!1})=>{const o=Lt(),l=ds(),{setAnalysisDateRange:c,analysisData:d,analysisNavigate:f,refreshAnalysis:p,pageContext:g}=LN(),{setDistributors:x,setSelectedDistributor:b,setSearchTerm:j,addPurchaseRow:S,updatePurchaseRow:_,distributors:T,purchaseRows:C}=Tz(),[E,k]=v.useState(""),O=v.useRef(d),I=v.useRef(C);v.useEffect(()=>{O.current=d},[d]),v.useEffect(()=>{I.current=C},[C]);const[F,B]=v.useState([]),[$,L]=v.useState([]),[V,H]=v.useState([]),[ne,Q]=v.useState(!1),[q,G]=v.useState(null),ie=v.useRef(!1),W=v.useRef(0),z=5,ce=()=>{ie.current=!1,Q(!1),H(me=>[...me,{role:"system",text:" Task stopped by user."}])},je=me=>{const ye=new FileReader;ye.onloadend=()=>{G(ye.result)},ye.readAsDataURL(me)},Y=()=>{G(null)},[Ie,Ue]=v.useState(null),ze=()=>Ue(null),Le=async(me,ye)=>{if(!Ie)return;const le={name:me,description:ye,widgets:Ie.widgets};if(!(await se("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)})).ok)throw new Error("Failed to save dashboard");Ue(null)},be=async(me,ye,le=[],X)=>{var ae,de,ee;if(ie.current){if(W.current+=1,W.current>z){H(Ne=>[...Ne,{role:"system",text:" Task limit reached. Stopping automatically."}]),Q(!1),ie.current=!1;return}try{let Ne=t,Te=e,Fe=[],xe=[],te=[],oe=[],_e=[];try{const[we,Xe]=await Promise.all([se("/api/clinics/settings"),se("/staff")]);if(we.ok&&Xe.ok){const Je=await we.json(),ct=await Xe.json(),[Ct,bt,ke,ot]=await Promise.all([se("/api/drugs"),se("/api/lab-tests"),se("/api/distributors"),se("/api/custom-tables"),se("/api/dashboards/data-sources")]);if(Ct.ok){const Tt=await Ct.json();Fe=Tt.drugs||Tt||[]}if(bt.ok){const Ve=(await bt.json()).map((jt,kt)=>({...jt,serial_number:kt+1}));xe=Ve,B(Ve)}if(ke.ok&&(te=(await ke.json()||[]).map((Ve,jt)=>({...Ve,serial_number:jt+1}))),ot.ok){const Tt=await ot.json();oe=Tt,L(Tt)}try{const Tt=await se("/api/dashboards/data-sources");Tt.ok&&(_e=await Tt.json())}catch(Tt){console.warn("Failed to fetch dashboard sources",Tt)}Ne={...Je,admissionCharge:parseFloat(Je.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(Je.perDayCharge||0).toFixed(2),otherCharges:parseFloat(Je.otherCharges||0).toFixed(2),aiMemory:Je.aiMemory||"",clinicWideSystemPrompt:Je.clinicWideSystemPrompt||"",gemini_api_key:Je.gemini_api_key||"",low_stock_threshold:Je.low_stock_threshold!==void 0&&Je.low_stock_threshold!==null?String(Je.low_stock_threshold):"10",name:Je.name||"",logoUrl:Je.logoUrl||"",upi_id:Je.upi_id||"",address:Je.address||"",notes:Je.notes||"",clinic_id:Je.clinic_id},Te=ct.map(Tt=>({...Tt,id:Tt._id||Tt.id}))}}catch(we){console.warn("Failed to fetch fresh context for AI loop, falling back to props",we)}let Oe={};if(s)try{const we=await se("/api/ai-context/data");we.ok&&(Oe=await we.json())}catch(we){console.warn("Failed to fetch dynamic AI context",we)}const K={settings:Ne,staffList:Te,analysisData:O.current,pharmacyInventory:Fe.length>50?void 0:Fe,labInventory:xe,distributors:te,purchaseRows:I.current,actionResults:le,pageContext:g||void 0,customTables:oe,dashboardDataSources:_e,dynamicContextData:Oe},ge=ye.filter(we=>we.role!=="system"),ue=await Ide(me,K,ge,X);if(!ie.current)return;let fe=[];try{const we=ue.match(/\[[\s\S]*\]/);if(we)fe=JSON.parse(we[0]);else{H(Xe=>[...Xe,{role:"model",text:ue}]),Q(!1),ie.current=!1;return}}catch(we){console.error("Failed to parse AI response",we),H(Xe=>[...Xe,{role:"model",text:"I'm having trouble processing that. Please try again."}]),Q(!1),ie.current=!1;return}const Ee=[];let Ke=[],$e=[];for(const we of fe){if(!ie.current)break;if(we.action==="end_task"){H(Xe=>[...Xe,{role:"model",text:we.summary}]),Q(!1),ie.current=!1;return}if(we.action==="ask_followup_question"){H(Xe=>[...Xe,{role:"model",text:we.question}]),Q(!1),ie.current=!1;return}try{if(we.action==="update_clinic_settings"){const Xe=we.updates;Object.keys(Xe).forEach(Ct=>Ke.push(`setting-${Ct}`));const Je={...Ne,...Xe},ct={...Je,admissionCharge:parseFloat(Je.admissionCharge),perDayCharge:parseFloat(Je.perDayCharge),otherCharges:parseFloat(Je.otherCharges),low_stock_threshold:parseInt(Je.low_stock_threshold)};await se("/api/clinics/settings",{method:"PUT",body:JSON.stringify(ct)}),n&&n(),Ee.push({action:"update_clinic_settings",status:"success"}),$e.push({role:"system",text:" Updated clinic settings"})}if(we.action==="create_staff_member"&&(await se("/api/staff",{method:"POST",body:JSON.stringify({...we.staff,clinic_id:Ne.clinic_id})}),a&&a(),Ee.push({action:"create_staff_member",status:"success",name:we.staff.name}),$e.push({role:"system",text:` Created staff member: ${we.staff.name}`})),we.action==="update_staff_member"){const Xe=we.id;await se(`/api/staff/${Xe}`,{method:"PUT",body:JSON.stringify(we.updates)}),a&&a(),Ke.push(`staff-member-${Xe}`),Ee.push({action:"update_staff_member",status:"success",id:Xe}),$e.push({role:"system",text:" Updated staff member details"})}if(we.action==="set_analysis_dates"){const{startDate:Xe,endDate:Je}=we;c({startDate:new Date(Xe),endDate:new Date(Je)}),Ee.push({action:"set_analysis_dates",status:"success",startDate:Xe,endDate:Je}),$e.push({role:"system",text:` Set analysis dates: ${Xe} to ${Je}`})}if(we.action==="navigate_to"){let Xe=we.page;if(we.page&&we.page.includes("analysis")&&we.startDate&&we.endDate){const Je=Xe.includes("?")?"&":"?";Xe=`${Xe}${Je}startDate=${we.startDate}&endDate=${we.endDate}`}else we.page&&we.page.includes("analysis")&&((ae=O.current)!=null&&ae.startDate)&&((de=O.current)!=null&&de.endDate);o(Xe),we.section&&setTimeout(()=>f(we.section),500),Ee.push({action:"navigate_to",status:"success",page:Xe}),$e.push({role:"system",text:` Navigated to ${Xe}`})}if(we.action==="highlight_section"&&(Ke.push(we.elementId),Ee.push({action:"highlight_section",status:"success",id:we.elementId})),we.action==="refresh_analysis"){$e.push({role:"system",text:" Refreshing analysis data..."});const Xe=await p();Xe?(O.current=Xe,Ee.push({action:"refresh_analysis",status:"success",summary:"Data refreshed successfully"}),$e.push({role:"system",text:" Analysis data refreshed"})):(Ee.push({action:"refresh_analysis",status:"error",error:"No data returned"}),$e.push({role:"system",text:" Failed to refresh analysis data"}))}if(we.action==="search_pharmacy_inventory"){const Xe=we.query.toLowerCase(),Je=Fe.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Xe)||Ct.brand_name&&Ct.brand_name.toLowerCase().includes(Xe)||Ct.description&&Ct.description.toLowerCase().includes(Xe)),ct=Je.slice(0,10);Ee.push({action:"search_pharmacy_inventory",status:"success",count:Je.length,results:ct}),Je.length>0?$e.push({role:"system",text:` Found ${Je.length} matches for "${we.query}". Showing top ${ct.length}.`}):$e.push({role:"system",text:` No matches found for "${we.query}"`})}if(we.action==="update_drug"){const Xe=we.id;try{const Je=Fe.find(bt=>bt.id===Xe);if(!Je)throw new Error(`Drug with ID ${Xe} not found.`);const ct={...we.updates};ct.custom_fields&&(ct.custom_fields={...Je.custom_fields||{},...ct.custom_fields});const Ct={...Je,...ct};await se(`/api/drugs/${Xe}`,{method:"PUT",body:JSON.stringify(Ct)}),Ee.push({action:"update_drug",status:"success",id:Xe,updates:we.updates}),$e.push({role:"system",text:` Updated drug: ${Je.name}`}),Ue({title:`Updated: ${Je.name}`,widgets:[{id:"edited-drug",type:"table",title:`Drug Updated: ${Je.name}`,dataSource:"api:drugs",config:{filters:[{field:"id",operator:"equals",value:Xe}],columns:["name","brand_name","stock","mrp","expiry_date","pack"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Je){Ee.push({action:"update_drug",status:"error",error:Je.message}),$e.push({role:"system",text:` Failed to update drug: ${Je.message}`})}}if(we.action==="update_lab_test"){const Xe=xe.find(Je=>Je.serial_number===we.serial_number);if(Xe){const Je={...Xe,...we.updates};await se(`/api/lab-tests/${Xe.id}`,{method:"PUT",body:JSON.stringify(Je)}),Ee.push({action:"update_lab_test",status:"success",item:Xe.name}),$e.push({role:"system",text:` Updated lab test: ${Xe.name}`}),Ue({title:`Updated: ${Xe.name}`,widgets:[{id:"edited-lab-test",type:"table",title:`Lab Test Updated: ${Xe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Xe.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}else Ee.push({action:"update_lab_test",status:"error",error:`Test with serial ${we.serial_number} not found`}),$e.push({role:"system",text:` Lab test with serial ${we.serial_number} not found`})}if(we.action==="search_lab_inventory"){const Xe=we.query.toLowerCase(),Je=xe.filter(Ct=>Ct.name&&Ct.name.toLowerCase().includes(Xe)||Ct.description&&Ct.description.toLowerCase().includes(Xe)),ct=Je.slice(0,10);Ee.push({action:"search_lab_inventory",status:"success",count:Je.length,results:ct.map(Ct=>({serial_number:Ct.serial_number,id:Ct.id,name:Ct.name,price:Ct.price,description:Ct.description}))}),Je.length>0?$e.push({role:"system",text:` Found ${Je.length} lab tests for "${we.query}". Showing top ${ct.length}.`}):$e.push({role:"system",text:` No lab tests found for "${we.query}"`})}if(we.action==="create_lab_test")try{const Xe=we.test,Je={name:Xe.name,price:parseFloat(Xe.price)||0,description:Xe.description||"",default_parameters:Xe.default_parameters||[]},ct=await se("/api/lab-tests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Je)});if(!ct.ok){const bt=await ct.json();throw new Error(bt.message||"Failed to create lab test")}const Ct=await ct.json();Ee.push({action:"create_lab_test",status:"success",id:Ct.id,name:Xe.name}),$e.push({role:"system",text:` Created lab test: ${Xe.name}`}),Ue({title:`Created: ${Xe.name}`,widgets:[{id:"created-lab-test",type:"table",title:`New Lab Test: ${Xe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Ct.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Xe){Ee.push({action:"create_lab_test",status:"error",error:Xe.message}),$e.push({role:"system",text:` Failed to create lab test: ${Xe.message}`})}if(we.action==="search_distributor_purchase"){const Xe=we.query,Je=await se(`/api/distributors?search=${encodeURIComponent(Xe)}`);if(Je.ok){const ct=await Je.json();x(ct),j(Xe),Ee.push({action:"search_distributor_purchase",status:"success",count:ct.length,results:ct}),$e.push({role:"system",text:` Found ${ct.length} distributors for "${Xe}"`})}else Ee.push({action:"search_distributor_purchase",status:"error",error:Je.statusText}),$e.push({role:"system",text:" Failed to search distributors"})}if(we.action==="set_distributor_purchase"){const Xe=we.distributorId;let Je=T.find(ct=>ct.id===Xe);Je?(b(Je),j(Je.name),Ee.push({action:"set_distributor_purchase",status:"success",distributor:Je.name}),$e.push({role:"system",text:` Selected distributor: ${Je.name}`})):(Ee.push({action:"set_distributor_purchase",status:"error",error:"Distributor not found in current search results. Please search first."}),$e.push({role:"system",text:" Distributor not found. Please search first."}))}if(we.action==="add_purchase_items"){const Xe=we.items;let Je=0;Xe.forEach(ct=>{const bt={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:ct.name||"",composition:ct.composition||"",description:ct.description||"",mrp:ct.mrp||0,stock:ct.stock||0,pack:ct.pack||"",supplier:"",expiry_date:ct.expiry_date||"",rate:ct.rate||0,box_number:ct.box_number||"",gst:ct.gst||0,margin:ct.margin||0,discount:ct.discount||0,brand_name:ct.brand_name||"",batch:ct.batch||"",hsn_code:ct.hsn_code||"",mfg:ct.mfg||"",loose:ct.loose||0,last_updated:"",created_at:""};S(bt),Je++}),Ee.push({action:"add_purchase_items",status:"success",count:Je}),$e.push({role:"system",text:` Added ${Je} items to purchase list`})}if(we.action==="edit_purchase_items"){const Xe=we.updates;let Je=0;const ct=I.current||[];Xe.forEach(Ct=>{if(Ct.serial_number){const bt=Ct.serial_number-1,ke=ct[bt];ke&&ke.id?(_(ke.id,{[Ct.field]:Ct.value}),Je++):(console.warn(`Row with serial number ${Ct.serial_number} not found.`),$e.push({role:"system",text:` Row #${Ct.serial_number} not found.`}))}}),Ee.push({action:"edit_purchase_items",status:"success",count:Je}),$e.push({role:"system",text:` Updated ${Je} items`})}if(we.action==="open_new_case"){const{name:Xe,age:Je,gender:ct,complaint:Ct,phone:bt}=we;try{const ke=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Xe||"New Patient",age:Je||null,gender:ct||null,phone:bt||null,address:null})});if(!ke.ok){const kt=await ke.json().catch(()=>({}));throw ke.status===403&&((ee=kt.message)!=null&&ee.includes("Patient limit"))?new Error(`Patient limit reached: ${kt.message}`):new Error(kt.message||"Failed to create patient")}const ot=await ke.json();if(!ot||!ot.id)throw new Error("Created patient has no ID");const Tt=await se("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:ot.id,complaint:Ct||"New Case"})});if(!Tt.ok)throw new Error("Failed to create queue entry");const Ve=await Tt.json(),jt=ot.id;jt&&(l.prefetchQuery({queryKey:Gt.patients.context(jt),queryFn:()=>se(`/api/patients/${jt}/context`).then(kt=>kt.json()),staleTime:1e3*60*5}),l.prefetchQuery({queryKey:Gt.patientDebts.balance(jt),queryFn:()=>se(`/api/patient-debts/${jt}/balance`).then(kt=>kt.json()),staleTime:1e3*60}),l.prefetchQuery({queryKey:Gt.queue.latest(jt),queryFn:()=>se(`/api/queue/patient/${jt}/latest`).then(kt=>kt.json()),staleTime:1e3*5})),o(`/dashboard/edit-complaint/${Ve.id}`,{state:{initialComplaint:Ct}}),Ee.push({action:"open_new_case",status:"success",patientId:ot.id,queueId:Ve.id}),$e.push({role:"system",text:` Opened new case for ${Xe}`}),Q(!1),ie.current=!1;return}catch(ke){ke.message.includes("Patient limit")&&(o("/start-clinic-subscription"),$e.push({role:"system",text:" Patient limit reached. Redirecting to subscription."})),Ee.push({action:"open_new_case",status:"error",error:ke.message}),$e.push({role:"system",text:` Failed to open new case: ${ke.message}`})}}if(we.action==="manage_custom_columns"){const{entity:Xe,operation:Je,column:ct}=we,Ct=Ne.custom_columns_config||{drugs:[],patients:[],lab_tests:[]};let ke=[...Ct[Xe]||[]];if(Je==="add"){const Tt=ct.label.toLowerCase().replace(/[^a-z0-9]/g,"_");ke.some(Ve=>Ve.key===Tt)||ke.push({...ct,key:Tt})}else if(Je==="remove"){const Tt=ct.label.toLowerCase().replace(/[^a-z0-9]/g,"_");ke=ke.filter(Ve=>Ve.key!==Tt&&Ve.label!==ct.label)}const ot={...Ct,[Xe]:ke};await se("/api/clinics/settings",{method:"PUT",body:JSON.stringify({...Ne,custom_columns_config:ot})}),n&&n(),Ee.push({action:"manage_custom_columns",status:"success",entity:Xe,operation:Je,column:ct.label}),$e.push({role:"system",text:` ${Je==="add"?"Added":"Removed"} custom column '${ct.label}' for ${Xe}`})}if(we.action==="create_custom_table"){const{name:Xe,description:Je,columns:ct}=we,Ct=ct.map(ot=>({...ot,key:ot.label.toLowerCase().replace(/[^a-z0-9]/g,"_")})),bt=await se("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Xe,description:Je,columns:Ct})});if(!bt.ok)throw new Error("Failed to create table");const ke=await bt.json();L(ot=>[...ot,ke]),Ee.push({action:"create_custom_table",status:"success",tableId:ke.id}),$e.push({role:"system",text:` Created custom table: ${Xe}`})}if(we.action==="add_table_row"){const{tableId:Xe,data:Je}=we;if(!(await se(`/api/custom-tables/${Xe}/records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Je})})).ok)throw new Error("Failed to add row");Ee.push({action:"add_table_row",status:"success"}),$e.push({role:"system",text:" Added row to table"})}if(we.action==="update_table_row"){const{recordId:Xe,data:Je}=we;if(!(await se(`/api/custom-tables/records/${Xe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Je})})).ok)throw new Error("Failed to update row");Ee.push({action:"update_table_row",status:"success"}),$e.push({role:"system",text:" Updated row"})}if(we.action==="create_custom_dashboard"){const{name:Xe,description:Je,widgets:ct}=we,Ct=await se("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Xe,description:Je,widgets:ct})});if(!Ct.ok)throw new Error("Failed to create dashboard");const bt=await Ct.json();Ee.push({action:"create_custom_dashboard",status:"success",id:bt.id}),$e.push({role:"system",text:` Created dashboard: ${Xe}`})}we.action==="render_temporary_dashboard"&&(Ue({title:we.title,widgets:we.widgets}),Ee.push({action:"render_temporary_dashboard",status:"success"}),$e.push({role:"system",text:` Showing temporary dashboard: ${we.title}`}))}catch(Xe){console.error("Action execution failed",we,Xe),Ee.push({action:we.action,status:"error",error:Xe.message}),$e.push({role:"system",text:` Failed to execute action: ${we.action}`})}}Ke.length>0&&i&&setTimeout(()=>i(Ke),500),$e.length>0&&H(we=>[...we,...$e]);const We=[...le,...Ee],it=`Reflecting on previous actions: ${JSON.stringify(Ee)}. What is the next step? If done, call end_task.`,wt=[...ye,...$e,{role:"model",text:ue},{role:"user",text:it}];await be(it,wt,We,void 0)}catch(Ne){console.error(Ne),H(Te=>[...Te,{role:"model",text:"Something went wrong."}]),Q(!1),ie.current=!1}}},Ce=v.useCallback(()=>{H([]),k(""),Q(!1),ie.current=!1,W.current=0,G(null)},[]);return{chatQuery:E,setChatQuery:k,chatHistory:V,isProcessing:ne,handleSendMessage:me=>{const ye=me!==void 0?me:E;if(!ye.trim()&&!q)return;ie.current=!0,Q(!0),W.current=0;const le={role:"user",text:ye};q&&(le.text+=" [Image Attached]"),H(ae=>[...ae,le]);const X=q||void 0;k(""),G(null),be(ye,V,[],X)},refreshChat:Ce,stopGeneration:ce,selectedImage:q,handleImageSelect:je,clearImage:Y,temporaryDashboard:Ie,closeTemporaryDashboard:ze,saveTemporaryDashboard:Le}},Z=({className:t="",width:e,height:n,variant:a="rectangular",animate:i=!0,style:s={}})=>{const o={width:e,height:n,...s};return r.jsx("div",{className:`skeleton skeleton-${a} ${i?"skeleton-animate":""} ${t}`,style:o})};var NC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var C4;function Rde(){return C4||(C4=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=i(s,a(l)))}return s}function a(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)e.call(s,l)&&s[l]&&(o=i(o,l));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(NC)),NC.exports}var Lde=Rde();const ad=Wn(Lde);function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function Fde(t,e){if(Sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Sf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bU(t){var e=Fde(t,"string");return Sf(e)=="symbol"?e:e+""}function dv(t,e,n){return(e=bU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T4(Object(n),!0).forEach(function(a){dv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T4(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function $de(t){if(Array.isArray(t))return t}function Bde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function HE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function jU(t,e){if(t){if(typeof t=="string")return HE(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HE(t,e):void 0}}function zde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tc(t,e){return $de(t)||Bde(t,e)||jU(t,e)||zde()}function qde(t,e){if(t==null)return{};var n={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;n[a]=t[a]}return n}function Vc(t,e){if(t==null)return{};var n,a,i=qde(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Ude=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Vde(t){var e=t.defaultInputValue,n=e===void 0?"":e,a=t.defaultMenuIsOpen,i=a===void 0?!1:a,s=t.defaultValue,o=s===void 0?null:s,l=t.inputValue,c=t.menuIsOpen,d=t.onChange,f=t.onInputChange,p=t.onMenuClose,g=t.onMenuOpen,x=t.value,b=Vc(t,Ude),j=v.useState(l!==void 0?l:n),S=Tc(j,2),_=S[0],T=S[1],C=v.useState(c!==void 0?c:i),E=Tc(C,2),k=E[0],O=E[1],I=v.useState(x!==void 0?x:o),F=Tc(I,2),B=F[0],$=F[1],L=v.useCallback(function(ie,W){typeof d=="function"&&d(ie,W),$(ie)},[d]),V=v.useCallback(function(ie,W){var z;typeof f=="function"&&(z=f(ie,W)),T(z!==void 0?z:ie)},[f]),H=v.useCallback(function(){typeof g=="function"&&g(),O(!0)},[g]),ne=v.useCallback(function(){typeof p=="function"&&p(),O(!1)},[p]),Q=l!==void 0?l:_,q=c!==void 0?c:k,G=x!==void 0?x:B;return Xt(Xt({},b),{},{inputValue:Q,menuIsOpen:q,onChange:L,onInputChange:V,onMenuClose:ne,onMenuOpen:H,value:G})}function rn(){return rn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rn.apply(null,arguments)}function Hde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k4(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,bU(a.key),a)}}function Gde(t,e,n){return e&&k4(t.prototype,e),n&&k4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GE(t,e){return GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GE(t,e)}function Wde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GE(t,e)}function jw(t){return jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jw(t)}function wU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wU=function(){return!!t})()}function Yde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kde(t,e){if(e&&(Sf(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yde(t)}function Qde(t){var e=wU();return function(){var n,a=jw(t);if(e){var i=jw(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Kde(this,n)}}function Xde(t){if(Array.isArray(t))return HE(t)}function Jde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pD(t){return Xde(t)||Jde(t)||jU(t)||Zde()}function ehe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function the(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var nhe=function(){function t(n){var a=this;this._insertTag=function(i){var s;a.tags.length===0?a.insertionPoint?s=a.insertionPoint.nextSibling:a.prepend?s=a.container.firstChild:s=a.before:s=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(i,s),a.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(a){a.forEach(this._insertTag)},e.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(the(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=ehe(i);try{s.insertRule(a,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(a));this.ctr++},e.flush=function(){this.tags.forEach(function(a){var i;return(i=a.parentNode)==null?void 0:i.removeChild(a)}),this.tags=[],this.ctr=0},t}(),ui="-ms-",ww="-moz-",ir="-webkit-",NU="comm",mD="rule",gD="decl",rhe="@import",SU="@keyframes",ahe="@layer",ihe=Math.abs,QN=String.fromCharCode,she=Object.assign;function ohe(t,e){return Wa(t,0)^45?(((e<<2^Wa(t,0))<<2^Wa(t,1))<<2^Wa(t,2))<<2^Wa(t,3):0}function _U(t){return t.trim()}function lhe(t,e){return(t=e.exec(t))?t[0]:t}function sr(t,e,n){return t.replace(e,n)}function WE(t,e){return t.indexOf(e)}function Wa(t,e){return t.charCodeAt(e)|0}function Ov(t,e,n){return t.slice(e,n)}function Cl(t){return t.length}function yD(t){return t.length}function jj(t,e){return e.push(t),t}function che(t,e){return t.map(e).join("")}var XN=1,ig=1,CU=0,us=0,ya=0,$g="";function JN(t,e,n,a,i,s,o){return{value:t,root:e,parent:n,type:a,props:i,children:s,line:XN,column:ig,length:o,return:""}}function Wx(t,e){return she(JN("",null,null,"",null,null,0),t,{length:-t.length},e)}function uhe(){return ya}function dhe(){return ya=us>0?Wa($g,--us):0,ig--,ya===10&&(ig=1,XN--),ya}function Ms(){return ya=us<CU?Wa($g,us++):0,ig++,ya===10&&(ig=1,XN++),ya}function Ol(){return Wa($g,us)}function ew(){return us}function Mb(t,e){return Ov($g,t,e)}function Dv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function TU(t){return XN=ig=1,CU=Cl($g=t),us=0,[]}function kU(t){return $g="",t}function tw(t){return _U(Mb(us-1,YE(t===91?t+2:t===40?t+1:t)))}function hhe(t){for(;(ya=Ol())&&ya<33;)Ms();return Dv(t)>2||Dv(ya)>3?"":" "}function fhe(t,e){for(;--e&&Ms()&&!(ya<48||ya>102||ya>57&&ya<65||ya>70&&ya<97););return Mb(t,ew()+(e<6&&Ol()==32&&Ms()==32))}function YE(t){for(;Ms();)switch(ya){case t:return us;case 34:case 39:t!==34&&t!==39&&YE(ya);break;case 40:t===41&&YE(t);break;case 92:Ms();break}return us}function phe(t,e){for(;Ms()&&t+ya!==57;)if(t+ya===84&&Ol()===47)break;return"/*"+Mb(e,us-1)+"*"+QN(t===47?t:Ms())}function mhe(t){for(;!Dv(Ol());)Ms();return Mb(t,us)}function ghe(t){return kU(nw("",null,null,null,[""],t=TU(t),0,[0],t))}function nw(t,e,n,a,i,s,o,l,c){for(var d=0,f=0,p=o,g=0,x=0,b=0,j=1,S=1,_=1,T=0,C="",E=i,k=s,O=a,I=C;S;)switch(b=T,T=Ms()){case 40:if(b!=108&&Wa(I,p-1)==58){WE(I+=sr(tw(T),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=tw(T);break;case 9:case 10:case 13:case 32:I+=hhe(b);break;case 92:I+=fhe(ew()-1,7);continue;case 47:switch(Ol()){case 42:case 47:jj(yhe(phe(Ms(),ew()),e,n),c);break;default:I+="/"}break;case 123*j:l[d++]=Cl(I)*_;case 125*j:case 59:case 0:switch(T){case 0:case 125:S=0;case 59+f:_==-1&&(I=sr(I,/\f/g,"")),x>0&&Cl(I)-p&&jj(x>32?E4(I+";",a,n,p-1):E4(sr(I," ","")+";",a,n,p-2),c);break;case 59:I+=";";default:if(jj(O=A4(I,e,n,d,f,i,l,C,E=[],k=[],p),s),T===123)if(f===0)nw(I,e,O,O,E,s,p,l,k);else switch(g===99&&Wa(I,3)===110?100:g){case 100:case 108:case 109:case 115:nw(t,O,O,a&&jj(A4(t,O,O,0,0,i,l,C,i,E=[],p),k),i,k,p,l,a?E:k);break;default:nw(I,O,O,O,[""],k,0,l,k)}}d=f=x=0,j=_=1,C=I="",p=o;break;case 58:p=1+Cl(I),x=b;default:if(j<1){if(T==123)--j;else if(T==125&&j++==0&&dhe()==125)continue}switch(I+=QN(T),T*j){case 38:_=f>0?1:(I+="\f",-1);break;case 44:l[d++]=(Cl(I)-1)*_,_=1;break;case 64:Ol()===45&&(I+=tw(Ms())),g=Ol(),f=p=Cl(C=I+=mhe(ew())),T++;break;case 45:b===45&&Cl(I)==2&&(j=0)}}return s}function A4(t,e,n,a,i,s,o,l,c,d,f){for(var p=i-1,g=i===0?s:[""],x=yD(g),b=0,j=0,S=0;b<a;++b)for(var _=0,T=Ov(t,p+1,p=ihe(j=o[b])),C=t;_<x;++_)(C=_U(j>0?g[_]+" "+T:sr(T,/&\f/g,g[_])))&&(c[S++]=C);return JN(t,e,n,i===0?mD:l,c,d,f)}function yhe(t,e,n){return JN(t,e,n,NU,QN(uhe()),Ov(t,2,-2),0)}function E4(t,e,n,a){return JN(t,e,n,gD,Ov(t,0,a),Ov(t,a+1,-1),a)}function Lm(t,e){for(var n="",a=yD(t),i=0;i<a;i++)n+=e(t[i],i,t,e)||"";return n}function xhe(t,e,n,a){switch(t.type){case ahe:if(t.children.length)break;case rhe:case gD:return t.return=t.return||t.value;case NU:return"";case SU:return t.return=t.value+"{"+Lm(t.children,a)+"}";case mD:t.value=t.props.join(",")}return Cl(n=Lm(t.children,a))?t.return=t.value+"{"+n+"}":""}function vhe(t){var e=yD(t);return function(n,a,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,a,i,s)||"";return o}}function bhe(t){return function(e){e.root||(e=e.return)&&t(e)}}function jhe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var whe=function(e,n,a){for(var i=0,s=0;i=s,s=Ol(),i===38&&s===12&&(n[a]=1),!Dv(s);)Ms();return Mb(e,us)},Nhe=function(e,n){var a=-1,i=44;do switch(Dv(i)){case 0:i===38&&Ol()===12&&(n[a]=1),e[a]+=whe(us-1,n,a);break;case 2:e[a]+=tw(i);break;case 4:if(i===44){e[++a]=Ol()===58?"&\f":"",n[a]=e[a].length;break}default:e[a]+=QN(i)}while(i=Ms());return e},She=function(e,n){return kU(Nhe(TU(e),n))},P4=new WeakMap,_he=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,a=e.parent,i=e.column===a.column&&e.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!P4.get(a))&&!i){P4.set(e,!0);for(var s=[],o=She(n,s),l=a.props,c=0,d=0;c<o.length;c++)for(var f=0;f<l.length;f++,d++)e.props[d]=s[c]?o[c].replace(/&\f/g,l[f]):l[f]+" "+o[c]}}},Che=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function AU(t,e){switch(ohe(t,e)){case 5103:return ir+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ir+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ir+t+ww+t+ui+t+t;case 6828:case 4268:return ir+t+ui+t+t;case 6165:return ir+t+ui+"flex-"+t+t;case 5187:return ir+t+sr(t,/(\w+).+(:[^]+)/,ir+"box-$1$2"+ui+"flex-$1$2")+t;case 5443:return ir+t+ui+"flex-item-"+sr(t,/flex-|-self/,"")+t;case 4675:return ir+t+ui+"flex-line-pack"+sr(t,/align-content|flex-|-self/,"")+t;case 5548:return ir+t+ui+sr(t,"shrink","negative")+t;case 5292:return ir+t+ui+sr(t,"basis","preferred-size")+t;case 6060:return ir+"box-"+sr(t,"-grow","")+ir+t+ui+sr(t,"grow","positive")+t;case 4554:return ir+sr(t,/([^-])(transform)/g,"$1"+ir+"$2")+t;case 6187:return sr(sr(sr(t,/(zoom-|grab)/,ir+"$1"),/(image-set)/,ir+"$1"),t,"")+t;case 5495:case 3959:return sr(t,/(image-set\([^]*)/,ir+"$1$`$1");case 4968:return sr(sr(t,/(.+:)(flex-)?(.*)/,ir+"box-pack:$3"+ui+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ir+t+t;case 4095:case 3583:case 4068:case 2532:return sr(t,/(.+)-inline(.+)/,ir+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Cl(t)-1-e>6)switch(Wa(t,e+1)){case 109:if(Wa(t,e+4)!==45)break;case 102:return sr(t,/(.+:)(.+)-([^]+)/,"$1"+ir+"$2-$3$1"+ww+(Wa(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~WE(t,"stretch")?AU(sr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Wa(t,e+1)!==115)break;case 6444:switch(Wa(t,Cl(t)-3-(~WE(t,"!important")&&10))){case 107:return sr(t,":",":"+ir)+t;case 101:return sr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ir+(Wa(t,14)===45?"inline-":"")+"box$3$1"+ir+"$2$3$1"+ui+"$2box$3")+t}break;case 5936:switch(Wa(t,e+11)){case 114:return ir+t+ui+sr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ir+t+ui+sr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ir+t+ui+sr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ir+t+ui+t+t}return t}var The=function(e,n,a,i){if(e.length>-1&&!e.return)switch(e.type){case gD:e.return=AU(e.value,e.length);break;case SU:return Lm([Wx(e,{value:sr(e.value,"@","@"+ir)})],i);case mD:if(e.length)return che(e.props,function(s){switch(lhe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Lm([Wx(e,{props:[sr(s,/:(read-\w+)/,":"+ww+"$1")]})],i);case"::placeholder":return Lm([Wx(e,{props:[sr(s,/:(plac\w+)/,":"+ir+"input-$1")]}),Wx(e,{props:[sr(s,/:(plac\w+)/,":"+ww+"$1")]}),Wx(e,{props:[sr(s,/:(plac\w+)/,ui+"input-$1")]})],i)}return""})}},khe=[The],Ahe=function(e){var n=e.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(j){var S=j.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var i=e.stylisPlugins||khe,s={},o,l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(j){for(var S=j.getAttribute("data-emotion").split(" "),_=1;_<S.length;_++)s[S[_]]=!0;l.push(j)});var c,d=[_he,Che];{var f,p=[xhe,bhe(function(j){f.insert(j)})],g=vhe(d.concat(i,p)),x=function(S){return Lm(ghe(S),g)};c=function(S,_,T,C){f=T,x(S?S+"{"+_.styles+"}":_.styles),C&&(b.inserted[_.name]=!0)}}var b={key:n,sheet:new nhe({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return b.sheet.hydrate(l),b},SC={exports:{}},ur={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O4;function Ehe(){if(O4)return ur;O4=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,a=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,g=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,j=t?Symbol.for("react.block"):60121,S=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,T=t?Symbol.for("react.scope"):60119;function C(k){if(typeof k=="object"&&k!==null){var O=k.$$typeof;switch(O){case e:switch(k=k.type,k){case c:case d:case a:case s:case i:case p:return k;default:switch(k=k&&k.$$typeof,k){case l:case f:case b:case x:case o:return k;default:return O}}case n:return O}}}function E(k){return C(k)===d}return ur.AsyncMode=c,ur.ConcurrentMode=d,ur.ContextConsumer=l,ur.ContextProvider=o,ur.Element=e,ur.ForwardRef=f,ur.Fragment=a,ur.Lazy=b,ur.Memo=x,ur.Portal=n,ur.Profiler=s,ur.StrictMode=i,ur.Suspense=p,ur.isAsyncMode=function(k){return E(k)||C(k)===c},ur.isConcurrentMode=E,ur.isContextConsumer=function(k){return C(k)===l},ur.isContextProvider=function(k){return C(k)===o},ur.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},ur.isForwardRef=function(k){return C(k)===f},ur.isFragment=function(k){return C(k)===a},ur.isLazy=function(k){return C(k)===b},ur.isMemo=function(k){return C(k)===x},ur.isPortal=function(k){return C(k)===n},ur.isProfiler=function(k){return C(k)===s},ur.isStrictMode=function(k){return C(k)===i},ur.isSuspense=function(k){return C(k)===p},ur.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===a||k===d||k===s||k===i||k===p||k===g||typeof k=="object"&&k!==null&&(k.$$typeof===b||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===f||k.$$typeof===S||k.$$typeof===_||k.$$typeof===T||k.$$typeof===j)},ur.typeOf=C,ur}var D4;function Phe(){return D4||(D4=1,SC.exports=Ehe()),SC.exports}var _C,M4;function Ohe(){if(M4)return _C;M4=1;var t=Phe(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=a,s[t.Memo]=i;function o(b){return t.isMemo(b)?i:s[b.$$typeof]||e}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;function x(b,j,S){if(typeof j!="string"){if(g){var _=p(j);_&&_!==g&&x(b,_,S)}var T=c(j);d&&(T=T.concat(d(j)));for(var C=o(b),E=o(j),k=0;k<T.length;++k){var O=T[k];if(!n[O]&&!(S&&S[O])&&!(E&&E[O])&&!(C&&C[O])){var I=f(j,O);try{l(b,O,I)}catch{}}}}return b}return _C=x,_C}Ohe();var Dhe=!0;function Mhe(t,e,n){var a="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(a+=i+" ")}),a}var EU=function(e,n,a){var i=e.key+"-"+n.name;(a===!1||Dhe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Ihe=function(e,n,a){EU(e,n,a);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Rhe(t){for(var e=0,n,a=0,i=t.length;i>=4;++a,i-=4)n=t.charCodeAt(a)&255|(t.charCodeAt(++a)&255)<<8|(t.charCodeAt(++a)&255)<<16|(t.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(a+2)&255)<<16;case 2:e^=(t.charCodeAt(a+1)&255)<<8;case 1:e^=t.charCodeAt(a)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Lhe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Fhe=/[A-Z]|^ms/g,$he=/_EMO_([^_]+?)_([^]*?)_EMO_/g,PU=function(e){return e.charCodeAt(1)===45},I4=function(e){return e!=null&&typeof e!="boolean"},CC=jhe(function(t){return PU(t)?t:t.replace(Fhe,"-$&").toLowerCase()}),R4=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace($he,function(a,i,s){return Tl={name:i,styles:s,next:Tl},i})}return Lhe[e]!==1&&!PU(e)&&typeof n=="number"&&n!==0?n+"px":n};function Mv(t,e,n){if(n==null)return"";var a=n;if(a.__emotion_styles!==void 0)return a;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Tl={name:i.name,styles:i.styles,next:Tl},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Tl={name:o.name,styles:o.styles,next:Tl},o=o.next;var l=s.styles+";";return l}return Bhe(t,e,n)}case"function":{if(t!==void 0){var c=Tl,d=n(t);return Tl=c,Mv(t,e,d)}break}}var f=n;return f}function Bhe(t,e,n){var a="";if(Array.isArray(n))for(var i=0;i<n.length;i++)a+=Mv(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var l=o;I4(l)&&(a+=CC(s)+":"+R4(s,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var c=0;c<o.length;c++)I4(o[c])&&(a+=CC(s)+":"+R4(s,o[c])+";");else{var d=Mv(t,e,o);switch(s){case"animation":case"animationName":{a+=CC(s)+":"+d+";";break}default:a+=s+"{"+d+"}"}}}return a}var L4=/label:\s*([^\s;{]+)\s*(;|$)/g,Tl;function OU(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,i="";Tl=void 0;var s=t[0];if(s==null||s.raw===void 0)a=!1,i+=Mv(n,e,s);else{var o=s;i+=o[0]}for(var l=1;l<t.length;l++)if(i+=Mv(n,e,t[l]),a){var c=s;i+=c[l]}L4.lastIndex=0;for(var d="",f;(f=L4.exec(i))!==null;)d+="-"+f[1];var p=Rhe(i)+d;return{name:p,styles:i,next:Tl}}var zhe=function(e){return e()},qhe=zM.useInsertionEffect?zM.useInsertionEffect:!1,Uhe=qhe||zhe,DU=v.createContext(typeof HTMLElement<"u"?Ahe({key:"css"}):null);DU.Provider;var Vhe=function(e){return v.forwardRef(function(n,a){var i=v.useContext(DU);return e(n,i,a)})},Hhe=v.createContext({}),xD={}.hasOwnProperty,KE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ghe=function(e,n){var a={};for(var i in n)xD.call(n,i)&&(a[i]=n[i]);return a[KE]=e,a},Whe=function(e){var n=e.cache,a=e.serialized,i=e.isStringTag;return EU(n,a,i),Uhe(function(){return Ihe(n,a,i)}),null},Yhe=Vhe(function(t,e,n){var a=t.css;typeof a=="string"&&e.registered[a]!==void 0&&(a=e.registered[a]);var i=t[KE],s=[a],o="";typeof t.className=="string"?o=Mhe(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var l=OU(s,void 0,v.useContext(Hhe));o+=e.key+"-"+l.name;var c={};for(var d in t)xD.call(t,d)&&d!=="css"&&d!==KE&&(c[d]=t[d]);return c.className=o,n&&(c.ref=n),v.createElement(v.Fragment,null,v.createElement(Whe,{cache:e,serialized:l,isStringTag:typeof i=="string"}),v.createElement(i,c))}),Khe=Yhe,Ht=function(e,n){var a=arguments;if(n==null||!xD.call(n,"css"))return v.createElement.apply(void 0,a);var i=a.length,s=new Array(i);s[0]=Khe,s[1]=Ghe(e,n);for(var o=2;o<i;o++)s[o]=a[o];return v.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(Ht||(Ht={}));function vD(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return OU(e)}function Qhe(){var t=vD.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function Xhe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const Jhe=Math.min,Zhe=Math.max,Nw=Math.round,wj=Math.floor,Sw=t=>({x:t,y:t});function efe(t){const{x:e,y:n,width:a,height:i}=t;return{width:a,height:i,top:n,left:e,right:e+a,bottom:n+i,x:e,y:n}}function ZN(){return typeof window<"u"}function MU(t){return RU(t)?(t.nodeName||"").toLowerCase():"#document"}function Rc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function IU(t){var e;return(e=(RU(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function RU(t){return ZN()?t instanceof Node||t instanceof Rc(t).Node:!1}function tfe(t){return ZN()?t instanceof Element||t instanceof Rc(t).Element:!1}function bD(t){return ZN()?t instanceof HTMLElement||t instanceof Rc(t).HTMLElement:!1}function F4(t){return!ZN()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Rc(t).ShadowRoot}const nfe=new Set(["inline","contents"]);function LU(t){const{overflow:e,overflowX:n,overflowY:a,display:i}=jD(t);return/auto|scroll|overlay|hidden|clip/.test(e+a+n)&&!nfe.has(i)}function rfe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const afe=new Set(["html","body","#document"]);function ife(t){return afe.has(MU(t))}function jD(t){return Rc(t).getComputedStyle(t)}function sfe(t){if(MU(t)==="html")return t;const e=t.assignedSlot||t.parentNode||F4(t)&&t.host||IU(t);return F4(e)?e.host:e}function FU(t){const e=sfe(t);return ife(e)?t.ownerDocument?t.ownerDocument.body:t.body:bD(e)&&LU(e)?e:FU(e)}function _w(t,e,n){var a;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=FU(t),s=i===((a=t.ownerDocument)==null?void 0:a.body),o=Rc(i);if(s){const l=QE(o);return e.concat(o,o.visualViewport||[],LU(i)?i:[],l&&n?_w(l):[])}return e.concat(i,_w(i,[],n))}function QE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ofe(t){const e=jD(t);let n=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const i=bD(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:a,l=Nw(n)!==s||Nw(a)!==o;return l&&(n=s,a=o),{width:n,height:a,$:l}}function wD(t){return tfe(t)?t:t.contextElement}function $4(t){const e=wD(t);if(!bD(e))return Sw(1);const n=e.getBoundingClientRect(),{width:a,height:i,$:s}=ofe(e);let o=(s?Nw(n.width):n.width)/a,l=(s?Nw(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const lfe=Sw(0);function cfe(t){const e=Rc(t);return!rfe()||!e.visualViewport?lfe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ufe(t,e,n){return!1}function B4(t,e,n,a){e===void 0&&(e=!1);const i=t.getBoundingClientRect(),s=wD(t);let o=Sw(1);e&&(o=$4(t));const l=ufe()?cfe(s):Sw(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(s){const g=Rc(s),x=a;let b=g,j=QE(b);for(;j&&a&&x!==b;){const S=$4(j),_=j.getBoundingClientRect(),T=jD(j),C=_.left+(j.clientLeft+parseFloat(T.paddingLeft))*S.x,E=_.top+(j.clientTop+parseFloat(T.paddingTop))*S.y;c*=S.x,d*=S.y,f*=S.x,p*=S.y,c+=C,d+=E,b=Rc(j),j=QE(b)}}return efe({width:f,height:p,x:c,y:d})}function $U(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function dfe(t,e){let n=null,a;const i=IU(t);function s(){var l;clearTimeout(a),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const d=t.getBoundingClientRect(),{left:f,top:p,width:g,height:x}=d;if(l||e(),!g||!x)return;const b=wj(p),j=wj(i.clientWidth-(f+g)),S=wj(i.clientHeight-(p+x)),_=wj(f),C={rootMargin:-b+"px "+-j+"px "+-S+"px "+-_+"px",threshold:Zhe(0,Jhe(1,c))||1};let E=!0;function k(O){const I=O[0].intersectionRatio;if(I!==c){if(!E)return o();I?o(!1,I):a=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!$U(d,t.getBoundingClientRect())&&o(),E=!1}try{n=new IntersectionObserver(k,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,C)}n.observe(t)}return o(!0),s}function hfe(t,e,n,a){a===void 0&&(a={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=a,d=wD(t),f=i||s?[...d?_w(d):[],..._w(e)]:[];f.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const p=d&&l?dfe(d,n):null;let g=-1,x=null;o&&(x=new ResizeObserver(_=>{let[T]=_;T&&T.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(e)})),n()}),d&&!c&&x.observe(d),x.observe(e));let b,j=c?B4(t):null;c&&S();function S(){const _=B4(t);j&&!$U(j,_)&&n(),j=_,b=requestAnimationFrame(S)}return n(),()=>{var _;f.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),p==null||p(),(_=x)==null||_.disconnect(),x=null,c&&cancelAnimationFrame(b)}}var XE=v.useLayoutEffect,ffe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Cw=function(){};function pfe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function mfe(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var s=[].concat(a);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(pfe(t,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var z4=function(e){return Sfe(e)?e.filter(Boolean):Sf(e)==="object"&&e!==null?[e]:[]},BU=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Vc(e,ffe);return Xt({},n)},ta=function(e,n,a){var i=e.cx,s=e.getStyles,o=e.getClassNames,l=e.className;return{css:s(n,e),className:i(a??{},o(n,e),l)}};function eS(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function gfe(t){return eS(t)?window.innerHeight:t.clientHeight}function zU(t){return eS(t)?window.pageYOffset:t.scrollTop}function Tw(t,e){if(eS(t)){window.scrollTo(0,e);return}t.scrollTop=e}function yfe(t){var e=getComputedStyle(t),n=e.position==="absolute",a=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&a.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function xfe(t,e,n,a){return n*((t=t/a-1)*t*t+1)+e}function Nj(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Cw,i=zU(t),s=e-i,o=10,l=0;function c(){l+=o;var d=xfe(l,i,s,n);Tw(t,d),l<n?window.requestAnimationFrame(c):a(t)}c()}function q4(t,e){var n=t.getBoundingClientRect(),a=e.getBoundingClientRect(),i=e.offsetHeight/3;a.bottom+i>n.bottom?Tw(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):a.top-i<n.top&&Tw(t,Math.max(e.offsetTop-i,0))}function vfe(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function U4(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function bfe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var qU=!1,jfe={get passive(){return qU=!0}},Sj=typeof window<"u"?window:{};Sj.addEventListener&&Sj.removeEventListener&&(Sj.addEventListener("p",Cw,jfe),Sj.removeEventListener("p",Cw,!1));var wfe=qU;function Nfe(t){return t!=null}function Sfe(t){return Array.isArray(t)}function _j(t,e,n){return t?e:n}var _fe=function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var l=Tc(o,1),c=l[0];return!a.includes(c)});return s.reduce(function(o,l){var c=Tc(l,2),d=c[0],f=c[1];return o[d]=f,o},{})},Cfe=["children","innerProps"],Tfe=["children","innerProps"];function kfe(t){var e=t.maxHeight,n=t.menuEl,a=t.minHeight,i=t.placement,s=t.shouldScroll,o=t.isFixedPosition,l=t.controlHeight,c=yfe(n),d={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return d;var f=c.getBoundingClientRect(),p=f.height,g=n.getBoundingClientRect(),x=g.bottom,b=g.height,j=g.top,S=n.offsetParent.getBoundingClientRect(),_=S.top,T=o?window.innerHeight:gfe(c),C=zU(c),E=parseInt(getComputedStyle(n).marginBottom,10),k=parseInt(getComputedStyle(n).marginTop,10),O=_-k,I=T-j,F=O+C,B=p-C-j,$=x-T+C+E,L=C+j-k,V=160;switch(i){case"auto":case"bottom":if(I>=b)return{placement:"bottom",maxHeight:e};if(B>=b&&!o)return s&&Nj(c,$,V),{placement:"bottom",maxHeight:e};if(!o&&B>=a||o&&I>=a){s&&Nj(c,$,V);var H=o?I-E:B-E;return{placement:"bottom",maxHeight:H}}if(i==="auto"||o){var ne=e,Q=o?O:F;return Q>=a&&(ne=Math.min(Q-E-l,e)),{placement:"top",maxHeight:ne}}if(i==="bottom")return s&&Tw(c,$),{placement:"bottom",maxHeight:e};break;case"top":if(O>=b)return{placement:"top",maxHeight:e};if(F>=b&&!o)return s&&Nj(c,L,V),{placement:"top",maxHeight:e};if(!o&&F>=a||o&&O>=a){var q=e;return(!o&&F>=a||o&&O>=a)&&(q=o?O-k:F-k),s&&Nj(c,L,V),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return d}function Afe(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var UU=function(e){return e==="auto"?"bottom":e},Efe=function(e,n){var a,i=e.placement,s=e.theme,o=s.borderRadius,l=s.spacing,c=s.colors;return Xt((a={label:"menu"},dv(a,Afe(i),"100%"),dv(a,"position","absolute"),dv(a,"width","100%"),dv(a,"zIndex",1),a),n?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},VU=v.createContext(null),Pfe=function(e){var n=e.children,a=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,l=e.menuShouldScrollIntoView,c=e.theme,d=v.useContext(VU)||{},f=d.setPortalPlacement,p=v.useRef(null),g=v.useState(i),x=Tc(g,2),b=x[0],j=x[1],S=v.useState(null),_=Tc(S,2),T=_[0],C=_[1],E=c.spacing.controlHeight;return XE(function(){var k=p.current;if(k){var O=o==="fixed",I=l&&!O,F=kfe({maxHeight:i,menuEl:k,minHeight:a,placement:s,shouldScroll:I,isFixedPosition:O,controlHeight:E});j(F.maxHeight),C(F.placement),f==null||f(F.placement)}},[i,s,o,l,a,f,E]),n({ref:p,placerProps:Xt(Xt({},e),{},{placement:T||UU(s),maxHeight:b})})},Ofe=function(e){var n=e.children,a=e.innerRef,i=e.innerProps;return Ht("div",rn({},ta(e,"menu",{menu:!0}),{ref:a},i),n)},Dfe=Ofe,Mfe=function(e,n){var a=e.maxHeight,i=e.theme.spacing.baseUnit;return Xt({maxHeight:a,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},Ife=function(e){var n=e.children,a=e.innerProps,i=e.innerRef,s=e.isMulti;return Ht("div",rn({},ta(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},a),n)},HU=function(e,n){var a=e.theme,i=a.spacing.baseUnit,s=a.colors;return Xt({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Rfe=HU,Lfe=HU,Ffe=function(e){var n=e.children,a=n===void 0?"No options":n,i=e.innerProps,s=Vc(e,Cfe);return Ht("div",rn({},ta(Xt(Xt({},s),{},{children:a,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),a)},$fe=function(e){var n=e.children,a=n===void 0?"Loading...":n,i=e.innerProps,s=Vc(e,Tfe);return Ht("div",rn({},ta(Xt(Xt({},s),{},{children:a,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),a)},Bfe=function(e){var n=e.rect,a=e.offset,i=e.position;return{left:n.left,position:i,top:a,width:n.width,zIndex:1}},zfe=function(e){var n=e.appendTo,a=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,l=e.menuPosition,c=v.useRef(null),d=v.useRef(null),f=v.useState(UU(o)),p=Tc(f,2),g=p[0],x=p[1],b=v.useMemo(function(){return{setPortalPlacement:x}},[]),j=v.useState(null),S=Tc(j,2),_=S[0],T=S[1],C=v.useCallback(function(){if(i){var I=vfe(i),F=l==="fixed"?0:window.pageYOffset,B=I[g]+F;(B!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&T({offset:B,rect:I})}},[i,l,g,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);XE(function(){C()},[C]);var E=v.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),i&&c.current&&(d.current=hfe(i,c.current,C,{elementResize:"ResizeObserver"in window}))},[i,C]);XE(function(){E()},[E]);var k=v.useCallback(function(I){c.current=I,E()},[E]);if(!n&&l!=="fixed"||!_)return null;var O=Ht("div",rn({ref:k},ta(Xt(Xt({},e),{},{offset:_.offset,position:l,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),a);return Ht(VU.Provider,{value:b},n?zO.createPortal(O,n):O)},qfe=function(e){var n=e.isDisabled,a=e.isRtl;return{label:"container",direction:a?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},Ufe=function(e){var n=e.children,a=e.innerProps,i=e.isDisabled,s=e.isRtl;return Ht("div",rn({},ta(e,"container",{"--is-disabled":i,"--is-rtl":s}),a),n)},Vfe=function(e,n){var a=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Xt({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(a.baseUnit/2,"px ").concat(a.baseUnit*2,"px")})},Hfe=function(e){var n=e.children,a=e.innerProps,i=e.isMulti,s=e.hasValue;return Ht("div",rn({},ta(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),a),n)},Gfe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Wfe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ta(e,"indicatorsContainer",{indicators:!0}),a),n)},V4,Yfe=["size"],Kfe=["innerProps","isRtl","size"],Qfe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},GU=function(e){var n=e.size,a=Vc(e,Yfe);return Ht("svg",rn({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Qfe},a))},ND=function(e){return Ht(GU,rn({size:20},e),Ht("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},WU=function(e){return Ht(GU,rn({size:20},e),Ht("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},YU=function(e,n){var a=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Xt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:a?o.neutral60:o.neutral20,padding:s*2,":hover":{color:a?o.neutral80:o.neutral40}})},Xfe=YU,Jfe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ta(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),a),n||Ht(WU,null))},Zfe=YU,epe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ta(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),a),n||Ht(ND,null))},tpe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return Xt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:a?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},npe=function(e){var n=e.innerProps;return Ht("span",rn({},n,ta(e,"indicatorSeparator",{"indicator-separator":!0})))},rpe=Qhe(V4||(V4=Xhe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),ape=function(e,n){var a=e.isFocused,i=e.size,s=e.theme,o=s.colors,l=s.spacing.baseUnit;return Xt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:a?o.neutral60:o.neutral20,padding:l*2})},TC=function(e){var n=e.delay,a=e.offset;return Ht("span",{css:vD({animation:"".concat(rpe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:a?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ipe=function(e){var n=e.innerProps,a=e.isRtl,i=e.size,s=i===void 0?4:i,o=Vc(e,Kfe);return Ht("div",rn({},ta(Xt(Xt({},o),{},{innerProps:n,isRtl:a,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Ht(TC,{delay:0,offset:a}),Ht(TC,{delay:160,offset:!0}),Ht(TC,{delay:320,offset:!a}))},spe=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,l=s.borderRadius,c=s.spacing;return Xt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:a?o.neutral5:o.neutral0,borderColor:a?o.neutral10:i?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},ope=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,l=e.menuIsOpen;return Ht("div",rn({ref:s},ta(e,"control",{control:!0,"control--is-disabled":a,"control--is-focused":i,"control--menu-is-open":l}),o,{"aria-disabled":a||void 0}),n)},lpe=ope,cpe=["data"],upe=function(e,n){var a=e.theme.spacing;return n?{}:{paddingBottom:a.baseUnit*2,paddingTop:a.baseUnit*2}},dpe=function(e){var n=e.children,a=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,l=e.headingProps,c=e.innerProps,d=e.label,f=e.theme,p=e.selectProps;return Ht("div",rn({},ta(e,"group",{group:!0}),c),Ht(o,rn({},l,{selectProps:p,theme:f,getStyles:i,getClassNames:s,cx:a}),d),Ht("div",null,n))},hpe=function(e,n){var a=e.theme,i=a.colors,s=a.spacing;return Xt({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},fpe=function(e){var n=BU(e);n.data;var a=Vc(n,cpe);return Ht("div",rn({},ta(e,"groupHeading",{"group-heading":!0}),a))},ppe=dpe,mpe=["innerRef","isDisabled","isHidden","inputClassName"],gpe=function(e,n){var a=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,l=s.colors;return Xt(Xt({visibility:a?"hidden":"visible",transform:i?"translateZ(0)":""},ype),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},KU={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},ype={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Xt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},KU)},xpe=function(e){return Xt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},KU)},vpe=function(e){var n=e.cx,a=e.value,i=BU(e),s=i.innerRef,o=i.isDisabled,l=i.isHidden,c=i.inputClassName,d=Vc(i,mpe);return Ht("div",rn({},ta(e,"input",{"input-container":!0}),{"data-value":a||""}),Ht("input",rn({className:n({input:!0},c),ref:s,style:xpe(l),disabled:o},d)))},bpe=vpe,jpe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors;return Xt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},wpe=function(e,n){var a=e.theme,i=a.borderRadius,s=a.colors,o=e.cropWithEllipsis;return Xt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Npe=function(e,n){var a=e.theme,i=a.spacing,s=a.borderRadius,o=a.colors,l=e.isFocused;return Xt({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},QU=function(e){var n=e.children,a=e.innerProps;return Ht("div",a,n)},Spe=QU,_pe=QU;function Cpe(t){var e=t.children,n=t.innerProps;return Ht("div",rn({role:"button"},n),e||Ht(ND,{size:14}))}var Tpe=function(e){var n=e.children,a=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,l=e.removeProps,c=e.selectProps,d=a.Container,f=a.Label,p=a.Remove;return Ht(d,{data:i,innerProps:Xt(Xt({},ta(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:c},Ht(f,{data:i,innerProps:Xt({},ta(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),Ht(p,{data:i,innerProps:Xt(Xt({},ta(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:c}))},kpe=Tpe,Ape=function(e,n){var a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,l=o.spacing,c=o.colors;return Xt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?c.primary:i?c.primary25:"transparent",color:a?c.neutral20:s?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:a?void 0:s?c.primary:c.primary50}})},Epe=function(e){var n=e.children,a=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,l=e.innerProps;return Ht("div",rn({},ta(e,"option",{option:!0,"option--is-disabled":a,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":a},l),n)},Ppe=Epe,Ope=function(e,n){var a=e.theme,i=a.spacing,s=a.colors;return Xt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Dpe=function(e){var n=e.children,a=e.innerProps;return Ht("div",rn({},ta(e,"placeholder",{placeholder:!0}),a),n)},Mpe=Dpe,Ipe=function(e,n){var a=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return Xt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:a?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Rpe=function(e){var n=e.children,a=e.isDisabled,i=e.innerProps;return Ht("div",rn({},ta(e,"singleValue",{"single-value":!0,"single-value--is-disabled":a}),i),n)},Lpe=Rpe,Fpe={ClearIndicator:epe,Control:lpe,DropdownIndicator:Jfe,DownChevron:WU,CrossIcon:ND,Group:ppe,GroupHeading:fpe,IndicatorsContainer:Wfe,IndicatorSeparator:npe,Input:bpe,LoadingIndicator:ipe,Menu:Dfe,MenuList:Ife,MenuPortal:zfe,LoadingMessage:$fe,NoOptionsMessage:Ffe,MultiValue:kpe,MultiValueContainer:Spe,MultiValueLabel:_pe,MultiValueRemove:Cpe,Option:Ppe,Placeholder:Mpe,SelectContainer:Ufe,SingleValue:Lpe,ValueContainer:Hfe},$pe=function(e){return Xt(Xt({},Fpe),e.components)},H4=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Bpe(t,e){return!!(t===e||H4(t)&&H4(e))}function zpe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Bpe(t[n],e[n]))return!1;return!0}function qpe(t,e){e===void 0&&(e=zpe);var n=null;function a(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return a.clear=function(){n=null},a}var Upe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Vpe=function(e){return Ht("span",rn({css:Upe},e))},G4=Vpe,Hpe={guidance:function(e){var n=e.isSearchable,a=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(a?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,a=e.label,i=a===void 0?"":a,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,a=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,l=e.selectValue,c=e.isDisabled,d=e.isSelected,f=e.isAppleDevice,p=function(j,S){return j&&j.length?"".concat(j.indexOf(S)+1," of ").concat(j.length):""};if(n==="value"&&l)return"value ".concat(o," focused, ").concat(p(l,a),".");if(n==="menu"&&f){var g=c?" disabled":"",x="".concat(d?" selected":"").concat(g);return"".concat(o).concat(x,", ").concat(p(i,a),".")}return""},onFilter:function(e){var n=e.inputValue,a=e.resultsMessage;return"".concat(a).concat(n?" for search term "+n:"",".")}},Gpe=function(e){var n=e.ariaSelection,a=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,l=e.selectValue,c=e.selectProps,d=e.id,f=e.isAppleDevice,p=c.ariaLiveMessages,g=c.getOptionLabel,x=c.inputValue,b=c.isMulti,j=c.isOptionDisabled,S=c.isSearchable,_=c.menuIsOpen,T=c.options,C=c.screenReaderStatus,E=c.tabSelectsValue,k=c.isLoading,O=c["aria-label"],I=c["aria-live"],F=v.useMemo(function(){return Xt(Xt({},Hpe),p||{})},[p]),B=v.useMemo(function(){var Q="";if(n&&F.onChange){var q=n.option,G=n.options,ie=n.removedValue,W=n.removedValues,z=n.value,ce=function(be){return Array.isArray(be)?null:be},je=ie||q||ce(z),Y=je?g(je):"",Ie=G||W||void 0,Ue=Ie?Ie.map(g):[],ze=Xt({isDisabled:je&&j(je,l),label:Y,labels:Ue},n);Q=F.onChange(ze)}return Q},[n,F,j,l,g]),$=v.useMemo(function(){var Q="",q=a||i,G=!!(a&&l&&l.includes(a));if(q&&F.onFocus){var ie={focused:q,label:g(q),isDisabled:j(q,l),isSelected:G,options:s,context:q===a?"menu":"value",selectValue:l,isAppleDevice:f};Q=F.onFocus(ie)}return Q},[a,i,g,j,F,s,l,f]),L=v.useMemo(function(){var Q="";if(_&&T.length&&!k&&F.onFilter){var q=C({count:s.length});Q=F.onFilter({inputValue:x,resultsMessage:q})}return Q},[s,x,_,F,T,C,k]),V=(n==null?void 0:n.action)==="initial-input-focus",H=v.useMemo(function(){var Q="";if(F.guidance){var q=i?"value":_?"menu":"input";Q=F.guidance({"aria-label":O,context:q,isDisabled:a&&j(a,l),isMulti:b,isSearchable:S,tabSelectsValue:E,isInitialFocus:V})}return Q},[O,a,i,b,j,S,_,F,l,E,V]),ne=Ht(v.Fragment,null,Ht("span",{id:"aria-selection"},B),Ht("span",{id:"aria-focused"},$),Ht("span",{id:"aria-results"},L),Ht("span",{id:"aria-guidance"},H));return Ht(v.Fragment,null,Ht(G4,{id:d},V&&ne),Ht(G4,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!V&&ne))},Wpe=Gpe,JE=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Ype=new RegExp("["+JE.map(function(t){return t.letters}).join("")+"]","g"),XU={};for(var kC=0;kC<JE.length;kC++)for(var AC=JE[kC],EC=0;EC<AC.letters.length;EC++)XU[AC.letters[EC]]=AC.base;var JU=function(e){return e.replace(Ype,function(n){return XU[n]})},Kpe=qpe(JU),W4=function(e){return e.replace(/^\s+|\s+$/g,"")},Qpe=function(e){return"".concat(e.label," ").concat(e.value)},Xpe=function(e){return function(n,a){if(n.data.__isNew__)return!0;var i=Xt({ignoreCase:!0,ignoreAccents:!0,stringify:Qpe,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,l=i.stringify,c=i.trim,d=i.matchFrom,f=c?W4(a):a,p=c?W4(l(n)):l(n);return s&&(f=f.toLowerCase(),p=p.toLowerCase()),o&&(f=Kpe(f),p=JU(p)),d==="start"?p.substr(0,f.length)===f:p.indexOf(f)>-1}},Jpe=["innerRef"];function Zpe(t){var e=t.innerRef,n=Vc(t,Jpe),a=_fe(n,"onExited","in","enter","exit","appear");return Ht("input",rn({ref:e},a,{css:vD({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var eme=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function tme(t){var e=t.isEnabled,n=t.onBottomArrive,a=t.onBottomLeave,i=t.onTopArrive,s=t.onTopLeave,o=v.useRef(!1),l=v.useRef(!1),c=v.useRef(0),d=v.useRef(null),f=v.useCallback(function(S,_){if(d.current!==null){var T=d.current,C=T.scrollTop,E=T.scrollHeight,k=T.clientHeight,O=d.current,I=_>0,F=E-k-C,B=!1;F>_&&o.current&&(a&&a(S),o.current=!1),I&&l.current&&(s&&s(S),l.current=!1),I&&_>F?(n&&!o.current&&n(S),O.scrollTop=E,B=!0,o.current=!0):!I&&-_>C&&(i&&!l.current&&i(S),O.scrollTop=0,B=!0,l.current=!0),B&&eme(S)}},[n,a,i,s]),p=v.useCallback(function(S){f(S,S.deltaY)},[f]),g=v.useCallback(function(S){c.current=S.changedTouches[0].clientY},[]),x=v.useCallback(function(S){var _=c.current-S.changedTouches[0].clientY;f(S,_)},[f]),b=v.useCallback(function(S){if(S){var _=wfe?{passive:!1}:!1;S.addEventListener("wheel",p,_),S.addEventListener("touchstart",g,_),S.addEventListener("touchmove",x,_)}},[x,g,p]),j=v.useCallback(function(S){S&&(S.removeEventListener("wheel",p,!1),S.removeEventListener("touchstart",g,!1),S.removeEventListener("touchmove",x,!1))},[x,g,p]);return v.useEffect(function(){if(e){var S=d.current;return b(S),function(){j(S)}}},[e,b,j]),function(S){d.current=S}}var Y4=["boxSizing","height","overflow","paddingRight","position"],K4={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Q4(t){t.cancelable&&t.preventDefault()}function X4(t){t.stopPropagation()}function J4(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function Z4(){return"ontouchstart"in window||navigator.maxTouchPoints}var e3=!!(typeof window<"u"&&window.document&&window.document.createElement),Yx=0,ym={capture:!1,passive:!1};function nme(t){var e=t.isEnabled,n=t.accountForScrollbars,a=n===void 0?!0:n,i=v.useRef({}),s=v.useRef(null),o=v.useCallback(function(c){if(e3){var d=document.body,f=d&&d.style;if(a&&Y4.forEach(function(b){var j=f&&f[b];i.current[b]=j}),a&&Yx<1){var p=parseInt(i.current.paddingRight,10)||0,g=document.body?document.body.clientWidth:0,x=window.innerWidth-g+p||0;Object.keys(K4).forEach(function(b){var j=K4[b];f&&(f[b]=j)}),f&&(f.paddingRight="".concat(x,"px"))}d&&Z4()&&(d.addEventListener("touchmove",Q4,ym),c&&(c.addEventListener("touchstart",J4,ym),c.addEventListener("touchmove",X4,ym))),Yx+=1}},[a]),l=v.useCallback(function(c){if(e3){var d=document.body,f=d&&d.style;Yx=Math.max(Yx-1,0),a&&Yx<1&&Y4.forEach(function(p){var g=i.current[p];f&&(f[p]=g)}),d&&Z4()&&(d.removeEventListener("touchmove",Q4,ym),c&&(c.removeEventListener("touchstart",J4,ym),c.removeEventListener("touchmove",X4,ym)))}},[a]);return v.useEffect(function(){if(e){var c=s.current;return o(c),function(){l(c)}}},[e,o,l]),function(c){s.current=c}}var rme=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},ame={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ime(t){var e=t.children,n=t.lockEnabled,a=t.captureEnabled,i=a===void 0?!0:a,s=t.onBottomArrive,o=t.onBottomLeave,l=t.onTopArrive,c=t.onTopLeave,d=tme({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),f=nme({isEnabled:n}),p=function(x){d(x),f(x)};return Ht(v.Fragment,null,n&&Ht("div",{onClick:rme,css:ame}),e(p))}var sme={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},ome=function(e){var n=e.name,a=e.onFocus;return Ht("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:a,css:sme,value:"",onChange:function(){}})},lme=ome;function SD(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function cme(){return SD(/^iPhone/i)}function ZU(){return SD(/^Mac/i)}function ume(){return SD(/^iPad/i)||ZU()&&navigator.maxTouchPoints>1}function dme(){return cme()||ume()}function hme(){return ZU()||dme()}var fme=function(e){return e.label},pme=function(e){return e.label},mme=function(e){return e.value},gme=function(e){return!!e.isDisabled},yme={clearIndicator:Zfe,container:qfe,control:spe,dropdownIndicator:Xfe,group:upe,groupHeading:hpe,indicatorsContainer:Gfe,indicatorSeparator:tpe,input:gpe,loadingIndicator:ape,loadingMessage:Lfe,menu:Efe,menuList:Mfe,menuPortal:Bfe,multiValue:jpe,multiValueLabel:wpe,multiValueRemove:Npe,noOptionsMessage:Rfe,option:Ape,placeholder:Ope,singleValue:Ipe,valueContainer:Vfe},xme={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},vme=4,e9=4,bme=38,jme=e9*2,wme={baseUnit:e9,controlHeight:bme,menuGutter:jme},PC={borderRadius:vme,colors:xme,spacing:wme},Nme={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:U4(),captureMenuScroll:!U4(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Xpe(),formatGroupLabel:fme,getOptionLabel:pme,getOptionValue:mme,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:gme,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!bfe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function t3(t,e,n,a){var i=r9(t,e,n),s=a9(t,e,n),o=n9(t,e),l=kw(t,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:l,index:a}}function rw(t,e){return t.options.map(function(n,a){if("options"in n){var i=n.options.map(function(o,l){return t3(t,o,e,l)}).filter(function(o){return r3(t,o)});return i.length>0?{type:"group",data:n,options:i,index:a}:void 0}var s=t3(t,n,e,a);return r3(t,s)?s:void 0}).filter(Nfe)}function t9(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,pD(n.options.map(function(a){return a.data}))):e.push(n.data),e},[])}function n3(t,e){return t.reduce(function(n,a){return a.type==="group"?n.push.apply(n,pD(a.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(a.index,"-").concat(i.index)}}))):n.push({data:a.data,id:"".concat(e,"-").concat(a.index)}),n},[])}function Sme(t,e){return t9(rw(t,e))}function r3(t,e){var n=t.inputValue,a=n===void 0?"":n,i=e.data,s=e.isSelected,o=e.label,l=e.value;return(!s9(t)||!s)&&i9(t,{label:o,value:l,data:i},a)}function _me(t,e){var n=t.focusedValue,a=t.selectValue,i=a.indexOf(n);if(i>-1){var s=e.indexOf(n);if(s>-1)return n;if(i<e.length)return e[i]}return null}function Cme(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var OC=function(e,n){var a,i=(a=e.find(function(s){return s.data===n}))===null||a===void 0?void 0:a.id;return i||null},n9=function(e,n){return e.getOptionLabel(n)},kw=function(e,n){return e.getOptionValue(n)};function r9(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function a9(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var a=kw(t,e);return n.some(function(i){return kw(t,i)===a})}function i9(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var s9=function(e){var n=e.hideSelectedOptions,a=e.isMulti;return n===void 0?a:n},Tme=1,o9=function(t){Wde(n,t);var e=Qde(n);function n(a){var i;if(Hde(this,n),i=e.call(this,a),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(c){i.controlRef=c},i.focusedOptionRef=null,i.getFocusedOptionRef=function(c){i.focusedOptionRef=c},i.menuListRef=null,i.getMenuListRef=function(c){i.menuListRef=c},i.inputRef=null,i.getInputRef=function(c){i.inputRef=c},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(c,d){var f=i.props,p=f.onChange,g=f.name;d.name=g,i.ariaOnChange(c,d),p(c,d)},i.setValue=function(c,d,f){var p=i.props,g=p.closeMenuOnSelect,x=p.isMulti,b=p.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:b}),g&&(i.setState({inputIsHiddenAfterUpdate:!x}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(c,{action:d,option:f})},i.selectOption=function(c){var d=i.props,f=d.blurInputOnSelect,p=d.isMulti,g=d.name,x=i.state.selectValue,b=p&&i.isOptionSelected(c,x),j=i.isOptionDisabled(c,x);if(b){var S=i.getOptionValue(c);i.setValue(x.filter(function(_){return i.getOptionValue(_)!==S}),"deselect-option",c)}else if(!j)p?i.setValue([].concat(pD(x),[c]),"select-option",c):i.setValue(c,"select-option");else{i.ariaOnChange(c,{action:"select-option",option:c,name:g});return}f&&i.blurInput()},i.removeValue=function(c){var d=i.props.isMulti,f=i.state.selectValue,p=i.getOptionValue(c),g=f.filter(function(b){return i.getOptionValue(b)!==p}),x=_j(d,g,g[0]||null);i.onChange(x,{action:"remove-value",removedValue:c}),i.focusInput()},i.clearValue=function(){var c=i.state.selectValue;i.onChange(_j(i.props.isMulti,[],null),{action:"clear",removedValues:c})},i.popValue=function(){var c=i.props.isMulti,d=i.state.selectValue,f=d[d.length-1],p=d.slice(0,d.length-1),g=_j(c,p,p[0]||null);f&&i.onChange(g,{action:"pop-value",removedValue:f})},i.getFocusedOptionId=function(c){return OC(i.state.focusableOptionsWithIds,c)},i.getFocusableOptionsWithIds=function(){return n3(rw(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return mfe.apply(void 0,[i.props.classNamePrefix].concat(d))},i.getOptionLabel=function(c){return n9(i.props,c)},i.getOptionValue=function(c){return kw(i.props,c)},i.getStyles=function(c,d){var f=i.props.unstyled,p=yme[c](d,f);p.boxSizing="border-box";var g=i.props.styles[c];return g?g(p,d):p},i.getClassNames=function(c,d){var f,p;return(f=(p=i.props.classNames)[c])===null||f===void 0?void 0:f.call(p,d)},i.getElementId=function(c){return"".concat(i.state.instancePrefix,"-").concat(c)},i.getComponents=function(){return $pe(i.props)},i.buildCategorizedOptions=function(){return rw(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return t9(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(c,d){i.setState({ariaSelection:Xt({value:c},d)})},i.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(c){i.blockOptionHover=!1},i.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&i.onMenuClose():d&&i.openMenu("first"):(d&&(i.openAfterFocus=!0),i.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},i.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!i.props.isDisabled){var d=i.props,f=d.isMulti,p=d.menuIsOpen;i.focusInput(),p?(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()):i.openMenu("first"),c.preventDefault()}},i.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(i.clearValue(),c.preventDefault(),i.openAfterFocus=!1,c.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(c){typeof i.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&eS(c.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(c)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(c){var d=c.touches,f=d&&d.item(0);f&&(i.initialTouchX=f.clientX,i.initialTouchY=f.clientY,i.userIsDragging=!1)},i.onTouchMove=function(c){var d=c.touches,f=d&&d.item(0);if(f){var p=Math.abs(f.clientX-i.initialTouchX),g=Math.abs(f.clientY-i.initialTouchY),x=5;i.userIsDragging=p>x||g>x}},i.onTouchEnd=function(c){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(c.target)&&i.menuListRef&&!i.menuListRef.contains(c.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(c){i.userIsDragging||i.onControlMouseDown(c)},i.onClearIndicatorTouchEnd=function(c){i.userIsDragging||i.onClearIndicatorMouseDown(c)},i.onDropdownIndicatorTouchEnd=function(c){i.userIsDragging||i.onDropdownIndicatorMouseDown(c)},i.handleInputChange=function(c){var d=i.props.inputValue,f=c.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(f,{action:"input-change",prevInputValue:d}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(c){i.props.onFocus&&i.props.onFocus(c),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(c){var d=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(c),i.onInputChange("",{action:"input-blur",prevInputValue:d}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(c){if(!(i.blockOptionHover||i.state.focusedOption===c)){var d=i.getFocusableOptions(),f=d.indexOf(c);i.setState({focusedOption:c,focusedOptionId:f>-1?i.getFocusedOptionId(c):null})}},i.shouldHideSelectedOptions=function(){return s9(i.props)},i.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),i.focus()},i.onKeyDown=function(c){var d=i.props,f=d.isMulti,p=d.backspaceRemovesValue,g=d.escapeClearsValue,x=d.inputValue,b=d.isClearable,j=d.isDisabled,S=d.menuIsOpen,_=d.onKeyDown,T=d.tabSelectsValue,C=d.openMenuOnFocus,E=i.state,k=E.focusedOption,O=E.focusedValue,I=E.selectValue;if(!j&&!(typeof _=="function"&&(_(c),c.defaultPrevented))){switch(i.blockOptionHover=!0,c.key){case"ArrowLeft":if(!f||x)return;i.focusValue("previous");break;case"ArrowRight":if(!f||x)return;i.focusValue("next");break;case"Delete":case"Backspace":if(x)return;if(O)i.removeValue(O);else{if(!p)return;f?i.popValue():b&&i.clearValue()}break;case"Tab":if(i.isComposing||c.shiftKey||!S||!T||!k||C&&i.isOptionSelected(k,I))return;i.selectOption(k);break;case"Enter":if(c.keyCode===229)break;if(S){if(!k||i.isComposing)return;i.selectOption(k);break}return;case"Escape":S?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:x}),i.onMenuClose()):b&&g&&i.clearValue();break;case" ":if(x)return;if(!S){i.openMenu("first");break}if(!k)return;i.selectOption(k);break;case"ArrowUp":S?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":S?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!S)return;i.focusOption("pageup");break;case"PageDown":if(!S)return;i.focusOption("pagedown");break;case"Home":if(!S)return;i.focusOption("first");break;case"End":if(!S)return;i.focusOption("last");break;default:return}c.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++Tme),i.state.selectValue=z4(a.value),a.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),l=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[l],i.state.focusedOptionId=OC(s,o[l])}return i}return Gde(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&q4(this.menuListRef,this.focusedOptionRef),hme()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,c=this.state.isFocused;(c&&!o&&i.isDisabled||c&&l&&!i.menuIsOpen)&&this.focusInput(),c&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(q4(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),f=i==="first"?0:d.length-1;if(!this.props.isMulti){var p=d.indexOf(l[0]);p>-1&&(f=p)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[f],focusedOptionId:this.getFocusedOptionId(d[f])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,f=-1;if(o.length){switch(i){case"previous":c===0?f=0:c===-1?f=d:f=c-1;break;case"next":c>-1&&c<d&&(f=c+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:o[f]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),i==="up"?c=d>0?d-1:l.length-1:i==="down"?c=(d+1)%l.length:i==="pageup"?(c=d-s,c<0&&(c=0)):i==="pagedown"?(c=d+s,c>l.length-1&&(c=l.length-1)):i==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(PC):Xt(Xt({},PC),this.props.theme):PC}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,f=this.setValue,p=this.props,g=p.isMulti,x=p.isRtl,b=p.options,j=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:l,getValue:c,hasValue:j,isMulti:g,isRtl:x,options:b,selectOption:d,selectProps:p,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return r9(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return a9(this.props,i,s)}},{key:"filterOption",value:function(i,s){return i9(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,l=i.inputId,c=i.inputValue,d=i.tabIndex,f=i.form,p=i.menuIsOpen,g=i.required,x=this.getComponents(),b=x.Input,j=this.state,S=j.inputIsHidden,_=j.ariaSelection,T=this.commonProps,C=l||this.getElementId("input"),E=Xt(Xt(Xt({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?v.createElement(b,rn({},T,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:s,isHidden:S,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:f,type:"text",value:c},E)):v.createElement(Zpe,rn({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Cw,onFocus:this.onInputFocus,disabled:s,tabIndex:d,inputMode:"none",form:f,value:""},E))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,c=s.MultiValueLabel,d=s.MultiValueRemove,f=s.SingleValue,p=s.Placeholder,g=this.commonProps,x=this.props,b=x.controlShouldRenderValue,j=x.isDisabled,S=x.isMulti,_=x.inputValue,T=x.placeholder,C=this.state,E=C.selectValue,k=C.focusedValue,O=C.isFocused;if(!this.hasValue()||!b)return _?null:v.createElement(p,rn({},g,{key:"placeholder",isDisabled:j,isFocused:O,innerProps:{id:this.getElementId("placeholder")}}),T);if(S)return E.map(function(F,B){var $=F===k,L="".concat(i.getOptionLabel(F),"-").concat(i.getOptionValue(F));return v.createElement(o,rn({},g,{components:{Container:l,Label:c,Remove:d},isFocused:$,isDisabled:j,key:L,index:B,removeProps:{onClick:function(){return i.removeValue(F)},onTouchEnd:function(){return i.removeValue(F)},onMouseDown:function(H){H.preventDefault()}},data:F}),i.formatOptionLabel(F,"value"))});if(_)return null;var I=E[0];return v.createElement(f,rn({},g,{data:I,isDisabled:j}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||d)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:p,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!s||!d)return null;var p={"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:p,isDisabled:c,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return v.createElement(o,rn({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return v.createElement(s,rn({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,c=s.Menu,d=s.MenuList,f=s.MenuPortal,p=s.LoadingMessage,g=s.NoOptionsMessage,x=s.Option,b=this.commonProps,j=this.state.focusedOption,S=this.props,_=S.captureMenuScroll,T=S.inputValue,C=S.isLoading,E=S.loadingMessage,k=S.minMenuHeight,O=S.maxMenuHeight,I=S.menuIsOpen,F=S.menuPlacement,B=S.menuPosition,$=S.menuPortalTarget,L=S.menuShouldBlockScroll,V=S.menuShouldScrollIntoView,H=S.noOptionsMessage,ne=S.onMenuScrollToTop,Q=S.onMenuScrollToBottom;if(!I)return null;var q=function(Y,Ie){var Ue=Y.type,ze=Y.data,Le=Y.isDisabled,be=Y.isSelected,Ce=Y.label,Ae=Y.value,me=j===ze,ye=Le?void 0:function(){return i.onOptionHover(ze)},le=Le?void 0:function(){return i.selectOption(ze)},X="".concat(i.getElementId("option"),"-").concat(Ie),ae={id:X,onClick:le,onMouseMove:ye,onMouseOver:ye,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:be};return v.createElement(x,rn({},b,{innerProps:ae,data:ze,isDisabled:Le,isSelected:be,key:X,label:Ce,type:Ue,value:Ae,isFocused:me,innerRef:me?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Y.data,"menu"))},G;if(this.hasOptions())G=this.getCategorizedOptions().map(function(je){if(je.type==="group"){var Y=je.data,Ie=je.options,Ue=je.index,ze="".concat(i.getElementId("group"),"-").concat(Ue),Le="".concat(ze,"-heading");return v.createElement(o,rn({},b,{key:ze,data:Y,options:Ie,Heading:l,headingProps:{id:Le,data:je.data},label:i.formatGroupLabel(je.data)}),je.options.map(function(be){return q(be,"".concat(Ue,"-").concat(be.index))}))}else if(je.type==="option")return q(je,"".concat(je.index))});else if(C){var ie=E({inputValue:T});if(ie===null)return null;G=v.createElement(p,b,ie)}else{var W=H({inputValue:T});if(W===null)return null;G=v.createElement(g,b,W)}var z={minMenuHeight:k,maxMenuHeight:O,menuPlacement:F,menuPosition:B,menuShouldScrollIntoView:V},ce=v.createElement(Pfe,rn({},b,z),function(je){var Y=je.ref,Ie=je.placerProps,Ue=Ie.placement,ze=Ie.maxHeight;return v.createElement(c,rn({},b,z,{innerRef:Y,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:C,placement:Ue}),v.createElement(ime,{captureEnabled:_,onTopArrive:ne,onBottomArrive:Q,lockEnabled:L},function(Le){return v.createElement(d,rn({},b,{innerRef:function(Ce){i.getMenuListRef(Ce),Le(Ce)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:C,maxHeight:ze,focusedOption:j}),G)}))});return $||B==="fixed"?v.createElement(f,rn({},b,{appendTo:$,controlElement:this.controlRef,menuPlacement:F,menuPosition:B}),ce):ce}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,l=s.isDisabled,c=s.isMulti,d=s.name,f=s.required,p=this.state.selectValue;if(f&&!this.hasValue()&&!l)return v.createElement(lme,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var g=p.map(function(j){return i.getOptionValue(j)}).join(o);return v.createElement("input",{name:d,type:"hidden",value:g})}else{var x=p.length>0?p.map(function(j,S){return v.createElement("input",{key:"i-".concat(S),name:d,type:"hidden",value:i.getOptionValue(j)})}):v.createElement("input",{name:d,type:"hidden",value:""});return v.createElement("div",null,x)}else{var b=p[0]?this.getOptionValue(p[0]):"";return v.createElement("input",{name:d,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,c=s.focusedValue,d=s.isFocused,f=s.selectValue,p=this.getFocusableOptions();return v.createElement(Wpe,rn({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:f,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,l=i.SelectContainer,c=i.ValueContainer,d=this.props,f=d.className,p=d.id,g=d.isDisabled,x=d.menuIsOpen,b=this.state.isFocused,j=this.commonProps=this.getCommonProps();return v.createElement(l,rn({},j,{className:f,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),v.createElement(s,rn({},j,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:x}),v.createElement(c,rn({},j,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),v.createElement(o,rn({},j,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,c=s.inputIsHiddenAfterUpdate,d=s.ariaSelection,f=s.isFocused,p=s.prevWasFocused,g=s.instancePrefix,x=i.options,b=i.value,j=i.menuIsOpen,S=i.inputValue,_=i.isMulti,T=z4(b),C={};if(o&&(b!==o.value||x!==o.options||j!==o.menuIsOpen||S!==o.inputValue)){var E=j?Sme(i,T):[],k=j?n3(rw(i,T),"".concat(g,"-option")):[],O=l?_me(s,T):null,I=Cme(s,E),F=OC(k,I);C={selectValue:T,focusedOption:I,focusedOptionId:F,focusableOptionsWithIds:k,focusedValue:O,clearFocusValueOnUpdate:!1}}var B=c!=null&&i!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},$=d,L=f&&p;return f&&!L&&($={value:_j(_,T,T[0]||null),options:T,action:"initial-input-focus"},L=!p),(d==null?void 0:d.action)==="initial-input-focus"&&($=null),Xt(Xt(Xt({},C),B),{},{prevProps:i,ariaSelection:$,prevWasFocused:L})}}]),n}(v.Component);o9.defaultProps=Nme;var kme=v.forwardRef(function(t,e){var n=Vde(t);return v.createElement(o9,rn({ref:e},n))}),l9=kme;const xm=new Map,c9=(()=>{const t=new Promise(e=>{window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})});return async e=>{try{const n=new Audio;if(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play(),e!=null&&e.id&&xm.has(e.id)){const i=xm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&xm.set(e.id,a),a}catch{if(await t,e!=null&&e.id&&xm.has(e.id)){const i=xm.get(e.id);if(i)return i}const a=new AudioContext(e);return e!=null&&e.id&&xm.set(e.id,a),a}}})();function Ame(t){var e=atob(t),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n.buffer}const Eme=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,u9=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,Cj=new Map,ZE=(t,e)=>{const n=new Blob([`registerProcessor("${t}", ${e})`],{type:"application/javascript"});return URL.createObjectURL(n)};var DC={exports:{}},a3;function Pme(){return a3||(a3=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,p||c,g),b=n?n+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,g,x,b){var j=n?n+d:d;if(!this._events[j])return!1;var S=this._events[j],_=arguments.length,T,C;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,g),!0;case 5:return S.fn.call(S.context,f,p,g,x),!0;case 6:return S.fn.call(S.context,f,p,g,x,b),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];S.fn.apply(S.context,T)}else{var E=S.length,k;for(C=0;C<E;C++)switch(S[C].once&&this.removeListener(d,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];S[C].fn.apply(S[C].context,T)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,g){var x=n?n+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,S=[],_=b.length;j<_;j++)(b[j].fn!==f||g&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(DC)),DC.exports}var Ome=Pme();const d9=Wn(Ome);function Dme(t){for(var e="",n=new Uint8Array(t),a=n.byteLength,i=0;i<a;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}class h9 extends d9{constructor(n=16e3){super();br(this,"stream");br(this,"audioContext");br(this,"source");br(this,"recording",!1);br(this,"recordingWorklet");br(this,"vuWorklet");br(this,"starting",null);this.sampleRate=n}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async n=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await c9({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const a="audio-recorder-worklet",i=ZE(a,Eme);await this.audioContext.audioWorklet.addModule(i),this.recordingWorklet=new AudioWorkletNode(this.audioContext,a),this.recordingWorklet.port.onmessage=async o=>{const l=o.data.data.int16arrayBuffer;if(l){const c=Dme(l);this.emit("data",c)}},this.source.connect(this.recordingWorklet);const s="vu-meter";await this.audioContext.audioWorklet.addModule(ZE(s,u9)),this.vuWorklet=new AudioWorkletNode(this.audioContext,s),this.vuWorklet.port.onmessage=o=>{this.emit("volume",o.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,n(),this.starting=null})}stop(){const n=()=>{var a,i;(a=this.source)==null||a.disconnect(),(i=this.stream)==null||i.getTracks().forEach(s=>s.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(n);return}n()}}const Mme=3,Ime=({active:t,volume:e,hover:n})=>{const a=v.useRef([]);return v.useEffect(()=>{let i=null;const s=()=>{a.current.forEach((o,l)=>{o&&(o.style.height=`${Math.min(24,4+e*(l===1?400:60))}px`)}),i=window.setTimeout(s,100)};return s(),()=>clearTimeout(i)},[e]),r.jsx("div",{className:ad("audioPulse",{active:t,hover:n}),children:Array(Mme).fill(null).map((i,s)=>r.jsx("div",{ref:o=>{a.current[s]=o},style:{animationDelay:`${s*133}ms`}},s))})};var hv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Rme=hv.exports,i3;function Lme(){return i3||(i3=1,function(t,e){(function(){var n,a="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,f="__lodash_placeholder__",p=1,g=2,x=4,b=1,j=2,S=1,_=2,T=4,C=8,E=16,k=32,O=64,I=128,F=256,B=512,$=30,L="...",V=800,H=16,ne=1,Q=2,q=3,G=1/0,ie=9007199254740991,W=17976931348623157e292,z=NaN,ce=4294967295,je=ce-1,Y=ce>>>1,Ie=[["ary",I],["bind",S],["bindKey",_],["curry",C],["curryRight",E],["flip",B],["partial",k],["partialRight",O],["rearg",F]],Ue="[object Arguments]",ze="[object Array]",Le="[object AsyncFunction]",be="[object Boolean]",Ce="[object Date]",Ae="[object DOMException]",me="[object Error]",ye="[object Function]",le="[object GeneratorFunction]",X="[object Map]",ae="[object Number]",de="[object Null]",ee="[object Object]",Ne="[object Promise]",Te="[object Proxy]",Fe="[object RegExp]",xe="[object Set]",te="[object String]",oe="[object Symbol]",_e="[object Undefined]",Oe="[object WeakMap]",K="[object WeakSet]",ge="[object ArrayBuffer]",ue="[object DataView]",fe="[object Float32Array]",Ee="[object Float64Array]",Ke="[object Int8Array]",$e="[object Int16Array]",We="[object Int32Array]",it="[object Uint8Array]",wt="[object Uint8ClampedArray]",we="[object Uint16Array]",Xe="[object Uint32Array]",Je=/\b__p \+= '';/g,ct=/\b(__p \+=) '' \+/g,Ct=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,ot=RegExp(bt.source),Tt=RegExp(ke.source),Ve=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,kt=/<%=([\s\S]+?)%>/g,Yn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vt=/[\\^$.*+?()[\]{}|]/g,ln=RegExp(Vt.source),er=/^\s+/,Tn=/\s/,va=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ka=/\{\n\/\* \[wrapped with (.+)\] \*/,Br=/,? & /,ka=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zi=/[()=,{}\[\]\/\s]/,In=/\\(\\)?/g,tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,St=/^[-+]0x[0-9a-f]+$/i,Dt=/^0b[01]+$/i,Nn=/^\[object .+?Constructor\]$/,Rn=/^0o[0-7]+$/i,ba=/^(?:0|[1-9]\d*)$/,yi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,co=/($^)/,Td=/['\n\r\u2028\u2029\\]/g,kd="\\ud800-\\udfff",BS="\\u0300-\\u036f",$f="\\ufe20-\\ufe2f",Bf="\\u20d0-\\u20ff",Ls=BS+$f+Bf,zf="\\u2700-\\u27bf",Yg="a-z\\xdf-\\xf6\\xf8-\\xff",Kc="\\xac\\xb1\\xd7\\xf7",Kg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qg="\\u2000-\\u206f",zS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xg="A-Z\\xc0-\\xd6\\xd8-\\xde",xi="\\ufe0e\\ufe0f",Jg=Kc+Kg+Qg+zS,Zg="[']",qf="["+kd+"]",ey="["+Jg+"]",ql="["+Ls+"]",Gb="\\d+",qi="["+zf+"]",Uf="["+Yg+"]",ty="[^"+kd+Jg+Gb+zf+Yg+Xg+"]",Ad="\\ud83c[\\udffb-\\udfff]",Qc="(?:"+ql+"|"+Ad+")",ny="[^"+kd+"]",Vf="(?:\\ud83c[\\udde6-\\uddff]){2}",Go="[\\ud800-\\udbff][\\udc00-\\udfff]",Xc="["+Xg+"]",ry="\\u200d",ay="(?:"+Uf+"|"+ty+")",iy="(?:"+Xc+"|"+ty+")",Wb="(?:"+Zg+"(?:d|ll|m|re|s|t|ve))?",Yb="(?:"+Zg+"(?:D|LL|M|RE|S|T|VE))?",Ed=Qc+"?",Hf="["+xi+"]?",sy="(?:"+ry+"(?:"+[ny,Vf,Go].join("|")+")"+Hf+Ed+")*",Jc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Zc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",oy=Hf+Ed+sy,ly="(?:"+[qi,Vf,Go].join("|")+")"+oy,Kb="(?:"+[ny+ql+"?",ql,Vf,Go,qf].join("|")+")",Pd=RegExp(Zg,"g"),uo=RegExp(ql,"g"),Od=RegExp(Ad+"(?="+Ad+")|"+Kb+oy,"g"),Dd=RegExp([Xc+"?"+Uf+"+"+Wb+"(?="+[ey,Xc,"$"].join("|")+")",iy+"+"+Yb+"(?="+[ey,Xc+ay,"$"].join("|")+")",Xc+"?"+ay+"+"+Wb,Xc+"+"+Yb,Zc,Jc,Gb,ly].join("|"),"g"),Wo=RegExp("["+ry+kd+Ls+xi+"]"),cy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qb=-1,or={};or[fe]=or[Ee]=or[Ke]=or[$e]=or[We]=or[it]=or[wt]=or[we]=or[Xe]=!0,or[Ue]=or[ze]=or[ge]=or[be]=or[ue]=or[Ce]=or[me]=or[ye]=or[X]=or[ae]=or[ee]=or[Fe]=or[xe]=or[te]=or[Oe]=!1;var tr={};tr[Ue]=tr[ze]=tr[ge]=tr[ue]=tr[be]=tr[Ce]=tr[fe]=tr[Ee]=tr[Ke]=tr[$e]=tr[We]=tr[X]=tr[ae]=tr[ee]=tr[Fe]=tr[xe]=tr[te]=tr[oe]=tr[it]=tr[wt]=tr[we]=tr[Xe]=!0,tr[me]=tr[ye]=tr[Oe]=!1;var Xb={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Qa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ul={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Md=parseFloat,qS=parseInt,Yf=typeof no=="object"&&no&&no.Object===Object&&no,uy=typeof self=="object"&&self&&self.Object===Object&&self,Yr=Yf||uy||Function("return this")(),eu=e&&!e.nodeType&&e,Yo=eu&&!0&&t&&!t.nodeType&&t,Jb=Yo&&Yo.exports===eu,dy=Jb&&Yf.process,Ui=function(){try{var He=Yo&&Yo.require&&Yo.require("util").types;return He||dy&&dy.binding&&dy.binding("util")}catch{}}(),Kf=Ui&&Ui.isArrayBuffer,Zb=Ui&&Ui.isDate,e0=Ui&&Ui.isMap,t0=Ui&&Ui.isRegExp,n0=Ui&&Ui.isSet,r0=Ui&&Ui.isTypedArray;function Xa(He,st,rt){switch(rt.length){case 0:return He.call(st);case 1:return He.call(st,rt[0]);case 2:return He.call(st,rt[0],rt[1]);case 3:return He.call(st,rt[0],rt[1],rt[2])}return He.apply(st,rt)}function US(He,st,rt,At){for(var Jt=-1,$n=He==null?0:He.length;++Jt<$n;){var Kr=He[Jt];st(At,Kr,rt(Kr),He)}return At}function Vi(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At&&st(He[rt],rt,He)!==!1;);return He}function VS(He,st){for(var rt=He==null?0:He.length;rt--&&st(He[rt],rt,He)!==!1;);return He}function a0(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At;)if(!st(He[rt],rt,He))return!1;return!0}function Fs(He,st){for(var rt=-1,At=He==null?0:He.length,Jt=0,$n=[];++rt<At;){var Kr=He[rt];st(Kr,rt,He)&&($n[Jt++]=Kr)}return $n}function Qf(He,st){var rt=He==null?0:He.length;return!!rt&&tu(He,st,0)>-1}function hy(He,st,rt){for(var At=-1,Jt=He==null?0:He.length;++At<Jt;)if(rt(st,He[At]))return!0;return!1}function kr(He,st){for(var rt=-1,At=He==null?0:He.length,Jt=Array(At);++rt<At;)Jt[rt]=st(He[rt],rt,He);return Jt}function ho(He,st){for(var rt=-1,At=st.length,Jt=He.length;++rt<At;)He[Jt+rt]=st[rt];return He}function fy(He,st,rt,At){var Jt=-1,$n=He==null?0:He.length;for(At&&$n&&(rt=He[++Jt]);++Jt<$n;)rt=st(rt,He[Jt],Jt,He);return rt}function HS(He,st,rt,At){var Jt=He==null?0:He.length;for(At&&Jt&&(rt=He[--Jt]);Jt--;)rt=st(rt,He[Jt],Jt,He);return rt}function py(He,st){for(var rt=-1,At=He==null?0:He.length;++rt<At;)if(st(He[rt],rt,He))return!0;return!1}var GS=Jf("length");function WS(He){return He.split("")}function YS(He){return He.match(ka)||[]}function i0(He,st,rt){var At;return rt(He,function(Jt,$n,Kr){if(st(Jt,$n,Kr))return At=$n,!1}),At}function Xf(He,st,rt,At){for(var Jt=He.length,$n=rt+(At?1:-1);At?$n--:++$n<Jt;)if(st(He[$n],$n,He))return $n;return-1}function tu(He,st,rt){return st===st?JS(He,st,rt):Xf(He,nu,rt)}function my(He,st,rt,At){for(var Jt=rt-1,$n=He.length;++Jt<$n;)if(At(He[Jt],st))return Jt;return-1}function nu(He){return He!==He}function s0(He,st){var rt=He==null?0:He.length;return rt?ep(He,st)/rt:z}function Jf(He){return function(st){return st==null?n:st[He]}}function Zf(He){return function(st){return He==null?n:He[st]}}function gy(He,st,rt,At,Jt){return Jt(He,function($n,Kr,Bn){rt=At?(At=!1,$n):st(rt,$n,Kr,Bn)}),rt}function o0(He,st){var rt=He.length;for(He.sort(st);rt--;)He[rt]=He[rt].value;return He}function ep(He,st){for(var rt,At=-1,Jt=He.length;++At<Jt;){var $n=st(He[At]);$n!==n&&(rt=rt===n?$n:rt+$n)}return rt}function Ko(He,st){for(var rt=-1,At=Array(He);++rt<He;)At[rt]=st(rt);return At}function KS(He,st){return kr(st,function(rt){return[rt,He[rt]]})}function l0(He){return He&&He.slice(0,xy(He)+1).replace(er,"")}function vi(He){return function(st){return He(st)}}function tp(He,st){return kr(st,function(rt){return He[rt]})}function ru(He,st){return He.has(st)}function au(He,st){for(var rt=-1,At=He.length;++rt<At&&tu(st,He[rt],0)>-1;);return rt}function iu(He,st){for(var rt=He.length;rt--&&tu(st,He[rt],0)>-1;);return rt}function QS(He,st){for(var rt=He.length,At=0;rt--;)He[rt]===st&&++At;return At}var np=Zf(Xb),c0=Zf(Qa);function u0(He){return"\\"+Wf[He]}function yy(He,st){return He==null?n:He[st]}function Qo(He){return Wo.test(He)}function d0(He){return cy.test(He)}function h0(He){for(var st,rt=[];!(st=He.next()).done;)rt.push(st.value);return rt}function rp(He){var st=-1,rt=Array(He.size);return He.forEach(function(At,Jt){rt[++st]=[Jt,At]}),rt}function f0(He,st){return function(rt){return He(st(rt))}}function Xo(He,st){for(var rt=-1,At=He.length,Jt=0,$n=[];++rt<At;){var Kr=He[rt];(Kr===st||Kr===f)&&(He[rt]=f,$n[Jt++]=rt)}return $n}function ap(He){var st=-1,rt=Array(He.size);return He.forEach(function(At){rt[++st]=At}),rt}function XS(He){var st=-1,rt=Array(He.size);return He.forEach(function(At){rt[++st]=[At,At]}),rt}function JS(He,st,rt){for(var At=rt-1,Jt=He.length;++At<Jt;)if(He[At]===st)return At;return-1}function bi(He,st,rt){for(var At=rt+1;At--;)if(He[At]===st)return At;return At}function $s(He){return Qo(He)?m0(He):GS(He)}function Hi(He){return Qo(He)?vy(He):WS(He)}function xy(He){for(var st=He.length;st--&&Tn.test(He.charAt(st)););return st}var p0=Zf(Ul);function m0(He){for(var st=Od.lastIndex=0;Od.test(He);)++st;return st}function vy(He){return He.match(Od)||[]}function ZS(He){return He.match(Dd)||[]}var su=function He(st){st=st==null?Yr:Jo.defaults(Yr.Object(),st,Jo.pick(Yr,Gf));var rt=st.Array,At=st.Date,Jt=st.Error,$n=st.Function,Kr=st.Math,Bn=st.Object,ip=st.RegExp,g0=st.String,ji=st.TypeError,sp=rt.prototype,e_=$n.prototype,ou=Bn.prototype,Id=st["__core-js_shared__"],Rd=e_.toString,Kn=ou.hasOwnProperty,ps=0,by=function(){var y=/[^.]+$/.exec(Id&&Id.keys&&Id.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Ba=ou.toString,Gi=Rd.call(Bn),lu=Yr._,jy=ip("^"+Rd.call(Kn).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vl=Jb?st.Buffer:n,ms=st.Symbol,cu=st.Uint8Array,Hl=Vl?Vl.allocUnsafe:n,Ld=f0(Bn.getPrototypeOf,Bn),Fd=Bn.create,Gl=ou.propertyIsEnumerable,op=sp.splice,Ja=ms?ms.isConcatSpreadable:n,Wl=ms?ms.iterator:n,za=ms?ms.toStringTag:n,$d=function(){try{var y=ol(Bn,"defineProperty");return y({},"",{}),y}catch{}}(),lp=st.clearTimeout!==Yr.clearTimeout&&st.clearTimeout,Yl=At&&At.now!==Yr.Date.now&&At.now,wy=st.setTimeout!==Yr.setTimeout&&st.setTimeout,uu=Kr.ceil,fo=Kr.floor,Zo=Bn.getOwnPropertySymbols,cp=Vl?Vl.isBuffer:n,Bd=st.isFinite,Wi=sp.join,Yi=f0(Bn.keys,Bn),Nr=Kr.max,Ar=Kr.min,po=At.now,Kl=st.parseInt,Ny=Kr.random,Sy=sp.reverse,zd=ol(st,"DataView"),na=ol(st,"Map"),Er=ol(st,"Promise"),kn=ol(st,"Set"),gs=ol(st,"WeakMap"),Za=ol(Bn,"create"),du=gs&&new gs,Ki={},y0=No(zd),x0=No(na),qd=No(Er),Ud=No(kn),v0=No(gs),el=ms?ms.prototype:n,Ql=el?el.valueOf:n,tl=el?el.toString:n;function he(y){if(Lr(y)&&!sn(y)&&!(y instanceof vn)){if(y instanceof ei)return y;if(Kn.call(y,"__wrapped__"))return aa(y)}return new ei(y)}var wi=function(){function y(){}return function(w){if(!Or(w))return{};if(Fd)return Fd(w);y.prototype=w;var M=new y;return y.prototype=n,M}}();function Qi(){}function ei(y,w){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!w,this.__index__=0,this.__values__=n}he.templateSettings={escape:Ve,evaluate:jt,interpolate:kt,variable:"",imports:{_:he}},he.prototype=Qi.prototype,he.prototype.constructor=he,ei.prototype=wi(Qi.prototype),ei.prototype.constructor=ei;function vn(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function Vd(){var y=new vn(this.__wrapped__);return y.__actions__=ra(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=ra(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=ra(this.__views__),y}function up(){if(this.__filtered__){var y=new vn(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function Xl(){var y=this.__wrapped__.value(),w=this.__dir__,M=sn(y),U=w<0,re=M?y.length:0,ve=J0(0,re,this.__views__),Pe=ve.start,Be=ve.end,Ye=Be-Pe,ft=U?Be:Pe-1,mt=this.__iteratees__,yt=mt.length,Et=0,Ft=Ar(Ye,this.__takeCount__);if(!M||!U&&re==Ye&&Ft==Ye)return F0(y,this.__actions__);var Zt=[];e:for(;Ye--&&Et<Ft;){ft+=w;for(var jn=-1,en=y[ft];++jn<yt;){var Pn=mt[jn],qn=Pn.iteratee,Ns=Pn.type,Ai=qn(en);if(Ns==Q)en=Ai;else if(!Ai){if(Ns==ne)continue e;break e}}Zt[Et++]=en}return Zt}vn.prototype=wi(Qi.prototype),vn.prototype.constructor=vn;function zr(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function dp(){this.__data__=Za?Za(null):{},this.size=0}function b0(y){var w=this.has(y)&&delete this.__data__[y];return this.size-=w?1:0,w}function t_(y){var w=this.__data__;if(Za){var M=w[y];return M===c?n:M}return Kn.call(w,y)?w[y]:n}function n_(y){var w=this.__data__;return Za?w[y]!==n:Kn.call(w,y)}function r_(y,w){var M=this.__data__;return this.size+=this.has(y)?0:1,M[y]=Za&&w===n?c:w,this}zr.prototype.clear=dp,zr.prototype.delete=b0,zr.prototype.get=t_,zr.prototype.has=n_,zr.prototype.set=r_;function mr(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function _y(){this.__data__=[],this.size=0}function Hd(y){var w=this.__data__,M=pu(w,y);if(M<0)return!1;var U=w.length-1;return M==U?w.pop():op.call(w,M,1),--this.size,!0}function Gd(y){var w=this.__data__,M=pu(w,y);return M<0?n:w[M][1]}function Cy(y){return pu(this.__data__,y)>-1}function hu(y,w){var M=this.__data__,U=pu(M,y);return U<0?(++this.size,M.push([y,w])):M[U][1]=w,this}mr.prototype.clear=_y,mr.prototype.delete=Hd,mr.prototype.get=Gd,mr.prototype.has=Cy,mr.prototype.set=hu;function ti(y){var w=-1,M=y==null?0:y.length;for(this.clear();++w<M;){var U=y[w];this.set(U[0],U[1])}}function a_(){this.size=0,this.__data__={hash:new zr,map:new(na||mr),string:new zr}}function j0(y){var w=bu(this,y).delete(y);return this.size-=w?1:0,w}function i_(y){return bu(this,y).get(y)}function w0(y){return bu(this,y).has(y)}function Jl(y,w){var M=bu(this,y),U=M.size;return M.set(y,w),this.size+=M.size==U?0:1,this}ti.prototype.clear=a_,ti.prototype.delete=j0,ti.prototype.get=i_,ti.prototype.has=w0,ti.prototype.set=Jl;function mo(y){var w=-1,M=y==null?0:y.length;for(this.__data__=new ti;++w<M;)this.add(y[w])}function hp(y){return this.__data__.set(y,c),this}function N0(y){return this.__data__.has(y)}mo.prototype.add=mo.prototype.push=hp,mo.prototype.has=N0;function qa(y){var w=this.__data__=new mr(y);this.size=w.size}function S0(){this.__data__=new mr,this.size=0}function fp(y){var w=this.__data__,M=w.delete(y);return this.size=w.size,M}function Ty(y){return this.__data__.get(y)}function _0(y){return this.__data__.has(y)}function pp(y,w){var M=this.__data__;if(M instanceof mr){var U=M.__data__;if(!na||U.length<i-1)return U.push([y,w]),this.size=++M.size,this;M=this.__data__=new ti(U)}return M.set(y,w),this.size=M.size,this}qa.prototype.clear=S0,qa.prototype.delete=fp,qa.prototype.get=Ty,qa.prototype.has=_0,qa.prototype.set=pp;function ky(y,w){var M=sn(y),U=!M&&To(y),re=!M&&!U&&yl(y),ve=!M&&!U&&!re&&Mu(y),Pe=M||U||re||ve,Be=Pe?Ko(y.length,g0):[],Ye=Be.length;for(var ft in y)(w||Kn.call(y,ft))&&!(Pe&&(ft=="length"||re&&(ft=="offset"||ft=="parent")||ve&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||bs(ft,Ye)))&&Be.push(ft);return Be}function fu(y){var w=y.length;return w?y[Sp(0,w-1)]:n}function C0(y,w){return vh(ra(y),xs(w,0,y.length))}function T0(y){return vh(ra(y))}function Bs(y,w,M){(M!==n&&!li(y[w],M)||M===n&&!(w in y))&&ys(y,w,M)}function Zl(y,w,M){var U=y[w];(!(Kn.call(y,w)&&li(U,M))||M===n&&!(w in y))&&ys(y,w,M)}function pu(y,w){for(var M=y.length;M--;)if(li(y[M][0],w))return M;return-1}function nl(y,w,M,U){return yo(y,function(re,ve,Pe){w(U,re,M(re),Pe)}),U}function go(y,w){return y&&ai(w,oa(w),y)}function Wd(y,w){return y&&ai(w,fa(w),y)}function ys(y,w,M){w=="__proto__"&&$d?$d(y,w,{configurable:!0,enumerable:!0,value:M,writable:!0}):y[w]=M}function Yd(y,w){for(var M=-1,U=w.length,re=rt(U),ve=y==null;++M<U;)re[M]=ve?n:Dh(y,w[M]);return re}function xs(y,w,M){return y===y&&(M!==n&&(y=y<=M?y:M),w!==n&&(y=y>=w?y:w)),y}function Aa(y,w,M,U,re,ve){var Pe,Be=w&p,Ye=w&g,ft=w&x;if(M&&(Pe=re?M(y,U,re,ve):M(y)),Pe!==n)return Pe;if(!Or(y))return y;var mt=sn(y);if(mt){if(Pe=ex(y),!Be)return ra(y,Pe)}else{var yt=ha(y),Et=yt==ye||yt==le;if(yl(y))return Gy(y,Be);if(yt==ee||yt==Ue||Et&&!re){if(Pe=Ye||Et?{}:tx(y),!Be)return Ye?oh(y,Wd(Pe,y)):Ep(y,go(Pe,y))}else{if(!tr[yt])return re?y:{};Pe=nx(y,yt,Be)}}ve||(ve=new qa);var Ft=ve.get(y);if(Ft)return Ft;ve.set(y,Pe),V1(y)?y.forEach(function(en){Pe.add(Aa(en,w,M,en,y,ve))}):tm(y)&&y.forEach(function(en,Pn){Pe.set(Pn,Aa(en,w,M,Pn,y,ve))});var Zt=ft?Ye?Mp:Dp:Ye?fa:oa,jn=mt?n:Zt(y);return Vi(jn||y,function(en,Pn){jn&&(Pn=en,en=y[Pn]),Zl(Pe,Pn,Aa(en,w,M,Pn,y,ve))}),Pe}function k0(y){var w=oa(y);return function(M){return Ay(M,y,w)}}function Ay(y,w,M){var U=M.length;if(y==null)return!U;for(y=Bn(y);U--;){var re=M[U],ve=w[re],Pe=y[re];if(Pe===n&&!(re in y)||!ve(Pe))return!1}return!0}function ec(y,w,M){if(typeof y!="function")throw new ji(o);return wu(function(){y.apply(n,M)},w)}function rl(y,w,M,U){var re=-1,ve=Qf,Pe=!0,Be=y.length,Ye=[],ft=w.length;if(!Be)return Ye;M&&(w=kr(w,vi(M))),U?(ve=hy,Pe=!1):w.length>=i&&(ve=ru,Pe=!1,w=new mo(w));e:for(;++re<Be;){var mt=y[re],yt=M==null?mt:M(mt);if(mt=U||mt!==0?mt:0,Pe&&yt===yt){for(var Et=ft;Et--;)if(w[Et]===yt)continue e;Ye.push(mt)}else ve(w,yt,U)||Ye.push(mt)}return Ye}var yo=Qy(Ea),mp=Qy(gu,!0);function Ey(y,w){var M=!0;return yo(y,function(U,re,ve){return M=!!w(U,re,ve),M}),M}function vs(y,w,M){for(var U=-1,re=y.length;++U<re;){var ve=y[U],Pe=w(ve);if(Pe!=null&&(Be===n?Pe===Pe&&!Ha(Pe):M(Pe,Be)))var Be=Pe,Ye=ve}return Ye}function yn(y,w,M,U){var re=y.length;for(M=dn(M),M<0&&(M=-M>re?0:re+M),U=U===n||U>re?re:dn(U),U<0&&(U+=re),U=M>U?0:Ks(U);M<U;)y[M++]=w;return y}function nr(y,w){var M=[];return yo(y,function(U,re,ve){w(U,re,ve)&&M.push(U)}),M}function An(y,w,M,U,re){var ve=-1,Pe=y.length;for(M||(M=jo),re||(re=[]);++ve<Pe;){var Be=y[ve];w>0&&M(Be)?w>1?An(Be,w-1,M,U,re):ho(re,Be):U||(re[re.length]=Be)}return re}var mu=oc(),tc=oc(!0);function Ea(y,w){return y&&mu(y,w,oa)}function gu(y,w){return y&&tc(y,w,oa)}function al(y,w){return Fs(w,function(M){return js(y[M])})}function Xi(y,w){w=vo(w,y);for(var M=0,U=w.length;y!=null&&M<U;)y=y[Xn(w[M++])];return M&&M==U?y:n}function A0(y,w,M){var U=w(y);return sn(y)?U:ho(U,M(y))}function En(y){return y==null?y===n?_e:de:za&&za in Bn(y)?X0(y):r1(y)}function Kd(y,w){return y>w}function Py(y,w){return y!=null&&Kn.call(y,w)}function E0(y,w){return y!=null&&w in Bn(y)}function P0(y,w,M){return y>=Ar(w,M)&&y<Nr(w,M)}function Oy(y,w,M){for(var U=M?hy:Qf,re=y[0].length,ve=y.length,Pe=ve,Be=rt(ve),Ye=1/0,ft=[];Pe--;){var mt=y[Pe];Pe&&w&&(mt=kr(mt,vi(w))),Ye=Ar(mt.length,Ye),Be[Pe]=!M&&(w||re>=120&&mt.length>=120)?new mo(Pe&&mt):n}mt=y[0];var yt=-1,Et=Be[0];e:for(;++yt<re&&ft.length<Ye;){var Ft=mt[yt],Zt=w?w(Ft):Ft;if(Ft=M||Ft!==0?Ft:0,!(Et?ru(Et,Zt):U(ft,Zt,M))){for(Pe=ve;--Pe;){var jn=Be[Pe];if(!(jn?ru(jn,Zt):U(y[Pe],Zt,M)))continue e}Et&&Et.push(Zt),ft.push(Ft)}}return ft}function Dy(y,w,M,U){return Ea(y,function(re,ve,Pe){w(U,M(re),ve,Pe)}),U}function nc(y,w,M){w=vo(w,y),y=ju(y,w);var U=y==null?y:y[Xn(Pa(w))];return U==null?n:Xa(U,y,M)}function gp(y){return Lr(y)&&En(y)==Ue}function ni(y){return Lr(y)&&En(y)==ge}function Qr(y){return Lr(y)&&En(y)==Ce}function rc(y,w,M,U,re){return y===w?!0:y==null||w==null||!Lr(y)&&!Lr(w)?y!==y&&w!==w:Qd(y,w,M,U,rc,re)}function Qd(y,w,M,U,re,ve){var Pe=sn(y),Be=sn(w),Ye=Pe?ze:ha(y),ft=Be?ze:ha(w);Ye=Ye==Ue?ee:Ye,ft=ft==Ue?ee:ft;var mt=Ye==ee,yt=ft==ee,Et=Ye==ft;if(Et&&yl(y)){if(!yl(w))return!1;Pe=!0,mt=!1}if(Et&&!mt)return ve||(ve=new qa),Pe||Mu(y)?K0(y,w,M,U,re,ve):Q0(y,w,Ye,M,U,re,ve);if(!(M&b)){var Ft=mt&&Kn.call(y,"__wrapped__"),Zt=yt&&Kn.call(w,"__wrapped__");if(Ft||Zt){var jn=Ft?y.value():y,en=Zt?w.value():w;return ve||(ve=new qa),re(jn,en,M,U,ve)}}return Et?(ve||(ve=new qa),da(y,w,M,U,re,ve)):!1}function yp(y){return Lr(y)&&ha(y)==X}function Xd(y,w,M,U){var re=M.length,ve=re,Pe=!U;if(y==null)return!ve;for(y=Bn(y);re--;){var Be=M[re];if(Pe&&Be[2]?Be[1]!==y[Be[0]]:!(Be[0]in y))return!1}for(;++re<ve;){Be=M[re];var Ye=Be[0],ft=y[Ye],mt=Be[1];if(Pe&&Be[2]){if(ft===n&&!(Ye in y))return!1}else{var yt=new qa;if(U)var Et=U(ft,mt,Ye,y,w,yt);if(!(Et===n?rc(mt,ft,b|j,U,yt):Et))return!1}}return!0}function zs(y){if(!Or(y)||Bp(y))return!1;var w=js(y)?jy:Nn;return w.test(No(y))}function xp(y){return Lr(y)&&En(y)==Fe}function My(y){return Lr(y)&&ha(y)==xe}function Iy(y){return Lr(y)&&hc(y.length)&&!!or[En(y)]}function Ry(y){return typeof y=="function"?y:y==null?et:typeof y=="object"?sn(y)?jp(y[0],y[1]):Fy(y):zn(y)}function vp(y){if(!gr(y))return Yi(y);var w=[];for(var M in Bn(y))Kn.call(y,M)&&M!="constructor"&&w.push(M);return w}function O0(y){if(!Or(y))return ll(y);var w=gr(y),M=[];for(var U in y)U=="constructor"&&(w||!Kn.call(y,U))||M.push(U);return M}function bp(y,w){return y<w}function Ly(y,w){var M=-1,U=ia(y)?rt(y.length):[];return yo(y,function(re,ve,Pe){U[++M]=w(re,ve,Pe)}),U}function Fy(y){var w=Rp(y);return w.length==1&&w[0][2]?t1(w[0][0],w[0][1]):function(M){return M===y||Xd(M,y,w)}}function jp(y,w){return Fp(y)&&e1(w)?t1(Xn(y),w):function(M){var U=Dh(M,y);return U===n&&U===w?Fu(M,y):rc(w,U,b|j)}}function Jd(y,w,M,U,re){y!==w&&mu(w,function(ve,Pe){if(re||(re=new qa),Or(ve))s_(y,w,Pe,M,Jd,U,re);else{var Be=U?U(zp(y,Pe),ve,Pe+"",y,w,re):n;Be===n&&(Be=ve),Bs(y,Pe,Be)}},fa)}function s_(y,w,M,U,re,ve,Pe){var Be=zp(y,M),Ye=zp(w,M),ft=Pe.get(Ye);if(ft){Bs(y,M,ft);return}var mt=ve?ve(Be,Ye,M+"",y,w,Pe):n,yt=mt===n;if(yt){var Et=sn(Ye),Ft=!Et&&yl(Ye),Zt=!Et&&!Ft&&Mu(Ye);mt=Ye,Et||Ft||Zt?sn(Be)?mt=Be:Vr(Be)?mt=ra(Be):Ft?(yt=!1,mt=Gy(Ye,!0)):Zt?(yt=!1,mt=Yy(Ye,!0)):mt=[]:ts(Ye)||To(Ye)?(mt=Be,To(Be)?mt=W1(Be):(!Or(Be)||js(Be))&&(mt=tx(Ye))):yt=!1}yt&&(Pe.set(Ye,mt),re(mt,Ye,U,ve,Pe),Pe.delete(Ye)),Bs(y,M,mt)}function $y(y,w){var M=y.length;if(M)return w+=w<0?M:0,bs(w,M)?y[w]:n}function By(y,w,M){w.length?w=kr(w,function(ve){return sn(ve)?function(Pe){return Xi(Pe,ve.length===1?ve[0]:ve)}:ve}):w=[et];var U=-1;w=kr(w,vi(qt()));var re=Ly(y,function(ve,Pe,Be){var Ye=kr(w,function(ft){return ft(ve)});return{criteria:Ye,index:++U,value:ve}});return o0(re,function(ve,Pe){return q0(ve,Pe,M)})}function D0(y,w){return wp(y,w,function(M,U){return Fu(y,U)})}function wp(y,w,M){for(var U=-1,re=w.length,ve={};++U<re;){var Pe=w[U],Be=Xi(y,Pe);M(Be,Pe)&&xu(ve,vo(Pe,y),Be)}return ve}function M0(y){return function(w){return Xi(w,y)}}function Np(y,w,M,U){var re=U?my:tu,ve=-1,Pe=w.length,Be=y;for(y===w&&(w=ra(w)),M&&(Be=kr(y,vi(M)));++ve<Pe;)for(var Ye=0,ft=w[ve],mt=M?M(ft):ft;(Ye=re(Be,mt,Ye,U))>-1;)Be!==y&&op.call(Be,Ye,1),op.call(y,Ye,1);return y}function zy(y,w){for(var M=y?w.length:0,U=M-1;M--;){var re=w[M];if(M==U||re!==ve){var ve=re;bs(re)?op.call(y,re,1):nh(y,re)}}return y}function Sp(y,w){return y+fo(Ny()*(w-y+1))}function I0(y,w,M,U){for(var re=-1,ve=Nr(uu((w-y)/(M||1)),0),Pe=rt(ve);ve--;)Pe[U?ve:++re]=y,y+=M;return Pe}function qy(y,w){var M="";if(!y||w<1||w>ie)return M;do w%2&&(M+=y),w=fo(w/2),w&&(y+=y);while(w);return M}function mn(y,w){return yh(rx(y,w,et),y+"")}function yu(y){return fu(Bu(y))}function _p(y,w){var M=Bu(y);return vh(M,xs(w,0,M.length))}function xu(y,w,M,U){if(!Or(y))return y;w=vo(w,y);for(var re=-1,ve=w.length,Pe=ve-1,Be=y;Be!=null&&++re<ve;){var Ye=Xn(w[re]),ft=M;if(Ye==="__proto__"||Ye==="constructor"||Ye==="prototype")return y;if(re!=Pe){var mt=Be[Ye];ft=U?U(mt,Ye,Be):n,ft===n&&(ft=Or(mt)?mt:bs(w[re+1])?[]:{})}Zl(Be,Ye,ft),Be=Be[Ye]}return y}var Zd=du?function(y,w){return du.set(y,w),y}:et,eh=$d?function(y,w){return $d(y,"toString",{configurable:!0,enumerable:!1,value:Ze(w),writable:!0})}:et;function R0(y){return vh(Bu(y))}function Ni(y,w,M){var U=-1,re=y.length;w<0&&(w=-w>re?0:re+w),M=M>re?re:M,M<0&&(M+=re),re=w>M?0:M-w>>>0,w>>>=0;for(var ve=rt(re);++U<re;)ve[U]=y[U+w];return ve}function L0(y,w){var M;return yo(y,function(U,re,ve){return M=w(U,re,ve),!M}),!!M}function th(y,w,M){var U=0,re=y==null?U:y.length;if(typeof w=="number"&&w===w&&re<=Y){for(;U<re;){var ve=U+re>>>1,Pe=y[ve];Pe!==null&&!Ha(Pe)&&(M?Pe<=w:Pe<w)?U=ve+1:re=ve}return re}return Cp(y,w,et,M)}function Cp(y,w,M,U){var re=0,ve=y==null?0:y.length;if(ve===0)return 0;w=M(w);for(var Pe=w!==w,Be=w===null,Ye=Ha(w),ft=w===n;re<ve;){var mt=fo((re+ve)/2),yt=M(y[mt]),Et=yt!==n,Ft=yt===null,Zt=yt===yt,jn=Ha(yt);if(Pe)var en=U||Zt;else ft?en=Zt&&(U||Et):Be?en=Zt&&Et&&(U||!Ft):Ye?en=Zt&&Et&&!Ft&&(U||!jn):Ft||jn?en=!1:en=U?yt<=w:yt<w;en?re=mt+1:ve=mt}return Ar(ve,je)}function Uy(y,w){for(var M=-1,U=y.length,re=0,ve=[];++M<U;){var Pe=y[M],Be=w?w(Pe):Pe;if(!M||!li(Be,Ye)){var Ye=Be;ve[re++]=Pe===0?0:Pe}}return ve}function Tp(y){return typeof y=="number"?y:Ha(y)?z:+y}function ri(y){if(typeof y=="string")return y;if(sn(y))return kr(y,ri)+"";if(Ha(y))return tl?tl.call(y):"";var w=y+"";return w=="0"&&1/y==-1/0?"-0":w}function xo(y,w,M){var U=-1,re=Qf,ve=y.length,Pe=!0,Be=[],Ye=Be;if(M)Pe=!1,re=hy;else if(ve>=i){var ft=w?null:W0(y);if(ft)return ap(ft);Pe=!1,re=ru,Ye=new mo}else Ye=w?[]:Be;e:for(;++U<ve;){var mt=y[U],yt=w?w(mt):mt;if(mt=M||mt!==0?mt:0,Pe&&yt===yt){for(var Et=Ye.length;Et--;)if(Ye[Et]===yt)continue e;w&&Ye.push(yt),Be.push(mt)}else re(Ye,yt,M)||(Ye!==Be&&Ye.push(yt),Be.push(mt))}return Be}function nh(y,w){return w=vo(w,y),y=ju(y,w),y==null||delete y[Xn(Pa(w))]}function Vy(y,w,M,U){return xu(y,w,M(Xi(y,w)),U)}function rh(y,w,M,U){for(var re=y.length,ve=U?re:-1;(U?ve--:++ve<re)&&w(y[ve],ve,y););return M?Ni(y,U?0:ve,U?ve+1:re):Ni(y,U?ve+1:0,U?re:ve)}function F0(y,w){var M=y;return M instanceof vn&&(M=M.value()),fy(w,function(U,re){return re.func.apply(re.thisArg,ho([U],re.args))},M)}function ah(y,w,M){var U=y.length;if(U<2)return U?xo(y[0]):[];for(var re=-1,ve=rt(U);++re<U;)for(var Pe=y[re],Be=-1;++Be<U;)Be!=re&&(ve[re]=rl(ve[re]||Pe,y[Be],w,M));return xo(An(ve,1),w,M)}function Hy(y,w,M){for(var U=-1,re=y.length,ve=w.length,Pe={};++U<re;){var Be=U<ve?w[U]:n;M(Pe,y[U],Be)}return Pe}function kp(y){return Vr(y)?y:[]}function ih(y){return typeof y=="function"?y:et}function vo(y,w){return sn(y)?y:Fp(y,w)?[y]:Hs(Qn(y))}var $0=mn;function il(y,w,M){var U=y.length;return M=M===n?U:M,!w&&M>=U?y:Ni(y,w,M)}var B0=lp||function(y){return Yr.clearTimeout(y)};function Gy(y,w){if(w)return y.slice();var M=y.length,U=Hl?Hl(M):new y.constructor(M);return y.copy(U),U}function ac(y){var w=new y.constructor(y.byteLength);return new cu(w).set(new cu(y)),w}function Wy(y,w){var M=w?ac(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.byteLength)}function Ap(y){var w=new y.constructor(y.source,gt.exec(y));return w.lastIndex=y.lastIndex,w}function z0(y){return Ql?Bn(Ql.call(y)):{}}function Yy(y,w){var M=w?ac(y.buffer):y.buffer;return new y.constructor(M,y.byteOffset,y.length)}function sh(y,w){if(y!==w){var M=y!==n,U=y===null,re=y===y,ve=Ha(y),Pe=w!==n,Be=w===null,Ye=w===w,ft=Ha(w);if(!Be&&!ft&&!ve&&y>w||ve&&Pe&&Ye&&!Be&&!ft||U&&Pe&&Ye||!M&&Ye||!re)return 1;if(!U&&!ve&&!ft&&y<w||ft&&M&&re&&!U&&!ve||Be&&M&&re||!Pe&&re||!Ye)return-1}return 0}function q0(y,w,M){for(var U=-1,re=y.criteria,ve=w.criteria,Pe=re.length,Be=M.length;++U<Pe;){var Ye=sh(re[U],ve[U]);if(Ye){if(U>=Be)return Ye;var ft=M[U];return Ye*(ft=="desc"?-1:1)}}return y.index-w.index}function Ky(y,w,M,U){for(var re=-1,ve=y.length,Pe=M.length,Be=-1,Ye=w.length,ft=Nr(ve-Pe,0),mt=rt(Ye+ft),yt=!U;++Be<Ye;)mt[Be]=w[Be];for(;++re<Pe;)(yt||re<ve)&&(mt[M[re]]=y[re]);for(;ft--;)mt[Be++]=y[re++];return mt}function U0(y,w,M,U){for(var re=-1,ve=y.length,Pe=-1,Be=M.length,Ye=-1,ft=w.length,mt=Nr(ve-Be,0),yt=rt(mt+ft),Et=!U;++re<mt;)yt[re]=y[re];for(var Ft=re;++Ye<ft;)yt[Ft+Ye]=w[Ye];for(;++Pe<Be;)(Et||re<ve)&&(yt[Ft+M[Pe]]=y[re++]);return yt}function ra(y,w){var M=-1,U=y.length;for(w||(w=rt(U));++M<U;)w[M]=y[M];return w}function ai(y,w,M,U){var re=!M;M||(M={});for(var ve=-1,Pe=w.length;++ve<Pe;){var Be=w[ve],Ye=U?U(M[Be],y[Be],Be,M,y):n;Ye===n&&(Ye=y[Be]),re?ys(M,Be,Ye):Zl(M,Be,Ye)}return M}function Ep(y,w){return ai(y,fh(y),w)}function oh(y,w){return ai(y,Lp(y),w)}function ic(y,w){return function(M,U){var re=sn(M)?US:nl,ve=w?w():{};return re(M,y,qt(U,2),ve)}}function sc(y){return mn(function(w,M){var U=-1,re=M.length,ve=re>1?M[re-1]:n,Pe=re>2?M[2]:n;for(ve=y.length>3&&typeof ve=="function"?(re--,ve):n,Pe&&Va(M[0],M[1],Pe)&&(ve=re<3?n:ve,re=1),w=Bn(w);++U<re;){var Be=M[U];Be&&y(w,Be,U,ve)}return w})}function Qy(y,w){return function(M,U){if(M==null)return M;if(!ia(M))return y(M,U);for(var re=M.length,ve=w?re:-1,Pe=Bn(M);(w?ve--:++ve<re)&&U(Pe[ve],ve,Pe)!==!1;);return M}}function oc(y){return function(w,M,U){for(var re=-1,ve=Bn(w),Pe=U(w),Be=Pe.length;Be--;){var Ye=Pe[y?Be:++re];if(M(ve[Ye],Ye,ve)===!1)break}return w}}function V0(y,w,M){var U=w&S,re=Ji(y);function ve(){var Pe=this&&this!==Yr&&this instanceof ve?re:y;return Pe.apply(U?M:this,arguments)}return ve}function Si(y){return function(w){w=Qn(w);var M=Qo(w)?Hi(w):n,U=M?M[0]:w.charAt(0),re=M?il(M,1).join(""):w.slice(1);return U[y]()+re}}function Ua(y){return function(w){return fy(A(ko(w).replace(Pd,"")),y,"")}}function Ji(y){return function(){var w=arguments;switch(w.length){case 0:return new y;case 1:return new y(w[0]);case 2:return new y(w[0],w[1]);case 3:return new y(w[0],w[1],w[2]);case 4:return new y(w[0],w[1],w[2],w[3]);case 5:return new y(w[0],w[1],w[2],w[3],w[4]);case 6:return new y(w[0],w[1],w[2],w[3],w[4],w[5]);case 7:return new y(w[0],w[1],w[2],w[3],w[4],w[5],w[6])}var M=wi(y.prototype),U=y.apply(M,w);return Or(U)?U:M}}function H0(y,w,M){var U=Ji(y);function re(){for(var ve=arguments.length,Pe=rt(ve),Be=ve,Ye=cc(re);Be--;)Pe[Be]=arguments[Be];var ft=ve<3&&Pe[0]!==Ye&&Pe[ve-1]!==Ye?[]:Xo(Pe,Ye);if(ve-=ft.length,ve<M)return Xy(y,w,qr,re.placeholder,n,Pe,ft,n,n,M-ve);var mt=this&&this!==Yr&&this instanceof re?U:y;return Xa(mt,this,Pe)}return re}function bo(y){return function(w,M,U){var re=Bn(w);if(!ia(w)){var ve=qt(M,3);w=oa(w),M=function(Be){return ve(re[Be],Be,re)}}var Pe=y(w,M,U);return Pe>-1?re[ve?w[Pe]:Pe]:n}}function qs(y){return Sr(function(w){var M=w.length,U=M,re=ei.prototype.thru;for(y&&w.reverse();U--;){var ve=w[U];if(typeof ve!="function")throw new ji(o);if(re&&!Pe&&hh(ve)=="wrapper")var Pe=new ei([],!0)}for(U=Pe?U:M;++U<M;){ve=w[U];var Be=hh(ve),Ye=Be=="wrapper"?Ip(ve):n;Ye&&$p(Ye[0])&&Ye[1]==(I|C|k|F)&&!Ye[4].length&&Ye[9]==1?Pe=Pe[hh(Ye[0])].apply(Pe,Ye[3]):Pe=ve.length==1&&$p(ve)?Pe[Be]():Pe.thru(ve)}return function(){var ft=arguments,mt=ft[0];if(Pe&&ft.length==1&&sn(mt))return Pe.plant(mt).value();for(var yt=0,Et=M?w[yt].apply(this,ft):mt;++yt<M;)Et=w[yt].call(this,Et);return Et}})}function qr(y,w,M,U,re,ve,Pe,Be,Ye,ft){var mt=w&I,yt=w&S,Et=w&_,Ft=w&(C|E),Zt=w&B,jn=Et?n:Ji(y);function en(){for(var Pn=arguments.length,qn=rt(Pn),Ns=Pn;Ns--;)qn[Ns]=arguments[Ns];if(Ft)var Ai=cc(en),Ss=QS(qn,Ai);if(U&&(qn=Ky(qn,U,re,Ft)),ve&&(qn=U0(qn,ve,Pe,Ft)),Pn-=Ss,Ft&&Pn<ft){var la=Xo(qn,Ai);return Xy(y,w,qr,en.placeholder,M,qn,la,Be,Ye,ft-Pn)}var Ao=yt?M:this,fc=Et?Ao[y]:y;return Pn=qn.length,Be?qn=Vs(qn,Be):Zt&&Pn>1&&qn.reverse(),mt&&Ye<Pn&&(qn.length=Ye),this&&this!==Yr&&this instanceof en&&(fc=jn||Ji(fc)),fc.apply(Ao,qn)}return en}function lh(y,w){return function(M,U){return Dy(M,y,w(U),{})}}function vu(y,w){return function(M,U){var re;if(M===n&&U===n)return w;if(M!==n&&(re=M),U!==n){if(re===n)return U;typeof M=="string"||typeof U=="string"?(M=ri(M),U=ri(U)):(M=Tp(M),U=Tp(U)),re=y(M,U)}return re}}function ch(y){return Sr(function(w){return w=kr(w,vi(qt())),mn(function(M){var U=this;return y(w,function(re){return Xa(re,U,M)})})})}function uh(y,w){w=w===n?" ":ri(w);var M=w.length;if(M<2)return M?qy(w,y):w;var U=qy(w,uu(y/$s(w)));return Qo(w)?il(Hi(U),0,y).join(""):U.slice(0,y)}function G0(y,w,M,U){var re=w&S,ve=Ji(y);function Pe(){for(var Be=-1,Ye=arguments.length,ft=-1,mt=U.length,yt=rt(mt+Ye),Et=this&&this!==Yr&&this instanceof Pe?ve:y;++ft<mt;)yt[ft]=U[ft];for(;Ye--;)yt[ft++]=arguments[++Be];return Xa(Et,re?M:this,yt)}return Pe}function sl(y){return function(w,M,U){return U&&typeof U!="number"&&Va(w,M,U)&&(M=U=n),w=Ys(w),M===n?(M=w,w=0):M=Ys(M),U=U===n?w<M?1:-1:Ys(U),I0(w,M,U,y)}}function lc(y){return function(w,M){return typeof w=="string"&&typeof M=="string"||(w=ns(w),M=ns(M)),y(w,M)}}function Xy(y,w,M,U,re,ve,Pe,Be,Ye,ft){var mt=w&C,yt=mt?Pe:n,Et=mt?n:Pe,Ft=mt?ve:n,Zt=mt?n:ve;w|=mt?k:O,w&=~(mt?O:k),w&T||(w&=-4);var jn=[y,w,re,Ft,yt,Zt,Et,Be,Ye,ft],en=M.apply(n,jn);return $p(y)&&qp(en,jn),en.placeholder=U,Up(en,y,w)}function Pp(y){var w=Kr[y];return function(M,U){if(M=ns(M),U=U==null?0:Ar(dn(U),292),U&&Bd(M)){var re=(Qn(M)+"e").split("e"),ve=w(re[0]+"e"+(+re[1]+U));return re=(Qn(ve)+"e").split("e"),+(re[0]+"e"+(+re[1]-U))}return w(M)}}var W0=kn&&1/ap(new kn([,-0]))[1]==G?function(y){return new kn(y)}:Mt;function dh(y){return function(w){var M=ha(w);return M==X?rp(w):M==xe?XS(w):KS(w,y(w))}}function Us(y,w,M,U,re,ve,Pe,Be){var Ye=w&_;if(!Ye&&typeof y!="function")throw new ji(o);var ft=U?U.length:0;if(ft||(w&=-97,U=re=n),Pe=Pe===n?Pe:Nr(dn(Pe),0),Be=Be===n?Be:dn(Be),ft-=re?re.length:0,w&O){var mt=U,yt=re;U=re=n}var Et=Ye?n:Ip(y),Ft=[y,w,M,U,re,mt,yt,ve,Pe,Be];if(Et&&gh(Ft,Et),y=Ft[0],w=Ft[1],M=Ft[2],U=Ft[3],re=Ft[4],Be=Ft[9]=Ft[9]===n?Ye?0:y.length:Nr(Ft[9]-ft,0),!Be&&w&(C|E)&&(w&=-25),!w||w==S)var Zt=V0(y,w,M);else w==C||w==E?Zt=H0(y,w,Be):(w==k||w==(S|k))&&!re.length?Zt=G0(y,w,M,U):Zt=qr.apply(n,Ft);var jn=Et?Zd:qp;return Up(jn(Zt,Ft),y,w)}function Op(y,w,M,U){return y===n||li(y,ou[M])&&!Kn.call(U,M)?w:y}function Jy(y,w,M,U,re,ve){return Or(y)&&Or(w)&&(ve.set(w,y),Jd(y,w,n,Jy,ve),ve.delete(w)),y}function Y0(y){return ts(y)?n:y}function K0(y,w,M,U,re,ve){var Pe=M&b,Be=y.length,Ye=w.length;if(Be!=Ye&&!(Pe&&Ye>Be))return!1;var ft=ve.get(y),mt=ve.get(w);if(ft&&mt)return ft==w&&mt==y;var yt=-1,Et=!0,Ft=M&j?new mo:n;for(ve.set(y,w),ve.set(w,y);++yt<Be;){var Zt=y[yt],jn=w[yt];if(U)var en=Pe?U(jn,Zt,yt,w,y,ve):U(Zt,jn,yt,y,w,ve);if(en!==n){if(en)continue;Et=!1;break}if(Ft){if(!py(w,function(Pn,qn){if(!ru(Ft,qn)&&(Zt===Pn||re(Zt,Pn,M,U,ve)))return Ft.push(qn)})){Et=!1;break}}else if(!(Zt===jn||re(Zt,jn,M,U,ve))){Et=!1;break}}return ve.delete(y),ve.delete(w),Et}function Q0(y,w,M,U,re,ve,Pe){switch(M){case ue:if(y.byteLength!=w.byteLength||y.byteOffset!=w.byteOffset)return!1;y=y.buffer,w=w.buffer;case ge:return!(y.byteLength!=w.byteLength||!ve(new cu(y),new cu(w)));case be:case Ce:case ae:return li(+y,+w);case me:return y.name==w.name&&y.message==w.message;case Fe:case te:return y==w+"";case X:var Be=rp;case xe:var Ye=U&b;if(Be||(Be=ap),y.size!=w.size&&!Ye)return!1;var ft=Pe.get(y);if(ft)return ft==w;U|=j,Pe.set(y,w);var mt=K0(Be(y),Be(w),U,re,ve,Pe);return Pe.delete(y),mt;case oe:if(Ql)return Ql.call(y)==Ql.call(w)}return!1}function da(y,w,M,U,re,ve){var Pe=M&b,Be=Dp(y),Ye=Be.length,ft=Dp(w),mt=ft.length;if(Ye!=mt&&!Pe)return!1;for(var yt=Ye;yt--;){var Et=Be[yt];if(!(Pe?Et in w:Kn.call(w,Et)))return!1}var Ft=ve.get(y),Zt=ve.get(w);if(Ft&&Zt)return Ft==w&&Zt==y;var jn=!0;ve.set(y,w),ve.set(w,y);for(var en=Pe;++yt<Ye;){Et=Be[yt];var Pn=y[Et],qn=w[Et];if(U)var Ns=Pe?U(qn,Pn,Et,w,y,ve):U(Pn,qn,Et,y,w,ve);if(!(Ns===n?Pn===qn||re(Pn,qn,M,U,ve):Ns)){jn=!1;break}en||(en=Et=="constructor")}if(jn&&!en){var Ai=y.constructor,Ss=w.constructor;Ai!=Ss&&"constructor"in y&&"constructor"in w&&!(typeof Ai=="function"&&Ai instanceof Ai&&typeof Ss=="function"&&Ss instanceof Ss)&&(jn=!1)}return ve.delete(y),ve.delete(w),jn}function Sr(y){return yh(rx(y,n,si),y+"")}function Dp(y){return A0(y,oa,fh)}function Mp(y){return A0(y,fa,Lp)}var Ip=du?function(y){return du.get(y)}:Mt;function hh(y){for(var w=y.name+"",M=Ki[w],U=Kn.call(Ki,w)?M.length:0;U--;){var re=M[U],ve=re.func;if(ve==null||ve==y)return re.name}return w}function cc(y){var w=Kn.call(he,"placeholder")?he:y;return w.placeholder}function qt(){var y=he.iteratee||Yt;return y=y===Yt?Ry:y,arguments.length?y(arguments[0],arguments[1]):y}function bu(y,w){var M=y.__data__;return wo(w)?M[typeof w=="string"?"string":"hash"]:M.map}function Rp(y){for(var w=oa(y),M=w.length;M--;){var U=w[M],re=y[U];w[M]=[U,re,e1(re)]}return w}function ol(y,w){var M=yy(y,w);return zs(M)?M:n}function X0(y){var w=Kn.call(y,za),M=y[za];try{y[za]=n;var U=!0}catch{}var re=Ba.call(y);return U&&(w?y[za]=M:delete y[za]),re}var fh=Zo?function(y){return y==null?[]:(y=Bn(y),Fs(Zo(y),function(w){return Gl.call(y,w)}))}:U_,Lp=Zo?function(y){for(var w=[];y;)ho(w,fh(y)),y=Ld(y);return w}:U_,ha=En;(zd&&ha(new zd(new ArrayBuffer(1)))!=ue||na&&ha(new na)!=X||Er&&ha(Er.resolve())!=Ne||kn&&ha(new kn)!=xe||gs&&ha(new gs)!=Oe)&&(ha=function(y){var w=En(y),M=w==ee?y.constructor:n,U=M?No(M):"";if(U)switch(U){case y0:return ue;case x0:return X;case qd:return Ne;case Ud:return xe;case v0:return Oe}return w});function J0(y,w,M){for(var U=-1,re=M.length;++U<re;){var ve=M[U],Pe=ve.size;switch(ve.type){case"drop":y+=Pe;break;case"dropRight":w-=Pe;break;case"take":w=Ar(w,y+Pe);break;case"takeRight":y=Nr(y,w-Pe);break}}return{start:y,end:w}}function Zy(y){var w=y.match(Ka);return w?w[1].split(Br):[]}function ph(y,w,M){w=vo(w,y);for(var U=-1,re=w.length,ve=!1;++U<re;){var Pe=Xn(w[U]);if(!(ve=y!=null&&M(y,Pe)))break;y=y[Pe]}return ve||++U!=re?ve:(re=y==null?0:y.length,!!re&&hc(re)&&bs(Pe,re)&&(sn(y)||To(y)))}function ex(y){var w=y.length,M=new y.constructor(w);return w&&typeof y[0]=="string"&&Kn.call(y,"index")&&(M.index=y.index,M.input=y.input),M}function tx(y){return typeof y.constructor=="function"&&!gr(y)?wi(Ld(y)):{}}function nx(y,w,M){var U=y.constructor;switch(w){case ge:return ac(y);case be:case Ce:return new U(+y);case ue:return Wy(y,M);case fe:case Ee:case Ke:case $e:case We:case it:case wt:case we:case Xe:return Yy(y,M);case X:return new U;case ae:case te:return new U(y);case Fe:return Ap(y);case xe:return new U;case oe:return z0(y)}}function Z0(y,w){var M=w.length;if(!M)return y;var U=M-1;return w[U]=(M>1?"& ":"")+w[U],w=w.join(M>2?", ":" "),y.replace(va,`{
/* [wrapped with `+w+`] */
`)}function jo(y){return sn(y)||To(y)||!!(Ja&&y&&y[Ja])}function bs(y,w){var M=typeof y;return w=w??ie,!!w&&(M=="number"||M!="symbol"&&ba.test(y))&&y>-1&&y%1==0&&y<w}function Va(y,w,M){if(!Or(M))return!1;var U=typeof w;return(U=="number"?ia(M)&&bs(w,M.length):U=="string"&&w in M)?li(M[w],y):!1}function Fp(y,w){if(sn(y))return!1;var M=typeof y;return M=="number"||M=="symbol"||M=="boolean"||y==null||Ha(y)?!0:vt.test(y)||!Yn.test(y)||w!=null&&y in Bn(w)}function wo(y){var w=typeof y;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?y!=="__proto__":y===null}function $p(y){var w=hh(y),M=he[w];if(typeof M!="function"||!(w in vn.prototype))return!1;if(y===M)return!0;var U=Ip(M);return!!U&&y===U[0]}function Bp(y){return!!by&&by in y}var mh=Id?js:V_;function gr(y){var w=y&&y.constructor,M=typeof w=="function"&&w.prototype||ou;return y===M}function e1(y){return y===y&&!Or(y)}function t1(y,w){return function(M){return M==null?!1:M[y]===w&&(w!==n||y in Bn(M))}}function n1(y){var w=Th(y,function(U){return M.size===d&&M.clear(),U}),M=w.cache;return w}function gh(y,w){var M=y[1],U=w[1],re=M|U,ve=re<(S|_|I),Pe=U==I&&M==C||U==I&&M==F&&y[7].length<=w[8]||U==(I|F)&&w[7].length<=w[8]&&M==C;if(!(ve||Pe))return y;U&S&&(y[2]=w[2],re|=M&S?0:T);var Be=w[3];if(Be){var Ye=y[3];y[3]=Ye?Ky(Ye,Be,w[4]):Be,y[4]=Ye?Xo(y[3],f):w[4]}return Be=w[5],Be&&(Ye=y[5],y[5]=Ye?U0(Ye,Be,w[6]):Be,y[6]=Ye?Xo(y[5],f):w[6]),Be=w[7],Be&&(y[7]=Be),U&I&&(y[8]=y[8]==null?w[8]:Ar(y[8],w[8])),y[9]==null&&(y[9]=w[9]),y[0]=w[0],y[1]=re,y}function ll(y){var w=[];if(y!=null)for(var M in Bn(y))w.push(M);return w}function r1(y){return Ba.call(y)}function rx(y,w,M){return w=Nr(w===n?y.length-1:w,0),function(){for(var U=arguments,re=-1,ve=Nr(U.length-w,0),Pe=rt(ve);++re<ve;)Pe[re]=U[w+re];re=-1;for(var Be=rt(w+1);++re<w;)Be[re]=U[re];return Be[w]=M(Pe),Xa(y,this,Be)}}function ju(y,w){return w.length<2?y:Xi(y,Ni(w,0,-1))}function Vs(y,w){for(var M=y.length,U=Ar(w.length,M),re=ra(y);U--;){var ve=w[U];y[U]=bs(ve,M)?re[ve]:n}return y}function zp(y,w){if(!(w==="constructor"&&typeof y[w]=="function")&&w!="__proto__")return y[w]}var qp=xh(Zd),wu=wy||function(y,w){return Yr.setTimeout(y,w)},yh=xh(eh);function Up(y,w,M){var U=w+"";return yh(y,Z0(U,a1(Zy(U),M)))}function xh(y){var w=0,M=0;return function(){var U=po(),re=H-(U-M);if(M=U,re>0){if(++w>=V)return arguments[0]}else w=0;return y.apply(n,arguments)}}function vh(y,w){var M=-1,U=y.length,re=U-1;for(w=w===n?U:w;++M<w;){var ve=Sp(M,re),Pe=y[ve];y[ve]=y[M],y[M]=Pe}return y.length=w,y}var Hs=n1(function(y){var w=[];return y.charCodeAt(0)===46&&w.push(""),y.replace(Ot,function(M,U,re,ve){w.push(re?ve.replace(In,"$1"):U||M)}),w});function Xn(y){if(typeof y=="string"||Ha(y))return y;var w=y+"";return w=="0"&&1/y==-1/0?"-0":w}function No(y){if(y!=null){try{return Rd.call(y)}catch{}try{return y+""}catch{}}return""}function a1(y,w){return Vi(Ie,function(M){var U="_."+M[0];w&M[1]&&!Qf(y,U)&&y.push(U)}),y.sort()}function aa(y){if(y instanceof vn)return y.clone();var w=new ei(y.__wrapped__,y.__chain__);return w.__actions__=ra(y.__actions__),w.__index__=y.__index__,w.__values__=y.__values__,w}function o_(y,w,M){(M?Va(y,w,M):w===n)?w=1:w=Nr(dn(w),0);var U=y==null?0:y.length;if(!U||w<1)return[];for(var re=0,ve=0,Pe=rt(uu(U/w));re<U;)Pe[ve++]=Ni(y,re,re+=w);return Pe}function i1(y){for(var w=-1,M=y==null?0:y.length,U=0,re=[];++w<M;){var ve=y[w];ve&&(re[U++]=ve)}return re}function s1(){var y=arguments.length;if(!y)return[];for(var w=rt(y-1),M=arguments[0],U=y;U--;)w[U-1]=arguments[U];return ho(sn(M)?ra(M):[M],An(w,1))}var Pr=mn(function(y,w){return Vr(y)?rl(y,An(w,1,Vr,!0)):[]}),ii=mn(function(y,w){var M=Pa(w);return Vr(M)&&(M=n),Vr(y)?rl(y,An(w,1,Vr,!0),qt(M,2)):[]}),So=mn(function(y,w){var M=Pa(w);return Vr(M)&&(M=n),Vr(y)?rl(y,An(w,1,Vr,!0),n,M):[]});function o1(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:dn(w),Ni(y,w<0?0:w,U)):[]}function l1(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:dn(w),w=U-w,Ni(y,0,w<0?0:w)):[]}function l_(y,w){return y&&y.length?rh(y,qt(w,3),!0,!0):[]}function ax(y,w){return y&&y.length?rh(y,qt(w,3),!0):[]}function _i(y,w,M,U){var re=y==null?0:y.length;return re?(M&&typeof M!="number"&&Va(y,w,M)&&(M=0,U=re),yn(y,w,M,U)):[]}function Zi(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=M==null?0:dn(M);return re<0&&(re=Nr(U+re,0)),Xf(y,qt(w,3),re)}function ix(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=U-1;return M!==n&&(re=dn(M),re=M<0?Nr(U+re,0):Ar(re,U-1)),Xf(y,qt(w,3),re,!0)}function si(y){var w=y==null?0:y.length;return w?An(y,1):[]}function c1(y){var w=y==null?0:y.length;return w?An(y,G):[]}function cl(y,w){var M=y==null?0:y.length;return M?(w=w===n?1:dn(w),An(y,w)):[]}function uc(y){for(var w=-1,M=y==null?0:y.length,U={};++w<M;){var re=y[w];U[re[0]]=re[1]}return U}function _o(y){return y&&y.length?y[0]:n}function sx(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=M==null?0:dn(M);return re<0&&(re=Nr(U+re,0)),tu(y,w,re)}function ox(y){var w=y==null?0:y.length;return w?Ni(y,0,-1):[]}var Gs=mn(function(y){var w=kr(y,kp);return w.length&&w[0]===y[0]?Oy(w):[]}),u1=mn(function(y){var w=Pa(y),M=kr(y,kp);return w===Pa(M)?w=n:M.pop(),M.length&&M[0]===y[0]?Oy(M,qt(w,2)):[]}),Nu=mn(function(y){var w=Pa(y),M=kr(y,kp);return w=typeof w=="function"?w:n,w&&M.pop(),M.length&&M[0]===y[0]?Oy(M,n,w):[]});function bh(y,w){return y==null?"":Wi.call(y,w)}function Pa(y){var w=y==null?0:y.length;return w?y[w-1]:n}function Su(y,w,M){var U=y==null?0:y.length;if(!U)return-1;var re=U;return M!==n&&(re=dn(M),re=re<0?Nr(U+re,0):Ar(re,U-1)),w===w?bi(y,w,re):Xf(y,nu,re,!0)}function d1(y,w){return y&&y.length?$y(y,dn(w)):n}var h1=mn(_u);function _u(y,w){return y&&y.length&&w&&w.length?Np(y,w):y}function f1(y,w,M){return y&&y.length&&w&&w.length?Np(y,w,qt(M,2)):y}function Vp(y,w,M){return y&&y.length&&w&&w.length?Np(y,w,n,M):y}var p1=Sr(function(y,w){var M=y==null?0:y.length,U=Yd(y,w);return zy(y,kr(w,function(re){return bs(re,M)?+re:re}).sort(sh)),U});function c_(y,w){var M=[];if(!(y&&y.length))return M;var U=-1,re=[],ve=y.length;for(w=qt(w,3);++U<ve;){var Pe=y[U];w(Pe,U,y)&&(M.push(Pe),re.push(U))}return zy(y,re),M}function lx(y){return y==null?y:Sy.call(y)}function rr(y,w,M){var U=y==null?0:y.length;return U?(M&&typeof M!="number"&&Va(y,w,M)?(w=0,M=U):(w=w==null?0:dn(w),M=M===n?U:dn(M)),Ni(y,w,M)):[]}function vr(y,w){return th(y,w)}function Sn(y,w,M){return Cp(y,w,qt(M,2))}function Ln(y,w){var M=y==null?0:y.length;if(M){var U=th(y,w);if(U<M&&li(y[U],w))return U}return-1}function ar(y,w){return th(y,w,!0)}function Ci(y,w,M){return Cp(y,w,qt(M,2),!0)}function ul(y,w){var M=y==null?0:y.length;if(M){var U=th(y,w,!0)-1;if(li(y[U],w))return U}return-1}function Cu(y){return y&&y.length?Uy(y):[]}function cx(y,w){return y&&y.length?Uy(y,qt(w,2)):[]}function Co(y){var w=y==null?0:y.length;return w?Ni(y,1,w):[]}function Ur(y,w,M){return y&&y.length?(w=M||w===n?1:dn(w),Ni(y,0,w<0?0:w)):[]}function dl(y,w,M){var U=y==null?0:y.length;return U?(w=M||w===n?1:dn(w),w=U-w,Ni(y,w<0?0:w,U)):[]}function dc(y,w){return y&&y.length?rh(y,qt(w,3),!1,!0):[]}function ux(y,w){return y&&y.length?rh(y,qt(w,3)):[]}var es=mn(function(y){return xo(An(y,1,Vr,!0))}),Tu=mn(function(y){var w=Pa(y);return Vr(w)&&(w=n),xo(An(y,1,Vr,!0),qt(w,2))}),jh=mn(function(y){var w=Pa(y);return w=typeof w=="function"?w:n,xo(An(y,1,Vr,!0),n,w)});function oi(y){return y&&y.length?xo(y):[]}function dx(y,w){return y&&y.length?xo(y,qt(w,2)):[]}function hx(y,w){return w=typeof w=="function"?w:n,y&&y.length?xo(y,n,w):[]}function ku(y){if(!(y&&y.length))return[];var w=0;return y=Fs(y,function(M){if(Vr(M))return w=Nr(M.length,w),!0}),Ko(w,function(M){return kr(y,Jf(M))})}function wh(y,w){if(!(y&&y.length))return[];var M=ku(y);return w==null?M:kr(M,function(U){return Xa(w,n,U)})}var hl=mn(function(y,w){return Vr(y)?rl(y,w):[]}),ja=mn(function(y){return ah(Fs(y,Vr))}),fl=mn(function(y){var w=Pa(y);return Vr(w)&&(w=n),ah(Fs(y,Vr),qt(w,2))}),Au=mn(function(y){var w=Pa(y);return w=typeof w=="function"?w:n,ah(Fs(y,Vr),n,w)}),Eu=mn(ku);function fx(y,w){return Hy(y||[],w||[],Zl)}function px(y,w){return Hy(y||[],w||[],xu)}var m1=mn(function(y){var w=y.length,M=w>1?y[w-1]:n;return M=typeof M=="function"?(y.pop(),M):n,wh(y,M)});function Pu(y){var w=he(y);return w.__chain__=!0,w}function mx(y,w){return w(y),y}function Oa(y,w){return w(y)}var g1=Sr(function(y){var w=y.length,M=w?y[0]:0,U=this.__wrapped__,re=function(ve){return Yd(ve,y)};return w>1||this.__actions__.length||!(U instanceof vn)||!bs(M)?this.thru(re):(U=U.slice(M,+M+(w?1:0)),U.__actions__.push({func:Oa,args:[re],thisArg:n}),new ei(U,this.__chain__).thru(function(ve){return w&&!ve.length&&ve.push(n),ve}))});function Ti(){return Pu(this)}function y1(){return new ei(this.value(),this.__chain__)}function x1(){this.__values__===n&&(this.__values__=ki(this.value()));var y=this.__index__>=this.__values__.length,w=y?n:this.__values__[this.__index__++];return{done:y,value:w}}function u_(){return this}function pl(y){for(var w,M=this;M instanceof Qi;){var U=aa(M);U.__index__=0,U.__values__=n,w?re.__wrapped__=U:w=U;var re=U;M=M.__wrapped__}return re.__wrapped__=y,w}function Hp(){var y=this.__wrapped__;if(y instanceof vn){var w=y;return this.__actions__.length&&(w=new vn(this)),w=w.reverse(),w.__actions__.push({func:Oa,args:[lx],thisArg:n}),new ei(w,this.__chain__)}return this.thru(lx)}function gx(){return F0(this.__wrapped__,this.__actions__)}var Ou=ic(function(y,w,M){Kn.call(y,M)?++y[M]:ys(y,M,1)});function v1(y,w,M){var U=sn(y)?a0:Ey;return M&&Va(y,w,M)&&(w=n),U(y,qt(w,3))}function b1(y,w){var M=sn(y)?Fs:nr;return M(y,qt(w,3))}var j1=bo(Zi),yx=bo(ix);function xx(y,w){return An(Nh(y,w),1)}function d_(y,w){return An(Nh(y,w),G)}function h_(y,w,M){return M=M===n?1:dn(M),An(Nh(y,w),M)}function w1(y,w){var M=sn(y)?Vi:yo;return M(y,qt(w,3))}function vx(y,w){var M=sn(y)?VS:mp;return M(y,qt(w,3))}var N1=ic(function(y,w,M){Kn.call(y,M)?y[M].push(w):ys(y,M,[w])});function Du(y,w,M,U){y=ia(y)?y:Bu(y),M=M&&!U?dn(M):0;var re=y.length;return M<0&&(M=Nr(re+M,0)),rm(y)?M<=re&&y.indexOf(w,M)>-1:!!re&&tu(y,w,M)>-1}var Gp=mn(function(y,w,M){var U=-1,re=typeof w=="function",ve=ia(y)?rt(y.length):[];return yo(y,function(Pe){ve[++U]=re?Xa(w,Pe,M):nc(Pe,w,M)}),ve}),S1=ic(function(y,w,M){ys(y,M,w)});function Nh(y,w){var M=sn(y)?kr:Ly;return M(y,qt(w,3))}function _1(y,w,M,U){return y==null?[]:(sn(w)||(w=w==null?[]:[w]),M=U?n:M,sn(M)||(M=M==null?[]:[M]),By(y,w,M))}var C1=ic(function(y,w,M){y[M?0:1].push(w)},function(){return[[],[]]});function T1(y,w,M){var U=sn(y)?fy:gy,re=arguments.length<3;return U(y,qt(w,4),M,re,yo)}function k1(y,w,M){var U=sn(y)?HS:gy,re=arguments.length<3;return U(y,qt(w,4),M,re,mp)}function Wp(y,w){var M=sn(y)?Fs:nr;return M(y,kh(qt(w,3)))}function A1(y){var w=sn(y)?fu:yu;return w(y)}function E1(y,w,M){(M?Va(y,w,M):w===n)?w=1:w=dn(w);var U=sn(y)?C0:_p;return U(y,w)}function yr(y){var w=sn(y)?T0:R0;return w(y)}function bx(y){if(y==null)return 0;if(ia(y))return rm(y)?$s(y):y.length;var w=ha(y);return w==X||w==xe?y.size:vp(y).length}function f_(y,w,M){var U=sn(y)?py:L0;return M&&Va(y,w,M)&&(w=n),U(y,qt(w,3))}var P1=mn(function(y,w){if(y==null)return[];var M=w.length;return M>1&&Va(y,w[0],w[1])?w=[]:M>2&&Va(w[0],w[1],w[2])&&(w=[w[0]]),By(y,An(w,1),[])}),Yp=Yl||function(){return Yr.Date.now()};function p_(y,w){if(typeof w!="function")throw new ji(o);return y=dn(y),function(){if(--y<1)return w.apply(this,arguments)}}function O1(y,w,M){return w=M?n:w,w=y&&w==null?y.length:w,Us(y,I,n,n,n,n,w)}function Sh(y,w){var M;if(typeof w!="function")throw new ji(o);return y=dn(y),function(){return--y>0&&(M=w.apply(this,arguments)),y<=1&&(w=n),M}}var ml=mn(function(y,w,M){var U=S;if(M.length){var re=Xo(M,cc(ml));U|=k}return Us(y,U,w,M,re)}),Kp=mn(function(y,w,M){var U=S|_;if(M.length){var re=Xo(M,cc(Kp));U|=k}return Us(w,U,y,M,re)});function _h(y,w,M){w=M?n:w;var U=Us(y,C,n,n,n,n,n,w);return U.placeholder=_h.placeholder,U}function Qp(y,w,M){w=M?n:w;var U=Us(y,E,n,n,n,n,n,w);return U.placeholder=Qp.placeholder,U}function gl(y,w,M){var U,re,ve,Pe,Be,Ye,ft=0,mt=!1,yt=!1,Et=!0;if(typeof y!="function")throw new ji(o);w=ns(w)||0,Or(M)&&(mt=!!M.leading,yt="maxWait"in M,ve=yt?Nr(ns(M.maxWait)||0,w):ve,Et="trailing"in M?!!M.trailing:Et);function Ft(la){var Ao=U,fc=re;return U=re=n,ft=la,Pe=y.apply(fc,Ao),Pe}function Zt(la){return ft=la,Be=wu(Pn,w),mt?Ft(la):Pe}function jn(la){var Ao=la-Ye,fc=la-ft,IM=w-Ao;return yt?Ar(IM,ve-fc):IM}function en(la){var Ao=la-Ye,fc=la-ft;return Ye===n||Ao>=w||Ao<0||yt&&fc>=ve}function Pn(){var la=Yp();if(en(la))return qn(la);Be=wu(Pn,jn(la))}function qn(la){return Be=n,Et&&U?Ft(la):(U=re=n,Pe)}function Ns(){Be!==n&&B0(Be),ft=0,U=Ye=re=Be=n}function Ai(){return Be===n?Pe:qn(Yp())}function Ss(){var la=Yp(),Ao=en(la);if(U=arguments,re=this,Ye=la,Ao){if(Be===n)return Zt(Ye);if(yt)return B0(Be),Be=wu(Pn,w),Ft(Ye)}return Be===n&&(Be=wu(Pn,w)),Pe}return Ss.cancel=Ns,Ss.flush=Ai,Ss}var Ws=mn(function(y,w){return ec(y,1,w)}),Ch=mn(function(y,w,M){return ec(y,ns(w)||0,M)});function m_(y){return Us(y,B)}function Th(y,w){if(typeof y!="function"||w!=null&&typeof w!="function")throw new ji(o);var M=function(){var U=arguments,re=w?w.apply(this,U):U[0],ve=M.cache;if(ve.has(re))return ve.get(re);var Pe=y.apply(this,U);return M.cache=ve.set(re,Pe)||ve,Pe};return M.cache=new(Th.Cache||ti),M}Th.Cache=ti;function kh(y){if(typeof y!="function")throw new ji(o);return function(){var w=arguments;switch(w.length){case 0:return!y.call(this);case 1:return!y.call(this,w[0]);case 2:return!y.call(this,w[0],w[1]);case 3:return!y.call(this,w[0],w[1],w[2])}return!y.apply(this,w)}}function D1(y){return Sh(2,y)}var M1=$0(function(y,w){w=w.length==1&&sn(w[0])?kr(w[0],vi(qt())):kr(An(w,1),vi(qt()));var M=w.length;return mn(function(U){for(var re=-1,ve=Ar(U.length,M);++re<ve;)U[re]=w[re].call(this,U[re]);return Xa(y,this,U)})}),jx=mn(function(y,w){var M=Xo(w,cc(jx));return Us(y,k,n,w,M)}),Xp=mn(function(y,w){var M=Xo(w,cc(Xp));return Us(y,O,n,w,M)}),I1=Sr(function(y,w){return Us(y,F,n,n,n,w)});function R1(y,w){if(typeof y!="function")throw new ji(o);return w=w===n?w:dn(w),mn(y,w)}function g_(y,w){if(typeof y!="function")throw new ji(o);return w=w==null?0:Nr(dn(w),0),mn(function(M){var U=M[w],re=il(M,0,w);return U&&ho(re,U),Xa(y,this,re)})}function wx(y,w,M){var U=!0,re=!0;if(typeof y!="function")throw new ji(o);return Or(M)&&(U="leading"in M?!!M.leading:U,re="trailing"in M?!!M.trailing:re),gl(y,w,{leading:U,maxWait:w,trailing:re})}function Nx(y){return O1(y,1)}function y_(y,w){return jx(ih(w),y)}function x_(){if(!arguments.length)return[];var y=arguments[0];return sn(y)?y:[y]}function Ah(y){return Aa(y,x)}function v_(y,w){return w=typeof w=="function"?w:n,Aa(y,x,w)}function L1(y){return Aa(y,p|x)}function _n(y,w){return w=typeof w=="function"?w:n,Aa(y,p|x,w)}function Sx(y,w){return w==null||Ay(y,w,oa(w))}function li(y,w){return y===w||y!==y&&w!==w}var _x=lc(Kd),F1=lc(function(y,w){return y>=w}),To=gp(function(){return arguments}())?gp:function(y){return Lr(y)&&Kn.call(y,"callee")&&!Gl.call(y,"callee")},sn=rt.isArray,Jp=Kf?vi(Kf):ni;function ia(y){return y!=null&&hc(y.length)&&!js(y)}function Vr(y){return Lr(y)&&ia(y)}function b_(y){return y===!0||y===!1||Lr(y)&&En(y)==be}var yl=cp||V_,$1=Zb?vi(Zb):Qr;function B1(y){return Lr(y)&&y.nodeType===1&&!ts(y)}function Zp(y){if(y==null)return!0;if(ia(y)&&(sn(y)||typeof y=="string"||typeof y.splice=="function"||yl(y)||Mu(y)||To(y)))return!y.length;var w=ha(y);if(w==X||w==xe)return!y.size;if(gr(y))return!vp(y).length;for(var M in y)if(Kn.call(y,M))return!1;return!0}function lr(y,w){return rc(y,w)}function Cx(y,w,M){M=typeof M=="function"?M:n;var U=M?M(y,w):n;return U===n?rc(y,w,n,M):!!U}function sa(y){if(!Lr(y))return!1;var w=En(y);return w==me||w==Ae||typeof y.message=="string"&&typeof y.name=="string"&&!ts(y)}function j_(y){return typeof y=="number"&&Bd(y)}function js(y){if(!Or(y))return!1;var w=En(y);return w==ye||w==le||w==Le||w==Te}function em(y){return typeof y=="number"&&y==dn(y)}function hc(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=ie}function Or(y){var w=typeof y;return y!=null&&(w=="object"||w=="function")}function Lr(y){return y!=null&&typeof y=="object"}var tm=e0?vi(e0):yp;function Tx(y,w){return y===w||Xd(y,w,Rp(w))}function w_(y,w,M){return M=typeof M=="function"?M:n,Xd(y,w,Rp(w),M)}function z1(y){return U1(y)&&y!=+y}function N_(y){if(mh(y))throw new Jt(s);return zs(y)}function q1(y){return y===null}function S_(y){return y==null}function U1(y){return typeof y=="number"||Lr(y)&&En(y)==ae}function ts(y){if(!Lr(y)||En(y)!=ee)return!1;var w=Ld(y);if(w===null)return!0;var M=Kn.call(w,"constructor")&&w.constructor;return typeof M=="function"&&M instanceof M&&Rd.call(M)==Gi}var nm=t0?vi(t0):xp;function kx(y){return em(y)&&y>=-9007199254740991&&y<=ie}var V1=n0?vi(n0):My;function rm(y){return typeof y=="string"||!sn(y)&&Lr(y)&&En(y)==te}function Ha(y){return typeof y=="symbol"||Lr(y)&&En(y)==oe}var Mu=r0?vi(r0):Iy;function ws(y){return y===n}function Ax(y){return Lr(y)&&ha(y)==Oe}function H1(y){return Lr(y)&&En(y)==K}var G1=lc(bp),Eh=lc(function(y,w){return y<=w});function ki(y){if(!y)return[];if(ia(y))return rm(y)?Hi(y):ra(y);if(Wl&&y[Wl])return h0(y[Wl]());var w=ha(y),M=w==X?rp:w==xe?ap:Bu;return M(y)}function Ys(y){if(!y)return y===0?y:0;if(y=ns(y),y===G||y===-1/0){var w=y<0?-1:1;return w*W}return y===y?y:0}function dn(y){var w=Ys(y),M=w%1;return w===w?M?w-M:w:0}function Ks(y){return y?xs(dn(y),0,ce):0}function ns(y){if(typeof y=="number")return y;if(Ha(y))return z;if(Or(y)){var w=typeof y.valueOf=="function"?y.valueOf():y;y=Or(w)?w+"":w}if(typeof y!="string")return y===0?y:+y;y=l0(y);var M=Dt.test(y);return M||Rn.test(y)?qS(y.slice(2),M?2:8):St.test(y)?z:+y}function W1(y){return ai(y,fa(y))}function Iu(y){return y?xs(dn(y),-9007199254740991,ie):y===0?y:0}function Qn(y){return y==null?"":ri(y)}var __=sc(function(y,w){if(gr(w)||ia(w)){ai(w,oa(w),y);return}for(var M in w)Kn.call(w,M)&&Zl(y,M,w[M])}),Y1=sc(function(y,w){ai(w,fa(w),y)}),am=sc(function(y,w,M,U){ai(w,fa(w),y,U)}),C_=sc(function(y,w,M,U){ai(w,oa(w),y,U)}),T_=Sr(Yd);function k_(y,w){var M=wi(y);return w==null?M:go(M,w)}var A_=mn(function(y,w){y=Bn(y);var M=-1,U=w.length,re=U>2?w[2]:n;for(re&&Va(w[0],w[1],re)&&(U=1);++M<U;)for(var ve=w[M],Pe=fa(ve),Be=-1,Ye=Pe.length;++Be<Ye;){var ft=Pe[Be],mt=y[ft];(mt===n||li(mt,ou[ft])&&!Kn.call(y,ft))&&(y[ft]=ve[ft])}return y}),K1=mn(function(y){return y.push(n,Jy),Xa(Mh,n,y)});function Ru(y,w){return i0(y,qt(w,3),Ea)}function Ph(y,w){return i0(y,qt(w,3),gu)}function Q1(y,w){return y==null?y:mu(y,qt(w,3),fa)}function E_(y,w){return y==null?y:tc(y,qt(w,3),fa)}function Lu(y,w){return y&&Ea(y,qt(w,3))}function Oh(y,w){return y&&gu(y,qt(w,3))}function X1(y){return y==null?[]:al(y,oa(y))}function im(y){return y==null?[]:al(y,fa(y))}function Dh(y,w,M){var U=y==null?n:Xi(y,w);return U===n?M:U}function Ex(y,w){return y!=null&&ph(y,w,Py)}function Fu(y,w){return y!=null&&ph(y,w,E0)}var J1=lh(function(y,w,M){w!=null&&typeof w.toString!="function"&&(w=Ba.call(w)),y[w]=M},Ze(et)),Z1=lh(function(y,w,M){w!=null&&typeof w.toString!="function"&&(w=Ba.call(w)),Kn.call(y,w)?y[w].push(M):y[w]=[M]},qt),P_=mn(nc);function oa(y){return ia(y)?ky(y):vp(y)}function fa(y){return ia(y)?ky(y,!0):O0(y)}function O_(y,w){var M={};return w=qt(w,3),Ea(y,function(U,re,ve){ys(M,w(U,re,ve),U)}),M}function D_(y,w){var M={};return w=qt(w,3),Ea(y,function(U,re,ve){ys(M,re,w(U,re,ve))}),M}var M_=sc(function(y,w,M){Jd(y,w,M)}),Mh=sc(function(y,w,M,U){Jd(y,w,M,U)}),sm=Sr(function(y,w){var M={};if(y==null)return M;var U=!1;w=kr(w,function(ve){return ve=vo(ve,y),U||(U=ve.length>1),ve}),ai(y,Mp(y),M),U&&(M=Aa(M,p|g|x,Y0));for(var re=w.length;re--;)nh(M,w[re]);return M});function Px(y,w){return $u(y,kh(qt(w)))}var I_=Sr(function(y,w){return y==null?{}:D0(y,w)});function $u(y,w){if(y==null)return{};var M=kr(Mp(y),function(U){return[U]});return w=qt(w),wp(y,M,function(U,re){return w(U,re[0])})}function R_(y,w,M){w=vo(w,y);var U=-1,re=w.length;for(re||(re=1,y=n);++U<re;){var ve=y==null?n:y[Xn(w[U])];ve===n&&(U=re,ve=M),y=js(ve)?ve.call(y):ve}return y}function ej(y,w,M){return y==null?y:xu(y,w,M)}function tj(y,w,M,U){return U=typeof U=="function"?U:n,y==null?y:xu(y,w,M,U)}var Ox=dh(oa),Dx=dh(fa);function Mx(y,w,M){var U=sn(y),re=U||yl(y)||Mu(y);if(w=qt(w,4),M==null){var ve=y&&y.constructor;re?M=U?new ve:[]:Or(y)?M=js(ve)?wi(Ld(y)):{}:M={}}return(re?Vi:Ea)(y,function(Pe,Be,Ye){return w(M,Pe,Be,Ye)}),M}function nj(y,w){return y==null?!0:nh(y,w)}function om(y,w,M){return y==null?y:Vy(y,w,ih(M))}function L_(y,w,M,U){return U=typeof U=="function"?U:n,y==null?y:Vy(y,w,ih(M),U)}function Bu(y){return y==null?[]:tp(y,oa(y))}function Ix(y){return y==null?[]:tp(y,fa(y))}function Rx(y,w,M){return M===n&&(M=w,w=n),M!==n&&(M=ns(M),M=M===M?M:0),w!==n&&(w=ns(w),w=w===w?w:0),xs(ns(y),w,M)}function lm(y,w,M){return w=Ys(w),M===n?(M=w,w=0):M=Ys(M),y=ns(y),P0(y,w,M)}function Lx(y,w,M){if(M&&typeof M!="boolean"&&Va(y,w,M)&&(w=M=n),M===n&&(typeof w=="boolean"?(M=w,w=n):typeof y=="boolean"&&(M=y,y=n)),y===n&&w===n?(y=0,w=1):(y=Ys(y),w===n?(w=y,y=0):w=Ys(w)),y>w){var U=y;y=w,w=U}if(M||y%1||w%1){var re=Ny();return Ar(y+re*(w-y+Md("1e-"+((re+"").length-1))),w)}return Sp(y,w)}var rj=Ua(function(y,w,M){return w=w.toLowerCase(),y+(M?cm(w):w)});function cm(y){return N(Qn(y).toLowerCase())}function ko(y){return y=Qn(y),y&&y.replace(yi,np).replace(uo,"")}function xl(y,w,M){y=Qn(y),w=ri(w);var U=y.length;M=M===n?U:xs(dn(M),0,U);var re=M;return M-=w.length,M>=0&&y.slice(M,re)==w}function vl(y){return y=Qn(y),y&&Tt.test(y)?y.replace(ke,c0):y}function Ih(y){return y=Qn(y),y&&ln.test(y)?y.replace(Vt,"\\$&"):y}var Rh=Ua(function(y,w,M){return y+(M?"-":"")+w.toLowerCase()}),bl=Ua(function(y,w,M){return y+(M?" ":"")+w.toLowerCase()}),F_=Si("toLowerCase");function aj(y,w,M){y=Qn(y),w=dn(w);var U=w?$s(y):0;if(!w||U>=w)return y;var re=(w-U)/2;return uh(fo(re),M)+y+uh(uu(re),M)}function Lh(y,w,M){y=Qn(y),w=dn(w);var U=w?$s(y):0;return w&&U<w?y+uh(w-U,M):y}function $_(y,w,M){y=Qn(y),w=dn(w);var U=w?$s(y):0;return w&&U<w?uh(w-U,M)+y:y}function ij(y,w,M){return M||w==null?w=0:w&&(w=+w),Kl(Qn(y).replace(er,""),w||0)}function um(y,w,M){return(M?Va(y,w,M):w===n)?w=1:w=dn(w),qy(Qn(y),w)}function sj(){var y=arguments,w=Qn(y[0]);return y.length<3?w:w.replace(y[1],y[2])}var B_=Ua(function(y,w,M){return y+(M?"_":"")+w.toLowerCase()});function dm(y,w,M){return M&&typeof M!="number"&&Va(y,w,M)&&(w=M=n),M=M===n?ce:M>>>0,M?(y=Qn(y),y&&(typeof w=="string"||w!=null&&!nm(w))&&(w=ri(w),!w&&Qo(y))?il(Hi(y),0,M):y.split(w,M)):[]}var hm=Ua(function(y,w,M){return y+(M?" ":"")+N(w)});function oj(y,w,M){return y=Qn(y),M=M==null?0:xs(dn(M),0,y.length),w=ri(w),y.slice(M,M+w.length)==w}function Fh(y,w,M){var U=he.templateSettings;M&&Va(y,w,M)&&(w=n),y=Qn(y),w=am({},w,U,Op);var re=am({},w.imports,U.imports,Op),ve=oa(re),Pe=tp(re,ve),Be,Ye,ft=0,mt=w.interpolate||co,yt="__p += '",Et=ip((w.escape||co).source+"|"+mt.source+"|"+(mt===kt?tt:co).source+"|"+(w.evaluate||co).source+"|$","g"),Ft="//# sourceURL="+(Kn.call(w,"sourceURL")?(w.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qb+"]")+`
`;y.replace(Et,function(en,Pn,qn,Ns,Ai,Ss){return qn||(qn=Ns),yt+=y.slice(ft,Ss).replace(Td,u0),Pn&&(Be=!0,yt+=`' +
__e(`+Pn+`) +
'`),Ai&&(Ye=!0,yt+=`';
`+Ai+`;
__p += '`),qn&&(yt+=`' +
((__t = (`+qn+`)) == null ? '' : __t) +
'`),ft=Ss+en.length,en}),yt+=`';
`;var Zt=Kn.call(w,"variable")&&w.variable;if(!Zt)yt=`with (obj) {
`+yt+`
}
`;else if(zi.test(Zt))throw new Jt(l);yt=(Ye?yt.replace(Je,""):yt).replace(ct,"$1").replace(Ct,"$1;"),yt="function("+(Zt||"obj")+`) {
`+(Zt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Be?", __e = _.escape":"")+(Ye?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+yt+`return __p
}`;var jn=R(function(){return $n(ve,Ft+"return "+yt).apply(n,Pe)});if(jn.source=yt,sa(jn))throw jn;return jn}function Fx(y){return Qn(y).toLowerCase()}function fm(y){return Qn(y).toUpperCase()}function lj(y,w,M){if(y=Qn(y),y&&(M||w===n))return l0(y);if(!y||!(w=ri(w)))return y;var U=Hi(y),re=Hi(w),ve=au(U,re),Pe=iu(U,re)+1;return il(U,ve,Pe).join("")}function z_(y,w,M){if(y=Qn(y),y&&(M||w===n))return y.slice(0,xy(y)+1);if(!y||!(w=ri(w)))return y;var U=Hi(y),re=iu(U,Hi(w))+1;return il(U,0,re).join("")}function pm(y,w,M){if(y=Qn(y),y&&(M||w===n))return y.replace(er,"");if(!y||!(w=ri(w)))return y;var U=Hi(y),re=au(U,Hi(w));return il(U,re).join("")}function u(y,w){var M=$,U=L;if(Or(w)){var re="separator"in w?w.separator:re;M="length"in w?dn(w.length):M,U="omission"in w?ri(w.omission):U}y=Qn(y);var ve=y.length;if(Qo(y)){var Pe=Hi(y);ve=Pe.length}if(M>=ve)return y;var Be=M-$s(U);if(Be<1)return U;var Ye=Pe?il(Pe,0,Be).join(""):y.slice(0,Be);if(re===n)return Ye+U;if(Pe&&(Be+=Ye.length-Be),nm(re)){if(y.slice(Be).search(re)){var ft,mt=Ye;for(re.global||(re=ip(re.source,Qn(gt.exec(re))+"g")),re.lastIndex=0;ft=re.exec(mt);)var yt=ft.index;Ye=Ye.slice(0,yt===n?Be:yt)}}else if(y.indexOf(ri(re),Be)!=Be){var Et=Ye.lastIndexOf(re);Et>-1&&(Ye=Ye.slice(0,Et))}return Ye+U}function h(y){return y=Qn(y),y&&ot.test(y)?y.replace(bt,p0):y}var m=Ua(function(y,w,M){return y+(M?" ":"")+w.toUpperCase()}),N=Si("toUpperCase");function A(y,w,M){return y=Qn(y),w=M?n:w,w===n?d0(y)?ZS(y):YS(y):y.match(w)||[]}var R=mn(function(y,w){try{return Xa(y,n,w)}catch(M){return sa(M)?M:new Jt(M)}}),J=Sr(function(y,w){return Vi(w,function(M){M=Xn(M),ys(y,M,ml(y[M],y))}),y});function pe(y){var w=y==null?0:y.length,M=qt();return y=w?kr(y,function(U){if(typeof U[1]!="function")throw new ji(o);return[M(U[0]),U[1]]}):[],mn(function(U){for(var re=-1;++re<w;){var ve=y[re];if(Xa(ve[0],this,U))return Xa(ve[1],this,U)}})}function De(y){return k0(Aa(y,p))}function Ze(y){return function(){return y}}function ut(y,w){return y==null||y!==y?w:y}var pt=qs(),nt=qs(!0);function et(y){return y}function Yt(y){return Ry(typeof y=="function"?y:Aa(y,p))}function Wt(y){return Fy(Aa(y,p))}function cr(y,w){return jp(y,Aa(w,p))}var Ge=mn(function(y,w){return function(M){return nc(M,y,w)}}),qe=mn(function(y,w){return function(M){return nc(y,M,w)}});function Qe(y,w,M){var U=oa(w),re=al(w,U);M==null&&!(Or(w)&&(re.length||!U.length))&&(M=w,w=y,y=this,re=al(w,oa(w)));var ve=!(Or(M)&&"chain"in M)||!!M.chain,Pe=js(y);return Vi(re,function(Be){var Ye=w[Be];y[Be]=Ye,Pe&&(y.prototype[Be]=function(){var ft=this.__chain__;if(ve||ft){var mt=y(this.__wrapped__),yt=mt.__actions__=ra(this.__actions__);return yt.push({func:Ye,args:arguments,thisArg:y}),mt.__chain__=ft,mt}return Ye.apply(y,ho([this.value()],arguments))})}),y}function ht(){return Yr._===this&&(Yr._=lu),this}function Mt(){}function bn(y){return y=dn(y),mn(function(w){return $y(w,y)})}var Bt=ch(kr),Kt=ch(a0),pa=ch(py);function zn(y){return Fp(y)?Jf(Xn(y)):M0(y)}function jl(y){return function(w){return y==null?n:Xi(y,w)}}var q_=sl(),SG=sl(!0);function U_(){return[]}function V_(){return!1}function _G(){return{}}function CG(){return""}function TG(){return!0}function kG(y,w){if(y=dn(y),y<1||y>ie)return[];var M=ce,U=Ar(y,ce);w=qt(w),y-=ce;for(var re=Ko(U,w);++M<y;)w(M);return re}function AG(y){return sn(y)?kr(y,Xn):Ha(y)?[y]:ra(Hs(Qn(y)))}function EG(y){var w=++ps;return Qn(y)+w}var PG=vu(function(y,w){return y+w},0),OG=Pp("ceil"),DG=vu(function(y,w){return y/w},1),MG=Pp("floor");function IG(y){return y&&y.length?vs(y,et,Kd):n}function RG(y,w){return y&&y.length?vs(y,qt(w,2),Kd):n}function LG(y){return s0(y,et)}function FG(y,w){return s0(y,qt(w,2))}function $G(y){return y&&y.length?vs(y,et,bp):n}function BG(y,w){return y&&y.length?vs(y,qt(w,2),bp):n}var zG=vu(function(y,w){return y*w},1),qG=Pp("round"),UG=vu(function(y,w){return y-w},0);function VG(y){return y&&y.length?ep(y,et):0}function HG(y,w){return y&&y.length?ep(y,qt(w,2)):0}return he.after=p_,he.ary=O1,he.assign=__,he.assignIn=Y1,he.assignInWith=am,he.assignWith=C_,he.at=T_,he.before=Sh,he.bind=ml,he.bindAll=J,he.bindKey=Kp,he.castArray=x_,he.chain=Pu,he.chunk=o_,he.compact=i1,he.concat=s1,he.cond=pe,he.conforms=De,he.constant=Ze,he.countBy=Ou,he.create=k_,he.curry=_h,he.curryRight=Qp,he.debounce=gl,he.defaults=A_,he.defaultsDeep=K1,he.defer=Ws,he.delay=Ch,he.difference=Pr,he.differenceBy=ii,he.differenceWith=So,he.drop=o1,he.dropRight=l1,he.dropRightWhile=l_,he.dropWhile=ax,he.fill=_i,he.filter=b1,he.flatMap=xx,he.flatMapDeep=d_,he.flatMapDepth=h_,he.flatten=si,he.flattenDeep=c1,he.flattenDepth=cl,he.flip=m_,he.flow=pt,he.flowRight=nt,he.fromPairs=uc,he.functions=X1,he.functionsIn=im,he.groupBy=N1,he.initial=ox,he.intersection=Gs,he.intersectionBy=u1,he.intersectionWith=Nu,he.invert=J1,he.invertBy=Z1,he.invokeMap=Gp,he.iteratee=Yt,he.keyBy=S1,he.keys=oa,he.keysIn=fa,he.map=Nh,he.mapKeys=O_,he.mapValues=D_,he.matches=Wt,he.matchesProperty=cr,he.memoize=Th,he.merge=M_,he.mergeWith=Mh,he.method=Ge,he.methodOf=qe,he.mixin=Qe,he.negate=kh,he.nthArg=bn,he.omit=sm,he.omitBy=Px,he.once=D1,he.orderBy=_1,he.over=Bt,he.overArgs=M1,he.overEvery=Kt,he.overSome=pa,he.partial=jx,he.partialRight=Xp,he.partition=C1,he.pick=I_,he.pickBy=$u,he.property=zn,he.propertyOf=jl,he.pull=h1,he.pullAll=_u,he.pullAllBy=f1,he.pullAllWith=Vp,he.pullAt=p1,he.range=q_,he.rangeRight=SG,he.rearg=I1,he.reject=Wp,he.remove=c_,he.rest=R1,he.reverse=lx,he.sampleSize=E1,he.set=ej,he.setWith=tj,he.shuffle=yr,he.slice=rr,he.sortBy=P1,he.sortedUniq=Cu,he.sortedUniqBy=cx,he.split=dm,he.spread=g_,he.tail=Co,he.take=Ur,he.takeRight=dl,he.takeRightWhile=dc,he.takeWhile=ux,he.tap=mx,he.throttle=wx,he.thru=Oa,he.toArray=ki,he.toPairs=Ox,he.toPairsIn=Dx,he.toPath=AG,he.toPlainObject=W1,he.transform=Mx,he.unary=Nx,he.union=es,he.unionBy=Tu,he.unionWith=jh,he.uniq=oi,he.uniqBy=dx,he.uniqWith=hx,he.unset=nj,he.unzip=ku,he.unzipWith=wh,he.update=om,he.updateWith=L_,he.values=Bu,he.valuesIn=Ix,he.without=hl,he.words=A,he.wrap=y_,he.xor=ja,he.xorBy=fl,he.xorWith=Au,he.zip=Eu,he.zipObject=fx,he.zipObjectDeep=px,he.zipWith=m1,he.entries=Ox,he.entriesIn=Dx,he.extend=Y1,he.extendWith=am,Qe(he,he),he.add=PG,he.attempt=R,he.camelCase=rj,he.capitalize=cm,he.ceil=OG,he.clamp=Rx,he.clone=Ah,he.cloneDeep=L1,he.cloneDeepWith=_n,he.cloneWith=v_,he.conformsTo=Sx,he.deburr=ko,he.defaultTo=ut,he.divide=DG,he.endsWith=xl,he.eq=li,he.escape=vl,he.escapeRegExp=Ih,he.every=v1,he.find=j1,he.findIndex=Zi,he.findKey=Ru,he.findLast=yx,he.findLastIndex=ix,he.findLastKey=Ph,he.floor=MG,he.forEach=w1,he.forEachRight=vx,he.forIn=Q1,he.forInRight=E_,he.forOwn=Lu,he.forOwnRight=Oh,he.get=Dh,he.gt=_x,he.gte=F1,he.has=Ex,he.hasIn=Fu,he.head=_o,he.identity=et,he.includes=Du,he.indexOf=sx,he.inRange=lm,he.invoke=P_,he.isArguments=To,he.isArray=sn,he.isArrayBuffer=Jp,he.isArrayLike=ia,he.isArrayLikeObject=Vr,he.isBoolean=b_,he.isBuffer=yl,he.isDate=$1,he.isElement=B1,he.isEmpty=Zp,he.isEqual=lr,he.isEqualWith=Cx,he.isError=sa,he.isFinite=j_,he.isFunction=js,he.isInteger=em,he.isLength=hc,he.isMap=tm,he.isMatch=Tx,he.isMatchWith=w_,he.isNaN=z1,he.isNative=N_,he.isNil=S_,he.isNull=q1,he.isNumber=U1,he.isObject=Or,he.isObjectLike=Lr,he.isPlainObject=ts,he.isRegExp=nm,he.isSafeInteger=kx,he.isSet=V1,he.isString=rm,he.isSymbol=Ha,he.isTypedArray=Mu,he.isUndefined=ws,he.isWeakMap=Ax,he.isWeakSet=H1,he.join=bh,he.kebabCase=Rh,he.last=Pa,he.lastIndexOf=Su,he.lowerCase=bl,he.lowerFirst=F_,he.lt=G1,he.lte=Eh,he.max=IG,he.maxBy=RG,he.mean=LG,he.meanBy=FG,he.min=$G,he.minBy=BG,he.stubArray=U_,he.stubFalse=V_,he.stubObject=_G,he.stubString=CG,he.stubTrue=TG,he.multiply=zG,he.nth=d1,he.noConflict=ht,he.noop=Mt,he.now=Yp,he.pad=aj,he.padEnd=Lh,he.padStart=$_,he.parseInt=ij,he.random=Lx,he.reduce=T1,he.reduceRight=k1,he.repeat=um,he.replace=sj,he.result=R_,he.round=qG,he.runInContext=He,he.sample=A1,he.size=bx,he.snakeCase=B_,he.some=f_,he.sortedIndex=vr,he.sortedIndexBy=Sn,he.sortedIndexOf=Ln,he.sortedLastIndex=ar,he.sortedLastIndexBy=Ci,he.sortedLastIndexOf=ul,he.startCase=hm,he.startsWith=oj,he.subtract=UG,he.sum=VG,he.sumBy=HG,he.template=Fh,he.times=kG,he.toFinite=Ys,he.toInteger=dn,he.toLength=Ks,he.toLower=Fx,he.toNumber=ns,he.toSafeInteger=Iu,he.toString=Qn,he.toUpper=fm,he.trim=lj,he.trimEnd=z_,he.trimStart=pm,he.truncate=u,he.unescape=h,he.uniqueId=EG,he.upperCase=m,he.upperFirst=N,he.each=w1,he.eachRight=vx,he.first=_o,Qe(he,function(){var y={};return Ea(he,function(w,M){Kn.call(he.prototype,M)||(y[M]=w)}),y}(),{chain:!1}),he.VERSION=a,Vi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){he[y].placeholder=he}),Vi(["drop","take"],function(y,w){vn.prototype[y]=function(M){M=M===n?1:Nr(dn(M),0);var U=this.__filtered__&&!w?new vn(this):this.clone();return U.__filtered__?U.__takeCount__=Ar(M,U.__takeCount__):U.__views__.push({size:Ar(M,ce),type:y+(U.__dir__<0?"Right":"")}),U},vn.prototype[y+"Right"]=function(M){return this.reverse()[y](M).reverse()}}),Vi(["filter","map","takeWhile"],function(y,w){var M=w+1,U=M==ne||M==q;vn.prototype[y]=function(re){var ve=this.clone();return ve.__iteratees__.push({iteratee:qt(re,3),type:M}),ve.__filtered__=ve.__filtered__||U,ve}}),Vi(["head","last"],function(y,w){var M="take"+(w?"Right":"");vn.prototype[y]=function(){return this[M](1).value()[0]}}),Vi(["initial","tail"],function(y,w){var M="drop"+(w?"":"Right");vn.prototype[y]=function(){return this.__filtered__?new vn(this):this[M](1)}}),vn.prototype.compact=function(){return this.filter(et)},vn.prototype.find=function(y){return this.filter(y).head()},vn.prototype.findLast=function(y){return this.reverse().find(y)},vn.prototype.invokeMap=mn(function(y,w){return typeof y=="function"?new vn(this):this.map(function(M){return nc(M,y,w)})}),vn.prototype.reject=function(y){return this.filter(kh(qt(y)))},vn.prototype.slice=function(y,w){y=dn(y);var M=this;return M.__filtered__&&(y>0||w<0)?new vn(M):(y<0?M=M.takeRight(-y):y&&(M=M.drop(y)),w!==n&&(w=dn(w),M=w<0?M.dropRight(-w):M.take(w-y)),M)},vn.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},vn.prototype.toArray=function(){return this.take(ce)},Ea(vn.prototype,function(y,w){var M=/^(?:filter|find|map|reject)|While$/.test(w),U=/^(?:head|last)$/.test(w),re=he[U?"take"+(w=="last"?"Right":""):w],ve=U||/^find/.test(w);re&&(he.prototype[w]=function(){var Pe=this.__wrapped__,Be=U?[1]:arguments,Ye=Pe instanceof vn,ft=Be[0],mt=Ye||sn(Pe),yt=function(Pn){var qn=re.apply(he,ho([Pn],Be));return U&&Et?qn[0]:qn};mt&&M&&typeof ft=="function"&&ft.length!=1&&(Ye=mt=!1);var Et=this.__chain__,Ft=!!this.__actions__.length,Zt=ve&&!Et,jn=Ye&&!Ft;if(!ve&&mt){Pe=jn?Pe:new vn(this);var en=y.apply(Pe,Be);return en.__actions__.push({func:Oa,args:[yt],thisArg:n}),new ei(en,Et)}return Zt&&jn?y.apply(this,Be):(en=this.thru(yt),Zt?U?en.value()[0]:en.value():en)})}),Vi(["pop","push","shift","sort","splice","unshift"],function(y){var w=sp[y],M=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",U=/^(?:pop|shift)$/.test(y);he.prototype[y]=function(){var re=arguments;if(U&&!this.__chain__){var ve=this.value();return w.apply(sn(ve)?ve:[],re)}return this[M](function(Pe){return w.apply(sn(Pe)?Pe:[],re)})}}),Ea(vn.prototype,function(y,w){var M=he[w];if(M){var U=M.name+"";Kn.call(Ki,U)||(Ki[U]=[]),Ki[U].push({name:w,func:M})}}),Ki[qr(n,_).name]=[{name:"wrapper",func:n}],vn.prototype.clone=Vd,vn.prototype.reverse=up,vn.prototype.value=Xl,he.prototype.at=g1,he.prototype.chain=Ti,he.prototype.commit=y1,he.prototype.next=x1,he.prototype.plant=pl,he.prototype.reverse=Hp,he.prototype.toJSON=he.prototype.valueOf=he.prototype.value=gx,he.prototype.first=he.prototype.head,Wl&&(he.prototype[Wl]=u_),he},Jo=su();Yo?((Yo.exports=Jo)._=Jo,eu._=Jo):Yr._=Jo}).call(Rme)}(hv,hv.exports)),hv.exports}var f9=Lme();class Fme{constructor(e){br(this,"sampleRate",24e3);br(this,"bufferSize",7680);br(this,"audioQueue",[]);br(this,"isPlaying",!1);br(this,"isStreamComplete",!1);br(this,"checkInterval",null);br(this,"scheduledTime",0);br(this,"initialBufferTime",.1);br(this,"gainNode");br(this,"source");br(this,"endOfQueueAudioSource",null);br(this,"onComplete",()=>{});this.context=e,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(e,n,a){let i=Cj.get(this.context);if(i&&i[e])return i[e].handlers.push(a),Promise.resolve(this);i||(Cj.set(this.context,{}),i=Cj.get(this.context)),i[e]={handlers:[a]};const s=ZE(e,n);await this.context.audioWorklet.addModule(s);const o=new AudioWorkletNode(this.context,e);return i[e].node=o,this}_processPCM16Chunk(e){const n=new Float32Array(e.length/2),a=new DataView(e.buffer);for(let i=0;i<e.length/2;i++)try{const s=a.getInt16(i*2,!0);n[i]=s/32768}catch(s){console.error(s)}return n}addPCM16(e){this.isStreamComplete=!1;let n=this._processPCM16Chunk(e);for(;n.length>=this.bufferSize;){const a=n.slice(0,this.bufferSize);this.audioQueue.push(a),n=n.slice(this.bufferSize)}n.length>0&&this.audioQueue.push(n),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){const n=this.context.createBuffer(1,e.length,this.sampleRate);return n.getChannelData(0).set(e),n}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const n=this.audioQueue.shift(),a=this.createAudioBuffer(n),i=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=i,i.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===i&&(this.endOfQueueAudioSource=null,this.onComplete())}),i.buffer=a,i.connect(this.gainNode);const s=Cj.get(this.context);s&&Object.entries(s).forEach(([,l])=>{const{node:c,handlers:d}=l;c&&(i.connect(c),c.port.onmessage=function(f){d.forEach(p=>{p.call(c.port,f)})},c.connect(this.context.destination))});const o=Math.max(this.scheduledTime,this.context.currentTime);i.start(o),this.scheduledTime=o+a.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const n=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,n-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function $me(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"screen",start:async()=>{const l=await navigator.mediaDevices.getDisplayMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}function Bme(){const[t,e]=v.useState(null),[n,a]=v.useState(!1);return v.useEffect(()=>{const l=()=>{a(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"webcam",start:async()=>{const l=await navigator.mediaDevices.getUserMedia({video:!0});return e(l),a(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),a(!1))},isStreaming:n,stream:t}}class zme extends d9{constructor(n){super();br(this,"client");br(this,"_status","disconnected");br(this,"_session",null);br(this,"_model",null);br(this,"config",null);this.client=new xU(n),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(n,a){const i={date:new Date,type:n,message:a};this.emit("log",i)}async connect(n,a){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=a,this._model=n;const i={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:n,config:a,callbacks:i})}catch(s){return console.error("Error connecting to GenAI Live:",s),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var n;return this.session?((n=this.session)==null||n.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(n){this.log("server.error",n.message),this.emit("error",n)}onclose(n){this.log("server.close",`disconnected ${n.reason?`with reason: ${n.reason}`:""}`),this.emit("close",n)}async onmessage(n){var a;if(n.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(n.toolCall){this.log("server.toolCall",n),this.emit("toolcall",n.toolCall);return}if(n.toolCallCancellation){this.log("server.toolCallCancellation",n),this.emit("toolcallcancellation",n.toolCallCancellation);return}if(n.serverContent){const{serverContent:i}=n;if("interrupted"in i){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in i&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in i){let s=((a=i.modelTurn)==null?void 0:a.parts)||[];const o=s.filter(f=>{var p;return f.inlineData&&((p=f.inlineData.mimeType)==null?void 0:p.startsWith("audio/pcm"))}),l=o.map(f=>{var p;return(p=f.inlineData)==null?void 0:p.data}),c=f9.difference(s,o);if(l.forEach(f=>{if(f){const p=Ame(f);this.emit("audio",p),this.log("server.audio",`buffer (${p.byteLength})`)}}),!c.length)return;s=c;const d={modelTurn:{parts:s}};this.emit("content",d),this.log("server.content",n)}}else console.log("received unmatched message",n)}sendRealtimeInput(n){var o;let a=!1,i=!1;for(const l of n)if((o=this.session)==null||o.sendRealtimeInput({media:l}),l.mimeType.includes("audio")&&(a=!0),l.mimeType.includes("image")&&(i=!0),a&&i)break;const s=a&&i?"audio + video":a?"audio":i?"video":"unknown";this.log("client.realtimeInput",s)}sendToolResponse(n){var a;n.functionResponses&&n.functionResponses.length&&((a=this.session)==null||a.sendToolResponse({functionResponses:n.functionResponses}),this.log("client.toolResponse",n))}send(n,a=!0){var i;(i=this.session)==null||i.sendClientContent({turns:n,turnComplete:a}),this.log("client.send",{turns:Array.isArray(n)?n:[n],turnComplete:a})}}function qme(t){const e=v.useMemo(()=>new zme(t),[t]),n=v.useRef(null),[a,i]=v.useState("models/gemini-2.5-flash-live-preview"),[s,o]=v.useState({}),[l,c]=v.useState(!1),[d,f]=v.useState(0),[p,g]=v.useState(null);v.useEffect(()=>{n.current||c9({id:"audio-out"}).then(j=>{n.current=new Fme(j),n.current.addWorklet("vumeter-out",u9,S=>{f(S.data.volume)}).then(()=>{})})},[n]),v.useEffect(()=>{const j=()=>{c(!0)},S=()=>{c(!1)},_=k=>{console.error("error",k)},T=()=>{var k;return(k=n.current)==null?void 0:k.stop()},C=k=>{var O;return(O=n.current)==null?void 0:O.addPCM16(new Uint8Array(k))},E=k=>{if(console.log("Received content event:",k),k.modelTurn&&k.modelTurn.parts){const O=k.modelTurn.parts.filter(I=>"text"in I&&I.text);if(O.length>0){const I=O.map(F=>F.text).join(" ");g(I),console.log("AI Summary received:",I)}}};return e.on("error",_).on("open",j).on("close",S).on("interrupted",T).on("audio",C).on("content",E),()=>{e.off("error",_).off("open",j).off("close",S).off("interrupted",T).off("audio",C).off("content",E).disconnect()}},[e]);const x=v.useCallback(async()=>{if(!s)throw new Error("config has not been set");e.disconnect(),await e.connect(a,s)},[e,s,a]),b=v.useCallback(async()=>{e.disconnect(),c(!1)},[c,e]);return{client:e,config:s,setConfig:o,model:a,setModel:i,connected:l,connect:x,disconnect:b,volume:d,aiSummary:p}}const p9=v.createContext(void 0),tS=({options:t,children:e})=>{const n=qme(t);return r.jsx(p9.Provider,{value:n,children:e})},vd=()=>{const t=v.useContext(p9);if(!t)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return t};function Ume(){const{config:t,setConfig:e}=vd(),[n,a]=v.useState({value:"audio",label:"audio"}),i=v.useCallback(s=>{e({...t,responseModalities:[s==="audio"?hd.AUDIO:hd.TEXT]})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),r.jsx(l9,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:n,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:s=>{a(s),s&&(s.value==="audio"||s.value==="text")&&i(s.value)}})]})}const s3=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function Vme(){const{config:t,setConfig:e}=vd();v.useEffect(()=>{var l,c,d;const s=((d=(c=(l=t.speechConfig)==null?void 0:l.voiceConfig)==null?void 0:c.prebuiltVoiceConfig)==null?void 0:d.voiceName)||"Atari02";a({value:s,label:s})},[t]);const[n,a]=v.useState(s3[5]),i=v.useCallback(s=>{e({...t,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}}})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),r.jsx(l9,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:n,defaultValue:n,options:s3,onChange:s=>{a(s),s&&i(s.value)}})]})}function Hme(){const[t,e]=v.useState(!1),{config:n,setConfig:a,connected:i}=vd(),s=v.useMemo(()=>Array.isArray(n.tools)?n.tools.filter(d=>Array.isArray(d.functionDeclarations)).map(d=>d.functionDeclarations).filter(d=>!!d).flat():[],[n]),o=v.useMemo(()=>{var d;return n.systemInstruction?typeof n.systemInstruction=="string"?n.systemInstruction:Array.isArray(n.systemInstruction)?n.systemInstruction.map(f=>typeof f=="string"?f:f.text).join(`
`):typeof n.systemInstruction=="object"&&"parts"in n.systemInstruction&&((d=n.systemInstruction.parts)==null?void 0:d.map(f=>f.text).join(`
`))||"":""},[n]),l=v.useCallback(d=>{const f={...n,systemInstruction:d.target.value};a(f)},[n,a]),c=v.useCallback((d,f)=>{var g;const p={...n,tools:((g=n.tools)==null?void 0:g.map(x=>{const b=x;return Array.isArray(b.functionDeclarations)?{...x,functionDeclarations:b.functionDeclarations.map(j=>j.name===d?{...j,description:f}:j)}:x}))||[]};a(p)},[n,a]);return r.jsxs("div",{className:"settings-dialog",children:[r.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>e(!t),children:"settings"}),r.jsx("dialog",{className:"dialog",style:{display:t?"block":"none"},children:r.jsxs("div",{className:`dialog-container ${i?"disabled":""}`,children:[i&&r.jsx("div",{className:"connected-indicator",children:r.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),r.jsxs("div",{className:"mode-selectors",children:[r.jsx(Ume,{}),r.jsx(Vme,{})]}),r.jsx("h3",{children:"System Instructions"}),r.jsx("textarea",{className:"system",onChange:l,value:o}),r.jsx("h4",{children:"Function declarations"}),r.jsx("div",{className:"function-declarations",children:r.jsx("div",{className:"fd-rows",children:s.map((d,f)=>{var p;return r.jsxs("div",{className:"fd-row",children:[r.jsx("span",{className:"fd-row-name",children:d.name}),r.jsx("span",{className:"fd-row-args",children:Object.keys(((p=d.parameters)==null?void 0:p.properties)||{}).map((g,x)=>r.jsx("span",{children:g},x))}),r.jsx("input",{className:"fd-row-description",type:"text",defaultValue:d.description,onBlur:g=>c(d.name,g.target.value)},`fd-${d.description}`)]},`function-${f}`)})})})]})})]})}const o3=v.memo(({isStreaming:t,onIcon:e,offIcon:n,start:a,stop:i})=>t?r.jsx("button",{className:"action-button",onClick:i,children:r.jsx("span",{className:"material-symbols-outlined",children:e})}):r.jsx("button",{className:"action-button",onClick:a,children:r.jsx("span",{className:"material-symbols-outlined",children:n})}));function Gme({videoRef:t,children:e,onVideoStreamChange:n=()=>{},supportsVideo:a,enableEditingSettings:i}){const s=[Bme(),$me()],[o,l]=v.useState(null),[c,d]=s,[f,p]=v.useState(0),[g]=v.useState(()=>new h9),[x,b]=v.useState(!1),j=v.useRef(null),S=v.useRef(null),{client:_,connected:T,connect:C,disconnect:E,volume:k}=vd();v.useEffect(()=>{!T&&S.current&&S.current.focus()},[T]),v.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(f*200,8))}px`)},[f]),v.useEffect(()=>{const I=F=>{_.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:F}])};return T&&!x&&g?g.on("data",I).on("volume",p).start():g.stop(),()=>{g.off("data",I).off("volume",p)}},[T,_,x,g]),v.useEffect(()=>{t.current&&(t.current.srcObject=o);let I=-1;function F(){const B=t.current,$=j.current;if(!B||!$)return;const L=$.getContext("2d");if($.width=B.videoWidth*.25,$.height=B.videoHeight*.25,$.width+$.height>0){L.drawImage(B,0,0,$.width,$.height);const V=$.toDataURL("image/jpeg",1),H=V.slice(V.indexOf(",")+1,1/0);_.sendRealtimeInput([{mimeType:"image/jpeg",data:H}])}T&&(I=window.setTimeout(F,1e3/.5))}return T&&o!==null&&requestAnimationFrame(F),()=>{clearTimeout(I)}},[T,o,_,t]);const O=I=>async()=>{if(I){const F=await I.start();l(F),n(F)}else l(null),n(null);s.filter(F=>F!==I).forEach(F=>F.stop())};return r.jsxs("section",{className:"control-tray",children:[r.jsx("canvas",{style:{display:"none"},ref:j}),r.jsxs("nav",{className:ad("actions-nav",{disabled:!T}),children:[r.jsx("button",{className:ad("action-button mic-button",{recording:!x&&T}),onClick:()=>b(!x),children:x?r.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):r.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),r.jsx("div",{className:"action-button no-action outlined",children:r.jsx(Ime,{volume:k,active:T,hover:!1})}),a&&r.jsxs(r.Fragment,{children:[r.jsx(o3,{isStreaming:d.isStreaming,start:O(d),stop:O(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),r.jsx(o3,{isStreaming:c.isStreaming,start:O(c),stop:O(),onIcon:"videocam_off",offIcon:"videocam"})]}),e]}),r.jsxs("div",{className:ad("connection-container",{connected:T}),children:[r.jsx("div",{className:"connection-button-container",children:r.jsx("button",{ref:S,className:ad("action-button connect-toggle",{connected:T}),onClick:T?E:C,children:r.jsx("span",{className:"material-symbols-outlined filled",children:T?"pause":"play_arrow"})})}),r.jsx("span",{className:"text-indicator",children:"Streaming"})]}),i?r.jsx(Hme,{}):""]})}const l3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:ag.OBJECT,properties:{summary:{type:ag.STRING,description:"The summary of the patient's case."}},required:["summary"]}},Wme=({patientData:t,tokenNumber:e})=>{const[n,a]=v.useState(""),{client:i,setConfig:s,setModel:o}=vd();return v.useEffect(()=>{o("models/gemini-2.5-flash-live-preview"),s({responseModalities:[hd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[l3]}]})},[s,o]),v.useEffect(()=>{const l=c=>{if(!c.functionCalls)return;const d=c.functionCalls.find(f=>f.name===l3.name);if(d){const f=d.args.summary;a(f)}c.functionCalls.length&&setTimeout(()=>{var f;return i.sendToolResponse({functionResponses:(f=c.functionCalls)==null?void 0:f.map(p=>({response:{output:{success:!0}},id:p.id,name:p.name}))})},200)};return i.on("toolcall",l),()=>{i.off("toolcall",l)}},[i]),v.useEffect(()=>{if(n){const l=encodeURIComponent(n);e?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${e}&caseDetails=${l}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${l}`}},[n,e]),r.jsxs("div",{className:"hospital-reception",children:[r.jsx("h1",{children:"Newtons Ai"}),r.jsx("p",{children:"Newtons Ai"}),e&&r.jsxs("h2",{children:["Token Number: ",e]}),t&&r.jsxs("div",{children:[r.jsx("h2",{children:"Patient Details"}),r.jsx("pre",{children:JSON.stringify(t,null,2)})]}),n&&r.jsxs("div",{children:[r.jsx("h2",{children:"Case Summary (from Tool Call)"}),r.jsx("p",{children:n})]})]})},c3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function Yme(){if(!vU())return console.warn("No auth token found, using default Live API key."),c3;try{const e=await se("/api/clinics/gemini-api-key");if(e.ok){const a=(await e.json()).geminiApiKey;if(a)return a}}catch(e){console.error("Failed to fetch clinic-specific Live API key:",e)}return console.warn("Clinic-specific Live API key not found or failed to fetch, using default."),c3}function Kme(){const t=v.useRef(null),[e,n]=v.useState(null),[a,i]=v.useState(null);return v.useEffect(()=>{(async()=>{try{const o=await Yme();i({apiKey:o})}catch(o){console.error("Error setting Live API options:",o)}})()},[]),a?r.jsx("div",{className:"App",children:r.jsx(tS,{options:a,children:r.jsx(Qme,{videoRef:t,setVideoStream:n,videoStream:e})})}):r.jsx("div",{children:"Loading Live API settings..."})}const Qme=({videoRef:t,setVideoStream:e,videoStream:n})=>{const[a,i]=v.useState(null),[s,o]=v.useState(null),{connected:l,client:c,connect:d,config:f,model:p}=vd(),[g,x]=v.useState(""),b=v.useRef(null),[j,S]=v.useState(!1);v.useEffect(()=>{const T=window.matchMedia("(prefers-color-scheme: dark)"),C=E=>{document.documentElement.setAttribute("data-theme",E.matches?"dark":"light")};return C(T),T.addEventListener("change",C),()=>T.removeEventListener("change",C)},[]),v.useEffect(()=>{const T=new URLSearchParams(window.location.search),C={};for(const[E,k]of T.entries())E==="token_number"?o(k):C[E]=k;i(C)},[]),v.useEffect(()=>{Object.keys(f).length>0&&p&&d()},[d,f,p]),v.useEffect(()=>{if(l&&a&&!j){const T=JSON.stringify(a,null,2);c.send([{text:T}]),x(""),S(!0)}},[l,a,c,j]),v.useEffect(()=>{a&&x(JSON.stringify(a,null,2))},[a]);const _=()=>{c.send([{text:g}]),x(""),b.current&&(b.current.innerText="")};return r.jsx("div",{className:"streaming-console",children:r.jsxs("main",{children:[r.jsxs("div",{className:"main-app-area",children:[r.jsx(Wme,{patientData:a,tokenNumber:s}),r.jsx("video",{className:ad("stream",{hidden:!t.current||!n}),ref:t,autoPlay:!0,playsInline:!0})]}),r.jsx("div",{className:ad("input-container",{disabled:!l}),children:r.jsxs("div",{className:"input-content",children:[r.jsx("textarea",{className:"input-area",ref:b,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),T.stopPropagation(),_())},onChange:T=>x(T.target.value),value:g}),r.jsx("span",{className:ad("input-content-placeholder",{hidden:g.length}),children:"Typesomething..."}),r.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:_,children:"send"})]})}),r.jsx(Gme,{videoRef:t,supportsVideo:!0,onVideoStreamChange:e,enableEditingSettings:!0})]})})},u3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Xme=({volume:t,active:e})=>{const n=Array.from({length:5},(a,i)=>r.jsx("div",{className:`audio-bar ${e?"active":""}`,style:{height:e?`${Math.min(24,20+t*40*(1+Math.sin(i)*.3))}px`:"8px",animationDelay:`${i*.1}s`}},i));return r.jsx("div",{className:"audio-pulse",children:n})},Jme=v.forwardRef(({videoRef:t,supportsVideo:e,onVideoStreamChange:n,textInput:a,onSubmitTextInput:i},s)=>{var O;const{connected:o,connect:l,disconnect:c,client:d,volume:f}=vd(),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_]=v.useState(()=>new h9),T=async()=>{o?await c():(await l(),a.trim()&&i())};v.useEffect(()=>{const I=F=>{d.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:F}])};return o&&!p?_.on("data",I).start():_.stop(),()=>{_.off("data",I),_.stop()}},[o,d,p,_]);const C=v.useCallback(async()=>{if(x)k==null||k.getTracks().forEach(I=>I.stop()),n(null),b(!1);else try{const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),b(!0)}catch(I){console.error("Error accessing webcam:",I),b(!1)}},[x,n,t]),E=v.useCallback(async()=>{if(j)k==null||k.getTracks().forEach(I=>I.stop()),n(null),S(!1);else try{const I=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),S(!0)}catch(I){console.error("Error accessing screen share:",I),S(!1)}},[j,n,t]),k=(O=t.current)==null?void 0:O.srcObject;return v.useEffect(()=>()=>{k&&k.getTracks().forEach(I=>I.stop())},[k]),v.useImperativeHandle(s,()=>({handleConnect:T})),r.jsx("div",{className:"live-api-control-tray",children:r.jsxs("div",{className:"live-api-control-tray-inner",children:[r.jsxs("div",{className:"live-api-control-group",children:[r.jsx("button",{onClick:()=>g(!p),disabled:!o,className:`live-api-control-button ${o&&!p?"mic-active":"mic-inactive"}`,"aria-label":p?"Unmute microphone":"Mute microphone",children:p?r.jsx(KX,{className:"w-5 h-5"}):r.jsx(FN,{className:"w-5 h-5"})}),r.jsx("div",{className:"live-api-audio-pulse-container",children:r.jsx(Xme,{volume:f,active:o})}),e&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:E,disabled:!o,className:`live-api-control-button ${j?"video-active":"video-inactive"}`,"aria-label":j?"Stop screen share":"Start screen share",children:r.jsx(eJ,{className:"w-5 h-5"})}),r.jsx("button",{onClick:C,disabled:!o,className:`live-api-control-button ${x?"video-active":"video-inactive"}`,"aria-label":x?"Turn off webcam":"Turn on webcam",children:r.jsx(lZ,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"live-api-control-group",children:[r.jsxs("div",{className:"live-api-status-indicator",children:[r.jsx("div",{className:`live-api-status-dot ${o?"connected":"disconnected"}`}),r.jsx("span",{className:"live-api-status-text",children:o?"Streaming":"Disconnected"})]}),r.jsx("button",{onClick:T,className:`live-api-connect-button ${o?"connected":"disconnected"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(uJ,{className:"w-5 h-5"}),r.jsx("span",{children:"Pause"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Wz,{className:"w-5 h-5"}),r.jsx("span",{children:"Start"})]})})]})]})})}),Zme=({tokenNumber:t,aiSummary:e,clinicName:n})=>r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx("div",{className:"hospital-reception-logo",children:r.jsx("span",{children:n.charAt(0)})}),r.jsxs("h1",{className:"hospital-reception-title",children:[n," AI"]}),r.jsxs("p",{className:"hospital-reception-subtitle",children:["Intelligent ",n," Reception Assistant"]})]}),t&&r.jsxs("div",{className:"hospital-reception-token-card",children:[r.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),r.jsx("p",{className:"hospital-reception-token-number",children:t})]}),e&&r.jsxs("div",{className:"hospital-reception-summary-card",children:[r.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),r.jsx("p",{className:"hospital-reception-summary-text",children:e})]})]}),d3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:ag.OBJECT,properties:{summary:{type:ag.STRING,description:"The summary of the patient's case."}},required:["summary"]}},ege=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:i,voiceAiLanguage:s,lastMotionTimestamp:o,backgroundMode:l})=>{const c=v.useRef(null),d=v.useRef(null),[f,p]=v.useState(null),[g,x]=v.useState("hi"),{client:b,connected:j,setConfig:S,setModel:_,disconnect:T,connect:C}=vd(),E=v.useRef(!1),k=v.useRef(Date.now()),O=v.useRef(!1);v.useEffect(()=>{E.current=j,j&&(k.current=Date.now(),O.current=!1)},[j]),v.useEffect(()=>{if(o){if(k.current=Date.now(),E.current)return;j||C()}},[o,C,j]),v.useEffect(()=>{if(!o||!j)return;const H=setInterval(()=>{const Q=Date.now()-k.current;Q>25e3&&Q<3e4&&!O.current&&(O.current=!0,b.send([{text:"I'll be here if you need more help!"}])),Q>3e4&&(console.log("No motion for 30s. Disconnecting session."),T(),t())},1e3);return()=>clearInterval(H)},[o,j,b,T,t]);const I=v.useMemo(()=>{let H=`Your job is to:

If patient details like name, age, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (Name, Age) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's Name and Age only. Do not ask for their phone number.

    You should guess the patient's sex based on their voice or appearance.

For every visit, collect the patient's history by asking questions.

CRITICAL WORKFLOW - DO NOT USE THE 'case_summary' TOOL YET.

Phase 1: History Collection (MANDATORY LOOP)
Once you have the basics, you MUST ask the patient about their complaints.
- Ask clarifying questions to understand the onset, duration, severity, and associated symptoms.
- DO NOT just accept a one-line complaint.
- Loop your questions until you are confident you have a complete medical history.

Phase 2: Billing Check Protocol
ONLY after you are confident you have the complete history, proceed to the Billing Check Protocol immediately:
1. Ask: 'Would you like to get the tests done?'
   - IF PATIENT SAYS YES: STOP questioning. Do NOT mention medications (they will get them after reports).
     Result -> Lab: Yes, Pharmacy: No.
   - IF PATIENT SAYS NO: Ask: 'Would you like to get the medications?'
     - IF YES: Result -> Lab: No, Pharmacy: Yes.
     - IF NO: Result -> Lab: No, Pharmacy: No.

Phase 3: Final Summary
Only AFTER establishing the billing preferences as per the logic above, you should use the 'case_summary' tool EXACTLY ONCE at the end.

The 'case_summary' MUST be comprehensive and include:
- Patient Name, Age, Sex
- Medical History & Complaints
- Billing Preferences (e.g., 'Billing Preference: Lab - Yes, Pharmacy - No')

Do not call the tool multiple times. Wait until you have ALL the info, then generate the single final summary and ask them to wait in reception.`;e&&(H+=`

Patient Data: ${JSON.stringify(e,null,2)}`);const Q={"en-US":"English","hi-IN":"Hindi","te-IN":"Telugu","bn-IN":"Bengali","mr-IN":"Marathi","ta-IN":"Tamil","gu-IN":"Gujarati","kn-IN":"Kannada","ml-IN":"Malayalam","pa-IN":"Punjabi","es-ES":"Spanish","fr-FR":"French","de-DE":"German","it-IT":"Italian","pt-PT":"Portuguese","ru-RU":"Russian","ja-JP":"Japanese","ko-KR":"Korean","zh-CN":"Chinese","ar-SA":"Arabic"}[s]||"English";return H+=` You should always speak in ${Q}.`,s==="te-IN"&&(H+=" Dont write the telugu words in english."),{responseModalities:[hd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:H}]},tools:[{functionDeclarations:[d3]}]}},[e,s]);v.useEffect(()=>{if(_("models/gemini-2.5-flash-native-audio-preview-12-2025"),S(I),!o){const H=setTimeout(()=>{d.current&&!j&&d.current.handleConnect()},2e3);return()=>clearTimeout(H)}},[S,_,I,j,o]),v.useEffect(()=>()=>{j&&T()},[j,T]);const[F,B]=v.useState(null);v.useEffect(()=>{const H=ne=>{if(!ne.functionCalls)return;const Q=ne.functionCalls.find(q=>q.name===d3.name);if(Q){const q=Q.args.summary;B(q),a(q)}ne.functionCalls.length&&setTimeout(()=>{var q;return b.sendToolResponse({functionResponses:(q=ne.functionCalls)==null?void 0:q.map(G=>({response:{output:{success:!0}},id:G.id,name:G.name}))})},200)};return b.on("toolcall",H),()=>{b.off("toolcall",H)}},[b,a]);const $=()=>{g.trim()&&(b.send([{text:g}]),x(""))},L=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),$())},V=async()=>{B(null),a(null),x("hi"),j?(T(),setTimeout(()=>{C()},500)):C()};return r.jsx("div",{className:"live-api-modal-overlay",style:l?{opacity:0,pointerEvents:"none",position:"absolute",zIndex:-1}:{},children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsxs("div",{className:"live-api-modal-header",children:[r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx("div",{className:"live-api-modal-logo",children:r.jsx("span",{children:i.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h1",{className:"live-api-modal-title",children:i}),r.jsxs("p",{className:"live-api-modal-subtitle",children:[i," Hospital Assistant"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:V,className:"live-api-modal-close-button",title:"Refresh Session","aria-label":"Refresh session",children:r.jsx(Yz,{className:"w-6 h-6"})}),r.jsx("button",{onClick:t,className:"live-api-modal-close-button","aria-label":"Close modal",children:r.jsx($t,{className:"w-6 h-6"})})]})]}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"live-api-reception-area",children:[r.jsx(Zme,{patientData:e,tokenNumber:n,aiSummary:F,clinicName:i}),f&&r.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),r.jsx("div",{className:"live-api-input-area",children:r.jsxs("div",{className:"live-api-input-container",children:[r.jsx("textarea",{value:g,onChange:H=>x(H.target.value),onKeyDown:L,placeholder:"Type your message here...",disabled:!j,rows:1,className:"live-api-textarea"}),r.jsx("button",{onClick:$,disabled:!j||!g.trim(),className:"live-api-send-button","aria-label":"Send message",children:r.jsx($N,{className:"w-5 h-5"})})]})}),r.jsx(Jme,{ref:d,videoRef:c,supportsVideo:!0,onVideoStreamChange:p,textInput:g,onSubmitTextInput:$})]})})]})})},nS=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,lastMotionTimestamp:i,backgroundMode:s})=>{const[o,l]=v.useState(null),[c,d]=v.useState("Newtons Ai"),[f,p]=v.useState("en-US"),[g,x]=v.useState(!0);if(v.useEffect(()=>{(async()=>{try{let S=null,_="Newtons Ai",T="en-US";try{const C=await se("/api/clinics/settings");if(C.ok){const E=await C.json();E.name&&E.name!==""&&(_=E.name),E.gemini_api_key&&E.gemini_api_key.trim()!==""&&(S=E.gemini_api_key.trim()),E.voice_ai_language&&(T=E.voice_ai_language)}}catch(C){console.warn("Failed to fetch clinic settings",C)}if(d(_),p(T),S)l(S);else{try{const C=await se("/api/global-settings/app_gemini_api_key");if(C.ok){const E=await C.json();if(E.value&&E.value.trim()!==""){l(E.value.trim());return}}}catch(C){console.warn("Failed to fetch global key fallback",C)}l(u3)}}catch(S){console.error("Unexpected error in getSettings:",S),l(u3)}finally{x(!1)}})()},[]),g)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsx("div",{className:"live-api-modal-header",style:{borderBottom:"none"},children:r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsxs("div",{style:{marginLeft:"12px"},children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:180,height:14,style:{marginTop:"4px"}})]})]})}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx(Z,{variant:"circular",width:64,height:64,style:{margin:"0 auto"}}),r.jsx(Z,{width:200,height:32,style:{margin:"16px auto 8px"}}),r.jsx(Z,{width:250,height:16,style:{margin:"0 auto"}})]}),r.jsxs("div",{className:"hospital-reception-token-card",style:{background:"transparent",boxShadow:"none"},children:[r.jsx(Z,{width:140,height:20,style:{margin:"0 auto 8px"}}),r.jsx(Z,{width:100,height:48,style:{margin:"0 auto"}})]})]})}),r.jsx("div",{className:"live-api-control-tray",style:{position:"relative"},children:r.jsx("div",{className:"live-api-control-tray-inner",style:{justifyContent:"center"},children:r.jsx("div",{className:"live-api-loading-text",children:"Initializing AI Assistant..."})})})]})});if(!o)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsx("div",{className:"live-api-modal-content",children:r.jsx("div",{children:"Error: API Key not available."})})});const b={apiKey:o};return r.jsx(tS,{options:b,children:r.jsx(ege,{onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:a,clinicName:c,voiceAiLanguage:f,lastMotionTimestamp:i,backgroundMode:s})})},rS=()=>{const[t,e]=v.useState(null),[n,a]=v.useState(!0),[i,s]=v.useState(null),o=v.useCallback(async()=>{a(!0),s(null);try{const c=await se("/api/clinics/settings");if(!c.ok)throw new Error("Failed to fetch clinic settings");const d=await c.json();e(d)}catch(c){s(c instanceof Error?c.message:"An error occurred")}finally{a(!1)}},[]);v.useEffect(()=>{o()},[o]);const l=(t==null?void 0:t.custom_columns_config)||{};return{settings:t,customColumnsConfig:l,loading:n,error:i,refetch:o}},tge="_overlay_79cew_5",nge="_overlayMinimized_79cew_55",rge="_modal_79cew_65",age="_minimized_79cew_97",ige="_contentWrapper_79cew_113",sge="_exiting_79cew_161",oge="_header_79cew_183",lge="_inputWrapper_79cew_197",cge="_inputContainer_79cew_215",uge="_minimizedSearchIcon_79cew_273",dge="_input_79cew_197",hge="_controlsGroup_79cew_347",fge="_iconButton_79cew_373",pge="_sendButton_79cew_413",mge="_dragBar_79cew_459",gge="_dragBarTitle_79cew_489",yge="_dragBarControls_79cew_519",xge="_dragBarControlsRight_79cew_537",vge="_newChatBtn_79cew_553",bge="_windowControlBtn_79cew_589",jge="_content_79cew_113",wge="_overlayContent_79cew_687",Nge="_section_79cew_711",Sge="_sectionTitle_79cew_723",_ge="_recentList_79cew_743",Cge="_recentPill_79cew_767",Tge="_recentName_79cew_807",kge="_recentToken_79cew_819",Age="_recentInfo_79cew_837",Ege="_examplesGrid_79cew_849",Pge="_exampleCard_79cew_861",Oge="_exampleIcon_79cew_897",Dge="_exampleText_79cew_905",Mge="_chatSectionFill_79cew_919",Ige="_chatMessagesFill_79cew_935",Rge="_chatBubble_79cew_955",Lge="_chatBubbleUser_79cew_975",Fge="_chatBubbleModel_79cew_991",$ge="_chatBubbleSystem_79cew_1009",Bge="_processing_79cew_1025",zge="_spinner_79cew_1043",qge="_resultItem_79cew_1065",Uge="_resultName_79cew_1093",Vge="_resultToken_79cew_1103",Hge="_resultDetails_79cew_1115",Gge="_noResults_79cew_1125",It={overlay:tge,overlayMinimized:nge,modal:rge,minimized:age,contentWrapper:ige,exiting:sge,header:oge,inputWrapper:lge,inputContainer:cge,minimizedSearchIcon:uge,input:dge,controlsGroup:hge,iconButton:fge,sendButton:pge,dragBar:mge,dragBarTitle:gge,dragBarControls:yge,dragBarControlsRight:xge,newChatBtn:vge,windowControlBtn:bge,content:jge,overlayContent:wge,section:Nge,sectionTitle:Sge,recentList:_ge,recentPill:Cge,recentName:Tge,recentToken:kge,recentInfo:Age,examplesGrid:Ege,exampleCard:Pge,exampleIcon:Oge,exampleText:Dge,chatSectionFill:Mge,chatMessagesFill:Ige,chatBubble:Rge,chatBubbleUser:Lge,chatBubbleModel:Fge,chatBubbleSystem:$ge,processing:Bge,spinner:zge,resultItem:qge,resultName:Uge,resultToken:Vge,resultDetails:Hge,noResults:Gge},Ib=({columns:t,data:e,onSave:n,onRowAdd:a,onRowDelete:i,onRowClick:s,onRowHover:o,editable:l=!0,showRowNumbers:c=!0,title:d})=>{const[f,p]=v.useState(e),[g,x]=v.useState(null),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(null),[E,k]=v.useState(!1),[O,I]=v.useState(new Set);Se.useEffect(()=>{p(e),k(!1)},[e]);const F=v.useMemo(()=>{let q=[...f];if(S.trim()){const G=S.toLowerCase();q=q.filter(ie=>Object.values(ie).some(W=>W!=null&&String(W).toLowerCase().includes(G)))}return T&&q.sort((G,ie)=>{const W=G[T.key],z=ie[T.key];return W==null?1:z==null?-1:W<z?T.direction==="asc"?-1:1:W>z?T.direction==="asc"?1:-1:0}),q},[f,S,T]),B=(q,G)=>{var W;if(!l)return;const ie=t.find(z=>z.key===G);(ie==null?void 0:ie.editable)!==!1&&(x({row:q,col:G}),j(String(((W=f[q])==null?void 0:W[G])??"")))},$=()=>{var q;if(g){const G=[...f],ie=t.find(z=>z.key===g.col);let W=b;(ie==null?void 0:ie.type)==="number"&&(W=parseFloat(W)||0),(ie==null?void 0:ie.type)==="boolean"&&(W=W.toLowerCase()==="true"||W==="1"),((q=G[g.row])==null?void 0:q[g.col])!==W&&(G[g.row]={...G[g.row],[g.col]:W},p(G),k(!0))}x(null)},L=q=>{if(q.key==="Enter")$();else if(q.key==="Escape")x(null);else if(q.key==="Tab"&&(q.preventDefault(),$(),g)){const G=t.findIndex(W=>W.key===g.col),ie=t[G+1];ie?setTimeout(()=>B(g.row,ie.key),0):g.row<f.length-1&&setTimeout(()=>B(g.row+1,t[0].key),0)}},V=q=>{C(G=>(G==null?void 0:G.key)===q?G.direction==="asc"?{key:q,direction:"desc"}:null:{key:q,direction:"asc"})},H=()=>{n&&(n(f),k(!1))},ne=()=>{const q=t.map(je=>je.label).join(","),G=f.map(je=>t.map(Y=>{const Ie=je[Y.key];return typeof Ie=="string"&&Ie.includes(",")?`"${Ie}"`:Ie}).join(",")),ie=[q,...G].join(`
`),W=new Blob([ie],{type:"text/csv"}),z=URL.createObjectURL(W),ce=document.createElement("a");ce.href=z,ce.download=`${d||"data"}.csv`,ce.click()},Q=q=>{const G=new Set(O);G.has(q)?G.delete(q):G.add(q),I(G)};return r.jsxs("div",{className:"excel-grid",children:[r.jsxs("div",{className:"excel-toolbar",children:[r.jsxs("div",{className:"excel-search",children:[r.jsx("input",{type:"text",placeholder:" Search...",value:S,onChange:q=>_(q.target.value)}),S&&r.jsx("button",{className:"clear-search",onClick:()=>_(""),children:r.jsx($t,{size:14})})]}),r.jsxs("div",{className:"excel-actions",children:[a&&r.jsxs("button",{onClick:a,className:"excel-btn",title:"Add Row",children:[r.jsx(Gn,{size:16})," Add"]}),r.jsxs("button",{onClick:ne,className:"excel-btn",title:"Export CSV",children:[r.jsx(zz,{size:16})," Export"]}),l&&n&&r.jsxs("button",{onClick:H,className:`excel-btn save-btn ${E?"has-changes":""}`,disabled:!E,title:"Save Changes",children:[r.jsx(cs,{size:16})," Save"]})]})]}),r.jsxs("div",{className:"excel-status",children:[S&&r.jsxs("span",{children:["Showing ",F.length," of ",f.length]}),E&&r.jsx("span",{className:"unsaved-indicator",children:" Unsaved changes"})]}),r.jsx("div",{className:"excel-table-wrapper",children:r.jsxs("table",{className:"excel-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[c&&r.jsx("th",{className:"row-num-header",children:"#"}),t.map(q=>r.jsx("th",{onClick:()=>V(q.key),style:{width:q.width,cursor:"pointer"},children:r.jsxs("div",{className:"th-content",children:[q.label,(T==null?void 0:T.key)===q.key&&(T.direction==="asc"?r.jsx(WQ,{size:14}):r.jsx(Bz,{size:14}))]})},q.key)),i&&r.jsx("th",{className:"action-col",children:""})]})}),r.jsx("tbody",{children:F.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:t.length+(c?1:0)+(i?1:0),className:"no-data",children:"No data found"})}):F.map((q,G)=>r.jsxs("tr",{className:`${O.has(G)?"selected":""} ${s?"clickable-row":""}`,onClick:()=>s&&s(q,G),onMouseEnter:()=>o&&o(q,G),style:s?{cursor:"pointer"}:void 0,children:[c&&r.jsx("td",{className:"row-num",onClick:()=>Q(G),children:G+1}),t.map(ie=>r.jsx("td",{onClick:()=>B(G,ie.key),className:`
                                                ${(g==null?void 0:g.row)===G&&(g==null?void 0:g.col)===ie.key?"editing":""}
                                                ${ie.editable===!1?"read-only":""}
                                            `,children:(g==null?void 0:g.row)===G&&(g==null?void 0:g.col)===ie.key?r.jsx("input",{type:ie.type==="number"?"number":"text",value:b,onChange:W=>j(W.target.value),onBlur:$,onKeyDown:L,autoFocus:!0}):r.jsx("span",{children:q[ie.key]??""})},ie.key)),i&&r.jsx("td",{className:"action-col",children:r.jsx("button",{className:"delete-row",onClick:()=>i(G),children:r.jsx($t,{size:14})})})]},q.id||G))})]})}),r.jsxs("div",{className:"excel-footer",children:[r.jsxs("span",{children:[f.length," rows"]}),O.size>0&&r.jsxs("span",{children:[O.size," selected"]})]})]})};function m9(t){var e,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=m9(t[e]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function pn(){for(var t,e,n=0,a="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=m9(t))&&(a&&(a+=" "),a+=e);return a}var MC,h3;function fs(){if(h3)return MC;h3=1;var t=Array.isArray;return MC=t,MC}var IC,f3;function g9(){if(f3)return IC;f3=1;var t=typeof no=="object"&&no&&no.Object===Object&&no;return IC=t,IC}var RC,p3;function $l(){if(p3)return RC;p3=1;var t=g9(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return RC=n,RC}var LC,m3;function Rb(){if(m3)return LC;m3=1;var t=$l(),e=t.Symbol;return LC=e,LC}var FC,g3;function Wge(){if(g3)return FC;g3=1;var t=Rb(),e=Object.prototype,n=e.hasOwnProperty,a=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=n.call(o,i),c=o[i];try{o[i]=void 0;var d=!0}catch{}var f=a.call(o);return d&&(l?o[i]=c:delete o[i]),f}return FC=s,FC}var $C,y3;function Yge(){if(y3)return $C;y3=1;var t=Object.prototype,e=t.toString;function n(a){return e.call(a)}return $C=n,$C}var BC,x3;function Hc(){if(x3)return BC;x3=1;var t=Rb(),e=Wge(),n=Yge(),a="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:a:s&&s in Object(l)?e(l):n(l)}return BC=o,BC}var zC,v3;function Gc(){if(v3)return zC;v3=1;function t(e){return e!=null&&typeof e=="object"}return zC=t,zC}var qC,b3;function Bg(){if(b3)return qC;b3=1;var t=Hc(),e=Gc(),n="[object Symbol]";function a(i){return typeof i=="symbol"||e(i)&&t(i)==n}return qC=a,qC}var UC,j3;function _D(){if(j3)return UC;j3=1;var t=fs(),e=Bg(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:a.test(s)||!n.test(s)||o!=null&&s in Object(o)}return UC=i,UC}var VC,w3;function bd(){if(w3)return VC;w3=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return VC=t,VC}var HC,N3;function CD(){if(N3)return HC;N3=1;var t=Hc(),e=bd(),n="[object AsyncFunction]",a="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==a||c==i||c==n||c==s}return HC=o,HC}var GC,S3;function Kge(){if(S3)return GC;S3=1;var t=$l(),e=t["__core-js_shared__"];return GC=e,GC}var WC,_3;function Qge(){if(_3)return WC;_3=1;var t=Kge(),e=function(){var a=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function n(a){return!!e&&e in a}return WC=n,WC}var YC,C3;function y9(){if(C3)return YC;C3=1;var t=Function.prototype,e=t.toString;function n(a){if(a!=null){try{return e.call(a)}catch{}try{return a+""}catch{}}return""}return YC=n,YC}var KC,T3;function Xge(){if(T3)return KC;T3=1;var t=CD(),e=Qge(),n=bd(),a=y9(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,f=RegExp("^"+c.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||e(g))return!1;var x=t(g)?f:s;return x.test(a(g))}return KC=p,KC}var QC,k3;function Jge(){if(k3)return QC;k3=1;function t(e,n){return e==null?void 0:e[n]}return QC=t,QC}var XC,A3;function Mf(){if(A3)return XC;A3=1;var t=Xge(),e=Jge();function n(a,i){var s=e(a,i);return t(s)?s:void 0}return XC=n,XC}var JC,E3;function aS(){if(E3)return JC;E3=1;var t=Mf(),e=t(Object,"create");return JC=e,JC}var ZC,P3;function Zge(){if(P3)return ZC;P3=1;var t=aS();function e(){this.__data__=t?t(null):{},this.size=0}return ZC=e,ZC}var e2,O3;function eye(){if(O3)return e2;O3=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return e2=t,e2}var t2,D3;function tye(){if(D3)return t2;D3=1;var t=aS(),e="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return a.call(o,s)?o[s]:void 0}return t2=i,t2}var n2,M3;function nye(){if(M3)return n2;M3=1;var t=aS(),e=Object.prototype,n=e.hasOwnProperty;function a(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return n2=a,n2}var r2,I3;function rye(){if(I3)return r2;I3=1;var t=aS(),e="__lodash_hash_undefined__";function n(a,i){var s=this.__data__;return this.size+=this.has(a)?0:1,s[a]=t&&i===void 0?e:i,this}return r2=n,r2}var a2,R3;function aye(){if(R3)return a2;R3=1;var t=Zge(),e=eye(),n=tye(),a=nye(),i=rye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,a2=s,a2}var i2,L3;function iye(){if(L3)return i2;L3=1;function t(){this.__data__=[],this.size=0}return i2=t,i2}var s2,F3;function TD(){if(F3)return s2;F3=1;function t(e,n){return e===n||e!==e&&n!==n}return s2=t,s2}var o2,$3;function iS(){if($3)return o2;$3=1;var t=TD();function e(n,a){for(var i=n.length;i--;)if(t(n[i][0],a))return i;return-1}return o2=e,o2}var l2,B3;function sye(){if(B3)return l2;B3=1;var t=iS(),e=Array.prototype,n=e.splice;function a(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return l2=a,l2}var c2,z3;function oye(){if(z3)return c2;z3=1;var t=iS();function e(n){var a=this.__data__,i=t(a,n);return i<0?void 0:a[i][1]}return c2=e,c2}var u2,q3;function lye(){if(q3)return u2;q3=1;var t=iS();function e(n){return t(this.__data__,n)>-1}return u2=e,u2}var d2,U3;function cye(){if(U3)return d2;U3=1;var t=iS();function e(n,a){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,a])):i[s][1]=a,this}return d2=e,d2}var h2,V3;function sS(){if(V3)return h2;V3=1;var t=iye(),e=sye(),n=oye(),a=lye(),i=cye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,h2=s,h2}var f2,H3;function kD(){if(H3)return f2;H3=1;var t=Mf(),e=$l(),n=t(e,"Map");return f2=n,f2}var p2,G3;function uye(){if(G3)return p2;G3=1;var t=aye(),e=sS(),n=kD();function a(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return p2=a,p2}var m2,W3;function dye(){if(W3)return m2;W3=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return m2=t,m2}var g2,Y3;function oS(){if(Y3)return g2;Y3=1;var t=dye();function e(n,a){var i=n.__data__;return t(a)?i[typeof a=="string"?"string":"hash"]:i.map}return g2=e,g2}var y2,K3;function hye(){if(K3)return y2;K3=1;var t=oS();function e(n){var a=t(this,n).delete(n);return this.size-=a?1:0,a}return y2=e,y2}var x2,Q3;function fye(){if(Q3)return x2;Q3=1;var t=oS();function e(n){return t(this,n).get(n)}return x2=e,x2}var v2,X3;function pye(){if(X3)return v2;X3=1;var t=oS();function e(n){return t(this,n).has(n)}return v2=e,v2}var b2,J3;function mye(){if(J3)return b2;J3=1;var t=oS();function e(n,a){var i=t(this,n),s=i.size;return i.set(n,a),this.size+=i.size==s?0:1,this}return b2=e,b2}var j2,Z3;function AD(){if(Z3)return j2;Z3=1;var t=uye(),e=hye(),n=fye(),a=pye(),i=mye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,j2=s,j2}var w2,e6;function x9(){if(e6)return w2;e6=1;var t=AD(),e="Expected a function";function n(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var d=a.apply(this,o);return s.cache=c.set(l,d)||c,d};return s.cache=new(n.Cache||t),s}return n.Cache=t,w2=n,w2}var N2,t6;function gye(){if(t6)return N2;t6=1;var t=x9(),e=500;function n(a){var i=t(a,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return N2=n,N2}var S2,n6;function yye(){if(n6)return S2;n6=1;var t=gye(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,c,d){s.push(c?d.replace(n,"$1"):l||o)}),s});return S2=a,S2}var _2,r6;function ED(){if(r6)return _2;r6=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=Array(i);++a<i;)s[a]=n(e[a],a,e);return s}return _2=t,_2}var C2,a6;function xye(){if(a6)return C2;a6=1;var t=Rb(),e=ED(),n=fs(),a=Bg(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(a(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return C2=o,C2}var T2,i6;function v9(){if(i6)return T2;i6=1;var t=xye();function e(n){return n==null?"":t(n)}return T2=e,T2}var k2,s6;function b9(){if(s6)return k2;s6=1;var t=fs(),e=_D(),n=yye(),a=v9();function i(s,o){return t(s)?s:e(s,o)?[s]:n(a(s))}return k2=i,k2}var A2,o6;function lS(){if(o6)return A2;o6=1;var t=Bg();function e(n){if(typeof n=="string"||t(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return A2=e,A2}var E2,l6;function PD(){if(l6)return E2;l6=1;var t=b9(),e=lS();function n(a,i){i=t(i,a);for(var s=0,o=i.length;a!=null&&s<o;)a=a[e(i[s++])];return s&&s==o?a:void 0}return E2=n,E2}var P2,c6;function j9(){if(c6)return P2;c6=1;var t=PD();function e(n,a,i){var s=n==null?void 0:t(n,a);return s===void 0?i:s}return P2=e,P2}var vye=j9();const Is=Wn(vye);var O2,u6;function bye(){if(u6)return O2;u6=1;function t(e){return e==null}return O2=t,O2}var jye=bye();const hn=Wn(jye);var D2,d6;function wye(){if(d6)return D2;d6=1;var t=Hc(),e=fs(),n=Gc(),a="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==a}return D2=i,D2}var Nye=wye();const _f=Wn(Nye);var Sye=CD();const an=Wn(Sye);var _ye=bd();const zg=Wn(_ye);var M2={exports:{}},dr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h6;function Cye(){if(h6)return dr;h6=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function j(S){if(typeof S=="object"&&S!==null){var _=S.$$typeof;switch(_){case t:switch(S=S.type,S){case n:case i:case a:case d:case f:return S;default:switch(S=S&&S.$$typeof,S){case l:case o:case c:case g:case p:case s:return S;default:return _}}case e:return _}}}return dr.ContextConsumer=o,dr.ContextProvider=s,dr.Element=t,dr.ForwardRef=c,dr.Fragment=n,dr.Lazy=g,dr.Memo=p,dr.Portal=e,dr.Profiler=i,dr.StrictMode=a,dr.Suspense=d,dr.SuspenseList=f,dr.isAsyncMode=function(){return!1},dr.isConcurrentMode=function(){return!1},dr.isContextConsumer=function(S){return j(S)===o},dr.isContextProvider=function(S){return j(S)===s},dr.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},dr.isForwardRef=function(S){return j(S)===c},dr.isFragment=function(S){return j(S)===n},dr.isLazy=function(S){return j(S)===g},dr.isMemo=function(S){return j(S)===p},dr.isPortal=function(S){return j(S)===e},dr.isProfiler=function(S){return j(S)===i},dr.isStrictMode=function(S){return j(S)===a},dr.isSuspense=function(S){return j(S)===d},dr.isSuspenseList=function(S){return j(S)===f},dr.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===i||S===a||S===d||S===f||S===x||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===p||S.$$typeof===s||S.$$typeof===o||S.$$typeof===c||S.$$typeof===b||S.getModuleId!==void 0)},dr.typeOf=j,dr}var f6;function Tye(){return f6||(f6=1,M2.exports=Cye()),M2.exports}var kye=Tye(),I2,p6;function w9(){if(p6)return I2;p6=1;var t=Hc(),e=Gc(),n="[object Number]";function a(i){return typeof i=="number"||e(i)&&t(i)==n}return I2=a,I2}var R2,m6;function Aye(){if(m6)return R2;m6=1;var t=w9();function e(n){return t(n)&&n!=+n}return R2=e,R2}var Eye=Aye();const qg=Wn(Eye);var Pye=w9();const Oye=Wn(Pye);var Ri=function(e){return e===0?0:e>0?1:-1},Xh=function(e){return _f(e)&&e.indexOf("%")===e.length-1},Nt=function(e){return Oye(e)&&!qg(e)},Dye=function(e){return hn(e)},Ca=function(e){return Nt(e)||_f(e)},Mye=0,If=function(e){var n=++Mye;return"".concat(e||"").concat(n)},Li=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Nt(e)&&!_f(e))return a;var s;if(Xh(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return qg(s)&&(s=a),i&&s>n&&(s=n),s},Yu=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Iye=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,a={},i=0;i<n;i++)if(!a[e[i]])a[e[i]]=!0;else return!0;return!1},_a=function(e,n){return Nt(e)&&Nt(n)?function(a){return e+a*(n-e)}:function(){return n}};function Aw(t,e,n){return!t||!t.length?null:t.find(function(a){return a&&(typeof e=="function"?e(a):Is(a,e))===n})}var Rye=function(e,n){return Nt(e)&&Nt(n)?e-n:_f(e)&&_f(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Fm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var a in e)if({}.hasOwnProperty.call(e,a)&&!{}.hasOwnProperty.call(t,a))return!1;return!0}function eP(t){"@babel/helpers - typeof";return eP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eP(t)}var Lye=["viewBox","children"],Fye=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],g6=["points","pathLength"],L2={svg:Lye,polygon:g6,polyline:g6},OD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ew=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(v.isValidElement(e)&&(a=e.props),!zg(a))return null;var i={};return Object.keys(a).forEach(function(s){OD.includes(s)&&(i[s]=n||function(o){return a[s](a,o)})}),i},$ye=function(e,n,a){return function(i){return e(n,a,i),null}},Cf=function(e,n,a){if(!zg(e)||eP(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];OD.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=$ye(o,n,a))}),i},Bye=["children"],zye=["children"];function y6(t,e){if(t==null)return{};var n=qye(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function qye(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function tP(t){"@babel/helpers - typeof";return tP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tP(t)}var x6={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},kc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},v6=null,F2=null,DD=function t(e){if(e===v6&&Array.isArray(F2))return F2;var n=[];return v.Children.forEach(e,function(a){hn(a)||(kye.isFragment(a)?n=n.concat(t(a.props.children)):n.push(a))}),F2=n,v6=e,n};function Rs(t,e){var n=[],a=[];return Array.isArray(e)?a=e.map(function(i){return kc(i)}):a=[kc(e)],DD(t).forEach(function(i){var s=Is(i,"type.displayName")||Is(i,"type.name");a.indexOf(s)!==-1&&n.push(i)}),n}function ks(t,e){var n=Rs(t,e);return n&&n[0]}var b6=function(e){if(!e||!e.props)return!1;var n=e.props,a=n.width,i=n.height;return!(!Nt(a)||a<=0||!Nt(i)||i<=0)},Uye=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Vye=function(e){return e&&e.type&&_f(e.type)&&Uye.indexOf(e.type)>=0},N9=function(e){return e&&tP(e)==="object"&&"clipDot"in e},Hye=function(e,n,a,i){var s,o=(s=L2==null?void 0:L2[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!an(e)&&(i&&o.includes(n)||Fye.includes(n))||a&&OD.includes(n)},zt=function(e,n,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(v.isValidElement(e)&&(i=e.props),!zg(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;Hye((l=i)===null||l===void 0?void 0:l[o],o,n,a)&&(s[o]=i[o])}),s},nP=function t(e,n){if(e===n)return!0;var a=v.Children.count(e);if(a!==v.Children.count(n))return!1;if(a===0)return!0;if(a===1)return j6(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<a;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!j6(s,o))return!1}return!0},j6=function(e,n){if(hn(e)&&hn(n))return!0;if(!hn(e)&&!hn(n)){var a=e.props||{},i=a.children,s=y6(a,Bye),o=n.props||{},l=o.children,c=y6(o,zye);return i&&l?Fm(s,c)&&nP(i,l):!i&&!l?Fm(s,c):!1}return!1},w6=function(e,n){var a=[],i={};return DD(e).forEach(function(s,o){if(Vye(s))a.push(s);else if(s){var l=kc(s.type),c=n[l]||{},d=c.handler,f=c.once;if(d&&(!f||!i[l])){var p=d(s,l,o);a.push(p),i[l]=!0}}}),a},Gye=function(e){var n=e&&e.type;return n&&x6[n]?x6[n]:null},Wye=function(e,n){return DD(n).indexOf(e)},Yye=["children","width","height","viewBox","className","style","title","desc"];function rP(){return rP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rP.apply(this,arguments)}function Kye(t,e){if(t==null)return{};var n=Qye(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Qye(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function aP(t){var e=t.children,n=t.width,a=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,d=Kye(t,Yye),f=i||{width:n,height:a,x:0,y:0},p=pn("recharts-surface",s);return Se.createElement("svg",rP({},zt(d,!0,"svg"),{className:p,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Se.createElement("title",null,l),Se.createElement("desc",null,c),e)}var Xye=["children","className"];function iP(){return iP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},iP.apply(this,arguments)}function Jye(t,e){if(t==null)return{};var n=Zye(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Zye(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var Mn=Se.forwardRef(function(t,e){var n=t.children,a=t.className,i=Jye(t,Xye),s=pn("recharts-layer",a);return Se.createElement("g",iP({className:s},zt(i,!0),{ref:e}),n)}),$o=function(e,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s]},$2,N6;function exe(){if(N6)return $2;N6=1;function t(e,n,a){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),a=a>s?s:a,a<0&&(a+=s),s=n>a?0:a-n>>>0,n>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+n];return o}return $2=t,$2}var B2,S6;function txe(){if(S6)return B2;S6=1;var t=exe();function e(n,a,i){var s=n.length;return i=i===void 0?s:i,!a&&i>=s?n:t(n,a,i)}return B2=e,B2}var z2,_6;function S9(){if(_6)return z2;_6=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function c(d){return l.test(d)}return z2=c,z2}var q2,C6;function nxe(){if(C6)return q2;C6=1;function t(e){return e.split("")}return q2=t,q2}var U2,T6;function rxe(){if(T6)return U2;T6=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=e+n+a,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",b=d+"?",j="["+s+"]?",S="(?:"+x+"(?:"+[f,p,g].join("|")+")"+j+b+")*",_=j+b+S,T="(?:"+[f+l+"?",l,p,g,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+T+_,"g");function E(k){return k.match(C)||[]}return U2=E,U2}var V2,k6;function axe(){if(k6)return V2;k6=1;var t=nxe(),e=S9(),n=rxe();function a(i){return e(i)?n(i):t(i)}return V2=a,V2}var H2,A6;function ixe(){if(A6)return H2;A6=1;var t=txe(),e=S9(),n=axe(),a=v9();function i(s){return function(o){o=a(o);var l=e(o)?n(o):void 0,c=l?l[0]:o.charAt(0),d=l?t(l,1).join(""):o.slice(1);return c[s]()+d}}return H2=i,H2}var G2,E6;function sxe(){if(E6)return G2;E6=1;var t=ixe(),e=t("toUpperCase");return G2=e,G2}var oxe=sxe();const cS=Wn(oxe);function Ir(t){return function(){return t}}const _9=Math.cos,Pw=Math.sin,Ho=Math.sqrt,Ow=Math.PI,uS=2*Ow,sP=Math.PI,oP=2*sP,Vh=1e-6,lxe=oP-Vh;function C9(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function cxe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return C9;const n=10**e;return function(a){this._+=a[0];for(let i=1,s=a.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}class uxe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?C9:cxe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,a,i){this._append`Q${+e},${+n},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(e,n,a,i,s,o){this._append`C${+e},${+n},${+a},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,a,i,s){if(e=+e,n=+n,a=+a,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=a-e,d=i-n,f=o-e,p=l-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Vh)if(!(Math.abs(p*c-d*f)>Vh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let x=a-o,b=i-l,j=c*c+d*d,S=x*x+b*b,_=Math.sqrt(j),T=Math.sqrt(g),C=s*Math.tan((sP-Math.acos((j+g-S)/(2*_*T)))/2),E=C/T,k=C/_;Math.abs(E-1)>Vh&&this._append`L${e+E*f},${n+E*p}`,this._append`A${s},${s},0,0,${+(p*x>f*b)},${this._x1=e+k*c},${this._y1=n+k*d}`}}arc(e,n,a,i,s,o){if(e=+e,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(i),c=a*Math.sin(i),d=e+l,f=n+c,p=1^o,g=o?i-s:s-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Vh||Math.abs(this._y1-f)>Vh)&&this._append`L${d},${f}`,a&&(g<0&&(g=g%oP+oP),g>lxe?this._append`A${a},${a},0,1,${p},${e-l},${n-c}A${a},${a},0,1,${p},${this._x1=d},${this._y1=f}`:g>Vh&&this._append`A${a},${a},0,${+(g>=sP)},${p},${this._x1=e+a*Math.cos(s)},${this._y1=n+a*Math.sin(s)}`)}rect(e,n,a,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function MD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);e=a}return t},()=>new uxe(e)}function ID(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function T9(t){this._context=t}T9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function dS(t){return new T9(t)}function k9(t){return t[0]}function A9(t){return t[1]}function E9(t,e){var n=Ir(!0),a=null,i=dS,s=null,o=MD(l);t=typeof t=="function"?t:t===void 0?k9:Ir(t),e=typeof e=="function"?e:e===void 0?A9:Ir(e);function l(c){var d,f=(c=ID(c)).length,p,g=!1,x;for(a==null&&(s=i(x=o())),d=0;d<=f;++d)!(d<f&&n(p=c[d],d,c))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(p,d,c),+e(p,d,c));if(x)return s=null,x+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ir(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ir(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ir(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,a!=null&&(s=i(a)),l):i},l.context=function(c){return arguments.length?(c==null?a=s=null:s=i(a=c),l):a},l}function Tj(t,e,n){var a=null,i=Ir(!0),s=null,o=dS,l=null,c=MD(d);t=typeof t=="function"?t:t===void 0?k9:Ir(+t),e=typeof e=="function"?e:Ir(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?A9:Ir(+n);function d(p){var g,x,b,j=(p=ID(p)).length,S,_=!1,T,C=new Array(j),E=new Array(j);for(s==null&&(l=o(T=c())),g=0;g<=j;++g){if(!(g<j&&i(S=p[g],g,p))===_)if(_=!_)x=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=g-1;b>=x;--b)l.point(C[b],E[b]);l.lineEnd(),l.areaEnd()}_&&(C[g]=+t(S,g,p),E[g]=+e(S,g,p),l.point(a?+a(S,g,p):C[g],n?+n(S,g,p):E[g]))}if(T)return l=null,T+""||null}function f(){return E9().defined(i).curve(o).context(s)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:Ir(+p),a=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Ir(+p),d):t},d.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:Ir(+p),d):a},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:Ir(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Ir(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Ir(+p),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(a).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Ir(!!p),d):i},d.curve=function(p){return arguments.length?(o=p,s!=null&&(l=o(s)),d):o},d.context=function(p){return arguments.length?(p==null?s=l=null:l=o(s=p),d):s},d}class P9{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function dxe(t){return new P9(t,!0)}function hxe(t){return new P9(t,!1)}const RD={draw(t,e){const n=Ho(e/Ow);t.moveTo(n,0),t.arc(0,0,n,0,uS)}},fxe={draw(t,e){const n=Ho(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},O9=Ho(1/3),pxe=O9*2,mxe={draw(t,e){const n=Ho(e/pxe),a=n*O9;t.moveTo(0,-n),t.lineTo(a,0),t.lineTo(0,n),t.lineTo(-a,0),t.closePath()}},gxe={draw(t,e){const n=Ho(e),a=-n/2;t.rect(a,a,n,n)}},yxe=.8908130915292852,D9=Pw(Ow/10)/Pw(7*Ow/10),xxe=Pw(uS/10)*D9,vxe=-_9(uS/10)*D9,bxe={draw(t,e){const n=Ho(e*yxe),a=xxe*n,i=vxe*n;t.moveTo(0,-n),t.lineTo(a,i);for(let s=1;s<5;++s){const o=uS*s/5,l=_9(o),c=Pw(o);t.lineTo(c*n,-l*n),t.lineTo(l*a-c*i,c*a+l*i)}t.closePath()}},W2=Ho(3),jxe={draw(t,e){const n=-Ho(e/(W2*3));t.moveTo(0,n*2),t.lineTo(-W2*n,-n),t.lineTo(W2*n,-n),t.closePath()}},Qs=-.5,Xs=Ho(3)/2,lP=1/Ho(12),wxe=(lP/2+1)*3,Nxe={draw(t,e){const n=Ho(e/wxe),a=n/2,i=n*lP,s=a,o=n*lP+n,l=-s,c=o;t.moveTo(a,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Qs*a-Xs*i,Xs*a+Qs*i),t.lineTo(Qs*s-Xs*o,Xs*s+Qs*o),t.lineTo(Qs*l-Xs*c,Xs*l+Qs*c),t.lineTo(Qs*a+Xs*i,Qs*i-Xs*a),t.lineTo(Qs*s+Xs*o,Qs*o-Xs*s),t.lineTo(Qs*l+Xs*c,Qs*c-Xs*l),t.closePath()}};function Sxe(t,e){let n=null,a=MD(i);t=typeof t=="function"?t:Ir(t||RD),e=typeof e=="function"?e:Ir(e===void 0?64:+e);function i(){let s;if(n||(n=s=a()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Ir(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Ir(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Dw(){}function Mw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function M9(t){this._context=t}M9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _xe(t){return new M9(t)}function I9(t){this._context=t}I9.prototype={areaStart:Dw,areaEnd:Dw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Mw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Cxe(t){return new I9(t)}function R9(t){this._context=t}R9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,a=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Mw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Txe(t){return new R9(t)}function L9(t){this._context=t}L9.prototype={areaStart:Dw,areaEnd:Dw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function kxe(t){return new L9(t)}function P6(t){return t<0?-1:1}function O6(t,e,n){var a=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(a||i<0&&-0),o=(n-t._y1)/(i||a<0&&-0),l=(s*i+o*a)/(a+i);return(P6(s)+P6(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function D6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Y2(t,e,n){var a=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-a)/3;t._context.bezierCurveTo(a+l,i+l*e,s-l,o-l*n,s,o)}function Iw(t){this._context=t}Iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Y2(this,this._t0,D6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Y2(this,D6(this,n=O6(this,t,e)),n);break;default:Y2(this,this._t0,n=O6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function F9(t){this._context=new $9(t)}(F9.prototype=Object.create(Iw.prototype)).point=function(t,e){Iw.prototype.point.call(this,e,t)};function $9(t){this._context=t}$9.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,a,i,s){this._context.bezierCurveTo(e,t,a,n,s,i)}};function Axe(t){return new Iw(t)}function Exe(t){return new F9(t)}function B9(t){this._context=t}B9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var a=M6(t),i=M6(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(a[0][s],i[0][s],a[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function M6(t){var e,n=t.length-1,a,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)a=i[e]/s[e-1],s[e]-=a,o[e]-=a*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Pxe(t){return new B9(t)}function hS(t,e){this._context=t,this._t=e}hS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Oxe(t){return new hS(t,.5)}function Dxe(t){return new hS(t,0)}function Mxe(t){return new hS(t,1)}function sg(t,e){if((o=t.length)>1)for(var n=1,a,i,s=t[e[0]],o,l=s.length;n<o;++n)for(i=s,s=t[e[n]],a=0;a<l;++a)s[a][1]+=s[a][0]=isNaN(i[a][1])?i[a][0]:i[a][1]}function cP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Ixe(t,e){return t[e]}function Rxe(t){const e=[];return e.key=t,e}function Lxe(){var t=Ir([]),e=cP,n=sg,a=Ixe;function i(s){var o=Array.from(t.apply(this,arguments),Rxe),l,c=o.length,d=-1,f;for(const p of s)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(p,o[l].key,d,s)]).data=p;for(l=0,f=ID(e(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Ir(Array.from(s)),i):t},i.value=function(s){return arguments.length?(a=typeof s=="function"?s:Ir(+s),i):a},i.order=function(s){return arguments.length?(e=s==null?cP:typeof s=="function"?s:Ir(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??sg,i):n},i}function Fxe(t,e){if((a=t.length)>0){for(var n,a,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<a;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<a;++n)t[n][i][1]/=o}sg(t,e)}}function $xe(t,e){if((i=t.length)>0){for(var n=0,a=t[e[0]],i,s=a.length;n<s;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;a[n][1]+=a[n][0]=-l/2}sg(t,e)}}function Bxe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,a=1,i,s,o;a<s;++a){for(var l=0,c=0,d=0;l<o;++l){for(var f=t[e[l]],p=f[a][1]||0,g=f[a-1][1]||0,x=(p-g)/2,b=0;b<l;++b){var j=t[e[b]],S=j[a][1]||0,_=j[a-1][1]||0;x+=S-_}c+=p,d+=x*p}i[a-1][1]+=i[a-1][0]=n,c&&(n-=d/c)}i[a-1][1]+=i[a-1][0]=n,sg(t,e)}}function Iv(t){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(t)}var zxe=["type","size","sizeType"];function uP(){return uP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},uP.apply(this,arguments)}function I6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function R6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(n),!0).forEach(function(a){qxe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function qxe(t,e,n){return e=Uxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uxe(t){var e=Vxe(t,"string");return Iv(e)=="symbol"?e:e+""}function Vxe(t,e){if(Iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Iv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hxe(t,e){if(t==null)return{};var n=Gxe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function Gxe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var z9={symbolCircle:RD,symbolCross:fxe,symbolDiamond:mxe,symbolSquare:gxe,symbolStar:bxe,symbolTriangle:jxe,symbolWye:Nxe},Wxe=Math.PI/180,Yxe=function(e){var n="symbol".concat(cS(e));return z9[n]||RD},Kxe=function(e,n,a){if(n==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Wxe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Qxe=function(e,n){z9["symbol".concat(cS(e))]=n},LD=function(e){var n=e.type,a=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=Hxe(e,zxe),d=R6(R6({},c),{},{type:a,size:s,sizeType:l}),f=function(){var S=Yxe(a),_=Sxe().type(S).size(Kxe(s,l,a));return _()},p=d.className,g=d.cx,x=d.cy,b=zt(d,!0);return g===+g&&x===+x&&s===+s?Se.createElement("path",uP({},b,{className:pn("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(x,")"),d:f()})):null};LD.registerSymbol=Qxe;function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}function dP(){return dP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},dP.apply(this,arguments)}function L6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Xxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L6(Object(n),!0).forEach(function(a){Rv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L6(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Jxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zxe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,U9(a.key),a)}}function eve(t,e,n){return e&&Zxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tve(t,e,n){return e=Rw(e),nve(t,q9()?Reflect.construct(e,n||[],Rw(t).constructor):e.apply(t,n))}function nve(t,e){if(e&&(og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rve(t)}function rve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q9=function(){return!!t})()}function Rw(t){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rw(t)}function ave(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hP(t,e)}function hP(t,e){return hP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},hP(t,e)}function Rv(t,e,n){return e=U9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U9(t){var e=ive(t,"string");return og(e)=="symbol"?e:e+""}function ive(t,e){if(og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(og(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Eo=32,FD=function(t){function e(){return Jxe(this,e),tve(this,e,arguments)}return ave(e,t),eve(e,[{key:"renderIcon",value:function(a){var i=this.props.inactiveColor,s=Eo/2,o=Eo/6,l=Eo/3,c=a.inactive?i:a.color;if(a.type==="plainline")return Se.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:s,x2:Eo,y2:s,className:"recharts-legend-icon"});if(a.type==="line")return Se.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Eo,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(a.type==="rect")return Se.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Eo/8,"h").concat(Eo,"v").concat(Eo*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Se.isValidElement(a.legendIcon)){var d=Xxe({},a);return delete d.legendIcon,Se.cloneElement(a.legendIcon,d)}return Se.createElement(LD,{fill:c,cx:s,cy:s,size:Eo,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,f={x:0,y:0,width:Eo,height:Eo},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(x,b){var j=x.formatter||c,S=pn(Rv(Rv({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",x.inactive));if(x.type==="none")return null;var _=an(x.value)?null:x.value;$o(!an(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=x.inactive?d:x.color;return Se.createElement("li",dP({className:S,style:p,key:"legend-item-".concat(b)},Cf(a.props,x,b)),Se.createElement(aP,{width:o,height:o,viewBox:f,style:g},a.renderIcon(x)),Se.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},j?j(_,x,b):_))})}},{key:"render",value:function(){var a=this.props,i=a.payload,s=a.layout,o=a.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Se.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(v.PureComponent);Rv(FD,"displayName","Legend");Rv(FD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var K2,F6;function sve(){if(F6)return K2;F6=1;var t=sS();function e(){this.__data__=new t,this.size=0}return K2=e,K2}var Q2,$6;function ove(){if($6)return Q2;$6=1;function t(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}return Q2=t,Q2}var X2,B6;function lve(){if(B6)return X2;B6=1;function t(e){return this.__data__.get(e)}return X2=t,X2}var J2,z6;function cve(){if(z6)return J2;z6=1;function t(e){return this.__data__.has(e)}return J2=t,J2}var Z2,q6;function uve(){if(q6)return Z2;q6=1;var t=sS(),e=kD(),n=AD(),a=200;function i(s,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<a-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return Z2=i,Z2}var eT,U6;function V9(){if(U6)return eT;U6=1;var t=sS(),e=sve(),n=ove(),a=lve(),i=cve(),s=uve();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=a,o.prototype.has=i,o.prototype.set=s,eT=o,eT}var tT,V6;function dve(){if(V6)return tT;V6=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return tT=e,tT}var nT,H6;function hve(){if(H6)return nT;H6=1;function t(e){return this.__data__.has(e)}return nT=t,nT}var rT,G6;function H9(){if(G6)return rT;G6=1;var t=AD(),e=dve(),n=hve();function a(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return a.prototype.add=a.prototype.push=e,a.prototype.has=n,rT=a,rT}var aT,W6;function G9(){if(W6)return aT;W6=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(e[a],a,e))return!0;return!1}return aT=t,aT}var iT,Y6;function W9(){if(Y6)return iT;Y6=1;function t(e,n){return e.has(n)}return iT=t,iT}var sT,K6;function Y9(){if(K6)return sT;K6=1;var t=H9(),e=G9(),n=W9(),a=1,i=2;function s(o,l,c,d,f,p){var g=c&a,x=o.length,b=l.length;if(x!=b&&!(g&&b>x))return!1;var j=p.get(o),S=p.get(l);if(j&&S)return j==l&&S==o;var _=-1,T=!0,C=c&i?new t:void 0;for(p.set(o,l),p.set(l,o);++_<x;){var E=o[_],k=l[_];if(d)var O=g?d(k,E,_,l,o,p):d(E,k,_,o,l,p);if(O!==void 0){if(O)continue;T=!1;break}if(C){if(!e(l,function(I,F){if(!n(C,F)&&(E===I||f(E,I,c,d,p)))return C.push(F)})){T=!1;break}}else if(!(E===k||f(E,k,c,d,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return sT=s,sT}var oT,Q6;function fve(){if(Q6)return oT;Q6=1;var t=$l(),e=t.Uint8Array;return oT=e,oT}var lT,X6;function pve(){if(X6)return lT;X6=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i,s){a[++n]=[s,i]}),a}return lT=t,lT}var cT,J6;function $D(){if(J6)return cT;J6=1;function t(e){var n=-1,a=Array(e.size);return e.forEach(function(i){a[++n]=i}),a}return cT=t,cT}var uT,Z6;function mve(){if(Z6)return uT;Z6=1;var t=Rb(),e=fve(),n=TD(),a=Y9(),i=pve(),s=$D(),o=1,l=2,c="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",x="[object RegExp]",b="[object Set]",j="[object String]",S="[object Symbol]",_="[object ArrayBuffer]",T="[object DataView]",C=t?t.prototype:void 0,E=C?C.valueOf:void 0;function k(O,I,F,B,$,L,V){switch(F){case T:if(O.byteLength!=I.byteLength||O.byteOffset!=I.byteOffset)return!1;O=O.buffer,I=I.buffer;case _:return!(O.byteLength!=I.byteLength||!L(new e(O),new e(I)));case c:case d:case g:return n(+O,+I);case f:return O.name==I.name&&O.message==I.message;case x:case j:return O==I+"";case p:var H=i;case b:var ne=B&o;if(H||(H=s),O.size!=I.size&&!ne)return!1;var Q=V.get(O);if(Q)return Q==I;B|=l,V.set(O,I);var q=a(H(O),H(I),B,$,L,V);return V.delete(O),q;case S:if(E)return E.call(O)==E.call(I)}return!1}return uT=k,uT}var dT,eL;function K9(){if(eL)return dT;eL=1;function t(e,n){for(var a=-1,i=n.length,s=e.length;++a<i;)e[s+a]=n[a];return e}return dT=t,dT}var hT,tL;function gve(){if(tL)return hT;tL=1;var t=K9(),e=fs();function n(a,i,s){var o=i(a);return e(a)?o:t(o,s(a))}return hT=n,hT}var fT,nL;function yve(){if(nL)return fT;nL=1;function t(e,n){for(var a=-1,i=e==null?0:e.length,s=0,o=[];++a<i;){var l=e[a];n(l,a,e)&&(o[s++]=l)}return o}return fT=t,fT}var pT,rL;function xve(){if(rL)return pT;rL=1;function t(){return[]}return pT=t,pT}var mT,aL;function vve(){if(aL)return mT;aL=1;var t=yve(),e=xve(),n=Object.prototype,a=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return a.call(o,l)}))}:e;return mT=s,mT}var gT,iL;function bve(){if(iL)return gT;iL=1;function t(e,n){for(var a=-1,i=Array(e);++a<e;)i[a]=n(a);return i}return gT=t,gT}var yT,sL;function jve(){if(sL)return yT;sL=1;var t=Hc(),e=Gc(),n="[object Arguments]";function a(i){return e(i)&&t(i)==n}return yT=a,yT}var xT,oL;function BD(){if(oL)return xT;oL=1;var t=jve(),e=Gc(),n=Object.prototype,a=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return e(o)&&a.call(o,"callee")&&!i.call(o,"callee")};return xT=s,xT}var fv={exports:{}},vT,lL;function wve(){if(lL)return vT;lL=1;function t(){return!1}return vT=t,vT}fv.exports;var cL;function Q9(){return cL||(cL=1,function(t,e){var n=$l(),a=wve(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;t.exports=d}(fv,fv.exports)),fv.exports}var bT,uL;function zD(){if(uL)return bT;uL=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(a,i){var s=typeof a;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(a))&&a>-1&&a%1==0&&a<i}return bT=n,bT}var jT,dL;function qD(){if(dL)return jT;dL=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return jT=e,jT}var wT,hL;function Nve(){if(hL)return wT;hL=1;var t=Hc(),e=qD(),n=Gc(),a="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",x="[object Set]",b="[object String]",j="[object WeakMap]",S="[object ArrayBuffer]",_="[object DataView]",T="[object Float32Array]",C="[object Float64Array]",E="[object Int8Array]",k="[object Int16Array]",O="[object Int32Array]",I="[object Uint8Array]",F="[object Uint8ClampedArray]",B="[object Uint16Array]",$="[object Uint32Array]",L={};L[T]=L[C]=L[E]=L[k]=L[O]=L[I]=L[F]=L[B]=L[$]=!0,L[a]=L[i]=L[S]=L[s]=L[_]=L[o]=L[l]=L[c]=L[d]=L[f]=L[p]=L[g]=L[x]=L[b]=L[j]=!1;function V(H){return n(H)&&e(H.length)&&!!L[t(H)]}return wT=V,wT}var NT,fL;function X9(){if(fL)return NT;fL=1;function t(e){return function(n){return e(n)}}return NT=t,NT}var pv={exports:{}};pv.exports;var pL;function Sve(){return pL||(pL=1,function(t,e){var n=g9(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,o=s&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(pv,pv.exports)),pv.exports}var ST,mL;function J9(){if(mL)return ST;mL=1;var t=Nve(),e=X9(),n=Sve(),a=n&&n.isTypedArray,i=a?e(a):t;return ST=i,ST}var _T,gL;function _ve(){if(gL)return _T;gL=1;var t=bve(),e=BD(),n=fs(),a=Q9(),i=zD(),s=J9(),o=Object.prototype,l=o.hasOwnProperty;function c(d,f){var p=n(d),g=!p&&e(d),x=!p&&!g&&a(d),b=!p&&!g&&!x&&s(d),j=p||g||x||b,S=j?t(d.length,String):[],_=S.length;for(var T in d)(f||l.call(d,T))&&!(j&&(T=="length"||x&&(T=="offset"||T=="parent")||b&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,_)))&&S.push(T);return S}return _T=c,_T}var CT,yL;function Cve(){if(yL)return CT;yL=1;var t=Object.prototype;function e(n){var a=n&&n.constructor,i=typeof a=="function"&&a.prototype||t;return n===i}return CT=e,CT}var TT,xL;function Z9(){if(xL)return TT;xL=1;function t(e,n){return function(a){return e(n(a))}}return TT=t,TT}var kT,vL;function Tve(){if(vL)return kT;vL=1;var t=Z9(),e=t(Object.keys,Object);return kT=e,kT}var AT,bL;function kve(){if(bL)return AT;bL=1;var t=Cve(),e=Tve(),n=Object.prototype,a=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))a.call(s,l)&&l!="constructor"&&o.push(l);return o}return AT=i,AT}var ET,jL;function Lb(){if(jL)return ET;jL=1;var t=CD(),e=qD();function n(a){return a!=null&&e(a.length)&&!t(a)}return ET=n,ET}var PT,wL;function fS(){if(wL)return PT;wL=1;var t=_ve(),e=kve(),n=Lb();function a(i){return n(i)?t(i):e(i)}return PT=a,PT}var OT,NL;function Ave(){if(NL)return OT;NL=1;var t=gve(),e=vve(),n=fS();function a(i){return t(i,n,e)}return OT=a,OT}var DT,SL;function Eve(){if(SL)return DT;SL=1;var t=Ave(),e=1,n=Object.prototype,a=n.hasOwnProperty;function i(s,o,l,c,d,f){var p=l&e,g=t(s),x=g.length,b=t(o),j=b.length;if(x!=j&&!p)return!1;for(var S=x;S--;){var _=g[S];if(!(p?_ in o:a.call(o,_)))return!1}var T=f.get(s),C=f.get(o);if(T&&C)return T==o&&C==s;var E=!0;f.set(s,o),f.set(o,s);for(var k=p;++S<x;){_=g[S];var O=s[_],I=o[_];if(c)var F=p?c(I,O,_,o,s,f):c(O,I,_,s,o,f);if(!(F===void 0?O===I||d(O,I,l,c,f):F)){E=!1;break}k||(k=_=="constructor")}if(E&&!k){var B=s.constructor,$=o.constructor;B!=$&&"constructor"in s&&"constructor"in o&&!(typeof B=="function"&&B instanceof B&&typeof $=="function"&&$ instanceof $)&&(E=!1)}return f.delete(s),f.delete(o),E}return DT=i,DT}var MT,_L;function Pve(){if(_L)return MT;_L=1;var t=Mf(),e=$l(),n=t(e,"DataView");return MT=n,MT}var IT,CL;function Ove(){if(CL)return IT;CL=1;var t=Mf(),e=$l(),n=t(e,"Promise");return IT=n,IT}var RT,TL;function e7(){if(TL)return RT;TL=1;var t=Mf(),e=$l(),n=t(e,"Set");return RT=n,RT}var LT,kL;function Dve(){if(kL)return LT;kL=1;var t=Mf(),e=$l(),n=t(e,"WeakMap");return LT=n,LT}var FT,AL;function Mve(){if(AL)return FT;AL=1;var t=Pve(),e=kD(),n=Ove(),a=e7(),i=Dve(),s=Hc(),o=y9(),l="[object Map]",c="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",x=o(t),b=o(e),j=o(n),S=o(a),_=o(i),T=s;return(t&&T(new t(new ArrayBuffer(1)))!=g||e&&T(new e)!=l||n&&T(n.resolve())!=d||a&&T(new a)!=f||i&&T(new i)!=p)&&(T=function(C){var E=s(C),k=E==c?C.constructor:void 0,O=k?o(k):"";if(O)switch(O){case x:return g;case b:return l;case j:return d;case S:return f;case _:return p}return E}),FT=T,FT}var $T,EL;function Ive(){if(EL)return $T;EL=1;var t=V9(),e=Y9(),n=mve(),a=Eve(),i=Mve(),s=fs(),o=Q9(),l=J9(),c=1,d="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function b(j,S,_,T,C,E){var k=s(j),O=s(S),I=k?f:i(j),F=O?f:i(S);I=I==d?p:I,F=F==d?p:F;var B=I==p,$=F==p,L=I==F;if(L&&o(j)){if(!o(S))return!1;k=!0,B=!1}if(L&&!B)return E||(E=new t),k||l(j)?e(j,S,_,T,C,E):n(j,S,I,_,T,C,E);if(!(_&c)){var V=B&&x.call(j,"__wrapped__"),H=$&&x.call(S,"__wrapped__");if(V||H){var ne=V?j.value():j,Q=H?S.value():S;return E||(E=new t),C(ne,Q,_,T,E)}}return L?(E||(E=new t),a(j,S,_,T,C,E)):!1}return $T=b,$T}var BT,PL;function UD(){if(PL)return BT;PL=1;var t=Ive(),e=Gc();function n(a,i,s,o,l){return a===i?!0:a==null||i==null||!e(a)&&!e(i)?a!==a&&i!==i:t(a,i,s,o,n,l)}return BT=n,BT}var zT,OL;function Rve(){if(OL)return zT;OL=1;var t=V9(),e=UD(),n=1,a=2;function i(s,o,l,c){var d=l.length,f=d,p=!c;if(s==null)return!f;for(s=Object(s);d--;){var g=l[d];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++d<f;){g=l[d];var x=g[0],b=s[x],j=g[1];if(p&&g[2]){if(b===void 0&&!(x in s))return!1}else{var S=new t;if(c)var _=c(b,j,x,s,o,S);if(!(_===void 0?e(j,b,n|a,c,S):_))return!1}}return!0}return zT=i,zT}var qT,DL;function t7(){if(DL)return qT;DL=1;var t=bd();function e(n){return n===n&&!t(n)}return qT=e,qT}var UT,ML;function Lve(){if(ML)return UT;ML=1;var t=t7(),e=fS();function n(a){for(var i=e(a),s=i.length;s--;){var o=i[s],l=a[o];i[s]=[o,l,t(l)]}return i}return UT=n,UT}var VT,IL;function n7(){if(IL)return VT;IL=1;function t(e,n){return function(a){return a==null?!1:a[e]===n&&(n!==void 0||e in Object(a))}}return VT=t,VT}var HT,RL;function Fve(){if(RL)return HT;RL=1;var t=Rve(),e=Lve(),n=n7();function a(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return HT=a,HT}var GT,LL;function $ve(){if(LL)return GT;LL=1;function t(e,n){return e!=null&&n in Object(e)}return GT=t,GT}var WT,FL;function Bve(){if(FL)return WT;FL=1;var t=b9(),e=BD(),n=fs(),a=zD(),i=qD(),s=lS();function o(l,c,d){c=t(c,l);for(var f=-1,p=c.length,g=!1;++f<p;){var x=s(c[f]);if(!(g=l!=null&&d(l,x)))break;l=l[x]}return g||++f!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&a(x,p)&&(n(l)||e(l)))}return WT=o,WT}var YT,$L;function zve(){if($L)return YT;$L=1;var t=$ve(),e=Bve();function n(a,i){return a!=null&&e(a,i,t)}return YT=n,YT}var KT,BL;function qve(){if(BL)return KT;BL=1;var t=UD(),e=j9(),n=zve(),a=_D(),i=t7(),s=n7(),o=lS(),l=1,c=2;function d(f,p){return a(f)&&i(p)?s(o(f),p):function(g){var x=e(g,f);return x===void 0&&x===p?n(g,f):t(p,x,l|c)}}return KT=d,KT}var QT,zL;function Ug(){if(zL)return QT;zL=1;function t(e){return e}return QT=t,QT}var XT,qL;function Uve(){if(qL)return XT;qL=1;function t(e){return function(n){return n==null?void 0:n[e]}}return XT=t,XT}var JT,UL;function Vve(){if(UL)return JT;UL=1;var t=PD();function e(n){return function(a){return t(a,n)}}return JT=e,JT}var ZT,VL;function Hve(){if(VL)return ZT;VL=1;var t=Uve(),e=Vve(),n=_D(),a=lS();function i(s){return n(s)?t(a(s)):e(s)}return ZT=i,ZT}var ek,HL;function Bl(){if(HL)return ek;HL=1;var t=Fve(),e=qve(),n=Ug(),a=fs(),i=Hve();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?a(o)?e(o[0],o[1]):t(o):i(o)}return ek=s,ek}var tk,GL;function r7(){if(GL)return tk;GL=1;function t(e,n,a,i){for(var s=e.length,o=a+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return tk=t,tk}var nk,WL;function Gve(){if(WL)return nk;WL=1;function t(e){return e!==e}return nk=t,nk}var rk,YL;function Wve(){if(YL)return rk;YL=1;function t(e,n,a){for(var i=a-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return rk=t,rk}var ak,KL;function Yve(){if(KL)return ak;KL=1;var t=r7(),e=Gve(),n=Wve();function a(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return ak=a,ak}var ik,QL;function Kve(){if(QL)return ik;QL=1;var t=Yve();function e(n,a){var i=n==null?0:n.length;return!!i&&t(n,a,0)>-1}return ik=e,ik}var sk,XL;function Qve(){if(XL)return sk;XL=1;function t(e,n,a){for(var i=-1,s=e==null?0:e.length;++i<s;)if(a(n,e[i]))return!0;return!1}return sk=t,sk}var ok,JL;function Xve(){if(JL)return ok;JL=1;function t(){}return ok=t,ok}var lk,ZL;function Jve(){if(ZL)return lk;ZL=1;var t=e7(),e=Xve(),n=$D(),a=1/0,i=t&&1/n(new t([,-0]))[1]==a?function(s){return new t(s)}:e;return lk=i,lk}var ck,e5;function Zve(){if(e5)return ck;e5=1;var t=H9(),e=Kve(),n=Qve(),a=W9(),i=Jve(),s=$D(),o=200;function l(c,d,f){var p=-1,g=e,x=c.length,b=!0,j=[],S=j;if(f)b=!1,g=n;else if(x>=o){var _=d?null:i(c);if(_)return s(_);b=!1,g=a,S=new t}else S=d?[]:j;e:for(;++p<x;){var T=c[p],C=d?d(T):T;if(T=f||T!==0?T:0,b&&C===C){for(var E=S.length;E--;)if(S[E]===C)continue e;d&&S.push(C),j.push(T)}else g(S,C,f)||(S!==j&&S.push(C),j.push(T))}return j}return ck=l,ck}var uk,t5;function ebe(){if(t5)return uk;t5=1;var t=Bl(),e=Zve();function n(a,i){return a&&a.length?e(a,t(i,2)):[]}return uk=n,uk}var tbe=ebe();const n5=Wn(tbe);function a7(t,e,n){return e===!0?n5(t,n):an(e)?n5(t,e):t}function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}var nbe=["ref"];function r5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function pc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r5(Object(n),!0).forEach(function(a){pS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function rbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a5(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,s7(a.key),a)}}function abe(t,e,n){return e&&a5(t.prototype,e),n&&a5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ibe(t,e,n){return e=Lw(e),sbe(t,i7()?Reflect.construct(e,n||[],Lw(t).constructor):e.apply(t,n))}function sbe(t,e){if(e&&(lg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return obe(t)}function obe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i7=function(){return!!t})()}function Lw(t){return Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lw(t)}function lbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fP(t,e)}function fP(t,e){return fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},fP(t,e)}function pS(t,e,n){return e=s7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s7(t){var e=cbe(t,"string");return lg(e)=="symbol"?e:e+""}function cbe(t,e){if(lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(lg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ube(t,e){if(t==null)return{};var n=dbe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function dbe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function hbe(t){return t.value}function fbe(t,e){if(Se.isValidElement(t))return Se.cloneElement(t,e);if(typeof t=="function")return Se.createElement(t,e);e.ref;var n=ube(e,nbe);return Se.createElement(FD,n)}var i5=1,Ac=function(t){function e(){var n;rbe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=ibe(this,e,[].concat(i)),pS(n,"lastBoundingBox",{width:-1,height:-1}),n}return lbe(e,t),abe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>i5||Math.abs(i.height-this.lastBoundingBox.height)>i5)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,a&&a(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?pc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,f=i.chartHeight,p,g;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&s==="vertical"){var x=this.getBBoxSnapshot();p={left:((d||0)-x.width)/2}}else p=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();g={top:((f||0)-b.height)/2}}else g=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return pc(pc({},p),g)}},{key:"render",value:function(){var a=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,f=i.payload,p=pc(pc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Se.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){a.wrapperNode=x}},fbe(s,pc(pc({},this.props),{},{payload:a7(f,d,hbe)})))}}],[{key:"getWithHeight",value:function(a,i){var s=pc(pc({},this.defaultProps),a.props),o=s.layout;return o==="vertical"&&Nt(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||i}:null}}])}(v.PureComponent);pS(Ac,"displayName","Legend");pS(Ac,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var dk,s5;function pbe(){if(s5)return dk;s5=1;var t=Rb(),e=BD(),n=fs(),a=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(a&&s&&s[a])}return dk=i,dk}var hk,o5;function o7(){if(o5)return hk;o5=1;var t=K9(),e=pbe();function n(a,i,s,o,l){var c=-1,d=a.length;for(s||(s=e),l||(l=[]);++c<d;){var f=a[c];i>0&&s(f)?i>1?n(f,i-1,s,o,l):t(l,f):o||(l[l.length]=f)}return l}return hk=n,hk}var fk,l5;function mbe(){if(l5)return fk;l5=1;function t(e){return function(n,a,i){for(var s=-1,o=Object(n),l=i(n),c=l.length;c--;){var d=l[e?c:++s];if(a(o[d],d,o)===!1)break}return n}}return fk=t,fk}var pk,c5;function gbe(){if(c5)return pk;c5=1;var t=mbe(),e=t();return pk=e,pk}var mk,u5;function l7(){if(u5)return mk;u5=1;var t=gbe(),e=fS();function n(a,i){return a&&t(a,i,e)}return mk=n,mk}var gk,d5;function ybe(){if(d5)return gk;d5=1;var t=Lb();function e(n,a){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var o=i.length,l=a?o:-1,c=Object(i);(a?l--:++l<o)&&s(c[l],l,c)!==!1;);return i}}return gk=e,gk}var yk,h5;function VD(){if(h5)return yk;h5=1;var t=l7(),e=ybe(),n=e(t);return yk=n,yk}var xk,f5;function c7(){if(f5)return xk;f5=1;var t=VD(),e=Lb();function n(a,i){var s=-1,o=e(a)?Array(a.length):[];return t(a,function(l,c,d){o[++s]=i(l,c,d)}),o}return xk=n,xk}var vk,p5;function xbe(){if(p5)return vk;p5=1;function t(e,n){var a=e.length;for(e.sort(n);a--;)e[a]=e[a].value;return e}return vk=t,vk}var bk,m5;function vbe(){if(m5)return bk;m5=1;var t=Bg();function e(n,a){if(n!==a){var i=n!==void 0,s=n===null,o=n===n,l=t(n),c=a!==void 0,d=a===null,f=a===a,p=t(a);if(!d&&!p&&!l&&n>a||l&&c&&f&&!d&&!p||s&&c&&f||!i&&f||!o)return 1;if(!s&&!l&&!p&&n<a||p&&i&&o&&!s&&!l||d&&i&&o||!c&&o||!f)return-1}return 0}return bk=e,bk}var jk,g5;function bbe(){if(g5)return jk;g5=1;var t=vbe();function e(n,a,i){for(var s=-1,o=n.criteria,l=a.criteria,c=o.length,d=i.length;++s<c;){var f=t(o[s],l[s]);if(f){if(s>=d)return f;var p=i[s];return f*(p=="desc"?-1:1)}}return n.index-a.index}return jk=e,jk}var wk,y5;function jbe(){if(y5)return wk;y5=1;var t=ED(),e=PD(),n=Bl(),a=c7(),i=xbe(),s=X9(),o=bbe(),l=Ug(),c=fs();function d(f,p,g){p.length?p=t(p,function(j){return c(j)?function(S){return e(S,j.length===1?j[0]:j)}:j}):p=[l];var x=-1;p=t(p,s(n));var b=a(f,function(j,S,_){var T=t(p,function(C){return C(j)});return{criteria:T,index:++x,value:j}});return i(b,function(j,S){return o(j,S,g)})}return wk=d,wk}var Nk,x5;function wbe(){if(x5)return Nk;x5=1;function t(e,n,a){switch(a.length){case 0:return e.call(n);case 1:return e.call(n,a[0]);case 2:return e.call(n,a[0],a[1]);case 3:return e.call(n,a[0],a[1],a[2])}return e.apply(n,a)}return Nk=t,Nk}var Sk,v5;function Nbe(){if(v5)return Sk;v5=1;var t=wbe(),e=Math.max;function n(a,i,s){return i=e(i===void 0?a.length-1:i,0),function(){for(var o=arguments,l=-1,c=e(o.length-i,0),d=Array(c);++l<c;)d[l]=o[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=o[l];return f[i]=s(d),t(a,this,f)}}return Sk=n,Sk}var _k,b5;function Sbe(){if(b5)return _k;b5=1;function t(e){return function(){return e}}return _k=t,_k}var Ck,j5;function u7(){if(j5)return Ck;j5=1;var t=Mf(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Ck=e,Ck}var Tk,w5;function _be(){if(w5)return Tk;w5=1;var t=Sbe(),e=u7(),n=Ug(),a=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return Tk=a,Tk}var kk,N5;function Cbe(){if(N5)return kk;N5=1;var t=800,e=16,n=Date.now;function a(i){var s=0,o=0;return function(){var l=n(),c=e-(l-o);if(o=l,c>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return kk=a,kk}var Ak,S5;function Tbe(){if(S5)return Ak;S5=1;var t=_be(),e=Cbe(),n=e(t);return Ak=n,Ak}var Ek,_5;function kbe(){if(_5)return Ek;_5=1;var t=Ug(),e=Nbe(),n=Tbe();function a(i,s){return n(e(i,s,t),i+"")}return Ek=a,Ek}var Pk,C5;function mS(){if(C5)return Pk;C5=1;var t=TD(),e=Lb(),n=zD(),a=bd();function i(s,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?e(l)&&n(o,l.length):c=="string"&&o in l)?t(l[o],s):!1}return Pk=i,Pk}var Ok,T5;function Abe(){if(T5)return Ok;T5=1;var t=o7(),e=jbe(),n=kbe(),a=mS(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&a(s,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return Ok=i,Ok}var Ebe=Abe();const HD=Wn(Ebe);function Lv(t){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(t)}function pP(){return pP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pP.apply(this,arguments)}function Pbe(t,e){return Ibe(t)||Mbe(t,e)||Dbe(t,e)||Obe()}function Obe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dbe(t,e){if(t){if(typeof t=="string")return k5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k5(t,e)}}function k5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Mbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Ibe(t){if(Array.isArray(t))return t}function A5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Dk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A5(Object(n),!0).forEach(function(a){Rbe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Rbe(t,e,n){return e=Lbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lbe(t){var e=Fbe(t,"string");return Lv(e)=="symbol"?e:e+""}function Fbe(t,e){if(Lv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Lv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $be(t){return Array.isArray(t)&&Ca(t[0])&&Ca(t[1])?t.join(" ~ "):t}var Bbe=function(e){var n=e.separator,a=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,f=e.payload,p=e.formatter,g=e.itemSorter,x=e.wrapperClassName,b=e.labelClassName,j=e.label,S=e.labelFormatter,_=e.accessibilityLayer,T=_===void 0?!1:_,C=function(){if(f&&f.length){var V={padding:0,margin:0},H=(g?HD(f,g):f).map(function(ne,Q){if(ne.type==="none")return null;var q=Dk({display:"block",paddingTop:4,paddingBottom:4,color:ne.color||"#000"},l),G=ne.formatter||p||$be,ie=ne.value,W=ne.name,z=ie,ce=W;if(G&&z!=null&&ce!=null){var je=G(ie,W,ne,Q,f);if(Array.isArray(je)){var Y=Pbe(je,2);z=Y[0],ce=Y[1]}else z=je}return Se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Q),style:q},Ca(ce)?Se.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Ca(ce)?Se.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,Se.createElement("span",{className:"recharts-tooltip-item-value"},z),Se.createElement("span",{className:"recharts-tooltip-item-unit"},ne.unit||""))});return Se.createElement("ul",{className:"recharts-tooltip-item-list",style:V},H)}return null},E=Dk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=Dk({margin:0},d),O=!hn(j),I=O?j:"",F=pn("recharts-default-tooltip",x),B=pn("recharts-tooltip-label",b);O&&S&&f!==void 0&&f!==null&&(I=S(j,f));var $=T?{role:"status","aria-live":"assertive"}:{};return Se.createElement("div",pP({className:F,style:E},$),Se.createElement("p",{className:B,style:k},Se.isValidElement(I)?I:"".concat(I)),C())};function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function kj(t,e,n){return e=zbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zbe(t){var e=qbe(t,"string");return Fv(e)=="symbol"?e:e+""}function qbe(t,e){if(Fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Fv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kx="recharts-tooltip-wrapper",Ube={visibility:"hidden"};function Vbe(t){var e=t.coordinate,n=t.translateX,a=t.translateY;return pn(Kx,kj(kj(kj(kj({},"".concat(Kx,"-right"),Nt(n)&&e&&Nt(e.x)&&n>=e.x),"".concat(Kx,"-left"),Nt(n)&&e&&Nt(e.x)&&n<e.x),"".concat(Kx,"-bottom"),Nt(a)&&e&&Nt(e.y)&&a>=e.y),"".concat(Kx,"-top"),Nt(a)&&e&&Nt(e.y)&&a<e.y))}function E5(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(s&&Nt(s[a]))return s[a];var f=n[a]-l-i,p=n[a]+i;if(e[a])return o[a]?f:p;if(o[a]){var g=f,x=c[a];return g<x?Math.max(p,c[a]):Math.max(f,c[a])}var b=p+l,j=c[a]+d;return b>j?Math.max(f,c[a]):Math.max(p,c[a])}function Hbe(t){var e=t.translateX,n=t.translateY,a=t.useTranslate3d;return{transform:a?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Gbe(t){var e=t.allowEscapeViewBox,n=t.coordinate,a=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,f,p;return o.height>0&&o.width>0&&n?(f=E5({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=E5({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:a,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Hbe({translateX:f,translateY:p,useTranslate3d:l})):d=Ube,{cssProperties:d,cssClasses:Vbe({translateX:f,translateY:p,coordinate:n})}}function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}function P5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function O5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P5(Object(n),!0).forEach(function(a){gP(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Wbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ybe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,h7(a.key),a)}}function Kbe(t,e,n){return e&&Ybe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qbe(t,e,n){return e=Fw(e),Xbe(t,d7()?Reflect.construct(e,n||[],Fw(t).constructor):e.apply(t,n))}function Xbe(t,e){if(e&&(cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jbe(t)}function Jbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d7=function(){return!!t})()}function Fw(t){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fw(t)}function Zbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mP(t,e)}function mP(t,e){return mP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},mP(t,e)}function gP(t,e,n){return e=h7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h7(t){var e=e0e(t,"string");return cg(e)=="symbol"?e:e+""}function e0e(t,e){if(cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var D5=1,t0e=function(t){function e(){var n;Wbe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=Qbe(this,e,[].concat(i)),gP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),gP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),n}return Zbe(e,t),Kbe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>D5||Math.abs(a.height-this.state.lastBoundingBox.height)>D5)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,f=i.coordinate,p=i.hasPayload,g=i.isAnimationActive,x=i.offset,b=i.position,j=i.reverseDirection,S=i.useTranslate3d,_=i.viewBox,T=i.wrapperStyle,C=Gbe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:x,position:b,reverseDirection:j,tooltipBox:this.state.lastBoundingBox,useTranslate3d:S,viewBox:_}),E=C.cssClasses,k=C.cssProperties,O=O5(O5({transition:g&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},T);return Se.createElement("div",{tabIndex:-1,className:E,style:O,ref:function(F){a.wrapperNode=F}},d)}}])}(v.PureComponent),n0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},jd={isSsr:n0e()};function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function M5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function I5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M5(Object(n),!0).forEach(function(a){GD(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function r0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a0e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,p7(a.key),a)}}function i0e(t,e,n){return e&&a0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function s0e(t,e,n){return e=$w(e),o0e(t,f7()?Reflect.construct(e,n||[],$w(t).constructor):e.apply(t,n))}function o0e(t,e){if(e&&(ug(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l0e(t)}function l0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f7=function(){return!!t})()}function $w(t){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$w(t)}function c0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yP(t,e)}function yP(t,e){return yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},yP(t,e)}function GD(t,e,n){return e=p7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p7(t){var e=u0e(t,"string");return ug(e)=="symbol"?e:e+""}function u0e(t,e){if(ug(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ug(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function d0e(t){return t.dataKey}function h0e(t,e){return Se.isValidElement(t)?Se.cloneElement(t,e):typeof t=="function"?Se.createElement(t,e):Se.createElement(Bbe,e)}var Mi=function(t){function e(){return r0e(this,e),s0e(this,e,arguments)}return c0e(e,t),i0e(e,[{key:"render",value:function(){var a=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,f=i.coordinate,p=i.filterNull,g=i.isAnimationActive,x=i.offset,b=i.payload,j=i.payloadUniqBy,S=i.position,_=i.reverseDirection,T=i.useTranslate3d,C=i.viewBox,E=i.wrapperStyle,k=b??[];p&&k.length&&(k=a7(b.filter(function(I){return I.value!=null&&(I.hide!==!0||a.props.includeHidden)}),j,d0e));var O=k.length>0;return Se.createElement(t0e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:g,active:s,coordinate:f,hasPayload:O,offset:x,position:S,reverseDirection:_,useTranslate3d:T,viewBox:C,wrapperStyle:E},h0e(d,I5(I5({},this.props),{},{payload:k})))}}])}(v.PureComponent);GD(Mi,"displayName","Tooltip");GD(Mi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Mk,R5;function f0e(){if(R5)return Mk;R5=1;var t=$l(),e=function(){return t.Date.now()};return Mk=e,Mk}var Ik,L5;function p0e(){if(L5)return Ik;L5=1;var t=/\s/;function e(n){for(var a=n.length;a--&&t.test(n.charAt(a)););return a}return Ik=e,Ik}var Rk,F5;function m0e(){if(F5)return Rk;F5=1;var t=p0e(),e=/^\s+/;function n(a){return a&&a.slice(0,t(a)+1).replace(e,"")}return Rk=n,Rk}var Lk,$5;function m7(){if($5)return Lk;$5=1;var t=m0e(),e=bd(),n=Bg(),a=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(n(d))return a;if(e(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=e(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=t(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?a:+d}return Lk=c,Lk}var Fk,B5;function g0e(){if(B5)return Fk;B5=1;var t=bd(),e=f0e(),n=m7(),a="Expected a function",i=Math.max,s=Math.min;function o(l,c,d){var f,p,g,x,b,j,S=0,_=!1,T=!1,C=!0;if(typeof l!="function")throw new TypeError(a);c=n(c)||0,t(d)&&(_=!!d.leading,T="maxWait"in d,g=T?i(n(d.maxWait)||0,c):g,C="trailing"in d?!!d.trailing:C);function E(H){var ne=f,Q=p;return f=p=void 0,S=H,x=l.apply(Q,ne),x}function k(H){return S=H,b=setTimeout(F,c),_?E(H):x}function O(H){var ne=H-j,Q=H-S,q=c-ne;return T?s(q,g-Q):q}function I(H){var ne=H-j,Q=H-S;return j===void 0||ne>=c||ne<0||T&&Q>=g}function F(){var H=e();if(I(H))return B(H);b=setTimeout(F,O(H))}function B(H){return b=void 0,C&&f?E(H):(f=p=void 0,x)}function $(){b!==void 0&&clearTimeout(b),S=0,f=j=p=b=void 0}function L(){return b===void 0?x:B(e())}function V(){var H=e(),ne=I(H);if(f=arguments,p=this,j=H,ne){if(b===void 0)return k(j);if(T)return clearTimeout(b),b=setTimeout(F,c),E(j)}return b===void 0&&(b=setTimeout(F,c)),x}return V.cancel=$,V.flush=L,V}return Fk=o,Fk}var $k,z5;function y0e(){if(z5)return $k;z5=1;var t=g0e(),e=bd(),n="Expected a function";function a(i,s,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(i,s,{leading:l,maxWait:s,trailing:c})}return $k=a,$k}var x0e=y0e();const g7=Wn(x0e);function $v(t){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(t)}function q5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Aj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q5(Object(n),!0).forEach(function(a){v0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function v0e(t,e,n){return e=b0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b0e(t){var e=j0e(t,"string");return $v(e)=="symbol"?e:e+""}function j0e(t,e){if($v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if($v(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w0e(t,e){return C0e(t)||_0e(t,e)||S0e(t,e)||N0e()}function N0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S0e(t,e){if(t){if(typeof t=="string")return U5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U5(t,e)}}function U5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function C0e(t){if(Array.isArray(t))return t}var aw=v.forwardRef(function(t,e){var n=t.aspect,a=t.initialDimension,i=a===void 0?{width:-1,height:-1}:a,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,f=d===void 0?0:d,p=t.minHeight,g=t.maxHeight,x=t.children,b=t.debounce,j=b===void 0?0:b,S=t.id,_=t.className,T=t.onResize,C=t.style,E=C===void 0?{}:C,k=v.useRef(null),O=v.useRef();O.current=T,v.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var I=v.useState({containerWidth:i.width,containerHeight:i.height}),F=w0e(I,2),B=F[0],$=F[1],L=v.useCallback(function(H,ne){$(function(Q){var q=Math.round(H),G=Math.round(ne);return Q.containerWidth===q&&Q.containerHeight===G?Q:{containerWidth:q,containerHeight:G}})},[]);v.useEffect(function(){var H=function(W){var z,ce=W[0].contentRect,je=ce.width,Y=ce.height;L(je,Y),(z=O.current)===null||z===void 0||z.call(O,je,Y)};j>0&&(H=g7(H,j,{trailing:!0,leading:!1}));var ne=new ResizeObserver(H),Q=k.current.getBoundingClientRect(),q=Q.width,G=Q.height;return L(q,G),ne.observe(k.current),function(){ne.disconnect()}},[L,j]);var V=v.useMemo(function(){var H=B.containerWidth,ne=B.containerHeight;if(H<0||ne<0)return null;$o(Xh(o)||Xh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),$o(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Q=Xh(o)?H:o,q=Xh(c)?ne:c;n&&n>0&&(Q?q=Q/n:q&&(Q=q*n),g&&q>g&&(q=g)),$o(Q>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Q,q,o,c,f,p,n);var G=!Array.isArray(x)&&kc(x.type).endsWith("Chart");return Se.Children.map(x,function(ie){return Se.isValidElement(ie)?v.cloneElement(ie,Aj({width:Q,height:q},G?{style:Aj({height:"100%",width:"100%",maxHeight:q,maxWidth:Q},ie.props.style)}:{})):ie})},[n,x,c,g,p,f,B,o]);return Se.createElement("div",{id:S?"".concat(S):void 0,className:pn("recharts-responsive-container",_),style:Aj(Aj({},E),{},{width:o,height:c,minWidth:f,minHeight:p,maxHeight:g}),ref:k},V)}),Fb=function(e){return null};Fb.displayName="Cell";function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function V5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function xP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V5(Object(n),!0).forEach(function(a){T0e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V5(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function T0e(t,e,n){return e=k0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k0e(t){var e=A0e(t,"string");return Bv(e)=="symbol"?e:e+""}function A0e(t,e){if(Bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Bv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vm={widthCache:{},cacheCount:0},E0e=2e3,P0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},H5="recharts_measurement_span";function O0e(t){var e=xP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var bv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||jd.isSsr)return{width:0,height:0};var a=O0e(n),i=JSON.stringify({text:e,copyStyle:a});if(vm.widthCache[i])return vm.widthCache[i];try{var s=document.getElementById(H5);s||(s=document.createElement("span"),s.setAttribute("id",H5),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=xP(xP({},P0e),a);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return vm.widthCache[i]=c,++vm.cacheCount>E0e&&(vm.cacheCount=0,vm.widthCache={}),c}catch{return{width:0,height:0}}},D0e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function Bw(t,e){return L0e(t)||R0e(t,e)||I0e(t,e)||M0e()}function M0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I0e(t,e){if(t){if(typeof t=="string")return G5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G5(t,e)}}function G5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function R0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function L0e(t){if(Array.isArray(t))return t}function F0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W5(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,B0e(a.key),a)}}function $0e(t,e,n){return e&&W5(t.prototype,e),n&&W5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function B0e(t){var e=z0e(t,"string");return zv(e)=="symbol"?e:e+""}function z0e(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(zv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Y5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,K5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,q0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,U0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,y7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},V0e=Object.keys(y7),Am="NaN";function H0e(t,e){return t*y7[e]}var Ej=function(){function t(e,n){F0e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!q0e.test(n)&&(this.num=NaN,this.unit=""),V0e.includes(n)&&(this.num=H0e(e,n),this.unit="px")}return $0e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,i=(a=U0e.exec(n))!==null&&a!==void 0?a:[],s=Bw(i,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function x7(t){if(t.includes(Am))return Am;for(var e=t;e.includes("*")||e.includes("/");){var n,a=(n=Y5.exec(e))!==null&&n!==void 0?n:[],i=Bw(a,4),s=i[1],o=i[2],l=i[3],c=Ej.parse(s??""),d=Ej.parse(l??""),f=o==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return Am;e=e.replace(Y5,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,g=(p=K5.exec(e))!==null&&p!==void 0?p:[],x=Bw(g,4),b=x[1],j=x[2],S=x[3],_=Ej.parse(b??""),T=Ej.parse(S??""),C=j==="+"?_.add(T):_.subtract(T);if(C.isNaN())return Am;e=e.replace(K5,C.toString())}return e}var Q5=/\(([^()]*)\)/;function G0e(t){for(var e=t;e.includes("(");){var n=Q5.exec(e),a=Bw(n,2),i=a[1];e=e.replace(Q5,x7(i))}return e}function W0e(t){var e=t.replace(/\s+/g,"");return e=G0e(e),e=x7(e),e}function Y0e(t){try{return W0e(t)}catch{return Am}}function Bk(t){var e=Y0e(t.slice(5,-1));return e===Am?"":e}var K0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Q0e=["dx","dy","angle","className","breakAll"];function vP(){return vP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},vP.apply(this,arguments)}function X5(t,e){if(t==null)return{};var n=X0e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function X0e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function J5(t,e){return t1e(t)||e1e(t,e)||Z0e(t,e)||J0e()}function J0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z0e(t,e){if(t){if(typeof t=="string")return Z5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z5(t,e)}}function Z5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function e1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function t1e(t){if(Array.isArray(t))return t}var v7=/[ \f\n\r\t\v\u2028\u2029]+/,b7=function(e){var n=e.children,a=e.breakAll,i=e.style;try{var s=[];hn(n)||(a?s=n.toString().split(""):s=n.toString().split(v7));var o=s.map(function(c){return{word:c,width:bv(c,i).width}}),l=a?0:bv("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},n1e=function(e,n,a,i,s){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,f=Nt(o),p=l,g=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Q.reduce(function(q,G){var ie=G.word,W=G.width,z=q[q.length-1];if(z&&(i==null||s||z.width+W+a<Number(i)))z.words.push(ie),z.width+=W+a;else{var ce={words:[ie],width:W};q.push(ce)}return q},[])},x=g(n),b=function(Q){return Q.reduce(function(q,G){return q.width>G.width?q:G})};if(!f)return x;for(var j="",S=function(Q){var q=p.slice(0,Q),G=b7({breakAll:d,style:c,children:q+j}).wordsWithComputedWidth,ie=g(G),W=ie.length>o||b(ie).width>Number(i);return[W,ie]},_=0,T=p.length-1,C=0,E;_<=T&&C<=p.length-1;){var k=Math.floor((_+T)/2),O=k-1,I=S(O),F=J5(I,2),B=F[0],$=F[1],L=S(k),V=J5(L,1),H=V[0];if(!B&&!H&&(_=k+1),B&&H&&(T=k-1),!B&&H){E=$;break}C++}return E||x},eF=function(e){var n=hn(e)?[]:e.toString().split(v7);return[{words:n}]},r1e=function(e){var n=e.width,a=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((n||a)&&!jd.isSsr){var c,d,f=b7({breakAll:o,children:i,style:s});if(f){var p=f.wordsWithComputedWidth,g=f.spaceWidth;c=p,d=g}else return eF(i);return n1e({breakAll:o,children:i,maxLines:l,style:s},c,d,n,a)}return eF(i)},tF="#808080",Tf=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,f=e.scaleToFit,p=f===void 0?!1:f,g=e.textAnchor,x=g===void 0?"start":g,b=e.verticalAnchor,j=b===void 0?"end":b,S=e.fill,_=S===void 0?tF:S,T=X5(e,K0e),C=v.useMemo(function(){return r1e({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:p,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,p,T.style,T.width]),E=T.dx,k=T.dy,O=T.angle,I=T.className,F=T.breakAll,B=X5(T,Q0e);if(!Ca(a)||!Ca(s))return null;var $=a+(Nt(E)?E:0),L=s+(Nt(k)?k:0),V;switch(j){case"start":V=Bk("calc(".concat(d,")"));break;case"middle":V=Bk("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:V=Bk("calc(".concat(C.length-1," * -").concat(l,")"));break}var H=[];if(p){var ne=C[0].width,Q=T.width;H.push("scale(".concat((Nt(Q)?Q/ne:1)/ne,")"))}return O&&H.push("rotate(".concat(O,", ").concat($,", ").concat(L,")")),H.length&&(B.transform=H.join(" ")),Se.createElement("text",vP({},zt(B,!0),{x:$,y:L,className:pn("recharts-text",I),textAnchor:x,fill:_.includes("url")?tF:_}),C.map(function(q,G){var ie=q.words.join(F?"":" ");return Se.createElement("tspan",{x:$,dy:G===0?V:l,key:"".concat(ie,"-").concat(G)},ie)}))};function ld(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function a1e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function WD(t){let e,n,a;t.length!==2?(e=ld,n=(l,c)=>ld(t(l),c),a=(l,c)=>t(l)-c):(e=t===ld||t===a1e?t:i1e,n=t,a=t);function i(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<0?d=p+1:f=p}while(d<f)}return d}function s(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function o(l,c,d=0,f=l.length){const p=i(l,c,d,f-1);return p>d&&a(l[p-1],c)>-a(l[p],c)?p-1:p}return{left:i,center:o,right:s}}function i1e(){return 0}function j7(t){return t===null?NaN:+t}function*s1e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const o1e=WD(ld),$b=o1e.right;WD(j7).center;class nF extends Map{constructor(e,n=u1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[a,i]of e)this.set(a,i)}get(e){return super.get(rF(this,e))}has(e){return super.has(rF(this,e))}set(e,n){return super.set(l1e(this,e),n)}delete(e){return super.delete(c1e(this,e))}}function rF({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):n}function l1e({_intern:t,_key:e},n){const a=e(n);return t.has(a)?t.get(a):(t.set(a,n),n)}function c1e({_intern:t,_key:e},n){const a=e(n);return t.has(a)&&(n=t.get(a),t.delete(a)),n}function u1e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function d1e(t=ld){if(t===ld)return w7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const a=t(e,n);return a||a===0?a:(t(n,n)===0)-(t(e,e)===0)}}function w7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const h1e=Math.sqrt(50),f1e=Math.sqrt(10),p1e=Math.sqrt(2);function zw(t,e,n){const a=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(a)),s=a/Math.pow(10,i),o=s>=h1e?10:s>=f1e?5:s>=p1e?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=n&&n<2?zw(t,e,n*2):[l,c,d]}function bP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const a=e<t,[i,s,o]=a?zw(e,t,n):zw(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(s-d)/-o;else for(let d=0;d<l;++d)c[d]=(s-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function jP(t,e,n){return e=+e,t=+t,n=+n,zw(t,e,n)[2]}function wP(t,e,n){e=+e,t=+t,n=+n;const a=e<t,i=a?jP(e,t,n):jP(t,e,n);return(a?-1:1)*(i<0?1/-i:i)}function aF(t,e){let n;for(const a of t)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function iF(t,e){let n;for(const a of t)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function N7(t,e,n=0,a=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(t.length-1,a)),!(n<=e&&e<=a))return t;for(i=i===void 0?w7:d1e(i);a>n;){if(a-n>600){const c=a-n+1,d=e-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),x=Math.max(n,Math.floor(e-d*p/c+g)),b=Math.min(a,Math.floor(e+(c-d)*p/c+g));N7(t,e,x,b,i)}const s=t[e];let o=n,l=a;for(Qx(t,n,e),i(t[a],s)>0&&Qx(t,n,a);o<l;){for(Qx(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?Qx(t,n,l):(++l,Qx(t,l,a)),l<=e&&(n=l+1),e<=l&&(a=l-1)}return t}function Qx(t,e,n){const a=t[e];t[e]=t[n],t[n]=a}function m1e(t,e,n){if(t=Float64Array.from(s1e(t)),!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return iF(t);if(e>=1)return aF(t);var a,i=(a-1)*e,s=Math.floor(i),o=aF(N7(t,s).subarray(0,s+1)),l=iF(t.subarray(s+1));return o+(l-o)*(i-s)}}function g1e(t,e,n=j7){if(!(!(a=t.length)||isNaN(e=+e))){if(e<=0||a<2)return+n(t[0],0,t);if(e>=1)return+n(t[a-1],a-1,t);var a,i=(a-1)*e,s=Math.floor(i),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function y1e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var a=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++a<i;)s[a]=t+a*n;return s}function lo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Wc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const NP=Symbol("implicit");function YD(){var t=new nF,e=[],n=[],a=NP;function i(s){let o=t.get(s);if(o===void 0){if(a!==NP)return a;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new nF;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return YD(e,n).unknown(a)},lo.apply(i,arguments),i}function qv(){var t=YD().unknown(void 0),e=t.domain,n=t.range,a=0,i=1,s,o,l=!1,c=0,d=0,f=.5;delete t.unknown;function p(){var g=e().length,x=i<a,b=x?i:a,j=x?a:i;s=(j-b)/Math.max(1,g-c+d*2),l&&(s=Math.floor(s)),b+=(j-b-s*(g-c))*f,o=s*(1-c),l&&(b=Math.round(b),o=Math.round(o));var S=y1e(g).map(function(_){return b+s*_});return n(x?S.reverse():S)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([a,i]=g,a=+a,i=+i,p()):[a,i]},t.rangeRound=function(g){return[a,i]=g,a=+a,i=+i,l=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(g){return arguments.length?(l=!!g,p()):l},t.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return qv(e(),[a,i]).round(l).paddingInner(c).paddingOuter(d).align(f)},lo.apply(p(),arguments)}function S7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return S7(e())},t}function jv(){return S7(qv.apply(null,arguments).paddingInner(1))}function KD(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _7(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function Bb(){}var Uv=.7,qw=1/Uv,$m="\\s*([+-]?\\d+)\\s*",Vv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x1e=/^#([0-9a-f]{3,8})$/,v1e=new RegExp(`^rgb\\(${$m},${$m},${$m}\\)$`),b1e=new RegExp(`^rgb\\(${Dl},${Dl},${Dl}\\)$`),j1e=new RegExp(`^rgba\\(${$m},${$m},${$m},${Vv}\\)$`),w1e=new RegExp(`^rgba\\(${Dl},${Dl},${Dl},${Vv}\\)$`),N1e=new RegExp(`^hsl\\(${Vv},${Dl},${Dl}\\)$`),S1e=new RegExp(`^hsla\\(${Vv},${Dl},${Dl},${Vv}\\)$`),sF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};KD(Bb,Hv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:oF,formatHex:oF,formatHex8:_1e,formatHsl:C1e,formatRgb:lF,toString:lF});function oF(){return this.rgb().formatHex()}function _1e(){return this.rgb().formatHex8()}function C1e(){return C7(this).formatHsl()}function lF(){return this.rgb().formatRgb()}function Hv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=x1e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?cF(e):n===3?new os(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Pj(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Pj(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=v1e.exec(t))?new os(e[1],e[2],e[3],1):(e=b1e.exec(t))?new os(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=j1e.exec(t))?Pj(e[1],e[2],e[3],e[4]):(e=w1e.exec(t))?Pj(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=N1e.exec(t))?hF(e[1],e[2]/100,e[3]/100,1):(e=S1e.exec(t))?hF(e[1],e[2]/100,e[3]/100,e[4]):sF.hasOwnProperty(t)?cF(sF[t]):t==="transparent"?new os(NaN,NaN,NaN,0):null}function cF(t){return new os(t>>16&255,t>>8&255,t&255,1)}function Pj(t,e,n,a){return a<=0&&(t=e=n=NaN),new os(t,e,n,a)}function T1e(t){return t instanceof Bb||(t=Hv(t)),t?(t=t.rgb(),new os(t.r,t.g,t.b,t.opacity)):new os}function SP(t,e,n,a){return arguments.length===1?T1e(t):new os(t,e,n,a??1)}function os(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}KD(os,SP,_7(Bb,{brighter(t){return t=t==null?qw:Math.pow(qw,t),new os(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Uv:Math.pow(Uv,t),new os(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new os(hf(this.r),hf(this.g),hf(this.b),Uw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uF,formatHex:uF,formatHex8:k1e,formatRgb:dF,toString:dF}));function uF(){return`#${Jh(this.r)}${Jh(this.g)}${Jh(this.b)}`}function k1e(){return`#${Jh(this.r)}${Jh(this.g)}${Jh(this.b)}${Jh((isNaN(this.opacity)?1:this.opacity)*255)}`}function dF(){const t=Uw(this.opacity);return`${t===1?"rgb(":"rgba("}${hf(this.r)}, ${hf(this.g)}, ${hf(this.b)}${t===1?")":`, ${t})`}`}function Uw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Jh(t){return t=hf(t),(t<16?"0":"")+t.toString(16)}function hF(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ro(t,e,n,a)}function C7(t){if(t instanceof Ro)return new Ro(t.h,t.s,t.l,t.opacity);if(t instanceof Bb||(t=Hv(t)),!t)return new Ro;if(t instanceof Ro)return t;t=t.rgb();var e=t.r/255,n=t.g/255,a=t.b/255,i=Math.min(e,n,a),s=Math.max(e,n,a),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-a)/l+(n<a)*6:n===s?o=(a-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Ro(o,l,c,t.opacity)}function A1e(t,e,n,a){return arguments.length===1?C7(t):new Ro(t,e,n,a??1)}function Ro(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}KD(Ro,A1e,_7(Bb,{brighter(t){return t=t==null?qw:Math.pow(qw,t),new Ro(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Uv:Math.pow(Uv,t),new Ro(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,i=2*n-a;return new os(zk(t>=240?t-240:t+120,i,a),zk(t,i,a),zk(t<120?t+240:t-120,i,a),this.opacity)},clamp(){return new Ro(fF(this.h),Oj(this.s),Oj(this.l),Uw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Uw(this.opacity);return`${t===1?"hsl(":"hsla("}${fF(this.h)}, ${Oj(this.s)*100}%, ${Oj(this.l)*100}%${t===1?")":`, ${t})`}`}}));function fF(t){return t=(t||0)%360,t<0?t+360:t}function Oj(t){return Math.max(0,Math.min(1,t||0))}function zk(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const QD=t=>()=>t;function E1e(t,e){return function(n){return t+n*e}}function P1e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}function O1e(t){return(t=+t)==1?T7:function(e,n){return n-e?P1e(e,n,t):QD(isNaN(e)?n:e)}}function T7(t,e){var n=e-t;return n?E1e(t,n):QD(isNaN(t)?e:t)}const pF=function t(e){var n=O1e(e);function a(i,s){var o=n((i=SP(i)).r,(s=SP(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),d=T7(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=c(f),i.opacity=d(f),i+""}}return a.gamma=t,a}(1);function D1e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,a=e.slice(),i;return function(s){for(i=0;i<n;++i)a[i]=t[i]*(1-s)+e[i]*s;return a}}function M1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function I1e(t,e){var n=e?e.length:0,a=t?Math.min(n,t.length):0,i=new Array(a),s=new Array(n),o;for(o=0;o<a;++o)i[o]=Vg(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<a;++o)s[o]=i[o](l);return s}}function R1e(t,e){var n=new Date;return t=+t,e=+e,function(a){return n.setTime(t*(1-a)+e*a),n}}function Vw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function L1e(t,e){var n={},a={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Vg(t[i],e[i]):a[i]=e[i];return function(s){for(i in n)a[i]=n[i](s);return a}}var _P=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qk=new RegExp(_P.source,"g");function F1e(t){return function(){return t}}function $1e(t){return function(e){return t(e)+""}}function B1e(t,e){var n=_P.lastIndex=qk.lastIndex=0,a,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(a=_P.exec(t))&&(i=qk.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(a=a[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Vw(a,i)})),n=qk.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?$1e(c[0].x):F1e(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)l[(p=c[f]).i]=p.x(d);return l.join("")})}function Vg(t,e){var n=typeof e,a;return e==null||n==="boolean"?QD(e):(n==="number"?Vw:n==="string"?(a=Hv(e))?(e=a,pF):B1e:e instanceof Hv?pF:e instanceof Date?R1e:M1e(e)?D1e:Array.isArray(e)?I1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?L1e:Vw)(t,e)}function XD(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function z1e(t,e){e===void 0&&(e=t,t=Vg);for(var n=0,a=e.length-1,i=e[0],s=new Array(a<0?0:a);n<a;)s[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return s[l](o-l)}}function q1e(t){return function(){return t}}function Hw(t){return+t}var mF=[0,1];function Fi(t){return t}function CP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:q1e(isNaN(e)?NaN:.5)}function U1e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(a){return Math.max(t,Math.min(e,a))}}function V1e(t,e,n){var a=t[0],i=t[1],s=e[0],o=e[1];return i<a?(a=CP(i,a),s=n(o,s)):(a=CP(a,i),s=n(s,o)),function(l){return s(a(l))}}function H1e(t,e,n){var a=Math.min(t.length,e.length)-1,i=new Array(a),s=new Array(a),o=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<a;)i[o]=CP(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var c=$b(t,l,1,a)-1;return s[c](i[c](l))}}function zb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gS(){var t=mF,e=mF,n=Vg,a,i,s,o=Fi,l,c,d;function f(){var g=Math.min(t.length,e.length);return o!==Fi&&(o=U1e(t[0],t[g-1])),l=g>2?H1e:V1e,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?s:(c||(c=l(t.map(a),e,n)))(a(o(g)))}return p.invert=function(g){return o(i((d||(d=l(e,t.map(a),Vw)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Hw),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=XD,f()},p.clamp=function(g){return arguments.length?(o=g?!0:Fi,f()):o!==Fi},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,x){return a=g,i=x,f()}}function JD(){return gS()(Fi,Fi)}function G1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Gw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,a=t.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+t.slice(n+1)]}function dg(t){return t=Gw(Math.abs(t)),t?t[1]:NaN}function W1e(t,e){return function(n,a){for(var i=n.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>a));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Y1e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var K1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gv(t){if(!(e=K1e.exec(t)))throw new Error("invalid format: "+t);var e;return new ZD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Gv.prototype=ZD.prototype;function ZD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ZD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Q1e(t){e:for(var e=t.length,n=1,a=-1,i;n<e;++n)switch(t[n]){case".":a=i=n;break;case"0":a===0&&(a=n),i=n;break;default:if(!+t[n])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(i+1):t}var k7;function X1e(t,e){var n=Gw(t,e);if(!n)return t+"";var a=n[0],i=n[1],s=i-(k7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=a.length;return s===o?a:s>o?a+new Array(s-o+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+Gw(t,Math.max(0,e+s-1))[0]}function gF(t,e){var n=Gw(t,e);if(!n)return t+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const yF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:G1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gF(t*100,e),r:gF,s:X1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function xF(t){return t}var vF=Array.prototype.map,bF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function J1e(t){var e=t.grouping===void 0||t.thousands===void 0?xF:W1e(vF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?xF:Y1e(vF.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=Gv(p);var g=p.fill,x=p.align,b=p.sign,j=p.symbol,S=p.zero,_=p.width,T=p.comma,C=p.precision,E=p.trim,k=p.type;k==="n"?(T=!0,k="g"):yF[k]||(C===void 0&&(C=12),E=!0,k="g"),(S||g==="0"&&x==="=")&&(S=!0,g="0",x="=");var O=j==="$"?n:j==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",I=j==="$"?a:/[%p]/.test(k)?o:"",F=yF[k],B=/[defgprs%]/.test(k);C=C===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function $(L){var V=O,H=I,ne,Q,q;if(k==="c")H=F(L)+H,L="";else{L=+L;var G=L<0||1/L<0;if(L=isNaN(L)?c:F(Math.abs(L),C),E&&(L=Q1e(L)),G&&+L==0&&b!=="+"&&(G=!1),V=(G?b==="("?b:l:b==="-"||b==="("?"":b)+V,H=(k==="s"?bF[8+k7/3]:"")+H+(G&&b==="("?")":""),B){for(ne=-1,Q=L.length;++ne<Q;)if(q=L.charCodeAt(ne),48>q||q>57){H=(q===46?i+L.slice(ne+1):L.slice(ne))+H,L=L.slice(0,ne);break}}}T&&!S&&(L=e(L,1/0));var ie=V.length+L.length+H.length,W=ie<_?new Array(_-ie+1).join(g):"";switch(T&&S&&(L=e(W+L,W.length?_-H.length:1/0),W=""),x){case"<":L=V+L+H+W;break;case"=":L=V+W+L+H;break;case"^":L=W.slice(0,ie=W.length>>1)+V+L+H+W.slice(ie);break;default:L=W+V+L+H;break}return s(L)}return $.toString=function(){return p+""},$}function f(p,g){var x=d((p=Gv(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(dg(g)/3)))*3,j=Math.pow(10,-b),S=bF[8+b/3];return function(_){return x(j*_)+S}}return{format:d,formatPrefix:f}}var Dj,eM,A7;Z1e({thousands:",",grouping:[3],currency:["$",""]});function Z1e(t){return Dj=J1e(t),eM=Dj.format,A7=Dj.formatPrefix,Dj}function eje(t){return Math.max(0,-dg(Math.abs(t)))}function tje(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dg(e)/3)))*3-dg(Math.abs(t)))}function nje(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,dg(e)-dg(t))+1}function E7(t,e,n,a){var i=wP(t,e,n),s;switch(a=Gv(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return a.precision==null&&!isNaN(s=tje(i,o))&&(a.precision=s),A7(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(s=nje(i,Math.max(Math.abs(t),Math.abs(e))))&&(a.precision=s-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(s=eje(i))&&(a.precision=s-(a.type==="%")*2);break}}return eM(a)}function wd(t){var e=t.domain;return t.ticks=function(n){var a=e();return bP(a[0],a[a.length-1],n??10)},t.tickFormat=function(n,a){var i=e();return E7(i[0],i[i.length-1],n??10,a)},t.nice=function(n){n==null&&(n=10);var a=e(),i=0,s=a.length-1,o=a[i],l=a[s],c,d,f=10;for(l<o&&(d=o,o=l,l=d,d=i,i=s,s=d);f-- >0;){if(d=jP(o,l,n),d===c)return a[i]=o,a[s]=l,e(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function Ww(){var t=JD();return t.copy=function(){return zb(t,Ww())},lo.apply(t,arguments),wd(t)}function P7(t){var e;function n(a){return a==null||isNaN(a=+a)?e:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(t=Array.from(a,Hw),n):t.slice()},n.unknown=function(a){return arguments.length?(e=a,n):e},n.copy=function(){return P7(t).unknown(e)},t=arguments.length?Array.from(t,Hw):[0,1],wd(n)}function O7(t,e){t=t.slice();var n=0,a=t.length-1,i=t[n],s=t[a],o;return s<i&&(o=n,n=a,a=o,o=i,i=s,s=o),t[n]=e.floor(i),t[a]=e.ceil(s),t}function jF(t){return Math.log(t)}function wF(t){return Math.exp(t)}function rje(t){return-Math.log(-t)}function aje(t){return-Math.exp(-t)}function ije(t){return isFinite(t)?+("1e"+t):t<0?0:t}function sje(t){return t===10?ije:t===Math.E?Math.exp:e=>Math.pow(t,e)}function oje(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function NF(t){return(e,n)=>-t(-e,n)}function tM(t){const e=t(jF,wF),n=e.domain;let a=10,i,s;function o(){return i=oje(a),s=sje(a),n()[0]<0?(i=NF(i),s=NF(s),t(rje,aje)):t(jF,wF),e}return e.base=function(l){return arguments.length?(a=+l,o()):a},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),x=i(f),b,j;const S=l==null?10:+l;let _=[];if(!(a%1)&&x-g<S){if(g=Math.floor(g),x=Math.ceil(x),d>0){for(;g<=x;++g)for(b=1;b<a;++b)if(j=g<0?b/s(-g):b*s(g),!(j<d)){if(j>f)break;_.push(j)}}else for(;g<=x;++g)for(b=a-1;b>=1;--b)if(j=g>0?b/s(-g):b*s(g),!(j<d)){if(j>f)break;_.push(j)}_.length*2<S&&(_=bP(d,f,S))}else _=bP(g,x,Math.min(x-g,S)).map(s);return p?_.reverse():_},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Gv(c)).precision==null&&(c.trim=!0),c=eM(c)),l===1/0)return c;const d=Math.max(1,a*l/e.ticks().length);return f=>{let p=f/s(Math.round(i(f)));return p*a<a-.5&&(p*=a),p<=d?c(f):""}},e.nice=()=>n(O7(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function D7(){const t=tM(gS()).domain([1,10]);return t.copy=()=>zb(t,D7()).base(t.base()),lo.apply(t,arguments),t}function SF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _F(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function nM(t){var e=1,n=t(SF(e),_F(e));return n.constant=function(a){return arguments.length?t(SF(e=+a),_F(e)):e},wd(n)}function M7(){var t=nM(gS());return t.copy=function(){return zb(t,M7()).constant(t.constant())},lo.apply(t,arguments)}function CF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function lje(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function cje(t){return t<0?-t*t:t*t}function rM(t){var e=t(Fi,Fi),n=1;function a(){return n===1?t(Fi,Fi):n===.5?t(lje,cje):t(CF(n),CF(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,a()):n},wd(e)}function aM(){var t=rM(gS());return t.copy=function(){return zb(t,aM()).exponent(t.exponent())},lo.apply(t,arguments),t}function uje(){return aM.apply(null,arguments).exponent(.5)}function TF(t){return Math.sign(t)*t*t}function dje(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function I7(){var t=JD(),e=[0,1],n=!1,a;function i(s){var o=dje(t(s));return isNaN(o)?a:n?Math.round(o):o}return i.invert=function(s){return t.invert(TF(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Hw)).map(TF)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(a=s,i):a},i.copy=function(){return I7(t.domain(),e).round(n).clamp(t.clamp()).unknown(a)},lo.apply(i,arguments),wd(i)}function R7(){var t=[],e=[],n=[],a;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=g1e(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?a:e[$b(n,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ld),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(a=o,s):a},s.quantiles=function(){return n.slice()},s.copy=function(){return R7().domain(t).range(e).unknown(a)},lo.apply(s,arguments)}function L7(){var t=0,e=1,n=1,a=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[$b(a,c,0,n)]:s}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,a[0]]:d>=n?[a[n-1],e]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return L7().domain([t,e]).range(i).unknown(s)},lo.apply(wd(o),arguments)}function F7(){var t=[.5],e=[0,1],n,a=1;function i(s){return s!=null&&s<=s?e[$b(t,s,0,a)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),a=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),a=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return F7().domain(t).range(e).unknown(n)},lo.apply(i,arguments)}const Uk=new Date,Vk=new Date;function Ta(t,e,n,a){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let d;do c.push(d=new Date(+s)),e(s,l),t(s);while(d<s&&s<o);return c},i.filter=s=>Ta(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(Uk.setTime(+s),Vk.setTime(+o),t(Uk),t(Vk),Math.floor(n(Uk,Vk))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(a?o=>a(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Yw=Ta(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Yw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ta(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Yw);Yw.range;const wc=1e3,ao=wc*60,Nc=ao*60,Lc=Nc*24,iM=Lc*7,kF=Lc*30,Hk=Lc*365,Zh=Ta(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*wc)},(t,e)=>(e-t)/wc,t=>t.getUTCSeconds());Zh.range;const sM=Ta(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*wc)},(t,e)=>{t.setTime(+t+e*ao)},(t,e)=>(e-t)/ao,t=>t.getMinutes());sM.range;const oM=Ta(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ao)},(t,e)=>(e-t)/ao,t=>t.getUTCMinutes());oM.range;const lM=Ta(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*wc-t.getMinutes()*ao)},(t,e)=>{t.setTime(+t+e*Nc)},(t,e)=>(e-t)/Nc,t=>t.getHours());lM.range;const cM=Ta(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Nc)},(t,e)=>(e-t)/Nc,t=>t.getUTCHours());cM.range;const qb=Ta(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ao)/Lc,t=>t.getDate()-1);qb.range;const yS=Ta(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Lc,t=>t.getUTCDate()-1);yS.range;const $7=Ta(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Lc,t=>Math.floor(t/Lc));$7.range;function Rf(t){return Ta(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ao)/iM)}const xS=Rf(0),Kw=Rf(1),hje=Rf(2),fje=Rf(3),hg=Rf(4),pje=Rf(5),mje=Rf(6);xS.range;Kw.range;hje.range;fje.range;hg.range;pje.range;mje.range;function Lf(t){return Ta(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/iM)}const vS=Lf(0),Qw=Lf(1),gje=Lf(2),yje=Lf(3),fg=Lf(4),xje=Lf(5),vje=Lf(6);vS.range;Qw.range;gje.range;yje.range;fg.range;xje.range;vje.range;const uM=Ta(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());uM.range;const dM=Ta(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());dM.range;const Fc=Ta(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Fc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ta(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Fc.range;const $c=Ta(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());$c.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ta(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});$c.range;function B7(t,e,n,a,i,s){const o=[[Zh,1,wc],[Zh,5,5*wc],[Zh,15,15*wc],[Zh,30,30*wc],[s,1,ao],[s,5,5*ao],[s,15,15*ao],[s,30,30*ao],[i,1,Nc],[i,3,3*Nc],[i,6,6*Nc],[i,12,12*Nc],[a,1,Lc],[a,2,2*Lc],[n,1,iM],[e,1,kF],[e,3,3*kF],[t,1,Hk]];function l(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const x=p&&typeof p.range=="function"?p:c(d,f,p),b=x?x.range(d,+f+1):[];return g?b.reverse():b}function c(d,f,p){const g=Math.abs(f-d)/p,x=WD(([,,S])=>S).right(o,g);if(x===o.length)return t.every(wP(d/Hk,f/Hk,p));if(x===0)return Yw.every(Math.max(wP(d,f,p),1));const[b,j]=o[g/o[x-1][2]<o[x][2]/g?x-1:x];return b.every(j)}return[l,c]}const[bje,jje]=B7($c,dM,vS,$7,cM,oM),[wje,Nje]=B7(Fc,uM,xS,qb,lM,sM);function Gk(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Wk(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Xx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Sje(t){var e=t.dateTime,n=t.date,a=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=Jx(i),f=Zx(i),p=Jx(s),g=Zx(s),x=Jx(o),b=Zx(o),j=Jx(l),S=Zx(l),_=Jx(c),T=Zx(c),C={a:G,A:ie,b:W,B:z,c:null,d:MF,e:MF,f:Wje,g:rwe,G:iwe,H:Vje,I:Hje,j:Gje,L:z7,m:Yje,M:Kje,p:ce,q:je,Q:LF,s:FF,S:Qje,u:Xje,U:Jje,V:Zje,w:ewe,W:twe,x:null,X:null,y:nwe,Y:awe,Z:swe,"%":RF},E={a:Y,A:Ie,b:Ue,B:ze,c:null,d:IF,e:IF,f:uwe,g:bwe,G:wwe,H:owe,I:lwe,j:cwe,L:U7,m:dwe,M:hwe,p:Le,q:be,Q:LF,s:FF,S:fwe,u:pwe,U:mwe,V:gwe,w:ywe,W:xwe,x:null,X:null,y:vwe,Y:jwe,Z:Nwe,"%":RF},k={a:$,A:L,b:V,B:H,c:ne,d:OF,e:OF,f:Bje,g:PF,G:EF,H:DF,I:DF,j:Rje,L:$je,m:Ije,M:Lje,p:B,q:Mje,Q:qje,s:Uje,S:Fje,u:Aje,U:Eje,V:Pje,w:kje,W:Oje,x:Q,X:q,y:PF,Y:EF,Z:Dje,"%":zje};C.x=O(n,C),C.X=O(a,C),C.c=O(e,C),E.x=O(n,E),E.X=O(a,E),E.c=O(e,E);function O(Ce,Ae){return function(me){var ye=[],le=-1,X=0,ae=Ce.length,de,ee,Ne;for(me instanceof Date||(me=new Date(+me));++le<ae;)Ce.charCodeAt(le)===37&&(ye.push(Ce.slice(X,le)),(ee=AF[de=Ce.charAt(++le)])!=null?de=Ce.charAt(++le):ee=de==="e"?" ":"0",(Ne=Ae[de])&&(de=Ne(me,ee)),ye.push(de),X=le+1);return ye.push(Ce.slice(X,le)),ye.join("")}}function I(Ce,Ae){return function(me){var ye=Xx(1900,void 0,1),le=F(ye,Ce,me+="",0),X,ae;if(le!=me.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(Ae&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(X=Wk(Xx(ye.y,0,1)),ae=X.getUTCDay(),X=ae>4||ae===0?Qw.ceil(X):Qw(X),X=yS.offset(X,(ye.V-1)*7),ye.y=X.getUTCFullYear(),ye.m=X.getUTCMonth(),ye.d=X.getUTCDate()+(ye.w+6)%7):(X=Gk(Xx(ye.y,0,1)),ae=X.getDay(),X=ae>4||ae===0?Kw.ceil(X):Kw(X),X=qb.offset(X,(ye.V-1)*7),ye.y=X.getFullYear(),ye.m=X.getMonth(),ye.d=X.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),ae="Z"in ye?Wk(Xx(ye.y,0,1)).getUTCDay():Gk(Xx(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(ae+5)%7:ye.w+ye.U*7-(ae+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,Wk(ye)):Gk(ye)}}function F(Ce,Ae,me,ye){for(var le=0,X=Ae.length,ae=me.length,de,ee;le<X;){if(ye>=ae)return-1;if(de=Ae.charCodeAt(le++),de===37){if(de=Ae.charAt(le++),ee=k[de in AF?Ae.charAt(le++):de],!ee||(ye=ee(Ce,me,ye))<0)return-1}else if(de!=me.charCodeAt(ye++))return-1}return ye}function B(Ce,Ae,me){var ye=d.exec(Ae.slice(me));return ye?(Ce.p=f.get(ye[0].toLowerCase()),me+ye[0].length):-1}function $(Ce,Ae,me){var ye=x.exec(Ae.slice(me));return ye?(Ce.w=b.get(ye[0].toLowerCase()),me+ye[0].length):-1}function L(Ce,Ae,me){var ye=p.exec(Ae.slice(me));return ye?(Ce.w=g.get(ye[0].toLowerCase()),me+ye[0].length):-1}function V(Ce,Ae,me){var ye=_.exec(Ae.slice(me));return ye?(Ce.m=T.get(ye[0].toLowerCase()),me+ye[0].length):-1}function H(Ce,Ae,me){var ye=j.exec(Ae.slice(me));return ye?(Ce.m=S.get(ye[0].toLowerCase()),me+ye[0].length):-1}function ne(Ce,Ae,me){return F(Ce,e,Ae,me)}function Q(Ce,Ae,me){return F(Ce,n,Ae,me)}function q(Ce,Ae,me){return F(Ce,a,Ae,me)}function G(Ce){return o[Ce.getDay()]}function ie(Ce){return s[Ce.getDay()]}function W(Ce){return c[Ce.getMonth()]}function z(Ce){return l[Ce.getMonth()]}function ce(Ce){return i[+(Ce.getHours()>=12)]}function je(Ce){return 1+~~(Ce.getMonth()/3)}function Y(Ce){return o[Ce.getUTCDay()]}function Ie(Ce){return s[Ce.getUTCDay()]}function Ue(Ce){return c[Ce.getUTCMonth()]}function ze(Ce){return l[Ce.getUTCMonth()]}function Le(Ce){return i[+(Ce.getUTCHours()>=12)]}function be(Ce){return 1+~~(Ce.getUTCMonth()/3)}return{format:function(Ce){var Ae=O(Ce+="",C);return Ae.toString=function(){return Ce},Ae},parse:function(Ce){var Ae=I(Ce+="",!1);return Ae.toString=function(){return Ce},Ae},utcFormat:function(Ce){var Ae=O(Ce+="",E);return Ae.toString=function(){return Ce},Ae},utcParse:function(Ce){var Ae=I(Ce+="",!0);return Ae.toString=function(){return Ce},Ae}}}var AF={"-":"",_:" ",0:"0"},$a=/^\s*\d+/,_je=/^%/,Cje=/[\\^$*+?|[\]().{}]/g;function Zn(t,e,n){var a=t<0?"-":"",i=(a?-t:t)+"",s=i.length;return a+(s<n?new Array(n-s+1).join(e)+i:i)}function Tje(t){return t.replace(Cje,"\\$&")}function Jx(t){return new RegExp("^(?:"+t.map(Tje).join("|")+")","i")}function Zx(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function kje(t,e,n){var a=$a.exec(e.slice(n,n+1));return a?(t.w=+a[0],n+a[0].length):-1}function Aje(t,e,n){var a=$a.exec(e.slice(n,n+1));return a?(t.u=+a[0],n+a[0].length):-1}function Eje(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.U=+a[0],n+a[0].length):-1}function Pje(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.V=+a[0],n+a[0].length):-1}function Oje(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.W=+a[0],n+a[0].length):-1}function EF(t,e,n){var a=$a.exec(e.slice(n,n+4));return a?(t.y=+a[0],n+a[0].length):-1}function PF(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function Dje(t,e,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return a?(t.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function Mje(t,e,n){var a=$a.exec(e.slice(n,n+1));return a?(t.q=a[0]*3-3,n+a[0].length):-1}function Ije(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.m=a[0]-1,n+a[0].length):-1}function OF(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.d=+a[0],n+a[0].length):-1}function Rje(t,e,n){var a=$a.exec(e.slice(n,n+3));return a?(t.m=0,t.d=+a[0],n+a[0].length):-1}function DF(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.H=+a[0],n+a[0].length):-1}function Lje(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.M=+a[0],n+a[0].length):-1}function Fje(t,e,n){var a=$a.exec(e.slice(n,n+2));return a?(t.S=+a[0],n+a[0].length):-1}function $je(t,e,n){var a=$a.exec(e.slice(n,n+3));return a?(t.L=+a[0],n+a[0].length):-1}function Bje(t,e,n){var a=$a.exec(e.slice(n,n+6));return a?(t.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function zje(t,e,n){var a=_je.exec(e.slice(n,n+1));return a?n+a[0].length:-1}function qje(t,e,n){var a=$a.exec(e.slice(n));return a?(t.Q=+a[0],n+a[0].length):-1}function Uje(t,e,n){var a=$a.exec(e.slice(n));return a?(t.s=+a[0],n+a[0].length):-1}function MF(t,e){return Zn(t.getDate(),e,2)}function Vje(t,e){return Zn(t.getHours(),e,2)}function Hje(t,e){return Zn(t.getHours()%12||12,e,2)}function Gje(t,e){return Zn(1+qb.count(Fc(t),t),e,3)}function z7(t,e){return Zn(t.getMilliseconds(),e,3)}function Wje(t,e){return z7(t,e)+"000"}function Yje(t,e){return Zn(t.getMonth()+1,e,2)}function Kje(t,e){return Zn(t.getMinutes(),e,2)}function Qje(t,e){return Zn(t.getSeconds(),e,2)}function Xje(t){var e=t.getDay();return e===0?7:e}function Jje(t,e){return Zn(xS.count(Fc(t)-1,t),e,2)}function q7(t){var e=t.getDay();return e>=4||e===0?hg(t):hg.ceil(t)}function Zje(t,e){return t=q7(t),Zn(hg.count(Fc(t),t)+(Fc(t).getDay()===4),e,2)}function ewe(t){return t.getDay()}function twe(t,e){return Zn(Kw.count(Fc(t)-1,t),e,2)}function nwe(t,e){return Zn(t.getFullYear()%100,e,2)}function rwe(t,e){return t=q7(t),Zn(t.getFullYear()%100,e,2)}function awe(t,e){return Zn(t.getFullYear()%1e4,e,4)}function iwe(t,e){var n=t.getDay();return t=n>=4||n===0?hg(t):hg.ceil(t),Zn(t.getFullYear()%1e4,e,4)}function swe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Zn(e/60|0,"0",2)+Zn(e%60,"0",2)}function IF(t,e){return Zn(t.getUTCDate(),e,2)}function owe(t,e){return Zn(t.getUTCHours(),e,2)}function lwe(t,e){return Zn(t.getUTCHours()%12||12,e,2)}function cwe(t,e){return Zn(1+yS.count($c(t),t),e,3)}function U7(t,e){return Zn(t.getUTCMilliseconds(),e,3)}function uwe(t,e){return U7(t,e)+"000"}function dwe(t,e){return Zn(t.getUTCMonth()+1,e,2)}function hwe(t,e){return Zn(t.getUTCMinutes(),e,2)}function fwe(t,e){return Zn(t.getUTCSeconds(),e,2)}function pwe(t){var e=t.getUTCDay();return e===0?7:e}function mwe(t,e){return Zn(vS.count($c(t)-1,t),e,2)}function V7(t){var e=t.getUTCDay();return e>=4||e===0?fg(t):fg.ceil(t)}function gwe(t,e){return t=V7(t),Zn(fg.count($c(t),t)+($c(t).getUTCDay()===4),e,2)}function ywe(t){return t.getUTCDay()}function xwe(t,e){return Zn(Qw.count($c(t)-1,t),e,2)}function vwe(t,e){return Zn(t.getUTCFullYear()%100,e,2)}function bwe(t,e){return t=V7(t),Zn(t.getUTCFullYear()%100,e,2)}function jwe(t,e){return Zn(t.getUTCFullYear()%1e4,e,4)}function wwe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?fg(t):fg.ceil(t),Zn(t.getUTCFullYear()%1e4,e,4)}function Nwe(){return"+0000"}function RF(){return"%"}function LF(t){return+t}function FF(t){return Math.floor(+t/1e3)}var bm,H7,G7;Swe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Swe(t){return bm=Sje(t),H7=bm.format,bm.parse,G7=bm.utcFormat,bm.utcParse,bm}function _we(t){return new Date(t)}function Cwe(t){return t instanceof Date?+t:+new Date(+t)}function hM(t,e,n,a,i,s,o,l,c,d){var f=JD(),p=f.invert,g=f.domain,x=d(".%L"),b=d(":%S"),j=d("%I:%M"),S=d("%I %p"),_=d("%a %d"),T=d("%b %d"),C=d("%B"),E=d("%Y");function k(O){return(c(O)<O?x:l(O)<O?b:o(O)<O?j:s(O)<O?S:a(O)<O?i(O)<O?_:T:n(O)<O?C:E)(O)}return f.invert=function(O){return new Date(p(O))},f.domain=function(O){return arguments.length?g(Array.from(O,Cwe)):g().map(_we)},f.ticks=function(O){var I=g();return t(I[0],I[I.length-1],O??10)},f.tickFormat=function(O,I){return I==null?k:d(I)},f.nice=function(O){var I=g();return(!O||typeof O.range!="function")&&(O=e(I[0],I[I.length-1],O??10)),O?g(O7(I,O)):f},f.copy=function(){return zb(f,hM(t,e,n,a,i,s,o,l,c,d))},f}function Twe(){return lo.apply(hM(wje,Nje,Fc,uM,xS,qb,lM,sM,Zh,H7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kwe(){return lo.apply(hM(bje,jje,$c,dM,vS,yS,cM,oM,Zh,G7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bS(){var t=0,e=1,n,a,i,s,o=Fi,l=!1,c;function d(p){return p==null||isNaN(p=+p)?c:o(i===0?.5:(p=(s(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),a=s(e=+e),i=n===a?0:1/(a-n),d):[t,e]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function f(p){return function(g){var x,b;return arguments.length?([x,b]=g,o=p(x,b),d):[o(0),o(1)]}}return d.range=f(Vg),d.rangeRound=f(XD),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return s=p,n=p(t),a=p(e),i=n===a?0:1/(a-n),d}}function Nd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function W7(){var t=wd(bS()(Fi));return t.copy=function(){return Nd(t,W7())},Wc.apply(t,arguments)}function Y7(){var t=tM(bS()).domain([1,10]);return t.copy=function(){return Nd(t,Y7()).base(t.base())},Wc.apply(t,arguments)}function K7(){var t=nM(bS());return t.copy=function(){return Nd(t,K7()).constant(t.constant())},Wc.apply(t,arguments)}function fM(){var t=rM(bS());return t.copy=function(){return Nd(t,fM()).exponent(t.exponent())},Wc.apply(t,arguments)}function Awe(){return fM.apply(null,arguments).exponent(.5)}function Q7(){var t=[],e=Fi;function n(a){if(a!=null&&!isNaN(a=+a))return e(($b(t,a,1)-1)/(t.length-1))}return n.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let i of a)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ld),n},n.interpolator=function(a){return arguments.length?(e=a,n):e},n.range=function(){return t.map((a,i)=>e(i/(t.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(i,s)=>m1e(t,s/a))},n.copy=function(){return Q7(e).domain(t)},Wc.apply(n,arguments)}function jS(){var t=0,e=.5,n=1,a=1,i,s,o,l,c,d=Fi,f,p=!1,g;function x(j){return isNaN(j=+j)?g:(j=.5+((j=+f(j))-s)*(a*j<a*s?l:c),d(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([t,e,n]=j,i=f(t=+t),s=f(e=+e),o=f(n=+n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x):[t,e,n]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(d=j,x):d};function b(j){return function(S){var _,T,C;return arguments.length?([_,T,C]=S,d=z1e(j,[_,T,C]),x):[d(0),d(.5),d(1)]}}return x.range=b(Vg),x.rangeRound=b(XD),x.unknown=function(j){return arguments.length?(g=j,x):g},function(j){return f=j,i=j(t),s=j(e),o=j(n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),a=s<i?-1:1,x}}function X7(){var t=wd(jS()(Fi));return t.copy=function(){return Nd(t,X7())},Wc.apply(t,arguments)}function J7(){var t=tM(jS()).domain([.1,1,10]);return t.copy=function(){return Nd(t,J7()).base(t.base())},Wc.apply(t,arguments)}function Z7(){var t=nM(jS());return t.copy=function(){return Nd(t,Z7()).constant(t.constant())},Wc.apply(t,arguments)}function pM(){var t=rM(jS());return t.copy=function(){return Nd(t,pM()).exponent(t.exponent())},Wc.apply(t,arguments)}function Ewe(){return pM.apply(null,arguments).exponent(.5)}const $F=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:qv,scaleDiverging:X7,scaleDivergingLog:J7,scaleDivergingPow:pM,scaleDivergingSqrt:Ewe,scaleDivergingSymlog:Z7,scaleIdentity:P7,scaleImplicit:NP,scaleLinear:Ww,scaleLog:D7,scaleOrdinal:YD,scalePoint:jv,scalePow:aM,scaleQuantile:R7,scaleQuantize:L7,scaleRadial:I7,scaleSequential:W7,scaleSequentialLog:Y7,scaleSequentialPow:fM,scaleSequentialQuantile:Q7,scaleSequentialSqrt:Awe,scaleSequentialSymlog:K7,scaleSqrt:uje,scaleSymlog:M7,scaleThreshold:F7,scaleTime:Twe,scaleUtc:kwe,tickFormat:E7},Symbol.toStringTag,{value:"Module"}));var Yk,BF;function wS(){if(BF)return Yk;BF=1;var t=Bg();function e(n,a,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=a(l);if(c!=null&&(d===void 0?c===c&&!t(c):i(c,d)))var d=c,f=l}return f}return Yk=e,Yk}var Kk,zF;function eV(){if(zF)return Kk;zF=1;function t(e,n){return e>n}return Kk=t,Kk}var Qk,qF;function Pwe(){if(qF)return Qk;qF=1;var t=wS(),e=eV(),n=Ug();function a(i){return i&&i.length?t(i,n,e):void 0}return Qk=a,Qk}var Owe=Pwe();const id=Wn(Owe);var Xk,UF;function tV(){if(UF)return Xk;UF=1;function t(e,n){return e<n}return Xk=t,Xk}var Jk,VF;function Dwe(){if(VF)return Jk;VF=1;var t=wS(),e=tV(),n=Ug();function a(i){return i&&i.length?t(i,n,e):void 0}return Jk=a,Jk}var Mwe=Dwe();const NS=Wn(Mwe);var Zk,HF;function Iwe(){if(HF)return Zk;HF=1;var t=ED(),e=Bl(),n=c7(),a=fs();function i(s,o){var l=a(s)?t:n;return l(s,e(o,3))}return Zk=i,Zk}var eA,GF;function Rwe(){if(GF)return eA;GF=1;var t=o7(),e=Iwe();function n(a,i){return t(e(a,i),1)}return eA=n,eA}var Lwe=Rwe();const Fwe=Wn(Lwe);var tA,WF;function $we(){if(WF)return tA;WF=1;var t=UD();function e(n,a){return t(n,a)}return tA=e,tA}var Bwe=$we();const kf=Wn(Bwe);var Hg=1e9,zwe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},gM,Hr=!0,so="[DecimalError] ",ff=so+"Invalid argument: ",mM=so+"Exponent out of range: ",Gg=Math.floor,Hh=Math.pow,qwe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Es,Ma=1e7,Fr=7,nV=9007199254740991,Xw=Gg(nV/Fr),Rt={};Rt.absoluteValue=Rt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Rt.comparedTo=Rt.cmp=function(t){var e,n,a,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(a=s.d.length,i=t.d.length,e=0,n=a<i?a:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return a===i?0:a>i^s.s<0?1:-1};Rt.decimalPlaces=Rt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Fr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Rt.dividedBy=Rt.div=function(t){return Ec(this,new this.constructor(t))};Rt.dividedToIntegerBy=Rt.idiv=function(t){var e=this,n=e.constructor;return Cr(Ec(e,new n(t),0,1),n.precision)};Rt.equals=Rt.eq=function(t){return!this.cmp(t)};Rt.exponent=function(){return xa(this)};Rt.greaterThan=Rt.gt=function(t){return this.cmp(t)>0};Rt.greaterThanOrEqualTo=Rt.gte=function(t){return this.cmp(t)>=0};Rt.isInteger=Rt.isint=function(){return this.e>this.d.length-2};Rt.isNegative=Rt.isneg=function(){return this.s<0};Rt.isPositive=Rt.ispos=function(){return this.s>0};Rt.isZero=function(){return this.s===0};Rt.lessThan=Rt.lt=function(t){return this.cmp(t)<0};Rt.lessThanOrEqualTo=Rt.lte=function(t){return this.cmp(t)<1};Rt.logarithm=Rt.log=function(t){var e,n=this,a=n.constructor,i=a.precision,s=i+5;if(t===void 0)t=new a(10);else if(t=new a(t),t.s<1||t.eq(Es))throw Error(so+"NaN");if(n.s<1)throw Error(so+(n.s?"NaN":"-Infinity"));return n.eq(Es)?new a(0):(Hr=!1,e=Ec(Wv(n,s),Wv(t,s),s),Hr=!0,Cr(e,i))};Rt.minus=Rt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?iV(e,t):rV(e,(t.s=-t.s,t))};Rt.modulo=Rt.mod=function(t){var e,n=this,a=n.constructor,i=a.precision;if(t=new a(t),!t.s)throw Error(so+"NaN");return n.s?(Hr=!1,e=Ec(n,t,0,1).times(t),Hr=!0,n.minus(e)):Cr(new a(n),i)};Rt.naturalExponential=Rt.exp=function(){return aV(this)};Rt.naturalLogarithm=Rt.ln=function(){return Wv(this)};Rt.negated=Rt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Rt.plus=Rt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?rV(e,t):iV(e,(t.s=-t.s,t))};Rt.precision=Rt.sd=function(t){var e,n,a,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ff+t);if(e=xa(i)+1,a=i.d.length-1,n=a*Fr+1,a=i.d[a],a){for(;a%10==0;a/=10)n--;for(a=i.d[0];a>=10;a/=10)n++}return t&&e>n?e:n};Rt.squareRoot=Rt.sqrt=function(){var t,e,n,a,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(so+"NaN")}for(t=xa(l),Hr=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=El(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Gg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),a=new c(e)):a=new c(i.toString()),n=c.precision,i=o=n+3;;)if(s=a,a=s.plus(Ec(l,s,o+2)).times(.5),El(s.d).slice(0,o)===(e=El(a.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Cr(s,n+1,0),s.times(s).eq(l)){a=s;break}}else if(e!="9999")break;o+=4}return Hr=!0,Cr(a,n)};Rt.times=Rt.mul=function(t){var e,n,a,i,s,o,l,c,d,f=this,p=f.constructor,g=f.d,x=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,d=x.length,c<d&&(s=g,g=x,x=s,o=c,c=d,d=o),s=[],o=c+d,a=o;a--;)s.push(0);for(a=d;--a>=0;){for(e=0,i=c+a;i>a;)l=s[i]+x[a]*g[i-a-1]+e,s[i--]=l%Ma|0,e=l/Ma|0;s[i]=(s[i]+e)%Ma|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Hr?Cr(t,p.precision):t};Rt.toDecimalPlaces=Rt.todp=function(t,e){var n=this,a=n.constructor;return n=new a(n),t===void 0?n:(Rl(t,0,Hg),e===void 0?e=a.rounding:Rl(e,0,8),Cr(n,t+xa(n)+1,e))};Rt.toExponential=function(t,e){var n,a=this,i=a.constructor;return t===void 0?n=Af(a,!0):(Rl(t,0,Hg),e===void 0?e=i.rounding:Rl(e,0,8),a=Cr(new i(a),t+1,e),n=Af(a,!0,t+1)),n};Rt.toFixed=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?Af(i):(Rl(t,0,Hg),e===void 0?e=s.rounding:Rl(e,0,8),a=Cr(new s(i),t+xa(i)+1,e),n=Af(a.abs(),!1,t+xa(a)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Rt.toInteger=Rt.toint=function(){var t=this,e=t.constructor;return Cr(new e(t),xa(t)+1,e.rounding)};Rt.toNumber=function(){return+this};Rt.toPower=Rt.pow=function(t){var e,n,a,i,s,o,l=this,c=l.constructor,d=12,f=+(t=new c(t));if(!t.s)return new c(Es);if(l=new c(l),!l.s){if(t.s<1)throw Error(so+"Infinity");return l}if(l.eq(Es))return l;if(a=c.precision,t.eq(Es))return Cr(l,a);if(e=t.e,n=t.d.length-1,o=e>=n,s=l.s,o){if((n=f<0?-f:f)<=nV){for(i=new c(Es),e=Math.ceil(a/Fr+4),Hr=!1;n%2&&(i=i.times(l),KF(i.d,e)),n=Gg(n/2),n!==0;)l=l.times(l),KF(l.d,e);return Hr=!0,t.s<0?new c(Es).div(i):Cr(i,a)}}else if(s<0)throw Error(so+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Hr=!1,i=t.times(Wv(l,a+d)),Hr=!0,i=aV(i),i.s=s,i};Rt.toPrecision=function(t,e){var n,a,i=this,s=i.constructor;return t===void 0?(n=xa(i),a=Af(i,n<=s.toExpNeg||n>=s.toExpPos)):(Rl(t,1,Hg),e===void 0?e=s.rounding:Rl(e,0,8),i=Cr(new s(i),t,e),n=xa(i),a=Af(i,t<=n||n<=s.toExpNeg,t)),a};Rt.toSignificantDigits=Rt.tosd=function(t,e){var n=this,a=n.constructor;return t===void 0?(t=a.precision,e=a.rounding):(Rl(t,1,Hg),e===void 0?e=a.rounding:Rl(e,0,8)),Cr(new a(n),t,e)};Rt.toString=Rt.valueOf=Rt.val=Rt.toJSON=Rt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=xa(t),n=t.constructor;return Af(t,e<=n.toExpNeg||e>=n.toExpPos)};function rV(t,e){var n,a,i,s,o,l,c,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Hr?Cr(e,p):e;if(c=t.d,d=e.d,o=t.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(a=c,s=-s,l=d.length):(a=d,i=o,l=c.length),o=Math.ceil(p/Fr),l=o>l?o+1:l+1,s>l&&(s=l,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for(l=c.length,s=d.length,l-s<0&&(s=l,a=d,d=c,c=a),n=0;s;)n=(c[--s]=c[s]+d[s]+n)/Ma|0,c[s]%=Ma;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Hr?Cr(e,p):e}function Rl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ff+t)}function El(t){var e,n,a,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)a=t[e]+"",n=Fr-a.length,n&&(s+=Wu(n)),s+=a;o=t[e],a=o+"",n=Fr-a.length,n&&(s+=Wu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Ec=function(){function t(a,i){var s,o=0,l=a.length;for(a=a.slice();l--;)s=a[l]*i+o,a[l]=s%Ma|0,o=s/Ma|0;return o&&a.unshift(o),a}function e(a,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(a[l]!=i[l]){c=a[l]>i[l]?1:-1;break}return c}function n(a,i,s){for(var o=0;s--;)a[s]-=o,o=a[s]<i[s]?1:0,a[s]=o*Ma+a[s]-i[s];for(;!a[0]&&a.length>1;)a.shift()}return function(a,i,s,o){var l,c,d,f,p,g,x,b,j,S,_,T,C,E,k,O,I,F,B=a.constructor,$=a.s==i.s?1:-1,L=a.d,V=i.d;if(!a.s)return new B(a);if(!i.s)throw Error(so+"Division by zero");for(c=a.e-i.e,I=V.length,k=L.length,x=new B($),b=x.d=[],d=0;V[d]==(L[d]||0);)++d;if(V[d]>(L[d]||0)&&--c,s==null?T=s=B.precision:o?T=s+(xa(a)-xa(i))+1:T=s,T<0)return new B(0);if(T=T/Fr+2|0,d=0,I==1)for(f=0,V=V[0],T++;(d<k||f)&&T--;d++)C=f*Ma+(L[d]||0),b[d]=C/V|0,f=C%V|0;else{for(f=Ma/(V[0]+1)|0,f>1&&(V=t(V,f),L=t(L,f),I=V.length,k=L.length),E=I,j=L.slice(0,I),S=j.length;S<I;)j[S++]=0;F=V.slice(),F.unshift(0),O=V[0],V[1]>=Ma/2&&++O;do f=0,l=e(V,j,I,S),l<0?(_=j[0],I!=S&&(_=_*Ma+(j[1]||0)),f=_/O|0,f>1?(f>=Ma&&(f=Ma-1),p=t(V,f),g=p.length,S=j.length,l=e(p,j,g,S),l==1&&(f--,n(p,I<g?F:V,g))):(f==0&&(l=f=1),p=V.slice()),g=p.length,g<S&&p.unshift(0),n(j,p,S),l==-1&&(S=j.length,l=e(V,j,I,S),l<1&&(f++,n(j,I<S?F:V,S))),S=j.length):l===0&&(f++,j=[0]),b[d++]=f,l&&j[0]?j[S++]=L[E]||0:(j=[L[E]],S=1);while((E++<k||j[0]!==void 0)&&T--)}return b[0]||b.shift(),x.e=c,Cr(x,o?s+xa(x)+1:s)}}();function aV(t,e){var n,a,i,s,o,l,c=0,d=0,f=t.constructor,p=f.precision;if(xa(t)>16)throw Error(mM+xa(t));if(!t.s)return new f(Es);for(Hr=!1,l=p,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(a=Math.log(Hh(2,d))/Math.LN10*2+5|0,l+=a,n=i=s=new f(Es),f.precision=l;;){if(i=Cr(i.times(t),l),n=n.times(++c),o=s.plus(Ec(i,n,l)),El(o.d).slice(0,l)===El(s.d).slice(0,l)){for(;d--;)s=Cr(s.times(s),l);return f.precision=p,e==null?(Hr=!0,Cr(s,p)):s}s=o}}function xa(t){for(var e=t.e*Fr,n=t.d[0];n>=10;n/=10)e++;return e}function nA(t,e,n){if(e>t.LN10.sd())throw Hr=!0,n&&(t.precision=n),Error(so+"LN10 precision limit exceeded");return Cr(new t(t.LN10),e)}function Wu(t){for(var e="";t--;)e+="0";return e}function Wv(t,e){var n,a,i,s,o,l,c,d,f,p=1,g=10,x=t,b=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(so+(x.s?"NaN":"-Infinity"));if(x.eq(Es))return new j(0);if(e==null?(Hr=!1,d=S):d=e,x.eq(10))return e==null&&(Hr=!0),nA(j,d);if(d+=g,j.precision=d,n=El(b),a=n.charAt(0),s=xa(x),Math.abs(s)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)x=x.times(t),n=El(x.d),a=n.charAt(0),p++;s=xa(x),a>1?(x=new j("0."+n),s++):x=new j(a+"."+n.slice(1))}else return c=nA(j,d+2,S).times(s+""),x=Wv(new j(a+"."+n.slice(1)),d-g).plus(c),j.precision=S,e==null?(Hr=!0,Cr(x,S)):x;for(l=o=x=Ec(x.minus(Es),x.plus(Es),d),f=Cr(x.times(x),d),i=3;;){if(o=Cr(o.times(f),d),c=l.plus(Ec(o,new j(i),d)),El(c.d).slice(0,d)===El(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(nA(j,d+2,S).times(s+""))),l=Ec(l,new j(p),d),j.precision=S,e==null?(Hr=!0,Cr(l,S)):l;l=c,i+=2}}function YF(t,e){var n,a,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(n<0&&(n=a),n+=+e.slice(a+1),e=e.substring(0,a)):n<0&&(n=e.length),a=0;e.charCodeAt(a)===48;)++a;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(a,i),e){if(i-=a,n=n-a-1,t.e=Gg(n/Fr),t.d=[],a=(n+1)%Fr,n<0&&(a+=Fr),a<i){for(a&&t.d.push(+e.slice(0,a)),i-=Fr;a<i;)t.d.push(+e.slice(a,a+=Fr));e=e.slice(a),a=Fr-e.length}else a-=i;for(;a--;)e+="0";if(t.d.push(+e),Hr&&(t.e>Xw||t.e<-Xw))throw Error(mM+n)}else t.s=0,t.e=0,t.d=[0];return t}function Cr(t,e,n){var a,i,s,o,l,c,d,f,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(a=e-o,a<0)a+=Fr,i=e,d=p[f=0];else{if(f=Math.ceil((a+1)/Fr),s=p.length,f>=s)return t;for(d=s=p[f],o=1;s>=10;s/=10)o++;a%=Fr,i=a-Fr+o}if(n!==void 0&&(s=Hh(10,o-i-1),l=d/s%10|0,c=e<0||p[f+1]!==void 0||d%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?i>0?d/Hh(10,o-i):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(s=xa(t),p.length=1,e=e-s-1,p[0]=Hh(10,(Fr-e%Fr)%Fr),t.e=Gg(-e/Fr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(a==0?(p.length=f,s=1,f--):(p.length=f+1,s=Hh(10,Fr-a),p[f]=i>0?(d/Hh(10,o-i)%Hh(10,i)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==Ma&&(p[0]=1,++t.e);break}else{if(p[f]+=s,p[f]!=Ma)break;p[f--]=0,s=1}for(a=p.length;p[--a]===0;)p.pop();if(Hr&&(t.e>Xw||t.e<-Xw))throw Error(mM+xa(t));return t}function iV(t,e){var n,a,i,s,o,l,c,d,f,p,g=t.constructor,x=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Hr?Cr(e,x):e;if(c=t.d,p=e.d,a=e.e,d=t.e,c=c.slice(),o=d-a,o){for(f=o<0,f?(n=c,o=-o,l=p.length):(n=p,a=d,l=c.length),i=Math.max(Math.ceil(x/Fr),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=p.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){f=c[i]<p[i];break}o=0}for(f&&(n=c,c=p,p=n,e.s=-e.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(s=i;s&&c[--s]===0;)c[s]=Ma-1;--c[s],c[i]+=Ma}c[i]-=p[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(e.d=c,e.e=a,Hr?Cr(e,x):e):new g(0)}function Af(t,e,n){var a,i=xa(t),s=El(t.d),o=s.length;return e?(n&&(a=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Wu(a):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Wu(-i-1)+s,n&&(a=n-o)>0&&(s+=Wu(a))):i>=o?(s+=Wu(i+1-o),n&&(a=n-i-1)>0&&(s=s+"."+Wu(a))):((a=i+1)<o&&(s=s.slice(0,a)+"."+s.slice(a)),n&&(a=n-o)>0&&(i+1===o&&(s+="."),s+=Wu(a))),t.s<0?"-"+s:s}function KF(t,e){if(t.length>e)return t.length=e,!0}function sV(t){var e,n,a;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ff+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return YF(o,s.toString())}else if(typeof s!="string")throw Error(ff+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,qwe.test(s))YF(o,s);else throw Error(ff+s)}if(i.prototype=Rt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=sV,i.config=i.set=Uwe,t===void 0&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<a.length;)t.hasOwnProperty(n=a[e++])||(t[n]=this[n]);return i.config(t),i}function Uwe(t){if(!t||typeof t!="object")throw Error(so+"Object expected");var e,n,a,i=["precision",1,Hg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((a=t[n=i[e]])!==void 0)if(Gg(a)===a&&a>=i[e+1]&&a<=i[e+2])this[n]=a;else throw Error(ff+n+": "+a);if((a=t[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(ff+n+": "+a);return this}var gM=sV(zwe);Es=new gM(1);const wr=gM;function Vwe(t){return Ywe(t)||Wwe(t)||Gwe(t)||Hwe()}function Hwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gwe(t,e){if(t){if(typeof t=="string")return TP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TP(t,e)}}function Wwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Ywe(t){if(Array.isArray(t))return TP(t)}function TP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Kwe=function(e){return e},oV={},lV=function(e){return e===oV},QF=function(e){return function n(){return arguments.length===0||arguments.length===1&&lV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Qwe=function t(e,n){return e===1?n:QF(function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==oV}).length;return o>=e?n.apply(void 0,i):t(e-o,QF(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=i.map(function(p){return lV(p)?c.shift():p});return n.apply(void 0,Vwe(f).concat(c))}))})},SS=function(e){return Qwe(e.length,e)},kP=function(e,n){for(var a=[],i=e;i<n;++i)a[i-e]=i;return a},Xwe=SS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Jwe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(!n.length)return Kwe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},AP=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},cV=function(e){var n=null,a=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,a=e.apply(void 0,s)),a}};function Zwe(t){var e;return t===0?e=1:e=Math.floor(new wr(t).abs().log(10).toNumber())+1,e}function eNe(t,e,n){for(var a=new wr(t),i=0,s=[];a.lt(e)&&i<1e5;)s.push(a.toNumber()),a=a.add(n),i++;return s}var tNe=SS(function(t,e,n){var a=+t,i=+e;return a+n*(i-a)}),nNe=SS(function(t,e,n){var a=e-+t;return a=a||1/0,(n-t)/a}),rNe=SS(function(t,e,n){var a=e-+t;return a=a||1/0,Math.max(0,Math.min(1,(n-t)/a))});const _S={rangeStep:eNe,getDigitCount:Zwe,interpolateNumber:tNe,uninterpolateNumber:nNe,uninterpolateTruncation:rNe};function EP(t){return sNe(t)||iNe(t)||uV(t)||aNe()}function aNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iNe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function sNe(t){if(Array.isArray(t))return PP(t)}function Yv(t,e){return cNe(t)||lNe(t,e)||uV(t,e)||oNe()}function oNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uV(t,e){if(t){if(typeof t=="string")return PP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PP(t,e)}}function PP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function lNe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],a=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));a=!0);}catch(c){i=!0,s=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function cNe(t){if(Array.isArray(t))return t}function dV(t){var e=Yv(t,2),n=e[0],a=e[1],i=n,s=a;return n>a&&(i=a,s=n),[i,s]}function hV(t,e,n){if(t.lte(0))return new wr(0);var a=_S.getDigitCount(t.toNumber()),i=new wr(10).pow(a),s=t.div(i),o=a!==1?.05:.1,l=new wr(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return e?c:new wr(Math.ceil(c))}function uNe(t,e,n){var a=1,i=new wr(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(a=new wr(10).pow(_S.getDigitCount(t)-1),i=new wr(Math.floor(i.div(a).toNumber())).mul(a)):s>1&&(i=new wr(Math.floor(t)))}else t===0?i=new wr(Math.floor((e-1)/2)):n||(i=new wr(Math.floor(t)));var o=Math.floor((e-1)/2),l=Jwe(Xwe(function(c){return i.add(new wr(c-o).mul(a)).toNumber()}),kP);return l(0,e)}function fV(t,e,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new wr(0),tickMin:new wr(0),tickMax:new wr(0)};var s=hV(new wr(e).sub(t).div(n-1),a,i),o;t<=0&&e>=0?o=new wr(0):(o=new wr(t).add(e).div(2),o=o.sub(new wr(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new wr(e).sub(o).div(s).toNumber()),d=l+c+1;return d>n?fV(t,e,n,a,i+1):(d<n&&(c=e>0?c+(n-d):c,l=e>0?l:l+(n-d)),{step:s,tickMin:o.sub(new wr(l).mul(s)),tickMax:o.add(new wr(c).mul(s))})}function dNe(t){var e=Yv(t,2),n=e[0],a=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=dV([n,a]),c=Yv(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var p=f===1/0?[d].concat(EP(kP(0,i-1).map(function(){return 1/0}))):[].concat(EP(kP(0,i-1).map(function(){return-1/0})),[f]);return n>a?AP(p):p}if(d===f)return uNe(d,i,s);var g=fV(d,f,o,s),x=g.step,b=g.tickMin,j=g.tickMax,S=_S.rangeStep(b,j.add(new wr(.1).mul(x)),x);return n>a?AP(S):S}function hNe(t,e){var n=Yv(t,2),a=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=dV([a,i]),l=Yv(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[a,i];if(c===d)return[c];var f=Math.max(e,2),p=hV(new wr(d).sub(c).div(f-1),s,0),g=[].concat(EP(_S.rangeStep(new wr(c),new wr(d).sub(new wr(.99).mul(p)),p)),[d]);return a>i?AP(g):g}var fNe=cV(dNe),pNe=cV(hNe),mNe="Invariant failed";function Ef(t,e){throw new Error(mNe)}var gNe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}function Jw(){return Jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Jw.apply(this,arguments)}function yNe(t,e){return jNe(t)||bNe(t,e)||vNe(t,e)||xNe()}function xNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vNe(t,e){if(t){if(typeof t=="string")return XF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XF(t,e)}}function XF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function bNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function jNe(t){if(Array.isArray(t))return t}function wNe(t,e){if(t==null)return{};var n=NNe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function NNe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function SNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Ne(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,gV(a.key),a)}}function CNe(t,e,n){return e&&_Ne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TNe(t,e,n){return e=Zw(e),kNe(t,pV()?Reflect.construct(e,n||[],Zw(t).constructor):e.apply(t,n))}function kNe(t,e){if(e&&(pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ANe(t)}function ANe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pV=function(){return!!t})()}function Zw(t){return Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zw(t)}function ENe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OP(t,e)}function OP(t,e){return OP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},OP(t,e)}function mV(t,e,n){return e=gV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gV(t){var e=PNe(t,"string");return pg(e)=="symbol"?e:e+""}function PNe(t,e){if(pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(pg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ub=function(t){function e(){return SNe(this,e),TNe(this,e,arguments)}return ENe(e,t),CNe(e,[{key:"render",value:function(){var a=this.props,i=a.offset,s=a.layout,o=a.width,l=a.dataKey,c=a.data,d=a.dataPointFormatter,f=a.xAxis,p=a.yAxis,g=wNe(a,gNe),x=zt(g,!1);this.props.direction==="x"&&f.type!=="number"&&Ef();var b=c.map(function(j){var S=d(j,l),_=S.x,T=S.y,C=S.value,E=S.errorVal;if(!E)return null;var k=[],O,I;if(Array.isArray(E)){var F=yNe(E,2);O=F[0],I=F[1]}else O=I=E;if(s==="vertical"){var B=f.scale,$=T+i,L=$+o,V=$-o,H=B(C-O),ne=B(C+I);k.push({x1:ne,y1:L,x2:ne,y2:V}),k.push({x1:H,y1:$,x2:ne,y2:$}),k.push({x1:H,y1:L,x2:H,y2:V})}else if(s==="horizontal"){var Q=p.scale,q=_+i,G=q-o,ie=q+o,W=Q(C-O),z=Q(C+I);k.push({x1:G,y1:z,x2:ie,y2:z}),k.push({x1:q,y1:W,x2:q,y2:z}),k.push({x1:G,y1:W,x2:ie,y2:W})}return Se.createElement(Mn,Jw({className:"recharts-errorBar",key:"bar-".concat(k.map(function(ce){return"".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))},x),k.map(function(ce){return Se.createElement("line",Jw({},ce,{key:"line-".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))}))});return Se.createElement(Mn,{className:"recharts-errorBars"},b)}}])}(Se.Component);mV(Ub,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});mV(Ub,"displayName","ErrorBar");function Kv(t){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(t)}function JF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JF(Object(n),!0).forEach(function(a){ONe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ONe(t,e,n){return e=DNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DNe(t){var e=MNe(t,"string");return Kv(e)=="symbol"?e:e+""}function MNe(t,e){if(Kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Kv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yV=function(e){var n=e.children,a=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=ks(n,Ac);if(!o)return null;var l=Ac.defaultProps,c=l!==void 0?Bh(Bh({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:s==="children"?d=(a||[]).reduce(function(f,p){var g=p.item,x=p.props,b=x.sectors||x.data||[];return f.concat(b.map(function(j){return{type:o.props.iconType||g.props.legendType,value:j.name,color:j.fill,payload:j}}))},[]):d=(a||[]).map(function(f){var p=f.item,g=p.type.defaultProps,x=g!==void 0?Bh(Bh({},g),p.props):{},b=x.dataKey,j=x.name,S=x.legendType,_=x.hide;return{inactive:_,dataKey:b,type:c.iconType||S||"square",color:yM(p),value:j||b,payload:x}}),Bh(Bh(Bh({},c),Ac.getWithHeight(o,i)),{},{payload:d,item:o})};function Qv(t){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qv(t)}function ZF(t){return FNe(t)||LNe(t)||RNe(t)||INe()}function INe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RNe(t,e){if(t){if(typeof t=="string")return DP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DP(t,e)}}function LNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FNe(t){if(Array.isArray(t))return DP(t)}function DP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function e$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e$(Object(n),!0).forEach(function(a){Bm(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Bm(t,e,n){return e=$Ne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Ne(t){var e=BNe(t,"string");return Qv(e)=="symbol"?e:e+""}function BNe(t,e){if(Qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Qv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ca(t,e,n){return hn(t)||hn(e)?n:Ca(e)?Is(t,e,n):an(e)?e(t):n}function wv(t,e,n,a){var i=Fwe(t,function(l){return ca(l,e)});if(n==="number"){var s=i.filter(function(l){return Nt(l)||parseFloat(l)});return s.length?[NS(s),id(s)]:[1/0,-1/0]}var o=a?i.filter(function(l){return!hn(l)}):i;return o.map(function(l){return Ca(l)||l instanceof Date?l:""})}var zNe=function(e){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=a==null?void 0:a.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,d=0;d<l;d++){var f=d>0?i[d-1].coordinate:i[l-1].coordinate,p=i[d].coordinate,g=d>=l-1?i[0].coordinate:i[d+1].coordinate,x=void 0;if(Ri(p-f)!==Ri(g-p)){var b=[];if(Ri(g-p)===Ri(c[1]-c[0])){x=g;var j=p+c[1]-c[0];b[0]=Math.min(j,(j+f)/2),b[1]=Math.max(j,(j+f)/2)}else{x=f;var S=g+c[1]-c[0];b[0]=Math.min(p,(S+p)/2),b[1]=Math.max(p,(S+p)/2)}var _=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(e>_[0]&&e<=_[1]||e>=b[0]&&e<=b[1]){o=i[d].index;break}}else{var T=Math.min(f,g),C=Math.max(f,g);if(e>(T+p)/2&&e<=(C+p)/2){o=i[d].index;break}}}else for(var E=0;E<l;E++)if(E===0&&e<=(a[E].coordinate+a[E+1].coordinate)/2||E>0&&E<l-1&&e>(a[E].coordinate+a[E-1].coordinate)/2&&e<=(a[E].coordinate+a[E+1].coordinate)/2||E===l-1&&e>(a[E].coordinate+a[E-1].coordinate)/2){o=a[E].index;break}return o},yM=function(e){var n,a=e,i=a.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Zr(Zr({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},qNe=function(e){var n=e.barSize,a=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,d=l.length;c<d;c++)for(var f=s[l[c]].stackGroups,p=Object.keys(f),g=0,x=p.length;g<x;g++){var b=f[p[g]],j=b.items,S=b.cateAxisId,_=j.filter(function(I){return kc(I.type).indexOf("Bar")>=0});if(_&&_.length){var T=_[0].type.defaultProps,C=T!==void 0?Zr(Zr({},T),_[0].props):_[0].props,E=C.barSize,k=C[S];o[k]||(o[k]=[]);var O=hn(E)?n:E;o[k].push({item:_[0],stackList:_.slice(1),barSize:hn(O)?void 0:Li(O,a,0)})}}return o},UNe=function(e){var n=e.barGap,a=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=Li(n,i,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var g=!1,x=i/c,b=o.reduce(function(E,k){return E+k.barSize||0},0);b+=(c-1)*d,b>=i&&(b-=(c-1)*d,d=0),b>=i&&x>0&&(g=!0,x*=.9,b=c*x);var j=(i-b)/2>>0,S={offset:j-d,size:0};f=o.reduce(function(E,k){var O={item:k.item,position:{offset:S.offset+S.size+d,size:g?x:k.barSize}},I=[].concat(ZF(E),[O]);return S=I[I.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(F){I.push({item:F,position:S})}),I},p)}else{var _=Li(a,i,0,!0);i-2*_-(c-1)*d<=0&&(d=0);var T=(i-2*_-(c-1)*d)/c;T>1&&(T>>=0);var C=l===+l?Math.min(T,l):T;f=o.reduce(function(E,k,O){var I=[].concat(ZF(E),[{item:k.item,position:{offset:_+(T+d)*O+(T-C)/2,size:C}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(F){I.push({item:F,position:I[I.length-1].position})}),I},p)}return f},VNe=function(e,n,a,i){var s=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),d=yV({children:s,legendWidth:c});if(d){var f=i||{},p=f.width,g=f.height,x=d.align,b=d.verticalAlign,j=d.layout;if((j==="vertical"||j==="horizontal"&&b==="middle")&&x!=="center"&&Nt(e[x]))return Zr(Zr({},e),{},Bm({},x,e[x]+(p||0)));if((j==="horizontal"||j==="vertical"&&x==="center")&&b!=="middle"&&Nt(e[b]))return Zr(Zr({},e),{},Bm({},b,e[b]+(g||0)))}return e},HNe=function(e,n,a){return hn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},xV=function(e,n,a,i,s){var o=n.props.children,l=Rs(o,Ub).filter(function(d){return HNe(i,s,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,f){var p=ca(f,a);if(hn(p))return d;var g=Array.isArray(p)?[NS(p),id(p)]:[p,p],x=c.reduce(function(b,j){var S=ca(f,j,0),_=g[0]-Math.abs(Array.isArray(S)?S[0]:S),T=g[1]+Math.abs(Array.isArray(S)?S[1]:S);return[Math.min(_,b[0]),Math.max(T,b[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},GNe=function(e,n,a,i,s){var o=n.map(function(l){return xV(e,l,a,s,i)}).filter(function(l){return!hn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},vV=function(e,n,a,i,s){var o=n.map(function(c){var d=c.props.dataKey;return a==="number"&&d&&xV(e,c,d,i)||wv(e,d,a,s)});if(a==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var f=0,p=d.length;f<p;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},bV=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},jV=function(e,n,a,i){if(i)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===a&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(a),l},Sc=function(e,n,a){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||a)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ri(l[0]-l[1])*2*d:d,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(p){var g=s?s.indexOf(p):p;return{coordinate:i(g)+d,value:p,offset:d}});return f.filter(function(p){return!qg(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,g){return{coordinate:i(p)+d,value:p,index:g,offset:d}}):i.ticks&&!a?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+d,value:p,offset:d}}):i.domain().map(function(p,g){return{coordinate:i(p)+d,value:s?s[p]:p,index:g,offset:d}})},rA=new WeakMap,Mj=function(e,n){if(typeof n!="function")return e;rA.has(e)||rA.set(e,new WeakMap);var a=rA.get(e);if(a.has(n))return a.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,i),i},wV=function(e,n,a){var i=e.scale,s=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:qv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Ww(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:jv(),realScaleType:"point"}:s==="category"?{scale:qv(),realScaleType:"band"}:{scale:Ww(),realScaleType:"linear"};if(_f(i)){var c="scale".concat(cS(i));return{scale:($F[c]||jv)(),realScaleType:$F[c]?c:"point"}}return an(i)?{scale:i}:{scale:jv(),realScaleType:"point"}},t$=1e-4,NV=function(e){var n=e.domain();if(!(!n||n.length<=2)){var a=n.length,i=e.range(),s=Math.min(i[0],i[1])-t$,o=Math.max(i[0],i[1])+t$,l=e(n[0]),c=e(n[a-1]);(l<s||l>o||c<s||c>o)&&e.domain([n[0],n[a-1]])}},WNe=function(e,n){if(!e)return null;for(var a=0,i=e.length;a<i;a++)if(e[a].item===n)return e[a].position;return null},YNe=function(e,n){if(!n||n.length!==2||!Nt(n[0])||!Nt(n[1]))return e;var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Nt(e[0])||e[0]<a)&&(s[0]=a),(!Nt(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<a&&(s[1]=a),s},KNe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0,l=0;l<n;++l){var c=qg(e[l][a][1])?e[l][a][0]:e[l][a][1];c>=0?(e[l][a][0]=s,e[l][a][1]=s+c,s=e[l][a][1]):(e[l][a][0]=o,e[l][a][1]=o+c,o=e[l][a][1])}},QNe=function(e){var n=e.length;if(!(n<=0))for(var a=0,i=e[0].length;a<i;++a)for(var s=0,o=0;o<n;++o){var l=qg(e[o][a][1])?e[o][a][0]:e[o][a][1];l>=0?(e[o][a][0]=s,e[o][a][1]=s+l,s=e[o][a][1]):(e[o][a][0]=0,e[o][a][1]=0)}},XNe={sign:KNe,expand:Fxe,none:sg,silhouette:$xe,wiggle:Bxe,positive:QNe},JNe=function(e,n,a){var i=n.map(function(l){return l.props.dataKey}),s=XNe[a],o=Lxe().keys(i).value(function(l,c){return+ca(l,c,0)}).order(cP).offset(s);return o(e)},ZNe=function(e,n,a,i,s,o){if(!e)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(p,g){var x,b=(x=g.type)!==null&&x!==void 0&&x.defaultProps?Zr(Zr({},g.type.defaultProps),g.props):g.props,j=b.stackId,S=b.hide;if(S)return p;var _=b[a],T=p[_]||{hasStack:!1,stackGroups:{}};if(Ca(j)){var C=T.stackGroups[j]||{numericAxisId:a,cateAxisId:i,items:[]};C.items.push(g),T.hasStack=!0,T.stackGroups[j]=C}else T.stackGroups[If("_stackId_")]={numericAxisId:a,cateAxisId:i,items:[g]};return Zr(Zr({},p),{},Bm({},_,T))},c),f={};return Object.keys(d).reduce(function(p,g){var x=d[g];if(x.hasStack){var b={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(j,S){var _=x.stackGroups[S];return Zr(Zr({},j),{},Bm({},S,{numericAxisId:a,cateAxisId:i,items:_.items,stackedData:JNe(e,_.items,s)}))},b)}return Zr(Zr({},p),{},Bm({},g,x))},f)},SV=function(e,n){var a=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=a||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var f=fNe(d,s,l);return e.domain([NS(f),id(f)]),{niceTicks:f}}if(s&&i==="number"){var p=e.domain(),g=pNe(p,s,l);return{niceTicks:g}}return null};function eN(t){var e=t.axis,n=t.ticks,a=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!hn(i[e.dataKey])){var l=Aw(n,"value",i[e.dataKey]);if(l)return l.coordinate+a/2}return n[s]?n[s].coordinate+a/2:null}var c=ca(i,hn(o)?e.dataKey:o);return hn(c)?null:e.scale(c)}var n$=function(e){var n=e.axis,a=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return a[l]?a[l].coordinate+i:null;var c=ca(o,n.dataKey,n.domain[l]);return hn(c)?null:n.scale(c)-s/2+i},eSe=function(e){var n=e.numericAxis,a=n.scale.domain();if(n.type==="number"){var i=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);return i<=0&&s>=0?0:s<0?s:i}return a[0]},tSe=function(e,n){var a,i=(a=e.type)!==null&&a!==void 0&&a.defaultProps?Zr(Zr({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Ca(s)){var o=n[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},nSe=function(e){return e.reduce(function(n,a){return[NS(a.concat([n[0]]).filter(Nt)),id(a.concat([n[1]]).filter(Nt))]},[1/0,-1/0])},_V=function(e,n,a){return Object.keys(e).reduce(function(i,s){var o=e[s],l=o.stackedData,c=l.reduce(function(d,f){var p=nSe(f.slice(n,a+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},r$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,a$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MP=function(e,n,a){if(an(e))return e(n,a);if(!Array.isArray(e))return n;var i=[];if(Nt(e[0]))i[0]=a?e[0]:Math.min(e[0],n[0]);else if(r$.test(e[0])){var s=+r$.exec(e[0])[1];i[0]=n[0]-s}else an(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Nt(e[1]))i[1]=a?e[1]:Math.max(e[1],n[1]);else if(a$.test(e[1])){var o=+a$.exec(e[1])[1];i[1]=n[1]+o}else an(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},tN=function(e,n,a){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!a||i>0)return i}if(e&&n&&n.length>=2){for(var s=HD(n,function(p){return p.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var d=s[l],f=s[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},i$=function(e,n,a){return!e||!e.length||kf(e,Is(a,"type.defaultProps.domain"))?n:e},CV=function(e,n){var a=e.type.defaultProps?Zr(Zr({},e.type.defaultProps),e.props):e.props,i=a.dataKey,s=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,d=a.chartType,f=a.hide;return Zr(Zr({},zt(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:yM(e),value:ca(n,i),type:c,payload:n,chartType:d,hide:f})};function Xv(t){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(t)}function s$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function gc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s$(Object(n),!0).forEach(function(a){TV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function TV(t,e,n){return e=rSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rSe(t){var e=aSe(t,"string");return Xv(e)=="symbol"?e:e+""}function aSe(t,e){if(Xv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Xv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iSe(t,e){return cSe(t)||lSe(t,e)||oSe(t,e)||sSe()}function sSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oSe(t,e){if(t){if(typeof t=="string")return o$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o$(t,e)}}function o$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function lSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function cSe(t){if(Array.isArray(t))return t}var nN=Math.PI/180,uSe=function(e){return e*180/Math.PI},Rr=function(e,n,a,i){return{x:e+Math.cos(-nN*i)*a,y:n+Math.sin(-nN*i)*a}},kV=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},dSe=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,f=Li(e.cx,o,o/2),p=Li(e.cy,l,l/2),g=kV(o,l,a),x=Li(e.innerRadius,g,0),b=Li(e.outerRadius,g,g*.8),j=Object.keys(n);return j.reduce(function(S,_){var T=n[_],C=T.domain,E=T.reversed,k;if(hn(T.range))i==="angleAxis"?k=[c,d]:i==="radiusAxis"&&(k=[x,b]),E&&(k=[k[1],k[0]]);else{k=T.range;var O=k,I=iSe(O,2);c=I[0],d=I[1]}var F=wV(T,s),B=F.realScaleType,$=F.scale;$.domain(C).range(k),NV($);var L=SV($,gc(gc({},T),{},{realScaleType:B})),V=gc(gc(gc({},T),L),{},{range:k,radius:b,realScaleType:B,scale:$,cx:f,cy:p,innerRadius:x,outerRadius:b,startAngle:c,endAngle:d});return gc(gc({},S),{},TV({},_,V))},{})},hSe=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(a-s,2)+Math.pow(i-o,2))},fSe=function(e,n){var a=e.x,i=e.y,s=n.cx,o=n.cy,l=hSe({x:a,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(a-s)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:uSe(d),angleInRadian:d}},pSe=function(e){var n=e.startAngle,a=e.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:a-o*360}},mSe=function(e,n){var a=n.startAngle,i=n.endAngle,s=Math.floor(a/360),o=Math.floor(i/360),l=Math.min(s,o);return e+l*360},l$=function(e,n){var a=e.x,i=e.y,s=fSe({x:a,y:i},n),o=s.radius,l=s.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var f=pSe(n),p=f.startAngle,g=f.endAngle,x=l,b;if(p<=g){for(;x>g;)x-=360;for(;x<p;)x+=360;b=x>=p&&x<=g}else{for(;x>p;)x-=360;for(;x<g;)x+=360;b=x>=g&&x<=p}return b?gc(gc({},n),{},{radius:o,angle:mSe(x,n)}):null},AV=function(e){return!v.isValidElement(e)&&!an(e)&&typeof e!="boolean"?e.className:""};function Jv(t){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(t)}var gSe=["offset"];function ySe(t){return jSe(t)||bSe(t)||vSe(t)||xSe()}function xSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vSe(t,e){if(t){if(typeof t=="string")return IP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IP(t,e)}}function bSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jSe(t){if(Array.isArray(t))return IP(t)}function IP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function wSe(t,e){if(t==null)return{};var n=NSe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function NSe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function c$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(n),!0).forEach(function(a){SSe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function SSe(t,e,n){return e=_Se(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Se(t){var e=CSe(t,"string");return Jv(e)=="symbol"?e:e+""}function CSe(t,e){if(Jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Jv(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Zv.apply(this,arguments)}var TSe=function(e){var n=e.value,a=e.formatter,i=hn(e.children)?n:e.children;return an(a)?a(i):i},kSe=function(e,n){var a=Ri(n-e),i=Math.min(Math.abs(n-e),360);return a*i},ASe=function(e,n,a){var i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,d=c.cx,f=c.cy,p=c.innerRadius,g=c.outerRadius,x=c.startAngle,b=c.endAngle,j=c.clockWise,S=(p+g)/2,_=kSe(x,b),T=_>=0?1:-1,C,E;i==="insideStart"?(C=x+T*o,E=j):i==="insideEnd"?(C=b-T*o,E=!j):i==="end"&&(C=b+T*o,E=j),E=_<=0?E:!E;var k=Rr(d,f,S,C),O=Rr(d,f,S,C+(E?1:-1)*359),I="M".concat(k.x,",").concat(k.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(E?0:1,`,
    `).concat(O.x,",").concat(O.y),F=hn(e.id)?If("recharts-radial-line-"):e.id;return Se.createElement("text",Zv({},a,{dominantBaseline:"central",className:pn("recharts-radial-bar-label",l)}),Se.createElement("defs",null,Se.createElement("path",{id:F,d:I})),Se.createElement("textPath",{xlinkHref:"#".concat(F)},n))},ESe=function(e){var n=e.viewBox,a=e.offset,i=e.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,d=s.outerRadius,f=s.startAngle,p=s.endAngle,g=(f+p)/2;if(i==="outside"){var x=Rr(o,l,d+a,g),b=x.x,j=x.y;return{x:b,y:j,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var S=(c+d)/2,_=Rr(o,l,S,g),T=_.x,C=_.y;return{x:T,y:C,textAnchor:"middle",verticalAnchor:"middle"}},PSe=function(e){var n=e.viewBox,a=e.parentViewBox,i=e.offset,s=e.position,o=n,l=o.x,c=o.y,d=o.width,f=o.height,p=f>=0?1:-1,g=p*i,x=p>0?"end":"start",b=p>0?"start":"end",j=d>=0?1:-1,S=j*i,_=j>0?"end":"start",T=j>0?"start":"end";if(s==="top"){var C={x:l+d/2,y:c-p*i,textAnchor:"middle",verticalAnchor:x};return Na(Na({},C),a?{height:Math.max(c-a.y,0),width:d}:{})}if(s==="bottom"){var E={x:l+d/2,y:c+f+g,textAnchor:"middle",verticalAnchor:b};return Na(Na({},E),a?{height:Math.max(a.y+a.height-(c+f),0),width:d}:{})}if(s==="left"){var k={x:l-S,y:c+f/2,textAnchor:_,verticalAnchor:"middle"};return Na(Na({},k),a?{width:Math.max(k.x-a.x,0),height:f}:{})}if(s==="right"){var O={x:l+d+S,y:c+f/2,textAnchor:T,verticalAnchor:"middle"};return Na(Na({},O),a?{width:Math.max(a.x+a.width-O.x,0),height:f}:{})}var I=a?{width:d,height:f}:{};return s==="insideLeft"?Na({x:l+S,y:c+f/2,textAnchor:T,verticalAnchor:"middle"},I):s==="insideRight"?Na({x:l+d-S,y:c+f/2,textAnchor:_,verticalAnchor:"middle"},I):s==="insideTop"?Na({x:l+d/2,y:c+g,textAnchor:"middle",verticalAnchor:b},I):s==="insideBottom"?Na({x:l+d/2,y:c+f-g,textAnchor:"middle",verticalAnchor:x},I):s==="insideTopLeft"?Na({x:l+S,y:c+g,textAnchor:T,verticalAnchor:b},I):s==="insideTopRight"?Na({x:l+d-S,y:c+g,textAnchor:_,verticalAnchor:b},I):s==="insideBottomLeft"?Na({x:l+S,y:c+f-g,textAnchor:T,verticalAnchor:x},I):s==="insideBottomRight"?Na({x:l+d-S,y:c+f-g,textAnchor:_,verticalAnchor:x},I):zg(s)&&(Nt(s.x)||Xh(s.x))&&(Nt(s.y)||Xh(s.y))?Na({x:l+Li(s.x,d),y:c+Li(s.y,f),textAnchor:"end",verticalAnchor:"end"},I):Na({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},I)},OSe=function(e){return"cx"in e&&Nt(e.cx)};function Ia(t){var e=t.offset,n=e===void 0?5:e,a=wSe(t,gSe),i=Na({offset:n},a),s=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,f=i.className,p=f===void 0?"":f,g=i.textBreakAll;if(!s||hn(l)&&hn(c)&&!v.isValidElement(d)&&!an(d))return null;if(v.isValidElement(d))return v.cloneElement(d,i);var x;if(an(d)){if(x=v.createElement(d,i),v.isValidElement(x))return x}else x=TSe(i);var b=OSe(s),j=zt(i,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return ASe(i,x,j);var S=b?ESe(i):PSe(i);return Se.createElement(Tf,Zv({className:pn("recharts-label",p)},j,S,{breakAll:g}),x)}Ia.displayName="Label";var EV=function(e){var n=e.cx,a=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,f=e.outerRadius,p=e.x,g=e.y,x=e.top,b=e.left,j=e.width,S=e.height,_=e.clockWise,T=e.labelViewBox;if(T)return T;if(Nt(j)&&Nt(S)){if(Nt(p)&&Nt(g))return{x:p,y:g,width:j,height:S};if(Nt(x)&&Nt(b))return{x,y:b,width:j,height:S}}return Nt(p)&&Nt(g)?{x:p,y:g,width:0,height:0}:Nt(n)&&Nt(a)?{cx:n,cy:a,startAngle:s||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:_}:e.viewBox?e.viewBox:{}},DSe=function(e,n){return e?e===!0?Se.createElement(Ia,{key:"label-implicit",viewBox:n}):Ca(e)?Se.createElement(Ia,{key:"label-implicit",viewBox:n,value:e}):v.isValidElement(e)?e.type===Ia?v.cloneElement(e,{key:"label-implicit",viewBox:n}):Se.createElement(Ia,{key:"label-implicit",content:e,viewBox:n}):an(e)?Se.createElement(Ia,{key:"label-implicit",content:e,viewBox:n}):zg(e)?Se.createElement(Ia,Zv({viewBox:n},e,{key:"label-implicit"})):null:null},MSe=function(e,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&a&&!e.label)return null;var i=e.children,s=EV(e),o=Rs(i,Ia).map(function(c,d){return v.cloneElement(c,{viewBox:n||s,key:"label-".concat(d)})});if(!a)return o;var l=DSe(e.label,n||s);return[l].concat(ySe(o))};Ia.parseViewBox=EV;Ia.renderCallByParent=MSe;var aA,u$;function ISe(){if(u$)return aA;u$=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return aA=t,aA}var RSe=ISe();const LSe=Wn(RSe);function eb(t){"@babel/helpers - typeof";return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eb(t)}var FSe=["valueAccessor"],$Se=["data","dataKey","clockWise","id","textBreakAll"];function BSe(t){return VSe(t)||USe(t)||qSe(t)||zSe()}function zSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qSe(t,e){if(t){if(typeof t=="string")return RP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RP(t,e)}}function USe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VSe(t){if(Array.isArray(t))return RP(t)}function RP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function rN(){return rN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},rN.apply(this,arguments)}function d$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function h$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d$(Object(n),!0).forEach(function(a){HSe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function HSe(t,e,n){return e=GSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GSe(t){var e=WSe(t,"string");return eb(e)=="symbol"?e:e+""}function WSe(t,e){if(eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(eb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f$(t,e){if(t==null)return{};var n=YSe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function YSe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var KSe=function(e){return Array.isArray(e.value)?LSe(e.value):e.value};function Ml(t){var e=t.valueAccessor,n=e===void 0?KSe:e,a=f$(t,FSe),i=a.data,s=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=f$(a,$Se);return!i||!i.length?null:Se.createElement(Mn,{className:"recharts-label-list"},i.map(function(f,p){var g=hn(s)?n(f,p):ca(f&&f.payload,s),x=hn(l)?{}:{id:"".concat(l,"-").concat(p)};return Se.createElement(Ia,rN({},zt(f,!0),d,x,{parentViewBox:f.parentViewBox,value:g,textBreakAll:c,viewBox:Ia.parseViewBox(hn(o)?f:h$(h$({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Ml.displayName="LabelList";function QSe(t,e){return t?t===!0?Se.createElement(Ml,{key:"labelList-implicit",data:e}):Se.isValidElement(t)||an(t)?Se.createElement(Ml,{key:"labelList-implicit",data:e,content:t}):zg(t)?Se.createElement(Ml,rN({data:e},t,{key:"labelList-implicit"})):null:null}function XSe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=Rs(a,Ml).map(function(o,l){return v.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var s=QSe(t.label,e);return[s].concat(BSe(i))}Ml.renderCallByParent=XSe;function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}function LP(){return LP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},LP.apply(this,arguments)}function p$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function m$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p$(Object(n),!0).forEach(function(a){JSe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function JSe(t,e,n){return e=ZSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZSe(t){var e=e_e(t,"string");return tb(e)=="symbol"?e:e+""}function e_e(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(tb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t_e=function(e,n){var a=Ri(n-e),i=Math.min(Math.abs(n-e),359.999);return a*i},Ij=function(e){var n=e.cx,a=e.cy,i=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,f=c*(l?1:-1)+i,p=Math.asin(c/f)/nN,g=d?s:s+o*p,x=Rr(n,a,f,g),b=Rr(n,a,i,g),j=d?s-o*p:s,S=Rr(n,a,f*Math.cos(p*nN),j);return{center:x,circleTangency:b,lineTangency:S,theta:p}},PV=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=t_e(o,l),d=o+c,f=Rr(n,a,s,o),p=Rr(n,a,s,d),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var x=Rr(n,a,i,o),b=Rr(n,a,i,d);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(n,",").concat(a," Z");return g},n_e=function(e){var n=e.cx,a=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,f=e.endAngle,p=Ri(f-d),g=Ij({cx:n,cy:a,radius:s,angle:d,sign:p,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,b=g.lineTangency,j=g.theta,S=Ij({cx:n,cy:a,radius:s,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:c}),_=S.circleTangency,T=S.lineTangency,C=S.theta,E=c?Math.abs(d-f):Math.abs(d-f)-j-C;if(E<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):PV({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f});var k="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(E>180),",").concat(+(p<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
  `);if(i>0){var O=Ij({cx:n,cy:a,radius:i,angle:d,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=O.circleTangency,F=O.lineTangency,B=O.theta,$=Ij({cx:n,cy:a,radius:i,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),L=$.circleTangency,V=$.lineTangency,H=$.theta,ne=c?Math.abs(d-f):Math.abs(d-f)-B-H;if(ne<0&&o===0)return"".concat(k,"L").concat(n,",").concat(a,"Z");k+="L".concat(V.x,",").concat(V.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ne>180),",").concat(+(p>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(F.x,",").concat(F.y,"Z")}else k+="L".concat(n,",").concat(a,"Z");return k},r_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},OV=function(e){var n=m$(m$({},r_e),e),a=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,f=n.startAngle,p=n.endAngle,g=n.className;if(o<s||f===p)return null;var x=pn("recharts-sector",g),b=o-s,j=Li(l,b,0,!0),S;return j>0&&Math.abs(f-p)<360?S=n_e({cx:a,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(j,b/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:p}):S=PV({cx:a,cy:i,innerRadius:s,outerRadius:o,startAngle:f,endAngle:p}),Se.createElement("path",LP({},zt(n,!0),{className:x,d:S,role:"img"}))};function nb(t){"@babel/helpers - typeof";return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nb(t)}function FP(){return FP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},FP.apply(this,arguments)}function g$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function y$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g$(Object(n),!0).forEach(function(a){a_e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function a_e(t,e,n){return e=i_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i_e(t){var e=s_e(t,"string");return nb(e)=="symbol"?e:e+""}function s_e(t,e){if(nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(nb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x$={curveBasisClosed:Cxe,curveBasisOpen:Txe,curveBasis:_xe,curveBumpX:dxe,curveBumpY:hxe,curveLinearClosed:kxe,curveLinear:dS,curveMonotoneX:Axe,curveMonotoneY:Exe,curveNatural:Pxe,curveStep:Oxe,curveStepAfter:Mxe,curveStepBefore:Dxe},Rj=function(e){return e.x===+e.x&&e.y===+e.y},ev=function(e){return e.x},tv=function(e){return e.y},o_e=function(e,n){if(an(e))return e;var a="curve".concat(cS(e));return(a==="curveMonotone"||a==="curveBump")&&n?x$["".concat(a).concat(n==="vertical"?"Y":"X")]:x$[a]||dS},l_e=function(e){var n=e.type,a=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,f=o_e(a,l),p=d?s.filter(function(j){return Rj(j)}):s,g;if(Array.isArray(o)){var x=d?o.filter(function(j){return Rj(j)}):o,b=p.map(function(j,S){return y$(y$({},j),{},{base:x[S]})});return l==="vertical"?g=Tj().y(tv).x1(ev).x0(function(j){return j.base.x}):g=Tj().x(ev).y1(tv).y0(function(j){return j.base.y}),g.defined(Rj).curve(f),g(b)}return l==="vertical"&&Nt(o)?g=Tj().y(tv).x1(ev).x0(o):Nt(o)?g=Tj().x(ev).y1(tv).y0(o):g=E9().x(ev).y(tv),g.defined(Rj).curve(f),g(p)},pf=function(e){var n=e.className,a=e.points,i=e.path,s=e.pathRef;if((!a||!a.length)&&!i)return null;var o=a&&a.length?l_e(e):i;return v.createElement("path",FP({},zt(e,!1),Ew(e),{className:pn("recharts-curve",n),d:o,ref:s}))},iA={exports:{}},sA,v$;function c_e(){if(v$)return sA;v$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sA=t,sA}var oA,b$;function u_e(){if(b$)return oA;b$=1;var t=c_e();function e(){}function n(){}return n.resetWarningCache=e,oA=function(){function a(o,l,c,d,f,p){if(p!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}a.isRequired=a;function i(){return a}var s={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},oA}var j$;function d_e(){return j$||(j$=1,iA.exports=u_e()()),iA.exports}var h_e=d_e();const hr=Wn(h_e);var f_e=Object.getOwnPropertyNames,p_e=Object.getOwnPropertySymbols,m_e=Object.prototype.hasOwnProperty;function w$(t,e){return function(a,i,s){return t(a,i,s)&&e(a,i,s)}}function Lj(t){return function(n,a,i){if(!n||!a||typeof n!="object"||typeof a!="object")return t(n,a,i);var s=i.cache,o=s.get(n),l=s.get(a);if(o&&l)return o===a&&l===n;s.set(n,a),s.set(a,n);var c=t(n,a,i);return s.delete(n),s.delete(a),c}}function N$(t){return f_e(t).concat(p_e(t))}var g_e=Object.hasOwn||function(t,e){return m_e.call(t,e)};function Ff(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var y_e="__v",x_e="__o",v_e="_owner",S$=Object.getOwnPropertyDescriptor,_$=Object.keys;function b_e(t,e,n){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(!n.equals(t[a],e[a],a,a,t,e,n))return!1;return!0}function j_e(t,e){return Ff(t.getTime(),e.getTime())}function w_e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function N_e(t,e){return t===e}function C$(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var d=e.entries(),f=!1,p=0;(l=d.next())&&!l.done;){if(i[p]){p++;continue}var g=o.value,x=l.value;if(n.equals(g[0],x[0],c,p,t,e,n)&&n.equals(g[1],x[1],g[0],x[0],t,e,n)){f=i[p]=!0;break}p++}if(!f)return!1;c++}return!0}var S_e=Ff;function __e(t,e,n){var a=_$(t),i=a.length;if(_$(e).length!==i)return!1;for(;i-- >0;)if(!DV(t,e,n,a[i]))return!1;return!0}function nv(t,e,n){var a=N$(t),i=a.length;if(N$(e).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=a[i],!DV(t,e,n,s)||(o=S$(t,s),l=S$(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function C_e(t,e){return Ff(t.valueOf(),e.valueOf())}function T_e(t,e){return t.source===e.source&&t.flags===e.flags}function T$(t,e,n){var a=t.size;if(a!==e.size)return!1;if(!a)return!0;for(var i=new Array(a),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),d=!1,f=0;(l=c.next())&&!l.done;){if(!i[f]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1}return!0}function k_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function A_e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function DV(t,e,n,a){return(a===v_e||a===x_e||a===y_e)&&(t.$$typeof||e.$$typeof)?!0:g_e(e,a)&&n.equals(t[a],e[a],a,a,t,e,n)}var E_e="[object Arguments]",P_e="[object Boolean]",O_e="[object Date]",D_e="[object Error]",M_e="[object Map]",I_e="[object Number]",R_e="[object Object]",L_e="[object RegExp]",F_e="[object Set]",$_e="[object String]",B_e="[object URL]",z_e=Array.isArray,k$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,A$=Object.assign,q_e=Object.prototype.toString.call.bind(Object.prototype.toString);function U_e(t){var e=t.areArraysEqual,n=t.areDatesEqual,a=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,f=t.areSetsEqual,p=t.areTypedArraysEqual,g=t.areUrlsEqual;return function(b,j,S){if(b===j)return!0;if(b==null||j==null)return!1;var _=typeof b;if(_!==typeof j)return!1;if(_!=="object")return _==="number"?o(b,j,S):_==="function"?i(b,j,S):!1;var T=b.constructor;if(T!==j.constructor)return!1;if(T===Object)return l(b,j,S);if(z_e(b))return e(b,j,S);if(k$!=null&&k$(b))return p(b,j,S);if(T===Date)return n(b,j,S);if(T===RegExp)return d(b,j,S);if(T===Map)return s(b,j,S);if(T===Set)return f(b,j,S);var C=q_e(b);return C===O_e?n(b,j,S):C===L_e?d(b,j,S):C===M_e?s(b,j,S):C===F_e?f(b,j,S):C===R_e?typeof b.then!="function"&&typeof j.then!="function"&&l(b,j,S):C===B_e?g(b,j,S):C===D_e?a(b,j,S):C===E_e?l(b,j,S):C===P_e||C===I_e||C===$_e?c(b,j,S):!1}}function V_e(t){var e=t.circular,n=t.createCustomConfig,a=t.strict,i={areArraysEqual:a?nv:b_e,areDatesEqual:j_e,areErrorsEqual:w_e,areFunctionsEqual:N_e,areMapsEqual:a?w$(C$,nv):C$,areNumbersEqual:S_e,areObjectsEqual:a?nv:__e,arePrimitiveWrappersEqual:C_e,areRegExpsEqual:T_e,areSetsEqual:a?w$(T$,nv):T$,areTypedArraysEqual:a?nv:k_e,areUrlsEqual:A_e};if(n&&(i=A$({},i,n(i))),e){var s=Lj(i.areArraysEqual),o=Lj(i.areMapsEqual),l=Lj(i.areObjectsEqual),c=Lj(i.areSetsEqual);i=A$({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function H_e(t){return function(e,n,a,i,s,o,l){return t(e,n,l)}}function G_e(t){var e=t.circular,n=t.comparator,a=t.createState,i=t.equals,s=t.strict;if(a)return function(c,d){var f=a(),p=f.cache,g=p===void 0?e?new WeakMap:void 0:p,x=f.meta;return n(c,d,{cache:g,equals:i,meta:x,strict:s})};if(e)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,d){return n(c,d,o)}}var W_e=Sd();Sd({strict:!0});Sd({circular:!0});Sd({circular:!0,strict:!0});Sd({createInternalComparator:function(){return Ff}});Sd({strict:!0,createInternalComparator:function(){return Ff}});Sd({circular:!0,createInternalComparator:function(){return Ff}});Sd({circular:!0,createInternalComparator:function(){return Ff},strict:!0});function Sd(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,a=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,l=V_e(t),c=U_e(l),d=a?a(c):H_e(c);return G_e({circular:n,comparator:c,createState:i,equals:d,strict:o})}function Y_e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function E$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):Y_e(i)};requestAnimationFrame(a)}function $P(t){"@babel/helpers - typeof";return $P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$P(t)}function K_e(t){return Z_e(t)||J_e(t)||X_e(t)||Q_e()}function Q_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X_e(t,e){if(t){if(typeof t=="string")return P$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P$(t,e)}}function P$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function J_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Z_e(t){if(Array.isArray(t))return t}function eCe(){var t={},e=function(){return null},n=!1,a=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=K_e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){E$(i.bind(null,d),c);return}i(c),E$(i.bind(null,d));return}$P(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,a(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function rb(t){"@babel/helpers - typeof";return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rb(t)}function O$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function D$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O$(Object(n),!0).forEach(function(a){MV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function MV(t,e,n){return e=tCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tCe(t){var e=nCe(t,"string");return rb(e)==="symbol"?e:String(e)}function nCe(t,e){if(rb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(rb(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rCe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(a,i){return a.filter(function(s){return i.includes(s)})})},aCe=function(e){return e},iCe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Nv=function(e,n){return Object.keys(n).reduce(function(a,i){return D$(D$({},a),{},MV({},i,e(i,n[i])))},{})},M$=function(e,n,a){return e.map(function(i){return"".concat(iCe(i)," ").concat(n,"ms ").concat(a)}).join(",")};function sCe(t,e){return cCe(t)||lCe(t,e)||IV(t,e)||oCe()}function oCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function cCe(t){if(Array.isArray(t))return t}function uCe(t){return fCe(t)||hCe(t)||IV(t)||dCe()}function dCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IV(t,e){if(t){if(typeof t=="string")return BP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BP(t,e)}}function hCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fCe(t){if(Array.isArray(t))return BP(t)}function BP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var aN=1e-4,RV=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},LV=function(e,n){return e.map(function(a,i){return a*Math.pow(n,i)}).reduce(function(a,i){return a+i})},I$=function(e,n){return function(a){var i=RV(e,n);return LV(i,a)}},pCe=function(e,n){return function(a){var i=RV(e,n),s=[].concat(uCe(i.map(function(o,l){return o*l}).slice(1)),[0]);return LV(s,a)}},R$=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(S){return parseFloat(S)}),f=sCe(d,4);i=f[0],s=f[1],o=f[2],l=f[3]}}}var p=I$(i,o),g=I$(s,l),x=pCe(i,o),b=function(_){return _>1?1:_<0?0:_},j=function(_){for(var T=_>1?1:_,C=T,E=0;E<8;++E){var k=p(C)-T,O=x(C);if(Math.abs(k-T)<aN||O<aN)return g(C);C=b(C-k/O)}return g(C)};return j.isStepper=!1,j},mCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,a=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(f,p,g){var x=-(f-p)*a,b=g*s,j=g+(x-b)*l/1e3,S=g*l/1e3+f;return Math.abs(S-p)<aN&&Math.abs(j)<aN?[p,0]:[S,j]};return c.isStepper=!0,c.dt=l,c},gCe=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return R$(i);case"spring":return mCe();default:if(i.split("(")[0]==="cubic-bezier")return R$(i)}return typeof i=="function"?i:null};function ab(t){"@babel/helpers - typeof";return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}function L$(t){return vCe(t)||xCe(t)||FV(t)||yCe()}function yCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vCe(t){if(Array.isArray(t))return qP(t)}function F$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Ga(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(n),!0).forEach(function(a){zP(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function zP(t,e,n){return e=bCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bCe(t){var e=jCe(t,"string");return ab(e)==="symbol"?e:String(e)}function jCe(t,e){if(ab(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ab(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wCe(t,e){return _Ce(t)||SCe(t,e)||FV(t,e)||NCe()}function NCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FV(t,e){if(t){if(typeof t=="string")return qP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qP(t,e)}}function qP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function SCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function _Ce(t){if(Array.isArray(t))return t}var iN=function(e,n,a){return e+(n-e)*a},UP=function(e){var n=e.from,a=e.to;return n!==a},CCe=function t(e,n,a){var i=Nv(function(s,o){if(UP(o)){var l=e(o.from,o.to,o.velocity),c=wCe(l,2),d=c[0],f=c[1];return Ga(Ga({},o),{},{from:d,velocity:f})}return o},n);return a<1?Nv(function(s,o){return UP(o)?Ga(Ga({},o),{},{velocity:iN(o.velocity,i[s].velocity,a),from:iN(o.from,i[s].from,a)}):o},n):t(e,i,a-1)};const TCe=function(t,e,n,a,i){var s=rCe(t,e),o=s.reduce(function(S,_){return Ga(Ga({},S),{},zP({},_,[t[_],e[_]]))},{}),l=s.reduce(function(S,_){return Ga(Ga({},S),{},zP({},_,{from:t[_],velocity:0,to:e[_]}))},{}),c=-1,d,f,p=function(){return null},g=function(){return Nv(function(_,T){return T.from},l)},x=function(){return!Object.values(l).filter(UP).length},b=function(_){d||(d=_);var T=_-d,C=T/n.dt;l=CCe(n,l,C),i(Ga(Ga(Ga({},t),e),g())),d=_,x()||(c=requestAnimationFrame(p))},j=function(_){f||(f=_);var T=(_-f)/a,C=Nv(function(k,O){return iN.apply(void 0,L$(O).concat([n(T)]))},o);if(i(Ga(Ga(Ga({},t),e),C)),T<1)c=requestAnimationFrame(p);else{var E=Nv(function(k,O){return iN.apply(void 0,L$(O).concat([n(1)]))},o);i(Ga(Ga(Ga({},t),e),E))}};return p=n.isStepper?b:j,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}};function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}var kCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ACe(t,e){if(t==null)return{};var n=ECe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function ECe(t,e){if(t==null)return{};var n={},a=Object.keys(t),i,s;for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function lA(t){return MCe(t)||DCe(t)||OCe(t)||PCe()}function PCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OCe(t,e){if(t){if(typeof t=="string")return VP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VP(t,e)}}function DCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MCe(t){if(Array.isArray(t))return VP(t)}function VP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function $$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Po(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$$(Object(n),!0).forEach(function(a){mv(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function mv(t,e,n){return e=$V(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ICe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RCe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,$V(a.key),a)}}function LCe(t,e,n){return e&&RCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $V(t){var e=FCe(t,"string");return mg(e)==="symbol"?e:String(e)}function FCe(t,e){if(mg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(mg(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HP(t,e)}function HP(t,e){return HP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},HP(t,e)}function BCe(t){var e=zCe();return function(){var a=sN(t),i;if(e){var s=sN(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return GP(this,i)}}function GP(t,e){if(e&&(mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WP(t)}function WP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sN(t){return sN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sN(t)}var zo=function(t){$Ce(n,t);var e=BCe(n);function n(a,i){var s;ICe(this,n),s=e.call(this,a,i);var o=s.props,l=o.isActive,c=o.attributeName,d=o.from,f=o.to,p=o.steps,g=o.children,x=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(WP(s)),s.changeStyle=s.changeStyle.bind(WP(s)),!l||x<=0)return s.state={style:{}},typeof g=="function"&&(s.state={style:f}),GP(s);if(p&&p.length)s.state={style:p[0].style};else if(d){if(typeof g=="function")return s.state={style:d},GP(s);s.state={style:c?mv({},c,d):d}}else s.state={style:{}};return s}return LCe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,d=s.shouldReAnimate,f=s.to,p=s.from,g=this.state.style;if(l){if(!o){var x={style:c?mv({},c,f):f};this.state&&g&&(c&&g[c]!==f||!c&&g!==f)&&this.setState(x);return}if(!(W_e(i.to,f)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var j=b||d?p:i.to;if(this.state&&g){var S={style:c?mv({},c,j):j};(c&&g[c]!==j||!c&&g!==j)&&this.setState(S)}this.runAnimation(Po(Po({},this.props),{},{from:j,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,d=i.easing,f=i.begin,p=i.onAnimationEnd,g=i.onAnimationStart,x=TCe(o,l,gCe(d),c,this.changeStyle),b=function(){s.stopJSAnimation=x()};this.manager.start([g,f,b,c,p])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],f=d.style,p=d.duration,g=p===void 0?0:p,x=function(j,S,_){if(_===0)return j;var T=S.duration,C=S.easing,E=C===void 0?"ease":C,k=S.style,O=S.properties,I=S.onAnimationEnd,F=_>0?o[_-1]:S,B=O||Object.keys(k);if(typeof E=="function"||E==="spring")return[].concat(lA(j),[s.runJSAnimation.bind(s,{from:F.style,to:k,duration:T,easing:E}),T]);var $=M$(B,T,E),L=Po(Po(Po({},F.style),k),{},{transition:$});return[].concat(lA(j),[L,T,I]).filter(aCe)};return this.manager.start([c].concat(lA(o.reduce(x,[f,Math.max(g,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=eCe());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,f=i.onAnimationStart,p=i.onAnimationEnd,g=i.steps,x=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(i);return}if(g.length>1){this.runStepAnimation(i);return}var j=l?mv({},l,c):c,S=M$(Object.keys(j),o,d);b.start([f,s,Po(Po({},j),{},{transition:S}),o,p])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=ACe(i,kCe),d=v.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||d===0||o<=0)return s;var p=function(x){var b=x.props,j=b.style,S=j===void 0?{}:j,_=b.className,T=v.cloneElement(x,Po(Po({},c),{},{style:Po(Po({},S),f),className:_}));return T};return d===1?p(v.Children.only(s)):Se.createElement("div",null,v.Children.map(s,function(g){return p(g)}))}}]),n}(v.PureComponent);zo.displayName="Animate";zo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};zo.propTypes={from:hr.oneOfType([hr.object,hr.string]),to:hr.oneOfType([hr.object,hr.string]),attributeName:hr.string,duration:hr.number,begin:hr.number,easing:hr.oneOfType([hr.string,hr.func]),steps:hr.arrayOf(hr.shape({duration:hr.number.isRequired,style:hr.object.isRequired,easing:hr.oneOfType([hr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),hr.func]),properties:hr.arrayOf("string"),onAnimationEnd:hr.func})),children:hr.oneOfType([hr.node,hr.func]),isActive:hr.bool,canBegin:hr.bool,onAnimationEnd:hr.func,shouldReAnimate:hr.bool,onAnimationStart:hr.func,onAnimationReStart:hr.func};function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oN.apply(this,arguments)}function qCe(t,e){return GCe(t)||HCe(t,e)||VCe(t,e)||UCe()}function UCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VCe(t,e){if(t){if(typeof t=="string")return B$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B$(t,e)}}function B$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function HCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function GCe(t){if(Array.isArray(t))return t}function z$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function q$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z$(Object(n),!0).forEach(function(a){WCe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function WCe(t,e,n){return e=YCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YCe(t){var e=KCe(t,"string");return ib(e)=="symbol"?e:e+""}function KCe(t,e){if(ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ib(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U$=function(e,n,a,i,s){var o=Math.min(Math.abs(a)/2,Math.abs(i)/2),l=i>=0?1:-1,c=a>=0?1:-1,d=i>=0&&a>=0||i<0&&a<0?1:0,f;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=s[g]>o?o:s[g];f="M".concat(e,",").concat(n+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+c*p[0],",").concat(n)),f+="L ".concat(e+a-c*p[1],",").concat(n),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+a,",").concat(n+l*p[1])),f+="L ".concat(e+a,",").concat(n+i-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+a-c*p[2],",").concat(n+i)),f+="L ".concat(e+c*p[3],",").concat(n+i),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(n+i-l*p[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var b=Math.min(o,s);f="M ".concat(e,",").concat(n+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+c*b,",").concat(n,`
            L `).concat(e+a-c*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+a,",").concat(n+l*b,`
            L `).concat(e+a,",").concat(n+i-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e+a-c*b,",").concat(n+i,`
            L `).concat(e+c*b,",").concat(n+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(e,",").concat(n+i-l*b," Z")}else f="M ".concat(e,",").concat(n," h ").concat(a," v ").concat(i," h ").concat(-a," Z");return f},QCe=function(e,n){if(!e||!n)return!1;var a=e.x,i=e.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(s,s+l),f=Math.max(s,s+l),p=Math.min(o,o+c),g=Math.max(o,o+c);return a>=d&&a<=f&&i>=p&&i<=g}return!1},XCe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xM=function(e){var n=q$(q$({},XCe),e),a=v.useRef(),i=v.useState(-1),s=qCe(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var E=a.current.getTotalLength();E&&l(E)}catch{}},[]);var c=n.x,d=n.y,f=n.width,p=n.height,g=n.radius,x=n.className,b=n.animationEasing,j=n.animationDuration,S=n.animationBegin,_=n.isAnimationActive,T=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||f===0||p===0)return null;var C=pn("recharts-rectangle",x);return T?Se.createElement(zo,{canBegin:o>0,from:{width:f,height:p,x:c,y:d},to:{width:f,height:p,x:c,y:d},duration:j,animationEasing:b,isActive:T},function(E){var k=E.width,O=E.height,I=E.x,F=E.y;return Se.createElement(zo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:j,isActive:_,easing:b},Se.createElement("path",oN({},zt(n,!0),{className:C,d:U$(I,F,k,O,g),ref:a})))}):Se.createElement("path",oN({},zt(n,!0),{className:C,d:U$(c,d,f,p,g)}))},JCe=["points","className","baseLinePoints","connectNulls"];function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Em.apply(this,arguments)}function ZCe(t,e){if(t==null)return{};var n=e2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function e2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function V$(t){return a2e(t)||r2e(t)||n2e(t)||t2e()}function t2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n2e(t,e){if(t){if(typeof t=="string")return YP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YP(t,e)}}function r2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function a2e(t){if(Array.isArray(t))return YP(t)}function YP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var H$=function(e){return e&&e.x===+e.x&&e.y===+e.y},i2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(a){H$(a)?n[n.length-1].push(a):n[n.length-1].length>0&&n.push([])}),H$(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Sv=function(e,n){var a=i2e(e);n&&(a=[a.reduce(function(s,o){return[].concat(V$(s),V$(o))},[])]);var i=a.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(i,"Z"):i},s2e=function(e,n,a){var i=Sv(e,a);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Sv(n.reverse(),a).slice(1))},o2e=function(e){var n=e.points,a=e.className,i=e.baseLinePoints,s=e.connectNulls,o=ZCe(e,JCe);if(!n||!n.length)return null;var l=pn("recharts-polygon",a);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",d=s2e(n,i,s);return Se.createElement("g",{className:l},Se.createElement("path",Em({},zt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?Se.createElement("path",Em({},zt(o,!0),{fill:"none",d:Sv(n,s)})):null,c?Se.createElement("path",Em({},zt(o,!0),{fill:"none",d:Sv(i,s)})):null)}var f=Sv(n,s);return Se.createElement("path",Em({},zt(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function KP(){return KP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},KP.apply(this,arguments)}var Vb=function(e){var n=e.cx,a=e.cy,i=e.r,s=e.className,o=pn("recharts-dot",s);return n===+n&&a===+a&&i===+i?v.createElement("circle",KP({},zt(e,!1),Ew(e),{className:o,cx:n,cy:a,r:i})):null};function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}var l2e=["x","y","top","left","width","height","className"];function QP(){return QP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},QP.apply(this,arguments)}function G$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function c2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(n),!0).forEach(function(a){u2e(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function u2e(t,e,n){return e=d2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d2e(t){var e=h2e(t,"string");return sb(e)=="symbol"?e:e+""}function h2e(t,e){if(sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(sb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f2e(t,e){if(t==null)return{};var n=p2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function p2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var m2e=function(e,n,a,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(a)},g2e=function(e){var n=e.x,a=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,f=e.width,p=f===void 0?0:f,g=e.height,x=g===void 0?0:g,b=e.className,j=f2e(e,l2e),S=c2e({x:a,y:s,top:l,left:d,width:p,height:x},j);return!Nt(a)||!Nt(s)||!Nt(p)||!Nt(x)||!Nt(l)||!Nt(d)?null:Se.createElement("path",QP({},zt(S,!0),{className:pn("recharts-cross",b),d:m2e(a,s,p,x,l,d)}))},cA,W$;function y2e(){if(W$)return cA;W$=1;var t=wS(),e=eV(),n=Bl();function a(i,s){return i&&i.length?t(i,n(s,2),e):void 0}return cA=a,cA}var x2e=y2e();const v2e=Wn(x2e);var uA,Y$;function b2e(){if(Y$)return uA;Y$=1;var t=wS(),e=Bl(),n=tV();function a(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return uA=a,uA}var j2e=b2e();const w2e=Wn(j2e);var N2e=["cx","cy","angle","ticks","axisLine"],S2e=["ticks","tick","angle","tickFormatter","stroke"];function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function _v(){return _v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_v.apply(this,arguments)}function K$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function zh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(n),!0).forEach(function(a){CS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function Q$(t,e){if(t==null)return{};var n=_2e(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function _2e(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function C2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,zV(a.key),a)}}function T2e(t,e,n){return e&&X$(t.prototype,e),n&&X$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function k2e(t,e,n){return e=lN(e),A2e(t,BV()?Reflect.construct(e,n||[],lN(t).constructor):e.apply(t,n))}function A2e(t,e){if(e&&(gg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E2e(t)}function E2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BV=function(){return!!t})()}function lN(t){return lN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lN(t)}function P2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XP(t,e)}function XP(t,e){return XP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},XP(t,e)}function CS(t,e,n){return e=zV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zV(t){var e=O2e(t,"string");return gg(e)=="symbol"?e:e+""}function O2e(t,e){if(gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(gg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var TS=function(t){function e(){return C2e(this,e),k2e(this,e,arguments)}return P2e(e,t),T2e(e,[{key:"getTickValueCoord",value:function(a){var i=a.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Rr(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,i;switch(a){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=v2e(l,function(f){return f.coordinate||0}),d=w2e(l,function(f){return f.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.angle,l=a.ticks,c=a.axisLine,d=Q$(a,N2e),f=l.reduce(function(b,j){return[Math.min(b[0],j.coordinate),Math.max(b[1],j.coordinate)]},[1/0,-1/0]),p=Rr(i,s,f[0],o),g=Rr(i,s,f[1],o),x=zh(zh(zh({},zt(d,!1)),{},{fill:"none"},zt(c,!1)),{},{x1:p.x,y1:p.y,x2:g.x,y2:g.y});return Se.createElement("line",_v({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,d=i.stroke,f=Q$(i,S2e),p=this.getTickTextAnchor(),g=zt(f,!1),x=zt(o,!1),b=s.map(function(j,S){var _=a.getTickValueCoord(j),T=zh(zh(zh(zh({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(_.x,", ").concat(_.y,")")},g),{},{stroke:"none",fill:d},x),{},{index:S},_),{},{payload:j});return Se.createElement(Mn,_v({className:pn("recharts-polar-radius-axis-tick",AV(o)),key:"tick-".concat(j.coordinate)},Cf(a.props,j,S)),e.renderTickItem(o,T,c?c(j.value,S):j.value))});return Se.createElement(Mn,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.axisLine,o=a.tick;return!i||!i.length?null:Se.createElement(Mn,{className:pn("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Ia.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Se.isValidElement(a)?o=Se.cloneElement(a,i):an(a)?o=a(i):o=Se.createElement(Tf,_v({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(v.PureComponent);CS(TS,"displayName","PolarRadiusAxis");CS(TS,"axisType","radiusAxis");CS(TS,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Kh.apply(this,arguments)}function J$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function qh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J$(Object(n),!0).forEach(function(a){kS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function D2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z$(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,UV(a.key),a)}}function M2e(t,e,n){return e&&Z$(t.prototype,e),n&&Z$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function I2e(t,e,n){return e=cN(e),R2e(t,qV()?Reflect.construct(e,n||[],cN(t).constructor):e.apply(t,n))}function R2e(t,e){if(e&&(yg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L2e(t)}function L2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qV=function(){return!!t})()}function cN(t){return cN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cN(t)}function F2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JP(t,e)}function JP(t,e){return JP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},JP(t,e)}function kS(t,e,n){return e=UV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UV(t){var e=$2e(t,"string");return yg(e)=="symbol"?e:e+""}function $2e(t,e){if(yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(yg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var B2e=Math.PI/180,z2e=1e-5,AS=function(t){function e(){return D2e(this,e),I2e(this,e,arguments)}return F2e(e,t),M2e(e,[{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.cx,o=i.cy,l=i.radius,c=i.orientation,d=i.tickSize,f=d||8,p=Rr(s,o,l,a.coordinate),g=Rr(s,o,l+(c==="inner"?-1:1)*f,a.coordinate);return{x1:p.x,y1:p.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(a){var i=this.props.orientation,s=Math.cos(-a.coordinate*B2e),o;return s>z2e?o=i==="outer"?"start":"end":s<-1e-5?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.cx,s=a.cy,o=a.radius,l=a.axisLine,c=a.axisLineType,d=qh(qh({},zt(this.props,!1)),{},{fill:"none"},zt(l,!1));if(c==="circle")return Se.createElement(Vb,Kh({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:s,r:o}));var f=this.props.ticks,p=f.map(function(g){return Rr(i,s,o,g.coordinate)});return Se.createElement(o2e,Kh({className:"recharts-polar-angle-axis-line"},d,{points:p}))}},{key:"renderTicks",value:function(){var a=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,d=i.stroke,f=zt(this.props,!1),p=zt(o,!1),g=qh(qh({},f),{},{fill:"none"},zt(l,!1)),x=s.map(function(b,j){var S=a.getTickLineCoord(b),_=a.getTickTextAnchor(b),T=qh(qh(qh({textAnchor:_},f),{},{stroke:"none",fill:d},p),{},{index:j,payload:b,x:S.x2,y:S.y2});return Se.createElement(Mn,Kh({className:pn("recharts-polar-angle-axis-tick",AV(o)),key:"tick-".concat(b.coordinate)},Cf(a.props,b,j)),l&&Se.createElement("line",Kh({className:"recharts-polar-angle-axis-tick-line"},g,S)),o&&e.renderTickItem(o,T,c?c(b.value,j):b.value))});return Se.createElement(Mn,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var a=this.props,i=a.ticks,s=a.radius,o=a.axisLine;return s<=0||!i||!i.length?null:Se.createElement(Mn,{className:pn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,i,s){var o;return Se.isValidElement(a)?o=Se.cloneElement(a,i):an(a)?o=a(i):o=Se.createElement(Tf,Kh({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(v.PureComponent);kS(AS,"displayName","PolarAngleAxis");kS(AS,"axisType","angleAxis");kS(AS,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var dA,e8;function q2e(){if(e8)return dA;e8=1;var t=Z9(),e=t(Object.getPrototypeOf,Object);return dA=e,dA}var hA,t8;function U2e(){if(t8)return hA;t8=1;var t=Hc(),e=q2e(),n=Gc(),a="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,c=o.call(Object);function d(f){if(!n(f)||t(f)!=a)return!1;var p=e(f);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==c}return hA=d,hA}var V2e=U2e();const H2e=Wn(V2e);var fA,n8;function G2e(){if(n8)return fA;n8=1;var t=Hc(),e=Gc(),n="[object Boolean]";function a(i){return i===!0||i===!1||e(i)&&t(i)==n}return fA=a,fA}var W2e=G2e();const Y2e=Wn(W2e);function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}function uN(){return uN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},uN.apply(this,arguments)}function K2e(t,e){return Z2e(t)||J2e(t,e)||X2e(t,e)||Q2e()}function Q2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X2e(t,e){if(t){if(typeof t=="string")return r8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r8(t,e)}}function r8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function J2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Z2e(t){if(Array.isArray(t))return t}function a8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function i8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a8(Object(n),!0).forEach(function(a){eTe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function eTe(t,e,n){return e=tTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tTe(t){var e=nTe(t,"string");return ob(e)=="symbol"?e:e+""}function nTe(t,e){if(ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ob(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s8=function(e,n,a,i,s){var o=a-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+a,",").concat(n),l+="L ".concat(e+a-o/2,",").concat(n+s),l+="L ".concat(e+a-o/2-i,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},rTe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aTe=function(e){var n=i8(i8({},rTe),e),a=v.useRef(),i=v.useState(-1),s=K2e(i,2),o=s[0],l=s[1];v.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var C=a.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,d=n.y,f=n.upperWidth,p=n.lowerWidth,g=n.height,x=n.className,b=n.animationEasing,j=n.animationDuration,S=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||g!==+g||f===0&&p===0||g===0)return null;var T=pn("recharts-trapezoid",x);return _?Se.createElement(zo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:g,x:c,y:d},to:{upperWidth:f,lowerWidth:p,height:g,x:c,y:d},duration:j,animationEasing:b,isActive:_},function(C){var E=C.upperWidth,k=C.lowerWidth,O=C.height,I=C.x,F=C.y;return Se.createElement(zo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:j,easing:b},Se.createElement("path",uN({},zt(n,!0),{className:T,d:s8(I,F,E,k,O),ref:a})))}):Se.createElement("g",null,Se.createElement("path",uN({},zt(n,!0),{className:T,d:s8(c,d,f,p,g)})))},iTe=["option","shapeType","propTransformer","activeClassName","isActive"];function lb(t){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lb(t)}function sTe(t,e){if(t==null)return{};var n=oTe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function oTe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function o8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function dN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o8(Object(n),!0).forEach(function(a){lTe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function lTe(t,e,n){return e=cTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cTe(t){var e=uTe(t,"string");return lb(e)=="symbol"?e:e+""}function uTe(t,e){if(lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(lb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dTe(t,e){return dN(dN({},e),t)}function hTe(t,e){return t==="symbols"}function l8(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Se.createElement(xM,n);case"trapezoid":return Se.createElement(aTe,n);case"sector":return Se.createElement(OV,n);case"symbols":if(hTe(e))return Se.createElement(LD,n);break;default:return null}}function fTe(t){return v.isValidElement(t)?t.props:t}function VV(t){var e=t.option,n=t.shapeType,a=t.propTransformer,i=a===void 0?dTe:a,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=sTe(t,iTe),d;if(v.isValidElement(e))d=v.cloneElement(e,dN(dN({},c),fTe(e)));else if(an(e))d=e(c);else if(H2e(e)&&!Y2e(e)){var f=i(e,c);d=Se.createElement(l8,{shapeType:n,elementProps:f})}else{var p=c;d=Se.createElement(l8,{shapeType:n,elementProps:p})}return l?Se.createElement(Mn,{className:o},d):d}function ES(t,e){return e!=null&&"trapezoids"in t.props}function PS(t,e){return e!=null&&"sectors"in t.props}function cb(t,e){return e!=null&&"points"in t.props}function pTe(t,e){var n,a,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.y)||t.y===e.y;return i&&s}function mTe(t,e){var n=t.endAngle===e.endAngle,a=t.startAngle===e.startAngle;return n&&a}function gTe(t,e){var n=t.x===e.x,a=t.y===e.y,i=t.z===e.z;return n&&a&&i}function yTe(t,e){var n;return ES(t,e)?n=pTe:PS(t,e)?n=mTe:cb(t,e)&&(n=gTe),n}function xTe(t,e){var n;return ES(t,e)?n="trapezoids":PS(t,e)?n="sectors":cb(t,e)&&(n="points"),n}function vTe(t,e){if(ES(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(PS(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return cb(t,e)?e.payload:{}}function bTe(t){var e=t.activeTooltipItem,n=t.graphicalItem,a=t.itemData,i=xTe(n,e),s=vTe(n,e),o=a.filter(function(c,d){var f=kf(s,c),p=n.props[i].filter(function(b){var j=yTe(n,e);return j(b,e)}),g=n.props[i].indexOf(p[p.length-1]),x=d===g;return f&&x}),l=a.indexOf(o[o.length-1]);return l}var iw;function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function Pm(){return Pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Pm.apply(this,arguments)}function c8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c8(Object(n),!0).forEach(function(a){to(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function jTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,GV(a.key),a)}}function wTe(t,e,n){return e&&u8(t.prototype,e),n&&u8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function NTe(t,e,n){return e=hN(e),STe(t,HV()?Reflect.construct(e,n||[],hN(t).constructor):e.apply(t,n))}function STe(t,e){if(e&&(xg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Te(t)}function _Te(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HV=function(){return!!t})()}function hN(t){return hN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hN(t)}function CTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZP(t,e)}function ZP(t,e){return ZP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},ZP(t,e)}function to(t,e,n){return e=GV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GV(t){var e=TTe(t,"string");return xg(e)=="symbol"?e:e+""}function TTe(t,e){if(xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(xg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zl=function(t){function e(n){var a;return jTe(this,e),a=NTe(this,e,[n]),to(a,"pieRef",null),to(a,"sectorRefs",[]),to(a,"id",If("recharts-pie-")),to(a,"handleAnimationEnd",function(){var i=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),an(i)&&i()}),to(a,"handleAnimationStart",function(){var i=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),an(i)&&i()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return CTe(e,t),wTe(e,[{key:"isActiveIndex",value:function(a){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(a)!==-1:a===i}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,d=s.valueKey,f=zt(this.props,!1),p=zt(o,!1),g=zt(l,!1),x=o&&o.offsetRadius||20,b=a.map(function(j,S){var _=(j.startAngle+j.endAngle)/2,T=Rr(j.cx,j.cy,j.outerRadius+x,_),C=Mr(Mr(Mr(Mr({},f),j),{},{stroke:"none"},p),{},{index:S,textAnchor:e.getTextAnchor(T.x,j.cx)},T),E=Mr(Mr(Mr(Mr({},f),j),{},{fill:"none",stroke:j.fill},g),{},{index:S,points:[Rr(j.cx,j.cy,j.outerRadius,_),T]}),k=c;return hn(c)&&hn(d)?k="value":hn(c)&&(k=d),Se.createElement(Mn,{key:"label-".concat(j.startAngle,"-").concat(j.endAngle,"-").concat(j.midAngle,"-").concat(S)},l&&e.renderLabelLineItem(l,E,"line"),e.renderLabelItem(o,C,ca(j,k)))});return Se.createElement(Mn,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(a){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return a.map(function(d,f){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&a.length!==1)return null;var p=i.isActiveIndex(f),g=c&&i.hasActiveIndex()?c:null,x=p?o:g,b=Mr(Mr({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return Se.createElement(Mn,Pm({ref:function(S){S&&!i.sectorRefs.includes(S)&&i.sectorRefs.push(S)},tabIndex:-1,className:"recharts-pie-sector"},Cf(i.props,d,f),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(f)}),Se.createElement(VV,Pm({option:x,isActive:p,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,d=i.animationEasing,f=i.animationId,p=this.state,g=p.prevSectors,x=p.prevIsAnimationActive;return Se.createElement(zo,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var j=b.t,S=[],_=s&&s[0],T=_.startAngle;return s.forEach(function(C,E){var k=g&&g[E],O=E>0?Is(C,"paddingAngle",0):0;if(k){var I=_a(k.endAngle-k.startAngle,C.endAngle-C.startAngle),F=Mr(Mr({},C),{},{startAngle:T+O,endAngle:T+I(j)+O});S.push(F),T=F.endAngle}else{var B=C.endAngle,$=C.startAngle,L=_a(0,B-$),V=L(j),H=Mr(Mr({},C),{},{startAngle:T+O,endAngle:T+V+O});S.push(H),T=H.endAngle}}),Se.createElement(Mn,null,a.renderSectorsStatically(S))})}},{key:"attachKeyboardHandlers",value:function(a){var i=this;a.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,i=a.sectors,s=a.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!kf(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,c=i.label,d=i.cx,f=i.cy,p=i.innerRadius,g=i.outerRadius,x=i.isAnimationActive,b=this.state.isAnimationFinished;if(s||!o||!o.length||!Nt(d)||!Nt(f)||!Nt(p)||!Nt(g))return null;var j=pn("recharts-pie",l);return Se.createElement(Mn,{tabIndex:this.props.rootTabIndex,className:j,ref:function(_){a.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),Ia.renderCallByParent(this.props,null,!1),(!x||b)&&Ml.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return i.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:a.sectors!==i.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,i){return a>i?"start":a<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,i,s){if(Se.isValidElement(a))return Se.cloneElement(a,i);if(an(a))return a(i);var o=pn("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return Se.createElement(pf,Pm({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,i,s){if(Se.isValidElement(a))return Se.cloneElement(a,i);var o=s;if(an(a)&&(o=a(i),Se.isValidElement(o)))return o;var l=pn("recharts-pie-label-text",typeof a!="boolean"&&!an(a)?a.className:"");return Se.createElement(Tf,Pm({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(v.PureComponent);iw=zl;to(zl,"displayName","Pie");to(zl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!jd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});to(zl,"parseDeltaAngle",function(t,e){var n=Ri(e-t),a=Math.min(Math.abs(e-t),360);return n*a});to(zl,"getRealPieData",function(t){var e=t.data,n=t.children,a=zt(t,!1),i=Rs(n,Fb);return e&&e.length?e.map(function(s,o){return Mr(Mr(Mr({payload:s},a),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return Mr(Mr({},a),s.props)}):[]});to(zl,"parseCoordinateOfPie",function(t,e){var n=e.top,a=e.left,i=e.width,s=e.height,o=kV(i,s),l=a+Li(t.cx,i,i/2),c=n+Li(t.cy,s,s/2),d=Li(t.innerRadius,o,0),f=Li(t.outerRadius,o,o*.8),p=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:f,maxRadius:p}});to(zl,"getComposedData",function(t){var e=t.item,n=t.offset,a=e.type.defaultProps!==void 0?Mr(Mr({},e.type.defaultProps),e.props):e.props,i=iw.getRealPieData(a);if(!i||!i.length)return null;var s=a.cornerRadius,o=a.startAngle,l=a.endAngle,c=a.paddingAngle,d=a.dataKey,f=a.nameKey,p=a.valueKey,g=a.tooltipType,x=Math.abs(a.minAngle),b=iw.parseCoordinateOfPie(a,n),j=iw.parseDeltaAngle(o,l),S=Math.abs(j),_=d;hn(d)&&hn(p)?($o(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):hn(d)&&($o(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=p);var T=i.filter(function(F){return ca(F,_,0)!==0}).length,C=(S>=360?T:T-1)*c,E=S-T*x-C,k=i.reduce(function(F,B){var $=ca(B,_,0);return F+(Nt($)?$:0)},0),O;if(k>0){var I;O=i.map(function(F,B){var $=ca(F,_,0),L=ca(F,f,B),V=(Nt($)?$:0)/k,H;B?H=I.endAngle+Ri(j)*c*($!==0?1:0):H=o;var ne=H+Ri(j)*(($!==0?x:0)+V*E),Q=(H+ne)/2,q=(b.innerRadius+b.outerRadius)/2,G=[{name:L,value:$,payload:F,dataKey:_,type:g}],ie=Rr(b.cx,b.cy,q,Q);return I=Mr(Mr(Mr({percent:V,cornerRadius:s,name:L,tooltipPayload:G,midAngle:Q,middleRadius:q,tooltipPosition:ie},F),b),{},{value:ca(F,_),startAngle:H,endAngle:ne,payload:F,paddingAngle:Ri(j)*c}),I})}return Mr(Mr({},b),{},{sectors:O,data:i})});var pA,d8;function kTe(){if(d8)return pA;d8=1;var t=Math.ceil,e=Math.max;function n(a,i,s,o){for(var l=-1,c=e(t((i-a)/(s||1)),0),d=Array(c);c--;)d[o?c:++l]=a,a+=s;return d}return pA=n,pA}var mA,h8;function WV(){if(h8)return mA;h8=1;var t=m7(),e=1/0,n=17976931348623157e292;function a(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var s=i<0?-1:1;return s*n}return i===i?i:0}return mA=a,mA}var gA,f8;function ATe(){if(f8)return gA;f8=1;var t=kTe(),e=mS(),n=WV();function a(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,i)}}return gA=a,gA}var yA,p8;function ETe(){if(p8)return yA;p8=1;var t=ATe(),e=t();return yA=e,yA}var PTe=ETe();const fN=Wn(PTe);function ub(t){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(t)}function m8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function g8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m8(Object(n),!0).forEach(function(a){YV(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function YV(t,e,n){return e=OTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OTe(t){var e=DTe(t,"string");return ub(e)=="symbol"?e:e+""}function DTe(t,e){if(ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(ub(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MTe=["Webkit","Moz","O","ms"],ITe=function(e,n){var a=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=MTe.reduce(function(s,o){return g8(g8({},s),{},YV({},o+a,n))},{});return i[e]=n,i};function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pN.apply(this,arguments)}function y8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function xA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y8(Object(n),!0).forEach(function(a){Ts(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function RTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,QV(a.key),a)}}function LTe(t,e,n){return e&&x8(t.prototype,e),n&&x8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function FTe(t,e,n){return e=mN(e),$Te(t,KV()?Reflect.construct(e,n||[],mN(t).constructor):e.apply(t,n))}function $Te(t,e){if(e&&(vg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BTe(t)}function BTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KV=function(){return!!t})()}function mN(t){return mN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mN(t)}function zTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eO(t,e)}function eO(t,e){return eO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},eO(t,e)}function Ts(t,e,n){return e=QV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QV(t){var e=qTe(t,"string");return vg(e)=="symbol"?e:e+""}function qTe(t,e){if(vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(vg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var UTe=function(e){var n=e.data,a=e.startIndex,i=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=jv().domain(fN(0,c)).range([s,s+o-l]),f=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(a),endX:d(i),scale:d,scaleValues:f}},v8=function(e){return e.changedTouches&&!!e.changedTouches.length},bg=function(t){function e(n){var a;return RTe(this,e),a=FTe(this,e,[n]),Ts(a,"handleDrag",function(i){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(i):a.state.isSlideMoving&&a.handleSlideDrag(i)}),Ts(a,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&a.handleDrag(i.changedTouches[0])}),Ts(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=a.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:s,startIndex:l})}),a.detachDragEndListener()}),Ts(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Ts(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Ts(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Ts(a,"handleSlideDragStart",function(i){var s=v8(i)?i.changedTouches[0]:i;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return zTe(e,t),LTe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var i=a.startX,s=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,p=Math.min(i,s),g=Math.max(i,s),x=e.getIndexInRange(o,p),b=e.getIndexInRange(o,g);return{startIndex:x-x%c,endIndex:b===f?f:b-b%c}}},{key:"getTextOfTick",value:function(a){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=ca(s[a],l,a);return an(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,f=c.width,p=c.travellerWidth,g=c.startIndex,x=c.endIndex,b=c.onChange,j=a.pageX-s;j>0?j=Math.min(j,d+f-p-l,d+f-p-o):j<0&&(j=Math.max(j,d-o,d-l));var S=this.getIndex({startX:o+j,endX:l+j});(S.startIndex!==g||S.endIndex!==x)&&b&&b(S),this.setState({startX:o+j,endX:l+j,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,i){var s=v8(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],f=this.props,p=f.x,g=f.width,x=f.travellerWidth,b=f.onChange,j=f.gap,S=f.data,_={startX:this.state.startX,endX:this.state.endX},T=a.pageX-s;T>0?T=Math.min(T,p+g-x-d):T<0&&(T=Math.max(T,p-d)),_[o]=d+T;var C=this.getIndex(_),E=C.startIndex,k=C.endIndex,O=function(){var F=S.length-1;return o==="startX"&&(l>c?E%j===0:k%j===0)||l<c&&k===F||o==="endX"&&(l>c?k%j===0:E%j===0)||l>c&&k===F};this.setState(Ts(Ts({},o,d+T),"brushMoveStartX",a.pageX),function(){b&&O()&&b(C)})}},{key:"handleTravellerMoveKeyboard",value:function(a,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,f=this.state[i],p=l.indexOf(f);if(p!==-1){var g=p+a;if(!(g===-1||g>=l.length)){var x=l[g];i==="startX"&&x>=d||i==="endX"&&x<=c||this.setState(Ts({},i,x),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.fill,d=a.stroke;return Se.createElement("rect",{stroke:d,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.data,d=a.children,f=a.padding,p=v.Children.only(d);return p?Se.cloneElement(p,{x:i,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,i){var s,o,l=this,c=this.props,d=c.y,f=c.travellerWidth,p=c.height,g=c.traveller,x=c.ariaLabel,b=c.data,j=c.startIndex,S=c.endIndex,_=Math.max(a,this.props.x),T=xA(xA({},zt(this.props,!1)),{},{x:_,y:d,width:f,height:p}),C=x||"Min value: ".concat((s=b[j])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=b[S])===null||o===void 0?void 0:o.name);return Se.createElement(Mn,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(g,T))}},{key:"renderSlide",value:function(a,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,d=s.travellerWidth,f=Math.min(a,i)+d,p=Math.max(Math.abs(i-a)-d,0);return Se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var a=this.props,i=a.startIndex,s=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,d=a.stroke,f=this.state,p=f.startX,g=f.endX,x=5,b={pointerEvents:"none",fill:d};return Se.createElement(Mn,{className:"recharts-brush-texts"},Se.createElement(Tf,pN({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-x,y:o+l/2},b),this.getTextOfTick(i)),Se.createElement(Tf,pN({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+c+x,y:o+l/2},b),this.getTextOfTick(s)))}},{key:"render",value:function(){var a=this.props,i=a.data,s=a.className,o=a.children,l=a.x,c=a.y,d=a.width,f=a.height,p=a.alwaysShowText,g=this.state,x=g.startX,b=g.endX,j=g.isTextActive,S=g.isSlideMoving,_=g.isTravellerMoving,T=g.isTravellerFocused;if(!i||!i.length||!Nt(l)||!Nt(c)||!Nt(d)||!Nt(f)||d<=0||f<=0)return null;var C=pn("recharts-brush",s),E=Se.Children.count(o)===1,k=ITe("userSelect","none");return Se.createElement(Mn,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(j||S||_||T||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var i=a.x,s=a.y,o=a.width,l=a.height,c=a.stroke,d=Math.floor(s+l/2)-1;return Se.createElement(Se.Fragment,null,Se.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),Se.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),Se.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,i){var s;return Se.isValidElement(a)?s=Se.cloneElement(a,i):an(a)?s=a(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(a,i){var s=a.data,o=a.width,l=a.x,c=a.travellerWidth,d=a.updateId,f=a.startIndex,p=a.endIndex;if(s!==i.prevData||d!==i.prevUpdateId)return xA({prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},s&&s.length?UTe({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var g=i.scale.domain().map(function(x){return i.scale(x)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(a.startIndex),endX:i.scale(a.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(a,i){for(var s=a.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>i?l=c:o=c}return i>=a[l]?l:o}}])}(v.PureComponent);Ts(bg,"displayName","Brush");Ts(bg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var vA,b8;function VTe(){if(b8)return vA;b8=1;var t=VD();function e(n,a){var i;return t(n,function(s,o,l){return i=a(s,o,l),!i}),!!i}return vA=e,vA}var bA,j8;function HTe(){if(j8)return bA;j8=1;var t=G9(),e=Bl(),n=VTe(),a=fs(),i=mS();function s(o,l,c){var d=a(o)?t:n;return c&&i(o,l,c)&&(l=void 0),d(o,e(l,3))}return bA=s,bA}var GTe=HTe();const WTe=Wn(GTe);var Il=function(e,n){var a=e.alwaysShow,i=e.ifOverflow;return a&&(i="extendDomain"),i===n},jA,w8;function YTe(){if(w8)return jA;w8=1;var t=u7();function e(n,a,i){a=="__proto__"&&t?t(n,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[a]=i}return jA=e,jA}var wA,N8;function KTe(){if(N8)return wA;N8=1;var t=YTe(),e=l7(),n=Bl();function a(i,s){var o={};return s=n(s,3),e(i,function(l,c,d){t(o,c,s(l,c,d))}),o}return wA=a,wA}var QTe=KTe();const XTe=Wn(QTe);var NA,S8;function JTe(){if(S8)return NA;S8=1;function t(e,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(!n(e[a],a,e))return!1;return!0}return NA=t,NA}var SA,_8;function ZTe(){if(_8)return SA;_8=1;var t=VD();function e(n,a){var i=!0;return t(n,function(s,o,l){return i=!!a(s,o,l),i}),i}return SA=e,SA}var _A,C8;function eke(){if(C8)return _A;C8=1;var t=JTe(),e=ZTe(),n=Bl(),a=fs(),i=mS();function s(o,l,c){var d=a(o)?t:e;return c&&i(o,l,c)&&(l=void 0),d(o,n(l,3))}return _A=s,_A}var tke=eke();const XV=Wn(tke);var nke=["x","y"];function db(t){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},db(t)}function tO(){return tO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},tO.apply(this,arguments)}function T8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function rv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T8(Object(n),!0).forEach(function(a){rke(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function rke(t,e,n){return e=ake(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ake(t){var e=ike(t,"string");return db(e)=="symbol"?e:e+""}function ike(t,e){if(db(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(db(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ske(t,e){if(t==null)return{};var n=oke(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function oke(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function lke(t,e){var n=t.x,a=t.y,i=ske(t,nke),s="".concat(n),o=parseInt(s,10),l="".concat(a),c=parseInt(l,10),d="".concat(e.height||i.height),f=parseInt(d,10),p="".concat(e.width||i.width),g=parseInt(p,10);return rv(rv(rv(rv(rv({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:g,name:e.name,radius:e.radius})}function k8(t){return Se.createElement(VV,tO({shapeType:"rectangle",propTransformer:lke,activeClassName:"recharts-active-bar"},t))}var cke=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,i){if(typeof e=="number")return e;var s=Nt(a)||Dye(a);return s?e(a,i):(s||Ef(),n)}},uke=["value","background"],JV;function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function dke(t,e){if(t==null)return{};var n=hke(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function hke(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},gN.apply(this,arguments)}function A8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function ga(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A8(Object(n),!0).forEach(function(a){sd(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function fke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,eH(a.key),a)}}function pke(t,e,n){return e&&E8(t.prototype,e),n&&E8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mke(t,e,n){return e=yN(e),gke(t,ZV()?Reflect.construct(e,n||[],yN(t).constructor):e.apply(t,n))}function gke(t,e){if(e&&(jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yke(t)}function yke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZV=function(){return!!t})()}function yN(t){return yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yN(t)}function xke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nO(t,e)}function nO(t,e){return nO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},nO(t,e)}function sd(t,e,n){return e=eH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eH(t){var e=vke(t,"string");return jg(e)=="symbol"?e:e+""}function vke(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(jg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _d=function(t){function e(){var n;fke(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=mke(this,e,[].concat(i)),sd(n,"state",{isAnimationFinished:!1}),sd(n,"id",If("recharts-bar-")),sd(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),sd(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return xke(e,t),pke(e,[{key:"renderRectanglesStatically",value:function(a){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,d=s.activeBar,f=zt(this.props,!1);return a&&a.map(function(p,g){var x=g===c,b=x?d:o,j=ga(ga(ga({},f),p),{},{isActive:x,option:b,index:g,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Se.createElement(Mn,gN({className:"recharts-bar-rectangle"},Cf(i.props,p,g),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(g)}),Se.createElement(k8,j))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,p=i.animationId,g=this.state.prevData;return Se.createElement(zo,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,j=s.map(function(S,_){var T=g&&g[_];if(T){var C=_a(T.x,S.x),E=_a(T.y,S.y),k=_a(T.width,S.width),O=_a(T.height,S.height);return ga(ga({},S),{},{x:C(b),y:E(b),width:k(b),height:O(b)})}if(o==="horizontal"){var I=_a(0,S.height),F=I(b);return ga(ga({},S),{},{y:S.y+S.height-F,height:F})}var B=_a(0,S.width),$=B(b);return ga(ga({},S),{},{width:$})});return Se.createElement(Mn,null,a.renderRectanglesStatically(j))})}},{key:"renderRectangles",value:function(){var a=this.props,i=a.data,s=a.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!kf(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var a=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=zt(this.props.background,!1);return s.map(function(d,f){d.value;var p=d.background,g=dke(d,uke);if(!p)return null;var x=ga(ga(ga(ga(ga({},g),{},{fill:"#eee"},p),c),Cf(a.props,d,f)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Se.createElement(k8,gN({key:"background-bar-".concat(f),option:a.props.background,isActive:f===l},x))})}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,d=s.layout,f=s.children,p=Rs(f,Ub);if(!p)return null;var g=d==="vertical"?o[0].height/2:o[0].width/2,x=function(S,_){var T=Array.isArray(S.value)?S.value[1]:S.value;return{x:S.x,y:S.y,value:T,errorVal:ca(S,_)}},b={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Se.createElement(Mn,b,p.map(function(j){return Se.cloneElement(j,{key:"error-bar-".concat(i,"-").concat(j.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var a=this.props,i=a.hide,s=a.data,o=a.className,l=a.xAxis,c=a.yAxis,d=a.left,f=a.top,p=a.width,g=a.height,x=a.isAnimationActive,b=a.background,j=a.id;if(i||!s||!s.length)return null;var S=this.state.isAnimationFinished,_=pn("recharts-bar",o),T=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,E=T||C,k=hn(j)?this.id:j;return Se.createElement(Mn,{className:_},T||C?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(k)},Se.createElement("rect",{x:T?d:d-p/2,y:C?f:f-g/2,width:T?p:p*2,height:C?g:g*2}))):null,Se.createElement(Mn,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(k,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(E,k),(!x||S)&&Ml.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:i.curData}:a.data!==i.curData?{curData:a.data}:null}}])}(v.PureComponent);JV=_d;sd(_d,"displayName","Bar");sd(_d,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});sd(_d,"getComposedData",function(t){var e=t.props,n=t.item,a=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,x=WNe(a,n);if(!x)return null;var b=e.layout,j=n.type.defaultProps,S=j!==void 0?ga(ga({},j),n.props):n.props,_=S.dataKey,T=S.children,C=S.minPointSize,E=b==="horizontal"?o:s,k=d?E.scale.domain():null,O=eSe({numericAxis:E}),I=Rs(T,Fb),F=p.map(function(B,$){var L,V,H,ne,Q,q;d?L=YNe(d[f+$],k):(L=ca(B,_),Array.isArray(L)||(L=[O,L]));var G=cke(C,JV.defaultProps.minPointSize)(L[1],$);if(b==="horizontal"){var ie,W=[o.scale(L[0]),o.scale(L[1])],z=W[0],ce=W[1];V=n$({axis:s,ticks:l,bandSize:i,offset:x.offset,entry:B,index:$}),H=(ie=ce??z)!==null&&ie!==void 0?ie:void 0,ne=x.size;var je=z-ce;if(Q=Number.isNaN(je)?0:je,q={x:V,y:o.y,width:ne,height:o.height},Math.abs(G)>0&&Math.abs(Q)<Math.abs(G)){var Y=Ri(Q||G)*(Math.abs(G)-Math.abs(Q));H-=Y,Q+=Y}}else{var Ie=[s.scale(L[0]),s.scale(L[1])],Ue=Ie[0],ze=Ie[1];if(V=Ue,H=n$({axis:o,ticks:c,bandSize:i,offset:x.offset,entry:B,index:$}),ne=ze-Ue,Q=x.size,q={x:s.x,y:H,width:s.width,height:Q},Math.abs(G)>0&&Math.abs(ne)<Math.abs(G)){var Le=Ri(ne||G)*(Math.abs(G)-Math.abs(ne));ne+=Le}}return ga(ga(ga({},B),{},{x:V,y:H,width:ne,height:Q,value:d?L:L[1],payload:B,background:q},I&&I[$]&&I[$].props),{},{tooltipPayload:[CV(n,B)],tooltipPosition:{x:V+ne/2,y:H+Q/2}})});return ga({data:F,layout:b},g)});function hb(t){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hb(t)}function bke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,tH(a.key),a)}}function jke(t,e,n){return e&&P8(t.prototype,e),n&&P8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Mo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O8(Object(n),!0).forEach(function(a){OS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function OS(t,e,n){return e=tH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tH(t){var e=wke(t,"string");return hb(e)=="symbol"?e:e+""}function wke(t,e){if(hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(hb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vM=function(e,n,a,i,s){var o=e.width,l=e.height,c=e.layout,d=e.children,f=Object.keys(n),p={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},g=!!ks(d,_d);return f.reduce(function(x,b){var j=n[b],S=j.orientation,_=j.domain,T=j.padding,C=T===void 0?{}:T,E=j.mirror,k=j.reversed,O="".concat(S).concat(E?"Mirror":""),I,F,B,$,L;if(j.type==="number"&&(j.padding==="gap"||j.padding==="no-gap")){var V=_[1]-_[0],H=1/0,ne=j.categoricalDomain.sort(Rye);if(ne.forEach(function(Ie,Ue){Ue>0&&(H=Math.min((Ie||0)-(ne[Ue-1]||0),H))}),Number.isFinite(H)){var Q=H/V,q=j.layout==="vertical"?a.height:a.width;if(j.padding==="gap"&&(I=Q*q/2),j.padding==="no-gap"){var G=Li(e.barCategoryGap,Q*q),ie=Q*q/2;I=ie-G-(ie-G)/q*G}}}i==="xAxis"?F=[a.left+(C.left||0)+(I||0),a.left+a.width-(C.right||0)-(I||0)]:i==="yAxis"?F=c==="horizontal"?[a.top+a.height-(C.bottom||0),a.top+(C.top||0)]:[a.top+(C.top||0)+(I||0),a.top+a.height-(C.bottom||0)-(I||0)]:F=j.range,k&&(F=[F[1],F[0]]);var W=wV(j,s,g),z=W.scale,ce=W.realScaleType;z.domain(_).range(F),NV(z);var je=SV(z,Mo(Mo({},j),{},{realScaleType:ce}));i==="xAxis"?(L=S==="top"&&!E||S==="bottom"&&E,B=a.left,$=p[O]-L*j.height):i==="yAxis"&&(L=S==="left"&&!E||S==="right"&&E,B=p[O]-L*j.width,$=a.top);var Y=Mo(Mo(Mo({},j),je),{},{realScaleType:ce,x:B,y:$,scale:z,width:i==="xAxis"?a.width:j.width,height:i==="yAxis"?a.height:j.height});return Y.bandSize=tN(Y,je),!j.hide&&i==="xAxis"?p[O]+=(L?-1:1)*Y.height:j.hide||(p[O]+=(L?-1:1)*Y.width),Mo(Mo({},x),{},OS({},b,Y))},{})},nH=function(e,n){var a=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(a,s),y:Math.min(i,o),width:Math.abs(s-a),height:Math.abs(o-i)}},Nke=function(e){var n=e.x1,a=e.y1,i=e.x2,s=e.y2;return nH({x:n,y:a},{x:i,y:s})},rH=function(){function t(e){bke(this,t),this.scale=e}return jke(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.bandAware,s=a.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),i=a[0],s=a[a.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();OS(rH,"EPS",1e-4);var bM=function(e){var n=Object.keys(e).reduce(function(a,i){return Mo(Mo({},a),{},OS({},i,rH.create(e[i])))},{});return Mo(Mo({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return XTe(i,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return XV(i,function(s,o){return n[o].isInRange(s)})}})};function Ske(t){return(t%180+180)%180}var _ke=function(e){var n=e.width,a=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Ske(i),o=s*Math.PI/180,l=Math.atan(a/n),c=o>l&&o<Math.PI-l?a/Math.sin(o):n/Math.cos(o);return Math.abs(c)},CA,D8;function Cke(){if(D8)return CA;D8=1;var t=Bl(),e=Lb(),n=fS();function a(i){return function(s,o,l){var c=Object(s);if(!e(s)){var d=t(o,3);s=n(s),o=function(p){return d(c[p],p,c)}}var f=i(s,o,l);return f>-1?c[d?s[f]:f]:void 0}}return CA=a,CA}var TA,M8;function Tke(){if(M8)return TA;M8=1;var t=WV();function e(n){var a=t(n),i=a%1;return a===a?i?a-i:a:0}return TA=e,TA}var kA,I8;function kke(){if(I8)return kA;I8=1;var t=r7(),e=Bl(),n=Tke(),a=Math.max;function i(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var d=l==null?0:n(l);return d<0&&(d=a(c+d,0)),t(s,e(o,3),d)}return kA=i,kA}var AA,R8;function Ake(){if(R8)return AA;R8=1;var t=Cke(),e=kke(),n=t(e);return AA=n,AA}var Eke=Ake();const Pke=Wn(Eke);var Oke=x9();const Dke=Wn(Oke);var Mke=Dke(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),jM=v.createContext(void 0),wM=v.createContext(void 0),aH=v.createContext(void 0),iH=v.createContext({}),sH=v.createContext(void 0),oH=v.createContext(0),lH=v.createContext(0),L8=function(e){var n=e.state,a=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,f=Mke(s);return Se.createElement(jM.Provider,{value:a},Se.createElement(wM.Provider,{value:i},Se.createElement(iH.Provider,{value:s},Se.createElement(aH.Provider,{value:f},Se.createElement(sH.Provider,{value:o},Se.createElement(oH.Provider,{value:d},Se.createElement(lH.Provider,{value:c},l)))))))},Ike=function(){return v.useContext(sH)},cH=function(e){var n=v.useContext(jM);n==null&&Ef();var a=n[e];return a==null&&Ef(),a},Rke=function(){var e=v.useContext(jM);return Yu(e)},Lke=function(){var e=v.useContext(wM),n=Pke(e,function(a){return XV(a.domain,Number.isFinite)});return n||Yu(e)},uH=function(e){var n=v.useContext(wM);n==null&&Ef();var a=n[e];return a==null&&Ef(),a},Fke=function(){var e=v.useContext(aH);return e},$ke=function(){return v.useContext(iH)},NM=function(){return v.useContext(lH)},SM=function(){return v.useContext(oH)};function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function Bke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zke(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,hH(a.key),a)}}function qke(t,e,n){return e&&zke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uke(t,e,n){return e=xN(e),Vke(t,dH()?Reflect.construct(e,n||[],xN(t).constructor):e.apply(t,n))}function Vke(t,e){if(e&&(wg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hke(t)}function Hke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dH=function(){return!!t})()}function xN(t){return xN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xN(t)}function Gke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rO(t,e)}function rO(t,e){return rO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},rO(t,e)}function F8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function $8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F8(Object(n),!0).forEach(function(a){_M(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function _M(t,e,n){return e=hH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hH(t){var e=Wke(t,"string");return wg(e)=="symbol"?e:e+""}function Wke(t,e){if(wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(wg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Yke(t,e){return Jke(t)||Xke(t,e)||Qke(t,e)||Kke()}function Kke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qke(t,e){if(t){if(typeof t=="string")return B8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B8(t,e)}}function B8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function Xke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Jke(t){if(Array.isArray(t))return t}function aO(){return aO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},aO.apply(this,arguments)}var Zke=function(e,n){var a;return Se.isValidElement(e)?a=Se.cloneElement(e,n):an(e)?a=e(n):a=Se.createElement("line",aO({},n,{className:"recharts-reference-line-line"})),a},eAe=function(e,n,a,i,s,o,l,c,d){var f=s.x,p=s.y,g=s.width,x=s.height;if(a){var b=d.y,j=e.y.apply(b,{position:o});if(Il(d,"discard")&&!e.y.isInRange(j))return null;var S=[{x:f+g,y:j},{x:f,y:j}];return c==="left"?S.reverse():S}if(n){var _=d.x,T=e.x.apply(_,{position:o});if(Il(d,"discard")&&!e.x.isInRange(T))return null;var C=[{x:T,y:p+x},{x:T,y:p}];return l==="top"?C.reverse():C}if(i){var E=d.segment,k=E.map(function(O){return e.apply(O,{position:o})});return Il(d,"discard")&&WTe(k,function(O){return!e.isInRange(O)})?null:k}return null};function tAe(t){var e=t.x,n=t.y,a=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=Ike(),f=cH(i),p=uH(s),g=Fke();if(!d||!g)return null;$o(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=bM({x:f.scale,y:p.scale}),b=Ca(e),j=Ca(n),S=a&&a.length===2,_=eAe(x,b,j,S,g,t.position,f.orientation,p.orientation,t);if(!_)return null;var T=Yke(_,2),C=T[0],E=C.x,k=C.y,O=T[1],I=O.x,F=O.y,B=Il(t,"hidden")?"url(#".concat(d,")"):void 0,$=$8($8({clipPath:B},zt(t,!0)),{},{x1:E,y1:k,x2:I,y2:F});return Se.createElement(Mn,{className:pn("recharts-reference-line",l)},Zke(o,$),Ia.renderCallByParent(t,Nke({x1:E,y1:k,x2:I,y2:F})))}var CM=function(t){function e(){return Bke(this,e),Uke(this,e,arguments)}return Gke(e,t),qke(e,[{key:"render",value:function(){return Se.createElement(tAe,this.props)}}])}(Se.Component);_M(CM,"displayName","ReferenceLine");_M(CM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function iO(){return iO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},iO.apply(this,arguments)}function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function q8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z8(Object(n),!0).forEach(function(a){DS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,pH(a.key),a)}}function aAe(t,e,n){return e&&rAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iAe(t,e,n){return e=vN(e),sAe(t,fH()?Reflect.construct(e,n||[],vN(t).constructor):e.apply(t,n))}function sAe(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oAe(t)}function oAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fH=function(){return!!t})()}function vN(t){return vN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vN(t)}function lAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sO(t,e)}function sO(t,e){return sO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},sO(t,e)}function DS(t,e,n){return e=pH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pH(t){var e=cAe(t,"string");return Ng(e)=="symbol"?e:e+""}function cAe(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ng(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uAe=function(e){var n=e.x,a=e.y,i=e.xAxis,s=e.yAxis,o=bM({x:i.scale,y:s.scale}),l=o.apply({x:n,y:a},{bandAware:!0});return Il(e,"discard")&&!o.isInRange(l)?null:l},MS=function(t){function e(){return nAe(this,e),iAe(this,e,arguments)}return lAe(e,t),aAe(e,[{key:"render",value:function(){var a=this.props,i=a.x,s=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,d=Ca(i),f=Ca(s);if($o(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var p=uAe(this.props);if(!p)return null;var g=p.x,x=p.y,b=this.props,j=b.shape,S=b.className,_=Il(this.props,"hidden")?"url(#".concat(c,")"):void 0,T=q8(q8({clipPath:_},zt(this.props,!0)),{},{cx:g,cy:x});return Se.createElement(Mn,{className:pn("recharts-reference-dot",S)},e.renderDot(j,T),Ia.renderCallByParent(this.props,{x:g-o,y:x-o,width:2*o,height:2*o}))}}])}(Se.Component);DS(MS,"displayName","ReferenceDot");DS(MS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});DS(MS,"renderDot",function(t,e){var n;return Se.isValidElement(t)?n=Se.cloneElement(t,e):an(t)?n=t(e):n=Se.createElement(Vb,iO({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function oO(){return oO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oO.apply(this,arguments)}function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function U8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function V8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U8(Object(n),!0).forEach(function(a){IS(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function dAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hAe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,gH(a.key),a)}}function fAe(t,e,n){return e&&hAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pAe(t,e,n){return e=bN(e),mAe(t,mH()?Reflect.construct(e,n||[],bN(t).constructor):e.apply(t,n))}function mAe(t,e){if(e&&(Sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gAe(t)}function gAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mH=function(){return!!t})()}function bN(t){return bN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bN(t)}function yAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lO(t,e)}function lO(t,e){return lO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},lO(t,e)}function IS(t,e,n){return e=gH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gH(t){var e=xAe(t,"string");return Sg(e)=="symbol"?e:e+""}function xAe(t,e){if(Sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Sg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vAe=function(e,n,a,i,s){var o=s.x1,l=s.x2,c=s.y1,d=s.y2,f=s.xAxis,p=s.yAxis;if(!f||!p)return null;var g=bM({x:f.scale,y:p.scale}),x={x:e?g.x.apply(o,{position:"start"}):g.x.rangeMin,y:a?g.y.apply(c,{position:"start"}):g.y.rangeMin},b={x:n?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:i?g.y.apply(d,{position:"end"}):g.y.rangeMax};return Il(s,"discard")&&(!g.isInRange(x)||!g.isInRange(b))?null:nH(x,b)},RS=function(t){function e(){return dAe(this,e),pAe(this,e,arguments)}return yAe(e,t),fAe(e,[{key:"render",value:function(){var a=this.props,i=a.x1,s=a.x2,o=a.y1,l=a.y2,c=a.className,d=a.alwaysShow,f=a.clipPathId;$o(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Ca(i),g=Ca(s),x=Ca(o),b=Ca(l),j=this.props.shape;if(!p&&!g&&!x&&!b&&!j)return null;var S=vAe(p,g,x,b,this.props);if(!S&&!j)return null;var _=Il(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Se.createElement(Mn,{className:pn("recharts-reference-area",c)},e.renderRect(j,V8(V8({clipPath:_},zt(this.props,!0)),S)),Ia.renderCallByParent(this.props,S))}}])}(Se.Component);IS(RS,"displayName","ReferenceArea");IS(RS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});IS(RS,"renderRect",function(t,e){var n;return Se.isValidElement(t)?n=Se.cloneElement(t,e):an(t)?n=t(e):n=Se.createElement(xM,oO({},e,{className:"recharts-reference-area-rect"})),n});function yH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var a=[],i=0;i<t.length;i+=e)a.push(t[i]);return a}function bAe(t,e,n){var a={width:t.width+e.width,height:t.height+e.height};return _ke(a,n)}function jAe(t,e,n){var a=n==="width",i=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:a?i:s,end:a?i+o:s+l}:{start:a?i+o:s+l,end:a?i:s}}function jN(t,e,n,a,i){if(t*e<t*a||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-a)>=0&&t*(e+t*s/2-i)<=0}function wAe(t,e){return yH(t,e+1)}function NAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=e.start,l=e.end,c=0,d=1,f=o,p=function(){var b=a==null?void 0:a[c];if(b===void 0)return{v:yH(a,d)};var j=c,S,_=function(){return S===void 0&&(S=n(b,j)),S},T=b.coordinate,C=c===0||jN(t,T,_,f,l);C||(c=0,f=o,d+=1),C&&(f=T+t*(_()/2+i),c+=d)},g;d<=s.length;)if(g=p(),g)return g.v;return[]}function fb(t){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fb(t)}function H8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function di(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H8(Object(n),!0).forEach(function(a){SAe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function SAe(t,e,n){return e=_Ae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ae(t){var e=CAe(t,"string");return fb(e)=="symbol"?e:e+""}function CAe(t,e){if(fb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(fb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TAe(t,e,n,a,i){for(var s=(a||[]).slice(),o=s.length,l=e.start,c=e.end,d=function(g){var x=s[g],b,j=function(){return b===void 0&&(b=n(x,g)),b};if(g===o-1){var S=t*(x.coordinate+t*j()/2-c);s[g]=x=di(di({},x),{},{tickCoord:S>0?x.coordinate-S*t:x.coordinate})}else s[g]=x=di(di({},x),{},{tickCoord:x.coordinate});var _=jN(t,x.tickCoord,j,l,c);_&&(c=x.tickCoord-t*(j()/2+i),s[g]=di(di({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return s}function kAe(t,e,n,a,i,s){var o=(a||[]).slice(),l=o.length,c=e.start,d=e.end;if(s){var f=a[l-1],p=n(f,l-1),g=t*(f.coordinate+t*p/2-d);o[l-1]=f=di(di({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate});var x=jN(t,f.tickCoord,function(){return p},c,d);x&&(d=f.tickCoord-t*(p/2+i),o[l-1]=di(di({},f),{},{isShow:!0}))}for(var b=s?l-1:l,j=function(T){var C=o[T],E,k=function(){return E===void 0&&(E=n(C,T)),E};if(T===0){var O=t*(C.coordinate-t*k()/2-c);o[T]=C=di(di({},C),{},{tickCoord:O<0?C.coordinate-O*t:C.coordinate})}else o[T]=C=di(di({},C),{},{tickCoord:C.coordinate});var I=jN(t,C.tickCoord,k,c,d);I&&(c=C.tickCoord+t*(k()/2+i),o[T]=di(di({},C),{},{isShow:!0}))},S=0;S<b;S++)j(S);return o}function TM(t,e,n){var a=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,f=t.unit,p=t.angle;if(!i||!i.length||!a)return[];if(Nt(c)||jd.isSsr)return wAe(i,typeof c=="number"&&Nt(c)?c:0);var g=[],x=l==="top"||l==="bottom"?"width":"height",b=f&&x==="width"?bv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},j=function(C,E){var k=an(d)?d(C.value,E):C.value;return x==="width"?bAe(bv(k,{fontSize:e,letterSpacing:n}),b,p):bv(k,{fontSize:e,letterSpacing:n})[x]},S=i.length>=2?Ri(i[1].coordinate-i[0].coordinate):1,_=jAe(s,S,x);return c==="equidistantPreserveStart"?NAe(S,_,j,i,o):(c==="preserveStart"||c==="preserveStartEnd"?g=kAe(S,_,j,i,o,c==="preserveStartEnd"):g=TAe(S,_,j,i,o),g.filter(function(T){return T.isShow}))}var AAe=["viewBox"],EAe=["viewBox"],PAe=["ticks"];function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function Om(){return Om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Om.apply(this,arguments)}function G8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function wa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G8(Object(n),!0).forEach(function(a){kM(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function EA(t,e){if(t==null)return{};var n=OAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function OAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function DAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,vH(a.key),a)}}function MAe(t,e,n){return e&&W8(t.prototype,e),n&&W8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function IAe(t,e,n){return e=wN(e),RAe(t,xH()?Reflect.construct(e,n||[],wN(t).constructor):e.apply(t,n))}function RAe(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LAe(t)}function LAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xH=function(){return!!t})()}function wN(t){return wN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wN(t)}function FAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cO(t,e)}function cO(t,e){return cO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},cO(t,e)}function kM(t,e,n){return e=vH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vH(t){var e=$Ae(t,"string");return _g(e)=="symbol"?e:e+""}function $Ae(t,e){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(_g(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wg=function(t){function e(n){var a;return DAe(this,e),a=IAe(this,e,[n]),a.state={fontSize:"",letterSpacing:""},a}return FAe(e,t),MAe(e,[{key:"shouldComponentUpdate",value:function(a,i){var s=a.viewBox,o=EA(a,AAe),l=this.props,c=l.viewBox,d=EA(l,EAe);return!Fm(s,c)||!Fm(o,d)||!Fm(i,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var i=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,f=i.tickSize,p=i.mirror,g=i.tickMargin,x,b,j,S,_,T,C=p?-1:1,E=a.tickSize||f,k=Nt(a.tickCoord)?a.tickCoord:a.coordinate;switch(d){case"top":x=b=a.coordinate,S=o+ +!p*c,j=S-C*E,T=j-C*g,_=k;break;case"left":j=S=a.coordinate,b=s+ +!p*l,x=b-C*E,_=x-C*g,T=k;break;case"right":j=S=a.coordinate,b=s+ +p*l,x=b+C*E,_=x+C*g,T=k;break;default:x=b=a.coordinate,S=o+ +p*c,j=S+C*E,T=j+C*g,_=k;break}return{line:{x1:x,y1:j,x2:b,y2:S},tick:{x:_,y:T}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,i=a.orientation,s=a.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,i=a.x,s=a.y,o=a.width,l=a.height,c=a.orientation,d=a.mirror,f=a.axisLine,p=wa(wa(wa({},zt(this.props,!1)),zt(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var g=+(c==="top"&&!d||c==="bottom"&&d);p=wa(wa({},p),{},{x1:i,y1:s+g*l,x2:i+o,y2:s+g*l})}else{var x=+(c==="left"&&!d||c==="right"&&d);p=wa(wa({},p),{},{x1:i+x*o,y1:s,x2:i+x*o,y2:s+l})}return Se.createElement("line",Om({},p,{className:pn("recharts-cartesian-axis-line",Is(f,"className"))}))}},{key:"renderTicks",value:function(a,i,s){var o=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,p=l.tickFormatter,g=l.unit,x=TM(wa(wa({},this.props),{},{ticks:a}),i,s),b=this.getTickTextAnchor(),j=this.getTickVerticalAnchor(),S=zt(this.props,!1),_=zt(f,!1),T=wa(wa({},S),{},{fill:"none"},zt(c,!1)),C=x.map(function(E,k){var O=o.getTickLineCoord(E),I=O.line,F=O.tick,B=wa(wa(wa(wa({textAnchor:b,verticalAnchor:j},S),{},{stroke:"none",fill:d},_),F),{},{index:k,payload:E,visibleTicksCount:x.length,tickFormatter:p});return Se.createElement(Mn,Om({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},Cf(o.props,E,k)),c&&Se.createElement("line",Om({},T,I,{className:pn("recharts-cartesian-axis-tick-line",Is(c,"className"))})),f&&e.renderTickItem(f,B,"".concat(an(p)?p(E.value,k):E.value).concat(g||"")))});return Se.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var a=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,f=i.hide;if(f)return null;var p=this.props,g=p.ticks,x=EA(p,PAe),b=g;return an(c)&&(b=g&&g.length>0?c(this.props):c(x)),o<=0||l<=0||!b||!b.length?null:Se.createElement(Mn,{className:pn("recharts-cartesian-axis",d),ref:function(S){a.layerReference=S}},s&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),Ia.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,i,s){var o,l=pn(i.className,"recharts-cartesian-axis-tick-value");return Se.isValidElement(a)?o=Se.cloneElement(a,wa(wa({},i),{},{className:l})):an(a)?o=a(wa(wa({},i),{},{className:l})):o=Se.createElement(Tf,Om({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(v.Component);kM(Wg,"displayName","CartesianAxis");kM(Wg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var BAe=["x1","y1","x2","y2","key"],zAe=["offset"];function Pf(t){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(t)}function Y8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y8(Object(n),!0).forEach(function(a){qAe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function qAe(t,e,n){return e=UAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UAe(t){var e=VAe(t,"string");return Pf(e)=="symbol"?e:e+""}function VAe(t,e){if(Pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Pf(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ef.apply(this,arguments)}function K8(t,e){if(t==null)return{};var n=HAe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function HAe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}var GAe=function(e){var n=e.fill;if(!n||n==="none")return null;var a=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return Se.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function bH(t,e){var n;if(Se.isValidElement(t))n=Se.cloneElement(t,e);else if(an(t))n=t(e);else{var a=e.x1,i=e.y1,s=e.x2,o=e.y2,l=e.key,c=K8(e,BAe),d=zt(c,!1);d.offset;var f=K8(d,zAe);n=Se.createElement("line",ef({},f,{x1:a,y1:i,x2:s,y2:o,fill:"none",key:l}))}return n}function WAe(t){var e=t.x,n=t.width,a=t.horizontal,i=a===void 0?!0:a,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var d=fi(fi({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return bH(i,d)});return Se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function YAe(t){var e=t.y,n=t.height,a=t.vertical,i=a===void 0?!0:a,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var d=fi(fi({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return bH(i,d)});return Se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function KAe(t){var e=t.horizontalFill,n=t.fillOpacity,a=t.x,i=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var f=l.map(function(g){return Math.round(g+i-i)}).sort(function(g,x){return g-x});i!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var b=!f[x+1],j=b?i+o-g:f[x+1]-g;if(j<=0)return null;var S=x%e.length;return Se.createElement("rect",{key:"react-".concat(x),y:g,x:a,height:j,width:s,stroke:"none",fill:e[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function QAe(t){var e=t.vertical,n=e===void 0?!0:e,a=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!n||!a||!a.length)return null;var f=d.map(function(g){return Math.round(g+s-s)}).sort(function(g,x){return g-x});s!==f[0]&&f.unshift(0);var p=f.map(function(g,x){var b=!f[x+1],j=b?s+l-g:f[x+1]-g;if(j<=0)return null;var S=x%a.length;return Se.createElement("rect",{key:"react-".concat(x),x:g,y:o,width:j,height:c,stroke:"none",fill:a[S],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var XAe=function(e,n){var a=e.xAxis,i=e.width,s=e.height,o=e.offset;return jV(TM(fi(fi(fi({},Wg.defaultProps),a),{},{ticks:Sc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},JAe=function(e,n){var a=e.yAxis,i=e.width,s=e.height,o=e.offset;return jV(TM(fi(fi(fi({},Wg.defaultProps),a),{},{ticks:Sc(a,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},jm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pb(t){var e,n,a,i,s,o,l=NM(),c=SM(),d=$ke(),f=fi(fi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:jm.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:jm.fill,horizontal:(a=t.horizontal)!==null&&a!==void 0?a:jm.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:jm.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:jm.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:jm.verticalFill,x:Nt(t.x)?t.x:d.left,y:Nt(t.y)?t.y:d.top,width:Nt(t.width)?t.width:d.width,height:Nt(t.height)?t.height:d.height}),p=f.x,g=f.y,x=f.width,b=f.height,j=f.syncWithTicks,S=f.horizontalValues,_=f.verticalValues,T=Rke(),C=Lke();if(!Nt(x)||x<=0||!Nt(b)||b<=0||!Nt(p)||p!==+p||!Nt(g)||g!==+g)return null;var E=f.verticalCoordinatesGenerator||XAe,k=f.horizontalCoordinatesGenerator||JAe,O=f.horizontalPoints,I=f.verticalPoints;if((!O||!O.length)&&an(k)){var F=S&&S.length,B=k({yAxis:C?fi(fi({},C),{},{ticks:F?S:C.ticks}):void 0,width:l,height:c,offset:d},F?!0:j);$o(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Pf(B),"]")),Array.isArray(B)&&(O=B)}if((!I||!I.length)&&an(E)){var $=_&&_.length,L=E({xAxis:T?fi(fi({},T),{},{ticks:$?_:T.ticks}):void 0,width:l,height:c,offset:d},$?!0:j);$o(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Pf(L),"]")),Array.isArray(L)&&(I=L)}return Se.createElement("g",{className:"recharts-cartesian-grid"},Se.createElement(GAe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Se.createElement(WAe,ef({},f,{offset:d,horizontalPoints:O,xAxis:T,yAxis:C})),Se.createElement(YAe,ef({},f,{offset:d,verticalPoints:I,xAxis:T,yAxis:C})),Se.createElement(KAe,ef({},f,{horizontalPoints:O})),Se.createElement(QAe,ef({},f,{verticalPoints:I})))}pb.displayName="CartesianGrid";var ZAe=["type","layout","connectNulls","ref"],eEe=["key"];function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function Q8(t,e){if(t==null)return{};var n=tEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function tEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function Cv(){return Cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Cv.apply(this,arguments)}function X8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X8(Object(n),!0).forEach(function(a){Io(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function wm(t){return iEe(t)||aEe(t)||rEe(t)||nEe()}function nEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rEe(t,e){if(t){if(typeof t=="string")return uO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uO(t,e)}}function aEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iEe(t){if(Array.isArray(t))return uO(t)}function uO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function sEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J8(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,wH(a.key),a)}}function oEe(t,e,n){return e&&J8(t.prototype,e),n&&J8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lEe(t,e,n){return e=NN(e),cEe(t,jH()?Reflect.construct(e,n||[],NN(t).constructor):e.apply(t,n))}function cEe(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uEe(t)}function uEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jH=function(){return!!t})()}function NN(t){return NN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NN(t)}function dEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dO(t,e)}function dO(t,e){return dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},dO(t,e)}function Io(t,e,n){return e=wH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wH(t){var e=hEe(t,"string");return Cg(e)=="symbol"?e:e+""}function hEe(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Cg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hb=function(t){function e(){var n;sEe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=lEe(this,e,[].concat(i)),Io(n,"state",{isAnimationFinished:!0,totalLength:0}),Io(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Io(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(_,T){return _+T});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),p=o%d,g=l-o,x=[],b=0,j=0;b<c.length;j+=c[b],++b)if(j+c[b]>p){x=[].concat(wm(c.slice(0,b)),[p-j]);break}var S=x.length%2===0?[0,g]:[g];return[].concat(wm(e.repeat(c,f)),wm(x),S).map(function(_){return"".concat(_,"px")}).join(", ")}),Io(n,"id",If("recharts-line-")),Io(n,"pathRef",function(o){n.mainCurve=o}),Io(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Io(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return dEe(e,t),oEe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,d=s.layout,f=s.children,p=Rs(f,Ub);if(!p)return null;var g=function(j,S){return{x:j.x,y:j.y,value:j.value,errorVal:ca(j.payload,S)}},x={clipPath:a?"url(#clipPath-".concat(i,")"):null};return Se.createElement(Mn,x,p.map(function(b){return Se.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:g})}))}},{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,f=l.dataKey,p=zt(this.props,!1),g=zt(c,!0),x=d.map(function(j,S){var _=Cs(Cs(Cs({key:"dot-".concat(S),r:3},p),g),{},{index:S,cx:j.x,cy:j.y,value:j.value,dataKey:f,payload:j.payload,points:d});return e.renderDotItem(c,_)}),b={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Se.createElement(Mn,Cv({className:"recharts-line-dots",key:"dots"},b),x)}},{key:"renderCurveStatically",value:function(a,i,s,o){var l=this.props,c=l.type,d=l.layout,f=l.connectNulls;l.ref;var p=Q8(l,ZAe),g=Cs(Cs(Cs({},zt(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:a},o),{},{type:c,layout:d,connectNulls:f});return Se.createElement(pf,Cv({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,b=o.animateNewValues,j=o.width,S=o.height,_=this.state,T=_.prevPoints,C=_.totalLength;return Se.createElement(zo,{begin:f,duration:p,isActive:d,easing:g,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var k=E.t;if(T){var O=T.length/l.length,I=l.map(function(V,H){var ne=Math.floor(H*O);if(T[ne]){var Q=T[ne],q=_a(Q.x,V.x),G=_a(Q.y,V.y);return Cs(Cs({},V),{},{x:q(k),y:G(k)})}if(b){var ie=_a(j*2,V.x),W=_a(S/2,V.y);return Cs(Cs({},V),{},{x:ie(k),y:W(k)})}return Cs(Cs({},V),{},{x:V.x,y:V.y})});return s.renderCurveStatically(I,a,i)}var F=_a(0,C),B=F(k),$;if(c){var L="".concat(c).split(/[,\s]+/gim).map(function(V){return parseFloat(V)});$=s.getStrokeDasharray(B,C,L)}else $=s.generateSimpleStrokeDasharray(C,B);return s.renderCurveStatically(l,a,i,{strokeDasharray:$})})}},{key:"renderCurve",value:function(a,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,d=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!d&&f>0||!kf(d,o))?this.renderCurveWithAnimation(a,i):this.renderCurveStatically(o,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,f=i.yAxis,p=i.top,g=i.left,x=i.width,b=i.height,j=i.isAnimationActive,S=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=pn("recharts-line",c),E=d&&d.allowDataOverflow,k=f&&f.allowDataOverflow,O=E||k,I=hn(S)?this.id:S,F=(a=zt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},B=F.r,$=B===void 0?3:B,L=F.strokeWidth,V=L===void 0?2:L,H=N9(o)?o:{},ne=H.clipDot,Q=ne===void 0?!0:ne,q=$*2+V;return Se.createElement(Mn,{className:C},E||k?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(I)},Se.createElement("rect",{x:E?g:g-x/2,y:k?p:p-b/2,width:E?x:x*2,height:k?b:b*2})),!Q&&Se.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Se.createElement("rect",{x:g-q/2,y:p-q/2,width:x+q,height:b+q}))):null,!T&&this.renderCurve(O,I),this.renderErrorBar(O,I),(T||o)&&this.renderDots(O,Q,I),(!j||_)&&Ml.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:i.curPoints}:a.points!==i.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,i){for(var s=a.length%2!==0?[].concat(wm(a),[0]):a,o=[],l=0;l<i;++l)o=[].concat(wm(o),wm(s));return o}},{key:"renderDotItem",value:function(a,i){var s;if(Se.isValidElement(a))s=Se.cloneElement(a,i);else if(an(a))s=a(i);else{var o=i.key,l=Q8(i,eEe),c=pn("recharts-line-dot",typeof a!="boolean"?a.className:"");s=Se.createElement(Vb,Cv({key:o},l,{className:c}))}return s}}])}(v.PureComponent);Io(Hb,"displayName","Line");Io(Hb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!jd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Io(Hb,"getComposedData",function(t){var e=t.props,n=t.xAxis,a=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,f=e.layout,p=c.map(function(g,x){var b=ca(g,o);return f==="horizontal"?{x:eN({axis:n,ticks:i,bandSize:l,entry:g,index:x}),y:hn(b)?null:a.scale(b),value:b,payload:g}:{x:hn(b)?null:n.scale(b),y:eN({axis:a,ticks:s,bandSize:l,entry:g,index:x}),value:b,payload:g}});return Cs({points:p,layout:f},d)});var fEe=["layout","type","stroke","connectNulls","isRange","ref"],pEe=["key"],NH;function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function SH(t,e){if(t==null)return{};var n=mEe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function mEe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function tf(){return tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},tf.apply(this,arguments)}function Z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Gu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z8(Object(n),!0).forEach(function(a){Pl(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z8(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function gEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eB(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,CH(a.key),a)}}function yEe(t,e,n){return e&&eB(t.prototype,e),n&&eB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xEe(t,e,n){return e=SN(e),vEe(t,_H()?Reflect.construct(e,n||[],SN(t).constructor):e.apply(t,n))}function vEe(t,e){if(e&&(Tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bEe(t)}function bEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _H(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_H=function(){return!!t})()}function SN(t){return SN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SN(t)}function jEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hO(t,e)}function hO(t,e){return hO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},hO(t,e)}function Pl(t,e,n){return e=CH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CH(t){var e=wEe(t,"string");return Tg(e)=="symbol"?e:e+""}function wEe(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Tg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Cd=function(t){function e(){var n;gEe(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=xEe(this,e,[].concat(i)),Pl(n,"state",{isAnimationFinished:!0}),Pl(n,"id",If("recharts-area-")),Pl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),an(o)&&o()}),Pl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),an(o)&&o()}),n}return jEe(e,t),yEe(e,[{key:"renderDots",value:function(a,i,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,f=c.points,p=c.dataKey,g=zt(this.props,!1),x=zt(d,!0),b=f.map(function(S,_){var T=Gu(Gu(Gu({key:"dot-".concat(_),r:3},g),x),{},{index:_,cx:S.x,cy:S.y,dataKey:p,value:S.value,payload:S.payload,points:f});return e.renderDotItem(d,T)}),j={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Se.createElement(Mn,tf({className:"recharts-area-dots"},j),b)}},{key:"renderHorizontalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,d=o[o.length-1].x,f=a*Math.abs(c-d),p=id(o.map(function(g){return g.y||0}));return Nt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(id(s.map(function(g){return g.y||0})),p)),Nt(p)?Se.createElement("rect",{x:c<d?c:c-f,y:0,width:f,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,d=o[o.length-1].y,f=a*Math.abs(c-d),p=id(o.map(function(g){return g.x||0}));return Nt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(id(s.map(function(g){return g.x||0})),p)),Nt(p)?Se.createElement("rect",{x:0,y:c<d?c:c-f,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(a){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,i,s,o){var l=this.props,c=l.layout,d=l.type,f=l.stroke,p=l.connectNulls,g=l.isRange;l.ref;var x=SH(l,fEe);return Se.createElement(Mn,{clipPath:s?"url(#clipPath-".concat(o,")"):null},Se.createElement(pf,tf({},zt(x,!0),{points:a,connectNulls:p,type:d,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&Se.createElement(pf,tf({},zt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:a})),f!=="none"&&g&&Se.createElement(pf,tf({},zt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(a,i){var s=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,g=o.animationEasing,x=o.animationId,b=this.state,j=b.prevPoints,S=b.prevBaseLine;return Se.createElement(zo,{begin:f,duration:p,isActive:d,easing:g,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var T=_.t;if(j){var C=j.length/l.length,E=l.map(function(F,B){var $=Math.floor(B*C);if(j[$]){var L=j[$],V=_a(L.x,F.x),H=_a(L.y,F.y);return Gu(Gu({},F),{},{x:V(T),y:H(T)})}return F}),k;if(Nt(c)&&typeof c=="number"){var O=_a(S,c);k=O(T)}else if(hn(c)||qg(c)){var I=_a(S,0);k=I(T)}else k=c.map(function(F,B){var $=Math.floor(B*C);if(S[$]){var L=S[$],V=_a(L.x,F.x),H=_a(L.y,F.y);return Gu(Gu({},F),{},{x:V(T),y:H(T)})}return F});return s.renderAreaStatically(E,k,a,i)}return Se.createElement(Mn,null,Se.createElement("defs",null,Se.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(T))),Se.createElement(Mn,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,a,i)))})}},{key:"renderArea",value:function(a,i){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,d=this.state,f=d.prevPoints,p=d.prevBaseLine,g=d.totalLength;return c&&o&&o.length&&(!f&&g>0||!kf(f,o)||!kf(p,l))?this.renderAreaWithAnimation(a,i):this.renderAreaStatically(o,l,a,i)}},{key:"render",value:function(){var a,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,d=i.top,f=i.left,p=i.xAxis,g=i.yAxis,x=i.width,b=i.height,j=i.isAnimationActive,S=i.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=pn("recharts-area",c),E=p&&p.allowDataOverflow,k=g&&g.allowDataOverflow,O=E||k,I=hn(S)?this.id:S,F=(a=zt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},B=F.r,$=B===void 0?3:B,L=F.strokeWidth,V=L===void 0?2:L,H=N9(o)?o:{},ne=H.clipDot,Q=ne===void 0?!0:ne,q=$*2+V;return Se.createElement(Mn,{className:C},E||k?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(I)},Se.createElement("rect",{x:E?f:f-x/2,y:k?d:d-b/2,width:E?x:x*2,height:k?b:b*2})),!Q&&Se.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Se.createElement("rect",{x:f-q/2,y:d-q/2,width:x+q,height:b+q}))):null,T?null:this.renderArea(O,I),(o||T)&&this.renderDots(O,Q,I),(!j||_)&&Ml.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:a.points!==i.curPoints||a.baseLine!==i.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(v.PureComponent);NH=Cd;Pl(Cd,"displayName","Area");Pl(Cd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!jd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Pl(Cd,"getBaseValue",function(t,e,n,a){var i=t.layout,s=t.baseValue,o=e.props.baseValue,l=o??s;if(Nt(l)&&typeof l=="number")return l;var c=i==="horizontal"?a:n,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),p=Math.min(d[0],d[1]);return l==="dataMin"?p:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Pl(Cd,"getComposedData",function(t){var e=t.props,n=t.item,a=t.xAxis,i=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,x=e.layout,b=d&&d.length,j=NH.getBaseValue(e,n,a,i),S=x==="horizontal",_=!1,T=p.map(function(E,k){var O;b?O=d[f+k]:(O=ca(E,c),Array.isArray(O)?_=!0:O=[j,O]);var I=O[1]==null||b&&ca(E,c)==null;return S?{x:eN({axis:a,ticks:s,bandSize:l,entry:E,index:k}),y:I?null:i.scale(O[1]),value:O,payload:E}:{x:I?null:a.scale(O[1]),y:eN({axis:i,ticks:o,bandSize:l,entry:E,index:k}),value:O,payload:E}}),C;return b||_?C=T.map(function(E){var k=Array.isArray(E.value)?E.value[0]:null;return S?{x:E.x,y:k!=null&&E.y!=null?i.scale(k):null}:{x:k!=null?a.scale(k):null,y:E.y}}):C=S?i.scale(j):a.scale(j),Gu({points:T,baseLine:C,layout:x,isRange:_},g)});Pl(Cd,"renderDotItem",function(t,e){var n;if(Se.isValidElement(t))n=Se.cloneElement(t,e);else if(an(t))n=t(e);else{var a=pn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=SH(e,pEe);n=Se.createElement(Vb,tf({},s,{key:i,className:a}))}return n});function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function NEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,AH(a.key),a)}}function _Ee(t,e,n){return e&&SEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CEe(t,e,n){return e=_N(e),TEe(t,TH()?Reflect.construct(e,n||[],_N(t).constructor):e.apply(t,n))}function TEe(t,e){if(e&&(kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kEe(t)}function kEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TH=function(){return!!t})()}function _N(t){return _N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_N(t)}function AEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fO(t,e)}function fO(t,e){return fO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},fO(t,e)}function kH(t,e,n){return e=AH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AH(t){var e=EEe(t,"string");return kg(e)=="symbol"?e:e+""}function EEe(t,e){if(kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(kg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pO(){return pO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},pO.apply(this,arguments)}function PEe(t){var e=t.xAxisId,n=NM(),a=SM(),i=cH(e);return i==null?null:v.createElement(Wg,pO({},i,{className:pn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return Sc(o,!0)}}))}var Bc=function(t){function e(){return NEe(this,e),CEe(this,e,arguments)}return AEe(e,t),_Ee(e,[{key:"render",value:function(){return v.createElement(PEe,this.props)}}])}(v.Component);kH(Bc,"displayName","XAxis");kH(Bc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function OEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,OH(a.key),a)}}function MEe(t,e,n){return e&&DEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IEe(t,e,n){return e=CN(e),REe(t,EH()?Reflect.construct(e,n||[],CN(t).constructor):e.apply(t,n))}function REe(t,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LEe(t)}function LEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EH=function(){return!!t})()}function CN(t){return CN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CN(t)}function FEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mO(t,e)}function mO(t,e){return mO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},mO(t,e)}function PH(t,e,n){return e=OH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OH(t){var e=$Ee(t,"string");return Ag(e)=="symbol"?e:e+""}function $Ee(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Ag(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function gO(){return gO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},gO.apply(this,arguments)}var BEe=function(e){var n=e.yAxisId,a=NM(),i=SM(),s=uH(n);return s==null?null:v.createElement(Wg,gO({},s,{className:pn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:i},ticksGenerator:function(l){return Sc(l,!0)}}))},zc=function(t){function e(){return OEe(this,e),IEe(this,e,arguments)}return FEe(e,t),MEe(e,[{key:"render",value:function(){return v.createElement(BEe,this.props)}}])}(v.Component);PH(zc,"displayName","YAxis");PH(zc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function tB(t){return VEe(t)||UEe(t)||qEe(t)||zEe()}function zEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qEe(t,e){if(t){if(typeof t=="string")return yO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yO(t,e)}}function UEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VEe(t){if(Array.isArray(t))return yO(t)}function yO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var xO=function(e,n,a,i,s){var o=Rs(e,CM),l=Rs(e,MS),c=[].concat(tB(o),tB(l)),d=Rs(e,RS),f="".concat(i,"Id"),p=i[0],g=n;if(c.length&&(g=c.reduce(function(j,S){if(S.props[f]===a&&Il(S.props,"extendDomain")&&Nt(S.props[p])){var _=S.props[p];return[Math.min(j[0],_),Math.max(j[1],_)]}return j},g)),d.length){var x="".concat(p,"1"),b="".concat(p,"2");g=d.reduce(function(j,S){if(S.props[f]===a&&Il(S.props,"extendDomain")&&Nt(S.props[x])&&Nt(S.props[b])){var _=S.props[x],T=S.props[b];return[Math.min(j[0],_,T),Math.max(j[1],_,T)]}return j},g)}return s&&s.length&&(g=s.reduce(function(j,S){return Nt(S)?[Math.min(j[0],S),Math.max(j[1],S)]:j},g)),g},PA={exports:{}},nB;function HEe(){return nB||(nB=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new i(f,p||c,g),b=n?n+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],x]:c._events[b].push(x):(c._events[b]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,g,x,b){var j=n?n+d:d;if(!this._events[j])return!1;var S=this._events[j],_=arguments.length,T,C;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,g),!0;case 5:return S.fn.call(S.context,f,p,g,x),!0;case 6:return S.fn.call(S.context,f,p,g,x,b),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];S.fn.apply(S.context,T)}else{var E=S.length,k;for(C=0;C<E;C++)switch(S[C].once&&this.removeListener(d,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,g);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];S[C].fn.apply(S[C].context,T)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,g){var x=n?n+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!g||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var j=0,S=[],_=b.length;j<_;j++)(b[j].fn!==f||g&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(PA)),PA.exports}var GEe=HEe();const WEe=Wn(GEe);var OA=new WEe,DA="recharts.syncMouseEvents";function mb(t){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(t)}function YEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KEe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,DH(a.key),a)}}function QEe(t,e,n){return e&&KEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MA(t,e,n){return e=DH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DH(t){var e=XEe(t,"string");return mb(e)=="symbol"?e:e+""}function XEe(t,e){if(mb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(mb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var JEe=function(){function t(){YEe(this,t),MA(this,"activeIndex",0),MA(this,"coordinateList",[]),MA(this,"layout","horizontal")}return QEe(t,[{key:"setDetails",value:function(n){var a,i=n.coordinateList,s=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,f=n.offset,p=f===void 0?null:f,g=n.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(a=s??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((a=window)===null||a===void 0?void 0:a.scrollY)||0,p=s+c+d,g=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:g})}}}])}();function ZEe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var a=t==null?void 0:t[0],i=t==null?void 0:t[1];if(a&&i&&Nt(a)&&Nt(i))return!0}return!1}function ePe(t,e,n,a){var i=a/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?a:n.width-1,height:t==="horizontal"?n.height-1:a}}function MH(t){var e=t.cx,n=t.cy,a=t.radius,i=t.startAngle,s=t.endAngle,o=Rr(e,n,a,i),l=Rr(e,n,a,s);return{points:[o,l],cx:e,cy:n,radius:a,startAngle:i,endAngle:s}}function tPe(t,e,n){var a,i,s,o;if(t==="horizontal")a=e.x,s=a,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,a=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,f=e.outerRadius,p=e.angle,g=Rr(l,c,d,p),x=Rr(l,c,f,p);a=g.x,i=g.y,s=x.x,o=x.y}else return MH(e);return[{x:a,y:i},{x:s,y:o}]}function gb(t){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(t)}function rB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function Fj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(n),!0).forEach(function(a){nPe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nPe(t,e,n){return e=rPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rPe(t){var e=aPe(t,"string");return gb(e)=="symbol"?e:e+""}function aPe(t,e){if(gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(gb(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iPe(t){var e,n,a=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,f=t.tooltipAxisBandSize,p=t.layout,g=t.chartName,x=(e=a.props.cursor)!==null&&e!==void 0?e:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!x||!s||!o||g!=="ScatterChart"&&i!=="axis")return null;var b,j=pf;if(g==="ScatterChart")b=o,j=g2e;else if(g==="BarChart")b=ePe(p,o,c,f),j=xM;else if(p==="radial"){var S=MH(o),_=S.cx,T=S.cy,C=S.radius,E=S.startAngle,k=S.endAngle;b={cx:_,cy:T,startAngle:E,endAngle:k,innerRadius:C,outerRadius:C},j=OV}else b={points:tPe(p,o,c)},j=pf;var O=Fj(Fj(Fj(Fj({stroke:"#ccc",pointerEvents:"none"},c),b),zt(x,!1)),{},{payload:l,payloadIndex:d,className:pn("recharts-tooltip-cursor",x.className)});return v.isValidElement(x)?v.cloneElement(x,O):v.createElement(j,O)}var sPe=["item"],oPe=["children","className","width","height","style","compact","title","desc"];function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Dm.apply(this,arguments)}function aB(t,e){return uPe(t)||cPe(t,e)||RH(t,e)||lPe()}function lPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(a=s.call(n)).done)&&(l.push(a.value),l.length!==e);c=!0);}catch(f){d=!0,i=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function uPe(t){if(Array.isArray(t))return t}function iB(t,e){if(t==null)return{};var n=dPe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function dPe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function hPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fPe(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,LH(a.key),a)}}function pPe(t,e,n){return e&&fPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mPe(t,e,n){return e=TN(e),gPe(t,IH()?Reflect.construct(e,n||[],TN(t).constructor):e.apply(t,n))}function gPe(t,e){if(e&&(Eg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yPe(t)}function yPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IH=function(){return!!t})()}function TN(t){return TN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TN(t)}function xPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vO(t,e)}function vO(t,e){return vO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},vO(t,e)}function Pg(t){return jPe(t)||bPe(t)||RH(t)||vPe()}function vPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RH(t,e){if(t){if(typeof t=="string")return bO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bO(t,e)}}function bPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jPe(t){if(Array.isArray(t))return bO(t)}function bO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function sB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sB(Object(n),!0).forEach(function(a){nn(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function nn(t,e,n){return e=LH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LH(t){var e=wPe(t,"string");return Eg(e)=="symbol"?e:e+""}function wPe(t,e){if(Eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(Eg(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NPe={xAxis:["bottom","top"],yAxis:["left","right"]},SPe={width:"100%",height:"100%"},FH={x:0,y:0};function $j(t){return t}var _Pe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},CPe=function(e,n,a,i){var s=n.find(function(f){return f&&f.index===a});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=i.radius;return lt(lt(lt({},i),Rr(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,d=i.angle;return lt(lt(lt({},i),Rr(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return FH},LS=function(e,n){var a=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(a??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Pg(l),Pg(d)):l},[]);return o.length>0?o:e&&e.length&&Nt(i)&&Nt(s)?e.slice(i,s+1):[]};function $H(t){return t==="number"?[0,"auto"]:void 0}var jO=function(e,n,a,i){var s=e.graphicalItems,o=e.tooltipAxis,l=LS(n,e);return a<0||!s||!s.length||a>=l.length?null:s.reduce(function(c,d){var f,p=(f=d.props.data)!==null&&f!==void 0?f:n;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=a&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var g;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;g=Aw(x,o.dataKey,i)}else g=p&&p[a]||l[a];return g?[].concat(Pg(c),[CV(d,g)]):c},[])},oB=function(e,n,a,i){var s=i||{x:e.chartX,y:e.chartY},o=_Pe(s,a),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,f=zNe(o,l,d,c);if(f>=0&&d){var p=d[f]&&d[f].value,g=jO(e,n,f,p),x=CPe(a,l,f,s);return{activeTooltipIndex:f,activeLabel:p,activePayload:g,activeCoordinate:x}}return null},TPe=function(e,n){var a=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,g=e.stackOffset,x=bV(f,s);return a.reduce(function(b,j){var S,_=j.type.defaultProps!==void 0?lt(lt({},j.type.defaultProps),j.props):j.props,T=_.type,C=_.dataKey,E=_.allowDataOverflow,k=_.allowDuplicatedCategory,O=_.scale,I=_.ticks,F=_.includeHidden,B=_[o];if(b[B])return b;var $=LS(e.data,{graphicalItems:i.filter(function(je){var Y,Ie=o in je.props?je.props[o]:(Y=je.type.defaultProps)===null||Y===void 0?void 0:Y[o];return Ie===B}),dataStartIndex:c,dataEndIndex:d}),L=$.length,V,H,ne;ZEe(_.domain,E,T)&&(V=MP(_.domain,null,E),x&&(T==="number"||O!=="auto")&&(ne=wv($,C,"category")));var Q=$H(T);if(!V||V.length===0){var q,G=(q=_.domain)!==null&&q!==void 0?q:Q;if(C){if(V=wv($,C,T),T==="category"&&x){var ie=Iye(V);k&&ie?(H=V,V=fN(0,L)):k||(V=i$(G,V,j).reduce(function(je,Y){return je.indexOf(Y)>=0?je:[].concat(Pg(je),[Y])},[]))}else if(T==="category")k?V=V.filter(function(je){return je!==""&&!hn(je)}):V=i$(G,V,j).reduce(function(je,Y){return je.indexOf(Y)>=0||Y===""||hn(Y)?je:[].concat(Pg(je),[Y])},[]);else if(T==="number"){var W=GNe($,i.filter(function(je){var Y,Ie,Ue=o in je.props?je.props[o]:(Y=je.type.defaultProps)===null||Y===void 0?void 0:Y[o],ze="hide"in je.props?je.props.hide:(Ie=je.type.defaultProps)===null||Ie===void 0?void 0:Ie.hide;return Ue===B&&(F||!ze)}),C,s,f);W&&(V=W)}x&&(T==="number"||O!=="auto")&&(ne=wv($,C,"category"))}else x?V=fN(0,L):l&&l[B]&&l[B].hasStack&&T==="number"?V=g==="expand"?[0,1]:_V(l[B].stackGroups,c,d):V=vV($,i.filter(function(je){var Y=o in je.props?je.props[o]:je.type.defaultProps[o],Ie="hide"in je.props?je.props.hide:je.type.defaultProps.hide;return Y===B&&(F||!Ie)}),T,f,!0);if(T==="number")V=xO(p,V,B,s,I),G&&(V=MP(G,V,E));else if(T==="category"&&G){var z=G,ce=V.every(function(je){return z.indexOf(je)>=0});ce&&(V=z)}}return lt(lt({},b),{},nn({},B,lt(lt({},_),{},{axisType:s,domain:V,categoricalDomain:ne,duplicateDomain:H,originalDomain:(S=_.domain)!==null&&S!==void 0?S:Q,isCategorical:x,layout:f})))},{})},kPe=function(e,n){var a=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,g=LS(e.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:d}),x=g.length,b=bV(f,s),j=-1;return a.reduce(function(S,_){var T=_.type.defaultProps!==void 0?lt(lt({},_.type.defaultProps),_.props):_.props,C=T[o],E=$H("number");if(!S[C]){j++;var k;return b?k=fN(0,x):l&&l[C]&&l[C].hasStack?(k=_V(l[C].stackGroups,c,d),k=xO(p,k,C,s)):(k=MP(E,vV(g,a.filter(function(O){var I,F,B=o in O.props?O.props[o]:(I=O.type.defaultProps)===null||I===void 0?void 0:I[o],$="hide"in O.props?O.props.hide:(F=O.type.defaultProps)===null||F===void 0?void 0:F.hide;return B===C&&!$}),"number",f),i.defaultProps.allowDataOverflow),k=xO(p,k,C,s)),lt(lt({},S),{},nn({},C,lt(lt({axisType:s},i.defaultProps),{},{hide:!0,orientation:Is(NPe,"".concat(s,".").concat(j%2),null),domain:k,originalDomain:E,isCategorical:b,layout:f})))}return S},{})},APe=function(e,n){var a=n.axisType,i=a===void 0?"xAxis":a,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.children,p="".concat(i,"Id"),g=Rs(f,s),x={};return g&&g.length?x=TPe(e,{axes:g,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(x=kPe(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),x},EPe=function(e){var n=Yu(e),a=Sc(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:HD(a,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:tN(n,a)}},lB=function(e){var n=e.children,a=e.defaultShowTooltip,i=ks(n,bg),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},PPe=function(e){return!e||!e.length?!1:e.some(function(n){var a=kc(n&&n.type);return a&&a.indexOf("Bar")>=0})},cB=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},OPe=function(e,n){var a=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,d=a.width,f=a.height,p=a.children,g=a.margin||{},x=ks(p,bg),b=ks(p,Ac),j=Object.keys(c).reduce(function(k,O){var I=c[O],F=I.orientation;return!I.mirror&&!I.hide?lt(lt({},k),{},nn({},F,k[F]+I.width)):k},{left:g.left||0,right:g.right||0}),S=Object.keys(o).reduce(function(k,O){var I=o[O],F=I.orientation;return!I.mirror&&!I.hide?lt(lt({},k),{},nn({},F,Is(k,"".concat(F))+I.height)):k},{top:g.top||0,bottom:g.bottom||0}),_=lt(lt({},S),j),T=_.bottom;x&&(_.bottom+=x.props.height||bg.defaultProps.height),b&&n&&(_=VNe(_,i,a,n));var C=d-_.left-_.right,E=f-_.top-_.bottom;return lt(lt({brushBottom:T},_),{},{width:Math.max(C,0),height:Math.max(E,0)})},DPe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},FS=function(e){var n=e.chartName,a=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,f=e.formatAxisMap,p=e.defaultProps,g=function(_,T){var C=T.graphicalItems,E=T.stackGroups,k=T.offset,O=T.updateId,I=T.dataStartIndex,F=T.dataEndIndex,B=_.barSize,$=_.layout,L=_.barGap,V=_.barCategoryGap,H=_.maxBarSize,ne=cB($),Q=ne.numericAxisName,q=ne.cateAxisName,G=PPe(C),ie=[];return C.forEach(function(W,z){var ce=LS(_.data,{graphicalItems:[W],dataStartIndex:I,dataEndIndex:F}),je=W.type.defaultProps!==void 0?lt(lt({},W.type.defaultProps),W.props):W.props,Y=je.dataKey,Ie=je.maxBarSize,Ue=je["".concat(Q,"Id")],ze=je["".concat(q,"Id")],Le={},be=c.reduce(function(xe,te){var oe=T["".concat(te.axisType,"Map")],_e=je["".concat(te.axisType,"Id")];oe&&oe[_e]||te.axisType==="zAxis"||Ef();var Oe=oe[_e];return lt(lt({},xe),{},nn(nn({},te.axisType,Oe),"".concat(te.axisType,"Ticks"),Sc(Oe)))},Le),Ce=be[q],Ae=be["".concat(q,"Ticks")],me=E&&E[Ue]&&E[Ue].hasStack&&tSe(W,E[Ue].stackGroups),ye=kc(W.type).indexOf("Bar")>=0,le=tN(Ce,Ae),X=[],ae=G&&qNe({barSize:B,stackGroups:E,totalSize:DPe(be,q)});if(ye){var de,ee,Ne=hn(Ie)?H:Ie,Te=(de=(ee=tN(Ce,Ae,!0))!==null&&ee!==void 0?ee:Ne)!==null&&de!==void 0?de:0;X=UNe({barGap:L,barCategoryGap:V,bandSize:Te!==le?Te:le,sizeList:ae[ze],maxBarSize:Ne}),Te!==le&&(X=X.map(function(xe){return lt(lt({},xe),{},{position:lt(lt({},xe.position),{},{offset:xe.position.offset-Te/2})})}))}var Fe=W&&W.type&&W.type.getComposedData;Fe&&ie.push({props:lt(lt({},Fe(lt(lt({},be),{},{displayedData:ce,props:_,dataKey:Y,item:W,bandSize:le,barPosition:X,offset:k,stackedData:me,layout:$,dataStartIndex:I,dataEndIndex:F}))),{},nn(nn(nn({key:W.key||"item-".concat(z)},Q,be[Q]),q,be[q]),"animationId",O)),childIndex:Wye(W,_.children),item:W})}),ie},x=function(_,T){var C=_.props,E=_.dataStartIndex,k=_.dataEndIndex,O=_.updateId;if(!b6({props:C}))return null;var I=C.children,F=C.layout,B=C.stackOffset,$=C.data,L=C.reverseStackOrder,V=cB(F),H=V.numericAxisName,ne=V.cateAxisName,Q=Rs(I,a),q=ZNe($,Q,"".concat(H,"Id"),"".concat(ne,"Id"),B,L),G=c.reduce(function(je,Y){var Ie="".concat(Y.axisType,"Map");return lt(lt({},je),{},nn({},Ie,APe(C,lt(lt({},Y),{},{graphicalItems:Q,stackGroups:Y.axisType===H&&q,dataStartIndex:E,dataEndIndex:k}))))},{}),ie=OPe(lt(lt({},G),{},{props:C,graphicalItems:Q}),T==null?void 0:T.legendBBox);Object.keys(G).forEach(function(je){G[je]=f(C,G[je],ie,je.replace("Map",""),n)});var W=G["".concat(ne,"Map")],z=EPe(W),ce=g(C,lt(lt({},G),{},{dataStartIndex:E,dataEndIndex:k,updateId:O,graphicalItems:Q,stackGroups:q,offset:ie}));return lt(lt({formattedGraphicalItems:ce,graphicalItems:Q,offset:ie,stackGroups:q},z),G)},b=function(S){function _(T){var C,E,k;return hPe(this,_),k=mPe(this,_,[T]),nn(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),nn(k,"accessibilityManager",new JEe),nn(k,"handleLegendBBoxUpdate",function(O){if(O){var I=k.state,F=I.dataStartIndex,B=I.dataEndIndex,$=I.updateId;k.setState(lt({legendBBox:O},x({props:k.props,dataStartIndex:F,dataEndIndex:B,updateId:$},lt(lt({},k.state),{},{legendBBox:O}))))}}),nn(k,"handleReceiveSyncEvent",function(O,I,F){if(k.props.syncId===O){if(F===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(I)}}),nn(k,"handleBrushChange",function(O){var I=O.startIndex,F=O.endIndex;if(I!==k.state.dataStartIndex||F!==k.state.dataEndIndex){var B=k.state.updateId;k.setState(function(){return lt({dataStartIndex:I,dataEndIndex:F},x({props:k.props,dataStartIndex:I,dataEndIndex:F,updateId:B},k.state))}),k.triggerSyncEvent({dataStartIndex:I,dataEndIndex:F})}}),nn(k,"handleMouseEnter",function(O){var I=k.getMouseInfo(O);if(I){var F=lt(lt({},I),{},{isTooltipActive:!0});k.setState(F),k.triggerSyncEvent(F);var B=k.props.onMouseEnter;an(B)&&B(F,O)}}),nn(k,"triggeredAfterMouseMove",function(O){var I=k.getMouseInfo(O),F=I?lt(lt({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(F),k.triggerSyncEvent(F);var B=k.props.onMouseMove;an(B)&&B(F,O)}),nn(k,"handleItemMouseEnter",function(O){k.setState(function(){return{isTooltipActive:!0,activeItem:O,activePayload:O.tooltipPayload,activeCoordinate:O.tooltipPosition||{x:O.cx,y:O.cy}}})}),nn(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),nn(k,"handleMouseMove",function(O){O.persist(),k.throttleTriggeredAfterMouseMove(O)}),nn(k,"handleMouseLeave",function(O){k.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};k.setState(I),k.triggerSyncEvent(I);var F=k.props.onMouseLeave;an(F)&&F(I,O)}),nn(k,"handleOuterEvent",function(O){var I=Gye(O),F=Is(k.props,"".concat(I));if(I&&an(F)){var B,$;/.*touch.*/i.test(I)?$=k.getMouseInfo(O.changedTouches[0]):$=k.getMouseInfo(O),F((B=$)!==null&&B!==void 0?B:{},O)}}),nn(k,"handleClick",function(O){var I=k.getMouseInfo(O);if(I){var F=lt(lt({},I),{},{isTooltipActive:!0});k.setState(F),k.triggerSyncEvent(F);var B=k.props.onClick;an(B)&&B(F,O)}}),nn(k,"handleMouseDown",function(O){var I=k.props.onMouseDown;if(an(I)){var F=k.getMouseInfo(O);I(F,O)}}),nn(k,"handleMouseUp",function(O){var I=k.props.onMouseUp;if(an(I)){var F=k.getMouseInfo(O);I(F,O)}}),nn(k,"handleTouchMove",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(O.changedTouches[0])}),nn(k,"handleTouchStart",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&k.handleMouseDown(O.changedTouches[0])}),nn(k,"handleTouchEnd",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&k.handleMouseUp(O.changedTouches[0])}),nn(k,"handleDoubleClick",function(O){var I=k.props.onDoubleClick;if(an(I)){var F=k.getMouseInfo(O);I(F,O)}}),nn(k,"handleContextMenu",function(O){var I=k.props.onContextMenu;if(an(I)){var F=k.getMouseInfo(O);I(F,O)}}),nn(k,"triggerSyncEvent",function(O){k.props.syncId!==void 0&&OA.emit(DA,k.props.syncId,O,k.eventEmitterSymbol)}),nn(k,"applySyncEvent",function(O){var I=k.props,F=I.layout,B=I.syncMethod,$=k.state.updateId,L=O.dataStartIndex,V=O.dataEndIndex;if(O.dataStartIndex!==void 0||O.dataEndIndex!==void 0)k.setState(lt({dataStartIndex:L,dataEndIndex:V},x({props:k.props,dataStartIndex:L,dataEndIndex:V,updateId:$},k.state)));else if(O.activeTooltipIndex!==void 0){var H=O.chartX,ne=O.chartY,Q=O.activeTooltipIndex,q=k.state,G=q.offset,ie=q.tooltipTicks;if(!G)return;if(typeof B=="function")Q=B(ie,O);else if(B==="value"){Q=-1;for(var W=0;W<ie.length;W++)if(ie[W].value===O.activeLabel){Q=W;break}}var z=lt(lt({},G),{},{x:G.left,y:G.top}),ce=Math.min(H,z.x+z.width),je=Math.min(ne,z.y+z.height),Y=ie[Q]&&ie[Q].value,Ie=jO(k.state,k.props.data,Q),Ue=ie[Q]?{x:F==="horizontal"?ie[Q].coordinate:ce,y:F==="horizontal"?je:ie[Q].coordinate}:FH;k.setState(lt(lt({},O),{},{activeLabel:Y,activeCoordinate:Ue,activePayload:Ie,activeTooltipIndex:Q}))}else k.setState(O)}),nn(k,"renderCursor",function(O){var I,F=k.state,B=F.isTooltipActive,$=F.activeCoordinate,L=F.activePayload,V=F.offset,H=F.activeTooltipIndex,ne=F.tooltipAxisBandSize,Q=k.getTooltipEventType(),q=(I=O.props.active)!==null&&I!==void 0?I:B,G=k.props.layout,ie=O.key||"_recharts-cursor";return Se.createElement(iPe,{key:ie,activeCoordinate:$,activePayload:L,activeTooltipIndex:H,chartName:n,element:O,isActive:q,layout:G,offset:V,tooltipAxisBandSize:ne,tooltipEventType:Q})}),nn(k,"renderPolarAxis",function(O,I,F){var B=Is(O,"type.axisType"),$=Is(k.state,"".concat(B,"Map")),L=O.type.defaultProps,V=L!==void 0?lt(lt({},L),O.props):O.props,H=$&&$[V["".concat(B,"Id")]];return v.cloneElement(O,lt(lt({},H),{},{className:pn(B,H.className),key:O.key||"".concat(I,"-").concat(F),ticks:Sc(H,!0)}))}),nn(k,"renderPolarGrid",function(O){var I=O.props,F=I.radialLines,B=I.polarAngles,$=I.polarRadius,L=k.state,V=L.radiusAxisMap,H=L.angleAxisMap,ne=Yu(V),Q=Yu(H),q=Q.cx,G=Q.cy,ie=Q.innerRadius,W=Q.outerRadius;return v.cloneElement(O,{polarAngles:Array.isArray(B)?B:Sc(Q,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray($)?$:Sc(ne,!0).map(function(z){return z.coordinate}),cx:q,cy:G,innerRadius:ie,outerRadius:W,key:O.key||"polar-grid",radialLines:F})}),nn(k,"renderLegend",function(){var O=k.state.formattedGraphicalItems,I=k.props,F=I.children,B=I.width,$=I.height,L=k.props.margin||{},V=B-(L.left||0)-(L.right||0),H=yV({children:F,formattedGraphicalItems:O,legendWidth:V,legendContent:d});if(!H)return null;var ne=H.item,Q=iB(H,sPe);return v.cloneElement(ne,lt(lt({},Q),{},{chartWidth:B,chartHeight:$,margin:L,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),nn(k,"renderTooltip",function(){var O,I=k.props,F=I.children,B=I.accessibilityLayer,$=ks(F,Mi);if(!$)return null;var L=k.state,V=L.isTooltipActive,H=L.activeCoordinate,ne=L.activePayload,Q=L.activeLabel,q=L.offset,G=(O=$.props.active)!==null&&O!==void 0?O:V;return v.cloneElement($,{viewBox:lt(lt({},q),{},{x:q.left,y:q.top}),active:G,label:Q,payload:G?ne:[],coordinate:H,accessibilityLayer:B})}),nn(k,"renderBrush",function(O){var I=k.props,F=I.margin,B=I.data,$=k.state,L=$.offset,V=$.dataStartIndex,H=$.dataEndIndex,ne=$.updateId;return v.cloneElement(O,{key:O.key||"_recharts-brush",onChange:Mj(k.handleBrushChange,O.props.onChange),data:B,x:Nt(O.props.x)?O.props.x:L.left,y:Nt(O.props.y)?O.props.y:L.top+L.height+L.brushBottom-(F.bottom||0),width:Nt(O.props.width)?O.props.width:L.width,startIndex:V,endIndex:H,updateId:"brush-".concat(ne)})}),nn(k,"renderReferenceElement",function(O,I,F){if(!O)return null;var B=k,$=B.clipPathId,L=k.state,V=L.xAxisMap,H=L.yAxisMap,ne=L.offset,Q=O.type.defaultProps||{},q=O.props,G=q.xAxisId,ie=G===void 0?Q.xAxisId:G,W=q.yAxisId,z=W===void 0?Q.yAxisId:W;return v.cloneElement(O,{key:O.key||"".concat(I,"-").concat(F),xAxis:V[ie],yAxis:H[z],viewBox:{x:ne.left,y:ne.top,width:ne.width,height:ne.height},clipPathId:$})}),nn(k,"renderActivePoints",function(O){var I=O.item,F=O.activePoint,B=O.basePoint,$=O.childIndex,L=O.isRange,V=[],H=I.props.key,ne=I.item.type.defaultProps!==void 0?lt(lt({},I.item.type.defaultProps),I.item.props):I.item.props,Q=ne.activeDot,q=ne.dataKey,G=lt(lt({index:$,dataKey:q,cx:F.x,cy:F.y,r:4,fill:yM(I.item),strokeWidth:2,stroke:"#fff",payload:F.payload,value:F.value},zt(Q,!1)),Ew(Q));return V.push(_.renderActiveDot(Q,G,"".concat(H,"-activePoint-").concat($))),B?V.push(_.renderActiveDot(Q,lt(lt({},G),{},{cx:B.x,cy:B.y}),"".concat(H,"-basePoint-").concat($))):L&&V.push(null),V}),nn(k,"renderGraphicChild",function(O,I,F){var B=k.filterFormatItem(O,I,F);if(!B)return null;var $=k.getTooltipEventType(),L=k.state,V=L.isTooltipActive,H=L.tooltipAxis,ne=L.activeTooltipIndex,Q=L.activeLabel,q=k.props.children,G=ks(q,Mi),ie=B.props,W=ie.points,z=ie.isRange,ce=ie.baseLine,je=B.item.type.defaultProps!==void 0?lt(lt({},B.item.type.defaultProps),B.item.props):B.item.props,Y=je.activeDot,Ie=je.hide,Ue=je.activeBar,ze=je.activeShape,Le=!!(!Ie&&V&&G&&(Y||Ue||ze)),be={};$!=="axis"&&G&&G.props.trigger==="click"?be={onClick:Mj(k.handleItemMouseEnter,O.props.onClick)}:$!=="axis"&&(be={onMouseLeave:Mj(k.handleItemMouseLeave,O.props.onMouseLeave),onMouseEnter:Mj(k.handleItemMouseEnter,O.props.onMouseEnter)});var Ce=v.cloneElement(O,lt(lt({},B.props),be));function Ae(te){return typeof H.dataKey=="function"?H.dataKey(te.payload):null}if(Le)if(ne>=0){var me,ye;if(H.dataKey&&!H.allowDuplicatedCategory){var le=typeof H.dataKey=="function"?Ae:"payload.".concat(H.dataKey.toString());me=Aw(W,le,Q),ye=z&&ce&&Aw(ce,le,Q)}else me=W==null?void 0:W[ne],ye=z&&ce&&ce[ne];if(ze||Ue){var X=O.props.activeIndex!==void 0?O.props.activeIndex:ne;return[v.cloneElement(O,lt(lt(lt({},B.props),be),{},{activeIndex:X})),null,null]}if(!hn(me))return[Ce].concat(Pg(k.renderActivePoints({item:B,activePoint:me,basePoint:ye,childIndex:ne,isRange:z})))}else{var ae,de=(ae=k.getItemByXY(k.state.activeCoordinate))!==null&&ae!==void 0?ae:{graphicalItem:Ce},ee=de.graphicalItem,Ne=ee.item,Te=Ne===void 0?O:Ne,Fe=ee.childIndex,xe=lt(lt(lt({},B.props),be),{},{activeIndex:Fe});return[v.cloneElement(Te,xe),null,null]}return z?[Ce,null,null]:[Ce,null]}),nn(k,"renderCustomized",function(O,I,F){return v.cloneElement(O,lt(lt({key:"recharts-customized-".concat(F)},k.props),k.state))}),nn(k,"renderMap",{CartesianGrid:{handler:$j,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:$j},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:$j},YAxis:{handler:$j},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((C=T.id)!==null&&C!==void 0?C:If("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=g7(k.triggeredAfterMouseMove,(E=T.throttleDelay)!==null&&E!==void 0?E:1e3/60),k.state={},k}return xPe(_,S),pPe(_,[{key:"componentDidMount",value:function(){var C,E;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,E=C.children,k=C.data,O=C.height,I=C.layout,F=ks(E,Mi);if(F){var B=F.props.defaultIndex;if(!(typeof B!="number"||B<0||B>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[B]&&this.state.tooltipTicks[B].value,L=jO(this.state,k,B,$),V=this.state.tooltipTicks[B].coordinate,H=(this.state.offset.top+O)/2,ne=I==="horizontal",Q=ne?{x:V,y:H}:{y:V,x:H},q=this.state.formattedGraphicalItems.find(function(ie){var W=ie.item;return W.type.name==="Scatter"});q&&(Q=lt(lt({},Q),q.props.points[B].tooltipPosition),L=q.props.points[B].tooltipPayload);var G={activeTooltipIndex:B,isTooltipActive:!0,activeLabel:$,activePayload:L,activeCoordinate:Q};this.setState(G),this.renderCursor(F),this.accessibilityManager.setIndex(B)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,E){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==E.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var k,O;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0}})}return null}},{key:"componentDidUpdate",value:function(C){nP([ks(C.children,Mi)],[ks(this.props.children,Mi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=ks(this.props.children,Mi);if(C&&typeof C.props.shared=="boolean"){var E=C.props.shared?"axis":"item";return l.indexOf(E)>=0?E:s}return s}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var E=this.container,k=E.getBoundingClientRect(),O=D0e(k),I={chartX:Math.round(C.pageX-O.left),chartY:Math.round(C.pageY-O.top)},F=k.width/E.offsetWidth||1,B=this.inRange(I.chartX,I.chartY,F);if(!B)return null;var $=this.state,L=$.xAxisMap,V=$.yAxisMap,H=this.getTooltipEventType(),ne=oB(this.state,this.props.data,this.props.layout,B);if(H!=="axis"&&L&&V){var Q=Yu(L).scale,q=Yu(V).scale,G=Q&&Q.invert?Q.invert(I.chartX):null,ie=q&&q.invert?q.invert(I.chartY):null;return lt(lt({},I),{},{xValue:G,yValue:ie},ne)}return ne?lt(lt({},I),ne):null}},{key:"inRange",value:function(C,E){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=this.props.layout,I=C/k,F=E/k;if(O==="horizontal"||O==="vertical"){var B=this.state.offset,$=I>=B.left&&I<=B.left+B.width&&F>=B.top&&F<=B.top+B.height;return $?{x:I,y:F}:null}var L=this.state,V=L.angleAxisMap,H=L.radiusAxisMap;if(V&&H){var ne=Yu(V);return l$({x:I,y:F},ne)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,E=this.getTooltipEventType(),k=ks(C,Mi),O={};k&&E==="axis"&&(k.props.trigger==="click"?O={onClick:this.handleClick}:O={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Ew(this.props,this.handleOuterEvent);return lt(lt({},I),O)}},{key:"addListener",value:function(){OA.on(DA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){OA.removeListener(DA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,E,k){for(var O=this.state.formattedGraphicalItems,I=0,F=O.length;I<F;I++){var B=O[I];if(B.item===C||B.props.key===C.key||E===kc(B.item.type)&&k===B.childIndex)return B}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,E=this.state.offset,k=E.left,O=E.top,I=E.height,F=E.width;return Se.createElement("defs",null,Se.createElement("clipPath",{id:C},Se.createElement("rect",{x:k,y:O,height:I,width:F})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(E,k){var O=aB(k,2),I=O[0],F=O[1];return lt(lt({},E),{},nn({},I,F.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(E,k){var O=aB(k,2),I=O[0],F=O[1];return lt(lt({},E),{},nn({},I,F.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var E;return(E=this.state.xAxisMap)===null||E===void 0||(E=E[C])===null||E===void 0?void 0:E.scale}},{key:"getYScaleByAxisId",value:function(C){var E;return(E=this.state.yAxisMap)===null||E===void 0||(E=E[C])===null||E===void 0?void 0:E.scale}},{key:"getItemByXY",value:function(C){var E=this.state,k=E.formattedGraphicalItems,O=E.activeItem;if(k&&k.length)for(var I=0,F=k.length;I<F;I++){var B=k[I],$=B.props,L=B.item,V=L.type.defaultProps!==void 0?lt(lt({},L.type.defaultProps),L.props):L.props,H=kc(L.type);if(H==="Bar"){var ne=($.data||[]).find(function(ie){return QCe(C,ie)});if(ne)return{graphicalItem:B,payload:ne}}else if(H==="RadialBar"){var Q=($.data||[]).find(function(ie){return l$(C,ie)});if(Q)return{graphicalItem:B,payload:Q}}else if(ES(B,O)||PS(B,O)||cb(B,O)){var q=bTe({graphicalItem:B,activeTooltipItem:O,itemData:V.data}),G=V.activeIndex===void 0?q:V.activeIndex;return{graphicalItem:lt(lt({},B),{},{childIndex:G}),payload:cb(B,O)?V.data[q]:B.props.data[q]}}}return null}},{key:"render",value:function(){var C=this;if(!b6(this))return null;var E=this.props,k=E.children,O=E.className,I=E.width,F=E.height,B=E.style,$=E.compact,L=E.title,V=E.desc,H=iB(E,oPe),ne=zt(H,!1);if($)return Se.createElement(L8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Se.createElement(aP,Dm({},ne,{width:I,height:F,title:L,desc:V}),this.renderClipPath(),w6(k,this.renderMap)));if(this.props.accessibilityLayer){var Q,q;ne.tabIndex=(Q=this.props.tabIndex)!==null&&Q!==void 0?Q:0,ne.role=(q=this.props.role)!==null&&q!==void 0?q:"application",ne.onKeyDown=function(ie){C.accessibilityManager.keyboardEvent(ie)},ne.onFocus=function(){C.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return Se.createElement(L8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Se.createElement("div",Dm({className:pn("recharts-wrapper",O),style:lt({position:"relative",cursor:"default",width:I,height:F},B)},G,{ref:function(W){C.container=W}}),Se.createElement(aP,Dm({},ne,{width:I,height:F,title:L,desc:V,style:SPe}),this.renderClipPath(),w6(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);nn(b,"displayName",n),nn(b,"defaultProps",lt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),nn(b,"getDerivedStateFromProps",function(S,_){var T=S.dataKey,C=S.data,E=S.children,k=S.width,O=S.height,I=S.layout,F=S.stackOffset,B=S.margin,$=_.dataStartIndex,L=_.dataEndIndex;if(_.updateId===void 0){var V=lB(S);return lt(lt(lt({},V),{},{updateId:0},x(lt(lt({props:S},V),{},{updateId:0}),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:O,prevLayout:I,prevStackOffset:F,prevMargin:B,prevChildren:E})}if(T!==_.prevDataKey||C!==_.prevData||k!==_.prevWidth||O!==_.prevHeight||I!==_.prevLayout||F!==_.prevStackOffset||!Fm(B,_.prevMargin)){var H=lB(S),ne={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},Q=lt(lt({},oB(_,C,I)),{},{updateId:_.updateId+1}),q=lt(lt(lt({},H),ne),Q);return lt(lt(lt({},q),x(lt({props:S},q),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:O,prevLayout:I,prevStackOffset:F,prevMargin:B,prevChildren:E})}if(!nP(E,_.prevChildren)){var G,ie,W,z,ce=ks(E,bg),je=ce&&(G=(ie=ce.props)===null||ie===void 0?void 0:ie.startIndex)!==null&&G!==void 0?G:$,Y=ce&&(W=(z=ce.props)===null||z===void 0?void 0:z.endIndex)!==null&&W!==void 0?W:L,Ie=je!==$||Y!==L,Ue=!hn(C),ze=Ue&&!Ie?_.updateId:_.updateId+1;return lt(lt({updateId:ze},x(lt(lt({props:S},_),{},{updateId:ze,dataStartIndex:je,dataEndIndex:Y}),_)),{},{prevChildren:E,dataStartIndex:je,dataEndIndex:Y})}return null}),nn(b,"renderActiveDot",function(S,_,T){var C;return v.isValidElement(S)?C=v.cloneElement(S,_):an(S)?C=S(_):C=Se.createElement(Vb,_),Se.createElement(Mn,{className:"recharts-active-dot",key:T},C)});var j=v.forwardRef(function(_,T){return Se.createElement(b,Dm({},_,{ref:T}))});return j.displayName=b.displayName,j},MPe=FS({chartName:"LineChart",GraphicalChild:Hb,axisComponents:[{axisType:"xAxis",AxisComp:Bc},{axisType:"yAxis",AxisComp:zc}],formatAxisMap:vM}),BH=FS({chartName:"BarChart",GraphicalChild:_d,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Bc},{axisType:"yAxis",AxisComp:zc}],formatAxisMap:vM}),zH=FS({chartName:"PieChart",GraphicalChild:zl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:AS},{axisType:"radiusAxis",AxisComp:TS}],formatAxisMap:dSe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),IPe=FS({chartName:"AreaChart",GraphicalChild:Cd,axisComponents:[{axisType:"xAxis",AxisComp:Bc},{axisType:"yAxis",AxisComp:zc}],formatAxisMap:vM});const AM=({widget:t,className:e="",autoHideEmptyColumns:n=!1})=>{const a=Lt(),i=ds(),[s,o]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState([]),[p,g]=v.useState(!1),[x,b]=v.useState(null),[j,S]=v.useState(""),[_,T]=v.useState(!1);v.useEffect(()=>{const O=async()=>{var I,F,B,$,L,V;g(!0),b(null);try{const H=t.dataSource,ne=((I=t.config)==null?void 0:I.filters)&&Array.isArray(t.config.filters)&&t.config.filters.length>0;let Q=[];if(ne&&(H.startsWith("api:")||H.startsWith("table:"))){const q=await se("/api/dashboards/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:H,filters:t.config.filters})});if(q.ok){const G=await q.json();Q=Array.isArray(G)?G:G.data||[],o(Q)}else throw new Error("Failed to fetch filtered data")}else{let q="";const G={"api:patients":{url:"/api/patients?limit=50",dataKey:"patients"},"api:drugs":{url:"/api/drugs?limit=50",dataKey:"drugs"},"api:recurring-medications":{url:"/api/recurring-medications?limit=50"},"api:pharmacy-orders":{url:"/api/pharmacy/orders?limit=50",dataKey:"orders"},"api:lab-orders":{url:"/api/lab/orders?limit=50",dataKey:"orders"},"api:lab-tests":{url:"/api/lab/tests?limit=50",dataKey:"tests"},"api:queue":{url:"/api/queue?limit=50",dataKey:"queue"},"api:bills":{url:"/api/bills?limit=100",dataKey:"bills"}};if(G[H])q=G[H].url;else if(H.startsWith("join:"))q=`/api/dashboards/joined-data?join=${H.split(":")[1]}&limit=50`;else if(H.startsWith("dynamic:")){const W=H.split(":"),z=W[1],ce=W[2],je=((B=(F=t.config)==null?void 0:F.primaryColumns)==null?void 0:B.join(","))||"",Y=((L=($=t.config)==null?void 0:$.relatedColumns)==null?void 0:L.join(","))||"";q=`/api/dashboards/dynamic-join?primary=${z}&related=${ce}&primaryCols=${je}&relatedCols=${Y}&limit=50`}else H.startsWith("table:")?q=`/api/custom-tables/${H.split(":")[1]}/records?limit=50`:q=`/api/${H.replace("api:","")}?limit=50`;const ie=await se(q);if(ie.ok){const W=await ie.json();Array.isArray(W)?Q=W:(V=G[H])!=null&&V.dataKey&&W[G[H].dataKey]?Q=W[G[H].dataKey]:W.data?Q=W.data:Q=Object.values(W).find(ce=>Array.isArray(ce))||[],o(Q)}else throw new Error(`Failed to fetch data from ${H}`)}if(t.type==="table"&&n&&Q.length>0){const G=(t.config.columns||[...new Set(Q.flatMap(ie=>Object.keys(ie)))]).filter(ie=>Q.some(W=>{const z=W[ie];return z!=null&&z!==""&&(Array.isArray(z)?z.length>0:!0)}));f(G)}else f(t.config.columns||[])}catch(H){b(H.message)}finally{g(!1)}};t.dataSource&&O()},[t.dataSource,t.config]),v.useEffect(()=>{var I;if(!s||!Array.isArray(s)){c(s);return}let O=[...s];if((I=t.config)!=null&&I.filters&&Array.isArray(t.config.filters)&&(O=O.filter(F=>t.config.filters.every(B=>{const $=F[B.field],L=B.value;switch(B.operator){case"equals":return $==L;case"neq":return $!=L;case"contains":return String($).toLowerCase().includes(String(L).toLowerCase());case"gt":return $>L;case"lt":return $<L;case"gte":return $>=L;case"lte":return $<=L;default:return!0}}))),j){const F=j.toLowerCase();O=O.filter(B=>Object.values(B).some($=>String($).toLowerCase().includes(F)))}c(O)},[s,t.config,j]);const C=O=>{O&&(i.prefetchQuery({queryKey:Gt.patients.context(O),queryFn:async()=>{const I=await se(`/api/patients/${O}/context`);if(!I.ok)throw new Error("Failed to fetch patient context");return I.json()},staleTime:1e3*60*5}),i.prefetchQuery({queryKey:Gt.patientDebts.balance(O),queryFn:async()=>{const I=await se(`/api/patient-debts/${O}/balance`);if(!I.ok)throw new Error("Failed to fetch patient debt");return I.json()},staleTime:1e3*60}),i.prefetchQuery({queryKey:Gt.queue.latest(O),queryFn:async()=>{const I=await se(`/api/queue/patient/${O}/latest`);if(!I.ok){if(I.status===404)return null;throw new Error("Failed to fetch queue status")}return I.json()},staleTime:1e3*5}))},E=()=>{var I,F,B;if(p)return r.jsxs("div",{className:"widget-loading",children:[r.jsx($X,{className:"spin"})," Loading..."]});if(x)return r.jsxs("div",{className:"widget-error",children:["Error: ",x]});const O=l||[];if(t.type==="stat"){const $=Array.isArray(O)?O.length:0;return r.jsxs("div",{className:"widget-stat",children:[r.jsx("div",{className:"stat-value",children:$}),r.jsx("div",{className:"stat-label",children:((I=t.config)==null?void 0:I.label)||"Total Records"})]})}if(t.type==="chart"){if(!Array.isArray(O)||O.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const{chartType:$="bar",xAxisKey:L="name",dataKey:V="value"}=t.config,H=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return r.jsx("div",{style:{width:"100%",height:350,minHeight:200},children:r.jsx(aw,{width:"100%",height:"100%",children:$==="line"?r.jsxs(MPe,{data:O,children:[r.jsx(pb,{strokeDasharray:"3 3"}),r.jsx(Bc,{dataKey:L}),r.jsx(zc,{}),r.jsx(Mi,{}),r.jsx(Ac,{}),r.jsx(Hb,{type:"monotone",dataKey:V,stroke:"#8884d8",activeDot:{r:8}})]}):$==="pie"?r.jsxs(zH,{children:[r.jsx(zl,{data:O,cx:"50%",cy:"50%",labelLine:!1,label:({name:ne,percent:Q})=>`${ne} ${(Q*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:V,nameKey:L,children:O.map((ne,Q)=>r.jsx(Fb,{fill:H[Q%H.length]},`cell-${Q}`))}),r.jsx(Mi,{})]}):r.jsxs(BH,{data:O,children:[r.jsx(pb,{strokeDasharray:"3 3"}),r.jsx(Bc,{dataKey:L}),r.jsx(zc,{}),r.jsx(Mi,{}),r.jsx(Ac,{}),r.jsx(_d,{dataKey:V,fill:"#82ca9d"})]})})})}if(t.type==="table"){if(!Array.isArray(O)||O.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const L=(d.length>0?d:((F=t.config)==null?void 0:F.columns)||(O[0]?Object.keys(O[0]).slice(0,5):[])).map(Q=>({key:Q,label:Q.replace(/_/g," ").replace(/\b\w/g,q=>q.toUpperCase()),editable:!1})),V=async Q=>{try{const q=t.dataSource;if(q.startsWith("table:")){const G=q.split(":")[1];for(const ie of Q)ie.id&&await se(`/api/custom-tables/${G}/records/${ie.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:ie})})}else alert("Changes saved locally. Built-in table edits require specific API integration.")}catch(q){console.error("Error saving data:",q),alert("Failed to save changes")}};if(O.length<=10){const Q=((B=t.config)==null?void 0:B.columns)||Object.keys(O[0]).filter(G=>!G.startsWith("_")&&G!=="id"),q=G=>{const ie=G.patient_id||G.patientId;ie&&a(`/dashboard/edit-complaint/patient/${ie}`)};return r.jsx("div",{className:"widget-detail-cards",children:O.map((G,ie)=>{const W=G.patient_id||G.patientId,z=!!W;return r.jsxs("div",{className:`detail-card ${z?"clickable":""}`,onClick:z?()=>q(G):void 0,onMouseEnter:()=>z&&C(W),style:z?{cursor:"pointer"}:void 0,children:[r.jsxs("div",{className:"detail-card-header",children:[r.jsx("span",{className:"detail-card-title",children:G.name||G.patient_name||G.title||G.brand_name||`Record ${ie+1}`}),G.token&&r.jsxs("span",{className:"detail-card-badge",children:["Token #",G.token]}),G.status&&r.jsx("span",{className:`detail-card-status status-${G.status.toLowerCase()}`,children:G.status})]}),r.jsx("div",{className:"detail-card-fields",children:Q.map(ce=>{const je=G[ce];if(je==null||je===""||ce==="name"||ce==="title")return null;const Y=ce.replace(/_/g," ").replace(/\b\w/g,Ue=>Ue.toUpperCase()),Ie=typeof je=="object"?JSON.stringify(je):String(je);return r.jsxs("div",{className:"detail-field",children:[r.jsx("span",{className:"detail-field-label",children:Y}),r.jsx("span",{className:"detail-field-value",children:Ie})]},ce)})})]},G.id||ie)})})}const H=Q=>{const q=Q.patient_id||Q.patientId;q&&a(`/dashboard/edit-complaint/patient/${q}`)},ne=Q=>{const q=Q.patient_id||Q.patientId;q&&C(q)};return r.jsxs("div",{className:"widget-table-container",children:[r.jsxs("div",{className:"widget-table-search",children:[r.jsx(Fn,{size:14}),r.jsx("input",{type:"text",placeholder:"Search...",value:j,onChange:Q=>S(Q.target.value)})]}),r.jsx(Ib,{columns:L,data:O,editable:!0,showRowNumbers:!0,title:"",onSave:V,onRowClick:H,onRowHover:ne})]})}return r.jsx("div",{children:"Unsupported widget type"})},k=r.jsxs("div",{className:`dashboard-widget ${e}`,children:[r.jsxs("div",{className:"widget-header",children:[r.jsx("h3",{children:t.title}),r.jsx("button",{className:"widget-expand-btn",onClick:()=>T(!0),title:"Expand",children:r.jsx(Gz,{size:14})})]}),r.jsx("div",{className:"widget-content",children:E()})]});return r.jsxs(r.Fragment,{children:[k,_&&r.jsx("div",{className:"widget-modal-overlay",onClick:()=>T(!1),children:r.jsxs("div",{className:"widget-modal-content",onClick:O=>O.stopPropagation(),children:[r.jsxs("div",{className:"widget-modal-header",children:[r.jsx("h2",{children:t.title}),r.jsx("button",{onClick:()=>T(!1),className:"widget-modal-close",children:r.jsx($t,{size:20})})]}),r.jsx("div",{className:"widget-modal-body",children:E()})]})})]})},RPe=({isOpen:t,onClose:e,title:n,widgets:a,onSave:i})=>{const[s,o]=v.useState(!1),[l,c]=v.useState(n),[d,f]=v.useState(""),[p,g]=v.useState(!1);if(!t)return null;const x=async()=>{if(!(!i||!l.trim())){g(!0);try{await i(l,d),o(!1),e()}catch(b){console.error("Failed to save dashboard:",b),alert("Failed to save dashboard")}finally{g(!1)}}};return r.jsx("div",{className:"temp-dash-overlay",onClick:e,children:r.jsxs("div",{className:"temp-dash-modal",onClick:b=>b.stopPropagation(),children:[r.jsxs("div",{className:"temp-dash-header",children:[r.jsxs("div",{className:"temp-dash-title-group",children:[r.jsx("div",{className:"temp-dash-icon",children:r.jsx(Zm,{size:16})}),r.jsxs("div",{className:"temp-dash-title-text",children:[r.jsx("h2",{children:n}),r.jsxs("span",{className:"temp-dash-ai-badge",children:[r.jsx(fw,{size:8})," AI Generated"]})]})]}),r.jsxs("div",{className:"temp-dash-actions",children:[i&&!s&&r.jsxs("button",{onClick:()=>o(!0),className:"temp-dash-save-btn",children:[r.jsx(cs,{size:12})," Save"]}),r.jsx("button",{onClick:e,className:"temp-dash-close-btn",children:r.jsx($t,{size:16})})]})]}),s&&r.jsxs("div",{className:"temp-dash-save-form",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:l,onChange:b=>c(b.target.value),autoFocus:!0}),r.jsx("input",{type:"text",placeholder:"Description (optional)",value:d,onChange:b=>f(b.target.value)}),r.jsxs("div",{className:"temp-dash-save-actions",children:[r.jsx("button",{onClick:()=>o(!1),className:"temp-dash-cancel-btn",children:"Cancel"}),r.jsx("button",{onClick:x,className:"temp-dash-confirm-btn",disabled:p||!l.trim(),children:p?"Saving...":"Confirm"})]})]}),r.jsx("div",{className:"temp-dash-body",children:a.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets to display."}):r.jsx("div",{className:"temp-dash-grid",children:a.map((b,j)=>r.jsx(AM,{widget:b,isEditing:!1,autoHideEmptyColumns:!0},b.id||`widget-${j}`))})})]})})},uB=()=>MN(()=>import("./EditComplaintPage-CUfdr_TI.js"),__vite__mapDeps([0,1])),LPe=()=>MN(()=>import("./AddPatientPage-DctKKfma.js"),__vite__mapDeps([2,3])),Bj=[{name:"Dashboard",path:"/dashboard",icon:r.jsx(Zm,{size:16}),keywords:["home","main","analytics","stats"],roles:["all"]},{name:"Clinic Hub",path:"/dashboard/clinic-hub",icon:r.jsx(jc,{size:16}),keywords:["central","hub","overview"],roles:["admin","superadmin"]},{name:"Analysis Dashboard",path:"/dashboard/analysis",icon:r.jsx(jc,{size:16}),keywords:["reports","stats","finance","money"],roles:["admin","superadmin"]},{name:"Live AI Assistant",path:"/live-api",icon:r.jsx(Av,{size:16}),keywords:["ai","chat","voice","assistant"],roles:["all"]},{name:"Clinic Subscriptions",path:"/dashboard/clinic-subscriptions",icon:r.jsx(jc,{size:16}),keywords:["plans","billing","tenants"],roles:["superadmin"]},{name:"User Management",path:"/dashboard/users",icon:r.jsx(Os,{size:16}),keywords:["admins","clinics","accounts"],roles:["superadmin"]},{name:"Patient Search",path:"/dashboard/search-patient",icon:r.jsx(Fn,{size:16}),keywords:["find","lookup","patient"],roles:["all"]},{name:"All Patients",path:"/dashboard/all-patients",icon:r.jsx(Os,{size:16}),keywords:["list","records","database"],roles:["admin","receptionist","doctor"]},{name:"Add New Patient",path:"/dashboard/add-patient",icon:r.jsx(BN,{size:16}),keywords:["register","new","create","onboard"],roles:["admin","receptionist","doctor"]},{name:"Admissions",path:"/manage-admission",icon:r.jsx(MQ,{size:16}),keywords:["ipd","admit","discharge","rooms"],roles:["admin","doctor","receptionist"]},{name:"Appointment Queue",path:"/dashboard/reception",icon:r.jsx(Os,{size:16}),keywords:["queue","reception","waiting","appointments"],roles:["admin","receptionist","superadmin"]},{name:"Doctor Queue",path:"/dashboard/queue",icon:r.jsx(jc,{size:16}),keywords:["waiting","patients","consultation"],roles:["admin","doctor","superadmin"]},{name:"Pharmacy Inventory",path:"/dashboard/inventory",icon:r.jsx(Cc,{size:16}),keywords:["drugs","medicine","stock","pharmacy"],roles:["admin","pharmacy"]},{name:"Pharmacy Queue",path:"/dashboard/pharmacy-queue",icon:r.jsx(Cc,{size:16}),keywords:["orders","billing","dispense"],roles:["admin","pharmacy","superadmin"]},{name:"Add New Drug",path:"/dashboard/inventory/add",icon:r.jsx(Cc,{size:16}),keywords:["create","medicine","stock"],roles:["admin","pharmacy"]},{name:"Add Pharmacy Order",path:"/dashboard/add-order",icon:r.jsx(NE,{size:16}),keywords:["sell","bill","dispense"],roles:["admin","pharmacy"]},{name:"Refill Reminders",path:"/refill-reminders",icon:r.jsx(ua,{size:16}),keywords:["recurring","sms","alert"],roles:["admin","pharmacy"]},{name:"Distributors",path:"/dashboard/distributors",icon:r.jsx(GO,{size:16}),keywords:["suppliers","vendors","stock"],roles:["admin","pharmacy"]},{name:"Purchase",path:"/dashboard/purchase",icon:r.jsx(NE,{size:16}),keywords:["buy","procurement","stock"],roles:["admin","pharmacy"]},{name:"Lab Panel",path:"/dashboard/lab",icon:r.jsx(ls,{size:16}),keywords:["billing","orders","queue"],roles:["admin","lab","superadmin"]},{name:"Create Lab Order",path:"/create-lab-order",icon:r.jsx(ls,{size:16}),keywords:["test","pathology","diagnostics"],roles:["admin","doctor","lab"]},{name:"Search Lab Reports",path:"/lab/search-report",icon:r.jsx(Fn,{size:16}),keywords:["results","history","find"],roles:["admin","doctor","lab"]},{name:"Lab Inventory",path:"/lab-inventory",icon:r.jsx(ls,{size:16}),keywords:["reagents","tests","stock"],roles:["admin","lab"]},{name:"Dental",path:"/dashboard/dental",icon:r.jsx(jc,{size:16}),keywords:["teeth","dentist","chart","odontogram"],roles:["admin","doctor","superadmin"]},{name:"Create Custom Bill",path:"/create-custom-bill",icon:r.jsx(Ra,{size:16}),keywords:["invoice","custom","charge"],roles:["admin","receptionist"]},{name:"Billing History",path:"/billing",icon:r.jsx(hw,{size:16}),keywords:["transactions","payments","history"],roles:["admin","receptionist"]},{name:"Patient Debt Management",path:"/dashboard/patient-debt",icon:r.jsx(hw,{size:16}),keywords:["debt","due","outstanding","balance"],roles:["admin","pharmacy","receptionist"]},{name:"Custom Tables",path:"/custom-tables",icon:r.jsx(Ra,{size:16}),keywords:["database","sheets","custom data"],roles:["admin","superadmin"]},{name:"Custom Dashboards",path:"/dashboards",icon:r.jsx(Zm,{size:16}),keywords:["charts","reports","analytics"],roles:["admin","doctor","superadmin"]},{name:"Staff Management",path:"/dashboard/staff",icon:r.jsx(tg,{size:16}),keywords:["users","employees","roles","admin"],roles:["admin","superadmin"]},{name:"Role Management",path:"/dashboard/roles",icon:r.jsx(tg,{size:16}),keywords:["roles","permissions","access","custom roles"],roles:["admin","superadmin"]}],dB=[{icon:"",text:"Update Paracetamol stock to 100",roles:["admin","pharmacy"]},{icon:"",text:"Change CBC Test price to 350",roles:["admin","lab","superadmin"]},{icon:"",text:"Set Voice AI language to Hindi",roles:["all"]},{icon:"",text:"Show revenue for last month",roles:["admin","superadmin"]},{icon:"",text:"Purchase 50 strips of Aspirin",roles:["admin","pharmacy"]},{icon:"",text:"Update consultation fee to 500",roles:["admin","superadmin"]},{icon:"",text:"Add new staff member",roles:["admin","superadmin"]},{icon:"",text:"Register: John Doe, 25M, Fever",roles:["all"]},{icon:"",text:"Check Metformin availability",roles:["admin","pharmacy","doctor"]}],FPe=({user:t})=>{const{isOpen:e,closeCommandBar:n}=Dc(),a=Lt(),i=$r(),s=v.useRef(null),[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!1),[S,_]=v.useState(!0),[T,C]=v.useState(!0),{customColumnsConfig:E}=rS(),k=(E==null?void 0:E.patients)||[],[O,I]=v.useState(null),[F,B]=v.useState(!1),$=ds(),{chatHistory:L,isProcessing:V,handleSendMessage:H,setChatQuery:ne,refreshChat:Q,selectedImage:q,handleImageSelect:G,clearImage:ie,temporaryDashboard:W,closeTemporaryDashboard:z,saveTemporaryDashboard:ce}=fD({settings:{},staffList:[],enableDynamicContext:!1}),je=Ve=>{Ve&&($.prefetchQuery({queryKey:Gt.patients.context(Ve),queryFn:async()=>{const jt=await se(`/api/patients/${Ve}/context`);if(!jt.ok)throw new Error("Failed to fetch patient context");return jt.json()},staleTime:5*60*1e3}),$.prefetchQuery({queryKey:Gt.patientDebts.balance(Ve),queryFn:async()=>{const jt=await se(`/api/patient-debts/${Ve}/balance`);return jt.ok?jt.json():{netDebt:0}},staleTime:1*60*1e3}),$.prefetchQuery({queryKey:Gt.queue.latest(Ve),queryFn:async()=>{const jt=await se(`/api/queue/patient/${Ve}/latest`);if(!jt.ok)throw new Error("Failed to fetch latest queue status");const kt=await jt.json();return kt!=null&&kt._id&&$.prefetchQuery({queryKey:Gt.queue.entry(kt._id),queryFn:async()=>{const Yn=await se(`/api/queue/doctor/complaint/${kt._id}`);if(!Yn.ok)throw new Error("Failed to fetch complaint record");return Yn.json()},staleTime:1*60*1e3}),kt},staleTime:5e3}),$.prefetchQuery({queryKey:Gt.dental.records(Ve),queryFn:async()=>{const jt=await se(`/api/dental/patient/${Ve}`);if(!jt.ok)throw new Error("Failed to fetch dental records");return jt.json()},staleTime:5*60*1e3}))},Y=v.useMemo(()=>t?Bj.filter(Ve=>Ve.roles.includes("all")||t.role&&Ve.roles.includes(t.role)):Bj,[t]),Ie=v.useMemo(()=>t?dB.filter(Ve=>Ve.roles.includes("all")||t.role&&Ve.roles.includes(t.role)):dB,[t]),Ue=v.useMemo(()=>new oo(Y,{keys:["name","keywords"],threshold:.3}),[Y]),[ze,Le]=v.useState(!1),[be,Ce]=v.useState(!1),[Ae,me]=v.useState(!1);v.useEffect(()=>{if(e)Le(!0),me(!1);else{me(!0);const Ve=setTimeout(()=>{Le(!1),me(!1),Q()},200);return()=>clearTimeout(Ve)}},[e,Q]);const{setPageContext:ye}=LN();v.useEffect(()=>{if(e){const Ve=i.pathname,jt=Bj.find(kt=>kt.path===Ve)||Bj.find(kt=>Ve.startsWith(kt.path)&&kt.path!=="/dashboard");ye(jt?{name:jt.name,path:Ve,data:{role:jt.roles}}:{name:"Current Page",path:Ve})}},[e,i.pathname,ye]);const le=v.useRef(null),X=Ve=>{var kt;const jt=(kt=Ve.target.files)==null?void 0:kt[0];jt&&G(jt)},[ae,de]=v.useState({x:0,y:0}),[ee,Ne]=v.useState(!1),Te=v.useRef({x:0,y:0}),Fe=v.useRef({x:0,y:0}),xe=v.useRef(!1),te=v.useRef(null);v.useEffect(()=>{const Ve=kt=>{if(!ee)return;xe.current=!0;const Yn=kt.clientX-Te.current.x,vt=kt.clientY-Te.current.y;let Ot=Fe.current.x+Yn,Vt=Fe.current.y+vt;if(te.current){const ln=te.current.offsetWidth,er=te.current.offsetHeight,Tn=(window.innerWidth-ln)/2,va=(window.innerHeight-er)/2,Ka=Math.max(0,Tn),Br=Math.max(0,va);Ot=Math.max(-Ka,Math.min(Ka,Ot)),Vt=Math.max(-Br,Math.min(Br,Vt))}de({x:Ot,y:Vt})},jt=()=>{Ne(!1)};return ee&&(window.addEventListener("mousemove",Ve),window.addEventListener("mouseup",jt)),()=>{window.removeEventListener("mousemove",Ve),window.removeEventListener("mouseup",jt)}},[ee]),v.useEffect(()=>{i.pathname==="/dashboard"&&(l(""),p([]),x([])),e&&(i.pathname==="/dashboard"?B(!1):B(!0))},[i.pathname]),v.useEffect(()=>{(f.length>0||g.length>0)&&F&&B(!1)},[f,g]),v.useEffect(()=>{if(e&&window.innerWidth<=768){window.history.pushState({commandBarOpen:!0},"");const Ve=jt=>{jt.preventDefault(),B(!0)};return window.addEventListener("popstate",Ve),()=>{window.removeEventListener("popstate",Ve)}}},[e]),v.useEffect(()=>{F||de({x:0,y:0})},[F]),v.useEffect(()=>{ne(o)},[o]),v.useEffect(()=>{e&&!F&&s.current&&setTimeout(()=>{if(s.current){s.current.focus();const Ve=s.current.value.length;Ve>0&&s.current.setSelectionRange(Ve,Ve)}},50)},[e,F]),v.useEffect(()=>{if(!e||F||!(window.innerWidth<=768))return;const jt=window.scrollY,kt=document.body.style.overflow,Yn=document.documentElement.style.overflow,vt=document.body.style.position,Ot=document.body.style.top,Vt=document.body.style.width;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${jt}px`,document.body.style.width="100%",()=>{document.documentElement.style.overflow=Yn,document.body.style.overflow=kt,document.body.style.position=vt,document.body.style.top=Ot,document.body.style.width=Vt,window.scrollTo(0,jt)}},[e,F]);const oe=Ve=>{!Ve.trim()&&!q||(B(!1),H(Ve),l(""),p([]),x([]))},{preFilledQuery:_e,setPreFilledQuery:Oe}=Dc();v.useEffect(()=>{e&&_e&&(l(_e),setTimeout(()=>{oe(_e),Oe("")},300))},[e,_e,Oe]),v.useEffect(()=>{O&&(l(O),Ce(!1),setTimeout(()=>oe(O),50),I(null))},[O]);const K=()=>{Ce(!0)},ge=()=>{l(""),p([]),x([]),Q(),s.current&&s.current.focus()};v.useEffect(()=>{e&&(async()=>{_(!0);try{const jt=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),kt=await se(`/api/patients?${jt.toString()}`);if(kt.ok){const Yn=await kt.json();d(Yn.patients||[])}}catch(jt){console.error("Error fetching recent patients:",jt)}finally{_(!1)}})()},[e]);const ue=v.useMemo(()=>qc(async Ve=>{const jt=Ve.trim(),kt=/^\d+$/.test(jt),Yn=jt.split(/\s+/).length;if(jt.length>1){const vt=Ue.search(jt);x(vt.map(Ot=>Ot.item))}else x([]);if(jt.length<2||kt&&jt.length>10||!kt&&Yn>3){p([]),j(!1);return}j(!0);try{const vt=new URLSearchParams({search:encodeURIComponent(Ve),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Ot=await se(`/api/patients?${vt.toString()}`);if(Ot.ok){const Vt=await Ot.json();p(Vt.patients||[])}}catch(vt){console.error("Search error:",vt)}finally{j(!1),uB()}},300),[t]),fe=Ve=>{const jt=Ve.target.value;l(jt),ue(jt)},Ee=Ve=>{Ve.id&&a(`/dashboard/edit-complaint/patient/${Ve.id}`)},Ke=Ve=>{a(Ve.path)},$e=Ve=>{Ve.path==="/dashboard/add-patient"&&LPe()},We=Ve=>{l(Ve),setTimeout(()=>oe(Ve),50)},it=async()=>{if(o.trim()){j(!0);try{const Ve=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.trim(),age:null,gender:null,phone:null})});if(!Ve.ok){const vt=await Ve.json();throw new Error(vt.message||"Failed to create patient")}const jt=await Ve.json();let kt=null;const Yn=await se("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:jt.id,complaint:"Walk-in (Quick Create)"})});if(Yn.ok&&(kt=(await Yn.json()).id),kt)a(`/dashboard/edit-complaint/${kt}`);else{const vt=await se(`/api/queue/patient/${jt.id}/latest`);if(vt.ok){const Ot=await vt.json();Ot&&Ot._id&&a(`/dashboard/edit-complaint/${Ot._id}`)}}n()}catch(Ve){console.error("Failed to create patient:",Ve),alert("Failed to create patient. Please try again.")}finally{j(!1)}}},wt=Ve=>{o.trim()&&oe(o)},we=Ve=>{Ve.key==="Enter"&&!Ve.shiftKey&&(Ve.preventDefault(),wt())},Xe=Ve=>{Ve.target===Ve.currentTarget&&n()};if(!e&&!ze)return null;const Je=o.trim().length>0||(f.length>0||g.length>0)&&!b,ct=o.length===0&&f.length===0&&g.length===0,Ct=o.length>=3&&f.length===0&&g.length===0&&!b,bt=L.length>0||V,ke=!bt||Je,ot=bt&&Je,Tt=bt&&!T&&!F&&!Je;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${It.overlay} ${F?It.overlayMinimized:""} ${Ae?It.exiting:""}`,onClick:Xe,children:r.jsxs("div",{ref:te,className:`${It.modal} ${F?It.minimized:""} ${Tt?It.collapsed:""} ${Ae?It.exiting:""}`,style:{transform:`translate(${ae.x}px, ${ae.y}px)`,height:Tt?"auto":void 0},onClick:()=>{xe.current||(F?B(!1):Tt&&C(!0))},children:[r.jsxs("div",{className:It.dragBar,onMouseDown:Ve=>{Ve.target.closest("button")||(Ne(!0),xe.current=!1,Te.current={x:Ve.clientX,y:Ve.clientY},Fe.current={x:ae.x,y:ae.y})},children:[r.jsxs("div",{className:It.dragBarControls,children:[r.jsx("button",{className:It.windowControlBtn,onClick:n,title:"Close",children:r.jsx($t,{size:24,color:"#64748b"})}),r.jsx("button",{className:It.windowControlBtn,onClick:()=>B(!F),title:F?"Maximize":"Minimize",children:F?r.jsx(Gz,{size:24,color:"#64748b"}):r.jsx(JX,{size:24,color:"#64748b"})})]}),r.jsx("div",{className:It.dragBarTitle,children:bt?r.jsxs(r.Fragment,{children:[r.jsx(Av,{size:14,className:"text-violet-600"}),r.jsx("span",{children:"AI Assistant"})]}):Je?r.jsxs(r.Fragment,{children:[r.jsx(Fn,{size:14,className:"text-blue-500"}),r.jsx("span",{children:"Search Results"})]}):r.jsx("span",{style:{opacity:.5,fontWeight:500},children:"Clinic Manager AI"})}),r.jsx("div",{className:It.dragBarControlsRight,children:r.jsx("button",{className:It.newChatBtn,onClick:ge,title:"New Chat",children:r.jsx($i,{size:20})})})]}),r.jsxs("div",{className:It.contentWrapper,children:[bt&&r.jsx("div",{className:It.chatSectionFill,children:r.jsxs("div",{className:It.chatMessagesFill,children:[L.map((Ve,jt)=>r.jsx("div",{className:`${It.chatBubble} ${Ve.role==="user"?It.chatBubbleUser:Ve.role==="model"?It.chatBubbleModel:It.chatBubbleSystem}`,children:Ve.role==="model"?r.jsx(wf,{remarkPlugins:[Nf],children:Ve.text}):Ve.text},jt)),V&&r.jsxs("div",{className:It.processing,children:[r.jsx(Ic,{size:14,className:It.spinner}),"Thinking..."]})]})}),ke&&r.jsxs("div",{className:ot?It.overlayContent:It.content,children:[ct&&!bt&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Newly Registered"}),r.jsx("div",{className:It.recentList,children:S?[1,2,3,4,5].map(Ve=>r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}},Ve)):c.length>0?c.map(Ve=>r.jsxs("div",{className:It.recentPill,onClick:()=>Ee(Ve),onMouseEnter:()=>je(Ve.id),children:[r.jsx("span",{className:It.recentName,children:Ve.name||"Patient"}),r.jsxs("span",{className:It.recentToken,children:["#",Ve.token]}),r.jsxs("span",{className:It.recentInfo,children:[Ve.age?`${Ve.age}y`:""," ",Ve.gender||""]})]},Ve.id)):r.jsx("div",{className:It.recentInfo,style:{opacity:.5},children:"No recent patients found."})})]}),ct&&!bt&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Try Asking AI..."}),r.jsx("div",{className:It.examplesGrid,children:Ie.map((Ve,jt)=>r.jsxs("div",{className:It.exampleCard,onClick:()=>We(Ve.text),children:[r.jsx("span",{className:It.exampleIcon,children:Ve.icon}),r.jsx("span",{className:It.exampleText,children:Ve.text})]},jt))})]}),b&&r.jsx("div",{className:It.section,children:r.jsxs("div",{className:It.processing,children:[r.jsx(Ic,{size:16,className:It.spinner}),"Searching..."]})}),g.length>0&&!b&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Pages Found"}),r.jsx("div",{className:It.resultsList,children:g.map((Ve,jt)=>r.jsxs("div",{className:It.resultItem,onClick:()=>Ke(Ve),onMouseEnter:()=>$e(Ve),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{color:"#7c3aed"},children:Ve.icon}),r.jsx("span",{className:It.resultName,children:Ve.name})]}),r.jsx("span",{className:It.resultDetails,style:{fontSize:"0.7rem"},children:"Jump to page"})]},jt))})]}),Je&&r.jsxs("div",{className:It.section,children:[r.jsx("div",{className:It.sectionTitle,children:"Patients Found"}),r.jsxs("div",{className:It.resultsList,children:[o.trim().length>0&&r.jsx("div",{className:It.resultItem,onClick:it,style:{border:"1px dashed #6366f1",backgroundColor:"#f5f3ff"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#8b5cf6",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(BN,{size:16})}),r.jsxs("div",{children:[r.jsxs("span",{className:It.resultName,style:{color:"#7c3aed"},children:['Create "',o,'"']}),r.jsx("div",{className:"text-xs text-violet-600 mt-0.5",children:"Add new patient"})]})]})}),f.map(Ve=>r.jsxs("div",{className:It.resultItem,onClick:()=>Ee(Ve),onMouseEnter:()=>{uB(),je(Ve.id)},children:[r.jsxs("div",{children:[r.jsxs("span",{className:It.resultToken,children:["[#",Ve.token,"]"]}),r.jsx("span",{className:It.resultName,children:Ve.name})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[Ve.age&&r.jsxs("span",{children:[Ve.age," Yrs"]}),Ve.gender&&r.jsx("span",{children:Ve.gender}),r.jsxs("span",{children:["ID: ",Ve.id.slice(-6).toUpperCase()]}),k.map(jt=>{var Yn;const kt=(Yn=Ve.custom_fields)==null?void 0:Yn[jt.key];return kt?r.jsxs("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 border border-slate-200",children:[jt.label,": ",String(kt)]},jt.key):null})]})]},Ve.id))]})]}),Ct&&!bt&&r.jsx("div",{className:It.section,children:r.jsxs("div",{className:It.noResults,children:["Press ",r.jsx("strong",{children:"Enter"}),' to send "',o,'" to AI Assistant']})})]})]}),r.jsxs("div",{className:It.header,children:[r.jsx("div",{className:It.inputWrapper,children:r.jsxs("div",{className:It.inputContainer,children:[r.jsx("div",{className:It.minimizedSearchIcon,children:r.jsx(Fn,{size:24})}),r.jsx("textarea",{ref:Ve=>{s.current=Ve,Ve&&(Ve.style.height="auto",Ve.style.height=Math.min(Ve.scrollHeight,150)+"px")},className:It.input,placeholder:F?"Type here...":"Search (Name/Token/Phone), Ask AI, or Enter New Case (Name Age Sex Complaint)...",value:o,onChange:Ve=>{fe(Ve),Ve.target.style.height="auto",Ve.target.style.height=Math.min(Ve.target.scrollHeight,150)+"px"},onKeyDown:we,onFocus:Ve=>{Ve.target.scrollIntoView=()=>{},setTimeout(()=>{te.current&&(te.current.scrollTop=te.current.scrollHeight)},100)},rows:1,disabled:V}),q&&r.jsxs("div",{style:{position:"relative",marginRight:"0.5rem"},children:[r.jsx("img",{src:q,alt:"Selected",style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"4px",border:"1px solid #e2e8f0"}}),r.jsx("button",{onClick:ie,style:{position:"absolute",top:-4,right:-4,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",padding:"1px",cursor:"pointer",display:"flex"},children:r.jsx($t,{size:8})})]}),r.jsxs("div",{className:It.controlsGroup,children:[r.jsx("button",{className:It.iconButton,onClick:()=>{var Ve;return(Ve=le.current)==null?void 0:Ve.click()},title:"Attach Image",children:r.jsx(HO,{size:16})}),(o.trim().length>0||q)&&r.jsx("button",{className:`${It.iconButton} ${It.sendButton}`,onClick:()=>oe(o),title:"Send to AI",children:r.jsx($N,{size:16})}),r.jsx("button",{className:It.iconButton,onClick:K,title:"Voice Input",children:r.jsx(FN,{size:16})})]})]})}),r.jsx("input",{type:"file",ref:le,onChange:X,accept:"image/*",style:{display:"none"}})]})]})}),be&&r.jsx(nS,{onClose:()=>Ce(!1),patientData:null,tokenNumber:null,onAiSummaryChange:Ve=>{console.log("AI Summary:",Ve),I(Ve)}}),W&&r.jsx(RPe,{isOpen:!!W,onClose:z,title:W.title,widgets:W.widgets,onSave:ce})]})};var qH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hB=Se.createContext&&Se.createContext(qH),$Pe=["attr","size","title"];function BPe(t,e){if(t==null)return{};var n=zPe(t,e),a,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}function zPe(t,e){if(t==null)return{};var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;n[a]=t[a]}return n}function kN(){return kN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},kN.apply(this,arguments)}function fB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function AN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fB(Object(n),!0).forEach(function(a){qPe(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fB(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function qPe(t,e,n){return e=UPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UPe(t){var e=VPe(t,"string");return typeof e=="symbol"?e:e+""}function VPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var a=n.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UH(t){return t&&t.map((e,n)=>Se.createElement(e.tag,AN({key:n},e.attr),UH(e.child)))}function Bi(t){return e=>Se.createElement(HPe,kN({attr:AN({},t.attr)},e),UH(t.child))}function HPe(t){var e=n=>{var{attr:a,size:i,title:s}=t,o=BPe(t,$Pe),l=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Se.createElement("svg",kN({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,o,{className:c,style:AN(AN({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Se.createElement("title",null,s),t.children)};return hB!==void 0?Se.createElement(hB.Consumer,null,n=>e(n)):e(qH)}function GPe(t){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(t)}function pB(t){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function av(t){return Bi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function mB(t){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function IA(t){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(t)}function Gh(t){return Bi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function zj(t){return Bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(t)}function Uh(t){return Bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(t)}function iv(t){return Bi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(t)}function Tm(t){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function VH(t){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function gB(t){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function WPe(t){return Bi({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function qj(t){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(t)}function Nm(t){return Bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const HH={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:Gh},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:zj},{path:"/dashboard/users",name:"User Management",icon:Nm}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:Gh}]},{title:"Clinic Management",links:[{path:"/dashboard/clinic-hub",name:"Clinic Hub",icon:mB},{path:"/dashboard/staff",name:"Staff Management",icon:Nm},{path:"/dashboard/roles",name:"Role Management",icon:qj},{path:"/custom-tables",name:"Custom Tables",icon:av},{path:"/dashboards",name:"Custom Dashboards",icon:pB}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:zj},{path:"/dashboard/patients",name:"All Patients",icon:Nm},{path:"/dashboard/patients/search",name:"Search Patient",icon:Tm},{path:"/dashboard/files",name:"Patient Files",icon:av}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:av},{path:"/dashboard/inventory",name:"Inventory Management",icon:iv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:iv},{path:"/dashboard/distributors",name:"Distributor Management",icon:Nm}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:gB},{path:"/dashboard/reception",name:"Appointment Queue",icon:Gh},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:Uh},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:Uh}]},{title:"Role Operations",links:[{path:"/manage-admission",name:"Admission Desk",icon:qj},{path:"/dashboard/pharmacy-queue",name:"Pharmacy Queue",icon:iv},{path:"/dashboard/lab",name:"Lab Panel",icon:IA},{path:"/billing",name:"Billing",icon:Uh},{path:"/create-custom-bill",name:"Custom Bill",icon:Uh}]},{title:"Help & Support",links:[{path:"/dashboard/guide",name:"User Guide",icon:GPe}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search-patient",name:"Patient Search",icon:Tm},{path:"/dashboard/add-patient",name:"Add Patient",icon:zj},{path:"/manage-admission",name:"Manage Admission",icon:qj}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:IA},{path:"/billing",name:"Billing",icon:Uh}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:gB}]},{title:"Analytics",links:[{path:"/dashboards",name:"Custom Dashboards",icon:pB}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Appointment Queue",icon:Gh}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:Nm},{path:"/dashboard/add-patient",name:"Add Patient",icon:zj},{path:"/dashboard/search-patient",name:"Search Patient",icon:Tm}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:Uh},{path:"/manage-admission",name:"Manage Admission",icon:qj},{path:"/dashboard/patient-debt",name:"Patient Debt Management",icon:Uh}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:Gh},{path:"/lab-inventory",name:"Lab Test Inventory",icon:IA},{path:"/lab/search-report",name:"Search Lab Report",icon:Tm}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:Gh},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:iv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:iv},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:av},{path:"/dashboard/distributors",name:"Distributor Management",icon:Nm}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:av},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:mB},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:Tm}]}]},EM=async()=>{const t=await se("/api/clinic-subscriptions/plans",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription plans")}return t.json()},YPe=async t=>{const e=await se(`/api/clinic-subscriptions/cancel/${t}`,{method:"PUT"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to cancel clinic subscription")}return e.json()},KPe=async t=>{const e=await se(`/api/clinics/${t}/subscription-status`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||`Failed to fetch subscription status for clinic ${t}`)}return e.json()},QPe=async t=>{const e=await se(`/api/clinic-subscriptions/plans/${t}`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to fetch clinic subscription plan")}return e.json()},XPe=async t=>{const e=await se("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to create clinic subscription plan")}return e.json()},JPe=async(t,e)=>{const n=await se(`/api/clinic-subscriptions/plans/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to update clinic subscription plan")}return n.json()},ZPe=async t=>{const e=await se(`/api/clinic-subscriptions/plans/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to deactivate clinic subscription plan")}return e.json()},eOe=async t=>{const e=await se("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to initiate clinic subscription")}return e.json()},tOe=async()=>{try{const t=await se("/api/clinic-subscriptions/pending",{method:"GET"});return t.ok?t.json():null}catch(t){return console.error("Error checking for pending subscription:",t),null}},nOe=async()=>{const t=await se("/api/clinics/subscription-status",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription status")}return t.json()};function rOe(t=!0){return DN({queryKey:Gt.clinicSubscription,queryFn:nOe,enabled:t,staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!0})}const aOe="_container_c9bhr_3",iOe="_header_c9bhr_21",sOe="_titleGroup_c9bhr_41",oOe="_title_c9bhr_41",lOe="_closeButton_c9bhr_59",cOe="_messageList_c9bhr_79",uOe="_emptyState_c9bhr_108",dOe="_emptyStateIcon_c9bhr_119",hOe="_exampleContainer_c9bhr_145",fOe="_exampleChip_c9bhr_153",pOe="_messageRow_c9bhr_176",mOe="_messageRowUser_c9bhr_194",gOe="_messageRowModel_c9bhr_198",yOe="_messageRowSystem_c9bhr_202",xOe="_bubble_c9bhr_208",vOe="_bubbleUser_c9bhr_224",bOe="_bubbleModel_c9bhr_234",jOe="_bubbleSystem_c9bhr_247",wOe="_processingIndicator_c9bhr_330",NOe="_spin_c9bhr_343",SOe="_inputArea_c9bhr_358",_Oe="_imagePreviewContainer_c9bhr_365",COe="_inputContainer_c9bhr_376",TOe="_inputField_c9bhr_393",kOe="_sendButton_c9bhr_407",fr={container:aOe,header:iOe,titleGroup:sOe,title:oOe,closeButton:lOe,messageList:cOe,emptyState:uOe,emptyStateIcon:dOe,exampleContainer:hOe,exampleChip:fOe,messageRow:pOe,messageRowUser:mOe,messageRowModel:gOe,messageRowSystem:yOe,bubble:xOe,bubbleUser:vOe,bubbleModel:bOe,bubbleSystem:jOe,processingIndicator:wOe,spin:NOe,inputArea:SOe,imagePreviewContainer:_Oe,inputContainer:COe,inputField:TOe,sendButton:kOe},GH=({onClose:t,settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s})=>{const{chatQuery:o,setChatQuery:l,chatHistory:c,isProcessing:d,handleSendMessage:f,refreshChat:p,stopGeneration:g,selectedImage:x,handleImageSelect:b,clearImage:j}=fD({settings:e,staffList:n,onSettingsUpdate:a,onStaffUpdate:i,onHighlight:s}),S=v.useRef(null),_=v.useRef(null),T=()=>{var O;(O=S.current)==null||O.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{T()},[c,d]);const C=O=>{var F;const I=(F=O.target.files)==null?void 0:F[0];I&&b(I)},E=["Check Paracetamol stock","Go to Pharmacy","Analysis for last month","Add nurse Sarah"],k=O=>{l(O)};return r.jsxs("div",{className:fr.container,children:[r.jsxs("header",{className:fr.header,children:[r.jsxs("div",{className:fr.titleGroup,children:[r.jsx(Av,{size:20,className:"text-violet-600"}),r.jsx("h3",{className:fr.title,children:"Clinic Assistant"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:p,className:fr.closeButton,title:"Refresh Chat",children:r.jsx(Yz,{size:18})}),r.jsx("button",{onClick:t,className:fr.closeButton,title:"Close",children:r.jsx($t,{size:20})})]})]}),r.jsxs("div",{className:fr.messageList,children:[c.length===0&&r.jsxs("div",{className:fr.emptyState,children:[r.jsx(Av,{size:48,className:fr.emptyStateIcon}),r.jsx("p",{children:"How can I help you manage the clinic today?"}),r.jsx("div",{className:fr.exampleContainer,children:E.map((O,I)=>r.jsx("button",{className:fr.exampleChip,onClick:()=>k(O),children:O},I))})]}),c.map((O,I)=>r.jsx("div",{className:`${fr.messageRow} ${O.role==="user"?fr.messageRowUser:O.role==="model"?fr.messageRowModel:fr.messageRowSystem}`,children:r.jsx("div",{className:`${fr.bubble} ${O.role==="user"?fr.bubbleUser:O.role==="model"?fr.bubbleModel:fr.bubbleSystem}`,children:O.role==="user"||O.role==="system"?O.text:r.jsx(wf,{remarkPlugins:[Nf],children:O.text})})},I)),d&&r.jsx("div",{className:`${fr.messageRow} ${fr.messageRowModel}`,children:r.jsxs("div",{className:fr.processingIndicator,children:[r.jsx(Ic,{size:14,className:fr.spin}),"Thinking..."]})}),r.jsx("div",{ref:S})]}),r.jsxs("div",{className:fr.inputArea,children:[x&&r.jsxs("div",{className:fr.imagePreviewContainer,style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",overflow:"hidden"},children:[r.jsx("img",{src:x,alt:"Selected",style:{width:"100%",height:"100%",objectFit:"cover"}}),r.jsx("button",{onClick:j,style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.5)",color:"white",border:"none",cursor:"pointer",padding:"1px"},children:r.jsx($t,{size:12})})]}),r.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Image attached"})]}),r.jsxs("div",{className:fr.inputContainer,children:[r.jsx("input",{type:"file",ref:_,onChange:C,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:fr.sendButton,onClick:()=>{var O;return(O=_.current)==null?void 0:O.click()},disabled:d,title:"Attach Image",style:{marginRight:"0.5rem",color:"#6b7280"},children:r.jsx(HO,{size:18})}),r.jsx("input",{type:"text",className:fr.inputField,placeholder:"Type your request...",value:o,onChange:O=>l(O.target.value),onKeyDown:O=>O.key==="Enter"&&!d&&f(),disabled:d,autoFocus:!0}),d?r.jsx("button",{className:fr.sendButton,onClick:g,title:"Stop Generating",style:{color:"#ef4444"},children:r.jsx(qJ,{size:18,fill:"currentColor"})}):r.jsx("button",{className:fr.sendButton,onClick:()=>f(),disabled:!o.trim()&&!x,children:r.jsx($N,{size:18})})]})]})]})};function Yc(t,e=100){const n=v.useRef(!1);v.useEffect(()=>{if(n.current)return;const a=setTimeout(()=>{const i=document,s=['input[type="text"]:not([disabled]):not([readonly])','input[type="search"]:not([disabled]):not([readonly])','input[type="email"]:not([disabled]):not([readonly])','input[type="tel"]:not([disabled]):not([readonly])','input[type="url"]:not([disabled]):not([readonly])',"input:not([type]):not([disabled]):not([readonly])"].join(", "),o=i.querySelectorAll(s),l=Array.from(o).filter(c=>{const d=window.getComputedStyle(c),f=c.getBoundingClientRect();return d.display!=="none"&&d.visibility!=="hidden"&&d.opacity!=="0"&&f.width>0&&f.height>0});if(l.length>0){const c=l[0];c.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{c.focus()},50),n.current=!0}},e);return()=>clearTimeout(a)},[t,e])}const AOe=({onLoginSuccess:t})=>{const[e,n]=v.useState(""),[a,i]=v.useState(""),[s,o]=v.useState(null),[l,c]=v.useState(!1),d=Lt();Yc();const f=async x=>{x.preventDefault(),c(!0),o(null);try{const b=await se("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})});if(!b.ok){let S=`Login failed with status: ${b.status}`;try{S=(await b.json()).message||S}catch{try{const T=await b.text();T&&(S=`${S} - ${T}`)}catch{}}throw new Error(S)}const j=await b.json();console.log("Login successful:",j),localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?d("/dashboard/queue"):d("/dashboard")}catch(b){console.error("Login failed:",b),o(b.message||"Login failed. Please check your credentials.")}finally{c(!1)}},p=async x=>{c(!0),o(null);try{const b=await se("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x.credential})});if(!b.ok)throw new Error("Google Sign-In failed");const j=await b.json();localStorage.setItem("authToken",j.token),localStorage.setItem("currentUser",JSON.stringify(j.user)),j.user.clinic_id&&localStorage.setItem("currentClinicId",j.user.clinic_id),t(j.user),j.user.role==="doctor"?d("/dashboard/queue"):d("/dashboard")}catch(b){console.error("Google Login Error:",b),o("Google Sign-In failed. Please try again.")}finally{c(!1)}},g=()=>{console.error("Google Login Failed"),o("Google Sign-In was unsuccessful. Please try again.")};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Newtons AI HMS"}),r.jsx("p",{className:"auth-subtitle",children:"Sign in to continue"}),r.jsxs("form",{onSubmit:f,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:x=>n(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"email",children:"Email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:x=>i(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"password",children:"Password"})]}),s&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:s})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:l,className:"auth-submit-button",children:l?"Signing in...":"Sign In"})})]}),r.jsx("div",{className:"google-login-container",children:r.jsx(KW,{onSuccess:p,onError:g,useOneTap:!0})}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",r.jsx(_r,{to:"/register",className:"auth-navigation-link",children:"Create account"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},EOe=()=>{const[t,e]=v.useState(""),[n,a]=v.useState(""),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,d]=v.useState(null),[f,p]=v.useState(!1),g=Lt(),x=async b=>{b.preventDefault(),p(!0),d(null);try{const j=await se("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:t,userName:n,userEmail:i,userPassword:o})}),S=await j.json();if(!j.ok)throw new Error(S.message||`HTTP error! status: ${j.status}`);console.log("Registration successful:",S),g("/login")}catch(j){console.error("Registration failed:",j),d(j.message||"Registration failed. Please try again.")}finally{p(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),r.jsxs("form",{onSubmit:x,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"}),r.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:t,onChange:b=>e(b.target.value),className:"auth-text-input",placeholder:"Your Clinic's Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"}),r.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:n,onChange:b=>a(b.target.value),className:"auth-text-input",placeholder:"Your Full Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userEmail",children:"Your Email (Admin Login)"}),r.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:i,onChange:b=>s(b.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userPassword",children:"Password"}),r.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:o,onChange:b=>l(b.target.value),className:"auth-text-input",placeholder:"Min. 6 characters"})]}),c&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:c})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:f,className:"auth-submit-button",children:f?"Registering...":"Register Clinic & Admin"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",r.jsx(_r,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},POe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i})=>{const s=$r(),[o,l]=v.useState(""),c=HH[n]||[],[d,f]=v.useState(500),p=v.useRef(!1),g=v.useCallback(S=>{p.current=!0,S.preventDefault()},[]),x=v.useCallback(()=>{p.current=!1},[]),b=v.useCallback(S=>{if(p.current){const _=window.innerWidth-S.clientX;_>250&&_<window.innerWidth*.8&&f(_)}},[]);v.useEffect(()=>(window.addEventListener("mousemove",b),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",x)}),[b,x]);const j=c.map(S=>({...S,links:S.links.filter(_=>_.name.toLowerCase().includes(o.toLowerCase()))})).filter(S=>S.links.length>0);return r.jsxs("div",{className:`side-panel ${a?"open":""}`,style:{width:`${d}px`,right:a?"0":`-${d}px`},children:[r.jsx("div",{className:"resizer",onMouseDown:g}),r.jsxs("div",{className:"side-panel-header",children:[r.jsx(_r,{to:"/dashboard",className:"home-button",onClick:i,children:r.jsx(Gh,{})}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(Tm,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),r.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:o,onChange:S=>l(S.target.value)})]}),r.jsx("button",{className:"close-button",onClick:i,children:""})]}),r.jsx("nav",{children:j.map((S,_)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:S.title}),r.jsx("ul",{className:"sub-page-list",children:S.links.map(T=>{const C=T.icon;return r.jsx("li",{children:r.jsxs(_r,{to:T.path,className:s.pathname===T.path?"active":"",onClick:i,children:[C&&r.jsx(C,{})," ",T.name]})},T.path)})})]},_))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(VH,{})," Logout"]})]})]})},OOe=({user:t,onLogout:e,userRole:n,isOpen:a,onClose:i,roleNavigation:s})=>{const o=$r(),l=s[n]||[];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mobile-side-panel-overlay ${a?"open":""}`,onClick:i}),r.jsxs("div",{className:`mobile-side-panel ${a?"open":""}`,children:[r.jsxs("div",{className:"mobile-side-panel-header",children:[r.jsx("h3",{children:"Menu"}),r.jsx("button",{className:"close-button",onClick:i,children:r.jsx(WPe,{})})]}),r.jsx("nav",{children:l.map((c,d)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:c.title}),r.jsx("ul",{className:"sub-page-list",children:c.links.map(f=>{const p=f.icon;return r.jsx("li",{children:r.jsxs(_r,{to:f.path,className:o.pathname===f.path?"active":"",onClick:i,children:[p&&r.jsx(p,{})," ",f.name]})},f.path)})})]},d))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(VH,{})," Logout"]})]})]})]})},qu={"/dashboard":{label:"Dashboard"},"/dashboard/staff":{label:"Staff Management",parent:"/dashboard"},"/dashboard/staff/add":{label:"Add Staff",parent:"/dashboard/staff"},"/dashboard/staff/edit":{label:"Edit Staff",parent:"/dashboard/staff"},"/dashboard/roles":{label:"Role Management",parent:"/dashboard"},"/dashboard/patients":{label:"All Patients",parent:"/dashboard"},"/dashboard/patients/add":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search-patient":{label:"Search Patient",parent:"/dashboard"},"/dashboard/clinic-hub":{label:"Clinic Hub",parent:"/dashboard"},"/dashboard/reception":{label:"Appointment Queue",parent:"/dashboard"},"/dashboard/pharmacy-queue":{label:"Pharmacy Queue",parent:"/dashboard"},"/dashboard/lab":{label:"Lab Panel",parent:"/dashboard"},"/dashboard/inventory":{label:"Inventory",parent:"/dashboard"},"/dashboard/inventory/add":{label:"Add Drug",parent:"/dashboard/inventory"},"/dashboard/inventory/edit":{label:"Edit Drug",parent:"/dashboard/inventory"},"/dashboard/purchase":{label:"Purchase",parent:"/dashboard"},"/dashboard/distributors":{label:"Distributors",parent:"/dashboard"},"/dashboard/patient-debts":{label:"Patient Debts",parent:"/dashboard"},"/dashboard/add-order":{label:"Add Pharmacy Order",parent:"/dashboard"},"/dashboard/edit-pharmacy-order":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/pharmacy-billing":{label:"Pharmacy Billing",parent:"/dashboard"},"/dashboard/analysis":{label:"Analysis",parent:"/dashboard"},"/dashboard/settings":{label:"Settings",parent:"/dashboard"},"/dashboard/search-patient-records":{label:"Search Records",parent:"/dashboard"},"/dashboard/queue":{label:"Queue",parent:"/dashboard"},"/dashboard/add-patient":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search":{label:"Patient Search",parent:"/dashboard"},"/dashboard/patients/search":{label:"Search Patient",parent:"/dashboard"},"/dashboard/subscriptions":{label:"Subscriptions",parent:"/dashboard"},"/dashboard/subscriptions/add":{label:"Add Plan",parent:"/dashboard/subscriptions"},"/dashboard/subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/subscriptions"},"/dashboard/clinic-subscriptions":{label:"Clinic Subscriptions",parent:"/dashboard"},"/dashboard/clinic-subscriptions/add":{label:"Add Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/clinic-subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/users":{label:"User Management",parent:"/dashboard"},"/dashboard/lab-billing":{label:"Lab Billing",parent:"/dashboard"},"/lab-inventory":{label:"Lab Inventory",parent:"/dashboard"},"/lab/search-report":{label:"Search Lab Report",parent:"/dashboard"},"/create-lab-order":{label:"Create Lab Order",parent:"/dashboard"},"/enter-lab-report":{label:"Enter Lab Report",parent:"/dashboard"},"/view-lab-report":{label:"View Lab Report",parent:"/dashboard"},"/lab/report/:id":{label:"Lab Report",parent:"/lab/search-report"},"/lab/enter-report/:id":{label:"Enter Report",parent:"/lab/search-report"},"/lab/view-report/:id":{label:"View Report",parent:"/lab/search-report"},"/billing":{label:"Billing",parent:"/dashboard"},"/dashboard/doctor-billing":{label:"Doctor Billing",parent:"/dashboard"},"/dashboard/doctor-billing/:id":{label:"Doctor Bill",parent:"/dashboard/doctor-billing"},"/create-custom-bill":{label:"Create Custom Bill",parent:"/dashboard"},"/patient":{label:"Patient",parent:"/dashboard"},"/patient/:id/admission-billing":{label:"Admission Billing",parent:"/manage-admission"},"/patient/:id/admission-bill":{label:"Admission Bill",parent:"/patient/:id/admission-billing"},"/patient/:id/lab-reports":{label:"Lab Reports",parent:"/patient"},"/patient/:id/pharmacy-orders":{label:"Pharmacy Orders",parent:"/patient"},"/patient/:id/complaints":{label:"Past Complaints",parent:"/patient"},"/edit-complaint":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/:id":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/patient/:id":{label:"New Complaint",parent:"/dashboard"},"/start-subscription":{label:"Start Subscription",parent:"/dashboard"},"/start-subscription/:id":{label:"Start Subscription",parent:"/dashboard"},"/manage-admission":{label:"Manage Admission",parent:"/dashboard"},"/dashboard/guide":{label:"User Guide",parent:"/dashboard"},"/custom-tables":{label:"Custom Tables",parent:"/dashboard"},"/custom-tables/:id":{label:"Table Records",parent:"/custom-tables"},"/dashboards":{label:"Dashboards",parent:"/dashboard"},"/dashboards/new":{label:"New Dashboard",parent:"/dashboards"},"/dashboards/:id":{label:"Dashboard View",parent:"/dashboards"},"/dashboards/:id/edit":{label:"Edit Dashboard",parent:"/dashboards"},"/dashboard/pharmacy-billing/:id":{label:"Pharmacy Bill",parent:"/dashboard/pharmacy-billing"},"/dashboard/lab-billing/:id":{label:"Lab Bill",parent:"/dashboard/lab-billing"},"/dashboard/edit-pharmacy-order/:id":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/orders/:id":{label:"Order Details",parent:"/dashboard/add-order"},"/refill-reminders":{label:"Refill Reminders",parent:"/dashboard"},"/start-clinic-subscription":{label:"Start Clinic Subscription",parent:"/dashboard"},"/dashboard/all-patients":{label:"All Patients",parent:"/dashboard"}},yB=t=>t.split("/").map(e=>{const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),a=/^\d+$/.test(e);return n||a?":id":e}).join("/"),DOe=t=>{if(qu[t])return qu[t].label;const e=yB(t);if(qu[e])return qu[e].label;const n=t.split("/"),a=n[n.length-1],i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a),s=/^\d+$/.test(a);if(i||s){const o=n.slice(0,-1).join("/"),l=yB(o);if(qu[l])return qu[l].label;if(qu[o])return qu[o].label}return a.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},MOe=()=>{const t=$r(),e=v.useMemo(()=>{const n=t.pathname.split("/").filter(s=>s!=="");if(n.length===0||n[0]==="login"||n[0]==="registration")return[];const a=[];let i="";return n.forEach((s,o)=>{if(i+=`/${s}`,o===0&&s==="dashboard")a.push({label:"Home",path:"/dashboard",isLast:o===n.length-1});else if(s!=="dashboard"){const l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s),c=/^\d+$/.test(s);let d=DOe(i);(l||c)&&d.replace(/\s/g,"").toLowerCase()===s.replace(/[-_]/g,"").toLowerCase()&&(l?d=`#${s.substring(0,8)}`:c&&(d=`#${s}`)),a.push({label:d,path:i,isLast:o===n.length-1})}}),n[0]!=="dashboard"&&a.length>0&&a.unshift({label:"Home",path:"/dashboard",isLast:!1}),a},[t.pathname]);return e.length===0?null:r.jsx("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:r.jsx("ol",{className:"breadcrumb-list",children:e.map((n,a)=>r.jsxs("li",{className:"breadcrumb-item",children:[a>0&&r.jsx(pd,{className:"breadcrumb-separator",size:14}),n.isLast?r.jsxs("span",{className:"breadcrumb-current","aria-current":"page",children:[a===0&&r.jsx(jE,{size:14,className:"breadcrumb-home-icon"}),n.label]}):r.jsxs(_r,{to:n.path,className:"breadcrumb-link",children:[a===0&&r.jsx(jE,{size:14,className:"breadcrumb-home-icon"}),n.label]})]},n.path))})})},IOe="_container_1ivr9_5",ROe="_visualContainer_1ivr9_33",LOe="_mobileDashboardGrid_1ivr9_49",FOe="_mobileDashboardItem_1ivr9_87",$Oe="_mobileDashboardIcon_1ivr9_195",BOe="_mobileDashboardLabel_1ivr9_233",zOe="_brandTitle_1ivr9_331",qOe="_searchBar_1ivr9_387",UOe="_searchIconWrapper_1ivr9_435",VOe="_searchIcon_1ivr9_435",HOe="_placeholderText_1ivr9_459",GOe="_shortcutHint_1ivr9_479",WOe="_key_1ivr9_495",YOe="_plus_1ivr9_519",KOe="_micButtonWrapper_1ivr9_529",QOe="_micIcon_1ivr9_577",XOe="_newlyRegisteredSection_1ivr9_901",JOe="_recentList_1ivr9_917",ZOe="_recentPatientPill_1ivr9_931",eDe="_recentNameContainer_1ivr9_957",tDe="_recentInfo_1ivr9_969",nDe="_newlyRegisteredLabel_1ivr9_1007",rDe="_recentName_1ivr9_957",aDe="_recentToken_1ivr9_1171",jr={container:IOe,visualContainer:ROe,mobileDashboardGrid:LOe,mobileDashboardItem:FOe,mobileDashboardIcon:$Oe,mobileDashboardLabel:BOe,brandTitle:zOe,searchBar:qOe,searchIconWrapper:UOe,searchIcon:VOe,placeholderText:HOe,shortcutHint:GOe,key:WOe,plus:YOe,micButtonWrapper:KOe,micIcon:QOe,newlyRegisteredSection:XOe,recentList:JOe,recentPatientPill:ZOe,recentNameContainer:eDe,recentInfo:tDe,newlyRegisteredLabel:nDe,recentName:rDe,recentToken:aDe},iDe=[{label:"Doctor",icon:r.jsx(bf,{size:24}),path:"/dashboard/doctor"},{label:"Labs",icon:r.jsx(Qj,{size:24}),path:"/create-lab-order"},{label:"Clinic",icon:r.jsx(Uz,{size:24}),path:"/dashboard/clinic-hub"},{label:"Inventory",icon:r.jsx(Cc,{size:24}),path:"/dashboard/inventory"},{label:"Analysis",icon:r.jsx(Qj,{size:24}),path:"/dashboard/analysis"},{label:"Dental",icon:r.jsx(LJ,{size:24}),path:"/dashboard/dental"},{label:"Files",icon:r.jsx(Qj,{size:24}),path:"/dashboard/files"},{label:"Distributors",icon:r.jsx(GO,{size:24}),path:"/dashboard/distributors"},{label:"Custom Bill",icon:r.jsx(Ra,{size:24}),path:"/create-custom-bill"},{label:"Patients",icon:r.jsx(Os,{size:24}),path:"/dashboard/patients"},{label:"Debts",icon:r.jsx(hw,{size:24}),path:"/dashboard/patient-debts"}],WH="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",sDe={apiKey:WH},oDe=()=>{const{openCommandBar:t,isOpen:e,setPreFilledQuery:n}=Dc(),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=Lt(),c=b=>{b.stopPropagation(),i(!0)};v.useEffect(()=>{s&&(i(!1),n&&n(s),t(),o(null))},[s,t,n]);const d=ds(),{data:f,isLoading:p}=DN({queryKey:["recentPatients"],queryFn:async()=>{const b=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),j=await se(`/api/patients?${b.toString()}`);if(!j.ok)throw new Error("Failed to fetch recent patients");return j.json()},staleTime:60*1e3});v.useEffect(()=>{d.prefetchQuery({queryKey:Gt.clinicSettings,queryFn:async()=>{const b=await se("/api/clinics/settings");if(!b.ok)throw new Error("Failed to fetch clinic settings");return b.json()},staleTime:30*60*1e3}),d.prefetchQuery({queryKey:Gt.drugs.all,queryFn:async()=>{const b=await se("/api/drugs");if(!b.ok)throw new Error("Failed to fetch drugs");const j=await b.json();return j.drugs||j},staleTime:10*60*1e3}),d.prefetchQuery({queryKey:Gt.labTests.all,queryFn:async()=>{const b=await se("/api/lab-tests");if(!b.ok)throw new Error("Failed to fetch lab tests");return b.json()},staleTime:10*60*1e3})},[d]);const g=(f==null?void 0:f.patients)||[],x=b=>{b&&(d.prefetchQuery({queryKey:Gt.patients.context(b),queryFn:async()=>{const j=await se(`/api/patients/${b}/context`);if(!j.ok)throw new Error("Failed to fetch patient context");return j.json()},staleTime:5*60*1e3}),d.prefetchQuery({queryKey:Gt.dental.records(b),queryFn:async()=>{const j=await se(`/api/dental/patient/${b}`);if(!j.ok)throw new Error("Failed to fetch dental records");return j.json()},staleTime:5*60*1e3}),d.prefetchQuery({queryKey:Gt.patientDebts.balance(b),queryFn:async()=>{const j=await se(`/api/patient-debts/${b}/balance`);return j.ok?j.json():{netDebt:0}},staleTime:1*60*1e3}),d.prefetchQuery({queryKey:Gt.queue.latest(b),queryFn:async()=>{const j=await se(`/api/queue/patient/${b}/latest`);if(!j.ok)throw new Error("Failed to fetch latest queue status");const S=await j.json();return S!=null&&S._id&&d.prefetchQuery({queryKey:Gt.queue.entry(S._id),queryFn:async()=>{const _=await se(`/api/queue/doctor/complaint/${S._id}`);if(!_.ok)throw new Error("Failed to fetch complaint record");return _.json()},staleTime:1*60*1e3}),S},staleTime:5e3}))};return r.jsxs("div",{className:jr.container,children:[!e&&r.jsx("div",{className:jr.mobileDashboardGrid,children:iDe.map((b,j)=>r.jsxs("div",{className:jr.mobileDashboardItem,onClick:()=>l(b.path),children:[r.jsx("div",{className:jr.mobileDashboardIcon,children:b.icon}),r.jsx("span",{className:jr.mobileDashboardLabel,children:b.label})]},j))}),r.jsxs("div",{className:jr.visualContainer,children:[r.jsx("h1",{className:jr.brandTitle,children:"Newtons Ai"}),!e&&r.jsxs("div",{className:jr.searchBar,onClick:()=>t(),children:[r.jsx("div",{className:jr.searchIconWrapper,children:r.jsx(Fn,{className:jr.searchIcon})}),r.jsx("span",{className:jr.placeholderText,children:"Search or Ask AI..."}),r.jsx("div",{className:jr.micButtonWrapper,onClick:c,children:r.jsx(FN,{className:jr.micIcon})}),r.jsxs("div",{className:jr.shortcutHint,children:[r.jsx("span",{className:jr.key,children:"Ctrl"}),r.jsx("span",{className:jr.plus,children:"+"}),r.jsx("span",{className:jr.key,children:"K"})]})]})]}),!e&&(p||g.length>0)&&r.jsxs("div",{className:jr.newlyRegisteredSection,children:[r.jsx("div",{className:jr.newlyRegisteredLabel,children:"Newly Registered"}),r.jsx("div",{className:jr.recentList,children:p?[1,2,3,4,5].map(b=>r.jsxs("div",{className:jr.recentPatientPill,style:{cursor:"default"},children:[r.jsxs("div",{className:jr.recentNameContainer,children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:20})]}),r.jsx("div",{className:jr.recentInfo,children:r.jsx(Z,{width:80,height:14})})]},b)):g.map(b=>r.jsxs("div",{className:jr.recentPatientPill,onClick:()=>l(`/dashboard/edit-complaint/patient/${b.id}`),onMouseEnter:()=>b.id&&x(b.id),children:[r.jsxs("div",{className:jr.recentNameContainer,children:[r.jsx("span",{className:jr.recentName,children:b.name||"New Patient"}),r.jsxs("span",{className:jr.recentToken,children:["#",b.token]})]}),r.jsxs("div",{className:jr.recentInfo,children:[b.age?`${b.age} yrs`:"",b.age&&b.gender?" / ":"",b.gender||""]})]},b.id))})]}),a&&WH&&r.jsx(tS,{options:sDe,children:r.jsx(nS,{onClose:()=>i(!1),patientData:null,tokenNumber:null,onAiSummaryChange:o})})]})},YH=({queueList:t,onPatientClick:e})=>{const i=Array.from({length:13},(o,l)=>8+l),s={};return i.forEach(o=>s[o]=[]),t.forEach(o=>{const c=new Date(o.createdAt).getHours();c>=8&&c<=20&&s[c].push(o)}),r.jsx("div",{className:"appointment-timeline-container",children:i.map(o=>r.jsxs("div",{className:"timeline-hour-row",children:[r.jsx("div",{className:"timeline-time-label",children:r.jsxs("span",{className:"time-text",children:[o>12?o-12:o," ",o>=12?"PM":"AM"]})}),r.jsxs("div",{className:"timeline-track",children:[s[o].length===0?r.jsx("div",{className:"timeline-empty-slot"}):r.jsx("div",{className:"timeline-appointments-group",children:s[o].map(l=>{var c,d;return r.jsxs("div",{className:`timeline-card status-${l.status}`,onClick:()=>e(l),children:[r.jsxs("div",{className:"timeline-card-header",children:[r.jsx("span",{className:"patient-name-card",children:(c=l.Patient)==null?void 0:c.name}),r.jsxs("span",{className:"token-badge",children:["#",l.token_no]})]}),r.jsxs("div",{className:"timeline-card-details",children:[((d=l.Patient)==null?void 0:d.phone)&&r.jsxs("div",{className:"detail-row",children:[r.jsx(eg,{size:12}),r.jsx("span",{children:l.Patient.phone})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx(Tb,{size:12}),r.jsx("span",{children:new Date(l.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),r.jsx("div",{className:`status-line-indicator status-color-${l.status}`})]},l.id)})}),r.jsx("div",{className:"timeline-grid-line"})]})]},o))})},KH=({isOpen:t,onClose:e,onAppointmentBooked:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(""),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(null);v.useEffect(()=>{t&&(i(""),o([]),c(null),f(""),S(null))},[t]);const _=Se.useMemo(()=>qc(async O=>{if(O.length<2){o([]),b(!1);return}b(!0);try{const I=new URLSearchParams({search:encodeURIComponent(O),page:"1",limit:"10"}),F=await se(`/api/patients?${I.toString()}`);if(F.ok){const B=await F.json();o(B.patients||[])}}catch(I){console.error("Error searching patients:",I)}finally{b(!1)}},300),[]),T=O=>{const I=O.target.value;i(I),l&&c(null),I.length>=2?(b(!0),_(I)):o([])},C=O=>{c(O),i(O.name),o([])},E=async()=>{if(a.trim()){g(!0);try{const O=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.trim(),age:null,gender:null,phone:null})});if(!O.ok){const B=await O.json();throw new Error(B.message||"Failed to create patient")}const I=await O.json(),F={id:I.id,name:I.name,phone:I.phone,age:I.age,gender:I.gender,token:I.token};C(F)}catch(O){console.error("Failed to create patient:",O),S(O.message||"Failed to create patient")}finally{g(!1)}}},k=async()=>{if(!l){S("Please select a patient.");return}if(!d){S("Please select a date and time.");return}g(!0),S(null);try{if(!(await se("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id,date:new Date(d).toISOString(),description:"Appointment"})})).ok)throw new Error("Failed to book appointment");n(),e()}catch(O){console.error("Error booking appointment:",O),S(O.message||"Failed to book appointment.")}finally{g(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content appointment-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Book Appointment"}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx($t,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[j&&r.jsx("div",{className:"error-message",children:j}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Search Patient"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Fn,{className:"search-icon-input",size:18}),r.jsx("input",{type:"text",placeholder:"Search by name, phone, or ID...",value:a,onChange:T,className:"modal-input"}),x&&r.jsx("div",{className:"spinner-sm"})]}),(s.length>0||a.length>0&&!x)&&!l&&r.jsxs("div",{className:"search-results-dropdown",children:[a.trim().length>0&&!x&&r.jsx("div",{className:"search-result-item create-patient-item",onClick:E,children:r.jsxs("div",{className:"patient-info",style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx("div",{className:"create-icon-wrapper",children:r.jsx(BN,{size:16,color:"white"})}),r.jsxs("div",{children:[r.jsxs("span",{className:"name",style:{color:"#7c3aed"},children:['Create "',a,'"']}),r.jsx("span",{className:"details",style:{color:"#7c3aed"},children:"Add new patient"})]})]})}),s.map(O=>r.jsxs("div",{className:"search-result-item",onClick:()=>C(O),children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:O.name}),r.jsxs("span",{className:"details",children:[O.age?`${O.age} yrs`:""," ",O.gender?`/ ${O.gender}`:""]})]}),O.phone&&r.jsx("span",{className:"phone",children:O.phone})]},O.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Appointment Date & Time"}),r.jsx("div",{className:"date-input-wrapper",children:r.jsx("input",{type:"datetime-local",className:"modal-input",value:d,onChange:O=>f(O.target.value)})})]}),l&&r.jsxs("div",{className:"selected-patient-preview",children:[r.jsx("div",{className:"preview-label",children:"Selected Patient:"}),r.jsxs("div",{className:"preview-card",children:[r.jsx(Jn,{size:20}),r.jsxs("div",{children:[r.jsx("strong",{children:l.name}),r.jsxs("div",{children:[l.age?`${l.age} yrs`:"-"," / ",l.gender||"-"]})]})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:k,className:"submit-button",disabled:p||!l||!d,children:p?"Booking...":"Book Appointment"})]})]})}):null},lDe=async t=>{const e=t?`/api/queue?date=${t}`:"/api/queue",n=await se(e);if(!n.ok)throw new Error("Failed to fetch queue");return n.json()};function QH(t){return DN({queryKey:["queue",t||"today"],queryFn:()=>lDe(t),staleTime:5e3,refetchInterval:7e3,placeholderData:e=>e,refetchOnMount:"always",refetchOnWindowFocus:!0})}function cDe(){const t=ds();return BW({mutationFn:async({queueId:e,status:n,doctorId:a})=>{const i=await se(`/api/queue/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,doctorId:a})});if(!i.ok)throw new Error("Failed to update queue status");return i.json()},onSuccess:(e,{queueId:n})=>{t.invalidateQueries({queryKey:Gt.queue.today}),t.invalidateQueries({queryKey:Gt.queue.entry(n)})}})}const Uj=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},uDe=t=>{if(!t)return"Unknown Date";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},RA=({title:t,icon:e,items:n,renderItemContent:a,isLoading:i,noDataText:s})=>{const o=v.useMemo(()=>{const l={};n.forEach(d=>{if(isNaN(d.date.getTime())){l["Unknown Date"]||(l["Unknown Date"]=[]),l["Unknown Date"].push(d);return}const f=uDe(d.originalDateString);l[f]||(l[f]=[]),l[f].push(d)});const c=Object.keys(l);return c.sort((d,f)=>{if(d==="Unknown Date")return 1;if(f==="Unknown Date")return-1;try{const p=b=>{const j=b.split(" ");if(j.length===3){const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(j[1]);if(_!==-1)return new Date(parseInt(j[2]),_,parseInt(j[0]))}return new Date(b)},g=p(d),x=p(f);if(!isNaN(g.getTime())&&!isNaN(x.getTime()))return x.getTime()-g.getTime()}catch(p){console.error("Error parsing date for sorting:",p)}return f.localeCompare(d)}),c.map(d=>({date:d,items:l[d]}))},[n]);return r.jsxs("div",{className:"dcp-group-card",children:[r.jsxs("h4",{className:"dcp-group-header",children:[e&&r.jsx(e,{size:14,className:"dcp-group-icon"}),t]}),r.jsxs("div",{className:"dcp-group-content",children:[i&&r.jsx("div",{className:"dcp-history-items",children:[1,2].map(l=>r.jsxs("div",{className:"dcp-history-item",style:{border:"none"},children:[r.jsx(Z,{width:"60%",height:16,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"30%",height:12})]},l))}),!i&&n.length===0&&r.jsx("p",{className:"dcp-history-empty",children:s}),!i&&n.length>0&&r.jsx("div",{children:o.map(({date:l,items:c})=>r.jsxs("div",{className:"dcp-date-group",children:[r.jsx("h5",{className:"dcp-date-label",children:l}),r.jsx("div",{className:"dcp-date-items",children:c.map((d,f)=>r.jsx("div",{className:"dcp-history-item",children:a(d)},`${d.type}-${d.originalDateString}-${f}`))})]},l))})]})]})},Vj=()=>{var Ae,me;const{openCommandBar:t}=Dc(),[e,n]=v.useState(new Date),[a,i]=v.useState("list"),[s,o]=v.useState(!1),l=e.toISOString().split("T")[0],{data:c,isLoading:d,refetch:f,isError:p}=QH(l),g=(c==null?void 0:c.list)||[],x=(c==null?void 0:c.summary)||{currentPatient:null,nextPatient:null,waitingCount:0},b=d,[j,S]=v.useState(!1),[_,T]=v.useState(null),C=()=>{f()},[E,k]=v.useState(null),[O,I]=v.useState(null),[F,B]=v.useState(null),[$,L]=v.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[V,H]=v.useState(!1),[ne,Q]=v.useState(null),{patientId:q}=Fa(),G=Lt(),ie=ds(),W=ye=>{ye&&(ie.prefetchQuery({queryKey:Gt.patients.context(ye),queryFn:async()=>{const le=await se(`/api/patients/${ye}/context`);if(!le.ok)throw new Error("Failed to fetch patient context");return le.json()},staleTime:5*60*1e3}),ie.prefetchQuery({queryKey:Gt.patientDebts.balance(ye),queryFn:async()=>{const le=await se(`/api/patient-debts/${ye}/balance`);return le.ok?le.json():{netDebt:0}},staleTime:1*60*1e3}),ie.prefetchQuery({queryKey:Gt.queue.latest(ye),queryFn:async()=>{const le=await se(`/api/queue/patient/${ye}/latest`);if(!le.ok)throw new Error("Failed to fetch latest queue status");const X=await le.json();return X!=null&&X._id&&ie.prefetchQuery({queryKey:Gt.queue.entry(X._id),queryFn:async()=>{const ae=await se(`/api/queue/doctor/complaint/${X._id}`);if(!ae.ok)throw new Error("Failed to fetch complaint record");return ae.json()},staleTime:1*60*1e3}),X},staleTime:5e3}),ie.prefetchQuery({queryKey:Gt.dental.records(ye),queryFn:async()=>{const le=await se(`/api/dental/patient/${ye}`);if(!le.ok)throw new Error("Failed to fetch dental records");return le.json()},staleTime:5*60*1e3}))},z=v.useCallback(async ye=>{B(null),k(null),I(null),H(!0),Q(null),L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const le=await se(`/api/patients/${ye}`);if(!le.ok)throw new Error(`Patient details fetch failed (${le.status})`);const X=await le.json();k(X);const ae=await se(`/api/queue/patient/${ye}/latest`);if(!ae.ok&&ae.status!==404)throw new Error(`Queue entry fetch failed (${ae.status})`);if(ae.ok){const de=await ae.json();I(de)}await ce(ye)}catch(le){console.error("Error fetching specific patient data:",le),B(le.message||"Failed to load patient data."),Q(le.message||"Failed to load patient history.")}finally{H(!1)}},[]),ce=v.useCallback(async ye=>{H(!0),Q(null);try{const[le,X,ae,de]=await Promise.all([se(`/api/queue/patient/${ye}/complaints`),se(`/api/lab/patient/${ye}`),se(`/api/lab/orders/patient/${ye}?status=pending`),se(`/api/pharmacy-orders/patient/${ye}`)]),ee=le.ok?await le.json():[],Ne=X.ok?await X.json():[],Te=ae.ok?await ae.json():[],Fe=de.ok?await de.json():[];L({pastComplaints:ee||[],labReports:Ne||[],pendingLabOrders:Te||[],pharmacyOrders:Fe||[]})}catch(le){console.error("Error fetching patient history:",le),Q(le.message||"Failed to load patient history."),L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{H(!1)}},[]);v.useEffect(()=>{q?z(q):(k(null),I(null),f())},[q,z,f]),v.useEffect(()=>{var ye;if(!q&&((ye=x.currentPatient)==null?void 0:ye.status)==="consulting"){const le=x.currentPatient._id;le&&G(`/dashboard/edit-complaint/${le}`)}},[q,x.currentPatient,G]),v.useEffect(()=>{var ye;!q&&((ye=x.currentPatient)!=null&&ye.patientId)?ce(x.currentPatient.patientId):!q&&!x.currentPatient&&(L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),H(!1),Q(null))},[q,(Ae=x.currentPatient)==null?void 0:Ae.patientId,ce]);const je=((me=x.currentPatient)==null?void 0:me.patientId)||(q?parseInt(q,10):null),Y=v.useMemo(()=>{if(!je||!$.pastComplaints)return[];const ye=$.pastComplaints.map(le=>({date:new Date(le.createdAt),type:"Complaint",data:le,originalDateString:le.createdAt})).filter(le=>!isNaN(le.date.getTime()));return ye.sort((le,X)=>X.date.getTime()-le.date.getTime()),ye},[je,$.pastComplaints]),Ie=v.useMemo(()=>{if(!je)return[];const ye=[];return($.pendingLabOrders??[]).forEach(le=>{const X=new Date(le.createdAt);isNaN(X.getTime())||ye.push({date:X,type:"Lab Order (Pending)",data:le,originalDateString:le.createdAt})}),($.labReports??[]).forEach(le=>{const X=le.reportCreatedAt?new Date(le.reportCreatedAt):null;X&&!isNaN(X.getTime())&&ye.push({date:X,type:"Lab Report",data:le,originalDateString:le.reportCreatedAt})}),ye.sort((le,X)=>X.date.getTime()-le.date.getTime()),ye},[je,$.pendingLabOrders,$.labReports]),Ue=v.useMemo(()=>{if(!je||!$.pharmacyOrders)return[];const ye=$.pharmacyOrders.map(le=>({date:new Date(le.date),type:"Pharmacy Order",data:le,originalDateString:le.date})).filter(le=>!isNaN(le.date.getTime()));return ye.sort((le,X)=>X.date.getTime()-le.date.getTime()),ye},[je,$.pharmacyOrders]),ze=async()=>{S(!0),T(null);try{await se("/api/queue/doctor/next",{method:"POST"}),await f()}catch(ye){console.error("Error calling next patient:",ye),T(ye.message||"Failed to call next patient.")}finally{S(!1)}},Le=ye=>{switch(ye){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return ye}},[be,Ce]=v.useState("info");return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"dcp-container",children:[r.jsxs("div",{className:"dcp-header-row",children:[r.jsx("button",{onClick:()=>G(-1),className:"dcp-back-btn",children:r.jsx(on,{size:20})}),r.jsx("h1",{className:"dcp-title",children:"Doctor Consultation Panel"})]}),q?r.jsxs(r.Fragment,{children:[F&&r.jsx("div",{className:"dcp-error",children:F}),E&&r.jsx("div",{className:"dcp-card dcp-card-violet",children:r.jsxs("div",{className:"dcp-card-content",children:[r.jsxs("div",{className:"dcp-mobile-tabs",children:[r.jsx("button",{className:`dcp-mobile-tab ${be==="info"?"active":""}`,onClick:()=>Ce("info"),children:"Patient Record"}),r.jsx("button",{className:`dcp-mobile-tab ${be==="history"?"active":""}`,onClick:()=>Ce("history"),children:"History"})]}),r.jsxs("div",{className:"dcp-flex-split",children:[r.jsxs("div",{className:`dcp-flex-half dcp-tab-info ${be==="info"?"":"hidden"}`,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("div",{className:"dcp-section-header dcp-section-header-violet",children:"Patient Record"}),r.jsxs("button",{onClick:()=>G("/dashboard/doctor"),className:"dcp-btn dcp-btn-outline",style:{padding:"4px 10px",fontSize:"0.75rem"},children:[r.jsx(on,{size:12})," Back to Queue"]})]}),r.jsx("div",{className:"dcp-patient-name dcp-patient-name-gradient",children:E.name}),r.jsxs("div",{className:"dcp-patient-meta",style:{marginBottom:"12px"},children:[r.jsxs("span",{className:"dcp-patient-badge",children:[E.age||"N/A"," Yrs"]}),r.jsx("span",{className:"dcp-patient-badge",children:E.gender||"N/A"})]}),r.jsxs("div",{className:"dcp-activity-box",children:[r.jsx("div",{className:"dcp-activity-label",children:"Latest Activity"}),O?r.jsxs("div",{children:[r.jsxs("div",{className:"dcp-activity-content",children:[r.jsx("strong",{children:"Complaint:"})," ",O.complaint||r.jsx("span",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"None"})]}),r.jsxs("div",{style:{marginTop:"8px"},children:[r.jsx("span",{className:`dcp-status ${O.status==="consulting"?"dcp-status-consulting":O.status==="seen"?"dcp-status-seen":O.status==="waiting"?"dcp-status-waiting":""}`,children:Le(O.status)}),O.status==="consulting"&&O._id&&r.jsx("button",{onClick:()=>G(`/dashboard/edit-complaint/${O._id}`),onMouseEnter:()=>W(String(E.id)),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px",padding:"4px 12px"},children:"Resume"})]}),_&&r.jsx("div",{className:"dcp-error-card",style:{marginBottom:"16px"},children:_}),O.case_summary&&r.jsxs("div",{className:"dcp-ai-summary",style:{marginTop:"10px"},children:[r.jsx("div",{className:"dcp-ai-label",children:" AI Summary"}),r.jsx("p",{className:"dcp-ai-text",children:O.case_summary})]})]}):r.jsx("p",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"No queue entry found for this patient today."})]})]}),r.jsxs("div",{className:`dcp-flex-half dcp-history-section dcp-tab-history ${be==="history"?"":"hidden"} dcp-desktop-only`,children:[r.jsxs("div",{className:"dcp-history-header",children:[r.jsx("span",{className:"dcp-history-title",children:"Patient History"}),V&&r.jsx(Z,{width:60,height:14})]}),ne&&r.jsx("div",{className:"dcp-error",children:ne}),r.jsxs("div",{className:"dcp-history-scroll dcp-scrollbar",children:[r.jsx(RA,{title:"Past Complaints",icon:Ra,items:Y,isLoading:V,noDataText:"No past complaints.",renderItemContent:ye=>r.jsxs("div",{children:[ye.data.complaint,r.jsx("div",{className:"dcp-history-timestamp",children:Uj(ye.originalDateString)})]})}),r.jsx(RA,{title:"Lab Reports",icon:ls,items:Ie,isLoading:V,noDataText:"No lab history.",renderItemContent:ye=>ye.type==="Lab Order (Pending)"?r.jsxs("div",{children:[r.jsx("span",{className:"dcp-type-pending",children:"Pending Order"}),r.jsx("div",{children:ye.data.tests.map(le=>le.name).join(", ")}),r.jsx("div",{className:"dcp-history-timestamp",children:Uj(ye.originalDateString)})]}):r.jsxs("div",{children:[r.jsxs("span",{className:"dcp-type-report",children:["Report: ",ye.data.testName]}),r.jsxs("div",{style:{fontStyle:"italic"},children:['"',ye.data.reportFindings.substring(0,50),ye.data.reportFindings.length>50?"...":"",'"']}),r.jsx("div",{className:"dcp-history-timestamp",children:Uj(ye.originalDateString)})]})}),r.jsx(RA,{title:"Medications",icon:ud,items:Ue,isLoading:V,noDataText:"No pharmacy history.",renderItemContent:ye=>r.jsxs("div",{children:[ye.data.medications.map(le=>`${le.name} (${le.pack_quantity||0}p ${le.loose_quantity||0}l)`).join(", "),r.jsxs("div",{className:"dcp-history-timestamp",children:[Uj(ye.originalDateString),"  ",r.jsx("span",{style:{textTransform:"capitalize"},children:ye.data.status})]})]})}),Y.length===0&&Ie.length===0&&Ue.length===0&&!V&&r.jsx("div",{className:"dcp-empty-state",children:"No history records found."})]})]})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[p&&r.jsx("div",{className:"dcp-error",children:"Failed to fetch queue data."}),b&&!x.currentPatient?r.jsxs("div",{className:"dcp-card",style:{padding:"2rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx(Z,{width:"40%",height:32}),r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx(Z,{width:"60%",height:24}),r.jsx(Z,{width:"40%",height:16,style:{marginTop:"8px"}})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsx(Z,{width:"100%",height:80,style:{borderRadius:"12px"}})}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[r.jsx(Z,{width:180,height:40}),r.jsx(Z,{width:120,height:40})]})]}):r.jsx("div",{className:"dcp-empty-state",children:x.currentPatient?"Redirecting to consultation...":"No patient currently being seen. Use 'Call Next' or search for a patient record."})]}),r.jsxs("div",{className:"dcp-scheduler-section",children:[r.jsx("div",{className:"queue-header",children:r.jsx("div",{className:"queue-actions",children:r.jsxs("div",{className:"controls-row",children:[r.jsxs("div",{className:"view-toggle-container",children:[r.jsx("button",{className:`view-toggle-btn ${a==="list"?"active":""}`,onClick:()=>i("list"),title:"List View",children:r.jsx($z,{size:16})}),r.jsx("button",{className:`view-toggle-btn ${a==="timeline"?"active":""}`,onClick:()=>i("timeline"),title:"Timeline View",children:r.jsx(VO,{size:16})})]}),r.jsxs("div",{className:"date-picker-container",children:[r.jsx(ua,{size:16,className:"text-gray-500"}),r.jsx("input",{type:"date",className:"date-input",value:e.toISOString().split("T")[0],onChange:ye=>n(new Date(ye.target.value))})]}),r.jsxs("button",{onClick:()=>o(!0),className:"appointment-button",children:[r.jsx(Tb,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),r.jsx("span",{className:"sm:hidden",children:"Book"})]}),r.jsx("button",{onClick:()=>t(),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px"},children:"Search Patient"})]})})}),r.jsx(KH,{isOpen:s,onClose:()=>{o(!1),f()},onAppointmentBooked:C}),d&&g.length===0?r.jsx("div",{style:{padding:"20px"},children:r.jsx(Z,{width:"100%",height:200})}):a==="timeline"?r.jsx(YH,{queueList:g,onPatientClick:ye=>G(`/dashboard/edit-complaint/${ye.id}`)}):r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Details"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:g.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"20px"},children:"No appointments for this date."})}):g.map(ye=>{var le,X,ae;return r.jsxs("tr",{onClick:()=>G(`/dashboard/edit-complaint/${ye.id}`),className:"queue-row-clickable",children:[r.jsxs("td",{children:["#",ye.token_no]}),r.jsx("td",{children:r.jsx("div",{className:"patient-info",children:r.jsx("span",{className:"name",children:(le=ye.Patient)==null?void 0:le.name})})}),r.jsxs("td",{className:"hidden-mobile",children:[(X=ye.Patient)==null?void 0:X.age,"y, ",(ae=ye.Patient)==null?void 0:ae.gender,"  ",ye.complaint||"-"]}),r.jsx("td",{children:r.jsx("span",{className:`dcp-status ${ye.status==="waiting"?"dcp-status-waiting":ye.status==="consulting"?"dcp-status-consulting":ye.status==="seen"?"dcp-status-seen":""}`,children:Le(ye.status)})}),r.jsx("td",{children:r.jsx("button",{className:"dcp-btn dcp-btn-outline",style:{padding:"4px 8px",fontSize:"0.75rem"},children:"View"})})]},ye.id)})})]})})]}),r.jsxs("div",{className:"dcp-bottom-bar",children:[r.jsx("button",{onClick:ze,disabled:j||b||!x.nextPatient||!!x.currentPatient,className:"dcp-btn dcp-btn-teal",children:"Call Next Patient"}),r.jsxs("div",{className:"dcp-waiting-count",children:[x.waitingCount," patients waiting"]})]})]})]})})},dDe="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",hDe={apiKey:dDe},gv=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(null),g=v.useRef(null),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_,T]=v.useState(null),[C,E]=v.useState(null),[k,O]=v.useState([]),[I,F]=v.useState(!0),[B,$]=v.useState(!1);Yc();const L=Lt(),V=$r(),H=fD({settings:{},staffList:[]}),ne=ds(),Q=me=>{me&&(ne.prefetchQuery({queryKey:Gt.patients.context(me),queryFn:async()=>{const ye=await se(`/api/patients/${me}/context`);if(!ye.ok)throw new Error("Failed to fetch patient context");return ye.json()},staleTime:5*60*1e3}),ne.prefetchQuery({queryKey:Gt.patientDebts.balance(me),queryFn:async()=>{const ye=await se(`/api/patient-debts/${me}/balance`);return ye.ok?ye.json():{netDebt:0}},staleTime:1*60*1e3}),ne.prefetchQuery({queryKey:Gt.queue.latest(me),queryFn:async()=>{const ye=await se(`/api/queue/patient/${me}/latest`);if(!ye.ok)throw new Error("Failed to fetch latest queue status");const le=await ye.json();return le!=null&&le._id&&ne.prefetchQuery({queryKey:Gt.queue.entry(le._id),queryFn:async()=>{const X=await se(`/api/queue/doctor/complaint/${le._id}`);if(!X.ok)throw new Error("Failed to fetch complaint record");return X.json()},staleTime:1*60*1e3}),le},staleTime:5e3}),ne.prefetchQuery({queryKey:Gt.dental.records(me),queryFn:async()=>{const ye=await se(`/api/dental/patient/${me}`);if(!ye.ok)throw new Error("Failed to fetch dental records");return ye.json()},staleTime:5*60*1e3}))},{selectedImage:q,handleImageSelect:G,clearImage:ie}=H,W=v.useRef(null),z=me=>{var le;const ye=(le=me.target.files)==null?void 0:le[0];ye&&G(ye)};v.useEffect(()=>{H.chatHistory.length>0&&B&&H.isProcessing},[H.chatHistory.length]),v.useEffect(()=>{(async()=>{F(!0);try{const ye=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),le=await se(`/api/patients?${ye.toString()}`);if(le.ok){const X=await le.json();O(X.patients||[])}}catch(ye){console.error("Error fetching recent patients:",ye)}finally{F(!1)}})()},[]),v.useEffect(()=>{H.setChatQuery(t)},[t]);const ce=v.useCallback(async me=>{if(!(me||t).trim()){p("Please enter complaint details.");return}d(!0),p(null),me&&me!==H.chatQuery&&H.setChatQuery(me);try{H.handleSendMessage(),e("")}catch(le){console.error("AI Error:",le),p("AI failed to process. Try again."),d(!1)}},[t,H]);v.useEffect(()=>{!H.isProcessing&&c&&d(!1)},[H.isProcessing,c]),v.useEffect(()=>{const me=g.current;me&&(me.style.height="auto",me.style.height=`${me.scrollHeight}px`);const le=new URLSearchParams(V.search).get("caseDetails");if(le){const X=decodeURIComponent(le);X!==t&&(e(X),b(!0))}},[V.search,t]),v.useEffect(()=>{x&&t.trim()&&(L(V.pathname,{replace:!0}),ce(t),b(!1))},[x,t,ce,L,V.pathname]),v.useEffect(()=>{const me=g.current;me&&(me.style.height="auto",me.style.height=`${me.scrollHeight}px`)},[t]),v.useEffect(()=>{_&&(e(_),S(!1),H.setChatQuery(_),setTimeout(()=>H.handleSendMessage(),0),T(null))},[_,H]);const je=()=>{E({id:null,token:null,name:"New Case",age:null,gender:null}),S(!0)},Y=v.useMemo(()=>qc(async me=>{const ye=me.trim(),le=/^\d+$/.test(ye),X=ye.split(/\s+/).length;if(ye.length<2||le&&ye.length>10||!le&&X>2){a([]),s(!1),l(null);return}s(!0),l(null);try{const ae=new URLSearchParams({search:encodeURIComponent(me),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),de=await se(`/api/patients?${ae.toString()}`);if(!de.ok){const Ne=await de.text();throw new Error(`API Error (${de.status}): ${Ne||de.statusText}`)}const ee=await de.json();a(ee.patients)}catch(ae){console.error("Error searching patients:",ae),l(ae.message||"Failed to search patients."),a([])}finally{s(!1)}},300),[]),Ie=me=>{const ye=me.target.value;e(ye);const le=ye.trim(),X=/^\d+$/.test(le),ae=le.split(/\s+/).length;le.length>=2&&!(X&&le.length>10||!X&&ae>2)?s(!0):(s(!1),a([])),Y(ye)},Ue=me=>{me.key==="Enter"&&!me.shiftKey&&(me.preventDefault(),t.trim()&&!i&&Ae())},ze=async me=>{me&&me.id&&L(`/dashboard/edit-complaint/patient/${me.id}`)},Le=[{icon:"",title:"Example: Fever & Cold",description:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough",text:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough"},{icon:"",title:"Example: Stomach Ache",description:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days",text:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days"}],be=me=>{e(me),setTimeout(()=>{H.handleSendMessage(me),e(""),a([])},50)},Ce=()=>{e(""),a([]),H.refreshChat()},Ae=()=>{!t.trim()&&!q||(Y.cancel(),H.handleSendMessage(t),e(""),a([]))};return r.jsxs("div",{className:"patient-search-page-container",children:[r.jsxs("div",{className:"patient-search-header",children:[r.jsx("button",{onClick:()=>L("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"}),r.jsx("button",{onClick:()=>L(-1),className:"patient-search-button patient-search-button-back",children:r.jsx(on,{size:16})})]}),r.jsxs("div",{className:"patient-search-content-box",children:[o&&r.jsx("p",{className:"patient-search-error",children:o}),f&&r.jsx("p",{className:"patient-search-error",children:f}),I?r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:[1,2,3,4,5].map(me=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:14})]}),r.jsx("div",{className:"recent-info",children:r.jsx(Z,{width:60,height:12})})]},me))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}):k.length>0&&r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:k.map(me=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>ze(me),onMouseEnter:()=>me.id&&Q(me.id),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:me.name||"New Patient"}),r.jsxs("span",{className:"recent-token",children:["#",me.token]})]}),r.jsxs("div",{className:"recent-info",children:[me.age," yrs / ",me.gender]})]},me.id))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}),H.chatHistory.length===0&&n.length===0&&r.jsxs("div",{className:"example-cases-section",children:[r.jsxs("div",{className:"example-cases-header",children:[r.jsx("span",{className:"sparkles-icon",children:""}),r.jsx("h3",{children:"Try AI with Example Cases"})]}),r.jsx("div",{className:"example-cards-container",children:Le.map((me,ye)=>r.jsxs("div",{className:"example-case-card",onClick:()=>be(me.text),children:[r.jsx("div",{className:"example-icon",children:me.icon}),r.jsxs("div",{className:"example-content",children:[r.jsx("div",{className:"example-title",children:me.title}),r.jsx("div",{className:"example-description",children:me.description})]})]},ye))})]})]}),H.chatHistory.length>0&&!c&&r.jsxs("div",{className:`ai-chat-overlay ${B?"minimized":""}`,children:[r.jsxs("div",{className:"ai-chat-header",children:[r.jsx("span",{children:"AI Assistant"}),r.jsx("div",{className:"ai-chat-controls",children:r.jsx("button",{className:"icon-btn",onClick:()=>Ce(),title:"Clear Chat",children:r.jsx($t,{size:16})})})]}),r.jsxs("div",{className:"ai-chat-messages",children:[H.chatHistory.map((me,ye)=>r.jsx("div",{className:`chat-bubble ${me.role==="model"?"model":"user"}`,children:me.role==="system"?r.jsx("i",{children:me.text}):me.text},ye)),H.isProcessing&&r.jsx("div",{className:"chat-bubble model",children:"Typing..."})]})]}),n.length>0&&!c&&r.jsxs("div",{className:"patient-search-results-overlay",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem"},children:[r.jsx("div",{style:{fontWeight:600,color:"#64748b"},children:"Found Patients"}),r.jsx("button",{onClick:()=>a([]),style:{border:"none",background:"transparent",color:"#94a3b8",cursor:"pointer"},children:r.jsx($t,{size:14})})]}),n.map(me=>r.jsxs("div",{onClick:()=>ze(me),onMouseEnter:()=>me.id&&Q(me.id),className:"patient-search-result-item",children:[r.jsxs("div",{className:"patient-search-result-item-name-container",children:[r.jsxs("span",{className:"patient-search-result-item-token",children:["[#",me.token,"]"]}),r.jsx("span",{className:"patient-search-result-item-name",children:me.name})]}),r.jsxs("div",{className:"patient-search-result-item-details",children:[me.age?`${me.age} yrs`:"",me.age&&me.gender?" / ":"",me.gender||"N/A"]})]},me.id))]}),r.jsxs("div",{className:"sticky-chat-input-box",children:[r.jsxs("div",{className:"cmd-input-container",children:[q&&r.jsxs("div",{className:"cmd-image-preview",children:[r.jsx("img",{src:q,alt:"Selected"}),r.jsx("button",{className:"cmd-image-delete",onClick:ie,children:r.jsx($t,{size:12})})]}),r.jsx("textarea",{ref:g,placeholder:"Search (Name/Token/Phone), Ask AI, or Enter New Case...",value:t,onChange:Ie,onKeyDown:Ue,className:"cmd-input",disabled:c||H.isProcessing,rows:1}),r.jsxs("div",{className:"cmd-controls-group",children:[r.jsx("input",{type:"file",ref:W,onChange:z,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:"cmd-icon-btn",onClick:()=>{var me;return(me=W.current)==null?void 0:me.click()},title:"Attach Image",children:r.jsx(HO,{})}),r.jsx("button",{className:"cmd-icon-btn",onClick:je,title:"Voice Input",children:r.jsx(FN,{})}),(t.length>0||q)&&r.jsx("button",{className:"cmd-icon-btn send-btn",onClick:Ae,title:"Send",children:r.jsx($N,{})})]})]}),j&&r.jsx(tS,{options:hDe,children:r.jsx(nS,{onClose:()=>S(!1),patientData:C,tokenNumber:null,onAiSummaryChange:T})})]})]})},PM=()=>{const[t,e]=v.useState(""),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(!1),c=Lt(),d=v.useRef(null);v.useEffect(()=>{const C=E=>{d.current&&!d.current.contains(E.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const f=v.useCallback(f9.debounce(async C=>{if(C.trim().length<2){a([]),s(!1);return}s(!0);try{const E=new URLSearchParams({search:encodeURIComponent(C),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),k=await se(`/api/patients?${E.toString()}`);if(!k.ok)throw new Error("Failed to fetch patients");const O=await k.json();a(O.patients)}catch{a([])}finally{s(!1)}},400),[]);v.useEffect(()=>(t?(s(!0),f(t)):(a([]),f.cancel(),s(!1)),()=>f.cancel()),[t,f]);const p=C=>{c(`/patient/${encodeURIComponent(C.id)}/admission-billing`)},g=()=>{e(""),a([]),l(!1)},x=C=>C.slice(0,1).toUpperCase(),[b,j]=v.useState(!1),[S,_]=v.useState(!1),T=async()=>{_(!0);try{const C=await se("/api/patients/discharge-all",{method:"POST"}),E=await C.json();C.ok?(alert(E.message),a([]),e("")):alert(E.message||"Failed to discharge patients")}catch(C){console.error("Bulk discharge error:",C),alert("An error occurred while processing bulk discharge.")}finally{_(!1),j(!1)}};return r.jsxs("div",{className:"ma-container",children:[r.jsxs("div",{className:"ma-header-section",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ma-title",children:"Manage Admission"}),r.jsx("p",{className:"ma-subtitle",children:"Search for a patient to admit, discharge, or view billing details"})]}),r.jsx("button",{className:"ma-discharge-all-btn",onClick:()=>j(!0),children:"Discharge Everyone"})]}),b&&r.jsx("div",{className:"ma-modal-overlay",children:r.jsxs("div",{className:"ma-modal-content",children:[r.jsx("h3",{children:"Confirm Bulk Discharge"}),r.jsxs("p",{children:["Are you sure you want to discharge ",r.jsx("strong",{children:"ALL"})," currently admitted patients?"]}),r.jsx("div",{className:"ma-modal-warning",children:r.jsx("p",{children:" This will finalize bills for all admitted patients."})}),r.jsxs("div",{className:"ma-modal-actions",children:[r.jsx("button",{className:"ma-modal-cancel",onClick:()=>j(!1),disabled:S,children:"Cancel"}),r.jsx("button",{className:"ma-modal-confirm",onClick:T,disabled:S,children:S?"Processing...":"Yes, Discharge All"})]})]})}),r.jsxs("div",{className:"ma-search-wrapper",ref:d,children:[i?r.jsxs("div",{className:"ma-loading-spinner",children:[r.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e2e8f0",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]}):r.jsx(Fn,{className:"ma-search-icon",size:20}),r.jsx("input",{type:"text",value:t,onChange:C=>{e(C.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search by Name, Phone, or Token...",className:"ma-search-input",autoFocus:!0}),t&&r.jsx("div",{className:"ma-clear-icon",onClick:g,children:r.jsx($t,{size:18})}),r.jsxs("div",{className:`ma-results-dropdown ${o&&(n.length>0||i)?"open":""}`,children:[n.map(C=>{const E=C.admission_date&&!C.discharge_date;return r.jsxs("div",{onClick:()=>p(C),className:"ma-result-item",children:[r.jsxs("div",{className:"ma-patient-info",children:[r.jsx("div",{className:"ma-avatar",children:x(C.name)}),r.jsxs("div",{className:"ma-patient-text",children:[r.jsxs("h4",{children:[C.name,r.jsxs("span",{className:"ma-patient-token",children:["#",C.token]})]}),r.jsxs("p",{className:"ma-patient-subtext",children:[C.phone||"No phone","  ",C.age?`${C.age} Y`:"","  ",C.gender||""]})]})]}),r.jsx("div",{className:`ma-badge ${E?"ma-badge-admitted":"ma-badge-discharged"}`,children:E?"ADMITTED":"NOT ADMITTED"})]},C.id)}),t.length>2&&!i&&n.length===0&&r.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:['No patients found matching "',t,'"']})]})]})]})},xB=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"boolean",label:"Yes/No"},{value:"computed",label:"Computed (Formula)"}],OM=({isOpen:t,onClose:e,entityType:n,entityLabel:a,currentConfig:i,onConfigUpdated:s})=>{const[o,l]=v.useState([]),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState({key:"",label:"",type:"text",required:!1,formula:""});v.useEffect(()=>{t&&(l(i[n]||[]),p(null),x({key:"",label:"",type:"text",required:!1,formula:""}))},[t,i,n]);const b=T=>T.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_"),j=()=>{var C;if(!g.label.trim()){p("Column label is required");return}if(g.type==="computed"&&!((C=g.formula)!=null&&C.trim())){p("Formula is required for computed columns");return}const T=b(g.label);if(o.some(E=>E.key===T)){p("A column with this name already exists");return}l([...o,{...g,key:T}]),x({key:"",label:"",type:"text",required:!1,formula:""}),p(null)},S=T=>{l(o.filter(C=>C.key!==T))},_=async()=>{d(!0),p(null);try{const T={...i,[n]:o};if(!(await se("/api/clinics/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_columns_config:T})})).ok)throw new Error("Failed to save custom columns");s(T),e()}catch(T){p(T.message||"Failed to save")}finally{d(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content manage-columns-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:["Manage Custom Columns - ",a]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx($t,{size:24})})]}),f&&r.jsx("div",{className:"error-message",children:f}),r.jsxs("div",{className:"columns-list",children:[r.jsx("h4",{children:"Current Custom Columns"}),o.length===0?r.jsx("p",{className:"no-columns",children:"No custom columns defined yet."}):r.jsxs("table",{className:"columns-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Label"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:o.map(T=>{var C;return r.jsxs("tr",{children:[r.jsx("td",{children:T.label}),r.jsx("td",{children:((C=xB.find(E=>E.value===T.type))==null?void 0:C.label)||T.type}),r.jsx("td",{children:T.type==="computed"?r.jsx("code",{className:"computed-formula",children:T.formula}):T.required?"Required":"Optional"}),r.jsx("td",{children:r.jsx("button",{onClick:()=>S(T.key),className:"remove-column-btn",title:"Remove Column",children:r.jsx(Vn,{size:16})})})]},T.key)})})]})]}),r.jsxs("div",{className:"add-column-section",children:[r.jsx("h4",{children:"Add New Column"}),r.jsxs("div",{className:"add-column-form",children:[r.jsx("input",{type:"text",placeholder:"Column Label (e.g., BMI)",value:g.label,onChange:T=>x({...g,label:T.target.value}),className:"column-input"}),r.jsx("select",{value:g.type,onChange:T=>x({...g,type:T.target.value}),className:"column-select",children:xB.map(T=>r.jsx("option",{value:T.value,children:T.label},T.value))}),g.type==="computed"?r.jsx("input",{type:"text",placeholder:"Formula (e.g. weight / (height * height))",value:g.formula||"",onChange:T=>x({...g,formula:T.target.value}),className:"column-input",style:{flex:2}}):r.jsxs("label",{className:"required-checkbox",children:[r.jsx("input",{type:"checkbox",checked:g.required,onChange:T=>x({...g,required:T.target.checked})}),"Required"]}),r.jsxs("button",{onClick:j,className:"add-column-btn",children:[r.jsx(Gn,{size:16})," Add"]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:e,className:"cancel-btn",disabled:c,children:"Cancel"}),r.jsxs("button",{onClick:_,className:"save-btn",disabled:c,children:[r.jsx(cs,{size:16})," ",c?"Saving...":"Save Changes"]})]})]})}):null},LA=15,wO=()=>{const t=Lt(),{customColumnsConfig:e,refetch:n}=rS(),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(!0),[d,f]=v.useState(null),[p,g]=v.useState(""),[x,b]=v.useState(1),[j,S]=v.useState(1),[_,T]=v.useState(0),[C,E]=v.useState("created_at"),k=ds(),O=ee=>{ee&&(k.prefetchQuery({queryKey:Gt.patients.context(ee),queryFn:async()=>{const Ne=await se(`/api/patients/${ee}/context`);if(!Ne.ok)throw new Error("Failed to fetch patient context");return Ne.json()},staleTime:5*60*1e3}),k.prefetchQuery({queryKey:Gt.patientDebts.balance(ee),queryFn:async()=>{const Ne=await se(`/api/patient-debts/${ee}/balance`);return Ne.ok?Ne.json():{netDebt:0}},staleTime:1*60*1e3}),k.prefetchQuery({queryKey:Gt.queue.latest(ee),queryFn:async()=>{const Ne=await se(`/api/queue/patient/${ee}/latest`);if(!Ne.ok)throw new Error("Failed to fetch latest queue status");const Te=await Ne.json();return Te!=null&&Te._id&&k.prefetchQuery({queryKey:Gt.queue.entry(Te._id),queryFn:async()=>{const Fe=await se(`/api/queue/doctor/complaint/${Te._id}`);if(!Fe.ok)throw new Error("Failed to fetch complaint record");return Fe.json()},staleTime:1*60*1e3}),Te},staleTime:5e3}),k.prefetchQuery({queryKey:Gt.dental.records(ee),queryFn:async()=>{const Ne=await se(`/api/dental/patient/${ee}`);if(!Ne.ok)throw new Error("Failed to fetch dental records");return Ne.json()},staleTime:5*60*1e3}))},[I,F]=v.useState("desc"),[B,$]=v.useState(""),[L,V]=v.useState(!1),[H,ne]=v.useState(null),[Q,q]=v.useState([]),[G,ie]=v.useState(""),[W,z]=v.useState(!1),[ce,je]=v.useState(null),[Y,Ie]=v.useState(!0),[Ue,ze]=v.useState(null),[Le,be]=v.useState(p);Yc(),v.useEffect(()=>{const ee=setTimeout(()=>{be(p),b(1)},500);return()=>{clearTimeout(ee)}},[p]);const Ce=v.useCallback(async()=>{Ie(!0),ze(null);try{const ee=await se("/api/subscriptions");if(!ee.ok){let Te=`Failed to fetch subscription plans (${ee.status})`;try{Te=(await ee.json()).message||Te}catch{}throw new Error(Te)}const Ne=await ee.json();q(Ne)}catch(ee){console.error("Error fetching subscription plans:",ee),ze(ee.message||"An unknown error occurred while fetching plans."),q([])}finally{Ie(!1)}},[]),Ae=v.useCallback(async(ee,Ne,Te,Fe,xe)=>{c(!0),f(null);try{const te=new URLSearchParams({page:ee.toString(),limit:LA.toString(),sortBy:Te,sortOrder:Fe});Ne&&te.append("search",Ne),xe&&te.append("gender",xe);const oe=await se(`/api/patients?${te.toString()}`);if(!oe.ok){const Oe=await oe.json();throw new Error(Oe.message||"Failed to fetch patients")}const _e=await oe.json();o(_e.patients),T(_e.totalCount),b(_e.currentPage),S(_e.totalPages)}catch(te){console.error("Error fetching patients:",te),f(`Failed to load patients: ${te.message}`),o([]),T(0),b(1),S(1)}finally{c(!1)}},[]);v.useEffect(()=>{Ae(x,Le,C,I,B),Ce()},[x,Le,C,I,B,Ae,Ce]);const me=ee=>{const Ne=C===ee&&I==="asc"?"desc":"asc";E(ee),F(Ne),b(1)},ye=ee=>{try{return new Date(ee).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},le=()=>{V(!1),ne(null),ie(""),je(null),z(!1)},X=async(ee,Ne)=>{o(Te=>Te.map(Fe=>Fe.id===ee?{...Fe,insurance_type:Ne}:Fe));try{const Te=await se(`/api/patients/${ee}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:Ne})});if(!Te.ok){const Fe=await Te.json();throw new Error(Fe.message||"Failed to update insurance type")}}catch(Te){console.error("Error updating insurance type:",Te),Ae(x,Le,C,I,B)}},ae=(ee,Ne)=>{const Te=new Date(ee),Fe=Ne.interval||1;switch(Ne.period){case"daily":Te.setDate(ee.getDate()+Fe);break;case"weekly":Te.setDate(ee.getDate()+Fe*7);break;case"monthly":Te.setMonth(ee.getMonth()+Fe);break;case"yearly":Te.setFullYear(ee.getFullYear()+Fe);break;default:console.warn(`Unknown subscription period: ${Ne.period}. Defaulting to 1 month.`),Te.setMonth(ee.getMonth()+1)}return Te},de=async()=>{if(!H||!G){je("Please select a subscription plan.");return}const ee=Q.find(Ne=>Ne.id===G);if(!ee){je("Selected plan details not found.");return}z(!0),je(null);try{const Ne=new Date,Te=ae(Ne,ee),Fe={subscription_plan_id:G,subscription_status:"active",subscription_start_date:Ne.toISOString(),subscription_end_date:Te.toISOString(),subscription_payment_method:"manual"},xe=await se(`/api/patients/${H.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(!xe.ok){const te=await xe.json();throw new Error(te.message||"Failed to update patient subscription")}le(),Ae(x,Le,C,I,B)}catch(Ne){console.error("Error starting subscription:",Ne),je(`Failed to start subscription: ${Ne.message}`)}finally{z(!1)}};return r.jsxs("div",{className:"all-patients-container",children:[r.jsxs("div",{className:"all-patients-header-section",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:16})}),r.jsxs("h1",{className:"all-patients-title",children:[r.jsx(Jn,{size:28}),"All Patients"]})]}),r.jsxs("div",{className:"controls-container",children:[!Y&&!Ue&&Q.length>0&&r.jsx("div",{className:"compact-subscriptions",children:Q.map(ee=>r.jsxs("span",{className:"plan-chip",title:`${ee.name}: ${ee.price} / ${ee.interval} ${ee.period}${ee.description?" - "+ee.description:""}`,children:[ee.name,": ",ee.price]},ee.id))}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search...",className:"search-input",value:p,onChange:ee=>g(ee.target.value)}),r.jsx(Fn,{className:"search-input-icon",size:16})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("div",{className:"filter-select-container",children:[r.jsx(bX,{size:14,className:"filter-select-icon"}),r.jsxs("select",{id:"genderFilter",value:B,onChange:ee=>$(ee.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Gender"}),r.jsx("option",{value:"M",children:"M"}),r.jsx("option",{value:"F",children:"F"}),r.jsx("option",{value:"O",children:"O"})]})]})}),r.jsxs("button",{onClick:()=>i(!0),className:"action-button",title:"Manage Custom Columns",children:[r.jsx(dd,{size:14})," Columns"]})]})]}),d&&r.jsxs("div",{className:"error-alert",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:d})]}),l?r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:50,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{className:"patient-name",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:120,height:20})]})}),r.jsx("td",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:32})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:32,style:{borderRadius:"4px"}})})]},ee))})]})}):s.length===0?r.jsx("div",{className:"empty-state",children:Le?"No patients found matching your search.":"No patients registered yet."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsxs("th",{className:"sortable-header",onClick:()=>me("name"),children:["Name",C==="name"&&(I==="asc"?r.jsx(bI,{size:14,className:"sort-icon"}):r.jsx(vI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Age"}),r.jsx("th",{children:"Gender"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Address"}),r.jsxs("th",{className:"sortable-header",onClick:()=>me("created_at"),children:["Registered On",C==="created_at"&&(I==="asc"?r.jsx(bI,{size:14,className:"sort-icon"}):r.jsx(vI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Insurance Type"})," ",r.jsx("th",{children:"Action"})," "]})}),r.jsx("tbody",{children:s.map(ee=>r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{className:"patient-row clickable-row",onClick:()=>t(`/dashboard/edit-complaint/patient/${ee.id}`),onMouseEnter:()=>O(ee.id),children:[r.jsx("td",{children:ee.token??"-"}),r.jsx("td",{className:"patient-name",children:ee.name}),r.jsx("td",{children:ee.age??"-"}),r.jsx("td",{children:ee.gender??"-"}),r.jsx("td",{children:ee.phone??"-"}),r.jsx("td",{children:ee.address??"-"}),r.jsx("td",{children:ye(ee.created_at)}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${ee.subscription_status==="active"?"active":ee.subscription_status==="cancelled"||ee.subscription_status==="expired"?"inactive":"none"}`,children:ee.subscription_status??"None"})}),r.jsx("td",{children:r.jsxs("select",{value:ee.insurance_type,onClick:Ne=>Ne.stopPropagation(),onChange:Ne=>X(ee.id,Ne.target.value),className:"form-select insurance-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),r.jsx("td",{children:r.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),t(`/start-subscription/${ee.id}`)},className:"action-button",children:"Start Sub"})})]}),e.patients&&e.patients.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:10,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:e.patients.map(Ne=>{var Te;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[Ne.label,":"]})," ",(Te=ee.custom_fields)!=null&&Te[Ne.key]?String(ee.custom_fields[Ne.key]):"-"]},Ne.key)})})})})]},ee.id))})]})}),j>1&&r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("div",{className:"pagination-info",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(x-1)*LA+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(x*LA,_)})," ","of"," ",r.jsx("span",{className:"font-medium",children:_})," results"]}),r.jsxs("div",{className:"pagination-buttons",children:[r.jsxs("button",{onClick:()=>b(ee=>Math.max(ee-1,1)),disabled:x===1||l,className:"pagination-button",children:[r.jsx(Cb,{size:16,className:"prev-icon"}),"Previous"]}),r.jsxs("span",{className:"pagination-current-page",children:["Page ",r.jsx("span",{className:"font-medium",children:x})," of ",r.jsx("span",{className:"font-medium",children:j})]}),r.jsxs("button",{onClick:()=>b(ee=>Math.min(ee+1,j)),disabled:x===j||l,className:"pagination-button",children:["Next",r.jsx(pd,{size:16,className:"next-icon"})]})]})]})]}),L&&H&&r.jsx("div",{className:"subscription-modal-overlay",children:r.jsxs("div",{className:"subscription-modal-content",children:[r.jsxs("div",{className:"subscription-modal-header",children:[r.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",H.name]}),r.jsx("button",{onClick:le,className:"subscription-modal-close-button",children:r.jsx($t,{size:24})})]}),ce&&r.jsx("div",{className:"error-alert",role:"alert",children:r.jsx("span",{children:ce})}),r.jsxs("div",{className:"subscription-modal-body",children:[r.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),r.jsxs("select",{id:"subscriptionPlan",value:G,onChange:ee=>ie(ee.target.value),className:"form-select",disabled:W||Y||Ue!==null||Q.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),Y?r.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):Ue?r.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):Q.length>0?Q.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.name," - ",ee.price," (",ee.interval," ",ee.period,ee.interval>1?"s":"",")"]},ee.id)):r.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),Ue&&r.jsx("p",{className:"error-message",children:Ue}),Q.length===0&&!Y&&!Ue&&r.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),r.jsxs("div",{className:"subscription-modal-footer",children:[r.jsx("button",{onClick:le,disabled:W,className:"subscription-modal-button cancel",children:"Cancel"}),r.jsx("button",{onClick:de,disabled:!G||W,className:"subscription-modal-button submit",children:W?"Starting...":"Start Subscription"})]})]})}),r.jsx(OM,{isOpen:a,onClose:()=>i(!1),entityType:"patients",entityLabel:"Patients",currentConfig:e,onConfigUpdated:()=>{n()}})]})},XH=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(!1),[d,f]=v.useState(!1),p=/^\+?[0-9\s\-().]{7,20}$/,g=v.useMemo(()=>qc(async _=>{if(_.trim().length<2){i([]),o(!1);return}o(!0);try{const T=new URLSearchParams({search:encodeURIComponent(_),page:"1",limit:"8",sortBy:"name",sortOrder:"asc"}),C=await se(`/api/patients?${T.toString()}`);if(!C.ok)throw new Error("Failed to search");const E=await C.json();i(E.patients)}catch{i([])}finally{o(!1)}},300),[]),x=_=>{const T=_.target.value;n(T),c(p.test(T)),o(!0),f(!0),g(T)},b=v.useCallback(_=>{t("/billing",{state:{patientId:_.id,patientName:_.name}})},[t]),j=v.useCallback(async()=>{if(!(!e||!l)){o(!0);try{const T=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Direct Patient",phone:e,age:null,gender:null,token:null})});if(!T.ok)throw new Error("Failed to create patient");const C=await T.json();b(C)}catch(_){alert(`Error: ${_.message}`)}finally{o(!1)}}},[e,l,b]),S=_=>_.slice(0,1).toUpperCase();return r.jsxs("div",{className:"ccb-container",children:[r.jsxs("div",{className:"ccb-header-section",children:[r.jsx("button",{onClick:()=>t(-1),className:"ccb-back-button",title:"Go Back",children:r.jsx(on,{size:24})}),r.jsx("h1",{className:"ccb-title",children:"Create Custom Bill"}),r.jsx("p",{className:"ccb-subtitle",children:"Search for a patient to bill manually, or create a new one instantly."})]}),r.jsxs("div",{className:"ccb-search-wrapper",children:[r.jsx(Fn,{className:"ccb-search-icon",size:20}),r.jsx("input",{type:"text",placeholder:"Search by Name, Phone, or Token...",value:e,onChange:x,onFocus:()=>f(!0),className:"ccb-search-input",autoFocus:!0}),e&&r.jsx("div",{className:"ccb-clear-icon",onClick:()=>{n(""),i([]),f(!1)},children:r.jsx($t,{size:18})}),r.jsxs("div",{className:`ccb-results-dropdown ${d&&(a.length>0||s||e.length>2&&a.length===0)?"open":""}`,children:[s&&r.jsx("div",{className:"p-4 flex justify-center items-center",children:r.jsx("div",{className:"ccb-spinner"})}),!s&&a.map(_=>r.jsxs("div",{onClick:()=>b(_),className:"ccb-result-item",children:[r.jsxs("div",{className:"ccb-patient-info",children:[r.jsx("div",{className:"ccb-avatar",children:S(_.name)}),r.jsxs("div",{className:"ccb-patient-details",children:[r.jsx("h4",{children:_.name}),r.jsxs("p",{className:"ccb-patient-meta",children:[_.phone||"No phone","  ",_.gender||"-","  ",_.age?`${_.age}y`:"-"]})]})]}),r.jsxs("span",{className:"ccb-token-badge",children:["#",_.token]})]},_.id)),!s&&a.length===0&&e.length>2&&r.jsxs("div",{className:"ccb-create-action",children:[r.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No patients found."}),l&&r.jsxs("button",{onClick:j,className:"ccb-create-btn w-full",children:["Create Patient with Phone ",e]})]})]})]})]})},JH=({currentUser:t})=>{const e=Lt(),n=ds(),[a,i]=v.useState("select_patient"),[s,o]=v.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,c]=v.useState(null),[d,f]=v.useState([]),[p,g]=v.useState([]),[x,b]=v.useState(""),[j,S]=v.useState([]),[_,T]=v.useState(""),[C,E]=v.useState([]),[k,O]=v.useState(!1),[I,F]=v.useState(null),[B,$]=v.useState(null),[L,V]=v.useState(null),[H,ne]=v.useState(!1),[Q,q]=v.useState(!1),[G,ie]=v.useState(!1),W=/^\+?[0-9\s\-().]{7,20}$/,z=/^[a-zA-Z\s'-]{2,}$/,ce=v.useCallback(async()=>{if(!(d.length>0)){ne(!0),V(null);try{const X=await se("/api/lab-tests");if(!X.ok)throw new Error("Failed to fetch lab tests");const ae=await X.json();f(ae)}catch(X){console.error("Failed to fetch available lab tests:",X),V("Could not load lab test list: "+X.message),f([])}finally{ne(!1)}}},[d.length]),je=X=>{X&&(n.prefetchQuery({queryKey:Gt.patients.context(X),queryFn:async()=>{const ae=await se(`/api/patients/${X}/context`);if(!ae.ok)throw new Error("Failed to fetch patient context");return ae.json()},staleTime:1e3*60*5}),n.prefetchQuery({queryKey:Gt.patientDebts.balance(X),queryFn:async()=>{const ae=await se(`/api/patient-debts/${X}/balance`);if(!ae.ok)throw new Error("Failed to fetch patient debt");return ae.json()},staleTime:1e3*60}),n.prefetchQuery({queryKey:Gt.queue.latest(X),queryFn:async()=>{const ae=await se(`/api/queue/patient/${X}/latest`);if(!ae.ok){if(ae.status===404)return null;throw new Error("Failed to fetch queue status")}return ae.json()},staleTime:1e3*5}))},Y=v.useMemo(()=>new oo(d,{keys:["name","description"],threshold:.3,ignoreLocation:!0}),[d]);v.useEffect(()=>{if(!x){S([]);return}const X=Y.search(x).map(ae=>ae.item);S(X.slice(0,10))},[x,Y]);const Ie=v.useCallback(X=>{const ae={id:X.id,name:X.name,token:X.token,age:X.age,gender:X.gender,phone:X.phone};c(ae),i("create_order"),g([]),b(""),S([]),V(null),ce()},[ce]),Ue=v.useMemo(()=>qc(async X=>{if(X.trim().length<2){E([]),O(!1),F(null);return}O(!0),F(null);try{const ae=new URLSearchParams({search:encodeURIComponent(X),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),de=await se(`/api/patients?${ae.toString()}`);if(!de.ok){const Ne=await de.text();throw new Error(`API Error (${de.status}): ${Ne||de.statusText}`)}const ee=await de.json();E(ee.patients)}catch(ae){console.error("Error searching lab patients:",ae),F(ae.message||"Failed to search lab patients."),E([])}finally{O(!1)}},300),[W,z]),ze=X=>{const ae=X.target.value;T(ae),q(W.test(ae)),ie(z.test(ae)&&!W.test(ae)),O(!0),Ue(ae)},Le=v.useCallback(async X=>{if(!_||X==="phone"&&!Q||X==="name"&&!G){F(`Invalid ${X} to create a new patient.`);return}O(!0),F(null);try{const de=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:X==="name"?_:"direct lab",phone:X==="phone"?_:null,age:null,gender:null,token:null})});if(!de.ok){const Ne=await de.json();throw new Error(Ne.message||`Failed to create patient: ${de.statusText}`)}const ee=await de.json();alert(`New patient "${ee.name}" created with ${X==="phone"?`phone ${ee.phone}`:`name ${ee.name}`}.`),Ie({id:ee.id,name:ee.name,token:ee.token??null,age:ee.age??null,gender:ee.gender??null,phone:ee.phone})}catch(ae){console.error("Error creating new patient:",ae),F(ae.message||"Failed to create new patient.")}finally{O(!1)}},[_,Q,G,Ie]),be=()=>{i("select_patient"),c(null),T(""),E([]),F(null)},Ce=X=>{const{name:ae,value:de}=X.target;o(ee=>({...ee,[ae]:ae==="age"?de?parseInt(de,10):void 0:de}))},Ae=async X=>{if(X.preventDefault(),$(null),!s.name){$("Patient Name is required.");return}const ae={name:s.name,age:s.age,gender:s.gender,phone:s.phone,address:s.address};try{const de=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!de.ok){const Ne=await de.json();throw new Error(Ne.message||`Failed to create patient: ${de.statusText}`)}const ee=await de.json();Ie({id:ee.id,name:ee.name,token:ee.token??null,age:ee.age??null,gender:ee.gender??null,phone:ee.phone})}catch(de){console.error("Failed to create patient:",de),$(de.message||"Failed to create patient. Please try again.")}},me=X=>{if(p.some(ae=>ae.id===X.id)){V(`${X.name} is already in the order.`),setTimeout(()=>V(null),3e3),b(""),S([]);return}g(ae=>[...ae,{...X}]),b(""),S([])},ye=X=>{g(ae=>ae.filter(de=>de.id!==X))},le=async X=>{if(X.preventDefault(),V(null),!l){V("No patient selected.");return}if(p.length===0){V("No lab tests selected.");return}const ae={patient_id:l.id,tests:p.map(de=>({id:de.id,name:de.name,price:de.price}))};console.log("Submitting Lab Order:",ae);try{const de=await se("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!de.ok){const Te=await de.json();throw console.error("API Error Data:",Te),new Error(Te.message||`Failed to create lab order: ${de.statusText}`)}const ee=await de.json();console.log("Lab Order Creation Result:",ee);let Ne=l.queueId;if(!Ne){const Te=await se(`/api/queue/patient/${l.id}/latest`);if(Te.ok){const Fe=await Te.json();Fe!=null&&Fe._id&&(Ne=Fe._id)}}if(!Ne){const Te=await se("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id})});if(!Te.ok){const xe=await Te.text();throw new Error(`Failed to create queue entry for redirection: ${xe||Te.statusText}`)}const Fe=await Te.json();if(Fe!=null&&Fe.id)Ne=Fe.id;else throw new Error("Failed to get ID from new queue entry for redirection.")}(t==null?void 0:t.role)==="lab"?e("/dashboard"):e(`/dashboard/edit-complaint/${Ne}`)}catch(de){console.error("Failed to create lab order:",de),V(de.message||"Failed to create lab order.")}};return v.useEffect(()=>{ce()},[ce]),r.jsxs("div",{className:"create-lab-order-container",children:[r.jsxs("div",{className:"create-lab-order-header",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button","aria-label":"Go back",children:r.jsx(on,{size:20})}),r.jsx("h1",{className:"create-lab-order-title",children:"Create New Lab Order"}),r.jsx("div",{style:{width:"64px"}})," "]}),(a==="select_patient"||a==="create_patient")&&r.jsxs("div",{className:"glass-card",children:[a==="select_patient"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"header-with-action",children:r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Select Patient"})}),r.jsxs("div",{className:"search-container",children:[r.jsx(Fn,{className:"search-icon",size:20}),r.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No...",value:_,onChange:ze,className:"modern-input",autoFocus:!0,autoComplete:"off"}),k&&r.jsx("div",{style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(Z,{width:80,height:14})})]}),k&&r.jsx("ul",{className:"patient-list",children:[1,2,3].map(X=>r.jsxs("li",{className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx(Z,{width:120,height:20}),r.jsx(Z,{width:50,height:24,style:{borderRadius:"12px"}})]}),r.jsx("div",{className:"patient-details",children:r.jsx(Z,{width:200,height:16})})]},X))}),I&&r.jsxs("div",{className:"error-message",children:[r.jsx(ea,{size:18}),I]}),C.length>0&&r.jsx("ul",{className:"patient-list",children:C.map(X=>r.jsxs("li",{onClick:()=>Ie(X),onMouseEnter:()=>je(X.id),className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("strong",{children:X.name}),r.jsxs("span",{className:"token-badge",children:["#",X.token||"N/A"]})]}),r.jsxs("div",{className:"patient-details",children:[X.age?`${X.age} yrs`:"",X.gender?` / ${X.gender}`:"",X.phone?`  ${X.phone}`:""]})]},X.id))}),_.length>=2&&!k&&C.length===0&&!I&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{className:"no-data-message",style:{background:"none",border:"none",padding:0},children:['No patients found matching "',_,'".']}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px",marginTop:"15px"},children:[Q&&r.jsxs("button",{type:"button",onClick:()=>Le("phone"),className:"secondary-button",children:['Create "Direct Lab" Patient (Phone: ',_,")"]}),G&&r.jsxs("button",{type:"button",onClick:()=>Le("name"),className:"secondary-button",children:["Create Patient (Name: ",_,")"]})]})]}),_.length<2&&!k&&r.jsx("div",{className:"info-message",children:"Start typing to search for a patient..."})]}),a==="create_patient"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"New Patient Registration"}),r.jsx("button",{onClick:be,className:"text-button",children:" Back to Search "})]}),B&&r.jsxs("div",{className:"error-message",children:[r.jsx(ea,{size:18}),B]}),r.jsxs("form",{onSubmit:Ae,children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-name",className:"form-label",children:"Patient Name *"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Jn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:s.name,onChange:Ce,className:"modern-input",placeholder:"Enter full name"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-age",className:"form-label",children:"Age"}),r.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:s.age??"",onChange:Ce,className:"modern-input",style:{paddingLeft:"16px"},placeholder:"e.g. 30"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-gender",className:"form-label",children:"Gender"}),r.jsxs("select",{name:"gender",id:"lab-patient-gender",value:s.gender??"",onChange:Ce,className:"modern-input",style:{paddingLeft:"16px"},children:[r.jsx("option",{value:"",children:"Select Gender..."}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-phone",className:"form-label",children:"Phone Number"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(eg,{className:"search-icon",size:18}),r.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:s.phone||"",onChange:Ce,className:"modern-input",placeholder:"e.g. 9876543210"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-address",className:"form-label",children:"Address"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Hz,{className:"search-icon",size:18,style:{top:"20px"}}),r.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:s.address||"",onChange:Ce,className:"modern-input",style:{resize:"none"},placeholder:"Enter address (optional)"})]})]})]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:be,className:"secondary-button",children:" Cancel "}),r.jsxs("button",{type:"submit",className:"primary-button",children:[r.jsx(Gn,{size:18}),"Create & Proceed"]})]})]})]})]}),a==="create_order"&&l&&r.jsxs("div",{className:"glass-card",children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Create Lab Order"}),r.jsx("button",{onClick:be,className:"text-button",children:" Change Patient "})]}),r.jsxs("div",{className:"patient-summary",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(Jn,{size:20,className:"highlight-primary"}),r.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600"},children:l.name})]}),r.jsxs("div",{className:"patient-details",style:{marginLeft:"30px",marginTop:"4px"},children:[l.age?`${l.age} yrs`:"Age N/A",l.gender&&`  ${l.gender}`,l.phone&&`  ${l.phone}`]})]}),L&&r.jsxs("div",{className:"error-message",children:[r.jsx(ea,{size:18}),L]}),r.jsxs("form",{onSubmit:le,children:[r.jsxs("div",{className:"form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",className:"form-label",children:"Add Lab Test"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[H?r.jsx("div",{style:{position:"absolute",right:"45px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(Z,{width:24,height:24,variant:"circular"})}):r.jsx(Fn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search tests (e.g. CBC, Lipid Profile)...",value:x,onChange:X=>b(X.target.value),className:"modern-input",disabled:H,autoComplete:"off"})]}),H&&x&&r.jsx("div",{className:"search-results-dropdown",children:[1,2,3].map(X=>r.jsxs("div",{className:"search-result-item",children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"20%",height:20})]},X))}),x&&j.length>0&&r.jsx("div",{className:"search-results-dropdown",children:j.map(X=>r.jsxs("div",{onClick:()=>me(X),className:"search-result-item",children:[r.jsx("span",{style:{fontWeight:500},children:X.name}),r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(X.price).toFixed(2)]})]},X.id))}),x&&j.length===0&&!H&&r.jsxs("div",{className:"no-data-message",style:{marginTop:"5px",padding:"10px",fontSize:"0.9rem"},children:['No tests found matching "',x,'".']})]}),r.jsxs("div",{style:{marginTop:"30px"},children:[r.jsxs("h4",{className:"card-title",style:{fontSize:"1.1rem"},children:["Selected Tests (",p.length,")"]}),p.length===0?r.jsx("div",{className:"info-message",children:"No tests added yet. Search above to add tests."}):r.jsx("div",{className:"selected-tests-list",children:p.map(X=>r.jsxs("div",{className:"selected-test-item",children:[r.jsx("div",{style:{flex:1},children:r.jsx("div",{style:{fontWeight:500},children:X.name})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(X.price).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ye(X.id),className:"remove-button",title:"Remove Test",children:r.jsx(Vn,{size:18})})]})]},X.id))})]}),p.length>0&&r.jsxs("div",{className:"total-price",children:["Total: ",p.reduce((X,ae)=>X+parseFloat(ae.price),0).toFixed(2)]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:be,className:"secondary-button",children:" Cancel Order "}),r.jsxs("button",{type:"submit",disabled:p.length===0,className:"primary-button",children:[r.jsx(NE,{size:18}),"Create Lab Order"]})]})]})]})]})},ZH=({patient:t,onClose:e,onSave:n})=>{const[a,i]=v.useState({name:t.name,age:t.age,gender:t.gender,phone:t.phone||""}),[s,o]=v.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{await n({...a,phone:a.phone||void 0}),e()}catch(d){console.error(d),alert("Failed to update patient")}finally{o(!1)}};return r.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",width:"400px",maxWidth:"90%",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[r.jsx("h3",{style:{margin:0,fontSize:"1.2rem",color:"#333"},children:"Edit Patient Details"}),r.jsx("button",{onClick:e,style:{border:"none",background:"none",cursor:"pointer",color:"#666"},children:r.jsx($t,{size:20})})]}),r.jsxs("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Name"}),r.jsx("input",{type:"text",value:a.name,onChange:c=>i({...a,name:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"},required:!0})]}),r.jsxs("div",{style:{display:"flex",gap:"16px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Age"}),r.jsx("input",{type:"number",value:a.age||"",onChange:c=>i({...a,age:parseInt(c.target.value)||0}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Gender"}),r.jsxs("select",{value:a.gender||"",onChange:c=>i({...a,gender:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem",width:"100%"},children:[r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Phone"}),r.jsx("input",{type:"tel",value:a.phone,onChange:c=>i({...a,phone:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"},placeholder:"Optional"})]}),r.jsx("button",{type:"submit",className:"save-btn",style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:s,children:s?"Saving...":r.jsxs(r.Fragment,{children:[r.jsx(cs,{size:18})," Save Changes"]})})]})]})})},vB=[{value:"general",label:"General"},{value:"diagnostic",label:"Diagnostic"},{value:"treatment",label:"Treatment"},{value:"minor_surgery",label:"Minor Surgery"}],fDe=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState({}),[f,p]=v.useState(!1),[g,x]=v.useState({name:"",cost:0,category:"general"});v.useEffect(()=>{b()},[]);const b=async()=>{s(!0);try{const C=await se("/api/medical/procedures");if(C.ok){const E=await C.json();a(E)}}catch(C){console.error(C)}finally{s(!1)}},j=async()=>{if(!(!g.name||!g.cost))try{(await se("/api/medical/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,category:"general"}),b(),e())}catch(C){console.error(C)}},S=async C=>{try{(await se(`/api/medical/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),d({}),b(),e())}catch(E){console.error(E)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await se(`/api/medical/procedures/${C}`,{method:"DELETE"})).ok&&(b(),e())}catch(E){console.error(E)}},T=C=>{l(C.id),d({name:C.name,cost:C.cost,category:C.category})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Medical Procedures"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await se("/api/medical/procedures/import-defaults",{method:"POST"}),b(),e()}catch(C){console.error(C)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx($t,{size:20})})]})]}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40%"},children:"Name"}),r.jsx("th",{style:{width:"20%"},children:"Category"}),r.jsx("th",{style:{width:"20%"},children:"Cost ()"}),r.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):n.map(C=>r.jsx("tr",{children:o===C.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:E=>d({...c,name:E.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsx("select",{className:"edit-select",value:c.category||"general",onChange:E=>d({...c,category:E.target.value}),children:vB.map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:E=>d({...c,cost:parseFloat(E.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>S(C.id),className:"action-btn btn-save",title:"Save",children:r.jsx(cs,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx($t,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:C.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${C.category}`,children:C.category.replace("_"," ")})}),r.jsxs("td",{style:{fontWeight:500},children:["",C.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>T(C),className:"action-btn btn-edit",title:"Edit",children:r.jsx(ro,{size:18})}),r.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Vn,{size:18})})]})]})},C.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:C=>x({...g,name:C.target.value})}),r.jsx("select",{className:"form-select",value:g.category||"general",onChange:C=>x({...g,category:C.target.value}),children:vB.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:C=>x({...g,cost:parseFloat(C.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:j,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(Gn,{size:18})," Add New Procedure"]})})]})})};var pDe=Object.defineProperty,EN=Object.getOwnPropertySymbols,eG=Object.prototype.hasOwnProperty,tG=Object.prototype.propertyIsEnumerable,bB=(t,e,n)=>e in t?pDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NO=(t,e)=>{for(var n in e||(e={}))eG.call(e,n)&&bB(t,n,e[n]);if(EN)for(var n of EN(e))tG.call(e,n)&&bB(t,n,e[n]);return t},SO=(t,e)=>{var n={};for(var a in t)eG.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&EN)for(var a of EN(t))e.indexOf(a)<0&&tG.call(t,a)&&(n[a]=t[a]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Of;(t=>{const e=class On{constructor(c,d,f,p){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<On.MIN_VERSION||c>On.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let g=[];for(let b=0;b<this.size;b++)g.push(!1);for(let b=0;b<this.size;b++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(f);if(this.drawCodewords(x),p==-1){let b=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const S=this.getPenaltyScore();S<b&&(p=j,b=S),this.applyMask(j)}}i(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,d){const f=t.QrSegment.makeSegments(c);return On.encodeSegments(f,d)}static encodeBinary(c,d){const f=t.QrSegment.makeBytes(c);return On.encodeSegments([f],d)}static encodeSegments(c,d,f=1,p=40,g=-1,x=!0){if(!(On.MIN_VERSION<=f&&f<=p&&p<=On.MAX_VERSION)||g<-1||g>7)throw new RangeError("Invalid value");let b,j;for(b=f;;b++){const C=On.getNumDataCodewords(b,d)*8,E=o.getTotalBits(c,b);if(E<=C){j=E;break}if(b>=p)throw new RangeError("Data too long")}for(const C of[On.Ecc.MEDIUM,On.Ecc.QUARTILE,On.Ecc.HIGH])x&&j<=On.getNumDataCodewords(b,C)*8&&(d=C);let S=[];for(const C of c){n(C.mode.modeBits,4,S),n(C.numChars,C.mode.numCharCountBits(b),S);for(const E of C.getData())S.push(E)}i(S.length==j);const _=On.getNumDataCodewords(b,d)*8;i(S.length<=_),n(0,Math.min(4,_-S.length),S),n(0,(8-S.length%8)%8,S),i(S.length%8==0);for(let C=236;S.length<_;C^=253)n(C,8,S);let T=[];for(;T.length*8<S.length;)T.push(0);return S.forEach((C,E)=>T[E>>>3]|=C<<7-(E&7)),new On(b,d,T,g)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let f=0;f<d;f++)for(let p=0;p<d;p++)f==0&&p==0||f==0&&p==d-1||f==d-1&&p==0||this.drawAlignmentPattern(c[f],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let f=d;for(let g=0;g<10;g++)f=f<<1^(f>>>9)*1335;const p=(d<<10|f)^21522;i(p>>>15==0);for(let g=0;g<=5;g++)this.setFunctionModule(8,g,a(p,g));this.setFunctionModule(8,7,a(p,6)),this.setFunctionModule(8,8,a(p,7)),this.setFunctionModule(7,8,a(p,8));for(let g=9;g<15;g++)this.setFunctionModule(14-g,8,a(p,g));for(let g=0;g<8;g++)this.setFunctionModule(this.size-1-g,8,a(p,g));for(let g=8;g<15;g++)this.setFunctionModule(8,this.size-15+g,a(p,g));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let f=0;f<12;f++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;i(d>>>18==0);for(let f=0;f<18;f++){const p=a(d,f),g=this.size-11+f%3,x=Math.floor(f/3);this.setFunctionModule(g,x,p),this.setFunctionModule(x,g,p)}}drawFinderPattern(c,d){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const g=Math.max(Math.abs(p),Math.abs(f)),x=c+p,b=d+f;0<=x&&x<this.size&&0<=b&&b<this.size&&this.setFunctionModule(x,b,g!=2&&g!=4)}}drawAlignmentPattern(c,d){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,d+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(c,d,f){this.modules[d][c]=f,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,f=this.errorCorrectionLevel;if(c.length!=On.getNumDataCodewords(d,f))throw new RangeError("Invalid argument");const p=On.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][d],g=On.ECC_CODEWORDS_PER_BLOCK[f.ordinal][d],x=Math.floor(On.getNumRawDataModules(d)/8),b=p-x%p,j=Math.floor(x/p);let S=[];const _=On.reedSolomonComputeDivisor(g);for(let C=0,E=0;C<p;C++){let k=c.slice(E,E+j-g+(C<b?0:1));E+=k.length;const O=On.reedSolomonComputeRemainder(k,_);C<b&&k.push(0),S.push(k.concat(O))}let T=[];for(let C=0;C<S[0].length;C++)S.forEach((E,k)=>{(C!=j-g||k>=b)&&T.push(E[C])});return i(T.length==x),T}drawCodewords(c){if(c.length!=Math.floor(On.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let g=0;g<2;g++){const x=f-g,j=(f+1&2)==0?this.size-1-p:p;!this.isFunction[j][x]&&d<c.length*8&&(this.modules[j][x]=a(c[d>>>3],7-(d&7)),d++)}}i(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let f=0;f<this.size;f++){let p;switch(c){case 0:p=(f+d)%2==0;break;case 1:p=d%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+d)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(d/2))%2==0;break;case 5:p=f*d%2+f*d%3==0;break;case 6:p=(f*d%2+f*d%3)%2==0;break;case 7:p=((f+d)%2+f*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][f]&&p&&(this.modules[d][f]=!this.modules[d][f])}}getPenaltyScore(){let c=0;for(let g=0;g<this.size;g++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[g][S]==x?(b++,b==5?c+=On.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*On.PENALTY_N3),x=this.modules[g][S],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*On.PENALTY_N3}for(let g=0;g<this.size;g++){let x=!1,b=0,j=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][g]==x?(b++,b==5?c+=On.PENALTY_N1:b>5&&c++):(this.finderPenaltyAddHistory(b,j),x||(c+=this.finderPenaltyCountPatterns(j)*On.PENALTY_N3),x=this.modules[S][g],b=1);c+=this.finderPenaltyTerminateAndCount(x,b,j)*On.PENALTY_N3}for(let g=0;g<this.size-1;g++)for(let x=0;x<this.size-1;x++){const b=this.modules[g][x];b==this.modules[g][x+1]&&b==this.modules[g+1][x]&&b==this.modules[g+1][x+1]&&(c+=On.PENALTY_N2)}let d=0;for(const g of this.modules)d=g.reduce((x,b)=>x+(b?1:0),d);const f=this.size*this.size,p=Math.ceil(Math.abs(d*20-f*10)/f)-1;return i(0<=p&&p<=9),c+=p*On.PENALTY_N4,i(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let f=[6];for(let p=this.size-7;f.length<c;p-=d)f.splice(1,0,p);return f}}static getNumRawDataModules(c){if(c<On.MIN_VERSION||c>On.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const f=Math.floor(c/7)+2;d-=(25*f-10)*f-55,c>=7&&(d-=36)}return i(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(On.getNumRawDataModules(c)/8)-On.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*On.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let p=0;p<c-1;p++)d.push(0);d.push(1);let f=1;for(let p=0;p<c;p++){for(let g=0;g<d.length;g++)d[g]=On.reedSolomonMultiply(d[g],f),g+1<d.length&&(d[g]^=d[g+1]);f=On.reedSolomonMultiply(f,2)}return d}static reedSolomonComputeRemainder(c,d){let f=d.map(p=>0);for(const p of c){const g=p^f.shift();f.push(0),d.forEach((x,b)=>f[b]^=On.reedSolomonMultiply(x,g))}return f}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(d>>>p&1)*c;return i(f>>>8==0),f}finderPenaltyCountPatterns(c){const d=c[1];i(d<=this.size*3);const f=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(f&&c[0]>=d*4&&c[6]>=d?1:0)+(f&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,f){return c&&(this.finderPenaltyAddHistory(d,f),d=0),d+=this.size,this.finderPenaltyAddHistory(d,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let f=c-1;f>=0;f--)d.push(l>>>f&1)}function a(l,c){return(l>>>c&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const s=class Xr{constructor(c,d,f){if(this.mode=c,this.numChars=d,this.bitData=f,d<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(c){let d=[];for(const f of c)n(f,8,d);return new Xr(Xr.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!Xr.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let f=0;f<c.length;){const p=Math.min(c.length-f,3);n(parseInt(c.substring(f,f+p),10),p*3+1,d),f+=p}return new Xr(Xr.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!Xr.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],f;for(f=0;f+2<=c.length;f+=2){let p=Xr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f))*45;p+=Xr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f+1)),n(p,11,d)}return f<c.length&&n(Xr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f)),6,d),new Xr(Xr.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:Xr.isNumeric(c)?[Xr.makeNumeric(c)]:Xr.isAlphanumeric(c)?[Xr.makeAlphanumeric(c)]:[Xr.makeBytes(Xr.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new Xr(Xr.Mode.ECI,0,d)}static isNumeric(c){return Xr.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Xr.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let f=0;for(const p of c){const g=p.mode.numCharCountBits(d);if(p.numChars>=1<<g)return 1/0;f+=4+g+p.bitData.length}return f}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let f=0;f<c.length;f++)c.charAt(f)!="%"?d.push(c.charCodeAt(f)):(d.push(parseInt(c.substring(f+1,f+3),16)),f+=2);return d}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;t.QrSegment=s})(Of||(Of={}));(t=>{(e=>{const n=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Of||(Of={}));(t=>{(e=>{const n=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Of||(Of={}));var Mm=Of;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var mDe={L:Mm.QrCode.Ecc.LOW,M:Mm.QrCode.Ecc.MEDIUM,Q:Mm.QrCode.Ecc.QUARTILE,H:Mm.QrCode.Ecc.HIGH},nG=128,rG="L",aG="#FFFFFF",iG="#000000",sG=!1,oG=1,gDe=4,yDe=0,xDe=.1;function lG(t,e=0){const n=[];return t.forEach(function(a,i){let s=null;a.forEach(function(o,l){if(!o&&s!==null){n.push(`M${s+e} ${i+e}h${l-s}v1H${s+e}z`),s=null;return}if(l===a.length-1){if(!o)return;s===null?n.push(`M${l+e},${i+e} h1v1H${l+e}z`):n.push(`M${s+e},${i+e} h${l+1-s}v1H${s+e}z`);return}o&&s===null&&(s=l)})}),n.join("")}function cG(t,e){return t.slice().map((n,a)=>a<e.y||a>=e.y+e.h?n:n.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function vDe(t,e,n,a){if(a==null)return null;const i=t.length+n*2,s=Math.floor(e*xDe),o=i/e,l=(a.width||s)*o,c=(a.height||s)*o,d=a.x==null?t.length/2-l/2:a.x*o,f=a.y==null?t.length/2-c/2:a.y*o,p=a.opacity==null?1:a.opacity;let g=null;if(a.excavate){let b=Math.floor(d),j=Math.floor(f),S=Math.ceil(l+d-b),_=Math.ceil(c+f-j);g={x:b,y:j,w:S,h:_}}const x=a.crossOrigin;return{x:d,y:f,h:c,w:l,excavation:g,opacity:p,crossOrigin:x}}function bDe(t,e){return e!=null?Math.max(Math.floor(e),0):t?gDe:yDe}function uG({value:t,level:e,minVersion:n,includeMargin:a,marginSize:i,imageSettings:s,size:o,boostLevel:l}){let c=Se.useMemo(()=>{const b=(Array.isArray(t)?t:[t]).reduce((j,S)=>(j.push(...Mm.QrSegment.makeSegments(S)),j),[]);return Mm.QrCode.encodeSegments(b,mDe[e],n,void 0,void 0,l)},[t,e,n,l]);const{cells:d,margin:f,numCells:p,calculatedImageSettings:g}=Se.useMemo(()=>{let x=c.getModules();const b=bDe(a,i),j=x.length+b*2,S=vDe(x,o,b,s);return{cells:x,margin:b,numCells:j,calculatedImageSettings:S}},[c,o,s,a,i]);return{qrcode:c,margin:f,cells:d,numCells:p,calculatedImageSettings:g}}var jDe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),La=Se.forwardRef(function(e,n){const a=e,{value:i,size:s=nG,level:o=rG,bgColor:l=aG,fgColor:c=iG,includeMargin:d=sG,minVersion:f=oG,boostLevel:p,marginSize:g,imageSettings:x}=a,j=SO(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=j,_=SO(j,["style"]),T=x==null?void 0:x.src,C=Se.useRef(null),E=Se.useRef(null),k=Se.useCallback(ne=>{C.current=ne,typeof n=="function"?n(ne):n&&(n.current=ne)},[n]),[O,I]=Se.useState(!1),{margin:F,cells:B,numCells:$,calculatedImageSettings:L}=uG({value:i,level:o,minVersion:f,boostLevel:p,includeMargin:d,marginSize:g,imageSettings:x,size:s});Se.useEffect(()=>{if(C.current!=null){const ne=C.current,Q=ne.getContext("2d");if(!Q)return;let q=B;const G=E.current,ie=L!=null&&G!==null&&G.complete&&G.naturalHeight!==0&&G.naturalWidth!==0;ie&&L.excavation!=null&&(q=cG(B,L.excavation));const W=window.devicePixelRatio||1;ne.height=ne.width=s*W;const z=s/$*W;Q.scale(z,z),Q.fillStyle=l,Q.fillRect(0,0,$,$),Q.fillStyle=c,jDe?Q.fill(new Path2D(lG(q,F))):B.forEach(function(ce,je){ce.forEach(function(Y,Ie){Y&&Q.fillRect(Ie+F,je+F,1,1)})}),L&&(Q.globalAlpha=L.opacity),ie&&Q.drawImage(G,L.x+F,L.y+F,L.w,L.h)}}),Se.useEffect(()=>{I(!1)},[T]);const V=NO({height:s,width:s},S);let H=null;return T!=null&&(H=Se.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{I(!0)},ref:E,crossOrigin:L==null?void 0:L.crossOrigin})),Se.createElement(Se.Fragment,null,Se.createElement("canvas",NO({style:V,height:s,width:s,ref:k,role:"img"},_)),H)});La.displayName="QRCodeCanvas";var wDe=Se.forwardRef(function(e,n){const a=e,{value:i,size:s=nG,level:o=rG,bgColor:l=aG,fgColor:c=iG,includeMargin:d=sG,minVersion:f=oG,boostLevel:p,title:g,marginSize:x,imageSettings:b}=a,j=SO(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:_,numCells:T,calculatedImageSettings:C}=uG({value:i,level:o,minVersion:f,boostLevel:p,includeMargin:d,marginSize:x,imageSettings:b,size:s});let E=_,k=null;b!=null&&C!=null&&(C.excavation!=null&&(E=cG(_,C.excavation)),k=Se.createElement("image",{href:b.src,height:C.h,width:C.w,x:C.x+S,y:C.y+S,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const O=lG(E,S);return Se.createElement("svg",NO({height:s,width:s,viewBox:`0 0 ${T} ${T}`,ref:n,role:"img"},j),!!g&&Se.createElement("title",null,g),Se.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),Se.createElement("path",{fill:c,d:O,shapeRendering:"crispEdges"}),k)});wDe.displayName="QRCodeSVG";const NDe=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var de,ee,Ne,Te,Fe,xe,te;const[i,s]=v.useState(null),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState([]),[b,j]=v.useState("cash"),[S,_]=v.useState(!1),[T,C]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[E,k]=v.useState(0),[O,I]=v.useState(""),[F,B]=v.useState(""),[$,L]=v.useState(""),[V,H]=v.useState(null),[ne,Q]=v.useState(null),[q,G]=v.useState(!1),ie=()=>{T.length>=5||C(oe=>[...oe,{id:crypto.randomUUID(),method:"cash",amount:0}])},W=oe=>{T.length<=2||C(_e=>_e.filter(Oe=>Oe.id!==oe))},z=(oe,_e,Oe)=>{C(K=>K.map(ge=>ge.id===oe?{...ge,[_e]:Oe}:ge))},ce=oe=>{const _e=T.filter(K=>K.id!==oe).reduce((K,ge)=>K+ge.amount,0),Oe=Math.max(0,ze-_e);z(oe,"amount",Oe)},je=oe=>{const _e=Math.min(100,Math.max(0,oe||0));k(_e),x(Oe=>Oe.map(K=>({...K,discount_percentage:_e})))},Y=(oe,_e)=>{const Oe=Math.min(100,Math.max(0,_e||0));x(K=>K.map((ge,ue)=>ue===oe?{...ge,discount_percentage:Oe}:ge))},Ie=v.useMemo(()=>g.reduce((oe,_e)=>oe+(_e.price??_e.cost??0),0),[g]),Ue=v.useMemo(()=>g.reduce((oe,_e)=>{const K=(_e.price??_e.cost??0)*(_e.discount_percentage??0)/100;return oe+K},0),[g]),ze=Ie-Ue,Le=v.useMemo(()=>T.reduce((oe,_e)=>oe+_e.amount,0),[T]),be=ze-Le,Ce=Math.abs(be)<.01,Ae=v.useMemo(()=>S?T.some(oe=>oe.method==="credit"):b==="credit",[S,T,b]),me=async()=>{var oe,_e;if(!i)return d("No record data available to bill."),null;if(g.length===0)return d("Cannot bill an empty procedure list."),null;p(!0),d(null);try{const Oe=g.map(We=>{const it=We.price??We.cost??0,wt=it*((We.discount_percentage??0)/100),we=it-wt;return{name:We.name,price:it,quantity:1,total:we,item_id:We.id||`proc_${Date.now()}`,type:"service",discount_percentage:We.discount_percentage??0}}),K=S?((oe=T[0])==null?void 0:oe.method)||"cash":b,ge=S?T.map(We=>({method:We.method,amount:We.amount})):void 0,ue={patientId:i.patientId.id,items:Oe,amount:ze,paymentMode:K,splitPayments:ge,type:"consultation",related_id:i.id,status:"paid",discountPercentage:E},fe=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)}),Ee=await fe.json();if(!fe.ok||!Ee.id)throw new Error(Ee.message||"Failed to create bill.");(await se(`/api/medical/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:Ee.id})})).ok||console.error("Failed to update medical record status"),s(We=>We?{...We,status:"billed",billId:Ee.id}:null);const $e=S?((_e=T.find(We=>We.method==="credit"))==null?void 0:_e.amount)||0:b==="credit"?ze:0;if($e>0)try{await se(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:$e,related_bill_id:Ee.id,notes:`Medical Bill #${Ee.id}${S?" (Split Payment - Credit portion)":""}`})})}catch(We){console.error("Failed to create debt entry:",We)}return a&&a(),Ee.id}catch(Oe){return console.error("Billing process failed:",Oe),d(Oe.message||"Failed to create bill."),null}finally{p(!1)}},ye=()=>{window.print()},le=async()=>{await me()&&setTimeout(()=>window.print(),300)},X=async()=>{if(n){l(!0),d(null);try{const oe=await se(`/api/medical/${n}`);if(!oe.ok)throw new Error("Failed to fetch medical record");const _e=await oe.json(),Oe=_e.Patient||{},K={id:_e.id,patientId:{id:Oe.id||_e.patient_id,name:Oe.name||"Unknown",patient_token_number:Oe.patient_token_number,age:Oe.age,gender:Oe.gender},clinicId:_e.clinic_id,selectedProcedures:_e.selected_procedures||[],status:_e.status,billId:_e.bill_id,createdAt:_e.createdAt||_e.date,date:_e.date,notes:_e.notes};s(K);const ge=(_e.selected_procedures||[]).map(ue=>({...ue,price:ue.cost,discount_percentage:0}));x(ge);try{const ue=await se("/api/clinics/settings");if(ue.ok){const fe=await ue.json();I(fe.name||""),B(fe.address||""),L(fe.notes||""),fe.upi_id&&H(`upi://pay?pa=${fe.upi_id}&pn=${encodeURIComponent(fe.name||"Clinic")}&cu=INR`)}}catch(ue){console.error("Failed to fetch clinic settings",ue)}}catch(oe){d(oe.message||"Failed to load record")}finally{l(!1)}}},ae=async()=>{var oe;if((oe=i==null?void 0:i.patientId)!=null&&oe.id){G(!0);try{const _e=await se(`/api/patient-debts/patient/${i.patientId.id}/balance`);if(_e.ok){const Oe=await _e.json();Q(Oe.balance||0)}}catch(_e){console.error("Failed to fetch patient debt",_e)}finally{G(!1)}}};return v.useEffect(()=>{t&&n&&X()},[t,n]),v.useEffect(()=>{var oe;(oe=i==null?void 0:i.patientId)!=null&&oe.id&&ae()},[(de=i==null?void 0:i.patientId)==null?void 0:de.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Medical Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx($t,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsx("div",{className:"space-y-4 p-5",children:r.jsx(Z,{width:100,height:20})})]})})]})})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"MEDICAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:O||"Clinic Name"}),(F||$)&&r.jsxs("div",{className:"clinic-details-print",children:[F&&r.jsx("span",{className:"small-text clinic-address",children:F}),$&&r.jsx("span",{className:"small-text clinic-notes",children:$})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((ee=i.patientId)==null?void 0:ee.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",((Ne=i.patientId)==null?void 0:Ne.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Te=i.patientId)==null?void 0:Te.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",((Fe=i.patientId)==null?void 0:Fe.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ra,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((oe,_e)=>{const Oe=oe.price??oe.cost??0,K=Oe*(oe.discount_percentage??0)/100,ge=Oe-K;return r.jsxs("tr",{children:[r.jsx("td",{children:_e+1}),r.jsx("td",{children:oe.name}),r.jsx("td",{children:Oe.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:oe.discount_percentage===0?"":oe.discount_percentage,onChange:ue=>Y(_e,parseFloat(ue.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:ge.toFixed(2)})]},_e)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",E.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Ue.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ze.toFixed(2)]})})]}),V&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!(S&&T.some(oe=>oe.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(La,{value:V,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Ue.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:E===0?"":E,onChange:oe=>je(parseFloat(oe.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ze.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:V?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:V,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${S?"active":""}`,onClick:()=>_(!S),disabled:f||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:S?"2px solid #4facfe":"1px solid #ddd",background:S?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:S?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:S?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(Bo,{size:14}),"Split Pay"]})]}),S?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(Bo,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",ze.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:T.map((oe,_e)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:_e+1}),r.jsxs("select",{value:oe.method,onChange:Oe=>z(oe.id,"method",Oe.target.value),className:`split-payment-select ${oe.method==="credit"?"is-credit":""}`,disabled:f||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:oe.amount===0?"":oe.amount,onChange:Oe=>z(oe.id,"amount",parseFloat(Oe.target.value)||0),placeholder:"0",className:`split-payment-input ${oe.method==="credit"?"is-credit":""}`,disabled:f||i.status==="billed"})]}),T.length>2&&r.jsx("button",{type:"button",onClick:()=>ce(oe.id),className:"split-payment-btn split-payment-btn-fill",disabled:f||i.status==="billed",children:"Fill"}),T.length>2&&r.jsx("button",{type:"button",onClick:()=>W(oe.id),className:"split-payment-btn split-payment-btn-remove",disabled:f||i.status==="billed",children:r.jsx(Vn,{size:12})})]},oe.id))}),T.length<5&&r.jsxs("button",{type:"button",onClick:ie,className:"split-payment-add-btn",disabled:f||i.status==="billed",children:[r.jsx(Gn,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Le.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(be)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(be)<.01?"":be>0?"":"",Math.abs(be)<.01?"Balanced":be>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(be).toFixed(2)]})]}),!Ce&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",ze.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:oe=>j(oe.target.value),className:"payment-mode-select",disabled:f||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),Ae&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),q?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:ne&&ne>0?"#dc3545":"#28a745"},children:["",(ne||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:S?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",(S?((xe=T.find(oe=>oe.method==="credit"))==null?void 0:xe.amount)||0:ze).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((ne||0)+(S?((te=T.find(oe=>oe.method==="credit"))==null?void 0:te.amount)||0:ze)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ye,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:le,className:"primary-button",disabled:f||S&&!Ce,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Lo,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:ye,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},jB=/^\+?[0-9\s\-().]{7,20}$/,SDe=/^[a-zA-Z\s'-]{2,}$/,dG=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState([]),[_,T]=v.useState(!0),C=$r();v.useEffect(()=>{C.state&&C.state.patient&&me(C.state.patient)},[C.state]);const[E,k]=v.useState([]),[O,I]=v.useState(""),[F,B]=v.useState(!1),[$,L]=v.useState("plan"),[V,H]=v.useState([]),[ne,Q]=v.useState([]),[q,G]=v.useState(!1),[ie,W]=v.useState(""),[z,ce]=v.useState(!1),[je,Y]=v.useState(null),[Ie,Ue]=v.useState(null);v.useEffect(()=>{Le(),ze()},[]);const ze=async()=>{try{const xe=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),te=await se(`/api/patients?${xe.toString()}`);if(te.ok){const oe=await te.json();S(oe.patients||[])}}catch(xe){console.error("Error fetching recent patients",xe)}finally{T(!1)}},Le=async()=>{try{const xe=await se("/api/medical/procedures");if(xe.ok){const te=await xe.json();Q(te)}}catch(xe){console.error("Error fetching procedures",xe)}};v.useEffect(()=>{(async()=>{if(!l){H([]),Ue(null),I(""),k([]);return}try{const te=await se(`/api/medical/patient/${l.id}`);if(te.ok){const oe=await te.json();H(oe);const _e=new Date().toDateString(),Oe=oe.find(K=>K.status==="draft"&&new Date(K.date||K.createdAt||Date.now()).toDateString()===_e);Oe?(Ue(Oe.id),I(Oe.notes||""),k(Oe.selected_procedures.map(K=>({instanceId:crypto.randomUUID(),procedureId:K.id,name:K.name,price:K.cost,category:K.category})))):(Ue(null),I(""),k([]))}}catch(te){console.error("Error fetching history",te)}})()},[l]);const be=v.useMemo(()=>qc(async xe=>{if(!xe.trim()||xe.length<2){i([]),o(!1);return}o(!0);try{const te=await se(`/api/patients?search=${encodeURIComponent(xe)}&limit=10`);if(te.ok){const oe=await te.json();i(oe.patients||[])}}catch(te){console.error("Search error:",te)}finally{o(!1)}},300),[]);v.useEffect(()=>{be(e)},[e,be]);const Ce=xe=>{const te=xe.target.value;n(te),g(jB.test(te)),b(SDe.test(te)&&!jB.test(te))},Ae=async xe=>{if(!(!e||xe==="phone"&&!p||xe==="name"&&!x)){o(!0);try{const oe=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:xe==="name"?e:"direct medical",phone:xe==="phone"?e:null,age:null,gender:null,token:null})});if(oe.ok){const _e=await oe.json();me({id:_e.id,name:_e.name,token:_e.token??null,age:_e.age??null,gender:_e.gender??null,phone:_e.phone})}else alert("Failed to create patient")}catch(te){console.error("Error creating patient:",te),alert("Error creating patient")}finally{o(!1)}}},me=xe=>{c(xe),n(""),i([])},ye=()=>{c(null),k([]),I("")},le=async xe=>{if(!l)return;const te=await se(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(te.ok)await te.json(),c(oe=>oe?{...oe,...xe}:null);else throw new Error("Failed to update")},X=xe=>{const te={instanceId:crypto.randomUUID(),procedureId:xe.id,name:xe.name,price:xe.cost,category:xe.category};k(oe=>[...oe,te])},ae=xe=>{k(te=>te.filter(oe=>oe.instanceId!==xe))},de=(xe,te)=>{k(oe=>oe.map(_e=>_e.instanceId===xe?{..._e,price:te}:_e))},ee=xe=>{const te=V.find(oe=>oe.id===xe);te&&(Ue(te.id),I(te.notes||""),k(te.selected_procedures.map(oe=>({instanceId:crypto.randomUUID(),procedureId:oe.id,name:oe.name,price:oe.cost,category:oe.category}))),L("plan"))},Ne=async(xe=!0)=>{var te;if(l){B(!0);try{const oe=E.map(K=>({id:K.procedureId,name:K.name,cost:K.price,category:K.category})),_e={patientId:l.id,selectedProcedures:oe,notes:O};let Oe;if(Ie?((te=V.find(ge=>ge.id===Ie))==null?void 0:te.status)==="draft"?Oe=await se(`/api/medical/${Ie}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}):Oe=await se("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}):Oe=await se("/api/medical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}),Oe.ok){const K=await Oe.json();Ue(K.id);const ge=await se(`/api/medical/patient/${l.id}`);if(ge.ok){const ue=await ge.json();H(ue)}xe?(Y(K.id),ce(!0)):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save medical record.")}catch(oe){console.error(oe),alert("Error saving record.")}finally{B(!1)}}},Te=v.useMemo(()=>E.reduce((xe,te)=>xe+te.price,0),[E]),Fe=v.useMemo(()=>{const xe={};return ne.filter(oe=>oe.name.toLowerCase().includes(ie.toLowerCase())||oe.category.toLowerCase().includes(ie.toLowerCase())).forEach(oe=>{const _e=oe.category||"general";xe[_e]||(xe[_e]=[]),xe[_e].push(oe)}),xe},[ne,ie]);return r.jsxs("div",{className:"medical-page-container printable-section",children:[r.jsxs("header",{className:"medical-header no-print",children:[r.jsxs("div",{className:"medical-title-group",children:[r.jsx(bf,{className:"medical-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"medical-title",children:"Medical Procedures"}),r.jsx("p",{className:"medical-subtitle",children:"Create medical procedure records and bills"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(ro,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:ye,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx($t,{size:16})})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(Fn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"medical-search-input header-input",value:e,onChange:Ce}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(xe=>r.jsxs("div",{onClick:()=>me(xe),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:xe.name}),r.jsxs("div",{className:"patient-meta",children:[xe.age," yrs / ",xe.gender,"  ",xe.phone]})]}),r.jsx(Jn,{size:16,color:"var(--mp-text-sec)"})]},xe.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--mp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>Ae(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"medical-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container no-print",children:[r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--mp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Fn,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"medical-search-input",value:e,onChange:Ce}),s&&r.jsx("div",{className:"search-spinner"})]}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(xe=>r.jsxs("div",{onClick:()=>me(xe),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:xe.name}),r.jsxs("div",{className:"patient-meta",children:[xe.age," yrs / ",xe.gender,"  ",xe.phone]})]}),r.jsx(Jn,{size:16,color:"var(--mp-text-sec)"})]},xe.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown",style:{padding:"16px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--mp-text-sec)",marginBottom:"12px"},children:['No patients found for "',e,'"']}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[p&&r.jsxs("button",{type:"button",onClick:()=>Ae("phone"),className:"create-patient-btn",children:[r.jsx(Gn,{size:16})," Create patient with phone: ",e]}),x&&r.jsxs("button",{type:"button",onClick:()=>Ae("name"),className:"create-patient-btn",children:[r.jsx(Gn,{size:16})," Create patient: ",e]})]})]}),e.length<2&&r.jsxs("div",{className:"recent-patients-section",children:[r.jsx("h3",{children:"Recent Patients"}),_?r.jsx("div",{className:"recent-patients-list",children:[1,2,3].map(xe=>r.jsx("div",{className:"recent-patient-chip skeleton",children:r.jsx(Z,{width:100,height:20})},xe))}):r.jsx("div",{className:"recent-patients-list",children:j.map(xe=>r.jsxs("button",{onClick:()=>me(xe),className:"recent-patient-chip",children:[r.jsx("span",{className:"chip-avatar",children:xe.name.charAt(0)}),r.jsx("span",{children:xe.name})]},xe.id))})]})]}),l&&r.jsx("div",{className:"medical-workspace no-print",children:r.jsxs("div",{className:"medical-grid",children:[r.jsxs("section",{className:"procedures-section no-print",children:[r.jsxs("div",{className:"medical-card procedures-container",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:"Available Procedures"}),r.jsx("button",{className:"manage-procedures-btn",onClick:()=>G(!0),children:"Manage"})]}),r.jsx("div",{className:"procedure-search-bar",style:{padding:"0 16px 12px 16px"},children:r.jsxs("div",{className:"search-input-wrapper header-variant",style:{background:"var(--mp-bg-sec)"},children:[r.jsx(Fn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search procedures...",className:"medical-search-input header-input",value:ie,onChange:xe=>W(xe.target.value),style:{background:"transparent"}}),ie&&r.jsx("button",{onClick:()=>W(""),className:"clear-search-btn",style:{border:"none",background:"transparent",cursor:"pointer",color:"var(--mp-text-sec)"},children:r.jsx($t,{size:14})})]})}),r.jsx("div",{className:"procedures-list",children:Object.entries(Fe).map(([xe,te])=>r.jsxs("div",{className:"procedure-category-group",children:[r.jsx("h4",{className:"category-label",children:xe.replace("_"," ")}),te.map(oe=>r.jsxs("div",{onClick:()=>X(oe),className:"procedure-item",children:[r.jsx("span",{className:"proc-name",children:oe.name}),r.jsxs("span",{className:"proc-cost",children:["",oe.cost]})]},oe.id))]},xe))})]}),r.jsxs("div",{className:"medical-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("span",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>Ne(!1),disabled:F,children:[r.jsx(cs,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:O,onChange:xe=>I(xe.target.value)})]})]}),r.jsx("section",{className:"plan-section no-print",children:r.jsxs("div",{className:"medical-card full-height",children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{className:$==="plan"?"active":"",onClick:()=>L("plan"),children:"Treatment Plan"}),r.jsx("button",{className:$==="history"?"active":"",onClick:()=>L("history"),children:"History"})]}),$==="plan"&&r.jsxs("div",{className:"treatment-plan-container",children:[r.jsx("div",{className:"treatment-plan-list",children:E.length===0?r.jsx("p",{className:"empty-plan-message no-print",children:"Click on procedures to add them to the treatment plan."}):E.map(xe=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",children:xe.name}),r.jsxs("div",{className:"plan-item-controls",children:[r.jsx("input",{type:"number",className:"cost-input",value:xe.price,onChange:te=>de(xe.instanceId,parseFloat(te.target.value)||0)}),r.jsx("button",{className:"remove-proc-btn",onClick:()=>ae(xe.instanceId),children:r.jsx(Vn,{size:14})})]})]},xe.instanceId))}),E.length>0&&r.jsxs("div",{className:"plan-total",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{className:"total-amount",children:["",Te.toFixed(2)]})]})]}),$==="history"&&r.jsx("div",{className:"history-list",children:V.length===0?r.jsx("p",{className:"empty-plan-message",children:"No previous records found."}):V.map(xe=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(xe.date||xe.createdAt||Date.now()).toLocaleDateString()}),r.jsx("span",{className:`record-status status-${xe.status}`,children:xe.status})]}),r.jsx("div",{className:"history-procedures",children:xe.selected_procedures.map((te,oe)=>r.jsx("span",{className:"history-proc-tag",children:te.name},oe))}),xe.notes&&r.jsxs("div",{className:"history-notes",children:[r.jsx("strong",{children:"Notes:"})," ",xe.notes.substring(0,100),"..."]}),r.jsxs("div",{className:"history-record-actions",children:[xe.status==="draft"&&r.jsxs("button",{className:"edit-record-btn",onClick:()=>ee(xe.id),children:[r.jsx(ro,{size:14})," Edit"]}),xe.bill_id&&r.jsxs("button",{className:"view-bill-btn",onClick:()=>{Y(xe.id),ce(!0)},children:[r.jsx(Ra,{size:14})," View Bill"]})]})]},xe.id))}),r.jsx("div",{className:"action-footer no-print",children:r.jsx("button",{className:"save-btn",onClick:()=>Ne(!0),disabled:F||E.length===0,children:F?"Saving...":"Save & Bill"})})]})})]})}),d&&l&&r.jsx(ZH,{patient:l,onClose:()=>f(!1),onSave:le}),q&&r.jsx(fDe,{onClose:()=>G(!1),onUpdate:Le}),z&&je&&r.jsx(NDe,{isOpen:z,onClose:()=>ce(!1),recordId:je,onBillingComplete:()=>{l&&se(`/api/medical/patient/${l.id}`).then(xe=>xe.json()).then(xe=>H(xe)).catch(console.error)}})]})},_De=({isOpen:t,onClose:e,patientId:n,patientName:a,onRecordPayment:i})=>{const[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(null),[p,g]=v.useState(!1),x=v.useCallback(async()=>{if(!(!t||!n)){g(!0),f(null);try{const j=await se(`/api/patient-debts/${n}/transactions`);if(!j.ok)throw new Error(`Failed to fetch transactions: ${j.statusText}`);const _=(await j.json()).map(E=>({...E,debt_value:parseFloat(E.debt_value),amount_paid:parseFloat(E.amount_paid),balance_remaining:parseFloat(E.balance_remaining)}));o(_);const T=await se(`/api/patient-debts/${n}/balance`);if(!T.ok)throw new Error(`Failed to fetch balance: ${T.statusText}`);const C=await T.json();c({patientId:C.patientId,patientName:C.patientName,totalDebtValue:parseFloat(C.totalDebtValue),totalAmountPaid:parseFloat(C.totalAmountPaid),netDebt:parseFloat(C.netDebt)})}catch(j){console.error("Error fetching transactions/balance:",j),f(j.message||"Failed to load transactions or balance.")}finally{g(!1)}}},[t,n]);if(v.useEffect(()=>{t&&x()},[t,x]),!t)return null;const b=r.jsxs("div",{id:"debt-history-modal-root",className:"modal-overlay",children:[r.jsx("style",{children:`
                @media print {
                    body > * { display: none !important; }
                    #root { display: none !important; }
                    #debt-history-modal-root {
                        display: flex !important;
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        background: white !important;
                        z-index: 99999 !important;
                        align-items: flex-start !important; /* Start from top for long lists */
                        overflow-y: auto !important;
                    }
                    #debt-history-modal-root .modal-content {
                        box-shadow: none !important;
                        border: none !important;
                        width: 100% !important;
                        max-width: 100% !important;
                        margin: 0 !important;
                        padding: 20px !important;
                    }
                    /* Ensure visibility of children */
                    #debt-history-modal-root * { visibility: visible !important; }
                    
                    /* Hide non-print elements */
                    .modal-close-button,
                    .view-button,
                    .modal-actions {
                        display: none !important;
                    }
                    
                    .balance-summary {
                         page-break-inside: avoid;
                    }
                    
                    .debt-table {
                        width: 100% !important;
                    }
                    
                    /* Reset table colors for print */
                    .debt-table th {
                        background-color: #f3f4f6 !important;
                        color: black !important;
                        -webkit-print-color-adjust: exact;
                    }
                }
            `}),r.jsxs("div",{className:"modal-content large-modal printable-section",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border-color)",paddingBottom:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"var(--text-color)"},children:["Debt History for ",a]}),r.jsxs("button",{onClick:()=>window.print(),className:"action-text-button view-button",title:"Print Ledger",children:[r.jsx(vf,{size:16})," Print Ledger"]})]}),d&&r.jsx("div",{className:"modal-error-message",children:d}),p&&r.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}),!p&&l&&r.jsxs("div",{className:"balance-summary",children:[r.jsxs("div",{className:"balance-row",children:[r.jsx("span",{children:"Total Debt Value:"}),r.jsxs("strong",{children:["",l.totalDebtValue.toFixed(2)]})]}),r.jsxs("div",{className:"balance-row",children:[r.jsx("span",{children:"Total Amount Paid:"}),r.jsxs("strong",{className:"amount-paid",children:["",l.totalAmountPaid.toFixed(2)]})]}),r.jsxs("div",{className:"balance-row net-debt-row",children:[r.jsx("span",{children:r.jsx("strong",{children:"Net Outstanding Debt:"})}),r.jsxs("strong",{className:l.netDebt>0?"debt-outstanding":"debt-clear",children:["",l.netDebt.toFixed(2)]})]})]}),r.jsx("h4",{children:"Transaction History"}),!p&&s.length===0?r.jsx("p",{children:"No transactions recorded for this patient."}):r.jsx("div",{className:"table-responsive",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Debt Added"}),r.jsx("th",{children:"Payment Received"}),r.jsx("th",{children:"Balance After"}),r.jsx("th",{children:"Due Date"}),r.jsx("th",{children:"Payment Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:s.map(j=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(j.transaction_date).toLocaleDateString()}),r.jsx("td",{"data-label":"Debt Added",className:j.debt_value>0?"debt-added":"",children:j.debt_value>0?`+ ${j.debt_value.toFixed(2)}`:"-"}),r.jsx("td",{"data-label":"Payment Received",className:j.amount_paid>0?"payment-received":"",children:j.amount_paid>0?`- ${j.amount_paid.toFixed(2)}`:"-"}),r.jsxs("td",{"data-label":"Balance After",children:["",j.balance_remaining.toFixed(2)]}),r.jsx("td",{"data-label":"Due Date",children:j.due_date?new Date(j.due_date).toLocaleDateString():"-"}),r.jsx("td",{"data-label":"Payment Mode",children:j.payment_mode?j.payment_mode.charAt(0).toUpperCase()+j.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",children:j.notes||"-"})]},j.id))})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:()=>{i()},className:"button-submit",children:"Record Payment"}),r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Close"})]})]})]});return zO.createPortal(b,document.body)},CDe=({isOpen:t,onClose:e,patientId:n,patientName:a,currentDebt:i,onPaymentSuccess:s})=>{const[o,l]=v.useState(""),[c,d]=v.useState(""),[f,p]=v.useState(""),[g,x]=v.useState("cash"),[b,j]=v.useState(null),[S,_]=v.useState(!1);v.useEffect(()=>{t&&(l(new Date().toISOString().split("T")[0]),d(""),p(""),x("cash"),j(null),_(!1))},[t]);const T=async E=>{if(E.preventDefault(),j(null),!n)return;const k=parseFloat(c||"0");if(k<=0){j("Payment amount must be greater than 0");return}_(!0);try{const O=await se(`/api/patient-debts/${n}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:o,amount_paid:k,notes:f,payment_mode:g})});if(!O.ok){const I=await O.json();throw new Error(I.message||"Failed to add payment.")}s(),e(),window.confirm("Payment Recorded. Print Receipt?")&&setTimeout(()=>window.print(),500)}catch(O){console.error("Error adding payment:",O),j(O.message||"Failed to add payment.")}finally{_(!1)}};if(!t||!t)return null;const C=r.jsxs("div",{id:"add-payment-modal-root",className:"modal-overlay",children:[r.jsx("style",{children:`
                 /* Print styles for Add Payment Modal (if ever needed to print the form itself) */
                @media print {
                    body > * { display: none !important; }
                    #root { display: none !important; }
                    #add-payment-modal-root {
                        display: flex !important;
                        position: fixed !important;
                        top: 0 !important;
                        left: 0 !important;
                        width: 100vw !important;
                        height: 100vh !important;
                        background: white !important;
                        z-index: 99999 !important;
                        align-items: center !important;
                        justify-content: center !important;
                    }
                    #add-payment-modal-root .modal-content {
                        box-shadow: none !important;
                        border: none !important;
                        width: 100% !important;
                        max-width: 100% !important;
                    }
                    #add-payment-modal-root * { visibility: visible !important; }
                    .button-cancel, .button-submit, .modal-close-button { display: none !important; }
                }
            `}),r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:""}),r.jsxs("h3",{className:"modal-title",children:["Record Payment for ",a]}),r.jsxs("div",{className:"current-debt-info",children:[r.jsx("span",{children:"Current Outstanding Debt:"}),r.jsxs("strong",{className:"debt-outstanding",children:["",i]})]}),b&&r.jsx("div",{className:"modal-error-message",children:b}),r.jsxs("form",{onSubmit:T,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_date",children:"Payment Date:"}),r.jsx("input",{type:"date",id:"payment_date",value:o,onChange:E=>l(E.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"amount_paid",children:"Amount Paid ():"}),r.jsx("input",{type:"number",id:"amount_paid",value:c,onChange:E=>d(E.target.value),step:"0.01",min:"0.01",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_mode",children:"Payment Mode:"}),r.jsxs("select",{id:"payment_mode",value:g,onChange:E=>x(E.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",value:f,onChange:E=>p(E.target.value),placeholder:"e.g., Partial payment via cash"})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",disabled:S,children:S?"Recording...":"Record Payment"})]})]})]})]});return zO.createPortal(C,document.body)},PN=()=>{const t=Lt(),e=ds(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(""),[f,p]=v.useState("debtHighToLow"),[g,x]=v.useState(!0),[b,j]=v.useState(""),[S,_]=v.useState(!1),[T,C]=v.useState(!1),[E,k]=v.useState(null),[O,I]=v.useState(0),F=v.useMemo(()=>{let q=[...n];g&&(q=q.filter(ie=>parseFloat(ie.netDebt)>0));const G=parseFloat(b);switch(!isNaN(G)&&G>0&&(q=q.filter(ie=>parseFloat(ie.netDebt)>=G)),f){case"name":q.sort((ie,W)=>ie.name.localeCompare(W.name));break;case"debtHighToLow":q.sort((ie,W)=>parseFloat(W.netDebt)-parseFloat(ie.netDebt));break;case"debtLowToHigh":q.sort((ie,W)=>parseFloat(ie.netDebt)-parseFloat(W.netDebt));break}return q},[n,g,b,f]),B=v.useCallback(async()=>{s(!0),l(null);try{const q=c?`/api/patient-debts?search=${encodeURIComponent(c)}`:"/api/patient-debts",G=await se(q);if(!G.ok)throw new Error(`Failed to fetch patients with debt: ${G.statusText}`);const ie=await G.json();a(ie);const W=ie.reduce((z,ce)=>z+parseFloat(ce.netDebt||"0"),0);I(W)}catch(q){console.error("Failed to fetch patients with debt:",q),l(q.message||"Failed to load patients with debt.")}finally{s(!1)}},[c]);v.useEffect(()=>{B()},[B]);const $=q=>{q&&(e.prefetchQuery({queryKey:Gt.patients.context(q),queryFn:async()=>{const G=await se(`/api/patients/${q}/context`);if(!G.ok)throw new Error("Failed to fetch patient context");return G.json()},staleTime:1e3*60*5}),e.prefetchQuery({queryKey:Gt.patientDebts.balance(q),queryFn:async()=>{const G=await se(`/api/patient-debts/${q}/balance`);if(!G.ok)throw new Error("Failed to fetch patient debt");return G.json()},staleTime:1e3*60}),e.prefetchQuery({queryKey:Gt.queue.latest(q),queryFn:async()=>{const G=await se(`/api/queue/patient/${q}/latest`);if(!G.ok){if(G.status===404)return null;throw new Error("Failed to fetch queue status")}return G.json()},staleTime:1e3*5}))},L=v.useCallback(()=>{B()},[B]),V=q=>{k(q),_(!0)},H=()=>{_(!1),k(null)},ne=q=>{k(q),C(!0)},Q=()=>{C(!1),k(null)};return i?r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{width:80,height:36}),r.jsx(Z,{width:200,height:32})]}),r.jsx(Z,{width:250,height:36})]}),r.jsxs("div",{className:"filter-container",children:[r.jsx(Z,{width:200,height:40}),r.jsx(Z,{width:120,height:40}),r.jsx(Z,{width:100,height:40}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Total Debt Value"}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6].map(q=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:32})})]},q))})]})})]}):r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(on,{size:20})}),r.jsx("h2",{children:"Patient Debt Management"})]}),r.jsxs("div",{className:`total-debt-display ${O>0?"debt-positive":"debt-zero"}`,children:[r.jsx(cd,{size:20}),r.jsx("strong",{children:"Total Outstanding Debt:"})," ",O.toFixed(2)]})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("div",{className:"filter-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or phone...",value:c,onChange:q=>d(q.target.value),className:"filter-search-input"}),r.jsxs("select",{id:"sortBy",value:f,onChange:q=>p(q.target.value),className:"filter-select",title:"Sort by",children:[r.jsx("option",{value:"debtHighToLow",children:"Debt "}),r.jsx("option",{value:"debtLowToHigh",children:"Debt "}),r.jsx("option",{value:"name",children:"Name A-Z"})]}),r.jsx("input",{type:"number",id:"minDebt",value:b,onChange:q=>j(q.target.value),placeholder:"Min ",min:"0",className:"filter-number-input",title:"Minimum debt amount"}),r.jsxs("label",{className:"filter-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:q=>x(q.target.checked)}),"Outstanding only"]}),r.jsxs("span",{className:"filter-count",children:[F.length,"/",n.length]})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsxs("th",{children:[r.jsx(Jn,{size:14})," Patient Name"]}),r.jsxs("th",{children:[r.jsx(eg,{size:14})," Phone"]}),r.jsxs("th",{children:[r.jsx(hw,{size:14})," Total Debt Value"]}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{className:"actions-cell",children:"Actions"})]})}),r.jsx("tbody",{children:F.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"no-results-message",children:c?"No patients found matching your search.":"No patients with outstanding debt."})}):F.map(q=>r.jsxs("tr",{onClick:()=>t(`/dashboard/edit-complaint/patient/${q.id}`),onMouseEnter:()=>$(q.id),style:{cursor:"pointer"},title:"Click to view patient details",children:[r.jsx("td",{"data-label":"Patient Name",children:r.jsxs("div",{className:"patient-name-cell",children:[r.jsx("strong",{children:q.name}),q.age&&q.gender&&r.jsxs("span",{className:"patient-meta",children:[q.age,"y / ",q.gender]})]})}),r.jsx("td",{"data-label":"Phone",children:q.phone||"-"}),r.jsxs("td",{"data-label":"Total Debt Value",children:["",q.totalDebtValue]}),r.jsxs("td",{"data-label":"Total Paid",className:"amount-paid",children:["",q.totalAmountPaid]}),r.jsxs("td",{"data-label":"Net Debt",className:parseFloat(q.netDebt)>0?"debt-outstanding":"debt-clear",children:["",q.netDebt]}),r.jsx("td",{className:"actions-cell",onClick:G=>G.stopPropagation(),children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsxs("button",{onClick:()=>V(q),className:"action-text-button view-button",title:"View Transactions",children:[r.jsx(Im,{size:16})," View History"]}),r.jsxs("button",{onClick:()=>ne(q),className:"action-text-button add-payment-button",title:"Record Payment",children:[r.jsx(Ps,{size:16})," Record Payment"]})]})})]},q.id))})]})}),S&&E&&r.jsx(_De,{isOpen:S,onClose:H,patientId:E.id,patientName:E.name,onRecordPayment:()=>{H(),C(!0)}}),T&&E&&r.jsx(CDe,{isOpen:T,onClose:Q,patientId:E.id,patientName:E.name,currentDebt:E.netDebt,onPaymentSuccess:()=>{L(),_(!0)}})]})},TDe=()=>{const t=v.useRef(null),e=v.useRef(null),[n,a]=v.useState(!1),[i,s]=v.useState(0),[o,l]=v.useState(!1),[c,d]=v.useState(!1),[f,p]=v.useState(null),g=30,x=100,b=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:!0});t.current&&(t.current.srcObject=_,d(!0),p(null))}catch(_){console.error("Error accessing camera:",_),p("Camera access denied. Please allow camera permissions to use motion detection."),d(!1)}},j=()=>{var T;const _=(T=t.current)==null?void 0:T.srcObject;_&&_.getTracks().forEach(C=>C.stop()),d(!1)};v.useEffect(()=>(b(),()=>j()),[]),v.useEffect(()=>{if(!c)return;let _;const T=e.current,C=t.current;if(!T||!C)return;const E=T.getContext("2d",{willReadFrequently:!0});if(!E)return;const k=320,O=240;T.width=k,T.height=O;let I=null;const F=()=>{if(C.readyState===C.HAVE_ENOUGH_DATA){E.drawImage(C,0,0,k,O);const $=E.getImageData(0,0,k,O).data;if(I){let L=0;for(let V=0;V<$.length;V+=4*4){const H=Math.abs($[V]-I[V]),ne=Math.abs($[V+1]-I[V+1]),Q=Math.abs($[V+2]-I[V+2]);H+ne+Q>g&&L++}if(L>x){const V=Date.now();s(V),a(!0),o||l(!0)}else a(!1)}I=$}_=requestAnimationFrame(F)};return F(),()=>{cancelAnimationFrame(_)}},[c,o]);const S=()=>{l(!1)};return r.jsxs("div",{className:"motion-detect-container",style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{className:"status-header bg-white p-4 rounded-lg shadow-sm flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${c?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:r.jsx(xE,{size:24})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Motion Detection Status"}),r.jsx("p",{className:"text-sm text-gray-500",children:c?"Camera Active - Monitoring":"Camera Inactive"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${n?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(jc,{size:16}),r.jsx("span",{className:"font-medium",children:n?"Motion Detected!":"No Motion"})]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${o?"bg-blue-50 border-blue-200 text-blue-600":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(bE,{size:16}),r.jsx("span",{className:"font-medium",children:o?"AI Assistant Active":"AI Assistant Idle"})]})]})]}),f&&r.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-200",children:f}),r.jsxs("div",{className:"video-feed-container bg-black rounded-lg overflow-hidden relative shadow-lg",style:{maxWidth:"640px",margin:"0 auto"},children:[r.jsx("video",{ref:t,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",display:c?"block":"none"}}),r.jsx("canvas",{ref:e,style:{display:"none"}}),!c&&!f&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:r.jsxs("div",{className:"text-center",children:[r.jsx(xE,{size:48,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Connecting to camera..."})]})})]}),o&&r.jsx(nS,{onClose:S,patientData:null,tokenNumber:null,onAiSummaryChange:()=>{},lastMotionTimestamp:i,backgroundMode:!0})]})},kDe=async()=>{const t=await se("/api/staff");if(!t.ok)throw new Error("Failed to fetch staff");const e=await t.json();return e.staff||e||[]};function ADe(){return DN({queryKey:[...Gt.staff.list,"doctors"],queryFn:kDe,staleTime:5*60*1e3,select:t=>t.filter(e=>e.role==="doctor"||e.role==="admin")})}const FA=({currentUser:t})=>{const[e,n]=v.useState("queue"),[a,i]=v.useState(""),[s,o]=v.useState(new Date),l=s.toISOString().split("T")[0],[c,d]=v.useState(!1),[f,p]=v.useState("list"),{data:g,isLoading:x,refetch:b}=QH(l),j=(g==null?void 0:g.list)||[],{data:S=[],isLoading:_}=ADe(),T=cDe(),C=ds(),[E,k]=v.useState(null),[O,I]=v.useState(null),F=Lt(),B=$r(),$=()=>{b()};v.useEffect(()=>{const z=new URLSearchParams(B.search).get("tab");z&&Q.find(je=>je.id===z)&&n(z)},[B.search]),v.useEffect(()=>{e==="queue"&&b()},[e,b]);const L=v.useCallback(async(W,z)=>{if(console.log(`Attempting to assign doctor ${z} to queue ${W}`),I(null),k(null),!z){console.log("No doctor ID provided, skipping assignment.");return}const ce=j.find(Ie=>Ie.id===W);if(!ce){console.error(`Queue entry ${W} not found in local state.`),I("Queue entry not found.");return}if(ce.doctor_id===z){console.log(`Queue ${W} already assigned to doctor ${z}. Skipping.`);return}const je=async Ie=>{if(!Ie||!Ie.id||!Ie.name){I("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",Ie);return}const Ue=async()=>{try{await T.mutateAsync({queueId:W,status:"waiting",doctorId:z});const ze=S.find(Le=>Le.id===z);return console.log(`Successfully assigned doctor ${ze==null?void 0:ze.name} to queue ${W}.`),!0}catch(ze){return console.error(`Error assigning doctor for queue ${W}:`,ze),I(`Failed to assign doctor: ${ze.message}`),!1}};Ie.subscription_status==="active"?(console.log(`Patient ${Ie.name} (ID: ${Ie.id}) has active subscription. Assigning doctor directly.`),await Ue()):(console.log(`Patient ${Ie.name} (ID: ${Ie.id}) does not have active subscription. Navigating to billing WITHOUT assigning doctor yet.`),F(`/dashboard/doctor-billing/${W}?doctorId=${z}`))},Y=ce.Patient;if(Y&&Y.id&&Y.name)console.log("Patient details found in state. Proceeding with assignment."),await je(Y);else{console.warn(`Patient details missing for queue entry ${W}. Fetching patient ${ce.patient_id}...`);try{const Ie=await se(`/api/patients/${ce.patient_id}`);if(!Ie.ok){const ze=await Ie.json().catch(()=>({}));throw new Error(ze.message||`Failed to fetch patient details (status ${Ie.status})`)}const Ue=await Ie.json();console.log("Successfully fetched patient details:",Ue),await je(Ue)}catch(Ie){console.error(`Failed to fetch patient details for patient ID ${ce.patient_id}:`,Ie),I(`Failed to fetch required patient details: ${Ie.message}`)}}},[S,j,F,T]),V=W=>{W&&(C.prefetchQuery({queryKey:Gt.patients.context(W),queryFn:async()=>{const z=await se(`/api/patients/${W}/context`);if(!z.ok)throw new Error("Failed to fetch patient context");return z.json()},staleTime:5*60*1e3}),C.prefetchQuery({queryKey:Gt.patientDebts.balance(W),queryFn:async()=>{const z=await se(`/api/patient-debts/${W}/balance`);return z.ok?z.json():{netDebt:0}},staleTime:1*60*1e3}),C.prefetchQuery({queryKey:Gt.queue.latest(W),queryFn:async()=>{const z=await se(`/api/queue/patient/${W}/latest`);if(!z.ok)throw new Error("Failed to fetch latest queue status");const ce=await z.json();return ce!=null&&ce._id&&C.prefetchQuery({queryKey:Gt.queue.entry(ce._id),queryFn:async()=>{const je=await se(`/api/queue/doctor/complaint/${ce._id}`);if(!je.ok)throw new Error("Failed to fetch complaint record");return je.json()},staleTime:1*60*1e3}),ce},staleTime:5e3}),C.prefetchQuery({queryKey:Gt.dental.records(W),queryFn:async()=>{const z=await se(`/api/dental/patient/${W}`);if(!z.ok)throw new Error("Failed to fetch dental records");return z.json()},staleTime:5*60*1e3}))},H=async(W,z)=>{var je;I(null);const ce=z==="consulting"?"start consultation":"complete visit";try{await T.mutateAsync({queueId:W,status:z,doctorId:z==="consulting"&&((je=j.find(Y=>Y.id===W))==null?void 0:je.doctor_id)||void 0})}catch(Y){console.error(`Error trying to ${ce}:`,Y),I(`Failed to ${ce}: ${Y.message}`)}},ne=async(W,z)=>{let ce="red";z==="red"?ce="green":z==="green"?ce="blue":z==="blue"?ce=null:ce="red";try{if(!(await se(`/api/patients/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_code:ce})})).ok)throw new Error("Failed to update patient color");b()}catch(je){console.error("Error updating patient color:",je)}},Q=[{id:"queue",label:"Appointment Queue",icon:r.jsx(Os,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:r.jsx(Fn,{size:20})},{id:"manage-admission",label:"Manage Admission",icon:r.jsx(NQ,{size:20})},{id:"all-patients",label:"All Patients",icon:r.jsx(kb,{size:20})},{id:"lab",label:"Lab Tests",icon:r.jsx(Qj,{size:20})},{id:"custom-bill",label:"Custom Bill",icon:r.jsx(Ps,{size:20})},{id:"medical",label:"Medical",icon:r.jsx(_X,{size:20})},{id:"motion-detect",label:"Motion Detect",icon:r.jsx(xE,{size:20})},{id:"debt-management",label:"Debt",icon:r.jsx(cd,{size:20})}],q=W=>{try{return new Date(W).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},G=j.filter(W=>{var z,ce;return(ce=(z=W.Patient)==null?void 0:z.name)==null?void 0:ce.toLowerCase().includes(a.toLowerCase())}),{openCommandBar:ie}=Dc();return r.jsxs("div",{className:"reception-app",children:[O&&r.jsxs("div",{className:"reception-error",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:O})]}),r.jsx("div",{className:"reception-nav",children:Q.map(W=>r.jsxs("button",{className:`reception-nav-item ${e===W.id?"active":""}`,onClick:()=>{W.id==="newtons-ai"?ie():n(W.id)},children:[r.jsx("span",{children:W.icon}),W.label]},W.id))}),r.jsxs("div",{className:"reception-main",children:[e==="queue"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"reception-header",children:[r.jsxs("div",{className:"reception-actions",children:[r.jsxs("div",{className:"reception-search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patients...",className:"reception-search-input",value:a,onChange:W=>i(W.target.value)}),r.jsx(Fn,{className:"reception-search-icon",size:18})]}),r.jsxs("div",{className:"reception-controls",children:[r.jsxs("div",{className:"reception-view-toggle",children:[r.jsxs("button",{className:`reception-toggle-option ${f==="list"?"active":""}`,onClick:()=>p("list"),title:"List View",children:[r.jsx($z,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"List"})]}),r.jsxs("button",{className:`reception-toggle-option ${f==="timeline"?"active":""}`,onClick:()=>p("timeline"),title:"Timeline View",children:[r.jsx(VO,{size:16}),r.jsx("span",{className:"desktop-only",style:{display:"inline-block"},children:"Timeline"})]})]}),r.jsx("div",{className:"reception-btn-icon",style:{width:"auto",padding:"0 10px",gap:"8px"},children:r.jsx("input",{type:"date",className:"bg-transparent border-none outline-none text-sm dark:text-white",value:s.toISOString().split("T")[0],onChange:W=>o(new Date(W.target.value))})}),r.jsxs("button",{onClick:()=>d(!0),className:"reception-btn-primary",children:[r.jsx(Tb,{size:16}),r.jsx("span",{children:"Book Appointment"})]})]})]}),r.jsxs("div",{className:"reception-stats",children:[r.jsxs("div",{className:"reception-stat-card stat-waiting",children:[r.jsx("div",{className:"reception-stat-label",children:"Waiting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(W=>W.status==="waiting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-consulting",children:[r.jsx("div",{className:"reception-stat-label",children:"Consulting"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(W=>W.status==="consulting").length})]}),r.jsxs("div",{className:"reception-stat-card stat-completed",children:[r.jsx("div",{className:"reception-stat-label",children:"Completed"}),r.jsx("div",{className:"reception-stat-value",children:j.filter(W=>W.status==="seen").length})]})]})]}),r.jsx(KH,{isOpen:c,onClose:()=>{d(!1),b()},onAppointmentBooked:$}),x&&j.length===0?r.jsx("div",{className:"reception-card",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:50,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{className:"hidden md:table-cell",children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:120,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(W=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:32})})]},W))})]})}):G.length===0?r.jsx("div",{className:"empty-queue-message",children:a?"No patients found matching your search.":"Queue is empty."}):f==="timeline"?r.jsx(YH,{queueList:G,onPatientClick:W=>F(`/dashboard/edit-complaint/${W.id}`)}):r.jsx("div",{className:"reception-card reception-table-wrapper",children:r.jsxs("table",{className:"reception-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"hidden-mobile",children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Phone"}),r.jsx("th",{className:"hidden-mobile",children:"Complaint"}),r.jsx("th",{className:"hidden-mobile",children:"Subscription"}),r.jsx("th",{className:"hidden-mobile",children:"Time"}),r.jsx("th",{className:"text-center",children:"Action"})]})}),r.jsx("tbody",{children:G.map(W=>{var z,ce,je,Y,Ie,Ue,ze,Le,be,Ce,Ae,me;return r.jsxs("tr",{onClick:()=>F(`/dashboard/edit-complaint/${W.id}`),onMouseEnter:()=>W.patient_id&&V(W.patient_id),className:"reception-row",children:[r.jsxs("td",{className:"hidden-mobile",children:[" ",r.jsxs("span",{className:"queue-token",children:["#",W.token_no]})," "]}),r.jsx("td",{children:r.jsxs("div",{className:"patient-cell-content",children:[r.jsx("span",{className:"reception-color-dot",style:{backgroundColor:((z=W.Patient)==null?void 0:z.color_code)||"#cbd5e1"},onClick:ye=>{var le;ye.stopPropagation(),(le=W.Patient)!=null&&le.id&&ne(W.Patient.id,W.Patient.color_code)},title:"Click to change color"}),r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:((ce=W.Patient)==null?void 0:ce.name)||"N/A"}),r.jsxs("span",{className:"details",children:[(je=W.Patient)!=null&&je.age?`${W.Patient.age}y`:"",(Y=W.Patient)!=null&&Y.gender?`, ${W.Patient.gender}`:""]})]})]})}),r.jsxs("td",{className:"desktop-only",children:[" ",r.jsx("div",{className:"text-sm text-gray-500",children:((Ie=W.Patient)==null?void 0:Ie.phone)||"-"})," "]}),r.jsx("td",{className:"desktop-only",children:r.jsx("span",{className:"reception-badge badge-neutral",children:W.complaint||"-"})}),r.jsxs("td",{className:"desktop-only",children:[r.jsx("span",{className:`reception-badge ${((Ue=W.Patient)==null?void 0:Ue.subscription_status)==="active"?"badge-active":((ze=W.Patient)==null?void 0:ze.subscription_status)==="cancelled"||((Le=W.Patient)==null?void 0:Le.subscription_status)==="expired"?"badge-inactive":"badge-neutral"}`,children:((be=W.Patient)==null?void 0:be.subscription_status)??"None"}),W.Patient&&W.Patient.id&&W.Patient.subscription_status!=="active"&&r.jsx("button",{onClick:ye=>{ye.stopPropagation(),W.Patient&&F(`/start-subscription/${W.Patient.id}`)},className:"btn-start-sub ml-2",children:"Start Sub"})]}),r.jsx("td",{className:"hidden-mobile text-sm text-gray-500",children:q(W.createdAt)}),r.jsx("td",{className:"action-doctor-cell",children:E===W.id?r.jsx("div",{className:"relative inline-block text-left w-full",onClick:ye=>ye.stopPropagation(),children:r.jsxs("select",{value:"",onChange:ye=>L(W.id,ye.target.value),onBlur:()=>k(null),className:"doctor-select",autoFocus:!0,children:[r.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),_?r.jsx("option",{disabled:!0,children:"Loading..."}):S.length>0?S.map(ye=>r.jsx("option",{value:ye.id,children:ye.name},ye.id)):r.jsx("option",{disabled:!0,children:"No doctors available"})]})}):r.jsxs("div",{className:"action-doctor-content",onClick:ye=>ye.stopPropagation(),children:[W.status==="waiting"&&r.jsx(r.Fragment,{children:(Ce=W.User)!=null&&Ce.name?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"doctor-name-display",children:W.User.name}),r.jsx("button",{onClick:()=>H(W.id,"consulting"),className:"btn-action btn-start",children:"Start"})]}):_?r.jsx(Z,{width:80,height:20}):S.length===0?r.jsx("span",{className:"text-red-500 text-xs",children:"No docs"}):S.length===1?r.jsxs("button",{onClick:()=>L(W.id,S[0].id),className:"btn-action btn-assign",children:["Assign ",S[0].name.split(" ")[0]]}):r.jsx("button",{onClick:()=>k(W.id),className:"btn-action btn-assign",children:"Assign"})}),W.status==="consulting"&&r.jsxs(r.Fragment,{children:[((Ae=W.User)==null?void 0:Ae.name)&&r.jsx("span",{className:"doctor-name-display",children:W.User.name}),r.jsx("button",{onClick:()=>H(W.id,"seen"),className:"btn-action btn-complete",children:"Complete"})]}),W.status==="seen"&&r.jsxs(r.Fragment,{children:[((me=W.User)==null?void 0:me.name)&&r.jsx("span",{className:"doctor-name-display",children:W.User.name}),r.jsx("span",{className:"text-gray-400 italic text-xs",children:"Done"})]}),W.status==="cancelled"&&r.jsx("span",{className:"text-red-500 italic text-xs",children:"Cancelled"})]})})]},W.id)})})]})})]}),e==="lab"&&r.jsxs("div",{className:"lab-tab-content",children:[" ",r.jsx(JH,{currentUser:t}),r.jsxs("button",{onClick:()=>F("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[r.jsx(Fn,{size:16}),"Search Lab Reports"]})]}),e==="newtons-ai"&&r.jsx("div",{className:"newtons-ai-tab-content",children:r.jsx(gv,{})}),e==="manage-admission"&&r.jsx("div",{className:"manage-admission-tab-content",children:r.jsx(PM,{})}),e==="all-patients"&&r.jsx("div",{className:"all-patients-tab-content",children:r.jsx(wO,{})}),e==="custom-bill"&&r.jsx("div",{className:"custom-bill-tab-content",children:r.jsx(XH,{})}),e==="medical"&&r.jsx("div",{className:"medical-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(dG,{})}),e==="motion-detect"&&r.jsx("div",{className:"motion-detect-tab-content",style:{height:"100%"},children:r.jsx(TDe,{})}),e==="debt-management"&&r.jsx("div",{className:"debt-management-tab-content",style:{height:"100%",overflow:"hidden"},children:r.jsx(PN,{})})]})]})},hG=6048e5,EDe=864e5,fG=6e4,pG=36e5,wB=Symbol.for("constructDateFrom");function qo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&wB in t?t[wB](e):t instanceof Date?new t.constructor(e):new Date(e)}function mi(t,e){return qo(e||t,t)}function PDe(t,e,n){const a=mi(t,n==null?void 0:n.in);if(isNaN(e))return qo(t,NaN);const i=a.getDate(),s=qo(t,a.getTime());s.setMonth(a.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(a.setFullYear(s.getFullYear(),s.getMonth(),i),a)}let ODe={};function $S(){return ODe}function yb(t,e){var l,c,d,f;const n=$S(),a=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=mi(t,e==null?void 0:e.in),s=i.getDay(),o=(s<a?7:0)+s-a;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ON(t,e){return yb(t,{...e,weekStartsOn:1})}function mG(t,e){const n=mi(t,e==null?void 0:e.in),a=n.getFullYear(),i=qo(n,0);i.setFullYear(a+1,0,4),i.setHours(0,0,0,0);const s=ON(i),o=qo(n,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=ON(o);return n.getTime()>=s.getTime()?a+1:n.getTime()>=l.getTime()?a:a-1}function NB(t){const e=mi(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function DDe(t,...e){const n=qo.bind(null,e.find(a=>typeof a=="object"));return e.map(n)}function SB(t,e){const n=mi(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function MDe(t,e,n){const[a,i]=DDe(n==null?void 0:n.in,t,e),s=SB(a),o=SB(i),l=+s-NB(s),c=+o-NB(o);return Math.round((l-c)/EDe)}function IDe(t,e){const n=mG(t,e),a=qo(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),ON(a)}function RDe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function _O(t){return!(!RDe(t)&&typeof t!="number"||isNaN(+mi(t)))}function LDe(t,e){const n=mi(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const FDe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$De=(t,e,n)=>{let a;const i=FDe[t];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function $A(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const BDe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zDe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qDe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},UDe={date:$A({formats:BDe,defaultWidth:"full"}),time:$A({formats:zDe,defaultWidth:"full"}),dateTime:$A({formats:qDe,defaultWidth:"full"})},VDe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},HDe=(t,e,n,a)=>VDe[t];function sv(t){return(e,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let i;if(a==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const GDe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},WDe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},YDe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},KDe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},QDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},XDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},JDe=(t,e)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ZDe={ordinalNumber:JDe,era:sv({values:GDe,defaultWidth:"wide"}),quarter:sv({values:WDe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:sv({values:YDe,defaultWidth:"wide"}),day:sv({values:KDe,defaultWidth:"wide"}),dayPeriod:sv({values:QDe,defaultWidth:"wide",formattingValues:XDe,defaultFormattingWidth:"wide"})};function ov(t){return(e,n={})=>{const a=n.width,i=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?tMe(l,p=>p.test(o)):eMe(l,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function eMe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function tMe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function nMe(t){return(e,n={})=>{const a=e.match(t.matchPattern);if(!a)return null;const i=a[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const rMe=/^(\d+)(th|st|nd|rd)?/i,aMe=/\d+/i,iMe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sMe={any:[/^b/i,/^(a|c)/i]},oMe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lMe={any:[/1/i,/2/i,/3/i,/4/i]},cMe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uMe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dMe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hMe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fMe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pMe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mMe={ordinalNumber:nMe({matchPattern:rMe,parsePattern:aMe,valueCallback:t=>parseInt(t,10)}),era:ov({matchPatterns:iMe,defaultMatchWidth:"wide",parsePatterns:sMe,defaultParseWidth:"any"}),quarter:ov({matchPatterns:oMe,defaultMatchWidth:"wide",parsePatterns:lMe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ov({matchPatterns:cMe,defaultMatchWidth:"wide",parsePatterns:uMe,defaultParseWidth:"any"}),day:ov({matchPatterns:dMe,defaultMatchWidth:"wide",parsePatterns:hMe,defaultParseWidth:"any"}),dayPeriod:ov({matchPatterns:fMe,defaultMatchWidth:"any",parsePatterns:pMe,defaultParseWidth:"any"})},gMe={code:"en-US",formatDistance:$De,formatLong:UDe,formatRelative:HDe,localize:ZDe,match:mMe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yMe(t,e){const n=mi(t,e==null?void 0:e.in);return MDe(n,LDe(n))+1}function xMe(t,e){const n=mi(t,e==null?void 0:e.in),a=+ON(n)-+IDe(n);return Math.round(a/hG)+1}function gG(t,e){var f,p,g,x;const n=mi(t,e==null?void 0:e.in),a=n.getFullYear(),i=$S(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(g=i.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,o=qo((e==null?void 0:e.in)||t,0);o.setFullYear(a+1,0,s),o.setHours(0,0,0,0);const l=yb(o,e),c=qo((e==null?void 0:e.in)||t,0);c.setFullYear(a,0,s),c.setHours(0,0,0,0);const d=yb(c,e);return+n>=+l?a+1:+n>=+d?a:a-1}function vMe(t,e){var l,c,d,f;const n=$S(),a=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=gG(t,e),s=qo((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,a),s.setHours(0,0,0,0),yb(s,e)}function bMe(t,e){const n=mi(t,e==null?void 0:e.in),a=+yb(n,e)-+vMe(n,e);return Math.round(a/hG)+1}function xr(t,e){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(e,"0");return n+a}const Uu={y(t,e){const n=t.getFullYear(),a=n>0?n:1-n;return xr(e==="yy"?a%100:a,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):xr(n+1,2)},d(t,e){return xr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return xr(t.getHours()%12||12,e.length)},H(t,e){return xr(t.getHours(),e.length)},m(t,e){return xr(t.getMinutes(),e.length)},s(t,e){return xr(t.getSeconds(),e.length)},S(t,e){const n=e.length,a=t.getMilliseconds(),i=Math.trunc(a*Math.pow(10,n-3));return xr(i,e.length)}},Sm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_B={G:function(t,e,n){const a=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const a=t.getFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return Uu.y(t,e)},Y:function(t,e,n,a){const i=gG(t,a),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return xr(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):xr(s,e.length)},R:function(t,e){const n=mG(t);return xr(n,e.length)},u:function(t,e){const n=t.getFullYear();return xr(n,e.length)},Q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return xr(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return xr(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,e,n){const a=t.getMonth();switch(e){case"M":case"MM":return Uu.M(t,e);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,e,n){const a=t.getMonth();switch(e){case"L":return String(a+1);case"LL":return xr(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,e,n,a){const i=bMe(t,a);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):xr(i,e.length)},I:function(t,e,n){const a=xMe(t);return e==="Io"?n.ordinalNumber(a,{unit:"week"}):xr(a,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Uu.d(t,e)},D:function(t,e,n){const a=yMe(t);return e==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):xr(a,e.length)},E:function(t,e,n){const a=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return xr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,a){const i=t.getDay(),s=(i-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return xr(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const a=t.getDay(),i=a===0?7:a;switch(e){case"i":return String(i);case"ii":return xr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const a=t.getHours();let i;switch(a===12?i=Sm.noon:a===0?i=Sm.midnight:i=a/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const a=t.getHours();let i;switch(a>=17?i=Sm.evening:a>=12?i=Sm.afternoon:a>=4?i=Sm.morning:i=Sm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return Uu.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Uu.H(t,e)},K:function(t,e,n){const a=t.getHours()%12;return e==="Ko"?n.ordinalNumber(a,{unit:"hour"}):xr(a,e.length)},k:function(t,e,n){let a=t.getHours();return a===0&&(a=24),e==="ko"?n.ordinalNumber(a,{unit:"hour"}):xr(a,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Uu.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Uu.s(t,e)},S:function(t,e){return Uu.S(t,e)},X:function(t,e,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return TB(a);case"XXXX":case"XX":return Wh(a);case"XXXXX":case"XXX":default:return Wh(a,":")}},x:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"x":return TB(a);case"xxxx":case"xx":return Wh(a);case"xxxxx":case"xxx":default:return Wh(a,":")}},O:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+CB(a,":");case"OOOO":default:return"GMT"+Wh(a,":")}},z:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+CB(a,":");case"zzzz":default:return"GMT"+Wh(a,":")}},t:function(t,e,n){const a=Math.trunc(+t/1e3);return xr(a,e.length)},T:function(t,e,n){return xr(+t,e.length)}};function CB(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=Math.trunc(a/60),s=a%60;return s===0?n+String(i):n+String(i)+e+xr(s,2)}function TB(t,e){return t%60===0?(t>0?"-":"+")+xr(Math.abs(t)/60,2):Wh(t,e)}function Wh(t,e=""){const n=t>0?"-":"+",a=Math.abs(t),i=xr(Math.trunc(a/60),2),s=xr(a%60,2);return n+i+e+s}const kB=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},yG=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},jMe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return kB(t,e);let s;switch(a){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",kB(a,e)).replace("{{time}}",yG(i,e))},wMe={p:yG,P:jMe},NMe=/^D+$/,SMe=/^Y+$/,_Me=["D","DD","YY","YYYY"];function CMe(t){return NMe.test(t)}function TMe(t){return SMe.test(t)}function kMe(t,e,n){const a=AMe(t,e,n);if(console.warn(a),_Me.includes(t))throw new RangeError(a)}function AMe(t,e,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const EMe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,PMe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,OMe=/^'([^]*?)'?$/,DMe=/''/g,MMe=/[a-zA-Z]/;function mf(t,e,n){var f,p,g,x;const a=$S(),i=a.locale??gMe,s=a.firstWeekContainsDate??((p=(f=a.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=a.weekStartsOn??((x=(g=a.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=mi(t,n==null?void 0:n.in);if(!_O(l))throw new RangeError("Invalid time value");let c=e.match(PMe).map(b=>{const j=b[0];if(j==="p"||j==="P"){const S=wMe[j];return S(b,i.formatLong)}return b}).join("").match(EMe).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const j=b[0];if(j==="'")return{isToken:!1,value:IMe(b)};if(_B[j])return{isToken:!0,value:b};if(j.match(MMe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(b=>{if(!b.isToken)return b.value;const j=b.value;(TMe(j)||CMe(j))&&kMe(j,e,String(t));const S=_B[j[0]];return S(l,j,i.localize,d)}).join("")}function IMe(t){const e=t.match(OMe);return e?e[1].replace(DMe,"'"):t}function BA(t,e){return+mi(t)<+mi(e)}function AB(t,e){const n=()=>qo(e==null?void 0:e.in,NaN),i=$Me(t);let s;if(i.date){const d=BMe(i.date,2);s=zMe(d.restDateString,d.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,c;if(i.time&&(l=qMe(i.time),isNaN(l)))return n();if(i.timezone){if(c=UMe(i.timezone),isNaN(c))return n()}else{const d=new Date(o+l),f=mi(0,e==null?void 0:e.in);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return mi(o+l+c,e==null?void 0:e.in)}const Hj={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},RMe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,LMe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,FMe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $Me(t){const e={},n=t.split(Hj.dateTimeDelimiter);let a;if(n.length>2)return e;if(/:/.test(n[0])?a=n[0]:(e.date=n[0],a=n[1],Hj.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Hj.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){const i=Hj.timezone.exec(a);i?(e.time=a.replace(i[1],""),e.timezone=i[1]):e.time=a}return e}function BMe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(n);if(!a)return{year:NaN,restDateString:""};const i=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((a[1]||a[2]).length)}}function zMe(t,e){if(e===null)return new Date(NaN);const n=t.match(RMe);if(!n)return new Date(NaN);const a=!!n[4],i=lv(n[1]),s=lv(n[2])-1,o=lv(n[3]),l=lv(n[4]),c=lv(n[5])-1;if(a)return YMe(e,l,c)?VMe(e,l,c):new Date(NaN);{const d=new Date(0);return!GMe(e,s,o)||!WMe(e,i)?new Date(NaN):(d.setUTCFullYear(e,s,Math.max(i,o)),d)}}function lv(t){return t?parseInt(t):1}function qMe(t){const e=t.match(LMe);if(!e)return NaN;const n=zA(e[1]),a=zA(e[2]),i=zA(e[3]);return KMe(n,a,i)?n*pG+a*fG+i*1e3:NaN}function zA(t){return t&&parseFloat(t.replace(",","."))||0}function UMe(t){if(t==="Z")return 0;const e=t.match(FMe);if(!e)return 0;const n=e[1]==="+"?-1:1,a=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return QMe(a,i)?n*(a*pG+i*fG):NaN}function VMe(t,e,n){const a=new Date(0);a.setUTCFullYear(t,0,4);const i=a.getUTCDay()||7,s=(e-1)*7+n+1-i;return a.setUTCDate(a.getUTCDate()+s),a}const HMe=[31,null,31,30,31,30,31,31,30,31,30,31];function xG(t){return t%400===0||t%4===0&&t%100!==0}function GMe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(HMe[e]||(xG(t)?29:28))}function WMe(t,e){return e>=1&&e<=(xG(t)?366:365)}function YMe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function KMe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function QMe(t,e){return e>=0&&e<=59}const DM=({isEmbedded:t=!1})=>{const{customColumnsConfig:e,refetch:n}=rS(),a=e.lab_tests||[],[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState([]),[f,p]=v.useState(""),[g,x]=v.useState(!1),[b,j]=v.useState(null),[S,_]=v.useState(!1),[T,C]=v.useState(null),E=v.useRef(null),[k,O]=v.useState(!1),[I,F]=v.useState(null),[B,$]=v.useState(!1),[L,V]=v.useState(!1),[H,ne]=v.useState(null),[Q,q]=v.useState({name:"",description:"",price:"",default_parameters:[]}),G=v.useCallback(async()=>{x(!0),j(null),C(null),F(null);try{const X=await se("/api/lab-tests");if(!X.ok)throw new Error(`HTTP error! status: ${X.status}`);const ae=await X.json();d(ae)}catch(X){console.error("Error fetching lab tests:",X),j(X.message||"Failed to fetch lab tests.")}finally{x(!1)}},[]);v.useEffect(()=>{G()},[G]);const ie=X=>{const{name:ae,value:de}=X.target;q(ee=>({...ee,[ae]:de}))},W=(X,ae,de)=>{const ee=[...Q.default_parameters],Ne=ee[X];if(ae==="type")switch(Ne.type=de,de){case"number":Ne.defaultValue=0,Ne.lower_limit=null,Ne.upper_limit=null,Ne.unit="";break;case"boolean":Ne.defaultValue=!1,Ne.lower_limit=void 0,Ne.upper_limit=void 0,Ne.unit=void 0;break;case"string":default:Ne.defaultValue="",Ne.lower_limit=void 0,Ne.upper_limit=void 0,Ne.unit=void 0;break}else ae==="defaultValue"?Ne.type==="number"?Ne.defaultValue=parseFloat(de)||0:(Ne.type,Ne.defaultValue=de):ae==="lower_limit"||ae==="upper_limit"?Ne[ae]=de===""?null:parseFloat(de):Ne[ae]=de;q(Te=>({...Te,default_parameters:ee}))},z=()=>{q(X=>({...X,default_parameters:[...X.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},ce=X=>{q(ae=>({...ae,default_parameters:ae.default_parameters.filter((de,ee)=>ee!==X)}))},je=async X=>{X.preventDefault(),x(!0),j(null);const ae=H!==null,de=ae?`/api/lab-tests/${H}`:"/api/lab-tests",ee=ae?"PUT":"POST";try{const Ne=await se(de,{method:ee,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Q.name,description:Q.description,price:parseFloat(Q.price),default_parameters:Q.default_parameters})});if(!Ne.ok){const Te=await Ne.json();throw new Error(Te.message||`HTTP error! status: ${Ne.status}`)}V(!1),ne(null),q({name:"",description:"",price:"",default_parameters:[]}),G()}catch(Ne){console.error(`Error ${ae?"updating":"adding"} lab test:`,Ne),j(Ne.message||`Failed to ${ae?"update":"add"} lab test.`)}finally{x(!1)}},Y=()=>{ne(null),q({name:"",description:"",price:"",default_parameters:[]}),V(!0)},Ie=X=>{if(H===X.id)ne(null);else{ne(X.id);const ae=(X.default_parameters||[]).map(de=>({...de,unit:de.unit||"",lower_limit:de.lower_limit===void 0?null:de.lower_limit,upper_limit:de.upper_limit===void 0?null:de.upper_limit}));q({name:X.name,description:X.description||"",price:X.price,default_parameters:ae}),V(!1)}},Ue=async X=>{if(window.confirm("Are you sure you want to delete this lab test?")){x(!0),j(null);try{const ae=await se(`/api/lab-tests/${X}`,{method:"DELETE"});if(!ae.ok){const de=await ae.json();throw new Error(de.message||`HTTP error! status: ${ae.status}`)}G()}catch(ae){console.error("Error deleting lab test:",ae),j(ae.message||"Failed to delete lab test.")}finally{x(!1)}}},ze=()=>{V(!1),ne(null),j(null),q({name:"",description:"",price:"",default_parameters:[]})},Le=async X=>{if(!X){C("No file selected.");return}_(!0),C(null),j(null);const ae=new FormData;ae.append("file",X);try{const de=await se("/api/lab-tests/import",{method:"POST",body:ae});if(!de.ok){const ee=await de.json();throw new Error(ee.message||`Import failed: ${de.statusText}`)}G()}catch(de){console.error("Error importing lab tests from Excel:",de),C(de.message||"Failed to import lab tests from Excel.")}finally{_(!1)}},be=async X=>{if(X.target.files&&X.target.files[0]){const ae=X.target.files[0];await Le(ae),X.target&&(X.target.value="")}},Ce=async()=>{if(window.confirm("Are you sure you want to import default biochemistry and pathology tests? This will add new tests and may duplicate existing ones if names match.")){O(!0),F(null),j(null);try{const X=await se("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"}});if(!X.ok){const ae=await X.json();throw new Error(ae.message||`Default import failed: ${X.statusText}`)}G()}catch(X){console.error("Error importing default lab tests:",X),F(X.message||"Failed to import default lab tests.")}finally{O(!1)}}},Ae=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){$(!0),j(null),C(null),F(null);try{const X=await se("/api/lab-tests/all",{method:"DELETE"});if(!X.ok){const ae=await X.json();throw new Error(ae.message||`Delete all failed: ${X.statusText}`)}G()}catch(X){console.error("Error deleting all lab tests:",X),j(X.message||"Failed to delete all lab tests.")}finally{$(!1)}}},me=g||S||k||B,ye=v.useMemo(()=>new oo(c,{keys:["name","description","default_parameters.name"],threshold:.3,ignoreLocation:!0}),[c]),le=v.useMemo(()=>f?ye.search(f).map(X=>X.item):c,[c,f,ye]);return r.jsxs("div",{className:`lab-inventory-card ${t?"embedded":""}`,style:t?{border:"none",boxShadow:"none",padding:0}:{},children:[!t&&r.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),r.jsx("div",{className:"mb-4",style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:r.jsx("input",{type:"text",placeholder:"Search by test name...",value:f,onChange:X=>p(X.target.value),className:"lab-inventory-input",style:{maxWidth:"300px",marginRight:"10px"}})}),r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:Y,className:"lab-inventory-button",disabled:me,children:"Add New Test"}),r.jsx("button",{onClick:()=>{var X;return(X=E.current)==null?void 0:X.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,children:S?"Importing...":"Import from Excel"}),r.jsx("input",{type:"file",ref:E,onChange:be,accept:".xlsx, .xls",style:{display:"none"},disabled:S}),r.jsx("button",{onClick:Ce,className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,children:k?"Importing Defaults...":"Import Default Tests"}),r.jsx("button",{onClick:Ae,className:"lab-inventory-button lab-inventory-button-danger",disabled:me,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:B?"Deleting All...":"Delete All Tests"}),r.jsxs("button",{onClick:()=>s(!0),className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,title:"Manage Custom Columns",children:[r.jsx(dd,{size:16,style:{marginRight:"4px"}})," Columns"]}),r.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"auto"},children:[r.jsxs("button",{onClick:()=>l(!1),className:`view-mode-btn ${o?"":"active"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>l(!0),className:`view-mode-btn ${o?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(xf,{size:18})," Excel"]})]})]}),b&&r.jsx("div",{className:"error-text mb-4",children:b}),T&&r.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",T]}),I&&r.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",I]}),L&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:Q.name,onChange:ie,className:"lab-inventory-input",required:!0,disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:Q.description,onChange:ie,rows:3,className:"lab-inventory-input",disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:Q.price,onChange:ie,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),Q.default_parameters.map((X,ae)=>{var de,ee;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:X.name,onChange:Ne=>W(ae,"name",Ne.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:X.type,onChange:Ne=>W(ae,"type",Ne.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),X.type==="boolean"?r.jsxs("select",{value:X.defaultValue.toString(),onChange:Ne=>W(ae,"defaultValue",Ne.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:X.type==="number"?"number":"text",placeholder:"Default Value",value:X.defaultValue.toString(),onChange:Ne=>W(ae,"defaultValue",Ne.target.value),className:"lab-inventory-input"}),X.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:X.lower_limit===null?"":((de=X.lower_limit)==null?void 0:de.toString())??"",onChange:Ne=>W(ae,"lower_limit",Ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:X.upper_limit===null?"":((ee=X.upper_limit)==null?void 0:ee.toString())??"",onChange:Ne=>W(ae,"upper_limit",Ne.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:X.unit||"",onChange:Ne=>W(ae,"unit",Ne.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>ce(ae),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},ae)}),r.jsx("button",{type:"button",onClick:z,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:ze,className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:me,children:g?"Saving...":"Add Test"})]})]})]}),me&&!L?r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"mb-4 flex gap-2",children:[1,2,3,4,5].map(X=>r.jsx(Z,{width:100,height:36},X))}),r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"}),r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(X=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:"60%",height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:"90%",height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:50,height:20})]})})]},X))})]}),r.jsx("p",{className:"loading-text mt-2 text-sm italic text-gray-500",children:S?"Importing Excel data...":k?"Importing default data...":"Loading tests..."})]}):null,!me&&le.length===0&&!b&&!T&&!I&&r.jsx("p",{className:"no-data-message",children:f?`No lab tests found matching "${f}".`:"No lab tests found. Add one or import from Excel to get started."}),o&&le.length>0?r.jsx(Ib,{columns:[{key:"name",label:"Test Name",editable:!0,type:"text"},{key:"description",label:"Description",editable:!0,type:"text"},{key:"price",label:"Price",editable:!0,type:"number"}],data:le,editable:!0,showRowNumbers:!0,title:"Lab Test Inventory",onSave:async X=>{const ae=X.map(async de=>{const ee=c.find(Ne=>Ne.id===de.id);if(ee&&(ee.name!==de.name||ee.price!==de.price||ee.description!==de.description))return se(`/api/lab-tests/${de.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)})});try{await Promise.all(ae),G()}catch(de){alert("Error saving changes"),console.error(de)}}}):!me&&le.length>0&&r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:le.map(X=>{const ae=H===X.id,de=X.price&&typeof X.price=="string"?parseFloat(X.price):NaN,ee=isNaN(de)?"0.00":de.toFixed(2);return r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{onClick:()=>Ie(X),style:{cursor:"pointer"},children:[r.jsx("td",{children:X.name}),r.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:X.description||"-"}),r.jsxs("td",{children:["",ee]}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),Ie(X)},className:"lab-inventory-link",disabled:me,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),r.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),Ue(X.id)},className:"lab-inventory-link",disabled:me,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),a.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:a.map(Ne=>{var Te;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[Ne.label,":"]})," ",(Te=X.custom_fields)!=null&&Te[Ne.key]?String(X.custom_fields[Ne.key]):"-"]},Ne.key)})})})}),ae&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:Q.name,onChange:ie,className:"lab-inventory-input",required:!0,disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:Q.description,onChange:ie,rows:3,className:"lab-inventory-input",disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:Q.price,onChange:ie,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:me})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),Q.default_parameters.map((Ne,Te)=>{var Fe,xe;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:Ne.name,onChange:te=>W(Te,"name",te.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:Ne.type,onChange:te=>W(Te,"type",te.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),Ne.type==="boolean"?r.jsxs("select",{value:Ne.defaultValue.toString(),onChange:te=>W(Te,"defaultValue",te.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:Ne.type==="number"?"number":"text",placeholder:"Default Value",value:Ne.defaultValue.toString(),onChange:te=>W(Te,"defaultValue",te.target.value),className:"lab-inventory-input"}),Ne.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:Ne.lower_limit===null?"":((Fe=Ne.lower_limit)==null?void 0:Fe.toString())??"",onChange:te=>W(Te,"lower_limit",te.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:Ne.upper_limit===null?"":((xe=Ne.upper_limit)==null?void 0:xe.toString())??"",onChange:te=>W(Te,"upper_limit",te.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:Ne.unit||"",onChange:te=>W(Te,"unit",te.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>ce(Te),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},Te)}),r.jsx("button",{type:"button",onClick:z,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:ze,className:"lab-inventory-button lab-inventory-button-secondary",disabled:me,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:me,children:g?"Saving...":"Update Test"})]})]})]})})})]},X.id)})})]})]}),r.jsx(OM,{isOpen:i,onClose:()=>s(!1),entityType:"lab_tests",entityLabel:"Lab Tests",currentConfig:e,onConfigUpdated:()=>{n()}})]})},XMe=t=>{let e="";if(!t.report_content)return"No report content available.";e+=`*Report Date:* ${t.report_date?new Date(t.report_date).toLocaleDateString():"N/A"}

`;try{const n=JSON.parse(t.report_content);typeof n=="object"&&n!==null&&t.tests?t.tests.forEach((a,i)=>{e+=`*Test: ${a.name}*
`,n[a.id]?Object.entries(n[a.id]).forEach(([s,o])=>{var f;const l=(f=a.default_parameters)==null?void 0:f.find(p=>p.name===s);let c=String(o),d="";if(l){const p=l.unit?` _${l.unit}_`:"";if(l.type==="boolean"){const g=o===!0||o==="true";c=g?"*Reactive*":"Non-Reactive",g||(d="`Normal: Non-Reactive`")}else if(l.type==="number"){const g=typeof o=="string"?parseFloat(o):typeof o=="number"?o:NaN;if(l.lower_limit!=null||l.upper_limit!=null){let x=[];l.lower_limit!=null&&x.push(`${l.lower_limit}`),l.upper_limit!=null&&x.push(`${l.upper_limit}`),d=`\`Normal: ${x.join(" - ")}\`${p}`,!isNaN(g)&&(l.lower_limit!=null&&g<l.lower_limit||l.upper_limit!=null&&g>l.upper_limit)&&(c=`*${c}*`)}}l.unit&&(c+=p)}e+=`${s}: ${c}
`,d&&((l==null?void 0:l.type)==="boolean"&&(o===!0||o==="true")||(e+=`${d}
`))}):e+=`_No parameters reported for this test._
`,i<t.tests.length-1&&(e+=`
`)}):e+=t.report_content}catch{e+=t.report_content}return e},MM=t=>{var o;if(!((o=t==null?void 0:t.Patient)!=null&&o.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(t!=null&&t.report_content)){alert("Cannot share report: No report content is available to share.");return}const e=t.Patient.name||"Patient",n=XMe(t),a=`Hello ${e},

Your lab report is ready.

${n}`,s=`https://wa.me/${JMe(t.Patient.phone)}?text=${encodeURIComponent(a)}`;window.open(s,"_blank")},JMe=t=>{let e=t.replace(/\D/g,"");const n=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,a=e.match(n);return a?e="91"+a[1]:e.startsWith("91")||(e="91"+e),e},EB=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState("orders"),[g,x]=v.useState(1),[b]=v.useState(20),[j,S]=v.useState(0),_=v.useMemo(()=>Math.ceil(j/b),[j,b]),T=v.useCallback(async(L=1,V="")=>{s(!0),d(null);try{const H=new URLSearchParams({page:String(L),limit:String(b)});V&&H.append("search",V);const ne=await se(`/api/lab?${H.toString()}`);if(!ne.ok)throw new Error(`HTTP error! status: ${ne.status}`);const Q=await ne.json(),q=Q.orders.map(G=>{var ie,W;return{id:G.id,labTokenNumber:String(G.lab_token_number??"N/A"),patientName:((ie=G.Patient)==null?void 0:ie.name)||"N/A",patientId:G.patient_id,patientTokenNumber:String(((W=G.Patient)==null?void 0:W.patient_token_number)??"N/A"),tests:(G.tests||[]).map(z=>z.name||"Unknown Test"),date:mf(new Date(G.createdAt),"yyyy-MM-dd"),status:G.status,reportId:G.reportId,billId:G.billId}});e(q),S(Q.totalCount),x(L)}catch(H){console.error("Failed to fetch lab orders:",H),d(H instanceof Error?H.message:"An unknown error occurred"),e([]),S(0)}finally{s(!1),l(!1)}},[b]);v.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${g}, Search term: "${n}"`),n.length===0||n.length>=2?(console.log(`Condition met (length ${n.length}). Fetching orders...`),T(g,n)):console.log(`Condition not met (length ${n.length}). Not fetching.`)},[T,g,n]),v.useEffect(()=>{const L=setTimeout(()=>{n.length>=2?g!==1&&x(1):n.length<2&&g!==1&&x(1)},1e3);return()=>{clearTimeout(L)}},[n]);const C=async(L,V)=>{console.log(`Updating order ${L} to status ${V}`);try{const H=await se(`/api/lab/${L}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:V})});if(!H.ok){const ne=await H.json();throw new Error(ne.message||`Failed to update status: ${H.status}`)}if(V==="completed"){const ne=await se(`/api/lab/orders/${L}/report`);if(ne.ok){const Q=await ne.json();MM(Q)}}await T(g,n),console.log(`Order ${L} status updated to ${V}, refetching page ${g}`)}catch(H){console.error("Error updating status:",H),alert(`Failed to update status: ${H instanceof Error?H.message:"Unknown error"}`)}},{openCommandBar:E}=Dc(),k=Lt(),O=L=>{if(!L){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}L.billId?(console.log(`Navigating to existing bill for Bill ID: ${L.billId}, Patient: ${L.patientName}`),k("/billing",{state:{billId:L.billId,patientId:L.patientId,patientName:L.patientName,billType:"lab"}})):(console.log(`Navigating to LabBillingPage for Order ID: ${L.id}`),k(`/dashboard/lab-billing/${L.id}`))},I=L=>{L&&L.id?k(`/lab/report/${L.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},F=L=>{switch(L){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:L,className:"status-badge"}}};if(i&&o)return r.jsxs("div",{className:"admin-panel-container",children:[r.jsx("div",{className:"admin-nav-bar",children:[1,2,3,4].map(L=>r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px",margin:"0 8px"}},L))}),r.jsxs("div",{className:"admin-content-section",style:{padding:"20px"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx(Z,{width:200,height:32}),r.jsx(Z,{width:300,height:40})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},L))})]})})]})]});if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[r.jsx(ea,{size:48,className:"mb-4"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),r.jsx("p",{className:"mb-4",children:c}),r.jsx("button",{onClick:()=>T(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const B=()=>{g>1&&x(L=>L-1)},$=()=>{g<_&&x(L=>L+1)};return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("div",{className:"admin-nav-bar",children:[r.jsxs("button",{onClick:()=>k(-1),className:"admin-nav-button",title:"Back",children:[r.jsx(on,{})," Back"]}),r.jsxs("button",{onClick:()=>p("orders"),className:`admin-nav-button ${f==="orders"?"active":""}`,children:[r.jsx(jE,{})," Orders"]}),r.jsx("button",{onClick:()=>k("/create-lab-order"),className:"admin-nav-button",children:"Create New Lab Order"}),r.jsxs("button",{onClick:()=>p("inventory"),className:`admin-nav-button ${f==="inventory"?"active":""}`,children:[r.jsx(jQ,{})," Inventory"]}),r.jsxs("button",{onClick:()=>E(),className:"admin-nav-button",children:[r.jsx(UO,{})," Newton's AI"]})]}),r.jsx("div",{className:"admin-content-section",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[f==="orders"&&r.jsxs("div",{className:"lab-orders-view",children:[" ",r.jsxs("div",{className:"lab-orders-header-controls",children:[r.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),r.jsxs("div",{className:"lab-orders-search-container",children:[r.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:n,onChange:L=>a(L.target.value),className:"lab-inventory-input lab-orders-search-input"}),r.jsx(Fn,{size:18,className:"lab-orders-search-icon"})]})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient (Token)"}),r.jsx("th",{children:"Tests"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),r.jsxs("tbody",{children:[i&&!c&&t.length===0&&[1,2,3,4,5].map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},L)),!i&&!c&&t.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."})}),!i&&!c&&t.map(L=>{const V=F(L.status);return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:L.patientName}),r.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",L.patientTokenNumber]})]}),r.jsx("td",{children:L.tests.map((H,ne)=>r.jsx("div",{children:H},ne))}),r.jsx("td",{className:"hidden md:table-cell",children:L.date}),r.jsx("td",{children:r.jsx("span",{className:V.className,children:V.text})}),r.jsx("td",{children:r.jsxs("div",{className:"lab-table-actions",children:[L.status==="pending"&&r.jsx("button",{onClick:()=>O(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&r.jsx("button",{onClick:()=>C(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&r.jsx("button",{onClick:()=>C(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>I(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>C(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>{L.id?k(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},L.id)})]})]})}),r.jsxs("div",{className:"lab-orders-card-container",children:[i&&!c&&t.length===0&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(L=>r.jsx("div",{className:"lab-order-card",children:r.jsx(Z,{width:"100%",height:150})},L))}),!i&&!c&&t.length===0&&r.jsx("div",{className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."}),!i&&!c&&t.map(L=>{const V=F(L.status);return r.jsxs("div",{className:"lab-order-card",children:[r.jsxs("div",{className:"lab-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lab-card-patient-name",children:L.patientName}),r.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",L.patientTokenNumber]}),r.jsx("div",{className:"lab-card-date",children:L.date})]}),r.jsx("span",{className:`${V.className} lab-card-status-pill`,children:V.text})]}),r.jsxs("div",{className:"lab-card-section",children:[r.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),L.tests.map((H,ne)=>r.jsx("div",{className:"lab-card-test-item",children:H},ne)),L.tests.length===0&&r.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),r.jsxs("div",{className:"lab-card-actions",children:[L.status==="pending"&&r.jsx("button",{onClick:()=>O(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&r.jsx("button",{onClick:()=>C(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&r.jsx("button",{onClick:()=>C(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>I(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>C(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>{L.id?k(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},L.id)})]}),!i&&j>0&&r.jsxs("div",{className:"lab-pagination-controls",children:[r.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",r.jsx("strong",{children:(g-1)*b+1})," ","to"," ",r.jsx("strong",{children:Math.min(g*b,j)})," ","of"," ",r.jsx("strong",{children:j})," ","results"]}),r.jsxs("div",{className:"lab-pagination-buttons",children:[r.jsx("button",{onClick:B,disabled:g===1,className:"lab-pagination-button","aria-label":"Previous page",children:r.jsx(Cb,{size:18})}),r.jsxs("span",{children:["Page ",g," of ",_]}),r.jsx("button",{onClick:$,disabled:g===_,className:"lab-pagination-button","aria-label":"Next page",children:r.jsx(pd,{size:18})})]})]})]}),f==="inventory"&&r.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",r.jsx(DM,{})]})]})})," "]})},qA=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(""),[i,s]=v.useState(!0),[o,l]=v.useState(null),c=Lt(),d=v.useRef(null),{openCommandBar:f}=Dc(),p=ds(),g=F=>{F&&(p.prefetchQuery({queryKey:Gt.patients.context(F),queryFn:async()=>{const B=await se(`/api/patients/${F}/context`);if(!B.ok)throw new Error("Failed to fetch patient context");return B.json()},staleTime:5*60*1e3}),p.prefetchQuery({queryKey:Gt.patientDebts.balance(F),queryFn:async()=>{const B=await se(`/api/patient-debts/${F}/balance`);return B.ok?B.json():{netDebt:0}},staleTime:1*60*1e3}),p.prefetchQuery({queryKey:Gt.queue.latest(F),queryFn:async()=>{const B=await se(`/api/queue/patient/${F}/latest`);if(!B.ok)throw new Error("Failed to fetch latest queue status");const $=await B.json();return $!=null&&$._id&&p.prefetchQuery({queryKey:Gt.queue.entry($._id),queryFn:async()=>{const L=await se(`/api/queue/doctor/complaint/${$._id}`);if(!L.ok)throw new Error("Failed to fetch complaint record");return L.json()},staleTime:1*60*1e3}),$},staleTime:5e3}),p.prefetchQuery({queryKey:Gt.dental.records(F),queryFn:async()=>{const B=await se(`/api/dental/patient/${F}`);if(!B.ok)throw new Error("Failed to fetch dental records");return B.json()},staleTime:5*60*1e3}))},[x,b]=v.useState(1),[j,S]=v.useState(1),_=10,T=v.useCallback(async(F,B,$)=>{s(!0),l(null);try{let L=`/api/pharmacy-orders?page=${F}&limit=${B}`;$&&$.trim()!==""&&(L+=`&search=${encodeURIComponent($.trim())}`);const V=await se(L);if(!V.ok)throw new Error(`Failed to fetch orders: ${V.statusText} (${V.status})`);const H=await V.json();H&&Array.isArray(H.orders)?(e(H.orders),S(H.totalPages||1),b(H.currentPage||F)):e([])}catch(L){console.error("Failed to fetch pharmacy orders:",L),l(L.message||"Failed to fetch orders."),e([])}finally{s(!1)}},[]);v.useEffect(()=>(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{T(n?1:x,_,n)},500),()=>{d.current&&clearTimeout(d.current)}),[n,x,T]);const C=F=>c(`/dashboard/edit-pharmacy-order/${F}`),E=F=>c(`/dashboard/edit-complaint/patient/${F.patientId}`),k=F=>{const B=t.find($=>$.id===F);if(B){const $=B.medications.map(L=>({name:L.name,pack_quantity:L.pack_quantity,loose_quantity:L.loose_quantity,price:L.price??0,pack_price:L.pack_price,loose_price:L.loose_price,total_price:L.total_price,isLoose:L.isLoose,unit:L.unit,drug_id:L.drug_id?String(L.drug_id):null,tabletsPerDay:L.tabletsPerDay,numberOfDays:L.numberOfDays,directions_to_use:L.directions_to_use,discount_percentage:0,batch:L.batch,expiry_date:L.expiry_date}));c(`/dashboard/pharmacy-billing/${F}`,{state:{initialItems:$}})}},O=async(F,B)=>{const $=t.find(L=>L.id===F);if($)try{const L=await se(`/api/pharmacy-orders/${F}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:B,medications:$.medications})});if(L.ok){const V=await L.json();e(H=>H.map(ne=>ne.id===V.id?{...ne,status:V.status}:ne))}}catch(L){console.error("Status update failed",L),alert("Failed to update status")}},I=F=>`pq-pill ${F}`;return r.jsxs("div",{className:"pq-container",children:[r.jsxs("div",{className:"pq-header",children:[r.jsxs("div",{className:"pq-nav-actions",children:[r.jsxs("button",{onClick:()=>c("/dashboard/add-order"),className:"pq-btn",children:[r.jsx(Ps,{})," Add Order"]}),r.jsxs("button",{onClick:()=>c("/dashboard/inventory"),className:"pq-btn",children:[r.jsx(ud,{})," Inventory"]}),r.jsxs("button",{onClick:()=>f(),className:"pq-btn",children:[r.jsx(UO,{})," Newton's AI"]}),r.jsxs("button",{onClick:()=>c("/dashboard/distributors"),className:"pq-btn",children:[r.jsx(ud,{})," Distributors"]})]}),r.jsxs("div",{className:"pq-search-wrap",children:[r.jsx(Fn,{className:"pq-search-icon"}),r.jsx("input",{className:"pq-search-input",placeholder:"Search orders...",value:n,onChange:F=>a(F.target.value)})]})]}),r.jsxs("div",{className:"pq-card",children:[r.jsxs("div",{className:"pq-card-content",children:[i&&t.length===0&&r.jsx("div",{className:"p-4 space-y-2",children:[1,2,3].map(F=>r.jsx(Z,{height:40,className:"mb-2"},F))}),o&&r.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]}),!i&&!o&&t.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."}),!i&&t.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pq-table-wrapper",children:r.jsxs("table",{className:"pq-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map(F=>r.jsxs("tr",{className:"pq-row",onClick:()=>E(F),onMouseEnter:()=>g(F.patientId),children:[r.jsxs("td",{children:[r.jsx("div",{className:"pq-text-bold",children:F.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",F.patientTokenNumber]})]}),r.jsx("td",{children:r.jsxs("div",{className:"pq-nested-table-wrap",children:[r.jsx("table",{className:"pq-nested-table",children:r.jsx("tbody",{children:F.medications.map((B,$)=>r.jsxs("tr",{children:[r.jsx("td",{className:"pq-text-bold",children:B.name}),r.jsxs("td",{children:[B.pack_quantity>0&&`Pack: ${B.pack_quantity} `,B.loose_quantity>0&&`Loose: ${B.loose_quantity}`]}),r.jsx("td",{className:"pq-text-sm",children:B.directions_to_use})]},$))})}),F.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"mt-1 text-xs opacity-75 pq-markdown",children:[r.jsx("strong",{children:"Note:"})," ",r.jsx(wf,{remarkPlugins:[Nf],children:F.prescriptionForUnavailableDrugs})]})]})}),r.jsx("td",{className:"pq-text-sm",children:new Date(F.date).toLocaleDateString()}),r.jsxs("td",{className:"pq-text-mono pq-text-bold",children:["",Number(F.order_total||0).toFixed(2)]}),r.jsx("td",{children:r.jsx("span",{className:I(F.status),children:F.status})}),r.jsx("td",{children:r.jsxs("div",{className:"pq-actions",children:[F.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:B=>{B.stopPropagation(),C(F.id)},className:"pq-action-btn pq-btn-edit",children:[r.jsx($i,{size:12})," Edit"]}),r.jsxs("button",{onClick:B=>{B.stopPropagation(),k(F.id)},className:"pq-action-btn pq-btn-bill",children:[r.jsx(cd,{size:12})," Bill"]})]}),F.status==="billed"&&r.jsxs("button",{onClick:B=>{B.stopPropagation(),O(F.id,"dispensed")},className:"pq-action-btn pq-btn-dispense",children:[r.jsx(Ll,{size:12})," Dispense"]}),(F.status==="pending"||F.status==="billed")&&r.jsx("button",{onClick:B=>{B.stopPropagation(),O(F.id,"cancelled")},className:"pq-action-btn pq-btn-cancel",children:"Cancel"}),r.jsx("button",{onClick:B=>{B.stopPropagation(),E(F)},onMouseEnter:()=>g(F.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})]})})]},F.id))})]})}),r.jsx("div",{className:"pq-card-list",children:t.map(F=>r.jsxs("div",{className:"pq-mobile-card",onClick:()=>E(F),onMouseEnter:()=>g(F.patientId),children:[r.jsxs("div",{className:"pq-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"pq-text-bold",children:F.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",F.patientTokenNumber]})]}),r.jsx("span",{className:I(F.status),children:F.status})]}),r.jsx("div",{className:"mb-2",children:F.medications.slice(0,3).map((B,$)=>r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[B.name," (",B.pack_quantity>0?`${B.pack_quantity}p`:""," ",B.loose_quantity>0?`${B.loose_quantity}l`:"",")"]},$))}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("div",{className:"pq-text-mono pq-text-bold",children:["",Number(F.order_total||0).toFixed(2)]}),r.jsx("div",{className:"pq-actions",children:r.jsx("button",{onClick:B=>{B.stopPropagation(),E(F)},onMouseEnter:()=>g(F.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})})]})]},F.id))})]})]}),!i&&j>1&&r.jsxs("div",{className:"pq-footer px-4 pb-4",children:[r.jsxs("div",{className:"pq-page-info",children:["Page ",x," of ",j]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"pq-pagination-btn",disabled:x===1,onClick:()=>b(F=>Math.max(1,F-1)),children:r.jsx(Cb,{size:16})}),r.jsx("button",{className:"pq-pagination-btn",disabled:x===j,onClick:()=>b(F=>Math.min(j,F+1)),children:r.jsx(pd,{size:16})})]})]})]})]})},UA=10,ZMe=3,vG=({isEmbedded:t=!1,initialSearch:e=""})=>{const n=Lt(),{customColumnsConfig:a,refetch:i}=rS(),s=a.drugs||[],[o,l]=v.useState(!1),[c,d]=v.useState(!1),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(e),[S,_]=v.useState(!0),[T,C]=v.useState(null),[E,k]=v.useState(new Set),[O,I]=v.useState("all"),F=async()=>{try{const ke=await se("/api/inventory/download-csv");if(!ke.ok)throw new Error(`Failed to download CSV: ${ke.statusText}`);const ot=await ke.blob(),Tt=window.URL.createObjectURL(ot),Ve=document.createElement("a");Ve.href=Tt,Ve.download="pharmacy_inventory.csv",document.body.appendChild(Ve),Ve.click(),Ve.remove(),window.URL.revokeObjectURL(Tt)}catch(ke){console.error("Failed to download CSV:",ke),C(ke.message||"Failed to download inventory CSV. Please try again.")}},[B,$]=v.useState(!1),[L,V]=v.useState(!1),[H,ne]=v.useState(null),[Q,q]=v.useState(!1),[G,ie]=v.useState(new Set),[W,z]=v.useState(1),ce=8,[je,Y]=v.useState(null),[Ie,Ue]=v.useState(0),[ze,Le]=v.useState(!1),[be,Ce]=v.useState(null),[Ae,me]=v.useState(1),[ye,le]=v.useState(!1),X=W*ce,ae=X-ce,de=g.slice(ae,X),ee=Math.ceil(g.length/ce);v.useEffect(()=>{z(1)},[b,O]);const Ne=v.useCallback(async()=>{_(!0),C(null);try{const ke=await se("/api/drugs");if(!ke.ok)throw new Error(`Failed to fetch drugs: ${ke.statusText} (${ke.status})`);const ot=await ke.json();let Tt=Array.isArray(ot)?ot:ot.drugs||[];Tt=Tt.map(Ve=>({...Ve,mrp:parseFloat(String(Ve.mrp))||0,rate:Ve.rate!==null&&Ve.rate!==void 0?parseFloat(String(Ve.rate)):null,stock:parseInt(String(Ve.stock),10)||0,gst:Ve.gst!==null&&Ve.gst!==void 0?parseFloat(String(Ve.gst)):null,margin:Ve.margin!==null&&Ve.margin!==void 0?parseFloat(String(Ve.margin)):null,discount:Ve.discount!==null&&Ve.discount!==void 0?parseFloat(String(Ve.discount)):null})),p(Tt),x(Tt)}catch(ke){console.error("Failed to fetch drugs:",ke),C(ke.message||"Failed to load inventory. Please try again.")}finally{_(!1)}},[]);v.useEffect(()=>{Ne()},[Ne]),v.useEffect(()=>{e&&j(e)},[e]);const Te=v.useMemo(()=>new oo(f,{keys:["name","brand_name","description","supplier","box_number"],threshold:.3,ignoreLocation:!0}),[f]);v.useEffect(()=>{let ke=f;b&&(ke=Te.search(b).map(Ve=>Ve.item));const ot=new Date,Tt=PDe(ot,ZMe);O==="low-stock"?ke=ke.filter(Ve=>Ve.stock<=UA):O==="near-expiry"?ke=ke.filter(Ve=>{if(!Ve.expiry_date)return!1;const jt=AB(Ve.expiry_date);return _O(jt)&&BA(jt,Tt)&&!BA(jt,ot)}):O==="expired"&&(ke=ke.filter(Ve=>{if(!Ve.expiry_date)return!1;const jt=AB(Ve.expiry_date);return _O(jt)&&BA(jt,ot)})),x(ke)},[b,f,O,Te]);const Fe=()=>{$(!1),Y(null)},xe=ke=>{Ue(parseInt(ke.target.value,10)||0)},te=async ke=>{if(ke.preventDefault(),C(null),!je||!je.id||Ie===0){C("No drug selected or adjustment amount is zero.");return}try{const ot=await se(`/api/drugs/${je.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:Ie})});if(!ot.ok){const Ve=await ot.json();throw new Error(Ve.message||`Failed to adjust stock: ${ot.statusText}`)}const Tt=await ot.json();p(Ve=>Ve.map(jt=>jt.id===Tt.id?Tt:jt)),Fe()}catch(ot){console.error("Failed to adjust stock:",ot),C(ot.message||"Failed to adjust stock. Please try again.")}},oe=ke=>{ne(ke),V(!0)},_e=()=>{V(!1),ne(null)},Oe=async()=>{if(!H||!H.id){C("No drug selected for deletion.");return}_(!0),C(null);try{const ke=await se(`/api/drugs/${H.id}`,{method:"DELETE"});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete drug: ${ke.statusText}`)}Ne(),_e()}catch(ke){console.error("Failed to delete drug:",ke),C(ke.message||"Failed to delete drug. Please try again.")}finally{_(!1)}},K=()=>{q(!0)},ge=()=>{q(!1)},[ue,fe]=v.useState(!1),Ee=()=>{G.size>0&&fe(!0)},Ke=()=>{fe(!1)},$e=async()=>{if(G.size===0){C("No drugs selected for deletion.");return}_(!0),C(null);try{const ke=await se("/api/drugs/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugIds:Array.from(G)})});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete selected drugs: ${ke.statusText}`)}Ne(),ie(new Set),Ke()}catch(ke){console.error("Failed to delete selected drugs:",ke),C(ke.message||"Failed to delete selected drugs. Please try again.")}finally{_(!1)}},We=async()=>{_(!0),C(null);try{const ke=await se("/api/drugs/all",{method:"DELETE"});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to delete all drugs: ${ke.statusText}`)}Ne(),ge()}catch(ke){console.error("Failed to delete all drugs:",ke),C(ke.message||"Failed to delete all drugs. Please try again.")}finally{_(!1)}},it=ke=>{if(!ke)return null;const ot=ke.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return ot?parseInt(ot[1],10):null},wt=ke=>{Ce(ke),me(1),Le(!0)},we=()=>{Le(!1),Ce(null),me(1)},Xe=ke=>{me(parseInt(ke.target.value,10)||0)},Je=async ke=>{if(ke.preventDefault(),C(null),!be||!be.id||Ae<=0){C("No drug selected or invalid number of packs to convert.");return}const ot=it(be.pack);if(!ot||ot<=0){C(`Cannot convert "${be.name}" to loose. Invalid pack unit: ${be.pack||"N/A"}.`);return}if(Ae>(be.stock??0)){C(`Cannot convert ${Ae} packs. Only ${be.stock??0} packs are in stock.`);return}try{const Tt=await se(`/api/drugs/${be.id}/convert-to-loose`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({packsToConvert:Ae,packSize:ot})});if(!Tt.ok){const jt=await Tt.json();throw new Error(jt.message||`Failed to convert to loose: ${Tt.statusText}`)}const Ve=await Tt.json();p(jt=>jt.map(kt=>kt.id===Ve.id?Ve:kt)),we()}catch(Tt){console.error("Failed to convert to loose:",Tt),C(Tt.message||"Failed to convert to loose. Please try again.")}finally{_(!1)}},ct=()=>{le(!0)},Ct=()=>{le(!1)},bt=async()=>{_(!0),C(null);try{const ke=await se("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!ke.ok){const ot=await ke.json();throw new Error(ot.message||`Failed to add default medications: ${ke.statusText}`)}Ne(),Ct()}catch(ke){console.error("Failed to add default medications:",ke),C(ke.message||"Failed to add default medications. Please try again.")}finally{_(!1)}};return S?r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsx("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[1,2,3,4].map(ke=>r.jsx(Z,{width:120,height:36},ke))}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsx(Z,{width:100,height:36}),[1,2,3,4].map(ke=>r.jsx(Z,{width:120,height:36},ke))]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsx(Z,{width:"100%",height:40,style:{maxWidth:"600px"}}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx(Z,{width:20,height:20})}),r.jsx("th",{children:"DRUG DETAILS"}),r.jsx("th",{children:"PACK"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{className:"qty-header",children:"STOCK"}),r.jsx("th",{className:"mrp-header",children:"MRP"}),r.jsx("th",{className:"rate-header",children:"RATE"}),r.jsx("th",{children:"BOX"}),r.jsx("th",{children:"DISC %"}),r.jsx("th",{children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ke=>r.jsxs("tr",{children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx(Z,{width:20,height:20})}),r.jsxs("td",{children:[r.jsx(Z,{width:"80%",height:20}),r.jsx(Z,{width:"40%",height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsxs("td",{children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:60,height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{width:20,height:20}),r.jsx(Z,{width:20,height:20}),r.jsx(Z,{width:20,height:20})]})})]},ke))})]})})]}):T?r.jsxs("div",{className:"error-indicator",children:["Error: ",T]}):r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsxs("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline add-drug-button",children:[r.jsx(Ps,{size:18}),"Add New Drug"]}),r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline",children:[r.jsx(Ps,{size:18}),"Purchase Page"]}),r.jsxs("button",{onClick:()=>n("/dashboard/distributors"),className:"action-button-outline",children:[r.jsx(Ps,{size:18}),"Distributors"]}),r.jsxs("button",{onClick:()=>l(!0),className:"action-button-outline",title:"Manage Custom Columns",children:[r.jsx(dd,{size:18}),"Columns"]})]}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>d(!1),className:`view-mode-btn ${c?"":"active"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>d(!0),className:`view-mode-btn ${c?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(xf,{size:18})," Excel"]})]}),r.jsx("button",{onClick:F,className:"action-button-outline",children:"Download CSV"}),r.jsxs("button",{onClick:ct,className:"action-button-outline",children:[r.jsx(Ps,{size:18}),"Import Defaults"]}),r.jsxs("button",{onClick:Ee,className:"action-button-outline delete-button-outline",disabled:G.size===0,children:[r.jsx(Vn,{size:18}),"Delete (",G.size,")"]}),r.jsxs("button",{onClick:K,className:"action-button-outline delete-all-button-outline",children:[r.jsx(Vn,{size:18}),"Delete All"]})]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsxs("div",{className:"search-input-wrapper",style:{maxWidth:"600px"},children:[r.jsx(Fn,{size:20,className:"search-input-icon"}),r.jsx("input",{type:"text",placeholder:"Search drugs...",value:b,onChange:ke=>j(ke.target.value),className:"inventory-search-input"})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("select",{value:O,onChange:ke=>I(ke.target.value),className:"inventory-filter-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})})]}),c?r.jsx("div",{className:"inventory-table-container",style:{padding:"1rem"},children:r.jsx(Ib,{title:"Pharmacy Inventory",columns:[{key:"name",label:"Drug Name",type:"text",editable:!0},{key:"brand_name",label:"Brand Name",type:"text",editable:!0},{key:"pack",label:"Pack",type:"text",editable:!0},{key:"expiry_date",label:"Expiry",type:"date",editable:!0},{key:"stock",label:"Stock",type:"number",editable:!0},{key:"mrp",label:"MRP",type:"number",editable:!0},{key:"rate",label:"Rate",type:"number",editable:!0},{key:"box_number",label:"Box",type:"text",editable:!0},{key:"discount",label:"Discount %",type:"number",editable:!0},{key:"gst",label:"GST %",type:"number",editable:!0},{key:"supplier",label:"Supplier",type:"text",editable:!0}],data:g,onSave:async ke=>{try{for(const ot of ke)ot.id&&await se(`/api/drugs/${ot.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ot)});Ne()}catch(ot){console.error("Failed to save:",ot),C(ot.message||"Failed to save changes")}},editable:!0,showRowNumbers:!0})}):r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx("input",{type:"checkbox",onChange:ke=>{if(ke.target.checked){const ot=new Set(g.map(Tt=>Tt.id));ie(ot)}else ie(new Set)},checked:G.size===g.length&&g.length>0,disabled:g.length===0})}),r.jsx("th",{className:"drug-name-header",children:"DRUG DETAILS"}),r.jsx("th",{className:"pack-header",children:"PACK"}),r.jsx("th",{className:"expiry-header",children:"EXPIRY"}),r.jsx("th",{className:"text-stock qty-header",children:"STOCK"}),r.jsx("th",{className:"text-price mrp-header",children:"MRP"}),r.jsx("th",{className:"text-cost rate-header",children:"RATE"}),r.jsx("th",{className:"box-number-header",children:"BOX"}),r.jsx("th",{className:"discount-header",children:"DISC %"}),r.jsx("th",{className:"margin-header",children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsxs("tbody",{children:[g.length===0&&r.jsx("tr",{className:"no-results-message",children:r.jsx("td",{colSpan:11,children:"No drugs found matching your search."})}),de.map(ke=>r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{className:"drug-row",onClick:()=>{const ot=new Set(E);ot.has(ke.id)&&ke.id!==void 0?ot.delete(ke.id):ke.id!==void 0&&ot.add(ke.id),k(ot)},children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx("input",{type:"checkbox",onClick:ot=>ot.stopPropagation(),checked:G.has(ke.id),onChange:()=>{const ot=new Set(G);ot.has(ke.id)?ot.delete(ke.id):ot.add(ke.id),ie(ot)}})}),r.jsx("td",{className:"drug-name-cell",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:ke.brand_name||ke.name||"-"}),ke.brand_name&&ke.name&&ke.brand_name!==ke.name&&r.jsx("span",{className:"text-xs text-muted-foreground",style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:ke.name})]})}),r.jsx("td",{className:"text-muted pack-cell",children:ke.pack||"-"}),r.jsx("td",{className:"text-muted",children:ke.expiry_date?new Date(ke.expiry_date).toLocaleDateString("en-GB"):"-"}),r.jsxs("td",{className:`text-stock ${ke.stock<=UA?"low-stock":""}`,children:[r.jsx("div",{style:{fontWeight:"bold"},children:ke.stock}),r.jsx("div",{className:"loose-quantity",children:ke.loose!==null&&ke.loose!==void 0?`${ke.loose} loose`:"0 loose"})]}),r.jsxs("td",{className:"text-muted text-price",children:["",typeof ke.mrp=="number"?ke.mrp.toFixed(2):"N/A"]}),r.jsx("td",{className:"text-muted text-cost",children:ke.rate!==null&&ke.rate!==void 0?`${ke.rate.toFixed(2)}`:"-"}),r.jsx("td",{className:"text-muted",children:ke.box_number||"-"}),r.jsx("td",{className:"text-muted",children:ke.discount!==null&&ke.discount!==void 0?`${ke.discount.toFixed(2)}%`:"0.00%"}),r.jsx("td",{className:"text-muted",children:(()=>{const ot=ke.mrp||0,Tt=ke.rate||0,Ve=ke.discount||0,jt=ke.gst||0,Yn=Tt*(1-Ve/100)*(1+jt/100),vt=ot-Yn;return`${(ot>0?vt/ot*100:0).toFixed(2)}%`})()}),r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsx("button",{onClick:ot=>{ot.stopPropagation(),n(`/dashboard/inventory/edit/${ke.id}`)},className:"action-icon-button",title:"Edit Drug",children:r.jsx($i,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),oe(ke)},className:"action-icon-button delete-button",title:"Delete Drug",children:r.jsx(Vn,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),Y(ke),$(!0)},className:"action-icon-button adjust-stock-button",title:"Adjust Stock",children:r.jsx(NI,{size:16})}),r.jsx("button",{onClick:ot=>{ot.stopPropagation(),wt(ke)},className:"action-icon-button convert-to-loose-button",title:"Convert to Loose",disabled:!ke.pack||it(ke.pack)===null,children:r.jsx(kI,{size:16})})]})})]}),E.has(ke.id)&&r.jsx("tr",{className:"collapsible-row",children:r.jsx("td",{colSpan:11,children:r.jsxs("div",{className:"collapsible-content",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",ke.description||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Supplier:"})," ",ke.supplier||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Batch:"})," ",ke.batch||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"HSN Code:"})," ",ke.hsn_code||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"MFG:"})," ",ke.mfg||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Loose Price:"}),(()=>{const ot=it(ke.pack);return ot&&ot>0&&typeof ke.mrp=="number"?`${(ke.mrp/ot).toFixed(2)}`:"N/A"})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"GST:"})," ",ke.gst!==null&&ke.gst!==void 0?`${ke.gst.toFixed(2)}%`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",new Date(ke.last_updated).toLocaleString()]}),s.length>0&&r.jsx("div",{className:"custom-fields-display",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px dashed var(--border-color)"},children:s.map(ot=>{var Tt;return r.jsxs("p",{children:[r.jsxs("strong",{children:[ot.label,":"]})," ",(Tt=ke.custom_fields)!=null&&Tt[ot.key]?String(ke.custom_fields[ot.key]):"-"]},ot.key)})})]})})})]},ke.id))]})]})}),r.jsx("div",{className:`inventory-grid-mobile ${t?"embedded":""}`,style:{display:c?"none":void 0},children:g.length===0?r.jsx("div",{className:"inventory-card-empty",children:"No drugs found matching your search."}):de.map(ke=>r.jsxs("div",{className:"inventory-card",onClick:()=>{const ot=new Set(E);ot.has(ke.id)&&ke.id!==void 0?ot.delete(ke.id):ke.id!==void 0&&ot.add(ke.id),k(ot)},children:[r.jsxs("div",{className:"inventory-card-header",children:[r.jsxs("div",{className:"inventory-card-drug-info",children:[r.jsx("h4",{className:"inventory-card-drug-name",children:ke.brand_name||ke.name||"-"}),ke.brand_name&&ke.name&&ke.brand_name!==ke.name&&r.jsx("div",{className:"inventory-card-brand-name",children:ke.name})]}),r.jsx("div",{className:"inventory-card-checkbox",onClick:ot=>ot.stopPropagation(),children:r.jsx("input",{type:"checkbox",checked:G.has(ke.id),onChange:()=>{const ot=new Set(G);ot.has(ke.id)?ot.delete(ke.id):ot.add(ke.id),ie(ot)}})})]}),r.jsxs("div",{className:"inventory-card-body",children:[r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Stock"}),r.jsxs("span",{className:`inventory-card-field-value stock-value ${ke.stock<=UA?"stock-low":""}`,children:[ke.stock,r.jsxs("span",{className:"inventory-card-loose",children:[" (",ke.loose??0," loose)"]})]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"MRP"}),r.jsxs("span",{className:"inventory-card-field-value price-value",children:["",typeof ke.mrp=="number"?ke.mrp.toFixed(2):"N/A"]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Pack"}),r.jsx("span",{className:"inventory-card-field-value",children:ke.pack||"-"})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Expiry"}),r.jsx("span",{className:"inventory-card-field-value",children:ke.expiry_date?new Date(ke.expiry_date).toLocaleDateString("en-GB"):"-"})]})]}),E.has(ke.id)&&r.jsxs("div",{className:"inventory-card-expanded",children:[r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Rate"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.rate!==null&&ke.rate!==void 0?`${ke.rate.toFixed(2)}`:"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Box"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.box_number||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Supplier"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.supplier||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Batch"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.batch||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"HSN Code"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.hsn_code||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Discount"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.discount!==null&&ke.discount!==void 0?`${ke.discount.toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"GST"}),r.jsx("span",{className:"inventory-card-expanded-value",children:ke.gst!==null&&ke.gst!==void 0?`${ke.gst.toFixed(2)}%`:"-"})]}),s.length>0&&s.map(ot=>{var Tt;return r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:ot.label}),r.jsx("span",{className:"inventory-card-expanded-value",children:(Tt=ke.custom_fields)!=null&&Tt[ot.key]?String(ke.custom_fields[ot.key]):"-"})]},ot.key)})]}),r.jsxs("div",{className:"inventory-card-actions",onClick:ot=>ot.stopPropagation(),children:[r.jsxs("button",{className:"inventory-card-action-btn btn-edit",onClick:()=>n(`/dashboard/inventory/edit/${ke.id}`),title:"Edit Drug",children:[r.jsx($i,{size:14}),"Edit"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-delete",onClick:()=>oe(ke),title:"Delete Drug",children:[r.jsx(Vn,{size:14}),"Delete"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-adjust",onClick:()=>{Y(ke),$(!0)},title:"Adjust Stock",children:[r.jsx(NI,{size:14}),"Adjust"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-convert",onClick:()=>wt(ke),title:"Convert to Loose",disabled:!ke.pack||it(ke.pack)===null,children:[r.jsx(kI,{size:14}),"Loose"]})]})]},ke.id))}),ee>1&&r.jsxs("div",{className:"pagination-controls",style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",backgroundColor:"var(--card-bg, #fff)",borderTop:"1px solid var(--border-color)"},children:[r.jsx("button",{onClick:()=>z(ke=>Math.max(ke-1,1)),disabled:W===1,className:"pagination-button",children:"Previous"}),r.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Page ",W," of ",ee]}),r.jsx("button",{onClick:()=>z(ke=>Math.min(ke+1,ee)),disabled:W===ee,className:"pagination-button",children:"Next"})]}),L&&H&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:_e,className:"modal-close-button",children:r.jsx($t,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),r.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',r.jsx("span",{className:"drug-name",children:H.name||"Unnamed Drug"}),'"? This action cannot be undone.']}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:_e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Oe,className:"button-delete",children:"Delete"})]})]})}),B&&je&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Fe,className:"modal-close-button",children:r.jsx($t,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:je.name||"Unnamed Drug"}),r.jsx("br",{}),"Current Stock: ",je.stock]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:te,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),r.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:Ie===0?"":Ie,onChange:xe,placeholder:"e.g., 10 or -5",className:"form-input"}),r.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Fe,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),Q&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ge,className:"modal-close-button",children:r.jsx($t,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ge,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:We,className:"button-delete",children:"Delete All"})]})]})}),ue&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ke,className:"modal-close-button",children:r.jsx($t,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of Selected Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:G.size})," selected drug(s)? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ke,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:$e,className:"button-delete",children:"Delete Selected"})]})]})}),ze&&be&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:we,className:"modal-close-button",children:r.jsx($t,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Convert to Loose"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:be.name||"Unnamed Drug"}),r.jsx("br",{}),"Pack Size: ",be.pack,r.jsx("br",{}),"Current Stock: ",be.stock," packs, ",be.loose??0," loose units."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:Je,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"packsToConvert",className:"form-label",children:"Packs to Convert"}),r.jsx("input",{type:"number",name:"packsToConvert",id:"packsToConvert",required:!0,step:"1",min:"1",max:be.stock,value:Ae===0?"":Ae,onChange:Xe,className:"form-input"}),r.jsxs("p",{className:"form-help-text",children:["Converting ",Ae," pack(s) will add ",Ae*(it(be.pack)||0)," loose units."]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:we,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Convert"})]})]})]})}),ye&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ct,className:"modal-close-button",children:r.jsx($t,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Add Default Medications"}),r.jsx("p",{className:"modal-description",children:"Are you sure you want to add default medications to the inventory? This will add a predefined set of common medications."}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ct,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:bt,className:"button-submit",children:"Add Defaults"})]})]})}),r.jsx(OM,{isOpen:o,onClose:()=>l(!1),entityType:"drugs",entityLabel:"Pharmacy Drugs",currentConfig:a,onConfigUpdated:()=>{i()}})]})},eIe=()=>{const t=Lt();return r.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[r.jsx("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},bG=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(!1),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null),j=v.useCallback(async()=>{if(!t){l("Drug ID is missing."),s(!1);return}s(!0),l(null);try{const C=await se(`/api/drugs/${t}`);if(!C.ok){const k=await C.json();throw new Error(k.message||`Failed to fetch drug: ${C.statusText}`)}let E=await C.json();E={...E,name:E.name||"",brand_name:E.brand_name||"",mrp:parseFloat(String(E.mrp))||0,rate:E.rate!==null&&E.rate!==void 0?parseFloat(String(E.rate)):null,stock:parseInt(String(E.stock),10)||0,gst:E.gst!==null&&E.gst!==void 0?parseFloat(String(E.gst)):null,margin:E.margin!==null&&E.margin!==void 0?parseFloat(String(E.margin)):null,discount:E.discount!==null&&E.discount!==void 0?parseFloat(String(E.discount)):null,batch:E.batch||"",hsn_code:E.hsn_code||"",mfg:E.mfg||"",loose:E.loose!==null&&E.loose!==void 0?parseInt(String(E.loose),10):null},a(E)}catch(C){console.error("Failed to fetch drug:",C),l(C.message||"Failed to load drug data. Please try again.")}finally{s(!1)}},[t]);v.useEffect(()=>{j()},[j]),v.useEffect(()=>{const C=k=>{k.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var O;(O=b.current)==null||O.focus()},0),k.preventDefault()))},E=k=>{g.current&&!g.current.contains(k.target)&&p(!1)};return document.addEventListener("keydown",C),document.addEventListener("mousedown",E),()=>{document.removeEventListener("keydown",C),document.removeEventListener("mousedown",E)}},[f]);const S=C=>{const{name:E,value:k,type:O}=C.target;a(I=>I?{...I,[E]:O==="number"?parseFloat(k)||null:k}:null)},_=()=>{e(-1)},T=async C=>{if(C.preventDefault(),l(null),d(!0),!n||!n.id){l("Cannot edit drug: No drug data available."),d(!1);return}if(n.mrp===void 0||n.stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const E={...n,name:n.name===""?null:n.name,brand_name:n.brand_name===""?null:n.brand_name,rate:n.rate===0?null:n.rate,expiry_date:n.expiry_date===""?null:n.expiry_date,gst:n.gst===0?null:n.gst,margin:n.margin===0?null:n.margin,discount:n.discount===0?null:n.discount,batch:n.batch===""?null:n.batch,hsn_code:n.hsn_code===""?null:n.hsn_code,mfg:n.mfg===""?null:n.mfg,loose:n.loose===0?null:n.loose};try{const k=await se(`/api/drugs/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!k.ok){const O=await k.json();throw new Error(O.message||`Failed to update drug: ${k.statusText}`)}await k.json(),e(-1)}catch(k){console.error("Failed to update drug:",k),l(k.message||"Failed to update drug. Please try again.")}finally{d(!1)}};return i?r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):o&&!n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"error-message-load",children:["Error: ",o]})}):n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"edit-drug-form-container",children:[r.jsxs("div",{className:"edit-drug-form-header",children:[r.jsxs("h2",{children:["Edit Drug: ",n.name]}),r.jsx("button",{onClick:_,className:"cancel-button",title:"Go Back",children:r.jsx($t,{size:24})})]}),o&&r.jsx("div",{className:"error-message-submit",children:o}),r.jsxs("form",{onSubmit:T,className:"edit-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Composition Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Al,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"edit-name",value:n.name||"",onChange:S,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})," "]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-brand_name",className:"form-label",children:"Brand Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Al,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"edit-brand_name",value:n.brand_name||"",onChange:S,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Al,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"edit-mrp",required:!0,step:"0.01",min:"0",value:n.mrp||"",onChange:S,className:"custom-text-input",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Al,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"edit-stock",required:!0,step:"1",min:"0",value:n.stock||"",onChange:S,className:"custom-text-input",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"edit-pack",value:n.pack||"",onChange:S,className:"custom-text-input",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:n.expiry_date||"",onChange:S,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:n.box_number||"",onChange:S,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:g,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:n.description||"",onChange:S,className:"custom-text-input",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:n.supplier||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:10})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"edit-rate",step:"0.01",min:"0",value:n.rate??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:11,ref:b})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"edit-gst",step:"0.01",min:"0",max:"100",value:n.gst??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"edit-margin",step:"0.01",min:"0",max:"100",value:n.margin??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"edit-discount",step:"0.01",min:"0",max:"100",value:n.discount??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"edit-batch",value:n.batch||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"edit-hsn_code",value:n.hsn_code||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"edit-mfg",value:n.mfg||"",onChange:S,className:"custom-text-input",placeholder:"Optional",tabIndex:17})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-loose",className:"form-label",children:"Loose"}),r.jsx("input",{type:"number",name:"loose",id:"edit-loose",step:"1",min:"0",value:n.loose??"",onChange:S,placeholder:"Optional",className:"custom-text-input",tabIndex:18})]})]})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:_,disabled:c,className:"form-button cancel-form-button",tabIndex:19,children:"Back"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:20,children:c?"Saving...":"Save Changes"})]})]})]})}):r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"not-found-message",children:"Drug not found."})})},tIe=({clinicId:t})=>{const e=Lt(),[n,a]=v.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState([]),[f,p]=v.useState(!0),g=async()=>{try{const S=await se("/api/clinic-roles");if(S.ok){const _=await S.json();d(_)}}catch(S){console.error("Failed to fetch roles:",S)}finally{p(!1)}};v.useEffect(()=>{s(t?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly."),g()},[t]);const x=S=>{const{name:_,value:T}=S.target;a(C=>{const E={...C,[_]:T};return _==="role"&&T!=="doctor"&&(E.opd_fee=""),E})},b=async S=>{if(S.preventDefault(),s(null),!n.name||!n.email||!n.role||!n.password){s("Name, Email, Role, and Password are required.");return}if(!t){s("Clinic information is missing. Cannot add staff.");return}const _={...n,clinic_id:t,opd_fee:n.role==="doctor"&&n.opd_fee?parseFloat(String(n.opd_fee)):null};if(_.role==="doctor"&&n.opd_fee&&isNaN(_.opd_fee)){s("Invalid OPD Fee format. Please enter a number.");return}l(!0);try{const T=await se("/api/staff",{method:"POST",body:JSON.stringify(_)});if(!T.ok){const C=await T.json();throw new Error(C.message||"Server responded with an error")}e(-1)}catch(T){s(`Failed to add staff: ${T.message}`)}finally{l(!1)}},j=()=>{e(-1)};return r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:j,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(on,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{children:"Add New Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(ea,{size:18,className:"mr-2 text-red-500"}),i]}),r.jsxs("form",{onSubmit:b,className:`staff-form ${t?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{id:"name",type:"text",name:"name",value:n.name||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",name:"email",value:n.email||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"role",children:"Assign Role"}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:x,required:!0,disabled:o||!t||f,children:f?r.jsx("option",{value:"",children:"Loading roles..."}):c.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):c.map(S=>r.jsx("option",{value:S.key,children:S.name},S.key))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:n.password||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Create a password"})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee () (Optional)"}),r.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:n.opd_fee||"",onChange:x,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:o||!t}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),r.jsxs("button",{type:"submit",disabled:o||!t,children:[o?r.jsx(Ic,{size:18,className:"animate-spin mr-2"}):r.jsx(Gn,{size:18,className:"mr-2"}),o?"Adding...":"Add Staff Member"]})]})]})},nIe=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[i,s]=v.useState(""),[o,l]=v.useState(!0),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState(null),[b,j]=v.useState([]),[S,_]=v.useState(!0),T=async()=>{try{const I=await se("/api/clinic-roles");if(I.ok){const F=await I.json();j(F)}}catch(I){console.error("Failed to fetch roles:",I)}finally{_(!1)}},C=v.useCallback(async()=>{if(!t){p("Staff ID is missing."),l(!1);return}l(!0),p(null),x(null);try{const I=await se(`/staff/${t}`);if(!I.ok){const B=await I.json();throw new Error(B.message||`HTTP error! status: ${I.status}`)}const F=await I.json();a({name:F.name,email:F.email,role:F.role,opd_fee:F.opd_fee??"",active:F.active})}catch(I){p(`Failed to load staff details: ${I.message}`)}finally{l(!1)}},[t]);v.useEffect(()=>{C(),T()},[C]);const E=I=>{const{name:F,value:B,type:$}=I.target;if($==="checkbox"){const{checked:L}=I.target;a(V=>({...V,[F]:L}))}else a(L=>({...L,[F]:B}))},k=I=>{s(I.target.value)},O=async I=>{if(I.preventDefault(),!t){p("Staff ID is missing.");return}d(!0),p(null),x(null);const F={name:n.name,email:n.email,role:n.role,active:n.active};if(n.role==="doctor"){const B=n.opd_fee?parseFloat(String(n.opd_fee)):null;if(B!==null&&isNaN(B)){p("OPD Fee must be a valid number."),d(!1);return}F.opd_fee=B}else F.opd_fee=null;i.trim()!==""&&(F.password=i.trim());try{const B=await se(`/staff/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!B.ok){const $=await B.json();throw new Error($.message||`HTTP error! status: ${B.status}`)}x("Staff details updated successfully!"),s(""),setTimeout(()=>e(-1),1500)}catch(B){p(`Failed to update staff: ${B.message}`)}finally{d(!1)}};return o?r.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(Ic,{className:"h-12 w-12 animate-spin text-teal-600"}),r.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(on,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),f&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(ea,{size:18,className:"mr-2 text-red-500"}),f,r.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),g&&r.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[r.jsx(Ll,{size:18,className:"mr-2 text-green-500"}),g,r.jsx("button",{onClick:()=>x(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:""})]}),r.jsxs("form",{onSubmit:O,className:"staff-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:E,required:!0,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email||"",onChange:E,required:!0,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"role",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:E,required:!0,disabled:S,children:S?r.jsx("option",{value:"",children:"Loading roles..."}):b.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"lab",children:"Lab Technician"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"})]}):b.map(I=>r.jsx("option",{value:I.key,children:I.name},I.key))})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee ()"}),r.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:n.opd_fee||"",onChange:E,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),r.jsxs("div",{className:"form-group checkbox-group",children:[r.jsx("input",{id:"active",name:"active",type:"checkbox",checked:n.active??!0,onChange:E}),r.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),r.jsx("input",{type:"password",id:"password",name:"password",value:i,onChange:k,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),r.jsx("button",{type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(Ic,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(cs,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})},rIe=()=>{const{patientId:t}=Fa(),e=Lt(),[n,a]=v.useState([]),[i,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){d("Patient ID not provided.");return}l(!0),d(null);try{const g=await se(`/api/patients/${t}`);if(!g.ok)throw new Error(`Failed to fetch patient details: ${g.status}`);const x=await g.json();s({name:x.name,age:x.age,gender:x.gender});const b=await se(`/api/patients/${t}/complaints`);if(b.ok){const S=(await b.json()).sort((_,T)=>new Date(T.createdAt).getTime()-new Date(_.createdAt).getTime());a(S)}else if(b.status===404)a([]);else throw new Error(`Failed to fetch complaints: ${b.status}`)}catch(g){console.error("Error fetching past complaints or patient info:",g),d(`Failed to load data. ${g.message}`),a([]),s(null)}finally{l(!1)}})()},[t]);const f=p=>{navigator.clipboard.writeText(p).then(()=>console.log("Complaint copied to clipboard")).catch(g=>console.error("Failed to copy complaint: ",g))};return r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),r.jsx("div",{className:"w-16"})," "]}),i&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",r.jsx("strong",{children:i.name})," (",i.age??"N/A"," / ",i.gender??"N/A",")"]}),c&&r.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",c]}),o&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!o&&n.length===0&&!c&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!o&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(p=>r.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(p.createdAt).toLocaleString()}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.complaint}),r.jsx("button",{onClick:()=>f(p.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:""})]},p.id))})]})},aIe=t=>{if(t===0)return"Zero";const e=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],a=l=>l===0?"":l<20?e[l]:l<100?n[Math.floor(l/10)]+(l%10?" "+e[l%10]:""):e[Math.floor(l/100)]+" Hundred"+(l%100?" and "+a(l%100):""),i=Math.floor(t),s=Math.round((t-i)*100);let o="";return i>=1e7&&(o+=a(Math.floor(i/1e7))+" Crore "),i>=1e5&&(o+=a(Math.floor(i%1e7/1e5))+" Lakh "),i>=1e3&&(o+=a(Math.floor(i%1e5/1e3))+" Thousand "),i>=100&&(o+=a(Math.floor(i%1e3/100))+" Hundred "),i%100&&(o+=(o?"and ":"")+a(i%100)),o=o.trim()+" Rupees",s>0&&(o+=" and "+a(s)+" Paise"),o+" Only"},iIe=t=>{const e=typeof t=="string"?parseInt(t,10):t;return`INV-${String(e).padStart(6,"0")}`},VA=500,PB="defaultConsultationFee",sIe=({patientId:t,billId:e,queueId:n,onBillCreated:a,onBillUpdated:i,initialItems:s=[],billType:o="other",relatedId:l,initialStatus:c="pending",initialDiscountPercentage:d=0,readOnlyMode:f=!1,doctorId:p,labOrderId:g,patientInsuranceType:x})=>{const[b,j]=v.useState(null),[S,_]=v.useState([]),T=v.useRef([]),[C,E]=v.useState(""),[k,O]=v.useState(""),[I,F]=v.useState(1),[B,$]=v.useState(d),[L,V]=v.useState("cash"),[H,ne]=v.useState(!1),[Q,q]=v.useState(null),[G,ie]=v.useState(!1),[W,z]=v.useState(!1),[ce,je]=v.useState(!1),[Y,Ie]=v.useState(null),[Ue,ze]=v.useState([]),[Le,be]=v.useState(null),[Ce,Ae]=v.useState(""),[me,ye]=v.useState("cash"),[le,X]=v.useState(!1),[ae,de]=v.useState(!1),[ee,Ne]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Te=()=>{ee.length<5&&Ne(tt=>[...tt,{id:Date.now().toString(),method:"cash",amount:0}])},Fe=tt=>{ee.length>2&&Ne(gt=>gt.filter(St=>St.id!==tt))},xe=(tt,gt,St)=>{Ne(Dt=>Dt.map(Rn=>Rn.id===tt?gt==="method"?{...Rn,method:St}:{...Rn,amount:Math.max(0,St)}:Rn))},te=(tt,gt)=>{const St=ee.filter(Nn=>Nn.id!==tt).reduce((Nn,Rn)=>Nn+Rn.amount,0),Dt=Math.max(0,gt-St);Ne(Nn=>Nn.map(Rn=>Rn.id===tt?{...Rn,amount:Dt}:Rn))},[oe,_e]=v.useState(null),[Oe,K]=v.useState(!1),[ge,ue]=v.useState(VA),[fe,Ee]=v.useState(VA.toString()),[Ke,$e]=v.useState(""),[We,it]=v.useState(""),[wt,we]=v.useState(""),[Xe,Je]=v.useState(""),[ct,Ct]=v.useState(""),bt=e?"view_pay":"create";v.useEffect(()=>{const tt=localStorage.getItem(PB),gt=tt?parseFloat(tt):VA;isNaN(gt)||(ue(gt),Ee(gt.toString()))},[]);const ke=s.length===0;v.useEffect(()=>{t?(async()=>{ne(!0),q(null);try{const gt=await se(`/api/patients/${t}`);if(!gt.ok){const Dt=await gt.json().catch(()=>({}));throw new Error(Dt.message||"Failed to fetch patient details")}const St=await gt.json();j(St)}catch(gt){q(`Failed to load patient details: ${gt.message}`),j(null)}finally{ne(!1)}})():j(null)},[t]),v.useEffect(()=>{e?(async()=>{je(!0),q(null),Ie(null),ze([]),be(null);try{const gt=await se(`/api/bills/${e}`);if(!gt.ok){const Dt=await gt.json().catch(()=>({}));throw new Error(Dt.message||"Failed to fetch bill details")}const St=await gt.json();if(!St.bill||!St.payments||!St.calculated)throw new Error("Invalid bill details structure.");Ie(St.bill),ze(St.payments),be(St.calculated),$(St.bill.discount_percentage!==void 0&&St.bill.discount_percentage!==null?parseFloat(St.bill.discount_percentage.toString()):0),St.bill.payment_mode&&V(St.bill.payment_mode),!b&&St.bill.patient_id&&ot(St.bill.patient_id.toString())}catch(gt){q(`Failed to load bill details: ${gt.message}`),Ie(null),ze([]),be(null)}finally{je(!1)}})():(Ie(null),ze([]),be(null))},[e]),v.useEffect(()=>{(async()=>{try{const gt=await se("/api/clinics/settings");if(!gt.ok)throw new Error("Failed to fetch clinic settings");const St=await gt.json();$e(St.upi_id||""),it(St.name||""),we(St.address||""),Je(St.notes||"")}catch(gt){console.error("Error fetching clinic settings:",gt)}})()},[]);const ot=async tt=>{ne(!0);try{const gt=await se(`/api/patients/${tt}`);if(!gt.ok)throw new Error("Failed to fetch patient");const St=await gt.json();j(St)}catch(gt){console.error("Error fetching patient details:",gt),j(null)}finally{ne(!1)}},Tt=v.useCallback(async tt=>{z(!0),q(null);const gt=tt.filter(St=>St.drug_id!=null).map(async St=>{try{const Dt=await se(`/api/drugs/${St.drug_id}`);if(!Dt.ok)throw new Error(`Drug ${St.drug_id} not found.`);const Nn=await Dt.json();return{...St,price:Nn.price,total:Nn.price*St.quantity}}catch{return q(Nn=>`${Nn?Nn+"; ":""}Failed to fetch price for ${St.name}`),St}});try{const St=await Promise.all(gt);_(Dt=>{const Nn=new Map(St.map(Rn=>[Rn.id,Rn]));return Dt.map(Rn=>Nn.get(Rn.id)||Rn)})}catch{}finally{z(!1)}},[se]);v.useEffect(()=>{if(e){_([]),T.current=[];return}JSON.stringify(s)===JSON.stringify(T.current)||(async()=>{let St=[];if(s&&s.length>0)St=s.map((Dt,Nn)=>({...Dt,id:`initial-${Nn}-${Date.now()}`})),V(c==="paid"?"cash":x==="no_cash_insurance"?"no_cash_insurance":"cash"),$(d),o==="pharmacy"&&!f&&await Tt(St);else if(t&&ke&&o==="consultation"){let Dt=ge;if(p)try{const Nn=await se(`/api/staff/${p}`);if(!Nn.ok){const ba=await Nn.json().catch(()=>({}));throw new Error(ba.message||"Doctor not found or error fetching fee")}const Rn=await Nn.json();Rn.opd_fee!=null&&!isNaN(parseFloat(String(Rn.opd_fee)))&&parseFloat(String(Rn.opd_fee))>=0&&(Dt=parseFloat(String(Rn.opd_fee)))}catch(Nn){q(Rn=>`${Rn?Rn+"; ":""}Could not fetch doctor's fee, using default. (${Nn.message})`)}St=[{id:Date.now(),name:"Consultation Fee",price:Dt,quantity:1,total:Dt*1,drug_id:null}],V(x==="no_cash_insurance"?"no_cash_insurance":"cash")}else St=[],V(x==="no_cash_insurance"?"no_cash_insurance":"cash");_(St),T.current=s})()},[e,t,p,s,o,ge,ke,c,f,Tt,d,x]);const Ve=()=>{const tt=parseFloat(k);if(!f)if(C&&!isNaN(tt)&&tt>=0&&I>0){if(C.trim().toLowerCase()==="consultation fee"&&S.some(St=>St.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const gt={id:Date.now(),name:C.trim(),price:tt,quantity:I,total:tt*I,drug_id:null};_([...S,gt]),E(""),O(""),F(1)}else alert("Invalid item details.")},jt=tt=>{f||_(S.filter(gt=>gt.id!==tt))},kt=v.useMemo(()=>{let tt=S.reduce((gt,St)=>gt+St.total,0);return bt==="create"&&B>0&&(tt=tt*(1-B/100)),(Le==null?void 0:Le.totalDue)!==void 0&&(Le==null?void 0:Le.totalDue)!==null?Le.totalDue:tt},[S,Le,B,bt]),Yn=v.useMemo(()=>S.reduce((tt,gt)=>tt+gt.total,0),[S]),vt=v.useMemo(()=>Yn*(B/100),[Yn,B]),Ot=v.useMemo(()=>(Le==null?void 0:Le.totalPaid)??0,[Le]),Vt=v.useMemo(()=>(Le==null?void 0:Le.balance)!==void 0&&(Le==null?void 0:Le.balance)!==null?Le.balance:kt-Ot,[Le,kt,Ot]);v.useEffect(()=>{if(kt>0&&Ke){const tt=`upi://pay?pa=${Ke}&pn=${encodeURIComponent(We)}&am=${kt.toFixed(2)}&cu=INR`;Ct(tt)}else Ct("")},[kt,Ke,We]),v.useEffect(()=>{(async()=>{if(L==="credit"&&t){K(!0);try{const gt=await se(`/api/patient-debts/${t}/balance`);if(gt.ok){const St=await gt.json();_e(St.netDebt||0)}else _e(0)}catch(gt){console.error("Error fetching patient debt:",gt),_e(0)}finally{K(!1)}}})()},[L,t]);const ln=()=>{const tt=parseFloat(fe);!isNaN(tt)&&tt>=0?(ue(tt),localStorage.setItem(PB,tt.toString())):alert("Invalid fee amount.")},er=async(tt,gt)=>{ie(!0),q(null);try{const St=await se("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:gt,billId:tt})}),Dt=await St.json();if(!St.ok||!Dt.order)throw new Error(Dt.message||"Failed to create Razorpay order.");const{key_id:Nn,order:Rn}=Dt,ba={key:Nn,amount:Rn.amount,currency:Rn.currency,name:"Newtons Ai HMS Clinic",description:`Bill Payment for Patient ID: ${t}`,order_id:Rn.id,handler:async function(yi){try{const co=await se("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:yi.razorpay_payment_id,razorpay_order_id:yi.razorpay_order_id,razorpay_signature:yi.razorpay_signature,billId:tt})}),Td=await co.json();if(co.ok&&Td.success)a&&a(tt),i&&i(),setTimeout(()=>window.print(),200);else throw new Error(Td.message||"Payment verification failed.")}catch(co){q(`Payment verification failed: ${co.message}. Contact support.`)}finally{ie(!1)}},prefill:{name:(b==null?void 0:b.name)||""},notes:{bill_id:tt,patient_id:t},theme:{color:"#3399cc"},modal:{ondismiss:function(){q("Payment cancelled."),ie(!1)}}};if(window.Razorpay)new window.Razorpay(ba).open();else throw new Error("Razorpay SDK not loaded.")}catch(St){q(`Failed to initiate online payment: ${St.message}`),ie(!1)}},Tn=async()=>{if(!e){q("Bill ID is missing.");return}const tt=ae?va:parseFloat(Ce);if(isNaN(tt)||tt<=0){q("Please enter a valid positive payment amount.");return}X(!0),q(null);try{if(ae){for(const gt of ee)if(gt.amount>0){const St=await se(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:gt.amount,payment_mode:gt.method})});if(!St.ok){const Dt=await St.json();throw new Error(Dt.message||`Failed to record ${gt.method} payment`)}}}else{const gt={amount_paid:tt,payment_mode:me},St=await se(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(gt)}),Dt=await St.json();if(!St.ok)throw new Error(Dt.message||`Failed to record payment (Status: ${St.status})`)}Ae(""),ae&&(Ne([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),de(!1)),i?i():console.log("Payment recorded.")}catch(gt){q(`Failed to record payment: ${gt.message}`)}finally{X(!1)}},va=ee.reduce((tt,gt)=>tt+gt.amount,0),Ka=Math.abs(va-(bt==="create"?kt:va))<.01,Br=ae?ee.some(tt=>tt.method==="credit"):bt==="create"?L==="credit":me==="credit",ka=async()=>{if(bt==="view_pay")return;if(!t){q("Patient ID is missing for creating a bill.");return}if(S.length===0){q("Cannot finalize an empty bill.");return}if(ae&&Math.abs(va-kt)>.01){q(`Split payment total (${va.toFixed(2)}) must match the bill total (${kt.toFixed(2)}).`);return}ie(!0),q(null);const tt=kt,gt=S.map(({id:Dt,...Nn})=>Nn),St={patientId:t,queueId:n||null,items:gt,amount:tt,paymentMode:ae?"split":L==="online"?"online":L,type:o,related_id:l||g||null,status:L==="online"?"pending":ae||L?"paid":"pending",discountPercentage:B,labOrderId:g||null};if(ae&&(St.splitPayments=ee.map(Dt=>({method:Dt.method,amount:Dt.amount}))),L==="online"&&!ae)try{const Dt=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Nn=await Dt.json();if(!Dt.ok)throw new Error(Nn.message||"Failed to create pending bill.");er(Nn.id,Math.round(tt*100))}catch(Dt){q(`Failed to create pending bill: ${Dt.message}`),ie(!1)}else{if(!L&&!ae){q("Payment mode required."),ie(!1);return}setTimeout(()=>window.print(),200);try{const Dt=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),Nn=await Dt.json();if(!Dt.ok)throw new Error(Nn.message||"Failed to create bill.");if(Br&&t){const Rn=ae?ee.filter(ba=>ba.method==="credit").reduce((ba,yi)=>ba+yi.amount,0):L==="credit"?tt:0;if(Rn>0)try{await se(`/api/patient-debts/${t}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Rn,related_bill_id:Nn.id,notes:`Bill #${Nn.id} (Credit Part)`})})}catch(ba){console.error("Failed to create debt entry:",ba)}}a&&a(Nn.id),ie(!1)}catch(Dt){q(`Failed to process bill: ${Dt.message}`),ie(!1)}}},zi=(Y==null?void 0:Y.status)??c,In=bt==="view_pay"&&Y&&zi==="pending";return!t&&!e?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):H||bt==="view_pay"&&ce?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):bt==="view_pay"&&!Y&&!ce&&Q?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",Q]}):bt==="create"&&!b&&!H&&Q?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",Q]}):r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:We?`${We}`:"Bill"}),(wt||Xe)&&r.jsxs("div",{className:"clinic-details-print",children:[wt&&r.jsx("span",{className:"small-text clinic-address",children:wt}),Xe&&r.jsx("span",{className:"small-text clinic-notes",children:Xe})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient"]})," ",(b==null?void 0:b.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]}),Y&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"# Invoice"})," ",iIe(Y.id)]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",b==null?void 0:b.name]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," ID"]})," ",b==null?void 0:b.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Age/Gender"]})," ",(b==null?void 0:b.age)??"N/A"," / ",(b==null?void 0:b.gender)??"N/A"]}),bt==="view_pay"&&Y&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Cc,{size:16})," Bill ID"]})," ",Y.id]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h2",{children:"Bill Items"}),bt==="create"&&o==="pharmacy"&&!f&&S.some(tt=>tt.drug_id!=null)&&r.jsxs("button",{onClick:()=>Tt(S),disabled:W,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[r.jsx(wE,{size:14,className:`lucide ${W?"animate-spin":""}`}),W?"Refreshing...":"Refresh"]})]}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"}),bt==="create"&&!f&&r.jsx("th",{className:"no-print",children:"Action"})]})}),r.jsxs("tbody",{children:[bt==="create"&&S.map((tt,gt)=>r.jsxs("tr",{children:[r.jsx("td",{children:gt+1}),r.jsx("td",{children:tt.name}),r.jsx("td",{children:tt.quantity}),r.jsxs("td",{children:["",tt.price.toFixed(2)]}),r.jsxs("td",{children:["",tt.total.toFixed(2)]}),!f&&r.jsx("td",{className:"no-print",children:typeof tt.id=="number"&&tt.name!=="Consultation Fee"?r.jsxs("button",{onClick:()=>jt(tt.id),className:"remove-item-button",title:"Remove",children:[" ",r.jsx($t,{size:16})," "]}):r.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",r.jsx(zX,{size:14})," "]})})]},tt.id)),bt==="view_pay"&&Y&&Y.items.map((tt,gt)=>r.jsxs("tr",{children:[r.jsx("td",{children:gt+1}),r.jsx("td",{children:tt.name}),r.jsx("td",{children:tt.quantity}),r.jsxs("td",{children:["",tt.price.toFixed(2)]}),r.jsxs("td",{children:["",(tt.total??tt.price*tt.quantity).toFixed(2)]})]},gt)),(bt==="create"&&S.length===0||bt==="view_pay"&&(Y==null?void 0:Y.items.length)===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"20px"},children:"No items added."})})]})]}),bt==="create"&&!f&&r.jsxs("div",{className:"add-item-form no-print",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Item Description"}),r.jsx("input",{type:"text",value:C,onChange:tt=>E(tt.target.value),placeholder:"Service Name",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"80px"},children:[r.jsx("label",{children:"Qty"}),r.jsx("input",{type:"number",min:"1",value:I,onChange:tt=>F(parseInt(tt.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"100px"},children:[r.jsx("label",{children:"Price ()"}),r.jsx("input",{type:"number",value:k,onChange:tt=>O(tt.target.value),placeholder:"0.00",className:"custom-text-input"})]}),r.jsx("button",{onClick:Ve,className:"add-item-button",children:"Add Item"}),o==="consultation"&&r.jsxs("div",{className:"default-fee-section",style:{marginLeft:"auto",display:"flex",alignItems:"flex-end",gap:"5px"},children:[r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{children:"Default Fee"}),r.jsx("input",{type:"number",value:fe,onChange:tt=>Ee(tt.target.value),style:{width:"80px",padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}})]}),r.jsx("button",{onClick:ln,className:"secondary-button",style:{padding:"10px"},children:r.jsx(cs,{size:16})})]})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Yn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",B,"%)"]}),r.jsxs("span",{children:["- ",vt.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",kt.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px dashed #ddd"},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9em",marginBottom:"5px"},children:"Payment Mode:"}),ae?ee.map((tt,gt)=>tt.amount>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:tt.method.toUpperCase()}),r.jsxs("span",{children:["",tt.amount.toFixed(2)]})]},gt)):r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:L?L.toUpperCase():"CASH"}),r.jsxs("span",{children:["",kt.toFixed(2)]})]}),bt==="view_pay"&&Ue&&Ue.length>0&&r.jsxs("div",{style:{marginTop:"5px"},children:[r.jsx("div",{style:{fontSize:"0.8em",color:"#666"},children:"Payment History:"}),Ue.map(tt=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8em"},children:[r.jsxs("span",{children:[tt.payment_mode," (",new Date(tt.payment_date).toLocaleDateString(),")"]}),r.jsxs("span",{children:["",tt.amount_paid]})]},tt.id))]})]}),Br&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",fontSize:"0.85em",fontWeight:500},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Prev. Debt:"}),r.jsxs("span",{children:["",(oe||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Net Payable:"}),r.jsxs("span",{children:["",((oe||0)+(ae?ee.filter(tt=>tt.method==="credit").reduce((tt,gt)=>tt+gt.amount,0):L==="credit"?kt:0)).toFixed(2)]})]})]})]}),ct&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(La,{value:ct,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Yn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),bt==="create"&&!f?r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:B,onChange:tt=>$(parseFloat(tt.target.value)||0),min:"0",max:"100",className:"discount-input-total"}),"%"]}):r.jsxs("span",{children:[B,"%"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Amount"}),r.jsxs("span",{children:["- ",vt.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",kt.toFixed(2)]})]}),bt==="view_pay"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"summary-row",style:{color:"green"},children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Ot.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",style:{color:"red",fontWeight:"bold"},children:[r.jsx("span",{children:"Balance Due"}),r.jsxs("span",{children:["",Vt.toFixed(2)]})]})]}),r.jsx("div",{className:"qr-code-container",children:ct?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:ct,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available."})}),bt==="create"&&r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>de(!ae),disabled:f||G,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ae?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ae?"rgba(79, 172, 254, 0.1)":"transparent",color:ae?"#4facfe":"#666",cursor:f||G?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Bo,{size:14})," Split"]})]}),ae?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",va.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:ee.map((tt,gt)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:gt+1}),r.jsxs("select",{value:tt.method,onChange:St=>xe(tt.id,"method",St.target.value),className:"split-payment-select",disabled:G,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:tt.amount||"",onChange:St=>xe(tt.id,"amount",parseFloat(St.target.value)||0),className:"split-payment-input",disabled:G})]}),ee.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>te(tt.id,kt),className:"split-payment-btn split-payment-btn-fill",title:"Fill",children:"Buy"}),r.jsx("button",{type:"button",onClick:()=>Fe(tt.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Vn,{size:12})})]})]},tt.id))}),ee.length<5&&r.jsxs("button",{type:"button",onClick:Te,className:"split-payment-add-btn",disabled:G,children:[r.jsx(Gn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Required:"}),r.jsxs("span",{style:{fontWeight:600},children:["",kt.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ka?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:Ka?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",va.toFixed(2)]})]})]})]}):r.jsxs("select",{id:"paymentMode",value:L,onChange:tt=>V(tt.target.value),className:"payment-mode-select",disabled:f||G,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"}),r.jsx("option",{value:"online",children:"Online (Razorpay)"})]})]}),bt==="create"&&L==="credit"&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Oe?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:oe&&oe>0?"#dc3545":"#28a745"},children:["",(oe||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"This Bill:"}),r.jsxs("strong",{children:["+ ",kt.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((oe||0)+kt).toFixed(2)]})]})]})]}),bt==="create"&&!f&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:ka,className:"primary-button",disabled:G||S.length===0,children:G?"Processing...":"Finalise and Bill"})}),bt==="view_pay"&&r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:()=>window.print(),className:"secondary-button",children:"Print Bill"}),In&&Vt>0&&r.jsxs("div",{className:"payment-recording-section",style:{marginTop:"20px",borderTop:"1px dashed #ccc",paddingTop:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("h3",{style:{fontSize:"1em",marginBottom:"0"},children:"Record Payment"}),r.jsxs("button",{type:"button",onClick:()=>de(!ae),disabled:le,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",fontSize:"0.75rem",border:ae?"1px solid #4facfe":"1px solid #ccc",borderRadius:"4px",backgroundColor:ae?"rgba(79, 172, 254, 0.1)":"transparent",color:ae?"#4facfe":"#666",cursor:le?"not-allowed":"pointer"},children:[r.jsx(Bo,{size:12})," Split"]})]}),ae?r.jsxs("div",{className:"split-payment-wrapper",style:{marginBottom:"10px",fontSize:"0.9em"},children:[r.jsx("div",{className:"split-payment-list",children:ee.map(tt=>r.jsxs("div",{className:"split-payment-row",children:[r.jsxs("select",{value:tt.method,onChange:gt=>xe(tt.id,"method",gt.target.value),className:"split-payment-select",disabled:le,style:{padding:"4px"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Ins."}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",style:{left:"5px",fontSize:"0.8em"},children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:tt.amount||"",onChange:gt=>xe(tt.id,"amount",parseFloat(gt.target.value)||0),className:"split-payment-input",style:{paddingLeft:"15px"},disabled:le})]}),ee.length>2&&r.jsx("button",{type:"button",onClick:()=>Fe(tt.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Vn,{size:12})})]},tt.id))}),ee.length<5&&r.jsxs("button",{type:"button",onClick:Te,className:"split-payment-add-btn",disabled:le,style:{fontSize:"0.8em",padding:"4px"},children:[r.jsx(Gn,{size:12})," Add"]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em",marginTop:"5px",color:"#666"},children:[r.jsxs("span",{children:["Paying: ",r.jsxs("strong",{children:["",va.toFixed(2)]})]}),r.jsxs("span",{style:{color:va>Vt?"red":"inherit"},children:["Max: ",Vt.toFixed(2)]})]})]}):r.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[r.jsx("input",{type:"number",value:Ce,onChange:tt=>Ae(tt.target.value),placeholder:`Max ${Vt.toFixed(2)}`,className:"custom-text-input",style:{flex:1}}),r.jsxs("select",{value:me,onChange:tt=>ye(tt.target.value),className:"custom-select-input",style:{width:"auto"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsx("button",{onClick:Tn,disabled:le||ae&&va<=0||!ae&&(!Ce||parseFloat(Ce)<=0),className:"primary-button",style:{width:"100%",fontSize:"0.9em"},children:le?"Recording...":"Record Payment"})]})]})]})})]}),r.jsxs("div",{className:"amount-in-words-print print-only",children:[r.jsx("strong",{children:"Amount in Words:"})," ",aIe(bt==="view_pay"&&Y?Y.amount:kt)]}),r.jsxs("div",{className:"terms-conditions-print print-only",children:[r.jsx("h4",{children:"Terms & Conditions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Goods once sold will not be taken back or exchanged."}),r.jsx("li",{children:"All disputes are subject to local jurisdiction."}),r.jsx("li",{children:"Please retain this bill for future reference."})]})]}),r.jsxs("div",{className:"signature-section-print print-only",children:[r.jsx("div",{className:"receiver-sign",children:r.jsx("div",{className:"sign-line",children:"Receiver's Signature"})}),r.jsxs("div",{className:"authorized-sign",children:[r.jsxs("div",{className:"for-clinic",children:["For ",We||"Clinic"]}),r.jsx("div",{className:"sign-line",children:"Authorised Signatory"})]})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{className:"thank-you",children:"Thank you for your visit!"}),r.jsx("p",{className:"computer-generated",children:"This is a computer generated invoice and does not require a physical signature."})]})]})]})},oIe=()=>{const t=Lt(),e=$r(),{patientId:n,queueId:a,patientName:i,initialItems:s,billType:o,relatedId:l,initialStatus:c,initialDiscountPercentage:d,doctorId:f,billId:p,labOrderId:g}=e.state||{},[x,b]=v.useState(null),[j,S]=v.useState(null),[_,T]=v.useState(null),[C,E]=v.useState(null),[k,O]=v.useState(null),[I,F]=v.useState(null),[B,$]=v.useState(null),[L,V]=v.useState(null),[H,ne]=v.useState(!0),[Q,q]=v.useState(null),[G,ie]=v.useState(i||"");v.useEffect(()=>{if(!n){console.error("BillingPage loaded without required patientId in location state."),t("/");return}(async()=>{ne(!0),q(null);try{let Ie=n,Ue=s||null,ze=c||null,Le=o||null,be=l||null,Ce=d!==void 0?parseFloat(d):null,Ae=i||null,me=null;if(p){console.log(`Fetching details for Bill ID: ${p}`);const ye=await se(`/api/bills/${p}`);if(!ye.ok){const X=await ye.json().catch(()=>({message:`Failed to fetch bill details for ID ${p}`}));throw new Error(X.message||`Failed to fetch bill details (Status: ${ye.status})`)}const le=await ye.json();if(console.log("Fetched Bill Data:",le),Ue=le.bill.items||[],ze=le.bill.status||"pending",Le=le.bill.type||null,be=le.bill.related_id||null,Ce=le.bill.discount_percentage!==void 0&&le.bill.discount_percentage!==null?parseFloat(le.bill.discount_percentage):0,Ie=le.bill.patient_id,E(Ue),O(ze),F(Le),$(be),V(Ce),Ie){const X=await se(`/api/patients/${Ie}`);if(X.ok){const ae=await X.json();Ae=ae.name,me=ae.phone??null,T(ae.insurance_type??null),ie(Ae),S(me)}else console.warn(`Could not fetch patient details for ID ${Ie} from bill.`),ie("Patient (Not Found)")}else console.warn(`Bill ${p} does not have an associated patient_id.`),ie("Patient (Unknown)")}else if(g){console.log(`Fetching details for Lab Order ID: ${g}`);const ye=await se(`/api/lab/${g}`);if(!ye.ok){let X=`Failed to fetch lab order details (Status: ${ye.status} ${ye.statusText})`;try{X=(await ye.json()).message||X}catch{console.error("Response was not valid JSON:",await ye.text())}throw new Error(X)}const le=await ye.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(le,null,2)),Ue=(le.tests||[]).filter(X=>X&&typeof X.name=="string"&&X.price!==void 0&&X.id!==void 0).map(X=>{const ae=parseFloat(X.price||"0"),de=!isNaN(ae)&&isFinite(ae)?ae:0;return{item_id:X.id,name:X.name,price:de,quantity:1,total:de*1,type:"lab_test"}}),Ue&&Ue.length===0&&(le.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",le.tests),q(X=>`${X?X+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),ze="pending",Le="lab",be=g,Ie=le.patient_id,E(Ue),O(ze),F(Le),$(be),Ie){const X=await se(`/api/patients/${Ie}`);if(X.ok){const ae=await X.json();Ae=ae.name,me=ae.phone??null,T(ae.insurance_type??null),ie(Ae),S(me)}else console.warn(`Could not fetch patient details for ID ${Ie} from lab order.`),ie("Patient (Not Found)")}else console.warn(`Lab Order ${g} does not have an associated patient_id.`),ie("Patient (Unknown)")}else if(E(s||null),O(c||null),F(o||null),$(l||null),V(d!==void 0?parseFloat(d):null),ie(i||`ID ${n}`),Ie){const ye=await se(`/api/patients/${Ie}`);if(ye.ok){const le=await ye.json();S(le.phone??null),T(le.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${Ie}.`)}if(a){const ye=await se(`/api/queue/${a}`);if(ye.ok){const le=await ye.json();b(le.token_number)}else console.warn(`Could not fetch queue details for ID ${a}.`)}}catch(Ie){console.error("Error fetching billing page details:",Ie),q(`Failed to load details: ${Ie.message}`),E(null),O(null),F(null),$(null),ie(i||""),S(null),b(null)}finally{ne(!1)}})()},[n,p,g,a,t]);const W=Y=>{console.log(`Billing process completed for patient ID ${n}. New Bill ID: ${Y}`),t(-1)},z=()=>{console.log(`Bill updated for patient ID ${n}.`),t(-1)};if(!n)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(PI,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),r.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(H)return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx(Z,{width:80,height:32})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx(Z,{width:300,height:32})}),r.jsxs("div",{className:"patient-info-bar mb-6",style:{display:"flex",gap:"1rem",padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:120,height:20}),r.jsx(Z,{width:140,height:20})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 space-y-4",children:[r.jsx(Z,{width:"100%",height:200,className:"rounded-lg"}),r.jsx(Z,{width:"100%",height:150,className:"rounded-lg"})]}),r.jsx("div",{className:"space-y-4",children:r.jsx(Z,{width:"100%",height:300,className:"rounded-lg"})})]})]})]});if(Q)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(PI,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),r.jsx("p",{className:"text-sm text-center mb-4",children:Q}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>t(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const je=(k??c)==="paid";return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(on,{size:20,className:"lucide"})})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsxs("h3",{className:"billing-page-title",children:[p?"Bill Details":g?"Create Lab Bill":"Create Bill"," for Patient: ",G||`ID ${n}`]}),r.jsxs("div",{className:"patient-info-bar",children:[x!==null&&r.jsxs("span",{children:[r.jsx(Ya,{size:14,className:"lucide"})," Token: ",x]}),j&&r.jsxs("span",{children:[r.jsx(eg,{size:14,className:"lucide"})," Phone: ",j]}),g&&r.jsxs("span",{className:"lab-order-info",children:[r.jsx(ls,{size:14,className:"lucide"})," Lab Order: ",g.substring(0,8),"..."]}),!j&&x===null&&!g&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),_&&r.jsxs("span",{className:"insurance-info",children:[r.jsx(DJ,{size:14,className:"lucide"})," Insurance: ",_.replace(/_/g," ").replace(/\b\w/g,Y=>Y.toUpperCase())]}),!j&&x===null&&!g&&!_&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),r.jsx(sIe,{patientId:n,labOrderId:g,queueId:a,onBillCreated:W,onBillUpdated:z,initialItems:C??s,billType:I??o,relatedId:B??l,initialStatus:k??c,initialDiscountPercentage:L??d,readOnlyMode:je,doctorId:f,patientInsuranceType:_??void 0})]})]})},lIe=()=>{const{patientId:t}=Fa(),e=Lt(),[n,a]=v.useState([]),[i,s]=v.useState(!1),[o,l]=v.useState(null),[c,d]=v.useState("");return v.useEffect(()=>{(async()=>{if(!t){l("Patient ID not provided in URL.");return}s(!0),l(null),a([]);try{try{const x=await se(`/api/patients/${t}`);if(x.ok){const b=await x.json();d(b.name)}}catch(x){console.warn("Could not fetch patient name:",x)}console.log(`Fetching pharmacy orders for patient ID: ${t}`);const p=await se(`/api/pharmacy-orders/patient/${t}`);if(!p.ok){const x=await p.json().catch(()=>({}));throw new Error(x.message||`HTTP error! status: ${p.status}`)}const g=await p.json();console.log("Fetched Pharmacy Orders:",g),a(g||[])}catch(p){console.error("Error fetching pharmacy orders:",p),l(`Failed to load pharmacy orders: ${p.message}`)}finally{s(!1)}})()},[t]),r.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(on,{size:16,className:"mr-1"}),"Back"]}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[r.jsx(ud,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",c&&`for ${c}`]}),r.jsx("div",{})," "]}),i&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:100,height:20})]}),r.jsx(Z,{width:200,height:20,className:"mb-2"}),r.jsx(Z,{width:180,height:20,className:"mb-3"}),r.jsx(Z,{width:120,height:24,className:"mb-2"}),r.jsxs("div",{className:"space-y-1 ml-4",children:[r.jsx(Z,{width:"80%",height:16}),r.jsx(Z,{width:"70%",height:16}),r.jsx(Z,{width:"60%",height:16})]})]},f))}),o&&r.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:o}),!i&&n.length===0&&!o&&r.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!i&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Date:"})," ",new Date(f.date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm font-medium capitalize",children:[r.jsx("strong",{children:"Status:"})," ",f.status]})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Prescribed By:"})," ",f.prescribedBy||"N/A"]}),f.dispensedBy&&r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Dispensed By:"})," ",f.dispensedBy]}),r.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),r.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:f.medications.map((p,g)=>r.jsxs("li",{children:[p.name," - Qty: ",p.quantity,p.tabletsPerDay&&` (${p.tabletsPerDay} per day`,p.numberOfDays&&` for ${p.numberOfDays} days)`,!p.tabletsPerDay&&p.numberOfDays&&` (for ${p.numberOfDays} days)`,p.tabletsPerDay&&!p.numberOfDays&&")"]},g))})]},f.id))})]})},cIe=()=>{const t=Lt(),e=$r(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState([]),[c,d]=v.useState(""),[f,p]=v.useState([]),[g,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState(null),[T,C]=v.useState(!0),[E,k]=v.useState(""),[O,I]=v.useState([]),[F,B]=v.useState(!1),[$,L]=v.useState(null),[V,H]=v.useState(!1),[ne,Q]=v.useState(!1),[q,G]=v.useState([]),[ie,W]=v.useState(!1),[z,ce]=v.useState(null),je=/^\+?[0-9\s\-().]{7,20}$/,Y=/^[a-zA-Z\s'-]{2,}$/,Ie=v.useCallback(async()=>{try{const te=await se("/api/drugs");if(!te.ok)throw new Error("Failed to fetch drugs");const oe=await te.json(),_e=oe.drugs||oe||[];s(_e)}catch(te){console.error("Failed to fetch available drugs:",te),x("Could not load drug list. "+te.message)}},[]),Ue=v.useCallback(async te=>{W(!0),ce(null);try{const oe=await se(`/api/pharmacy-orders/patient/${te}`);if(!oe.ok){const Oe=await oe.json().catch(()=>({}));throw new Error(Oe.message||`HTTP error! status: ${oe.status}`)}const _e=await oe.json();G(_e||[])}catch(oe){console.error("Failed to fetch previous pharmacy orders:",oe),ce(`Could not load previous orders: ${oe.message}`)}finally{W(!1)}},[]);v.useEffect(()=>{var te;Ie(),(te=e.state)!=null&&te.patient?Ce(e.state.patient):C(!0)},[Ie,e.state]),v.useEffect(()=>{n!=null&&n.id?Ue(n.id):G([])},[n,Ue]);const ze=v.useMemo(()=>new oo(i,{keys:["name","brand_name"],threshold:.3}),[i]);v.useEffect(()=>{if(!c){p([]);return}const te=ze.search(c).map(oe=>oe.item);p(te.slice(0,10))},[c,ze]);const Le=v.useMemo(()=>qc(async te=>{if(te.trim().length<2){I([]),B(!1),L(null);return}B(!0),L(null);try{const oe=new URLSearchParams({search:encodeURIComponent(te),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),_e=await se(`/api/patients?${oe.toString()}`);if(!_e.ok){const K=await _e.text();throw new Error(`API Error (${_e.status}): ${K||_e.statusText}`)}const Oe=await _e.json();I(Oe.patients)}catch(oe){console.error("Error searching patients:",oe),L(oe.message||"Failed to search patients."),I([])}finally{B(!1)}},300),[je]),be=te=>{const oe=te.target.value;k(oe),H(je.test(oe)),Q(Y.test(oe)&&!je.test(oe)),B(!0),Le(oe)},Ce=v.useCallback(te=>{a(te),C(!1),k(""),I([]),L(null)},[]),Ae=v.useCallback(async te=>{if(!E||te==="phone"&&!V||te==="name"&&!ne){L(`Invalid ${te} to create a new patient.`);return}B(!0),L(null);try{const _e=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:te==="name"?E:"direct pharmacy",phone:te==="phone"?E:null,age:null,gender:null,token:null})});if(!_e.ok){const K=await _e.json();throw new Error(K.message||`Failed to create patient: ${_e.statusText}`)}const Oe=await _e.json();alert(`New patient "${Oe.name}" created with ${te==="phone"?`phone ${Oe.phone}`:`name ${Oe.name}`}.`),Ce(Oe)}catch(oe){console.error("Error creating new patient:",oe),L(oe.message||"Failed to create new patient.")}finally{B(!1)}},[E,V,ne,Ce]),me=()=>{a(null),C(!0),l([]),x(null),G([])},ye=te=>{if(o.some(oe=>oe.drug_id===te.id)){const oe=te.name||te.brand_name||"This drug";x(`${oe} is already in the order.`),setTimeout(()=>x(null),3e3),d(""),p([]);return}l(oe=>[...oe,{drug_id:te.id,name:te.name||te.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,tabletsPerDay:1,numberOfDays:1,mrp:Number(te.mrp)||0,originalMrp:Number(te.mrp)||0,stock:te.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(te.mrp)||0)/(X(te.pack)||1),pack:te.pack}]),d(""),p([])},le=()=>{const te=c.trim();if(!te){x("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>x(null),3e3);return}t("/dashboard/inventory/add",{state:{initialDrugName:te}}),d(""),p([])},X=te=>{if(!te)return null;const oe=te.match(/(?:\d+x)?(\d+)/);return oe?parseInt(oe[1],10):null},ae=te=>{l(oe=>oe.filter(_e=>(_e.drug_id??_e.name)!==te))},de=(te,oe)=>{l(_e=>_e.map(Oe=>{if((Oe.drug_id??Oe.name)===te&&Oe.isLoose){const ge=X(Oe.pack),ue=Math.max(0,oe),fe=ue*(ge??1)+(Oe.looseUnits??0);return{...Oe,loosePacks:ue,looseQuantity:fe,pack_quantity:ue}}return Oe}))},ee=(te,oe)=>{l(_e=>_e.map(Oe=>{if((Oe.drug_id??Oe.name)===te&&Oe.isLoose){const ge=X(Oe.pack),ue=Math.max(0,oe),fe=(Oe.loosePacks??0)*(ge??1)+ue;return{...Oe,looseUnits:ue,looseQuantity:fe}}return Oe}))},Ne=te=>{const oe=[];te.medications.forEach(_e=>{if(o.find(K=>K.drug_id&&_e.drug_id&&K.drug_id===_e.drug_id||K.name.toLowerCase()===_e.name.toLowerCase()))l(K=>K.map(ge=>{if(ge.drug_id&&_e.drug_id&&ge.drug_id===_e.drug_id||ge.name.toLowerCase()===_e.name.toLowerCase()){const ue=(ge.pack_quantity??0)+(_e.pack_quantity??0),fe=(ge.loose_quantity??0)+(_e.loose_quantity??0),Ee=_e.tabletsPerDay??ge.tabletsPerDay,Ke=_e.numberOfDays??ge.numberOfDays,$e=X(ge.pack),We=ue*($e??1)+fe;return{...ge,pack_quantity:ue,loose_quantity:fe,directions_to_use:_e.directions_to_use??ge.directions_to_use,tabletsPerDay:Ee,numberOfDays:Ke,looseQuantity:We,loosePacks:Math.floor(We/($e??1)),looseUnits:We%($e??1)}}return ge}));else{let K=_e.drug_id,ge=_e.drug_id?i.find(ue=>ue.id===_e.drug_id):void 0;if(!K&&_e.name){const ue=i.find(fe=>fe.name&&fe.name.toLowerCase()===_e.name.toLowerCase());ue&&(K=ue.id,ge=ue)}oe.push({drug_id:K,name:_e.name,pack_quantity:_e.pack_quantity??0,loose_quantity:_e.loose_quantity??0,directions_to_use:_e.directions_to_use,tabletsPerDay:_e.tabletsPerDay??1,numberOfDays:_e.numberOfDays??1,mrp:ge?ge.mrp:_e.pack_price,originalMrp:ge?ge.mrp:_e.pack_price,stock:ge?ge.stock:_e.stock,isLoose:!0,loosePacks:0,looseUnits:(_e.pack_quantity??0)*(X((ge==null?void 0:ge.pack)||_e.pack)??1)+(_e.loose_quantity??0),looseQuantity:(_e.pack_quantity??0)*(X((ge==null?void 0:ge.pack)||_e.pack)??1)+(_e.loose_quantity??0),pricePerLooseUnit:(ge?Number(ge.mrp):Number(_e.pack_price)||0)/(X((ge==null?void 0:ge.pack)||_e.pack)||1),pack:(ge==null?void 0:ge.pack)||_e.pack})}}),l(_e=>[..._e,...oe]),te.prescriptionForUnavailableDrugs&&(!S||!S.includes(te.prescriptionForUnavailableDrugs))&&_(_e=>_e?`${_e}

-- From Order ${te.id.substring(0,8)} --
${te.prescriptionForUnavailableDrugs}`:te.prescriptionForUnavailableDrugs),x("Medications from previous order added to current order."),setTimeout(()=>x(null),3e3)},Te=async te=>{if(te.preventDefault(),x(null),j(!0),!n){x("No patient selected for the order."),j(!1);return}if(o.length===0&&!(S!=null&&S.trim())){x("Please add at least one medication or provide a prescription for unavailable drugs."),j(!1);return}const oe=o.filter(Oe=>{const K=Oe.looseQuantity??0;return K<=0||Oe.stock!==void 0&&K>Oe.stock});if(oe.length>0){x(`Invalid quantity or insufficient stock for: ${oe.map(Oe=>Oe.name).join(", ")}`),j(!1);return}const _e={patient_id:n.id,items:o.map(Oe=>{const K=Oe.mrp??0,ge=Oe.pricePerLooseUnit??0,ue=ge*(Oe.looseQuantity??0);return{drug_id:Oe.drug_id===void 0?null:Oe.drug_id,name:Oe.name,pack_quantity:Oe.loosePacks??0,loose_quantity:Oe.looseUnits??0,pack_price:K,loose_price:ge,total_price:ue,price:Oe.originalMrp??0,directions_to_use:Oe.directions_to_use===void 0?null:Oe.directions_to_use,tabletsPerDay:Oe.tabletsPerDay??1,numberOfDays:Oe.numberOfDays??1}}),order_total:Fe,prescription_for_unavailable_drugs:S};try{const Oe=await se("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)});if(!Oe.ok){const K=await Oe.json();throw new Error(K.message||`Failed to create order: ${Oe.statusText}`)}t(-1)}catch(Oe){console.error("Failed to create pharmacy order:",Oe),x(Oe.message||"Failed to create order. Please try again.")}finally{j(!1)}},Fe=v.useMemo(()=>o.reduce((te,oe)=>{const _e=oe.isLoose?oe.pricePerLooseUnit??0:oe.mrp??0,Oe=oe.isLoose?oe.looseQuantity??0:oe.quantity??0;return te+_e*Oe},0),[o]),xe=(Number(Fe)||0).toFixed(2);return r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",r.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[r.jsx(on,{size:20})," "]}),r.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),T&&r.jsxs("div",{className:"content-section",children:[" ",r.jsx("h3",{className:"section-title",children:"Select Patient"})," ",r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:E,onChange:be,className:"custom-text-input mt-1",autoFocus:!0})]}),$&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:$})," ",F?r.jsx("div",{className:"patient-search-results items-loading mt-1",children:[1,2,3].map(te=>r.jsx("div",{className:"px-4 py-3 border-b border-gray-100 last:border-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:120,height:20})]}),r.jsx("div",{className:"mt-1 sm:mt-0",children:r.jsx(Z,{width:150,height:16})})]})},te))}):O.length>0&&r.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",r.jsxs("ul",{children:[" ",O.map(te=>r.jsxs("li",{onClick:()=>Ce({id:te.id,name:te.name,token:te.token,age:te.age,gender:te.gender,phone:te.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",te.token]}),te.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[te.age?`${te.age} yrs`:"Age N/A",te.gender?` / ${te.gender}`:" / Gender N/A",te.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",te.phone]})]})]}),te.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",te.phone]})]},te.id))]})]}),E.length>=2&&!F&&O.length===0&&!$&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',E,'".']}),V&&r.jsx("button",{type:"button",onClick:()=>Ae("phone"),className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:F,children:'Create "direct pharmacy" Patient with this Phone'}),ne&&r.jsx("button",{type:"button",onClick:()=>Ae("name"),className:"create-patient-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-2",disabled:F,children:"Create Patient with this Name"})]}),E.length<2&&!F&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),n&&!T&&r.jsxs("form",{onSubmit:Te,children:[r.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:"section-title",children:[" ","Patient: ",r.jsx("span",{className:"font-normal",children:n.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:n.token??"N/A"}),n.age&&`    Age: ${n.age}`,n.gender&&`    Gender: ${n.gender}`,n.phone&&`    Phone: ${n.phone}`]}),r.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${n.id}`,children:["ID: ",n.id.substring(0,12),"..."]})]}),r.jsx("button",{type:"button",onClick:me,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),g&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:g})," ",ie?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:[1,2].map(te=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx(Z,{width:"90%",height:16}),r.jsx(Z,{width:"70%",height:16})]}),r.jsx(Z,{width:"100%",height:36,style:{borderRadius:"6px"}})]},te))})]}):z?r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:z}):q.length>0?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:q.map(te=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"font-semibold text-gray-800",children:["Order Date: ",new Date(te.date).toLocaleDateString()]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${te.status==="dispensed"?"bg-green-100 text-green-800":te.status==="pending"?"bg-yellow-100 text-yellow-800":te.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:te.status.charAt(0).toUpperCase()+te.status.slice(1)})]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-3",children:te.medications.map((oe,_e)=>r.jsxs("li",{children:[r.jsx("strong",{children:oe.name}),": ",oe.quantity," Qty",oe.directions_to_use&&` - Directions: ${oe.directions_to_use}`]},_e))}),te.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Prescription for Unavailable:"}),r.jsxs("div",{className:"prose prose-sm max-w-none",children:[" ",r.jsx(wf,{remarkPlugins:[Nf],children:te.prescriptionForUnavailableDrugs})]})]}),r.jsxs("button",{type:"button",onClick:()=>Ne(te),className:"add-previous-meds-button mt-3 px-3 py-1.5 text-sm font-medium rounded-md flex items-center justify-center",children:[r.jsx(Gn,{size:16,className:"mr-1"})," Add Medications to Current Order"]})]},te.id))})]}):n&&r.jsx("div",{className:"content-section text-center py-4 mt-4",children:r.jsx("p",{className:"text-gray-500",children:"No previous orders found for this patient."})}),r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:S??"",onChange:te=>_(te.target.value||null),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[" ",r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:c,onChange:te=>d(te.target.value),className:"custom-text-input mt-1"}),c&&r.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",f.length>0&&r.jsxs("ul",{children:[" ",f.map(te=>r.jsxs("li",{onClick:()=>ye(te),className:"cursor-pointer select-none relative",children:[r.jsx("span",{className:"font-medium block truncate",children:te.name||te.brand_name}),r.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",te.stock??"N/A",", MRP: ",Number(te.mrp||0).toFixed(2),")"]})]},te.id))]}),c.trim()&&!i.some(te=>te.name&&te.name.toLowerCase()===c.trim().toLowerCase()||te.brand_name&&te.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsxs("div",{onClick:le,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',c.trim(),'" as new item']}),c.trim()&&f.length===0&&i.some(te=>te.name&&te.name.toLowerCase()===c.trim().toLowerCase()||te.brand_name&&te.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",r.jsx("h4",{className:"section-title",children:"Order Items"})," ",o.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),o.length>0&&r.jsx("ul",{className:"space-y-4",children:o.map(te=>{const oe=te.drug_id??te.name,_e=!te.drug_id;return r.jsxs("li",{className:"order-item-card text-sm",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsxs("span",{className:`item-name block text-base ${_e?"custom":""}`,children:[" ",te.name,_e?" (custom)":""]}),!_e&&te.pricePerLooseUnit!==void 0&&r.jsxs("span",{className:"item-details text-xs",children:[" ","@ ",(Number(te.pricePerLooseUnit)||0).toFixed(2)," per loose unit"]}),te.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${te.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",te.stock,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-packs-${oe}`,className:"dosage-label",children:"Packs:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>de(oe,(te.loosePacks??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-packs-${oe}`,min:"0",value:te.loosePacks||"",onChange:Oe=>{const K=parseInt(Oe.target.value,10);de(oe,isNaN(K)?0:K)},onFocus:Oe=>Oe.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>de(oe,(te.loosePacks??0)+1),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-units-${oe}`,className:"dosage-label",children:"Loose:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>ee(oe,(te.looseUnits??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-units-${oe}`,min:"0",value:te.looseUnits||"",onChange:Oe=>{const K=parseInt(Oe.target.value,10);ee(oe,isNaN(K)?0:K)},onFocus:Oe=>Oe.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>ee(oe,(te.looseUnits??0)+1),className:"quantity-btn",children:"+"})]}),te.pack&&r.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",te.pack.split("x")[1]||te.pack," per pack)"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","",(Number((te.pricePerLooseUnit??0)*(te.looseQuantity??0))||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ae(oe),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:r.jsx(Vn,{size:18})})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2 mt-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`tablets-per-day-${oe}`,className:"dosage-label",children:"Per Day:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(Oe=>Oe.map(K=>K.drug_id===oe?{...K,tabletsPerDay:Math.max(1,(K.tabletsPerDay??1)-1)}:K)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`tablets-per-day-${oe}`,min:"1",value:te.tabletsPerDay??1,onChange:Oe=>{const K=parseInt(Oe.target.value,10);l(ge=>ge.map(ue=>ue.drug_id===oe?{...ue,tabletsPerDay:isNaN(K)?1:Math.max(1,K)}:ue))},onFocus:Oe=>Oe.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(Oe=>Oe.map(K=>K.drug_id===oe?{...K,tabletsPerDay:(K.tabletsPerDay??1)+1}:K)),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`number-of-days-${oe}`,className:"dosage-label",children:"No. Days:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(Oe=>Oe.map(K=>K.drug_id===oe?{...K,numberOfDays:Math.max(1,(K.numberOfDays??1)-1)}:K)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`number-of-days-${oe}`,min:"1",value:te.numberOfDays??1,onChange:Oe=>{const K=parseInt(Oe.target.value,10);l(ge=>ge.map(ue=>ue.drug_id===oe?{...ue,numberOfDays:isNaN(K)?1:Math.max(1,K)}:ue))},onFocus:Oe=>Oe.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(Oe=>Oe.map(K=>K.drug_id===oe?{...K,numberOfDays:(K.numberOfDays??1)+1}:K)),className:"quantity-btn",children:"+"})]})]})]}),r.jsx("div",{className:"flex items-center mt-2",children:te.pack&&X(te.pack)&&r.jsx("span",{className:"ml-4 text-sm text-gray-400",children:(()=>{const Oe=X(te.pack),K=te.looseQuantity??0;if(Oe&&Oe>0){const ge=Math.floor(K/Oe),ue=K%Oe;return`(Subtract: ${ge} packs, ${ue} loose)`}return""})()})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${oe}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${oe}`,placeholder:"e.g., 'After food', 'Twice a day'",value:te.directions_to_use??"",onChange:Oe=>{const K=Oe.target.value;l(ge=>ge.map(ue=>(ue.drug_id??ue.name)===oe?{...ue,directions_to_use:K}:ue))},className:"dosage-input text-sm w-full mt-1"})]})]},oe)})})]}),o.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ",xe]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:b||o.length===0&&!(S!=null&&S.trim()),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${b||o.length===0&&!(S!=null&&S.trim())?"":"hover:opacity-90"}`,children:b?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},jG=()=>{const{orderId:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(null),[o,l]=v.useState([]),[c,d]=v.useState([]),[f,p]=v.useState(""),[g,x]=v.useState([]),[b,j]=v.useState(null),[S,_]=v.useState(!1),[T,C]=v.useState(null),[E,k]=v.useState(!0);Yc();const O=v.useCallback(async()=>{k(!0);try{const q=await se(`/api/pharmacy-orders/${t}`);if(!q.ok)throw new Error("Failed to fetch order details");const G=await q.json();a(G),s({id:G.patientId,name:G.patientName||"N/A",token:G.patientTokenNumber}),C(G.prescriptionForUnavailableDrugs);const ie=G.medications.map(W=>{const z=B(W.pack),ce=W.pack_quantity*(z??1)+W.loose_quantity;return{...W,isLoose:!0,loosePacks:W.pack_quantity,looseUnits:W.loose_quantity,looseQuantity:ce,pack_price:W.pack_price,loose_price:W.loose_price,total_price:W.total_price,pricePerLooseUnit:W.loose_price,originalPrice:W.pack_price,box_number:W.box_number,pack:W.pack,batch:W.batch,expiry_date:W.expiry_date,discount_percentage:W.discount_percentage}});d(ie)}catch(q){j("Could not load order details. "+q.message)}finally{k(!1)}},[t]),I=v.useCallback(async()=>{try{const q=await se("/api/drugs");if(!q.ok)throw new Error("Failed to fetch drugs");const G=await q.json(),ie=G.drugs||G||[];l(ie)}catch(q){j("Could not load drug list. "+q.message)}},[]);v.useEffect(()=>{O(),I()},[O,I]);const F=v.useMemo(()=>new oo(o,{keys:["name","brand_name"],threshold:.3}),[o]);v.useEffect(()=>{if(!f){x([]);return}const q=F.search(f).map(G=>G.item);x(q.slice(0,10))},[f,F]);const B=q=>{if(!q)return null;const G=q.match(/(?:\d+x)?(\d+)/);return G?parseInt(G[1],10):null},$=q=>{if(c.some(G=>G.drug_id===q.id)){j(`${q.name||q.brand_name} is already in the order.`),setTimeout(()=>j(null),3e3),p(""),x([]);return}d(G=>[...G,{drug_id:q.id,name:q.name||q.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,pack_price:Number(q.mrp)||0,loose_price:(Number(q.mrp)||0)/(B(q.pack)||1),total_price:(Number(q.mrp)||0)/(B(q.pack)||1),discount_percentage:0,directions_to_use:"",tabletsPerDay:1,numberOfDays:1,stock:q.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(q.mrp)||0)/(B(q.pack)||1),originalPrice:Number(q.mrp)||0,pack:q.pack}]),p(""),x([])},L=q=>{d(G=>G.filter(ie=>(ie.drug_id??ie.name)!==q))},V=(q,G)=>{d(ie=>ie.map(W=>{if((W.drug_id??W.name)===q&&W.isLoose){const z=B(W.pack),ce=Math.max(0,G),je=ce*(z??1)+(W.looseUnits??0);return{...W,loosePacks:ce,looseQuantity:je,pack_quantity:ce}}return W}))},H=(q,G)=>{d(ie=>ie.map(W=>{if((W.drug_id??W.name)===q&&W.isLoose){const z=B(W.pack),ce=Math.max(0,G),je=(W.loosePacks??0)*(z??1)+ce;return{...W,looseUnits:ce,looseQuantity:je,loose_quantity:ce}}return W}))},ne=async q=>{if(q.preventDefault(),j(null),_(!0),c.length===0&&!(T!=null&&T.trim())){j("Please add at least one medication or provide a prescription."),_(!1);return}const G=c.filter(W=>{const z=W.looseQuantity??0;return z<=0||W.stock!==void 0&&z>W.stock});if(G.length>0){j(`Invalid quantity or insufficient stock for: ${G.map(W=>W.name).join(", ")}`),_(!1);return}const ie={items:c.map(W=>({drug_id:W.drug_id??null,name:W.name,pack_quantity:W.loosePacks??0,loose_quantity:W.looseUnits??0,pack_price:W.pack_price??0,loose_price:W.loose_price??0,total_price:(W.loose_price??0)*(W.looseQuantity??0),discount_percentage:W.discount_percentage??0,directions_to_use:W.directions_to_use??null,tabletsPerDay:W.tabletsPerDay??1,numberOfDays:W.numberOfDays??1})),prescription_for_unavailable_drugs:T,order_total:Q};try{const W=await se(`/api/pharmacy-orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!W.ok){const z=await W.json();throw new Error(z.message||"Failed to update order")}e(-1)}catch(W){j(W.message||"Failed to update order. Please try again.")}finally{_(!1)}},Q=v.useMemo(()=>c.reduce((q,G)=>{const ie=G.loose_price??0,W=G.looseQuantity??0;return q+ie*W},0),[c]);return E?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsx(Z,{width:300,height:32})]}),r.jsx("div",{className:"header-right",children:r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}})})]}),r.jsx("div",{className:"order-meta",style:{display:"flex",gap:"1rem",margin:"1rem 0"},children:r.jsx(Z,{width:200,height:24})}),r.jsxs("div",{className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(Z,{width:200,height:24})}),r.jsx("div",{style:{padding:"1.5rem"},children:r.jsx(Z,{height:42})})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(Z,{width:250,height:24})}),r.jsxs("div",{className:"table-container",style:{padding:"0 1rem 1rem"},children:[r.jsxs("div",{className:"table-header-row",style:{display:"flex",gap:"1rem",padding:"1rem"},children:[r.jsx(Z,{width:"30%",height:20}),r.jsx(Z,{width:"20%",height:20}),r.jsx(Z,{width:"20%",height:20}),r.jsx(Z,{width:"15%",height:20}),r.jsx(Z,{width:"5%",height:20})]}),r.jsx("div",{className:"table-body",children:[1,2,3].map(q=>r.jsxs("div",{className:"table-row",style:{display:"flex",gap:"1rem",padding:"1rem",borderBottom:"1px solid #eee"},children:[r.jsxs("div",{style:{width:"30%"},children:[r.jsx(Z,{width:"80%",height:20,className:"mb-2"}),r.jsx(Z,{width:"40%",height:14})]}),r.jsx(Z,{width:"20%",height:36}),r.jsx(Z,{width:"20%",height:36}),r.jsx(Z,{width:"15%",height:20,style:{alignSelf:"center"}}),r.jsx(Z,{width:"5%",height:24,style:{alignSelf:"center"}})]},q))})]})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx(Z,{width:180,height:24})}),r.jsx("div",{style:{padding:"1rem"},children:r.jsx(Z,{height:80})})]}),r.jsx("div",{style:{marginTop:"20px"},children:r.jsx(Z,{height:48,width:"100%"})})]})]})]}):n?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:r.jsx(on,{size:20})}),r.jsxs("h2",{className:"page-title",children:["EDIT ORDER ",r.jsxs("span",{className:"text-gray-500 text-lg font-normal ml-2",children:[i==null?void 0:i.name," #",n.id.substring(0,4)]})]})]}),r.jsx("div",{className:"header-right",children:r.jsx("span",{className:"status-badge",children:n.status.toUpperCase()})})]}),r.jsx("div",{className:"order-meta",children:r.jsxs("span",{className:"order-date",children:[" Order Date: ",new Date(n.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})}),r.jsxs("form",{onSubmit:ne,className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{children:" Find & Add Medication"})}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by name or brand...",value:f,onChange:q=>p(q.target.value),className:"search-input"}),f&&r.jsx("div",{className:"dropdown-results",children:g.length>0?r.jsx("ul",{children:g.map(q=>r.jsxs("li",{onClick:()=>$(q),className:"dropdown-item",children:[r.jsx("span",{className:"drug-name",children:q.name||q.brand_name}),r.jsxs("span",{className:"drug-meta",children:["(Stock: ",q.stock??"N/A",", MRP: ",Number(q.mrp||0).toFixed(2),")"]})]},q.id))}):r.jsxs("div",{className:"p-3 text-gray-500 text-sm",children:['No drugs found matching "',f,'"']})})]})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{children:[" Medications in Order ",r.jsxs("span",{className:"item-count",children:[c.length," items"]})]})}),c.length>0?r.jsxs("div",{className:"table-container",children:[r.jsxs("div",{className:"table-header-row",children:[r.jsx("div",{className:"col-medication",children:"MEDICATION"}),r.jsx("div",{className:"col-directions",children:"DIRECTIONS"}),r.jsx("div",{className:"col-quantity",children:"QUANTITY"}),r.jsx("div",{className:"col-subtotal",children:"SUBTOTAL"}),r.jsx("div",{className:"col-action"})]}),r.jsx("div",{className:"table-body",children:c.map(q=>{const G=q.drug_id??q.name;return r.jsxs("div",{className:"table-row",children:[r.jsxs("div",{className:"col-medication",children:[r.jsx("span",{className:"med-name",children:q.name}),q.pack&&r.jsx("span",{className:"med-unit text-xs text-gray-500 block",children:q.pack}),r.jsxs("div",{className:"stock-info",children:[" Stock: ",r.jsxs("span",{className:"stock-value",children:[" ",q.stock!==void 0?q.pack?`BOX OF ${B(q.pack)}`:q.stock:"N/A"]})]})]}),r.jsx("div",{className:"col-directions",children:r.jsx("input",{type:"text",placeholder:"1 tablet twice daily...",value:q.directions_to_use??"",onChange:ie=>{const W=ie.target.value;d(z=>z.map(ce=>(ce.drug_id??ce.name)===G?{...ce,directions_to_use:W}:ce))},className:"directions-input"})}),r.jsx("div",{className:"col-quantity",children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"PACKS"}),r.jsx("input",{type:"number",min:"0",value:q.loosePacks||"",onChange:ie=>V(G,ie.target.value===""?0:parseInt(ie.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"LOOSE"}),r.jsx("input",{type:"number",min:"0",value:q.looseUnits||"",onChange:ie=>H(G,ie.target.value===""?0:parseInt(ie.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]})]})}),r.jsxs("div",{className:"col-subtotal",children:["",(Number((q.pricePerLooseUnit??0)*(q.looseQuantity??0))||0).toFixed(2)]}),r.jsx("div",{className:"col-action",children:r.jsx("button",{type:"button",onClick:()=>L(G),className:"delete-btn",title:"Remove Item",children:r.jsx(Vn,{size:18,strokeWidth:2.5})})})]},G)})})]}):r.jsx("div",{className:"empty-state",children:"No medications added. Search above to add."})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx("h3",{children:" Prescription Notes"})}),r.jsx("textarea",{rows:3,value:T??"",onChange:q=>C(q.target.value||null),placeholder:"Add notes about unavailable drugs...",className:"notes-input"})]}),r.jsxs("button",{type:"submit",disabled:S,className:"confirm-btn",style:{width:"100%",margin:"20px 0 0 0"},children:[r.jsx("span",{className:"check-icon",children:""})," ",S?"Updating...":"Confirm Changes"]}),b&&r.jsx("div",{className:"error-alert mt-4",children:b})]})]})]}):r.jsx("div",{className:"p-6 text-red-500 flex justify-center items-center h-screen",children:"Order not found or failed to load."})},uIe=(t,e,n,a="non-black")=>{if(isNaN(t)||isNaN(e)||t<=0||e<=0)return null;let i;return n==="female"?t<=.7?i=141*Math.pow(t/.7,-.329)*Math.pow(.993,e):i=141*Math.pow(t/.7,-1.209)*Math.pow(.993,e):t<=.9?i=141*Math.pow(t/.9,-.411)*Math.pow(.993,e):i=141*Math.pow(t/.9,-1.209)*Math.pow(.993,e),a==="black"&&(i*=1.018),parseFloat(i.toFixed(2))},dIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0||n>=400)return null;const a=t-e-n/5;return parseFloat(a.toFixed(2))},hIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},fIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},pIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=t-(e+n);return parseFloat(a.toFixed(2))},mIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const a=2*t+e/18+n/2.8;return parseFloat(a.toFixed(2))},gIe=t=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(t),OB=()=>{var me,ye;const{orderId:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!0),[c,d]=v.useState(!1),[f,p]=v.useState(null),[g,x]=v.useState(null),[b,j]=v.useState(null),[S,_]=v.useState({}),[T,C]=v.useState(null),[E,k]=v.useState(!1),[O,I]=v.useState(""),[F,B]=v.useState(!1),[$,L]=v.useState(""),[V,H]=v.useState(""),[ne,Q]=v.useState(!1),[q,G]=v.useState(""),ie=v.useCallback(async le=>{var X;try{const ae=await se(`/api/patients/${le}`);if(!ae.ok)throw new Error(`Failed to fetch patient details: ${ae.status}`);const de=await ae.json();x(de.age),j(((X=de.sex)==null?void 0:X.toLowerCase())==="female"?"female":"male"),de.phone&&a(ee=>ee?{...ee,Patient:{...ee.Patient,phone:de.phone}}:null)}catch(ae){console.error("Error fetching patient details:",ae),x(null),j(null)}},[]),W=v.useCallback(async()=>{if(t){l(!0),p(null);try{const le=await se(`/api/lab/${t}`);if(!le.ok){const de=await le.json().catch(()=>({message:`HTTP error! status: ${le.status}`}));throw new Error(de.message||`HTTP error! status: ${le.status}`)}const X=await le.json();if(a(X),X.createdAt)try{const de=new Date(X.createdAt),ee=new Date(de.getTime()-de.getTimezoneOffset()*6e4).toISOString().slice(0,16);I(ee)}catch(de){console.error("Error formatting date for edit:",de)}if(X.report_date)try{const de=new Date(X.report_date),ee=new Date(de.getTime()-de.getTimezoneOffset()*6e4).toISOString().slice(0,16);L(ee)}catch(de){console.error("Error formatting report date for edit:",de)}else{const de=new Date,ee=new Date(de.getTime()-de.getTimezoneOffset()*6e4).toISOString().slice(0,16);L(ee)}X.referral_doctor&&G(X.referral_doctor),X.patient_id&&ie(X.patient_id);const ae={};if(X.tests&&X.tests.forEach(de=>{ae[de.id]={},de.default_parameters&&de.default_parameters.length>0?de.default_parameters.forEach(ee=>{ae[de.id][ee.name]=ee.defaultValue}):ae[de.id].report_content=""}),X.report_content)try{const de=JSON.parse(X.report_content);typeof de=="object"&&de!==null&&!Array.isArray(de)?s(de):(console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),s(ae))}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),s(ae)}else s({})}catch(le){console.error("Failed to fetch lab order details:",le),p(le instanceof Error?le.message:"An unknown error occurred while fetching order details.")}finally{l(!1)}}},[t,ie]);v.useEffect(()=>{t?W():(p("No Order ID provided in the URL."),l(!1))},[t,W]),v.useEffect(()=>{(async()=>{try{const X=await se("/api/clinics/settings");if(X.ok){const ae=await X.json();H(ae.labLetterheadUrl||"")}}catch(X){console.error("Error fetching clinic settings:",X)}})()},[]);const z=(le,X,ae)=>{s(de=>{var We,it,wt,we,Xe,Je,ct,Ct,bt,ke,ot,Tt,Ve,jt,kt,Yn,vt,Ot,Vt;const ee={...de,[le]:{...de[le],[X]:ae}},Ne=parseFloat((We=ee[le])==null?void 0:We.Creatinine),Te=g,Fe=b;if(X==="Creatinine"&&!isNaN(Ne)&&Te!==null&&Fe!==null){const ln=uIe(Ne,Te,Fe);ln!==null&&((it=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&it.default_parameters.find(Tn=>Tn.name==="eGFR"))&&(ee[le].eGFR=ln)}const xe=parseFloat((wt=ee[le])==null?void 0:wt["Total Cholesterol"]),te=parseFloat((we=ee[le])==null?void 0:we["HDL Cholesterol"]),oe=parseFloat((Xe=ee[le])==null?void 0:Xe.Triglycerides);if((X==="Total Cholesterol"||X==="HDL Cholesterol"||X==="Triglycerides")&&!isNaN(xe)&&!isNaN(te)&&!isNaN(oe)){const ln=dIe(xe,te,oe);ln!==null&&((Je=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&Je.default_parameters.find(Tn=>Tn.name==="LDL Cholesterol"))&&(ee[le]["LDL Cholesterol"]=ln)}const _e=parseFloat((ct=ee[le])==null?void 0:ct["Total Bilirubin"]),Oe=parseFloat((Ct=ee[le])==null?void 0:Ct["Direct Bilirubin"]);if((X==="Total Bilirubin"||X==="Direct Bilirubin")&&!isNaN(_e)&&!isNaN(Oe)){const ln=hIe(_e,Oe);ln!==null&&((bt=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&bt.default_parameters.find(Tn=>Tn.name==="Indirect Bilirubin"))&&(ee[le]["Indirect Bilirubin"]=ln)}const K=parseFloat((ke=ee[le])==null?void 0:ke["Total Protein"]),ge=parseFloat((ot=ee[le])==null?void 0:ot.Albumin);if((X==="Total Protein"||X==="Albumin")&&!isNaN(K)&&!isNaN(ge)){const ln=fIe(K,ge);ln!==null&&((Tt=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&Tt.default_parameters.find(Tn=>Tn.name==="Globulin"))&&(ee[le].Globulin=ln)}const ue=parseFloat((Ve=ee[le])==null?void 0:Ve.Sodium),fe=parseFloat((jt=ee[le])==null?void 0:jt.Chloride),Ee=parseFloat((kt=ee[le])==null?void 0:kt.Bicarbonate);if((X==="Sodium"||X==="Chloride"||X==="Bicarbonate")&&!isNaN(ue)&&!isNaN(fe)&&!isNaN(Ee)){const ln=pIe(ue,fe,Ee);ln!==null&&((Yn=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&Yn.default_parameters.find(Tn=>Tn.name==="Anion Gap"))&&(ee[le]["Anion Gap"]=ln)}const Ke=parseFloat((vt=ee[le])==null?void 0:vt.Glucose),$e=parseFloat((Ot=ee[le])==null?void 0:Ot.BUN);if((X==="Sodium"||X==="Glucose"||X==="BUN")&&!isNaN(ue)&&!isNaN(Ke)&&!isNaN($e)){const ln=mIe(ue,Ke,$e);ln!==null&&((Vt=n==null?void 0:n.tests.find(Tn=>Tn.id===le))!=null&&Vt.default_parameters.find(Tn=>Tn.name==="Osmolality"))&&(ee[le].Osmolality=ln)}return ee})},ce=async le=>{const X=i[le]||{},ae=n==null?void 0:n.tests.find(Te=>Te.id===le);if(!ae)return;const de={};ae.default_parameters&&ae.default_parameters.forEach(Te=>{de[Te.name]=Te.defaultValue});const ee={...de,...X},Ne={...i,[le]:ee};s(Ne),d(!0),p(null);try{const Te=await se(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(Ne),isPartial:!0})});if(!Te.ok)throw new Error(`Save failed: ${Te.status}`)}catch(Te){console.error("Error saving test report:",Te),alert("Failed to save test report.")}finally{d(!1)}},je=async(le=null)=>{if(!n||!n.tests||!t){alert("Order details not loaded.");return}d(!0),p(null);try{let X;if(le===null){const de={};n.tests.forEach(ee=>{const Ne=i[ee.id]||{},Te={};ee.default_parameters&&ee.default_parameters.forEach(Fe=>{Fe.defaultValue!==void 0&&Fe.defaultValue!==null&&(Te[Fe.name]=Fe.defaultValue)}),de[ee.id]={...Te,...Ne},(!ee.default_parameters||ee.default_parameters.length===0)&&!de[ee.id].report_content&&(de[ee.id].report_content="")}),X=de,s(de)}else{const de=i[le]||{},ee=n.tests.find(Fe=>Fe.id===le);if(!ee){d(!1);return}const Ne={};ee.default_parameters&&ee.default_parameters.forEach(Fe=>{Ne[Fe.name]=Fe.defaultValue});const Te={...Ne,...de};X={...i,[le]:Te},s(X)}const ae=await se(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(X),isPartial:le!==null})});if(!ae.ok)throw new Error(`Save failed: ${ae.status}`);C(le),setTimeout(()=>{window.print()},100)}catch(X){console.error("Error saving before print:",X),alert("Failed to save report before printing.")}finally{d(!1)}},Y=()=>{n&&MM(n)},Ie=async()=>{if(!n||!n.tests){alert("Order details not loaded.");return}if(!t){alert("Cannot submit report without an Order ID.");return}const le={};if(n.tests.forEach(X=>{const ae=i[X.id]||{},de={};X.default_parameters&&X.default_parameters.forEach(ee=>{ee.defaultValue!==void 0&&ee.defaultValue!==null&&(de[ee.name]=ee.defaultValue)}),le[X.id]={...de,...ae},(!X.default_parameters||X.default_parameters.length===0)&&!le[X.id].report_content&&(le[X.id].report_content="")}),Object.keys(le).length===0){alert("Report content cannot be empty.");return}s(le),d(!0),p(null);try{const X=await se(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(le)})});if(!X.ok){const ae=await X.json().catch(()=>({message:`Submission failed: ${X.status}`}));throw new Error(ae.message||`Submission failed: ${X.status}`)}e(-1)}catch(X){console.error("Error submitting report:",X),p(X instanceof Error?X.message:"An unknown error occurred during submission.")}finally{d(!1)}},Ue=async()=>{if(!(!t||!O))try{const le=await se(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:new Date(O).toISOString()})});if(!le.ok)throw new Error("Failed to update date");const X=await le.json();X.order&&a(ae=>ae?{...ae,createdAt:X.order.createdAt}:null),k(!1)}catch(le){console.error("Failed to update date:",le),alert("Failed to update date")}},ze=async()=>{if(!(!t||!$))try{const le=await se(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportDate:new Date($).toISOString()})});if(!le.ok)throw new Error("Failed to update report date");const X=await le.json();X.order&&a(ae=>ae?{...ae,report_date:X.order.report_date}:null),B(!1)}catch(le){console.error("Failed to update report date:",le),alert("Failed to update report date")}},Le=async()=>{if(t)try{const le=await se(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralDoctor:q})});if(!le.ok)throw new Error("Failed to update referral doctor");const X=await le.json();X.order&&(G(X.order.referral_doctor||""),a(ae=>ae?{...ae,referral_doctor:X.order.referral_doctor}:null)),Q(!1)}catch(le){console.error("Failed to update referral doctor:",le),alert("Failed to update referral doctor")}};if(o)return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem"},children:[r.jsx(Z,{width:200,height:28}),r.jsxs("div",{className:"header-actions",style:{display:"flex",gap:"8px"},children:[r.jsx(Z,{width:80,height:32}),r.jsx(Z,{width:80,height:32}),r.jsx(Z,{width:80,height:32})]})]}),r.jsxs("div",{className:"lab-inventory-card no-print summary-card",style:{margin:"1rem",padding:"0"},children:[r.jsx("div",{className:"lab-inventory-header summary-header",style:{padding:"0.75rem 1rem",borderBottom:"1px solid #eee"},children:r.jsx(Z,{width:120,height:20})}),r.jsxs("div",{className:"summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem"},children:[r.jsx(Z,{height:24}),r.jsx(Z,{height:24}),r.jsx(Z,{height:24}),r.jsx(Z,{height:24})]})]}),r.jsx("div",{className:"lab-tests-container no-print",style:{padding:"1rem"},children:[1,2].map(le=>r.jsxs("div",{className:"test-card",style:{marginBottom:"1.5rem",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"white"},children:[r.jsxs("div",{className:"test-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsx(Z,{width:250,height:24}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsx(Z,{width:70,height:30}),r.jsx(Z,{width:36,height:30})]})]}),r.jsx("div",{className:"parameter-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(X=>r.jsxs("div",{className:"parameter-item",children:[r.jsx(Z,{width:"30%",height:16,style:{marginBottom:"0.5rem"}}),r.jsx(Z,{height:40})]},X))})]},le))})]})});if(f&&!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[r.jsx(ea,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),r.jsx("p",{className:"error-text",children:f}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:r.jsx(on,{size:16})})]})});if(!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Al,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${t}.`}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:r.jsx(on,{size:16})})]})});const be=(me=n==null?void 0:n.Patient)==null?void 0:me.name,Ce=(ye=n==null?void 0:n.Patient)==null?void 0:ye.patient_token_number;return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",children:[r.jsx("h2",{children:"Enter Lab Report"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:r.jsx(on,{size:16})}),r.jsxs("button",{onClick:()=>je(null),className:"lab-inventory-button compact-btn",title:"Print Full Report",children:[r.jsx(vf,{size:16}),r.jsx("span",{className:"btn-text",children:"Print"})]}),r.jsxs("button",{onClick:Y,className:"lab-inventory-button whatsapp-btn compact-btn",title:"Share via WhatsApp",children:[r.jsx(Kz,{size:16}),r.jsx("span",{className:"btn-text",children:"Share"})]})]})]}),n&&r.jsxs("div",{className:"lab-inventory-card no-print summary-card",children:[r.jsxs("h3",{className:"lab-inventory-header summary-header",children:[r.jsx(Al,{size:14})," Summary"]}),r.jsxs("div",{className:"summary-grid",children:[r.jsxs("div",{className:"summary-item",children:[r.jsx(Jn,{size:13,className:"icon"}),r.jsx("strong",{children:"Patient:"})," ",be??"N/A"," (",Ce??"N/A",")"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(wI,{size:13,className:"icon"}),r.jsx("strong",{children:"Ordered:"})," ",E?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:O,onChange:le=>I(le.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Ue,className:"icon-btn save",children:r.jsx(Lo,{size:12})}),r.jsx("button",{onClick:()=>k(!1),className:"icon-btn cancel",children:r.jsx($t,{size:12})})]}):r.jsxs(r.Fragment,{children:[mf(new Date(n.createdAt),"dd MMM, HH:mm"),r.jsx("button",{onClick:()=>k(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(ro,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(wI,{size:13,className:"icon"}),r.jsx("strong",{children:"Reported:"})," ",F?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:$,onChange:le=>L(le.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:ze,className:"icon-btn save",children:r.jsx(Lo,{size:12})}),r.jsx("button",{onClick:()=>B(!1),className:"icon-btn cancel",children:r.jsx($t,{size:12})})]}):r.jsxs(r.Fragment,{children:[n.report_date?mf(new Date(n.report_date),"dd MMM, HH:mm"):"Not Set",r.jsx("button",{onClick:()=>B(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(ro,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(Jn,{size:13,className:"icon"}),r.jsx("strong",{children:"Ref. Doctor:"})," ",ne?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"text",value:q,onChange:le=>G(le.target.value),className:"lab-inventory-input date-input",placeholder:"Enter referral doctor name"}),r.jsx("button",{onClick:Le,className:"icon-btn save",children:r.jsx(Lo,{size:12})}),r.jsx("button",{onClick:()=>Q(!1),className:"icon-btn cancel",children:r.jsx($t,{size:12})})]}):r.jsxs(r.Fragment,{children:[q||"Not Set",r.jsx("button",{onClick:()=>Q(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(ro,{size:11})})]})]})]})]}),r.jsxs("div",{className:"lab-tests-container no-print",children:[n==null?void 0:n.tests.map(le=>{var X;return r.jsxs("div",{className:"test-card",children:[r.jsxs("div",{className:"test-header",children:[r.jsx("h4",{children:le.name}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsxs("button",{type:"button",onClick:ae=>{ae.stopPropagation(),ce(le.id)},className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:[r.jsx(cs,{size:14}),r.jsx("span",{className:"btn-text",children:"Save"})]}),r.jsx("button",{type:"button",onClick:ae=>{ae.stopPropagation(),je(le.id)},className:"lab-inventory-button compact-btn",title:"Print",children:r.jsx(vf,{size:14})})]})]}),r.jsx("div",{className:"test-parameters-body",children:le.default_parameters&&le.default_parameters.length>0?r.jsx("div",{className:"parameter-grid",children:le.default_parameters.map(ae=>{var xe,te;const de=(xe=i[le.id])==null?void 0:xe[ae.name],ee=de!==void 0?de:ae.defaultValue??"",Ne=ae.type==="number"&&ee!==""&&(ae.lower_limit!=null&&parseFloat(String(ee))<ae.lower_limit||ae.upper_limit!=null&&parseFloat(String(ee))>ae.upper_limit),Te=gIe(ae.name),Fe=(te=S[le.id])==null?void 0:te[ae.name];return r.jsxs("div",{className:"parameter-item",children:[r.jsxs("label",{className:"parameter-label",htmlFor:`${le.id}-${ae.name}`,children:[ae.name," ",ae.unit&&r.jsxs("span",{className:"parameter-unit",children:["(",ae.unit,")"]})]}),r.jsxs("div",{className:"input-wrapper",children:[ae.type==="boolean"?r.jsxs("select",{id:`${le.id}-${ae.name}`,value:(ee==null?void 0:ee.toString())??"false",onChange:oe=>z(le.id,ae.name,oe.target.value==="true"),className:"lab-inventory-input parameter-input",disabled:c,children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-Reactive"})]}):r.jsx("input",{id:`${le.id}-${ae.name}`,type:ae.type==="number"?"number":"text",value:ee,onChange:oe=>z(le.id,ae.name,oe.target.value),className:`lab-inventory-input parameter-input ${Ne?"abnormal-result":""} ${Te?"calculated-input":""}`,disabled:c||Te&&!Fe,placeholder:ae.lower_limit!=null&&ae.upper_limit!=null?`${ae.lower_limit}-${ae.upper_limit}`:""}),Te&&r.jsx("button",{type:"button",onClick:()=>_(oe=>({...oe,[le.id]:{...oe[le.id]||{},[ae.name]:!Fe}})),className:"edit-calculated-btn",title:Fe?"Lock":"Edit",children:r.jsx(ro,{size:11})})]})]},ae.name)})}):r.jsxs("div",{className:"parameter-item",style:{width:"100%"},children:[r.jsx("label",{className:"parameter-label",htmlFor:`${le.id}-report_content`,children:"Results / Observations"}),r.jsx("textarea",{id:`${le.id}-report_content`,value:((X=i[le.id])==null?void 0:X.report_content)??"",onChange:ae=>z(le.id,"report_content",ae.target.value),className:"lab-inventory-input parameter-textarea",rows:3,placeholder:`Enter results for ${le.name}...`,disabled:c})]})})]},le.id)}),f&&r.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[r.jsx(ea,{size:15,className:"inline mr-1"}),f]})]}),r.jsx("div",{className:"form-actions-footer no-print",children:r.jsx("button",{type:"button",onClick:Ie,disabled:c,className:"lab-inventory-button lab-inventory-button-primary submit-btn",children:c?r.jsxs(r.Fragment,{children:[r.jsx(Ic,{className:"animate-spin",size:16})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(cs,{size:16})," Save All"]})})}),r.jsxs("div",{className:"printable-only",children:[V&&r.jsx("div",{className:"print-letterhead-container",children:r.jsx("img",{src:V,alt:"Lab Letterhead",className:"print-letterhead-image"})}),n&&n.Patient&&r.jsxs("div",{style:{marginBottom:"20px",borderBottom:"1px solid #ccc",paddingBottom:"10px"},children:[r.jsx("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Lab Report"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"12px"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Patient Name:"})," ",n.Patient.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age/Sex:"})," ",g??"N/A"," / ",b??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. Doctor:"})," ",q||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",mf(new Date(n.createdAt),"PPpp")]})]})]}),n==null?void 0:n.tests.filter(le=>T===null||le.id===T).map(le=>{var X;return r.jsxs("div",{style:{marginBottom:"20px",pageBreakInside:"avoid"},children:[r.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"5px"},children:le.name}),le.default_parameters&&le.default_parameters.length>0?r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"#f9f9f9"},children:[r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Parameter"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Result"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Units"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Normal Range"})]})}),r.jsx("tbody",{children:le.default_parameters.map(ae=>{var xe;const de=(xe=i[le.id])==null?void 0:xe[ae.name],ee=typeof de=="string"?parseFloat(de):typeof de=="number"?de:NaN,Ne=ae.type==="number"&&!isNaN(ee)&&de!==""&&(ae.lower_limit!=null&&ee<ae.lower_limit||ae.upper_limit!=null&&ee>ae.upper_limit),Te=ae.type==="boolean"&&(de===!0||de==="true"),Fe=ae.type==="boolean"?de===!0||de==="true"?"Reactive":"Non-Reactive":de??"";return r.jsxs("tr",{children:[r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ae.name}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee",fontWeight:Ne||Te?"bold":"normal",color:Ne?"red":Te?"green":"inherit"},children:Fe}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ae.unit??""}),r.jsxs("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:[ae.lower_limit!==null&&ae.lower_limit!==void 0&&`> ${ae.lower_limit}`,ae.lower_limit!==null&&ae.lower_limit!==void 0&&ae.upper_limit!==null&&ae.upper_limit!==void 0&&" - ",ae.upper_limit!==null&&ae.upper_limit!==void 0&&`< ${ae.upper_limit}`]})]},ae.name)})})]}):r.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"12px",padding:"10px"},children:((X=i[le.id])==null?void 0:X.report_content)||"No report content entered."})]},le.id)})]})]})})},yIe=()=>{const{orderId:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(""),f=v.useCallback(async g=>{if(!g){l("No Order ID specified in the URL."),s(!1),a(null);return}s(!0),l(null),a(null);try{console.log(`Fetching order details for ID: ${g}`);const x=await se(`/api/lab/orders/${g}/report`);if(!x.ok){let j;try{j=await x.json()}catch{j={message:`Server returned status ${x.status}`}}throw console.error("Fetch order details error response:",j),new Error(j.message||`Failed to fetch order details: ${x.status}`)}const b=await x.json();if(console.log("Received order data:",b),!b)throw console.error("Invalid order data structure:",b),new Error("Invalid order data received from server.");a(b)}catch(x){console.error("Error fetching order details:",x),l(x instanceof Error?x.message:"An unknown error occurred while fetching the order details")}finally{s(!1)}},[se]);v.useEffect(()=>{f(t)},[t,f]),v.useEffect(()=>{(async()=>{try{const x=await se("/api/clinics/settings");if(x.ok){const b=await x.json();d(b.labLetterheadUrl||"")}}catch(x){console.error("Error fetching clinic settings:",x)}})()},[]);const p=()=>{n&&MM(n)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs(_r,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[r.jsx(Fn,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:r.jsx(on,{size:16})}),r.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[r.jsx(vf,{size:16,style:{marginRight:"5px"}}),"Print"]}),r.jsxs("button",{onClick:p,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[r.jsx(Kz,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",t||"None Specified",")"]}),i&&r.jsx("div",{className:"loading-text",children:"Loading report..."}),o&&!i&&r.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[r.jsx(ea,{size:48}),r.jsx("h3",{className:"error-title",children:"Error Loading Report"}),r.jsx("p",{children:o}),t&&r.jsx("button",{onClick:()=>f(t),className:"retry-button",children:"Retry"})]}),r.jsxs("div",{className:"printable-section",children:[c&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:c,alt:"Lab Letterhead",className:"print-letterhead-image"})}),!i&&!o&&(n==null?void 0:n.Patient)&&r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Jn,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",n.Patient.name||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age:"})," ",n.Patient.age??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Gender:"})," ",n.Patient.gender||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Token No:"})," ",n.Patient.patient_token_number||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Patient ID:"})," ",n.Patient.id]}),n.Patient.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",n.Patient.phone]})]})]}),!i&&!o&&(n==null?void 0:n.report_content)&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Ra,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const g=JSON.parse(n.report_content||"{}");return typeof g=="object"&&g!==null&&n.tests?n.tests.map(x=>r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em"},children:x.name}),g[x.id]?r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(g[x.id]).map(([b,j])=>{var k;const S=(k=x.default_parameters)==null?void 0:k.find(O=>O.name===b),_=typeof j=="string"?parseFloat(j):typeof j=="number"?j:NaN,T=(S==null?void 0:S.type)==="number"&&!isNaN(_)&&(S.lower_limit!=null&&_<S.lower_limit||S.upper_limit!=null&&_>S.upper_limit),C=(S==null?void 0:S.type)==="boolean"?j===!0||j==="true"?"Reactive":"Non-Reactive":String(j),E=(S==null?void 0:S.type)==="boolean"&&(j===!0||j==="true");return r.jsxs("tr",{children:[r.jsx("td",{children:b}),r.jsxs("td",{className:`${T?"abnormal-result":""} ${E?"reactive-result":""}`,children:[C," ",S==null?void 0:S.unit]}),r.jsx("td",{children:S&&S.type==="number"&&(S.lower_limit!==null||S.upper_limit!==null)?r.jsxs(r.Fragment,{children:[S.lower_limit!=null&&` > ${S.lower_limit}`,S.lower_limit!=null&&S.upper_limit!=null&&" - ",S.upper_limit!=null&&` < ${S.upper_limit}`,S.unit&&` ${S.unit}`]}):((S==null?void 0:S.type)==="boolean","N/A")})]},b)})})]}):r.jsx("p",{children:"No parameters reported for this test."})]},x.id)):r.jsx(wf,{remarkPlugins:[Nf],children:n.report_content})}catch{return r.jsx(wf,{remarkPlugins:[Nf],children:n.report_content||"*No findings recorded.*"})}})()})]})]}),!i&&!o&&!(n!=null&&n.report_content)&&!(n!=null&&n.Patient)&&t&&r.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",t,". The order might be processing, does not exist, or the ID is incorrect."]}),!t&&!i&&!o&&r.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",r.jsx(_r,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},xIe=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState(!1),[s,o]=v.useState([]),[l,c]=v.useState(null),[d,f]=v.useState(e);Yc(),v.useEffect(()=>{const j=setTimeout(()=>{f(e)},500);return()=>{clearTimeout(j)}},[e]),v.useEffect(()=>{p()},[d]);const p=async()=>{const j=e.trim();if(!j){o([]),c(null);return}i(!0),c(null),o([]),console.log(`Searching for: ${j}`);try{const S=await se("/api/lab");if(!S.ok){let O;try{O=await S.json()}catch{O={message:`Server returned status ${S.status}`}}throw console.error("Search fetch error response:",O),new Error(O.message||`HTTP error! status: ${S.status}`)}const{orders:_}=await S.json();console.log("Received lab orders for search:",_);const C=_.filter(O=>!!O.report_content).map(O=>{var I,F;return{id:O.id,labTokenNumber:String(O.lab_token_number??"N/A"),patientName:((I=O.Patient)==null?void 0:I.name)||"N/A",patientId:O.patient_id,patientTokenNumber:String(((F=O.Patient)==null?void 0:F.patient_token_number)??"N/A"),tests:(O.tests||[]).map(B=>B.name||"Unknown Test"),date:mf(new Date(O.createdAt),"yyyy-MM-dd"),status:O.status}}),E=new oo(C,{keys:["patientName","labTokenNumber","patientTokenNumber","tests","id","patientId"],threshold:.3,ignoreLocation:!0}),k=e.trim()?E.search(e).map(O=>O.item):C;console.log("Filtered search results:",k),o(k),k.length===0&&j?c(`No matching reports found for "${j}".`):c(null)}catch(S){console.error("Failed to search lab reports:",S),c(S instanceof Error?S.message:"An unknown error occurred during search")}finally{i(!1)}},g=j=>{console.log(`Result clicked, navigating to view report for order ID: ${j}`),t(`/lab/view-report/${j}`)},x=j=>{switch(j){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:j,color:"text-gray-600 bg-gray-100"}}},b=j=>{switch(j){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),r.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(on,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[r.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[r.jsx(Fn,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),r.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:e,onChange:j=>n(j.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[a&&r.jsx("div",{className:"loading-text",children:"Searching..."}),l&&!a&&r.jsxs("div",{className:"error-text",children:[r.jsx(ea,{size:20,className:"inline mr-2"})," ",l]}),s.length>0&&!a&&r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:s.map(j=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(j.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[r.jsx(tX,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),j.patientName," (Token: ",j.patientTokenNumber,")"]}),r.jsx("span",{className:b(j.status),children:x(j.status).text})]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(Ra,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",j.id]}),r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(WJ,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",j.tests.join(", ")]}),r.jsxs("div",{children:[r.jsx(VO,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",j.date]})]})]},j.id))}),!a&&s.length===0&&!l&&e.trim()&&r.jsxs("div",{className:"no-data-message",children:['No results found for "',e,'".']}),!a&&s.length===0&&!l&&!e.trim()&&r.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},vIe=()=>{const{patientId:t}=Fa(),e=Lt(),[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(null),[f,p]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t){l("Patient ID is missing from the URL."),s(!1);return}s(!0),l(null),a([]),p(null);try{const b=await se(`/api/patients/${t}`);if(b.ok){const _=await b.json();p(_.name||`Patient ID: ${t}`)}else console.warn(`Failed to fetch patient name for ID ${t}`),p(`Patient ID: ${t}`);const j=await se(`/api/lab/patient/${t}`);if(!j.ok){const _=await j.json().catch(()=>({}));throw new Error(_.message||`HTTP error! status: ${j.status}`)}const S=await j.json();a(S||[])}catch(b){console.error("Error fetching data:",b),l(`Failed to load data: ${b.message}`)}finally{s(!1)}})()},[t]);const g=x=>{x.report_content?e(`/lab/view-report/${x.id}`):e(`/lab/enter-report/${x.id}`)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{margin:0},children:["Lab Reports ",f?`for ${f}`:`for Patient ID: ${t}`]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:async()=>{if(!t){alert("Patient ID is missing. Cannot create a new report.");return}try{const x=await se("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:t})});if(!x.ok){const j=await x.json().catch(()=>({message:`Failed to create new lab order: ${x.status}`}));throw new Error(j.message||`Failed to create new lab order: ${x.status}`)}const b=await x.json();e(`/lab/enter-report/${b.newOrderId}`)}catch(x){console.error("Error creating new lab order:",x),alert(`Error creating new lab order: ${x.message}`)}},className:"lab-inventory-button",disabled:!t,title:t?"Enter a new lab report for this patient":"Patient ID missing",children:[r.jsx(Ps,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),r.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[r.jsx(on,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),r.jsx("div",{style:{marginTop:"20px"},children:i?r.jsx("div",{className:"skeleton-reports-list",children:[1,2,3].map(x=>r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[r.jsx(Z,{variant:"circular",width:24,height:24,style:{marginRight:"15px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx(Z,{width:"40%",height:20,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"60%",height:16})]})]}),r.jsx("div",{style:{marginLeft:"10px"},children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})})]},x))}):o?r.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[r.jsx(eZ,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),r.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),r.jsx("p",{children:o})]}):n.length===0?r.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Ra,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),r.jsx("p",{children:"No lab reports found for this patient."}),r.jsxs("p",{children:["You can ",r.jsx(_r,{to:`/lab/create-order/${t}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):c?r.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",c.report_date?mf(new Date(c.report_date),"PPP p"):"N/A"]}),r.jsxs("button",{onClick:()=>d(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[r.jsx(on,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),r.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[r.jsx("strong",{children:"Tests Ordered:"})," ",(c.tests||[]).map(x=>x.name).join(", ")]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:r.jsx(wf,{remarkPlugins:[Nf],children:c.report_content||"*No findings recorded.*"})})]}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:n.map(x=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>g(x),tabIndex:0,onKeyPress:b=>b.key==="Enter"&&g(x),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Ra,{size:24,style:{marginRight:"15px",color:"#007bff"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",mf(new Date(x.createdAt),"PPP")]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",x.tests&&x.tests.length>0?x.tests.map(b=>b.name).join(", "):"N/A"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x.status&&r.jsx("span",{className:jIe(x.status),children:bIe(x.status)}),r.jsx(pd,{size:20,style:{color:"#6c757d"}})]})]},x.id))})})]})})},bIe=t=>{if(!t)return"Unknown";switch(t.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return t.charAt(0).toUpperCase()+t.slice(1)}},jIe=t=>{if(!t)return"status-badge";switch(t.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},wG=()=>{const t=Lt(),[e]=Sz(),n=e.get("search")||"",[a,i]=v.useState("pharmacy");return Yc(void 0,300),r.jsxs("div",{className:"inventory-management-container",style:{padding:"10px 15px",backgroundColor:"var(--background-color)",minHeight:"100vh"},children:[r.jsxs("div",{className:"inventory-header",style:{marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"action-icon-button",title:"Go Back",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-primary)"},children:r.jsx(on,{size:20})}),r.jsx("h1",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700",color:"var(--text-primary)"},children:"Inventory Management"})]}),r.jsxs("div",{className:"inventory-tabs",style:{display:"flex",gap:"4px",backgroundColor:"var(--card-bg, #f3f4f6)",padding:"3px",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("button",{onClick:()=>i("pharmacy"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="pharmacy"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="pharmacy"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="pharmacy"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="pharmacy"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="pharmacy"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(Cc,{size:16}),"Pharmacy Stock"]}),r.jsxs("button",{onClick:()=>i("lab"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:a==="lab"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:a==="lab"?"var(--card-bg-active, #fff)":"transparent",boxShadow:a==="lab"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:a==="lab"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:a==="lab"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(ls,{size:16}),"Lab Stock"]})]})]}),r.jsx("div",{className:"inventory-content",style:{backgroundColor:"var(--card-bg, #fff)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:a==="pharmacy"?r.jsx(vG,{isEmbedded:!0,initialSearch:n}):r.jsx(DM,{isEmbedded:!0})})]})},wIe=({fetchWithAuth:t})=>{const e=Lt(),[n,a]=v.useState(!0),[i,s]=v.useState([]),[o,l]=v.useState(null),[c,d]=v.useState(null),f=v.useCallback(async()=>{a(!0),l(null);try{const b=await(await t("/staff")).json();s(b.map(j=>({...j,id:j._id||j.id})))}catch(x){l(`Failed to load staff data: ${x.message}`),s([])}finally{a(!1)}},[t]);v.useEffect(()=>{f()},[f]),v.useEffect(()=>{if(c){const x=setTimeout(()=>d(null),5e3);return()=>clearTimeout(x)}},[c]);const p=x=>{switch(x){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},g=x=>{switch(x){case"doctor":return r.jsx(bf,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return r.jsx(Qz,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return r.jsx(Cc,{size:16,className:"mr-2 text-purple-600"});case"lab":return r.jsx(ls,{size:16,className:"mr-2 text-yellow-600"});case"admin":return r.jsx(dd,{size:16,className:"mr-2 text-teal-600"});default:return r.jsx(Os,{size:16,className:"mr-2 text-gray-500"})}};return n?r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Z,{width:40,height:40,variant:"circular"}),r.jsx(Z,{width:200,height:32})]}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:32})})]},x))})]})})]}):r.jsxs("div",{className:"staff-page-container",children:[c&&r.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[c.type==="success"?r.jsx(Ll,{size:18,className:"mr-2"}):r.jsx(ea,{size:18,className:"mr-2"}),r.jsx("span",{children:c.message}),r.jsx("button",{onClick:()=>d(null),className:"ml-auto text-xl font-bold",children:""})]}),o&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[r.jsx(ea,{size:18,className:"mr-2 text-red-500"}),o,r.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(on,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),r.jsxs("button",{onClick:()=>e("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[r.jsx(Gn,{size:16,className:"mr-2"})," Add New Staff"]})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0&&!n?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):i.map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:x.name}),r.jsx("td",{className:"hidden md:table-cell",children:x.email}),r.jsx("td",{children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(x.role)}`,children:[g(x.role),x.role.charAt(0).toUpperCase()+x.role.slice(1)]})}),r.jsx("td",{className:"hidden md:table-cell",children:x.role==="doctor"?x.opd_fee?parseFloat(String(x.opd_fee)).toFixed(2):"Not Set":"N/A"}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="active"?"Active":"Inactive"})}),r.jsx("td",{className:"actions",children:r.jsxs("button",{onClick:()=>e(`/dashboard/staff/edit/${x.id}`),className:"edit-link",disabled:x.role==="admin",title:"Edit Staff",children:[r.jsx($i,{size:16})," Edit"]})})]},x.id))})]})})]})},DB=()=>{var le,X,ae,de,ee,Ne,Te,Fe,xe,te,oe,_e,Oe,K,ge,ue,fe,Ee,Ke;const{patientId:t,billId:e}=Fa(),n=Lt(),[a,i]=v.useState(null),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(""),[p,g]=v.useState("cash"),[x,b]=v.useState(!1),[j,S]=v.useState(""),[_,T]=v.useState(""),[C,E]=v.useState(""),[k,O]=v.useState(""),[I,F]=v.useState([]),[B,$]=v.useState(""),[L,V]=v.useState(!1),[H,ne]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Q=()=>{H.length<5&&ne($e=>[...$e,{id:Date.now().toString(),method:"cash",amount:0}])},q=$e=>{H.length>2&&ne(We=>We.filter(it=>it.id!==$e))},G=($e,We,it)=>{ne(wt=>wt.map(we=>we.id===$e?We==="method"?{...we,method:it}:{...we,amount:Math.max(0,it)}:we))},ie=($e,We)=>{const it=H.filter(we=>we.id!==$e).reduce((we,Xe)=>we+Xe.amount,0),wt=Math.max(0,We-it);ne(we=>we.map(Xe=>Xe.id===$e?{...Xe,amount:wt}:Xe))},[W,z]=v.useState([]),[ce,je]=v.useState(0),Y=((le=a==null?void 0:a.patient)==null?void 0:le.insurance_type)==="no_cash_insurance";v.useEffect(()=>{g(Y?"no_cash_insurance":"cash")},[Y]),v.useEffect(()=>{e&&(async()=>{o(!0),c(null);try{const[We,it,wt]=await Promise.all([se(`/api/bills/${e}`),se("/api/clinics/settings").catch(()=>null),se(`/api/bills?patientId=${t}`).catch(()=>null)]);if(!We.ok)throw new Error(`HTTP error! status: ${We.status}`);const we=await We.json();if(!we||!we.bill||!we.calculated)throw new Error("Incomplete data structure received from backend.");if(we.bill.type!=="admission")throw new Error(`Unexpected bill type: ${we.bill.type}. Expected 'admission'.`);const Xe=Array.isArray(we.admissionPayments)?we.admissionPayments:[];if(i({...we.bill,amount:we.bill.amount,created_at:we.bill.createdAt||we.bill.created_at,items:(we.bill.items||[]).map(Je=>({...Je,price:parseFloat(Je.price)||0,quantity:parseInt(Je.quantity)||1})),AdmissionPayments:Xe,calculated:we.calculated,admissionRecord:we.admissionRecord,patient:we.bill.Patient?{id:we.bill.Patient.id,name:we.bill.Patient.name,admission_date:we.bill.Patient.admission_date,discharge_date:we.bill.Patient.discharge_date,token:we.bill.Patient.patient_token_number||we.bill.Patient.token,insurance_type:we.bill.Patient.insurance_type}:void 0}),it&&it.ok){const Je=await it.json();S(Je.name||""),T(Je.address||""),E(Je.notes||""),O(Je.upi_id||"")}try{const Je=await se(`/api/patients/${t}/admission-payments`);if(Je.ok){const ct=await Je.json();F(ct)}}catch(Je){console.error("Failed to fetch payment history:",Je)}if(wt&&wt.ok){const ct=((await wt.json()).bills||[]).filter(bt=>bt.type==="admission"&&bt.id!==e).map(bt=>{var ot,Tt;const ke=bt.AdmissionRecord;return{id:bt.id,amount:ke?parseFloat(ke.total_amount):parseFloat(bt.amount)||0,status:ke?ke.balance<=0||ke.status==="discharged"&&ke.balance<=0?"paid":"pending":bt.status,created_at:bt.createdAt||bt.created_at,admission_date:ke?ke.admission_date:((ot=bt.Patient)==null?void 0:ot.admission_date)||bt.admission_date,discharge_date:ke?ke.discharge_date:((Tt=bt.Patient)==null?void 0:Tt.discharge_date)||bt.discharge_date,admissionRecord:ke}});z(ct);const Ct=ct.filter(bt=>bt.admissionRecord?bt.admissionRecord.balance>0:bt.status!=="paid").reduce((bt,ke)=>ke.admissionRecord?bt+(typeof ke.admissionRecord.balance=="string"?parseFloat(ke.admissionRecord.balance):ke.admissionRecord.balance):bt+ke.amount,0);je(Ct)}}catch(We){console.error("Failed to fetch admission bill details:",We),c(We instanceof Error?We.message:"An unknown error occurred")}finally{o(!1)}})()},[e,t]),v.useEffect(()=>{(async()=>{if(!e){if(!t){c("Patient ID is missing."),o(!1);return}try{o(!0);const We=await se(`/api/patients/${t}`);if(We.ok){const it=await We.json();if(it){if(it.admission_date&&!it.discharge_date){const we=await se(`/api/patients/${t}/active-bill?type=admission`);if(we.ok){const Xe=await we.json();if(Xe&&Xe.id){n(`/patient/${t}/admission-bill/${Xe.id}`,{replace:!0});return}}}i({id:0,patient_id:it.id,type:"admission",amount:"0",status:"pending",created_at:new Date().toISOString(),AdmissionPayments:[],calculated:{totalPaid:0,totalDue:0,balance:0,daysStayed:0,perDayCharge:0},patient:{id:it.id,name:it.name,admission_date:it.admission_date,discharge_date:it.discharge_date,token:it.token,insurance_type:it.insurance_type}});const wt=await se(`/api/bills?patientId=${t}`);if(wt.ok){const Xe=((await wt.json()).bills||[]).filter(Je=>Je.type==="admission").map(Je=>{var Ct,bt;const ct=Je.AdmissionRecord;return{id:Je.id,amount:ct?parseFloat(ct.total_amount):parseFloat(Je.amount)||0,status:ct?ct.balance<=0||ct.status==="discharged"&&ct.balance<=0?"paid":"pending":Je.status,created_at:Je.createdAt||Je.created_at,admission_date:ct?ct.admission_date:((Ct=Je.Patient)==null?void 0:Ct.admission_date)||Je.admission_date,discharge_date:ct?ct.discharge_date:((bt=Je.Patient)==null?void 0:bt.discharge_date)||Je.discharge_date,admissionRecord:ct}});z(Xe)}}else c("Patient not found")}}catch(We){console.error("Error fetching patient status:",We),c("Failed to load patient details")}finally{o(!1)}}})()},[t,e,n]);const Ie=async()=>{if(t){b(!0);try{const $e=await se(`/api/patients/${t}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!$e.ok){const it=await $e.json();throw new Error(it.message||"Failed to admit patient")}const We=await $e.json();We.bill&&We.bill.id?n(`/patient/${t}/admission-bill/${We.bill.id}`):window.location.reload()}catch($e){c($e instanceof Error?$e.message:"Failed to admit patient"),b(!1)}}},Ue=async()=>{if(t&&window.confirm("Are you sure you want to discharge this patient? This will finalize the bill.")){b(!0);try{const $e=await se(`/api/patients/${t}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!$e.ok){const We=await $e.json();throw new Error(We.message||"Failed to discharge patient")}window.location.reload()}catch($e){c($e instanceof Error?$e.message:"Failed to discharge patient"),b(!1)}}},ze=((X=a==null?void 0:a.patient)==null?void 0:X.admission_date)&&!((ae=a==null?void 0:a.patient)!=null&&ae.discharge_date),Le=!!((de=a==null?void 0:a.patient)!=null&&de.discharge_date);v.useEffect(()=>{var it,wt;const We=Number(((it=a==null?void 0:a.calculated)==null?void 0:it.balance)??((wt=a==null?void 0:a.admissionRecord)==null?void 0:wt.balance)??0)+ce;if(We>0&&k){const we=`upi://pay?pa=${k}&pn=${encodeURIComponent(j||"Clinic")}&am=${We.toFixed(2)}&cu=INR`;$(we)}else $("")},[a,ce,k,j]);const be=H.reduce(($e,We)=>$e+We.amount,0),Ce=async $e=>{var we,Xe;$e.preventDefault();const it=Number(((we=a==null?void 0:a.calculated)==null?void 0:we.balance)??((Xe=a==null?void 0:a.admissionRecord)==null?void 0:Xe.balance)??0)+ce,wt=L?be:parseFloat(d);if(!t||wt<=0||wt>it+.1){c(`Please enter a valid amount. Max payable: ${it.toFixed(2)}`);return}c(null),b(!0);try{if(L){for(const Ct of H)if(Ct.amount>0){const bt=await se(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:Ct.amount,payment_mode:Ct.method})});if(!bt.ok){const ke=await bt.json();throw new Error(ke.message||`Failed to record ${Ct.method} payment`)}}}else{const Ct=await se(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(d),payment_mode:p})});if(!Ct.ok){const bt=await Ct.json();throw new Error(bt.message||`HTTP error! status: ${Ct.status}`)}}const ct=await(await se(`/api/bills/${e}`)).json();if(ct&&ct.bill&&ct.calculated&&ct.admissionPayments)i({...ct.bill,amount:parseFloat(ct.bill.amount),AdmissionPayments:ct.admissionPayments,calculated:ct.calculated,patient:ct.bill.Patient?{id:ct.bill.Patient.id,name:ct.bill.Patient.name,admission_date:ct.bill.Patient.admission_date,discharge_date:ct.bill.Patient.discharge_date,token:ct.bill.Patient.token,insurance_type:ct.bill.Patient.insurance_type}:void 0});else throw new Error("Invalid data structure received after payment submission.");f(""),g("cash"),L&&(ne([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),V(!1)),setTimeout(()=>{window.print()},100)}catch(Je){console.error("Failed to submit payment:",Je),c(Je instanceof Error?Je.message:"Failed to record payment")}finally{b(!1)}},Ae=()=>{window.print()};if(s)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]})]})]})})]})]})});if(l)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>n(-1),className:"back-button",children:r.jsx(on,{size:20})}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"error-message-box",children:["Error: ",l]})]})});if(!a||!a.calculated)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"error-message-box",children:"No bill details found or data is incomplete."})});const me=Number(a.calculated&&a.calculated.balance!==void 0?a.calculated.balance:a.admissionRecord?a.admissionRecord.balance:0),ye=a.status==="paid"||me<=0;return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"ADMISSION BILL"}),r.jsx("h2",{className:"clinic-name-print",children:j||"Hospital"}),(_||C)&&r.jsxs("div",{className:"clinic-details-print",children:[_&&r.jsx("span",{className:"small-text clinic-address",children:_}),C&&r.jsx("span",{className:"small-text clinic-notes",children:C})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient"]})," ",((ee=a.patient)==null?void 0:ee.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",((Ne=a.patient)==null?void 0:Ne.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[r.jsx(on,{size:20}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{children:"Patient Information"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[!ze&&!Le&&r.jsxs("button",{onClick:Ie,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(BN,{size:16})," Admit Patient"]}),ze&&r.jsxs("button",{onClick:Ue,disabled:x,className:"secondary-button",style:{fontSize:"0.85em",padding:"6px 12px",background:"#dc3545",color:"white"},children:[r.jsx(UX,{size:16})," Discharge"]}),Le&&r.jsxs("button",{onClick:Ie,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(SJ,{size:16})," Re-Admit"]})]})]}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Te=a.patient)==null?void 0:Te.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",((Fe=a.patient)==null?void 0:Fe.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(_Q,{size:16})," Bill ID"]})," ",a.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Created"]})," ",new Date(a.created_at).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Admission Charges Breakdown"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsxs("tbody",{children:[a.admissionRecord?r.jsxs(r.Fragment,{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]}),r.jsxs("td",{children:["",Number(a.admissionRecord.admission_charge).toFixed(2)]})]}),a.admissionRecord.days_stayed?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString(),a.admissionRecord.discharge_date?` - ${new Date(a.admissionRecord.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.admissionRecord.days_stayed," days"]}),r.jsxs("td",{children:["",Number(a.admissionRecord.per_day_charge).toFixed(2)]}),r.jsxs("td",{children:["",(Number(a.admissionRecord.days_stayed)*Number(a.admissionRecord.per_day_charge)).toFixed(2)]})]}):a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges (Ongoing)",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(a.admissionRecord.admission_date).toLocaleDateString()," - Today)"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]}):null]}):r.jsxs(r.Fragment,{children:[a.items&&a.items.length>0?a.items.map(($e,We)=>r.jsxs("tr",{children:[r.jsx("td",{children:We+1}),r.jsx("td",{children:$e.name}),r.jsx("td",{children:$e.quantity}),r.jsxs("td",{children:["",$e.price.toFixed(2)]}),r.jsxs("td",{children:["",($e.price*$e.quantity).toFixed(2)]})]},`item-${We}`)):r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Initial Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]}),r.jsxs("td",{children:["",parseFloat(a.amount).toFixed(2)]})]}),a.calculated.daysStayed&&a.calculated.perDayCharge&&a.calculated.perDayCharge>0&&r.jsxs("tr",{children:[r.jsx("td",{children:(((xe=a.items)==null?void 0:xe.length)||1)+1}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",(te=a.patient)!=null&&te.admission_date?new Date(a.patient.admission_date).toLocaleDateString():"",(oe=a.patient)!=null&&oe.discharge_date?` - ${new Date(a.patient.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[a.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",a.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(a.calculated.daysStayed*a.calculated.perDayCharge).toFixed(2)]})]})]}),r.jsxs("tr",{className:"subtotal-row current-admission-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Current Admission Total"}),r.jsxs("td",{children:["",Number(((_e=a.calculated)==null?void 0:_e.totalDue)??((Oe=a.admissionRecord)==null?void 0:Oe.total_amount)??0).toFixed(2)]})]}),W.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("tr",{className:"section-header-row previous-admissions-header",children:r.jsx("td",{colSpan:5,style:{fontWeight:600,textAlign:"center"},children:"Previous Admissions"})}),W.map(($e,We)=>r.jsxs("tr",{className:$e.status!=="paid"?"bill-row-unpaid":"bill-row-paid",children:[r.jsx("td",{children:We+1}),r.jsxs("td",{children:["Admission - ",$e.admission_date?new Date($e.admission_date).toLocaleDateString():"N/A",$e.discharge_date&&r.jsxs("small",{style:{display:"block",color:"inherit",opacity:.8,fontSize:"0.75em"},children:["Discharged: ",new Date($e.discharge_date).toLocaleDateString()]})]}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",$e.amount.toFixed(2)]}),r.jsxs("td",{className:$e.status!=="paid"?"text-danger":"text-success",children:["",$e.amount.toFixed(2),$e.status==="paid"&&r.jsx("small",{style:{marginLeft:"4px"},children:"(Paid)"})]})]},$e.id)),ce>0&&r.jsxs("tr",{className:"subtotal-row unpaid-balance-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Previous Unpaid Balance"}),r.jsxs("td",{children:["",ce.toFixed(2)]})]})]}),r.jsxs("tr",{className:`grand-total-row-dynamic ${ce>0?"grand-total-unpaid":"grand-total-paid"}`,children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"GRAND TOTAL"}),r.jsxs("td",{style:{fontSize:"1.1em"},children:["",(Number(((K=a.calculated)==null?void 0:K.totalDue)??((ge=a.admissionRecord)==null?void 0:ge.total_amount)??0)+ce).toFixed(2)]})]})]})]})]}),I.length>0&&r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Payment History"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DATE"}),r.jsx("th",{children:"MODE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsx("tbody",{children:I.map(($e,We)=>{var it;return r.jsxs("tr",{children:[r.jsx("td",{children:We+1}),r.jsx("td",{children:$e.payment_date?new Date($e.payment_date).toLocaleDateString():"N/A"}),r.jsx("td",{style:{textTransform:"capitalize"},children:((it=$e.payment_mode)==null?void 0:it.replace(/_/g," "))||"N/A"}),r.jsxs("td",{children:["",(Number($e.amount_paid)||0).toFixed(2)]})]},$e.id)})})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",Number(((ue=a.calculated)==null?void 0:ue.totalDue)??((fe=a.admissionRecord)==null?void 0:fe.total_amount)??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Number(((Ee=a.calculated)==null?void 0:Ee.totalPaid)??((Ke=a.admissionRecord)==null?void 0:Ke.total_paid)??0).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Balance Due: ",me.toFixed(2)]})})]}),B&&me>0&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(La,{value:B,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",(a.calculated.totalDue||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Days Stayed"}),r.jsx("span",{children:a.calculated.daysStayed??0})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{style:{color:"#28a745"},children:["",(a.calculated.totalPaid||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Balance Due"}),r.jsxs("strong",{style:{color:me>0?"#dc3545":"#28a745"},children:["",me.toFixed(2)]})]}),W.length>0&&r.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #dee2e6"},children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",color:"#495057"},children:"Previous Admissions"}),W.map($e=>r.jsxs("div",{className:"summary-row",style:{fontSize:"0.8rem"},children:[r.jsxs("span",{style:{color:"#6c757d"},children:[$e.admission_date?new Date($e.admission_date).toLocaleDateString():"N/A",$e.status!=="paid"&&r.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"(Unpaid)"})]}),r.jsxs("span",{style:{color:$e.status!=="paid"?"#dc3545":"#28a745"},children:["",$e.amount.toFixed(2)]})]},$e.id)),ce>0&&r.jsxs("div",{className:"summary-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e9ecef"},children:[r.jsx("strong",{style:{color:"#dc3545",fontSize:"0.875rem"},children:"Previous Balance"}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",ce.toFixed(2)]})]})]}),ce>0&&r.jsxs("div",{className:"summary-row grand-total-row",style:{marginTop:"0.75rem",background:"#fff3cd"},children:[r.jsx("strong",{style:{color:"#856404"},children:"Total Outstanding"}),r.jsxs("strong",{style:{color:"#856404"},children:["",(me+ce).toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:B&&me>0?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:B,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):me<=0?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#28a745"},children:[r.jsx(uv,{size:48}),r.jsx("p",{style:{marginTop:"10px",fontWeight:600},children:"Fully Paid"})]}):r.jsx("p",{children:"UPI QR code not available."})}),!ye&&r.jsxs("form",{onSubmit:Ce,children:[r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>V(!L),disabled:x,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:L?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:L?"rgba(79, 172, 254, 0.1)":"transparent",color:L?"#4facfe":"#666",cursor:x?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Bo,{size:14}),"Split"]})]}),L?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",be.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:H.map(($e,We)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:We+1}),r.jsxs("select",{value:$e.method,onChange:it=>G($e.id,"method",it.target.value),className:"split-payment-select",disabled:x,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:$e.amount||"",onChange:it=>G($e.id,"amount",parseFloat(it.target.value)||0),className:"split-payment-input",disabled:x})]}),H.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ie($e.id,me+ce),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining balance",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>q($e.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Vn,{size:12})})]})]},$e.id))}),H.length<5&&r.jsxs("button",{type:"button",onClick:Q,className:"split-payment-add-btn",disabled:x,children:[r.jsx(Gn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Max Payable:"}),r.jsxs("span",{style:{fontWeight:600},children:["",(me+ce).toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${be<=me+ce+.1?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:be<=me+ce+.1?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",be.toFixed(2)]})]}),be>me+ce+.1&&r.jsx("div",{className:"split-payment-warning",children:" Amount exceeds balance!"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"payment-input-group",style:{marginBottom:"15px"},children:[r.jsx("label",{htmlFor:"paymentAmount",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Amount ()"}),r.jsx("input",{type:"number",id:"paymentAmount",value:d,onChange:$e=>f($e.target.value),placeholder:`Max ${(me+ce).toFixed(2)}`,min:"0.01",step:"0.01",max:me+ce,className:"payment-mode-select",required:!0})]}),r.jsxs("div",{className:"payment-input-group",children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",value:p,onChange:$e=>g($e.target.value),className:"payment-mode-select",disabled:Y,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),Y&&r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"})]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{type:"button",onClick:Ae,className:"secondary-button print-preview-button",children:"Print Preview"}),r.jsx("button",{type:"submit",className:"primary-button",disabled:x||!L&&(!d||parseFloat(d)<=0||parseFloat(d)>me+ce)||L&&(be<=0||be>me+ce+.1),children:x?"Processing...":"Record Payment & Print"})]})]}),ye&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:Ae,className:"secondary-button",children:"Print Bill"})})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for choosing our hospital!"}),r.jsx("p",{children:"This is a computer-generated bill and does not require a signature."})]})]})})},NIe=t=>{switch(t){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},SIe=()=>{const{orderId:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState({}),[g,x]=v.useState(""),[b,j]=v.useState(""),[S,_]=v.useState("cash"),T=v.useMemo(()=>(n==null?void 0:n.medications.reduce((L,V)=>{const H=V.total_price??0,ne=H*(V.discount_percentage??0)/100;return L+H-ne},0))??0,[n==null?void 0:n.medications]),C=5,E=v.useMemo(()=>!n||!n.medications?0:n.medications.reduce((L,V,H)=>{var W,z;const ne=V.drug_id??`index-${H}`,Q=((W=f[ne])==null?void 0:W.pack)||0,q=((z=f[ne])==null?void 0:z.loose)||0,G=V.pack_price??0,ie=V.loose_price??0;return L+Q*G+q*ie},0),[n,f]),k=v.useCallback(async()=>{if(!t){l("Order ID is missing."),s(!1);return}s(!0),l(null);try{const L=await se(`/api/pharmacy-orders/${t}`);if(!L.ok)throw L.status===404?new Error(`Order with ID ${t} not found.`):new Error(`Failed to fetch order details: ${L.statusText} (${L.status})`);const V=await L.json();console.log("Fetched order data after return:",V);const ne=V.medications.map(q=>q.pack_price&&q.loose_price&&q.loose_price>0?{...q,unitsPerPack:Math.round(q.pack_price/q.loose_price)}:{...q,unitsPerPack:0}).map(q=>({...q,discount_percentage:q.discount_percentage??0}));a({...V,medications:ne});const Q={};ne.forEach((q,G)=>{const ie=q.drug_id??`index-${G}`;Q[ie]={pack:0,loose:0}}),p(Q)}catch(L){console.error("Failed to fetch order details:",L),l(L.message||"Failed to load order details.")}finally{s(!1)}},[t]);v.useEffect(()=>{k()},[k]),v.useEffect(()=>{(async()=>{try{const V=await se("/api/clinics/settings");if(!V.ok)throw new Error("Failed to fetch clinic settings");const H=await V.json();console.log("Fetched clinic settings:",H),x(H.upi_id||"")}catch(V){console.error("Error fetching clinic settings:",V)}})()},[]),v.useEffect(()=>{if((n==null?void 0:n.order_total)!==void 0&&n.order_total>0&&g){const L=`upi://pay?pa=${g}&pn=ClinicName&am=${n.order_total.toFixed(2)}&cu=INR`;j(L)}else j("")},[n==null?void 0:n.order_total,g]);const O=(L,V)=>{a(H=>{if(!H)return null;const ne=H.medications.map((q,G)=>(q.drug_id??`index-${G}`)===L?{...q,discount_percentage:isNaN(V)?0:V}:q),Q=ne.reduce((q,G)=>{const ie=G.total_price??0,W=ie*(G.discount_percentage??0)/100;return q+ie-W},0);return{...H,medications:ne,order_total:Q}})},I=(L,V,H)=>{p(ne=>{const Q=H.unitsPerPack||0,G=H.pack_quantity*Q+H.loose_quantity,ie=Math.max(0,Math.min(V,G));let W=0,z=ie;return Q>0&&(W=Math.floor(ie/Q),z=ie%Q),{...ne,[L]:{pack:W,loose:z}}})},F=async()=>{const L=n==null?void 0:n.medications.map((V,H)=>{var G,ie;const ne=V.drug_id??`index-${H}`,Q=((G=f[ne])==null?void 0:G.pack)||0,q=((ie=f[ne])==null?void 0:ie.loose)||0;return Q>0||q>0?{drug_id:V.drug_id,name:V.name,pack_quantity:V.pack_quantity,loose_quantity:V.loose_quantity,returnPackQuantity:Q,returnLooseQuantity:q}:null}).filter(V=>V!==null);if(!L||L.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!t){alert("Order ID is missing. Cannot process return.");return}if(!L){alert("Could not prepare items for return.");return}d(!0),l(null);try{const V=await se(`/api/pharmacy-orders/${t}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:L})}),H=await V.json();if(!V.ok)throw new Error(H.message||`Failed to process return: ${V.statusText}`);const ne={};n==null||n.medications.forEach((Q,q)=>{const G=Q.drug_id??`index-${q}`;ne[G]={pack:0,loose:0}}),p(ne),k()}catch(V){console.error("Failed to process return:",V),l(V.message||"An error occurred while processing the return."),alert(`Error processing return: ${V.message||"Unknown error"}`)}finally{d(!1)}};if(i)return r.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(o)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(on,{size:14,className:"mr-1.5"})," Back"]}),r.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",o]})]});if(!n)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(on,{size:14,className:"mr-1.5"})," Back"]}),r.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const B=()=>{window.print()},$=NIe(n.status);return r.jsx("div",{className:"pharmacy-order-details-page",children:r.jsxs("div",{className:"order-details-container printable-section",children:[r.jsxs("div",{className:"order-details-header no-print",children:[r.jsx("h1",{children:"Pharmacy Order Details"}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(on,{size:20})}),r.jsxs("button",{onClick:B,className:"print-button",children:[r.jsx(vf,{size:18})," Print Bill"]})]})]}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{children:"Mahajan Pharmacy"}),r.jsxs("div",{className:"clinic-details-print",children:[r.jsx("span",{className:"small-text clinic-address",children:"D.No: 3-1-289, Plot No. 101, Kabela Center, RR Nagar, Vijayawada  520012."}),r.jsx("span",{className:"small-text clinic-notes",children:"Phone: 93919 44733"}),r.jsx("span",{className:"small-text clinic-license",children:"Licence No:RLF20AP2025003328"})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Patient Name:"})," RESHMA"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Token:"})," 12"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Order Date:"})," 31/10/2025"]})]})]}),r.jsxs("div",{className:"order-info-section no-print",children:[r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Order ID:"})," ",n.id]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Patient:"})," ",n.patientName||"N/A"," (",n.patientTokenNumber||"N/A",")"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleString()]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Prescribed By:"})," ",n.prescribedBy||"N/A"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:`status-pill ${$.text} ${$.bg}`,children:n.status})]})]}),r.jsxs("div",{className:"medications-section",children:[r.jsx("h2",{children:"Medications Ordered"}),n.medications.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"PACK QTY"}),r.jsx("th",{children:"PACK PRICE"}),r.jsx("th",{children:"LOOSE QTY"}),r.jsx("th",{children:"LOOSE PRICE"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"no-print",children:"RETURN PACK QTY"}),r.jsx("th",{className:"no-print",children:"RETURN LOOSE QTY"})]})]})}),r.jsx("tbody",{children:n.medications.map((L,V)=>{var W,z;const H=L.drug_id??`index-${V}`,ne=L.total_price??0,Q=ne*(L.discount_percentage??0)/100,q=ne-Q,G=((W=f[H])==null?void 0:W.pack)||0,ie=((z=f[H])==null?void 0:z.loose)||0;return r.jsxs("tr",{children:[r.jsx("td",{children:L.name}),r.jsx("td",{children:L.pack_quantity??0}),r.jsx("td",{children:L.pack_price!=null?Number(L.pack_price).toFixed(2):"N/A"}),r.jsx("td",{children:L.loose_quantity??0}),r.jsx("td",{children:L.loose_price!=null?Number(L.loose_price).toFixed(2):"N/A"}),r.jsx("td",{children:L.price!=null?Number(L.price).toFixed(2):"N/A"})," ",r.jsx("td",{children:L.price!=null?Number(L.price).toFixed(2):"N/A"})," ",r.jsxs("td",{children:[r.jsx("input",{type:"number",value:L.discount_percentage??0,onChange:ce=>O(H,parseFloat(ce.target.value)),min:"0",max:"100",className:"discount-input-table no-print"}),r.jsxs("span",{className:"print-only",children:[L.discount_percentage??0,"%"]})]}),r.jsxs("td",{children:[C.toFixed(1),"%"]}),r.jsx("td",{children:q.toFixed(2)}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:L.pack_quantity,value:G,onChange:ce=>{const Y=(parseInt(ce.target.value,10)||0)*(L.unitsPerPack||0)+ie;I(H,Y,L)},className:"return-quantity-input"})}),r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:L.loose_quantity+L.pack_quantity*(L.unitsPerPack||0)-G*(L.unitsPerPack||0),value:ie,onChange:ce=>{const je=parseInt(ce.target.value,10)||0,Y=G*(L.unitsPerPack||0)+je;I(H,Y,L)},className:"return-quantity-input"})})]})]},H)})})]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",T.toFixed(2)]})}),r.jsxs("div",{className:"order-total-section no-print",children:[r.jsx("span",{className:"total-label",children:"Order Total:"}),r.jsxs("span",{className:"total-amount",children:["",T.toFixed(2)]})]}),r.jsxs("div",{className:"payment-section no-print",children:[r.jsxs("div",{className:"payment-mode-group",children:[r.jsx("label",{htmlFor:"paymentMode",children:"Payment Mode:"}),r.jsxs("select",{id:"paymentMode",value:S,onChange:L=>_(L.target.value),className:"payment-mode-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),b&&r.jsxs("div",{className:"qr-code-container",children:[r.jsx(La,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]})]}),(n.status==="dispensed"||n.status==="billed")&&n.medications.length>0&&r.jsxs("div",{className:"return-action-section no-print",children:[E>0&&r.jsxs("div",{className:"total-refund-display",children:["Total Refund: ",E.toFixed(2)]}),r.jsx("button",{onClick:F,disabled:Object.values(f).every(L=>L.pack===0&&L.loose===0)||c,className:"process-return-button",children:c?r.jsxs(r.Fragment,{children:[r.jsx(wE,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(wE,{size:16,className:"mr-2"})," Process Return"]})})]})]})})},_Ie=async()=>{const t=await se("/subscriptions");if(!t.ok)throw new Error("Failed to fetch subscription plans");return await t.json()},CIe=async t=>{const e=await se(`/subscriptions/${t}`);if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(n.message||"Failed to fetch subscription plan details")}return await e.json()},TIe=async t=>{const e=await se("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(n.message||"Failed to create subscription plan")}return await e.json()},kIe=async(t,e)=>{const n=await se(`/subscriptions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(a.message||"Failed to update subscription plan")}return await n.json()},AIe=async t=>{const e=await se(`/subscriptions/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(n.message||"Failed to deactivate subscription plan")}return await e.json()},EIe=async(t,e)=>{const n=await se("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:t,planId:e})});if(!n.ok){const a=await n.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(a.message||"Failed to initiate Razorpay subscription")}return await n.json()},PIe=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),d=v.useCallback(async()=>{i(!0),o(null);try{const p=await _Ie();n(p)}catch(p){o(p.message||"Failed to fetch subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await AIe(p),c({type:"success",message:"Plan deactivated successfully!"}),d()}catch(g){o(g.message||"Failed to deactivate plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ll,{size:18,className:"mr-2 text-green-500"}):r.jsx(ea,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx($t,{size:16})})]}),r.jsxs("div",{children:[" ",r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:16})}),r.jsx("h1",{children:"Manage Subscription Plans"}),r.jsxs("button",{onClick:()=>t("/dashboard/subscriptions/add"),className:"subscription-btn",children:[r.jsx(Gn,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(Z,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx($i,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(Vn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},OIe=()=>{const t=Lt(),[e,n]=v.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const d=g=>{const{name:x,value:b}=g.target;n(j=>({...j,[x]:b}))},f=async g=>{if(g.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await TIe(e),c({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ll,{size:18,className:"mr-2 text-green-500"}):r.jsx(ea,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx($t,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:d,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:d,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:d,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:d,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:d})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:r.jsx(on,{size:16})}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},DIe=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),d(!1);return}d(!0),p(null);try{const T=await CIe(t);a(T),s({name:T.name,description:T.description||"",price:T.price,period:T.period,interval:T.interval,razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{d(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:E}=T.target;s(k=>({...k,[C]:E}))},S=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await kIe(t,i),x({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const E=C.message||"Failed to update plan.";p(E),x({type:"error",message:E})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Ll,{size:18,className:"mr-2"}):r.jsx(ea,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx($t,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:S,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval||1,onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:r.jsx(on,{size:16})}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},MIe=()=>{const{patientId:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(""),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState("manual"),[b,j]=v.useState(!1),[S,_]=v.useState(null),T=v.useCallback(async()=>{d(!0),p(null);try{const k=await se(`/api/patients/${t}`);if(!k.ok){const B=await k.json();throw new Error(B.message||"Failed to fetch patient details")}const O=await k.json();a(O);const I=await se("/api/subscriptions");if(!I.ok){const B=await I.json();throw new Error(B.message||"Failed to fetch subscription plans")}const F=await I.json();s(F.filter(B=>B.status==="active"))}catch(k){console.error("Error fetching data:",k),p(`Failed to load data: ${k.message}`)}finally{d(!1)}},[t]);v.useEffect(()=>{t?T():(p("Patient ID is missing."),d(!1))},[t,T]);const C=(k,O)=>{const I=new Date(k),F=O.interval||1;switch(O.period){case"daily":I.setDate(k.getDate()+F);break;case"weekly":I.setDate(k.getDate()+F*7);break;case"monthly":I.setMonth(k.getMonth()+F);break;case"yearly":I.setFullYear(k.getFullYear()+F);break;default:console.warn(`Unknown subscription period: ${O.period}. Defaulting to 1 month.`),I.setMonth(k.getMonth()+1)}return I},E=async()=>{if(!t||!o){_("Please select a subscription plan.");return}const k=i.find(O=>O.id===o);if(!k){_("Selected plan details not found.");return}j(!0),_(null);try{const O=new Date,I=C(O,k);if(g==="manual"){const F={subscription_plan_id:o,subscription_status:"active",subscription_start_date:O.toISOString(),subscription_end_date:I.toISOString(),subscription_payment_method:"manual"},B=await se(`/api/patients/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!B.ok){const $=await B.json();throw new Error($.message||"Failed to start subscription manually")}e("/all-patients")}else if(g==="razorpay"){console.log("Initiating Razorpay subscription for plan:",k);const F=await EIe(t,o);if(F&&F.short_url)window.location.href=F.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch(O){console.error("Error starting subscription:",O),_(`Failed to start subscription: ${O.message}`),j(!1)}};return c?r.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):f?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:f})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(on,{size:16})})]}):n?r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(on,{size:16})}),r.jsxs("h1",{children:[r.jsx(Jn,{size:28})," ","Start Subscription for ",n.name]}),S&&r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",r.jsx("span",{children:S})]}),r.jsxs("div",{className:"subscription-form",children:[" ",r.jsx("h2",{children:"Available Subscription Plans"}),i.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:i.map(k=>r.jsxs("div",{className:`subscription-plan-card ${o===k.id?"selected-plan":""}`,onClick:()=>l(k.id),children:[r.jsx("h3",{children:k.name}),r.jsxs("p",{className:"price",children:["",k.price]}),r.jsxs("p",{className:"duration",children:["Every ",k.interval," ",k.period,k.interval>1?"s":""]}),k.description&&r.jsx("p",{children:k.description})]},k.id))})]}),r.jsxs("div",{className:"subscription-form mb-6",children:[" ",r.jsx("h2",{children:"Select Payment Method"}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:g==="manual",onChange:()=>x("manual"),className:"mr-2"}),r.jsx("span",{children:"Cash (Manual)"})]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:g==="razorpay",onChange:()=>x("razorpay"),className:"mr-2"}),r.jsx("span",{children:"Razorpay"})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:E,disabled:!o||b||i.length===0,className:"subscription-btn",children:[b&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),b?"Starting...":"Start Subscription"]})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Warning: "}),r.jsx("span",{children:"Patient not found."})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(on,{size:16})})]})},IIe=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null),d=v.useCallback(async()=>{i(!0),o(null);try{const p=await EM();n(p)}catch(p){o(p.message||"Failed to fetch clinic subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{i(!1)}},[]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){i(!0),o(null),c(null);try{await ZPe(p),c({type:"success",message:"Clinic plan deactivated successfully!"}),d()}catch(g){o(g.message||"Failed to deactivate clinic plan."),c({type:"error",message:g.message||"Failed to deactivate plan."})}finally{i(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ll,{size:18,className:"mr-2 text-green-500"}):r.jsx(ea,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx($t,{size:16})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(on,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),r.jsxs("button",{onClick:()=>t("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[r.jsx(Gn,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),a&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(Z,{width:80,height:32})})]},p))})]})}),!a&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/clinic-subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx($i,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:r.jsx(Vn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!a&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},RIe=()=>{const t=Lt(),[e,n]=v.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[a,i]=v.useState(!1),[s,o]=v.useState(null),[l,c]=v.useState(null);v.useEffect(()=>{if(l){const g=setTimeout(()=>c(null),5e3);return()=>clearTimeout(g)}},[l]);const d=g=>{const{name:x,value:b,type:j}=g.target;n(S=>({...S,[x]:j==="number"?parseFloat(b):b}))},f=async g=>{if(g.preventDefault(),i(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),i(!1);return}try{await XPe(e),c({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/clinic-subscriptions")},2e3)}catch(x){const b=x.message||"Failed to create clinic plan.";o(b),c({type:"error",message:b})}finally{i(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ll,{size:18,className:"mr-2 text-green-500"}):r.jsx(ea,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx($t,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Clinic Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:d,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:d,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:d,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:d,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:d})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:a,className:"subscription-btn",children:[a?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,a?"Creating...":"Create Plan"]})]})]})]})]})},LIe=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState({}),[o,l]=v.useState(!1),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(null),b=v.useCallback(async()=>{if(!t){p("Plan ID is missing."),d(!1);return}d(!0),p(null);try{const T=await QPe(t);a(T),s({name:T.name,description:T.description||"",price:Number(T.price),period:T.period,interval:Number(T.interval),razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch clinic plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{d(!1)}},[t]);v.useEffect(()=>{b()},[b]),v.useEffect(()=>{if(g){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[g]);const j=T=>{const{name:C,value:E,type:k}=T.target;s(O=>({...O,[C]:k==="number"?parseFloat(E):E}))},S=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!i.name||!i.price||!i.period||i.interval===void 0||i.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await JPe(t,i),x({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const E=C.message||"Failed to update clinic plan.";p(E),x({type:"error",message:E})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[g&&r.jsxs("div",{className:`${g.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[g.type==="success"?r.jsx(Ll,{size:18,className:"mr-2"}):r.jsx(ea,{size:18,className:"mr-2"}),r.jsx("span",{children:g.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx($t,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Clinic Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:S,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:j,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:i.description||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:i.price!==void 0?i.price:"",onChange:j,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:i.period||"monthly",onChange:j,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:i.interval!==void 0?i.interval:"",onChange:j,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:i.razorpay_plan_id||"",onChange:j})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:i.status||"active",onChange:j,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},FIe=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(""),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(null),x=v.useCallback(async()=>{c(null);try{const S=(await EM()).filter(_=>_.status==="active");n(S),S.length>0&&!a&&i(S[0].id)}catch(j){console.error("Error fetching plans:",j),c(`Failed to load subscription plans: ${j.message}`)}},[]);v.useEffect(()=>{(async()=>{o(!0);try{const S=await tOe();if(S&&S.short_url){window.location.href=S.short_url,c("You have a pending subscription. Redirecting to payment...");return}await x()}catch(S){console.error("Error during initial page load:",S),c(`An unexpected error occurred: ${S.message}`)}finally{o(!1)}})()},[x]);const b=async()=>{if(!a){g("Please select a clinic subscription plan.");return}const j=e.find(S=>S.id===a);if(!j){g("Selected plan details not found.");return}f(!0),g(null);try{console.log("Initiating Razorpay clinic subscription for plan:",j);const S=await eOe(a);if(S&&S.short_url)window.location.href=S.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(S){console.error("Error starting clinic subscription:",S),g(`Failed to start clinic subscription: ${S.message}`),f(!1)}};return s?r.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):l?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:l})]}),r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:16})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:16})}),r.jsxs("h1",{children:[r.jsx(RQ,{size:28}),"Buy Pro Plan for Clinic"]}),p&&r.jsx("div",{className:"error-alert-subscription",role:"alert",children:r.jsx("span",{children:p})}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h2",{children:"Available Pro Plans"}),e.length===0?r.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:e.map(j=>r.jsxs("div",{className:`subscription-plan-card ${a===j.id?"selected-plan":""}`,onClick:()=>i(j.id),children:[r.jsx("h3",{children:j.name}),r.jsxs("p",{className:"price",children:["",Number(j.price).toFixed(2)]}),r.jsxs("p",{className:"duration",children:["Every ",j.interval," ",j.period,j.interval>1?"s":""]}),j.description&&r.jsx("p",{children:j.description})]},j.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:b,disabled:!a||d||e.length===0,className:"subscription-btn",children:[d&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),d?"Initiating Payment...":"Buy Pro Plan"]})})]})},$Ie=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(!0),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(null),[j,S]=v.useState({name:"",email:"",password:"",role:"user"}),[_,T]=v.useState({name:"",email:"",role:"",password:"",confirmPassword:""}),[C,E]=v.useState(""),[k,O]=v.useState(""),[I,F]=v.useState({}),[B,$]=v.useState(!1),[L,V]=v.useState(null),[H,ne]=v.useState([]),[Q,q]=v.useState(""),[G,ie]=v.useState(!1),[W,z]=v.useState(null);v.useEffect(()=>{const Ae=setTimeout(()=>{O(C)},500);return()=>{clearTimeout(Ae)}},[C]),v.useEffect(()=>{ce(k)},[k]);const ce=async(Ae="")=>{i(!0);try{const me=Ae?`/api/users?search=${encodeURIComponent(Ae)}`:"/api/users",le=await(await se(me)).json();if(n(le),le.length>0){const X=[...new Set(le.map(de=>de.clinic_id).filter(de=>!!de))],ae={};await Promise.all(X.map(async de=>{try{const ee=await KPe(de);ae[de]=ee}catch(ee){console.error(`Failed to fetch subscription status for clinic ${de}`,ee),ae[de]={hasProPlan:!1}}})),F(ae)}c(null)}catch(me){c("Failed to fetch users."),console.error(me)}finally{i(!1),o(!1)}},je=async Ae=>{Ae.preventDefault();try{await se("/users",{method:"POST",body:JSON.stringify(j)}),f(!1),S({name:"",email:"",password:"",role:"user"}),ce()}catch(me){c("Failed to add user."),console.error(me)}},Y=async Ae=>{if(Ae.preventDefault(),!x)return;const{password:me,confirmPassword:ye,...le}=_,X={...le};if(me){if(me.length<6){c("Password must be at least 6 characters long.");return}if(me!==ye){c("Passwords do not match.");return}X.password=me}try{await se(`/users/${x.id}`,{method:"PUT",body:JSON.stringify(X)}),g(!1),b(null),T({..._,password:"",confirmPassword:""}),ce()}catch(ae){c("Failed to update user."),console.error(ae)}},Ie=async Ae=>{if(window.confirm("Are you sure you want to delete this user?"))try{await se(`/users/${Ae}`,{method:"DELETE"}),ce()}catch(me){c("Failed to delete user."),console.error(me)}},Ue=Ae=>{b(Ae),T({name:Ae.name,email:Ae.email,role:Ae.role,password:"",confirmPassword:""}),g(!0)},ze=async()=>{ie(!0);try{const Ae=await EM();ne(Ae),Ae.length>0&&q(Ae[0].id),z(null)}catch(Ae){z("Failed to fetch subscription plans."),console.error(Ae)}finally{ie(!1)}},Le=Ae=>{V(Ae),$(!0),ze()},be=async Ae=>{if(Ae.preventDefault(),!L||!Q){c("Please select a clinic and a plan.");return}try{await se("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:L,planId:Q})}),$(!1),V(null),q(""),ce(),c(null)}catch(me){c("Failed to manually activate clinic subscription."),console.error(me)}},Ce=async Ae=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await YPe(Ae),ce(),c(null)}catch(me){c("Failed to cancel subscription."),console.error(me)}};return a&&s?r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("div",{className:"back-button",style:{width:80,height:32},children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx(Z,{width:"100%",height:40,style:{maxWidth:"300px"}}),r.jsx(Z,{width:150,height:40})]}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(Ae=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},Ae))})]})]}):l&&s?r.jsx("div",{className:"error-message",children:l}):r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{className:"w-4 h-4"})}),r.jsx("h1",{children:"User Management"})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:C,onChange:Ae=>E(Ae.target.value),className:"search-input"}),r.jsx("button",{onClick:()=>f(!0),className:"add-user-button",children:"Add New User"})]}),d&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>f(!1),children:""}),r.jsx("h2",{children:"Add New User"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:j.name,onChange:Ae=>S({...j,name:Ae.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:j.email,onChange:Ae=>S({...j,email:Ae.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",value:j.password,onChange:Ae=>S({...j,password:Ae.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:j.role,onChange:Ae=>S({...j,role:Ae.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Add User"})]})]})}),p&&x&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>g(!1),children:""}),r.jsx("h2",{children:"Edit User"}),r.jsxs("form",{onSubmit:Y,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:_.name,onChange:Ae=>T({..._,name:Ae.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:_.email,onChange:Ae=>T({..._,email:Ae.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:_.role,onChange:Ae=>T({..._,role:Ae.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"New Password (optional):"}),r.jsx("input",{type:"password",value:_.password,onChange:Ae=>T({..._,password:Ae.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm New Password:"}),r.jsx("input",{type:"password",value:_.confirmPassword,onChange:Ae=>T({..._,confirmPassword:Ae.target.value})})]}),r.jsx("button",{type:"submit",children:"Update User"})]})]})}),B&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>$(!1),children:""}),r.jsx("h2",{children:"Select Subscription Plan for Clinic"}),G&&r.jsx("div",{children:"Loading plans..."}),W&&r.jsx("div",{className:"error-message",children:W}),!G&&!W&&H.length===0&&r.jsx("div",{children:"No active subscription plans available."}),!G&&!W&&H.length>0&&r.jsxs("form",{onSubmit:be,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Plan:"}),r.jsx("select",{value:Q,onChange:Ae=>q(Ae.target.value),required:!0,children:H.map(Ae=>r.jsxs("option",{value:Ae.id,children:[Ae.name," - $",Ae.price,"/",Ae.interval," ",Ae.period]},Ae.id))})]}),r.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(Ae=>{const me=Ae.clinic_id||"N/A",ye=me!=="N/A"?I[me]:null,le=(ye==null?void 0:ye.hasProPlan)??!1,X=le?"PRO":"Standard";return r.jsxs("tr",{children:[r.jsx("td",{children:Ae.name}),r.jsx("td",{children:Ae.email}),r.jsx("td",{children:Ae.role}),r.jsx("td",{children:me}),r.jsx("td",{children:me!=="N/A"?r.jsx("span",{className:le?"pro-badge":"standard-badge",children:X}):"N/A"}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>Ue(Ae),className:"edit-button",children:"Edit"}),r.jsx("button",{onClick:()=>Ie(Ae.id),className:"delete-button",children:"Delete"}),Ae.clinic_id&&!le&&r.jsx("button",{onClick:()=>Le(Ae.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),Ae.clinic_id&&le&&r.jsx("button",{onClick:()=>Ce(Ae.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},Ae.id)})})]})]})},BIe="_modalOverlay_1spz3_3",zIe="_modalContent_1spz3_29",qIe="_modalHeader_1spz3_53",UIe="_modalTitle_1spz3_71",VIe="_modalCloseButton_1spz3_83",HIe="_modalBody_1spz3_111",GIe="_formGroup_1spz3_119",WIe="_inputField_1spz3_141",YIe="_errorText_1spz3_175",KIe="_successText_1spz3_193",QIe="_modalFooter_1spz3_211",XIe="_button_1spz3_227",JIe="_buttonPrimary_1spz3_247",ZIe="_buttonSecondary_1spz3_265",Ei={modalOverlay:BIe,modalContent:zIe,modalHeader:qIe,modalTitle:UIe,modalCloseButton:VIe,modalBody:HIe,formGroup:GIe,inputField:WIe,errorText:YIe,successText:KIe,modalFooter:QIe,button:XIe,buttonPrimary:JIe,buttonSecondary:ZIe},eRe=({isOpen:t,onClose:e})=>{const[n,a]=v.useState(""),[i,s]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState(null);Yc(void 0,t?200:99999),v.useEffect(()=>{t&&g()},[t]);const g=async()=>{s(!0),d(null);try{const b=await se("/api/global-settings/app_gemini_api_key");if(b.ok){const j=await b.json();a(j.value||"")}else b.status}catch(b){console.warn("Could not fetch existing key:",b)}finally{s(!1)}},x=async()=>{l(!0),d(null),p(null);try{if(!(await se("/api/global-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"app_gemini_api_key",value:n})})).ok)throw new Error("Failed to save API Key");p("API Key updated successfully!"),setTimeout(()=>{e(),p(null)},1500)}catch(b){d(b.message||"Error saving key")}finally{l(!1)}};return t?r.jsx("div",{className:Ei.modalOverlay,children:r.jsxs("div",{className:Ei.modalContent,children:[r.jsxs("div",{className:Ei.modalHeader,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(qz,{size:24}),r.jsx("h3",{className:Ei.modalTitle,children:"App Gemini API Key"})]}),r.jsx("button",{onClick:e,className:Ei.modalCloseButton,children:r.jsx($t,{size:20})})]}),r.jsxs("div",{className:Ei.modalBody,children:[c&&r.jsx("div",{className:Ei.errorText,children:c}),f&&r.jsx("div",{className:Ei.successText,children:f}),r.jsxs("div",{className:Ei.formGroup,children:[r.jsx("label",{htmlFor:"gemini-key",children:"Gemini API Key"}),i?r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}}):r.jsx("input",{type:"text",id:"gemini-key",value:n,onChange:b=>a(b.target.value),className:Ei.inputField,placeholder:"Enter Gemini API Key (AIza...)",disabled:o})]}),r.jsx("p",{style:{fontSize:"0.9em",color:"var(--secondary-text-color, #666)"},children:"This key will be used as a fallback for all clinics if their specific Gemini API key is not configured."})]}),r.jsxs("div",{className:Ei.modalFooter,children:[r.jsx("button",{onClick:e,className:`${Ei.button} ${Ei.buttonSecondary}`,disabled:o,children:"Cancel"}),r.jsx("button",{onClick:x,className:`${Ei.button} ${Ei.buttonPrimary}`,disabled:o,children:o?"Saving...":"Save Key"})]})]})}):null},tRe=()=>{const[t,e]=v.useState(!1);return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("h1",{className:"admin-panel-title",children:[r.jsx(dd,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),r.jsxs("div",{className:"admin-panel-grid",children:[r.jsxs(_r,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[r.jsx(cd,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Clinic Subscription Plans"}),r.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),r.jsxs(_r,{to:"/dashboard/users",className:"admin-panel-card",children:[r.jsx(Os,{size:48,className:"card-icon"}),r.jsx("h2",{children:"User Management"}),r.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]}),r.jsxs("div",{className:"admin-panel-card",onClick:()=>e(!0),style:{cursor:"pointer"},children:[r.jsx(qz,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage App Gemini API Key"}),r.jsx("p",{children:"Update the fallback Gemini API key used by the application."})]})]}),r.jsx(eRe,{isOpen:t,onClose:()=>e(!1)})]})},HA="tutorialCurrentStep",nRe=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,d;n(!0);try{const f=await se("/api/drugs/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){i(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((d=p.details)==null?void 0:d.updated)||0,b=`Added: ${g}, Updated: ${x}`;o(b),t(!0,"Default medications imported successfully!","pharmacyImport")}else t(!1,"Failed to import medications.")}catch{t(!1,"Error importing medications.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"One click to populate your inventory."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lo,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(Ic,{size:18,className:"animate-spin"})," Importing ~80 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(dw,{size:18})," Import Drugs"]})})]})},rRe=({onActionComplete:t})=>{const[e,n]=v.useState(!1),[a,i]=v.useState(!1),[s,o]=v.useState(null),l=async()=>{var c,d;n(!0);try{const f=await se("/api/lab-tests/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){i(!0);const g=((c=p.details)==null?void 0:c.added)||0,x=((d=p.details)==null?void 0:d.updated)||0,b=`Added: ${g}, Updated: ${x}`;o(b),t(!0,"Default lab tests imported successfully!","labImport")}else t(!1,"Failed to import lab tests.")}catch{t(!1,"Error importing lab tests.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Setup your lab with common tests."}),a?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lo,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(Ic,{size:18,className:"animate-spin"})," Importing ~25 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ls,{size:18})," Import Tests"]})})]})},aRe=({onOpenCommandBar:t})=>r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Ready to experience the power? Open the command bar to start."}),r.jsx("button",{onClick:t,className:"tutorial-button primary large-button",children:r.jsxs("div",{className:"flex items-center gap-2",children:["Open Command Bar ",r.jsx("span",{className:"shortcut-hint-badge",children:"Ctrl+K"})]})})]}),GA=[{title:"Welcome to Newtons Ai HMS",description:"Your all-in-one clinic management solution. Let's get your clinic ready in less than 2 minutes.",icon:r.jsx(fw,{size:48,className:"step-icon welcome"}),component:null,actionText:"Get Started"},{title:"Pharmacy Setup",description:"Start by populating your pharmacy. We can import a standard list of medicines for you.",icon:r.jsx(dw,{size:48,className:"step-icon pharmacy"}),component:nRe,actionText:"Next",showSkip:!0},{title:"Lab Configuration",description:"Next, let's set up your lab. Import common lab tests to start generating reports immediately.",icon:r.jsx(ls,{size:48,className:"step-icon lab"}),component:rRe,actionText:"Next",showSkip:!0},{title:"Power at Your Fingertips",description:"The Command Bar is your central hub for everything. Search patients, add orders, or use AI tools instantly.",icon:r.jsx(PQ,{size:48,className:"step-icon ai"}),component:aRe,actionText:null,isLast:!0}],iRe=({onClose:t,onMarkAsSeen:e})=>{const{openCommandBar:n}=Dc(),[a,i]=v.useState(()=>{const S=localStorage.getItem(HA);return S?parseInt(S,10):0}),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(null);v.useEffect(()=>{localStorage.setItem(HA,a.toString()),c(null)},[a]);const p=()=>{o(!0),setTimeout(()=>{i(S=>Math.min(S+1,GA.length-1)),o(!1)},300)},g=(S,_,T)=>{f(S),c(_),S&&(T==="pharmacyImport"||T==="labImport")&&setTimeout(p,1e3)},x=()=>{e(),t(),localStorage.removeItem(HA)},b=()=>{x(),setTimeout(()=>{n()},100)},j=GA[a];return r.jsx("div",{className:"tutorial-overlay",children:r.jsxs("div",{className:`tutorial-card ${s?"fade-out":"fade-in"}`,children:[r.jsxs("div",{className:"tutorial-visual",children:[r.jsx("div",{className:"icon-circle",children:j.icon}),r.jsx("div",{className:"step-indicators",children:GA.map((S,_)=>r.jsx("div",{className:`step-dot ${_===a?"active":""} ${_<a?"completed":""}`},_))})]}),r.jsxs("div",{className:"tutorial-content",children:[r.jsx("button",{className:"close-button",onClick:x,title:"Close Tutorial",children:r.jsx($t,{size:20})}),r.jsxs("div",{className:"text-content",children:[r.jsx("h2",{children:j.title}),r.jsx("p",{className:"description",children:j.description})]}),r.jsxs("div",{className:"interactive-area",children:[j.component?r.jsx(j.component,{onActionComplete:g,onOpenCommandBar:b}):null,l&&r.jsx("div",{className:`status-message ${d?"success":"error"}`,children:l})]}),r.jsxs("div",{className:"action-footer",children:[j.showSkip&&r.jsx("button",{onClick:p,className:"tutorial-button text-only",children:"Skip for now"}),j.actionText&&r.jsxs("button",{onClick:p,className:"tutorial-button primary",children:[j.actionText," ",r.jsx(pd,{size:16})]})]})]})]})})},sRe=({isOpen:t,onClose:e,onSuccess:n,medication:a,initialPatient:i,initialItems:s})=>{const[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState(null),[g,x]=v.useState(!1);Yc(void 0,t?200:99999),v.useEffect(()=>{if(t&&a){j([{id:Date.now(),medication_name:a.medicationName,drug_id:null,quantity:a.quantity,tablets_per_day:a.tabletsPerDay||1,number_of_days:a.numberOfDays||30,directions:a.directions||"",notes:a.notes||""}]),_(a.frequencyDays);try{const Le=new Date(a.nextDeliveryDate);isNaN(Le.getTime())||C(Le.toISOString().split("T")[0])}catch(Le){console.error("Error parsing date",Le)}p({id:a.patientId,name:a.patientName,phone:a.patientPhone,patient_token_number:a.patientToken})}else t&&(i||s)?(s&&s.length>0&&j(s),i&&p(i)):t&&!a&&!s&&(j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30),C(""),p(null),l(""))},[t,a,i,s]);const[b,j]=v.useState([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),[S,_]=v.useState(30),[T,C]=v.useState(""),[E,k]=v.useState(null),[O,I]=v.useState(""),[F,B]=v.useState([]),[$,L]=v.useState(!1),[V,H]=v.useState(!1),[ne,Q]=v.useState(null),q=v.useRef(null),G=v.useRef(null);v.useEffect(()=>{if(t){const Le=new Date;Le.setDate(Le.getDate()+30),C(Le.toISOString().split("T")[0])}},[t]);const ie=v.useCallback(async Le=>{if(!Le.trim()){d([]);return}x(!0);try{const be=await se(`/api/patients?search=${encodeURIComponent(Le)}&limit=10`);if(be.ok){const Ce=await be.json();d(Ce.patients||[])}}catch(be){console.error("Error searching patients:",be)}finally{x(!1)}},[]);v.useEffect(()=>{q.current&&clearTimeout(q.current),o&&!f?q.current=setTimeout(()=>ie(o),300):d([])},[o,f,ie]);const W=v.useCallback(async Le=>{if(!Le.trim()){B([]);return}L(!0);try{const be=await se(`/api/drugs?search=${encodeURIComponent(Le)}&limit=10`);if(be.ok){const Ce=await be.json();B(Ce.drugs||[])}}catch(be){console.error("Error searching drugs:",be)}finally{L(!1)}},[]);v.useEffect(()=>{G.current&&clearTimeout(G.current),O&&E!==null?G.current=setTimeout(()=>W(O),300):B([])},[O,E,W]);const z=Le=>{if(!Le)return 1;const be=Le.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return be?parseInt(be[1],10):1},ce=Le=>{p(Le),l(`${Le.name} (${Le.patient_token_number})`),d([])},je=(Le,be)=>{const Ce=[...b];Ce[be]={...Ce[be],medication_name:Le.name,drug_id:Le.id,pack_size:z(Le.pack),packs:0,loose:0,quantity:0},j(Ce),k(null),I(""),B([])},Y=(Le,be,Ce)=>{const Ae=[...b],me={...Ae[Le]},ye=me.pack_size||1;if(be==="packs"||be==="loose"){const le=parseInt(Ce)||0;be==="packs"&&(me.packs=le),be==="loose"&&(me.loose=le);const X=me.packs||0,ae=me.loose||0;me.quantity=X*ye+ae}else if(be==="tablets_per_day"||be==="number_of_days"){be==="tablets_per_day"&&(me.tablets_per_day=Ce),be==="number_of_days"&&(me.number_of_days=Ce);const le=parseFloat(me.tablets_per_day.toString())||0,X=parseInt(me.number_of_days.toString())||0,ae=Math.ceil(le*X);me.quantity=ae,me.packs=Math.floor(ae/ye),me.loose=ae%ye}else me[be]=Ce;Ae[Le]=me,j(Ae)},Ie=()=>{j([...b,{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:S,directions:"",notes:"",packs:0,loose:0,pack_size:1}])},Ue=Le=>{b.length>1&&j(b.filter((be,Ce)=>Ce!==Le))},ze=async Le=>{if(Le.preventDefault(),Q(null),!f){Q("Please select a patient.");return}if(b.some(Ce=>!Ce.medication_name||Ce.quantity<=0)){Q("Please ensure all items have a medication name and valid quantity.");return}H(!0);try{const Ce={patient_id:f.id,items:b.map(me=>({medication_name:me.medication_name,drug_id:me.drug_id,quantity:me.quantity,tablets_per_day:me.tablets_per_day,number_of_days:me.number_of_days,directions:me.directions,notes:me.notes,frequency_days:S,next_delivery_date:T}))},Ae=await se("/api/recurring-medications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ce)});if(!Ae.ok){const me=await Ae.json();throw new Error(me.message+(me.error?": "+me.error:"")||"Failed to create recurring medication.")}n(),e(),p(null),l(""),j([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30)}catch(Ce){Q(Ce.message)}finally{H(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"add-recurring-modal",style:{maxWidth:"800px",width:"95%"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Add Recurring Medication Order"}),r.jsx("button",{className:"close-btn",onClick:e,children:r.jsx($t,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[ne&&r.jsx("div",{className:"error-message",children:ne}),r.jsxs("form",{onSubmit:ze,className:"recurring-form",children:[r.jsxs("div",{className:"order-settings-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsxs("label",{children:[r.jsx(Jn,{size:16})," Patient"]}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patient...",value:o,onChange:Le=>{l(Le.target.value),p(null)},className:f?"selected":"unselected"}),g&&r.jsx("span",{className:"spinner",children:"..."}),o&&!f&&c.length>0&&r.jsx("ul",{className:"suggestions-list",children:c.map(Le=>r.jsxs("li",{onClick:()=>ce(Le),children:[r.jsx("div",{className:"suggestion-name",children:Le.name}),r.jsxs("div",{className:"suggestion-details",children:[Le.phone,"  ",Le.patient_token_number]})]},Le.id))})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(Tb,{size:16})," Frequency"]}),r.jsxs("select",{value:S,onChange:Le=>{const be=parseInt(Le.target.value);_(be);const Ce=new Date;Ce.setDate(Ce.getDate()+be),C(Ce.toISOString().split("T")[0]);const Ae=b.map(me=>({...me,number_of_days:be}));j(Ae)},children:[r.jsx("option",{value:15,children:"Every 15 Days"}),r.jsx("option",{value:30,children:"Every 30 Days"}),r.jsx("option",{value:60,children:"Every 60 Days"}),r.jsx("option",{value:90,children:"Every 90 Days"})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(ua,{size:16})," Next Delivery"]}),r.jsx("input",{type:"date",value:T,onChange:Le=>C(Le.target.value)})]})]}),r.jsx("hr",{className:"divider"}),r.jsxs("div",{className:"items-header",children:[r.jsx("h4",{children:"Medications"}),r.jsxs("button",{type:"button",className:"add-item-btn",onClick:Ie,children:[r.jsx(Gn,{size:14})," Add Drug"]})]}),r.jsx("div",{className:"items-list",children:b.map((Le,be)=>r.jsxs("div",{className:"medication-item-row",children:[r.jsxs("div",{className:"row-top",children:[r.jsxs("div",{className:"form-group med-search-group",children:[r.jsx("label",{children:"Drug Name"}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search drug...",value:E===be?O:Le.medication_name,onFocus:()=>{k(be),I(Le.medication_name)},onChange:Ce=>{I(Ce.target.value),Y(be,"medication_name",Ce.target.value)}}),E===be&&$&&r.jsx("span",{className:"spinner",children:"..."}),E===be&&O&&F.length>0&&r.jsx("ul",{className:"suggestions-list",children:F.map(Ce=>r.jsxs("li",{onClick:()=>je(Ce,be),children:[r.jsx("div",{className:"suggestion-name",children:Ce.name}),r.jsxs("div",{className:"suggestion-details",children:["Stock: ",Ce.stock]})]},Ce.id))})]})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Tabs/Day"}),r.jsx("input",{type:"number",min:"0.5",step:"0.5",value:Le.tablets_per_day,onChange:Ce=>Y(be,"tablets_per_day",Ce.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Days"}),r.jsx("input",{type:"number",min:"1",value:Le.number_of_days,onChange:Ce=>Y(be,"number_of_days",Ce.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Packs"}),r.jsx("input",{type:"number",min:"0",value:Le.packs||"",onChange:Ce=>Y(be,"packs",Ce.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Loose"}),r.jsx("input",{type:"number",min:"0",value:Le.loose||"",onChange:Ce=>Y(be,"loose",Ce.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Total"}),r.jsx("input",{type:"number",value:Le.quantity,disabled:!0,style:{backgroundColor:"#f5f5f5",cursor:"not-allowed"}})]}),r.jsx("button",{type:"button",className:"remove-btn",onClick:()=>Ue(be),disabled:b.length===1,children:r.jsx(Vn,{size:16})})]}),r.jsxs("div",{className:"row-bottom",children:[r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Directions (e.g. 1-0-1 after food)",value:Le.directions,onChange:Ce=>Y(be,"directions",Ce.target.value)})}),r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Notes",value:Le.notes,onChange:Ce=>Y(be,"notes",Ce.target.value)})})]})]},Le.id))}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-submit",disabled:V,children:V?"Creating...":"Create Recurring Order"})]})]})]})]})}):null},oRe=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(""),[c,d]=v.useState(1),[f,p]=v.useState(1),[g,x]=v.useState(0),[b,j]=v.useState(!1),[S,_]=v.useState(void 0),T=10,C=v.useRef(null);Yc();const E=v.useCallback(async(L,V)=>{a(!0),s(null);try{let H=`/api/recurring-medications?page=${L}&limit=${T}`;V&&(H+=`&search=${encodeURIComponent(V)}`);const ne=await se(H);if(!ne.ok)throw new Error("Failed to fetch recurring medications.");const Q=await ne.json();e(Q.medications),p(Q.totalPages),x(Q.total),d(Q.page)}catch(H){console.error(H),s(H.message||"An error occurred while fetching data.")}finally{a(!1)}},[]);v.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{E(c,o)},500),()=>{C.current&&clearTimeout(C.current)}),[o,c,E]);const k=L=>{l(L.target.value),d(1)},O=L=>{L>=1&&L<=f&&d(L)},I=L=>{_(L),j(!0)},F=()=>{E(c,o),j(!1),_(void 0)},B=L=>L===30?"Every 30 Days (Monthly)":L===15?"Every 15 Days":`Every ${L} Days`,$=L=>{switch(L){case"active":return"status-pill status-pill-active";case"paused":return"status-pill status-pill-paused";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill"}};return r.jsxs("div",{className:"refill-reminders-container",children:[r.jsxs("div",{className:"refill-header",children:[r.jsx("h3",{className:"refill-title",children:"Recurring Medications"}),r.jsxs("div",{className:"refill-actions",children:[r.jsxs("button",{className:"refill-action-button btn-add",onClick:()=>{_(void 0),j(!0)},children:[r.jsx(Ps,{size:16})," Add New"]}),r.jsxs("div",{className:"search-box",children:[r.jsx("input",{type:"text",placeholder:"Search patient, phone, medication...",value:o,onChange:k}),r.jsx(Fn,{size:18,className:"search-icon"})]})]})]}),i&&r.jsx("div",{className:"error-message-box",children:i}),r.jsx("div",{className:"refill-table-container",children:n?r.jsx("div",{className:"loading-pulse",children:"Loading..."}):t.length===0?r.jsx("div",{className:"empty-state",children:"No recurring medications found."}):r.jsx("div",{className:"refill-grouped-list",children:Object.values(t.reduce((L,V)=>{const H=V.patientId;return L[H]||(L[H]={patientId:V.patientId,patientName:V.patientName,patientPhone:V.patientPhone,patientToken:V.patientToken,medications:[]}),L[H].medications.push(V),L},{})).map(L=>r.jsxs("div",{className:"patient-medication-group-card",children:[r.jsxs("div",{className:"group-header",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("h4",{className:"patient-name",children:L.patientName}),r.jsxs("span",{className:"patient-meta",children:["Token: ",L.patientToken,"  Phone: ",L.patientPhone]})]}),r.jsx("div",{className:"group-actions"})]}),r.jsxs("table",{className:"refill-table group-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Medication"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Frequency"}),r.jsx("th",{children:"Next Delivery"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:L.medications.map(V=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"med-name",children:V.medicationName}),(V.tabletsPerDay||V.numberOfDays||V.directions)&&r.jsxs("div",{className:"med-usage-details",style:{fontSize:"0.8em",color:"#666"},children:[V.tabletsPerDay&&r.jsxs("span",{children:[V.tabletsPerDay," tabs/day  "]}),V.numberOfDays&&r.jsxs("span",{children:[V.numberOfDays," days "]})]}),V.notes&&r.jsxs("div",{className:"med-notes",children:["Note: ",V.notes]})]}),r.jsx("td",{children:V.quantity}),r.jsx("td",{children:r.jsx("span",{className:"frequency-badge",children:B(V.frequencyDays)})}),r.jsx("td",{children:r.jsx("div",{className:"date-display",children:new Date(V.nextDeliveryDate).toLocaleDateString()})}),r.jsx("td",{children:r.jsx("span",{className:$(V.status),children:V.status})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",title:"Edit",onClick:()=>I(V),children:r.jsx($i,{size:16})}),r.jsx("button",{className:"action-btn delete",title:"Delete/Cancel",children:r.jsx(Vn,{size:16})})]})})]},V.id))})]})]},L.patientId))})}),!n&&f>1&&r.jsxs("div",{className:"pagination-container",children:[r.jsxs("span",{className:"pagination-info",children:["Page ",c," of ",f," (Total ",g,")"]}),r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("button",{onClick:()=>O(c-1),disabled:c===1,className:"page-btn",children:[r.jsx(Cb,{size:16})," Prev"]}),r.jsxs("button",{onClick:()=>O(c+1),disabled:c===f,className:"page-btn",children:["Next ",r.jsx(pd,{size:16})]})]})]}),r.jsx(sRe,{isOpen:b,onClose:()=>{j(!1),_(void 0)},onSuccess:F,medication:S})]})},lRe=()=>{const t=Lt(),e=$r();return v.useEffect(()=>{const n=new URLSearchParams(e.search),a=n.get("token"),i=n.get("caseDetails");a?(async()=>{try{const o=await se(`/api/patients?search=${a}&limit=1`);if(!o.ok)throw new Error("Failed to fetch patient by token");const c=(await o.json()).patients[0];if(!c)throw new Error("Patient with the given token not found");const d=await se(`/api/queue/patient/${c.id}/latest`);if(d.ok){const g=await d.json();if(g!=null&&g._id){t(`/dashboard/edit-complaint/${g._id}`,{state:{initialComplaint:i}});return}}const f=await se("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:c.id,complaint:i})});if(!f.ok)throw new Error("Failed to create queue entry");const p=await f.json();if(p!=null&&p.id)t(`/dashboard/edit-complaint/${p.id}`,{state:{initialComplaint:i}});else throw new Error("Failed to get ID from new queue entry.")}catch(o){console.error("Error handling complaint URL:",o),t("/dashboard/search-patient")}})():t("/dashboard/search-patient")},[e,t]),r.jsx("div",{children:"Loading..."})},MB=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[s,o]=v.useState(null),[l,c]=v.useState(!1),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState(!1),[_,T]=v.useState(!1),[C,E]=v.useState(null),[k,O]=v.useState([]),[I,F]=v.useState(null),[B,$]=v.useState(""),[L,V]=v.useState(""),[H,ne]=v.useState(""),[Q,q]=v.useState(""),[G,ie]=v.useState(""),[W,z]=v.useState(""),[ce,je]=v.useState(""),[Y,Ie]=v.useState(""),[Ue,ze]=v.useState(""),[Le,be]=v.useState(""),[Ce,Ae]=v.useState(""),[me,ye]=v.useState("cash"),le=v.useCallback(async()=>{i(!0),o(null);try{const fe=await se("/api/distributors");if(!fe.ok)throw new Error(`Failed to fetch distributors: ${fe.statusText}`);const Ee=await fe.json();n(Ee)}catch(fe){console.error("Failed to fetch distributors:",fe),o(fe.message||"Failed to load distributors.")}finally{i(!1)}},[]);v.useEffect(()=>{le()},[le]);const X=async fe=>{fe.preventDefault(),o(null);try{const Ee=await se("/api/distributors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,contact_person:L,phone:H,email:Q,address:G,gst_number:W,drug_license_number:ce})});if(!Ee.ok){const Ke=await Ee.json();throw new Error(Ke.message||"Failed to add distributor.")}Fe(),le()}catch(Ee){console.error("Error adding distributor:",Ee),o(Ee.message||"Failed to add distributor.")}},ae=async fe=>{if(fe.preventDefault(),o(null),!!C)try{const Ee=await se(`/api/distributors/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,contact_person:L,phone:H,email:Q,address:G,gst_number:W,drug_license_number:ce})});if(!Ee.ok){const Ke=await Ee.json();throw new Error(Ke.message||"Failed to update distributor.")}te(),le()}catch(Ee){console.error("Error updating distributor:",Ee),o(Ee.message||"Failed to update distributor.")}},de=async()=>{if(o(null),!!C)try{const fe=await se(`/api/distributors/${C.id}`,{method:"DELETE"});if(!fe.ok){const Ee=await fe.json();throw new Error(Ee.message||"Failed to delete distributor.")}_e(),le()}catch(fe){console.error("Error deleting distributor:",fe),o(fe.message||"Failed to delete distributor.")}},ee=v.useCallback(async fe=>{o(null);try{const Ee=await se(`/api/distributors/${fe}/payments`);if(!Ee.ok)throw new Error(`Failed to fetch payments: ${Ee.statusText}`);const $e=(await Ee.json()).map(wt=>({...wt,order_value:parseFloat(wt.order_value),amount_paid:parseFloat(wt.amount_paid),balance_remaining:parseFloat(wt.balance_remaining)}));O($e);const We=await se(`/api/distributors/${fe}/balance`);if(!We.ok)throw new Error(`Failed to fetch balance: ${We.statusText}`);const it=await We.json();F({totalOrderValue:parseFloat(it.totalOrderValue),totalAmountPaid:parseFloat(it.totalAmountPaid),remainingBalance:parseFloat(it.remainingBalance)})}catch(Ee){console.error("Error fetching payments/balance:",Ee),o(Ee.message||"Failed to load payments or balance.")}},[]),Ne=async fe=>{if(fe.preventDefault(),o(null),!!C)try{const Ee=await se(`/api/distributors/${C.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:Y,order_value:parseFloat(Ue||"0"),amount_paid:parseFloat(Le||"0"),notes:Ce,payment_mode:me})});if(!Ee.ok){const Ke=await Ee.json();throw new Error(Ke.message||"Failed to add payment.")}T(!1),await ee(C.id),S(!0),window.confirm("Payment Recorded. Print Receipt?")&&setTimeout(()=>window.print(),500)}catch(Ee){console.error("Error adding payment:",Ee),o(Ee.message||"Failed to add payment.")}},Te=()=>{$(""),V(""),ne(""),q(""),ie(""),z(""),je(""),o(null),f(!0)},Fe=()=>{f(!1)},xe=fe=>{E(fe),$(fe.name),V(fe.contact_person||""),ne(fe.phone||""),q(fe.email||""),ie(fe.address||""),z(fe.gst_number||""),je(fe.drug_license_number||""),o(null),g(!0)},te=()=>{g(!1),E(null)},oe=fe=>{E(fe),o(null),b(!0)},_e=()=>{b(!1),E(null)},Oe=fe=>{E(fe),ee(fe.id),o(null),S(!0)},K=()=>{S(!1),E(null),O([]),F(null)},ge=fe=>{E(fe),Ie(new Date().toISOString().split("T")[0]),ze("0"),be("0"),Ae(""),ye("cash"),o(null),T(!0)},ue=()=>{T(!1),E(null)};return a?r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",style:{marginBottom:"20px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{width:80,height:36}),r.jsx(Z,{width:200,height:32})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx(Z,{width:150,height:36}),r.jsx(Z,{width:150,height:36}),r.jsx(Z,{width:180,height:36})]})]}),r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Contact Person"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(fe=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:30})})]},fe))})]})})]}):s?r.jsxs("div",{className:"error-indicator",children:["Error: ",s]}):r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("button",{onClick:()=>t(-1),className:"dmp-button dmp-button-secondary",title:"Go Back",children:[r.jsx(on,{size:20})," Back"]}),r.jsx("h2",{children:"Distributor Management"})]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("div",{className:"view-mode-toggle",style:{display:"flex",gap:"8px"},children:[r.jsxs("button",{onClick:()=>c(!1),className:`dmp-button ${l?"dmp-button-secondary":"dmp-button-primary"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>c(!0),className:`dmp-button ${l?"dmp-button-primary":"dmp-button-secondary"}`,title:"Excel Mode (Edit)",children:[r.jsx(xf,{size:18})," Excel"]})]}),r.jsxs("button",{onClick:Te,className:"dmp-button dmp-button-primary",children:[r.jsx(Ps,{size:18}),"Add Distributor"]})]})]}),(()=>{const fe=e.reduce((Ke,$e)=>Ke+parseFloat($e.remainingBalance||"0"),0),Ee=fe>=0;return r.jsxs("div",{className:"stats-container",children:[r.jsxs("div",{className:`stat-card ${Ee?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Total Balance"}),r.jsxs("span",{className:"value",children:["",fe.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Distributors"}),r.jsx("span",{className:"value",children:e.length})]})]})})(),r.jsx("div",{className:"table-wrapper",children:l?r.jsx(Ib,{columns:[{key:"name",label:"Name",editable:!0,type:"text"},{key:"contact_person",label:"Contact Person",editable:!0,type:"text"},{key:"phone",label:"Phone",editable:!0,type:"text"},{key:"email",label:"Email",editable:!0,type:"text"},{key:"address",label:"Address",editable:!0,type:"text"},{key:"gst_number",label:"GST Number",editable:!0,type:"text"},{key:"drug_license_number",label:"Drug License",editable:!0,type:"text"}],data:e,editable:!0,showRowNumbers:!0,title:"Distributors",onSave:async fe=>{const Ee=fe.map(async Ke=>{const $e=e.find(We=>We.id===Ke.id);if($e&&JSON.stringify($e)!==JSON.stringify(Ke))return se(`/api/distributors/${Ke.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ke)})});try{await Promise.all(Ee),le()}catch(Ke){alert("Error saving changes"),console.error(Ke)}}}):r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name / Contact"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Tax / License"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"2rem",color:"var(--dmp-text-secondary)"},children:"No distributors found."})}):e.map(fe=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"primary-text",children:fe.name}),r.jsx("div",{className:"secondary-text",children:fe.contact_person})]}),r.jsxs("td",{children:[r.jsx("div",{className:"secondary-text",children:fe.phone||"-"}),r.jsx("div",{className:"secondary-text",children:fe.email||"-"}),r.jsx("div",{className:"secondary-text",children:fe.address||"-"})]}),r.jsxs("td",{children:[r.jsxs("div",{className:"secondary-text",children:["GST: ",fe.gst_number||"-"]}),r.jsxs("div",{className:"secondary-text",children:["DL: ",fe.drug_license_number||"-"]})]}),r.jsx("td",{children:r.jsxs("span",{className:`status-badge ${parseFloat(fe.remainingBalance||"0")>0?"balance-ok":"balance-owed"}`,children:["",fe.remainingBalance||"0.00"]})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>Oe(fe),className:"dmp-button-icon",title:"View Payments & Balance",children:r.jsx(Im,{size:18})}),r.jsx("button",{onClick:()=>ge(fe),className:"dmp-button-icon",title:"Add Payment",children:r.jsx(pw,{size:18})}),r.jsx("button",{onClick:()=>xe(fe),className:"dmp-button-icon edit",title:"Edit Distributor",children:r.jsx($i,{size:18})}),r.jsx("button",{onClick:()=>oe(fe),className:"dmp-button-icon delete",title:"Delete Distributor",children:r.jsx(Vn,{size:18})})]})})]},fe.id))})]})}),d&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:Fe,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Add New Distributor"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:X,children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"name",children:"Name:"}),r.jsx("input",{type:"text",id:"name",className:"dmp-input",value:B,onChange:fe=>$(fe.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"contact_person",className:"dmp-input",value:L,onChange:fe=>V(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"phone",className:"dmp-input",value:H,onChange:fe=>ne(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"email",children:"Email:"}),r.jsx("input",{type:"email",id:"email",className:"dmp-input",value:Q,onChange:fe=>q(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"address",children:"Address:"}),r.jsx("textarea",{id:"address",className:"dmp-textarea",value:G,onChange:fe=>ie(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"gst_number",className:"dmp-input",value:W,onChange:fe=>z(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"drug_license_number",children:"Drug License Number:"}),r.jsx("input",{type:"text",id:"drug_license_number",className:"dmp-input",value:ce,onChange:fe=>je(fe.target.value)})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:Fe,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Add Distributor"})]})]})]})}),p&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:te,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Edit Distributor"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:ae,children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-name",children:"Name:"}),r.jsx("input",{type:"text",id:"edit-name",className:"dmp-input",value:B,onChange:fe=>$(fe.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"edit-contact_person",className:"dmp-input",value:L,onChange:fe=>V(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"edit-phone",className:"dmp-input",value:H,onChange:fe=>ne(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-email",children:"Email:"}),r.jsx("input",{type:"email",id:"edit-email",className:"dmp-input",value:Q,onChange:fe=>q(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-address",children:"Address:"}),r.jsx("textarea",{id:"edit-address",className:"dmp-textarea",value:G,onChange:fe=>ie(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"edit-gst_number",className:"dmp-input",value:W,onChange:fe=>z(fe.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-drug_license_number",children:"Drug License Number:"}),r.jsx("input",{type:"text",id:"edit-drug_license_number",className:"dmp-input",value:ce,onChange:fe=>je(fe.target.value)})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:te,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Save Changes"})]})]})]})}),x&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:_e,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Confirm Delete"}),r.jsxs("p",{children:['Are you sure you want to delete distributor "',C.name,'"?']}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:_e,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"button",onClick:de,className:"dmp-button dmp-button-primary",style:{backgroundColor:"var(--dmp-danger-color)"},children:"Delete"})]})]})}),j&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal printable-section",style:{maxWidth:"900px"},children:[r.jsx("button",{onClick:K,className:"dmp-modal-close",children:""}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[r.jsxs("h3",{className:"dmp-modal-title",style:{marginBottom:0},children:["Payments & Balance for ",C.name]}),r.jsxs("button",{onClick:()=>window.print(),className:"dmp-button dmp-button-primary",style:{padding:"0.5rem 1rem",display:"flex",alignItems:"center",gap:"8px"},title:"Print Ledger",children:[r.jsx(vf,{size:16})," Print Ledger"]})]}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),I&&r.jsxs("div",{className:"stats-container",style:{marginBottom:"2rem"},children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Order Value"}),r.jsxs("span",{className:"value",children:["",I.totalOrderValue.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Amount Paid"}),r.jsxs("span",{className:"value",children:["",I.totalAmountPaid.toFixed(2)]})]}),r.jsxs("div",{className:`stat-card ${I.remainingBalance>0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Remaining Balance"}),r.jsxs("span",{className:"value",children:["",I.remainingBalance.toFixed(2)]})]})]}),r.jsx("h4",{children:"Payment History"}),k.length===0?r.jsx("p",{children:"No payments recorded for this distributor."}):r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Order Value"}),r.jsx("th",{children:"Amount Paid"}),r.jsx("th",{children:"Balance Remaining"}),r.jsx("th",{children:"Payment Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:k.map(fe=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(fe.payment_date).toLocaleDateString()}),r.jsxs("td",{"data-label":"Order Value",children:["",fe.order_value.toFixed(2)]}),r.jsxs("td",{"data-label":"Amount Paid",children:["",fe.amount_paid.toFixed(2)]}),r.jsxs("td",{"data-label":"Balance Remaining",children:["",fe.balance_remaining.toFixed(2)]}),r.jsx("td",{"data-label":"Payment Mode",children:fe.payment_mode?fe.payment_mode.charAt(0).toUpperCase()+fe.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",children:fe.notes||"-"})]},fe.id))})]})}),r.jsx("div",{className:"dmp-modal-actions",children:r.jsx("button",{type:"button",onClick:K,className:"dmp-button dmp-button-secondary",children:"Close"})})]})}),_&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"420px"},children:[r.jsx("button",{onClick:ue,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Add Payment"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:Ne,children:[r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_date",children:"Date:"}),r.jsx("input",{type:"date",id:"payment_date",className:"dmp-input",value:Y,onChange:fe=>Ie(fe.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_mode",children:"Mode:"}),r.jsxs("select",{id:"payment_mode",className:"dmp-select",value:me,onChange:fe=>ye(fe.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"order_value",children:"Order Value:"}),r.jsx("input",{type:"number",id:"order_value",className:"dmp-input",value:Ue,onChange:fe=>ze(fe.target.value),step:"0.01"})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"amount_paid",children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount_paid",className:"dmp-input",value:Le,onChange:fe=>be(fe.target.value),step:"0.01"})]})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",className:"dmp-textarea",value:Ce,onChange:fe=>Ae(fe.target.value),rows:2,style:{resize:"none"}})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:ue,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Add Payment"})]})]})]})})]})},Gj=t=>{if(!t)return"";let e=t.toLowerCase();return e=e.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),e=e.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),e=e.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),e},cRe=(t,e)=>{if(!t||!e||e.length===0)return;const n=Gj(t);let a=e.find(o=>Gj(o.name)===n);if(a)return a;let i=e.find(o=>Gj(o.name).includes(n));if(i)return i;let s=e.find(o=>n.includes(Gj(o.name)));if(s)return s},uRe=({isOpen:t,onClose:e,excelHeaders:n,onConfirm:a,availableFields:i})=>{const[s,o]=v.useState({});if(v.useEffect(()=>{t&&c()},[t,n,i]),!t)return null;const l=(f,p)=>{o(g=>({...g,[f]:p}))},c=()=>{const f={};n.forEach(p=>{const g=i.map(b=>({name:b})),x=cRe(p,g);x&&(f[p]=x.name)}),o(f)},d=()=>{const f={};for(const p in s)s[p]&&s[p]!=="none"&&(f[p]=s[p]);a(f),e()};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:r.jsx($t,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Match File Columns"}),r.jsx("p",{className:"modal-description",children:'Please match the columns from your uploaded file to the corresponding fields in the drug inventory. You can use the "Auto Match" button for suggestions.'}),r.jsx("div",{className:"modal-actions-top",children:r.jsx("button",{type:"button",onClick:c,className:"button-auto-match",children:"Auto Match"})}),r.jsxs("div",{className:"column-mapping-grid",children:[r.jsx("div",{className:"grid-header",children:"Excel Column"}),r.jsx("div",{className:"grid-header",children:"App Field"}),n.map((f,p)=>r.jsxs(Se.Fragment,{children:[r.jsx("div",{className:"excel-header-cell",children:f}),r.jsx("div",{className:"app-field-cell",children:r.jsxs("select",{value:s[f]||"",onChange:g=>l(f,g.target.value),className:"app-field-select",children:[r.jsx("option",{value:"",children:"-- Select Field --"}),r.jsx("option",{value:"none",children:"None (Ignore Column)"}),i.map((g,x)=>r.jsxs("option",{value:g,children:[g==="name"?"Composition Name":g==="brand_name"?"Brand Name":g==="price"?"MRP":g==="buying_price"?"Rate":g==="unit"?"Pack":g==="batch"?"Batch":g==="hsn_code"?"HSN Code":g==="mfg"?"MFG":g==="loose_quantity"?"Loose":g.replace(/_/g," ").replace(/\b\w/g,b=>b.toUpperCase())," "]},x))]})})]},p))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:d,className:"button-submit",children:"Confirm Mapping"})]})]})})},dRe=({entityType:t,config:e,values:n,onChange:a,className:i=""})=>{const o=(e[t]||[]).filter(c=>c.type!=="computed");if(o.length===0)return null;const l=c=>{const d=n[c.key]??"";switch(c.type){case"number":return r.jsx("input",{type:"number",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value===""?null:parseFloat(f.target.value)),className:"custom-text-input mt-1",placeholder:c.label,required:c.required});case"date":return r.jsx("input",{type:"date",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value||null),className:"custom-text-input mt-1",required:c.required});case"boolean":return r.jsx("input",{type:"checkbox",id:`custom_${c.key}`,name:`custom_${c.key}`,checked:!!d,onChange:f=>a(c.key,f.target.checked),className:"custom-checkbox mt-1"});case"text":default:return r.jsx("input",{type:"text",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>a(c.key,f.target.value||null),className:"custom-text-input mt-1",placeholder:c.label,required:c.required})}};return r.jsxs("div",{className:`custom-fields-section ${i}`,children:[r.jsx("h4",{className:"custom-fields-title",children:"Custom Fields"}),r.jsx("div",{className:"custom-fields-grid",children:o.map(c=>r.jsxs("div",{className:"custom-field-item",children:[r.jsxs("label",{htmlFor:`custom_${c.key}`,className:"form-label",children:[c.label,c.required&&r.jsx("span",{className:"required-star",children:"*"})]}),l(c)]},c.key))})]})},hRe=({isOpen:t,onClose:e,onDrugAddedToPurchase:n,customColumnsConfig:a={}})=>{const[i,s]=v.useState({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(!1),g=v.useRef(null),x=v.useRef(null),b=v.useRef(null);v.useEffect(()=>{t&&(s({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),l(null),d(!1),p(!1))},[t]),v.useEffect(()=>{const T=E=>{E.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var k;(k=b.current)==null||k.focus()},0),E.preventDefault()))},C=E=>{g.current&&!g.current.contains(E.target)&&p(!1)};return document.addEventListener("keydown",T),document.addEventListener("mousedown",C),()=>{document.removeEventListener("keydown",T),document.removeEventListener("mousedown",C)}},[f]);const j=T=>{const{name:C,value:E,type:k}=T.target;s(O=>({...O,[C]:k==="number"?parseFloat(E)||null:E}))},S=(T,C)=>{s(E=>({...E,custom_fields:{...E.custom_fields,[T]:C}}))},_=T=>{if(T.preventDefault(),l(null),d(!0),i.mrp===void 0||i.stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const C={...i,name:i.name===""?null:i.name,composition:i.composition===""?null:i.composition,rate:i.rate===0?null:i.rate,expiry_date:i.expiry_date===""?null:i.expiry_date,gst:i.gst===0?null:i.gst,margin:i.margin===0?null:i.margin,discount:i.discount===0?null:i.discount,brand_name:i.brand_name===""?null:i.brand_name,batch:i.batch===""?null:i.batch,hsn_code:i.hsn_code===""?null:i.hsn_code,mfg:i.mfg===""?null:i.mfg,loose:i.loose===0?null:i.loose,custom_fields:i.custom_fields||{}};n(C),d(!1),e()};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content add-drug-form-container max-w-2xl mx-auto",children:[r.jsxs("div",{className:"add-drug-form-header",children:[r.jsx("h2",{children:"Add New Drug"}),r.jsx("button",{onClick:e,className:"cancel-button",title:"Close",children:r.jsx($t,{size:24})})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("form",{onSubmit:_,className:"add-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"name",className:"form-label",children:"Composition Name"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Al,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"name",value:i.name||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., Paracetamol",tabIndex:1})]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"brand_name",className:"form-label",children:"Brand Name"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Al,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"brand_name",value:i.brand_name||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Al,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"mrp",required:!0,step:"0.01",min:"0",value:i.mrp||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Al,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"stock",required:!0,step:"1",min:"0",value:i.stock||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"pack",value:i.pack||"",onChange:j,className:"custom-text-input mt-1",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:i.expiry_date||"",onChange:j,className:"custom-text-input mt-1",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"box_number",value:i.box_number||"",onChange:j,className:"custom-text-input mt-1",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:g,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"description",rows:3,value:i.description||"",onChange:j,className:"custom-text-input mt-1",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"rate",step:"0.01",min:"0",value:i.rate??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:10,ref:b})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"gst",step:"0.01",min:"0",max:"100",value:i.gst??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:11})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"margin",step:"0.01",min:"0",max:"100",value:i.margin??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"discount",step:"0.01",min:"0",max:"100",value:i.discount??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"batch",value:i.batch||"",onChange:j,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"hsn_code",value:i.hsn_code||"",onChange:j,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"mfg",value:i.mfg||"",onChange:j,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"loose",className:"form-label",children:"Loose Quantity"}),r.jsx("input",{type:"number",name:"loose",id:"loose",step:"1",min:"0",value:i.loose??"",onChange:j,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:17})]})]})]})]}),r.jsx(dRe,{entityType:"drugs",config:a,values:i.custom_fields||{},onChange:S}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:e,disabled:c,className:"form-button cancel-form-button",tabIndex:18,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button inline-flex justify-center",tabIndex:19,children:c?"Adding...":"Add Drug"})]})]})]})}):null},fRe=({purchaseRows:t,onCellChange:e,onRemoveDrug:n,onAddEmptyRow:a})=>{const i=v.useRef(new Map),s=["name","mrp","stock","pack","expiry_date","rate","brand_name","box_number","gst","discount","batch","hsn_code","mfg","loose"],o=(l,c,d)=>{if(l.key==="Tab"){l.preventDefault();const f=s.indexOf(d);if(f!==-1){const p=(f+1)%s.length,g=s[p],x=i.current.get(`${c}-${g}`);x==null||x.focus()}}};return t.length===0?r.jsxs("div",{className:"no-drugs-message",children:[r.jsx("p",{children:"No drugs added to the purchase list yet."}),r.jsxs("button",{onClick:a,className:"action-button add-drug-to-table-button",children:[r.jsx(Ps,{size:18,className:"button-icon"}),"Add the first drug"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"purchase-drugs-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Composition Name"}),r.jsx("th",{children:"MRP ()"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Pack"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Rate ()"}),r.jsx("th",{children:"Brand Name"}),r.jsx("th",{children:"Box Number"}),r.jsx("th",{children:"GST (%)"}),r.jsx("th",{children:"Discount (%)"}),r.jsx("th",{children:"Margin (%)"}),r.jsx("th",{children:"Batch"}),r.jsx("th",{children:"HSN Code"}),r.jsx("th",{children:"MFG"}),r.jsx("th",{children:"Loose"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map((l,c)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("input",{type:"text",value:l.name||"",onChange:d=>e(d,l.id,"name"),onKeyDown:d=>o(d,l.id,"name"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-name`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.mrp||"",onChange:d=>e(d,l.id,"mrp"),onKeyDown:d=>o(d,l.id,"mrp"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-mrp`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.stock||"",onChange:d=>e(d,l.id,"stock"),onKeyDown:d=>o(d,l.id,"stock"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-stock`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.pack||"",onChange:d=>e(d,l.id,"pack"),onKeyDown:d=>o(d,l.id,"pack"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-pack`,d)}})}),r.jsx("td",{children:l.supplier||"N/A"}),r.jsx("td",{children:r.jsx("input",{type:"date",value:l.expiry_date||"",onChange:d=>e(d,l.id,"expiry_date"),onKeyDown:d=>o(d,l.id,"expiry_date"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-expiry_date`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.rate||"",onChange:d=>e(d,l.id,"rate"),onKeyDown:d=>o(d,l.id,"rate"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-rate`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.brand_name||"",onChange:d=>e(d,l.id,"brand_name"),onKeyDown:d=>o(d,l.id,"brand_name"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-brand_name`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.box_number||"",onChange:d=>e(d,l.id,"box_number"),onKeyDown:d=>o(d,l.id,"box_number"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-box_number`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.gst||"",onChange:d=>e(d,l.id,"gst"),onKeyDown:d=>o(d,l.id,"gst"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-gst`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.discount||"",onChange:d=>e(d,l.id,"discount"),onKeyDown:d=>o(d,l.id,"discount"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-discount`,d)}})}),r.jsx("td",{children:(()=>{const d=l.mrp||0,f=l.rate||0,p=l.gst!==null&&l.gst!==void 0?l.gst/100*f:0,g=l.discount!==null&&l.discount!==void 0?l.discount/100*d:0,x=d-(f+p)-g;return`${(d>0?x/d*100:0).toFixed(2)}%`})()}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.batch||"",onChange:d=>e(d,l.id,"batch"),onKeyDown:d=>o(d,l.id,"batch"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-batch`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.hsn_code||"",onChange:d=>e(d,l.id,"hsn_code"),onKeyDown:d=>o(d,l.id,"hsn_code"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-hsn_code`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.mfg||"",onChange:d=>e(d,l.id,"mfg"),onKeyDown:d=>o(d,l.id,"mfg"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-mfg`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.loose||"",onChange:d=>e(d,l.id,"loose"),onKeyDown:d=>o(d,l.id,"loose"),className:"editable-cell-input",ref:d=>{l.id&&i.current.set(`${l.id}-loose`,d)}})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>n(l.id),className:"delete-button",title:"Remove Item",children:r.jsx(Vn,{size:16})})})]},l.id||c))})]})})},pRe="_container_7ak2k_7",mRe="_header_7ak2k_207",gRe="_backButton_7ak2k_221",yRe="_title_7ak2k_265",xRe="_stickyActionBar_7ak2k_287",vRe="_actionRow_7ak2k_317",bRe="_inputWrapper_7ak2k_335",jRe="_inputIcon_7ak2k_345",wRe="_input_7ak2k_335",NRe="_quickDistributors_7ak2k_401",SRe="_distributorChip_7ak2k_417",_Re="_distributorChipIcon_7ak2k_463",CRe="_selectedInfo_7ak2k_473",TRe="_resultsDropdown_7ak2k_503",kRe="_resultItem_7ak2k_537",ARe="_buttonGroup_7ak2k_565",ERe="_button_7ak2k_565",PRe="_buttonPrimary_7ak2k_609",ORe="_buttonSecondary_7ak2k_631",DRe="_buttonAccent_7ak2k_653",MRe="_buttonDisabled_7ak2k_675",IRe="_tableSection_7ak2k_691",RRe="_cardTitle_7ak2k_707",LRe="_cardIcon_7ak2k_727",FRe="_footer_7ak2k_947",$Re="_totalValue_7ak2k_981",BRe="_footerControls_7ak2k_1005",zRe="_paidInputGroup_7ak2k_1017",qRe="_paidLabel_7ak2k_1029",URe="_paidInput_7ak2k_1017",VRe="_errorMsg_7ak2k_1075",fn={container:pRe,header:mRe,backButton:gRe,title:yRe,stickyActionBar:xRe,actionRow:vRe,inputWrapper:bRe,inputIcon:jRe,input:wRe,quickDistributors:NRe,distributorChip:SRe,distributorChipIcon:_Re,selectedInfo:CRe,resultsDropdown:TRe,resultItem:kRe,buttonGroup:ARe,button:ERe,buttonPrimary:PRe,buttonSecondary:ORe,buttonAccent:DRe,buttonDisabled:MRe,tableSection:IRe,cardTitle:RRe,cardIcon:LRe,footer:FRe,totalValue:$Re,footerControls:BRe,paidInputGroup:zRe,paidLabel:qRe,paidInput:URe,errorMsg:VRe},IB=()=>{const t=Lt(),{purchaseRows:e,setPurchaseRows:n,selectedDistributor:a,setSelectedDistributor:i,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:d,setDistributors:f}=Tz(),[p,g]=v.useState(!1),[x,b]=v.useState(!0),j=v.useRef(null),S=v.useRef(null),[_,T]=v.useState(!1),C=v.useRef(null),[E,k]=v.useState(!1),[O,I]=v.useState([]),[F,B]=v.useState(null),[$,L]=v.useState(null),[V,H]=v.useState(!1),[ne,Q]=v.useState([]),q=["name","description","mrp","stock","pack","supplier","expiry_date","rate","box_number","gst","margin","discount","brand_name","batch","hsn_code","mfg","loose"];v.useEffect(()=>{(async()=>{b(!0);try{const de=await se("/api/distributors?limit=4");if(de.ok){const ee=await de.json();Q(Array.isArray(ee)?ee.slice(0,4):[])}}catch(de){console.error("Failed to fetch initial distributors",de)}finally{b(!1)}})()},[]);const G=()=>{const de={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:"",composition:"",description:"",mrp:0,stock:0,pack:"",supplier:a?a.name:"",expiry_date:"",rate:0,box_number:"",gst:0,margin:0,discount:0,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:0,last_updated:"",created_at:""};n(ee=>[...ee,de])},ie=async(ae,de)=>{if(!ae){L("No file provided for import.");return}if(!a){L("Please select a distributor before importing.");return}g(!0),L(null);const ee=new FormData;ee.append("inventoryFile",ae),ee.append("columnMapping",JSON.stringify(de));try{const Ne=await se("/api/drugs/parse-excel",{method:"POST",body:ee});if(!Ne.ok){const Fe=await Ne.json();throw new Error(Fe.message||`Failed to parse Excel file: ${Ne.statusText}`)}const Te=await Ne.json();n(Fe=>[...Fe,...Te.map(xe=>({...xe,id:Date.now().toString()+Math.random().toString(36).substring(2,9),supplier:a?a.name:xe.supplier}))])}catch(Ne){console.error("Failed to parse Excel file:",Ne),L(Ne.message||"Failed to parse Excel file. Please check the file format and try again.")}finally{j.current&&(j.current.value=""),g(!1),B(null)}},W=async ae=>{if(ae.target.files&&ae.target.files[0]){const de=ae.target.files[0];B(de),L(null),g(!0);const ee=new FormData;ee.append("inventoryFile",de);try{const Ne=await se("/api/drugs/get-file-headers",{method:"POST",body:ee});if(!Ne.ok){const Fe=await Ne.json();throw new Error(Fe.message||`Failed to get file headers: ${Ne.statusText}`)}const{headers:Te}=await Ne.json();I(Te),k(!0)}catch(Ne){console.error("Failed to get file headers:",Ne),L(Ne.message||"Failed to read file headers. Please check the file format and try again."),B(null)}finally{g(!1)}}else B(null)},z=ae=>{F?ie(F,ae):L("No file selected for import after mapping."),k(!1)},ce=()=>{k(!1),I([]),B(null),j.current&&(j.current.value="")},je=()=>{var ae;(ae=j.current)==null||ae.click()},Y=async ae=>{if(ae.target.files&&ae.target.files[0]){const de=ae.target.files[0];L(null),g(!0);const ee=new FormData;ee.append("file",de),ee.append("output_type","csv");const Te={Authorization:"Bearer 00841ac4-b279-11f0-ab55-0a3a41e3fad1"};try{const Fe=await fetch("https://extraction-api.nanonets.com/extract",{method:"POST",headers:Te,body:ee});if(!Fe.ok){const ue=await Fe.json();throw new Error(ue.message||`Failed to extract data from image/PDF: ${Fe.statusText}`)}const xe=await Fe.json();if(!xe.success||!xe.content)throw new Error(xe.detail||"Nanonets API did not return expected content.");let te=xe.content;te=te.split(`
`).filter(ue=>!ue.startsWith("#")&&ue.trim()!=="").join(`
`);const _e=new File([te],"extracted_data.csv",{type:"text/csv"}),Oe=new FormData;Oe.append("inventoryFile",_e);const K=await se("/api/drugs/get-file-headers",{method:"POST",body:Oe});if(!K.ok){const ue=await K.json();throw new Error(ue.message||`Failed to get headers from extracted CSV: ${K.statusText}`)}const{headers:ge}=await K.json();I(ge),B(_e),k(!0)}catch(Fe){console.error("Failed to extract data from image/PDF:",Fe),L(Fe.message||"Failed to extract data from image/PDF. Please check the file and try again.")}finally{S.current&&(S.current.value=""),g(!1)}}},Ie=()=>{var ae;(ae=S.current)==null||ae.click()},Ue=()=>{if(!a){L("Please select a distributor before adding a drug manually.");return}H(!0)},ze=()=>{H(!1),L(null)},Le=ae=>{n(de=>[...de,{...ae,id:Date.now().toString(),supplier:a?a.name:ae.supplier}]),ze()},be=ae=>{n(de=>de.filter(ee=>ee.id!==ae))},Ce=(ae,de,ee)=>{const{value:Ne}=ae.target;n(Te=>Te.map(Fe=>{if(Fe.id===de){let xe=Ne;ee==="expiry_date"?xe=Ne.trim()===""?null:Ne:["mrp","stock","rate","gst","margin","discount","loose"].includes(ee)&&(xe=parseFloat(Ne),isNaN(xe)&&(xe=null));const te={...Fe,[ee]:xe};return ee==="name"&&a&&!te.supplier&&(te.supplier=a.name),te}return Fe}))},Ae=v.useCallback(()=>e.reduce((ae,de)=>{const ee=de.stock||0,Ne=de.rate||0,Te=de.gst||0,Fe=de.discount||0;let xe=Ne*(1-Fe/100),te=ee*xe;return te+=te*(Te/100),ae+te},0),[e]),me=async()=>{if(!a){L("Please select a distributor before submitting the purchase.");return}const ae=e.filter(de=>Object.values(de).some(ee=>typeof ee=="string"&&ee.trim()!==""||typeof ee=="number"&&ee!==0||ee!=null&&typeof ee!="string"&&typeof ee!="number"));if(ae.length===0){L("No valid drugs to submit. Please fill in at least one field for a row, or remove empty rows."),g(!1);return}g(!0),L(null);try{for(const Te of ae){const Fe={...Te,expiry_date:Te.expiry_date===""?null:Te.expiry_date,distributorId:a.id},xe=await se("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(!xe.ok){const te=await xe.json();throw new Error(te.message||`Failed to add drug ${Te.name}: ${xe.statusText}`)}}const de=Ae(),ee=new Date().toISOString().split("T")[0],Ne=await se(`/api/distributors/${a.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:ee,order_value:de,amount_paid:l,notes:"Payment from purchase page."})});if(!Ne.ok){const Te=await Ne.json();throw new Error(Te.message||`Failed to record distributor payment: ${Ne.statusText}`)}n([]),i(null),o(""),c(0),t("/dashboard/inventory")}catch(de){console.error("Failed to submit purchase:",de),L(de.message||"Failed to submit purchase. Please try again.")}finally{g(!1)}},ye=v.useCallback(async ae=>{if(ae.trim()===""){f([]);return}try{const de=await se(`/api/distributors?search=${encodeURIComponent(ae)}`);if(!de.ok)throw new Error(`Failed to fetch distributors: ${de.statusText}`);const ee=await de.json();f(ee)}catch(de){console.error("Failed to fetch distributors:",de),L(de.message||"Failed to load distributors.")}},[]),le=ae=>{const de=ae.target.value;o(de),i(null),C.current&&clearTimeout(C.current),de.trim()!==""?C.current=setTimeout(()=>{ye(de),T(!0)},300):(f([]),T(!1))},X=ae=>{i(ae),o(ae.name),T(!1),f([])};return v.useEffect(()=>{const ae=de=>{de.target instanceof HTMLElement&&!de.target.closest(`.${fn.inputWrapper}`)&&T(!1)};return document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae),C.current&&clearTimeout(C.current)}},[]),r.jsxs("div",{className:fn.container,children:[r.jsxs("div",{className:fn.header,children:[r.jsx("button",{onClick:()=>t(-1),className:fn.backButton,title:"Go Back",children:r.jsx(on,{size:24})}),r.jsx("h2",{className:fn.title,children:"Purchase Inventory"})]}),$&&r.jsxs("div",{className:fn.errorMsg,children:[r.jsx(ea,{size:20}),$]}),r.jsx("div",{className:fn.stickyActionBar,children:r.jsxs("div",{className:fn.actionRow,children:[r.jsxs("div",{style:{flex:1,minWidth:"300px",position:"relative"},children:[r.jsxs("div",{className:fn.inputWrapper,children:[r.jsx(Fn,{className:fn.inputIcon,size:20}),r.jsx("input",{type:"text",placeholder:"Search distributor...",value:s,onChange:le,onFocus:()=>s.trim()!==""&&T(!0),className:fn.input}),_&&d.length>0&&r.jsx("ul",{className:fn.resultsDropdown,children:d.map(ae=>r.jsx("li",{onClick:()=>X(ae),className:fn.resultItem,children:ae.name},ae.id))})]}),x?r.jsx("div",{className:fn.quickDistributors,children:[1,2,3,4].map(ae=>r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}},ae))}):ne.length>0&&!a&&r.jsx("div",{className:fn.quickDistributors,children:ne.map(ae=>r.jsxs("button",{className:fn.distributorChip,onClick:()=>X(ae),children:[r.jsx(Jn,{className:fn.distributorChipIcon}),ae.name]},ae.id))}),a&&r.jsxs("div",{className:fn.selectedInfo,style:{marginTop:"0.5rem",marginBottom:0},children:[r.jsx(Ll,{size:18}),r.jsxs("span",{children:["Selected: ",r.jsx("strong",{children:a.name})]})]})]}),r.jsxs("div",{className:fn.buttonGroup,children:[r.jsx("input",{ref:j,type:"file",className:"sr-only",style:{display:"none"},accept:".xlsx, .xls, .csv",onChange:W}),r.jsx("input",{ref:S,type:"file",className:"sr-only",style:{display:"none"},accept:".pdf, .png, .jpg, .jpeg",onChange:Y}),r.jsxs("button",{onClick:je,disabled:p||!a,className:`${fn.button} ${fn.buttonPrimary} ${p||!a?fn.buttonDisabled:""}`,title:a?"":"Select a distributor to import",children:[r.jsx(SE,{size:18}),p?"Processing...":"Import Excel/CSV"]}),r.jsxs("button",{onClick:Ie,disabled:p||!a,className:`${fn.button} ${fn.buttonSecondary} ${p||!a?fn.buttonDisabled:""}`,title:a?"":"Select a distributor",children:[r.jsx(Ra,{size:18}),"Scan Image/PDF"]}),r.jsxs("button",{onClick:Ue,disabled:!a,className:`${fn.button} ${fn.buttonAccent} ${a?"":fn.buttonDisabled}`,title:a?"":"Select a distributor",children:[r.jsx(Ps,{size:18}),"Add Manually"]})]})]})}),r.jsx(uRe,{isOpen:E,onClose:ce,excelHeaders:O,onConfirm:z,availableFields:q}),V&&r.jsx(hRe,{isOpen:V,onClose:ze,onDrugAddedToPurchase:Le}),r.jsxs("div",{className:fn.tableSection,children:[r.jsxs("div",{className:fn.cardTitle,children:[r.jsx(Ab,{className:fn.cardIcon,size:24}),"Purchase Items (",e.length,")"]}),r.jsx(fRe,{purchaseRows:e,onCellChange:Ce,onRemoveDrug:be,onAddEmptyRow:G})]}),r.jsxs("div",{className:fn.footer,children:[r.jsxs("button",{onClick:G,className:`${fn.button} ${fn.buttonSecondary}`,children:[r.jsx(Ps,{size:18}),"Add New Row"]}),r.jsxs("div",{className:fn.footerControls,children:[r.jsxs("div",{className:fn.paidInputGroup,children:[r.jsx("label",{htmlFor:"amount-paid",className:fn.paidLabel,children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount-paid",value:l,onChange:ae=>c(parseFloat(ae.target.value)||0),placeholder:"0.00",className:fn.paidInput,step:"0.01",disabled:!a})]}),r.jsxs("div",{className:fn.totalValue,children:["Total: ",r.jsxs("span",{children:["",Ae().toFixed(2)]})]}),r.jsx("button",{onClick:me,disabled:p||e.length===0||!a,className:`${fn.button} ${fn.buttonPrimary} ${fn.submitButton} ${p||!a||e.length===0?fn.buttonDisabled:""}`,style:{padding:"0.8rem 1.5rem",fontSize:"1rem"},children:p?"Submitting...":"Complete Purchase"})]})]})]})},HRe=t=>{if(!t)return 1;const e=t.match(/(?:\d+x)?(\d+)/);return e&&e[1]?parseInt(e[1],10):1},GRe=()=>{const t=Lt(),e=$r(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState("cash"),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(""),[E,k]=v.useState(""),[O,I]=v.useState(""),[F,B]=v.useState(0),$=v.useRef(!1),[L,V]=v.useState(null),[H,ne]=v.useState(!1),[Q,q]=v.useState(!1),[G,ie]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),W=()=>{G.length<5&&ie(ee=>[...ee,{id:Date.now().toString(),method:"cash",amount:0}])},z=ee=>{G.length>2&&ie(Ne=>Ne.filter(Te=>Te.id!==ee))},ce=(ee,Ne,Te)=>{ie(Fe=>{const xe=Fe.map(te=>te.id===ee?Ne==="method"?{...te,method:Te}:{...te,amount:Math.max(0,Te)}:te);if(Ne==="amount"&&xe.length===2){const oe=xe.findIndex(K=>K.id===ee)===0?1:0,_e=Math.max(0,Te),Oe=me-_e;xe[oe]={...xe[oe],amount:Math.max(0,Oe)}}return xe})},je=(ee,Ne)=>{const Te=G.filter(xe=>xe.id!==ee).reduce((xe,te)=>xe+te.amount,0),Fe=Math.max(0,Ne-Te);ie(xe=>xe.map(te=>te.id===ee?{...te,amount:Fe}:te))},Y=ee=>{const Ne=Math.max(0,Math.min(100,isNaN(ee)?0:ee));$.current=!0,B(Ne);const Te=i.map(Fe=>({...Fe,discount_percentage:Ne}));s(Te)},Ie=(ee,Ne)=>{const Te=[...i];Te[ee].discount_percentage=isNaN(Ne)?0:Ne,s(Te)};v.useEffect(()=>{if($.current){$.current=!1;return}const ee=i.reduce((Fe,xe)=>Fe+(xe.total_price??0),0);if(ee===0){B(0);return}const Te=i.reduce((Fe,xe)=>{const oe=(xe.total_price??0)*((xe.discount_percentage??0)/100);return Fe+oe},0)/ee*100;B(Fe=>Math.abs(Fe-Te)>.01?Te:Fe)},[i]);const Ue=async()=>{if(!n)return d("No order data available to bill."),null;if(i.length===0)return d("Cannot bill an empty order."),null;p(!0),d(null);try{const ee=i.map(oe=>{const _e=(oe.pricePerLooseUnit??0)*(oe.looseQuantity??0),Oe=_e*((oe.discount_percentage??0)/100),K=_e-Oe;return{name:oe.name,pack_quantity:oe.loosePacks??0,loose_quantity:oe.looseUnits??0,price:oe.originalPrice??0,pack_price:oe.originalPrice??0,loose_price:oe.pricePerLooseUnit??0,total:K,drug_id:oe.drug_id,discount_percentage:oe.discount_percentage??0,batch:oe.batch,expiry_date:oe.expiry_date}}),Ne={patientId:n.patientId,queueId:n.id,items:ee,amount:me,paymentMode:Q?"split":g,type:"pharmacy",related_id:n.id,status:"paid",discountPercentage:F};Q&&(Ne.splitPayments=G.map(oe=>({method:oe.method,amount:oe.amount})));const Te=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)}),Fe=await Te.json();if(!Te.ok||!Fe.id)throw new Error(Fe.message||"Failed to create bill.");const xe=await se(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:Fe.id,medications:i})});if(!xe.ok){const oe=await xe.text();throw new Error(`Failed to update pharmacy order status: ${xe.statusText} - ${oe}`)}a(oe=>oe?{...oe,status:"billed",bill_id:Fe.id}:null);const te=Q?G.filter(oe=>oe.method==="credit").reduce((oe,_e)=>oe+_e.amount,0):g==="credit"?me:0;if(te>0)try{await se(`/api/patient-debts/${n.patientId}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:te,related_bill_id:Fe.id,notes:`Pharmacy Bill #${Fe.id}`})})}catch(oe){console.error("Failed to create debt entry:",oe)}return t(`/dashboard/pharmacy-billing/${n.id}`,{replace:!0,state:{order:{...n,status:"billed",bill_id:Fe.id},initialItems:i}}),Fe.id}catch(ee){return console.error("Billing process failed:",ee),d(ee.message||"Failed to mark order as billed. Please try again."),null}finally{p(!1)}},ze=async()=>{if(n)try{const ee=await se(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"dispensed",medications:i})});if(!ee.ok){const Ne=await ee.text();console.error("Failed to dispense order:",Ne)}}catch(ee){console.error("Error dispensing order:",ee)}},Le=()=>{window.print()},be=async()=>{await Ue()&&(window.print(),await ze(),t(-1))};v.useEffect(()=>{const ee=e.pathname.split("/"),Ne=ee[ee.length-1];Ne?(async()=>{try{l(!0);const[Fe,xe,te]=await Promise.all([se(`/api/pharmacy-orders/${Ne}`),se("/api/drugs").then(K=>K.ok?K.json():null).catch(()=>null),se("/api/clinics/settings").then(K=>K.ok?K.json():null).catch(()=>null)]);if(!Fe.ok)throw new Error("Failed to fetch pharmacy order details");const oe=await Fe.json();a(oe);let _e=[];xe&&(_e=xe.drugs||xe||[]),te&&(_(te.upi_id||""),C(te.name||""),k(te.address||""),I(te.notes||""));const Oe=oe.medications.map(K=>{const ge=HRe(K.unit),ue=(K.pack_quantity??0)*ge+(K.loose_quantity??0),fe=_e.find(wt=>K.drug_id&&String(wt.id)===String(K.drug_id)||wt.name.toLowerCase()===K.name.toLowerCase()),Ee=K.batch||(fe==null?void 0:fe.batch)||(fe==null?void 0:fe.batch_number),Ke=K.expiry_date||(fe==null?void 0:fe.expiry_date),$e=Number(K.pack_price)||Number(fe==null?void 0:fe.mrp)||0,We=Number(fe==null?void 0:fe.rate)||0;let it=Number(K.loose_price)||0;return it===0&&($e>0&&ge>0?it=$e/ge:We>0&&(it=We)),{...K,isLoose:!0,loosePacks:K.pack_quantity??0,looseUnits:K.loose_quantity??0,looseQuantity:ue,pack_price:$e,loose_price:it,total_price:Number(K.total_price)||it*ue,pricePerLooseUnit:it,originalPrice:$e,discount_percentage:Number(K.discount_percentage)??0,directions_to_use:K.directions_to_use,tabletsPerDay:K.tabletsPerDay,numberOfDays:K.numberOfDays,batch:Ee,expiry_date:Ke}});s(Oe)}catch(Fe){console.error("Failed to fetch data:",Fe),d(Fe.message||"Failed to load order details.")}finally{l(!1)}})():(d("No pharmacy order ID provided."),l(!1))},[e.pathname]);const Ce=v.useMemo(()=>i.reduce((ee,Ne)=>ee+(Ne.total_price??0),0),[i]),Ae=v.useMemo(()=>i.reduce((ee,Ne)=>{const Fe=(Ne.total_price??0)*(Ne.discount_percentage??0)/100;return ee+Fe},0),[i]),me=v.useMemo(()=>Ce-Ae,[Ce,Ae]),ye=v.useMemo(()=>G.reduce((ee,Ne)=>ee+Ne.amount,0),[G]),le=v.useMemo(()=>me-ye,[me,ye]),X=v.useMemo(()=>Math.abs(le)<.01,[le]),ae=v.useMemo(()=>Q?G.some(ee=>ee.method==="credit"&&ee.amount>0):g==="credit",[Q,G,g]),de=v.useMemo(()=>Q?G.filter(ee=>ee.method==="credit").reduce((ee,Ne)=>ee+Ne.amount,0):g==="credit"?me:0,[Q,G,g,me]);return v.useEffect(()=>{if(me>0&&S){const ee=`upi://pay?pa=${S}&pn=ClinicName&am=${me.toFixed(2)}&cu=INR`;j(ee)}else j("")},[me,S]),v.useEffect(()=>{(async()=>{if(g==="credit"&&(n!=null&&n.patientId)){ne(!0);try{const Ne=await se(`/api/patient-debts/${n.patientId}/balance`);if(Ne.ok){const Te=await Ne.json();V(Te.netDebt||0)}else V(0)}catch(Ne){console.error("Error fetching patient debt:",Ne),V(0)}finally{ne(!1)}}})()},[g,n==null?void 0:n.patientId]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:60,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})})]},ee))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(Z,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T?`${T} Pharmacy`:"Pharmacy Bill"}),(E||O)&&r.jsxs("div",{className:"clinic-details-print",children:[E&&r.jsx("span",{className:"small-text clinic-address",children:E}),O&&r.jsx("span",{className:"small-text clinic-notes",children:O})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Pharmacy Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(Cc,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Medications"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"BATCH"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{children:"QUANTITY"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((ee,Ne)=>{var oe;const Te=ee.total_price??0,Fe=Te*(ee.discount_percentage??0)/100,xe=Te-Fe;return r.jsxs("tr",{children:[r.jsx("td",{children:Ne+1}),r.jsx("td",{children:ee.name}),r.jsx("td",{children:ee.batch||"N/A"}),r.jsx("td",{children:ee.expiry_date?new Date(ee.expiry_date).toLocaleDateString():"N/A"}),r.jsxs("td",{children:[r.jsxs("div",{children:["Packs: ",ee.loosePacks??0]}),r.jsxs("div",{children:["Loose: ",ee.looseUnits??0]})]}),r.jsx("td",{children:((oe=ee.originalPrice)==null?void 0:oe.toFixed(2))??"N/A"}),r.jsx("td",{children:((ee.pricePerLooseUnit??0)*(1-(ee.discount_percentage??0)/100)).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:ee.discount_percentage===0?"":ee.discount_percentage,onChange:_e=>Ie(Ne,parseFloat(_e.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsxs("td",{children:[5 .toFixed(1),"%"]}),r.jsx("td",{children:xe.toFixed(2)})]},Ne)})})]}):r.jsx("p",{children:"No medications in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",F.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"GST (Included)"}),r.jsxs("span",{children:["",(me*.05).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",me.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:Q?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),Q&&G.map((ee,Ne)=>ee.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:ee.method==="cash"?"Cash":ee.method==="upi"?"UPI":ee.method==="card"?"Card":ee.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",ee.amount.toFixed(2)]})]},Ne))]}),L!==null&&(L>0||ae)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(L??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(L??0).toFixed(2)]})]}),ae&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",de.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((L??0)+(ae?de:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(La,{value:b,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:F===0?"":F,onChange:ee=>Y(parseFloat(ee.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",me.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>q(!Q),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:Q?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:Q?"rgba(79, 172, 254, 0.1)":"transparent",color:Q?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Bo,{size:14}),"Split"]})]}),Q?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",me.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:G.map((ee,Ne)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Ne+1}),r.jsxs("select",{value:ee.method,onChange:Te=>ce(ee.id,"method",Te.target.value),className:`split-payment-select ${ee.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:ee.amount||"",onChange:Te=>ce(ee.id,"amount",parseFloat(Te.target.value)||0),className:`split-payment-input ${ee.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),G.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>je(ee.id,me),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>z(ee.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Vn,{size:12})})]})]},ee.id))}),G.length<5&&r.jsxs("button",{type:"button",onClick:W,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(Gn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ye.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${X?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[X?"":le>0?"":"",X?"Balanced":le>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(le).toFixed(2)]})]}),!X&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",me.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:g,onChange:ee=>x(ee.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),ae&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),H?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:L&&L>0?"#dc3545":"#28a745"},children:["",(L||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",de.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((L||0)+de).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[n.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Le,className:"secondary-button print-preview-button no-print",disabled:f||i.length===0,children:"Print Preview"}),r.jsx("button",{onClick:be,className:"primary-button",disabled:f||i.length===0,children:f?"Processing...":"Finalise and Bill"})]}),n.status==="billed"&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${n.bill_id}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},WRe=()=>{const t=Lt(),e=$r(),[n,a]=v.useState(null),[i,s]=v.useState(""),[o,l]=v.useState(""),[c,d]=v.useState([]),[f,p]=v.useState(!0),[g,x]=v.useState(null),[b,j]=v.useState(!1),[S,_]=v.useState("cash"),[T,C]=v.useState(""),[E,k]=v.useState(""),[O,I]=v.useState(""),[F,B]=v.useState(""),[$,L]=v.useState(""),[V,H]=v.useState(""),[ne,Q]=v.useState(0),q=v.useRef(!1),[G,ie]=v.useState(null),[W,z]=v.useState(!1),[ce,je]=v.useState(!1),[Y,Ie]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ue=()=>{Y.length<5&&Ie(te=>[...te,{id:Date.now().toString(),method:"cash",amount:0}])},ze=te=>{Y.length>2&&Ie(oe=>oe.filter(_e=>_e.id!==te))},Le=(te,oe,_e)=>{Ie(Oe=>{const K=Oe.map(ge=>ge.id===te?oe==="method"?{...ge,method:_e}:{...ge,amount:Math.max(0,_e)}:ge);if(oe==="amount"&&K.length===2){const ue=K.findIndex(Ke=>Ke.id===te)===0?1:0,fe=Math.max(0,_e),Ee=de-fe;K[ue]={...K[ue],amount:Math.max(0,Ee)}}return K})},be=(te,oe)=>{const _e=Y.filter(K=>K.id!==te).reduce((K,ge)=>K+ge.amount,0),Oe=Math.max(0,oe-_e);Ie(K=>K.map(ge=>ge.id===te?{...ge,amount:Oe}:ge))},Ce=te=>{const oe=Math.max(0,Math.min(100,isNaN(te)?0:te));q.current=!0,Q(oe);const _e=c.map(Oe=>({...Oe,discount_percentage:oe}));d(_e)},Ae=(te,oe)=>{const _e=[...c];_e[te].discount_percentage=isNaN(oe)?0:oe,d(_e)};v.useEffect(()=>{if(q.current){q.current=!1;return}const te=c.reduce((Oe,K)=>Oe+(K.price??0),0);if(te===0){Q(0);return}const _e=c.reduce((Oe,K)=>{const ue=(K.price??0)*((K.discount_percentage??0)/100);return Oe+ue},0)/te*100;Q(Oe=>Math.abs(Oe-_e)>.01?_e:Oe)},[c]);const me=async()=>{if(!n)return x("No order data available to bill."),null;if(c.length===0)return x("Cannot bill an empty order."),null;j(!0),x(null);try{const te=c.map(ue=>{const fe=ue.price,Ee=fe*((ue.discount_percentage??0)/100),Ke=fe-Ee;return{name:ue.name,price:ue.price,quantity:1,total:Ke,item_id:ue.id,type:"lab_test",discount_percentage:ue.discount_percentage??0}}),oe={patientId:n.patient_id,items:te,amount:de,paymentMode:ce?"split":S,type:"lab",related_id:n.id,status:"paid",discountPercentage:ne};ce&&(oe.splitPayments=Y.map(ue=>({method:ue.method,amount:ue.amount})));const _e=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)}),Oe=await _e.json();if(!_e.ok||!Oe.id)throw new Error(Oe.message||"Failed to create bill.");const K=await se(`/api/lab/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:Oe.id})});if(!K.ok){const ue=await K.text();throw new Error(`Failed to update lab order status: ${K.statusText} - ${ue}`)}a(ue=>ue?{...ue,status:"billed",bill_id:Oe.id}:null);const ge=ce?Y.filter(ue=>ue.method==="credit").reduce((ue,fe)=>ue+fe.amount,0):S==="credit"?de:0;if(ge>0)try{await se(`/api/patient-debts/${n.patient_id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:ge,related_bill_id:Oe.id,notes:`Lab Bill #${Oe.id}`})})}catch(ue){console.error("Failed to create debt entry:",ue)}return t(`/dashboard/lab-billing/${n.id}`,{replace:!0,state:{...e.state,order:{...n,status:"billed",bill_id:Oe.id}}}),Oe.id}catch(te){return console.error("Billing process failed:",te),x(te.message||"Failed to mark order as billed. Please try again."),null}finally{j(!1)}},ye=()=>{window.print()},le=async()=>{await me()&&(window.print(),t(-1))};v.useEffect(()=>{const te=e.pathname.split("/"),oe=te[te.length-1];oe?(async()=>{try{const[Oe,K]=await Promise.all([se(`/api/lab/${oe}`),se("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!Oe.ok)throw new Error("Failed to fetch lab order details");const ge=await Oe.json();a(ge);const ue=ge.patient_id?se(`/api/patients/${ge.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1});if(K.ok&&"json"in K){const Ke=await K.json();k(Ke.upi_id||""),I(Ke.name||""),B(Ke.address||""),L(Ke.notes||""),H(Ke.labLetterheadUrl||"")}const fe=await ue;if(fe.ok&&"json"in fe){const Ke=await fe.json();s(Ke.name),l(Ke.patient_token_number)}const Ee=ge.tests.map(Ke=>({...Ke,price:typeof Ke.price=="string"?parseFloat(Ke.price):Number(Ke.price)||0,discount_percentage:0,total_price:typeof Ke.price=="string"?parseFloat(Ke.price):Number(Ke.price)||0}));d(Ee)}catch(Oe){console.error("Failed to fetch data:",Oe),x(Oe.message||"Failed to load order details.")}finally{p(!1)}})():(x("No lab order ID provided."),p(!1))},[e.pathname]);const X=v.useMemo(()=>c.reduce((te,oe)=>te+(oe.price??0),0),[c]),ae=v.useMemo(()=>c.reduce((te,oe)=>{const Oe=(oe.price??0)*(oe.discount_percentage??0)/100;return te+Oe},0),[c]),de=v.useMemo(()=>X-ae,[X,ae]),ee=v.useMemo(()=>Y.reduce((te,oe)=>te+oe.amount,0),[Y]),Ne=v.useMemo(()=>de-ee,[de,ee]),Te=v.useMemo(()=>Math.abs(Ne)<.01,[Ne]),Fe=v.useMemo(()=>ce?Y.some(te=>te.method==="credit"&&te.amount>0):S==="credit",[ce,Y,S]),xe=v.useMemo(()=>ce?Y.filter(te=>te.method==="credit").reduce((te,oe)=>te+oe.amount,0):S==="credit"?de:0,[ce,Y,S,de]);return v.useEffect(()=>{if(de>0&&E){const te=`upi://pay?pa=${E}&pn=ClinicName&am=${de.toFixed(2)}&cu=INR`;C(te)}else C("")},[de,E]),v.useEffect(()=>{(async()=>{if(Fe&&(n!=null&&n.patient_id)){z(!0);try{const oe=await se(`/api/patient-debts/${n.patient_id}/balance`);if(oe.ok){const _e=await oe.json();ie(_e.netDebt||0)}else ie(0)}catch(oe){console.error("Error fetching patient debt:",oe),ie(0)}finally{z(!1)}}})()},[Fe,n==null?void 0:n.patient_id]),f?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(Z,{width:200,height:20}),r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:100,height:24})]}),r.jsx(Z,{width:"100%",height:150})," ",r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})})]})]})}):g?r.jsxs("div",{className:"error-message-box",children:["Error: ",g]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[V&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:V,alt:"Lab Letterhead",className:"print-letterhead-image"})}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:O?`${O} Lab`:"Lab Bill"}),(F||$)&&r.jsxs("div",{className:"clinic-details-print",children:[F&&r.jsx("span",{className:"small-text clinic-address",children:F}),$&&r.jsx("span",{className:"small-text clinic-notes",children:$})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:20})}),r.jsx("h1",{children:"Lab Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",i]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(ls,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Lab Tests"})}),c.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"TEST DESCRIPTION"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:c.map((te,oe)=>{const _e=te.price??0,Oe=_e*(te.discount_percentage??0)/100,K=_e-Oe;return r.jsxs("tr",{children:[r.jsx("td",{children:oe+1}),r.jsx("td",{children:te.name}),r.jsx("td",{children:typeof te.price=="number"?te.price.toFixed(2):Number(te.price||0).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:te.discount_percentage||"",onChange:ge=>Ae(oe,parseFloat(ge.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:K.toFixed(2)})]},oe)})})]}):r.jsx("p",{children:"No tests in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",X.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",ne.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ae.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",de.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:ce?"Split Payment":S==="cash"?"Cash":S==="upi"?"UPI":S==="card"?"Card":S==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),ce&&Y.map((te,oe)=>te.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:te.method==="cash"?"Cash":te.method==="upi"?"UPI":te.method==="card"?"Card":te.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",te.amount.toFixed(2)]})]},oe))]}),G!==null&&(G>0||Fe)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(G??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(G??0).toFixed(2)]})]}),Fe&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",xe.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((G??0)+(Fe?xe:0)).toFixed(2)]})]})]})]}),T&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${S!=="upi"?"hide-on-screen":""}`,children:[r.jsx(La,{value:T,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",X.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:ne===0?"":ne,onChange:te=>Ce(parseFloat(te.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:b||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",de.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:T?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:T,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>je(!ce),disabled:b||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ce?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ce?"rgba(79, 172, 254, 0.1)":"transparent",color:ce?"#4facfe":"#666",cursor:b||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Bo,{size:14}),"Split"]})]}),ce?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",de.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:Y.map((te,oe)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:oe+1}),r.jsxs("select",{value:te.method,onChange:_e=>Le(te.id,"method",_e.target.value),className:`split-payment-select ${te.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:te.amount||"",onChange:_e=>Le(te.id,"amount",parseFloat(_e.target.value)||0),className:`split-payment-input ${te.method==="credit"?"is-credit":""}`,disabled:b||n.status==="billed"})]}),Y.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>be(te.id,de),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>ze(te.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Vn,{size:12})})]})]},te.id))}),Y.length<5&&r.jsxs("button",{type:"button",onClick:Ue,className:"split-payment-add-btn",disabled:b||n.status==="billed",children:[r.jsx(Gn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ee.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Te?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Te?"":Ne>0?"":"",Te?"Balanced":Ne>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Ne).toFixed(2)]})]}),!Te&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",de.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:S,onChange:te=>_(te.target.value),className:"payment-mode-select",disabled:b||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Fe&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),W?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:G&&G>0?"#dc3545":"#28a745"},children:["",(G||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",xe.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((G||0)+xe).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:ye,className:"secondary-button print-preview-button no-print",disabled:b||c.length===0,children:"Print Preview"}),n.status!=="billed"&&r.jsx("button",{onClick:le,className:"primary-button",disabled:b||c.length===0,children:b?"Processing...":"Finalise and Bill"}),n.status==="billed"&&n.bill_id&&r.jsx("button",{onClick:()=>t("/billing",{state:{billId:n.bill_id}}),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})]}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},YRe=500,KRe=()=>{const t=Lt(),{queueId:e}=Fa(),[n]=Sz(),a=n.get("doctorId"),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,d]=v.useState(null),[f,p]=v.useState(null),[g,x]=v.useState([]),[b,j]=v.useState(!0),[S,_]=v.useState(null),[T,C]=v.useState(!1),[E,k]=v.useState(!1),[O,I]=v.useState(null),[F,B]=v.useState("cash"),[$,L]=v.useState(""),[V,H]=v.useState(""),[ne,Q]=v.useState(""),[q,G]=v.useState(""),[ie,W]=v.useState(""),[z,ce]=v.useState(0),[je,Y]=v.useState(null),[Ie,Ue]=v.useState(!1),[ze,Le]=v.useState(!1),[be,Ce]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ae=()=>{be.length<5&&Ce(K=>[...K,{id:Date.now().toString(),method:"cash",amount:0}])},me=K=>{be.length>2&&Ce(ge=>ge.filter(ue=>ue.id!==K))},ye=(K,ge,ue)=>{Ce(fe=>{const Ee=fe.map(Ke=>Ke.id===K?ge==="method"?{...Ke,method:ue}:{...Ke,amount:Math.max(0,ue)}:Ke);if(ge==="amount"&&Ee.length===2){const $e=Ee.findIndex(wt=>wt.id===K)===0?1:0,We=Math.max(0,ue),it=de-We;Ee[$e]={...Ee[$e],amount:Math.max(0,it)}}return Ee})},le=(K,ge)=>{const ue=be.filter(Ee=>Ee.id!==K).reduce((Ee,Ke)=>Ee+Ke.amount,0),fe=Math.max(0,ge-ue);Ce(Ee=>Ee.map(Ke=>Ke.id===K?{...Ke,amount:fe}:Ke))};v.useEffect(()=>{(async()=>{if(!e){_("No queue ID provided."),j(!1);return}try{j(!0),_(null);const[ge,ue]=await Promise.all([se(`/api/queue/${e}`),se("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ge.ok)throw new Error("Failed to fetch queue entry");const fe=await ge.json();if(s(fe),ue.ok&&"json"in ue){const it=await ue.json();H(it.upi_id||""),Q(it.name||""),G(it.address||""),W(it.notes||"")}const Ee=a||fe.doctor_id,[Ke,$e]=await Promise.all([fe.patient_id?se(`/api/patients/${fe.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1}),Ee?se(`/api/staff/${Ee}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1})]);if(Ke.ok&&"json"in Ke){const it=await Ke.json();l(it)}let We=YRe;if(Ee&&(p(Ee),$e.ok&&"json"in $e)){const it=await $e.json();d(it),it.opd_fee!=null&&!isNaN(parseFloat(String(it.opd_fee)))&&(We=parseFloat(String(it.opd_fee)))}x([{name:"Consultation Fee",quantity:1,price:We,total:We,discount_percentage:0}])}catch(ge){console.error("Failed to fetch data:",ge),_(ge.message||"Failed to load billing details.")}finally{j(!1)}})()},[e,a]);const X=v.useMemo(()=>g.reduce((K,ge)=>K+ge.total,0),[g]),ae=v.useMemo(()=>X*(z/100),[X,z]),de=v.useMemo(()=>X-ae,[X,ae]),ee=v.useMemo(()=>be.reduce((K,ge)=>K+ge.amount,0),[be]),Ne=v.useMemo(()=>de-ee,[de,ee]),Te=v.useMemo(()=>Math.abs(Ne)<.01,[Ne]),Fe=v.useMemo(()=>ze?be.some(K=>K.method==="credit"&&K.amount>0):F==="credit",[ze,be,F]),xe=v.useMemo(()=>ze?be.filter(K=>K.method==="credit").reduce((K,ge)=>K+ge.amount,0):F==="credit"?de:0,[ze,be,F,de]);v.useEffect(()=>{if(de>0&&V){const K=`upi://pay?pa=${V}&pn=${encodeURIComponent(ne)}&am=${de.toFixed(2)}&cu=INR`;L(K)}else L("")},[de,V,ne]),v.useEffect(()=>{(async()=>{if(Fe&&(o!=null&&o.id)){Ue(!0);try{const ge=await se(`/api/patient-debts/${o.id}/balance`);if(ge.ok){const ue=await ge.json();Y(ue.netDebt||0)}else Y(0)}catch(ge){console.error("Error fetching patient debt:",ge),Y(0)}finally{Ue(!1)}}})()},[Fe,o==null?void 0:o.id]);const te=K=>{const ge=Math.max(0,Math.min(100,isNaN(K)?0:K));ce(ge)},oe=async()=>{if(!i||!o)return _("Missing queue or patient data."),null;if(g.length===0)return _("Cannot create an empty bill."),null;C(!0),_(null);try{const K=g.map(Ke=>({name:Ke.name,quantity:Ke.quantity,price:Ke.price,total:Ke.total*(1-z/100)})),ge={patientId:o.id,queueId:i.id,items:K,amount:de,paymentMode:ze?"split":F,type:"consultation",related_id:i.id,status:"paid",discountPercentage:z};ze&&(ge.splitPayments=be.map(Ke=>({method:Ke.method,amount:Ke.amount})));const ue=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)}),fe=await ue.json();if(!ue.ok||!fe.id)throw new Error(fe.message||"Failed to create bill.");const Ee=ze?be.filter(Ke=>Ke.method==="credit").reduce((Ke,$e)=>Ke+$e.amount,0):F==="credit"?de:0;if(Ee>0)try{await se(`/api/patient-debts/${o.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Ee,related_bill_id:fe.id,notes:`Consultation Bill #${fe.id}`})})}catch(Ke){console.error("Failed to create debt entry:",Ke)}if(f&&i.id)try{const Ke={status:"waiting",doctorId:f},$e=await se(`/api/queue/${i.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ke)});if($e.ok)console.log(`Doctor ${f} assigned to queue ${i.id} after billing.`);else{const We=await $e.json();console.error("Failed to assign doctor to queue:",We.message)}}catch(Ke){console.error("Error assigning doctor to queue:",Ke)}return k(!0),I(fe.id),fe.id}catch(K){return console.error("Billing process failed:",K),_(K.message||"Failed to create bill. Please try again."),null}finally{C(!1)}},_e=()=>{window.print()},Oe=async()=>{await oe()&&(window.print(),t(-1))};return b?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(Z,{width:200,height:20}),r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:100,height:24})]}),r.jsx(Z,{width:"100%",height:150})," ",r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})})]})]})}):S?r.jsxs("div",{className:"error-message-box",children:["Error: ",S]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:ne||"Clinic Bill"}),(q||ie)&&r.jsxs("div",{className:"clinic-details-print",children:[q&&r.jsx("span",{className:"small-text clinic-address",children:q}),ie&&r.jsx("span",{className:"small-text clinic-notes",children:ie})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date().toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{size:20})}),r.jsx("h1",{children:"Consultation Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",i.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Patient ID"]})," ",(o==null?void 0:o.id)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date().toLocaleDateString()]}),c&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(bf,{size:16})," Doctor"]})," ",c.name]}),i.complaint&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Complaint"})," ",i.complaint]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Bill Items"})}),g.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:g.map((K,ge)=>{const ue=K.total*(z/100),fe=K.total-ue;return r.jsxs("tr",{children:[r.jsx("td",{children:ge+1}),r.jsx("td",{children:K.name}),r.jsx("td",{children:K.quantity}),r.jsxs("td",{children:["",K.price.toFixed(2)]}),r.jsxs("td",{children:["",fe.toFixed(2)]})]},ge)})})]}):r.jsx("p",{children:"No items in this bill."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",X.toFixed(2)]})]}),z>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",z.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ae.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",de.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:ze?"Split Payment":F==="cash"?"Cash":F==="upi"?"UPI":F==="card"?"Card":F==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),ze&&be.map((K,ge)=>K.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:K.method==="cash"?"Cash":K.method==="upi"?"UPI":K.method==="card"?"Card":K.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",K.amount.toFixed(2)]})]},ge))]}),je!==null&&(je>0||Fe)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(je??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(je??0).toFixed(2)]})]}),Fe&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",xe.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((je??0)+(Fe?xe:0)).toFixed(2)]})]})]})]}),$&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${F!=="upi"?"hide-on-screen":""}`,children:[r.jsx(La,{value:$,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",X.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{children:["- ",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:z===0?"":z,onChange:K=>te(parseFloat(K.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:T||E}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",de.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:$?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:$,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>Le(!ze),disabled:T||E,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ze?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ze?"rgba(79, 172, 254, 0.1)":"transparent",color:ze?"#4facfe":"#666",cursor:T||E?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Bo,{size:14}),"Split"]})]}),ze?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",de.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:be.map((K,ge)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ge+1}),r.jsxs("select",{value:K.method,onChange:ue=>ye(K.id,"method",ue.target.value),className:`split-payment-select ${K.method==="credit"?"is-credit":""}`,disabled:T||E,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:K.amount||"",onChange:ue=>ye(K.id,"amount",parseFloat(ue.target.value)||0),className:`split-payment-input ${K.method==="credit"?"is-credit":""}`,disabled:T||E})]}),be.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>le(K.id,de),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>me(K.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Vn,{size:12})})]})]},K.id))}),be.length<5&&r.jsxs("button",{type:"button",onClick:Ae,className:"split-payment-add-btn",disabled:T||E,children:[r.jsx(Gn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ee.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Te?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Te?"":Ne>0?"":"",Te?"Balanced":Ne>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Ne).toFixed(2)]})]}),!Te&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",de.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:F,onChange:K=>B(K.target.value),className:"payment-mode-select",disabled:T||E,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Fe&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Ie?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:je&&je>0?"#dc3545":"#28a745"},children:["",(je||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",xe.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((je||0)+xe).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[!E&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:_e,className:"secondary-button print-preview-button no-print",disabled:T||g.length===0,children:"Print Preview"}),r.jsx("button",{onClick:Oe,className:"primary-button",disabled:T||g.length===0,children:T?"Processing...":"Finalise and Bill"})]}),E&&O&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${O}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your visit!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No queue data available."})},QRe=()=>{const t=Lt(),[e,n]=v.useState(!0),[a,i]=v.useState([]),[s,o]=v.useState(""),[l,c]=v.useState(!0),[d,f]=v.useState(!1),[p,g]=v.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",name:"",logoUrl:"",labLetterheadUrl:"",upi_id:"",address:"",notes:"",voice_ai_language:"en-US"}),[x,b]=v.useState(null),[j,S]=v.useState(!1),_=($,L)=>{b({type:$,message:L}),setTimeout(()=>b(null),3e3)},T=$=>{switch($){case"doctor":return r.jsx(bf,{size:14,className:"text-blue-600"});case"receptionist":return r.jsx(Qz,{size:14,className:"text-green-600"});case"pharmacy":return r.jsx(Cc,{size:14,className:"text-purple-600"});case"lab":return r.jsx(ls,{size:14,className:"text-yellow-600"});default:return r.jsx(dd,{size:14,className:"text-gray-500"})}},C=$=>{switch($){case"doctor":return"avatar-blue";case"receptionist":return"avatar-green";case"pharmacy":return"avatar-purple";case"lab":return"avatar-yellow";default:return"avatar-gray"}},E=v.useCallback(async()=>{n(!0);try{const $=await se("/staff");if($.ok){const L=await $.json();i(L.map(V=>({...V,id:V._id||V.id})))}}catch($){console.error("Error fetching staff:",$),_("error","Failed to load staff list")}finally{n(!1)}},[]),k=v.useCallback(async()=>{c(!0);try{const $=await se("/api/clinics/settings");if($.ok){const L=await $.json();g({admissionCharge:parseFloat(L.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(L.perDayCharge||0).toFixed(2),otherCharges:parseFloat(L.otherCharges||0).toFixed(2),aiMemory:L.aiMemory||"",clinicWideSystemPrompt:L.clinicWideSystemPrompt||"",gemini_api_key:L.gemini_api_key||"",low_stock_threshold:L.low_stock_threshold!==void 0&&L.low_stock_threshold!==null?String(L.low_stock_threshold):"10",name:L.name||"",logoUrl:L.logoUrl||"",labLetterheadUrl:L.labLetterheadUrl||"",upi_id:L.upi_id||"",address:L.address||"",notes:L.notes||"",clinic_id:L.clinic_id,voice_ai_language:L.voice_ai_language||"en-US"})}}catch($){console.error("Error fetching settings:",$),_("error","Failed to load settings")}finally{c(!1)}},[]);v.useEffect(()=>{E(),k()},[E,k]);const O=$=>{const{name:L,value:V}=$.target;g(H=>({...H,[L]:V}))},I=async()=>{f(!0);try{const $=parseFloat(p.admissionCharge),L=parseFloat(p.perDayCharge),V=parseFloat(p.otherCharges),H=parseInt(p.low_stock_threshold);if((await se("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:p.name,admissionCharge:$,perDayCharge:L,otherCharges:V,aiMemory:p.aiMemory,clinicWideSystemPrompt:p.clinicWideSystemPrompt,gemini_api_key:p.gemini_api_key,low_stock_threshold:H,logoUrl:p.logoUrl,labLetterheadUrl:p.labLetterheadUrl,upi_id:p.upi_id,address:p.address,notes:p.notes,voice_ai_language:p.voice_ai_language})})).ok)_("success","Changes saved successfully");else throw new Error("Failed to save")}catch($){console.error("Error saving settings:",$),_("error","Failed to save settings")}finally{f(!1)}},F=a.filter($=>$.name.toLowerCase().includes(s.toLowerCase())||$.role.toLowerCase().includes(s.toLowerCase())),B=async $=>{for(const L of $){const V=document.getElementById(L);V&&(V.scrollIntoView({behavior:"smooth",block:"center"}),V.classList.add("ai-feedback-glow"),await new Promise(H=>setTimeout(H,1500)),V.classList.remove("ai-feedback-glow"))}};return r.jsxs("div",{className:"clinic-hub-container",children:[r.jsxs("header",{className:"clinic-hub-header",children:[r.jsxs("div",{className:"clinic-hub-title",children:[r.jsx("h1",{children:"Clinic Hub"}),r.jsx("p",{className:"clinic-hub-subtitle",children:"Manage your ecosystem"})]}),r.jsxs("div",{className:"clinic-hub-actions",children:[x&&r.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.message}),r.jsxs("button",{className:"btn-add-staff",onClick:()=>t("/dashboard/staff/add"),children:[r.jsx(Gn,{size:16})," Add Staff"]}),r.jsxs("button",{className:"btn-save-changes",onClick:I,disabled:d,children:[r.jsx(cs,{size:16})," ",d?"Saving...":"Save Changes"]})]})]}),r.jsxs("main",{className:"clinic-hub-content",children:[r.jsxs("div",{className:"team-directory-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(Os,{size:18,className:"text-gray-500"}),r.jsxs("span",{className:"panel-title",children:["Team Directory (",a.length,")"]})]}),r.jsx("div",{className:"search-container",children:r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Fn,{size:16,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Find member...",className:"search-input",value:s,onChange:$=>o($.target.value)})]})}),r.jsx("div",{className:"team-list",children:e?r.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4].map($=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsxs("div",{className:"flex-1",children:[r.jsx(Z,{width:120,height:16,className:"mb-1"}),r.jsx(Z,{width:80,height:12})]})]},$))}):F.length===0?r.jsx("div",{className:"empty-state",children:"No staff found."}):F.map($=>r.jsxs("div",{id:`staff-member-${$.id}`,className:"team-member-item",children:[r.jsx("div",{className:`member-avatar ${C($.role)}`,children:$.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"member-info",children:[r.jsx("div",{className:"member-name",children:$.name}),r.jsxs("div",{className:"member-role",children:[T($.role),$.role]})]}),r.jsx("span",{className:`member-status ${$.active?"status-active":"status-inactive"}`,children:$.active?"Active":"Inactive"}),r.jsx("button",{className:"btn-edit-member",onClick:()=>t(`/dashboard/staff/edit/${$.id}`),children:r.jsx($i,{size:16})})]},$.id))})]}),r.jsxs("div",{className:"config-console-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(Uz,{size:18,className:"text-gray-500"}),r.jsx("span",{className:"panel-title",children:"Configuration Console"})]}),l?r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:80,style:{borderRadius:"8px"}})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]})]})]})]}):r.jsxs("div",{className:"config-content",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Hz,{size:16})," CLINIC IDENTITY & LOCATION"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Clinic Name"}),r.jsx("input",{type:"text",className:"form-input",name:"name",id:"setting-name",value:p.name,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Logo URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"logoUrl",id:"setting-logoUrl",value:p.logoUrl,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Lab Letterhead URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"labLetterheadUrl",id:"setting-labLetterheadUrl",value:p.labLetterheadUrl,onChange:O})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Address"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Full physical address",name:"address",id:"setting-address",value:p.address,onChange:O})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(cd,{size:16})," FINANCIAL OPERATIONS"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Admission Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"admissionCharge",id:"setting-admissionCharge",value:p.admissionCharge,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Per Day Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"perDayCharge",id:"setting-perDayCharge",value:p.perDayCharge,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Other Charges ()"}),r.jsx("input",{type:"number",className:"form-input",name:"otherCharges",id:"setting-otherCharges",value:p.otherCharges,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"UPI ID"}),r.jsx("input",{type:"text",className:"form-input",name:"upi_id",id:"setting-upi_id",value:p.upi_id,onChange:O})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(UO,{size:16})," INVENTORY & AI"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Low Stock Threshold"}),r.jsx("input",{type:"number",className:"form-input",name:"low_stock_threshold",id:"setting-low_stock_threshold",value:p.low_stock_threshold,onChange:O})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Voice AI Language"}),r.jsxs("select",{className:"form-input",name:"voice_ai_language",id:"setting-voice_ai_language",value:p.voice_ai_language,onChange:$=>g(L=>({...L,voice_ai_language:$.target.value})),children:[r.jsx("option",{value:"en-US",children:"English"}),r.jsx("option",{value:"hi-IN",children:"Hindi"}),r.jsx("option",{value:"te-IN",children:"Telugu"}),r.jsx("option",{value:"bn-IN",children:"Bengali"}),r.jsx("option",{value:"mr-IN",children:"Marathi"}),r.jsx("option",{value:"ta-IN",children:"Tamil"}),r.jsx("option",{value:"gu-IN",children:"Gujarati"}),r.jsx("option",{value:"kn-IN",children:"Kannada"}),r.jsx("option",{value:"ml-IN",children:"Malayalam"}),r.jsx("option",{value:"pa-IN",children:"Punjabi"}),r.jsx("option",{value:"es-ES",children:"Spanish"}),r.jsx("option",{value:"fr-FR",children:"French"}),r.jsx("option",{value:"de-DE",children:"German"}),r.jsx("option",{value:"it-IT",children:"Italian"}),r.jsx("option",{value:"pt-PT",children:"Portuguese"}),r.jsx("option",{value:"ru-RU",children:"Russian"}),r.jsx("option",{value:"ja-JP",children:"Japanese"}),r.jsx("option",{value:"ko-KR",children:"Korean"}),r.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),r.jsx("option",{value:"ar-SA",children:"Arabic"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Gemini API Key"}),r.jsx("input",{type:"password",className:"form-input",name:"gemini_api_key",id:"setting-gemini_api_key",value:p.gemini_api_key,onChange:O,placeholder:"******************"})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Clinic-Wide System Prompt"}),r.jsx("textarea",{className:"form-textarea",name:"clinicWideSystemPrompt",id:"setting-clinicWideSystemPrompt",value:p.clinicWideSystemPrompt,onChange:O,placeholder:"Instructions for the AI..."})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"AI Memory (Context)"}),r.jsx("textarea",{className:"form-textarea",name:"aiMemory",id:"setting-aiMemory",value:p.aiMemory,onChange:O,placeholder:"Shared context for the AI..."})]})]})]})]})]})]}),j&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:r.jsx("div",{className:"w-96 bg-white h-full shadow-2xl animate-slide-in-right",children:r.jsx(GH,{onClose:()=>S(!1),settings:p,staffList:a,onSettingsUpdate:k,onStaffUpdate:E,onHighlight:B})})})]})},XRe="_container_13uqm_121",JRe="_header_13uqm_141",ZRe="_title_13uqm_187",e4e="_controls_13uqm_203",t4e="_dateInputGroup_13uqm_231",n4e="_dateInputLabel_13uqm_255",r4e="_dateInput_13uqm_231",a4e="_section_13uqm_297",i4e="_sectionTitle_13uqm_325",s4e="_statsGrid_13uqm_351",o4e="_statCard_13uqm_365",l4e="_statTitle_13uqm_397",c4e="_statValue_13uqm_415",u4e="_statSubtitle_13uqm_431",d4e="_revenueGrid_13uqm_443",h4e="_revenueCard_13uqm_469",f4e="_revenueCardTitle_13uqm_485",p4e="_revenueCardList_13uqm_505",m4e="_revenueCardListItem_13uqm_517",g4e="_tableContainer_13uqm_557",y4e="_table_13uqm_557",x4e="_textRight_13uqm_639",v4e="_textGreen_13uqm_647",b4e="_textRed_13uqm_655",j4e="_loadingContainer_13uqm_673",w4e="_errorAlert_13uqm_693",N4e="_backButton_13uqm_759",S4e="_chartsGrid_13uqm_797",_4e="_chartCard_13uqm_823",C4e="_chartWrapper_13uqm_873",at={container:XRe,header:JRe,title:ZRe,controls:e4e,dateInputGroup:t4e,dateInputLabel:n4e,dateInput:r4e,section:a4e,sectionTitle:i4e,statsGrid:s4e,statCard:o4e,statTitle:l4e,statValue:c4e,statSubtitle:u4e,revenueGrid:d4e,revenueCard:h4e,revenueCardTitle:f4e,revenueCardList:p4e,revenueCardListItem:m4e,tableContainer:g4e,table:y4e,textRight:x4e,textGreen:v4e,textRed:b4e,loadingContainer:j4e,errorAlert:w4e,backButton:N4e,chartsGrid:S4e,chartCard:_4e,chartWrapper:C4e},RB=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],WA=({active:t,payload:e,label:n})=>t&&e&&e.length?r.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-gray-800",children:n}),e.map((a,i)=>r.jsxs("p",{style:{color:a.color},className:"text-sm",children:[a.name,": ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a.value)]},i))]}):null,T4e=()=>{const t=Lt(),e=$r(),n=new URLSearchParams(e.search),a=n.get("startDate"),i=n.get("endDate"),s=new Date().toISOString().split("T")[0],[o,l]=v.useState(a||s),[c,d]=v.useState(i||s),[f,p]=v.useState(!1),[g,x]=v.useState(null),{setAnalysisDateRange:b,analysisDateRange:j,setAnalysisData:S,registerAnalysisNavigator:_,registerAnalysisRefresher:T}=LN(),[C,E]=v.useState(0),[k,O]=v.useState(0),[I,F]=v.useState(0),[B,$]=v.useState(null),[L,V]=v.useState(null),[H,ne]=v.useState(null),[Q,q]=v.useState({reception:{},pharmacy:{},lab:{},dental:{}}),[G,ie]=v.useState(0),[W,z]=v.useState(null),[ce,je]=v.useState([]),[Y,Ie]=v.useState(null),[Ue,ze]=v.useState(null),[Le,be]=v.useState(null),[Ce,Ae]=v.useState([]),[me,ye]=v.useState(null),[le,X]=v.useState(0),ae=v.useCallback(async(Te,Fe)=>{p(!0),x(null);const xe=Te||o,te=Fe||c;if(E(0),O(0),F(0),$(null),V(null),ne(null),q({reception:{},pharmacy:{},lab:{},dental:{}}),Ie(null),Ie(null),ie(0),z(null),je([]),ze(null),be(null),Ae([]),ye(null),X(0),!xe||!te){x("Please select both start and end dates."),p(!1);return}try{const oe=kde(),[_e,Oe,K,ge,ue,fe]=await Promise.all([se(`/api/bills?startDate=${o}&endDate=${c}&limit=10000`),se(`/api/payment/admission?startDate=${o}&endDate=${c}`),se(`/api/subscriptions/transactions/manual?startDate=${o}&endDate=${c}`),se(`/api/patient-debts/collections/analysis?startDate=${o}&endDate=${c}`),oe?se(`/api/inventory/comprehensive-analysis?startDate=${o}&endDate=${c}&clinicId=${oe}`):Promise.resolve(null),se(`/api/distributors/payments/analysis?startDate=${o}&endDate=${c}`)]);if(_e.ok&&Oe.ok&&K.ok){const Ee=await _e.json(),Ke=await Oe.json(),$e=await K.json(),We=Ee.bills||[],it=Ke.admissionPayments||[],wt=$e||[];let we={totalRevenue:0,totalCashCollected:0,revenueByType:{consultation:0,pharmacy:0,lab:0,dental:0,other:0},cashByMode:{},revenueByMode:{},detailedRevenue:{reception:{},pharmacy:{},lab:{},dental:{}},dailyRevenue:new Map,pharmacyReturns:0,discountByType:{reception:0,pharmacy:0,lab:0,dental:0,other:0},byUser:{}};const Xe=new Map,Je=new Set;let ct=0,Ct=0,bt=0,ke=0;const ot=(vt,Ot)=>{const Vt=vt.split("T")[0];we.dailyRevenue.set(Vt,(we.dailyRevenue.get(Vt)||0)+Ot)},Tt=(vt,Ot,Vt,ln,er=!0)=>{const Tn=Ot.toLowerCase()==="credit";er&&(we.totalRevenue+=vt,we.revenueByType.hasOwnProperty(Vt)?we.revenueByType[Vt]+=vt:we.revenueByType.other=(we.revenueByType.other||0)+vt,ot(ln,vt),we.revenueByMode[Ot]=(we.revenueByMode[Ot]||0)+vt),Tn||(we.totalCashCollected+=vt,we.cashByMode[Ot]=(we.cashByMode[Ot]||0)+vt),er&&(Vt==="pharmacy"?we.detailedRevenue.pharmacy[Ot]=(we.detailedRevenue.pharmacy[Ot]||0)+vt:Vt==="lab"?we.detailedRevenue.lab[Ot]=(we.detailedRevenue.lab[Ot]||0)+vt:Vt==="dental"?we.detailedRevenue.dental[Ot]=(we.detailedRevenue.dental[Ot]||0)+vt:Vt!=="debt"&&(we.detailedRevenue.reception[Ot]=(we.detailedRevenue.reception[Ot]||0)+vt)),Vt==="debt"&&(we.detailedRevenue.debt=we.detailedRevenue.debt||{},we.detailedRevenue.debt[Ot]=(we.detailedRevenue.debt[Ot]||0)+vt)};if(We.forEach(vt=>{var Ot,Vt,ln,er,Tn,va;if(vt.status==="paid"||vt.type==="pharmacy_return"){let Ka=parseFloat(vt.amount.toString()),Br=vt.type||"other";if(Br==="pharmacy_return"&&(we.pharmacyReturns+=Ka,Br="pharmacy"),vt.split_payments&&Array.isArray(vt.split_payments)&&vt.split_payments.length>0)vt.split_payments.forEach(In=>{const tt=parseFloat(In.amount.toString()),gt=In.method||"Unknown",St=gt.toLowerCase()==="credit";we.totalRevenue+=tt,we.revenueByType.hasOwnProperty(Br)?we.revenueByType[Br]+=tt:we.revenueByType.other=(we.revenueByType.other||0)+tt,ot(vt.createdAt,tt),we.revenueByMode[gt]=(we.revenueByMode[gt]||0)+tt,St||(we.totalCashCollected+=tt,we.cashByMode[gt]=(we.cashByMode[gt]||0)+tt),Br==="pharmacy"?we.detailedRevenue.pharmacy[gt]=(we.detailedRevenue.pharmacy[gt]||0)+tt:Br==="lab"?we.detailedRevenue.lab[gt]=(we.detailedRevenue.lab[gt]||0)+tt:Br==="dental"?we.detailedRevenue.dental[gt]=(we.detailedRevenue.dental[gt]||0)+tt:we.detailedRevenue.reception[gt]=(we.detailedRevenue.reception[gt]||0)+tt});else{const In=vt.payment_mode||"Unknown";Tt(Ka,In,Br,vt.createdAt,!0)}let ka=0;if(vt.items&&Array.isArray(vt.items)&&(ka=vt.items.reduce((In,tt)=>{const gt=tt.discount_percentage||0;if(gt>0&&gt<100){const Dt=(tt.total||tt.total_price||0)*(gt/(100-gt));return In+Dt}return In},0)),ka>0){Br==="pharmacy"?we.discountByType.pharmacy+=ka:Br==="lab"?we.discountByType.lab+=ka:Br==="dental"?we.discountByType.dental+=ka:Br==="consultation"||Br==="other"?we.discountByType.reception+=ka:we.discountByType.other+=ka;const In=vt.created_by||((Ot=vt.Creator)==null?void 0:Ot.id)||"unknown";if(In!=="unknown"){const tt=((Vt=vt.Creator)==null?void 0:Vt.name)||"Unknown User",gt=((ln=vt.Creator)==null?void 0:ln.role)||"unknown";we.byUser[In]||(we.byUser[In]={id:In,name:tt,role:gt,revenue:0,cashFlow:0,discount:0}),we.byUser[In].discount+=ka}}const zi=vt.created_by||((er=vt.Creator)==null?void 0:er.id)||"unknown";if(zi!=="unknown"){const In=((Tn=vt.Creator)==null?void 0:Tn.name)||"Unknown User",tt=((va=vt.Creator)==null?void 0:va.role)||"unknown";if(we.byUser[zi]||(we.byUser[zi]={id:zi,name:In,role:tt,revenue:0,cashFlow:0,discount:0}),we.byUser[zi].revenue+=Ka,!(vt.payment_mode==="credit"||vt.payment_mode==="no_cash_insurance")){let St=0;vt.split_payments&&vt.split_payments.length>0?vt.split_payments.forEach(Dt=>{Dt.method!=="credit"&&Dt.method!=="no_cash_insurance"&&(St+=parseFloat(Dt.amount.toString()))}):St=Ka,we.byUser[zi].cashFlow+=St}}if(vt.Patient){const In=vt.Patient.id,tt=new Date(vt.Patient.createdAt||"2000-01-01")>=new Date(xe);tt?bt+=Ka:ke+=Ka,Je.has(In)||(Je.add(In),tt?ct++:Ct++)}vt.items&&Array.isArray(vt.items)&&vt.items.forEach(In=>{if(In.name){const tt=Xe.get(In.name)||{count:0,revenue:0},gt=parseFloat((In.quantity||0).toString()),St=parseFloat((In.total||In.total_price||0).toString());Xe.set(In.name,{count:tt.count+gt,revenue:tt.revenue+St})}})}}),it.forEach(vt=>{Tt(parseFloat(vt.amount_paid.toString()),vt.payment_mode||"Unknown","consultation",vt.payment_date,!0)}),wt.forEach(vt=>{var ln,er;const Ot=parseFloat(((er=(ln=vt.subscriptionPlan)==null?void 0:ln.price)==null?void 0:er.toString())??"0"),Vt=vt.subscription_payment_method||"manual";Tt(Ot,Vt,"consultation",vt.subscription_start_date,!0)}),ge.ok){const Ot=(await ge.json()).paymentModeBreakdown||{};Object.entries(Ot).forEach(([Vt,ln])=>{const er=Number(ln);Tt(er,Vt,"debt","",!1)})}O(we.totalCashCollected),E(we.totalRevenue),F(we.pharmacyReturns),$(we.cashByMode),V(we.revenueByMode),ne(we.revenueByType),q(we.detailedRevenue),ze(we.discountByType);const Ve=Object.values(we.byUser).sort((vt,Ot)=>Ot.revenue-vt.revenue);be(Ve),ye({newPatients:ct,returningPatients:Ct,newPatientRevenue:bt,returningPatientRevenue:ke});const jt=Array.from(Xe.entries()).map(([vt,Ot])=>({name:vt,...Ot})).sort((vt,Ot)=>Ot.count-vt.count).slice(0,10);Ae(jt);const kt=We.length>0?we.totalRevenue/We.length:0;if(X(kt),fe&&fe.ok){const vt=await fe.json();ie(vt.totalPaid||0),z(vt.paymentModeBreakdown||{})}const Yn=Array.from(we.dailyRevenue.entries()).sort((vt,Ot)=>new Date(vt[0]).getTime()-new Date(Ot[0]).getTime()).map(([vt,Ot])=>({date:vt,amount:Ot}));je(Yn)}if(ue&&ue.ok){const Ee=await ue.json();Ie(Ee)}}catch(oe){console.error("Analysis Fetch Error:",oe),x("Failed to fetch analysis data. Please try again.")}finally{p(!1)}},[o,c]);v.useEffect(()=>{_(Te=>{const Fe=`analysis-${Te}`,xe=document.getElementById(Fe);xe&&(xe.scrollIntoView({behavior:"smooth",block:"center"}),xe.classList.add("ai-highlight-glow"),setTimeout(()=>xe.classList.remove("ai-highlight-glow"),2e3))})},[_]),v.useEffect(()=>{T(async()=>(await ae(),null))},[T,ae]),v.useEffect(()=>{if(j.startDate&&j.endDate){const Te=j.startDate.toISOString().split("T")[0],Fe=j.endDate.toISOString().split("T")[0];(Te!==o||Fe!==c)&&(l(Te),d(Fe))}},[j]),v.useEffect(()=>{const Te=new URLSearchParams(e.search),Fe=Te.get("section"),xe=Te.get("startDate"),te=Te.get("endDate");if(xe&&te){l(xe),d(te);const oe=j.startDate?j.startDate.toISOString().split("T")[0]:null,_e=j.endDate?j.endDate.toISOString().split("T")[0]:null;(oe!==xe||_e!==te)&&b({startDate:new Date(xe),endDate:new Date(te)})}if(Fe){const oe=`analysis-${Fe}`;setTimeout(()=>{const _e=document.getElementById(oe);_e&&(_e.scrollIntoView({behavior:"smooth",block:"center"}),_e.classList.add("ai-highlight-glow"),setTimeout(()=>_e.classList.remove("ai-highlight-glow"),2e3))},500)}},[e.search]),v.useEffect(()=>{ae()},[o,c,ae]),v.useEffect(()=>{!f&&(k>0||Y)&&S({totalRevenue:C,totalCashFlow:k,totalExpenses:G,netCashFlow:k-G,collectionsBreakdown:B,revenueBreakdown:L,inventoryValue:0,pharmacyRevenue:(H==null?void 0:H.pharmacy)||0,labRevenue:(H==null?void 0:H.lab)||0,dentalRevenue:(H==null?void 0:H.dental)||0,receptionRevenue:((H==null?void 0:H.consultation)||0)+((H==null?void 0:H.other)||0),inventorySummary:Y?{totalItemsAnalyzed:Y.pharmacyAnalysis.length,netPositiveItems:Y.pharmacyAnalysis.filter(Te=>Te.net_change>0).length}:null})},[C,k,G,B,L,Y,H,f,S]);const de=Te=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Te),ee=v.useMemo(()=>L?Object.entries(L).map(([Te,Fe])=>({name:Te,value:Fe})):[],[L]),Ne=v.useMemo(()=>H?[{name:"Consultation",value:H.consultation},{name:"Pharmacy",value:H.pharmacy},{name:"Lab",value:H.lab},{name:"Dental",value:H.dental},{name:"Debt Collections",value:H.debt||0},{name:"Other",value:H.other||0}].filter(Te=>Te.value>0):[],[H]);return r.jsxs("div",{className:at.container,children:[r.jsxs("div",{className:at.header,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>t(-1),className:at.backButton,title:"Go Back",children:[r.jsx(on,{size:20})," Back"]}),r.jsx("h1",{className:at.title,children:"Analysis Dashboard"})]}),r.jsxs("div",{className:at.controls,children:[r.jsxs("div",{className:at.dateInputGroup,children:[r.jsx("label",{className:at.dateInputLabel,children:"From:"}),r.jsx("input",{type:"date",className:at.dateInput,value:o,onChange:Te=>{l(Te.target.value),c&&b({startDate:new Date(Te.target.value),endDate:new Date(c)})}})]}),r.jsxs("div",{className:at.dateInputGroup,children:[r.jsx("label",{className:at.dateInputLabel,children:"To:"}),r.jsx("input",{type:"date",className:at.dateInput,value:c,onChange:Te=>{d(Te.target.value),o&&b({startDate:new Date(o),endDate:new Date(Te.target.value)})}})]})]})]}),g&&r.jsxs("div",{className:at.errorAlert,children:[r.jsx(ea,{size:20}),r.jsx("span",{children:g})]}),!f&&r.jsxs("div",{children:[r.jsxs("section",{className:at.section,id:"analysis-expenses",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(pw,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Cash Flow Analysis"})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Cash Inflow"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-success)"},children:de(k)}),r.jsx("div",{className:at.statSubtitle,children:"Collections (Cash, UPI, etc.)"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Expenses"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-danger)"},children:de(G)}),r.jsx("div",{className:at.statSubtitle,children:"Distributor Payments"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Net Cash Flow"}),r.jsx("div",{className:at.statValue,style:{color:k-G>=0?"var(--accent-success)":"var(--accent-danger)"},children:de(k-G)}),r.jsx("div",{className:at.statSubtitle,children:"Inflow - Outflow"})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Avg. Bill Value"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-primary)"},children:de(le)}),r.jsx("div",{className:at.statSubtitle,children:"Per Visit Average"})]})]}),r.jsxs("div",{className:at.revenueGrid,style:{marginTop:"1rem"},children:[B&&Object.keys(B).length>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Collections Breakdown"}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(B).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:de(Fe)})]},Te))})]}),W&&Object.keys(W).length>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Expense Breakdown"}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(W).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:de(Fe)})]},Te))})]})]})]}),r.jsxs("section",{className:at.section,id:"analysis-financial",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(cd,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Financial Performance"})]}),r.jsx("div",{className:at.statsGrid,children:r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Total Revenue Generated"}),r.jsx("div",{className:at.statValue,style:{color:"var(--accent-primary)"},children:de(C)}),r.jsx("div",{className:at.statSubtitle,children:"Billings & Services (Accrual)"})]})}),r.jsxs("div",{className:at.chartsGrid,children:[r.jsxs("div",{className:at.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{children:"Revenue Trend (Daily)"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(aw,{width:"100%",height:300,children:r.jsxs(IPe,{data:ce,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"var(--accent-primary)",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"var(--accent-primary)",stopOpacity:.05})]})}),r.jsx(pb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(Bc,{dataKey:"date",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(zc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:Te=>`${Te/1e3}k`}),r.jsx(Mi,{content:r.jsx(WA,{})}),r.jsx(Cd,{type:"monotone",dataKey:"amount",stroke:"var(--accent-primary)",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx("h3",{children:"Payment Method Distribution"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(aw,{width:"100%",height:300,children:r.jsxs(zH,{children:[r.jsx(zl,{data:ee,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:ee.map((Te,Fe)=>r.jsx(Fb,{fill:RB[Fe%RB.length]},`cell-${Fe}`))}),r.jsx(Mi,{content:r.jsx(WA,{})}),r.jsx(Ac,{verticalAlign:"bottom",height:36,formatter:Te=>r.jsx("span",{style:{color:"var(--text-primary)"},children:Te})})]})})})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx("h3",{children:"Revenue by Source"}),r.jsx("div",{className:at.chartWrapper,children:r.jsx(aw,{width:"100%",height:300,children:r.jsxs(BH,{data:Ne,children:[r.jsx(pb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx(Bc,{dataKey:"name",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(zc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:Te=>`${Te/1e3}k`}),r.jsx(Mi,{content:r.jsx(WA,{}),cursor:{fill:"var(--bg-primary)"}}),r.jsx(_d,{dataKey:"value",fill:"var(--accent-success)",radius:[4,4,0,0]})]})})})]})]}),Q&&r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(vE,{style:{color:"var(--text-secondary)"},size:20}),r.jsx("h3",{children:"Detailed Breakdown"})]}),Q&&r.jsxs("div",{className:at.revenueGrid,children:[r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:de(((H==null?void 0:H.consultation)||0)+((H==null?void 0:H.other)||0))}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Q.reception).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:de(Fe)})]},Te))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:de((H==null?void 0:H.pharmacy)||0)}),I<0&&r.jsxs("div",{className:`${at.textRed} text-sm mb-2`,children:["Returns: ",de(I)]}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Q.pharmacy).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:de(Fe)})]},Te))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:de((H==null?void 0:H.lab)||0)}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Q.lab).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:de(Fe)})]},Te))})]}),r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:de((H==null?void 0:H.dental)||0)}),r.jsx("ul",{className:at.revenueCardList,children:Object.entries(Q.dental).map(([Te,Fe])=>r.jsxs("li",{className:at.revenueCardListItem,children:[r.jsx("span",{children:Te}),r.jsx("span",{children:de(Fe)})]},Te))})]})]}),Ue&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(mJ,{style:{color:"var(--accent-warning)"},size:20}),r.jsx("h3",{children:"Revenue Lost Due to Discount"})]}),Ue.reception>0||Ue.pharmacy>0||Ue.lab>0||Ue.dental>0||Ue.other>0?r.jsxs("div",{className:at.revenueGrid,children:[Ue.reception>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:de(Ue.reception)})]}),Ue.pharmacy>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:de(Ue.pharmacy)})]}),Ue.lab>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:de(Ue.lab)})]}),Ue.dental>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:de(Ue.dental)})]}),Ue.other>0&&r.jsxs("div",{className:at.revenueCard,children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Others"}),r.jsx("div",{className:at.statValue,style:{fontSize:"1.5rem",color:"var(--accent-warning)",marginBottom:"0"},children:de(Ue.other)})]}),r.jsxs("div",{className:at.revenueCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{className:at.revenueCardTitle,children:"Total Revenue Lost"}),r.jsx("div",{className:at.statValue,style:{fontSize:"2rem",color:"var(--accent-danger)",marginBottom:"0"},children:de(Ue.reception+Ue.pharmacy+Ue.lab+Ue.dental+Ue.other)})]})]}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No discounts applied in this period."})]}),Le&&Le.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(Os,{style:{color:"var(--accent-primary)"},size:20}),r.jsx("h3",{children:"User Performance Breakdown"})]}),r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"User"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Revenue"}),r.jsx("th",{children:"Cash Collected"}),r.jsx("th",{children:"Discount Given"})]})}),r.jsx("tbody",{children:Le.map(Te=>r.jsxs("tr",{children:[r.jsx("td",{children:Te.name}),r.jsx("td",{style:{textTransform:"capitalize"},children:Te.role}),r.jsx("td",{style:{color:"var(--accent-success)"},children:de(Te.revenue)}),r.jsx("td",{children:de(Te.cashFlow)}),r.jsx("td",{style:{color:"var(--accent-warning)"},children:de(Te.discount)})]},Te.id))})]})})]}),me&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(Os,{style:{color:"var(--accent-primary)"},size:20}),r.jsx("h3",{children:"Patient Analytics"})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"New Patients"}),r.jsx("div",{className:at.statValue,children:me.newPatients}),r.jsxs("div",{className:at.statSubtitle,style:{color:"var(--accent-success)"},children:[de(me.newPatientRevenue)," Rev"]})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx("div",{className:at.statTitle,children:"Returning"}),r.jsx("div",{className:at.statValue,children:me.returningPatients}),r.jsxs("div",{className:at.statSubtitle,style:{color:"var(--accent-primary)"},children:[de(me.returningPatientRevenue)," Rev"]})]})]})]}),Ce.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:at.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(ud,{style:{color:"var(--accent-warning)"},size:20}),r.jsx("h3",{children:"Top Performing Items"})]}),r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Quantity Sold"}),r.jsx("th",{children:"Revenue Generated"})]})}),r.jsx("tbody",{children:Ce.map((Te,Fe)=>r.jsxs("tr",{children:[r.jsx("td",{children:Te.name}),r.jsx("td",{children:Te.count}),r.jsx("td",{style:{color:"var(--accent-success)"},children:de(Te.revenue)})]},Fe))})]})})]})]}),r.jsxs("section",{className:at.section,id:"analysis-inventory",children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(ud,{style:{color:"var(--accent-success)"},size:24}),r.jsx("h2",{children:"Inventory Movement"})]}),Y&&Y.pharmacyAnalysis.length>0?r.jsx("div",{className:at.tableContainer,children:r.jsxs("table",{className:at.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Stock In"}),r.jsx("th",{children:"Stock Out"}),r.jsx("th",{children:"Net Change"}),r.jsx("th",{className:at.textRight,children:"Est. Revenue"}),r.jsx("th",{className:at.textRight,children:"Est. Profit"})]})}),r.jsx("tbody",{children:Y.pharmacyAnalysis.map(Te=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:600},children:Te.name}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:Te.supplier})]}),r.jsxs("td",{className:at.textGreen,children:["+",Te.quantity_in,Object.entries(Te.quantity_in_by_reason).map(([Fe,xe])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[Fe,": ",xe]},Fe))]}),r.jsxs("td",{className:at.textRed,children:["-",Te.quantity_out,Object.entries(Te.quantity_out_by_reason).map(([Fe,xe])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[Fe,": ",xe]},Fe))]}),r.jsx("td",{children:r.jsxs("span",{style:{fontWeight:600},className:Te.net_change>=0?at.textGreen:at.textRed,children:[Te.net_change>0?"+":"",Te.net_change]})}),r.jsx("td",{className:at.textRight,children:de(Te.revenue)}),r.jsx("td",{className:`${at.textRight} ${Te.profit>=0?at.textGreen:at.textRed}`,children:de(Te.profit)})]},Te.drug_id))})]})}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No inventory movement recorded for this period."})]})]}),f&&r.jsxs("div",{className:at.loadingContainer,style:{display:"block"},children:[r.jsxs("div",{className:at.sectionTitle,children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:24})]}),r.jsxs("div",{className:at.statsGrid,children:[r.jsxs("div",{className:at.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]}),r.jsxs("div",{className:at.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsxs("div",{className:at.chartsGrid,children:[r.jsxs("div",{className:at.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:250})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:200,variant:"circular",style:{margin:"0 auto"}})]}),r.jsxs("div",{className:at.chartCard,children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:250})]})]})})]})]})},k4e=()=>{const t=Lt(),[e,n]=v.useState([]),[a,i]=v.useState(!0),[,s]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState({name:"",description:"",columns:[]}),g=async()=>{i(!0);try{const C=await se("/api/custom-tables");if(!C.ok)throw new Error("Failed to fetch tables");const E=await C.json();n(E)}catch(C){s(C.message)}finally{i(!1)}};v.useEffect(()=>{g()},[]);const x=C=>{C?(d(C),p({name:C.name,description:C.description,columns:[...C.columns]})):(d(null),p({name:"",description:"",columns:[]})),l(!0)},b=async()=>{try{const C=c?`/api/custom-tables/${c.id}`:"/api/custom-tables";if(!(await se(C,{method:c?"PUT":"POST",body:JSON.stringify(f)})).ok)throw new Error("Failed to save table");l(!1),g()}catch(C){alert(C.message)}},j=async C=>{if(confirm("Are you sure? This will delete all data in this table!"))try{await se(`/api/custom-tables/${C}`,{method:"DELETE"}),g()}catch(E){alert(E.message)}},S=()=>{p(C=>({...C,columns:[...C.columns,{key:`col_${Date.now()}`,label:"New Column",type:"text"}]}))},_=(C,E,k)=>{const O=[...f.columns];O[C]={...O[C],[E]:k},E==="label"&&(O[C].key=k.toLowerCase().replace(/[^a-z0-9]/g,"_")),p(I=>({...I,columns:O}))},T=C=>{p(E=>({...E,columns:E.columns.filter((k,O)=>O!==C)}))};return r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("h1",{children:[r.jsx(Ab,{size:24})," Custom Tables Manager"]}),r.jsxs("button",{className:"primary-button",onClick:()=>x(),children:[r.jsx(Gn,{size:16})," Create New Table"]})]}),a?r.jsx("p",{children:"Loading..."}):r.jsx("div",{className:"tables-grid",children:e.map(C=>r.jsxs("div",{className:"table-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:C.name}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>x(C),children:r.jsx($i,{size:16})}),r.jsx("button",{onClick:()=>j(C.id),className:"danger",children:r.jsx(Vn,{size:16})})]})]}),r.jsx("p",{className:"description",children:C.description||"No description"}),r.jsxs("div",{className:"column-preview",children:[C.columns.length," columns defined"]}),r.jsx("button",{className:"secondary-button",onClick:()=>t(`/custom-tables/${C.id}`),children:"View Data & Records"})]},C.id))}),o&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:c?"Edit Table":"Create New Table"}),r.jsx("button",{onClick:()=>l(!1),children:r.jsx($t,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Table Name"}),r.jsx("input",{value:f.name,onChange:C=>p({...f,name:C.target.value}),placeholder:"e.g., Equipment Log"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("textarea",{value:f.description,onChange:C=>p({...f,description:C.target.value})})]}),r.jsxs("div",{className:"columns-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h3",{children:"Columns"}),r.jsx("button",{onClick:S,className:"icon-button",children:r.jsx(Gn,{size:16})})]}),f.columns.map((C,E)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{value:C.label,onChange:k=>_(E,"label",k.target.value),placeholder:"Column Name"}),r.jsxs("select",{value:C.type,onChange:k=>_(E,"type",k.target.value),children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>T(E),className:"danger",children:r.jsx(Vn,{size:14})})]},E))]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:b,className:"primary-button",children:"Save Table"})})]})})]})},A4e=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState(!1),[b,j]=v.useState(null),[S,_]=v.useState({});v.useEffect(()=>{t&&T()},[t]);const T=async()=>{l(!0);try{const I=await se(`/api/custom-tables/${t}`);if(!I.ok)throw new Error("Failed to fetch table definition");const F=await I.json();a(F);const B=await se(`/api/custom-tables/${t}/records`);if(!B.ok)throw new Error("Failed to fetch records");const $=await B.json();s($)}catch(I){d(I.message)}finally{l(!1)}},C=I=>{I?(j(I),_({...I.data})):(j(null),_({})),x(!0)},E=async()=>{try{const I=b?`/api/custom-tables/records/${b.id}`:`/api/custom-tables/${t}/records`;if(!(await se(I,{method:b?"PUT":"POST",body:JSON.stringify({data:S})})).ok)throw new Error("Failed to save record");x(!1),T()}catch(I){alert(I.message)}},k=async I=>{if(confirm("Delete this record?"))try{await se(`/api/custom-tables/records/${I}`,{method:"DELETE"}),T()}catch(F){alert(F.message)}},O=I=>{const F=S[I.key]||"";switch(I.type){case"boolean":return r.jsxs("select",{value:F,onChange:B=>_({...S,[I.key]:B.target.value}),children:[r.jsx("option",{value:"",children:"Select..."}),r.jsx("option",{value:"true",children:"Yes"}),r.jsx("option",{value:"false",children:"No"})]});case"number":return r.jsx("input",{type:"number",value:F,onChange:B=>_({...S,[I.key]:B.target.value})});case"date":return r.jsx("input",{type:"date",value:F,onChange:B=>_({...S,[I.key]:B.target.value})});default:return r.jsx("input",{type:"text",value:F,onChange:B=>_({...S,[I.key]:B.target.value})})}};return o?r.jsx("div",{className:"p-4",children:"Loading..."}):c||!n?r.jsxs("div",{className:"p-4 error",children:["Error: ",c||"Table not found"]}):r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[r.jsx("button",{onClick:()=>e("/custom-tables"),className:"icon-button",children:r.jsx(on,{size:20})}),r.jsx("h1",{children:n.name})]}),r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>p(!1),className:`view-mode-btn ${f?"":"active"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>p(!0),className:`view-mode-btn ${f?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(xf,{size:18})," Excel"]})]}),r.jsxs("button",{className:"primary-button",onClick:()=>C(),children:[r.jsx(Gn,{size:16})," Add Record"]})]}),r.jsx("div",{className:"table-wrapper",style:{background:"var(--bg-card)",borderRadius:"12px",padding:"20px",overflowX:"auto"},children:f?r.jsx(Ib,{columns:n.columns.map(I=>({key:I.key,label:I.label,editable:!0,type:I.type})),data:i.map(I=>({...I.data,id:I.id})),editable:!0,showRowNumbers:!0,title:n.name,onSave:async I=>{const F=I.map(async B=>{const $=i.find(L=>L.id===B.id);if($&&JSON.stringify($.data)!==JSON.stringify(B)){const{id:L,...V}=B;if(JSON.stringify($.data)!==JSON.stringify(V))return se(`/api/custom-tables/records/${B.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:V})})}});try{await Promise.all(F),T()}catch(B){alert("Error saving changes"),console.error(B)}}}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[n.columns.map(I=>r.jsx("th",{style:{textAlign:"left",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:I.label},I.key)),r.jsx("th",{style:{width:"100px",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:"Actions"})]})}),r.jsx("tbody",{children:i.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:n.columns.length+1,style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"No records yet"})}):i.map(I=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.columns.map(F=>r.jsx("td",{style:{padding:"12px"},children:F.type==="boolean"?I.data[F.key]==="true"?"Yes":"No":String(I.data[F.key]||"-")},F.key)),r.jsx("td",{style:{padding:"12px"},children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>C(I),className:"icon-button",children:r.jsx($i,{size:16})}),r.jsx("button",{onClick:()=>k(I.id),className:"icon-button",style:{color:"#dc3545"},children:r.jsx(Vn,{size:16})})]})})]},I.id))})]})}),g&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:b?"Edit Record":"Add New Record"}),r.jsx("button",{onClick:()=>x(!1),children:r.jsx($t,{size:20})})]}),r.jsx("div",{className:"modal-body",children:n.columns.map(I=>r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:I.label}),O(I)]},I.key))}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:E,className:"primary-button",children:"Save Record"})})]})})]})},E4e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(""),o=Lt();v.useEffect(()=>{l()},[]);const l=async()=>{try{const p=await se("/api/dashboards");if(p.ok){const g=await p.json();e(g)}}catch(p){console.error("Error fetching dashboards:",p)}finally{a(!1)}},c=async(p,g)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this dashboard?"))try{await se(`/api/dashboards/${g}`,{method:"DELETE"}),e(t.filter(x=>x.id!==g))}catch(x){console.error("Error deleting dashboard:",x)}},d=p=>{try{const g=new Date(p);return g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:g.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}},f=t.filter(p=>p.name.toLowerCase().includes(i.toLowerCase())||p.description&&p.description.toLowerCase().includes(i.toLowerCase()));return r.jsxs("div",{className:"custom-dashboards-container",children:[r.jsxs("div",{className:"cdp-header",children:[r.jsxs("div",{className:"cdp-title-row",children:[r.jsxs("div",{className:"cdp-title",children:[r.jsx("div",{className:"cdp-icon",children:r.jsx(xf,{size:20})}),r.jsxs("div",{children:[r.jsx("h1",{children:"Custom Dashboards"}),r.jsxs("span",{className:"cdp-subtitle",children:[t.length," dashboard",t.length!==1?"s":""]})]})]}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(Gn,{size:16}),r.jsx("span",{className:"cdp-btn-text",children:"Create"})]})]}),t.length>0&&r.jsxs("div",{className:"cdp-search",children:[r.jsx(Fn,{size:16}),r.jsx("input",{type:"text",placeholder:"Search dashboards...",value:i,onChange:p=>s(p.target.value)})]})]}),r.jsx("div",{className:"cdp-content",children:n?r.jsx("div",{className:"cdp-grid",children:[1,2,3,4,5,6].map(p=>r.jsxs("div",{className:"cdp-card",style:{cursor:"default"},children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx(Z,{width:18,height:18,variant:"circular"}),r.jsx(Z,{width:80,height:12})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx(Z,{width:"70%",height:24,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"90%",height:16})]}),r.jsxs("div",{className:"cdp-card-footer",style:{borderTop:"none"},children:[r.jsx(Z,{width:60,height:32}),r.jsx(Z,{width:60,height:32}),r.jsx(Z,{width:32,height:32})]})]},p))}):f.length===0?r.jsxs("div",{className:"cdp-empty",children:[r.jsx("div",{className:"cdp-empty-icon",children:r.jsx(Zm,{size:48})}),i?r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No results found"}),r.jsx("p",{children:"Try a different search term"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No dashboards yet"}),r.jsx("p",{children:"Create your first custom dashboard to get started"}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(Gn,{size:16})," Create Dashboard"]})]})]}):r.jsx("div",{className:"cdp-grid",children:f.map(p=>r.jsxs("div",{className:"cdp-card",onClick:()=>o(`/dashboards/${p.id}`),children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx("div",{className:"cdp-card-icon",children:r.jsx(Zm,{size:18})}),r.jsx("div",{className:"cdp-card-meta",children:p.created_at&&r.jsxs("span",{className:"cdp-card-date",children:[r.jsx(ua,{size:12}),d(p.created_at)]})})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx("h3",{children:p.name}),r.jsx("p",{children:p.description||"No description"})]}),r.jsxs("div",{className:"cdp-card-footer",children:[r.jsxs("button",{className:"cdp-action-btn cdp-view-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}`)},children:[r.jsx(Im,{size:14}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{className:"cdp-action-btn cdp-edit-btn",onClick:g=>{g.stopPropagation(),o(`/dashboards/${p.id}/edit`)},children:[r.jsx($i,{size:14}),r.jsx("span",{children:"Edit"})]}),r.jsx("button",{className:"cdp-action-btn cdp-delete-btn",onClick:g=>c(g,p.id),children:r.jsx(Vn,{size:14})})]})]},p.id))})})]})},P4e=({isOpen:t,onClose:e,onConfirm:n})=>{const[a,i]=v.useState({}),[s,o]=v.useState(""),[l,c]=v.useState(""),[d,f]=v.useState([]),[p,g]=v.useState([]),[x,b]=v.useState(!1);v.useEffect(()=>{t&&j()},[t]);const j=async()=>{b(!0);try{const I=await se("/api/dashboards/table-relations");if(I.ok){const F=await I.json();i(F);const B=Object.keys(F);B.length>0&&o(B[0])}}catch(I){console.error("Error fetching table relations:",I)}finally{b(!1)}},S=I=>{o(I),c(""),f([]),g([])},_=I=>{c(I),g([])},T=(I,F,B)=>{I.includes(B)?F(I.filter($=>$!==B)):F([...I,B])},C=()=>{var I,F;if(!s||!l){alert("Please select both primary and related tables");return}if(d.length===0&&p.length===0){alert("Please select at least one column");return}n({primary:s,related:l,primaryColumns:d,relatedColumns:p,primaryLabel:((I=a[s])==null?void 0:I.label)||s,relatedLabel:((F=a[l])==null?void 0:F.label)||l}),e()};if(!t)return null;const E=a[s],k=(E==null?void 0:E.relations)||{},O=a[l];return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{children:[r.jsx(Vz,{size:18})," Join Tables Builder"]}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx($t,{size:20})})]}),x?r.jsx("div",{children:"Loading tables..."}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",padding:"20px"},children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 1:"})," Select Primary Table"]}),r.jsx("select",{value:s,onChange:I=>S(I.target.value),style:{width:"100%",padding:"8px"},children:Object.entries(a).filter(([I,F])=>Object.keys(F.relations).length>0).map(([I,F])=>r.jsx("option",{value:I,children:F.label},I))})]}),s&&Object.keys(k).length>0&&r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 2:"})," Select Related Table"]}),r.jsxs("select",{value:l,onChange:I=>_(I.target.value),style:{width:"100%",padding:"8px"},children:[r.jsx("option",{value:"",children:"-- Select --"}),Object.entries(k).map(([I,F])=>r.jsxs("option",{value:I,children:[F.label," (via ",F.foreignKey,")"]},I))]})]}),s&&E&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",E.label,":"]})}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px"},children:E.columns.map(I=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",background:d.includes(I)?"#e0f0ff":"#f0f0f0",padding:"4px 8px",borderRadius:"4px"},children:[r.jsx("input",{type:"checkbox",checked:d.includes(I),onChange:()=>T(d,f,I)}),I]},I))})]}),l&&O&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",O.label,":"]})}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px"},children:O.columns.map(I=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",background:p.includes(I)?"#e0ffe0":"#f0f0f0",padding:"4px 8px",borderRadius:"4px"},children:[r.jsx("input",{type:"checkbox",checked:p.includes(I),onChange:()=>T(p,g,I)}),I]},I))})]}),d.length>0||p.length>0?r.jsxs("div",{style:{background:"#f8f9fa",padding:"10px",borderRadius:"4px"},children:[r.jsx("strong",{children:"Preview Columns:"}),r.jsxs("div",{style:{marginTop:"5px",fontSize:"0.9em"},children:[d.map(I=>r.jsxs("span",{style:{marginRight:"8px",color:"#0066cc"},children:[E==null?void 0:E.label,".",I]},I)),p.map(I=>r.jsxs("span",{style:{marginRight:"8px",color:"#009900"},children:[O==null?void 0:O.label,".",I]},I))]})]}):null]}),r.jsxs("div",{className:"modal-actions",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsx("button",{onClick:e,children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:C,disabled:!l,children:"Create Joined Widget"})]})]})})},O4e=({isOpen:t,onClose:e,onCreated:n})=>{const[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([{key:"name",label:"Name",type:"text"}]),[d,f]=v.useState(!1),p=()=>{c([...l,{key:"",label:"",type:"text"}])},g=j=>{c(l.filter((S,_)=>_!==j))},x=(j,S,_)=>{const T=[...l];T[j]={...T[j],[S]:_},S==="label"&&!T[j].key&&(T[j].key=_.toLowerCase().replace(/\s+/g,"_")),c(T)},b=async()=>{if(!a.trim()){alert("Table name is required");return}if(l.length===0||l.some(j=>!j.key||!j.label)){alert("All columns must have a key and label");return}f(!0);try{(await se("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,description:s,columns:l})})).ok?(n(),e(),i(""),o(""),c([{key:"name",label:"Name",type:"text"}])):alert("Failed to create table")}catch(j){console.error("Error creating table:",j),alert("Error creating table")}finally{f(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content create-table-modal-content",children:[r.jsxs("div",{className:"create-table-header",children:[r.jsxs("h3",{children:[r.jsx(Ab,{size:20})," Create Custom Table"]}),r.jsx("button",{onClick:e,className:"close-btn",children:r.jsx($t,{size:20})})]}),r.jsxs("div",{className:"form-content",children:[r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Table Name *"}),r.jsx("input",{type:"text",value:a,onChange:j=>i(j.target.value),placeholder:"e.g., Patient Notes, Appointments",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:s,onChange:j=>o(j.target.value),placeholder:"Optional description",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Columns"}),r.jsx("div",{className:"columns-container",children:l.map((j,S)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{type:"text",value:j.label,onChange:_=>x(S,"label",_.target.value),placeholder:"Column label",className:"modal-input column-label-input"}),r.jsx("input",{type:"text",value:j.key,onChange:_=>x(S,"key",_.target.value),placeholder:"key",className:"modal-input column-key-input"}),r.jsxs("select",{value:j.type,onChange:_=>x(S,"type",_.target.value),className:"column-type-select",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>g(S),className:"remove-col-btn",disabled:l.length<=1,children:r.jsx(Vn,{size:16})})]},S))}),r.jsxs("button",{onClick:p,className:"add-col-btn",children:[r.jsx(Gn,{size:14})," Add Column"]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:b,disabled:d,className:"create-button",children:d?"Creating...":"Create Table"})]})]})}):null},LB=()=>{const{id:t}=Fa(),e=Lt(),n=!!t,[a,i]=v.useState(""),[s,o]=v.useState(""),[l,c]=v.useState([]),[d,f]=v.useState(!1),[p,g]=v.useState([]),[x,b]=v.useState(!1),[j,S]=v.useState("stat"),[_,T]=v.useState(""),[C,E]=v.useState("api:patients"),[k,O]=v.useState([]),[I,F]=v.useState(!1),[B,$]=v.useState(!1);v.useEffect(()=>{L(),n&&V()},[t]);const L=async()=>{try{const W=await se("/api/dashboards/data-sources");if(W.ok){const z=await W.json();g(z),z.length>0&&E(z[0].key)}}catch(W){console.error("Error fetching data sources:",W)}},V=async()=>{try{const W=await se(`/api/dashboards/${t}`);if(W.ok){const z=await W.json();i(z.name),o(z.description),c(z.widgets||[])}}catch(W){console.error("Error fetching dashboard:",W)}},H=async()=>{if(!a.trim())return alert("Name is required");f(!0);try{const W={name:a,description:s,widgets:l},z=n?`/api/dashboards/${t}`:"/api/dashboards";(await se(z,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).ok?e("/dashboards"):alert("Failed to save dashboard")}catch(W){console.error("Error saving dashboard:",W)}finally{f(!1)}},ne=()=>{var ce;const W=p.find(je=>je.key===C),z={id:Date.now().toString(),type:j,title:_||(W==null?void 0:W.label)||"New Widget",dataSource:C,config:{columns:k.length>0?k:((ce=W==null?void 0:W.columns)==null?void 0:ce.slice(0,3))||[]}};c([...l,z]),b(!1),T(""),O([])},Q=W=>{c(l.filter(z=>z.id!==W))},q=W=>{E(W),O([])},G=p.find(W=>W.key===C),ie=W=>{const z={id:Date.now().toString(),type:"table",title:`${W.primaryLabel} + ${W.relatedLabel}`,dataSource:`dynamic:${W.primary}:${W.related}`,config:{primaryColumns:W.primaryColumns,relatedColumns:W.relatedColumns}};c([...l,z])};return r.jsxs("div",{className:"dashboard-builder-container",children:[r.jsxs("div",{className:"builder-header",children:[r.jsxs("button",{className:"back-btn",onClick:()=>e("/dashboards"),children:[r.jsx(on,{size:16})," Back"]}),r.jsxs("div",{className:"title-inputs",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:a,onChange:W=>i(W.target.value),className:"dashboard-name-input"}),r.jsx("input",{type:"text",placeholder:"Description (Optional)",value:s,onChange:W=>o(W.target.value),className:"dashboard-desc-input"})]}),r.jsxs("button",{className:"primary-button",onClick:H,disabled:d,children:[r.jsx(cs,{size:16})," ",d?"Saving...":"Save Dashboard"]})]}),r.jsx("div",{className:"widgets-area",children:l.length===0?r.jsxs("div",{className:"empty-canvas",children:[r.jsx("p",{children:"Canvas is empty. Add a widget to start."}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"},children:[r.jsxs("button",{onClick:()=>b(!0),className:"add-widget-btn",children:[r.jsx(Gn,{size:16})," Add Widget"]}),r.jsxs("button",{onClick:()=>F(!0),className:"add-widget-btn",style:{background:"#2196F3"},children:[r.jsx(Vz,{size:16})," Create Joined Widget"]}),r.jsxs("button",{onClick:()=>$(!0),className:"add-widget-btn",style:{background:"#4CAF50"},children:[r.jsx(Ab,{size:16})," Create Custom Table"]})]})]}):r.jsxs("div",{className:"widgets-grid",children:[l.map(W=>r.jsxs("div",{className:"widget-wrapper",children:[r.jsx("div",{className:"widget-actions-overlay",children:r.jsx("button",{onClick:()=>Q(W.id),className:"remove-widget-btn",children:r.jsx(Vn,{size:14})})}),r.jsx(AM,{widget:W})]},W.id)),r.jsxs("div",{className:"add-more-card",onClick:()=>b(!0),children:[r.jsx(Gn,{size:24}),r.jsx("span",{children:"Add Widget"})]})]})}),x&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("h3",{children:"Add Widget"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title (Optional)"}),r.jsx("input",{type:"text",placeholder:"Leave blank for auto-title",value:_,onChange:W=>T(W.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type"}),r.jsxs("select",{value:j,onChange:W=>S(W.target.value),children:[r.jsx("option",{value:"stat",children:"Statistic (Count)"}),r.jsx("option",{value:"table",children:"Table (List)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Data Source"}),r.jsxs("select",{value:C,onChange:W=>q(W.target.value),children:[r.jsx("optgroup",{label:"Single Tables",children:p.filter(W=>!W.isCustom&&!W.isJoin).map(W=>r.jsx("option",{value:W.key,children:W.label},W.key))}),p.some(W=>W.isJoin)&&r.jsx("optgroup",{label:"Joined Tables (Multi-Table)",children:p.filter(W=>W.isJoin).map(W=>r.jsx("option",{value:W.key,children:W.label},W.key))}),p.some(W=>W.isCustom)&&r.jsx("optgroup",{label:"Custom Tables",children:p.filter(W=>W.isCustom).map(W=>r.jsx("option",{value:W.key,children:W.label},W.key))})]}),G&&r.jsx("small",{style:{color:"#666"},children:G.description})]}),j==="table"&&(G==null?void 0:G.columns)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Columns to Display (select multiple)"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:G.columns.map(W=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:k.includes(W),onChange:z=>{z.target.checked?O([...k,W]):O(k.filter(ce=>ce!==W))}}),W]},W))})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>b(!1),children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:ne,children:"Add"})]})]})}),r.jsx(P4e,{isOpen:I,onClose:()=>F(!1),onConfirm:ie}),r.jsx(O4e,{isOpen:B,onClose:()=>$(!1),onCreated:()=>L()})]})},D4e=()=>{const{id:t}=Fa(),e=Lt(),[n,a]=v.useState(null);if(v.useEffect(()=>{(async()=>{try{const o=await se(`/api/dashboards/${t}`);if(o.ok){const l=await o.json();a(l)}}catch(o){console.error("Error fetching dashboard:",o)}})()},[t]),!n)return r.jsx("div",{className:"temp-dash-empty",children:"Loading..."});const i=n.widgets||[];return r.jsxs("div",{className:"saved-dash-container",children:[r.jsxs("div",{className:"saved-dash-header",children:[r.jsxs("div",{className:"saved-dash-title-group",children:[r.jsx("button",{className:"saved-dash-back-btn",onClick:()=>e("/dashboards"),children:r.jsx(on,{size:16})}),r.jsx("div",{className:"saved-dash-icon",children:r.jsx(Zm,{size:16})}),r.jsxs("div",{className:"saved-dash-title-text",children:[r.jsx("h2",{children:n.name}),n.description&&r.jsx("span",{className:"saved-dash-description",children:n.description})]})]}),r.jsx("div",{className:"saved-dash-actions",children:r.jsxs("button",{className:"saved-dash-edit-btn",onClick:()=>e(`/dashboards/${t}/edit`),children:[r.jsx($i,{size:12})," Edit"]})})]}),r.jsx("div",{className:"saved-dash-body",children:i.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets in this dashboard. Click Edit to add some!"}):r.jsx("div",{className:"temp-dash-grid",children:i.map((s,o)=>r.jsx(AM,{widget:s,autoHideEmptyColumns:!0},s.id||`view-widget-${o}`))})})]})},YA=["#8b5cf6","#3b82f6","#06b6d4","#10b981","#22c55e","#f59e0b","#f97316","#ef4444","#ec4899","#a855f7"],M4e=()=>{const[t,e]=v.useState([]),[n,a]=v.useState(!0),[i,s]=v.useState(null),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState({name:"",key:"",color:"#6b7280",description:""}),[g,x]=v.useState(!1),b=async()=>{a(!0),s(null);try{const B=await se("/api/clinic-roles");if(B.ok){const $=await B.json();e($)}else s("Failed to load roles")}catch{s("Failed to connect to server")}finally{a(!1)}};v.useEffect(()=>{b()},[]);const j=B=>B.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),S=B=>{p($=>({...$,name:B,key:o?$.key:j(B)}))},_=async()=>{if(f.name.trim()){x(!0);try{const B=await se("/api/clinic-roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),key:f.key||j(f.name),color:f.color,description:f.description.trim()||null})});if(B.ok)await b(),d(!1),p({name:"",key:"",color:"#6b7280",description:""});else{const $=await B.json();s($.message||"Failed to create role")}}catch{s("Failed to create role")}finally{x(!1)}}},T=async()=>{if(!(!o||!f.name.trim())){x(!0);try{const B=await se(`/api/clinic-roles/${o.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),color:f.color,description:f.description.trim()||null})});if(B.ok)await b(),l(null),p({name:"",key:"",color:"#6b7280",description:""});else{const $=await B.json();s($.message||"Failed to update role")}}catch{s("Failed to update role")}finally{x(!1)}}},C=async B=>{if(!B.isSystem&&window.confirm(`Delete role "${B.name}"? This cannot be undone.`))try{const $=await se(`/api/clinic-roles/${B.id}`,{method:"DELETE"});if($.ok)await b();else{const L=await $.json();s(L.message||"Failed to delete role")}}catch{s("Failed to delete role")}},E=B=>{l(B),p({name:B.name,key:B.key,color:B.color,description:B.description||""}),d(!1)},k=()=>{d(!0),l(null),p({name:"",key:"",color:YA[Math.floor(Math.random()*YA.length)],description:""})},O=()=>{d(!1),l(null),p({name:"",key:"",color:"#6b7280",description:""})},I=t.filter(B=>B.isSystem),F=t.filter(B=>!B.isSystem);return r.jsxs("div",{className:"role-management-page",children:[r.jsxs("div",{className:"role-management-header",children:[r.jsxs("div",{className:"header-title",children:[r.jsx(tg,{size:28}),r.jsxs("div",{children:[r.jsx("h1",{children:"Role Management"}),r.jsx("p",{children:"Manage custom roles for your clinic staff"})]})]}),r.jsxs("button",{className:"create-role-btn",onClick:k,disabled:c,children:[r.jsx(Gn,{size:18}),"Create Custom Role"]})]}),i&&r.jsxs("div",{className:"role-error-banner",children:[r.jsx(ea,{size:18}),i,r.jsx("button",{onClick:()=>s(null),children:r.jsx($t,{size:16})})]}),(c||o)&&r.jsxs("div",{className:"role-form-card",children:[r.jsx("h3",{children:o?"Edit Role":"Create New Role"}),r.jsxs("div",{className:"role-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Name *"}),r.jsx("input",{type:"text",value:f.name,onChange:B=>S(B.target.value),placeholder:"e.g., Senior Doctor, Ward Nurse"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Key"}),r.jsx("input",{type:"text",value:f.key,onChange:B=>p($=>({...$,key:B.target.value})),placeholder:"auto-generated",disabled:!!o})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:f.description,onChange:B=>p($=>({...$,description:B.target.value})),placeholder:"Brief description of role responsibilities"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx(sJ,{size:14}),"Color"]}),r.jsxs("div",{className:"color-picker",children:[YA.map(B=>r.jsx("button",{className:`color-option ${f.color===B?"selected":""}`,style:{background:B},onClick:()=>p($=>({...$,color:B}))},B)),r.jsx("input",{type:"color",value:f.color,onChange:B=>p($=>({...$,color:B.target.value})),className:"custom-color-input"})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"cancel-btn",onClick:O,children:"Cancel"}),r.jsxs("button",{className:"save-btn",onClick:o?T:_,disabled:g||!f.name.trim(),children:[r.jsx(Lo,{size:16}),g?"Saving...":o?"Update Role":"Create Role"]})]})]})]}),r.jsxs("div",{className:"roles-container",children:[r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"System Roles"}),r.jsx("p",{className:"section-desc",children:"Default roles - can be customized but not deleted"}),n?r.jsx("div",{className:"roles-grid",children:[1,2,3].map(B=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",style:{marginBottom:"10px"},children:[r.jsx(Z,{variant:"circular",width:12,height:12,style:{marginRight:"8px"}}),r.jsx(Z,{width:100,height:20})]}),r.jsx(Z,{width:80,height:16,style:{marginBottom:"10px"}}),r.jsx(Z,{width:"100%",height:20}),r.jsx("div",{className:"role-actions",style:{marginTop:"15px"},children:r.jsx(Z,{width:60,height:24})})]},B))}):r.jsx("div",{className:"roles-grid",children:I.map(B=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:B.color}}),r.jsx("span",{className:"role-name",children:B.name}),r.jsx("span",{className:"system-badge",children:"System"})]}),r.jsx("div",{className:"role-key",children:B.key}),B.description&&r.jsx("div",{className:"role-description",children:B.description}),r.jsx("div",{className:"role-actions",children:r.jsxs("button",{className:"edit-role-btn",onClick:()=>E(B),children:[r.jsx(ro,{size:14}),"Edit"]})})]},B.id))})]}),r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"Custom Roles"}),r.jsx("p",{className:"section-desc",children:"Roles created for your clinic"}),F.length===0?r.jsxs("div",{className:"no-roles",children:[r.jsx(tg,{size:32}),r.jsx("p",{children:"No custom roles created yet"}),r.jsxs("button",{onClick:k,children:[r.jsx(Gn,{size:16}),"Create your first custom role"]})]}):r.jsx("div",{className:"roles-grid",children:F.map(B=>r.jsxs("div",{className:"role-card custom",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:B.color}}),r.jsx("span",{className:"role-name",children:B.name})]}),r.jsx("div",{className:"role-key",children:B.key}),B.description&&r.jsx("div",{className:"role-description",children:B.description}),r.jsxs("div",{className:"role-actions",children:[r.jsxs("button",{className:"edit-role-btn",onClick:()=>E(B),children:[r.jsx(ro,{size:14}),"Edit"]}),r.jsxs("button",{className:"delete-role-btn",onClick:()=>C(B),children:[r.jsx(Vn,{size:14}),"Delete"]})]})]},B.id))})]})]})]})},I4e="_container_16815_47",R4e="_progressBar_16815_67",L4e="_sidebar_16815_97",F4e="_sidebarTitle_16815_161",$4e="_searchBox_16815_193",B4e="_searchInput_16815_203",z4e="_searchIcon_16815_237",q4e="_navSection_16815_255",U4e="_navSectionTitle_16815_263",V4e="_navLink_16815_287",H4e="_activeNavLink_16815_367",G4e="_navLinkIcon_16815_387",W4e="_content_16815_409",Y4e="_header_16815_425",K4e="_headerContent_16815_493",Q4e="_title_16815_503",X4e="_subtitle_16815_563",J4e="_headerBadges_16815_575",Z4e="_headerBadge_16815_575",e3e="_section_16815_625",t3e="_sectionTitle_16815_665",n3e="_sectionTitleIcon_16815_689",r3e="_sectionContent_16815_713",a3e="_featureList_16815_751",i3e="_featureItem_16815_767",s3e="_featureIcon_16815_799",o3e="_featureText_16815_813",l3e="_infoBox_16815_839",c3e="_infoBoxTitle_16815_881",u3e="_infoBoxContent_16815_903",d3e="_workflowList_16815_917",h3e="_kbd_16815_959",f3e="_moduleLinkBtn_16815_1179",p3e="_uiGrid_16815_1231",m3e="_uiCard_16815_1245",g3e="_uiLabel_16815_1277",y3e="_demoBtn_16815_1301",x3e="_demoBtnPrimary_16815_1323",v3e="_demoBtnSecondary_16815_1335",b3e="_demoBtnDanger_16815_1347",j3e="_demoBadge_16815_1361",w3e="_demoBadgeSuccess_16815_1385",N3e="_demoBadgeWarning_16815_1397",S3e="_demoBadgeError_16815_1409",_3e="_iconRow_16815_1421",C3e="_faqList_16815_1455",T3e="_faqItem_16815_1469",k3e="_faqQuestion_16815_1493",A3e="_faqIcon_16815_1523",E3e="_faqIconOpen_16815_1533",P3e="_faqAnswer_16815_1541",O3e="_footer_16815_1587",D3e="_footerText_16815_1605",M3e="_footerBrand_16815_1617",I3e="_floatingParticles_16815_1641",R3e="_particle_16815_1663",L3e="_headerLabel_16815_1817",F3e="_waveEmoji_16815_1845",$3e="_headerActions_16815_1857",B3e="_headerBtn_16815_1871",z3e="_headerBtnSecondary_16815_1913",q3e="_statsSection_16815_1963",U3e="_statCard_16815_1977",V3e="_statIcon_16815_2009",H3e="_statValue_16815_2039",G3e="_statLabel_16815_2053",W3e="_quickTipsSection_16815_2073",Y3e="_quickTipsHeader_16815_2089",K3e="_tipNav_16815_2123",Q3e="_tipCard_16815_2185",X3e="_tipIcon_16815_2231",J3e="_tipContent_16815_2251",Z3e="_tipIndicators_16815_2279",e6e="_tipIndicator_16815_2279",t6e="_tipIndicatorActive_16815_2323",n6e="_shortcutsGrid_16815_2343",r6e="_shortcutCard_16815_2357",a6e="_shortcutCardActive_16815_2383",i6e="_shortcutKeys_16815_2397",s6e="_kbdPlus_16815_2411",o6e="_kbdActive_16815_2423",l6e="_shortcutInfo_16815_2437",c6e="_shortcutAction_16815_2445",u6e="_shortcutDesc_16815_2459",d6e="_fabContainer_16815_3077",h6e="_fabButton_16815_3099",f6e="_fabContent_16815_3141",p6e="_contactRow_16815_3195",m6e="_contactIcon_16815_3213",g6e="_copyBtn_16815_3223",Me={container:I4e,progressBar:R4e,sidebar:L4e,sidebarTitle:F4e,searchBox:$4e,searchInput:B4e,searchIcon:z4e,navSection:q4e,navSectionTitle:U4e,navLink:V4e,activeNavLink:H4e,navLinkIcon:G4e,content:W4e,header:Y4e,headerContent:K4e,title:Q4e,subtitle:X4e,headerBadges:J4e,headerBadge:Z4e,section:e3e,sectionTitle:t3e,sectionTitleIcon:n3e,sectionContent:r3e,featureList:a3e,featureItem:i3e,featureIcon:s3e,featureText:o3e,infoBox:l3e,infoBoxTitle:c3e,infoBoxContent:u3e,workflowList:d3e,kbd:h3e,moduleLinkBtn:f3e,uiGrid:p3e,uiCard:m3e,uiLabel:g3e,demoBtn:y3e,demoBtnPrimary:x3e,demoBtnSecondary:v3e,demoBtnDanger:b3e,demoBadge:j3e,demoBadgeSuccess:w3e,demoBadgeWarning:N3e,demoBadgeError:S3e,iconRow:_3e,faqList:C3e,faqItem:T3e,faqQuestion:k3e,faqIcon:A3e,faqIconOpen:E3e,faqAnswer:P3e,footer:O3e,footerText:D3e,footerBrand:M3e,floatingParticles:I3e,particle:R3e,headerLabel:L3e,waveEmoji:F3e,headerActions:$3e,headerBtn:B3e,headerBtnSecondary:z3e,statsSection:q3e,statCard:U3e,statIcon:V3e,statValue:H3e,statLabel:G3e,quickTipsSection:W3e,quickTipsHeader:Y3e,tipNav:K3e,tipCard:Q3e,tipIcon:X3e,tipContent:J3e,tipIndicators:Z3e,tipIndicator:e6e,tipIndicatorActive:t6e,shortcutsGrid:n6e,shortcutCard:r6e,shortcutCardActive:a6e,shortcutKeys:i6e,kbdPlus:s6e,kbdActive:o6e,shortcutInfo:l6e,shortcutAction:c6e,shortcutDesc:u6e,fabContainer:d6e,fabButton:h6e,fabContent:f6e,contactRow:p6e,contactIcon:m6e,copyBtn:g6e},y6e=(t,e=2e3)=>{const[n,a]=v.useState(0),[i,s]=v.useState(!1),o=v.useRef(null);return v.useEffect(()=>{const l=new IntersectionObserver(([c])=>{c.isIntersecting&&s(!0)},{threshold:.3});return o.current&&l.observe(o.current),()=>l.disconnect()},[]),v.useEffect(()=>{if(!i)return;let l=null;const c=d=>{l||(l=d);const f=Math.min((d-l)/e,1);a(Math.floor(f*t)),f<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[i,t,e]),{count:n,ref:o}},x6e=()=>{const[t,e]=v.useState("getting-started"),[n,a]=v.useState(""),[i,s]=v.useState(0),[o,l]=v.useState(null),[c,d]=v.useState(!1),[f,p]=v.useState(0),[g,x]=v.useState(null),b=v.useRef(null),j=v.useCallback(()=>{const F=document.documentElement.scrollHeight-window.innerHeight,B=window.scrollY/F*100;s(Math.min(B,100))},[]);v.useEffect(()=>{const F=()=>{const B=document.querySelectorAll("section[id]");let $="";B.forEach(L=>{const V=L.offsetTop;window.scrollY>=V-120&&($=L.getAttribute("id")||"")}),$&&e($),j()};return window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F)},[j]);const S=F=>{const B=document.getElementById(F);B&&window.scrollTo({top:B.offsetTop-80,behavior:"smooth"})},_={navigation:[{id:"getting-started",label:"Getting Started",icon:EI},{id:"clinical-workflow",label:"Doctor Workflow",icon:dw},{id:"financial-mgmt",label:"Financial Control",icon:cd},{id:"analytics",label:"Analytics & Insights",icon:vE},{id:"pharmacy-inventory",label:"Pharmacy & Stock",icon:ud},{id:"advanced-lab",label:"Advanced Lab Mgmt",icon:ls},{id:"ipd-admission",label:"IPD & Admission",icon:bf},{id:"custom-data",label:"System Customization",icon:xf},{id:"admin",label:"Administration",icon:dd}],reference:[{id:"ui-reference",label:"Interface & UI",icon:Im},{id:"troubleshooting",label:"Troubleshooting",icon:fj}]},T=F=>n?F.filter(B=>B.label.toLowerCase().includes(n.toLowerCase())):F,C=({id:F,label:B,Icon:$})=>r.jsxs("a",{className:`${Me.navLink} ${t===F?Me.activeNavLink:""}`,onClick:()=>S(F),children:[r.jsx($,{className:Me.navLinkIcon,size:18}),B]}),E=[{question:"Bill not printing correctly?",answer:"Ensure pop-ups are not blocked in your browser. Also, check if your printer is properly configured in system settings. For thermal printers, verify the paper size matches the bill format."},{question:"Sync issues with data?",answer:"Make sure your internet connection is stable. The system auto-syncs when online. You can also manually trigger sync from the settings menu. If issues persist, try clearing browser cache."},{question:"How to reset my password?",answer:"Contact your clinic administrator who can reset your password from the Staff Management section. For security reasons, passwords cannot be self-reset without admin approval."},{question:"AI suggestions not appearing?",answer:'AI features require an active internet connection. Also ensure AI features are enabled in Clinic Settings under the "AI & Automation" tab.'},{question:"How do I record a partial payment for patient debt?",answer:"Navigate to Financial Control -> Patient Debts. Click on a patient's name to view their full transaction history. Use the payment recording form at the bottom to enter the amount paid and save."},{question:"How can I set up normal ranges for Lab tests?",answer:"Go to Advanced Lab Management -> Test Master. Click 'Edit' on a test, then go to the 'Parameters' tab. Here you can define min/max values, units, and default results."}],k=[{icon:CI,title:"Pro Tip: Voice Commands",description:'Use the AI Command Bar to speak naturally. Say "Create prescription for John" to get started instantly!',color:"#f59e0b"},{icon:DI,title:"Speed Boost",description:"Double-click any patient name in the queue to instantly open their full history.",color:"#8b5cf6"},{icon:KJ,title:"Smart Billing",description:"The system auto-suggests medicine quantities based on prescription duration!",color:"#10b981"},{icon:OI,title:"Favorites",description:"Star frequently prescribed medicines to access them from your quick-add panel.",color:"#ef4444"}];v.useEffect(()=>{const F=setInterval(()=>{p(B=>(B+1)%k.length)},5e3);return()=>clearInterval(F)},[k.length]);const O=[{icon:Os,value:1e4,suffix:"+",label:"Patients Managed",color:"#6366f1"},{icon:Tb,value:75,suffix:"%",label:"Time Saved",color:"#10b981"},{icon:JJ,value:99,suffix:".9%",label:"Uptime",color:"#f59e0b"},{icon:TX,value:50,suffix:"+",label:"Happy Clinics",color:"#ef4444"}],I=[{keys:["Ctrl","K"],action:"Open Command Bar",description:"Quick access to AI assistant and navigation"},{keys:["Ctrl","P"],action:"Quick Print",description:"Print current document or bill"},{keys:["Ctrl","S"],action:"Save Record",description:"Save current form or entry"},{keys:["Esc"],action:"Close Modal",description:"Close any open dialog or panel"}];return r.jsxs("div",{className:Me.container,children:[r.jsx("div",{className:Me.progressBar,style:{width:`${i}%`}}),r.jsxs("aside",{className:Me.sidebar,children:[r.jsxs("h2",{className:Me.sidebarTitle,children:[r.jsx(jI,{size:22}),"User Guide"]}),r.jsxs("div",{className:Me.searchBox,children:[r.jsx(Fn,{className:Me.searchIcon,size:16}),r.jsx("input",{type:"text",className:Me.searchInput,placeholder:"Search topics...",value:n,onChange:F=>a(F.target.value)})]}),r.jsxs("div",{className:Me.navSection,children:[r.jsxs("span",{className:Me.navSectionTitle,children:[r.jsx(Ra,{size:12}),"Navigation"]}),T(_.navigation).map(F=>r.jsx(C,{id:F.id,label:F.label,Icon:F.icon},F.id))]}),r.jsxs("div",{className:Me.navSection,children:[r.jsxs("span",{className:Me.navSectionTitle,children:[r.jsx(OI,{size:12}),"Reference"]}),T(_.reference).map(F=>r.jsx(C,{id:F.id,label:F.label,Icon:F.icon},F.id))]})]}),r.jsxs("main",{className:Me.content,ref:b,children:[r.jsxs("header",{className:Me.header,children:[r.jsxs("div",{className:Me.floatingParticles,children:[r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle}),r.jsx("div",{className:Me.particle})]}),r.jsxs("div",{className:Me.headerContent,children:[r.jsxs("div",{className:Me.headerLabel,children:[r.jsx(jI,{size:16}),"Complete Documentation"]}),r.jsxs("h1",{className:Me.title,children:["Master Newtons Ai HMS ",r.jsx("span",{className:Me.waveEmoji,children:""})]}),r.jsx("p",{className:Me.subtitle,children:"Your comprehensive guide to maximizing efficiency with the AI-Powered Health Management System. Master every feature and transform your clinical workflow."}),r.jsxs("div",{className:Me.headerBadges,children:[r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(tg,{size:14}),"HIPAA Compliant"]}),r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(fw,{size:14}),"AI Powered"]}),r.jsxs("span",{className:Me.headerBadge,children:[r.jsx(bE,{size:14}),"Multi-Language"]})]}),r.jsxs("div",{className:Me.headerActions,children:[r.jsxs("button",{className:Me.headerBtn,onClick:()=>S("getting-started"),children:[r.jsx(Wz,{size:16}),"Get Started"]}),r.jsxs("button",{className:Me.headerBtnSecondary,onClick:()=>S("troubleshooting"),children:[r.jsx(fj,{size:16}),"Need Help?"]})]})]})]}),r.jsx("section",{className:Me.statsSection,children:O.map((F,B)=>{const{count:$,ref:L}=y6e(F.value);return r.jsxs("div",{className:Me.statCard,ref:L,children:[r.jsx("div",{className:Me.statIcon,style:{backgroundColor:`${F.color}15`,color:F.color},children:r.jsx(F.icon,{size:24})}),r.jsxs("div",{className:Me.statValue,style:{color:F.color},children:[$,F.suffix]}),r.jsx("div",{className:Me.statLabel,children:F.label})]},B)})}),r.jsxs("section",{className:Me.quickTipsSection,children:[r.jsxs("div",{className:Me.quickTipsHeader,children:[r.jsxs("h3",{children:[r.jsx(CI,{size:20})," Quick Tips"]}),r.jsxs("div",{className:Me.tipNav,children:[r.jsx("button",{onClick:()=>p(F=>(F-1+k.length)%k.length),children:r.jsx(Cb,{size:18})}),r.jsxs("span",{children:[f+1," / ",k.length]}),r.jsx("button",{onClick:()=>p(F=>(F+1)%k.length),children:r.jsx(pd,{size:18})})]})]}),r.jsxs("div",{className:Me.tipCard,children:[r.jsx("div",{className:Me.tipIcon,style:{backgroundColor:`${k[f].color}15`,color:k[f].color},children:Se.createElement(k[f].icon,{size:28})}),r.jsxs("div",{className:Me.tipContent,children:[r.jsx("h4",{children:k[f].title}),r.jsx("p",{children:k[f].description})]})]},f),r.jsx("div",{className:Me.tipIndicators,children:k.map((F,B)=>r.jsx("button",{className:`${Me.tipIndicator} ${f===B?Me.tipIndicatorActive:""}`,onClick:()=>p(B)},B))})]}),r.jsxs("section",{id:"getting-started",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(EI,{size:18})}),"Getting Started"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Welcome to the Newtons Ai HMS. This guide will help you navigate and master the system's features, from clinical workflows to advanced financial analytics."}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(fw,{size:18}),"Multi-Platform Accessibility"]}),r.jsx("div",{className:Me.infoBoxContent,children:"Newtons Ai is a PWA (Progressive Web App). You can install it on your Desktop, Android, or iOS device for a native-like experience with faster performance and offline support."})]}),r.jsx("div",{className:Me.shortcutsGrid,children:I.map((F,B)=>r.jsxs("div",{className:`${Me.shortcutCard} ${g===F.action?Me.shortcutCardActive:""}`,onMouseEnter:()=>x(F.action),onMouseLeave:()=>x(null),children:[r.jsx("div",{className:Me.shortcutKeys,children:F.keys.map(($,L)=>r.jsxs(Se.Fragment,{children:[r.jsx("kbd",{className:`${Me.kbd} ${g===F.action?Me.kbdActive:""}`,children:$}),L<F.keys.length-1&&r.jsx("span",{className:Me.kbdPlus,children:"+"})]},L))}),r.jsxs("div",{className:Me.shortcutInfo,children:[r.jsx("div",{className:Me.shortcutAction,children:F.action}),r.jsx("div",{className:Me.shortcutDesc,children:F.description})]})]},B))}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(sX,{size:14})," Smart Navigation"]}),r.jsxs("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:["Press ",r.jsx("kbd",{className:Me.kbd,children:"Ctrl"})," + ",r.jsx("kbd",{className:Me.kbd,children:"K"})," anywhere to open the Command Bar. Instantly jump to patients, bills, or settings."]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Os,{size:14})," Multi-Role Access"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"The system adapts to your role: Doctor, Receptionist, Pharmacist, or Lab Technician."})]})]})]})]}),r.jsxs("section",{id:"clinical-workflow",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(dw,{size:18})}),"Doctor Workflow & Live Queue"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"The Doctor Consultation Panel is optimized for speed and clarity, providing all necessary patient context at a single glance."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(jc,{size:14})," Live Queue Control"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:'Use the "Call Next" buttons to manage the patient flow. The system automatically marks seen patients and updates the waiting list.'}),r.jsx(_r,{to:"/dashboard/doctor",className:Me.moduleLinkBtn,children:"Consultation Panel"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Av,{size:14})," AI Patient Briefs"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:`" AI Brief" provides a summarized snapshot of the patient's current complaint and relevant history saving valuable consultation time.`})]})]}),r.jsx("h3",{children:"Comprehensive History"}),r.jsxs("ul",{className:Me.featureList,children:[r.jsxs("li",{className:Me.featureItem,children:[r.jsx(uv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Unified Timeline:"})," View past complaints, lab reports, and medications in a single, chronologically grouped view."]})]}),r.jsxs("li",{className:Me.featureItem,children:[r.jsx(fX,{size:16,className:Me.featureIcon,style:{color:"var(--guide-primary)"}}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"One-Click Action:"})," From the history view, copy past medications to new prescriptions or quickly re-order tests."]})]})]})]})]}),r.jsxs("section",{id:"financial-mgmt",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(cd,{size:18})}),"Financial Control & Debt Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Keep your clinic's finances healthy with precise billing and proactive debt management."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(pw,{size:14})," Debt Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Monitor all outstanding balances in the Patent Debt module. View individual transaction histories and record settlements."}),r.jsx(_r,{to:"/dashboard/admin/patient-debts",className:Me.moduleLinkBtn,children:"Manage Debt"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Ra,{size:14})," Custom Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Need to bill for something non-standard? Use the Custom Bill tool to create items on-the-fly."}),r.jsx(_r,{to:"/create-custom-bill",className:Me.moduleLinkBtn,children:"Custom Bill"})]})]}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(tg,{size:18}),"Payment Verification"]}),r.jsx("div",{className:Me.infoBoxContent,children:'The system tracks payment modes (Cash, UPI, Card, Credit). "Credit" sales are automatically added to the Patient Debt list for later follow-up.'})]})]})]}),r.jsxs("section",{id:"analytics",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(vE,{size:18})}),"Analytics & Insights"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Transition from simply managing data to understanding it. The Analysis Dashboard provides deep insights into your operations."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(jc,{size:14})," Revenue vs Cash Flow"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Compare Sales (Accrual) against actual Cash Collected (Cash Basis) to understand your true liquidity."}),r.jsx(_r,{to:"/dashboard/analysis",className:Me.moduleLinkBtn,children:"Open Analysis"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(AI,{size:14})," Dept. Analysis"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"See exactly which departments (Pharmacy, Lab, OPD) are driving your clinic's growth."})]})]}),r.jsx("h3",{children:"Advanced Metrics"}),r.jsxs("ul",{className:Me.featureList,children:[r.jsxs("li",{className:Me.featureItem,children:[r.jsx(uv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Inventory Movement:"})," Analyze stock inflow vs outflow to predict future procurement needs."]})]}),r.jsxs("li",{className:Me.featureItem,children:[r.jsx(uv,{size:16,className:Me.featureIcon}),r.jsxs("div",{className:Me.featureText,children:[r.jsx("strong",{children:"Profit Estimation:"})," View estimated profits based on cost of goods sold (COGS) vs revenue generated."]})]})]})]})]}),r.jsxs("section",{id:"pharmacy-inventory",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(ud,{size:18})}),"Pharmacy & Inventory Tracking"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Maintain optimal stock levels and manage supplier relationships effortlessly."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(GO,{size:14})," Distributor Mgmt"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep a directory of suppliers, track payments made to them, and manage purchase entries."}),r.jsx(_r,{to:"/dashboard/distributors",className:Me.moduleLinkBtn,children:"Distributors"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(TQ,{size:14})," Refill Reminders"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automatically notify patients when their chronic medication stock is about to run out."}),r.jsx(_r,{to:"/refill-reminders",className:Me.moduleLinkBtn,children:"Refill Alerts"})]})]}),r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(jc,{size:18}),"Stock-Out Alerts"]}),r.jsx("div",{className:Me.infoBoxContent,children:"High-demand items are highlighted when stock falls below your defined threshold, ensuring you never run out of critical medicines."})]})]})]}),r.jsxs("section",{id:"advanced-lab",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(ls,{size:18})}),"Advanced Lab Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Go beyond simple test lists. Configure complex diagnostic parameters with automated clinical validation."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Fn,{size:14})," Multi-Parameter Search"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Find reports by Patient Name, ID, Token, or even specific Test Name. The intelligent search uses fuzzy matching."}),r.jsx(_r,{to:"/lab/search-report",className:Me.moduleLinkBtn,children:"Find Reports"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(ls,{size:14})," Test Master"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define parametric data, normal ranges, and automated formatting for your reports."}),r.jsx(_r,{to:"/lab-inventory",className:Me.moduleLinkBtn,children:"Configure Tests"})]})]})]})]}),r.jsxs("section",{id:"ipd-admission",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(bf,{size:18})}),"IPD & Admission Management"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Manage the full lifecycle of in-patient care, from the moment of admission to final discharge and billing."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Jn,{size:14})," In-Patient Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep track of all currently admitted patients, their ward assignments, and duration of stay."}),r.jsx(_r,{to:"/manage-admission",className:Me.moduleLinkBtn,children:"Admission Mgmt"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(pw,{size:14})," Cumulative Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automated daily room charges combined with services and medications consumed during the stay."})]})]}),r.jsx("h3",{children:"Workflow Steps"}),r.jsxs("ol",{className:Me.workflowList,children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Admit:"})," Register the patient and set the admission date and bed details."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Manage:"})," Record observations and clinical notes throughout the stay."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Discharge:"})," Finalize all pending charges and generate the discharge summary."]})]})]})]}),r.jsxs("section",{id:"custom-data",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(xf,{size:18})}),"System Customization"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Newtons Ai HMS is designed to be extensible. Create your own data structures and visualization tools."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Ab,{size:14})," Custom Tables"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define new data types (e.g., Equipment Logs, Consent Forms). Support for text, number, date, and boolean."}),r.jsx(_r,{to:"/custom-tables",className:Me.moduleLinkBtn,children:"Data Tables"})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(AI,{size:14})," Custom Dashboards"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Build your own reporting views. Drag and drop widgets to visualize your performance."}),r.jsx(_r,{to:"/dashboards",className:Me.moduleLinkBtn,children:"Manage Dashboards"})]})]})]})]}),r.jsxs("section",{id:"admin",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(dd,{size:18})}),"Administration"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Central command for clinic owners. Access critical functions and manage staff permissions."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(Os,{size:14})," Staff & Permissions"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Add/edit staff and define exactly what each role can see and do in the system."}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[r.jsx(_r,{to:"/dashboard/staff",className:Me.moduleLinkBtn,children:"Staff"}),r.jsx(_r,{to:"/dashboard/roles",className:Me.moduleLinkBtn,children:"Roles"})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsxs("div",{className:Me.uiLabel,children:[r.jsx(ua,{size:14})," Subscription Plans"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Manage your patients' subscription plans, billing cycles, and membership statuses."}),r.jsx(_r,{to:"/dashboard/subscriptions",className:Me.moduleLinkBtn,children:"Subscriptions"})]})]})]})]}),r.jsxs("section",{id:"ui-reference",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(Im,{size:18})}),"Interface & UI Reference"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsx("p",{children:"Familiarize yourself with the common UI elements used throughout the application."}),r.jsxs("div",{className:Me.uiGrid,children:[r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Action Buttons"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnPrimary}`,children:"Primary / Save"}),r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnSecondary}`,children:"Secondary"}),r.jsx("button",{className:`${Me.demoBtn} ${Me.demoBtnDanger}`,children:"Danger / Delete"})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Status Indicators"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeSuccess}`,children:[r.jsx(uv,{size:12}),"Paid / Completed"]}),r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeWarning}`,children:[r.jsx(DI,{size:12}),"Pending / Due"]}),r.jsxs("div",{className:`${Me.demoBadge} ${Me.demoBadgeError}`,children:[r.jsx(fj,{size:12}),"Overdue / Failed"]})]})]}),r.jsxs("div",{className:Me.uiCard,children:[r.jsx("div",{className:Me.uiLabel,children:"Common Icons"}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx($i,{size:16})," ",r.jsx("span",{children:"Edit Record"})]}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Vn,{size:16})," ",r.jsx("span",{children:"Delete Item"})]}),r.jsxs("div",{className:Me.iconRow,children:[r.jsx(Im,{size:16})," ",r.jsx("span",{children:"View Details"})]})]})]})]})]}),r.jsxs("section",{id:"troubleshooting",className:Me.section,children:[r.jsxs("h2",{className:Me.sectionTitle,children:[r.jsx("span",{className:Me.sectionTitleIcon,children:r.jsx(fj,{size:18})}),"Troubleshooting & Support"]}),r.jsxs("div",{className:Me.sectionContent,children:[r.jsxs("div",{className:Me.infoBox,children:[r.jsxs("span",{className:Me.infoBoxTitle,children:[r.jsx(bE,{size:18}),"Offline Support (PWA)"]}),r.jsxs("div",{className:Me.infoBoxContent,children:["Newtons Ai HMS is a ",r.jsx("strong",{children:"Progressive Web App (PWA)"}),'. Install it on your desktop or mobile home screen using the "Install" button in the header for faster loading and offline syncing of critical data.']})]}),r.jsxs("div",{className:Me.infoBox,style:{borderLeftColor:"var(--guide-accent)"},children:[r.jsxs("span",{className:Me.infoBoxTitle,style:{color:"var(--guide-accent)"},children:[r.jsx(rC,{size:18}),"Need Direct Support?"]}),r.jsx("div",{className:Me.infoBoxContent,children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(eg,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"+91 63631 11328"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(TI,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"shiva@newtons.in"})]})]})})]}),r.jsx("h3",{children:"Frequently Asked Questions"}),r.jsx("div",{className:Me.faqList,children:E.map((F,B)=>r.jsxs("div",{className:Me.faqItem,children:[r.jsxs("div",{className:Me.faqQuestion,onClick:()=>l(o===B?null:B),children:[r.jsx("span",{children:F.question}),r.jsx(Bz,{size:18,className:`${Me.faqIcon} ${o===B?Me.faqIconOpen:""}`})]}),o===B&&r.jsx("div",{className:Me.faqAnswer,children:F.answer})]},B))})]})]}),r.jsx("footer",{className:Me.footer,children:r.jsxs("p",{className:Me.footerText,children:[" ",new Date().getFullYear()," ",r.jsx("span",{className:Me.footerBrand,children:"Newtons Ai"}),". Empowering Healthcare through Intelligence."]})})]}),r.jsxs("div",{className:Me.fabContainer,children:[c&&r.jsxs("div",{className:Me.fabContent,children:[r.jsxs("h4",{children:[r.jsx(rC,{size:18}),"Customer Care"]}),r.jsxs("div",{className:Me.contactRow,children:[r.jsx(eg,{size:16,className:Me.contactIcon}),r.jsx("span",{children:"+91 63631 11328"}),r.jsx("button",{className:Me.copyBtn,onClick:()=>navigator.clipboard.writeText("+916363111328"),title:"Copy Phone",children:r.jsx(SI,{size:14})})]}),r.jsxs("div",{className:Me.contactRow,children:[r.jsx(TI,{size:16,className:Me.contactIcon}),r.jsx("span",{children:"shiva@newtons.in"}),r.jsx("button",{className:Me.copyBtn,onClick:()=>navigator.clipboard.writeText("shiva@newtons.in"),title:"Copy Email",children:r.jsx(SI,{size:14})})]})]}),r.jsx("button",{className:Me.fabButton,onClick:()=>d(!c),title:"Customer Support",children:c?r.jsx($t,{size:24}):r.jsx(rC,{size:24})})]})]})},v6e=t=>[1,2,3,14,15,16,17,18,19,30,31,32].includes(t)?{type:"molar",roots:2}:[4,5,12,13,20,21,28,29].includes(t)?{type:"premolar",roots:1}:[6,11,22,27].includes(t)?{type:"canine",roots:1}:t>=1&&t<=32?{type:"incisor",roots:1}:[41,42,49,50,51,52,59,60].includes(t)?{type:"molar",roots:2}:[43,48,53,58].includes(t)?{type:"canine",roots:1}:[44,45,46,47,54,55,56,57].includes(t)?{type:"incisor",roots:1}:{type:"incisor",roots:1},Vu=({toothNumber:t,conditions:e=[],className:n,style:a,isSelected:i,bridgeConnectPrevious:s})=>{const{type:o}=v6e(t),l=t<=16||t>=41&&t<=50,c="M5,20 Q5,5 18,5 Q31,5 31,20 L29,25 Q18,28 7,25 Z",d="M7,25 Q5,40 10,44 Q14,40 14,26",f="M29,25 Q31,40 26,44 Q22,40 22,26",p="M8,20 Q8,8 18,8 Q28,8 28,20 L26,24 Q18,27 10,24 Z",g="M10,24 Q16,44 18,45 Q20,44 26,24",x="M8,22 Q18,2 28,22 L26,25 Q18,28 10,25 Z",b="M10,25 Q18,48 26,25",j="M10,22 L10,12 Q18,12 26,12 L26,22 L24,25 Q18,27 12,25 Z",S="M12,25 Q18,46 24,25";let _=c,T=[d,f];o==="incisor"?(_=j,T=[S]):o==="canine"?(_=x,T=[b]):o==="premolar"&&(_=p,T=[g]);const C=e.includes("condition-rct"),E=e.includes("condition-filling"),k=e.includes("condition-crown"),O=e.includes("condition-bridge"),I=e.includes("condition-extraction"),F=e.includes("condition-implant"),B=C?"#e9d5ff":"#f3f4f6",$=I?"#fee2e2":"#ffffff",L=I?"#ef4444":O?"#0891b2":F?"#475569":k?"#b45309":i?"#3b82f6":"#6b7280",V=i||O||k||F?2:1.5,H=l?"M20,15 L56,15 L56,22 L20,22 Z":"M16,15 L-20,15 L-20,22 L16,22 Z";return r.jsxs("svg",{viewBox:"0 0 36 50",className:n,style:{width:"100%",height:"100%",overflow:"visible",...a},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"goldGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),r.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),r.jsxs("linearGradient",{id:"bridgeGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),r.jsx("stop",{offset:"100%",stopColor:"#0891b2"})]}),r.jsxs("linearGradient",{id:"titaniumGradient",x1:"0",x2:"1",y1:"0",y2:"0",children:[r.jsx("stop",{offset:"0%",stopColor:"#475569"}),r.jsx("stop",{offset:"30%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"50%",stopColor:"#f8fafc"}),r.jsx("stop",{offset:"70%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"100%",stopColor:"#475569"})]})]}),s&&r.jsx("path",{d:H,fill:"url(#bridgeGradient)",stroke:"#0891b2",strokeWidth:"1.5"}),F?r.jsxs("g",{children:[r.jsx("path",{d:"M13,25 L23,25 L22,28 L23,29 L22,30 L22,33 L23,34 L22,35 L22,38 L23,39 L22,40 L19,46 Q18,48 17,46 L14,40 L13,39 L14,38 L14,35 L13,34 L14,33 L14,30 L13,29 L14,28 Z",fill:"url(#titaniumGradient)",stroke:L,strokeWidth:"1"}),r.jsxs("g",{stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",children:[r.jsx("line",{x1:"14",y1:"29",x2:"22",y2:"29"}),r.jsx("line",{x1:"14",y1:"34",x2:"22",y2:"34"}),r.jsx("line",{x1:"14",y1:"39",x2:"22",y2:"39"})]}),r.jsx("rect",{x:"15",y:"22",width:"6",height:"4",fill:"#64748b",stroke:L,strokeWidth:"1",rx:"1"})]}):r.jsx("g",{fill:B,stroke:L,strokeWidth:V,strokeLinejoin:"round",children:T.map((ne,Q)=>r.jsx("path",{d:ne},Q))}),C&&!F&&r.jsx("g",{fill:"none",stroke:"#9333ea",strokeWidth:"2.5",strokeLinecap:"round",children:o==="molar"?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M12,28 L11,42"}),r.jsx("path",{d:"M24,28 L25,42"})]}):r.jsx("path",{d:"M18,25 L18,44"})}),r.jsx("path",{d:_,fill:O?"url(#bridgeGradient)":k?"url(#goldGradient)":$,stroke:L,strokeWidth:V,strokeLinejoin:"round"}),E&&!k&&!O&&!F&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"1"}),I&&r.jsxs("g",{stroke:"#ef4444",strokeWidth:"3",strokeLinecap:"round",children:[r.jsx("line",{x1:"8",y1:"8",x2:"28",y2:"42"}),r.jsx("line",{x1:"28",y1:"8",x2:"8",y2:"42"})]})]})},xb=(t,e="universal")=>e==="universal"?t<=32?t.toString():t>=41&&t<=50?String.fromCharCode(65+(t-41)):t>=51&&t<=60?String.fromCharCode(75+(t-51)):t.toString():e==="fdi"?t>=1&&t<=8?(18-(t-1)).toString():t>=9&&t<=16?(21+(t-9)).toString():t>=17&&t<=24?(38-(t-17)).toString():t>=25&&t<=32?(41+(t-25)).toString():t>=41&&t<=45?(55-(t-41)).toString():t>=46&&t<=50?(61+(t-46)).toString():t>=51&&t<=55?(75-(t-51)).toString():t>=56&&t<=60?(81+(t-56)).toString():t.toString():t.toString(),NG=({selectedTeeth:t,toothConditions:e={},toothDetails:n={},onToothClick:a,onEditPastRecord:i,onPrint:s,numberingSystem:o="universal"})=>{const[l,c]=Se.useState("permanent"),d=Array.from({length:16},(_,T)=>T+1),f=Array.from({length:16},(_,T)=>32-T),p=Array.from({length:10},(_,T)=>41+T),g=Array.from({length:10},(_,T)=>60-T),[x,b]=Se.useState(null),j=_=>{const T=e[_]||[],C=t.includes(_);let E=[],k="#9ca3af",O;const I=T.includes("condition-extraction");return C&&(k="#3b82f6"),T.includes("condition-filling")&&E.push("#60a5fa"),T.includes("condition-rct")&&E.push("#c084fc"),T.includes("condition-crown")&&(E.push("#fcd34d"),k="#d97706"),T.includes("condition-bridge")&&(E.push("#22d3ee"),k="#0891b2"),T.includes("condition-implant")&&(E.push("#94a3b8"),k="#475569"),T.includes("condition-extraction")&&(E.push("#fee2e2"),k="#ef4444"),E.length===0&&C&&E.push("#eff6ff"),E.length===0&&E.push("#ffffff"),{fillColors:E,borderColor:k,overlayColor:O,isSelected:C,hasExtraction:I}},S=_=>{const{isSelected:T}=j(_),C=e[_]||[],E=n[_],k=_<=16||_>=41&&_<=50,O=C.includes("condition-bridge");let I=!1;if(O){let B=null;k?(_>1&&_<=16&&(B=_-1),_>41&&_<=50&&(B=_-1)):(_<32&&_>=17&&(B=_+1),_<60&&_>=51&&(B=_+1)),B!==null&&(e[B]||[]).includes("condition-bridge")&&(I=!0)}const F=xb(_,o);return r.jsxs("div",{onClick:()=>a(_),onMouseEnter:()=>b(_),onMouseLeave:()=>b(null),className:`tooth-item-container ${T?"selected":""}`,title:"",children:[r.jsx("div",{className:"tooth-number-label",children:F}),r.jsx("div",{className:"tooth-svg-wrapper",style:{transform:k?"rotate(180deg)":"none"},children:r.jsx(Vu,{toothNumber:_,conditions:C,isSelected:T,bridgeConnectPrevious:I})}),x===_&&E&&E.length>0&&r.jsxs("div",{className:"tooth-tooltip-window",children:[r.jsxs("div",{className:"tooltip-header",children:["Tooth ",F]}),r.jsx("ul",{className:"tooltip-list",children:E.map((B,$)=>r.jsxs("li",{className:"tooltip-detail-item",children:[r.jsxs("span",{className:"detail-text",children:[B.name," ",r.jsxs("small",{children:["(",B.date,")"]})]}),B.isPast&&i&&r.jsx("button",{className:"tooltip-edit-btn",onClick:L=>{L.stopPropagation(),i(B.recordId)},title:"Edit this record",children:r.jsx(ro,{size:12})})]},$))})]})]},_)};return r.jsxs("div",{className:"chart-container-inner",style:{position:"relative"},children:[r.jsxs("div",{className:"chart-header-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[r.jsxs("div",{className:"view-toggle-container",style:{display:"flex",gap:4,background:"#f3f4f6",padding:4,borderRadius:8},children:[r.jsx("button",{className:`view-toggle-btn ${l==="permanent"?"active":""}`,onClick:()=>c("permanent"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="permanent"?"#fff":"transparent",boxShadow:l==="permanent"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="permanent"?"#111827":"#6b7280"},children:"Permanent"}),r.jsx("button",{className:`view-toggle-btn ${l==="primary"?"active":""}`,onClick:()=>c("primary"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="primary"?"#fff":"transparent",boxShadow:l==="primary"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="primary"?"#111827":"#6b7280"},children:"Primary"})]}),s&&r.jsxs("button",{onClick:_=>{_.stopPropagation(),s()},className:"chart-print-btn no-print",title:"Print Report",children:[r.jsx(vf,{size:16}),r.jsx("span",{children:"Print Report"})]})]}),r.jsx("div",{className:"arch-label",children:"Maxillary (Upper)"}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?d.slice(0,8).map(_=>S(_)):p.slice(0,5).map(_=>S(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?d.slice(8).map(_=>S(_)):p.slice(5).map(_=>S(_))})]}),r.jsxs("div",{className:"midline-divider",children:[r.jsx("div",{className:"divider-line"}),r.jsx("span",{className:"chart-label",children:"Midline"}),r.jsx("div",{className:"divider-line"})]}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(0,8).map(_=>S(_)):g.slice(0,5).map(_=>S(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(8).map(_=>S(_)):g.slice(5).map(_=>S(_))})]}),r.jsx("div",{className:"arch-label",children:"Mandibular (Lower)"}),r.jsxs("div",{className:"chart-legend",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Vu,{toothNumber:1,conditions:[],style:{width:16,height:22}})}),r.jsx("span",{children:"Healthy"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Vu,{toothNumber:1,conditions:["condition-filling"],style:{width:16,height:22}})}),r.jsx("span",{children:"Filling (Dot)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Vu,{toothNumber:1,conditions:["condition-rct"],style:{width:16,height:22}})}),r.jsx("span",{children:"RCT (Root Lines)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Vu,{toothNumber:1,conditions:["condition-crown"],style:{width:16,height:22}})}),r.jsx("span",{children:"Crown"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Vu,{toothNumber:1,conditions:["condition-bridge"],style:{width:16,height:22}})}),r.jsx("span",{children:"Bridge"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Vu,{toothNumber:1,conditions:["condition-implant"],style:{width:16,height:22}})}),r.jsx("span",{children:"Implant"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(Vu,{toothNumber:1,conditions:["condition-extraction"],style:{width:16,height:22}})}),r.jsx("span",{children:"Extraction (X)"})]})]}),r.jsxs("div",{className:"print-only-details-summary print-only",children:[r.jsx("h3",{children:"Tooth Procedure Details"}),Object.keys(n).length===0?r.jsx("p",{className:"no-details",children:"No specific tooth procedures recorded."}):r.jsxs("table",{className:"print-details-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Tooth"}),r.jsx("th",{children:"Procedure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:Object.entries(n).sort(([_],[T])=>parseInt(_)-parseInt(T)).map(([_,T])=>r.jsx(Se.Fragment,{children:T.map((C,E)=>r.jsxs("tr",{children:[E===0?r.jsxs("td",{rowSpan:T.length,className:"tooth-cell",children:["Tooth ",xb(parseInt(_),o)]}):null,r.jsx("td",{children:C.name}),r.jsx("td",{children:C.date})]},`${_}-${E}`))},_))})]})]})]})},b6e=({onClose:t,onUpdate:e})=>{const[n,a]=v.useState([]),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState({}),[f,p]=v.useState(!1),[g,x]=v.useState({name:"",cost:0,type:"general"});v.useEffect(()=>{b()},[]);const b=async()=>{s(!0);try{const C=await se("/api/dental/procedures");if(C.ok){const E=await C.json();a(E)}}catch(C){console.error(C)}finally{s(!1)}},j=async()=>{if(!(!g.name||!g.cost))try{(await se("/api/dental/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(p(!1),x({name:"",cost:0,type:"general"}),b(),e())}catch(C){console.error(C)}},S=async C=>{try{(await se(`/api/dental/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),d({}),b(),e())}catch(E){console.error(E)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await se(`/api/dental/procedures/${C}`,{method:"DELETE"})).ok&&(b(),e())}catch(E){console.error(E)}},T=C=>{l(C.id),d({name:C.name,cost:C.cost,type:C.type})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Procedures"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await se("/api/dental/procedures/import-defaults",{method:"POST"}),b(),e()}catch(C){console.error(C)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx($t,{size:20})})]})]}),r.jsx("div",{className:"manage-procedures-list-container",children:i?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40%"},children:"Name"}),r.jsx("th",{style:{width:"20%"},children:"Type"}),r.jsx("th",{style:{width:"20%"},children:"Cost ()"}),r.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):n.map(C=>r.jsx("tr",{children:o===C.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:E=>d({...c,name:E.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsxs("select",{className:"edit-select",value:c.type||"general",onChange:E=>d({...c,type:E.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"})]})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:E=>d({...c,cost:parseFloat(E.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>S(C.id),className:"action-btn btn-save",title:"Save",children:r.jsx(cs,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx($t,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:C.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${C.type}`,children:C.type})}),r.jsxs("td",{style:{fontWeight:500},children:["",C.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>T(C),className:"action-btn btn-edit",title:"Edit",children:r.jsx(ro,{size:18})}),r.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Vn,{size:18})})]})]})},C.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:g.name||"",onChange:C=>x({...g,name:C.target.value})}),r.jsxs("select",{className:"form-select",value:g.type||"general",onChange:C=>x({...g,type:C.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"})]}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:g.cost||"",onChange:C=>x({...g,cost:parseFloat(C.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:j,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(Gn,{size:18})," Add New Procedure"]})})]})})},j6e=({toothNumber:t,procedures:e,history:n=[],onSelect:a,onClose:i,numberingSystem:s="universal"})=>{const[o,l]=v.useState(""),[c,d]=v.useState(n.length>0?"history":"add"),f=xb(t,s),p=v.useMemo(()=>e.filter(g=>g.name.toLowerCase().includes(o.toLowerCase())),[e,o]);return r.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(2px)"},children:[r.jsxs("div",{className:"modal-content",style:{backgroundColor:"var(--dp-card-bg)",borderRadius:"12px",width:"100%",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",overflow:"hidden",animation:"scaleUp 0.2s ease-out"},children:[r.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid var(--dp-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--dp-bg)"},children:[r.jsxs("h3",{style:{margin:0,color:"var(--dp-text)",fontSize:"1.1rem"},children:["Tooth ",f]}),r.jsx("button",{onClick:i,style:{background:"none",border:"none",color:"var(--dp-text-sec)",cursor:"pointer",padding:"4px"},children:r.jsx($t,{size:20})})]}),n.length>0&&r.jsxs("div",{className:"sidebar-tabs",style:{padding:"0 16px",paddingTop:"8px",background:"var(--dp-bg)"},children:[r.jsx("button",{className:c==="add"?"active":"",onClick:()=>d("add"),style:{padding:"8px 12px",borderBottomWidth:"2px"},children:"Add Procedure"}),r.jsxs("button",{className:c==="history"?"active":"",onClick:()=>d("history"),style:{padding:"8px 12px",borderBottomWidth:"2px"},children:["History (",n.length,")"]})]}),c==="add"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--dp-border)"},children:r.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[r.jsx(Fn,{size:16,style:{position:"absolute",left:"12px",color:"var(--dp-text-sec)"}}),r.jsx("input",{type:"text",placeholder:"Search procedures...",value:o,onChange:g=>l(g.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",borderRadius:"8px",border:"1px solid var(--dp-border)",backgroundColor:"var(--dp-bg)",color:"var(--dp-text)",fontSize:"0.9rem",outline:"none"},autoFocus:!0})]})}),r.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:p.length===0?r.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.9rem"},children:"No procedures found."}):r.jsx("div",{style:{display:"flex",flexDirection:"column"},children:p.map(g=>r.jsxs("button",{onClick:()=>a(g),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",border:"none",background:"transparent",borderBottom:"1px solid var(--dp-border)",cursor:"pointer",textAlign:"left",transition:"background-color 0.1s"},className:"procedure-modal-item",onMouseOver:x=>x.currentTarget.style.backgroundColor="var(--dp-bg)",onMouseOut:x=>x.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("div",{children:[r.jsx("div",{style:{color:"var(--dp-text)",fontWeight:500,fontSize:"0.95rem"},children:g.name}),r.jsx("div",{style:{color:"var(--dp-text-sec)",fontSize:"0.8rem",textTransform:"capitalize"},children:g.type})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--dp-primary)",fontWeight:600,fontSize:"0.9rem"},children:[r.jsxs("span",{children:["",g.cost]}),r.jsx(Gn,{size:16})]})]},g.id))})})]}),c==="history"&&r.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",padding:"0"},children:n.map((g,x)=>r.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--dp-border)"},children:[r.jsx("div",{style:{fontWeight:500,fontSize:"0.9rem"},children:g.name}),r.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)"},children:[g.date," ",g.isPast?"(Past)":"(Current)"]})]},x))})]}),r.jsx("style",{children:`
                @keyframes scaleUp {
                    from { transform: scale(0.95); opacity: 0; }
                    to { transform: scale(1); opacity: 1; }
                }
            `})]})},w6e=({isOpen:t,onClose:e,recordId:n,onBillingComplete:a})=>{var ee,Ne,Te,Fe,xe,te,oe,_e,Oe;const[i,s]=v.useState(null),[o,l]=v.useState([]),[c,d]=v.useState(!0),[f,p]=v.useState(null),[g,x]=v.useState(!1),[b,j]=v.useState("cash"),[S,_]=v.useState(""),[T,C]=v.useState(""),[E,k]=v.useState(""),[O,I]=v.useState(""),[F,B]=v.useState(""),[$,L]=v.useState(!1),[V,H]=v.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[ne,Q]=v.useState(0),q=v.useRef(!1),[G,ie]=v.useState(null),[W,z]=v.useState(!1),ce=()=>{const K=V.map(ue=>ue.method),ge=["cash","upi","card","no_cash_insurance","credit"].filter(ue=>!K.includes(ue));ge.length>0&&H([...V,{id:crypto.randomUUID(),method:ge[0],amount:0}])},je=K=>{V.length>2&&H(V.filter(ge=>ge.id!==K))},Y=(K,ge,ue)=>{H(fe=>{const Ee=fe.map(Ke=>Ke.id===K?ge==="method"?{...Ke,method:ue}:{...Ke,amount:Math.max(0,ue)}:Ke);if(ge==="amount"&&Ee.length===2){const $e=Ee.findIndex(wt=>wt.id===K)===0?1:0,We=Math.max(0,ue),it=le-We;Ee[$e]={...Ee[$e],amount:Math.max(0,it)}}return Ee})},Ie=K=>{const ge=V.filter(fe=>fe.id!==K).reduce((fe,Ee)=>fe+Ee.amount,0),ue=Math.max(0,le-ge);Y(K,"amount",ue)},Ue=v.useMemo(()=>V.reduce((K,ge)=>K+ge.amount,0),[V]),ze=K=>{const ge=Math.max(0,Math.min(100,isNaN(K)?0:K));q.current=!0,Q(ge);const ue=o.map(fe=>({...fe,discount_percentage:ge}));l(ue)},Le=(K,ge)=>{const ue=[...o];ue[K].discount_percentage=isNaN(ge)?0:ge,l(ue)};v.useEffect(()=>{if(q.current){q.current=!1;return}const K=o.reduce((fe,Ee)=>fe+(Ee.price??0),0);if(K===0){Q(0);return}const ue=o.reduce((fe,Ee)=>{const $e=(Ee.price??0)*((Ee.discount_percentage??0)/100);return fe+$e},0)/K*100;Q(fe=>Math.abs(fe-ue)>.01?ue:fe)},[o]);const be=async()=>{var K,ge;if(!i)return p("No record data available to bill."),null;if(o.length===0)return p("Cannot bill an empty procedure list."),null;x(!0),p(null);try{const ue=o.map(we=>{const Xe=we.price,Je=Xe*((we.discount_percentage??0)/100),ct=Xe-Je;return{name:we.name,price:we.price,quantity:1,total:ct,item_id:we.id||`proc_${Date.now()}`,type:"service",discount_percentage:we.discount_percentage??0}}),fe=$?((K=V[0])==null?void 0:K.method)||"cash":b,Ee=$?V.map(we=>({method:we.method,amount:we.amount})):void 0,Ke={patientId:i.patientId.id,items:ue,amount:le,paymentMode:fe,splitPayments:Ee,type:"dental",related_id:i.id,status:"paid",discountPercentage:ne},$e=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ke)}),We=await $e.json();if(!$e.ok||!We.id)throw new Error(We.message||"Failed to create bill.");(await se(`/api/dental/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:We.id})})).ok||console.error("Failed to update dental record status"),s(we=>we?{...we,status:"billed",billId:We.id}:null);const wt=$?((ge=V.find(we=>we.method==="credit"))==null?void 0:ge.amount)||0:b==="credit"?le:0;if(wt>0)try{await se(`/api/patient-debts/${i.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:wt,related_bill_id:We.id,notes:`Dental Bill #${We.id}${$?" (Split Payment - Credit portion)":""}`})})}catch(we){console.error("Failed to create debt entry:",we)}return a&&a(),We.id}catch(ue){return console.error("Billing process failed:",ue),p(ue.message||"Failed to create bill."),null}finally{x(!1)}},Ce=()=>{window.print()},Ae=async()=>{await be()&&setTimeout(()=>window.print(),800)};v.useEffect(()=>{t&&n&&(async()=>{d(!0);try{const[ge,ue]=await Promise.all([se(`/api/dental/${n}`),se("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!ge.ok)throw new Error("Failed to fetch dental record");const fe=await ge.json(),Ee={...fe,patientId:fe.Patient||fe.patientId};if(s(Ee),ue.ok){const We=await ue.json();C(We.upi_id||""),k(We.name||""),I(We.address||""),B(We.notes||"")}const $e=(Ee.selected_procedures||Ee.selectedProcedures||[]).map(We=>({...We,price:We.cost,discount_percentage:0}));l($e)}catch(ge){console.error("Failed to fetch data:",ge),p(ge.message)}finally{d(!1)}})()},[t,n]);const me=v.useMemo(()=>o.reduce((K,ge)=>K+(ge.price??0),0),[o]),ye=v.useMemo(()=>o.reduce((K,ge)=>{const fe=(ge.price??0)*(ge.discount_percentage??0)/100;return K+fe},0),[o]),le=v.useMemo(()=>me-ye,[me,ye]),X=v.useMemo(()=>le-Ue,[le,Ue]),ae=v.useMemo(()=>Math.abs(X)<.01,[X]);v.useEffect(()=>{if($&&V.length>=1&&Ue===0){const K=[...V];K[0].amount=le,H(K)}},[$,le]),v.useEffect(()=>{if(le>0&&T){const K=`upi://pay?pa=${T}&pn=${encodeURIComponent(E)}&am=${le.toFixed(2)}&cu=INR`;_(K)}else _("")},[le,T,E]);const de=v.useMemo(()=>$?V.some(K=>K.method==="credit"):b==="credit",[$,V,b]);return v.useEffect(()=>{(async()=>{var ge;if(de&&((ge=i==null?void 0:i.patientId)!=null&&ge.id)){z(!0);try{const ue=await se(`/api/patient-debts/${i.patientId.id}/balance`);if(ue.ok){const fe=await ue.json();ie(fe.netDebt||0)}else ie(0)}catch{ie(0)}finally{z(!1)}}})()},[de,(ee=i==null?void 0:i.patientId)==null?void 0:ee.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Dental Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx($t,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:c?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3].map(K=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})})]},K))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]})]})]})})]})})}):f?r.jsxs("div",{className:"error-message-box",children:["Error: ",f]}):i?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:E||"Clinic Name"}),(O||F)&&r.jsxs("div",{className:"clinic-details-print",children:[O&&r.jsx("span",{className:"small-text clinic-address",children:O}),F&&r.jsx("span",{className:"small-text clinic-notes",children:F})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Ne=i.patientId)==null?void 0:Ne.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",((Te=i.patientId)==null?void 0:Te.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(i.date||i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Fe=i.patientId)==null?void 0:Fe.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",((xe=i.patientId)==null?void 0:xe.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ra,{size:16})," Record ID"]})," ",i.id.substring(i.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(i.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"dental-chart-section-modal",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Dental Chart"})}),r.jsx("div",{className:"chart-wrapper-modal",children:r.jsx(NG,{selectedTeeth:[],onToothClick:()=>{},toothConditions:(()=>{const K={};return i.teeth&&i.teeth.forEach(ge=>{ge.procedures.forEach(ue=>{var Ee,Ke;const fe=((Ee=i.selected_procedures)==null?void 0:Ee.find($e=>$e.id===ue))||((Ke=i.selectedProcedures)==null?void 0:Ke.find($e=>$e.id===ue));if(fe&&fe.type&&fe.type!=="general"){K[ge.toothNumber]||(K[ge.toothNumber]=[]);const $e=`condition-${fe.type}`;K[ge.toothNumber].includes($e)||K[ge.toothNumber].push($e)}})}),K})(),toothDetails:(()=>{const K={};return i.teeth&&i.teeth.forEach(ge=>{K[ge.toothNumber]||(K[ge.toothNumber]=[]),ge.procedures.forEach(ue=>{var Ee,Ke;const fe=((Ee=i.selected_procedures)==null?void 0:Ee.find($e=>$e.id===ue))||((Ke=i.selectedProcedures)==null?void 0:Ke.find($e=>$e.id===ue));fe&&K[ge.toothNumber].push({name:fe.name,date:new Date(i.date||i.createdAt).toLocaleDateString()})})}),K})()})})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),o.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:o.map((K,ge)=>{const ue=K.price??0,fe=ue*(K.discount_percentage??0)/100,Ee=ue-fe;return r.jsxs("tr",{children:[r.jsx("td",{children:ge+1}),r.jsx("td",{children:K.name}),r.jsx("td",{children:K.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:K.discount_percentage===0?"":K.discount_percentage,onChange:Ke=>Le(ge,parseFloat(Ke.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Ee.toFixed(2)})]},ge)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",me.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",ne.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ye.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",le.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"12px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px"},children:"Payment Details:"}),$?r.jsx("div",{className:"split-payment-details-print",children:V.map(K=>r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:K.method.toUpperCase()}),r.jsxs("span",{children:["",K.amount.toFixed(2)]})]},K.id))}):r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Mode"}),r.jsx("span",{children:b.toUpperCase()})]})]}),(b==="credit"||$&&V.some(K=>K.method==="credit"))&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px",color:"#e53e3e"},children:"Credit/Debt Information:"}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Credit Amount"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",$?(((te=V.find(K=>K.method==="credit"))==null?void 0:te.amount)||0).toFixed(2):le.toFixed(2)]})]}),(G??0)>0&&r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(G??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px",fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((G??0)+($?((oe=V.find(K=>K.method==="credit"))==null?void 0:oe.amount)||0:le)).toFixed(2)]})]})]})]}),S&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"&&!($&&V.some(K=>K.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(La,{value:S,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",me.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ye.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:ne===0?"":ne,onChange:K=>ze(parseFloat(K.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:g||i.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",le.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:S?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:S,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${$?"active":""}`,onClick:()=>L(!$),disabled:g||i.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:$?"2px solid #4facfe":"1px solid #ddd",background:$?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:$?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:$?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(Bo,{size:14}),"Split Pay"]})]}),$?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(Bo,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",le.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:V.map((K,ge)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ge+1}),r.jsxs("select",{value:K.method,onChange:ue=>Y(K.id,"method",ue.target.value),className:`split-payment-select ${K.method==="credit"?"is-credit":""}`,disabled:g||i.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:K.amount===0?"":K.amount,onChange:ue=>Y(K.id,"amount",parseFloat(ue.target.value)||0),placeholder:"0",className:`split-payment-input ${K.method==="credit"?"is-credit":""}`,disabled:g||i.status==="billed"})]}),V.length>2&&r.jsx("button",{type:"button",onClick:()=>Ie(K.id),className:"split-payment-btn split-payment-btn-fill",disabled:g||i.status==="billed",children:"Fill"}),V.length>2&&r.jsx("button",{type:"button",onClick:()=>je(K.id),className:"split-payment-btn split-payment-btn-remove",disabled:g||i.status==="billed",children:r.jsx(Vn,{size:12})})]},K.id))}),V.length<5&&r.jsxs("button",{type:"button",onClick:ce,className:"split-payment-add-btn",disabled:g||i.status==="billed",children:[r.jsx(Gn,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ue.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(X)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(X)<.01?"":X>0?"":"",Math.abs(X)<.01?"Balanced":X>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(X).toFixed(2)]})]}),!ae&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",le.toFixed(2)]})]})]}):r.jsxs("select",{value:b,onChange:K=>j(K.target.value),className:"payment-mode-select",disabled:g||i.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),de&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),W?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:G&&G>0?"#dc3545":"#28a745"},children:["",(G||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:$?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",($?((_e=V.find(K=>K.method==="credit"))==null?void 0:_e.amount)||0:le).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((G||0)+($?((Oe=V.find(K=>K.method==="credit"))==null?void 0:Oe.amount)||0:le)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:i.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Ce,className:"secondary-button print-preview-button no-print",disabled:g,children:"Print Preview"}),r.jsx("button",{onClick:Ae,className:"primary-button",disabled:g||$&&!ae,children:g?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Lo,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:Ce,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},FB=/^\+?[0-9\s\-().]{7,20}$/,N6e=/^[a-zA-Z\s'-]{2,}$/,S6e=()=>{const t=Lt(),[e,n]=v.useState(""),[a,i]=v.useState([]),[s,o]=v.useState(!1),[l,c]=v.useState(null),[d,f]=v.useState(!1),[p,g]=v.useState(!1),[x,b]=v.useState(!1),[j,S]=v.useState([]),[_,T]=v.useState(!0),[C,E]=v.useState(()=>{const ue=localStorage.getItem("dentalNumberingSystem");return ue==="fdi"||ue==="universal"?ue:"universal"});v.useEffect(()=>{localStorage.setItem("dentalNumberingSystem",C)},[C]);const k=$r();v.useEffect(()=>{k.state&&k.state.patient&&le(k.state.patient)},[k.state]);const[O,I]=v.useState([]),[F,B]=v.useState([]),[$,L]=v.useState({}),[V,H]=v.useState(""),[ne,Q]=v.useState(!1),[q,G]=v.useState("plan"),[ie,W]=v.useState([]),[z,ce]=v.useState([]),[je,Y]=v.useState(!1),[Ie,Ue]=v.useState(!1),[ze,Le]=v.useState(null);v.useEffect(()=>{Ce(),be()},[]);const be=async()=>{try{const ue=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),fe=await se(`/api/patients?${ue.toString()}`);if(fe.ok){const Ee=await fe.json();S(Ee.patients||[])}}catch(ue){console.error("Error fetching recent patients",ue)}finally{T(!1)}},Ce=async()=>{try{const ue=await se("/api/dental/procedures");if(ue.ok){const fe=await ue.json();ce(fe)}}catch(ue){console.error("Error fetching procedures",ue)}};v.useEffect(()=>{(async()=>{if(!l){W([]),Le(null),H(""),B([]),L({}),I([]);return}try{const fe=await se(`/api/dental/patient/${l.id}`);if(fe.ok){const Ee=await fe.json();W(Ee);const Ke=new Date().toDateString(),$e=Ee.find(We=>We.status==="draft"&&new Date(We.date||We.createdAt||Date.now()).toDateString()===Ke);if($e){Le($e.id),H($e.notes||"");const We=$e.selected_procedures.filter(we=>!$e.teeth.some(Xe=>Xe.procedures.includes(we.id)));B(We.map(we=>({instanceId:crypto.randomUUID(),procedureId:we.id,name:we.name,price:we.cost,type:we.type})));const it={},wt=[];$e.teeth.forEach(we=>{const Xe=we.procedures.map(Je=>{const ct=$e.selected_procedures.find(Ct=>Ct.id===Je)||z.find(Ct=>Ct.id===Je);return{instanceId:crypto.randomUUID(),procedureId:Je,name:ct?ct.name:Je,price:ct?ct.cost:0,type:ct?ct.type:"general"}});Xe.length>0&&(it[we.toothNumber]=Xe,wt.push(we.toothNumber))}),L(it),I(wt)}else Le(null),H(""),B([]),L({}),I([])}}catch(fe){console.error("Error fetching history",fe)}})()},[l,z]);const Ae=v.useMemo(()=>qc(async ue=>{if(!ue.trim()||ue.length<2){i([]),o(!1);return}o(!0);try{const fe=await se(`/api/patients?search=${encodeURIComponent(ue)}&limit=10`);if(fe.ok){const Ee=await fe.json();i(Ee.patients||[])}}catch(fe){console.error("Search error:",fe)}finally{o(!1)}},300),[]);v.useEffect(()=>{Ae(e)},[e,Ae]);const me=ue=>{const fe=ue.target.value;n(fe),g(FB.test(fe)),b(N6e.test(fe)&&!FB.test(fe))},ye=async ue=>{if(!(!e||ue==="phone"&&!p||ue==="name"&&!x)){o(!0);try{const Ee=await se("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ue==="name"?e:"direct dental",phone:ue==="phone"?e:null,age:null,gender:null,token:null})});if(Ee.ok){const Ke=await Ee.json();le({id:Ke.id,name:Ke.name,token:Ke.token??null,age:Ke.age??null,gender:Ke.gender??null,phone:Ke.phone})}else alert("Failed to create patient")}catch(fe){console.error("Error creating patient:",fe),alert("Error creating patient")}finally{o(!1)}}},le=ue=>{c(ue),n(""),i([])},X=()=>{c(null),I([]),B([]),L({}),H("")},ae=async ue=>{if(!l)return;const fe=await se(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)});if(fe.ok)await fe.json(),c(Ee=>Ee?{...Ee,...ue}:null);else throw new Error("Failed to update")},[de,ee]=v.useState(null),Ne=ue=>{ee(ue)},Te=ue=>{if(!de)return;const fe={instanceId:crypto.randomUUID(),procedureId:ue.id,name:ue.name,price:ue.cost,type:ue.type};L(Ee=>{const Ke=Ee[de]||[];return{...Ee,[de]:[...Ke,fe]}}),I(Ee=>Ee.includes(de)?Ee:[...Ee,de]),ee(null)},Fe=()=>{const ue={},fe={},Ee=(We,it)=>{ue[We]||(ue[We]=[]);const wt=`condition-${it}`;ue[We].includes(wt)||ue[We].push(wt)},Ke=(We,it)=>{fe[We]||(fe[We]=[]),fe[We].push(it)};return[...ie].sort((We,it)=>new Date(We.date).getTime()-new Date(it.date).getTime()).forEach(We=>{We.teeth&&Array.isArray(We.teeth)&&We.teeth.forEach(it=>{it.procedures.forEach(wt=>{var Xe;let we=(Xe=We.selected_procedures)==null?void 0:Xe.find(Je=>Je.id===wt);we||(we=z.find(Je=>Je.id===wt)),we&&we.type!=="general"?(Ee(it.toothNumber,we.type),Ke(it.toothNumber,{name:we.name,date:new Date(We.date||We.createdAt||0).toLocaleDateString(),recordId:We.id,isPast:!0})):wt&&Ke(it.toothNumber,{name:`Procedure: ${wt}`,date:new Date(We.date||We.createdAt||0).toLocaleDateString(),recordId:We.id,isPast:!0})})})}),Object.keys($).forEach(We=>{const it=parseInt(We),wt=$[it];wt&&wt.length>0&&wt.forEach(we=>{we.type!=="general"&&(Ee(it,we.type),Ke(it,{name:we.name,date:"Current",isPast:!1}))})}),{conditions:ue,details:fe}},{conditions:xe,details:te}=v.useMemo(()=>Fe(),[ie,$,z]),oe=ue=>{const fe=ie.find(We=>We.id===ue);if(!fe)return;H(fe.notes||"");const Ee=fe.selected_procedures.filter(We=>!fe.teeth.some(it=>it.procedures.includes(We.id)));B(Ee.map(We=>({instanceId:crypto.randomUUID(),procedureId:We.id,name:We.name,price:We.cost,type:We.type})));const Ke={},$e=[];fe.teeth.forEach(We=>{const it=We.procedures.map(wt=>{const we=fe.selected_procedures.find(Xe=>Xe.id===wt)||z.find(Xe=>Xe.id===wt);return{instanceId:crypto.randomUUID(),procedureId:wt,name:we?we.name:wt,price:we?we.cost:0,type:we?we.type:"general"}});it.length>0&&(Ke[We.toothNumber]=it,$e.push(We.toothNumber))}),L(Ke),I($e),G("plan")},_e=(ue,fe)=>{fe?(L(Ee=>{const Ke={...Ee};return Ke[fe]=(Ee[fe]||[]).filter($e=>$e.instanceId!==ue),Ke[fe].length===0&&delete Ke[fe],Ke}),I(Ee=>Ee)):B(Ee=>Ee.filter(Ke=>Ke.instanceId!==ue))},Oe=(ue,fe,Ee)=>{Ee?L(Ke=>({...Ke,[Ee]:(Ke[Ee]||[]).map($e=>$e.instanceId===ue?{...$e,price:fe}:$e)})):B(Ke=>Ke.map($e=>$e.instanceId===ue?{...$e,price:fe}:$e))},K=()=>{window.print()},ge=async(ue=!0)=>{var fe;if(l){Q(!0);try{const Ke=[...F,...Object.values($).flat()].map(we=>({id:we.procedureId,name:we.name,cost:we.price,type:we.type})),We=Object.keys($).map(Number).map(we=>({toothNumber:we,procedures:($[we]||[]).map(Xe=>Xe.procedureId),notes:V})),it={patientId:l.id,teeth:We,selectedProcedures:Ke,notes:V};let wt;if(ze?((fe=ie.find(Xe=>Xe.id===ze))==null?void 0:fe.status)==="draft"?wt=await se(`/api/dental/${ze}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}):wt=await se("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}):wt=await se("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)}),wt.ok){const we=await wt.json();Le(we.id);const Xe=await se(`/api/dental/patient/${l.id}`);if(Xe.ok){const Je=await Xe.json();W(Je)}ue?Ue(!0):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save dental record.")}catch(Ee){console.error(Ee),alert("Error saving record.")}finally{Q(!1)}}};return r.jsxs("div",{className:"dental-page-container printable-section",children:[r.jsxs("header",{className:"dental-header",children:[r.jsxs("div",{className:"dental-title-group",children:[r.jsx(Ra,{className:"dental-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"dental-title",children:"Dental Report"}),r.jsx("p",{className:"dental-subtitle",children:"Create new dental records and bills"})]}),r.jsxs("div",{className:"numbering-toggle",style:{marginLeft:"auto",marginRight:"16px",display:"flex",gap:"4px",background:"var(--dp-bg-sec)",padding:"4px",borderRadius:"8px"},children:[r.jsx("button",{onClick:()=>E("universal"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="universal"?"var(--dp-card-bg)":"transparent",boxShadow:C==="universal"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="universal"?"var(--dp-text)":"var(--dp-text-sec)"},children:"Universal"}),r.jsx("button",{onClick:()=>E("fdi"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="fdi"?"var(--dp-card-bg)":"transparent",boxShadow:C==="fdi"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="fdi"?"var(--dp-text)":"var(--dp-text-sec)"},children:"FDI"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(ro,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:X,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx($t,{size:16})})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(Fn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"dental-search-input header-input",value:e,onChange:me}),s&&r.jsx("div",{className:"search-spinner small"}),a.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:a.map(ue=>r.jsxs("div",{onClick:()=>le(ue),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:ue.name}),r.jsxs("div",{className:"patient-meta",children:[ue.age," yrs / ",ue.gender,"  ",ue.phone]})]}),r.jsx(Jn,{size:16,color:"var(--dp-text-sec)"})]},ue.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>ye(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"dental-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container",children:[!l&&r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--dp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Fn,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"dental-search-input",value:e,onChange:me,autoFocus:!0}),s&&r.jsx("div",{className:"search-spinner"})]}),a.length>0&&r.jsx("div",{className:"search-results-dropdown",children:a.map(ue=>r.jsxs("div",{onClick:()=>le(ue),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:ue.name}),r.jsxs("div",{className:"patient-meta",children:[ue.age," yrs / ",ue.gender,"  ",ue.phone]})]}),r.jsx(Jn,{size:18,color:"var(--dp-text-sec)"})]},ue.id))}),e.length>=2&&!s&&a.length===0&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{style:{color:"var(--dp-text-sec)",marginBottom:"15px"},children:['No patients found matching "',e,'".']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:(p||x)&&r.jsxs("button",{type:"button",onClick:()=>ye(p?"phone":"name"),className:"register-new-btn",style:{backgroundColor:"var(--dp-card-bg)",border:"1px solid var(--dp-primary)",padding:"8px 16px",borderRadius:"8px"},children:['Create "',e,'"']})})]}),!l&&r.jsx("div",{style:{marginTop:"32px"},children:r.jsx("button",{onClick:()=>Y(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage Procedures"})}),!l&&(_||j.length>0)&&r.jsxs("div",{className:"recent-registered-section",children:[r.jsx("div",{className:"recent-registered-label",children:"Recent Patients"}),r.jsx("div",{className:"recent-list",children:_?[1,2,3].map(ue=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:20})]}),r.jsx("div",{className:"recent-info",children:r.jsx(Z,{width:80,height:14})})]},ue)):j.map(ue=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>le(ue),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:ue.name||"New Patient"}),ue.token&&r.jsxs("span",{className:"recent-token",children:["#",ue.token]})]}),r.jsxs("div",{className:"recent-info",children:[ue.age?`${ue.age} yrs`:"",ue.age&&ue.gender?" / ":"",ue.gender||""]})]},ue.id))})]})]}),l&&r.jsx("div",{className:"dental-workspace",children:r.jsxs("div",{className:"dental-grid",children:[r.jsxs("div",{className:"chart-section",children:[r.jsx("div",{className:"dental-card chart-card-scroll",children:r.jsx(NG,{selectedTeeth:O,toothConditions:xe,toothDetails:te,onToothClick:Ne,onEditPastRecord:oe,onPrint:K,numberingSystem:C})}),r.jsxs("div",{className:"dental-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("h4",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>ge(!1),disabled:ne,title:"Save notes and procedures without billing",children:[r.jsx(cs,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:V,onChange:ue=>H(ue.target.value)})]})]}),r.jsx("div",{className:"dental-card procedures-section",children:r.jsxs("div",{className:"treatment-plan-container",style:{borderTop:"none"},children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{onClick:()=>G("plan"),className:q==="plan"?"active":"",children:"Treatment Plan"}),r.jsx("button",{onClick:()=>G("history"),className:q==="history"?"active":"",children:"Visit History"})]}),r.jsx("div",{className:"treatment-plan-list custom-scrollbar",children:q==="plan"?r.jsx(r.Fragment,{children:F.length===0&&Object.keys($).length===0?r.jsx("div",{className:"no-print",style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"Select a tooth to add procedures."}):r.jsxs(r.Fragment,{children:[F.length>0&&r.jsxs("div",{className:"plan-group",children:[r.jsx("h4",{children:"General"}),F.map(ue=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:ue.name,children:ue.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:ue.price,onChange:fe=>Oe(ue.instanceId,parseFloat(fe.target.value)||0),className:"cost-input"}),r.jsx("button",{onClick:()=>_e(ue.instanceId),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx($t,{size:14})})]})]},ue.instanceId))]}),Object.entries($).map(([ue,fe])=>fe.length===0?null:r.jsxs("div",{className:"plan-group",children:[r.jsxs("h4",{children:["Tooth ",xb(parseInt(ue),C)]}),fe.map(Ee=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:Ee.name,children:Ee.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:Ee.price,onChange:Ke=>Oe(Ee.instanceId,parseFloat(Ke.target.value)||0,parseInt(ue)),className:"cost-input"}),r.jsx("button",{onClick:()=>_e(Ee.instanceId,parseInt(ue)),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx($t,{size:14})})]})]},Ee.instanceId))]},ue))]})}):r.jsx("div",{className:"history-list",children:ie.length===0?r.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"No past visits found."}):ie.map(ue=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(ue.date).toLocaleDateString()}),r.jsx("span",{className:"record-status",children:ue.status})]}),r.jsxs("div",{className:"history-record-body",children:[ue.teeth.map(fe=>r.jsxs("div",{className:"history-tooth-group",children:[r.jsxs("strong",{children:["Tooth ",xb(fe.toothNumber,C),":"]})," ",fe.procedures.map(Ee=>{const Ke=ue.selected_procedures.find($e=>$e.id===Ee)||z.find($e=>$e.id===Ee);return Ke?Ke.name:Ee}).join(", ")]},fe.toothNumber)),ue.notes&&r.jsx("p",{className:"history-notes",children:r.jsxs("em",{children:["Notes: ",ue.notes]})}),ue.status==="billed"&&r.jsx("div",{className:"history-record-actions mt-3",children:r.jsxs("button",{onClick:()=>{Le(ue.id),Ue(!0)},className:"view-bill-btn",children:[r.jsx(Ra,{size:14})," View Bill"]})})]})]},ue.id))})}),r.jsx("div",{className:"action-footer",children:r.jsx("button",{onClick:()=>ge(!0),className:"save-btn",disabled:ne||F.length===0&&Object.keys($).length===0,children:ne?"Saving...":"Save & Bill"})})]})})]})}),d&&l&&r.jsx(ZH,{patient:l,onClose:()=>f(!1),onSave:ae}),je&&r.jsx(b6e,{onClose:()=>Y(!1),onUpdate:Ce}),de!==null&&r.jsx(j6e,{toothNumber:de,procedures:z.map(ue=>({id:ue.id,name:ue.name,cost:ue.cost,type:ue.type})),history:te[de]||[],onSelect:Te,onClose:()=>ee(null),numberingSystem:C}),r.jsx(w6e,{isOpen:Ie,recordId:ze,onClose:()=>{Ue(!1),X()},onBillingComplete:()=>{}})]})},_6e=()=>{var de,ee,Ne,Te,Fe;const t=Lt(),e=$r(),[n,a]=v.useState(null),[i,s]=v.useState([]),[o,l]=v.useState(!0),[c,d]=v.useState(null),[f,p]=v.useState(!1),[g,x]=v.useState("cash"),[b,j]=v.useState(""),[S,_]=v.useState(""),[T,C]=v.useState(""),[E,k]=v.useState(""),[O,I]=v.useState(""),[F,B]=v.useState(!1),[$,L]=v.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),V=()=>{$.length<5&&L(xe=>[...xe,{id:Date.now().toString(),method:"cash",amount:0}])},H=xe=>{$.length>2&&L(te=>te.filter(oe=>oe.id!==xe))},ne=(xe,te,oe)=>{L(_e=>{const Oe=_e.map(K=>K.id===xe?te==="method"?{...K,method:oe}:{...K,amount:Math.max(0,oe)}:K);if(te==="amount"&&Oe.length===2){const ge=Oe.findIndex(Ee=>Ee.id===xe)===0?1:0,ue=Math.max(0,oe),fe=Ae-ue;Oe[ge]={...Oe[ge],amount:Math.max(0,fe)}}return Oe})},Q=(xe,te)=>{const oe=$.filter(Oe=>Oe.id!==xe).reduce((Oe,K)=>Oe+K.amount,0),_e=Math.max(0,te-oe);L(Oe=>Oe.map(K=>K.id===xe?{...K,amount:_e}:K))},[q,G]=v.useState(0),ie=v.useRef(!1),[W,z]=v.useState(null),[ce,je]=v.useState(!1),Y=xe=>{const te=Math.max(0,Math.min(100,isNaN(xe)?0:xe));ie.current=!0,G(te);const oe=i.map(_e=>({..._e,discount_percentage:te}));s(oe)},Ie=(xe,te)=>{const oe=[...i];oe[xe].discount_percentage=isNaN(te)?0:te,s(oe)};v.useEffect(()=>{if(ie.current){ie.current=!1;return}const xe=i.reduce((_e,Oe)=>_e+(Oe.price??0),0);if(xe===0){G(0);return}const oe=i.reduce((_e,Oe)=>{const ge=(Oe.price??0)*((Oe.discount_percentage??0)/100);return _e+ge},0)/xe*100;G(_e=>Math.abs(_e-oe)>.01?oe:_e)},[i]);const Ue=async()=>{if(!n)return d("No record data available to bill."),null;if(i.length===0)return d("Cannot bill an empty procedure list."),null;p(!0),d(null);try{const xe=i.map(ge=>{const ue=ge.price,fe=ue*((ge.discount_percentage??0)/100),Ee=ue-fe;return{name:ge.name,price:ge.price,quantity:1,total:Ee,item_id:ge.id||`proc_${Date.now()}`,type:"service",discount_percentage:ge.discount_percentage??0}}),te={patientId:n.patientId.id,items:xe,amount:Ae,paymentMode:F?"split":g,type:"dental",related_id:n.id,status:"paid",discountPercentage:q};F&&(te.splitPayments=$.map(ge=>({method:ge.method,amount:ge.amount})));const oe=await se("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)}),_e=await oe.json();if(!oe.ok||!_e.id)throw new Error(_e.message||"Failed to create bill.");(await se(`/api/dental/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:_e.id})})).ok||console.error("Failed to update dental record status"),a(ge=>ge?{...ge,status:"billed",billId:_e.id}:null);const K=F?$.filter(ge=>ge.method==="credit").reduce((ge,ue)=>ge+ue.amount,0):g==="credit"?Ae:0;if(K>0)try{await se(`/api/patient-debts/${n.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:K,related_bill_id:_e.id,notes:`Dental Bill #${_e.id}`})})}catch(ge){console.error("Failed to create debt entry:",ge)}return _e.id}catch(xe){return console.error("Billing process failed:",xe),d(xe.message||"Failed to create bill."),null}finally{p(!1)}},ze=()=>{window.print()},Le=async()=>{await Ue()&&setTimeout(()=>window.print(),500)};v.useEffect(()=>{const xe=e.pathname.split("/"),te=xe[xe.length-1];te?(async()=>{l(!0);try{const[_e,Oe]=await Promise.all([se(`/api/dental/${te}`),se("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!_e.ok)throw new Error("Failed to fetch dental record");const K=await _e.json(),ge={...K,patientId:K.Patient||K.patientId};if(a(ge),Oe.ok){const Ee=await Oe.json();_(Ee.upi_id||""),C(Ee.name||""),k(Ee.address||""),I(Ee.notes||"")}const fe=(ge.selected_procedures||ge.selectedProcedures||[]).map(Ee=>({...Ee,price:Ee.cost,discount_percentage:0}));s(fe)}catch(_e){console.error("Failed to fetch data:",_e),d(_e.message)}finally{l(!1)}})():(d("No record ID provided."),l(!1))},[e.pathname]);const be=v.useMemo(()=>i.reduce((xe,te)=>xe+(te.price??0),0),[i]),Ce=v.useMemo(()=>i.reduce((xe,te)=>{const _e=(te.price??0)*(te.discount_percentage??0)/100;return xe+_e},0),[i]),Ae=v.useMemo(()=>be-Ce,[be,Ce]),me=v.useMemo(()=>$.reduce((xe,te)=>xe+te.amount,0),[$]),ye=v.useMemo(()=>Ae-me,[Ae,me]),le=v.useMemo(()=>Math.abs(ye)<.01,[ye]),X=v.useMemo(()=>F?$.some(xe=>xe.method==="credit"&&xe.amount>0):g==="credit",[F,$,g]),ae=v.useMemo(()=>F?$.filter(xe=>xe.method==="credit").reduce((xe,te)=>xe+te.amount,0):g==="credit"?Ae:0,[F,$,g,Ae]);return v.useEffect(()=>{if(Ae>0&&S){const xe=`upi://pay?pa=${S}&pn=${encodeURIComponent(T)}&am=${Ae.toFixed(2)}&cu=INR`;j(xe)}else j("")},[Ae,S,T]),v.useEffect(()=>{(async()=>{var te;if(X&&((te=n==null?void 0:n.patientId)!=null&&te.id)){je(!0);try{const oe=await se(`/api/patient-debts/${n.patientId.id}/balance`);if(oe.ok){const _e=await oe.json();z(_e.netDebt||0)}else z(0)}catch{z(0)}finally{je(!1)}}})()},[X,(de=n==null?void 0:n.patientId)==null?void 0:de.id]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(xe=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})})]},xe))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(Z,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T||"Clinic Name"}),(E||O)&&r.jsxs("div",{className:"clinic-details-print",children:[E&&r.jsx("span",{className:"small-text clinic-address",children:E}),O&&r.jsx("span",{className:"small-text clinic-notes",children:O})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((ee=n.patientId)==null?void 0:ee.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",((Ne=n.patientId)==null?void 0:Ne.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(n.date||n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(on,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Dental Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Jn,{size:16})," Patient Name"]})," ",((Te=n.patientId)==null?void 0:Te.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ya,{size:16})," Token"]})," ",((Fe=n.patientId)==null?void 0:Fe.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ra,{size:16})," Record ID"]})," ",n.id.substring(n.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(ua,{size:16})," Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),i.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:i.map((xe,te)=>{const oe=xe.price??0,_e=oe*(xe.discount_percentage??0)/100,Oe=oe-_e;return r.jsxs("tr",{children:[r.jsx("td",{children:te+1}),r.jsx("td",{children:xe.name}),r.jsx("td",{children:xe.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:xe.discount_percentage===0?"":xe.discount_percentage,onChange:K=>Ie(te,parseFloat(K.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Oe.toFixed(2)})]},te)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",q.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",Ce.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ae.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:F?"Split Payment":g==="cash"?"Cash":g==="upi"?"UPI":g==="card"?"Card":g==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),F&&$.map((xe,te)=>xe.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:xe.method==="cash"?"Cash":xe.method==="upi"?"UPI":xe.method==="card"?"Card":xe.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",xe.amount.toFixed(2)]})]},te))]}),W!==null&&(W>0||X)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(W??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(W??0).toFixed(2)]})]}),X&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ae.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((W??0)+(X?ae:0)).toFixed(2)]})]})]})]}),b&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${g!=="upi"?"hide-on-screen":""}`,children:[r.jsx(La,{value:b,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",Ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:q===0?"":q,onChange:xe=>Y(parseFloat(xe.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ae.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:b?r.jsxs(r.Fragment,{children:[r.jsx(La,{value:b,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>B(!F),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:F?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:F?"rgba(79, 172, 254, 0.1)":"transparent",color:F?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Bo,{size:14}),"Split"]})]}),F?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",Ae.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:$.map((xe,te)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:te+1}),r.jsxs("select",{value:xe.method,onChange:oe=>ne(xe.id,"method",oe.target.value),className:`split-payment-select ${xe.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:xe.amount||"",onChange:oe=>ne(xe.id,"amount",parseFloat(oe.target.value)||0),className:`split-payment-input ${xe.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),$.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>Q(xe.id,Ae),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>H(xe.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Vn,{size:12})})]})]},xe.id))}),$.length<5&&r.jsxs("button",{type:"button",onClick:V,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(Gn,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",me.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${le?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[le?"":ye>0?"":"",le?"Balanced":ye>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(ye).toFixed(2)]})]}),!le&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",Ae.toFixed(2)]})]})]}):r.jsxs("select",{value:g,onChange:xe=>x(xe.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),X&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),ce?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:W&&W>0?"#dc3545":"#28a745"},children:["",(W||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ae.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((W||0)+ae).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:n.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ze,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:Le,className:"primary-button",disabled:f,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Lo,{size:20})," Bill Generated"]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})]}):r.jsx("div",{className:"error-message-box",children:"No record found."})},C6e=()=>{const t=Lt(),e=$r(),[n,a]=v.useState(""),[i,s]=v.useState([]),[o,l]=v.useState(!1),[c,d]=v.useState(null),[f,p]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!1),[S,_]=v.useState(!1),[T,C]=v.useState("idle"),[E,k]=v.useState(null),[O,I]=v.useState(""),F=v.useMemo(()=>qc(async be=>{if(be.trim().length<2){s([]),l(!1);return}l(!0);try{const Ce=new URLSearchParams({search:encodeURIComponent(be),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Ae=await se(`/api/patients?${Ce.toString()}`);if(Ae.ok){const me=await Ae.json();s(me.patients||[])}}catch(Ce){console.error("Search failed",Ce)}finally{l(!1)}},300),[]),B=be=>{const Ce=be.target.value;a(Ce),Ce.length>=2?(l(!0),F(Ce)):(s([]),l(!1))},$=v.useCallback(async be=>{_(!0);try{const Ce=await se(`/api/patient-files/${be}`);if(Ce.ok){const Ae=await Ce.json();x(Ae)}}catch(Ce){console.error("Failed to fetch files",Ce)}finally{_(!1)}},[]),L=be=>{d({id:be.id,name:be.name,age:be.age,gender:be.gender,phone:be.phone,token:be.token}),a(""),I(""),s([]),k(null),C("idle"),p([]),$(be.id)},V=()=>{d(null),p([]),x([]),C("idle")};Se.useEffect(()=>{if(e.state&&e.state.patient){const be=e.state.patient;L(be)}},[e.state]);const H=be=>{if(be.target.files){const Ce=Array.from(be.target.files);p(Ae=>[...Ae,...Ce]),C("idle")}},ne=be=>{p(Ce=>Ce.filter((Ae,me)=>me!==be))},Q=async be=>{if(confirm("Are you sure you want to delete this file?"))try{(await se(`/api/patient-files/${be}`,{method:"DELETE"})).ok?x(Ae=>Ae.filter(me=>me.id!==be)):alert("Failed to delete file.")}catch(Ce){console.error("Delete error",Ce),alert("Error deleting file.")}},q=be=>be.startsWith("image/")?r.jsx(_I,{size:20}):be==="application/pdf"?r.jsx(Ra,{size:20}):be.startsWith("video/")?r.jsx(yX,{size:20}):be.startsWith("audio/")?r.jsx(nJ,{size:20}):r.jsx(nC,{size:20}),G=be=>{if(be===0)return"0 Bytes";const Ce=1024,Ae=["Bytes","KB","MB","GB"],me=Math.floor(Math.log(be)/Math.log(Ce));return parseFloat((be/Math.pow(Ce,me)).toFixed(2))+" "+Ae[me]},ie=async()=>{if(!(!c||f.length===0)){j(!0),k(null),C("idle");try{const be=new FormData;f.forEach(Ae=>{be.append("files",Ae)});const Ce=await se(`/api/patient-files/${c.id}`,{method:"POST",body:be});if(Ce.ok){C("success");const Ae=await Ce.json();Ae.files&&x(me=>[...Ae.files,...me]),setTimeout(()=>{p([]),C("idle")},1500)}else throw new Error("Upload failed")}catch(be){console.error("Upload error",be),k("Failed to upload files. Please try again."),C("error")}finally{j(!1)}}},[W,z]=v.useState(null),[ce,je]=v.useState(""),Y=v.useRef(null),Ie=()=>{Y.current&&(Y.current.value="",Y.current.click())},Ue=be=>{z(be.id),je(be.original_name)},ze=()=>{z(null),je("")},Le=async be=>{if(ce.trim())try{(await se(`/api/patient-files/${be}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:ce})})).ok?(x(Ae=>Ae.map(me=>me.id===be?{...me,original_name:ce}:me)),z(null)):alert("Failed to rename file.")}catch(Ce){console.error("Rename error",Ce),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(on,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Patient Files"})]})}),c?r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"selected-patient-header",children:[r.jsx("div",{className:"patient-avatar",children:c.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"selected-patient-info",children:[r.jsx("h2",{className:"selected-patient-name",children:c.name}),r.jsxs("div",{className:"selected-patient-details",children:[r.jsxs("span",{children:["Token: #",c.token||"NA"]}),c.gender&&r.jsxs("span",{children:[" ",c.gender]}),c.age&&r.jsxs("span",{children:[" ",c.age," yrs"]}),c.phone&&r.jsxs("span",{children:[" ",c.phone]})]}),r.jsx("input",{ref:Y,type:"file",multiple:!0,onChange:H,style:{display:"none"}})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Ie,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx(SE,{size:18}),r.jsx("span",{children:"Upload"})]}),r.jsx("button",{onClick:V,className:"secondary-btn change-patient-btn",children:"Change Patient"})]})]}),(g.length>0||S)&&r.jsxs("div",{className:"existing-files-section mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(nC,{className:"text-indigo-500",size:20}),"Uploaded Files (",g.length,")"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(Fn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search in Drive...",value:O,onChange:be=>I(be.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),S?r.jsx("div",{className:"flex justify-center p-8",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx(Z,{width:300,height:20}),r.jsx(Z,{width:300,height:20}),r.jsx(Z,{width:300,height:20})]})}):r.jsxs("div",{className:"file-grid",children:[g.filter(be=>be.original_name.toLowerCase().includes(O.toLowerCase())).map(be=>{const Ce=be.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[Ce?r.jsx("img",{src:be.url,alt:be.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:q(be.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:be.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-icon-btn download",title:"Download",children:r.jsx(zz,{size:18})}),r.jsx("button",{onClick:()=>Ue(be),className:"action-icon-btn rename",title:"Rename",children:r.jsx(fJ,{size:18})}),r.jsx("button",{onClick:()=>Q(be.id),className:"action-icon-btn delete",title:"Delete",children:r.jsx(Vn,{size:18})})]})]}),r.jsx("div",{className:"file-card-meta",children:W===be.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:ce,onChange:Ae=>je(Ae.target.value),className:"rename-input",autoFocus:!0,onKeyDown:Ae=>{Ae.key==="Enter"&&Le(be.id),Ae.key==="Escape"&&ze()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>Le(be.id),className:"icon-btn text-green-600",children:r.jsx(Lo,{size:14})}),r.jsx("button",{onClick:ze,className:"icon-btn text-red-500",children:r.jsx($t,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:Ce?r.jsx(_I,{size:16,className:"text-purple-500"}):q(be.mime_type)}),r.jsx("a",{href:be.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:be.original_name,children:be.original_name})]})})]},be.id)}),g.filter(be=>be.original_name.toLowerCase().includes(O.toLowerCase())).length===0&&O&&r.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(Fn,{size:48,className:"text-slate-200"}),r.jsxs("p",{children:['No files found matching "',O,'"']})]})})]})]}),(f.length>0||T==="success"||E)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:f.length>0?"Pending Uploads":"Upload Status"}),E&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(ea,{size:20}),E]}),T==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Lo,{size:20}),"Files uploaded successfully!"]}),f.length>0&&r.jsx("div",{className:"file-list",children:f.map((be,Ce)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(nC,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:be.name,children:be.name}),r.jsx("div",{className:"file-size",children:G(be.size)})]}),r.jsx("button",{onClick:()=>ne(Ce),className:"remove-file-btn",title:"Remove file",children:r.jsx($t,{size:16})})]},Ce))}),f.length>0&&r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{onClick:()=>p([]),className:"secondary-btn",disabled:b,children:"Clear"}),r.jsx("button",{onClick:ie,className:"primary-btn",disabled:b,children:b?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx(SE,{size:18}),"Upload ",f.length," File",f.length!==1?"s":""]})})]})]})]}):r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-slate-700",children:[r.jsx(Fn,{className:"text-indigo-500"}),"Search Patient"]}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Fn,{className:"search-icon-files",size:20}),r.jsx("input",{type:"text",placeholder:"Enter patient name, phone, or token...",value:n,onChange:B,className:"search-input",autoFocus:!0})]}),o?r.jsx("div",{className:"patient-results-list",children:[1,2,3].map(be=>r.jsxs("div",{className:"patient-result-item",style:{cursor:"default"},children:[r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:100,height:16})]},be))}):i.length>0&&r.jsx("ul",{className:"patient-results-list",children:i.map(be=>r.jsxs("li",{className:"patient-result-item",onClick:()=>L(be),children:[r.jsxs("div",{children:[r.jsx("div",{className:"patient-name-text",children:be.name}),r.jsxs("div",{className:"patient-meta",children:[r.jsxs("span",{children:["#",be.token||"N/A"]}),be.gender&&r.jsx("span",{children:be.gender}),be.age&&r.jsxs("span",{children:[be.age," yrs"]})]})]}),r.jsx("div",{className:"patient-phone",children:be.phone})]},be.id))}),n.length>=2&&!o&&i.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"30px",color:"#94a3b8"},children:['No patients found matching "',n,'"']})]})]})},CO=v.lazy(()=>MN(()=>import("./AddPatientPage-DctKKfma.js"),__vite__mapDeps([2,3]))),$B=v.lazy(()=>MN(()=>import("./EditComplaintPage-CUfdr_TI.js"),__vite__mapDeps([0,1])));function T6e(){const[t,e]=v.useState(!1),[n,a]=v.useState(null),[i,s]=v.useState(!0),[o,l]=v.useState(null),[c,d]=v.useState(!1),f=E=>{a(E),e(!0),E.role==="admin"&&!E.has_seen_tutorial&&d(!0)},p=()=>{e(!1),a(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};v.useEffect(()=>{const E=localStorage.getItem("authToken"),k=localStorage.getItem("currentUser");if(E&&k)try{const O=JSON.parse(k);a(O),e(!0),O.role==="admin"&&!O.has_seen_tutorial&&d(!0)}catch(O){console.error("Error parsing stored user data:",O),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}s(!1)},[]);const{data:g}=rOe(t&&!!n);v.useEffect(()=>{g?l(g):t||l(null)},[g,t]);const[x,b]=v.useState(null),[j,S]=v.useState(!1);v.useEffect(()=>{const E=k=>{k.preventDefault(),b(k),S(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",E),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),S(!1)),()=>{window.removeEventListener("beforeinstallprompt",E)}},[]),v.useEffect(()=>{const E=window.matchMedia("(prefers-color-scheme: dark)"),k=()=>{E.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return k(),E.addEventListener("change",k),()=>{E.removeEventListener("change",k),document.body.classList.remove("dark-mode")}},[]);const _=v.useCallback(async()=>{if(!x){console.log("Install prompt event not available.");return}const E=x;E.prompt();const{outcome:k}=await E.userChoice;console.log(`User response to the install prompt: ${k}`),b(null),S(!1)},[x]),T=async()=>{if(n)try{(await se(`/api/users/${n.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(a(k=>k?{...k,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...n,has_seen_tutorial:!0})),d(!1)):console.error("Failed to update tutorial status on backend.")}catch(E){console.error("Error marking tutorial as seen:",E)}};return i?r.jsx(km,{}):r.jsx(HW,{clientId:"277898779560-33obduhn8r758rini4qagetdrupvisri.apps.googleusercontent.com",children:r.jsx(NK,{children:r.jsx(jK,{children:r.jsx(wK,{children:r.jsxs(uK,{children:[r.jsx(bK,{children:r.jsxs(_m,{children:[r.jsx(xt,{path:"/login",element:t?r.jsx(tn,{to:"/dashboard"}):r.jsx(AOe,{onLoginSuccess:f})}),r.jsx(xt,{path:"/register",element:t?r.jsx(tn,{to:"/dashboard"}):r.jsx(EOe,{})}),r.jsx(xt,{path:"/handle-complaint-url",element:t?r.jsx(lRe,{}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/live-api",element:t?r.jsx(Kme,{}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/create-lab-order",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(JH,{currentUser:n})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/manage-admission",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(PM,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/lab/report/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(OB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/lab/enter-report/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(OB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/add-patient",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(v.Suspense,{fallback:r.jsx(km,{}),children:r.jsx(CO,{})})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/billing",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(oIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-complaint/:recordId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(km,{}),children:r.jsx($B,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-complaint/patient/:patientId",element:t&&n?r.jsx(v.Suspense,{fallback:r.jsx(km,{}),children:r.jsx($B,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-pharmacy-order/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(jG,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/guide",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(x6e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/*",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:k6e(n.role,n,se)}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/lab/view-report/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(yIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/lab/search-report",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(xIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/lab-reports",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(vIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/pharmacy-orders",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(lIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(wG,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/patient-debt",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(PN,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory/add",element:t&&n?r.jsx(tn,{to:"/dashboard/purchase",replace:!0}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/dental",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(S6e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/medical",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(dG,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/dental-billing/:id",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(_6e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory/edit/:id",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(bG,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/lab-inventory",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(DM,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/complaints",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(rIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/admission-bill/:billId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(DB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/admission-billing",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(DB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/start-subscription/:patientId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(MIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/start-clinic-subscription",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(FIe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/refill-reminders",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(oRe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/create-custom-bill",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(XH,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/pharmacy-billing/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(GRe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/lab-billing/:orderId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(WRe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/doctor-billing/:queueId",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(KRe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/custom-tables",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(k4e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/custom-tables/:id",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(A4e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(E4e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/new",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(LB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/:id",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(D4e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/:id/edit",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(LB,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/analysis",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(T4e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/clinic-hub",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(QRe,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/files",element:t&&n?r.jsx(Cn,{user:n,onLogout:p,showInstallPrompt:j,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(C6e,{})}):r.jsx(tn,{to:"/login"})}),r.jsx(xt,{path:"*",element:r.jsx(tn,{to:t?"/dashboard":"/login"})})]})}),c&&(n==null?void 0:n.role)==="admin"&&r.jsx(iRe,{onClose:()=>d(!1),onMarkAsSeen:T}),t&&n&&r.jsx(A6e,{user:n}),t&&n&&r.jsx(FPe,{user:n})]})})})})})}const k6e=(t,e,n)=>{switch(t){case"superadmin":return r.jsxs(_m,{children:[r.jsx(xt,{index:!0,element:r.jsx(tRe,{})}),r.jsx(xt,{path:"clinic-subscriptions",element:r.jsx(IIe,{})}),r.jsx(xt,{path:"clinic-subscriptions/add",element:r.jsx(RIe,{})}),r.jsx(xt,{path:"clinic-subscriptions/edit/:id",element:r.jsx(LIe,{})}),r.jsx(xt,{path:"users",element:r.jsx($Ie,{})})," ",r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return r.jsxs(_m,{children:[r.jsx(xt,{index:!0,element:r.jsx(oDe,{})}),r.jsx(xt,{path:"search-patient",element:r.jsx(gv,{})}),r.jsx(xt,{path:"patients",element:r.jsx(wO,{})}),r.jsx(xt,{path:"doctor",element:r.jsx(Vj,{})}),r.jsx(xt,{path:"staff",element:r.jsx(wIe,{fetchWithAuth:n})}),r.jsx(xt,{path:"staff/add",element:r.jsx(tIe,{clinicId:e==null?void 0:e.clinic_id})}),r.jsx(xt,{path:"staff/edit/:id",element:r.jsx(nIe,{})}),r.jsx(xt,{path:"roles",element:r.jsx(M4e,{})}),r.jsx(xt,{path:"patients/add",element:r.jsx(v.Suspense,{fallback:r.jsx(km,{}),children:r.jsx(CO,{})})}),r.jsx(xt,{path:"inventory",element:r.jsx(vG,{})}),r.jsx(xt,{path:"inventory/edit/:id",element:r.jsx(bG,{})}),r.jsx(xt,{path:"distributors",element:r.jsx(MB,{})}),r.jsx(xt,{path:"patient-debts",element:r.jsx(PN,{})})," ",r.jsx(xt,{path:"purchase",element:r.jsx(IB,{})})," ",r.jsx(xt,{path:"queue",element:r.jsx(Vj,{})}),r.jsx(xt,{path:"subscriptions",element:r.jsx(PIe,{})}),r.jsx(xt,{path:"subscriptions/add",element:r.jsx(OIe,{})}),r.jsx(xt,{path:"subscriptions/edit/:id",element:r.jsx(DIe,{})}),r.jsx(xt,{path:"manage-admission",element:r.jsx(PM,{})}),r.jsx(xt,{path:"reception",element:r.jsx(FA,{currentUser:e})}),r.jsx(xt,{path:"lab",element:r.jsx(EB,{})}),r.jsx(xt,{path:"pharmacy-queue",element:r.jsx(qA,{})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return r.jsxs(_m,{children:[r.jsx(xt,{index:!0,element:r.jsx(tn,{to:"search-patient",replace:!0})}),r.jsx(xt,{path:"search-patient",element:r.jsx(gv,{})}),r.jsx(xt,{path:"queue",element:r.jsx(Vj,{})}),r.jsx(xt,{path:":patientId",element:r.jsx(Vj,{})}),r.jsx(xt,{path:"add-patient",element:r.jsx(v.Suspense,{fallback:r.jsx(km,{}),children:r.jsx(CO,{})})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return r.jsxs(_m,{children:[r.jsx(xt,{index:!0,element:r.jsx(FA,{currentUser:e})}),r.jsx(xt,{path:"reception",element:r.jsx(FA,{currentUser:e})})," ",r.jsx(xt,{path:"all-patients",element:r.jsx(wO,{})}),r.jsx(xt,{path:"search-patient",element:r.jsx(gv,{})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return r.jsx(EB,{});case"pharmacy":return r.jsxs(_m,{children:[r.jsx(xt,{index:!0,element:r.jsx(qA,{})}),r.jsx(xt,{path:"pharmacy-queue",element:r.jsx(qA,{})})," ",r.jsx(xt,{path:"inventory",element:r.jsx(wG,{})}),r.jsx(xt,{path:"settings",element:r.jsx(eIe,{})}),r.jsx(xt,{path:"add-order",element:r.jsx(cIe,{})}),r.jsx(xt,{path:"edit-pharmacy-order/:orderId",element:r.jsx(jG,{})}),r.jsx(xt,{path:"orders/:orderId",element:r.jsx(SIe,{})}),r.jsx(xt,{path:"search-patient-records",element:r.jsx(gv,{})}),r.jsx(xt,{path:"distributors",element:r.jsx(MB,{})}),r.jsx(xt,{path:"patient-debts",element:r.jsx(PN,{})})," ",r.jsx(xt,{path:"purchase",element:r.jsx(IB,{})})," ",r.jsx(xt,{path:"*",element:r.jsx(tn,{to:"/dashboard",replace:!0})})]});default:return r.jsxs("div",{children:["Unknown role (",t,") or dashboard not implemented."]},t)}},Cn=({user:t,onLogout:e,children:n,showInstallPrompt:a,onInstallClick:i,clinicProPlanStatus:s})=>{const o=Lt(),[l,c]=v.useState(!1),[d,f]=v.useState(window.innerWidth<=768),[p,g]=v.useState(null),[x,b]=v.useState(!1);v.useEffect(()=>VE.subscribe(T=>{b(T)}),[]),v.useEffect(()=>{const T=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const C=await se("/api/clinics/settings");if(C.ok){const E=await C.json();g(E.logoUrl)}else console.error("Failed to fetch clinic details for display:",C.statusText),g(null)}catch(C){console.error("Error fetching clinic details for display:",C),g(null)}else g(null)})()},[t==null?void 0:t.clinic_id]);const j=()=>{c(!l)},{toggleCommandBar:S,isOpen:_}=Dc();return r.jsxs("div",{className:"dashboard-layout",children:[" ",r.jsxs("nav",{className:"app-header no-print",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),o("/dashboard")},className:"logo-container",children:r.jsx("img",{src:p||"/logo.png",alt:"App Logo",className:"logo-image"})}),r.jsxs("div",{className:"title-section",children:[r.jsx("span",{className:"app-title-link",children:"Newtons Ai"}),r.jsxs("span",{className:"user-role-panel",children:["(",t.role.charAt(0).toUpperCase()+t.role.slice(1)," Panel)"]})]})]}),r.jsxs("div",{className:"header-right",children:[a&&r.jsxs("button",{onClick:i,className:"install-button",title:"Install App",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{children:"Install"})]}),r.jsxs("a",{href:"https://store.newtons.in",target:"_blank",rel:"noopener noreferrer",className:"shop-button",title:"Visit Store",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),r.jsx("span",{children:"Shop"})]}),!d&&r.jsxs("button",{onClick:()=>o("/dashboard/guide"),className:"guide-button",title:"User Guide",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),r.jsx("span",{children:"Guide"})]}),s&&(s.hasProPlan?r.jsx("span",{className:"pro-badge",children:"PRO"}):r.jsx("button",{onClick:()=>o("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),!_&&r.jsx("button",{onClick:S,className:"command-bar-button",title:"Search & Commands (Ctrl+K)",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("path",{d:"m21 21-4.3-4.3"})]})}),r.jsx("button",{className:"hamburger-icon",onClick:j,"aria-label":"Open navigation",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),x&&r.jsx("div",{className:"global-loading-bar"})]}),r.jsxs("main",{className:"main-content",children:[r.jsx(MOe,{}),n]}),d?r.jsx(OOe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j,roleNavigation:HH}):r.jsx(POe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:j}),!d&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j}),!d&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:j})]})},A6e=({user:t})=>{const{isOpen:e,closeAssistant:n}=LN(),a=Lt(),[i,s]=v.useState(null),[o,l]=v.useState([]);return v.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const[d,f]=await Promise.all([se("/api/clinics/settings"),se("/api/staff")]);d.ok&&s(await d.json()),f.ok&&l(await f.json())}catch(d){console.error("Failed to fetch initial AI context",d)}})()},[t.clinic_id]),e?r.jsx("div",{className:"ai-assistant-wrapper",children:r.jsx(GH,{onClose:n,settings:i,staffList:o,onSettingsUpdate:()=>{},onStaffUpdate:()=>{},onHighlight:c=>{c.forEach(d=>{if(d.startsWith("navigate_")){const f=d.replace("navigate_","");a(`/dashboard/analysis?section=${f}`)}else{const f=document.getElementById(d);f&&(f.scrollIntoView({behavior:"smooth",block:"center"}),f.classList.add("ai-highlight-glow"),setTimeout(()=>f.classList.remove("ai-highlight-glow"),2e3))}})}})}):null};rW.createRoot(document.getElementById("root")).render(r.jsx(v.StrictMode,{children:r.jsx(kW,{client:zW,children:r.jsx(T6e,{})})}));export{bI as $,on as A,Bz as B,Tb as C,cd as D,Im as E,oo as F,xU as G,Ya as H,_De as I,CDe as J,Vu as K,nS as L,wf as M,bf as N,Fn as O,fJ as P,La as Q,Se as R,Z as S,Vn as T,BN as U,SI as V,NG as W,$t as X,dd as Y,HO as Z,FN as _,Yc as a,sRe as a0,Qz as b,dt as c,vf as d,cs as e,se as f,Wn as g,vU as h,cRe as i,r as j,ua as k,Gn as l,Jn as m,zO as n,Nf as o,DN as p,Gt as q,v as r,Dc as s,Fa as t,Lt as u,ds as v,$r as w,Ra as x,Ll as y,WQ as z};

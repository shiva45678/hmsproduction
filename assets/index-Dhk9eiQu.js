var VA=Object.defineProperty;var HA=(e,n,t)=>n in e?VA(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Wn=(e,n,t)=>HA(e,typeof n!="symbol"?n+"":n,t);function GA(e,n){for(var t=0;t<n.length;t++){const i=n[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(i,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zv={exports:{}},gm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oS;function YA(){if(oS)return gm;oS=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var f in a)f!=="key"&&(o[f]=a[f])}else o=a;return a=o.ref,{$$typeof:e,type:i,key:l,ref:a!==void 0?a:null,props:o}}return gm.Fragment=n,gm.jsx=t,gm.jsxs=t,gm}var lS;function WA(){return lS||(lS=1,zv.exports=YA()),zv.exports}var r=WA(),Bv={exports:{}},qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cS;function QA(){if(cS)return qt;cS=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=g&&P[g]||P["@@iterator"],typeof P=="function"?P:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,k={};function E(P,te,se){this.props=P,this.context=te,this.refs=k,this.updater=se||v}E.prototype.isReactComponent={},E.prototype.setState=function(P,te){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,te,"setState")},E.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=E.prototype;function I(P,te,se){this.props=P,this.context=te,this.refs=k,this.updater=se||v}var D=I.prototype=new T;D.constructor=I,N(D,E.prototype),D.isPureReactComponent=!0;var U=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function B(P,te,se,M,fe,we){return se=we.ref,{$$typeof:e,type:P,key:te,ref:se!==void 0?se:null,props:we}}function q(P,te){return B(P.type,te,void 0,void 0,void 0,P.props)}function H(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function F(P){var te={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(se){return te[se]})}var L=/\/+/g;function Q(P,te){return typeof P=="object"&&P!==null&&P.key!=null?F(""+P.key):te.toString(36)}function ne(){}function ie(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ne,ne):(P.status="pending",P.then(function(te){P.status==="pending"&&(P.status="fulfilled",P.value=te)},function(te){P.status==="pending"&&(P.status="rejected",P.reason=te)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function oe(P,te,se,M,fe){var we=typeof P;(we==="undefined"||we==="boolean")&&(P=null);var ce=!1;if(P===null)ce=!0;else switch(we){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(P.$$typeof){case e:case n:ce=!0;break;case p:return ce=P._init,oe(ce(P._payload),te,se,M,fe)}}if(ce)return fe=fe(P),ce=M===""?"."+Q(P,0):M,U(fe)?(se="",ce!=null&&(se=ce.replace(L,"$&/")+"/"),oe(fe,te,se,"",function(nt){return nt})):fe!=null&&(H(fe)&&(fe=q(fe,se+(fe.key==null||P&&P.key===fe.key?"":(""+fe.key).replace(L,"$&/")+"/")+ce)),te.push(fe)),1;ce=0;var Le=M===""?".":M+":";if(U(P))for(var Ne=0;Ne<P.length;Ne++)M=P[Ne],we=Le+Q(M,Ne),ce+=oe(M,te,se,we,fe);else if(Ne=b(P),typeof Ne=="function")for(P=Ne.call(P),Ne=0;!(M=P.next()).done;)M=M.value,we=Le+Q(M,Ne++),ce+=oe(M,te,se,we,fe);else if(we==="object"){if(typeof P.then=="function")return oe(ie(P),te,se,M,fe);throw te=String(P),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ce}function Y(P,te,se){if(P==null)return P;var M=[],fe=0;return oe(P,M,"","",function(we){return te.call(se,we,fe++)}),M}function z(P){if(P._status===-1){var te=P._result;te=te(),te.then(function(se){(P._status===0||P._status===-1)&&(P._status=1,P._result=se)},function(se){(P._status===0||P._status===-1)&&(P._status=2,P._result=se)}),P._status===-1&&(P._status=0,P._result=te)}if(P._status===1)return P._result.default;throw P._result}var re=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function X(){}return qt.Children={map:Y,forEach:function(P,te,se){Y(P,function(){te.apply(this,arguments)},se)},count:function(P){var te=0;return Y(P,function(){te++}),te},toArray:function(P){return Y(P,function(te){return te})||[]},only:function(P){if(!H(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},qt.Component=E,qt.Fragment=t,qt.Profiler=a,qt.PureComponent=I,qt.StrictMode=i,qt.Suspense=d,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,qt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return O.H.useMemoCache(P)}},qt.cache=function(P){return function(){return P.apply(null,arguments)}},qt.cloneElement=function(P,te,se){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var M=N({},P.props),fe=P.key,we=void 0;if(te!=null)for(ce in te.ref!==void 0&&(we=void 0),te.key!==void 0&&(fe=""+te.key),te)!$.call(te,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&te.ref===void 0||(M[ce]=te[ce]);var ce=arguments.length-2;if(ce===1)M.children=se;else if(1<ce){for(var Le=Array(ce),Ne=0;Ne<ce;Ne++)Le[Ne]=arguments[Ne+2];M.children=Le}return B(P.type,fe,void 0,void 0,we,M)},qt.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:o,_context:P},P},qt.createElement=function(P,te,se){var M,fe={},we=null;if(te!=null)for(M in te.key!==void 0&&(we=""+te.key),te)$.call(te,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(fe[M]=te[M]);var ce=arguments.length-2;if(ce===1)fe.children=se;else if(1<ce){for(var Le=Array(ce),Ne=0;Ne<ce;Ne++)Le[Ne]=arguments[Ne+2];fe.children=Le}if(P&&P.defaultProps)for(M in ce=P.defaultProps,ce)fe[M]===void 0&&(fe[M]=ce[M]);return B(P,we,void 0,void 0,null,fe)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(P){return{$$typeof:f,render:P}},qt.isValidElement=H,qt.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:z}},qt.memo=function(P,te){return{$$typeof:u,type:P,compare:te===void 0?null:te}},qt.startTransition=function(P){var te=O.T,se={};O.T=se;try{var M=P(),fe=O.S;fe!==null&&fe(se,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(X,re)}catch(we){re(we)}finally{O.T=te}},qt.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},qt.use=function(P){return O.H.use(P)},qt.useActionState=function(P,te,se){return O.H.useActionState(P,te,se)},qt.useCallback=function(P,te){return O.H.useCallback(P,te)},qt.useContext=function(P){return O.H.useContext(P)},qt.useDebugValue=function(){},qt.useDeferredValue=function(P,te){return O.H.useDeferredValue(P,te)},qt.useEffect=function(P,te,se){var M=O.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return M.useEffect(P,te)},qt.useId=function(){return O.H.useId()},qt.useImperativeHandle=function(P,te,se){return O.H.useImperativeHandle(P,te,se)},qt.useInsertionEffect=function(P,te){return O.H.useInsertionEffect(P,te)},qt.useLayoutEffect=function(P,te){return O.H.useLayoutEffect(P,te)},qt.useMemo=function(P,te){return O.H.useMemo(P,te)},qt.useOptimistic=function(P,te){return O.H.useOptimistic(P,te)},qt.useReducer=function(P,te,se){return O.H.useReducer(P,te,se)},qt.useRef=function(P){return O.H.useRef(P)},qt.useState=function(P){return O.H.useState(P)},qt.useSyncExternalStore=function(P,te,se){return O.H.useSyncExternalStore(P,te,se)},qt.useTransition=function(){return O.H.useTransition()},qt.version="19.1.0",qt}var uS;function Z1(){return uS||(uS=1,Bv.exports=QA()),Bv.exports}var w=Z1();const Rn=Pd(w),dS=GA({__proto__:null,default:Rn},[w]);var Uv={exports:{}},ym={},qv={exports:{}},Vv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS;function JA(){return fS||(fS=1,function(e){function n(Y,z){var re=Y.length;Y.push(z);e:for(;0<re;){var X=re-1>>>1,P=Y[X];if(0<a(P,z))Y[X]=z,Y[re]=P,re=X;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var z=Y[0],re=Y.pop();if(re!==z){Y[0]=re;e:for(var X=0,P=Y.length,te=P>>>1;X<te;){var se=2*(X+1)-1,M=Y[se],fe=se+1,we=Y[fe];if(0>a(M,re))fe<P&&0>a(we,M)?(Y[X]=we,Y[fe]=re,X=fe):(Y[X]=M,Y[se]=re,X=se);else if(fe<P&&0>a(we,re))Y[X]=we,Y[fe]=re,X=fe;else break e}}return z}function a(Y,z){var re=Y.sortIndex-z.sortIndex;return re!==0?re:Y.id-z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,f=l.now();e.unstable_now=function(){return l.now()-f}}var d=[],u=[],p=1,g=null,b=3,v=!1,N=!1,k=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function U(Y){for(var z=t(u);z!==null;){if(z.callback===null)i(u);else if(z.startTime<=Y)i(u),z.sortIndex=z.expirationTime,n(d,z);else break;z=t(u)}}function O(Y){if(k=!1,U(Y),!N)if(t(d)!==null)N=!0,$||($=!0,Q());else{var z=t(u);z!==null&&oe(O,z.startTime-Y)}}var $=!1,B=-1,q=5,H=-1;function F(){return E?!0:!(e.unstable_now()-H<q)}function L(){if(E=!1,$){var Y=e.unstable_now();H=Y;var z=!0;try{e:{N=!1,k&&(k=!1,I(B),B=-1),v=!0;var re=b;try{t:{for(U(Y),g=t(d);g!==null&&!(g.expirationTime>Y&&F());){var X=g.callback;if(typeof X=="function"){g.callback=null,b=g.priorityLevel;var P=X(g.expirationTime<=Y);if(Y=e.unstable_now(),typeof P=="function"){g.callback=P,U(Y),z=!0;break t}g===t(d)&&i(d),U(Y)}else i(d);g=t(d)}if(g!==null)z=!0;else{var te=t(u);te!==null&&oe(O,te.startTime-Y),z=!1}}break e}finally{g=null,b=re,v=!1}z=void 0}}finally{z?Q():$=!1}}}var Q;if(typeof D=="function")Q=function(){D(L)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ie=ne.port2;ne.port1.onmessage=L,Q=function(){ie.postMessage(null)}}else Q=function(){T(L,0)};function oe(Y,z){B=T(function(){Y(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var z=3;break;default:z=b}var re=b;b=z;try{return Y()}finally{b=re}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(Y,z){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var re=b;b=Y;try{return z()}finally{b=re}},e.unstable_scheduleCallback=function(Y,z,re){var X=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?X+re:X):re=X,Y){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=re+P,Y={id:p++,callback:z,priorityLevel:Y,startTime:re,expirationTime:P,sortIndex:-1},re>X?(Y.sortIndex=re,n(u,Y),t(d)===null&&Y===t(u)&&(k?(I(B),B=-1):k=!0,oe(O,re-X))):(Y.sortIndex=P,n(d,Y),N||v||(N=!0,$||($=!0,Q()))),Y},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(Y){var z=b;return function(){var re=b;b=z;try{return Y.apply(this,arguments)}finally{b=re}}}}(Vv)),Vv}var hS;function KA(){return hS||(hS=1,qv.exports=JA()),qv.exports}var Hv={exports:{}},xr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS;function XA(){if(pS)return xr;pS=1;var e=Z1();function n(d){var u="https://react.dev/errors/"+d;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(n(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,u,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:d,containerInfo:u,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,u){if(d==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return xr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,xr.createPortal=function(d,u){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(n(299));return o(d,u,null,p)},xr.flushSync=function(d){var u=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=u,i.p=p,i.d.f()}},xr.preconnect=function(d,u){typeof d=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(d,u))},xr.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},xr.preinit=function(d,u){if(typeof d=="string"&&u&&typeof u.as=="string"){var p=u.as,g=f(p,u.crossOrigin),b=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;p==="style"?i.d.S(d,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:v}):p==="script"&&i.d.X(d,{crossOrigin:g,integrity:b,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},xr.preinitModule=function(d,u){if(typeof d=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var p=f(u.as,u.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(d)},xr.preload=function(d,u){if(typeof d=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var p=u.as,g=f(p,u.crossOrigin);i.d.L(d,p,{crossOrigin:g,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},xr.preloadModule=function(d,u){if(typeof d=="string")if(u){var p=f(u.as,u.crossOrigin);i.d.m(d,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(d)},xr.requestFormReset=function(d){i.d.r(d)},xr.unstable_batchedUpdates=function(d,u){return d(u)},xr.useFormState=function(d,u,p){return l.H.useFormState(d,u,p)},xr.useFormStatus=function(){return l.H.useHostTransitionStatus()},xr.version="19.1.0",xr}var mS;function P_(){if(mS)return Hv.exports;mS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Hv.exports=XA(),Hv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS;function ZA(){if(gS)return ym;gS=1;var e=KA(),n=Z1(),t=P_();function i(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var c=s,h=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(h=c.return),s=c.return;while(s)}return c.tag===3?h:null}function l(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function d(s){var c=s.alternate;if(!c){if(c=o(s),c===null)throw Error(i(188));return c!==s?null:s}for(var h=s,x=c;;){var S=h.return;if(S===null)break;var A=S.alternate;if(A===null){if(x=S.return,x!==null){h=x;continue}break}if(S.child===A.child){for(A=S.child;A;){if(A===h)return f(S),s;if(A===x)return f(S),c;A=A.sibling}throw Error(i(188))}if(h.return!==x.return)h=S,x=A;else{for(var V=!1,ee=S.child;ee;){if(ee===h){V=!0,h=S,x=A;break}if(ee===x){V=!0,x=S,h=A;break}ee=ee.sibling}if(!V){for(ee=A.child;ee;){if(ee===h){V=!0,h=A,x=S;break}if(ee===x){V=!0,x=A,h=S;break}ee=ee.sibling}if(!V)throw Error(i(189))}}if(h.alternate!==x)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?s:c}function u(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=u(s),c!==null)return c;s=s.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),D=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Symbol.for("react.client.reference");function ie(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ne?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case E:return"Profiler";case k:return"StrictMode";case O:return"Suspense";case $:return"SuspenseList";case H:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case v:return"Portal";case D:return(s.displayName||"Context")+".Provider";case I:return(s._context.displayName||"Context")+".Consumer";case U:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case B:return c=s.displayName||null,c!==null?c:ie(s.type)||"Memo";case q:c=s._payload,s=s._init;try{return ie(s(c))}catch{}}return null}var oe=Array.isArray,Y=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},X=[],P=-1;function te(s){return{current:s}}function se(s){0>P||(s.current=X[P],X[P]=null,P--)}function M(s,c){P++,X[P]=s.current,s.current=c}var fe=te(null),we=te(null),ce=te(null),Le=te(null);function Ne(s,c){switch(M(ce,c),M(we,s),M(fe,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?Yn(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=Yn(c),s=ei(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}se(fe),M(fe,s)}function nt(){se(fe),se(we),se(ce)}function ut(s){s.memoizedState!==null&&M(Le,s);var c=fe.current,h=ei(c,s.type);c!==h&&(M(we,s),M(fe,h))}function je(s){we.current===s&&(se(fe),se(we)),Le.current===s&&(se(Le),Ic._currentValue=re)}var ye=Object.prototype.hasOwnProperty,Ae=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,Ve=e.unstable_shouldYield,it=e.unstable_requestPaint,Ke=e.unstable_now,rt=e.unstable_getCurrentPriorityLevel,Ft=e.unstable_ImmediatePriority,_t=e.unstable_UserBlockingPriority,ve=e.unstable_NormalPriority,qe=e.unstable_LowPriority,We=e.unstable_IdlePriority,ze=e.log,J=e.unstable_setDisableYieldValue,G=null,K=null;function Se(s){if(typeof ze=="function"&&J(s),K&&typeof K.setStrictMode=="function")try{K.setStrictMode(G,s)}catch{}}var Ee=Math.clz32?Math.clz32:gt,Be=Math.log,at=Math.LN2;function gt(s){return s>>>=0,s===0?32:31-(Be(s)/at|0)|0}var pt=256,Ue=4194304;function Ze(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Fe(s,c,h){var x=s.pendingLanes;if(x===0)return 0;var S=0,A=s.suspendedLanes,V=s.pingedLanes;s=s.warmLanes;var ee=x&134217727;return ee!==0?(x=ee&~A,x!==0?S=Ze(x):(V&=ee,V!==0?S=Ze(V):h||(h=ee&~s,h!==0&&(S=Ze(h))))):(ee=x&~A,ee!==0?S=Ze(ee):V!==0?S=Ze(V):h||(h=x&~s,h!==0&&(S=Ze(h)))),S===0?0:c!==0&&c!==S&&(c&A)===0&&(A=S&-S,h=c&-c,A>=h||A===32&&(h&4194048)!==0)?c:S}function ct(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function Xe(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var s=pt;return pt<<=1,(pt&4194048)===0&&(pt=256),s}function Xn(){var s=Ue;return Ue<<=1,(Ue&62914560)===0&&(Ue=4194304),s}function $n(s){for(var c=[],h=0;31>h;h++)c.push(s);return c}function _n(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function yn(s,c,h,x,S,A){var V=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var ee=s.entanglements,he=s.expirationTimes,Pe=s.hiddenUpdates;for(h=V&~h;0<h;){var He=31-Ee(h),Qe=1<<He;ee[He]=0,he[He]=-1;var Oe=Pe[He];if(Oe!==null)for(Pe[He]=null,He=0;He<Oe.length;He++){var Ie=Oe[He];Ie!==null&&(Ie.lane&=-536870913)}h&=~Qe}x!==0&&un(s,x,0),A!==0&&S===0&&s.tag!==0&&(s.suspendedLanes|=A&~(V&~c))}function un(s,c,h){s.pendingLanes|=c,s.suspendedLanes&=~c;var x=31-Ee(c);s.entangledLanes|=c,s.entanglements[x]=s.entanglements[x]|1073741824|h&4194090}function Ci(s,c){var h=s.entangledLanes|=c;for(s=s.entanglements;h;){var x=31-Ee(h),S=1<<x;S&c|s[x]&c&&(s[x]|=c),h&=~S}}function Vi(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ir(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ma(){var s=z.p;return s!==0?s:(s=window.event,s===void 0?32:ex(s.type))}function _r(s,c){var h=z.p;try{return z.p=s,c()}finally{z.p=h}}var ti=Math.random().toString(36).slice(2),Zn="__reactFiber$"+ti,zn="__reactProps$"+ti,$a="__reactContainer$"+ti,us="__reactEvents$"+ti,zh="__reactListeners$"+ti,Bh="__reactHandles$"+ti,Md="__reactResources$"+ti,ds="__reactMarker$"+ti;function Jc(s){delete s[Zn],delete s[zn],delete s[us],delete s[zh],delete s[Bh]}function Vs(s){var c=s[Zn];if(c)return c;for(var h=s.parentNode;h;){if(c=h[$a]||h[Zn]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(s=Uy(s);s!==null;){if(h=s[Zn])return h;s=Uy(s)}return c}s=h,h=s.parentNode}return null}function Hs(s){if(s=s[Zn]||s[$a]){var c=s.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return s}return null}function za(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(i(33))}function Gs(s){var c=s[Md];return c||(c=s[Md]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function ui(s){s[ds]=!0}var Rd=new Set,Il={};function fs(s,c){Ba(s,c),Ba(s+"Capture",c)}function Ba(s,c){for(Il[s]=c,s=0;s<c.length;s++)Rd.add(c[s])}var kr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ys={},Ws={};function Od(s){return ye.call(Ws,s)?!0:ye.call(Ys,s)?!1:kr.test(s)?Ws[s]=!0:(Ys[s]=!0,!1)}function Uo(s,c,h){if(Od(c))if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var x=c.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+h)}}function qo(s,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+h)}}function rr(s,c,h,x){if(x===null)s.removeAttribute(h);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(c,h,""+x)}}var Vo,Ml;function ga(s){if(Vo===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);Vo=c&&c[1]||"",Ml=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vo+s+Ml}var Kc=!1;function Xc(s,c){if(!s||Kc)return"";Kc=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Ie){var Oe=Ie}Reflect.construct(s,[],Qe)}else{try{Qe.call()}catch(Ie){Oe=Ie}s.call(Qe.prototype)}}else{try{throw Error()}catch(Ie){Oe=Ie}(Qe=s())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Ie){if(Ie&&Oe&&typeof Ie.stack=="string")return[Ie.stack,Oe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=x.DetermineComponentFrameRoot(),V=A[0],ee=A[1];if(V&&ee){var he=V.split(`
`),Pe=ee.split(`
`);for(S=x=0;x<he.length&&!he[x].includes("DetermineComponentFrameRoot");)x++;for(;S<Pe.length&&!Pe[S].includes("DetermineComponentFrameRoot");)S++;if(x===he.length||S===Pe.length)for(x=he.length-1,S=Pe.length-1;1<=x&&0<=S&&he[x]!==Pe[S];)S--;for(;1<=x&&0<=S;x--,S--)if(he[x]!==Pe[S]){if(x!==1||S!==1)do if(x--,S--,0>S||he[x]!==Pe[S]){var He=`
`+he[x].replace(" at new "," at ");return s.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",s.displayName)),He}while(1<=x&&0<=S);break}}}finally{Kc=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?ga(h):""}function Ld(s){switch(s.tag){case 26:case 27:case 5:return ga(s.type);case 16:return ga("Lazy");case 13:return ga("Suspense");case 19:return ga("SuspenseList");case 0:case 15:return Xc(s.type,!1);case 11:return Xc(s.type.render,!1);case 1:return Xc(s.type,!0);case 31:return ga("Activity");default:return""}}function Ho(s){try{var c="";do c+=Ld(s),s=s.return;while(s);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Li(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Rl(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ol(s){var c=Rl(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,c),x=""+s[c];if(!s.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var S=h.get,A=h.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return S.call(this)},set:function(V){x=""+V,A.call(this,V)}}),Object.defineProperty(s,c,{enumerable:h.enumerable}),{getValue:function(){return x},setValue:function(V){x=""+V},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function Go(s){s._valueTracker||(s._valueTracker=Ol(s))}function Ll(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var h=c.getValue(),x="";return s&&(x=Rl(s)?s.checked?"true":"false":s.value),s=x,s!==h?(c.setValue(s),!0):!1}function Ua(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Zc=/[\n"\\]/g;function Hi(s){return s.replace(Zc,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Yo(s,c,h,x,S,A,V,ee){s.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?s.type=V:s.removeAttribute("type"),c!=null?V==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+Li(c)):s.value!==""+Li(c)&&(s.value=""+Li(c)):V!=="submit"&&V!=="reset"||s.removeAttribute("value"),c!=null?qa(s,V,Li(c)):h!=null?qa(s,V,Li(h)):x!=null&&s.removeAttribute("value"),S==null&&A!=null&&(s.defaultChecked=!!A),S!=null&&(s.checked=S&&typeof S!="function"&&typeof S!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?s.name=""+Li(ee):s.removeAttribute("name")}function Qs(s,c,h,x,S,A,V,ee){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.type=A),c!=null||h!=null){if(!(A!=="submit"&&A!=="reset"||c!=null))return;h=h!=null?""+Li(h):"",c=c!=null?""+Li(c):h,ee||c===s.value||(s.value=c),s.defaultValue=c}x=x??S,x=typeof x!="function"&&typeof x!="symbol"&&!!x,s.checked=ee?s.checked:!!x,s.defaultChecked=!!x,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(s.name=V)}function qa(s,c,h){c==="number"&&Ua(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function ya(s,c,h,x){if(s=s.options,c){c={};for(var S=0;S<h.length;S++)c["$"+h[S]]=!0;for(h=0;h<s.length;h++)S=c.hasOwnProperty("$"+s[h].value),s[h].selected!==S&&(s[h].selected=S),S&&x&&(s[h].defaultSelected=!0)}else{for(h=""+Li(h),c=null,S=0;S<s.length;S++){if(s[S].value===h){s[S].selected=!0,x&&(s[S].defaultSelected=!0);return}c!==null||s[S].disabled||(c=s[S])}c!==null&&(c.selected=!0)}}function Fl(s,c,h){if(c!=null&&(c=""+Li(c),c!==s.value&&(s.value=c),h==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=h!=null?""+Li(h):""}function hs(s,c,h,x){if(c==null){if(x!=null){if(h!=null)throw Error(i(92));if(oe(x)){if(1<x.length)throw Error(i(93));x=x[0]}h=x}h==null&&(h=""),c=h}h=Li(c),s.defaultValue=h,x=s.textContent,x===h&&x!==""&&x!==null&&(s.value=x)}function Vr(s,c){if(c){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=c;return}}s.textContent=c}var Va=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wo(s,c,h){var x=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?x?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":x?s.setProperty(c,h):typeof h!="number"||h===0||Va.has(c)?c==="float"?s.cssFloat=h:s[c]=(""+h).trim():s[c]=h+"px"}function Qo(s,c,h){if(c!=null&&typeof c!="object")throw Error(i(62));if(s=s.style,h!=null){for(var x in h)!h.hasOwnProperty(x)||c!=null&&c.hasOwnProperty(x)||(x.indexOf("--")===0?s.setProperty(x,""):x==="float"?s.cssFloat="":s[x]="");for(var S in c)x=c[S],c.hasOwnProperty(S)&&h[S]!==x&&Wo(s,S,x)}else for(var A in c)c.hasOwnProperty(A)&&Wo(s,A,c[A])}function Jo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $l=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ps(s){return zl.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Er=null;function Ko(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ms=null,ar=null;function gs(s){var c=Hs(s);if(c&&(s=c.stateNode)){var h=s[zn]||null;e:switch(s=c.stateNode,c.type){case"input":if(Yo(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Hi(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var x=h[c];if(x!==s&&x.form===s.form){var S=x[zn]||null;if(!S)throw Error(i(90));Yo(x,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(c=0;c<h.length;c++)x=h[c],x.form===s.form&&Ll(x)}break e;case"textarea":Fl(s,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&ya(s,!!h.multiple,c,!1)}}}var eu=!1;function Xo(s,c,h){if(eu)return s(c,h);eu=!0;try{var x=s(c);return x}finally{if(eu=!1,(ms!==null||ar!==null)&&(Df(),ms&&(c=ms,s=ar,ar=ms=null,gs(c),s)))for(c=0;c<s.length;c++)gs(s[c])}}function Js(s,c){var h=s.stateNode;if(h===null)return null;var x=h[zn]||null;if(x===null)return null;h=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(s=s.type,x=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!x;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(i(231,c,typeof h));return h}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ys=!1;if(Tr)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){ys=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{ys=!1}var Ar=null,tu=null,Bl=null;function Ul(){if(Bl)return Bl;var s,c=tu,h=c.length,x,S="value"in Ar?Ar.value:Ar.textContent,A=S.length;for(s=0;s<h&&c[s]===S[s];s++);var V=h-s;for(x=1;x<=V&&c[h-x]===S[A-x];x++);return Bl=S.slice(s,1<x?1-x:void 0)}function hn(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function dn(){return!0}function pn(){return!1}function ji(s){function c(h,x,S,A,V){this._reactName=h,this._targetInst=S,this.type=x,this.nativeEvent=A,this.target=V,this.currentTarget=null;for(var ee in s)s.hasOwnProperty(ee)&&(h=s[ee],this[ee]=h?h(A):A[ee]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?dn:pn,this.isPropagationStopped=pn,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=dn)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=dn)},persist:function(){},isPersistent:dn}),c}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=ji(Hr),xa=p({},Hr,{view:0,detail:0}),Zo=ji(xa),ql,Vl,An,xs=p({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==An&&(An&&s.type==="mousemove"?(ql=s.screenX-An.screenX,Vl=s.screenY-An.screenY):Vl=ql=0,An=s),ql)},movementY:function(s){return"movementY"in s?s.movementY:Vl}}),Gr=ji(xs),el=p({},xs,{dataTransfer:0}),bs=ji(el),Gi=p({},xa,{relatedTarget:0}),Zs=ji(Gi),Ha=p({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Fd=ji(Ha),Hl=p({},Hr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),eo=ji(Hl),to=p({},Hr,{data:0}),gi=ji(to),Uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $d(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=qh[s])?!!c[s]:!1}function Yr(){return $d}var Gl=p({},xa,{key:function(s){if(s.key){var c=Uh[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=hn(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Fi[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yr,charCode:function(s){return s.type==="keypress"?hn(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?hn(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),nu=ji(Gl),On=p({},xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ba=ji(On),iu=p({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yr}),Vh=ji(iu),ru=p({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hh=ji(ru),Yl=p({},xs,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Gh=ji(Yl),va=p({},Hr,{newState:0,oldState:0}),Pr=ji(va),$i=[9,13,27,32],Wl=Tr&&"CompositionEvent"in window,vs=null;Tr&&"documentMode"in document&&(vs=document.documentMode);var au=Tr&&"TextEvent"in window&&!vs,tl=Tr&&(!Wl||vs&&8<vs&&11>=vs),no=" ",Ql=!1;function su(s,c){switch(s){case"keyup":return $i.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var wa=!1;function Yh(s,c){switch(s){case"compositionend":return Jl(c);case"keypress":return c.which!==32?null:(Ql=!0,no);case"textInput":return s=c.data,s===no&&Ql?null:s;default:return null}}function zd(s,c){if(wa)return s==="compositionend"||!Wl&&su(s,c)?(s=Ul(),Bl=tu=Ar=null,wa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return tl&&c.locale!=="ko"?null:c.data;default:return null}}var Yi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kl(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!Yi[s.type]:c==="textarea"}function io(s,c,h,x){ms?ar?ar.push(x):ar=[x]:ms=x,c=$f(c,"onChange"),0<c.length&&(h=new Xs("onChange","change",null,h,x),s.push({event:h,listeners:c}))}var ro=null,Dr=null;function Wh(s){My(s,0)}function ao(s){var c=za(s);if(Ll(c))return s}function Bd(s,c){if(s==="change")return c}var Ud=!1;if(Tr){var ou;if(Tr){var _i="oninput"in document;if(!_i){var qd=document.createElement("div");qd.setAttribute("oninput","return;"),_i=typeof qd.oninput=="function"}ou=_i}else ou=!1;Ud=ou&&(!document.documentMode||9<document.documentMode)}function lu(){ro&&(ro.detachEvent("onpropertychange",Xl),Dr=ro=null)}function Xl(s){if(s.propertyName==="value"&&ao(Dr)){var c=[];io(c,Dr,s,Ko(s)),Xo(Wh,c)}}function Vd(s,c,h){s==="focusin"?(lu(),ro=c,Dr=h,ro.attachEvent("onpropertychange",Xl)):s==="focusout"&&lu()}function Ga(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ao(Dr)}function Zl(s,c){if(s==="click")return ao(c)}function Qh(s,c){if(s==="input"||s==="change")return ao(c)}function Jh(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var Wi=typeof Object.is=="function"?Object.is:Jh;function Wr(s,c){if(Wi(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var h=Object.keys(s),x=Object.keys(c);if(h.length!==x.length)return!1;for(x=0;x<h.length;x++){var S=h[x];if(!ye.call(c,S)||!Wi(s[S],c[S]))return!1}return!0}function sr(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ec(s,c){var h=sr(s);s=0;for(var x;h;){if(h.nodeType===3){if(x=s+h.textContent.length,s<=c&&x>=c)return{node:h,offset:c-s};s=x}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=sr(h)}}function cu(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?cu(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function le(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=Ua(s.document);c instanceof s.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)s=c.contentWindow;else break;c=Ua(s.document)}return c}function xe(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var me=Tr&&"documentMode"in document&&11>=document.documentMode,Me=null,tt=null,ue=null,Re=!1;function Ce(s,c,h){var x=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Re||Me==null||Me!==Ua(x)||(x=Me,"selectionStart"in x&&xe(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),ue&&Wr(ue,x)||(ue=x,x=$f(tt,"onSelect"),0<x.length&&(c=new Xs("onSelect","select",null,c,h),s.push({event:c,listeners:x}),c.target=Me)))}function lt(s,c){var h={};return h[s.toLowerCase()]=c.toLowerCase(),h["Webkit"+s]="webkit"+c,h["Moz"+s]="moz"+c,h}var yt={animationend:lt("Animation","AnimationEnd"),animationiteration:lt("Animation","AnimationIteration"),animationstart:lt("Animation","AnimationStart"),transitionrun:lt("Transition","TransitionRun"),transitionstart:lt("Transition","TransitionStart"),transitioncancel:lt("Transition","TransitionCancel"),transitionend:lt("Transition","TransitionEnd")},en={},di={};Tr&&(di=document.createElement("div").style,"AnimationEvent"in window||(delete yt.animationend.animation,delete yt.animationiteration.animation,delete yt.animationstart.animation),"TransitionEvent"in window||delete yt.transitionend.transition);function on(s){if(en[s])return en[s];if(!yt[s])return s;var c=yt[s],h;for(h in c)if(c.hasOwnProperty(h)&&h in di)return en[s]=c[h];return s}var Hd=on("animationend"),hg=on("animationiteration"),Ir=on("animationstart"),Gd=on("transitionrun"),Qb=on("transitionstart"),tc=on("transitioncancel"),uu=on("transitionend"),du=new Map,mn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mn.push("scrollEnd");function Sa(s,c){du.set(s,c),fs(c,[s])}var Kh=new WeakMap;function Qi(s,c){if(typeof s=="object"&&s!==null){var h=Kh.get(s);return h!==void 0?h:(c={value:s,source:c,stack:Ho(c)},Kh.set(s,c),c)}return{value:s,source:c,stack:Ho(c)}}var Qr=[],nc=0,Xh=0;function nl(){for(var s=nc,c=Xh=nc=0;c<s;){var h=Qr[c];Qr[c++]=null;var x=Qr[c];Qr[c++]=null;var S=Qr[c];Qr[c++]=null;var A=Qr[c];if(Qr[c++]=null,x!==null&&S!==null){var V=x.pending;V===null?S.next=S:(S.next=V.next,V.next=S),x.pending=S}A!==0&&fu(h,S,A)}}function Na(s,c,h,x){Qr[nc++]=s,Qr[nc++]=c,Qr[nc++]=h,Qr[nc++]=x,Xh|=x,s.lanes|=x,s=s.alternate,s!==null&&(s.lanes|=x)}function ic(s,c,h,x){return Na(s,c,h,x),hu(s)}function il(s,c){return Na(s,null,null,c),hu(s)}function fu(s,c,h){s.lanes|=h;var x=s.alternate;x!==null&&(x.lanes|=h);for(var S=!1,A=s.return;A!==null;)A.childLanes|=h,x=A.alternate,x!==null&&(x.childLanes|=h),A.tag===22&&(s=A.stateNode,s===null||s._visibility&1||(S=!0)),s=A,A=A.return;return s.tag===3?(A=s.stateNode,S&&c!==null&&(S=31-Ee(h),s=A.hiddenUpdates,x=s[S],x===null?s[S]=[c]:x.push(c),c.lane=h|536870912),A):null}function hu(s){if(50<jc)throw jc=0,Gp=null,Error(i(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var rl={};function Yd(s,c,h,x){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(s,c,h,x){return new Yd(s,c,h,x)}function al(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ji(s,c){var h=s.alternate;return h===null?(h=or(s.tag,c,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=c,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,c=s.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function pu(s,c){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,c=h.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function Wd(s,c,h,x,S,A){var V=0;if(x=s,typeof s=="function")al(s)&&(V=1);else if(typeof s=="string")V=_v(s,h,fe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case H:return s=or(31,h,c,S),s.elementType=H,s.lanes=A,s;case N:return sl(h.children,S,A,c);case k:V=8,S|=24;break;case E:return s=or(12,h,c,S|2),s.elementType=E,s.lanes=A,s;case O:return s=or(13,h,c,S),s.elementType=O,s.lanes=A,s;case $:return s=or(19,h,c,S),s.elementType=$,s.lanes=A,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case T:case D:V=10;break e;case I:V=9;break e;case U:V=11;break e;case B:V=14;break e;case q:V=16,x=null;break e}V=29,h=Error(i(130,s===null?"null":typeof s,"")),x=null}return c=or(V,h,c,S),c.elementType=s,c.type=x,c.lanes=A,c}function sl(s,c,h,x){return s=or(7,s,x,c),s.lanes=h,s}function Zh(s,c,h){return s=or(6,s,null,c),s.lanes=h,s}function rc(s,c,h){return c=or(4,s.children!==null?s.children:[],s.key,c),c.lanes=h,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var ws=[],so=0,Qd=null,mu=0,Jr=[],Kr=0,Bn=null,Vn=1,Ss="";function ol(s,c){ws[so++]=mu,ws[so++]=Qd,Qd=s,mu=c}function ep(s,c,h){Jr[Kr++]=Vn,Jr[Kr++]=Ss,Jr[Kr++]=Bn,Bn=s;var x=Vn;s=Ss;var S=32-Ee(x)-1;x&=~(1<<S),h+=1;var A=32-Ee(c)+S;if(30<A){var V=S-S%5;A=(x&(1<<V)-1).toString(32),x>>=V,S-=V,Vn=1<<32-Ee(c)+S|h<<S|x,Ss=A+s}else Vn=1<<A|h<<S|x,Ss=s}function tp(s){s.return!==null&&(ol(s,1),ep(s,1,0))}function gu(s){for(;s===Qd;)Qd=ws[--so],ws[so]=null,mu=ws[--so],ws[so]=null;for(;s===Bn;)Bn=Jr[--Kr],Jr[Kr]=null,Ss=Jr[--Kr],Jr[Kr]=null,Vn=Jr[--Kr],Jr[Kr]=null}var yi=null,Hn=null,Xt=!1,Ca=null,lr=!1,ac=Error(i(519));function Xr(s){var c=Error(i(418,""));throw oo(Qi(c,s)),ac}function pg(s){var c=s.stateNode,h=s.type,x=s.memoizedProps;switch(c[Zn]=s,c[zn]=x,h){case"dialog":Kt("cancel",c),Kt("close",c);break;case"iframe":case"object":case"embed":Kt("load",c);break;case"video":case"audio":for(h=0;h<rd.length;h++)Kt(rd[h],c);break;case"source":Kt("error",c);break;case"img":case"image":case"link":Kt("error",c),Kt("load",c);break;case"details":Kt("toggle",c);break;case"input":Kt("invalid",c),Qs(c,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),Go(c);break;case"select":Kt("invalid",c);break;case"textarea":Kt("invalid",c),hs(c,x.value,x.defaultValue,x.children),Go(c)}h=x.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||x.suppressHydrationWarning===!0||Ly(c.textContent,h)?(x.popover!=null&&(Kt("beforetoggle",c),Kt("toggle",c)),x.onScroll!=null&&Kt("scroll",c),x.onScrollEnd!=null&&Kt("scrollend",c),x.onClick!=null&&(c.onclick=zf),c=!0):c=!1,c||Xr(s)}function mg(s){for(yi=s.return;yi;)switch(yi.tag){case 5:case 13:lr=!1;return;case 27:case 3:lr=!0;return;default:yi=yi.return}}function yu(s){if(s!==yi)return!1;if(!Xt)return mg(s),Xt=!0,!1;var c=s.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||Uf(s.type,s.memoizedProps)),h=!h),h&&Hn&&Xr(s),mg(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,c=0;s;){if(s.nodeType===8)if(h=s.data,h==="/$"){if(c===0){Hn=Aa(s.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;s=s.nextSibling}Hn=null}}else c===27?(c=Hn,ra(s.type)?(s=sm,sm=null,Hn=s):Hn=c):Hn=yi?Aa(s.stateNode.nextSibling):null;return!0}function xu(){Hn=yi=null,Xt=!1}function gg(){var s=Ca;return s!==null&&(gr===null?gr=s:gr.push.apply(gr,s),Ca=null),s}function oo(s){Ca===null?Ca=[s]:Ca.push(s)}var ll=te(null),lo=null,Z=null;function Mr(s,c,h){M(ll,c._currentValue),c._currentValue=h}function Zr(s){s._currentValue=ll.current,se(ll)}function cr(s,c,h){for(;s!==null;){var x=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),s===h)break;s=s.return}}function Gt(s,c,h,x){var S=s.child;for(S!==null&&(S.return=s);S!==null;){var A=S.dependencies;if(A!==null){var V=S.child;A=A.firstContext;e:for(;A!==null;){var ee=A;A=S;for(var he=0;he<c.length;he++)if(ee.context===c[he]){A.lanes|=h,ee=A.alternate,ee!==null&&(ee.lanes|=h),cr(A.return,h,s),x||(V=null);break e}A=ee.next}}else if(S.tag===18){if(V=S.return,V===null)throw Error(i(341));V.lanes|=h,A=V.alternate,A!==null&&(A.lanes|=h),cr(V,h,s),V=null}else V=S.child;if(V!==null)V.return=S;else for(V=S;V!==null;){if(V===s){V=null;break}if(S=V.sibling,S!==null){S.return=V.return,V=S;break}V=V.return}S=V}}function bu(s,c,h,x){s=null;for(var S=c,A=!1;S!==null;){if(!A){if((S.flags&524288)!==0)A=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var V=S.alternate;if(V===null)throw Error(i(387));if(V=V.memoizedProps,V!==null){var ee=S.type;Wi(S.pendingProps.value,V.value)||(s!==null?s.push(ee):s=[ee])}}else if(S===Le.current){if(V=S.alternate,V===null)throw Error(i(387));V.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(s!==null?s.push(Ic):s=[Ic])}S=S.return}s!==null&&Gt(c,s,h,x),c.flags|=262144}function Jd(s){for(s=s.firstContext;s!==null;){if(!Wi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function cl(s){lo=s,Z=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ni(s){return yg(lo,s)}function Kd(s,c){return lo===null&&cl(s),yg(s,c)}function yg(s,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},Z===null){if(s===null)throw Error(i(308));Z=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else Z=Z.next=c;return h}var Jb=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(h,x){s.push(x)}};this.abort=function(){c.aborted=!0,s.forEach(function(h){return h()})}},Kb=e.unstable_scheduleCallback,Xb=e.unstable_NormalPriority,Pn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function np(){return{controller:new Jb,data:new Map,refCount:0}}function vu(s){s.refCount--,s.refCount===0&&Kb(Xb,function(){s.controller.abort()})}var wu=null,ip=0,sc=0,ur=null;function Zb(s,c){if(wu===null){var h=wu=[];ip=0,sc=Ff(),ur={status:"pending",value:void 0,then:function(x){h.push(x)}}}return ip++,c.then(xg,xg),c}function xg(){if(--ip===0&&wu!==null){ur!==null&&(ur.status="fulfilled");var s=wu;wu=null,sc=0,ur=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function ev(s,c){var h=[],x={status:"pending",value:null,reason:null,then:function(S){h.push(S)}};return s.then(function(){x.status="fulfilled",x.value=c;for(var S=0;S<h.length;S++)(0,h[S])(c)},function(S){for(x.status="rejected",x.reason=S,S=0;S<h.length;S++)(0,h[S])(void 0)}),x}var bg=Y.S;Y.S=function(s,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Zb(s,c),bg!==null&&bg(s,c)};var ul=te(null);function Ns(){var s=ul.current;return s!==null?s:Ln.pooledCache}function Xd(s,c){c===null?M(ul,ul.current):M(ul,c.pool)}function vg(){var s=Ns();return s===null?null:{parent:Pn._currentValue,pool:s}}var Ki=Error(i(460)),wg=Error(i(474)),Zd=Error(i(542)),rp={then:function(){}};function Sg(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ef(){}function ap(s,c,h){switch(h=s[h],h===void 0?s.push(c):h!==c&&(c.then(ef,ef),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,Cg(s),s;default:if(typeof c.status=="string")c.then(ef,ef);else{if(s=Ln,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=c,s.status="pending",s.then(function(x){if(c.status==="pending"){var S=c;S.status="fulfilled",S.value=x}},function(x){if(c.status==="pending"){var S=c;S.status="rejected",S.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,Cg(s),s}throw oc=c,Ki}}var oc=null;function Ng(){if(oc===null)throw Error(i(459));var s=oc;return oc=null,s}function Cg(s){if(s===Ki||s===Zd)throw Error(i(483))}var Ya=!1;function dl(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lc(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function co(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Cs(s,c,h){var x=s.updateQueue;if(x===null)return null;if(x=x.shared,(vn&2)!==0){var S=x.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),x.pending=c,c=hu(s),fu(s,null,h),c}return Na(s,x,c,h),hu(s)}function Su(s,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var x=c.lanes;x&=s.pendingLanes,h|=x,c.lanes=h,Ci(s,h)}}function ja(s,c){var h=s.updateQueue,x=s.alternate;if(x!==null&&(x=x.updateQueue,h===x)){var S=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var V={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?S=A=V:A=A.next=V,h=h.next}while(h!==null);A===null?S=A=c:A=A.next=c}else S=A=c;h={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:A,shared:x.shared,callbacks:x.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=c:s.next=c,h.lastBaseUpdate=c}var Nu=!1;function _a(){if(Nu){var s=ur;if(s!==null)throw s}}function zi(s,c,h,x){Nu=!1;var S=s.updateQueue;Ya=!1;var A=S.firstBaseUpdate,V=S.lastBaseUpdate,ee=S.shared.pending;if(ee!==null){S.shared.pending=null;var he=ee,Pe=he.next;he.next=null,V===null?A=Pe:V.next=Pe,V=he;var He=s.alternate;He!==null&&(He=He.updateQueue,ee=He.lastBaseUpdate,ee!==V&&(ee===null?He.firstBaseUpdate=Pe:ee.next=Pe,He.lastBaseUpdate=he))}if(A!==null){var Qe=S.baseState;V=0,He=Pe=he=null,ee=A;do{var Oe=ee.lane&-536870913,Ie=Oe!==ee.lane;if(Ie?(sn&Oe)===Oe:(x&Oe)===Oe){Oe!==0&&Oe===sc&&(Nu=!0),He!==null&&(He=He.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var kt=s,Ct=ee;Oe=c;var En=h;switch(Ct.tag){case 1:if(kt=Ct.payload,typeof kt=="function"){Qe=kt.call(En,Qe,Oe);break e}Qe=kt;break e;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Ct.payload,Oe=typeof kt=="function"?kt.call(En,Qe,Oe):kt,Oe==null)break e;Qe=p({},Qe,Oe);break e;case 2:Ya=!0}}Oe=ee.callback,Oe!==null&&(s.flags|=64,Ie&&(s.flags|=8192),Ie=S.callbacks,Ie===null?S.callbacks=[Oe]:Ie.push(Oe))}else Ie={lane:Oe,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},He===null?(Pe=He=Ie,he=Qe):He=He.next=Ie,V|=Oe;if(ee=ee.next,ee===null){if(ee=S.shared.pending,ee===null)break;Ie=ee,ee=Ie.next,Ie.next=null,S.lastBaseUpdate=Ie,S.shared.pending=null}}while(!0);He===null&&(he=Qe),S.baseState=he,S.firstBaseUpdate=Pe,S.lastBaseUpdate=He,A===null&&(S.shared.lanes=0),bo|=V,s.lanes=V,s.memoizedState=Qe}}function jg(s,c){if(typeof s!="function")throw Error(i(191,s));s.call(c)}function sp(s,c){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)jg(h[s],c)}var fl=te(null),uo=te(0);function js(s,c){s=Ms,M(uo,s),M(fl,c),Ms=s|c.baseLanes}function tf(){M(uo,Ms),M(fl,fl.current)}function op(){Ms=uo.current,se(fl),se(uo)}var ka=0,Ut=null,bn=null,Zt=null,cc=!1,hl=!1,Bi=!1,uc=0,fo=0,ea=null,_g=0;function tn(){throw Error(i(321))}function Cu(s,c){if(c===null)return!1;for(var h=0;h<c.length&&h<s.length;h++)if(!Wi(s[h],c[h]))return!1;return!0}function lp(s,c,h,x,S,A){return ka=A,Ut=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Y.H=s===null||s.memoizedState===null?$g:_p,Bi=!1,A=h(x,S),Bi=!1,hl&&(A=Eg(c,h,x,S)),kg(s),A}function kg(s){Y.H=Ru;var c=bn!==null&&bn.next!==null;if(ka=0,Zt=bn=Ut=null,cc=!1,fo=0,ea=null,c)throw Error(i(300));s===null||ki||(s=s.dependencies,s!==null&&Jd(s)&&(ki=!0))}function Eg(s,c,h,x){Ut=s;var S=0;do{if(hl&&(ea=null),fo=0,hl=!1,25<=S)throw Error(i(301));if(S+=1,Zt=bn=null,s.updateQueue!=null){var A=s.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}Y.H=zg,A=c(h,x)}while(hl);return A}function cp(){var s=Y.H,c=s.useState()[0];return c=typeof c.then=="function"?ju(c):c,s=s.useState()[0],(bn!==null?bn.memoizedState:null)!==s&&(Ut.flags|=1024),c}function up(){var s=uc!==0;return uc=0,s}function pl(s,c,h){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~h}function nf(s){if(cc){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}cc=!1}ka=0,Zt=bn=Ut=null,hl=!1,fo=uc=0,ea=null}function dr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Ut.memoizedState=Zt=s:Zt=Zt.next=s,Zt}function fi(){if(bn===null){var s=Ut.alternate;s=s!==null?s.memoizedState:null}else s=bn.next;var c=Zt===null?Ut.memoizedState:Zt.next;if(c!==null)Zt=c,bn=s;else{if(s===null)throw Ut.alternate===null?Error(i(467)):Error(i(310));bn=s,s={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},Zt===null?Ut.memoizedState=Zt=s:Zt=Zt.next=s}return Zt}function ml(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ju(s){var c=fo;return fo+=1,ea===null&&(ea=[]),s=ap(ea,s,c),c=Ut,(Zt===null?c.memoizedState:Zt.next)===null&&(c=c.alternate,Y.H=c===null||c.memoizedState===null?$g:_p),s}function rf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ju(s);if(s.$$typeof===D)return ni(s)}throw Error(i(438,String(s)))}function _u(s){var c=null,h=Ut.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var x=Ut.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(S){return S.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=ml(),Ut.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(s),x=0;x<s;x++)h[x]=F;return c.index++,h}function Wa(s,c){return typeof c=="function"?c(s):c}function af(s){var c=fi();return dp(c,bn,s)}function dp(s,c,h){var x=s.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=h;var S=s.baseQueue,A=x.pending;if(A!==null){if(S!==null){var V=S.next;S.next=A.next,A.next=V}c.baseQueue=S=A,x.pending=null}if(A=s.baseState,S===null)s.memoizedState=A;else{c=S.next;var ee=V=null,he=null,Pe=c,He=!1;do{var Qe=Pe.lane&-536870913;if(Qe!==Pe.lane?(sn&Qe)===Qe:(ka&Qe)===Qe){var Oe=Pe.revertLane;if(Oe===0)he!==null&&(he=he.next={lane:0,revertLane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),Qe===sc&&(He=!0);else if((ka&Oe)===Oe){Pe=Pe.next,Oe===sc&&(He=!0);continue}else Qe={lane:0,revertLane:Pe.revertLane,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},he===null?(ee=he=Qe,V=A):he=he.next=Qe,Ut.lanes|=Oe,bo|=Oe;Qe=Pe.action,Bi&&h(A,Qe),A=Pe.hasEagerState?Pe.eagerState:h(A,Qe)}else Oe={lane:Qe,revertLane:Pe.revertLane,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},he===null?(ee=he=Oe,V=A):he=he.next=Oe,Ut.lanes|=Qe,bo|=Qe;Pe=Pe.next}while(Pe!==null&&Pe!==c);if(he===null?V=A:he.next=ee,!Wi(A,s.memoizedState)&&(ki=!0,He&&(h=ur,h!==null)))throw h;s.memoizedState=A,s.baseState=V,s.baseQueue=he,x.lastRenderedState=A}return S===null&&(x.lanes=0),[s.memoizedState,x.dispatch]}function fp(s){var c=fi(),h=c.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=s;var x=h.dispatch,S=h.pending,A=c.memoizedState;if(S!==null){h.pending=null;var V=S=S.next;do A=s(A,V.action),V=V.next;while(V!==S);Wi(A,c.memoizedState)||(ki=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),h.lastRenderedState=A}return[A,x]}function hp(s,c,h){var x=Ut,S=fi(),A=Xt;if(A){if(h===void 0)throw Error(i(407));h=h()}else h=c();var V=!Wi((bn||S).memoizedState,h);V&&(S.memoizedState=h,ki=!0),S=S.queue;var ee=of.bind(null,x,S,s);if(Tu(2048,8,ee,[s]),S.getSnapshot!==c||V||Zt!==null&&Zt.memoizedState.tag&1){if(x.flags|=2048,dc(9,ff(),Tg.bind(null,x,S,h,c),null),Ln===null)throw Error(i(349));A||(ka&124)!==0||sf(x,c,h)}return h}function sf(s,c,h){s.flags|=16384,s={getSnapshot:c,value:h},c=Ut.updateQueue,c===null?(c=ml(),Ut.updateQueue=c,c.stores=[s]):(h=c.stores,h===null?c.stores=[s]:h.push(s))}function Tg(s,c,h,x){c.value=h,c.getSnapshot=x,pp(c)&&mp(s)}function of(s,c,h){return h(function(){pp(c)&&mp(s)})}function pp(s){var c=s.getSnapshot;s=s.value;try{var h=c();return!Wi(s,h)}catch{return!0}}function mp(s){var c=il(s,2);c!==null&&$r(c,s,2)}function lf(s){var c=dr();if(typeof s=="function"){var h=s;if(s=h(),Bi){Se(!0);try{h()}finally{Se(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:s},c}function ku(s,c,h,x){return s.baseState=h,dp(s,bn,typeof x=="function"?x:Wa)}function tv(s,c,h,x,S){if(gf(s))throw Error(i(485));if(s=c.action,s!==null){var A={payload:S,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){A.listeners.push(V)}};Y.T!==null?h(!0):A.isTransition=!1,x(A),h=c.pending,h===null?(A.next=c.pending=A,gp(c,A)):(A.next=h.next,c.pending=h.next=A)}}function gp(s,c){var h=c.action,x=c.payload,S=s.state;if(c.isTransition){var A=Y.T,V={};Y.T=V;try{var ee=h(S,x),he=Y.S;he!==null&&he(V,ee),yp(s,c,ee)}catch(Pe){cf(s,c,Pe)}finally{Y.T=A}}else try{A=h(S,x),yp(s,c,A)}catch(Pe){cf(s,c,Pe)}}function yp(s,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(x){Ag(s,c,x)},function(x){return cf(s,c,x)}):Ag(s,c,h)}function Ag(s,c,h){c.status="fulfilled",c.value=h,Pg(c),s.state=h,c=s.pending,c!==null&&(h=c.next,h===c?s.pending=null:(h=h.next,c.next=h,gp(s,h)))}function cf(s,c,h){var x=s.pending;if(s.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=h,Pg(c),c=c.next;while(c!==x)}s.action=null}function Pg(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function uf(s,c){return c}function xp(s,c){if(Xt){var h=Ln.formState;if(h!==null){e:{var x=Ut;if(Xt){if(Hn){t:{for(var S=Hn,A=lr;S.nodeType!==8;){if(!A){S=null;break t}if(S=Aa(S.nextSibling),S===null){S=null;break t}}A=S.data,S=A==="F!"||A==="F"?S:null}if(S){Hn=Aa(S.nextSibling),x=S.data==="F!";break e}}Xr(x)}x=!1}x&&(c=h[0])}}return h=dr(),h.memoizedState=h.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uf,lastRenderedState:c},h.queue=x,h=Np.bind(null,Ut,x),x.dispatch=h,x=lf(!1),A=Cp.bind(null,Ut,!1,x.queue),x=dr(),S={state:c,dispatch:null,action:s,pending:null},x.queue=S,h=tv.bind(null,Ut,S,A,h),S.dispatch=h,x.memoizedState=s,[c,h,!1]}function df(s){var c=fi();return Dg(c,bn,s)}function Dg(s,c,h){if(c=dp(s,c,uf)[0],s=af(Wa)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=ju(c)}catch(V){throw V===Ki?Zd:V}else x=c;c=fi();var S=c.queue,A=S.dispatch;return h!==c.memoizedState&&(Ut.flags|=2048,dc(9,ff(),bp.bind(null,S,h),null)),[x,A,s]}function bp(s,c){s.action=c}function $t(s){var c=fi(),h=bn;if(h!==null)return Dg(c,h,s);fi(),c=c.memoizedState,h=fi();var x=h.queue.dispatch;return h.memoizedState=s,[c,x,!1]}function dc(s,c,h,x){return s={tag:s,create:h,deps:x,inst:c,next:null},c=Ut.updateQueue,c===null&&(c=ml(),Ut.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=s.next=s:(x=h.next,h.next=s,s.next=x,c.lastEffect=s),s}function ff(){return{destroy:void 0,resource:void 0}}function fc(){return fi().memoizedState}function Eu(s,c,h,x){var S=dr();x=x===void 0?null:x,Ut.flags|=s,S.memoizedState=dc(1|c,ff(),h,x)}function Tu(s,c,h,x){var S=fi();x=x===void 0?null:x;var A=S.memoizedState.inst;bn!==null&&x!==null&&Cu(x,bn.memoizedState.deps)?S.memoizedState=dc(c,A,h,x):(Ut.flags|=s,S.memoizedState=dc(1|c,A,h,x))}function Ig(s,c){Eu(8390656,8,s,c)}function Rr(s,c){Tu(2048,8,s,c)}function Mg(s,c){return Tu(4,2,s,c)}function Au(s,c){return Tu(4,4,s,c)}function hf(s,c){if(typeof c=="function"){s=s();var h=c(s);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function vp(s,c,h){h=h!=null?h.concat([s]):null,Tu(4,4,hf.bind(null,c,s),h)}function pf(){}function fr(s,c){var h=fi();c=c===void 0?null:c;var x=h.memoizedState;return c!==null&&Cu(c,x[1])?x[0]:(h.memoizedState=[s,c],s)}function _s(s,c){var h=fi();c=c===void 0?null:c;var x=h.memoizedState;if(c!==null&&Cu(c,x[1]))return x[0];if(x=s(),Bi){Se(!0);try{s()}finally{Se(!1)}}return h.memoizedState=[x,c],x}function Pu(s,c,h){return h===void 0||(ka&1073741824)!==0?s.memoizedState=c:(s.memoizedState=h,s=hy(),Ut.lanes|=s,bo|=s,h)}function wp(s,c,h,x){return Wi(h,c)?h:fl.current!==null?(s=Pu(s,h,x),Wi(s,c)||(ki=!0),s):(ka&42)===0?(ki=!0,s.memoizedState=h):(s=hy(),Ut.lanes|=s,bo|=s,c)}function Du(s,c,h,x,S){var A=z.p;z.p=A!==0&&8>A?A:8;var V=Y.T,ee={};Y.T=ee,Cp(s,!1,c,h);try{var he=S(),Pe=Y.S;if(Pe!==null&&Pe(ee,he),he!==null&&typeof he=="object"&&typeof he.then=="function"){var He=ev(he,x);gl(s,c,He,qi(s))}else gl(s,c,x,qi(s))}catch(Qe){gl(s,c,{then:function(){},status:"rejected",reason:Qe},qi())}finally{z.p=A,Y.T=V}}function Rg(){}function Iu(s,c,h,x){if(s.tag!==5)throw Error(i(476));var S=Sp(s).queue;Du(s,S,c,re,h===null?Rg:function(){return mf(s),h(x)})}function Sp(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:re},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:h},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function mf(s){var c=Sp(s).next.queue;gl(s,c,{},qi())}function Mu(){return ni(Ic)}function ks(){return fi().memoizedState}function Og(){return fi().memoizedState}function ho(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var h=qi();s=co(h);var x=Cs(c,s,h);x!==null&&($r(x,c,h),Su(x,c,h)),c={cache:np()},s.payload=c;return}c=c.return}}function Lg(s,c,h){var x=qi();h={lane:x,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},gf(s)?Fg(c,h):(h=ic(s,c,h,x),h!==null&&($r(h,s,x),jp(h,c,x)))}function Np(s,c,h){var x=qi();gl(s,c,h,x)}function gl(s,c,h,x){var S={lane:x,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(gf(s))Fg(c,S);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var V=c.lastRenderedState,ee=A(V,h);if(S.hasEagerState=!0,S.eagerState=ee,Wi(ee,V))return Na(s,c,S,0),Ln===null&&nl(),!1}catch{}finally{}if(h=ic(s,c,S,x),h!==null)return $r(h,s,x),jp(h,c,x),!0}return!1}function Cp(s,c,h,x){if(x={lane:2,revertLane:Ff(),action:x,hasEagerState:!1,eagerState:null,next:null},gf(s)){if(c)throw Error(i(479))}else c=ic(s,h,x,2),c!==null&&$r(c,s,2)}function gf(s){var c=s.alternate;return s===Ut||c!==null&&c===Ut}function Fg(s,c){hl=cc=!0;var h=s.pending;h===null?c.next=c:(c.next=h.next,h.next=c),s.pending=c}function jp(s,c,h){if((h&4194048)!==0){var x=c.lanes;x&=s.pendingLanes,h|=x,c.lanes=h,Ci(s,h)}}var Ru={readContext:ni,use:rf,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn},$g={readContext:ni,use:rf,useCallback:function(s,c){return dr().memoizedState=[s,c===void 0?null:c],s},useContext:ni,useEffect:Ig,useImperativeHandle:function(s,c,h){h=h!=null?h.concat([s]):null,Eu(4194308,4,hf.bind(null,c,s),h)},useLayoutEffect:function(s,c){return Eu(4194308,4,s,c)},useInsertionEffect:function(s,c){Eu(4,2,s,c)},useMemo:function(s,c){var h=dr();c=c===void 0?null:c;var x=s();if(Bi){Se(!0);try{s()}finally{Se(!1)}}return h.memoizedState=[x,c],x},useReducer:function(s,c,h){var x=dr();if(h!==void 0){var S=h(c);if(Bi){Se(!0);try{h(c)}finally{Se(!1)}}}else S=c;return x.memoizedState=x.baseState=S,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:S},x.queue=s,s=s.dispatch=Lg.bind(null,Ut,s),[x.memoizedState,s]},useRef:function(s){var c=dr();return s={current:s},c.memoizedState=s},useState:function(s){s=lf(s);var c=s.queue,h=Np.bind(null,Ut,c);return c.dispatch=h,[s.memoizedState,h]},useDebugValue:pf,useDeferredValue:function(s,c){var h=dr();return Pu(h,s,c)},useTransition:function(){var s=lf(!1);return s=Du.bind(null,Ut,s.queue,!0,!1),dr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,h){var x=Ut,S=dr();if(Xt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=c(),Ln===null)throw Error(i(349));(sn&124)!==0||sf(x,c,h)}S.memoizedState=h;var A={value:h,getSnapshot:c};return S.queue=A,Ig(of.bind(null,x,A,s),[s]),x.flags|=2048,dc(9,ff(),Tg.bind(null,x,A,h,c),null),h},useId:function(){var s=dr(),c=Ln.identifierPrefix;if(Xt){var h=Ss,x=Vn;h=(x&~(1<<32-Ee(x)-1)).toString(32)+h,c=""+c+"R"+h,h=uc++,0<h&&(c+="H"+h.toString(32)),c+=""}else h=_g++,c=""+c+"r"+h.toString(32)+"";return s.memoizedState=c},useHostTransitionStatus:Mu,useFormState:xp,useActionState:xp,useOptimistic:function(s){var c=dr();c.memoizedState=c.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=Cp.bind(null,Ut,!0,h),h.dispatch=c,[s,c]},useMemoCache:_u,useCacheRefresh:function(){return dr().memoizedState=ho.bind(null,Ut)}},_p={readContext:ni,use:rf,useCallback:fr,useContext:ni,useEffect:Rr,useImperativeHandle:vp,useInsertionEffect:Mg,useLayoutEffect:Au,useMemo:_s,useReducer:af,useRef:fc,useState:function(){return af(Wa)},useDebugValue:pf,useDeferredValue:function(s,c){var h=fi();return wp(h,bn.memoizedState,s,c)},useTransition:function(){var s=af(Wa)[0],c=fi().memoizedState;return[typeof s=="boolean"?s:ju(s),c]},useSyncExternalStore:hp,useId:ks,useHostTransitionStatus:Mu,useFormState:df,useActionState:df,useOptimistic:function(s,c){var h=fi();return ku(h,bn,s,c)},useMemoCache:_u,useCacheRefresh:Og},zg={readContext:ni,use:rf,useCallback:fr,useContext:ni,useEffect:Rr,useImperativeHandle:vp,useInsertionEffect:Mg,useLayoutEffect:Au,useMemo:_s,useReducer:fp,useRef:fc,useState:function(){return fp(Wa)},useDebugValue:pf,useDeferredValue:function(s,c){var h=fi();return bn===null?Pu(h,s,c):wp(h,bn.memoizedState,s,c)},useTransition:function(){var s=fp(Wa)[0],c=fi().memoizedState;return[typeof s=="boolean"?s:ju(s),c]},useSyncExternalStore:hp,useId:ks,useHostTransitionStatus:Mu,useFormState:$t,useActionState:$t,useOptimistic:function(s,c){var h=fi();return bn!==null?ku(h,bn,s,c):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:_u,useCacheRefresh:Og},xi=null,hr=0;function yf(s){var c=hr;return hr+=1,xi===null&&(xi=[]),ap(xi,s,c)}function Ou(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function yl(s,c){throw c.$$typeof===g?Error(i(525)):(s=Object.prototype.toString.call(c),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function xl(s){var c=s._init;return c(s._payload)}function kp(s){function c(_e,be){if(s){var Te=_e.deletions;Te===null?(_e.deletions=[be],_e.flags|=16):Te.push(be)}}function h(_e,be){if(!s)return null;for(;be!==null;)c(_e,be),be=be.sibling;return null}function x(_e){for(var be=new Map;_e!==null;)_e.key!==null?be.set(_e.key,_e):be.set(_e.index,_e),_e=_e.sibling;return be}function S(_e,be){return _e=Ji(_e,be),_e.index=0,_e.sibling=null,_e}function A(_e,be,Te){return _e.index=Te,s?(Te=_e.alternate,Te!==null?(Te=Te.index,Te<be?(_e.flags|=67108866,be):Te):(_e.flags|=67108866,be)):(_e.flags|=1048576,be)}function V(_e){return s&&_e.alternate===null&&(_e.flags|=67108866),_e}function ee(_e,be,Te,Ge){return be===null||be.tag!==6?(be=Zh(Te,_e.mode,Ge),be.return=_e,be):(be=S(be,Te),be.return=_e,be)}function he(_e,be,Te,Ge){var mt=Te.type;return mt===N?He(_e,be,Te.props.children,Ge,Te.key):be!==null&&(be.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===q&&xl(mt)===be.type)?(be=S(be,Te.props),Ou(be,Te),be.return=_e,be):(be=Wd(Te.type,Te.key,Te.props,null,_e.mode,Ge),Ou(be,Te),be.return=_e,be)}function Pe(_e,be,Te,Ge){return be===null||be.tag!==4||be.stateNode.containerInfo!==Te.containerInfo||be.stateNode.implementation!==Te.implementation?(be=rc(Te,_e.mode,Ge),be.return=_e,be):(be=S(be,Te.children||[]),be.return=_e,be)}function He(_e,be,Te,Ge,mt){return be===null||be.tag!==7?(be=sl(Te,_e.mode,Ge,mt),be.return=_e,be):(be=S(be,Te),be.return=_e,be)}function Qe(_e,be,Te){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return be=Zh(""+be,_e.mode,Te),be.return=_e,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case b:return Te=Wd(be.type,be.key,be.props,null,_e.mode,Te),Ou(Te,be),Te.return=_e,Te;case v:return be=rc(be,_e.mode,Te),be.return=_e,be;case q:var Ge=be._init;return be=Ge(be._payload),Qe(_e,be,Te)}if(oe(be)||Q(be))return be=sl(be,_e.mode,Te,null),be.return=_e,be;if(typeof be.then=="function")return Qe(_e,yf(be),Te);if(be.$$typeof===D)return Qe(_e,Kd(_e,be),Te);yl(_e,be)}return null}function Oe(_e,be,Te,Ge){var mt=be!==null?be.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return mt!==null?null:ee(_e,be,""+Te,Ge);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case b:return Te.key===mt?he(_e,be,Te,Ge):null;case v:return Te.key===mt?Pe(_e,be,Te,Ge):null;case q:return mt=Te._init,Te=mt(Te._payload),Oe(_e,be,Te,Ge)}if(oe(Te)||Q(Te))return mt!==null?null:He(_e,be,Te,Ge,null);if(typeof Te.then=="function")return Oe(_e,be,yf(Te),Ge);if(Te.$$typeof===D)return Oe(_e,be,Kd(_e,Te),Ge);yl(_e,Te)}return null}function Ie(_e,be,Te,Ge,mt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return _e=_e.get(Te)||null,ee(be,_e,""+Ge,mt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case b:return _e=_e.get(Ge.key===null?Te:Ge.key)||null,he(be,_e,Ge,mt);case v:return _e=_e.get(Ge.key===null?Te:Ge.key)||null,Pe(be,_e,Ge,mt);case q:var Yt=Ge._init;return Ge=Yt(Ge._payload),Ie(_e,be,Te,Ge,mt)}if(oe(Ge)||Q(Ge))return _e=_e.get(Te)||null,He(be,_e,Ge,mt,null);if(typeof Ge.then=="function")return Ie(_e,be,Te,yf(Ge),mt);if(Ge.$$typeof===D)return Ie(_e,be,Te,Kd(be,Ge),mt);yl(be,Ge)}return null}function kt(_e,be,Te,Ge){for(var mt=null,Yt=null,bt=be,Et=be=0,Ai=null;bt!==null&&Et<Te.length;Et++){bt.index>Et?(Ai=bt,bt=null):Ai=bt.sibling;var ln=Oe(_e,bt,Te[Et],Ge);if(ln===null){bt===null&&(bt=Ai);break}s&&bt&&ln.alternate===null&&c(_e,bt),be=A(ln,be,Et),Yt===null?mt=ln:Yt.sibling=ln,Yt=ln,bt=Ai}if(Et===Te.length)return h(_e,bt),Xt&&ol(_e,Et),mt;if(bt===null){for(;Et<Te.length;Et++)bt=Qe(_e,Te[Et],Ge),bt!==null&&(be=A(bt,be,Et),Yt===null?mt=bt:Yt.sibling=bt,Yt=bt);return Xt&&ol(_e,Et),mt}for(bt=x(bt);Et<Te.length;Et++)Ai=Ie(bt,_e,Et,Te[Et],Ge),Ai!==null&&(s&&Ai.alternate!==null&&bt.delete(Ai.key===null?Et:Ai.key),be=A(Ai,be,Et),Yt===null?mt=Ai:Yt.sibling=Ai,Yt=Ai);return s&&bt.forEach(function(To){return c(_e,To)}),Xt&&ol(_e,Et),mt}function Ct(_e,be,Te,Ge){if(Te==null)throw Error(i(151));for(var mt=null,Yt=null,bt=be,Et=be=0,Ai=null,ln=Te.next();bt!==null&&!ln.done;Et++,ln=Te.next()){bt.index>Et?(Ai=bt,bt=null):Ai=bt.sibling;var To=Oe(_e,bt,ln.value,Ge);if(To===null){bt===null&&(bt=Ai);break}s&&bt&&To.alternate===null&&c(_e,bt),be=A(To,be,Et),Yt===null?mt=To:Yt.sibling=To,Yt=To,bt=Ai}if(ln.done)return h(_e,bt),Xt&&ol(_e,Et),mt;if(bt===null){for(;!ln.done;Et++,ln=Te.next())ln=Qe(_e,ln.value,Ge),ln!==null&&(be=A(ln,be,Et),Yt===null?mt=ln:Yt.sibling=ln,Yt=ln);return Xt&&ol(_e,Et),mt}for(bt=x(bt);!ln.done;Et++,ln=Te.next())ln=Ie(bt,_e,Et,ln.value,Ge),ln!==null&&(s&&ln.alternate!==null&&bt.delete(ln.key===null?Et:ln.key),be=A(ln,be,Et),Yt===null?mt=ln:Yt.sibling=ln,Yt=ln);return s&&bt.forEach(function(Lv){return c(_e,Lv)}),Xt&&ol(_e,Et),mt}function En(_e,be,Te,Ge){if(typeof Te=="object"&&Te!==null&&Te.type===N&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case b:e:{for(var mt=Te.key;be!==null;){if(be.key===mt){if(mt=Te.type,mt===N){if(be.tag===7){h(_e,be.sibling),Ge=S(be,Te.props.children),Ge.return=_e,_e=Ge;break e}}else if(be.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===q&&xl(mt)===be.type){h(_e,be.sibling),Ge=S(be,Te.props),Ou(Ge,Te),Ge.return=_e,_e=Ge;break e}h(_e,be);break}else c(_e,be);be=be.sibling}Te.type===N?(Ge=sl(Te.props.children,_e.mode,Ge,Te.key),Ge.return=_e,_e=Ge):(Ge=Wd(Te.type,Te.key,Te.props,null,_e.mode,Ge),Ou(Ge,Te),Ge.return=_e,_e=Ge)}return V(_e);case v:e:{for(mt=Te.key;be!==null;){if(be.key===mt)if(be.tag===4&&be.stateNode.containerInfo===Te.containerInfo&&be.stateNode.implementation===Te.implementation){h(_e,be.sibling),Ge=S(be,Te.children||[]),Ge.return=_e,_e=Ge;break e}else{h(_e,be);break}else c(_e,be);be=be.sibling}Ge=rc(Te,_e.mode,Ge),Ge.return=_e,_e=Ge}return V(_e);case q:return mt=Te._init,Te=mt(Te._payload),En(_e,be,Te,Ge)}if(oe(Te))return kt(_e,be,Te,Ge);if(Q(Te)){if(mt=Q(Te),typeof mt!="function")throw Error(i(150));return Te=mt.call(Te),Ct(_e,be,Te,Ge)}if(typeof Te.then=="function")return En(_e,be,yf(Te),Ge);if(Te.$$typeof===D)return En(_e,be,Kd(_e,Te),Ge);yl(_e,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint"?(Te=""+Te,be!==null&&be.tag===6?(h(_e,be.sibling),Ge=S(be,Te),Ge.return=_e,_e=Ge):(h(_e,be),Ge=Zh(Te,_e.mode,Ge),Ge.return=_e,_e=Ge),V(_e)):h(_e,be)}return function(_e,be,Te,Ge){try{hr=0;var mt=En(_e,be,Te,Ge);return xi=null,mt}catch(bt){if(bt===Ki||bt===Zd)throw bt;var Yt=or(29,bt,null,_e.mode);return Yt.lanes=Ge,Yt.return=_e,Yt}finally{}}}var bl=kp(!0),Bg=kp(!1),Or=te(null),Xi=null;function ta(s){var c=s.alternate;M(ii,ii.current&1),M(Or,s),Xi===null&&(c===null||fl.current!==null||c.memoizedState!==null)&&(Xi=s)}function Ug(s){if(s.tag===22){if(M(ii,ii.current),M(Or,s),Xi===null){var c=s.alternate;c!==null&&c.memoizedState!==null&&(Xi=s)}}else Es()}function Es(){M(ii,ii.current),M(Or,Or.current)}function Qa(s){se(Or),Xi===s&&(Xi=null),se(ii)}var ii=te(0);function Lu(s){for(var c=s;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||er(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function hc(s,c,h,x){c=s.memoizedState,h=h(x,c),h=h==null?c:p({},c,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Fu={enqueueSetState:function(s,c,h){s=s._reactInternals;var x=qi(),S=co(x);S.payload=c,h!=null&&(S.callback=h),c=Cs(s,S,x),c!==null&&($r(c,s,x),Su(c,s,x))},enqueueReplaceState:function(s,c,h){s=s._reactInternals;var x=qi(),S=co(x);S.tag=1,S.payload=c,h!=null&&(S.callback=h),c=Cs(s,S,x),c!==null&&($r(c,s,x),Su(c,s,x))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var h=qi(),x=co(h);x.tag=2,c!=null&&(x.callback=c),c=Cs(s,x,h),c!==null&&($r(c,s,h),Su(c,s,h))}};function $u(s,c,h,x,S,A,V){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(x,A,V):c.prototype&&c.prototype.isPureReactComponent?!Wr(h,x)||!Wr(S,A):!0}function qg(s,c,h,x){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,x),c.state!==s&&Fu.enqueueReplaceState(c,c.state,null)}function po(s,c){var h=c;if("ref"in c){h={};for(var x in c)x!=="ref"&&(h[x]=c[x])}if(s=s.defaultProps){h===c&&(h=p({},h));for(var S in s)h[S]===void 0&&(h[S]=s[S])}return h}var vl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Ep(s){vl(s)}function xf(s){console.error(s)}function Vg(s){vl(s)}function zu(s,c){try{var h=s.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function Ja(s,c,h){try{var x=s.onCaughtError;x(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function bf(s,c,h){return h=co(h),h.tag=3,h.payload={element:null},h.callback=function(){zu(s,c)},h}function Tp(s){return s=co(s),s.tag=3,s}function Hg(s,c,h,x){var S=h.type.getDerivedStateFromError;if(typeof S=="function"){var A=x.value;s.payload=function(){return S(A)},s.callback=function(){Ja(c,h,x)}}var V=h.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(s.callback=function(){Ja(c,h,x),typeof S!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var ee=x.stack;this.componentDidCatch(x.value,{componentStack:ee!==null?ee:""})})}function Gg(s,c,h,x,S){if(h.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=h.alternate,c!==null&&bu(c,h,S,!0),h=Or.current,h!==null){switch(h.tag){case 13:return Xi===null?Wp():h.alternate===null&&ri===0&&(ri=3),h.flags&=-257,h.flags|=65536,h.lanes=S,x===rp?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([x]):c.add(x),Kp(s,x,S)),!1;case 22:return h.flags|=65536,x===rp?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([x]):h.add(x)),Kp(s,x,S)),!1}throw Error(i(435,h.tag))}return Kp(s,x,S),Wp(),!1}if(Xt)return c=Or.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=S,x!==ac&&(s=Error(i(422),{cause:x}),oo(Qi(s,h)))):(x!==ac&&(c=Error(i(423),{cause:x}),oo(Qi(c,h))),s=s.current.alternate,s.flags|=65536,S&=-S,s.lanes|=S,x=Qi(x,h),S=bf(s.stateNode,x,S),ja(s,S),ri!==4&&(ri=2)),!1;var A=Error(i(520),{cause:x});if(A=Qi(A,h),Ju===null?Ju=[A]:Ju.push(A),ri!==4&&(ri=2),c===null)return!0;x=Qi(x,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,s=S&-S,h.lanes|=s,s=bf(h.stateNode,x,s),ja(h,s),!1;case 1:if(c=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(vo===null||!vo.has(A))))return h.flags|=65536,S&=-S,h.lanes|=S,S=Tp(S),Hg(S,s,h,x),ja(h,S),!1}h=h.return}while(h!==null);return!1}var Yg=Error(i(461)),ki=!1;function Un(s,c,h,x){c.child=s===null?Bg(c,null,h,x):bl(c,s.child,h,x)}function vf(s,c,h,x,S){h=h.render;var A=c.ref;if("ref"in x){var V={};for(var ee in x)ee!=="ref"&&(V[ee]=x[ee])}else V=x;return cl(c),x=lp(s,c,h,V,A,S),ee=up(),s!==null&&!ki?(pl(s,c,S),Ts(s,c,S)):(Xt&&ee&&tp(c),c.flags|=1,Un(s,c,x,S),c.child)}function wf(s,c,h,x,S){if(s===null){var A=h.type;return typeof A=="function"&&!al(A)&&A.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=A,Sf(s,c,A,x,S)):(s=Wd(h.type,null,x,c,c.mode,S),s.ref=c.ref,s.return=c,c.child=s)}if(A=s.child,!Ea(s,S)){var V=A.memoizedProps;if(h=h.compare,h=h!==null?h:Wr,h(V,x)&&s.ref===c.ref)return Ts(s,c,S)}return c.flags|=1,s=Ji(A,x),s.ref=c.ref,s.return=c,c.child=s}function Sf(s,c,h,x,S){if(s!==null){var A=s.memoizedProps;if(Wr(A,x)&&s.ref===c.ref)if(ki=!1,c.pendingProps=x=A,Ea(s,S))(s.flags&131072)!==0&&(ki=!0);else return c.lanes=s.lanes,Ts(s,c,S)}return pc(s,c,h,x,S)}function Bu(s,c,h){var x=c.pendingProps,S=x.children,A=s!==null?s.memoizedState:null;if(x.mode==="hidden"){if((c.flags&128)!==0){if(x=A!==null?A.baseLanes|h:h,s!==null){for(S=c.child=s.child,A=0;S!==null;)A=A|S.lanes|S.childLanes,S=S.sibling;c.childLanes=A&~x}else c.childLanes=0,c.child=null;return wl(s,c,x,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&Xd(c,A!==null?A.cachePool:null),A!==null?js(c,A):tf(),Ug(c);else return c.lanes=c.childLanes=536870912,wl(s,c,A!==null?A.baseLanes|h:h,h)}else A!==null?(Xd(c,A.cachePool),js(c,A),Es(),c.memoizedState=null):(s!==null&&Xd(c,null),tf(),Es());return Un(s,c,S,h),c.child}function wl(s,c,h,x){var S=Ns();return S=S===null?null:{parent:Pn._currentValue,pool:S},c.memoizedState={baseLanes:h,cachePool:S},s!==null&&Xd(c,null),tf(),Ug(c),s!==null&&bu(s,c,x,!0),null}function wt(s,c){var h=c.ref;if(h===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(s===null||s.ref!==h)&&(c.flags|=4194816)}}function pc(s,c,h,x,S){return cl(c),h=lp(s,c,h,x,void 0,S),x=up(),s!==null&&!ki?(pl(s,c,S),Ts(s,c,S)):(Xt&&x&&tp(c),c.flags|=1,Un(s,c,h,S),c.child)}function Nf(s,c,h,x,S,A){return cl(c),c.updateQueue=null,h=Eg(c,x,h,S),kg(s),x=up(),s!==null&&!ki?(pl(s,c,A),Ts(s,c,A)):(Xt&&x&&tp(c),c.flags|=1,Un(s,c,h,A),c.child)}function mo(s,c,h,x,S){if(cl(c),c.stateNode===null){var A=rl,V=h.contextType;typeof V=="object"&&V!==null&&(A=ni(V)),A=new h(x,A),c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Fu,c.stateNode=A,A._reactInternals=c,A=c.stateNode,A.props=x,A.state=c.memoizedState,A.refs={},dl(c),V=h.contextType,A.context=typeof V=="object"&&V!==null?ni(V):rl,A.state=c.memoizedState,V=h.getDerivedStateFromProps,typeof V=="function"&&(hc(c,h,V,x),A.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(V=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),V!==A.state&&Fu.enqueueReplaceState(A,A.state,null),zi(c,x,A,S),_a(),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(s===null){A=c.stateNode;var ee=c.memoizedProps,he=po(h,ee);A.props=he;var Pe=A.context,He=h.contextType;V=rl,typeof He=="object"&&He!==null&&(V=ni(He));var Qe=h.getDerivedStateFromProps;He=typeof Qe=="function"||typeof A.getSnapshotBeforeUpdate=="function",ee=c.pendingProps!==ee,He||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(ee||Pe!==V)&&qg(c,A,x,V),Ya=!1;var Oe=c.memoizedState;A.state=Oe,zi(c,x,A,S),_a(),Pe=c.memoizedState,ee||Oe!==Pe||Ya?(typeof Qe=="function"&&(hc(c,h,Qe,x),Pe=c.memoizedState),(he=Ya||$u(c,h,he,x,Oe,Pe,V))?(He||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=Pe),A.props=x,A.state=Pe,A.context=V,x=he):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{A=c.stateNode,lc(s,c),V=c.memoizedProps,He=po(h,V),A.props=He,Qe=c.pendingProps,Oe=A.context,Pe=h.contextType,he=rl,typeof Pe=="object"&&Pe!==null&&(he=ni(Pe)),ee=h.getDerivedStateFromProps,(Pe=typeof ee=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(V!==Qe||Oe!==he)&&qg(c,A,x,he),Ya=!1,Oe=c.memoizedState,A.state=Oe,zi(c,x,A,S),_a();var Ie=c.memoizedState;V!==Qe||Oe!==Ie||Ya||s!==null&&s.dependencies!==null&&Jd(s.dependencies)?(typeof ee=="function"&&(hc(c,h,ee,x),Ie=c.memoizedState),(He=Ya||$u(c,h,He,x,Oe,Ie,he)||s!==null&&s.dependencies!==null&&Jd(s.dependencies))?(Pe||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(x,Ie,he),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(x,Ie,he)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||V===s.memoizedProps&&Oe===s.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||V===s.memoizedProps&&Oe===s.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Ie),A.props=x,A.state=Ie,A.context=he,x=He):(typeof A.componentDidUpdate!="function"||V===s.memoizedProps&&Oe===s.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||V===s.memoizedProps&&Oe===s.memoizedState||(c.flags|=1024),x=!1)}return A=x,wt(s,c),x=(c.flags&128)!==0,A||x?(A=c.stateNode,h=x&&typeof h.getDerivedStateFromError!="function"?null:A.render(),c.flags|=1,s!==null&&x?(c.child=bl(c,s.child,null,S),c.child=bl(c,null,h,S)):Un(s,c,h,S),c.memoizedState=A.state,s=c.child):s=Ts(s,c,S),s}function Wg(s,c,h,x){return xu(),c.flags|=256,Un(s,c,h,x),c.child}var Uu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(s){return{baseLanes:s,cachePool:vg()}}function Ei(s,c,h){return s=s!==null?s.childLanes&~h:0,c&&(s|=ia),s}function Qg(s,c,h){var x=c.pendingProps,S=!1,A=(c.flags&128)!==0,V;if((V=A)||(V=s!==null&&s.memoizedState===null?!1:(ii.current&2)!==0),V&&(S=!0,c.flags&=-129),V=(c.flags&32)!==0,c.flags&=-33,s===null){if(Xt){if(S?ta(c):Es(),Xt){var ee=Hn,he;if(he=ee){e:{for(he=ee,ee=lr;he.nodeType!==8;){if(!ee){ee=null;break e}if(he=Aa(he.nextSibling),he===null){ee=null;break e}}ee=he}ee!==null?(c.memoizedState={dehydrated:ee,treeContext:Bn!==null?{id:Vn,overflow:Ss}:null,retryLane:536870912,hydrationErrors:null},he=or(18,null,null,0),he.stateNode=ee,he.return=c,c.child=he,yi=c,Hn=null,he=!0):he=!1}he||Xr(c)}if(ee=c.memoizedState,ee!==null&&(ee=ee.dehydrated,ee!==null))return er(ee)?c.lanes=32:c.lanes=536870912,null;Qa(c)}return ee=x.children,x=x.fallback,S?(Es(),S=c.mode,ee=qu({mode:"hidden",children:ee},S),x=sl(x,S,h,null),ee.return=c,x.return=c,ee.sibling=x,c.child=ee,S=c.child,S.memoizedState=Cf(h),S.childLanes=Ei(s,V,h),c.memoizedState=Uu,x):(ta(c),Ap(c,ee))}if(he=s.memoizedState,he!==null&&(ee=he.dehydrated,ee!==null)){if(A)c.flags&256?(ta(c),c.flags&=-257,c=Pp(s,c,h)):c.memoizedState!==null?(Es(),c.child=s.child,c.flags|=128,c=null):(Es(),S=x.fallback,ee=c.mode,x=qu({mode:"visible",children:x.children},ee),S=sl(S,ee,h,null),S.flags|=2,x.return=c,S.return=c,x.sibling=S,c.child=x,bl(c,s.child,null,h),x=c.child,x.memoizedState=Cf(h),x.childLanes=Ei(s,V,h),c.memoizedState=Uu,c=S);else if(ta(c),er(ee)){if(V=ee.nextSibling&&ee.nextSibling.dataset,V)var Pe=V.dgst;V=Pe,x=Error(i(419)),x.stack="",x.digest=V,oo({value:x,source:null,stack:null}),c=Pp(s,c,h)}else if(ki||bu(s,c,h,!1),V=(h&s.childLanes)!==0,ki||V){if(V=Ln,V!==null&&(x=h&-h,x=(x&42)!==0?1:Vi(x),x=(x&(V.suspendedLanes|h))!==0?0:x,x!==0&&x!==he.retryLane))throw he.retryLane=x,il(s,x),$r(V,s,x),Yg;ee.data==="$?"||Wp(),c=Pp(s,c,h)}else ee.data==="$?"?(c.flags|=192,c.child=s.child,c=null):(s=he.treeContext,Hn=Aa(ee.nextSibling),yi=c,Xt=!0,Ca=null,lr=!1,s!==null&&(Jr[Kr++]=Vn,Jr[Kr++]=Ss,Jr[Kr++]=Bn,Vn=s.id,Ss=s.overflow,Bn=c),c=Ap(c,x.children),c.flags|=4096);return c}return S?(Es(),S=x.fallback,ee=c.mode,he=s.child,Pe=he.sibling,x=Ji(he,{mode:"hidden",children:x.children}),x.subtreeFlags=he.subtreeFlags&65011712,Pe!==null?S=Ji(Pe,S):(S=sl(S,ee,h,null),S.flags|=2),S.return=c,x.return=c,x.sibling=S,c.child=x,x=S,S=c.child,ee=s.child.memoizedState,ee===null?ee=Cf(h):(he=ee.cachePool,he!==null?(Pe=Pn._currentValue,he=he.parent!==Pe?{parent:Pe,pool:Pe}:he):he=vg(),ee={baseLanes:ee.baseLanes|h,cachePool:he}),S.memoizedState=ee,S.childLanes=Ei(s,V,h),c.memoizedState=Uu,x):(ta(c),h=s.child,s=h.sibling,h=Ji(h,{mode:"visible",children:x.children}),h.return=c,h.sibling=null,s!==null&&(V=c.deletions,V===null?(c.deletions=[s],c.flags|=16):V.push(s)),c.child=h,c.memoizedState=null,h)}function Ap(s,c){return c=qu({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function qu(s,c){return s=or(22,s,null,c),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Pp(s,c,h){return bl(c,s.child,null,h),s=Ap(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function Dp(s,c,h){s.lanes|=c;var x=s.alternate;x!==null&&(x.lanes|=c),cr(s.return,c,h)}function Ip(s,c,h,x,S){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:h,tailMode:S}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=x,A.tail=h,A.tailMode=S)}function Jg(s,c,h){var x=c.pendingProps,S=x.revealOrder,A=x.tail;if(Un(s,c,x.children,h),x=ii.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Dp(s,h,c);else if(s.tag===19)Dp(s,h,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}x&=1}switch(M(ii,x),S){case"forwards":for(h=c.child,S=null;h!==null;)s=h.alternate,s!==null&&Lu(s)===null&&(S=h),h=h.sibling;h=S,h===null?(S=c.child,c.child=null):(S=h.sibling,h.sibling=null),Ip(c,!1,S,h,A);break;case"backwards":for(h=null,S=c.child,c.child=null;S!==null;){if(s=S.alternate,s!==null&&Lu(s)===null){c.child=S;break}s=S.sibling,S.sibling=h,h=S,S=s}Ip(c,!0,h,null,A);break;case"together":Ip(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ts(s,c,h){if(s!==null&&(c.dependencies=s.dependencies),bo|=c.lanes,(h&c.childLanes)===0)if(s!==null){if(bu(s,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(i(153));if(c.child!==null){for(s=c.child,h=Ji(s,s.pendingProps),c.child=h,h.return=c;s.sibling!==null;)s=s.sibling,h=h.sibling=Ji(s,s.pendingProps),h.return=c;h.sibling=null}return c.child}function Ea(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&Jd(s)))}function Zi(s,c,h){switch(c.tag){case 3:Ne(c,c.stateNode.containerInfo),Mr(c,Pn,s.memoizedState.cache),xu();break;case 27:case 5:ut(c);break;case 4:Ne(c,c.stateNode.containerInfo);break;case 10:Mr(c,c.type,c.memoizedProps.value);break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(ta(c),c.flags|=128,null):(h&c.child.childLanes)!==0?Qg(s,c,h):(ta(c),s=Ts(s,c,h),s!==null?s.sibling:null);ta(c);break;case 19:var S=(s.flags&128)!==0;if(x=(h&c.childLanes)!==0,x||(bu(s,c,h,!1),x=(h&c.childLanes)!==0),S){if(x)return Jg(s,c,h);c.flags|=128}if(S=c.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),M(ii,ii.current),x)break;return null;case 22:case 23:return c.lanes=0,Bu(s,c,h);case 24:Mr(c,Pn,s.memoizedState.cache)}return Ts(s,c,h)}function jf(s,c,h){if(s!==null)if(s.memoizedProps!==c.pendingProps)ki=!0;else{if(!Ea(s,h)&&(c.flags&128)===0)return ki=!1,Zi(s,c,h);ki=(s.flags&131072)!==0}else ki=!1,Xt&&(c.flags&1048576)!==0&&ep(c,mu,c.index);switch(c.lanes=0,c.tag){case 16:e:{s=c.pendingProps;var x=c.elementType,S=x._init;if(x=S(x._payload),c.type=x,typeof x=="function")al(x)?(s=po(x,s),c.tag=1,c=mo(null,c,x,s,h)):(c.tag=0,c=pc(null,c,x,s,h));else{if(x!=null){if(S=x.$$typeof,S===U){c.tag=11,c=vf(null,c,x,s,h);break e}else if(S===B){c.tag=14,c=wf(null,c,x,s,h);break e}}throw c=ie(x)||x,Error(i(306,c,""))}}return c;case 0:return pc(s,c,c.type,c.pendingProps,h);case 1:return x=c.type,S=po(x,c.pendingProps),mo(s,c,x,S,h);case 3:e:{if(Ne(c,c.stateNode.containerInfo),s===null)throw Error(i(387));x=c.pendingProps;var A=c.memoizedState;S=A.element,lc(s,c),zi(c,x,null,h);var V=c.memoizedState;if(x=V.cache,Mr(c,Pn,x),x!==A.cache&&Gt(c,[Pn],h,!0),_a(),x=V.element,A.isDehydrated)if(A={element:x,isDehydrated:!1,cache:V.cache},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){c=Wg(s,c,x,h);break e}else if(x!==S){S=Qi(Error(i(424)),c),oo(S),c=Wg(s,c,x,h);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Hn=Aa(s.firstChild),yi=c,Xt=!0,Ca=null,lr=!0,h=Bg(c,null,x,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(xu(),x===S){c=Ts(s,c,h);break e}Un(s,c,x,h)}c=c.child}return c;case 26:return wt(s,c),s===null?(h=Gy(c.type,null,c.pendingProps,null))?c.memoizedState=h:Xt||(h=c.type,s=c.pendingProps,x=Cl(ce.current).createElement(h),x[Zn]=c,x[zn]=s,wi(x,h,s),ui(x),c.stateNode=x):c.memoizedState=Gy(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return ut(c),s===null&&Xt&&(x=c.stateNode=qy(c.type,c.pendingProps,ce.current),yi=c,lr=!0,S=Hn,ra(c.type)?(sm=S,Hn=Aa(x.firstChild)):Hn=S),Un(s,c,c.pendingProps.children,h),wt(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&Xt&&((S=x=Hn)&&(x=By(x,c.type,c.pendingProps,lr),x!==null?(c.stateNode=x,yi=c,Hn=Aa(x.firstChild),lr=!1,S=!0):S=!1),S||Xr(c)),ut(c),S=c.type,A=c.pendingProps,V=s!==null?s.memoizedProps:null,x=A.children,Uf(S,A)?x=null:V!==null&&Uf(S,V)&&(c.flags|=32),c.memoizedState!==null&&(S=lp(s,c,cp,null,null,h),Ic._currentValue=S),wt(s,c),Un(s,c,x,h),c.child;case 6:return s===null&&Xt&&((s=h=Hn)&&(h=Vf(h,c.pendingProps,lr),h!==null?(c.stateNode=h,yi=c,Hn=null,s=!0):s=!1),s||Xr(c)),null;case 13:return Qg(s,c,h);case 4:return Ne(c,c.stateNode.containerInfo),x=c.pendingProps,s===null?c.child=bl(c,null,x,h):Un(s,c,x,h),c.child;case 11:return vf(s,c,c.type,c.pendingProps,h);case 7:return Un(s,c,c.pendingProps,h),c.child;case 8:return Un(s,c,c.pendingProps.children,h),c.child;case 12:return Un(s,c,c.pendingProps.children,h),c.child;case 10:return x=c.pendingProps,Mr(c,c.type,x.value),Un(s,c,x.children,h),c.child;case 9:return S=c.type._context,x=c.pendingProps.children,cl(c),S=ni(S),x=x(S),c.flags|=1,Un(s,c,x,h),c.child;case 14:return wf(s,c,c.type,c.pendingProps,h);case 15:return Sf(s,c,c.type,c.pendingProps,h);case 19:return Jg(s,c,h);case 31:return x=c.pendingProps,h=c.mode,x={mode:x.mode,children:x.children},s===null?(h=qu(x,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=Ji(s.child,x),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return Bu(s,c,h);case 24:return cl(c),x=ni(Pn),s===null?(S=Ns(),S===null&&(S=Ln,A=np(),S.pooledCache=A,A.refCount++,A!==null&&(S.pooledCacheLanes|=h),S=A),c.memoizedState={parent:x,cache:S},dl(c),Mr(c,Pn,S)):((s.lanes&h)!==0&&(lc(s,c),zi(c,null,null,h),_a()),S=s.memoizedState,A=c.memoizedState,S.parent!==x?(S={parent:x,cache:x},c.memoizedState=S,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=S),Mr(c,Pn,x)):(x=A.cache,Mr(c,Pn,x),x!==S.cache&&Gt(c,[Pn],h,!0))),Un(s,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function As(s){s.flags|=4}function _f(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Si(c)){if(c=Or.current,c!==null&&((sn&4194048)===sn?Xi!==null:(sn&62914560)!==sn&&(sn&536870912)===0||c!==Xi))throw oc=rp,wg;s.flags|=8192}}function kf(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?Xn():536870912,s.lanes|=c,wc|=c)}function Vu(s,c){if(!Xt)switch(s.tailMode){case"hidden":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:x.sibling=null}}function Dn(s){var c=s.alternate!==null&&s.alternate.child===s.child,h=0,x=0;if(c)for(var S=s.child;S!==null;)h|=S.lanes|S.childLanes,x|=S.subtreeFlags&65011712,x|=S.flags&65011712,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)h|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=x,s.childLanes=h,c}function Kg(s,c,h){var x=c.pendingProps;switch(gu(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(c),null;case 1:return Dn(c),null;case 3:return h=c.stateNode,x=null,s!==null&&(x=s.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),Zr(Pn),nt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(yu(c)?As(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,gg())),Dn(c),null;case 26:return h=c.memoizedState,s===null?(As(c),h!==null?(Dn(c),_f(c,h)):(Dn(c),c.flags&=-16777217)):h?h!==s.memoizedState?(As(c),Dn(c),_f(c,h)):(Dn(c),c.flags&=-16777217):(s.memoizedProps!==x&&As(c),Dn(c),c.flags&=-16777217),null;case 27:je(c),h=ce.current;var S=c.type;if(s!==null&&c.stateNode!=null)s.memoizedProps!==x&&As(c);else{if(!x){if(c.stateNode===null)throw Error(i(166));return Dn(c),null}s=fe.current,yu(c)?pg(c):(s=qy(S,x,h),c.stateNode=s,As(c))}return Dn(c),null;case 5:if(je(c),h=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==x&&As(c);else{if(!x){if(c.stateNode===null)throw Error(i(166));return Dn(c),null}if(s=fe.current,yu(c))pg(c);else{switch(S=Cl(ce.current),s){case 1:s=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:s=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":s=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":s=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof x.is=="string"?S.createElement("select",{is:x.is}):S.createElement("select"),x.multiple?s.multiple=!0:x.size&&(s.size=x.size);break;default:s=typeof x.is=="string"?S.createElement(h,{is:x.is}):S.createElement(h)}}s[Zn]=c,s[zn]=x;e:for(S=c.child;S!==null;){if(S.tag===5||S.tag===6)s.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===c)break e;for(;S.sibling===null;){if(S.return===null||S.return===c)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}c.stateNode=s;e:switch(wi(s,h,x),h){case"button":case"input":case"select":case"textarea":s=!!x.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&As(c)}}return Dn(c),c.flags&=-16777217,null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==x&&As(c);else{if(typeof x!="string"&&c.stateNode===null)throw Error(i(166));if(s=ce.current,yu(c)){if(s=c.stateNode,h=c.memoizedProps,x=null,S=yi,S!==null)switch(S.tag){case 27:case 5:x=S.memoizedProps}s[Zn]=c,s=!!(s.nodeValue===h||x!==null&&x.suppressHydrationWarning===!0||Ly(s.nodeValue,h)),s||Xr(c)}else s=Cl(s).createTextNode(x),s[Zn]=c,c.stateNode=s}return Dn(c),null;case 13:if(x=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(S=yu(c),x!==null&&x.dehydrated!==null){if(s===null){if(!S)throw Error(i(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(i(317));S[Zn]=c}else xu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Dn(c),S=!1}else S=gg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=S),S=!0;if(!S)return c.flags&256?(Qa(c),c):(Qa(c),null)}if(Qa(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=x!==null,s=s!==null&&s.memoizedState!==null,h){x=c.child,S=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(S=x.alternate.memoizedState.cachePool.pool);var A=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(A=x.memoizedState.cachePool.pool),A!==S&&(x.flags|=2048)}return h!==s&&h&&(c.child.flags|=8192),kf(c,c.updateQueue),Dn(c),null;case 4:return nt(),s===null&&nm(c.stateNode.containerInfo),Dn(c),null;case 10:return Zr(c.type),Dn(c),null;case 19:if(se(ii),S=c.memoizedState,S===null)return Dn(c),null;if(x=(c.flags&128)!==0,A=S.rendering,A===null)if(x)Vu(S,!1);else{if(ri!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(A=Lu(s),A!==null){for(c.flags|=128,Vu(S,!1),s=A.updateQueue,c.updateQueue=s,kf(c,s),c.subtreeFlags=0,s=h,h=c.child;h!==null;)pu(h,s),h=h.sibling;return M(ii,ii.current&1|2),c.child}s=s.sibling}S.tail!==null&&Ke()>Sc&&(c.flags|=128,x=!0,Vu(S,!1),c.lanes=4194304)}else{if(!x)if(s=Lu(A),s!==null){if(c.flags|=128,x=!0,s=s.updateQueue,c.updateQueue=s,kf(c,s),Vu(S,!0),S.tail===null&&S.tailMode==="hidden"&&!A.alternate&&!Xt)return Dn(c),null}else 2*Ke()-S.renderingStartTime>Sc&&h!==536870912&&(c.flags|=128,x=!0,Vu(S,!1),c.lanes=4194304);S.isBackwards?(A.sibling=c.child,c.child=A):(s=S.last,s!==null?s.sibling=A:c.child=A,S.last=A)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=Ke(),c.sibling=null,s=ii.current,M(ii,x?s&1|2:s&1),c):(Dn(c),null);case 22:case 23:return Qa(c),op(),x=c.memoizedState!==null,s!==null?s.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(h&536870912)!==0&&(c.flags&128)===0&&(Dn(c),c.subtreeFlags&6&&(c.flags|=8192)):Dn(c),h=c.updateQueue,h!==null&&kf(c,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==h&&(c.flags|=2048),s!==null&&se(ul),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),Zr(Pn),Dn(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function Xg(s,c){switch(gu(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return Zr(Pn),nt(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return je(c),null;case 13:if(Qa(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(i(340));xu()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return se(ii),null;case 4:return nt(),null;case 10:return Zr(c.type),null;case 22:case 23:return Qa(c),op(),s!==null&&se(ul),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return Zr(Pn),null;case 25:return null;default:return null}}function Zg(s,c){switch(gu(c),c.tag){case 3:Zr(Pn),nt();break;case 26:case 27:case 5:je(c);break;case 4:nt();break;case 13:Qa(c);break;case 19:se(ii);break;case 10:Zr(c.type);break;case 22:case 23:Qa(c),op(),s!==null&&se(ul);break;case 24:Zr(Pn)}}function Hu(s,c){try{var h=c.updateQueue,x=h!==null?h.lastEffect:null;if(x!==null){var S=x.next;h=S;do{if((h.tag&s)===s){x=void 0;var A=h.create,V=h.inst;x=A(),V.destroy=x}h=h.next}while(h!==S)}}catch(ee){In(c,c.return,ee)}}function go(s,c,h){try{var x=c.updateQueue,S=x!==null?x.lastEffect:null;if(S!==null){var A=S.next;x=A;do{if((x.tag&s)===s){var V=x.inst,ee=V.destroy;if(ee!==void 0){V.destroy=void 0,S=c;var he=h,Pe=ee;try{Pe()}catch(He){In(S,he,He)}}}x=x.next}while(x!==A)}}catch(He){In(c,c.return,He)}}function ey(s){var c=s.updateQueue;if(c!==null){var h=s.stateNode;try{sp(c,h)}catch(x){In(s,s.return,x)}}}function Mp(s,c,h){h.props=po(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(x){In(s,c,x)}}function mc(s,c){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var x=s.stateNode;break;case 30:x=s.stateNode;break;default:x=s.stateNode}typeof h=="function"?s.refCleanup=h(x):h.current=x}}catch(S){In(s,c,S)}}function Ka(s,c){var h=s.ref,x=s.refCleanup;if(h!==null)if(typeof x=="function")try{x()}catch(S){In(s,c,S)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(S){In(s,c,S)}else h.current=null}function Ef(s){var c=s.type,h=s.memoizedProps,x=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&x.focus();break e;case"img":h.src?x.src=h.src:h.srcSet&&(x.srcset=h.srcSet)}}catch(S){In(s,s.return,S)}}function Tf(s,c,h){try{var x=s.stateNode;gv(x,s.type,h,c),x[zn]=c}catch(S){In(s,s.return,S)}}function gc(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ra(s.type)||s.tag===4}function Gu(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||gc(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ra(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Af(s,c,h){var x=s.tag;if(x===5||x===6)s=s.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(s),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=zf));else if(x!==4&&(x===27&&ra(s.type)&&(h=s.stateNode,c=null),s=s.child,s!==null))for(Af(s,c,h),s=s.sibling;s!==null;)Af(s,c,h),s=s.sibling}function Yu(s,c,h){var x=s.tag;if(x===5||x===6)s=s.stateNode,c?h.insertBefore(s,c):h.appendChild(s);else if(x!==4&&(x===27&&ra(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(Yu(s,c,h),s=s.sibling;s!==null;)Yu(s,c,h),s=s.sibling}function Wu(s){var c=s.stateNode,h=s.memoizedProps;try{for(var x=s.type,S=c.attributes;S.length;)c.removeAttributeNode(S[0]);wi(c,x,h),c[Zn]=s,c[zn]=h}catch(A){In(s,s.return,A)}}var Xa=!1,xn=!1,Ps=!1,ty=typeof WeakSet=="function"?WeakSet:Set,bi=null;function nv(s,c){if(s=s.containerInfo,Ta=Wf,s=le(s),xe(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var x=h.getSelection&&h.getSelection();if(x&&x.rangeCount!==0){h=x.anchorNode;var S=x.anchorOffset,A=x.focusNode;x=x.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break e}var V=0,ee=-1,he=-1,Pe=0,He=0,Qe=s,Oe=null;t:for(;;){for(var Ie;Qe!==h||S!==0&&Qe.nodeType!==3||(ee=V+S),Qe!==A||x!==0&&Qe.nodeType!==3||(he=V+x),Qe.nodeType===3&&(V+=Qe.nodeValue.length),(Ie=Qe.firstChild)!==null;)Oe=Qe,Qe=Ie;for(;;){if(Qe===s)break t;if(Oe===h&&++Pe===S&&(ee=V),Oe===A&&++He===x&&(he=V),(Ie=Qe.nextSibling)!==null)break;Qe=Oe,Oe=Qe.parentNode}Qe=Ie}h=ee===-1||he===-1?null:{start:ee,end:he}}else h=null}h=h||{start:0,end:0}}else h=null;for(Bf={focusedElem:s,selectionRange:h},Wf=!1,bi=c;bi!==null;)if(c=bi,s=c.child,(c.subtreeFlags&1024)!==0&&s!==null)s.return=c,bi=s;else for(;bi!==null;){switch(c=bi,A=c.alternate,s=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&A!==null){s=void 0,h=c,S=A.memoizedProps,A=A.memoizedState,x=h.stateNode;try{var kt=po(h.type,S,h.elementType===h.type);s=x.getSnapshotBeforeUpdate(kt,A),x.__reactInternalSnapshotBeforeUpdate=s}catch(Ct){In(h,h.return,Ct)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,h=s.nodeType,h===9)am(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":am(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=c.sibling,s!==null){s.return=c.return,bi=s;break}bi=c.return}}function ny(s,c,h){var x=h.flags;switch(h.tag){case 0:case 11:case 15:yo(s,h),x&4&&Hu(5,h);break;case 1:if(yo(s,h),x&4)if(s=h.stateNode,c===null)try{s.componentDidMount()}catch(V){In(h,h.return,V)}else{var S=po(h.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(S,c,s.__reactInternalSnapshotBeforeUpdate)}catch(V){In(h,h.return,V)}}x&64&&ey(h),x&512&&mc(h,h.return);break;case 3:if(yo(s,h),x&64&&(s=h.updateQueue,s!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{sp(s,c)}catch(V){In(h,h.return,V)}}break;case 27:c===null&&x&4&&Wu(h);case 26:case 5:yo(s,h),c===null&&x&4&&Ef(h),x&512&&mc(h,h.return);break;case 12:yo(s,h);break;case 13:yo(s,h),x&4&&ay(s,h),x&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=Rf.bind(null,h),Ec(s,h))));break;case 22:if(x=h.memoizedState!==null||Xa,!x){c=c!==null&&c.memoizedState!==null||xn,S=Xa;var A=xn;Xa=x,(xn=c)&&!A?Is(s,h,(h.subtreeFlags&8772)!==0):yo(s,h),Xa=S,xn=A}break;case 30:break;default:yo(s,h)}}function iy(s){var c=s.alternate;c!==null&&(s.alternate=null,iy(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&Jc(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Gn=null,pr=!1;function Ds(s,c,h){for(h=h.child;h!==null;)ry(s,c,h),h=h.sibling}function ry(s,c,h){if(K&&typeof K.onCommitFiberUnmount=="function")try{K.onCommitFiberUnmount(G,h)}catch{}switch(h.tag){case 26:xn||Ka(h,c),Ds(s,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:xn||Ka(h,c);var x=Gn,S=pr;ra(h.type)&&(Gn=h.stateNode,pr=!1),Ds(s,c,h),ad(h.stateNode),Gn=x,pr=S;break;case 5:xn||Ka(h,c);case 6:if(x=Gn,S=pr,Gn=null,Ds(s,c,h),Gn=x,pr=S,Gn!==null)if(pr)try{(Gn.nodeType===9?Gn.body:Gn.nodeName==="HTML"?Gn.ownerDocument.body:Gn).removeChild(h.stateNode)}catch(A){In(h,c,A)}else try{Gn.removeChild(h.stateNode)}catch(A){In(h,c,A)}break;case 18:Gn!==null&&(pr?(s=Gn,qf(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),hd(s)):qf(Gn,h.stateNode));break;case 4:x=Gn,S=pr,Gn=h.stateNode.containerInfo,pr=!0,Ds(s,c,h),Gn=x,pr=S;break;case 0:case 11:case 14:case 15:xn||go(2,h,c),xn||go(4,h,c),Ds(s,c,h);break;case 1:xn||(Ka(h,c),x=h.stateNode,typeof x.componentWillUnmount=="function"&&Mp(h,c,x)),Ds(s,c,h);break;case 21:Ds(s,c,h);break;case 22:xn=(x=xn)||h.memoizedState!==null,Ds(s,c,h),xn=x;break;default:Ds(s,c,h)}}function ay(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{hd(s)}catch(h){In(c,c.return,h)}}function iv(s){switch(s.tag){case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new ty),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new ty),c;default:throw Error(i(435,s.tag))}}function Rp(s,c){var h=iv(s);c.forEach(function(x){var S=cv.bind(null,s,x);h.has(x)||(h.add(x),x.then(S,S))})}function Lr(s,c){var h=c.deletions;if(h!==null)for(var x=0;x<h.length;x++){var S=h[x],A=s,V=c,ee=V;e:for(;ee!==null;){switch(ee.tag){case 27:if(ra(ee.type)){Gn=ee.stateNode,pr=!1;break e}break;case 5:Gn=ee.stateNode,pr=!1;break e;case 3:case 4:Gn=ee.stateNode.containerInfo,pr=!0;break e}ee=ee.return}if(Gn===null)throw Error(i(160));ry(A,V,S),Gn=null,pr=!1,A=S.alternate,A!==null&&(A.return=null),S.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)Op(c,s),c=c.sibling}var na=null;function Op(s,c){var h=s.alternate,x=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Lr(c,s),mr(s),x&4&&(go(3,s,s.return),Hu(3,s),go(5,s,s.return));break;case 1:Lr(c,s),mr(s),x&512&&(xn||h===null||Ka(h,h.return)),x&64&&Xa&&(s=s.updateQueue,s!==null&&(x=s.callbacks,x!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?x:h.concat(x))));break;case 26:var S=na;if(Lr(c,s),mr(s),x&512&&(xn||h===null||Ka(h,h.return)),x&4){var A=h!==null?h.memoizedState:null;if(x=s.memoizedState,h===null)if(x===null)if(s.stateNode===null){e:{x=s.type,h=s.memoizedProps,S=S.ownerDocument||S;t:switch(x){case"title":A=S.getElementsByTagName("title")[0],(!A||A[ds]||A[Zn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=S.createElement(x),S.head.insertBefore(A,S.querySelector("head > title"))),wi(A,x,h),A[Zn]=s,ui(A),x=A;break e;case"link":var V=Qy("link","href",S).get(x+(h.href||""));if(V){for(var ee=0;ee<V.length;ee++)if(A=V[ee],A.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&A.getAttribute("rel")===(h.rel==null?null:h.rel)&&A.getAttribute("title")===(h.title==null?null:h.title)&&A.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){V.splice(ee,1);break t}}A=S.createElement(x),wi(A,x,h),S.head.appendChild(A);break;case"meta":if(V=Qy("meta","content",S).get(x+(h.content||""))){for(ee=0;ee<V.length;ee++)if(A=V[ee],A.getAttribute("content")===(h.content==null?null:""+h.content)&&A.getAttribute("name")===(h.name==null?null:h.name)&&A.getAttribute("property")===(h.property==null?null:h.property)&&A.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&A.getAttribute("charset")===(h.charSet==null?null:h.charSet)){V.splice(ee,1);break t}}A=S.createElement(x),wi(A,x,h),S.head.appendChild(A);break;default:throw Error(i(468,x))}A[Zn]=s,ui(A),x=A}s.stateNode=x}else Jy(S,s.type,s.stateNode);else s.stateNode=Wy(S,x,s.memoizedProps);else A!==x?(A===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):A.count--,x===null?Jy(S,s.type,s.stateNode):Wy(S,x,s.memoizedProps)):x===null&&s.stateNode!==null&&Tf(s,s.memoizedProps,h.memoizedProps)}break;case 27:Lr(c,s),mr(s),x&512&&(xn||h===null||Ka(h,h.return)),h!==null&&x&4&&Tf(s,s.memoizedProps,h.memoizedProps);break;case 5:if(Lr(c,s),mr(s),x&512&&(xn||h===null||Ka(h,h.return)),s.flags&32){S=s.stateNode;try{Vr(S,"")}catch(Ie){In(s,s.return,Ie)}}x&4&&s.stateNode!=null&&(S=s.memoizedProps,Tf(s,S,h!==null?h.memoizedProps:S)),x&1024&&(Ps=!0);break;case 6:if(Lr(c,s),mr(s),x&4){if(s.stateNode===null)throw Error(i(162));x=s.memoizedProps,h=s.stateNode;try{h.nodeValue=x}catch(Ie){In(s,s.return,Ie)}}break;case 3:if(Dc=null,S=na,na=Lt(c.containerInfo),Lr(c,s),na=S,mr(s),x&4&&h!==null&&h.memoizedState.isDehydrated)try{hd(c.containerInfo)}catch(Ie){In(s,s.return,Ie)}Ps&&(Ps=!1,sy(s));break;case 4:x=na,na=Lt(s.stateNode.containerInfo),Lr(c,s),mr(s),na=x;break;case 12:Lr(c,s),mr(s);break;case 13:Lr(c,s),mr(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(qp=Ke()),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,Rp(s,x)));break;case 22:S=s.memoizedState!==null;var he=h!==null&&h.memoizedState!==null,Pe=Xa,He=xn;if(Xa=Pe||S,xn=He||he,Lr(c,s),xn=He,Xa=Pe,mr(s),x&8192)e:for(c=s.stateNode,c._visibility=S?c._visibility&-2:c._visibility|1,S&&(h===null||he||Xa||xn||Sl(s)),h=null,c=s;;){if(c.tag===5||c.tag===26){if(h===null){he=h=c;try{if(A=he.stateNode,S)V=A.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{ee=he.stateNode;var Qe=he.memoizedProps.style,Oe=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;ee.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(Ie){In(he,he.return,Ie)}}}else if(c.tag===6){if(h===null){he=c;try{he.stateNode.nodeValue=S?"":he.memoizedProps}catch(Ie){In(he,he.return,Ie)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}x&4&&(x=s.updateQueue,x!==null&&(h=x.retryQueue,h!==null&&(x.retryQueue=null,Rp(s,h))));break;case 19:Lr(c,s),mr(s),x&4&&(x=s.updateQueue,x!==null&&(s.updateQueue=null,Rp(s,x)));break;case 30:break;case 21:break;default:Lr(c,s),mr(s)}}function mr(s){var c=s.flags;if(c&2){try{for(var h,x=s.return;x!==null;){if(gc(x)){h=x;break}x=x.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var S=h.stateNode,A=Gu(s);Yu(s,A,S);break;case 5:var V=h.stateNode;h.flags&32&&(Vr(V,""),h.flags&=-33);var ee=Gu(s);Yu(s,ee,V);break;case 3:case 4:var he=h.stateNode.containerInfo,Pe=Gu(s);Af(s,Pe,he);break;default:throw Error(i(161))}}catch(He){In(s,s.return,He)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function sy(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;sy(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function yo(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)ny(s,c.alternate,c),c=c.sibling}function Sl(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:go(4,c,c.return),Sl(c);break;case 1:Ka(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&Mp(c,c.return,h),Sl(c);break;case 27:ad(c.stateNode);case 26:case 5:Ka(c,c.return),Sl(c);break;case 22:c.memoizedState===null&&Sl(c);break;case 30:Sl(c);break;default:Sl(c)}s=s.sibling}}function Is(s,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,S=s,A=c,V=A.flags;switch(A.tag){case 0:case 11:case 15:Is(S,A,h),Hu(4,A);break;case 1:if(Is(S,A,h),x=A,S=x.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Pe){In(x,x.return,Pe)}if(x=A,S=x.updateQueue,S!==null){var ee=x.stateNode;try{var he=S.shared.hiddenCallbacks;if(he!==null)for(S.shared.hiddenCallbacks=null,S=0;S<he.length;S++)jg(he[S],ee)}catch(Pe){In(x,x.return,Pe)}}h&&V&64&&ey(A),mc(A,A.return);break;case 27:Wu(A);case 26:case 5:Is(S,A,h),h&&x===null&&V&4&&Ef(A),mc(A,A.return);break;case 12:Is(S,A,h);break;case 13:Is(S,A,h),h&&V&4&&ay(S,A);break;case 22:A.memoizedState===null&&Is(S,A,h),mc(A,A.return);break;case 30:break;default:Is(S,A,h)}c=c.sibling}}function Lp(s,c){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&vu(h))}function Fp(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&vu(s))}function Za(s,c,h,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)oy(s,c,h,x),c=c.sibling}function oy(s,c,h,x){var S=c.flags;switch(c.tag){case 0:case 11:case 15:Za(s,c,h,x),S&2048&&Hu(9,c);break;case 1:Za(s,c,h,x);break;case 3:Za(s,c,h,x),S&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&vu(s)));break;case 12:if(S&2048){Za(s,c,h,x),s=c.stateNode;try{var A=c.memoizedProps,V=A.id,ee=A.onPostCommit;typeof ee=="function"&&ee(V,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(he){In(c,c.return,he)}}else Za(s,c,h,x);break;case 13:Za(s,c,h,x);break;case 23:break;case 22:A=c.stateNode,V=c.alternate,c.memoizedState!==null?A._visibility&2?Za(s,c,h,x):Qu(s,c):A._visibility&2?Za(s,c,h,x):(A._visibility|=2,yc(s,c,h,x,(c.subtreeFlags&10256)!==0)),S&2048&&Lp(V,c);break;case 24:Za(s,c,h,x),S&2048&&Fp(c.alternate,c);break;default:Za(s,c,h,x)}}function yc(s,c,h,x,S){for(S=S&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var A=s,V=c,ee=h,he=x,Pe=V.flags;switch(V.tag){case 0:case 11:case 15:yc(A,V,ee,he,S),Hu(8,V);break;case 23:break;case 22:var He=V.stateNode;V.memoizedState!==null?He._visibility&2?yc(A,V,ee,he,S):Qu(A,V):(He._visibility|=2,yc(A,V,ee,he,S)),S&&Pe&2048&&Lp(V.alternate,V);break;case 24:yc(A,V,ee,he,S),S&&Pe&2048&&Fp(V.alternate,V);break;default:yc(A,V,ee,he,S)}c=c.sibling}}function Qu(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=s,x=c,S=x.flags;switch(x.tag){case 22:Qu(h,x),S&2048&&Lp(x.alternate,x);break;case 24:Qu(h,x),S&2048&&Fp(x.alternate,x);break;default:Qu(h,x)}c=c.sibling}}var Ui=8192;function xc(s){if(s.subtreeFlags&Ui)for(s=s.child;s!==null;)ly(s),s=s.sibling}function ly(s){switch(s.tag){case 26:xc(s),s.flags&Ui&&s.memoizedState!==null&&Ev(na,s.memoizedState,s.memoizedProps);break;case 5:xc(s);break;case 3:case 4:var c=na;na=Lt(s.stateNode.containerInfo),xc(s),na=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Ui,Ui=16777216,xc(s),Ui=c):xc(s));break;default:xc(s)}}function cy(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function bc(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var x=c[h];bi=x,dy(x,s)}cy(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)uy(s),s=s.sibling}function uy(s){switch(s.tag){case 0:case 11:case 15:bc(s),s.flags&2048&&go(9,s,s.return);break;case 3:bc(s);break;case 12:bc(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,Pf(s)):bc(s);break;default:bc(s)}}function Pf(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var x=c[h];bi=x,dy(x,s)}cy(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:go(8,c,c.return),Pf(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,Pf(c));break;default:Pf(c)}s=s.sibling}}function dy(s,c){for(;bi!==null;){var h=bi;switch(h.tag){case 0:case 11:case 15:go(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var x=h.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:vu(h.memoizedState.cache)}if(x=h.child,x!==null)x.return=h,bi=x;else e:for(h=s;bi!==null;){x=bi;var S=x.sibling,A=x.return;if(iy(x),x===h){bi=null;break e}if(S!==null){S.return=A,bi=S;break e}bi=A}}}var rv={getCacheForType:function(s){var c=ni(Pn),h=c.data.get(s);return h===void 0&&(h=s(),c.data.set(s,h)),h}},$p=typeof WeakMap=="function"?WeakMap:Map,vn=0,Ln=null,Jt=null,sn=0,wn=0,Fr=null,xo=!1,vc=!1,zp=!1,Ms=0,ri=0,bo=0,Nl=0,Bp=0,ia=0,wc=0,Ju=null,gr=null,Up=!1,qp=0,Sc=1/0,Ku=null,vo=null,Mi=0,wo=null,Nc=null,Cc=0,Vp=0,Hp=null,fy=null,jc=0,Gp=null;function qi(){if((vn&2)!==0&&sn!==0)return sn&-sn;if(Y.T!==null){var s=sc;return s!==0?s:Ff()}return ma()}function hy(){ia===0&&(ia=(sn&536870912)===0||Xt?vt():536870912);var s=Or.current;return s!==null&&(s.flags|=32),ia}function $r(s,c,h){(s===Ln&&(wn===2||wn===9)||s.cancelPendingCommit!==null)&&(_c(s,0),So(s,sn,ia,!1)),_n(s,h),((vn&2)===0||s!==Ln)&&(s===Ln&&((vn&2)===0&&(Nl|=h),ri===4&&So(s,sn,ia,!1)),es(s))}function py(s,c,h){if((vn&6)!==0)throw Error(i(327));var x=!h&&(c&124)===0&&(c&s.expiredLanes)===0||ct(s,c),S=x?ov(s,c):Qp(s,c,!0),A=x;do{if(S===0){vc&&!x&&So(s,c,0,!1);break}else{if(h=s.current.alternate,A&&!av(h)){S=Qp(s,c,!1),A=!1;continue}if(S===2){if(A=c,s.errorRecoveryDisabledLanes&A)var V=0;else V=s.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){c=V;e:{var ee=s;S=Ju;var he=ee.current.memoizedState.isDehydrated;if(he&&(_c(ee,V).flags|=256),V=Qp(ee,V,!1),V!==2){if(zp&&!he){ee.errorRecoveryDisabledLanes|=A,Nl|=A,S=4;break e}A=gr,gr=S,A!==null&&(gr===null?gr=A:gr.push.apply(gr,A))}S=V}if(A=!1,S!==2)continue}}if(S===1){_c(s,0),So(s,c,0,!0);break}e:{switch(x=s,A=S,A){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:So(x,c,ia,!xo);break e;case 2:gr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(S=qp+300-Ke(),10<S)){if(So(x,c,ia,!xo),Fe(x,0,!0)!==0)break e;x.timeoutHandle=Fy(my.bind(null,x,h,gr,Ku,Up,c,ia,Nl,wc,xo,A,2,-0,0),S);break e}my(x,h,gr,Ku,Up,c,ia,Nl,wc,xo,A,0,-0,0)}}break}while(!0);es(s)}function my(s,c,h,x,S,A,V,ee,he,Pe,He,Qe,Oe,Ie){if(s.timeoutHandle=-1,Qe=c.subtreeFlags,(Qe&8192||(Qe&16785408)===16785408)&&(Ti={stylesheets:null,count:0,unsuspend:kv},ly(c),Qe=Tv(),Qe!==null)){s.cancelPendingCommit=Qe(Xu.bind(null,s,c,A,h,x,S,V,ee,he,He,1,Oe,Ie)),So(s,A,V,!Pe);return}Xu(s,c,A,h,x,S,V,ee,he)}function av(s){for(var c=s;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var x=0;x<h.length;x++){var S=h[x],A=S.getSnapshot;S=S.value;try{if(!Wi(A(),S))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function So(s,c,h,x){c&=~Bp,c&=~Nl,s.suspendedLanes|=c,s.pingedLanes&=~c,x&&(s.warmLanes|=c),x=s.expirationTimes;for(var S=c;0<S;){var A=31-Ee(S),V=1<<A;x[A]=-1,S&=~V}h!==0&&un(s,h,c)}function Df(){return(vn&6)===0?(td(0),!1):!0}function Yp(){if(Jt!==null){if(wn===0)var s=Jt.return;else s=Jt,Z=lo=null,nf(s),xi=null,hr=0,s=Jt;for(;s!==null;)Zg(s.alternate,s),s=s.return;Jt=null}}function _c(s,c){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,xv(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),Yp(),Ln=s,Jt=h=Ji(s.current,null),sn=c,wn=0,Fr=null,xo=!1,vc=ct(s,c),zp=!1,wc=ia=Bp=Nl=bo=ri=0,gr=Ju=null,Up=!1,(c&8)!==0&&(c|=c&32);var x=s.entangledLanes;if(x!==0)for(s=s.entanglements,x&=c;0<x;){var S=31-Ee(x),A=1<<S;c|=s[S],x&=~A}return Ms=c,nl(),h}function gy(s,c){Ut=null,Y.H=Ru,c===Ki||c===Zd?(c=Ng(),wn=3):c===wg?(c=Ng(),wn=4):wn=c===Yg?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Fr=c,Jt===null&&(ri=1,zu(s,Qi(c,s.current)))}function yy(){var s=Y.H;return Y.H=Ru,s===null?Ru:s}function xy(){var s=Y.A;return Y.A=rv,s}function Wp(){ri=4,xo||(sn&4194048)!==sn&&Or.current!==null||(vc=!0),(bo&134217727)===0&&(Nl&134217727)===0||Ln===null||So(Ln,sn,ia,!1)}function Qp(s,c,h){var x=vn;vn|=2;var S=yy(),A=xy();(Ln!==s||sn!==c)&&(Ku=null,_c(s,c)),c=!1;var V=ri;e:do try{if(wn!==0&&Jt!==null){var ee=Jt,he=Fr;switch(wn){case 8:Yp(),V=6;break e;case 3:case 2:case 9:case 6:Or.current===null&&(c=!0);var Pe=wn;if(wn=0,Fr=null,kc(s,ee,he,Pe),h&&vc){V=0;break e}break;default:Pe=wn,wn=0,Fr=null,kc(s,ee,he,Pe)}}sv(),V=ri;break}catch(He){gy(s,He)}while(!0);return c&&s.shellSuspendCounter++,Z=lo=null,vn=x,Y.H=S,Y.A=A,Jt===null&&(Ln=null,sn=0,nl()),V}function sv(){for(;Jt!==null;)Jp(Jt)}function ov(s,c){var h=vn;vn|=2;var x=yy(),S=xy();Ln!==s||sn!==c?(Ku=null,Sc=Ke()+500,_c(s,c)):vc=ct(s,c);e:do try{if(wn!==0&&Jt!==null){c=Jt;var A=Fr;t:switch(wn){case 1:wn=0,Fr=null,kc(s,c,A,1);break;case 2:case 9:if(Sg(A)){wn=0,Fr=null,vy(c);break}c=function(){wn!==2&&wn!==9||Ln!==s||(wn=7),es(s)},A.then(c,c);break e;case 3:wn=7;break e;case 4:wn=5;break e;case 7:Sg(A)?(wn=0,Fr=null,vy(c)):(wn=0,Fr=null,kc(s,c,A,7));break;case 5:var V=null;switch(Jt.tag){case 26:V=Jt.memoizedState;case 5:case 27:var ee=Jt;if(!V||Si(V)){wn=0,Fr=null;var he=ee.sibling;if(he!==null)Jt=he;else{var Pe=ee.return;Pe!==null?(Jt=Pe,If(Pe)):Jt=null}break t}}wn=0,Fr=null,kc(s,c,A,5);break;case 6:wn=0,Fr=null,kc(s,c,A,6);break;case 8:Yp(),ri=6;break e;default:throw Error(i(462))}}by();break}catch(He){gy(s,He)}while(!0);return Z=lo=null,Y.H=x,Y.A=S,vn=h,Jt!==null?0:(Ln=null,sn=0,nl(),ri)}function by(){for(;Jt!==null&&!Ve();)Jp(Jt)}function Jp(s){var c=jf(s.alternate,s,Ms);s.memoizedProps=s.pendingProps,c===null?If(s):Jt=c}function vy(s){var c=s,h=c.alternate;switch(c.tag){case 15:case 0:c=Nf(h,c,c.pendingProps,c.type,void 0,sn);break;case 11:c=Nf(h,c,c.pendingProps,c.type.render,c.ref,sn);break;case 5:nf(c);default:Zg(h,c),c=Jt=pu(c,Ms),c=jf(h,c,Ms)}s.memoizedProps=s.pendingProps,c===null?If(s):Jt=c}function kc(s,c,h,x){Z=lo=null,nf(c),xi=null,hr=0;var S=c.return;try{if(Gg(s,S,c,h,sn)){ri=1,zu(s,Qi(h,s.current)),Jt=null;return}}catch(A){if(S!==null)throw Jt=S,A;ri=1,zu(s,Qi(h,s.current)),Jt=null;return}c.flags&32768?(Xt||x===1?s=!0:vc||(sn&536870912)!==0?s=!1:(xo=s=!0,(x===2||x===9||x===3||x===6)&&(x=Or.current,x!==null&&x.tag===13&&(x.flags|=16384))),wy(c,s)):If(c)}function If(s){var c=s;do{if((c.flags&32768)!==0){wy(c,xo);return}s=c.return;var h=Kg(c.alternate,c,Ms);if(h!==null){Jt=h;return}if(c=c.sibling,c!==null){Jt=c;return}Jt=c=s}while(c!==null);ri===0&&(ri=5)}function wy(s,c){do{var h=Xg(s.alternate,s);if(h!==null){h.flags&=32767,Jt=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(s=s.sibling,s!==null)){Jt=s;return}Jt=s=h}while(s!==null);ri=6,Jt=null}function Xu(s,c,h,x,S,A,V,ee,he){s.cancelPendingCommit=null;do Mf();while(Mi!==0);if((vn&6)!==0)throw Error(i(327));if(c!==null){if(c===s.current)throw Error(i(177));if(A=c.lanes|c.childLanes,A|=Xh,yn(s,h,A,V,ee,he),s===Ln&&(Jt=Ln=null,sn=0),Nc=c,wo=s,Cc=h,Vp=A,Hp=S,fy=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Ty(ve,function(){return _y(),null})):(s.callbackNode=null,s.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=Y.T,Y.T=null,S=z.p,z.p=2,V=vn,vn|=4;try{nv(s,c,h)}finally{vn=V,z.p=S,Y.T=x}}Mi=1,Sy(),Ny(),Cy()}}function Sy(){if(Mi===1){Mi=0;var s=wo,c=Nc,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=Y.T,Y.T=null;var x=z.p;z.p=2;var S=vn;vn|=4;try{Op(c,s);var A=Bf,V=le(s.containerInfo),ee=A.focusedElem,he=A.selectionRange;if(V!==ee&&ee&&ee.ownerDocument&&cu(ee.ownerDocument.documentElement,ee)){if(he!==null&&xe(ee)){var Pe=he.start,He=he.end;if(He===void 0&&(He=Pe),"selectionStart"in ee)ee.selectionStart=Pe,ee.selectionEnd=Math.min(He,ee.value.length);else{var Qe=ee.ownerDocument||document,Oe=Qe&&Qe.defaultView||window;if(Oe.getSelection){var Ie=Oe.getSelection(),kt=ee.textContent.length,Ct=Math.min(he.start,kt),En=he.end===void 0?Ct:Math.min(he.end,kt);!Ie.extend&&Ct>En&&(V=En,En=Ct,Ct=V);var _e=ec(ee,Ct),be=ec(ee,En);if(_e&&be&&(Ie.rangeCount!==1||Ie.anchorNode!==_e.node||Ie.anchorOffset!==_e.offset||Ie.focusNode!==be.node||Ie.focusOffset!==be.offset)){var Te=Qe.createRange();Te.setStart(_e.node,_e.offset),Ie.removeAllRanges(),Ct>En?(Ie.addRange(Te),Ie.extend(be.node,be.offset)):(Te.setEnd(be.node,be.offset),Ie.addRange(Te))}}}}for(Qe=[],Ie=ee;Ie=Ie.parentNode;)Ie.nodeType===1&&Qe.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<Qe.length;ee++){var Ge=Qe[ee];Ge.element.scrollLeft=Ge.left,Ge.element.scrollTop=Ge.top}}Wf=!!Ta,Bf=Ta=null}finally{vn=S,z.p=x,Y.T=h}}s.current=c,Mi=2}}function Ny(){if(Mi===2){Mi=0;var s=wo,c=Nc,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=Y.T,Y.T=null;var x=z.p;z.p=2;var S=vn;vn|=4;try{ny(s,c.alternate,c)}finally{vn=S,z.p=x,Y.T=h}}Mi=3}}function Cy(){if(Mi===4||Mi===3){Mi=0,it();var s=wo,c=Nc,h=Cc,x=fy;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Mi=5:(Mi=0,Nc=wo=null,jy(s,s.pendingLanes));var S=s.pendingLanes;if(S===0&&(vo=null),ir(h),c=c.stateNode,K&&typeof K.onCommitFiberRoot=="function")try{K.onCommitFiberRoot(G,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=Y.T,S=z.p,z.p=2,Y.T=null;try{for(var A=s.onRecoverableError,V=0;V<x.length;V++){var ee=x[V];A(ee.value,{componentStack:ee.stack})}}finally{Y.T=c,z.p=S}}(Cc&3)!==0&&Mf(),es(s),S=s.pendingLanes,(h&4194090)!==0&&(S&42)!==0?s===Gp?jc++:(jc=0,Gp=s):jc=0,td(0)}}function jy(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,vu(c)))}function Mf(s){return Sy(),Ny(),Cy(),_y()}function _y(){if(Mi!==5)return!1;var s=wo,c=Vp;Vp=0;var h=ir(Cc),x=Y.T,S=z.p;try{z.p=32>h?32:h,Y.T=null,h=Hp,Hp=null;var A=wo,V=Cc;if(Mi=0,Nc=wo=null,Cc=0,(vn&6)!==0)throw Error(i(331));var ee=vn;if(vn|=4,uy(A.current),oy(A,A.current,V,h),vn=ee,td(0,!1),K&&typeof K.onPostCommitFiberRoot=="function")try{K.onPostCommitFiberRoot(G,A)}catch{}return!0}finally{z.p=S,Y.T=x,jy(s,c)}}function ky(s,c,h){c=Qi(h,c),c=bf(s.stateNode,c,2),s=Cs(s,c,2),s!==null&&(_n(s,2),es(s))}function In(s,c,h){if(s.tag===3)ky(s,s,h);else for(;c!==null;){if(c.tag===3){ky(c,s,h);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(vo===null||!vo.has(x))){s=Qi(h,s),h=Tp(2),x=Cs(c,h,2),x!==null&&(Hg(h,x,c,s),_n(x,2),es(x));break}}c=c.return}}function Kp(s,c,h){var x=s.pingCache;if(x===null){x=s.pingCache=new $p;var S=new Set;x.set(c,S)}else S=x.get(c),S===void 0&&(S=new Set,x.set(c,S));S.has(h)||(zp=!0,S.add(h),s=lv.bind(null,s,c,h),c.then(s,s))}function lv(s,c,h){var x=s.pingCache;x!==null&&x.delete(c),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,Ln===s&&(sn&h)===h&&(ri===4||ri===3&&(sn&62914560)===sn&&300>Ke()-qp?(vn&2)===0&&_c(s,0):Bp|=h,wc===sn&&(wc=0)),es(s)}function Ey(s,c){c===0&&(c=Xn()),s=il(s,c),s!==null&&(_n(s,c),es(s))}function Rf(s){var c=s.memoizedState,h=0;c!==null&&(h=c.retryLane),Ey(s,h)}function cv(s,c){var h=0;switch(s.tag){case 13:var x=s.stateNode,S=s.memoizedState;S!==null&&(h=S.retryLane);break;case 19:x=s.stateNode;break;case 22:x=s.stateNode._retryCache;break;default:throw Error(i(314))}x!==null&&x.delete(c),Ey(s,h)}function Ty(s,c){return Ae(s,c)}var Zu=null,No=null,Of=!1,ed=!1,Lf=!1,Co=0;function es(s){s!==No&&s.next===null&&(No===null?Zu=No=s:No=No.next=s),ed=!0,Of||(Of=!0,Xp())}function td(s,c){if(!Lf&&ed){Lf=!0;do for(var h=!1,x=Zu;x!==null;){if(s!==0){var S=x.pendingLanes;if(S===0)var A=0;else{var V=x.suspendedLanes,ee=x.pingedLanes;A=(1<<31-Ee(42|s)+1)-1,A&=S&~(V&~ee),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(h=!0,Py(x,A))}else A=sn,A=Fe(x,x===Ln?A:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(A&3)===0||ct(x,A)||(h=!0,Py(x,A));x=x.next}while(h);Lf=!1}}function uv(){nd()}function nd(){ed=Of=!1;var s=0;Co!==0&&(yv()&&(s=Co),Co=0);for(var c=Ke(),h=null,x=Zu;x!==null;){var S=x.next,A=id(x,c);A===0?(x.next=null,h===null?Zu=S:h.next=S,S===null&&(No=h)):(h=x,(s!==0||(A&3)!==0)&&(ed=!0)),x=S}td(s)}function id(s,c){for(var h=s.suspendedLanes,x=s.pingedLanes,S=s.expirationTimes,A=s.pendingLanes&-62914561;0<A;){var V=31-Ee(A),ee=1<<V,he=S[V];he===-1?((ee&h)===0||(ee&x)!==0)&&(S[V]=Xe(ee,c)):he<=c&&(s.expiredLanes|=ee),A&=~ee}if(c=Ln,h=sn,h=Fe(s,s===c?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x=s.callbackNode,h===0||s===c&&(wn===2||wn===9)||s.cancelPendingCommit!==null)return x!==null&&x!==null&&De(x),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||ct(s,h)){if(c=h&-h,c===s.callbackPriority)return c;switch(x!==null&&De(x),ir(h)){case 2:case 8:h=_t;break;case 32:h=ve;break;case 268435456:h=We;break;default:h=ve}return x=Ay.bind(null,s),h=Ae(h,x),s.callbackPriority=c,s.callbackNode=h,c}return x!==null&&x!==null&&De(x),s.callbackPriority=2,s.callbackNode=null,2}function Ay(s,c){if(Mi!==0&&Mi!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(Mf()&&s.callbackNode!==h)return null;var x=sn;return x=Fe(s,s===Ln?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),x===0?null:(py(s,x,c),id(s,Ke()),s.callbackNode!=null&&s.callbackNode===h?Ay.bind(null,s):null)}function Py(s,c){if(Mf())return null;py(s,c,!0)}function Xp(){bv(function(){(vn&6)!==0?Ae(Ft,uv):nd()})}function Ff(){return Co===0&&(Co=vt()),Co}function Dy(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ps(""+s)}function Iy(s,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,s.id&&h.setAttribute("form",s.id),c.parentNode.insertBefore(h,c),s=new FormData(s),h.parentNode.removeChild(h),s}function dv(s,c,h,x,S){if(c==="submit"&&h&&h.stateNode===S){var A=Dy((S[zn]||null).action),V=x.submitter;V&&(c=(c=V[zn]||null)?Dy(c.formAction):V.getAttribute("formAction"),c!==null&&(A=c,V=null));var ee=new Xs("action","action",null,x,S);s.push({event:ee,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Co!==0){var he=V?Iy(S,V):new FormData(S);Iu(h,{pending:!0,data:he,method:S.method,action:A},null,he)}}else typeof A=="function"&&(ee.preventDefault(),he=V?Iy(S,V):new FormData(S),Iu(h,{pending:!0,data:he,method:S.method,action:A},A,he))},currentTarget:S}]})}}for(var Zp=0;Zp<mn.length;Zp++){var em=mn[Zp],fv=em.toLowerCase(),hv=em[0].toUpperCase()+em.slice(1);Sa(fv,"on"+hv)}Sa(Hd,"onAnimationEnd"),Sa(hg,"onAnimationIteration"),Sa(Ir,"onAnimationStart"),Sa("dblclick","onDoubleClick"),Sa("focusin","onFocus"),Sa("focusout","onBlur"),Sa(Gd,"onTransitionRun"),Sa(Qb,"onTransitionStart"),Sa(tc,"onTransitionCancel"),Sa(uu,"onTransitionEnd"),Ba("onMouseEnter",["mouseout","mouseover"]),Ba("onMouseLeave",["mouseout","mouseover"]),Ba("onPointerEnter",["pointerout","pointerover"]),Ba("onPointerLeave",["pointerout","pointerover"]),fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fs("onBeforeInput",["compositionend","keypress","textInput","paste"]),fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rd));function My(s,c){c=(c&4)!==0;for(var h=0;h<s.length;h++){var x=s[h],S=x.event;x=x.listeners;e:{var A=void 0;if(c)for(var V=x.length-1;0<=V;V--){var ee=x[V],he=ee.instance,Pe=ee.currentTarget;if(ee=ee.listener,he!==A&&S.isPropagationStopped())break e;A=ee,S.currentTarget=Pe;try{A(S)}catch(He){vl(He)}S.currentTarget=null,A=he}else for(V=0;V<x.length;V++){if(ee=x[V],he=ee.instance,Pe=ee.currentTarget,ee=ee.listener,he!==A&&S.isPropagationStopped())break e;A=ee,S.currentTarget=Pe;try{A(S)}catch(He){vl(He)}S.currentTarget=null,A=he}}}}function Kt(s,c){var h=c[us];h===void 0&&(h=c[us]=new Set);var x=s+"__bubble";h.has(x)||(Ry(c,s,2,!1),h.add(x))}function tm(s,c,h){var x=0;c&&(x|=4),Ry(h,s,x,c)}var yr="_reactListening"+Math.random().toString(36).slice(2);function nm(s){if(!s[yr]){s[yr]=!0,Rd.forEach(function(h){h!=="selectionchange"&&(pv.has(h)||tm(h,!1,s),tm(h,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[yr]||(c[yr]=!0,tm("selectionchange",!1,c))}}function Ry(s,c,h,x){switch(ex(c)){case 2:var S=Dv;break;case 8:S=Mc;break;default:S=fm}h=S.bind(null,c,h,s),S=void 0,!ys||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(S=!0),x?S!==void 0?s.addEventListener(c,h,{capture:!0,passive:S}):s.addEventListener(c,h,!0):S!==void 0?s.addEventListener(c,h,{passive:S}):s.addEventListener(c,h,!1)}function Rs(s,c,h,x,S){var A=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var V=x.tag;if(V===3||V===4){var ee=x.stateNode.containerInfo;if(ee===S)break;if(V===4)for(V=x.return;V!==null;){var he=V.tag;if((he===3||he===4)&&V.stateNode.containerInfo===S)return;V=V.return}for(;ee!==null;){if(V=Vs(ee),V===null)return;if(he=V.tag,he===5||he===6||he===26||he===27){x=A=V;continue e}ee=ee.parentNode}}x=x.return}Xo(function(){var Pe=A,He=Ko(h),Qe=[];e:{var Oe=du.get(s);if(Oe!==void 0){var Ie=Xs,kt=s;switch(s){case"keypress":if(hn(h)===0)break e;case"keydown":case"keyup":Ie=nu;break;case"focusin":kt="focus",Ie=Zs;break;case"focusout":kt="blur",Ie=Zs;break;case"beforeblur":case"afterblur":Ie=Zs;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=Gr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=bs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Vh;break;case Hd:case hg:case Ir:Ie=Fd;break;case uu:Ie=Hh;break;case"scroll":case"scrollend":Ie=Zo;break;case"wheel":Ie=Gh;break;case"copy":case"cut":case"paste":Ie=eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=ba;break;case"toggle":case"beforetoggle":Ie=Pr}var Ct=(c&4)!==0,En=!Ct&&(s==="scroll"||s==="scrollend"),_e=Ct?Oe!==null?Oe+"Capture":null:Oe;Ct=[];for(var be=Pe,Te;be!==null;){var Ge=be;if(Te=Ge.stateNode,Ge=Ge.tag,Ge!==5&&Ge!==26&&Ge!==27||Te===null||_e===null||(Ge=Js(be,_e),Ge!=null&&Ct.push(Mt(be,Ge,Te))),En)break;be=be.return}0<Ct.length&&(Oe=new Ie(Oe,kt,null,h,He),Qe.push({event:Oe,listeners:Ct}))}}if((c&7)===0){e:{if(Oe=s==="mouseover"||s==="pointerover",Ie=s==="mouseout"||s==="pointerout",Oe&&h!==Er&&(kt=h.relatedTarget||h.fromElement)&&(Vs(kt)||kt[$a]))break e;if((Ie||Oe)&&(Oe=He.window===He?He:(Oe=He.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,Ie?(kt=h.relatedTarget||h.toElement,Ie=Pe,kt=kt?Vs(kt):null,kt!==null&&(En=o(kt),Ct=kt.tag,kt!==En||Ct!==5&&Ct!==27&&Ct!==6)&&(kt=null)):(Ie=null,kt=Pe),Ie!==kt)){if(Ct=Gr,Ge="onMouseLeave",_e="onMouseEnter",be="mouse",(s==="pointerout"||s==="pointerover")&&(Ct=ba,Ge="onPointerLeave",_e="onPointerEnter",be="pointer"),En=Ie==null?Oe:za(Ie),Te=kt==null?Oe:za(kt),Oe=new Ct(Ge,be+"leave",Ie,h,He),Oe.target=En,Oe.relatedTarget=Te,Ge=null,Vs(He)===Pe&&(Ct=new Ct(_e,be+"enter",kt,h,He),Ct.target=Te,Ct.relatedTarget=En,Ge=Ct),En=Ge,Ie&&kt)t:{for(Ct=Ie,_e=kt,be=0,Te=Ct;Te;Te=vi(Te))be++;for(Te=0,Ge=_e;Ge;Ge=vi(Ge))Te++;for(;0<be-Te;)Ct=vi(Ct),be--;for(;0<Te-be;)_e=vi(_e),Te--;for(;be--;){if(Ct===_e||_e!==null&&Ct===_e.alternate)break t;Ct=vi(Ct),_e=vi(_e)}Ct=null}else Ct=null;Ie!==null&&ai(Qe,Oe,Ie,Ct,!1),kt!==null&&En!==null&&ai(Qe,En,kt,Ct,!0)}}e:{if(Oe=Pe?za(Pe):window,Ie=Oe.nodeName&&Oe.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&Oe.type==="file")var mt=Bd;else if(Kl(Oe))if(Ud)mt=Qh;else{mt=Ga;var Yt=Vd}else Ie=Oe.nodeName,!Ie||Ie.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?Pe&&Jo(Pe.elementType)&&(mt=Bd):mt=Zl;if(mt&&(mt=mt(s,Pe))){io(Qe,mt,h,He);break e}Yt&&Yt(s,Oe,Pe),s==="focusout"&&Pe&&Oe.type==="number"&&Pe.memoizedProps.value!=null&&qa(Oe,"number",Oe.value)}switch(Yt=Pe?za(Pe):window,s){case"focusin":(Kl(Yt)||Yt.contentEditable==="true")&&(Me=Yt,tt=Pe,ue=null);break;case"focusout":ue=tt=Me=null;break;case"mousedown":Re=!0;break;case"contextmenu":case"mouseup":case"dragend":Re=!1,Ce(Qe,h,He);break;case"selectionchange":if(me)break;case"keydown":case"keyup":Ce(Qe,h,He)}var bt;if(Wl)e:{switch(s){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else wa?su(s,h)&&(Et="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Et="onCompositionStart");Et&&(tl&&h.locale!=="ko"&&(wa||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&wa&&(bt=Ul()):(Ar=He,tu="value"in Ar?Ar.value:Ar.textContent,wa=!0)),Yt=$f(Pe,Et),0<Yt.length&&(Et=new gi(Et,s,null,h,He),Qe.push({event:Et,listeners:Yt}),bt?Et.data=bt:(bt=Jl(h),bt!==null&&(Et.data=bt)))),(bt=au?Yh(s,h):zd(s,h))&&(Et=$f(Pe,"onBeforeInput"),0<Et.length&&(Yt=new gi("onBeforeInput","beforeinput",null,h,He),Qe.push({event:Yt,listeners:Et}),Yt.data=bt)),dv(Qe,s,Pe,h,He)}My(Qe,c)})}function Mt(s,c,h){return{instance:s,listener:c,currentTarget:h}}function $f(s,c){for(var h=c+"Capture",x=[];s!==null;){var S=s,A=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||A===null||(S=Js(s,h),S!=null&&x.unshift(Mt(s,S,A)),S=Js(s,c),S!=null&&x.push(Mt(s,S,A))),s.tag===3)return x;s=s.return}return[]}function vi(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ai(s,c,h,x,S){for(var A=c._reactName,V=[];h!==null&&h!==x;){var ee=h,he=ee.alternate,Pe=ee.stateNode;if(ee=ee.tag,he!==null&&he===x)break;ee!==5&&ee!==26&&ee!==27||Pe===null||(he=Pe,S?(Pe=Js(h,A),Pe!=null&&V.unshift(Mt(h,Pe,he))):S||(Pe=Js(h,A),Pe!=null&&V.push(Mt(h,Pe,he)))),h=h.return}V.length!==0&&s.push({event:c,listeners:V})}var mv=/\r\n?/g,jo=/\u0000|\uFFFD/g;function Oy(s){return(typeof s=="string"?s:""+s).replace(mv,`
`).replace(jo,"")}function Ly(s,c){return c=Oy(c),Oy(s)===c}function zf(){}function kn(s,c,h,x,S,A){switch(h){case"children":typeof x=="string"?c==="body"||c==="textarea"&&x===""||Vr(s,x):(typeof x=="number"||typeof x=="bigint")&&c!=="body"&&Vr(s,""+x);break;case"className":qo(s,"class",x);break;case"tabIndex":qo(s,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":qo(s,h,x);break;case"style":Qo(s,x,A);break;case"data":if(c!=="object"){qo(s,"data",x);break}case"src":case"href":if(x===""&&(c!=="a"||h!=="href")){s.removeAttribute(h);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(h);break}x=ps(""+x),s.setAttribute(h,x);break;case"action":case"formAction":if(typeof x=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(h==="formAction"?(c!=="input"&&kn(s,c,"name",S.name,S,null),kn(s,c,"formEncType",S.formEncType,S,null),kn(s,c,"formMethod",S.formMethod,S,null),kn(s,c,"formTarget",S.formTarget,S,null)):(kn(s,c,"encType",S.encType,S,null),kn(s,c,"method",S.method,S,null),kn(s,c,"target",S.target,S,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){s.removeAttribute(h);break}x=ps(""+x),s.setAttribute(h,x);break;case"onClick":x!=null&&(s.onclick=zf);break;case"onScroll":x!=null&&Kt("scroll",s);break;case"onScrollEnd":x!=null&&Kt("scrollend",s);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(h=x.__html,h!=null){if(S.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"multiple":s.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":s.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){s.removeAttribute("xlink:href");break}h=ps(""+x),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(h,""+x):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":x===!0?s.setAttribute(h,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?s.setAttribute(h,x):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?s.setAttribute(h,x):s.removeAttribute(h);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?s.removeAttribute(h):s.setAttribute(h,x);break;case"popover":Kt("beforetoggle",s),Kt("toggle",s),Uo(s,"popover",x);break;case"xlinkActuate":rr(s,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":rr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":rr(s,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":rr(s,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":rr(s,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":rr(s,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":rr(s,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":rr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":rr(s,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Uo(s,"is",x);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=$l.get(h)||h,Uo(s,h,x))}}function im(s,c,h,x,S,A){switch(h){case"style":Qo(s,x,A);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(h=x.__html,h!=null){if(S.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"children":typeof x=="string"?Vr(s,x):(typeof x=="number"||typeof x=="bigint")&&Vr(s,""+x);break;case"onScroll":x!=null&&Kt("scroll",s);break;case"onScrollEnd":x!=null&&Kt("scrollend",s);break;case"onClick":x!=null&&(s.onclick=zf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(S=h.endsWith("Capture"),c=h.slice(2,S?h.length-7:void 0),A=s[zn]||null,A=A!=null?A[h]:null,typeof A=="function"&&s.removeEventListener(c,A,S),typeof x=="function")){typeof A!="function"&&A!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(c,x,S);break e}h in s?s[h]=x:x===!0?s.setAttribute(h,""):Uo(s,h,x)}}}function wi(s,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kt("error",s),Kt("load",s);var x=!1,S=!1,A;for(A in h)if(h.hasOwnProperty(A)){var V=h[A];if(V!=null)switch(A){case"src":x=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:kn(s,c,A,V,h,null)}}S&&kn(s,c,"srcSet",h.srcSet,h,null),x&&kn(s,c,"src",h.src,h,null);return;case"input":Kt("invalid",s);var ee=A=V=S=null,he=null,Pe=null;for(x in h)if(h.hasOwnProperty(x)){var He=h[x];if(He!=null)switch(x){case"name":S=He;break;case"type":V=He;break;case"checked":he=He;break;case"defaultChecked":Pe=He;break;case"value":A=He;break;case"defaultValue":ee=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(i(137,c));break;default:kn(s,c,x,He,h,null)}}Qs(s,A,ee,he,Pe,V,S,!1),Go(s);return;case"select":Kt("invalid",s),x=V=A=null;for(S in h)if(h.hasOwnProperty(S)&&(ee=h[S],ee!=null))switch(S){case"value":A=ee;break;case"defaultValue":V=ee;break;case"multiple":x=ee;default:kn(s,c,S,ee,h,null)}c=A,h=V,s.multiple=!!x,c!=null?ya(s,!!x,c,!1):h!=null&&ya(s,!!x,h,!0);return;case"textarea":Kt("invalid",s),A=S=x=null;for(V in h)if(h.hasOwnProperty(V)&&(ee=h[V],ee!=null))switch(V){case"value":x=ee;break;case"defaultValue":S=ee;break;case"children":A=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(91));break;default:kn(s,c,V,ee,h,null)}hs(s,x,S,A),Go(s);return;case"option":for(he in h)if(h.hasOwnProperty(he)&&(x=h[he],x!=null))switch(he){case"selected":s.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:kn(s,c,he,x,h,null)}return;case"dialog":Kt("beforetoggle",s),Kt("toggle",s),Kt("cancel",s),Kt("close",s);break;case"iframe":case"object":Kt("load",s);break;case"video":case"audio":for(x=0;x<rd.length;x++)Kt(rd[x],s);break;case"image":Kt("error",s),Kt("load",s);break;case"details":Kt("toggle",s);break;case"embed":case"source":case"link":Kt("error",s),Kt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Pe in h)if(h.hasOwnProperty(Pe)&&(x=h[Pe],x!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:kn(s,c,Pe,x,h,null)}return;default:if(Jo(c)){for(He in h)h.hasOwnProperty(He)&&(x=h[He],x!==void 0&&im(s,c,He,x,h,void 0));return}}for(ee in h)h.hasOwnProperty(ee)&&(x=h[ee],x!=null&&kn(s,c,ee,x,h,null))}function gv(s,c,h,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,A=null,V=null,ee=null,he=null,Pe=null,He=null;for(Ie in h){var Qe=h[Ie];if(h.hasOwnProperty(Ie)&&Qe!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":he=Qe;default:x.hasOwnProperty(Ie)||kn(s,c,Ie,null,x,Qe)}}for(var Oe in x){var Ie=x[Oe];if(Qe=h[Oe],x.hasOwnProperty(Oe)&&(Ie!=null||Qe!=null))switch(Oe){case"type":A=Ie;break;case"name":S=Ie;break;case"checked":Pe=Ie;break;case"defaultChecked":He=Ie;break;case"value":V=Ie;break;case"defaultValue":ee=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(i(137,c));break;default:Ie!==Qe&&kn(s,c,Oe,Ie,x,Qe)}}Yo(s,V,ee,he,Pe,He,A,S);return;case"select":Ie=V=ee=Oe=null;for(A in h)if(he=h[A],h.hasOwnProperty(A)&&he!=null)switch(A){case"value":break;case"multiple":Ie=he;default:x.hasOwnProperty(A)||kn(s,c,A,null,x,he)}for(S in x)if(A=x[S],he=h[S],x.hasOwnProperty(S)&&(A!=null||he!=null))switch(S){case"value":Oe=A;break;case"defaultValue":ee=A;break;case"multiple":V=A;default:A!==he&&kn(s,c,S,A,x,he)}c=ee,h=V,x=Ie,Oe!=null?ya(s,!!h,Oe,!1):!!x!=!!h&&(c!=null?ya(s,!!h,c,!0):ya(s,!!h,h?[]:"",!1));return;case"textarea":Ie=Oe=null;for(ee in h)if(S=h[ee],h.hasOwnProperty(ee)&&S!=null&&!x.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:kn(s,c,ee,null,x,S)}for(V in x)if(S=x[V],A=h[V],x.hasOwnProperty(V)&&(S!=null||A!=null))switch(V){case"value":Oe=S;break;case"defaultValue":Ie=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:S!==A&&kn(s,c,V,S,x,A)}Fl(s,Oe,Ie);return;case"option":for(var kt in h)if(Oe=h[kt],h.hasOwnProperty(kt)&&Oe!=null&&!x.hasOwnProperty(kt))switch(kt){case"selected":s.selected=!1;break;default:kn(s,c,kt,null,x,Oe)}for(he in x)if(Oe=x[he],Ie=h[he],x.hasOwnProperty(he)&&Oe!==Ie&&(Oe!=null||Ie!=null))switch(he){case"selected":s.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:kn(s,c,he,Oe,x,Ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in h)Oe=h[Ct],h.hasOwnProperty(Ct)&&Oe!=null&&!x.hasOwnProperty(Ct)&&kn(s,c,Ct,null,x,Oe);for(Pe in x)if(Oe=x[Pe],Ie=h[Pe],x.hasOwnProperty(Pe)&&Oe!==Ie&&(Oe!=null||Ie!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(137,c));break;default:kn(s,c,Pe,Oe,x,Ie)}return;default:if(Jo(c)){for(var En in h)Oe=h[En],h.hasOwnProperty(En)&&Oe!==void 0&&!x.hasOwnProperty(En)&&im(s,c,En,void 0,x,Oe);for(He in x)Oe=x[He],Ie=h[He],!x.hasOwnProperty(He)||Oe===Ie||Oe===void 0&&Ie===void 0||im(s,c,He,Oe,x,Ie);return}}for(var _e in h)Oe=h[_e],h.hasOwnProperty(_e)&&Oe!=null&&!x.hasOwnProperty(_e)&&kn(s,c,_e,null,x,Oe);for(Qe in x)Oe=x[Qe],Ie=h[Qe],!x.hasOwnProperty(Qe)||Oe===Ie||Oe==null&&Ie==null||kn(s,c,Qe,Oe,x,Ie)}var Ta=null,Bf=null;function Cl(s){return s.nodeType===9?s:s.ownerDocument}function Yn(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ei(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function Uf(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var rm=null;function yv(){var s=window.event;return s&&s.type==="popstate"?s===rm?!1:(rm=s,!0):(rm=null,!1)}var Fy=typeof setTimeout=="function"?setTimeout:void 0,xv=typeof clearTimeout=="function"?clearTimeout:void 0,$y=typeof Promise=="function"?Promise:void 0,bv=typeof queueMicrotask=="function"?queueMicrotask:typeof $y<"u"?function(s){return $y.resolve(null).then(s).catch(zy)}:Fy;function zy(s){setTimeout(function(){throw s})}function ra(s){return s==="head"}function qf(s,c){var h=c,x=0,S=0;do{var A=h.nextSibling;if(s.removeChild(h),A&&A.nodeType===8)if(h=A.data,h==="/$"){if(0<x&&8>x){h=x;var V=s.ownerDocument;if(h&1&&ad(V.documentElement),h&2&&ad(V.body),h&4)for(h=V.head,ad(h),V=h.firstChild;V;){var ee=V.nextSibling,he=V.nodeName;V[ds]||he==="SCRIPT"||he==="STYLE"||he==="LINK"&&V.rel.toLowerCase()==="stylesheet"||h.removeChild(V),V=ee}}if(S===0){s.removeChild(A),hd(c);return}S--}else h==="$"||h==="$?"||h==="$!"?S++:x=h.charCodeAt(0)-48;else x=0;h=A}while(h);hd(c)}function am(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":am(h),Jc(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function By(s,c,h,x){for(;s.nodeType===1;){var S=h;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!x&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(x){if(!s[ds])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(A=s.getAttribute("rel"),A==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(A!==S.rel||s.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||s.getAttribute("title")!==(S.title==null?null:S.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(A=s.getAttribute("src"),(A!==(S.src==null?null:S.src)||s.getAttribute("type")!==(S.type==null?null:S.type)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&A&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var A=S.name==null?null:""+S.name;if(S.type==="hidden"&&s.getAttribute("name")===A)return s}else return s;if(s=Aa(s.nextSibling),s===null)break}return null}function Vf(s,c,h){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=Aa(s.nextSibling),s===null))return null;return s}function er(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Ec(s,c){var h=s.ownerDocument;if(s.data!=="$?"||h.readyState==="complete")c();else{var x=function(){c(),h.removeEventListener("DOMContentLoaded",x)};h.addEventListener("DOMContentLoaded",x),s._reactRetry=x}}function Aa(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return s}var sm=null;function Uy(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return s;c--}else h==="/$"&&c++}s=s.previousSibling}return null}function qy(s,c,h){switch(c=Cl(h),s){case"html":if(s=c.documentElement,!s)throw Error(i(452));return s;case"head":if(s=c.head,!s)throw Error(i(453));return s;case"body":if(s=c.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function ad(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Jc(s)}var zr=new Map,ts=new Set;function Lt(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ns=z.d;z.d={f:aa,r:Vy,D:vv,C:Hy,L:Hf,m:wv,X:Nv,S:Sv,M:Cv};function aa(){var s=ns.f(),c=Df();return s||c}function Vy(s){var c=Hs(s);c!==null&&c.tag===5&&c.type==="form"?mf(c):ns.r(s)}var Tc=typeof document>"u"?null:document;function gn(s,c,h){var x=Tc;if(x&&typeof c=="string"&&c){var S=Hi(c);S='link[rel="'+s+'"][href="'+S+'"]',typeof h=="string"&&(S+='[crossorigin="'+h+'"]'),ts.has(S)||(ts.add(S),s={rel:s,crossOrigin:h,href:c},x.querySelector(S)===null&&(c=x.createElement("link"),wi(c,"link",s),ui(c),x.head.appendChild(c)))}}function vv(s){ns.D(s),gn("dns-prefetch",s,null)}function Hy(s,c){ns.C(s,c),gn("preconnect",s,c)}function Hf(s,c,h){ns.L(s,c,h);var x=Tc;if(x&&s&&c){var S='link[rel="preload"][as="'+Hi(c)+'"]';c==="image"&&h&&h.imageSrcSet?(S+='[imagesrcset="'+Hi(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(S+='[imagesizes="'+Hi(h.imageSizes)+'"]')):S+='[href="'+Hi(s)+'"]';var A=S;switch(c){case"style":A=Ac(s);break;case"script":A=Pc(s)}zr.has(A)||(s=p({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:s,as:c},h),zr.set(A,s),x.querySelector(S)!==null||c==="style"&&x.querySelector(sd(A))||c==="script"&&x.querySelector(od(A))||(c=x.createElement("link"),wi(c,"link",s),ui(c),x.head.appendChild(c)))}}function wv(s,c){ns.m(s,c);var h=Tc;if(h&&s){var x=c&&typeof c.as=="string"?c.as:"script",S='link[rel="modulepreload"][as="'+Hi(x)+'"][href="'+Hi(s)+'"]',A=S;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Pc(s)}if(!zr.has(A)&&(s=p({rel:"modulepreload",href:s},c),zr.set(A,s),h.querySelector(S)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(od(A)))return}x=h.createElement("link"),wi(x,"link",s),ui(x),h.head.appendChild(x)}}}function Sv(s,c,h){ns.S(s,c,h);var x=Tc;if(x&&s){var S=Gs(x).hoistableStyles,A=Ac(s);c=c||"default";var V=S.get(A);if(!V){var ee={loading:0,preload:null};if(V=x.querySelector(sd(A)))ee.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":c},h),(h=zr.get(A))&&ld(s,h);var he=V=x.createElement("link");ui(he),wi(he,"link",s),he._p=new Promise(function(Pe,He){he.onload=Pe,he.onerror=He}),he.addEventListener("load",function(){ee.loading|=1}),he.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,Gf(V,c,x)}V={type:"stylesheet",instance:V,count:1,state:ee},S.set(A,V)}}}function Nv(s,c){ns.X(s,c);var h=Tc;if(h&&s){var x=Gs(h).hoistableScripts,S=Pc(s),A=x.get(S);A||(A=h.querySelector(od(S)),A||(s=p({src:s,async:!0},c),(c=zr.get(S))&&om(s,c),A=h.createElement("script"),ui(A),wi(A,"link",s),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},x.set(S,A))}}function Cv(s,c){ns.M(s,c);var h=Tc;if(h&&s){var x=Gs(h).hoistableScripts,S=Pc(s),A=x.get(S);A||(A=h.querySelector(od(S)),A||(s=p({src:s,async:!0,type:"module"},c),(c=zr.get(S))&&om(s,c),A=h.createElement("script"),ui(A),wi(A,"link",s),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},x.set(S,A))}}function Gy(s,c,h,x){var S=(S=ce.current)?Lt(S):null;if(!S)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=Ac(h.href),h=Gs(S).hoistableStyles,x=h.get(c),x||(x={type:"style",instance:null,count:0,state:null},h.set(c,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=Ac(h.href);var A=Gs(S).hoistableStyles,V=A.get(s);if(V||(S=S.ownerDocument||S,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(s,V),(A=S.querySelector(sd(s)))&&!A._p&&(V.instance=A,V.state.loading=5),zr.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},zr.set(s,h),A||jv(S,s,h,V.state))),c&&x===null)throw Error(i(528,""));return V}if(c&&x!==null)throw Error(i(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Pc(h),h=Gs(S).hoistableScripts,x=h.get(c),x||(x={type:"script",instance:null,count:0,state:null},h.set(c,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ac(s){return'href="'+Hi(s)+'"'}function sd(s){return'link[rel="stylesheet"]['+s+"]"}function Yy(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function jv(s,c,h,x){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?x.loading=1:(c=s.createElement("link"),x.preload=c,c.addEventListener("load",function(){return x.loading|=1}),c.addEventListener("error",function(){return x.loading|=2}),wi(c,"link",h),ui(c),s.head.appendChild(c))}function Pc(s){return'[src="'+Hi(s)+'"]'}function od(s){return"script[async]"+s}function Wy(s,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var x=s.querySelector('style[data-href~="'+Hi(h.href)+'"]');if(x)return c.instance=x,ui(x),x;var S=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return x=(s.ownerDocument||s).createElement("style"),ui(x),wi(x,"style",S),Gf(x,h.precedence,s),c.instance=x;case"stylesheet":S=Ac(h.href);var A=s.querySelector(sd(S));if(A)return c.state.loading|=4,c.instance=A,ui(A),A;x=Yy(h),(S=zr.get(S))&&ld(x,S),A=(s.ownerDocument||s).createElement("link"),ui(A);var V=A;return V._p=new Promise(function(ee,he){V.onload=ee,V.onerror=he}),wi(A,"link",x),c.state.loading|=4,Gf(A,h.precedence,s),c.instance=A;case"script":return A=Pc(h.src),(S=s.querySelector(od(A)))?(c.instance=S,ui(S),S):(x=h,(S=zr.get(A))&&(x=p({},h),om(x,S)),s=s.ownerDocument||s,S=s.createElement("script"),ui(S),wi(S,"link",x),s.head.appendChild(S),c.instance=S);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(x=c.instance,c.state.loading|=4,Gf(x,h.precedence,s));return c.instance}function Gf(s,c,h){for(var x=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=x.length?x[x.length-1]:null,A=S,V=0;V<x.length;V++){var ee=x[V];if(ee.dataset.precedence===c)A=ee;else if(A!==S)break}A?A.parentNode.insertBefore(s,A.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(s,c.firstChild))}function ld(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function om(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var Dc=null;function Qy(s,c,h){if(Dc===null){var x=new Map,S=Dc=new Map;S.set(h,x)}else S=Dc,x=S.get(h),x||(x=new Map,S.set(h,x));if(x.has(s))return x;for(x.set(s,null),h=h.getElementsByTagName(s),S=0;S<h.length;S++){var A=h[S];if(!(A[ds]||A[Zn]||s==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var V=A.getAttribute(c)||"";V=s+V;var ee=x.get(V);ee?ee.push(A):x.set(V,[A])}}return x}function Jy(s,c,h){s=s.ownerDocument||s,s.head.insertBefore(h,c==="title"?s.querySelector("head > title"):null)}function _v(s,c,h){if(h===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function Si(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ti=null;function kv(){}function Ev(s,c,h){if(Ti===null)throw Error(i(475));var x=Ti;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var S=Ac(h.href),A=s.querySelector(sd(S));if(A){s=A._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(x.count++,x=cd.bind(x),s.then(x,x)),c.state.loading|=4,c.instance=A,ui(A);return}A=s.ownerDocument||s,h=Yy(h),(S=zr.get(S))&&ld(h,S),A=A.createElement("link"),ui(A);var V=A;V._p=new Promise(function(ee,he){V.onload=ee,V.onerror=he}),wi(A,"link",h),c.instance=A}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(x.count++,c=cd.bind(x),s.addEventListener("load",c),s.addEventListener("error",c))}}function Tv(){if(Ti===null)throw Error(i(475));var s=Ti;return s.stylesheets&&s.count===0&&lm(s,s.stylesheets),0<s.count?function(c){var h=setTimeout(function(){if(s.stylesheets&&lm(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(h)}}:null}function cd(){if(this.count--,this.count===0){if(this.stylesheets)lm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Yf=null;function lm(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Yf=new Map,c.forEach(Av,s),Yf=null,cd.call(s))}function Av(s,c){if(!(c.state.loading&4)){var h=Yf.get(s);if(h)var x=h.get(null);else{h=new Map,Yf.set(s,h);for(var S=s.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<S.length;A++){var V=S[A];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(h.set(V.dataset.precedence,V),x=V)}x&&h.set(null,x)}S=c.instance,V=S.getAttribute("data-precedence"),A=h.get(V)||x,A===x&&h.set(null,S),h.set(V,S),this.count++,x=cd.bind(this),S.addEventListener("load",x),S.addEventListener("error",x),A?A.parentNode.insertBefore(S,A.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(S,s.firstChild)),c.state.loading|=4}}var Ic={$$typeof:D,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Pv(s,c,h,x,S,A,V,ee){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$n(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$n(0),this.hiddenUpdates=$n(null),this.identifierPrefix=x,this.onUncaughtError=S,this.onCaughtError=A,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function Ky(s,c,h,x,S,A,V,ee,he,Pe,He,Qe){return s=new Pv(s,c,h,V,ee,he,Pe,Qe),c=1,A===!0&&(c|=24),A=or(3,null,null,c),s.current=A,A.stateNode=s,c=np(),c.refCount++,s.pooledCache=c,c.refCount++,A.memoizedState={element:x,isDehydrated:h,cache:c},dl(A),s}function Xy(s){return s?(s=rl,s):rl}function cm(s,c,h,x,S,A){S=Xy(S),x.context===null?x.context=S:x.pendingContext=S,x=co(c),x.payload={element:h},A=A===void 0?null:A,A!==null&&(x.callback=A),h=Cs(s,x,c),h!==null&&($r(h,s,c),Su(h,s,c))}function um(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<c?h:c}}function dm(s,c){um(s,c),(s=s.alternate)&&um(s,c)}function Zy(s){if(s.tag===13){var c=il(s,67108864);c!==null&&$r(c,s,67108864),dm(s,67108864)}}var Wf=!0;function Dv(s,c,h,x){var S=Y.T;Y.T=null;var A=z.p;try{z.p=2,fm(s,c,h,x)}finally{z.p=A,Y.T=S}}function Mc(s,c,h,x){var S=Y.T;Y.T=null;var A=z.p;try{z.p=8,fm(s,c,h,x)}finally{z.p=A,Y.T=S}}function fm(s,c,h,x){if(Wf){var S=hm(x);if(S===null)Rs(s,c,x,Qf,h),tx(s,x);else if(Mv(S,s,c,h,x))x.stopPropagation();else if(tx(s,x),c&4&&-1<Iv.indexOf(s)){for(;S!==null;){var A=Hs(S);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var V=Ze(A.pendingLanes);if(V!==0){var ee=A;for(ee.pendingLanes|=2,ee.entangledLanes|=2;V;){var he=1<<31-Ee(V);ee.entanglements[1]|=he,V&=~he}es(A),(vn&6)===0&&(Sc=Ke()+500,td(0))}}break;case 13:ee=il(A,2),ee!==null&&$r(ee,A,2),Df(),dm(A,2)}if(A=hm(x),A===null&&Rs(s,c,x,Qf,h),A===S)break;S=A}S!==null&&x.stopPropagation()}else Rs(s,c,x,null,h)}}function hm(s){return s=Ko(s),pm(s)}var Qf=null;function pm(s){if(Qf=null,s=Vs(s),s!==null){var c=o(s);if(c===null)s=null;else{var h=c.tag;if(h===13){if(s=l(c),s!==null)return s;s=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return Qf=s,null}function ex(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case Ft:return 2;case _t:return 8;case ve:case qe:return 32;case We:return 268435456;default:return 32}default:return 32}}var Jf=!1,Os=null,_o=null,ko=null,ud=new Map,dd=new Map,Eo=[],Iv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tx(s,c){switch(s){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":_o=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":ud.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":dd.delete(c.pointerId)}}function fd(s,c,h,x,S,A){return s===null||s.nativeEvent!==A?(s={blockedOn:c,domEventName:h,eventSystemFlags:x,nativeEvent:A,targetContainers:[S]},c!==null&&(c=Hs(c),c!==null&&Zy(c)),s):(s.eventSystemFlags|=x,c=s.targetContainers,S!==null&&c.indexOf(S)===-1&&c.push(S),s)}function Mv(s,c,h,x,S){switch(c){case"focusin":return Os=fd(Os,s,c,h,x,S),!0;case"dragenter":return _o=fd(_o,s,c,h,x,S),!0;case"mouseover":return ko=fd(ko,s,c,h,x,S),!0;case"pointerover":var A=S.pointerId;return ud.set(A,fd(ud.get(A)||null,s,c,h,x,S)),!0;case"gotpointercapture":return A=S.pointerId,dd.set(A,fd(dd.get(A)||null,s,c,h,x,S)),!0}return!1}function nx(s){var c=Vs(s.target);if(c!==null){var h=o(c);if(h!==null){if(c=h.tag,c===13){if(c=l(h),c!==null){s.blockedOn=c,_r(s.priority,function(){if(h.tag===13){var x=qi();x=Vi(x);var S=il(h,x);S!==null&&$r(S,h,x),dm(h,x)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Kf(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var h=hm(s.nativeEvent);if(h===null){h=s.nativeEvent;var x=new h.constructor(h.type,h);Er=x,h.target.dispatchEvent(x),Er=null}else return c=Hs(h),c!==null&&Zy(c),s.blockedOn=h,!1;c.shift()}return!0}function ix(s,c,h){Kf(s)&&h.delete(c)}function Rv(){Jf=!1,Os!==null&&Kf(Os)&&(Os=null),_o!==null&&Kf(_o)&&(_o=null),ko!==null&&Kf(ko)&&(ko=null),ud.forEach(ix),dd.forEach(ix)}function Xf(s,c){s.blockedOn===c&&(s.blockedOn=null,Jf||(Jf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Rv)))}var Zf=null;function rx(s){Zf!==s&&(Zf=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Zf===s&&(Zf=null);for(var c=0;c<s.length;c+=3){var h=s[c],x=s[c+1],S=s[c+2];if(typeof x!="function"){if(pm(x||h)===null)continue;break}var A=Hs(h);A!==null&&(s.splice(c,3),c-=3,Iu(A,{pending:!0,data:S,method:h.method,action:x},x,S))}}))}function hd(s){function c(he){return Xf(he,s)}Os!==null&&Xf(Os,s),_o!==null&&Xf(_o,s),ko!==null&&Xf(ko,s),ud.forEach(c),dd.forEach(c);for(var h=0;h<Eo.length;h++){var x=Eo[h];x.blockedOn===s&&(x.blockedOn=null)}for(;0<Eo.length&&(h=Eo[0],h.blockedOn===null);)nx(h),h.blockedOn===null&&Eo.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(x=0;x<h.length;x+=3){var S=h[x],A=h[x+1],V=S[zn]||null;if(typeof A=="function")V||rx(h);else if(V){var ee=null;if(A&&A.hasAttribute("formAction")){if(S=A,V=A[zn]||null)ee=V.formAction;else if(pm(S)!==null)continue}else ee=V.action;typeof ee=="function"?h[x+1]=ee:(h.splice(x,3),x-=3),rx(h)}}}function mm(s){this._internalRoot=s}eh.prototype.render=mm.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(i(409));var h=c.current,x=qi();cm(h,x,s,c,null,null)},eh.prototype.unmount=mm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;cm(s.current,2,null,s,null,null),Df(),c[$a]=null}};function eh(s){this._internalRoot=s}eh.prototype.unstable_scheduleHydration=function(s){if(s){var c=ma();s={blockedOn:null,target:s,priority:c};for(var h=0;h<Eo.length&&c!==0&&c<Eo[h].priority;h++);Eo.splice(h,0,s),h===0&&nx(s)}};var ax=n.version;if(ax!=="19.1.0")throw Error(i(527,ax,"19.1.0"));z.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(c),s=s!==null?u(s):null,s=s===null?null:s.stateNode,s};var Ov={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{G=th.inject(Ov),K=th}catch{}}return ym.createRoot=function(s,c){if(!a(s))throw Error(i(299));var h=!1,x="",S=Ep,A=xf,V=Vg,ee=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(V=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(ee=c.unstable_transitionCallbacks)),c=Ky(s,1,!1,null,null,h,x,S,A,V,ee,null),s[$a]=c.current,nm(s),new mm(c)},ym.hydrateRoot=function(s,c,h){if(!a(s))throw Error(i(299));var x=!1,S="",A=Ep,V=xf,ee=Vg,he=null,Pe=null;return h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(V=h.onCaughtError),h.onRecoverableError!==void 0&&(ee=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(he=h.unstable_transitionCallbacks),h.formState!==void 0&&(Pe=h.formState)),c=Ky(s,1,!0,c,h??null,x,S,A,V,ee,he,Pe),c.context=Xy(null),h=c.current,x=qi(),x=Vi(x),S=co(x),S.callback=null,Cs(h,S,x),h=x,c.current.lanes=h,_n(c,h),es(c),s[$a]=c.current,nm(s),new eh(c)},ym.version="19.1.0",ym}var yS;function eP(){if(yS)return Uv.exports;yS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Uv.exports=ZA(),Uv.exports}var tP=eP(),xm={},xS;function nP(){if(xS)return xm;xS=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.parse=l,xm.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function l(b,v){const N=new o,k=b.length;if(k<2)return N;const E=(v==null?void 0:v.decode)||p;let T=0;do{const I=b.indexOf("=",T);if(I===-1)break;const D=b.indexOf(";",T),U=D===-1?k:D;if(I>U){T=b.lastIndexOf(";",I-1)+1;continue}const O=f(b,T,I),$=d(b,I,O),B=b.slice(O,$);if(N[B]===void 0){let q=f(b,I+1,U),H=d(b,U,q);const F=E(b.slice(q,H));N[B]=F}T=U+1}while(T<k);return N}function f(b,v,N){do{const k=b.charCodeAt(v);if(k!==32&&k!==9)return v}while(++v<N);return N}function d(b,v,N){for(;v>N;){const k=b.charCodeAt(--v);if(k!==32&&k!==9)return v+1}return N}function u(b,v,N){const k=(N==null?void 0:N.encode)||encodeURIComponent;if(!e.test(b))throw new TypeError(`argument name is invalid: ${b}`);const E=k(v);if(!n.test(E))throw new TypeError(`argument val is invalid: ${v}`);let T=b+"="+E;if(!N)return T;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);T+="; Max-Age="+N.maxAge}if(N.domain){if(!t.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);T+="; Domain="+N.domain}if(N.path){if(!i.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);T+="; Path="+N.path}if(N.expires){if(!g(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);T+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(T+="; HttpOnly"),N.secure&&(T+="; Secure"),N.partitioned&&(T+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return T}function p(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function g(b){return a.call(b)==="[object Date]"}return xm}nP();var bS="popstate";function iP(e={}){function n(i,a){let{pathname:o,search:l,hash:f}=i.location;return W0("",{pathname:o,search:l,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:qm(a)}return aP(n,t,null,e)}function si(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function $s(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function rP(){return Math.random().toString(36).substring(2,10)}function vS(e,n){return{usr:e.state,key:e.key,idx:n}}function W0(e,n,t=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof n=="string"?Eh(n):n,state:t,key:n&&n.key||i||rP()}}function qm({pathname:e="/",search:n="",hash:t=""}){return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),t&&t!=="#"&&(e+=t.charAt(0)==="#"?t:"#"+t),e}function Eh(e){let n={};if(e){let t=e.indexOf("#");t>=0&&(n.hash=e.substring(t),e=e.substring(0,t));let i=e.indexOf("?");i>=0&&(n.search=e.substring(i),e=e.substring(0,i)),e&&(n.pathname=e)}return n}function aP(e,n,t,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,l=a.history,f="POP",d=null,u=p();u==null&&(u=0,l.replaceState({...l.state,idx:u},""));function p(){return(l.state||{idx:null}).idx}function g(){f="POP";let E=p(),T=E==null?null:E-u;u=E,d&&d({action:f,location:k.location,delta:T})}function b(E,T){f="PUSH";let I=W0(k.location,E,T);u=p()+1;let D=vS(I,u),U=k.createHref(I);try{l.pushState(D,"",U)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(U)}o&&d&&d({action:f,location:k.location,delta:1})}function v(E,T){f="REPLACE";let I=W0(k.location,E,T);u=p();let D=vS(I,u),U=k.createHref(I);l.replaceState(D,"",U),o&&d&&d({action:f,location:k.location,delta:0})}function N(E){return sP(E)}let k={get action(){return f},get location(){return e(a,l)},listen(E){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(bS,g),d=E,()=>{a.removeEventListener(bS,g),d=null}},createHref(E){return n(a,E)},createURL:N,encodeLocation(E){let T=N(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:v,go(E){return l.go(E)}};return k}function sP(e,n=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),si(t,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:qm(e);return i=i.replace(/ $/,"%20"),!n&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function D_(e,n,t="/"){return oP(e,n,t,!1)}function oP(e,n,t,i){let a=typeof n=="string"?Eh(n):n,o=Tl(a.pathname||"/",t);if(o==null)return null;let l=I_(e);lP(l);let f=null;for(let d=0;f==null&&d<l.length;++d){let u=bP(o);f=yP(l[d],u,i)}return f}function I_(e,n=[],t=[],i=""){let a=(o,l,f)=>{let d={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(si(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let u=kl([i,d.relativePath]),p=t.concat(d);o.children&&o.children.length>0&&(si(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),I_(o.children,n,p,u)),!(o.path==null&&!o.index)&&n.push({path:u,score:mP(u,o.index),routesMeta:p})};return e.forEach((o,l)=>{var f;if(o.path===""||!((f=o.path)!=null&&f.includes("?")))a(o,l);else for(let d of M_(o.path))a(o,l,d)}),n}function M_(e){let n=e.split("/");if(n.length===0)return[];let[t,...i]=n,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let l=M_(i.join("/")),f=[];return f.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&f.push(...l),f.map(d=>e.startsWith("/")&&d===""?"/":d)}function lP(e){e.sort((n,t)=>n.score!==t.score?t.score-n.score:gP(n.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var cP=/^:[\w-]+$/,uP=3,dP=2,fP=1,hP=10,pP=-2,wS=e=>e==="*";function mP(e,n){let t=e.split("/"),i=t.length;return t.some(wS)&&(i+=pP),n&&(i+=dP),t.filter(a=>!wS(a)).reduce((a,o)=>a+(cP.test(o)?uP:o===""?fP:hP),i)}function gP(e,n){return e.length===n.length&&e.slice(0,-1).every((i,a)=>i===n[a])?e[e.length-1]-n[n.length-1]:0}function yP(e,n,t=!1){let{routesMeta:i}=e,a={},o="/",l=[];for(let f=0;f<i.length;++f){let d=i[f],u=f===i.length-1,p=o==="/"?n:n.slice(o.length)||"/",g=Vx({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},p),b=d.route;if(!g&&u&&t&&!i[i.length-1].route.index&&(g=Vx({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!g)return null;Object.assign(a,g.params),l.push({params:a,pathname:kl([o,g.pathname]),pathnameBase:NP(kl([o,g.pathnameBase])),route:b}),g.pathnameBase!=="/"&&(o=kl([o,g.pathnameBase]))}return l}function Vx(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,i]=xP(e.path,e.caseSensitive,e.end),a=n.match(t);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((u,{paramName:p,isOptional:g},b)=>{if(p==="*"){let N=f[b]||"";l=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const v=f[b];return g&&!v?u[p]=void 0:u[p]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:l,pattern:e}}function xP(e,n=!1,t=!0){$s(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,d)=>(i.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),i]}function bP(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return $s(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),e}}function Tl(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,i=e.charAt(t);return i&&i!=="/"?null:e.slice(t)||"/"}function vP(e,n="/"){let{pathname:t,search:i="",hash:a=""}=typeof e=="string"?Eh(e):e;return{pathname:t?t.startsWith("/")?t:wP(t,n):n,search:CP(i),hash:jP(a)}}function wP(e,n){let t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Gv(e,n,t,i){return`Cannot include a '${e}' character in a manually specified \`to.${n}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SP(e){return e.filter((n,t)=>t===0||n.route.path&&n.route.path.length>0)}function ew(e){let n=SP(e);return n.map((t,i)=>i===n.length-1?t.pathname:t.pathnameBase)}function tw(e,n,t,i=!1){let a;typeof e=="string"?a=Eh(e):(a={...e},si(!a.pathname||!a.pathname.includes("?"),Gv("?","pathname","search",a)),si(!a.pathname||!a.pathname.includes("#"),Gv("#","pathname","hash",a)),si(!a.search||!a.search.includes("#"),Gv("#","search","hash",a)));let o=e===""||a.pathname==="",l=o?"/":a.pathname,f;if(l==null)f=t;else{let g=n.length-1;if(!i&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),g-=1;a.pathname=b.join("/")}f=g>=0?n[g]:"/"}let d=vP(a,f),u=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(u||p)&&(d.pathname+="/"),d}var kl=e=>e.join("/").replace(/\/\/+/g,"/"),NP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),CP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _P(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var R_=["POST","PUT","PATCH","DELETE"];new Set(R_);var kP=["GET",...R_];new Set(kP);var Th=w.createContext(null);Th.displayName="DataRouter";var vb=w.createContext(null);vb.displayName="DataRouterState";var O_=w.createContext({isTransitioning:!1});O_.displayName="ViewTransition";var EP=w.createContext(new Map);EP.displayName="Fetchers";var TP=w.createContext(null);TP.displayName="Await";var Bs=w.createContext(null);Bs.displayName="Navigation";var eg=w.createContext(null);eg.displayName="Location";var Us=w.createContext({outlet:null,matches:[],isDataRoute:!1});Us.displayName="Route";var nw=w.createContext(null);nw.displayName="RouteError";function AP(e,{relative:n}={}){si(Ah(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=w.useContext(Bs),{hash:a,pathname:o,search:l}=tg(e,{relative:n}),f=o;return t!=="/"&&(f=o==="/"?t:kl([t,o])),i.createHref({pathname:f,search:l,hash:a})}function Ah(){return w.useContext(eg)!=null}function nr(){return si(Ah(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(eg).location}var L_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function F_(e){w.useContext(Bs).static||w.useLayoutEffect(e)}function Nt(){let{isDataRoute:e}=w.useContext(Us);return e?qP():PP()}function PP(){si(Ah(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(Th),{basename:n,navigator:t}=w.useContext(Bs),{matches:i}=w.useContext(Us),{pathname:a}=nr(),o=JSON.stringify(ew(i)),l=w.useRef(!1);return F_(()=>{l.current=!0}),w.useCallback((d,u={})=>{if($s(l.current,L_),!l.current)return;if(typeof d=="number"){t.go(d);return}let p=tw(d,JSON.parse(o),a,u.relative==="path");e==null&&n!=="/"&&(p.pathname=p.pathname==="/"?n:kl([n,p.pathname])),(u.replace?t.replace:t.push)(p,u.state,u)},[n,t,o,a,e])}w.createContext(null);function qr(){let{matches:e}=w.useContext(Us),n=e[e.length-1];return n?n.params:{}}function tg(e,{relative:n}={}){let{matches:t}=w.useContext(Us),{pathname:i}=nr(),a=JSON.stringify(ew(t));return w.useMemo(()=>tw(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function DP(e,n){return $_(e,n)}function $_(e,n,t,i){var I;si(Ah(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=w.useContext(Bs),{matches:l}=w.useContext(Us),f=l[l.length-1],d=f?f.params:{},u=f?f.pathname:"/",p=f?f.pathnameBase:"/",g=f&&f.route;{let D=g&&g.path||"";z_(u,!g||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let b=nr(),v;if(n){let D=typeof n=="string"?Eh(n):n;si(p==="/"||((I=D.pathname)==null?void 0:I.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${D.pathname}" was given in the \`location\` prop.`),v=D}else v=b;let N=v.pathname||"/",k=N;if(p!=="/"){let D=p.replace(/^\//,"").split("/");k="/"+N.replace(/^\//,"").split("/").slice(D.length).join("/")}let E=!o&&t&&t.matches&&t.matches.length>0?t.matches:D_(e,{pathname:k});$s(g||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),$s(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=LP(E&&E.map(D=>Object.assign({},D,{params:Object.assign({},d,D.params),pathname:kl([p,a.encodeLocation?a.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?p:kl([p,a.encodeLocation?a.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),l,t,i);return n&&T?w.createElement(eg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function IP(){let e=UP(),n=_P(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},n),t?w.createElement("pre",{style:a},t):null,l)}var MP=w.createElement(IP,null),RP=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(Us.Provider,{value:this.props.routeContext},w.createElement(nw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function OP({routeContext:e,match:n,children:t}){let i=w.useContext(Th);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Us.Provider,{value:e},t)}function LP(e,n=[],t=null,i=null){if(e==null){if(!t)return null;if(t.errors)e=t.matches;else if(n.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let a=e,o=t==null?void 0:t.errors;if(o!=null){let d=a.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);si(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,f=-1;if(t)for(let d=0;d<a.length;d++){let u=a[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(f=d),u.route.id){let{loaderData:p,errors:g}=t,b=u.route.loader&&!p.hasOwnProperty(u.route.id)&&(!g||g[u.route.id]===void 0);if(u.route.lazy||b){l=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((d,u,p)=>{let g,b=!1,v=null,N=null;t&&(g=o&&u.route.id?o[u.route.id]:void 0,v=u.route.errorElement||MP,l&&(f<0&&p===0?(z_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,N=null):f===p&&(b=!0,N=u.route.hydrateFallbackElement||null)));let k=n.concat(a.slice(0,p+1)),E=()=>{let T;return g?T=v:b?T=N:u.route.Component?T=w.createElement(u.route.Component,null):u.route.element?T=u.route.element:T=d,w.createElement(OP,{match:u,routeContext:{outlet:d,matches:k,isDataRoute:t!=null},children:T})};return t&&(u.route.ErrorBoundary||u.route.errorElement||p===0)?w.createElement(RP,{location:t.location,revalidation:t.revalidation,component:v,error:g,children:E(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):E()},null)}function iw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FP(e){let n=w.useContext(Th);return si(n,iw(e)),n}function $P(e){let n=w.useContext(vb);return si(n,iw(e)),n}function zP(e){let n=w.useContext(Us);return si(n,iw(e)),n}function rw(e){let n=zP(e),t=n.matches[n.matches.length-1];return si(t.route.id,`${e} can only be used on routes that contain a unique "id"`),t.route.id}function BP(){return rw("useRouteId")}function UP(){var i;let e=w.useContext(nw),n=$P("useRouteError"),t=rw("useRouteError");return e!==void 0?e:(i=n.errors)==null?void 0:i[t]}function qP(){let{router:e}=FP("useNavigate"),n=rw("useNavigate"),t=w.useRef(!1);return F_(()=>{t.current=!0}),w.useCallback(async(a,o={})=>{$s(t.current,L_),t.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:n,...o}))},[e,n])}var SS={};function z_(e,n,t){!n&&!SS[e]&&(SS[e]=!0,$s(!1,t))}w.memo(VP);function VP({routes:e,future:n,state:t}){return $_(e,void 0,t,n)}function Sn({to:e,replace:n,state:t,relative:i}){si(Ah(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=w.useContext(Bs);$s(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=w.useContext(Us),{pathname:l}=nr(),f=Nt(),d=tw(e,ew(o),l,i==="path"),u=JSON.stringify(d);return w.useEffect(()=>{f(JSON.parse(u),{replace:n,state:t,relative:i})},[f,u,i,n,t]),null}function ft(e){si(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HP({basename:e="/",children:n=null,location:t,navigationType:i="POP",navigator:a,static:o=!1}){si(!Ah(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),f=w.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof t=="string"&&(t=Eh(t));let{pathname:d="/",search:u="",hash:p="",state:g=null,key:b="default"}=t,v=w.useMemo(()=>{let N=Tl(d,l);return N==null?null:{location:{pathname:N,search:u,hash:p,state:g,key:b},navigationType:i}},[l,d,u,p,g,b,i]);return $s(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:w.createElement(Bs.Provider,{value:f},w.createElement(eg.Provider,{children:n,value:v}))}function uh({children:e,location:n}){return DP(Q0(e),n)}function Q0(e,n=[]){let t=[];return w.Children.forEach(e,(i,a)=>{if(!w.isValidElement(i))return;let o=[...n,a];if(i.type===w.Fragment){t.push.apply(t,Q0(i.props.children,o));return}si(i.type===ft,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),si(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Q0(i.props.children,o)),t.push(l)}),t}var Px="get",Dx="application/x-www-form-urlencoded";function wb(e){return e!=null&&typeof e.tagName=="string"}function GP(e){return wb(e)&&e.tagName.toLowerCase()==="button"}function YP(e){return wb(e)&&e.tagName.toLowerCase()==="form"}function WP(e){return wb(e)&&e.tagName.toLowerCase()==="input"}function QP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function JP(e,n){return e.button===0&&(!n||n==="_self")&&!QP(e)}var sx=null;function KP(){if(sx===null)try{new FormData(document.createElement("form"),0),sx=!1}catch{sx=!0}return sx}var XP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yv(e){return e!=null&&!XP.has(e)?($s(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dx}"`),null):e}function ZP(e,n){let t,i,a,o,l;if(YP(e)){let f=e.getAttribute("action");i=f?Tl(f,n):null,t=e.getAttribute("method")||Px,a=Yv(e.getAttribute("enctype"))||Dx,o=new FormData(e)}else if(GP(e)||WP(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||f.getAttribute("action");if(i=d?Tl(d,n):null,t=e.getAttribute("formmethod")||f.getAttribute("method")||Px,a=Yv(e.getAttribute("formenctype"))||Yv(f.getAttribute("enctype"))||Dx,o=new FormData(f,e),!KP()){let{name:u,type:p,value:g}=e;if(p==="image"){let b=u?`${u}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else u&&o.append(u,g)}}else{if(wb(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Px,i=null,a=Dx,l=e}return o&&a==="text/plain"&&(l=o,o=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:o,body:l}}function aw(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}async function eD(e,n){if(e.id in n)return n[e.id];try{let t=await import(e.module);return n[e.id]=t,t}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tD(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function nD(e,n,t){let i=await Promise.all(e.map(async a=>{let o=n.routes[a.route.id];if(o){let l=await eD(o,t);return l.links?l.links():[]}return[]}));return sD(i.flat(1).filter(tD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function NS(e,n,t,i,a,o){let l=(d,u)=>t[u]?d.route.id!==t[u].route.id:!0,f=(d,u)=>{var p;return t[u].pathname!==d.pathname||((p=t[u].route.path)==null?void 0:p.endsWith("*"))&&t[u].params["*"]!==d.params["*"]};return o==="assets"?n.filter((d,u)=>l(d,u)||f(d,u)):o==="data"?n.filter((d,u)=>{var g;let p=i.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,u)||f(d,u))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function iD(e,n,{includeHydrateFallback:t}={}){return rD(e.map(i=>{let a=n.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function rD(e){return[...new Set(e)]}function aD(e){let n={},t=Object.keys(e).sort();for(let i of t)n[i]=e[i];return n}function sD(e,n){let t=new Set;return new Set(n),e.reduce((i,a)=>{let o=JSON.stringify(aD(a));return t.has(o)||(t.add(o),i.push({key:o,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oD=new Set([100,101,204,205]);function lD(e,n){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":n&&Tl(t.pathname,n)==="/"?t.pathname=`${n.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function B_(){let e=w.useContext(Th);return aw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function cD(){let e=w.useContext(vb);return aw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var sw=w.createContext(void 0);sw.displayName="FrameworkContext";function U_(){let e=w.useContext(sw);return aw(e,"You must render this element inside a <HydratedRouter> element"),e}function uD(e,n){let t=w.useContext(sw),[i,a]=w.useState(!1),[o,l]=w.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:u,onMouseLeave:p,onTouchStart:g}=n,b=w.useRef(null);w.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let k=T=>{T.forEach(I=>{l(I.isIntersecting)})},E=new IntersectionObserver(k,{threshold:.5});return b.current&&E.observe(b.current),()=>{E.disconnect()}}},[e]),w.useEffect(()=>{if(i){let k=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(k)}}},[i]);let v=()=>{a(!0)},N=()=>{a(!1),l(!1)};return t?e!=="intent"?[o,b,{}]:[o,b,{onFocus:bm(f,v),onBlur:bm(d,N),onMouseEnter:bm(u,v),onMouseLeave:bm(p,N),onTouchStart:bm(g,v)}]:[!1,b,{}]}function bm(e,n){return t=>{e&&e(t),t.defaultPrevented||n(t)}}function dD({page:e,...n}){let{router:t}=B_(),i=w.useMemo(()=>D_(t.routes,e,t.basename),[t.routes,e,t.basename]);return i?w.createElement(hD,{page:e,matches:i,...n}):null}function fD(e){let{manifest:n,routeModules:t}=U_(),[i,a]=w.useState([]);return w.useEffect(()=>{let o=!1;return nD(e,n,t).then(l=>{o||a(l)}),()=>{o=!0}},[e,n,t]),i}function hD({page:e,matches:n,...t}){let i=nr(),{manifest:a,routeModules:o}=U_(),{basename:l}=B_(),{loaderData:f,matches:d}=cD(),u=w.useMemo(()=>NS(e,n,d,a,i,"data"),[e,n,d,a,i]),p=w.useMemo(()=>NS(e,n,d,a,i,"assets"),[e,n,d,a,i]),g=w.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let N=new Set,k=!1;if(n.forEach(T=>{var D;let I=a.routes[T.route.id];!I||!I.hasLoader||(!u.some(U=>U.route.id===T.route.id)&&T.route.id in f&&((D=o[T.route.id])!=null&&D.shouldRevalidate)||I.hasClientLoader?k=!0:N.add(T.route.id))}),N.size===0)return[];let E=lD(e,l);return k&&N.size>0&&E.searchParams.set("_routes",n.filter(T=>N.has(T.route.id)).map(T=>T.route.id).join(",")),[E.pathname+E.search]},[l,f,i,a,u,n,e,o]),b=w.useMemo(()=>iD(p,a),[p,a]),v=fD(p);return w.createElement(w.Fragment,null,g.map(N=>w.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),b.map(N=>w.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),v.map(({key:N,link:k})=>w.createElement("link",{key:N,...k})))}function pD(...e){return n=>{e.forEach(t=>{typeof t=="function"?t(n):t!=null&&(t.current=n)})}}var q_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{q_&&(window.__reactRouterVersion="7.6.0")}catch{}function mD({basename:e,children:n,window:t}){let i=w.useRef();i.current==null&&(i.current=iP({window:t,v5Compat:!0}));let a=i.current,[o,l]=w.useState({action:a.action,location:a.location}),f=w.useCallback(d=>{w.startTransition(()=>l(d))},[l]);return w.useLayoutEffect(()=>a.listen(f),[a,f]),w.createElement(HP,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a})}var V_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,os=w.forwardRef(function({onClick:n,discover:t="render",prefetch:i="none",relative:a,reloadDocument:o,replace:l,state:f,target:d,to:u,preventScrollReset:p,viewTransition:g,...b},v){let{basename:N}=w.useContext(Bs),k=typeof u=="string"&&V_.test(u),E,T=!1;if(typeof u=="string"&&k&&(E=u,q_))try{let H=new URL(window.location.href),F=u.startsWith("//")?new URL(H.protocol+u):new URL(u),L=Tl(F.pathname,N);F.origin===H.origin&&L!=null?u=L+F.search+F.hash:T=!0}catch{$s(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=AP(u,{relative:a}),[D,U,O]=uD(i,b),$=bD(u,{replace:l,state:f,target:d,preventScrollReset:p,relative:a,viewTransition:g});function B(H){n&&n(H),H.defaultPrevented||$(H)}let q=w.createElement("a",{...b,...O,href:E||I,onClick:T||o?n:B,ref:pD(v,U),target:d,"data-discover":!k&&t==="render"?"true":void 0});return D&&!k?w.createElement(w.Fragment,null,q,w.createElement(dD,{page:I})):q});os.displayName="Link";var gD=w.forwardRef(function({"aria-current":n="page",caseSensitive:t=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:f,children:d,...u},p){let g=tg(l,{relative:u.relative}),b=nr(),v=w.useContext(vb),{navigator:N,basename:k}=w.useContext(Bs),E=v!=null&&CD(g)&&f===!0,T=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,I=b.pathname,D=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(I=I.toLowerCase(),D=D?D.toLowerCase():null,T=T.toLowerCase()),D&&k&&(D=Tl(D,k)||D);const U=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let O=I===T||!a&&I.startsWith(T)&&I.charAt(U)==="/",$=D!=null&&(D===T||!a&&D.startsWith(T)&&D.charAt(T.length)==="/"),B={isActive:O,isPending:$,isTransitioning:E},q=O?n:void 0,H;typeof i=="function"?H=i(B):H=[i,O?"active":null,$?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(B):o;return w.createElement(os,{...u,"aria-current":q,className:H,ref:p,style:F,to:l,viewTransition:f},typeof d=="function"?d(B):d)});gD.displayName="NavLink";var yD=w.forwardRef(({discover:e="render",fetcherKey:n,navigate:t,reloadDocument:i,replace:a,state:o,method:l=Px,action:f,onSubmit:d,relative:u,preventScrollReset:p,viewTransition:g,...b},v)=>{let N=SD(),k=ND(f,{relative:u}),E=l.toLowerCase()==="get"?"get":"post",T=typeof f=="string"&&V_.test(f),I=D=>{if(d&&d(D),D.defaultPrevented)return;D.preventDefault();let U=D.nativeEvent.submitter,O=(U==null?void 0:U.getAttribute("formmethod"))||l;N(U||D.currentTarget,{fetcherKey:n,method:O,navigate:t,replace:a,state:o,relative:u,preventScrollReset:p,viewTransition:g})};return w.createElement("form",{ref:v,method:E,action:k,onSubmit:i?d:I,...b,"data-discover":!T&&e==="render"?"true":void 0})});yD.displayName="Form";function xD(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H_(e){let n=w.useContext(Th);return si(n,xD(e)),n}function bD(e,{target:n,replace:t,state:i,preventScrollReset:a,relative:o,viewTransition:l}={}){let f=Nt(),d=nr(),u=tg(e,{relative:o});return w.useCallback(p=>{if(JP(p,n)){p.preventDefault();let g=t!==void 0?t:qm(d)===qm(u);f(e,{replace:g,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,f,u,t,i,n,e,a,o,l])}var vD=0,wD=()=>`__${String(++vD)}__`;function SD(){let{router:e}=H_("useSubmit"),{basename:n}=w.useContext(Bs),t=BP();return w.useCallback(async(i,a={})=>{let{action:o,method:l,encType:f,formData:d,body:u}=ZP(i,n);if(a.navigate===!1){let p=a.fetcherKey||wD();await e.fetch(p,t,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:u,formMethod:a.method||l,formEncType:a.encType||f,flushSync:a.flushSync})}else await e.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:u,formMethod:a.method||l,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,n,t])}function ND(e,{relative:n}={}){let{basename:t}=w.useContext(Bs),i=w.useContext(Us);si(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...tg(e||".",{relative:n})},l=nr();if(e==null){o.search=l.search;let f=new URLSearchParams(o.search),d=f.getAll("index");if(d.some(p=>p==="")){f.delete("index"),d.filter(g=>g).forEach(g=>f.append("index",g));let p=f.toString();o.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:kl([t,o.pathname])),qm(o)}function CD(e,n={}){let t=w.useContext(O_);si(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=H_("useViewTransitionState"),a=tg(e,{relative:n.relative});if(!t.isTransitioning)return!1;let o=Tl(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=Tl(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Vx(a.pathname,l)!=null||Vx(a.pathname,o)!=null}[...oD];var jD=P_();class _D extends w.Component{constructor(){super(...arguments);Wn(this,"state",{hasError:!1})}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,i){console.error("Uncaught error:",t,i)}render(){return this.state.hasError?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"5px"},children:[r.jsx("h1",{children:"Something went wrong."}),r.jsx("p",{children:"We are sorry for the inconvenience. Please try again later."})]}):this.props.children}}const kD="https://backend.newtons.in",ED=()=>localStorage.getItem("authToken"),pe=async(e,n={})=>{const t=ED(),i={...n.headers};t&&(i.Authorization=`Bearer ${t}`),!(n.body instanceof FormData)&&!i["Content-Type"]&&(i["Content-Type"]="application/json");const a=i;let o=e.startsWith("/")?e:`/${e}`;o.startsWith("/api/")||(o=`/api${o}`);const l=`${kD}${o}`;try{console.log(`Making API call to: ${l}`);const f=await fetch(l,{...n,headers:a});if(f.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!f.ok){let d=`HTTP error! status: ${f.status}`;try{const u=await f.json();d=(u==null?void 0:u.message)||(u==null?void 0:u.error)||d}catch{}throw console.error(`API Error: ${f.status} ${f.statusText} - ${d}`),new Error(d)}return f}catch(f){throw f instanceof TypeError&&f.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",f):console.error("API Fetch Error:",f),f}},TD=({onLoginSuccess:e})=>{const[n,t]=w.useState(""),[i,a]=w.useState(""),[o,l]=w.useState(null),[f,d]=w.useState(!1),u=Nt(),p=async g=>{g.preventDefault(),d(!0),l(null);try{const b=await pe("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:i})});if(!b.ok){let N=`Login failed with status: ${b.status}`;try{N=(await b.json()).message||N}catch{try{const E=await b.text();E&&(N=`${N} - ${E}`)}catch{}}throw new Error(N)}const v=await b.json();console.log("Login successful:",v),localStorage.setItem("authToken",v.token),localStorage.setItem("currentUser",JSON.stringify(v.user)),v.user.clinic_id&&localStorage.setItem("currentClinicId",v.user.clinic_id),e(v.user),v.user.role==="doctor"?u("/dashboard/queue"):u("/dashboard")}catch(b){console.error("Login failed:",b),l(b.message||"Login failed. Please check your credentials.")}finally{d(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Sign in to Newtons OPD Zero"}),r.jsxs("form",{onSubmit:p,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email address"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:g=>t(g.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Password"}),r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:g=>a(g.target.value),className:"auth-text-input",placeholder:"Password"})]}),o&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:o})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:f,className:"auth-submit-button",children:f?"Signing in...":"Sign In"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",r.jsx(os,{to:"/register",className:"auth-navigation-link",children:"Register a new clinic"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},AD=()=>{const[e,n]=w.useState(""),[t,i]=w.useState(""),[a,o]=w.useState(""),[l,f]=w.useState(""),[d,u]=w.useState(null),[p,g]=w.useState(!1),b=Nt(),v=async N=>{N.preventDefault(),g(!0),u(null);try{const k=await pe("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:e,userName:t,userEmail:a,userPassword:l})}),E=await k.json();if(!k.ok)throw new Error(E.message||`HTTP error! status: ${k.status}`);console.log("Registration successful:",E),alert("Registration successful! Please log in."),b("/login")}catch(k){console.error("Registration failed:",k),u(k.message||"Registration failed. Please try again.")}finally{g(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),r.jsxs("form",{onSubmit:v,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"}),r.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:e,onChange:N=>n(N.target.value),className:"auth-text-input",placeholder:"Your Clinic's Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"}),r.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:t,onChange:N=>i(N.target.value),className:"auth-text-input",placeholder:"Your Full Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userEmail",children:"Your Email (Admin Login)"}),r.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:a,onChange:N=>o(N.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userPassword",children:"Password"}),r.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:l,onChange:N=>f(N.target.value),className:"auth-text-input",placeholder:"Min. 6 characters"})]}),d&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:d})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:p,className:"auth-submit-button",children:p?"Registering...":"Register Clinic & Admin"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",r.jsx(os,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})};var G_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},CS=Rn.createContext&&Rn.createContext(G_),PD=["attr","size","title"];function DD(e,n){if(e==null)return{};var t=ID(e,n),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)i=o[a],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(t[i]=e[i])}return t}function ID(e,n){if(e==null)return{};var t={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(n.indexOf(i)>=0)continue;t[i]=e[i]}return t}function Hx(){return Hx=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hx.apply(this,arguments)}function jS(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,i)}return t}function Gx(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?jS(Object(t),!0).forEach(function(i){MD(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jS(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function MD(e,n,t){return n=RD(n),n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function RD(e){var n=OD(e,"string");return typeof n=="symbol"?n:n+""}function OD(e,n){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var i=t.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Y_(e){return e&&e.map((n,t)=>Rn.createElement(n.tag,Gx({key:t},n.attr),Y_(n.child)))}function cs(e){return n=>Rn.createElement(LD,Hx({attr:Gx({},e.attr)},n),Y_(e.child))}function LD(e){var n=t=>{var{attr:i,size:a,title:o}=e,l=DD(e,PD),f=a||t.size||"1em",d;return t.className&&(d=t.className),e.className&&(d=(d?d+" ":"")+e.className),Rn.createElement("svg",Hx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,l,{className:d,style:Gx(Gx({color:e.color||t.color},t.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),o&&Rn.createElement("title",null,o),e.children)};return CS!==void 0?Rn.createElement(CS.Consumer,null,t=>n(t)):n(G_)}function Wv(e){return cs({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function FD(e){return cs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(e)}function _S(e){return cs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(e)}function dh(e){return cs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function ox(e){return cs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(e)}function lx(e){return cs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(e)}function cx(e){return cs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(e)}function fh(e){return cs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function W_(e){return cs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function kS(e){return cs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(e)}function Qv(e){return cs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(e)}function nh(e){return cs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const Q_={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:dh},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:ox},{path:"/dashboard/users",name:"User Management",icon:nh}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:dh}]},{title:"Staff Management",links:[{path:"/dashboard/staff",name:"Manage Staff",icon:nh},{path:"/dashboard/staff/add",name:"Add Staff",icon:Qv}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:ox},{path:"/dashboard/patients",name:"All Patients",icon:nh},{path:"/dashboard/patients/search",name:"Search Patient",icon:fh}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Inventory Analysis",icon:Wv},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:cx},{path:"/dashboard/inventory/add",name:"Add Drug",icon:cx},{path:"/dashboard/distributors",name:"Distributor Management",icon:nh}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:kS},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:lx},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:lx}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search",name:"Patient Search",icon:fh},{path:"/dashboard/add-patient",name:"Add Patient",icon:ox},{path:"/manage-admission",name:"Manage Admission",icon:Qv}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:_S},{path:"/billing",name:"Billing",icon:lx}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:kS}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Reception Dashboard",icon:dh}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:nh},{path:"/dashboard/patients/add",name:"Add Patient",icon:ox},{path:"/dashboard/patients/search",name:"Search Patient",icon:fh}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:lx},{path:"/manage-admission",name:"Manage Admission",icon:Qv}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:dh},{path:"/lab-inventory",name:"Lab Test Inventory",icon:_S},{path:"/lab/search-report",name:"Search Lab Report",icon:fh}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:dh},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:cx},{path:"/dashboard/inventory/add",name:"Add Drug",icon:cx},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:Wv},{path:"/dashboard/distributors",name:"Distributor Management",icon:nh}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Inventory Analysis",icon:Wv},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:FD},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:fh}]}]},$D=({user:e,onLogout:n,userRole:t,isOpen:i,onClose:a})=>{const o=nr(),[l,f]=w.useState(""),d=Q_[t]||[],[u,p]=w.useState(500),g=w.useRef(!1),b=w.useCallback(E=>{g.current=!0,E.preventDefault()},[]),v=w.useCallback(()=>{g.current=!1},[]),N=w.useCallback(E=>{if(g.current){const T=window.innerWidth-E.clientX;T>250&&T<window.innerWidth*.8&&p(T)}},[]);w.useEffect(()=>(window.addEventListener("mousemove",N),window.addEventListener("mouseup",v),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",v)}),[N,v]);const k=d.map(E=>({...E,links:E.links.filter(T=>T.name.toLowerCase().includes(l.toLowerCase()))})).filter(E=>E.links.length>0);return r.jsxs("div",{className:`side-panel ${i?"open":""}`,style:{width:`${u}px`,right:i?"0":`-${u}px`},children:[r.jsx("div",{className:"resizer",onMouseDown:b}),r.jsxs("div",{className:"side-panel-header",children:[r.jsx(os,{to:"/dashboard",className:"home-button",onClick:a,children:r.jsx(dh,{})}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(fh,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),r.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:l,onChange:E=>f(E.target.value)})]}),r.jsx("button",{className:"close-button",onClick:a,children:""})]}),r.jsx("nav",{children:k.map((E,T)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:E.title}),r.jsx("ul",{className:"sub-page-list",children:E.links.map(I=>{const D=I.icon;return r.jsx("li",{children:r.jsxs(os,{to:I.path,className:o.pathname===I.path?"active":"",onClick:a,children:[D&&r.jsx(D,{})," ",I.name]})},I.path)})})]},T))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",e.name]}),r.jsxs("button",{onClick:n,className:"logout-button-sidebar",children:[r.jsx(W_,{})," Logout"]})]})]})},zD=({user:e,onLogout:n,userRole:t,isOpen:i,onClose:a,roleNavigation:o})=>{const l=nr(),f=o[t]||[];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mobile-side-panel-overlay ${i?"open":""}`,onClick:a}),r.jsxs("div",{className:`mobile-side-panel ${i?"open":""}`,children:[r.jsxs("div",{className:"mobile-side-panel-header",children:[r.jsx("h3",{children:"Menu"}),r.jsx("button",{className:"close-button",onClick:a,children:""})]}),r.jsx("nav",{children:f.map((d,u)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:d.title}),r.jsx("ul",{className:"sub-page-list",children:d.links.map(p=>{const g=p.icon;return r.jsx("li",{children:r.jsxs(os,{to:p.path,className:l.pathname===p.path?"active":"",onClick:a,children:[g&&r.jsx(g,{})," ",p.name]})},p.path)})})]},u))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",e.name]}),r.jsxs("button",{onClick:n,className:"logout-button-sidebar",children:[r.jsx(W_,{})," Logout"]})]})]})]})};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UD=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,i)=>i?i.toUpperCase():t.toLowerCase()),ES=e=>{const n=UD(e);return n.charAt(0).toUpperCase()+n.slice(1)},J_=(...e)=>e.filter((n,t,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=w.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:l,...f},d)=>w.createElement("svg",{ref:d,...qD,width:n,height:n,stroke:e,strokeWidth:i?Number(t)*24/Number(n):t,className:J_("lucide",a),...f},[...l.map(([u,p])=>w.createElement(u,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=(e,n)=>{const t=w.forwardRef(({className:i,...a},o)=>w.createElement(VD,{ref:o,iconNode:n,className:J_(`lucide-${BD(ES(e))}`,`lucide-${e}`,i),...a}));return t.displayName=ES(e),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],TS=ht("arrow-down",HD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Qt=ht("arrow-left",GD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],J0=ht("arrow-up",YD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],ow=ht("beaker",WD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],JD=ht("bed-double",QD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],XD=ht("bell",KD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],eI=ht("bell-ring",ZD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],K0=ht("brain",tI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],iI=ht("building",nI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],aI=ht("calendar-check-2",rI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],oI=ht("calendar-days",sI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],AS=ht("calendar",lI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],uI=ht("chart-no-axes-column",cI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Yx=ht("chevron-down",dI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lw=ht("chevron-left",fI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Sb=ht("chevron-right",hI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Wx=ht("chevron-up",pI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ri=ht("circle-alert",mI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ls=ht("circle-check-big",gI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],xI=ht("circle-minus",yI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],as=ht("circle-plus",bI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],wI=ht("circle-user",vI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],PS=ht("clipboard-list",SI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],K_=ht("clipboard",NI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],jI=ht("copy",CI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],DS=ht("credit-card",_I);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],wd=ht("dollar-sign",kI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],X_=ht("eye",EI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],IS=ht("file-check",TI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$o=ht("file-text",AI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Qx=ht("flask-conical",PI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],II=ht("funnel",DI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],X0=ht("hash",MI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Z_=ht("house",RI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Lo=ht("info",OI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],FI=ht("list-ordered",LI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],zI=ht("list",$I);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Sd=ht("loader-circle",BI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],MS=ht("lock",UI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],VI=ht("message-square",qI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],GI=ht("mic-off",HI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],e2=ht("mic",YI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],QI=ht("monitor",WI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],KI=ht("package-open",JI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],wh=ht("package",XI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],eM=ht("paperclip",ZI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],nM=ht("pause",tM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],xd=ht("pencil",iM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],aM=ht("phone",rM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Nb=ht("pill",sM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],lM=ht("play",oM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ph=ht("plus",cM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Nd=ht("printer",uM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Z0=ht("refresh-cw",dM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jd=ht("save",fM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ss=ht("search",hM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],mM=ht("send",pM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],Jx=ht("server-crash",gM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ng=ht("settings",yM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],bM=ht("share-2",xM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wM=ht("shield-check",vM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],_d=ht("square-pen",SM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],CM=ht("stethoscope",NM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],_M=ht("table",jM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],EM=ht("tag",kM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Sr=ht("trash-2",TM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],PM=ht("triangle-alert",AM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],IM=ht("truck",DM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],RS=ht("upload",MM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],t2=ht("user-check",RM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],n2=ht("user-plus",OM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Sh=ht("user",LM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Vm=ht("users",FM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],zM=ht("video",$M);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ci=ht("x",BM),UM="_container_djej9_1",qM="_title_djej9_17",VM="_filtersContainer_djej9_31",HM="_dateInputLabel_djej9_55",GM="_dateInput_djej9_55",YM="_fetchButton_djej9_105",WM="_summarySection_djej9_145",QM="_totalRevenue_djej9_153",JM="_totalRevenueAmount_djej9_175",KM="_card_djej9_187",XM="_cardTitle_djej9_203",ZM="_cardList_djej9_217",eR="_cardListItem_djej9_227",tR="_cardListItemAmount_djej9_247",nR="_revenueGrid_djej9_257",iR="_revenueCard_djej9_271",rR="_revenueCardTitle_djej9_285",aR="_revenueCardAmount_djej9_297",sR="_revenueCardSubtitle_djej9_307",oR="_receptionRevenue_djej9_317",lR="_pharmacyRevenue_djej9_323",cR="_labRevenue_djej9_329",uR="_revenueCardList_djej9_337",dR="_tableSectionTitle_djej9_377",fR="_tableContainer_djej9_397",hR="_styledTable_djej9_411",pR="_capitalize_djej9_461",mR="_noDataMessage_djej9_469",gR="_errorAlert_djej9_489",yR="_loadingContainer_djej9_521",xR="_breathingBall_djej9_543",jt={container:UM,title:qM,filtersContainer:VM,dateInputLabel:HM,dateInput:GM,fetchButton:YM,summarySection:WM,totalRevenue:QM,totalRevenueAmount:JM,card:KM,cardTitle:XM,cardList:ZM,cardListItem:eR,cardListItemAmount:tR,revenueGrid:nR,revenueCard:iR,revenueCardTitle:rR,revenueCardAmount:aR,revenueCardSubtitle:sR,receptionRevenue:oR,pharmacyRevenue:lR,labRevenue:cR,revenueCardList:uR,tableSectionTitle:dR,tableContainer:fR,styledTable:hR,capitalize:pR,noDataMessage:mR,errorAlert:gR,loadingContainer:yR,breathingBall:xR},bR=()=>{const e=new Date().toISOString().split("T")[0],[n,t]=w.useState(e),[i,a]=w.useState(e),[o,l]=w.useState([]),[f,d]=w.useState([]),[u,p]=w.useState([]),[g,b]=w.useState(0),[v,N]=w.useState(0),[k,E]=w.useState(null),[T,I]=w.useState(null),[D,U]=w.useState({reception:{},pharmacy:{},lab:{}}),[O,$]=w.useState(!1),[B,q]=w.useState(null),H=async()=>{if($(!0),q(null),l([]),d([]),p([]),b(0),N(0),E(null),I(null),U({reception:{},pharmacy:{},lab:{}}),!n||!i){q("Please select both start and end dates."),$(!1);return}if(new Date(n)>new Date(i)){q("Start date cannot be after end date."),$(!1);return}try{const[L,Q,ne]=await Promise.all([pe(`/api/bills?startDate=${n}&endDate=${i}`),pe(`/api/payment/admission?startDate=${n}&endDate=${i}`),pe(`/api/subscriptions/transactions/manual?startDate=${n}&endDate=${i}`)]);if(!L.ok){const we=await L.json().catch(()=>({}));throw new Error(`Bills fetch error: ${we.message||L.statusText}`)}if(!Q.ok){const we=await Q.json().catch(()=>({}));throw new Error(`Admission Payments fetch error: ${we.message||Q.statusText}`)}if(!ne.ok){const we=await ne.json().catch(()=>({}));throw new Error(`Manual Subscriptions fetch error: ${we.message||ne.statusText}`)}const ie=await L.json(),oe=await Q.json(),Y=await ne.json(),z=ie.bills||[],re=oe.admissionPayments||[],X=Y||[];l(z),d(re),p(X);let P=0,te=0;const se={},M={consultation:0,pharmacy:0,lab:0,other:0},fe={reception:{},pharmacy:{},lab:{}};z.forEach(we=>{if(we.status==="paid"||we.type==="pharmacy_return"){const ce=parseFloat(we.amount.toString()),Le=we.payment_mode||"Unknown";let Ne=we.type||"other";Ne==="pharmacy_return"&&(te+=ce,Ne="pharmacy"),P+=ce,se[Le]=(se[Le]||0)+ce,M.hasOwnProperty(Ne)?M[Ne]=(M[Ne]||0)+ce:M.other=(M.other||0)+ce,Ne==="pharmacy"?fe.pharmacy[Le]=(fe.pharmacy[Le]||0)+ce:Ne==="lab"?fe.lab[Le]=(fe.lab[Le]||0)+ce:fe.reception[Le]=(fe.reception[Le]||0)+ce}}),re.forEach(we=>{const ce=parseFloat(we.amount_paid.toString()),Le=we.payment_mode||"Unknown";P+=ce,se[Le]=(se[Le]||0)+ce,fe.reception[Le]=(fe.reception[Le]||0)+ce}),X.forEach(we=>{var Ne,nt;const ce=parseFloat(((nt=(Ne=we.subscriptionPlan)==null?void 0:Ne.price)==null?void 0:nt.toString())??"0"),Le=we.subscription_payment_method||"Unknown";P+=ce,se[Le]=(se[Le]||0)+ce,fe.reception[Le]=(fe.reception[Le]||0)+ce}),E(se),I(M),U(fe),b(P),N(te)}catch(L){console.error("Failed to fetch money flow data:",L),q(L.message||"Failed to fetch data. Check console for details.")}finally{$(!1)}},F=()=>{H()};return r.jsxs("div",{className:jt.container,children:[r.jsx("h2",{className:jt.title,children:"Money Flow Analysis"}),r.jsxs("div",{className:jt.filtersContainer,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"start-date-money",className:jt.dateInputLabel,children:"Start Date:"}),r.jsx("input",{type:"date",id:"start-date-money",value:n,onChange:L=>t(L.target.value),className:jt.dateInput})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"end-date-money",className:jt.dateInputLabel,children:"End Date:"}),r.jsx("input",{type:"date",id:"end-date-money",value:i,onChange:L=>a(L.target.value),className:jt.dateInput})]}),r.jsx("button",{onClick:F,disabled:O,className:jt.fetchButton,children:O?"Loading...":"Fetch Data"})]}),B&&r.jsxs("div",{className:jt.errorAlert,role:"alert",children:[r.jsx(Ri,{size:20})," ",r.jsxs("span",{children:["Error: ",B]})]}),!O&&!B&&(o.length>0||f.length>0||u.length>0)&&r.jsxs("div",{className:jt.summarySection,children:[r.jsxs("h3",{className:jt.totalRevenue,children:["Total Paid Revenue (",n," to ",i,"):",r.jsxs("span",{className:jt.totalRevenueAmount,children:["",g.toFixed(2)]})]}),k&&Object.keys(k).length>0&&r.jsxs("div",{className:jt.card,children:[r.jsx("h4",{className:jt.cardTitle,children:"Revenue by Payment Mode:"}),r.jsx("ul",{className:jt.cardList,children:Object.entries(k).map(([L,Q])=>r.jsxs("li",{className:jt.cardListItem,children:[L,": ",r.jsxs("span",{className:jt.cardListItemAmount,children:["",Q.toFixed(2)]})]},L))})]}),T&&D&&r.jsxs("div",{className:jt.revenueGrid,children:[r.jsxs("div",{className:`${jt.revenueCard} ${jt.receptionRevenue}`,children:[r.jsx("h4",{className:jt.revenueCardTitle,children:"Reception Revenue"}),r.jsxs("p",{className:jt.revenueCardAmount,children:["",(T.consultation+T.other).toFixed(2)]}),r.jsx("span",{className:jt.revenueCardSubtitle,children:"(Consultation + Other + Admissions + Subscriptions)"}),Object.keys(D.reception).length>0&&r.jsx("ul",{className:jt.revenueCardList,children:Object.entries(D.reception).map(([L,Q])=>r.jsxs("li",{children:[L,": ",r.jsxs("span",{children:["",Q.toFixed(2)]})]},`reception-${L}`))})]}),r.jsxs("div",{className:`${jt.revenueCard} ${jt.pharmacyRevenue}`,children:[r.jsx("h4",{className:jt.revenueCardTitle,children:"Pharmacy Revenue"}),r.jsxs("p",{className:jt.revenueCardAmount,children:["",T.pharmacy.toFixed(2)]}),v<0&&r.jsxs("p",{className:jt.revenueCardSubtitle,children:["Returns: ",r.jsxs("span",{className:jt.negativeAmount,children:["",v.toFixed(2)]})]}),Object.keys(D.pharmacy).length>0&&r.jsx("ul",{className:jt.revenueCardList,children:Object.entries(D.pharmacy).map(([L,Q])=>r.jsxs("li",{children:[L,": ",r.jsxs("span",{children:["",Q.toFixed(2)]})]},`pharmacy-${L}`))})]}),r.jsxs("div",{className:`${jt.revenueCard} ${jt.labRevenue}`,children:[r.jsx("h4",{className:jt.revenueCardTitle,children:"Lab Revenue"}),r.jsxs("p",{className:jt.revenueCardAmount,children:["",T.lab.toFixed(2)]}),Object.keys(D.lab).length>0&&r.jsx("ul",{className:jt.revenueCardList,children:Object.entries(D.lab).map(([L,Q])=>r.jsxs("li",{children:[L,": ",r.jsxs("span",{children:["",Q.toFixed(2)]})]},`lab-${L}`))})]})]}),r.jsxs("h4",{className:jt.tableSectionTitle,children:["Individual Bills (",o.filter(L=>L.status==="paid"||L.type==="pharmacy_return").length,"):"]}),o.filter(L=>L.status==="paid"||L.type==="pharmacy_return").length>0?r.jsx("div",{className:jt.tableContainer,children:r.jsxs("table",{className:jt.styledTable,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Bill ID"}),r.jsx("th",{children:"Patient ID"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Payment Mode"})]})}),r.jsx("tbody",{children:o.filter(L=>L.status==="paid"||L.type==="pharmacy_return").map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:new Date(L.createdAt).toLocaleDateString()}),r.jsx("td",{children:L.id}),r.jsx("td",{children:L.patient_id}),r.jsx("td",{className:jt.capitalize,children:L.type}),r.jsxs("td",{children:["",parseFloat(L.amount.toString()).toFixed(2)]}),r.jsx("td",{children:L.payment_mode})]},`bill-${L.id}`))})]})}):r.jsx("p",{className:jt.noDataMessage,children:"No relevant bills found for the selected period."}),r.jsxs("h4",{className:jt.tableSectionTitle,children:["Admission Payments (",f.length,"):"]}),f.length>0?r.jsx("div",{className:jt.tableContainer,children:r.jsxs("table",{className:jt.styledTable,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Payment ID"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Amount Paid"}),r.jsx("th",{children:"Payment Mode"})]})}),r.jsx("tbody",{children:f.map(L=>{var Q;return r.jsxs("tr",{children:[r.jsx("td",{children:new Date(L.payment_date).toLocaleDateString()}),r.jsx("td",{children:L.id}),r.jsx("td",{children:((Q=L.Patient)==null?void 0:Q.name)??L.patient_id})," ",r.jsxs("td",{children:["",parseFloat(L.amount_paid.toString()).toFixed(2)]}),r.jsx("td",{children:L.payment_mode})]},`admission-${L.id}`)})})]})}):r.jsx("p",{className:jt.noDataMessage,children:"No admission payments found for the selected period."}),r.jsxs("h4",{className:jt.tableSectionTitle,children:["Manual Subscription Payments (",u.length,"):"]}),u.length>0?r.jsx("div",{className:jt.tableContainer,children:r.jsxs("table",{className:jt.styledTable,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Start Date"}),r.jsx("th",{children:"Patient ID"}),r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Plan Name"}),r.jsx("th",{children:"Plan Amount"}),r.jsx("th",{children:"Payment Mode"})]})}),r.jsx("tbody",{children:u.map(L=>{var Q,ne,ie;return r.jsxs("tr",{children:[r.jsx("td",{children:new Date(L.subscription_start_date).toLocaleDateString()}),r.jsx("td",{children:L.id}),r.jsx("td",{children:L.name}),r.jsx("td",{children:((Q=L.subscriptionPlan)==null?void 0:Q.name)??"N/A"}),r.jsxs("td",{children:["",parseFloat(((ie=(ne=L.subscriptionPlan)==null?void 0:ne.price)==null?void 0:ie.toString())??"0").toFixed(2)]}),r.jsx("td",{className:jt.capitalize,children:L.subscription_payment_method})]},`sub-patient-${L.id}`)})})]})}):r.jsx("p",{className:jt.noDataMessage,children:"No manual subscription payments found for the selected period."})]}),O&&r.jsxs("div",{className:jt.loadingContainer,children:[r.jsx("div",{className:jt.breathingBall}),r.jsx("p",{children:"Loading data..."})]}),!O&&!B&&o.length===0&&f.length===0&&u.length===0&&r.jsx("p",{className:jt.noDataMessage,children:"No data found for the selected period. Click 'Fetch Data'."})]})},vR=()=>{const e=localStorage.getItem("currentClinicId");return e||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},i2=()=>localStorage.getItem("authToken"),cw=()=>{const[e,n]=w.useState([]),[t,i]=w.useState(!1),[a,o]=w.useState(null),[l,f]=w.useState(!1),[d,u]=w.useState(null),p=w.useRef(null),[g,b]=w.useState(!1),[v,N]=w.useState(null),[k,E]=w.useState(!1),[T,I]=w.useState(!1),[D,U]=w.useState(null),[O,$]=w.useState({name:"",description:"",price:"",default_parameters:[]}),B=w.useCallback(async()=>{i(!0),o(null),u(null),N(null);try{const se=await pe("/api/lab-tests");if(!se.ok)throw new Error(`HTTP error! status: ${se.status}`);const M=await se.json();n(M)}catch(se){console.error("Error fetching lab tests:",se),o(se.message||"Failed to fetch lab tests.")}finally{i(!1)}},[]);w.useEffect(()=>{B()},[B]);const q=se=>{const{name:M,value:fe}=se.target;$(we=>({...we,[M]:fe}))},H=(se,M,fe)=>{const we=[...O.default_parameters],ce=we[se];if(M==="type")switch(ce.type=fe,fe){case"number":ce.defaultValue=0,ce.lower_limit=null,ce.upper_limit=null,ce.unit="";break;case"boolean":ce.defaultValue=!1,ce.lower_limit=void 0,ce.upper_limit=void 0,ce.unit=void 0;break;case"string":default:ce.defaultValue="",ce.lower_limit=void 0,ce.upper_limit=void 0,ce.unit=void 0;break}else M==="defaultValue"?ce.type==="number"?ce.defaultValue=parseFloat(fe)||0:(ce.type,ce.defaultValue=fe):M==="lower_limit"||M==="upper_limit"?ce[M]=fe===""?null:parseFloat(fe):ce[M]=fe;$(Le=>({...Le,default_parameters:we}))},F=()=>{$(se=>({...se,default_parameters:[...se.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},L=se=>{$(M=>({...M,default_parameters:M.default_parameters.filter((fe,we)=>we!==se)}))},Q=async se=>{se.preventDefault(),i(!0),o(null);const M=D!==null,fe=M?`/api/lab-tests/${D}`:"/api/lab-tests",we=M?"PUT":"POST";try{const ce=await pe(fe,{method:we,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:O.name,description:O.description,price:parseFloat(O.price),default_parameters:O.default_parameters})});if(!ce.ok){const Le=await ce.json();throw new Error(Le.message||`HTTP error! status: ${ce.status}`)}I(!1),U(null),$({name:"",description:"",price:"",default_parameters:[]}),B()}catch(ce){console.error(`Error ${M?"updating":"adding"} lab test:`,ce),o(ce.message||`Failed to ${M?"update":"add"} lab test.`)}finally{i(!1)}},ne=()=>{U(null),$({name:"",description:"",price:"",default_parameters:[]}),I(!0)},ie=se=>{if(D===se.id)U(null);else{U(se.id);const M=(se.default_parameters||[]).map(fe=>({...fe,unit:fe.unit||"",lower_limit:fe.lower_limit===void 0?null:fe.lower_limit,upper_limit:fe.upper_limit===void 0?null:fe.upper_limit}));$({name:se.name,description:se.description||"",price:se.price,default_parameters:M}),I(!1)}},oe=async se=>{if(window.confirm("Are you sure you want to delete this lab test?")){i(!0),o(null);try{const M=await pe(`/api/lab-tests/${se}`,{method:"DELETE"});if(!M.ok){const fe=await M.json();throw new Error(fe.message||`HTTP error! status: ${M.status}`)}B()}catch(M){console.error("Error deleting lab test:",M),o(M.message||"Failed to delete lab test.")}finally{i(!1)}}},Y=()=>{I(!1),U(null),o(null),$({name:"",description:"",price:"",default_parameters:[]})},z=async se=>{if(!se){u("No file selected.");return}f(!0),u(null),o(null);const M=new FormData;M.append("file",se);try{const fe=await pe("/api/lab-tests/import",{method:"POST",body:M});if(!fe.ok){const we=await fe.json();throw new Error(we.message||`Import failed: ${fe.statusText}`)}B()}catch(fe){console.error("Error importing lab tests from Excel:",fe),u(fe.message||"Failed to import lab tests from Excel.")}finally{f(!1)}},re=async se=>{if(se.target.files&&se.target.files[0]){const M=se.target.files[0];await z(M),se.target&&(se.target.value="")}},X=async()=>{if(window.confirm("Are you sure you want to import default biochemistry and pathology tests? This will add new tests and may duplicate existing ones if names match.")){b(!0),N(null),o(null);try{const se=await pe("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"}});if(!se.ok){const M=await se.json();throw new Error(M.message||`Default import failed: ${se.statusText}`)}B()}catch(se){console.error("Error importing default lab tests:",se),N(se.message||"Failed to import default lab tests.")}finally{b(!1)}}},P=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){E(!0),o(null),u(null),N(null);try{const se=await pe("/api/lab-tests/all",{method:"DELETE"});if(!se.ok){const M=await se.json();throw new Error(M.message||`Delete all failed: ${se.statusText}`)}B()}catch(se){console.error("Error deleting all lab tests:",se),o(se.message||"Failed to delete all lab tests.")}finally{E(!1)}}},te=t||l||g||k;return r.jsxs("div",{className:"lab-inventory-card",children:[r.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:ne,className:"lab-inventory-button",disabled:te,children:"Add New Test"}),r.jsx("button",{onClick:()=>{var se;return(se=p.current)==null?void 0:se.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:te,children:l?"Importing...":"Import from Excel"}),r.jsx("input",{type:"file",ref:p,onChange:re,accept:".xlsx, .xls",style:{display:"none"},disabled:l}),r.jsx("button",{onClick:X,className:"lab-inventory-button lab-inventory-button-secondary",disabled:te,children:g?"Importing Defaults...":"Import Default Tests"}),r.jsx("button",{onClick:P,className:"lab-inventory-button lab-inventory-button-danger",disabled:te,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:k?"Deleting All...":"Delete All Tests"})]}),a&&r.jsx("div",{className:"error-text mb-4",children:a}),d&&r.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",d]}),v&&r.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",v]}),T&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),r.jsxs("form",{onSubmit:Q,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:O.name,onChange:q,className:"lab-inventory-input",required:!0,disabled:te})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:O.description,onChange:q,rows:3,className:"lab-inventory-input",disabled:te})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:O.price,onChange:q,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:te})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),O.default_parameters.map((se,M)=>{var fe,we;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:se.name,onChange:ce=>H(M,"name",ce.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:se.type,onChange:ce=>H(M,"type",ce.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),se.type==="boolean"?r.jsxs("select",{value:se.defaultValue.toString(),onChange:ce=>H(M,"defaultValue",ce.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:se.type==="number"?"number":"text",placeholder:"Default Value",value:se.defaultValue.toString(),onChange:ce=>H(M,"defaultValue",ce.target.value),className:"lab-inventory-input"}),se.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:se.lower_limit===null?"":((fe=se.lower_limit)==null?void 0:fe.toString())??"",onChange:ce=>H(M,"lower_limit",ce.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:se.upper_limit===null?"":((we=se.upper_limit)==null?void 0:we.toString())??"",onChange:ce=>H(M,"upper_limit",ce.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:se.unit||"",onChange:ce=>H(M,"unit",ce.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>L(M),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},M)}),r.jsx("button",{type:"button",onClick:F,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Y,className:"lab-inventory-button lab-inventory-button-secondary",disabled:te,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:te,children:t?"Saving...":"Add Test"})]})]})]}),te&&!T&&r.jsxs("p",{className:"loading-text",children:[" ",l?"Importing Excel data...":g?"Importing default data...":"Loading tests..."]}),!te&&e.length===0&&!a&&!d&&!v&&r.jsx("p",{className:"no-data-message",children:"No lab tests found. Add one or import from Excel to get started."}),!te&&e.length>0&&r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:e.map(se=>{const M=D===se.id,fe=se.price&&typeof se.price=="string"?parseFloat(se.price):NaN,we=isNaN(fe)?"0.00":fe.toFixed(2);return r.jsxs(Rn.Fragment,{children:[r.jsxs("tr",{onClick:()=>ie(se),style:{cursor:"pointer"},children:[r.jsx("td",{children:se.name}),r.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:se.description||"-"}),r.jsxs("td",{children:["",we]}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{onClick:ce=>{ce.stopPropagation(),ie(se)},className:"lab-inventory-link",disabled:te,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),r.jsx("button",{onClick:ce=>{ce.stopPropagation(),oe(se.id)},className:"lab-inventory-link",disabled:te,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),M&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),r.jsxs("form",{onSubmit:Q,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:O.name,onChange:q,className:"lab-inventory-input",required:!0,disabled:te})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:O.description,onChange:q,rows:3,className:"lab-inventory-input",disabled:te})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:O.price,onChange:q,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:te})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),O.default_parameters.map((ce,Le)=>{var Ne,nt;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:ce.name,onChange:ut=>H(Le,"name",ut.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:ce.type,onChange:ut=>H(Le,"type",ut.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),ce.type==="boolean"?r.jsxs("select",{value:ce.defaultValue.toString(),onChange:ut=>H(Le,"defaultValue",ut.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:ce.type==="number"?"number":"text",placeholder:"Default Value",value:ce.defaultValue.toString(),onChange:ut=>H(Le,"defaultValue",ut.target.value),className:"lab-inventory-input"}),ce.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:ce.lower_limit===null?"":((Ne=ce.lower_limit)==null?void 0:Ne.toString())??"",onChange:ut=>H(Le,"lower_limit",ut.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:ce.upper_limit===null?"":((nt=ce.upper_limit)==null?void 0:nt.toString())??"",onChange:ut=>H(Le,"upper_limit",ut.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:ce.unit||"",onChange:ut=>H(Le,"unit",ut.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>L(Le),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},Le)}),r.jsx("button",{type:"button",onClick:F,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Y,className:"lab-inventory-button lab-inventory-button-secondary",disabled:te,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:te,children:t?"Saving...":"Update Test"})]})]})]})})})]},se.id)})})]})]})]})},r2=6048e5,wR=864e5,a2=6e4,s2=36e5,OS=Symbol.for("constructDateFrom");function zs(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&OS in e?e[OS](n):e instanceof Date?new e.constructor(n):new Date(n)}function Cr(e,n){return zs(n||e,e)}function e1(e,n,t){const i=Cr(e,t==null?void 0:t.in);if(isNaN(n))return zs(e,NaN);if(!n)return i;const a=i.getDate(),o=zs(e,i.getTime());o.setMonth(i.getMonth()+n+1,0);const l=o.getDate();return a>=l?o:(i.setFullYear(o.getFullYear(),o.getMonth(),a),i)}let SR={};function Cb(){return SR}function Hm(e,n){var f,d,u,p;const t=Cb(),i=(n==null?void 0:n.weekStartsOn)??((d=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:d.weekStartsOn)??t.weekStartsOn??((p=(u=t.locale)==null?void 0:u.options)==null?void 0:p.weekStartsOn)??0,a=Cr(e,n==null?void 0:n.in),o=a.getDay(),l=(o<i?7:0)+o-i;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Kx(e,n){return Hm(e,{...n,weekStartsOn:1})}function o2(e,n){const t=Cr(e,n==null?void 0:n.in),i=t.getFullYear(),a=zs(t,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const o=Kx(a),l=zs(t,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const f=Kx(l);return t.getTime()>=o.getTime()?i+1:t.getTime()>=f.getTime()?i:i-1}function LS(e){const n=Cr(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function NR(e,...n){const t=zs.bind(null,n.find(i=>typeof i=="object"));return n.map(t)}function FS(e,n){const t=Cr(e,n==null?void 0:n.in);return t.setHours(0,0,0,0),t}function CR(e,n,t){const[i,a]=NR(t==null?void 0:t.in,e,n),o=FS(i),l=FS(a),f=+o-LS(o),d=+l-LS(l);return Math.round((f-d)/wR)}function jR(e,n){const t=o2(e,n),i=zs(e,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),Kx(i)}function _R(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Gm(e){return!(!_R(e)&&typeof e!="number"||isNaN(+Cr(e)))}function kR(e,n){const t=Cr(e,n==null?void 0:n.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const ER={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},TR=(e,n,t)=>{let i;const a=ER[e];return typeof a=="string"?i=a:n===1?i=a.one:i=a.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function Jv(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const AR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},PR={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},DR={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},IR={date:Jv({formats:AR,defaultWidth:"full"}),time:Jv({formats:PR,defaultWidth:"full"}),dateTime:Jv({formats:DR,defaultWidth:"full"})},MR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},RR=(e,n,t,i)=>MR[e];function vm(e){return(n,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let a;if(i==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,f=t!=null&&t.width?String(t.width):l;a=e.formattingValues[f]||e.formattingValues[l]}else{const l=e.defaultWidth,f=t!=null&&t.width?String(t.width):e.defaultWidth;a=e.values[f]||e.values[l]}const o=e.argumentCallback?e.argumentCallback(n):n;return a[o]}}const OR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},LR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$R={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},BR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},UR=(e,n)=>{const t=Number(e),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},qR={ordinalNumber:UR,era:vm({values:OR,defaultWidth:"wide"}),quarter:vm({values:LR,defaultWidth:"wide",argumentCallback:e=>e-1}),month:vm({values:FR,defaultWidth:"wide"}),day:vm({values:$R,defaultWidth:"wide"}),dayPeriod:vm({values:zR,defaultWidth:"wide",formattingValues:BR,defaultFormattingWidth:"wide"})};function wm(e){return(n,t={})=>{const i=t.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],o=n.match(a);if(!o)return null;const l=o[0],f=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(f)?HR(f,g=>g.test(l)):VR(f,g=>g.test(l));let u;u=e.valueCallback?e.valueCallback(d):d,u=t.valueCallback?t.valueCallback(u):u;const p=n.slice(l.length);return{value:u,rest:p}}}function VR(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function HR(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function GR(e){return(n,t={})=>{const i=n.match(e.matchPattern);if(!i)return null;const a=i[0],o=n.match(e.parsePattern);if(!o)return null;let l=e.valueCallback?e.valueCallback(o[0]):o[0];l=t.valueCallback?t.valueCallback(l):l;const f=n.slice(a.length);return{value:l,rest:f}}}const YR=/^(\d+)(th|st|nd|rd)?/i,WR=/\d+/i,QR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},JR={any:[/^b/i,/^(a|c)/i]},KR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},XR={any:[/1/i,/2/i,/3/i,/4/i]},ZR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},e4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},t4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},n4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},i4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},r4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},a4={ordinalNumber:GR({matchPattern:YR,parsePattern:WR,valueCallback:e=>parseInt(e,10)}),era:wm({matchPatterns:QR,defaultMatchWidth:"wide",parsePatterns:JR,defaultParseWidth:"any"}),quarter:wm({matchPatterns:KR,defaultMatchWidth:"wide",parsePatterns:XR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:wm({matchPatterns:ZR,defaultMatchWidth:"wide",parsePatterns:e4,defaultParseWidth:"any"}),day:wm({matchPatterns:t4,defaultMatchWidth:"wide",parsePatterns:n4,defaultParseWidth:"any"}),dayPeriod:wm({matchPatterns:i4,defaultMatchWidth:"any",parsePatterns:r4,defaultParseWidth:"any"})},s4={code:"en-US",formatDistance:TR,formatLong:IR,formatRelative:RR,localize:qR,match:a4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function o4(e,n){const t=Cr(e,n==null?void 0:n.in);return CR(t,kR(t))+1}function l4(e,n){const t=Cr(e,n==null?void 0:n.in),i=+Kx(t)-+jR(t);return Math.round(i/r2)+1}function l2(e,n){var p,g,b,v;const t=Cr(e,n==null?void 0:n.in),i=t.getFullYear(),a=Cb(),o=(n==null?void 0:n.firstWeekContainsDate)??((g=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??a.firstWeekContainsDate??((v=(b=a.locale)==null?void 0:b.options)==null?void 0:v.firstWeekContainsDate)??1,l=zs((n==null?void 0:n.in)||e,0);l.setFullYear(i+1,0,o),l.setHours(0,0,0,0);const f=Hm(l,n),d=zs((n==null?void 0:n.in)||e,0);d.setFullYear(i,0,o),d.setHours(0,0,0,0);const u=Hm(d,n);return+t>=+f?i+1:+t>=+u?i:i-1}function c4(e,n){var f,d,u,p;const t=Cb(),i=(n==null?void 0:n.firstWeekContainsDate)??((d=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??t.firstWeekContainsDate??((p=(u=t.locale)==null?void 0:u.options)==null?void 0:p.firstWeekContainsDate)??1,a=l2(e,n),o=zs((n==null?void 0:n.in)||e,0);return o.setFullYear(a,0,i),o.setHours(0,0,0,0),Hm(o,n)}function u4(e,n){const t=Cr(e,n==null?void 0:n.in),i=+Hm(t,n)-+c4(t,n);return Math.round(i/r2)+1}function Mn(e,n){const t=e<0?"-":"",i=Math.abs(e).toString().padStart(n,"0");return t+i}const Rc={y(e,n){const t=e.getFullYear(),i=t>0?t:1-t;return Mn(n==="yy"?i%100:i,n.length)},M(e,n){const t=e.getMonth();return n==="M"?String(t+1):Mn(t+1,2)},d(e,n){return Mn(e.getDate(),n.length)},a(e,n){const t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return Mn(e.getHours()%12||12,n.length)},H(e,n){return Mn(e.getHours(),n.length)},m(e,n){return Mn(e.getMinutes(),n.length)},s(e,n){return Mn(e.getSeconds(),n.length)},S(e,n){const t=n.length,i=e.getMilliseconds(),a=Math.trunc(i*Math.pow(10,t-3));return Mn(a,n.length)}},ih={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$S={G:function(e,n,t){const i=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){const i=e.getFullYear(),a=i>0?i:1-i;return t.ordinalNumber(a,{unit:"year"})}return Rc.y(e,n)},Y:function(e,n,t,i){const a=l2(e,i),o=a>0?a:1-a;if(n==="YY"){const l=o%100;return Mn(l,2)}return n==="Yo"?t.ordinalNumber(o,{unit:"year"}):Mn(o,n.length)},R:function(e,n){const t=o2(e);return Mn(t,n.length)},u:function(e,n){const t=e.getFullYear();return Mn(t,n.length)},Q:function(e,n,t){const i=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return Mn(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,t){const i=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return Mn(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,t){const i=e.getMonth();switch(n){case"M":case"MM":return Rc.M(e,n);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,t){const i=e.getMonth();switch(n){case"L":return String(i+1);case"LL":return Mn(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,t,i){const a=u4(e,i);return n==="wo"?t.ordinalNumber(a,{unit:"week"}):Mn(a,n.length)},I:function(e,n,t){const i=l4(e);return n==="Io"?t.ordinalNumber(i,{unit:"week"}):Mn(i,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):Rc.d(e,n)},D:function(e,n,t){const i=o4(e);return n==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):Mn(i,n.length)},E:function(e,n,t){const i=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,t,i){const a=e.getDay(),o=(a-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Mn(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(e,n,t,i){const a=e.getDay(),o=(a-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Mn(o,n.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(e,n,t){const i=e.getDay(),a=i===0?7:i;switch(n){case"i":return String(a);case"ii":return Mn(a,n.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,t){const a=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,n,t){const i=e.getHours();let a;switch(i===12?a=ih.noon:i===0?a=ih.midnight:a=i/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,n,t){const i=e.getHours();let a;switch(i>=17?a=ih.evening:i>=12?a=ih.afternoon:i>=4?a=ih.morning:a=ih.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let i=e.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return Rc.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):Rc.H(e,n)},K:function(e,n,t){const i=e.getHours()%12;return n==="Ko"?t.ordinalNumber(i,{unit:"hour"}):Mn(i,n.length)},k:function(e,n,t){let i=e.getHours();return i===0&&(i=24),n==="ko"?t.ordinalNumber(i,{unit:"hour"}):Mn(i,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):Rc.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):Rc.s(e,n)},S:function(e,n){return Rc.S(e,n)},X:function(e,n,t){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return BS(i);case"XXXX":case"XX":return yd(i);case"XXXXX":case"XXX":default:return yd(i,":")}},x:function(e,n,t){const i=e.getTimezoneOffset();switch(n){case"x":return BS(i);case"xxxx":case"xx":return yd(i);case"xxxxx":case"xxx":default:return yd(i,":")}},O:function(e,n,t){const i=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+zS(i,":");case"OOOO":default:return"GMT"+yd(i,":")}},z:function(e,n,t){const i=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+zS(i,":");case"zzzz":default:return"GMT"+yd(i,":")}},t:function(e,n,t){const i=Math.trunc(+e/1e3);return Mn(i,n.length)},T:function(e,n,t){return Mn(+e,n.length)}};function zS(e,n=""){const t=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),o=i%60;return o===0?t+String(a):t+String(a)+n+Mn(o,2)}function BS(e,n){return e%60===0?(e>0?"-":"+")+Mn(Math.abs(e)/60,2):yd(e,n)}function yd(e,n=""){const t=e>0?"-":"+",i=Math.abs(e),a=Mn(Math.trunc(i/60),2),o=Mn(i%60,2);return t+a+n+o}const US=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},c2=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},d4=(e,n)=>{const t=e.match(/(P+)(p+)?/)||[],i=t[1],a=t[2];if(!a)return US(e,n);let o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",US(i,n)).replace("{{time}}",c2(a,n))},f4={p:c2,P:d4},h4=/^D+$/,p4=/^Y+$/,m4=["D","DD","YY","YYYY"];function g4(e){return h4.test(e)}function y4(e){return p4.test(e)}function x4(e,n,t){const i=b4(e,n,t);if(console.warn(i),m4.includes(e))throw new RangeError(i)}function b4(e,n,t){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const v4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,w4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,S4=/^'([^]*?)'?$/,N4=/''/g,C4=/[a-zA-Z]/;function Nh(e,n,t){var p,g,b,v;const i=Cb(),a=i.locale??s4,o=i.firstWeekContainsDate??((g=(p=i.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,l=i.weekStartsOn??((v=(b=i.locale)==null?void 0:b.options)==null?void 0:v.weekStartsOn)??0,f=Cr(e,t==null?void 0:t.in);if(!Gm(f))throw new RangeError("Invalid time value");let d=n.match(w4).map(N=>{const k=N[0];if(k==="p"||k==="P"){const E=f4[k];return E(N,a.formatLong)}return N}).join("").match(v4).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const k=N[0];if(k==="'")return{isToken:!1,value:j4(N)};if($S[k])return{isToken:!0,value:N};if(k.match(C4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:N}});a.localize.preprocessor&&(d=a.localize.preprocessor(f,d));const u={firstWeekContainsDate:o,weekStartsOn:l,locale:a};return d.map(N=>{if(!N.isToken)return N.value;const k=N.value;(y4(k)||g4(k))&&x4(k,n,String(e));const E=$S[k[0]];return E(f,k,a.localize,u)}).join("")}function j4(e){const n=e.match(S4);return n?n[1].replace(N4,"'"):e}function bd(e,n){return+Cr(e)<+Cr(n)}function Xx(e,n){const t=()=>zs(n==null?void 0:n.in,NaN),a=T4(e);let o;if(a.date){const u=A4(a.date,2);o=P4(u.restDateString,u.year)}if(!o||isNaN(+o))return t();const l=+o;let f=0,d;if(a.time&&(f=D4(a.time),isNaN(f)))return t();if(a.timezone){if(d=I4(a.timezone),isNaN(d))return t()}else{const u=new Date(l+f),p=Cr(0,n==null?void 0:n.in);return p.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),p.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),p}return Cr(l+f+d,n==null?void 0:n.in)}const ux={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_4=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,k4=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,E4=/^([+-])(\d{2})(?::?(\d{2}))?$/;function T4(e){const n={},t=e.split(ux.dateTimeDelimiter);let i;if(t.length>2)return n;if(/:/.test(t[0])?i=t[0]:(n.date=t[0],i=t[1],ux.timeZoneDelimiter.test(n.date)&&(n.date=e.split(ux.timeZoneDelimiter)[0],i=e.substr(n.date.length,e.length))),i){const a=ux.timezone.exec(i);a?(n.time=i.replace(a[1],""),n.timezone=a[1]):n.time=i}return n}function A4(e,n){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),i=e.match(t);if(!i)return{year:NaN,restDateString:""};const a=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?a:o*100,restDateString:e.slice((i[1]||i[2]).length)}}function P4(e,n){if(n===null)return new Date(NaN);const t=e.match(_4);if(!t)return new Date(NaN);const i=!!t[4],a=Sm(t[1]),o=Sm(t[2])-1,l=Sm(t[3]),f=Sm(t[4]),d=Sm(t[5])-1;if(i)return F4(n,f,d)?M4(n,f,d):new Date(NaN);{const u=new Date(0);return!O4(n,o,l)||!L4(n,a)?new Date(NaN):(u.setUTCFullYear(n,o,Math.max(a,l)),u)}}function Sm(e){return e?parseInt(e):1}function D4(e){const n=e.match(k4);if(!n)return NaN;const t=Kv(n[1]),i=Kv(n[2]),a=Kv(n[3]);return $4(t,i,a)?t*s2+i*a2+a*1e3:NaN}function Kv(e){return e&&parseFloat(e.replace(",","."))||0}function I4(e){if(e==="Z")return 0;const n=e.match(E4);if(!n)return 0;const t=n[1]==="+"?-1:1,i=parseInt(n[2]),a=n[3]&&parseInt(n[3])||0;return z4(i,a)?t*(i*s2+a*a2):NaN}function M4(e,n,t){const i=new Date(0);i.setUTCFullYear(e,0,4);const a=i.getUTCDay()||7,o=(n-1)*7+t+1-a;return i.setUTCDate(i.getUTCDate()+o),i}const R4=[31,null,31,30,31,30,31,31,30,31,30,31];function u2(e){return e%400===0||e%4===0&&e%100!==0}function O4(e,n,t){return n>=0&&n<=11&&t>=1&&t<=(R4[n]||(u2(e)?29:28))}function L4(e,n){return n>=1&&n<=(u2(e)?366:365)}function F4(e,n,t){return n>=1&&n<=53&&t>=0&&t<=6}function $4(e,n,t){return e===24?n===0&&t===0:t>=0&&t<60&&n>=0&&n<60&&e>=0&&e<25}function z4(e,n){return n>=0&&n<=59}const qS=10,B4=3,d2=()=>{const e=Nt(),[n,t]=w.useState([]),[i,a]=w.useState([]),[o,l]=w.useState(""),[f,d]=w.useState(!0),[u,p]=w.useState(null),[g,b]=w.useState(new Set),[v,N]=w.useState("all"),k=async()=>{try{const J=await pe("/api/inventory/download-csv");if(!J.ok)throw new Error(`Failed to download CSV: ${J.statusText}`);const G=await J.blob(),K=window.URL.createObjectURL(G),Se=document.createElement("a");Se.href=K,Se.download="pharmacy_inventory.csv",document.body.appendChild(Se),Se.click(),Se.remove(),window.URL.revokeObjectURL(K)}catch(J){console.error("Failed to download CSV:",J),p(J.message||"Failed to download inventory CSV. Please try again.")}},[E,T]=w.useState(!1),[I,D]=w.useState(!1),[U,O]=w.useState(null),[$,B]=w.useState(!1),[q,H]=w.useState(new Set),[F,L]=w.useState(null),[Q,ne]=w.useState(0),[ie,oe]=w.useState(!1),[Y,z]=w.useState(null),[re,X]=w.useState(1),[P,te]=w.useState(!1),se=w.useCallback(async()=>{d(!0),p(null);try{const J=await pe("/api/drugs");if(!J.ok)throw new Error(`Failed to fetch drugs: ${J.statusText} (${J.status})`);let G=await J.json();G=G.map(K=>({...K,price:parseFloat(String(K.price))||0,buying_price:K.buying_price!==null&&K.buying_price!==void 0?parseFloat(String(K.buying_price)):null,quantity_in_stock:parseInt(String(K.quantity_in_stock),10)||0,gst:K.gst!==null&&K.gst!==void 0?parseFloat(String(K.gst)):null,margin:K.margin!==null&&K.margin!==void 0?parseFloat(String(K.margin)):null,discount:K.discount!==null&&K.discount!==void 0?parseFloat(String(K.discount)):null})),t(G),a(G)}catch(J){console.error("Failed to fetch drugs:",J),p(J.message||"Failed to load inventory. Please try again.")}finally{d(!1)}},[]);w.useEffect(()=>{se()},[se]),w.useEffect(()=>{const J=o.toLowerCase();let G=n.filter(Ee=>{var Ze,Fe,ct,Xe,vt;const Be=((Ze=Ee.name)==null?void 0:Ze.toLowerCase())||"",at=((Fe=Ee.description)==null?void 0:Fe.toLowerCase())||"",gt=((ct=Ee.supplier)==null?void 0:ct.toLowerCase())||"",pt=((Xe=Ee.box_number)==null?void 0:Xe.toLowerCase())||"",Ue=((vt=Ee.brand_name)==null?void 0:vt.toLowerCase())||"";return Be.includes(J)||at.includes(J)||gt.includes(J)||pt.includes(J)||Ue.includes(J)});const K=new Date,Se=e1(K,B4);v==="low-stock"?G=G.filter(Ee=>Ee.quantity_in_stock<=qS):v==="near-expiry"?G=G.filter(Ee=>{if(!Ee.expiry_date)return!1;const Be=Xx(Ee.expiry_date);return Gm(Be)&&bd(Be,Se)&&!bd(Be,K)}):v==="expired"&&(G=G.filter(Ee=>{if(!Ee.expiry_date)return!1;const Be=Xx(Ee.expiry_date);return Gm(Be)&&bd(Be,K)})),a(G)},[o,n,v]);const M=()=>{T(!1),L(null)},fe=J=>{ne(parseInt(J.target.value,10)||0)},we=async J=>{if(J.preventDefault(),p(null),!F||!F.id||Q===0){p("No drug selected or adjustment amount is zero.");return}try{const G=await pe(`/api/drugs/${F.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:Q})});if(!G.ok){const Se=await G.json();throw new Error(Se.message||`Failed to adjust stock: ${G.statusText}`)}const K=await G.json();t(Se=>Se.map(Ee=>Ee.id===K.id?K:Ee)),M(),alert(`Stock for "${K.name}" adjusted successfully. New stock: ${K.quantity_in_stock}`)}catch(G){console.error("Failed to adjust stock:",G),p(G.message||"Failed to adjust stock. Please try again.")}},ce=J=>{O(J),D(!0)},Le=()=>{D(!1),O(null)},Ne=async()=>{if(!U||!U.id){p("No drug selected for deletion.");return}d(!0),p(null);try{const J=await pe(`/api/drugs/${U.id}`,{method:"DELETE"});if(!J.ok){const G=await J.json();throw new Error(G.message||`Failed to delete drug: ${J.statusText}`)}alert(`Drug "${U.name}" deleted successfully.`),se(),Le()}catch(J){console.error("Failed to delete drug:",J),p(J.message||"Failed to delete drug. Please try again.")}finally{d(!1)}},nt=()=>{B(!0)},ut=()=>{B(!1)},[je,ye]=w.useState(!1),Ae=()=>{q.size>0&&ye(!0)},De=()=>{ye(!1)},Ve=async()=>{if(q.size===0){p("No drugs selected for deletion.");return}d(!0),p(null);try{const J=await pe("/api/drugs/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugIds:Array.from(q)})});if(!J.ok){const G=await J.json();throw new Error(G.message||`Failed to delete selected drugs: ${J.statusText}`)}alert(`${q.size} drug(s) deleted successfully.`),se(),H(new Set),De()}catch(J){console.error("Failed to delete selected drugs:",J),p(J.message||"Failed to delete selected drugs. Please try again.")}finally{d(!1)}},it=async()=>{d(!0),p(null);try{const J=await pe("/api/drugs/all",{method:"DELETE"});if(!J.ok){const G=await J.json();throw new Error(G.message||`Failed to delete all drugs: ${J.statusText}`)}alert("All drugs deleted successfully."),se(),ut()}catch(J){console.error("Failed to delete all drugs:",J),p(J.message||"Failed to delete all drugs. Please try again.")}finally{d(!1)}},Ke=J=>{if(!J)return null;const G=J.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return G?parseInt(G[1],10):null},rt=J=>{z(J),X(1),oe(!0)},Ft=()=>{oe(!1),z(null),X(1)},_t=J=>{X(parseInt(J.target.value,10)||0)},ve=async J=>{if(J.preventDefault(),p(null),!Y||!Y.id||re<=0){p("No drug selected or invalid number of packs to convert.");return}const G=Ke(Y.unit);if(!G||G<=0){p(`Cannot convert "${Y.name}" to loose. Invalid pack unit: ${Y.unit||"N/A"}.`);return}if(re>(Y.quantity_in_stock??0)){p(`Cannot convert ${re} packs. Only ${Y.quantity_in_stock??0} packs are in stock.`);return}try{const K=await pe(`/api/drugs/${Y.id}/convert-to-loose`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({packsToConvert:re,packSize:G})});if(!K.ok){const Ee=await K.json();throw new Error(Ee.message||`Failed to convert to loose: ${K.statusText}`)}const Se=await K.json();t(Ee=>Ee.map(Be=>Be.id===Se.id?Se:Be)),Ft(),alert(`Converted ${re} pack(s) of "${Se.name}" to loose. New stock: ${Se.quantity_in_stock} packs, ${Se.loose??0} loose units.`)}catch(K){console.error("Failed to convert to loose:",K),p(K.message||"Failed to convert to loose. Please try again.")}finally{d(!1)}},qe=()=>{te(!0)},We=()=>{te(!1)},ze=async()=>{d(!0),p(null);try{const J=await pe("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!J.ok){const G=await J.json();throw new Error(G.message||`Failed to add default medications: ${J.statusText}`)}alert("Default medications added successfully."),se(),We()}catch(J){console.error("Failed to add default medications:",J),p(J.message||"Failed to add default medications. Please try again.")}finally{d(!1)}};return f?r.jsx("div",{className:"loading-indicator",children:"Loading Inventory..."}):u?r.jsxs("div",{className:"error-indicator",children:["Error: ",u]}):r.jsxs("div",{className:"pharmacy-inventory-page",children:[r.jsxs("div",{className:"inventory-header-controls",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{onClick:()=>e(-1),className:"action-icon-button",title:"Go Back",children:r.jsx(Qt,{size:24})}),r.jsx("h2",{className:"inventory-page-title",children:"Pharmacy Inventory"})]}),r.jsxs("div",{className:"inventory-actions-group",children:[r.jsxs("div",{className:"action-group-left",children:[r.jsxs("button",{onClick:()=>e("/dashboard/inventory/add"),className:"action-button add-drug-button",children:[r.jsx(as,{size:18,className:"button-icon"}),"Add New Drug"]}),r.jsxs("button",{onClick:()=>e("/dashboard/purchase"),className:"action-button add-purchase-button",children:[r.jsx(as,{size:18,className:"button-icon"}),"Open Purchase Page"]}),r.jsxs("button",{onClick:()=>e("/dashboard/distributors"),className:"action-button view-distributors-button",children:[r.jsx(as,{size:18,className:"button-icon"}),"View Distributors"]})]}),r.jsxs("div",{className:"action-group-right",children:[r.jsx("button",{onClick:k,className:"action-button download-csv-button",children:"Download CSV"}),r.jsxs("button",{onClick:qe,className:"action-button add-defaults-button",children:[r.jsx(as,{size:18,className:"button-icon"}),"Add Default Medications"]}),r.jsxs("button",{onClick:Ae,className:"action-button delete-selected-drugs-button",disabled:q.size===0,children:[r.jsx(Sr,{size:18,className:"button-icon"}),"Delete Selected (",q.size,")"]}),r.jsxs("button",{onClick:nt,className:"action-button delete-all-drugs-button",children:[r.jsx(Sr,{size:18,className:"button-icon"}),"Delete All Drugs"]})]})]})]}),r.jsxs("div",{className:"search-bar-container",children:[r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search drugs by name, brand, description, or supplier...",value:o,onChange:J=>l(J.target.value),className:"inventory-search-input"}),r.jsx(ss,{size:18,className:"search-input-icon"})]}),r.jsxs("div",{className:"filter-dropdown-wrapper",children:[r.jsx("label",{htmlFor:"filter-option",className:"sr-only",children:"Filter Inventory"}),r.jsxs("select",{id:"filter-option",value:v,onChange:J=>N(J.target.value),className:"inventory-filter-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})]})]}),r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-header",children:r.jsx("input",{type:"checkbox",onChange:J=>{if(J.target.checked){const G=new Set(i.map(K=>K.id));H(G)}else H(new Set)},checked:q.size===i.length&&i.length>0,disabled:i.length===0})}),r.jsx("th",{className:"drug-name-header",children:"Drug Name"}),r.jsx("th",{className:"brand-name-header",children:"Brand Name"}),r.jsx("th",{className:"pack-header",children:"Pack"}),r.jsx("th",{className:"expiry-header",children:"Expiry"}),r.jsx("th",{className:"text-stock qty-header",children:"Stock"}),r.jsx("th",{className:"text-price mrp-header",children:"MRP"}),r.jsx("th",{className:"text-cost rate-header",children:"Rate"}),r.jsx("th",{className:"box-number-header",children:"Box Number"}),r.jsx("th",{className:"discount-header",children:"Discount (%)"}),r.jsx("th",{className:"margin-header",children:"Margin (%)"}),r.jsx("th",{className:"hidden-loose-price",children:"Loose Price"}),r.jsx("th",{className:"actions-cell",children:"Actions"}),r.jsx("th",{className:"expand-collapse-header"})]})}),r.jsxs("tbody",{children:[i.length===0&&r.jsx("tr",{className:"no-results-message",children:r.jsx("td",{colSpan:15,children:"No drugs found matching your search."})}),i.map(J=>r.jsxs(r.Fragment,{children:[r.jsxs("tr",{className:"drug-row",onClick:()=>{const G=new Set(g);G.has(J.id)&&J.id!==void 0?G.delete(J.id):J.id!==void 0&&G.add(J.id),b(G)},children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx("input",{type:"checkbox",onClick:G=>G.stopPropagation(),checked:q.has(J.id),onChange:()=>{const G=new Set(q);G.has(J.id)?G.delete(J.id):G.add(J.id),H(G)}})}),r.jsx("td",{className:"drug-name-cell",children:J.name||"-"}),r.jsx("td",{className:"brand-name-cell",children:J.brand_name||"-"}),r.jsx("td",{className:"text-muted pack-cell",children:J.unit||"-"}),r.jsx("td",{className:"text-muted",children:J.expiry_date?new Date(J.expiry_date).toLocaleDateString():"-"}),r.jsxs("td",{className:`text-stock ${J.quantity_in_stock<=qS?"low-stock":""}`,children:[r.jsxs("div",{children:[J.quantity_in_stock," packs"]}),r.jsx("div",{className:"loose-quantity",children:J.loose!==null&&J.loose!==void 0?`${J.loose} loose`:""})]}),r.jsxs("td",{className:"text-muted text-price",children:["",typeof J.price=="number"?J.price.toFixed(2):"N/A"]}),r.jsx("td",{className:"text-muted text-cost",children:J.buying_price!==null&&J.buying_price!==void 0?`${J.buying_price.toFixed(2)}`:"-"}),r.jsx("td",{className:"text-muted",children:J.box_number||"-"}),r.jsx("td",{className:"text-muted",children:J.discount!==null&&J.discount!==void 0?`${J.discount.toFixed(2)}%`:"-"}),r.jsx("td",{className:"text-muted",children:(()=>{const G=J.price||0,K=J.buying_price||0,Se=J.discount||0,Ee=J.gst||0,at=K*(1-Se/100)*(1+Ee/100),gt=G-at;return`${(G>0?gt/G*100:0).toFixed(2)}%`})()}),r.jsx("td",{className:"text-muted hidden-loose-price",children:(()=>{const G=Ke(J.unit);return G&&G>0&&typeof J.price=="number"?`${(J.price/G).toFixed(2)}`:"N/A"})()}),r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsx("button",{onClick:()=>e(`/dashboard/inventory/edit/${J.id}`),className:"action-icon-button",title:"Edit Drug",children:r.jsx(_d,{size:18})}),r.jsx("button",{onClick:()=>ce(J),className:"action-icon-button delete-button",title:"Delete Drug",children:r.jsx(Sr,{size:18})}),r.jsx("button",{onClick:()=>{L(J),T(!0)},className:"action-icon-button adjust-stock-button",title:"Adjust Stock",children:r.jsx(xI,{size:18})}),r.jsx("button",{onClick:()=>rt(J),className:"action-icon-button convert-to-loose-button",title:"Convert to Loose",disabled:!J.unit||Ke(J.unit)===null,children:r.jsx(KI,{size:18})})]})}),r.jsx("td",{className:"expand-collapse-cell",children:g.has(J.id)?r.jsx(Wx,{size:20}):r.jsx(Yx,{size:20})})]},J.id),g.has(J.id)&&r.jsx("tr",{className:"collapsible-row",children:r.jsx("td",{colSpan:15,children:r.jsxs("div",{className:"collapsible-content",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Drug Name:"})," ",J.name||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",J.description||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Supplier:"})," ",J.supplier||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Brand Name:"})," ",J.brand_name||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Batch:"})," ",J.batch||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"HSN Code:"})," ",J.hsn_code||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"MFG:"})," ",J.mfg||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Loose:"})," ",J.loose!==null&&J.loose!==void 0?J.loose:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Loose Price:"}),(()=>{const G=Ke(J.unit);return G&&G>0&&typeof J.price=="number"?`${(J.price/G).toFixed(2)}`:"N/A"})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"GST:"})," ",J.gst!==null&&J.gst!==void 0?`${J.gst.toFixed(2)}%`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Discount:"})," ",J.discount!==null&&J.discount!==void 0?`${J.discount.toFixed(2)}%`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Calculated Margin:"}),(()=>{const G=J.price||0,K=J.buying_price||0,Se=J.discount||0,Ee=J.gst||0,at=K*(1-Se/100)*(1+Ee/100),gt=G-at;return`${(G>0?gt/G*100:0).toFixed(2)}%`})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",new Date(J.last_updated).toLocaleString()]})]})})})]}))]})]})}),I&&U&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Le,className:"modal-close-button",children:r.jsx(ci,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),r.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',r.jsx("span",{className:"drug-name",children:U.name||"Unnamed Drug"}),'"? This action cannot be undone.']}),u&&r.jsx("div",{className:"modal-error-message",children:u}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Le,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ne,className:"button-delete",children:"Delete"})]})]})}),E&&F&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:M,className:"modal-close-button",children:r.jsx(ci,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:F.name||"Unnamed Drug"}),r.jsx("br",{}),"Current Stock: ",F.quantity_in_stock]}),u&&r.jsx("div",{className:"modal-error-message",children:u}),r.jsxs("form",{onSubmit:we,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),r.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:Q,onChange:fe,placeholder:"e.g., 10 or -5",className:"form-input"}),r.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:M,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),$&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ut,className:"modal-close-button",children:r.jsx(ci,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),u&&r.jsx("div",{className:"modal-error-message",children:u}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ut,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:it,className:"button-delete",children:"Delete All"})]})]})}),je&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:De,className:"modal-close-button",children:r.jsx(ci,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of Selected Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:q.size})," selected drug(s)? This action cannot be undone."]}),u&&r.jsx("div",{className:"modal-error-message",children:u}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:De,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ve,className:"button-delete",children:"Delete Selected"})]})]})}),ie&&Y&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ft,className:"modal-close-button",children:r.jsx(ci,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Convert Pack to Loose"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:Y.name||"Unnamed Drug"}),r.jsx("br",{}),"Current Packs in Stock: ",Y.quantity_in_stock??0,r.jsx("br",{}),"Current Loose Units: ",Y.loose??0,r.jsx("br",{}),"Pack Size: ",Ke(Y.unit)||"N/A"," units per pack"]}),u&&r.jsx("div",{className:"modal-error-message",children:u}),r.jsxs("form",{onSubmit:ve,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"packs-to-convert",className:"form-label",children:"Number of Packs to Convert"}),r.jsx("input",{type:"number",name:"packs-to-convert",id:"packs-to-convert",required:!0,min:"1",step:"1",value:re,onChange:_t,placeholder:"e.g., 1",className:"form-input"}),r.jsxs("p",{className:"form-help-text",children:["This will reduce pack quantity by ",re," and add ",re*(Ke(Y.unit)||0)," to loose quantity."]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ft,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Convert to Loose"})]})]})]})}),P&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:We,className:"modal-close-button",children:r.jsx(ci,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Add Default Medications"}),r.jsx("p",{className:"modal-description",children:"Are you sure you want to add default medications to the inventory? This will add a predefined set of common medications."}),u&&r.jsx("div",{className:"modal-error-message",children:u}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:We,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ze,className:"button-submit",children:"Add Defaults"})]})]})})]})},U4="_container_1ihgb_1",q4="_title_1ihgb_17",V4="_dateRangeContainer_1ihgb_31",H4="_dateInputLabel_1ihgb_51",G4="_dateInput_1ihgb_51",Y4="_fetchButton_1ihgb_87",W4="_sectionTitle_1ihgb_123",Q4="_tableContainer_1ihgb_137",J4="_analysisTable_1ihgb_153",K4="_textRight_1ihgb_217",X4="_textGreen_1ihgb_225",Z4="_textRed_1ihgb_233",eO="_textOrange_1ihgb_249",tO="_alertBox_1ihgb_265",nO="_alertBoxError_1ihgb_283",iO="_alertBoxIcon_1ihgb_295",rO="_loadingContainer_1ihgb_303",aO="_viewSwitcher_1ihgb_321",sO="_viewButton_1ihgb_339",oO="_viewButtonActive_1ihgb_365",lO="_viewButtonInactive_1ihgb_383",cO="_reasonDistribution_1ihgb_497",uO="_totalRow_1ihgb_513",Vt={container:U4,title:q4,dateRangeContainer:V4,dateInputLabel:H4,dateInput:G4,fetchButton:Y4,sectionTitle:W4,tableContainer:Q4,analysisTable:J4,textRight:K4,textGreen:X4,textRed:Z4,textOrange:eO,alertBox:tO,alertBoxError:nO,alertBoxIcon:iO,loadingContainer:rO,viewSwitcher:aO,viewButton:sO,viewButtonActive:oO,viewButtonInactive:lO,reasonDistribution:cO,totalRow:uO},t1=()=>{const e=Nt(),n=new Date().toISOString().split("T")[0],[t,i]=w.useState(n),[a,o]=w.useState(n),[l,f]=w.useState(null),[d,u]=w.useState(!1),[p,g]=w.useState(null),[b,v]=w.useState("analysis"),N=async()=>{if(u(!0),g(null),f(null),!t||!a){g("Please select both start and end dates."),u(!1);return}if(new Date(t)>new Date(a)){g("Start date cannot be after end date."),u(!1);return}try{const T=vR();if(!T){g("Clinic ID not found. Please log in again."),u(!1);return}const I=await pe(`/api/inventory/comprehensive-analysis?startDate=${t}&endDate=${a}&clinicId=${T}`);if(!I.ok){const U=await I.json();throw new Error(U.message||`HTTP error! status: ${I.status}`)}const D=await I.json();f(D)}catch(T){console.error("Failed to fetch comprehensive inventory analysis data:",T),g(T.message||"Failed to fetch data. Check console for details.")}finally{u(!1)}},k=()=>{N()},E=T=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(T);return r.jsxs("div",{className:Vt.container,children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[" ",r.jsx("h2",{className:Vt.title,children:"Inventory Analysis & Management"}),r.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 text-sm",children:"Back"})]}),r.jsxs("div",{className:Vt.viewSwitcher,children:[r.jsxs("button",{onClick:()=>v("analysis"),className:`${Vt.viewButton} ${b==="analysis"?Vt.viewButtonActive:Vt.viewButtonInactive}`,children:[r.jsx(uI,{size:16})," ","Analysis"]}),r.jsxs("button",{onClick:()=>v("labInventory"),className:`${Vt.viewButton} ${b==="labInventory"?Vt.viewButtonActive:Vt.viewButtonInactive}`,children:[r.jsx(ow,{size:16}),"Lab Test Inventory"]}),r.jsxs("button",{onClick:()=>e("/dashboard/inventory"),className:`${Vt.viewButton} ${b==="pharmacyInventory"?Vt.viewButtonActive:Vt.viewButtonInactive}`,children:[r.jsx(Nb,{size:16}),"Pharmacy Inventory"]})]}),b==="analysis"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:Vt.dateRangeContainer,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"start-date-inventory",className:Vt.dateInputLabel,children:"Start Date:"}),r.jsx("input",{type:"date",id:"start-date-inventory",value:t,onChange:T=>i(T.target.value),className:Vt.dateInput})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"end-date-inventory",className:Vt.dateInputLabel,children:"End Date:"}),r.jsx("input",{type:"date",id:"end-date-inventory",value:a,onChange:T=>o(T.target.value),className:Vt.dateInput})]}),r.jsx("button",{onClick:k,disabled:d,className:Vt.fetchButton,children:d?"Loading...":"Fetch Comprehensive Analysis"})]}),p&&r.jsxs("div",{className:`${Vt.alertBox} ${Vt.alertBoxError}`,role:"alert",children:[r.jsx("div",{className:Vt.alertBoxIcon,children:r.jsx(Ri,{size:18})}),r.jsxs("div",{children:[" ",r.jsxs("span",{children:["Error: ",p]})]})]}),d&&r.jsxs("div",{className:Vt.loadingContainer,children:[" ",r.jsx("p",{children:"Loading data..."})]}),l&&!d&&r.jsxs("div",{className:"space-y-6",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:Vt.sectionTitle,children:["Pharmacy Inventory Changes (",l.startDate," to ",l.endDate,")"]}),l.pharmacyAnalysis.length>0?r.jsx("div",{className:Vt.tableContainer,children:r.jsxs("table",{className:Vt.analysisTable,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Drug Name"}),r.jsx("th",{children:"Unit"}),r.jsx("th",{className:Vt.textRight,children:"Price"}),r.jsx("th",{children:"Qty In (+)"}),r.jsx("th",{className:Vt.textRight,children:"Packs Out (-)"}),r.jsx("th",{className:Vt.textRight,children:"Loose Qty Out (-)"}),r.jsx("th",{className:Vt.textRight,children:"Packs Converted"})]})}),r.jsx("tbody",{children:l.pharmacyAnalysis.map(T=>r.jsxs("tr",{children:[r.jsx("td",{children:T.name}),r.jsx("td",{children:T.unit||"N/A"}),r.jsx("td",{className:Vt.textRight,children:E(T.price)}),r.jsxs("td",{className:Vt.textGreen,children:[" ",r.jsxs("div",{className:Vt.reasonDistribution,children:[Object.entries(T.quantity_in_by_reason).map(([I,D])=>r.jsxs("div",{children:[r.jsxs("span",{children:[I,":"]}),r.jsx("span",{children:D})]},I)),Object.keys(T.quantity_in_by_reason).length>0&&r.jsxs("div",{className:Vt.totalRow,children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:T.quantity_in})]})]})]}),r.jsxs("td",{className:Vt.textRed,children:[" ",r.jsxs("div",{className:Vt.reasonDistribution,children:[Object.entries(T.quantity_out_by_reason||{}).map(([I,D])=>r.jsxs("div",{children:[r.jsxs("span",{children:[I,":"]}),r.jsx("span",{children:D})]},I)),Object.keys(T.quantity_out_by_reason||{}).length>0&&r.jsxs("div",{className:Vt.totalRow,children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:T.quantity_out})]}),(!T.quantity_out_by_reason||Object.keys(T.quantity_out_by_reason).length===0)&&r.jsx("div",{className:Vt.textRight,children:T.quantity_out})]})]}),r.jsx("td",{className:`${Vt.textRed} ${Vt.textRight}`,children:T.loose_quantity_out}),r.jsx("td",{className:`${Vt.textOrange} ${Vt.textRight}`,children:T.quantity_converted})]},T.drug_id))})]})}):r.jsx("p",{className:"text-gray-500",children:"No pharmacy inventory changes found for the selected period."})]})]})]}),b==="labInventory"&&r.jsxs("div",{className:"mt-4",children:[" ",r.jsx(cw,{})]}),b==="pharmacyInventory"&&r.jsxs("div",{className:"mt-4",children:[" ",r.jsx(d2,{})]})]})};var Xv,VS;function dO(){if(VS)return Xv;VS=1;var e="Expected a function",n=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt,d=typeof zc=="object"&&zc&&zc.Object===Object&&zc,u=typeof self=="object"&&self&&self.Object===Object&&self,p=d||u||Function("return this")(),g=Object.prototype,b=g.toString,v=Math.max,N=Math.min,k=function(){return p.Date.now()};function E(O,$,B){var q,H,F,L,Q,ne,ie=0,oe=!1,Y=!1,z=!0;if(typeof O!="function")throw new TypeError(e);$=U($)||0,T(B)&&(oe=!!B.leading,Y="maxWait"in B,F=Y?v(U(B.maxWait)||0,$):F,z="trailing"in B?!!B.trailing:z);function re(Le){var Ne=q,nt=H;return q=H=void 0,ie=Le,L=O.apply(nt,Ne),L}function X(Le){return ie=Le,Q=setTimeout(se,$),oe?re(Le):L}function P(Le){var Ne=Le-ne,nt=Le-ie,ut=$-Ne;return Y?N(ut,F-nt):ut}function te(Le){var Ne=Le-ne,nt=Le-ie;return ne===void 0||Ne>=$||Ne<0||Y&&nt>=F}function se(){var Le=k();if(te(Le))return M(Le);Q=setTimeout(se,P(Le))}function M(Le){return Q=void 0,z&&q?re(Le):(q=H=void 0,L)}function fe(){Q!==void 0&&clearTimeout(Q),ie=0,q=ne=H=Q=void 0}function we(){return Q===void 0?L:M(k())}function ce(){var Le=k(),Ne=te(Le);if(q=arguments,H=this,ne=Le,Ne){if(Q===void 0)return X(ne);if(Y)return Q=setTimeout(se,$),re(ne)}return Q===void 0&&(Q=setTimeout(se,$)),L}return ce.cancel=fe,ce.flush=we,ce}function T(O){var $=typeof O;return!!O&&($=="object"||$=="function")}function I(O){return!!O&&typeof O=="object"}function D(O){return typeof O=="symbol"||I(O)&&b.call(O)==t}function U(O){if(typeof O=="number")return O;if(D(O))return n;if(T(O)){var $=typeof O.valueOf=="function"?O.valueOf():O;O=T($)?$+"":$}if(typeof O!="string")return O===0?O:+O;O=O.replace(i,"");var B=o.test(O);return B||l.test(O)?f(O.slice(2),B?2:8):a.test(O)?n:+O}return Xv=E,Xv}var fO=dO();const jb=Pd(fO),uw=async()=>{const e=await pe("/api/clinic-subscriptions/plans",{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to fetch clinic subscription plans")}return e.json()},hO=async e=>{const n=await pe(`/api/clinic-subscriptions/cancel/${e}`,{method:"PUT"});if(!n.ok){const t=await n.json();throw new Error(t.message||"Failed to cancel clinic subscription")}return n.json()},pO=async e=>{const n=await pe(`/api/clinics/${e}/subscription-status`,{method:"GET"});if(!n.ok){const t=await n.json();throw new Error(t.message||`Failed to fetch subscription status for clinic ${e}`)}return n.json()},mO=async e=>{const n=await pe(`/api/clinic-subscriptions/plans/${e}`,{method:"GET"});if(!n.ok){const t=await n.json();throw new Error(t.message||"Failed to fetch clinic subscription plan")}return n.json()},gO=async e=>{const n=await pe("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const t=await n.json();throw new Error(t.message||"Failed to create clinic subscription plan")}return n.json()},yO=async(e,n)=>{const t=await pe(`/api/clinic-subscriptions/plans/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const i=await t.json();throw new Error(i.message||"Failed to update clinic subscription plan")}return t.json()},xO=async e=>{const n=await pe(`/api/clinic-subscriptions/plans/${e}`,{method:"DELETE"});if(!n.ok){const t=await n.json();throw new Error(t.message||"Failed to deactivate clinic subscription plan")}return n.json()},bO=async e=>{const n=await pe("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:e})});if(!n.ok){const t=await n.json();throw new Error(t.message||"Failed to initiate clinic subscription")}return n.json()},vO=async()=>{try{const e=await pe("/api/clinic-subscriptions/pending",{method:"GET"});return e.ok?e.json():null}catch(e){return console.error("Error checking for pending subscription:",e),null}},f2=async()=>{const e=await pe("/api/clinics/subscription-status",{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to fetch clinic subscription status")}return e.json()};var Zv={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var HS;function wO(){return HS||(HS=1,function(e){(function(){var n={}.hasOwnProperty;function t(){for(var o="",l=0;l<arguments.length;l++){var f=arguments[l];f&&(o=a(o,i(f)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var f in o)n.call(o,f)&&o[f]&&(l=a(l,f));return l}function a(o,l){return l?o?o+" "+l:o+l:o}e.exports?(t.default=t,e.exports=t):window.classNames=t})()}(Zv)),Zv.exports}var SO=wO();const Bc=Pd(SO);function kd(e){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},kd(e)}function NO(e,n){if(kd(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var i=t.call(e,n);if(kd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function h2(e){var n=NO(e,"string");return kd(n)=="symbol"?n:n+""}function Mm(e,n,t){return(n=h2(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function GS(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,i)}return t}function Tt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?GS(Object(t),!0).forEach(function(i){Mm(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):GS(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function CO(e){if(Array.isArray(e))return e}function jO(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var i,a,o,l,f=[],d=!0,u=!1;try{if(o=(t=t.call(e)).next,n===0){if(Object(t)!==t)return;d=!1}else for(;!(d=(i=o.call(t)).done)&&(f.push(i.value),f.length!==n);d=!0);}catch(p){u=!0,a=p}finally{try{if(!d&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return f}}function n1(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}function p2(e,n){if(e){if(typeof e=="string")return n1(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n1(e,n):void 0}}function _O(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function El(e,n){return CO(e)||jO(e,n)||p2(e,n)||_O()}function kO(e,n){if(e==null)return{};var t={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(n.indexOf(i)!==-1)continue;t[i]=e[i]}return t}function Pl(e,n){if(e==null)return{};var t,i,a=kO(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var EO=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function TO(e){var n=e.defaultInputValue,t=n===void 0?"":n,i=e.defaultMenuIsOpen,a=i===void 0?!1:i,o=e.defaultValue,l=o===void 0?null:o,f=e.inputValue,d=e.menuIsOpen,u=e.onChange,p=e.onInputChange,g=e.onMenuClose,b=e.onMenuOpen,v=e.value,N=Pl(e,EO),k=w.useState(f!==void 0?f:t),E=El(k,2),T=E[0],I=E[1],D=w.useState(d!==void 0?d:a),U=El(D,2),O=U[0],$=U[1],B=w.useState(v!==void 0?v:l),q=El(B,2),H=q[0],F=q[1],L=w.useCallback(function(re,X){typeof u=="function"&&u(re,X),F(re)},[u]),Q=w.useCallback(function(re,X){var P;typeof p=="function"&&(P=p(re,X)),I(P!==void 0?P:re)},[p]),ne=w.useCallback(function(){typeof b=="function"&&b(),$(!0)},[b]),ie=w.useCallback(function(){typeof g=="function"&&g(),$(!1)},[g]),oe=f!==void 0?f:T,Y=d!==void 0?d:O,z=v!==void 0?v:H;return Tt(Tt({},N),{},{inputValue:oe,menuIsOpen:Y,onChange:L,onInputChange:Q,onMenuClose:ie,onMenuOpen:ne,value:z})}function It(){return It=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},It.apply(null,arguments)}function AO(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function YS(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,h2(i.key),i)}}function PO(e,n,t){return n&&YS(e.prototype,n),t&&YS(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function i1(e,n){return i1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},i1(e,n)}function DO(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&i1(e,n)}function Zx(e){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zx(e)}function m2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m2=function(){return!!e})()}function IO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MO(e,n){if(n&&(kd(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IO(e)}function RO(e){var n=m2();return function(){var t,i=Zx(e);if(n){var a=Zx(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return MO(this,t)}}function OO(e){if(Array.isArray(e))return n1(e)}function LO(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FO(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dw(e){return OO(e)||LO(e)||p2(e)||FO()}function $O(e){if(e.sheet)return e.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===e)return document.styleSheets[n]}function zO(e){var n=document.createElement("style");return n.setAttribute("data-emotion",e.key),e.nonce!==void 0&&n.setAttribute("nonce",e.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var BO=function(){function e(t){var i=this;this._insertTag=function(a){var o;i.tags.length===0?i.insertionPoint?o=i.insertionPoint.nextSibling:i.prepend?o=i.container.firstChild:o=i.before:o=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(a,o),i.tags.push(a)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var n=e.prototype;return n.hydrate=function(i){i.forEach(this._insertTag)},n.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(zO(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var o=$O(a);try{o.insertRule(i,o.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(i));this.ctr++},n.flush=function(){this.tags.forEach(function(i){var a;return(a=i.parentNode)==null?void 0:a.removeChild(i)}),this.tags=[],this.ctr=0},e}(),br="-ms-",eb="-moz-",Nn="-webkit-",g2="comm",fw="rule",hw="decl",UO="@import",y2="@keyframes",qO="@layer",VO=Math.abs,_b=String.fromCharCode,HO=Object.assign;function GO(e,n){return tr(e,0)^45?(((n<<2^tr(e,0))<<2^tr(e,1))<<2^tr(e,2))<<2^tr(e,3):0}function x2(e){return e.trim()}function YO(e,n){return(e=n.exec(e))?e[0]:e}function Cn(e,n,t){return e.replace(n,t)}function r1(e,n){return e.indexOf(n)}function tr(e,n){return e.charCodeAt(n)|0}function Ym(e,n,t){return e.slice(n,t)}function Io(e){return e.length}function pw(e){return e.length}function dx(e,n){return n.push(e),e}function WO(e,n){return e.map(n).join("")}var kb=1,Ch=1,b2=0,da=0,Ii=0,Dh="";function Eb(e,n,t,i,a,o,l){return{value:e,root:n,parent:t,type:i,props:a,children:o,line:kb,column:Ch,length:l,return:""}}function Nm(e,n){return HO(Eb("",null,null,"",null,null,0),e,{length:-e.length},n)}function QO(){return Ii}function JO(){return Ii=da>0?tr(Dh,--da):0,Ch--,Ii===10&&(Ch=1,kb--),Ii}function Oa(){return Ii=da<b2?tr(Dh,da++):0,Ch++,Ii===10&&(Ch=1,kb++),Ii}function Fo(){return tr(Dh,da)}function Ix(){return da}function ig(e,n){return Ym(Dh,e,n)}function Wm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function v2(e){return kb=Ch=1,b2=Io(Dh=e),da=0,[]}function w2(e){return Dh="",e}function Mx(e){return x2(ig(da-1,a1(e===91?e+2:e===40?e+1:e)))}function KO(e){for(;(Ii=Fo())&&Ii<33;)Oa();return Wm(e)>2||Wm(Ii)>3?"":" "}function XO(e,n){for(;--n&&Oa()&&!(Ii<48||Ii>102||Ii>57&&Ii<65||Ii>70&&Ii<97););return ig(e,Ix()+(n<6&&Fo()==32&&Oa()==32))}function a1(e){for(;Oa();)switch(Ii){case e:return da;case 34:case 39:e!==34&&e!==39&&a1(Ii);break;case 40:e===41&&a1(e);break;case 92:Oa();break}return da}function ZO(e,n){for(;Oa()&&e+Ii!==57;)if(e+Ii===84&&Fo()===47)break;return"/*"+ig(n,da-1)+"*"+_b(e===47?e:Oa())}function eL(e){for(;!Wm(Fo());)Oa();return ig(e,da)}function tL(e){return w2(Rx("",null,null,null,[""],e=v2(e),0,[0],e))}function Rx(e,n,t,i,a,o,l,f,d){for(var u=0,p=0,g=l,b=0,v=0,N=0,k=1,E=1,T=1,I=0,D="",U=a,O=o,$=i,B=D;E;)switch(N=I,I=Oa()){case 40:if(N!=108&&tr(B,g-1)==58){r1(B+=Cn(Mx(I),"&","&\f"),"&\f")!=-1&&(T=-1);break}case 34:case 39:case 91:B+=Mx(I);break;case 9:case 10:case 13:case 32:B+=KO(N);break;case 92:B+=XO(Ix()-1,7);continue;case 47:switch(Fo()){case 42:case 47:dx(nL(ZO(Oa(),Ix()),n,t),d);break;default:B+="/"}break;case 123*k:f[u++]=Io(B)*T;case 125*k:case 59:case 0:switch(I){case 0:case 125:E=0;case 59+p:T==-1&&(B=Cn(B,/\f/g,"")),v>0&&Io(B)-g&&dx(v>32?QS(B+";",i,t,g-1):QS(Cn(B," ","")+";",i,t,g-2),d);break;case 59:B+=";";default:if(dx($=WS(B,n,t,u,p,a,f,D,U=[],O=[],g),o),I===123)if(p===0)Rx(B,n,$,$,U,o,g,f,O);else switch(b===99&&tr(B,3)===110?100:b){case 100:case 108:case 109:case 115:Rx(e,$,$,i&&dx(WS(e,$,$,0,0,a,f,D,a,U=[],g),O),a,O,g,f,i?U:O);break;default:Rx(B,$,$,$,[""],O,0,f,O)}}u=p=v=0,k=T=1,D=B="",g=l;break;case 58:g=1+Io(B),v=N;default:if(k<1){if(I==123)--k;else if(I==125&&k++==0&&JO()==125)continue}switch(B+=_b(I),I*k){case 38:T=p>0?1:(B+="\f",-1);break;case 44:f[u++]=(Io(B)-1)*T,T=1;break;case 64:Fo()===45&&(B+=Mx(Oa())),b=Fo(),p=g=Io(D=B+=eL(Ix())),I++;break;case 45:N===45&&Io(B)==2&&(k=0)}}return o}function WS(e,n,t,i,a,o,l,f,d,u,p){for(var g=a-1,b=a===0?o:[""],v=pw(b),N=0,k=0,E=0;N<i;++N)for(var T=0,I=Ym(e,g+1,g=VO(k=l[N])),D=e;T<v;++T)(D=x2(k>0?b[T]+" "+I:Cn(I,/&\f/g,b[T])))&&(d[E++]=D);return Eb(e,n,t,a===0?fw:f,d,u,p)}function nL(e,n,t){return Eb(e,n,t,g2,_b(QO()),Ym(e,2,-2),0)}function QS(e,n,t,i){return Eb(e,n,t,hw,Ym(e,0,i),Ym(e,i+1,-1),i)}function gh(e,n){for(var t="",i=pw(e),a=0;a<i;a++)t+=n(e[a],a,e,n)||"";return t}function iL(e,n,t,i){switch(e.type){case qO:if(e.children.length)break;case UO:case hw:return e.return=e.return||e.value;case g2:return"";case y2:return e.return=e.value+"{"+gh(e.children,i)+"}";case fw:e.value=e.props.join(",")}return Io(t=gh(e.children,i))?e.return=e.value+"{"+t+"}":""}function rL(e){var n=pw(e);return function(t,i,a,o){for(var l="",f=0;f<n;f++)l+=e[f](t,i,a,o)||"";return l}}function aL(e){return function(n){n.root||(n=n.return)&&e(n)}}function sL(e){var n=Object.create(null);return function(t){return n[t]===void 0&&(n[t]=e(t)),n[t]}}var oL=function(n,t,i){for(var a=0,o=0;a=o,o=Fo(),a===38&&o===12&&(t[i]=1),!Wm(o);)Oa();return ig(n,da)},lL=function(n,t){var i=-1,a=44;do switch(Wm(a)){case 0:a===38&&Fo()===12&&(t[i]=1),n[i]+=oL(da-1,t,i);break;case 2:n[i]+=Mx(a);break;case 4:if(a===44){n[++i]=Fo()===58?"&\f":"",t[i]=n[i].length;break}default:n[i]+=_b(a)}while(a=Oa());return n},cL=function(n,t){return w2(lL(v2(n),t))},JS=new WeakMap,uL=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var t=n.value,i=n.parent,a=n.column===i.column&&n.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(n.props.length===1&&t.charCodeAt(0)!==58&&!JS.get(i))&&!a){JS.set(n,!0);for(var o=[],l=cL(t,o),f=i.props,d=0,u=0;d<l.length;d++)for(var p=0;p<f.length;p++,u++)n.props[u]=o[d]?l[d].replace(/&\f/g,f[p]):f[p]+" "+l[d]}}},dL=function(n){if(n.type==="decl"){var t=n.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(n.return="",n.value="")}};function S2(e,n){switch(GO(e,n)){case 5103:return Nn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Nn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Nn+e+eb+e+br+e+e;case 6828:case 4268:return Nn+e+br+e+e;case 6165:return Nn+e+br+"flex-"+e+e;case 5187:return Nn+e+Cn(e,/(\w+).+(:[^]+)/,Nn+"box-$1$2"+br+"flex-$1$2")+e;case 5443:return Nn+e+br+"flex-item-"+Cn(e,/flex-|-self/,"")+e;case 4675:return Nn+e+br+"flex-line-pack"+Cn(e,/align-content|flex-|-self/,"")+e;case 5548:return Nn+e+br+Cn(e,"shrink","negative")+e;case 5292:return Nn+e+br+Cn(e,"basis","preferred-size")+e;case 6060:return Nn+"box-"+Cn(e,"-grow","")+Nn+e+br+Cn(e,"grow","positive")+e;case 4554:return Nn+Cn(e,/([^-])(transform)/g,"$1"+Nn+"$2")+e;case 6187:return Cn(Cn(Cn(e,/(zoom-|grab)/,Nn+"$1"),/(image-set)/,Nn+"$1"),e,"")+e;case 5495:case 3959:return Cn(e,/(image-set\([^]*)/,Nn+"$1$`$1");case 4968:return Cn(Cn(e,/(.+:)(flex-)?(.*)/,Nn+"box-pack:$3"+br+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Nn+e+e;case 4095:case 3583:case 4068:case 2532:return Cn(e,/(.+)-inline(.+)/,Nn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Io(e)-1-n>6)switch(tr(e,n+1)){case 109:if(tr(e,n+4)!==45)break;case 102:return Cn(e,/(.+:)(.+)-([^]+)/,"$1"+Nn+"$2-$3$1"+eb+(tr(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~r1(e,"stretch")?S2(Cn(e,"stretch","fill-available"),n)+e:e}break;case 4949:if(tr(e,n+1)!==115)break;case 6444:switch(tr(e,Io(e)-3-(~r1(e,"!important")&&10))){case 107:return Cn(e,":",":"+Nn)+e;case 101:return Cn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Nn+(tr(e,14)===45?"inline-":"")+"box$3$1"+Nn+"$2$3$1"+br+"$2box$3")+e}break;case 5936:switch(tr(e,n+11)){case 114:return Nn+e+br+Cn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Nn+e+br+Cn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Nn+e+br+Cn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Nn+e+br+e+e}return e}var fL=function(n,t,i,a){if(n.length>-1&&!n.return)switch(n.type){case hw:n.return=S2(n.value,n.length);break;case y2:return gh([Nm(n,{value:Cn(n.value,"@","@"+Nn)})],a);case fw:if(n.length)return WO(n.props,function(o){switch(YO(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gh([Nm(n,{props:[Cn(o,/:(read-\w+)/,":"+eb+"$1")]})],a);case"::placeholder":return gh([Nm(n,{props:[Cn(o,/:(plac\w+)/,":"+Nn+"input-$1")]}),Nm(n,{props:[Cn(o,/:(plac\w+)/,":"+eb+"$1")]}),Nm(n,{props:[Cn(o,/:(plac\w+)/,br+"input-$1")]})],a)}return""})}},hL=[fL],pL=function(n){var t=n.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(k){var E=k.getAttribute("data-emotion");E.indexOf(" ")!==-1&&(document.head.appendChild(k),k.setAttribute("data-s",""))})}var a=n.stylisPlugins||hL,o={},l,f=[];l=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(k){for(var E=k.getAttribute("data-emotion").split(" "),T=1;T<E.length;T++)o[E[T]]=!0;f.push(k)});var d,u=[uL,dL];{var p,g=[iL,aL(function(k){p.insert(k)})],b=rL(u.concat(a,g)),v=function(E){return gh(tL(E),b)};d=function(E,T,I,D){p=I,v(E?E+"{"+T.styles+"}":T.styles),D&&(N.inserted[T.name]=!0)}}var N={key:t,sheet:new BO({key:t,container:l,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:o,registered:{},insert:d};return N.sheet.hydrate(f),N},e0={exports:{}},Tn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KS;function mL(){if(KS)return Tn;KS=1;var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,t=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,f=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,g=e?Symbol.for("react.suspense"):60113,b=e?Symbol.for("react.suspense_list"):60120,v=e?Symbol.for("react.memo"):60115,N=e?Symbol.for("react.lazy"):60116,k=e?Symbol.for("react.block"):60121,E=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,I=e?Symbol.for("react.scope"):60119;function D(O){if(typeof O=="object"&&O!==null){var $=O.$$typeof;switch($){case n:switch(O=O.type,O){case d:case u:case i:case o:case a:case g:return O;default:switch(O=O&&O.$$typeof,O){case f:case p:case N:case v:case l:return O;default:return $}}case t:return $}}}function U(O){return D(O)===u}return Tn.AsyncMode=d,Tn.ConcurrentMode=u,Tn.ContextConsumer=f,Tn.ContextProvider=l,Tn.Element=n,Tn.ForwardRef=p,Tn.Fragment=i,Tn.Lazy=N,Tn.Memo=v,Tn.Portal=t,Tn.Profiler=o,Tn.StrictMode=a,Tn.Suspense=g,Tn.isAsyncMode=function(O){return U(O)||D(O)===d},Tn.isConcurrentMode=U,Tn.isContextConsumer=function(O){return D(O)===f},Tn.isContextProvider=function(O){return D(O)===l},Tn.isElement=function(O){return typeof O=="object"&&O!==null&&O.$$typeof===n},Tn.isForwardRef=function(O){return D(O)===p},Tn.isFragment=function(O){return D(O)===i},Tn.isLazy=function(O){return D(O)===N},Tn.isMemo=function(O){return D(O)===v},Tn.isPortal=function(O){return D(O)===t},Tn.isProfiler=function(O){return D(O)===o},Tn.isStrictMode=function(O){return D(O)===a},Tn.isSuspense=function(O){return D(O)===g},Tn.isValidElementType=function(O){return typeof O=="string"||typeof O=="function"||O===i||O===u||O===o||O===a||O===g||O===b||typeof O=="object"&&O!==null&&(O.$$typeof===N||O.$$typeof===v||O.$$typeof===l||O.$$typeof===f||O.$$typeof===p||O.$$typeof===E||O.$$typeof===T||O.$$typeof===I||O.$$typeof===k)},Tn.typeOf=D,Tn}var XS;function gL(){return XS||(XS=1,e0.exports=mL()),e0.exports}var t0,ZS;function yL(){if(ZS)return t0;ZS=1;var e=gL(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[e.ForwardRef]=i,o[e.Memo]=a;function l(N){return e.isMemo(N)?a:o[N.$$typeof]||n}var f=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,g=Object.getPrototypeOf,b=Object.prototype;function v(N,k,E){if(typeof k!="string"){if(b){var T=g(k);T&&T!==b&&v(N,T,E)}var I=d(k);u&&(I=I.concat(u(k)));for(var D=l(N),U=l(k),O=0;O<I.length;++O){var $=I[O];if(!t[$]&&!(E&&E[$])&&!(U&&U[$])&&!(D&&D[$])){var B=p(k,$);try{f(N,$,B)}catch{}}}}return N}return t0=v,t0}yL();var xL=!0;function bL(e,n,t){var i="";return t.split(" ").forEach(function(a){e[a]!==void 0?n.push(e[a]+";"):a&&(i+=a+" ")}),i}var N2=function(n,t,i){var a=n.key+"-"+t.name;(i===!1||xL===!1)&&n.registered[a]===void 0&&(n.registered[a]=t.styles)},vL=function(n,t,i){N2(n,t,i);var a=n.key+"-"+t.name;if(n.inserted[t.name]===void 0){var o=t;do n.insert(t===o?"."+a:"",o,n.sheet,!0),o=o.next;while(o!==void 0)}};function wL(e){for(var n=0,t,i=0,a=e.length;a>=4;++i,a-=4)t=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,n=(t&65535)*1540483477+((t>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(a){case 3:n^=(e.charCodeAt(i+2)&255)<<16;case 2:n^=(e.charCodeAt(i+1)&255)<<8;case 1:n^=e.charCodeAt(i)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var SL={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},NL=/[A-Z]|^ms/g,CL=/_EMO_([^_]+?)_([^]*?)_EMO_/g,C2=function(n){return n.charCodeAt(1)===45},eN=function(n){return n!=null&&typeof n!="boolean"},n0=sL(function(e){return C2(e)?e:e.replace(NL,"-$&").toLowerCase()}),tN=function(n,t){switch(n){case"animation":case"animationName":if(typeof t=="string")return t.replace(CL,function(i,a,o){return Mo={name:a,styles:o,next:Mo},a})}return SL[n]!==1&&!C2(n)&&typeof t=="number"&&t!==0?t+"px":t};function Qm(e,n,t){if(t==null)return"";var i=t;if(i.__emotion_styles!==void 0)return i;switch(typeof t){case"boolean":return"";case"object":{var a=t;if(a.anim===1)return Mo={name:a.name,styles:a.styles,next:Mo},a.name;var o=t;if(o.styles!==void 0){var l=o.next;if(l!==void 0)for(;l!==void 0;)Mo={name:l.name,styles:l.styles,next:Mo},l=l.next;var f=o.styles+";";return f}return jL(e,n,t)}case"function":{if(e!==void 0){var d=Mo,u=t(e);return Mo=d,Qm(e,n,u)}break}}var p=t;return p}function jL(e,n,t){var i="";if(Array.isArray(t))for(var a=0;a<t.length;a++)i+=Qm(e,n,t[a])+";";else for(var o in t){var l=t[o];if(typeof l!="object"){var f=l;eN(f)&&(i+=n0(o)+":"+tN(o,f)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&n==null)for(var d=0;d<l.length;d++)eN(l[d])&&(i+=n0(o)+":"+tN(o,l[d])+";");else{var u=Qm(e,n,l);switch(o){case"animation":case"animationName":{i+=n0(o)+":"+u+";";break}default:i+=o+"{"+u+"}"}}}return i}var nN=/label:\s*([^\s;{]+)\s*(;|$)/g,Mo;function j2(e,n,t){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,a="";Mo=void 0;var o=e[0];if(o==null||o.raw===void 0)i=!1,a+=Qm(t,n,o);else{var l=o;a+=l[0]}for(var f=1;f<e.length;f++)if(a+=Qm(t,n,e[f]),i){var d=o;a+=d[f]}nN.lastIndex=0;for(var u="",p;(p=nN.exec(a))!==null;)u+="-"+p[1];var g=wL(a)+u;return{name:g,styles:a,next:Mo}}var _L=function(n){return n()},kL=dS.useInsertionEffect?dS.useInsertionEffect:!1,EL=kL||_L,_2=w.createContext(typeof HTMLElement<"u"?pL({key:"css"}):null);_2.Provider;var TL=function(n){return w.forwardRef(function(t,i){var a=w.useContext(_2);return n(t,a,i)})},AL=w.createContext({}),mw={}.hasOwnProperty,s1="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",PL=function(n,t){var i={};for(var a in t)mw.call(t,a)&&(i[a]=t[a]);return i[s1]=n,i},DL=function(n){var t=n.cache,i=n.serialized,a=n.isStringTag;return N2(t,i,a),EL(function(){return vL(t,i,a)}),null},IL=TL(function(e,n,t){var i=e.css;typeof i=="string"&&n.registered[i]!==void 0&&(i=n.registered[i]);var a=e[s1],o=[i],l="";typeof e.className=="string"?l=bL(n.registered,o,e.className):e.className!=null&&(l=e.className+" ");var f=j2(o,void 0,w.useContext(AL));l+=n.key+"-"+f.name;var d={};for(var u in e)mw.call(e,u)&&u!=="css"&&u!==s1&&(d[u]=e[u]);return d.className=l,t&&(d.ref=t),w.createElement(w.Fragment,null,w.createElement(DL,{cache:n,serialized:f,isStringTag:typeof a=="string"}),w.createElement(a,d))}),ML=IL,St=function(n,t){var i=arguments;if(t==null||!mw.call(t,"css"))return w.createElement.apply(void 0,i);var a=i.length,o=new Array(a);o[0]=ML,o[1]=PL(n,t);for(var l=2;l<a;l++)o[l]=i[l];return w.createElement.apply(null,o)};(function(e){var n;n||(n=e.JSX||(e.JSX={}))})(St||(St={}));function gw(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return j2(n)}function RL(){var e=gw.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function OL(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}const LL=Math.min,FL=Math.max,tb=Math.round,fx=Math.floor,nb=e=>({x:e,y:e});function $L(e){const{x:n,y:t,width:i,height:a}=e;return{width:i,height:a,top:t,left:n,right:n+i,bottom:t+a,x:n,y:t}}function Tb(){return typeof window<"u"}function k2(e){return T2(e)?(e.nodeName||"").toLowerCase():"#document"}function Al(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function E2(e){var n;return(n=(T2(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function T2(e){return Tb()?e instanceof Node||e instanceof Al(e).Node:!1}function zL(e){return Tb()?e instanceof Element||e instanceof Al(e).Element:!1}function yw(e){return Tb()?e instanceof HTMLElement||e instanceof Al(e).HTMLElement:!1}function iN(e){return!Tb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Al(e).ShadowRoot}const BL=new Set(["inline","contents"]);function A2(e){const{overflow:n,overflowX:t,overflowY:i,display:a}=xw(e);return/auto|scroll|overlay|hidden|clip/.test(n+i+t)&&!BL.has(a)}function UL(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const qL=new Set(["html","body","#document"]);function VL(e){return qL.has(k2(e))}function xw(e){return Al(e).getComputedStyle(e)}function HL(e){if(k2(e)==="html")return e;const n=e.assignedSlot||e.parentNode||iN(e)&&e.host||E2(e);return iN(n)?n.host:n}function P2(e){const n=HL(e);return VL(n)?e.ownerDocument?e.ownerDocument.body:e.body:yw(n)&&A2(n)?n:P2(n)}function ib(e,n,t){var i;n===void 0&&(n=[]),t===void 0&&(t=!0);const a=P2(e),o=a===((i=e.ownerDocument)==null?void 0:i.body),l=Al(a);if(o){const f=o1(l);return n.concat(l,l.visualViewport||[],A2(a)?a:[],f&&t?ib(f):[])}return n.concat(a,ib(a,[],t))}function o1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function GL(e){const n=xw(e);let t=parseFloat(n.width)||0,i=parseFloat(n.height)||0;const a=yw(e),o=a?e.offsetWidth:t,l=a?e.offsetHeight:i,f=tb(t)!==o||tb(i)!==l;return f&&(t=o,i=l),{width:t,height:i,$:f}}function bw(e){return zL(e)?e:e.contextElement}function rN(e){const n=bw(e);if(!yw(n))return nb(1);const t=n.getBoundingClientRect(),{width:i,height:a,$:o}=GL(n);let l=(o?tb(t.width):t.width)/i,f=(o?tb(t.height):t.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!f||!Number.isFinite(f))&&(f=1),{x:l,y:f}}const YL=nb(0);function WL(e){const n=Al(e);return!UL()||!n.visualViewport?YL:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function QL(e,n,t){return!1}function aN(e,n,t,i){n===void 0&&(n=!1);const a=e.getBoundingClientRect(),o=bw(e);let l=nb(1);n&&(l=rN(e));const f=QL()?WL(o):nb(0);let d=(a.left+f.x)/l.x,u=(a.top+f.y)/l.y,p=a.width/l.x,g=a.height/l.y;if(o){const b=Al(o),v=i;let N=b,k=o1(N);for(;k&&i&&v!==N;){const E=rN(k),T=k.getBoundingClientRect(),I=xw(k),D=T.left+(k.clientLeft+parseFloat(I.paddingLeft))*E.x,U=T.top+(k.clientTop+parseFloat(I.paddingTop))*E.y;d*=E.x,u*=E.y,p*=E.x,g*=E.y,d+=D,u+=U,N=Al(k),k=o1(N)}}return $L({width:p,height:g,x:d,y:u})}function D2(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function JL(e,n){let t=null,i;const a=E2(e);function o(){var f;clearTimeout(i),(f=t)==null||f.disconnect(),t=null}function l(f,d){f===void 0&&(f=!1),d===void 0&&(d=1),o();const u=e.getBoundingClientRect(),{left:p,top:g,width:b,height:v}=u;if(f||n(),!b||!v)return;const N=fx(g),k=fx(a.clientWidth-(p+b)),E=fx(a.clientHeight-(g+v)),T=fx(p),D={rootMargin:-N+"px "+-k+"px "+-E+"px "+-T+"px",threshold:FL(0,LL(1,d))||1};let U=!0;function O($){const B=$[0].intersectionRatio;if(B!==d){if(!U)return l();B?l(!1,B):i=setTimeout(()=>{l(!1,1e-7)},1e3)}B===1&&!D2(u,e.getBoundingClientRect())&&l(),U=!1}try{t=new IntersectionObserver(O,{...D,root:a.ownerDocument})}catch{t=new IntersectionObserver(O,D)}t.observe(e)}return l(!0),o}function KL(e,n,t,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,u=bw(e),p=a||o?[...u?ib(u):[],...ib(n)]:[];p.forEach(T=>{a&&T.addEventListener("scroll",t,{passive:!0}),o&&T.addEventListener("resize",t)});const g=u&&f?JL(u,t):null;let b=-1,v=null;l&&(v=new ResizeObserver(T=>{let[I]=T;I&&I.target===u&&v&&(v.unobserve(n),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var D;(D=v)==null||D.observe(n)})),t()}),u&&!d&&v.observe(u),v.observe(n));let N,k=d?aN(e):null;d&&E();function E(){const T=aN(e);k&&!D2(k,T)&&t(),k=T,N=requestAnimationFrame(E)}return t(),()=>{var T;p.forEach(I=>{a&&I.removeEventListener("scroll",t),o&&I.removeEventListener("resize",t)}),g==null||g(),(T=v)==null||T.disconnect(),v=null,d&&cancelAnimationFrame(N)}}var l1=w.useLayoutEffect,XL=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],rb=function(){};function ZL(e,n){return n?n[0]==="-"?e+n:e+"__"+n:e}function e3(e,n){for(var t=arguments.length,i=new Array(t>2?t-2:0),a=2;a<t;a++)i[a-2]=arguments[a];var o=[].concat(i);if(n&&e)for(var l in n)n.hasOwnProperty(l)&&n[l]&&o.push("".concat(ZL(e,l)));return o.filter(function(f){return f}).map(function(f){return String(f).trim()}).join(" ")}var sN=function(n){return c3(n)?n.filter(Boolean):kd(n)==="object"&&n!==null?[n]:[]},I2=function(n){n.className,n.clearValue,n.cx,n.getStyles,n.getClassNames,n.getValue,n.hasValue,n.isMulti,n.isRtl,n.options,n.selectOption,n.selectProps,n.setValue,n.theme;var t=Pl(n,XL);return Tt({},t)},pi=function(n,t,i){var a=n.cx,o=n.getStyles,l=n.getClassNames,f=n.className;return{css:o(t,n),className:a(i??{},l(t,n),f)}};function Ab(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function t3(e){return Ab(e)?window.innerHeight:e.clientHeight}function M2(e){return Ab(e)?window.pageYOffset:e.scrollTop}function ab(e,n){if(Ab(e)){window.scrollTo(0,n);return}e.scrollTop=n}function n3(e){var n=getComputedStyle(e),t=n.position==="absolute",i=/(auto|scroll)/;if(n.position==="fixed")return document.documentElement;for(var a=e;a=a.parentElement;)if(n=getComputedStyle(a),!(t&&n.position==="static")&&i.test(n.overflow+n.overflowY+n.overflowX))return a;return document.documentElement}function i3(e,n,t,i){return t*((e=e/i-1)*e*e+1)+n}function hx(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:rb,a=M2(e),o=n-a,l=10,f=0;function d(){f+=l;var u=i3(f,a,o,t);ab(e,u),f<t?window.requestAnimationFrame(d):i(e)}d()}function oN(e,n){var t=e.getBoundingClientRect(),i=n.getBoundingClientRect(),a=n.offsetHeight/3;i.bottom+a>t.bottom?ab(e,Math.min(n.offsetTop+n.clientHeight-e.offsetHeight+a,e.scrollHeight)):i.top-a<t.top&&ab(e,Math.max(n.offsetTop-a,0))}function r3(e){var n=e.getBoundingClientRect();return{bottom:n.bottom,height:n.height,left:n.left,right:n.right,top:n.top,width:n.width}}function lN(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function a3(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var R2=!1,s3={get passive(){return R2=!0}},px=typeof window<"u"?window:{};px.addEventListener&&px.removeEventListener&&(px.addEventListener("p",rb,s3),px.removeEventListener("p",rb,!1));var o3=R2;function l3(e){return e!=null}function c3(e){return Array.isArray(e)}function mx(e,n,t){return e?n:t}var u3=function(n){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var o=Object.entries(n).filter(function(l){var f=El(l,1),d=f[0];return!i.includes(d)});return o.reduce(function(l,f){var d=El(f,2),u=d[0],p=d[1];return l[u]=p,l},{})},d3=["children","innerProps"],f3=["children","innerProps"];function h3(e){var n=e.maxHeight,t=e.menuEl,i=e.minHeight,a=e.placement,o=e.shouldScroll,l=e.isFixedPosition,f=e.controlHeight,d=n3(t),u={placement:"bottom",maxHeight:n};if(!t||!t.offsetParent)return u;var p=d.getBoundingClientRect(),g=p.height,b=t.getBoundingClientRect(),v=b.bottom,N=b.height,k=b.top,E=t.offsetParent.getBoundingClientRect(),T=E.top,I=l?window.innerHeight:t3(d),D=M2(d),U=parseInt(getComputedStyle(t).marginBottom,10),O=parseInt(getComputedStyle(t).marginTop,10),$=T-O,B=I-k,q=$+D,H=g-D-k,F=v-I+D+U,L=D+k-O,Q=160;switch(a){case"auto":case"bottom":if(B>=N)return{placement:"bottom",maxHeight:n};if(H>=N&&!l)return o&&hx(d,F,Q),{placement:"bottom",maxHeight:n};if(!l&&H>=i||l&&B>=i){o&&hx(d,F,Q);var ne=l?B-U:H-U;return{placement:"bottom",maxHeight:ne}}if(a==="auto"||l){var ie=n,oe=l?$:q;return oe>=i&&(ie=Math.min(oe-U-f,n)),{placement:"top",maxHeight:ie}}if(a==="bottom")return o&&ab(d,F),{placement:"bottom",maxHeight:n};break;case"top":if($>=N)return{placement:"top",maxHeight:n};if(q>=N&&!l)return o&&hx(d,L,Q),{placement:"top",maxHeight:n};if(!l&&q>=i||l&&$>=i){var Y=n;return(!l&&q>=i||l&&$>=i)&&(Y=l?$-O:q-O),o&&hx(d,L,Q),{placement:"top",maxHeight:Y}}return{placement:"bottom",maxHeight:n};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}function p3(e){var n={bottom:"top",top:"bottom"};return e?n[e]:"bottom"}var O2=function(n){return n==="auto"?"bottom":n},m3=function(n,t){var i,a=n.placement,o=n.theme,l=o.borderRadius,f=o.spacing,d=o.colors;return Tt((i={label:"menu"},Mm(i,p3(a),"100%"),Mm(i,"position","absolute"),Mm(i,"width","100%"),Mm(i,"zIndex",1),i),t?{}:{backgroundColor:d.neutral0,borderRadius:l,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:f.menuGutter,marginTop:f.menuGutter})},L2=w.createContext(null),g3=function(n){var t=n.children,i=n.minMenuHeight,a=n.maxMenuHeight,o=n.menuPlacement,l=n.menuPosition,f=n.menuShouldScrollIntoView,d=n.theme,u=w.useContext(L2)||{},p=u.setPortalPlacement,g=w.useRef(null),b=w.useState(a),v=El(b,2),N=v[0],k=v[1],E=w.useState(null),T=El(E,2),I=T[0],D=T[1],U=d.spacing.controlHeight;return l1(function(){var O=g.current;if(O){var $=l==="fixed",B=f&&!$,q=h3({maxHeight:a,menuEl:O,minHeight:i,placement:o,shouldScroll:B,isFixedPosition:$,controlHeight:U});k(q.maxHeight),D(q.placement),p==null||p(q.placement)}},[a,o,l,f,i,p,U]),t({ref:g,placerProps:Tt(Tt({},n),{},{placement:I||O2(o),maxHeight:N})})},y3=function(n){var t=n.children,i=n.innerRef,a=n.innerProps;return St("div",It({},pi(n,"menu",{menu:!0}),{ref:i},a),t)},x3=y3,b3=function(n,t){var i=n.maxHeight,a=n.theme.spacing.baseUnit;return Tt({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:a,paddingTop:a})},v3=function(n){var t=n.children,i=n.innerProps,a=n.innerRef,o=n.isMulti;return St("div",It({},pi(n,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:a},i),t)},F2=function(n,t){var i=n.theme,a=i.spacing.baseUnit,o=i.colors;return Tt({textAlign:"center"},t?{}:{color:o.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},w3=F2,S3=F2,N3=function(n){var t=n.children,i=t===void 0?"No options":t,a=n.innerProps,o=Pl(n,d3);return St("div",It({},pi(Tt(Tt({},o),{},{children:i,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),i)},C3=function(n){var t=n.children,i=t===void 0?"Loading...":t,a=n.innerProps,o=Pl(n,f3);return St("div",It({},pi(Tt(Tt({},o),{},{children:i,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),i)},j3=function(n){var t=n.rect,i=n.offset,a=n.position;return{left:t.left,position:a,top:i,width:t.width,zIndex:1}},_3=function(n){var t=n.appendTo,i=n.children,a=n.controlElement,o=n.innerProps,l=n.menuPlacement,f=n.menuPosition,d=w.useRef(null),u=w.useRef(null),p=w.useState(O2(l)),g=El(p,2),b=g[0],v=g[1],N=w.useMemo(function(){return{setPortalPlacement:v}},[]),k=w.useState(null),E=El(k,2),T=E[0],I=E[1],D=w.useCallback(function(){if(a){var B=r3(a),q=f==="fixed"?0:window.pageYOffset,H=B[b]+q;(H!==(T==null?void 0:T.offset)||B.left!==(T==null?void 0:T.rect.left)||B.width!==(T==null?void 0:T.rect.width))&&I({offset:H,rect:B})}},[a,f,b,T==null?void 0:T.offset,T==null?void 0:T.rect.left,T==null?void 0:T.rect.width]);l1(function(){D()},[D]);var U=w.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),a&&d.current&&(u.current=KL(a,d.current,D,{elementResize:"ResizeObserver"in window}))},[a,D]);l1(function(){U()},[U]);var O=w.useCallback(function(B){d.current=B,U()},[U]);if(!t&&f!=="fixed"||!T)return null;var $=St("div",It({ref:O},pi(Tt(Tt({},n),{},{offset:T.offset,position:f,rect:T.rect}),"menuPortal",{"menu-portal":!0}),o),i);return St(L2.Provider,{value:N},t?jD.createPortal($,t):$)},k3=function(n){var t=n.isDisabled,i=n.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},E3=function(n){var t=n.children,i=n.innerProps,a=n.isDisabled,o=n.isRtl;return St("div",It({},pi(n,"container",{"--is-disabled":a,"--is-rtl":o}),i),t)},T3=function(n,t){var i=n.theme.spacing,a=n.isMulti,o=n.hasValue,l=n.selectProps.controlShouldRenderValue;return Tt({alignItems:"center",display:a&&o&&l?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},A3=function(n){var t=n.children,i=n.innerProps,a=n.isMulti,o=n.hasValue;return St("div",It({},pi(n,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":o}),i),t)},P3=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},D3=function(n){var t=n.children,i=n.innerProps;return St("div",It({},pi(n,"indicatorsContainer",{indicators:!0}),i),t)},cN,I3=["size"],M3=["innerProps","isRtl","size"],R3={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},$2=function(n){var t=n.size,i=Pl(n,I3);return St("svg",It({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:R3},i))},vw=function(n){return St($2,It({size:20},n),St("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},z2=function(n){return St($2,It({size:20},n),St("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},B2=function(n,t){var i=n.isFocused,a=n.theme,o=a.spacing.baseUnit,l=a.colors;return Tt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:i?l.neutral60:l.neutral20,padding:o*2,":hover":{color:i?l.neutral80:l.neutral40}})},O3=B2,L3=function(n){var t=n.children,i=n.innerProps;return St("div",It({},pi(n,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),t||St(z2,null))},F3=B2,$3=function(n){var t=n.children,i=n.innerProps;return St("div",It({},pi(n,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),t||St(vw,null))},z3=function(n,t){var i=n.isDisabled,a=n.theme,o=a.spacing.baseUnit,l=a.colors;return Tt({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:i?l.neutral10:l.neutral20,marginBottom:o*2,marginTop:o*2})},B3=function(n){var t=n.innerProps;return St("span",It({},t,pi(n,"indicatorSeparator",{"indicator-separator":!0})))},U3=RL(cN||(cN=OL([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),q3=function(n,t){var i=n.isFocused,a=n.size,o=n.theme,l=o.colors,f=o.spacing.baseUnit;return Tt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},t?{}:{color:i?l.neutral60:l.neutral20,padding:f*2})},i0=function(n){var t=n.delay,i=n.offset;return St("span",{css:gw({animation:"".concat(U3," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},V3=function(n){var t=n.innerProps,i=n.isRtl,a=n.size,o=a===void 0?4:a,l=Pl(n,M3);return St("div",It({},pi(Tt(Tt({},l),{},{innerProps:t,isRtl:i,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),St(i0,{delay:0,offset:i}),St(i0,{delay:160,offset:!0}),St(i0,{delay:320,offset:!i}))},H3=function(n,t){var i=n.isDisabled,a=n.isFocused,o=n.theme,l=o.colors,f=o.borderRadius,d=o.spacing;return Tt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:d.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:i?l.neutral5:l.neutral0,borderColor:i?l.neutral10:a?l.primary:l.neutral20,borderRadius:f,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(l.primary):void 0,"&:hover":{borderColor:a?l.primary:l.neutral30}})},G3=function(n){var t=n.children,i=n.isDisabled,a=n.isFocused,o=n.innerRef,l=n.innerProps,f=n.menuIsOpen;return St("div",It({ref:o},pi(n,"control",{control:!0,"control--is-disabled":i,"control--is-focused":a,"control--menu-is-open":f}),l,{"aria-disabled":i||void 0}),t)},Y3=G3,W3=["data"],Q3=function(n,t){var i=n.theme.spacing;return t?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},J3=function(n){var t=n.children,i=n.cx,a=n.getStyles,o=n.getClassNames,l=n.Heading,f=n.headingProps,d=n.innerProps,u=n.label,p=n.theme,g=n.selectProps;return St("div",It({},pi(n,"group",{group:!0}),d),St(l,It({},f,{selectProps:g,theme:p,getStyles:a,getClassNames:o,cx:i}),u),St("div",null,t))},K3=function(n,t){var i=n.theme,a=i.colors,o=i.spacing;return Tt({label:"group",cursor:"default",display:"block"},t?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},X3=function(n){var t=I2(n);t.data;var i=Pl(t,W3);return St("div",It({},pi(n,"groupHeading",{"group-heading":!0}),i))},Z3=J3,eF=["innerRef","isDisabled","isHidden","inputClassName"],tF=function(n,t){var i=n.isDisabled,a=n.value,o=n.theme,l=o.spacing,f=o.colors;return Tt(Tt({visibility:i?"hidden":"visible",transform:a?"translateZ(0)":""},nF),t?{}:{margin:l.baseUnit/2,paddingBottom:l.baseUnit/2,paddingTop:l.baseUnit/2,color:f.neutral80})},U2={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},nF={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Tt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},U2)},iF=function(n){return Tt({label:"input",color:"inherit",background:0,opacity:n?0:1,width:"100%"},U2)},rF=function(n){var t=n.cx,i=n.value,a=I2(n),o=a.innerRef,l=a.isDisabled,f=a.isHidden,d=a.inputClassName,u=Pl(a,eF);return St("div",It({},pi(n,"input",{"input-container":!0}),{"data-value":i||""}),St("input",It({className:t({input:!0},d),ref:o,style:iF(f),disabled:l},u)))},aF=rF,sF=function(n,t){var i=n.theme,a=i.spacing,o=i.borderRadius,l=i.colors;return Tt({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:l.neutral10,borderRadius:o/2,margin:a.baseUnit/2})},oF=function(n,t){var i=n.theme,a=i.borderRadius,o=i.colors,l=n.cropWithEllipsis;return Tt({overflow:"hidden",textOverflow:l||l===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:a/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},lF=function(n,t){var i=n.theme,a=i.spacing,o=i.borderRadius,l=i.colors,f=n.isFocused;return Tt({alignItems:"center",display:"flex"},t?{}:{borderRadius:o/2,backgroundColor:f?l.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:l.dangerLight,color:l.danger}})},q2=function(n){var t=n.children,i=n.innerProps;return St("div",i,t)},cF=q2,uF=q2;function dF(e){var n=e.children,t=e.innerProps;return St("div",It({role:"button"},t),n||St(vw,{size:14}))}var fF=function(n){var t=n.children,i=n.components,a=n.data,o=n.innerProps,l=n.isDisabled,f=n.removeProps,d=n.selectProps,u=i.Container,p=i.Label,g=i.Remove;return St(u,{data:a,innerProps:Tt(Tt({},pi(n,"multiValue",{"multi-value":!0,"multi-value--is-disabled":l})),o),selectProps:d},St(p,{data:a,innerProps:Tt({},pi(n,"multiValueLabel",{"multi-value__label":!0})),selectProps:d},t),St(g,{data:a,innerProps:Tt(Tt({},pi(n,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},f),selectProps:d}))},hF=fF,pF=function(n,t){var i=n.isDisabled,a=n.isFocused,o=n.isSelected,l=n.theme,f=l.spacing,d=l.colors;return Tt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:o?d.primary:a?d.primary25:"transparent",color:i?d.neutral20:o?d.neutral0:"inherit",padding:"".concat(f.baseUnit*2,"px ").concat(f.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:o?d.primary:d.primary50}})},mF=function(n){var t=n.children,i=n.isDisabled,a=n.isFocused,o=n.isSelected,l=n.innerRef,f=n.innerProps;return St("div",It({},pi(n,"option",{option:!0,"option--is-disabled":i,"option--is-focused":a,"option--is-selected":o}),{ref:l,"aria-disabled":i},f),t)},gF=mF,yF=function(n,t){var i=n.theme,a=i.spacing,o=i.colors;return Tt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:o.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},xF=function(n){var t=n.children,i=n.innerProps;return St("div",It({},pi(n,"placeholder",{placeholder:!0}),i),t)},bF=xF,vF=function(n,t){var i=n.isDisabled,a=n.theme,o=a.spacing,l=a.colors;return Tt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:i?l.neutral40:l.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},wF=function(n){var t=n.children,i=n.isDisabled,a=n.innerProps;return St("div",It({},pi(n,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),a),t)},SF=wF,NF={ClearIndicator:$3,Control:Y3,DropdownIndicator:L3,DownChevron:z2,CrossIcon:vw,Group:Z3,GroupHeading:X3,IndicatorsContainer:D3,IndicatorSeparator:B3,Input:aF,LoadingIndicator:V3,Menu:x3,MenuList:v3,MenuPortal:_3,LoadingMessage:C3,NoOptionsMessage:N3,MultiValue:hF,MultiValueContainer:cF,MultiValueLabel:uF,MultiValueRemove:dF,Option:gF,Placeholder:bF,SelectContainer:E3,SingleValue:SF,ValueContainer:A3},CF=function(n){return Tt(Tt({},NF),n.components)},uN=Number.isNaN||function(n){return typeof n=="number"&&n!==n};function jF(e,n){return!!(e===n||uN(e)&&uN(n))}function _F(e,n){if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(!jF(e[t],n[t]))return!1;return!0}function kF(e,n){n===void 0&&(n=_F);var t=null;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(t&&t.lastThis===this&&n(a,t.lastArgs))return t.lastResult;var l=e.apply(this,a);return t={lastResult:l,lastArgs:a,lastThis:this},l}return i.clear=function(){t=null},i}var EF={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},TF=function(n){return St("span",It({css:EF},n))},dN=TF,AF={guidance:function(n){var t=n.isSearchable,i=n.isMulti,a=n.tabSelectsValue,o=n.context,l=n.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return l?"".concat(n["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(n){var t=n.action,i=n.label,a=i===void 0?"":i,o=n.labels,l=n.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return l?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(n){var t=n.context,i=n.focused,a=n.options,o=n.label,l=o===void 0?"":o,f=n.selectValue,d=n.isDisabled,u=n.isSelected,p=n.isAppleDevice,g=function(k,E){return k&&k.length?"".concat(k.indexOf(E)+1," of ").concat(k.length):""};if(t==="value"&&f)return"value ".concat(l," focused, ").concat(g(f,i),".");if(t==="menu"&&p){var b=d?" disabled":"",v="".concat(u?" selected":"").concat(b);return"".concat(l).concat(v,", ").concat(g(a,i),".")}return""},onFilter:function(n){var t=n.inputValue,i=n.resultsMessage;return"".concat(i).concat(t?" for search term "+t:"",".")}},PF=function(n){var t=n.ariaSelection,i=n.focusedOption,a=n.focusedValue,o=n.focusableOptions,l=n.isFocused,f=n.selectValue,d=n.selectProps,u=n.id,p=n.isAppleDevice,g=d.ariaLiveMessages,b=d.getOptionLabel,v=d.inputValue,N=d.isMulti,k=d.isOptionDisabled,E=d.isSearchable,T=d.menuIsOpen,I=d.options,D=d.screenReaderStatus,U=d.tabSelectsValue,O=d.isLoading,$=d["aria-label"],B=d["aria-live"],q=w.useMemo(function(){return Tt(Tt({},AF),g||{})},[g]),H=w.useMemo(function(){var oe="";if(t&&q.onChange){var Y=t.option,z=t.options,re=t.removedValue,X=t.removedValues,P=t.value,te=function(Ne){return Array.isArray(Ne)?null:Ne},se=re||Y||te(P),M=se?b(se):"",fe=z||X||void 0,we=fe?fe.map(b):[],ce=Tt({isDisabled:se&&k(se,f),label:M,labels:we},t);oe=q.onChange(ce)}return oe},[t,q,k,f,b]),F=w.useMemo(function(){var oe="",Y=i||a,z=!!(i&&f&&f.includes(i));if(Y&&q.onFocus){var re={focused:Y,label:b(Y),isDisabled:k(Y,f),isSelected:z,options:o,context:Y===i?"menu":"value",selectValue:f,isAppleDevice:p};oe=q.onFocus(re)}return oe},[i,a,b,k,q,o,f,p]),L=w.useMemo(function(){var oe="";if(T&&I.length&&!O&&q.onFilter){var Y=D({count:o.length});oe=q.onFilter({inputValue:v,resultsMessage:Y})}return oe},[o,v,T,q,I,D,O]),Q=(t==null?void 0:t.action)==="initial-input-focus",ne=w.useMemo(function(){var oe="";if(q.guidance){var Y=a?"value":T?"menu":"input";oe=q.guidance({"aria-label":$,context:Y,isDisabled:i&&k(i,f),isMulti:N,isSearchable:E,tabSelectsValue:U,isInitialFocus:Q})}return oe},[$,i,a,N,k,E,T,q,f,U,Q]),ie=St(w.Fragment,null,St("span",{id:"aria-selection"},H),St("span",{id:"aria-focused"},F),St("span",{id:"aria-results"},L),St("span",{id:"aria-guidance"},ne));return St(w.Fragment,null,St(dN,{id:u},Q&&ie),St(dN,{"aria-live":B,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},l&&!Q&&ie))},DF=PF,c1=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],IF=new RegExp("["+c1.map(function(e){return e.letters}).join("")+"]","g"),V2={};for(var r0=0;r0<c1.length;r0++)for(var a0=c1[r0],s0=0;s0<a0.letters.length;s0++)V2[a0.letters[s0]]=a0.base;var H2=function(n){return n.replace(IF,function(t){return V2[t]})},MF=kF(H2),fN=function(n){return n.replace(/^\s+|\s+$/g,"")},RF=function(n){return"".concat(n.label," ").concat(n.value)},OF=function(n){return function(t,i){if(t.data.__isNew__)return!0;var a=Tt({ignoreCase:!0,ignoreAccents:!0,stringify:RF,trim:!0,matchFrom:"any"},n),o=a.ignoreCase,l=a.ignoreAccents,f=a.stringify,d=a.trim,u=a.matchFrom,p=d?fN(i):i,g=d?fN(f(t)):f(t);return o&&(p=p.toLowerCase(),g=g.toLowerCase()),l&&(p=MF(p),g=H2(g)),u==="start"?g.substr(0,p.length)===p:g.indexOf(p)>-1}},LF=["innerRef"];function FF(e){var n=e.innerRef,t=Pl(e,LF),i=u3(t,"onExited","in","enter","exit","appear");return St("input",It({ref:n},i,{css:gw({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var $F=function(n){n.cancelable&&n.preventDefault(),n.stopPropagation()};function zF(e){var n=e.isEnabled,t=e.onBottomArrive,i=e.onBottomLeave,a=e.onTopArrive,o=e.onTopLeave,l=w.useRef(!1),f=w.useRef(!1),d=w.useRef(0),u=w.useRef(null),p=w.useCallback(function(E,T){if(u.current!==null){var I=u.current,D=I.scrollTop,U=I.scrollHeight,O=I.clientHeight,$=u.current,B=T>0,q=U-O-D,H=!1;q>T&&l.current&&(i&&i(E),l.current=!1),B&&f.current&&(o&&o(E),f.current=!1),B&&T>q?(t&&!l.current&&t(E),$.scrollTop=U,H=!0,l.current=!0):!B&&-T>D&&(a&&!f.current&&a(E),$.scrollTop=0,H=!0,f.current=!0),H&&$F(E)}},[t,i,a,o]),g=w.useCallback(function(E){p(E,E.deltaY)},[p]),b=w.useCallback(function(E){d.current=E.changedTouches[0].clientY},[]),v=w.useCallback(function(E){var T=d.current-E.changedTouches[0].clientY;p(E,T)},[p]),N=w.useCallback(function(E){if(E){var T=o3?{passive:!1}:!1;E.addEventListener("wheel",g,T),E.addEventListener("touchstart",b,T),E.addEventListener("touchmove",v,T)}},[v,b,g]),k=w.useCallback(function(E){E&&(E.removeEventListener("wheel",g,!1),E.removeEventListener("touchstart",b,!1),E.removeEventListener("touchmove",v,!1))},[v,b,g]);return w.useEffect(function(){if(n){var E=u.current;return N(E),function(){k(E)}}},[n,N,k]),function(E){u.current=E}}var hN=["boxSizing","height","overflow","paddingRight","position"],pN={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function mN(e){e.cancelable&&e.preventDefault()}function gN(e){e.stopPropagation()}function yN(){var e=this.scrollTop,n=this.scrollHeight,t=e+this.offsetHeight;e===0?this.scrollTop=1:t===n&&(this.scrollTop=e-1)}function xN(){return"ontouchstart"in window||navigator.maxTouchPoints}var bN=!!(typeof window<"u"&&window.document&&window.document.createElement),Cm=0,rh={capture:!1,passive:!1};function BF(e){var n=e.isEnabled,t=e.accountForScrollbars,i=t===void 0?!0:t,a=w.useRef({}),o=w.useRef(null),l=w.useCallback(function(d){if(bN){var u=document.body,p=u&&u.style;if(i&&hN.forEach(function(N){var k=p&&p[N];a.current[N]=k}),i&&Cm<1){var g=parseInt(a.current.paddingRight,10)||0,b=document.body?document.body.clientWidth:0,v=window.innerWidth-b+g||0;Object.keys(pN).forEach(function(N){var k=pN[N];p&&(p[N]=k)}),p&&(p.paddingRight="".concat(v,"px"))}u&&xN()&&(u.addEventListener("touchmove",mN,rh),d&&(d.addEventListener("touchstart",yN,rh),d.addEventListener("touchmove",gN,rh))),Cm+=1}},[i]),f=w.useCallback(function(d){if(bN){var u=document.body,p=u&&u.style;Cm=Math.max(Cm-1,0),i&&Cm<1&&hN.forEach(function(g){var b=a.current[g];p&&(p[g]=b)}),u&&xN()&&(u.removeEventListener("touchmove",mN,rh),d&&(d.removeEventListener("touchstart",yN,rh),d.removeEventListener("touchmove",gN,rh)))}},[i]);return w.useEffect(function(){if(n){var d=o.current;return l(d),function(){f(d)}}},[n,l,f]),function(d){o.current=d}}var UF=function(n){var t=n.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},qF={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function VF(e){var n=e.children,t=e.lockEnabled,i=e.captureEnabled,a=i===void 0?!0:i,o=e.onBottomArrive,l=e.onBottomLeave,f=e.onTopArrive,d=e.onTopLeave,u=zF({isEnabled:a,onBottomArrive:o,onBottomLeave:l,onTopArrive:f,onTopLeave:d}),p=BF({isEnabled:t}),g=function(v){u(v),p(v)};return St(w.Fragment,null,t&&St("div",{onClick:UF,css:qF}),n(g))}var HF={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},GF=function(n){var t=n.name,i=n.onFocus;return St("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:HF,value:"",onChange:function(){}})},YF=GF;function ww(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function WF(){return ww(/^iPhone/i)}function G2(){return ww(/^Mac/i)}function QF(){return ww(/^iPad/i)||G2()&&navigator.maxTouchPoints>1}function JF(){return WF()||QF()}function KF(){return G2()||JF()}var XF=function(n){return n.label},ZF=function(n){return n.label},e6=function(n){return n.value},t6=function(n){return!!n.isDisabled},n6={clearIndicator:F3,container:k3,control:H3,dropdownIndicator:O3,group:Q3,groupHeading:K3,indicatorsContainer:P3,indicatorSeparator:z3,input:tF,loadingIndicator:q3,loadingMessage:S3,menu:m3,menuList:b3,menuPortal:j3,multiValue:sF,multiValueLabel:oF,multiValueRemove:lF,noOptionsMessage:w3,option:pF,placeholder:yF,singleValue:vF,valueContainer:T3},i6={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},r6=4,Y2=4,a6=38,s6=Y2*2,o6={baseUnit:Y2,controlHeight:a6,menuGutter:s6},o0={borderRadius:r6,colors:i6,spacing:o6},l6={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:lN(),captureMenuScroll:!lN(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:OF(),formatGroupLabel:XF,getOptionLabel:ZF,getOptionValue:e6,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:t6,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!a3(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(n){var t=n.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function vN(e,n,t,i){var a=J2(e,n,t),o=K2(e,n,t),l=Q2(e,n),f=sb(e,n);return{type:"option",data:n,isDisabled:a,isSelected:o,label:l,value:f,index:i}}function Ox(e,n){return e.options.map(function(t,i){if("options"in t){var a=t.options.map(function(l,f){return vN(e,l,n,f)}).filter(function(l){return SN(e,l)});return a.length>0?{type:"group",data:t,options:a,index:i}:void 0}var o=vN(e,t,n,i);return SN(e,o)?o:void 0}).filter(l3)}function W2(e){return e.reduce(function(n,t){return t.type==="group"?n.push.apply(n,dw(t.options.map(function(i){return i.data}))):n.push(t.data),n},[])}function wN(e,n){return e.reduce(function(t,i){return i.type==="group"?t.push.apply(t,dw(i.options.map(function(a){return{data:a.data,id:"".concat(n,"-").concat(i.index,"-").concat(a.index)}}))):t.push({data:i.data,id:"".concat(n,"-").concat(i.index)}),t},[])}function c6(e,n){return W2(Ox(e,n))}function SN(e,n){var t=e.inputValue,i=t===void 0?"":t,a=n.data,o=n.isSelected,l=n.label,f=n.value;return(!Z2(e)||!o)&&X2(e,{label:l,value:f,data:a},i)}function u6(e,n){var t=e.focusedValue,i=e.selectValue,a=i.indexOf(t);if(a>-1){var o=n.indexOf(t);if(o>-1)return t;if(a<n.length)return n[a]}return null}function d6(e,n){var t=e.focusedOption;return t&&n.indexOf(t)>-1?t:n[0]}var l0=function(n,t){var i,a=(i=n.find(function(o){return o.data===t}))===null||i===void 0?void 0:i.id;return a||null},Q2=function(n,t){return n.getOptionLabel(t)},sb=function(n,t){return n.getOptionValue(t)};function J2(e,n,t){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(n,t):!1}function K2(e,n,t){if(t.indexOf(n)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(n,t);var i=sb(e,n);return t.some(function(a){return sb(e,a)===i})}function X2(e,n,t){return e.filterOption?e.filterOption(n,t):!0}var Z2=function(n){var t=n.hideSelectedOptions,i=n.isMulti;return t===void 0?i:t},f6=1,ek=function(e){DO(t,e);var n=RO(t);function t(i){var a;if(AO(this,t),a=n.call(this,i),a.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.controlRef=null,a.getControlRef=function(d){a.controlRef=d},a.focusedOptionRef=null,a.getFocusedOptionRef=function(d){a.focusedOptionRef=d},a.menuListRef=null,a.getMenuListRef=function(d){a.menuListRef=d},a.inputRef=null,a.getInputRef=function(d){a.inputRef=d},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(d,u){var p=a.props,g=p.onChange,b=p.name;u.name=b,a.ariaOnChange(d,u),g(d,u)},a.setValue=function(d,u,p){var g=a.props,b=g.closeMenuOnSelect,v=g.isMulti,N=g.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:N}),b&&(a.setState({inputIsHiddenAfterUpdate:!v}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(d,{action:u,option:p})},a.selectOption=function(d){var u=a.props,p=u.blurInputOnSelect,g=u.isMulti,b=u.name,v=a.state.selectValue,N=g&&a.isOptionSelected(d,v),k=a.isOptionDisabled(d,v);if(N){var E=a.getOptionValue(d);a.setValue(v.filter(function(T){return a.getOptionValue(T)!==E}),"deselect-option",d)}else if(!k)g?a.setValue([].concat(dw(v),[d]),"select-option",d):a.setValue(d,"select-option");else{a.ariaOnChange(d,{action:"select-option",option:d,name:b});return}p&&a.blurInput()},a.removeValue=function(d){var u=a.props.isMulti,p=a.state.selectValue,g=a.getOptionValue(d),b=p.filter(function(N){return a.getOptionValue(N)!==g}),v=mx(u,b,b[0]||null);a.onChange(v,{action:"remove-value",removedValue:d}),a.focusInput()},a.clearValue=function(){var d=a.state.selectValue;a.onChange(mx(a.props.isMulti,[],null),{action:"clear",removedValues:d})},a.popValue=function(){var d=a.props.isMulti,u=a.state.selectValue,p=u[u.length-1],g=u.slice(0,u.length-1),b=mx(d,g,g[0]||null);p&&a.onChange(b,{action:"pop-value",removedValue:p})},a.getFocusedOptionId=function(d){return l0(a.state.focusableOptionsWithIds,d)},a.getFocusableOptionsWithIds=function(){return wN(Ox(a.props,a.state.selectValue),a.getElementId("option"))},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var d=arguments.length,u=new Array(d),p=0;p<d;p++)u[p]=arguments[p];return e3.apply(void 0,[a.props.classNamePrefix].concat(u))},a.getOptionLabel=function(d){return Q2(a.props,d)},a.getOptionValue=function(d){return sb(a.props,d)},a.getStyles=function(d,u){var p=a.props.unstyled,g=n6[d](u,p);g.boxSizing="border-box";var b=a.props.styles[d];return b?b(g,u):g},a.getClassNames=function(d,u){var p,g;return(p=(g=a.props.classNames)[d])===null||p===void 0?void 0:p.call(g,u)},a.getElementId=function(d){return"".concat(a.state.instancePrefix,"-").concat(d)},a.getComponents=function(){return CF(a.props)},a.buildCategorizedOptions=function(){return Ox(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return W2(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(d,u){a.setState({ariaSelection:Tt({value:d},u)})},a.onMenuMouseDown=function(d){d.button===0&&(d.stopPropagation(),d.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(d){a.blockOptionHover=!1},a.onControlMouseDown=function(d){if(!d.defaultPrevented){var u=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&a.onMenuClose():u&&a.openMenu("first"):(u&&(a.openAfterFocus=!0),a.focusInput()),d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&d.preventDefault()}},a.onDropdownIndicatorMouseDown=function(d){if(!(d&&d.type==="mousedown"&&d.button!==0)&&!a.props.isDisabled){var u=a.props,p=u.isMulti,g=u.menuIsOpen;a.focusInput(),g?(a.setState({inputIsHiddenAfterUpdate:!p}),a.onMenuClose()):a.openMenu("first"),d.preventDefault()}},a.onClearIndicatorMouseDown=function(d){d&&d.type==="mousedown"&&d.button!==0||(a.clearValue(),d.preventDefault(),a.openAfterFocus=!1,d.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(d){typeof a.props.closeMenuOnScroll=="boolean"?d.target instanceof HTMLElement&&Ab(d.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(d)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(d){var u=d.touches,p=u&&u.item(0);p&&(a.initialTouchX=p.clientX,a.initialTouchY=p.clientY,a.userIsDragging=!1)},a.onTouchMove=function(d){var u=d.touches,p=u&&u.item(0);if(p){var g=Math.abs(p.clientX-a.initialTouchX),b=Math.abs(p.clientY-a.initialTouchY),v=5;a.userIsDragging=g>v||b>v}},a.onTouchEnd=function(d){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(d.target)&&a.menuListRef&&!a.menuListRef.contains(d.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(d){a.userIsDragging||a.onControlMouseDown(d)},a.onClearIndicatorTouchEnd=function(d){a.userIsDragging||a.onClearIndicatorMouseDown(d)},a.onDropdownIndicatorTouchEnd=function(d){a.userIsDragging||a.onDropdownIndicatorMouseDown(d)},a.handleInputChange=function(d){var u=a.props.inputValue,p=d.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(p,{action:"input-change",prevInputValue:u}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(d){a.props.onFocus&&a.props.onFocus(d),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(d){var u=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(d),a.onInputChange("",{action:"input-blur",prevInputValue:u}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(d){if(!(a.blockOptionHover||a.state.focusedOption===d)){var u=a.getFocusableOptions(),p=u.indexOf(d);a.setState({focusedOption:d,focusedOptionId:p>-1?a.getFocusedOptionId(d):null})}},a.shouldHideSelectedOptions=function(){return Z2(a.props)},a.onValueInputFocus=function(d){d.preventDefault(),d.stopPropagation(),a.focus()},a.onKeyDown=function(d){var u=a.props,p=u.isMulti,g=u.backspaceRemovesValue,b=u.escapeClearsValue,v=u.inputValue,N=u.isClearable,k=u.isDisabled,E=u.menuIsOpen,T=u.onKeyDown,I=u.tabSelectsValue,D=u.openMenuOnFocus,U=a.state,O=U.focusedOption,$=U.focusedValue,B=U.selectValue;if(!k&&!(typeof T=="function"&&(T(d),d.defaultPrevented))){switch(a.blockOptionHover=!0,d.key){case"ArrowLeft":if(!p||v)return;a.focusValue("previous");break;case"ArrowRight":if(!p||v)return;a.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if($)a.removeValue($);else{if(!g)return;p?a.popValue():N&&a.clearValue()}break;case"Tab":if(a.isComposing||d.shiftKey||!E||!I||!O||D&&a.isOptionSelected(O,B))return;a.selectOption(O);break;case"Enter":if(d.keyCode===229)break;if(E){if(!O||a.isComposing)return;a.selectOption(O);break}return;case"Escape":E?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:v}),a.onMenuClose()):N&&b&&a.clearValue();break;case" ":if(v)return;if(!E){a.openMenu("first");break}if(!O)return;a.selectOption(O);break;case"ArrowUp":E?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":E?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!E)return;a.focusOption("pageup");break;case"PageDown":if(!E)return;a.focusOption("pagedown");break;case"Home":if(!E)return;a.focusOption("first");break;case"End":if(!E)return;a.focusOption("last");break;default:return}d.preventDefault()}},a.state.instancePrefix="react-select-"+(a.props.instanceId||++f6),a.state.selectValue=sN(i.value),i.menuIsOpen&&a.state.selectValue.length){var o=a.getFocusableOptionsWithIds(),l=a.buildFocusableOptions(),f=l.indexOf(a.state.selectValue[0]);a.state.focusableOptionsWithIds=o,a.state.focusedOption=l[f],a.state.focusedOptionId=l0(o,l[f])}return a}return PO(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&oN(this.menuListRef,this.focusedOptionRef),KF()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(a){var o=this.props,l=o.isDisabled,f=o.menuIsOpen,d=this.state.isFocused;(d&&!l&&a.isDisabled||d&&f&&!a.menuIsOpen)&&this.focusInput(),d&&l&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!d&&!l&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(oN(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,o){this.props.onInputChange(a,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var o=this,l=this.state,f=l.selectValue,d=l.isFocused,u=this.buildFocusableOptions(),p=a==="first"?0:u.length-1;if(!this.props.isMulti){var g=u.indexOf(f[0]);g>-1&&(p=g)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[p],focusedOptionId:this.getFocusedOptionId(u[p])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(a){var o=this.state,l=o.selectValue,f=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=l.indexOf(f);f||(d=-1);var u=l.length-1,p=-1;if(l.length){switch(a){case"previous":d===0?p=0:d===-1?p=u:p=d-1;break;case"next":d>-1&&d<u&&(p=d+1);break}this.setState({inputIsHidden:p!==-1,focusedValue:l[p]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,l=this.state.focusedOption,f=this.getFocusableOptions();if(f.length){var d=0,u=f.indexOf(l);l||(u=-1),a==="up"?d=u>0?u-1:f.length-1:a==="down"?d=(u+1)%f.length:a==="pageup"?(d=u-o,d<0&&(d=0)):a==="pagedown"?(d=u+o,d>f.length-1&&(d=f.length-1)):a==="last"&&(d=f.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:f[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(f[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(o0):Tt(Tt({},o0),this.props.theme):o0}},{key:"getCommonProps",value:function(){var a=this.clearValue,o=this.cx,l=this.getStyles,f=this.getClassNames,d=this.getValue,u=this.selectOption,p=this.setValue,g=this.props,b=g.isMulti,v=g.isRtl,N=g.options,k=this.hasValue();return{clearValue:a,cx:o,getStyles:l,getClassNames:f,getValue:d,hasValue:k,isMulti:b,isRtl:v,options:N,selectOption:u,selectProps:g,setValue:p,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,o=a.isClearable,l=a.isMulti;return o===void 0?l:o}},{key:"isOptionDisabled",value:function(a,o){return J2(this.props,a,o)}},{key:"isOptionSelected",value:function(a,o){return K2(this.props,a,o)}},{key:"filterOption",value:function(a,o){return X2(this.props,a,o)}},{key:"formatOptionLabel",value:function(a,o){if(typeof this.props.formatOptionLabel=="function"){var l=this.props.inputValue,f=this.state.selectValue;return this.props.formatOptionLabel(a,{context:o,inputValue:l,selectValue:f})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var a=this.props,o=a.isDisabled,l=a.isSearchable,f=a.inputId,d=a.inputValue,u=a.tabIndex,p=a.form,g=a.menuIsOpen,b=a.required,v=this.getComponents(),N=v.Input,k=this.state,E=k.inputIsHidden,T=k.ariaSelection,I=this.commonProps,D=f||this.getElementId("input"),U=Tt(Tt(Tt({"aria-autocomplete":"list","aria-expanded":g,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":b,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},g&&{"aria-controls":this.getElementId("listbox")}),!l&&{"aria-readonly":!0}),this.hasValue()?(T==null?void 0:T.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return l?w.createElement(N,It({},I,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:D,innerRef:this.getInputRef,isDisabled:o,isHidden:E,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:p,type:"text",value:d},U)):w.createElement(FF,It({id:D,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:rb,onFocus:this.onInputFocus,disabled:o,tabIndex:u,inputMode:"none",form:p,value:""},U))}},{key:"renderPlaceholderOrValue",value:function(){var a=this,o=this.getComponents(),l=o.MultiValue,f=o.MultiValueContainer,d=o.MultiValueLabel,u=o.MultiValueRemove,p=o.SingleValue,g=o.Placeholder,b=this.commonProps,v=this.props,N=v.controlShouldRenderValue,k=v.isDisabled,E=v.isMulti,T=v.inputValue,I=v.placeholder,D=this.state,U=D.selectValue,O=D.focusedValue,$=D.isFocused;if(!this.hasValue()||!N)return T?null:w.createElement(g,It({},b,{key:"placeholder",isDisabled:k,isFocused:$,innerProps:{id:this.getElementId("placeholder")}}),I);if(E)return U.map(function(q,H){var F=q===O,L="".concat(a.getOptionLabel(q),"-").concat(a.getOptionValue(q));return w.createElement(l,It({},b,{components:{Container:f,Label:d,Remove:u},isFocused:F,isDisabled:k,key:L,index:H,removeProps:{onClick:function(){return a.removeValue(q)},onTouchEnd:function(){return a.removeValue(q)},onMouseDown:function(ne){ne.preventDefault()}},data:q}),a.formatOptionLabel(q,"value"))});if(T)return null;var B=U[0];return w.createElement(p,It({},b,{data:B,isDisabled:k}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),o=a.ClearIndicator,l=this.commonProps,f=this.props,d=f.isDisabled,u=f.isLoading,p=this.state.isFocused;if(!this.isClearable()||!o||d||!this.hasValue()||u)return null;var g={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(o,It({},l,{innerProps:g,isFocused:p}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),o=a.LoadingIndicator,l=this.commonProps,f=this.props,d=f.isDisabled,u=f.isLoading,p=this.state.isFocused;if(!o||!u)return null;var g={"aria-hidden":"true"};return w.createElement(o,It({},l,{innerProps:g,isDisabled:d,isFocused:p}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),o=a.DropdownIndicator,l=a.IndicatorSeparator;if(!o||!l)return null;var f=this.commonProps,d=this.props.isDisabled,u=this.state.isFocused;return w.createElement(l,It({},f,{isDisabled:d,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),o=a.DropdownIndicator;if(!o)return null;var l=this.commonProps,f=this.props.isDisabled,d=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return w.createElement(o,It({},l,{innerProps:u,isDisabled:f,isFocused:d}))}},{key:"renderMenu",value:function(){var a=this,o=this.getComponents(),l=o.Group,f=o.GroupHeading,d=o.Menu,u=o.MenuList,p=o.MenuPortal,g=o.LoadingMessage,b=o.NoOptionsMessage,v=o.Option,N=this.commonProps,k=this.state.focusedOption,E=this.props,T=E.captureMenuScroll,I=E.inputValue,D=E.isLoading,U=E.loadingMessage,O=E.minMenuHeight,$=E.maxMenuHeight,B=E.menuIsOpen,q=E.menuPlacement,H=E.menuPosition,F=E.menuPortalTarget,L=E.menuShouldBlockScroll,Q=E.menuShouldScrollIntoView,ne=E.noOptionsMessage,ie=E.onMenuScrollToTop,oe=E.onMenuScrollToBottom;if(!B)return null;var Y=function(M,fe){var we=M.type,ce=M.data,Le=M.isDisabled,Ne=M.isSelected,nt=M.label,ut=M.value,je=k===ce,ye=Le?void 0:function(){return a.onOptionHover(ce)},Ae=Le?void 0:function(){return a.selectOption(ce)},De="".concat(a.getElementId("option"),"-").concat(fe),Ve={id:De,onClick:Ae,onMouseMove:ye,onMouseOver:ye,tabIndex:-1,role:"option","aria-selected":a.state.isAppleDevice?void 0:Ne};return w.createElement(v,It({},N,{innerProps:Ve,data:ce,isDisabled:Le,isSelected:Ne,key:De,label:nt,type:we,value:ut,isFocused:je,innerRef:je?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(M.data,"menu"))},z;if(this.hasOptions())z=this.getCategorizedOptions().map(function(se){if(se.type==="group"){var M=se.data,fe=se.options,we=se.index,ce="".concat(a.getElementId("group"),"-").concat(we),Le="".concat(ce,"-heading");return w.createElement(l,It({},N,{key:ce,data:M,options:fe,Heading:f,headingProps:{id:Le,data:se.data},label:a.formatGroupLabel(se.data)}),se.options.map(function(Ne){return Y(Ne,"".concat(we,"-").concat(Ne.index))}))}else if(se.type==="option")return Y(se,"".concat(se.index))});else if(D){var re=U({inputValue:I});if(re===null)return null;z=w.createElement(g,N,re)}else{var X=ne({inputValue:I});if(X===null)return null;z=w.createElement(b,N,X)}var P={minMenuHeight:O,maxMenuHeight:$,menuPlacement:q,menuPosition:H,menuShouldScrollIntoView:Q},te=w.createElement(g3,It({},N,P),function(se){var M=se.ref,fe=se.placerProps,we=fe.placement,ce=fe.maxHeight;return w.createElement(d,It({},N,P,{innerRef:M,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:D,placement:we}),w.createElement(VF,{captureEnabled:T,onTopArrive:ie,onBottomArrive:oe,lockEnabled:L},function(Le){return w.createElement(u,It({},N,{innerRef:function(nt){a.getMenuListRef(nt),Le(nt)},innerProps:{role:"listbox","aria-multiselectable":N.isMulti,id:a.getElementId("listbox")},isLoading:D,maxHeight:ce,focusedOption:k}),z)}))});return F||H==="fixed"?w.createElement(p,It({},N,{appendTo:F,controlElement:this.controlRef,menuPlacement:q,menuPosition:H}),te):te}},{key:"renderFormField",value:function(){var a=this,o=this.props,l=o.delimiter,f=o.isDisabled,d=o.isMulti,u=o.name,p=o.required,g=this.state.selectValue;if(p&&!this.hasValue()&&!f)return w.createElement(YF,{name:u,onFocus:this.onValueInputFocus});if(!(!u||f))if(d)if(l){var b=g.map(function(k){return a.getOptionValue(k)}).join(l);return w.createElement("input",{name:u,type:"hidden",value:b})}else{var v=g.length>0?g.map(function(k,E){return w.createElement("input",{key:"i-".concat(E),name:u,type:"hidden",value:a.getOptionValue(k)})}):w.createElement("input",{name:u,type:"hidden",value:""});return w.createElement("div",null,v)}else{var N=g[0]?this.getOptionValue(g[0]):"";return w.createElement("input",{name:u,type:"hidden",value:N})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,o=this.state,l=o.ariaSelection,f=o.focusedOption,d=o.focusedValue,u=o.isFocused,p=o.selectValue,g=this.getFocusableOptions();return w.createElement(DF,It({},a,{id:this.getElementId("live-region"),ariaSelection:l,focusedOption:f,focusedValue:d,isFocused:u,selectValue:p,focusableOptions:g,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var a=this.getComponents(),o=a.Control,l=a.IndicatorsContainer,f=a.SelectContainer,d=a.ValueContainer,u=this.props,p=u.className,g=u.id,b=u.isDisabled,v=u.menuIsOpen,N=this.state.isFocused,k=this.commonProps=this.getCommonProps();return w.createElement(f,It({},k,{className:p,innerProps:{id:g,onKeyDown:this.onKeyDown},isDisabled:b,isFocused:N}),this.renderLiveRegion(),w.createElement(o,It({},k,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:b,isFocused:N,menuIsOpen:v}),w.createElement(d,It({},k,{isDisabled:b}),this.renderPlaceholderOrValue(),this.renderInput()),w.createElement(l,It({},k,{isDisabled:b}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,o){var l=o.prevProps,f=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,u=o.ariaSelection,p=o.isFocused,g=o.prevWasFocused,b=o.instancePrefix,v=a.options,N=a.value,k=a.menuIsOpen,E=a.inputValue,T=a.isMulti,I=sN(N),D={};if(l&&(N!==l.value||v!==l.options||k!==l.menuIsOpen||E!==l.inputValue)){var U=k?c6(a,I):[],O=k?wN(Ox(a,I),"".concat(b,"-option")):[],$=f?u6(o,I):null,B=d6(o,U),q=l0(O,B);D={selectValue:I,focusedOption:B,focusedOptionId:q,focusableOptionsWithIds:O,focusedValue:$,clearFocusValueOnUpdate:!1}}var H=d!=null&&a!==l?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},F=u,L=p&&g;return p&&!L&&(F={value:mx(T,I,I[0]||null),options:I,action:"initial-input-focus"},L=!g),(u==null?void 0:u.action)==="initial-input-focus"&&(F=null),Tt(Tt(Tt({},D),H),{},{prevProps:a,ariaSelection:F,prevWasFocused:L})}}]),t}(w.Component);ek.defaultProps=l6;var h6=w.forwardRef(function(e,n){var t=TO(e);return w.createElement(ek,It({ref:n},t))}),tk=h6;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let p6,m6;function g6(){return{geminiUrl:p6,vertexUrl:m6}}function y6(e,n,t){var i,a,o;if(!(!((i=e.httpOptions)===null||i===void 0)&&i.baseUrl)){const l=g6();return e.vertexai?(a=l.vertexUrl)!==null&&a!==void 0?a:n:(o=l.geminiUrl)!==null&&o!==void 0?o:t}return e.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rg{}function Rt(e,n){const t=/\{([^}]+)\}/g;return e.replace(t,(i,a)=>{if(Object.prototype.hasOwnProperty.call(n,a)){const o=n[a];return o!=null?String(o):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function j(e,n,t){for(let o=0;o<n.length-1;o++){const l=n[o];if(l.endsWith("[]")){const f=l.slice(0,-2);if(!(f in e))if(Array.isArray(t))e[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(e[f])){const d=e[f];if(Array.isArray(t))for(let u=0;u<d.length;u++){const p=d[u];j(p,n.slice(o+1),t[u])}else for(const u of d)j(u,n.slice(o+1),t)}return}else if(l.endsWith("[0]")){const f=l.slice(0,-3);f in e||(e[f]=[{}]);const d=e[f];j(d[0],n.slice(o+1),t);return}(!e[l]||typeof e[l]!="object")&&(e[l]={}),e=e[l]}const i=n[n.length-1],a=e[i];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else e[i]=t}function C(e,n){try{if(n.length===1&&n[0]==="_self")return e;for(let t=0;t<n.length;t++){if(typeof e!="object"||e===null)return;const i=n[t];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in e){const o=e[a];return Array.isArray(o)?o.map(l=>C(l,n.slice(t+1))):void 0}else return}else e=e[i]}return e}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oi(e,n){if(!n||typeof n!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){const t=n.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${n}`}else return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function nk(e,n){const t=oi(e,n);return t?t.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:t.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${t}`:t:""}function ik(e,n){return Array.isArray(n)?n.map(t=>ob(e,t)):[ob(e,n)]}function ob(e,n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function x6(e,n){const t=ob(e,n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function b6(e,n){const t=ob(e,n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function NN(e,n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function rk(e,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>NN(e,t)):[NN(e,n)]}function u1(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function CN(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function jN(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function la(e,n){if(n==null)throw new Error("ContentUnion is required");return u1(n)?n:{role:"user",parts:rk(e,n)}}function ak(e,n){if(!n)return[];if(e.isVertexAI()&&Array.isArray(n))return n.flatMap(t=>{const i=la(e,t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const t=la(e,n);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(n)?n.map(t=>la(e,t)):[la(e,n)]}function Vc(e,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(CN(n)||jN(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[la(e,n)]}const t=[],i=[],a=u1(n[0]);for(const o of n){const l=u1(o);if(l!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)t.push(o);else{if(CN(o)||jN(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(o)}}return a||t.push({role:"user",parts:rk(e,i)}),t}function sk(e,n){return n}function ok(e,n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Pb(e,n){return n}function Db(e,n){if(!Array.isArray(n))throw new Error("tool is required and must be an array of Tools");return n}function v6(e,n,t,i=1){const a=!n.startsWith(`${t}/`)&&n.split("/").length===i;return e.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${e.getProject()}/${n}`:n.startsWith(`${t}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:a?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}/${n}`:n:a?`${t}/${n}`:n}function Hc(e,n){if(typeof n!="string")throw new Error("name must be a string");return v6(e,n,"cachedContents")}function lk(e,n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Gc(e,n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function w6(e){return e!=null&&typeof e=="object"&&"name"in e}function S6(e){return e!=null&&typeof e=="object"&&"video"in e}function N6(e){return e!=null&&typeof e=="object"&&"uri"in e}function ck(e,n){var t;let i;if(w6(n)&&(i=n.name),!(N6(n)&&(i=n.uri,i===void 0))&&!(S6(n)&&(i=(t=n.video)===null||t===void 0?void 0:t.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const o=i.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${i}`);i=o[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function uk(e,n){let t;return e.isVertexAI()?t=n?"publishers/google/models":"models":t=n?"models":"tunedModels",t}function dk(e,n){for(const t of["models","tunedModels","publisherModels"])if(C6(n,t))return n[t];return[]}function C6(e,n){return e!==null&&typeof e=="object"&&n in e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j6(e,n){const t={};if(C(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=C(n,["data"]);i!=null&&j(t,["data"],i);const a=C(n,["mimeType"]);return a!=null&&j(t,["mimeType"],a),t}function _6(e,n){const t={};if(C(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=C(n,["thought"]);i!=null&&j(t,["thought"],i);const a=C(n,["inlineData"]);a!=null&&j(t,["inlineData"],j6(e,a));const o=C(n,["codeExecutionResult"]);o!=null&&j(t,["codeExecutionResult"],o);const l=C(n,["executableCode"]);l!=null&&j(t,["executableCode"],l);const f=C(n,["fileData"]);f!=null&&j(t,["fileData"],f);const d=C(n,["functionCall"]);d!=null&&j(t,["functionCall"],d);const u=C(n,["functionResponse"]);u!=null&&j(t,["functionResponse"],u);const p=C(n,["text"]);return p!=null&&j(t,["text"],p),t}function _N(e,n){const t={},i=C(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>_6(e,l))),j(t,["parts"],o)}const a=C(n,["role"]);return a!=null&&j(t,["role"],a),t}function k6(){return{}}function E6(e,n){const t={},i=C(n,["mode"]);i!=null&&j(t,["mode"],i);const a=C(n,["dynamicThreshold"]);return a!=null&&j(t,["dynamicThreshold"],a),t}function T6(e,n){const t={},i=C(n,["dynamicRetrievalConfig"]);return i!=null&&j(t,["dynamicRetrievalConfig"],E6(e,i)),t}function A6(e,n){const t={};if(C(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");C(n,["googleSearch"])!=null&&j(t,["googleSearch"],k6());const a=C(n,["googleSearchRetrieval"]);if(a!=null&&j(t,["googleSearchRetrieval"],T6(e,a)),C(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(C(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const o=C(n,["codeExecution"]);o!=null&&j(t,["codeExecution"],o);const l=C(n,["functionDeclarations"]);return l!=null&&j(t,["functionDeclarations"],l),t}function P6(e,n){const t={},i=C(n,["mode"]);i!=null&&j(t,["mode"],i);const a=C(n,["allowedFunctionNames"]);return a!=null&&j(t,["allowedFunctionNames"],a),t}function D6(e,n){const t={},i=C(n,["functionCallingConfig"]);if(i!=null&&j(t,["functionCallingConfig"],P6(e,i)),C(n,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return t}function I6(e,n,t){const i={},a=C(n,["ttl"]);t!==void 0&&a!=null&&j(t,["ttl"],a);const o=C(n,["expireTime"]);t!==void 0&&o!=null&&j(t,["expireTime"],o);const l=C(n,["displayName"]);t!==void 0&&l!=null&&j(t,["displayName"],l);const f=C(n,["contents"]);if(t!==void 0&&f!=null){let g=Vc(e,f);Array.isArray(g)&&(g=g.map(b=>_N(e,b))),j(t,["contents"],g)}const d=C(n,["systemInstruction"]);t!==void 0&&d!=null&&j(t,["systemInstruction"],_N(e,la(e,d)));const u=C(n,["tools"]);if(t!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(b=>A6(e,b))),j(t,["tools"],g)}const p=C(n,["toolConfig"]);return t!==void 0&&p!=null&&j(t,["toolConfig"],D6(e,p)),i}function M6(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["model"],nk(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],I6(e,a,t)),t}function R6(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["_url","name"],Hc(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function O6(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["_url","name"],Hc(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function L6(e,n,t){const i={},a=C(n,["ttl"]);t!==void 0&&a!=null&&j(t,["ttl"],a);const o=C(n,["expireTime"]);return t!==void 0&&o!=null&&j(t,["expireTime"],o),i}function F6(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["_url","name"],Hc(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],L6(e,a,t)),t}function $6(e,n,t){const i={},a=C(n,["pageSize"]);t!==void 0&&a!=null&&j(t,["_query","pageSize"],a);const o=C(n,["pageToken"]);return t!==void 0&&o!=null&&j(t,["_query","pageToken"],o),i}function z6(e,n){const t={},i=C(n,["config"]);return i!=null&&j(t,["config"],$6(e,i,t)),t}function B6(e,n){const t={},i=C(n,["displayName"]);i!=null&&j(t,["displayName"],i);const a=C(n,["data"]);a!=null&&j(t,["data"],a);const o=C(n,["mimeType"]);return o!=null&&j(t,["mimeType"],o),t}function U6(e,n){const t={},i=C(n,["videoMetadata"]);i!=null&&j(t,["videoMetadata"],i);const a=C(n,["thought"]);a!=null&&j(t,["thought"],a);const o=C(n,["inlineData"]);o!=null&&j(t,["inlineData"],B6(e,o));const l=C(n,["codeExecutionResult"]);l!=null&&j(t,["codeExecutionResult"],l);const f=C(n,["executableCode"]);f!=null&&j(t,["executableCode"],f);const d=C(n,["fileData"]);d!=null&&j(t,["fileData"],d);const u=C(n,["functionCall"]);u!=null&&j(t,["functionCall"],u);const p=C(n,["functionResponse"]);p!=null&&j(t,["functionResponse"],p);const g=C(n,["text"]);return g!=null&&j(t,["text"],g),t}function kN(e,n){const t={},i=C(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>U6(e,l))),j(t,["parts"],o)}const a=C(n,["role"]);return a!=null&&j(t,["role"],a),t}function q6(){return{}}function V6(e,n){const t={},i=C(n,["mode"]);i!=null&&j(t,["mode"],i);const a=C(n,["dynamicThreshold"]);return a!=null&&j(t,["dynamicThreshold"],a),t}function H6(e,n){const t={},i=C(n,["dynamicRetrievalConfig"]);return i!=null&&j(t,["dynamicRetrievalConfig"],V6(e,i)),t}function G6(){return{}}function Y6(e,n){const t={},i=C(n,["apiKeyString"]);return i!=null&&j(t,["apiKeyString"],i),t}function W6(e,n){const t={},i=C(n,["apiKeyConfig"]);i!=null&&j(t,["apiKeyConfig"],Y6(e,i));const a=C(n,["authType"]);a!=null&&j(t,["authType"],a);const o=C(n,["googleServiceAccountConfig"]);o!=null&&j(t,["googleServiceAccountConfig"],o);const l=C(n,["httpBasicAuthConfig"]);l!=null&&j(t,["httpBasicAuthConfig"],l);const f=C(n,["oauthConfig"]);f!=null&&j(t,["oauthConfig"],f);const d=C(n,["oidcConfig"]);return d!=null&&j(t,["oidcConfig"],d),t}function Q6(e,n){const t={},i=C(n,["authConfig"]);return i!=null&&j(t,["authConfig"],W6(e,i)),t}function J6(e,n){const t={},i=C(n,["retrieval"]);i!=null&&j(t,["retrieval"],i),C(n,["googleSearch"])!=null&&j(t,["googleSearch"],q6());const o=C(n,["googleSearchRetrieval"]);o!=null&&j(t,["googleSearchRetrieval"],H6(e,o)),C(n,["enterpriseWebSearch"])!=null&&j(t,["enterpriseWebSearch"],G6());const f=C(n,["googleMaps"]);f!=null&&j(t,["googleMaps"],Q6(e,f));const d=C(n,["codeExecution"]);d!=null&&j(t,["codeExecution"],d);const u=C(n,["functionDeclarations"]);return u!=null&&j(t,["functionDeclarations"],u),t}function K6(e,n){const t={},i=C(n,["mode"]);i!=null&&j(t,["mode"],i);const a=C(n,["allowedFunctionNames"]);return a!=null&&j(t,["allowedFunctionNames"],a),t}function X6(e,n){const t={},i=C(n,["latitude"]);i!=null&&j(t,["latitude"],i);const a=C(n,["longitude"]);return a!=null&&j(t,["longitude"],a),t}function Z6(e,n){const t={},i=C(n,["latLng"]);return i!=null&&j(t,["latLng"],X6(e,i)),t}function e$(e,n){const t={},i=C(n,["functionCallingConfig"]);i!=null&&j(t,["functionCallingConfig"],K6(e,i));const a=C(n,["retrievalConfig"]);return a!=null&&j(t,["retrievalConfig"],Z6(e,a)),t}function t$(e,n,t){const i={},a=C(n,["ttl"]);t!==void 0&&a!=null&&j(t,["ttl"],a);const o=C(n,["expireTime"]);t!==void 0&&o!=null&&j(t,["expireTime"],o);const l=C(n,["displayName"]);t!==void 0&&l!=null&&j(t,["displayName"],l);const f=C(n,["contents"]);if(t!==void 0&&f!=null){let g=Vc(e,f);Array.isArray(g)&&(g=g.map(b=>kN(e,b))),j(t,["contents"],g)}const d=C(n,["systemInstruction"]);t!==void 0&&d!=null&&j(t,["systemInstruction"],kN(e,la(e,d)));const u=C(n,["tools"]);if(t!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(b=>J6(e,b))),j(t,["tools"],g)}const p=C(n,["toolConfig"]);return t!==void 0&&p!=null&&j(t,["toolConfig"],e$(e,p)),i}function n$(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["model"],nk(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],t$(e,a,t)),t}function i$(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["_url","name"],Hc(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function r$(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["_url","name"],Hc(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function a$(e,n,t){const i={},a=C(n,["ttl"]);t!==void 0&&a!=null&&j(t,["ttl"],a);const o=C(n,["expireTime"]);return t!==void 0&&o!=null&&j(t,["expireTime"],o),i}function s$(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["_url","name"],Hc(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a$(e,a,t)),t}function o$(e,n,t){const i={},a=C(n,["pageSize"]);t!==void 0&&a!=null&&j(t,["_query","pageSize"],a);const o=C(n,["pageToken"]);return t!==void 0&&o!=null&&j(t,["_query","pageToken"],o),i}function l$(e,n){const t={},i=C(n,["config"]);return i!=null&&j(t,["config"],o$(e,i,t)),t}function Lx(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["displayName"]);a!=null&&j(t,["displayName"],a);const o=C(n,["model"]);o!=null&&j(t,["model"],o);const l=C(n,["createTime"]);l!=null&&j(t,["createTime"],l);const f=C(n,["updateTime"]);f!=null&&j(t,["updateTime"],f);const d=C(n,["expireTime"]);d!=null&&j(t,["expireTime"],d);const u=C(n,["usageMetadata"]);return u!=null&&j(t,["usageMetadata"],u),t}function c$(){return{}}function u$(e,n){const t={},i=C(n,["nextPageToken"]);i!=null&&j(t,["nextPageToken"],i);const a=C(n,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Lx(e,l))),j(t,["cachedContents"],o)}return t}function Fx(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["displayName"]);a!=null&&j(t,["displayName"],a);const o=C(n,["model"]);o!=null&&j(t,["model"],o);const l=C(n,["createTime"]);l!=null&&j(t,["createTime"],l);const f=C(n,["updateTime"]);f!=null&&j(t,["updateTime"],f);const d=C(n,["expireTime"]);d!=null&&j(t,["expireTime"],d);const u=C(n,["usageMetadata"]);return u!=null&&j(t,["usageMetadata"],u),t}function d$(){return{}}function f$(e,n){const t={},i=C(n,["nextPageToken"]);i!=null&&j(t,["nextPageToken"],i);const a=C(n,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Fx(e,l))),j(t,["cachedContents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jh;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(jh||(jh={}));class Ib{constructor(n,t,i,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(n,i,a)}init(n,t,i){var a,o;this.nameInternal=n,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};i?typeof i=="object"?l=Object.assign({},i):l=i:l={config:{}},l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(a=l.config)===null||a===void 0?void 0:a.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const n=await this.requestInternal(this.params);return this.initNextPage(n),this.page}hasNextPage(){var n;return((n=this.params.config)===null||n===void 0?void 0:n.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var EN;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(EN||(EN={}));var TN;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(TN||(TN={}));var AN;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(AN||(AN={}));var PN;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(PN||(PN={}));var DN;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(DN||(DN={}));var IN;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(IN||(IN={}));var MN;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(MN||(MN={}));var _h;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT"})(_h||(_h={}));var RN;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY"})(RN||(RN={}));var ON;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(ON||(ON={}));var LN;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(LN||(LN={}));var FN;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(FN||(FN={}));var $N;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($N||($N={}));var Uc;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Uc||(Uc={}));var zN;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(zN||(zN={}));var d1;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(d1||(d1={}));var BN;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(BN||(BN={}));var UN;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(UN||(UN={}));var qN;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(qN||(qN={}));var VN;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(VN||(VN={}));var HN;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(HN||(HN={}));var GN;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(GN||(GN={}));var YN;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi"})(YN||(YN={}));var WN;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(WN||(WN={}));var QN;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(QN||(QN={}));var JN;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(JN||(JN={}));var KN;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(KN||(KN={}));var XN;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(XN||(XN={}));var ZN;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(ZN||(ZN={}));var eC;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(eC||(eC={}));var tC;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tC||(tC={}));var nC;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nC||(nC={}));var iC;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(iC||(iC={}));var rC;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rC||(rC={}));class gx{get text(){var n,t,i,a,o,l,f,d;if(((a=(i=(t=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",p=!1;const g=[];for(const b of(d=(f=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)!==null&&d!==void 0?d:[]){for(const[v,N]of Object.entries(b))v!=="text"&&v!=="thought"&&(N!==null||N!==void 0)&&g.push(v);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;p=!0,u+=b.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?u:void 0}get data(){var n,t,i,a,o,l,f,d;if(((a=(i=(t=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const p=[];for(const g of(d=(f=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)!==null&&d!==void 0?d:[]){for(const[b,v]of Object.entries(g))b!=="inlineData"&&(v!==null||v!==void 0)&&p.push(b);g.inlineData&&typeof g.inlineData.data=="string"&&(u+=atob(g.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var n,t,i,a,o,l,f,d;if(((a=(i=(t=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(d=(f=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)===null||d===void 0?void 0:d.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var n,t,i,a,o,l,f,d,u;if(((a=(i=(t=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(d=(f=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)===null||d===void 0?void 0:d.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((p==null?void 0:p.length)!==0)return(u=p==null?void 0:p[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var n,t,i,a,o,l,f,d,u;if(((a=(i=(t=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(d=(f=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)===null||d===void 0?void 0:d.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((p==null?void 0:p.length)!==0)return(u=p==null?void 0:p[0])===null||u===void 0?void 0:u.output}}class aC{}class sC{}class h${}class p${}class oC{}class lC{}class cC{}class m${}class uC{}class dC{}class fC{}class g${}class f1{constructor(n){const t={};for(const i of n.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=n}json(){return this.responseInternal.json()}}class y${}class x${}class b${get text(){var n,t,i;let a="",o=!1;const l=[];for(const f of(i=(t=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,u]of Object.entries(f))d!=="text"&&d!=="thought"&&u!==null&&l.push(d);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;o=!0,a+=f.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?a:void 0}get data(){var n,t,i;let a="";const o=[];for(const l of(i=(t=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(l))f!=="inlineData"&&d!==null&&o.push(f);l.inlineData&&typeof l.inlineData.data=="string"&&(a+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v$ extends rg{constructor(n){super(),this.apiClient=n,this.list=async(t={})=>new Ib(jh.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=n$(this.apiClient,n);return f=Rt("cachedContents",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Fx(this.apiClient,p))}else{const u=M6(this.apiClient,n);return f=Rt("cachedContents",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Lx(this.apiClient,p))}}async get(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=i$(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Fx(this.apiClient,p))}else{const u=R6(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Lx(this.apiClient,p))}}async delete(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=r$(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(()=>{const p=d$(),g=new dC;return Object.assign(g,p),g})}else{const u=O6(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(()=>{const p=c$(),g=new dC;return Object.assign(g,p),g})}}async update(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=s$(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Fx(this.apiClient,p))}else{const u=F6(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Lx(this.apiClient,p))}}async listInternal(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=l$(this.apiClient,n);return f=Rt("cachedContents",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const g=f$(this.apiClient,p),b=new fC;return Object.assign(b,g),b})}else{const u=z6(this.apiClient,n);return f=Rt("cachedContents",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const g=u$(this.apiClient,p),b=new fC;return Object.assign(b,g),b})}}}function hC(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],i=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function vr(e){return this instanceof vr?(this.v=e,this):new vr(e)}function lb(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(e,n||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(v){return function(N){return Promise.resolve(N).then(v,g)}}function f(v,N){i[v]&&(a[v]=function(k){return new Promise(function(E,T){o.push([v,k,E,T])>1||d(v,k)})},N&&(a[v]=N(a[v])))}function d(v,N){try{u(i[v](N))}catch(k){b(o[0][3],k)}}function u(v){v.value instanceof vr?Promise.resolve(v.value.v).then(p,g):b(o[0][2],v)}function p(v){d("next",v)}function g(v){d("throw",v)}function b(v,N){v(N),o.shift(),o.length&&d(o[0][0],o[0][1])}}function h1(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof hC=="function"?hC(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=e[o]&&function(l){return new Promise(function(f,d){l=e[o](l),a(f,d,l.done,l.value)})}}function a(o,l,f,d){Promise.resolve(d).then(function(u){o({value:u,done:f})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w$(e){var n;if(e.candidates==null||e.candidates.length===0)return!1;const t=(n=e.candidates[0])===null||n===void 0?void 0:n.content;return t===void 0?!1:fk(t)}function fk(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const n of e.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}function S$(e){if(e.length!==0){if(e[0].role!=="user")throw new Error("History must start with a user turn.");for(const n of e)if(n.role!=="user"&&n.role!=="model")throw new Error(`Role must be user or model, but got ${n.role}.`)}}function N$(e){if(e===void 0||e.length===0)return[];const n=[],t=e.length;let i=0,a=e[0];for(;i<t;)if(e[i].role==="user")a=e[i],i++;else{const o=[];let l=!0;for(;i<t&&e[i].role==="model";)o.push(e[i]),l&&!fk(e[i])&&(l=!1),i++;l&&(n.push(a),n.push(...o))}return n}class C${constructor(n,t){this.modelsModule=n,this.apiClient=t}create(n){return new j$(this.apiClient,this.modelsModule,n.model,n.config,n.history)}}class j${constructor(n,t,i,a={},o=[]){this.apiClient=n,this.modelsModule=t,this.model=i,this.config=a,this.history=o,this.sendPromise=Promise.resolve(),S$(o)}async sendMessage(n){var t;await this.sendPromise;const i=la(this.apiClient,n.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=n.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,l;const d=(l=(o=(await a).candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,u=d?[d]:[];this.recordHistory(i,u)})(),await this.sendPromise,a}async sendMessageStream(n){var t;await this.sendPromise;const i=la(this.apiClient,n.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=n.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const o=await a;return this.processStreamResponse(o,i)}getHistory(n=!1){return n?N$(this.history):this.history}processStreamResponse(n,t){var i,a;return lb(this,arguments,function*(){var l,f,d,u;const p=[];try{for(var g=!0,b=h1(n),v;v=yield vr(b.next()),l=v.done,!l;g=!0){u=v.value,g=!1;const N=u;if(w$(N)){const k=(a=(i=N.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content;k!==void 0&&p.push(k)}yield yield vr(N)}}catch(N){f={error:N}}finally{try{!g&&!l&&(d=b.return)&&(yield vr(d.call(b)))}finally{if(f)throw f.error}}this.recordHistory(t,p)})}recordHistory(n,t){let i=[];t.length>0&&t.every(a=>a.role==="model")?i=t:i.push({role:"model",parts:[]}),this.history.push(n),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _$(e,n,t){const i={},a=C(n,["pageSize"]);t!==void 0&&a!=null&&j(t,["_query","pageSize"],a);const o=C(n,["pageToken"]);return t!==void 0&&o!=null&&j(t,["_query","pageToken"],o),i}function k$(e,n){const t={},i=C(n,["config"]);return i!=null&&j(t,["config"],_$(e,i,t)),t}function E$(e,n){const t={},i=C(n,["details"]);i!=null&&j(t,["details"],i);const a=C(n,["message"]);a!=null&&j(t,["message"],a);const o=C(n,["code"]);return o!=null&&j(t,["code"],o),t}function T$(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["displayName"]);a!=null&&j(t,["displayName"],a);const o=C(n,["mimeType"]);o!=null&&j(t,["mimeType"],o);const l=C(n,["sizeBytes"]);l!=null&&j(t,["sizeBytes"],l);const f=C(n,["createTime"]);f!=null&&j(t,["createTime"],f);const d=C(n,["expirationTime"]);d!=null&&j(t,["expirationTime"],d);const u=C(n,["updateTime"]);u!=null&&j(t,["updateTime"],u);const p=C(n,["sha256Hash"]);p!=null&&j(t,["sha256Hash"],p);const g=C(n,["uri"]);g!=null&&j(t,["uri"],g);const b=C(n,["downloadUri"]);b!=null&&j(t,["downloadUri"],b);const v=C(n,["state"]);v!=null&&j(t,["state"],v);const N=C(n,["source"]);N!=null&&j(t,["source"],N);const k=C(n,["videoMetadata"]);k!=null&&j(t,["videoMetadata"],k);const E=C(n,["error"]);return E!=null&&j(t,["error"],E$(e,E)),t}function A$(e,n){const t={},i=C(n,["file"]);i!=null&&j(t,["file"],T$(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function P$(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["_url","file"],ck(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function D$(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["_url","file"],ck(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function I$(e,n){const t={},i=C(n,["details"]);i!=null&&j(t,["details"],i);const a=C(n,["message"]);a!=null&&j(t,["message"],a);const o=C(n,["code"]);return o!=null&&j(t,["code"],o),t}function p1(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["displayName"]);a!=null&&j(t,["displayName"],a);const o=C(n,["mimeType"]);o!=null&&j(t,["mimeType"],o);const l=C(n,["sizeBytes"]);l!=null&&j(t,["sizeBytes"],l);const f=C(n,["createTime"]);f!=null&&j(t,["createTime"],f);const d=C(n,["expirationTime"]);d!=null&&j(t,["expirationTime"],d);const u=C(n,["updateTime"]);u!=null&&j(t,["updateTime"],u);const p=C(n,["sha256Hash"]);p!=null&&j(t,["sha256Hash"],p);const g=C(n,["uri"]);g!=null&&j(t,["uri"],g);const b=C(n,["downloadUri"]);b!=null&&j(t,["downloadUri"],b);const v=C(n,["state"]);v!=null&&j(t,["state"],v);const N=C(n,["source"]);N!=null&&j(t,["source"],N);const k=C(n,["videoMetadata"]);k!=null&&j(t,["videoMetadata"],k);const E=C(n,["error"]);return E!=null&&j(t,["error"],I$(e,E)),t}function M$(e,n){const t={},i=C(n,["nextPageToken"]);i!=null&&j(t,["nextPageToken"],i);const a=C(n,["files"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>p1(e,l))),j(t,["files"],o)}return t}function R$(){return{}}function O$(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L$ extends rg{constructor(n){super(),this.apiClient=n,this.list=async(t={})=>new Ib(jh.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(t=>p1(this.apiClient,t))}async download(n){await this.apiClient.downloadFile(n)}async listInternal(n){var t,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=k$(this.apiClient,n);return o=Rt("files",f._url),l=f._query,delete f.config,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const u=M$(this.apiClient,d),p=new g$;return Object.assign(p,u),p})}}async createInternal(n){var t,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=A$(this.apiClient,n);return o=Rt("upload/v1beta/files",f._url),l=f._query,delete f.config,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const d=R$(),u=new y$;return Object.assign(u,d),u})}}async get(n){var t,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=P$(this.apiClient,n);return o=Rt("files/{file}",f._url),l=f._query,delete f.config,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>p1(this.apiClient,d))}}async delete(n){var t,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=D$(this.apiClient,n);return o=Rt("files/{file}",f._url),l=f._query,delete f.config,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const d=O$(),u=new x$;return Object.assign(u,d),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F$(e,n){const t={};if(C(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=C(n,["data"]);i!=null&&j(t,["data"],i);const a=C(n,["mimeType"]);return a!=null&&j(t,["mimeType"],a),t}function $$(e,n){const t={},i=C(n,["displayName"]);i!=null&&j(t,["displayName"],i);const a=C(n,["data"]);a!=null&&j(t,["data"],a);const o=C(n,["mimeType"]);return o!=null&&j(t,["mimeType"],o),t}function z$(e,n){const t={};if(C(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=C(n,["thought"]);i!=null&&j(t,["thought"],i);const a=C(n,["inlineData"]);a!=null&&j(t,["inlineData"],F$(e,a));const o=C(n,["codeExecutionResult"]);o!=null&&j(t,["codeExecutionResult"],o);const l=C(n,["executableCode"]);l!=null&&j(t,["executableCode"],l);const f=C(n,["fileData"]);f!=null&&j(t,["fileData"],f);const d=C(n,["functionCall"]);d!=null&&j(t,["functionCall"],d);const u=C(n,["functionResponse"]);u!=null&&j(t,["functionResponse"],u);const p=C(n,["text"]);return p!=null&&j(t,["text"],p),t}function B$(e,n){const t={},i=C(n,["videoMetadata"]);i!=null&&j(t,["videoMetadata"],i);const a=C(n,["thought"]);a!=null&&j(t,["thought"],a);const o=C(n,["inlineData"]);o!=null&&j(t,["inlineData"],$$(e,o));const l=C(n,["codeExecutionResult"]);l!=null&&j(t,["codeExecutionResult"],l);const f=C(n,["executableCode"]);f!=null&&j(t,["executableCode"],f);const d=C(n,["fileData"]);d!=null&&j(t,["fileData"],d);const u=C(n,["functionCall"]);u!=null&&j(t,["functionCall"],u);const p=C(n,["functionResponse"]);p!=null&&j(t,["functionResponse"],p);const g=C(n,["text"]);return g!=null&&j(t,["text"],g),t}function U$(e,n){const t={},i=C(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>z$(e,l))),j(t,["parts"],o)}const a=C(n,["role"]);return a!=null&&j(t,["role"],a),t}function q$(e,n){const t={},i=C(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>B$(e,l))),j(t,["parts"],o)}const a=C(n,["role"]);return a!=null&&j(t,["role"],a),t}function V$(){return{}}function H$(){return{}}function G$(e,n){const t={},i=C(n,["mode"]);i!=null&&j(t,["mode"],i);const a=C(n,["dynamicThreshold"]);return a!=null&&j(t,["dynamicThreshold"],a),t}function Y$(e,n){const t={},i=C(n,["mode"]);i!=null&&j(t,["mode"],i);const a=C(n,["dynamicThreshold"]);return a!=null&&j(t,["dynamicThreshold"],a),t}function W$(e,n){const t={},i=C(n,["dynamicRetrievalConfig"]);return i!=null&&j(t,["dynamicRetrievalConfig"],G$(e,i)),t}function Q$(e,n){const t={},i=C(n,["dynamicRetrievalConfig"]);return i!=null&&j(t,["dynamicRetrievalConfig"],Y$(e,i)),t}function J$(){return{}}function K$(e,n){const t={},i=C(n,["apiKeyString"]);return i!=null&&j(t,["apiKeyString"],i),t}function X$(e,n){const t={},i=C(n,["apiKeyConfig"]);i!=null&&j(t,["apiKeyConfig"],K$(e,i));const a=C(n,["authType"]);a!=null&&j(t,["authType"],a);const o=C(n,["googleServiceAccountConfig"]);o!=null&&j(t,["googleServiceAccountConfig"],o);const l=C(n,["httpBasicAuthConfig"]);l!=null&&j(t,["httpBasicAuthConfig"],l);const f=C(n,["oauthConfig"]);f!=null&&j(t,["oauthConfig"],f);const d=C(n,["oidcConfig"]);return d!=null&&j(t,["oidcConfig"],d),t}function Z$(e,n){const t={},i=C(n,["authConfig"]);return i!=null&&j(t,["authConfig"],X$(e,i)),t}function e5(e,n){const t={};if(C(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");C(n,["googleSearch"])!=null&&j(t,["googleSearch"],V$());const a=C(n,["googleSearchRetrieval"]);if(a!=null&&j(t,["googleSearchRetrieval"],W$(e,a)),C(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(C(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const o=C(n,["codeExecution"]);o!=null&&j(t,["codeExecution"],o);const l=C(n,["functionDeclarations"]);return l!=null&&j(t,["functionDeclarations"],l),t}function t5(e,n){const t={},i=C(n,["retrieval"]);i!=null&&j(t,["retrieval"],i),C(n,["googleSearch"])!=null&&j(t,["googleSearch"],H$());const o=C(n,["googleSearchRetrieval"]);o!=null&&j(t,["googleSearchRetrieval"],Q$(e,o)),C(n,["enterpriseWebSearch"])!=null&&j(t,["enterpriseWebSearch"],J$());const f=C(n,["googleMaps"]);f!=null&&j(t,["googleMaps"],Z$(e,f));const d=C(n,["codeExecution"]);d!=null&&j(t,["codeExecution"],d);const u=C(n,["functionDeclarations"]);return u!=null&&j(t,["functionDeclarations"],u),t}function n5(e,n){const t={},i=C(n,["handle"]);if(i!=null&&j(t,["handle"],i),C(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function i5(e,n){const t={},i=C(n,["handle"]);i!=null&&j(t,["handle"],i);const a=C(n,["transparent"]);return a!=null&&j(t,["transparent"],a),t}function pC(){return{}}function mC(){return{}}function r5(e,n){const t={},i=C(n,["disabled"]);i!=null&&j(t,["disabled"],i);const a=C(n,["startOfSpeechSensitivity"]);a!=null&&j(t,["startOfSpeechSensitivity"],a);const o=C(n,["endOfSpeechSensitivity"]);o!=null&&j(t,["endOfSpeechSensitivity"],o);const l=C(n,["prefixPaddingMs"]);l!=null&&j(t,["prefixPaddingMs"],l);const f=C(n,["silenceDurationMs"]);return f!=null&&j(t,["silenceDurationMs"],f),t}function a5(e,n){const t={},i=C(n,["disabled"]);i!=null&&j(t,["disabled"],i);const a=C(n,["startOfSpeechSensitivity"]);a!=null&&j(t,["startOfSpeechSensitivity"],a);const o=C(n,["endOfSpeechSensitivity"]);o!=null&&j(t,["endOfSpeechSensitivity"],o);const l=C(n,["prefixPaddingMs"]);l!=null&&j(t,["prefixPaddingMs"],l);const f=C(n,["silenceDurationMs"]);return f!=null&&j(t,["silenceDurationMs"],f),t}function s5(e,n){const t={},i=C(n,["automaticActivityDetection"]);i!=null&&j(t,["automaticActivityDetection"],r5(e,i));const a=C(n,["activityHandling"]);a!=null&&j(t,["activityHandling"],a);const o=C(n,["turnCoverage"]);return o!=null&&j(t,["turnCoverage"],o),t}function o5(e,n){const t={},i=C(n,["automaticActivityDetection"]);i!=null&&j(t,["automaticActivityDetection"],a5(e,i));const a=C(n,["activityHandling"]);a!=null&&j(t,["activityHandling"],a);const o=C(n,["turnCoverage"]);return o!=null&&j(t,["turnCoverage"],o),t}function l5(e,n){const t={},i=C(n,["targetTokens"]);return i!=null&&j(t,["targetTokens"],i),t}function c5(e,n){const t={},i=C(n,["targetTokens"]);return i!=null&&j(t,["targetTokens"],i),t}function u5(e,n){const t={},i=C(n,["triggerTokens"]);i!=null&&j(t,["triggerTokens"],i);const a=C(n,["slidingWindow"]);return a!=null&&j(t,["slidingWindow"],l5(e,a)),t}function d5(e,n){const t={},i=C(n,["triggerTokens"]);i!=null&&j(t,["triggerTokens"],i);const a=C(n,["slidingWindow"]);return a!=null&&j(t,["slidingWindow"],c5(e,a)),t}function f5(e,n,t){const i={},a=C(n,["generationConfig"]);t!==void 0&&a!=null&&j(t,["setup","generationConfig"],a);const o=C(n,["responseModalities"]);t!==void 0&&o!=null&&j(t,["setup","generationConfig","responseModalities"],o);const l=C(n,["temperature"]);t!==void 0&&l!=null&&j(t,["setup","generationConfig","temperature"],l);const f=C(n,["topP"]);t!==void 0&&f!=null&&j(t,["setup","generationConfig","topP"],f);const d=C(n,["topK"]);t!==void 0&&d!=null&&j(t,["setup","generationConfig","topK"],d);const u=C(n,["maxOutputTokens"]);t!==void 0&&u!=null&&j(t,["setup","generationConfig","maxOutputTokens"],u);const p=C(n,["mediaResolution"]);t!==void 0&&p!=null&&j(t,["setup","generationConfig","mediaResolution"],p);const g=C(n,["seed"]);t!==void 0&&g!=null&&j(t,["setup","generationConfig","seed"],g);const b=C(n,["speechConfig"]);t!==void 0&&b!=null&&j(t,["setup","generationConfig","speechConfig"],b);const v=C(n,["systemInstruction"]);t!==void 0&&v!=null&&j(t,["setup","systemInstruction"],U$(e,la(e,v)));const N=C(n,["tools"]);if(t!==void 0&&N!=null){let U=Db(e,N);Array.isArray(U)&&(U=U.map(O=>e5(e,Pb(e,O)))),j(t,["setup","tools"],U)}const k=C(n,["sessionResumption"]);t!==void 0&&k!=null&&j(t,["setup","sessionResumption"],n5(e,k));const E=C(n,["inputAudioTranscription"]);t!==void 0&&E!=null&&j(t,["setup","inputAudioTranscription"],pC());const T=C(n,["outputAudioTranscription"]);t!==void 0&&T!=null&&j(t,["setup","outputAudioTranscription"],pC());const I=C(n,["realtimeInputConfig"]);t!==void 0&&I!=null&&j(t,["setup","realtimeInputConfig"],s5(e,I));const D=C(n,["contextWindowCompression"]);return t!==void 0&&D!=null&&j(t,["setup","contextWindowCompression"],u5(e,D)),i}function h5(e,n,t){const i={},a=C(n,["generationConfig"]);t!==void 0&&a!=null&&j(t,["setup","generationConfig"],a);const o=C(n,["responseModalities"]);t!==void 0&&o!=null&&j(t,["setup","generationConfig","responseModalities"],o);const l=C(n,["temperature"]);t!==void 0&&l!=null&&j(t,["setup","generationConfig","temperature"],l);const f=C(n,["topP"]);t!==void 0&&f!=null&&j(t,["setup","generationConfig","topP"],f);const d=C(n,["topK"]);t!==void 0&&d!=null&&j(t,["setup","generationConfig","topK"],d);const u=C(n,["maxOutputTokens"]);t!==void 0&&u!=null&&j(t,["setup","generationConfig","maxOutputTokens"],u);const p=C(n,["mediaResolution"]);t!==void 0&&p!=null&&j(t,["setup","generationConfig","mediaResolution"],p);const g=C(n,["seed"]);t!==void 0&&g!=null&&j(t,["setup","generationConfig","seed"],g);const b=C(n,["speechConfig"]);t!==void 0&&b!=null&&j(t,["setup","generationConfig","speechConfig"],b);const v=C(n,["systemInstruction"]);t!==void 0&&v!=null&&j(t,["setup","systemInstruction"],q$(e,la(e,v)));const N=C(n,["tools"]);if(t!==void 0&&N!=null){let U=Db(e,N);Array.isArray(U)&&(U=U.map(O=>t5(e,Pb(e,O)))),j(t,["setup","tools"],U)}const k=C(n,["sessionResumption"]);t!==void 0&&k!=null&&j(t,["setup","sessionResumption"],i5(e,k));const E=C(n,["inputAudioTranscription"]);t!==void 0&&E!=null&&j(t,["setup","inputAudioTranscription"],mC());const T=C(n,["outputAudioTranscription"]);t!==void 0&&T!=null&&j(t,["setup","outputAudioTranscription"],mC());const I=C(n,["realtimeInputConfig"]);t!==void 0&&I!=null&&j(t,["setup","realtimeInputConfig"],o5(e,I));const D=C(n,["contextWindowCompression"]);return t!==void 0&&D!=null&&j(t,["setup","contextWindowCompression"],d5(e,D)),i}function p5(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["setup","model"],oi(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],f5(e,a,t)),t}function m5(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["setup","model"],oi(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],h5(e,a,t)),t}function g5(){return{}}function y5(){return{}}function x5(){return{}}function b5(){return{}}function v5(e,n){const t={},i=C(n,["media"]);i!=null&&j(t,["mediaChunks"],ik(e,i));const a=C(n,["audio"]);a!=null&&j(t,["audio"],b6(e,a));const o=C(n,["audioStreamEnd"]);o!=null&&j(t,["audioStreamEnd"],o);const l=C(n,["video"]);l!=null&&j(t,["video"],x6(e,l));const f=C(n,["text"]);return f!=null&&j(t,["text"],f),C(n,["activityStart"])!=null&&j(t,["activityStart"],g5()),C(n,["activityEnd"])!=null&&j(t,["activityEnd"],x5()),t}function w5(e,n){const t={},i=C(n,["media"]);if(i!=null&&j(t,["mediaChunks"],ik(e,i)),C(n,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const a=C(n,["audioStreamEnd"]);if(a!=null&&j(t,["audioStreamEnd"],a),C(n,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(C(n,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return C(n,["activityStart"])!=null&&j(t,["activityStart"],y5()),C(n,["activityEnd"])!=null&&j(t,["activityEnd"],b5()),t}function S5(){return{}}function N5(){return{}}function C5(e,n){const t={},i=C(n,["data"]);i!=null&&j(t,["data"],i);const a=C(n,["mimeType"]);return a!=null&&j(t,["mimeType"],a),t}function j5(e,n){const t={},i=C(n,["displayName"]);i!=null&&j(t,["displayName"],i);const a=C(n,["data"]);a!=null&&j(t,["data"],a);const o=C(n,["mimeType"]);return o!=null&&j(t,["mimeType"],o),t}function _5(e,n){const t={},i=C(n,["thought"]);i!=null&&j(t,["thought"],i);const a=C(n,["inlineData"]);a!=null&&j(t,["inlineData"],C5(e,a));const o=C(n,["codeExecutionResult"]);o!=null&&j(t,["codeExecutionResult"],o);const l=C(n,["executableCode"]);l!=null&&j(t,["executableCode"],l);const f=C(n,["fileData"]);f!=null&&j(t,["fileData"],f);const d=C(n,["functionCall"]);d!=null&&j(t,["functionCall"],d);const u=C(n,["functionResponse"]);u!=null&&j(t,["functionResponse"],u);const p=C(n,["text"]);return p!=null&&j(t,["text"],p),t}function k5(e,n){const t={},i=C(n,["videoMetadata"]);i!=null&&j(t,["videoMetadata"],i);const a=C(n,["thought"]);a!=null&&j(t,["thought"],a);const o=C(n,["inlineData"]);o!=null&&j(t,["inlineData"],j5(e,o));const l=C(n,["codeExecutionResult"]);l!=null&&j(t,["codeExecutionResult"],l);const f=C(n,["executableCode"]);f!=null&&j(t,["executableCode"],f);const d=C(n,["fileData"]);d!=null&&j(t,["fileData"],d);const u=C(n,["functionCall"]);u!=null&&j(t,["functionCall"],u);const p=C(n,["functionResponse"]);p!=null&&j(t,["functionResponse"],p);const g=C(n,["text"]);return g!=null&&j(t,["text"],g),t}function E5(e,n){const t={},i=C(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>_5(e,l))),j(t,["parts"],o)}const a=C(n,["role"]);return a!=null&&j(t,["role"],a),t}function T5(e,n){const t={},i=C(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>k5(e,l))),j(t,["parts"],o)}const a=C(n,["role"]);return a!=null&&j(t,["role"],a),t}function gC(e,n){const t={},i=C(n,["text"]);i!=null&&j(t,["text"],i);const a=C(n,["finished"]);return a!=null&&j(t,["finished"],a),t}function yC(e,n){const t={},i=C(n,["text"]);i!=null&&j(t,["text"],i);const a=C(n,["finished"]);return a!=null&&j(t,["finished"],a),t}function A5(e,n){const t={},i=C(n,["modelTurn"]);i!=null&&j(t,["modelTurn"],E5(e,i));const a=C(n,["turnComplete"]);a!=null&&j(t,["turnComplete"],a);const o=C(n,["interrupted"]);o!=null&&j(t,["interrupted"],o);const l=C(n,["groundingMetadata"]);l!=null&&j(t,["groundingMetadata"],l);const f=C(n,["generationComplete"]);f!=null&&j(t,["generationComplete"],f);const d=C(n,["inputTranscription"]);d!=null&&j(t,["inputTranscription"],gC(e,d));const u=C(n,["outputTranscription"]);return u!=null&&j(t,["outputTranscription"],gC(e,u)),t}function P5(e,n){const t={},i=C(n,["modelTurn"]);i!=null&&j(t,["modelTurn"],T5(e,i));const a=C(n,["turnComplete"]);a!=null&&j(t,["turnComplete"],a);const o=C(n,["interrupted"]);o!=null&&j(t,["interrupted"],o);const l=C(n,["groundingMetadata"]);l!=null&&j(t,["groundingMetadata"],l);const f=C(n,["generationComplete"]);f!=null&&j(t,["generationComplete"],f);const d=C(n,["inputTranscription"]);d!=null&&j(t,["inputTranscription"],yC(e,d));const u=C(n,["outputTranscription"]);return u!=null&&j(t,["outputTranscription"],yC(e,u)),t}function D5(e,n){const t={},i=C(n,["id"]);i!=null&&j(t,["id"],i);const a=C(n,["args"]);a!=null&&j(t,["args"],a);const o=C(n,["name"]);return o!=null&&j(t,["name"],o),t}function I5(e,n){const t={},i=C(n,["args"]);i!=null&&j(t,["args"],i);const a=C(n,["name"]);return a!=null&&j(t,["name"],a),t}function M5(e,n){const t={},i=C(n,["functionCalls"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>D5(e,o))),j(t,["functionCalls"],a)}return t}function R5(e,n){const t={},i=C(n,["functionCalls"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>I5(e,o))),j(t,["functionCalls"],a)}return t}function O5(e,n){const t={},i=C(n,["ids"]);return i!=null&&j(t,["ids"],i),t}function L5(e,n){const t={},i=C(n,["ids"]);return i!=null&&j(t,["ids"],i),t}function yx(e,n){const t={},i=C(n,["modality"]);i!=null&&j(t,["modality"],i);const a=C(n,["tokenCount"]);return a!=null&&j(t,["tokenCount"],a),t}function xx(e,n){const t={},i=C(n,["modality"]);i!=null&&j(t,["modality"],i);const a=C(n,["tokenCount"]);return a!=null&&j(t,["tokenCount"],a),t}function F5(e,n){const t={},i=C(n,["promptTokenCount"]);i!=null&&j(t,["promptTokenCount"],i);const a=C(n,["cachedContentTokenCount"]);a!=null&&j(t,["cachedContentTokenCount"],a);const o=C(n,["responseTokenCount"]);o!=null&&j(t,["responseTokenCount"],o);const l=C(n,["toolUsePromptTokenCount"]);l!=null&&j(t,["toolUsePromptTokenCount"],l);const f=C(n,["thoughtsTokenCount"]);f!=null&&j(t,["thoughtsTokenCount"],f);const d=C(n,["totalTokenCount"]);d!=null&&j(t,["totalTokenCount"],d);const u=C(n,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(N=>yx(e,N))),j(t,["promptTokensDetails"],v)}const p=C(n,["cacheTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(N=>yx(e,N))),j(t,["cacheTokensDetails"],v)}const g=C(n,["responseTokensDetails"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(N=>yx(e,N))),j(t,["responseTokensDetails"],v)}const b=C(n,["toolUsePromptTokensDetails"]);if(b!=null){let v=b;Array.isArray(v)&&(v=v.map(N=>yx(e,N))),j(t,["toolUsePromptTokensDetails"],v)}return t}function $5(e,n){const t={},i=C(n,["promptTokenCount"]);i!=null&&j(t,["promptTokenCount"],i);const a=C(n,["cachedContentTokenCount"]);a!=null&&j(t,["cachedContentTokenCount"],a);const o=C(n,["candidatesTokenCount"]);o!=null&&j(t,["responseTokenCount"],o);const l=C(n,["toolUsePromptTokenCount"]);l!=null&&j(t,["toolUsePromptTokenCount"],l);const f=C(n,["thoughtsTokenCount"]);f!=null&&j(t,["thoughtsTokenCount"],f);const d=C(n,["totalTokenCount"]);d!=null&&j(t,["totalTokenCount"],d);const u=C(n,["promptTokensDetails"]);if(u!=null){let N=u;Array.isArray(N)&&(N=N.map(k=>xx(e,k))),j(t,["promptTokensDetails"],N)}const p=C(n,["cacheTokensDetails"]);if(p!=null){let N=p;Array.isArray(N)&&(N=N.map(k=>xx(e,k))),j(t,["cacheTokensDetails"],N)}const g=C(n,["candidatesTokensDetails"]);if(g!=null){let N=g;Array.isArray(N)&&(N=N.map(k=>xx(e,k))),j(t,["responseTokensDetails"],N)}const b=C(n,["toolUsePromptTokensDetails"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(k=>xx(e,k))),j(t,["toolUsePromptTokensDetails"],N)}const v=C(n,["trafficType"]);return v!=null&&j(t,["trafficType"],v),t}function z5(e,n){const t={},i=C(n,["timeLeft"]);return i!=null&&j(t,["timeLeft"],i),t}function B5(e,n){const t={},i=C(n,["timeLeft"]);return i!=null&&j(t,["timeLeft"],i),t}function U5(e,n){const t={},i=C(n,["newHandle"]);i!=null&&j(t,["newHandle"],i);const a=C(n,["resumable"]);a!=null&&j(t,["resumable"],a);const o=C(n,["lastConsumedClientMessageIndex"]);return o!=null&&j(t,["lastConsumedClientMessageIndex"],o),t}function q5(e,n){const t={},i=C(n,["newHandle"]);i!=null&&j(t,["newHandle"],i);const a=C(n,["resumable"]);a!=null&&j(t,["resumable"],a);const o=C(n,["lastConsumedClientMessageIndex"]);return o!=null&&j(t,["lastConsumedClientMessageIndex"],o),t}function V5(e,n){const t={};C(n,["setupComplete"])!=null&&j(t,["setupComplete"],S5());const a=C(n,["serverContent"]);a!=null&&j(t,["serverContent"],A5(e,a));const o=C(n,["toolCall"]);o!=null&&j(t,["toolCall"],M5(e,o));const l=C(n,["toolCallCancellation"]);l!=null&&j(t,["toolCallCancellation"],O5(e,l));const f=C(n,["usageMetadata"]);f!=null&&j(t,["usageMetadata"],F5(e,f));const d=C(n,["goAway"]);d!=null&&j(t,["goAway"],z5(e,d));const u=C(n,["sessionResumptionUpdate"]);return u!=null&&j(t,["sessionResumptionUpdate"],U5(e,u)),t}function H5(e,n){const t={};C(n,["setupComplete"])!=null&&j(t,["setupComplete"],N5());const a=C(n,["serverContent"]);a!=null&&j(t,["serverContent"],P5(e,a));const o=C(n,["toolCall"]);o!=null&&j(t,["toolCall"],R5(e,o));const l=C(n,["toolCallCancellation"]);l!=null&&j(t,["toolCallCancellation"],L5(e,l));const f=C(n,["usageMetadata"]);f!=null&&j(t,["usageMetadata"],$5(e,f));const d=C(n,["goAway"]);d!=null&&j(t,["goAway"],B5(e,d));const u=C(n,["sessionResumptionUpdate"]);return u!=null&&j(t,["sessionResumptionUpdate"],q5(e,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G5(e,n){const t={};if(C(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=C(n,["data"]);i!=null&&j(t,["data"],i);const a=C(n,["mimeType"]);return a!=null&&j(t,["mimeType"],a),t}function Y5(e,n){const t={};if(C(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=C(n,["thought"]);i!=null&&j(t,["thought"],i);const a=C(n,["inlineData"]);a!=null&&j(t,["inlineData"],G5(e,a));const o=C(n,["codeExecutionResult"]);o!=null&&j(t,["codeExecutionResult"],o);const l=C(n,["executableCode"]);l!=null&&j(t,["executableCode"],l);const f=C(n,["fileData"]);f!=null&&j(t,["fileData"],f);const d=C(n,["functionCall"]);d!=null&&j(t,["functionCall"],d);const u=C(n,["functionResponse"]);u!=null&&j(t,["functionResponse"],u);const p=C(n,["text"]);return p!=null&&j(t,["text"],p),t}function Mb(e,n){const t={},i=C(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Y5(e,l))),j(t,["parts"],o)}const a=C(n,["role"]);return a!=null&&j(t,["role"],a),t}function W5(e,n){const t={};if(C(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=C(n,["category"]);i!=null&&j(t,["category"],i);const a=C(n,["threshold"]);return a!=null&&j(t,["threshold"],a),t}function Q5(){return{}}function J5(e,n){const t={},i=C(n,["mode"]);i!=null&&j(t,["mode"],i);const a=C(n,["dynamicThreshold"]);return a!=null&&j(t,["dynamicThreshold"],a),t}function K5(e,n){const t={},i=C(n,["dynamicRetrievalConfig"]);return i!=null&&j(t,["dynamicRetrievalConfig"],J5(e,i)),t}function X5(e,n){const t={};if(C(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");C(n,["googleSearch"])!=null&&j(t,["googleSearch"],Q5());const a=C(n,["googleSearchRetrieval"]);if(a!=null&&j(t,["googleSearchRetrieval"],K5(e,a)),C(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(C(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const o=C(n,["codeExecution"]);o!=null&&j(t,["codeExecution"],o);const l=C(n,["functionDeclarations"]);return l!=null&&j(t,["functionDeclarations"],l),t}function Z5(e,n){const t={},i=C(n,["mode"]);i!=null&&j(t,["mode"],i);const a=C(n,["allowedFunctionNames"]);return a!=null&&j(t,["allowedFunctionNames"],a),t}function ez(e,n){const t={},i=C(n,["functionCallingConfig"]);if(i!=null&&j(t,["functionCallingConfig"],Z5(e,i)),C(n,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return t}function tz(e,n){const t={},i=C(n,["voiceName"]);return i!=null&&j(t,["voiceName"],i),t}function nz(e,n){const t={},i=C(n,["prebuiltVoiceConfig"]);return i!=null&&j(t,["prebuiltVoiceConfig"],tz(e,i)),t}function iz(e,n){const t={},i=C(n,["voiceConfig"]);i!=null&&j(t,["voiceConfig"],nz(e,i));const a=C(n,["languageCode"]);return a!=null&&j(t,["languageCode"],a),t}function rz(e,n){const t={},i=C(n,["includeThoughts"]);i!=null&&j(t,["includeThoughts"],i);const a=C(n,["thinkingBudget"]);return a!=null&&j(t,["thinkingBudget"],a),t}function az(e,n,t){const i={},a=C(n,["systemInstruction"]);t!==void 0&&a!=null&&j(t,["systemInstruction"],Mb(e,la(e,a)));const o=C(n,["temperature"]);o!=null&&j(i,["temperature"],o);const l=C(n,["topP"]);l!=null&&j(i,["topP"],l);const f=C(n,["topK"]);f!=null&&j(i,["topK"],f);const d=C(n,["candidateCount"]);d!=null&&j(i,["candidateCount"],d);const u=C(n,["maxOutputTokens"]);u!=null&&j(i,["maxOutputTokens"],u);const p=C(n,["stopSequences"]);p!=null&&j(i,["stopSequences"],p);const g=C(n,["responseLogprobs"]);g!=null&&j(i,["responseLogprobs"],g);const b=C(n,["logprobs"]);b!=null&&j(i,["logprobs"],b);const v=C(n,["presencePenalty"]);v!=null&&j(i,["presencePenalty"],v);const N=C(n,["frequencyPenalty"]);N!=null&&j(i,["frequencyPenalty"],N);const k=C(n,["seed"]);k!=null&&j(i,["seed"],k);const E=C(n,["responseMimeType"]);E!=null&&j(i,["responseMimeType"],E);const T=C(n,["responseSchema"]);if(T!=null&&j(i,["responseSchema"],sk(e,T)),C(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(C(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=C(n,["safetySettings"]);if(t!==void 0&&I!=null){let F=I;Array.isArray(F)&&(F=F.map(L=>W5(e,L))),j(t,["safetySettings"],F)}const D=C(n,["tools"]);if(t!==void 0&&D!=null){let F=Db(e,D);Array.isArray(F)&&(F=F.map(L=>X5(e,Pb(e,L)))),j(t,["tools"],F)}const U=C(n,["toolConfig"]);if(t!==void 0&&U!=null&&j(t,["toolConfig"],ez(e,U)),C(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=C(n,["cachedContent"]);t!==void 0&&O!=null&&j(t,["cachedContent"],Hc(e,O));const $=C(n,["responseModalities"]);$!=null&&j(i,["responseModalities"],$);const B=C(n,["mediaResolution"]);B!=null&&j(i,["mediaResolution"],B);const q=C(n,["speechConfig"]);if(q!=null&&j(i,["speechConfig"],iz(e,ok(e,q))),C(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=C(n,["thinkingConfig"]);return H!=null&&j(i,["thinkingConfig"],rz(e,H)),i}function xC(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["contents"]);if(a!=null){let l=Vc(e,a);Array.isArray(l)&&(l=l.map(f=>Mb(e,f))),j(t,["contents"],l)}const o=C(n,["config"]);return o!=null&&j(t,["generationConfig"],az(e,o,t)),t}function sz(e,n,t){const i={},a=C(n,["taskType"]);t!==void 0&&a!=null&&j(t,["requests[]","taskType"],a);const o=C(n,["title"]);t!==void 0&&o!=null&&j(t,["requests[]","title"],o);const l=C(n,["outputDimensionality"]);if(t!==void 0&&l!=null&&j(t,["requests[]","outputDimensionality"],l),C(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(C(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function oz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["contents"]);a!=null&&j(t,["requests[]","content"],ak(e,a));const o=C(n,["config"]);o!=null&&j(t,["config"],sz(e,o,t));const l=C(n,["model"]);return l!==void 0&&j(t,["requests[]","model"],oi(e,l)),t}function lz(e,n,t){const i={};if(C(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(C(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=C(n,["numberOfImages"]);t!==void 0&&a!=null&&j(t,["parameters","sampleCount"],a);const o=C(n,["aspectRatio"]);t!==void 0&&o!=null&&j(t,["parameters","aspectRatio"],o);const l=C(n,["guidanceScale"]);if(t!==void 0&&l!=null&&j(t,["parameters","guidanceScale"],l),C(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=C(n,["safetyFilterLevel"]);t!==void 0&&f!=null&&j(t,["parameters","safetySetting"],f);const d=C(n,["personGeneration"]);t!==void 0&&d!=null&&j(t,["parameters","personGeneration"],d);const u=C(n,["includeSafetyAttributes"]);t!==void 0&&u!=null&&j(t,["parameters","includeSafetyAttributes"],u);const p=C(n,["includeRaiReason"]);t!==void 0&&p!=null&&j(t,["parameters","includeRaiReason"],p);const g=C(n,["language"]);t!==void 0&&g!=null&&j(t,["parameters","language"],g);const b=C(n,["outputMimeType"]);t!==void 0&&b!=null&&j(t,["parameters","outputOptions","mimeType"],b);const v=C(n,["outputCompressionQuality"]);if(t!==void 0&&v!=null&&j(t,["parameters","outputOptions","compressionQuality"],v),C(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(C(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function cz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["prompt"]);a!=null&&j(t,["instances[0]","prompt"],a);const o=C(n,["config"]);return o!=null&&j(t,["config"],lz(e,o,t)),t}function uz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","name"],oi(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function dz(e,n,t){const i={},a=C(n,["pageSize"]);t!==void 0&&a!=null&&j(t,["_query","pageSize"],a);const o=C(n,["pageToken"]);t!==void 0&&o!=null&&j(t,["_query","pageToken"],o);const l=C(n,["filter"]);t!==void 0&&l!=null&&j(t,["_query","filter"],l);const f=C(n,["queryBase"]);return t!==void 0&&f!=null&&j(t,["_url","models_url"],uk(e,f)),i}function fz(e,n){const t={},i=C(n,["config"]);return i!=null&&j(t,["config"],dz(e,i,t)),t}function hz(e,n,t){const i={},a=C(n,["displayName"]);t!==void 0&&a!=null&&j(t,["displayName"],a);const o=C(n,["description"]);t!==void 0&&o!=null&&j(t,["description"],o);const l=C(n,["defaultCheckpointId"]);return t!==void 0&&l!=null&&j(t,["defaultCheckpointId"],l),i}function pz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","name"],oi(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],hz(e,a,t)),t}function mz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","name"],oi(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function gz(e,n){const t={};if(C(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(C(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(C(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function yz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["contents"]);if(a!=null){let l=Vc(e,a);Array.isArray(l)&&(l=l.map(f=>Mb(e,f))),j(t,["contents"],l)}const o=C(n,["config"]);return o!=null&&j(t,["config"],gz(e,o)),t}function xz(e,n){const t={};if(C(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=C(n,["imageBytes"]);i!=null&&j(t,["bytesBase64Encoded"],Gc(e,i));const a=C(n,["mimeType"]);return a!=null&&j(t,["mimeType"],a),t}function bz(e,n,t){const i={},a=C(n,["numberOfVideos"]);if(t!==void 0&&a!=null&&j(t,["parameters","sampleCount"],a),C(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(C(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=C(n,["durationSeconds"]);if(t!==void 0&&o!=null&&j(t,["parameters","durationSeconds"],o),C(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=C(n,["aspectRatio"]);if(t!==void 0&&l!=null&&j(t,["parameters","aspectRatio"],l),C(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const f=C(n,["personGeneration"]);if(t!==void 0&&f!=null&&j(t,["parameters","personGeneration"],f),C(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=C(n,["negativePrompt"]);if(t!==void 0&&d!=null&&j(t,["parameters","negativePrompt"],d),C(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function vz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["prompt"]);a!=null&&j(t,["instances[0]","prompt"],a);const o=C(n,["image"]);o!=null&&j(t,["instances[0]","image"],xz(e,o));const l=C(n,["config"]);return l!=null&&j(t,["config"],bz(e,l,t)),t}function wz(e,n){const t={},i=C(n,["displayName"]);i!=null&&j(t,["displayName"],i);const a=C(n,["data"]);a!=null&&j(t,["data"],a);const o=C(n,["mimeType"]);return o!=null&&j(t,["mimeType"],o),t}function Sz(e,n){const t={},i=C(n,["videoMetadata"]);i!=null&&j(t,["videoMetadata"],i);const a=C(n,["thought"]);a!=null&&j(t,["thought"],a);const o=C(n,["inlineData"]);o!=null&&j(t,["inlineData"],wz(e,o));const l=C(n,["codeExecutionResult"]);l!=null&&j(t,["codeExecutionResult"],l);const f=C(n,["executableCode"]);f!=null&&j(t,["executableCode"],f);const d=C(n,["fileData"]);d!=null&&j(t,["fileData"],d);const u=C(n,["functionCall"]);u!=null&&j(t,["functionCall"],u);const p=C(n,["functionResponse"]);p!=null&&j(t,["functionResponse"],p);const g=C(n,["text"]);return g!=null&&j(t,["text"],g),t}function Ih(e,n){const t={},i=C(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Sz(e,l))),j(t,["parts"],o)}const a=C(n,["role"]);return a!=null&&j(t,["role"],a),t}function Nz(e,n){const t={},i=C(n,["featureSelectionPreference"]);return i!=null&&j(t,["featureSelectionPreference"],i),t}function Cz(e,n){const t={},i=C(n,["method"]);i!=null&&j(t,["method"],i);const a=C(n,["category"]);a!=null&&j(t,["category"],a);const o=C(n,["threshold"]);return o!=null&&j(t,["threshold"],o),t}function jz(){return{}}function _z(e,n){const t={},i=C(n,["mode"]);i!=null&&j(t,["mode"],i);const a=C(n,["dynamicThreshold"]);return a!=null&&j(t,["dynamicThreshold"],a),t}function kz(e,n){const t={},i=C(n,["dynamicRetrievalConfig"]);return i!=null&&j(t,["dynamicRetrievalConfig"],_z(e,i)),t}function Ez(){return{}}function Tz(e,n){const t={},i=C(n,["apiKeyString"]);return i!=null&&j(t,["apiKeyString"],i),t}function Az(e,n){const t={},i=C(n,["apiKeyConfig"]);i!=null&&j(t,["apiKeyConfig"],Tz(e,i));const a=C(n,["authType"]);a!=null&&j(t,["authType"],a);const o=C(n,["googleServiceAccountConfig"]);o!=null&&j(t,["googleServiceAccountConfig"],o);const l=C(n,["httpBasicAuthConfig"]);l!=null&&j(t,["httpBasicAuthConfig"],l);const f=C(n,["oauthConfig"]);f!=null&&j(t,["oauthConfig"],f);const d=C(n,["oidcConfig"]);return d!=null&&j(t,["oidcConfig"],d),t}function Pz(e,n){const t={},i=C(n,["authConfig"]);return i!=null&&j(t,["authConfig"],Az(e,i)),t}function hk(e,n){const t={},i=C(n,["retrieval"]);i!=null&&j(t,["retrieval"],i),C(n,["googleSearch"])!=null&&j(t,["googleSearch"],jz());const o=C(n,["googleSearchRetrieval"]);o!=null&&j(t,["googleSearchRetrieval"],kz(e,o)),C(n,["enterpriseWebSearch"])!=null&&j(t,["enterpriseWebSearch"],Ez());const f=C(n,["googleMaps"]);f!=null&&j(t,["googleMaps"],Pz(e,f));const d=C(n,["codeExecution"]);d!=null&&j(t,["codeExecution"],d);const u=C(n,["functionDeclarations"]);return u!=null&&j(t,["functionDeclarations"],u),t}function Dz(e,n){const t={},i=C(n,["mode"]);i!=null&&j(t,["mode"],i);const a=C(n,["allowedFunctionNames"]);return a!=null&&j(t,["allowedFunctionNames"],a),t}function Iz(e,n){const t={},i=C(n,["latitude"]);i!=null&&j(t,["latitude"],i);const a=C(n,["longitude"]);return a!=null&&j(t,["longitude"],a),t}function Mz(e,n){const t={},i=C(n,["latLng"]);return i!=null&&j(t,["latLng"],Iz(e,i)),t}function Rz(e,n){const t={},i=C(n,["functionCallingConfig"]);i!=null&&j(t,["functionCallingConfig"],Dz(e,i));const a=C(n,["retrievalConfig"]);return a!=null&&j(t,["retrievalConfig"],Mz(e,a)),t}function Oz(e,n){const t={},i=C(n,["voiceName"]);return i!=null&&j(t,["voiceName"],i),t}function Lz(e,n){const t={},i=C(n,["prebuiltVoiceConfig"]);return i!=null&&j(t,["prebuiltVoiceConfig"],Oz(e,i)),t}function Fz(e,n){const t={},i=C(n,["voiceConfig"]);i!=null&&j(t,["voiceConfig"],Lz(e,i));const a=C(n,["languageCode"]);return a!=null&&j(t,["languageCode"],a),t}function $z(e,n){const t={},i=C(n,["includeThoughts"]);i!=null&&j(t,["includeThoughts"],i);const a=C(n,["thinkingBudget"]);return a!=null&&j(t,["thinkingBudget"],a),t}function zz(e,n,t){const i={},a=C(n,["systemInstruction"]);t!==void 0&&a!=null&&j(t,["systemInstruction"],Ih(e,la(e,a)));const o=C(n,["temperature"]);o!=null&&j(i,["temperature"],o);const l=C(n,["topP"]);l!=null&&j(i,["topP"],l);const f=C(n,["topK"]);f!=null&&j(i,["topK"],f);const d=C(n,["candidateCount"]);d!=null&&j(i,["candidateCount"],d);const u=C(n,["maxOutputTokens"]);u!=null&&j(i,["maxOutputTokens"],u);const p=C(n,["stopSequences"]);p!=null&&j(i,["stopSequences"],p);const g=C(n,["responseLogprobs"]);g!=null&&j(i,["responseLogprobs"],g);const b=C(n,["logprobs"]);b!=null&&j(i,["logprobs"],b);const v=C(n,["presencePenalty"]);v!=null&&j(i,["presencePenalty"],v);const N=C(n,["frequencyPenalty"]);N!=null&&j(i,["frequencyPenalty"],N);const k=C(n,["seed"]);k!=null&&j(i,["seed"],k);const E=C(n,["responseMimeType"]);E!=null&&j(i,["responseMimeType"],E);const T=C(n,["responseSchema"]);T!=null&&j(i,["responseSchema"],sk(e,T));const I=C(n,["routingConfig"]);I!=null&&j(i,["routingConfig"],I);const D=C(n,["modelSelectionConfig"]);D!=null&&j(i,["modelConfig"],Nz(e,D));const U=C(n,["safetySettings"]);if(t!==void 0&&U!=null){let ie=U;Array.isArray(ie)&&(ie=ie.map(oe=>Cz(e,oe))),j(t,["safetySettings"],ie)}const O=C(n,["tools"]);if(t!==void 0&&O!=null){let ie=Db(e,O);Array.isArray(ie)&&(ie=ie.map(oe=>hk(e,Pb(e,oe)))),j(t,["tools"],ie)}const $=C(n,["toolConfig"]);t!==void 0&&$!=null&&j(t,["toolConfig"],Rz(e,$));const B=C(n,["labels"]);t!==void 0&&B!=null&&j(t,["labels"],B);const q=C(n,["cachedContent"]);t!==void 0&&q!=null&&j(t,["cachedContent"],Hc(e,q));const H=C(n,["responseModalities"]);H!=null&&j(i,["responseModalities"],H);const F=C(n,["mediaResolution"]);F!=null&&j(i,["mediaResolution"],F);const L=C(n,["speechConfig"]);L!=null&&j(i,["speechConfig"],Fz(e,ok(e,L)));const Q=C(n,["audioTimestamp"]);Q!=null&&j(i,["audioTimestamp"],Q);const ne=C(n,["thinkingConfig"]);return ne!=null&&j(i,["thinkingConfig"],$z(e,ne)),i}function bC(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["contents"]);if(a!=null){let l=Vc(e,a);Array.isArray(l)&&(l=l.map(f=>Ih(e,f))),j(t,["contents"],l)}const o=C(n,["config"]);return o!=null&&j(t,["generationConfig"],zz(e,o,t)),t}function Bz(e,n,t){const i={},a=C(n,["taskType"]);t!==void 0&&a!=null&&j(t,["instances[]","task_type"],a);const o=C(n,["title"]);t!==void 0&&o!=null&&j(t,["instances[]","title"],o);const l=C(n,["outputDimensionality"]);t!==void 0&&l!=null&&j(t,["parameters","outputDimensionality"],l);const f=C(n,["mimeType"]);t!==void 0&&f!=null&&j(t,["instances[]","mimeType"],f);const d=C(n,["autoTruncate"]);return t!==void 0&&d!=null&&j(t,["parameters","autoTruncate"],d),i}function Uz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["contents"]);a!=null&&j(t,["instances[]","content"],ak(e,a));const o=C(n,["config"]);return o!=null&&j(t,["config"],Bz(e,o,t)),t}function qz(e,n,t){const i={},a=C(n,["outputGcsUri"]);t!==void 0&&a!=null&&j(t,["parameters","storageUri"],a);const o=C(n,["negativePrompt"]);t!==void 0&&o!=null&&j(t,["parameters","negativePrompt"],o);const l=C(n,["numberOfImages"]);t!==void 0&&l!=null&&j(t,["parameters","sampleCount"],l);const f=C(n,["aspectRatio"]);t!==void 0&&f!=null&&j(t,["parameters","aspectRatio"],f);const d=C(n,["guidanceScale"]);t!==void 0&&d!=null&&j(t,["parameters","guidanceScale"],d);const u=C(n,["seed"]);t!==void 0&&u!=null&&j(t,["parameters","seed"],u);const p=C(n,["safetyFilterLevel"]);t!==void 0&&p!=null&&j(t,["parameters","safetySetting"],p);const g=C(n,["personGeneration"]);t!==void 0&&g!=null&&j(t,["parameters","personGeneration"],g);const b=C(n,["includeSafetyAttributes"]);t!==void 0&&b!=null&&j(t,["parameters","includeSafetyAttributes"],b);const v=C(n,["includeRaiReason"]);t!==void 0&&v!=null&&j(t,["parameters","includeRaiReason"],v);const N=C(n,["language"]);t!==void 0&&N!=null&&j(t,["parameters","language"],N);const k=C(n,["outputMimeType"]);t!==void 0&&k!=null&&j(t,["parameters","outputOptions","mimeType"],k);const E=C(n,["outputCompressionQuality"]);t!==void 0&&E!=null&&j(t,["parameters","outputOptions","compressionQuality"],E);const T=C(n,["addWatermark"]);t!==void 0&&T!=null&&j(t,["parameters","addWatermark"],T);const I=C(n,["enhancePrompt"]);return t!==void 0&&I!=null&&j(t,["parameters","enhancePrompt"],I),i}function Vz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["prompt"]);a!=null&&j(t,["instances[0]","prompt"],a);const o=C(n,["config"]);return o!=null&&j(t,["config"],qz(e,o,t)),t}function Sw(e,n){const t={},i=C(n,["gcsUri"]);i!=null&&j(t,["gcsUri"],i);const a=C(n,["imageBytes"]);a!=null&&j(t,["bytesBase64Encoded"],Gc(e,a));const o=C(n,["mimeType"]);return o!=null&&j(t,["mimeType"],o),t}function Hz(e,n){const t={},i=C(n,["maskMode"]);i!=null&&j(t,["maskMode"],i);const a=C(n,["segmentationClasses"]);a!=null&&j(t,["maskClasses"],a);const o=C(n,["maskDilation"]);return o!=null&&j(t,["dilation"],o),t}function Gz(e,n){const t={},i=C(n,["controlType"]);i!=null&&j(t,["controlType"],i);const a=C(n,["enableControlImageComputation"]);return a!=null&&j(t,["computeControl"],a),t}function Yz(e,n){const t={},i=C(n,["styleDescription"]);return i!=null&&j(t,["styleDescription"],i),t}function Wz(e,n){const t={},i=C(n,["subjectType"]);i!=null&&j(t,["subjectType"],i);const a=C(n,["subjectDescription"]);return a!=null&&j(t,["subjectDescription"],a),t}function Qz(e,n){const t={},i=C(n,["referenceImage"]);i!=null&&j(t,["referenceImage"],Sw(e,i));const a=C(n,["referenceId"]);a!=null&&j(t,["referenceId"],a);const o=C(n,["referenceType"]);o!=null&&j(t,["referenceType"],o);const l=C(n,["maskImageConfig"]);l!=null&&j(t,["maskImageConfig"],Hz(e,l));const f=C(n,["controlImageConfig"]);f!=null&&j(t,["controlImageConfig"],Gz(e,f));const d=C(n,["styleImageConfig"]);d!=null&&j(t,["styleImageConfig"],Yz(e,d));const u=C(n,["subjectImageConfig"]);return u!=null&&j(t,["subjectImageConfig"],Wz(e,u)),t}function Jz(e,n,t){const i={},a=C(n,["outputGcsUri"]);t!==void 0&&a!=null&&j(t,["parameters","storageUri"],a);const o=C(n,["negativePrompt"]);t!==void 0&&o!=null&&j(t,["parameters","negativePrompt"],o);const l=C(n,["numberOfImages"]);t!==void 0&&l!=null&&j(t,["parameters","sampleCount"],l);const f=C(n,["aspectRatio"]);t!==void 0&&f!=null&&j(t,["parameters","aspectRatio"],f);const d=C(n,["guidanceScale"]);t!==void 0&&d!=null&&j(t,["parameters","guidanceScale"],d);const u=C(n,["seed"]);t!==void 0&&u!=null&&j(t,["parameters","seed"],u);const p=C(n,["safetyFilterLevel"]);t!==void 0&&p!=null&&j(t,["parameters","safetySetting"],p);const g=C(n,["personGeneration"]);t!==void 0&&g!=null&&j(t,["parameters","personGeneration"],g);const b=C(n,["includeSafetyAttributes"]);t!==void 0&&b!=null&&j(t,["parameters","includeSafetyAttributes"],b);const v=C(n,["includeRaiReason"]);t!==void 0&&v!=null&&j(t,["parameters","includeRaiReason"],v);const N=C(n,["language"]);t!==void 0&&N!=null&&j(t,["parameters","language"],N);const k=C(n,["outputMimeType"]);t!==void 0&&k!=null&&j(t,["parameters","outputOptions","mimeType"],k);const E=C(n,["outputCompressionQuality"]);t!==void 0&&E!=null&&j(t,["parameters","outputOptions","compressionQuality"],E);const T=C(n,["editMode"]);t!==void 0&&T!=null&&j(t,["parameters","editMode"],T);const I=C(n,["baseSteps"]);return t!==void 0&&I!=null&&j(t,["parameters","editConfig","baseSteps"],I),i}function Kz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["prompt"]);a!=null&&j(t,["instances[0]","prompt"],a);const o=C(n,["referenceImages"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>Qz(e,d))),j(t,["instances[0]","referenceImages"],f)}const l=C(n,["config"]);return l!=null&&j(t,["config"],Jz(e,l,t)),t}function Xz(e,n,t){const i={},a=C(n,["includeRaiReason"]);t!==void 0&&a!=null&&j(t,["parameters","includeRaiReason"],a);const o=C(n,["outputMimeType"]);t!==void 0&&o!=null&&j(t,["parameters","outputOptions","mimeType"],o);const l=C(n,["outputCompressionQuality"]);t!==void 0&&l!=null&&j(t,["parameters","outputOptions","compressionQuality"],l);const f=C(n,["numberOfImages"]);t!==void 0&&f!=null&&j(t,["parameters","sampleCount"],f);const d=C(n,["mode"]);return t!==void 0&&d!=null&&j(t,["parameters","mode"],d),i}function Zz(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["image"]);a!=null&&j(t,["instances[0]","image"],Sw(e,a));const o=C(n,["upscaleFactor"]);o!=null&&j(t,["parameters","upscaleConfig","upscaleFactor"],o);const l=C(n,["config"]);return l!=null&&j(t,["config"],Xz(e,l,t)),t}function eB(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","name"],oi(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function tB(e,n,t){const i={},a=C(n,["pageSize"]);t!==void 0&&a!=null&&j(t,["_query","pageSize"],a);const o=C(n,["pageToken"]);t!==void 0&&o!=null&&j(t,["_query","pageToken"],o);const l=C(n,["filter"]);t!==void 0&&l!=null&&j(t,["_query","filter"],l);const f=C(n,["queryBase"]);return t!==void 0&&f!=null&&j(t,["_url","models_url"],uk(e,f)),i}function nB(e,n){const t={},i=C(n,["config"]);return i!=null&&j(t,["config"],tB(e,i,t)),t}function iB(e,n,t){const i={},a=C(n,["displayName"]);t!==void 0&&a!=null&&j(t,["displayName"],a);const o=C(n,["description"]);t!==void 0&&o!=null&&j(t,["description"],o);const l=C(n,["defaultCheckpointId"]);return t!==void 0&&l!=null&&j(t,["defaultCheckpointId"],l),i}function rB(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],iB(e,a,t)),t}function aB(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","name"],oi(e,i));const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function sB(e,n,t){const i={},a=C(n,["systemInstruction"]);t!==void 0&&a!=null&&j(t,["systemInstruction"],Ih(e,la(e,a)));const o=C(n,["tools"]);if(t!==void 0&&o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>hk(e,d))),j(t,["tools"],f)}const l=C(n,["generationConfig"]);return t!==void 0&&l!=null&&j(t,["generationConfig"],l),i}function oB(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["contents"]);if(a!=null){let l=Vc(e,a);Array.isArray(l)&&(l=l.map(f=>Ih(e,f))),j(t,["contents"],l)}const o=C(n,["config"]);return o!=null&&j(t,["config"],sB(e,o,t)),t}function lB(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["contents"]);if(a!=null){let l=Vc(e,a);Array.isArray(l)&&(l=l.map(f=>Ih(e,f))),j(t,["contents"],l)}const o=C(n,["config"]);return o!=null&&j(t,["config"],o),t}function cB(e,n,t){const i={},a=C(n,["numberOfVideos"]);t!==void 0&&a!=null&&j(t,["parameters","sampleCount"],a);const o=C(n,["outputGcsUri"]);t!==void 0&&o!=null&&j(t,["parameters","storageUri"],o);const l=C(n,["fps"]);t!==void 0&&l!=null&&j(t,["parameters","fps"],l);const f=C(n,["durationSeconds"]);t!==void 0&&f!=null&&j(t,["parameters","durationSeconds"],f);const d=C(n,["seed"]);t!==void 0&&d!=null&&j(t,["parameters","seed"],d);const u=C(n,["aspectRatio"]);t!==void 0&&u!=null&&j(t,["parameters","aspectRatio"],u);const p=C(n,["resolution"]);t!==void 0&&p!=null&&j(t,["parameters","resolution"],p);const g=C(n,["personGeneration"]);t!==void 0&&g!=null&&j(t,["parameters","personGeneration"],g);const b=C(n,["pubsubTopic"]);t!==void 0&&b!=null&&j(t,["parameters","pubsubTopic"],b);const v=C(n,["negativePrompt"]);t!==void 0&&v!=null&&j(t,["parameters","negativePrompt"],v);const N=C(n,["enhancePrompt"]);return t!==void 0&&N!=null&&j(t,["parameters","enhancePrompt"],N),i}function uB(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["_url","model"],oi(e,i));const a=C(n,["prompt"]);a!=null&&j(t,["instances[0]","prompt"],a);const o=C(n,["image"]);o!=null&&j(t,["instances[0]","image"],Sw(e,o));const l=C(n,["config"]);return l!=null&&j(t,["config"],cB(e,l,t)),t}function dB(e,n){const t={},i=C(n,["data"]);i!=null&&j(t,["data"],i);const a=C(n,["mimeType"]);return a!=null&&j(t,["mimeType"],a),t}function fB(e,n){const t={},i=C(n,["thought"]);i!=null&&j(t,["thought"],i);const a=C(n,["inlineData"]);a!=null&&j(t,["inlineData"],dB(e,a));const o=C(n,["codeExecutionResult"]);o!=null&&j(t,["codeExecutionResult"],o);const l=C(n,["executableCode"]);l!=null&&j(t,["executableCode"],l);const f=C(n,["fileData"]);f!=null&&j(t,["fileData"],f);const d=C(n,["functionCall"]);d!=null&&j(t,["functionCall"],d);const u=C(n,["functionResponse"]);u!=null&&j(t,["functionResponse"],u);const p=C(n,["text"]);return p!=null&&j(t,["text"],p),t}function hB(e,n){const t={},i=C(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>fB(e,l))),j(t,["parts"],o)}const a=C(n,["role"]);return a!=null&&j(t,["role"],a),t}function pB(e,n){const t={},i=C(n,["citationSources"]);return i!=null&&j(t,["citations"],i),t}function mB(e,n){const t={},i=C(n,["content"]);i!=null&&j(t,["content"],hB(e,i));const a=C(n,["citationMetadata"]);a!=null&&j(t,["citationMetadata"],pB(e,a));const o=C(n,["tokenCount"]);o!=null&&j(t,["tokenCount"],o);const l=C(n,["finishReason"]);l!=null&&j(t,["finishReason"],l);const f=C(n,["avgLogprobs"]);f!=null&&j(t,["avgLogprobs"],f);const d=C(n,["groundingMetadata"]);d!=null&&j(t,["groundingMetadata"],d);const u=C(n,["index"]);u!=null&&j(t,["index"],u);const p=C(n,["logprobsResult"]);p!=null&&j(t,["logprobsResult"],p);const g=C(n,["safetyRatings"]);return g!=null&&j(t,["safetyRatings"],g),t}function vC(e,n){const t={},i=C(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>mB(e,d))),j(t,["candidates"],f)}const a=C(n,["modelVersion"]);a!=null&&j(t,["modelVersion"],a);const o=C(n,["promptFeedback"]);o!=null&&j(t,["promptFeedback"],o);const l=C(n,["usageMetadata"]);return l!=null&&j(t,["usageMetadata"],l),t}function gB(e,n){const t={},i=C(n,["values"]);return i!=null&&j(t,["values"],i),t}function yB(){return{}}function xB(e,n){const t={},i=C(n,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>gB(e,l))),j(t,["embeddings"],o)}return C(n,["metadata"])!=null&&j(t,["metadata"],yB()),t}function bB(e,n){const t={},i=C(n,["bytesBase64Encoded"]);i!=null&&j(t,["imageBytes"],Gc(e,i));const a=C(n,["mimeType"]);return a!=null&&j(t,["mimeType"],a),t}function pk(e,n){const t={},i=C(n,["safetyAttributes","categories"]);i!=null&&j(t,["categories"],i);const a=C(n,["safetyAttributes","scores"]);a!=null&&j(t,["scores"],a);const o=C(n,["contentType"]);return o!=null&&j(t,["contentType"],o),t}function vB(e,n){const t={},i=C(n,["_self"]);i!=null&&j(t,["image"],bB(e,i));const a=C(n,["raiFilteredReason"]);a!=null&&j(t,["raiFilteredReason"],a);const o=C(n,["_self"]);return o!=null&&j(t,["safetyAttributes"],pk(e,o)),t}function wB(e,n){const t={},i=C(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>vB(e,l))),j(t,["generatedImages"],o)}const a=C(n,["positivePromptSafetyAttributes"]);return a!=null&&j(t,["positivePromptSafetyAttributes"],pk(e,a)),t}function SB(e,n){const t={},i=C(n,["baseModel"]);i!=null&&j(t,["baseModel"],i);const a=C(n,["createTime"]);a!=null&&j(t,["createTime"],a);const o=C(n,["updateTime"]);return o!=null&&j(t,["updateTime"],o),t}function m1(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["displayName"]);a!=null&&j(t,["displayName"],a);const o=C(n,["description"]);o!=null&&j(t,["description"],o);const l=C(n,["version"]);l!=null&&j(t,["version"],l);const f=C(n,["_self"]);f!=null&&j(t,["tunedModelInfo"],SB(e,f));const d=C(n,["inputTokenLimit"]);d!=null&&j(t,["inputTokenLimit"],d);const u=C(n,["outputTokenLimit"]);u!=null&&j(t,["outputTokenLimit"],u);const p=C(n,["supportedGenerationMethods"]);return p!=null&&j(t,["supportedActions"],p),t}function NB(e,n){const t={},i=C(n,["nextPageToken"]);i!=null&&j(t,["nextPageToken"],i);const a=C(n,["_self"]);if(a!=null){let o=dk(e,a);Array.isArray(o)&&(o=o.map(l=>m1(e,l))),j(t,["models"],o)}return t}function CB(){return{}}function jB(e,n){const t={},i=C(n,["totalTokens"]);i!=null&&j(t,["totalTokens"],i);const a=C(n,["cachedContentTokenCount"]);return a!=null&&j(t,["cachedContentTokenCount"],a),t}function _B(e,n){const t={},i=C(n,["video","uri"]);i!=null&&j(t,["uri"],i);const a=C(n,["video","encodedVideo"]);a!=null&&j(t,["videoBytes"],Gc(e,a));const o=C(n,["encoding"]);return o!=null&&j(t,["mimeType"],o),t}function kB(e,n){const t={},i=C(n,["_self"]);return i!=null&&j(t,["video"],_B(e,i)),t}function EB(e,n){const t={},i=C(n,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>kB(e,f))),j(t,["generatedVideos"],l)}const a=C(n,["raiMediaFilteredCount"]);a!=null&&j(t,["raiMediaFilteredCount"],a);const o=C(n,["raiMediaFilteredReasons"]);return o!=null&&j(t,["raiMediaFilteredReasons"],o),t}function TB(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["metadata"]);a!=null&&j(t,["metadata"],a);const o=C(n,["done"]);o!=null&&j(t,["done"],o);const l=C(n,["error"]);l!=null&&j(t,["error"],l);const f=C(n,["response","generateVideoResponse"]);return f!=null&&j(t,["response"],EB(e,f)),t}function AB(e,n){const t={},i=C(n,["displayName"]);i!=null&&j(t,["displayName"],i);const a=C(n,["data"]);a!=null&&j(t,["data"],a);const o=C(n,["mimeType"]);return o!=null&&j(t,["mimeType"],o),t}function PB(e,n){const t={},i=C(n,["videoMetadata"]);i!=null&&j(t,["videoMetadata"],i);const a=C(n,["thought"]);a!=null&&j(t,["thought"],a);const o=C(n,["inlineData"]);o!=null&&j(t,["inlineData"],AB(e,o));const l=C(n,["codeExecutionResult"]);l!=null&&j(t,["codeExecutionResult"],l);const f=C(n,["executableCode"]);f!=null&&j(t,["executableCode"],f);const d=C(n,["fileData"]);d!=null&&j(t,["fileData"],d);const u=C(n,["functionCall"]);u!=null&&j(t,["functionCall"],u);const p=C(n,["functionResponse"]);p!=null&&j(t,["functionResponse"],p);const g=C(n,["text"]);return g!=null&&j(t,["text"],g),t}function DB(e,n){const t={},i=C(n,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>PB(e,l))),j(t,["parts"],o)}const a=C(n,["role"]);return a!=null&&j(t,["role"],a),t}function IB(e,n){const t={},i=C(n,["citations"]);return i!=null&&j(t,["citations"],i),t}function MB(e,n){const t={},i=C(n,["content"]);i!=null&&j(t,["content"],DB(e,i));const a=C(n,["citationMetadata"]);a!=null&&j(t,["citationMetadata"],IB(e,a));const o=C(n,["finishMessage"]);o!=null&&j(t,["finishMessage"],o);const l=C(n,["finishReason"]);l!=null&&j(t,["finishReason"],l);const f=C(n,["avgLogprobs"]);f!=null&&j(t,["avgLogprobs"],f);const d=C(n,["groundingMetadata"]);d!=null&&j(t,["groundingMetadata"],d);const u=C(n,["index"]);u!=null&&j(t,["index"],u);const p=C(n,["logprobsResult"]);p!=null&&j(t,["logprobsResult"],p);const g=C(n,["safetyRatings"]);return g!=null&&j(t,["safetyRatings"],g),t}function wC(e,n){const t={},i=C(n,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(p=>MB(e,p))),j(t,["candidates"],u)}const a=C(n,["createTime"]);a!=null&&j(t,["createTime"],a);const o=C(n,["responseId"]);o!=null&&j(t,["responseId"],o);const l=C(n,["modelVersion"]);l!=null&&j(t,["modelVersion"],l);const f=C(n,["promptFeedback"]);f!=null&&j(t,["promptFeedback"],f);const d=C(n,["usageMetadata"]);return d!=null&&j(t,["usageMetadata"],d),t}function RB(e,n){const t={},i=C(n,["truncated"]);i!=null&&j(t,["truncated"],i);const a=C(n,["token_count"]);return a!=null&&j(t,["tokenCount"],a),t}function OB(e,n){const t={},i=C(n,["values"]);i!=null&&j(t,["values"],i);const a=C(n,["statistics"]);return a!=null&&j(t,["statistics"],RB(e,a)),t}function LB(e,n){const t={},i=C(n,["billableCharacterCount"]);return i!=null&&j(t,["billableCharacterCount"],i),t}function FB(e,n){const t={},i=C(n,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>OB(e,l))),j(t,["embeddings"],o)}const a=C(n,["metadata"]);return a!=null&&j(t,["metadata"],LB(e,a)),t}function $B(e,n){const t={},i=C(n,["gcsUri"]);i!=null&&j(t,["gcsUri"],i);const a=C(n,["bytesBase64Encoded"]);a!=null&&j(t,["imageBytes"],Gc(e,a));const o=C(n,["mimeType"]);return o!=null&&j(t,["mimeType"],o),t}function mk(e,n){const t={},i=C(n,["safetyAttributes","categories"]);i!=null&&j(t,["categories"],i);const a=C(n,["safetyAttributes","scores"]);a!=null&&j(t,["scores"],a);const o=C(n,["contentType"]);return o!=null&&j(t,["contentType"],o),t}function Nw(e,n){const t={},i=C(n,["_self"]);i!=null&&j(t,["image"],$B(e,i));const a=C(n,["raiFilteredReason"]);a!=null&&j(t,["raiFilteredReason"],a);const o=C(n,["_self"]);o!=null&&j(t,["safetyAttributes"],mk(e,o));const l=C(n,["prompt"]);return l!=null&&j(t,["enhancedPrompt"],l),t}function zB(e,n){const t={},i=C(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Nw(e,l))),j(t,["generatedImages"],o)}const a=C(n,["positivePromptSafetyAttributes"]);return a!=null&&j(t,["positivePromptSafetyAttributes"],mk(e,a)),t}function BB(e,n){const t={},i=C(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Nw(e,o))),j(t,["generatedImages"],a)}return t}function UB(e,n){const t={},i=C(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Nw(e,o))),j(t,["generatedImages"],a)}return t}function qB(e,n){const t={},i=C(n,["endpoint"]);i!=null&&j(t,["name"],i);const a=C(n,["deployedModelId"]);return a!=null&&j(t,["deployedModelId"],a),t}function VB(e,n){const t={},i=C(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&j(t,["baseModel"],i);const a=C(n,["createTime"]);a!=null&&j(t,["createTime"],a);const o=C(n,["updateTime"]);return o!=null&&j(t,["updateTime"],o),t}function HB(e,n){const t={},i=C(n,["checkpointId"]);i!=null&&j(t,["checkpointId"],i);const a=C(n,["epoch"]);a!=null&&j(t,["epoch"],a);const o=C(n,["step"]);return o!=null&&j(t,["step"],o),t}function g1(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["displayName"]);a!=null&&j(t,["displayName"],a);const o=C(n,["description"]);o!=null&&j(t,["description"],o);const l=C(n,["versionId"]);l!=null&&j(t,["version"],l);const f=C(n,["deployedModels"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(v=>qB(e,v))),j(t,["endpoints"],b)}const d=C(n,["labels"]);d!=null&&j(t,["labels"],d);const u=C(n,["_self"]);u!=null&&j(t,["tunedModelInfo"],VB(e,u));const p=C(n,["defaultCheckpointId"]);p!=null&&j(t,["defaultCheckpointId"],p);const g=C(n,["checkpoints"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(v=>HB(e,v))),j(t,["checkpoints"],b)}return t}function GB(e,n){const t={},i=C(n,["nextPageToken"]);i!=null&&j(t,["nextPageToken"],i);const a=C(n,["_self"]);if(a!=null){let o=dk(e,a);Array.isArray(o)&&(o=o.map(l=>g1(e,l))),j(t,["models"],o)}return t}function YB(){return{}}function WB(e,n){const t={},i=C(n,["totalTokens"]);return i!=null&&j(t,["totalTokens"],i),t}function QB(e,n){const t={},i=C(n,["tokensInfo"]);return i!=null&&j(t,["tokensInfo"],i),t}function JB(e,n){const t={},i=C(n,["gcsUri"]);i!=null&&j(t,["uri"],i);const a=C(n,["bytesBase64Encoded"]);a!=null&&j(t,["videoBytes"],Gc(e,a));const o=C(n,["mimeType"]);return o!=null&&j(t,["mimeType"],o),t}function KB(e,n){const t={},i=C(n,["_self"]);return i!=null&&j(t,["video"],JB(e,i)),t}function XB(e,n){const t={},i=C(n,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>KB(e,f))),j(t,["generatedVideos"],l)}const a=C(n,["raiMediaFilteredCount"]);a!=null&&j(t,["raiMediaFilteredCount"],a);const o=C(n,["raiMediaFilteredReasons"]);return o!=null&&j(t,["raiMediaFilteredReasons"],o),t}function ZB(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["metadata"]);a!=null&&j(t,["metadata"],a);const o=C(n,["done"]);o!=null&&j(t,["done"],o);const l=C(n,["error"]);l!=null&&j(t,["error"],l);const f=C(n,["response"]);return f!=null&&j(t,["response"],XB(e,f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function tU(e,n,t){const i=new b$;let a;if(t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),e.isVertexAI()){const o=H5(e,a);Object.assign(i,o)}else{const o=V5(e,a);Object.assign(i,o)}n(i)}class nU{constructor(n,t,i){this.apiClient=n,this.auth=t,this.webSocketFactory=i}async connect(n){var t,i,a,o;const l=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let d;const u=sU(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(u);else{const U=this.apiClient.getApiKey();d=`${l}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateContent?key=${U}`}let p=()=>{};const g=new Promise(U=>{p=U}),b=n.callbacks,v=function(){var U;(U=b==null?void 0:b.onopen)===null||U===void 0||U.call(b),p({})},N=this.apiClient,k={onopen:v,onmessage:U=>{tU(N,b.onmessage,U)},onerror:(t=b==null?void 0:b.onerror)!==null&&t!==void 0?t:function(U){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(U){}},E=this.webSocketFactory.create(d,aU(u),k);E.connect(),await g;let T=oi(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const U=this.apiClient.getProject(),O=this.apiClient.getLocation();T=`projects/${U}/locations/${O}/`+T}let I={};this.apiClient.isVertexAI()&&((a=n.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(n.config===void 0?n.config={responseModalities:[Uc.AUDIO]}:n.config.responseModalities=[Uc.AUDIO]),!((o=n.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D={model:T,config:n.config,callbacks:n.callbacks};return this.apiClient.isVertexAI()?I=m5(this.apiClient,D):I=p5(this.apiClient,D),delete I.config,E.send(JSON.stringify(I)),new rU(E,this.apiClient)}}const iU={turnComplete:!0};class rU{constructor(n,t){this.conn=n,this.apiClient=t}tLiveClientContent(n,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Vc(n,t.turns),n.isVertexAI()?i=i.map(a=>Ih(n,a)):i=i.map(a=>Mb(n,a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(n,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!n.isVertexAI()&&!("id"in o))throw new Error(eU)}return{toolResponse:{functionResponses:i}}}sendClientContent(n){n=Object.assign(Object.assign({},iU),n);const t=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(t))}sendRealtimeInput(n){let t={};this.apiClient.isVertexAI()?t={realtimeInput:w5(this.apiClient,n)}:t={realtimeInput:v5(this.apiClient,n)},this.conn.send(JSON.stringify(t))}sendToolResponse(n){if(n.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function aU(e){const n={};return e.forEach((t,i)=>{n[i]=t}),n}function sU(e){const n=new Headers;for(const[t,i]of Object.entries(e))n.append(t,i);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oU extends rg{constructor(n){super(),this.apiClient=n,this.generateContent=async t=>await this.generateContentInternal(t),this.generateContentStream=async t=>await this.generateContentStreamInternal(t),this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var a;let o;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((a=d==null?void 0:d.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:l.push(d);let f;return o?f={generatedImages:l,positivePromptSafetyAttributes:o}:f={generatedImages:l},f}),this.list=async t=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Ib(jh.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(l),l)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(a)}}async generateContentInternal(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=bC(this.apiClient,n);return f=Rt("{model}:generateContent",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const g=wC(this.apiClient,p),b=new gx;return Object.assign(b,g),b})}else{const u=xC(this.apiClient,n);return f=Rt("{model}:generateContent",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const g=vC(this.apiClient,p),b=new gx;return Object.assign(b,g),b})}}async generateContentStreamInternal(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=bC(this.apiClient,n);f=Rt("{model}:streamGenerateContent?alt=sse",u._url),d=u._query,delete u.config,delete u._url,delete u._query;const p=this.apiClient;return l=p.requestStream({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(g){return lb(this,arguments,function*(){var b,v,N,k;try{for(var E=!0,T=h1(g),I;I=yield vr(T.next()),b=I.done,!b;E=!0){k=I.value,E=!1;const U=wC(p,yield vr(k.json())),O=new gx;Object.assign(O,U),yield yield vr(O)}}catch(D){v={error:D}}finally{try{!E&&!b&&(N=T.return)&&(yield vr(N.call(T)))}finally{if(v)throw v.error}}})})}else{const u=xC(this.apiClient,n);f=Rt("{model}:streamGenerateContent?alt=sse",u._url),d=u._query,delete u.config,delete u._url,delete u._query;const p=this.apiClient;return l=p.requestStream({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(g){return lb(this,arguments,function*(){var b,v,N,k;try{for(var E=!0,T=h1(g),I;I=yield vr(T.next()),b=I.done,!b;E=!0){k=I.value,E=!1;const U=vC(p,yield vr(k.json())),O=new gx;Object.assign(O,U),yield yield vr(O)}}catch(D){v={error:D}}finally{try{!E&&!b&&(N=T.return)&&(yield vr(N.call(T)))}finally{if(v)throw v.error}}})})}}async embedContent(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=Uz(this.apiClient,n);return f=Rt("{model}:predict",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const g=FB(this.apiClient,p),b=new aC;return Object.assign(b,g),b})}else{const u=oz(this.apiClient,n);return f=Rt("{model}:batchEmbedContents",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const g=xB(this.apiClient,p),b=new aC;return Object.assign(b,g),b})}}async generateImagesInternal(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=Vz(this.apiClient,n);return f=Rt("{model}:predict",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const g=zB(this.apiClient,p),b=new sC;return Object.assign(b,g),b})}else{const u=cz(this.apiClient,n);return f=Rt("{model}:predict",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const g=wB(this.apiClient,p),b=new sC;return Object.assign(b,g),b})}}async editImageInternal(n){var t,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const f=Kz(this.apiClient,n);return o=Rt("{model}:predict",f._url),l=f._query,delete f.config,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const u=BB(this.apiClient,d),p=new h$;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(n){var t,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const f=Zz(this.apiClient,n);return o=Rt("{model}:predict",f._url),l=f._query,delete f.config,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const u=UB(this.apiClient,d),p=new p$;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=eB(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>g1(this.apiClient,p))}else{const u=uz(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>m1(this.apiClient,p))}}async listInternal(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=nB(this.apiClient,n);return f=Rt("{models_url}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const g=GB(this.apiClient,p),b=new oC;return Object.assign(b,g),b})}else{const u=fz(this.apiClient,n);return f=Rt("{models_url}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const g=NB(this.apiClient,p),b=new oC;return Object.assign(b,g),b})}}async update(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=rB(this.apiClient,n);return f=Rt("{model}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>g1(this.apiClient,p))}else{const u=pz(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>m1(this.apiClient,p))}}async delete(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=aB(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(()=>{const p=YB(),g=new lC;return Object.assign(g,p),g})}else{const u=mz(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(()=>{const p=CB(),g=new lC;return Object.assign(g,p),g})}}async countTokens(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=oB(this.apiClient,n);return f=Rt("{model}:countTokens",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const g=WB(this.apiClient,p),b=new cC;return Object.assign(b,g),b})}else{const u=yz(this.apiClient,n);return f=Rt("{model}:countTokens",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const g=jB(this.apiClient,p),b=new cC;return Object.assign(b,g),b})}}async computeTokens(n){var t,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const f=lB(this.apiClient,n);return o=Rt("{model}:computeTokens",f._url),l=f._query,delete f.config,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const u=QB(this.apiClient,d),p=new m$;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=uB(this.apiClient,n);return f=Rt("{model}:predictLongRunning",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>ZB(this.apiClient,p))}else{const u=vz(this.apiClient,n);return f=Rt("{model}:predictLongRunning",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>TB(this.apiClient,p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lU(e,n){const t={},i=C(n,["operationName"]);i!=null&&j(t,["_url","operationName"],i);const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function cU(e,n){const t={},i=C(n,["operationName"]);i!=null&&j(t,["_url","operationName"],i);const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function uU(e,n){const t={},i=C(n,["operationName"]);i!=null&&j(t,["operationName"],i);const a=C(n,["resourceName"]);a!=null&&j(t,["_url","resourceName"],a);const o=C(n,["config"]);return o!=null&&j(t,["config"],o),t}function dU(e,n){const t={},i=C(n,["video","uri"]);i!=null&&j(t,["uri"],i);const a=C(n,["video","encodedVideo"]);a!=null&&j(t,["videoBytes"],Gc(e,a));const o=C(n,["encoding"]);return o!=null&&j(t,["mimeType"],o),t}function fU(e,n){const t={},i=C(n,["_self"]);return i!=null&&j(t,["video"],dU(e,i)),t}function hU(e,n){const t={},i=C(n,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>fU(e,f))),j(t,["generatedVideos"],l)}const a=C(n,["raiMediaFilteredCount"]);a!=null&&j(t,["raiMediaFilteredCount"],a);const o=C(n,["raiMediaFilteredReasons"]);return o!=null&&j(t,["raiMediaFilteredReasons"],o),t}function pU(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["metadata"]);a!=null&&j(t,["metadata"],a);const o=C(n,["done"]);o!=null&&j(t,["done"],o);const l=C(n,["error"]);l!=null&&j(t,["error"],l);const f=C(n,["response","generateVideoResponse"]);return f!=null&&j(t,["response"],hU(e,f)),t}function mU(e,n){const t={},i=C(n,["gcsUri"]);i!=null&&j(t,["uri"],i);const a=C(n,["bytesBase64Encoded"]);a!=null&&j(t,["videoBytes"],Gc(e,a));const o=C(n,["mimeType"]);return o!=null&&j(t,["mimeType"],o),t}function gU(e,n){const t={},i=C(n,["_self"]);return i!=null&&j(t,["video"],mU(e,i)),t}function yU(e,n){const t={},i=C(n,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>gU(e,f))),j(t,["generatedVideos"],l)}const a=C(n,["raiMediaFilteredCount"]);a!=null&&j(t,["raiMediaFilteredCount"],a);const o=C(n,["raiMediaFilteredReasons"]);return o!=null&&j(t,["raiMediaFilteredReasons"],o),t}function SC(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["metadata"]);a!=null&&j(t,["metadata"],a);const o=C(n,["done"]);o!=null&&j(t,["done"],o);const l=C(n,["error"]);l!=null&&j(t,["error"],l);const f=C(n,["response"]);return f!=null&&j(t,["response"],yU(e,f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xU extends rg{constructor(n){super(),this.apiClient=n}async getVideosOperation(n){const t=n.operation,i=n.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let o;return i&&"httpOptions"in i&&(o=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:t.name,config:i})}async getVideosOperationInternal(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=cU(this.apiClient,n);return f=Rt("{operationName}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>SC(this.apiClient,p))}else{const u=lU(this.apiClient,n);return f=Rt("{operationName}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>pU(this.apiClient,p))}}async fetchPredictVideosOperationInternal(n){var t,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const f=uU(this.apiClient,n);return o=Rt("{resourceName}:fetchPredictOperation",f._url),l=f._query,delete f.config,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>SC(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bU="Content-Type",vU="X-Server-Timeout",wU="User-Agent",SU="x-goog-api-client",NU="0.14.1",CU=`google-genai-sdk/${NU}`,jU="v1beta1",_U="v1beta",NC=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class gk extends Error{constructor(n,t){t?super(n,{cause:t}):super(n,{cause:new Error().stack}),this.message=n,this.name="ClientError"}}class y1 extends Error{constructor(n,t){t?super(n,{cause:t}):super(n,{cause:new Error().stack}),this.message=n,this.name="ServerError"}}class kU{constructor(n){var t,i;this.clientOptions=Object.assign(Object.assign({},n),{project:n.project,location:n.location,apiKey:n.apiKey,vertexai:n.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:jU,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:_U,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,n.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var n;return(n=this.clientOptions.vertexai)!==null&&n!==void 0?n:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||n.baseUrl===void 0||n.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&n.apiVersion!==""&&i.push(n.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const n=this.getBaseUrl(),t=new URL(n);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(n){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=n;else throw new Error("HTTP options are not correctly set.")}constructUrl(n,t,i){const a=[this.getRequestUrlInternal(t)];return i&&a.push(this.getBaseResourcePath()),n!==""&&a.push(n),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(n){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||n.httpMethod==="GET"&&n.path.startsWith("publishers/google/models"))}async request(n){let t=this.clientOptions.httpOptions;n.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const i=this.shouldPrependVertexProjectPath(n),a=this.constructUrl(n.path,t,i);if(n.queryParams)for(const[l,f]of Object.entries(n.queryParams))a.searchParams.append(l,String(f));let o={};if(n.httpMethod==="GET"){if(n.body&&n.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=n.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,n.abortSignal),this.unaryApiCall(a,o,n.httpMethod)}patchHttpOptions(n,t){const i=JSON.parse(JSON.stringify(n));for(const[a,o]of Object.entries(t))typeof o=="object"?i[a]=Object.assign(Object.assign({},i[a]),o):o!==void 0&&(i[a]=o);return i}async requestStream(n){let t=this.clientOptions.httpOptions;n.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const i=this.shouldPrependVertexProjectPath(n),a=this.constructUrl(n.path,t,i);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let o={};return o.body=n.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,n.abortSignal),this.streamApiCall(a,o,n.httpMethod)}async includeExtraHttpOptionsToRequestInit(n,t,i){if(t&&t.timeout||i){const a=new AbortController,o=a.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>a.abort(),t.timeout),i&&i.addEventListener("abort",()=>{a.abort()}),n.signal=o}return n.headers=await this.getHeadersInternal(t),n}async unaryApiCall(n,t,i){return this.apiCall(n.toString(),Object.assign(Object.assign({},t),{method:i})).then(async a=>(await CC(a),new f1(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(n,t,i){return this.apiCall(n.toString(),Object.assign(Object.assign({},t),{method:i})).then(async a=>(await CC(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(n){var t;return lb(this,arguments,function*(){const a=(t=n==null?void 0:n.body)===null||t===void 0?void 0:t.getReader(),o=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let l="";for(;;){const{done:f,value:d}=yield vr(a.read());if(f){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=o.decode(d);try{const g=JSON.parse(u);if("error"in g){const b=JSON.parse(JSON.stringify(g.error)),v=b.status,N=b.code,k=`got status: ${v}. ${JSON.stringify(g)}`;if(N>=400&&N<500)throw new gk(k);if(N>=500&&N<600)throw new y1(k)}}catch(g){const b=g;if(b.name==="ClientError"||b.name==="ServerError")throw g}l+=u;let p=l.match(NC);for(;p;){const g=p[1];try{const b=new Response(g,{headers:n==null?void 0:n.headers,status:n==null?void 0:n.status,statusText:n==null?void 0:n.statusText});yield yield vr(new f1(b)),l=l.slice(p[0].length),p=l.match(NC)}catch(b){throw new Error(`exception parsing stream chunk ${g}. ${b}`)}}}}finally{a.releaseLock()}})}async apiCall(n,t){return fetch(n,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const n={},t=CU+" "+this.clientOptions.userAgentExtra;return n[wU]=t,n[SU]=t,n[bU]="application/json",n}async getHeadersInternal(n){const t=new Headers;if(n&&n.headers){for(const[i,a]of Object.entries(n.headers))t.append(i,a);n.timeout&&n.timeout>0&&t.append(vU,String(Math.ceil(n.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(n,t){var i;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const o=this.clientOptions.uploader,l=await o.stat(n);a.sizeBytes=String(l.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=f;const d=await this.fetchUploadUrl(a,t);return o.upload(n,d,this)}async downloadFile(n){await this.clientOptions.downloader.download(n,this)}async fetchUploadUrl(n,t){var i;let a={};t!=null&&t.httpOptions?a=t.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${n.mimeType}`}};const o={file:n},l=await this.request({path:Rt("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:a});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(i=l==null?void 0:l.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function CC(e){var n;if(e===void 0)throw new y1("response is undefined");if(!e.ok){const t=e.status,i=e.statusText;let a;!((n=e.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?a=await e.json():a={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=`got status: ${t} ${i}. ${JSON.stringify(a)}`;throw t>=400&&t<500?new gk(o):t>=500&&t<600?new y1(o):new Error(o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EU(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["_url","name"],i);const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function TU(e,n,t){const i={},a=C(n,["pageSize"]);t!==void 0&&a!=null&&j(t,["_query","pageSize"],a);const o=C(n,["pageToken"]);t!==void 0&&o!=null&&j(t,["_query","pageToken"],o);const l=C(n,["filter"]);return t!==void 0&&l!=null&&j(t,["_query","filter"],l),i}function AU(e,n){const t={},i=C(n,["config"]);return i!=null&&j(t,["config"],TU(e,i,t)),t}function PU(e,n){const t={},i=C(n,["textInput"]);i!=null&&j(t,["textInput"],i);const a=C(n,["output"]);return a!=null&&j(t,["output"],a),t}function DU(e,n){const t={};if(C(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=C(n,["examples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>PU(e,o))),j(t,["examples","examples"],a)}return t}function IU(e,n,t){const i={};if(C(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=C(n,["tunedModelDisplayName"]);if(t!==void 0&&a!=null&&j(t,["displayName"],a),C(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=C(n,["epochCount"]);t!==void 0&&o!=null&&j(t,["tuningTask","hyperparameters","epochCount"],o);const l=C(n,["learningRateMultiplier"]);if(l!=null&&j(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),C(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(C(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=C(n,["batchSize"]);t!==void 0&&f!=null&&j(t,["tuningTask","hyperparameters","batchSize"],f);const d=C(n,["learningRate"]);return t!==void 0&&d!=null&&j(t,["tuningTask","hyperparameters","learningRate"],d),i}function MU(e,n){const t={},i=C(n,["baseModel"]);i!=null&&j(t,["baseModel"],i);const a=C(n,["trainingDataset"]);a!=null&&j(t,["tuningTask","trainingData"],DU(e,a));const o=C(n,["config"]);return o!=null&&j(t,["config"],IU(e,o,t)),t}function RU(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["_url","name"],i);const a=C(n,["config"]);return a!=null&&j(t,["config"],a),t}function OU(e,n,t){const i={},a=C(n,["pageSize"]);t!==void 0&&a!=null&&j(t,["_query","pageSize"],a);const o=C(n,["pageToken"]);t!==void 0&&o!=null&&j(t,["_query","pageToken"],o);const l=C(n,["filter"]);return t!==void 0&&l!=null&&j(t,["_query","filter"],l),i}function LU(e,n){const t={},i=C(n,["config"]);return i!=null&&j(t,["config"],OU(e,i,t)),t}function FU(e,n,t){const i={},a=C(n,["gcsUri"]);if(t!==void 0&&a!=null&&j(t,["supervisedTuningSpec","trainingDatasetUri"],a),C(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function $U(e,n){const t={},i=C(n,["gcsUri"]);return i!=null&&j(t,["validationDatasetUri"],i),t}function zU(e,n,t){const i={},a=C(n,["validationDataset"]);t!==void 0&&a!=null&&j(t,["supervisedTuningSpec"],$U(e,a));const o=C(n,["tunedModelDisplayName"]);t!==void 0&&o!=null&&j(t,["tunedModelDisplayName"],o);const l=C(n,["description"]);t!==void 0&&l!=null&&j(t,["description"],l);const f=C(n,["epochCount"]);t!==void 0&&f!=null&&j(t,["supervisedTuningSpec","hyperParameters","epochCount"],f);const d=C(n,["learningRateMultiplier"]);t!==void 0&&d!=null&&j(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],d);const u=C(n,["exportLastCheckpointOnly"]);t!==void 0&&u!=null&&j(t,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const p=C(n,["adapterSize"]);if(t!==void 0&&p!=null&&j(t,["supervisedTuningSpec","hyperParameters","adapterSize"],p),C(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(C(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function BU(e,n){const t={},i=C(n,["baseModel"]);i!=null&&j(t,["baseModel"],i);const a=C(n,["trainingDataset"]);a!=null&&j(t,["supervisedTuningSpec","trainingDatasetUri"],FU(e,a,t));const o=C(n,["config"]);return o!=null&&j(t,["config"],zU(e,o,t)),t}function UU(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["model"],i);const a=C(n,["name"]);return a!=null&&j(t,["endpoint"],a),t}function yk(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["state"]);a!=null&&j(t,["state"],lk(e,a));const o=C(n,["createTime"]);o!=null&&j(t,["createTime"],o);const l=C(n,["tuningTask","startTime"]);l!=null&&j(t,["startTime"],l);const f=C(n,["tuningTask","completeTime"]);f!=null&&j(t,["endTime"],f);const d=C(n,["updateTime"]);d!=null&&j(t,["updateTime"],d);const u=C(n,["description"]);u!=null&&j(t,["description"],u);const p=C(n,["baseModel"]);p!=null&&j(t,["baseModel"],p);const g=C(n,["_self"]);g!=null&&j(t,["tunedModel"],UU(e,g));const b=C(n,["distillationSpec"]);b!=null&&j(t,["distillationSpec"],b);const v=C(n,["experiment"]);v!=null&&j(t,["experiment"],v);const N=C(n,["labels"]);N!=null&&j(t,["labels"],N);const k=C(n,["pipelineJob"]);k!=null&&j(t,["pipelineJob"],k);const E=C(n,["tunedModelDisplayName"]);return E!=null&&j(t,["tunedModelDisplayName"],E),t}function qU(e,n){const t={},i=C(n,["nextPageToken"]);i!=null&&j(t,["nextPageToken"],i);const a=C(n,["tunedModels"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>yk(e,l))),j(t,["tuningJobs"],o)}return t}function VU(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["metadata"]);a!=null&&j(t,["metadata"],a);const o=C(n,["done"]);o!=null&&j(t,["done"],o);const l=C(n,["error"]);return l!=null&&j(t,["error"],l),t}function HU(e,n){const t={},i=C(n,["checkpointId"]);i!=null&&j(t,["checkpointId"],i);const a=C(n,["epoch"]);a!=null&&j(t,["epoch"],a);const o=C(n,["step"]);o!=null&&j(t,["step"],o);const l=C(n,["endpoint"]);return l!=null&&j(t,["endpoint"],l),t}function GU(e,n){const t={},i=C(n,["model"]);i!=null&&j(t,["model"],i);const a=C(n,["endpoint"]);a!=null&&j(t,["endpoint"],a);const o=C(n,["checkpoints"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(f=>HU(e,f))),j(t,["checkpoints"],l)}return t}function x1(e,n){const t={},i=C(n,["name"]);i!=null&&j(t,["name"],i);const a=C(n,["state"]);a!=null&&j(t,["state"],lk(e,a));const o=C(n,["createTime"]);o!=null&&j(t,["createTime"],o);const l=C(n,["startTime"]);l!=null&&j(t,["startTime"],l);const f=C(n,["endTime"]);f!=null&&j(t,["endTime"],f);const d=C(n,["updateTime"]);d!=null&&j(t,["updateTime"],d);const u=C(n,["error"]);u!=null&&j(t,["error"],u);const p=C(n,["description"]);p!=null&&j(t,["description"],p);const g=C(n,["baseModel"]);g!=null&&j(t,["baseModel"],g);const b=C(n,["tunedModel"]);b!=null&&j(t,["tunedModel"],GU(e,b));const v=C(n,["supervisedTuningSpec"]);v!=null&&j(t,["supervisedTuningSpec"],v);const N=C(n,["tuningDataStats"]);N!=null&&j(t,["tuningDataStats"],N);const k=C(n,["encryptionSpec"]);k!=null&&j(t,["encryptionSpec"],k);const E=C(n,["partnerModelTuningSpec"]);E!=null&&j(t,["partnerModelTuningSpec"],E);const T=C(n,["distillationSpec"]);T!=null&&j(t,["distillationSpec"],T);const I=C(n,["experiment"]);I!=null&&j(t,["experiment"],I);const D=C(n,["labels"]);D!=null&&j(t,["labels"],D);const U=C(n,["pipelineJob"]);U!=null&&j(t,["pipelineJob"],U);const O=C(n,["tunedModelDisplayName"]);return O!=null&&j(t,["tunedModelDisplayName"],O),t}function YU(e,n){const t={},i=C(n,["nextPageToken"]);i!=null&&j(t,["nextPageToken"],i);const a=C(n,["tuningJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>x1(e,l))),j(t,["tuningJobs"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WU extends rg{constructor(n){super(),this.apiClient=n,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Ib(jh.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const i=await this.tuneMldevInternal(t);let a="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?a=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(a=i.name.split("/operations/")[0]),{name:a,state:d1.JOB_STATE_QUEUED}}}}async getInternal(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=RU(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>x1(this.apiClient,p))}else{const u=EU(this.apiClient,n);return f=Rt("{name}",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>yk(this.apiClient,p))}}async listInternal(n){var t,i,a,o;let l,f="",d={};if(this.apiClient.isVertexAI()){const u=LU(this.apiClient,n);return f=Rt("tuningJobs",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const g=YU(this.apiClient,p),b=new uC;return Object.assign(b,g),b})}else{const u=AU(this.apiClient,n);return f=Rt("tunedModels",u._url),d=u._query,delete u.config,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=n.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=n.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const g=qU(this.apiClient,p),b=new uC;return Object.assign(b,g),b})}}async tuneInternal(n){var t,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const f=BU(this.apiClient,n);return o=Rt("tuningJobs",f._url),l=f._query,delete f.config,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>x1(this.apiClient,d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(n){var t,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=MU(this.apiClient,n);return o=Rt("tunedModels",f._url),l=f._query,delete f.config,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>VU(this.apiClient,d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QU{async download(n,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const JU=1024*1024*8,KU=3,XU=1e3,ZU=2,c0="x-goog-upload-status";async function e8(e,n,t){var i,a,o;let l=0,f=0,d=new f1(new Response),u="upload";for(l=e.size;f<l;){const g=Math.min(JU,l-f),b=e.slice(f,f+g);f+g>=l&&(u+=", finalize");let v=0,N=XU;for(;v<KU&&(d=await t.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(f),"Content-Length":String(g)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[c0]));)v++,await n8(N),N=N*ZU;if(f+=g,((a=d==null?void 0:d.headers)===null||a===void 0?void 0:a[c0])!=="active")break;if(l<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const p=await(d==null?void 0:d.json());if(((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[c0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return p.file}async function t8(e){return{size:e.size,type:e.type}}function n8(e){return new Promise(n=>setTimeout(n,e))}class i8{async upload(n,t,i){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await e8(n,t,i)}async stat(n){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await t8(n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r8{create(n,t,i){return new a8(n,t,i)}}class a8{constructor(n,t,i){this.url=n,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jC="x-goog-api-key";class s8{constructor(n){this.apiKey=n}async addAuthHeaders(n){n.get(jC)===null&&n.append(jC,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o8="gl-node/";class xk{constructor(n){var t;if(n.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=n.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=n.apiKey;const i=y6(n,void 0,void 0);i&&(n.httpOptions?n.httpOptions.baseUrl=i:n.httpOptions={baseUrl:i}),this.apiVersion=n.apiVersion;const a=new s8(this.apiKey);this.apiClient=new kU({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:n.httpOptions,userAgentExtra:o8+"web",uploader:new i8,downloader:new QU}),this.models=new oU(this.apiClient),this.live=new nU(this.apiClient,a,new r8),this.chats=new C$(this.models,this.apiClient),this.caches=new v$(this.apiClient),this.files=new L$(this.apiClient),this.operations=new xU(this.apiClient),this.tunings=new WU(this.apiClient)}}const ah=new Map,bk=(()=>{const e=new Promise(n=>{window.addEventListener("pointerdown",n,{once:!0}),window.addEventListener("keydown",n,{once:!0})});return async n=>{try{const t=new Audio;if(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await t.play(),n!=null&&n.id&&ah.has(n.id)){const a=ah.get(n.id);if(a)return a}const i=new AudioContext(n);return n!=null&&n.id&&ah.set(n.id,i),i}catch{if(await e,n!=null&&n.id&&ah.has(n.id)){const a=ah.get(n.id);if(a)return a}const i=new AudioContext(n);return n!=null&&n.id&&ah.set(n.id,i),i}}})();function l8(e){var n=atob(e),t=new Uint8Array(n.length);for(let i=0;i<n.length;i++)t[i]=n.charCodeAt(i);return t.buffer}const c8=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,vk=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,bx=new Map,b1=(e,n)=>{const t=new Blob([`registerProcessor("${e}", ${n})`],{type:"application/javascript"});return URL.createObjectURL(t)};var u0={exports:{}},_C;function u8(){return _C||(_C=1,function(e){var n=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function a(d,u,p){this.fn=d,this.context=u,this.once=p||!1}function o(d,u,p,g,b){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new a(p,g||d,b),N=t?t+u:u;return d._events[N]?d._events[N].fn?d._events[N]=[d._events[N],v]:d._events[N].push(v):(d._events[N]=v,d._eventsCount++),d}function l(d,u){--d._eventsCount===0?d._events=new i:delete d._events[u]}function f(){this._events=new i,this._eventsCount=0}f.prototype.eventNames=function(){var u=[],p,g;if(this._eventsCount===0)return u;for(g in p=this._events)n.call(p,g)&&u.push(t?g.slice(1):g);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(p)):u},f.prototype.listeners=function(u){var p=t?t+u:u,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var b=0,v=g.length,N=new Array(v);b<v;b++)N[b]=g[b].fn;return N},f.prototype.listenerCount=function(u){var p=t?t+u:u,g=this._events[p];return g?g.fn?1:g.length:0},f.prototype.emit=function(u,p,g,b,v,N){var k=t?t+u:u;if(!this._events[k])return!1;var E=this._events[k],T=arguments.length,I,D;if(E.fn){switch(E.once&&this.removeListener(u,E.fn,void 0,!0),T){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,p),!0;case 3:return E.fn.call(E.context,p,g),!0;case 4:return E.fn.call(E.context,p,g,b),!0;case 5:return E.fn.call(E.context,p,g,b,v),!0;case 6:return E.fn.call(E.context,p,g,b,v,N),!0}for(D=1,I=new Array(T-1);D<T;D++)I[D-1]=arguments[D];E.fn.apply(E.context,I)}else{var U=E.length,O;for(D=0;D<U;D++)switch(E[D].once&&this.removeListener(u,E[D].fn,void 0,!0),T){case 1:E[D].fn.call(E[D].context);break;case 2:E[D].fn.call(E[D].context,p);break;case 3:E[D].fn.call(E[D].context,p,g);break;case 4:E[D].fn.call(E[D].context,p,g,b);break;default:if(!I)for(O=1,I=new Array(T-1);O<T;O++)I[O-1]=arguments[O];E[D].fn.apply(E[D].context,I)}}return!0},f.prototype.on=function(u,p,g){return o(this,u,p,g,!1)},f.prototype.once=function(u,p,g){return o(this,u,p,g,!0)},f.prototype.removeListener=function(u,p,g,b){var v=t?t+u:u;if(!this._events[v])return this;if(!p)return l(this,v),this;var N=this._events[v];if(N.fn)N.fn===p&&(!b||N.once)&&(!g||N.context===g)&&l(this,v);else{for(var k=0,E=[],T=N.length;k<T;k++)(N[k].fn!==p||b&&!N[k].once||g&&N[k].context!==g)&&E.push(N[k]);E.length?this._events[v]=E.length===1?E[0]:E:l(this,v)}return this},f.prototype.removeAllListeners=function(u){var p;return u?(p=t?t+u:u,this._events[p]&&l(this,p)):(this._events=new i,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=t,f.EventEmitter=f,e.exports=f}(u0)),u0.exports}var d8=u8();const wk=Pd(d8);function f8(e){for(var n="",t=new Uint8Array(e),i=t.byteLength,a=0;a<i;a++)n+=String.fromCharCode(t[a]);return window.btoa(n)}class Sk extends wk{constructor(t=16e3){super();Wn(this,"stream");Wn(this,"audioContext");Wn(this,"source");Wn(this,"recording",!1);Wn(this,"recordingWorklet");Wn(this,"vuWorklet");Wn(this,"starting",null);this.sampleRate=t}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async t=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await bk({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const i="audio-recorder-worklet",a=b1(i,c8);await this.audioContext.audioWorklet.addModule(a),this.recordingWorklet=new AudioWorkletNode(this.audioContext,i),this.recordingWorklet.port.onmessage=async l=>{const f=l.data.data.int16arrayBuffer;if(f){const d=f8(f);this.emit("data",d)}},this.source.connect(this.recordingWorklet);const o="vu-meter";await this.audioContext.audioWorklet.addModule(b1(o,vk)),this.vuWorklet=new AudioWorkletNode(this.audioContext,o),this.vuWorklet.port.onmessage=l=>{this.emit("volume",l.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,t(),this.starting=null})}stop(){const t=()=>{var i,a;(i=this.source)==null||i.disconnect(),(a=this.stream)==null||a.getTracks().forEach(o=>o.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(t);return}t()}}const h8=3,p8=({active:e,volume:n,hover:t})=>{const i=w.useRef([]);return w.useEffect(()=>{let a=null;const o=()=>{i.current.forEach((l,f)=>{l&&(l.style.height=`${Math.min(24,4+n*(f===1?400:60))}px`)}),a=window.setTimeout(o,100)};return o(),()=>clearTimeout(a)},[n]),r.jsx("div",{className:Bc("audioPulse",{active:e,hover:t}),children:Array(h8).fill(null).map((a,o)=>r.jsx("div",{ref:l=>{i.current[o]=l},style:{animationDelay:`${o*133}ms`}},o))})};var Rm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var m8=Rm.exports,kC;function g8(){return kC||(kC=1,function(e,n){(function(){var t,i="4.17.21",a=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",f="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",u=500,p="__lodash_placeholder__",g=1,b=2,v=4,N=1,k=2,E=1,T=2,I=4,D=8,U=16,O=32,$=64,B=128,q=256,H=512,F=30,L="...",Q=800,ne=16,ie=1,oe=2,Y=3,z=1/0,re=9007199254740991,X=17976931348623157e292,P=NaN,te=4294967295,se=te-1,M=te>>>1,fe=[["ary",B],["bind",E],["bindKey",T],["curry",D],["curryRight",U],["flip",H],["partial",O],["partialRight",$],["rearg",q]],we="[object Arguments]",ce="[object Array]",Le="[object AsyncFunction]",Ne="[object Boolean]",nt="[object Date]",ut="[object DOMException]",je="[object Error]",ye="[object Function]",Ae="[object GeneratorFunction]",De="[object Map]",Ve="[object Number]",it="[object Null]",Ke="[object Object]",rt="[object Promise]",Ft="[object Proxy]",_t="[object RegExp]",ve="[object Set]",qe="[object String]",We="[object Symbol]",ze="[object Undefined]",J="[object WeakMap]",G="[object WeakSet]",K="[object ArrayBuffer]",Se="[object DataView]",Ee="[object Float32Array]",Be="[object Float64Array]",at="[object Int8Array]",gt="[object Int16Array]",pt="[object Int32Array]",Ue="[object Uint8Array]",Ze="[object Uint8ClampedArray]",Fe="[object Uint16Array]",ct="[object Uint32Array]",Xe=/\b__p \+= '';/g,vt=/\b(__p \+=) '' \+/g,Xn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$n=/&(?:amp|lt|gt|quot|#39);/g,_n=/[&<>"']/g,yn=RegExp($n.source),un=RegExp(_n.source),Ci=/<%-([\s\S]+?)%>/g,Vi=/<%([\s\S]+?)%>/g,ir=/<%=([\s\S]+?)%>/g,ma=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_r=/^\w*$/,ti=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zn=/[\\^$.*+?()[\]{}|]/g,zn=RegExp(Zn.source),$a=/^\s+/,us=/\s/,zh=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bh=/\{\n\/\* \[wrapped with (.+)\] \*/,Md=/,? & /,ds=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jc=/[()=,{}\[\]\/\s]/,Vs=/\\(\\)?/g,Hs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,za=/\w*$/,Gs=/^[-+]0x[0-9a-f]+$/i,ui=/^0b[01]+$/i,Rd=/^\[object .+?Constructor\]$/,Il=/^0o[0-7]+$/i,fs=/^(?:0|[1-9]\d*)$/,Ba=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kr=/($^)/,Ys=/['\n\r\u2028\u2029\\]/g,Ws="\\ud800-\\udfff",Od="\\u0300-\\u036f",Uo="\\ufe20-\\ufe2f",qo="\\u20d0-\\u20ff",rr=Od+Uo+qo,Vo="\\u2700-\\u27bf",Ml="a-z\\xdf-\\xf6\\xf8-\\xff",ga="\\xac\\xb1\\xd7\\xf7",Kc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Xc="\\u2000-\\u206f",Ld=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ho="A-Z\\xc0-\\xd6\\xd8-\\xde",Li="\\ufe0e\\ufe0f",Rl=ga+Kc+Xc+Ld,Ol="[']",Go="["+Ws+"]",Ll="["+Rl+"]",Ua="["+rr+"]",Zc="\\d+",Hi="["+Vo+"]",Yo="["+Ml+"]",Qs="[^"+Ws+Rl+Zc+Vo+Ml+Ho+"]",qa="\\ud83c[\\udffb-\\udfff]",ya="(?:"+Ua+"|"+qa+")",Fl="[^"+Ws+"]",hs="(?:\\ud83c[\\udde6-\\uddff]){2}",Vr="[\\ud800-\\udbff][\\udc00-\\udfff]",Va="["+Ho+"]",Wo="\\u200d",Qo="(?:"+Yo+"|"+Qs+")",Jo="(?:"+Va+"|"+Qs+")",$l="(?:"+Ol+"(?:d|ll|m|re|s|t|ve))?",zl="(?:"+Ol+"(?:D|LL|M|RE|S|T|VE))?",ps=ya+"?",Er="["+Li+"]?",Ko="(?:"+Wo+"(?:"+[Fl,hs,Vr].join("|")+")"+Er+ps+")*",ms="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ar="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gs=Er+ps+Ko,eu="(?:"+[Hi,hs,Vr].join("|")+")"+gs,Xo="(?:"+[Fl+Ua+"?",Ua,hs,Vr,Go].join("|")+")",Js=RegExp(Ol,"g"),Tr=RegExp(Ua,"g"),ys=RegExp(qa+"(?="+qa+")|"+Xo+gs,"g"),Ks=RegExp([Va+"?"+Yo+"+"+$l+"(?="+[Ll,Va,"$"].join("|")+")",Jo+"+"+zl+"(?="+[Ll,Va+Qo,"$"].join("|")+")",Va+"?"+Qo+"+"+$l,Va+"+"+zl,ar,ms,Zc,eu].join("|"),"g"),Ar=RegExp("["+Wo+Ws+rr+Li+"]"),tu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ul=-1,hn={};hn[Ee]=hn[Be]=hn[at]=hn[gt]=hn[pt]=hn[Ue]=hn[Ze]=hn[Fe]=hn[ct]=!0,hn[we]=hn[ce]=hn[K]=hn[Ne]=hn[Se]=hn[nt]=hn[je]=hn[ye]=hn[De]=hn[Ve]=hn[Ke]=hn[_t]=hn[ve]=hn[qe]=hn[J]=!1;var dn={};dn[we]=dn[ce]=dn[K]=dn[Se]=dn[Ne]=dn[nt]=dn[Ee]=dn[Be]=dn[at]=dn[gt]=dn[pt]=dn[De]=dn[Ve]=dn[Ke]=dn[_t]=dn[ve]=dn[qe]=dn[We]=dn[Ue]=dn[Ze]=dn[Fe]=dn[ct]=!0,dn[je]=dn[ye]=dn[J]=!1;var pn={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ji={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xs={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xa=parseFloat,Zo=parseInt,ql=typeof zc=="object"&&zc&&zc.Object===Object&&zc,Vl=typeof self=="object"&&self&&self.Object===Object&&self,An=ql||Vl||Function("return this")(),xs=n&&!n.nodeType&&n,Gr=xs&&!0&&e&&!e.nodeType&&e,el=Gr&&Gr.exports===xs,bs=el&&ql.process,Gi=function(){try{var ue=Gr&&Gr.require&&Gr.require("util").types;return ue||bs&&bs.binding&&bs.binding("util")}catch{}}(),Zs=Gi&&Gi.isArrayBuffer,Ha=Gi&&Gi.isDate,Fd=Gi&&Gi.isMap,Hl=Gi&&Gi.isRegExp,eo=Gi&&Gi.isSet,to=Gi&&Gi.isTypedArray;function gi(ue,Re,Ce){switch(Ce.length){case 0:return ue.call(Re);case 1:return ue.call(Re,Ce[0]);case 2:return ue.call(Re,Ce[0],Ce[1]);case 3:return ue.call(Re,Ce[0],Ce[1],Ce[2])}return ue.apply(Re,Ce)}function Uh(ue,Re,Ce,lt){for(var yt=-1,en=ue==null?0:ue.length;++yt<en;){var di=ue[yt];Re(lt,di,Ce(di),ue)}return lt}function Fi(ue,Re){for(var Ce=-1,lt=ue==null?0:ue.length;++Ce<lt&&Re(ue[Ce],Ce,ue)!==!1;);return ue}function qh(ue,Re){for(var Ce=ue==null?0:ue.length;Ce--&&Re(ue[Ce],Ce,ue)!==!1;);return ue}function $d(ue,Re){for(var Ce=-1,lt=ue==null?0:ue.length;++Ce<lt;)if(!Re(ue[Ce],Ce,ue))return!1;return!0}function Yr(ue,Re){for(var Ce=-1,lt=ue==null?0:ue.length,yt=0,en=[];++Ce<lt;){var di=ue[Ce];Re(di,Ce,ue)&&(en[yt++]=di)}return en}function Gl(ue,Re){var Ce=ue==null?0:ue.length;return!!Ce&&$i(ue,Re,0)>-1}function nu(ue,Re,Ce){for(var lt=-1,yt=ue==null?0:ue.length;++lt<yt;)if(Ce(Re,ue[lt]))return!0;return!1}function On(ue,Re){for(var Ce=-1,lt=ue==null?0:ue.length,yt=Array(lt);++Ce<lt;)yt[Ce]=Re(ue[Ce],Ce,ue);return yt}function ba(ue,Re){for(var Ce=-1,lt=Re.length,yt=ue.length;++Ce<lt;)ue[yt+Ce]=Re[Ce];return ue}function iu(ue,Re,Ce,lt){var yt=-1,en=ue==null?0:ue.length;for(lt&&en&&(Ce=ue[++yt]);++yt<en;)Ce=Re(Ce,ue[yt],yt,ue);return Ce}function Vh(ue,Re,Ce,lt){var yt=ue==null?0:ue.length;for(lt&&yt&&(Ce=ue[--yt]);yt--;)Ce=Re(Ce,ue[yt],yt,ue);return Ce}function ru(ue,Re){for(var Ce=-1,lt=ue==null?0:ue.length;++Ce<lt;)if(Re(ue[Ce],Ce,ue))return!0;return!1}var Hh=tl("length");function Yl(ue){return ue.split("")}function Gh(ue){return ue.match(ds)||[]}function va(ue,Re,Ce){var lt;return Ce(ue,function(yt,en,di){if(Re(yt,en,di))return lt=en,!1}),lt}function Pr(ue,Re,Ce,lt){for(var yt=ue.length,en=Ce+(lt?1:-1);lt?en--:++en<yt;)if(Re(ue[en],en,ue))return en;return-1}function $i(ue,Re,Ce){return Re===Re?Jh(ue,Re,Ce):Pr(ue,vs,Ce)}function Wl(ue,Re,Ce,lt){for(var yt=Ce-1,en=ue.length;++yt<en;)if(lt(ue[yt],Re))return yt;return-1}function vs(ue){return ue!==ue}function au(ue,Re){var Ce=ue==null?0:ue.length;return Ce?Jl(ue,Re)/Ce:P}function tl(ue){return function(Re){return Re==null?t:Re[ue]}}function no(ue){return function(Re){return ue==null?t:ue[Re]}}function Ql(ue,Re,Ce,lt,yt){return yt(ue,function(en,di,on){Ce=lt?(lt=!1,en):Re(Ce,en,di,on)}),Ce}function su(ue,Re){var Ce=ue.length;for(ue.sort(Re);Ce--;)ue[Ce]=ue[Ce].value;return ue}function Jl(ue,Re){for(var Ce,lt=-1,yt=ue.length;++lt<yt;){var en=Re(ue[lt]);en!==t&&(Ce=Ce===t?en:Ce+en)}return Ce}function wa(ue,Re){for(var Ce=-1,lt=Array(ue);++Ce<ue;)lt[Ce]=Re(Ce);return lt}function Yh(ue,Re){return On(Re,function(Ce){return[Ce,ue[Ce]]})}function zd(ue){return ue&&ue.slice(0,ec(ue)+1).replace($a,"")}function Yi(ue){return function(Re){return ue(Re)}}function Kl(ue,Re){return On(Re,function(Ce){return ue[Ce]})}function io(ue,Re){return ue.has(Re)}function ro(ue,Re){for(var Ce=-1,lt=ue.length;++Ce<lt&&$i(Re,ue[Ce],0)>-1;);return Ce}function Dr(ue,Re){for(var Ce=ue.length;Ce--&&$i(Re,ue[Ce],0)>-1;);return Ce}function Wh(ue,Re){for(var Ce=ue.length,lt=0;Ce--;)ue[Ce]===Re&&++lt;return lt}var ao=no(pn),Bd=no(ji);function Ud(ue){return"\\"+Xs[ue]}function ou(ue,Re){return ue==null?t:ue[Re]}function _i(ue){return Ar.test(ue)}function qd(ue){return tu.test(ue)}function lu(ue){for(var Re,Ce=[];!(Re=ue.next()).done;)Ce.push(Re.value);return Ce}function Xl(ue){var Re=-1,Ce=Array(ue.size);return ue.forEach(function(lt,yt){Ce[++Re]=[yt,lt]}),Ce}function Vd(ue,Re){return function(Ce){return ue(Re(Ce))}}function Ga(ue,Re){for(var Ce=-1,lt=ue.length,yt=0,en=[];++Ce<lt;){var di=ue[Ce];(di===Re||di===p)&&(ue[Ce]=p,en[yt++]=Ce)}return en}function Zl(ue){var Re=-1,Ce=Array(ue.size);return ue.forEach(function(lt){Ce[++Re]=lt}),Ce}function Qh(ue){var Re=-1,Ce=Array(ue.size);return ue.forEach(function(lt){Ce[++Re]=[lt,lt]}),Ce}function Jh(ue,Re,Ce){for(var lt=Ce-1,yt=ue.length;++lt<yt;)if(ue[lt]===Re)return lt;return-1}function Wi(ue,Re,Ce){for(var lt=Ce+1;lt--;)if(ue[lt]===Re)return lt;return lt}function Wr(ue){return _i(ue)?le(ue):Hh(ue)}function sr(ue){return _i(ue)?xe(ue):Yl(ue)}function ec(ue){for(var Re=ue.length;Re--&&us.test(ue.charAt(Re)););return Re}var cu=no(Hr);function le(ue){for(var Re=ys.lastIndex=0;ys.test(ue);)++Re;return Re}function xe(ue){return ue.match(ys)||[]}function me(ue){return ue.match(Ks)||[]}var Me=function ue(Re){Re=Re==null?An:tt.defaults(An.Object(),Re,tt.pick(An,Bl));var Ce=Re.Array,lt=Re.Date,yt=Re.Error,en=Re.Function,di=Re.Math,on=Re.Object,Hd=Re.RegExp,hg=Re.String,Ir=Re.TypeError,Gd=Ce.prototype,Qb=en.prototype,tc=on.prototype,uu=Re["__core-js_shared__"],du=Qb.toString,mn=tc.hasOwnProperty,Sa=0,Kh=function(){var m=/[^.]+$/.exec(uu&&uu.keys&&uu.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),Qi=tc.toString,Qr=du.call(on),nc=An._,Xh=Hd("^"+du.call(mn).replace(Zn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nl=el?Re.Buffer:t,Na=Re.Symbol,ic=Re.Uint8Array,il=nl?nl.allocUnsafe:t,fu=Vd(on.getPrototypeOf,on),hu=on.create,rl=tc.propertyIsEnumerable,Yd=Gd.splice,or=Na?Na.isConcatSpreadable:t,al=Na?Na.iterator:t,Ji=Na?Na.toStringTag:t,pu=function(){try{var m=mo(on,"defineProperty");return m({},"",{}),m}catch{}}(),Wd=Re.clearTimeout!==An.clearTimeout&&Re.clearTimeout,sl=lt&&lt.now!==An.Date.now&&lt.now,Zh=Re.setTimeout!==An.setTimeout&&Re.setTimeout,rc=di.ceil,ws=di.floor,so=on.getOwnPropertySymbols,Qd=nl?nl.isBuffer:t,mu=Re.isFinite,Jr=Gd.join,Kr=Vd(on.keys,on),Bn=di.max,Vn=di.min,Ss=lt.now,ol=Re.parseInt,ep=di.random,tp=Gd.reverse,gu=mo(Re,"DataView"),yi=mo(Re,"Map"),Hn=mo(Re,"Promise"),Xt=mo(Re,"Set"),Ca=mo(Re,"WeakMap"),lr=mo(on,"create"),ac=Ca&&new Ca,Xr={},pg=Ps(gu),mg=Ps(yi),yu=Ps(Hn),xu=Ps(Xt),gg=Ps(Ca),oo=Na?Na.prototype:t,ll=oo?oo.valueOf:t,lo=oo?oo.toString:t;function Z(m){if(ei(m)&&!Mt(m)&&!(m instanceof Gt)){if(m instanceof cr)return m;if(mn.call(m,"__wrapped__"))return bi(m)}return new cr(m)}var Mr=function(){function m(){}return function(y){if(!Yn(y))return{};if(hu)return hu(y);m.prototype=y;var _=new m;return m.prototype=t,_}}();function Zr(){}function cr(m,y){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=t}Z.templateSettings={escape:Ci,evaluate:Vi,interpolate:ir,variable:"",imports:{_:Z}},Z.prototype=Zr.prototype,Z.prototype.constructor=Z,cr.prototype=Mr(Zr.prototype),cr.prototype.constructor=cr;function Gt(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function bu(){var m=new Gt(this.__wrapped__);return m.__actions__=xi(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=xi(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=xi(this.__views__),m}function Jd(){if(this.__filtered__){var m=new Gt(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function cl(){var m=this.__wrapped__.value(),y=this.__dir__,_=Mt(m),R=y<0,W=_?m.length:0,ae=Qg(0,W,this.__views__),de=ae.start,ge=ae.end,ke=ge-de,Ye=R?ge:de-1,Je=this.__iteratees__,et=Je.length,dt=0,xt=Vn(ke,this.__takeCount__);if(!_||!R&&W==ke&&xt==ke)return Rg(m,this.__actions__);var Pt=[];e:for(;ke--&&dt<xt;){Ye+=y;for(var Wt=-1,Dt=m[Ye];++Wt<et;){var nn=Je[Wt],cn=nn.iteratee,Pa=nn.type,Br=cn(Dt);if(Pa==oe)Dt=Br;else if(!Br){if(Pa==ie)continue e;break e}}Pt[dt++]=Dt}return Pt}Gt.prototype=Mr(Zr.prototype),Gt.prototype.constructor=Gt;function ni(m){var y=-1,_=m==null?0:m.length;for(this.clear();++y<_;){var R=m[y];this.set(R[0],R[1])}}function Kd(){this.__data__=lr?lr(null):{},this.size=0}function yg(m){var y=this.has(m)&&delete this.__data__[m];return this.size-=y?1:0,y}function Jb(m){var y=this.__data__;if(lr){var _=y[m];return _===d?t:_}return mn.call(y,m)?y[m]:t}function Kb(m){var y=this.__data__;return lr?y[m]!==t:mn.call(y,m)}function Xb(m,y){var _=this.__data__;return this.size+=this.has(m)?0:1,_[m]=lr&&y===t?d:y,this}ni.prototype.clear=Kd,ni.prototype.delete=yg,ni.prototype.get=Jb,ni.prototype.has=Kb,ni.prototype.set=Xb;function Pn(m){var y=-1,_=m==null?0:m.length;for(this.clear();++y<_;){var R=m[y];this.set(R[0],R[1])}}function np(){this.__data__=[],this.size=0}function vu(m){var y=this.__data__,_=lc(y,m);if(_<0)return!1;var R=y.length-1;return _==R?y.pop():Yd.call(y,_,1),--this.size,!0}function wu(m){var y=this.__data__,_=lc(y,m);return _<0?t:y[_][1]}function ip(m){return lc(this.__data__,m)>-1}function sc(m,y){var _=this.__data__,R=lc(_,m);return R<0?(++this.size,_.push([m,y])):_[R][1]=y,this}Pn.prototype.clear=np,Pn.prototype.delete=vu,Pn.prototype.get=wu,Pn.prototype.has=ip,Pn.prototype.set=sc;function ur(m){var y=-1,_=m==null?0:m.length;for(this.clear();++y<_;){var R=m[y];this.set(R[0],R[1])}}function Zb(){this.size=0,this.__data__={hash:new ni,map:new(yi||Pn),string:new ni}}function xg(m){var y=pc(this,m).delete(m);return this.size-=y?1:0,y}function ev(m){return pc(this,m).get(m)}function bg(m){return pc(this,m).has(m)}function ul(m,y){var _=pc(this,m),R=_.size;return _.set(m,y),this.size+=_.size==R?0:1,this}ur.prototype.clear=Zb,ur.prototype.delete=xg,ur.prototype.get=ev,ur.prototype.has=bg,ur.prototype.set=ul;function Ns(m){var y=-1,_=m==null?0:m.length;for(this.__data__=new ur;++y<_;)this.add(m[y])}function Xd(m){return this.__data__.set(m,d),this}function vg(m){return this.__data__.has(m)}Ns.prototype.add=Ns.prototype.push=Xd,Ns.prototype.has=vg;function Ki(m){var y=this.__data__=new Pn(m);this.size=y.size}function wg(){this.__data__=new Pn,this.size=0}function Zd(m){var y=this.__data__,_=y.delete(m);return this.size=y.size,_}function rp(m){return this.__data__.get(m)}function Sg(m){return this.__data__.has(m)}function ef(m,y){var _=this.__data__;if(_ instanceof Pn){var R=_.__data__;if(!yi||R.length<a-1)return R.push([m,y]),this.size=++_.size,this;_=this.__data__=new ur(R)}return _.set(m,y),this.size=_.size,this}Ki.prototype.clear=wg,Ki.prototype.delete=Zd,Ki.prototype.get=rp,Ki.prototype.has=Sg,Ki.prototype.set=ef;function ap(m,y){var _=Mt(m),R=!_&&Rs(m),W=!_&&!R&&jo(m),ae=!_&&!R&&!W&&Ec(m),de=_||R||W||ae,ge=de?wa(m.length,hg):[],ke=ge.length;for(var Ye in m)(y||mn.call(m,Ye))&&!(de&&(Ye=="length"||W&&(Ye=="offset"||Ye=="parent")||ae&&(Ye=="buffer"||Ye=="byteLength"||Ye=="byteOffset")||Ea(Ye,ke)))&&ge.push(Ye);return ge}function oc(m){var y=m.length;return y?m[df(0,y-1)]:t}function Ng(m,y){return Wu(xi(m),_a(y,0,m.length))}function Cg(m){return Wu(xi(m))}function Ya(m,y,_){(_!==t&&!yr(m[y],_)||_===t&&!(y in m))&&ja(m,y,_)}function dl(m,y,_){var R=m[y];(!(mn.call(m,y)&&yr(R,_))||_===t&&!(y in m))&&ja(m,y,_)}function lc(m,y){for(var _=m.length;_--;)if(yr(m[_][0],y))return _;return-1}function co(m,y,_,R){return js(m,function(W,ae,de){y(R,W,_(W),de)}),R}function Cs(m,y){return m&&hr(y,Si(y),m)}function Su(m,y){return m&&hr(y,Ti(y),m)}function ja(m,y,_){y=="__proto__"&&pu?pu(m,y,{configurable:!0,enumerable:!0,value:_,writable:!0}):m[y]=_}function Nu(m,y){for(var _=-1,R=y.length,W=Ce(R),ae=m==null;++_<R;)W[_]=ae?t:ld(m,y[_]);return W}function _a(m,y,_){return m===m&&(_!==t&&(m=m<=_?m:_),y!==t&&(m=m>=y?m:y)),m}function zi(m,y,_,R,W,ae){var de,ge=y&g,ke=y&b,Ye=y&v;if(_&&(de=W?_(m,R,W,ae):_(m)),de!==t)return de;if(!Yn(m))return m;var Je=Mt(m);if(Je){if(de=Pp(m),!ge)return xi(m,de)}else{var et=Ei(m),dt=et==ye||et==Ae;if(jo(m))return Np(m,ge);if(et==Ke||et==we||dt&&!W){if(de=ke||dt?{}:Dp(m),!ge)return ke?Ou(m,Su(de,m)):yf(m,Cs(de,m))}else{if(!dn[et])return W?m:{};de=Ip(m,et,ge)}}ae||(ae=new Ki);var xt=ae.get(m);if(xt)return xt;ae.set(m,de),By(m)?m.forEach(function(Dt){de.add(zi(Dt,y,_,Dt,m,ae))}):Uf(m)&&m.forEach(function(Dt,nn){de.set(nn,zi(Dt,y,_,nn,m,ae))});var Pt=Ye?ke?wf:vf:ke?Ti:Si,Wt=Je?t:Pt(m);return Fi(Wt||m,function(Dt,nn){Wt&&(nn=Dt,Dt=m[nn]),dl(de,nn,zi(Dt,y,_,nn,m,ae))}),de}function jg(m){var y=Si(m);return function(_){return sp(_,m,y)}}function sp(m,y,_){var R=_.length;if(m==null)return!R;for(m=on(m);R--;){var W=_[R],ae=y[W],de=m[W];if(de===t&&!(W in m)||!ae(de))return!1}return!0}function fl(m,y,_){if(typeof m!="function")throw new Ir(l);return gc(function(){m.apply(t,_)},y)}function uo(m,y,_,R){var W=-1,ae=Gl,de=!0,ge=m.length,ke=[],Ye=y.length;if(!ge)return ke;_&&(y=On(y,Yi(_))),R?(ae=nu,de=!1):y.length>=a&&(ae=io,de=!1,y=new Ns(y));e:for(;++W<ge;){var Je=m[W],et=_==null?Je:_(Je);if(Je=R||Je!==0?Je:0,de&&et===et){for(var dt=Ye;dt--;)if(y[dt]===et)continue e;ke.push(Je)}else ae(y,et,R)||ke.push(Je)}return ke}var js=kp(Bi),tf=kp(uc,!0);function op(m,y){var _=!0;return js(m,function(R,W,ae){return _=!!y(R,W,ae),_}),_}function ka(m,y,_){for(var R=-1,W=m.length;++R<W;){var ae=m[R],de=y(ae);if(de!=null&&(ge===t?de===de&&!er(de):_(de,ge)))var ge=de,ke=ae}return ke}function Ut(m,y,_,R){var W=m.length;for(_=Lt(_),_<0&&(_=-_>W?0:W+_),R=R===t||R>W?W:Lt(R),R<0&&(R+=W),R=_>R?0:ns(R);_<R;)m[_++]=y;return m}function bn(m,y){var _=[];return js(m,function(R,W,ae){y(R,W,ae)&&_.push(R)}),_}function Zt(m,y,_,R,W){var ae=-1,de=m.length;for(_||(_=Ts),W||(W=[]);++ae<de;){var ge=m[ae];y>0&&_(ge)?y>1?Zt(ge,y-1,_,R,W):ba(W,ge):R||(W[W.length]=ge)}return W}var cc=bl(),hl=bl(!0);function Bi(m,y){return m&&cc(m,y,Si)}function uc(m,y){return m&&hl(m,y,Si)}function fo(m,y){return Yr(y,function(_){return Ta(m[_])})}function ea(m,y){y=ks(y,m);for(var _=0,R=y.length;m!=null&&_<R;)m=m[xn(y[_++])];return _&&_==R?m:t}function _g(m,y,_){var R=y(m);return Mt(m)?R:ba(R,_(m))}function tn(m){return m==null?m===t?ze:it:Ji&&Ji in on(m)?Wg(m):ey(m)}function Cu(m,y){return m>y}function lp(m,y){return m!=null&&mn.call(m,y)}function kg(m,y){return m!=null&&y in on(m)}function Eg(m,y,_){return m>=Vn(y,_)&&m<Bn(y,_)}function cp(m,y,_){for(var R=_?nu:Gl,W=m[0].length,ae=m.length,de=ae,ge=Ce(ae),ke=1/0,Ye=[];de--;){var Je=m[de];de&&y&&(Je=On(Je,Yi(y))),ke=Vn(Je.length,ke),ge[de]=!_&&(y||W>=120&&Je.length>=120)?new Ns(de&&Je):t}Je=m[0];var et=-1,dt=ge[0];e:for(;++et<W&&Ye.length<ke;){var xt=Je[et],Pt=y?y(xt):xt;if(xt=_||xt!==0?xt:0,!(dt?io(dt,Pt):R(Ye,Pt,_))){for(de=ae;--de;){var Wt=ge[de];if(!(Wt?io(Wt,Pt):R(m[de],Pt,_)))continue e}dt&&dt.push(Pt),Ye.push(xt)}}return Ye}function up(m,y,_,R){return Bi(m,function(W,ae,de){y(R,_(W),ae,de)}),R}function pl(m,y,_){y=ks(y,m),m=mc(m,y);var R=m==null?m:m[xn(Ui(y))];return R==null?t:gi(R,m,_)}function nf(m){return ei(m)&&tn(m)==we}function dr(m){return ei(m)&&tn(m)==K}function fi(m){return ei(m)&&tn(m)==nt}function ml(m,y,_,R,W){return m===y?!0:m==null||y==null||!ei(m)&&!ei(y)?m!==m&&y!==y:ju(m,y,_,R,ml,W)}function ju(m,y,_,R,W,ae){var de=Mt(m),ge=Mt(y),ke=de?ce:Ei(m),Ye=ge?ce:Ei(y);ke=ke==we?Ke:ke,Ye=Ye==we?Ke:Ye;var Je=ke==Ke,et=Ye==Ke,dt=ke==Ye;if(dt&&jo(m)){if(!jo(y))return!1;de=!0,Je=!1}if(dt&&!Je)return ae||(ae=new Ki),de||Ec(m)?Gg(m,y,_,R,W,ae):Yg(m,y,ke,_,R,W,ae);if(!(_&N)){var xt=Je&&mn.call(m,"__wrapped__"),Pt=et&&mn.call(y,"__wrapped__");if(xt||Pt){var Wt=xt?m.value():m,Dt=Pt?y.value():y;return ae||(ae=new Ki),W(Wt,Dt,_,R,ae)}}return dt?(ae||(ae=new Ki),ki(m,y,_,R,W,ae)):!1}function rf(m){return ei(m)&&Ei(m)==De}function _u(m,y,_,R){var W=_.length,ae=W,de=!R;if(m==null)return!ae;for(m=on(m);W--;){var ge=_[W];if(de&&ge[2]?ge[1]!==m[ge[0]]:!(ge[0]in m))return!1}for(;++W<ae;){ge=_[W];var ke=ge[0],Ye=m[ke],Je=ge[1];if(de&&ge[2]){if(Ye===t&&!(ke in m))return!1}else{var et=new Ki;if(R)var dt=R(Ye,Je,ke,m,y,et);if(!(dt===t?ml(Je,Ye,N|k,R,et):dt))return!1}}return!0}function Wa(m){if(!Yn(m)||kf(m))return!1;var y=Ta(m)?Xh:Rd;return y.test(Ps(m))}function af(m){return ei(m)&&tn(m)==_t}function dp(m){return ei(m)&&Ei(m)==ve}function fp(m){return ei(m)&&Cl(m.length)&&!!hn[tn(m)]}function hp(m){return typeof m=="function"?m:m==null?Ie:typeof m=="object"?Mt(m)?lf(m[0],m[1]):mp(m):ln(m)}function sf(m){if(!Dn(m))return Kr(m);var y=[];for(var _ in on(m))mn.call(m,_)&&_!="constructor"&&y.push(_);return y}function Tg(m){if(!Yn(m))return go(m);var y=Dn(m),_=[];for(var R in m)R=="constructor"&&(y||!mn.call(m,R))||_.push(R);return _}function of(m,y){return m<y}function pp(m,y){var _=-1,R=vi(m)?Ce(m.length):[];return js(m,function(W,ae,de){R[++_]=y(W,ae,de)}),R}function mp(m){var y=Nf(m);return y.length==1&&y[0][2]?Xg(y[0][0],y[0][1]):function(_){return _===m||_u(_,m,y)}}function lf(m,y){return jf(m)&&Kg(y)?Xg(xn(m),y):function(_){var R=ld(_,m);return R===t&&R===y?Dc(_,m):ml(y,R,N|k)}}function ku(m,y,_,R,W){m!==y&&cc(y,function(ae,de){if(W||(W=new Ki),Yn(ae))tv(m,y,de,_,ku,R,W);else{var ge=R?R(Ef(m,de),ae,de+"",m,y,W):t;ge===t&&(ge=ae),Ya(m,de,ge)}},Ti)}function tv(m,y,_,R,W,ae,de){var ge=Ef(m,_),ke=Ef(y,_),Ye=de.get(ke);if(Ye){Ya(m,_,Ye);return}var Je=ae?ae(ge,ke,_+"",m,y,de):t,et=Je===t;if(et){var dt=Mt(ke),xt=!dt&&jo(ke),Pt=!dt&&!xt&&Ec(ke);Je=ke,dt||xt||Pt?Mt(ge)?Je=ge:ai(ge)?Je=xi(ge):xt?(et=!1,Je=Np(ke,!0)):Pt?(et=!1,Je=jp(ke,!0)):Je=[]:ra(ke)||Rs(ke)?(Je=ge,Rs(ge)?Je=Vy(ge):(!Yn(ge)||Ta(ge))&&(Je=Dp(ke))):et=!1}et&&(de.set(ke,Je),W(Je,ke,R,ae,de),de.delete(ke)),Ya(m,_,Je)}function gp(m,y){var _=m.length;if(_)return y+=y<0?_:0,Ea(y,_)?m[y]:t}function yp(m,y,_){y.length?y=On(y,function(ae){return Mt(ae)?function(de){return ea(de,ae.length===1?ae[0]:ae)}:ae}):y=[Ie];var R=-1;y=On(y,Yi(wt()));var W=pp(m,function(ae,de,ge){var ke=On(y,function(Ye){return Ye(ae)});return{criteria:ke,index:++R,value:ae}});return su(W,function(ae,de){return $g(ae,de,_)})}function Ag(m,y){return cf(m,y,function(_,R){return Dc(m,R)})}function cf(m,y,_){for(var R=-1,W=y.length,ae={};++R<W;){var de=y[R],ge=ea(m,de);_(ge,de)&&fc(ae,ks(de,m),ge)}return ae}function Pg(m){return function(y){return ea(y,m)}}function uf(m,y,_,R){var W=R?Wl:$i,ae=-1,de=y.length,ge=m;for(m===y&&(y=xi(y)),_&&(ge=On(m,Yi(_)));++ae<de;)for(var ke=0,Ye=y[ae],Je=_?_(Ye):Ye;(ke=W(ge,Je,ke,R))>-1;)ge!==m&&Yd.call(ge,ke,1),Yd.call(m,ke,1);return m}function xp(m,y){for(var _=m?y.length:0,R=_-1;_--;){var W=y[_];if(_==R||W!==ae){var ae=W;Ea(W)?Yd.call(m,W,1):Pu(m,W)}}return m}function df(m,y){return m+ws(ep()*(y-m+1))}function Dg(m,y,_,R){for(var W=-1,ae=Bn(rc((y-m)/(_||1)),0),de=Ce(ae);ae--;)de[R?ae:++W]=m,m+=_;return de}function bp(m,y){var _="";if(!m||y<1||y>re)return _;do y%2&&(_+=m),y=ws(y/2),y&&(m+=m);while(y);return _}function $t(m,y){return Gu(Mp(m,y,Ie),m+"")}function dc(m){return oc(Mc(m))}function ff(m,y){var _=Mc(m);return Wu(_,_a(y,0,_.length))}function fc(m,y,_,R){if(!Yn(m))return m;y=ks(y,m);for(var W=-1,ae=y.length,de=ae-1,ge=m;ge!=null&&++W<ae;){var ke=xn(y[W]),Ye=_;if(ke==="__proto__"||ke==="constructor"||ke==="prototype")return m;if(W!=de){var Je=ge[ke];Ye=R?R(Je,ke,ge):t,Ye===t&&(Ye=Yn(Je)?Je:Ea(y[W+1])?[]:{})}dl(ge,ke,Ye),ge=ge[ke]}return m}var Eu=ac?function(m,y){return ac.set(m,y),m}:Ie,Tu=pu?function(m,y){return pu(m,"toString",{configurable:!0,enumerable:!1,value:Pe(y),writable:!0})}:Ie;function Ig(m){return Wu(Mc(m))}function Rr(m,y,_){var R=-1,W=m.length;y<0&&(y=-y>W?0:W+y),_=_>W?W:_,_<0&&(_+=W),W=y>_?0:_-y>>>0,y>>>=0;for(var ae=Ce(W);++R<W;)ae[R]=m[R+y];return ae}function Mg(m,y){var _;return js(m,function(R,W,ae){return _=y(R,W,ae),!_}),!!_}function Au(m,y,_){var R=0,W=m==null?R:m.length;if(typeof y=="number"&&y===y&&W<=M){for(;R<W;){var ae=R+W>>>1,de=m[ae];de!==null&&!er(de)&&(_?de<=y:de<y)?R=ae+1:W=ae}return W}return hf(m,y,Ie,_)}function hf(m,y,_,R){var W=0,ae=m==null?0:m.length;if(ae===0)return 0;y=_(y);for(var de=y!==y,ge=y===null,ke=er(y),Ye=y===t;W<ae;){var Je=ws((W+ae)/2),et=_(m[Je]),dt=et!==t,xt=et===null,Pt=et===et,Wt=er(et);if(de)var Dt=R||Pt;else Ye?Dt=Pt&&(R||dt):ge?Dt=Pt&&dt&&(R||!xt):ke?Dt=Pt&&dt&&!xt&&(R||!Wt):xt||Wt?Dt=!1:Dt=R?et<=y:et<y;Dt?W=Je+1:ae=Je}return Vn(ae,se)}function vp(m,y){for(var _=-1,R=m.length,W=0,ae=[];++_<R;){var de=m[_],ge=y?y(de):de;if(!_||!yr(ge,ke)){var ke=ge;ae[W++]=de===0?0:de}}return ae}function pf(m){return typeof m=="number"?m:er(m)?P:+m}function fr(m){if(typeof m=="string")return m;if(Mt(m))return On(m,fr)+"";if(er(m))return lo?lo.call(m):"";var y=m+"";return y=="0"&&1/m==-1/0?"-0":y}function _s(m,y,_){var R=-1,W=Gl,ae=m.length,de=!0,ge=[],ke=ge;if(_)de=!1,W=nu;else if(ae>=a){var Ye=y?null:Vg(m);if(Ye)return Zl(Ye);de=!1,W=io,ke=new Ns}else ke=y?[]:ge;e:for(;++R<ae;){var Je=m[R],et=y?y(Je):Je;if(Je=_||Je!==0?Je:0,de&&et===et){for(var dt=ke.length;dt--;)if(ke[dt]===et)continue e;y&&ke.push(et),ge.push(Je)}else W(ke,et,_)||(ke!==ge&&ke.push(et),ge.push(Je))}return ge}function Pu(m,y){return y=ks(y,m),m=mc(m,y),m==null||delete m[xn(Ui(y))]}function wp(m,y,_,R){return fc(m,y,_(ea(m,y)),R)}function Du(m,y,_,R){for(var W=m.length,ae=R?W:-1;(R?ae--:++ae<W)&&y(m[ae],ae,m););return _?Rr(m,R?0:ae,R?ae+1:W):Rr(m,R?ae+1:0,R?W:ae)}function Rg(m,y){var _=m;return _ instanceof Gt&&(_=_.value()),iu(y,function(R,W){return W.func.apply(W.thisArg,ba([R],W.args))},_)}function Iu(m,y,_){var R=m.length;if(R<2)return R?_s(m[0]):[];for(var W=-1,ae=Ce(R);++W<R;)for(var de=m[W],ge=-1;++ge<R;)ge!=W&&(ae[W]=uo(ae[W]||de,m[ge],y,_));return _s(Zt(ae,1),y,_)}function Sp(m,y,_){for(var R=-1,W=m.length,ae=y.length,de={};++R<W;){var ge=R<ae?y[R]:t;_(de,m[R],ge)}return de}function mf(m){return ai(m)?m:[]}function Mu(m){return typeof m=="function"?m:Ie}function ks(m,y){return Mt(m)?m:jf(m,y)?[m]:Xa(gn(m))}var Og=$t;function ho(m,y,_){var R=m.length;return _=_===t?R:_,!y&&_>=R?m:Rr(m,y,_)}var Lg=Wd||function(m){return An.clearTimeout(m)};function Np(m,y){if(y)return m.slice();var _=m.length,R=il?il(_):new m.constructor(_);return m.copy(R),R}function gl(m){var y=new m.constructor(m.byteLength);return new ic(y).set(new ic(m)),y}function Cp(m,y){var _=y?gl(m.buffer):m.buffer;return new m.constructor(_,m.byteOffset,m.byteLength)}function gf(m){var y=new m.constructor(m.source,za.exec(m));return y.lastIndex=m.lastIndex,y}function Fg(m){return ll?on(ll.call(m)):{}}function jp(m,y){var _=y?gl(m.buffer):m.buffer;return new m.constructor(_,m.byteOffset,m.length)}function Ru(m,y){if(m!==y){var _=m!==t,R=m===null,W=m===m,ae=er(m),de=y!==t,ge=y===null,ke=y===y,Ye=er(y);if(!ge&&!Ye&&!ae&&m>y||ae&&de&&ke&&!ge&&!Ye||R&&de&&ke||!_&&ke||!W)return 1;if(!R&&!ae&&!Ye&&m<y||Ye&&_&&W&&!R&&!ae||ge&&_&&W||!de&&W||!ke)return-1}return 0}function $g(m,y,_){for(var R=-1,W=m.criteria,ae=y.criteria,de=W.length,ge=_.length;++R<de;){var ke=Ru(W[R],ae[R]);if(ke){if(R>=ge)return ke;var Ye=_[R];return ke*(Ye=="desc"?-1:1)}}return m.index-y.index}function _p(m,y,_,R){for(var W=-1,ae=m.length,de=_.length,ge=-1,ke=y.length,Ye=Bn(ae-de,0),Je=Ce(ke+Ye),et=!R;++ge<ke;)Je[ge]=y[ge];for(;++W<de;)(et||W<ae)&&(Je[_[W]]=m[W]);for(;Ye--;)Je[ge++]=m[W++];return Je}function zg(m,y,_,R){for(var W=-1,ae=m.length,de=-1,ge=_.length,ke=-1,Ye=y.length,Je=Bn(ae-ge,0),et=Ce(Je+Ye),dt=!R;++W<Je;)et[W]=m[W];for(var xt=W;++ke<Ye;)et[xt+ke]=y[ke];for(;++de<ge;)(dt||W<ae)&&(et[xt+_[de]]=m[W++]);return et}function xi(m,y){var _=-1,R=m.length;for(y||(y=Ce(R));++_<R;)y[_]=m[_];return y}function hr(m,y,_,R){var W=!_;_||(_={});for(var ae=-1,de=y.length;++ae<de;){var ge=y[ae],ke=R?R(_[ge],m[ge],ge,_,m):t;ke===t&&(ke=m[ge]),W?ja(_,ge,ke):dl(_,ge,ke)}return _}function yf(m,y){return hr(m,Uu(m),y)}function Ou(m,y){return hr(m,Cf(m),y)}function yl(m,y){return function(_,R){var W=Mt(_)?Uh:co,ae=y?y():{};return W(_,m,wt(R,2),ae)}}function xl(m){return $t(function(y,_){var R=-1,W=_.length,ae=W>1?_[W-1]:t,de=W>2?_[2]:t;for(ae=m.length>3&&typeof ae=="function"?(W--,ae):t,de&&Zi(_[0],_[1],de)&&(ae=W<3?t:ae,W=1),y=on(y);++R<W;){var ge=_[R];ge&&m(y,ge,R,ae)}return y})}function kp(m,y){return function(_,R){if(_==null)return _;if(!vi(_))return m(_,R);for(var W=_.length,ae=y?W:-1,de=on(_);(y?ae--:++ae<W)&&R(de[ae],ae,de)!==!1;);return _}}function bl(m){return function(y,_,R){for(var W=-1,ae=on(y),de=R(y),ge=de.length;ge--;){var ke=de[m?ge:++W];if(_(ae[ke],ke,ae)===!1)break}return y}}function Bg(m,y,_){var R=y&E,W=ta(m);function ae(){var de=this&&this!==An&&this instanceof ae?W:m;return de.apply(R?_:this,arguments)}return ae}function Or(m){return function(y){y=gn(y);var _=_i(y)?sr(y):t,R=_?_[0]:y.charAt(0),W=_?ho(_,1).join(""):y.slice(1);return R[m]()+W}}function Xi(m){return function(y){return iu(S(Os(y).replace(Js,"")),m,"")}}function ta(m){return function(){var y=arguments;switch(y.length){case 0:return new m;case 1:return new m(y[0]);case 2:return new m(y[0],y[1]);case 3:return new m(y[0],y[1],y[2]);case 4:return new m(y[0],y[1],y[2],y[3]);case 5:return new m(y[0],y[1],y[2],y[3],y[4]);case 6:return new m(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new m(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var _=Mr(m.prototype),R=m.apply(_,y);return Yn(R)?R:_}}function Ug(m,y,_){var R=ta(m);function W(){for(var ae=arguments.length,de=Ce(ae),ge=ae,ke=wl(W);ge--;)de[ge]=arguments[ge];var Ye=ae<3&&de[0]!==ke&&de[ae-1]!==ke?[]:Ga(de,ke);if(ae-=Ye.length,ae<_)return Ep(m,y,ii,W.placeholder,t,de,Ye,t,t,_-ae);var Je=this&&this!==An&&this instanceof W?R:m;return gi(Je,this,de)}return W}function Es(m){return function(y,_,R){var W=on(y);if(!vi(y)){var ae=wt(_,3);y=Si(y),_=function(ge){return ae(W[ge],ge,W)}}var de=m(y,_,R);return de>-1?W[ae?y[de]:de]:t}}function Qa(m){return Un(function(y){var _=y.length,R=_,W=cr.prototype.thru;for(m&&y.reverse();R--;){var ae=y[R];if(typeof ae!="function")throw new Ir(l);if(W&&!de&&Bu(ae)=="wrapper")var de=new cr([],!0)}for(R=de?R:_;++R<_;){ae=y[R];var ge=Bu(ae),ke=ge=="wrapper"?Sf(ae):t;ke&&_f(ke[0])&&ke[1]==(B|D|O|q)&&!ke[4].length&&ke[9]==1?de=de[Bu(ke[0])].apply(de,ke[3]):de=ae.length==1&&_f(ae)?de[ge]():de.thru(ae)}return function(){var Ye=arguments,Je=Ye[0];if(de&&Ye.length==1&&Mt(Je))return de.plant(Je).value();for(var et=0,dt=_?y[et].apply(this,Ye):Je;++et<_;)dt=y[et].call(this,dt);return dt}})}function ii(m,y,_,R,W,ae,de,ge,ke,Ye){var Je=y&B,et=y&E,dt=y&T,xt=y&(D|U),Pt=y&H,Wt=dt?t:ta(m);function Dt(){for(var nn=arguments.length,cn=Ce(nn),Pa=nn;Pa--;)cn[Pa]=arguments[Pa];if(xt)var Br=wl(Dt),Da=Wh(cn,Br);if(R&&(cn=_p(cn,R,W,xt)),ae&&(cn=zg(cn,ae,de,xt)),nn-=Da,xt&&nn<Ye){var Ni=Ga(cn,Br);return Ep(m,y,ii,Dt.placeholder,_,cn,Ni,ge,ke,Ye-nn)}var Ls=et?_:this,jl=dt?Ls[m]:m;return nn=cn.length,ge?cn=Ka(cn,ge):Pt&&nn>1&&cn.reverse(),Je&&ke<nn&&(cn.length=ke),this&&this!==An&&this instanceof Dt&&(jl=Wt||ta(jl)),jl.apply(Ls,cn)}return Dt}function Lu(m,y){return function(_,R){return up(_,m,y(R),{})}}function hc(m,y){return function(_,R){var W;if(_===t&&R===t)return y;if(_!==t&&(W=_),R!==t){if(W===t)return R;typeof _=="string"||typeof R=="string"?(_=fr(_),R=fr(R)):(_=pf(_),R=pf(R)),W=m(_,R)}return W}}function Fu(m){return Un(function(y){return y=On(y,Yi(wt())),$t(function(_){var R=this;return m(y,function(W){return gi(W,R,_)})})})}function $u(m,y){y=y===t?" ":fr(y);var _=y.length;if(_<2)return _?bp(y,m):y;var R=bp(y,rc(m/Wr(y)));return _i(y)?ho(sr(R),0,m).join(""):R.slice(0,m)}function qg(m,y,_,R){var W=y&E,ae=ta(m);function de(){for(var ge=-1,ke=arguments.length,Ye=-1,Je=R.length,et=Ce(Je+ke),dt=this&&this!==An&&this instanceof de?ae:m;++Ye<Je;)et[Ye]=R[Ye];for(;ke--;)et[Ye++]=arguments[++ge];return gi(dt,W?_:this,et)}return de}function po(m){return function(y,_,R){return R&&typeof R!="number"&&Zi(y,_,R)&&(_=R=t),y=ts(y),_===t?(_=y,y=0):_=ts(_),R=R===t?y<_?1:-1:ts(R),Dg(y,_,R,m)}}function vl(m){return function(y,_){return typeof y=="string"&&typeof _=="string"||(y=aa(y),_=aa(_)),m(y,_)}}function Ep(m,y,_,R,W,ae,de,ge,ke,Ye){var Je=y&D,et=Je?de:t,dt=Je?t:de,xt=Je?ae:t,Pt=Je?t:ae;y|=Je?O:$,y&=~(Je?$:O),y&I||(y&=-4);var Wt=[m,y,W,xt,et,Pt,dt,ge,ke,Ye],Dt=_.apply(t,Wt);return _f(m)&&Tf(Dt,Wt),Dt.placeholder=R,Af(Dt,m,y)}function xf(m){var y=di[m];return function(_,R){if(_=aa(_),R=R==null?0:Vn(Lt(R),292),R&&mu(_)){var W=(gn(_)+"e").split("e"),ae=y(W[0]+"e"+(+W[1]+R));return W=(gn(ae)+"e").split("e"),+(W[0]+"e"+(+W[1]-R))}return y(_)}}var Vg=Xt&&1/Zl(new Xt([,-0]))[1]==z?function(m){return new Xt(m)}:mt;function zu(m){return function(y){var _=Ei(y);return _==De?Xl(y):_==ve?Qh(y):Yh(y,m(y))}}function Ja(m,y,_,R,W,ae,de,ge){var ke=y&T;if(!ke&&typeof m!="function")throw new Ir(l);var Ye=R?R.length:0;if(Ye||(y&=-97,R=W=t),de=de===t?de:Bn(Lt(de),0),ge=ge===t?ge:Lt(ge),Ye-=W?W.length:0,y&$){var Je=R,et=W;R=W=t}var dt=ke?t:Sf(m),xt=[m,y,_,R,W,Je,et,ae,de,ge];if(dt&&Hu(xt,dt),m=xt[0],y=xt[1],_=xt[2],R=xt[3],W=xt[4],ge=xt[9]=xt[9]===t?ke?0:m.length:Bn(xt[9]-Ye,0),!ge&&y&(D|U)&&(y&=-25),!y||y==E)var Pt=Bg(m,y,_);else y==D||y==U?Pt=Ug(m,y,ge):(y==O||y==(E|O))&&!W.length?Pt=qg(m,y,_,R):Pt=ii.apply(t,xt);var Wt=dt?Eu:Tf;return Af(Wt(Pt,xt),m,y)}function bf(m,y,_,R){return m===t||yr(m,tc[_])&&!mn.call(R,_)?y:m}function Tp(m,y,_,R,W,ae){return Yn(m)&&Yn(y)&&(ae.set(y,m),ku(m,y,t,Tp,ae),ae.delete(y)),m}function Hg(m){return ra(m)?t:m}function Gg(m,y,_,R,W,ae){var de=_&N,ge=m.length,ke=y.length;if(ge!=ke&&!(de&&ke>ge))return!1;var Ye=ae.get(m),Je=ae.get(y);if(Ye&&Je)return Ye==y&&Je==m;var et=-1,dt=!0,xt=_&k?new Ns:t;for(ae.set(m,y),ae.set(y,m);++et<ge;){var Pt=m[et],Wt=y[et];if(R)var Dt=de?R(Wt,Pt,et,y,m,ae):R(Pt,Wt,et,m,y,ae);if(Dt!==t){if(Dt)continue;dt=!1;break}if(xt){if(!ru(y,function(nn,cn){if(!io(xt,cn)&&(Pt===nn||W(Pt,nn,_,R,ae)))return xt.push(cn)})){dt=!1;break}}else if(!(Pt===Wt||W(Pt,Wt,_,R,ae))){dt=!1;break}}return ae.delete(m),ae.delete(y),dt}function Yg(m,y,_,R,W,ae,de){switch(_){case Se:if(m.byteLength!=y.byteLength||m.byteOffset!=y.byteOffset)return!1;m=m.buffer,y=y.buffer;case K:return!(m.byteLength!=y.byteLength||!ae(new ic(m),new ic(y)));case Ne:case nt:case Ve:return yr(+m,+y);case je:return m.name==y.name&&m.message==y.message;case _t:case qe:return m==y+"";case De:var ge=Xl;case ve:var ke=R&N;if(ge||(ge=Zl),m.size!=y.size&&!ke)return!1;var Ye=de.get(m);if(Ye)return Ye==y;R|=k,de.set(m,y);var Je=Gg(ge(m),ge(y),R,W,ae,de);return de.delete(m),Je;case We:if(ll)return ll.call(m)==ll.call(y)}return!1}function ki(m,y,_,R,W,ae){var de=_&N,ge=vf(m),ke=ge.length,Ye=vf(y),Je=Ye.length;if(ke!=Je&&!de)return!1;for(var et=ke;et--;){var dt=ge[et];if(!(de?dt in y:mn.call(y,dt)))return!1}var xt=ae.get(m),Pt=ae.get(y);if(xt&&Pt)return xt==y&&Pt==m;var Wt=!0;ae.set(m,y),ae.set(y,m);for(var Dt=de;++et<ke;){dt=ge[et];var nn=m[dt],cn=y[dt];if(R)var Pa=de?R(cn,nn,dt,y,m,ae):R(nn,cn,dt,m,y,ae);if(!(Pa===t?nn===cn||W(nn,cn,_,R,ae):Pa)){Wt=!1;break}Dt||(Dt=dt=="constructor")}if(Wt&&!Dt){var Br=m.constructor,Da=y.constructor;Br!=Da&&"constructor"in m&&"constructor"in y&&!(typeof Br=="function"&&Br instanceof Br&&typeof Da=="function"&&Da instanceof Da)&&(Wt=!1)}return ae.delete(m),ae.delete(y),Wt}function Un(m){return Gu(Mp(m,t,mr),m+"")}function vf(m){return _g(m,Si,Uu)}function wf(m){return _g(m,Ti,Cf)}var Sf=ac?function(m){return ac.get(m)}:mt;function Bu(m){for(var y=m.name+"",_=Xr[y],R=mn.call(Xr,y)?_.length:0;R--;){var W=_[R],ae=W.func;if(ae==null||ae==m)return W.name}return y}function wl(m){var y=mn.call(Z,"placeholder")?Z:m;return y.placeholder}function wt(){var m=Z.iteratee||kt;return m=m===kt?hp:m,arguments.length?m(arguments[0],arguments[1]):m}function pc(m,y){var _=m.__data__;return As(y)?_[typeof y=="string"?"string":"hash"]:_.map}function Nf(m){for(var y=Si(m),_=y.length;_--;){var R=y[_],W=m[R];y[_]=[R,W,Kg(W)]}return y}function mo(m,y){var _=ou(m,y);return Wa(_)?_:t}function Wg(m){var y=mn.call(m,Ji),_=m[Ji];try{m[Ji]=t;var R=!0}catch{}var W=Qi.call(m);return R&&(y?m[Ji]=_:delete m[Ji]),W}var Uu=so?function(m){return m==null?[]:(m=on(m),Yr(so(m),function(y){return rl.call(m,y)}))}:Fv,Cf=so?function(m){for(var y=[];m;)ba(y,Uu(m)),m=fu(m);return y}:Fv,Ei=tn;(gu&&Ei(new gu(new ArrayBuffer(1)))!=Se||yi&&Ei(new yi)!=De||Hn&&Ei(Hn.resolve())!=rt||Xt&&Ei(new Xt)!=ve||Ca&&Ei(new Ca)!=J)&&(Ei=function(m){var y=tn(m),_=y==Ke?m.constructor:t,R=_?Ps(_):"";if(R)switch(R){case pg:return Se;case mg:return De;case yu:return rt;case xu:return ve;case gg:return J}return y});function Qg(m,y,_){for(var R=-1,W=_.length;++R<W;){var ae=_[R],de=ae.size;switch(ae.type){case"drop":m+=de;break;case"dropRight":y-=de;break;case"take":y=Vn(y,m+de);break;case"takeRight":m=Bn(m,y-de);break}}return{start:m,end:y}}function Ap(m){var y=m.match(Bh);return y?y[1].split(Md):[]}function qu(m,y,_){y=ks(y,m);for(var R=-1,W=y.length,ae=!1;++R<W;){var de=xn(y[R]);if(!(ae=m!=null&&_(m,de)))break;m=m[de]}return ae||++R!=W?ae:(W=m==null?0:m.length,!!W&&Cl(W)&&Ea(de,W)&&(Mt(m)||Rs(m)))}function Pp(m){var y=m.length,_=new m.constructor(y);return y&&typeof m[0]=="string"&&mn.call(m,"index")&&(_.index=m.index,_.input=m.input),_}function Dp(m){return typeof m.constructor=="function"&&!Dn(m)?Mr(fu(m)):{}}function Ip(m,y,_){var R=m.constructor;switch(y){case K:return gl(m);case Ne:case nt:return new R(+m);case Se:return Cp(m,_);case Ee:case Be:case at:case gt:case pt:case Ue:case Ze:case Fe:case ct:return jp(m,_);case De:return new R;case Ve:case qe:return new R(m);case _t:return gf(m);case ve:return new R;case We:return Fg(m)}}function Jg(m,y){var _=y.length;if(!_)return m;var R=_-1;return y[R]=(_>1?"& ":"")+y[R],y=y.join(_>2?", ":" "),m.replace(zh,`{
/* [wrapped with `+y+`] */
`)}function Ts(m){return Mt(m)||Rs(m)||!!(or&&m&&m[or])}function Ea(m,y){var _=typeof m;return y=y??re,!!y&&(_=="number"||_!="symbol"&&fs.test(m))&&m>-1&&m%1==0&&m<y}function Zi(m,y,_){if(!Yn(_))return!1;var R=typeof y;return(R=="number"?vi(_)&&Ea(y,_.length):R=="string"&&y in _)?yr(_[y],m):!1}function jf(m,y){if(Mt(m))return!1;var _=typeof m;return _=="number"||_=="symbol"||_=="boolean"||m==null||er(m)?!0:_r.test(m)||!ma.test(m)||y!=null&&m in on(y)}function As(m){var y=typeof m;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?m!=="__proto__":m===null}function _f(m){var y=Bu(m),_=Z[y];if(typeof _!="function"||!(y in Gt.prototype))return!1;if(m===_)return!0;var R=Sf(_);return!!R&&m===R[0]}function kf(m){return!!Kh&&Kh in m}var Vu=uu?Ta:$v;function Dn(m){var y=m&&m.constructor,_=typeof y=="function"&&y.prototype||tc;return m===_}function Kg(m){return m===m&&!Yn(m)}function Xg(m,y){return function(_){return _==null?!1:_[m]===y&&(y!==t||m in on(_))}}function Zg(m){var y=nd(m,function(R){return _.size===u&&_.clear(),R}),_=y.cache;return y}function Hu(m,y){var _=m[1],R=y[1],W=_|R,ae=W<(E|T|B),de=R==B&&_==D||R==B&&_==q&&m[7].length<=y[8]||R==(B|q)&&y[7].length<=y[8]&&_==D;if(!(ae||de))return m;R&E&&(m[2]=y[2],W|=_&E?0:I);var ge=y[3];if(ge){var ke=m[3];m[3]=ke?_p(ke,ge,y[4]):ge,m[4]=ke?Ga(m[3],p):y[4]}return ge=y[5],ge&&(ke=m[5],m[5]=ke?zg(ke,ge,y[6]):ge,m[6]=ke?Ga(m[5],p):y[6]),ge=y[7],ge&&(m[7]=ge),R&B&&(m[8]=m[8]==null?y[8]:Vn(m[8],y[8])),m[9]==null&&(m[9]=y[9]),m[0]=y[0],m[1]=W,m}function go(m){var y=[];if(m!=null)for(var _ in on(m))y.push(_);return y}function ey(m){return Qi.call(m)}function Mp(m,y,_){return y=Bn(y===t?m.length-1:y,0),function(){for(var R=arguments,W=-1,ae=Bn(R.length-y,0),de=Ce(ae);++W<ae;)de[W]=R[y+W];W=-1;for(var ge=Ce(y+1);++W<y;)ge[W]=R[W];return ge[y]=_(de),gi(m,this,ge)}}function mc(m,y){return y.length<2?m:ea(m,Rr(y,0,-1))}function Ka(m,y){for(var _=m.length,R=Vn(y.length,_),W=xi(m);R--;){var ae=y[R];m[R]=Ea(ae,_)?W[ae]:t}return m}function Ef(m,y){if(!(y==="constructor"&&typeof m[y]=="function")&&y!="__proto__")return m[y]}var Tf=Yu(Eu),gc=Zh||function(m,y){return An.setTimeout(m,y)},Gu=Yu(Tu);function Af(m,y,_){var R=y+"";return Gu(m,Jg(R,ty(Ap(R),_)))}function Yu(m){var y=0,_=0;return function(){var R=Ss(),W=ne-(R-_);if(_=R,W>0){if(++y>=Q)return arguments[0]}else y=0;return m.apply(t,arguments)}}function Wu(m,y){var _=-1,R=m.length,W=R-1;for(y=y===t?R:y;++_<y;){var ae=df(_,W),de=m[ae];m[ae]=m[_],m[_]=de}return m.length=y,m}var Xa=Zg(function(m){var y=[];return m.charCodeAt(0)===46&&y.push(""),m.replace(ti,function(_,R,W,ae){y.push(W?ae.replace(Vs,"$1"):R||_)}),y});function xn(m){if(typeof m=="string"||er(m))return m;var y=m+"";return y=="0"&&1/m==-1/0?"-0":y}function Ps(m){if(m!=null){try{return du.call(m)}catch{}try{return m+""}catch{}}return""}function ty(m,y){return Fi(fe,function(_){var R="_."+_[0];y&_[1]&&!Gl(m,R)&&m.push(R)}),m.sort()}function bi(m){if(m instanceof Gt)return m.clone();var y=new cr(m.__wrapped__,m.__chain__);return y.__actions__=xi(m.__actions__),y.__index__=m.__index__,y.__values__=m.__values__,y}function nv(m,y,_){(_?Zi(m,y,_):y===t)?y=1:y=Bn(Lt(y),0);var R=m==null?0:m.length;if(!R||y<1)return[];for(var W=0,ae=0,de=Ce(rc(R/y));W<R;)de[ae++]=Rr(m,W,W+=y);return de}function ny(m){for(var y=-1,_=m==null?0:m.length,R=0,W=[];++y<_;){var ae=m[y];ae&&(W[R++]=ae)}return W}function iy(){var m=arguments.length;if(!m)return[];for(var y=Ce(m-1),_=arguments[0],R=m;R--;)y[R-1]=arguments[R];return ba(Mt(_)?xi(_):[_],Zt(y,1))}var Gn=$t(function(m,y){return ai(m)?uo(m,Zt(y,1,ai,!0)):[]}),pr=$t(function(m,y){var _=Ui(y);return ai(_)&&(_=t),ai(m)?uo(m,Zt(y,1,ai,!0),wt(_,2)):[]}),Ds=$t(function(m,y){var _=Ui(y);return ai(_)&&(_=t),ai(m)?uo(m,Zt(y,1,ai,!0),t,_):[]});function ry(m,y,_){var R=m==null?0:m.length;return R?(y=_||y===t?1:Lt(y),Rr(m,y<0?0:y,R)):[]}function ay(m,y,_){var R=m==null?0:m.length;return R?(y=_||y===t?1:Lt(y),y=R-y,Rr(m,0,y<0?0:y)):[]}function iv(m,y){return m&&m.length?Du(m,wt(y,3),!0,!0):[]}function Rp(m,y){return m&&m.length?Du(m,wt(y,3),!0):[]}function Lr(m,y,_,R){var W=m==null?0:m.length;return W?(_&&typeof _!="number"&&Zi(m,y,_)&&(_=0,R=W),Ut(m,y,_,R)):[]}function na(m,y,_){var R=m==null?0:m.length;if(!R)return-1;var W=_==null?0:Lt(_);return W<0&&(W=Bn(R+W,0)),Pr(m,wt(y,3),W)}function Op(m,y,_){var R=m==null?0:m.length;if(!R)return-1;var W=R-1;return _!==t&&(W=Lt(_),W=_<0?Bn(R+W,0):Vn(W,R-1)),Pr(m,wt(y,3),W,!0)}function mr(m){var y=m==null?0:m.length;return y?Zt(m,1):[]}function sy(m){var y=m==null?0:m.length;return y?Zt(m,z):[]}function yo(m,y){var _=m==null?0:m.length;return _?(y=y===t?1:Lt(y),Zt(m,y)):[]}function Sl(m){for(var y=-1,_=m==null?0:m.length,R={};++y<_;){var W=m[y];R[W[0]]=W[1]}return R}function Is(m){return m&&m.length?m[0]:t}function Lp(m,y,_){var R=m==null?0:m.length;if(!R)return-1;var W=_==null?0:Lt(_);return W<0&&(W=Bn(R+W,0)),$i(m,y,W)}function Fp(m){var y=m==null?0:m.length;return y?Rr(m,0,-1):[]}var Za=$t(function(m){var y=On(m,mf);return y.length&&y[0]===m[0]?cp(y):[]}),oy=$t(function(m){var y=Ui(m),_=On(m,mf);return y===Ui(_)?y=t:_.pop(),_.length&&_[0]===m[0]?cp(_,wt(y,2)):[]}),yc=$t(function(m){var y=Ui(m),_=On(m,mf);return y=typeof y=="function"?y:t,y&&_.pop(),_.length&&_[0]===m[0]?cp(_,t,y):[]});function Qu(m,y){return m==null?"":Jr.call(m,y)}function Ui(m){var y=m==null?0:m.length;return y?m[y-1]:t}function xc(m,y,_){var R=m==null?0:m.length;if(!R)return-1;var W=R;return _!==t&&(W=Lt(_),W=W<0?Bn(R+W,0):Vn(W,R-1)),y===y?Wi(m,y,W):Pr(m,vs,W,!0)}function ly(m,y){return m&&m.length?gp(m,Lt(y)):t}var cy=$t(bc);function bc(m,y){return m&&m.length&&y&&y.length?uf(m,y):m}function uy(m,y,_){return m&&m.length&&y&&y.length?uf(m,y,wt(_,2)):m}function Pf(m,y,_){return m&&m.length&&y&&y.length?uf(m,y,t,_):m}var dy=Un(function(m,y){var _=m==null?0:m.length,R=Nu(m,y);return xp(m,On(y,function(W){return Ea(W,_)?+W:W}).sort(Ru)),R});function rv(m,y){var _=[];if(!(m&&m.length))return _;var R=-1,W=[],ae=m.length;for(y=wt(y,3);++R<ae;){var de=m[R];y(de,R,m)&&(_.push(de),W.push(R))}return xp(m,W),_}function $p(m){return m==null?m:tp.call(m)}function vn(m,y,_){var R=m==null?0:m.length;return R?(_&&typeof _!="number"&&Zi(m,y,_)?(y=0,_=R):(y=y==null?0:Lt(y),_=_===t?R:Lt(_)),Rr(m,y,_)):[]}function Ln(m,y){return Au(m,y)}function Jt(m,y,_){return hf(m,y,wt(_,2))}function sn(m,y){var _=m==null?0:m.length;if(_){var R=Au(m,y);if(R<_&&yr(m[R],y))return R}return-1}function wn(m,y){return Au(m,y,!0)}function Fr(m,y,_){return hf(m,y,wt(_,2),!0)}function xo(m,y){var _=m==null?0:m.length;if(_){var R=Au(m,y,!0)-1;if(yr(m[R],y))return R}return-1}function vc(m){return m&&m.length?vp(m):[]}function zp(m,y){return m&&m.length?vp(m,wt(y,2)):[]}function Ms(m){var y=m==null?0:m.length;return y?Rr(m,1,y):[]}function ri(m,y,_){return m&&m.length?(y=_||y===t?1:Lt(y),Rr(m,0,y<0?0:y)):[]}function bo(m,y,_){var R=m==null?0:m.length;return R?(y=_||y===t?1:Lt(y),y=R-y,Rr(m,y<0?0:y,R)):[]}function Nl(m,y){return m&&m.length?Du(m,wt(y,3),!1,!0):[]}function Bp(m,y){return m&&m.length?Du(m,wt(y,3)):[]}var ia=$t(function(m){return _s(Zt(m,1,ai,!0))}),wc=$t(function(m){var y=Ui(m);return ai(y)&&(y=t),_s(Zt(m,1,ai,!0),wt(y,2))}),Ju=$t(function(m){var y=Ui(m);return y=typeof y=="function"?y:t,_s(Zt(m,1,ai,!0),t,y)});function gr(m){return m&&m.length?_s(m):[]}function Up(m,y){return m&&m.length?_s(m,wt(y,2)):[]}function qp(m,y){return y=typeof y=="function"?y:t,m&&m.length?_s(m,t,y):[]}function Sc(m){if(!(m&&m.length))return[];var y=0;return m=Yr(m,function(_){if(ai(_))return y=Bn(_.length,y),!0}),wa(y,function(_){return On(m,tl(_))})}function Ku(m,y){if(!(m&&m.length))return[];var _=Sc(m);return y==null?_:On(_,function(R){return gi(y,t,R)})}var vo=$t(function(m,y){return ai(m)?uo(m,y):[]}),Mi=$t(function(m){return Iu(Yr(m,ai))}),wo=$t(function(m){var y=Ui(m);return ai(y)&&(y=t),Iu(Yr(m,ai),wt(y,2))}),Nc=$t(function(m){var y=Ui(m);return y=typeof y=="function"?y:t,Iu(Yr(m,ai),t,y)}),Cc=$t(Sc);function Vp(m,y){return Sp(m||[],y||[],dl)}function Hp(m,y){return Sp(m||[],y||[],fc)}var fy=$t(function(m){var y=m.length,_=y>1?m[y-1]:t;return _=typeof _=="function"?(m.pop(),_):t,Ku(m,_)});function jc(m){var y=Z(m);return y.__chain__=!0,y}function Gp(m,y){return y(m),m}function qi(m,y){return y(m)}var hy=Un(function(m){var y=m.length,_=y?m[0]:0,R=this.__wrapped__,W=function(ae){return Nu(ae,m)};return y>1||this.__actions__.length||!(R instanceof Gt)||!Ea(_)?this.thru(W):(R=R.slice(_,+_+(y?1:0)),R.__actions__.push({func:qi,args:[W],thisArg:t}),new cr(R,this.__chain__).thru(function(ae){return y&&!ae.length&&ae.push(t),ae}))});function $r(){return jc(this)}function py(){return new cr(this.value(),this.__chain__)}function my(){this.__values__===t&&(this.__values__=zr(this.value()));var m=this.__index__>=this.__values__.length,y=m?t:this.__values__[this.__index__++];return{done:m,value:y}}function av(){return this}function So(m){for(var y,_=this;_ instanceof Zr;){var R=bi(_);R.__index__=0,R.__values__=t,y?W.__wrapped__=R:y=R;var W=R;_=_.__wrapped__}return W.__wrapped__=m,y}function Df(){var m=this.__wrapped__;if(m instanceof Gt){var y=m;return this.__actions__.length&&(y=new Gt(this)),y=y.reverse(),y.__actions__.push({func:qi,args:[$p],thisArg:t}),new cr(y,this.__chain__)}return this.thru($p)}function Yp(){return Rg(this.__wrapped__,this.__actions__)}var _c=yl(function(m,y,_){mn.call(m,_)?++m[_]:ja(m,_,1)});function gy(m,y,_){var R=Mt(m)?$d:op;return _&&Zi(m,y,_)&&(y=t),R(m,wt(y,3))}function yy(m,y){var _=Mt(m)?Yr:bn;return _(m,wt(y,3))}var xy=Es(na),Wp=Es(Op);function Qp(m,y){return Zt(Xu(m,y),1)}function sv(m,y){return Zt(Xu(m,y),z)}function ov(m,y,_){return _=_===t?1:Lt(_),Zt(Xu(m,y),_)}function by(m,y){var _=Mt(m)?Fi:js;return _(m,wt(y,3))}function Jp(m,y){var _=Mt(m)?qh:tf;return _(m,wt(y,3))}var vy=yl(function(m,y,_){mn.call(m,_)?m[_].push(y):ja(m,_,[y])});function kc(m,y,_,R){m=vi(m)?m:Mc(m),_=_&&!R?Lt(_):0;var W=m.length;return _<0&&(_=Bn(W+_,0)),Vf(m)?_<=W&&m.indexOf(y,_)>-1:!!W&&$i(m,y,_)>-1}var If=$t(function(m,y,_){var R=-1,W=typeof y=="function",ae=vi(m)?Ce(m.length):[];return js(m,function(de){ae[++R]=W?gi(y,de,_):pl(de,y,_)}),ae}),wy=yl(function(m,y,_){ja(m,_,y)});function Xu(m,y){var _=Mt(m)?On:pp;return _(m,wt(y,3))}function Sy(m,y,_,R){return m==null?[]:(Mt(y)||(y=y==null?[]:[y]),_=R?t:_,Mt(_)||(_=_==null?[]:[_]),yp(m,y,_))}var Ny=yl(function(m,y,_){m[_?0:1].push(y)},function(){return[[],[]]});function Cy(m,y,_){var R=Mt(m)?iu:Ql,W=arguments.length<3;return R(m,wt(y,4),_,W,js)}function jy(m,y,_){var R=Mt(m)?Vh:Ql,W=arguments.length<3;return R(m,wt(y,4),_,W,tf)}function Mf(m,y){var _=Mt(m)?Yr:bn;return _(m,id(wt(y,3)))}function _y(m){var y=Mt(m)?oc:dc;return y(m)}function ky(m,y,_){(_?Zi(m,y,_):y===t)?y=1:y=Lt(y);var R=Mt(m)?Ng:ff;return R(m,y)}function In(m){var y=Mt(m)?Cg:Ig;return y(m)}function Kp(m){if(m==null)return 0;if(vi(m))return Vf(m)?Wr(m):m.length;var y=Ei(m);return y==De||y==ve?m.size:sf(m).length}function lv(m,y,_){var R=Mt(m)?ru:Mg;return _&&Zi(m,y,_)&&(y=t),R(m,wt(y,3))}var Ey=$t(function(m,y){if(m==null)return[];var _=y.length;return _>1&&Zi(m,y[0],y[1])?y=[]:_>2&&Zi(y[0],y[1],y[2])&&(y=[y[0]]),yp(m,Zt(y,1),[])}),Rf=sl||function(){return An.Date.now()};function cv(m,y){if(typeof y!="function")throw new Ir(l);return m=Lt(m),function(){if(--m<1)return y.apply(this,arguments)}}function Ty(m,y,_){return y=_?t:y,y=m&&y==null?m.length:y,Ja(m,B,t,t,t,t,y)}function Zu(m,y){var _;if(typeof y!="function")throw new Ir(l);return m=Lt(m),function(){return--m>0&&(_=y.apply(this,arguments)),m<=1&&(y=t),_}}var No=$t(function(m,y,_){var R=E;if(_.length){var W=Ga(_,wl(No));R|=O}return Ja(m,R,y,_,W)}),Of=$t(function(m,y,_){var R=E|T;if(_.length){var W=Ga(_,wl(Of));R|=O}return Ja(y,R,m,_,W)});function ed(m,y,_){y=_?t:y;var R=Ja(m,D,t,t,t,t,t,y);return R.placeholder=ed.placeholder,R}function Lf(m,y,_){y=_?t:y;var R=Ja(m,U,t,t,t,t,t,y);return R.placeholder=Lf.placeholder,R}function Co(m,y,_){var R,W,ae,de,ge,ke,Ye=0,Je=!1,et=!1,dt=!0;if(typeof m!="function")throw new Ir(l);y=aa(y)||0,Yn(_)&&(Je=!!_.leading,et="maxWait"in _,ae=et?Bn(aa(_.maxWait)||0,y):ae,dt="trailing"in _?!!_.trailing:dt);function xt(Ni){var Ls=R,jl=W;return R=W=t,Ye=Ni,de=m.apply(jl,Ls),de}function Pt(Ni){return Ye=Ni,ge=gc(nn,y),Je?xt(Ni):de}function Wt(Ni){var Ls=Ni-ke,jl=Ni-Ye,sS=y-Ls;return et?Vn(sS,ae-jl):sS}function Dt(Ni){var Ls=Ni-ke,jl=Ni-Ye;return ke===t||Ls>=y||Ls<0||et&&jl>=ae}function nn(){var Ni=Rf();if(Dt(Ni))return cn(Ni);ge=gc(nn,Wt(Ni))}function cn(Ni){return ge=t,dt&&R?xt(Ni):(R=W=t,de)}function Pa(){ge!==t&&Lg(ge),Ye=0,R=ke=W=ge=t}function Br(){return ge===t?de:cn(Rf())}function Da(){var Ni=Rf(),Ls=Dt(Ni);if(R=arguments,W=this,ke=Ni,Ls){if(ge===t)return Pt(ke);if(et)return Lg(ge),ge=gc(nn,y),xt(ke)}return ge===t&&(ge=gc(nn,y)),de}return Da.cancel=Pa,Da.flush=Br,Da}var es=$t(function(m,y){return fl(m,1,y)}),td=$t(function(m,y,_){return fl(m,aa(y)||0,_)});function uv(m){return Ja(m,H)}function nd(m,y){if(typeof m!="function"||y!=null&&typeof y!="function")throw new Ir(l);var _=function(){var R=arguments,W=y?y.apply(this,R):R[0],ae=_.cache;if(ae.has(W))return ae.get(W);var de=m.apply(this,R);return _.cache=ae.set(W,de)||ae,de};return _.cache=new(nd.Cache||ur),_}nd.Cache=ur;function id(m){if(typeof m!="function")throw new Ir(l);return function(){var y=arguments;switch(y.length){case 0:return!m.call(this);case 1:return!m.call(this,y[0]);case 2:return!m.call(this,y[0],y[1]);case 3:return!m.call(this,y[0],y[1],y[2])}return!m.apply(this,y)}}function Ay(m){return Zu(2,m)}var Py=Og(function(m,y){y=y.length==1&&Mt(y[0])?On(y[0],Yi(wt())):On(Zt(y,1),Yi(wt()));var _=y.length;return $t(function(R){for(var W=-1,ae=Vn(R.length,_);++W<ae;)R[W]=y[W].call(this,R[W]);return gi(m,this,R)})}),Xp=$t(function(m,y){var _=Ga(y,wl(Xp));return Ja(m,O,t,y,_)}),Ff=$t(function(m,y){var _=Ga(y,wl(Ff));return Ja(m,$,t,y,_)}),Dy=Un(function(m,y){return Ja(m,q,t,t,t,y)});function Iy(m,y){if(typeof m!="function")throw new Ir(l);return y=y===t?y:Lt(y),$t(m,y)}function dv(m,y){if(typeof m!="function")throw new Ir(l);return y=y==null?0:Bn(Lt(y),0),$t(function(_){var R=_[y],W=ho(_,0,y);return R&&ba(W,R),gi(m,this,W)})}function Zp(m,y,_){var R=!0,W=!0;if(typeof m!="function")throw new Ir(l);return Yn(_)&&(R="leading"in _?!!_.leading:R,W="trailing"in _?!!_.trailing:W),Co(m,y,{leading:R,maxWait:y,trailing:W})}function em(m){return Ty(m,1)}function fv(m,y){return Xp(Mu(y),m)}function hv(){if(!arguments.length)return[];var m=arguments[0];return Mt(m)?m:[m]}function rd(m){return zi(m,v)}function pv(m,y){return y=typeof y=="function"?y:t,zi(m,v,y)}function My(m){return zi(m,g|v)}function Kt(m,y){return y=typeof y=="function"?y:t,zi(m,g|v,y)}function tm(m,y){return y==null||sp(m,y,Si(y))}function yr(m,y){return m===y||m!==m&&y!==y}var nm=vl(Cu),Ry=vl(function(m,y){return m>=y}),Rs=nf(function(){return arguments}())?nf:function(m){return ei(m)&&mn.call(m,"callee")&&!rl.call(m,"callee")},Mt=Ce.isArray,$f=Zs?Yi(Zs):dr;function vi(m){return m!=null&&Cl(m.length)&&!Ta(m)}function ai(m){return ei(m)&&vi(m)}function mv(m){return m===!0||m===!1||ei(m)&&tn(m)==Ne}var jo=Qd||$v,Oy=Ha?Yi(Ha):fi;function Ly(m){return ei(m)&&m.nodeType===1&&!ra(m)}function zf(m){if(m==null)return!0;if(vi(m)&&(Mt(m)||typeof m=="string"||typeof m.splice=="function"||jo(m)||Ec(m)||Rs(m)))return!m.length;var y=Ei(m);if(y==De||y==ve)return!m.size;if(Dn(m))return!sf(m).length;for(var _ in m)if(mn.call(m,_))return!1;return!0}function kn(m,y){return ml(m,y)}function im(m,y,_){_=typeof _=="function"?_:t;var R=_?_(m,y):t;return R===t?ml(m,y,t,_):!!R}function wi(m){if(!ei(m))return!1;var y=tn(m);return y==je||y==ut||typeof m.message=="string"&&typeof m.name=="string"&&!ra(m)}function gv(m){return typeof m=="number"&&mu(m)}function Ta(m){if(!Yn(m))return!1;var y=tn(m);return y==ye||y==Ae||y==Le||y==Ft}function Bf(m){return typeof m=="number"&&m==Lt(m)}function Cl(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=re}function Yn(m){var y=typeof m;return m!=null&&(y=="object"||y=="function")}function ei(m){return m!=null&&typeof m=="object"}var Uf=Fd?Yi(Fd):rf;function rm(m,y){return m===y||_u(m,y,Nf(y))}function yv(m,y,_){return _=typeof _=="function"?_:t,_u(m,y,Nf(y),_)}function Fy(m){return zy(m)&&m!=+m}function xv(m){if(Vu(m))throw new yt(o);return Wa(m)}function $y(m){return m===null}function bv(m){return m==null}function zy(m){return typeof m=="number"||ei(m)&&tn(m)==Ve}function ra(m){if(!ei(m)||tn(m)!=Ke)return!1;var y=fu(m);if(y===null)return!0;var _=mn.call(y,"constructor")&&y.constructor;return typeof _=="function"&&_ instanceof _&&du.call(_)==Qr}var qf=Hl?Yi(Hl):af;function am(m){return Bf(m)&&m>=-9007199254740991&&m<=re}var By=eo?Yi(eo):dp;function Vf(m){return typeof m=="string"||!Mt(m)&&ei(m)&&tn(m)==qe}function er(m){return typeof m=="symbol"||ei(m)&&tn(m)==We}var Ec=to?Yi(to):fp;function Aa(m){return m===t}function sm(m){return ei(m)&&Ei(m)==J}function Uy(m){return ei(m)&&tn(m)==G}var qy=vl(of),ad=vl(function(m,y){return m<=y});function zr(m){if(!m)return[];if(vi(m))return Vf(m)?sr(m):xi(m);if(al&&m[al])return lu(m[al]());var y=Ei(m),_=y==De?Xl:y==ve?Zl:Mc;return _(m)}function ts(m){if(!m)return m===0?m:0;if(m=aa(m),m===z||m===-1/0){var y=m<0?-1:1;return y*X}return m===m?m:0}function Lt(m){var y=ts(m),_=y%1;return y===y?_?y-_:y:0}function ns(m){return m?_a(Lt(m),0,te):0}function aa(m){if(typeof m=="number")return m;if(er(m))return P;if(Yn(m)){var y=typeof m.valueOf=="function"?m.valueOf():m;m=Yn(y)?y+"":y}if(typeof m!="string")return m===0?m:+m;m=zd(m);var _=ui.test(m);return _||Il.test(m)?Zo(m.slice(2),_?2:8):Gs.test(m)?P:+m}function Vy(m){return hr(m,Ti(m))}function Tc(m){return m?_a(Lt(m),-9007199254740991,re):m===0?m:0}function gn(m){return m==null?"":fr(m)}var vv=xl(function(m,y){if(Dn(y)||vi(y)){hr(y,Si(y),m);return}for(var _ in y)mn.call(y,_)&&dl(m,_,y[_])}),Hy=xl(function(m,y){hr(y,Ti(y),m)}),Hf=xl(function(m,y,_,R){hr(y,Ti(y),m,R)}),wv=xl(function(m,y,_,R){hr(y,Si(y),m,R)}),Sv=Un(Nu);function Nv(m,y){var _=Mr(m);return y==null?_:Cs(_,y)}var Cv=$t(function(m,y){m=on(m);var _=-1,R=y.length,W=R>2?y[2]:t;for(W&&Zi(y[0],y[1],W)&&(R=1);++_<R;)for(var ae=y[_],de=Ti(ae),ge=-1,ke=de.length;++ge<ke;){var Ye=de[ge],Je=m[Ye];(Je===t||yr(Je,tc[Ye])&&!mn.call(m,Ye))&&(m[Ye]=ae[Ye])}return m}),Gy=$t(function(m){return m.push(t,Tp),gi(cd,t,m)});function Ac(m,y){return va(m,wt(y,3),Bi)}function sd(m,y){return va(m,wt(y,3),uc)}function Yy(m,y){return m==null?m:cc(m,wt(y,3),Ti)}function jv(m,y){return m==null?m:hl(m,wt(y,3),Ti)}function Pc(m,y){return m&&Bi(m,wt(y,3))}function od(m,y){return m&&uc(m,wt(y,3))}function Wy(m){return m==null?[]:fo(m,Si(m))}function Gf(m){return m==null?[]:fo(m,Ti(m))}function ld(m,y,_){var R=m==null?t:ea(m,y);return R===t?_:R}function om(m,y){return m!=null&&qu(m,y,lp)}function Dc(m,y){return m!=null&&qu(m,y,kg)}var Qy=Lu(function(m,y,_){y!=null&&typeof y.toString!="function"&&(y=Qi.call(y)),m[y]=_},Pe(Ie)),Jy=Lu(function(m,y,_){y!=null&&typeof y.toString!="function"&&(y=Qi.call(y)),mn.call(m,y)?m[y].push(_):m[y]=[_]},wt),_v=$t(pl);function Si(m){return vi(m)?ap(m):sf(m)}function Ti(m){return vi(m)?ap(m,!0):Tg(m)}function kv(m,y){var _={};return y=wt(y,3),Bi(m,function(R,W,ae){ja(_,y(R,W,ae),R)}),_}function Ev(m,y){var _={};return y=wt(y,3),Bi(m,function(R,W,ae){ja(_,W,y(R,W,ae))}),_}var Tv=xl(function(m,y,_){ku(m,y,_)}),cd=xl(function(m,y,_,R){ku(m,y,_,R)}),Yf=Un(function(m,y){var _={};if(m==null)return _;var R=!1;y=On(y,function(ae){return ae=ks(ae,m),R||(R=ae.length>1),ae}),hr(m,wf(m),_),R&&(_=zi(_,g|b|v,Hg));for(var W=y.length;W--;)Pu(_,y[W]);return _});function lm(m,y){return Ic(m,id(wt(y)))}var Av=Un(function(m,y){return m==null?{}:Ag(m,y)});function Ic(m,y){if(m==null)return{};var _=On(wf(m),function(R){return[R]});return y=wt(y),cf(m,_,function(R,W){return y(R,W[0])})}function Pv(m,y,_){y=ks(y,m);var R=-1,W=y.length;for(W||(W=1,m=t);++R<W;){var ae=m==null?t:m[xn(y[R])];ae===t&&(R=W,ae=_),m=Ta(ae)?ae.call(m):ae}return m}function Ky(m,y,_){return m==null?m:fc(m,y,_)}function Xy(m,y,_,R){return R=typeof R=="function"?R:t,m==null?m:fc(m,y,_,R)}var cm=zu(Si),um=zu(Ti);function dm(m,y,_){var R=Mt(m),W=R||jo(m)||Ec(m);if(y=wt(y,4),_==null){var ae=m&&m.constructor;W?_=R?new ae:[]:Yn(m)?_=Ta(ae)?Mr(fu(m)):{}:_={}}return(W?Fi:Bi)(m,function(de,ge,ke){return y(_,de,ge,ke)}),_}function Zy(m,y){return m==null?!0:Pu(m,y)}function Wf(m,y,_){return m==null?m:wp(m,y,Mu(_))}function Dv(m,y,_,R){return R=typeof R=="function"?R:t,m==null?m:wp(m,y,Mu(_),R)}function Mc(m){return m==null?[]:Kl(m,Si(m))}function fm(m){return m==null?[]:Kl(m,Ti(m))}function hm(m,y,_){return _===t&&(_=y,y=t),_!==t&&(_=aa(_),_=_===_?_:0),y!==t&&(y=aa(y),y=y===y?y:0),_a(aa(m),y,_)}function Qf(m,y,_){return y=ts(y),_===t?(_=y,y=0):_=ts(_),m=aa(m),Eg(m,y,_)}function pm(m,y,_){if(_&&typeof _!="boolean"&&Zi(m,y,_)&&(y=_=t),_===t&&(typeof y=="boolean"?(_=y,y=t):typeof m=="boolean"&&(_=m,m=t)),m===t&&y===t?(m=0,y=1):(m=ts(m),y===t?(y=m,m=0):y=ts(y)),m>y){var R=m;m=y,y=R}if(_||m%1||y%1){var W=ep();return Vn(m+W*(y-m+xa("1e-"+((W+"").length-1))),y)}return df(m,y)}var ex=Xi(function(m,y,_){return y=y.toLowerCase(),m+(_?Jf(y):y)});function Jf(m){return x(gn(m).toLowerCase())}function Os(m){return m=gn(m),m&&m.replace(Ba,ao).replace(Tr,"")}function _o(m,y,_){m=gn(m),y=fr(y);var R=m.length;_=_===t?R:_a(Lt(_),0,R);var W=_;return _-=y.length,_>=0&&m.slice(_,W)==y}function ko(m){return m=gn(m),m&&un.test(m)?m.replace(_n,Bd):m}function ud(m){return m=gn(m),m&&zn.test(m)?m.replace(Zn,"\\$&"):m}var dd=Xi(function(m,y,_){return m+(_?"-":"")+y.toLowerCase()}),Eo=Xi(function(m,y,_){return m+(_?" ":"")+y.toLowerCase()}),Iv=Or("toLowerCase");function tx(m,y,_){m=gn(m),y=Lt(y);var R=y?Wr(m):0;if(!y||R>=y)return m;var W=(y-R)/2;return $u(ws(W),_)+m+$u(rc(W),_)}function fd(m,y,_){m=gn(m),y=Lt(y);var R=y?Wr(m):0;return y&&R<y?m+$u(y-R,_):m}function Mv(m,y,_){m=gn(m),y=Lt(y);var R=y?Wr(m):0;return y&&R<y?$u(y-R,_)+m:m}function nx(m,y,_){return _||y==null?y=0:y&&(y=+y),ol(gn(m).replace($a,""),y||0)}function Kf(m,y,_){return(_?Zi(m,y,_):y===t)?y=1:y=Lt(y),bp(gn(m),y)}function ix(){var m=arguments,y=gn(m[0]);return m.length<3?y:y.replace(m[1],m[2])}var Rv=Xi(function(m,y,_){return m+(_?"_":"")+y.toLowerCase()});function Xf(m,y,_){return _&&typeof _!="number"&&Zi(m,y,_)&&(y=_=t),_=_===t?te:_>>>0,_?(m=gn(m),m&&(typeof y=="string"||y!=null&&!qf(y))&&(y=fr(y),!y&&_i(m))?ho(sr(m),0,_):m.split(y,_)):[]}var Zf=Xi(function(m,y,_){return m+(_?" ":"")+x(y)});function rx(m,y,_){return m=gn(m),_=_==null?0:_a(Lt(_),0,m.length),y=fr(y),m.slice(_,_+y.length)==y}function hd(m,y,_){var R=Z.templateSettings;_&&Zi(m,y,_)&&(y=t),m=gn(m),y=Hf({},y,R,bf);var W=Hf({},y.imports,R.imports,bf),ae=Si(W),de=Kl(W,ae),ge,ke,Ye=0,Je=y.interpolate||kr,et="__p += '",dt=Hd((y.escape||kr).source+"|"+Je.source+"|"+(Je===ir?Hs:kr).source+"|"+(y.evaluate||kr).source+"|$","g"),xt="//# sourceURL="+(mn.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ul+"]")+`
`;m.replace(dt,function(Dt,nn,cn,Pa,Br,Da){return cn||(cn=Pa),et+=m.slice(Ye,Da).replace(Ys,Ud),nn&&(ge=!0,et+=`' +
__e(`+nn+`) +
'`),Br&&(ke=!0,et+=`';
`+Br+`;
__p += '`),cn&&(et+=`' +
((__t = (`+cn+`)) == null ? '' : __t) +
'`),Ye=Da+Dt.length,Dt}),et+=`';
`;var Pt=mn.call(y,"variable")&&y.variable;if(!Pt)et=`with (obj) {
`+et+`
}
`;else if(Jc.test(Pt))throw new yt(f);et=(ke?et.replace(Xe,""):et).replace(vt,"$1").replace(Xn,"$1;"),et="function("+(Pt||"obj")+`) {
`+(Pt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ge?", __e = _.escape":"")+(ke?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+et+`return __p
}`;var Wt=A(function(){return en(ae,xt+"return "+et).apply(t,de)});if(Wt.source=et,wi(Wt))throw Wt;return Wt}function mm(m){return gn(m).toLowerCase()}function eh(m){return gn(m).toUpperCase()}function ax(m,y,_){if(m=gn(m),m&&(_||y===t))return zd(m);if(!m||!(y=fr(y)))return m;var R=sr(m),W=sr(y),ae=ro(R,W),de=Dr(R,W)+1;return ho(R,ae,de).join("")}function Ov(m,y,_){if(m=gn(m),m&&(_||y===t))return m.slice(0,ec(m)+1);if(!m||!(y=fr(y)))return m;var R=sr(m),W=Dr(R,sr(y))+1;return ho(R,0,W).join("")}function th(m,y,_){if(m=gn(m),m&&(_||y===t))return m.replace($a,"");if(!m||!(y=fr(y)))return m;var R=sr(m),W=ro(R,sr(y));return ho(R,W).join("")}function s(m,y){var _=F,R=L;if(Yn(y)){var W="separator"in y?y.separator:W;_="length"in y?Lt(y.length):_,R="omission"in y?fr(y.omission):R}m=gn(m);var ae=m.length;if(_i(m)){var de=sr(m);ae=de.length}if(_>=ae)return m;var ge=_-Wr(R);if(ge<1)return R;var ke=de?ho(de,0,ge).join(""):m.slice(0,ge);if(W===t)return ke+R;if(de&&(ge+=ke.length-ge),qf(W)){if(m.slice(ge).search(W)){var Ye,Je=ke;for(W.global||(W=Hd(W.source,gn(za.exec(W))+"g")),W.lastIndex=0;Ye=W.exec(Je);)var et=Ye.index;ke=ke.slice(0,et===t?ge:et)}}else if(m.indexOf(fr(W),ge)!=ge){var dt=ke.lastIndexOf(W);dt>-1&&(ke=ke.slice(0,dt))}return ke+R}function c(m){return m=gn(m),m&&yn.test(m)?m.replace($n,cu):m}var h=Xi(function(m,y,_){return m+(_?" ":"")+y.toUpperCase()}),x=Or("toUpperCase");function S(m,y,_){return m=gn(m),y=_?t:y,y===t?qd(m)?me(m):Gh(m):m.match(y)||[]}var A=$t(function(m,y){try{return gi(m,t,y)}catch(_){return wi(_)?_:new yt(_)}}),V=Un(function(m,y){return Fi(y,function(_){_=xn(_),ja(m,_,No(m[_],m))}),m});function ee(m){var y=m==null?0:m.length,_=wt();return m=y?On(m,function(R){if(typeof R[1]!="function")throw new Ir(l);return[_(R[0]),R[1]]}):[],$t(function(R){for(var W=-1;++W<y;){var ae=m[W];if(gi(ae[0],this,R))return gi(ae[1],this,R)}})}function he(m){return jg(zi(m,g))}function Pe(m){return function(){return m}}function He(m,y){return m==null||m!==m?y:m}var Qe=Qa(),Oe=Qa(!0);function Ie(m){return m}function kt(m){return hp(typeof m=="function"?m:zi(m,g))}function Ct(m){return mp(zi(m,g))}function En(m,y){return lf(m,zi(y,g))}var _e=$t(function(m,y){return function(_){return pl(_,m,y)}}),be=$t(function(m,y){return function(_){return pl(m,_,y)}});function Te(m,y,_){var R=Si(y),W=fo(y,R);_==null&&!(Yn(y)&&(W.length||!R.length))&&(_=y,y=m,m=this,W=fo(y,Si(y)));var ae=!(Yn(_)&&"chain"in _)||!!_.chain,de=Ta(m);return Fi(W,function(ge){var ke=y[ge];m[ge]=ke,de&&(m.prototype[ge]=function(){var Ye=this.__chain__;if(ae||Ye){var Je=m(this.__wrapped__),et=Je.__actions__=xi(this.__actions__);return et.push({func:ke,args:arguments,thisArg:m}),Je.__chain__=Ye,Je}return ke.apply(m,ba([this.value()],arguments))})}),m}function Ge(){return An._===this&&(An._=nc),this}function mt(){}function Yt(m){return m=Lt(m),$t(function(y){return gp(y,m)})}var bt=Fu(On),Et=Fu($d),Ai=Fu(ru);function ln(m){return jf(m)?tl(xn(m)):Pg(m)}function To(m){return function(y){return m==null?t:ea(m,y)}}var Lv=po(),SA=po(!0);function Fv(){return[]}function $v(){return!1}function NA(){return{}}function CA(){return""}function jA(){return!0}function _A(m,y){if(m=Lt(m),m<1||m>re)return[];var _=te,R=Vn(m,te);y=wt(y),m-=te;for(var W=wa(R,y);++_<m;)y(_);return W}function kA(m){return Mt(m)?On(m,xn):er(m)?[m]:xi(Xa(gn(m)))}function EA(m){var y=++Sa;return gn(m)+y}var TA=hc(function(m,y){return m+y},0),AA=xf("ceil"),PA=hc(function(m,y){return m/y},1),DA=xf("floor");function IA(m){return m&&m.length?ka(m,Ie,Cu):t}function MA(m,y){return m&&m.length?ka(m,wt(y,2),Cu):t}function RA(m){return au(m,Ie)}function OA(m,y){return au(m,wt(y,2))}function LA(m){return m&&m.length?ka(m,Ie,of):t}function FA(m,y){return m&&m.length?ka(m,wt(y,2),of):t}var $A=hc(function(m,y){return m*y},1),zA=xf("round"),BA=hc(function(m,y){return m-y},0);function UA(m){return m&&m.length?Jl(m,Ie):0}function qA(m,y){return m&&m.length?Jl(m,wt(y,2)):0}return Z.after=cv,Z.ary=Ty,Z.assign=vv,Z.assignIn=Hy,Z.assignInWith=Hf,Z.assignWith=wv,Z.at=Sv,Z.before=Zu,Z.bind=No,Z.bindAll=V,Z.bindKey=Of,Z.castArray=hv,Z.chain=jc,Z.chunk=nv,Z.compact=ny,Z.concat=iy,Z.cond=ee,Z.conforms=he,Z.constant=Pe,Z.countBy=_c,Z.create=Nv,Z.curry=ed,Z.curryRight=Lf,Z.debounce=Co,Z.defaults=Cv,Z.defaultsDeep=Gy,Z.defer=es,Z.delay=td,Z.difference=Gn,Z.differenceBy=pr,Z.differenceWith=Ds,Z.drop=ry,Z.dropRight=ay,Z.dropRightWhile=iv,Z.dropWhile=Rp,Z.fill=Lr,Z.filter=yy,Z.flatMap=Qp,Z.flatMapDeep=sv,Z.flatMapDepth=ov,Z.flatten=mr,Z.flattenDeep=sy,Z.flattenDepth=yo,Z.flip=uv,Z.flow=Qe,Z.flowRight=Oe,Z.fromPairs=Sl,Z.functions=Wy,Z.functionsIn=Gf,Z.groupBy=vy,Z.initial=Fp,Z.intersection=Za,Z.intersectionBy=oy,Z.intersectionWith=yc,Z.invert=Qy,Z.invertBy=Jy,Z.invokeMap=If,Z.iteratee=kt,Z.keyBy=wy,Z.keys=Si,Z.keysIn=Ti,Z.map=Xu,Z.mapKeys=kv,Z.mapValues=Ev,Z.matches=Ct,Z.matchesProperty=En,Z.memoize=nd,Z.merge=Tv,Z.mergeWith=cd,Z.method=_e,Z.methodOf=be,Z.mixin=Te,Z.negate=id,Z.nthArg=Yt,Z.omit=Yf,Z.omitBy=lm,Z.once=Ay,Z.orderBy=Sy,Z.over=bt,Z.overArgs=Py,Z.overEvery=Et,Z.overSome=Ai,Z.partial=Xp,Z.partialRight=Ff,Z.partition=Ny,Z.pick=Av,Z.pickBy=Ic,Z.property=ln,Z.propertyOf=To,Z.pull=cy,Z.pullAll=bc,Z.pullAllBy=uy,Z.pullAllWith=Pf,Z.pullAt=dy,Z.range=Lv,Z.rangeRight=SA,Z.rearg=Dy,Z.reject=Mf,Z.remove=rv,Z.rest=Iy,Z.reverse=$p,Z.sampleSize=ky,Z.set=Ky,Z.setWith=Xy,Z.shuffle=In,Z.slice=vn,Z.sortBy=Ey,Z.sortedUniq=vc,Z.sortedUniqBy=zp,Z.split=Xf,Z.spread=dv,Z.tail=Ms,Z.take=ri,Z.takeRight=bo,Z.takeRightWhile=Nl,Z.takeWhile=Bp,Z.tap=Gp,Z.throttle=Zp,Z.thru=qi,Z.toArray=zr,Z.toPairs=cm,Z.toPairsIn=um,Z.toPath=kA,Z.toPlainObject=Vy,Z.transform=dm,Z.unary=em,Z.union=ia,Z.unionBy=wc,Z.unionWith=Ju,Z.uniq=gr,Z.uniqBy=Up,Z.uniqWith=qp,Z.unset=Zy,Z.unzip=Sc,Z.unzipWith=Ku,Z.update=Wf,Z.updateWith=Dv,Z.values=Mc,Z.valuesIn=fm,Z.without=vo,Z.words=S,Z.wrap=fv,Z.xor=Mi,Z.xorBy=wo,Z.xorWith=Nc,Z.zip=Cc,Z.zipObject=Vp,Z.zipObjectDeep=Hp,Z.zipWith=fy,Z.entries=cm,Z.entriesIn=um,Z.extend=Hy,Z.extendWith=Hf,Te(Z,Z),Z.add=TA,Z.attempt=A,Z.camelCase=ex,Z.capitalize=Jf,Z.ceil=AA,Z.clamp=hm,Z.clone=rd,Z.cloneDeep=My,Z.cloneDeepWith=Kt,Z.cloneWith=pv,Z.conformsTo=tm,Z.deburr=Os,Z.defaultTo=He,Z.divide=PA,Z.endsWith=_o,Z.eq=yr,Z.escape=ko,Z.escapeRegExp=ud,Z.every=gy,Z.find=xy,Z.findIndex=na,Z.findKey=Ac,Z.findLast=Wp,Z.findLastIndex=Op,Z.findLastKey=sd,Z.floor=DA,Z.forEach=by,Z.forEachRight=Jp,Z.forIn=Yy,Z.forInRight=jv,Z.forOwn=Pc,Z.forOwnRight=od,Z.get=ld,Z.gt=nm,Z.gte=Ry,Z.has=om,Z.hasIn=Dc,Z.head=Is,Z.identity=Ie,Z.includes=kc,Z.indexOf=Lp,Z.inRange=Qf,Z.invoke=_v,Z.isArguments=Rs,Z.isArray=Mt,Z.isArrayBuffer=$f,Z.isArrayLike=vi,Z.isArrayLikeObject=ai,Z.isBoolean=mv,Z.isBuffer=jo,Z.isDate=Oy,Z.isElement=Ly,Z.isEmpty=zf,Z.isEqual=kn,Z.isEqualWith=im,Z.isError=wi,Z.isFinite=gv,Z.isFunction=Ta,Z.isInteger=Bf,Z.isLength=Cl,Z.isMap=Uf,Z.isMatch=rm,Z.isMatchWith=yv,Z.isNaN=Fy,Z.isNative=xv,Z.isNil=bv,Z.isNull=$y,Z.isNumber=zy,Z.isObject=Yn,Z.isObjectLike=ei,Z.isPlainObject=ra,Z.isRegExp=qf,Z.isSafeInteger=am,Z.isSet=By,Z.isString=Vf,Z.isSymbol=er,Z.isTypedArray=Ec,Z.isUndefined=Aa,Z.isWeakMap=sm,Z.isWeakSet=Uy,Z.join=Qu,Z.kebabCase=dd,Z.last=Ui,Z.lastIndexOf=xc,Z.lowerCase=Eo,Z.lowerFirst=Iv,Z.lt=qy,Z.lte=ad,Z.max=IA,Z.maxBy=MA,Z.mean=RA,Z.meanBy=OA,Z.min=LA,Z.minBy=FA,Z.stubArray=Fv,Z.stubFalse=$v,Z.stubObject=NA,Z.stubString=CA,Z.stubTrue=jA,Z.multiply=$A,Z.nth=ly,Z.noConflict=Ge,Z.noop=mt,Z.now=Rf,Z.pad=tx,Z.padEnd=fd,Z.padStart=Mv,Z.parseInt=nx,Z.random=pm,Z.reduce=Cy,Z.reduceRight=jy,Z.repeat=Kf,Z.replace=ix,Z.result=Pv,Z.round=zA,Z.runInContext=ue,Z.sample=_y,Z.size=Kp,Z.snakeCase=Rv,Z.some=lv,Z.sortedIndex=Ln,Z.sortedIndexBy=Jt,Z.sortedIndexOf=sn,Z.sortedLastIndex=wn,Z.sortedLastIndexBy=Fr,Z.sortedLastIndexOf=xo,Z.startCase=Zf,Z.startsWith=rx,Z.subtract=BA,Z.sum=UA,Z.sumBy=qA,Z.template=hd,Z.times=_A,Z.toFinite=ts,Z.toInteger=Lt,Z.toLength=ns,Z.toLower=mm,Z.toNumber=aa,Z.toSafeInteger=Tc,Z.toString=gn,Z.toUpper=eh,Z.trim=ax,Z.trimEnd=Ov,Z.trimStart=th,Z.truncate=s,Z.unescape=c,Z.uniqueId=EA,Z.upperCase=h,Z.upperFirst=x,Z.each=by,Z.eachRight=Jp,Z.first=Is,Te(Z,function(){var m={};return Bi(Z,function(y,_){mn.call(Z.prototype,_)||(m[_]=y)}),m}(),{chain:!1}),Z.VERSION=i,Fi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){Z[m].placeholder=Z}),Fi(["drop","take"],function(m,y){Gt.prototype[m]=function(_){_=_===t?1:Bn(Lt(_),0);var R=this.__filtered__&&!y?new Gt(this):this.clone();return R.__filtered__?R.__takeCount__=Vn(_,R.__takeCount__):R.__views__.push({size:Vn(_,te),type:m+(R.__dir__<0?"Right":"")}),R},Gt.prototype[m+"Right"]=function(_){return this.reverse()[m](_).reverse()}}),Fi(["filter","map","takeWhile"],function(m,y){var _=y+1,R=_==ie||_==Y;Gt.prototype[m]=function(W){var ae=this.clone();return ae.__iteratees__.push({iteratee:wt(W,3),type:_}),ae.__filtered__=ae.__filtered__||R,ae}}),Fi(["head","last"],function(m,y){var _="take"+(y?"Right":"");Gt.prototype[m]=function(){return this[_](1).value()[0]}}),Fi(["initial","tail"],function(m,y){var _="drop"+(y?"":"Right");Gt.prototype[m]=function(){return this.__filtered__?new Gt(this):this[_](1)}}),Gt.prototype.compact=function(){return this.filter(Ie)},Gt.prototype.find=function(m){return this.filter(m).head()},Gt.prototype.findLast=function(m){return this.reverse().find(m)},Gt.prototype.invokeMap=$t(function(m,y){return typeof m=="function"?new Gt(this):this.map(function(_){return pl(_,m,y)})}),Gt.prototype.reject=function(m){return this.filter(id(wt(m)))},Gt.prototype.slice=function(m,y){m=Lt(m);var _=this;return _.__filtered__&&(m>0||y<0)?new Gt(_):(m<0?_=_.takeRight(-m):m&&(_=_.drop(m)),y!==t&&(y=Lt(y),_=y<0?_.dropRight(-y):_.take(y-m)),_)},Gt.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},Gt.prototype.toArray=function(){return this.take(te)},Bi(Gt.prototype,function(m,y){var _=/^(?:filter|find|map|reject)|While$/.test(y),R=/^(?:head|last)$/.test(y),W=Z[R?"take"+(y=="last"?"Right":""):y],ae=R||/^find/.test(y);W&&(Z.prototype[y]=function(){var de=this.__wrapped__,ge=R?[1]:arguments,ke=de instanceof Gt,Ye=ge[0],Je=ke||Mt(de),et=function(nn){var cn=W.apply(Z,ba([nn],ge));return R&&dt?cn[0]:cn};Je&&_&&typeof Ye=="function"&&Ye.length!=1&&(ke=Je=!1);var dt=this.__chain__,xt=!!this.__actions__.length,Pt=ae&&!dt,Wt=ke&&!xt;if(!ae&&Je){de=Wt?de:new Gt(this);var Dt=m.apply(de,ge);return Dt.__actions__.push({func:qi,args:[et],thisArg:t}),new cr(Dt,dt)}return Pt&&Wt?m.apply(this,ge):(Dt=this.thru(et),Pt?R?Dt.value()[0]:Dt.value():Dt)})}),Fi(["pop","push","shift","sort","splice","unshift"],function(m){var y=Gd[m],_=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",R=/^(?:pop|shift)$/.test(m);Z.prototype[m]=function(){var W=arguments;if(R&&!this.__chain__){var ae=this.value();return y.apply(Mt(ae)?ae:[],W)}return this[_](function(de){return y.apply(Mt(de)?de:[],W)})}}),Bi(Gt.prototype,function(m,y){var _=Z[y];if(_){var R=_.name+"";mn.call(Xr,R)||(Xr[R]=[]),Xr[R].push({name:y,func:_})}}),Xr[ii(t,T).name]=[{name:"wrapper",func:t}],Gt.prototype.clone=bu,Gt.prototype.reverse=Jd,Gt.prototype.value=cl,Z.prototype.at=hy,Z.prototype.chain=$r,Z.prototype.commit=py,Z.prototype.next=my,Z.prototype.plant=So,Z.prototype.reverse=Df,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=Yp,Z.prototype.first=Z.prototype.head,al&&(Z.prototype[al]=av),Z},tt=Me();Gr?((Gr.exports=tt)._=tt,xs._=tt):An._=tt}).call(m8)}(Rm,Rm.exports)),Rm.exports}var Nk=g8();class y8{constructor(n){Wn(this,"sampleRate",24e3);Wn(this,"bufferSize",7680);Wn(this,"audioQueue",[]);Wn(this,"isPlaying",!1);Wn(this,"isStreamComplete",!1);Wn(this,"checkInterval",null);Wn(this,"scheduledTime",0);Wn(this,"initialBufferTime",.1);Wn(this,"gainNode");Wn(this,"source");Wn(this,"endOfQueueAudioSource",null);Wn(this,"onComplete",()=>{});this.context=n,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(n,t,i){let a=bx.get(this.context);if(a&&a[n])return a[n].handlers.push(i),Promise.resolve(this);a||(bx.set(this.context,{}),a=bx.get(this.context)),a[n]={handlers:[i]};const o=b1(n,t);await this.context.audioWorklet.addModule(o);const l=new AudioWorkletNode(this.context,n);return a[n].node=l,this}_processPCM16Chunk(n){const t=new Float32Array(n.length/2),i=new DataView(n.buffer);for(let a=0;a<n.length/2;a++)try{const o=i.getInt16(a*2,!0);t[a]=o/32768}catch(o){console.error(o)}return t}addPCM16(n){this.isStreamComplete=!1;let t=this._processPCM16Chunk(n);for(;t.length>=this.bufferSize;){const i=t.slice(0,this.bufferSize);this.audioQueue.push(i),t=t.slice(this.bufferSize)}t.length>0&&this.audioQueue.push(t),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(n){const t=this.context.createBuffer(1,n.length,this.sampleRate);return t.getChannelData(0).set(n),t}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const t=this.audioQueue.shift(),i=this.createAudioBuffer(t),a=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=a,a.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===a&&(this.endOfQueueAudioSource=null,this.onComplete())}),a.buffer=i,a.connect(this.gainNode);const o=bx.get(this.context);o&&Object.entries(o).forEach(([,f])=>{const{node:d,handlers:u}=f;d&&(a.connect(d),d.port.onmessage=function(p){u.forEach(g=>{g.call(d.port,p)})},d.connect(this.context.destination))});const l=Math.max(this.scheduledTime,this.context.currentTime);a.start(l),this.scheduledTime=l+i.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const t=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,t-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function Ck(e,n){return function(){return e.apply(n,arguments)}}const{toString:x8}=Object.prototype,{getPrototypeOf:Cw}=Object,Rb=(e=>n=>{const t=x8.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),qs=e=>(e=e.toLowerCase(),n=>Rb(n)===e),Ob=e=>n=>typeof n===e,{isArray:Mh}=Array,Jm=Ob("undefined");function b8(e){return e!==null&&!Jm(e)&&e.constructor!==null&&!Jm(e.constructor)&&La(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const jk=qs("ArrayBuffer");function v8(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&jk(e.buffer),n}const w8=Ob("string"),La=Ob("function"),_k=Ob("number"),Lb=e=>e!==null&&typeof e=="object",S8=e=>e===!0||e===!1,$x=e=>{if(Rb(e)!=="object")return!1;const n=Cw(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},N8=qs("Date"),C8=qs("File"),j8=qs("Blob"),_8=qs("FileList"),k8=e=>Lb(e)&&La(e.pipe),E8=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||La(e.append)&&((n=Rb(e))==="formdata"||n==="object"&&La(e.toString)&&e.toString()==="[object FormData]"))},T8=qs("URLSearchParams"),[A8,P8,D8,I8]=["ReadableStream","Request","Response","Headers"].map(qs),M8=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ag(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let i,a;if(typeof e!="object"&&(e=[e]),Mh(e))for(i=0,a=e.length;i<a;i++)n.call(null,e[i],i,e);else{const o=t?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let f;for(i=0;i<l;i++)f=o[i],n.call(null,e[f],f,e)}}function kk(e,n){n=n.toLowerCase();const t=Object.keys(e);let i=t.length,a;for(;i-- >0;)if(a=t[i],n===a.toLowerCase())return a;return null}const vd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ek=e=>!Jm(e)&&e!==vd;function v1(){const{caseless:e}=Ek(this)&&this||{},n={},t=(i,a)=>{const o=e&&kk(n,a)||a;$x(n[o])&&$x(i)?n[o]=v1(n[o],i):$x(i)?n[o]=v1({},i):Mh(i)?n[o]=i.slice():n[o]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&ag(arguments[i],t);return n}const R8=(e,n,t,{allOwnKeys:i}={})=>(ag(n,(a,o)=>{t&&La(a)?e[o]=Ck(a,t):e[o]=a},{allOwnKeys:i}),e),O8=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),L8=(e,n,t,i)=>{e.prototype=Object.create(n.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},F8=(e,n,t,i)=>{let a,o,l;const f={};if(n=n||{},e==null)return n;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)l=a[o],(!i||i(l,e,n))&&!f[l]&&(n[l]=e[l],f[l]=!0);e=t!==!1&&Cw(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},$8=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;const i=e.indexOf(n,t);return i!==-1&&i===t},z8=e=>{if(!e)return null;if(Mh(e))return e;let n=e.length;if(!_k(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},B8=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&Cw(Uint8Array)),U8=(e,n)=>{const i=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=i.next())&&!a.done;){const o=a.value;n.call(e,o[0],o[1])}},q8=(e,n)=>{let t;const i=[];for(;(t=e.exec(n))!==null;)i.push(t);return i},V8=qs("HTMLFormElement"),H8=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,a){return i.toUpperCase()+a}),EC=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),G8=qs("RegExp"),Tk=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),i={};ag(t,(a,o)=>{let l;(l=n(a,o,e))!==!1&&(i[o]=l||a)}),Object.defineProperties(e,i)},Y8=e=>{Tk(e,(n,t)=>{if(La(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=e[t];if(La(i)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},W8=(e,n)=>{const t={},i=a=>{a.forEach(o=>{t[o]=!0})};return Mh(e)?i(e):i(String(e).split(n)),t},Q8=()=>{},J8=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function K8(e){return!!(e&&La(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const X8=e=>{const n=new Array(10),t=(i,a)=>{if(Lb(i)){if(n.indexOf(i)>=0)return;if(!("toJSON"in i)){n[a]=i;const o=Mh(i)?[]:{};return ag(i,(l,f)=>{const d=t(l,a+1);!Jm(d)&&(o[f]=d)}),n[a]=void 0,o}}return i};return t(e,0)},Z8=qs("AsyncFunction"),e9=e=>e&&(Lb(e)||La(e))&&La(e.then)&&La(e.catch),Ak=((e,n)=>e?setImmediate:n?((t,i)=>(vd.addEventListener("message",({source:a,data:o})=>{a===vd&&o===t&&i.length&&i.shift()()},!1),a=>{i.push(a),vd.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",La(vd.postMessage)),t9=typeof queueMicrotask<"u"?queueMicrotask.bind(vd):typeof process<"u"&&process.nextTick||Ak,$e={isArray:Mh,isArrayBuffer:jk,isBuffer:b8,isFormData:E8,isArrayBufferView:v8,isString:w8,isNumber:_k,isBoolean:S8,isObject:Lb,isPlainObject:$x,isReadableStream:A8,isRequest:P8,isResponse:D8,isHeaders:I8,isUndefined:Jm,isDate:N8,isFile:C8,isBlob:j8,isRegExp:G8,isFunction:La,isStream:k8,isURLSearchParams:T8,isTypedArray:B8,isFileList:_8,forEach:ag,merge:v1,extend:R8,trim:M8,stripBOM:O8,inherits:L8,toFlatObject:F8,kindOf:Rb,kindOfTest:qs,endsWith:$8,toArray:z8,forEachEntry:U8,matchAll:q8,isHTMLForm:V8,hasOwnProperty:EC,hasOwnProp:EC,reduceDescriptors:Tk,freezeMethods:Y8,toObjectSet:W8,toCamelCase:H8,noop:Q8,toFiniteNumber:J8,findKey:kk,global:vd,isContextDefined:Ek,isSpecCompliantForm:K8,toJSONObject:X8,isAsyncFn:Z8,isThenable:e9,setImmediate:Ak,asap:t9};function Bt(e,n,t,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}$e.inherits(Bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$e.toJSONObject(this.config),code:this.code,status:this.status}}});const Pk=Bt.prototype,Dk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Dk[e]={value:e}});Object.defineProperties(Bt,Dk);Object.defineProperty(Pk,"isAxiosError",{value:!0});Bt.from=(e,n,t,i,a,o)=>{const l=Object.create(Pk);return $e.toFlatObject(e,l,function(d){return d!==Error.prototype},f=>f!=="isAxiosError"),Bt.call(l,e.message,n,t,i,a),l.cause=e,l.name=e.name,o&&Object.assign(l,o),l};const n9=null;function w1(e){return $e.isPlainObject(e)||$e.isArray(e)}function Ik(e){return $e.endsWith(e,"[]")?e.slice(0,-2):e}function TC(e,n,t){return e?e.concat(n).map(function(a,o){return a=Ik(a),!t&&o?"["+a+"]":a}).join(t?".":""):n}function i9(e){return $e.isArray(e)&&!e.some(w1)}const r9=$e.toFlatObject($e,{},null,function(n){return/^is[A-Z]/.test(n)});function Fb(e,n,t){if(!$e.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,t=$e.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,E){return!$e.isUndefined(E[k])});const i=t.metaTokens,a=t.visitor||p,o=t.dots,l=t.indexes,d=(t.Blob||typeof Blob<"u"&&Blob)&&$e.isSpecCompliantForm(n);if(!$e.isFunction(a))throw new TypeError("visitor must be a function");function u(N){if(N===null)return"";if($e.isDate(N))return N.toISOString();if(!d&&$e.isBlob(N))throw new Bt("Blob is not supported. Use a Buffer instead.");return $e.isArrayBuffer(N)||$e.isTypedArray(N)?d&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function p(N,k,E){let T=N;if(N&&!E&&typeof N=="object"){if($e.endsWith(k,"{}"))k=i?k:k.slice(0,-2),N=JSON.stringify(N);else if($e.isArray(N)&&i9(N)||($e.isFileList(N)||$e.endsWith(k,"[]"))&&(T=$e.toArray(N)))return k=Ik(k),T.forEach(function(D,U){!($e.isUndefined(D)||D===null)&&n.append(l===!0?TC([k],U,o):l===null?k:k+"[]",u(D))}),!1}return w1(N)?!0:(n.append(TC(E,k,o),u(N)),!1)}const g=[],b=Object.assign(r9,{defaultVisitor:p,convertValue:u,isVisitable:w1});function v(N,k){if(!$e.isUndefined(N)){if(g.indexOf(N)!==-1)throw Error("Circular reference detected in "+k.join("."));g.push(N),$e.forEach(N,function(T,I){(!($e.isUndefined(T)||T===null)&&a.call(n,T,$e.isString(I)?I.trim():I,k,b))===!0&&v(T,k?k.concat(I):[I])}),g.pop()}}if(!$e.isObject(e))throw new TypeError("data must be an object");return v(e),n}function AC(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function jw(e,n){this._pairs=[],e&&Fb(e,this,n)}const Mk=jw.prototype;Mk.append=function(n,t){this._pairs.push([n,t])};Mk.toString=function(n){const t=n?function(i){return n.call(this,i,AC)}:AC;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function a9(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Rk(e,n,t){if(!n)return e;const i=t&&t.encode||a9;$e.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let o;if(a?o=a(n,t):o=$e.isURLSearchParams(n)?n.toString():new jw(n,t).toString(i),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class PC{constructor(){this.handlers=[]}use(n,t,i){return this.handlers.push({fulfilled:n,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){$e.forEach(this.handlers,function(i){i!==null&&n(i)})}}const Ok={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},s9=typeof URLSearchParams<"u"?URLSearchParams:jw,o9=typeof FormData<"u"?FormData:null,l9=typeof Blob<"u"?Blob:null,c9={isBrowser:!0,classes:{URLSearchParams:s9,FormData:o9,Blob:l9},protocols:["http","https","file","blob","url","data"]},_w=typeof window<"u"&&typeof document<"u",S1=typeof navigator=="object"&&navigator||void 0,u9=_w&&(!S1||["ReactNative","NativeScript","NS"].indexOf(S1.product)<0),d9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",f9=_w&&window.location.href||"http://localhost",h9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_w,hasStandardBrowserEnv:u9,hasStandardBrowserWebWorkerEnv:d9,navigator:S1,origin:f9},Symbol.toStringTag,{value:"Module"})),wr={...h9,...c9};function p9(e,n){return Fb(e,new wr.classes.URLSearchParams,Object.assign({visitor:function(t,i,a,o){return wr.isNode&&$e.isBuffer(t)?(this.append(i,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},n))}function m9(e){return $e.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function g9(e){const n={},t=Object.keys(e);let i;const a=t.length;let o;for(i=0;i<a;i++)o=t[i],n[o]=e[o];return n}function Lk(e){function n(t,i,a,o){let l=t[o++];if(l==="__proto__")return!0;const f=Number.isFinite(+l),d=o>=t.length;return l=!l&&$e.isArray(a)?a.length:l,d?($e.hasOwnProp(a,l)?a[l]=[a[l],i]:a[l]=i,!f):((!a[l]||!$e.isObject(a[l]))&&(a[l]=[]),n(t,i,a[l],o)&&$e.isArray(a[l])&&(a[l]=g9(a[l])),!f)}if($e.isFormData(e)&&$e.isFunction(e.entries)){const t={};return $e.forEachEntry(e,(i,a)=>{n(m9(i),a,t,0)}),t}return null}function y9(e,n,t){if($e.isString(e))try{return(n||JSON.parse)(e),$e.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(e)}const sg={transitional:Ok,adapter:["xhr","http","fetch"],transformRequest:[function(n,t){const i=t.getContentType()||"",a=i.indexOf("application/json")>-1,o=$e.isObject(n);if(o&&$e.isHTMLForm(n)&&(n=new FormData(n)),$e.isFormData(n))return a?JSON.stringify(Lk(n)):n;if($e.isArrayBuffer(n)||$e.isBuffer(n)||$e.isStream(n)||$e.isFile(n)||$e.isBlob(n)||$e.isReadableStream(n))return n;if($e.isArrayBufferView(n))return n.buffer;if($e.isURLSearchParams(n))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let f;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return p9(n,this.formSerializer).toString();if((f=$e.isFileList(n))||i.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Fb(f?{"files[]":n}:n,d&&new d,this.formSerializer)}}return o||a?(t.setContentType("application/json",!1),y9(n)):n}],transformResponse:[function(n){const t=this.transitional||sg.transitional,i=t&&t.forcedJSONParsing,a=this.responseType==="json";if($e.isResponse(n)||$e.isReadableStream(n))return n;if(n&&$e.isString(n)&&(i&&!this.responseType||a)){const l=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(n)}catch(f){if(l)throw f.name==="SyntaxError"?Bt.from(f,Bt.ERR_BAD_RESPONSE,this,null,this.response):f}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wr.classes.FormData,Blob:wr.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$e.forEach(["delete","get","head","post","put","patch"],e=>{sg.headers[e]={}});const x9=$e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),b9=e=>{const n={};let t,i,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),t=l.substring(0,a).trim().toLowerCase(),i=l.substring(a+1).trim(),!(!t||n[t]&&x9[t])&&(t==="set-cookie"?n[t]?n[t].push(i):n[t]=[i]:n[t]=n[t]?n[t]+", "+i:i)}),n},DC=Symbol("internals");function jm(e){return e&&String(e).trim().toLowerCase()}function zx(e){return e===!1||e==null?e:$e.isArray(e)?e.map(zx):String(e)}function v9(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(e);)n[i[1]]=i[2];return n}const w9=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function d0(e,n,t,i,a){if($e.isFunction(i))return i.call(this,n,t);if(a&&(n=t),!!$e.isString(n)){if($e.isString(i))return n.indexOf(i)!==-1;if($e.isRegExp(i))return i.test(n)}}function S9(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,i)=>t.toUpperCase()+i)}function N9(e,n){const t=$e.toCamelCase(" "+n);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+t,{value:function(a,o,l){return this[i].call(this,n,a,o,l)},configurable:!0})})}let ca=class{constructor(n){n&&this.set(n)}set(n,t,i){const a=this;function o(f,d,u){const p=jm(d);if(!p)throw new Error("header name must be a non-empty string");const g=$e.findKey(a,p);(!g||a[g]===void 0||u===!0||u===void 0&&a[g]!==!1)&&(a[g||d]=zx(f))}const l=(f,d)=>$e.forEach(f,(u,p)=>o(u,p,d));if($e.isPlainObject(n)||n instanceof this.constructor)l(n,t);else if($e.isString(n)&&(n=n.trim())&&!w9(n))l(b9(n),t);else if($e.isHeaders(n))for(const[f,d]of n.entries())o(d,f,i);else n!=null&&o(t,n,i);return this}get(n,t){if(n=jm(n),n){const i=$e.findKey(this,n);if(i){const a=this[i];if(!t)return a;if(t===!0)return v9(a);if($e.isFunction(t))return t.call(this,a,i);if($e.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=jm(n),n){const i=$e.findKey(this,n);return!!(i&&this[i]!==void 0&&(!t||d0(this,this[i],i,t)))}return!1}delete(n,t){const i=this;let a=!1;function o(l){if(l=jm(l),l){const f=$e.findKey(i,l);f&&(!t||d0(i,i[f],f,t))&&(delete i[f],a=!0)}}return $e.isArray(n)?n.forEach(o):o(n),a}clear(n){const t=Object.keys(this);let i=t.length,a=!1;for(;i--;){const o=t[i];(!n||d0(this,this[o],o,n,!0))&&(delete this[o],a=!0)}return a}normalize(n){const t=this,i={};return $e.forEach(this,(a,o)=>{const l=$e.findKey(i,o);if(l){t[l]=zx(a),delete t[o];return}const f=n?S9(o):String(o).trim();f!==o&&delete t[o],t[f]=zx(a),i[f]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const t=Object.create(null);return $e.forEach(this,(i,a)=>{i!=null&&i!==!1&&(t[a]=n&&$e.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){const i=new this(n);return t.forEach(a=>i.set(a)),i}static accessor(n){const i=(this[DC]=this[DC]={accessors:{}}).accessors,a=this.prototype;function o(l){const f=jm(l);i[f]||(N9(a,l),i[f]=!0)}return $e.isArray(n)?n.forEach(o):o(n),this}};ca.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$e.reduceDescriptors(ca.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(i){this[t]=i}}});$e.freezeMethods(ca);function f0(e,n){const t=this||sg,i=n||t,a=ca.from(i.headers);let o=i.data;return $e.forEach(e,function(f){o=f.call(t,o,a.normalize(),n?n.status:void 0)}),a.normalize(),o}function Fk(e){return!!(e&&e.__CANCEL__)}function Rh(e,n,t){Bt.call(this,e??"canceled",Bt.ERR_CANCELED,n,t),this.name="CanceledError"}$e.inherits(Rh,Bt,{__CANCEL__:!0});function $k(e,n,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?e(t):n(new Bt("Request failed with status code "+t.status,[Bt.ERR_BAD_REQUEST,Bt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function C9(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function j9(e,n){e=e||10;const t=new Array(e),i=new Array(e);let a=0,o=0,l;return n=n!==void 0?n:1e3,function(d){const u=Date.now(),p=i[o];l||(l=u),t[a]=d,i[a]=u;let g=o,b=0;for(;g!==a;)b+=t[g++],g=g%e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),u-l<n)return;const v=p&&u-p;return v?Math.round(b*1e3/v):void 0}}function _9(e,n){let t=0,i=1e3/n,a,o;const l=(u,p=Date.now())=>{t=p,a=null,o&&(clearTimeout(o),o=null),e.apply(null,u)};return[(...u)=>{const p=Date.now(),g=p-t;g>=i?l(u,p):(a=u,o||(o=setTimeout(()=>{o=null,l(a)},i-g)))},()=>a&&l(a)]}const cb=(e,n,t=3)=>{let i=0;const a=j9(50,250);return _9(o=>{const l=o.loaded,f=o.lengthComputable?o.total:void 0,d=l-i,u=a(d),p=l<=f;i=l;const g={loaded:l,total:f,progress:f?l/f:void 0,bytes:d,rate:u||void 0,estimated:u&&f&&p?(f-l)/u:void 0,event:o,lengthComputable:f!=null,[n?"download":"upload"]:!0};e(g)},t)},IC=(e,n)=>{const t=e!=null;return[i=>n[0]({lengthComputable:t,total:e,loaded:i}),n[1]]},MC=e=>(...n)=>$e.asap(()=>e(...n)),k9=wr.hasStandardBrowserEnv?((e,n)=>t=>(t=new URL(t,wr.origin),e.protocol===t.protocol&&e.host===t.host&&(n||e.port===t.port)))(new URL(wr.origin),wr.navigator&&/(msie|trident)/i.test(wr.navigator.userAgent)):()=>!0,E9=wr.hasStandardBrowserEnv?{write(e,n,t,i,a,o){const l=[e+"="+encodeURIComponent(n)];$e.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),$e.isString(i)&&l.push("path="+i),$e.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function T9(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function A9(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function zk(e,n,t){let i=!T9(n);return e&&(i||t==!1)?A9(e,n):n}const RC=e=>e instanceof ca?{...e}:e;function Ed(e,n){n=n||{};const t={};function i(u,p,g,b){return $e.isPlainObject(u)&&$e.isPlainObject(p)?$e.merge.call({caseless:b},u,p):$e.isPlainObject(p)?$e.merge({},p):$e.isArray(p)?p.slice():p}function a(u,p,g,b){if($e.isUndefined(p)){if(!$e.isUndefined(u))return i(void 0,u,g,b)}else return i(u,p,g,b)}function o(u,p){if(!$e.isUndefined(p))return i(void 0,p)}function l(u,p){if($e.isUndefined(p)){if(!$e.isUndefined(u))return i(void 0,u)}else return i(void 0,p)}function f(u,p,g){if(g in n)return i(u,p);if(g in e)return i(void 0,u)}const d={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:f,headers:(u,p,g)=>a(RC(u),RC(p),g,!0)};return $e.forEach(Object.keys(Object.assign({},e,n)),function(p){const g=d[p]||a,b=g(e[p],n[p],p);$e.isUndefined(b)&&g!==f||(t[p]=b)}),t}const Bk=e=>{const n=Ed({},e);let{data:t,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:o,headers:l,auth:f}=n;n.headers=l=ca.from(l),n.url=Rk(zk(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),f&&l.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let d;if($e.isFormData(t)){if(wr.hasStandardBrowserEnv||wr.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((d=l.getContentType())!==!1){const[u,...p]=d?d.split(";").map(g=>g.trim()).filter(Boolean):[];l.setContentType([u||"multipart/form-data",...p].join("; "))}}if(wr.hasStandardBrowserEnv&&(i&&$e.isFunction(i)&&(i=i(n)),i||i!==!1&&k9(n.url))){const u=a&&o&&E9.read(o);u&&l.set(a,u)}return n},P9=typeof XMLHttpRequest<"u",D9=P9&&function(e){return new Promise(function(t,i){const a=Bk(e);let o=a.data;const l=ca.from(a.headers).normalize();let{responseType:f,onUploadProgress:d,onDownloadProgress:u}=a,p,g,b,v,N;function k(){v&&v(),N&&N(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let E=new XMLHttpRequest;E.open(a.method.toUpperCase(),a.url,!0),E.timeout=a.timeout;function T(){if(!E)return;const D=ca.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),O={data:!f||f==="text"||f==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:D,config:e,request:E};$k(function(B){t(B),k()},function(B){i(B),k()},O),E=null}"onloadend"in E?E.onloadend=T:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(T)},E.onabort=function(){E&&(i(new Bt("Request aborted",Bt.ECONNABORTED,e,E)),E=null)},E.onerror=function(){i(new Bt("Network Error",Bt.ERR_NETWORK,e,E)),E=null},E.ontimeout=function(){let U=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const O=a.transitional||Ok;a.timeoutErrorMessage&&(U=a.timeoutErrorMessage),i(new Bt(U,O.clarifyTimeoutError?Bt.ETIMEDOUT:Bt.ECONNABORTED,e,E)),E=null},o===void 0&&l.setContentType(null),"setRequestHeader"in E&&$e.forEach(l.toJSON(),function(U,O){E.setRequestHeader(O,U)}),$e.isUndefined(a.withCredentials)||(E.withCredentials=!!a.withCredentials),f&&f!=="json"&&(E.responseType=a.responseType),u&&([b,N]=cb(u,!0),E.addEventListener("progress",b)),d&&E.upload&&([g,v]=cb(d),E.upload.addEventListener("progress",g),E.upload.addEventListener("loadend",v)),(a.cancelToken||a.signal)&&(p=D=>{E&&(i(!D||D.type?new Rh(null,e,E):D),E.abort(),E=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const I=C9(a.url);if(I&&wr.protocols.indexOf(I)===-1){i(new Bt("Unsupported protocol "+I+":",Bt.ERR_BAD_REQUEST,e));return}E.send(o||null)})},I9=(e,n)=>{const{length:t}=e=e?e.filter(Boolean):[];if(n||t){let i=new AbortController,a;const o=function(u){if(!a){a=!0,f();const p=u instanceof Error?u:this.reason;i.abort(p instanceof Bt?p:new Rh(p instanceof Error?p.message:p))}};let l=n&&setTimeout(()=>{l=null,o(new Bt(`timeout ${n} of ms exceeded`,Bt.ETIMEDOUT))},n);const f=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:d}=i;return d.unsubscribe=()=>$e.asap(f),d}},M9=function*(e,n){let t=e.byteLength;if(t<n){yield e;return}let i=0,a;for(;i<t;)a=i+n,yield e.slice(i,a),i=a},R9=async function*(e,n){for await(const t of O9(e))yield*M9(t,n)},O9=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:t,value:i}=await n.read();if(t)break;yield i}}finally{await n.cancel()}},OC=(e,n,t,i)=>{const a=R9(e,n);let o=0,l,f=d=>{l||(l=!0,i&&i(d))};return new ReadableStream({async pull(d){try{const{done:u,value:p}=await a.next();if(u){f(),d.close();return}let g=p.byteLength;if(t){let b=o+=g;t(b)}d.enqueue(new Uint8Array(p))}catch(u){throw f(u),u}},cancel(d){return f(d),a.return()}},{highWaterMark:2})},$b=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Uk=$b&&typeof ReadableStream=="function",L9=$b&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),qk=(e,...n)=>{try{return!!e(...n)}catch{return!1}},F9=Uk&&qk(()=>{let e=!1;const n=new Request(wr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),LC=64*1024,N1=Uk&&qk(()=>$e.isReadableStream(new Response("").body)),ub={stream:N1&&(e=>e.body)};$b&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!ub[n]&&(ub[n]=$e.isFunction(e[n])?t=>t[n]():(t,i)=>{throw new Bt(`Response type '${n}' is not supported`,Bt.ERR_NOT_SUPPORT,i)})})})(new Response);const $9=async e=>{if(e==null)return 0;if($e.isBlob(e))return e.size;if($e.isSpecCompliantForm(e))return(await new Request(wr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if($e.isArrayBufferView(e)||$e.isArrayBuffer(e))return e.byteLength;if($e.isURLSearchParams(e)&&(e=e+""),$e.isString(e))return(await L9(e)).byteLength},z9=async(e,n)=>{const t=$e.toFiniteNumber(e.getContentLength());return t??$9(n)},B9=$b&&(async e=>{let{url:n,method:t,data:i,signal:a,cancelToken:o,timeout:l,onDownloadProgress:f,onUploadProgress:d,responseType:u,headers:p,withCredentials:g="same-origin",fetchOptions:b}=Bk(e);u=u?(u+"").toLowerCase():"text";let v=I9([a,o&&o.toAbortSignal()],l),N;const k=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let E;try{if(d&&F9&&t!=="get"&&t!=="head"&&(E=await z9(p,i))!==0){let O=new Request(n,{method:"POST",body:i,duplex:"half"}),$;if($e.isFormData(i)&&($=O.headers.get("content-type"))&&p.setContentType($),O.body){const[B,q]=IC(E,cb(MC(d)));i=OC(O.body,LC,B,q)}}$e.isString(g)||(g=g?"include":"omit");const T="credentials"in Request.prototype;N=new Request(n,{...b,signal:v,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:i,duplex:"half",credentials:T?g:void 0});let I=await fetch(N);const D=N1&&(u==="stream"||u==="response");if(N1&&(f||D&&k)){const O={};["status","statusText","headers"].forEach(H=>{O[H]=I[H]});const $=$e.toFiniteNumber(I.headers.get("content-length")),[B,q]=f&&IC($,cb(MC(f),!0))||[];I=new Response(OC(I.body,LC,B,()=>{q&&q(),k&&k()}),O)}u=u||"text";let U=await ub[$e.findKey(ub,u)||"text"](I,e);return!D&&k&&k(),await new Promise((O,$)=>{$k(O,$,{data:U,headers:ca.from(I.headers),status:I.status,statusText:I.statusText,config:e,request:N})})}catch(T){throw k&&k(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new Bt("Network Error",Bt.ERR_NETWORK,e,N),{cause:T.cause||T}):Bt.from(T,T&&T.code,e,N)}}),C1={http:n9,xhr:D9,fetch:B9};$e.forEach(C1,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const FC=e=>`- ${e}`,U9=e=>$e.isFunction(e)||e===null||e===!1,Vk={getAdapter:e=>{e=$e.isArray(e)?e:[e];const{length:n}=e;let t,i;const a={};for(let o=0;o<n;o++){t=e[o];let l;if(i=t,!U9(t)&&(i=C1[(l=String(t)).toLowerCase()],i===void 0))throw new Bt(`Unknown adapter '${l}'`);if(i)break;a[l||"#"+o]=i}if(!i){const o=Object.entries(a).map(([f,d])=>`adapter ${f} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=n?o.length>1?`since :
`+o.map(FC).join(`
`):" "+FC(o[0]):"as no adapter specified";throw new Bt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:C1};function h0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rh(null,e)}function $C(e){return h0(e),e.headers=ca.from(e.headers),e.data=f0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Vk.getAdapter(e.adapter||sg.adapter)(e).then(function(i){return h0(e),i.data=f0.call(e,e.transformResponse,i),i.headers=ca.from(i.headers),i},function(i){return Fk(i)||(h0(e),i&&i.response&&(i.response.data=f0.call(e,e.transformResponse,i.response),i.response.headers=ca.from(i.response.headers))),Promise.reject(i)})}const Hk="1.8.4",zb={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{zb[e]=function(i){return typeof i===e||"a"+(n<1?"n ":" ")+e}});const zC={};zb.transitional=function(n,t,i){function a(o,l){return"[Axios v"+Hk+"] Transitional option '"+o+"'"+l+(i?". "+i:"")}return(o,l,f)=>{if(n===!1)throw new Bt(a(l," has been removed"+(t?" in "+t:"")),Bt.ERR_DEPRECATED);return t&&!zC[l]&&(zC[l]=!0,console.warn(a(l," has been deprecated since v"+t+" and will be removed in the near future"))),n?n(o,l,f):!0}};zb.spelling=function(n){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${n}`),!0)};function q9(e,n,t){if(typeof e!="object")throw new Bt("options must be an object",Bt.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const o=i[a],l=n[o];if(l){const f=e[o],d=f===void 0||l(f,o,e);if(d!==!0)throw new Bt("option "+o+" must be "+d,Bt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Bt("Unknown option "+o,Bt.ERR_BAD_OPTION)}}const Bx={assertOptions:q9,validators:zb},Ao=Bx.validators;let Cd=class{constructor(n){this.defaults=n,this.interceptors={request:new PC,response:new PC}}async request(n,t){try{return await this._request(n,t)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}catch{}}throw i}}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=Ed(this.defaults,t);const{transitional:i,paramsSerializer:a,headers:o}=t;i!==void 0&&Bx.assertOptions(i,{silentJSONParsing:Ao.transitional(Ao.boolean),forcedJSONParsing:Ao.transitional(Ao.boolean),clarifyTimeoutError:Ao.transitional(Ao.boolean)},!1),a!=null&&($e.isFunction(a)?t.paramsSerializer={serialize:a}:Bx.assertOptions(a,{encode:Ao.function,serialize:Ao.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Bx.assertOptions(t,{baseUrl:Ao.spelling("baseURL"),withXsrfToken:Ao.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=o&&$e.merge(o.common,o[t.method]);o&&$e.forEach(["delete","get","head","post","put","patch","common"],N=>{delete o[N]}),t.headers=ca.concat(l,o);const f=[];let d=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(d=d&&k.synchronous,f.unshift(k.fulfilled,k.rejected))});const u=[];this.interceptors.response.forEach(function(k){u.push(k.fulfilled,k.rejected)});let p,g=0,b;if(!d){const N=[$C.bind(this),void 0];for(N.unshift.apply(N,f),N.push.apply(N,u),b=N.length,p=Promise.resolve(t);g<b;)p=p.then(N[g++],N[g++]);return p}b=f.length;let v=t;for(g=0;g<b;){const N=f[g++],k=f[g++];try{v=N(v)}catch(E){k.call(this,E);break}}try{p=$C.call(this,v)}catch(N){return Promise.reject(N)}for(g=0,b=u.length;g<b;)p=p.then(u[g++],u[g++]);return p}getUri(n){n=Ed(this.defaults,n);const t=zk(n.baseURL,n.url,n.allowAbsoluteUrls);return Rk(t,n.params,n.paramsSerializer)}};$e.forEach(["delete","get","head","options"],function(n){Cd.prototype[n]=function(t,i){return this.request(Ed(i||{},{method:n,url:t,data:(i||{}).data}))}});$e.forEach(["post","put","patch"],function(n){function t(i){return function(o,l,f){return this.request(Ed(f||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Cd.prototype[n]=t(),Cd.prototype[n+"Form"]=t(!0)});let V9=class Gk{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const i=this;this.promise.then(a=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](a);i._listeners=null}),this.promise.then=a=>{let o;const l=new Promise(f=>{i.subscribe(f),o=f}).then(a);return l.cancel=function(){i.unsubscribe(o)},l},n(function(o,l,f){i.reason||(i.reason=new Rh(o,l,f),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const n=new AbortController,t=i=>{n.abort(i)};return this.subscribe(t),n.signal.unsubscribe=()=>this.unsubscribe(t),n.signal}static source(){let n;return{token:new Gk(function(a){n=a}),cancel:n}}};function H9(e){return function(t){return e.apply(null,t)}}function G9(e){return $e.isObject(e)&&e.isAxiosError===!0}const j1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(j1).forEach(([e,n])=>{j1[n]=e});function Yk(e){const n=new Cd(e),t=Ck(Cd.prototype.request,n);return $e.extend(t,Cd.prototype,n,{allOwnKeys:!0}),$e.extend(t,n,null,{allOwnKeys:!0}),t.create=function(a){return Yk(Ed(e,a))},t}const mi=Yk(sg);mi.Axios=Cd;mi.CanceledError=Rh;mi.CancelToken=V9;mi.isCancel=Fk;mi.VERSION=Hk;mi.toFormData=Fb;mi.AxiosError=Bt;mi.Cancel=mi.CanceledError;mi.all=function(n){return Promise.all(n)};mi.spread=H9;mi.isAxiosError=G9;mi.mergeConfig=Ed;mi.AxiosHeaders=ca;mi.formToJSON=e=>Lk($e.isHTMLForm(e)?new FormData(e):e);mi.getAdapter=Vk.getAdapter;mi.HttpStatusCode=j1;mi.default=mi;const{Axios:Ine,AxiosError:Mne,CanceledError:Rne,isCancel:One,CancelToken:Lne,VERSION:Fne,all:$ne,Cancel:zne,isAxiosError:Bne,spread:Une,toFormData:qne,AxiosHeaders:Vne,HttpStatusCode:Hne,formToJSON:Gne,getAdapter:Yne,mergeConfig:Wne}=mi;function Y9(){const[e,n]=w.useState(null),[t,i]=w.useState(!1);return w.useEffect(()=>{const f=()=>{i(!1),n(null)};if(e)return e.getTracks().forEach(d=>d.addEventListener("ended",f)),()=>{e.getTracks().forEach(d=>d.removeEventListener("ended",f))}},[e]),{type:"screen",start:async()=>{const f=await navigator.mediaDevices.getDisplayMedia({video:!0});return n(f),i(!0),f},stop:()=>{e&&(e.getTracks().forEach(f=>f.stop()),n(null),i(!1))},isStreaming:t,stream:e}}function W9(){const[e,n]=w.useState(null),[t,i]=w.useState(!1);return w.useEffect(()=>{const f=()=>{i(!1),n(null)};if(e)return e.getTracks().forEach(d=>d.addEventListener("ended",f)),()=>{e.getTracks().forEach(d=>d.removeEventListener("ended",f))}},[e]),{type:"webcam",start:async()=>{const f=await navigator.mediaDevices.getUserMedia({video:!0});return n(f),i(!0),f},stop:()=>{e&&(e.getTracks().forEach(f=>f.stop()),n(null),i(!1))},isStreaming:t,stream:e}}class Q9 extends wk{constructor(t){super();Wn(this,"client");Wn(this,"_status","disconnected");Wn(this,"_session",null);Wn(this,"_model",null);Wn(this,"config",null);this.client=new xk(t),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(t,i){const a={date:new Date,type:t,message:i};this.emit("log",a)}async connect(t,i){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=i,this._model=t;const a={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:t,config:i,callbacks:a})}catch(o){return console.error("Error connecting to GenAI Live:",o),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var t;return this.session?((t=this.session)==null||t.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(t){this.log("server.error",t.message),this.emit("error",t)}onclose(t){this.log("server.close",`disconnected ${t.reason?`with reason: ${t.reason}`:""}`),this.emit("close",t)}async onmessage(t){var i;if(t.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(t.toolCall){this.log("server.toolCall",t),this.emit("toolcall",t.toolCall);return}if(t.toolCallCancellation){this.log("server.toolCallCancellation",t),this.emit("toolcallcancellation",t.toolCallCancellation);return}if(t.serverContent){const{serverContent:a}=t;if("interrupted"in a){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in a&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in a){let o=((i=a.modelTurn)==null?void 0:i.parts)||[];const l=o.filter(p=>{var g;return p.inlineData&&((g=p.inlineData.mimeType)==null?void 0:g.startsWith("audio/pcm"))}),f=l.map(p=>{var g;return(g=p.inlineData)==null?void 0:g.data}),d=Nk.difference(o,l);if(f.forEach(p=>{if(p){const g=l8(p);this.emit("audio",g),this.log("server.audio",`buffer (${g.byteLength})`)}}),!d.length)return;o=d;const u={modelTurn:{parts:o}};this.emit("content",u),this.log("server.content",t)}}else console.log("received unmatched message",t)}sendRealtimeInput(t){var l;let i=!1,a=!1;for(const f of t)if((l=this.session)==null||l.sendRealtimeInput({media:f}),f.mimeType.includes("audio")&&(i=!0),f.mimeType.includes("image")&&(a=!0),i&&a)break;const o=i&&a?"audio + video":i?"audio":a?"video":"unknown";this.log("client.realtimeInput",o)}sendToolResponse(t){var i;t.functionResponses&&t.functionResponses.length&&((i=this.session)==null||i.sendToolResponse({functionResponses:t.functionResponses}),this.log("client.toolResponse",t))}send(t,i=!0){var a;(a=this.session)==null||a.sendClientContent({turns:t,turnComplete:i}),this.log("client.send",{turns:Array.isArray(t)?t:[t],turnComplete:i})}}function J9(e){const n=w.useMemo(()=>new Q9(e),[e]),t=w.useRef(null),[i,a]=w.useState("models/gemini-2.5-flash-live-preview"),[o,l]=w.useState({}),[f,d]=w.useState(!1),[u,p]=w.useState(0),[g,b]=w.useState(null);w.useEffect(()=>{t.current||bk({id:"audio-out"}).then(k=>{t.current=new y8(k),t.current.addWorklet("vumeter-out",vk,E=>{p(E.data.volume)}).then(()=>{})})},[t]),w.useEffect(()=>{const k=()=>{d(!0)},E=()=>{d(!1)},T=O=>{console.error("error",O)},I=()=>{var O;return(O=t.current)==null?void 0:O.stop()},D=O=>{var $;return($=t.current)==null?void 0:$.addPCM16(new Uint8Array(O))},U=O=>{if(console.log("Received content event:",O),O.modelTurn&&O.modelTurn.parts){const $=O.modelTurn.parts.filter(B=>"text"in B&&B.text);if($.length>0){const B=$.map(q=>q.text).join(" ");b(B),console.log("AI Summary received:",B)}}};return n.on("error",T).on("open",k).on("close",E).on("interrupted",I).on("audio",D).on("content",U),()=>{n.off("error",T).off("open",k).off("close",E).off("interrupted",I).off("audio",D).off("content",U).disconnect()}},[n]);const v=w.useCallback(async()=>{if(!o)throw new Error("config has not been set");n.disconnect(),await n.connect(i,o)},[n,o,i]),N=w.useCallback(async()=>{n.disconnect(),d(!1)},[d,n]);return{client:n,config:o,setConfig:l,model:i,setModel:a,connected:f,connect:v,disconnect:N,volume:u,aiSummary:g}}const Wk=w.createContext(void 0),kw=({options:e,children:n})=>{const t=J9(e);return r.jsx(Wk.Provider,{value:t,children:n})},Yc=()=>{const e=w.useContext(Wk);if(!e)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return e};function K9(){const{config:e,setConfig:n}=Yc(),[t,i]=w.useState({value:"audio",label:"audio"}),a=w.useCallback(o=>{n({...e,responseModalities:[o==="audio"?Uc.AUDIO:Uc.TEXT]})},[e,n]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),r.jsx(tk,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:t,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:o=>{i(o),o&&(o.value==="audio"||o.value==="text")&&a(o.value)}})]})}const BC=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function X9(){const{config:e,setConfig:n}=Yc();w.useEffect(()=>{var f,d,u;const o=((u=(d=(f=e.speechConfig)==null?void 0:f.voiceConfig)==null?void 0:d.prebuiltVoiceConfig)==null?void 0:u.voiceName)||"Atari02";i({value:o,label:o})},[e]);const[t,i]=w.useState(BC[5]),a=w.useCallback(o=>{n({...e,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:o}}}})},[e,n]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),r.jsx(tk,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:t,defaultValue:t,options:BC,onChange:o=>{i(o),o&&a(o.value)}})]})}function Z9(){const[e,n]=w.useState(!1),{config:t,setConfig:i,connected:a}=Yc(),o=w.useMemo(()=>Array.isArray(t.tools)?t.tools.filter(u=>Array.isArray(u.functionDeclarations)).map(u=>u.functionDeclarations).filter(u=>!!u).flat():[],[t]),l=w.useMemo(()=>{var u;return t.systemInstruction?typeof t.systemInstruction=="string"?t.systemInstruction:Array.isArray(t.systemInstruction)?t.systemInstruction.map(p=>typeof p=="string"?p:p.text).join(`
`):typeof t.systemInstruction=="object"&&"parts"in t.systemInstruction&&((u=t.systemInstruction.parts)==null?void 0:u.map(p=>p.text).join(`
`))||"":""},[t]),f=w.useCallback(u=>{const p={...t,systemInstruction:u.target.value};i(p)},[t,i]),d=w.useCallback((u,p)=>{var b;const g={...t,tools:((b=t.tools)==null?void 0:b.map(v=>{const N=v;return Array.isArray(N.functionDeclarations)?{...v,functionDeclarations:N.functionDeclarations.map(k=>k.name===u?{...k,description:p}:k)}:v}))||[]};i(g)},[t,i]);return r.jsxs("div",{className:"settings-dialog",children:[r.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>n(!e),children:"settings"}),r.jsx("dialog",{className:"dialog",style:{display:e?"block":"none"},children:r.jsxs("div",{className:`dialog-container ${a?"disabled":""}`,children:[a&&r.jsx("div",{className:"connected-indicator",children:r.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),r.jsxs("div",{className:"mode-selectors",children:[r.jsx(K9,{}),r.jsx(X9,{})]}),r.jsx("h3",{children:"System Instructions"}),r.jsx("textarea",{className:"system",onChange:f,value:l}),r.jsx("h4",{children:"Function declarations"}),r.jsx("div",{className:"function-declarations",children:r.jsx("div",{className:"fd-rows",children:o.map((u,p)=>{var g;return r.jsxs("div",{className:"fd-row",children:[r.jsx("span",{className:"fd-row-name",children:u.name}),r.jsx("span",{className:"fd-row-args",children:Object.keys(((g=u.parameters)==null?void 0:g.properties)||{}).map((b,v)=>r.jsx("span",{children:b},v))}),r.jsx("input",{className:"fd-row-description",type:"text",defaultValue:u.description,onBlur:b=>d(u.name,b.target.value)},`fd-${u.description}`)]},`function-${p}`)})})})]})})]})}const UC=w.memo(({isStreaming:e,onIcon:n,offIcon:t,start:i,stop:a})=>e?r.jsx("button",{className:"action-button",onClick:a,children:r.jsx("span",{className:"material-symbols-outlined",children:n})}):r.jsx("button",{className:"action-button",onClick:i,children:r.jsx("span",{className:"material-symbols-outlined",children:t})}));function eq({videoRef:e,children:n,onVideoStreamChange:t=()=>{},supportsVideo:i,enableEditingSettings:a}){const o=[W9(),Y9()],[l,f]=w.useState(null),[d,u]=o,[p,g]=w.useState(0),[b]=w.useState(()=>new Sk),[v,N]=w.useState(!1),k=w.useRef(null),E=w.useRef(null),{client:T,connected:I,connect:D,disconnect:U,volume:O}=Yc();w.useEffect(()=>{!I&&E.current&&E.current.focus()},[I]),w.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(p*200,8))}px`)},[p]),w.useEffect(()=>{const B=q=>{T.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:q}])};return I&&!v&&b?b.on("data",B).on("volume",g).start():b.stop(),()=>{b.off("data",B).off("volume",g)}},[I,T,v,b]),w.useEffect(()=>{e.current&&(e.current.srcObject=l);let B=-1;function q(){const H=e.current,F=k.current;if(!H||!F)return;const L=F.getContext("2d");if(F.width=H.videoWidth*.25,F.height=H.videoHeight*.25,F.width+F.height>0){L.drawImage(H,0,0,F.width,F.height);const Q=F.toDataURL("image/jpeg",1),ne=Q.slice(Q.indexOf(",")+1,1/0);T.sendRealtimeInput([{mimeType:"image/jpeg",data:ne}])}I&&(B=window.setTimeout(q,1e3/.5))}return I&&l!==null&&requestAnimationFrame(q),()=>{clearTimeout(B)}},[I,l,T,e]);const $=B=>async()=>{if(B){const q=await B.start();f(q),t(q)}else f(null),t(null);o.filter(q=>q!==B).forEach(q=>q.stop())};return r.jsxs("section",{className:"control-tray",children:[r.jsx("canvas",{style:{display:"none"},ref:k}),r.jsxs("nav",{className:Bc("actions-nav",{disabled:!I}),children:[r.jsx("button",{className:Bc("action-button mic-button",{recording:!v&&I}),onClick:()=>N(!v),children:v?r.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):r.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),r.jsx("div",{className:"action-button no-action outlined",children:r.jsx(p8,{volume:O,active:I,hover:!1})}),i&&r.jsxs(r.Fragment,{children:[r.jsx(UC,{isStreaming:u.isStreaming,start:$(u),stop:$(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),r.jsx(UC,{isStreaming:d.isStreaming,start:$(d),stop:$(),onIcon:"videocam_off",offIcon:"videocam"})]}),n]}),r.jsxs("div",{className:Bc("connection-container",{connected:I}),children:[r.jsx("div",{className:"connection-button-container",children:r.jsx("button",{ref:E,className:Bc("action-button connect-toggle",{connected:I}),onClick:I?U:D,children:r.jsx("span",{className:"material-symbols-outlined filled",children:I?"pause":"play_arrow"})})}),r.jsx("span",{className:"text-indicator",children:"Streaming"})]}),a?r.jsx(Z9,{}):""]})}const qC={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:_h.OBJECT,properties:{summary:{type:_h.STRING,description:"The summary of the patient's case."}},required:["summary"]}},tq=({patientData:e,tokenNumber:n})=>{const[t,i]=w.useState(""),{client:a,setConfig:o,setModel:l}=Yc();return w.useEffect(()=>{l("models/gemini-2.5-flash-live-preview"),o({responseModalities:[Uc.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[qC]}]})},[o,l]),w.useEffect(()=>{const f=d=>{if(!d.functionCalls)return;const u=d.functionCalls.find(p=>p.name===qC.name);if(u){const p=u.args.summary;i(p)}d.functionCalls.length&&setTimeout(()=>{var p;return a.sendToolResponse({functionResponses:(p=d.functionCalls)==null?void 0:p.map(g=>({response:{output:{success:!0}},id:g.id,name:g.name}))})},200)};return a.on("toolcall",f),()=>{a.off("toolcall",f)}},[a]),w.useEffect(()=>{if(t){const f=encodeURIComponent(t);n?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${n}&caseDetails=${f}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${f}`}},[t,n]),r.jsxs("div",{className:"hospital-reception",children:[r.jsx("h1",{children:"Newtons Ai"}),r.jsx("p",{children:"Newtons Ai"}),n&&r.jsxs("h2",{children:["Token Number: ",n]}),e&&r.jsxs("div",{children:[r.jsx("h2",{children:"Patient Details"}),r.jsx("pre",{children:JSON.stringify(e,null,2)})]}),t&&r.jsxs("div",{children:[r.jsx("h2",{children:"Case Summary (from Tool Call)"}),r.jsx("p",{children:t})]})]})},VC="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function nq(){const e=i2();if(!e)return console.warn("No auth token found, using default Live API key."),VC;try{const t=(await mi.get("/api/clinics/gemini-api-key",{headers:{Authorization:`Bearer ${e}`}})).data.geminiApiKey;if(t)return t}catch(n){console.error("Failed to fetch clinic-specific Live API key:",n)}return console.warn("Clinic-specific Live API key not found or failed to fetch, using default."),VC}function iq(){const e=w.useRef(null),[n,t]=w.useState(null),[i,a]=w.useState(null);return w.useEffect(()=>{(async()=>{try{const l=await nq();a({apiKey:l})}catch(l){console.error("Error setting Live API options:",l)}})()},[]),i?r.jsx("div",{className:"App",children:r.jsx(kw,{options:i,children:r.jsx(rq,{videoRef:e,setVideoStream:t,videoStream:n})})}):r.jsx("div",{children:"Loading Live API settings..."})}const rq=({videoRef:e,setVideoStream:n,videoStream:t})=>{const[i,a]=w.useState(null),[o,l]=w.useState(null),{connected:f,client:d,connect:u,config:p,model:g}=Yc(),[b,v]=w.useState(""),N=w.useRef(null),[k,E]=w.useState(!1);w.useEffect(()=>{const I=window.matchMedia("(prefers-color-scheme: dark)"),D=U=>{document.documentElement.setAttribute("data-theme",U.matches?"dark":"light")};return D(I),I.addEventListener("change",D),()=>I.removeEventListener("change",D)},[]),w.useEffect(()=>{const I=new URLSearchParams(window.location.search),D={};for(const[U,O]of I.entries())U==="token_number"?l(O):D[U]=O;a(D)},[]),w.useEffect(()=>{Object.keys(p).length>0&&g&&u()},[u,p,g]),w.useEffect(()=>{if(f&&i&&!k){const I=JSON.stringify(i,null,2);d.send([{text:I}]),v(""),E(!0)}},[f,i,d,k]),w.useEffect(()=>{i&&v(JSON.stringify(i,null,2))},[i]);const T=()=>{d.send([{text:b}]),v(""),N.current&&(N.current.innerText="")};return r.jsx("div",{className:"streaming-console",children:r.jsxs("main",{children:[r.jsxs("div",{className:"main-app-area",children:[r.jsx(tq,{patientData:i,tokenNumber:o}),r.jsx("video",{className:Bc("stream",{hidden:!e.current||!t}),ref:e,autoPlay:!0,playsInline:!0})]}),r.jsx("div",{className:Bc("input-container",{disabled:!f}),children:r.jsxs("div",{className:"input-content",children:[r.jsx("textarea",{className:"input-area",ref:N,onKeyDown:I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),I.stopPropagation(),T())},onChange:I=>v(I.target.value),value:b}),r.jsx("span",{className:Bc("input-content-placeholder",{hidden:b.length}),children:"Typesomething..."}),r.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:T,children:"send"})]})}),r.jsx(eq,{videoRef:e,supportsVideo:!0,onVideoStreamChange:n,enableEditingSettings:!0})]})})},HC="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",aq=({volume:e,active:n})=>{const t=Array.from({length:5},(i,a)=>r.jsx("div",{className:`audio-bar ${n?"active":""}`,style:{height:n?`${Math.min(24,20+e*40*(1+Math.sin(a)*.3))}px`:"8px",animationDelay:`${a*.1}s`}},a));return r.jsx("div",{className:"audio-pulse",children:t})},sq=w.forwardRef(({videoRef:e,supportsVideo:n,onVideoStreamChange:t,textInput:i,onSubmitTextInput:a},o)=>{var $;const{connected:l,connect:f,disconnect:d,client:u,volume:p}=Yc(),[g,b]=w.useState(!1),[v,N]=w.useState(!1),[k,E]=w.useState(!1),[T]=w.useState(()=>new Sk),I=async()=>{l?await d():(await f(),i.trim()&&a())};w.useEffect(()=>{const B=q=>{u.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:q}])};return l&&!g?T.on("data",B).start():T.stop(),()=>{T.off("data",B),T.stop()}},[l,u,g,T]);const D=w.useCallback(async()=>{if(v)O==null||O.getTracks().forEach(B=>B.stop()),t(null),N(!1);else try{const B=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});e.current&&(e.current.srcObject=B),t(B),N(!0)}catch(B){console.error("Error accessing webcam:",B),N(!1)}},[v,t,e]),U=w.useCallback(async()=>{if(k)O==null||O.getTracks().forEach(B=>B.stop()),t(null),E(!1);else try{const B=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});e.current&&(e.current.srcObject=B),t(B),E(!0)}catch(B){console.error("Error accessing screen share:",B),E(!1)}},[k,t,e]),O=($=e.current)==null?void 0:$.srcObject;return w.useEffect(()=>()=>{O&&O.getTracks().forEach(B=>B.stop())},[O]),w.useImperativeHandle(o,()=>({handleConnect:I})),r.jsx("div",{className:"live-api-control-tray",children:r.jsxs("div",{className:"live-api-control-tray-inner",children:[r.jsxs("div",{className:"live-api-control-group",children:[r.jsx("button",{onClick:()=>b(!g),disabled:!l,className:`live-api-control-button ${l&&!g?"mic-active":"mic-inactive"}`,"aria-label":g?"Unmute microphone":"Mute microphone",children:g?r.jsx(GI,{className:"w-5 h-5"}):r.jsx(e2,{className:"w-5 h-5"})}),r.jsx("div",{className:"live-api-audio-pulse-container",children:r.jsx(aq,{volume:p,active:l})}),n&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:U,disabled:!l,className:`live-api-control-button ${k?"video-active":"video-inactive"}`,"aria-label":k?"Stop screen share":"Start screen share",children:r.jsx(QI,{className:"w-5 h-5"})}),r.jsx("button",{onClick:D,disabled:!l,className:`live-api-control-button ${v?"video-active":"video-inactive"}`,"aria-label":v?"Turn off webcam":"Turn on webcam",children:r.jsx(zM,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"live-api-control-group",children:[r.jsxs("div",{className:"live-api-status-indicator",children:[r.jsx("div",{className:`live-api-status-dot ${l?"connected":"disconnected"}`}),r.jsx("span",{className:"live-api-status-text",children:l?"Streaming":"Disconnected"})]}),r.jsx("button",{onClick:I,className:`live-api-connect-button ${l?"connected":"disconnected"}`,children:l?r.jsxs(r.Fragment,{children:[r.jsx(nM,{className:"w-5 h-5"}),r.jsx("span",{children:"Pause"})]}):r.jsxs(r.Fragment,{children:[r.jsx(lM,{className:"w-5 h-5"}),r.jsx("span",{children:"Start"})]})})]})]})})}),oq=({patientData:e,tokenNumber:n,aiSummary:t,clinicName:i})=>r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx("div",{className:"hospital-reception-logo",children:r.jsx("span",{children:i.charAt(0)})}),r.jsxs("h1",{className:"hospital-reception-title",children:[i," AI"]}),r.jsxs("p",{className:"hospital-reception-subtitle",children:["Intelligent ",i," Reception Assistant"]})]}),n&&r.jsxs("div",{className:"hospital-reception-token-card",children:[r.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),r.jsx("p",{className:"hospital-reception-token-number",children:n})]}),e?r.jsxs("div",{className:"hospital-reception-patient-info-card",children:[r.jsx("h3",{className:"hospital-reception-patient-info-title",children:"Patient Information"}),r.jsx("div",{className:"hospital-reception-patient-info-content",children:r.jsx("pre",{className:"hospital-reception-patient-info-pre",children:JSON.stringify(e,null,2)})})]}):r.jsxs("div",{className:"hospital-reception-patient-info-card",children:[r.jsx("h3",{className:"hospital-reception-patient-info-title",children:"New Case"}),r.jsx("p",{className:"hospital-reception-patient-info-pre",children:"No patient data provided. This is a new case."})]}),t&&r.jsxs("div",{className:"hospital-reception-summary-card",children:[r.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),r.jsx("p",{className:"hospital-reception-summary-text",children:t})]})]}),GC={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:_h.OBJECT,properties:{summary:{type:_h.STRING,description:"The summary of the patient's case."}},required:["summary"]}},lq=({onClose:e,patientData:n,tokenNumber:t,onAiSummaryChange:i,clinicName:a,aiLanguage:o})=>{const l=w.useRef(null),f=w.useRef(null),[d,u]=w.useState(null),[p,g]=w.useState("hi"),{client:b,connected:v,aiSummary:N,setConfig:k,setModel:E,disconnect:T}=Yc(),[I,D]=w.useState(null),U=w.useMemo(()=>{let B=`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, and sex.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in ${o||"English"}.dont write the ${o||"English"} words in english`;return n&&(B+=`

Patient Data: ${JSON.stringify(n,null,2)}`),{responseModalities:[Uc.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:B}]},tools:[{functionDeclarations:[GC]}]}},[n,o]);w.useEffect(()=>{E("models/gemini-2.5-flash-live-preview"),k(U);const B=setTimeout(()=>{f.current&&!v&&f.current.handleConnect()},2e3);return()=>clearTimeout(B)},[k,E,U,v]),w.useEffect(()=>()=>{v&&T()},[v,T]),w.useEffect(()=>{i(N)},[N,i]),w.useEffect(()=>{const B=q=>{if(q.modelTurn&&q.modelTurn.parts){for(const H of q.modelTurn.parts)if(H.executableCode){const F=H.executableCode.code,L=/summary=["'](.*?)["']/.exec(F);if(L&&L[1]){const Q=L[1];D(Q),i(Q)}}}};return b.on("content",B),()=>{b.off("content",B)}},[b,i]),w.useEffect(()=>{const B=q=>{if(!q.functionCalls)return;const H=q.functionCalls.find(F=>F.name===GC.name);if(H){const F=H.args.summary;i(F)}q.functionCalls.length&&setTimeout(()=>{var F;return b.sendToolResponse({functionResponses:(F=q.functionCalls)==null?void 0:F.map(L=>({response:{output:{success:!0}},id:L.id,name:L.name}))})},200)};return b.on("toolcall",B),()=>{b.off("toolcall",B)}},[b,i]);const O=()=>{p.trim()&&(b.send([{text:p}]),g(""))},$=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),O())};return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsxs("div",{className:"live-api-modal-header",children:[r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx("div",{className:"live-api-modal-logo",children:r.jsx("span",{children:a.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h1",{className:"live-api-modal-title",children:a}),r.jsxs("p",{className:"live-api-modal-subtitle",children:[a," Hospital Assistant"]})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:e,className:"live-api-modal-close-button","aria-label":"Close modal",children:r.jsx(ci,{className:"w-6 h-6"})})})]}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"live-api-reception-area",children:[r.jsx(oq,{patientData:n,tokenNumber:t,aiSummary:I??N,clinicName:a}),d&&r.jsx("video",{ref:l,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),r.jsx("div",{className:"live-api-input-area",children:r.jsxs("div",{className:"live-api-input-container",children:[r.jsx("textarea",{value:p,onChange:B=>g(B.target.value),onKeyDown:$,placeholder:"Type your message here...",disabled:!v,rows:1,className:"live-api-textarea"}),r.jsx("button",{onClick:O,disabled:!v||!p.trim(),className:"live-api-send-button","aria-label":"Send message",children:r.jsx(mM,{className:"w-5 h-5"})})]})}),r.jsx(sq,{ref:f,videoRef:l,supportsVideo:!0,onVideoStreamChange:u,textInput:p,onSubmitTextInput:O})]})})]})})},Qk=({onClose:e,patientData:n,tokenNumber:t,onAiSummaryChange:i})=>{const[a,o]=w.useState(null),[l,f]=w.useState("Newtons Ai"),[d,u]=w.useState(""),[p,g]=w.useState(!0);if(w.useEffect(()=>{(async()=>{try{const k=await(await pe("/api/clinics/settings")).json();k.gemini_api_key?o(k.gemini_api_key):o(HC),k.name&&k.name!==""?f(k.name):f("Newtons Ai"),u(k.aiLanguage||"")}catch(N){console.error("Failed to fetch clinic settings, using default API key and unknown clinic name:",N),o(HC),f("Newtons Ai"),u("")}finally{g(!1)}})()},[]),p)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsx("div",{className:"live-api-modal-content",children:r.jsx("div",{children:"Loading API Key and Clinic Name..."})})});if(!a)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsx("div",{className:"live-api-modal-content",children:r.jsx("div",{children:"Error: API Key not available."})})});const b={apiKey:a};return r.jsx(kw,{options:b,children:r.jsx(lq,{onClose:e,patientData:n,tokenNumber:t,onAiSummaryChange:i,clinicName:l,aiLanguage:d})})},cq=({onClose:e})=>{const n=Nt(),t=()=>{e(),n("/start-clinic-subscription")};return r.jsx("div",{className:"go-pro-modal-overlay",children:r.jsxs("div",{className:"go-pro-modal-content",children:[r.jsx("button",{onClick:e,className:"go-pro-modal-close-button",children:r.jsx(ci,{size:24})}),r.jsx("h2",{className:"go-pro-modal-title",children:"Voice AI Agent for Pro Members Only"}),r.jsx("p",{className:"go-pro-modal-message",children:"Unlock the full potential of our Voice AI Agent by upgrading to a Pro subscription. Enjoy advanced features and seamless patient interactions."}),r.jsx("button",{onClick:t,className:"go-pro-button",children:"Go Pro Now"})]})})},uq="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",dq={apiKey:uq},ph=()=>{const[e,n]=w.useState(""),[t,i]=w.useState([]),[a,o]=w.useState(!1),[l,f]=w.useState(null),[d,u]=w.useState(!1),[p,g]=w.useState(null),[b,v]=w.useState(!1),[N,k]=w.useState(null),E=w.useRef(null),[T,I]=w.useState(!1),[D,U]=w.useState(!1),[O,$]=w.useState(null),[B,q]=w.useState(null),[H,F]=w.useState(null),[L,Q]=w.useState(!1),ne=Nt(),ie=nr();w.useEffect(()=>{(async()=>{try{const se=await f2();F(se.hasProPlan)}catch(se){console.error("Error fetching pro status:",se),F(!1)}})()},[]);const oe=w.useCallback(async te=>{const se=te||e;if(!se.trim()){k("Please enter complaint details.");return}v(!0),k(null);try{const M=await pe("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"New Patient - Direct Entry",age:null,gender:null,phone:null,address:null})});if(!M.ok){const Le=await M.json().catch(()=>({message:"Failed to create patient"}));if(M.status===403&&Le.message.includes("Patient limit")){ne("/start-clinic-subscription",{state:{errorMessage:Le.message}});return}throw new Error(Le.message||`Failed to create patient: ${M.statusText}`)}const fe=await M.json();if(!fe||!fe.id)throw new Error("Failed to create new patient or retrieve patient ID.");const we=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:fe.id,complaint:se})});if(!we.ok){const Le=await we.text();throw new Error(`Failed to create queue entry: ${Le||we.statusText}`)}const ce=await we.json();if(!ce||!ce.id)throw new Error("Failed to create new complaint record or retrieve record ID.");ne(`/dashboard/edit-complaint/${ce.id}`,{state:{initialComplaint:se}})}catch(M){console.error("Error starting new complaint:",M),M.message.includes("Patient limit")?(k(`Error: ${M.message}. Please upgrade your plan.`),ne("/start-clinic-subscription")):k(`Error: ${M.message||"Failed to start new complaint process."}`)}finally{v(!1)}},[e,ne]);w.useEffect(()=>{const te=E.current;te&&(te.style.height="auto",te.style.height=`${te.scrollHeight}px`);const M=new URLSearchParams(ie.search).get("caseDetails");if(M){const fe=decodeURIComponent(M);fe!==e&&(n(fe),I(!0))}},[ie.search,e]),w.useEffect(()=>{T&&e.trim()&&(ne(ie.pathname,{replace:!0}),oe(e),I(!1))},[T,e,oe,ne,ie.pathname]),w.useEffect(()=>{const te=E.current;te&&(te.style.height="auto",te.style.height=`${te.scrollHeight}px`)},[e]),w.useEffect(()=>{O&&(n(O),U(!1),oe(O),$(null))},[O,oe]);const Y=()=>{if(H===!1){Q(!0);return}q({id:null,token:null,name:"New Case",age:null,gender:null}),U(!0)},z=w.useMemo(()=>jb(async te=>{const se=te.trim(),M=/^\d+$/.test(se),fe=se.split(/\s+/).length;if(se.length<2||M&&se.length>10||!M&&fe>2){i([]),o(!1),f(null);return}o(!0),f(null);try{const we=new URLSearchParams({search:encodeURIComponent(te),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),ce=await pe(`/api/patients?${we.toString()}`);if(!ce.ok){const Ne=await ce.text();throw new Error(`API Error (${ce.status}): ${Ne||ce.statusText}`)}const Le=await ce.json();i(Le.patients)}catch(we){console.error("Error searching patients:",we),f(we.message||"Failed to search patients."),i([])}finally{o(!1)}},300),[]),re=te=>{const se=te.target.value;n(se);const M=se.trim(),fe=/^\d+$/.test(M),we=M.split(/\s+/).length;M.length>=2&&!(fe&&M.length>10||!fe&&we>2)?o(!0):(o(!1),i([])),z(se)},X=te=>{te.key==="Enter"&&!te.shiftKey&&(te.preventDefault(),t.length>0&&!a?P(t[0]):e.trim()&&!a&&oe(e))},P=async te=>{i([]),n(""),u(!0),g(null);try{const se=await pe(`/api/queue/patient/${te.id}/latest`);if(se.ok){const we=await se.json();if(we!=null&&we._id){ne(`/dashboard/edit-complaint/${we._id}`),u(!1);return}}else if(se.status!==404){const we=await se.text();throw new Error(`Failed to fetch queue entry: ${we||se.statusText} (${se.status})`)}const M=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:te.id})});if(!M.ok){const we=await M.text();throw new Error(`Failed to create queue entry: ${we||M.statusText} (${M.status})`)}const fe=await M.json();if(fe!=null&&fe.id)ne(`/dashboard/edit-complaint/${fe.id}`);else throw new Error("Failed to get ID from new queue entry.")}catch(se){console.error("Error processing patient selection:",se),g(se.message||"An error occurred while processing the selection.")}finally{u(!1)}};return r.jsxs("div",{className:"patient-search-page-container",children:[r.jsxs("div",{className:"patient-search-header",children:[r.jsxs("button",{onClick:()=>ne(-1),className:"patient-search-button patient-search-button-back",children:[r.jsx(Qt,{size:16}),"Back"]}),r.jsx("h1",{className:"patient-search-page-title",children:"Search Patient Records"}),r.jsx("button",{onClick:()=>ne("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"})]}),r.jsxs("div",{className:"patient-search-content-box",children:[l&&r.jsx("p",{className:"patient-search-error",children:l}),p&&r.jsx("p",{className:"patient-search-error",children:p}),N&&r.jsx("p",{className:"patient-search-error",children:N})]}),r.jsxs("div",{className:"sticky-chat-input-box",children:[t.length>0&&!d&&!b&&r.jsx("ul",{className:"patient-search-results-list",children:t.map(te=>r.jsxs("li",{onClick:()=>P(te),className:"patient-search-result-item",children:[r.jsxs("div",{className:"patient-search-result-item-name-container",children:[r.jsxs("span",{className:"patient-search-result-item-token",children:["[#",te.token,"]"]}),r.jsx("span",{className:"patient-search-result-item-name",children:te.name})]}),r.jsxs("div",{className:"patient-search-result-item-details",children:[te.age?`${te.age} yrs`:"",te.age&&te.gender?" / ":"",te.gender||"N/A"]})]},te.id))}),e.length>=2&&!a&&t.length===0&&!l&&!d&&r.jsxs("p",{className:"patient-search-no-results",children:['No patients found matching, taking new case: "',e,'".']}),r.jsxs("div",{className:"chat-input-controls",children:[r.jsx("textarea",{ref:E,placeholder:"Search by Name/Phone/Token or Enter New Case: Name, Age, Sex, Complaint...",value:e,onChange:re,onKeyDown:X,className:"chat-input",autoFocus:!0,disabled:d||b,rows:1}),r.jsx("button",{onClick:e.trim()?()=>oe(e):Y,className:`chat-submit-button ${b||a?"opacity-50":""}`,disabled:b||a||!!e.trim()&&!e.trim(),"aria-label":e.trim()?"Create New Case":"Use Microphone",children:b||a?r.jsx("div",{className:"spinner"}):e.trim()?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:r.jsx("path",{d:"M12 4l1.41 1.41L7.83 11H20v2H7.83l5.58 5.59L12 20l-8-8 8-8z",transform:"rotate(90 12 12)"})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:r.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1.2-9.1c0-.66.54-1.2 1.2-1.2s1.2.54 1.2 1.2V9c0 .66-.54 1.2-1.2 1.2s-1.2-.54-1.2-1.2V4.9zM17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})})})]})]}),D&&r.jsx(kw,{options:dq,children:r.jsx(Qk,{onClose:()=>U(!1),patientData:B,tokenNumber:null,onAiSummaryChange:$})}),L&&r.jsx(cq,{onClose:()=>Q(!1)})]})},fq=()=>{const e=Nt(),[n,t]=w.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",aiLanguage:"",name:"",logoUrl:"",upi_id:"",address:"",notes:""}),[i,a]=w.useState(!0),[o,l]=w.useState(!1),[f,d]=w.useState(null),[u,p]=w.useState(null);w.useEffect(()=>{(async()=>{a(!0),d(null);try{const N=await pe("/api/clinics/settings");if(!N.ok){const E=await N.json();throw new Error(E.message||"Failed to fetch clinic settings.")}const k=await N.json();t({admissionCharge:parseFloat(k.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(k.perDayCharge||0).toFixed(2),otherCharges:parseFloat(k.otherCharges||0).toFixed(2),aiMemory:k.aiMemory||"",clinicWideSystemPrompt:k.clinicWideSystemPrompt||"",gemini_api_key:k.gemini_api_key||"",low_stock_threshold:k.low_stock_threshold!==void 0&&k.low_stock_threshold!==null?String(k.low_stock_threshold):"10",aiLanguage:k.aiLanguage||"",name:k.name||"",logoUrl:k.logoUrl||"",upi_id:k.upi_id||"",address:k.address||"",notes:k.notes||""})}catch(N){console.error("Error fetching settings:",N),d(`Failed to load settings: ${N.message}`),t({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",aiLanguage:"",name:"Unknown Clinic",logoUrl:"",upi_id:"",address:"",notes:""})}finally{a(!1)}})()},[]);const g=v=>{const{name:N,value:k}=v.target;t(E=>({...E,[N]:k}))},b=async v=>{v.preventDefault(),d(null),p(null),l(!0);const N=parseFloat(n.admissionCharge),k=parseFloat(n.perDayCharge),E=parseFloat(n.otherCharges),T=parseInt(n.low_stock_threshold);if(isNaN(N)||N<0||isNaN(k)||k<0||isNaN(E)||E<0){d("Invalid charge amount. Please enter non-negative numbers for all fields."),l(!1);return}if(isNaN(T)||T<0){d("Invalid low stock threshold. Please enter a non-negative number."),l(!1);return}try{const I=await pe("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:n.name,admissionCharge:N,perDayCharge:k,otherCharges:E,aiMemory:n.aiMemory,clinicWideSystemPrompt:n.clinicWideSystemPrompt,gemini_api_key:n.gemini_api_key,low_stock_threshold:T,aiLanguage:n.aiLanguage,logoUrl:n.logoUrl,upi_id:n.upi_id,address:n.address,notes:n.notes})});if(!I.ok){const U=await I.json();throw new Error(U.message||"Failed to update settings.")}const D=await I.json();t({admissionCharge:parseFloat(D.settings.admissionCharge).toFixed(2),perDayCharge:parseFloat(D.settings.perDayCharge).toFixed(2),otherCharges:parseFloat(D.settings.otherCharges).toFixed(2),aiMemory:D.settings.aiMemory||"",clinicWideSystemPrompt:D.settings.clinicWideSystemPrompt||"",gemini_api_key:D.settings.gemini_api_key||"",low_stock_threshold:D.settings.low_stock_threshold!==void 0&&D.settings.low_stock_threshold!==null?String(D.settings.low_stock_threshold):"10",aiLanguage:D.settings.aiLanguage||"",name:D.settings.name||"",logoUrl:D.settings.logoUrl||"",upi_id:D.settings.upi_id||"",address:D.settings.address||"",notes:D.settings.notes||""}),p("Clinic settings updated successfully!"),setTimeout(()=>p(null),3e3)}catch(I){console.error("Error updating settings:",I),d(`Update failed: ${I.message}`)}finally{l(!1)}};return i?r.jsxs("div",{className:"loading-animation-container",children:[r.jsx("div",{className:"breathing-ball"}),r.jsx("div",{className:"loading-text",children:"Loading settings..."})]}):r.jsxs("div",{className:"clinic-settings-container",children:[r.jsxs("div",{className:"clinic-settings-header-container",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(Qt,{size:24})}),r.jsxs("h3",{className:"clinic-settings-header",children:[r.jsx(ng,{size:24}),"Clinic Settings"]})]}),f&&r.jsx("div",{className:"clinic-settings-alert clinic-settings-alert-error",role:"alert",children:f}),u&&r.jsx("div",{className:"clinic-settings-alert clinic-settings-alert-success",role:"alert",children:u}),r.jsxs("form",{onSubmit:b,className:"clinic-settings-form",children:[r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsx("label",{htmlFor:"name",className:"clinic-settings-label",children:"Clinic Name"}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:g,className:"clinic-settings-input",disabled:o,placeholder:"e.g., My Awesome Clinic"})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"admissionCharge",className:"clinic-settings-label",children:[r.jsx(wd,{size:16})," Admission Charge ()"]}),r.jsx("input",{type:"number",id:"admissionCharge",name:"admissionCharge",value:n.admissionCharge,onChange:g,className:"clinic-settings-input",step:"0.01",min:"0",required:!0,disabled:o,placeholder:"e.g., 500.00"})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"perDayCharge",className:"clinic-settings-label",children:[r.jsx(wd,{size:16})," Per Day Charge ()"]}),r.jsx("input",{type:"number",id:"perDayCharge",name:"perDayCharge",value:n.perDayCharge,onChange:g,className:"clinic-settings-input",step:"0.01",min:"0",required:!0,disabled:o,placeholder:"e.g., 1000.00"})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"otherCharges",className:"clinic-settings-label",children:[r.jsx(wd,{size:16})," Other Charges (Default/Misc.) ()"]}),r.jsx("input",{type:"number",id:"otherCharges",name:"otherCharges",value:n.otherCharges,onChange:g,className:"clinic-settings-input",step:"0.01",min:"0",required:!0,disabled:o,placeholder:"e.g., 50.00"})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"low_stock_threshold",className:"clinic-settings-label",children:[r.jsx(XD,{size:16})," Low Stock Notification Threshold"]}),r.jsx("input",{type:"number",id:"low_stock_threshold",name:"low_stock_threshold",value:n.low_stock_threshold,onChange:g,className:"clinic-settings-input",min:"0",required:!0,disabled:o,placeholder:"e.g., 10"}),r.jsx("p",{className:"clinic-settings-help-text",children:"Set the minimum quantity of a drug to trigger a low stock notification."})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"aiMemory",className:"clinic-settings-label",children:[r.jsx(K0,{size:16})," AI Memory (Plain Text)"]}),r.jsx("textarea",{id:"aiMemory",name:"aiMemory",value:n.aiMemory,onChange:g,className:"clinic-settings-textarea",disabled:o,placeholder:"Enter any clinic-wide notes or context for the AI..."}),r.jsx("p",{className:"clinic-settings-help-text",children:"Enter clinic-wide AI memory data as plain text."})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"clinicWideSystemPrompt",className:"clinic-settings-label",children:[r.jsx(VI,{size:16})," Clinic-Wide AI System Prompt"]}),r.jsx("textarea",{id:"clinicWideSystemPrompt",name:"clinicWideSystemPrompt",value:n.clinicWideSystemPrompt,onChange:g,className:"clinic-settings-textarea",disabled:o,placeholder:"Enter the system prompt for the AI that will apply to all interactions within this clinic..."}),r.jsx("p",{className:"clinic-settings-help-text",children:"This prompt will be used as the base instruction for the AI across the clinic."})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsx("label",{htmlFor:"aiLanguage",className:"clinic-settings-label",children:"AI Language"}),r.jsxs("select",{id:"aiLanguage",name:"aiLanguage",value:n.aiLanguage,onChange:g,className:"clinic-settings-input",disabled:o,children:[r.jsx("option",{value:"",children:"Select Language"}),r.jsx("option",{value:"English",children:"English"}),r.jsx("option",{value:"Hindi",children:"Hindi"}),r.jsx("option",{value:"Telugu",children:"Telugu"}),r.jsx("option",{value:"Tamil",children:"Tamil"}),r.jsx("option",{value:"Kannada",children:"Kannada"}),r.jsx("option",{value:"Malayalam",children:"Malayalam"}),r.jsx("option",{value:"Bengali",children:"Bengali"}),r.jsx("option",{value:"Gujarati",children:"Gujarati"}),r.jsx("option",{value:"Marathi",children:"Marathi"}),r.jsx("option",{value:"Punjabi",children:"Punjabi"})]}),r.jsx("p",{className:"clinic-settings-help-text",children:"Specify the language for AI interactions."})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsx("label",{htmlFor:"logoUrl",className:"clinic-settings-label",children:"Clinic Logo URL"}),r.jsx("input",{type:"url",id:"logoUrl",name:"logoUrl",value:n.logoUrl,onChange:g,className:"clinic-settings-input",disabled:o,placeholder:"e.g., https://example.com/logo.png"}),r.jsx("p",{className:"clinic-settings-help-text",children:"Enter the URL for your clinic's logo."})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsx("label",{htmlFor:"upi_id",className:"clinic-settings-label",children:"UPI ID"}),r.jsx("input",{type:"text",id:"upi_id",name:"upi_id",value:n.upi_id,onChange:g,className:"clinic-settings-input",disabled:o,placeholder:"e.g., yourclinic@upi"}),r.jsx("p",{className:"clinic-settings-help-text",children:"Enter your clinic's UPI ID for payments."})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsx("label",{htmlFor:"address",className:"clinic-settings-label",children:"Clinic Address"}),r.jsx("textarea",{id:"address",name:"address",value:n.address,onChange:g,className:"clinic-settings-textarea",disabled:o,placeholder:"Enter your clinic's full address"}),r.jsx("p",{className:"clinic-settings-help-text",children:"Enter the physical address of your clinic."})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsx("label",{htmlFor:"notes",className:"clinic-settings-label",children:"Other Clinic Details/Notes"}),r.jsx("textarea",{id:"notes",name:"notes",value:n.notes,onChange:g,className:"clinic-settings-textarea",disabled:o,placeholder:"Enter any other relevant clinic details or notes"}),r.jsx("p",{className:"clinic-settings-help-text",children:"Add any additional information or notes about your clinic."})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"gemini_api_key",className:"clinic-settings-label",children:[r.jsx(K0,{size:16})," Gemini API Key"]}),r.jsx("input",{type:"text",id:"gemini_api_key",name:"gemini_api_key",value:n.gemini_api_key,onChange:g,className:"clinic-settings-input",disabled:o,placeholder:"Enter your Gemini API key"}),r.jsx("p",{className:"clinic-settings-help-text",children:"Enter your Gemini API key to enable AI features."})]}),r.jsx("div",{className:"clinic-settings-button-container",children:r.jsxs("button",{type:"submit",className:"clinic-settings-button",disabled:o,children:[r.jsx(jd,{size:18})," ",o?"Saving...":"Save Settings"]})})]})]})},hq=({})=>{const e=Nt(),[n,t]=w.useState("patientSearch"),[i]=w.useState(!1),[a,o]=w.useState(null),[l,f]=w.useState(null);return w.useEffect(()=>{if(l){const d=setTimeout(()=>f(null),5e3);return()=>clearTimeout(d)}},[l]),i?r.jsxs("div",{className:"loading-animation-container",children:[" ",r.jsx("div",{className:"breathing-ball"}),r.jsx("div",{className:"mt-4 text-teal-600 text-xl font-medium",children:"Loading Admin Panel..."})]}):r.jsxs("div",{className:"admin-panel-container",children:[" ",l&&r.jsxs("div",{className:`alert-box ${l.type==="success"?"alert-box-success":"alert-box-error"} fixed top-4 right-4 z-[100]`,role:"alert",children:[r.jsx("div",{className:"alert-box-icon",children:l.type==="success"?r.jsx(ls,{size:18}):r.jsx(Ri,{size:18})}),r.jsx("div",{className:"alert-box-content",children:r.jsx("span",{children:l.message})}),r.jsx("button",{onClick:()=>f(null),className:"alert-box-close",children:r.jsx(ci,{size:16})})]}),a&&r.jsxs("div",{className:"alert-box alert-box-error mb-4",role:"alert",children:[" ",r.jsx("div",{className:"alert-box-icon",children:r.jsx(Ri,{size:18})}),r.jsx("div",{className:"alert-box-content",children:r.jsx("span",{className:"block sm:inline flex-1",children:a})}),r.jsx("button",{onClick:()=>o(null),className:"alert-box-close",children:r.jsx(ci,{size:16})})]}),r.jsxs("div",{className:"admin-nav-bar",children:[" ",r.jsxs("button",{onClick:()=>window.location.reload(),className:"admin-nav-button",title:"Refresh Page",children:[r.jsx(Z_,{})," "]}),r.jsxs("button",{onClick:()=>e("/dashboard/staff"),className:"admin-nav-button",children:[r.jsx(Vm,{})," Staff"]}),r.jsx("button",{onClick:()=>t("moneyFlow"),className:`admin-nav-button ${n==="moneyFlow"?"active":""}`,children:"Money"}),r.jsx("button",{onClick:()=>t("inventory"),className:`admin-nav-button ${n==="inventory"?"active":""}`,children:"Inventory"}),r.jsx("button",{onClick:()=>e("/lab-inventory"),className:"admin-nav-button hidden-button",children:"Lab Inventory"}),r.jsxs("button",{onClick:()=>t("clinicSettings"),className:`admin-nav-button ${n==="clinicSettings"?"active":""}`,children:[r.jsx(ng,{})," Settings"]}),r.jsxs("button",{onClick:()=>e("/dashboard/subscriptions"),className:"admin-nav-button hidden-button",children:[r.jsx(DS,{})," Patient Subscriptions"]}),r.jsxs("button",{onClick:()=>e("/start-clinic-subscription"),className:"admin-nav-button",children:[r.jsx(DS,{})," Buy Pro Plan"]}),r.jsx("button",{onClick:()=>e("/refill-reminders"),className:"admin-nav-button",children:"Refill Reminders"}),r.jsxs("button",{onClick:()=>e("/create-lab-order"),className:"admin-nav-button",children:[r.jsx(K_,{})," Lab Tests"]})]}),r.jsxs("div",{className:"admin-actions-bar",children:[" ",r.jsxs("button",{onClick:()=>e("/dashboard/patients"),className:"admin-action-button all-patients",children:[r.jsx(Vm,{})," All Patients"]})]}),r.jsxs("div",{className:"space-y-6",children:[" ",n==="patientSearch"&&r.jsx("div",{className:"admin-content-section",children:r.jsx(ph,{})}),n==="moneyFlow"&&r.jsx("div",{className:"admin-content-section",children:r.jsx(bR,{})}),n==="inventory"&&r.jsx("div",{className:"admin-content-section",children:r.jsx(t1,{})}),n==="clinicSettings"&&r.jsx("div",{className:"admin-content-section",children:r.jsx(fq,{})})]})]})},Oc=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},pq=e=>{if(!e)return"Unknown Date";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},sh=({title:e,icon:n,items:t,renderItemContent:i,isLoading:a,loadingText:o,noDataText:l})=>{const f=w.useMemo(()=>{const d={};t.forEach(p=>{if(isNaN(p.date.getTime())){d["Unknown Date"]||(d["Unknown Date"]=[]),d["Unknown Date"].push(p);return}const g=pq(p.originalDateString);d[g]||(d[g]=[]),d[g].push(p)});const u=Object.keys(d);return u.sort((p,g)=>{if(p==="Unknown Date")return 1;if(g==="Unknown Date")return-1;try{const b=k=>{const E=k.split(" ");if(E.length===3){const I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(E[1]);if(I!==-1)return new Date(parseInt(E[2]),I,parseInt(E[0]))}return new Date(k)},v=b(p),N=b(g);if(!isNaN(v.getTime())&&!isNaN(N.getTime()))return N.getTime()-v.getTime()}catch(b){console.error("Error parsing date for sorting:",b)}return g.localeCompare(p)}),u.map(p=>({date:p,items:d[p]}))},[t]);return r.jsxs("div",{className:"mb-2 p-2 bg-gray-50 rounded-md border border-gray-200",children:[r.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-1.5 border-b border-gray-300 pb-1 flex items-center",children:[" ",n&&r.jsx(n,{size:14,className:"mr-1.5 text-indigo-600"})," ",e]}),a&&r.jsx("p",{className:"text-gray-500 italic text-xs px-1",children:o}),!a&&t.length===0&&r.jsx("p",{className:"text-gray-500 italic text-xs px-1",children:l}),!a&&t.length>0&&r.jsxs("div",{className:"space-y-2",children:[" ",f.map(({date:d,items:u})=>r.jsxs("div",{className:"pl-0.5",children:[" ",r.jsxs("h5",{className:"text-[11px] font-medium text-indigo-700 mb-1 bg-indigo-50 px-1 py-0.5 rounded-sm inline-block",children:[" ",d]}),r.jsx("div",{className:"space-y-1 pl-1.5 border-l-2 border-indigo-200 ml-0.5",children:u.map((p,g)=>r.jsxs("div",{className:"text-xs py-0 flex items-start",children:[" ",r.jsx("div",{className:"flex-grow mr-1",children:i(p)})," "]},`${p.type}-${p.originalDateString}-${g}`))})]},d))]})]})},p0=()=>{var oe,Y;const[e,n]=w.useState({currentPatient:null,nextPatient:null,waitingCount:0}),[t,i]=w.useState(!0),[a,o]=w.useState(null),[l,f]=w.useState(null),[d,u]=w.useState(null),[p,g]=w.useState(null),[b,v]=w.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[N,k]=w.useState(!1),[E,T]=w.useState(null),{patientId:I}=qr(),D=Nt(),U=w.useCallback(async z=>{g(null),f(null),u(null),k(!0),T(null),v({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const re=await pe(`/api/patients/${z}`);if(!re.ok)throw new Error(`Patient details fetch failed (${re.status})`);const X=await re.json();f(X);const P=await pe(`/api/queue/patient/${z}/latest`);if(!P.ok&&P.status!==404)throw new Error(`Queue entry fetch failed (${P.status})`);if(P.ok){const te=await P.json();u(te)}await O(z)}catch(re){console.error("Error fetching specific patient data:",re),g(re.message||"Failed to load patient data."),T(re.message||"Failed to load patient history.")}finally{k(!1)}},[]),O=w.useCallback(async z=>{k(!0),T(null);try{const[re,X,P,te]=await Promise.all([pe(`/api/queue/patient/${z}/complaints`),pe(`/api/lab/patient/${z}`),pe(`/api/lab/orders/patient/${z}?status=pending`),pe(`/api/pharmacy-orders/patient/${z}`)]),se=re.ok?await re.json():[],M=X.ok?await X.json():[],fe=P.ok?await P.json():[],we=te.ok?await te.json():[];v({pastComplaints:se||[],labReports:M||[],pendingLabOrders:fe||[],pharmacyOrders:we||[]})}catch(re){console.error("Error fetching patient history:",re),T(re.message||"Failed to load patient history."),v({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{k(!1)}},[]),$=w.useCallback(async()=>{i(!0),o(null);try{const z=await pe("/api/queue/doctor");if(!z.ok){const X=await z.text();throw new Error(`API Error (${z.status}): ${X||z.statusText}`)}const re=await z.json();if(re===null||typeof re!="object"||typeof re.waitingCount!="number")throw console.error("Invalid queue data format:",re),new Error("Invalid queue data format received");n({currentPatient:re.currentPatient||null,nextPatient:re.nextPatient||null,waitingCount:re.waitingCount})}catch(z){console.error("Error fetching queue data:",z),o(z.message||"Failed to fetch queue data.")}finally{i(!1)}},[]);w.useEffect(()=>{let z=null;return I?(U(I),n({currentPatient:null,nextPatient:null,waitingCount:0})):($(),z=setInterval($,1e4),f(null),u(null)),()=>{z&&clearInterval(z)}},[I,U,$]),w.useEffect(()=>{var z;!I&&((z=e.currentPatient)!=null&&z.patientId)?O(e.currentPatient.patientId):!I&&!e.currentPatient&&(v({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),k(!1),T(null))},[I,(oe=e.currentPatient)==null?void 0:oe.patientId,O]);const B=((Y=e.currentPatient)==null?void 0:Y.patientId)||(I?parseInt(I,10):null),q=w.useMemo(()=>{if(!B||!b.pastComplaints)return[];const z=b.pastComplaints.map(re=>({date:new Date(re.createdAt),type:"Complaint",data:re,originalDateString:re.createdAt})).filter(re=>!isNaN(re.date.getTime()));return z.sort((re,X)=>X.date.getTime()-re.date.getTime()),z},[B,b.pastComplaints]),H=w.useMemo(()=>{if(!B)return[];const z=[];return(b.pendingLabOrders??[]).forEach(re=>{const X=new Date(re.createdAt);isNaN(X.getTime())||z.push({date:X,type:"Lab Order (Pending)",data:re,originalDateString:re.createdAt})}),(b.labReports??[]).forEach(re=>{const X=re.reportCreatedAt?new Date(re.reportCreatedAt):null;X&&!isNaN(X.getTime())&&z.push({date:X,type:"Lab Report",data:re,originalDateString:re.reportCreatedAt})}),z.sort((re,X)=>X.date.getTime()-re.date.getTime()),z},[B,b.pendingLabOrders,b.labReports]),F=w.useMemo(()=>{if(!B||!b.pharmacyOrders)return[];const z=b.pharmacyOrders.map(re=>({date:new Date(re.date),type:"Pharmacy Order",data:re,originalDateString:re.date})).filter(re=>!isNaN(re.date.getTime()));return z.sort((re,X)=>X.date.getTime()-re.date.getTime()),z},[B,b.pharmacyOrders]),L=async()=>{i(!0),o(null);try{await pe("/api/queue/doctor/next",{method:"POST"}),await $()}catch(z){console.error("Error calling next patient:",z),o(z.message||"Failed to call next patient.")}finally{i(!1)}},Q=async()=>{if(!(!e.currentPatient||I)){i(!0),o(null);try{await pe(`/api/queue/doctor/complete/${e.currentPatient._id}`,{method:"POST"}),await $(),v({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),k(!1),T(null)}catch(z){console.error("Error completing consultation:",z),o(z.message||"Failed to complete consultation.")}finally{i(!1)}}},ne=z=>{switch(z){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return z}};let ie=null;return e.currentPatient&&(ie=r.jsxs("div",{className:"patient-info-section bg-white rounded-lg shadow-md p-4 md:p-6 border-l-8 border-teal-500",children:[r.jsx("h2",{className:"text-xl text-teal-700 font-semibold mb-3",children:"NOW SEEING:"}),r.jsxs("div",{className:"flex flex-col md:flex-row md:space-x-6",children:[r.jsxs("div",{className:"flex-grow md:w-1/2",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{className:"flex-grow mr-4",children:[r.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-1",children:e.currentPatient.name}),r.jsxs("div",{className:"text-lg md:text-xl text-gray-600",children:[r.jsx("span",{className:"font-bold",children:e.currentPatient.age})," | ",r.jsx("span",{className:"font-bold",children:e.currentPatient.gender})]})]}),r.jsxs("div",{className:"text-right flex-shrink-0",children:[r.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-700 mb-1",children:e.currentPatient.token}),r.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm md:text-base font-medium ${e.currentPatient.status==="consulting"?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-800"}`,children:ne(e.currentPatient.status)})]})]}),r.jsxs("div",{className:"actions-section mt-4 md:mt-6 flex justify-end space-x-3 border-t pt-4",children:[r.jsx("button",{onClick:()=>{var re;const z=(re=e.currentPatient)==null?void 0:re._id;z&&D(`/dashboard/edit-complaint/${z}`)},disabled:t||!e.currentPatient||e.currentPatient.status!=="consulting",className:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Edit Complaint / AI"}),r.jsx("button",{onClick:Q,disabled:t||!e.currentPatient||e.currentPatient.status!=="consulting",className:"btn btn-success disabled:opacity-50 disabled:cursor-not-allowed",children:"Complete Consultation"})]})]})," ",r.jsxs("div",{className:"complaint-section md:w-1/2 mt-4 md:mt-0 border-t md:border-t-0 md:border-l md:pl-6 pt-4 md:pt-0",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-2",children:"Context & History:"}),E&&r.jsx("p",{className:"text-red-500 text-xs mb-2",children:E}),r.jsxs("div",{className:"space-y-2 pr-2",children:[r.jsx(sh,{title:"Complaints History",icon:$o,items:q,isLoading:N,loadingText:"Loading complaints...",noDataText:"No past complaints found.",renderItemContent:z=>r.jsxs("span",{className:"block text-xs",children:[z.data.complaint,r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",Oc(z.originalDateString),")"]})]})}),r.jsx(sh,{title:"Lab History (Orders & Reports)",icon:Qx,items:H,isLoading:N,loadingText:"Loading lab history...",noDataText:"No lab history found.",renderItemContent:z=>z.type==="Lab Order (Pending)"?r.jsxs("span",{className:"flex items-start text-xs",children:[r.jsx(PS,{size:12,className:"mr-1.5 mt-0.5 text-blue-600 flex-shrink-0"}),r.jsxs("span",{className:"block",children:[r.jsx("span",{className:"font-medium text-blue-700",children:"Order:"})," ",z.data.tests.map(re=>re.name).join(", ")," ",r.jsxs("span",{className:"text-gray-600",children:["(",z.data.status,")"]}),r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",Oc(z.originalDateString),")"]})]})]}):r.jsxs("span",{className:"flex items-start text-xs",children:[r.jsx(IS,{size:12,className:"mr-1.5 mt-0.5 text-green-600 flex-shrink-0"}),r.jsxs("span",{className:"block",children:[r.jsx("span",{className:"font-medium text-green-700",children:"Report:"})," ",z.data.testName," - ",z.data.reportFindings.substring(0,50),z.data.reportFindings.length>50?"...":"",r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",Oc(z.originalDateString),")"]})]})]})}),r.jsx(sh,{title:"Pharmacy Order History",icon:wh,items:F,isLoading:N,loadingText:"Loading pharmacy orders...",noDataText:"No pharmacy order history found.",renderItemContent:z=>r.jsxs("span",{className:"block text-xs",children:[z.data.medications.map(re=>`${re.name} (Qty: ${re.quantity})`).join(", ")," ",r.jsxs("span",{className:"text-gray-600",children:["(",z.data.status,")"]}),r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",Oc(z.originalDateString),")"]})]})}),q.length===0&&H.length===0&&F.length===0&&!N&&r.jsx("p",{className:"text-gray-500 italic text-xs mt-2 px-1",children:"No history found for this patient."})]})," "]})," "]})," "]})),r.jsx(r.Fragment,{children:r.jsxs("div",{className:"doctor-screen-container flex-grow flex flex-col space-y-6 md:space-y-8",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:()=>D(-1),className:"back-button mr-4",children:r.jsx(Qt,{size:24})}),r.jsx("h1",{className:"doctor-screen-header",children:"Doctor Consultation Panel"})]}),I?r.jsxs(r.Fragment,{children:[p&&r.jsx("p",{className:"text-red-500 p-4 bg-red-50 rounded",children:p}),l&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 border-l-8 border-purple-500",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h2",{className:"text-xl text-purple-700 font-semibold",children:"Patient Record:"}),r.jsx("button",{onClick:()=>D("/dashboard/doctor"),className:"text-sm text-blue-600 hover:underline",children:"Back to Queue"})]}),r.jsx("div",{className:"text-2xl md:text-3xl font-bold mb-1 md:mb-2",children:l.name}),r.jsxs("div",{className:"text-lg md:text-xl text-gray-600 mb-3 md:mb-4",children:["Age: ",l.age??"N/A"," | ",l.gender??"N/A"]}),r.jsxs("div",{className:"mt-3 md:mt-4 p-3 bg-gray-50 rounded border border-gray-200",children:[r.jsx("label",{className:"font-medium block mb-1 text-sm text-gray-600",children:"Latest Queue Entry:"}),d?r.jsxs("div",{className:"space-y-2",children:[" ",r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("span",{className:"text-sm flex-1 break-words",children:[r.jsxs("span",{className:"font-medium text-gray-700",children:["(",d.age," / ",d.gender,")"]}),": ",d.complaint||r.jsx("span",{className:"text-gray-400 italic",children:"No complaint"}),r.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs font-medium ${d.status==="consulting"?"bg-teal-100 text-teal-800":d.status==="seen"?"bg-green-100 text-green-800":d.status==="waiting"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:ne(d.status)})]}),d.status==="consulting"&&d._id&&r.jsx("button",{onClick:()=>D(`/dashboard/edit-complaint/${d._id}`),className:"ml-4 px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded flex-shrink-0",children:"Edit"})]}),d.case_summary&&r.jsxs("p",{className:"text-xs text-gray-700 bg-yellow-50 p-2 rounded border border-yellow-200",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:"AI Summary:"})," ",d.case_summary]})]}):r.jsx("p",{className:"text-gray-500 italic text-sm",children:"No queue entry found for this patient today."})]}),r.jsxs("div",{className:"mt-4 border-t pt-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Patient History:"}),E&&r.jsx("p",{className:"text-red-500 text-xs mb-2",children:E}),r.jsx(sh,{title:"Complaints History",icon:$o,items:q,isLoading:N,loadingText:"Loading complaints...",noDataText:"No past complaints found.",renderItemContent:z=>r.jsxs("span",{className:"block text-xs",children:[" ",z.data.complaint,r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",Oc(z.originalDateString),")"]})]})}),r.jsx(sh,{title:"Lab History (Orders & Reports)",icon:Qx,items:H,isLoading:N,loadingText:"Loading lab history...",noDataText:"No lab history found.",renderItemContent:z=>z.type==="Lab Order (Pending)"?r.jsxs("span",{className:"flex items-start text-xs",children:[" ",r.jsx(PS,{size:12,className:"mr-1.5 mt-0.5 text-blue-600 flex-shrink-0"})," ",r.jsxs("span",{className:"block",children:[r.jsx("span",{className:"font-medium text-blue-700",children:"Order:"})," ",z.data.tests.map(re=>re.name).join(", ")," ",r.jsxs("span",{className:"text-gray-600",children:["(",z.data.status,")"]}),r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",Oc(z.originalDateString),")"]})]})]}):r.jsxs("span",{className:"flex items-start text-xs",children:[" ",r.jsx(IS,{size:12,className:"mr-1.5 mt-0.5 text-green-600 flex-shrink-0"})," ",r.jsxs("span",{className:"block",children:[r.jsx("span",{className:"font-medium text-green-700",children:"Report:"})," ",z.data.testName," - ",z.data.reportFindings.substring(0,50),z.data.reportFindings.length>50?"...":"",r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",Oc(z.originalDateString),")"]})]})]})}),r.jsx(sh,{title:"Pharmacy Order History",icon:wh,items:F,isLoading:N,loadingText:"Loading pharmacy orders...",noDataText:"No pharmacy order history found.",renderItemContent:z=>r.jsxs("span",{className:"block text-xs",children:[" ",z.data.medications.map(re=>`${re.name} (Qty: ${re.quantity})`).join(", ")," ",r.jsxs("span",{className:"text-gray-600",children:["(",z.data.status,")"]}),r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",Oc(z.originalDateString),")"]})]})}),q.length===0&&H.length===0&&F.length===0&&!N&&r.jsx("p",{className:"text-gray-500 italic text-sm mt-2",children:"No history found."})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-end space-x-3 mb-4",children:[r.jsxs("button",{onClick:()=>D("/dashboard/add-patient"),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded shadow flex items-center",children:[r.jsx(n2,{size:18,className:"mr-2"})," Add Patient"]}),r.jsx("button",{onClick:()=>D("/search-patient"),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded shadow",children:"Search Patient"})]}),a&&r.jsx("p",{className:"text-red-500 p-4 bg-red-50 rounded",children:a}),t&&!e.currentPatient&&r.jsx("p",{className:"text-gray-500 p-4 text-center",children:"Loading queue..."}),r.jsx("div",{className:"mb-6 md:mb-8",children:ie||r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center text-gray-500",children:"No patient currently being seen. Use 'Call Next' or search for a patient record."})}),r.jsxs("div",{className:"current-queue-section mb-6 md:mb-8",children:[r.jsx("h2",{className:"text-xl text-blue-700 font-semibold mb-3 md:mb-4",children:"NEXT IN QUEUE:"}),e.nextPatient?r.jsxs("div",{className:"patient-info-section bg-blue-50 rounded-lg shadow-md p-5 md:p-6 border-l-8 border-blue-500",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 md:mb-4",children:[r.jsxs("span",{className:"text-2xl md:text-3xl font-bold text-blue-800 mb-2 sm:mb-0",children:["Token #",e.nextPatient.token]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm md:text-base font-medium ${e.nextPatient.status==="waiting"?"bg-blue-200 text-blue-900":"bg-gray-200 text-gray-800"}`,children:ne(e.nextPatient.status)})]}),r.jsx("div",{className:"text-2xl md:text-3xl font-bold mb-2 md:mb-3",children:e.nextPatient.name}),r.jsxs("div",{className:"text-lg md:text-xl text-gray-700 mb-3 md:mb-4",children:["Age: ",e.nextPatient.age," | ",e.nextPatient.gender]}),(e.nextPatient.complaint||e.nextPatient.case_summary)&&r.jsxs("div",{className:"mt-3 md:mt-4 pt-3 border-t border-blue-200 space-y-2",children:[e.nextPatient.complaint&&r.jsxs("p",{className:"text-base md:text-lg text-gray-800",children:[r.jsx("span",{className:"font-semibold text-gray-900",children:"Complaint:"})," ",e.nextPatient.complaint]}),e.nextPatient.case_summary&&r.jsxs("p",{className:"text-sm text-gray-700 bg-yellow-50 p-2 rounded border border-yellow-200",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:"AI Summary:"})," ",e.nextPatient.case_summary]})]})]}):r.jsx("div",{className:"bg-gray-50 rounded-lg shadow-inner p-6 text-center text-gray-600 border border-gray-200",children:"No patient waiting next in the queue."})]}),r.jsxs("div",{className:"actions-section mt-auto pt-4 md:pt-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[r.jsx("button",{onClick:L,disabled:t||!e.nextPatient||!!e.currentPatient,className:"btn btn-primary w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed order-1 sm:order-none",children:"Call Next Patient"}),r.jsx("div",{className:"bg-gray-200 inline-block px-4 py-2 rounded-full order-2 sm:order-none",children:r.jsxs("span",{className:"text-base md:text-lg font-medium",children:[e.waitingCount," patients waiting"]})})]})]})]})})},Jk=()=>{const[e,n]=w.useState(""),[t,i]=w.useState([]),[a,o]=w.useState(null),[l,f]=w.useState(null),[d,u]=w.useState(null),[p,g]=w.useState(null),[b,v]=w.useState(!1),[N,k]=w.useState(!1),[E,T]=w.useState(null),I=Nt(),D=w.useCallback(Nk.debounce(async F=>{if(F.trim().length<2){i([]),k(!1);return}k(!0),T(null);try{const L=new URLSearchParams({search:encodeURIComponent(F),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),Q=await pe(`/api/patients?${L.toString()}`);if(!Q.ok){const ie=await Q.text();throw new Error(`API Error (${Q.status}): ${ie||Q.statusText||"Failed to fetch patients"}`)}const ne=await Q.json();i(ne.patients)}catch(L){T(L instanceof Error?L.message:"An unknown error occurred while searching patients"),i([])}finally{k(!1)}},500),[]);w.useEffect(()=>(e?(k(!0),D(e)):(i([]),D.cancel()),()=>{D.cancel()}),[e,D]);const U=F=>{o(F),n(""),i([]),T(null),f(null),u(null),g(null),v(!1)},O=async()=>{if(!a){T("No patient selected.");return}T(null),k(!0);try{const F=await pe(`/api/patients/${a.id}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!F.ok){const Q=await F.json().catch(()=>({message:"Failed to admit patient"}));throw new Error(Q.message||"Failed to admit patient")}const L=await F.json();alert(L.message||"Patient admitted successfully!"),L.bill&&L.bill.id?I(`/patient/${a.id}/admission-bill/${L.bill.id}`):(console.error("Admission successful, but bill ID missing in response."),T("Admission successful, but couldn't navigate to billing."),o(L.patient))}catch(F){T(F instanceof Error?F.message:"Failed to admit patient")}finally{k(!1)}};w.useEffect(()=>{(async()=>{if(!a||!a.admission_date||a.discharge_date){f(null),g(null);return}v(!0),u(null),f(null),g(null);try{const L=await pe(`/api/patients/${a.id}/active-bill?type=admission`);if(!L.ok)throw L.status===404?new Error("No active admission bill found."):new Error("Failed to fetch active bill ID.");const Q=await L.json(),ne=Q==null?void 0:Q.id;if(!ne)throw new Error("Active admission bill ID not found in response.");f(ne);const ie=await pe(`/api/bills/${ne}`);if(!ie.ok)throw new Error(`Failed to fetch bill details (ID: ${ne}). Status: ${ie.status}`);const oe=await ie.json();if(oe&&oe.calculated)g(oe.calculated);else throw console.error("Fetched bill details missing 'calculated' object:",oe),new Error("Fetched bill details are incomplete (missing calculated data).")}catch(L){u(L instanceof Error?L.message:"An unknown error occurred while fetching bill details."),f(null),g(null)}finally{v(!1)}})()},[a]);const $=async()=>{if(!a){T("No patient selected.");return}if(!a.admission_date||a.discharge_date){T("Patient is not currently admitted.");return}T(null),k(!0);try{const F=await pe(`/api/patients/${a.id}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!F.ok){const Q=await F.json().catch(()=>({message:"Failed to discharge patient"}));throw new Error(Q.message||"Failed to discharge patient")}const L=await F.json();alert(L.message||"Patient discharged successfully!"),L.patient?o(L.patient):(console.error("Discharge successful, but updated patient info missing in response."),o(null),T("Discharge successful, but couldn't update patient details locally."))}catch(F){T(F instanceof Error?F.message:"Failed to discharge patient")}finally{k(!1)}},B=()=>{if(!a||!l){T("Cannot navigate to billing: Patient or Bill ID missing.");return}I(`/patient/${a.id}/admission-bill/${l}`)};let q="",H=null;if(a){const F=a.admission_date?new Date(a.admission_date).toLocaleDateString():null,L=a.discharge_date?new Date(a.discharge_date).toLocaleDateString():null;a.admission_date?a.admission_date&&!a.discharge_date?(q=`Patient admitted on: ${F}`,H=r.jsxs("div",{className:"space-y-4",children:[" ",b&&r.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Loading billing details..."})," ",d&&r.jsx("p",{className:"text-sm text-red-500 text-center",children:d})," ",!b&&p&&r.jsxs("div",{className:"admission-card",children:[r.jsx("h3",{className:"admission-card-title",children:"Billing Summary"}),r.jsxs("div",{className:"admission-card-content",children:[r.jsxs("p",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Total Due:"}),r.jsxs("span",{children:["",(Number(p.totalDue)||0).toFixed(2)]})]}),r.jsxs("p",{className:"flex justify-between text-sm text-green-700",children:[" ",r.jsx("span",{children:"Total Paid:"}),r.jsxs("span",{children:["",(Number(p.totalPaid)||0).toFixed(2)]})]}),r.jsxs("p",{className:"flex justify-between text-sm font-bold mt-1 text-red-600",children:[" ",r.jsx("span",{children:"Balance Due:"}),r.jsxs("span",{children:["",(Number(p.balance)||0).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:B,disabled:N||b||!l,className:`admission-button admission-button-secondary ${N||b||!l?"opacity-50 cursor-not-allowed":""}`,children:b?"Loading Bill...":!l&&!d?"Finding Bill...":"Pay Bill / View Details"}),r.jsx("button",{onClick:$,disabled:N||b,className:`admission-button admission-button-danger ${N||b?"opacity-50 cursor-not-allowed":""}`,children:N?"Processing...":"Discharge Patient"})]})]})):(q=`Patient admitted on ${F} and discharged on ${L}.`,H=r.jsx("p",{className:"text-center text-gray-600 italic",children:"Patient has been discharged."})):(q="Patient is not admitted.",H=r.jsx("button",{onClick:O,disabled:N,className:`admission-button ${N?"opacity-50 cursor-not-allowed":""}`,children:N?"Processing...":"Admit Patient"}))}return r.jsxs("div",{className:"admission-page-container",children:[r.jsxs("div",{className:"admission-header-container",children:[r.jsxs("button",{onClick:()=>I(-1),className:"back-button",children:[r.jsx(Qt,{size:16}),"Back"]}),r.jsx("h1",{className:"admission-header",children:"Manage Admission/Discharge"})]}),r.jsxs("div",{className:"admission-section mb-6 relative",children:[r.jsx("label",{htmlFor:"patientSearch",className:"admission-label",children:"Search Patient (Name, Phone, or Token)"}),r.jsx("input",{type:"text",id:"patientSearch",value:e,onChange:F=>n(F.target.value),placeholder:"Start typing to search...",className:"admission-input"}),N&&!a&&r.jsx("div",{className:"absolute right-3 top-9 text-sm text-gray-500",children:"Loading..."})," ",t.length>0&&!a&&r.jsxs("ul",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[" ",t.map(F=>r.jsxs("li",{onClick:()=>U(F),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:[" ",F.name," (Token: ",F.token,")",r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[F.admission_date?`Admitted: ${new Date(F.admission_date).toLocaleDateString()}`:"Not Admitted",F.discharge_date?`, Discharged: ${new Date(F.discharge_date).toLocaleDateString()}`:""]})]},F.id))]}),t.length===0&&e&&!N&&!a&&r.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg p-4 text-gray-500",children:['No patients found matching "',e,'".']})]}),a&&r.jsxs("div",{className:"admission-section",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h2",{className:"admission-section-title",children:"Selected Patient"}),r.jsx("button",{onClick:()=>o(null),className:"admission-link",children:"Clear Selection"})]}),r.jsxs("div",{className:"admission-card-content mb-4 grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",a.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Token:"})," ",a.token]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Age:"})," ",a.age??"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Gender:"})," ",a.gender??"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Phone:"})," ",a.phone??"N/A"]}),r.jsxs("p",{className:"col-span-2",children:[r.jsx("strong",{children:"Address:"})," ",a.address??"N/A"]})]}),r.jsx("hr",{className:"my-4"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:q})," ",E&&r.jsx("p",{className:"text-red-500 text-sm mb-3",children:E})," ",H]})]})},m0=15,_1=()=>{const e=Nt(),[n,t]=w.useState([]),[i,a]=w.useState(!0),[o,l]=w.useState(null),[f,d]=w.useState(""),[u,p]=w.useState(1),[g,b]=w.useState(1),[v,N]=w.useState(0),[k,E]=w.useState("created_at"),[T,I]=w.useState("desc"),[D,U]=w.useState(""),[O,$]=w.useState(!1),[B,q]=w.useState(null),[H,F]=w.useState([]),[L,Q]=w.useState(""),[ne,ie]=w.useState(!1),[oe,Y]=w.useState(null),[z,re]=w.useState(!0),[X,P]=w.useState(null),[te,se]=w.useState(f);w.useEffect(()=>{const je=setTimeout(()=>{se(f),p(1)},500);return()=>{clearTimeout(je)}},[f]);const M=w.useCallback(async()=>{re(!0),P(null);try{const je=await pe("/api/subscriptions");if(!je.ok){let Ae=`Failed to fetch subscription plans (${je.status})`;try{Ae=(await je.json()).message||Ae}catch{}throw new Error(Ae)}const ye=await je.json();F(ye)}catch(je){console.error("Error fetching subscription plans:",je),P(je.message||"An unknown error occurred while fetching plans."),F([])}finally{re(!1)}},[]),fe=w.useCallback(async(je,ye,Ae,De,Ve)=>{a(!0),l(null);try{const it=new URLSearchParams({page:je.toString(),limit:m0.toString(),sortBy:Ae,sortOrder:De});ye&&it.append("search",ye),Ve&&it.append("gender",Ve);const Ke=await pe(`/api/patients?${it.toString()}`);if(!Ke.ok){const Ft=await Ke.json();throw new Error(Ft.message||"Failed to fetch patients")}const rt=await Ke.json();t(rt.patients),N(rt.totalCount),p(rt.currentPage),b(rt.totalPages)}catch(it){console.error("Error fetching patients:",it),l(`Failed to load patients: ${it.message}`),t([]),N(0),p(1),b(1)}finally{a(!1)}},[]);w.useEffect(()=>{fe(u,te,k,T,D),M()},[u,te,k,T,D,fe,M]);const we=je=>{const ye=k===je&&T==="asc"?"desc":"asc";E(je),I(ye),p(1)},ce=je=>{try{return new Date(je).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},Le=()=>{$(!1),q(null),Q(""),Y(null),ie(!1)},Ne=async(je,ye)=>{t(Ae=>Ae.map(De=>De.id===je?{...De,insurance_type:ye}:De));try{const Ae=await pe(`/api/patients/${je}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:ye})});if(!Ae.ok){const De=await Ae.json();throw new Error(De.message||"Failed to update insurance type")}}catch(Ae){console.error("Error updating insurance type:",Ae),fe(u,te,k,T,D)}},nt=(je,ye)=>{const Ae=new Date(je),De=ye.interval||1;switch(ye.period){case"daily":Ae.setDate(je.getDate()+De);break;case"weekly":Ae.setDate(je.getDate()+De*7);break;case"monthly":Ae.setMonth(je.getMonth()+De);break;case"yearly":Ae.setFullYear(je.getFullYear()+De);break;default:console.warn(`Unknown subscription period: ${ye.period}. Defaulting to 1 month.`),Ae.setMonth(je.getMonth()+1)}return Ae},ut=async()=>{if(!B||!L){Y("Please select a subscription plan.");return}const je=H.find(ye=>ye.id===L);if(!je){Y("Selected plan details not found.");return}ie(!0),Y(null);try{const ye=new Date,Ae=nt(ye,je),De={subscription_plan_id:L,subscription_status:"active",subscription_start_date:ye.toISOString(),subscription_end_date:Ae.toISOString(),subscription_payment_method:"manual"},Ve=await pe(`/api/patients/${B.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(De)});if(!Ve.ok){const it=await Ve.json();throw new Error(it.message||"Failed to update patient subscription")}Le(),fe(u,te,k,T,D)}catch(ye){console.error("Error starting subscription:",ye),Y(`Failed to start subscription: ${ye.message}`)}finally{ie(!1)}};return r.jsxs("div",{className:"all-patients-container",children:[r.jsxs("button",{onClick:()=>e(-1),className:"all-patients-back-button",children:[r.jsx(Qt,{size:16}),"Back"]}),r.jsxs("h1",{className:"all-patients-title",children:[r.jsx(Sh,{size:28}),"All Registered Patients"]}),o&&r.jsxs("div",{className:"error-alert",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:o})]}),r.jsxs("div",{className:"subscription-plans-card",children:[r.jsx("h2",{className:"subscription-plans-title",children:"Available Subscription Plans"}),r.jsx("div",{children:z?r.jsx("p",{className:"loading-state",children:"Loading plans..."}):X?r.jsxs("p",{className:"error-message",children:["Error loading plans: ",X]}):H.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("ul",{className:"subscription-plans-list",children:H.map(je=>r.jsxs("li",{children:[r.jsx("strong",{children:je.name}),": ",je.price," / ",je.interval," ",je.period,je.interval>1?"s":"",je.description&&r.jsx("span",{className:"plan-description",children:je.description})]},je.id))})})]}),r.jsxs("div",{className:"controls-container",children:[r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"search-input",value:f,onChange:je=>d(je.target.value)}),r.jsx(ss,{className:"search-input-icon",size:20})]}),r.jsxs("div",{className:"filter-dropdown-wrapper",children:[r.jsx("label",{htmlFor:"genderFilter",className:"sr-only",children:"Filter by Gender"}),r.jsxs("div",{className:"filter-select-container",children:[r.jsx(II,{size:16,className:"filter-select-icon"}),r.jsxs("select",{id:"genderFilter",value:D,onChange:je=>U(je.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"All Genders"}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]})]}),i?r.jsx("div",{className:"loading-state",children:"Loading patients..."}):n.length===0?r.jsx("div",{className:"empty-state",children:te?"No patients found matching your search.":"No patients registered yet."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsxs("th",{className:"sortable-header",onClick:()=>we("name"),children:["Name",k==="name"&&(T==="asc"?r.jsx(J0,{size:14,className:"sort-icon"}):r.jsx(TS,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Age"}),r.jsx("th",{children:"Gender"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Address"}),r.jsxs("th",{className:"sortable-header",onClick:()=>we("created_at"),children:["Registered On",k==="created_at"&&(T==="asc"?r.jsx(J0,{size:14,className:"sort-icon"}):r.jsx(TS,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Insurance Type"})," ",r.jsx("th",{children:"Action"})," "]})}),r.jsx("tbody",{children:n.map(je=>r.jsxs("tr",{children:[r.jsx("td",{children:je.token??"-"}),r.jsx("td",{className:"patient-name",children:je.name}),r.jsx("td",{children:je.age??"-"}),r.jsx("td",{children:je.gender??"-"}),r.jsx("td",{children:je.phone??"-"}),r.jsx("td",{children:je.address??"-"}),r.jsx("td",{children:ce(je.created_at)}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${je.subscription_status==="active"?"active":je.subscription_status==="cancelled"||je.subscription_status==="expired"?"inactive":"none"}`,children:je.subscription_status??"None"})}),r.jsx("td",{children:r.jsxs("select",{value:je.insurance_type,onChange:ye=>Ne(je.id,ye.target.value),className:"form-select insurance-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>e(`/start-subscription/${je.id}`),className:"action-button",children:"Start Sub"})})]},je.id))})]})}),g>1&&r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("div",{className:"pagination-info",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(u-1)*m0+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(u*m0,v)})," ","of"," ",r.jsx("span",{className:"font-medium",children:v})," results"]}),r.jsxs("div",{className:"pagination-buttons",children:[r.jsxs("button",{onClick:()=>p(je=>Math.max(je-1,1)),disabled:u===1||i,className:"pagination-button",children:[r.jsx(lw,{size:16,className:"prev-icon"}),"Previous"]}),r.jsxs("span",{className:"pagination-current-page",children:["Page ",r.jsx("span",{className:"font-medium",children:u})," of ",r.jsx("span",{className:"font-medium",children:g})]}),r.jsxs("button",{onClick:()=>p(je=>Math.min(je+1,g)),disabled:u===g||i,className:"pagination-button",children:["Next",r.jsx(Sb,{size:16,className:"next-icon"})]})]})]})]}),O&&B&&r.jsx("div",{className:"subscription-modal-overlay",children:r.jsxs("div",{className:"subscription-modal-content",children:[r.jsxs("div",{className:"subscription-modal-header",children:[r.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",B.name]}),r.jsx("button",{onClick:Le,className:"subscription-modal-close-button",children:r.jsx(ci,{size:24})})]}),oe&&r.jsx("div",{className:"error-alert",role:"alert",children:r.jsx("span",{children:oe})}),r.jsxs("div",{className:"subscription-modal-body",children:[r.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),r.jsxs("select",{id:"subscriptionPlan",value:L,onChange:je=>Q(je.target.value),className:"form-select",disabled:ne||z||X!==null||H.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),z?r.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):X?r.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):H.length>0?H.map(je=>r.jsxs("option",{value:je.id,children:[je.name," - ",je.price," (",je.interval," ",je.period,je.interval>1?"s":"",")"]},je.id)):r.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),X&&r.jsx("p",{className:"error-message",children:X}),H.length===0&&!z&&!X&&r.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),r.jsxs("div",{className:"subscription-modal-footer",children:[r.jsx("button",{onClick:Le,disabled:ne,className:"subscription-modal-button cancel",children:"Cancel"}),r.jsx("button",{onClick:ut,disabled:!L||ne,className:"subscription-modal-button submit",children:ne?"Starting...":"Start Subscription"})]})]})})]})},Kk=()=>{const e=Nt(),[n]=w.useState(!0),[t,i]=w.useState(""),[a,o]=w.useState([]),[l,f]=w.useState(!1),[d,u]=w.useState(null),[p,g]=w.useState(!1),b=/^\+?[0-9\s\-().]{7,20}$/,v=w.useMemo(()=>jb(async T=>{if(T.trim().length<2){o([]),f(!1),u(null);return}f(!0),u(null);try{const I=new URLSearchParams({search:encodeURIComponent(T),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),D=await pe(`/api/patients?${I.toString()}`);if(!D.ok){const O=await D.text();throw new Error(`API Error (${D.status}): ${O||D.statusText}`)}const U=await D.json();o(U.patients)}catch(I){console.error("Error searching patients:",I),u(I.message||"Failed to search patients."),o([])}finally{f(!1)}},300),[]),N=T=>{const I=T.target.value;i(I),g(b.test(I)),f(!0),v(I)},k=w.useCallback(T=>{e("/billing",{state:{patientId:T.id,patientName:T.name}})},[e]),E=w.useCallback(async()=>{if(!t||!p){u("Invalid phone number to create a new patient.");return}f(!0),u(null);try{const I=await pe("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"direct pharmacy",phone:t,age:null,gender:null,token:null})});if(!I.ok){const U=await I.json();throw new Error(U.message||`Failed to create patient: ${I.statusText}`)}const D=await I.json();alert(`New patient "direct pharmacy" created with phone ${D.phone}.`),k(D)}catch(T){console.error("Error creating new patient:",T),u(T.message||"Failed to create new patient.")}finally{f(!1)}},[t,p,k]);return r.jsxs("div",{className:"create-custom-bill-page p-4 md:p-6 max-w-5xl mx-auto",children:[r.jsx("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:r.jsx(Qt,{size:20})}),r.jsx("h2",{className:"text-2xl",children:"Create Custom Bill"})]})}),n&&r.jsxs("div",{className:"content-section",children:[r.jsx("h3",{className:"section-title",children:"Select Patient"}),r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"}),r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:t,onChange:N,className:"custom-text-input mt-1",autoFocus:!0}),l&&r.jsx("span",{className:"absolute right-3 top-9 text-xs text-gray-400",children:"Searching..."})]}),d&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:d}),a.length>0&&r.jsx("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:r.jsx("ul",{children:a.map(T=>r.jsxs("li",{onClick:()=>k({id:T.id,name:T.name,token:T.token,age:T.age,gender:T.gender,phone:T.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",T.token]}),T.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[T.age?`${T.age} yrs`:"Age N/A",T.gender?` / ${T.gender}`:" / Gender N/A",T.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",T.phone]})]})]}),T.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",T.phone]})]},T.id))})}),t.length>=2&&!l&&a.length===0&&!d&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',t,'".']}),p&&r.jsx("button",{type:"button",onClick:E,className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:l,children:'Create "direct pharmacy" Patient with this Phone'})]}),t.length<2&&!l&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]})]})},Xk=({currentUser:e})=>{const n=Nt(),[t,i]=w.useState("select_patient"),[a,o]=w.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,f]=w.useState(null),[d,u]=w.useState([]),[p,g]=w.useState([]),[b,v]=w.useState(""),[N,k]=w.useState([]),[E,T]=w.useState(""),[I,D]=w.useState([]),[U,O]=w.useState(!1),[$,B]=w.useState(null),[q,H]=w.useState(null),[F,L]=w.useState(null),[Q,ne]=w.useState(!1),[ie,oe]=w.useState(!1),[Y,z]=w.useState(!1),re=/^\+?[0-9\s\-().]{7,20}$/,X=/^[a-zA-Z\s'-]{2,}$/,P=w.useCallback(async()=>{if(!(d.length>0)){ne(!0),L(null);try{const ye=await pe("/api/lab-tests");if(!ye.ok)throw new Error("Failed to fetch lab tests");const Ae=await ye.json();u(Ae)}catch(ye){console.error("Failed to fetch available lab tests:",ye),L("Could not load lab test list: "+ye.message),u([])}finally{ne(!1)}}},[d.length]);w.useEffect(()=>{if(!b){k([]);return}const ye=b.toLowerCase();k(d.filter(Ae=>Ae.name.toLowerCase().includes(ye)||Ae.description&&Ae.description.toLowerCase().includes(ye)).slice(0,10))},[b,d]);const te=w.useCallback(ye=>{const Ae={id:ye.id,name:ye.name,token:ye.token,age:ye.age,gender:ye.gender,phone:ye.phone};f(Ae),i("create_order"),g([]),v(""),k([]),L(null),P()},[P]),se=w.useMemo(()=>jb(async ye=>{if(ye.trim().length<2){D([]),O(!1),B(null);return}O(!0),B(null);try{const Ae=new URLSearchParams({search:encodeURIComponent(ye),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),De=await pe(`/api/patients?${Ae.toString()}`);if(!De.ok){const it=await De.text();throw new Error(`API Error (${De.status}): ${it||De.statusText}`)}const Ve=await De.json();D(Ve.patients)}catch(Ae){console.error("Error searching lab patients:",Ae),B(Ae.message||"Failed to search lab patients."),D([])}finally{O(!1)}},300),[re,X]),M=ye=>{const Ae=ye.target.value;T(Ae),oe(re.test(Ae)),z(X.test(Ae)&&!re.test(Ae)),O(!0),se(Ae)},fe=w.useCallback(async ye=>{if(!E||ye==="phone"&&!ie||ye==="name"&&!Y){B(`Invalid ${ye} to create a new patient.`);return}O(!0),B(null);try{const De=await pe("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ye==="name"?E:"direct lab",phone:ye==="phone"?E:null,age:null,gender:null,token:null})});if(!De.ok){const it=await De.json();throw new Error(it.message||`Failed to create patient: ${De.statusText}`)}const Ve=await De.json();alert(`New patient "${Ve.name}" created with ${ye==="phone"?`phone ${Ve.phone}`:`name ${Ve.name}`}.`),te({id:Ve.id,name:Ve.name,token:Ve.token??null,age:Ve.age??null,gender:Ve.gender??null,phone:Ve.phone})}catch(Ae){console.error("Error creating new patient:",Ae),B(Ae.message||"Failed to create new patient.")}finally{O(!1)}},[E,ie,Y,te]),we=()=>{o({name:"",age:void 0,gender:null,phone:"",address:""}),H(null),i("create_patient"),f(null)},ce=()=>{i("select_patient"),f(null),T(""),D([]),B(null)},Le=ye=>{const{name:Ae,value:De}=ye.target;o(Ve=>({...Ve,[Ae]:Ae==="age"?De?parseInt(De,10):void 0:De}))},Ne=async ye=>{if(ye.preventDefault(),H(null),!a.name){H("Patient Name is required.");return}const Ae={name:a.name,age:a.age,gender:a.gender,phone:a.phone,address:a.address};try{const De=await pe("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ae)});if(!De.ok){const it=await De.json();throw new Error(it.message||`Failed to create patient: ${De.statusText}`)}const Ve=await De.json();alert(`Patient "${Ve.name}" created successfully!`),te({id:Ve.id,name:Ve.name,token:Ve.token??null,age:Ve.age??null,gender:Ve.gender??null,phone:Ve.phone})}catch(De){console.error("Failed to create patient:",De),H(De.message||"Failed to create patient. Please try again.")}},nt=ye=>{if(p.some(Ae=>Ae.id===ye.id)){L(`${ye.name} is already in the order.`),setTimeout(()=>L(null),3e3),v(""),k([]);return}g(Ae=>[...Ae,{...ye}]),v(""),k([])},ut=ye=>{g(Ae=>Ae.filter(De=>De.id!==ye))},je=async ye=>{if(ye.preventDefault(),L(null),!l){L("No patient selected.");return}if(p.length===0){L("No lab tests selected.");return}const Ae={patient_id:l.id,tests:p.map(De=>({id:De.id,name:De.name,price:De.price}))};console.log("Submitting Lab Order:",Ae);try{const De=await pe("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ae)});if(!De.ok){const Ke=await De.json();throw console.error("API Error Data:",Ke),new Error(Ke.message||`Failed to create lab order: ${De.statusText}`)}const Ve=await De.json();console.log("Lab Order Creation Result:",Ve);let it=l.queueId;if(!it){const Ke=await pe(`/api/queue/patient/${l.id}/latest`);if(Ke.ok){const rt=await Ke.json();rt!=null&&rt._id&&(it=rt._id)}}if(!it){const Ke=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id})});if(!Ke.ok){const Ft=await Ke.text();throw new Error(`Failed to create queue entry for redirection: ${Ft||Ke.statusText}`)}const rt=await Ke.json();if(rt!=null&&rt.id)it=rt.id;else throw new Error("Failed to get ID from new queue entry for redirection.")}alert(`Lab order created successfully for ${l.name}!`),(e==null?void 0:e.role)==="lab"?n("/dashboard"):n(`/dashboard/edit-complaint/${it}`)}catch(De){console.error("Failed to create lab order:",De),L(De.message||"Failed to create lab order.")}};return w.useEffect(()=>{P()},[P]),r.jsxs("div",{className:"lab-inventory-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>n(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(Qt,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"lab-inventory-header",children:"Create New Lab Order"}),r.jsx("div",{className:"w-16"})," "]}),(t==="select_patient"||t==="create_patient")&&r.jsxs("div",{className:"lab-inventory-card",children:[t==="select_patient"&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Select Existing Patient"}),r.jsxs("div",{className:"lab-inventory-form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-patient-search",children:"Search Patient (Name, Token, or Phone)"}),r.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:E,onChange:M,className:"lab-inventory-input",autoFocus:!0}),U&&r.jsx("span",{className:"loading-text",style:{position:"absolute",right:"10px",top:"35px",fontSize:"0.8em"},children:"Searching..."})]}),$&&r.jsx("div",{className:"error-text",children:$}),I.length>0&&r.jsx("div",{className:"lab-inventory-card",style:{maxHeight:"300px",overflowY:"auto",padding:"0",marginTop:"10px"},children:r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:I.map(ye=>r.jsxs("li",{onClick:()=>te(ye),className:"lab-inventory-link",style:{padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsxs("span",{style:{color:"#007bff",marginRight:"10px"},children:["[#",ye.token,"]"]}),ye.name]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[ye.age?`${ye.age} yrs`:"",ye.age&&ye.gender?" / ":"",ye.gender||"N/A"]})]},ye.id))})}),E.length>=2&&!U&&I.length===0&&!$&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"no-data-message",children:['No patients found matching "',E,'".']}),ie&&r.jsx("button",{type:"button",onClick:()=>fe("phone"),className:"lab-inventory-button",style:{marginTop:"15px",marginRight:"10px"},disabled:U,children:'Create "direct lab" Patient with this Phone'}),Y&&r.jsx("button",{type:"button",onClick:()=>fe("name"),className:"lab-inventory-button",style:{marginTop:"15px"},disabled:U,children:"Create Patient with this Name"})]}),E.length<2&&!U&&r.jsx("p",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter at least 2 characters to search."}),r.jsx("button",{onClick:we,className:"lab-inventory-link",style:{marginTop:"15px",background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Or, Register New Patient"})]}),t==="create_patient"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsx("h2",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"none",margin:"0"},children:"Register New Patient"}),r.jsx("button",{onClick:ce,className:"lab-inventory-link",style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:" Back to Search "})]}),q&&r.jsx("div",{className:"error-text",children:q}),r.jsxs("form",{onSubmit:Ne,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"},children:[r.jsxs("div",{className:"lab-inventory-form-group",style:{gridColumn:"1 / -1"},children:[r.jsx("label",{htmlFor:"lab-patient-name",children:"Name *"}),r.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:a.name,onChange:Le,className:"lab-inventory-input"})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"lab-patient-age",children:"Age"}),r.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:a.age??"",onChange:Le,className:"lab-inventory-input"})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"lab-patient-gender",children:"Gender"}),r.jsxs("select",{name:"gender",id:"lab-patient-gender",value:a.gender??"",onChange:Le,className:"lab-inventory-select",children:[r.jsx("option",{value:"",children:"Select..."})," ",r.jsx("option",{value:"M",children:"Male"})," ",r.jsx("option",{value:"F",children:"Female"})," ",r.jsx("option",{value:"O",children:"Other"})]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{gridColumn:"1 / -1"},children:[r.jsx("label",{htmlFor:"lab-patient-phone",children:"Phone"}),r.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:a.phone||"",onChange:Le,className:"lab-inventory-input"})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{gridColumn:"1 / -1"},children:[r.jsx("label",{htmlFor:"lab-patient-address",children:"Address"}),r.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:a.address||"",onChange:Le,className:"lab-inventory-input"})]})]}),r.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{type:"button",onClick:ce,className:"lab-inventory-button lab-inventory-button-secondary",children:" Cancel "}),r.jsx("button",{type:"submit",className:"lab-inventory-button",children:" Create Patient & Proceed "})]})]})]})]}),t==="create_order"&&l&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h2",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"none",margin:"0"},children:["Create Order for: ",l.name]}),r.jsx("button",{onClick:ce,className:"lab-inventory-link",style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:" Change Patient "})]}),r.jsxs("p",{style:{fontSize:"0.9em",color:"#555",marginBottom:"20px"},children:["ID: ",l.id.substring(0,8),"... ",l.age&&`| Age: ${l.age}`," ",l.gender&&`| Gender: ${l.gender}`]}),F&&r.jsx("div",{className:"error-text",children:F}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"lab-inventory-form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",children:"Add Lab Test"}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search available lab tests...",value:b,onChange:ye=>v(ye.target.value),className:"lab-inventory-input",disabled:Q}),Q&&r.jsx("span",{className:"loading-text",style:{position:"absolute",right:"10px",top:"35px",fontSize:"0.8em"},children:"Loading tests..."}),b&&N.length>0&&r.jsx("div",{className:"lab-inventory-card",style:{maxHeight:"200px",overflowY:"auto",padding:"0",marginTop:"5px",position:"absolute",width:"100%",zIndex:10},children:r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:N.map(ye=>r.jsxs("li",{onClick:()=>nt(ye),className:"lab-inventory-link",style:{padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer",display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:ye.name}),r.jsxs("span",{style:{color:"#555",fontSize:"0.9em"},children:["(",parseFloat(ye.price).toFixed(2),")"]})]},ye.id))})}),b&&N.length===0&&!Q&&r.jsxs("div",{className:"no-data-message",style:{marginTop:"5px"},children:['No tests found matching "',b,'".']})]}),r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",maxHeight:"300px",overflowY:"auto"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",borderBottom:"1px solid #eee",marginBottom:"10px"},children:"Selected Tests"}),p.length===0?r.jsx("p",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"0"},children:"No tests added yet."}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:p.map(ye=>r.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #f0f0f0"},children:[r.jsx("span",{style:{flex:1,marginRight:"10px"},children:ye.name}),r.jsxs("span",{style:{fontWeight:"500",marginRight:"15px"},children:["",parseFloat(ye.price).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ut(ye.id),className:"lab-inventory-link",title:"Remove Test",style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:r.jsx(Sr,{size:16})})]},ye.id))})]}),p.length>0&&r.jsxs("div",{style:{textAlign:"right",fontWeight:"bold",fontSize:"1.2em",marginTop:"20px",marginBottom:"20px"},children:["Total: ",p.reduce((ye,Ae)=>ye+parseFloat(Ae.price),0).toFixed(2)]}),r.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{type:"button",onClick:ce,className:"lab-inventory-button lab-inventory-button-secondary",children:" Cancel Order "}),r.jsx("button",{type:"submit",disabled:p.length===0,className:`lab-inventory-button ${p.length===0?"opacity-50 cursor-not-allowed":""}`,children:" Create Lab Order "})]})]})]})]})},mq=({currentUser:e})=>{const[n,t]=w.useState("newtons-ai"),[i,a]=w.useState(""),[o,l]=w.useState([]),[f,d]=w.useState(!0),[u,p]=w.useState([]),[g,b]=w.useState(!1),[v,N]=w.useState(null),[k,E]=w.useState(null),T=Nt(),I=async()=>{d(!0),E(null);let H=[];try{const F=await pe("/api/queue");if(!F.ok){const ne=await F.json();throw new Error(ne.message||"Failed to fetch queue")}H=await F.json(),console.log("Fetched Initial Queue Data:",JSON.stringify(H,null,2));const L=H.map(async ne=>{if(!ne.patient_id)return console.warn(`Queue entry ${ne.id} has no patient_id.`),ne;try{const ie=await pe(`/api/patients/${ne.patient_id}`);if(!ie.ok)return console.error(`Failed to fetch patient details for ${ne.patient_id}: ${ie.status}`),ne;const oe=await ie.json();return{...ne,Patient:{...ne.Patient??{},...oe}}}catch(ie){return console.error(`Error fetching patient details for ${ne.patient_id}:`,ie),ne}}),Q=await Promise.all(L);console.log("Enriched Queue Data (Before Sort):",JSON.stringify(Q,null,2)),Q.sort((ne,ie)=>{var X,P;const oe=((X=ne.Patient)==null?void 0:X.subscription_status)==="active",Y=((P=ie.Patient)==null?void 0:P.subscription_status)==="active";if(oe&&!Y)return-1;if(!oe&&Y)return 1;const z=ne.created_at?new Date(ne.created_at).getTime():0,re=ie.created_at?new Date(ie.created_at).getTime():0;return z-re}),console.log("Sorted Queue Data:",JSON.stringify(Q,null,2)),l(Q)}catch(F){console.error("Error in fetchQueue process:",F),E(`Failed to load queue: ${F.message}`),l(H)}finally{d(!1)}},D=async()=>{b(!0),E(null);try{const H=await pe("/api/staff?role=doctor");if(!H.ok){const L=await H.json();throw new Error(L.message||"Failed to fetch doctors")}const F=await H.json();p(F.filter(L=>L.active))}catch(H){console.error("Error fetching doctors:",H),E(`Failed to fetch doctors: ${H.message}`)}finally{b(!1)}};w.useEffect(()=>{n==="queue"&&(I(),D()),N(null)},[n]);const U=w.useCallback(async(H,F)=>{if(console.log(`Attempting to assign doctor ${F} to queue ${H}`),E(null),N(null),!F){console.log("No doctor ID provided, skipping assignment.");return}const L=o.find(ie=>ie.id===H);if(!L){console.error(`Queue entry ${H} not found in local state.`),E("Queue entry not found.");return}if(L.doctor_id===F){console.log(`Queue ${H} already assigned to doctor ${F}. Skipping.`);return}const Q=async ie=>{if(!ie||!ie.id||!ie.name){E("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",ie);return}const oe=async()=>{try{const Y={status:"waiting",doctorId:F},z=await pe(`/api/queue/${H}/status`,{method:"PATCH",body:JSON.stringify(Y)}),re=await z.json();if(!z.ok)throw new Error(re.message||`HTTP error! status: ${z.status}`);const X=u.find(P=>P.id===F);return console.log(`Successfully assigned doctor ${X==null?void 0:X.name} to queue ${H}.`),l(P=>P.map(te=>te.id===H?{...te,doctor_id:F,status:re.status||te.status,User:X?{name:X.name}:null,Patient:ie}:te)),!0}catch(Y){return console.error(`Error assigning doctor for queue ${H}:`,Y),E(`Failed to assign doctor: ${Y.message}`),!1}};ie.subscription_status==="active"?(console.log(`Patient ${ie.name} (ID: ${ie.id}) has active subscription. Assigning doctor directly.`),await oe()):(console.log(`Patient ${ie.name} (ID: ${ie.id}) does not have active subscription (Status: ${ie.subscription_status}). Assigning doctor and proceeding to billing.`),await oe()?(console.log(`Navigating to billing for patient ${ie.name} (ID: ${ie.id}), queue ID: ${H}, doctor ID: ${F}`),T("/billing",{state:{patientId:ie.id,queueId:H,patientName:ie.name,doctorId:F,billType:"consultation"}})):console.log(`Assignment failed for patient ${ie.name}, skipping navigation.`))},ne=L.Patient;if(ne&&ne.id&&ne.name)console.log("Patient details found in state. Proceeding with assignment."),await Q(ne);else{console.warn(`Patient details missing for queue entry ${H}. Fetching patient ${L.patient_id}...`);try{const ie=await pe(`/api/patients/${L.patient_id}`);if(!ie.ok){const Y=await ie.json().catch(()=>({}));throw new Error(Y.message||`Failed to fetch patient details (status ${ie.status})`)}const oe=await ie.json();console.log("Successfully fetched patient details:",oe),await Q(oe)}catch(ie){console.error(`Failed to fetch patient details for patient ID ${L.patient_id}:`,ie),E(`Failed to fetch required patient details: ${ie.message}`)}}},[u,o,T]),O=async(H,F)=>{E(null);const L=F==="consulting"?"start consultation":"complete visit";try{const Q=o.find(Y=>Y.id===H);if(!Q&&F==="consulting")throw new Error("Queue entry not found to start consultation.");let ne={status:F};if(F==="consulting"){if(!(Q!=null&&Q.doctor_id))throw new Error("Cannot start consultation without an assigned doctor.");ne.doctorId=Q.doctor_id}const ie=await pe(`/api/queue/${H}/status`,{method:"PATCH",body:JSON.stringify(ne)}),oe=await ie.json();if(!ie.ok)throw new Error(oe.message||`HTTP error! status: ${ie.status}`);l(Y=>Y.map(z=>z.id===H?{...z,status:F}:z))}catch(Q){console.error(`Error trying to ${L}:`,Q),E(`Failed to ${L}: ${Q.message}`)}},$=[{id:"queue",label:"Queue",icon:r.jsx(Vm,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:r.jsx(ss,{size:20})},{id:"manage-admission",label:"Manage Admission",icon:r.jsx(JD,{size:20})},{id:"all-patients",label:"All Patients",icon:r.jsx(zI,{size:20})},{id:"lab",label:"Lab Tests",icon:r.jsx(K_,{size:20})},{id:"custom-bill",label:"Custom Bill",icon:r.jsx(as,{size:20})}],B=H=>{try{return new Date(H).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},q=o.filter(H=>{var F,L;return(L=(F=H.Patient)==null?void 0:F.name)==null?void 0:L.toLowerCase().includes(i.toLowerCase())});return r.jsx("div",{className:"reception-dashboard-container",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",children:[k&&r.jsxs("div",{className:"error-message-reception",role:"alert",children:[" ",r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:k})]}),r.jsxs("div",{className:"reception-tab-nav",children:[" ",$.map(H=>r.jsxs("button",{className:`reception-tab-button ${n===H.id?"active":""}`,onClick:()=>t(H.id),children:[r.jsx("span",{children:H.icon}),H.label]},H.id))]}),n==="queue"&&r.jsxs("div",{className:"space-y-6",children:[" ",r.jsxs("div",{className:"queue-header",children:[" ",r.jsxs("div",{className:"queue-actions",children:[" ",r.jsxs("div",{className:"search-bar-container",children:[" ",r.jsx("input",{type:"text",placeholder:"Search patients in queue...",className:"search-input",value:i,onChange:H=>a(H.target.value)}),r.jsx(ss,{className:"search-icon",size:18})]})]}),r.jsxs("div",{className:"summary-cards-grid",children:[" ",r.jsxs("div",{className:"summary-card card-waiting",children:[" ",r.jsx("div",{className:"summary-card-title",children:"Waiting"})," ",r.jsx("div",{className:"summary-card-value",children:o.filter(H=>H.status==="waiting").length})," "]}),r.jsxs("div",{className:"summary-card card-consulting",children:[" ",r.jsx("div",{className:"summary-card-title",children:"Consulting"})," ",r.jsx("div",{className:"summary-card-value",children:o.filter(H=>H.status==="consulting").length})," "]}),r.jsxs("div",{className:"summary-card card-completed",children:[" ",r.jsx("div",{className:"summary-card-title",children:"Completed"})," ",r.jsx("div",{className:"summary-card-value",children:o.filter(H=>H.status==="seen").length})," "]})]})]}),f?r.jsxs("div",{className:"loading-container",children:[" ",r.jsx("div",{className:"breathing-ball"})," ",r.jsx("span",{children:"Loading queue..."})]}):q.length===0?r.jsx("div",{className:"empty-queue-message",children:i?"No patients found matching your search.":"Queue is empty."}):r.jsxs("div",{className:"queue-table-wrapper",children:[" ",r.jsxs("table",{className:"queue-table",children:[" ",r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Queue"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Phone Number"}),r.jsx("th",{children:"Complaint"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{className:"hidden md:table-cell",children:"Time Added"})," ",r.jsx("th",{className:"text-center",children:"Action / Doctor"})," "]})}),r.jsx("tbody",{children:q.map(H=>{var F,L,Q,ne,ie,oe,Y,z,re,X,P;return r.jsxs("tr",{onClick:()=>T(`/dashboard/edit-complaint/${H.id}`),className:"queue-row-clickable",children:[r.jsxs("td",{children:[" ",r.jsxs("span",{className:"queue-token",children:["#",H.token_no]})," "]}),r.jsxs("td",{children:[" ",r.jsx("div",{className:"patient-name",children:((F=H.Patient)==null?void 0:F.name)||"N/A"})," ",r.jsxs("div",{className:"patient-details",children:[(L=H.Patient)!=null&&L.age?`${H.Patient.age} yrs, `:"",((Q=H.Patient)==null?void 0:Q.gender)||""]})," "]}),r.jsxs("td",{children:[" ",r.jsx("div",{className:"patient-phone",children:((ne=H.Patient)==null?void 0:ne.phone)||"N/A"})," "]}),r.jsx("td",{className:"complaint-text",children:H.complaint||"-"}),r.jsxs("td",{children:[r.jsx("span",{className:`subscription-status-badge ${((ie=H.Patient)==null?void 0:ie.subscription_status)==="active"?"status-active":((oe=H.Patient)==null?void 0:oe.subscription_status)==="cancelled"||((Y=H.Patient)==null?void 0:Y.subscription_status)==="expired"?"status-inactive":"status-none"}`,children:((z=H.Patient)==null?void 0:z.subscription_status)??"None"}),H.Patient&&H.Patient.id&&H.Patient.subscription_status!=="active"&&r.jsx("button",{onClick:te=>{te.stopPropagation(),H.Patient&&T(`/start-subscription/${H.Patient.id}`)},className:"action-button btn-start-sub-queue mt-2",children:"Start Sub"})]}),r.jsx("td",{className:"hidden md:table-cell time-added",children:B(H.created_at)}),r.jsx("td",{className:"action-doctor-cell",children:v===H.id?r.jsx("div",{className:"relative inline-block text-left w-full",onClick:te=>te.stopPropagation(),children:r.jsxs("select",{value:"",onChange:te=>U(H.id,te.target.value),onBlur:()=>N(null),className:"doctor-select-dropdown",autoFocus:!0,children:[r.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),g?r.jsx("option",{disabled:!0,children:"Loading..."}):u.length>0?u.map(te=>r.jsx("option",{value:te.id,children:te.name},te.id)):r.jsx("option",{disabled:!0,children:"No doctors available"})]})}):r.jsxs("div",{className:"action-doctor-content",onClick:te=>te.stopPropagation(),children:[" ",H.status==="waiting"&&r.jsx(r.Fragment,{children:(re=H.User)!=null&&re.name?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"doctor-name-display",children:H.User.name}),r.jsx("button",{onClick:()=>O(H.id,"consulting"),className:"action-button btn-start",children:"Start"})]}):g?r.jsx("span",{className:"status-text-italic",children:"Loading..."}):u.length===0?r.jsx("span",{className:"status-text-red",children:"No doctors"}):u.length===1?r.jsxs("button",{onClick:()=>U(H.id,u[0].id),className:"action-button btn-assign",children:["Assign ",u[0].name]}):r.jsx("button",{onClick:()=>N(H.id),className:"action-button btn-assign",children:"Assign"})}),H.status==="consulting"&&r.jsxs(r.Fragment,{children:[((X=H.User)==null?void 0:X.name)&&r.jsx("span",{className:"doctor-name-display",children:H.User.name}),r.jsx("button",{onClick:()=>O(H.id,"seen"),className:"action-button btn-complete",children:"Complete"})]}),H.status==="seen"&&r.jsxs(r.Fragment,{children:[((P=H.User)==null?void 0:P.name)&&r.jsx("span",{className:"doctor-name-display",children:H.User.name}),r.jsx("span",{className:"status-text-italic",children:"Completed"})]}),H.status==="cancelled"&&r.jsx("span",{className:"status-text-red",children:"Cancelled"})]})})]},H.id)})})]})]})]}),n==="lab"&&r.jsxs("div",{className:"lab-tab-content",children:[" ",r.jsx(Xk,{currentUser:e}),r.jsxs("button",{onClick:()=>T("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[r.jsx(ss,{size:16}),"Search Lab Reports"]})]}),n==="newtons-ai"&&r.jsx("div",{className:"newtons-ai-tab-content",children:r.jsx(ph,{})}),n==="manage-admission"&&r.jsx("div",{className:"manage-admission-tab-content",children:r.jsx(Jk,{})}),n==="all-patients"&&r.jsx("div",{className:"all-patients-tab-content",children:r.jsx(_1,{})}),n==="custom-bill"&&r.jsx("div",{className:"custom-bill-tab-content",children:r.jsx(Kk,{})})]})})},gq=e=>{let n="";if(!e.report_content)return"No report content available.";n+=`*Report Date:* ${e.report_date?new Date(e.report_date).toLocaleDateString():"N/A"}

`;try{const t=JSON.parse(e.report_content);typeof t=="object"&&t!==null&&e.tests?e.tests.forEach((i,a)=>{n+=`*Test: ${i.name}*
`,t[i.id]?Object.entries(t[i.id]).forEach(([o,l])=>{var p;const f=(p=i.default_parameters)==null?void 0:p.find(g=>g.name===o);let d=String(l),u="";if(f){const g=f.unit?` _${f.unit}_`:"";if(f.type==="boolean"){const b=l===!0||l==="true";d=b?"*Reactive*":"Non-Reactive",b||(u="`Normal: Non-Reactive`")}else if(f.type==="number"){const b=typeof l=="string"?parseFloat(l):typeof l=="number"?l:NaN;if(f.lower_limit!=null||f.upper_limit!=null){let v=[];f.lower_limit!=null&&v.push(`${f.lower_limit}`),f.upper_limit!=null&&v.push(`${f.upper_limit}`),u=`\`Normal: ${v.join(" - ")}\`${g}`,!isNaN(b)&&(f.lower_limit!=null&&b<f.lower_limit||f.upper_limit!=null&&b>f.upper_limit)&&(d=`*${d}*`)}}f.unit&&(d+=g)}n+=`${o}: ${d}
`,u&&((f==null?void 0:f.type)==="boolean"&&(l===!0||l==="true")||(n+=`${u}
`))}):n+=`_No parameters reported for this test._
`,a<e.tests.length-1&&(n+=`
`)}):n+=e.report_content}catch{n+=e.report_content}return n},Zk=e=>{var l;if(!((l=e==null?void 0:e.Patient)!=null&&l.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(e!=null&&e.report_content)){alert("Cannot share report: No report content is available to share.");return}const n=e.Patient.name||"Patient",t=gq(e),i=`Hello ${n},

Your lab report is ready.

${t}`,o=`https://wa.me/${yq(e.Patient.phone)}?text=${encodeURIComponent(i)}`;window.open(o,"_blank")},yq=e=>{let n=e.replace(/\D/g,"");const t=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,i=n.match(t);return i?n="91"+i[1]:n.startsWith("91")||(n="91"+n),n},xq=()=>{const[e,n]=w.useState([]),[t,i]=w.useState(""),[a,o]=w.useState(!0),[l,f]=w.useState(null),[d,u]=w.useState("orders"),[p,g]=w.useState(1),[b]=w.useState(20),[v,N]=w.useState(0),k=w.useMemo(()=>Math.ceil(v/b),[v,b]),E=w.useCallback(async(q=1,H="")=>{o(!0),f(null);try{const F=new URLSearchParams({page:String(q),limit:String(b)});H&&F.append("search",H);const L=await pe(`/api/lab?${F.toString()}`);if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const Q=await L.json(),ne=Q.orders.map(ie=>{var oe,Y;return{id:ie.id,labTokenNumber:String(ie.lab_token_number??"N/A"),patientName:((oe=ie.Patient)==null?void 0:oe.name)||"N/A",patientId:ie.patient_id,patientTokenNumber:String(((Y=ie.Patient)==null?void 0:Y.patient_token_number)??"N/A"),tests:(ie.tests||[]).map(z=>z.name||"Unknown Test"),date:Nh(new Date(ie.createdAt),"yyyy-MM-dd"),status:ie.status,reportId:ie.reportId,billId:ie.billId}});n(ne),N(Q.totalCount),g(q)}catch(F){console.error("Failed to fetch lab orders:",F),f(F instanceof Error?F.message:"An unknown error occurred"),n([]),N(0)}finally{o(!1)}},[b]);w.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${p}, Search term: "${t}"`),t.length===0||t.length>=2?(console.log(`Condition met (length ${t.length}). Fetching orders...`),E(p,t)):console.log(`Condition not met (length ${t.length}). Not fetching.`)},[E,p,t]),w.useEffect(()=>{const q=setTimeout(()=>{t.length>=2?p!==1&&g(1):t.length<2&&p!==1&&g(1)},1e3);return()=>{clearTimeout(q)}},[t]);const T=async(q,H)=>{console.log(`Updating order ${q} to status ${H}`);try{const F=await pe(`/api/lab/${q}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:H})});if(!F.ok){const L=await F.json();throw new Error(L.message||`Failed to update status: ${F.status}`)}if(H==="completed"){const L=await pe(`/api/lab/orders/${q}/report`);if(L.ok){const Q=await L.json();Zk(Q)}}await E(p,t),console.log(`Order ${q} status updated to ${H}, refetching page ${p}`)}catch(F){console.error("Error updating status:",F),alert(`Failed to update status: ${F instanceof Error?F.message:"Unknown error"}`)}},I=Nt(),D=q=>{if(!q){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}q.billId?(console.log(`Navigating to existing bill for Bill ID: ${q.billId}, Patient: ${q.patientName}`),I("/billing",{state:{billId:q.billId,patientId:q.patientId,patientName:q.patientName,billType:"lab"}})):(console.log(`Navigating to create new bill for Lab Order ID: ${q.id}, Patient: ${q.patientName}`),I("/lab-billing",{state:{labOrderId:q.id}}))},U=q=>{q&&q.id?I(`/lab/report/${q.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},O=q=>{switch(q){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:q,className:"status-badge"}}};if(a)return r.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:r.jsx("div",{className:"text-teal-600 text-xl animate-pulse",children:"Loading Lab Panel..."})});if(l)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[r.jsx(Ri,{size:48,className:"mb-4"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),r.jsx("p",{className:"mb-4",children:l}),r.jsx("button",{onClick:()=>E(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const $=()=>{p>1&&g(q=>q-1)},B=()=>{p<k&&g(q=>q+1)};return r.jsxs("div",{className:"lab-inventory-container",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("button",{onClick:()=>I(-1),className:"back-button mr-4",children:r.jsx(Qt,{size:24})}),r.jsx("h2",{className:"text-2xl font-semibold",children:"Lab Panel"})]}),r.jsxs("main",{className:"flex-1 overflow-y-auto",children:[r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px",borderBottom:"1px solid #ddd",paddingBottom:"10px"},children:[r.jsxs("button",{onClick:()=>u("orders"),className:`lab-inventory-button ${d==="orders"?"":"lab-inventory-button-secondary"}`,style:{display:"flex",alignItems:"center"},children:[r.jsx(Z_,{size:16,style:{marginRight:"8px"}}),"Orders"]}),r.jsx("button",{onClick:()=>I("/create-lab-order"),className:"lab-inventory-button",style:{display:"flex",alignItems:"center"},children:"Create New Lab Order"}),r.jsxs("button",{onClick:()=>u("inventory"),className:`lab-inventory-button ${d==="inventory"?"":"lab-inventory-button-secondary"}`,style:{display:"flex",alignItems:"center"},children:[r.jsx(ow,{size:16,style:{marginRight:"8px"}}),"Inventory"]})]}),d==="orders"&&r.jsxs("div",{className:"lab-orders-view",children:[" ",r.jsxs("div",{className:"lab-orders-header-controls",children:[r.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),r.jsxs("div",{className:"lab-orders-search-container",children:[r.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:t,onChange:q=>i(q.target.value),className:"lab-inventory-input lab-orders-search-input"}),r.jsx(ss,{size:18,className:"lab-orders-search-icon"})]})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient (Token)"}),r.jsx("th",{children:"Tests"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),r.jsxs("tbody",{children:[a&&!l&&e.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:"Loading orders..."})}),!a&&!l&&e.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:t?`No lab orders found matching "${t}".`:"No lab orders available."})}),!a&&!l&&e.map(q=>{const H=O(q.status);return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:q.patientName}),r.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",q.patientTokenNumber]})]}),r.jsx("td",{children:q.tests.map((F,L)=>r.jsx("div",{children:F},L))}),r.jsx("td",{className:"hidden md:table-cell",children:q.date}),r.jsx("td",{children:r.jsx("span",{className:H.className,children:H.text})}),r.jsx("td",{children:r.jsxs("div",{className:"lab-table-actions",children:[q.status==="pending"&&r.jsx("button",{onClick:()=>D(q),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),q.status==="billed"&&r.jsx("button",{onClick:()=>T(q.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),q.status==="collected"&&r.jsx("button",{onClick:()=>T(q.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(q.status==="processing"||q.status==="report_ready"||q.status==="reported")&&r.jsx("button",{onClick:()=>U(q),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(q.status==="report_ready"||q.status==="reported")&&r.jsx("button",{onClick:()=>T(q.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(q.status==="completed"||q.status==="report_ready"||q.status==="reported")&&r.jsx("button",{onClick:()=>{q.id?I(`/lab/view-report/${q.id}`):(console.error("Attempted to view report for an order with no ID:",q),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},q.id)})]})]})}),r.jsxs("div",{className:"lab-orders-card-container",children:[a&&!l&&e.length===0&&r.jsx("div",{className:"text-center py-10",children:"Loading orders..."}),!a&&!l&&e.length===0&&r.jsx("div",{className:"text-center py-10",children:t?`No lab orders found matching "${t}".`:"No lab orders available."}),!a&&!l&&e.map(q=>{const H=O(q.status);return r.jsxs("div",{className:"lab-order-card",children:[r.jsxs("div",{className:"lab-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lab-card-patient-name",children:q.patientName}),r.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",q.patientTokenNumber]}),r.jsx("div",{className:"lab-card-date",children:q.date})]}),r.jsx("span",{className:`${H.className} lab-card-status-pill`,children:H.text})]}),r.jsxs("div",{className:"lab-card-section",children:[r.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),q.tests.map((F,L)=>r.jsx("div",{className:"lab-card-test-item",children:F},L)),q.tests.length===0&&r.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),r.jsxs("div",{className:"lab-card-actions",children:[q.status==="pending"&&r.jsx("button",{onClick:()=>D(q),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),q.status==="billed"&&r.jsx("button",{onClick:()=>T(q.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),q.status==="collected"&&r.jsx("button",{onClick:()=>T(q.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(q.status==="processing"||q.status==="report_ready"||q.status==="reported")&&r.jsx("button",{onClick:()=>U(q),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(q.status==="report_ready"||q.status==="reported")&&r.jsx("button",{onClick:()=>T(q.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(q.status==="completed"||q.status==="report_ready"||q.status==="reported")&&r.jsx("button",{onClick:()=>{q.id?I(`/lab/view-report/${q.id}`):(console.error("Attempted to view report for an order with no ID:",q),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},q.id)})]}),!a&&v>0&&r.jsxs("div",{className:"lab-pagination-controls",children:[r.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",r.jsx("strong",{children:(p-1)*b+1})," ","to"," ",r.jsx("strong",{children:Math.min(p*b,v)})," ","of"," ",r.jsx("strong",{children:v})," ","results"]}),r.jsxs("div",{className:"lab-pagination-buttons",children:[r.jsx("button",{onClick:$,disabled:p===1,className:"lab-pagination-button","aria-label":"Previous page",children:r.jsx(lw,{size:18})}),r.jsxs("span",{children:["Page ",p," of ",k]}),r.jsx("button",{onClick:B,disabled:p===k,className:"lab-pagination-button","aria-label":"Next page",children:r.jsx(Sb,{size:18})})]})]})]}),d==="inventory"&&r.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",r.jsx(cw,{})]})]})]})},bq=()=>{const[e,n]=w.useState([]),[t,i]=w.useState(""),[a,o]=w.useState(!0),[l,f]=w.useState(null),d=Nt(),u=w.useRef(null),[p,g]=w.useState(1),[b,v]=w.useState(1),[N,k]=w.useState(0),E=10,T=w.useCallback(async(B,q,H)=>{o(!0),f(null);try{let F=`/api/pharmacy-orders?page=${B}&limit=${q}`;H&&H.trim()!==""&&(F+=`&search=${encodeURIComponent(H.trim())}`);const L=await pe(F);if(!L.ok)throw new Error(`Failed to fetch orders: ${L.statusText} (${L.status})`);const Q=await L.json();if(Q&&Array.isArray(Q.orders)&&typeof Q.totalOrders=="number"&&typeof Q.totalPages=="number")console.log("Fetched pharmacy orders data:",Q.orders),n(Q.orders),k(Q.totalOrders),v(Q.totalPages),g(Q.currentPage||B);else throw console.error("Received data does not match expected paginated structure:",Q),new Error("Invalid data format received from API")}catch(F){console.error("Failed to fetch pharmacy orders:",F),f(F.message||"Failed to fetch orders. Please try again."),n([]),v(1),k(0)}finally{o(!1)}},[]);w.useEffect(()=>(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{const B=t===""?p:1;t!==""&&p!==1&&g(1),T(B,E,t)},500),()=>{u.current&&clearTimeout(u.current)}),[t,p,T,E]);const I=B=>{d(`/dashboard/edit-pharmacy-order/${B}`)},D=B=>{f(null),console.log(`Preparing billing navigation for order: ${B}`);const q=e.find(H=>H.id===B);if(q){const H=q.medications.map(F=>{const L=F.price??0;return(F.price===void 0||F.price===null)&&console.warn(`Medication "${F.name}" in order ${B} is missing a price. Defaulting to 0.`),{name:F.name,pack_quantity:F.pack_quantity,loose_quantity:F.loose_quantity,price:L,pack_price:F.pack_price,loose_price:F.loose_price,total_price:F.total_price,isLoose:F.isLoose,unit:F.unit,drug_id:F.drug_id?String(F.drug_id):null,tabletsPerDay:F.tabletsPerDay,numberOfDays:F.numberOfDays,directions_to_use:F.directions_to_use,discount_percentage:0,batch:F.batch,expiry_date:F.expiry_date}});console.log("Navigating to /dashboard/pharmacy-billing with state:",{initialItems:H}),d(`/dashboard/pharmacy-billing/${B}`,{state:{initialItems:H}})}else console.error(`Order with ID ${B} not found.`),f(`Order with ID ${B} not found.`),alert(`Error: Could not find order ${B} to bill.`)},U=async(B,q)=>{f(null);const H=e.find(L=>L.id===B);if(!H){f(`Order with ID ${B} not found.`);return}const F={status:q,medications:H.medications};try{const L=await pe(`/api/pharmacy-orders/${B}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!L.ok){const ne=await L.text();throw new Error(`Failed to update status: ${L.statusText} (${L.status}) - ${ne}`)}const Q=await L.json();n(ne=>ne.map(ie=>ie.id===Q.id?{...ie,status:Q.status}:ie))}catch(L){console.error("Failed to update order status:",L),f(L.message||`Failed to update status for order ${B}.`),alert(`Error updating status for order ${B}: ${L.message||"Please try again."}`)}},O=B=>{switch(B){case"pending":return"status-pill status-pill-pending";case"billed":return"status-pill status-pill-billed";case"dispensed":return"status-pill status-pill-dispensed";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill status-pill-default"}},$=B=>{d(`/dashboard/orders/${B.id}`)};return a&&e.length===0&&!l?r.jsx("div",{className:"loading-pulse",children:"Loading Orders..."}):l&&e.length===0?r.jsxs("div",{className:"error-message-box",children:["Error loading orders: ",l]}):r.jsxs("div",{className:"pharmacy-queue-container",children:[r.jsxs("div",{className:"pharmacy-queue-header",children:[r.jsx("h3",{className:"pharmacy-queue-title",children:"Pharmacy Queue"}),r.jsxs("div",{className:"pharmacy-actions-container",children:[r.jsxs("div",{className:"pharmacy-buttons-group",children:[r.jsxs("button",{onClick:()=>d("/dashboard/add-order"),className:"pharmacy-action-button btn-add-order",children:[r.jsx(as,{size:16}),"Add Order"]}),r.jsxs("button",{onClick:()=>d("/dashboard/inventory"),className:"pharmacy-action-button btn-inventory",title:"View Pharmacy Inventory",children:[r.jsx(wh,{size:16}),"Inventory"]}),r.jsxs("button",{onClick:()=>d("/dashboard/search-patient-records"),className:"pharmacy-action-button btn-ai-search",title:"Search Patient Records with Newton's AI",children:[r.jsx(K0,{size:16}),"Newton's AI"]}),r.jsxs("button",{onClick:()=>d("/dashboard/distributors"),className:"pharmacy-action-button btn-distributors",title:"Manage Distributors",children:[r.jsx(wh,{size:16}),"Distributors"]}),r.jsxs("button",{onClick:()=>d("/dashboard/refill-reminders"),className:"pharmacy-action-button btn-refill-reminders",title:"View Refill Reminders",children:[r.jsx(eI,{size:16}),"Refill Reminders"]})]}),r.jsxs("div",{className:"pharmacy-search-input-container",children:[r.jsx("input",{type:"text",placeholder:"Search orders by patient name, token, or medication...",value:t,onChange:B=>i(B.target.value),className:"pharmacy-search-input"}),r.jsx(ss,{size:18,className:"pharmacy-search-icon"})]})]})]}),r.jsxs("div",{className:"pharmacy-orders-scroll-container",children:[l&&e.length>0&&r.jsxs("div",{className:"error-message-box",children:["Error: ",l]}),a&&e.length>0&&r.jsx("div",{className:"loading-pulse",children:"Updating Orders..."}),!a&&e.length===0&&!l&&r.jsx("div",{className:"empty-state-message",children:t?`No pharmacy orders found matching "${t}".`:"There are currently no pharmacy orders."}),e.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pharmacy-table-container",children:r.jsxs("table",{className:"pharmacy-queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Order Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(B=>r.jsxs("tr",{onClick:()=>$(B),style:{cursor:"pointer"},children:[r.jsxs("td",{children:[r.jsx("div",{className:"patient-name",children:B.patientName}),r.jsx("div",{className:"patient-token",title:`Patient Token: ${B.patientTokenNumber}`,children:B.patientTokenNumber})]}),r.jsxs("td",{className:"medication-info",children:[B.medications.map((q,H)=>r.jsxs("div",{className:"medication-item",children:[r.jsxs("span",{children:[q.name," (Packs: ",q.pack_quantity,", Loose: ",q.loose_quantity,", ",q.tabletsPerDay??"N/A","x",q.numberOfDays??"N/A","d)",q.box_number&&r.jsxs("span",{className:"medication-box-number",children:[" (Box: ",q.box_number,")"]})]}),q.directions_to_use&&r.jsxs("span",{className:"medication-directions",children:["Directions: ",q.directions_to_use]}),r.jsxs("div",{className:"medication-prices text-xs text-gray-500",children:[q.pack_price!==void 0&&`Pack Price: ${Number(q.pack_price).toFixed(2)}`,q.loose_price!==void 0&&` | Loose Price: ${Number(q.loose_price).toFixed(2)}`,q.total_price!==void 0&&` | Item Total: ${Number(q.total_price).toFixed(2)}`]})]},H)),B.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"unavailable-drugs-note",children:[r.jsx("strong",{children:"Unavailable Drugs Note:"})," ",B.prescriptionForUnavailableDrugs]})]}),r.jsx("td",{className:"hidden md:table-cell date-info",children:new Date(B.date).toLocaleDateString()}),r.jsxs("td",{className:"order-total-cell font-semibold",children:["",Number(B.order_total??0).toFixed(2)]}),r.jsx("td",{children:r.jsx("span",{className:O(B.status),children:B.status})}),r.jsx("td",{children:r.jsxs("div",{className:"pharmacy-table-actions",children:[B.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:q=>{q.stopPropagation(),I(B.id)},className:"pharmacy-table-action-button btn-edit-order",children:[r.jsx(_d,{size:14})," Edit"]}),r.jsxs("button",{onClick:q=>{q.stopPropagation(),D(B.id)},className:"pharmacy-table-action-button btn-bill-order",children:[r.jsx(wd,{size:14})," Bill"]})]}),B.status==="billed"&&r.jsxs("button",{onClick:q=>{q.stopPropagation(),U(B.id,"dispensed")},className:"pharmacy-table-action-button btn-dispense-order",children:[r.jsx(ls,{size:14})," Dispense"]}),(B.status==="pending"||B.status==="billed")&&r.jsx("button",{onClick:q=>{q.stopPropagation(),U(B.id,"cancelled")},className:"pharmacy-table-action-button btn-cancel-order",children:"Cancel"}),r.jsx("button",{onClick:q=>{q.stopPropagation(),$(B)},className:"pharmacy-table-action-button btn-details-order",children:"Details"})]})})]},B.id))})]})}),r.jsx("div",{className:"pharmacy-card-view-container",children:e.map(B=>{const q=O(B.status);return r.jsxs("div",{className:"pharmacy-order-card",onClick:()=>$(B),children:[r.jsxs("div",{className:"pharmacy-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"pharmacy-card-patient-name",children:B.patientName||"N/A"}),r.jsxs("div",{className:"pharmacy-card-patient-token",title:`Patient Token: ${B.patientTokenNumber}`,children:["Token: ",B.patientTokenNumber||"N/A"]}),r.jsx("div",{className:"pharmacy-card-date",children:new Date(B.date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:q,children:B.status}),B.order_total!==void 0&&r.jsxs("span",{className:"pharmacy-card-order-total font-semibold",children:["",Number(B.order_total).toFixed(2)]})]})]}),r.jsxs("div",{className:"pharmacy-card-medications",children:[r.jsx("p",{className:"pharmacy-card-medications-title",children:"Medications:"}),r.jsxs("div",{className:"space-y-0_5",children:[B.medications.slice(0,2).map((H,F)=>r.jsxs("div",{className:"pharmacy-card-medication-item",children:[r.jsxs("span",{title:`${H.name} (Packs: ${H.pack_quantity}, Loose: ${H.loose_quantity}, ${H.tabletsPerDay??"N/A"}x${H.numberOfDays??"N/A"}d)`,children:[H.name," (Packs: ",H.pack_quantity,", Loose: ",H.loose_quantity,", ",H.tabletsPerDay??"N/A","x",H.numberOfDays??"N/A","d)",H.box_number&&r.jsxs("span",{className:"medication-box-number",children:[" (Box: ",H.box_number,")"]})]}),H.directions_to_use&&r.jsxs("span",{className:"medication-directions",title:`Directions: ${H.directions_to_use}`,children:["Directions: ",H.directions_to_use]}),r.jsxs("div",{className:"medication-prices text-xs text-gray-500",children:[H.pack_price!==void 0&&`Pack Price: ${Number(H.pack_price).toFixed(2)}`,H.loose_price!==void 0&&` | Loose Price: ${Number(H.loose_price).toFixed(2)}`,H.total_price!==void 0&&` | Item Total: ${Number(H.total_price).toFixed(2)}`]})]},F)),B.medications.length>2&&r.jsxs("div",{className:"pharmacy-card-medications-more",children:["...and ",B.medications.length-2," more"]}),B.medications.length===0&&r.jsx("div",{className:"pharmacy-card-no-medications",children:"No medications listed."})]}),B.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"unavailable-drugs-note",children:[r.jsx("strong",{children:"Unavailable Drugs Note:"})," ",B.prescriptionForUnavailableDrugs]})]}),r.jsxs("div",{className:"pharmacy-card-actions",children:[B.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:H=>{H.stopPropagation(),I(B.id)},className:"pharmacy-table-action-button btn-edit-order",children:[r.jsx(_d,{size:14})," Edit"]}),r.jsxs("button",{onClick:H=>{H.stopPropagation(),D(B.id)},className:"pharmacy-table-action-button btn-bill-order",children:[r.jsx(wd,{size:14})," Bill"]})]}),B.status==="billed"&&r.jsxs("button",{onClick:H=>{H.stopPropagation(),U(B.id,"dispensed")},className:"pharmacy-table-action-button btn-dispense-order",children:[r.jsx(ls,{size:14})," Dispense"]}),(B.status==="pending"||B.status==="billed")&&r.jsx("button",{onClick:H=>{H.stopPropagation(),U(B.id,"cancelled")},className:"pharmacy-table-action-button btn-cancel-order",children:"Cancel"}),r.jsx("button",{onClick:H=>{H.stopPropagation(),$(B)},className:"pharmacy-table-action-button btn-details-order",children:"Details"})]})]},B.id)})})]}),!a&&b>1&&r.jsxs("div",{className:"pharmacy-pagination-container",children:[r.jsxs("div",{className:"pagination-mobile-controls",children:[r.jsx("button",{onClick:()=>g(B=>Math.max(B-1,1)),disabled:p===1,className:"pagination-button prev",children:"Previous"}),r.jsx("button",{onClick:()=>g(B=>Math.min(B+1,b)),disabled:p===b,className:"pagination-button next",children:"Next"})]}),r.jsxs("div",{className:"pagination-desktop-controls",children:[r.jsx("div",{className:"pagination-info",children:r.jsxs("p",{children:["Showing ",r.jsx("span",{className:"font-medium",children:(p-1)*E+1})," ","to ",r.jsx("span",{className:"font-medium",children:Math.min(p*E,N)})," ","of ",r.jsx("span",{className:"font-medium",children:N})," results"]})}),r.jsx("div",{children:r.jsxs("nav",{className:"pagination-nav","aria-label":"Pagination",children:[r.jsxs("button",{onClick:()=>g(B=>Math.max(B-1,1)),disabled:p===1,className:"pagination-nav-button prev",children:[r.jsx("span",{className:"sr-only",children:"Previous"}),r.jsx(lw,{"aria-hidden":"true"})]}),r.jsxs("span",{"aria-current":"page",className:"pagination-current-page",children:["Page ",p," of ",b]}),r.jsxs("button",{onClick:()=>g(B=>Math.min(B+1,b)),disabled:p===b,className:"pagination-nav-button next",children:[r.jsx("span",{className:"sr-only",children:"Next"}),r.jsx(Sb,{"aria-hidden":"true"})]})]})})]})]})]})," "]})},vq=()=>{const e=Nt();return r.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[r.jsx("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},wq=()=>{const{id:e}=qr(),n=Nt(),[t,i]=w.useState(null),[a,o]=w.useState(!0),[l,f]=w.useState(null),[d,u]=w.useState(!1),[p,g]=w.useState(!1),b=w.useRef(null),v=w.useRef(null),N=w.useRef(null),k=w.useCallback(async()=>{if(!e){f("Drug ID is missing."),o(!1);return}o(!0),f(null);try{const D=await pe(`/api/drugs/${e}`);if(!D.ok){const O=await D.json();throw new Error(O.message||`Failed to fetch drug: ${D.statusText}`)}let U=await D.json();U={...U,name:U.name||"",brand_name:U.brand_name||"",price:parseFloat(String(U.price))||0,buying_price:U.buying_price!==null&&U.buying_price!==void 0?parseFloat(String(U.buying_price)):null,quantity_in_stock:parseInt(String(U.quantity_in_stock),10)||0,gst:U.gst!==null&&U.gst!==void 0?parseFloat(String(U.gst)):null,margin:U.margin!==null&&U.margin!==void 0?parseFloat(String(U.margin)):null,discount:U.discount!==null&&U.discount!==void 0?parseFloat(String(U.discount)):null,batch:U.batch||"",hsn_code:U.hsn_code||"",mfg:U.mfg||"",loose:U.loose!==null&&U.loose!==void 0?parseInt(String(U.loose),10):null},i(U)}catch(D){console.error("Failed to fetch drug:",D),f(D.message||"Failed to load drug data. Please try again.")}finally{o(!1)}},[e]);w.useEffect(()=>{k()},[k]),w.useEffect(()=>{const D=O=>{O.key==="Tab"&&v.current===document.activeElement&&(p||(g(!0),setTimeout(()=>{var $;($=N.current)==null||$.focus()},0),O.preventDefault()))},U=O=>{b.current&&!b.current.contains(O.target)&&g(!1)};return document.addEventListener("keydown",D),document.addEventListener("mousedown",U),()=>{document.removeEventListener("keydown",D),document.removeEventListener("mousedown",U)}},[p]);const E=D=>{const{name:U,value:O,type:$}=D.target;i(B=>B?{...B,[U]:$==="number"?parseFloat(O)||null:O}:null)},T=()=>{n(-1)},I=async D=>{if(D.preventDefault(),f(null),u(!0),!t||!t.id){f("Cannot edit drug: No drug data available."),u(!1);return}if(t.price===void 0||t.quantity_in_stock===void 0){f("Price and Stock Quantity are required."),u(!1);return}const U={...t,name:t.name===""?null:t.name,brand_name:t.brand_name===""?null:t.brand_name,buying_price:t.buying_price===0?null:t.buying_price,expiry_date:t.expiry_date===""?null:t.expiry_date,gst:t.gst===0?null:t.gst,margin:t.margin===0?null:t.margin,discount:t.discount===0?null:t.discount,batch:t.batch===""?null:t.batch,hsn_code:t.hsn_code===""?null:t.hsn_code,mfg:t.mfg===""?null:t.mfg,loose:t.loose===0?null:t.loose};try{const O=await pe(`/api/drugs/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});if(!O.ok){const B=await O.json();throw new Error(B.message||`Failed to update drug: ${O.statusText}`)}const $=await O.json();alert(`Drug "${$.name}" updated successfully!`),n(-1)}catch(O){console.error("Failed to update drug:",O),f(O.message||"Failed to update drug. Please try again.")}finally{u(!1)}};return a?r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):l&&!t?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"error-message-load",children:["Error: ",l]})}):t?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"edit-drug-form-container",children:[r.jsxs("div",{className:"edit-drug-form-header",children:[r.jsxs("h2",{children:["Edit Drug: ",t.name]}),r.jsx("button",{onClick:T,className:"cancel-button",title:"Go Back",children:r.jsx(ci,{size:24})})]}),l&&r.jsx("div",{className:"error-message-submit",children:l}),r.jsxs("form",{onSubmit:I,className:"edit-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Composition Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Lo,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"edit-name",value:t.name||"",onChange:E,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})," "]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-brand_name",className:"form-label",children:"Brand Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Lo,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"edit-brand_name",value:t.brand_name||"",onChange:E,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-price",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Lo,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"price",id:"edit-price",required:!0,step:"0.01",min:"0",value:t.price,onChange:E,className:"custom-text-input",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-quantity_in_stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Lo,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"quantity_in_stock",id:"edit-quantity_in_stock",required:!0,step:"1",min:"0",value:t.quantity_in_stock,onChange:E,className:"custom-text-input",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-unit",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"unit",id:"edit-unit",value:t.unit||"",onChange:E,className:"custom-text-input",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:t.expiry_date||"",onChange:E,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:t.box_number||"",onChange:E,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:b,children:[r.jsx("button",{type:"button",onClick:()=>g(!p),className:"form-button w-full text-left",tabIndex:8,ref:v,children:"Others"}),p&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:t.description||"",onChange:E,className:"custom-text-input",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:t.supplier||"",onChange:E,className:"custom-text-input",placeholder:"Optional",tabIndex:10})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-buying_price",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"buying_price",id:"edit-buying_price",step:"0.01",min:"0",value:t.buying_price??"",onChange:E,placeholder:"Optional",className:"custom-text-input",tabIndex:11,ref:N})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"edit-gst",step:"0.01",min:"0",max:"100",value:t.gst??"",onChange:E,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"edit-margin",step:"0.01",min:"0",max:"100",value:t.margin??"",onChange:E,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"edit-discount",step:"0.01",min:"0",max:"100",value:t.discount??"",onChange:E,placeholder:"Optional",className:"custom-text-input",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"edit-batch",value:t.batch||"",onChange:E,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"edit-hsn_code",value:t.hsn_code||"",onChange:E,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"edit-mfg",value:t.mfg||"",onChange:E,className:"custom-text-input",placeholder:"Optional",tabIndex:17})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-loose",className:"form-label",children:"Loose"}),r.jsx("input",{type:"number",name:"loose",id:"edit-loose",step:"1",min:"0",value:t.loose??"",onChange:E,placeholder:"Optional",className:"custom-text-input",tabIndex:18})]})]})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:T,disabled:d,className:"form-button cancel-form-button",tabIndex:19,children:"Back"}),r.jsx("button",{type:"submit",disabled:d,className:"form-button submit-form-button",tabIndex:20,children:d?"Saving...":"Save Changes"})]})]})]})}):r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"not-found-message",children:"Drug not found."})})},k1=()=>{const e=Nt(),[n,t]=w.useState({name:"",age:"",gender:"",phone:"",complaint:"",doctorId:""}),[i,a]=w.useState(!1),[o,l]=w.useState(null),[f,d]=w.useState(null),[u,p]=w.useState(""),[g,b]=w.useState([]),[v,N]=w.useState(null),[k,E]=w.useState(!1),[T,I]=w.useState([]),[D,U]=w.useState(!0);w.useEffect(()=>{(async()=>{U(!0);try{const L=await pe("/api/staff?role=doctor");if(!L.ok)throw new Error("Failed to fetch doctors");const Q=await L.json();I(Q),Q.length>0&&t(ne=>({...ne,doctorId:""}))}catch(L){console.error("Error fetching doctors:",L),l(`Failed to load doctors: ${L.message}`)}finally{U(!1)}})()},[]);const O=w.useCallback(async()=>{if(u.trim()){E(!0),l(null),b([]);try{const F=encodeURIComponent(u.trim()),L=await pe(`/api/patients?search=${F}&limit=10`);if(!L.ok){const ne=await L.json().catch(()=>({message:"Failed to search patients"}));throw new Error(ne.message||"Failed to search patients")}const Q=await L.json();Q&&Array.isArray(Q.patients)?b(Q.patients):(console.error("Unexpected response format from patient search:",Q),b([]))}catch(F){console.error("Error searching patients:",F),l(`Search failed: ${F.message}`)}finally{E(!1)}}},[u]);w.useEffect(()=>{if(u.trim().length<2){b([]),l(null);return}const F=setTimeout(()=>{O()},300);return()=>clearTimeout(F)},[u,O]);const $=F=>{N(F),p(""),b([]),l(null),t(L=>({...L,name:"",age:"",gender:"",phone:""}))},B=()=>{N(null),p(""),b([]),l(null),t(F=>({...F,name:"",age:"",gender:"",phone:""}))},q=F=>{const{name:L,value:Q}=F.target;t(ne=>({...ne,[L]:Q}))},H=async F=>{var L;F.preventDefault(),l(null),d(null),a(!0);try{let Q,ne;if(v)Q=v.id,ne=v.name,console.log(`Adding existing patient ${Q} to queue.`);else{console.log("Registering new patient...");const z=await pe("/api/patients",{method:"POST",body:JSON.stringify({name:n.name,age:n.age?parseInt(n.age,10):null,gender:n.gender||null,phone:n.phone||null})});if(!z.ok){const X=await z.json();if(z.status===403&&X.message.includes("Patient limit")){e("/start-clinic-subscription",{state:{errorMessage:X.message}});return}throw new Error(X.message||"Failed to register patient")}const re=await z.json();Q=re.id,ne=re.name,console.log(`New patient ${Q} registered.`)}const ie=n.doctorId||null;console.log(`Adding patient ${Q} to queue for doctor ${ie||"Unassigned"}`);const oe=await pe("/api/queue",{method:"POST",body:JSON.stringify({patientId:Q,complaint:n.complaint||null,doctorId:ie})});if(!oe.ok){const z=await oe.json();throw new Error(z.message||"Failed to add patient to queue")}const Y=await oe.json();if(console.log(`Patient added to queue, entry ID: ${Y.id}`),N(null),p(""),b([]),t({name:"",age:"",gender:"",phone:"",complaint:"",doctorId:""}),ie){const z=((L=T.find(X=>X.id===ie))==null?void 0:L.name)||"Selected Doctor",re=v?`Existing patient "${ne}" added to queue for Dr. ${z}. Redirecting to billing...`:`Patient "${ne}" registered and added to queue for Dr. ${z}. Redirecting to billing...`;d(re),e("/billing",{state:{patientId:Q,queueId:Y.id,patientName:ne,doctorId:ie,billType:"consultation"}})}else{const z=v?`Existing patient "${ne}" added to the general queue.`:`Patient "${ne}" registered and added to the general queue.`;d(z)}}catch(Q){console.error("Error in add/queue process:",Q),Q.message.includes("Patient limit")?(l(`Operation failed: ${Q.message}. Please upgrade your plan.`),e("/start-clinic-subscription")):l(`Operation failed: ${Q.message}`)}finally{a(!1)}};return r.jsxs("div",{className:"add-patient-page-container flex flex-col items-center justify-start",children:[r.jsxs("div",{className:"w-full max-w-3xl mb-2 flex justify-start",children:[" ",r.jsxs("button",{onClick:()=>e(-1),className:"back-button",title:"Back to Previous Page",children:[r.jsx(Qt,{size:20,className:"btn-icon"})," Back"]})]}),r.jsxs("div",{className:"add-patient-card",children:[r.jsxs("h3",{className:"add-patient-title",children:[r.jsx(n2,{size:28})," ",v?"Add Existing Patient to Queue":"Register New Patient & Add to Queue"]}),r.jsxs("div",{className:"search-section",children:[r.jsx("legend",{className:"form-fieldset legend",children:"Find Existing Patient"})," ",r.jsxs("div",{className:"flex items-center space-x-2",children:[" ",r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by Name or Phone...",value:u,onChange:F=>p(F.target.value),className:"form-input",disabled:i||!!v}),r.jsx(ss,{size:18,className:`${k?"text-primary animate-pulse":""}`})," "]}),v&&r.jsxs("button",{type:"button",onClick:B,className:"btn btn-danger",title:"Clear Selection",children:[r.jsx(ci,{size:16,className:"btn-icon"})," Clear"]})]}),g.length>0&&!v&&r.jsx("ul",{className:"search-results-list",children:g.map(F=>r.jsxs("li",{onClick:()=>$(F),children:[F.name," (ID: ",F.id,", Phone: ",F.phone||"N/A",")"]},F.id))}),u.length>=2&&g.length===0&&!k&&!v&&r.jsxs("p",{className:"search-info-text",children:['No patients found matching "',u,'". You can register them below.']}),k&&u.length>=2&&r.jsx("p",{className:"search-info-text searching",children:"Searching..."})]}),o&&r.jsxs("div",{className:"alert alert-danger",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:o})]}),f&&r.jsxs("div",{className:"alert alert-success",role:"alert",children:[r.jsx("strong",{children:"Success: "}),r.jsx("span",{children:f})]}),r.jsxs("form",{onSubmit:H,className:"space-y-5",children:[" ",r.jsxs("fieldset",{className:`form-fieldset ${v?"fieldset-disabled":""}`,children:[r.jsx("legend",{children:v?`Selected Patient: ${v.name}`:"New Patient Details"}),r.jsxs("div",{className:"form-grid form-grid-cols-2",children:[" ",r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Full Name *"}),r.jsx("input",{type:"text",name:"name",value:v?v.name:n.name,onChange:q,className:"form-input",required:!v,disabled:i||!!v})]}),r.jsxs("div",{className:"form-grid form-grid-cols-2",children:[" ",r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Age"}),r.jsx("input",{type:"number",name:"age",value:v?v.age??"":n.age,onChange:q,className:"form-input",min:"0",disabled:i||!!v})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Gender"}),r.jsxs("select",{name:"gender",value:v?v.gender??"":n.gender,onChange:q,className:"form-select",disabled:i||!!v,children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Phone"}),r.jsx("input",{type:"tel",name:"phone",value:v?v.phone??"":n.phone,onChange:q,className:"form-input",disabled:i||!!v})]})]})]}),r.jsxs("fieldset",{className:"form-fieldset",children:[r.jsx("legend",{children:"Visit Details"}),r.jsxs("div",{className:"form-grid form-grid-cols-2",children:[" ",r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Assign Doctor (Optional)"}),r.jsxs("select",{name:"doctorId",value:n.doctorId,onChange:q,className:`form-select ${D?"opacity-50":""}`,disabled:i||D,children:[r.jsx("option",{value:"",children:D?"Loading doctors...":T.length===0?"No doctors available":"-- No Doctor (Add to General Queue) --"}),T.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]}),T.length===0&&!D&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please add doctors via the Admin Panel."})]}),r.jsxs("div",{className:"form-grid-col-span-2",children:[" ",r.jsx("label",{className:"form-label",children:"Patient Data / Reason"}),r.jsx("textarea",{name:"complaint",value:n.complaint,onChange:q,rows:2,className:"form-textarea",disabled:i})]})]})]}),r.jsxs("div",{className:"flex justify-end pt-2",children:[" ",r.jsxs("button",{type:"submit",className:`btn btn-primary ${i||D?"disabled":""}`,disabled:i||D,children:[r.jsx(t2,{size:18,className:"btn-icon"}),i?"Processing...":v?"Add Existing to Queue":"Register & Add to Queue"]})]})]})]})]})},Sq=({clinicId:e})=>{const n=Nt(),[t,i]=w.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[a,o]=w.useState(null),[l,f]=w.useState(!1);w.useEffect(()=>{o(e?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly.")},[e]);const d=g=>{const{name:b,value:v}=g.target;i(N=>{const k={...N,[b]:v};return b==="role"&&v!=="doctor"&&(k.opd_fee=""),k})},u=async g=>{if(g.preventDefault(),o(null),!t.name||!t.email||!t.role||!t.password){o("Name, Email, Role, and Password are required.");return}if(!e){o("Clinic information is missing. Cannot add staff.");return}const b={...t,clinic_id:e,opd_fee:t.role==="doctor"&&t.opd_fee?parseFloat(String(t.opd_fee)):null};if(b.role==="doctor"&&t.opd_fee&&isNaN(b.opd_fee)){o("Invalid OPD Fee format. Please enter a number.");return}f(!0);try{const v=await pe("/api/staff",{method:"POST",body:JSON.stringify(b)});if(!v.ok){const N=await v.json();throw new Error(N.message||"Server responded with an error")}n(-1)}catch(v){o(`Failed to add staff: ${v.message}`)}finally{f(!1)}},p=()=>{n(-1)};return r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:p,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(Qt,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{children:"Add New Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),a&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Ri,{size:18,className:"mr-2 text-red-500"}),a]}),r.jsxs("form",{onSubmit:u,className:`staff-form ${e?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{id:"name",type:"text",name:"name",value:t.name||"",onChange:d,required:!0,disabled:l||!e,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",name:"email",value:t.email||"",onChange:d,required:!0,disabled:l||!e,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"role",children:"Assign Role"}),r.jsxs("select",{id:"role",name:"role",value:t.role||"receptionist",onChange:d,required:!0,disabled:l||!e,children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:t.password||"",onChange:d,required:!0,disabled:l||!e,placeholder:"Create a password"})]}),t.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee () (Optional)"}),r.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:t.opd_fee||"",onChange:d,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:l||!e}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),r.jsxs("button",{type:"submit",disabled:l||!e,children:[l?r.jsx(Sd,{size:18,className:"animate-spin mr-2"}):r.jsx(Ph,{size:18,className:"mr-2"}),l?"Adding...":"Add Staff Member"]})]})]})},Nq=()=>{const{id:e}=qr(),n=Nt(),[t,i]=w.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[a,o]=w.useState(""),[l,f]=w.useState(!0),[d,u]=w.useState(!1),[p,g]=w.useState(null),[b,v]=w.useState(null),N=w.useCallback(async()=>{if(!e){g("Staff ID is missing."),f(!1);return}f(!0),g(null),v(null);try{const I=await pe(`/staff/${e}`);if(!I.ok){const U=await I.json();throw new Error(U.message||`HTTP error! status: ${I.status}`)}const D=await I.json();i({name:D.name,email:D.email,role:D.role,opd_fee:D.opd_fee??"",active:D.active})}catch(I){g(`Failed to load staff details: ${I.message}`)}finally{f(!1)}},[e]);w.useEffect(()=>{N()},[N]);const k=I=>{const{name:D,value:U,type:O}=I.target;if(O==="checkbox"){const{checked:$}=I.target;i(B=>({...B,[D]:$}))}else i($=>({...$,[D]:U}))},E=I=>{o(I.target.value)},T=async I=>{if(I.preventDefault(),!e){g("Staff ID is missing.");return}u(!0),g(null),v(null);const D={name:t.name,email:t.email,role:t.role,active:t.active};if(t.role==="doctor"){const U=t.opd_fee?parseFloat(String(t.opd_fee)):null;if(U!==null&&isNaN(U)){g("OPD Fee must be a valid number."),u(!1);return}D.opd_fee=U}else D.opd_fee=null;a.trim()!==""&&(D.password=a.trim());try{const U=await pe(`/staff/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!U.ok){const O=await U.json();throw new Error(O.message||`HTTP error! status: ${U.status}`)}v("Staff details updated successfully!"),o(""),setTimeout(()=>n(-1),1500)}catch(U){g(`Failed to update staff: ${U.message}`)}finally{u(!1)}};return l?r.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(Sd,{className:"h-12 w-12 animate-spin text-teal-600"}),r.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>n(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(Qt,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),p&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Ri,{size:18,className:"mr-2 text-red-500"}),p,r.jsx("button",{onClick:()=>g(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),b&&r.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[r.jsx(ls,{size:18,className:"mr-2 text-green-500"}),b,r.jsx("button",{onClick:()=>v(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:""})]}),r.jsxs("form",{onSubmit:T,className:"staff-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:t.name||"",onChange:k,required:!0,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:t.email||"",onChange:k,required:!0,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"role",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"role",name:"role",value:t.role||"receptionist",onChange:k,required:!0,children:[r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"lab",children:"Lab Technician"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"})]})]}),t.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee ()"}),r.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:t.opd_fee||"",onChange:k,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),r.jsxs("div",{className:"form-group checkbox-group",children:[r.jsx("input",{id:"active",name:"active",type:"checkbox",checked:t.active??!0,onChange:k}),r.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),r.jsx("input",{type:"password",id:"password",name:"password",value:a,onChange:E,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),r.jsx("button",{type:"submit",disabled:d,children:d?r.jsxs(r.Fragment,{children:[r.jsx(Sd,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(jd,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})};function Cq(e,n){const t={};return(e[e.length-1]===""?[...e,""]:e).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const jq=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_q=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,kq={};function YC(e,n){return(kq.jsx?_q:jq).test(e)}const Eq=/[ \t\n\f\r]/g;function Tq(e){return typeof e=="object"?e.type==="text"?WC(e.value):!1:WC(e)}function WC(e){return e.replace(Eq,"")===""}let og=class{constructor(n,t,i){this.normal=t,this.property=n,i&&(this.space=i)}};og.prototype.normal={};og.prototype.property={};og.prototype.space=void 0;function eE(e,n){const t={},i={};for(const a of e)Object.assign(t,a.property),Object.assign(i,a.normal);return new og(t,i,n)}function E1(e){return e.toLowerCase()}let fa=class{constructor(n,t){this.attribute=t,this.property=n}};fa.prototype.attribute="";fa.prototype.booleanish=!1;fa.prototype.boolean=!1;fa.prototype.commaOrSpaceSeparated=!1;fa.prototype.commaSeparated=!1;fa.prototype.defined=!1;fa.prototype.mustUseProperty=!1;fa.prototype.number=!1;fa.prototype.overloadedBoolean=!1;fa.prototype.property="";fa.prototype.spaceSeparated=!1;fa.prototype.space=void 0;let Aq=0;const zt=Dd(),Pi=Dd(),tE=Dd(),st=Dd(),Qn=Dd(),yh=Dd(),Ia=Dd();function Dd(){return 2**++Aq}const T1=Object.freeze(Object.defineProperty({__proto__:null,boolean:zt,booleanish:Pi,commaOrSpaceSeparated:Ia,commaSeparated:yh,number:st,overloadedBoolean:tE,spaceSeparated:Qn},Symbol.toStringTag,{value:"Module"})),g0=Object.keys(T1);let Ew=class extends fa{constructor(n,t,i,a){let o=-1;if(super(n,t),QC(this,"space",a),typeof i=="number")for(;++o<g0.length;){const l=g0[o];QC(this,g0[o],(i&T1[l])===T1[l])}}};Ew.prototype.defined=!0;function QC(e,n,t){t&&(e[n]=t)}function Oh(e){const n={},t={};for(const[i,a]of Object.entries(e.properties)){const o=new Ew(i,e.transform(e.attributes||{},i),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),n[i]=o,t[E1(i)]=i,t[E1(o.attribute)]=i}return new og(n,t,e.space)}const nE=Oh({properties:{ariaActiveDescendant:null,ariaAtomic:Pi,ariaAutoComplete:null,ariaBusy:Pi,ariaChecked:Pi,ariaColCount:st,ariaColIndex:st,ariaColSpan:st,ariaControls:Qn,ariaCurrent:null,ariaDescribedBy:Qn,ariaDetails:null,ariaDisabled:Pi,ariaDropEffect:Qn,ariaErrorMessage:null,ariaExpanded:Pi,ariaFlowTo:Qn,ariaGrabbed:Pi,ariaHasPopup:null,ariaHidden:Pi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Qn,ariaLevel:st,ariaLive:null,ariaModal:Pi,ariaMultiLine:Pi,ariaMultiSelectable:Pi,ariaOrientation:null,ariaOwns:Qn,ariaPlaceholder:null,ariaPosInSet:st,ariaPressed:Pi,ariaReadOnly:Pi,ariaRelevant:null,ariaRequired:Pi,ariaRoleDescription:Qn,ariaRowCount:st,ariaRowIndex:st,ariaRowSpan:st,ariaSelected:Pi,ariaSetSize:st,ariaSort:null,ariaValueMax:st,ariaValueMin:st,ariaValueNow:st,ariaValueText:null,role:null},transform(e,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()}});function iE(e,n){return n in e?e[n]:n}function rE(e,n){return iE(e,n.toLowerCase())}const Pq=Oh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yh,acceptCharset:Qn,accessKey:Qn,action:null,allow:null,allowFullScreen:zt,allowPaymentRequest:zt,allowUserMedia:zt,alt:null,as:null,async:zt,autoCapitalize:null,autoComplete:Qn,autoFocus:zt,autoPlay:zt,blocking:Qn,capture:null,charSet:null,checked:zt,cite:null,className:Qn,cols:st,colSpan:null,content:null,contentEditable:Pi,controls:zt,controlsList:Qn,coords:st|yh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:zt,defer:zt,dir:null,dirName:null,disabled:zt,download:tE,draggable:Pi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:zt,formTarget:null,headers:Qn,height:st,hidden:zt,high:st,href:null,hrefLang:null,htmlFor:Qn,httpEquiv:Qn,id:null,imageSizes:null,imageSrcSet:null,inert:zt,inputMode:null,integrity:null,is:null,isMap:zt,itemId:null,itemProp:Qn,itemRef:Qn,itemScope:zt,itemType:Qn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:zt,low:st,manifest:null,max:null,maxLength:st,media:null,method:null,min:null,minLength:st,multiple:zt,muted:zt,name:null,nonce:null,noModule:zt,noValidate:zt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:zt,optimum:st,pattern:null,ping:Qn,placeholder:null,playsInline:zt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:zt,referrerPolicy:null,rel:Qn,required:zt,reversed:zt,rows:st,rowSpan:st,sandbox:Qn,scope:null,scoped:zt,seamless:zt,selected:zt,shadowRootClonable:zt,shadowRootDelegatesFocus:zt,shadowRootMode:null,shape:null,size:st,sizes:null,slot:null,span:st,spellCheck:Pi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:st,step:null,style:null,tabIndex:st,target:null,title:null,translate:null,type:null,typeMustMatch:zt,useMap:null,value:Pi,width:st,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Qn,axis:null,background:null,bgColor:null,border:st,borderColor:null,bottomMargin:st,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:zt,declare:zt,event:null,face:null,frame:null,frameBorder:null,hSpace:st,leftMargin:st,link:null,longDesc:null,lowSrc:null,marginHeight:st,marginWidth:st,noResize:zt,noHref:zt,noShade:zt,noWrap:zt,object:null,profile:null,prompt:null,rev:null,rightMargin:st,rules:null,scheme:null,scrolling:Pi,standby:null,summary:null,text:null,topMargin:st,valueType:null,version:null,vAlign:null,vLink:null,vSpace:st,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:zt,disableRemotePlayback:zt,prefix:null,property:null,results:st,security:null,unselectable:null},space:"html",transform:rE}),Dq=Oh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ia,accentHeight:st,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:st,amplitude:st,arabicForm:null,ascent:st,attributeName:null,attributeType:null,azimuth:st,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:st,by:null,calcMode:null,capHeight:st,className:Qn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:st,diffuseConstant:st,direction:null,display:null,dur:null,divisor:st,dominantBaseline:null,download:zt,dx:null,dy:null,edgeMode:null,editable:null,elevation:st,enableBackground:null,end:null,event:null,exponent:st,externalResourcesRequired:null,fill:null,fillOpacity:st,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yh,g2:yh,glyphName:yh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:st,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:st,horizOriginX:st,horizOriginY:st,id:null,ideographic:st,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:st,k:st,k1:st,k2:st,k3:st,k4:st,kernelMatrix:Ia,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:st,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:st,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:st,overlineThickness:st,paintOrder:null,panose1:null,path:null,pathLength:st,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Qn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:st,pointsAtY:st,pointsAtZ:st,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ia,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ia,rev:Ia,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ia,requiredFeatures:Ia,requiredFonts:Ia,requiredFormats:Ia,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:st,specularExponent:st,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:st,strikethroughThickness:st,string:null,stroke:null,strokeDashArray:Ia,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:st,strokeOpacity:st,strokeWidth:null,style:null,surfaceScale:st,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ia,tabIndex:st,tableValues:null,target:null,targetX:st,targetY:st,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ia,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:st,underlineThickness:st,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:st,values:null,vAlphabetic:st,vMathematical:st,vectorEffect:null,vHanging:st,vIdeographic:st,version:null,vertAdvY:st,vertOriginX:st,vertOriginY:st,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:st,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:iE}),aE=Oh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,n){return"xlink:"+n.slice(5).toLowerCase()}}),sE=Oh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:rE}),oE=Oh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,n){return"xml:"+n.slice(3).toLowerCase()}}),Iq={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Mq=/[A-Z]/g,JC=/-[a-z]/g,Rq=/^data[-\w.:]+$/i;function Oq(e,n){const t=E1(n);let i=n,a=fa;if(t in e.normal)return e.property[e.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&Rq.test(n)){if(n.charAt(4)==="-"){const o=n.slice(5).replace(JC,Fq);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=n.slice(4);if(!JC.test(o)){let l=o.replace(Mq,Lq);l.charAt(0)!=="-"&&(l="-"+l),n="data"+l}}a=Ew}return new a(i,n)}function Lq(e){return"-"+e.toLowerCase()}function Fq(e){return e.charAt(1).toUpperCase()}const $q=eE([nE,Pq,aE,sE,oE],"html"),Tw=eE([nE,Dq,aE,sE,oE],"svg");function zq(e){return e.join(" ").trim()}var oh={},y0,KC;function Bq(){if(KC)return y0;KC=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,f=/^\s+|\s+$/g,d=`
`,u="/",p="*",g="",b="comment",v="declaration";y0=function(k,E){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];E=E||{};var T=1,I=1;function D(ne){var ie=ne.match(n);ie&&(T+=ie.length);var oe=ne.lastIndexOf(d);I=~oe?ne.length-oe:I+ne.length}function U(){var ne={line:T,column:I};return function(ie){return ie.position=new O(ne),q(),ie}}function O(ne){this.start=ne,this.end={line:T,column:I},this.source=E.source}O.prototype.content=k;function $(ne){var ie=new Error(E.source+":"+T+":"+I+": "+ne);if(ie.reason=ne,ie.filename=E.source,ie.line=T,ie.column=I,ie.source=k,!E.silent)throw ie}function B(ne){var ie=ne.exec(k);if(ie){var oe=ie[0];return D(oe),k=k.slice(oe.length),ie}}function q(){B(t)}function H(ne){var ie;for(ne=ne||[];ie=F();)ie!==!1&&ne.push(ie);return ne}function F(){var ne=U();if(!(u!=k.charAt(0)||p!=k.charAt(1))){for(var ie=2;g!=k.charAt(ie)&&(p!=k.charAt(ie)||u!=k.charAt(ie+1));)++ie;if(ie+=2,g===k.charAt(ie-1))return $("End of comment missing");var oe=k.slice(2,ie-2);return I+=2,D(oe),k=k.slice(ie),I+=2,ne({type:b,comment:oe})}}function L(){var ne=U(),ie=B(i);if(ie){if(F(),!B(a))return $("property missing ':'");var oe=B(o),Y=ne({type:v,property:N(ie[0].replace(e,g)),value:oe?N(oe[0].replace(e,g)):g});return B(l),Y}}function Q(){var ne=[];H(ne);for(var ie;ie=L();)ie!==!1&&(ne.push(ie),H(ne));return ne}return q(),Q()};function N(k){return k?k.replace(f,g):g}return y0}var XC;function Uq(){if(XC)return oh;XC=1;var e=oh&&oh.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(oh,"__esModule",{value:!0}),oh.default=t;var n=e(Bq());function t(i,a){var o=null;if(!i||typeof i!="string")return o;var l=(0,n.default)(i),f=typeof a=="function";return l.forEach(function(d){if(d.type==="declaration"){var u=d.property,p=d.value;f?a(u,p,d):p&&(o=o||{},o[u]=p)}}),o}return oh}var _m={},ZC;function qq(){if(ZC)return _m;ZC=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,n=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,o=function(u){return!u||t.test(u)||e.test(u)},l=function(u,p){return p.toUpperCase()},f=function(u,p){return"".concat(p,"-")},d=function(u,p){return p===void 0&&(p={}),o(u)?u:(u=u.toLowerCase(),p.reactCompat?u=u.replace(a,f):u=u.replace(i,f),u.replace(n,l))};return _m.camelCase=d,_m}var km,ej;function Vq(){if(ej)return km;ej=1;var e=km&&km.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},n=e(Uq()),t=qq();function i(a,o){var l={};return!a||typeof a!="string"||(0,n.default)(a,function(f,d){f&&d&&(l[(0,t.camelCase)(f,o)]=d)}),l}return i.default=i,km=i,km}var Hq=Vq();const Gq=Pd(Hq),lE=cE("end"),Aw=cE("start");function cE(e){return n;function n(t){const i=t&&t.position&&t.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function Yq(e){const n=Aw(e),t=lE(e);if(n&&t)return{start:n,end:t}}function Lm(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?tj(e.position):"start"in e||"end"in e?tj(e):"line"in e||"column"in e?A1(e):""}function A1(e){return nj(e&&e.line)+":"+nj(e&&e.column)}function tj(e){return A1(e&&e.start)+"-"+A1(e&&e.end)}function nj(e){return e&&typeof e=="number"?e:1}let jr=class extends Error{constructor(n,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let a="",o={},l=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof n=="string"?a=n:!o.cause&&n&&(l=!0,a=n.message,o.cause=n),!o.ruleId&&!o.source&&typeof i=="string"){const d=i.indexOf(":");d===-1?o.ruleId=i:(o.source=i.slice(0,d),o.ruleId=i.slice(d+1))}if(!o.place&&o.ancestors&&o.ancestors){const d=o.ancestors[o.ancestors.length-1];d&&(o.place=d.position)}const f=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=f?f.column:void 0,this.fatal=void 0,this.file,this.message=a,this.line=f?f.line:void 0,this.name=Lm(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}};jr.prototype.file="";jr.prototype.name="";jr.prototype.reason="";jr.prototype.message="";jr.prototype.stack="";jr.prototype.column=void 0;jr.prototype.line=void 0;jr.prototype.ancestors=void 0;jr.prototype.cause=void 0;jr.prototype.fatal=void 0;jr.prototype.place=void 0;jr.prototype.ruleId=void 0;jr.prototype.source=void 0;const Pw={}.hasOwnProperty,Wq=new Map,Qq=/[A-Z]/g,Jq=new Set(["table","tbody","thead","tfoot","tr"]),Kq=new Set(["td","th"]),uE="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Xq(e,n){if(!n||n.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=n.filePath||void 0;let i;if(n.development){if(typeof n.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=s7(t,n.jsxDEV)}else{if(typeof n.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof n.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=a7(t,n.jsx,n.jsxs)}const a={Fragment:n.Fragment,ancestors:[],components:n.components||{},create:i,elementAttributeNameCase:n.elementAttributeNameCase||"react",evaluater:n.createEvaluater?n.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:n.ignoreInvalidStyle||!1,passKeys:n.passKeys!==!1,passNode:n.passNode||!1,schema:n.space==="svg"?Tw:$q,stylePropertyNameCase:n.stylePropertyNameCase||"dom",tableCellAlignToStyle:n.tableCellAlignToStyle!==!1},o=dE(a,e,void 0);return o&&typeof o!="string"?o:a.create(e,a.Fragment,{children:o||void 0},void 0)}function dE(e,n,t){if(n.type==="element")return Zq(e,n,t);if(n.type==="mdxFlowExpression"||n.type==="mdxTextExpression")return e7(e,n);if(n.type==="mdxJsxFlowElement"||n.type==="mdxJsxTextElement")return n7(e,n,t);if(n.type==="mdxjsEsm")return t7(e,n);if(n.type==="root")return i7(e,n,t);if(n.type==="text")return r7(e,n)}function Zq(e,n,t){const i=e.schema;let a=i;n.tagName.toLowerCase()==="svg"&&i.space==="html"&&(a=Tw,e.schema=a),e.ancestors.push(n);const o=hE(e,n.tagName,!1),l=o7(e,n);let f=Iw(e,n);return Jq.has(n.tagName)&&(f=f.filter(function(d){return typeof d=="string"?!Tq(d):!0})),fE(e,l,o,n),Dw(l,f),e.ancestors.pop(),e.schema=i,e.create(n,o,l,t)}function e7(e,n){if(n.data&&n.data.estree&&e.evaluater){const i=n.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}Km(e,n.position)}function t7(e,n){if(n.data&&n.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(n.data.estree);Km(e,n.position)}function n7(e,n,t){const i=e.schema;let a=i;n.name==="svg"&&i.space==="html"&&(a=Tw,e.schema=a),e.ancestors.push(n);const o=n.name===null?e.Fragment:hE(e,n.name,!0),l=l7(e,n),f=Iw(e,n);return fE(e,l,o,n),Dw(l,f),e.ancestors.pop(),e.schema=i,e.create(n,o,l,t)}function i7(e,n,t){const i={};return Dw(i,Iw(e,n)),e.create(n,e.Fragment,i,t)}function r7(e,n){return n.value}function fE(e,n,t,i){typeof t!="string"&&t!==e.Fragment&&e.passNode&&(n.node=i)}function Dw(e,n){if(n.length>0){const t=n.length>1?n:n[0];t&&(e.children=t)}}function a7(e,n,t){return i;function i(a,o,l,f){const u=Array.isArray(l.children)?t:n;return f?u(o,l,f):u(o,l)}}function s7(e,n){return t;function t(i,a,o,l){const f=Array.isArray(o.children),d=Aw(i);return n(a,o,l,f,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function o7(e,n){const t={};let i,a;for(a in n.properties)if(a!=="children"&&Pw.call(n.properties,a)){const o=c7(e,a,n.properties[a]);if(o){const[l,f]=o;e.tableCellAlignToStyle&&l==="align"&&typeof f=="string"&&Kq.has(n.tagName)?i=f:t[l]=f}}if(i){const o=t.style||(t.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function l7(e,n){const t={};for(const i of n.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const o=i.data.estree.body[0];o.type;const l=o.expression;l.type;const f=l.properties[0];f.type,Object.assign(t,e.evaluater.evaluateExpression(f.argument))}else Km(e,n.position);else{const a=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const f=i.value.data.estree.body[0];f.type,o=e.evaluater.evaluateExpression(f.expression)}else Km(e,n.position);else o=i.value===null?!0:i.value;t[a]=o}return t}function Iw(e,n){const t=[];let i=-1;const a=e.passKeys?new Map:Wq;for(;++i<n.children.length;){const o=n.children[i];let l;if(e.passKeys){const d=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(d){const u=a.get(d)||0;l=d+"-"+u,a.set(d,u+1)}}const f=dE(e,o,l);f!==void 0&&t.push(f)}return t}function c7(e,n,t){const i=Oq(e.schema,n);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?Cq(t):zq(t)),i.property==="style"){let a=typeof t=="object"?t:u7(e,String(t));return e.stylePropertyNameCase==="css"&&(a=d7(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&i.space?Iq[i.property]||i.property:i.attribute,t]}}function u7(e,n){try{return Gq(n,{reactCompat:!0})}catch(t){if(e.ignoreInvalidStyle)return{};const i=t,a=new jr("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=uE+"#cannot-parse-style-attribute",a}}function hE(e,n,t){let i;if(!t)i={type:"Literal",value:n};else if(n.includes(".")){const a=n.split(".");let o=-1,l;for(;++o<a.length;){const f=YC(a[o])?{type:"Identifier",name:a[o]}:{type:"Literal",value:a[o]};l=l?{type:"MemberExpression",object:l,property:f,computed:!!(o&&f.type==="Literal"),optional:!1}:f}i=l}else i=YC(n)&&!/^[a-z]/.test(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};if(i.type==="Literal"){const a=i.value;return Pw.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(i);Km(e)}function Km(e,n){const t=new jr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:n,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=e.filePath||void 0,t.url=uE+"#cannot-handle-mdx-estrees-without-createevaluater",t}function d7(e){const n={};let t;for(t in e)Pw.call(e,t)&&(n[f7(t)]=e[t]);return n}function f7(e){let n=e.replace(Qq,h7);return n.slice(0,3)==="ms-"&&(n="-"+n),n}function h7(e){return"-"+e.toLowerCase()}const x0={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},p7={};function Mw(e,n){const t=p7,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,a=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return pE(e,i,a)}function pE(e,n,t){if(m7(e)){if("value"in e)return e.type==="html"&&!t?"":e.value;if(n&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ij(e.children,n,t)}return Array.isArray(e)?ij(e,n,t):""}function ij(e,n,t){const i=[];let a=-1;for(;++a<e.length;)i[a]=pE(e[a],n,t);return i.join("")}function m7(e){return!!(e&&typeof e=="object")}const rj=document.createElement("i");function Rw(e){const n="&"+e+";";rj.innerHTML=n;const t=rj.textContent;return t.charCodeAt(t.length-1)===59&&e!=="semi"||t===n?!1:t}function Fa(e,n,t,i){const a=e.length;let o=0,l;if(n<0?n=-n>a?0:a+n:n=n>a?a:n,t=t>0?t:0,i.length<1e4)l=Array.from(i),l.unshift(n,t),e.splice(...l);else for(t&&e.splice(n,t);o<i.length;)l=i.slice(o,o+1e4),l.unshift(n,0),e.splice(...l),o+=1e4,n+=1e4}function is(e,n){return e.length>0?(Fa(e,e.length,0,n),e):n}const aj={}.hasOwnProperty;function mE(e){const n={};let t=-1;for(;++t<e.length;)g7(n,e[t]);return n}function g7(e,n){let t;for(t in n){const a=(aj.call(e,t)?e[t]:void 0)||(e[t]={}),o=n[t];let l;if(o)for(l in o){aj.call(a,l)||(a[l]=[]);const f=o[l];y7(a[l],Array.isArray(f)?f:f?[f]:[])}}}function y7(e,n){let t=-1;const i=[];for(;++t<n.length;)(n[t].add==="after"?e:i).push(n[t]);Fa(e,0,0,i)}function gE(e,n){const t=Number.parseInt(e,n);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function Fs(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ur=Wc(/[A-Za-z]/),Nr=Wc(/[\dA-Za-z]/),x7=Wc(/[#-'*+\--9=?A-Z^-~]/);function db(e){return e!==null&&(e<32||e===127)}const P1=Wc(/\d/),b7=Wc(/[\dA-Fa-f]/),v7=Wc(/[!-/:-@[-`{-~]/);function At(e){return e!==null&&e<-2}function qn(e){return e!==null&&(e<0||e===32)}function an(e){return e===-2||e===-1||e===32}const Bb=Wc(new RegExp("\\p{P}|\\p{S}","u")),Td=Wc(/\s/);function Wc(e){return n;function n(t){return t!==null&&t>-1&&e.test(String.fromCharCode(t))}}function Lh(e){const n=[];let t=-1,i=0,a=0;for(;++t<e.length;){const o=e.charCodeAt(t);let l="";if(o===37&&Nr(e.charCodeAt(t+1))&&Nr(e.charCodeAt(t+2)))a=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const f=e.charCodeAt(t+1);o<56320&&f>56319&&f<57344?(l=String.fromCharCode(o,f),a=1):l=""}else l=String.fromCharCode(o);l&&(n.push(e.slice(i,t),encodeURIComponent(l)),i=t+a+1,l=""),a&&(t+=a,a=0)}return n.join("")+e.slice(i)}function fn(e,n,t,i){const a=i?i-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(d){return an(d)?(e.enter(t),f(d)):n(d)}function f(d){return an(d)&&o++<a?(e.consume(d),f):(e.exit(t),n(d))}}const w7={tokenize:S7};function S7(e){const n=e.attempt(this.parser.constructs.contentInitial,i,a);let t;return n;function i(f){if(f===null){e.consume(f);return}return e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),fn(e,n,"linePrefix")}function a(f){return e.enter("paragraph"),o(f)}function o(f){const d=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=d),t=d,l(f)}function l(f){if(f===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(f);return}return At(f)?(e.consume(f),e.exit("chunkText"),o):(e.consume(f),l)}}const N7={tokenize:C7},sj={tokenize:j7};function C7(e){const n=this,t=[];let i=0,a,o,l;return f;function f(D){if(i<t.length){const U=t[i];return n.containerState=U[1],e.attempt(U[0].continuation,d,u)(D)}return u(D)}function d(D){if(i++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,a&&I();const U=n.events.length;let O=U,$;for(;O--;)if(n.events[O][0]==="exit"&&n.events[O][1].type==="chunkFlow"){$=n.events[O][1].end;break}T(i);let B=U;for(;B<n.events.length;)n.events[B][1].end={...$},B++;return Fa(n.events,O+1,0,n.events.slice(U)),n.events.length=B,u(D)}return f(D)}function u(D){if(i===t.length){if(!a)return b(D);if(a.currentConstruct&&a.currentConstruct.concrete)return N(D);n.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(sj,p,g)(D)}function p(D){return a&&I(),T(i),b(D)}function g(D){return n.parser.lazy[n.now().line]=i!==t.length,l=n.now().offset,N(D)}function b(D){return n.containerState={},e.attempt(sj,v,N)(D)}function v(D){return i++,t.push([n.currentConstruct,n.containerState]),b(D)}function N(D){if(D===null){a&&I(),T(0),e.consume(D);return}return a=a||n.parser.flow(n.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:o}),k(D)}function k(D){if(D===null){E(e.exit("chunkFlow"),!0),T(0),e.consume(D);return}return At(D)?(e.consume(D),E(e.exit("chunkFlow")),i=0,n.interrupt=void 0,f):(e.consume(D),k)}function E(D,U){const O=n.sliceStream(D);if(U&&O.push(null),D.previous=o,o&&(o.next=D),o=D,a.defineSkip(D.start),a.write(O),n.parser.lazy[D.start.line]){let $=a.events.length;for(;$--;)if(a.events[$][1].start.offset<l&&(!a.events[$][1].end||a.events[$][1].end.offset>l))return;const B=n.events.length;let q=B,H,F;for(;q--;)if(n.events[q][0]==="exit"&&n.events[q][1].type==="chunkFlow"){if(H){F=n.events[q][1].end;break}H=!0}for(T(i),$=B;$<n.events.length;)n.events[$][1].end={...F},$++;Fa(n.events,q+1,0,n.events.slice(B)),n.events.length=$}}function T(D){let U=t.length;for(;U-- >D;){const O=t[U];n.containerState=O[1],O[0].exit.call(n,e)}t.length=D}function I(){a.write([null]),o=void 0,a=void 0,n.containerState._closeFlow=void 0}}function j7(e,n,t){return fn(e,e.attempt(this.parser.constructs.document,n,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function kh(e){if(e===null||qn(e)||Td(e))return 1;if(Bb(e))return 2}function Ub(e,n,t){const i=[];let a=-1;for(;++a<e.length;){const o=e[a].resolveAll;o&&!i.includes(o)&&(n=o(n,t),i.push(o))}return n}const D1={name:"attention",resolveAll:_7,tokenize:k7};function _7(e,n){let t=-1,i,a,o,l,f,d,u,p;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(i=t;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&n.sliceSerialize(e[i][1]).charCodeAt(0)===n.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[i][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;d=e[i][1].end.offset-e[i][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;const g={...e[i][1].end},b={...e[t][1].start};oj(g,-d),oj(b,d),l={type:d>1?"strongSequence":"emphasisSequence",start:g,end:{...e[i][1].end}},f={type:d>1?"strongSequence":"emphasisSequence",start:{...e[t][1].start},end:b},o={type:d>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[t][1].start}},a={type:d>1?"strong":"emphasis",start:{...l.start},end:{...f.end}},e[i][1].end={...l.start},e[t][1].start={...f.end},u=[],e[i][1].end.offset-e[i][1].start.offset&&(u=is(u,[["enter",e[i][1],n],["exit",e[i][1],n]])),u=is(u,[["enter",a,n],["enter",l,n],["exit",l,n],["enter",o,n]]),u=is(u,Ub(n.parser.constructs.insideSpan.null,e.slice(i+1,t),n)),u=is(u,[["exit",o,n],["enter",f,n],["exit",f,n],["exit",a,n]]),e[t][1].end.offset-e[t][1].start.offset?(p=2,u=is(u,[["enter",e[t][1],n],["exit",e[t][1],n]])):p=0,Fa(e,i-1,t-i+3,u),t=i+u.length-p-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function k7(e,n){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,a=kh(i);let o;return l;function l(d){return o=d,e.enter("attentionSequence"),f(d)}function f(d){if(d===o)return e.consume(d),f;const u=e.exit("attentionSequence"),p=kh(d),g=!p||p===2&&a||t.includes(d),b=!a||a===2&&p||t.includes(i);return u._open=!!(o===42?g:g&&(a||!b)),u._close=!!(o===42?b:b&&(p||!g)),n(d)}}function oj(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const E7={name:"autolink",tokenize:T7};function T7(e,n,t){let i=0;return a;function a(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(v){return Ur(v)?(e.consume(v),l):v===64?t(v):u(v)}function l(v){return v===43||v===45||v===46||Nr(v)?(i=1,f(v)):u(v)}function f(v){return v===58?(e.consume(v),i=0,d):(v===43||v===45||v===46||Nr(v))&&i++<32?(e.consume(v),f):(i=0,u(v))}function d(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),n):v===null||v===32||v===60||db(v)?t(v):(e.consume(v),d)}function u(v){return v===64?(e.consume(v),p):x7(v)?(e.consume(v),u):t(v)}function p(v){return Nr(v)?g(v):t(v)}function g(v){return v===46?(e.consume(v),i=0,p):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),n):b(v)}function b(v){if((v===45||Nr(v))&&i++<63){const N=v===45?b:g;return e.consume(v),N}return t(v)}}const lg={partial:!0,tokenize:A7};function A7(e,n,t){return i;function i(o){return an(o)?fn(e,a,"linePrefix")(o):a(o)}function a(o){return o===null||At(o)?n(o):t(o)}}const yE={continuation:{tokenize:D7},exit:I7,name:"blockQuote",tokenize:P7};function P7(e,n,t){const i=this;return a;function a(l){if(l===62){const f=i.containerState;return f.open||(e.enter("blockQuote",{_container:!0}),f.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),o}return t(l)}function o(l){return an(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),n):(e.exit("blockQuotePrefix"),n(l))}}function D7(e,n,t){const i=this;return a;function a(l){return an(l)?fn(e,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return e.attempt(yE,n,t)(l)}}function I7(e){e.exit("blockQuote")}const xE={name:"characterEscape",tokenize:M7};function M7(e,n,t){return i;function i(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),a}function a(o){return v7(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),n):t(o)}}const bE={name:"characterReference",tokenize:R7};function R7(e,n,t){const i=this;let a=0,o,l;return f;function f(g){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),d}function d(g){return g===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(g),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),o=31,l=Nr,p(g))}function u(g){return g===88||g===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(g),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,l=b7,p):(e.enter("characterReferenceValue"),o=7,l=P1,p(g))}function p(g){if(g===59&&a){const b=e.exit("characterReferenceValue");return l===Nr&&!Rw(i.sliceSerialize(b))?t(g):(e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),e.exit("characterReference"),n)}return l(g)&&a++<o?(e.consume(g),p):t(g)}}const lj={partial:!0,tokenize:L7},cj={concrete:!0,name:"codeFenced",tokenize:O7};function O7(e,n,t){const i=this,a={partial:!0,tokenize:O};let o=0,l=0,f;return d;function d($){return u($)}function u($){const B=i.events[i.events.length-1];return o=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,f=$,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),p($)}function p($){return $===f?(l++,e.consume($),p):l<3?t($):(e.exit("codeFencedFenceSequence"),an($)?fn(e,g,"whitespace")($):g($))}function g($){return $===null||At($)?(e.exit("codeFencedFence"),i.interrupt?n($):e.check(lj,k,U)($)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),b($))}function b($){return $===null||At($)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),g($)):an($)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),fn(e,v,"whitespace")($)):$===96&&$===f?t($):(e.consume($),b)}function v($){return $===null||At($)?g($):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),N($))}function N($){return $===null||At($)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g($)):$===96&&$===f?t($):(e.consume($),N)}function k($){return e.attempt(a,U,E)($)}function E($){return e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),T}function T($){return o>0&&an($)?fn(e,I,"linePrefix",o+1)($):I($)}function I($){return $===null||At($)?e.check(lj,k,U)($):(e.enter("codeFlowValue"),D($))}function D($){return $===null||At($)?(e.exit("codeFlowValue"),I($)):(e.consume($),D)}function U($){return e.exit("codeFenced"),n($)}function O($,B,q){let H=0;return F;function F(oe){return $.enter("lineEnding"),$.consume(oe),$.exit("lineEnding"),L}function L(oe){return $.enter("codeFencedFence"),an(oe)?fn($,Q,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(oe):Q(oe)}function Q(oe){return oe===f?($.enter("codeFencedFenceSequence"),ne(oe)):q(oe)}function ne(oe){return oe===f?(H++,$.consume(oe),ne):H>=l?($.exit("codeFencedFenceSequence"),an(oe)?fn($,ie,"whitespace")(oe):ie(oe)):q(oe)}function ie(oe){return oe===null||At(oe)?($.exit("codeFencedFence"),B(oe)):q(oe)}}}function L7(e,n,t){const i=this;return a;function a(l){return l===null?t(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o)}function o(l){return i.parser.lazy[i.now().line]?t(l):n(l)}}const b0={name:"codeIndented",tokenize:$7},F7={partial:!0,tokenize:z7};function $7(e,n,t){const i=this;return a;function a(u){return e.enter("codeIndented"),fn(e,o,"linePrefix",5)(u)}function o(u){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(u):t(u)}function l(u){return u===null?d(u):At(u)?e.attempt(F7,l,d)(u):(e.enter("codeFlowValue"),f(u))}function f(u){return u===null||At(u)?(e.exit("codeFlowValue"),l(u)):(e.consume(u),f)}function d(u){return e.exit("codeIndented"),n(u)}}function z7(e,n,t){const i=this;return a;function a(l){return i.parser.lazy[i.now().line]?t(l):At(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a):fn(e,o,"linePrefix",5)(l)}function o(l){const f=i.events[i.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?n(l):At(l)?a(l):t(l)}}const B7={name:"codeText",previous:q7,resolve:U7,tokenize:V7};function U7(e){let n=e.length-4,t=3,i,a;if((e[t][1].type==="lineEnding"||e[t][1].type==="space")&&(e[n][1].type==="lineEnding"||e[n][1].type==="space")){for(i=t;++i<n;)if(e[i][1].type==="codeTextData"){e[t][1].type="codeTextPadding",e[n][1].type="codeTextPadding",t+=2,n-=2;break}}for(i=t-1,n++;++i<=n;)a===void 0?i!==n&&e[i][1].type!=="lineEnding"&&(a=i):(i===n||e[i][1].type==="lineEnding")&&(e[a][1].type="codeTextData",i!==a+2&&(e[a][1].end=e[i-1][1].end,e.splice(a+2,i-a-2),n-=i-a-2,i=a+2),a=void 0);return e}function q7(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function V7(e,n,t){let i=0,a,o;return l;function l(g){return e.enter("codeText"),e.enter("codeTextSequence"),f(g)}function f(g){return g===96?(e.consume(g),i++,f):(e.exit("codeTextSequence"),d(g))}function d(g){return g===null?t(g):g===32?(e.enter("space"),e.consume(g),e.exit("space"),d):g===96?(o=e.enter("codeTextSequence"),a=0,p(g)):At(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),d):(e.enter("codeTextData"),u(g))}function u(g){return g===null||g===32||g===96||At(g)?(e.exit("codeTextData"),d(g)):(e.consume(g),u)}function p(g){return g===96?(e.consume(g),a++,p):a===i?(e.exit("codeTextSequence"),e.exit("codeText"),n(g)):(o.type="codeTextData",u(g))}}let H7=class{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(n,i):n>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(n,t,i){const a=t||0;this.setCursor(Math.trunc(n));const o=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return i&&Em(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),Em(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),Em(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const t=this.left.splice(n,Number.POSITIVE_INFINITY);Em(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);Em(this.left,t.reverse())}}};function Em(e,n){let t=0;if(n.length<1e4)e.push(...n);else for(;t<n.length;)e.push(...n.slice(t,t+1e4)),t+=1e4}function vE(e){const n={};let t=-1,i,a,o,l,f,d,u;const p=new H7(e);for(;++t<p.length;){for(;t in n;)t=n[t];if(i=p.get(t),t&&i[1].type==="chunkFlow"&&p.get(t-1)[1].type==="listItemPrefix"&&(d=i[1]._tokenizer.events,o=0,o<d.length&&d[o][1].type==="lineEndingBlank"&&(o+=2),o<d.length&&d[o][1].type==="content"))for(;++o<d.length&&d[o][1].type!=="content";)d[o][1].type==="chunkText"&&(d[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(n,G7(p,t)),t=n[t],u=!0);else if(i[1]._container){for(o=t,a=void 0;o--;)if(l=p.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(i[1].end={...p.get(a)[1].start},f=p.slice(a,t),f.unshift(i),p.splice(a,t-a+1,f))}}return Fa(e,0,Number.POSITIVE_INFINITY,p.slice(0)),!u}function G7(e,n){const t=e.get(n)[1],i=e.get(n)[2];let a=n-1;const o=[];let l=t._tokenizer;l||(l=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const f=l.events,d=[],u={};let p,g,b=-1,v=t,N=0,k=0;const E=[k];for(;v;){for(;e.get(++a)[1]!==v;);o.push(a),v._tokenizer||(p=i.sliceStream(v),v.next||p.push(null),g&&l.defineSkip(v.start),v._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),v._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),g=v,v=v.next}for(v=t;++b<f.length;)f[b][0]==="exit"&&f[b-1][0]==="enter"&&f[b][1].type===f[b-1][1].type&&f[b][1].start.line!==f[b][1].end.line&&(k=b+1,E.push(k),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(l.events=[],v?(v._tokenizer=void 0,v.previous=void 0):E.pop(),b=E.length;b--;){const T=f.slice(E[b],E[b+1]),I=o.pop();d.push([I,I+T.length-1]),e.splice(I,2,T)}for(d.reverse(),b=-1;++b<d.length;)u[N+d[b][0]]=N+d[b][1],N+=d[b][1]-d[b][0]-1;return u}const Y7={resolve:Q7,tokenize:J7},W7={partial:!0,tokenize:K7};function Q7(e){return vE(e),e}function J7(e,n){let t;return i;function i(f){return e.enter("content"),t=e.enter("chunkContent",{contentType:"content"}),a(f)}function a(f){return f===null?o(f):At(f)?e.check(W7,l,o)(f):(e.consume(f),a)}function o(f){return e.exit("chunkContent"),e.exit("content"),n(f)}function l(f){return e.consume(f),e.exit("chunkContent"),t.next=e.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,a}}function K7(e,n,t){const i=this;return a;function a(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),fn(e,o,"linePrefix")}function o(l){if(l===null||At(l))return t(l);const f=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?n(l):e.interrupt(i.parser.constructs.flow,t,n)(l)}}function wE(e,n,t,i,a,o,l,f,d){const u=d||Number.POSITIVE_INFINITY;let p=0;return g;function g(T){return T===60?(e.enter(i),e.enter(a),e.enter(o),e.consume(T),e.exit(o),b):T===null||T===32||T===41||db(T)?t(T):(e.enter(i),e.enter(l),e.enter(f),e.enter("chunkString",{contentType:"string"}),k(T))}function b(T){return T===62?(e.enter(o),e.consume(T),e.exit(o),e.exit(a),e.exit(i),n):(e.enter(f),e.enter("chunkString",{contentType:"string"}),v(T))}function v(T){return T===62?(e.exit("chunkString"),e.exit(f),b(T)):T===null||T===60||At(T)?t(T):(e.consume(T),T===92?N:v)}function N(T){return T===60||T===62||T===92?(e.consume(T),v):v(T)}function k(T){return!p&&(T===null||T===41||qn(T))?(e.exit("chunkString"),e.exit(f),e.exit(l),e.exit(i),n(T)):p<u&&T===40?(e.consume(T),p++,k):T===41?(e.consume(T),p--,k):T===null||T===32||T===40||db(T)?t(T):(e.consume(T),T===92?E:k)}function E(T){return T===40||T===41||T===92?(e.consume(T),k):k(T)}}function SE(e,n,t,i,a,o){const l=this;let f=0,d;return u;function u(v){return e.enter(i),e.enter(a),e.consume(v),e.exit(a),e.enter(o),p}function p(v){return f>999||v===null||v===91||v===93&&!d||v===94&&!f&&"_hiddenFootnoteSupport"in l.parser.constructs?t(v):v===93?(e.exit(o),e.enter(a),e.consume(v),e.exit(a),e.exit(i),n):At(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),p):(e.enter("chunkString",{contentType:"string"}),g(v))}function g(v){return v===null||v===91||v===93||At(v)||f++>999?(e.exit("chunkString"),p(v)):(e.consume(v),d||(d=!an(v)),v===92?b:g)}function b(v){return v===91||v===92||v===93?(e.consume(v),f++,g):g(v)}}function NE(e,n,t,i,a,o){let l;return f;function f(b){return b===34||b===39||b===40?(e.enter(i),e.enter(a),e.consume(b),e.exit(a),l=b===40?41:b,d):t(b)}function d(b){return b===l?(e.enter(a),e.consume(b),e.exit(a),e.exit(i),n):(e.enter(o),u(b))}function u(b){return b===l?(e.exit(o),d(l)):b===null?t(b):At(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),fn(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===l||b===null||At(b)?(e.exit("chunkString"),u(b)):(e.consume(b),b===92?g:p)}function g(b){return b===l||b===92?(e.consume(b),p):p(b)}}function Fm(e,n){let t;return i;function i(a){return At(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t=!0,i):an(a)?fn(e,i,t?"linePrefix":"lineSuffix")(a):n(a)}}const X7={name:"definition",tokenize:eV},Z7={partial:!0,tokenize:tV};function eV(e,n,t){const i=this;let a;return o;function o(v){return e.enter("definition"),l(v)}function l(v){return SE.call(i,e,f,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function f(v){return a=Fs(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),d):t(v)}function d(v){return qn(v)?Fm(e,u)(v):u(v)}function u(v){return wE(e,p,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function p(v){return e.attempt(Z7,g,g)(v)}function g(v){return an(v)?fn(e,b,"whitespace")(v):b(v)}function b(v){return v===null||At(v)?(e.exit("definition"),i.parser.defined.push(a),n(v)):t(v)}}function tV(e,n,t){return i;function i(f){return qn(f)?Fm(e,a)(f):t(f)}function a(f){return NE(e,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(f)}function o(f){return an(f)?fn(e,l,"whitespace")(f):l(f)}function l(f){return f===null||At(f)?n(f):t(f)}}const nV={name:"hardBreakEscape",tokenize:iV};function iV(e,n,t){return i;function i(o){return e.enter("hardBreakEscape"),e.consume(o),a}function a(o){return At(o)?(e.exit("hardBreakEscape"),n(o)):t(o)}}const rV={name:"headingAtx",resolve:aV,tokenize:sV};function aV(e,n){let t=e.length-2,i=3,a,o;return e[i][1].type==="whitespace"&&(i+=2),t-2>i&&e[t][1].type==="whitespace"&&(t-=2),e[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&e[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(a={type:"atxHeadingText",start:e[i][1].start,end:e[t][1].end},o={type:"chunkText",start:e[i][1].start,end:e[t][1].end,contentType:"text"},Fa(e,i,t-i+1,[["enter",a,n],["enter",o,n],["exit",o,n],["exit",a,n]])),e}function sV(e,n,t){let i=0;return a;function a(p){return e.enter("atxHeading"),o(p)}function o(p){return e.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&i++<6?(e.consume(p),l):p===null||qn(p)?(e.exit("atxHeadingSequence"),f(p)):t(p)}function f(p){return p===35?(e.enter("atxHeadingSequence"),d(p)):p===null||At(p)?(e.exit("atxHeading"),n(p)):an(p)?fn(e,f,"whitespace")(p):(e.enter("atxHeadingText"),u(p))}function d(p){return p===35?(e.consume(p),d):(e.exit("atxHeadingSequence"),f(p))}function u(p){return p===null||p===35||qn(p)?(e.exit("atxHeadingText"),f(p)):(e.consume(p),u)}}const oV=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],uj=["pre","script","style","textarea"],lV={concrete:!0,name:"htmlFlow",resolveTo:dV,tokenize:fV},cV={partial:!0,tokenize:pV},uV={partial:!0,tokenize:hV};function dV(e){let n=e.length;for(;n--&&!(e[n][0]==="enter"&&e[n][1].type==="htmlFlow"););return n>1&&e[n-2][1].type==="linePrefix"&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function fV(e,n,t){const i=this;let a,o,l,f,d;return u;function u(M){return p(M)}function p(M){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(M),g}function g(M){return M===33?(e.consume(M),b):M===47?(e.consume(M),o=!0,k):M===63?(e.consume(M),a=3,i.interrupt?n:P):Ur(M)?(e.consume(M),l=String.fromCharCode(M),E):t(M)}function b(M){return M===45?(e.consume(M),a=2,v):M===91?(e.consume(M),a=5,f=0,N):Ur(M)?(e.consume(M),a=4,i.interrupt?n:P):t(M)}function v(M){return M===45?(e.consume(M),i.interrupt?n:P):t(M)}function N(M){const fe="CDATA[";return M===fe.charCodeAt(f++)?(e.consume(M),f===fe.length?i.interrupt?n:Q:N):t(M)}function k(M){return Ur(M)?(e.consume(M),l=String.fromCharCode(M),E):t(M)}function E(M){if(M===null||M===47||M===62||qn(M)){const fe=M===47,we=l.toLowerCase();return!fe&&!o&&uj.includes(we)?(a=1,i.interrupt?n(M):Q(M)):oV.includes(l.toLowerCase())?(a=6,fe?(e.consume(M),T):i.interrupt?n(M):Q(M)):(a=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(M):o?I(M):D(M))}return M===45||Nr(M)?(e.consume(M),l+=String.fromCharCode(M),E):t(M)}function T(M){return M===62?(e.consume(M),i.interrupt?n:Q):t(M)}function I(M){return an(M)?(e.consume(M),I):F(M)}function D(M){return M===47?(e.consume(M),F):M===58||M===95||Ur(M)?(e.consume(M),U):an(M)?(e.consume(M),D):F(M)}function U(M){return M===45||M===46||M===58||M===95||Nr(M)?(e.consume(M),U):O(M)}function O(M){return M===61?(e.consume(M),$):an(M)?(e.consume(M),O):D(M)}function $(M){return M===null||M===60||M===61||M===62||M===96?t(M):M===34||M===39?(e.consume(M),d=M,B):an(M)?(e.consume(M),$):q(M)}function B(M){return M===d?(e.consume(M),d=null,H):M===null||At(M)?t(M):(e.consume(M),B)}function q(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||qn(M)?O(M):(e.consume(M),q)}function H(M){return M===47||M===62||an(M)?D(M):t(M)}function F(M){return M===62?(e.consume(M),L):t(M)}function L(M){return M===null||At(M)?Q(M):an(M)?(e.consume(M),L):t(M)}function Q(M){return M===45&&a===2?(e.consume(M),Y):M===60&&a===1?(e.consume(M),z):M===62&&a===4?(e.consume(M),te):M===63&&a===3?(e.consume(M),P):M===93&&a===5?(e.consume(M),X):At(M)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(cV,se,ne)(M)):M===null||At(M)?(e.exit("htmlFlowData"),ne(M)):(e.consume(M),Q)}function ne(M){return e.check(uV,ie,se)(M)}function ie(M){return e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),oe}function oe(M){return M===null||At(M)?ne(M):(e.enter("htmlFlowData"),Q(M))}function Y(M){return M===45?(e.consume(M),P):Q(M)}function z(M){return M===47?(e.consume(M),l="",re):Q(M)}function re(M){if(M===62){const fe=l.toLowerCase();return uj.includes(fe)?(e.consume(M),te):Q(M)}return Ur(M)&&l.length<8?(e.consume(M),l+=String.fromCharCode(M),re):Q(M)}function X(M){return M===93?(e.consume(M),P):Q(M)}function P(M){return M===62?(e.consume(M),te):M===45&&a===2?(e.consume(M),P):Q(M)}function te(M){return M===null||At(M)?(e.exit("htmlFlowData"),se(M)):(e.consume(M),te)}function se(M){return e.exit("htmlFlow"),n(M)}}function hV(e,n,t){const i=this;return a;function a(l){return At(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):t(l)}function o(l){return i.parser.lazy[i.now().line]?t(l):n(l)}}function pV(e,n,t){return i;function i(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(lg,n,t)}}const mV={name:"htmlText",tokenize:gV};function gV(e,n,t){const i=this;let a,o,l;return f;function f(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),d}function d(P){return P===33?(e.consume(P),u):P===47?(e.consume(P),O):P===63?(e.consume(P),D):Ur(P)?(e.consume(P),q):t(P)}function u(P){return P===45?(e.consume(P),p):P===91?(e.consume(P),o=0,N):Ur(P)?(e.consume(P),I):t(P)}function p(P){return P===45?(e.consume(P),v):t(P)}function g(P){return P===null?t(P):P===45?(e.consume(P),b):At(P)?(l=g,z(P)):(e.consume(P),g)}function b(P){return P===45?(e.consume(P),v):g(P)}function v(P){return P===62?Y(P):P===45?b(P):g(P)}function N(P){const te="CDATA[";return P===te.charCodeAt(o++)?(e.consume(P),o===te.length?k:N):t(P)}function k(P){return P===null?t(P):P===93?(e.consume(P),E):At(P)?(l=k,z(P)):(e.consume(P),k)}function E(P){return P===93?(e.consume(P),T):k(P)}function T(P){return P===62?Y(P):P===93?(e.consume(P),T):k(P)}function I(P){return P===null||P===62?Y(P):At(P)?(l=I,z(P)):(e.consume(P),I)}function D(P){return P===null?t(P):P===63?(e.consume(P),U):At(P)?(l=D,z(P)):(e.consume(P),D)}function U(P){return P===62?Y(P):D(P)}function O(P){return Ur(P)?(e.consume(P),$):t(P)}function $(P){return P===45||Nr(P)?(e.consume(P),$):B(P)}function B(P){return At(P)?(l=B,z(P)):an(P)?(e.consume(P),B):Y(P)}function q(P){return P===45||Nr(P)?(e.consume(P),q):P===47||P===62||qn(P)?H(P):t(P)}function H(P){return P===47?(e.consume(P),Y):P===58||P===95||Ur(P)?(e.consume(P),F):At(P)?(l=H,z(P)):an(P)?(e.consume(P),H):Y(P)}function F(P){return P===45||P===46||P===58||P===95||Nr(P)?(e.consume(P),F):L(P)}function L(P){return P===61?(e.consume(P),Q):At(P)?(l=L,z(P)):an(P)?(e.consume(P),L):H(P)}function Q(P){return P===null||P===60||P===61||P===62||P===96?t(P):P===34||P===39?(e.consume(P),a=P,ne):At(P)?(l=Q,z(P)):an(P)?(e.consume(P),Q):(e.consume(P),ie)}function ne(P){return P===a?(e.consume(P),a=void 0,oe):P===null?t(P):At(P)?(l=ne,z(P)):(e.consume(P),ne)}function ie(P){return P===null||P===34||P===39||P===60||P===61||P===96?t(P):P===47||P===62||qn(P)?H(P):(e.consume(P),ie)}function oe(P){return P===47||P===62||qn(P)?H(P):t(P)}function Y(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),n):t(P)}function z(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),re}function re(P){return an(P)?fn(e,X,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):X(P)}function X(P){return e.enter("htmlTextData"),l(P)}}const Ow={name:"labelEnd",resolveAll:vV,resolveTo:wV,tokenize:SV},yV={tokenize:NV},xV={tokenize:CV},bV={tokenize:jV};function vV(e){let n=-1;const t=[];for(;++n<e.length;){const i=e[n][1];if(t.push(e[n]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const a=i.type==="labelImage"?4:2;i.type="data",n+=a}}return e.length!==t.length&&Fa(e,0,e.length,t),e}function wV(e,n){let t=e.length,i=0,a,o,l,f;for(;t--;)if(a=e[t][1],o){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[t][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(e[t][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(o=t,a.type!=="labelLink")){i=2;break}}else a.type==="labelEnd"&&(l=t);const d={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[o][1].start},end:{...e[l][1].end}},p={type:"labelText",start:{...e[o+i+2][1].end},end:{...e[l-2][1].start}};return f=[["enter",d,n],["enter",u,n]],f=is(f,e.slice(o+1,o+i+3)),f=is(f,[["enter",p,n]]),f=is(f,Ub(n.parser.constructs.insideSpan.null,e.slice(o+i+4,l-3),n)),f=is(f,[["exit",p,n],e[l-2],e[l-1],["exit",u,n]]),f=is(f,e.slice(l+1)),f=is(f,[["exit",d,n]]),Fa(e,o,e.length,f),e}function SV(e,n,t){const i=this;let a=i.events.length,o,l;for(;a--;)if((i.events[a][1].type==="labelImage"||i.events[a][1].type==="labelLink")&&!i.events[a][1]._balanced){o=i.events[a][1];break}return f;function f(b){return o?o._inactive?g(b):(l=i.parser.defined.includes(Fs(i.sliceSerialize({start:o.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(b),e.exit("labelMarker"),e.exit("labelEnd"),d):t(b)}function d(b){return b===40?e.attempt(yV,p,l?p:g)(b):b===91?e.attempt(xV,p,l?u:g)(b):l?p(b):g(b)}function u(b){return e.attempt(bV,p,g)(b)}function p(b){return n(b)}function g(b){return o._balanced=!0,t(b)}}function NV(e,n,t){return i;function i(g){return e.enter("resource"),e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),a}function a(g){return qn(g)?Fm(e,o)(g):o(g)}function o(g){return g===41?p(g):wE(e,l,f,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function l(g){return qn(g)?Fm(e,d)(g):p(g)}function f(g){return t(g)}function d(g){return g===34||g===39||g===40?NE(e,u,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function u(g){return qn(g)?Fm(e,p)(g):p(g)}function p(g){return g===41?(e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),e.exit("resource"),n):t(g)}}function CV(e,n,t){const i=this;return a;function a(f){return SE.call(i,e,o,l,"reference","referenceMarker","referenceString")(f)}function o(f){return i.parser.defined.includes(Fs(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?n(f):t(f)}function l(f){return t(f)}}function jV(e,n,t){return i;function i(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),a}function a(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),n):t(o)}}const _V={name:"labelStartImage",resolveAll:Ow.resolveAll,tokenize:kV};function kV(e,n,t){const i=this;return a;function a(f){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(f),e.exit("labelImageMarker"),o}function o(f){return f===91?(e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelImage"),l):t(f)}function l(f){return f===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(f):n(f)}}const EV={name:"labelStartLink",resolveAll:Ow.resolveAll,tokenize:TV};function TV(e,n,t){const i=this;return a;function a(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(l):n(l)}}const v0={name:"lineEnding",tokenize:AV};function AV(e,n){return t;function t(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),fn(e,n,"linePrefix")}}const Ux={name:"thematicBreak",tokenize:PV};function PV(e,n,t){let i=0,a;return o;function o(u){return e.enter("thematicBreak"),l(u)}function l(u){return a=u,f(u)}function f(u){return u===a?(e.enter("thematicBreakSequence"),d(u)):i>=3&&(u===null||At(u))?(e.exit("thematicBreak"),n(u)):t(u)}function d(u){return u===a?(e.consume(u),i++,d):(e.exit("thematicBreakSequence"),an(u)?fn(e,f,"whitespace")(u):f(u))}}const sa={continuation:{tokenize:RV},exit:LV,name:"list",tokenize:MV},DV={partial:!0,tokenize:FV},IV={partial:!0,tokenize:OV};function MV(e,n,t){const i=this,a=i.events[i.events.length-1];let o=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return f;function f(v){const N=i.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(N==="listUnordered"?!i.containerState.marker||v===i.containerState.marker:P1(v)){if(i.containerState.type||(i.containerState.type=N,e.enter(N,{_container:!0})),N==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(Ux,t,u)(v):u(v);if(!i.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(v)}return t(v)}function d(v){return P1(v)&&++l<10?(e.consume(v),d):(!i.interrupt||l<2)&&(i.containerState.marker?v===i.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),u(v)):t(v)}function u(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||v,e.check(lg,i.interrupt?t:p,e.attempt(DV,b,g))}function p(v){return i.containerState.initialBlankLine=!0,o++,b(v)}function g(v){return an(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),b):t(v)}function b(v){return i.containerState.size=o+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,n(v)}}function RV(e,n,t){const i=this;return i.containerState._closeFlow=void 0,e.check(lg,a,o);function a(f){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,fn(e,n,"listItemIndent",i.containerState.size+1)(f)}function o(f){return i.containerState.furtherBlankLines||!an(f)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,l(f)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(IV,n,l)(f))}function l(f){return i.containerState._closeFlow=!0,i.interrupt=void 0,fn(e,e.attempt(sa,n,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f)}}function OV(e,n,t){const i=this;return fn(e,a,"listItemIndent",i.containerState.size+1);function a(o){const l=i.events[i.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===i.containerState.size?n(o):t(o)}}function LV(e){e.exit(this.containerState.type)}function FV(e,n,t){const i=this;return fn(e,a,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(o){const l=i.events[i.events.length-1];return!an(o)&&l&&l[1].type==="listItemPrefixWhitespace"?n(o):t(o)}}const dj={name:"setextUnderline",resolveTo:$V,tokenize:zV};function $V(e,n){let t=e.length,i,a,o;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type==="content"){i=t;break}e[t][1].type==="paragraph"&&(a=t)}else e[t][1].type==="content"&&e.splice(t,1),!o&&e[t][1].type==="definition"&&(o=t);const l={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",o?(e.splice(a,0,["enter",l,n]),e.splice(o+1,0,["exit",e[i][1],n]),e[i][1].end={...e[o][1].end}):e[i][1]=l,e.push(["exit",l,n]),e}function zV(e,n,t){const i=this;let a;return o;function o(u){let p=i.events.length,g;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){g=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||g)?(e.enter("setextHeadingLine"),a=u,l(u)):t(u)}function l(u){return e.enter("setextHeadingLineSequence"),f(u)}function f(u){return u===a?(e.consume(u),f):(e.exit("setextHeadingLineSequence"),an(u)?fn(e,d,"lineSuffix")(u):d(u))}function d(u){return u===null||At(u)?(e.exit("setextHeadingLine"),n(u)):t(u)}}const BV={tokenize:UV};function UV(e){const n=this,t=e.attempt(lg,i,e.attempt(this.parser.constructs.flowInitial,a,fn(e,e.attempt(this.parser.constructs.flow,a,e.attempt(Y7,a)),"linePrefix")));return t;function i(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),n.currentConstruct=void 0,t}function a(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n.currentConstruct=void 0,t}}const qV={resolveAll:jE()},VV=CE("string"),HV=CE("text");function CE(e){return{resolveAll:jE(e==="text"?GV:void 0),tokenize:n};function n(t){const i=this,a=this.parser.constructs[e],o=t.attempt(a,l,f);return l;function l(p){return u(p)?o(p):f(p)}function f(p){if(p===null){t.consume(p);return}return t.enter("data"),t.consume(p),d}function d(p){return u(p)?(t.exit("data"),o(p)):(t.consume(p),d)}function u(p){if(p===null)return!0;const g=a[p];let b=-1;if(g)for(;++b<g.length;){const v=g[b];if(!v.previous||v.previous.call(i,i.previous))return!0}return!1}}}function jE(e){return n;function n(t,i){let a=-1,o;for(;++a<=t.length;)o===void 0?t[a]&&t[a][1].type==="data"&&(o=a,a++):(!t[a]||t[a][1].type!=="data")&&(a!==o+2&&(t[o][1].end=t[a-1][1].end,t.splice(o+2,a-o-2),a=o+2),o=void 0);return e?e(t,i):t}}function GV(e,n){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type==="lineEnding")&&e[t-1][1].type==="data"){const i=e[t-1][1],a=n.sliceStream(i);let o=a.length,l=-1,f=0,d;for(;o--;){const u=a[o];if(typeof u=="string"){for(l=u.length;u.charCodeAt(l-1)===32;)f++,l--;if(l)break;l=-1}else if(u===-2)d=!0,f++;else if(u!==-1){o++;break}}if(n._contentTypeTextTrailing&&t===e.length&&(f=0),f){const u={type:t===e.length||d||f<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:i.start._bufferIndex+l,_index:i.start._index+o,line:i.end.line,column:i.end.column-f,offset:i.end.offset-f},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(e.splice(t,0,["enter",u,n],["exit",u,n]),t+=2)}t++}return e}const YV={42:sa,43:sa,45:sa,48:sa,49:sa,50:sa,51:sa,52:sa,53:sa,54:sa,55:sa,56:sa,57:sa,62:yE},WV={91:X7},QV={[-2]:b0,[-1]:b0,32:b0},JV={35:rV,42:Ux,45:[dj,Ux],60:lV,61:dj,95:Ux,96:cj,126:cj},KV={38:bE,92:xE},XV={[-5]:v0,[-4]:v0,[-3]:v0,33:_V,38:bE,42:D1,60:[E7,mV],91:EV,92:[nV,xE],93:Ow,95:D1,96:B7},ZV={null:[D1,qV]},eH={null:[42,95]},tH={null:[]},nH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:eH,contentInitial:WV,disable:tH,document:YV,flow:JV,flowInitial:QV,insideSpan:ZV,string:KV,text:XV},Symbol.toStringTag,{value:"Module"}));function iH(e,n,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const a={},o=[];let l=[],f=[];const d={attempt:B(O),check:B($),consume:I,enter:D,exit:U,interrupt:B($,{interrupt:!0})},u={code:null,containerState:{},defineSkip:k,events:[],now:N,parser:e,previous:null,sliceSerialize:b,sliceStream:v,write:g};let p=n.tokenize.call(u,d);return n.resolveAll&&o.push(n),u;function g(L){return l=is(l,L),E(),l[l.length-1]!==null?[]:(q(n,0),u.events=Ub(o,u.events,u),u.events)}function b(L,Q){return aH(v(L),Q)}function v(L){return rH(l,L)}function N(){const{_bufferIndex:L,_index:Q,line:ne,column:ie,offset:oe}=i;return{_bufferIndex:L,_index:Q,line:ne,column:ie,offset:oe}}function k(L){a[L.line]=L.column,F()}function E(){let L;for(;i._index<l.length;){const Q=l[i._index];if(typeof Q=="string")for(L=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===L&&i._bufferIndex<Q.length;)T(Q.charCodeAt(i._bufferIndex));else T(Q)}}function T(L){p=p(L)}function I(L){At(L)?(i.line++,i.column=1,i.offset+=L===-3?2:1,F()):L!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===l[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=L}function D(L,Q){const ne=Q||{};return ne.type=L,ne.start=N(),u.events.push(["enter",ne,u]),f.push(ne),ne}function U(L){const Q=f.pop();return Q.end=N(),u.events.push(["exit",Q,u]),Q}function O(L,Q){q(L,Q.from)}function $(L,Q){Q.restore()}function B(L,Q){return ne;function ne(ie,oe,Y){let z,re,X,P;return Array.isArray(ie)?se(ie):"tokenize"in ie?se([ie]):te(ie);function te(ce){return Le;function Le(Ne){const nt=Ne!==null&&ce[Ne],ut=Ne!==null&&ce.null,je=[...Array.isArray(nt)?nt:nt?[nt]:[],...Array.isArray(ut)?ut:ut?[ut]:[]];return se(je)(Ne)}}function se(ce){return z=ce,re=0,ce.length===0?Y:M(ce[re])}function M(ce){return Le;function Le(Ne){return P=H(),X=ce,ce.partial||(u.currentConstruct=ce),ce.name&&u.parser.constructs.disable.null.includes(ce.name)?we():ce.tokenize.call(Q?Object.assign(Object.create(u),Q):u,d,fe,we)(Ne)}}function fe(ce){return L(X,P),oe}function we(ce){return P.restore(),++re<z.length?M(z[re]):Y}}}function q(L,Q){L.resolveAll&&!o.includes(L)&&o.push(L),L.resolve&&Fa(u.events,Q,u.events.length-Q,L.resolve(u.events.slice(Q),u)),L.resolveTo&&(u.events=L.resolveTo(u.events,u))}function H(){const L=N(),Q=u.previous,ne=u.currentConstruct,ie=u.events.length,oe=Array.from(f);return{from:ie,restore:Y};function Y(){i=L,u.previous=Q,u.currentConstruct=ne,u.events.length=ie,f=oe,F()}}function F(){i.line in a&&i.column<2&&(i.column=a[i.line],i.offset+=a[i.line]-1)}}function rH(e,n){const t=n.start._index,i=n.start._bufferIndex,a=n.end._index,o=n.end._bufferIndex;let l;if(t===a)l=[e[t].slice(i,o)];else{if(l=e.slice(t,a),i>-1){const f=l[0];typeof f=="string"?l[0]=f.slice(i):l.shift()}o>0&&l.push(e[a].slice(0,o))}return l}function aH(e,n){let t=-1;const i=[];let a;for(;++t<e.length;){const o=e[t];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=n?" ":"	";break}case-1:{if(!n&&a)continue;l=" ";break}default:l=String.fromCharCode(o)}a=o===-2,i.push(l)}return i.join("")}function sH(e){const i={constructs:mE([nH,...(e||{}).extensions||[]]),content:a(w7),defined:[],document:a(N7),flow:a(BV),lazy:{},string:a(VV),text:a(HV)};return i;function a(o){return l;function l(f){return iH(i,o,f)}}}function oH(e){for(;!vE(e););return e}const fj=/[\0\t\n\r]/g;function lH(){let e=1,n="",t=!0,i;return a;function a(o,l,f){const d=[];let u,p,g,b,v;for(o=n+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),g=0,n="",t&&(o.charCodeAt(0)===65279&&g++,t=void 0);g<o.length;){if(fj.lastIndex=g,u=fj.exec(o),b=u&&u.index!==void 0?u.index:o.length,v=o.charCodeAt(b),!u){n=o.slice(g);break}if(v===10&&g===b&&i)d.push(-3),i=void 0;else switch(i&&(d.push(-5),i=void 0),g<b&&(d.push(o.slice(g,b)),e+=b-g),v){case 0:{d.push(65533),e++;break}case 9:{for(p=Math.ceil(e/4)*4,d.push(-2);e++<p;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:i=!0,e=1}g=b+1}return f&&(i&&d.push(-5),n&&d.push(n),d.push(null)),d}}const cH=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function uH(e){return e.replace(cH,dH)}function dH(e,n,t){if(n)return n;if(t.charCodeAt(0)===35){const a=t.charCodeAt(1),o=a===120||a===88;return gE(t.slice(o?2:1),o?16:10)}return Rw(t)||e}const _E={}.hasOwnProperty;function fH(e,n,t){return typeof n!="string"&&(t=n,n=void 0),hH(t)(oH(sH(t).document().write(lH()(e,n,!0))))}function hH(e){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Ft),autolinkProtocol:H,autolinkEmail:H,atxHeading:o(Ve),blockQuote:o(ut),characterEscape:H,characterReference:H,codeFenced:o(je),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(je,l),codeText:o(ye,l),codeTextData:H,data:H,codeFlowValue:H,definition:o(Ae),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(De),hardBreakEscape:o(it),hardBreakTrailing:o(it),htmlFlow:o(Ke,l),htmlFlowData:H,htmlText:o(Ke,l),htmlTextData:H,image:o(rt),label:l,link:o(Ft),listItem:o(ve),listItemValue:b,listOrdered:o(_t,g),listUnordered:o(_t),paragraph:o(qe),reference:M,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(Ve),strong:o(We),thematicBreak:o(J)},exit:{atxHeading:d(),atxHeadingSequence:O,autolink:d(),autolinkEmail:nt,autolinkProtocol:Ne,blockQuote:d(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:we,characterReferenceMarkerNumeric:we,characterReferenceValue:ce,characterReference:Le,codeFenced:d(E),codeFencedFence:k,codeFencedFenceInfo:v,codeFencedFenceMeta:N,codeFlowValue:F,codeIndented:d(T),codeText:d(oe),codeTextData:F,data:F,definition:d(),definitionDestinationString:U,definitionLabelString:I,definitionTitleString:D,emphasis:d(),hardBreakEscape:d(Q),hardBreakTrailing:d(Q),htmlFlow:d(ne),htmlFlowData:F,htmlText:d(ie),htmlTextData:F,image:d(z),label:X,labelText:re,lineEnding:L,link:d(Y),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:fe,resourceDestinationString:P,resourceTitleString:te,resource:se,setextHeading:d(q),setextHeadingLineSequence:B,setextHeadingText:$,strong:d(),thematicBreak:d()}};kE(n,(e||{}).mdastExtensions||[]);const t={};return i;function i(G){let K={type:"root",children:[]};const Se={stack:[K],tokenStack:[],config:n,enter:f,exit:u,buffer:l,resume:p,data:t},Ee=[];let Be=-1;for(;++Be<G.length;)if(G[Be][1].type==="listOrdered"||G[Be][1].type==="listUnordered")if(G[Be][0]==="enter")Ee.push(Be);else{const at=Ee.pop();Be=a(G,at,Be)}for(Be=-1;++Be<G.length;){const at=n[G[Be][0]];_E.call(at,G[Be][1].type)&&at[G[Be][1].type].call(Object.assign({sliceSerialize:G[Be][2].sliceSerialize},Se),G[Be][1])}if(Se.tokenStack.length>0){const at=Se.tokenStack[Se.tokenStack.length-1];(at[1]||hj).call(Se,void 0,at[0])}for(K.position={start:Lc(G.length>0?G[0][1].start:{line:1,column:1,offset:0}),end:Lc(G.length>0?G[G.length-2][1].end:{line:1,column:1,offset:0})},Be=-1;++Be<n.transforms.length;)K=n.transforms[Be](K)||K;return K}function a(G,K,Se){let Ee=K-1,Be=-1,at=!1,gt,pt,Ue,Ze;for(;++Ee<=Se;){const Fe=G[Ee];switch(Fe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Fe[0]==="enter"?Be++:Be--,Ze=void 0;break}case"lineEndingBlank":{Fe[0]==="enter"&&(gt&&!Ze&&!Be&&!Ue&&(Ue=Ee),Ze=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ze=void 0}if(!Be&&Fe[0]==="enter"&&Fe[1].type==="listItemPrefix"||Be===-1&&Fe[0]==="exit"&&(Fe[1].type==="listUnordered"||Fe[1].type==="listOrdered")){if(gt){let ct=Ee;for(pt=void 0;ct--;){const Xe=G[ct];if(Xe[1].type==="lineEnding"||Xe[1].type==="lineEndingBlank"){if(Xe[0]==="exit")continue;pt&&(G[pt][1].type="lineEndingBlank",at=!0),Xe[1].type="lineEnding",pt=ct}else if(!(Xe[1].type==="linePrefix"||Xe[1].type==="blockQuotePrefix"||Xe[1].type==="blockQuotePrefixWhitespace"||Xe[1].type==="blockQuoteMarker"||Xe[1].type==="listItemIndent"))break}Ue&&(!pt||Ue<pt)&&(gt._spread=!0),gt.end=Object.assign({},pt?G[pt][1].start:Fe[1].end),G.splice(pt||Ee,0,["exit",gt,Fe[2]]),Ee++,Se++}if(Fe[1].type==="listItemPrefix"){const ct={type:"listItem",_spread:!1,start:Object.assign({},Fe[1].start),end:void 0};gt=ct,G.splice(Ee,0,["enter",ct,Fe[2]]),Ee++,Se++,Ue=void 0,Ze=!0}}}return G[K][1]._spread=at,Se}function o(G,K){return Se;function Se(Ee){f.call(this,G(Ee),Ee),K&&K.call(this,Ee)}}function l(){this.stack.push({type:"fragment",children:[]})}function f(G,K,Se){this.stack[this.stack.length-1].children.push(G),this.stack.push(G),this.tokenStack.push([K,Se||void 0]),G.position={start:Lc(K.start),end:void 0}}function d(G){return K;function K(Se){G&&G.call(this,Se),u.call(this,Se)}}function u(G,K){const Se=this.stack.pop(),Ee=this.tokenStack.pop();if(Ee)Ee[0].type!==G.type&&(K?K.call(this,G,Ee[0]):(Ee[1]||hj).call(this,G,Ee[0]));else throw new Error("Cannot close `"+G.type+"` ("+Lm({start:G.start,end:G.end})+"): its not open");Se.position.end=Lc(G.end)}function p(){return Mw(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(G){if(this.data.expectingFirstListItemValue){const K=this.stack[this.stack.length-2];K.start=Number.parseInt(this.sliceSerialize(G),10),this.data.expectingFirstListItemValue=void 0}}function v(){const G=this.resume(),K=this.stack[this.stack.length-1];K.lang=G}function N(){const G=this.resume(),K=this.stack[this.stack.length-1];K.meta=G}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const G=this.resume(),K=this.stack[this.stack.length-1];K.value=G.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function T(){const G=this.resume(),K=this.stack[this.stack.length-1];K.value=G.replace(/(\r?\n|\r)$/g,"")}function I(G){const K=this.resume(),Se=this.stack[this.stack.length-1];Se.label=K,Se.identifier=Fs(this.sliceSerialize(G)).toLowerCase()}function D(){const G=this.resume(),K=this.stack[this.stack.length-1];K.title=G}function U(){const G=this.resume(),K=this.stack[this.stack.length-1];K.url=G}function O(G){const K=this.stack[this.stack.length-1];if(!K.depth){const Se=this.sliceSerialize(G).length;K.depth=Se}}function $(){this.data.setextHeadingSlurpLineEnding=!0}function B(G){const K=this.stack[this.stack.length-1];K.depth=this.sliceSerialize(G).codePointAt(0)===61?1:2}function q(){this.data.setextHeadingSlurpLineEnding=void 0}function H(G){const Se=this.stack[this.stack.length-1].children;let Ee=Se[Se.length-1];(!Ee||Ee.type!=="text")&&(Ee=ze(),Ee.position={start:Lc(G.start),end:void 0},Se.push(Ee)),this.stack.push(Ee)}function F(G){const K=this.stack.pop();K.value+=this.sliceSerialize(G),K.position.end=Lc(G.end)}function L(G){const K=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Se=K.children[K.children.length-1];Se.position.end=Lc(G.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(K.type)&&(H.call(this,G),F.call(this,G))}function Q(){this.data.atHardBreak=!0}function ne(){const G=this.resume(),K=this.stack[this.stack.length-1];K.value=G}function ie(){const G=this.resume(),K=this.stack[this.stack.length-1];K.value=G}function oe(){const G=this.resume(),K=this.stack[this.stack.length-1];K.value=G}function Y(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const K=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=K,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function z(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const K=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=K,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function re(G){const K=this.sliceSerialize(G),Se=this.stack[this.stack.length-2];Se.label=uH(K),Se.identifier=Fs(K).toLowerCase()}function X(){const G=this.stack[this.stack.length-1],K=this.resume(),Se=this.stack[this.stack.length-1];if(this.data.inReference=!0,Se.type==="link"){const Ee=G.children;Se.children=Ee}else Se.alt=K}function P(){const G=this.resume(),K=this.stack[this.stack.length-1];K.url=G}function te(){const G=this.resume(),K=this.stack[this.stack.length-1];K.title=G}function se(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function fe(G){const K=this.resume(),Se=this.stack[this.stack.length-1];Se.label=K,Se.identifier=Fs(this.sliceSerialize(G)).toLowerCase(),this.data.referenceType="full"}function we(G){this.data.characterReferenceType=G.type}function ce(G){const K=this.sliceSerialize(G),Se=this.data.characterReferenceType;let Ee;Se?(Ee=gE(K,Se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ee=Rw(K);const Be=this.stack[this.stack.length-1];Be.value+=Ee}function Le(G){const K=this.stack.pop();K.position.end=Lc(G.end)}function Ne(G){F.call(this,G);const K=this.stack[this.stack.length-1];K.url=this.sliceSerialize(G)}function nt(G){F.call(this,G);const K=this.stack[this.stack.length-1];K.url="mailto:"+this.sliceSerialize(G)}function ut(){return{type:"blockquote",children:[]}}function je(){return{type:"code",lang:null,meta:null,value:""}}function ye(){return{type:"inlineCode",value:""}}function Ae(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function De(){return{type:"emphasis",children:[]}}function Ve(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Ke(){return{type:"html",value:""}}function rt(){return{type:"image",title:null,url:"",alt:null}}function Ft(){return{type:"link",title:null,url:"",children:[]}}function _t(G){return{type:"list",ordered:G.type==="listOrdered",start:null,spread:G._spread,children:[]}}function ve(G){return{type:"listItem",spread:G._spread,checked:null,children:[]}}function qe(){return{type:"paragraph",children:[]}}function We(){return{type:"strong",children:[]}}function ze(){return{type:"text",value:""}}function J(){return{type:"thematicBreak"}}}function Lc(e){return{line:e.line,column:e.column,offset:e.offset}}function kE(e,n){let t=-1;for(;++t<n.length;){const i=n[t];Array.isArray(i)?kE(e,i):pH(e,i)}}function pH(e,n){let t;for(t in n)if(_E.call(n,t))switch(t){case"canContainEols":{const i=n[t];i&&e[t].push(...i);break}case"transforms":{const i=n[t];i&&e[t].push(...i);break}case"enter":case"exit":{const i=n[t];i&&Object.assign(e[t],i);break}}}function hj(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+Lm({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+Lm({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+Lm({start:n.start,end:n.end})+") is still open")}function mH(e){const n=this;n.parser=t;function t(i){return fH(i,{...n.data("settings"),...e,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}function gH(e,n){const t={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(n),!0)};return e.patch(n,t),e.applyData(n,t)}function yH(e,n){const t={type:"element",tagName:"br",properties:{},children:[]};return e.patch(n,t),[e.applyData(n,t),{type:"text",value:`
`}]}function xH(e,n){const t=n.value?n.value+`
`:"",i={};n.lang&&(i.className=["language-"+n.lang]);let a={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return n.meta&&(a.data={meta:n.meta}),e.patch(n,a),a=e.applyData(n,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(n,a),a}function bH(e,n){const t={type:"element",tagName:"del",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function vH(e,n){const t={type:"element",tagName:"em",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function wH(e,n){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(n.identifier).toUpperCase(),a=Lh(i.toLowerCase()),o=e.footnoteOrder.indexOf(i);let l,f=e.footnoteCounts.get(i);f===void 0?(f=0,e.footnoteOrder.push(i),l=e.footnoteOrder.length):l=o+1,f+=1,e.footnoteCounts.set(i,f);const d={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+a,id:t+"fnref-"+a+(f>1?"-"+f:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(n,d);const u={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(n,u),e.applyData(n,u)}function SH(e,n){const t={type:"element",tagName:"h"+n.depth,properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function NH(e,n){if(e.options.allowDangerousHtml){const t={type:"raw",value:n.value};return e.patch(n,t),e.applyData(n,t)}}function EE(e,n){const t=n.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return[{type:"text",value:"!["+n.alt+i}];const a=e.all(n),o=a[0];o&&o.type==="text"?o.value="["+o.value:a.unshift({type:"text",value:"["});const l=a[a.length-1];return l&&l.type==="text"?l.value+=i:a.push({type:"text",value:i}),a}function CH(e,n){const t=String(n.identifier).toUpperCase(),i=e.definitionById.get(t);if(!i)return EE(e,n);const a={src:Lh(i.url||""),alt:n.alt};i.title!==null&&i.title!==void 0&&(a.title=i.title);const o={type:"element",tagName:"img",properties:a,children:[]};return e.patch(n,o),e.applyData(n,o)}function jH(e,n){const t={src:Lh(n.url)};n.alt!==null&&n.alt!==void 0&&(t.alt=n.alt),n.title!==null&&n.title!==void 0&&(t.title=n.title);const i={type:"element",tagName:"img",properties:t,children:[]};return e.patch(n,i),e.applyData(n,i)}function _H(e,n){const t={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};e.patch(n,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return e.patch(n,i),e.applyData(n,i)}function kH(e,n){const t=String(n.identifier).toUpperCase(),i=e.definitionById.get(t);if(!i)return EE(e,n);const a={href:Lh(i.url||"")};i.title!==null&&i.title!==void 0&&(a.title=i.title);const o={type:"element",tagName:"a",properties:a,children:e.all(n)};return e.patch(n,o),e.applyData(n,o)}function EH(e,n){const t={href:Lh(n.url)};n.title!==null&&n.title!==void 0&&(t.title=n.title);const i={type:"element",tagName:"a",properties:t,children:e.all(n)};return e.patch(n,i),e.applyData(n,i)}function TH(e,n,t){const i=e.all(n),a=t?AH(t):TE(n),o={},l=[];if(typeof n.checked=="boolean"){const p=i[0];let g;p&&p.type==="element"&&p.tagName==="p"?g=p:(g={type:"element",tagName:"p",properties:{},children:[]},i.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let f=-1;for(;++f<i.length;){const p=i[f];(a||f!==0||p.type!=="element"||p.tagName!=="p")&&l.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!a?l.push(...p.children):l.push(p)}const d=i[i.length-1];d&&(a||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:o,children:l};return e.patch(n,u),e.applyData(n,u)}function AH(e){let n=!1;if(e.type==="list"){n=e.spread||!1;const t=e.children;let i=-1;for(;!n&&++i<t.length;)n=TE(t[i])}return n}function TE(e){const n=e.spread;return n??e.children.length>1}function PH(e,n){const t={},i=e.all(n);let a=-1;for(typeof n.start=="number"&&n.start!==1&&(t.start=n.start);++a<i.length;){const l=i[a];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const o={type:"element",tagName:n.ordered?"ol":"ul",properties:t,children:e.wrap(i,!0)};return e.patch(n,o),e.applyData(n,o)}function DH(e,n){const t={type:"element",tagName:"p",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function IH(e,n){const t={type:"root",children:e.wrap(e.all(n))};return e.patch(n,t),e.applyData(n,t)}function MH(e,n){const t={type:"element",tagName:"strong",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function RH(e,n){const t=e.all(n),i=t.shift(),a=[];if(i){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(n.children[0],l),a.push(l)}if(t.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(t,!0)},f=Aw(n.children[1]),d=lE(n.children[n.children.length-1]);f&&d&&(l.position={start:f,end:d}),a.push(l)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(n,o),e.applyData(n,o)}function OH(e,n,t){const i=t?t.children:void 0,o=(i?i.indexOf(n):1)===0?"th":"td",l=t&&t.type==="table"?t.align:void 0,f=l?l.length:n.children.length;let d=-1;const u=[];for(;++d<f;){const g=n.children[d],b={},v=l?l[d]:void 0;v&&(b.align=v);let N={type:"element",tagName:o,properties:b,children:[]};g&&(N.children=e.all(g),e.patch(g,N),N=e.applyData(g,N)),u.push(N)}const p={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(n,p),e.applyData(n,p)}function LH(e,n){const t={type:"element",tagName:"td",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}const pj=9,mj=32;function FH(e){const n=String(e),t=/\r?\n|\r/g;let i=t.exec(n),a=0;const o=[];for(;i;)o.push(gj(n.slice(a,i.index),a>0,!0),i[0]),a=i.index+i[0].length,i=t.exec(n);return o.push(gj(n.slice(a),a>0,!1)),o.join("")}function gj(e,n,t){let i=0,a=e.length;if(n){let o=e.codePointAt(i);for(;o===pj||o===mj;)i++,o=e.codePointAt(i)}if(t){let o=e.codePointAt(a-1);for(;o===pj||o===mj;)a--,o=e.codePointAt(a-1)}return a>i?e.slice(i,a):""}function $H(e,n){const t={type:"text",value:FH(String(n.value))};return e.patch(n,t),e.applyData(n,t)}function zH(e,n){const t={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(n,t),e.applyData(n,t)}const BH={blockquote:gH,break:yH,code:xH,delete:bH,emphasis:vH,footnoteReference:wH,heading:SH,html:NH,imageReference:CH,image:jH,inlineCode:_H,linkReference:kH,link:EH,listItem:TH,list:PH,paragraph:DH,root:IH,strong:MH,table:RH,tableCell:LH,tableRow:OH,text:$H,thematicBreak:zH,toml:vx,yaml:vx,definition:vx,footnoteDefinition:vx};function vx(){}const AE=-1,qb=0,$m=1,fb=2,Lw=3,Fw=4,$w=5,zw=6,PE=7,DE=8,yj=typeof self=="object"?self:globalThis,UH=(e,n)=>{const t=(a,o)=>(e.set(o,a),a),i=a=>{if(e.has(a))return e.get(a);const[o,l]=n[a];switch(o){case qb:case AE:return t(l,a);case $m:{const f=t([],a);for(const d of l)f.push(i(d));return f}case fb:{const f=t({},a);for(const[d,u]of l)f[i(d)]=i(u);return f}case Lw:return t(new Date(l),a);case Fw:{const{source:f,flags:d}=l;return t(new RegExp(f,d),a)}case $w:{const f=t(new Map,a);for(const[d,u]of l)f.set(i(d),i(u));return f}case zw:{const f=t(new Set,a);for(const d of l)f.add(i(d));return f}case PE:{const{name:f,message:d}=l;return t(new yj[f](d),a)}case DE:return t(BigInt(l),a);case"BigInt":return t(Object(BigInt(l)),a);case"ArrayBuffer":return t(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:f}=new Uint8Array(l);return t(new DataView(f),l)}}return t(new yj[o](l),a)};return i},xj=e=>UH(new Map,e)(0),lh="",{toString:qH}={},{keys:VH}=Object,Tm=e=>{const n=typeof e;if(n!=="object"||!e)return[qb,n];const t=qH.call(e).slice(8,-1);switch(t){case"Array":return[$m,lh];case"Object":return[fb,lh];case"Date":return[Lw,lh];case"RegExp":return[Fw,lh];case"Map":return[$w,lh];case"Set":return[zw,lh];case"DataView":return[$m,t]}return t.includes("Array")?[$m,t]:t.includes("Error")?[PE,t]:[fb,t]},wx=([e,n])=>e===qb&&(n==="function"||n==="symbol"),HH=(e,n,t,i)=>{const a=(l,f)=>{const d=i.push(l)-1;return t.set(f,d),d},o=l=>{if(t.has(l))return t.get(l);let[f,d]=Tm(l);switch(f){case qb:{let p=l;switch(d){case"bigint":f=DE,p=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);p=null;break;case"undefined":return a([AE],l)}return a([f,p],l)}case $m:{if(d){let b=l;return d==="DataView"?b=new Uint8Array(l.buffer):d==="ArrayBuffer"&&(b=new Uint8Array(l)),a([d,[...b]],l)}const p=[],g=a([f,p],l);for(const b of l)p.push(o(b));return g}case fb:{if(d)switch(d){case"BigInt":return a([d,l.toString()],l);case"Boolean":case"Number":case"String":return a([d,l.valueOf()],l)}if(n&&"toJSON"in l)return o(l.toJSON());const p=[],g=a([f,p],l);for(const b of VH(l))(e||!wx(Tm(l[b])))&&p.push([o(b),o(l[b])]);return g}case Lw:return a([f,l.toISOString()],l);case Fw:{const{source:p,flags:g}=l;return a([f,{source:p,flags:g}],l)}case $w:{const p=[],g=a([f,p],l);for(const[b,v]of l)(e||!(wx(Tm(b))||wx(Tm(v))))&&p.push([o(b),o(v)]);return g}case zw:{const p=[],g=a([f,p],l);for(const b of l)(e||!wx(Tm(b)))&&p.push(o(b));return g}}const{message:u}=l;return a([f,{name:d,message:u}],l)};return o},bj=(e,{json:n,lossy:t}={})=>{const i=[];return HH(!(n||t),!!n,new Map,i)(e),i},hb=typeof structuredClone=="function"?(e,n)=>n&&("json"in n||"lossy"in n)?xj(bj(e,n)):structuredClone(e):(e,n)=>xj(bj(e,n));function GH(e,n){const t=[{type:"text",value:""}];return n>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(n)}]}),t}function YH(e,n){return"Back to reference "+(e+1)+(n>1?"-"+n:"")}function WH(e){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",t=e.options.footnoteBackContent||GH,i=e.options.footnoteBackLabel||YH,a=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},f=[];let d=-1;for(;++d<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[d]);if(!u)continue;const p=e.all(u),g=String(u.identifier).toUpperCase(),b=Lh(g.toLowerCase());let v=0;const N=[],k=e.footnoteCounts.get(g);for(;k!==void 0&&++v<=k;){N.length>0&&N.push({type:"text",value:" "});let I=typeof t=="string"?t:t(d,v);typeof I=="string"&&(I={type:"text",value:I}),N.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+b+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(d,v),className:["data-footnote-backref"]},children:Array.isArray(I)?I:[I]})}const E=p[p.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const I=E.children[E.children.length-1];I&&I.type==="text"?I.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...N)}else p.push(...N);const T={type:"element",tagName:"li",properties:{id:n+"fn-"+b},children:e.wrap(p,!0)};e.patch(u,T),f.push(T)}if(f.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...hb(l),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(f,!0)},{type:"text",value:`
`}]}}const Vb=function(e){if(e==null)return XH;if(typeof e=="function")return Hb(e);if(typeof e=="object")return Array.isArray(e)?QH(e):JH(e);if(typeof e=="string")return KH(e);throw new Error("Expected function, string, or object as test")};function QH(e){const n=[];let t=-1;for(;++t<e.length;)n[t]=Vb(e[t]);return Hb(i);function i(...a){let o=-1;for(;++o<n.length;)if(n[o].apply(this,a))return!0;return!1}}function JH(e){const n=e;return Hb(t);function t(i){const a=i;let o;for(o in e)if(a[o]!==n[o])return!1;return!0}}function KH(e){return Hb(n);function n(t){return t&&t.type===e}}function Hb(e){return n;function n(t,i,a){return!!(ZH(t)&&e.call(this,t,typeof i=="number"?i:void 0,a||void 0))}}function XH(){return!0}function ZH(e){return e!==null&&typeof e=="object"&&"type"in e}const IE=[],eG=!0,I1=!1,tG="skip";function ME(e,n,t,i){let a;typeof n=="function"&&typeof t!="function"?(i=t,t=n):a=n;const o=Vb(a),l=i?-1:1;f(e,void 0,[])();function f(d,u,p){const g=d&&typeof d=="object"?d:{};if(typeof g.type=="string"){const v=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(d.type+(v?"<"+v+">":""))+")"})}return b;function b(){let v=IE,N,k,E;if((!n||o(d,u,p[p.length-1]||void 0))&&(v=nG(t(d,p)),v[0]===I1))return v;if("children"in d&&d.children){const T=d;if(T.children&&v[0]!==tG)for(k=(i?T.children.length:-1)+l,E=p.concat(T);k>-1&&k<T.children.length;){const I=T.children[k];if(N=f(I,k,E)(),N[0]===I1)return N;k=typeof N[1]=="number"?N[1]:k+l}}return v}}}function nG(e){return Array.isArray(e)?e:typeof e=="number"?[eG,e]:e==null?IE:[e]}function Bw(e,n,t,i){let a,o,l;typeof n=="function"?(o=void 0,l=n,a=t):(o=n,l=t,a=i),ME(e,o,f,a);function f(d,u){const p=u[u.length-1],g=p?p.children.indexOf(d):void 0;return l(d,g,p)}}const M1={}.hasOwnProperty,iG={};function rG(e,n){const t=n||iG,i=new Map,a=new Map,o=new Map,l={...BH,...t.handlers},f={all:u,applyData:sG,definitionById:i,footnoteById:a,footnoteCounts:o,footnoteOrder:[],handlers:l,one:d,options:t,patch:aG,wrap:lG};return Bw(e,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const g=p.type==="definition"?i:a,b=String(p.identifier).toUpperCase();g.has(b)||g.set(b,p)}}),f;function d(p,g){const b=p.type,v=f.handlers[b];if(M1.call(f.handlers,b)&&v)return v(f,p,g);if(f.options.passThrough&&f.options.passThrough.includes(b)){if("children"in p){const{children:k,...E}=p,T=hb(E);return T.children=f.all(p),T}return hb(p)}return(f.options.unknownHandler||oG)(f,p,g)}function u(p){const g=[];if("children"in p){const b=p.children;let v=-1;for(;++v<b.length;){const N=f.one(b[v],p);if(N){if(v&&b[v-1].type==="break"&&(!Array.isArray(N)&&N.type==="text"&&(N.value=vj(N.value)),!Array.isArray(N)&&N.type==="element")){const k=N.children[0];k&&k.type==="text"&&(k.value=vj(k.value))}Array.isArray(N)?g.push(...N):g.push(N)}}}return g}}function aG(e,n){e.position&&(n.position=Yq(e))}function sG(e,n){let t=n;if(e&&e.data){const i=e.data.hName,a=e.data.hChildren,o=e.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const l="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:l}}t.type==="element"&&o&&Object.assign(t.properties,hb(o)),"children"in t&&t.children&&a!==null&&a!==void 0&&(t.children=a)}return t}function oG(e,n){const t=n.data||{},i="value"in n&&!(M1.call(t,"hProperties")||M1.call(t,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:e.all(n)};return e.patch(n,i),e.applyData(n,i)}function lG(e,n){const t=[];let i=-1;for(n&&t.push({type:"text",value:`
`});++i<e.length;)i&&t.push({type:"text",value:`
`}),t.push(e[i]);return n&&e.length>0&&t.push({type:"text",value:`
`}),t}function vj(e){let n=0,t=e.charCodeAt(n);for(;t===9||t===32;)n++,t=e.charCodeAt(n);return e.slice(n)}function wj(e,n){const t=rG(e,n),i=t.one(e,void 0),a=WH(t),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return a&&o.children.push({type:"text",value:`
`},a),o}function cG(e,n){return e&&"run"in e?async function(t,i){const a=wj(t,{file:i,...n});await e.run(a,i)}:function(t,i){return wj(t,{file:i,...e||n})}}function Sj(e){if(e)throw e}var w0,Nj;function uG(){if(Nj)return w0;Nj=1;var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(u){return typeof Array.isArray=="function"?Array.isArray(u):n.call(u)==="[object Array]"},o=function(u){if(!u||n.call(u)!=="[object Object]")return!1;var p=e.call(u,"constructor"),g=u.constructor&&u.constructor.prototype&&e.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!p&&!g)return!1;var b;for(b in u);return typeof b>"u"||e.call(u,b)},l=function(u,p){t&&p.name==="__proto__"?t(u,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):u[p.name]=p.newValue},f=function(u,p){if(p==="__proto__")if(e.call(u,p)){if(i)return i(u,p).value}else return;return u[p]};return w0=function d(){var u,p,g,b,v,N,k=arguments[0],E=1,T=arguments.length,I=!1;for(typeof k=="boolean"&&(I=k,k=arguments[1]||{},E=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});E<T;++E)if(u=arguments[E],u!=null)for(p in u)g=f(k,p),b=f(u,p),k!==b&&(I&&b&&(o(b)||(v=a(b)))?(v?(v=!1,N=g&&a(g)?g:[]):N=g&&o(g)?g:{},l(k,{name:p,newValue:d(I,N,b)})):typeof b<"u"&&l(k,{name:p,newValue:b}));return k},w0}var dG=uG();const S0=Pd(dG);function R1(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function fG(){const e=[],n={run:t,use:i};return n;function t(...a){let o=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);f(null,...a);function f(d,...u){const p=e[++o];let g=-1;if(d){l(d);return}for(;++g<a.length;)(u[g]===null||u[g]===void 0)&&(u[g]=a[g]);a=u,p?hG(p,f)(...u):l(null,...u)}}function i(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),n}}function hG(e,n){let t;return i;function i(...l){const f=e.length>l.length;let d;f&&l.push(a);try{d=e.apply(this,l)}catch(u){const p=u;if(f&&t)throw p;return a(p)}f||(d&&d.then&&typeof d.then=="function"?d.then(o,a):d instanceof Error?a(d):o(d))}function a(l,...f){t||(t=!0,n(l,...f))}function o(l){a(null,l)}}const Po={basename:pG,dirname:mG,extname:gG,join:yG,sep:"/"};function pG(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');cg(e);let t=0,i=-1,a=e.length,o;if(n===void 0||n.length===0||n.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(o){t=a+1;break}}else i<0&&(o=!0,i=a+1);return i<0?"":e.slice(t,i)}if(n===e)return"";let l=-1,f=n.length-1;for(;a--;)if(e.codePointAt(a)===47){if(o){t=a+1;break}}else l<0&&(o=!0,l=a+1),f>-1&&(e.codePointAt(a)===n.codePointAt(f--)?f<0&&(i=a):(f=-1,i=l));return t===i?i=l:i<0&&(i=e.length),e.slice(t,i)}function mG(e){if(cg(e),e.length===0)return".";let n=-1,t=e.length,i;for(;--t;)if(e.codePointAt(t)===47){if(i){n=t;break}}else i||(i=!0);return n<0?e.codePointAt(0)===47?"/":".":n===1&&e.codePointAt(0)===47?"//":e.slice(0,n)}function gG(e){cg(e);let n=e.length,t=-1,i=0,a=-1,o=0,l;for(;n--;){const f=e.codePointAt(n);if(f===47){if(l){i=n+1;break}continue}t<0&&(l=!0,t=n+1),f===46?a<0?a=n:o!==1&&(o=1):a>-1&&(o=-1)}return a<0||t<0||o===0||o===1&&a===t-1&&a===i+1?"":e.slice(a,t)}function yG(...e){let n=-1,t;for(;++n<e.length;)cg(e[n]),e[n]&&(t=t===void 0?e[n]:t+"/"+e[n]);return t===void 0?".":xG(t)}function xG(e){cg(e);const n=e.codePointAt(0)===47;let t=bG(e,!n);return t.length===0&&!n&&(t="."),t.length>0&&e.codePointAt(e.length-1)===47&&(t+="/"),n?"/"+t:t}function bG(e,n){let t="",i=0,a=-1,o=0,l=-1,f,d;for(;++l<=e.length;){if(l<e.length)f=e.codePointAt(l);else{if(f===47)break;f=47}if(f===47){if(!(a===l-1||o===1))if(a!==l-1&&o===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(d=t.lastIndexOf("/"),d!==t.length-1){d<0?(t="",i=0):(t=t.slice(0,d),i=t.length-1-t.lastIndexOf("/")),a=l,o=0;continue}}else if(t.length>0){t="",i=0,a=l,o=0;continue}}n&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+e.slice(a+1,l):t=e.slice(a+1,l),i=l-a-1;a=l,o=0}else f===46&&o>-1?o++:o=-1}return t}function cg(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const vG={cwd:wG};function wG(){return"/"}function O1(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function SG(e){if(typeof e=="string")e=new URL(e);else if(!O1(e)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(e.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return NG(e)}function NG(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const n=e.pathname;let t=-1;for(;++t<n.length;)if(n.codePointAt(t)===37&&n.codePointAt(t+1)===50){const i=n.codePointAt(t+2);if(i===70||i===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(n)}const N0=["history","path","basename","stem","extname","dirname"];let RE=class{constructor(n){let t;n?O1(n)?t={path:n}:typeof n=="string"||CG(n)?t={value:n}:t=n:t={},this.cwd="cwd"in t?"":vG.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<N0.length;){const o=N0[i];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let a;for(a in t)N0.includes(a)||(this[a]=t[a])}get basename(){return typeof this.path=="string"?Po.basename(this.path):void 0}set basename(n){j0(n,"basename"),C0(n,"basename"),this.path=Po.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?Po.dirname(this.path):void 0}set dirname(n){Cj(this.basename,"dirname"),this.path=Po.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?Po.extname(this.path):void 0}set extname(n){if(C0(n,"extname"),Cj(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Po.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){O1(n)&&(n=SG(n)),j0(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?Po.basename(this.path,this.extname):void 0}set stem(n){j0(n,"stem"),C0(n,"stem"),this.path=Po.join(this.dirname||"",n+(this.extname||""))}fail(n,t,i){const a=this.message(n,t,i);throw a.fatal=!0,a}info(n,t,i){const a=this.message(n,t,i);return a.fatal=void 0,a}message(n,t,i){const a=new jr(n,t,i);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}};function C0(e,n){if(e&&e.includes(Po.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+Po.sep+"`")}function j0(e,n){if(!e)throw new Error("`"+n+"` cannot be empty")}function Cj(e,n){if(!e)throw new Error("Setting `"+n+"` requires `path` to be set too")}function CG(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const jG=function(e){const i=this.constructor.prototype,a=i[e],o=function(){return a.apply(o,arguments)};return Object.setPrototypeOf(o,i),o},_G={}.hasOwnProperty;let kG=class OE extends jG{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=fG()}copy(){const n=new OE;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];n.use(...i)}return n.data(S0(!0,{},this.namespace)),n}data(n,t){return typeof n=="string"?arguments.length===2?(E0("data",this.frozen),this.namespace[n]=t,this):_G.call(this.namespace,n)&&this.namespace[n]||void 0:n?(E0("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const a=t.call(n,...i);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const t=Sx(n),i=this.parser||this.Parser;return _0("parse",i),i(String(t),t)}process(n,t){const i=this;return this.freeze(),_0("process",this.parser||this.Parser),k0("process",this.compiler||this.Compiler),t?a(void 0,t):new Promise(a);function a(o,l){const f=Sx(n),d=i.parse(f);i.run(d,f,function(p,g,b){if(p||!g||!b)return u(p);const v=g,N=i.stringify(v,b);AG(N)?b.value=N:b.result=N,u(p,b)});function u(p,g){p||!g?l(p):o?o(g):t(void 0,g)}}}processSync(n){let t=!1,i;return this.freeze(),_0("processSync",this.parser||this.Parser),k0("processSync",this.compiler||this.Compiler),this.process(n,a),_j("processSync","process",t),i;function a(o,l){t=!0,Sj(o),i=l}}run(n,t,i){jj(n),this.freeze();const a=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?o(void 0,i):new Promise(o);function o(l,f){const d=Sx(t);a.run(n,d,u);function u(p,g,b){const v=g||n;p?f(p):l?l(v):i(void 0,v,b)}}}runSync(n,t){let i=!1,a;return this.run(n,t,o),_j("runSync","run",i),a;function o(l,f){Sj(l),a=f,i=!0}}stringify(n,t){this.freeze();const i=Sx(t),a=this.compiler||this.Compiler;return k0("stringify",a),jj(n),a(n,i)}use(n,...t){const i=this.attachers,a=this.namespace;if(E0("use",this.frozen),n!=null)if(typeof n=="function")d(n,t);else if(typeof n=="object")Array.isArray(n)?f(n):l(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function o(u){if(typeof u=="function")d(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[p,...g]=u;d(p,g)}else l(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function l(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");f(u.plugins),u.settings&&(a.settings=S0(!0,a.settings,u.settings))}function f(u){let p=-1;if(u!=null)if(Array.isArray(u))for(;++p<u.length;){const g=u[p];o(g)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function d(u,p){let g=-1,b=-1;for(;++g<i.length;)if(i[g][0]===u){b=g;break}if(b===-1)i.push([u,...p]);else if(p.length>0){let[v,...N]=p;const k=i[b][1];R1(k)&&R1(v)&&(v=S0(!0,k,v)),i[b]=[u,v,...N]}}}};const EG=new kG().freeze();function _0(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function k0(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function E0(e,n){if(n)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function jj(e){if(!R1(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function _j(e,n,t){if(!t)throw new Error("`"+e+"` finished async. Use `"+n+"` instead")}function Sx(e){return TG(e)?e:new RE(e)}function TG(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function AG(e){return typeof e=="string"||PG(e)}function PG(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const DG="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",kj=[],Ej={allowDangerousHtml:!0},IG=/^(https?|ircs?|mailto|xmpp)$/i,MG=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function _l(e){const n=RG(e),t=OG(e);return LG(n.runSync(n.parse(t),t),e)}function RG(e){const n=e.rehypePlugins||kj,t=e.remarkPlugins||kj,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Ej}:Ej;return EG().use(mH).use(t).use(cG,i).use(n)}function OG(e){const n=e.children||"",t=new RE;return typeof n=="string"&&(t.value=n),t}function LG(e,n){const t=n.allowedElements,i=n.allowElement,a=n.components,o=n.disallowedElements,l=n.skipHtml,f=n.unwrapDisallowed,d=n.urlTransform||FG;for(const p of MG)Object.hasOwn(n,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+DG+p.id,void 0);return Bw(e,u),Xq(e,{Fragment:r.Fragment,components:a,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function u(p,g,b){if(p.type==="raw"&&b&&typeof g=="number")return l?b.children.splice(g,1):b.children[g]={type:"text",value:p.value},g;if(p.type==="element"){let v;for(v in x0)if(Object.hasOwn(x0,v)&&Object.hasOwn(p.properties,v)){const N=p.properties[v],k=x0[v];(k===null||k.includes(p.tagName))&&(p.properties[v]=d(String(N||""),v,p))}}if(p.type==="element"){let v=t?!t.includes(p.tagName):o?o.includes(p.tagName):!1;if(!v&&i&&typeof g=="number"&&(v=!i(p,g,b)),v&&b&&typeof g=="number")return f&&p.children?b.children.splice(g,1,...p.children):b.children.splice(g,1),g}}}function FG(e){const n=e.indexOf(":"),t=e.indexOf("?"),i=e.indexOf("#"),a=e.indexOf("/");return n===-1||a!==-1&&n>a||t!==-1&&n>t||i!==-1&&n>i||IG.test(e.slice(0,n))?e:""}function Tj(e,n){const t=String(e);if(typeof n!="string")throw new TypeError("Expected character");let i=0,a=t.indexOf(n);for(;a!==-1;)i++,a=t.indexOf(n,a+n.length);return i}function $G(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function zG(e,n,t){const a=Vb((t||{}).ignore||[]),o=BG(n);let l=-1;for(;++l<o.length;)ME(e,"text",f);function f(u,p){let g=-1,b;for(;++g<p.length;){const v=p[g],N=b?b.children:void 0;if(a(v,N?N.indexOf(v):void 0,b))return;b=v}if(b)return d(u,p)}function d(u,p){const g=p[p.length-1],b=o[l][0],v=o[l][1];let N=0;const E=g.children.indexOf(u);let T=!1,I=[];b.lastIndex=0;let D=b.exec(u.value);for(;D;){const U=D.index,O={index:D.index,input:D.input,stack:[...p,u]};let $=v(...D,O);if(typeof $=="string"&&($=$.length>0?{type:"text",value:$}:void 0),$===!1?b.lastIndex=U+1:(N!==U&&I.push({type:"text",value:u.value.slice(N,U)}),Array.isArray($)?I.push(...$):$&&I.push($),N=U+D[0].length,T=!0),!b.global)break;D=b.exec(u.value)}return T?(N<u.value.length&&I.push({type:"text",value:u.value.slice(N)}),g.children.splice(E,1,...I)):I=[u],E+I.length}}function BG(e){const n=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<t.length;){const a=t[i];n.push([UG(a[0]),qG(a[1])])}return n}function UG(e){return typeof e=="string"?new RegExp($G(e),"g"):e}function qG(e){return typeof e=="function"?e:function(){return e}}const T0="phrasing",A0=["autolink","link","image","label"];function VG(){return{transforms:[KG],enter:{literalAutolink:GG,literalAutolinkEmail:P0,literalAutolinkHttp:P0,literalAutolinkWww:P0},exit:{literalAutolink:JG,literalAutolinkEmail:QG,literalAutolinkHttp:YG,literalAutolinkWww:WG}}}function HG(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:T0,notInConstruct:A0},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:T0,notInConstruct:A0},{character:":",before:"[ps]",after:"\\/",inConstruct:T0,notInConstruct:A0}]}}function GG(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function P0(e){this.config.enter.autolinkProtocol.call(this,e)}function YG(e){this.config.exit.autolinkProtocol.call(this,e)}function WG(e){this.config.exit.data.call(this,e);const n=this.stack[this.stack.length-1];n.type,n.url="http://"+this.sliceSerialize(e)}function QG(e){this.config.exit.autolinkEmail.call(this,e)}function JG(e){this.exit(e)}function KG(e){zG(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,XG],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),ZG]],{ignore:["link","linkReference"]})}function XG(e,n,t,i,a){let o="";if(!LE(a)||(/^w/i.test(n)&&(t=n+t,n="",o="http://"),!eY(t)))return!1;const l=tY(t+i);if(!l[0])return!1;const f={type:"link",title:null,url:o+n+l[0],children:[{type:"text",value:n+l[0]}]};return l[1]?[f,{type:"text",value:l[1]}]:f}function ZG(e,n,t,i){return!LE(i,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+n+"@"+t,children:[{type:"text",value:n+"@"+t}]}}function eY(e){const n=e.split(".");return!(n.length<2||n[n.length-1]&&(/_/.test(n[n.length-1])||!/[a-zA-Z\d]/.test(n[n.length-1]))||n[n.length-2]&&(/_/.test(n[n.length-2])||!/[a-zA-Z\d]/.test(n[n.length-2])))}function tY(e){const n=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!n)return[e,void 0];e=e.slice(0,n.index);let t=n[0],i=t.indexOf(")");const a=Tj(e,"(");let o=Tj(e,")");for(;i!==-1&&a>o;)e+=t.slice(0,i+1),t=t.slice(i+1),i=t.indexOf(")"),o++;return[e,t]}function LE(e,n){const t=e.input.charCodeAt(e.index-1);return(e.index===0||Td(t)||Bb(t))&&(!n||t!==47)}FE.peek=uY;function nY(){this.buffer()}function iY(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function rY(){this.buffer()}function aY(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function sY(e){const n=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Fs(this.sliceSerialize(e)).toLowerCase(),t.label=n}function oY(e){this.exit(e)}function lY(e){const n=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Fs(this.sliceSerialize(e)).toLowerCase(),t.label=n}function cY(e){this.exit(e)}function uY(){return"["}function FE(e,n,t,i){const a=t.createTracker(i);let o=a.move("[^");const l=t.enter("footnoteReference"),f=t.enter("reference");return o+=a.move(t.safe(t.associationId(e),{after:"]",before:o})),f(),l(),o+=a.move("]"),o}function dY(){return{enter:{gfmFootnoteCallString:nY,gfmFootnoteCall:iY,gfmFootnoteDefinitionLabelString:rY,gfmFootnoteDefinition:aY},exit:{gfmFootnoteCallString:sY,gfmFootnoteCall:oY,gfmFootnoteDefinitionLabelString:lY,gfmFootnoteDefinition:cY}}}function fY(e){let n=!1;return e&&e.firstLineBlank&&(n=!0),{handlers:{footnoteDefinition:t,footnoteReference:FE},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(i,a,o,l){const f=o.createTracker(l);let d=f.move("[^");const u=o.enter("footnoteDefinition"),p=o.enter("label");return d+=f.move(o.safe(o.associationId(i),{before:d,after:"]"})),p(),d+=f.move("]:"),i.children&&i.children.length>0&&(f.shift(4),d+=f.move((n?`
`:" ")+o.indentLines(o.containerFlow(i,f.current()),n?$E:hY))),u(),d}}function hY(e,n,t){return n===0?e:$E(e,n,t)}function $E(e,n,t){return(t?"":"    ")+e}const pY=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];zE.peek=bY;function mY(){return{canContainEols:["delete"],enter:{strikethrough:yY},exit:{strikethrough:xY}}}function gY(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:pY}],handlers:{delete:zE}}}function yY(e){this.enter({type:"delete",children:[]},e)}function xY(e){this.exit(e)}function zE(e,n,t,i){const a=t.createTracker(i),o=t.enter("strikethrough");let l=a.move("~~");return l+=t.containerPhrasing(e,{...a.current(),before:l,after:"~"}),l+=a.move("~~"),o(),l}function bY(){return"~"}function vY(e){return e.length}function wY(e,n){const t=n||{},i=(t.align||[]).concat(),a=t.stringLength||vY,o=[],l=[],f=[],d=[];let u=0,p=-1;for(;++p<e.length;){const k=[],E=[];let T=-1;for(e[p].length>u&&(u=e[p].length);++T<e[p].length;){const I=SY(e[p][T]);if(t.alignDelimiters!==!1){const D=a(I);E[T]=D,(d[T]===void 0||D>d[T])&&(d[T]=D)}k.push(I)}l[p]=k,f[p]=E}let g=-1;if(typeof i=="object"&&"length"in i)for(;++g<u;)o[g]=Aj(i[g]);else{const k=Aj(i);for(;++g<u;)o[g]=k}g=-1;const b=[],v=[];for(;++g<u;){const k=o[g];let E="",T="";k===99?(E=":",T=":"):k===108?E=":":k===114&&(T=":");let I=t.alignDelimiters===!1?1:Math.max(1,d[g]-E.length-T.length);const D=E+"-".repeat(I)+T;t.alignDelimiters!==!1&&(I=E.length+I+T.length,I>d[g]&&(d[g]=I),v[g]=I),b[g]=D}l.splice(1,0,b),f.splice(1,0,v),p=-1;const N=[];for(;++p<l.length;){const k=l[p],E=f[p];g=-1;const T=[];for(;++g<u;){const I=k[g]||"";let D="",U="";if(t.alignDelimiters!==!1){const O=d[g]-(E[g]||0),$=o[g];$===114?D=" ".repeat(O):$===99?O%2?(D=" ".repeat(O/2+.5),U=" ".repeat(O/2-.5)):(D=" ".repeat(O/2),U=D):U=" ".repeat(O)}t.delimiterStart!==!1&&!g&&T.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&I==="")&&(t.delimiterStart!==!1||g)&&T.push(" "),t.alignDelimiters!==!1&&T.push(D),T.push(I),t.alignDelimiters!==!1&&T.push(U),t.padding!==!1&&T.push(" "),(t.delimiterEnd!==!1||g!==u-1)&&T.push("|")}N.push(t.delimiterEnd===!1?T.join("").replace(/ +$/,""):T.join(""))}return N.join(`
`)}function SY(e){return e==null?"":String(e)}function Aj(e){const n=typeof e=="string"?e.codePointAt(0):0;return n===67||n===99?99:n===76||n===108?108:n===82||n===114?114:0}function NY(e,n,t,i){const a=t.enter("blockquote"),o=t.createTracker(i);o.move("> "),o.shift(2);const l=t.indentLines(t.containerFlow(e,o.current()),CY);return a(),l}function CY(e,n,t){return">"+(t?"":" ")+e}function jY(e,n){return Pj(e,n.inConstruct,!0)&&!Pj(e,n.notInConstruct,!1)}function Pj(e,n,t){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return t;let i=-1;for(;++i<n.length;)if(e.includes(n[i]))return!0;return!1}function Dj(e,n,t,i){let a=-1;for(;++a<t.unsafe.length;)if(t.unsafe[a].character===`
`&&jY(t.stack,t.unsafe[a]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function _Y(e,n){const t=String(e);let i=t.indexOf(n),a=i,o=0,l=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===a?++o>l&&(l=o):o=1,a=i+n.length,i=t.indexOf(n,a);return l}function kY(e,n){return!!(n.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function EY(e){const n=e.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function TY(e,n,t,i){const a=EY(t),o=e.value||"",l=a==="`"?"GraveAccent":"Tilde";if(kY(e,t)){const g=t.enter("codeIndented"),b=t.indentLines(o,AY);return g(),b}const f=t.createTracker(i),d=a.repeat(Math.max(_Y(o,a)+1,3)),u=t.enter("codeFenced");let p=f.move(d);if(e.lang){const g=t.enter(`codeFencedLang${l}`);p+=f.move(t.safe(e.lang,{before:p,after:" ",encode:["`"],...f.current()})),g()}if(e.lang&&e.meta){const g=t.enter(`codeFencedMeta${l}`);p+=f.move(" "),p+=f.move(t.safe(e.meta,{before:p,after:`
`,encode:["`"],...f.current()})),g()}return p+=f.move(`
`),o&&(p+=f.move(o+`
`)),p+=f.move(d),u(),p}function AY(e,n,t){return(t?"":"    ")+e}function Uw(e){const n=e.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function PY(e,n,t,i){const a=Uw(t),o=a==='"'?"Quote":"Apostrophe",l=t.enter("definition");let f=t.enter("label");const d=t.createTracker(i);let u=d.move("[");return u+=d.move(t.safe(t.associationId(e),{before:u,after:"]",...d.current()})),u+=d.move("]: "),f(),!e.url||/[\0- \u007F]/.test(e.url)?(f=t.enter("destinationLiteral"),u+=d.move("<"),u+=d.move(t.safe(e.url,{before:u,after:">",...d.current()})),u+=d.move(">")):(f=t.enter("destinationRaw"),u+=d.move(t.safe(e.url,{before:u,after:e.title?" ":`
`,...d.current()}))),f(),e.title&&(f=t.enter(`title${o}`),u+=d.move(" "+a),u+=d.move(t.safe(e.title,{before:u,after:a,...d.current()})),u+=d.move(a),f()),l(),u}function DY(e){const n=e.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function Xm(e){return"&#x"+e.toString(16).toUpperCase()+";"}function pb(e,n,t){const i=kh(e),a=kh(n);return i===void 0?a===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}BE.peek=IY;function BE(e,n,t,i){const a=DY(t),o=t.enter("emphasis"),l=t.createTracker(i),f=l.move(a);let d=l.move(t.containerPhrasing(e,{after:a,before:f,...l.current()}));const u=d.charCodeAt(0),p=pb(i.before.charCodeAt(i.before.length-1),u,a);p.inside&&(d=Xm(u)+d.slice(1));const g=d.charCodeAt(d.length-1),b=pb(i.after.charCodeAt(0),g,a);b.inside&&(d=d.slice(0,-1)+Xm(g));const v=l.move(a);return o(),t.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},f+d+v}function IY(e,n,t){return t.options.emphasis||"*"}function MY(e,n){let t=!1;return Bw(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return t=!0,I1}),!!((!e.depth||e.depth<3)&&Mw(e)&&(n.options.setext||t))}function RY(e,n,t,i){const a=Math.max(Math.min(6,e.depth||1),1),o=t.createTracker(i);if(MY(e,t)){const p=t.enter("headingSetext"),g=t.enter("phrasing"),b=t.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return g(),p(),b+`
`+(a===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const l="#".repeat(a),f=t.enter("headingAtx"),d=t.enter("phrasing");o.move(l+" ");let u=t.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(u)&&(u=Xm(u.charCodeAt(0))+u.slice(1)),u=u?l+" "+u:l,t.options.closeAtx&&(u+=" "+l),d(),f(),u}UE.peek=OY;function UE(e){return e.value||""}function OY(){return"<"}qE.peek=LY;function qE(e,n,t,i){const a=Uw(t),o=a==='"'?"Quote":"Apostrophe",l=t.enter("image");let f=t.enter("label");const d=t.createTracker(i);let u=d.move("![");return u+=d.move(t.safe(e.alt,{before:u,after:"]",...d.current()})),u+=d.move("]("),f(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(f=t.enter("destinationLiteral"),u+=d.move("<"),u+=d.move(t.safe(e.url,{before:u,after:">",...d.current()})),u+=d.move(">")):(f=t.enter("destinationRaw"),u+=d.move(t.safe(e.url,{before:u,after:e.title?" ":")",...d.current()}))),f(),e.title&&(f=t.enter(`title${o}`),u+=d.move(" "+a),u+=d.move(t.safe(e.title,{before:u,after:a,...d.current()})),u+=d.move(a),f()),u+=d.move(")"),l(),u}function LY(){return"!"}VE.peek=FY;function VE(e,n,t,i){const a=e.referenceType,o=t.enter("imageReference");let l=t.enter("label");const f=t.createTracker(i);let d=f.move("![");const u=t.safe(e.alt,{before:d,after:"]",...f.current()});d+=f.move(u+"]["),l();const p=t.stack;t.stack=[],l=t.enter("reference");const g=t.safe(t.associationId(e),{before:d,after:"]",...f.current()});return l(),t.stack=p,o(),a==="full"||!u||u!==g?d+=f.move(g+"]"):a==="shortcut"?d=d.slice(0,-1):d+=f.move("]"),d}function FY(){return"!"}HE.peek=$Y;function HE(e,n,t){let i=e.value||"",a="`",o=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(i);)a+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++o<t.unsafe.length;){const l=t.unsafe[o],f=t.compilePattern(l);let d;if(l.atBreak)for(;d=f.exec(i);){let u=d.index;i.charCodeAt(u)===10&&i.charCodeAt(u-1)===13&&u--,i=i.slice(0,u)+" "+i.slice(d.index+1)}}return a+i+a}function $Y(){return"`"}function GE(e,n){const t=Mw(e);return!!(!n.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(t===e.url||"mailto:"+t===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}YE.peek=zY;function YE(e,n,t,i){const a=Uw(t),o=a==='"'?"Quote":"Apostrophe",l=t.createTracker(i);let f,d;if(GE(e,t)){const p=t.stack;t.stack=[],f=t.enter("autolink");let g=l.move("<");return g+=l.move(t.containerPhrasing(e,{before:g,after:">",...l.current()})),g+=l.move(">"),f(),t.stack=p,g}f=t.enter("link"),d=t.enter("label");let u=l.move("[");return u+=l.move(t.containerPhrasing(e,{before:u,after:"](",...l.current()})),u+=l.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=t.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(t.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(d=t.enter("destinationRaw"),u+=l.move(t.safe(e.url,{before:u,after:e.title?" ":")",...l.current()}))),d(),e.title&&(d=t.enter(`title${o}`),u+=l.move(" "+a),u+=l.move(t.safe(e.title,{before:u,after:a,...l.current()})),u+=l.move(a),d()),u+=l.move(")"),f(),u}function zY(e,n,t){return GE(e,t)?"<":"["}WE.peek=BY;function WE(e,n,t,i){const a=e.referenceType,o=t.enter("linkReference");let l=t.enter("label");const f=t.createTracker(i);let d=f.move("[");const u=t.containerPhrasing(e,{before:d,after:"]",...f.current()});d+=f.move(u+"]["),l();const p=t.stack;t.stack=[],l=t.enter("reference");const g=t.safe(t.associationId(e),{before:d,after:"]",...f.current()});return l(),t.stack=p,o(),a==="full"||!u||u!==g?d+=f.move(g+"]"):a==="shortcut"?d=d.slice(0,-1):d+=f.move("]"),d}function BY(){return"["}function qw(e){const n=e.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function UY(e){const n=qw(e),t=e.options.bulletOther;if(!t)return n==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+t+"`) to be different");return t}function qY(e){const n=e.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function QE(e){const n=e.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function VY(e,n,t,i){const a=t.enter("list"),o=t.bulletCurrent;let l=e.ordered?qY(t):qw(t);const f=e.ordered?l==="."?")":".":UY(t);let d=n&&t.bulletLastUsed?l===t.bulletLastUsed:!1;if(!e.ordered){const p=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(d=!0),QE(t)===l&&p){let g=-1;for(;++g<e.children.length;){const b=e.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(l=f),t.bulletCurrent=l;const u=t.containerFlow(e,i);return t.bulletLastUsed=l,t.bulletCurrent=o,a(),u}function HY(e){const n=e.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function GY(e,n,t,i){const a=HY(t);let o=t.bulletCurrent||qw(t);n&&n.type==="list"&&n.ordered&&(o=(typeof n.start=="number"&&n.start>-1?n.start:1)+(t.options.incrementListMarker===!1?0:n.children.indexOf(e))+o);let l=o.length+1;(a==="tab"||a==="mixed"&&(n&&n.type==="list"&&n.spread||e.spread))&&(l=Math.ceil(l/4)*4);const f=t.createTracker(i);f.move(o+" ".repeat(l-o.length)),f.shift(l);const d=t.enter("listItem"),u=t.indentLines(t.containerFlow(e,f.current()),p);return d(),u;function p(g,b,v){return b?(v?"":" ".repeat(l))+g:(v?o:o+" ".repeat(l-o.length))+g}}function YY(e,n,t,i){const a=t.enter("paragraph"),o=t.enter("phrasing"),l=t.containerPhrasing(e,i);return o(),a(),l}const WY=Vb(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function QY(e,n,t,i){return(e.children.some(function(l){return WY(l)})?t.containerPhrasing:t.containerFlow).call(t,e,i)}function JY(e){const n=e.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}JE.peek=KY;function JE(e,n,t,i){const a=JY(t),o=t.enter("strong"),l=t.createTracker(i),f=l.move(a+a);let d=l.move(t.containerPhrasing(e,{after:a,before:f,...l.current()}));const u=d.charCodeAt(0),p=pb(i.before.charCodeAt(i.before.length-1),u,a);p.inside&&(d=Xm(u)+d.slice(1));const g=d.charCodeAt(d.length-1),b=pb(i.after.charCodeAt(0),g,a);b.inside&&(d=d.slice(0,-1)+Xm(g));const v=l.move(a+a);return o(),t.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},f+d+v}function KY(e,n,t){return t.options.strong||"*"}function XY(e,n,t,i){return t.safe(e.value,i)}function ZY(e){const n=e.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function eW(e,n,t){const i=(QE(t)+(t.options.ruleSpaces?" ":"")).repeat(ZY(t));return t.options.ruleSpaces?i.slice(0,-1):i}const KE={blockquote:NY,break:Dj,code:TY,definition:PY,emphasis:BE,hardBreak:Dj,heading:RY,html:UE,image:qE,imageReference:VE,inlineCode:HE,link:YE,linkReference:WE,list:VY,listItem:GY,paragraph:YY,root:QY,strong:JE,text:XY,thematicBreak:eW};function tW(){return{enter:{table:nW,tableData:Ij,tableHeader:Ij,tableRow:rW},exit:{codeText:aW,table:iW,tableData:D0,tableHeader:D0,tableRow:D0}}}function nW(e){const n=e._align;this.enter({type:"table",align:n.map(function(t){return t==="none"?null:t}),children:[]},e),this.data.inTable=!0}function iW(e){this.exit(e),this.data.inTable=void 0}function rW(e){this.enter({type:"tableRow",children:[]},e)}function D0(e){this.exit(e)}function Ij(e){this.enter({type:"tableCell",children:[]},e)}function aW(e){let n=this.resume();this.data.inTable&&(n=n.replace(/\\([\\|])/g,sW));const t=this.stack[this.stack.length-1];t.type,t.value=n,this.exit(e)}function sW(e,n){return n==="|"?n:e}function oW(e){const n=e||{},t=n.tableCellPadding,i=n.tablePipeAlign,a=n.stringLength,o=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:l,tableCell:d,tableRow:f}};function l(v,N,k,E){return u(p(v,k,E),v.align)}function f(v,N,k,E){const T=g(v,k,E),I=u([T]);return I.slice(0,I.indexOf(`
`))}function d(v,N,k,E){const T=k.enter("tableCell"),I=k.enter("phrasing"),D=k.containerPhrasing(v,{...E,before:o,after:o});return I(),T(),D}function u(v,N){return wY(v,{align:N,alignDelimiters:i,padding:t,stringLength:a})}function p(v,N,k){const E=v.children;let T=-1;const I=[],D=N.enter("table");for(;++T<E.length;)I[T]=g(E[T],N,k);return D(),I}function g(v,N,k){const E=v.children;let T=-1;const I=[],D=N.enter("tableRow");for(;++T<E.length;)I[T]=d(E[T],v,N,k);return D(),I}function b(v,N,k){let E=KE.inlineCode(v,N,k);return k.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function lW(){return{exit:{taskListCheckValueChecked:Mj,taskListCheckValueUnchecked:Mj,paragraph:uW}}}function cW(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:dW}}}function Mj(e){const n=this.stack[this.stack.length-2];n.type,n.checked=e.type==="taskListCheckValueChecked"}function uW(e){const n=this.stack[this.stack.length-2];if(n&&n.type==="listItem"&&typeof n.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const i=t.children[0];if(i&&i.type==="text"){const a=n.children;let o=-1,l;for(;++o<a.length;){const f=a[o];if(f.type==="paragraph"){l=f;break}}l===t&&(i.value=i.value.slice(1),i.value.length===0?t.children.shift():t.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,t.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function dW(e,n,t,i){const a=e.children[0],o=typeof e.checked=="boolean"&&a&&a.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",f=t.createTracker(i);o&&f.move(l);let d=KE.listItem(e,n,t,{...i,...f.current()});return o&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),d;function u(p){return p+l}}function fW(){return[VG(),dY(),mY(),tW(),lW()]}function hW(e){return{extensions:[HG(),fY(e),gY(),oW(e),cW()]}}const pW={tokenize:vW,partial:!0},XE={tokenize:wW,partial:!0},ZE={tokenize:SW,partial:!0},eT={tokenize:NW,partial:!0},mW={tokenize:CW,partial:!0},tT={name:"wwwAutolink",tokenize:xW,previous:iT},nT={name:"protocolAutolink",tokenize:bW,previous:rT},Dl={name:"emailAutolink",tokenize:yW,previous:aT},Bo={};function gW(){return{text:Bo}}let pd=48;for(;pd<123;)Bo[pd]=Dl,pd++,pd===58?pd=65:pd===91&&(pd=97);Bo[43]=Dl;Bo[45]=Dl;Bo[46]=Dl;Bo[95]=Dl;Bo[72]=[Dl,nT];Bo[104]=[Dl,nT];Bo[87]=[Dl,tT];Bo[119]=[Dl,tT];function yW(e,n,t){const i=this;let a,o;return l;function l(g){return!L1(g)||!aT.call(i,i.previous)||Vw(i.events)?t(g):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),f(g))}function f(g){return L1(g)?(e.consume(g),f):g===64?(e.consume(g),d):t(g)}function d(g){return g===46?e.check(mW,p,u)(g):g===45||g===95||Nr(g)?(o=!0,e.consume(g),d):p(g)}function u(g){return e.consume(g),a=!0,d}function p(g){return o&&a&&Ur(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),n(g)):t(g)}}function xW(e,n,t){const i=this;return a;function a(l){return l!==87&&l!==119||!iT.call(i,i.previous)||Vw(i.events)?t(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(pW,e.attempt(XE,e.attempt(ZE,o),t),t)(l))}function o(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),n(l)}}function bW(e,n,t){const i=this;let a="",o=!1;return l;function l(g){return(g===72||g===104)&&rT.call(i,i.previous)&&!Vw(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(g),e.consume(g),f):t(g)}function f(g){if(Ur(g)&&a.length<5)return a+=String.fromCodePoint(g),e.consume(g),f;if(g===58){const b=a.toLowerCase();if(b==="http"||b==="https")return e.consume(g),d}return t(g)}function d(g){return g===47?(e.consume(g),o?u:(o=!0,d)):t(g)}function u(g){return g===null||db(g)||qn(g)||Td(g)||Bb(g)?t(g):e.attempt(XE,e.attempt(ZE,p),t)(g)}function p(g){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),n(g)}}function vW(e,n,t){let i=0;return a;function a(l){return(l===87||l===119)&&i<3?(i++,e.consume(l),a):l===46&&i===3?(e.consume(l),o):t(l)}function o(l){return l===null?t(l):n(l)}}function wW(e,n,t){let i,a,o;return l;function l(u){return u===46||u===95?e.check(eT,d,f)(u):u===null||qn(u)||Td(u)||u!==45&&Bb(u)?d(u):(o=!0,e.consume(u),l)}function f(u){return u===95?i=!0:(a=i,i=void 0),e.consume(u),l}function d(u){return a||i||!o?t(u):n(u)}}function SW(e,n){let t=0,i=0;return a;function a(l){return l===40?(t++,e.consume(l),a):l===41&&i<t?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(eT,n,o)(l):l===null||qn(l)||Td(l)?n(l):(e.consume(l),a)}function o(l){return l===41&&i++,e.consume(l),a}}function NW(e,n,t){return i;function i(f){return f===33||f===34||f===39||f===41||f===42||f===44||f===46||f===58||f===59||f===63||f===95||f===126?(e.consume(f),i):f===38?(e.consume(f),o):f===93?(e.consume(f),a):f===60||f===null||qn(f)||Td(f)?n(f):t(f)}function a(f){return f===null||f===40||f===91||qn(f)||Td(f)?n(f):i(f)}function o(f){return Ur(f)?l(f):t(f)}function l(f){return f===59?(e.consume(f),i):Ur(f)?(e.consume(f),l):t(f)}}function CW(e,n,t){return i;function i(o){return e.consume(o),a}function a(o){return Nr(o)?t(o):n(o)}}function iT(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||qn(e)}function rT(e){return!Ur(e)}function aT(e){return!(e===47||L1(e))}function L1(e){return e===43||e===45||e===46||e===95||Nr(e)}function Vw(e){let n=e.length,t=!1;for(;n--;){const i=e[n][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){t=!0;break}if(i._gfmAutolinkLiteralWalkedInto){t=!1;break}}return e.length>0&&!t&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const jW={tokenize:IW,partial:!0};function _W(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:AW,continuation:{tokenize:PW},exit:DW}},text:{91:{name:"gfmFootnoteCall",tokenize:TW},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:kW,resolveTo:EW}}}}function kW(e,n,t){const i=this;let a=i.events.length;const o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l;for(;a--;){const d=i.events[a][1];if(d.type==="labelImage"){l=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return f;function f(d){if(!l||!l._balanced)return t(d);const u=Fs(i.sliceSerialize({start:l.end,end:i.now()}));return u.codePointAt(0)!==94||!o.includes(u.slice(1))?t(d):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),n(d))}}function EW(e,n){let t=e.length;for(;t--;)if(e[t][1].type==="labelImage"&&e[t][0]==="enter"){e[t][1];break}e[t+1][1].type="data",e[t+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[t+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[t+3][1].end),end:Object.assign({},e[t+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},f=[e[t+1],e[t+2],["enter",i,n],e[t+3],e[t+4],["enter",a,n],["exit",a,n],["enter",o,n],["enter",l,n],["exit",l,n],["exit",o,n],e[e.length-2],e[e.length-1],["exit",i,n]];return e.splice(t,e.length-t+1,...f),e}function TW(e,n,t){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o=0,l;return f;function f(g){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),d}function d(g){return g!==94?t(g):(e.enter("gfmFootnoteCallMarker"),e.consume(g),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(g){if(o>999||g===93&&!l||g===null||g===91||qn(g))return t(g);if(g===93){e.exit("chunkString");const b=e.exit("gfmFootnoteCallString");return a.includes(Fs(i.sliceSerialize(b)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),n):t(g)}return qn(g)||(l=!0),o++,e.consume(g),g===92?p:u}function p(g){return g===91||g===92||g===93?(e.consume(g),o++,u):u(g)}}function AW(e,n,t){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o,l=0,f;return d;function d(N){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(N),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(N){return N===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(N),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",p):t(N)}function p(N){if(l>999||N===93&&!f||N===null||N===91||qn(N))return t(N);if(N===93){e.exit("chunkString");const k=e.exit("gfmFootnoteDefinitionLabelString");return o=Fs(i.sliceSerialize(k)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(N),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),b}return qn(N)||(f=!0),l++,e.consume(N),N===92?g:p}function g(N){return N===91||N===92||N===93?(e.consume(N),l++,p):p(N)}function b(N){return N===58?(e.enter("definitionMarker"),e.consume(N),e.exit("definitionMarker"),a.includes(o)||a.push(o),fn(e,v,"gfmFootnoteDefinitionWhitespace")):t(N)}function v(N){return n(N)}}function PW(e,n,t){return e.check(lg,n,e.attempt(jW,n,t))}function DW(e){e.exit("gfmFootnoteDefinition")}function IW(e,n,t){const i=this;return fn(e,a,"gfmFootnoteDefinitionIndent",5);function a(o){const l=i.events[i.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?n(o):t(o)}}function MW(e){let t=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:o,resolveAll:a};return t==null&&(t=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function a(l,f){let d=-1;for(;++d<l.length;)if(l[d][0]==="enter"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._close){let u=d;for(;u--;)if(l[u][0]==="exit"&&l[u][1].type==="strikethroughSequenceTemporary"&&l[u][1]._open&&l[d][1].end.offset-l[d][1].start.offset===l[u][1].end.offset-l[u][1].start.offset){l[d][1].type="strikethroughSequence",l[u][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},l[u][1].start),end:Object.assign({},l[d][1].end)},g={type:"strikethroughText",start:Object.assign({},l[u][1].end),end:Object.assign({},l[d][1].start)},b=[["enter",p,f],["enter",l[u][1],f],["exit",l[u][1],f],["enter",g,f]],v=f.parser.constructs.insideSpan.null;v&&Fa(b,b.length,0,Ub(v,l.slice(u+1,d),f)),Fa(b,b.length,0,[["exit",g,f],["enter",l[d][1],f],["exit",l[d][1],f],["exit",p,f]]),Fa(l,u-1,d-u+3,b),d=u+b.length-2;break}}for(d=-1;++d<l.length;)l[d][1].type==="strikethroughSequenceTemporary"&&(l[d][1].type="data");return l}function o(l,f,d){const u=this.previous,p=this.events;let g=0;return b;function b(N){return u===126&&p[p.length-1][1].type!=="characterEscape"?d(N):(l.enter("strikethroughSequenceTemporary"),v(N))}function v(N){const k=kh(u);if(N===126)return g>1?d(N):(l.consume(N),g++,v);if(g<2&&!t)return d(N);const E=l.exit("strikethroughSequenceTemporary"),T=kh(N);return E._open=!T||T===2&&!!k,E._close=!k||k===2&&!!T,f(N)}}}class RW{constructor(){this.map=[]}add(n,t,i){OW(this,n,t,i)}consume(n){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let t=this.map.length;const i=[];for(;t>0;)t-=1,i.push(n.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),n.length=this.map[t][0];i.push(n.slice()),n.length=0;let a=i.pop();for(;a;){for(const o of a)n.push(o);a=i.pop()}this.map.length=0}}function OW(e,n,t,i){let a=0;if(!(t===0&&i.length===0)){for(;a<e.map.length;){if(e.map[a][0]===n){e.map[a][1]+=t,e.map[a][2].push(...i);return}a+=1}e.map.push([n,t,i])}}function LW(e,n){let t=!1;const i=[];for(;n<e.length;){const a=e[n];if(t){if(a[0]==="enter")a[1].type==="tableContent"&&i.push(e[n+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[n-1][1].type==="tableDelimiterMarker"){const o=i.length-1;i[o]=i[o]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(t=!0);n+=1}return i}function FW(){return{flow:{null:{name:"table",tokenize:$W,resolveAll:zW}}}}function $W(e,n,t){const i=this;let a=0,o=0,l;return f;function f(F){let L=i.events.length-1;for(;L>-1;){const ie=i.events[L][1].type;if(ie==="lineEnding"||ie==="linePrefix")L--;else break}const Q=L>-1?i.events[L][1].type:null,ne=Q==="tableHead"||Q==="tableRow"?$:d;return ne===$&&i.parser.lazy[i.now().line]?t(F):ne(F)}function d(F){return e.enter("tableHead"),e.enter("tableRow"),u(F)}function u(F){return F===124||(l=!0,o+=1),p(F)}function p(F){return F===null?t(F):At(F)?o>1?(o=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),v):t(F):an(F)?fn(e,p,"whitespace")(F):(o+=1,l&&(l=!1,a+=1),F===124?(e.enter("tableCellDivider"),e.consume(F),e.exit("tableCellDivider"),l=!0,p):(e.enter("data"),g(F)))}function g(F){return F===null||F===124||qn(F)?(e.exit("data"),p(F)):(e.consume(F),F===92?b:g)}function b(F){return F===92||F===124?(e.consume(F),g):g(F)}function v(F){return i.interrupt=!1,i.parser.lazy[i.now().line]?t(F):(e.enter("tableDelimiterRow"),l=!1,an(F)?fn(e,N,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):N(F))}function N(F){return F===45||F===58?E(F):F===124?(l=!0,e.enter("tableCellDivider"),e.consume(F),e.exit("tableCellDivider"),k):O(F)}function k(F){return an(F)?fn(e,E,"whitespace")(F):E(F)}function E(F){return F===58?(o+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(F),e.exit("tableDelimiterMarker"),T):F===45?(o+=1,T(F)):F===null||At(F)?U(F):O(F)}function T(F){return F===45?(e.enter("tableDelimiterFiller"),I(F)):O(F)}function I(F){return F===45?(e.consume(F),I):F===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(F),e.exit("tableDelimiterMarker"),D):(e.exit("tableDelimiterFiller"),D(F))}function D(F){return an(F)?fn(e,U,"whitespace")(F):U(F)}function U(F){return F===124?N(F):F===null||At(F)?!l||a!==o?O(F):(e.exit("tableDelimiterRow"),e.exit("tableHead"),n(F)):O(F)}function O(F){return t(F)}function $(F){return e.enter("tableRow"),B(F)}function B(F){return F===124?(e.enter("tableCellDivider"),e.consume(F),e.exit("tableCellDivider"),B):F===null||At(F)?(e.exit("tableRow"),n(F)):an(F)?fn(e,B,"whitespace")(F):(e.enter("data"),q(F))}function q(F){return F===null||F===124||qn(F)?(e.exit("data"),B(F)):(e.consume(F),F===92?H:q)}function H(F){return F===92||F===124?(e.consume(F),q):q(F)}}function zW(e,n){let t=-1,i=!0,a=0,o=[0,0,0,0],l=[0,0,0,0],f=!1,d=0,u,p,g;const b=new RW;for(;++t<e.length;){const v=e[t],N=v[1];v[0]==="enter"?N.type==="tableHead"?(f=!1,d!==0&&(Rj(b,n,d,u,p),p=void 0,d=0),u={type:"table",start:Object.assign({},N.start),end:Object.assign({},N.end)},b.add(t,0,[["enter",u,n]])):N.type==="tableRow"||N.type==="tableDelimiterRow"?(i=!0,g=void 0,o=[0,0,0,0],l=[0,t+1,0,0],f&&(f=!1,p={type:"tableBody",start:Object.assign({},N.start),end:Object.assign({},N.end)},b.add(t,0,[["enter",p,n]])),a=N.type==="tableDelimiterRow"?2:p?3:1):a&&(N.type==="data"||N.type==="tableDelimiterMarker"||N.type==="tableDelimiterFiller")?(i=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],g=Nx(b,n,o,a,void 0,g),o=[0,0,0,0]),l[2]=t)):N.type==="tableCellDivider"&&(i?i=!1:(o[1]!==0&&(l[0]=l[1],g=Nx(b,n,o,a,void 0,g)),o=l,l=[o[1],t,0,0])):N.type==="tableHead"?(f=!0,d=t):N.type==="tableRow"||N.type==="tableDelimiterRow"?(d=t,o[1]!==0?(l[0]=l[1],g=Nx(b,n,o,a,t,g)):l[1]!==0&&(g=Nx(b,n,l,a,t,g)),a=0):a&&(N.type==="data"||N.type==="tableDelimiterMarker"||N.type==="tableDelimiterFiller")&&(l[3]=t)}for(d!==0&&Rj(b,n,d,u,p),b.consume(n.events),t=-1;++t<n.events.length;){const v=n.events[t];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=LW(n.events,t))}return e}function Nx(e,n,t,i,a,o){const l=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",f="tableContent";t[0]!==0&&(o.end=Object.assign({},hh(n.events,t[0])),e.add(t[0],0,[["exit",o,n]]));const d=hh(n.events,t[1]);if(o={type:l,start:Object.assign({},d),end:Object.assign({},d)},e.add(t[1],0,[["enter",o,n]]),t[2]!==0){const u=hh(n.events,t[2]),p=hh(n.events,t[3]),g={type:f,start:Object.assign({},u),end:Object.assign({},p)};if(e.add(t[2],0,[["enter",g,n]]),i!==2){const b=n.events[t[2]],v=n.events[t[3]];if(b[1].end=Object.assign({},v[1].end),b[1].type="chunkText",b[1].contentType="text",t[3]>t[2]+1){const N=t[2]+1,k=t[3]-t[2]-1;e.add(N,k,[])}}e.add(t[3]+1,0,[["exit",g,n]])}return a!==void 0&&(o.end=Object.assign({},hh(n.events,a)),e.add(a,0,[["exit",o,n]]),o=void 0),o}function Rj(e,n,t,i,a){const o=[],l=hh(n.events,t);a&&(a.end=Object.assign({},l),o.push(["exit",a,n])),i.end=Object.assign({},l),o.push(["exit",i,n]),e.add(t+1,0,o)}function hh(e,n){const t=e[n],i=t[0]==="enter"?"start":"end";return t[1][i]}const BW={name:"tasklistCheck",tokenize:qW};function UW(){return{text:{91:BW}}}function qW(e,n,t){const i=this;return a;function a(d){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?t(d):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),o)}function o(d){return qn(d)?(e.enter("taskListCheckValueUnchecked"),e.consume(d),e.exit("taskListCheckValueUnchecked"),l):d===88||d===120?(e.enter("taskListCheckValueChecked"),e.consume(d),e.exit("taskListCheckValueChecked"),l):t(d)}function l(d){return d===93?(e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),f):t(d)}function f(d){return At(d)?n(d):an(d)?e.check({tokenize:VW},n,t)(d):t(d)}}function VW(e,n,t){return fn(e,i,"whitespace");function i(a){return a===null?t(a):n(a)}}function HW(e){return mE([gW(),_W(),MW(e),FW(),UW()])}const GW={};function Ro(e){const n=this,t=e||GW,i=n.data(),a=i.micromarkExtensions||(i.micromarkExtensions=[]),o=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),l=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);a.push(HW(t)),o.push(fW()),l.push(hW(t))}const YW=e=>{if(!e)return"Unknown Date";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},WW=e=>{switch(e){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:e,className:"status-badge"}}},I0=({title:e,items:n,renderItemContent:t,headerAction:i,isLoading:a,loadingText:o,noDataText:l,onDeleteItem:f,onEditLabOrder:d,onSaveLabOrder:u,onCancelEditLabOrder:p,onLabOrderTestChange:g,onLabOrderStatusChange:b,onEditPharmacyOrder:v,onPrintUnavailablePrescription:N,onBillLabOrder:k,onUpdateLabOrderStatus:E,onEnterLabReport:T,onViewLabReport:I,labInventory:D=[],isSavingLabOrder:U=!1,expandedLabReports:O={},toggleLabReport:$=()=>{}})=>{const B=w.useMemo(()=>{const H={};n.forEach(L=>{if(isNaN(L.date.getTime())){H["Unknown Date"]||(H["Unknown Date"]=[]),H["Unknown Date"].push(L);return}const Q=YW(L.originalDateString);H[Q]||(H[Q]=[]),H[Q].push(L)});const F=Object.keys(H);return F.sort((L,Q)=>{if(L==="Unknown Date")return 1;if(Q==="Unknown Date")return-1;try{const ne=new Date(L.split(" ").reverse().join(" ")),ie=new Date(Q.split(" ").reverse().join(" "));if(!isNaN(ne.getTime())&&!isNaN(ie.getTime()))return ie.getTime()-ne.getTime()}catch{}return Q.localeCompare(L)}),F.map(L=>({date:L,items:H[L]}))},[n]),q=["pending","billed","collected","processing","report_ready","completed","cancelled","reported"];return r.jsxs("div",{className:"ai-context-section",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h4",{className:"ai-context-section-title mb-2 pb-1",children:e}),i]}),a&&r.jsx("p",{className:"ai-context-text italic",children:o}),!a&&n.length===0&&r.jsx("p",{className:"ai-context-text italic",children:l}),!a&&n.length>0&&r.jsx("div",{className:"space-y-3",children:B.map(({date:H,items:F})=>r.jsxs("div",{children:[r.jsx("h5",{className:"grouped-history-date",children:H}),r.jsx("div",{className:"space-y-1 grouped-history-item-container",children:F.map((L,Q)=>r.jsxs("div",{className:"grouped-history-item ai-context-item flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center w-full",children:[r.jsx("div",{className:"flex-grow mr-2 ai-context-text",children:t(L,Q,O,$)}),r.jsxs("div",{className:"flex items-center space-x-1",children:[L.type==="Lab Order"&&!L.data.isEditing&&d&&r.jsx("button",{onClick:()=>d(L.data.id),className:"text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-100 focus:outline-none focus:ring-1 focus:ring-blue-400",title:"Edit this lab order",disabled:U,children:r.jsx(xd,{size:14})}),L.type==="Lab Order"&&L.data.isEditing&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>u&&u(L.data.id,L.data.editedTests,L.data.editedStatus),className:"text-green-600 hover:text-green-800 p-1 rounded hover:bg-green-100 focus:outline-none focus:ring-1 focus:ring-green-400",title:"Save lab order changes",disabled:U,children:r.jsx(jd,{size:14})}),r.jsx("button",{onClick:()=>p&&p(L.data.id),className:"text-gray-600 hover:text-gray-800 p-1 rounded hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-gray-400",title:"Cancel editing",disabled:U,children:r.jsx(Sr,{size:14})})]}),L.type==="Lab Order"&&r.jsxs("div",{className:"lab-table-actions",children:[L.data.status==="pending"&&k&&(()=>{const ne=L.data.tests.reduce((ie,oe)=>ie+(Number(oe.price)||0),0).toFixed(2);return r.jsxs("button",{onClick:()=>k(L.data),className:"lab-action-button btn-bill",title:`Pay total of ${ne}`,children:["Pay (",ne,")"]})})(),L.data.status==="billed"&&E&&r.jsx("button",{onClick:()=>E(L.data.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.data.status==="collected"&&E&&r.jsx("button",{onClick:()=>E(L.data.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.data.status==="processing"||L.data.status==="report_ready"||L.data.status==="reported")&&T&&r.jsx("button",{onClick:()=>T(L.data),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.data.status==="report_ready"||L.data.status==="reported")&&E&&r.jsx("button",{onClick:()=>E(L.data.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.data.status==="completed"||L.data.status==="report_ready"||L.data.status==="reported")&&I&&r.jsx("button",{onClick:()=>I(L.data),className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]}),L.type==="Pharmacy Order"&&L.data.status==="pending"&&v&&r.jsx("button",{onClick:()=>v(L.data.id),className:"text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-100 focus:outline-none focus:ring-1 focus:ring-blue-400",title:"Edit this pharmacy order",disabled:U,children:r.jsx(xd,{size:14})}),L.type==="Pharmacy Order"&&L.data.prescriptionForUnavailableDrugs&&N&&r.jsx("button",{onClick:()=>N(L.data.prescriptionForUnavailableDrugs,`Prescription for Order ${L.data.id}`),className:"text-purple-600 hover:text-purple-800 p-1 rounded hover:bg-purple-100 focus:outline-none focus:ring-1 focus:ring-purple-400",title:"Print Prescription for Unavailable Drugs",disabled:U,children:r.jsx(Nd,{size:14})}),L.type==="Pharmacy Order"&&L.data.status==="pending"&&f&&r.jsx("button",{onClick:()=>f({type:L.type,data:L.data}),className:"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-100 focus:outline-none focus:ring-1 focus:ring-red-400",title:"Delete this pending pharmacy order",disabled:U,children:r.jsx(Sr,{size:14})}),f&&["Complaint","Lab Order","Lab Report"].includes(L.type)&&r.jsx("button",{onClick:()=>f({type:L.type,data:L.data}),className:"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-100 focus:outline-none focus:ring-1 focus:ring-red-400",title:`Delete this ${L.type.toLowerCase()}`,disabled:U,children:r.jsx(Sr,{size:14})})]})]}),L.type==="Lab Order"&&L.data.isEditing&&r.jsxs("div",{className:"lab-order-edit-form mt-2 w-full",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status:"}),r.jsx("select",{value:L.data.editedStatus||L.data.status,onChange:ne=>b&&b(L.data.id,ne.target.value),className:"form-select block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:U,children:q.map(ne=>r.jsx("option",{value:ne,children:ne.replace(/_/g," ")},ne))})]}),r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tests:"}),L.data.editedTests.map((ne,ie)=>r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsxs("select",{value:ne.id,onChange:oe=>{const Y=D.find(z=>String(z.id)===oe.target.value);Y&&(g&&g(L.data.id,ie,"id",Y.id),g&&g(L.data.id,ie,"name",Y.name),g&&g(L.data.id,ie,"price",Y.price))},className:"form-select block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:U,children:[r.jsx("option",{value:"",children:"Select Test"}),D.map(oe=>r.jsxs("option",{value:oe.id,children:[oe.name," (",oe.price,")"]},oe.id))]}),r.jsx("button",{onClick:()=>{const oe=L.data.editedTests.filter((Y,z)=>z!==ie);g&&g(L.data.id,-1,"remove",oe)},className:"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-100 focus:outline-none focus:ring-1 focus:ring-red-400",title:"Remove test",disabled:U,children:r.jsx(Sr,{size:14})})]},ie)),r.jsx("button",{onClick:()=>{g&&g(L.data.id,-1,"add",{id:"",name:"",price:0})},className:"button-secondary mt-2 text-xs",disabled:U,children:"Add Test"})]})]},`${L.type}-${L.originalDateString}-${Q}`))})]},H))})]})},QW="_modalOverlay_1yna4_3",JW="_modalContent_1yna4_29",KW="_modalHeader_1yna4_57",XW="_modalTitle_1yna4_75",ZW="_modalCloseButton_1yna4_87",eQ="_modalBody_1yna4_115",tQ="_errorText_1yna4_129",nQ="_formGroup_1yna4_147",iQ="_inputField_1yna4_171",rQ="_searchResultsCard_1yna4_213",aQ="_searchResultsList_1yna4_241",sQ="_searchResultItem_1yna4_253",oQ="_searchResultPrice_1yna4_289",lQ="_selectedTestsCard_1yna4_299",cQ="_selectedTestsHeader_1yna4_319",uQ="_noTestsMessage_1yna4_335",dQ="_selectedTestsList_1yna4_351",fQ="_selectedTestItem_1yna4_363",hQ="_selectedTestName_1yna4_387",pQ="_selectedTestPrice_1yna4_399",mQ="_removeTestButton_1yna4_411",gQ="_totalAmount_1yna4_437",yQ="_modalFooter_1yna4_455",xQ="_button_1yna4_473",bQ="_buttonPrimary_1yna4_491",vQ="_buttonSecondary_1yna4_513",Fn={modalOverlay:QW,modalContent:JW,modalHeader:KW,modalTitle:XW,modalCloseButton:ZW,modalBody:eQ,errorText:tQ,formGroup:nQ,inputField:iQ,searchResultsCard:rQ,searchResultsList:aQ,searchResultItem:sQ,searchResultPrice:oQ,selectedTestsCard:lQ,selectedTestsHeader:cQ,noTestsMessage:uQ,selectedTestsList:dQ,selectedTestItem:fQ,selectedTestName:hQ,selectedTestPrice:pQ,removeTestButton:mQ,totalAmount:gQ,modalFooter:yQ,button:xQ,buttonPrimary:bQ,buttonSecondary:vQ},wQ=({isOpen:e,onClose:n,patientId:t,labInventory:i,fetchPendingLabOrdersData:a})=>{const[o,l]=w.useState([]),[f,d]=w.useState(""),[u,p]=w.useState([]),[g,b]=w.useState(null),[v,N]=w.useState(!1);w.useEffect(()=>{if(!f){p([]);return}const I=f.toLowerCase();p(i.filter(D=>D.name.toLowerCase().includes(I)||D.description&&D.description.toLowerCase().includes(I)).slice(0,10))},[f,i]);const k=async()=>{if(!t){b("Patient ID is missing.");return}if(o.length===0){b("Please select at least one lab test.");return}N(!0),b(null);try{const I={patient_id:t,tests:o.map(U=>({id:U.id,name:U.name,price:U.price}))},D=await pe("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!D.ok){const U=await D.json().catch(()=>({}));throw new Error(U.message||`Failed to create lab order: ${D.statusText}`)}await D.json(),a(t),n(),l([]),d("")}catch(I){b(`Lab Order Creation Error: ${I.message}`)}finally{N(!1)}},E=I=>{if(o.some(D=>D.id===I.id)){b(`${I.name} is already in the order.`),setTimeout(()=>b(null),3e3),d(""),p([]);return}l(D=>[...D,{...I}]),d(""),p([])},T=I=>{l(D=>D.filter(U=>U.id!==I))};return e?r.jsx("div",{className:Fn.modalOverlay,children:r.jsxs("div",{className:Fn.modalContent,children:[r.jsxs("div",{className:Fn.modalHeader,children:[r.jsx("h3",{className:Fn.modalTitle,children:"Create New Lab Order"}),r.jsx("button",{onClick:n,className:Fn.modalCloseButton,children:r.jsx(ci,{size:20})})]}),r.jsxs("div",{className:Fn.modalBody,children:[g&&r.jsx("div",{className:Fn.errorText,children:g}),r.jsxs("div",{className:Fn.formGroup,style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",children:"Add Lab Test"}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search available lab tests...",value:f,onChange:I=>d(I.target.value),className:Fn.inputField}),f&&u.length>0&&r.jsx("div",{className:Fn.searchResultsCard,children:r.jsx("ul",{className:Fn.searchResultsList,children:u.map(I=>r.jsxs("li",{onClick:()=>E(I),className:Fn.searchResultItem,children:[r.jsx("span",{children:I.name}),r.jsxs("span",{className:Fn.searchResultPrice,children:["(",parseFloat(String(I.price)).toFixed(2),")"]})]},I.id))})})]}),r.jsxs("div",{className:Fn.selectedTestsCard,children:[r.jsx("h4",{className:Fn.selectedTestsHeader,children:"Selected Tests"}),o.length===0?r.jsx("p",{className:Fn.noTestsMessage,children:"No tests added yet."}):r.jsx("ul",{className:Fn.selectedTestsList,children:o.map(I=>r.jsxs("li",{className:Fn.selectedTestItem,children:[r.jsx("span",{className:Fn.selectedTestName,children:I.name}),r.jsxs("span",{className:Fn.selectedTestPrice,children:["",parseFloat(String(I.price)).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>T(String(I.id)),className:Fn.removeTestButton,title:"Remove Test",children:r.jsx(Sr,{size:16})})]},I.id))})]}),o.length>0&&r.jsxs("div",{className:Fn.totalAmount,children:["Total: ",o.reduce((I,D)=>I+parseFloat(String(D.price)),0).toFixed(2)]})]}),r.jsxs("div",{className:Fn.modalFooter,children:[r.jsx("button",{type:"button",onClick:n,className:`${Fn.button} ${Fn.buttonSecondary}`,children:" Cancel "}),r.jsxs("button",{type:"button",onClick:k,disabled:o.length===0||v,className:`${Fn.button} ${Fn.buttonPrimary} ${o.length===0||v?Fn.buttonDisabled:""}`,children:[" ",v?"Saving...":"Create Lab Order"," "]})]})]})}):null},Cx=e=>{if(!e)return"";let n=e.toLowerCase();return n=n.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),n=n.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),n=n.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),n},Om=(e,n)=>{if(!e||!n||n.length===0)return;const t=Cx(e);let i=n.find(l=>Cx(l.name)===t);if(i)return i;let a=n.find(l=>Cx(l.name).includes(t));if(a)return a;let o=n.find(l=>t.includes(Cx(l.name)));if(o)return o},SQ=`You are an expert OPD (Outpatient Department) medical assistant for a Doctor in a clinic in India. You will receive all the medical data of the patient including complaints (history), labs, pharmacy orders, etc., along with their date and time. Your primary goal is to assist the doctor and analyze patient chief complaints (Co), provide a structured clinical assessment including lab test suggestions (Lx), differential diagnoses (Dx), and a treatment plan (Tx). You have access to tools (actions) to order lab tests and pharmacy items, and update patient details.



**1. Definitions:**
   - Co: Chief complaints
   - Pt: Patient (assume living in India)
   - Lx: Laboratory tests
   - Dx: Differential Diagnosis
   - Tx: Treatment Plan

**2. Workflow:**
   - Analyze Co, generate Lx, Dx, and Tx sections as described below.
   - **Prioritization for Orders:** Always prioritize using \`edit_pharmacy_order\` or \`edit_lab_order\` if there are existing pending orders for the patient, before considering \`create_pharmacy_order\` or \`create_lab_order\`.
   - using edit_lab_order edits the lab order with the given serial numnber use to add new tests to the existing order or remove the tests from existing order, marking the status affects all tests in the order not only the test,always use this tool if there are pending lab orders instead of creating new orders.
   - using edit_pharmacy_order edits the pharmacy order with the given serial numnber to add new items to the existing order, update existing items, or remove items (either by \`items_to_remove\` or by setting \`quantity\` to 0). Always use this tool if there are pending pharmacy orders instead of creating new orders.
   - If your Lx section suggests tests from the inventory, use the \`create_lab_order\` action, but only for tests that are both clinically required and have not already been ordered or are still pending. Skip tests that are already ordered and in pending.
   - If your Tx section prescribes medications, use the \`create_pharmacy_order\` action  but only for medications that are clinically required and have not already been prescribed or are still pending. Skip medications that are already dispensed or already ordered.
   - If your Tx section prescribes medications that are *not* available in the inventory, use the \`prescription_for_unavailable_drugs\` parameter within the \`create_pharmacy_order\` action to specify the prescription details for these unavailable drugs.
   - When ordering pharmacy items, specify both \`pack_quantity\` (number of full packs) and \`loose_quantity\` (number of individual units). The system will handle the conversion based on the drug's unit/pack size.
   - **Patient Details Management:** Always store or update patient name, age, sex, and phone number using the \`update_patient_details\` action. If patient name, age, or sex is received as 'New Patient - Direct Entry', 'N/A', or blank, treat it as missing data; if the user input provides anything resembling a name, age, or sex (e.g., shiva 25m, robin 50m, priya 19f), update them using the \`update_patient_details\` action. If details are missing, you can ask the user for the missing details using the \`ask_followup_question\` action.
   - Always update new complaints of the patient using the \`add_complaint_history\` action.
   - If you generate a concise summary of the patient's current situation based on the interaction and history, use the \`update_case_summary\` action to save it.
   - Remember, when you use \`update_case_summary\`, the previous case summary will be replaced by the new one, so you can use it like a short-term memory to store other stuff that **keeps changing**, like the current treatment plan, plan of action, active problems, or current vitals, etc.
   - When you use \`add_complaint_history\`, it will add the complaint to the previous ones. You will be given all the previous complaints back in every query, so you can use it to store other long-term facts that do **not change**, like the history of a chronic illness, surgical history, allergies, or social history, etc.
   - while placing or editing a pharmacy order make sure to set the \`pack_quantity\` and \`loose_quantity\` right.
   - Use the \`update_clinic_ai_memory\` action to store or update **various types of clinic-wide persistent information in a concise way**. This can include 'summaries of common patient encounters'+'summeries of previous **Clinic-wide AI Memory**'(e.g., 'Patient X, 50m, chronic gastritis, last visit YYYY-MM-DD, prescribed Z, follow-up in N days'+'**Clinic-wide AI Memory** summary'), notes on local health trends, common diagnostic patterns observed in the clinic, specific operational protocols. This memory is shared across all interactions for the clinic and helps tailor responses to its specific context over time.
**3.**Multiple Actions:** You can perform multiple actions (like ordering labs AND meds, adding complaints, updating patient information, and asking a follow-up question) in a single response by including multiple action objects within the main JSON array.


**4. Chief Complaints (Co):**
   - Analyze the provided chief complaints.
   - Present them in a table with two columns: 'Relevant Complaint (Score 8-10)' and 'Irrelevant Complaint (Score 0-7)', based on clinical relevance.

**5. Lab Tests (Lx):**
   - Suggest the most probable basic lab tests based on the clinical picture, ordered by likelihood.
   - If a basic test is positive/abnormal, suggest relevant advanced tests.
   - **Inventory Check:** Compare suggested tests against the provided inventory list.
   - **Table 1: Available Lab Tests:** Present tests *available* in the inventory in a table with columns: '**Clinical Importance (High/Medium/Low)**', 'Lab Test'. If suggesting tests from this table, prepare to use the \`create_lab_order\` tool in your response.
   - **Table 2: Unavailable Lab Tests:** Present tests *not available* in the inventory in a separate table with columns: '**Clinical Importance (High/Medium/Low)**', 'Unavailable Basic Test'. Clearly state these are not orderable via the tool (generate Table 2 only when required tests are unavailable).

**6. Differential Diagnosis (Dx):**
   - List potential differential diagnoses.
   - Provide a confidence score (0-10) for each.
   - Present in a table with columns: 'Differential Diagnosis' and 'Confidence Score (0-10)'.

**7. Treatment Plan (Tx):**
   - Create a structured treatment plan including ideal medications based on the diagnosis.
   - **Inventory Check:** Compare prescribed medications against the provided inventory list.
   - **Table 1: Available Medications:** Present medications *available* in the inventory in a table with columns: 'Time Frame' (from and to dates), 'Treatment Goal', 'Intervention', 'Medication Type', 'Drug Form', 'Drug Name', 'Regimen (Dose, Freq)', 'Duration'. Before using the \`create_pharmacy_order\` tool, check if an order for the same drug has already been placed for this patient today. If an order already exists for today, do *not* create a duplicate order. If no order exists for today, prepare to use the \`create_pharmacy_order\` tool in your response.
   - **Table 2: Unavailable Medications:** Present medications *not available* in the inventory in a separate table with columns: 'Unavailable Drug Name', 'Ideal Regimen', 'Reasoning/Indication', '**Clinical Importance (High/Medium/Low)**', 'Suggested Available Substitute (from inventory, if possible)'. Clearly state these are not orderable via the tool (generate Table 2 only when required medications are unavailable in the inventory).

**8. Tools / Actions:**
   When you need to perform actions like ordering tests/meds, updating patient info, or adding history, use the following JSON array format. The response should ONLY contain this JSON array, nothing else.

   ****STRICT JSON****>>>>>>\`\`\`json
[
  { "action": "create_pharmacy_order", "items": [ { "name": "Drug Name", "pack_quantity": number, "loose_quantity": number, "tabletsPerDay": number | null, "numberOfDays": number | null, "directions_to_use": "string | null" } ], "prescription_for_unavailable_drugs": "string | null" },
  { "action": "edit_pharmacy_order", "serialNumber": number, "items": [ { "name": "Drug Name", "pack_quantity": number, "loose_quantity": number, "tabletsPerDay": number | null, "numberOfDays": number | null, "directions_to_use": "string | null" } ], "items_to_remove": [ { "drug_id": number | null, "name": "Drug Name" } ], "status": "pending" | "billed" | "dispensed" | "cancelled", "prescription_for_unavailable_drugs": "string | null" },
  { "action": "create_lab_order", "tests": [ { "name": "Test Name" } ] },
  { "action": "edit_lab_order", "serialNumber": number, "tests": [ { "name": "Test Name" } ], "items_to_remove": [ { "id": number | string | null, "name": "Test Name" } ], "status": "pending" | "billed" | "collected" | "processing" | "report_ready" | "completed" | "cancelled" | "reported" },
  { "action": "add_complaint_history", "complaint": "Specific past complaint text..." },
  { "action": "update_patient_details", "name": "New Name (optional)", "age": number (optional), "gender": "M" | "F" | "O" | null (optional), "phone_number": "string (optional)" },
  { "action": "update_case_summary", "summary": "Concise summary text..." },
  { "action": "update_clinic_ai_memory", "memory_content": "New clinic-wide AI memory content..." }
]
\`\`\`

   - **Multiple Actions in One Response:** You can include multiple action objects within this single JSON array if several actions are required based on your analysis (e.g., adding history AND ordering labs).
   - **Prioritization Within the Array:** If including multiple actions, order them within the array according to this priority:
     1. \`add_complaint_history\`
     2. \`update_patient_details\`
     3. \`update_case_summary\`
     4. \`update_clinic_ai_memory\`
     5. \`create_lab_order\`
     6. \`edit_lab_order\`
     7. \`create_pharmacy_order\`
     8. \`edit_pharmacy_order\`
   - **Example (Multiple Actions):**
     \`\`\`json
     [
       { "action": "add_complaint_history", "complaint": "Patient also reports mild fever since yesterday." },
       { "action": "create_lab_order", "tests": [ { "name": "CBC" } ] }
     ]
     \`\`\`

   - **\`ask_followup_question\`**: Use this *separate* tool format (a single JSON object, NOT inside the array) only when you need clarification or missing information that prevents you from completing the assessment or required actions.
     \`\`\`json
     {
       "action": "ask_followup_question",
       "question": "Your clear, specific question here.",
       "options": ["Optional Answer 1", "Optional Answer 2"] // Optional: Provide 2-5 choices
     }
     \`\`\`
     *Description:* Ask the user a question to gather additional information needed to complete the task. This tool should be used when you encounter ambiguities, need clarification, or require more details to proceed effectively. It allows for interactive problem-solving by enabling direct communication with the user. Use this tool judiciously to maintain a balance between gathering necessary information and avoiding excessive back-and-forth.
     *Parameters:*
       - question: (required) The question to ask the user. This should be a clear, specific question that addresses the information you need.
       - options: (optional) An array of 2-5 options for the user to choose from. Each option should be a string describing a possible answer. You may not always need to provide options, but it may be helpful in many cases where it can save the user from having to type out a response manually.


**Important:**
- Ensure all tables are clearly formatted using Markdown.
- Strictly adhere to the inventory constraints for labs and medications when deciding whether to use \`create_lab_order\` or \`create_pharmacy_order\`.
- When using actions, provide ONLY the JSON array (or the single JSON object for \`ask_followup_question\`) as the *very last* part of your response, after all other content including tables. Do not include any other text after the JSON.

**Plan Mode:**
When the user asks a question about a patient's condition or general medical topics (not entering new medical data), respond in PLAN MODE. In this mode, focus on answering the user's inquiry, clarifying their request, brainstorming ideas, or architecting a solution (like exploring treatment options). Ask clarifying questions if needed. Present detailed plans or explanations **using clear table formats and markdown (like bolding) for easy readability**. Engage in back-and-back discussion to finalize details. Do not use action tools (\`create_lab_order\`, \`create_pharmacy_order\`, \`add_complaint_history\`, \`update_patient_details\`) while in PLAN MODE).`,Oj="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",NQ="gemini-2.5-flash";async function CQ(){const e=i2();if(!e)return console.warn("No auth token found, using default Gemini API key."),Oj;try{const t=(await mi.get("/api/clinics/settings",{headers:{Authorization:`Bearer ${e}`}})).data.gemini_api_key;if(t)return t}catch(n){console.error("Failed to fetch clinic-specific Gemini API key:",n)}return console.warn("Clinic-specific Gemini API key not found or failed to fetch, using default."),Oj}let M0=null;async function jQ(){if(!M0){const e=await CQ();M0=new xk({apiKey:e})}return M0}async function _Q(e,n){const{query:t,currentDateTime:i,patientName:a,patientAge:o,patientGender:l,case_summary:f,case_summary_last_updated:d,clinic_ai_memory:u,clinic_ai_memory_last_updated:p,clinic_wide_system_prompt:g,labHistory:b,pharmacyOrders:v,pastComplaints:N,pharmacyInventory:k,labInventory:E}=e;let T=`Patient Complaint: ${t}`;if(f&&(T+=`

--- Case Summary (Provided by Doctor) ---
${f}`,d))try{const F=new Date(d).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});T+=`
(Last Updated: ${F})`}catch{console.warn(`Could not format case_summary_last_updated: ${d}`),T+=`
(Last Updated: ${d})`}if(a&&(T+=`

Patient Name: ${a}`),o!=null&&(T+=`
Patient Age: ${o}`),l&&(T+=`
Patient Gender: ${l}`),i)try{const F=new Date(i).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});T+=`

Current Interaction Time: ${F}`}catch{console.warn(`Could not format currentDateTime: ${i}`),T+=`

Current Interaction Time: ${i}`}if(u&&(T+=`

--- Clinic-wide AI Memory/Context ---
${u}`,p))try{const F=new Date(p).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});T+=`
(Last Updated: ${F})`}catch{console.warn(`Could not format clinic_ai_memory_last_updated: ${p}`),T+=`
(Last Updated: ${p})`}let I="";b&&Array.isArray(b)&&b.length>0&&(I=`

--- Lab History (Orders & Reports) ---
`,b.forEach(F=>{let L="Unknown Date";try{L=new Date(F.orderDate).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date for lab order: ${F.orderDate}`)}if(I+=`
Order #${F.serialNumber} Date: ${L} (Status: ${F.status})
`,I+=`Tests: ${F.tests.map(Q=>Q.name).join(", ")}
`,F.report){let Q="Unknown Date";try{Q=new Date(F.report.reportDate).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date for lab report: ${F.report.reportDate}`)}I+=`  -> Report Date: ${Q}
`,F.report.tests&&Array.isArray(F.report.tests)?(I+=`     Findings:
`,F.report.tests.forEach(ne=>{I+=`       - Test: ${ne.testName}
`,ne.parameters&&Array.isArray(ne.parameters)&&ne.parameters.forEach(ie=>{I+=`         - ${ie.name}: ${ie.value} (Normal: ${ie.normal_range})
`})})):(I+=`     Findings: ${F.report.reportContent||"N/A"}
`,F.report.error&&(I+=`     Note: ${F.report.error}
`))}I+=`---
`}),T+=I);let D="";v&&Array.isArray(v)&&v.length>0&&(D=`

--- Recent Pharmacy Orders ---
`,v.forEach(F=>{let L="Unknown Date/Time";try{L=new Date(F.date).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date/time for pharmacy order: ${F.date}`)}D+=`
Order #${F.serialNumber} Date/Time: ${L} (Status: ${F.status})
`,D+=`Prescribed By: ${F.prescribedBy||"N/A"}
`,F.dispensedBy&&(D+=`Dispensed By: ${F.dispensedBy}
`),D+=`Medications:
`,F.medications.forEach(Q=>{D+=`  - ${Q.name} (Qty: ${Q.quantity}`,Q.tabletsPerDay&&(D+=`, ${Q.tabletsPerDay}/day`),Q.numberOfDays&&(D+=` for ${Q.numberOfDays} days`),D+=`)
`}),F.prescriptionForUnavailableDrugs&&(D+=`  Prescription for Unavailable Drugs: ${F.prescriptionForUnavailableDrugs}
`),D+=`---
`}),T+=D);let U="";N&&Array.isArray(N)&&N.length>0&&(U=`

--- Past Complaints History ---
`,N.forEach(F=>{let L="Unknown Date/Time";try{L=new Date(F.createdAt).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date/time for past complaint: ${F.createdAt}`)}U+=`
Date/Time: ${L}
Complaint: ${F.complaint||"N/A"}
---
`}),T+=U);let O="";k&&Array.isArray(k)&&k.length>0&&(O=`

--- Current Pharmacy Inventory (Stock Levels) ---
`,k.forEach(F=>{O+=`- ${F.name} (Pack: ${F.unit??"N/A"}): ${F.quantity_in_stock??"N/A"}
`}),T+=O);let $="";E&&Array.isArray(E)&&E.length>0&&($=`

--- Available Lab Tests ---
`,E.forEach(F=>{$+=`- ${F.name} (Price: ${F.price??"N/A"})
`}),T+=$);const B=[{text:SQ}];g&&g.trim()!==""&&B.push({text:`--- Additional Clinic-Specific Instructions ---
${g}`});const q=[{text:T}];if(n){const F=new FileReader,L=await new Promise((Q,ne)=>{F.onloadend=()=>{typeof F.result=="string"?Q(F.result.split(",")[1]):ne(new Error("Failed to read image file as base64."))},F.onerror=ne,F.readAsDataURL(n)});q.push({inlineData:{mimeType:n.type,data:L}})}const H=[];B.length>0&&H.push({role:"user",parts:B}),H.push({role:"user",parts:q});try{const F={model:NQ,contents:H,generationConfig:{temperature:.7,maxOutputTokens:1024,responseMimeType:"text/plain"}},Q=await(await jQ()).models.generateContentStream(F);let ne="";for await(const ie of Q)if(ie&&typeof ie.text=="function"){const oe=ie.text;oe&&(ne+=oe)}else ie&&ie.candidates&&ie.candidates[0]&&ie.candidates[0].content&&ie.candidates[0].content.parts&&ie.candidates[0].content.parts[0]&&ie.candidates[0].content.parts[0].text&&(ne+=ie.candidates[0].content.parts[0].text);if(ne&&ne.trim()!=="")return ne.trim();throw console.error("Empty or invalid response received from Gemini API stream."),new Error("Failed to get suggestion from AI (Gemini). Empty or invalid stream response.")}catch(F){console.error("Error calling Gemini API:",F);let L="Failed to get suggestion from Gemini.";throw F.message&&(L=`Error processing Gemini request: ${F.message}`),new Error(L)}}const Lj=e=>{if(!e)return 1;const n=e.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return n?parseInt(n[1],10):1},kQ=w.forwardRef(({recordId:e,patientId:n,patientDetails:t,caseSummary:i,caseSummaryUpdatedAt:a,clinicSettings:o,userMessages:l,selectedImageFile:f,pendingLabOrders:d,labReports:u,pastComplaints:p,pharmacyOrders:g,pharmacyInventory:b,labInventory:v,setCurrentComplaint:N,setAiResponse:k,setAiResponseText:E,setAiResponseJsonString:T,setShowAiJsonDetails:I,setIsLoadingAi:D,setAiError:U,setIsSubmittingAiOrder:O,setAiOrderSubmissionStatus:$,setIsSubmittingAiLabOrder:B,setAiLabOrderSubmissionStatus:q,setIsSubmittingAiComplaint:H,setAiComplaintSubmissionStatus:F,setIsUpdatingCaseSummary:L,setAiCaseSummaryUpdateStatus:Q,setCaseSummary:ne,setCaseSummaryUpdatedAt:ie,setIsUpdatingAiMemoryByAI:oe,setAiMemoryUpdateByAIStatus:Y,setFollowUpQuestion:z,setFollowUpOptions:re,setError:X,setIsSavingAiResponse:P,setSaveAiResponseError:te,fetchPharmacyOrdersData:se,fetchPendingLabOrdersData:M,fetchLabReportsData:fe,fetchPastComplaintsData:we,fetchPatientDetails:ce,setClinicSettings:Le,setEditedAiMemory:Ne,handleDeleteItem:nt},ut)=>{let je;const ye=async(Ve,it,Ke,rt=0)=>{let Ft;const ve=["AI response did not contain a recognized function call","AI response did not result in a recognized or performed function call"].some(qe=>{var We;return(We=it.message)==null?void 0:We.includes(qe)});Ke&&ve?Ft=`AI Error: ${it.message}

${Ke}`:(Ft=`I encountered a frontend error while trying to execute the '${Ve}' function. The error message is: "${it.message}". Based on this error, please analyze what went wrong and either correct the function call and try again, or explain the problem.`,(Ve==="create_pharmacy_order"||Ve==="edit_pharmacy_order")&&(Ft+=`

IMPORTANT: When ordering medication, please first check if the medication ordered matches the exact name given in the inventory. If the name itself is not given in the inventory, you can also use 'prescription_for_unavailable_drugs' to write a prescription for unavailable drugs.`),Ke&&(Ft+=`

The original AI response that caused the error was:
\`\`\`
${Ke}
\`\`\``)),await je(Ft,rt+1)},Ae=async(Ve,it)=>{$(null),q(null),F(null),Q(null),Y(null),z(null),re([]),X(null);let Ke=!1,rt=null;const Ft=/```json\s*([\s\S]*?)\s*```/,_t=Ve.match(Ft);if(_t&&_t[1])rt=_t[1];else{const ve=Ve.trim();if(ve.startsWith("{")&&ve.endsWith("}"))rt=ve;else if(ve.startsWith("[")&&ve.endsWith("]"))rt=ve;else throw new Error("AI response did not contain a recognized function call.")}if(rt)try{const ve=JSON.parse(rt),qe=Array.isArray(ve)?ve:[ve],We=[];let ze=null;for(const J of qe){if(J.action==="ask_followup_question"){ze=J,Ke=!0;continue}J.action==="update_clinic_ai_memory"&&typeof J.memory_content=="string"?(Ke=!0,We.push((async()=>{oe(!0),Y("Processing AI mem...");try{if(!o)throw new Error("Clinic settings not loaded, cannot update AI memory.");const G={...o,aiMemory:J.memory_content.trim(),admissionCharge:o.admissionCharge,perDayCharge:o.perDayCharge,otherCharges:o.otherCharges,clinicWideSystemPrompt:o.clinicWideSystemPrompt},K=await pe("/api/clinics/settings",{method:"PUT",body:JSON.stringify(G)});if(!K.ok){const Ee=await K.json().catch(()=>({}));throw new Error(Ee.message||`AI-triggered clinic memory update failed: ${K.statusText}`)}const Se=await K.json();Le({admissionCharge:parseFloat(Se.settings.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(Se.settings.perDayCharge||0).toFixed(2),otherCharges:parseFloat(Se.settings.otherCharges||0).toFixed(2),aiMemory:Se.settings.aiMemory||"",aiMemoryUpdatedAt:Se.settings.aiMemoryUpdatedAt||null,clinicWideSystemPrompt:Se.settings.clinicWideSystemPrompt||"",clinicWideSystemPromptUpdatedAt:Se.settings.clinicWideSystemPromptUpdatedAt||null}),Ne(Se.settings.aiMemory||""),Y("AI mem updated!")}catch(G){await ye(J.action,G,Ve,it)}finally{oe(!1)}})())):J.action==="create_pharmacy_order"&&(Array.isArray(J.items)||J.prescription_for_unavailable_drugs&&J.prescription_for_unavailable_drugs.trim()!=="")?(Ke=!0,We.push((async()=>{O(!0),$("Processing order...");try{if(!n)throw new Error("Missing patient ID for pharmacy order.");const G=[];let K=null;if(Array.isArray(J.items))for(const at of J.items){const{pack_price:gt,loose_price:pt,total_price:Ue,price:Ze,...Fe}=at;let ct;if(Fe.drug_id?ct=b.find(_r=>_r.id===Fe.drug_id):Fe.name&&(ct=Om(Fe.name,b)),!ct){K=`Drug "${Fe.name||Fe.drug_id||"Unknown"}" not found or no close match.`;break}let Xe;const vt=Fe.tabletsPerDay;if(vt&&Number(vt)>0){const _r=Number(vt);Number.isInteger(_r)?Xe=_r:Xe=null}else Xe=1;const Xn=Number(Fe.numberOfDays)||1,$n=Number(Fe.pack_quantity)||0,_n=Number(Fe.loose_quantity)||0;if($n<=0&&_n<=0){K=`Invalid quantity for ${ct.name}. Pack quantity or loose quantity must be greater than 0.`;break}const yn=ct.unit,un=Lj(yn),Ci=Number(ct.price),Vi=Ci,ir=un>0?Ci/un:0,ma=$n*Vi+_n*ir;G.push({drug_id:ct.id?String(ct.id):null,name:ct.name,pack_quantity:$n,loose_quantity:_n,tabletsPerDay:Xe,numberOfDays:Xn,price:Ci,directions_to_use:Fe.directions_to_use||void 0,box_number:Fe.box_number||void 0,isLoose:Fe.isLoose||void 0,unit:yn||void 0,pack_price:parseFloat(Vi.toFixed(2)),loose_price:parseFloat(ir.toFixed(2)),total_price:parseFloat(ma.toFixed(2))})}if(K)throw new Error(K);const Se=G.reduce((at,gt)=>at+gt.total_price,0),Ee={patient_id:n,items:G.map(({drug_id:at,name:gt,pack_quantity:pt,loose_quantity:Ue,tabletsPerDay:Ze,numberOfDays:Fe,directions_to_use:ct,box_number:Xe,isLoose:vt,unit:Xn,pack_price:$n,loose_price:_n,total_price:yn})=>({drug_id:at,name:gt,pack_quantity:pt,loose_quantity:Ue,tabletsPerDay:Ze,numberOfDays:Fe,directions_to_use:ct,box_number:Xe,isLoose:vt,unit:Xn,pack_price:$n,loose_price:_n,total_price:yn})),prescription_for_unavailable_drugs:J.prescription_for_unavailable_drugs||null,order_total:parseFloat(Se.toFixed(2))},Be=await pe("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ee)});if(!Be.ok){const at=await Be.json().catch(()=>({}));throw new Error(at.message||`AI order creation failed: ${Be.statusText}`)}$("Order created!"),n&&se(n)}catch(G){await ye(J.action,G,Ve,it)}finally{O(!1)}})())):J.action==="update_patient_details"?(Ke=!0,We.push((async()=>{D(!0),X(null);try{if(!n)throw new Error("Missing patient ID for updating details.");const G={};let K=!1;if(J.name!==void 0&&typeof J.name=="string"&&(G.name=J.name,K=!0),J.age!==void 0&&typeof J.age=="number"&&(G.age=J.age,K=!0),J.gender!==void 0&&typeof J.gender=="string"){if(!["M","F","O",null,""].includes(J.gender))throw new Error(`Invalid gender specified: "${J.gender}". Use M, F, or O.`);G.gender=J.gender===""?null:J.gender,K=!0}if(J.phone_number!==void 0&&(typeof J.phone_number=="string"||J.phone_number===null)&&(G.phone_number=J.phone_number,K=!0),!K)throw new Error("No valid patient details provided for update.");const Se=await pe(`/api/patients/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!Se.ok){const Ee=await Se.json().catch(()=>({}));throw new Error(Ee.message||`AI patient update failed: ${Se.statusText}`)}await Se.json(),ce(n)}catch(G){await ye(J.action,G,Ve,it)}finally{D(!1)}})())):J.action==="create_lab_order"&&Array.isArray(J.tests)&&J.tests.length>0?(Ke=!0,We.push((async()=>{B(!0),q("Processing lab...");try{if(!n)throw new Error("Missing patient ID for lab order.");const G=[];let K=null;for(const Be of J.tests){let at;if(Be.id?at=v.find(pt=>String(pt.id)===String(Be.id)):Be.name&&(at=Om(Be.name,v)),!at){K=`Lab test "${Be.name||Be.id||"Unknown"}" not found or no close match.`;break}const gt=typeof at.price=="string"?parseFloat(at.price):at.price;G.push({id:at.id,name:at.name,price:gt,description:at.description,default_parameters:at.default_parameters})}if(K)throw new Error(K);const Se={patient_id:n,tests:G.map(Be=>({id:Be.id,name:Be.name,price:Be.price}))},Ee=await pe("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!Ee.ok){const Be=await Ee.json().catch(()=>({}));throw new Error(Be.message||`AI lab order creation failed: ${Ee.statusText}`)}await Ee.json(),q("Success: Lab order created!"),n&&M(n)}catch(G){await ye(J.action,G,Ve,it)}finally{B(!1)}})())):J.action==="edit_pharmacy_order"?(Ke=!0,We.push((async()=>{O(!0),$("Processing pharmacy order edit...");try{const G=J.serialNumber;let K;if(G?K=[...g].sort((Ue,Ze)=>{const Fe=new Date(Ue.date).getTime(),ct=new Date(Ze.date).getTime();return Fe-ct})[G-1]:K=g.sort((pt,Ue)=>new Date(pt.date).getTime()-new Date(Ue.date).getTime()).find(pt=>pt.status==="pending"),!K)throw new Error(`Pharmacy order with serial number ${G} not found, or no pending order to edit.`);const Se=K.id,Ee=J.items,Be=J.items_to_remove,at=J.status,gt=J.prescription_for_unavailable_drugs;if((!Ee||Array.isArray(Ee)&&Ee.length===0)&&!Be&&!at&&(!gt||gt.trim()===""))throw new Error("No items, items to remove, status, or unavailable drugs prescription provided for pharmacy order edit.");if(at==="cancelled")await nt({type:"Pharmacy Order",data:K}),$("Success: Pharmacy order cancelled and deleted!");else{let pt=[...K.medications];if(Array.isArray(Be)&&Be.length>0&&(pt=pt.filter(Xe=>{const vt=Xe.name.toLowerCase().replace(/\s+/g," ").trim();return!Be.some(Xn=>{if(Xn.drug_id&&String(Xe.drug_id)===String(Xn.drug_id))return!0;if(Xn.name){const $n=Xn.name.toLowerCase().replace(/\s+/g," ").trim();return vt===$n}return!1})})),Array.isArray(Ee)&&Ee.length>0)for(const Xe of Ee){const{pack_price:vt,loose_price:Xn,total_price:$n,price:_n,...yn}=Xe;let un;if(yn.drug_id?un=b.find(zn=>zn.id===String(yn.drug_id)):yn.name&&(un=Om(yn.name,b)),!un)throw new Error(`Drug "${yn.name||yn.drug_id||"Unknown"}" not found or no close match for update.`);let Ci;const Vi=yn.tabletsPerDay;if(Vi&&Number(Vi)>0){const zn=Number(Vi);Number.isInteger(zn)?Ci=zn:Ci=null}else Ci=1;const ir=Number(yn.numberOfDays)||1,ma=Number(yn.pack_quantity)||0,_r=Number(yn.loose_quantity)||0,ti=pt.findIndex(zn=>zn.drug_id&&zn.drug_id===(un==null?void 0:un.id)||zn.name.toLowerCase()===(un==null?void 0:un.name.toLowerCase()));if(ma<=0&&_r<=0){ti!==-1&&pt.splice(ti,1);continue}const Zn={drug_id:un.id?String(un.id):null,name:un.name,pack_quantity:ma,loose_quantity:_r,tabletsPerDay:Ci,numberOfDays:ir,price:un.price,directions_to_use:yn.directions_to_use||void 0,box_number:yn.box_number||void 0,isLoose:yn.isLoose||void 0,unit:un.unit||void 0};ti!==-1?pt[ti]={...pt[ti],...Zn}:pt.push(Zn)}const Ue=pt.map(Xe=>{const vt=b.find(Ci=>Ci.id===Xe.drug_id),Xn=vt?Lj(vt.unit):1,$n=Number(vt==null?void 0:vt.price)||0,_n=$n,yn=Xn>0?$n/Xn:0,un=(Xe.pack_quantity||0)*_n+(Xe.loose_quantity||0)*yn;return{...Xe,pack_price:parseFloat(_n.toFixed(2)),loose_price:parseFloat(yn.toFixed(2)),total_price:parseFloat(un.toFixed(2))}}),Ze=Ue.reduce((Xe,vt)=>Xe+vt.total_price,0),Fe={};if(Ue.length>0?Fe.items=Ue.map(({drug_id:Xe,name:vt,pack_quantity:Xn,loose_quantity:$n,tabletsPerDay:_n,numberOfDays:yn,directions_to_use:un,box_number:Ci,isLoose:Vi,unit:ir,pack_price:ma,loose_price:_r,total_price:ti})=>({drug_id:Xe,name:vt,pack_quantity:Xn,loose_quantity:$n,tabletsPerDay:_n===null?null:_n,numberOfDays:yn,directions_to_use:un,box_number:Ci,isLoose:Vi,unit:ir,pack_price:ma,loose_price:_r,total_price:ti})):Ee&&Ee.length>0&&(Fe.items=[]),gt!==void 0&&(Fe.prescription_for_unavailable_drugs=gt),Fe.order_total=parseFloat(Ze.toFixed(2)),at){if(!["pending","billed","dispensed","cancelled"].includes(at))throw new Error(`Invalid status for pharmacy order: ${at}.`);Fe.status=at}const ct=await pe(`/api/pharmacy-orders/${Se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(!ct.ok){const Xe=await ct.json().catch(()=>({}));throw new Error(Xe.message||`AI pharmacy order edit failed: ${ct.statusText}`)}$("Success: Pharmacy order updated!"),n&&se(n)}}catch(G){await ye(J.action,G,Ve,it)}finally{O(!1)}})())):J.action==="edit_lab_order"?(Ke=!0,We.push((async()=>{B(!0),q("Processing lab order edit...");try{const G=d.sort((at,gt)=>new Date(gt.createdAt).getTime()-new Date(at.createdAt).getTime()).find(at=>at.status==="pending");if(!G)throw new Error("No pending lab orders found to edit.");const K=G.id,Se=J.tests,Ee=J.items_to_remove,Be=J.status;if(!Se&&!Ee&&!Be)throw new Error("No tests, items to remove, or status provided for lab order edit.");if(Be==="cancelled"){if(G.report)throw new Error("Cannot delete lab order with an associated report. Please delete the report first.");await nt({type:"Lab Order",data:G}),q("Success: Lab order cancelled and deleted!")}else{let at=[...G.tests];if(Array.isArray(Ee)&&Ee.length>0&&(at=at.filter(Ue=>!Ee.some(Ze=>!!(Ze.id&&String(Ue.id)===String(Ze.id)||Ze.name&&Ue.name.toLowerCase()===Ze.name.toLowerCase())))),Array.isArray(Se)&&Se.length>0)for(const Ue of Se){let Ze;if(Ue.id?Ze=v.find(vt=>String(vt.id)===String(Ue.id)):Ue.name&&(Ze=Om(Ue.name,v)),!Ze)throw new Error(`Lab test "${Ue.name||Ue.id||"Unknown"}" not found or no close match for update.`);const Fe=typeof Ze.price=="string"?parseFloat(Ze.price):Ze.price,ct=at.findIndex(vt=>vt.id&&String(vt.id)===String(Ze==null?void 0:Ze.id)||vt.name.toLowerCase()===(Ze==null?void 0:Ze.name.toLowerCase())),Xe={id:Ze.id,name:Ze.name,price:Fe};ct!==-1?at[ct]={...at[ct],...Xe}:at.push(Xe)}const gt={};if(at.length>0?gt.tests=at:Se&&Se.length>0&&(gt.tests=[]),Be){if(!["pending","billed","collected","processing","report_ready","completed","cancelled","reported"].includes(Be))throw new Error(`Invalid status for lab order: ${Be}.`);gt.status=Be}const pt=await pe(`/api/lab/orders/${K}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(gt)});if(!pt.ok){const Ue=await pt.json().catch(()=>({}));throw new Error(Ue.message||`AI lab order edit failed: ${pt.statusText}`)}q("Success: Lab order updated!"),n&&(M(n),fe(n))}}catch(G){await ye(J.action,G,Ve,it)}finally{B(!1)}})())):J.action==="add_complaint_history"&&J.complaint?(Ke=!0,We.push((async()=>{H(!0),F("Processing Hx...");try{if(!e)throw new Error("Missing Record ID for complaint history.");if(!J.complaint||typeof J.complaint!="string")throw new Error("Invalid AI complaint text.");const G={complaint:J.complaint.trim()},K=await pe(`/api/queue/doctor/complaint/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!K.ok){const Se=await K.json().catch(()=>({}));throw new Error(Se.message||`AI complaint add failed: ${K.statusText}`)}N(G.complaint),F("Hx updated!"),n&&we(n)}catch(G){await ye(J.action,G,Ve,it)}finally{H(!1)}})())):J.action==="update_case_summary"&&J.summary?(Ke=!0,We.push((async()=>{L(!0),Q("Processing summary...");try{if(!e)throw new Error("Missing Record ID for case summary update.");if(typeof J.summary!="string")throw new Error("Invalid AI case summary text.");const G={case_summary:J.summary.trim()},K=await pe(`/api/queue/doctor/complaint/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!K.ok){const Ee=await K.json().catch(()=>({}));throw new Error(Ee.message||`AI case summary update failed: ${K.statusText}`)}const Se=await K.json();ne(Se.case_summary),ie(Se.updatedAt),Q("Summary updated!")}catch(G){await ye(J.action,G,Ve,it)}finally{L(!1)}})())):J.action&&console.warn(`Unrecognized AI action: ${J.action}`)}if(await Promise.allSettled(We),ze)typeof ze.question=="string"?(z(ze.question),re(Array.isArray(ze.options)?ze.options:[])):console.warn("Invalid 'ask_followup_question' format.");else if(!Ke)throw new Error("AI response did not result in a recognized or performed function call.")}catch(ve){await ye("parse_json_actions",ve,Ve,it)}else throw new Error("AI response did not contain a recognized function call.")};je=async(Ve,it=0)=>{if(it>1){U("AI call failed after multiple retries. Please try a different prompt."),D(!1);return}D(!0),U(null);let Ke;const Ft=[...l,Ve].join(`

`);try{const _t=new Map;(d??[]).forEach(K=>{_t.set(K.id,{...K})}),(u??[]).forEach(K=>{if(!_t.has(K.id))_t.set(K.id,{id:K.id,patient_id:K.patient_id,tests:K.tests,status:K.status,createdAt:K.createdAt,report:K});else{const Se=_t.get(K.id);Se&&(Se.report=K,Se.status=K.status)}});const ve=Array.from(_t.values());ve.sort((K,Se)=>new Date(Se.createdAt).getTime()-new Date(K.createdAt).getTime());const qe=ve.map((K,Se)=>{let Ee=null;if(K.report)try{const Be=typeof K.report.report_content=="string"?K.report.report_content:JSON.stringify(K.report.report_content||{}),at=JSON.parse(Be||"{}"),gt=(K.report.tests||[]).map(pt=>{const Ue=at[pt.id]||{},Ze=Fe=>({name:Fe.name,value:Ue[Fe.name]!==void 0?String(Ue[Fe.name]):String(Fe.defaultValue),normal_range:Fe.normal_range||"N/A"});return{testId:pt.id,testName:pt.name,parameters:(pt.default_parameters||[]).map(Ze)}});Ee={reportId:K.report.reportId,reportDate:K.report.report_date,tests:gt}}catch{Ee={reportId:K.report.reportId,reportDate:K.report.report_date,reportContent:typeof K.report.report_content=="string"?K.report.report_content:JSON.stringify(K.report.report_content),error:"Failed to parse report content JSON."}}return{serialNumber:ve.length-Se,orderId:K.id,orderDate:isNaN(new Date(K.createdAt).getTime())?K.createdAt:new Date(K.createdAt).toISOString(),tests:K.tests.map(Be=>({id:Be.id,name:Be.name,price:Be.price})),status:K.status,report:Ee}}),We=p.map(K=>{try{return{...K,createdAt:isNaN(new Date(K.createdAt).getTime())?K.createdAt:new Date(K.createdAt).toISOString()}}catch{return K}}),J=[...g].sort((K,Se)=>{const Ee=new Date(K.date).getTime(),Be=new Date(Se.date).getTime();return Ee-Be}).map((K,Se)=>{try{return{serialNumber:Se+1,...K,date:K.date&&!isNaN(new Date(K.date).getTime())?new Date(K.date).toISOString():K.date}}catch{return{serialNumber:Se+1,...K}}}),G={query:Ft,currentDateTime:new Date().toISOString(),patientName:(t==null?void 0:t.name)||"",patientAge:(t==null?void 0:t.age)||void 0,patientGender:(t==null?void 0:t.gender)||void 0,case_summary:i||"",case_summary_last_updated:a?new Date(a).toISOString():void 0,clinic_ai_memory:(o==null?void 0:o.aiMemory)||"",clinic_ai_memory_last_updated:o!=null&&o.aiMemoryUpdatedAt?new Date(o.aiMemoryUpdatedAt).toISOString():void 0,clinic_wide_system_prompt:(o==null?void 0:o.clinicWideSystemPrompt)||"",labHistory:qe,pharmacyOrders:J,pastComplaints:We,pharmacyInventory:b,labInventory:v};if(console.log("DEBUG: Payload before sending to Gemini API:",JSON.stringify(G,null,2)),Ke=await _Q(G,f),Ke){k(Ke);const K=/```json\s*([\s\S]*?)\s*```/,Se=Ke.match(K);if(Se&&Se[1])E(Ke.replace(K,"").trim()),T(Se[1].trim());else{const Ee=Ke.trim();if(Ee.startsWith("{")&&Ee.endsWith("}"))try{JSON.parse(Ee),E(""),T(Ee)}catch{E(Ee),T(null)}else if(Ee.startsWith("[")&&Ee.endsWith("]"))try{JSON.parse(Ee),E(""),T(Ee)}catch{E(Ee),T(null)}else E(Ee),T(null)}I(!1),n&&Ke&&await De(n,Ke),await Ae(Ke,it),N("")}else throw new Error("Invalid AI response format.")}catch(_t){await ye("call_generative_api",_t,Ke,it)}finally{D(!1)}};const De=async(Ve,it)=>{P(!0),te(null);try{const Ke={ai_response:it},rt=await pe(`/api/patients/${Ve}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ke)});if(!rt.ok){const Ft=await rt.json().catch(()=>({}));throw new Error(Ft.message||`Failed to save AI response to patient: ${rt.statusText}`)}}catch(Ke){te(`AI Response Save Error: ${Ke.message}`)}finally{P(!1)}};return w.useImperativeHandle(ut,()=>({callGenerativeApi:je})),null}),EQ={};function Hw(e,n){const t=EQ,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,a=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return sT(e,i,a)}function sT(e,n,t){if(TQ(e)){if("value"in e)return e.type==="html"&&!t?"":e.value;if(n&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Fj(e.children,n,t)}return Array.isArray(e)?Fj(e,n,t):""}function Fj(e,n,t){const i=[];let a=-1;for(;++a<e.length;)i[a]=sT(e[a],n,t);return i.join("")}function TQ(e){return!!(e&&typeof e=="object")}const $j=document.createElement("i");function Gw(e){const n="&"+e+";";$j.innerHTML=n;const t=$j.textContent;return t.charCodeAt(t.length-1)===59&&e!=="semi"||t===n?!1:t}function zo(e,n,t,i){const a=e.length;let o=0,l;if(n<0?n=-n>a?0:a+n:n=n>a?a:n,t=t>0?t:0,i.length<1e4)l=Array.from(i),l.unshift(n,t),e.splice(...l);else for(t&&e.splice(n,t);o<i.length;)l=i.slice(o,o+1e4),l.unshift(n,0),e.splice(...l),o+=1e4,n+=1e4}function rs(e,n){return e.length>0?(zo(e,e.length,0,n),e):n}const zj={}.hasOwnProperty;function AQ(e){const n={};let t=-1;for(;++t<e.length;)PQ(n,e[t]);return n}function PQ(e,n){let t;for(t in n){const a=(zj.call(e,t)?e[t]:void 0)||(e[t]={}),o=n[t];let l;if(o)for(l in o){zj.call(a,l)||(a[l]=[]);const f=o[l];DQ(a[l],Array.isArray(f)?f:f?[f]:[])}}}function DQ(e,n){let t=-1;const i=[];for(;++t<n.length;)(n[t].add==="after"?e:i).push(n[t]);zo(e,0,0,i)}function oT(e,n){const t=Number.parseInt(e,n);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function xh(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Oo=Qc(/[A-Za-z]/),Ra=Qc(/[\dA-Za-z]/),IQ=Qc(/[#-'*+\--9=?A-Z^-~]/);function F1(e){return e!==null&&(e<32||e===127)}const $1=Qc(/\d/),MQ=Qc(/[\dA-Fa-f]/),RQ=Qc(/[!-/:-@[-`{-~]/);function Ot(e){return e!==null&&e<-2}function ua(e){return e!==null&&(e<0||e===32)}function jn(e){return e===-2||e===-1||e===32}const OQ=Qc(new RegExp("\\p{P}|\\p{S}","u")),LQ=Qc(/\s/);function Qc(e){return n;function n(t){return t!==null&&t>-1&&e.test(String.fromCharCode(t))}}function Fh(e){const n=[];let t=-1,i=0,a=0;for(;++t<e.length;){const o=e.charCodeAt(t);let l="";if(o===37&&Ra(e.charCodeAt(t+1))&&Ra(e.charCodeAt(t+2)))a=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const f=e.charCodeAt(t+1);o<56320&&f>56319&&f<57344?(l=String.fromCharCode(o,f),a=1):l=""}else l=String.fromCharCode(o);l&&(n.push(e.slice(i,t),encodeURIComponent(l)),i=t+a+1,l=""),a&&(t+=a,a=0)}return n.join("")+e.slice(i)}function Kn(e,n,t,i){const a=i?i-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(d){return jn(d)?(e.enter(t),f(d)):n(d)}function f(d){return jn(d)&&o++<a?(e.consume(d),f):(e.exit(t),n(d))}}const FQ={tokenize:$Q};function $Q(e){const n=e.attempt(this.parser.constructs.contentInitial,i,a);let t;return n;function i(f){if(f===null){e.consume(f);return}return e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),Kn(e,n,"linePrefix")}function a(f){return e.enter("paragraph"),o(f)}function o(f){const d=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=d),t=d,l(f)}function l(f){if(f===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(f);return}return Ot(f)?(e.consume(f),e.exit("chunkText"),o):(e.consume(f),l)}}const zQ={tokenize:BQ},Bj={tokenize:UQ};function BQ(e){const n=this,t=[];let i=0,a,o,l;return f;function f(D){if(i<t.length){const U=t[i];return n.containerState=U[1],e.attempt(U[0].continuation,d,u)(D)}return u(D)}function d(D){if(i++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,a&&I();const U=n.events.length;let O=U,$;for(;O--;)if(n.events[O][0]==="exit"&&n.events[O][1].type==="chunkFlow"){$=n.events[O][1].end;break}T(i);let B=U;for(;B<n.events.length;)n.events[B][1].end={...$},B++;return zo(n.events,O+1,0,n.events.slice(U)),n.events.length=B,u(D)}return f(D)}function u(D){if(i===t.length){if(!a)return b(D);if(a.currentConstruct&&a.currentConstruct.concrete)return N(D);n.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(Bj,p,g)(D)}function p(D){return a&&I(),T(i),b(D)}function g(D){return n.parser.lazy[n.now().line]=i!==t.length,l=n.now().offset,N(D)}function b(D){return n.containerState={},e.attempt(Bj,v,N)(D)}function v(D){return i++,t.push([n.currentConstruct,n.containerState]),b(D)}function N(D){if(D===null){a&&I(),T(0),e.consume(D);return}return a=a||n.parser.flow(n.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:o}),k(D)}function k(D){if(D===null){E(e.exit("chunkFlow"),!0),T(0),e.consume(D);return}return Ot(D)?(e.consume(D),E(e.exit("chunkFlow")),i=0,n.interrupt=void 0,f):(e.consume(D),k)}function E(D,U){const O=n.sliceStream(D);if(U&&O.push(null),D.previous=o,o&&(o.next=D),o=D,a.defineSkip(D.start),a.write(O),n.parser.lazy[D.start.line]){let $=a.events.length;for(;$--;)if(a.events[$][1].start.offset<l&&(!a.events[$][1].end||a.events[$][1].end.offset>l))return;const B=n.events.length;let q=B,H,F;for(;q--;)if(n.events[q][0]==="exit"&&n.events[q][1].type==="chunkFlow"){if(H){F=n.events[q][1].end;break}H=!0}for(T(i),$=B;$<n.events.length;)n.events[$][1].end={...F},$++;zo(n.events,q+1,0,n.events.slice(B)),n.events.length=$}}function T(D){let U=t.length;for(;U-- >D;){const O=t[U];n.containerState=O[1],O[0].exit.call(n,e)}t.length=D}function I(){a.write([null]),o=void 0,a=void 0,n.containerState._closeFlow=void 0}}function UQ(e,n,t){return Kn(e,e.attempt(this.parser.constructs.document,n,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function mb(e){if(e===null||ua(e)||LQ(e))return 1;if(OQ(e))return 2}function Yw(e,n,t){const i=[];let a=-1;for(;++a<e.length;){const o=e[a].resolveAll;o&&!i.includes(o)&&(n=o(n,t),i.push(o))}return n}const z1={name:"attention",resolveAll:qQ,tokenize:VQ};function qQ(e,n){let t=-1,i,a,o,l,f,d,u,p;for(;++t<e.length;)if(e[t][0]==="enter"&&e[t][1].type==="attentionSequence"&&e[t][1]._close){for(i=t;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&n.sliceSerialize(e[i][1]).charCodeAt(0)===n.sliceSerialize(e[t][1]).charCodeAt(0)){if((e[i][1]._close||e[t][1]._open)&&(e[t][1].end.offset-e[t][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[t][1].end.offset-e[t][1].start.offset)%3))continue;d=e[i][1].end.offset-e[i][1].start.offset>1&&e[t][1].end.offset-e[t][1].start.offset>1?2:1;const g={...e[i][1].end},b={...e[t][1].start};Uj(g,-d),Uj(b,d),l={type:d>1?"strongSequence":"emphasisSequence",start:g,end:{...e[i][1].end}},f={type:d>1?"strongSequence":"emphasisSequence",start:{...e[t][1].start},end:b},o={type:d>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[t][1].start}},a={type:d>1?"strong":"emphasis",start:{...l.start},end:{...f.end}},e[i][1].end={...l.start},e[t][1].start={...f.end},u=[],e[i][1].end.offset-e[i][1].start.offset&&(u=rs(u,[["enter",e[i][1],n],["exit",e[i][1],n]])),u=rs(u,[["enter",a,n],["enter",l,n],["exit",l,n],["enter",o,n]]),u=rs(u,Yw(n.parser.constructs.insideSpan.null,e.slice(i+1,t),n)),u=rs(u,[["exit",o,n],["enter",f,n],["exit",f,n],["exit",a,n]]),e[t][1].end.offset-e[t][1].start.offset?(p=2,u=rs(u,[["enter",e[t][1],n],["exit",e[t][1],n]])):p=0,zo(e,i-1,t-i+3,u),t=i+u.length-p-2;break}}for(t=-1;++t<e.length;)e[t][1].type==="attentionSequence"&&(e[t][1].type="data");return e}function VQ(e,n){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,a=mb(i);let o;return l;function l(d){return o=d,e.enter("attentionSequence"),f(d)}function f(d){if(d===o)return e.consume(d),f;const u=e.exit("attentionSequence"),p=mb(d),g=!p||p===2&&a||t.includes(d),b=!a||a===2&&p||t.includes(i);return u._open=!!(o===42?g:g&&(a||!b)),u._close=!!(o===42?b:b&&(p||!g)),n(d)}}function Uj(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const HQ={name:"autolink",tokenize:GQ};function GQ(e,n,t){let i=0;return a;function a(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(v){return Oo(v)?(e.consume(v),l):v===64?t(v):u(v)}function l(v){return v===43||v===45||v===46||Ra(v)?(i=1,f(v)):u(v)}function f(v){return v===58?(e.consume(v),i=0,d):(v===43||v===45||v===46||Ra(v))&&i++<32?(e.consume(v),f):(i=0,u(v))}function d(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),n):v===null||v===32||v===60||F1(v)?t(v):(e.consume(v),d)}function u(v){return v===64?(e.consume(v),p):IQ(v)?(e.consume(v),u):t(v)}function p(v){return Ra(v)?g(v):t(v)}function g(v){return v===46?(e.consume(v),i=0,p):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),n):b(v)}function b(v){if((v===45||Ra(v))&&i++<63){const N=v===45?b:g;return e.consume(v),N}return t(v)}}const Gb={partial:!0,tokenize:YQ};function YQ(e,n,t){return i;function i(o){return jn(o)?Kn(e,a,"linePrefix")(o):a(o)}function a(o){return o===null||Ot(o)?n(o):t(o)}}const lT={continuation:{tokenize:QQ},exit:JQ,name:"blockQuote",tokenize:WQ};function WQ(e,n,t){const i=this;return a;function a(l){if(l===62){const f=i.containerState;return f.open||(e.enter("blockQuote",{_container:!0}),f.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),o}return t(l)}function o(l){return jn(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),n):(e.exit("blockQuotePrefix"),n(l))}}function QQ(e,n,t){const i=this;return a;function a(l){return jn(l)?Kn(e,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return e.attempt(lT,n,t)(l)}}function JQ(e){e.exit("blockQuote")}const cT={name:"characterEscape",tokenize:KQ};function KQ(e,n,t){return i;function i(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),a}function a(o){return RQ(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),n):t(o)}}const uT={name:"characterReference",tokenize:XQ};function XQ(e,n,t){const i=this;let a=0,o,l;return f;function f(g){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),d}function d(g){return g===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(g),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),o=31,l=Ra,p(g))}function u(g){return g===88||g===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(g),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,l=MQ,p):(e.enter("characterReferenceValue"),o=7,l=$1,p(g))}function p(g){if(g===59&&a){const b=e.exit("characterReferenceValue");return l===Ra&&!Gw(i.sliceSerialize(b))?t(g):(e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),e.exit("characterReference"),n)}return l(g)&&a++<o?(e.consume(g),p):t(g)}}const qj={partial:!0,tokenize:eJ},Vj={concrete:!0,name:"codeFenced",tokenize:ZQ};function ZQ(e,n,t){const i=this,a={partial:!0,tokenize:O};let o=0,l=0,f;return d;function d($){return u($)}function u($){const B=i.events[i.events.length-1];return o=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,f=$,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),p($)}function p($){return $===f?(l++,e.consume($),p):l<3?t($):(e.exit("codeFencedFenceSequence"),jn($)?Kn(e,g,"whitespace")($):g($))}function g($){return $===null||Ot($)?(e.exit("codeFencedFence"),i.interrupt?n($):e.check(qj,k,U)($)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),b($))}function b($){return $===null||Ot($)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),g($)):jn($)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Kn(e,v,"whitespace")($)):$===96&&$===f?t($):(e.consume($),b)}function v($){return $===null||Ot($)?g($):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),N($))}function N($){return $===null||Ot($)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g($)):$===96&&$===f?t($):(e.consume($),N)}function k($){return e.attempt(a,U,E)($)}function E($){return e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),T}function T($){return o>0&&jn($)?Kn(e,I,"linePrefix",o+1)($):I($)}function I($){return $===null||Ot($)?e.check(qj,k,U)($):(e.enter("codeFlowValue"),D($))}function D($){return $===null||Ot($)?(e.exit("codeFlowValue"),I($)):(e.consume($),D)}function U($){return e.exit("codeFenced"),n($)}function O($,B,q){let H=0;return F;function F(oe){return $.enter("lineEnding"),$.consume(oe),$.exit("lineEnding"),L}function L(oe){return $.enter("codeFencedFence"),jn(oe)?Kn($,Q,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(oe):Q(oe)}function Q(oe){return oe===f?($.enter("codeFencedFenceSequence"),ne(oe)):q(oe)}function ne(oe){return oe===f?(H++,$.consume(oe),ne):H>=l?($.exit("codeFencedFenceSequence"),jn(oe)?Kn($,ie,"whitespace")(oe):ie(oe)):q(oe)}function ie(oe){return oe===null||Ot(oe)?($.exit("codeFencedFence"),B(oe)):q(oe)}}}function eJ(e,n,t){const i=this;return a;function a(l){return l===null?t(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o)}function o(l){return i.parser.lazy[i.now().line]?t(l):n(l)}}const R0={name:"codeIndented",tokenize:nJ},tJ={partial:!0,tokenize:iJ};function nJ(e,n,t){const i=this;return a;function a(u){return e.enter("codeIndented"),Kn(e,o,"linePrefix",5)(u)}function o(u){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(u):t(u)}function l(u){return u===null?d(u):Ot(u)?e.attempt(tJ,l,d)(u):(e.enter("codeFlowValue"),f(u))}function f(u){return u===null||Ot(u)?(e.exit("codeFlowValue"),l(u)):(e.consume(u),f)}function d(u){return e.exit("codeIndented"),n(u)}}function iJ(e,n,t){const i=this;return a;function a(l){return i.parser.lazy[i.now().line]?t(l):Ot(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a):Kn(e,o,"linePrefix",5)(l)}function o(l){const f=i.events[i.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?n(l):Ot(l)?a(l):t(l)}}const rJ={name:"codeText",previous:sJ,resolve:aJ,tokenize:oJ};function aJ(e){let n=e.length-4,t=3,i,a;if((e[t][1].type==="lineEnding"||e[t][1].type==="space")&&(e[n][1].type==="lineEnding"||e[n][1].type==="space")){for(i=t;++i<n;)if(e[i][1].type==="codeTextData"){e[t][1].type="codeTextPadding",e[n][1].type="codeTextPadding",t+=2,n-=2;break}}for(i=t-1,n++;++i<=n;)a===void 0?i!==n&&e[i][1].type!=="lineEnding"&&(a=i):(i===n||e[i][1].type==="lineEnding")&&(e[a][1].type="codeTextData",i!==a+2&&(e[a][1].end=e[i-1][1].end,e.splice(a+2,i-a-2),n-=i-a-2,i=a+2),a=void 0);return e}function sJ(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function oJ(e,n,t){let i=0,a,o;return l;function l(g){return e.enter("codeText"),e.enter("codeTextSequence"),f(g)}function f(g){return g===96?(e.consume(g),i++,f):(e.exit("codeTextSequence"),d(g))}function d(g){return g===null?t(g):g===32?(e.enter("space"),e.consume(g),e.exit("space"),d):g===96?(o=e.enter("codeTextSequence"),a=0,p(g)):Ot(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),d):(e.enter("codeTextData"),u(g))}function u(g){return g===null||g===32||g===96||Ot(g)?(e.exit("codeTextData"),d(g)):(e.consume(g),u)}function p(g){return g===96?(e.consume(g),a++,p):a===i?(e.exit("codeTextSequence"),e.exit("codeText"),n(g)):(o.type="codeTextData",u(g))}}class lJ{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(n,i):n>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(n,t,i){const a=t||0;this.setCursor(Math.trunc(n));const o=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return i&&Am(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),Am(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),Am(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const t=this.left.splice(n,Number.POSITIVE_INFINITY);Am(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);Am(this.left,t.reverse())}}}function Am(e,n){let t=0;if(n.length<1e4)e.push(...n);else for(;t<n.length;)e.push(...n.slice(t,t+1e4)),t+=1e4}function dT(e){const n={};let t=-1,i,a,o,l,f,d,u;const p=new lJ(e);for(;++t<p.length;){for(;t in n;)t=n[t];if(i=p.get(t),t&&i[1].type==="chunkFlow"&&p.get(t-1)[1].type==="listItemPrefix"&&(d=i[1]._tokenizer.events,o=0,o<d.length&&d[o][1].type==="lineEndingBlank"&&(o+=2),o<d.length&&d[o][1].type==="content"))for(;++o<d.length&&d[o][1].type!=="content";)d[o][1].type==="chunkText"&&(d[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(n,cJ(p,t)),t=n[t],u=!0);else if(i[1]._container){for(o=t,a=void 0;o--;)if(l=p.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(i[1].end={...p.get(a)[1].start},f=p.slice(a,t),f.unshift(i),p.splice(a,t-a+1,f))}}return zo(e,0,Number.POSITIVE_INFINITY,p.slice(0)),!u}function cJ(e,n){const t=e.get(n)[1],i=e.get(n)[2];let a=n-1;const o=[];let l=t._tokenizer;l||(l=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const f=l.events,d=[],u={};let p,g,b=-1,v=t,N=0,k=0;const E=[k];for(;v;){for(;e.get(++a)[1]!==v;);o.push(a),v._tokenizer||(p=i.sliceStream(v),v.next||p.push(null),g&&l.defineSkip(v.start),v._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),v._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),g=v,v=v.next}for(v=t;++b<f.length;)f[b][0]==="exit"&&f[b-1][0]==="enter"&&f[b][1].type===f[b-1][1].type&&f[b][1].start.line!==f[b][1].end.line&&(k=b+1,E.push(k),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(l.events=[],v?(v._tokenizer=void 0,v.previous=void 0):E.pop(),b=E.length;b--;){const T=f.slice(E[b],E[b+1]),I=o.pop();d.push([I,I+T.length-1]),e.splice(I,2,T)}for(d.reverse(),b=-1;++b<d.length;)u[N+d[b][0]]=N+d[b][1],N+=d[b][1]-d[b][0]-1;return u}const uJ={resolve:fJ,tokenize:hJ},dJ={partial:!0,tokenize:pJ};function fJ(e){return dT(e),e}function hJ(e,n){let t;return i;function i(f){return e.enter("content"),t=e.enter("chunkContent",{contentType:"content"}),a(f)}function a(f){return f===null?o(f):Ot(f)?e.check(dJ,l,o)(f):(e.consume(f),a)}function o(f){return e.exit("chunkContent"),e.exit("content"),n(f)}function l(f){return e.consume(f),e.exit("chunkContent"),t.next=e.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,a}}function pJ(e,n,t){const i=this;return a;function a(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Kn(e,o,"linePrefix")}function o(l){if(l===null||Ot(l))return t(l);const f=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?n(l):e.interrupt(i.parser.constructs.flow,t,n)(l)}}function fT(e,n,t,i,a,o,l,f,d){const u=d||Number.POSITIVE_INFINITY;let p=0;return g;function g(T){return T===60?(e.enter(i),e.enter(a),e.enter(o),e.consume(T),e.exit(o),b):T===null||T===32||T===41||F1(T)?t(T):(e.enter(i),e.enter(l),e.enter(f),e.enter("chunkString",{contentType:"string"}),k(T))}function b(T){return T===62?(e.enter(o),e.consume(T),e.exit(o),e.exit(a),e.exit(i),n):(e.enter(f),e.enter("chunkString",{contentType:"string"}),v(T))}function v(T){return T===62?(e.exit("chunkString"),e.exit(f),b(T)):T===null||T===60||Ot(T)?t(T):(e.consume(T),T===92?N:v)}function N(T){return T===60||T===62||T===92?(e.consume(T),v):v(T)}function k(T){return!p&&(T===null||T===41||ua(T))?(e.exit("chunkString"),e.exit(f),e.exit(l),e.exit(i),n(T)):p<u&&T===40?(e.consume(T),p++,k):T===41?(e.consume(T),p--,k):T===null||T===32||T===40||F1(T)?t(T):(e.consume(T),T===92?E:k)}function E(T){return T===40||T===41||T===92?(e.consume(T),k):k(T)}}function hT(e,n,t,i,a,o){const l=this;let f=0,d;return u;function u(v){return e.enter(i),e.enter(a),e.consume(v),e.exit(a),e.enter(o),p}function p(v){return f>999||v===null||v===91||v===93&&!d||v===94&&!f&&"_hiddenFootnoteSupport"in l.parser.constructs?t(v):v===93?(e.exit(o),e.enter(a),e.consume(v),e.exit(a),e.exit(i),n):Ot(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),p):(e.enter("chunkString",{contentType:"string"}),g(v))}function g(v){return v===null||v===91||v===93||Ot(v)||f++>999?(e.exit("chunkString"),p(v)):(e.consume(v),d||(d=!jn(v)),v===92?b:g)}function b(v){return v===91||v===92||v===93?(e.consume(v),f++,g):g(v)}}function pT(e,n,t,i,a,o){let l;return f;function f(b){return b===34||b===39||b===40?(e.enter(i),e.enter(a),e.consume(b),e.exit(a),l=b===40?41:b,d):t(b)}function d(b){return b===l?(e.enter(a),e.consume(b),e.exit(a),e.exit(i),n):(e.enter(o),u(b))}function u(b){return b===l?(e.exit(o),d(l)):b===null?t(b):Ot(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),Kn(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===l||b===null||Ot(b)?(e.exit("chunkString"),u(b)):(e.consume(b),b===92?g:p)}function g(b){return b===l||b===92?(e.consume(b),p):p(b)}}function zm(e,n){let t;return i;function i(a){return Ot(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t=!0,i):jn(a)?Kn(e,i,t?"linePrefix":"lineSuffix")(a):n(a)}}const mJ={name:"definition",tokenize:yJ},gJ={partial:!0,tokenize:xJ};function yJ(e,n,t){const i=this;let a;return o;function o(v){return e.enter("definition"),l(v)}function l(v){return hT.call(i,e,f,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function f(v){return a=xh(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),d):t(v)}function d(v){return ua(v)?zm(e,u)(v):u(v)}function u(v){return fT(e,p,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function p(v){return e.attempt(gJ,g,g)(v)}function g(v){return jn(v)?Kn(e,b,"whitespace")(v):b(v)}function b(v){return v===null||Ot(v)?(e.exit("definition"),i.parser.defined.push(a),n(v)):t(v)}}function xJ(e,n,t){return i;function i(f){return ua(f)?zm(e,a)(f):t(f)}function a(f){return pT(e,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(f)}function o(f){return jn(f)?Kn(e,l,"whitespace")(f):l(f)}function l(f){return f===null||Ot(f)?n(f):t(f)}}const bJ={name:"hardBreakEscape",tokenize:vJ};function vJ(e,n,t){return i;function i(o){return e.enter("hardBreakEscape"),e.consume(o),a}function a(o){return Ot(o)?(e.exit("hardBreakEscape"),n(o)):t(o)}}const wJ={name:"headingAtx",resolve:SJ,tokenize:NJ};function SJ(e,n){let t=e.length-2,i=3,a,o;return e[i][1].type==="whitespace"&&(i+=2),t-2>i&&e[t][1].type==="whitespace"&&(t-=2),e[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&e[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(a={type:"atxHeadingText",start:e[i][1].start,end:e[t][1].end},o={type:"chunkText",start:e[i][1].start,end:e[t][1].end,contentType:"text"},zo(e,i,t-i+1,[["enter",a,n],["enter",o,n],["exit",o,n],["exit",a,n]])),e}function NJ(e,n,t){let i=0;return a;function a(p){return e.enter("atxHeading"),o(p)}function o(p){return e.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&i++<6?(e.consume(p),l):p===null||ua(p)?(e.exit("atxHeadingSequence"),f(p)):t(p)}function f(p){return p===35?(e.enter("atxHeadingSequence"),d(p)):p===null||Ot(p)?(e.exit("atxHeading"),n(p)):jn(p)?Kn(e,f,"whitespace")(p):(e.enter("atxHeadingText"),u(p))}function d(p){return p===35?(e.consume(p),d):(e.exit("atxHeadingSequence"),f(p))}function u(p){return p===null||p===35||ua(p)?(e.exit("atxHeadingText"),f(p)):(e.consume(p),u)}}const CJ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Hj=["pre","script","style","textarea"],jJ={concrete:!0,name:"htmlFlow",resolveTo:EJ,tokenize:TJ},_J={partial:!0,tokenize:PJ},kJ={partial:!0,tokenize:AJ};function EJ(e){let n=e.length;for(;n--&&!(e[n][0]==="enter"&&e[n][1].type==="htmlFlow"););return n>1&&e[n-2][1].type==="linePrefix"&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function TJ(e,n,t){const i=this;let a,o,l,f,d;return u;function u(M){return p(M)}function p(M){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(M),g}function g(M){return M===33?(e.consume(M),b):M===47?(e.consume(M),o=!0,k):M===63?(e.consume(M),a=3,i.interrupt?n:P):Oo(M)?(e.consume(M),l=String.fromCharCode(M),E):t(M)}function b(M){return M===45?(e.consume(M),a=2,v):M===91?(e.consume(M),a=5,f=0,N):Oo(M)?(e.consume(M),a=4,i.interrupt?n:P):t(M)}function v(M){return M===45?(e.consume(M),i.interrupt?n:P):t(M)}function N(M){const fe="CDATA[";return M===fe.charCodeAt(f++)?(e.consume(M),f===fe.length?i.interrupt?n:Q:N):t(M)}function k(M){return Oo(M)?(e.consume(M),l=String.fromCharCode(M),E):t(M)}function E(M){if(M===null||M===47||M===62||ua(M)){const fe=M===47,we=l.toLowerCase();return!fe&&!o&&Hj.includes(we)?(a=1,i.interrupt?n(M):Q(M)):CJ.includes(l.toLowerCase())?(a=6,fe?(e.consume(M),T):i.interrupt?n(M):Q(M)):(a=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(M):o?I(M):D(M))}return M===45||Ra(M)?(e.consume(M),l+=String.fromCharCode(M),E):t(M)}function T(M){return M===62?(e.consume(M),i.interrupt?n:Q):t(M)}function I(M){return jn(M)?(e.consume(M),I):F(M)}function D(M){return M===47?(e.consume(M),F):M===58||M===95||Oo(M)?(e.consume(M),U):jn(M)?(e.consume(M),D):F(M)}function U(M){return M===45||M===46||M===58||M===95||Ra(M)?(e.consume(M),U):O(M)}function O(M){return M===61?(e.consume(M),$):jn(M)?(e.consume(M),O):D(M)}function $(M){return M===null||M===60||M===61||M===62||M===96?t(M):M===34||M===39?(e.consume(M),d=M,B):jn(M)?(e.consume(M),$):q(M)}function B(M){return M===d?(e.consume(M),d=null,H):M===null||Ot(M)?t(M):(e.consume(M),B)}function q(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||ua(M)?O(M):(e.consume(M),q)}function H(M){return M===47||M===62||jn(M)?D(M):t(M)}function F(M){return M===62?(e.consume(M),L):t(M)}function L(M){return M===null||Ot(M)?Q(M):jn(M)?(e.consume(M),L):t(M)}function Q(M){return M===45&&a===2?(e.consume(M),Y):M===60&&a===1?(e.consume(M),z):M===62&&a===4?(e.consume(M),te):M===63&&a===3?(e.consume(M),P):M===93&&a===5?(e.consume(M),X):Ot(M)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(_J,se,ne)(M)):M===null||Ot(M)?(e.exit("htmlFlowData"),ne(M)):(e.consume(M),Q)}function ne(M){return e.check(kJ,ie,se)(M)}function ie(M){return e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),oe}function oe(M){return M===null||Ot(M)?ne(M):(e.enter("htmlFlowData"),Q(M))}function Y(M){return M===45?(e.consume(M),P):Q(M)}function z(M){return M===47?(e.consume(M),l="",re):Q(M)}function re(M){if(M===62){const fe=l.toLowerCase();return Hj.includes(fe)?(e.consume(M),te):Q(M)}return Oo(M)&&l.length<8?(e.consume(M),l+=String.fromCharCode(M),re):Q(M)}function X(M){return M===93?(e.consume(M),P):Q(M)}function P(M){return M===62?(e.consume(M),te):M===45&&a===2?(e.consume(M),P):Q(M)}function te(M){return M===null||Ot(M)?(e.exit("htmlFlowData"),se(M)):(e.consume(M),te)}function se(M){return e.exit("htmlFlow"),n(M)}}function AJ(e,n,t){const i=this;return a;function a(l){return Ot(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):t(l)}function o(l){return i.parser.lazy[i.now().line]?t(l):n(l)}}function PJ(e,n,t){return i;function i(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Gb,n,t)}}const DJ={name:"htmlText",tokenize:IJ};function IJ(e,n,t){const i=this;let a,o,l;return f;function f(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),d}function d(P){return P===33?(e.consume(P),u):P===47?(e.consume(P),O):P===63?(e.consume(P),D):Oo(P)?(e.consume(P),q):t(P)}function u(P){return P===45?(e.consume(P),p):P===91?(e.consume(P),o=0,N):Oo(P)?(e.consume(P),I):t(P)}function p(P){return P===45?(e.consume(P),v):t(P)}function g(P){return P===null?t(P):P===45?(e.consume(P),b):Ot(P)?(l=g,z(P)):(e.consume(P),g)}function b(P){return P===45?(e.consume(P),v):g(P)}function v(P){return P===62?Y(P):P===45?b(P):g(P)}function N(P){const te="CDATA[";return P===te.charCodeAt(o++)?(e.consume(P),o===te.length?k:N):t(P)}function k(P){return P===null?t(P):P===93?(e.consume(P),E):Ot(P)?(l=k,z(P)):(e.consume(P),k)}function E(P){return P===93?(e.consume(P),T):k(P)}function T(P){return P===62?Y(P):P===93?(e.consume(P),T):k(P)}function I(P){return P===null||P===62?Y(P):Ot(P)?(l=I,z(P)):(e.consume(P),I)}function D(P){return P===null?t(P):P===63?(e.consume(P),U):Ot(P)?(l=D,z(P)):(e.consume(P),D)}function U(P){return P===62?Y(P):D(P)}function O(P){return Oo(P)?(e.consume(P),$):t(P)}function $(P){return P===45||Ra(P)?(e.consume(P),$):B(P)}function B(P){return Ot(P)?(l=B,z(P)):jn(P)?(e.consume(P),B):Y(P)}function q(P){return P===45||Ra(P)?(e.consume(P),q):P===47||P===62||ua(P)?H(P):t(P)}function H(P){return P===47?(e.consume(P),Y):P===58||P===95||Oo(P)?(e.consume(P),F):Ot(P)?(l=H,z(P)):jn(P)?(e.consume(P),H):Y(P)}function F(P){return P===45||P===46||P===58||P===95||Ra(P)?(e.consume(P),F):L(P)}function L(P){return P===61?(e.consume(P),Q):Ot(P)?(l=L,z(P)):jn(P)?(e.consume(P),L):H(P)}function Q(P){return P===null||P===60||P===61||P===62||P===96?t(P):P===34||P===39?(e.consume(P),a=P,ne):Ot(P)?(l=Q,z(P)):jn(P)?(e.consume(P),Q):(e.consume(P),ie)}function ne(P){return P===a?(e.consume(P),a=void 0,oe):P===null?t(P):Ot(P)?(l=ne,z(P)):(e.consume(P),ne)}function ie(P){return P===null||P===34||P===39||P===60||P===61||P===96?t(P):P===47||P===62||ua(P)?H(P):(e.consume(P),ie)}function oe(P){return P===47||P===62||ua(P)?H(P):t(P)}function Y(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),n):t(P)}function z(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),re}function re(P){return jn(P)?Kn(e,X,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):X(P)}function X(P){return e.enter("htmlTextData"),l(P)}}const Ww={name:"labelEnd",resolveAll:LJ,resolveTo:FJ,tokenize:$J},MJ={tokenize:zJ},RJ={tokenize:BJ},OJ={tokenize:UJ};function LJ(e){let n=-1;const t=[];for(;++n<e.length;){const i=e[n][1];if(t.push(e[n]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const a=i.type==="labelImage"?4:2;i.type="data",n+=a}}return e.length!==t.length&&zo(e,0,e.length,t),e}function FJ(e,n){let t=e.length,i=0,a,o,l,f;for(;t--;)if(a=e[t][1],o){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[t][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(e[t][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(o=t,a.type!=="labelLink")){i=2;break}}else a.type==="labelEnd"&&(l=t);const d={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[o][1].start},end:{...e[l][1].end}},p={type:"labelText",start:{...e[o+i+2][1].end},end:{...e[l-2][1].start}};return f=[["enter",d,n],["enter",u,n]],f=rs(f,e.slice(o+1,o+i+3)),f=rs(f,[["enter",p,n]]),f=rs(f,Yw(n.parser.constructs.insideSpan.null,e.slice(o+i+4,l-3),n)),f=rs(f,[["exit",p,n],e[l-2],e[l-1],["exit",u,n]]),f=rs(f,e.slice(l+1)),f=rs(f,[["exit",d,n]]),zo(e,o,e.length,f),e}function $J(e,n,t){const i=this;let a=i.events.length,o,l;for(;a--;)if((i.events[a][1].type==="labelImage"||i.events[a][1].type==="labelLink")&&!i.events[a][1]._balanced){o=i.events[a][1];break}return f;function f(b){return o?o._inactive?g(b):(l=i.parser.defined.includes(xh(i.sliceSerialize({start:o.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(b),e.exit("labelMarker"),e.exit("labelEnd"),d):t(b)}function d(b){return b===40?e.attempt(MJ,p,l?p:g)(b):b===91?e.attempt(RJ,p,l?u:g)(b):l?p(b):g(b)}function u(b){return e.attempt(OJ,p,g)(b)}function p(b){return n(b)}function g(b){return o._balanced=!0,t(b)}}function zJ(e,n,t){return i;function i(g){return e.enter("resource"),e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),a}function a(g){return ua(g)?zm(e,o)(g):o(g)}function o(g){return g===41?p(g):fT(e,l,f,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function l(g){return ua(g)?zm(e,d)(g):p(g)}function f(g){return t(g)}function d(g){return g===34||g===39||g===40?pT(e,u,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):p(g)}function u(g){return ua(g)?zm(e,p)(g):p(g)}function p(g){return g===41?(e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),e.exit("resource"),n):t(g)}}function BJ(e,n,t){const i=this;return a;function a(f){return hT.call(i,e,o,l,"reference","referenceMarker","referenceString")(f)}function o(f){return i.parser.defined.includes(xh(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?n(f):t(f)}function l(f){return t(f)}}function UJ(e,n,t){return i;function i(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),a}function a(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),n):t(o)}}const qJ={name:"labelStartImage",resolveAll:Ww.resolveAll,tokenize:VJ};function VJ(e,n,t){const i=this;return a;function a(f){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(f),e.exit("labelImageMarker"),o}function o(f){return f===91?(e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelImage"),l):t(f)}function l(f){return f===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(f):n(f)}}const HJ={name:"labelStartLink",resolveAll:Ww.resolveAll,tokenize:GJ};function GJ(e,n,t){const i=this;return a;function a(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(l):n(l)}}const O0={name:"lineEnding",tokenize:YJ};function YJ(e,n){return t;function t(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Kn(e,n,"linePrefix")}}const qx={name:"thematicBreak",tokenize:WJ};function WJ(e,n,t){let i=0,a;return o;function o(u){return e.enter("thematicBreak"),l(u)}function l(u){return a=u,f(u)}function f(u){return u===a?(e.enter("thematicBreakSequence"),d(u)):i>=3&&(u===null||Ot(u))?(e.exit("thematicBreak"),n(u)):t(u)}function d(u){return u===a?(e.consume(u),i++,d):(e.exit("thematicBreakSequence"),jn(u)?Kn(e,f,"whitespace")(u):f(u))}}const oa={continuation:{tokenize:XJ},exit:eK,name:"list",tokenize:KJ},QJ={partial:!0,tokenize:tK},JJ={partial:!0,tokenize:ZJ};function KJ(e,n,t){const i=this,a=i.events[i.events.length-1];let o=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return f;function f(v){const N=i.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(N==="listUnordered"?!i.containerState.marker||v===i.containerState.marker:$1(v)){if(i.containerState.type||(i.containerState.type=N,e.enter(N,{_container:!0})),N==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(qx,t,u)(v):u(v);if(!i.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(v)}return t(v)}function d(v){return $1(v)&&++l<10?(e.consume(v),d):(!i.interrupt||l<2)&&(i.containerState.marker?v===i.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),u(v)):t(v)}function u(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||v,e.check(Gb,i.interrupt?t:p,e.attempt(QJ,b,g))}function p(v){return i.containerState.initialBlankLine=!0,o++,b(v)}function g(v){return jn(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),b):t(v)}function b(v){return i.containerState.size=o+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,n(v)}}function XJ(e,n,t){const i=this;return i.containerState._closeFlow=void 0,e.check(Gb,a,o);function a(f){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Kn(e,n,"listItemIndent",i.containerState.size+1)(f)}function o(f){return i.containerState.furtherBlankLines||!jn(f)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,l(f)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(JJ,n,l)(f))}function l(f){return i.containerState._closeFlow=!0,i.interrupt=void 0,Kn(e,e.attempt(oa,n,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(f)}}function ZJ(e,n,t){const i=this;return Kn(e,a,"listItemIndent",i.containerState.size+1);function a(o){const l=i.events[i.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===i.containerState.size?n(o):t(o)}}function eK(e){e.exit(this.containerState.type)}function tK(e,n,t){const i=this;return Kn(e,a,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(o){const l=i.events[i.events.length-1];return!jn(o)&&l&&l[1].type==="listItemPrefixWhitespace"?n(o):t(o)}}const Gj={name:"setextUnderline",resolveTo:nK,tokenize:iK};function nK(e,n){let t=e.length,i,a,o;for(;t--;)if(e[t][0]==="enter"){if(e[t][1].type==="content"){i=t;break}e[t][1].type==="paragraph"&&(a=t)}else e[t][1].type==="content"&&e.splice(t,1),!o&&e[t][1].type==="definition"&&(o=t);const l={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",o?(e.splice(a,0,["enter",l,n]),e.splice(o+1,0,["exit",e[i][1],n]),e[i][1].end={...e[o][1].end}):e[i][1]=l,e.push(["exit",l,n]),e}function iK(e,n,t){const i=this;let a;return o;function o(u){let p=i.events.length,g;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){g=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||g)?(e.enter("setextHeadingLine"),a=u,l(u)):t(u)}function l(u){return e.enter("setextHeadingLineSequence"),f(u)}function f(u){return u===a?(e.consume(u),f):(e.exit("setextHeadingLineSequence"),jn(u)?Kn(e,d,"lineSuffix")(u):d(u))}function d(u){return u===null||Ot(u)?(e.exit("setextHeadingLine"),n(u)):t(u)}}const rK={tokenize:aK};function aK(e){const n=this,t=e.attempt(Gb,i,e.attempt(this.parser.constructs.flowInitial,a,Kn(e,e.attempt(this.parser.constructs.flow,a,e.attempt(uJ,a)),"linePrefix")));return t;function i(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),n.currentConstruct=void 0,t}function a(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n.currentConstruct=void 0,t}}const sK={resolveAll:gT()},oK=mT("string"),lK=mT("text");function mT(e){return{resolveAll:gT(e==="text"?cK:void 0),tokenize:n};function n(t){const i=this,a=this.parser.constructs[e],o=t.attempt(a,l,f);return l;function l(p){return u(p)?o(p):f(p)}function f(p){if(p===null){t.consume(p);return}return t.enter("data"),t.consume(p),d}function d(p){return u(p)?(t.exit("data"),o(p)):(t.consume(p),d)}function u(p){if(p===null)return!0;const g=a[p];let b=-1;if(g)for(;++b<g.length;){const v=g[b];if(!v.previous||v.previous.call(i,i.previous))return!0}return!1}}}function gT(e){return n;function n(t,i){let a=-1,o;for(;++a<=t.length;)o===void 0?t[a]&&t[a][1].type==="data"&&(o=a,a++):(!t[a]||t[a][1].type!=="data")&&(a!==o+2&&(t[o][1].end=t[a-1][1].end,t.splice(o+2,a-o-2),a=o+2),o=void 0);return e?e(t,i):t}}function cK(e,n){let t=0;for(;++t<=e.length;)if((t===e.length||e[t][1].type==="lineEnding")&&e[t-1][1].type==="data"){const i=e[t-1][1],a=n.sliceStream(i);let o=a.length,l=-1,f=0,d;for(;o--;){const u=a[o];if(typeof u=="string"){for(l=u.length;u.charCodeAt(l-1)===32;)f++,l--;if(l)break;l=-1}else if(u===-2)d=!0,f++;else if(u!==-1){o++;break}}if(n._contentTypeTextTrailing&&t===e.length&&(f=0),f){const u={type:t===e.length||d||f<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:i.start._bufferIndex+l,_index:i.start._index+o,line:i.end.line,column:i.end.column-f,offset:i.end.offset-f},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(e.splice(t,0,["enter",u,n],["exit",u,n]),t+=2)}t++}return e}const uK={42:oa,43:oa,45:oa,48:oa,49:oa,50:oa,51:oa,52:oa,53:oa,54:oa,55:oa,56:oa,57:oa,62:lT},dK={91:mJ},fK={[-2]:R0,[-1]:R0,32:R0},hK={35:wJ,42:qx,45:[Gj,qx],60:jJ,61:Gj,95:qx,96:Vj,126:Vj},pK={38:uT,92:cT},mK={[-5]:O0,[-4]:O0,[-3]:O0,33:qJ,38:uT,42:z1,60:[HQ,DJ],91:HJ,92:[bJ,cT],93:Ww,95:z1,96:rJ},gK={null:[z1,sK]},yK={null:[42,95]},xK={null:[]},bK=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:yK,contentInitial:dK,disable:xK,document:uK,flow:hK,flowInitial:fK,insideSpan:gK,string:pK,text:mK},Symbol.toStringTag,{value:"Module"}));function vK(e,n,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const a={},o=[];let l=[],f=[];const d={attempt:B(O),check:B($),consume:I,enter:D,exit:U,interrupt:B($,{interrupt:!0})},u={code:null,containerState:{},defineSkip:k,events:[],now:N,parser:e,previous:null,sliceSerialize:b,sliceStream:v,write:g};let p=n.tokenize.call(u,d);return n.resolveAll&&o.push(n),u;function g(L){return l=rs(l,L),E(),l[l.length-1]!==null?[]:(q(n,0),u.events=Yw(o,u.events,u),u.events)}function b(L,Q){return SK(v(L),Q)}function v(L){return wK(l,L)}function N(){const{_bufferIndex:L,_index:Q,line:ne,column:ie,offset:oe}=i;return{_bufferIndex:L,_index:Q,line:ne,column:ie,offset:oe}}function k(L){a[L.line]=L.column,F()}function E(){let L;for(;i._index<l.length;){const Q=l[i._index];if(typeof Q=="string")for(L=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===L&&i._bufferIndex<Q.length;)T(Q.charCodeAt(i._bufferIndex));else T(Q)}}function T(L){p=p(L)}function I(L){Ot(L)?(i.line++,i.column=1,i.offset+=L===-3?2:1,F()):L!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===l[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=L}function D(L,Q){const ne=Q||{};return ne.type=L,ne.start=N(),u.events.push(["enter",ne,u]),f.push(ne),ne}function U(L){const Q=f.pop();return Q.end=N(),u.events.push(["exit",Q,u]),Q}function O(L,Q){q(L,Q.from)}function $(L,Q){Q.restore()}function B(L,Q){return ne;function ne(ie,oe,Y){let z,re,X,P;return Array.isArray(ie)?se(ie):"tokenize"in ie?se([ie]):te(ie);function te(ce){return Le;function Le(Ne){const nt=Ne!==null&&ce[Ne],ut=Ne!==null&&ce.null,je=[...Array.isArray(nt)?nt:nt?[nt]:[],...Array.isArray(ut)?ut:ut?[ut]:[]];return se(je)(Ne)}}function se(ce){return z=ce,re=0,ce.length===0?Y:M(ce[re])}function M(ce){return Le;function Le(Ne){return P=H(),X=ce,ce.partial||(u.currentConstruct=ce),ce.name&&u.parser.constructs.disable.null.includes(ce.name)?we():ce.tokenize.call(Q?Object.assign(Object.create(u),Q):u,d,fe,we)(Ne)}}function fe(ce){return L(X,P),oe}function we(ce){return P.restore(),++re<z.length?M(z[re]):Y}}}function q(L,Q){L.resolveAll&&!o.includes(L)&&o.push(L),L.resolve&&zo(u.events,Q,u.events.length-Q,L.resolve(u.events.slice(Q),u)),L.resolveTo&&(u.events=L.resolveTo(u.events,u))}function H(){const L=N(),Q=u.previous,ne=u.currentConstruct,ie=u.events.length,oe=Array.from(f);return{from:ie,restore:Y};function Y(){i=L,u.previous=Q,u.currentConstruct=ne,u.events.length=ie,f=oe,F()}}function F(){i.line in a&&i.column<2&&(i.column=a[i.line],i.offset+=a[i.line]-1)}}function wK(e,n){const t=n.start._index,i=n.start._bufferIndex,a=n.end._index,o=n.end._bufferIndex;let l;if(t===a)l=[e[t].slice(i,o)];else{if(l=e.slice(t,a),i>-1){const f=l[0];typeof f=="string"?l[0]=f.slice(i):l.shift()}o>0&&l.push(e[a].slice(0,o))}return l}function SK(e,n){let t=-1;const i=[];let a;for(;++t<e.length;){const o=e[t];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=n?" ":"	";break}case-1:{if(!n&&a)continue;l=" ";break}default:l=String.fromCharCode(o)}a=o===-2,i.push(l)}return i.join("")}function NK(e){const i={constructs:AQ([bK,...(e||{}).extensions||[]]),content:a(FQ),defined:[],document:a(zQ),flow:a(rK),lazy:{},string:a(oK),text:a(lK)};return i;function a(o){return l;function l(f){return vK(i,o,f)}}}function CK(e){for(;!dT(e););return e}const Yj=/[\0\t\n\r]/g;function jK(){let e=1,n="",t=!0,i;return a;function a(o,l,f){const d=[];let u,p,g,b,v;for(o=n+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),g=0,n="",t&&(o.charCodeAt(0)===65279&&g++,t=void 0);g<o.length;){if(Yj.lastIndex=g,u=Yj.exec(o),b=u&&u.index!==void 0?u.index:o.length,v=o.charCodeAt(b),!u){n=o.slice(g);break}if(v===10&&g===b&&i)d.push(-3),i=void 0;else switch(i&&(d.push(-5),i=void 0),g<b&&(d.push(o.slice(g,b)),e+=b-g),v){case 0:{d.push(65533),e++;break}case 9:{for(p=Math.ceil(e/4)*4,d.push(-2);e++<p;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:i=!0,e=1}g=b+1}return f&&(i&&d.push(-5),n&&d.push(n),d.push(null)),d}}const _K=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function yT(e){return e.replace(_K,kK)}function kK(e,n,t){if(n)return n;if(t.charCodeAt(0)===35){const a=t.charCodeAt(1),o=a===120||a===88;return oT(t.slice(o?2:1),o?16:10)}return Gw(t)||e}function Bm(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Wj(e.position):"start"in e||"end"in e?Wj(e):"line"in e||"column"in e?B1(e):""}function B1(e){return Qj(e&&e.line)+":"+Qj(e&&e.column)}function Wj(e){return B1(e&&e.start)+"-"+B1(e&&e.end)}function Qj(e){return e&&typeof e=="number"?e:1}const xT={}.hasOwnProperty;function EK(e,n,t){return typeof n!="string"&&(t=n,n=void 0),TK(t)(CK(NK(t).document().write(jK()(e,n,!0))))}function TK(e){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Ft),autolinkProtocol:H,autolinkEmail:H,atxHeading:o(Ve),blockQuote:o(ut),characterEscape:H,characterReference:H,codeFenced:o(je),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(je,l),codeText:o(ye,l),codeTextData:H,data:H,codeFlowValue:H,definition:o(Ae),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(De),hardBreakEscape:o(it),hardBreakTrailing:o(it),htmlFlow:o(Ke,l),htmlFlowData:H,htmlText:o(Ke,l),htmlTextData:H,image:o(rt),label:l,link:o(Ft),listItem:o(ve),listItemValue:b,listOrdered:o(_t,g),listUnordered:o(_t),paragraph:o(qe),reference:M,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(Ve),strong:o(We),thematicBreak:o(J)},exit:{atxHeading:d(),atxHeadingSequence:O,autolink:d(),autolinkEmail:nt,autolinkProtocol:Ne,blockQuote:d(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:we,characterReferenceMarkerNumeric:we,characterReferenceValue:ce,characterReference:Le,codeFenced:d(E),codeFencedFence:k,codeFencedFenceInfo:v,codeFencedFenceMeta:N,codeFlowValue:F,codeIndented:d(T),codeText:d(oe),codeTextData:F,data:F,definition:d(),definitionDestinationString:U,definitionLabelString:I,definitionTitleString:D,emphasis:d(),hardBreakEscape:d(Q),hardBreakTrailing:d(Q),htmlFlow:d(ne),htmlFlowData:F,htmlText:d(ie),htmlTextData:F,image:d(z),label:X,labelText:re,lineEnding:L,link:d(Y),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:fe,resourceDestinationString:P,resourceTitleString:te,resource:se,setextHeading:d(q),setextHeadingLineSequence:B,setextHeadingText:$,strong:d(),thematicBreak:d()}};bT(n,(e||{}).mdastExtensions||[]);const t={};return i;function i(G){let K={type:"root",children:[]};const Se={stack:[K],tokenStack:[],config:n,enter:f,exit:u,buffer:l,resume:p,data:t},Ee=[];let Be=-1;for(;++Be<G.length;)if(G[Be][1].type==="listOrdered"||G[Be][1].type==="listUnordered")if(G[Be][0]==="enter")Ee.push(Be);else{const at=Ee.pop();Be=a(G,at,Be)}for(Be=-1;++Be<G.length;){const at=n[G[Be][0]];xT.call(at,G[Be][1].type)&&at[G[Be][1].type].call(Object.assign({sliceSerialize:G[Be][2].sliceSerialize},Se),G[Be][1])}if(Se.tokenStack.length>0){const at=Se.tokenStack[Se.tokenStack.length-1];(at[1]||Jj).call(Se,void 0,at[0])}for(K.position={start:Fc(G.length>0?G[0][1].start:{line:1,column:1,offset:0}),end:Fc(G.length>0?G[G.length-2][1].end:{line:1,column:1,offset:0})},Be=-1;++Be<n.transforms.length;)K=n.transforms[Be](K)||K;return K}function a(G,K,Se){let Ee=K-1,Be=-1,at=!1,gt,pt,Ue,Ze;for(;++Ee<=Se;){const Fe=G[Ee];switch(Fe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Fe[0]==="enter"?Be++:Be--,Ze=void 0;break}case"lineEndingBlank":{Fe[0]==="enter"&&(gt&&!Ze&&!Be&&!Ue&&(Ue=Ee),Ze=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ze=void 0}if(!Be&&Fe[0]==="enter"&&Fe[1].type==="listItemPrefix"||Be===-1&&Fe[0]==="exit"&&(Fe[1].type==="listUnordered"||Fe[1].type==="listOrdered")){if(gt){let ct=Ee;for(pt=void 0;ct--;){const Xe=G[ct];if(Xe[1].type==="lineEnding"||Xe[1].type==="lineEndingBlank"){if(Xe[0]==="exit")continue;pt&&(G[pt][1].type="lineEndingBlank",at=!0),Xe[1].type="lineEnding",pt=ct}else if(!(Xe[1].type==="linePrefix"||Xe[1].type==="blockQuotePrefix"||Xe[1].type==="blockQuotePrefixWhitespace"||Xe[1].type==="blockQuoteMarker"||Xe[1].type==="listItemIndent"))break}Ue&&(!pt||Ue<pt)&&(gt._spread=!0),gt.end=Object.assign({},pt?G[pt][1].start:Fe[1].end),G.splice(pt||Ee,0,["exit",gt,Fe[2]]),Ee++,Se++}if(Fe[1].type==="listItemPrefix"){const ct={type:"listItem",_spread:!1,start:Object.assign({},Fe[1].start),end:void 0};gt=ct,G.splice(Ee,0,["enter",ct,Fe[2]]),Ee++,Se++,Ue=void 0,Ze=!0}}}return G[K][1]._spread=at,Se}function o(G,K){return Se;function Se(Ee){f.call(this,G(Ee),Ee),K&&K.call(this,Ee)}}function l(){this.stack.push({type:"fragment",children:[]})}function f(G,K,Se){this.stack[this.stack.length-1].children.push(G),this.stack.push(G),this.tokenStack.push([K,Se||void 0]),G.position={start:Fc(K.start),end:void 0}}function d(G){return K;function K(Se){G&&G.call(this,Se),u.call(this,Se)}}function u(G,K){const Se=this.stack.pop(),Ee=this.tokenStack.pop();if(Ee)Ee[0].type!==G.type&&(K?K.call(this,G,Ee[0]):(Ee[1]||Jj).call(this,G,Ee[0]));else throw new Error("Cannot close `"+G.type+"` ("+Bm({start:G.start,end:G.end})+"): its not open");Se.position.end=Fc(G.end)}function p(){return Hw(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(G){if(this.data.expectingFirstListItemValue){const K=this.stack[this.stack.length-2];K.start=Number.parseInt(this.sliceSerialize(G),10),this.data.expectingFirstListItemValue=void 0}}function v(){const G=this.resume(),K=this.stack[this.stack.length-1];K.lang=G}function N(){const G=this.resume(),K=this.stack[this.stack.length-1];K.meta=G}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const G=this.resume(),K=this.stack[this.stack.length-1];K.value=G.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function T(){const G=this.resume(),K=this.stack[this.stack.length-1];K.value=G.replace(/(\r?\n|\r)$/g,"")}function I(G){const K=this.resume(),Se=this.stack[this.stack.length-1];Se.label=K,Se.identifier=xh(this.sliceSerialize(G)).toLowerCase()}function D(){const G=this.resume(),K=this.stack[this.stack.length-1];K.title=G}function U(){const G=this.resume(),K=this.stack[this.stack.length-1];K.url=G}function O(G){const K=this.stack[this.stack.length-1];if(!K.depth){const Se=this.sliceSerialize(G).length;K.depth=Se}}function $(){this.data.setextHeadingSlurpLineEnding=!0}function B(G){const K=this.stack[this.stack.length-1];K.depth=this.sliceSerialize(G).codePointAt(0)===61?1:2}function q(){this.data.setextHeadingSlurpLineEnding=void 0}function H(G){const Se=this.stack[this.stack.length-1].children;let Ee=Se[Se.length-1];(!Ee||Ee.type!=="text")&&(Ee=ze(),Ee.position={start:Fc(G.start),end:void 0},Se.push(Ee)),this.stack.push(Ee)}function F(G){const K=this.stack.pop();K.value+=this.sliceSerialize(G),K.position.end=Fc(G.end)}function L(G){const K=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Se=K.children[K.children.length-1];Se.position.end=Fc(G.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(K.type)&&(H.call(this,G),F.call(this,G))}function Q(){this.data.atHardBreak=!0}function ne(){const G=this.resume(),K=this.stack[this.stack.length-1];K.value=G}function ie(){const G=this.resume(),K=this.stack[this.stack.length-1];K.value=G}function oe(){const G=this.resume(),K=this.stack[this.stack.length-1];K.value=G}function Y(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const K=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=K,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function z(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const K=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=K,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function re(G){const K=this.sliceSerialize(G),Se=this.stack[this.stack.length-2];Se.label=yT(K),Se.identifier=xh(K).toLowerCase()}function X(){const G=this.stack[this.stack.length-1],K=this.resume(),Se=this.stack[this.stack.length-1];if(this.data.inReference=!0,Se.type==="link"){const Ee=G.children;Se.children=Ee}else Se.alt=K}function P(){const G=this.resume(),K=this.stack[this.stack.length-1];K.url=G}function te(){const G=this.resume(),K=this.stack[this.stack.length-1];K.title=G}function se(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function fe(G){const K=this.resume(),Se=this.stack[this.stack.length-1];Se.label=K,Se.identifier=xh(this.sliceSerialize(G)).toLowerCase(),this.data.referenceType="full"}function we(G){this.data.characterReferenceType=G.type}function ce(G){const K=this.sliceSerialize(G),Se=this.data.characterReferenceType;let Ee;Se?(Ee=oT(K,Se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ee=Gw(K);const Be=this.stack[this.stack.length-1];Be.value+=Ee}function Le(G){const K=this.stack.pop();K.position.end=Fc(G.end)}function Ne(G){F.call(this,G);const K=this.stack[this.stack.length-1];K.url=this.sliceSerialize(G)}function nt(G){F.call(this,G);const K=this.stack[this.stack.length-1];K.url="mailto:"+this.sliceSerialize(G)}function ut(){return{type:"blockquote",children:[]}}function je(){return{type:"code",lang:null,meta:null,value:""}}function ye(){return{type:"inlineCode",value:""}}function Ae(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function De(){return{type:"emphasis",children:[]}}function Ve(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Ke(){return{type:"html",value:""}}function rt(){return{type:"image",title:null,url:"",alt:null}}function Ft(){return{type:"link",title:null,url:"",children:[]}}function _t(G){return{type:"list",ordered:G.type==="listOrdered",start:null,spread:G._spread,children:[]}}function ve(G){return{type:"listItem",spread:G._spread,checked:null,children:[]}}function qe(){return{type:"paragraph",children:[]}}function We(){return{type:"strong",children:[]}}function ze(){return{type:"text",value:""}}function J(){return{type:"thematicBreak"}}}function Fc(e){return{line:e.line,column:e.column,offset:e.offset}}function bT(e,n){let t=-1;for(;++t<n.length;){const i=n[t];Array.isArray(i)?bT(e,i):AK(e,i)}}function AK(e,n){let t;for(t in n)if(xT.call(n,t))switch(t){case"canContainEols":{const i=n[t];i&&e[t].push(...i);break}case"transforms":{const i=n[t];i&&e[t].push(...i);break}case"enter":case"exit":{const i=n[t];i&&Object.assign(e[t],i);break}}}function Jj(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+Bm({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+Bm({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+Bm({start:n.start,end:n.end})+") is still open")}function PK(e){const n=this;n.parser=t;function t(i){return EK(i,{...n.data("settings"),...e,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}const Kj={}.hasOwnProperty;function vT(e,n){const t=n||{};function i(a,...o){let l=i.invalid;const f=i.handlers;if(a&&Kj.call(a,e)){const d=String(a[e]);l=Kj.call(f,d)?f[d]:i.unknown}if(l)return l.call(this,a,...o)}return i.handlers=t.handlers||{},i.invalid=t.invalid,i.unknown=t.unknown,i}const DK={}.hasOwnProperty;function wT(e,n){let t=-1,i;if(n.extensions)for(;++t<n.extensions.length;)wT(e,n.extensions[t]);for(i in n)if(DK.call(n,i))switch(i){case"extensions":break;case"unsafe":{Xj(e[i],n[i]);break}case"join":{Xj(e[i],n[i]);break}case"handlers":{IK(e[i],n[i]);break}default:e.options[i]=n[i]}return e}function Xj(e,n){n&&e.push(...n)}function IK(e,n){n&&Object.assign(e,n)}function MK(e,n,t,i){const a=t.enter("blockquote"),o=t.createTracker(i);o.move("> "),o.shift(2);const l=t.indentLines(t.containerFlow(e,o.current()),RK);return a(),l}function RK(e,n,t){return">"+(t?"":" ")+e}function ST(e,n){return Zj(e,n.inConstruct,!0)&&!Zj(e,n.notInConstruct,!1)}function Zj(e,n,t){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return t;let i=-1;for(;++i<n.length;)if(e.includes(n[i]))return!0;return!1}function e_(e,n,t,i){let a=-1;for(;++a<t.unsafe.length;)if(t.unsafe[a].character===`
`&&ST(t.stack,t.unsafe[a]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function OK(e,n){const t=String(e);let i=t.indexOf(n),a=i,o=0,l=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===a?++o>l&&(l=o):o=1,a=i+n.length,i=t.indexOf(n,a);return l}function U1(e,n){return!!(n.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function LK(e){const n=e.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function FK(e,n,t,i){const a=LK(t),o=e.value||"",l=a==="`"?"GraveAccent":"Tilde";if(U1(e,t)){const g=t.enter("codeIndented"),b=t.indentLines(o,$K);return g(),b}const f=t.createTracker(i),d=a.repeat(Math.max(OK(o,a)+1,3)),u=t.enter("codeFenced");let p=f.move(d);if(e.lang){const g=t.enter(`codeFencedLang${l}`);p+=f.move(t.safe(e.lang,{before:p,after:" ",encode:["`"],...f.current()})),g()}if(e.lang&&e.meta){const g=t.enter(`codeFencedMeta${l}`);p+=f.move(" "),p+=f.move(t.safe(e.meta,{before:p,after:`
`,encode:["`"],...f.current()})),g()}return p+=f.move(`
`),o&&(p+=f.move(o+`
`)),p+=f.move(d),u(),p}function $K(e,n,t){return(t?"":"    ")+e}function Qw(e){const n=e.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function zK(e,n,t,i){const a=Qw(t),o=a==='"'?"Quote":"Apostrophe",l=t.enter("definition");let f=t.enter("label");const d=t.createTracker(i);let u=d.move("[");return u+=d.move(t.safe(t.associationId(e),{before:u,after:"]",...d.current()})),u+=d.move("]: "),f(),!e.url||/[\0- \u007F]/.test(e.url)?(f=t.enter("destinationLiteral"),u+=d.move("<"),u+=d.move(t.safe(e.url,{before:u,after:">",...d.current()})),u+=d.move(">")):(f=t.enter("destinationRaw"),u+=d.move(t.safe(e.url,{before:u,after:e.title?" ":`
`,...d.current()}))),f(),e.title&&(f=t.enter(`title${o}`),u+=d.move(" "+a),u+=d.move(t.safe(e.title,{before:u,after:a,...d.current()})),u+=d.move(a),f()),l(),u}function BK(e){const n=e.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function qc(e){return"&#x"+e.toString(16).toUpperCase()+";"}function gb(e,n,t){const i=mb(e),a=mb(n);return i===void 0?a===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}NT.peek=UK;function NT(e,n,t,i){const a=BK(t),o=t.enter("emphasis"),l=t.createTracker(i),f=l.move(a);let d=l.move(t.containerPhrasing(e,{after:a,before:f,...l.current()}));const u=d.charCodeAt(0),p=gb(i.before.charCodeAt(i.before.length-1),u,a);p.inside&&(d=qc(u)+d.slice(1));const g=d.charCodeAt(d.length-1),b=gb(i.after.charCodeAt(0),g,a);b.inside&&(d=d.slice(0,-1)+qc(g));const v=l.move(a);return o(),t.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},f+d+v}function UK(e,n,t){return t.options.emphasis||"*"}const Jw=function(e){if(e==null)return GK;if(typeof e=="function")return Yb(e);if(typeof e=="object")return Array.isArray(e)?qK(e):VK(e);if(typeof e=="string")return HK(e);throw new Error("Expected function, string, or object as test")};function qK(e){const n=[];let t=-1;for(;++t<e.length;)n[t]=Jw(e[t]);return Yb(i);function i(...a){let o=-1;for(;++o<n.length;)if(n[o].apply(this,a))return!0;return!1}}function VK(e){const n=e;return Yb(t);function t(i){const a=i;let o;for(o in e)if(a[o]!==n[o])return!1;return!0}}function HK(e){return Yb(n);function n(t){return t&&t.type===e}}function Yb(e){return n;function n(t,i,a){return!!(YK(t)&&e.call(this,t,typeof i=="number"?i:void 0,a||void 0))}}function GK(){return!0}function YK(e){return e!==null&&typeof e=="object"&&"type"in e}const CT=[],WK=!0,q1=!1,QK="skip";function JK(e,n,t,i){let a;typeof n=="function"&&typeof t!="function"?(i=t,t=n):a=n;const o=Jw(a),l=i?-1:1;f(e,void 0,[])();function f(d,u,p){const g=d&&typeof d=="object"?d:{};if(typeof g.type=="string"){const v=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(d.type+(v?"<"+v+">":""))+")"})}return b;function b(){let v=CT,N,k,E;if((!n||o(d,u,p[p.length-1]||void 0))&&(v=KK(t(d,p)),v[0]===q1))return v;if("children"in d&&d.children){const T=d;if(T.children&&v[0]!==QK)for(k=(i?T.children.length:-1)+l,E=p.concat(T);k>-1&&k<T.children.length;){const I=T.children[k];if(N=f(I,k,E)(),N[0]===q1)return N;k=typeof N[1]=="number"?N[1]:k+l}}return v}}}function KK(e){return Array.isArray(e)?e:typeof e=="number"?[WK,e]:e==null?CT:[e]}function jT(e,n,t,i){let a,o,l;typeof n=="function"?(o=void 0,l=n,a=t):(o=n,l=t,a=i),JK(e,o,f,a);function f(d,u){const p=u[u.length-1],g=p?p.children.indexOf(d):void 0;return l(d,g,p)}}function _T(e,n){let t=!1;return jT(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return t=!0,q1}),!!((!e.depth||e.depth<3)&&Hw(e)&&(n.options.setext||t))}function XK(e,n,t,i){const a=Math.max(Math.min(6,e.depth||1),1),o=t.createTracker(i);if(_T(e,t)){const p=t.enter("headingSetext"),g=t.enter("phrasing"),b=t.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return g(),p(),b+`
`+(a===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const l="#".repeat(a),f=t.enter("headingAtx"),d=t.enter("phrasing");o.move(l+" ");let u=t.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(u)&&(u=qc(u.charCodeAt(0))+u.slice(1)),u=u?l+" "+u:l,t.options.closeAtx&&(u+=" "+l),d(),f(),u}kT.peek=ZK;function kT(e){return e.value||""}function ZK(){return"<"}ET.peek=eX;function ET(e,n,t,i){const a=Qw(t),o=a==='"'?"Quote":"Apostrophe",l=t.enter("image");let f=t.enter("label");const d=t.createTracker(i);let u=d.move("![");return u+=d.move(t.safe(e.alt,{before:u,after:"]",...d.current()})),u+=d.move("]("),f(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(f=t.enter("destinationLiteral"),u+=d.move("<"),u+=d.move(t.safe(e.url,{before:u,after:">",...d.current()})),u+=d.move(">")):(f=t.enter("destinationRaw"),u+=d.move(t.safe(e.url,{before:u,after:e.title?" ":")",...d.current()}))),f(),e.title&&(f=t.enter(`title${o}`),u+=d.move(" "+a),u+=d.move(t.safe(e.title,{before:u,after:a,...d.current()})),u+=d.move(a),f()),u+=d.move(")"),l(),u}function eX(){return"!"}TT.peek=tX;function TT(e,n,t,i){const a=e.referenceType,o=t.enter("imageReference");let l=t.enter("label");const f=t.createTracker(i);let d=f.move("![");const u=t.safe(e.alt,{before:d,after:"]",...f.current()});d+=f.move(u+"]["),l();const p=t.stack;t.stack=[],l=t.enter("reference");const g=t.safe(t.associationId(e),{before:d,after:"]",...f.current()});return l(),t.stack=p,o(),a==="full"||!u||u!==g?d+=f.move(g+"]"):a==="shortcut"?d=d.slice(0,-1):d+=f.move("]"),d}function tX(){return"!"}AT.peek=nX;function AT(e,n,t){let i=e.value||"",a="`",o=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(i);)a+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++o<t.unsafe.length;){const l=t.unsafe[o],f=t.compilePattern(l);let d;if(l.atBreak)for(;d=f.exec(i);){let u=d.index;i.charCodeAt(u)===10&&i.charCodeAt(u-1)===13&&u--,i=i.slice(0,u)+" "+i.slice(d.index+1)}}return a+i+a}function nX(){return"`"}function PT(e,n){const t=Hw(e);return!!(!n.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(t===e.url||"mailto:"+t===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}DT.peek=iX;function DT(e,n,t,i){const a=Qw(t),o=a==='"'?"Quote":"Apostrophe",l=t.createTracker(i);let f,d;if(PT(e,t)){const p=t.stack;t.stack=[],f=t.enter("autolink");let g=l.move("<");return g+=l.move(t.containerPhrasing(e,{before:g,after:">",...l.current()})),g+=l.move(">"),f(),t.stack=p,g}f=t.enter("link"),d=t.enter("label");let u=l.move("[");return u+=l.move(t.containerPhrasing(e,{before:u,after:"](",...l.current()})),u+=l.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=t.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(t.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(d=t.enter("destinationRaw"),u+=l.move(t.safe(e.url,{before:u,after:e.title?" ":")",...l.current()}))),d(),e.title&&(d=t.enter(`title${o}`),u+=l.move(" "+a),u+=l.move(t.safe(e.title,{before:u,after:a,...l.current()})),u+=l.move(a),d()),u+=l.move(")"),f(),u}function iX(e,n,t){return PT(e,t)?"<":"["}IT.peek=rX;function IT(e,n,t,i){const a=e.referenceType,o=t.enter("linkReference");let l=t.enter("label");const f=t.createTracker(i);let d=f.move("[");const u=t.containerPhrasing(e,{before:d,after:"]",...f.current()});d+=f.move(u+"]["),l();const p=t.stack;t.stack=[],l=t.enter("reference");const g=t.safe(t.associationId(e),{before:d,after:"]",...f.current()});return l(),t.stack=p,o(),a==="full"||!u||u!==g?d+=f.move(g+"]"):a==="shortcut"?d=d.slice(0,-1):d+=f.move("]"),d}function rX(){return"["}function Kw(e){const n=e.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function aX(e){const n=Kw(e),t=e.options.bulletOther;if(!t)return n==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+t+"`) to be different");return t}function sX(e){const n=e.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function MT(e){const n=e.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function oX(e,n,t,i){const a=t.enter("list"),o=t.bulletCurrent;let l=e.ordered?sX(t):Kw(t);const f=e.ordered?l==="."?")":".":aX(t);let d=n&&t.bulletLastUsed?l===t.bulletLastUsed:!1;if(!e.ordered){const p=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(d=!0),MT(t)===l&&p){let g=-1;for(;++g<e.children.length;){const b=e.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(l=f),t.bulletCurrent=l;const u=t.containerFlow(e,i);return t.bulletLastUsed=l,t.bulletCurrent=o,a(),u}function lX(e){const n=e.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function cX(e,n,t,i){const a=lX(t);let o=t.bulletCurrent||Kw(t);n&&n.type==="list"&&n.ordered&&(o=(typeof n.start=="number"&&n.start>-1?n.start:1)+(t.options.incrementListMarker===!1?0:n.children.indexOf(e))+o);let l=o.length+1;(a==="tab"||a==="mixed"&&(n&&n.type==="list"&&n.spread||e.spread))&&(l=Math.ceil(l/4)*4);const f=t.createTracker(i);f.move(o+" ".repeat(l-o.length)),f.shift(l);const d=t.enter("listItem"),u=t.indentLines(t.containerFlow(e,f.current()),p);return d(),u;function p(g,b,v){return b?(v?"":" ".repeat(l))+g:(v?o:o+" ".repeat(l-o.length))+g}}function uX(e,n,t,i){const a=t.enter("paragraph"),o=t.enter("phrasing"),l=t.containerPhrasing(e,i);return o(),a(),l}const dX=Jw(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function fX(e,n,t,i){return(e.children.some(function(l){return dX(l)})?t.containerPhrasing:t.containerFlow).call(t,e,i)}function hX(e){const n=e.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}RT.peek=pX;function RT(e,n,t,i){const a=hX(t),o=t.enter("strong"),l=t.createTracker(i),f=l.move(a+a);let d=l.move(t.containerPhrasing(e,{after:a,before:f,...l.current()}));const u=d.charCodeAt(0),p=gb(i.before.charCodeAt(i.before.length-1),u,a);p.inside&&(d=qc(u)+d.slice(1));const g=d.charCodeAt(d.length-1),b=gb(i.after.charCodeAt(0),g,a);b.inside&&(d=d.slice(0,-1)+qc(g));const v=l.move(a+a);return o(),t.attentionEncodeSurroundingInfo={after:b.outside,before:p.outside},f+d+v}function pX(e,n,t){return t.options.strong||"*"}function mX(e,n,t,i){return t.safe(e.value,i)}function gX(e){const n=e.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function yX(e,n,t){const i=(MT(t)+(t.options.ruleSpaces?" ":"")).repeat(gX(t));return t.options.ruleSpaces?i.slice(0,-1):i}const xX={blockquote:MK,break:e_,code:FK,definition:zK,emphasis:NT,hardBreak:e_,heading:XK,html:kT,image:ET,imageReference:TT,inlineCode:AT,link:DT,linkReference:IT,list:oX,listItem:cX,paragraph:uX,root:fX,strong:RT,text:mX,thematicBreak:yX},bX=[vX];function vX(e,n,t,i){if(n.type==="code"&&U1(n,i)&&(e.type==="list"||e.type===n.type&&U1(e,i)))return!1;if("spread"in t&&typeof t.spread=="boolean")return e.type==="paragraph"&&(e.type===n.type||n.type==="definition"||n.type==="heading"&&_T(n,i))?void 0:t.spread?1:0}const md=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],wX=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:md},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:md},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:md},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:md},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:md},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:md},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:md},{atBreak:!0,character:"~"}];function SX(e){return e.label||!e.identifier?e.label||"":yT(e.identifier)}function NX(e){if(!e._compiled){const n=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((n?"("+n+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function CX(e,n,t){const i=n.indexStack,a=e.children||[],o=[];let l=-1,f=t.before,d;i.push(-1);let u=n.createTracker(t);for(;++l<a.length;){const p=a[l];let g;if(i[i.length-1]=l,l+1<a.length){let N=n.handle.handlers[a[l+1].type];N&&N.peek&&(N=N.peek),g=N?N(a[l+1],e,n,{before:"",after:"",...u.current()}).charAt(0):""}else g=t.after;o.length>0&&(f==="\r"||f===`
`)&&p.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),f=" ",u=n.createTracker(t),u.move(o.join("")));let b=n.handle(p,e,n,{...u.current(),after:g,before:f});d&&d===b.slice(0,1)&&(b=qc(d.charCodeAt(0))+b.slice(1));const v=n.attentionEncodeSurroundingInfo;n.attentionEncodeSurroundingInfo=void 0,d=void 0,v&&(o.length>0&&v.before&&f===o[o.length-1].slice(-1)&&(o[o.length-1]=o[o.length-1].slice(0,-1)+qc(f.charCodeAt(0))),v.after&&(d=g)),u.move(b),o.push(b),f=b.slice(-1)}return i.pop(),o.join("")}function jX(e,n,t){const i=n.indexStack,a=e.children||[],o=n.createTracker(t),l=[];let f=-1;for(i.push(-1);++f<a.length;){const d=a[f];i[i.length-1]=f,l.push(o.move(n.handle(d,e,n,{before:`
`,after:`
`,...o.current()}))),d.type!=="list"&&(n.bulletLastUsed=void 0),f<a.length-1&&l.push(o.move(_X(d,a[f+1],e,n)))}return i.pop(),l.join("")}function _X(e,n,t,i){let a=i.join.length;for(;a--;){const o=i.join[a](e,n,t,i);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}const kX=/\r?\n|\r/g;function EX(e,n){const t=[];let i=0,a=0,o;for(;o=kX.exec(e);)l(e.slice(i,o.index)),t.push(o[0]),i=o.index+o[0].length,a++;return l(e.slice(i)),t.join("");function l(f){t.push(n(f,a,!f))}}function TX(e,n,t){const i=(t.before||"")+(n||"")+(t.after||""),a=[],o=[],l={};let f=-1;for(;++f<e.unsafe.length;){const p=e.unsafe[f];if(!ST(e.stack,p))continue;const g=e.compilePattern(p);let b;for(;b=g.exec(i);){const v="before"in p||!!p.atBreak,N="after"in p,k=b.index+(v?b[1].length:0);a.includes(k)?(l[k].before&&!v&&(l[k].before=!1),l[k].after&&!N&&(l[k].after=!1)):(a.push(k),l[k]={before:v,after:N})}}a.sort(AX);let d=t.before?t.before.length:0;const u=i.length-(t.after?t.after.length:0);for(f=-1;++f<a.length;){const p=a[f];p<d||p>=u||p+1<u&&a[f+1]===p+1&&l[p].after&&!l[p+1].before&&!l[p+1].after||a[f-1]===p-1&&l[p].before&&!l[p-1].before&&!l[p-1].after||(d!==p&&o.push(t_(i.slice(d,p),"\\")),d=p,/[!-/:-@[-`{-~]/.test(i.charAt(p))&&(!t.encode||!t.encode.includes(i.charAt(p)))?o.push("\\"):(o.push(qc(i.charCodeAt(p))),d++))}return o.push(t_(i.slice(d,u),t.after)),o.join("")}function AX(e,n){return e-n}function t_(e,n){const t=/\\(?=[!-/:-@[-`{-~])/g,i=[],a=[],o=e+n;let l=-1,f=0,d;for(;d=t.exec(o);)i.push(d.index);for(;++l<i.length;)f!==i[l]&&a.push(e.slice(f,i[l])),a.push("\\"),f=i[l];return a.push(e.slice(f)),a.join("")}function PX(e){const n=e||{},t=n.now||{};let i=n.lineShift||0,a=t.line||1,o=t.column||1;return{move:d,current:l,shift:f};function l(){return{now:{line:a,column:o},lineShift:i}}function f(u){i+=u}function d(u){const p=u||"",g=p.split(/\r?\n|\r/g),b=g[g.length-1];return a+=g.length-1,o=g.length===1?o+b.length:1+b.length+i,p}}function DX(e,n){const t=n||{},i={associationId:SX,containerPhrasing:OX,containerFlow:LX,createTracker:PX,compilePattern:NX,enter:o,handlers:{...xX},handle:void 0,indentLines:EX,indexStack:[],join:[...bX],options:{},safe:FX,stack:[],unsafe:[...wX]};wT(i,t),i.options.tightDefinitions&&i.join.push(RX),i.handle=vT("type",{invalid:IX,unknown:MX,handlers:i.handlers});let a=i.handle(e,void 0,i,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return a&&a.charCodeAt(a.length-1)!==10&&a.charCodeAt(a.length-1)!==13&&(a+=`
`),a;function o(l){return i.stack.push(l),f;function f(){i.stack.pop()}}}function IX(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function MX(e){const n=e;throw new Error("Cannot handle unknown node `"+n.type+"`")}function RX(e,n){if(e.type==="definition"&&e.type===n.type)return 0}function OX(e,n){return CX(e,this,n)}function LX(e,n){return jX(e,this,n)}function FX(e,n){return TX(this,e,n)}function $X(e){const n=this;n.compiler=t;function t(i){return DX(i,{...n.data("settings"),...e,extensions:n.data("toMarkdownExtensions")||[]})}}function n_(e){if(e)throw e}var L0,i_;function zX(){if(i_)return L0;i_=1;var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(u){return typeof Array.isArray=="function"?Array.isArray(u):n.call(u)==="[object Array]"},o=function(u){if(!u||n.call(u)!=="[object Object]")return!1;var p=e.call(u,"constructor"),g=u.constructor&&u.constructor.prototype&&e.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!p&&!g)return!1;var b;for(b in u);return typeof b>"u"||e.call(u,b)},l=function(u,p){t&&p.name==="__proto__"?t(u,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):u[p.name]=p.newValue},f=function(u,p){if(p==="__proto__")if(e.call(u,p)){if(i)return i(u,p).value}else return;return u[p]};return L0=function d(){var u,p,g,b,v,N,k=arguments[0],E=1,T=arguments.length,I=!1;for(typeof k=="boolean"&&(I=k,k=arguments[1]||{},E=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});E<T;++E)if(u=arguments[E],u!=null)for(p in u)g=f(k,p),b=f(u,p),k!==b&&(I&&b&&(o(b)||(v=a(b)))?(v?(v=!1,N=g&&a(g)?g:[]):N=g&&o(g)?g:{},l(k,{name:p,newValue:d(I,N,b)})):typeof b<"u"&&l(k,{name:p,newValue:b}));return k},L0}var BX=zX();const F0=Pd(BX);function V1(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function UX(){const e=[],n={run:t,use:i};return n;function t(...a){let o=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);f(null,...a);function f(d,...u){const p=e[++o];let g=-1;if(d){l(d);return}for(;++g<a.length;)(u[g]===null||u[g]===void 0)&&(u[g]=a[g]);a=u,p?qX(p,f)(...u):l(null,...u)}}function i(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),n}}function qX(e,n){let t;return i;function i(...l){const f=e.length>l.length;let d;f&&l.push(a);try{d=e.apply(this,l)}catch(u){const p=u;if(f&&t)throw p;return a(p)}f||(d&&d.then&&typeof d.then=="function"?d.then(o,a):d instanceof Error?a(d):o(d))}function a(l,...f){t||(t=!0,n(l,...f))}function o(l){a(null,l)}}class ha extends Error{constructor(n,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let a="",o={},l=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof n=="string"?a=n:!o.cause&&n&&(l=!0,a=n.message,o.cause=n),!o.ruleId&&!o.source&&typeof i=="string"){const d=i.indexOf(":");d===-1?o.ruleId=i:(o.source=i.slice(0,d),o.ruleId=i.slice(d+1))}if(!o.place&&o.ancestors&&o.ancestors){const d=o.ancestors[o.ancestors.length-1];d&&(o.place=d.position)}const f=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=f?f.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=f?f.line:void 0,this.name=Bm(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ha.prototype.file="";ha.prototype.name="";ha.prototype.reason="";ha.prototype.message="";ha.prototype.stack="";ha.prototype.column=void 0;ha.prototype.line=void 0;ha.prototype.ancestors=void 0;ha.prototype.cause=void 0;ha.prototype.fatal=void 0;ha.prototype.place=void 0;ha.prototype.ruleId=void 0;ha.prototype.source=void 0;const Do={basename:VX,dirname:HX,extname:GX,join:YX,sep:"/"};function VX(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');ug(e);let t=0,i=-1,a=e.length,o;if(n===void 0||n.length===0||n.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(o){t=a+1;break}}else i<0&&(o=!0,i=a+1);return i<0?"":e.slice(t,i)}if(n===e)return"";let l=-1,f=n.length-1;for(;a--;)if(e.codePointAt(a)===47){if(o){t=a+1;break}}else l<0&&(o=!0,l=a+1),f>-1&&(e.codePointAt(a)===n.codePointAt(f--)?f<0&&(i=a):(f=-1,i=l));return t===i?i=l:i<0&&(i=e.length),e.slice(t,i)}function HX(e){if(ug(e),e.length===0)return".";let n=-1,t=e.length,i;for(;--t;)if(e.codePointAt(t)===47){if(i){n=t;break}}else i||(i=!0);return n<0?e.codePointAt(0)===47?"/":".":n===1&&e.codePointAt(0)===47?"//":e.slice(0,n)}function GX(e){ug(e);let n=e.length,t=-1,i=0,a=-1,o=0,l;for(;n--;){const f=e.codePointAt(n);if(f===47){if(l){i=n+1;break}continue}t<0&&(l=!0,t=n+1),f===46?a<0?a=n:o!==1&&(o=1):a>-1&&(o=-1)}return a<0||t<0||o===0||o===1&&a===t-1&&a===i+1?"":e.slice(a,t)}function YX(...e){let n=-1,t;for(;++n<e.length;)ug(e[n]),e[n]&&(t=t===void 0?e[n]:t+"/"+e[n]);return t===void 0?".":WX(t)}function WX(e){ug(e);const n=e.codePointAt(0)===47;let t=QX(e,!n);return t.length===0&&!n&&(t="."),t.length>0&&e.codePointAt(e.length-1)===47&&(t+="/"),n?"/"+t:t}function QX(e,n){let t="",i=0,a=-1,o=0,l=-1,f,d;for(;++l<=e.length;){if(l<e.length)f=e.codePointAt(l);else{if(f===47)break;f=47}if(f===47){if(!(a===l-1||o===1))if(a!==l-1&&o===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(d=t.lastIndexOf("/"),d!==t.length-1){d<0?(t="",i=0):(t=t.slice(0,d),i=t.length-1-t.lastIndexOf("/")),a=l,o=0;continue}}else if(t.length>0){t="",i=0,a=l,o=0;continue}}n&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+e.slice(a+1,l):t=e.slice(a+1,l),i=l-a-1;a=l,o=0}else f===46&&o>-1?o++:o=-1}return t}function ug(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const JX={cwd:KX};function KX(){return"/"}function H1(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function XX(e){if(typeof e=="string")e=new URL(e);else if(!H1(e)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(e.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return ZX(e)}function ZX(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const n=e.pathname;let t=-1;for(;++t<n.length;)if(n.codePointAt(t)===37&&n.codePointAt(t+1)===50){const i=n.codePointAt(t+2);if(i===70||i===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(n)}const $0=["history","path","basename","stem","extname","dirname"];class eZ{constructor(n){let t;n?H1(n)?t={path:n}:typeof n=="string"||tZ(n)?t={value:n}:t=n:t={},this.cwd="cwd"in t?"":JX.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<$0.length;){const o=$0[i];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let a;for(a in t)$0.includes(a)||(this[a]=t[a])}get basename(){return typeof this.path=="string"?Do.basename(this.path):void 0}set basename(n){B0(n,"basename"),z0(n,"basename"),this.path=Do.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?Do.dirname(this.path):void 0}set dirname(n){r_(this.basename,"dirname"),this.path=Do.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?Do.extname(this.path):void 0}set extname(n){if(z0(n,"extname"),r_(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Do.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){H1(n)&&(n=XX(n)),B0(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?Do.basename(this.path,this.extname):void 0}set stem(n){B0(n,"stem"),z0(n,"stem"),this.path=Do.join(this.dirname||"",n+(this.extname||""))}fail(n,t,i){const a=this.message(n,t,i);throw a.fatal=!0,a}info(n,t,i){const a=this.message(n,t,i);return a.fatal=void 0,a}message(n,t,i){const a=new ha(n,t,i);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function z0(e,n){if(e&&e.includes(Do.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+Do.sep+"`")}function B0(e,n){if(!e)throw new Error("`"+n+"` cannot be empty")}function r_(e,n){if(!e)throw new Error("Setting `"+n+"` requires `path` to be set too")}function tZ(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const nZ=function(e){const i=this.constructor.prototype,a=i[e],o=function(){return a.apply(o,arguments)};return Object.setPrototypeOf(o,i),o},iZ={}.hasOwnProperty;class Xw extends nZ{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=UX()}copy(){const n=new Xw;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];n.use(...i)}return n.data(F0(!0,{},this.namespace)),n}data(n,t){return typeof n=="string"?arguments.length===2?(V0("data",this.frozen),this.namespace[n]=t,this):iZ.call(this.namespace,n)&&this.namespace[n]||void 0:n?(V0("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const a=t.call(n,...i);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const t=jx(n),i=this.parser||this.Parser;return U0("parse",i),i(String(t),t)}process(n,t){const i=this;return this.freeze(),U0("process",this.parser||this.Parser),q0("process",this.compiler||this.Compiler),t?a(void 0,t):new Promise(a);function a(o,l){const f=jx(n),d=i.parse(f);i.run(d,f,function(p,g,b){if(p||!g||!b)return u(p);const v=g,N=i.stringify(v,b);sZ(N)?b.value=N:b.result=N,u(p,b)});function u(p,g){p||!g?l(p):o?o(g):t(void 0,g)}}}processSync(n){let t=!1,i;return this.freeze(),U0("processSync",this.parser||this.Parser),q0("processSync",this.compiler||this.Compiler),this.process(n,a),s_("processSync","process",t),i;function a(o,l){t=!0,n_(o),i=l}}run(n,t,i){a_(n),this.freeze();const a=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?o(void 0,i):new Promise(o);function o(l,f){const d=jx(t);a.run(n,d,u);function u(p,g,b){const v=g||n;p?f(p):l?l(v):i(void 0,v,b)}}}runSync(n,t){let i=!1,a;return this.run(n,t,o),s_("runSync","run",i),a;function o(l,f){n_(l),a=f,i=!0}}stringify(n,t){this.freeze();const i=jx(t),a=this.compiler||this.Compiler;return q0("stringify",a),a_(n),a(n,i)}use(n,...t){const i=this.attachers,a=this.namespace;if(V0("use",this.frozen),n!=null)if(typeof n=="function")d(n,t);else if(typeof n=="object")Array.isArray(n)?f(n):l(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function o(u){if(typeof u=="function")d(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[p,...g]=u;d(p,g)}else l(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function l(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");f(u.plugins),u.settings&&(a.settings=F0(!0,a.settings,u.settings))}function f(u){let p=-1;if(u!=null)if(Array.isArray(u))for(;++p<u.length;){const g=u[p];o(g)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function d(u,p){let g=-1,b=-1;for(;++g<i.length;)if(i[g][0]===u){b=g;break}if(b===-1)i.push([u,...p]);else if(p.length>0){let[v,...N]=p;const k=i[b][1];V1(k)&&V1(v)&&(v=F0(!0,k,v)),i[b]=[u,v,...N]}}}}const rZ=new Xw().freeze();function U0(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function q0(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function V0(e,n){if(n)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function a_(e){if(!V1(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function s_(e,n,t){if(!t)throw new Error("`"+e+"` finished async. Use `"+n+"` instead")}function jx(e){return aZ(e)?e:new eZ(e)}function aZ(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function sZ(e){return typeof e=="string"||oZ(e)}function oZ(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const lZ=rZ().use(PK).use($X).freeze(),OT=-1,Wb=0,Um=1,yb=2,Zw=3,eS=4,tS=5,nS=6,LT=7,FT=8,o_=typeof self=="object"?self:globalThis,cZ=(e,n)=>{const t=(a,o)=>(e.set(o,a),a),i=a=>{if(e.has(a))return e.get(a);const[o,l]=n[a];switch(o){case Wb:case OT:return t(l,a);case Um:{const f=t([],a);for(const d of l)f.push(i(d));return f}case yb:{const f=t({},a);for(const[d,u]of l)f[i(d)]=i(u);return f}case Zw:return t(new Date(l),a);case eS:{const{source:f,flags:d}=l;return t(new RegExp(f,d),a)}case tS:{const f=t(new Map,a);for(const[d,u]of l)f.set(i(d),i(u));return f}case nS:{const f=t(new Set,a);for(const d of l)f.add(i(d));return f}case LT:{const{name:f,message:d}=l;return t(new o_[f](d),a)}case FT:return t(BigInt(l),a);case"BigInt":return t(Object(BigInt(l)),a);case"ArrayBuffer":return t(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:f}=new Uint8Array(l);return t(new DataView(f),l)}}return t(new o_[o](l),a)};return i},l_=e=>cZ(new Map,e)(0),ch="",{toString:uZ}={},{keys:dZ}=Object,Pm=e=>{const n=typeof e;if(n!=="object"||!e)return[Wb,n];const t=uZ.call(e).slice(8,-1);switch(t){case"Array":return[Um,ch];case"Object":return[yb,ch];case"Date":return[Zw,ch];case"RegExp":return[eS,ch];case"Map":return[tS,ch];case"Set":return[nS,ch];case"DataView":return[Um,t]}return t.includes("Array")?[Um,t]:t.includes("Error")?[LT,t]:[yb,t]},_x=([e,n])=>e===Wb&&(n==="function"||n==="symbol"),fZ=(e,n,t,i)=>{const a=(l,f)=>{const d=i.push(l)-1;return t.set(f,d),d},o=l=>{if(t.has(l))return t.get(l);let[f,d]=Pm(l);switch(f){case Wb:{let p=l;switch(d){case"bigint":f=FT,p=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);p=null;break;case"undefined":return a([OT],l)}return a([f,p],l)}case Um:{if(d){let b=l;return d==="DataView"?b=new Uint8Array(l.buffer):d==="ArrayBuffer"&&(b=new Uint8Array(l)),a([d,[...b]],l)}const p=[],g=a([f,p],l);for(const b of l)p.push(o(b));return g}case yb:{if(d)switch(d){case"BigInt":return a([d,l.toString()],l);case"Boolean":case"Number":case"String":return a([d,l.valueOf()],l)}if(n&&"toJSON"in l)return o(l.toJSON());const p=[],g=a([f,p],l);for(const b of dZ(l))(e||!_x(Pm(l[b])))&&p.push([o(b),o(l[b])]);return g}case Zw:return a([f,l.toISOString()],l);case eS:{const{source:p,flags:g}=l;return a([f,{source:p,flags:g}],l)}case tS:{const p=[],g=a([f,p],l);for(const[b,v]of l)(e||!(_x(Pm(b))||_x(Pm(v))))&&p.push([o(b),o(v)]);return g}case nS:{const p=[],g=a([f,p],l);for(const b of l)(e||!_x(Pm(b)))&&p.push(o(b));return g}}const{message:u}=l;return a([f,{name:d,message:u}],l)};return o},c_=(e,{json:n,lossy:t}={})=>{const i=[];return fZ(!(n||t),!!n,new Map,i)(e),i},Zm=typeof structuredClone=="function"?(e,n)=>n&&("json"in n||"lossy"in n)?l_(c_(e,n)):structuredClone(e):(e,n)=>l_(c_(e,n)),$T=BT("end"),zT=BT("start");function BT(e){return n;function n(t){const i=t&&t.position&&t.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function UT(e){const n=zT(e),t=$T(e);if(n&&t)return{start:n,end:t}}const gd=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],u_={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...gd,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...gd],h2:[["className","sr-only"]],img:[...gd,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...gd,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...gd],table:[...gd],ul:[...gd,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},$c={}.hasOwnProperty;function hZ(e,n){let t={type:"root",children:[]};const i={schema:n?{...u_,...n}:u_,stack:[]},a=qT(i,e);return a&&(Array.isArray(a)?a.length===1?t=a[0]:t.children=a:t=a),t}function qT(e,n){if(n&&typeof n=="object"){const t=n;switch(typeof t.type=="string"?t.type:""){case"comment":return pZ(e,t);case"doctype":return mZ(e,t);case"element":return gZ(e,t);case"root":return yZ(e,t);case"text":return xZ(e,t)}}}function pZ(e,n){if(e.schema.allowComments){const t=typeof n.value=="string"?n.value:"",i=t.indexOf("-->"),o={type:"comment",value:i<0?t:t.slice(0,i)};return dg(o,n),o}}function mZ(e,n){if(e.schema.allowDoctypes){const t={type:"doctype"};return dg(t,n),t}}function gZ(e,n){const t=typeof n.tagName=="string"?n.tagName:"";e.stack.push(t);const i=VT(e,n.children),a=bZ(e,n.properties);e.stack.pop();let o=!1;if(t&&t!=="*"&&(!e.schema.tagNames||e.schema.tagNames.includes(t))&&(o=!0,e.schema.ancestors&&$c.call(e.schema.ancestors,t))){const f=e.schema.ancestors[t];let d=-1;for(o=!1;++d<f.length;)e.stack.includes(f[d])&&(o=!0)}if(!o)return e.schema.strip&&!e.schema.strip.includes(t)?i:void 0;const l={type:"element",tagName:t,properties:a,children:i};return dg(l,n),l}function yZ(e,n){const i={type:"root",children:VT(e,n.children)};return dg(i,n),i}function xZ(e,n){const i={type:"text",value:typeof n.value=="string"?n.value:""};return dg(i,n),i}function VT(e,n){const t=[];if(Array.isArray(n)){const i=n;let a=-1;for(;++a<i.length;){const o=qT(e,i[a]);o&&(Array.isArray(o)?t.push(...o):t.push(o))}}return t}function bZ(e,n){const t=e.stack[e.stack.length-1],i=e.schema.attributes,a=e.schema.required,o=i&&$c.call(i,t)?i[t]:void 0,l=i&&$c.call(i,"*")?i["*"]:void 0,f=n&&typeof n=="object"?n:{},d={};let u;for(u in f)if($c.call(f,u)){const p=f[u];let g=d_(e,f_(o,u),u,p);g==null&&(g=d_(e,f_(l,u),u,p)),g!=null&&(d[u]=g)}if(a&&$c.call(a,t)){const p=a[t];for(u in p)$c.call(p,u)&&!$c.call(d,u)&&(d[u]=p[u])}return d}function d_(e,n,t,i){return n?Array.isArray(i)?vZ(e,n,t,i):HT(e,n,t,i):void 0}function vZ(e,n,t,i){let a=-1;const o=[];for(;++a<i.length;){const l=HT(e,n,t,i[a]);(typeof l=="number"||typeof l=="string")&&o.push(l)}return o}function HT(e,n,t,i){if(!(typeof i!="boolean"&&typeof i!="number"&&typeof i!="string")&&wZ(e,t,i)){if(typeof n=="object"&&n.length>1){let a=!1,o=0;for(;++o<n.length;){const l=n[o];if(l&&typeof l=="object"&&"flags"in l){if(l.test(String(i))){a=!0;break}}else if(l===i){a=!0;break}}if(!a)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(t)?e.schema.clobberPrefix+i:i}}function wZ(e,n,t){const i=e.schema.protocols&&$c.call(e.schema.protocols,n)?e.schema.protocols[n]:void 0;if(!i||i.length===0)return!0;const a=String(t),o=a.indexOf(":"),l=a.indexOf("?"),f=a.indexOf("#"),d=a.indexOf("/");if(o<0||d>-1&&o>d||l>-1&&o>l||f>-1&&o>f)return!0;let u=-1;for(;++u<i.length;){const p=i[u];if(o===p.length&&a.slice(0,p.length)===p)return!0}return!1}function dg(e,n){const t=UT(n);n.data&&(e.data=Zm(n.data)),t&&(e.position=t)}function f_(e,n){let t,i=-1;if(e)for(;++i<e.length;){const a=e[i],o=typeof a=="string"?a:a[0];if(o===n)return a;o==="data*"&&(t=a)}if(n.length>4&&n.slice(0,4).toLowerCase()==="data")return t}function SZ(e,n){const t={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(n),!0)};return e.patch(n,t),e.applyData(n,t)}function NZ(e,n){const t={type:"element",tagName:"br",properties:{},children:[]};return e.patch(n,t),[e.applyData(n,t),{type:"text",value:`
`}]}function CZ(e,n){const t=n.value?n.value+`
`:"",i={};n.lang&&(i.className=["language-"+n.lang]);let a={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return n.meta&&(a.data={meta:n.meta}),e.patch(n,a),a=e.applyData(n,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(n,a),a}function jZ(e,n){const t={type:"element",tagName:"del",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function _Z(e,n){const t={type:"element",tagName:"em",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function kZ(e,n){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(n.identifier).toUpperCase(),a=Fh(i.toLowerCase()),o=e.footnoteOrder.indexOf(i);let l,f=e.footnoteCounts.get(i);f===void 0?(f=0,e.footnoteOrder.push(i),l=e.footnoteOrder.length):l=o+1,f+=1,e.footnoteCounts.set(i,f);const d={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+a,id:t+"fnref-"+a+(f>1?"-"+f:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(n,d);const u={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(n,u),e.applyData(n,u)}function EZ(e,n){const t={type:"element",tagName:"h"+n.depth,properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function TZ(e,n){if(e.options.allowDangerousHtml){const t={type:"raw",value:n.value};return e.patch(n,t),e.applyData(n,t)}}function GT(e,n){const t=n.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return[{type:"text",value:"!["+n.alt+i}];const a=e.all(n),o=a[0];o&&o.type==="text"?o.value="["+o.value:a.unshift({type:"text",value:"["});const l=a[a.length-1];return l&&l.type==="text"?l.value+=i:a.push({type:"text",value:i}),a}function AZ(e,n){const t=String(n.identifier).toUpperCase(),i=e.definitionById.get(t);if(!i)return GT(e,n);const a={src:Fh(i.url||""),alt:n.alt};i.title!==null&&i.title!==void 0&&(a.title=i.title);const o={type:"element",tagName:"img",properties:a,children:[]};return e.patch(n,o),e.applyData(n,o)}function PZ(e,n){const t={src:Fh(n.url)};n.alt!==null&&n.alt!==void 0&&(t.alt=n.alt),n.title!==null&&n.title!==void 0&&(t.title=n.title);const i={type:"element",tagName:"img",properties:t,children:[]};return e.patch(n,i),e.applyData(n,i)}function DZ(e,n){const t={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};e.patch(n,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return e.patch(n,i),e.applyData(n,i)}function IZ(e,n){const t=String(n.identifier).toUpperCase(),i=e.definitionById.get(t);if(!i)return GT(e,n);const a={href:Fh(i.url||"")};i.title!==null&&i.title!==void 0&&(a.title=i.title);const o={type:"element",tagName:"a",properties:a,children:e.all(n)};return e.patch(n,o),e.applyData(n,o)}function MZ(e,n){const t={href:Fh(n.url)};n.title!==null&&n.title!==void 0&&(t.title=n.title);const i={type:"element",tagName:"a",properties:t,children:e.all(n)};return e.patch(n,i),e.applyData(n,i)}function RZ(e,n,t){const i=e.all(n),a=t?OZ(t):YT(n),o={},l=[];if(typeof n.checked=="boolean"){const p=i[0];let g;p&&p.type==="element"&&p.tagName==="p"?g=p:(g={type:"element",tagName:"p",properties:{},children:[]},i.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let f=-1;for(;++f<i.length;){const p=i[f];(a||f!==0||p.type!=="element"||p.tagName!=="p")&&l.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!a?l.push(...p.children):l.push(p)}const d=i[i.length-1];d&&(a||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:o,children:l};return e.patch(n,u),e.applyData(n,u)}function OZ(e){let n=!1;if(e.type==="list"){n=e.spread||!1;const t=e.children;let i=-1;for(;!n&&++i<t.length;)n=YT(t[i])}return n}function YT(e){const n=e.spread;return n??e.children.length>1}function LZ(e,n){const t={},i=e.all(n);let a=-1;for(typeof n.start=="number"&&n.start!==1&&(t.start=n.start);++a<i.length;){const l=i[a];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const o={type:"element",tagName:n.ordered?"ol":"ul",properties:t,children:e.wrap(i,!0)};return e.patch(n,o),e.applyData(n,o)}function FZ(e,n){const t={type:"element",tagName:"p",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function $Z(e,n){const t={type:"root",children:e.wrap(e.all(n))};return e.patch(n,t),e.applyData(n,t)}function zZ(e,n){const t={type:"element",tagName:"strong",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}function BZ(e,n){const t=e.all(n),i=t.shift(),a=[];if(i){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(n.children[0],l),a.push(l)}if(t.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(t,!0)},f=zT(n.children[1]),d=$T(n.children[n.children.length-1]);f&&d&&(l.position={start:f,end:d}),a.push(l)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(n,o),e.applyData(n,o)}function UZ(e,n,t){const i=t?t.children:void 0,o=(i?i.indexOf(n):1)===0?"th":"td",l=t&&t.type==="table"?t.align:void 0,f=l?l.length:n.children.length;let d=-1;const u=[];for(;++d<f;){const g=n.children[d],b={},v=l?l[d]:void 0;v&&(b.align=v);let N={type:"element",tagName:o,properties:b,children:[]};g&&(N.children=e.all(g),e.patch(g,N),N=e.applyData(g,N)),u.push(N)}const p={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(n,p),e.applyData(n,p)}function qZ(e,n){const t={type:"element",tagName:"td",properties:{},children:e.all(n)};return e.patch(n,t),e.applyData(n,t)}const h_=9,p_=32;function VZ(e){const n=String(e),t=/\r?\n|\r/g;let i=t.exec(n),a=0;const o=[];for(;i;)o.push(m_(n.slice(a,i.index),a>0,!0),i[0]),a=i.index+i[0].length,i=t.exec(n);return o.push(m_(n.slice(a),a>0,!1)),o.join("")}function m_(e,n,t){let i=0,a=e.length;if(n){let o=e.codePointAt(i);for(;o===h_||o===p_;)i++,o=e.codePointAt(i)}if(t){let o=e.codePointAt(a-1);for(;o===h_||o===p_;)a--,o=e.codePointAt(a-1)}return a>i?e.slice(i,a):""}function HZ(e,n){const t={type:"text",value:VZ(String(n.value))};return e.patch(n,t),e.applyData(n,t)}function GZ(e,n){const t={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(n,t),e.applyData(n,t)}const YZ={blockquote:SZ,break:NZ,code:CZ,delete:jZ,emphasis:_Z,footnoteReference:kZ,heading:EZ,html:TZ,imageReference:AZ,image:PZ,inlineCode:DZ,linkReference:IZ,link:MZ,listItem:RZ,list:LZ,paragraph:FZ,root:$Z,strong:zZ,table:BZ,tableCell:qZ,tableRow:UZ,text:HZ,thematicBreak:GZ,toml:kx,yaml:kx,definition:kx,footnoteDefinition:kx};function kx(){}function WZ(e,n){const t=[{type:"text",value:""}];return n>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(n)}]}),t}function QZ(e,n){return"Back to reference "+(e+1)+(n>1?"-"+n:"")}function JZ(e){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",t=e.options.footnoteBackContent||WZ,i=e.options.footnoteBackLabel||QZ,a=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},f=[];let d=-1;for(;++d<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[d]);if(!u)continue;const p=e.all(u),g=String(u.identifier).toUpperCase(),b=Fh(g.toLowerCase());let v=0;const N=[],k=e.footnoteCounts.get(g);for(;k!==void 0&&++v<=k;){N.length>0&&N.push({type:"text",value:" "});let I=typeof t=="string"?t:t(d,v);typeof I=="string"&&(I={type:"text",value:I}),N.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+b+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(d,v),className:["data-footnote-backref"]},children:Array.isArray(I)?I:[I]})}const E=p[p.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const I=E.children[E.children.length-1];I&&I.type==="text"?I.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...N)}else p.push(...N);const T={type:"element",tagName:"li",properties:{id:n+"fn-"+b},children:e.wrap(p,!0)};e.patch(u,T),f.push(T)}if(f.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Zm(l),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(f,!0)},{type:"text",value:`
`}]}}const G1={}.hasOwnProperty,KZ={};function XZ(e,n){const t=n||KZ,i=new Map,a=new Map,o=new Map,l={...YZ,...t.handlers},f={all:u,applyData:eee,definitionById:i,footnoteById:a,footnoteCounts:o,footnoteOrder:[],handlers:l,one:d,options:t,patch:ZZ,wrap:nee};return jT(e,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const g=p.type==="definition"?i:a,b=String(p.identifier).toUpperCase();g.has(b)||g.set(b,p)}}),f;function d(p,g){const b=p.type,v=f.handlers[b];if(G1.call(f.handlers,b)&&v)return v(f,p,g);if(f.options.passThrough&&f.options.passThrough.includes(b)){if("children"in p){const{children:k,...E}=p,T=Zm(E);return T.children=f.all(p),T}return Zm(p)}return(f.options.unknownHandler||tee)(f,p,g)}function u(p){const g=[];if("children"in p){const b=p.children;let v=-1;for(;++v<b.length;){const N=f.one(b[v],p);if(N){if(v&&b[v-1].type==="break"&&(!Array.isArray(N)&&N.type==="text"&&(N.value=g_(N.value)),!Array.isArray(N)&&N.type==="element")){const k=N.children[0];k&&k.type==="text"&&(k.value=g_(k.value))}Array.isArray(N)?g.push(...N):g.push(N)}}}return g}}function ZZ(e,n){e.position&&(n.position=UT(e))}function eee(e,n){let t=n;if(e&&e.data){const i=e.data.hName,a=e.data.hChildren,o=e.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const l="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:l}}t.type==="element"&&o&&Object.assign(t.properties,Zm(o)),"children"in t&&t.children&&a!==null&&a!==void 0&&(t.children=a)}return t}function tee(e,n){const t=n.data||{},i="value"in n&&!(G1.call(t,"hProperties")||G1.call(t,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:e.all(n)};return e.patch(n,i),e.applyData(n,i)}function nee(e,n){const t=[];let i=-1;for(n&&t.push({type:"text",value:`
`});++i<e.length;)i&&t.push({type:"text",value:`
`}),t.push(e[i]);return n&&e.length>0&&t.push({type:"text",value:`
`}),t}function g_(e){let n=0,t=e.charCodeAt(n);for(;t===9||t===32;)n++,t=e.charCodeAt(n);return e.slice(n)}function iee(e,n){const t=XZ(e,n),i=t.one(e,void 0),a=JZ(t),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return a&&o.children.push({type:"text",value:`
`},a),o}const ree=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class fg{constructor(n,t,i){this.normal=t,this.property=n,i&&(this.space=i)}}fg.prototype.normal={};fg.prototype.property={};fg.prototype.space=void 0;function WT(e,n){const t={},i={};for(const a of e)Object.assign(t,a.property),Object.assign(i,a.normal);return new fg(t,i,n)}function Y1(e){return e.toLowerCase()}class pa{constructor(n,t){this.attribute=t,this.property=n}}pa.prototype.attribute="";pa.prototype.booleanish=!1;pa.prototype.boolean=!1;pa.prototype.commaOrSpaceSeparated=!1;pa.prototype.commaSeparated=!1;pa.prototype.defined=!1;pa.prototype.mustUseProperty=!1;pa.prototype.number=!1;pa.prototype.overloadedBoolean=!1;pa.prototype.property="";pa.prototype.spaceSeparated=!1;pa.prototype.space=void 0;let aee=0;const Ht=Id(),Di=Id(),W1=Id(),ot=Id(),Jn=Id(),bh=Id(),Ma=Id();function Id(){return 2**++aee}const Q1=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ht,booleanish:Di,commaOrSpaceSeparated:Ma,commaSeparated:bh,number:ot,overloadedBoolean:W1,spaceSeparated:Jn},Symbol.toStringTag,{value:"Module"})),H0=Object.keys(Q1);class iS extends pa{constructor(n,t,i,a){let o=-1;if(super(n,t),y_(this,"space",a),typeof i=="number")for(;++o<H0.length;){const l=H0[o];y_(this,H0[o],(i&Q1[l])===Q1[l])}}}iS.prototype.defined=!0;function y_(e,n,t){t&&(e[n]=t)}function $h(e){const n={},t={};for(const[i,a]of Object.entries(e.properties)){const o=new iS(i,e.transform(e.attributes||{},i),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),n[i]=o,t[Y1(i)]=i,t[Y1(o.attribute)]=i}return new fg(n,t,e.space)}const QT=$h({properties:{ariaActiveDescendant:null,ariaAtomic:Di,ariaAutoComplete:null,ariaBusy:Di,ariaChecked:Di,ariaColCount:ot,ariaColIndex:ot,ariaColSpan:ot,ariaControls:Jn,ariaCurrent:null,ariaDescribedBy:Jn,ariaDetails:null,ariaDisabled:Di,ariaDropEffect:Jn,ariaErrorMessage:null,ariaExpanded:Di,ariaFlowTo:Jn,ariaGrabbed:Di,ariaHasPopup:null,ariaHidden:Di,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Jn,ariaLevel:ot,ariaLive:null,ariaModal:Di,ariaMultiLine:Di,ariaMultiSelectable:Di,ariaOrientation:null,ariaOwns:Jn,ariaPlaceholder:null,ariaPosInSet:ot,ariaPressed:Di,ariaReadOnly:Di,ariaRelevant:null,ariaRequired:Di,ariaRoleDescription:Jn,ariaRowCount:ot,ariaRowIndex:ot,ariaRowSpan:ot,ariaSelected:Di,ariaSetSize:ot,ariaSort:null,ariaValueMax:ot,ariaValueMin:ot,ariaValueNow:ot,ariaValueText:null,role:null},transform(e,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()}});function JT(e,n){return n in e?e[n]:n}function KT(e,n){return JT(e,n.toLowerCase())}const see=$h({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:bh,acceptCharset:Jn,accessKey:Jn,action:null,allow:null,allowFullScreen:Ht,allowPaymentRequest:Ht,allowUserMedia:Ht,alt:null,as:null,async:Ht,autoCapitalize:null,autoComplete:Jn,autoFocus:Ht,autoPlay:Ht,blocking:Jn,capture:null,charSet:null,checked:Ht,cite:null,className:Jn,cols:ot,colSpan:null,content:null,contentEditable:Di,controls:Ht,controlsList:Jn,coords:ot|bh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ht,defer:Ht,dir:null,dirName:null,disabled:Ht,download:W1,draggable:Di,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ht,formTarget:null,headers:Jn,height:ot,hidden:W1,high:ot,href:null,hrefLang:null,htmlFor:Jn,httpEquiv:Jn,id:null,imageSizes:null,imageSrcSet:null,inert:Ht,inputMode:null,integrity:null,is:null,isMap:Ht,itemId:null,itemProp:Jn,itemRef:Jn,itemScope:Ht,itemType:Jn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ht,low:ot,manifest:null,max:null,maxLength:ot,media:null,method:null,min:null,minLength:ot,multiple:Ht,muted:Ht,name:null,nonce:null,noModule:Ht,noValidate:Ht,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ht,optimum:ot,pattern:null,ping:Jn,placeholder:null,playsInline:Ht,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ht,referrerPolicy:null,rel:Jn,required:Ht,reversed:Ht,rows:ot,rowSpan:ot,sandbox:Jn,scope:null,scoped:Ht,seamless:Ht,selected:Ht,shadowRootClonable:Ht,shadowRootDelegatesFocus:Ht,shadowRootMode:null,shape:null,size:ot,sizes:null,slot:null,span:ot,spellCheck:Di,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ot,step:null,style:null,tabIndex:ot,target:null,title:null,translate:null,type:null,typeMustMatch:Ht,useMap:null,value:Di,width:ot,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Jn,axis:null,background:null,bgColor:null,border:ot,borderColor:null,bottomMargin:ot,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ht,declare:Ht,event:null,face:null,frame:null,frameBorder:null,hSpace:ot,leftMargin:ot,link:null,longDesc:null,lowSrc:null,marginHeight:ot,marginWidth:ot,noResize:Ht,noHref:Ht,noShade:Ht,noWrap:Ht,object:null,profile:null,prompt:null,rev:null,rightMargin:ot,rules:null,scheme:null,scrolling:Di,standby:null,summary:null,text:null,topMargin:ot,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ot,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ht,disableRemotePlayback:Ht,prefix:null,property:null,results:ot,security:null,unselectable:null},space:"html",transform:KT}),oee=$h({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ma,accentHeight:ot,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ot,amplitude:ot,arabicForm:null,ascent:ot,attributeName:null,attributeType:null,azimuth:ot,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ot,by:null,calcMode:null,capHeight:ot,className:Jn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ot,diffuseConstant:ot,direction:null,display:null,dur:null,divisor:ot,dominantBaseline:null,download:Ht,dx:null,dy:null,edgeMode:null,editable:null,elevation:ot,enableBackground:null,end:null,event:null,exponent:ot,externalResourcesRequired:null,fill:null,fillOpacity:ot,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:bh,g2:bh,glyphName:bh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ot,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ot,horizOriginX:ot,horizOriginY:ot,id:null,ideographic:ot,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ot,k:ot,k1:ot,k2:ot,k3:ot,k4:ot,kernelMatrix:Ma,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ot,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ot,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ot,overlineThickness:ot,paintOrder:null,panose1:null,path:null,pathLength:ot,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Jn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ot,pointsAtY:ot,pointsAtZ:ot,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ma,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ma,rev:Ma,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ma,requiredFeatures:Ma,requiredFonts:Ma,requiredFormats:Ma,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ot,specularExponent:ot,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ot,strikethroughThickness:ot,string:null,stroke:null,strokeDashArray:Ma,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ot,strokeOpacity:ot,strokeWidth:null,style:null,surfaceScale:ot,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ma,tabIndex:ot,tableValues:null,target:null,targetX:ot,targetY:ot,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ma,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ot,underlineThickness:ot,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ot,values:null,vAlphabetic:ot,vMathematical:ot,vectorEffect:null,vHanging:ot,vIdeographic:ot,version:null,vertAdvY:ot,vertOriginX:ot,vertOriginY:ot,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ot,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:JT}),XT=$h({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,n){return"xlink:"+n.slice(5).toLowerCase()}}),ZT=$h({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:KT}),eA=$h({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,n){return"xml:"+n.slice(3).toLowerCase()}}),lee=/[A-Z]/g,x_=/-[a-z]/g,cee=/^data[-\w.:]+$/i;function uee(e,n){const t=Y1(n);let i=n,a=pa;if(t in e.normal)return e.property[e.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&cee.test(n)){if(n.charAt(4)==="-"){const o=n.slice(5).replace(x_,fee);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=n.slice(4);if(!x_.test(o)){let l=o.replace(lee,dee);l.charAt(0)!=="-"&&(l="-"+l),n="data"+l}}a=iS}return new a(i,n)}function dee(e){return"-"+e.toLowerCase()}function fee(e){return e.charAt(1).toUpperCase()}const hee=WT([QT,see,XT,ZT,eA],"html"),tA=WT([QT,oee,XT,ZT,eA],"svg"),pee=/["&'<>`]/g,mee=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gee=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,yee=/[|\\{}()[\]^$+*?.]/g,b_=new WeakMap;function xee(e,n){if(e=e.replace(n.subset?bee(n.subset):pee,i),n.subset||n.escapeOnly)return e;return e.replace(mee,t).replace(gee,i);function t(a,o,l){return n.format((a.charCodeAt(0)-55296)*1024+a.charCodeAt(1)-56320+65536,l.charCodeAt(o+2),n)}function i(a,o,l){return n.format(a.charCodeAt(0),l.charCodeAt(o+1),n)}}function bee(e){let n=b_.get(e);return n||(n=vee(e),b_.set(e,n)),n}function vee(e){const n=[];let t=-1;for(;++t<e.length;)n.push(e[t].replace(yee,"\\$&"));return new RegExp("(?:"+n.join("|")+")","g")}const wee=/[\dA-Fa-f]/;function See(e,n,t){const i="&#x"+e.toString(16).toUpperCase();return t&&n&&!wee.test(String.fromCharCode(n))?i:i+";"}const Nee=/\d/;function Cee(e,n,t){const i="&#"+String(e);return t&&n&&!Nee.test(String.fromCharCode(n))?i:i+";"}const jee=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],G0={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},_ee=["cent","copy","divide","gt","lt","not","para","times"],nA={}.hasOwnProperty,J1={};let Ex;for(Ex in G0)nA.call(G0,Ex)&&(J1[G0[Ex]]=Ex);const kee=/[^\dA-Za-z]/;function Eee(e,n,t,i){const a=String.fromCharCode(e);if(nA.call(J1,a)){const o=J1[a],l="&"+o;return t&&jee.includes(o)&&!_ee.includes(o)&&(!i||n&&n!==61&&kee.test(String.fromCharCode(n)))?l:l+";"}return""}function Tee(e,n,t){let i=See(e,n,t.omitOptionalSemicolons),a;if((t.useNamedReferences||t.useShortestReferences)&&(a=Eee(e,n,t.omitOptionalSemicolons,t.attribute)),(t.useShortestReferences||!a)&&t.useShortestReferences){const o=Cee(e,n,t.omitOptionalSemicolons);o.length<i.length&&(i=o)}return a&&(!t.useShortestReferences||a.length<i.length)?a:i}function vh(e,n){return xee(e,Object.assign({format:Tee},n))}const Aee=/^>|^->|<!--|-->|--!>|<!-$/g,Pee=[">"],Dee=["<",">"];function Iee(e,n,t,i){return i.settings.bogusComments?"<?"+vh(e.value,Object.assign({},i.settings.characterReferences,{subset:Pee}))+">":"<!--"+e.value.replace(Aee,a)+"-->";function a(o){return vh(o,Object.assign({},i.settings.characterReferences,{subset:Dee}))}}function Mee(e,n,t,i){return"<!"+(i.settings.upperDoctype?"DOCTYPE":"doctype")+(i.settings.tightDoctype?"":" ")+"html>"}function v_(e,n){const t=String(e);if(typeof n!="string")throw new TypeError("Expected character");let i=0,a=t.indexOf(n);for(;a!==-1;)i++,a=t.indexOf(n,a+n.length);return i}function Ree(e,n){const t=n||{};return(e[e.length-1]===""?[...e,""]:e).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}function Oee(e){return e.join(" ").trim()}const Lee=/[ \t\n\f\r]/g;function rS(e){return typeof e=="object"?e.type==="text"?w_(e.value):!1:w_(e)}function w_(e){return e.replace(Lee,"")===""}const Oi=rA(1),iA=rA(-1),Fee=[];function rA(e){return n;function n(t,i,a){const o=t?t.children:Fee;let l=(i||0)+e,f=o[l];if(!a)for(;f&&rS(f);)l+=e,f=o[l];return f}}const $ee={}.hasOwnProperty;function aA(e){return n;function n(t,i,a){return $ee.call(e,t.tagName)&&e[t.tagName](t,i,a)}}const aS=aA({body:Bee,caption:Y0,colgroup:Y0,dd:Hee,dt:Vee,head:Y0,html:zee,li:qee,optgroup:Gee,option:Yee,p:Uee,rp:S_,rt:S_,tbody:Qee,td:N_,tfoot:Jee,th:N_,thead:Wee,tr:Kee});function Y0(e,n,t){const i=Oi(t,n,!0);return!i||i.type!=="comment"&&!(i.type==="text"&&rS(i.value.charAt(0)))}function zee(e,n,t){const i=Oi(t,n);return!i||i.type!=="comment"}function Bee(e,n,t){const i=Oi(t,n);return!i||i.type!=="comment"}function Uee(e,n,t){const i=Oi(t,n);return i?i.type==="element"&&(i.tagName==="address"||i.tagName==="article"||i.tagName==="aside"||i.tagName==="blockquote"||i.tagName==="details"||i.tagName==="div"||i.tagName==="dl"||i.tagName==="fieldset"||i.tagName==="figcaption"||i.tagName==="figure"||i.tagName==="footer"||i.tagName==="form"||i.tagName==="h1"||i.tagName==="h2"||i.tagName==="h3"||i.tagName==="h4"||i.tagName==="h5"||i.tagName==="h6"||i.tagName==="header"||i.tagName==="hgroup"||i.tagName==="hr"||i.tagName==="main"||i.tagName==="menu"||i.tagName==="nav"||i.tagName==="ol"||i.tagName==="p"||i.tagName==="pre"||i.tagName==="section"||i.tagName==="table"||i.tagName==="ul"):!t||!(t.type==="element"&&(t.tagName==="a"||t.tagName==="audio"||t.tagName==="del"||t.tagName==="ins"||t.tagName==="map"||t.tagName==="noscript"||t.tagName==="video"))}function qee(e,n,t){const i=Oi(t,n);return!i||i.type==="element"&&i.tagName==="li"}function Vee(e,n,t){const i=Oi(t,n);return!!(i&&i.type==="element"&&(i.tagName==="dt"||i.tagName==="dd"))}function Hee(e,n,t){const i=Oi(t,n);return!i||i.type==="element"&&(i.tagName==="dt"||i.tagName==="dd")}function S_(e,n,t){const i=Oi(t,n);return!i||i.type==="element"&&(i.tagName==="rp"||i.tagName==="rt")}function Gee(e,n,t){const i=Oi(t,n);return!i||i.type==="element"&&i.tagName==="optgroup"}function Yee(e,n,t){const i=Oi(t,n);return!i||i.type==="element"&&(i.tagName==="option"||i.tagName==="optgroup")}function Wee(e,n,t){const i=Oi(t,n);return!!(i&&i.type==="element"&&(i.tagName==="tbody"||i.tagName==="tfoot"))}function Qee(e,n,t){const i=Oi(t,n);return!i||i.type==="element"&&(i.tagName==="tbody"||i.tagName==="tfoot")}function Jee(e,n,t){return!Oi(t,n)}function Kee(e,n,t){const i=Oi(t,n);return!i||i.type==="element"&&i.tagName==="tr"}function N_(e,n,t){const i=Oi(t,n);return!i||i.type==="element"&&(i.tagName==="td"||i.tagName==="th")}const Xee=aA({body:tte,colgroup:nte,head:ete,html:Zee,tbody:ite});function Zee(e){const n=Oi(e,-1);return!n||n.type!=="comment"}function ete(e){const n=new Set;for(const i of e.children)if(i.type==="element"&&(i.tagName==="base"||i.tagName==="title")){if(n.has(i.tagName))return!1;n.add(i.tagName)}const t=e.children[0];return!t||t.type==="element"}function tte(e){const n=Oi(e,-1,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&rS(n.value.charAt(0)))&&!(n.type==="element"&&(n.tagName==="meta"||n.tagName==="link"||n.tagName==="script"||n.tagName==="style"||n.tagName==="template"))}function nte(e,n,t){const i=iA(t,n),a=Oi(e,-1,!0);return t&&i&&i.type==="element"&&i.tagName==="colgroup"&&aS(i,t.children.indexOf(i),t)?!1:!!(a&&a.type==="element"&&a.tagName==="col")}function ite(e,n,t){const i=iA(t,n),a=Oi(e,-1);return t&&i&&i.type==="element"&&(i.tagName==="thead"||i.tagName==="tbody")&&aS(i,t.children.indexOf(i),t)?!1:!!(a&&a.type==="element"&&a.tagName==="tr")}const Tx={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function rte(e,n,t,i){const a=i.schema,o=a.space==="svg"?!1:i.settings.omitOptionalTags;let l=a.space==="svg"?i.settings.closeEmptyElements:i.settings.voids.includes(e.tagName.toLowerCase());const f=[];let d;a.space==="html"&&e.tagName==="svg"&&(i.schema=tA);const u=ate(i,e.properties),p=i.all(a.space==="html"&&e.tagName==="template"?e.content:e);return i.schema=a,p&&(l=!1),(u||!o||!Xee(e,n,t))&&(f.push("<",e.tagName,u?" "+u:""),l&&(a.space==="svg"||i.settings.closeSelfClosing)&&(d=u.charAt(u.length-1),(!i.settings.tightSelfClosing||d==="/"||d&&d!=='"'&&d!=="'")&&f.push(" "),f.push("/")),f.push(">")),f.push(p),!l&&(!o||!aS(e,n,t))&&f.push("</"+e.tagName+">"),f.join("")}function ate(e,n){const t=[];let i=-1,a;if(n){for(a in n)if(n[a]!==null&&n[a]!==void 0){const o=ste(e,a,n[a]);o&&t.push(o)}}for(;++i<t.length;){const o=e.settings.tightAttributes?t[i].charAt(t[i].length-1):void 0;i!==t.length-1&&o!=='"'&&o!=="'"&&(t[i]+=" ")}return t.join("")}function ste(e,n,t){const i=uee(e.schema,n),a=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,o=e.settings.allowDangerousCharacters?0:1;let l=e.quote,f;if(i.overloadedBoolean&&(t===i.attribute||t==="")?t=!0:(i.boolean||i.overloadedBoolean)&&(typeof t!="string"||t===i.attribute||t==="")&&(t=!!t),t==null||t===!1||typeof t=="number"&&Number.isNaN(t))return"";const d=vh(i.attribute,Object.assign({},e.settings.characterReferences,{subset:Tx.name[a][o]}));return t===!0||(t=Array.isArray(t)?(i.commaSeparated?Ree:Oee)(t,{padLeft:!e.settings.tightCommaSeparatedLists}):String(t),e.settings.collapseEmptyAttributes&&!t)?d:(e.settings.preferUnquoted&&(f=vh(t,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:Tx.unquoted[a][o]}))),f!==t&&(e.settings.quoteSmart&&v_(t,l)>v_(t,e.alternative)&&(l=e.alternative),f=l+vh(t,Object.assign({},e.settings.characterReferences,{subset:(l==="'"?Tx.single:Tx.double)[a][o],attribute:!0}))+l),d+(f&&"="+f))}const ote=["<","&"];function sA(e,n,t,i){return t&&t.type==="element"&&(t.tagName==="script"||t.tagName==="style")?e.value:vh(e.value,Object.assign({},i.settings.characterReferences,{subset:ote}))}function lte(e,n,t,i){return i.settings.allowDangerousHtml?e.value:sA(e,n,t,i)}function cte(e,n,t,i){return i.all(e)}const ute=vT("type",{invalid:dte,unknown:fte,handlers:{comment:Iee,doctype:Mee,element:rte,raw:lte,root:cte,text:sA}});function dte(e){throw new Error("Expected node, not `"+e+"`")}function fte(e){const n=e;throw new Error("Cannot compile unknown node `"+n.type+"`")}const hte={},pte={},mte=[];function gte(e,n){const t=n||hte,i=t.quote||'"',a=i==='"'?"'":'"';if(i!=='"'&&i!=="'")throw new Error("Invalid quote `"+i+"`, expected `'` or `\"`");return{one:yte,all:xte,settings:{omitOptionalTags:t.omitOptionalTags||!1,allowParseErrors:t.allowParseErrors||!1,allowDangerousCharacters:t.allowDangerousCharacters||!1,quoteSmart:t.quoteSmart||!1,preferUnquoted:t.preferUnquoted||!1,tightAttributes:t.tightAttributes||!1,upperDoctype:t.upperDoctype||!1,tightDoctype:t.tightDoctype||!1,bogusComments:t.bogusComments||!1,tightCommaSeparatedLists:t.tightCommaSeparatedLists||!1,tightSelfClosing:t.tightSelfClosing||!1,collapseEmptyAttributes:t.collapseEmptyAttributes||!1,allowDangerousHtml:t.allowDangerousHtml||!1,voids:t.voids||ree,characterReferences:t.characterReferences||pte,closeSelfClosing:t.closeSelfClosing||!1,closeEmptyElements:t.closeEmptyElements||!1},schema:t.space==="svg"?tA:hee,quote:i,alternative:a}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function yte(e,n,t){return ute(e,n,t,this)}function xte(e){const n=[],t=e&&e.children||mte;let i=-1;for(;++i<t.length;)n[i]=this.one(t[i],i,e);return n.join("")}const bte={};function vte(e){const n=this,{handlers:t,sanitize:i,...a}=e||bte;let o=!1,l;typeof i=="boolean"?o=!i:i&&(l=i),n.compiler=f;function f(d,u){const p=iee(d,{handlers:t,allowDangerousHtml:o}),g=o?p:hZ(p,l),b=gte(g,{...a,allowDangerousHtml:o});return u.extname&&(u.extname=".html"),d&&d.type==="root"&&b&&/[^\r\n]/.test(b.charAt(b.length-1))?b+`
`:b}}const wte=()=>{var ec,cu;const{recordId:e}=qr(),n=Nt(),t=nr(),[i,a]=w.useState(""),[o]=w.useState([]),[l,f]=w.useState(null),[d,u]=w.useState(null),[p,g]=w.useState(void 0),[b,v]=w.useState(void 0),[N,k]=w.useState(null),[E,T]=w.useState(!1),[I,D]=w.useState(""),[U,O]=w.useState(!1),[$,B]=w.useState(null),[q,H]=w.useState(null),[F,L]=w.useState(!1),[Q,ne]=w.useState(!1),[ie,oe]=w.useState(null),[Y,z]=w.useState(""),[re,X]=w.useState(""),[P,te]=w.useState(null),[se,M]=w.useState(!1),[fe,we]=w.useState(!1),[ce,Le]=w.useState(null),[Ne,nt]=w.useState(!1),[ut,je]=w.useState(null),[ye,Ae]=w.useState(window.innerHeight),[De,Ve]=w.useState([]),[it,Ke]=w.useState(!1),[rt,Ft]=w.useState(null),[_t,ve]=w.useState([]),[qe,We]=w.useState([]),[ze,J]=w.useState(!1),[G,K]=w.useState(null),Se=w.useRef(null),Ee=w.useRef(null),Be=w.useRef(!1),at=w.useRef(null),gt=w.useRef(null),[pt,Ue]=w.useState(33.33),[Ze,Fe]=w.useState(!1),ct=w.useRef(null),Xe=w.useRef(null),vt=150,[Xn,$n]=w.useState([]),[_n,yn]=w.useState([]),[un,Ci]=w.useState(!1),[Vi,ir]=w.useState(null),[ma,_r]=w.useState(!1),[ti,Zn]=w.useState(null),[zn,$a]=w.useState(!1),[us,zh]=w.useState(null),[Bh,Md]=w.useState(!1),[ds,Jc]=w.useState(null),[Vs,Hs]=w.useState(!1),[za,Gs]=w.useState(null),[ui,Rd]=w.useState(!1),[Il,fs]=w.useState(null),[Ba,kr]=w.useState([]),[Ys,Ws]=w.useState(!1),[Od,Uo]=w.useState(null),[qo,rr]=w.useState(!1),[Vo,Ml]=w.useState(null),[ga,Kc]=w.useState({}),[Xc,Ld]=w.useState(!1),[Ho,Li]=w.useState(!1),[Rl,Ol]=w.useState(!1),[Go,Ll]=w.useState(!1),[Ua,Zc]=w.useState(!1),[Hi,Yo]=w.useState(!1),[Qs,qa]=w.useState(!1),ya=w.useMemo(()=>(d==null?void 0:d.admission_date)&&!(d!=null&&d.discharge_date),[d]),[Fl,hs]=w.useState(!1),[Vr,Va]=w.useState(""),[Wo,Qo]=w.useState(void 0),[Jo,$l]=w.useState(void 0),[zl,ps]=w.useState(void 0),[Er,Ko]=w.useState(!1),[ms,ar]=w.useState(null),[gs,eu]=w.useState(!1),Xo=w.useRef(null),[Js,Tr]=w.useState(null),[ys,Ks]=w.useState(null),Ar=w.useRef(null),[tu]=w.useState("Loading..."),[Bl,Ul]=w.useState(!1),[hn,dn]=w.useState(!1),[pn,ji]=w.useState(null),[Hr,Xs]=w.useState(""),[xa,Zo]=w.useState(""),[ql,Vl]=w.useState(!0),[An,xs]=w.useState(!1),[Gr,el]=w.useState(!1),[bs,Gi]=w.useState(!1),Zs=w.useRef(null),Ha=async le=>{try{const xe=await pe(`/api/patients/${le}`);if(!xe.ok){const Me=await xe.json().catch(()=>({}));throw new Error(Me.message||`Failed to fetch patient details: ${xe.status}`)}const me=await xe.json();if(u(me),g(me.age),v(me.gender),z(me.ai_response||""),u(Me=>Me?{...Me,current_status:me.current_status,admission_date:me.admission_date,discharge_date:me.discharge_date}:{...me,current_status:me.current_status,admission_date:me.admission_date,discharge_date:me.discharge_date}),me.insurance_type&&u(Me=>Me?{...Me,insurance_type:me.insurance_type}:{...me}),Fi(le),me.ai_response){const Me=/```json\s*([\s\S]*?)\s*```/,tt=me.ai_response.match(Me);if(tt&&tt[1])X(me.ai_response.replace(Me,"").trim()),te(tt[1].trim());else{const ue=me.ai_response.trim();if(ue.startsWith("{")&&ue.endsWith("}"))try{JSON.parse(ue),X(""),te(ue)}catch{X(ue),te(null)}else if(ue.startsWith("[")&&ue.endsWith("]"))try{JSON.parse(ue),X(""),te(ue)}catch{X(ue),te(null)}else X(ue),te(null)}}else X(""),te(null)}catch{u(null),z(""),X(""),te(null)}},Fd=async(le,xe)=>{u(me=>me?{...me,insurance_type:xe}:null);try{const me=await pe(`/api/patients/${le}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:xe})});if(!me.ok){const Me=await me.json();throw new Error(Me.message||"Failed to update insurance type")}}catch(me){console.error("Error updating insurance type:",me),le&&Ha(le)}},Hl=async le=>{J(!0),K(null),We([]);try{const xe=await pe(`/api/queue/patient/${le}/complaints`);if(!xe.ok){const Me=await xe.json().catch(()=>({}));throw new Error(Me.message||`HTTP error! status: ${xe.status}`)}const me=await xe.json();We(me||[])}catch(xe){K(`Past complaints error: ${xe.message}`)}finally{J(!1)}},eo=async le=>{ve([]);try{const xe=await pe(`/api/pharmacy-orders/patient/${le}`);if(!xe.ok){const Me=await xe.json().catch(()=>({}));throw new Error(Me.message||`HTTP error! status: ${xe.status}`)}const me=await xe.json();ve(me||[])}catch{}},to=async le=>{Ws(!0),Uo(null),kr([]);try{const xe=await pe(`/api/lab/orders/patient/${le}`);if(!xe.ok){const Me=await xe.json().catch(()=>({}));throw new Error(Me.message||`HTTP error! status: ${xe.status}`)}const me=await xe.json();kr(me||[])}catch(xe){Uo(`Pending labs error: ${xe.message}`)}finally{Ws(!1)}},gi=async le=>{Ke(!0),Ft(null),Ve([]);try{const xe=await pe(`/api/lab/patient/${le}`);if(!xe.ok){const Me=await xe.json().catch(()=>({}));throw new Error(Me.message||`HTTP error! status: ${xe.status}`)}const me=await xe.json();Ve(me||[])}catch(xe){Ft(`Lab reports error: ${xe.message}`)}finally{Ke(!1)}},Uh=le=>{Ha(le),Hl(le),eo(le),to(le),gi(le)},Fi=async le=>{try{const xe=await pe(`/api/queue/patient/${le}/latest`);if(!xe.ok){const Me=await xe.json().catch(()=>({}));throw new Error(Me.message||`Failed to fetch queue status: ${xe.status}`)}const me=await xe.json();if(me){const Me=new Date(me.createdAt),tt=new Date,ue=Me.getDate()===tt.getDate()&&Me.getMonth()===tt.getMonth()&&Me.getFullYear()===tt.getFullYear(),Re=["waiting","consulting"].includes(me.status);qa(ue&&Re)}else qa(!1)}catch(xe){console.error("Error checking patient queue status:",xe),qa(!1)}},qh=le=>{n(`/dashboard/edit-pharmacy-order/${le}`)},$d=le=>{oe(null),console.log(`Preparing billing navigation for order: ${le}`);const xe=_t.find(me=>me.id===le);if(xe){const me=xe.medications.map(Me=>{const tt=Me.price??0;return(Me.price===void 0||Me.price===null)&&console.warn(`Medication "${Me.name}" in order ${le} is missing a price. Defaulting to 0.`),{name:Me.name,pack_quantity:Me.pack_quantity,loose_quantity:Me.loose_quantity,price:tt,pack_price:Me.pack_price,loose_price:Me.loose_price,total_price:Number(Me.total_price)||0,isLoose:Me.isLoose,unit:Me.unit,drug_id:Me.drug_id?String(Me.drug_id):null,tabletsPerDay:Me.tabletsPerDay,numberOfDays:Me.numberOfDays,directions_to_use:Me.directions_to_use,discount_percentage:Me.discount_percentage??0,batch:Me.batch,expiry_date:Me.expiry_date}});console.log("Navigating to /dashboard/pharmacy-billing with state:",{initialItems:me}),n(`/dashboard/pharmacy-billing/${le}`,{state:{initialItems:me}})}else console.error(`Order with ID ${le} not found.`),oe(`Order with ID ${le} not found.`),alert(`Error: Could not find order ${le} to bill.`)},Yr=async(le,xe)=>{oe(null);const me=_t.find(tt=>tt.id===le);if(!me){oe(`Order with ID ${le} not found.`);return}const Me={status:xe,medications:me.medications};try{const tt=await pe(`/api/pharmacy-orders/${le}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Me)});if(!tt.ok){const Re=await tt.text();throw new Error(`Failed to update status: ${tt.statusText} (${tt.status}) - ${Re}`)}const ue=await tt.json();ve(Re=>Re.map(Ce=>Ce.id===ue.id?{...Ce,status:ue.status}:Ce)),l&&eo(l)}catch(tt){console.error("Failed to update order status:",tt),oe(tt.message||`Failed to update status for order ${le}.`),alert(`Error updating status for order ${le}: ${tt.message||"Please try again."}`)}},Gl=le=>{kr(xe=>xe.map(me=>me.id===le?{...me,isEditing:!0,editedTests:[...me.tests],editedStatus:me.status}:{...me,isEditing:!1}))},nu=le=>{kr(xe=>xe.map(me=>me.id===le?{...me,isEditing:!1,editedTests:void 0,editedStatus:void 0}:me))},On=(le,xe,me,Me)=>{kr(tt=>tt.map(ue=>{if(ue.id===le){const Re=ue.editedTests?[...ue.editedTests]:[...ue.tests];if(me==="add")return{...ue,editedTests:[...Re,{id:"",name:"",price:0}]};if(me==="remove")return{...ue,editedTests:Me};if(xe!==-1){const Ce={...Re[xe],[me]:Me};return Re[xe]=Ce,{...ue,editedTests:Re}}}return ue}))},ba=(le,xe)=>{kr(me=>me.map(Me=>Me.id===le?{...Me,editedStatus:xe}:Me))},iu=le=>{if(!le||!le.id){console.error("Cannot navigate to billing: Lab Order data or ID is missing."),alert("Could not open billing page: Lab Order information is missing.");return}n("/lab-billing",{state:{labOrderId:le.id}})},Vh=le=>{le&&le.id?n(`/lab/report/${le.id}`):(console.error("Cannot navigate: Lab Order or Lab Order ID is missing."),alert("Could not open the report entry page: Lab Order information is missing."))},ru=le=>{le&&le.id?n(`/lab/view-report/${le.id}`):(console.error("Attempted to view report for a lab order with no ID:",le),alert("Cannot view report: Lab Order ID is missing."))},Hh=async(le,xe,me)=>{Li(!0),oe(null);try{if(!xe||xe.length===0)throw new Error("Lab order must have at least one test.");for(const ue of xe)if(!ue.id||!ue.name||isNaN(ue.price)||ue.price<0)throw new Error(`Invalid test data: ${JSON.stringify(ue)}. Each test must have id, name, and a valid price.`);const Me={tests:xe,status:me},tt=await pe(`/api/lab/orders/${le}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Me)});if(!tt.ok){const ue=await tt.json().catch(()=>({}));throw new Error(ue.message||`Failed to update lab order: ${tt.statusText}`)}l&&to(l),kr(ue=>ue.map(Re=>Re.id===le?{...Re,isEditing:!1,editedTests:void 0,editedStatus:void 0}:Re))}catch(Me){oe(`Lab Order Save Error: ${Me.message}`)}finally{Li(!1)}},Yl=async le=>{if(!window.confirm(`Are you sure you want to delete this ${le.type.toLowerCase()} record? This action cannot be undone.`))return;rr(!0),Ml(null);let me=null,Me;const tt=le.type;try{switch(tt){case"Complaint":if(Me=le.data.id,!Me)throw new Error("Complaint ID is missing.");me=`/api/patients/complaints/${Me}`;break;case"Lab Order":if(Me=le.data.id,!Me)throw new Error("Lab Order ID is missing.");me=`/api/lab/orders/${Me}`;break;case"Lab Report":if(Me=le.data.reportId,!Me)throw new Error("Lab Report ID is missing.");me=`/api/lab/reports/${Me}`;break;case"Pharmacy Order":if(Me=le.data.id,!Me)throw new Error("Pharmacy Order ID is missing.");me=`/api/pharmacy-orders/${Me}`;break;default:throw new Error(`Deletion not supported for item type: ${tt}`)}if(!me)throw new Error(`Could not determine delete URL for type: ${tt}`);const ue=await pe(me,{method:"DELETE"});if(!ue.ok){const Re=await ue.json().catch(()=>({}));throw new Error(Re.message||`Failed to delete ${tt}: ${ue.statusText}`)}l&&(tt==="Complaint"?Hl(l):tt==="Lab Order"?(to(l),gi(l)):tt==="Lab Report"?gi(l):tt==="Pharmacy Order"&&eo(l))}catch(ue){Ml(`Delete Error (${tt}): ${ue.message}`),qo&&rr(!1)}finally{rr(!1)}},Gh=async()=>{if(!l)return;if(_t.filter(xe=>xe.status==="pending").length<2){alert("You need at least two pending orders to merge.");return}dn(!0);try{const xe=await pe(`/api/pharmacy-orders/patient/${l}/merge-pending`,{method:"POST"});if(!xe.ok){const me=await xe.json().catch(()=>({}));throw new Error(me.message||"Failed to merge orders")}eo(l)}catch(xe){oe(`Merge Error: ${xe.message}`)}finally{dn(!1)}},va=w.useMemo(()=>{if(!l||!qe)return[];const le=qe.map(xe=>({date:new Date(xe.createdAt),type:"Complaint",data:xe,originalDateString:xe.createdAt})).filter(xe=>!isNaN(xe.date.getTime()));return le.sort((xe,me)=>me.date.getTime()-xe.date.getTime()),le},[l,qe]),Pr=w.useMemo(()=>{if(!l)return[];const le=new Map;(Ba??[]).forEach(me=>{le.set(me.id,{...me})}),(De??[]).forEach(me=>{if(!le.has(me.id))le.set(me.id,{id:me.id,patient_id:me.patient_id,tests:me.tests,status:me.status,createdAt:me.createdAt,report:me});else{const Me=le.get(me.id);Me&&(Me.report=me,Me.status=me.status)}});let xe=Array.from(le.values());return xe.sort((me,Me)=>new Date(me.createdAt).getTime()-new Date(Me.createdAt).getTime()),xe=xe.map((me,Me)=>({...me,serialNumber:Me+1})),xe.map(me=>({date:new Date(me.createdAt),type:"Lab Order",data:me,originalDateString:me.createdAt}))},[l,Ba,De]),$i=w.useMemo(()=>{if(!l||!_t)return[];const le=_t.map(xe=>({date:new Date(xe.date),type:"Pharmacy Order",data:xe,originalDateString:xe.date})).filter(xe=>!isNaN(xe.date.getTime()));return le.sort((xe,me)=>me.date.getTime()-xe.date.getTime()),le},[l,_t]),[Wl,vs]=w.useState(null),[au,tl]=w.useState([]),[no,Ql]=w.useState(""),su=(le,xe)=>{if(!le||!le.report_content||!xe)return"";try{const me=JSON.parse(le.report_content||"{}");if(typeof me!="object"||me===null)return`<p class="italic text-gray-500 text-xs">Report content is not structured data.</p><pre>${le.report_content}</pre>`;let Me="";return xe.forEach(tt=>{me[tt.id]?(Me+=`<h5 class="font-semibold text-sm mt-2 mb-1">${tt.name}</h5>`,Me+='<table class="lab-report-print-table"><thead><tr><th>Parameter</th><th>Value</th><th>Normal Range</th></tr></thead><tbody>',Object.entries(me[tt.id]).map(([ue,Re])=>{var yt;const Ce=(yt=tt.default_parameters)==null?void 0:yt.find(en=>en.name===ue);let lt="N/A";Ce&&Ce.type==="number"&&(Ce.lower_limit!=null||Ce.upper_limit!=null)?(lt="",Ce.lower_limit!=null&&(lt+=` > ${Ce.lower_limit}`),Ce.lower_limit!=null&&Ce.upper_limit!=null&&(lt+=" - "),Ce.upper_limit!=null&&(lt+=` < ${Ce.upper_limit}`),lt=lt.trim()||"N/A"):(Ce==null?void 0:Ce.type)==="boolean"?lt="N/A":Ce!=null&&Ce.normal_range&&(lt=Ce.normal_range),Me+=`<tr><td>${ue}</td><td>${String(Re)} ${(Ce==null?void 0:Ce.unit)||""}</td><td>${lt}</td></tr>`}),Me+="</tbody></table>"):Me+=`<p class="italic text-gray-500 text-xs">No parameters reported for ${tt.name}.</p>`}),Me}catch{return`<p class="italic text-gray-500 text-xs">Error parsing report content.</p><pre>${le.report_content}</pre>`}};w.useEffect(()=>{const le=()=>{Ae(window.innerHeight)};return window.addEventListener("resize",le),le(),()=>window.removeEventListener("resize",le)},[]),w.useEffect(()=>{const le=me=>{if(!Ze||!Xe.current||!ct.current)return;const Me=ct.current.getBoundingClientRect(),ue=me.clientX-Xe.current.x;let Re=Xe.current.initialWidth-ue;const Ce=Me.width-vt-10;Re=Math.max(vt,Re),Re=Math.min(Re,Ce);const lt=Re/Me.width*100;Ue(lt)},xe=()=>{Fe(!1),Xe.current=null,document.body.style.cursor="",document.body.style.userSelect=""};return Ze&&(window.addEventListener("mousemove",le),window.addEventListener("mouseup",xe),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{window.removeEventListener("mousemove",le),window.removeEventListener("mouseup",xe),document.body.style.cursor="",document.body.style.userSelect=""}},[Ze]);const Jl=le=>{if(!ct.current)return;le.preventDefault();const xe=ct.current.querySelector(".edit-complaint-context-column");xe&&(Xe.current={x:le.clientX,initialWidth:xe.offsetWidth},Fe(!0))},wa=w.useCallback(async()=>{ne(!0),oe(null);try{const le=await pe("/api/queue/doctor/new",{method:"POST"});if(!le.ok){const me=await le.json().catch(()=>({}));throw new Error(me.message||`Failed to create record: ${le.statusText}`)}const xe=await le.json();if(!xe.recordId)throw new Error("New record ID not received from server.");n(`/edit-complaint/${xe.recordId}`,{replace:!0})}catch(le){oe(`Failed to create new complaint record: ${le.message}`)}finally{ne(!1)}},[n]);w.useEffect(()=>{(async()=>{Vl(!0);try{const xe=await pe("/api/clinics/settings");if(!xe.ok){const Me=await xe.json().catch(()=>({}));throw new Error(Me.message||"Failed to fetch clinic settings.")}const me=await xe.json();ji({admissionCharge:parseFloat(me.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(me.perDayCharge||0).toFixed(2),otherCharges:parseFloat(me.otherCharges||0).toFixed(2),aiMemory:me.aiMemory||"",aiMemoryUpdatedAt:me.aiMemoryUpdatedAt||null,clinicWideSystemPrompt:me.clinicWideSystemPrompt||"",clinicWideSystemPromptUpdatedAt:me.clinicWideSystemPromptUpdatedAt||null,gemini_api_key:me.gemini_api_key||""}),Xs(me.aiMemory||""),Zo(me.clinicWideSystemPrompt||"")}catch{}finally{Vl(!1)}})()},[]),w.useEffect(()=>{var xe;(xe=t.state)!=null&&xe.initialComplaint&&a(t.state.initialComplaint),e?(async me=>{L(!0),oe(null);try{const Me=await pe(`/api/queue/doctor/complaint/${me}`);if(!Me.ok){const ue=await Me.json().catch(()=>({}));throw new Error(ue.message||`HTTP error! status: ${Me.status}`)}const tt=await Me.json();f(tt.patientId),g(tt.age),v(tt.gender),k(tt.case_summary||null),H(tt.updatedAt||null)}catch{oe("Failed to load current complaint details."),f(null),g(void 0),v(void 0),k(null),H(null)}finally{L(!1)}})(e):wa()},[e,wa,(ec=t.state)==null?void 0:ec.initialComplaint]),w.useEffect(()=>{l?Uh(l):(u(null),We([]),ve([]),kr([]),Ve([]),H(null),qa(!1))},[l]),w.useEffect(()=>{var me;const le=(me=t.state)==null?void 0:me.initialComplaint;le&&e&&(!F&&!ze&&!Ys&&!it&&!un)&&!Be.current&&i===le&&(Be.current=!0,Dr(),n(t.pathname,{replace:!0,state:{}}))},[(cu=t.state)==null?void 0:cu.initialComplaint,e,i,F,ze,Ys,it,un,n]);const Yh=()=>{D(N||""),T(!0),B(null)},zd=()=>{T(!1),D(""),B(null)},Yi=async()=>{if(!e){B("Missing Record ID.");return}O(!0),B(null);try{const le=await pe(`/api/queue/doctor/complaint/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({case_summary:I.trim()})});if(!le.ok){const me=await le.json().catch(()=>({}));throw new Error(me.message||`Failed to save case summary: ${le.statusText}`)}const xe=await le.json();k(xe.case_summary||I.trim()),H(xe.updatedAt||null),T(!1)}catch(le){B(`Save Error: ${le.message}`)}finally{O(!1)}};w.useEffect(()=>{(async()=>{Ci(!0),ir(null);try{const[xe,me]=await Promise.all([pe("/api/drugs"),pe("/api/lab-tests")]);if(!xe.ok)throw new Error(`Pharmacy inventory error! status: ${xe.status}`);const Me=await xe.json();if($n(Me||[]),!me.ok)throw new Error(`Lab inventory error! status: ${me.status}`);const tt=await me.json();yn(tt||[])}catch(xe){ir(xe.message)}finally{Ci(!1)}})()},[]);const Kl=async()=>{if(!pn)return;if(Hr===pn.aiMemory&&xa===pn.clinicWideSystemPrompt){el(!1);return}const le=Hr!==pn.aiMemory,xe=xa!==pn.clinicWideSystemPrompt;le&&xs(!0),xe&&Gi(!0);try{const me={...pn};le&&(me.aiMemory=Hr),xe&&(me.clinicWideSystemPrompt=xa);const Me=await pe("/api/clinics/settings",{method:"PUT",body:JSON.stringify(me)});if(!Me.ok){const ue=await Me.json().catch(()=>({}));throw new Error(ue.message||"Failed to update clinic settings.")}const tt=await Me.json();ji({admissionCharge:parseFloat(tt.settings.admissionCharge).toFixed(2),perDayCharge:parseFloat(tt.settings.perDayCharge).toFixed(2),otherCharges:parseFloat(tt.settings.otherCharges).toFixed(2),aiMemory:tt.settings.aiMemory||"",aiMemoryUpdatedAt:tt.settings.aiMemoryUpdatedAt||(pn==null?void 0:pn.aiMemoryUpdatedAt)||null,clinicWideSystemPrompt:tt.settings.clinicWideSystemPrompt||"",clinicWideSystemPromptUpdatedAt:tt.settings.clinicWideSystemPromptUpdatedAt||(pn==null?void 0:pn.clinicWideSystemPromptUpdatedAt)||null}),le&&Xs(tt.settings.aiMemory||""),xe&&(Zo(tt.settings.clinicWideSystemPrompt||""),el(!1))}catch{}finally{le&&xs(!1),xe&&Gi(!1)}},io=()=>{pn&&(Zo(pn.clinicWideSystemPrompt||""),el(!0))},ro=()=>{el(!1),pn&&Zo(pn.clinicWideSystemPrompt||"")},Dr=async le=>{const xe=le??i;Zs.current&&await Zs.current.callGenerativeApi(xe)},Wh=le=>{navigator.clipboard.writeText(le).then(()=>{}).catch(xe=>{console.error("Failed to copy text: ",xe)})},ao=(le,xe)=>{const me=window.open("","_blank");me&&(me.document.write(`
        <html>
          <head>
            <title>${xe}</title>
            <style>
              body { font-family: sans-serif; margin: 20px; }
              h2 { text-align: center; margin-bottom: 20px; }
              table { width: 100%; border-collapse: collapse; margin-bottom: 10px; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f2f2f2; }
              pre { white-space: pre-wrap; word-wrap: break-word; }
              .ai-context-section { margin-bottom: 20px; border: 1px solid #eee; padding: 15px; border-radius: 5px; }
              .ai-context-section-title { font-size: 1.1em; font-weight: bold; margin-bottom: 10px; color: #333; }
              .ai-context-text { margin-bottom: 5px; }
              .text-gray-400 { color: #999; }
              .font-semibold { font-weight: 600; }
              .italic { font-style: italic; }
              .mt-2 { margin-top: 8px; }
              .ml-1 { margin-left: 4px; }
              .ml-2 { margin-left: 8px; }
              .flex { display: flex; }
              .flex-col { flex-direction: column; }
              .w-full { width: 100%; }
              .text-xs { font-size: 0.75rem; }
              .text-sm { font-size: 0.875rem; }
              .prose { max-width: 65ch; }
              .prose table { display: table; } /* Ensure tables in markdown render correctly */
            </style>
          </head>
          <body>
            <h2>${xe}</h2>
            <div id="print-content">${le}</div>
          </body>
        </html>
      `),me.document.close(),me.print())},Bd=()=>{if(Y){const le=lZ().use(Ro).use(vte).processSync(re).toString();ao(`<div class="prose">${le}</div>`,"AI Response")}};w.useEffect(()=>{if(d){let le=`
        <div class="print-section">
          <h3>Patient Details</h3>
          <p><strong>Name:</strong> ${d.name||"N/A"}</p>
          <p><strong>Token:</strong> ${d.patient_token_number||"N/A"}</p>
          <p><strong>Age:</strong> ${d.age||"N/A"}</p>
          <p><strong>Gender:</strong> ${d.gender||"N/A"}</p>
          <p><strong>Phone:</strong> ${d.phone||"N/A"}</p>
          <p><strong>Insurance:</strong> ${d.insurance_type||"N/A"}</p>
          <p><strong>Status:</strong> ${d.current_status||"N/A"}</p>
          <p><strong>Admitted:</strong> ${d.admission_date?new Date(d.admission_date).toLocaleDateString():"N/A"}</p>
          <p><strong>Discharged:</strong> ${d.discharge_date?new Date(d.discharge_date).toLocaleDateString():"N/A"}</p>
        </div>
        <div class="print-section">
          <h3>Case Summary</h3>
          <p>${N||"No summary available."}</p>
        </div>
        <div class="print-section">
          <h3>Complaints History</h3>
          ${va.length>0?`
            <ul>
              ${va.map(xe=>`<li>${new Date(xe.originalDateString).toLocaleDateString()}: ${xe.data.complaint}</li>`).join("")}
            </ul>
          `:"<p>No past complaints.</p>"}
        </div>
        <div class="print-section">
          <h3>Pharmacy Orders</h3>
          ${$i.length>0?`
            <table class="print-table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Status</th>
                  <th>Drug Name</th>
                  <th>Quantity</th>
                  <th>Dosage</th>
                  <th>Directions</th>
                </tr>
              </thead>
              <tbody>
                ${$i.map(xe=>xe.data.medications.map((me,Me)=>`
                    <tr>
                      ${Me===0?`<td rowspan="${xe.data.medications.length}">${new Date(xe.originalDateString).toLocaleDateString()}</td>`:""}
                      ${Me===0?`<td rowspan="${xe.data.medications.length}">${xe.data.status}</td>`:""}
                      <td><strong>${me.name}</strong></td>
                      <td>
                        ${me.pack_quantity!==void 0&&me.pack_quantity>0?`Packs: ${me.pack_quantity}`:""}
                        ${me.pack_quantity!==void 0&&me.pack_quantity>0&&me.loose_quantity!==void 0&&me.loose_quantity>0?", ":""}
                        ${me.loose_quantity!==void 0&&me.loose_quantity>0?`Loose: ${me.loose_quantity}`:""}
                      </td>
                      <td>${me.tabletsPerDay&&me.numberOfDays?`${me.tabletsPerDay} tab/day for ${me.numberOfDays} days`:"N/A"}</td>
                      <td>${me.directions_to_use||"N/A"}</td>
                    </tr>
                  `).join("")).join("")}
              </tbody>
            </table>
          `:"<p>No pharmacy orders.</p>"}
        </div>
        <div class="print-section">
          <h3>Lab History (Orders & Reports)</h3>
          ${Pr.length>0?`
            ${Pr.map(xe=>{const me=xe.data.tests.map(tt=>tt.name).join(", ");let Me="";return xe.data.report&&(Me=`
                  <div class="lab-report-print-container">
                    <h4>Lab Report (${new Date(xe.data.report.report_date).toLocaleDateString()})</h4>
                    ${su(xe.data.report,xe.data.report.tests)}
                  </div>
                `),`
                <div class="lab-history-item">
                  <p><strong>Order Date:</strong> ${new Date(xe.originalDateString).toLocaleDateString()}</p>
                  <p><strong>Status:</strong> ${xe.data.status}</p>
                  <p><strong>Tests:</strong> ${me}</p>
                  ${Me}
                </div>
              `}).join("")}
          `:"<p>No lab history.</p>"}
        </div>
      `;Ql(le)}else Ql("")},[d,N,va,$i,Pr,su]);const Ud=()=>{no&&ao(no,`Patient Details - ${d==null?void 0:d.name}`)},ou=le=>{a(le),vs(null),tl([]),setTimeout(()=>{Dr(le)},0)},_i=F||fe||Ne,qd=()=>{a("reports came,please anaylse"),setTimeout(()=>{Dr()},0)},lu=le=>{Kc(xe=>({...xe,[le]:!xe[le]}))},Xl=le=>{le.key==="Enter"&&!le.shiftKey&&(le.preventDefault(),!_i&&!un&&!Q&&i.trim()&&e&&Dr())};w.useEffect(()=>{const le=window.SpeechRecognition||window.webkitSpeechRecognition;if(!le){Tr("Speech recognition not supported in this browser.");return}const xe=new le;return xe.continuous=!0,xe.interimResults=!0,xe.lang="en-US",xe.onresult=me=>{let Me="";for(let tt=me.resultIndex;tt<me.results.length;++tt)me.results[tt].isFinal&&(Me+=me.results[tt][0].transcript);Me&&a(tt=>tt+(tt.endsWith(" ")||tt===""?"":" ")+Me)},xe.onerror=me=>{Tr(`Speech error: ${me.error}`),eu(!1)},xe.onend=()=>{},Xo.current=xe,()=>{Xo.current&&Xo.current.stop()}},[]);const Vd=async()=>{if(l)if(ya){Ll(!0);try{const le=await pe(`/api/patients/${l}/discharge`,{method:"POST"});if(!le.ok){const xe=await le.json().catch(()=>({}));throw new Error(xe.message||`Failed to discharge patient: ${le.status}`)}Ha(l)}catch(le){oe(`Discharge Error: ${le.message}`)}finally{Ll(!1)}}else{Ol(!0);try{const le=await pe(`/api/patients/${l}/admit`,{method:"POST"});if(!le.ok){const xe=await le.json().catch(()=>({}));throw new Error(xe.message||`Failed to admit patient: ${le.status}`)}Ha(l)}catch(le){oe(`Admit Error: ${le.message}`)}finally{Ol(!1)}}},Ga=async le=>{if(l){Zc(!0);try{const me=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l})});if(!me.ok){const Me=await me.json().catch(()=>({}));throw new Error(Me.message||`Failed to add patient to ${le} queue: ${me.status}`)}alert(`Patient added to ${le} queue successfully!`),l&&(Ha(l),Fi(l))}catch(xe){oe(`Add to Queue Error: ${xe.message}`)}finally{Zc(!1)}}},Zl=async()=>{if(e){Yo(!0),oe(null);try{const le=await pe(`/api/queue/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"seen"})});if(!le.ok){const xe=await le.json().catch(()=>({}));throw new Error(xe.message||"Failed to complete consultation")}alert("Consultation completed successfully!"),l&&(Ha(l),Fi(l))}catch(le){oe(`Error completing consultation: ${le.message}`)}finally{Yo(!1)}}},Qh=async()=>{if(!l){ar("Missing Patient ID.");return}if(!d){ar("Patient details not loaded.");return}Ko(!0),ar(null);try{const le={};let xe=!1;if(Vr!==d.name&&(le.name=Vr,xe=!0),Wo!==d.age&&(le.age=Wo,xe=!0),Jo!==d.gender&&(le.gender=Jo,xe=!0),zl!==d.phone&&(le.phone=zl,xe=!0),!xe){ar("No changes detected."),Ko(!1),hs(!1);return}const me=await pe(`/api/patients/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)});if(!me.ok){const tt=await me.json().catch(()=>({}));throw new Error(tt.message||`Failed to update patient details: ${me.statusText}`)}const Me=await me.json();u(Me),g(Me.age),v(Me.gender),Va(Me.name),Qo(Me.age),$l(Me.gender),ps(Me.phone),hs(!1)}catch(le){ar(`Save Error: ${le.message}`)}finally{Ko(!1)}},Jh=w.useCallback(()=>{if(!d)return null;const le={token_number:d.patient_token_number||"N/A",name:d.name||"N/A",age:d.age||"N/A",gender:d.gender||"N/A",phone:d.phone||"N/A"};return va.length>0?le.complaints_history=va.map(xe=>`${xe.data.complaint} (${new Date(xe.originalDateString).toLocaleDateString()})`).join("; "):le.complaints_history="No past complaints.",$i.length>0?le.pharmacy_orders_history=$i.map(xe=>`Order: ${xe.data.medications.map(Me=>{let tt=`${Me.name}`;return Me.pack_quantity!==void 0&&Me.pack_quantity>0&&(tt+=` Packs: ${Me.pack_quantity}`),Me.loose_quantity!==void 0&&Me.loose_quantity>0&&(tt+=` Loose: ${Me.loose_quantity}`),tt}).join(", ")} (${xe.data.status}, ${new Date(xe.originalDateString).toLocaleDateString()})`).join("; "):le.pharmacy_orders_history="No pharmacy orders.",Pr.length>0?le.lab_orders_history=Pr.map(xe=>{let Me=`Lab Order: ${xe.data.tests.map(tt=>tt.name).join(", ")} (${xe.data.status}, ${new Date(xe.originalDateString).toLocaleDateString()})`;return xe.data.report&&(Me+=` - Report: ${xe.data.report.report_content} (${new Date(xe.data.report.report_date).toLocaleDateString()})`),Me}).join("; "):le.lab_orders_history="No lab history.",le},[d,va,$i,Pr]),Wi=()=>{if(!d){Tr("Patient details are required to use the Live API.");return}Ul(!0)},Wr=()=>{var le;(le=Ar.current)==null||le.click()},sr=le=>{var me;const xe=(me=le.target.files)==null?void 0:me[0];xe&&Ks(xe)};return r.jsxs("div",{className:"edit-complaint-page",style:{height:`${ye}px`},children:[r.jsx(kQ,{ref:Zs,recordId:e,patientId:l,patientDetails:d,caseSummary:N,caseSummaryUpdatedAt:q,clinicSettings:pn,userMessages:o,selectedImageFile:ys,pendingLabOrders:Ba,labReports:De,pastComplaints:qe,pharmacyOrders:_t,pharmacyInventory:Xn,labInventory:_n,setCurrentComplaint:a,setAiResponse:z,setAiResponseText:X,setAiResponseJsonString:te,setShowAiJsonDetails:M,setIsLoadingAi:we,setAiError:Le,setIsSubmittingAiOrder:_r,setAiOrderSubmissionStatus:Zn,setIsSubmittingAiLabOrder:$a,setAiLabOrderSubmissionStatus:zh,setIsSubmittingAiComplaint:Md,setAiComplaintSubmissionStatus:Jc,setIsUpdatingCaseSummary:Hs,setAiCaseSummaryUpdateStatus:Gs,setCaseSummary:k,setCaseSummaryUpdatedAt:H,setIsUpdatingAiMemoryByAI:Rd,setAiMemoryUpdateByAIStatus:fs,setFollowUpQuestion:vs,setFollowUpOptions:tl,setError:oe,setIsSavingAiResponse:nt,setSaveAiResponseError:je,fetchPharmacyOrdersData:eo,fetchPendingLabOrdersData:to,fetchLabReportsData:gi,fetchPastComplaintsData:Hl,fetchPatientDetails:Ha,setClinicSettings:ji,setEditedAiMemory:Xs,handleDeleteItem:Yl}),Bl&&d&&r.jsx(Qk,{onClose:()=>Ul(!1),patientData:Jh(),tokenNumber:d.patient_token_number?String(d.patient_token_number):null,onAiSummaryChange:le=>{le&&(a(le),Dr(le),Ul(!1))}}),r.jsxs("div",{className:"edit-complaint-header",children:[r.jsx("button",{onClick:()=>n(-1),disabled:_i,className:"back-button",title:"Go Back",children:"< Back"}),r.jsx("span",{ref:gt,style:{position:"absolute",visibility:"hidden",height:"auto",width:"auto",whiteSpace:"nowrap"}}),d&&r.jsx("div",{className:"edit-complaint-patient-details",children:d&&!Fl?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{hs(!0),Va(d.name||""),Qo(d.age),$l(d.gender),ps(d.phone),ar(null)},className:"edit-button mr-2",title:"Edit Patient Details",disabled:Er,children:r.jsx(xd,{size:14})}),d.name??"N/A",d.patient_token_number!==null&&d.patient_token_number!==void 0&&` (${d.patient_token_number})`," - ",d.age??"N/A"," / ",d.gender??"N/A",d.phone&&` / ${d.phone}`]}):d&&Fl?r.jsxs("div",{className:"patient-details-edit-form",children:[r.jsx("input",{type:"text",value:Vr,onChange:le=>Va(le.target.value),placeholder:"Name",className:"edit-input",disabled:Er}),r.jsx("input",{type:"number",value:Wo??"",onChange:le=>Qo(le.target.value?parseInt(le.target.value):null),placeholder:"Age",className:"edit-input",disabled:Er}),r.jsxs("select",{value:Jo??"",onChange:le=>$l(le.target.value||null),className:"edit-input",disabled:Er,children:[r.jsx("option",{value:"",children:"Select Gender"}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]}),r.jsx("input",{type:"text",value:zl??"",onChange:le=>ps(le.target.value||null),placeholder:"Phone Number",className:"edit-input",disabled:Er}),r.jsxs("div",{className:"edit-actions",children:[r.jsx("button",{onClick:()=>{hs(!1),ar(null)},className:"button-secondary",disabled:Er,children:"Cancel"}),r.jsx("button",{onClick:Qh,className:"button-primary blue",disabled:Er,children:Er?"Saving...":"Save"})]}),ms&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ms})]}):r.jsxs("div",{className:"edit-complaint-patient-details",children:[p??"N/A"," / ",b??"N/A"]})}),!d&&p!==void 0&&b!==void 0&&r.jsxs("div",{className:"edit-complaint-patient-details",children:[p??"N/A"," / ",b??"N/A"]}),r.jsx("div",{style:{width:"64px"}})]}),r.jsxs("div",{className:"edit-complaint-content-area",ref:ct,children:[r.jsxs("div",{className:"edit-complaint-main-column",style:{flexBasis:`calc(${100-pt}% - 5px)`},children:[ie&&r.jsxs("div",{className:"general-error-message",children:["Error: ",ie]}),Q&&r.jsx("div",{className:"ai-function-status info text-center",children:"Creating record..."}),fe&&r.jsx("div",{className:"loading-animation-container",children:r.jsx("div",{className:"loading-text",children:tu})}),ce&&r.jsx("div",{className:"ai-error-message",children:ce}),ti&&r.jsxs("div",{className:`ai-function-status ${ti.toLowerCase().includes("error:")?"error":ti.toLowerCase().startsWith("order created")||ti.toLowerCase().startsWith("success:")?"success":"info"}`,children:[ma&&r.jsx("span",{className:"animate-spin",role:"status"}),ti]}),us&&r.jsxs("div",{className:`ai-function-status ${us.toLowerCase().includes("error:")?"error":us.toLowerCase().startsWith("success:")||us.toLowerCase().startsWith("lab order created")?"success":"info"}`,children:[zn&&r.jsx("span",{className:"animate-spin",role:"status"}),us]}),ds&&r.jsxs("div",{className:`ai-function-status ${ds.toLowerCase().includes("error:")?"error":"info"}`,children:[Bh&&r.jsx("span",{className:"animate-spin",role:"status"}),ds]}),za&&r.jsxs("div",{className:`ai-function-status ${za.toLowerCase().includes("error:")?"error":"info"}`,children:[Vs&&r.jsx("span",{className:"animate-spin",role:"status"}),za]}),Il&&r.jsxs("div",{className:`ai-function-status ${Il.toLowerCase().includes("error:")?"error":"info"}`,children:[ui&&r.jsx("span",{className:"animate-spin",role:"status"}),Il]}),ut&&r.jsxs("div",{className:"general-error-message",children:["Error saving AI response: ",ut]}),Ne&&r.jsx("div",{className:"ai-function-status info text-center",children:"Saving AI response..."}),(re||P)&&r.jsxs("div",{ref:Se,className:`${P?"ai-function-call-block":"ai-response-container"} group`,children:[re&&r.jsx(_l,{remarkPlugins:[Ro],children:re}),P&&r.jsxs("div",{className:"ai-json-details-container",children:[r.jsxs("button",{onClick:()=>M(!se),className:"ai-json-toggle-button",children:[se?r.jsx(Wx,{size:14,className:"mr-1"}):r.jsx(Yx,{size:14,className:"mr-1"}),se?"Hide":"Show"," AI Function Call Details"]}),se&&r.jsx("pre",{className:"ai-json-pre",children:r.jsx("code",{children:JSON.stringify(JSON.parse(P),null,2)})})]}),r.jsxs("div",{className:"ai-response-actions",children:[r.jsx("button",{onClick:()=>Wh(Y),disabled:!Y,title:"Copy Full AI Response",children:r.jsx(jI,{size:12})}),r.jsx("button",{onClick:Bd,disabled:!Y,title:"Print AI Response",children:r.jsx(Nd,{size:12})})]})]})]}),r.jsx("div",{className:"draggable-divider",onMouseDown:Jl}),r.jsx("div",{className:"edit-complaint-context-column",style:{flexBasis:`calc(${100-pt}% - 5px)`},children:r.jsxs("div",{className:"ai-context-container",children:[r.jsxs("h3",{className:"ai-context-header",children:[r.jsx("span",{children:"AI Context:"}),r.jsx("div",{className:"ai-context-actions-top",children:r.jsxs("button",{onClick:Ud,disabled:!no,title:"Print All Patient Details",className:"context-action-button",children:[r.jsx(Nd,{size:14})," Print"]})}),(d==null?void 0:d.insurance_type)&&r.jsx("div",{className:"insurance-type-container mt-2",children:r.jsxs("select",{ref:at,value:d.insurance_type,onChange:le=>Fd(d.id,le.target.value),className:"insurance-type-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})})]}),r.jsxs("div",{className:"ai-context-section",children:[r.jsx("h4",{className:"ai-context-section-title",children:"Admission Status"}),(d==null?void 0:d.admission_date)&&r.jsxs("p",{className:"ai-context-text",children:[r.jsx("strong",{children:"Admitted:"})," ",new Date(d.admission_date).toLocaleDateString()]}),(d==null?void 0:d.discharge_date)&&r.jsxs("p",{className:"ai-context-text",children:[r.jsx("strong",{children:"Discharged:"})," ",new Date(d.discharge_date).toLocaleDateString()]}),(d==null?void 0:d.current_status)&&r.jsxs("p",{className:"ai-context-text",children:[r.jsx("strong",{children:"Current Status:"})," ",r.jsx("span",{className:"font-semibold",children:d.current_status})]}),r.jsxs("div",{className:"flex space-x-2 mt-2",children:[r.jsx("button",{onClick:Vd,className:`admit-discharge-button ${ya?"discharge":"admit"}`,title:ya?"Discharge Patient":"Admit Patient",disabled:!l||Rl||Go,children:Rl?"Admitting...":Go?"Discharging...":ya?"Discharge":"Admit"}),r.jsx("button",{onClick:()=>Ga("doctor"),className:`queue-status-button ${Qs?"in-queue":"add-to-queue"}`,title:Qs?"Patient is in Doctor Queue":"Add Patient to Doctor Queue",disabled:!l||Ua||Qs,children:Ua?"Adding...":Qs?"In Queue":"Add to Queue"}),r.jsx("button",{onClick:Zl,className:"complete-consultation-button",title:"Mark Consultation as Complete",disabled:Hi,children:Hi?"Completing...":"Complete Consultation"})]})]}),r.jsx(I0,{title:"Pharmacy Order History",headerAction:r.jsx("button",{onClick:Gh,className:"button-primary blue text-xs px-2 py-1",disabled:hn||_t.filter(le=>le.status==="pending").length<2,title:"Merge all pending orders into one",children:hn?"Merging...":"Merge Orders"}),items:$i,isLoading:!1,loadingText:"Loading...",noDataText:"No orders.",renderItemContent:(le,xe)=>r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs("span",{className:"ai-context-text flex items-center",children:[" ",$i.length-xe,". Order Status: (",le.data.status,")",r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",new Date(le.originalDateString).toLocaleDateString(),")"]}),r.jsxs("div",{className:"inline-flex space-x-2 ml-2",children:[" ",r.jsx("button",{onClick:()=>qh(le.data.id),className:"icon-button small",title:"Edit Pharmacy Order",children:r.jsx(xd,{size:12})}),le.data.prescriptionForUnavailableDrugs&&r.jsx("button",{onClick:()=>ao(le.data.prescriptionForUnavailableDrugs,"Unavailable Drugs Prescription"),className:"icon-button small",title:"Print Unavailable Drugs Prescription",children:r.jsx(Nd,{size:12})}),r.jsx("button",{onClick:()=>Yl({type:"Pharmacy Order",data:le.data}),className:"icon-button small text-red-500",title:"Delete Pharmacy Order",children:r.jsx(Sr,{size:12})}),le.data.status==="pending"&&r.jsx("button",{onClick:()=>$d(le.data.id),className:"icon-button small",title:"Bill this pharmacy order",disabled:Ho,children:r.jsx(wd,{size:12})}),le.data.status==="billed"&&r.jsx("button",{onClick:()=>Yr(le.data.id,"dispensed"),className:"icon-button small",title:"Dispense this pharmacy order",disabled:Ho,children:r.jsx(ls,{size:12})})]})]}),r.jsx("div",{className:"pharmacy-order-drugs-table-container mt-2",children:r.jsxs("table",{className:"pharmacy-order-drugs-table w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-1 px-2 text-left",children:"Drug Name"}),r.jsx("th",{className:"py-1 px-2 text-left",children:"Quantity"}),r.jsx("th",{className:"py-1 px-2 text-left",children:"Dosage"}),r.jsx("th",{className:"py-1 px-2 text-left",children:"Directions"})]})}),r.jsx("tbody",{children:le.data.medications.map((me,Me)=>r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 px-2",children:r.jsx("strong",{children:me.name})}),r.jsxs("td",{className:"py-1 px-2",children:[me.pack_quantity!==void 0&&me.pack_quantity>0&&`Packs: ${me.pack_quantity}`,me.pack_quantity!==void 0&&me.pack_quantity>0&&me.loose_quantity!==void 0&&me.loose_quantity>0&&", ",me.loose_quantity!==void 0&&me.loose_quantity>0&&`Loose: ${me.loose_quantity}`]}),r.jsx("td",{className:"py-1 px-2",children:me.tabletsPerDay&&me.numberOfDays?`${me.tabletsPerDay} tab/day for ${me.numberOfDays} days`:"N/A"}),r.jsx("td",{className:"py-1 px-2",children:me.directions_to_use||"N/A"})]},me.drug_id||me.name||Me))})]})}),le.data.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[r.jsx("span",{className:"font-semibold",children:"Prescription:"})," ",le.data.prescriptionForUnavailableDrugs]})]})}),r.jsx(I0,{title:"Lab History (Orders & Reports)",headerAction:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:qd,className:"button-primary blue text-xs px-2 py-1",title:"Tell AI to analyse the reports",disabled:_i,children:"Analyse Reports"}),r.jsxs("button",{onClick:()=>Ld(!0),className:"button-primary green text-xs px-2 py-1",title:"Manually create a new lab order",disabled:!l,children:[r.jsx(Ph,{size:12,className:"mr-1"})," Create Lab Order"]})]}),items:Pr,onSaveLabOrder:Hh,onCancelEditLabOrder:nu,onLabOrderTestChange:On,onLabOrderStatusChange:ba,onBillLabOrder:iu,labInventory:_n,isSavingLabOrder:Ho,isLoading:Ys||it,loadingText:"Loading...",noDataText:"No lab Hx.",expandedLabReports:ga,toggleLabReport:lu,renderItemContent:(le,xe)=>{const me=WW(le.data.report?le.data.report.status:le.data.status);return r.jsxs("div",{className:"ai-context-text",children:[le.data.serialNumber,". ",r.jsx("span",{className:"font-medium",children:"[Order]"})," ",le.data.tests&&le.data.tests.length>0?le.data.tests.map(Me=>r.jsxs("strong",{children:[Me.name," (",Me.price,")"]},Me.id||Me.name)).reduce((Me,tt)=>[Me,", ",tt]):r.jsx("span",{className:"italic text-gray-500",children:"No tests specified"})," ",le.data.tests&&le.data.tests.length>0&&r.jsxs("span",{className:"font-bold ml-2",children:["Total: ",le.data.tests.reduce((Me,tt)=>Me+(Number(tt.price)||0),0).toFixed(2)]}),"(",r.jsx("span",{className:me.className,children:me.text}),")",r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",new Date(le.originalDateString).toLocaleDateString(),")"]}),r.jsxs("div",{className:"inline-flex space-x-2 ml-2",children:[r.jsx("button",{onClick:()=>Vh(le.data),className:"icon-button small",title:"Enter/Edit Report",children:r.jsx($o,{size:12})}),r.jsx("button",{onClick:()=>ru(le.data),className:"icon-button small",title:"View Full Report",children:r.jsx(X_,{size:12})}),r.jsx("button",{onClick:()=>Gl(le.data.id),className:"icon-button small",title:"Edit Order Details",children:r.jsx(xd,{size:12})}),r.jsx("button",{onClick:()=>Yl({type:"Lab Order",data:le.data}),className:"icon-button small text-red-500",title:"Delete Lab Order",children:r.jsx(Sr,{size:12})})]}),le.data.report&&r.jsxs("div",{className:"ml-4 mt-1 p-2 border-l-2 border-gray-200",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium",children:"[Report]"}),r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",new Date(le.data.report.report_date).toLocaleDateString(),")"]}),r.jsx("button",{onClick:()=>lu(le.data.report.reportId),className:"text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-100 focus:outline-none focus:ring-1 focus:ring-blue-400",title:ga[le.data.report.reportId]?"Collapse Report":"Expand Report",children:ga[le.data.report.reportId]?r.jsx(Wx,{size:14}):r.jsx(Yx,{size:14})})]}),ga[le.data.report.reportId]&&(()=>{try{const Me=JSON.parse(le.data.report.report_content||"{}");return typeof Me=="object"&&Me!==null&&le.data.report.tests?le.data.report.tests.map(tt=>r.jsxs("div",{style:{marginBottom:"10px"},children:[r.jsx("h5",{className:"font-semibold text-sm mt-2 mb-1",children:tt.name}),Me[tt.id]?r.jsxs("table",{className:"lab-inventory-table w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-1 px-2",children:"Parameter"}),r.jsx("th",{className:"py-1 px-2",children:"Value"}),r.jsx("th",{className:"py-1 px-2",children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(Me[tt.id]).map(([ue,Re])=>{var lt;const Ce=(lt=tt.default_parameters)==null?void 0:lt.find(yt=>yt.name===ue);return r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 px-2",children:ue}),r.jsxs("td",{className:"py-1 px-2",children:[String(Re)," ",(Ce==null?void 0:Ce.unit)||""]}),r.jsx("td",{className:"py-1 px-2",children:(()=>{if(Ce&&Ce.type==="number"&&(Ce.lower_limit!=null||Ce.upper_limit!=null)){let yt="";return Ce.lower_limit!=null&&(yt+=` > ${Ce.lower_limit}`),Ce.lower_limit!=null&&Ce.upper_limit!=null&&(yt+=" - "),Ce.upper_limit!=null&&(yt+=` < ${Ce.upper_limit}`),yt.trim()||"N/A"}else if((Ce==null?void 0:Ce.type)==="boolean")return"N/A";return(Ce==null?void 0:Ce.normal_range)||"N/A"})()})]},ue)})})]}):r.jsx("p",{className:"italic text-gray-500 text-xs",children:"No parameters reported for this test."})]},tt.id)):r.jsx(_l,{remarkPlugins:[Ro],children:le.data.report.report_content})}catch{return r.jsx(_l,{remarkPlugins:[Ro],children:le.data.report.report_content||"*No findings recorded.*"})}})()]})]})}}),r.jsx(wQ,{isOpen:Xc,onClose:()=>Ld(!1),patientId:l,labInventory:_n,fetchPendingLabOrdersData:to}),r.jsx(I0,{title:"Complaints History",items:va,isLoading:ze,loadingText:"Loading...",noDataText:"No past Hx.",renderItemContent:(le,xe)=>r.jsxs("span",{className:"ai-context-text",children:[le.data.complaint,r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",new Date(le.originalDateString).toLocaleDateString(),")"]})]}),onDeleteItem:Yl}),r.jsxs("div",{className:"ai-context-section",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h4",{className:"ai-context-section-title",children:[r.jsx(ng,{size:16,className:"text-purple-600"})," Clinic-wide System Prompt"]}),!Gr&&r.jsx("button",{onClick:io,className:"edit-button",title:"Edit System Prompt",disabled:ql||An||bs,children:r.jsx(xd,{size:14})})]}),Gr&&pn?r.jsxs("div",{className:"mt-2",children:[r.jsx("textarea",{value:xa,onChange:le=>Zo(le.target.value),className:"context-edit-textarea",placeholder:"Enter clinic system prompt...",disabled:An||bs}),r.jsxs("div",{className:"context-edit-actions",children:[r.jsx("button",{onClick:ro,disabled:An||bs,className:"button-secondary",children:"Cancel"}),r.jsxs("button",{onClick:Kl,disabled:An||bs||Hr===pn.aiMemory&&xa===pn.clinicWideSystemPrompt,className:"button-primary purple",children:[r.jsx(jd,{size:14,className:"mr-1"}),bs||An?"Saving...":"Save Settings"]})]})]}):r.jsx("div",{className:"ai-context-text whitespace-pre-wrap mt-1 prose prose-sm max-w-none",children:pn!=null&&pn.clinicWideSystemPrompt?r.jsx(_l,{remarkPlugins:[Ro],children:pn.clinicWideSystemPrompt}):r.jsx("span",{className:"italic text-gray-400",children:"N/A - Click edit to add."})}),!Gr&&(pn==null?void 0:pn.clinicWideSystemPromptUpdatedAt)&&r.jsxs("p",{className:"ai-context-text text-gray-400 mt-1",style:{fontSize:"0.625rem"},children:["Prompt Last Updated: ",new Date(pn.clinicWideSystemPromptUpdatedAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"ai-context-section",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h4",{className:"ai-context-section-title",children:"Case Summary"}),!E&&r.jsx("button",{onClick:Yh,className:"edit-button",title:"Edit Case Summary",disabled:F||U,children:r.jsx(xd,{size:14})})]}),E?r.jsxs("div",{className:"mt-2",children:[r.jsx("textarea",{value:I,onChange:le=>D(le.target.value),className:"context-edit-textarea",rows:4,placeholder:"Enter case summary...",disabled:U}),$&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:$}),r.jsxs("div",{className:"context-edit-actions",children:[r.jsx("button",{onClick:zd,disabled:U,className:"button-secondary",children:"Cancel"}),r.jsx("button",{onClick:Yi,disabled:U||I===N,className:"button-primary blue",children:U?"Saving...":"Save"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"ai-context-text whitespace-pre-wrap mt-1 prose prose-sm max-w-none",children:N?r.jsx(_l,{remarkPlugins:[Ro],components:{},children:N}):r.jsx("span",{className:"italic text-gray-400",children:"N/A - Click edit to add."})}),q&&r.jsxs("p",{className:"ai-context-text text-gray-400 mt-1",style:{fontSize:"0.625rem"},children:["Last Edited: ",new Date(q).toLocaleDateString()]})]})]}),va.length===0&&Pr.length===0&&$i.length===0&&!(ze||Ys||it)&&r.jsx("p",{className:"ai-context-text italic mt-4",children:"No recent history for this patient."}),qo&&r.jsx("p",{className:"text-yellow-600 text-xs mt-2 ai-context-text",children:"Deleting..."}),Vo&&r.jsx("p",{className:"text-red-600 text-xs mt-2 ai-context-text",children:Vo})]})})]}),r.jsxs("div",{className:"edit-complaint-input-area",children:[r.jsxs("div",{className:"status-messages-container",children:[rt&&r.jsx("p",{className:"text-center text-red-500 text-xs mb-1",children:rt}),ze&&r.jsx("div",{className:"loading-animation-container",children:r.jsx("div",{className:"loading-text",children:"Loading past complaints..."})}),G&&r.jsx("p",{className:"text-center text-red-500 text-xs mb-1",children:G}),Ys&&r.jsx("div",{className:"loading-animation-container",children:r.jsx("div",{className:"loading-text",children:"Loading pending lab orders..."})}),Od&&r.jsx("p",{className:"text-center text-red-500 text-xs mb-1",children:Od}),un&&r.jsx("div",{className:"loading-animation-container",children:r.jsx("div",{className:"loading-text",children:"Loading inventory..."})}),Vi&&r.jsx("p",{className:"text-center text-red-500 text-xs mb-1",children:Vi}),F&&r.jsx("div",{className:"loading-animation-container",children:r.jsx("div",{className:"loading-text",children:"Loading..."})})]}),e&&!Q&&r.jsxs(w.Fragment,{children:[Wl&&r.jsxs("div",{className:"follow-up-question-container",children:[r.jsx("p",{className:"question-text",children:Wl}),au.length>0&&r.jsx("div",{className:"options-grid",children:au.map((le,xe)=>r.jsx("button",{onClick:()=>ou(le),className:"option-button",children:le},xe))})]}),Js&&r.jsx("div",{className:"speech-error-display",children:Js}),ys&&r.jsxs("div",{className:"selected-file-display",children:[r.jsxs("span",{children:["Selected: ",ys.name]}),r.jsx("button",{onClick:()=>{Ks(null),Ar.current&&(Ar.current.value="")},className:"remove-file-button",title:"Remove image",children:""})]}),r.jsx("div",{className:"input-wrapper",children:r.jsxs("div",{className:"main-input-container",children:[r.jsx("input",{type:"file",ref:Ar,onChange:sr,accept:"image/*",className:"hidden"}),r.jsx("textarea",{ref:Ee,className:"complaint-textarea",value:i,onChange:le=>a(le.target.value),onKeyDown:Xl,placeholder:"name,age,sex,phone,complaints,reports,history",disabled:_i||!e||gs}),r.jsxs("div",{className:"chat-input-actions-container",children:[l&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>n(`/patient/${l}/lab-reports`),disabled:it||!l,className:"icon-button",title:"View Lab Reports",children:r.jsx($o,{size:14})}),r.jsx("button",{onClick:()=>n("/inventory"),disabled:un,className:"icon-button",title:"View Inventory",children:r.jsx(wh,{size:14})})]}),r.jsx("button",{type:"button",onClick:Wr,disabled:_i||!e||gs,className:"icon-button",title:"Attach Image",children:r.jsx(eM,{size:14})}),r.jsx("button",{type:"button",onClick:Wi,disabled:_i||!e||!Xo.current,className:`mic-button ${gs?"listening":""}`,title:gs?"Stop":"Mic",children:r.jsx(e2,{size:14})}),r.jsx("button",{onClick:()=>Dr(),disabled:_i||un||Q||!i.trim()||!e||gs,className:"send-button",title:_i||un||Q?"Processing...":"Save & Ask AI",children:_i?r.jsx("span",{className:"animate-spin",role:"status","aria-label":"loading"}):r.jsx(J0,{size:14})})]})]})})]})]})]})},Ste=()=>{const{patientId:e}=qr(),n=Nt(),[t,i]=w.useState([]),[a,o]=w.useState(null),[l,f]=w.useState(!1),[d,u]=w.useState(null);w.useEffect(()=>{(async()=>{if(!e){u("Patient ID not provided.");return}f(!0),u(null);try{const b=await pe(`/api/patients/${e}`);if(!b.ok)throw new Error(`Failed to fetch patient details: ${b.status}`);const v=await b.json();o({name:v.name,age:v.age,gender:v.gender});const N=await pe(`/api/patients/${e}/complaints`);if(N.ok){const E=(await N.json()).sort((T,I)=>new Date(I.createdAt).getTime()-new Date(T.createdAt).getTime());i(E)}else if(N.status===404)i([]);else throw new Error(`Failed to fetch complaints: ${N.status}`)}catch(b){console.error("Error fetching past complaints or patient info:",b),u(`Failed to load data. ${b.message}`),i([]),o(null)}finally{f(!1)}})()},[e]);const p=g=>{navigator.clipboard.writeText(g).then(()=>console.log("Complaint copied to clipboard")).catch(b=>console.error("Failed to copy complaint: ",b))};return r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>n(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),r.jsx("div",{className:"w-16"})," "]}),a&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",r.jsx("strong",{children:a.name})," (",a.age??"N/A"," / ",a.gender??"N/A",")"]}),d&&r.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",d]}),l&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!l&&t.length===0&&!d&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!l&&t.length>0&&r.jsx("div",{className:"space-y-4",children:t.map(g=>r.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(g.createdAt).toLocaleString()}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:g.complaint}),r.jsx("button",{onClick:()=>p(g.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:""})]},g.id))})]})},Ax=500,C_="defaultConsultationFee",Nte=({patientId:e,billId:n,queueId:t,onBillCreated:i,onBillUpdated:a,initialItems:o=[],billType:l="other",relatedId:f,initialStatus:d="pending",initialDiscountPercentage:u=0,readOnlyMode:p=!1,doctorId:g,labOrderId:b,patientInsuranceType:v})=>{const[N,k]=w.useState(null),[E,T]=w.useState([]),I=w.useRef([]),[D,U]=w.useState(""),[O,$]=w.useState(""),[B,q]=w.useState(1),[H,F]=w.useState(u),[L,Q]=w.useState("cash"),[ne,ie]=w.useState(!1),[oe,Y]=w.useState(null),[z,re]=w.useState(!1),[X,P]=w.useState(!1),[te,se]=w.useState(!1),[M,fe]=w.useState(null),[,we]=w.useState([]),[ce,Le]=w.useState(null),[Ne,nt]=w.useState(""),[ut,je]=w.useState("cash"),[ye,Ae]=w.useState(!1),[De,Ve]=w.useState(Ax),[it,Ke]=w.useState(Ax.toString()),rt=n?"view_pay":"create";w.useEffect(()=>{const Ue=localStorage.getItem(C_),Ze=Ue?parseFloat(Ue):Ax;isNaN(Ze)||(Ve(Ze),Ke(Ze.toString()))},[]);const Ft=o.length===0;w.useEffect(()=>{e?(async()=>{ie(!0),Y(null);try{const Ze=await pe(`/api/patients/${e}`);if(!Ze.ok){const ct=await Ze.json().catch(()=>({}));throw new Error(ct.message||"Failed to fetch patient details")}const Fe=await Ze.json();k(Fe)}catch(Ze){Y(`Failed to load patient details: ${Ze.message}`),k(null)}finally{ie(!1)}})():k(null)},[e]),w.useEffect(()=>{n?(async()=>{se(!0),Y(null),fe(null),we([]),Le(null);try{const Ze=await pe(`/api/bills/${n}`);if(!Ze.ok){const ct=await Ze.json().catch(()=>({}));throw new Error(ct.message||"Failed to fetch bill details")}const Fe=await Ze.json();if(!Fe.bill||!Fe.payments||!Fe.calculated)throw new Error("Invalid bill details structure.");fe(Fe.bill),we(Fe.payments),Le(Fe.calculated),F(Fe.bill.discount_percentage!==void 0&&Fe.bill.discount_percentage!==null?parseFloat(Fe.bill.discount_percentage.toString()):0),!N&&Fe.bill.patient_id&&_t(Fe.bill.patient_id.toString())}catch(Ze){Y(`Failed to load bill details: ${Ze.message}`),fe(null),we([]),Le(null)}finally{se(!1)}})():(fe(null),we([]),Le(null))},[n]);const _t=async Ue=>{ie(!0);try{const Ze=await pe(`/api/patients/${Ue}`);if(!Ze.ok)throw new Error("Failed to fetch patient");const Fe=await Ze.json();k(Fe)}catch(Ze){console.error("Error fetching patient details:",Ze),k(null)}finally{ie(!1)}},ve=w.useCallback(async Ue=>{P(!0),Y(null);const Ze=Ue.filter(Fe=>Fe.drug_id!=null).map(async Fe=>{try{const ct=await pe(`/api/drugs/${Fe.drug_id}`);if(!ct.ok)throw new Error(`Drug ${Fe.drug_id} not found.`);const Xe=await ct.json();return{...Fe,price:Xe.price,total:Xe.price*Fe.quantity}}catch{return Y(Xe=>`${Xe?Xe+"; ":""}Failed to fetch price for ${Fe.name}`),Fe}});try{const Fe=await Promise.all(Ze);T(ct=>{const Xe=new Map(Fe.map(vt=>[vt.id,vt]));return ct.map(vt=>Xe.get(vt.id)||vt)})}catch{}finally{P(!1)}},[pe]);w.useEffect(()=>{if(n){T([]),I.current=[];return}JSON.stringify(o)===JSON.stringify(I.current)||(async()=>{let Fe=[];if(o&&o.length>0)Fe=o.map((ct,Xe)=>({...ct,id:`initial-${Xe}-${Date.now()}`})),Q(d==="paid"?"cash":v==="no_cash_insurance"?"no_cash_insurance":"cash"),F(u),l==="pharmacy"&&!p&&await ve(Fe);else if(e&&Ft&&l==="consultation"){let ct=De;if(g)try{const Xe=await pe(`/api/staff/${g}`);if(!Xe.ok){const Xn=await Xe.json().catch(()=>({}));throw new Error(Xn.message||"Doctor not found or error fetching fee")}const vt=await Xe.json();vt.opd_fee!=null&&!isNaN(parseFloat(String(vt.opd_fee)))&&parseFloat(String(vt.opd_fee))>=0&&(ct=parseFloat(String(vt.opd_fee)))}catch(Xe){Y(vt=>`${vt?vt+"; ":""}Could not fetch doctor's fee, using default. (${Xe.message})`)}Fe=[{id:Date.now(),name:"Consultation Fee",price:ct,quantity:1,total:ct*1,drug_id:null}],Q(v==="no_cash_insurance"?"no_cash_insurance":"cash")}else Fe=[],Q(v==="no_cash_insurance"?"no_cash_insurance":"cash");T(Fe),I.current=o})()},[n,e,g,o,l,De,Ft,d,p,ve,u,v]);const qe=()=>{const Ue=parseFloat(O);if(!p)if(D&&!isNaN(Ue)&&Ue>=0&&B>0){if(D.trim().toLowerCase()==="consultation fee"&&E.some(Fe=>Fe.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const Ze={id:Date.now(),name:D.trim(),price:Ue,quantity:B,total:Ue*B,drug_id:null};T([...E,Ze]),U(""),$(""),q(1)}else alert("Invalid item details.")},We=Ue=>{p||T(E.filter(Ze=>Ze.id!==Ue))},ze=w.useMemo(()=>{let Ue=E.reduce((Ze,Fe)=>Ze+Fe.total,0);return rt==="create"&&H>0&&(Ue=Ue*(1-H/100)),(ce==null?void 0:ce.totalDue)!==void 0&&(ce==null?void 0:ce.totalDue)!==null?ce.totalDue:Ue},[E,ce,H,rt]),J=w.useMemo(()=>(ce==null?void 0:ce.totalPaid)??0,[ce]),G=w.useMemo(()=>(ce==null?void 0:ce.balance)!==void 0&&(ce==null?void 0:ce.balance)!==null?ce.balance:ze-J,[ce,ze,J]),K=()=>{const Ue=parseFloat(it);!isNaN(Ue)&&Ue>=0?(Ve(Ue),localStorage.setItem(C_,Ue.toString()),alert(`Default Fee set to ${Ue.toFixed(2)}`)):alert("Invalid fee amount.")},Se=async(Ue,Ze)=>{re(!0),Y(null);try{const Fe=await pe("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Ze,billId:Ue})}),ct=await Fe.json();if(!Fe.ok||!ct.order)throw new Error(ct.message||"Failed to create Razorpay order.");const{key_id:Xe,order:vt}=ct,Xn={key:Xe,amount:vt.amount,currency:vt.currency,name:"Newtons OPD Zero Clinic",description:`Bill Payment for Patient ID: ${e}`,order_id:vt.id,handler:async function($n){try{const _n=await pe("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:$n.razorpay_payment_id,razorpay_order_id:$n.razorpay_order_id,razorpay_signature:$n.razorpay_signature,billId:Ue})}),yn=await _n.json();if(_n.ok&&yn.success)alert("Payment Successful!"),i&&i(Ue),a&&a(),setTimeout(()=>window.print(),200);else throw new Error(yn.message||"Payment verification failed.")}catch(_n){Y(`Payment verification failed: ${_n.message}. Contact support.`)}finally{re(!1)}},prefill:{name:(N==null?void 0:N.name)||""},notes:{bill_id:Ue,patient_id:e},theme:{color:"#3399cc"},modal:{ondismiss:function(){Y("Payment cancelled."),re(!1)}}};if(window.Razorpay)new window.Razorpay(Xn).open();else throw new Error("Razorpay SDK not loaded.")}catch(Fe){Y(`Failed to initiate online payment: ${Fe.message}`),re(!1)}},Ee=async()=>{if(!n){Y("Bill ID is missing.");return}if(!Ne||isNaN(parseFloat(Ne))||parseFloat(Ne)<=0){Y("Please enter a valid positive payment amount.");return}Ae(!0),Y(null);const Ue={amount_paid:parseFloat(Ne),payment_mode:ut};try{const Ze=await pe(`/api/bills/${n}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ue)}),Fe=await Ze.json();if(!Ze.ok)throw new Error(Fe.message||`Failed to record payment (Status: ${Ze.status})`);alert(`Payment of ${Ue.amount_paid.toFixed(2)} recorded.`),nt(""),a?a():console.log("Payment recorded.")}catch(Ze){Y(`Failed to record payment: ${Ze.message}`)}finally{Ae(!1)}},Be=async()=>{if(rt==="view_pay")return;if(!e){Y("Patient ID is missing for creating a bill.");return}if(E.length===0){Y("Cannot finalize an empty bill.");return}re(!0),Y(null);const Ue=ze,Ze=E.map(({id:Fe,...ct})=>ct);if(L==="online"){const Fe={patientId:e,queueId:t||null,items:Ze,amount:Ue,paymentMode:"online",type:l,related_id:f||b||null,status:"pending",discountPercentage:H,labOrderId:b||null};try{const ct=await pe("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)}),Xe=await ct.json();if(!ct.ok)throw new Error(Xe.message||"Failed to create pending bill.");Se(Xe.id,Math.round(Ue*100))}catch(ct){Y(`Failed to create pending bill: ${ct.message}`),re(!1)}}else{const Fe="paid";if(!L){Y("Payment mode required."),re(!1);return}const ct={patientId:e,queueId:t||null,items:Ze,amount:Ue,paymentMode:L,type:l,related_id:f||b||null,status:Fe,discountPercentage:H,labOrderId:b||null};setTimeout(()=>window.print(),200);try{const Xe=await pe("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ct)}),vt=await Xe.json();if(!Xe.ok)throw new Error(vt.message||"Failed to create bill.");alert("Bill marked as paid!"),i&&i(vt.id),re(!1)}catch(Xe){Y(`Failed to process bill: ${Xe.message}`),re(!1)}}},at=(M==null?void 0:M.type)??l,gt=(M==null?void 0:M.status)??d,pt=rt==="view_pay"&&M&&gt==="pending";return!e&&!n?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):ne||rt==="view_pay"&&te?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):rt==="view_pay"&&!M&&!te&&oe?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",oe]}):rt==="create"&&!N&&!ne&&oe?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",oe]}):r.jsxs("div",{className:"billing-component-container printable-section",children:[r.jsxs("div",{className:"billing-header",children:[r.jsx("h2",{children:rt==="create"?"Create Bill":"Bill Details"}),rt==="create"&&l==="consultation"&&!p&&r.jsxs("div",{className:"default-fee-section",children:[r.jsx("label",{htmlFor:"defaultFee",className:"whitespace-nowrap",children:"Default Fee:"}),r.jsx("input",{id:"defaultFee",type:"number",value:it,onChange:Ue=>Ke(Ue.target.value),className:"",placeholder:Ax.toString(),disabled:p}),r.jsx("button",{onClick:K,title:"Set Default Fee",className:"",disabled:p,children:r.jsx(jd,{size:16})})]})]}),oe&&!te&&!ye&&r.jsxs("div",{className:"error-message",role:"alert",children:[r.jsx("strong",{children:"Error: "}),oe]}),N&&r.jsxs("div",{className:"patient-details-section",children:[r.jsx("h3",{children:"Patient Details"}),r.jsxs("p",{children:[r.jsx("strong",{children:"ID:"})," ",N.id]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",N.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Age:"})," ",N.age||"N/A",", ",r.jsx("strong",{children:"Gender:"})," ",N.gender||"N/A"]})]}),r.jsxs("div",{className:"bill-items-summary-section",children:[r.jsxs("div",{className:"bill-items-header",children:[r.jsx("h3",{children:rt==="create"?"Bill Items":"Billing Summary"}),rt==="create"&&l==="pharmacy"&&!p&&E.some(Ue=>Ue.drug_id!=null)&&r.jsxs("button",{onClick:()=>ve(E),disabled:X,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[r.jsx(Z0,{size:14,className:`lucide ${X?"animate-spin":""}`}),X?"Refreshing...":"Refresh"]})]}),rt==="view_pay"&&M&&r.jsxs("div",{className:"bill-info-bar",children:[r.jsxs("span",{children:["Bill ID: ",r.jsx("strong",{children:M.id})]}),r.jsxs("span",{children:["Type: ",r.jsx("strong",{className:"capitalize",children:at})]}),r.jsxs("span",{children:["Status: ",r.jsx("strong",{className:`capitalize ${gt==="paid"?"status-paid":"status-pending"}`,children:gt})]})]}),(rt==="create"||rt==="view_pay"&&M)&&r.jsxs("div",{className:"bill-items-list",children:[rt==="create"&&X&&E.length>0&&r.jsx("div",{className:"loading-placeholder",children:"Updating prices..."}),rt==="create"&&!X&&E.map((Ue,Ze)=>r.jsxs("div",{className:"bill-item",children:[r.jsxs("div",{className:"bill-item-details",children:[r.jsxs("span",{children:[Ze+1,". ",Ue.name]}),Ue.quantity>1&&r.jsxs("span",{className:"bill-item-quantity",children:["(Qty: ",Ue.quantity,")"]})]}),r.jsxs("div",{className:"bill-item-price-actions",children:[r.jsxs("span",{className:"bill-item-price",children:["",Ue.total.toFixed(2)]}),rt==="create"&&typeof Ue.id=="number"&&!p&&r.jsxs("button",{onClick:()=>We(Ue.id),className:"remove-item-button",title:"Remove",children:[" ",r.jsx(ci,{size:16})," "]}),(typeof Ue.id!="number"||p||Ue.name==="Consultation Fee")&&r.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",r.jsx(MS,{size:14})," "]})]})]},Ue.id)),rt==="view_pay"&&M&&M.items.map((Ue,Ze)=>r.jsxs("div",{className:"bill-item",children:[r.jsxs("div",{className:"bill-item-details",children:[r.jsxs("span",{children:[Ze+1,". ",Ue.name]}),Ue.quantity>1&&r.jsxs("span",{className:"bill-item-quantity",children:["(Qty: ",Ue.quantity,")"]})]}),r.jsxs("div",{className:"bill-item-price-actions",children:[r.jsxs("span",{className:"bill-item-price",children:["",(Ue.total??Ue.price*Ue.quantity).toFixed(2)]}),r.jsxs("span",{className:"lock-icon",title:"Cannot remove from existing bill",children:[" ",r.jsx(MS,{size:14})," "]})]})]},Ze)),rt==="create"&&E.length===0&&r.jsx("p",{className:"empty-items-message",children:"No items added."}),rt==="view_pay"&&M&&M.items.length===0&&r.jsx("p",{className:"empty-items-message",children:"No items in bill."})]}),rt==="create"&&!p&&r.jsxs("div",{className:"add-item-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Item"}),r.jsx("input",{type:"text",value:D,onChange:Ue=>U(Ue.target.value),placeholder:"Service/Item",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{flexGrow:.5,minWidth:"80px"},children:[r.jsx("label",{children:"Qty"}),r.jsx("input",{type:"number",min:"1",value:B,onChange:Ue=>q(parseInt(Ue.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{flexGrow:.7,minWidth:"100px"},children:[r.jsx("label",{children:"Price ()"}),r.jsx("input",{type:"number",value:O,onChange:Ue=>$(Ue.target.value),placeholder:"0.00",className:"custom-text-input"})]}),r.jsx("button",{onClick:qe,className:"add-item-button",children:"Add"})]})]})," ",r.jsxs("div",{className:"billing-footer",children:[r.jsxs("div",{className:"total-amount-section",children:[r.jsx("span",{className:"total-amount-label",children:"Total Amount:"}),r.jsxs("span",{className:"total-amount-value",children:["",typeof ze=="number"?ze.toFixed(2):"0.00"]}),rt==="create"&&!p&&r.jsxs("div",{className:"discount-section",children:[r.jsx("label",{htmlFor:"discountPercentage",className:"whitespace-nowrap",children:"Discount (%):"}),r.jsx("input",{id:"discountPercentage",type:"number",min:"0",max:"100",step:"0.01",value:H,onChange:Ue=>F(parseFloat(Ue.target.value)||0),className:"",disabled:p||z})]}),rt==="view_pay"&&M&&(M.status==="pending"||M.status==="paid")&&r.jsxs("div",{className:"discount-section",children:[r.jsx("label",{className:"whitespace-nowrap",children:"Discount (%):"}),r.jsxs("span",{className:"discount-value",children:[H.toFixed(2),"%"]})]})]}),rt==="view_pay"&&ce&&r.jsxs("div",{className:"total-amount-section",children:[r.jsx("span",{className:"total-amount-label",children:"Amount Paid:"}),r.jsxs("span",{className:"total-amount-value",children:["",J.toFixed(2)]})]}),rt==="view_pay"&&ce&&r.jsxs("div",{className:"total-amount-section",children:[r.jsx("span",{className:"total-amount-label",children:"Balance Due:"}),r.jsxs("span",{className:"total-amount-value",children:["",G.toFixed(2)]})]}),r.jsxs("div",{className:"footer-actions",children:[rt==="create"&&!p&&r.jsxs("div",{className:"action-group",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Payment Mode"}),r.jsxs("select",{value:L,onChange:Ue=>Q(Ue.target.value),className:"custom-select-input",disabled:p||z,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Pay Online (Razorpay)"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsx("button",{onClick:Be,disabled:z||E.length===0||p,className:"finalize-button",children:z?"Processing...":"Finalize Bill"})]}),rt==="view_pay"&&pt&&!p&&r.jsxs("div",{className:"action-group",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Record Payment Amount ()"}),r.jsx("input",{type:"number",value:Ne,onChange:Ue=>nt(Ue.target.value),placeholder:`Max: ${G.toFixed(2)}`,className:"custom-text-input",disabled:ye})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Payment Mode"}),r.jsxs("select",{value:ut,onChange:Ue=>je(Ue.target.value),className:"custom-select-input",disabled:ye,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})]}),r.jsx("button",{onClick:Ee,disabled:ye||!Ne||parseFloat(Ne)<=0||parseFloat(Ne)>G,className:"record-payment-button",children:ye?"Recording...":"Record Payment"})]}),rt==="create"&&p&&E.length>0&&r.jsx("div",{className:"status-message read-only",children:"Read-only."}),rt==="view_pay"&&gt==="paid"&&r.jsx("div",{className:"status-message paid",children:"PAID."}),rt==="view_pay"&&gt==="cancelled"&&r.jsx("div",{className:"status-message cancelled",children:"CANCELLED."})]})]})]})},Cte=()=>{const e=Nt(),n=nr(),{patientId:t,queueId:i,patientName:a,initialItems:o,billType:l,relatedId:f,initialStatus:d,initialDiscountPercentage:u,doctorId:p,billId:g,labOrderId:b}=n.state||{},[v,N]=w.useState(null),[k,E]=w.useState(null),[T,I]=w.useState(null),[D,U]=w.useState(null),[O,$]=w.useState(null),[B,q]=w.useState(null),[H,F]=w.useState(null),[L,Q]=w.useState(null),[ne,ie]=w.useState(!0),[oe,Y]=w.useState(null),[z,re]=w.useState(a||"");w.useEffect(()=>{if(!t){console.error("BillingPage loaded without required patientId in location state."),e("/");return}(async()=>{ie(!0),Y(null);try{let fe=t,we=o||null,ce=d||null,Le=l||null,Ne=f||null,nt=u!==void 0?parseFloat(u):null,ut=a||null,je=null;if(g){console.log(`Fetching details for Bill ID: ${g}`);const ye=await pe(`/api/bills/${g}`);if(!ye.ok){const De=await ye.json().catch(()=>({message:`Failed to fetch bill details for ID ${g}`}));throw new Error(De.message||`Failed to fetch bill details (Status: ${ye.status})`)}const Ae=await ye.json();if(console.log("Fetched Bill Data:",Ae),we=Ae.bill.items||[],ce=Ae.bill.status||"pending",Le=Ae.bill.type||null,Ne=Ae.bill.related_id||null,nt=Ae.bill.discount_percentage!==void 0&&Ae.bill.discount_percentage!==null?parseFloat(Ae.bill.discount_percentage):0,fe=Ae.bill.patient_id,U(we),$(ce),q(Le),F(Ne),Q(nt),fe){const De=await pe(`/api/patients/${fe}`);if(De.ok){const Ve=await De.json();ut=Ve.name,je=Ve.phone??null,I(Ve.insurance_type??null),re(ut),E(je)}else console.warn(`Could not fetch patient details for ID ${fe} from bill.`),re("Patient (Not Found)")}else console.warn(`Bill ${g} does not have an associated patient_id.`),re("Patient (Unknown)")}else if(l==="consultation"&&p){console.log(`Creating consultation bill for doctor ID: ${p}`);const ye=await pe(`/api/staff/${p}`);if(!ye.ok){const Ve=await ye.json().catch(()=>({}));throw new Error(Ve.message||`Failed to fetch doctor details (status ${ye.status})`)}const Ae=await ye.json();console.log("Fetched Doctor Data:",Ae);const De=Ae.opd_fee?parseFloat(String(Ae.opd_fee)):0;if(De>0?we=[{drug_id:p,name:`Consultation Fee - Dr. ${Ae.name}`,price:De,quantity:1,total:De}]:we=[],ce="pending",Le="consultation",Ne=i,U(we),$(ce),q(Le),F(Ne),fe){const Ve=await pe(`/api/patients/${fe}`);if(Ve.ok){const it=await Ve.json();E(it.phone??null),I(it.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${fe}.`)}}else if(b){console.log(`Fetching details for Lab Order ID: ${b}`);const ye=await pe(`/api/lab/${b}`);if(!ye.ok){let De=`Failed to fetch lab order details (Status: ${ye.status} ${ye.statusText})`;try{De=(await ye.json()).message||De}catch{console.error("Response was not valid JSON:",await ye.text())}throw new Error(De)}const Ae=await ye.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(Ae,null,2)),we=(Ae.tests||[]).filter(De=>De&&typeof De.name=="string"&&De.price!==void 0&&De.id!==void 0).map(De=>{const Ve=parseFloat(De.price||"0"),it=!isNaN(Ve)&&isFinite(Ve)?Ve:0;return{drug_id:De.id,name:De.name,price:it,quantity:1,total:it*1,type:"lab_test"}}),we&&we.length===0&&(Ae.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",Ae.tests),Y(De=>`${De?De+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),ce="pending",Le="lab",Ne=b,fe=Ae.patient_id,U(we),$(ce),q(Le),F(Ne),fe){const De=await pe(`/api/patients/${fe}`);if(De.ok){const Ve=await De.json();ut=Ve.name,je=Ve.phone??null,I(Ve.insurance_type??null),re(ut),E(je)}else console.warn(`Could not fetch patient details for ID ${fe} from lab order.`),re("Patient (Not Found)")}else console.warn(`Lab Order ${b} does not have an associated patient_id.`),re("Patient (Unknown)")}else if(U(o||null),$(d||null),q(l||null),F(f||null),Q(u!==void 0?parseFloat(u):null),re(a||`ID ${t}`),fe){const ye=await pe(`/api/patients/${fe}`);if(ye.ok){const Ae=await ye.json();E(Ae.phone??null),I(Ae.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${fe}.`)}if(i){const ye=await pe(`/api/queue/${i}`);if(ye.ok){const Ae=await ye.json();N(Ae.token_number)}else console.warn(`Could not fetch queue details for ID ${i}.`)}}catch(fe){console.error("Error fetching billing page details:",fe),Y(`Failed to load details: ${fe.message}`),U(null),$(null),q(null),F(null),re(a||""),E(null),N(null)}finally{ie(!1)}})()},[t,g,b,i,e]);const X=M=>{console.log(`Billing process completed for patient ID ${t}. New Bill ID: ${M}`),e(-1)},P=()=>{console.log(`Bill updated for patient ID ${t}.`),e(-1)};if(!t)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(Jx,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),r.jsx("button",{onClick:()=>e("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(ne)return r.jsx("div",{className:"min-h-screen bg-neutral-light flex items-center justify-center",children:r.jsx("p",{className:"text-teal-600 animate-pulse",children:"Loading Billing Details..."})});if(oe)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(Jx,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),r.jsx("p",{className:"text-sm text-center mb-4",children:oe}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>e(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const se=(O??d)==="paid";return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsxs("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:[r.jsx(Qt,{size:20,className:"lucide"})," Back"]})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsxs("h3",{className:"billing-page-title",children:[g?"Bill Details":b?"Create Lab Bill":"Create Bill"," for Patient: ",z||`ID ${t}`]}),r.jsxs("div",{className:"patient-info-bar",children:[v!==null&&r.jsxs("span",{children:[r.jsx(X0,{size:14,className:"lucide"})," Token: ",v]}),k&&r.jsxs("span",{children:[r.jsx(aM,{size:14,className:"lucide"})," Phone: ",k]}),b&&r.jsxs("span",{className:"lab-order-info",children:[r.jsx(Qx,{size:14,className:"lucide"})," Lab Order: ",b.substring(0,8),"..."]}),!k&&v===null&&!b&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),T&&r.jsxs("span",{className:"insurance-info",children:[r.jsx(wM,{size:14,className:"lucide"})," Insurance: ",T.replace(/_/g," ").replace(/\b\w/g,M=>M.toUpperCase())]}),!k&&v===null&&!b&&!T&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),r.jsx(Nte,{patientId:t,labOrderId:b,queueId:i,onBillCreated:X,onBillUpdated:P,initialItems:D??o,billType:B??l,relatedId:H??f,initialStatus:O??d,initialDiscountPercentage:L??u,readOnlyMode:se,doctorId:p,patientInsuranceType:T??void 0})]})]})},jte=({patientId:e,labOrderId:n,onBillingSuccess:t,initialItems:i,patientName:a})=>{const[o]=w.useState(i),[l,f]=w.useState(0),[d,u]=w.useState("cash"),[p,g]=w.useState(null),[b,v]=w.useState(!1),N=w.useMemo(()=>o.reduce((T,I)=>T+I.total,0)*(1-l/100),[o,l]),k=async()=>{if(o.length===0){g("Cannot finalize an empty bill.");return}v(!0),g(null);const E={patientId:e,items:o,amount:N,paymentMode:d,type:"lab",related_id:n,status:"paid",discountPercentage:l,labOrderId:n};try{const T=await pe("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}),I=await T.json();if(!T.ok)throw new Error(I.message||"Failed to create bill.");alert("Bill created successfully!");const D=window.open("","_blank");if(D){const U=`
                    <html>
                        <head>
                            <title>Lab Bill</title>
                            <style>
                                body { font-family: sans-serif; }
                                .bill-container { max-width: 800px; margin: auto; padding: 20px; border: 1px solid #ccc; }
                                .bill-header { text-align: center; margin-bottom: 20px; }
                                .bill-item { display: flex; justify-content: space-between; padding: 5px 0; }
                                .bill-total { text-align: right; margin-top: 20px; font-weight: bold; }
                            </style>
                        </head>
                        <body>
                            <div class="bill-container">
                                <div class="bill-header">
                                    <h2>Lab Bill for ${a}</h2>
                                </div>
                                <div class="bill-items-list">
                                    ${o.map(O=>`
                                        <div class="bill-item">
                                            <span>${O.name}</span>
                                            <span>${O.total.toFixed(2)}</span>
                                        </div>
                                    `).join("")}
                                </div>
                                <div class="bill-total">
                                    Total: ${N.toFixed(2)}
                                </div>
                            </div>
                        </body>
                    </html>
                `;D.document.write(U),D.document.close(),D.print()}t()}catch(T){g(`Failed to process bill: ${T.message}`)}finally{v(!1)}};return r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Lab Tests"})}),o.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"PRICE"})]})}),r.jsx("tbody",{children:o.map((E,T)=>r.jsxs("tr",{children:[r.jsx("td",{children:T+1}),r.jsx("td",{children:E.name}),r.jsx("td",{children:E.total.toFixed(2)})]},T))})]}):r.jsx("p",{children:"No lab tests in this order."})]})}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",o.reduce((E,T)=>E+T.total,0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:l,onChange:E=>f(parseFloat(E.target.value)||0),min:"0",max:"100",className:"discount-input-total",disabled:b}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",N.toFixed(2)]})]}),p&&r.jsx("p",{className:"error-message",style:{color:"red",textAlign:"center"},children:p}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("select",{id:"paymentMode",value:d,onChange:E=>u(E.target.value),className:"payment-mode-select",disabled:b,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:k,className:"primary-button",disabled:b||o.length===0,children:b?"Processing...":"Finalise and Bill"})})]})})]})},_te=()=>{const e=Nt(),n=nr(),{labOrderId:t}=n.state||{},[i,a]=w.useState(null),[o,l]=w.useState(""),[f,d]=w.useState(null),[u,p]=w.useState(null),[g,b]=w.useState(null),[v,N]=w.useState(!0),[k,E]=w.useState(null);w.useEffect(()=>{if(!t){console.error("LabBillingPage loaded without a labOrderId."),e("/");return}(async()=>{N(!0),E(null);try{const D=await pe(`/api/lab/${t}`);if(!D.ok){const $=await D.json().catch(()=>({}));throw new Error($.message||`Failed to fetch lab order details (Status: ${D.status})`)}const U=await D.json(),O=(U.tests||[]).filter($=>$&&typeof $.name=="string"&&$.price!==void 0&&$.id!==void 0).map($=>{const B=parseFloat($.price||"0"),q=!isNaN(B)&&isFinite(B)?B:0;return{drug_id:$.id,name:$.name,price:q,quantity:1,total:q,type:"lab_test"}});if(b(O),U.patient_id){a(U.patient_id);const $=await pe(`/api/patients/${U.patient_id}`);if($.ok){const B=await $.json();l(B.name),d(B.phone??null),p(B.insurance_type??null)}else l("Patient (Not Found)")}else throw new Error("Lab order does not have an associated patient.")}catch(D){console.error("Error fetching lab billing details:",D),E(`Failed to load details: ${D.message}`)}finally{N(!1)}})()},[t,e]);const T=()=>{console.log(`Lab billing process completed for Lab Order ID: ${t}`),e(-1)};return t?v?r.jsx("div",{className:"min-h-screen bg-neutral-light flex items-center justify-center",children:r.jsx("p",{className:"text-teal-600 animate-pulse",children:"Loading Lab Bill..."})}):k?r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(Jx,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Lab Bill"}),r.jsx("p",{className:"text-sm text-center mb-4",children:k}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>e(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]}):r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("header",{className:"billing-header no-print",children:[r.jsxs("button",{onClick:()=>e(-1),className:"back-button",children:[r.jsx(Qt,{size:20}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{children:"Lab Bill"})]}),r.jsx("div",{className:"billing-layout",children:r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Patient Name:"})," ",o]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Phone:"})," ",f||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Lab Order ID:"})," ",t]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Insurance:"})," ",u?u.replace(/_/g," "):"N/A"]})]})]}),i&&g&&r.jsx(jte,{patientId:i,labOrderId:t,onBillingSuccess:T,initialItems:g,patientInsuranceType:u,patientName:o})]})})]})}):r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(Jx,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Lab Order Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the lab billing page without a lab order ID."}),r.jsx("button",{onClick:()=>e("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]})},kte=()=>{const{patientId:e}=qr(),n=Nt(),[t,i]=w.useState([]),[a,o]=w.useState(!1),[l,f]=w.useState(null),[d,u]=w.useState("");return w.useEffect(()=>{(async()=>{if(!e){f("Patient ID not provided in URL.");return}o(!0),f(null),i([]);try{try{const v=await pe(`/api/patients/${e}`);if(v.ok){const N=await v.json();u(N.name)}}catch(v){console.warn("Could not fetch patient name:",v)}console.log(`Fetching pharmacy orders for patient ID: ${e}`);const g=await pe(`/api/pharmacy-orders/patient/${e}`);if(!g.ok){const v=await g.json().catch(()=>({}));throw new Error(v.message||`HTTP error! status: ${g.status}`)}const b=await g.json();console.log("Fetched Pharmacy Orders:",b),i(b||[])}catch(g){console.error("Error fetching pharmacy orders:",g),f(`Failed to load pharmacy orders: ${g.message}`)}finally{o(!1)}})()},[e]),r.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[r.jsxs("button",{onClick:()=>n(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(Qt,{size:16,className:"mr-1"}),"Back"]}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[r.jsx(wh,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",d&&`for ${d}`]}),r.jsx("div",{})," "]}),a&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading pharmacy orders..."}),l&&r.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:l}),!a&&t.length===0&&!l&&r.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!a&&t.length>0&&r.jsx("div",{className:"space-y-4",children:t.map(p=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Date:"})," ",new Date(p.date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm font-medium capitalize",children:[r.jsx("strong",{children:"Status:"})," ",p.status]})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Prescribed By:"})," ",p.prescribedBy||"N/A"]}),p.dispensedBy&&r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Dispensed By:"})," ",p.dispensedBy]}),r.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),r.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:p.medications.map((g,b)=>r.jsxs("li",{children:[g.name," - Qty: ",g.quantity,g.tabletsPerDay&&` (${g.tabletsPerDay} per day`,g.numberOfDays&&` for ${g.numberOfDays} days)`,!g.tabletsPerDay&&g.numberOfDays&&` (for ${g.numberOfDays} days)`,g.tabletsPerDay&&!g.numberOfDays&&")"]},b))})]},p.id))})]})},Ete=()=>{const e=Nt(),n=nr(),[t,i]=w.useState(null),[a,o]=w.useState([]),[l,f]=w.useState([]),[d,u]=w.useState(""),[p,g]=w.useState([]),[b,v]=w.useState(null),[N,k]=w.useState(!1),[E,T]=w.useState(null),[I,D]=w.useState(!0),[U,O]=w.useState(""),[$,B]=w.useState([]),[q,H]=w.useState(!1),[F,L]=w.useState(null),[Q,ne]=w.useState(!1),[ie,oe]=w.useState(!1),[Y,z]=w.useState([]),[re,X]=w.useState(!1),[P,te]=w.useState(null),se=/^\+?[0-9\s\-().]{7,20}$/,M=/^[a-zA-Z\s'-]{2,}$/,fe=w.useCallback(async()=>{try{const ve=await pe("/api/drugs");if(!ve.ok)throw new Error("Failed to fetch drugs");const qe=await ve.json();o(qe)}catch(ve){console.error("Failed to fetch available drugs:",ve),v("Could not load drug list. "+ve.message)}},[]),we=w.useCallback(async ve=>{X(!0),te(null);try{const qe=await pe(`/api/pharmacy-orders/patient/${ve}`);if(!qe.ok){const ze=await qe.json().catch(()=>({}));throw new Error(ze.message||`HTTP error! status: ${qe.status}`)}const We=await qe.json();z(We||[])}catch(qe){console.error("Failed to fetch previous pharmacy orders:",qe),te(`Could not load previous orders: ${qe.message}`)}finally{X(!1)}},[]);w.useEffect(()=>{var ve;fe(),(ve=n.state)!=null&&ve.patient?Ne(n.state.patient):D(!0)},[fe,n.state]),w.useEffect(()=>{t!=null&&t.id?we(t.id):z([])},[t,we]),w.useEffect(()=>{if(!d){g([]);return}const ve=d.toLowerCase();g(a.filter(qe=>{const We=qe.name&&qe.name.toLowerCase().includes(ve),ze=qe.brand_name&&qe.brand_name.toLowerCase().includes(ve);return We||ze}).slice(0,10))},[d,a]);const ce=w.useMemo(()=>jb(async ve=>{if(ve.trim().length<2){B([]),H(!1),L(null);return}H(!0),L(null);try{const qe=new URLSearchParams({search:encodeURIComponent(ve),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),We=await pe(`/api/patients?${qe.toString()}`);if(!We.ok){const J=await We.text();throw new Error(`API Error (${We.status}): ${J||We.statusText}`)}const ze=await We.json();B(ze.patients)}catch(qe){console.error("Error searching patients:",qe),L(qe.message||"Failed to search patients."),B([])}finally{H(!1)}},300),[se]),Le=ve=>{const qe=ve.target.value;O(qe),ne(se.test(qe)),oe(M.test(qe)&&!se.test(qe)),H(!0),ce(qe)},Ne=w.useCallback(ve=>{i(ve),D(!1),O(""),B([]),L(null)},[]),nt=w.useCallback(async ve=>{if(!U||ve==="phone"&&!Q||ve==="name"&&!ie){L(`Invalid ${ve} to create a new patient.`);return}H(!0),L(null);try{const We=await pe("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ve==="name"?U:"direct pharmacy",phone:ve==="phone"?U:null,age:null,gender:null,token:null})});if(!We.ok){const J=await We.json();throw new Error(J.message||`Failed to create patient: ${We.statusText}`)}const ze=await We.json();alert(`New patient "${ze.name}" created with ${ve==="phone"?`phone ${ze.phone}`:`name ${ze.name}`}.`),Ne(ze)}catch(qe){console.error("Error creating new patient:",qe),L(qe.message||"Failed to create new patient.")}finally{H(!1)}},[U,Q,ie,Ne]),ut=()=>{i(null),D(!0),f([]),v(null),z([])},je=ve=>{if(l.some(qe=>qe.drug_id===ve.id)){const qe=ve.name||ve.brand_name||"This drug";v(`${qe} is already in the order.`),setTimeout(()=>v(null),3e3),u(""),g([]);return}f(qe=>[...qe,{drug_id:ve.id,name:ve.name||ve.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,tabletsPerDay:1,numberOfDays:1,price:Number(ve.price)||0,originalPrice:Number(ve.price)||0,stock:ve.quantity_in_stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(ve.price)||0)/(Ae(ve.unit)||1),unit:ve.unit}]),u(""),g([])},ye=()=>{const ve=d.trim();if(!ve){v("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>v(null),3e3);return}e("/dashboard/inventory/add",{state:{initialDrugName:ve}}),u(""),g([])},Ae=ve=>{if(!ve)return null;const qe=ve.match(/(?:\d+x)?(\d+)/);return qe?parseInt(qe[1],10):null},De=ve=>{f(qe=>qe.filter(We=>(We.drug_id??We.name)!==ve))},Ve=(ve,qe)=>{f(We=>We.map(ze=>{if((ze.drug_id??ze.name)===ve&&ze.isLoose){const G=Ae(ze.unit),K=Math.max(0,qe),Se=K*(G??1)+(ze.looseUnits??0);return{...ze,loosePacks:K,looseQuantity:Se}}return ze}))},it=(ve,qe)=>{f(We=>We.map(ze=>{if((ze.drug_id??ze.name)===ve&&ze.isLoose){const G=Ae(ze.unit),K=Math.max(0,qe),Se=(ze.loosePacks??0)*(G??1)+K;return{...ze,looseUnits:K,looseQuantity:Se}}return ze}))},Ke=ve=>{const qe=[];ve.medications.forEach(We=>{if(l.find(J=>J.drug_id&&We.drug_id&&J.drug_id===We.drug_id||J.name.toLowerCase()===We.name.toLowerCase()))f(J=>J.map(G=>{if(G.drug_id&&We.drug_id&&G.drug_id===We.drug_id||G.name.toLowerCase()===We.name.toLowerCase()){const K=(G.pack_quantity??0)+(We.pack_quantity??0),Se=(G.loose_quantity??0)+(We.loose_quantity??0),Ee=We.tabletsPerDay??G.tabletsPerDay,Be=We.numberOfDays??G.numberOfDays,at=Ae(G.unit),gt=K*(at??1)+Se;return{...G,pack_quantity:K,loose_quantity:Se,directions_to_use:We.directions_to_use??G.directions_to_use,tabletsPerDay:Ee,numberOfDays:Be,looseQuantity:gt,loosePacks:Math.floor(gt/(at??1)),looseUnits:gt%(at??1)}}return G}));else{let J=We.drug_id,G=We.drug_id?a.find(K=>K.id===We.drug_id):void 0;if(!J&&We.name){const K=a.find(Se=>Se.name&&Se.name.toLowerCase()===We.name.toLowerCase());K&&(J=K.id,G=K)}qe.push({drug_id:J,name:We.name,pack_quantity:We.pack_quantity??0,loose_quantity:We.loose_quantity??0,directions_to_use:We.directions_to_use,tabletsPerDay:We.tabletsPerDay??1,numberOfDays:We.numberOfDays??1,price:G?G.price:We.price,stock:G?G.quantity_in_stock:We.stock,isLoose:!0,loosePacks:0,looseUnits:(We.pack_quantity??0)*(Ae((G==null?void 0:G.unit)||We.unit)??1)+(We.loose_quantity??0),looseQuantity:(We.pack_quantity??0)*(Ae((G==null?void 0:G.unit)||We.unit)??1)+(We.loose_quantity??0),pricePerLooseUnit:(G?Number(G.price):Number(We.price)||0)/(Ae((G==null?void 0:G.unit)||We.unit)||1),unit:(G==null?void 0:G.unit)||We.unit})}}),f(We=>[...We,...qe]),ve.prescriptionForUnavailableDrugs&&(!E||!E.includes(ve.prescriptionForUnavailableDrugs))&&T(We=>We?`${We}

-- From Order ${ve.id.substring(0,8)} --
${ve.prescriptionForUnavailableDrugs}`:ve.prescriptionForUnavailableDrugs),v("Medications from previous order added to current order."),setTimeout(()=>v(null),3e3)},rt=async ve=>{if(ve.preventDefault(),v(null),k(!0),!t){v("No patient selected for the order."),k(!1);return}if(l.length===0&&!(E!=null&&E.trim())){v("Please add at least one medication or provide a prescription for unavailable drugs."),k(!1);return}const qe=l.filter(ze=>{const J=ze.looseQuantity??0;return J<=0||ze.stock!==void 0&&J>ze.stock});if(qe.length>0){v(`Invalid quantity or insufficient stock for: ${qe.map(ze=>ze.name).join(", ")}`),k(!1);return}const We={patient_id:t.id,items:l.map(ze=>{const J=ze.price??0,G=ze.pricePerLooseUnit??0,K=G*(ze.looseQuantity??0);return{drug_id:ze.drug_id===void 0?null:ze.drug_id,name:ze.name,pack_quantity:ze.loosePacks??0,loose_quantity:ze.looseUnits??0,pack_price:J,loose_price:G,total_price:K,price:ze.originalPrice??0,directions_to_use:ze.directions_to_use===void 0?null:ze.directions_to_use,tabletsPerDay:ze.tabletsPerDay??1,numberOfDays:ze.numberOfDays??1}}),order_total:Ft,prescription_for_unavailable_drugs:E};try{const ze=await pe("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(We)});if(!ze.ok){const J=await ze.json();throw new Error(J.message||`Failed to create order: ${ze.statusText}`)}alert(`Pharmacy order created successfully for ${t.name}!`),e(-1)}catch(ze){console.error("Failed to create pharmacy order:",ze),v(ze.message||"Failed to create order. Please try again.")}finally{k(!1)}},Ft=w.useMemo(()=>l.reduce((ve,qe)=>{const We=qe.isLoose?qe.pricePerLooseUnit??0:qe.price??0,ze=qe.isLoose?qe.looseQuantity??0:qe.quantity??0;return ve+We*ze},0),[l]),_t=(Number(Ft)||0).toFixed(2);return r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",r.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsxs("button",{onClick:()=>e(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[r.jsx(Qt,{size:20})," "]}),r.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),I&&r.jsxs("div",{className:"content-section",children:[" ",r.jsx("h3",{className:"section-title",children:"Select Patient"})," ",r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:U,onChange:Le,className:"custom-text-input mt-1",autoFocus:!0}),q&&r.jsx("span",{className:"absolute right-3 top-9 text-xs text-gray-400",children:"Searching..."})]}),F&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:F})," ",$.length>0&&r.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",r.jsxs("ul",{children:[" ",$.map(ve=>r.jsxs("li",{onClick:()=>Ne({id:ve.id,name:ve.name,token:ve.token,age:ve.age,gender:ve.gender,phone:ve.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",ve.token]}),ve.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[ve.age?`${ve.age} yrs`:"Age N/A",ve.gender?` / ${ve.gender}`:" / Gender N/A",ve.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",ve.phone]})]})]}),ve.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",ve.phone]})]},ve.id))]})]}),U.length>=2&&!q&&$.length===0&&!F&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',U,'".']}),Q&&r.jsx("button",{type:"button",onClick:()=>nt("phone"),className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:q,children:'Create "direct pharmacy" Patient with this Phone'}),ie&&r.jsx("button",{type:"button",onClick:()=>nt("name"),className:"create-patient-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-2",disabled:q,children:"Create Patient with this Name"})]}),U.length<2&&!q&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),t&&!I&&r.jsxs("form",{onSubmit:rt,children:[r.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:"section-title",children:[" ","Patient: ",r.jsx("span",{className:"font-normal",children:t.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:t.token??"N/A"}),t.age&&`    Age: ${t.age}`,t.gender&&`    Gender: ${t.gender}`,t.phone&&`    Phone: ${t.phone}`]}),r.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${t.id}`,children:["ID: ",t.id.substring(0,12),"..."]})]}),r.jsx("button",{type:"button",onClick:ut,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),b&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:b})," ",re&&r.jsx("div",{className:"content-section text-center py-4",children:r.jsx("p",{className:"text-gray-500",children:"Loading previous orders..."})}),P&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:P}),!re&&Y.length>0&&r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:Y.map(ve=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"font-semibold text-gray-800",children:["Order Date: ",new Date(ve.date).toLocaleDateString()]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ve.status==="dispensed"?"bg-green-100 text-green-800":ve.status==="pending"?"bg-yellow-100 text-yellow-800":ve.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:ve.status.charAt(0).toUpperCase()+ve.status.slice(1)})]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-3",children:ve.medications.map((qe,We)=>r.jsxs("li",{children:[r.jsx("strong",{children:qe.name}),": ",qe.quantity," Qty",qe.directions_to_use&&` - Directions: ${qe.directions_to_use}`]},We))}),ve.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Prescription for Unavailable:"}),r.jsxs("div",{className:"prose prose-sm max-w-none",children:[" ",r.jsx(_l,{remarkPlugins:[Ro],children:ve.prescriptionForUnavailableDrugs})]})]}),r.jsxs("button",{type:"button",onClick:()=>Ke(ve),className:"add-previous-meds-button mt-3 px-3 py-1.5 text-sm font-medium rounded-md flex items-center justify-center",children:[r.jsx(Ph,{size:16,className:"mr-1"})," Add Medications to Current Order"]})]},ve.id))})]}),!re&&Y.length===0&&t&&r.jsx("div",{className:"content-section text-center py-4 mt-4",children:r.jsx("p",{className:"text-gray-500",children:"No previous orders found for this patient."})}),r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:E??"",onChange:ve=>T(ve.target.value||null),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[" ",r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:d,onChange:ve=>u(ve.target.value),className:"custom-text-input mt-1"}),d&&r.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",p.length>0&&r.jsxs("ul",{children:[" ",p.map(ve=>r.jsxs("li",{onClick:()=>je(ve),className:"cursor-pointer select-none relative",children:[r.jsx("span",{className:"font-medium block truncate",children:ve.name||ve.brand_name}),r.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",ve.quantity_in_stock??"N/A",", Price: ",Number(ve.price||0).toFixed(2),")"]})]},ve.id))]}),d.trim()&&!a.some(ve=>ve.name&&ve.name.toLowerCase()===d.trim().toLowerCase()||ve.brand_name&&ve.brand_name.toLowerCase()===d.trim().toLowerCase())&&r.jsxs("div",{onClick:ye,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',d.trim(),'" as new item']}),d.trim()&&p.length===0&&a.some(ve=>ve.name&&ve.name.toLowerCase()===d.trim().toLowerCase()||ve.brand_name&&ve.brand_name.toLowerCase()===d.trim().toLowerCase())&&r.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",r.jsx("h4",{className:"section-title",children:"Order Items"})," ",l.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),l.length>0&&r.jsx("ul",{className:"space-y-4",children:l.map(ve=>{const qe=ve.drug_id??ve.name,We=!ve.drug_id;return r.jsxs("li",{className:"order-item-card text-sm",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsxs("span",{className:`item-name block text-base ${We?"custom":""}`,children:[" ",ve.name,We?" (custom)":""]}),!We&&ve.pricePerLooseUnit!==void 0&&r.jsxs("span",{className:"item-details text-xs",children:[" ","@ ",(Number(ve.pricePerLooseUnit)||0).toFixed(2)," per loose unit"]}),ve.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${ve.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",ve.stock,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-packs-${qe}`,className:"dosage-label",children:"Packs:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>Ve(qe,(ve.loosePacks??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-packs-${qe}`,min:"0",value:ve.loosePacks??0,onChange:ze=>{const J=parseInt(ze.target.value,10);Ve(qe,isNaN(J)?0:J)},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>Ve(qe,(ve.loosePacks??0)+1),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-units-${qe}`,className:"dosage-label",children:"Loose:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>it(qe,(ve.looseUnits??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-units-${qe}`,min:"0",value:ve.looseUnits??0,onChange:ze=>{const J=parseInt(ze.target.value,10);it(qe,isNaN(J)?0:J)},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>it(qe,(ve.looseUnits??0)+1),className:"quantity-btn",children:"+"})]}),ve.unit&&r.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",ve.unit.split("x")[1]||ve.unit," per pack)"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","",(Number((ve.pricePerLooseUnit??0)*(ve.looseQuantity??0))||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>De(qe),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:r.jsx(Sr,{size:18})})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2 mt-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`tablets-per-day-${qe}`,className:"dosage-label",children:"Per Day:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>f(ze=>ze.map(J=>J.drug_id===qe?{...J,tabletsPerDay:Math.max(1,(J.tabletsPerDay??1)-1)}:J)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`tablets-per-day-${qe}`,min:"1",value:ve.tabletsPerDay??1,onChange:ze=>{const J=parseInt(ze.target.value,10);f(G=>G.map(K=>K.drug_id===qe?{...K,tabletsPerDay:isNaN(J)?1:Math.max(1,J)}:K))},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>f(ze=>ze.map(J=>J.drug_id===qe?{...J,tabletsPerDay:(J.tabletsPerDay??1)+1}:J)),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`number-of-days-${qe}`,className:"dosage-label",children:"No. Days:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>f(ze=>ze.map(J=>J.drug_id===qe?{...J,numberOfDays:Math.max(1,(J.numberOfDays??1)-1)}:J)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`number-of-days-${qe}`,min:"1",value:ve.numberOfDays??1,onChange:ze=>{const J=parseInt(ze.target.value,10);f(G=>G.map(K=>K.drug_id===qe?{...K,numberOfDays:isNaN(J)?1:Math.max(1,J)}:K))},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>f(ze=>ze.map(J=>J.drug_id===qe?{...J,numberOfDays:(J.numberOfDays??1)+1}:J)),className:"quantity-btn",children:"+"})]})]})]}),r.jsx("div",{className:"flex items-center mt-2",children:ve.unit&&Ae(ve.unit)&&r.jsx("span",{className:"ml-4 text-sm text-gray-400",children:(()=>{const ze=Ae(ve.unit),J=ve.looseQuantity??0;if(ze&&ze>0){const G=Math.floor(J/ze),K=J%ze;return`(Subtract: ${G} packs, ${K} loose)`}return""})()})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${qe}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${qe}`,placeholder:"e.g., 'After food', 'Twice a day'",value:ve.directions_to_use??"",onChange:ze=>{const J=ze.target.value;f(G=>G.map(K=>(K.drug_id??K.name)===qe?{...K,directions_to_use:J}:K))},className:"dosage-input text-sm w-full mt-1"})]})]},qe)})})]}),l.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ",_t]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:N||l.length===0&&!(E!=null&&E.trim()),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${N||l.length===0&&!(E!=null&&E.trim())?"":"hover:opacity-90"}`,children:N?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},oA=()=>{const{orderId:e}=qr(),n=Nt(),[t,i]=w.useState(null),[a,o]=w.useState(null),[l,f]=w.useState([]),[d,u]=w.useState([]),[p,g]=w.useState(""),[b,v]=w.useState([]),[N,k]=w.useState(null),[E,T]=w.useState(!1),[I,D]=w.useState(null),[U,O]=w.useState(!0),$=w.useCallback(async()=>{O(!0);try{const Y=await pe(`/api/pharmacy-orders/${e}`);if(!Y.ok)throw new Error("Failed to fetch order details");const z=await Y.json();i(z),o({id:z.patientId,name:z.patientName||"N/A",token:z.patientTokenNumber}),D(z.prescriptionForUnavailableDrugs);const re=z.medications.map(X=>{const P=q(X.unit),te=X.pack_quantity*(P??1)+X.loose_quantity;return{...X,isLoose:!0,loosePacks:X.pack_quantity,looseUnits:X.loose_quantity,looseQuantity:te,pack_price:X.pack_price,loose_price:X.loose_price,total_price:X.total_price,pricePerLooseUnit:X.loose_price,originalPrice:X.pack_price,box_number:X.box_number,unit:X.unit,batch:X.batch,expiry_date:X.expiry_date,discount_percentage:X.discount_percentage}});u(re)}catch(Y){k("Could not load order details. "+Y.message)}finally{O(!1)}},[e]),B=w.useCallback(async()=>{try{const Y=await pe("/api/drugs");if(!Y.ok)throw new Error("Failed to fetch drugs");const z=await Y.json();f(z)}catch(Y){k("Could not load drug list. "+Y.message)}},[]);w.useEffect(()=>{$(),B()},[$,B]),w.useEffect(()=>{if(!p){v([]);return}const Y=p.toLowerCase();v(l.filter(z=>{const re=z.name&&z.name.toLowerCase().includes(Y),X=z.brand_name&&z.brand_name.toLowerCase().includes(Y);return re||X}).slice(0,10))},[p,l]);const q=Y=>{if(!Y)return null;const z=Y.match(/(?:\d+x)?(\d+)/);return z?parseInt(z[1],10):null},H=Y=>{if(d.some(z=>z.drug_id===Y.id)){k(`${Y.name||Y.brand_name} is already in the order.`),setTimeout(()=>k(null),3e3),g(""),v([]);return}u(z=>[...z,{drug_id:Y.id,name:Y.name||Y.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,pack_price:Number(Y.price)||0,loose_price:(Number(Y.price)||0)/(q(Y.unit)||1),total_price:(Number(Y.price)||0)/(q(Y.unit)||1),discount_percentage:0,directions_to_use:"",tabletsPerDay:1,numberOfDays:1,stock:Y.quantity_in_stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(Y.price)||0)/(q(Y.unit)||1),originalPrice:Number(Y.price)||0,unit:Y.unit}]),g(""),v([])},F=Y=>{u(z=>z.filter(re=>(re.drug_id??re.name)!==Y))},L=(Y,z)=>{u(re=>re.map(X=>{if((X.drug_id??X.name)===Y&&X.isLoose){const P=q(X.unit),te=Math.max(0,z),se=te*(P??1)+(X.looseUnits??0);return{...X,loosePacks:te,looseQuantity:se,pack_quantity:te}}return X}))},Q=(Y,z)=>{u(re=>re.map(X=>{if((X.drug_id??X.name)===Y&&X.isLoose){const P=q(X.unit),te=Math.max(0,z),se=(X.loosePacks??0)*(P??1)+te;return{...X,looseUnits:te,looseQuantity:se,loose_quantity:te}}return X}))},ne=async Y=>{if(Y.preventDefault(),k(null),T(!0),d.length===0&&!(I!=null&&I.trim())){k("Please add at least one medication or provide a prescription."),T(!1);return}const z=d.filter(X=>{const P=X.looseQuantity??0;return P<=0||X.stock!==void 0&&P>X.stock});if(z.length>0){k(`Invalid quantity or insufficient stock for: ${z.map(X=>X.name).join(", ")}`),T(!1);return}const re={items:d.map(X=>({drug_id:X.drug_id??null,name:X.name,pack_quantity:X.loosePacks??0,loose_quantity:X.looseUnits??0,pack_price:X.pack_price??0,loose_price:X.loose_price??0,total_price:(X.loose_price??0)*(X.looseQuantity??0),discount_percentage:X.discount_percentage??0,directions_to_use:X.directions_to_use??null,tabletsPerDay:X.tabletsPerDay??1,numberOfDays:X.numberOfDays??1})),prescription_for_unavailable_drugs:I,order_total:ie};try{const X=await pe(`/api/pharmacy-orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(re)});if(!X.ok){const P=await X.json();throw new Error(P.message||"Failed to update order")}alert("Pharmacy order updated successfully!"),n(-1)}catch(X){k(X.message||"Failed to update order. Please try again.")}finally{T(!1)}},ie=w.useMemo(()=>d.reduce((Y,z)=>{const re=z.loose_price??0,X=z.looseQuantity??0;return Y+re*X},0),[d]),oe=(Number(ie)||0).toFixed(2);return U?r.jsx("div",{className:"p-6",children:"Loading order details..."}):t?r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[r.jsx("div",{className:"page-header flex items-center justify-between mb-6 pb-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:()=>n(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:r.jsx(Qt,{size:20})}),r.jsxs("h2",{className:"text-2xl",children:["Edit Pharmacy Order #",t.id.substring(0,8)]})]})}),r.jsxs("form",{onSubmit:ne,children:[r.jsxs("div",{className:"selected-patient-info content-section mb-4",children:[r.jsxs("h3",{className:"section-title",children:["Patient: ",r.jsx("span",{className:"font-normal",children:a==null?void 0:a.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:(a==null?void 0:a.token)??"N/A"})]})]}),N&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:N}),r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:I??"",onChange:Y=>D(Y.target.value||null),placeholder:"Enter prescription details...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"}),r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name...",value:p,onChange:Y=>g(Y.target.value),className:"custom-text-input mt-1"}),p&&r.jsx("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto z-20",children:b.length>0&&r.jsx("ul",{children:b.map(Y=>r.jsxs("li",{onClick:()=>H(Y),className:"cursor-pointer select-none relative p-2 hover:bg-gray-100",children:[r.jsx("span",{className:"font-medium block truncate",children:Y.name||Y.brand_name}),r.jsxs("span",{className:"text-xs text-gray-500",children:["(Stock: ",Y.quantity_in_stock??"N/A",", Price: ",Number(Y.price||0).toFixed(2),")"]})]},Y.id))})})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[r.jsx("h4",{className:"section-title",children:"Order Items"}),d.length===0?r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}):r.jsx("ul",{className:"space-y-4",children:d.map(Y=>{const z=Y.drug_id??Y.name;return r.jsxs("li",{className:"order-item-card text-sm p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsx("span",{className:"item-name block text-base",children:Y.name}),r.jsxs("span",{className:"item-details text-xs",children:["@ ",(Number(Y.loose_price)||0).toFixed(2)," per loose unit (Pack Price: ",(Number(Y.pack_price)||0).toFixed(2),")"]}),Y.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${Y.stock<=10?"text-red-500":""}`,children:["(Stock: ",Y.stock,")"]}),Y.batch&&r.jsxs("span",{className:"item-details text-xs ml-2",children:["(Batch: ",Y.batch,")"]}),Y.expiry_date&&r.jsxs("span",{className:"item-details text-xs ml-2",children:["(Expiry: ",new Date(Y.expiry_date).toLocaleDateString(),")"]}),Y.box_number&&r.jsxs("span",{className:"item-details text-xs ml-2",children:["(Box: ",Y.box_number,")"]}),Y.discount_percentage&&Y.discount_percentage>0&&r.jsxs("span",{className:"item-details text-xs ml-2 text-green-600",children:["(Discount: ",Y.discount_percentage,"%)"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`loose-packs-${z}`,className:"mr-2",children:"Packs:"}),r.jsx("input",{type:"number",id:`loose-packs-${z}`,min:"0",value:Y.loosePacks??0,onChange:re=>L(z,parseInt(re.target.value)||0),className:"dosage-input w-20 text-sm text-right"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`loose-units-${z}`,className:"mr-2",children:"Loose:"}),r.jsx("input",{type:"number",id:`loose-units-${z}`,min:"0",value:Y.looseUnits??0,onChange:re=>Q(z,parseInt(re.target.value)||0),className:"dosage-input w-20 text-sm text-right"})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:["",(Number((Y.pricePerLooseUnit??0)*(Y.looseQuantity??0))||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>F(z),className:"remove-item-button p-1.5 rounded-full hover:bg-red-100",title:"Remove Item",children:r.jsx(Sr,{size:18,className:"text-red-500"})})]})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${z}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${z}`,placeholder:"e.g., 'After food'",value:Y.directions_to_use??"",onChange:re=>{const X=re.target.value;u(P=>P.map(te=>(te.drug_id??te.name)===z?{...te,directions_to_use:X}:te))},className:"dosage-input text-sm w-full mt-1"})]})]},z)})})]}),d.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"text-lg font-bold",children:["Grand Total: ",oe]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:E,className:"submit-order-button px-6 py-2 text-base",children:E?"Updating...":"Update Order"})})]})]}):r.jsx("div",{className:"p-6 text-red-500",children:"Order not found or failed to load."})},Tte=(e,n,t,i="non-black")=>{if(isNaN(e)||isNaN(n)||e<=0||n<=0)return null;let a;return t==="female"?e<=.7?a=141*Math.pow(e/.7,-.329)*Math.pow(.993,n):a=141*Math.pow(e/.7,-1.209)*Math.pow(.993,n):e<=.9?a=141*Math.pow(e/.9,-.411)*Math.pow(.993,n):a=141*Math.pow(e/.9,-1.209)*Math.pow(.993,n),i==="black"&&(a*=1.018),parseFloat(a.toFixed(2))},Ate=(e,n,t)=>{if(isNaN(e)||isNaN(n)||isNaN(t)||e<0||n<0||t<0||t>=400)return null;const i=e-n-t/5;return parseFloat(i.toFixed(2))},Pte=(e,n)=>{if(isNaN(e)||isNaN(n)||e<0||n<0)return null;const t=e-n;return parseFloat(t.toFixed(2))},Dte=(e,n)=>{if(isNaN(e)||isNaN(n)||e<0||n<0)return null;const t=e-n;return parseFloat(t.toFixed(2))},Ite=(e,n,t)=>{if(isNaN(e)||isNaN(n)||isNaN(t)||e<0||n<0||t<0)return null;const i=e-(n+t);return parseFloat(i.toFixed(2))},Mte=(e,n,t)=>{if(isNaN(e)||isNaN(n)||isNaN(t)||e<0||n<0||t<0)return null;const i=2*e+n/18+t/2.8;return parseFloat(i.toFixed(2))},j_=e=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(e),__=()=>{var oe,Y;const{orderId:e}=qr(),n=Nt(),[t,i]=w.useState(null),[a,o]=w.useState({}),[l,f]=w.useState(!0),[d,u]=w.useState(!1),[p,g]=w.useState(null),[b,v]=w.useState(new Set),[N,k]=w.useState(null),[E,T]=w.useState(null),[I,D]=w.useState({}),[U,O]=w.useState(null),$=z=>{v(re=>{const X=new Set(re);return X.has(z)?X.delete(z):X.add(z),X})},B=w.useCallback(async z=>{var re;try{const X=await pe(`/api/patients/${z}`);if(!X.ok)throw new Error(`Failed to fetch patient details: ${X.status}`);const P=await X.json();k(P.age),T(((re=P.sex)==null?void 0:re.toLowerCase())==="female"?"female":"male")}catch(X){console.error("Error fetching patient details:",X),k(null),T(null)}},[]),q=w.useCallback(async()=>{if(e){f(!0),g(null);try{const z=await pe(`/api/lab/${e}`);if(!z.ok){const P=await z.json().catch(()=>({message:`HTTP error! status: ${z.status}`}));throw new Error(P.message||`HTTP error! status: ${z.status}`)}const re=await z.json();i(re),re.patient_id&&B(re.patient_id);const X={};if(re.tests&&re.tests.forEach(P=>{X[P.id]={},P.default_parameters&&P.default_parameters.length>0?P.default_parameters.forEach(te=>{X[P.id][te.name]=te.defaultValue}):X[P.id].report_content=""}),re.report_content)try{const P=JSON.parse(re.report_content);if(typeof P=="object"&&P!==null&&!Array.isArray(P)){const te={...X};Object.keys(P).forEach(se=>{te[se]?te[se]={...te[se],...P[se]}:te[se]=P[se]}),o(te)}else console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),o(X)}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),o(X)}else o(X)}catch(z){console.error("Failed to fetch lab order details:",z),g(z instanceof Error?z.message:"An unknown error occurred while fetching order details.")}finally{f(!1)}}},[e,B]);w.useEffect(()=>{e?q():(g("No Order ID provided in the URL."),f(!1))},[e,q]);const H=(z,re,X)=>{o(P=>{var Ke,rt,Ft,_t,ve,qe,We,ze,J,G,K,Se,Ee,Be,at,gt,pt,Ue,Ze;const te={...P,[z]:{...P[z],[re]:X}},se=parseFloat((Ke=te[z])==null?void 0:Ke.Creatinine),M=N,fe=E;if(re==="Creatinine"&&!isNaN(se)&&M!==null&&fe!==null){const Fe=Tte(se,M,fe);Fe!==null&&((rt=t==null?void 0:t.tests.find(Xe=>Xe.id===z))!=null&&rt.default_parameters.find(Xe=>Xe.name==="eGFR"))&&(te[z].eGFR=Fe)}const we=parseFloat((Ft=te[z])==null?void 0:Ft["Total Cholesterol"]),ce=parseFloat((_t=te[z])==null?void 0:_t["HDL Cholesterol"]),Le=parseFloat((ve=te[z])==null?void 0:ve.Triglycerides);if((re==="Total Cholesterol"||re==="HDL Cholesterol"||re==="Triglycerides")&&!isNaN(we)&&!isNaN(ce)&&!isNaN(Le)){const Fe=Ate(we,ce,Le);Fe!==null&&((qe=t==null?void 0:t.tests.find(Xe=>Xe.id===z))!=null&&qe.default_parameters.find(Xe=>Xe.name==="LDL Cholesterol"))&&(te[z]["LDL Cholesterol"]=Fe)}const Ne=parseFloat((We=te[z])==null?void 0:We["Total Bilirubin"]),nt=parseFloat((ze=te[z])==null?void 0:ze["Direct Bilirubin"]);if((re==="Total Bilirubin"||re==="Direct Bilirubin")&&!isNaN(Ne)&&!isNaN(nt)){const Fe=Pte(Ne,nt);Fe!==null&&((J=t==null?void 0:t.tests.find(Xe=>Xe.id===z))!=null&&J.default_parameters.find(Xe=>Xe.name==="Indirect Bilirubin"))&&(te[z]["Indirect Bilirubin"]=Fe)}const ut=parseFloat((G=te[z])==null?void 0:G["Total Protein"]),je=parseFloat((K=te[z])==null?void 0:K.Albumin);if((re==="Total Protein"||re==="Albumin")&&!isNaN(ut)&&!isNaN(je)){const Fe=Dte(ut,je);Fe!==null&&((Se=t==null?void 0:t.tests.find(Xe=>Xe.id===z))!=null&&Se.default_parameters.find(Xe=>Xe.name==="Globulin"))&&(te[z].Globulin=Fe)}const ye=parseFloat((Ee=te[z])==null?void 0:Ee.Sodium),Ae=parseFloat((Be=te[z])==null?void 0:Be.Chloride),De=parseFloat((at=te[z])==null?void 0:at.Bicarbonate);if((re==="Sodium"||re==="Chloride"||re==="Bicarbonate")&&!isNaN(ye)&&!isNaN(Ae)&&!isNaN(De)){const Fe=Ite(ye,Ae,De);Fe!==null&&((gt=t==null?void 0:t.tests.find(Xe=>Xe.id===z))!=null&&gt.default_parameters.find(Xe=>Xe.name==="Anion Gap"))&&(te[z]["Anion Gap"]=Fe)}const Ve=parseFloat((pt=te[z])==null?void 0:pt.Glucose),it=parseFloat((Ue=te[z])==null?void 0:Ue.BUN);if((re==="Sodium"||re==="Glucose"||re==="BUN")&&!isNaN(ye)&&!isNaN(Ve)&&!isNaN(it)){const Fe=Mte(ye,Ve,it);Fe!==null&&((Ze=t==null?void 0:t.tests.find(Xe=>Xe.id===z))!=null&&Ze.default_parameters.find(Xe=>Xe.name==="Osmolality"))&&(te[z].Osmolality=Fe)}return te})},F=async(z,re)=>{if(!e){alert("Cannot submit report without an Order ID.");return}if(!a[z]||Object.keys(a[z]).length===0){alert(`Please enter data for ${re} before saving.`);return}O(z),g(null);try{const P={...t!=null&&t.report_content?JSON.parse(t.report_content):{}};P[z]=a[z];const te=await pe(`/api/lab/${e}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(P)})});if(!te.ok){const se=await te.json().catch(()=>({message:`Submission failed: ${te.status}`}));throw new Error(se.message||`Submission failed: ${te.status}`)}t&&i({...t,report_content:JSON.stringify(P)}),alert(`Report for ${re} saved successfully!`)}catch(X){console.error(`Error submitting report for ${re}:`,X),alert(`Failed to save report for ${re}: ${X instanceof Error?X.message:"Unknown error"}`)}finally{O(null)}},L=async()=>{if(Object.keys(a).length===0){alert("Report content cannot be empty.");return}if(!e){alert("Cannot submit report without an Order ID.");return}u(!0),g(null);try{const z=await pe(`/api/lab/${e}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(a)})});if(!z.ok){const re=await z.json().catch(()=>({message:`Submission failed: ${z.status}`}));throw new Error(re.message||`Submission failed: ${z.status}`)}alert("Report submitted successfully!"),n(-1)}catch(z){console.error("Error submitting report:",z),g(z instanceof Error?z.message:"An unknown error occurred during submission.")}finally{u(!1)}};if(l)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",style:{textAlign:"center",padding:"50px"},children:[" ",r.jsxs("div",{className:"loading-text",children:[r.jsx(Sd,{className:"animate-spin h-8 w-8 inline mr-2"}),"Loading details..."]})]})});if(p&&!t)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Ri,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),r.jsx("p",{className:"error-text",children:p}),r.jsxs("button",{onClick:()=>n(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:[r.jsx(Qt,{size:16,style:{marginRight:"5px"}}),"Back"]})]})});if(!t)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Lo,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${e}.`}),r.jsxs("button",{onClick:()=>n(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:[r.jsx(Qt,{size:16,style:{marginRight:"5px"}}),"Back"]})]})});const Q=(oe=t==null?void 0:t.Patient)==null?void 0:oe.name,ne=(Y=t==null?void 0:t.Patient)==null?void 0:Y.patient_token_number,ie=`Enter Report for Order #${(t==null?void 0:t.lab_token_number)??e}`;return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"none",paddingBottom:0,marginBottom:0},children:[" ",r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:ie})," ",r.jsxs("button",{onClick:()=>n(-1),className:"lab-inventory-button lab-inventory-button-secondary",disabled:d,children:[r.jsx(Qt,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),t&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginBottom:"10px"},children:[r.jsx(Lo,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}})," Order Summary"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px",fontSize:"0.95em"},children:[r.jsxs("div",{children:[r.jsx(Sh,{size:15,style:{marginRight:"5px",verticalAlign:"middle"}}),r.jsx("strong",{children:"Patient:"})," ",Q??"N/A"," (Token: ",ne??"N/A",")"]}),r.jsxs("div",{children:[r.jsx($o,{size:15,style:{marginRight:"5px",verticalAlign:"middle"}}),r.jsx("strong",{children:"Order Token:"})," ",t.lab_token_number??"N/A"]}),r.jsxs("div",{children:[r.jsx(aI,{size:15,style:{marginRight:"5px",verticalAlign:"middle"}}),r.jsx("strong",{children:"Order Date:"})," ",Nh(new Date(t.createdAt),"PPpp")]}),r.jsxs("div",{style:{gridColumn:"1 / -1"},children:[r.jsx(FI,{size:15,style:{marginRight:"5px",verticalAlign:"middle"}}),r.jsx("strong",{children:"Tests:"})," ",(t.tests||[]).map(z=>z.name).join(", ")]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:Ote(t.status),children:Rte(t.status)})]})]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginBottom:"10px"},children:"Report Parameters"}),t==null?void 0:t.tests.map(z=>{var re;return r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px"},children:[r.jsxs("button",{type:"button",onClick:()=>$(z.id),className:"test-header-button","aria-expanded":b.has(z.id),children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",margin:0},children:z.name}),b.has(z.id)?r.jsx(Wx,{size:20}):r.jsx(Yx,{size:20})]}),b.has(z.id)&&r.jsxs("div",{className:"test-parameters-body",children:[z.default_parameters&&z.default_parameters.length>0?r.jsx(r.Fragment,{children:z.default_parameters.map(X=>{var P,te,se,M,fe,we,ce,Le,Ne,nt;return r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:`${z.id}-${X.name}`,children:[X.name,X.unit&&r.jsxs("span",{className:"normal-range-label",children:[" (",X.unit,")"]}),X.type==="number"&&(X.lower_limit!==null||X.upper_limit!==null)&&r.jsxs("span",{className:"normal-range-label",children:[" ","Normal:",X.lower_limit!==null&&X.lower_limit!==void 0&&` > ${X.lower_limit}`,X.lower_limit!==null&&X.lower_limit!==void 0&&X.upper_limit!==null&&X.upper_limit!==void 0&&" - ",X.upper_limit!==null&&X.upper_limit!==void 0&&` < ${X.upper_limit}`]})]}),X.type==="boolean"?r.jsxs("select",{id:`${z.id}-${X.name}`,value:((te=(P=a[z.id])==null?void 0:P[X.name])==null?void 0:te.toString())??"false",onChange:ut=>H(z.id,X.name,ut.target.value==="true"),className:"lab-inventory-input",disabled:d,children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-Reactive"})]}):r.jsx("input",{id:`${z.id}-${X.name}`,type:X.type==="number"?"number":"text",value:((se=a[z.id])==null?void 0:se[X.name])===null||((M=a[z.id])==null?void 0:M[X.name])===void 0?"":(fe=a[z.id])==null?void 0:fe[X.name],onChange:ut=>{const je=X.type==="number"&&ut.target.value===""?0:ut.target.value;H(z.id,X.name,je)},className:`lab-inventory-input ${X.type==="number"&&((we=a[z.id])==null?void 0:we[X.name])!==""&&(X.lower_limit!=null&&parseFloat((ce=a[z.id])==null?void 0:ce[X.name])<X.lower_limit||X.upper_limit!=null&&parseFloat((Le=a[z.id])==null?void 0:Le[X.name])>X.upper_limit)?"abnormal-result":""}`,disabled:d||j_(X.name)&&!((Ne=I[z.id])!=null&&Ne[X.name])}),j_(X.name)&&r.jsx("div",{style:{marginTop:"5px",textAlign:"right"},children:r.jsx("button",{type:"button",onClick:()=>D(ut=>{var je;return{...ut,[z.id]:{...ut[z.id]||{},[X.name]:!((je=ut[z.id])!=null&&je[X.name])}}}),className:"lab-inventory-button lab-inventory-button-tertiary",style:{fontSize:"0.8em",padding:"5px 10px"},disabled:d,children:(nt=I[z.id])!=null&&nt[X.name]?"Disable Edit":"Edit Calculated Field"})})]},X.name)})}):r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:`${z.id}-report_content`,children:"Report Content"}),r.jsx("textarea",{id:`${z.id}-report_content`,value:((re=a[z.id])==null?void 0:re.report_content)??"",onChange:X=>H(z.id,"report_content",X.target.value),className:"lab-inventory-input",rows:5,placeholder:`Enter report for ${z.name}...`,disabled:d})]}),r.jsx("div",{style:{marginTop:"15px",textAlign:"right"},children:r.jsx("button",{type:"button",onClick:()=>F(z.id,z.name),disabled:d||U===z.id,className:"lab-inventory-button",style:{fontSize:"0.9em",padding:"8px 16px"},children:U===z.id?r.jsxs(r.Fragment,{children:[r.jsx(Sd,{className:"animate-spin mr-2",size:14})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(jd,{size:14,style:{marginRight:"5px"}})," Save ",z.name]})})})]})]},z.id)}),p&&r.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[r.jsx(Ri,{size:15,className:"inline mr-1"}),p]})]}),r.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[" ",r.jsx("button",{type:"button",onClick:()=>n(-1),disabled:d,className:"lab-inventory-button lab-inventory-button-secondary",children:"Cancel"}),r.jsx("button",{type:"button",onClick:L,disabled:d||Object.keys(a).length===0,className:"lab-inventory-button",children:d?r.jsxs(r.Fragment,{children:[r.jsx(Sd,{className:"animate-spin mr-2",size:16})," Submitting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(jd,{size:16,style:{marginRight:"5px"}})," Submit All Reports"]})})]})]})})},Rte=e=>e?e.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase()):"Unknown",Ote=e=>{if(!e)return"status-badge";switch(e.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},Lte=()=>{const{orderId:e}=qr(),n=Nt(),[t,i]=w.useState(null),[a,o]=w.useState(!0),[l,f]=w.useState(null),d=w.useCallback(async g=>{if(!g){f("No Order ID specified in the URL."),o(!1),i(null);return}o(!0),f(null),i(null);try{console.log(`Fetching order details for ID: ${g}`);const b=await pe(`/api/lab/orders/${g}/report`);if(!b.ok){let N;try{N=await b.json()}catch{N={message:`Server returned status ${b.status}`}}throw console.error("Fetch order details error response:",N),new Error(N.message||`Failed to fetch order details: ${b.status}`)}const v=await b.json();if(console.log("Received order data:",v),!v)throw console.error("Invalid order data structure:",v),new Error("Invalid order data received from server.");i(v)}catch(b){console.error("Error fetching order details:",b),f(b instanceof Error?b.message:"An unknown error occurred while fetching the order details")}finally{o(!1)}},[pe]);w.useEffect(()=>{d(e)},[e,d]);const u=g=>{const b=document.querySelector(`[data-test-id='${g}']`);b&&(document.body.classList.add("printing-single-test"),b.classList.add("printing"),window.print())};w.useEffect(()=>{const g=()=>{document.body.classList.remove("printing-single-test");const b=document.querySelector(".printing");b&&b.classList.remove("printing")};return window.addEventListener("afterprint",g),()=>{window.removeEventListener("afterprint",g)}},[]);const p=()=>{t&&Zk(t)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs(os,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[r.jsx(ss,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),r.jsxs("button",{onClick:()=>n(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(Qt,{size:16,style:{marginRight:"5px"}}),"Back"]}),r.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[r.jsx(Nd,{size:16,style:{marginRight:"5px"}}),"Print"]}),r.jsxs("button",{onClick:p,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[r.jsx(bM,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",e||"None Specified",")"]}),a&&r.jsx("div",{className:"loading-text",children:"Loading report..."}),l&&!a&&r.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[r.jsx(Ri,{size:48}),r.jsx("h3",{className:"error-title",children:"Error Loading Report"}),r.jsx("p",{children:l}),e&&r.jsx("button",{onClick:()=>d(e),className:"retry-button",children:"Retry"})]}),r.jsxs("div",{className:"printable-section",children:[!a&&!l&&(t==null?void 0:t.Patient)&&r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Sh,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",t.Patient.name||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age:"})," ",t.Patient.age??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Gender:"})," ",t.Patient.gender||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Token No:"})," ",t.Patient.patient_token_number||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Patient ID:"})," ",t.Patient.id]}),t.Patient.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",t.Patient.phone]})]})]}),!a&&!l&&(t==null?void 0:t.report_content)&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx($o,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const g=JSON.parse(t.report_content||"{}");return typeof g=="object"&&g!==null&&t.tests?t.tests.map(b=>r.jsxs("div",{"data-test-id":b.id,className:"test-report-container",style:{marginBottom:"20px"},children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h4",{style:{fontSize:"1.1em",margin:0},children:b.name}),r.jsx("button",{onClick:()=>u(b.id),className:"lab-inventory-button print-test-button","aria-label":`Print ${b.name}`,children:r.jsx(Nd,{size:16})})]}),g[b.id]?r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(g[b.id]).map(([v,N])=>{var U;const k=(U=b.default_parameters)==null?void 0:U.find(O=>O.name===v),E=typeof N=="string"?parseFloat(N):typeof N=="number"?N:NaN,T=(k==null?void 0:k.type)==="number"&&!isNaN(E)&&(k.lower_limit!=null&&E<k.lower_limit||k.upper_limit!=null&&E>k.upper_limit),I=(k==null?void 0:k.type)==="boolean"?N===!0||N==="true"?"Reactive":"Non-Reactive":String(N),D=(k==null?void 0:k.type)==="boolean"&&(N===!0||N==="true");return r.jsxs("tr",{children:[r.jsx("td",{children:v}),r.jsxs("td",{className:`${T?"abnormal-result":""} ${D?"reactive-result":""}`,children:[I," ",k==null?void 0:k.unit]}),r.jsx("td",{children:k&&k.type==="number"&&(k.lower_limit!==null||k.upper_limit!==null)?r.jsxs(r.Fragment,{children:[k.lower_limit!=null&&` > ${k.lower_limit}`,k.lower_limit!=null&&k.upper_limit!=null&&" - ",k.upper_limit!=null&&` < ${k.upper_limit}`,k.unit&&` ${k.unit}`]}):((k==null?void 0:k.type)==="boolean","N/A")})]},v)})})]}):r.jsx("p",{children:"No parameters reported for this test."})]},b.id)):r.jsx(_l,{remarkPlugins:[Ro],children:t.report_content})}catch{return r.jsx(_l,{remarkPlugins:[Ro],children:t.report_content||"*No findings recorded.*"})}})()})]})]}),!a&&!l&&!(t!=null&&t.report_content)&&!(t!=null&&t.Patient)&&e&&r.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",e,". The order might be processing, does not exist, or the ID is incorrect."]}),!e&&!a&&!l&&r.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",r.jsx(os,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},Fte=()=>{const e=Nt(),[n,t]=w.useState(""),[i,a]=w.useState(!1),[o,l]=w.useState([]),[f,d]=w.useState(null),[u,p]=w.useState(n);w.useEffect(()=>{const k=setTimeout(()=>{p(n)},500);return()=>{clearTimeout(k)}},[n]),w.useEffect(()=>{g()},[u]);const g=async()=>{const k=n.trim();if(!k){l([]),d(null);return}a(!0),d(null),l([]),console.log(`Searching for: ${k}`);try{const E=await pe("/api/lab");if(!E.ok){let $;try{$=await E.json()}catch{$={message:`Server returned status ${E.status}`}}throw console.error("Search fetch error response:",$),new Error($.message||`HTTP error! status: ${E.status}`)}const{orders:T}=await E.json();console.log("Received lab orders for search:",T);const D=T.filter($=>!!$.report_content).map($=>{var B,q;return{id:$.id,labTokenNumber:String($.lab_token_number??"N/A"),patientName:((B=$.Patient)==null?void 0:B.name)||"N/A",patientId:$.patient_id,patientTokenNumber:String(((q=$.Patient)==null?void 0:q.patient_token_number)??"N/A"),tests:($.tests||[]).map(H=>H.name||"Unknown Test"),date:Nh(new Date($.createdAt),"yyyy-MM-dd"),status:$.status}}),U=n.toLowerCase(),O=D.filter($=>{var H,F,L,Q,ne;const B=String($.labTokenNumber).toLowerCase(),q=String($.patientTokenNumber).toLowerCase();return(((H=$.patientName)==null?void 0:H.toLowerCase())||"").includes(U)||B.includes(U)||q.includes(U)||(((L=(F=$.tests)==null?void 0:F.join(" "))==null?void 0:L.toLowerCase())||"").includes(U)||(((Q=$.id)==null?void 0:Q.toLowerCase())||"").includes(U)||(((ne=$.patientId)==null?void 0:ne.toLowerCase())||"").includes(U)});console.log("Filtered search results:",O),l(O),O.length===0&&k?d(`No matching reports found for "${k}".`):d(null)}catch(E){console.error("Failed to search lab reports:",E),d(E instanceof Error?E.message:"An unknown error occurred during search")}finally{a(!1)}},b=k=>{console.log(`Result clicked, navigating to view report for order ID: ${k}`),e(`/lab/view-report/${k}`)},v=k=>{switch(k){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:k,color:"text-gray-600 bg-gray-100"}}},N=k=>{switch(k){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),r.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(Qt,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[r.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[r.jsx(ss,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),r.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:n,onChange:k=>t(k.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[i&&r.jsx("div",{className:"loading-text",children:"Searching..."}),f&&!i&&r.jsxs("div",{className:"error-text",children:[r.jsx(Ri,{size:20,className:"inline mr-2"})," ",f]}),o.length>0&&!i&&r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:o.map(k=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>b(k.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[r.jsx(wI,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),k.patientName," (Token: ",k.patientTokenNumber,")"]}),r.jsx("span",{className:N(k.status),children:v(k.status).text})]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx($o,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",k.id]}),r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(EM,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",k.tests.join(", ")]}),r.jsxs("div",{children:[r.jsx(oI,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",k.date]})]})]},k.id))}),!i&&o.length===0&&!f&&n.trim()&&r.jsxs("div",{className:"no-data-message",children:['No results found for "',n,'".']}),!i&&o.length===0&&!f&&!n.trim()&&r.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},$te=()=>{const{patientId:e}=qr(),n=Nt(),[t,i]=w.useState([]),[a,o]=w.useState(!0),[l,f]=w.useState(null),[d,u]=w.useState(null),[p,g]=w.useState(null);w.useEffect(()=>{(async()=>{if(!e){f("Patient ID is missing from the URL."),o(!1);return}o(!0),f(null),i([]),g(null);try{const N=await pe(`/api/patients/${e}`);if(N.ok){const T=await N.json();g(T.name||`Patient ID: ${e}`)}else console.warn(`Failed to fetch patient name for ID ${e}`),g(`Patient ID: ${e}`);const k=await pe(`/api/lab/patient/${e}`);if(!k.ok){const T=await k.json().catch(()=>({}));throw new Error(T.message||`HTTP error! status: ${k.status}`)}const E=await k.json();i(E||[])}catch(N){console.error("Error fetching data:",N),f(`Failed to load data: ${N.message}`)}finally{o(!1)}})()},[e]);const b=v=>{v.report_content?n(`/lab/view-report/${v.id}`):n(`/lab/enter-report/${v.id}`)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{margin:0},children:["Lab Reports ",p?`for ${p}`:`for Patient ID: ${e}`]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:async()=>{if(!e){alert("Patient ID is missing. Cannot create a new report.");return}try{const v=await pe("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:e})});if(!v.ok){const k=await v.json().catch(()=>({message:`Failed to create new lab order: ${v.status}`}));throw new Error(k.message||`Failed to create new lab order: ${v.status}`)}const N=await v.json();n(`/lab/enter-report/${N.newOrderId}`)}catch(v){console.error("Error creating new lab order:",v),alert(`Error creating new lab order: ${v.message}`)}},className:"lab-inventory-button",disabled:!e,title:e?"Enter a new lab report for this patient":"Patient ID missing",children:[r.jsx(as,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),r.jsxs("button",{onClick:()=>n(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[r.jsx(Qt,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),r.jsx("div",{style:{marginTop:"20px"},children:a?r.jsxs("div",{className:"loading-text",children:[r.jsx(Sd,{className:"animate-spin h-8 w-8 inline mr-2"}),"Loading reports..."]}):l?r.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[r.jsx(PM,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),r.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),r.jsx("p",{children:l})]}):t.length===0?r.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx($o,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),r.jsx("p",{children:"No lab reports found for this patient."}),r.jsxs("p",{children:["You can ",r.jsx(os,{to:`/lab/create-order/${e}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):d?r.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",d.report_date?Nh(new Date(d.report_date),"PPP p"):"N/A"]}),r.jsxs("button",{onClick:()=>u(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[r.jsx(Qt,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),r.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[r.jsx("strong",{children:"Tests Ordered:"})," ",(d.tests||[]).map(v=>v.name).join(", ")]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:r.jsx(_l,{remarkPlugins:[Ro],children:d.report_content||"*No findings recorded.*"})})]}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:t.map(v=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>b(v),tabIndex:0,onKeyPress:N=>N.key==="Enter"&&b(v),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx($o,{size:24,style:{marginRight:"15px",color:"#007bff"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",Nh(new Date(v.createdAt),"PPP")]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",v.tests&&v.tests.length>0?v.tests.map(N=>N.name).join(", "):"N/A"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[v.status&&r.jsx("span",{className:Bte(v.status),children:zte(v.status)}),r.jsx(Sb,{size:20,style:{color:"#6c757d"}})]})]},v.id))})})]})})},zte=e=>{if(!e)return"Unknown";switch(e.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return e.charAt(0).toUpperCase()+e.slice(1)}},Bte=e=>{if(!e)return"status-badge";switch(e.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},lA=()=>{const e=Nt(),[n,t]=w.useState([]),[i,a]=w.useState([]),[o,l]=w.useState(!1),[f,d]=w.useState(null),[u,p]=w.useState(""),[g,b]=w.useState("all"),v=10,N=1;w.useEffect(()=>{(async()=>{l(!0),d(null);try{console.log("Fetching pharmacy inventory for view page...");const T=await pe("/api/drugs");if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const I=await T.json();console.log("Fetched Pharmacy Inventory for view page:",I),t(I||[])}catch(T){console.error("Error fetching pharmacy inventory:",T),d("Failed to load pharmacy inventory.")}finally{}})()},[]),w.useEffect(()=>{(async()=>{try{console.log("Fetching lab inventory for view page...");const T=await pe("/api/lab-tests");if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const I=await T.json();console.log("Fetched Lab Inventory for view page:",I),a(I||[])}catch(T){console.error("Error fetching lab inventory:",T),d(I=>I?`${I} & Failed to load lab inventory.`:"Failed to load lab inventory.")}finally{l(!1)}})()},[]);const k=w.useMemo(()=>{let E=n;return u&&(E=E.filter(T=>T.name.toLowerCase().includes(u.toLowerCase()))),g!=="all"&&(E=E.filter(T=>{const I=(T.quantity_in_stock??1/0)<=v;let D=!1,U=!1;if(T.expiry_date)try{const O=Xx(T.expiry_date);if(Gm(O)){const $=e1(new Date,N),B=new Date;B.setHours(0,0,0,0),U=bd(O,B),D=!U&&bd(O,$)}}catch(O){console.error("Error parsing expiry date for filter:",T.expiry_date,O),D=!0}else D=!0;switch(g){case"low-stock":return I;case"near-expiry":return D;case"expired":return U;default:return!0}})),E},[n,u,g]);return r.jsxs("div",{className:"lab-inventory-container",children:[r.jsxs("div",{className:"lab-inventory-header",children:[r.jsx("h1",{children:"Inventory Overview"}),r.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",title:"Go Back",children:[r.jsx(Qt,{size:18,style:{marginRight:"5px"}})," Back"]})]}),o&&r.jsx("p",{className:"loading-text",children:"Loading inventory..."}),f&&r.jsx("p",{className:"error-text",children:f}),!o&&!f&&r.jsxs("div",{className:"inventory-sections-container",children:[r.jsxs("div",{className:"lab-inventory-card",children:[" ",r.jsxs("div",{className:"inventory-section__header-bar",children:[r.jsxs("h2",{className:"lab-inventory-header",children:[r.jsx(Nb,{size:24,style:{marginRight:"10px",verticalAlign:"middle"}})," Pharmacy Inventory"]}),r.jsxs("div",{className:"inventory-section__controls",children:[" ",r.jsxs("div",{className:"inventory-section__search-area",children:[r.jsx("input",{type:"text",placeholder:"Search drugs...",value:u,onChange:E=>p(E.target.value),className:"lab-inventory-input",style:{marginRight:"5px",marginBottom:"0"}}),r.jsx(ss,{size:18,style:{color:"#777"}})]}),r.jsxs("div",{className:"inventory-section__filter-area",children:[" ",r.jsxs("select",{value:g,onChange:E=>b(E.target.value),className:"lab-inventory-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})]})]})]}),k.length>0?r.jsxs("div",{className:"table-container",children:[" ",r.jsxs("div",{className:"table-scroll-wrapper",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Stock"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Buying Price"}),r.jsx("th",{children:"Selling Price"})]})}),r.jsx("tbody",{children:k.map(E=>{let T="N/A",I="";const D=(E.quantity_in_stock??1/0)<=v;if(E.expiry_date)try{const U=Xx(E.expiry_date);if(Gm(U)){T=Nh(U,"dd/MM/yyyy");const O=e1(new Date,1),$=new Date;$.setHours(0,0,0,0),bd(U,$)?I="highlight-expired":bd(U,O)&&(I="highlight-near-expiry")}else T="Invalid Date",I="highlight-near-expiry"}catch(U){console.error("Error parsing expiry date:",E.expiry_date,U),T="Error Parsing",I="highlight-near-expiry"}else I="highlight-near-expiry";return r.jsxs("tr",{children:[r.jsx("td",{children:E.name}),r.jsx("td",{children:r.jsx("span",{className:`highlight-box ${D?"highlight-low-stock":""}`,children:E.quantity_in_stock??"N/A"})}),r.jsx("td",{children:r.jsx("span",{className:`highlight-box ${I}`,children:T})}),r.jsx("td",{className:"price-text",children:E.buying_price?`${E.buying_price}`:"N/A"}),r.jsx("td",{className:"price-text",children:E.price?`${E.price}`:"N/A"})]},E.id)})})]})]})]}):r.jsx("p",{className:"no-data-message",children:u?`No drugs found matching "${u}".`:"No pharmacy inventory data available."})]}),r.jsxs("div",{className:"lab-inventory-card",children:[" ",r.jsxs("h2",{className:"lab-inventory-header inventory-section__lab-title",children:[r.jsx(ow,{size:24,style:{marginRight:"10px",verticalAlign:"middle"}})," Lab Test Inventory"]}),i.length>0?r.jsxs("div",{className:"table-container",children:[" ",r.jsxs("div",{className:"table-scroll-wrapper",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"})]})}),r.jsx("tbody",{children:i.map(E=>r.jsxs("tr",{children:[r.jsx("td",{children:E.name}),r.jsx("td",{className:"price-text",children:E.price?`${E.price}`:"N/A"})]},E.id))})]})]})]}):r.jsx("p",{className:"no-data-message",children:"No lab test inventory data available."})]})]})]})},Ute=({fetchWithAuth:e})=>{const n=Nt(),[t,i]=w.useState(!0),[a,o]=w.useState([]),[l,f]=w.useState(null),[d,u]=w.useState(null),p=w.useCallback(async()=>{i(!0),f(null);try{const N=await(await e("/staff")).json();o(N.map(k=>({...k,id:k._id||k.id})))}catch(v){f(`Failed to load staff data: ${v.message}`),o([])}finally{i(!1)}},[e]);w.useEffect(()=>{p()},[p]),w.useEffect(()=>{if(d){const v=setTimeout(()=>u(null),5e3);return()=>clearTimeout(v)}},[d]);const g=v=>{switch(v){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},b=v=>{switch(v){case"doctor":return r.jsx(CM,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return r.jsx(t2,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return r.jsx(Nb,{size:16,className:"mr-2 text-purple-600"});case"lab":return r.jsx(Qx,{size:16,className:"mr-2 text-yellow-600"});case"admin":return r.jsx(ng,{size:16,className:"mr-2 text-teal-600"});default:return r.jsx(Vm,{size:16,className:"mr-2 text-gray-500"})}};return t?r.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"loading-animation-container",style:{height:"auto",margin:"20px 0"},children:[" ",r.jsx("div",{className:"breathing-ball",style:{width:"30px",height:"30px"}})," "]}),r.jsx("div",{className:"mt-4 text-teal-600 text-xl font-medium",children:"Loading Staff..."})]})}):r.jsxs("div",{className:"staff-page-container",children:[d&&r.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${d.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[d.type==="success"?r.jsx(ls,{size:18,className:"mr-2"}):r.jsx(Ri,{size:18,className:"mr-2"}),r.jsx("span",{children:d.message}),r.jsx("button",{onClick:()=>u(null),className:"ml-auto text-xl font-bold",children:""})]}),l&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[r.jsx(Ri,{size:18,className:"mr-2 text-red-500"}),l,r.jsx("button",{onClick:()=>f(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>n(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(Qt,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),r.jsxs("button",{onClick:()=>n("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[r.jsx(Ph,{size:16,className:"mr-2"})," Add New Staff"]})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:a.length===0&&!t?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):a.map(v=>r.jsxs("tr",{children:[r.jsx("td",{children:v.name}),r.jsx("td",{className:"hidden md:table-cell",children:v.email}),r.jsx("td",{children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g(v.role)}`,children:[b(v.role),v.role.charAt(0).toUpperCase()+v.role.slice(1)]})}),r.jsx("td",{className:"hidden md:table-cell",children:v.role==="doctor"?v.opd_fee?parseFloat(String(v.opd_fee)).toFixed(2):"Not Set":"N/A"}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.status==="active"?"Active":"Inactive"})}),r.jsx("td",{className:"actions",children:r.jsxs("button",{onClick:()=>n(`/dashboard/staff/edit/${v.id}`),className:"edit-link",disabled:v.role==="admin",title:"Edit Staff",children:[r.jsx(_d,{size:16})," Edit"]})})]},v.id))})]})})]})},qte=()=>{var k,E,T,I,D,U,O,$,B,q,H,F,L,Q;const{patientId:e,billId:n}=qr(),t=Nt(),[i,a]=w.useState(null),[o,l]=w.useState(!0),[f,d]=w.useState(null),[u,p]=w.useState(""),[g,b]=w.useState("cash"),v=((k=i==null?void 0:i.patient)==null?void 0:k.insurance_type)==="no_cash_insurance";w.useEffect(()=>{b(v?"no_cash_insurance":"cash")},[v]),w.useEffect(()=>{n?(async()=>{l(!0),d(null);try{const ie=await pe(`/api/bills/${n}`);if(!ie.ok)throw new Error(`HTTP error! status: ${ie.status}`);const oe=await ie.json();if(!oe||!oe.bill||!oe.calculated)throw new Error("Incomplete data structure received from backend (missing bill or calculated fields).");if(oe.bill.type!=="admission")throw console.error("Fetched bill is not an admission bill. Bill Type:",oe.bill.type),new Error(`Unexpected bill type received: ${oe.bill.type}. Expected 'admission'.`);console.log("Raw API data received:",JSON.stringify(oe,null,2));const Y=Array.isArray(oe.admissionPayments)?oe.admissionPayments:[];console.log("Processed admissionPaymentsData:",Y);const z={...oe.bill,amount:oe.bill.amount,AdmissionPayments:Y,calculated:oe.calculated,patient:oe.bill.Patient?{id:oe.bill.Patient.id,name:oe.bill.Patient.name,admission_date:oe.bill.Patient.admission_date,discharge_date:oe.bill.Patient.discharge_date}:void 0};console.log("Setting billDetails state to:",JSON.stringify(z,null,2)),a(z)}catch(ie){console.error("Failed to fetch admission bill details:",ie),d(ie instanceof Error?ie.message:"An unknown error occurred")}finally{l(!1)}})():(d("Bill ID is missing."),l(!1))},[n,e]);const N=async ne=>{var ie;if(ne.preventDefault(),!e||!u||isNaN(parseFloat(u))||parseFloat(u)<=0||parseFloat(u)>(((ie=i==null?void 0:i.calculated)==null?void 0:ie.balance)??0)){d("Please enter a valid payment amount within the balance due. Patient ID must be present.");return}d(null);try{const oe=await pe(`/api/patients/${e}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(u),payment_mode:g})});if(!oe.ok){const re=await oe.json();throw new Error(re.message||`HTTP error! status: ${oe.status}`)}const z=await(await pe(`/api/bills/${n}`)).json();if(z&&z.bill&&z.calculated&&z.admissionPayments)a({...z.bill,amount:parseFloat(z.bill.amount),AdmissionPayments:z.admissionPayments,calculated:z.calculated,patient:z.bill.Patient?{id:z.bill.Patient.id,name:z.bill.Patient.name,admission_date:z.bill.Patient.admission_date,discharge_date:z.bill.Patient.discharge_date}:void 0});else throw new Error("Invalid data structure received after payment submission.");p("")}catch(oe){console.error("Failed to submit payment:",oe),d(oe instanceof Error?oe.message:"Failed to record payment")}};return o?r.jsx("div",{className:"p-4",children:"Loading admission bill details..."}):f?r.jsxs("div",{className:"p-4 text-red-600",children:["Error: ",f]}):!i||!i.calculated?r.jsx("div",{className:"p-4",children:"No bill details found or data is incomplete."}):r.jsx("div",{className:"admission-page-container",children:r.jsxs("div",{className:"admission-section",children:[" ",r.jsxs("div",{className:"p-4 border-b",children:[" ",r.jsxs("h2",{className:"admission-header",children:["Admission Billing Details (Bill #",i.id,")"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Patient: ",((E=i.patient)==null?void 0:E.name)??"N/A"," (ID: ",i.patient_id,")"]})," ",r.jsxs("p",{className:"text-sm text-gray-600",children:["Admission Date: ",(T=i.patient)!=null&&T.admission_date?new Date(i.patient.admission_date).toLocaleDateString():"N/A"]}),((I=i.patient)==null?void 0:I.discharge_date)&&r.jsxs("p",{className:"text-sm text-gray-600",children:["Discharge Date: ",new Date(i.patient.discharge_date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm",children:["Status: ",r.jsx("span",{className:`font-semibold ${i.status==="paid"?"text-green-600":"text-orange-600"}`,children:((D=i.status)==null?void 0:D.toUpperCase())??"UNKNOWN"})]})]}),r.jsxs("div",{className:"p-4",children:[" ",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"admission-card",children:[r.jsx("h3",{className:"admission-card-title",children:"Billing Summary"}),r.jsxs("div",{className:"admission-card-content",children:[r.jsxs("p",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Initial Charges:"})," ",r.jsxs("span",{children:["",(parseFloat((i==null?void 0:i.amount)||"0")||0).toFixed(2)]})]}),r.jsxs("p",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Days Stayed:"})," ",r.jsx("span",{children:((U=i==null?void 0:i.calculated)==null?void 0:U.daysStayed)??0})]}),r.jsxs("p",{className:"flex justify-between text-sm font-semibold mt-2 pt-2 border-t",children:[r.jsx("span",{children:"Total Due:"})," ",r.jsxs("span",{children:["",(Number((O=i==null?void 0:i.calculated)==null?void 0:O.totalDue)||0).toFixed(2)]})]}),r.jsxs("p",{className:"flex justify-between text-sm text-green-700",children:[r.jsx("span",{children:"Total Paid:"})," ",r.jsxs("span",{children:["",(Number(($=i==null?void 0:i.calculated)==null?void 0:$.totalPaid)||0).toFixed(2)]})]}),r.jsxs("p",{className:"flex justify-between text-lg font-bold mt-1 text-red-600",children:[r.jsx("span",{children:"Balance Due:"})," ",r.jsxs("span",{children:["",(Number((B=i==null?void 0:i.calculated)==null?void 0:B.balance)||0).toFixed(2)]})]})]})]}),(i==null?void 0:i.status)!=="paid"&&(Number((q=i==null?void 0:i.calculated)==null?void 0:q.balance)||0)>0&&r.jsxs("div",{className:"admission-card",children:[r.jsx("h3",{className:"admission-card-title text-blue-800",children:"Record New Payment"}),r.jsxs("form",{onSubmit:N,className:"space-y-4",children:[r.jsxs("div",{className:"admission-form-group",children:[r.jsx("label",{htmlFor:"paymentAmount",className:"admission-label",children:"Amount Paid ()"}),r.jsx("input",{id:"paymentAmount",type:"number",value:u,onChange:ne=>p(ne.target.value),placeholder:`Max ${(Number((H=i==null?void 0:i.calculated)==null?void 0:H.balance)||0).toFixed(2)}`,required:!0,min:"0.01",step:"0.01",max:Number((F=i==null?void 0:i.calculated)==null?void 0:F.balance)||0,className:"admission-input"})]}),r.jsxs("div",{className:"admission-form-group",children:[r.jsx("label",{htmlFor:"paymentMode",className:"admission-label",children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",value:g,onChange:ne=>b(ne.target.value),className:"admission-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"upi",children:"UPI"}),v&&r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})]}),r.jsx("button",{type:"submit",className:"admission-button",disabled:o||!u||parseFloat(u)<=0||parseFloat(u)>(Number((L=i==null?void 0:i.calculated)==null?void 0:L.balance)||0)||v&&g!=="no_cash_insurance",children:"Record Payment"})]})]})]}),r.jsx("h3",{className:"admission-section-title mt-6 border-t pt-4",children:"Admission Payment History"}),Array.isArray(i==null?void 0:i.AdmissionPayments)&&i.AdmissionPayments.length>0?r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"admission-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Payment ID"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Amount Paid"}),r.jsx("th",{children:"Mode"})]})}),r.jsx("tbody",{children:(Q=i==null?void 0:i.AdmissionPayments)==null?void 0:Q.map(ne=>{if(!ne||typeof ne!="object")return null;let ie="Invalid Date";try{ne.payment_date&&!isNaN(new Date(ne.payment_date).getTime())&&(ie=new Date(ne.payment_date).toLocaleString())}catch(oe){console.error("Error formatting payment date:",ne.payment_date,oe)}return r.jsxs("tr",{children:[" ",r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne.id??"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ie}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",(Number(ne.amount_paid)||0).toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:ne.payment_mode??"N/A"})]},ne.id??Math.random())})})]})]}):r.jsx("p",{className:"text-gray-500 text-sm",children:"No payments recorded yet."})]}),r.jsxs("div",{className:"p-4 border-t bg-gray-50 text-right",children:[" ",r.jsx("button",{type:"button",onClick:()=>t(-1),className:"admission-button admission-button-secondary",children:"Back"})]})]})})};var Vte=Object.defineProperty,xb=Object.getOwnPropertySymbols,cA=Object.prototype.hasOwnProperty,uA=Object.prototype.propertyIsEnumerable,k_=(e,n,t)=>n in e?Vte(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,K1=(e,n)=>{for(var t in n||(n={}))cA.call(n,t)&&k_(e,t,n[t]);if(xb)for(var t of xb(n))uA.call(n,t)&&k_(e,t,n[t]);return e},X1=(e,n)=>{var t={};for(var i in e)cA.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&xb)for(var i of xb(e))n.indexOf(i)<0&&uA.call(e,i)&&(t[i]=e[i]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ad;(e=>{const n=class rn{constructor(d,u,p,g){if(this.version=d,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],d<rn.MIN_VERSION||d>rn.MAX_VERSION)throw new RangeError("Version value out of range");if(g<-1||g>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let b=[];for(let N=0;N<this.size;N++)b.push(!1);for(let N=0;N<this.size;N++)this.modules.push(b.slice()),this.isFunction.push(b.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(p);if(this.drawCodewords(v),g==-1){let N=1e9;for(let k=0;k<8;k++){this.applyMask(k),this.drawFormatBits(k);const E=this.getPenaltyScore();E<N&&(g=k,N=E),this.applyMask(k)}}a(0<=g&&g<=7),this.mask=g,this.applyMask(g),this.drawFormatBits(g),this.isFunction=[]}static encodeText(d,u){const p=e.QrSegment.makeSegments(d);return rn.encodeSegments(p,u)}static encodeBinary(d,u){const p=e.QrSegment.makeBytes(d);return rn.encodeSegments([p],u)}static encodeSegments(d,u,p=1,g=40,b=-1,v=!0){if(!(rn.MIN_VERSION<=p&&p<=g&&g<=rn.MAX_VERSION)||b<-1||b>7)throw new RangeError("Invalid value");let N,k;for(N=p;;N++){const D=rn.getNumDataCodewords(N,u)*8,U=l.getTotalBits(d,N);if(U<=D){k=U;break}if(N>=g)throw new RangeError("Data too long")}for(const D of[rn.Ecc.MEDIUM,rn.Ecc.QUARTILE,rn.Ecc.HIGH])v&&k<=rn.getNumDataCodewords(N,D)*8&&(u=D);let E=[];for(const D of d){t(D.mode.modeBits,4,E),t(D.numChars,D.mode.numCharCountBits(N),E);for(const U of D.getData())E.push(U)}a(E.length==k);const T=rn.getNumDataCodewords(N,u)*8;a(E.length<=T),t(0,Math.min(4,T-E.length),E),t(0,(8-E.length%8)%8,E),a(E.length%8==0);for(let D=236;E.length<T;D^=253)t(D,8,E);let I=[];for(;I.length*8<E.length;)I.push(0);return E.forEach((D,U)=>I[U>>>3]|=D<<7-(U&7)),new rn(N,u,I,b)}getModule(d,u){return 0<=d&&d<this.size&&0<=u&&u<this.size&&this.modules[u][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let p=0;p<this.size;p++)this.setFunctionModule(6,p,p%2==0),this.setFunctionModule(p,6,p%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),u=d.length;for(let p=0;p<u;p++)for(let g=0;g<u;g++)p==0&&g==0||p==0&&g==u-1||p==u-1&&g==0||this.drawAlignmentPattern(d[p],d[g]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const u=this.errorCorrectionLevel.formatBits<<3|d;let p=u;for(let b=0;b<10;b++)p=p<<1^(p>>>9)*1335;const g=(u<<10|p)^21522;a(g>>>15==0);for(let b=0;b<=5;b++)this.setFunctionModule(8,b,i(g,b));this.setFunctionModule(8,7,i(g,6)),this.setFunctionModule(8,8,i(g,7)),this.setFunctionModule(7,8,i(g,8));for(let b=9;b<15;b++)this.setFunctionModule(14-b,8,i(g,b));for(let b=0;b<8;b++)this.setFunctionModule(this.size-1-b,8,i(g,b));for(let b=8;b<15;b++)this.setFunctionModule(8,this.size-15+b,i(g,b));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let p=0;p<12;p++)d=d<<1^(d>>>11)*7973;const u=this.version<<12|d;a(u>>>18==0);for(let p=0;p<18;p++){const g=i(u,p),b=this.size-11+p%3,v=Math.floor(p/3);this.setFunctionModule(b,v,g),this.setFunctionModule(v,b,g)}}drawFinderPattern(d,u){for(let p=-4;p<=4;p++)for(let g=-4;g<=4;g++){const b=Math.max(Math.abs(g),Math.abs(p)),v=d+g,N=u+p;0<=v&&v<this.size&&0<=N&&N<this.size&&this.setFunctionModule(v,N,b!=2&&b!=4)}}drawAlignmentPattern(d,u){for(let p=-2;p<=2;p++)for(let g=-2;g<=2;g++)this.setFunctionModule(d+g,u+p,Math.max(Math.abs(g),Math.abs(p))!=1)}setFunctionModule(d,u,p){this.modules[u][d]=p,this.isFunction[u][d]=!0}addEccAndInterleave(d){const u=this.version,p=this.errorCorrectionLevel;if(d.length!=rn.getNumDataCodewords(u,p))throw new RangeError("Invalid argument");const g=rn.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][u],b=rn.ECC_CODEWORDS_PER_BLOCK[p.ordinal][u],v=Math.floor(rn.getNumRawDataModules(u)/8),N=g-v%g,k=Math.floor(v/g);let E=[];const T=rn.reedSolomonComputeDivisor(b);for(let D=0,U=0;D<g;D++){let O=d.slice(U,U+k-b+(D<N?0:1));U+=O.length;const $=rn.reedSolomonComputeRemainder(O,T);D<N&&O.push(0),E.push(O.concat($))}let I=[];for(let D=0;D<E[0].length;D++)E.forEach((U,O)=>{(D!=k-b||O>=N)&&I.push(U[D])});return a(I.length==v),I}drawCodewords(d){if(d.length!=Math.floor(rn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let p=this.size-1;p>=1;p-=2){p==6&&(p=5);for(let g=0;g<this.size;g++)for(let b=0;b<2;b++){const v=p-b,k=(p+1&2)==0?this.size-1-g:g;!this.isFunction[k][v]&&u<d.length*8&&(this.modules[k][v]=i(d[u>>>3],7-(u&7)),u++)}}a(u==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let p=0;p<this.size;p++){let g;switch(d){case 0:g=(p+u)%2==0;break;case 1:g=u%2==0;break;case 2:g=p%3==0;break;case 3:g=(p+u)%3==0;break;case 4:g=(Math.floor(p/3)+Math.floor(u/2))%2==0;break;case 5:g=p*u%2+p*u%3==0;break;case 6:g=(p*u%2+p*u%3)%2==0;break;case 7:g=((p+u)%2+p*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][p]&&g&&(this.modules[u][p]=!this.modules[u][p])}}getPenaltyScore(){let d=0;for(let b=0;b<this.size;b++){let v=!1,N=0,k=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[b][E]==v?(N++,N==5?d+=rn.PENALTY_N1:N>5&&d++):(this.finderPenaltyAddHistory(N,k),v||(d+=this.finderPenaltyCountPatterns(k)*rn.PENALTY_N3),v=this.modules[b][E],N=1);d+=this.finderPenaltyTerminateAndCount(v,N,k)*rn.PENALTY_N3}for(let b=0;b<this.size;b++){let v=!1,N=0,k=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[E][b]==v?(N++,N==5?d+=rn.PENALTY_N1:N>5&&d++):(this.finderPenaltyAddHistory(N,k),v||(d+=this.finderPenaltyCountPatterns(k)*rn.PENALTY_N3),v=this.modules[E][b],N=1);d+=this.finderPenaltyTerminateAndCount(v,N,k)*rn.PENALTY_N3}for(let b=0;b<this.size-1;b++)for(let v=0;v<this.size-1;v++){const N=this.modules[b][v];N==this.modules[b][v+1]&&N==this.modules[b+1][v]&&N==this.modules[b+1][v+1]&&(d+=rn.PENALTY_N2)}let u=0;for(const b of this.modules)u=b.reduce((v,N)=>v+(N?1:0),u);const p=this.size*this.size,g=Math.ceil(Math.abs(u*20-p*10)/p)-1;return a(0<=g&&g<=9),d+=g*rn.PENALTY_N4,a(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let p=[6];for(let g=this.size-7;p.length<d;g-=u)p.splice(1,0,g);return p}}static getNumRawDataModules(d){if(d<rn.MIN_VERSION||d>rn.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*d+128)*d+64;if(d>=2){const p=Math.floor(d/7)+2;u-=(25*p-10)*p-55,d>=7&&(u-=36)}return a(208<=u&&u<=29648),u}static getNumDataCodewords(d,u){return Math.floor(rn.getNumRawDataModules(d)/8)-rn.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d]*rn.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let u=[];for(let g=0;g<d-1;g++)u.push(0);u.push(1);let p=1;for(let g=0;g<d;g++){for(let b=0;b<u.length;b++)u[b]=rn.reedSolomonMultiply(u[b],p),b+1<u.length&&(u[b]^=u[b+1]);p=rn.reedSolomonMultiply(p,2)}return u}static reedSolomonComputeRemainder(d,u){let p=u.map(g=>0);for(const g of d){const b=g^p.shift();p.push(0),u.forEach((v,N)=>p[N]^=rn.reedSolomonMultiply(v,b))}return p}static reedSolomonMultiply(d,u){if(d>>>8||u>>>8)throw new RangeError("Byte out of range");let p=0;for(let g=7;g>=0;g--)p=p<<1^(p>>>7)*285,p^=(u>>>g&1)*d;return a(p>>>8==0),p}finderPenaltyCountPatterns(d){const u=d[1];a(u<=this.size*3);const p=u>0&&d[2]==u&&d[3]==u*3&&d[4]==u&&d[5]==u;return(p&&d[0]>=u*4&&d[6]>=u?1:0)+(p&&d[6]>=u*4&&d[0]>=u?1:0)}finderPenaltyTerminateAndCount(d,u,p){return d&&(this.finderPenaltyAddHistory(u,p),u=0),u+=this.size,this.finderPenaltyAddHistory(u,p),this.finderPenaltyCountPatterns(p)}finderPenaltyAddHistory(d,u){u[0]==0&&(d+=this.size),u.pop(),u.unshift(d)}};n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;function t(f,d,u){if(d<0||d>31||f>>>d)throw new RangeError("Value out of range");for(let p=d-1;p>=0;p--)u.push(f>>>p&1)}function i(f,d){return(f>>>d&1)!=0}function a(f){if(!f)throw new Error("Assertion error")}const o=class hi{constructor(d,u,p){if(this.mode=d,this.numChars=u,this.bitData=p,u<0)throw new RangeError("Invalid argument");this.bitData=p.slice()}static makeBytes(d){let u=[];for(const p of d)t(p,8,u);return new hi(hi.Mode.BYTE,d.length,u)}static makeNumeric(d){if(!hi.isNumeric(d))throw new RangeError("String contains non-numeric characters");let u=[];for(let p=0;p<d.length;){const g=Math.min(d.length-p,3);t(parseInt(d.substring(p,p+g),10),g*3+1,u),p+=g}return new hi(hi.Mode.NUMERIC,d.length,u)}static makeAlphanumeric(d){if(!hi.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],p;for(p=0;p+2<=d.length;p+=2){let g=hi.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p))*45;g+=hi.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p+1)),t(g,11,u)}return p<d.length&&t(hi.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p)),6,u),new hi(hi.Mode.ALPHANUMERIC,d.length,u)}static makeSegments(d){return d==""?[]:hi.isNumeric(d)?[hi.makeNumeric(d)]:hi.isAlphanumeric(d)?[hi.makeAlphanumeric(d)]:[hi.makeBytes(hi.toUtf8ByteArray(d))]}static makeEci(d){let u=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)t(d,8,u);else if(d<16384)t(2,2,u),t(d,14,u);else if(d<1e6)t(6,3,u),t(d,21,u);else throw new RangeError("ECI assignment value out of range");return new hi(hi.Mode.ECI,0,u)}static isNumeric(d){return hi.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return hi.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,u){let p=0;for(const g of d){const b=g.mode.numCharCountBits(u);if(g.numChars>=1<<b)return 1/0;p+=4+b+g.bitData.length}return p}static toUtf8ByteArray(d){d=encodeURI(d);let u=[];for(let p=0;p<d.length;p++)d.charAt(p)!="%"?u.push(d.charCodeAt(p)):(u.push(parseInt(d.substring(p+1,p+3),16)),p+=2);return u}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=o;e.QrSegment=o})(Ad||(Ad={}));(e=>{(n=>{const t=class{constructor(a,o){this.ordinal=a,this.formatBits=o}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),n.Ecc=t})(e.QrCode||(e.QrCode={}))})(Ad||(Ad={}));(e=>{(n=>{const t=class{constructor(a,o){this.modeBits=a,this.numBitsCharCount=o}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),n.Mode=t})(e.QrSegment||(e.QrSegment={}))})(Ad||(Ad={}));var mh=Ad;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Hte={L:mh.QrCode.Ecc.LOW,M:mh.QrCode.Ecc.MEDIUM,Q:mh.QrCode.Ecc.QUARTILE,H:mh.QrCode.Ecc.HIGH},dA=128,fA="L",hA="#FFFFFF",pA="#000000",mA=!1,gA=1,Gte=4,Yte=0,Wte=.1;function yA(e,n=0){const t=[];return e.forEach(function(i,a){let o=null;i.forEach(function(l,f){if(!l&&o!==null){t.push(`M${o+n} ${a+n}h${f-o}v1H${o+n}z`),o=null;return}if(f===i.length-1){if(!l)return;o===null?t.push(`M${f+n},${a+n} h1v1H${f+n}z`):t.push(`M${o+n},${a+n} h${f+1-o}v1H${o+n}z`);return}l&&o===null&&(o=f)})}),t.join("")}function xA(e,n){return e.slice().map((t,i)=>i<n.y||i>=n.y+n.h?t:t.map((a,o)=>o<n.x||o>=n.x+n.w?a:!1))}function Qte(e,n,t,i){if(i==null)return null;const a=e.length+t*2,o=Math.floor(n*Wte),l=a/n,f=(i.width||o)*l,d=(i.height||o)*l,u=i.x==null?e.length/2-f/2:i.x*l,p=i.y==null?e.length/2-d/2:i.y*l,g=i.opacity==null?1:i.opacity;let b=null;if(i.excavate){let N=Math.floor(u),k=Math.floor(p),E=Math.ceil(f+u-N),T=Math.ceil(d+p-k);b={x:N,y:k,w:E,h:T}}const v=i.crossOrigin;return{x:u,y:p,h:d,w:f,excavation:b,opacity:g,crossOrigin:v}}function Jte(e,n){return n!=null?Math.max(Math.floor(n),0):e?Gte:Yte}function bA({value:e,level:n,minVersion:t,includeMargin:i,marginSize:a,imageSettings:o,size:l,boostLevel:f}){let d=Rn.useMemo(()=>{const N=(Array.isArray(e)?e:[e]).reduce((k,E)=>(k.push(...mh.QrSegment.makeSegments(E)),k),[]);return mh.QrCode.encodeSegments(N,Hte[n],t,void 0,void 0,f)},[e,n,t,f]);const{cells:u,margin:p,numCells:g,calculatedImageSettings:b}=Rn.useMemo(()=>{let v=d.getModules();const N=Jte(i,a),k=v.length+N*2,E=Qte(v,l,N,o);return{cells:v,margin:N,numCells:k,calculatedImageSettings:E}},[d,l,o,i,a]);return{qrcode:d,margin:p,cells:u,numCells:g,calculatedImageSettings:b}}var Kte=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),bb=Rn.forwardRef(function(n,t){const i=n,{value:a,size:o=dA,level:l=fA,bgColor:f=hA,fgColor:d=pA,includeMargin:u=mA,minVersion:p=gA,boostLevel:g,marginSize:b,imageSettings:v}=i,k=X1(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:E}=k,T=X1(k,["style"]),I=v==null?void 0:v.src,D=Rn.useRef(null),U=Rn.useRef(null),O=Rn.useCallback(ie=>{D.current=ie,typeof t=="function"?t(ie):t&&(t.current=ie)},[t]),[$,B]=Rn.useState(!1),{margin:q,cells:H,numCells:F,calculatedImageSettings:L}=bA({value:a,level:l,minVersion:p,boostLevel:g,includeMargin:u,marginSize:b,imageSettings:v,size:o});Rn.useEffect(()=>{if(D.current!=null){const ie=D.current,oe=ie.getContext("2d");if(!oe)return;let Y=H;const z=U.current,re=L!=null&&z!==null&&z.complete&&z.naturalHeight!==0&&z.naturalWidth!==0;re&&L.excavation!=null&&(Y=xA(H,L.excavation));const X=window.devicePixelRatio||1;ie.height=ie.width=o*X;const P=o/F*X;oe.scale(P,P),oe.fillStyle=f,oe.fillRect(0,0,F,F),oe.fillStyle=d,Kte?oe.fill(new Path2D(yA(Y,q))):H.forEach(function(te,se){te.forEach(function(M,fe){M&&oe.fillRect(fe+q,se+q,1,1)})}),L&&(oe.globalAlpha=L.opacity),re&&oe.drawImage(z,L.x+q,L.y+q,L.w,L.h)}}),Rn.useEffect(()=>{B(!1)},[I]);const Q=K1({height:o,width:o},E);let ne=null;return I!=null&&(ne=Rn.createElement("img",{src:I,key:I,style:{display:"none"},onLoad:()=>{B(!0)},ref:U,crossOrigin:L==null?void 0:L.crossOrigin})),Rn.createElement(Rn.Fragment,null,Rn.createElement("canvas",K1({style:Q,height:o,width:o,ref:O,role:"img"},T)),ne)});bb.displayName="QRCodeCanvas";var Xte=Rn.forwardRef(function(n,t){const i=n,{value:a,size:o=dA,level:l=fA,bgColor:f=hA,fgColor:d=pA,includeMargin:u=mA,minVersion:p=gA,boostLevel:g,title:b,marginSize:v,imageSettings:N}=i,k=X1(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:E,cells:T,numCells:I,calculatedImageSettings:D}=bA({value:a,level:l,minVersion:p,boostLevel:g,includeMargin:u,marginSize:v,imageSettings:N,size:o});let U=T,O=null;N!=null&&D!=null&&(D.excavation!=null&&(U=xA(T,D.excavation)),O=Rn.createElement("image",{href:N.src,height:D.h,width:D.w,x:D.x+E,y:D.y+E,preserveAspectRatio:"none",opacity:D.opacity,crossOrigin:D.crossOrigin}));const $=yA(U,E);return Rn.createElement("svg",K1({height:o,width:o,viewBox:`0 0 ${I} ${I}`,ref:t,role:"img"},k),!!b&&Rn.createElement("title",null,b),Rn.createElement("path",{fill:f,d:`M0,0 h${I}v${I}H0z`,shapeRendering:"crispEdges"}),Rn.createElement("path",{fill:d,d:$,shapeRendering:"crispEdges"}),O)});Xte.displayName="QRCodeSVG";const Zte=e=>{switch(e){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},ene=()=>{const{orderId:e}=qr(),n=Nt(),[t,i]=w.useState(null),[a,o]=w.useState(!0),[l,f]=w.useState(null),[d,u]=w.useState(!1),[p,g]=w.useState({}),[b,v]=w.useState(""),[N,k]=w.useState(""),[E,T]=w.useState("cash"),I=w.useMemo(()=>(t==null?void 0:t.medications.reduce((L,Q)=>{const ne=Q.total_price??0,ie=ne*(Q.discount_percentage??0)/100;return L+ne-ie},0))??0,[t==null?void 0:t.medications]),D=5,U=w.useMemo(()=>!t||!t.medications?0:t.medications.reduce((L,Q,ne)=>{var X,P;const ie=Q.drug_id??`index-${ne}`,oe=((X=p[ie])==null?void 0:X.pack)||0,Y=((P=p[ie])==null?void 0:P.loose)||0,z=Q.pack_price??0,re=Q.loose_price??0;return L+oe*z+Y*re},0),[t,p]),O=w.useCallback(async()=>{if(!e){f("Order ID is missing."),o(!1);return}o(!0),f(null);try{const L=await pe(`/api/pharmacy-orders/${e}`);if(!L.ok)throw L.status===404?new Error(`Order with ID ${e} not found.`):new Error(`Failed to fetch order details: ${L.statusText} (${L.status})`);const Q=await L.json();console.log("Fetched order data after return:",Q);const ie=Q.medications.map(Y=>Y.pack_price&&Y.loose_price&&Y.loose_price>0?{...Y,unitsPerPack:Math.round(Y.pack_price/Y.loose_price)}:{...Y,unitsPerPack:0}).map(Y=>({...Y,discount_percentage:Y.discount_percentage??0}));i({...Q,medications:ie});const oe={};ie.forEach((Y,z)=>{const re=Y.drug_id??`index-${z}`;oe[re]={pack:0,loose:0}}),g(oe)}catch(L){console.error("Failed to fetch order details:",L),f(L.message||"Failed to load order details.")}finally{o(!1)}},[e]);w.useEffect(()=>{O()},[O]),w.useEffect(()=>{(async()=>{try{const Q=await pe("/api/clinics/settings");if(!Q.ok)throw new Error("Failed to fetch clinic settings");const ne=await Q.json();console.log("Fetched clinic settings:",ne),v(ne.upi_id||"")}catch(Q){console.error("Error fetching clinic settings:",Q)}})()},[]),w.useEffect(()=>{if((t==null?void 0:t.order_total)!==void 0&&t.order_total>0&&b){const L=`upi://pay?pa=${b}&pn=ClinicName&am=${t.order_total.toFixed(2)}&cu=INR`;k(L)}else k("")},[t==null?void 0:t.order_total,b]);const $=(L,Q)=>{i(ne=>{if(!ne)return null;const ie=ne.medications.map((Y,z)=>(Y.drug_id??`index-${z}`)===L?{...Y,discount_percentage:isNaN(Q)?0:Q}:Y),oe=ie.reduce((Y,z)=>{const re=z.total_price??0,X=re*(z.discount_percentage??0)/100;return Y+re-X},0);return{...ne,medications:ie,order_total:oe}})},B=(L,Q,ne)=>{g(ie=>{const oe=ne.unitsPerPack||0,z=ne.pack_quantity*oe+ne.loose_quantity,re=Math.max(0,Math.min(Q,z));let X=0,P=re;return oe>0&&(X=Math.floor(re/oe),P=re%oe),{...ie,[L]:{pack:X,loose:P}}})},q=async()=>{const L=t==null?void 0:t.medications.map((Q,ne)=>{var z,re;const ie=Q.drug_id??`index-${ne}`,oe=((z=p[ie])==null?void 0:z.pack)||0,Y=((re=p[ie])==null?void 0:re.loose)||0;return oe>0||Y>0?{drug_id:Q.drug_id,name:Q.name,pack_quantity:Q.pack_quantity,loose_quantity:Q.loose_quantity,returnPackQuantity:oe,returnLooseQuantity:Y}:null}).filter(Q=>Q!==null);if(!L||L.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!e){alert("Order ID is missing. Cannot process return.");return}if(!L){alert("Could not prepare items for return.");return}u(!0),f(null);try{const Q=await pe(`/api/pharmacy-orders/${e}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:L})}),ne=await Q.json();if(!Q.ok)throw new Error(ne.message||`Failed to process return: ${Q.statusText}`);alert("Return processed successfully! Stock has been updated.");const ie={};t==null||t.medications.forEach((oe,Y)=>{const z=oe.drug_id??`index-${Y}`;ie[z]={pack:0,loose:0}}),g(ie),O()}catch(Q){console.error("Failed to process return:",Q),f(Q.message||"An error occurred while processing the return."),alert(`Error processing return: ${Q.message||"Unknown error"}`)}finally{u(!1)}};if(a)return r.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(l)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>n(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(Qt,{size:14,className:"mr-1.5"})," Back"]}),r.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",l]})]});if(!t)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>n(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(Qt,{size:14,className:"mr-1.5"})," Back"]}),r.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const H=()=>{window.print()},F=Zte(t.status);return r.jsx("div",{className:"pharmacy-order-details-page",children:r.jsxs("div",{className:"order-details-container printable-section",children:[r.jsxs("div",{className:"order-details-header no-print",children:[r.jsx("h1",{children:"Pharmacy Order Details"}),r.jsxs("div",{className:"actions",children:[r.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[r.jsx(Qt,{size:18})," Back to Queue"]}),r.jsxs("button",{onClick:H,className:"print-button",children:[r.jsx(Nd,{size:18})," Print Bill"]})]})]}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{children:"Mahajan Pharmacy"}),r.jsxs("div",{className:"clinic-details-print",children:[r.jsx("span",{className:"small-text clinic-address",children:"D.No: 3-1-289, Plot No. 101, Kabela Center, RR Nagar, Vijayawada  520012."}),r.jsx("span",{className:"small-text clinic-notes",children:"Phone: 93919 44733"}),r.jsx("span",{className:"small-text clinic-license",children:"Licence No:RLF20AP2025003328"})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Patient Name:"})," RESHMA"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Token:"})," 12"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Order Date:"})," 31/10/2025"]})]})]}),r.jsxs("div",{className:"order-info-section no-print",children:[r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Order ID:"})," ",t.id]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Patient:"})," ",t.patientName||"N/A"," (",t.patientTokenNumber||"N/A",")"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Date:"})," ",new Date(t.date).toLocaleString()]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Prescribed By:"})," ",t.prescribedBy||"N/A"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:`status-pill ${F.text} ${F.bg}`,children:t.status})]})]}),r.jsxs("div",{className:"medications-section",children:[r.jsx("h2",{children:"Medications Ordered"}),t.medications.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"PACK QTY"}),r.jsx("th",{children:"PACK PRICE"}),r.jsx("th",{children:"LOOSE QTY"}),r.jsx("th",{children:"LOOSE PRICE"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"}),(t.status==="dispensed"||t.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"no-print",children:"RETURN PACK QTY"}),r.jsx("th",{className:"no-print",children:"RETURN LOOSE QTY"})]})]})}),r.jsx("tbody",{children:t.medications.map((L,Q)=>{var X,P,te,se,M,fe;const ne=L.drug_id??`index-${Q}`,ie=L.total_price??0,oe=ie*(L.discount_percentage??0)/100,Y=ie-oe,z=((X=p[ne])==null?void 0:X.pack)||0,re=((P=p[ne])==null?void 0:P.loose)||0;return r.jsxs("tr",{children:[r.jsx("td",{children:L.name}),r.jsx("td",{children:L.pack_quantity??0}),r.jsx("td",{children:((te=L.pack_price)==null?void 0:te.toFixed(2))??"N/A"}),r.jsx("td",{children:L.loose_quantity??0}),r.jsx("td",{children:((se=L.loose_price)==null?void 0:se.toFixed(2))??"N/A"}),r.jsx("td",{children:((M=L.price)==null?void 0:M.toFixed(2))??"N/A"})," ",r.jsx("td",{children:((fe=L.price)==null?void 0:fe.toFixed(2))??"N/A"})," ",r.jsxs("td",{children:[r.jsx("input",{type:"number",value:L.discount_percentage??0,onChange:we=>$(ne,parseFloat(we.target.value)),min:"0",max:"100",className:"discount-input-table no-print"}),r.jsxs("span",{className:"print-only",children:[L.discount_percentage??0,"%"]})]}),r.jsxs("td",{children:[D.toFixed(1),"%"]}),r.jsx("td",{children:Y.toFixed(2)}),(t.status==="dispensed"||t.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:L.pack_quantity,value:z,onChange:we=>{const Le=(parseInt(we.target.value,10)||0)*(L.unitsPerPack||0)+re;B(ne,Le,L)},className:"return-quantity-input"})}),r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:L.loose_quantity+L.pack_quantity*(L.unitsPerPack||0)-z*(L.unitsPerPack||0),value:re,onChange:we=>{const ce=parseInt(we.target.value,10)||0,Le=z*(L.unitsPerPack||0)+ce;B(ne,Le,L)},className:"return-quantity-input"})})]})]},ne)})})]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",I.toFixed(2)]})}),r.jsxs("div",{className:"order-total-section no-print",children:[r.jsx("span",{className:"total-label",children:"Order Total:"}),r.jsxs("span",{className:"total-amount",children:["",I.toFixed(2)]})]}),r.jsxs("div",{className:"payment-section no-print",children:[r.jsxs("div",{className:"payment-mode-group",children:[r.jsx("label",{htmlFor:"paymentMode",children:"Payment Mode:"}),r.jsxs("select",{id:"paymentMode",value:E,onChange:L=>T(L.target.value),className:"payment-mode-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),N&&r.jsxs("div",{className:"qr-code-container",children:[r.jsx(bb,{value:N,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]})]}),(t.status==="dispensed"||t.status==="billed")&&t.medications.length>0&&r.jsxs("div",{className:"return-action-section no-print",children:[U>0&&r.jsxs("div",{className:"total-refund-display",children:["Total Refund: ",U.toFixed(2)]}),r.jsx("button",{onClick:q,disabled:Object.values(p).every(L=>L.pack===0&&L.loose===0)||d,className:"process-return-button",children:d?r.jsxs(r.Fragment,{children:[r.jsx(Z0,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Z0,{size:16,className:"mr-2"})," Process Return"]})})]})]})})},tne=async()=>{const e=await pe("/subscriptions");if(!e.ok)throw new Error("Failed to fetch subscription plans");return await e.json()},nne=async e=>{const n=await pe(`/subscriptions/${e}`);if(!n.ok){const t=await n.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(t.message||"Failed to fetch subscription plan details")}return await n.json()},ine=async e=>{const n=await pe("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const t=await n.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(t.message||"Failed to create subscription plan")}return await n.json()},rne=async(e,n)=>{const t=await pe(`/subscriptions/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const i=await t.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(i.message||"Failed to update subscription plan")}return await t.json()},ane=async e=>{const n=await pe(`/subscriptions/${e}`,{method:"DELETE"});if(!n.ok){const t=await n.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(t.message||"Failed to deactivate subscription plan")}return await n.json()},sne=async(e,n)=>{const t=await pe("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:e,planId:n})});if(!t.ok){const i=await t.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(i.message||"Failed to initiate Razorpay subscription")}return await t.json()},one=()=>{const e=Nt(),[n,t]=w.useState([]),[i,a]=w.useState(!1),[o,l]=w.useState(null),[f,d]=w.useState(null),u=w.useCallback(async()=>{a(!0),l(null);try{const g=await tne();t(g)}catch(g){l(g.message||"Failed to fetch subscription plans."),d({type:"error",message:g.message||"Failed to fetch plans."})}finally{a(!1)}},[]);w.useEffect(()=>{u()},[u]),w.useEffect(()=>{if(f){const g=setTimeout(()=>d(null),5e3);return()=>clearTimeout(g)}},[f]);const p=async g=>{if(d(null),l(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){a(!0),l(null),d(null);try{await ane(g),d({type:"success",message:"Plan deactivated successfully!"}),u()}catch(b){l(b.message||"Failed to deactivate plan."),d({type:"error",message:b.message||"Failed to deactivate plan."})}finally{a(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[f&&r.jsxs("div",{className:`${f.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[f.type==="success"?r.jsx(ls,{size:18,className:"mr-2 text-green-500"}):r.jsx(Ri,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:f.message})]}),r.jsx("button",{onClick:()=>d(null),className:`${f.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(ci,{size:16})})]}),r.jsxs("div",{children:[" ",r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("button",{onClick:()=>e(-1),className:"back-button",children:[r.jsx(Qt,{size:16}),"Back"]}),r.jsx("h1",{children:"Manage Subscription Plans"}),r.jsxs("button",{onClick:()=>e("/dashboard/subscriptions/add"),className:"subscription-btn",children:[r.jsx(Ph,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),i&&n.length===0&&r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"loading-animation-container",style:{height:"auto",margin:"20px 0"},children:r.jsx("div",{className:"breathing-ball",style:{width:"25px",height:"25px"}})}),r.jsx("div",{className:"mt-2 text-gray-600 text-md font-medium",children:"Loading plans..."})]})}),!i&&o&&n.length===0&&r.jsx("p",{className:"text-center text-red-500",children:o}),n.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:n.map(g=>r.jsxs("tr",{children:[r.jsx("td",{children:g.name}),r.jsxs("td",{children:["",Number(g.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",g.interval>1?g.interval:""," ",g.period,g.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${g.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>e(`/dashboard/subscriptions/edit/${g.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(_d,{size:16,className:"inline-block"})}),g.status==="active"&&r.jsx("button",{onClick:()=>p(g.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:i,children:r.jsx(Sr,{size:16,className:"inline-block"})})]})]},g.id))})]})}),!i&&n.length===0&&!o&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},lne=()=>{const e=Nt(),[n,t]=w.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[i,a]=w.useState(!1),[o,l]=w.useState(null),[f,d]=w.useState(null);w.useEffect(()=>{if(f){const b=setTimeout(()=>d(null),5e3);return()=>clearTimeout(b)}},[f]);const u=b=>{const{name:v,value:N}=b.target;t(k=>({...k,[v]:N}))},p=async b=>{if(b.preventDefault(),a(!0),l(null),d(null),!n.name||!n.price||!n.period||n.interval===void 0||n.interval<=0){l("Please fill in all required fields (Name, Price, Period, Interval > 0)."),a(!1);return}try{await ine(n),d({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{e("/dashboard/subscriptions")},2e3)}catch(v){const N=v.message||"Failed to create plan.";l(N),d({type:"error",message:N})}finally{a(!1)}},g=()=>{e(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[f&&r.jsxs("div",{className:`${f.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[f.type==="success"?r.jsx(ls,{size:18,className:"mr-2 text-green-500"}):r.jsx(Ri,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:f.message})]}),r.jsx("button",{onClick:()=>d(null),className:`${f.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(ci,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Subscription Plan"}),o&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:o}),r.jsxs("form",{onSubmit:p,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:n.description||"",onChange:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:n.price||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:n.period||"monthly",onChange:u,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:n.interval||1,onChange:u,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:n.razorpay_plan_id||"",onChange:u})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:g,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:i,className:"subscription-btn",children:[i?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,i?"Creating...":"Create Plan"]})]})]})]})]})},cne=()=>{const{id:e}=qr(),n=Nt(),[t,i]=w.useState(null),[a,o]=w.useState({}),[l,f]=w.useState(!1),[d,u]=w.useState(!0),[p,g]=w.useState(null),[b,v]=w.useState(null),N=w.useCallback(async()=>{if(!e){g("Plan ID is missing."),u(!1);return}u(!0),g(null);try{const I=await nne(e);i(I),o({name:I.name,description:I.description||"",price:I.price,period:I.period,interval:I.interval,razorpay_plan_id:I.razorpay_plan_id||"",status:I.status})}catch(I){g(I.message||"Failed to fetch plan details."),v({type:"error",message:I.message||"Failed to fetch plan details."})}finally{u(!1)}},[e]);w.useEffect(()=>{N()},[N]),w.useEffect(()=>{if(b){const I=setTimeout(()=>v(null),5e3);return()=>clearTimeout(I)}},[b]);const k=I=>{const{name:D,value:U}=I.target;o(O=>({...O,[D]:U}))},E=async I=>{if(I.preventDefault(),!e){g("Plan ID is missing.");return}if(f(!0),g(null),v(null),!a.name||!a.price||!a.period||a.interval===void 0||a.interval<=0){g("Please fill in all required fields (Name, Price, Period, Interval > 0)."),f(!1);return}try{await rne(e,a),v({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{n(-1)},2e3)}catch(D){const U=D.message||"Failed to update plan.";g(U),v({type:"error",message:U})}finally{f(!1)}},T=()=>{n(-1)};return d?r.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):p&&!t?r.jsx("div",{className:"p-6 text-center text-red-500",children:p}):t?r.jsxs("div",{className:"subscription-page-container",children:[b&&r.jsxs("div",{className:`${b.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[b.type==="success"?r.jsx(ls,{size:18,className:"mr-2"}):r.jsx(Ri,{size:18,className:"mr-2"}),r.jsx("span",{children:b.message})]}),r.jsx("button",{onClick:()=>v(null),className:"ml-4",children:r.jsx(ci,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Subscription Plan"}),p&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:p}),r.jsxs("form",{onSubmit:E,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:a.name||"",onChange:k,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:a.description||"",onChange:k})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:a.price||"",onChange:k,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:a.period||"monthly",onChange:k,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:a.interval||1,onChange:k,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:a.razorpay_plan_id||"",onChange:k})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:a.status||"active",onChange:k,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:T,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:l,className:"subscription-btn",children:[l?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,l?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},une=()=>{const{patientId:e}=qr(),n=Nt(),[t,i]=w.useState(null),[a,o]=w.useState([]),[l,f]=w.useState(""),[d,u]=w.useState(!0),[p,g]=w.useState(null),[b,v]=w.useState("manual"),[N,k]=w.useState(!1),[E,T]=w.useState(null),I=w.useCallback(async()=>{u(!0),g(null);try{const O=await pe(`/api/patients/${e}`);if(!O.ok){const H=await O.json();throw new Error(H.message||"Failed to fetch patient details")}const $=await O.json();i($);const B=await pe("/api/subscriptions");if(!B.ok){const H=await B.json();throw new Error(H.message||"Failed to fetch subscription plans")}const q=await B.json();o(q.filter(H=>H.status==="active"))}catch(O){console.error("Error fetching data:",O),g(`Failed to load data: ${O.message}`)}finally{u(!1)}},[e]);w.useEffect(()=>{e?I():(g("Patient ID is missing."),u(!1))},[e,I]);const D=(O,$)=>{const B=new Date(O),q=$.interval||1;switch($.period){case"daily":B.setDate(O.getDate()+q);break;case"weekly":B.setDate(O.getDate()+q*7);break;case"monthly":B.setMonth(O.getMonth()+q);break;case"yearly":B.setFullYear(O.getFullYear()+q);break;default:console.warn(`Unknown subscription period: ${$.period}. Defaulting to 1 month.`),B.setMonth(O.getMonth()+1)}return B},U=async()=>{if(!e||!l){T("Please select a subscription plan.");return}const O=a.find($=>$.id===l);if(!O){T("Selected plan details not found.");return}k(!0),T(null);try{const $=new Date,B=D($,O);if(b==="manual"){const q={subscription_plan_id:l,subscription_status:"active",subscription_start_date:$.toISOString(),subscription_end_date:B.toISOString(),subscription_payment_method:"manual"},H=await pe(`/api/patients/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)});if(!H.ok){const F=await H.json();throw new Error(F.message||"Failed to start subscription manually")}alert(`Subscription started successfully for ${t==null?void 0:t.name} (Manual Payment)!`),n("/all-patients")}else if(b==="razorpay"){console.log("Initiating Razorpay subscription for plan:",O);const q=await sne(e,l);if(q&&q.short_url)window.location.href=q.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch($){console.error("Error starting subscription:",$),T(`Failed to start subscription: ${$.message}`),k(!1)}};return d?r.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):p?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:p})]}),r.jsxs("button",{onClick:()=>n(-1),className:"all-patients-back-button",children:[r.jsx(Qt,{size:16})," ","Back"]})]}):t?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("button",{onClick:()=>n(-1),className:"all-patients-back-button",children:[r.jsx(Qt,{size:16})," ","Back"]}),r.jsxs("h1",{children:[r.jsx(Sh,{size:28})," ","Start Subscription for ",t.name]}),E&&r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",r.jsx("span",{children:E})]}),r.jsxs("div",{className:"subscription-form",children:[" ",r.jsx("h2",{children:"Available Subscription Plans"}),a.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:a.map(O=>r.jsxs("div",{className:`subscription-plan-card ${l===O.id?"selected-plan":""}`,onClick:()=>f(O.id),children:[r.jsx("h3",{children:O.name}),r.jsxs("p",{className:"price",children:["",O.price]}),r.jsxs("p",{className:"duration",children:["Every ",O.interval," ",O.period,O.interval>1?"s":""]}),O.description&&r.jsx("p",{children:O.description})]},O.id))})]}),r.jsxs("div",{className:"subscription-form mb-6",children:[" ",r.jsx("h2",{children:"Select Payment Method"}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:b==="manual",onChange:()=>v("manual"),className:"mr-2"}),r.jsx("span",{children:"Cash (Manual)"})]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:b==="razorpay",onChange:()=>v("razorpay"),className:"mr-2"}),r.jsx("span",{children:"Razorpay"})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:U,disabled:!l||N||a.length===0,className:"subscription-btn",children:[N&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),N?"Starting...":"Start Subscription"]})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Warning: "}),r.jsx("span",{children:"Patient not found."})]}),r.jsxs("button",{onClick:()=>n(-1),className:"all-patients-back-button",children:[r.jsx(Qt,{size:16}),"Back"]})]})},dne=()=>{const e=Nt(),[n,t]=w.useState([]),[i,a]=w.useState(!1),[o,l]=w.useState(null),[f,d]=w.useState(null),u=w.useCallback(async()=>{a(!0),l(null);try{const g=await uw();t(g)}catch(g){l(g.message||"Failed to fetch clinic subscription plans."),d({type:"error",message:g.message||"Failed to fetch plans."})}finally{a(!1)}},[]);w.useEffect(()=>{u()},[u]),w.useEffect(()=>{if(f){const g=setTimeout(()=>d(null),5e3);return()=>clearTimeout(g)}},[f]);const p=async g=>{if(d(null),l(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){a(!0),l(null),d(null);try{await xO(g),d({type:"success",message:"Clinic plan deactivated successfully!"}),u()}catch(b){l(b.message||"Failed to deactivate clinic plan."),d({type:"error",message:b.message||"Failed to deactivate plan."})}finally{a(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[f&&r.jsxs("div",{className:`${f.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[f.type==="success"?r.jsx(ls,{size:18,className:"mr-2 text-green-500"}):r.jsx(Ri,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:f.message})]}),r.jsx("button",{onClick:()=>d(null),className:`${f.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(ci,{size:16})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(Qt,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),r.jsxs("button",{onClick:()=>e("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[r.jsx(Ph,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),i&&n.length===0&&r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"loading-animation-container",style:{height:"auto",margin:"20px 0"},children:r.jsx("div",{className:"breathing-ball",style:{width:"25px",height:"25px"}})}),r.jsx("div",{className:"mt-2 text-gray-600 text-md font-medium",children:"Loading clinic plans..."})]})}),!i&&o&&n.length===0&&r.jsx("p",{className:"text-center text-red-500",children:o}),n.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:n.map(g=>r.jsxs("tr",{children:[r.jsx("td",{children:g.name}),r.jsxs("td",{children:["",Number(g.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",g.interval>1?g.interval:""," ",g.period,g.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${g.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>e(`/dashboard/clinic-subscriptions/edit/${g.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(_d,{size:16,className:"inline-block"})}),g.status==="active"&&r.jsx("button",{onClick:()=>p(g.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:i,children:r.jsx(Sr,{size:16,className:"inline-block"})})]})]},g.id))})]})}),!i&&n.length===0&&!o&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},fne=()=>{const e=Nt(),[n,t]=w.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[i,a]=w.useState(!1),[o,l]=w.useState(null),[f,d]=w.useState(null);w.useEffect(()=>{if(f){const b=setTimeout(()=>d(null),5e3);return()=>clearTimeout(b)}},[f]);const u=b=>{const{name:v,value:N,type:k}=b.target;t(E=>({...E,[v]:k==="number"?parseFloat(N):N}))},p=async b=>{if(b.preventDefault(),a(!0),l(null),d(null),!n.name||!n.price||!n.period||n.interval===void 0||n.interval<=0){l("Please fill in all required fields (Name, Price, Period, Interval > 0)."),a(!1);return}try{await gO(n),d({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{e("/dashboard/clinic-subscriptions")},2e3)}catch(v){const N=v.message||"Failed to create clinic plan.";l(N),d({type:"error",message:N})}finally{a(!1)}},g=()=>{e(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[f&&r.jsxs("div",{className:`${f.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[f.type==="success"?r.jsx(ls,{size:18,className:"mr-2 text-green-500"}):r.jsx(Ri,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:f.message})]}),r.jsx("button",{onClick:()=>d(null),className:`${f.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(ci,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Clinic Subscription Plan"}),o&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:o}),r.jsxs("form",{onSubmit:p,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:n.description||"",onChange:u})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:n.price||"",onChange:u,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:n.period||"monthly",onChange:u,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:n.interval||1,onChange:u,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:n.razorpay_plan_id||"",onChange:u})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:g,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:i,className:"subscription-btn",children:[i?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,i?"Creating...":"Create Plan"]})]})]})]})]})},hne=()=>{const{id:e}=qr(),n=Nt(),[t,i]=w.useState(null),[a,o]=w.useState({}),[l,f]=w.useState(!1),[d,u]=w.useState(!0),[p,g]=w.useState(null),[b,v]=w.useState(null),N=w.useCallback(async()=>{if(!e){g("Plan ID is missing."),u(!1);return}u(!0),g(null);try{const I=await mO(e);i(I),o({name:I.name,description:I.description||"",price:Number(I.price),period:I.period,interval:Number(I.interval),razorpay_plan_id:I.razorpay_plan_id||"",status:I.status})}catch(I){g(I.message||"Failed to fetch clinic plan details."),v({type:"error",message:I.message||"Failed to fetch plan details."})}finally{u(!1)}},[e]);w.useEffect(()=>{N()},[N]),w.useEffect(()=>{if(b){const I=setTimeout(()=>v(null),5e3);return()=>clearTimeout(I)}},[b]);const k=I=>{const{name:D,value:U,type:O}=I.target;o($=>({...$,[D]:O==="number"?parseFloat(U):U}))},E=async I=>{if(I.preventDefault(),!e){g("Plan ID is missing.");return}if(f(!0),g(null),v(null),!a.name||!a.price||!a.period||a.interval===void 0||a.interval<=0){g("Please fill in all required fields (Name, Price, Period, Interval > 0)."),f(!1);return}try{await yO(e,a),v({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{n(-1)},2e3)}catch(D){const U=D.message||"Failed to update clinic plan.";g(U),v({type:"error",message:U})}finally{f(!1)}},T=()=>{n(-1)};return d?r.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):p&&!t?r.jsx("div",{className:"p-6 text-center text-red-500",children:p}):t?r.jsxs("div",{className:"subscription-page-container",children:[b&&r.jsxs("div",{className:`${b.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[b.type==="success"?r.jsx(ls,{size:18,className:"mr-2"}):r.jsx(Ri,{size:18,className:"mr-2"}),r.jsx("span",{children:b.message})]}),r.jsx("button",{onClick:()=>v(null),className:"ml-4",children:r.jsx(ci,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Clinic Subscription Plan"}),p&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:p}),r.jsxs("form",{onSubmit:E,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:a.name||"",onChange:k,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:a.description||"",onChange:k})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:a.price!==void 0?a.price:"",onChange:k,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:a.period||"monthly",onChange:k,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:a.interval!==void 0?a.interval:"",onChange:k,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:a.razorpay_plan_id||"",onChange:k})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:a.status||"active",onChange:k,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:T,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:l,className:"subscription-btn",children:[l?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,l?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},pne=()=>{const e=Nt(),[n,t]=w.useState([]),[i,a]=w.useState(""),[o,l]=w.useState(!0),[f,d]=w.useState(null),[u,p]=w.useState(!1),[g,b]=w.useState(null),v=w.useCallback(async()=>{d(null);try{const E=(await uw()).filter(T=>T.status==="active");t(E),E.length>0&&!i&&a(E[0].id)}catch(k){console.error("Error fetching plans:",k),d(`Failed to load subscription plans: ${k.message}`)}},[]);w.useEffect(()=>{(async()=>{l(!0);try{const E=await vO();if(E&&E.short_url){window.location.href=E.short_url,d("You have a pending subscription. Redirecting to payment...");return}await v()}catch(E){console.error("Error during initial page load:",E),d(`An unexpected error occurred: ${E.message}`)}finally{l(!1)}})()},[v]);const N=async()=>{if(!i){b("Please select a clinic subscription plan.");return}const k=n.find(E=>E.id===i);if(!k){b("Selected plan details not found.");return}p(!0),b(null);try{console.log("Initiating Razorpay clinic subscription for plan:",k);const E=await bO(i);if(E&&E.short_url)window.location.href=E.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(E){console.error("Error starting clinic subscription:",E),b(`Failed to start clinic subscription: ${E.message}`),p(!1)}};return o?r.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):f?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:f})]}),r.jsxs("button",{onClick:()=>e(-1),className:"all-patients-back-button",children:[r.jsx(Qt,{size:16}),"Back"]})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("button",{onClick:()=>e(-1),className:"all-patients-back-button",children:[r.jsx(Qt,{size:16}),"Back"]}),r.jsxs("h1",{children:[r.jsx(iI,{size:28}),"Buy Pro Plan for Clinic"]}),g&&r.jsx("div",{className:"error-alert-subscription",role:"alert",children:r.jsx("span",{children:g})}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h2",{children:"Available Pro Plans"}),n.length===0?r.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:n.map(k=>r.jsxs("div",{className:`subscription-plan-card ${i===k.id?"selected-plan":""}`,onClick:()=>a(k.id),children:[r.jsx("h3",{children:k.name}),r.jsxs("p",{className:"price",children:["",Number(k.price).toFixed(2)]}),r.jsxs("p",{className:"duration",children:["Every ",k.interval," ",k.period,k.interval>1?"s":""]}),k.description&&r.jsx("p",{children:k.description})]},k.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:N,disabled:!i||u||n.length===0,className:"subscription-btn",children:[u&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),u?"Initiating Payment...":"Buy Pro Plan"]})})]})},mne=()=>{const e=Nt(),[n,t]=w.useState([]),[i,a]=w.useState(!0),[o,l]=w.useState(null),[f,d]=w.useState(!1),[u,p]=w.useState(!1),[g,b]=w.useState(null),[v,N]=w.useState({name:"",email:"",password:"",role:"user"}),[k,E]=w.useState({name:"",email:"",role:"",password:"",confirmPassword:""}),[T,I]=w.useState(""),[D,U]=w.useState(""),[O,$]=w.useState({}),[B,q]=w.useState(!1),[H,F]=w.useState(null),[L,Q]=w.useState([]),[ne,ie]=w.useState(""),[oe,Y]=w.useState(!1),[z,re]=w.useState(null);w.useEffect(()=>{const Ne=setTimeout(()=>{U(T)},500);return()=>{clearTimeout(Ne)}},[T]),w.useEffect(()=>{X(D)},[D]);const X=async(Ne="")=>{a(!0);try{const nt=Ne?`/api/users?search=${encodeURIComponent(Ne)}`:"/api/users",je=await(await pe(nt)).json();if(t(je),je.length>0){const ye=[...new Set(je.map(De=>De.clinic_id).filter(De=>!!De))],Ae={};await Promise.all(ye.map(async De=>{try{const Ve=await pO(De);Ae[De]=Ve}catch(Ve){console.error(`Failed to fetch subscription status for clinic ${De}`,Ve),Ae[De]={hasProPlan:!1}}})),$(Ae)}l(null)}catch(nt){l("Failed to fetch users."),console.error(nt)}finally{a(!1)}},P=async Ne=>{Ne.preventDefault();try{await pe("/users",{method:"POST",body:JSON.stringify(v)}),d(!1),N({name:"",email:"",password:"",role:"user"}),X()}catch(nt){l("Failed to add user."),console.error(nt)}},te=async Ne=>{if(Ne.preventDefault(),!g)return;const{password:nt,confirmPassword:ut,...je}=k,ye={...je};if(nt){if(nt.length<6){l("Password must be at least 6 characters long.");return}if(nt!==ut){l("Passwords do not match.");return}ye.password=nt}try{await pe(`/users/${g.id}`,{method:"PUT",body:JSON.stringify(ye)}),p(!1),b(null),E({...k,password:"",confirmPassword:""}),X()}catch(Ae){l("Failed to update user."),console.error(Ae)}},se=async Ne=>{if(window.confirm("Are you sure you want to delete this user?"))try{await pe(`/users/${Ne}`,{method:"DELETE"}),X()}catch(nt){l("Failed to delete user."),console.error(nt)}},M=Ne=>{b(Ne),E({name:Ne.name,email:Ne.email,role:Ne.role,password:"",confirmPassword:""}),p(!0)},fe=async()=>{Y(!0);try{const Ne=await uw();Q(Ne),Ne.length>0&&ie(Ne[0].id),re(null)}catch(Ne){re("Failed to fetch subscription plans."),console.error(Ne)}finally{Y(!1)}},we=Ne=>{F(Ne),q(!0),fe()},ce=async Ne=>{if(Ne.preventDefault(),!H||!ne){l("Please select a clinic and a plan.");return}try{await pe("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:H,planId:ne})}),q(!1),F(null),ie(""),X(),l(null)}catch(nt){l("Failed to manually activate clinic subscription."),console.error(nt)}},Le=async Ne=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await hO(Ne),X(),l(null)}catch(nt){l("Failed to cancel subscription."),console.error(nt)}};return i?r.jsx("div",{children:"Loading users..."}):o?r.jsx("div",{className:"error-message",children:o}):r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsxs("button",{onClick:()=>e(-1),className:"back-button",children:[r.jsx(Qt,{size:16}),"Back"]}),r.jsx("h1",{children:"User Management"})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:T,onChange:Ne=>I(Ne.target.value),className:"search-input"}),r.jsx("button",{onClick:()=>d(!0),className:"add-user-button",children:"Add New User"})]}),f&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>d(!1),children:""}),r.jsx("h2",{children:"Add New User"}),r.jsxs("form",{onSubmit:P,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:v.name,onChange:Ne=>N({...v,name:Ne.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:v.email,onChange:Ne=>N({...v,email:Ne.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",value:v.password,onChange:Ne=>N({...v,password:Ne.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:v.role,onChange:Ne=>N({...v,role:Ne.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Add User"})]})]})}),u&&g&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>p(!1),children:""}),r.jsx("h2",{children:"Edit User"}),r.jsxs("form",{onSubmit:te,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:k.name,onChange:Ne=>E({...k,name:Ne.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:k.email,onChange:Ne=>E({...k,email:Ne.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:k.role,onChange:Ne=>E({...k,role:Ne.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"New Password (optional):"}),r.jsx("input",{type:"password",value:k.password,onChange:Ne=>E({...k,password:Ne.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm New Password:"}),r.jsx("input",{type:"password",value:k.confirmPassword,onChange:Ne=>E({...k,confirmPassword:Ne.target.value})})]}),r.jsx("button",{type:"submit",children:"Update User"})]})]})}),B&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>q(!1),children:""}),r.jsx("h2",{children:"Select Subscription Plan for Clinic"}),oe&&r.jsx("div",{children:"Loading plans..."}),z&&r.jsx("div",{className:"error-message",children:z}),!oe&&!z&&L.length===0&&r.jsx("div",{children:"No active subscription plans available."}),!oe&&!z&&L.length>0&&r.jsxs("form",{onSubmit:ce,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Plan:"}),r.jsx("select",{value:ne,onChange:Ne=>ie(Ne.target.value),required:!0,children:L.map(Ne=>r.jsxs("option",{value:Ne.id,children:[Ne.name," - $",Ne.price,"/",Ne.interval," ",Ne.period]},Ne.id))})]}),r.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:n.map(Ne=>{const nt=Ne.clinic_id||"N/A",ut=nt!=="N/A"?O[nt]:null,je=(ut==null?void 0:ut.hasProPlan)??!1,ye=je?"PRO":"Standard";return r.jsxs("tr",{children:[r.jsx("td",{children:Ne.name}),r.jsx("td",{children:Ne.email}),r.jsx("td",{children:Ne.role}),r.jsx("td",{children:nt}),r.jsx("td",{children:nt!=="N/A"?r.jsx("span",{className:je?"pro-badge":"standard-badge",children:ye}):"N/A"}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>M(Ne),className:"edit-button",children:"Edit"}),r.jsx("button",{onClick:()=>se(Ne.id),className:"delete-button",children:"Delete"}),Ne.clinic_id&&!je&&r.jsx("button",{onClick:()=>we(Ne.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),Ne.clinic_id&&je&&r.jsx("button",{onClick:()=>Le(Ne.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},Ne.id)})})]})]})},gne=()=>r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("h1",{className:"admin-panel-title",children:[r.jsx(ng,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),r.jsxs("div",{className:"admin-panel-grid",children:[r.jsxs(os,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[r.jsx(wd,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Clinic Subscription Plans"}),r.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),r.jsxs(os,{to:"/dashboard/users",className:"admin-panel-card",children:[r.jsx(Vm,{size:48,className:"card-icon"}),r.jsx("h2",{children:"User Management"}),r.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]})]})]}),Dm="tutorialCurrentStep",vA=({onActionComplete:e,onStaffAdded:n,requiredRole:t})=>{const[i,a]=w.useState(""),[o,l]=w.useState(""),[f,d]=w.useState(""),[u,p]=w.useState(!1),g=t||"receptionist";w.useEffect(()=>{a(t==="lab"?"Lab":t==="pharmacy"?"Pharmacy":"")},[t]);const b=async()=>{if(!i||!o||!f){e(!1,"Please fill all fields.");return}p(!0);try{const v=await pe("/api/staff",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,email:o,role:g,password:f})});if(v.ok)e(!0,`Successfully added "${i}" as a ${g}!`),a(""),l(""),d(""),n&&n(g);else{const N=await v.json();e(!1,`Failed to add staff: ${N.message||v.statusText}`)}}catch(v){console.error("Error adding staff:",v),e(!1,`Error adding staff: ${v instanceof Error?v.message:String(v)}`)}finally{p(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component",children:[r.jsx("h3",{children:"Add a New Staff Member"}),r.jsx("input",{type:"text",placeholder:"Staff Name",value:i,onChange:v=>a(v.target.value),className:"tutorial-input",disabled:u}),r.jsx("input",{type:"email",placeholder:"Email",value:o,onChange:v=>l(v.target.value),className:"tutorial-input",disabled:u}),r.jsx("input",{type:"password",placeholder:"Password",value:f,onChange:v=>d(v.target.value),className:"tutorial-input",disabled:u}),r.jsx("input",{type:"text",placeholder:"Role",value:g==="lab"?"Lab Technician":g==="pharmacy"?"Pharmacist":"Receptionist",className:"tutorial-input",disabled:!0}),r.jsx("button",{onClick:b,className:"tutorial-button primary",disabled:u,children:u?"Adding...":"Add Staff"})]})},yne=({onActionComplete:e})=>{const[n,t]=w.useState(!1),[i,a]=w.useState([]),[o,l]=w.useState(!1),f=async()=>{t(!0);try{const d=await pe("/api/drugs/import-defaults",{method:"POST"});if(d.ok){const u=await d.json(),p=u.drugs?u.drugs.map(g=>g.name):[];a(p),l(!0),e(!0,`Default medications imported: Added ${u.details.added}, Updated ${u.details.updated}.`,"pharmacyImport")}else{const u=await d.json();e(!1,`Failed to import default medications: ${u.message||d.statusText}`)}}catch(d){console.error("Error importing default medications:",d),e(!1,`Error importing default medications: ${d instanceof Error?d.message:String(d)}`)}finally{t(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component",children:[r.jsx("h3",{children:"Import Default Medications"}),r.jsx("p",{children:"Click the button below to populate your pharmacy inventory with a list of common medications."}),r.jsx("button",{onClick:f,className:"tutorial-button primary",disabled:n,children:n?"Importing...":r.jsxs(r.Fragment,{children:[" ",r.jsx("i",{className:"fas fa-pills"})," Import Default Drugs"]})}),o&&i.length>0&&r.jsxs("div",{className:"imported-drugs-list",children:[r.jsx("h4",{children:"Medications Imported:"}),r.jsx("ul",{children:i.map((d,u)=>r.jsx("li",{children:d},u))})]})]})},xne=({onActionComplete:e})=>{const[n,t]=w.useState(!1),[i,a]=w.useState([]),[o,l]=w.useState(!1),f=async()=>{t(!0);try{const d=await pe("/api/lab-tests/import-defaults",{method:"POST"});if(d.ok){const u=await d.json(),p=u.tests?u.tests.map(g=>g.name):[];a(p),l(!0),e(!0,`Default lab tests imported: Added ${u.details.added}, Updated ${u.details.updated}.`,"labImport")}else{const u=await d.json();e(!1,`Failed to import default lab tests: ${u.message||d.statusText}`)}}catch(d){console.error("Error importing default lab tests:",d),e(!1,`Error importing default lab tests: ${d instanceof Error?d.message:String(d)}`)}finally{t(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component",children:[r.jsx("h3",{children:"Import Default Lab Tests"}),r.jsx("p",{children:"Click the button below to populate your lab test inventory with a list of common tests."}),r.jsx("button",{onClick:f,className:"tutorial-button primary",disabled:n,children:n?"Importing...":r.jsxs(r.Fragment,{children:[" ",r.jsx("i",{className:"fas fa-flask"})," Import Default Lab Tests"]})}),o&&i.length>0&&r.jsxs("div",{className:"imported-drugs-list",children:[r.jsx("h4",{children:"Tests Imported:"}),r.jsx("ul",{children:i.map((d,u)=>r.jsx("li",{children:d},u))})]})]})},Im=[{title:"Welcome to Your Admin Dashboard!",description:"This quick tour will guide you through essential features to get your clinic set up.",actionText:"Let's Start!",actionPath:null,component:null},{title:"Step 1: Manage Pharmacy Inventory",description:"Set up your pharmacy by adding drugs, managing stock levels, and importing default drug lists. This ensures smooth prescription fulfillment. Import default medications now!",actionText:"Go to Pharmacy Inventory",actionPath:"/dashboard/inventory",component:yne},{title:"Step 2: Manage Lab Test Inventory",description:"Configure your laboratory by adding available lab tests and importing default test lists. This is crucial for accurate diagnostics. Import default lab tests now!",actionText:"Go to Lab Test Inventory",actionPath:"/lab-inventory",component:xne},{title:"Step 3: Add Staff Members (Optional)",description:"You can add your clinic's staff, including doctors, receptionists, lab technicians, and pharmacists. Each role has specific permissions. You can skip this step for now.",actionText:"Go to Staff Management",actionPath:null,component:vA},{title:"You're All Set!",description:"You've completed the basic setup tour. Now, try out the AI-powered complaint analysis feature!",actionText:"Try the AI!",actionPath:"/edit-complaints",component:null}],bne=({onClose:e,onMarkAsSeen:n})=>{const[t,i]=w.useState(()=>{const O=localStorage.getItem(Dm);return O?parseInt(O,10):0}),[a,o]=w.useState(null),[l,f]=w.useState(null),[d,u]=w.useState(!1),[p,g]=w.useState(null),[b,v]=w.useState(4),N=Nt();w.useEffect(()=>{if(localStorage.setItem(Dm,t.toString()),o(null),f(null),t===0){v(4);const O=setTimeout(()=>{i(B=>B+1)},4e3),$=setInterval(()=>{v(B=>B-1)},1e3);return()=>{clearTimeout(O),clearInterval($)}}},[t]);const k=(O,$,B)=>{f(O),o($),O&&(B==="pharmacyImport"||B==="labImport")&&i(q=>q+1)},E=()=>{},T=()=>{n(),e(),localStorage.removeItem(Dm)},I=async()=>{const O=Im[t];if(U&&O.actionPath==="/edit-complaints"){u(!0),g(null);try{const $=await pe("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"New Patient - AI Entry",age:null,gender:null,phone:null,address:null})});if(!$.ok){const Q=await $.text();throw new Error(`Failed to create patient: ${Q||$.statusText} (${$.status})`)}const B=await $.json();if(!B||!B.id)throw new Error("Failed to create new patient or retrieve patient ID.");const q=B.id,H=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:q,complaint:""})});if(!H.ok){const Q=await H.text();throw new Error(`Failed to create queue entry: ${Q||H.statusText} (${H.status})`)}const F=await H.json();if(!F||!F.id)throw new Error("Failed to create new complaint record or retrieve record ID.");const L=F.id;N(`/dashboard/edit-complaint/${L}`),e(),n(),localStorage.removeItem(Dm)}catch($){console.error("Error starting new AI complaint:",$);const B=`Error: ${$.message||"Failed to start new AI complaint process."}`;g(B)}finally{u(!1)}}else O.actionPath&&(N(O.actionPath),e(),t===Im.length-1&&(n(),localStorage.removeItem(Dm)))},D=Im[t],U=t===Im.length-1;return r.jsx("div",{className:"tutorial-modal-overlay",children:r.jsxs("div",{className:"tutorial-modal-content",children:[r.jsx("h2",{children:D.title}),r.jsx("p",{children:D.description}),D.component&&r.jsxs("div",{className:"tutorial-interactive-area",children:[t===3?r.jsx(vA,{onActionComplete:k,onStaffAdded:E,requiredRole:null}):r.jsx(D.component,{onActionComplete:k}),a&&r.jsx("p",{className:`tutorial-message ${l?"success":"error"}`,children:a})]}),p&&r.jsx("p",{className:"tutorial-message error",children:p})," ",r.jsxs("div",{className:"tutorial-modal-actions",children:[D.actionPath&&r.jsx("button",{onClick:I,className:"tutorial-button action",disabled:d,children:d?"Creating AI Patient...":D.actionText}),t===3&&r.jsx("button",{onClick:()=>i(t+1),className:"tutorial-button secondary",children:"Next Step"}),r.jsx("button",{onClick:T,className:"tutorial-button secondary",disabled:d,children:"Skip Tutorial"})]}),t===0&&r.jsxs("div",{className:"tutorial-countdown-indicator",children:["Next step in ",b," seconds..."]}),r.jsxs("div",{className:"tutorial-step-indicator",children:["Step ",t+1," of ",Im.length]})]})})},vne=(e,n,t)=>{const i=Math.abs(e.getTime()-n.getTime());return Math.ceil(i/(1e3*60*60*24))<=t},E_=e=>{if(e.match(/^\d{4}-\d{2}-\d{2}$/))return new Date(e);const n=e.split("/");if(n.length===3){const t=parseInt(n[0],10),i=parseInt(n[1],10)-1,a=parseInt(n[2],10),o=new Date(a,i,t),l=parseInt(n[0],10)-1,f=parseInt(n[1],10),d=parseInt(n[2],10),u=new Date(d,l,f),p=!isNaN(o.getTime()),g=!isNaN(u.getTime());if(p&&g)return o;if(p)return o;if(g)return u}return new Date(e)},wA=()=>{const[e,n]=w.useState([]),[t,i]=w.useState(!0),[a,o]=w.useState(null),[l,f]=w.useState(""),[d,u]=w.useState(""),[p,g]=w.useState(1),[b]=w.useState(10),v=new Date,N=Nt();w.useEffect(()=>{(async()=>{i(!0);try{const F=await pe("/api/pharmacy-orders/refill-reminders");if(F.ok){const L=await F.json();n(L)}else o("Failed to fetch refill reminders.")}catch{o("An error occurred while fetching data.")}finally{i(!1)}})()},[]);const k=q=>{f(q.target.value),g(1)},E=q=>{u(q.target.value),g(1)},T=e.filter(q=>{const H=l?q.medicationRefillDates.some(L=>{const Q=E_(L.refillDate);return!isNaN(Q.getTime())&&Q.toISOString().split("T")[0]===l}):!0,F=d?q.patientName.toLowerCase().includes(d.toLowerCase())||q.patientPhoneNumber.includes(d)||q.items.some(L=>L.name.toLowerCase().includes(d.toLowerCase())):!0;return H&&F}),I=p*b,D=I-b,U=T.slice(D,I),O=Math.ceil(T.length/b),$=q=>g(q),B=async q=>{try{const H=await pe(`/api/queue/patient/${q}/latest`);if(H.ok){const F=await H.json();if(F!=null&&F._id)N(`/dashboard/edit-complaint/${F._id}`);else{const L=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:q})});if(L.ok){const Q=await L.json();Q!=null&&Q.id&&N(`/dashboard/edit-complaint/${Q.id}`)}}}}catch(H){console.error("Error handling row click:",H),o("Failed to navigate to patient complaint.")}};return t?r.jsx("div",{children:"Loading..."}):a?r.jsx("div",{children:a}):r.jsxs("div",{className:"refill-reminders-container",children:[r.jsx("h1",{children:"Refill Reminders"}),r.jsxs("div",{className:"controls-container",children:[r.jsxs("div",{className:"filter-container",children:[r.jsx("label",{htmlFor:"refillDate",children:"Filter by Refill Date: "}),r.jsx("input",{type:"date",id:"refillDate",value:l,onChange:k})]}),r.jsxs("div",{className:"search-container",children:[r.jsx("label",{htmlFor:"search",children:"Search: "}),r.jsx("input",{type:"text",id:"search",placeholder:"Search by patient name, phone, or medication",value:d,onChange:E})]})]}),r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Patient Phone Number"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{children:"Refill Dates"})]})}),r.jsx("tbody",{children:U.length>0?U.map(q=>r.jsxs("tr",{onClick:()=>B(q.patientId),style:{cursor:"pointer"},children:[r.jsx("td",{children:q.patientName}),r.jsx("td",{children:q.patientPhoneNumber}),r.jsxs("td",{children:[r.jsx("ul",{children:q.items.map((H,F)=>r.jsxs("li",{children:[H.name," (Qty: ",H.quantity,")",H.tabletsPerDay&&r.jsxs("span",{children:[" - ",H.tabletsPerDay," / day"]}),H.numberOfDays&&r.jsxs("span",{children:[" for ",H.numberOfDays," days"]})]},F))}),r.jsxs("div",{children:["Last Updated: ",new Date(q.updatedAt).toLocaleDateString()]}),q.prescription_for_unavailable_drugs&&r.jsxs("div",{className:"unavailable-prescription",children:[r.jsx("strong",{children:"Unavailable:"})," ",q.prescription_for_unavailable_drugs]})]}),r.jsx("td",{children:r.jsx("ul",{children:q.medicationRefillDates.map((H,F)=>{const L=E_(H.refillDate),Q=!isNaN(L.getTime())&&vne(L,v,2);return r.jsxs("li",{className:Q?"highlight-refill-date":"",children:[H.name,": ",isNaN(L.getTime())?"Invalid Date":L.toLocaleDateString()]},F)})})})]},q.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:"No refill reminders found."})})})]}),r.jsxs("div",{className:"pagination-container",children:[r.jsx("button",{onClick:()=>$(p-1),disabled:p===1,children:"Previous"}),Array.from({length:O},(q,H)=>r.jsx("button",{onClick:()=>$(H+1),className:p===H+1?"active":"",children:H+1},H+1)),r.jsx("button",{onClick:()=>$(p+1),disabled:p===O,children:"Next"})]})]})},wne=()=>{const e=Nt(),n=nr();return w.useEffect(()=>{const t=new URLSearchParams(n.search),i=t.get("token"),a=t.get("caseDetails");i?(async()=>{try{const l=await pe(`/api/patients?search=${i}&limit=1`);if(!l.ok)throw new Error("Failed to fetch patient by token");const d=(await l.json()).patients[0];if(!d)throw new Error("Patient with the given token not found");const u=await pe(`/api/queue/patient/${d.id}/latest`);if(u.ok){const b=await u.json();if(b!=null&&b._id){e(`/dashboard/edit-complaint/${b._id}`,{state:{initialComplaint:a}});return}}const p=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:d.id,complaint:a})});if(!p.ok)throw new Error("Failed to create queue entry");const g=await p.json();if(g!=null&&g.id)e(`/dashboard/edit-complaint/${g.id}`,{state:{initialComplaint:a}});else throw new Error("Failed to get ID from new queue entry.")}catch(l){console.error("Error handling complaint URL:",l),e("/dashboard/search-patient")}})():e("/dashboard/search-patient")},[n,e]),r.jsx("div",{children:"Loading..."})},Sne=()=>{const[e,n]=w.useState([]),[t,i]=w.useState(!0),[a,o]=w.useState(null),l=w.useCallback(async()=>{i(!0),o(null);try{const u=await pe("/api/notifications?all=true");if(u.ok){const g=(await u.json()).sort((b,v)=>{const N={expired_drug:1,near_expiry_drug:2,low_stock:3},k=N[b.type]||99,E=N[v.type]||99;return k!==E?k-E:new Date(v.created_at).getTime()-new Date(b.created_at).getTime()});n(g)}else o("Failed to fetch notifications."),console.error("Failed to fetch notifications:",u.statusText)}catch(u){o("Error fetching notifications."),console.error("Error fetching notifications:",u)}finally{i(!1)}},[]);w.useEffect(()=>{l()},[l]);const f=async u=>{try{const p=await pe(`/api/notifications/${u}/read`,{method:"PUT"});p.ok?n(g=>g.map(b=>b.id===u?{...b,is_read:!0}:b)):console.error("Failed to mark notification as read:",p.statusText)}catch(p){console.error("Error marking notification as read:",p)}},d=async()=>{try{const u=e.filter(g=>!g.is_read).map(g=>g.id);if(u.length===0)return;const p=await pe("/api/notifications/mark-all-read",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationIds:u})});p.ok?n(g=>g.map(b=>({...b,is_read:!0}))):console.error("Failed to mark all notifications as read:",p.statusText)}catch(u){console.error("Error marking all notifications as read:",u)}};return t?r.jsx("div",{className:"notifications-page-container",children:"Loading notifications..."}):a?r.jsx("div",{className:"notifications-page-container error-message",children:a}):r.jsxs("div",{className:"notifications-page-container",children:[r.jsx("h2",{className:"notifications-page-title",children:"All Notifications"}),r.jsx("div",{className:"notifications-actions",children:r.jsx("button",{onClick:d,disabled:e.every(u=>u.is_read),className:"mark-all-read-button",children:"Mark All As Read"})}),e.length===0?r.jsx("p",{className:"no-notifications-message",children:"No notifications to display."}):r.jsx("ul",{className:"notifications-list",children:e.map(u=>r.jsxs("li",{className:`notification-item ${u.is_read?"read":"unread"}`,children:[r.jsxs("div",{className:"notification-content",children:[r.jsxs("span",{className:"notification-type",children:[u.type.replace(/_/g," "),": "]}),u.message]}),r.jsxs("div",{className:"notification-meta",children:[r.jsx("span",{className:"notification-timestamp",children:new Date(u.created_at).toLocaleString()}),!u.is_read&&r.jsx("button",{onClick:()=>f(u.id),className:"mark-read-button",children:"Mark as Read"})]})]},u.id))})]})},T_=()=>{const e=Nt(),[n,t]=w.useState([]),[i,a]=w.useState(!0),[o,l]=w.useState(null),[f,d]=w.useState(!1),[u,p]=w.useState(!1),[g,b]=w.useState(!1),[v,N]=w.useState(!1),[k,E]=w.useState(!1),[T,I]=w.useState(null),[D,U]=w.useState([]),[O,$]=w.useState(null),[B,q]=w.useState(""),[H,F]=w.useState(""),[L,Q]=w.useState(""),[ne,ie]=w.useState(""),[oe,Y]=w.useState(""),[z,re]=w.useState(""),[X,P]=w.useState(""),[te,se]=w.useState(""),[M,fe]=w.useState(""),[we,ce]=w.useState(""),[Le,Ne]=w.useState(""),nt=w.useCallback(async()=>{a(!0),l(null);try{const J=await pe("/api/distributors");if(!J.ok)throw new Error(`Failed to fetch distributors: ${J.statusText}`);const G=await J.json();t(G)}catch(J){console.error("Failed to fetch distributors:",J),l(J.message||"Failed to load distributors.")}finally{a(!1)}},[]);w.useEffect(()=>{nt()},[nt]);const ut=async J=>{J.preventDefault(),l(null);try{const G=await pe("/api/distributors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,contact_person:H,phone:L,email:ne,address:oe,gst_number:z,drug_license_number:X})});if(!G.ok){const K=await G.json();throw new Error(K.message||"Failed to add distributor.")}alert("Distributor added successfully!"),it(),nt()}catch(G){console.error("Error adding distributor:",G),l(G.message||"Failed to add distributor.")}},je=async J=>{if(J.preventDefault(),l(null),!!T)try{const G=await pe(`/api/distributors/${T.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,contact_person:H,phone:L,email:ne,address:oe,gst_number:z,drug_license_number:X})});if(!G.ok){const K=await G.json();throw new Error(K.message||"Failed to update distributor.")}alert("Distributor updated successfully!"),rt(),nt()}catch(G){console.error("Error updating distributor:",G),l(G.message||"Failed to update distributor.")}},ye=async()=>{if(l(null),!!T)try{const J=await pe(`/api/distributors/${T.id}`,{method:"DELETE"});if(!J.ok){const G=await J.json();throw new Error(G.message||"Failed to delete distributor.")}alert("Distributor deleted successfully!"),_t(),nt()}catch(J){console.error("Error deleting distributor:",J),l(J.message||"Failed to delete distributor.")}},Ae=w.useCallback(async J=>{l(null);try{const G=await pe(`/api/distributors/${J}/payments`);if(!G.ok)throw new Error(`Failed to fetch payments: ${G.statusText}`);const Se=(await G.json()).map(at=>({...at,order_value:parseFloat(at.order_value),amount_paid:parseFloat(at.amount_paid),balance_remaining:parseFloat(at.balance_remaining)}));U(Se);const Ee=await pe(`/api/distributors/${J}/balance`);if(!Ee.ok)throw new Error(`Failed to fetch balance: ${Ee.statusText}`);const Be=await Ee.json();$({totalOrderValue:parseFloat(Be.totalOrderValue),totalAmountPaid:parseFloat(Be.totalAmountPaid),remainingBalance:parseFloat(Be.remainingBalance)})}catch(G){console.error("Error fetching payments/balance:",G),l(G.message||"Failed to load payments or balance.")}},[]),De=async J=>{if(J.preventDefault(),l(null),!!T)try{const G=await pe(`/api/distributors/${T.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:te,order_value:parseFloat(M||"0"),amount_paid:parseFloat(we||"0"),notes:Le})});if(!G.ok){const K=await G.json();throw new Error(K.message||"Failed to add payment.")}alert("Payment added successfully!"),ze(),Ae(T.id)}catch(G){console.error("Error adding payment:",G),l(G.message||"Failed to add payment.")}},Ve=()=>{q(""),F(""),Q(""),ie(""),Y(""),re(""),P(""),l(null),d(!0)},it=()=>{d(!1)},Ke=J=>{I(J),q(J.name),F(J.contact_person||""),Q(J.phone||""),ie(J.email||""),Y(J.address||""),re(J.gst_number||""),P(J.drug_license_number||""),l(null),p(!0)},rt=()=>{p(!1),I(null)},Ft=J=>{I(J),l(null),b(!0)},_t=()=>{b(!1),I(null)},ve=J=>{I(J),Ae(J.id),l(null),N(!0)},qe=()=>{N(!1),I(null),U([]),$(null)},We=J=>{I(J),se(new Date().toISOString().split("T")[0]),fe("0"),ce("0"),Ne(""),l(null),E(!0)},ze=()=>{E(!1),I(null)};return i?r.jsx("div",{className:"loading-indicator",children:"Loading Distributors..."}):o?r.jsxs("div",{className:"error-indicator",children:["Error: ",o]}):r.jsxs("div",{className:"distributor-management-page",children:[r.jsxs("div",{className:"distributor-management-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:[r.jsx(Qt,{size:24})," Back"]}),r.jsx("h2",{children:"Distributor Management"})]}),(()=>{const J=n.reduce((K,Se)=>K+parseFloat(Se.remainingBalance||"0"),0),G=J>=0?"balance-positive":"balance-negative";return r.jsxs("div",{className:`total-balance-display ${G}`,children:[r.jsx("strong",{children:"Total Combined Balance:"})," ",J.toFixed(2)]})})(),r.jsxs("button",{onClick:Ve,className:"add-distributor-button",children:[r.jsx(as,{size:18}),"Add New Distributor"]})]}),r.jsx("div",{className:"distributor-table-container",children:r.jsxs("table",{className:"distributor-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Contact Person"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Address"}),r.jsx("th",{children:"GST Number"})," ",r.jsx("th",{children:"Drug License Number"})," ",r.jsx("th",{children:"Remaining Balance"})," ",r.jsx("th",{className:"actions-cell",children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsxs("tr",{children:[r.jsx("td",{colSpan:9,className:"no-results-message",children:"No distributors found."})," "]}):n.map(J=>r.jsxs("tr",{children:[r.jsx("td",{children:J.name}),r.jsx("td",{children:J.contact_person||"-"}),r.jsx("td",{children:J.phone||"-"}),r.jsx("td",{children:J.email||"-"}),r.jsx("td",{children:J.address||"-"}),r.jsx("td",{children:J.gst_number||"-"})," ",r.jsx("td",{children:J.drug_license_number||"-"})," ",r.jsxs("td",{className:parseFloat(J.remainingBalance||"0")>0?"balance-positive":"balance-negative",children:["",J.remainingBalance||"0.00"]})," ",r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsxs("button",{onClick:()=>ve(J),className:"action-text-button view-button",title:"View Payments & Balance",children:[r.jsx(X_,{size:16})," View Payments"]}),r.jsxs("button",{onClick:()=>We(J),className:"action-text-button add-payment-button",title:"Add Payment",children:[r.jsx(as,{size:16})," Add Payment"]}),r.jsx("button",{onClick:()=>Ke(J),className:"action-icon-button edit-button",title:"Edit Distributor",children:r.jsx(_d,{size:16})}),r.jsx("button",{onClick:()=>Ft(J),className:"action-icon-button delete-button",title:"Delete Distributor",children:r.jsx(Sr,{size:16})})]})})]},J.id))})]})}),f&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:it,className:"modal-close-button",children:""}),r.jsx("h3",{className:"modal-title",children:"Add New Distributor"}),o&&r.jsx("div",{className:"modal-error-message",children:o}),r.jsxs("form",{onSubmit:ut,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Name:"}),r.jsx("input",{type:"text",id:"name",value:B,onChange:J=>q(J.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"contact_person",value:H,onChange:J=>F(J.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"phone",value:L,onChange:J=>Q(J.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email:"}),r.jsx("input",{type:"email",id:"email",value:ne,onChange:J=>ie(J.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"address",children:"Address:"}),r.jsx("textarea",{id:"address",value:oe,onChange:J=>Y(J.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"gst_number",value:z,onChange:J=>re(J.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"drug_license_number",children:"Drug License Number:"}),r.jsx("input",{type:"text",id:"drug_license_number",value:X,onChange:J=>P(J.target.value)})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:it,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Add Distributor"})]})]})]})}),u&&T&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:rt,className:"modal-close-button",children:""}),r.jsx("h3",{className:"modal-title",children:"Edit Distributor"}),o&&r.jsx("div",{className:"modal-error-message",children:o}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"edit-name",children:"Name:"}),r.jsx("input",{type:"text",id:"edit-name",value:B,onChange:J=>q(J.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"edit-contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"edit-contact_person",value:H,onChange:J=>F(J.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"edit-phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"edit-phone",value:L,onChange:J=>Q(J.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"edit-email",children:"Email:"}),r.jsx("input",{type:"email",id:"edit-email",value:ne,onChange:J=>ie(J.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"edit-address",children:"Address:"}),r.jsx("textarea",{id:"edit-address",value:oe,onChange:J=>Y(J.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"edit-gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"edit-gst_number",value:z,onChange:J=>re(J.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"edit-drug_license_number",children:"Drug License Number:"}),r.jsx("input",{type:"text",id:"edit-drug_license_number",value:X,onChange:J=>P(J.target.value)})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:rt,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Save Changes"})]})]})]})}),g&&T&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:_t,className:"modal-close-button",children:""}),r.jsx("h3",{className:"modal-title",children:"Confirm Delete"}),r.jsxs("p",{children:['Are you sure you want to delete distributor "',T.name,'"?']}),o&&r.jsx("div",{className:"modal-error-message",children:o}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:_t,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ye,className:"button-delete",children:"Delete"})]})]})}),v&&T&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsx("button",{onClick:qe,className:"modal-close-button",children:""}),r.jsxs("h3",{className:"modal-title",children:["Payments & Balance for ",T.name]}),o&&r.jsx("div",{className:"modal-error-message",children:o}),O&&r.jsxs("div",{className:"balance-summary",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Total Order Value:"})," ",O.totalOrderValue.toFixed(2)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Total Amount Paid:"})," ",O.totalAmountPaid.toFixed(2)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Remaining Balance:"})," ",O.remainingBalance.toFixed(2)]})]}),r.jsx("h4",{children:"Payment History"}),D.length===0?r.jsx("p",{children:"No payments recorded for this distributor."}):r.jsx("div",{className:"table-responsive",children:r.jsxs("table",{className:"distributor-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Order Value"}),r.jsx("th",{children:"Amount Paid"}),r.jsx("th",{children:"Balance Remaining"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:D.map(J=>r.jsxs("tr",{children:[r.jsx("td",{children:new Date(J.payment_date).toLocaleDateString()}),r.jsxs("td",{children:["",J.order_value.toFixed(2)]}),r.jsxs("td",{children:["",J.amount_paid.toFixed(2)]}),r.jsxs("td",{children:["",J.balance_remaining.toFixed(2)]}),r.jsx("td",{children:J.notes||"-"})]},J.id))})]})}),r.jsx("div",{className:"modal-actions",children:r.jsx("button",{type:"button",onClick:qe,className:"button-cancel",children:"Close"})})]})}),k&&T&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ze,className:"modal-close-button",children:""}),r.jsxs("h3",{className:"modal-title",children:["Add Payment for ",T.name]}),o&&r.jsx("div",{className:"modal-error-message",children:o}),r.jsxs("form",{onSubmit:De,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_date",children:"Payment Date:"}),r.jsx("input",{type:"date",id:"payment_date",value:te,onChange:J=>se(J.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"order_value",children:"Order Value:"}),r.jsx("input",{type:"number",id:"order_value",value:M,onChange:J=>fe(J.target.value),step:"0.01"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"amount_paid",children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount_paid",value:we,onChange:J=>ce(J.target.value),step:"0.01"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",value:Le,onChange:J=>Ne(J.target.value)})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ze,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Add Payment"})]})]})]})})]})},Nne=({isOpen:e,onClose:n,excelHeaders:t,onConfirm:i,availableFields:a})=>{const[o,l]=w.useState({});if(w.useEffect(()=>{e&&d()},[e,t,a]),!e)return null;const f=(p,g)=>{l(b=>({...b,[p]:g}))},d=()=>{const p={};t.forEach(g=>{const b=a.map(N=>({name:N})),v=Om(g,b);v&&(p[g]=v.name)}),l(p)},u=()=>{const p={};for(const g in o)o[g]&&o[g]!=="none"&&(p[g]=o[g]);i(p),n()};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:n,className:"modal-close-button",children:r.jsx(ci,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Match File Columns"}),r.jsx("p",{className:"modal-description",children:'Please match the columns from your uploaded file to the corresponding fields in the drug inventory. You can use the "Auto Match" button for suggestions.'}),r.jsx("div",{className:"modal-actions-top",children:r.jsx("button",{type:"button",onClick:d,className:"button-auto-match",children:"Auto Match"})}),r.jsxs("div",{className:"column-mapping-grid",children:[r.jsx("div",{className:"grid-header",children:"Excel Column"}),r.jsx("div",{className:"grid-header",children:"App Field"}),t.map((p,g)=>r.jsxs(Rn.Fragment,{children:[r.jsx("div",{className:"excel-header-cell",children:p}),r.jsx("div",{className:"app-field-cell",children:r.jsxs("select",{value:o[p]||"",onChange:b=>f(p,b.target.value),className:"app-field-select",children:[r.jsx("option",{value:"",children:"-- Select Field --"}),r.jsx("option",{value:"none",children:"None (Ignore Column)"}),a.map((b,v)=>r.jsxs("option",{value:b,children:[b==="name"?"Composition Name":b==="brand_name"?"Brand Name":b==="price"?"MRP":b==="buying_price"?"Rate":b==="unit"?"Pack":b==="batch"?"Batch":b==="hsn_code"?"HSN Code":b==="mfg"?"MFG":b==="loose_quantity"?"Loose":b.replace(/_/g," ").replace(/\b\w/g,N=>N.toUpperCase())," "]},v))]})})]},g))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:n,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:u,className:"button-submit",children:"Confirm Mapping"})]})]})})},Cne=({isOpen:e,onClose:n,onDrugAddedToPurchase:t})=>{const[i,a]=w.useState({name:"",composition:"",description:"",price:0,quantity_in_stock:0,unit:"",expiry_date:"",buying_price:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null}),[o,l]=w.useState(null),[f,d]=w.useState(!1),[u,p]=w.useState(!1),g=w.useRef(null),b=w.useRef(null),v=w.useRef(null);w.useEffect(()=>{e&&(a({name:"",composition:"",description:"",price:0,quantity_in_stock:0,unit:"",expiry_date:"",buying_price:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null}),l(null),d(!1),p(!1))},[e]),w.useEffect(()=>{const E=I=>{I.key==="Tab"&&b.current===document.activeElement&&(u||(p(!0),setTimeout(()=>{var D;(D=v.current)==null||D.focus()},0),I.preventDefault()))},T=I=>{g.current&&!g.current.contains(I.target)&&p(!1)};return document.addEventListener("keydown",E),document.addEventListener("mousedown",T),()=>{document.removeEventListener("keydown",E),document.removeEventListener("mousedown",T)}},[u]);const N=E=>{const{name:T,value:I,type:D}=E.target;a(U=>({...U,[T]:D==="number"?parseFloat(I)||null:I}))},k=E=>{if(E.preventDefault(),l(null),d(!0),i.price===void 0||i.quantity_in_stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const T={...i,name:i.name===""?null:i.name,composition:i.composition===""?null:i.composition,buying_price:i.buying_price===0?null:i.buying_price,expiry_date:i.expiry_date===""?null:i.expiry_date,gst:i.gst===0?null:i.gst,margin:i.margin===0?null:i.margin,discount:i.discount===0?null:i.discount,brand_name:i.brand_name===""?null:i.brand_name,batch:i.batch===""?null:i.batch,hsn_code:i.hsn_code===""?null:i.hsn_code,mfg:i.mfg===""?null:i.mfg,loose:i.loose===0?null:i.loose};t(T),d(!1),n()};return e?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content add-drug-form-container max-w-2xl mx-auto",children:[r.jsxs("div",{className:"add-drug-form-header",children:[r.jsx("h2",{children:"Add New Drug"}),r.jsx("button",{onClick:n,className:"cancel-button",title:"Close",children:r.jsx(ci,{size:24})})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("form",{onSubmit:k,className:"add-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"name",className:"form-label",children:"Composition Name"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Lo,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"name",value:i.name||"",onChange:N,className:"custom-text-input mt-1",placeholder:"e.g., Paracetamol",tabIndex:1})]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"brand_name",className:"form-label",children:"Brand Name"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Lo,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"brand_name",value:i.brand_name||"",onChange:N,className:"custom-text-input mt-1",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"price",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Lo,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"price",id:"price",required:!0,step:"0.01",min:"0",value:i.price,onChange:N,className:"custom-text-input mt-1",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"quantity_in_stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Lo,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"quantity_in_stock",id:"quantity_in_stock",required:!0,step:"1",min:"0",value:i.quantity_in_stock,onChange:N,className:"custom-text-input mt-1",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"unit",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"unit",id:"unit",value:i.unit||"",onChange:N,className:"custom-text-input mt-1",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:i.expiry_date||"",onChange:N,className:"custom-text-input mt-1",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"box_number",value:i.box_number||"",onChange:N,className:"custom-text-input mt-1",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:g,children:[r.jsx("button",{type:"button",onClick:()=>p(!u),className:"form-button w-full text-left",tabIndex:8,ref:b,children:"Others"}),u&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"description",rows:3,value:i.description||"",onChange:N,className:"custom-text-input mt-1",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"buying_price",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"buying_price",id:"buying_price",step:"0.01",min:"0",value:i.buying_price??"",onChange:N,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:10,ref:v})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"gst",step:"0.01",min:"0",max:"100",value:i.gst??"",onChange:N,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:11})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"margin",step:"0.01",min:"0",max:"100",value:i.margin??"",onChange:N,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"discount",step:"0.01",min:"0",max:"100",value:i.discount??"",onChange:N,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"batch",value:i.batch||"",onChange:N,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"hsn_code",value:i.hsn_code||"",onChange:N,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"mfg",value:i.mfg||"",onChange:N,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"loose",className:"form-label",children:"Loose Quantity"}),r.jsx("input",{type:"number",name:"loose",id:"loose",step:"1",min:"0",value:i.loose??"",onChange:N,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:17})]})]})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:n,disabled:f,className:"form-button cancel-form-button",tabIndex:18,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:f,className:"form-button submit-form-button inline-flex justify-center",tabIndex:19,children:f?"Adding...":"Add Drug"})]})]})]})}):null},jne=({purchaseRows:e,onCellChange:n,onRemoveDrug:t,onAddEmptyRow:i})=>{const a=w.useRef(new Map),o=["name","price","quantity_in_stock","unit","expiry_date","buying_price","brand_name","box_number","gst","discount","batch","hsn_code","mfg","loose"],l=(f,d,u)=>{if(f.key==="Tab"){f.preventDefault();const p=o.indexOf(u);if(p!==-1){const g=(p+1)%o.length,b=o[g],v=a.current.get(`${d}-${b}`);v==null||v.focus()}}};return e.length===0?r.jsxs("div",{className:"no-drugs-message",children:[r.jsx("p",{children:"No drugs added to the purchase list yet."}),r.jsxs("button",{onClick:i,className:"action-button add-drug-to-table-button",children:[r.jsx(as,{size:18,className:"button-icon"}),"Add the first drug"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"purchase-drugs-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Composition Name"}),r.jsx("th",{children:"MRP ()"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Pack"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Rate ()"}),r.jsx("th",{children:"Brand Name"}),r.jsx("th",{children:"Box Number"}),r.jsx("th",{children:"GST (%)"}),r.jsx("th",{children:"Discount (%)"}),r.jsx("th",{children:"Margin (%)"}),r.jsx("th",{children:"Batch"}),r.jsx("th",{children:"HSN Code"}),r.jsx("th",{children:"MFG"}),r.jsx("th",{children:"Loose"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map((f,d)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("input",{type:"text",value:f.name||"",onChange:u=>n(u,f.id,"name"),onKeyDown:u=>l(u,f.id,"name"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-name`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:f.price,onChange:u=>n(u,f.id,"price"),onKeyDown:u=>l(u,f.id,"price"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-price`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:f.quantity_in_stock,onChange:u=>n(u,f.id,"quantity_in_stock"),onKeyDown:u=>l(u,f.id,"quantity_in_stock"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-quantity_in_stock`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:f.unit||"",onChange:u=>n(u,f.id,"unit"),onKeyDown:u=>l(u,f.id,"unit"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-unit`,u)}})}),r.jsx("td",{children:f.supplier||"N/A"}),r.jsx("td",{children:r.jsx("input",{type:"date",value:f.expiry_date||"",onChange:u=>n(u,f.id,"expiry_date"),onKeyDown:u=>l(u,f.id,"expiry_date"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-expiry_date`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:f.buying_price||"",onChange:u=>n(u,f.id,"buying_price"),onKeyDown:u=>l(u,f.id,"buying_price"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-buying_price`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:f.brand_name||"",onChange:u=>n(u,f.id,"brand_name"),onKeyDown:u=>l(u,f.id,"brand_name"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-brand_name`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:f.box_number||"",onChange:u=>n(u,f.id,"box_number"),onKeyDown:u=>l(u,f.id,"box_number"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-box_number`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:f.gst||"",onChange:u=>n(u,f.id,"gst"),onKeyDown:u=>l(u,f.id,"gst"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-gst`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:f.discount||"",onChange:u=>n(u,f.id,"discount"),onKeyDown:u=>l(u,f.id,"discount"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-discount`,u)}})}),r.jsx("td",{children:(()=>{const u=f.price||0,p=f.buying_price||0,g=f.gst!==null&&f.gst!==void 0?f.gst/100*p:0,b=f.discount!==null&&f.discount!==void 0?f.discount/100*u:0,v=u-(p+g)-b;return`${(u>0?v/u*100:0).toFixed(2)}%`})()}),r.jsx("td",{children:r.jsx("input",{type:"text",value:f.batch||"",onChange:u=>n(u,f.id,"batch"),onKeyDown:u=>l(u,f.id,"batch"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-batch`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:f.hsn_code||"",onChange:u=>n(u,f.id,"hsn_code"),onKeyDown:u=>l(u,f.id,"hsn_code"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-hsn_code`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:f.mfg||"",onChange:u=>n(u,f.id,"mfg"),onKeyDown:u=>l(u,f.id,"mfg"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-mfg`,u)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:f.loose||"",onChange:u=>n(u,f.id,"loose"),onKeyDown:u=>l(u,f.id,"loose"),className:"editable-cell-input",ref:u=>{f.id&&a.current.set(`${f.id}-loose`,u)}})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>t(f.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})})]},f.id||d))})]})})},A_=()=>{const e=Nt(),[n,t]=w.useState(!1),i=w.useRef(null),a=w.useRef(null),[o,l]=w.useState(""),[f,d]=w.useState([]),[u,p]=w.useState(null),[g,b]=w.useState(!1),v=w.useRef(null),[N,k]=w.useState(!1),[E,T]=w.useState([]),[I,D]=w.useState(null),[U,O]=w.useState(null),[$,B]=w.useState(0),[q,H]=w.useState(!1),[F,L]=w.useState([]),Q=["name","description","price","quantity_in_stock","unit","supplier","expiry_date","buying_price","box_number","gst","margin","discount","brand_name","batch","hsn_code","mfg","loose"],ne=()=>{const ye={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:"",composition:"",description:"",price:0,quantity_in_stock:0,unit:"",supplier:u?u.name:"",expiry_date:"",buying_price:0,box_number:"",gst:0,margin:0,discount:0,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:0,last_updated:"",created_at:""};L(Ae=>[...Ae,ye])},ie=async(je,ye)=>{if(!je){O("No file provided for import.");return}if(!u){O("Please select a distributor before importing.");return}t(!0),O(null);const Ae=new FormData;Ae.append("inventoryFile",je),Ae.append("columnMapping",JSON.stringify(ye));try{const De=await pe("/api/drugs/parse-excel",{method:"POST",body:Ae});if(!De.ok){const it=await De.json();throw new Error(it.message||`Failed to parse Excel file: ${De.statusText}`)}const Ve=await De.json();L(it=>[...it,...Ve.map(Ke=>({...Ke,id:Date.now().toString()+Math.random().toString(36).substring(2,9),supplier:u?u.name:Ke.supplier}))]),alert(`Successfully parsed ${Ve.length} drugs from Excel. They have been added to the purchase list.`)}catch(De){console.error("Failed to parse Excel file:",De),O(De.message||"Failed to parse Excel file. Please check the file format and try again."),alert(`Excel parsing failed: ${De.message||"Please check the file format and try again."}`)}finally{i.current&&(i.current.value=""),t(!1),D(null)}},oe=async je=>{if(je.target.files&&je.target.files[0]){const ye=je.target.files[0];D(ye),O(null),t(!0);const Ae=new FormData;Ae.append("inventoryFile",ye);try{const De=await pe("/api/drugs/get-file-headers",{method:"POST",body:Ae});if(!De.ok){const it=await De.json();throw new Error(it.message||`Failed to get file headers: ${De.statusText}`)}const{headers:Ve}=await De.json();T(Ve),k(!0)}catch(De){console.error("Failed to get file headers:",De),O(De.message||"Failed to read file headers. Please check the file format and try again."),alert(`Error reading file headers: ${De.message||"Please check the file format and try again."}`),D(null)}finally{t(!1)}}else D(null)},Y=je=>{I?ie(I,je):O("No file selected for import after mapping."),k(!1)},z=()=>{k(!1),T([]),D(null),i.current&&(i.current.value="")},re=()=>{var je;(je=i.current)==null||je.click()},X=async je=>{if(je.target.files&&je.target.files[0]){const ye=je.target.files[0];O(null),t(!0);const Ae=new FormData;Ae.append("file",ye),Ae.append("output_type","csv");const Ve={Authorization:"Bearer 00841ac4-b279-11f0-ab55-0a3a41e3fad1"};try{const it=await fetch("https://extraction-api.nanonets.com/extract",{method:"POST",headers:Ve,body:Ae});if(!it.ok){const ze=await it.json();throw new Error(ze.message||`Failed to extract data from image/PDF: ${it.statusText}`)}const Ke=await it.json();if(!Ke.success||!Ke.content)throw new Error(Ke.detail||"Nanonets API did not return expected content.");let rt=Ke.content;rt=rt.split(`
`).filter(ze=>!ze.startsWith("#")&&ze.trim()!=="").join(`
`);const _t=new File([rt],"extracted_data.csv",{type:"text/csv"}),ve=new FormData;ve.append("inventoryFile",_t);const qe=await pe("/api/drugs/get-file-headers",{method:"POST",body:ve});if(!qe.ok){const ze=await qe.json();throw new Error(ze.message||`Failed to get headers from extracted CSV: ${qe.statusText}`)}const{headers:We}=await qe.json();T(We),D(_t),k(!0),alert("Successfully extracted data from image/PDF as CSV. Please map the columns.")}catch(it){console.error("Failed to extract data from image/PDF:",it),O(it.message||"Failed to extract data from image/PDF. Please check the file and try again."),alert(`Image/PDF extraction failed: ${it.message||"Please check the file and try again."}`)}finally{a.current&&(a.current.value=""),t(!1)}}},P=()=>{var je;(je=a.current)==null||je.click()},te=()=>{if(!u){O("Please select a distributor before adding a drug manually.");return}H(!0)},se=()=>{H(!1),O(null)},M=je=>{L(ye=>[...ye,{...je,id:Date.now().toString(),supplier:u?u.name:je.supplier}]),se()},fe=je=>{L(ye=>ye.filter(Ae=>Ae.id!==je))},we=(je,ye,Ae)=>{const{value:De}=je.target;L(Ve=>Ve.map(it=>{if(it.id===ye){let Ke=De;Ae==="expiry_date"?Ke=De.trim()===""?null:De:["price","quantity_in_stock","buying_price","gst","margin","discount","loose"].includes(Ae)&&(Ke=parseFloat(De),isNaN(Ke)&&(Ke=null));const rt={...it,[Ae]:Ke};return Ae==="name"&&u&&!rt.supplier&&(rt.supplier=u.name),rt}return it}))},ce=w.useCallback(()=>F.reduce((je,ye)=>{const Ae=ye.quantity_in_stock||0,De=ye.buying_price||0,Ve=ye.gst||0,it=ye.discount||0;let Ke=De*(1-it/100),rt=Ae*Ke;return rt+=rt*(Ve/100),je+rt},0),[F]),Le=async()=>{if(!u){O("Please select a distributor before submitting the purchase.");return}const je=F.filter(ye=>Object.values(ye).some(Ae=>typeof Ae=="string"&&Ae.trim()!==""||typeof Ae=="number"&&Ae!==0||Ae!=null&&typeof Ae!="string"&&typeof Ae!="number"));if(je.length===0){O("No valid drugs to submit. Please fill in at least one field for a row, or remove empty rows."),t(!1);return}t(!0),O(null);try{for(const Ve of je){const it={...Ve,expiry_date:Ve.expiry_date===""?null:Ve.expiry_date,distributorId:u.id},Ke=await pe("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)});if(!Ke.ok){const rt=await Ke.json();throw new Error(rt.message||`Failed to add drug ${Ve.name}: ${Ke.statusText}`)}}const ye=ce(),Ae=new Date().toISOString().split("T")[0],De=await pe(`/api/distributors/${u.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:Ae,order_value:ye,amount_paid:$,notes:"Payment from purchase page."})});if(!De.ok){const Ve=await De.json();throw new Error(Ve.message||`Failed to record distributor payment: ${De.statusText}`)}alert("All valid drugs added to inventory and distributor payment recorded successfully!"),L([]),p(null),l(""),B(0),e("/dashboard/inventory")}catch(ye){console.error("Failed to submit purchase:",ye),O(ye.message||"Failed to submit purchase. Please try again."),alert(`Purchase submission failed: ${ye.message||"Please try again."}`)}finally{t(!1)}},Ne=w.useCallback(async je=>{if(je.trim()===""){d([]);return}try{const ye=await pe(`/api/distributors?search=${encodeURIComponent(je)}`);if(!ye.ok)throw new Error(`Failed to fetch distributors: ${ye.statusText}`);const Ae=await ye.json();d(Ae)}catch(ye){console.error("Failed to fetch distributors:",ye),O(ye.message||"Failed to load distributors.")}},[]),nt=je=>{const ye=je.target.value;l(ye),p(null),v.current&&clearTimeout(v.current),ye.trim()!==""?v.current=setTimeout(()=>{Ne(ye),b(!0)},300):(d([]),b(!1))},ut=je=>{p(je),l(je.name),b(!1),d([])};return w.useEffect(()=>{const je=ye=>{ye.target instanceof HTMLElement&&!ye.target.closest(".distributor-search-container")&&b(!1)};return document.addEventListener("mousedown",je),()=>{document.removeEventListener("mousedown",je),v.current&&clearTimeout(v.current)}},[]),r.jsxs("div",{className:"purchase-page",children:[r.jsxs("div",{className:"purchase-header",children:[r.jsx("button",{onClick:()=>e(-1),className:"action-icon-button",title:"Go Back",children:r.jsx(Qt,{size:24})}),r.jsx("h2",{className:"purchase-page-title",children:"Purchase Inventory"})]}),U&&r.jsx("div",{className:"error-message",children:U}),r.jsxs("div",{className:"purchase-controls-header",children:[r.jsxs("div",{className:"distributor-selection-section",children:[r.jsxs("h3",{children:[r.jsx(IM,{size:24,className:"icon-left"})," Select Distributor"]}),r.jsxs("div",{className:"distributor-search-container",children:[r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(ss,{size:20,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search distributor by name...",value:o,onChange:nt,onFocus:()=>o.trim()!==""&&b(!0),className:"distributor-search-input"})]}),g&&f.length>0&&r.jsx("ul",{className:"distributor-search-results",children:f.map(je=>r.jsx("li",{onClick:()=>ut(je),children:je.name},je.id))}),u&&r.jsxs("div",{className:"selected-distributor-info",children:["Selected: ",r.jsx("strong",{children:u.name}),u.contact_person&&r.jsxs("span",{children:[" (",u.contact_person,")"]})]})]})]}),r.jsxs("div",{className:"import-section",children:[r.jsxs("h3",{children:[r.jsx(RS,{size:24,className:"icon-left"})," Import Drugs"]}),r.jsx("p",{children:"Upload an Excel (.xlsx, .xls), CSV, PDF, or Image file to import drug data."}),r.jsxs("div",{className:"import-controls",children:[r.jsx("input",{ref:i,id:"excel-file-upload",name:"excel-file-upload",type:"file",className:"sr-only",accept:".xlsx, .xls, .csv",onChange:oe}),r.jsxs("button",{onClick:re,disabled:n||!u,className:`action-button import-button ${n?"importing":""}`,title:u?"":"Please select a distributor",children:[r.jsx(RS,{size:18,className:"button-icon"}),n?"Reading Headers...":"Import XL or CSV"]}),r.jsx("input",{ref:a,id:"image-pdf-file-upload",name:"image-pdf-file-upload",type:"file",className:"sr-only",accept:".pdf, .png, .jpg, .jpeg",onChange:X}),r.jsxs("button",{onClick:P,disabled:n||!u,className:"action-button import-button",title:u?"":"Please select a distributor",children:[r.jsx($o,{size:18,className:"button-icon"}),"Import from PDF/Image"]}),r.jsxs("button",{onClick:te,className:"action-button add-drug-manual-button",disabled:!u,title:u?"":"Select a distributor to add drugs manually",children:[r.jsx(as,{size:18,className:"button-icon"}),"Add Drug"]})]})]})]}),r.jsx(Nne,{isOpen:N,onClose:z,excelHeaders:E,onConfirm:Y,availableFields:Q}),q&&r.jsx(Cne,{isOpen:q,onClose:se,onDrugAddedToPurchase:M}),r.jsxs("div",{className:"purchase-summary-section",children:[r.jsxs("h3",{children:[r.jsx(_M,{size:24,className:"icon-left"})," Drugs to be Purchased (",F.length,")"]}),r.jsx(jne,{purchaseRows:F,onCellChange:we,onRemoveDrug:fe,onAddEmptyRow:ne}),r.jsxs("div",{className:"purchase-summary-actions",children:[r.jsxs("button",{onClick:ne,className:"action-button add-drug-to-table-button",children:[r.jsx(as,{size:18,className:"button-icon"}),"Add Row"]}),r.jsxs("div",{className:"summary-details",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"amount-paid-to-distributor",children:"Amount Paid ():"}),r.jsx("input",{type:"number",id:"amount-paid-to-distributor",value:$,onChange:je=>B(parseFloat(je.target.value)||0),placeholder:"0.00",className:"amount-paid-input",step:"0.01",disabled:!u,title:u?"":"Please select a distributor first"})]}),r.jsxs("div",{className:"total-purchase-value",children:[r.jsx("strong",{children:"Total Purchase Value:"})," ",ce().toFixed(2)]})]}),r.jsx("button",{onClick:Le,disabled:n||F.length===0||!u,className:"action-button submit-purchase-button",children:n?"Submitting...":"Submit Purchase"})]})]})]})},_ne=e=>{if(!e)return 1;const n=e.match(/(?:\d+x)?(\d+)/);return n&&n[1]?parseInt(n[1],10):1},kne=()=>{const e=Nt(),n=nr(),[t,i]=w.useState(null),[a,o]=w.useState([]),[l,f]=w.useState(!0),[d,u]=w.useState(null),[p,g]=w.useState(!1),[b,v]=w.useState("cash"),[N,k]=w.useState(""),[E,T]=w.useState(""),[I,D]=w.useState(""),[U,O]=w.useState(""),[$,B]=w.useState(""),[q,H]=w.useState(0),F=w.useRef(!1),L=X=>{const P=Math.max(0,Math.min(100,isNaN(X)?0:X));F.current=!0,H(P);const te=a.map(se=>({...se,discount_percentage:P}));o(te)},Q=(X,P)=>{const te=[...a];te[X].discount_percentage=isNaN(P)?0:P,o(te)};w.useEffect(()=>{if(F.current){F.current=!1;return}const X=a.reduce((se,M)=>se+(M.total_price??0),0);if(X===0){H(0);return}const te=a.reduce((se,M)=>{const we=(M.total_price??0)*((M.discount_percentage??0)/100);return se+we},0)/X*100;H(se=>Math.abs(se-te)>.01?te:se)},[a]);const ne=async()=>{if(!t)return u("No order data available to bill."),null;if(a.length===0)return u("Cannot bill an empty order."),null;g(!0),u(null);try{const X=a.map(fe=>{const we=(fe.pricePerLooseUnit??0)*(fe.looseQuantity??0),ce=we*((fe.discount_percentage??0)/100),Le=we-ce;return{name:fe.name,pack_quantity:fe.loosePacks??0,loose_quantity:fe.looseUnits??0,price:fe.originalPrice??0,pack_price:fe.originalPrice??0,loose_price:fe.pricePerLooseUnit??0,total:Le,drug_id:fe.drug_id,discount_percentage:fe.discount_percentage??0,batch:fe.batch,expiry_date:fe.expiry_date}}),P={patientId:t.patientId,queueId:t.id,items:X,amount:re,paymentMode:b,type:"pharmacy",related_id:t.id,status:"paid",discountPercentage:q},te=await pe("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}),se=await te.json();if(!te.ok||!se.id)throw new Error(se.message||"Failed to create bill.");const M=await pe(`/api/pharmacy-orders/${t.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:se.id,medications:a})});if(!M.ok){const fe=await M.text();throw new Error(`Failed to update pharmacy order status: ${M.statusText} - ${fe}`)}return i(fe=>fe?{...fe,status:"billed",bill_id:se.id}:null),alert(`Order ${t.patientName}'s bill created (ID: ${se.id}) and marked as billed.`),e(`/dashboard/pharmacy-billing/${t.id}`,{replace:!0,state:{order:{...t,status:"billed",bill_id:se.id},initialItems:a}}),se.id}catch(X){return console.error("Billing process failed:",X),u(X.message||"Failed to mark order as billed. Please try again."),null}finally{g(!1)}},ie=()=>{window.print()},oe=async()=>{await ne()&&(window.print(),e(-1))};w.useEffect(()=>{const X=n.pathname.split("/"),P=X[X.length-1];P?(async()=>{try{const se=await pe(`/api/pharmacy-orders/${P}`);if(!se.ok)throw new Error("Failed to fetch pharmacy order details");const M=await se.json();i(M);const fe=M.medications.map(we=>{const ce=_ne(we.unit),Le=(we.pack_quantity??0)*ce+(we.loose_quantity??0);return{...we,isLoose:!0,loosePacks:we.pack_quantity??0,looseUnits:we.loose_quantity??0,looseQuantity:Le,pack_price:Number(we.pack_price)||0,loose_price:Number(we.loose_price)||0,total_price:Number(we.total_price)||0,pricePerLooseUnit:Number(we.loose_price)||0,originalPrice:Number(we.pack_price)||0,discount_percentage:Number(we.discount_percentage)??0,directions_to_use:we.directions_to_use,tabletsPerDay:we.tabletsPerDay,numberOfDays:we.numberOfDays,batch:we.batch,expiry_date:we.expiry_date}});o(fe)}catch(se){console.error("Failed to fetch order:",se),u(se.message||"Failed to load order details.")}finally{f(!1)}})():(u("No pharmacy order ID provided."),f(!1))},[n.pathname]),w.useEffect(()=>{(async()=>{try{const P=await pe("/api/clinics/settings");if(!P.ok)throw new Error("Failed to fetch clinic settings");const te=await P.json();T(te.upi_id||""),D(te.name||""),O(te.address||""),B(te.notes||"")}catch(P){console.error("Error fetching clinic settings:",P)}})()},[]);const Y=w.useMemo(()=>a.reduce((X,P)=>X+(P.total_price??0),0),[a]),z=w.useMemo(()=>a.reduce((X,P)=>{const se=(P.total_price??0)*(P.discount_percentage??0)/100;return X+se},0),[a]),re=w.useMemo(()=>Y-z,[Y,z]);return w.useEffect(()=>{if(re>0&&E){const X=`upi://pay?pa=${E}&pn=ClinicName&am=${re.toFixed(2)}&cu=INR`;k(X)}else k("")},[re,E]),l?r.jsx("div",{className:"loading-pulse",children:"Loading Bill..."}):d?r.jsxs("div",{className:"error-message-box",children:["Error: ",d]}):t?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:I?`${I} Pharmacy`:"Pharmacy Bill"}),(U||$)&&r.jsxs("div",{className:"clinic-details-print",children:[U&&r.jsx("span",{className:"small-text clinic-address",children:U}),$&&r.jsx("span",{className:"small-text clinic-notes",children:$})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Sh,{size:16})," Patient Name"]})," ",t.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(X0,{size:16})," Token"]})," ",t.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(AS,{size:16})," Order Date"]})," ",new Date(t.date).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsxs("button",{onClick:()=>e(-1),className:"back-button",children:[r.jsx(Qt,{size:20}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{children:"Pharmacy Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Sh,{size:16})," Patient Name"]})," ",t.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(X0,{size:16})," Token"]})," ",t.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(Nb,{size:16})," Order ID"]})," ",t.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(AS,{size:16})," Order Date"]})," ",new Date(t.date).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Medications"})}),a.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"BATCH"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{children:"QUANTITY"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:a.map((X,P)=>{var we,ce;const te=X.total_price??0,se=te*(X.discount_percentage??0)/100,M=te-se;return r.jsxs("tr",{children:[r.jsx("td",{children:P+1}),r.jsx("td",{children:X.name}),r.jsx("td",{children:X.batch||"N/A"}),r.jsx("td",{children:X.expiry_date?new Date(X.expiry_date).toLocaleDateString():"N/A"}),r.jsxs("td",{children:[r.jsxs("div",{children:["Packs: ",X.loosePacks??0]}),r.jsxs("div",{children:["Loose: ",X.looseUnits??0]})]}),r.jsx("td",{children:((we=X.originalPrice)==null?void 0:we.toFixed(2))??"N/A"}),r.jsx("td",{children:((ce=X.pricePerLooseUnit)==null?void 0:ce.toFixed(2))??"N/A"}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:X.discount_percentage??0,onChange:Le=>Q(P,parseFloat(Le.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsxs("td",{children:[5 .toFixed(1),"%"]}),r.jsx("td",{children:M.toFixed(2)})]},P)})})]}):r.jsx("p",{children:"No medications in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[N&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${b!=="upi"?"hide-on-screen":""}`,children:[r.jsx(bb,{value:N,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]}),r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Y.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",q.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",z.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"GST (Included)"}),r.jsxs("span",{children:["",(re*.05).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",re.toFixed(2)]})})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Y.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",z.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:q,onChange:X=>L(parseFloat(X.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:p||t.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",re.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:N?r.jsxs(r.Fragment,{children:[r.jsx(bb,{value:N,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("select",{id:"paymentMode",value:b,onChange:X=>v(X.target.value),className:"payment-mode-select",disabled:p||t.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsxs("div",{className:"bill-actions",children:[t.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ie,className:"secondary-button print-preview-button no-print",disabled:p||a.length===0,children:"Print Preview"}),r.jsx("button",{onClick:oe,className:"primary-button",disabled:p||a.length===0,children:p?"Processing...":"Finalise and Bill"})]}),t.status==="billed"&&r.jsx("button",{onClick:()=>e(`/dashboard/bills/${t.bill_id}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No order data available."})};function Ene(){const[e,n]=w.useState(!1),[t,i]=w.useState(null),[a,o]=w.useState(!0),[l,f]=w.useState(null),[d,u]=w.useState(!1),p=I=>{i(I),n(!0),I.role==="admin"&&!I.has_seen_tutorial&&u(!0)},g=()=>{n(!1),i(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};w.useEffect(()=>{const I=localStorage.getItem("authToken"),D=localStorage.getItem("currentUser");if(I&&D)try{const U=JSON.parse(D);i(U),n(!0),U.role==="admin"&&!U.has_seen_tutorial&&u(!0)}catch(U){console.error("Error parsing stored user data:",U),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}o(!1)},[]),w.useEffect(()=>{(async()=>{if(e&&t)try{const D=await f2();f(D)}catch(D){console.error("Error fetching clinic pro plan status:",D),f({hasProPlan:!1})}else f(null)})()},[e,t]);const[b,v]=w.useState(null),[N,k]=w.useState(!1);w.useEffect(()=>{const I=D=>{D.preventDefault(),v(D),k(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",I),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),k(!1)),()=>{window.removeEventListener("beforeinstallprompt",I)}},[]),w.useEffect(()=>{const I=window.matchMedia("(prefers-color-scheme: dark)"),D=()=>{I.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return D(),I.addEventListener("change",D),()=>{I.removeEventListener("change",D),document.body.classList.remove("dark-mode")}},[]);const E=w.useCallback(async()=>{if(!b){console.log("Install prompt event not available.");return}const I=b;I.prompt();const{outcome:D}=await I.userChoice;console.log(`User response to the install prompt: ${D}`),v(null),k(!1)},[b]),T=async()=>{if(t)try{(await pe(`/api/users/${t.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(i(D=>D?{...D,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...t,has_seen_tutorial:!0})),u(!1)):console.error("Failed to update tutorial status on backend.")}catch(I){console.error("Error marking tutorial as seen:",I)}};return a?r.jsx("div",{children:"Loading..."}):r.jsxs(mD,{children:[r.jsx(_D,{children:r.jsxs(uh,{children:[r.jsx(ft,{path:"/login",element:e?r.jsx(Sn,{to:"/dashboard"}):r.jsx(TD,{onLoginSuccess:p})}),r.jsx(ft,{path:"/register",element:e?r.jsx(Sn,{to:"/dashboard"}):r.jsx(AD,{})}),r.jsx(ft,{path:"/handle-complaint-url",element:e?r.jsx(wne,{}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/live-api",element:e?r.jsx(iq,{}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/create-lab-order",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(Xk,{currentUser:t})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/manage-admission",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(Jk,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/lab/report/:orderId",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(__,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/lab/enter-report/:orderId",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(__,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/dashboard/add-patient",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(k1,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/billing",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(Cte,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/lab-billing",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(_te,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/dashboard/edit-complaint/:recordId",element:e&&t?r.jsx(wte,{}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/dashboard/edit-pharmacy-order/:orderId",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(oA,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/dashboard/*",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:Tne(t.role,t,pe)}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/lab/view-report/:orderId",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(Lte,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/lab/search-report",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(Fte,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/patient/:patientId/lab-reports",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx($te,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/patient/:patientId/pharmacy-orders",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(kte,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/inventory",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(lA,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/lab-inventory",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(cw,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/patient/:patientId/complaints",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(Ste,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/patient/:patientId/admission-bill/:billId",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(qte,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/start-subscription/:patientId",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(une,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/start-clinic-subscription",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(pne,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/refill-reminders",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(wA,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/dashboard/notifications",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(Sne,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/create-custom-bill",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(Kk,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"/dashboard/pharmacy-billing/:orderId",element:e&&t?r.jsx(li,{user:t,onLogout:g,showInstallPrompt:N,onInstallClick:E,clinicProPlanStatus:l,children:r.jsx(kne,{})}):r.jsx(Sn,{to:"/login"})}),r.jsx(ft,{path:"*",element:r.jsx(Sn,{to:e?"/dashboard":"/login"})})]})}),d&&r.jsx(bne,{onClose:()=>u(!1),onMarkAsSeen:T})]})}const Tne=(e,n,t)=>{switch(e){case"superadmin":return r.jsxs(uh,{children:[r.jsx(ft,{index:!0,element:r.jsx(gne,{})}),r.jsx(ft,{path:"clinic-subscriptions",element:r.jsx(dne,{})}),r.jsx(ft,{path:"clinic-subscriptions/add",element:r.jsx(fne,{})}),r.jsx(ft,{path:"clinic-subscriptions/edit/:id",element:r.jsx(hne,{})}),r.jsx(ft,{path:"users",element:r.jsx(mne,{})})," ",r.jsx(ft,{path:"*",element:r.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return r.jsxs(uh,{children:[r.jsx(ft,{index:!0,element:r.jsx(hq,{fetchWithAuth:t})}),r.jsx(ft,{path:"staff",element:r.jsx(Ute,{fetchWithAuth:t})}),r.jsx(ft,{path:"staff/add",element:r.jsx(Sq,{clinicId:n==null?void 0:n.clinic_id})}),r.jsx(ft,{path:"staff/edit/:id",element:r.jsx(Nq,{})}),r.jsx(ft,{path:"patients/add",element:r.jsx(k1,{})}),r.jsx(ft,{path:"search-patient",element:r.jsx(ph,{})}),r.jsx(ft,{path:"patients",element:r.jsx(_1,{})}),r.jsx(ft,{path:"analysis",element:r.jsx(t1,{})}),r.jsx(ft,{path:"inventory",element:r.jsx(d2,{})}),r.jsx(ft,{path:"inventory/edit/:id",element:r.jsx(wq,{})}),r.jsx(ft,{path:"distributors",element:r.jsx(T_,{})}),r.jsx(ft,{path:"purchase",element:r.jsx(A_,{})})," ",r.jsx(ft,{path:"queue",element:r.jsx(p0,{})}),r.jsx(ft,{path:"subscriptions",element:r.jsx(one,{})}),r.jsx(ft,{path:"subscriptions/add",element:r.jsx(lne,{})}),r.jsx(ft,{path:"subscriptions/edit/:id",element:r.jsx(cne,{})}),r.jsx(ft,{path:"*",element:r.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return r.jsxs(uh,{children:[r.jsx(ft,{index:!0,element:r.jsx(Sn,{to:"search-patient",replace:!0})}),r.jsx(ft,{path:"search-patient",element:r.jsx(ph,{})}),r.jsx(ft,{path:"queue",element:r.jsx(p0,{})}),r.jsx(ft,{path:":patientId",element:r.jsx(p0,{})}),r.jsx(ft,{path:"add-patient",element:r.jsx(k1,{})}),r.jsx(ft,{path:"*",element:r.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return r.jsxs(uh,{children:[r.jsx(ft,{index:!0,element:r.jsx(mq,{currentUser:n})}),r.jsx(ft,{path:"all-patients",element:r.jsx(_1,{})}),r.jsx(ft,{path:"search-patient",element:r.jsx(ph,{})}),r.jsx(ft,{path:"*",element:r.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return r.jsx(xq,{});case"pharmacy":return r.jsxs(uh,{children:[r.jsx(ft,{index:!0,element:r.jsx(bq,{})}),r.jsx(ft,{path:"inventory",element:r.jsx(lA,{})}),r.jsx(ft,{path:"settings",element:r.jsx(vq,{})}),r.jsx(ft,{path:"add-order",element:r.jsx(Ete,{})}),r.jsx(ft,{path:"edit-pharmacy-order/:orderId",element:r.jsx(oA,{})}),r.jsx(ft,{path:"analysis",element:r.jsx(t1,{})}),r.jsx(ft,{path:"orders/:orderId",element:r.jsx(ene,{})}),r.jsx(ft,{path:"search-patient-records",element:r.jsx(ph,{})}),r.jsx(ft,{path:"distributors",element:r.jsx(T_,{})}),r.jsx(ft,{path:"purchase",element:r.jsx(A_,{})})," ",r.jsx(ft,{path:"refill-reminders",element:r.jsx(wA,{})})," ",r.jsx(ft,{path:"*",element:r.jsx(Sn,{to:"/dashboard",replace:!0})})]});default:return r.jsxs("div",{children:["Unknown role (",e,") or dashboard not implemented."]},e)}},li=({user:e,onLogout:n,children:t,showInstallPrompt:i,onInstallClick:a,clinicProPlanStatus:o})=>{const l=Nt(),[f,d]=w.useState(!1),[u,p]=w.useState(window.innerWidth<=768),[g,b]=w.useState(!1),[v,N]=w.useState([]),[k,E]=w.useState(0),[T,I]=w.useState(!1),[D,U]=w.useState("Newtons Ai"),[O,$]=w.useState(null),B=w.useRef(null);w.useEffect(()=>{const ne=()=>{p(window.innerWidth<=768)};return window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)},[]);const q=w.useCallback(async()=>{try{const ne=await pe("/api/notifications");if(ne.ok){const Y=(await ne.json()).reduce((z,re)=>{const X=z.find(P=>P.message===re.message);return X?new Date(re.created_at)>new Date(X.created_at)?z.map(P=>P.message===re.message?re:P):z:[...z,re]},[]).sort((z,re)=>{const X={expired_drug:1,near_expiry_drug:2,low_stock:3},P=X[z.type]||99,te=X[re.type]||99;return P!==te?P-te:new Date(re.created_at).getTime()-new Date(z.created_at).getTime()});N(Y),E(Y.filter(z=>!z.is_read).length)}else console.error("Failed to fetch notifications:",ne.statusText)}catch(ne){console.error("Error fetching notifications:",ne)}},[]);w.useEffect(()=>{(async()=>{if(e!=null&&e.clinic_id)try{const ie=await pe("/api/clinics/settings");if(ie.ok){const oe=await ie.json();oe.name===""?U("Newtons Ai"):U(oe.name),$(oe.logoUrl)}else console.error("Failed to fetch clinic details for display:",ie.statusText),U("Newtons Ai"),$(null)}catch(ie){console.error("Error fetching clinic details for display:",ie),U("Newtons Ai"),$(null)}else U("Newtons Ai"),$(null)})()},[e==null?void 0:e.clinic_id]),w.useEffect(()=>{if(e!=null&&e.clinic_id){q();const ne=setInterval(q,5*60*1e3);return()=>clearInterval(ne)}},[e==null?void 0:e.clinic_id,q]);const H=()=>{d(!f),f||b(!1)},F=()=>{b(!g),g||d(!1)};w.useEffect(()=>{const ne=ie=>{B.current&&!B.current.contains(ie.target)&&g&&b(!1)};return g&&document.addEventListener("mousedown",ne),()=>{document.removeEventListener("mousedown",ne)}},[g]);const L=async ne=>{try{const ie=await pe(`/api/notifications/${ne}/read`,{method:"PUT"});ie.ok?q():console.error("Failed to mark notification as read:",ie.statusText)}catch(ie){console.error("Error marking notification as read:",ie)}},Q=async()=>{I(!0);try{const ne=await pe("/api/notifications/trigger-all",{method:"POST"});ne.ok?(console.log("Notification checks triggered successfully."),await q()):console.error("Failed to trigger notification checks:",ne.statusText)}catch(ne){console.error("Error triggering notification checks:",ne)}finally{I(!1)}};return r.jsxs("div",{className:"dashboard-layout",children:[" ",r.jsxs("nav",{className:"app-header no-print",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("a",{href:"#",onClick:ne=>{ne.preventDefault(),l("/dashboard")},className:"logo-container",children:r.jsx("img",{src:O||"/logo.png",alt:"App Logo",className:"logo-image"})}),r.jsxs("div",{className:"title-section",children:[r.jsx("span",{className:"app-title-link",children:D}),r.jsxs("span",{className:"user-role-panel",children:["(",e.role.charAt(0).toUpperCase()+e.role.slice(1)," Panel)"]})]})]}),r.jsxs("div",{className:"header-right",children:[i&&r.jsxs("button",{onClick:a,className:"install-button",title:"Install App",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{children:"Install"})]}),o&&(o.hasProPlan?r.jsx("span",{className:"pro-badge",children:"PRO"}):r.jsx("button",{onClick:()=>l("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),r.jsxs("div",{className:"notifications-section",ref:B,children:[" ",r.jsxs("button",{className:"notification-icon","aria-label":"Notifications",onClick:F,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),k>0&&r.jsx("span",{className:"notification-count",children:k})]}),g&&r.jsxs("div",{className:"notifications-dropdown",children:[r.jsx("div",{className:"dropdown-header",children:"Notifications"}),r.jsx("ul",{className:"dropdown-list",children:v.length>0?v.map(ne=>r.jsxs("li",{className:`dropdown-item ${ne.is_read?"read":"unread"}`,onClick:()=>L(ne.id),children:[ne.message,r.jsx("span",{className:"notification-timestamp",children:new Date(ne.created_at).toLocaleString()})]},ne.id)):r.jsx("li",{className:"dropdown-item",children:"No new notifications"})}),r.jsxs("div",{className:"dropdown-footer",children:[r.jsx("button",{onClick:()=>l("/dashboard/notifications"),children:"View All"}),(e.role==="admin"||e.role==="superadmin")&&r.jsx("button",{onClick:Q,className:"fetch-all-button",disabled:T,children:T?"Fetching...":"Fetch All"})]})]})]}),r.jsx("button",{className:"hamburger-icon",onClick:H,"aria-label":"Open navigation",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),r.jsx("main",{className:"main-content",children:t}),u?r.jsx(zD,{user:e,onLogout:n,userRole:e.role,isOpen:f,onClose:H,roleNavigation:Q_}):r.jsx($D,{user:e,onLogout:n,userRole:e.role,isOpen:f,onClose:H}),!u&&f&&r.jsx("div",{className:"side-panel-overlay",onClick:H})]})};tP.createRoot(document.getElementById("root")).render(r.jsx(w.StrictMode,{children:r.jsx(Ene,{})}));

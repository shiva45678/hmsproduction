const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditComplaintPage-Z9q76bN8.js","assets/EditComplaintPage-CcMBOQ67.css","assets/AddPatientPage-DWDpizgC.js","assets/AddPatientPage-CvaX_3Vg.css"])))=>i.map(i=>d[i]);
var zG=Object.defineProperty;var OM=t=>{throw TypeError(t)};var qG=(t,e,n)=>e in t?zG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var gr=(t,e,n)=>qG(t,typeof e!="symbol"?e+"":e,n),U_=(t,e,n)=>e.has(t)||OM("Cannot "+n);var De=(t,e,n)=>(U_(t,e,"read from private field"),n?n.call(t):e.get(t)),Bt=(t,e,n)=>e.has(t)?OM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Et=(t,e,n,i)=>(U_(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),xn=(t,e,n)=>(U_(t,e,"access private method"),n);var cj=(t,e,n,i)=>({set _(a){Et(t,e,a,n)},get _(){return De(t,e,i)}});function UG(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var Ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var V_={exports:{}},Fx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DM;function VG(){if(DM)return Fx;DM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:t,type:i,key:o,ref:a!==void 0?a:null,props:s}}return Fx.Fragment=e,Fx.jsx=n,Fx.jsxs=n,Fx}var MM;function HG(){return MM||(MM=1,V_.exports=VG()),V_.exports}var r=HG(),H_={exports:{}},pn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IM;function GG(){if(IM)return pn;IM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function N(z,le,je){this.props=z,this.context=le,this.refs=S,this.updater=je||x}N.prototype.isReactComponent={},N.prototype.setState=function(z,le){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,le,"setState")},N.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function _(){}_.prototype=N.prototype;function T(z,le,je){this.props=z,this.context=le,this.refs=S,this.updater=je||x}var C=T.prototype=new _;C.constructor=T,v(C,N.prototype),C.isPureReactComponent=!0;var O=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function I(z,le,je,K,Oe,Ye){return je=Ye.ref,{$$typeof:t,type:z,key:le,ref:je!==void 0?je:null,props:Ye}}function F(z,le){return I(z.type,le,void 0,void 0,void 0,z.props)}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function $(z){var le={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(je){return le[je]})}var L=/\/+/g;function V(z,le){return typeof z=="object"&&z!==null&&z.key!=null?$(""+z.key):le.toString(36)}function H(){}function te(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(H,H):(z.status="pending",z.then(function(le){z.status==="pending"&&(z.status="fulfilled",z.value=le)},function(le){z.status==="pending"&&(z.status="rejected",z.reason=le)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function X(z,le,je,K,Oe){var Ye=typeof z;(Ye==="undefined"||Ye==="boolean")&&(z=null);var Me=!1;if(z===null)Me=!0;else switch(Ye){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(z.$$typeof){case t:case e:Me=!0;break;case f:return Me=z._init,X(Me(z._payload),le,je,K,Oe)}}if(Me)return Oe=Oe(z),Me=K===""?"."+V(z,0):K,O(Oe)?(je="",Me!=null&&(je=Me.replace(L,"$&/")+"/"),X(Oe,le,je,"",function(re){return re})):Oe!=null&&(B(Oe)&&(Oe=F(Oe,je+(Oe.key==null||z&&z.key===Oe.key?"":(""+Oe.key).replace(L,"$&/")+"/")+Me)),le.push(Oe)),1;Me=0;var Ie=K===""?".":K+":";if(O(z))for(var be=0;be<z.length;be++)K=z[be],Ye=Ie+V(K,be),Me+=X(K,le,je,Ye,Oe);else if(be=y(z),typeof be=="function")for(z=be.call(z),be=0;!(K=z.next()).done;)K=K.value,Ye=Ie+V(K,be++),Me+=X(K,le,je,Ye,Oe);else if(Ye==="object"){if(typeof z.then=="function")return X(te(z),le,je,K,Oe);throw le=String(z),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Me}function q(z,le,je){if(z==null)return z;var K=[],Oe=0;return X(z,K,"","",function(Ye){return le.call(je,Ye,Oe++)}),K}function W(z){if(z._status===-1){var le=z._result;le=le(),le.then(function(je){(z._status===0||z._status===-1)&&(z._status=1,z._result=je)},function(je){(z._status===0||z._status===-1)&&(z._status=2,z._result=je)}),z._status===-1&&(z._status=0,z._result=le)}if(z._status===1)return z._result.default;throw z._result}var ae=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function G(){}return pn.Children={map:q,forEach:function(z,le,je){q(z,function(){le.apply(this,arguments)},je)},count:function(z){var le=0;return q(z,function(){le++}),le},toArray:function(z){return q(z,function(le){return le})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},pn.Component=N,pn.Fragment=n,pn.Profiler=a,pn.PureComponent=T,pn.StrictMode=i,pn.Suspense=c,pn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,pn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return k.H.useMemoCache(z)}},pn.cache=function(z){return function(){return z.apply(null,arguments)}},pn.cloneElement=function(z,le,je){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var K=v({},z.props),Oe=z.key,Ye=void 0;if(le!=null)for(Me in le.ref!==void 0&&(Ye=void 0),le.key!==void 0&&(Oe=""+le.key),le)!P.call(le,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&le.ref===void 0||(K[Me]=le[Me]);var Me=arguments.length-2;if(Me===1)K.children=je;else if(1<Me){for(var Ie=Array(Me),be=0;be<Me;be++)Ie[be]=arguments[be+2];K.children=Ie}return I(z.type,Oe,void 0,void 0,Ye,K)},pn.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},pn.createElement=function(z,le,je){var K,Oe={},Ye=null;if(le!=null)for(K in le.key!==void 0&&(Ye=""+le.key),le)P.call(le,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(Oe[K]=le[K]);var Me=arguments.length-2;if(Me===1)Oe.children=je;else if(1<Me){for(var Ie=Array(Me),be=0;be<Me;be++)Ie[be]=arguments[be+2];Oe.children=Ie}if(z&&z.defaultProps)for(K in Me=z.defaultProps,Me)Oe[K]===void 0&&(Oe[K]=Me[K]);return I(z,Ye,void 0,void 0,null,Oe)},pn.createRef=function(){return{current:null}},pn.forwardRef=function(z){return{$$typeof:l,render:z}},pn.isValidElement=B,pn.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:W}},pn.memo=function(z,le){return{$$typeof:d,type:z,compare:le===void 0?null:le}},pn.startTransition=function(z){var le=k.T,je={};k.T=je;try{var K=z(),Oe=k.S;Oe!==null&&Oe(je,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(G,ae)}catch(Ye){ae(Ye)}finally{k.T=le}},pn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},pn.use=function(z){return k.H.use(z)},pn.useActionState=function(z,le,je){return k.H.useActionState(z,le,je)},pn.useCallback=function(z,le){return k.H.useCallback(z,le)},pn.useContext=function(z){return k.H.useContext(z)},pn.useDebugValue=function(){},pn.useDeferredValue=function(z,le){return k.H.useDeferredValue(z,le)},pn.useEffect=function(z,le,je){var K=k.H;if(typeof je=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(z,le)},pn.useId=function(){return k.H.useId()},pn.useImperativeHandle=function(z,le,je){return k.H.useImperativeHandle(z,le,je)},pn.useInsertionEffect=function(z,le){return k.H.useInsertionEffect(z,le)},pn.useLayoutEffect=function(z,le){return k.H.useLayoutEffect(z,le)},pn.useMemo=function(z,le){return k.H.useMemo(z,le)},pn.useOptimistic=function(z,le){return k.H.useOptimistic(z,le)},pn.useReducer=function(z,le,je){return k.H.useReducer(z,le,je)},pn.useRef=function(z){return k.H.useRef(z)},pn.useState=function(z){return k.H.useState(z)},pn.useSyncExternalStore=function(z,le,je){return k.H.useSyncExternalStore(z,le,je)},pn.useTransition=function(){return k.H.useTransition()},pn.version="19.1.0",pn}var RM;function NO(){return RM||(RM=1,H_.exports=GG()),H_.exports}var b=NO();const Se=Bn(b),LM=UG({__proto__:null,default:Se},[b]);var G_={exports:{}},$x={},W_={exports:{}},Y_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FM;function WG(){return FM||(FM=1,function(t){function e(q,W){var ae=q.length;q.push(W);e:for(;0<ae;){var G=ae-1>>>1,z=q[G];if(0<a(z,W))q[G]=W,q[ae]=z,ae=G;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var W=q[0],ae=q.pop();if(ae!==W){q[0]=ae;e:for(var G=0,z=q.length,le=z>>>1;G<le;){var je=2*(G+1)-1,K=q[je],Oe=je+1,Ye=q[Oe];if(0>a(K,ae))Oe<z&&0>a(Ye,K)?(q[G]=Ye,q[Oe]=ae,G=Oe):(q[G]=K,q[je]=ae,G=je);else if(Oe<z&&0>a(Ye,ae))q[G]=Ye,q[Oe]=ae,G=Oe;else break e}}return W}function a(q,W){var ae=q.sortIndex-W.sortIndex;return ae!==0?ae:q.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,p=null,y=3,x=!1,v=!1,S=!1,N=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(q){for(var W=n(d);W!==null;){if(W.callback===null)i(d);else if(W.startTime<=q)i(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(d)}}function k(q){if(S=!1,O(q),!v)if(n(c)!==null)v=!0,P||(P=!0,V());else{var W=n(d);W!==null&&X(k,W.startTime-q)}}var P=!1,I=-1,F=5,B=-1;function $(){return N?!0:!(t.unstable_now()-B<F)}function L(){if(N=!1,P){var q=t.unstable_now();B=q;var W=!0;try{e:{v=!1,S&&(S=!1,T(I),I=-1),x=!0;var ae=y;try{t:{for(O(q),p=n(c);p!==null&&!(p.expirationTime>q&&$());){var G=p.callback;if(typeof G=="function"){p.callback=null,y=p.priorityLevel;var z=G(p.expirationTime<=q);if(q=t.unstable_now(),typeof z=="function"){p.callback=z,O(q),W=!0;break t}p===n(c)&&i(c),O(q)}else i(c);p=n(c)}if(p!==null)W=!0;else{var le=n(d);le!==null&&X(k,le.startTime-q),W=!1}}break e}finally{p=null,y=ae,x=!1}W=void 0}}finally{W?V():P=!1}}}var V;if(typeof C=="function")V=function(){C(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,te=H.port2;H.port1.onmessage=L,V=function(){te.postMessage(null)}}else V=function(){_(L,0)};function X(q,W){I=_(function(){q(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(q){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var ae=y;y=W;try{return q()}finally{y=ae}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ae=y;y=q;try{return W()}finally{y=ae}},t.unstable_scheduleCallback=function(q,W,ae){var G=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?G+ae:G):ae=G,q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ae+z,q={id:f++,callback:W,priorityLevel:q,startTime:ae,expirationTime:z,sortIndex:-1},ae>G?(q.sortIndex=ae,e(d,q),n(c)===null&&q===n(d)&&(S?(T(I),I=-1):S=!0,X(k,ae-G))):(q.sortIndex=z,e(c,q),v||x||(v=!0,P||(P=!0,V()))),q},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(q){var W=y;return function(){var ae=y;y=W;try{return q.apply(this,arguments)}finally{y=ae}}}}(Y_)),Y_}var $M;function YG(){return $M||($M=1,W_.exports=WG()),W_.exports}var K_={exports:{}},na={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BM;function KG(){if(BM)return na;BM=1;var t=NO();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:d,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return na.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,na.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(c,d,null,f)},na.flushSync=function(c){var d=o.T,f=i.p;try{if(o.T=null,i.p=2,c)return c()}finally{o.T=d,i.p=f,i.d.f()}},na.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(c,d))},na.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},na.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?i.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:x}):f==="script"&&i.d.X(c,{crossOrigin:p,integrity:y,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},na.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);i.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(c)},na.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);i.d.L(c,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},na.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=l(d.as,d.crossOrigin);i.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(c)},na.requestFormReset=function(c){i.d.r(c)},na.unstable_batchedUpdates=function(c,d){return c(d)},na.useFormState=function(c,d,f){return o.H.useFormState(c,d,f)},na.useFormStatus=function(){return o.H.useHostTransitionStatus()},na.version="19.1.0",na}var zM;function YB(){if(zM)return K_.exports;zM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),K_.exports=KG(),K_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM;function QG(){if(qM)return $x;qM=1;var t=YG(),e=NO(),n=YB();function i(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var h=u,m=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(m=h.return),u=h.return;while(u)}return h.tag===3?m:null}function o(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function l(u){if(s(u)!==u)throw Error(i(188))}function c(u){var h=u.alternate;if(!h){if(h=s(u),h===null)throw Error(i(188));return h!==u?null:u}for(var m=u,w=h;;){var A=m.return;if(A===null)break;var R=A.alternate;if(R===null){if(w=A.return,w!==null){m=w;continue}break}if(A.child===R.child){for(R=A.child;R;){if(R===m)return l(A),u;if(R===w)return l(A),h;R=R.sibling}throw Error(i(188))}if(m.return!==w.return)m=A,w=R;else{for(var J=!1,he=A.child;he;){if(he===m){J=!0,m=A,w=R;break}if(he===w){J=!0,w=A,m=R;break}he=he.sibling}if(!J){for(he=R.child;he;){if(he===m){J=!0,m=R,w=A;break}if(he===w){J=!0,w=R,m=A;break}he=he.sibling}if(!J)throw Error(i(189))}}if(m.alternate!==w)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?u:h}function d(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=d(u),h!==null)return h;u=u.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function V(u){return u===null||typeof u!="object"?null:(u=L&&u[L]||u["@@iterator"],typeof u=="function"?u:null)}var H=Symbol.for("react.client.reference");function te(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===H?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case N:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case P:return"SuspenseList";case B:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case x:return"Portal";case C:return(u.displayName||"Context")+".Provider";case T:return(u._context.displayName||"Context")+".Consumer";case O:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case I:return h=u.displayName||null,h!==null?h:te(u.type)||"Memo";case F:h=u._payload,u=u._init;try{return te(u(h))}catch{}}return null}var X=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},G=[],z=-1;function le(u){return{current:u}}function je(u){0>z||(u.current=G[z],G[z]=null,z--)}function K(u,h){z++,G[z]=u.current,u.current=h}var Oe=le(null),Ye=le(null),Me=le(null),Ie=le(null);function be(u,h){switch(K(Me,h),K(Ye,u),K(Oe,null),h.nodeType){case 9:case 11:u=(u=h.documentElement)&&(u=u.namespaceURI)?Er(u):0;break;default:if(u=h.tagName,h=h.namespaceURI)h=Er(h),u=Ir(h,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}je(Oe),K(Oe,u)}function re(){je(Oe),je(Ye),je(Me)}function ve(u){u.memoizedState!==null&&K(Ie,u);var h=Oe.current,m=Ir(h,u.type);h!==m&&(K(Ye,u),K(Oe,m))}function ce(u){Ye.current===u&&(je(Oe),je(Ye)),Ie.current===u&&(je(Ie),Lu._currentValue=ae)}var fe=Object.prototype.hasOwnProperty,se=t.unstable_scheduleCallback,Q=t.unstable_cancelCallback,ie=t.unstable_shouldYield,ge=t.unstable_requestPaint,ee=t.unstable_now,we=t.unstable_getCurrentPriorityLevel,Ue=t.unstable_ImmediatePriority,Ge=t.unstable_UserBlockingPriority,Le=t.unstable_NormalPriority,oe=t.unstable_LowPriority,_e=t.unstable_IdlePriority,$e=t.log,ze=t.unstable_setDisableYieldValue,Y=null,ye=null;function pe(u){if(typeof $e=="function"&&ze(u),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(Y,u)}catch{}}var me=Math.clz32?Math.clz32:Ee,Ne=Math.log,Be=Math.LN2;function Ee(u){return u>>>=0,u===0?32:31-(Ne(u)/Be|0)|0}var Ke=256,rt=4194304;function mt(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Pe(u,h,m){var w=u.pendingLanes;if(w===0)return 0;var A=0,R=u.suspendedLanes,J=u.pingedLanes;u=u.warmLanes;var he=w&134217727;return he!==0?(w=he&~R,w!==0?A=mt(w):(J&=he,J!==0?A=mt(J):m||(m=he&~u,m!==0&&(A=mt(m))))):(he=w&~R,he!==0?A=mt(he):J!==0?A=mt(J):m||(m=w&~u,m!==0&&(A=mt(m)))),A===0?0:h!==0&&h!==A&&(h&R)===0&&(R=A&-A,m=h&-h,R>=m||R===32&&(m&4194048)!==0)?h:A}function Je(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function et(u,h){switch(u){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ut(){var u=Ke;return Ke<<=1,(Ke&4194048)===0&&(Ke=256),u}function _t(){var u=rt;return rt<<=1,(rt&62914560)===0&&(rt=4194304),u}function vt(u){for(var h=[],m=0;31>m;m++)h.push(u);return h}function Ce(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function lt(u,h,m,w,A,R){var J=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var he=u.entanglements,ke=u.expirationTimes,Xe=u.hiddenUpdates;for(m=J&~m;0<m;){var ot=31-me(m),ft=1<<ot;he[ot]=0,ke[ot]=-1;var tt=Xe[ot];if(tt!==null)for(Xe[ot]=null,ot=0;ot<tt.length;ot++){var Ze=tt[ot];Ze!==null&&(Ze.lane&=-536870913)}m&=~ft}w!==0&&Tt(u,w,0),R!==0&&A===0&&u.tag!==0&&(u.suspendedLanes|=R&~(J&~h))}function Tt(u,h,m){u.pendingLanes|=h,u.suspendedLanes&=~h;var w=31-me(h);u.entangledLanes|=h,u.entanglements[w]=u.entanglements[w]|1073741824|m&4194090}function qe(u,h){var m=u.entangledLanes|=h;for(u=u.entanglements;m;){var w=31-me(m),A=1<<w;A&h|u[w]&h&&(u[w]|=h),m&=~A}}function jt(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Ct(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Kn(){var u=W.p;return u!==0?u:(u=window.event,u===void 0?32:rj(u.type))}function br(u,h){var m=W.p;try{return W.p=u,h()}finally{W.p=m}}var zn=Math.random().toString(36).slice(2),_n="__reactFiber$"+zn,wn="__reactProps$"+zn,oi="__reactContainer$"+zn,qn="__reactEvents$"+zn,qi="__reactListeners$"+zn,Ll="__reactHandles$"+zn,Fo="__reactResources$"+zn,Fl="__reactMarker$"+zn;function Nd(u){delete u[_n],delete u[wn],delete u[qn],delete u[qi],delete u[Ll]}function $o(u){var h=u[_n];if(h)return h;for(var m=u.parentNode;m;){if(h=m[oi]||m[_n]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(u=H1(u);u!==null;){if(m=u[_n])return m;u=H1(u)}return h}u=m,m=u.parentNode}return null}function it(u){if(u=u[_n]||u[oi]){var h=u.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return u}return null}function St(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u.stateNode;throw Error(i(33))}function Nt(u){var h=u[Fo];return h||(h=u[Fo]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function It(u){u[Fl]=!0}var vn=new Set,On={};function yi(u,h){ha(u,h),ha(u+"Capture",h)}function ha(u,h){for(On[u]=h,u=0;u<h.length;u++)vn.add(h[u])}var no=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_d={},Cd={};function FN(u){return fe.call(Cd,u)?!0:fe.call(_d,u)?!1:no.test(u)?Cd[u]=!0:(_d[u]=!0,!1)}function Rf(u,h,m){if(FN(h))if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(h);return;case"boolean":var w=h.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){u.removeAttribute(h);return}}u.setAttribute(h,""+m)}}function Lf(u,h,m){if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttribute(h,""+m)}}function Es(u,h,m,w){if(w===null)u.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(h,m,""+w)}}var Ff,Wg;function Wc(u){if(Ff===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);Ff=h&&h[1]||"",Wg=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ff+u+Wg}var Yg=!1;function Kg(u,h){if(!u||Yg)return"";Yg=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(h){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(Ze){var tt=Ze}Reflect.construct(u,[],ft)}else{try{ft.call()}catch(Ze){tt=Ze}u.call(ft.prototype)}}else{try{throw Error()}catch(Ze){tt=Ze}(ft=u())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(Ze){if(Ze&&tt&&typeof Ze.stack=="string")return[Ze.stack,tt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=w.DetermineComponentFrameRoot(),J=R[0],he=R[1];if(J&&he){var ke=J.split(`
`),Xe=he.split(`
`);for(A=w=0;w<ke.length&&!ke[w].includes("DetermineComponentFrameRoot");)w++;for(;A<Xe.length&&!Xe[A].includes("DetermineComponentFrameRoot");)A++;if(w===ke.length||A===Xe.length)for(w=ke.length-1,A=Xe.length-1;1<=w&&0<=A&&ke[w]!==Xe[A];)A--;for(;1<=w&&0<=A;w--,A--)if(ke[w]!==Xe[A]){if(w!==1||A!==1)do if(w--,A--,0>A||ke[w]!==Xe[A]){var ot=`
`+ke[w].replace(" at new "," at ");return u.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",u.displayName)),ot}while(1<=w&&0<=A);break}}}finally{Yg=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?Wc(m):""}function $N(u){switch(u.tag){case 26:case 27:case 5:return Wc(u.type);case 16:return Wc("Lazy");case 13:return Wc("Suspense");case 19:return Wc("SuspenseList");case 0:case 15:return Kg(u.type,!1);case 11:return Kg(u.type.render,!1);case 1:return Kg(u.type,!0);case 31:return Wc("Activity");default:return""}}function Qg(u){try{var h="";do h+=$N(u),u=u.return;while(u);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function fa(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Xg(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Jg(u){var h=Xg(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),w=""+u[h];if(!u.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,R=m.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return A.call(this)},set:function(J){w=""+J,R.call(this,J)}}),Object.defineProperty(u,h,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(J){w=""+J},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function $f(u){u._valueTracker||(u._valueTracker=Jg(u))}function Zg(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var m=h.getValue(),w="";return u&&(w=Xg(u)?u.checked?"true":"false":u.value),u=w,u!==m?(h.setValue(u),!0):!1}function $l(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Gb=/[\n"\\]/g;function La(u){return u.replace(Gb,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Bf(u,h,m,w,A,R,J,he){u.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?u.type=J:u.removeAttribute("type"),h!=null?J==="number"?(h===0&&u.value===""||u.value!=h)&&(u.value=""+fa(h)):u.value!==""+fa(h)&&(u.value=""+fa(h)):J!=="submit"&&J!=="reset"||u.removeAttribute("value"),h!=null?Td(u,J,fa(h)):m!=null?Td(u,J,fa(m)):w!=null&&u.removeAttribute("value"),A==null&&R!=null&&(u.defaultChecked=!!R),A!=null&&(u.checked=A&&typeof A!="function"&&typeof A!="symbol"),he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?u.name=""+fa(he):u.removeAttribute("name")}function ey(u,h,m,w,A,R,J,he){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(u.type=R),h!=null||m!=null){if(!(R!=="submit"&&R!=="reset"||h!=null))return;m=m!=null?""+fa(m):"",h=h!=null?""+fa(h):m,he||h===u.value||(u.value=h),u.defaultValue=h}w=w??A,w=typeof w!="function"&&typeof w!="symbol"&&!!w,u.checked=he?u.checked:!!w,u.defaultChecked=!!w,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(u.name=J)}function Td(u,h,m){h==="number"&&$l(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function Yc(u,h,m,w){if(u=u.options,h){h={};for(var A=0;A<m.length;A++)h["$"+m[A]]=!0;for(m=0;m<u.length;m++)A=h.hasOwnProperty("$"+u[m].value),u[m].selected!==A&&(u[m].selected=A),A&&w&&(u[m].defaultSelected=!0)}else{for(m=""+fa(m),h=null,A=0;A<u.length;A++){if(u[A].value===m){u[A].selected=!0,w&&(u[A].defaultSelected=!0);return}h!==null||u[A].disabled||(h=u[A])}h!==null&&(h.selected=!0)}}function ty(u,h,m){if(h!=null&&(h=""+fa(h),h!==u.value&&(u.value=h),m==null)){u.defaultValue!==h&&(u.defaultValue=h);return}u.defaultValue=m!=null?""+fa(m):""}function zf(u,h,m,w){if(h==null){if(w!=null){if(m!=null)throw Error(i(92));if(X(w)){if(1<w.length)throw Error(i(93));w=w[0]}m=w}m==null&&(m=""),h=m}m=fa(h),u.defaultValue=m,w=u.textContent,w===m&&w!==""&&w!==null&&(u.value=w)}function Bo(u,h){if(h){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=h;return}}u.textContent=h}var Kc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ny(u,h,m){var w=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?w?u.setProperty(h,""):h==="float"?u.cssFloat="":u[h]="":w?u.setProperty(h,m):typeof m!="number"||m===0||Kc.has(h)?h==="float"?u.cssFloat=m:u[h]=(""+m).trim():u[h]=m+"px"}function ry(u,h,m){if(h!=null&&typeof h!="object")throw Error(i(62));if(u=u.style,m!=null){for(var w in m)!m.hasOwnProperty(w)||h!=null&&h.hasOwnProperty(w)||(w.indexOf("--")===0?u.setProperty(w,""):w==="float"?u.cssFloat="":u[w]="");for(var A in h)w=h[A],h.hasOwnProperty(A)&&m[A]!==w&&ny(u,A,w)}else for(var R in h)h.hasOwnProperty(R)&&ny(u,R,h[R])}function iy(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kd(u){return Yb.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var qf=null;function ay(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Qc=null,Xc=null;function sy(u){var h=it(u);if(h&&(u=h.stateNode)){var m=u[wn]||null;e:switch(u=h.stateNode,h.type){case"input":if(Bf(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+La(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var w=m[h];if(w!==u&&w.form===u.form){var A=w[wn]||null;if(!A)throw Error(i(90));Bf(w,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(h=0;h<m.length;h++)w=m[h],w.form===u.form&&Zg(w)}break e;case"textarea":ty(u,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Yc(u,!!m.multiple,h,!1)}}}var oy=!1;function Kb(u,h,m){if(oy)return u(h,m);oy=!0;try{var w=u(h);return w}finally{if(oy=!1,(Qc!==null||Xc!==null)&&(qp(),Qc&&(h=Qc,u=Xc,Xc=Qc=null,sy(h),u)))for(h=0;h<u.length;h++)sy(u[h])}}function Ad(u,h){var m=u.stateNode;if(m===null)return null;var w=m[wn]||null;if(w===null)return null;m=w[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(u=u.type,w=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!w;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(i(231,h,typeof m));return m}var ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ed=!1;if(ro)try{var Pd={};Object.defineProperty(Pd,"passive",{get:function(){Ed=!0}}),window.addEventListener("test",Pd,Pd),window.removeEventListener("test",Pd,Pd)}catch{Ed=!1}var zo=null,ly=null,Uf=null;function Qb(){if(Uf)return Uf;var u,h=ly,m=h.length,w,A="value"in zo?zo.value:zo.textContent,R=A.length;for(u=0;u<m&&h[u]===A[u];u++);var J=m-u;for(w=1;w<=J&&h[m-w]===A[R-w];w++);return Uf=A.slice(u,1<w?1-w:void 0)}function nr(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function Qn(){return!0}function Xb(){return!1}function Ui(u){function h(m,w,A,R,J){this._reactName=m,this._targetInst=A,this.type=w,this.nativeEvent=R,this.target=J,this.currentTarget=null;for(var he in u)u.hasOwnProperty(he)&&(m=u[he],this[he]=m?m(R):R[he]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Qn:Xb,this.isPropagationStopped=Xb,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),h}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vf=Ui(Bl),Od=f({},Bl,{view:0,detail:0}),BN=Ui(Od),Hf,cy,Hr,Jc=f({},Od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Hr&&(Hr&&u.type==="mousemove"?(Hf=u.screenX-Hr.screenX,cy=u.screenY-Hr.screenY):cy=Hf=0,Hr=u),Hf)},movementY:function(u){return"movementY"in u?u.movementY:cy}}),qo=Ui(Jc),Jb=f({},Jc,{dataTransfer:0}),uy=Ui(Jb),Fa=f({},Od,{relatedTarget:0}),Gf=Ui(Fa),Zb=f({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),e0=Ui(Zb),t0=f({},Bl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),n0=Ui(t0),r0=f({},Bl,{data:0}),Vi=Ui(r0),zN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i0(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=qN[u])?!!h[u]:!1}function Ps(){return i0}var Wf=f({},Od,{key:function(u){if(u.key){var h=zN[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=nr(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?$a[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(u){return u.type==="keypress"?nr(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?nr(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),dy=Ui(Wf),Cr=f({},Jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),io=Ui(Cr),hy=f({},Od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),UN=Ui(hy),fy=f({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),VN=Ui(fy),HN=f({},Jc,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),GN=Ui(HN),a0=f({},Bl,{newState:0,oldState:0}),Yf=Ui(a0),Zc=[9,13,27,32],py=ro&&"CompositionEvent"in window,eu=null;ro&&"documentMode"in document&&(eu=document.documentMode);var s0=ro&&"TextEvent"in window&&!eu,Kf=ro&&(!py||eu&&8<eu&&11>=eu),Qf=" ",my=!1;function o0(u,h){switch(u){case"keyup":return Zc.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xf(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Uo=!1;function WN(u,h){switch(u){case"compositionend":return Xf(h);case"keypress":return h.which!==32?null:(my=!0,Qf);case"textInput":return u=h.data,u===Qf&&my?null:u;default:return null}}function l0(u,h){if(Uo)return u==="compositionend"||!py&&o0(u,h)?(u=Qb(),Uf=ly=zo=null,Uo=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Kf&&h.locale!=="ko"?null:h.data;default:return null}}var pa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jf(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!pa[u.type]:h==="textarea"}function tu(u,h,m,w){Qc?Xc?Xc.push(w):Xc=[w]:Qc=w,h=Kp(h,"onChange"),0<h.length&&(m=new Vf("onChange","change",null,m,w),u.push({event:m,listeners:h}))}var nu=null,ru=null;function YN(u){L1(u,0)}function Zf(u){var h=St(u);if(Zg(h))return u}function c0(u,h){if(u==="change")return h}var u0=!1;if(ro){var gy;if(ro){var Vo="oninput"in document;if(!Vo){var d0=document.createElement("div");d0.setAttribute("oninput","return;"),Vo=typeof d0.oninput=="function"}gy=Vo}else gy=!1;u0=gy&&(!document.documentMode||9<document.documentMode)}function h0(){nu&&(nu.detachEvent("onpropertychange",ep),ru=nu=null)}function ep(u){if(u.propertyName==="value"&&Zf(ru)){var h=[];tu(h,ru,u,ay(u)),Kb(YN,h)}}function f0(u,h,m){u==="focusin"?(h0(),nu=h,ru=m,nu.attachEvent("onpropertychange",ep)):u==="focusout"&&h0()}function Ho(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Zf(ru)}function tp(u,h){if(u==="click")return Zf(h)}function KN(u,h){if(u==="input"||u==="change")return Zf(h)}function QN(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var ma=typeof Object.is=="function"?Object.is:QN;function Os(u,h){if(ma(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var m=Object.keys(u),w=Object.keys(h);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var A=m[w];if(!fe.call(h,A)||!ma(u[A],h[A]))return!1}return!0}function Ba(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function yy(u,h){var m=Ba(u);u=0;for(var w;m;){if(m.nodeType===3){if(w=u+m.textContent.length,u<=h&&w>=h)return{node:m,offset:h-u};u=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ba(m)}}function p0(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?p0(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function m0(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var h=$l(u.document);h instanceof u.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)u=h.contentWindow;else break;h=$l(u.document)}return h}function xy(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}var XN=ro&&"documentMode"in document&&11>=document.documentMode,iu=null,Go=null,Ve=null,at=!1;function nt(u,h,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;at||iu==null||iu!==$l(w)||(w=iu,"selectionStart"in w&&xy(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ve&&Os(Ve,w)||(Ve=w,w=Kp(Go,"onSelect"),0<w.length&&(h=new Vf("onSelect","select",null,h,m),u.push({event:h,listeners:w}),h.target=iu)))}function kt(u,h){var m={};return m[u.toLowerCase()]=h.toLowerCase(),m["Webkit"+u]="webkit"+h,m["Moz"+u]="moz"+h,m}var Kt={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionrun:kt("Transition","TransitionRun"),transitionstart:kt("Transition","TransitionStart"),transitioncancel:kt("Transition","TransitionCancel"),transitionend:kt("Transition","TransitionEnd")},Mn={},Gr={};ro&&(Gr=document.createElement("div").style,"AnimationEvent"in window||(delete Kt.animationend.animation,delete Kt.animationiteration.animation,delete Kt.animationstart.animation),"TransitionEvent"in window||delete Kt.transitionend.transition);function In(u){if(Mn[u])return Mn[u];if(!Kt[u])return u;var h=Kt[u],m;for(m in h)if(h.hasOwnProperty(m)&&m in Gr)return Mn[u]=h[m];return u}var np=In("animationend"),g0=In("animationiteration"),ga=In("animationstart"),rp=In("transitionrun"),JN=In("transitionstart"),au=In("transitioncancel"),Dd=In("transitionend"),Md=new Map,Un="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Un.push("scrollEnd");function ls(u,h){Md.set(u,h),yi(h,[u])}var vy=new WeakMap;function Mi(u,h){if(typeof u=="object"&&u!==null){var m=vy.get(u);return m!==void 0?m:(h={value:u,source:h,stack:Qg(h)},vy.set(u,h),h)}return{value:u,source:h,stack:Qg(h)}}var za=[],su=0,by=0;function zl(){for(var u=su,h=by=su=0;h<u;){var m=za[h];za[h++]=null;var w=za[h];za[h++]=null;var A=za[h];za[h++]=null;var R=za[h];if(za[h++]=null,w!==null&&A!==null){var J=w.pending;J===null?A.next=A:(A.next=J.next,J.next=A),w.pending=A}R!==0&&Id(m,A,R)}}function cs(u,h,m,w){za[su++]=u,za[su++]=h,za[su++]=m,za[su++]=w,by|=w,u.lanes|=w,u=u.alternate,u!==null&&(u.lanes|=w)}function ou(u,h,m,w){return cs(u,h,m,w),Rd(u)}function ql(u,h){return cs(u,null,null,h),Rd(u)}function Id(u,h,m){u.lanes|=m;var w=u.alternate;w!==null&&(w.lanes|=m);for(var A=!1,R=u.return;R!==null;)R.childLanes|=m,w=R.alternate,w!==null&&(w.childLanes|=m),R.tag===22&&(u=R.stateNode,u===null||u._visibility&1||(A=!0)),u=R,R=R.return;return u.tag===3?(R=u.stateNode,A&&h!==null&&(A=31-me(m),u=R.hiddenUpdates,w=u[A],w===null?u[A]=[h]:w.push(h),h.lane=m|536870912),R):null}function Rd(u){if(50<Au)throw Au=0,px=null,Error(i(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}var Ul={};function ip(u,h,m,w){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(u,h,m,w){return new ip(u,h,m,w)}function Vl(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Ii(u,h){var m=u.alternate;return m===null?(m=Hi(u.tag,h,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=h,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,h=u.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function Ld(u,h){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,h=m.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function ap(u,h,m,w,A,R){var J=0;if(w=u,typeof u=="function")Vl(u)&&(J=1);else if(typeof u=="string")J=A_(u,m,Oe.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case B:return u=Hi(31,m,h,A),u.elementType=B,u.lanes=R,u;case v:return Hl(m.children,A,R,h);case S:J=8,A|=24;break;case N:return u=Hi(12,m,h,A|2),u.elementType=N,u.lanes=R,u;case k:return u=Hi(13,m,h,A),u.elementType=k,u.lanes=R,u;case P:return u=Hi(19,m,h,A),u.elementType=P,u.lanes=R,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case _:case C:J=10;break e;case T:J=9;break e;case O:J=11;break e;case I:J=14;break e;case F:J=16,w=null;break e}J=29,m=Error(i(130,u===null?"null":typeof u,"")),w=null}return h=Hi(J,m,h,A),h.elementType=u,h.type=w,h.lanes=R,h}function Hl(u,h,m,w){return u=Hi(7,u,w,h),u.lanes=m,u}function jy(u,h,m){return u=Hi(6,u,null,h),u.lanes=m,u}function lu(u,h,m){return h=Hi(4,u.children!==null?u.children:[],u.key,h),h.lanes=m,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}var ao=[],Wo=0,sp=null,Fd=0,qa=[],Ua=0,jr=null,Tr=1,so="";function Gl(u,h){ao[Wo++]=Fd,ao[Wo++]=sp,sp=u,Fd=h}function wy(u,h,m){qa[Ua++]=Tr,qa[Ua++]=so,qa[Ua++]=jr,jr=u;var w=Tr;u=so;var A=32-me(w)-1;w&=~(1<<A),m+=1;var R=32-me(h)+A;if(30<R){var J=A-A%5;R=(w&(1<<J)-1).toString(32),w>>=J,A-=J,Tr=1<<32-me(h)+A|m<<A|w,so=R+u}else Tr=1<<R|m<<A|w,so=u}function Sy(u){u.return!==null&&(Gl(u,1),wy(u,1,0))}function $d(u){for(;u===sp;)sp=ao[--Wo],ao[Wo]=null,Fd=ao[--Wo],ao[Wo]=null;for(;u===jr;)jr=qa[--Ua],qa[Ua]=null,so=qa[--Ua],qa[Ua]=null,Tr=qa[--Ua],qa[Ua]=null}var Zr=null,kr=null,Sn=!1,us=null,Gi=!1,cu=Error(i(519));function Va(u){var h=Error(i(418,""));throw Yo(Mi(h,u)),cu}function y0(u){var h=u.stateNode,m=u.type,w=u.memoizedProps;switch(h[_n]=u,h[wn]=w,m){case"dialog":jn("cancel",h),jn("close",h);break;case"iframe":case"object":case"embed":jn("load",h);break;case"video":case"audio":for(m=0;m<Th.length;m++)jn(Th[m],h);break;case"source":jn("error",h);break;case"img":case"image":case"link":jn("error",h),jn("load",h);break;case"details":jn("toggle",h);break;case"input":jn("invalid",h),ey(h,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),$f(h);break;case"select":jn("invalid",h);break;case"textarea":jn("invalid",h),zf(h,w.value,w.defaultValue,w.children),$f(h)}m=w.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||w.suppressHydrationWarning===!0||B1(h.textContent,m)?(w.popover!=null&&(jn("beforetoggle",h),jn("toggle",h)),w.onScroll!=null&&jn("scroll",h),w.onScrollEnd!=null&&jn("scrollend",h),w.onClick!=null&&(h.onclick=Qp),h=!0):h=!1,h||Va(u)}function x0(u){for(Zr=u.return;Zr;)switch(Zr.tag){case 5:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:Zr=Zr.return}}function Bd(u){if(u!==Zr)return!1;if(!Sn)return x0(u),Sn=!0,!1;var h=u.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||Jp(u.type,u.memoizedProps)),m=!m),m&&kr&&Va(u),x0(u),h===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(h===0){kr=gs(u.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;u=u.nextSibling}kr=null}}else h===27?(h=kr,Qa(u.type)?(u=kx,kx=null,kr=u):kr=h):kr=Zr?gs(u.stateNode.nextSibling):null;return!0}function zd(){kr=Zr=null,Sn=!1}function v0(){var u=us;return u!==null&&(ea===null?ea=u:ea.push.apply(ea,u),us=null),u}function Yo(u){us===null?us=[u]:us.push(u)}var Wl=le(null),Ko=null,de=null;function ya(u,h,m){K(Wl,h._currentValue),h._currentValue=m}function Ha(u){u._currentValue=Wl.current,je(Wl)}function Wi(u,h,m){for(;u!==null;){var w=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,w!==null&&(w.childLanes|=h)):w!==null&&(w.childLanes&h)!==h&&(w.childLanes|=h),u===m)break;u=u.return}}function mn(u,h,m,w){var A=u.child;for(A!==null&&(A.return=u);A!==null;){var R=A.dependencies;if(R!==null){var J=A.child;R=R.firstContext;e:for(;R!==null;){var he=R;R=A;for(var ke=0;ke<h.length;ke++)if(he.context===h[ke]){R.lanes|=m,he=R.alternate,he!==null&&(he.lanes|=m),Wi(R.return,m,u),w||(J=null);break e}R=he.next}}else if(A.tag===18){if(J=A.return,J===null)throw Error(i(341));J.lanes|=m,R=J.alternate,R!==null&&(R.lanes|=m),Wi(J,m,u),J=null}else J=A.child;if(J!==null)J.return=A;else for(J=A;J!==null;){if(J===u){J=null;break}if(A=J.sibling,A!==null){A.return=J.return,J=A;break}J=J.return}A=J}}function qd(u,h,m,w){u=null;for(var A=h,R=!1;A!==null;){if(!R){if((A.flags&524288)!==0)R=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var J=A.alternate;if(J===null)throw Error(i(387));if(J=J.memoizedProps,J!==null){var he=A.type;ma(A.pendingProps.value,J.value)||(u!==null?u.push(he):u=[he])}}else if(A===Ie.current){if(J=A.alternate,J===null)throw Error(i(387));J.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(u!==null?u.push(Lu):u=[Lu])}A=A.return}u!==null&&mn(h,u,m,w),h.flags|=262144}function op(u){for(u=u.firstContext;u!==null;){if(!ma(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Yl(u){Ko=u,de=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Lr(u){return b0(Ko,u)}function lp(u,h){return Ko===null&&Yl(u),b0(u,h)}function b0(u,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},de===null){if(u===null)throw Error(i(308));de=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else de=de.next=h;return m}var ZN=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(m,w){u.push(w)}};this.abort=function(){h.aborted=!0,u.forEach(function(m){return m()})}},e_=t.unstable_scheduleCallback,t_=t.unstable_NormalPriority,dr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ny(){return{controller:new ZN,data:new Map,refCount:0}}function Ud(u){u.refCount--,u.refCount===0&&e_(t_,function(){u.controller.abort()})}var Vd=null,_y=0,uu=0,Yi=null;function n_(u,h){if(Vd===null){var m=Vd=[];_y=0,uu=Yp(),Yi={status:"pending",value:void 0,then:function(w){m.push(w)}}}return _y++,h.then(j0,j0),h}function j0(){if(--_y===0&&Vd!==null){Yi!==null&&(Yi.status="fulfilled");var u=Vd;Vd=null,uu=0,Yi=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function r_(u,h){var m=[],w={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return u.then(function(){w.status="fulfilled",w.value=h;for(var A=0;A<m.length;A++)(0,m[A])(h)},function(A){for(w.status="rejected",w.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),w}var w0=q.S;q.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&n_(u,h),w0!==null&&w0(u,h)};var Kl=le(null);function oo(){var u=Kl.current;return u!==null?u:mr.pooledCache}function cp(u,h){h===null?K(Kl,Kl.current):K(Kl,h.pool)}function S0(){var u=oo();return u===null?null:{parent:dr._currentValue,pool:u}}var Ri=Error(i(460)),N0=Error(i(474)),up=Error(i(542)),Cy={then:function(){}};function _0(u){return u=u.status,u==="fulfilled"||u==="rejected"}function dp(){}function Ty(u,h,m){switch(m=u[m],m===void 0?u.push(h):m!==h&&(h.then(dp,dp),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,T0(u),u;default:if(typeof h.status=="string")h.then(dp,dp);else{if(u=mr,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=h,u.status="pending",u.then(function(w){if(h.status==="pending"){var A=h;A.status="fulfilled",A.value=w}},function(w){if(h.status==="pending"){var A=h;A.status="rejected",A.reason=w}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,T0(u),u}throw du=h,Ri}}var du=null;function C0(){if(du===null)throw Error(i(459));var u=du;return du=null,u}function T0(u){if(u===Ri||u===up)throw Error(i(483))}var Ds=!1;function Ql(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hu(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Qo(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function lo(u,h,m){var w=u.updateQueue;if(w===null)return null;if(w=w.shared,(Jn&2)!==0){var A=w.pending;return A===null?h.next=h:(h.next=A.next,A.next=h),w.pending=h,h=Rd(u),Id(u,null,m),h}return cs(u,w,h,m),Rd(u)}function Hd(u,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var w=h.lanes;w&=u.pendingLanes,m|=w,h.lanes=m,qe(u,m)}}function ds(u,h){var m=u.updateQueue,w=u.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var A=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var J={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};R===null?A=R=J:R=R.next=J,m=m.next}while(m!==null);R===null?A=R=h:R=R.next=h}else A=R=h;m={baseState:w.baseState,firstBaseUpdate:A,lastBaseUpdate:R,shared:w.shared,callbacks:w.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=h}var Gd=!1;function hs(){if(Gd){var u=Yi;if(u!==null)throw u}}function _i(u,h,m,w){Gd=!1;var A=u.updateQueue;Ds=!1;var R=A.firstBaseUpdate,J=A.lastBaseUpdate,he=A.shared.pending;if(he!==null){A.shared.pending=null;var ke=he,Xe=ke.next;ke.next=null,J===null?R=Xe:J.next=Xe,J=ke;var ot=u.alternate;ot!==null&&(ot=ot.updateQueue,he=ot.lastBaseUpdate,he!==J&&(he===null?ot.firstBaseUpdate=Xe:he.next=Xe,ot.lastBaseUpdate=ke))}if(R!==null){var ft=A.baseState;J=0,ot=Xe=ke=null,he=R;do{var tt=he.lane&-536870913,Ze=tt!==he.lane;if(Ze?(Dn&tt)===tt:(w&tt)===tt){tt!==0&&tt===uu&&(Gd=!0),ot!==null&&(ot=ot.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var Ht=u,Vt=he;tt=h;var ir=m;switch(Vt.tag){case 1:if(Ht=Vt.payload,typeof Ht=="function"){ft=Ht.call(ir,ft,tt);break e}ft=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Vt.payload,tt=typeof Ht=="function"?Ht.call(ir,ft,tt):Ht,tt==null)break e;ft=f({},ft,tt);break e;case 2:Ds=!0}}tt=he.callback,tt!==null&&(u.flags|=64,Ze&&(u.flags|=8192),Ze=A.callbacks,Ze===null?A.callbacks=[tt]:Ze.push(tt))}else Ze={lane:tt,tag:he.tag,payload:he.payload,callback:he.callback,next:null},ot===null?(Xe=ot=Ze,ke=ft):ot=ot.next=Ze,J|=tt;if(he=he.next,he===null){if(he=A.shared.pending,he===null)break;Ze=he,he=Ze.next,Ze.next=null,A.lastBaseUpdate=Ze,A.shared.pending=null}}while(!0);ot===null&&(ke=ft),A.baseState=ke,A.firstBaseUpdate=Xe,A.lastBaseUpdate=ot,R===null&&(A.shared.lanes=0),al|=J,u.lanes=J,u.memoizedState=ft}}function k0(u,h){if(typeof u!="function")throw Error(i(191,u));u.call(h)}function ky(u,h){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)k0(m[u],h)}var Xl=le(null),Xo=le(0);function co(u,h){u=vo,K(Xo,u),K(Xl,h),vo=u|h.baseLanes}function hp(){K(Xo,vo),K(Xl,Xl.current)}function Ay(){vo=Xo.current,je(Xl),je(Xo)}var fs=0,fn=null,Xn=null,Nn=null,fu=!1,Jl=!1,Ci=!1,pu=0,Jo=0,Ga=null,A0=0;function Cn(){throw Error(i(321))}function Wd(u,h){if(h===null)return!1;for(var m=0;m<h.length&&m<u.length;m++)if(!ma(u[m],h[m]))return!1;return!0}function Ey(u,h,m,w,A,R){return fs=R,fn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,q.H=u===null||u.memoizedState===null?q0:Yy,Ci=!1,R=m(w,A),Ci=!1,Jl&&(R=P0(h,m,w,A)),E0(u),R}function E0(u){q.H=ih;var h=Xn!==null&&Xn.next!==null;if(fs=0,Nn=Xn=fn=null,fu=!1,Jo=0,Ga=null,h)throw Error(i(300));u===null||li||(u=u.dependencies,u!==null&&op(u)&&(li=!0))}function P0(u,h,m,w){fn=u;var A=0;do{if(Jl&&(Ga=null),Jo=0,Jl=!1,25<=A)throw Error(i(301));if(A+=1,Nn=Xn=null,u.updateQueue!=null){var R=u.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}q.H=U0,R=h(m,w)}while(Jl);return R}function Py(){var u=q.H,h=u.useState()[0];return h=typeof h.then=="function"?Yd(h):h,u=u.useState()[0],(Xn!==null?Xn.memoizedState:null)!==u&&(fn.flags|=1024),h}function Oy(){var u=pu!==0;return pu=0,u}function Zl(u,h,m){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~m}function fp(u){if(fu){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}fu=!1}fs=0,Nn=Xn=fn=null,Jl=!1,Jo=pu=0,Ga=null}function Ki(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?fn.memoizedState=Nn=u:Nn=Nn.next=u,Nn}function Wr(){if(Xn===null){var u=fn.alternate;u=u!==null?u.memoizedState:null}else u=Xn.next;var h=Nn===null?fn.memoizedState:Nn.next;if(h!==null)Nn=h,Xn=u;else{if(u===null)throw fn.alternate===null?Error(i(467)):Error(i(310));Xn=u,u={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},Nn===null?fn.memoizedState=Nn=u:Nn=Nn.next=u}return Nn}function ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yd(u){var h=Jo;return Jo+=1,Ga===null&&(Ga=[]),u=Ty(Ga,u,h),h=fn,(Nn===null?h.memoizedState:Nn.next)===null&&(h=h.alternate,q.H=h===null||h.memoizedState===null?q0:Yy),u}function pp(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Yd(u);if(u.$$typeof===C)return Lr(u)}throw Error(i(438,String(u)))}function Kd(u){var h=null,m=fn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var w=fn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(h={data:w.data.map(function(A){return A.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=ec(),fn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(u),w=0;w<u;w++)m[w]=$;return h.index++,m}function Ms(u,h){return typeof h=="function"?h(u):h}function mp(u){var h=Wr();return Dy(h,Xn,u)}function Dy(u,h,m){var w=u.queue;if(w===null)throw Error(i(311));w.lastRenderedReducer=m;var A=u.baseQueue,R=w.pending;if(R!==null){if(A!==null){var J=A.next;A.next=R.next,R.next=J}h.baseQueue=A=R,w.pending=null}if(R=u.baseState,A===null)u.memoizedState=R;else{h=A.next;var he=J=null,ke=null,Xe=h,ot=!1;do{var ft=Xe.lane&-536870913;if(ft!==Xe.lane?(Dn&ft)===ft:(fs&ft)===ft){var tt=Xe.revertLane;if(tt===0)ke!==null&&(ke=ke.next={lane:0,revertLane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),ft===uu&&(ot=!0);else if((fs&tt)===tt){Xe=Xe.next,tt===uu&&(ot=!0);continue}else ft={lane:0,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},ke===null?(he=ke=ft,J=R):ke=ke.next=ft,fn.lanes|=tt,al|=tt;ft=Xe.action,Ci&&m(R,ft),R=Xe.hasEagerState?Xe.eagerState:m(R,ft)}else tt={lane:ft,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},ke===null?(he=ke=tt,J=R):ke=ke.next=tt,fn.lanes|=ft,al|=ft;Xe=Xe.next}while(Xe!==null&&Xe!==h);if(ke===null?J=R:ke.next=he,!ma(R,u.memoizedState)&&(li=!0,ot&&(m=Yi,m!==null)))throw m;u.memoizedState=R,u.baseState=J,u.baseQueue=ke,w.lastRenderedState=R}return A===null&&(w.lanes=0),[u.memoizedState,w.dispatch]}function My(u){var h=Wr(),m=h.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=u;var w=m.dispatch,A=m.pending,R=h.memoizedState;if(A!==null){m.pending=null;var J=A=A.next;do R=u(R,J.action),J=J.next;while(J!==A);ma(R,h.memoizedState)||(li=!0),h.memoizedState=R,h.baseQueue===null&&(h.baseState=R),m.lastRenderedState=R}return[R,w]}function Iy(u,h,m){var w=fn,A=Wr(),R=Sn;if(R){if(m===void 0)throw Error(i(407));m=m()}else m=h();var J=!ma((Xn||A).memoizedState,m);J&&(A.memoizedState=m,li=!0),A=A.queue;var he=yp.bind(null,w,A,u);if(Jd(2048,8,he,[u]),A.getSnapshot!==h||J||Nn!==null&&Nn.memoizedState.tag&1){if(w.flags|=2048,mu(9,wp(),O0.bind(null,w,A,m,h),null),mr===null)throw Error(i(349));R||(fs&124)!==0||gp(w,h,m)}return m}function gp(u,h,m){u.flags|=16384,u={getSnapshot:h,value:m},h=fn.updateQueue,h===null?(h=ec(),fn.updateQueue=h,h.stores=[u]):(m=h.stores,m===null?h.stores=[u]:m.push(u))}function O0(u,h,m,w){h.value=m,h.getSnapshot=w,Ry(h)&&Ly(u)}function yp(u,h,m){return m(function(){Ry(h)&&Ly(u)})}function Ry(u){var h=u.getSnapshot;u=u.value;try{var m=h();return!ma(u,m)}catch{return!0}}function Ly(u){var h=ql(u,2);h!==null&&wa(h,u,2)}function xp(u){var h=Ki();if(typeof u=="function"){var m=u;if(u=m(),Ci){pe(!0);try{m()}finally{pe(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:u},h}function Qd(u,h,m,w){return u.baseState=m,Dy(u,Xn,typeof w=="function"?w:Ms)}function i_(u,h,m,w,A){if(Cp(u))throw Error(i(485));if(u=h.action,u!==null){var R={payload:A,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){R.listeners.push(J)}};q.T!==null?m(!0):R.isTransition=!1,w(R),m=h.pending,m===null?(R.next=h.pending=R,Fy(h,R)):(R.next=m.next,h.pending=m.next=R)}}function Fy(u,h){var m=h.action,w=h.payload,A=u.state;if(h.isTransition){var R=q.T,J={};q.T=J;try{var he=m(A,w),ke=q.S;ke!==null&&ke(J,he),$y(u,h,he)}catch(Xe){vp(u,h,Xe)}finally{q.T=R}}else try{R=m(A,w),$y(u,h,R)}catch(Xe){vp(u,h,Xe)}}function $y(u,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(w){D0(u,h,w)},function(w){return vp(u,h,w)}):D0(u,h,m)}function D0(u,h,m){h.status="fulfilled",h.value=m,M0(h),u.state=m,h=u.pending,h!==null&&(m=h.next,m===h?u.pending=null:(m=m.next,h.next=m,Fy(u,m)))}function vp(u,h,m){var w=u.pending;if(u.pending=null,w!==null){w=w.next;do h.status="rejected",h.reason=m,M0(h),h=h.next;while(h!==w)}u.action=null}function M0(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function bp(u,h){return h}function By(u,h){if(Sn){var m=mr.formState;if(m!==null){e:{var w=fn;if(Sn){if(kr){t:{for(var A=kr,R=Gi;A.nodeType!==8;){if(!R){A=null;break t}if(A=gs(A.nextSibling),A===null){A=null;break t}}R=A.data,A=R==="F!"||R==="F"?A:null}if(A){kr=gs(A.nextSibling),w=A.data==="F!";break e}}Va(w)}w=!1}w&&(h=m[0])}}return m=Ki(),m.memoizedState=m.baseState=h,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bp,lastRenderedState:h},m.queue=w,m=Hy.bind(null,fn,w),w.dispatch=m,w=xp(!1),R=Gy.bind(null,fn,!1,w.queue),w=Ki(),A={state:h,dispatch:null,action:u,pending:null},w.queue=A,m=i_.bind(null,fn,A,R,m),A.dispatch=m,w.memoizedState=u,[h,m,!1]}function jp(u){var h=Wr();return I0(h,Xn,u)}function I0(u,h,m){if(h=Dy(u,h,bp)[0],u=mp(Ms)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var w=Yd(h)}catch(J){throw J===Ri?up:J}else w=h;h=Wr();var A=h.queue,R=A.dispatch;return m!==h.memoizedState&&(fn.flags|=2048,mu(9,wp(),zy.bind(null,A,m),null)),[w,R,u]}function zy(u,h){u.action=h}function dn(u){var h=Wr(),m=Xn;if(m!==null)return I0(h,m,u);Wr(),h=h.memoizedState,m=Wr();var w=m.queue.dispatch;return m.memoizedState=u,[h,w,!1]}function mu(u,h,m,w){return u={tag:u,create:m,deps:w,inst:h,next:null},h=fn.updateQueue,h===null&&(h=ec(),fn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=u.next=u:(w=m.next,m.next=u,u.next=w,h.lastEffect=u),u}function wp(){return{destroy:void 0,resource:void 0}}function gu(){return Wr().memoizedState}function Xd(u,h,m,w){var A=Ki();w=w===void 0?null:w,fn.flags|=u,A.memoizedState=mu(1|h,wp(),m,w)}function Jd(u,h,m,w){var A=Wr();w=w===void 0?null:w;var R=A.memoizedState.inst;Xn!==null&&w!==null&&Wd(w,Xn.memoizedState.deps)?A.memoizedState=mu(h,R,m,w):(fn.flags|=u,A.memoizedState=mu(1|h,R,m,w))}function R0(u,h){Xd(8390656,8,u,h)}function xa(u,h){Jd(2048,8,u,h)}function L0(u,h){return Jd(4,2,u,h)}function Zd(u,h){return Jd(4,4,u,h)}function Sp(u,h){if(typeof h=="function"){u=u();var m=h(u);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function qy(u,h,m){m=m!=null?m.concat([u]):null,Jd(4,4,Sp.bind(null,h,u),m)}function Np(){}function Qi(u,h){var m=Wr();h=h===void 0?null:h;var w=m.memoizedState;return h!==null&&Wd(h,w[1])?w[0]:(m.memoizedState=[u,h],u)}function uo(u,h){var m=Wr();h=h===void 0?null:h;var w=m.memoizedState;if(h!==null&&Wd(h,w[1]))return w[0];if(w=u(),Ci){pe(!0);try{u()}finally{pe(!1)}}return m.memoizedState=[w,h],w}function eh(u,h,m){return m===void 0||(fs&1073741824)!==0?u.memoizedState=h:(u.memoizedState=m,u=g1(),fn.lanes|=u,al|=u,m)}function Uy(u,h,m,w){return ma(m,h)?m:Xl.current!==null?(u=eh(u,m,w),ma(u,h)||(li=!0),u):(fs&42)===0?(li=!0,u.memoizedState=m):(u=g1(),fn.lanes|=u,al|=u,h)}function th(u,h,m,w,A){var R=W.p;W.p=R!==0&&8>R?R:8;var J=q.T,he={};q.T=he,Gy(u,!1,h,m);try{var ke=A(),Xe=q.S;if(Xe!==null&&Xe(he,ke),ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var ot=r_(ke,w);tc(u,h,ot,ki(u))}else tc(u,h,w,ki(u))}catch(ft){tc(u,h,{then:function(){},status:"rejected",reason:ft},ki())}finally{W.p=R,q.T=J}}function F0(){}function nh(u,h,m,w){if(u.tag!==5)throw Error(i(476));var A=Vy(u).queue;th(u,A,h,ae,m===null?F0:function(){return _p(u),m(w)})}function Vy(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:ae},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:m},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function _p(u){var h=Vy(u).next.queue;tc(u,h,{},ki())}function rh(){return Lr(Lu)}function ho(){return Wr().memoizedState}function $0(){return Wr().memoizedState}function Zo(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var m=ki();u=Qo(m);var w=lo(h,u,m);w!==null&&(wa(w,h,m),Hd(w,h,m)),h={cache:Ny()},u.payload=h;return}h=h.return}}function B0(u,h,m){var w=ki();m={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Cp(u)?z0(h,m):(m=ou(u,h,m,w),m!==null&&(wa(m,u,w),Wy(m,h,w)))}function Hy(u,h,m){var w=ki();tc(u,h,m,w)}function tc(u,h,m,w){var A={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Cp(u))z0(h,A);else{var R=u.alternate;if(u.lanes===0&&(R===null||R.lanes===0)&&(R=h.lastRenderedReducer,R!==null))try{var J=h.lastRenderedState,he=R(J,m);if(A.hasEagerState=!0,A.eagerState=he,ma(he,J))return cs(u,h,A,0),mr===null&&zl(),!1}catch{}finally{}if(m=ou(u,h,A,w),m!==null)return wa(m,u,w),Wy(m,h,w),!0}return!1}function Gy(u,h,m,w){if(w={lane:2,revertLane:Yp(),action:w,hasEagerState:!1,eagerState:null,next:null},Cp(u)){if(h)throw Error(i(479))}else h=ou(u,m,w,2),h!==null&&wa(h,u,2)}function Cp(u){var h=u.alternate;return u===fn||h!==null&&h===fn}function z0(u,h){Jl=fu=!0;var m=u.pending;m===null?h.next=h:(h.next=m.next,m.next=h),u.pending=h}function Wy(u,h,m){if((m&4194048)!==0){var w=h.lanes;w&=u.pendingLanes,m|=w,h.lanes=m,qe(u,m)}}var ih={readContext:Lr,use:pp,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useLayoutEffect:Cn,useInsertionEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useSyncExternalStore:Cn,useId:Cn,useHostTransitionStatus:Cn,useFormState:Cn,useActionState:Cn,useOptimistic:Cn,useMemoCache:Cn,useCacheRefresh:Cn},q0={readContext:Lr,use:pp,useCallback:function(u,h){return Ki().memoizedState=[u,h===void 0?null:h],u},useContext:Lr,useEffect:R0,useImperativeHandle:function(u,h,m){m=m!=null?m.concat([u]):null,Xd(4194308,4,Sp.bind(null,h,u),m)},useLayoutEffect:function(u,h){return Xd(4194308,4,u,h)},useInsertionEffect:function(u,h){Xd(4,2,u,h)},useMemo:function(u,h){var m=Ki();h=h===void 0?null:h;var w=u();if(Ci){pe(!0);try{u()}finally{pe(!1)}}return m.memoizedState=[w,h],w},useReducer:function(u,h,m){var w=Ki();if(m!==void 0){var A=m(h);if(Ci){pe(!0);try{m(h)}finally{pe(!1)}}}else A=h;return w.memoizedState=w.baseState=A,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:A},w.queue=u,u=u.dispatch=B0.bind(null,fn,u),[w.memoizedState,u]},useRef:function(u){var h=Ki();return u={current:u},h.memoizedState=u},useState:function(u){u=xp(u);var h=u.queue,m=Hy.bind(null,fn,h);return h.dispatch=m,[u.memoizedState,m]},useDebugValue:Np,useDeferredValue:function(u,h){var m=Ki();return eh(m,u,h)},useTransition:function(){var u=xp(!1);return u=th.bind(null,fn,u.queue,!0,!1),Ki().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,m){var w=fn,A=Ki();if(Sn){if(m===void 0)throw Error(i(407));m=m()}else{if(m=h(),mr===null)throw Error(i(349));(Dn&124)!==0||gp(w,h,m)}A.memoizedState=m;var R={value:m,getSnapshot:h};return A.queue=R,R0(yp.bind(null,w,R,u),[u]),w.flags|=2048,mu(9,wp(),O0.bind(null,w,R,m,h),null),m},useId:function(){var u=Ki(),h=mr.identifierPrefix;if(Sn){var m=so,w=Tr;m=(w&~(1<<32-me(w)-1)).toString(32)+m,h=""+h+"R"+m,m=pu++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=A0++,h=""+h+"r"+m.toString(32)+"";return u.memoizedState=h},useHostTransitionStatus:rh,useFormState:By,useActionState:By,useOptimistic:function(u){var h=Ki();h.memoizedState=h.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=Gy.bind(null,fn,!0,m),m.dispatch=h,[u,h]},useMemoCache:Kd,useCacheRefresh:function(){return Ki().memoizedState=Zo.bind(null,fn)}},Yy={readContext:Lr,use:pp,useCallback:Qi,useContext:Lr,useEffect:xa,useImperativeHandle:qy,useInsertionEffect:L0,useLayoutEffect:Zd,useMemo:uo,useReducer:mp,useRef:gu,useState:function(){return mp(Ms)},useDebugValue:Np,useDeferredValue:function(u,h){var m=Wr();return Uy(m,Xn.memoizedState,u,h)},useTransition:function(){var u=mp(Ms)[0],h=Wr().memoizedState;return[typeof u=="boolean"?u:Yd(u),h]},useSyncExternalStore:Iy,useId:ho,useHostTransitionStatus:rh,useFormState:jp,useActionState:jp,useOptimistic:function(u,h){var m=Wr();return Qd(m,Xn,u,h)},useMemoCache:Kd,useCacheRefresh:$0},U0={readContext:Lr,use:pp,useCallback:Qi,useContext:Lr,useEffect:xa,useImperativeHandle:qy,useInsertionEffect:L0,useLayoutEffect:Zd,useMemo:uo,useReducer:My,useRef:gu,useState:function(){return My(Ms)},useDebugValue:Np,useDeferredValue:function(u,h){var m=Wr();return Xn===null?eh(m,u,h):Uy(m,Xn.memoizedState,u,h)},useTransition:function(){var u=My(Ms)[0],h=Wr().memoizedState;return[typeof u=="boolean"?u:Yd(u),h]},useSyncExternalStore:Iy,useId:ho,useHostTransitionStatus:rh,useFormState:dn,useActionState:dn,useOptimistic:function(u,h){var m=Wr();return Xn!==null?Qd(m,Xn,u,h):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:Kd,useCacheRefresh:$0},ei=null,Xi=0;function Tp(u){var h=Xi;return Xi+=1,ei===null&&(ei=[]),Ty(ei,u,h)}function ah(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function nc(u,h){throw h.$$typeof===p?Error(i(525)):(u=Object.prototype.toString.call(h),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function rc(u){var h=u._init;return h(u._payload)}function Ky(u){function h(He,Fe){if(u){var Qe=He.deletions;Qe===null?(He.deletions=[Fe],He.flags|=16):Qe.push(Fe)}}function m(He,Fe){if(!u)return null;for(;Fe!==null;)h(He,Fe),Fe=Fe.sibling;return null}function w(He){for(var Fe=new Map;He!==null;)He.key!==null?Fe.set(He.key,He):Fe.set(He.index,He),He=He.sibling;return Fe}function A(He,Fe){return He=Ii(He,Fe),He.index=0,He.sibling=null,He}function R(He,Fe,Qe){return He.index=Qe,u?(Qe=He.alternate,Qe!==null?(Qe=Qe.index,Qe<Fe?(He.flags|=67108866,Fe):Qe):(He.flags|=67108866,Fe)):(He.flags|=1048576,Fe)}function J(He){return u&&He.alternate===null&&(He.flags|=67108866),He}function he(He,Fe,Qe,dt){return Fe===null||Fe.tag!==6?(Fe=jy(Qe,He.mode,dt),Fe.return=He,Fe):(Fe=A(Fe,Qe),Fe.return=He,Fe)}function ke(He,Fe,Qe,dt){var Pt=Qe.type;return Pt===v?ot(He,Fe,Qe.props.children,dt,Qe.key):Fe!==null&&(Fe.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===F&&rc(Pt)===Fe.type)?(Fe=A(Fe,Qe.props),ah(Fe,Qe),Fe.return=He,Fe):(Fe=ap(Qe.type,Qe.key,Qe.props,null,He.mode,dt),ah(Fe,Qe),Fe.return=He,Fe)}function Xe(He,Fe,Qe,dt){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==Qe.containerInfo||Fe.stateNode.implementation!==Qe.implementation?(Fe=lu(Qe,He.mode,dt),Fe.return=He,Fe):(Fe=A(Fe,Qe.children||[]),Fe.return=He,Fe)}function ot(He,Fe,Qe,dt,Pt){return Fe===null||Fe.tag!==7?(Fe=Hl(Qe,He.mode,dt,Pt),Fe.return=He,Fe):(Fe=A(Fe,Qe),Fe.return=He,Fe)}function ft(He,Fe,Qe){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Fe=jy(""+Fe,He.mode,Qe),Fe.return=He,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case y:return Qe=ap(Fe.type,Fe.key,Fe.props,null,He.mode,Qe),ah(Qe,Fe),Qe.return=He,Qe;case x:return Fe=lu(Fe,He.mode,Qe),Fe.return=He,Fe;case F:var dt=Fe._init;return Fe=dt(Fe._payload),ft(He,Fe,Qe)}if(X(Fe)||V(Fe))return Fe=Hl(Fe,He.mode,Qe,null),Fe.return=He,Fe;if(typeof Fe.then=="function")return ft(He,Tp(Fe),Qe);if(Fe.$$typeof===C)return ft(He,lp(He,Fe),Qe);nc(He,Fe)}return null}function tt(He,Fe,Qe,dt){var Pt=Fe!==null?Fe.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Pt!==null?null:he(He,Fe,""+Qe,dt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case y:return Qe.key===Pt?ke(He,Fe,Qe,dt):null;case x:return Qe.key===Pt?Xe(He,Fe,Qe,dt):null;case F:return Pt=Qe._init,Qe=Pt(Qe._payload),tt(He,Fe,Qe,dt)}if(X(Qe)||V(Qe))return Pt!==null?null:ot(He,Fe,Qe,dt,null);if(typeof Qe.then=="function")return tt(He,Fe,Tp(Qe),dt);if(Qe.$$typeof===C)return tt(He,Fe,lp(He,Qe),dt);nc(He,Qe)}return null}function Ze(He,Fe,Qe,dt,Pt){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return He=He.get(Qe)||null,he(Fe,He,""+dt,Pt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case y:return He=He.get(dt.key===null?Qe:dt.key)||null,ke(Fe,He,dt,Pt);case x:return He=He.get(dt.key===null?Qe:dt.key)||null,Xe(Fe,He,dt,Pt);case F:var gn=dt._init;return dt=gn(dt._payload),Ze(He,Fe,Qe,dt,Pt)}if(X(dt)||V(dt))return He=He.get(Qe)||null,ot(Fe,He,dt,Pt,null);if(typeof dt.then=="function")return Ze(He,Fe,Qe,Tp(dt),Pt);if(dt.$$typeof===C)return Ze(He,Fe,Qe,lp(Fe,dt),Pt);nc(Fe,dt)}return null}function Ht(He,Fe,Qe,dt){for(var Pt=null,gn=null,Lt=Fe,Gt=Fe=0,di=null;Lt!==null&&Gt<Qe.length;Gt++){Lt.index>Gt?(di=Lt,Lt=null):di=Lt.sibling;var Rn=tt(He,Lt,Qe[Gt],dt);if(Rn===null){Lt===null&&(Lt=di);break}u&&Lt&&Rn.alternate===null&&h(He,Lt),Fe=R(Rn,Fe,Gt),gn===null?Pt=Rn:gn.sibling=Rn,gn=Rn,Lt=di}if(Gt===Qe.length)return m(He,Lt),Sn&&Gl(He,Gt),Pt;if(Lt===null){for(;Gt<Qe.length;Gt++)Lt=ft(He,Qe[Gt],dt),Lt!==null&&(Fe=R(Lt,Fe,Gt),gn===null?Pt=Lt:gn.sibling=Lt,gn=Lt);return Sn&&Gl(He,Gt),Pt}for(Lt=w(Lt);Gt<Qe.length;Gt++)di=Ze(Lt,He,Gt,Qe[Gt],dt),di!==null&&(u&&di.alternate!==null&&Lt.delete(di.key===null?Gt:di.key),Fe=R(di,Fe,Gt),gn===null?Pt=di:gn.sibling=di,gn=di);return u&&Lt.forEach(function(ml){return h(He,ml)}),Sn&&Gl(He,Gt),Pt}function Vt(He,Fe,Qe,dt){if(Qe==null)throw Error(i(151));for(var Pt=null,gn=null,Lt=Fe,Gt=Fe=0,di=null,Rn=Qe.next();Lt!==null&&!Rn.done;Gt++,Rn=Qe.next()){Lt.index>Gt?(di=Lt,Lt=null):di=Lt.sibling;var ml=tt(He,Lt,Rn.value,dt);if(ml===null){Lt===null&&(Lt=di);break}u&&Lt&&ml.alternate===null&&h(He,Lt),Fe=R(ml,Fe,Gt),gn===null?Pt=ml:gn.sibling=ml,gn=ml,Lt=di}if(Rn.done)return m(He,Lt),Sn&&Gl(He,Gt),Pt;if(Lt===null){for(;!Rn.done;Gt++,Rn=Qe.next())Rn=ft(He,Rn.value,dt),Rn!==null&&(Fe=R(Rn,Fe,Gt),gn===null?Pt=Rn:gn.sibling=Rn,gn=Rn);return Sn&&Gl(He,Gt),Pt}for(Lt=w(Lt);!Rn.done;Gt++,Rn=Qe.next())Rn=Ze(Lt,He,Gt,Rn.value,dt),Rn!==null&&(u&&Rn.alternate!==null&&Lt.delete(Rn.key===null?Gt:Rn.key),Fe=R(Rn,Fe,Gt),gn===null?Pt=Rn:gn.sibling=Rn,gn=Rn);return u&&Lt.forEach(function(B_){return h(He,B_)}),Sn&&Gl(He,Gt),Pt}function ir(He,Fe,Qe,dt){if(typeof Qe=="object"&&Qe!==null&&Qe.type===v&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case y:e:{for(var Pt=Qe.key;Fe!==null;){if(Fe.key===Pt){if(Pt=Qe.type,Pt===v){if(Fe.tag===7){m(He,Fe.sibling),dt=A(Fe,Qe.props.children),dt.return=He,He=dt;break e}}else if(Fe.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===F&&rc(Pt)===Fe.type){m(He,Fe.sibling),dt=A(Fe,Qe.props),ah(dt,Qe),dt.return=He,He=dt;break e}m(He,Fe);break}else h(He,Fe);Fe=Fe.sibling}Qe.type===v?(dt=Hl(Qe.props.children,He.mode,dt,Qe.key),dt.return=He,He=dt):(dt=ap(Qe.type,Qe.key,Qe.props,null,He.mode,dt),ah(dt,Qe),dt.return=He,He=dt)}return J(He);case x:e:{for(Pt=Qe.key;Fe!==null;){if(Fe.key===Pt)if(Fe.tag===4&&Fe.stateNode.containerInfo===Qe.containerInfo&&Fe.stateNode.implementation===Qe.implementation){m(He,Fe.sibling),dt=A(Fe,Qe.children||[]),dt.return=He,He=dt;break e}else{m(He,Fe);break}else h(He,Fe);Fe=Fe.sibling}dt=lu(Qe,He.mode,dt),dt.return=He,He=dt}return J(He);case F:return Pt=Qe._init,Qe=Pt(Qe._payload),ir(He,Fe,Qe,dt)}if(X(Qe))return Ht(He,Fe,Qe,dt);if(V(Qe)){if(Pt=V(Qe),typeof Pt!="function")throw Error(i(150));return Qe=Pt.call(Qe),Vt(He,Fe,Qe,dt)}if(typeof Qe.then=="function")return ir(He,Fe,Tp(Qe),dt);if(Qe.$$typeof===C)return ir(He,Fe,lp(He,Qe),dt);nc(He,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint"?(Qe=""+Qe,Fe!==null&&Fe.tag===6?(m(He,Fe.sibling),dt=A(Fe,Qe),dt.return=He,He=dt):(m(He,Fe),dt=jy(Qe,He.mode,dt),dt.return=He,He=dt),J(He)):m(He,Fe)}return function(He,Fe,Qe,dt){try{Xi=0;var Pt=ir(He,Fe,Qe,dt);return ei=null,Pt}catch(Lt){if(Lt===Ri||Lt===up)throw Lt;var gn=Hi(29,Lt,null,He.mode);return gn.lanes=dt,gn.return=He,gn}finally{}}}var ic=Ky(!0),V0=Ky(!1),va=le(null),Li=null;function Wa(u){var h=u.alternate;K(Fr,Fr.current&1),K(va,u),Li===null&&(h===null||Xl.current!==null||h.memoizedState!==null)&&(Li=u)}function H0(u){if(u.tag===22){if(K(Fr,Fr.current),K(va,u),Li===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(Li=u)}}else fo()}function fo(){K(Fr,Fr.current),K(va,va.current)}function Is(u){je(va),Li===u&&(Li=null),je(Fr)}var Fr=le(0);function sh(u){for(var h=u;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||$i(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function yu(u,h,m,w){h=u.memoizedState,m=m(w,h),m=m==null?h:f({},h,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var oh={enqueueSetState:function(u,h,m){u=u._reactInternals;var w=ki(),A=Qo(w);A.payload=h,m!=null&&(A.callback=m),h=lo(u,A,w),h!==null&&(wa(h,u,w),Hd(h,u,w))},enqueueReplaceState:function(u,h,m){u=u._reactInternals;var w=ki(),A=Qo(w);A.tag=1,A.payload=h,m!=null&&(A.callback=m),h=lo(u,A,w),h!==null&&(wa(h,u,w),Hd(h,u,w))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var m=ki(),w=Qo(m);w.tag=2,h!=null&&(w.callback=h),h=lo(u,w,m),h!==null&&(wa(h,u,m),Hd(h,u,m))}};function lh(u,h,m,w,A,R,J){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(w,R,J):h.prototype&&h.prototype.isPureReactComponent?!Os(m,w)||!Os(A,R):!0}function G0(u,h,m,w){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,w),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,w),h.state!==u&&oh.enqueueReplaceState(h,h.state,null)}function el(u,h){var m=h;if("ref"in h){m={};for(var w in h)w!=="ref"&&(m[w]=h[w])}if(u=u.defaultProps){m===h&&(m=f({},m));for(var A in u)m[A]===void 0&&(m[A]=u[A])}return m}var ac=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function Qy(u){ac(u)}function kp(u){console.error(u)}function W0(u){ac(u)}function ch(u,h){try{var m=u.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(w){setTimeout(function(){throw w})}}function Rs(u,h,m){try{var w=u.onCaughtError;w(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Ap(u,h,m){return m=Qo(m),m.tag=3,m.payload={element:null},m.callback=function(){ch(u,h)},m}function Xy(u){return u=Qo(u),u.tag=3,u}function Y0(u,h,m,w){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var R=w.value;u.payload=function(){return A(R)},u.callback=function(){Rs(h,m,w)}}var J=m.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(u.callback=function(){Rs(h,m,w),typeof A!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var he=w.stack;this.componentDidCatch(w.value,{componentStack:he!==null?he:""})})}function K0(u,h,m,w,A){if(m.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(h=m.alternate,h!==null&&qd(h,m,A,!0),m=va.current,m!==null){switch(m.tag){case 13:return Li===null?gx():m.alternate===null&&$r===0&&($r=3),m.flags&=-257,m.flags|=65536,m.lanes=A,w===Cy?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([w]):h.add(w),vx(u,w,A)),!1;case 22:return m.flags|=65536,w===Cy?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([w])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([w]):m.add(w)),vx(u,w,A)),!1}throw Error(i(435,m.tag))}return vx(u,w,A),gx(),!1}if(Sn)return h=va.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=A,w!==cu&&(u=Error(i(422),{cause:w}),Yo(Mi(u,m)))):(w!==cu&&(h=Error(i(423),{cause:w}),Yo(Mi(h,m))),u=u.current.alternate,u.flags|=65536,A&=-A,u.lanes|=A,w=Mi(w,m),A=Ap(u.stateNode,w,A),ds(u,A),$r!==4&&($r=2)),!1;var R=Error(i(520),{cause:w});if(R=Mi(R,m),vh===null?vh=[R]:vh.push(R),$r!==4&&($r=2),h===null)return!0;w=Mi(w,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,u=A&-A,m.lanes|=u,u=Ap(m.stateNode,w,u),ds(m,u),!1;case 1:if(h=m.type,R=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(sl===null||!sl.has(R))))return m.flags|=65536,A&=-A,m.lanes|=A,A=Xy(A),Y0(A,u,m,w),ds(m,A),!1}m=m.return}while(m!==null);return!1}var Q0=Error(i(461)),li=!1;function wr(u,h,m,w){h.child=u===null?V0(h,null,m,w):ic(h,u.child,m,w)}function Ep(u,h,m,w,A){m=m.render;var R=h.ref;if("ref"in w){var J={};for(var he in w)he!=="ref"&&(J[he]=w[he])}else J=w;return Yl(h),w=Ey(u,h,m,J,R,A),he=Oy(),u!==null&&!li?(Zl(u,h,A),po(u,h,A)):(Sn&&he&&Sy(h),h.flags|=1,wr(u,h,w,A),h.child)}function Pp(u,h,m,w,A){if(u===null){var R=m.type;return typeof R=="function"&&!Vl(R)&&R.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=R,Op(u,h,R,w,A)):(u=ap(m.type,null,w,h,h.mode,A),u.ref=h.ref,u.return=h,h.child=u)}if(R=u.child,!ps(u,A)){var J=R.memoizedProps;if(m=m.compare,m=m!==null?m:Os,m(J,w)&&u.ref===h.ref)return po(u,h,A)}return h.flags|=1,u=Ii(R,w),u.ref=h.ref,u.return=h,h.child=u}function Op(u,h,m,w,A){if(u!==null){var R=u.memoizedProps;if(Os(R,w)&&u.ref===h.ref)if(li=!1,h.pendingProps=w=R,ps(u,A))(u.flags&131072)!==0&&(li=!0);else return h.lanes=u.lanes,po(u,h,A)}return xu(u,h,m,w,A)}function uh(u,h,m){var w=h.pendingProps,A=w.children,R=u!==null?u.memoizedState:null;if(w.mode==="hidden"){if((h.flags&128)!==0){if(w=R!==null?R.baseLanes|m:m,u!==null){for(A=h.child=u.child,R=0;A!==null;)R=R|A.lanes|A.childLanes,A=A.sibling;h.childLanes=R&~w}else h.childLanes=0,h.child=null;return sc(u,h,w,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&cp(h,R!==null?R.cachePool:null),R!==null?co(h,R):hp(),H0(h);else return h.lanes=h.childLanes=536870912,sc(u,h,R!==null?R.baseLanes|m:m,m)}else R!==null?(cp(h,R.cachePool),co(h,R),fo(),h.memoizedState=null):(u!==null&&cp(h,null),hp(),fo());return wr(u,h,A,m),h.child}function sc(u,h,m,w){var A=oo();return A=A===null?null:{parent:dr._currentValue,pool:A},h.memoizedState={baseLanes:m,cachePool:A},u!==null&&cp(h,null),hp(),H0(h),u!==null&&qd(u,h,w,!0),null}function $t(u,h){var m=h.ref;if(m===null)u!==null&&u.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(u===null||u.ref!==m)&&(h.flags|=4194816)}}function xu(u,h,m,w,A){return Yl(h),m=Ey(u,h,m,w,void 0,A),w=Oy(),u!==null&&!li?(Zl(u,h,A),po(u,h,A)):(Sn&&w&&Sy(h),h.flags|=1,wr(u,h,m,A),h.child)}function Dp(u,h,m,w,A,R){return Yl(h),h.updateQueue=null,m=P0(h,w,m,A),E0(u),w=Oy(),u!==null&&!li?(Zl(u,h,R),po(u,h,R)):(Sn&&w&&Sy(h),h.flags|=1,wr(u,h,m,R),h.child)}function tl(u,h,m,w,A){if(Yl(h),h.stateNode===null){var R=Ul,J=m.contextType;typeof J=="object"&&J!==null&&(R=Lr(J)),R=new m(w,R),h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=oh,h.stateNode=R,R._reactInternals=h,R=h.stateNode,R.props=w,R.state=h.memoizedState,R.refs={},Ql(h),J=m.contextType,R.context=typeof J=="object"&&J!==null?Lr(J):Ul,R.state=h.memoizedState,J=m.getDerivedStateFromProps,typeof J=="function"&&(yu(h,m,J,w),R.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(J=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),J!==R.state&&oh.enqueueReplaceState(R,R.state,null),_i(h,w,R,A),hs(),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308),w=!0}else if(u===null){R=h.stateNode;var he=h.memoizedProps,ke=el(m,he);R.props=ke;var Xe=R.context,ot=m.contextType;J=Ul,typeof ot=="object"&&ot!==null&&(J=Lr(ot));var ft=m.getDerivedStateFromProps;ot=typeof ft=="function"||typeof R.getSnapshotBeforeUpdate=="function",he=h.pendingProps!==he,ot||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(he||Xe!==J)&&G0(h,R,w,J),Ds=!1;var tt=h.memoizedState;R.state=tt,_i(h,w,R,A),hs(),Xe=h.memoizedState,he||tt!==Xe||Ds?(typeof ft=="function"&&(yu(h,m,ft,w),Xe=h.memoizedState),(ke=Ds||lh(h,m,ke,w,tt,Xe,J))?(ot||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(h.flags|=4194308)):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=w,h.memoizedState=Xe),R.props=w,R.state=Xe,R.context=J,w=ke):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),w=!1)}else{R=h.stateNode,hu(u,h),J=h.memoizedProps,ot=el(m,J),R.props=ot,ft=h.pendingProps,tt=R.context,Xe=m.contextType,ke=Ul,typeof Xe=="object"&&Xe!==null&&(ke=Lr(Xe)),he=m.getDerivedStateFromProps,(Xe=typeof he=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(J!==ft||tt!==ke)&&G0(h,R,w,ke),Ds=!1,tt=h.memoizedState,R.state=tt,_i(h,w,R,A),hs();var Ze=h.memoizedState;J!==ft||tt!==Ze||Ds||u!==null&&u.dependencies!==null&&op(u.dependencies)?(typeof he=="function"&&(yu(h,m,he,w),Ze=h.memoizedState),(ot=Ds||lh(h,m,ot,w,tt,Ze,ke)||u!==null&&u.dependencies!==null&&op(u.dependencies))?(Xe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(w,Ze,ke),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(w,Ze,ke)),typeof R.componentDidUpdate=="function"&&(h.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof R.componentDidUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=1024),h.memoizedProps=w,h.memoizedState=Ze),R.props=w,R.state=Ze,R.context=ke,w=ot):(typeof R.componentDidUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&tt===u.memoizedState||(h.flags|=1024),w=!1)}return R=w,$t(u,h),w=(h.flags&128)!==0,R||w?(R=h.stateNode,m=w&&typeof m.getDerivedStateFromError!="function"?null:R.render(),h.flags|=1,u!==null&&w?(h.child=ic(h,u.child,null,A),h.child=ic(h,null,m,A)):wr(u,h,m,A),h.memoizedState=R.state,u=h.child):u=po(u,h,A),u}function X0(u,h,m,w){return zd(),h.flags|=256,wr(u,h,m,w),h.child}var dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mp(u){return{baseLanes:u,cachePool:S0()}}function ci(u,h,m){return u=u!==null?u.childLanes&~m:0,h&&(u|=Ka),u}function J0(u,h,m){var w=h.pendingProps,A=!1,R=(h.flags&128)!==0,J;if((J=R)||(J=u!==null&&u.memoizedState===null?!1:(Fr.current&2)!==0),J&&(A=!0,h.flags&=-129),J=(h.flags&32)!==0,h.flags&=-33,u===null){if(Sn){if(A?Wa(h):fo(),Sn){var he=kr,ke;if(ke=he){e:{for(ke=he,he=Gi;ke.nodeType!==8;){if(!he){he=null;break e}if(ke=gs(ke.nextSibling),ke===null){he=null;break e}}he=ke}he!==null?(h.memoizedState={dehydrated:he,treeContext:jr!==null?{id:Tr,overflow:so}:null,retryLane:536870912,hydrationErrors:null},ke=Hi(18,null,null,0),ke.stateNode=he,ke.return=h,h.child=ke,Zr=h,kr=null,ke=!0):ke=!1}ke||Va(h)}if(he=h.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return $i(he)?h.lanes=32:h.lanes=536870912,null;Is(h)}return he=w.children,w=w.fallback,A?(fo(),A=h.mode,he=hh({mode:"hidden",children:he},A),w=Hl(w,A,m,null),he.return=h,w.return=h,he.sibling=w,h.child=he,A=h.child,A.memoizedState=Mp(m),A.childLanes=ci(u,J,m),h.memoizedState=dh,w):(Wa(h),Jy(h,he))}if(ke=u.memoizedState,ke!==null&&(he=ke.dehydrated,he!==null)){if(R)h.flags&256?(Wa(h),h.flags&=-257,h=Zy(u,h,m)):h.memoizedState!==null?(fo(),h.child=u.child,h.flags|=128,h=null):(fo(),A=w.fallback,he=h.mode,w=hh({mode:"visible",children:w.children},he),A=Hl(A,he,m,null),A.flags|=2,w.return=h,A.return=h,w.sibling=A,h.child=w,ic(h,u.child,null,m),w=h.child,w.memoizedState=Mp(m),w.childLanes=ci(u,J,m),h.memoizedState=dh,h=A);else if(Wa(h),$i(he)){if(J=he.nextSibling&&he.nextSibling.dataset,J)var Xe=J.dgst;J=Xe,w=Error(i(419)),w.stack="",w.digest=J,Yo({value:w,source:null,stack:null}),h=Zy(u,h,m)}else if(li||qd(u,h,m,!1),J=(m&u.childLanes)!==0,li||J){if(J=mr,J!==null&&(w=m&-m,w=(w&42)!==0?1:jt(w),w=(w&(J.suspendedLanes|m))!==0?0:w,w!==0&&w!==ke.retryLane))throw ke.retryLane=w,ql(u,w),wa(J,u,w),Q0;he.data==="$?"||gx(),h=Zy(u,h,m)}else he.data==="$?"?(h.flags|=192,h.child=u.child,h=null):(u=ke.treeContext,kr=gs(he.nextSibling),Zr=h,Sn=!0,us=null,Gi=!1,u!==null&&(qa[Ua++]=Tr,qa[Ua++]=so,qa[Ua++]=jr,Tr=u.id,so=u.overflow,jr=h),h=Jy(h,w.children),h.flags|=4096);return h}return A?(fo(),A=w.fallback,he=h.mode,ke=u.child,Xe=ke.sibling,w=Ii(ke,{mode:"hidden",children:w.children}),w.subtreeFlags=ke.subtreeFlags&65011712,Xe!==null?A=Ii(Xe,A):(A=Hl(A,he,m,null),A.flags|=2),A.return=h,w.return=h,w.sibling=A,h.child=w,w=A,A=h.child,he=u.child.memoizedState,he===null?he=Mp(m):(ke=he.cachePool,ke!==null?(Xe=dr._currentValue,ke=ke.parent!==Xe?{parent:Xe,pool:Xe}:ke):ke=S0(),he={baseLanes:he.baseLanes|m,cachePool:ke}),A.memoizedState=he,A.childLanes=ci(u,J,m),h.memoizedState=dh,w):(Wa(h),m=u.child,u=m.sibling,m=Ii(m,{mode:"visible",children:w.children}),m.return=h,m.sibling=null,u!==null&&(J=h.deletions,J===null?(h.deletions=[u],h.flags|=16):J.push(u)),h.child=m,h.memoizedState=null,m)}function Jy(u,h){return h=hh({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function hh(u,h){return u=Hi(22,u,null,h),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function Zy(u,h,m){return ic(h,u.child,null,m),u=Jy(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function ex(u,h,m){u.lanes|=h;var w=u.alternate;w!==null&&(w.lanes|=h),Wi(u.return,h,m)}function tx(u,h,m,w,A){var R=u.memoizedState;R===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:A}:(R.isBackwards=h,R.rendering=null,R.renderingStartTime=0,R.last=w,R.tail=m,R.tailMode=A)}function Z0(u,h,m){var w=h.pendingProps,A=w.revealOrder,R=w.tail;if(wr(u,h,w.children,m),w=Fr.current,(w&2)!==0)w=w&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&ex(u,m,h);else if(u.tag===19)ex(u,m,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}w&=1}switch(K(Fr,w),A){case"forwards":for(m=h.child,A=null;m!==null;)u=m.alternate,u!==null&&sh(u)===null&&(A=m),m=m.sibling;m=A,m===null?(A=h.child,h.child=null):(A=m.sibling,m.sibling=null),tx(h,!1,A,m,R);break;case"backwards":for(m=null,A=h.child,h.child=null;A!==null;){if(u=A.alternate,u!==null&&sh(u)===null){h.child=A;break}u=A.sibling,A.sibling=m,m=A,A=u}tx(h,!0,m,null,R);break;case"together":tx(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function po(u,h,m){if(u!==null&&(h.dependencies=u.dependencies),al|=h.lanes,(m&h.childLanes)===0)if(u!==null){if(qd(u,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(i(153));if(h.child!==null){for(u=h.child,m=Ii(u,u.pendingProps),h.child=m,m.return=h;u.sibling!==null;)u=u.sibling,m=m.sibling=Ii(u,u.pendingProps),m.return=h;m.sibling=null}return h.child}function ps(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&op(u)))}function Fi(u,h,m){switch(h.tag){case 3:be(h,h.stateNode.containerInfo),ya(h,dr,u.memoizedState.cache),zd();break;case 27:case 5:ve(h);break;case 4:be(h,h.stateNode.containerInfo);break;case 10:ya(h,h.type,h.memoizedProps.value);break;case 13:var w=h.memoizedState;if(w!==null)return w.dehydrated!==null?(Wa(h),h.flags|=128,null):(m&h.child.childLanes)!==0?J0(u,h,m):(Wa(h),u=po(u,h,m),u!==null?u.sibling:null);Wa(h);break;case 19:var A=(u.flags&128)!==0;if(w=(m&h.childLanes)!==0,w||(qd(u,h,m,!1),w=(m&h.childLanes)!==0),A){if(w)return Z0(u,h,m);h.flags|=128}if(A=h.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),K(Fr,Fr.current),w)break;return null;case 22:case 23:return h.lanes=0,uh(u,h,m);case 24:ya(h,dr,u.memoizedState.cache)}return po(u,h,m)}function Ip(u,h,m){if(u!==null)if(u.memoizedProps!==h.pendingProps)li=!0;else{if(!ps(u,m)&&(h.flags&128)===0)return li=!1,Fi(u,h,m);li=(u.flags&131072)!==0}else li=!1,Sn&&(h.flags&1048576)!==0&&wy(h,Fd,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var w=h.elementType,A=w._init;if(w=A(w._payload),h.type=w,typeof w=="function")Vl(w)?(u=el(w,u),h.tag=1,h=tl(null,h,w,u,m)):(h.tag=0,h=xu(null,h,w,u,m));else{if(w!=null){if(A=w.$$typeof,A===O){h.tag=11,h=Ep(null,h,w,u,m);break e}else if(A===I){h.tag=14,h=Pp(null,h,w,u,m);break e}}throw h=te(w)||w,Error(i(306,h,""))}}return h;case 0:return xu(u,h,h.type,h.pendingProps,m);case 1:return w=h.type,A=el(w,h.pendingProps),tl(u,h,w,A,m);case 3:e:{if(be(h,h.stateNode.containerInfo),u===null)throw Error(i(387));w=h.pendingProps;var R=h.memoizedState;A=R.element,hu(u,h),_i(h,w,null,m);var J=h.memoizedState;if(w=J.cache,ya(h,dr,w),w!==R.cache&&mn(h,[dr],m,!0),hs(),w=J.element,R.isDehydrated)if(R={element:w,isDehydrated:!1,cache:J.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=X0(u,h,w,m);break e}else if(w!==A){A=Mi(Error(i(424)),h),Yo(A),h=X0(u,h,w,m);break e}else{switch(u=h.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(kr=gs(u.firstChild),Zr=h,Sn=!0,us=null,Gi=!0,m=V0(h,null,w,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(zd(),w===A){h=po(u,h,m);break e}wr(u,h,w,m)}h=h.child}return h;case 26:return $t(u,h),u===null?(m=K1(h.type,null,h.pendingProps,null))?h.memoizedState=m:Sn||(m=h.type,u=h.pendingProps,w=cc(Me.current).createElement(m),w[_n]=h,w[wn]=u,ri(w,m,u),It(w),h.stateNode=w):h.memoizedState=K1(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:return ve(h),u===null&&Sn&&(w=h.stateNode=G1(h.type,h.pendingProps,Me.current),Zr=h,Gi=!0,A=kr,Qa(h.type)?(kx=A,kr=gs(w.firstChild)):kr=A),wr(u,h,h.pendingProps.children,m),$t(u,h),u===null&&(h.flags|=4194304),h.child;case 5:return u===null&&Sn&&((A=w=kr)&&(w=V1(w,h.type,h.pendingProps,Gi),w!==null?(h.stateNode=w,Zr=h,kr=gs(w.firstChild),Gi=!1,A=!0):A=!1),A||Va(h)),ve(h),A=h.type,R=h.pendingProps,J=u!==null?u.memoizedProps:null,w=R.children,Jp(A,R)?w=null:J!==null&&Jp(A,J)&&(h.flags|=32),h.memoizedState!==null&&(A=Ey(u,h,Py,null,null,m),Lu._currentValue=A),$t(u,h),wr(u,h,w,m),h.child;case 6:return u===null&&Sn&&((u=m=kr)&&(m=em(m,h.pendingProps,Gi),m!==null?(h.stateNode=m,Zr=h,kr=null,u=!0):u=!1),u||Va(h)),null;case 13:return J0(u,h,m);case 4:return be(h,h.stateNode.containerInfo),w=h.pendingProps,u===null?h.child=ic(h,null,w,m):wr(u,h,w,m),h.child;case 11:return Ep(u,h,h.type,h.pendingProps,m);case 7:return wr(u,h,h.pendingProps,m),h.child;case 8:return wr(u,h,h.pendingProps.children,m),h.child;case 12:return wr(u,h,h.pendingProps.children,m),h.child;case 10:return w=h.pendingProps,ya(h,h.type,w.value),wr(u,h,w.children,m),h.child;case 9:return A=h.type._context,w=h.pendingProps.children,Yl(h),A=Lr(A),w=w(A),h.flags|=1,wr(u,h,w,m),h.child;case 14:return Pp(u,h,h.type,h.pendingProps,m);case 15:return Op(u,h,h.type,h.pendingProps,m);case 19:return Z0(u,h,m);case 31:return w=h.pendingProps,m=h.mode,w={mode:w.mode,children:w.children},u===null?(m=hh(w,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=Ii(u.child,w),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return uh(u,h,m);case 24:return Yl(h),w=Lr(dr),u===null?(A=oo(),A===null&&(A=mr,R=Ny(),A.pooledCache=R,R.refCount++,R!==null&&(A.pooledCacheLanes|=m),A=R),h.memoizedState={parent:w,cache:A},Ql(h),ya(h,dr,A)):((u.lanes&m)!==0&&(hu(u,h),_i(h,null,null,m),hs()),A=u.memoizedState,R=h.memoizedState,A.parent!==w?(A={parent:w,cache:w},h.memoizedState=A,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=A),ya(h,dr,w)):(w=R.cache,ya(h,dr,w),w!==A.cache&&mn(h,[dr],m,!0))),wr(u,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(i(156,h.tag))}function mo(u){u.flags|=4}function Rp(u,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!ii(h)){if(h=va.current,h!==null&&((Dn&4194048)===Dn?Li!==null:(Dn&62914560)!==Dn&&(Dn&536870912)===0||h!==Li))throw du=Cy,N0;u.flags|=8192}}function Lp(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?_t():536870912,u.lanes|=h,_u|=h)}function fh(u,h){if(!Sn)switch(u.tailMode){case"hidden":h=u.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:w.sibling=null}}function hr(u){var h=u.alternate!==null&&u.alternate.child===u.child,m=0,w=0;if(h)for(var A=u.child;A!==null;)m|=A.lanes|A.childLanes,w|=A.subtreeFlags&65011712,w|=A.flags&65011712,A.return=u,A=A.sibling;else for(A=u.child;A!==null;)m|=A.lanes|A.childLanes,w|=A.subtreeFlags,w|=A.flags,A.return=u,A=A.sibling;return u.subtreeFlags|=w,u.childLanes=m,h}function e1(u,h,m){var w=h.pendingProps;switch($d(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(h),null;case 1:return hr(h),null;case 3:return m=h.stateNode,w=null,u!==null&&(w=u.memoizedState.cache),h.memoizedState.cache!==w&&(h.flags|=2048),Ha(dr),re(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(Bd(h)?mo(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,v0())),hr(h),null;case 26:return m=h.memoizedState,u===null?(mo(h),m!==null?(hr(h),Rp(h,m)):(hr(h),h.flags&=-16777217)):m?m!==u.memoizedState?(mo(h),hr(h),Rp(h,m)):(hr(h),h.flags&=-16777217):(u.memoizedProps!==w&&mo(h),hr(h),h.flags&=-16777217),null;case 27:ce(h),m=Me.current;var A=h.type;if(u!==null&&h.stateNode!=null)u.memoizedProps!==w&&mo(h);else{if(!w){if(h.stateNode===null)throw Error(i(166));return hr(h),null}u=Oe.current,Bd(h)?y0(h):(u=G1(A,w,m),h.stateNode=u,mo(h))}return hr(h),null;case 5:if(ce(h),m=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==w&&mo(h);else{if(!w){if(h.stateNode===null)throw Error(i(166));return hr(h),null}if(u=Oe.current,Bd(h))y0(h);else{switch(A=cc(Me.current),u){case 1:u=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=A.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof w.is=="string"?A.createElement("select",{is:w.is}):A.createElement("select"),w.multiple?u.multiple=!0:w.size&&(u.size=w.size);break;default:u=typeof w.is=="string"?A.createElement(m,{is:w.is}):A.createElement(m)}}u[_n]=h,u[wn]=w;e:for(A=h.child;A!==null;){if(A.tag===5||A.tag===6)u.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}h.stateNode=u;e:switch(ri(u,m,w),m){case"button":case"input":case"select":case"textarea":u=!!w.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&mo(h)}}return hr(h),h.flags&=-16777217,null;case 6:if(u&&h.stateNode!=null)u.memoizedProps!==w&&mo(h);else{if(typeof w!="string"&&h.stateNode===null)throw Error(i(166));if(u=Me.current,Bd(h)){if(u=h.stateNode,m=h.memoizedProps,w=null,A=Zr,A!==null)switch(A.tag){case 27:case 5:w=A.memoizedProps}u[_n]=h,u=!!(u.nodeValue===m||w!==null&&w.suppressHydrationWarning===!0||B1(u.nodeValue,m)),u||Va(h)}else u=cc(u).createTextNode(w),u[_n]=h,h.stateNode=u}return hr(h),null;case 13:if(w=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(A=Bd(h),w!==null&&w.dehydrated!==null){if(u===null){if(!A)throw Error(i(318));if(A=h.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));A[_n]=h}else zd(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;hr(h),A=!1}else A=v0(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=A),A=!0;if(!A)return h.flags&256?(Is(h),h):(Is(h),null)}if(Is(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=w!==null,u=u!==null&&u.memoizedState!==null,m){w=h.child,A=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(A=w.alternate.memoizedState.cachePool.pool);var R=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(R=w.memoizedState.cachePool.pool),R!==A&&(w.flags|=2048)}return m!==u&&m&&(h.child.flags|=8192),Lp(h,h.updateQueue),hr(h),null;case 4:return re(),u===null&&Nx(h.stateNode.containerInfo),hr(h),null;case 10:return Ha(h.type),hr(h),null;case 19:if(je(Fr),A=h.memoizedState,A===null)return hr(h),null;if(w=(h.flags&128)!==0,R=A.rendering,R===null)if(w)fh(A,!1);else{if($r!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(R=sh(u),R!==null){for(h.flags|=128,fh(A,!1),u=R.updateQueue,h.updateQueue=u,Lp(h,u),h.subtreeFlags=0,u=m,m=h.child;m!==null;)Ld(m,u),m=m.sibling;return K(Fr,Fr.current&1|2),h.child}u=u.sibling}A.tail!==null&&ee()>Cu&&(h.flags|=128,w=!0,fh(A,!1),h.lanes=4194304)}else{if(!w)if(u=sh(R),u!==null){if(h.flags|=128,w=!0,u=u.updateQueue,h.updateQueue=u,Lp(h,u),fh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!R.alternate&&!Sn)return hr(h),null}else 2*ee()-A.renderingStartTime>Cu&&m!==536870912&&(h.flags|=128,w=!0,fh(A,!1),h.lanes=4194304);A.isBackwards?(R.sibling=h.child,h.child=R):(u=A.last,u!==null?u.sibling=R:h.child=R,A.last=R)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=ee(),h.sibling=null,u=Fr.current,K(Fr,w?u&1|2:u&1),h):(hr(h),null);case 22:case 23:return Is(h),Ay(),w=h.memoizedState!==null,u!==null?u.memoizedState!==null!==w&&(h.flags|=8192):w&&(h.flags|=8192),w?(m&536870912)!==0&&(h.flags&128)===0&&(hr(h),h.subtreeFlags&6&&(h.flags|=8192)):hr(h),m=h.updateQueue,m!==null&&Lp(h,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==m&&(h.flags|=2048),u!==null&&je(Kl),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Ha(dr),hr(h),null;case 25:return null;case 30:return null}throw Error(i(156,h.tag))}function t1(u,h){switch($d(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Ha(dr),re(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return ce(h),null;case 13:if(Is(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(i(340));zd()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return je(Fr),null;case 4:return re(),null;case 10:return Ha(h.type),null;case 22:case 23:return Is(h),Ay(),u!==null&&je(Kl),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return Ha(dr),null;case 25:return null;default:return null}}function n1(u,h){switch($d(h),h.tag){case 3:Ha(dr),re();break;case 26:case 27:case 5:ce(h);break;case 4:re();break;case 13:Is(h);break;case 19:je(Fr);break;case 10:Ha(h.type);break;case 22:case 23:Is(h),Ay(),u!==null&&je(Kl);break;case 24:Ha(dr)}}function ph(u,h){try{var m=h.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var A=w.next;m=A;do{if((m.tag&u)===u){w=void 0;var R=m.create,J=m.inst;w=R(),J.destroy=w}m=m.next}while(m!==A)}}catch(he){fr(h,h.return,he)}}function nl(u,h,m){try{var w=h.updateQueue,A=w!==null?w.lastEffect:null;if(A!==null){var R=A.next;w=R;do{if((w.tag&u)===u){var J=w.inst,he=J.destroy;if(he!==void 0){J.destroy=void 0,A=h;var ke=m,Xe=he;try{Xe()}catch(ot){fr(A,ke,ot)}}}w=w.next}while(w!==R)}}catch(ot){fr(h,h.return,ot)}}function r1(u){var h=u.updateQueue;if(h!==null){var m=u.stateNode;try{ky(h,m)}catch(w){fr(u,u.return,w)}}}function nx(u,h,m){m.props=el(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(w){fr(u,h,w)}}function vu(u,h){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var w=u.stateNode;break;case 30:w=u.stateNode;break;default:w=u.stateNode}typeof m=="function"?u.refCleanup=m(w):m.current=w}}catch(A){fr(u,h,A)}}function Ls(u,h){var m=u.ref,w=u.refCleanup;if(m!==null)if(typeof w=="function")try{w()}catch(A){fr(u,h,A)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){fr(u,h,A)}else m.current=null}function Fp(u){var h=u.type,m=u.memoizedProps,w=u.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&w.focus();break e;case"img":m.src?w.src=m.src:m.srcSet&&(w.srcset=m.srcSet)}}catch(A){fr(u,u.return,A)}}function $p(u,h,m){try{var w=u.stateNode;v_(w,u.type,m,h),w[wn]=h}catch(A){fr(u,u.return,A)}}function bu(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Qa(u.type)||u.tag===4}function mh(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||bu(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Qa(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Bp(u,h,m){var w=u.tag;if(w===5||w===6)u=u.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(u),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=Qp));else if(w!==4&&(w===27&&Qa(u.type)&&(m=u.stateNode,h=null),u=u.child,u!==null))for(Bp(u,h,m),u=u.sibling;u!==null;)Bp(u,h,m),u=u.sibling}function gh(u,h,m){var w=u.tag;if(w===5||w===6)u=u.stateNode,h?m.insertBefore(u,h):m.appendChild(u);else if(w!==4&&(w===27&&Qa(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(gh(u,h,m),u=u.sibling;u!==null;)gh(u,h,m),u=u.sibling}function yh(u){var h=u.stateNode,m=u.memoizedProps;try{for(var w=u.type,A=h.attributes;A.length;)h.removeAttributeNode(A[0]);ri(h,w,m),h[_n]=u,h[wn]=m}catch(R){fr(u,u.return,R)}}var Fs=!1,Gn=!1,go=!1,i1=typeof WeakSet=="function"?WeakSet:Set,ti=null;function a_(u,h){if(u=u.containerInfo,ms=im,u=m0(u),xy(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var A=w.anchorOffset,R=w.focusNode;w=w.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var J=0,he=-1,ke=-1,Xe=0,ot=0,ft=u,tt=null;t:for(;;){for(var Ze;ft!==m||A!==0&&ft.nodeType!==3||(he=J+A),ft!==R||w!==0&&ft.nodeType!==3||(ke=J+w),ft.nodeType===3&&(J+=ft.nodeValue.length),(Ze=ft.firstChild)!==null;)tt=ft,ft=Ze;for(;;){if(ft===u)break t;if(tt===m&&++Xe===A&&(he=J),tt===R&&++ot===w&&(ke=J),(Ze=ft.nextSibling)!==null)break;ft=tt,tt=ft.parentNode}ft=Ze}m=he===-1||ke===-1?null:{start:he,end:ke}}else m=null}m=m||{start:0,end:0}}else m=null;for(Xp={focusedElem:u,selectionRange:m},im=!1,ti=h;ti!==null;)if(h=ti,u=h.child,(h.subtreeFlags&1024)!==0&&u!==null)u.return=h,ti=u;else for(;ti!==null;){switch(h=ti,R=h.alternate,u=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&R!==null){u=void 0,m=h,A=R.memoizedProps,R=R.memoizedState,w=m.stateNode;try{var Ht=el(m.type,A,m.elementType===m.type);u=w.getSnapshotBeforeUpdate(Ht,R),w.__reactInternalSnapshotBeforeUpdate=u}catch(Vt){fr(m,m.return,Vt)}}break;case 3:if((u&1024)!==0){if(u=h.stateNode.containerInfo,m=u.nodeType,m===9)Tx(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Tx(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=h.sibling,u!==null){u.return=h.return,ti=u;break}ti=h.return}}function a1(u,h,m){var w=m.flags;switch(m.tag){case 0:case 11:case 15:rl(u,m),w&4&&ph(5,m);break;case 1:if(rl(u,m),w&4)if(u=m.stateNode,h===null)try{u.componentDidMount()}catch(J){fr(m,m.return,J)}else{var A=el(m.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(A,h,u.__reactInternalSnapshotBeforeUpdate)}catch(J){fr(m,m.return,J)}}w&64&&r1(m),w&512&&vu(m,m.return);break;case 3:if(rl(u,m),w&64&&(u=m.updateQueue,u!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{ky(u,h)}catch(J){fr(m,m.return,J)}}break;case 27:h===null&&w&4&&yh(m);case 26:case 5:rl(u,m),h===null&&w&4&&Fp(m),w&512&&vu(m,m.return);break;case 12:rl(u,m);break;case 13:rl(u,m),w&4&&l1(u,m),w&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=Hp.bind(null,m),Ou(u,m))));break;case 22:if(w=m.memoizedState!==null||Fs,!w){h=h!==null&&h.memoizedState!==null||Gn,A=Fs;var R=Gn;Fs=w,(Gn=h)&&!R?xo(u,m,(m.subtreeFlags&8772)!==0):rl(u,m),Fs=A,Gn=R}break;case 30:break;default:rl(u,m)}}function s1(u){var h=u.alternate;h!==null&&(u.alternate=null,s1(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Nd(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Ar=null,Ji=!1;function yo(u,h,m){for(m=m.child;m!==null;)o1(u,h,m),m=m.sibling}function o1(u,h,m){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(Y,m)}catch{}switch(m.tag){case 26:Gn||Ls(m,h),yo(u,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Gn||Ls(m,h);var w=Ar,A=Ji;Qa(m.type)&&(Ar=m.stateNode,Ji=!1),yo(u,h,m),kh(m.stateNode),Ar=w,Ji=A;break;case 5:Gn||Ls(m,h);case 6:if(w=Ar,A=Ji,Ar=null,yo(u,h,m),Ar=w,Ji=A,Ar!==null)if(Ji)try{(Ar.nodeType===9?Ar.body:Ar.nodeName==="HTML"?Ar.ownerDocument.body:Ar).removeChild(m.stateNode)}catch(R){fr(m,h,R)}else try{Ar.removeChild(m.stateNode)}catch(R){fr(m,h,R)}break;case 18:Ar!==null&&(Ji?(u=Ar,Zp(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),Rh(u)):Zp(Ar,m.stateNode));break;case 4:w=Ar,A=Ji,Ar=m.stateNode.containerInfo,Ji=!0,yo(u,h,m),Ar=w,Ji=A;break;case 0:case 11:case 14:case 15:Gn||nl(2,m,h),Gn||nl(4,m,h),yo(u,h,m);break;case 1:Gn||(Ls(m,h),w=m.stateNode,typeof w.componentWillUnmount=="function"&&nx(m,h,w)),yo(u,h,m);break;case 21:yo(u,h,m);break;case 22:Gn=(w=Gn)||m.memoizedState!==null,yo(u,h,m),Gn=w;break;default:yo(u,h,m)}}function l1(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Rh(u)}catch(m){fr(h,h.return,m)}}function s_(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new i1),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new i1),h;default:throw Error(i(435,u.tag))}}function rx(u,h){var m=s_(u);h.forEach(function(w){var A=h_.bind(null,u,w);m.has(w)||(m.add(w),w.then(A,A))})}function ba(u,h){var m=h.deletions;if(m!==null)for(var w=0;w<m.length;w++){var A=m[w],R=u,J=h,he=J;e:for(;he!==null;){switch(he.tag){case 27:if(Qa(he.type)){Ar=he.stateNode,Ji=!1;break e}break;case 5:Ar=he.stateNode,Ji=!1;break e;case 3:case 4:Ar=he.stateNode.containerInfo,Ji=!0;break e}he=he.return}if(Ar===null)throw Error(i(160));o1(R,J,A),Ar=null,Ji=!1,R=A.alternate,R!==null&&(R.return=null),A.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)ix(h,u),h=h.sibling}var Ya=null;function ix(u,h){var m=u.alternate,w=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:ba(h,u),Zi(u),w&4&&(nl(3,u,u.return),ph(3,u),nl(5,u,u.return));break;case 1:ba(h,u),Zi(u),w&512&&(Gn||m===null||Ls(m,m.return)),w&64&&Fs&&(u=u.updateQueue,u!==null&&(w=u.callbacks,w!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?w:m.concat(w))));break;case 26:var A=Ya;if(ba(h,u),Zi(u),w&512&&(Gn||m===null||Ls(m,m.return)),w&4){var R=m!==null?m.memoizedState:null;if(w=u.memoizedState,m===null)if(w===null)if(u.stateNode===null){e:{w=u.type,m=u.memoizedProps,A=A.ownerDocument||A;t:switch(w){case"title":R=A.getElementsByTagName("title")[0],(!R||R[Fl]||R[_n]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=A.createElement(w),A.head.insertBefore(R,A.querySelector("head > title"))),ri(R,w,m),R[_n]=u,It(R),w=R;break e;case"link":var J=J1("link","href",A).get(w+(m.href||""));if(J){for(var he=0;he<J.length;he++)if(R=J[he],R.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&R.getAttribute("rel")===(m.rel==null?null:m.rel)&&R.getAttribute("title")===(m.title==null?null:m.title)&&R.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){J.splice(he,1);break t}}R=A.createElement(w),ri(R,w,m),A.head.appendChild(R);break;case"meta":if(J=J1("meta","content",A).get(w+(m.content||""))){for(he=0;he<J.length;he++)if(R=J[he],R.getAttribute("content")===(m.content==null?null:""+m.content)&&R.getAttribute("name")===(m.name==null?null:m.name)&&R.getAttribute("property")===(m.property==null?null:m.property)&&R.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&R.getAttribute("charset")===(m.charSet==null?null:m.charSet)){J.splice(he,1);break t}}R=A.createElement(w),ri(R,w,m),A.head.appendChild(R);break;default:throw Error(i(468,w))}R[_n]=u,It(R),w=R}u.stateNode=w}else Z1(A,u.type,u.stateNode);else u.stateNode=X1(A,w,u.memoizedProps);else R!==w?(R===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):R.count--,w===null?Z1(A,u.type,u.stateNode):X1(A,w,u.memoizedProps)):w===null&&u.stateNode!==null&&$p(u,u.memoizedProps,m.memoizedProps)}break;case 27:ba(h,u),Zi(u),w&512&&(Gn||m===null||Ls(m,m.return)),m!==null&&w&4&&$p(u,u.memoizedProps,m.memoizedProps);break;case 5:if(ba(h,u),Zi(u),w&512&&(Gn||m===null||Ls(m,m.return)),u.flags&32){A=u.stateNode;try{Bo(A,"")}catch(Ze){fr(u,u.return,Ze)}}w&4&&u.stateNode!=null&&(A=u.memoizedProps,$p(u,A,m!==null?m.memoizedProps:A)),w&1024&&(go=!0);break;case 6:if(ba(h,u),Zi(u),w&4){if(u.stateNode===null)throw Error(i(162));w=u.memoizedProps,m=u.stateNode;try{m.nodeValue=w}catch(Ze){fr(u,u.return,Ze)}}break;case 3:if(Ru=null,A=Ya,Ya=on(h.containerInfo),ba(h,u),Ya=A,Zi(u),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Rh(h.containerInfo)}catch(Ze){fr(u,u.return,Ze)}go&&(go=!1,c1(u));break;case 4:w=Ya,Ya=on(u.stateNode.containerInfo),ba(h,u),Zi(u),Ya=w;break;case 12:ba(h,u),Zi(u);break;case 13:ba(h,u),Zi(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(dx=ee()),w&4&&(w=u.updateQueue,w!==null&&(u.updateQueue=null,rx(u,w)));break;case 22:A=u.memoizedState!==null;var ke=m!==null&&m.memoizedState!==null,Xe=Fs,ot=Gn;if(Fs=Xe||A,Gn=ot||ke,ba(h,u),Gn=ot,Fs=Xe,Zi(u),w&8192)e:for(h=u.stateNode,h._visibility=A?h._visibility&-2:h._visibility|1,A&&(m===null||ke||Fs||Gn||oc(u)),m=null,h=u;;){if(h.tag===5||h.tag===26){if(m===null){ke=m=h;try{if(R=ke.stateNode,A)J=R.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{he=ke.stateNode;var ft=ke.memoizedProps.style,tt=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;he.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Ze){fr(ke,ke.return,Ze)}}}else if(h.tag===6){if(m===null){ke=h;try{ke.stateNode.nodeValue=A?"":ke.memoizedProps}catch(Ze){fr(ke,ke.return,Ze)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}w&4&&(w=u.updateQueue,w!==null&&(m=w.retryQueue,m!==null&&(w.retryQueue=null,rx(u,m))));break;case 19:ba(h,u),Zi(u),w&4&&(w=u.updateQueue,w!==null&&(u.updateQueue=null,rx(u,w)));break;case 30:break;case 21:break;default:ba(h,u),Zi(u)}}function Zi(u){var h=u.flags;if(h&2){try{for(var m,w=u.return;w!==null;){if(bu(w)){m=w;break}w=w.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var A=m.stateNode,R=mh(u);gh(u,R,A);break;case 5:var J=m.stateNode;m.flags&32&&(Bo(J,""),m.flags&=-33);var he=mh(u);gh(u,he,J);break;case 3:case 4:var ke=m.stateNode.containerInfo,Xe=mh(u);Bp(u,Xe,ke);break;default:throw Error(i(161))}}catch(ot){fr(u,u.return,ot)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function c1(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;c1(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),u=u.sibling}}function rl(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)a1(u,h.alternate,h),h=h.sibling}function oc(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return),oc(h);break;case 1:Ls(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&nx(h,h.return,m),oc(h);break;case 27:kh(h.stateNode);case 26:case 5:Ls(h,h.return),oc(h);break;case 22:h.memoizedState===null&&oc(h);break;case 30:oc(h);break;default:oc(h)}u=u.sibling}}function xo(u,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var w=h.alternate,A=u,R=h,J=R.flags;switch(R.tag){case 0:case 11:case 15:xo(A,R,m),ph(4,R);break;case 1:if(xo(A,R,m),w=R,A=w.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Xe){fr(w,w.return,Xe)}if(w=R,A=w.updateQueue,A!==null){var he=w.stateNode;try{var ke=A.shared.hiddenCallbacks;if(ke!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ke.length;A++)k0(ke[A],he)}catch(Xe){fr(w,w.return,Xe)}}m&&J&64&&r1(R),vu(R,R.return);break;case 27:yh(R);case 26:case 5:xo(A,R,m),m&&w===null&&J&4&&Fp(R),vu(R,R.return);break;case 12:xo(A,R,m);break;case 13:xo(A,R,m),m&&J&4&&l1(A,R);break;case 22:R.memoizedState===null&&xo(A,R,m),vu(R,R.return);break;case 30:break;default:xo(A,R,m)}h=h.sibling}}function ax(u,h){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&Ud(m))}function sx(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Ud(u))}function $s(u,h,m,w){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)u1(u,h,m,w),h=h.sibling}function u1(u,h,m,w){var A=h.flags;switch(h.tag){case 0:case 11:case 15:$s(u,h,m,w),A&2048&&ph(9,h);break;case 1:$s(u,h,m,w);break;case 3:$s(u,h,m,w),A&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Ud(u)));break;case 12:if(A&2048){$s(u,h,m,w),u=h.stateNode;try{var R=h.memoizedProps,J=R.id,he=R.onPostCommit;typeof he=="function"&&he(J,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(ke){fr(h,h.return,ke)}}else $s(u,h,m,w);break;case 13:$s(u,h,m,w);break;case 23:break;case 22:R=h.stateNode,J=h.alternate,h.memoizedState!==null?R._visibility&2?$s(u,h,m,w):xh(u,h):R._visibility&2?$s(u,h,m,w):(R._visibility|=2,ju(u,h,m,w,(h.subtreeFlags&10256)!==0)),A&2048&&ax(J,h);break;case 24:$s(u,h,m,w),A&2048&&sx(h.alternate,h);break;default:$s(u,h,m,w)}}function ju(u,h,m,w,A){for(A=A&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var R=u,J=h,he=m,ke=w,Xe=J.flags;switch(J.tag){case 0:case 11:case 15:ju(R,J,he,ke,A),ph(8,J);break;case 23:break;case 22:var ot=J.stateNode;J.memoizedState!==null?ot._visibility&2?ju(R,J,he,ke,A):xh(R,J):(ot._visibility|=2,ju(R,J,he,ke,A)),A&&Xe&2048&&ax(J.alternate,J);break;case 24:ju(R,J,he,ke,A),A&&Xe&2048&&sx(J.alternate,J);break;default:ju(R,J,he,ke,A)}h=h.sibling}}function xh(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=u,w=h,A=w.flags;switch(w.tag){case 22:xh(m,w),A&2048&&ax(w.alternate,w);break;case 24:xh(m,w),A&2048&&sx(w.alternate,w);break;default:xh(m,w)}h=h.sibling}}var Ti=8192;function wu(u){if(u.subtreeFlags&Ti)for(u=u.child;u!==null;)d1(u),u=u.sibling}function d1(u){switch(u.tag){case 26:wu(u),u.flags&Ti&&u.memoizedState!==null&&P_(Ya,u.memoizedState,u.memoizedProps);break;case 5:wu(u);break;case 3:case 4:var h=Ya;Ya=on(u.stateNode.containerInfo),wu(u),Ya=h;break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=Ti,Ti=16777216,wu(u),Ti=h):wu(u));break;default:wu(u)}}function h1(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Su(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var w=h[m];ti=w,p1(w,u)}h1(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)f1(u),u=u.sibling}function f1(u){switch(u.tag){case 0:case 11:case 15:Su(u),u.flags&2048&&nl(9,u,u.return);break;case 3:Su(u);break;case 12:Su(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&2&&(u.return===null||u.return.tag!==13)?(h._visibility&=-3,zp(u)):Su(u);break;default:Su(u)}}function zp(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var w=h[m];ti=w,p1(w,u)}h1(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:nl(8,h,h.return),zp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,zp(h));break;default:zp(h)}u=u.sibling}}function p1(u,h){for(;ti!==null;){var m=ti;switch(m.tag){case 0:case 11:case 15:nl(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var w=m.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Ud(m.memoizedState.cache)}if(w=m.child,w!==null)w.return=m,ti=w;else e:for(m=u;ti!==null;){w=ti;var A=w.sibling,R=w.return;if(s1(w),w===m){ti=null;break e}if(A!==null){A.return=R,ti=A;break e}ti=R}}}var o_={getCacheForType:function(u){var h=Lr(dr),m=h.data.get(u);return m===void 0&&(m=u(),h.data.set(u,m)),m}},ox=typeof WeakMap=="function"?WeakMap:Map,Jn=0,mr=null,bn=null,Dn=0,Zn=0,ja=null,il=!1,Nu=!1,lx=!1,vo=0,$r=0,al=0,lc=0,cx=0,Ka=0,_u=0,vh=null,ea=null,ux=!1,dx=0,Cu=1/0,bh=null,sl=null,xi=0,ol=null,Tu=null,ku=0,hx=0,fx=null,m1=null,Au=0,px=null;function ki(){if((Jn&2)!==0&&Dn!==0)return Dn&-Dn;if(q.T!==null){var u=uu;return u!==0?u:Yp()}return Kn()}function g1(){Ka===0&&(Ka=(Dn&536870912)===0||Sn?ut():536870912);var u=va.current;return u!==null&&(u.flags|=32),Ka}function wa(u,h,m){(u===mr&&(Zn===2||Zn===9)||u.cancelPendingCommit!==null)&&(Eu(u,0),ll(u,Dn,Ka,!1)),Ce(u,m),((Jn&2)===0||u!==mr)&&(u===mr&&((Jn&2)===0&&(lc|=m),$r===4&&ll(u,Dn,Ka,!1)),Bs(u))}function y1(u,h,m){if((Jn&6)!==0)throw Error(i(327));var w=!m&&(h&124)===0&&(h&u.expiredLanes)===0||Je(u,h),A=w?u_(u,h):yx(u,h,!0),R=w;do{if(A===0){Nu&&!w&&ll(u,h,0,!1);break}else{if(m=u.current.alternate,R&&!l_(m)){A=yx(u,h,!1),R=!1;continue}if(A===2){if(R=h,u.errorRecoveryDisabledLanes&R)var J=0;else J=u.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){h=J;e:{var he=u;A=vh;var ke=he.current.memoizedState.isDehydrated;if(ke&&(Eu(he,J).flags|=256),J=yx(he,J,!1),J!==2){if(lx&&!ke){he.errorRecoveryDisabledLanes|=R,lc|=R,A=4;break e}R=ea,ea=A,R!==null&&(ea===null?ea=R:ea.push.apply(ea,R))}A=J}if(R=!1,A!==2)continue}}if(A===1){Eu(u,0),ll(u,h,0,!0);break}e:{switch(w=u,R=A,R){case 0:case 1:throw Error(i(345));case 4:if((h&4194048)!==h)break;case 6:ll(w,h,Ka,!il);break e;case 2:ea=null;break;case 3:case 5:break;default:throw Error(i(329))}if((h&62914560)===h&&(A=dx+300-ee(),10<A)){if(ll(w,h,Ka,!il),Pe(w,0,!0)!==0)break e;w.timeoutHandle=z1(x1.bind(null,w,m,ea,bh,ux,h,Ka,lc,_u,il,R,2,-0,0),A);break e}x1(w,m,ea,bh,ux,h,Ka,lc,_u,il,R,0,-0,0)}}break}while(!0);Bs(u)}function x1(u,h,m,w,A,R,J,he,ke,Xe,ot,ft,tt,Ze){if(u.timeoutHandle=-1,ft=h.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(ui={stylesheets:null,count:0,unsuspend:E_},d1(h),ft=O_(),ft!==null)){u.cancelPendingCommit=ft(jh.bind(null,u,h,R,m,w,A,J,he,ke,ot,1,tt,Ze)),ll(u,R,J,!Xe);return}jh(u,h,R,m,w,A,J,he,ke)}function l_(u){for(var h=u;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var w=0;w<m.length;w++){var A=m[w],R=A.getSnapshot;A=A.value;try{if(!ma(R(),A))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ll(u,h,m,w){h&=~cx,h&=~lc,u.suspendedLanes|=h,u.pingedLanes&=~h,w&&(u.warmLanes|=h),w=u.expirationTimes;for(var A=h;0<A;){var R=31-me(A),J=1<<R;w[R]=-1,A&=~J}m!==0&&Tt(u,m,h)}function qp(){return(Jn&6)===0?(Nh(0),!1):!0}function mx(){if(bn!==null){if(Zn===0)var u=bn.return;else u=bn,de=Ko=null,fp(u),ei=null,Xi=0,u=bn;for(;u!==null;)n1(u.alternate,u),u=u.return;bn=null}}function Eu(u,h){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,j_(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),mx(),mr=u,bn=m=Ii(u.current,null),Dn=h,Zn=0,ja=null,il=!1,Nu=Je(u,h),lx=!1,_u=Ka=cx=lc=al=$r=0,ea=vh=null,ux=!1,(h&8)!==0&&(h|=h&32);var w=u.entangledLanes;if(w!==0)for(u=u.entanglements,w&=h;0<w;){var A=31-me(w),R=1<<A;h|=u[A],w&=~R}return vo=h,zl(),m}function v1(u,h){fn=null,q.H=ih,h===Ri||h===up?(h=C0(),Zn=3):h===N0?(h=C0(),Zn=4):Zn=h===Q0?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,ja=h,bn===null&&($r=1,ch(u,Mi(h,u.current)))}function b1(){var u=q.H;return q.H=ih,u===null?ih:u}function j1(){var u=q.A;return q.A=o_,u}function gx(){$r=4,il||(Dn&4194048)!==Dn&&va.current!==null||(Nu=!0),(al&134217727)===0&&(lc&134217727)===0||mr===null||ll(mr,Dn,Ka,!1)}function yx(u,h,m){var w=Jn;Jn|=2;var A=b1(),R=j1();(mr!==u||Dn!==h)&&(bh=null,Eu(u,h)),h=!1;var J=$r;e:do try{if(Zn!==0&&bn!==null){var he=bn,ke=ja;switch(Zn){case 8:mx(),J=6;break e;case 3:case 2:case 9:case 6:va.current===null&&(h=!0);var Xe=Zn;if(Zn=0,ja=null,Pu(u,he,ke,Xe),m&&Nu){J=0;break e}break;default:Xe=Zn,Zn=0,ja=null,Pu(u,he,ke,Xe)}}c_(),J=$r;break}catch(ot){v1(u,ot)}while(!0);return h&&u.shellSuspendCounter++,de=Ko=null,Jn=w,q.H=A,q.A=R,bn===null&&(mr=null,Dn=0,zl()),J}function c_(){for(;bn!==null;)xx(bn)}function u_(u,h){var m=Jn;Jn|=2;var w=b1(),A=j1();mr!==u||Dn!==h?(bh=null,Cu=ee()+500,Eu(u,h)):Nu=Je(u,h);e:do try{if(Zn!==0&&bn!==null){h=bn;var R=ja;t:switch(Zn){case 1:Zn=0,ja=null,Pu(u,h,R,1);break;case 2:case 9:if(_0(R)){Zn=0,ja=null,S1(h);break}h=function(){Zn!==2&&Zn!==9||mr!==u||(Zn=7),Bs(u)},R.then(h,h);break e;case 3:Zn=7;break e;case 4:Zn=5;break e;case 7:_0(R)?(Zn=0,ja=null,S1(h)):(Zn=0,ja=null,Pu(u,h,R,7));break;case 5:var J=null;switch(bn.tag){case 26:J=bn.memoizedState;case 5:case 27:var he=bn;if(!J||ii(J)){Zn=0,ja=null;var ke=he.sibling;if(ke!==null)bn=ke;else{var Xe=he.return;Xe!==null?(bn=Xe,Up(Xe)):bn=null}break t}}Zn=0,ja=null,Pu(u,h,R,5);break;case 6:Zn=0,ja=null,Pu(u,h,R,6);break;case 8:mx(),$r=6;break e;default:throw Error(i(462))}}w1();break}catch(ot){v1(u,ot)}while(!0);return de=Ko=null,q.H=w,q.A=A,Jn=m,bn!==null?0:(mr=null,Dn=0,zl(),$r)}function w1(){for(;bn!==null&&!ie();)xx(bn)}function xx(u){var h=Ip(u.alternate,u,vo);u.memoizedProps=u.pendingProps,h===null?Up(u):bn=h}function S1(u){var h=u,m=h.alternate;switch(h.tag){case 15:case 0:h=Dp(m,h,h.pendingProps,h.type,void 0,Dn);break;case 11:h=Dp(m,h,h.pendingProps,h.type.render,h.ref,Dn);break;case 5:fp(h);default:n1(m,h),h=bn=Ld(h,vo),h=Ip(m,h,vo)}u.memoizedProps=u.pendingProps,h===null?Up(u):bn=h}function Pu(u,h,m,w){de=Ko=null,fp(h),ei=null,Xi=0;var A=h.return;try{if(K0(u,A,h,m,Dn)){$r=1,ch(u,Mi(m,u.current)),bn=null;return}}catch(R){if(A!==null)throw bn=A,R;$r=1,ch(u,Mi(m,u.current)),bn=null;return}h.flags&32768?(Sn||w===1?u=!0:Nu||(Dn&536870912)!==0?u=!1:(il=u=!0,(w===2||w===9||w===3||w===6)&&(w=va.current,w!==null&&w.tag===13&&(w.flags|=16384))),N1(h,u)):Up(h)}function Up(u){var h=u;do{if((h.flags&32768)!==0){N1(h,il);return}u=h.return;var m=e1(h.alternate,h,vo);if(m!==null){bn=m;return}if(h=h.sibling,h!==null){bn=h;return}bn=h=u}while(h!==null);$r===0&&($r=5)}function N1(u,h){do{var m=t1(u.alternate,u);if(m!==null){m.flags&=32767,bn=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(u=u.sibling,u!==null)){bn=u;return}bn=u=m}while(u!==null);$r=6,bn=null}function jh(u,h,m,w,A,R,J,he,ke){u.cancelPendingCommit=null;do Vp();while(xi!==0);if((Jn&6)!==0)throw Error(i(327));if(h!==null){if(h===u.current)throw Error(i(177));if(R=h.lanes|h.childLanes,R|=by,lt(u,m,R,J,he,ke),u===mr&&(bn=mr=null,Dn=0),Tu=h,ol=u,ku=m,hx=R,fx=A,m1=w,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,O1(Le,function(){return A1(),null})):(u.callbackNode=null,u.callbackPriority=0),w=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||w){w=q.T,q.T=null,A=W.p,W.p=2,J=Jn,Jn|=4;try{a_(u,h,m)}finally{Jn=J,W.p=A,q.T=w}}xi=1,_1(),C1(),T1()}}function _1(){if(xi===1){xi=0;var u=ol,h=Tu,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=q.T,q.T=null;var w=W.p;W.p=2;var A=Jn;Jn|=4;try{ix(h,u);var R=Xp,J=m0(u.containerInfo),he=R.focusedElem,ke=R.selectionRange;if(J!==he&&he&&he.ownerDocument&&p0(he.ownerDocument.documentElement,he)){if(ke!==null&&xy(he)){var Xe=ke.start,ot=ke.end;if(ot===void 0&&(ot=Xe),"selectionStart"in he)he.selectionStart=Xe,he.selectionEnd=Math.min(ot,he.value.length);else{var ft=he.ownerDocument||document,tt=ft&&ft.defaultView||window;if(tt.getSelection){var Ze=tt.getSelection(),Ht=he.textContent.length,Vt=Math.min(ke.start,Ht),ir=ke.end===void 0?Vt:Math.min(ke.end,Ht);!Ze.extend&&Vt>ir&&(J=ir,ir=Vt,Vt=J);var He=yy(he,Vt),Fe=yy(he,ir);if(He&&Fe&&(Ze.rangeCount!==1||Ze.anchorNode!==He.node||Ze.anchorOffset!==He.offset||Ze.focusNode!==Fe.node||Ze.focusOffset!==Fe.offset)){var Qe=ft.createRange();Qe.setStart(He.node,He.offset),Ze.removeAllRanges(),Vt>ir?(Ze.addRange(Qe),Ze.extend(Fe.node,Fe.offset)):(Qe.setEnd(Fe.node,Fe.offset),Ze.addRange(Qe))}}}}for(ft=[],Ze=he;Ze=Ze.parentNode;)Ze.nodeType===1&&ft.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof he.focus=="function"&&he.focus(),he=0;he<ft.length;he++){var dt=ft[he];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}im=!!ms,Xp=ms=null}finally{Jn=A,W.p=w,q.T=m}}u.current=h,xi=2}}function C1(){if(xi===2){xi=0;var u=ol,h=Tu,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=q.T,q.T=null;var w=W.p;W.p=2;var A=Jn;Jn|=4;try{a1(u,h.alternate,h)}finally{Jn=A,W.p=w,q.T=m}}xi=3}}function T1(){if(xi===4||xi===3){xi=0,ge();var u=ol,h=Tu,m=ku,w=m1;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?xi=5:(xi=0,Tu=ol=null,k1(u,u.pendingLanes));var A=u.pendingLanes;if(A===0&&(sl=null),Ct(m),h=h.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(Y,h,void 0,(h.current.flags&128)===128)}catch{}if(w!==null){h=q.T,A=W.p,W.p=2,q.T=null;try{for(var R=u.onRecoverableError,J=0;J<w.length;J++){var he=w[J];R(he.value,{componentStack:he.stack})}}finally{q.T=h,W.p=A}}(ku&3)!==0&&Vp(),Bs(u),A=u.pendingLanes,(m&4194090)!==0&&(A&42)!==0?u===px?Au++:(Au=0,px=u):Au=0,Nh(0)}}function k1(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,Ud(h)))}function Vp(u){return _1(),C1(),T1(),A1()}function A1(){if(xi!==5)return!1;var u=ol,h=hx;hx=0;var m=Ct(ku),w=q.T,A=W.p;try{W.p=32>m?32:m,q.T=null,m=fx,fx=null;var R=ol,J=ku;if(xi=0,Tu=ol=null,ku=0,(Jn&6)!==0)throw Error(i(331));var he=Jn;if(Jn|=4,f1(R.current),u1(R,R.current,J,m),Jn=he,Nh(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(Y,R)}catch{}return!0}finally{W.p=A,q.T=w,k1(u,h)}}function E1(u,h,m){h=Mi(m,h),h=Ap(u.stateNode,h,2),u=lo(u,h,2),u!==null&&(Ce(u,2),Bs(u))}function fr(u,h,m){if(u.tag===3)E1(u,u,m);else for(;h!==null;){if(h.tag===3){E1(h,u,m);break}else if(h.tag===1){var w=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(sl===null||!sl.has(w))){u=Mi(m,u),m=Xy(2),w=lo(h,m,2),w!==null&&(Y0(m,w,h,u),Ce(w,2),Bs(w));break}}h=h.return}}function vx(u,h,m){var w=u.pingCache;if(w===null){w=u.pingCache=new ox;var A=new Set;w.set(h,A)}else A=w.get(h),A===void 0&&(A=new Set,w.set(h,A));A.has(m)||(lx=!0,A.add(m),u=d_.bind(null,u,h,m),h.then(u,u))}function d_(u,h,m){var w=u.pingCache;w!==null&&w.delete(h),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,mr===u&&(Dn&m)===m&&($r===4||$r===3&&(Dn&62914560)===Dn&&300>ee()-dx?(Jn&2)===0&&Eu(u,0):cx|=m,_u===Dn&&(_u=0)),Bs(u)}function P1(u,h){h===0&&(h=_t()),u=ql(u,h),u!==null&&(Ce(u,h),Bs(u))}function Hp(u){var h=u.memoizedState,m=0;h!==null&&(m=h.retryLane),P1(u,m)}function h_(u,h){var m=0;switch(u.tag){case 13:var w=u.stateNode,A=u.memoizedState;A!==null&&(m=A.retryLane);break;case 19:w=u.stateNode;break;case 22:w=u.stateNode._retryCache;break;default:throw Error(i(314))}w!==null&&w.delete(h),P1(u,m)}function O1(u,h){return se(u,h)}var wh=null,cl=null,Gp=!1,Sh=!1,Wp=!1,ul=0;function Bs(u){u!==cl&&u.next===null&&(cl===null?wh=cl=u:cl=cl.next=u),Sh=!0,Gp||(Gp=!0,bx())}function Nh(u,h){if(!Wp&&Sh){Wp=!0;do for(var m=!1,w=wh;w!==null;){if(u!==0){var A=w.pendingLanes;if(A===0)var R=0;else{var J=w.suspendedLanes,he=w.pingedLanes;R=(1<<31-me(42|u)+1)-1,R&=A&~(J&~he),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(m=!0,M1(w,R))}else R=Dn,R=Pe(w,w===mr?R:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(R&3)===0||Je(w,R)||(m=!0,M1(w,R));w=w.next}while(m);Wp=!1}}function f_(){_h()}function _h(){Sh=Gp=!1;var u=0;ul!==0&&(b_()&&(u=ul),ul=0);for(var h=ee(),m=null,w=wh;w!==null;){var A=w.next,R=Ch(w,h);R===0?(w.next=null,m===null?wh=A:m.next=A,A===null&&(cl=m)):(m=w,(u!==0||(R&3)!==0)&&(Sh=!0)),w=A}Nh(u)}function Ch(u,h){for(var m=u.suspendedLanes,w=u.pingedLanes,A=u.expirationTimes,R=u.pendingLanes&-62914561;0<R;){var J=31-me(R),he=1<<J,ke=A[J];ke===-1?((he&m)===0||(he&w)!==0)&&(A[J]=et(he,h)):ke<=h&&(u.expiredLanes|=he),R&=~he}if(h=mr,m=Dn,m=Pe(u,u===h?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),w=u.callbackNode,m===0||u===h&&(Zn===2||Zn===9)||u.cancelPendingCommit!==null)return w!==null&&w!==null&&Q(w),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||Je(u,m)){if(h=m&-m,h===u.callbackPriority)return h;switch(w!==null&&Q(w),Ct(m)){case 2:case 8:m=Ge;break;case 32:m=Le;break;case 268435456:m=_e;break;default:m=Le}return w=D1.bind(null,u),m=se(m,w),u.callbackPriority=h,u.callbackNode=m,h}return w!==null&&w!==null&&Q(w),u.callbackPriority=2,u.callbackNode=null,2}function D1(u,h){if(xi!==0&&xi!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(Vp()&&u.callbackNode!==m)return null;var w=Dn;return w=Pe(u,u===mr?w:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),w===0?null:(y1(u,w,h),Ch(u,ee()),u.callbackNode!=null&&u.callbackNode===m?D1.bind(null,u):null)}function M1(u,h){if(Vp())return null;y1(u,h,!0)}function bx(){w_(function(){(Jn&6)!==0?se(Ue,f_):_h()})}function Yp(){return ul===0&&(ul=ut()),ul}function I1(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:kd(""+u)}function R1(u,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,u.id&&m.setAttribute("form",u.id),h.parentNode.insertBefore(m,h),u=new FormData(u),m.parentNode.removeChild(m),u}function p_(u,h,m,w,A){if(h==="submit"&&m&&m.stateNode===A){var R=I1((A[wn]||null).action),J=w.submitter;J&&(h=(h=J[wn]||null)?I1(h.formAction):J.getAttribute("formAction"),h!==null&&(R=h,J=null));var he=new Vf("action","action",null,w,A);u.push({event:he,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(ul!==0){var ke=J?R1(A,J):new FormData(A);nh(m,{pending:!0,data:ke,method:A.method,action:R},null,ke)}}else typeof R=="function"&&(he.preventDefault(),ke=J?R1(A,J):new FormData(A),nh(m,{pending:!0,data:ke,method:A.method,action:R},R,ke))},currentTarget:A}]})}}for(var jx=0;jx<Un.length;jx++){var wx=Un[jx],m_=wx.toLowerCase(),g_=wx[0].toUpperCase()+wx.slice(1);ls(m_,"on"+g_)}ls(np,"onAnimationEnd"),ls(g0,"onAnimationIteration"),ls(ga,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(rp,"onTransitionRun"),ls(JN,"onTransitionStart"),ls(au,"onTransitionCancel"),ls(Dd,"onTransitionEnd"),ha("onMouseEnter",["mouseout","mouseover"]),ha("onMouseLeave",["mouseout","mouseover"]),ha("onPointerEnter",["pointerout","pointerover"]),ha("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Th));function L1(u,h){h=(h&4)!==0;for(var m=0;m<u.length;m++){var w=u[m],A=w.event;w=w.listeners;e:{var R=void 0;if(h)for(var J=w.length-1;0<=J;J--){var he=w[J],ke=he.instance,Xe=he.currentTarget;if(he=he.listener,ke!==R&&A.isPropagationStopped())break e;R=he,A.currentTarget=Xe;try{R(A)}catch(ot){ac(ot)}A.currentTarget=null,R=ke}else for(J=0;J<w.length;J++){if(he=w[J],ke=he.instance,Xe=he.currentTarget,he=he.listener,ke!==R&&A.isPropagationStopped())break e;R=he,A.currentTarget=Xe;try{R(A)}catch(ot){ac(ot)}A.currentTarget=null,R=ke}}}}function jn(u,h){var m=h[qn];m===void 0&&(m=h[qn]=new Set);var w=u+"__bubble";m.has(w)||(F1(h,u,2,!1),m.add(w))}function Sx(u,h,m){var w=0;h&&(w|=4),F1(m,u,w,h)}var ta="_reactListening"+Math.random().toString(36).slice(2);function Nx(u){if(!u[ta]){u[ta]=!0,vn.forEach(function(m){m!=="selectionchange"&&(y_.has(m)||Sx(m,!1,u),Sx(m,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[ta]||(h[ta]=!0,Sx("selectionchange",!1,h))}}function F1(u,h,m,w){switch(rj(h)){case 2:var A=I_;break;case 8:A=Fu;break;default:A=Mx}m=A.bind(null,h,m,u),A=void 0,!Ed||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(A=!0),w?A!==void 0?u.addEventListener(h,m,{capture:!0,passive:A}):u.addEventListener(h,m,!0):A!==void 0?u.addEventListener(h,m,{passive:A}):u.addEventListener(h,m,!1)}function bo(u,h,m,w,A){var R=w;if((h&1)===0&&(h&2)===0&&w!==null)e:for(;;){if(w===null)return;var J=w.tag;if(J===3||J===4){var he=w.stateNode.containerInfo;if(he===A)break;if(J===4)for(J=w.return;J!==null;){var ke=J.tag;if((ke===3||ke===4)&&J.stateNode.containerInfo===A)return;J=J.return}for(;he!==null;){if(J=$o(he),J===null)return;if(ke=J.tag,ke===5||ke===6||ke===26||ke===27){w=R=J;continue e}he=he.parentNode}}w=w.return}Kb(function(){var Xe=R,ot=ay(m),ft=[];e:{var tt=Md.get(u);if(tt!==void 0){var Ze=Vf,Ht=u;switch(u){case"keypress":if(nr(m)===0)break e;case"keydown":case"keyup":Ze=dy;break;case"focusin":Ht="focus",Ze=Gf;break;case"focusout":Ht="blur",Ze=Gf;break;case"beforeblur":case"afterblur":Ze=Gf;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=UN;break;case np:case g0:case ga:Ze=e0;break;case Dd:Ze=VN;break;case"scroll":case"scrollend":Ze=BN;break;case"wheel":Ze=GN;break;case"copy":case"cut":case"paste":Ze=n0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=io;break;case"toggle":case"beforetoggle":Ze=Yf}var Vt=(h&4)!==0,ir=!Vt&&(u==="scroll"||u==="scrollend"),He=Vt?tt!==null?tt+"Capture":null:tt;Vt=[];for(var Fe=Xe,Qe;Fe!==null;){var dt=Fe;if(Qe=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||Qe===null||He===null||(dt=Ad(Fe,He),dt!=null&&Vt.push(tn(Fe,dt,Qe))),ir)break;Fe=Fe.return}0<Vt.length&&(tt=new Ze(tt,Ht,null,m,ot),ft.push({event:tt,listeners:Vt}))}}if((h&7)===0){e:{if(tt=u==="mouseover"||u==="pointerover",Ze=u==="mouseout"||u==="pointerout",tt&&m!==qf&&(Ht=m.relatedTarget||m.fromElement)&&($o(Ht)||Ht[oi]))break e;if((Ze||tt)&&(tt=ot.window===ot?ot:(tt=ot.ownerDocument)?tt.defaultView||tt.parentWindow:window,Ze?(Ht=m.relatedTarget||m.toElement,Ze=Xe,Ht=Ht?$o(Ht):null,Ht!==null&&(ir=s(Ht),Vt=Ht.tag,Ht!==ir||Vt!==5&&Vt!==27&&Vt!==6)&&(Ht=null)):(Ze=null,Ht=Xe),Ze!==Ht)){if(Vt=qo,dt="onMouseLeave",He="onMouseEnter",Fe="mouse",(u==="pointerout"||u==="pointerover")&&(Vt=io,dt="onPointerLeave",He="onPointerEnter",Fe="pointer"),ir=Ze==null?tt:St(Ze),Qe=Ht==null?tt:St(Ht),tt=new Vt(dt,Fe+"leave",Ze,m,ot),tt.target=ir,tt.relatedTarget=Qe,dt=null,$o(ot)===Xe&&(Vt=new Vt(He,Fe+"enter",Ht,m,ot),Vt.target=Qe,Vt.relatedTarget=ir,dt=Vt),ir=dt,Ze&&Ht)t:{for(Vt=Ze,He=Ht,Fe=0,Qe=Vt;Qe;Qe=ni(Qe))Fe++;for(Qe=0,dt=He;dt;dt=ni(dt))Qe++;for(;0<Fe-Qe;)Vt=ni(Vt),Fe--;for(;0<Qe-Fe;)He=ni(He),Qe--;for(;Fe--;){if(Vt===He||He!==null&&Vt===He.alternate)break t;Vt=ni(Vt),He=ni(He)}Vt=null}else Vt=null;Ze!==null&&Br(ft,tt,Ze,Vt,!1),Ht!==null&&ir!==null&&Br(ft,ir,Ht,Vt,!0)}}e:{if(tt=Xe?St(Xe):window,Ze=tt.nodeName&&tt.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&tt.type==="file")var Pt=c0;else if(Jf(tt))if(u0)Pt=KN;else{Pt=Ho;var gn=f0}else Ze=tt.nodeName,!Ze||Ze.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Xe&&iy(Xe.elementType)&&(Pt=c0):Pt=tp;if(Pt&&(Pt=Pt(u,Xe))){tu(ft,Pt,m,ot);break e}gn&&gn(u,tt,Xe),u==="focusout"&&Xe&&tt.type==="number"&&Xe.memoizedProps.value!=null&&Td(tt,"number",tt.value)}switch(gn=Xe?St(Xe):window,u){case"focusin":(Jf(gn)||gn.contentEditable==="true")&&(iu=gn,Go=Xe,Ve=null);break;case"focusout":Ve=Go=iu=null;break;case"mousedown":at=!0;break;case"contextmenu":case"mouseup":case"dragend":at=!1,nt(ft,m,ot);break;case"selectionchange":if(XN)break;case"keydown":case"keyup":nt(ft,m,ot)}var Lt;if(py)e:{switch(u){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else Uo?o0(u,m)&&(Gt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Gt="onCompositionStart");Gt&&(Kf&&m.locale!=="ko"&&(Uo||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&Uo&&(Lt=Qb()):(zo=ot,ly="value"in zo?zo.value:zo.textContent,Uo=!0)),gn=Kp(Xe,Gt),0<gn.length&&(Gt=new Vi(Gt,u,null,m,ot),ft.push({event:Gt,listeners:gn}),Lt?Gt.data=Lt:(Lt=Xf(m),Lt!==null&&(Gt.data=Lt)))),(Lt=s0?WN(u,m):l0(u,m))&&(Gt=Kp(Xe,"onBeforeInput"),0<Gt.length&&(gn=new Vi("onBeforeInput","beforeinput",null,m,ot),ft.push({event:gn,listeners:Gt}),gn.data=Lt)),p_(ft,u,Xe,m,ot)}L1(ft,h)})}function tn(u,h,m){return{instance:u,listener:h,currentTarget:m}}function Kp(u,h){for(var m=h+"Capture",w=[];u!==null;){var A=u,R=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||R===null||(A=Ad(u,m),A!=null&&w.unshift(tn(u,A,R)),A=Ad(u,h),A!=null&&w.push(tn(u,A,R))),u.tag===3)return w;u=u.return}return[]}function ni(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function Br(u,h,m,w,A){for(var R=h._reactName,J=[];m!==null&&m!==w;){var he=m,ke=he.alternate,Xe=he.stateNode;if(he=he.tag,ke!==null&&ke===w)break;he!==5&&he!==26&&he!==27||Xe===null||(ke=Xe,A?(Xe=Ad(m,R),Xe!=null&&J.unshift(tn(m,Xe,ke))):A||(Xe=Ad(m,R),Xe!=null&&J.push(tn(m,Xe,ke)))),m=m.return}J.length!==0&&u.push({event:h,listeners:J})}var x_=/\r\n?/g,dl=/\u0000|\uFFFD/g;function $1(u){return(typeof u=="string"?u:""+u).replace(x_,`
`).replace(dl,"")}function B1(u,h){return h=$1(h),$1(u)===h}function Qp(){}function rr(u,h,m,w,A,R){switch(m){case"children":typeof w=="string"?h==="body"||h==="textarea"&&w===""||Bo(u,w):(typeof w=="number"||typeof w=="bigint")&&h!=="body"&&Bo(u,""+w);break;case"className":Lf(u,"class",w);break;case"tabIndex":Lf(u,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Lf(u,m,w);break;case"style":ry(u,w,R);break;case"data":if(h!=="object"){Lf(u,"data",w);break}case"src":case"href":if(w===""&&(h!=="a"||m!=="href")){u.removeAttribute(m);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){u.removeAttribute(m);break}w=kd(""+w),u.setAttribute(m,w);break;case"action":case"formAction":if(typeof w=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(m==="formAction"?(h!=="input"&&rr(u,h,"name",A.name,A,null),rr(u,h,"formEncType",A.formEncType,A,null),rr(u,h,"formMethod",A.formMethod,A,null),rr(u,h,"formTarget",A.formTarget,A,null)):(rr(u,h,"encType",A.encType,A,null),rr(u,h,"method",A.method,A,null),rr(u,h,"target",A.target,A,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){u.removeAttribute(m);break}w=kd(""+w),u.setAttribute(m,w);break;case"onClick":w!=null&&(u.onclick=Qp);break;case"onScroll":w!=null&&jn("scroll",u);break;case"onScrollEnd":w!=null&&jn("scrollend",u);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(i(61));if(m=w.__html,m!=null){if(A.children!=null)throw Error(i(60));u.innerHTML=m}}break;case"multiple":u.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":u.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){u.removeAttribute("xlink:href");break}m=kd(""+w),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?u.setAttribute(m,""+w):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":w===!0?u.setAttribute(m,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?u.setAttribute(m,w):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?u.setAttribute(m,w):u.removeAttribute(m);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?u.removeAttribute(m):u.setAttribute(m,w);break;case"popover":jn("beforetoggle",u),jn("toggle",u),Rf(u,"popover",w);break;case"xlinkActuate":Es(u,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Es(u,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Es(u,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Es(u,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Es(u,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Es(u,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Es(u,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Es(u,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Es(u,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Rf(u,"is",w);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Wb.get(m)||m,Rf(u,m,w))}}function _x(u,h,m,w,A,R){switch(m){case"style":ry(u,w,R);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(i(61));if(m=w.__html,m!=null){if(A.children!=null)throw Error(i(60));u.innerHTML=m}}break;case"children":typeof w=="string"?Bo(u,w):(typeof w=="number"||typeof w=="bigint")&&Bo(u,""+w);break;case"onScroll":w!=null&&jn("scroll",u);break;case"onScrollEnd":w!=null&&jn("scrollend",u);break;case"onClick":w!=null&&(u.onclick=Qp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!On.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),h=m.slice(2,A?m.length-7:void 0),R=u[wn]||null,R=R!=null?R[m]:null,typeof R=="function"&&u.removeEventListener(h,R,A),typeof w=="function")){typeof R!="function"&&R!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(h,w,A);break e}m in u?u[m]=w:w===!0?u.setAttribute(m,""):Rf(u,m,w)}}}function ri(u,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jn("error",u),jn("load",u);var w=!1,A=!1,R;for(R in m)if(m.hasOwnProperty(R)){var J=m[R];if(J!=null)switch(R){case"src":w=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:rr(u,h,R,J,m,null)}}A&&rr(u,h,"srcSet",m.srcSet,m,null),w&&rr(u,h,"src",m.src,m,null);return;case"input":jn("invalid",u);var he=R=J=A=null,ke=null,Xe=null;for(w in m)if(m.hasOwnProperty(w)){var ot=m[w];if(ot!=null)switch(w){case"name":A=ot;break;case"type":J=ot;break;case"checked":ke=ot;break;case"defaultChecked":Xe=ot;break;case"value":R=ot;break;case"defaultValue":he=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,h));break;default:rr(u,h,w,ot,m,null)}}ey(u,R,he,ke,Xe,J,A,!1),$f(u);return;case"select":jn("invalid",u),w=J=R=null;for(A in m)if(m.hasOwnProperty(A)&&(he=m[A],he!=null))switch(A){case"value":R=he;break;case"defaultValue":J=he;break;case"multiple":w=he;default:rr(u,h,A,he,m,null)}h=R,m=J,u.multiple=!!w,h!=null?Yc(u,!!w,h,!1):m!=null&&Yc(u,!!w,m,!0);return;case"textarea":jn("invalid",u),R=A=w=null;for(J in m)if(m.hasOwnProperty(J)&&(he=m[J],he!=null))switch(J){case"value":w=he;break;case"defaultValue":A=he;break;case"children":R=he;break;case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(91));break;default:rr(u,h,J,he,m,null)}zf(u,w,A,R),$f(u);return;case"option":for(ke in m)if(m.hasOwnProperty(ke)&&(w=m[ke],w!=null))switch(ke){case"selected":u.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:rr(u,h,ke,w,m,null)}return;case"dialog":jn("beforetoggle",u),jn("toggle",u),jn("cancel",u),jn("close",u);break;case"iframe":case"object":jn("load",u);break;case"video":case"audio":for(w=0;w<Th.length;w++)jn(Th[w],u);break;case"image":jn("error",u),jn("load",u);break;case"details":jn("toggle",u);break;case"embed":case"source":case"link":jn("error",u),jn("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Xe in m)if(m.hasOwnProperty(Xe)&&(w=m[Xe],w!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:rr(u,h,Xe,w,m,null)}return;default:if(iy(h)){for(ot in m)m.hasOwnProperty(ot)&&(w=m[ot],w!==void 0&&_x(u,h,ot,w,m,void 0));return}}for(he in m)m.hasOwnProperty(he)&&(w=m[he],w!=null&&rr(u,h,he,w,m,null))}function v_(u,h,m,w){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,R=null,J=null,he=null,ke=null,Xe=null,ot=null;for(Ze in m){var ft=m[Ze];if(m.hasOwnProperty(Ze)&&ft!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":ke=ft;default:w.hasOwnProperty(Ze)||rr(u,h,Ze,null,w,ft)}}for(var tt in w){var Ze=w[tt];if(ft=m[tt],w.hasOwnProperty(tt)&&(Ze!=null||ft!=null))switch(tt){case"type":R=Ze;break;case"name":A=Ze;break;case"checked":Xe=Ze;break;case"defaultChecked":ot=Ze;break;case"value":J=Ze;break;case"defaultValue":he=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(i(137,h));break;default:Ze!==ft&&rr(u,h,tt,Ze,w,ft)}}Bf(u,J,he,ke,Xe,ot,R,A);return;case"select":Ze=J=he=tt=null;for(R in m)if(ke=m[R],m.hasOwnProperty(R)&&ke!=null)switch(R){case"value":break;case"multiple":Ze=ke;default:w.hasOwnProperty(R)||rr(u,h,R,null,w,ke)}for(A in w)if(R=w[A],ke=m[A],w.hasOwnProperty(A)&&(R!=null||ke!=null))switch(A){case"value":tt=R;break;case"defaultValue":he=R;break;case"multiple":J=R;default:R!==ke&&rr(u,h,A,R,w,ke)}h=he,m=J,w=Ze,tt!=null?Yc(u,!!m,tt,!1):!!w!=!!m&&(h!=null?Yc(u,!!m,h,!0):Yc(u,!!m,m?[]:"",!1));return;case"textarea":Ze=tt=null;for(he in m)if(A=m[he],m.hasOwnProperty(he)&&A!=null&&!w.hasOwnProperty(he))switch(he){case"value":break;case"children":break;default:rr(u,h,he,null,w,A)}for(J in w)if(A=w[J],R=m[J],w.hasOwnProperty(J)&&(A!=null||R!=null))switch(J){case"value":tt=A;break;case"defaultValue":Ze=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:A!==R&&rr(u,h,J,A,w,R)}ty(u,tt,Ze);return;case"option":for(var Ht in m)if(tt=m[Ht],m.hasOwnProperty(Ht)&&tt!=null&&!w.hasOwnProperty(Ht))switch(Ht){case"selected":u.selected=!1;break;default:rr(u,h,Ht,null,w,tt)}for(ke in w)if(tt=w[ke],Ze=m[ke],w.hasOwnProperty(ke)&&tt!==Ze&&(tt!=null||Ze!=null))switch(ke){case"selected":u.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:rr(u,h,ke,tt,w,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in m)tt=m[Vt],m.hasOwnProperty(Vt)&&tt!=null&&!w.hasOwnProperty(Vt)&&rr(u,h,Vt,null,w,tt);for(Xe in w)if(tt=w[Xe],Ze=m[Xe],w.hasOwnProperty(Xe)&&tt!==Ze&&(tt!=null||Ze!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(i(137,h));break;default:rr(u,h,Xe,tt,w,Ze)}return;default:if(iy(h)){for(var ir in m)tt=m[ir],m.hasOwnProperty(ir)&&tt!==void 0&&!w.hasOwnProperty(ir)&&_x(u,h,ir,void 0,w,tt);for(ot in w)tt=w[ot],Ze=m[ot],!w.hasOwnProperty(ot)||tt===Ze||tt===void 0&&Ze===void 0||_x(u,h,ot,tt,w,Ze);return}}for(var He in m)tt=m[He],m.hasOwnProperty(He)&&tt!=null&&!w.hasOwnProperty(He)&&rr(u,h,He,null,w,tt);for(ft in w)tt=w[ft],Ze=m[ft],!w.hasOwnProperty(ft)||tt===Ze||tt==null&&Ze==null||rr(u,h,ft,tt,w,Ze)}var ms=null,Xp=null;function cc(u){return u.nodeType===9?u:u.ownerDocument}function Er(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ir(u,h){if(u===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&h==="foreignObject"?0:u}function Jp(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Cx=null;function b_(){var u=window.event;return u&&u.type==="popstate"?u===Cx?!1:(Cx=u,!0):(Cx=null,!1)}var z1=typeof setTimeout=="function"?setTimeout:void 0,j_=typeof clearTimeout=="function"?clearTimeout:void 0,q1=typeof Promise=="function"?Promise:void 0,w_=typeof queueMicrotask=="function"?queueMicrotask:typeof q1<"u"?function(u){return q1.resolve(null).then(u).catch(U1)}:z1;function U1(u){setTimeout(function(){throw u})}function Qa(u){return u==="head"}function Zp(u,h){var m=h,w=0,A=0;do{var R=m.nextSibling;if(u.removeChild(m),R&&R.nodeType===8)if(m=R.data,m==="/$"){if(0<w&&8>w){m=w;var J=u.ownerDocument;if(m&1&&kh(J.documentElement),m&2&&kh(J.body),m&4)for(m=J.head,kh(m),J=m.firstChild;J;){var he=J.nextSibling,ke=J.nodeName;J[Fl]||ke==="SCRIPT"||ke==="STYLE"||ke==="LINK"&&J.rel.toLowerCase()==="stylesheet"||m.removeChild(J),J=he}}if(A===0){u.removeChild(R),Rh(h);return}A--}else m==="$"||m==="$?"||m==="$!"?A++:w=m.charCodeAt(0)-48;else w=0;m=R}while(m);Rh(h)}function Tx(u){var h=u.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Tx(m),Nd(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function V1(u,h,m,w){for(;u.nodeType===1;){var A=m;if(u.nodeName.toLowerCase()!==h.toLowerCase()){if(!w&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(w){if(!u[Fl])switch(h){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(R=u.getAttribute("rel"),R==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(R!==A.rel||u.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||u.getAttribute("title")!==(A.title==null?null:A.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(R=u.getAttribute("src"),(R!==(A.src==null?null:A.src)||u.getAttribute("type")!==(A.type==null?null:A.type)||u.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&R&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(h==="input"&&u.type==="hidden"){var R=A.name==null?null:""+A.name;if(A.type==="hidden"&&u.getAttribute("name")===R)return u}else return u;if(u=gs(u.nextSibling),u===null)break}return null}function em(u,h,m){if(h==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=gs(u.nextSibling),u===null))return null;return u}function $i(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function Ou(u,h){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")h();else{var w=function(){h(),m.removeEventListener("DOMContentLoaded",w)};m.addEventListener("DOMContentLoaded",w),u._reactRetry=w}}function gs(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return u}var kx=null;function H1(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return u;h--}else m==="/$"&&h++}u=u.previousSibling}return null}function G1(u,h,m){switch(h=cc(m),u){case"html":if(u=h.documentElement,!u)throw Error(i(452));return u;case"head":if(u=h.head,!u)throw Error(i(453));return u;case"body":if(u=h.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function kh(u){for(var h=u.attributes;h.length;)u.removeAttributeNode(h[0]);Nd(u)}var Sa=new Map,zs=new Set;function on(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var qs=W.d;W.d={f:Xa,r:W1,D:S_,C:Y1,L:tm,m:N_,X:C_,S:__,M:T_};function Xa(){var u=qs.f(),h=qp();return u||h}function W1(u){var h=it(u);h!==null&&h.tag===5&&h.type==="form"?_p(h):qs.r(u)}var Du=typeof document>"u"?null:document;function Vn(u,h,m){var w=Du;if(w&&typeof h=="string"&&h){var A=La(h);A='link[rel="'+u+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),zs.has(A)||(zs.add(A),u={rel:u,crossOrigin:m,href:h},w.querySelector(A)===null&&(h=w.createElement("link"),ri(h,"link",u),It(h),w.head.appendChild(h)))}}function S_(u){qs.D(u),Vn("dns-prefetch",u,null)}function Y1(u,h){qs.C(u,h),Vn("preconnect",u,h)}function tm(u,h,m){qs.L(u,h,m);var w=Du;if(w&&u&&h){var A='link[rel="preload"][as="'+La(h)+'"]';h==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+La(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+La(m.imageSizes)+'"]')):A+='[href="'+La(u)+'"]';var R=A;switch(h){case"style":R=Mu(u);break;case"script":R=Iu(u)}Sa.has(R)||(u=f({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:u,as:h},m),Sa.set(R,u),w.querySelector(A)!==null||h==="style"&&w.querySelector(Ah(R))||h==="script"&&w.querySelector(Eh(R))||(h=w.createElement("link"),ri(h,"link",u),It(h),w.head.appendChild(h)))}}function N_(u,h){qs.m(u,h);var m=Du;if(m&&u){var w=h&&typeof h.as=="string"?h.as:"script",A='link[rel="modulepreload"][as="'+La(w)+'"][href="'+La(u)+'"]',R=A;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=Iu(u)}if(!Sa.has(R)&&(u=f({rel:"modulepreload",href:u},h),Sa.set(R,u),m.querySelector(A)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Eh(R)))return}w=m.createElement("link"),ri(w,"link",u),It(w),m.head.appendChild(w)}}}function __(u,h,m){qs.S(u,h,m);var w=Du;if(w&&u){var A=Nt(w).hoistableStyles,R=Mu(u);h=h||"default";var J=A.get(R);if(!J){var he={loading:0,preload:null};if(J=w.querySelector(Ah(R)))he.loading=5;else{u=f({rel:"stylesheet",href:u,"data-precedence":h},m),(m=Sa.get(R))&&Ph(u,m);var ke=J=w.createElement("link");It(ke),ri(ke,"link",u),ke._p=new Promise(function(Xe,ot){ke.onload=Xe,ke.onerror=ot}),ke.addEventListener("load",function(){he.loading|=1}),ke.addEventListener("error",function(){he.loading|=2}),he.loading|=4,nm(J,h,w)}J={type:"stylesheet",instance:J,count:1,state:he},A.set(R,J)}}}function C_(u,h){qs.X(u,h);var m=Du;if(m&&u){var w=Nt(m).hoistableScripts,A=Iu(u),R=w.get(A);R||(R=m.querySelector(Eh(A)),R||(u=f({src:u,async:!0},h),(h=Sa.get(A))&&Ax(u,h),R=m.createElement("script"),It(R),ri(R,"link",u),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},w.set(A,R))}}function T_(u,h){qs.M(u,h);var m=Du;if(m&&u){var w=Nt(m).hoistableScripts,A=Iu(u),R=w.get(A);R||(R=m.querySelector(Eh(A)),R||(u=f({src:u,async:!0,type:"module"},h),(h=Sa.get(A))&&Ax(u,h),R=m.createElement("script"),It(R),ri(R,"link",u),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},w.set(A,R))}}function K1(u,h,m,w){var A=(A=Me.current)?on(A):null;if(!A)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Mu(m.href),m=Nt(A).hoistableStyles,w=m.get(h),w||(w={type:"style",instance:null,count:0,state:null},m.set(h,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Mu(m.href);var R=Nt(A).hoistableStyles,J=R.get(u);if(J||(A=A.ownerDocument||A,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(u,J),(R=A.querySelector(Ah(u)))&&!R._p&&(J.instance=R,J.state.loading=5),Sa.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Sa.set(u,m),R||k_(A,u,m,J.state))),h&&w===null)throw Error(i(528,""));return J}if(h&&w!==null)throw Error(i(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Iu(m),m=Nt(A).hoistableScripts,w=m.get(h),w||(w={type:"script",instance:null,count:0,state:null},m.set(h,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function Mu(u){return'href="'+La(u)+'"'}function Ah(u){return'link[rel="stylesheet"]['+u+"]"}function Q1(u){return f({},u,{"data-precedence":u.precedence,precedence:null})}function k_(u,h,m,w){u.querySelector('link[rel="preload"][as="style"]['+h+"]")?w.loading=1:(h=u.createElement("link"),w.preload=h,h.addEventListener("load",function(){return w.loading|=1}),h.addEventListener("error",function(){return w.loading|=2}),ri(h,"link",m),It(h),u.head.appendChild(h))}function Iu(u){return'[src="'+La(u)+'"]'}function Eh(u){return"script[async]"+u}function X1(u,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var w=u.querySelector('style[data-href~="'+La(m.href)+'"]');if(w)return h.instance=w,It(w),w;var A=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return w=(u.ownerDocument||u).createElement("style"),It(w),ri(w,"style",A),nm(w,m.precedence,u),h.instance=w;case"stylesheet":A=Mu(m.href);var R=u.querySelector(Ah(A));if(R)return h.state.loading|=4,h.instance=R,It(R),R;w=Q1(m),(A=Sa.get(A))&&Ph(w,A),R=(u.ownerDocument||u).createElement("link"),It(R);var J=R;return J._p=new Promise(function(he,ke){J.onload=he,J.onerror=ke}),ri(R,"link",w),h.state.loading|=4,nm(R,m.precedence,u),h.instance=R;case"script":return R=Iu(m.src),(A=u.querySelector(Eh(R)))?(h.instance=A,It(A),A):(w=m,(A=Sa.get(R))&&(w=f({},m),Ax(w,A)),u=u.ownerDocument||u,A=u.createElement("script"),It(A),ri(A,"link",w),u.head.appendChild(A),h.instance=A);case"void":return null;default:throw Error(i(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(w=h.instance,h.state.loading|=4,nm(w,m.precedence,u));return h.instance}function nm(u,h,m){for(var w=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=w.length?w[w.length-1]:null,R=A,J=0;J<w.length;J++){var he=w[J];if(he.dataset.precedence===h)R=he;else if(R!==A)break}R?R.parentNode.insertBefore(u,R.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(u,h.firstChild))}function Ph(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.title==null&&(u.title=h.title)}function Ax(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.integrity==null&&(u.integrity=h.integrity)}var Ru=null;function J1(u,h,m){if(Ru===null){var w=new Map,A=Ru=new Map;A.set(m,w)}else A=Ru,w=A.get(m),w||(w=new Map,A.set(m,w));if(w.has(u))return w;for(w.set(u,null),m=m.getElementsByTagName(u),A=0;A<m.length;A++){var R=m[A];if(!(R[Fl]||R[_n]||u==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var J=R.getAttribute(h)||"";J=u+J;var he=w.get(J);he?he.push(R):w.set(J,[R])}}return w}function Z1(u,h,m){u=u.ownerDocument||u,u.head.insertBefore(m,h==="title"?u.querySelector("head > title"):null)}function A_(u,h,m){if(m===1||h.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return u=h.disabled,typeof h.precedence=="string"&&u==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function ii(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var ui=null;function E_(){}function P_(u,h,m){if(ui===null)throw Error(i(475));var w=ui;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=Mu(m.href),R=u.querySelector(Ah(A));if(R){u=R._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(w.count++,w=Oh.bind(w),u.then(w,w)),h.state.loading|=4,h.instance=R,It(R);return}R=u.ownerDocument||u,m=Q1(m),(A=Sa.get(A))&&Ph(m,A),R=R.createElement("link"),It(R);var J=R;J._p=new Promise(function(he,ke){J.onload=he,J.onerror=ke}),ri(R,"link",m),h.instance=R}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(w.count++,h=Oh.bind(w),u.addEventListener("load",h),u.addEventListener("error",h))}}function O_(){if(ui===null)throw Error(i(475));var u=ui;return u.stylesheets&&u.count===0&&Ex(u,u.stylesheets),0<u.count?function(h){var m=setTimeout(function(){if(u.stylesheets&&Ex(u,u.stylesheets),u.unsuspend){var w=u.unsuspend;u.unsuspend=null,w()}},6e4);return u.unsuspend=h,function(){u.unsuspend=null,clearTimeout(m)}}:null}function Oh(){if(this.count--,this.count===0){if(this.stylesheets)Ex(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var rm=null;function Ex(u,h){u.stylesheets=null,u.unsuspend!==null&&(u.count++,rm=new Map,h.forEach(D_,u),rm=null,Oh.call(u))}function D_(u,h){if(!(h.state.loading&4)){var m=rm.get(u);if(m)var w=m.get(null);else{m=new Map,rm.set(u,m);for(var A=u.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<A.length;R++){var J=A[R];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(m.set(J.dataset.precedence,J),w=J)}w&&m.set(null,w)}A=h.instance,J=A.getAttribute("data-precedence"),R=m.get(J)||w,R===w&&m.set(null,A),m.set(J,A),this.count++,w=Oh.bind(this),A.addEventListener("load",w),A.addEventListener("error",w),R?R.parentNode.insertBefore(A,R.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(A,u.firstChild)),h.state.loading|=4}}var Lu={$$typeof:C,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function M_(u,h,m,w,A,R,J,he){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.hiddenUpdates=vt(null),this.identifierPrefix=w,this.onUncaughtError=A,this.onCaughtError=R,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function ej(u,h,m,w,A,R,J,he,ke,Xe,ot,ft){return u=new M_(u,h,m,J,he,ke,Xe,ft),h=1,R===!0&&(h|=24),R=Hi(3,null,null,h),u.current=R,R.stateNode=u,h=Ny(),h.refCount++,u.pooledCache=h,h.refCount++,R.memoizedState={element:w,isDehydrated:m,cache:h},Ql(R),u}function tj(u){return u?(u=Ul,u):Ul}function Px(u,h,m,w,A,R){A=tj(A),w.context===null?w.context=A:w.pendingContext=A,w=Qo(h),w.payload={element:m},R=R===void 0?null:R,R!==null&&(w.callback=R),m=lo(u,w,h),m!==null&&(wa(m,u,h),Hd(m,u,h))}function Ox(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<h?m:h}}function Dx(u,h){Ox(u,h),(u=u.alternate)&&Ox(u,h)}function nj(u){if(u.tag===13){var h=ql(u,67108864);h!==null&&wa(h,u,67108864),Dx(u,67108864)}}var im=!0;function I_(u,h,m,w){var A=q.T;q.T=null;var R=W.p;try{W.p=2,Mx(u,h,m,w)}finally{W.p=R,q.T=A}}function Fu(u,h,m,w){var A=q.T;q.T=null;var R=W.p;try{W.p=8,Mx(u,h,m,w)}finally{W.p=R,q.T=A}}function Mx(u,h,m,w){if(im){var A=Ix(w);if(A===null)bo(u,h,w,am,m),ij(u,w);else if(L_(A,u,h,m,w))w.stopPropagation();else if(ij(u,w),h&4&&-1<R_.indexOf(u)){for(;A!==null;){var R=it(A);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var J=mt(R.pendingLanes);if(J!==0){var he=R;for(he.pendingLanes|=2,he.entangledLanes|=2;J;){var ke=1<<31-me(J);he.entanglements[1]|=ke,J&=~ke}Bs(R),(Jn&6)===0&&(Cu=ee()+500,Nh(0))}}break;case 13:he=ql(R,2),he!==null&&wa(he,R,2),qp(),Dx(R,2)}if(R=Ix(w),R===null&&bo(u,h,w,am,m),R===A)break;A=R}A!==null&&w.stopPropagation()}else bo(u,h,w,null,m)}}function Ix(u){return u=ay(u),Rx(u)}var am=null;function Rx(u){if(am=null,u=$o(u),u!==null){var h=s(u);if(h===null)u=null;else{var m=h.tag;if(m===13){if(u=o(h),u!==null)return u;u=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null)}}return am=u,null}function rj(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(we()){case Ue:return 2;case Ge:return 8;case Le:case oe:return 32;case _e:return 268435456;default:return 32}default:return 32}}var sm=!1,jo=null,hl=null,fl=null,Dh=new Map,Mh=new Map,pl=[],R_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ij(u,h){switch(u){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":fl=null;break;case"pointerover":case"pointerout":Dh.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(h.pointerId)}}function Ih(u,h,m,w,A,R){return u===null||u.nativeEvent!==R?(u={blockedOn:h,domEventName:m,eventSystemFlags:w,nativeEvent:R,targetContainers:[A]},h!==null&&(h=it(h),h!==null&&nj(h)),u):(u.eventSystemFlags|=w,h=u.targetContainers,A!==null&&h.indexOf(A)===-1&&h.push(A),u)}function L_(u,h,m,w,A){switch(h){case"focusin":return jo=Ih(jo,u,h,m,w,A),!0;case"dragenter":return hl=Ih(hl,u,h,m,w,A),!0;case"mouseover":return fl=Ih(fl,u,h,m,w,A),!0;case"pointerover":var R=A.pointerId;return Dh.set(R,Ih(Dh.get(R)||null,u,h,m,w,A)),!0;case"gotpointercapture":return R=A.pointerId,Mh.set(R,Ih(Mh.get(R)||null,u,h,m,w,A)),!0}return!1}function aj(u){var h=$o(u.target);if(h!==null){var m=s(h);if(m!==null){if(h=m.tag,h===13){if(h=o(m),h!==null){u.blockedOn=h,br(u.priority,function(){if(m.tag===13){var w=ki();w=jt(w);var A=ql(m,w);A!==null&&wa(A,m,w),Dx(m,w)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function om(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var m=Ix(u.nativeEvent);if(m===null){m=u.nativeEvent;var w=new m.constructor(m.type,m);qf=w,m.target.dispatchEvent(w),qf=null}else return h=it(m),h!==null&&nj(h),u.blockedOn=m,!1;h.shift()}return!0}function sj(u,h,m){om(u)&&m.delete(h)}function F_(){sm=!1,jo!==null&&om(jo)&&(jo=null),hl!==null&&om(hl)&&(hl=null),fl!==null&&om(fl)&&(fl=null),Dh.forEach(sj),Mh.forEach(sj)}function lm(u,h){u.blockedOn===h&&(u.blockedOn=null,sm||(sm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,F_)))}var cm=null;function oj(u){cm!==u&&(cm=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){cm===u&&(cm=null);for(var h=0;h<u.length;h+=3){var m=u[h],w=u[h+1],A=u[h+2];if(typeof w!="function"){if(Rx(w||m)===null)continue;break}var R=it(m);R!==null&&(u.splice(h,3),h-=3,nh(R,{pending:!0,data:A,method:m.method,action:w},w,A))}}))}function Rh(u){function h(ke){return lm(ke,u)}jo!==null&&lm(jo,u),hl!==null&&lm(hl,u),fl!==null&&lm(fl,u),Dh.forEach(h),Mh.forEach(h);for(var m=0;m<pl.length;m++){var w=pl[m];w.blockedOn===u&&(w.blockedOn=null)}for(;0<pl.length&&(m=pl[0],m.blockedOn===null);)aj(m),m.blockedOn===null&&pl.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(w=0;w<m.length;w+=3){var A=m[w],R=m[w+1],J=A[wn]||null;if(typeof R=="function")J||oj(m);else if(J){var he=null;if(R&&R.hasAttribute("formAction")){if(A=R,J=R[wn]||null)he=J.formAction;else if(Rx(A)!==null)continue}else he=J.action;typeof he=="function"?m[w+1]=he:(m.splice(w,3),w-=3),oj(m)}}}function Lx(u){this._internalRoot=u}um.prototype.render=Lx.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(i(409));var m=h.current,w=ki();Px(m,w,u,h,null,null)},um.prototype.unmount=Lx.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;Px(u.current,2,null,u,null,null),qp(),h[oi]=null}};function um(u){this._internalRoot=u}um.prototype.unstable_scheduleHydration=function(u){if(u){var h=Kn();u={blockedOn:null,target:u,priority:h};for(var m=0;m<pl.length&&h!==0&&h<pl[m].priority;m++);pl.splice(m,0,u),m===0&&aj(u)}};var lj=e.version;if(lj!=="19.1.0")throw Error(i(527,lj,"19.1.0"));W.findDOMNode=function(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=c(h),u=u!==null?d(u):null,u=u===null?null:u.stateNode,u};var $_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dm.isDisabled&&dm.supportsFiber)try{Y=dm.inject($_),ye=dm}catch{}}return $x.createRoot=function(u,h){if(!a(u))throw Error(i(299));var m=!1,w="",A=Qy,R=kp,J=W0,he=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(R=h.onCaughtError),h.onRecoverableError!==void 0&&(J=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(he=h.unstable_transitionCallbacks)),h=ej(u,1,!1,null,null,m,w,A,R,J,he,null),u[oi]=h.current,Nx(u),new Lx(h)},$x.hydrateRoot=function(u,h,m){if(!a(u))throw Error(i(299));var w=!1,A="",R=Qy,J=kp,he=W0,ke=null,Xe=null;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(J=m.onCaughtError),m.onRecoverableError!==void 0&&(he=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ke=m.unstable_transitionCallbacks),m.formState!==void 0&&(Xe=m.formState)),h=ej(u,1,!0,h,m??null,w,A,R,J,he,ke,Xe),h.context=tj(null),m=h.current,w=ki(),w=jt(w),A=Qo(w),A.callback=null,lo(m,A,w),m=w,h.current.lanes=m,Ce(h,m),Bs(h),u[oi]=h.current,Nx(u),new um(h)},$x.version="19.1.0",$x}var UM;function XG(){if(UM)return G_.exports;UM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),G_.exports=QG(),G_.exports}var JG=XG(),Pg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ZG={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Wu,SO,LB,eW=(LB=class{constructor(){Bt(this,Wu,ZG);Bt(this,SO,!1)}setTimeoutProvider(t){Et(this,Wu,t)}setTimeout(t,e){return De(this,Wu).setTimeout(t,e)}clearTimeout(t){De(this,Wu).clearTimeout(t)}setInterval(t,e){return De(this,Wu).setInterval(t,e)}clearInterval(t){De(this,Wu).clearInterval(t)}},Wu=new WeakMap,SO=new WeakMap,LB),Wh=new eW;function tW(t){setTimeout(t,0)}var ff=typeof window>"u"||"Deno"in globalThis;function ka(){}function nW(t,e){return typeof t=="function"?t(e):t}function HA(t){return typeof t=="number"&&t>=0&&t!==1/0}function KB(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ad(t,e){return typeof t=="function"?t(e):t}function Gs(t,e){return typeof t=="function"?t(e):t}function VM(t,e){const{type:n="all",exact:i,fetchStatus:a,predicate:s,queryKey:o,stale:l}=t;if(o){if(i){if(e.queryHash!==_O(o,e.options))return!1}else if(!Cv(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||a&&a!==e.state.fetchStatus||s&&!s(e))}function HM(t,e){const{exact:n,status:i,predicate:a,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(pf(e.options.mutationKey)!==pf(s))return!1}else if(!Cv(e.options.mutationKey,s))return!1}return!(i&&e.state.status!==i||a&&!a(e))}function _O(t,e){return((e==null?void 0:e.queryKeyHashFn)||pf)(t)}function pf(t){return JSON.stringify(t,(e,n)=>GA(n)?Object.keys(n).sort().reduce((i,a)=>(i[a]=n[a],i),{}):n)}function Cv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Cv(t[n],e[n])):!1}var rW=Object.prototype.hasOwnProperty;function QB(t,e,n=0){if(t===e)return t;if(n>500)return e;const i=GM(t)&&GM(e);if(!i&&!(GA(t)&&GA(e)))return e;const s=(i?t:Object.keys(t)).length,o=i?e:Object.keys(e),l=o.length,c=i?new Array(l):{};let d=0;for(let f=0;f<l;f++){const p=i?f:o[f],y=t[p],x=e[p];if(y===x){c[p]=y,(i?f<s:rW.call(t,p))&&d++;continue}if(y===null||x===null||typeof y!="object"||typeof x!="object"){c[p]=x;continue}const v=QB(y,x,n+1);c[p]=v,v===y&&d++}return s===l&&d===s?t:c}function sw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function GM(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function GA(t){if(!WM(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!WM(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function WM(t){return Object.prototype.toString.call(t)==="[object Object]"}function iW(t){return new Promise(e=>{Wh.setTimeout(e,t)})}function WA(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?QB(t,e):e}function aW(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function sW(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var CO=Symbol();function XB(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===CO?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function TO(t,e){return typeof t=="function"?t(...e):!!t}function oW(t,e,n){let i=!1,a;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(a??(a=e()),i||(i=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)}),t}var Zh,Yu,$m,FB,lW=(FB=class extends Pg{constructor(){super();Bt(this,Zh);Bt(this,Yu);Bt(this,$m);Et(this,$m,e=>{if(!ff&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){De(this,Yu)||this.setEventListener(De(this,$m))}onUnsubscribe(){var e;this.hasListeners()||((e=De(this,Yu))==null||e.call(this),Et(this,Yu,void 0))}setEventListener(e){var n;Et(this,$m,e),(n=De(this,Yu))==null||n.call(this),Et(this,Yu,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){De(this,Zh)!==e&&(Et(this,Zh,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof De(this,Zh)=="boolean"?De(this,Zh):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Zh=new WeakMap,Yu=new WeakMap,$m=new WeakMap,FB),kO=new lW;function YA(){let t,e;const n=new Promise((a,s)=>{t=a,e=s});n.status="pending",n.catch(()=>{});function i(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{i({status:"fulfilled",value:a}),t(a)},n.reject=a=>{i({status:"rejected",reason:a}),e(a)},n}var cW=tW;function uW(){let t=[],e=0,n=l=>{l()},i=l=>{l()},a=cW;const s=l=>{e?t.push(l):a(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&a(()=>{i(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{i=l},setScheduler:l=>{a=l}}}var ji=uW(),Bm,Ku,zm,$B,dW=($B=class extends Pg{constructor(){super();Bt(this,Bm,!0);Bt(this,Ku);Bt(this,zm);Et(this,zm,e=>{if(!ff&&window.addEventListener){const n=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}})}onSubscribe(){De(this,Ku)||this.setEventListener(De(this,zm))}onUnsubscribe(){var e;this.hasListeners()||((e=De(this,Ku))==null||e.call(this),Et(this,Ku,void 0))}setEventListener(e){var n;Et(this,zm,e),(n=De(this,Ku))==null||n.call(this),Et(this,Ku,e(this.setOnline.bind(this)))}setOnline(e){De(this,Bm)!==e&&(Et(this,Bm,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return De(this,Bm)}},Bm=new WeakMap,Ku=new WeakMap,zm=new WeakMap,$B),ow=new dW;function hW(t){return Math.min(1e3*2**t,3e4)}function JB(t){return(t??"online")==="online"?ow.isOnline():!0}var KA=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ZB(t){let e=!1,n=0,i;const a=YA(),s=()=>a.status!=="pending",o=S=>{var N;if(!s()){const _=new KA(S);y(_),(N=t.onCancel)==null||N.call(t,_)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>kO.isFocused()&&(t.networkMode==="always"||ow.isOnline())&&t.canRun(),f=()=>JB(t.networkMode)&&t.canRun(),p=S=>{s()||(i==null||i(),a.resolve(S))},y=S=>{s()||(i==null||i(),a.reject(S))},x=()=>new Promise(S=>{var N;i=_=>{(s()||d())&&S(_)},(N=t.onPause)==null||N.call(t)}).then(()=>{var S;i=void 0,s()||(S=t.onContinue)==null||S.call(t)}),v=()=>{if(s())return;let S;const N=n===0?t.initialPromise:void 0;try{S=N??t.fn()}catch(_){S=Promise.reject(_)}Promise.resolve(S).then(p).catch(_=>{var P;if(s())return;const T=t.retry??(ff?0:3),C=t.retryDelay??hW,O=typeof C=="function"?C(n,_):C,k=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,_);if(e||!k){y(_);return}n++,(P=t.onFail)==null||P.call(t,n,_),iW(O).then(()=>d()?void 0:x()).then(()=>{e?y(_):v()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?v():x().then(v),a)}}var ef,BB,ez=(BB=class{constructor(){Bt(this,ef)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HA(this.gcTime)&&Et(this,ef,Wh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ff?1/0:5*60*1e3))}clearGcTimeout(){De(this,ef)&&(Wh.clearTimeout(De(this,ef)),Et(this,ef,void 0))}},ef=new WeakMap,BB),tf,qm,Hs,nf,Ai,vb,rf,_o,hc,zB,fW=(zB=class extends ez{constructor(e){super();Bt(this,_o);Bt(this,tf);Bt(this,qm);Bt(this,Hs);Bt(this,nf);Bt(this,Ai);Bt(this,vb);Bt(this,rf);Et(this,rf,!1),Et(this,vb,e.defaultOptions),this.setOptions(e.options),this.observers=[],Et(this,nf,e.client),Et(this,Hs,De(this,nf).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Et(this,tf,KM(this.options)),this.state=e.state??De(this,tf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=De(this,Ai))==null?void 0:e.promise}setOptions(e){if(this.options={...De(this,vb),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=KM(this.options);n.data!==void 0&&(this.setState(YM(n.data,n.dataUpdatedAt)),Et(this,tf,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&De(this,Hs).remove(this)}setData(e,n){const i=WA(this.state.data,e,this.options);return xn(this,_o,hc).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(e,n){xn(this,_o,hc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var i,a;const n=(i=De(this,Ai))==null?void 0:i.promise;return(a=De(this,Ai))==null||a.cancel(e),n?n.then(ka).catch(ka):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(De(this,tf))}isActive(){return this.observers.some(e=>Gs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===CO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ad(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!KB(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=De(this,Ai))==null||n.continue()}onOnline(){var n;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=De(this,Ai))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),De(this,Hs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(De(this,Ai)&&(De(this,rf)?De(this,Ai).cancel({revert:!0}):De(this,Ai).cancelRetry()),this.scheduleGc()),De(this,Hs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xn(this,_o,hc).call(this,{type:"invalidate"})}async fetch(e,n){var c,d,f,p,y,x,v,S,N,_,T,C;if(this.state.fetchStatus!=="idle"&&((c=De(this,Ai))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(De(this,Ai))return De(this,Ai).continueRetry(),De(this,Ai).promise}if(e&&this.setOptions(e),!this.options.queryFn){const O=this.observers.find(k=>k.options.queryFn);O&&this.setOptions(O.options)}const i=new AbortController,a=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(Et(this,rf,!0),i.signal)})},s=()=>{const O=XB(this.options,n),P=(()=>{const I={client:De(this,nf),queryKey:this.queryKey,meta:this.meta};return a(I),I})();return Et(this,rf,!1),this.options.persister?this.options.persister(O,P,this):O(P)},l=(()=>{const O={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:De(this,nf),state:this.state,fetchFn:s};return a(O),O})();(d=this.options.behavior)==null||d.onFetch(l,this),Et(this,qm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&xn(this,_o,hc).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),Et(this,Ai,ZB({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:O=>{O instanceof KA&&O.revert&&this.setState({...De(this,qm),fetchStatus:"idle"}),i.abort()},onFail:(O,k)=>{xn(this,_o,hc).call(this,{type:"failed",failureCount:O,error:k})},onPause:()=>{xn(this,_o,hc).call(this,{type:"pause"})},onContinue:()=>{xn(this,_o,hc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const O=await De(this,Ai).start();if(O===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(O),(x=(y=De(this,Hs).config).onSuccess)==null||x.call(y,O,this),(S=(v=De(this,Hs).config).onSettled)==null||S.call(v,O,this.state.error,this),O}catch(O){if(O instanceof KA){if(O.silent)return De(this,Ai).promise;if(O.revert){if(this.state.data===void 0)throw O;return this.state.data}}throw xn(this,_o,hc).call(this,{type:"error",error:O}),(_=(N=De(this,Hs).config).onError)==null||_.call(N,O,this),(C=(T=De(this,Hs).config).onSettled)==null||C.call(T,this.state.data,O,this),O}finally{this.scheduleGc()}}},tf=new WeakMap,qm=new WeakMap,Hs=new WeakMap,nf=new WeakMap,Ai=new WeakMap,vb=new WeakMap,rf=new WeakMap,_o=new WeakSet,hc=function(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...tz(i.data,this.options),fetchMeta:e.meta??null};case"success":const a={...i,...YM(e.data,e.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Et(this,qm,e.manual?a:void 0),a;case"error":const s=e.error;return{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),ji.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),De(this,Hs).notify({query:this,type:"updated",action:e})})},zB);function tz(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:JB(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function YM(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function KM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Za,Fn,bb,Ca,af,Um,pc,Qu,jb,Vm,Hm,sf,of,Xu,Gm,cr,lv,QA,XA,JA,ZA,eE,tE,nE,nz,qB,pW=(qB=class extends Pg{constructor(e,n){super();Bt(this,cr);Bt(this,Za);Bt(this,Fn);Bt(this,bb);Bt(this,Ca);Bt(this,af);Bt(this,Um);Bt(this,pc);Bt(this,Qu);Bt(this,jb);Bt(this,Vm);Bt(this,Hm);Bt(this,sf);Bt(this,of);Bt(this,Xu);Bt(this,Gm,new Set);this.options=n,Et(this,Za,e),Et(this,Qu,null),Et(this,pc,YA()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(De(this,Fn).addObserver(this),QM(De(this,Fn),this.options)?xn(this,cr,lv).call(this):this.updateResult(),xn(this,cr,ZA).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rE(De(this,Fn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rE(De(this,Fn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,xn(this,cr,eE).call(this),xn(this,cr,tE).call(this),De(this,Fn).removeObserver(this)}setOptions(e){const n=this.options,i=De(this,Fn);if(this.options=De(this,Za).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Gs(this.options.enabled,De(this,Fn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");xn(this,cr,nE).call(this),De(this,Fn).setOptions(this.options),n._defaulted&&!sw(this.options,n)&&De(this,Za).getQueryCache().notify({type:"observerOptionsUpdated",query:De(this,Fn),observer:this});const a=this.hasListeners();a&&XM(De(this,Fn),i,this.options,n)&&xn(this,cr,lv).call(this),this.updateResult(),a&&(De(this,Fn)!==i||Gs(this.options.enabled,De(this,Fn))!==Gs(n.enabled,De(this,Fn))||ad(this.options.staleTime,De(this,Fn))!==ad(n.staleTime,De(this,Fn)))&&xn(this,cr,QA).call(this);const s=xn(this,cr,XA).call(this);a&&(De(this,Fn)!==i||Gs(this.options.enabled,De(this,Fn))!==Gs(n.enabled,De(this,Fn))||s!==De(this,Xu))&&xn(this,cr,JA).call(this,s)}getOptimisticResult(e){const n=De(this,Za).getQueryCache().build(De(this,Za),e),i=this.createResult(n,e);return gW(this,i)&&(Et(this,Ca,i),Et(this,Um,this.options),Et(this,af,De(this,Fn).state)),i}getCurrentResult(){return De(this,Ca)}trackResult(e,n){return new Proxy(e,{get:(i,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&De(this,pc).status==="pending"&&De(this,pc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(i,a))})}trackProp(e){De(this,Gm).add(e)}getCurrentQuery(){return De(this,Fn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=De(this,Za).defaultQueryOptions(e),i=De(this,Za).getQueryCache().build(De(this,Za),n);return i.fetch().then(()=>this.createResult(i,n))}fetch(e){return xn(this,cr,lv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),De(this,Ca)))}createResult(e,n){var B;const i=De(this,Fn),a=this.options,s=De(this,Ca),o=De(this,af),l=De(this,Um),d=e!==i?e.state:De(this,bb),{state:f}=e;let p={...f},y=!1,x;if(n._optimisticResults){const $=this.hasListeners(),L=!$&&QM(e,n),V=$&&XM(e,i,n,a);(L||V)&&(p={...p,...tz(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:v,errorUpdatedAt:S,status:N}=p;x=p.data;let _=!1;if(n.placeholderData!==void 0&&x===void 0&&N==="pending"){let $;s!=null&&s.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?($=s.data,_=!0):$=typeof n.placeholderData=="function"?n.placeholderData((B=De(this,Hm))==null?void 0:B.state.data,De(this,Hm)):n.placeholderData,$!==void 0&&(N="success",x=WA(s==null?void 0:s.data,$,n),y=!0)}if(n.select&&x!==void 0&&!_)if(s&&x===(o==null?void 0:o.data)&&n.select===De(this,jb))x=De(this,Vm);else try{Et(this,jb,n.select),x=n.select(x),x=WA(s==null?void 0:s.data,x,n),Et(this,Vm,x),Et(this,Qu,null)}catch($){Et(this,Qu,$)}De(this,Qu)&&(v=De(this,Qu),x=De(this,Vm),S=Date.now(),N="error");const T=p.fetchStatus==="fetching",C=N==="pending",O=N==="error",k=C&&T,P=x!==void 0,F={status:N,fetchStatus:p.fetchStatus,isPending:C,isSuccess:N==="success",isError:O,isInitialLoading:k,isLoading:k,data:x,dataUpdatedAt:p.dataUpdatedAt,error:v,errorUpdatedAt:S,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:O&&!P,isPaused:p.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:O&&P,isStale:AO(e,n),refetch:this.refetch,promise:De(this,pc),isEnabled:Gs(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const $=F.data!==void 0,L=F.status==="error"&&!$,V=X=>{L?X.reject(F.error):$&&X.resolve(F.data)},H=()=>{const X=Et(this,pc,F.promise=YA());V(X)},te=De(this,pc);switch(te.status){case"pending":e.queryHash===i.queryHash&&V(te);break;case"fulfilled":(L||F.data!==te.value)&&H();break;case"rejected":(!L||F.error!==te.reason)&&H();break}}return F}updateResult(){const e=De(this,Ca),n=this.createResult(De(this,Fn),this.options);if(Et(this,af,De(this,Fn).state),Et(this,Um,this.options),De(this,af).data!==void 0&&Et(this,Hm,De(this,Fn)),sw(n,e))return;Et(this,Ca,n);const i=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!De(this,Gm).size)return!0;const o=new Set(s??De(this,Gm));return this.options.throwOnError&&o.add("error"),Object.keys(De(this,Ca)).some(l=>{const c=l;return De(this,Ca)[c]!==e[c]&&o.has(c)})};xn(this,cr,nz).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&xn(this,cr,ZA).call(this)}},Za=new WeakMap,Fn=new WeakMap,bb=new WeakMap,Ca=new WeakMap,af=new WeakMap,Um=new WeakMap,pc=new WeakMap,Qu=new WeakMap,jb=new WeakMap,Vm=new WeakMap,Hm=new WeakMap,sf=new WeakMap,of=new WeakMap,Xu=new WeakMap,Gm=new WeakMap,cr=new WeakSet,lv=function(e){xn(this,cr,nE).call(this);let n=De(this,Fn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ka)),n},QA=function(){xn(this,cr,eE).call(this);const e=ad(this.options.staleTime,De(this,Fn));if(ff||De(this,Ca).isStale||!HA(e))return;const i=KB(De(this,Ca).dataUpdatedAt,e)+1;Et(this,sf,Wh.setTimeout(()=>{De(this,Ca).isStale||this.updateResult()},i))},XA=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(De(this,Fn)):this.options.refetchInterval)??!1},JA=function(e){xn(this,cr,tE).call(this),Et(this,Xu,e),!(ff||Gs(this.options.enabled,De(this,Fn))===!1||!HA(De(this,Xu))||De(this,Xu)===0)&&Et(this,of,Wh.setInterval(()=>{(this.options.refetchIntervalInBackground||kO.isFocused())&&xn(this,cr,lv).call(this)},De(this,Xu)))},ZA=function(){xn(this,cr,QA).call(this),xn(this,cr,JA).call(this,xn(this,cr,XA).call(this))},eE=function(){De(this,sf)&&(Wh.clearTimeout(De(this,sf)),Et(this,sf,void 0))},tE=function(){De(this,of)&&(Wh.clearInterval(De(this,of)),Et(this,of,void 0))},nE=function(){const e=De(this,Za).getQueryCache().build(De(this,Za),this.options);if(e===De(this,Fn))return;const n=De(this,Fn);Et(this,Fn,e),Et(this,bb,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},nz=function(e){ji.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(De(this,Ca))}),De(this,Za).getQueryCache().notify({query:De(this,Fn),type:"observerResultsUpdated"})})},qB);function mW(t,e){return Gs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function QM(t,e){return mW(t,e)||t.state.data!==void 0&&rE(t,e,e.refetchOnMount)}function rE(t,e,n){if(Gs(e.enabled,t)!==!1&&ad(e.staleTime,t)!=="static"){const i=typeof n=="function"?n(t):n;return i==="always"||i!==!1&&AO(t,e)}return!1}function XM(t,e,n,i){return(t!==e||Gs(i.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&AO(t,n)}function AO(t,e){return Gs(e.enabled,t)!==!1&&t.isStaleByTime(ad(e.staleTime,t))}function gW(t,e){return!sw(t.getCurrentResult(),e)}function JM(t){return{onFetch:(e,n)=>{var f,p,y,x,v;const i=e.options,a=(y=(p=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:y.direction,s=((x=e.state.data)==null?void 0:x.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let S=!1;const N=C=>{oW(C,()=>e.signal,()=>S=!0)},_=XB(e.options,e.fetchOptions),T=async(C,O,k)=>{if(S)return Promise.reject();if(O==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:O,direction:k?"backward":"forward",meta:e.options.meta};return N(L),L})(),F=await _(I),{maxPages:B}=e.options,$=k?sW:aW;return{pages:$(C.pages,F,B),pageParams:$(C.pageParams,O,B)}};if(a&&s.length){const C=a==="backward",O=C?yW:ZM,k={pages:s,pageParams:o},P=O(i,k);l=await T(k,P,C)}else{const C=t??s.length;do{const O=c===0?o[0]??i.initialPageParam:ZM(i,l);if(c>0&&O==null)break;l=await T(l,O),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var S,N;return(N=(S=e.options).persister)==null?void 0:N.call(S,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function ZM(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function yW(t,{pages:e,pageParams:n}){var i;return e.length>0?(i=t.getPreviousPageParam)==null?void 0:i.call(t,e[0],e,n[0],n):void 0}var wb,yl,Ta,lf,xl,Uu,UB,xW=(UB=class extends ez{constructor(e){super();Bt(this,xl);Bt(this,wb);Bt(this,yl);Bt(this,Ta);Bt(this,lf);Et(this,wb,e.client),this.mutationId=e.mutationId,Et(this,Ta,e.mutationCache),Et(this,yl,[]),this.state=e.state||rz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){De(this,yl).includes(e)||(De(this,yl).push(e),this.clearGcTimeout(),De(this,Ta).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Et(this,yl,De(this,yl).filter(n=>n!==e)),this.scheduleGc(),De(this,Ta).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){De(this,yl).length||(this.state.status==="pending"?this.scheduleGc():De(this,Ta).remove(this))}continue(){var e;return((e=De(this,lf))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,d,f,p,y,x,v,S,N,_,T,C,O,k,P,I,F,B;const n=()=>{xn(this,xl,Uu).call(this,{type:"continue"})},i={client:De(this,wb),meta:this.options.meta,mutationKey:this.options.mutationKey};Et(this,lf,ZB({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(new Error("No mutationFn found")),onFail:($,L)=>{xn(this,xl,Uu).call(this,{type:"failed",failureCount:$,error:L})},onPause:()=>{xn(this,xl,Uu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>De(this,Ta).canRun(this)}));const a=this.state.status==="pending",s=!De(this,lf).canStart();try{if(a)n();else{xn(this,xl,Uu).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(o=De(this,Ta).config).onMutate)==null?void 0:l.call(o,e,this,i));const L=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,i));L!==this.state.context&&xn(this,xl,Uu).call(this,{type:"pending",context:L,variables:e,isPaused:s})}const $=await De(this,lf).start();return await((p=(f=De(this,Ta).config).onSuccess)==null?void 0:p.call(f,$,e,this.state.context,this,i)),await((x=(y=this.options).onSuccess)==null?void 0:x.call(y,$,e,this.state.context,i)),await((S=(v=De(this,Ta).config).onSettled)==null?void 0:S.call(v,$,null,this.state.variables,this.state.context,this,i)),await((_=(N=this.options).onSettled)==null?void 0:_.call(N,$,null,e,this.state.context,i)),xn(this,xl,Uu).call(this,{type:"success",data:$}),$}catch($){try{await((C=(T=De(this,Ta).config).onError)==null?void 0:C.call(T,$,e,this.state.context,this,i))}catch(L){Promise.reject(L)}try{await((k=(O=this.options).onError)==null?void 0:k.call(O,$,e,this.state.context,i))}catch(L){Promise.reject(L)}try{await((I=(P=De(this,Ta).config).onSettled)==null?void 0:I.call(P,void 0,$,this.state.variables,this.state.context,this,i))}catch(L){Promise.reject(L)}try{await((B=(F=this.options).onSettled)==null?void 0:B.call(F,void 0,$,e,this.state.context,i))}catch(L){Promise.reject(L)}throw xn(this,xl,Uu).call(this,{type:"error",error:$}),$}finally{De(this,Ta).runNext(this)}}},wb=new WeakMap,yl=new WeakMap,Ta=new WeakMap,lf=new WeakMap,xl=new WeakSet,Uu=function(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ji.batch(()=>{De(this,yl).forEach(i=>{i.onMutationUpdate(e)}),De(this,Ta).notify({mutation:this,type:"updated",action:e})})},UB);function rz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mc,Co,Sb,VB,vW=(VB=class extends Pg{constructor(e={}){super();Bt(this,mc);Bt(this,Co);Bt(this,Sb);this.config=e,Et(this,mc,new Set),Et(this,Co,new Map),Et(this,Sb,0)}build(e,n,i){const a=new xW({client:e,mutationCache:this,mutationId:++cj(this,Sb)._,options:e.defaultMutationOptions(n),state:i});return this.add(a),a}add(e){De(this,mc).add(e);const n=uj(e);if(typeof n=="string"){const i=De(this,Co).get(n);i?i.push(e):De(this,Co).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(De(this,mc).delete(e)){const n=uj(e);if(typeof n=="string"){const i=De(this,Co).get(n);if(i)if(i.length>1){const a=i.indexOf(e);a!==-1&&i.splice(a,1)}else i[0]===e&&De(this,Co).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=uj(e);if(typeof n=="string"){const i=De(this,Co).get(n),a=i==null?void 0:i.find(s=>s.state.status==="pending");return!a||a===e}else return!0}runNext(e){var i;const n=uj(e);if(typeof n=="string"){const a=(i=De(this,Co).get(n))==null?void 0:i.find(s=>s!==e&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ji.batch(()=>{De(this,mc).forEach(e=>{this.notify({type:"removed",mutation:e})}),De(this,mc).clear(),De(this,Co).clear()})}getAll(){return Array.from(De(this,mc))}find(e){const n={exact:!0,...e};return this.getAll().find(i=>HM(n,i))}findAll(e={}){return this.getAll().filter(n=>HM(e,n))}notify(e){ji.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ji.batch(()=>Promise.all(e.map(n=>n.continue().catch(ka))))}},mc=new WeakMap,Co=new WeakMap,Sb=new WeakMap,VB);function uj(t){var e;return(e=t.options.scope)==null?void 0:e.id}var gc,Ju,es,yc,Ac,Wj,iE,HB,bW=(HB=class extends Pg{constructor(n,i){super();Bt(this,Ac);Bt(this,gc);Bt(this,Ju);Bt(this,es);Bt(this,yc);Et(this,gc,n),this.setOptions(i),this.bindMethods(),xn(this,Ac,Wj).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const i=this.options;this.options=De(this,gc).defaultMutationOptions(n),sw(this.options,i)||De(this,gc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:De(this,es),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&pf(i.mutationKey)!==pf(this.options.mutationKey)?this.reset():((a=De(this,es))==null?void 0:a.state.status)==="pending"&&De(this,es).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=De(this,es))==null||n.removeObserver(this)}onMutationUpdate(n){xn(this,Ac,Wj).call(this),xn(this,Ac,iE).call(this,n)}getCurrentResult(){return De(this,Ju)}reset(){var n;(n=De(this,es))==null||n.removeObserver(this),Et(this,es,void 0),xn(this,Ac,Wj).call(this),xn(this,Ac,iE).call(this)}mutate(n,i){var a;return Et(this,yc,i),(a=De(this,es))==null||a.removeObserver(this),Et(this,es,De(this,gc).getMutationCache().build(De(this,gc),this.options)),De(this,es).addObserver(this),De(this,es).execute(n)}},gc=new WeakMap,Ju=new WeakMap,es=new WeakMap,yc=new WeakMap,Ac=new WeakSet,Wj=function(){var i;const n=((i=De(this,es))==null?void 0:i.state)??rz();Et(this,Ju,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},iE=function(n){ji.batch(()=>{var i,a,s,o,l,c,d,f;if(De(this,yc)&&this.hasListeners()){const p=De(this,Ju).variables,y=De(this,Ju).context,x={client:De(this,gc),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(a=(i=De(this,yc)).onSuccess)==null||a.call(i,n.data,p,y,x)}catch(v){Promise.reject(v)}try{(o=(s=De(this,yc)).onSettled)==null||o.call(s,n.data,null,p,y,x)}catch(v){Promise.reject(v)}}else if((n==null?void 0:n.type)==="error"){try{(c=(l=De(this,yc)).onError)==null||c.call(l,n.error,p,y,x)}catch(v){Promise.reject(v)}try{(f=(d=De(this,yc)).onSettled)==null||f.call(d,void 0,n.error,p,y,x)}catch(v){Promise.reject(v)}}}this.listeners.forEach(p=>{p(De(this,Ju))})})},HB),vl,GB,jW=(GB=class extends Pg{constructor(e={}){super();Bt(this,vl);this.config=e,Et(this,vl,new Map)}build(e,n,i){const a=n.queryKey,s=n.queryHash??_O(a,n);let o=this.get(s);return o||(o=new fW({client:e,queryKey:a,queryHash:s,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){De(this,vl).has(e.queryHash)||(De(this,vl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=De(this,vl).get(e.queryHash);n&&(e.destroy(),n===e&&De(this,vl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ji.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return De(this,vl).get(e)}getAll(){return[...De(this,vl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(i=>VM(n,i))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(i=>VM(e,i)):n}notify(e){ji.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ji.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ji.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},vl=new WeakMap,GB),Kr,Zu,ed,Wm,Ym,td,Km,Qm,WB,wW=(WB=class{constructor(t={}){Bt(this,Kr);Bt(this,Zu);Bt(this,ed);Bt(this,Wm);Bt(this,Ym);Bt(this,td);Bt(this,Km);Bt(this,Qm);Et(this,Kr,t.queryCache||new jW),Et(this,Zu,t.mutationCache||new vW),Et(this,ed,t.defaultOptions||{}),Et(this,Wm,new Map),Et(this,Ym,new Map),Et(this,td,0)}mount(){cj(this,td)._++,De(this,td)===1&&(Et(this,Km,kO.subscribe(async t=>{t&&(await this.resumePausedMutations(),De(this,Kr).onFocus())})),Et(this,Qm,ow.subscribe(async t=>{t&&(await this.resumePausedMutations(),De(this,Kr).onOnline())})))}unmount(){var t,e;cj(this,td)._--,De(this,td)===0&&((t=De(this,Km))==null||t.call(this),Et(this,Km,void 0),(e=De(this,Qm))==null||e.call(this),Et(this,Qm,void 0))}isFetching(t){return De(this,Kr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return De(this,Zu).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=De(this,Kr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=De(this,Kr).build(this,e),i=n.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ad(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return De(this,Kr).findAll(t).map(({queryKey:e,state:n})=>{const i=n.data;return[e,i]})}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),a=De(this,Kr).get(i.queryHash),s=a==null?void 0:a.state.data,o=nW(e,s);if(o!==void 0)return De(this,Kr).build(this,i).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ji.batch(()=>De(this,Kr).findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=De(this,Kr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=De(this,Kr);ji.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=De(this,Kr);return ji.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},i=ji.batch(()=>De(this,Kr).findAll(t).map(a=>a.cancel(n)));return Promise.all(i).then(ka).catch(ka)}invalidateQueries(t,e={}){return ji.batch(()=>(De(this,Kr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},i=ji.batch(()=>De(this,Kr).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(ka)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(i).then(ka)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=De(this,Kr).build(this,e);return n.isStaleByTime(ad(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ka).catch(ka)}fetchInfiniteQuery(t){return t.behavior=JM(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ka).catch(ka)}ensureInfiniteQueryData(t){return t.behavior=JM(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ow.isOnline()?De(this,Zu).resumePausedMutations():Promise.resolve()}getQueryCache(){return De(this,Kr)}getMutationCache(){return De(this,Zu)}getDefaultOptions(){return De(this,ed)}setDefaultOptions(t){Et(this,ed,t)}setQueryDefaults(t,e){De(this,Wm).set(pf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...De(this,Wm).values()],n={};return e.forEach(i=>{Cv(t,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(t,e){De(this,Ym).set(pf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...De(this,Ym).values()],n={};return e.forEach(i=>{Cv(t,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...De(this,ed).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=_O(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===CO&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...De(this,ed).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){De(this,Kr).clear(),De(this,Zu).clear()}},Kr=new WeakMap,Zu=new WeakMap,ed=new WeakMap,Wm=new WeakMap,Ym=new WeakMap,td=new WeakMap,Km=new WeakMap,Qm=new WeakMap,WB),iz=b.createContext(void 0),as=t=>{const e=b.useContext(iz);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},SW=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(iz.Provider,{value:t,children:e})),az=b.createContext(!1),NW=()=>b.useContext(az);az.Provider;function _W(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var CW=b.createContext(_W()),TW=()=>b.useContext(CW),kW=(t,e,n)=>{const i=n!=null&&n.state.error&&typeof t.throwOnError=="function"?TO(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||i)&&(e.isReset()||(t.retryOnMount=!1))},AW=t=>{b.useEffect(()=>{t.clearReset()},[t])},EW=({result:t,errorResetBoundary:e,throwOnError:n,query:i,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(a&&t.data===void 0||TO(n,[t.error,i])),PW=t=>{if(t.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),i=t.staleTime;t.staleTime=typeof i=="function"?(...a)=>n(i(...a)):n(i),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},OW=(t,e)=>t.isLoading&&t.isFetching&&!e,DW=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,eI=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function MW(t,e,n){var y,x,v,S;const i=NW(),a=TW(),s=as(),o=s.defaultQueryOptions(t);(x=(y=s.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||x.call(y,o);const l=s.getQueryCache().get(o.queryHash);o._optimisticResults=i?"isRestoring":"optimistic",PW(o),kW(o,a,l),AW(a);const c=!s.getQueryCache().get(o.queryHash),[d]=b.useState(()=>new e(s,o)),f=d.getOptimisticResult(o),p=!i&&t.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(N=>{const _=p?d.subscribe(ji.batchCalls(N)):ka;return d.updateResult(),_},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),b.useEffect(()=>{d.setOptions(o)},[o,d]),DW(o,f))throw eI(o,d,a);if(EW({result:f,errorResetBoundary:a,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;if((S=(v=s.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||S.call(v,o,f),o.experimental_prefetchInRender&&!ff&&OW(f,i)){const N=c?eI(o,d,a):l==null?void 0:l.promise;N==null||N.catch(ka).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?f:d.trackResult(f)}function PS(t,e){return MW(t,pW)}function IW(t,e){const n=as(),[i]=b.useState(()=>new bW(n,t));b.useEffect(()=>{i.setOptions(t)},[i,t]);const a=b.useSyncExternalStore(b.useCallback(o=>i.subscribe(ji.batchCalls(o)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),s=b.useCallback((o,l)=>{i.mutate(o,l).catch(ka)},[i]);if(a.error&&TO(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const RW=new wW({defaultOptions:{queries:{staleTime:0,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!1}}}),Ut={clinicSettings:["clinicSettings"],clinicSubscription:["clinicSubscription"],patients:{all:["patients"],list:t=>["patients","list",t],detail:t=>["patients","detail",t],context:t=>["patients","context",t]},queue:{all:["queue"],today:["queue","today"],entry:t=>["queue","entry",t],latest:t=>["queue","patient",t,"latest"]},staff:{all:["staff"],list:["staff","list"],detail:t=>["staff","detail",t]},pharmacyOrders:{all:["pharmacyOrders"],detail:t=>["pharmacyOrders","detail",t],byPatient:t=>["pharmacyOrders","patient",t]},labOrders:{all:["labOrders"],detail:t=>["labOrders","detail",t],byPatient:t=>["labOrders","patient",t]},drugs:{all:["drugs"],list:["drugs","list"],detail:t=>["drugs","detail",t]},labTests:{all:["labTests"],list:["labTests","list"]},patientDebts:{balance:t=>["patientDebts","balance",t]},dental:{records:t=>["dental","records",t]}},LW="modulepreload",FW=function(t){return"/"+t},tI={},OS=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){let o=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(n.map(d=>{if(d=FW(d),d in tI)return;tI[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":LW,f||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),f)return new Promise((x,v)=>{y.addEventListener("load",x),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},Cm=({message:t="Newtons Ai HMS",fullScreen:e=!1})=>r.jsx("div",{className:`loading-container ${e?"fullscreen":""}`,children:r.jsxs("div",{className:"loading-content",children:[r.jsxs("div",{className:"spinner-ring",children:[r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{}),r.jsx("div",{})]}),r.jsx("div",{className:"loading-title",children:t}),e&&r.jsx("div",{className:"loading-subtitle",children:"Optimizing your experience..."})]})});function $W(t={}){const{nonce:e,locale:n,onScriptLoadSuccess:i,onScriptLoadError:a}=t,[s,o]=b.useState(!1),l=b.useRef(i);l.current=i;const c=b.useRef(a);return c.current=a,b.useEffect(()=>{const d=document.createElement("script");return d.src="https://accounts.google.com/gsi/client",n&&(d.src+=`?hl=${n}`),d.async=!0,d.defer=!0,d.nonce=e,d.onload=()=>{var f;o(!0),(f=l.current)===null||f===void 0||f.call(l)},d.onerror=()=>{var f;o(!1),(f=c.current)===null||f===void 0||f.call(c)},document.body.appendChild(d),()=>{document.body.removeChild(d)}},[e]),s}const sz=b.createContext(null);function BW({clientId:t,nonce:e,locale:n,onScriptLoadSuccess:i,onScriptLoadError:a,children:s}){const o=$W({nonce:e,onScriptLoadSuccess:i,onScriptLoadError:a,locale:n}),l=b.useMemo(()=>({locale:n,clientId:t,scriptLoadedSuccessfully:o}),[t,o]);return Se.createElement(sz.Provider,{value:l},s)}function zW(){const t=b.useContext(sz);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function qW(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const UW={large:40,medium:32,small:20};function VW({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:i,type:a="standard",theme:s="outline",size:o="large",text:l,shape:c,logo_alignment:d,width:f,click_listener:p,state:y,containerProps:x,...v}){const S=b.useRef(null),{clientId:N,locale:_,scriptLoadedSuccessfully:T}=zW(),C=b.useRef(t);C.current=t;const O=b.useRef(e);O.current=e;const k=b.useRef(i);return k.current=i,b.useEffect(()=>{var P,I,F,B,$,L,V,H,te;if(T)return(F=(I=(P=window==null?void 0:window.google)===null||P===void 0?void 0:P.accounts)===null||I===void 0?void 0:I.id)===null||F===void 0||F.initialize({client_id:N,callback:X=>{var q;if(!(X!=null&&X.credential))return(q=O.current)===null||q===void 0?void 0:q.call(O);const{credential:W,select_by:ae}=X;C.current({credential:W,clientId:qW(X),select_by:ae})},...v}),(L=($=(B=window==null?void 0:window.google)===null||B===void 0?void 0:B.accounts)===null||$===void 0?void 0:$.id)===null||L===void 0||L.renderButton(S.current,{type:a,theme:s,size:o,text:l,shape:c,logo_alignment:d,width:f,locale:_,click_listener:p,state:y}),n&&((te=(H=(V=window==null?void 0:window.google)===null||V===void 0?void 0:V.accounts)===null||H===void 0?void 0:H.id)===null||te===void 0||te.prompt(k.current)),()=>{var X,q,W;n&&((W=(q=(X=window==null?void 0:window.google)===null||X===void 0?void 0:X.accounts)===null||q===void 0?void 0:q.id)===null||W===void 0||W.cancel())}},[N,T,n,a,s,o,l,c,d,f,_]),Se.createElement("div",{...x,ref:S,style:{height:UW[o],...x==null?void 0:x.style}})}var Bx={},nI;function HW(){if(nI)return Bx;nI=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.parse=o,Bx.serialize=d;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,s=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function o(y,x){const v=new s,S=y.length;if(S<2)return v;const N=(x==null?void 0:x.decode)||f;let _=0;do{const T=y.indexOf("=",_);if(T===-1)break;const C=y.indexOf(";",_),O=C===-1?S:C;if(T>O){_=y.lastIndexOf(";",T-1)+1;continue}const k=l(y,_,T),P=c(y,T,k),I=y.slice(k,P);if(v[I]===void 0){let F=l(y,T+1,O),B=c(y,O,F);const $=N(y.slice(F,B));v[I]=$}_=O+1}while(_<S);return v}function l(y,x,v){do{const S=y.charCodeAt(x);if(S!==32&&S!==9)return x}while(++x<v);return v}function c(y,x,v){for(;x>v;){const S=y.charCodeAt(--x);if(S!==32&&S!==9)return x+1}return v}function d(y,x,v){const S=(v==null?void 0:v.encode)||encodeURIComponent;if(!t.test(y))throw new TypeError(`argument name is invalid: ${y}`);const N=S(x);if(!e.test(N))throw new TypeError(`argument val is invalid: ${x}`);let _=y+"="+N;if(!v)return _;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);_+="; Max-Age="+v.maxAge}if(v.domain){if(!n.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);_+="; Domain="+v.domain}if(v.path){if(!i.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);_+="; Path="+v.path}if(v.expires){if(!p(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);_+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(_+="; HttpOnly"),v.secure&&(_+="; Secure"),v.partitioned&&(_+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return _}function f(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function p(y){return a.call(y)==="[object Date]"}return Bx}HW();var rI="popstate";function GW(t={}){function e(i,a){let{pathname:s,search:o,hash:l}=i.location;return aE("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:Tv(a)}return YW(e,n,null,t)}function qr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WW(){return Math.random().toString(36).substring(2,10)}function iI(t,e){return{usr:t.state,key:t.key,idx:e}}function aE(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Og(e):e,state:n,key:e&&e.key||i||WW()}}function Tv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Og(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function YW(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:s=!1}=i,o=a.history,l="POP",c=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let N=f(),_=N==null?null:N-d;d=N,c&&c({action:l,location:S.location,delta:_})}function y(N,_){l="PUSH";let T=aE(S.location,N,_);d=f()+1;let C=iI(T,d),O=S.createHref(T);try{o.pushState(C,"",O)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(O)}s&&c&&c({action:l,location:S.location,delta:1})}function x(N,_){l="REPLACE";let T=aE(S.location,N,_);d=f();let C=iI(T,d),O=S.createHref(T);o.replaceState(C,"",O),s&&c&&c({action:l,location:S.location,delta:0})}function v(N){return KW(N)}let S={get action(){return l},get location(){return t(a,o)},listen(N){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(rI,p),c=N,()=>{a.removeEventListener(rI,p),c=null}},createHref(N){return e(a,N)},createURL:v,encodeLocation(N){let _=v(N);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:x,go(N){return o.go(N)}};return S}function KW(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),qr(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Tv(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function oz(t,e,n="/"){return QW(t,e,n,!1)}function QW(t,e,n,i){let a=typeof e=="string"?Og(e):e,s=Ec(a.pathname||"/",n);if(s==null)return null;let o=lz(t);XW(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=lY(s);l=sY(o[c],d,i)}return l}function lz(t,e=[],n=[],i=""){let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(qr(c.relativePath.startsWith(i),`Absolute route path "${c.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(i.length));let d=Sc([i,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(qr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),lz(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:iY(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of cz(s.path))a(s,o,c)}),e}function cz(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return a?[s,""]:[s];let o=cz(i.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function XW(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aY(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var JW=/^:[\w-]+$/,ZW=3,eY=2,tY=1,nY=10,rY=-2,aI=t=>t==="*";function iY(t,e){let n=t.split("/"),i=n.length;return n.some(aI)&&(i+=rY),e&&(i+=eY),n.filter(a=>!aI(a)).reduce((a,s)=>a+(JW.test(s)?ZW:s===""?tY:nY),i)}function aY(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function sY(t,e,n=!1){let{routesMeta:i}=t,a={},s="/",o=[];for(let l=0;l<i.length;++l){let c=i[l],d=l===i.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=lw({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),y=c.route;if(!p&&d&&n&&!i[i.length-1].route.index&&(p=lw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Sc([s,p.pathname]),pathnameBase:hY(Sc([s,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(s=Sc([s,p.pathnameBase]))}return o}function lw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=oY(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:i.reduce((d,{paramName:f,isOptional:p},y)=>{if(f==="*"){let v=l[y]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const x=l[y];return p&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function oY(t,e=!1,n=!0){Xs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function lY(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ec(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function cY(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?Og(t):t;return{pathname:n?n.startsWith("/")?n:uY(n,e):e,search:fY(i),hash:pY(a)}}function uY(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Q_(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dY(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function EO(t){let e=dY(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function PO(t,e,n,i=!1){let a;typeof t=="string"?a=Og(t):(a={...t},qr(!a.pathname||!a.pathname.includes("?"),Q_("?","pathname","search",a)),qr(!a.pathname||!a.pathname.includes("#"),Q_("#","pathname","hash",a)),qr(!a.search||!a.search.includes("#"),Q_("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!i&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;a.pathname=y.join("/")}l=p>=0?e[p]:"/"}let c=cY(a,l),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}var Sc=t=>t.join("/").replace(/\/\/+/g,"/"),hY=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pY=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var uz=["POST","PUT","PATCH","DELETE"];new Set(uz);var gY=["GET",...uz];new Set(gY);var Dg=b.createContext(null);Dg.displayName="DataRouter";var DS=b.createContext(null);DS.displayName="DataRouterState";var dz=b.createContext({isTransitioning:!1});dz.displayName="ViewTransition";var yY=b.createContext(new Map);yY.displayName="Fetchers";var xY=b.createContext(null);xY.displayName="Await";var Io=b.createContext(null);Io.displayName="Navigation";var Nb=b.createContext(null);Nb.displayName="Location";var Ro=b.createContext({outlet:null,matches:[],isDataRoute:!1});Ro.displayName="Route";var OO=b.createContext(null);OO.displayName="RouteError";function vY(t,{relative:e}={}){qr(Mg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=b.useContext(Io),{hash:a,pathname:s,search:o}=_b(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Sc([n,s])),i.createHref({pathname:l,search:o,hash:a})}function Mg(){return b.useContext(Nb)!=null}function Vr(){return qr(Mg(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Nb).location}var hz="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fz(t){b.useContext(Io).static||b.useLayoutEffect(t)}function Mt(){let{isDataRoute:t}=b.useContext(Ro);return t?OY():bY()}function bY(){qr(Mg(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(Dg),{basename:e,navigator:n}=b.useContext(Io),{matches:i}=b.useContext(Ro),{pathname:a}=Vr(),s=JSON.stringify(EO(i)),o=b.useRef(!1);return fz(()=>{o.current=!0}),b.useCallback((c,d={})=>{if(Xs(o.current,hz),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=PO(c,JSON.parse(s),a,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Sc([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,s,a,t])}b.createContext(null);function Oi(){let{matches:t}=b.useContext(Ro),e=t[t.length-1];return e?e.params:{}}function _b(t,{relative:e}={}){let{matches:n}=b.useContext(Ro),{pathname:i}=Vr(),a=JSON.stringify(EO(n));return b.useMemo(()=>PO(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function jY(t,e){return pz(t,e)}function pz(t,e,n,i){var T;qr(Mg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:s}=b.useContext(Io),{matches:o}=b.useContext(Ro),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";mz(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=Vr(),x;if(e){let C=typeof e=="string"?Og(e):e;qr(f==="/"||((T=C.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=y;let v=x.pathname||"/",S=v;if(f!=="/"){let C=f.replace(/^\//,"").split("/");S="/"+v.replace(/^\//,"").split("/").slice(C.length).join("/")}let N=!s&&n&&n.matches&&n.matches.length>0?n.matches:oz(t,{pathname:S});Xs(p||N!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Xs(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=CY(N&&N.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Sc([f,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Sc([f,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,i);return e&&_?b.createElement(Nb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function wY(){let t=PY(),e=mY(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:s},"ErrorBoundary")," or"," ",b.createElement("code",{style:s},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:a},n):null,o)}var SY=b.createElement(wY,null),NY=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?b.createElement(Ro.Provider,{value:this.props.routeContext},b.createElement(OO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _Y({routeContext:t,match:e,children:n}){let i=b.useContext(Dg);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(Ro.Provider,{value:t},n)}function CY(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n==null?void 0:n.errors;if(s!=null){let c=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);qr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=n,y=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,d,f)=>{let p,y=!1,x=null,v=null;n&&(p=s&&d.route.id?s[d.route.id]:void 0,x=d.route.errorElement||SY,o&&(l<0&&f===0?(mz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):l===f&&(y=!0,v=d.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,f+1)),N=()=>{let _;return p?_=x:y?_=v:d.route.Component?_=b.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=c,b.createElement(_Y,{match:d,routeContext:{outlet:c,matches:S,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(NY,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:N(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):N()},null)}function DO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TY(t){let e=b.useContext(Dg);return qr(e,DO(t)),e}function kY(t){let e=b.useContext(DS);return qr(e,DO(t)),e}function AY(t){let e=b.useContext(Ro);return qr(e,DO(t)),e}function MO(t){let e=AY(t),n=e.matches[e.matches.length-1];return qr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function EY(){return MO("useRouteId")}function PY(){var i;let t=b.useContext(OO),e=kY("useRouteError"),n=MO("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function OY(){let{router:t}=TY("useNavigate"),e=MO("useNavigate"),n=b.useRef(!1);return fz(()=>{n.current=!0}),b.useCallback(async(a,s={})=>{Xs(n.current,hz),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var sI={};function mz(t,e,n){!e&&!sI[t]&&(sI[t]=!0,Xs(!1,n))}b.memo(DY);function DY({routes:t,future:e,state:n}){return pz(t,void 0,n,e)}function rn({to:t,replace:e,state:n,relative:i}){qr(Mg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=b.useContext(Io);Xs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=b.useContext(Ro),{pathname:o}=Vr(),l=Mt(),c=PO(t,EO(s),o,i==="path"),d=JSON.stringify(c);return b.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:i})},[l,d,i,e,n]),null}function xt(t){qr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MY({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:s=!1}){qr(!Mg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=b.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof n=="string"&&(n=Og(n));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:y="default"}=n,x=b.useMemo(()=>{let v=Ec(c,o);return v==null?null:{location:{pathname:v,search:d,hash:f,state:p,key:y},navigationType:i}},[o,c,d,f,p,y,i]);return Xs(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:b.createElement(Io.Provider,{value:l},b.createElement(Nb.Provider,{children:e,value:x}))}function Sm({children:t,location:e}){return jY(sE(t),e)}function sE(t,e=[]){let n=[];return b.Children.forEach(t,(i,a)=>{if(!b.isValidElement(i))return;let s=[...e,a];if(i.type===b.Fragment){n.push.apply(n,sE(i.props.children,s));return}qr(i.type===xt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qr(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=sE(i.props.children,s)),n.push(o)}),n}var Yj="get",Kj="application/x-www-form-urlencoded";function MS(t){return t!=null&&typeof t.tagName=="string"}function IY(t){return MS(t)&&t.tagName.toLowerCase()==="button"}function RY(t){return MS(t)&&t.tagName.toLowerCase()==="form"}function LY(t){return MS(t)&&t.tagName.toLowerCase()==="input"}function FY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $Y(t,e){return t.button===0&&(!e||e==="_self")&&!FY(t)}function oE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(a=>[n,a]):[[n,i]])},[]))}function BY(t,e){let n=oE(t);return e&&e.forEach((i,a)=>{n.has(a)||e.getAll(a).forEach(s=>{n.append(a,s)})}),n}var dj=null;function zY(){if(dj===null)try{new FormData(document.createElement("form"),0),dj=!1}catch{dj=!0}return dj}var qY=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function X_(t){return t!=null&&!qY.has(t)?(Xs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kj}"`),null):t}function UY(t,e){let n,i,a,s,o;if(RY(t)){let l=t.getAttribute("action");i=l?Ec(l,e):null,n=t.getAttribute("method")||Yj,a=X_(t.getAttribute("enctype"))||Kj,s=new FormData(t)}else if(IY(t)||LY(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(i=c?Ec(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Yj,a=X_(t.getAttribute("formenctype"))||X_(l.getAttribute("enctype"))||Kj,s=new FormData(l,t),!zY()){let{name:d,type:f,value:p}=t;if(f==="image"){let y=d?`${d}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else d&&s.append(d,p)}}else{if(MS(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yj,i=null,a=Kj,o=t}return s&&a==="text/plain"&&(o=s,s=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:s,body:o}}function IO(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function VY(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HY(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function GY(t,e,n){let i=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let o=await VY(s,n);return o.links?o.links():[]}return[]}));return QY(i.flat(1).filter(HY).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function oI(t,e,n,i,a,s){let o=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>{var f;return n[d].pathname!==c.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):s==="data"?e.filter((c,d)=>{var p;let f=i.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function WY(t,e,{includeHydrateFallback:n}={}){return YY(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function YY(t){return[...new Set(t)]}function KY(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function QY(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let s=JSON.stringify(KY(a));return n.has(s)||(n.add(s),i.push({key:s,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var XY=new Set([100,101,204,205]);function JY(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ec(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function gz(){let t=b.useContext(Dg);return IO(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ZY(){let t=b.useContext(DS);return IO(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var RO=b.createContext(void 0);RO.displayName="FrameworkContext";function yz(){let t=b.useContext(RO);return IO(t,"You must render this element inside a <HydratedRouter> element"),t}function eK(t,e){let n=b.useContext(RO),[i,a]=b.useState(!1),[s,o]=b.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=e,y=b.useRef(null);b.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let S=_=>{_.forEach(T=>{o(T.isIntersecting)})},N=new IntersectionObserver(S,{threshold:.5});return y.current&&N.observe(y.current),()=>{N.disconnect()}}},[t]),b.useEffect(()=>{if(i){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[i]);let x=()=>{a(!0)},v=()=>{a(!1),o(!1)};return n?t!=="intent"?[s,y,{}]:[s,y,{onFocus:zx(l,x),onBlur:zx(c,v),onMouseEnter:zx(d,x),onMouseLeave:zx(f,v),onTouchStart:zx(p,x)}]:[!1,y,{}]}function zx(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function tK({page:t,...e}){let{router:n}=gz(),i=b.useMemo(()=>oz(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?b.createElement(rK,{page:t,matches:i,...e}):null}function nK(t){let{manifest:e,routeModules:n}=yz(),[i,a]=b.useState([]);return b.useEffect(()=>{let s=!1;return GY(t,e,n).then(o=>{s||a(o)}),()=>{s=!0}},[t,e,n]),i}function rK({page:t,matches:e,...n}){let i=Vr(),{manifest:a,routeModules:s}=yz(),{basename:o}=gz(),{loaderData:l,matches:c}=ZY(),d=b.useMemo(()=>oI(t,e,c,a,i,"data"),[t,e,c,a,i]),f=b.useMemo(()=>oI(t,e,c,a,i,"assets"),[t,e,c,a,i]),p=b.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let v=new Set,S=!1;if(e.forEach(_=>{var C;let T=a.routes[_.route.id];!T||!T.hasLoader||(!d.some(O=>O.route.id===_.route.id)&&_.route.id in l&&((C=s[_.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?S=!0:v.add(_.route.id))}),v.size===0)return[];let N=JY(t,o);return S&&v.size>0&&N.searchParams.set("_routes",e.filter(_=>v.has(_.route.id)).map(_=>_.route.id).join(",")),[N.pathname+N.search]},[o,l,i,a,d,e,t,s]),y=b.useMemo(()=>WY(f,a),[f,a]),x=nK(f);return b.createElement(b.Fragment,null,p.map(v=>b.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),y.map(v=>b.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),x.map(({key:v,link:S})=>b.createElement("link",{key:v,...S})))}function iK(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var xz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xz&&(window.__reactRouterVersion="7.6.0")}catch{}function aK({basename:t,children:e,window:n}){let i=b.useRef();i.current==null&&(i.current=GW({window:n,v5Compat:!0}));let a=i.current,[s,o]=b.useState({action:a.action,location:a.location}),l=b.useCallback(c=>{b.startTransition(()=>o(c))},[o]);return b.useLayoutEffect(()=>a.listen(l),[a,l]),b.createElement(MY,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var vz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sr=b.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:s,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:p,...y},x){let{basename:v}=b.useContext(Io),S=typeof d=="string"&&vz.test(d),N,_=!1;if(typeof d=="string"&&S&&(N=d,xz))try{let B=new URL(window.location.href),$=d.startsWith("//")?new URL(B.protocol+d):new URL(d),L=Ec($.pathname,v);$.origin===B.origin&&L!=null?d=L+$.search+$.hash:_=!0}catch{Xs(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=vY(d,{relative:a}),[C,O,k]=eK(i,y),P=cK(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:a,viewTransition:p});function I(B){e&&e(B),B.defaultPrevented||P(B)}let F=b.createElement("a",{...y,...k,href:N||T,onClick:_||s?e:I,ref:iK(x,O),target:c,"data-discover":!S&&n==="render"?"true":void 0});return C&&!S?b.createElement(b.Fragment,null,F,b.createElement(tK,{page:T})):F});Sr.displayName="Link";var sK=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:s,to:o,viewTransition:l,children:c,...d},f){let p=_b(o,{relative:d.relative}),y=Vr(),x=b.useContext(DS),{navigator:v,basename:S}=b.useContext(Io),N=x!=null&&pK(p)&&l===!0,_=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,T=y.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&S&&(C=Ec(C,S)||C);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let k=T===_||!a&&T.startsWith(_)&&T.charAt(O)==="/",P=C!=null&&(C===_||!a&&C.startsWith(_)&&C.charAt(_.length)==="/"),I={isActive:k,isPending:P,isTransitioning:N},F=k?e:void 0,B;typeof i=="function"?B=i(I):B=[i,k?"active":null,P?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let $=typeof s=="function"?s(I):s;return b.createElement(Sr,{...d,"aria-current":F,className:B,ref:f,style:$,to:o,viewTransition:l},typeof c=="function"?c(I):c)});sK.displayName="NavLink";var oK=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:s,method:o=Yj,action:l,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:p,...y},x)=>{let v=hK(),S=fK(l,{relative:d}),N=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&vz.test(l),T=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,k=(O==null?void 0:O.getAttribute("formmethod"))||o;v(O||C.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:a,state:s,relative:d,preventScrollReset:f,viewTransition:p})};return b.createElement("form",{ref:x,method:N,action:S,onSubmit:i?c:T,...y,"data-discover":!_&&t==="render"?"true":void 0})});oK.displayName="Form";function lK(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bz(t){let e=b.useContext(Dg);return qr(e,lK(t)),e}function cK(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=Mt(),c=Vr(),d=_b(t,{relative:s});return b.useCallback(f=>{if($Y(f,e)){f.preventDefault();let p=n!==void 0?n:Tv(c)===Tv(d);l(t,{replace:p,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,d,n,i,e,t,a,s,o])}function jz(t){Xs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=b.useRef(oE(t)),n=b.useRef(!1),i=Vr(),a=b.useMemo(()=>BY(i.search,n.current?null:e.current),[i.search]),s=Mt(),o=b.useCallback((l,c)=>{const d=oE(typeof l=="function"?l(a):l);n.current=!0,s("?"+d,c)},[s,a]);return[a,o]}var uK=0,dK=()=>`__${String(++uK)}__`;function hK(){let{router:t}=bz("useSubmit"),{basename:e}=b.useContext(Io),n=EY();return b.useCallback(async(i,a={})=>{let{action:s,method:o,encType:l,formData:c,body:d}=UY(i,e);if(a.navigate===!1){let f=a.fetcherKey||dK();await t.fetch(f,n,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function fK(t,{relative:e}={}){let{basename:n}=b.useContext(Io),i=b.useContext(Ro);qr(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),s={..._b(t||".",{relative:e})},o=Vr();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(f=>f==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Sc([n,s.pathname])),Tv(s)}function pK(t,e={}){let n=b.useContext(dz);qr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=bz("useViewTransitionState"),a=_b(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ec(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Ec(n.nextLocation.pathname,i)||n.nextLocation.pathname;return lw(a.pathname,o)!=null||lw(a.pathname,s)!=null}[...XY];var mK=YB();class gK extends b.Component{constructor(){super(...arguments);gr(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,i){console.error("Uncaught error:",n,i)}render(){return this.state.hasError?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"5px"},children:[r.jsx("h1",{children:"Something went wrong."}),r.jsx("p",{children:"We are sorry for the inconvenience. Please try again later."})]}):this.props.children}}const wz=b.createContext(void 0),yK=({children:t})=>{const[e,n]=b.useState(!1),[i,a]=b.useState({startDate:null,endDate:null}),[s,o]=b.useState(null),[l,c]=b.useState(null),[d,f]=b.useState(null),p=b.useCallback(()=>n(!0),[]),y=b.useCallback(()=>n(!1),[]),x=b.useCallback(()=>n(O=>!O),[]),v=b.useCallback(O=>{f(()=>O)},[]),S=b.useCallback(O=>{d?d(O):console.warn("Analysis navigator not registered")},[d]),[N,_]=b.useState(null),T=b.useCallback(O=>{_(()=>O)},[]),C=b.useCallback(async()=>N?await N():(console.warn("Analysis refresher not registered"),null),[N]);return r.jsx(wz.Provider,{value:{isOpen:e,openAssistant:p,closeAssistant:y,toggleAssistant:x,analysisDateRange:i,setAnalysisDateRange:a,analysisData:s,setAnalysisData:o,analysisNavigate:S,registerAnalysisNavigator:v,refreshAnalysis:C,registerAnalysisRefresher:T,pageContext:l,setPageContext:c},children:t})},IS=()=>{const t=b.useContext(wz);if(t===void 0)throw new Error("useClinicAssistantContext must be used within a ClinicAssistantProvider");return t},Sz=b.createContext(void 0),xK=({children:t})=>{const[e,n]=b.useState([]),[i,a]=b.useState(null),[s,o]=b.useState(""),[l,c]=b.useState(0),[d,f]=b.useState([]),p=b.useCallback(S=>{n(N=>[...N,S])},[]),y=b.useCallback((S,N)=>{n(_=>_.map(T=>T.id===S?{...T,...N}:T))},[]),x=b.useCallback(S=>{n(N=>N.filter(_=>_.id!==S))},[]),v=b.useCallback(()=>{n([]),a(null),o(""),c(0),f([])},[]);return r.jsx(Sz.Provider,{value:{purchaseRows:e,setPurchaseRows:n,selectedDistributor:i,setSelectedDistributor:a,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:d,setDistributors:f,addPurchaseRow:p,updatePurchaseRow:y,removePurchaseRow:x,resetPurchase:v},children:t})},Nz=()=>{const t=b.useContext(Sz);if(!t)throw new Error("usePurchaseContext must be used within a PurchaseProvider");return t},_z=b.createContext(void 0),vK=({children:t})=>{const[e,n]=b.useState(!1),[i,a]=b.useState(""),s=b.useCallback(()=>n(!0),[]),o=b.useCallback(()=>n(!1),[]),l=b.useCallback(()=>n(c=>!c),[]);return b.useEffect(()=>{const c=d=>{(d.ctrlKey||d.metaKey)&&d.key==="k"&&(d.preventDefault(),l()),d.key==="Escape"&&e&&o()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,l,o]),r.jsx(_z.Provider,{value:{isOpen:e,openCommandBar:s,closeCommandBar:o,toggleCommandBar:l,preFilledQuery:i,setPreFilledQuery:a},children:t})},Pc=()=>{const t=b.useContext(_z);if(t===void 0)throw new Error("useCommandBar must be used within a CommandBarProvider");return t};function Oc(t){return Array.isArray?Array.isArray(t):kz(t)==="[object Array]"}function bK(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function jK(t){return t==null?"":bK(t)}function wl(t){return typeof t=="string"}function Cz(t){return typeof t=="number"}function wK(t){return t===!0||t===!1||SK(t)&&kz(t)=="[object Boolean]"}function Tz(t){return typeof t=="object"}function SK(t){return Tz(t)&&t!==null}function Ss(t){return t!=null}function J_(t){return!t.trim().length}function kz(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const NK="Incorrect 'index' type",_K=t=>`Invalid value for key ${t}`,CK=t=>`Pattern length exceeds max of ${t}.`,TK=t=>`Missing ${t} property in key`,kK=t=>`Property 'weight' in key '${t}' must be a positive integer`,lI=Object.prototype.hasOwnProperty;class AK{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(i=>{let a=Az(i);this._keys.push(a),this._keyMap[a.id]=a,n+=a.weight}),this._keys.forEach(i=>{i.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Az(t){let e=null,n=null,i=null,a=1,s=null;if(wl(t)||Oc(t))i=t,e=cI(t),n=lE(t);else{if(!lI.call(t,"name"))throw new Error(TK("name"));const o=t.name;if(i=o,lI.call(t,"weight")&&(a=t.weight,a<=0))throw new Error(kK(o));e=cI(o),n=lE(o),s=t.getFn}return{path:e,id:n,weight:a,src:i,getFn:s}}function cI(t){return Oc(t)?t:t.split(".")}function lE(t){return Oc(t)?t.join("."):t}function EK(t,e){let n=[],i=!1;const a=(s,o,l)=>{if(Ss(s))if(!o[l])n.push(s);else{let c=o[l];const d=s[c];if(!Ss(d))return;if(l===o.length-1&&(wl(d)||Cz(d)||wK(d)))n.push(jK(d));else if(Oc(d)){i=!0;for(let f=0,p=d.length;f<p;f+=1)a(d[f],o,l+1)}else o.length&&a(d,o,l+1)}};return a(t,wl(e)?e.split("."):e,0),i?n:n[0]}const PK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},OK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},DK={location:0,threshold:.6,distance:100},MK={useExtendedSearch:!1,getFn:EK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var an={...OK,...PK,...DK,...MK};const IK=/[^ ]+/g;function RK(t=1,e=3){const n=new Map,i=Math.pow(10,e);return{get(a){const s=a.match(IK).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),l=parseFloat(Math.round(o*i)/i);return n.set(s,l),l},clear(){n.clear()}}}class LO{constructor({getFn:e=an.getFn,fieldNormWeight:n=an.fieldNormWeight}={}){this.norm=RK(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,i)=>{this._keysMap[n.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,wl(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();wl(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,i=this.size();n<i;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Ss(e)||J_(e))return;let i={v:e,i:n,n:this.norm.get(e)};this.records.push(i)}_addObject(e,n){let i={i:n,$:{}};this.keys.forEach((a,s)=>{let o=a.getFn?a.getFn(e):this.getFn(e,a.path);if(Ss(o)){if(Oc(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:d,value:f}=c.pop();if(Ss(f))if(wl(f)&&!J_(f)){let p={v:f,i:d,n:this.norm.get(f)};l.push(p)}else Oc(f)&&f.forEach((p,y)=>{c.push({nestedArrIndex:y,value:p})})}i.$[s]=l}else if(wl(o)&&!J_(o)){let l={v:o,n:this.norm.get(o)};i.$[s]=l}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function Ez(t,e,{getFn:n=an.getFn,fieldNormWeight:i=an.fieldNormWeight}={}){const a=new LO({getFn:n,fieldNormWeight:i});return a.setKeys(t.map(Az)),a.setSources(e),a.create(),a}function LK(t,{getFn:e=an.getFn,fieldNormWeight:n=an.fieldNormWeight}={}){const{keys:i,records:a}=t,s=new LO({getFn:e,fieldNormWeight:n});return s.setKeys(i),s.setIndexRecords(a),s}function hj(t,{errors:e=0,currentLocation:n=0,expectedLocation:i=0,distance:a=an.distance,ignoreLocation:s=an.ignoreLocation}={}){const o=e/t.length;if(s)return o;const l=Math.abs(i-n);return a?o+l/a:l?1:o}function FK(t=[],e=an.minMatchCharLength){let n=[],i=-1,a=-1,s=0;for(let o=t.length;s<o;s+=1){let l=t[s];l&&i===-1?i=s:!l&&i!==-1&&(a=s-1,a-i+1>=e&&n.push([i,a]),i=-1)}return t[s-1]&&s-i>=e&&n.push([i,s-1]),n}const Hh=32;function $K(t,e,n,{location:i=an.location,distance:a=an.distance,threshold:s=an.threshold,findAllMatches:o=an.findAllMatches,minMatchCharLength:l=an.minMatchCharLength,includeMatches:c=an.includeMatches,ignoreLocation:d=an.ignoreLocation}={}){if(e.length>Hh)throw new Error(CK(Hh));const f=e.length,p=t.length,y=Math.max(0,Math.min(i,p));let x=s,v=y;const S=l>1||c,N=S?Array(p):[];let _;for(;(_=t.indexOf(e,v))>-1;){let I=hj(e,{currentLocation:_,expectedLocation:y,distance:a,ignoreLocation:d});if(x=Math.min(I,x),v=_+f,S){let F=0;for(;F<f;)N[_+F]=1,F+=1}}v=-1;let T=[],C=1,O=f+p;const k=1<<f-1;for(let I=0;I<f;I+=1){let F=0,B=O;for(;F<B;)hj(e,{errors:I,currentLocation:y+B,expectedLocation:y,distance:a,ignoreLocation:d})<=x?F=B:O=B,B=Math.floor((O-F)/2+F);O=B;let $=Math.max(1,y-B+1),L=o?p:Math.min(y+B,p)+f,V=Array(L+2);V[L+1]=(1<<I)-1;for(let te=L;te>=$;te-=1){let X=te-1,q=n[t.charAt(X)];if(S&&(N[X]=+!!q),V[te]=(V[te+1]<<1|1)&q,I&&(V[te]|=(T[te+1]|T[te])<<1|1|T[te+1]),V[te]&k&&(C=hj(e,{errors:I,currentLocation:X,expectedLocation:y,distance:a,ignoreLocation:d}),C<=x)){if(x=C,v=X,v<=y)break;$=Math.max(1,2*y-v)}}if(hj(e,{errors:I+1,currentLocation:y,expectedLocation:y,distance:a,ignoreLocation:d})>x)break;T=V}const P={isMatch:v>=0,score:Math.max(.001,C)};if(S){const I=FK(N,l);I.length?c&&(P.indices=I):P.isMatch=!1}return P}function BK(t){let e={};for(let n=0,i=t.length;n<i;n+=1){const a=t.charAt(n);e[a]=(e[a]||0)|1<<i-n-1}return e}const cw=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Pz{constructor(e,{location:n=an.location,threshold:i=an.threshold,distance:a=an.distance,includeMatches:s=an.includeMatches,findAllMatches:o=an.findAllMatches,minMatchCharLength:l=an.minMatchCharLength,isCaseSensitive:c=an.isCaseSensitive,ignoreDiacritics:d=an.ignoreDiacritics,ignoreLocation:f=an.ignoreLocation}={}){if(this.options={location:n,threshold:i,distance:a,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:f},e=c?e:e.toLowerCase(),e=d?cw(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const p=(x,v)=>{this.chunks.push({pattern:x,alphabet:BK(x),startIndex:v})},y=this.pattern.length;if(y>Hh){let x=0;const v=y%Hh,S=y-v;for(;x<S;)p(this.pattern.substr(x,Hh),x),x+=Hh;if(v){const N=y-Hh;p(this.pattern.substr(N),N)}}else p(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:i,includeMatches:a}=this.options;if(e=n?e:e.toLowerCase(),e=i?cw(e):e,this.pattern===e){let S={isMatch:!0,score:0};return a&&(S.indices=[[0,e.length-1]]),S}const{location:s,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,ignoreLocation:f}=this.options;let p=[],y=0,x=!1;this.chunks.forEach(({pattern:S,alphabet:N,startIndex:_})=>{const{isMatch:T,score:C,indices:O}=$K(e,S,N,{location:s+_,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,includeMatches:a,ignoreLocation:f});T&&(x=!0),y+=C,T&&O&&(p=[...p,...O])});let v={isMatch:x,score:x?y/this.chunks.length:1};return x&&a&&(v.indices=p),v}}class cd{constructor(e){this.pattern=e}static isMultiMatch(e){return uI(e,this.multiRegex)}static isSingleMatch(e){return uI(e,this.singleRegex)}search(){}}function uI(t,e){const n=t.match(e);return n?n[1]:null}class zK extends cd{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class qK extends cd{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class UK extends cd{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class VK extends cd{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class HK extends cd{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class GK extends cd{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Oz extends cd{constructor(e,{location:n=an.location,threshold:i=an.threshold,distance:a=an.distance,includeMatches:s=an.includeMatches,findAllMatches:o=an.findAllMatches,minMatchCharLength:l=an.minMatchCharLength,isCaseSensitive:c=an.isCaseSensitive,ignoreDiacritics:d=an.ignoreDiacritics,ignoreLocation:f=an.ignoreLocation}={}){super(e),this._bitapSearch=new Pz(e,{location:n,threshold:i,distance:a,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Dz extends cd{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,i;const a=[],s=this.pattern.length;for(;(i=e.indexOf(this.pattern,n))>-1;)n=i+s,a.push([i,n-1]);const o=!!a.length;return{isMatch:o,score:o?0:1,indices:a}}}const cE=[zK,Dz,UK,VK,GK,HK,qK,Oz],dI=cE.length,WK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,YK="|";function KK(t,e={}){return t.split(YK).map(n=>{let i=n.trim().split(WK).filter(s=>s&&!!s.trim()),a=[];for(let s=0,o=i.length;s<o;s+=1){const l=i[s];let c=!1,d=-1;for(;!c&&++d<dI;){const f=cE[d];let p=f.isMultiMatch(l);p&&(a.push(new f(p,e)),c=!0)}if(!c)for(d=-1;++d<dI;){const f=cE[d];let p=f.isSingleMatch(l);if(p){a.push(new f(p,e));break}}}return a})}const QK=new Set([Oz.type,Dz.type]);class XK{constructor(e,{isCaseSensitive:n=an.isCaseSensitive,ignoreDiacritics:i=an.ignoreDiacritics,includeMatches:a=an.includeMatches,minMatchCharLength:s=an.minMatchCharLength,ignoreLocation:o=an.ignoreLocation,findAllMatches:l=an.findAllMatches,location:c=an.location,threshold:d=an.threshold,distance:f=an.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:i,includeMatches:a,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:c,threshold:d,distance:f},e=n?e:e.toLowerCase(),e=i?cw(e):e,this.pattern=e,this.query=KK(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:a,ignoreDiacritics:s}=this.options;e=a?e:e.toLowerCase(),e=s?cw(e):e;let o=0,l=[],c=0;for(let d=0,f=n.length;d<f;d+=1){const p=n[d];l.length=0,o=0;for(let y=0,x=p.length;y<x;y+=1){const v=p[y],{isMatch:S,indices:N,score:_}=v.search(e);if(S){if(o+=1,c+=_,i){const T=v.constructor.type;QK.has(T)?l=[...l,...N]:l.push(N)}}else{c=0,o=0,l.length=0;break}}if(o){let y={isMatch:!0,score:c/o};return i&&(y.indices=l),y}}return{isMatch:!1,score:1}}}const uE=[];function JK(...t){uE.push(...t)}function dE(t,e){for(let n=0,i=uE.length;n<i;n+=1){let a=uE[n];if(a.condition(t,e))return new a(t,e)}return new Pz(t,e)}const uw={AND:"$and",OR:"$or"},hE={PATH:"$path",PATTERN:"$val"},fE=t=>!!(t[uw.AND]||t[uw.OR]),ZK=t=>!!t[hE.PATH],eQ=t=>!Oc(t)&&Tz(t)&&!fE(t),hI=t=>({[uw.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Mz(t,e,{auto:n=!0}={}){const i=a=>{let s=Object.keys(a);const o=ZK(a);if(!o&&s.length>1&&!fE(a))return i(hI(a));if(eQ(a)){const c=o?a[hE.PATH]:s[0],d=o?a[hE.PATTERN]:a[c];if(!wl(d))throw new Error(_K(c));const f={keyId:lE(c),pattern:d};return n&&(f.searcher=dE(d,e)),f}let l={children:[],operator:s[0]};return s.forEach(c=>{const d=a[c];Oc(d)&&d.forEach(f=>{l.children.push(i(f))})}),l};return fE(t)||(t=hI(t)),i(t)}function tQ(t,{ignoreFieldNorm:e=an.ignoreFieldNorm}){t.forEach(n=>{let i=1;n.matches.forEach(({key:a,norm:s,score:o})=>{const l=a?a.weight:null;i*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:s))}),n.score=i})}function nQ(t,e){const n=t.matches;e.matches=[],Ss(n)&&n.forEach(i=>{if(!Ss(i.indices)||!i.indices.length)return;const{indices:a,value:s}=i;let o={indices:a,value:s};i.key&&(o.key=i.key.src),i.idx>-1&&(o.refIndex=i.idx),e.matches.push(o)})}function rQ(t,e){e.score=t.score}function iQ(t,e,{includeMatches:n=an.includeMatches,includeScore:i=an.includeScore}={}){const a=[];return n&&a.push(nQ),i&&a.push(rQ),t.map(s=>{const{idx:o}=s,l={item:e[o],refIndex:o};return a.length&&a.forEach(c=>{c(s,l)}),l})}class eo{constructor(e,n={},i){this.options={...an,...n},this.options.useExtendedSearch,this._keyStore=new AK(this.options.keys),this.setCollection(e,i)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof LO))throw new Error(NK);this._myIndex=n||Ez(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Ss(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let i=0,a=this._docs.length;i<a;i+=1){const s=this._docs[i];e(s,i)&&(this.removeAt(i),i-=1,a-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:i,includeScore:a,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let c=wl(e)?wl(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return tQ(c,{ignoreFieldNorm:l}),s&&c.sort(o),Cz(n)&&n>-1&&(c=c.slice(0,n)),iQ(c,this._docs,{includeMatches:i,includeScore:a})}_searchStringList(e){const n=dE(e,this.options),{records:i}=this._myIndex,a=[];return i.forEach(({v:s,i:o,n:l})=>{if(!Ss(s))return;const{isMatch:c,score:d,indices:f}=n.searchIn(s);c&&a.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:f}]})}),a}_searchLogical(e){const n=Mz(e,this.options),i=(l,c,d)=>{if(!l.children){const{keyId:p,searcher:y}=l,x=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:y});return x&&x.length?[{idx:d,item:c,matches:x}]:[]}const f=[];for(let p=0,y=l.children.length;p<y;p+=1){const x=l.children[p],v=i(x,c,d);if(v.length)f.push(...v);else if(l.operator===uw.AND)return[]}return f},a=this._myIndex.records,s={},o=[];return a.forEach(({$:l,i:c})=>{if(Ss(l)){let d=i(n,l,c);d.length&&(s[c]||(s[c]={idx:c,item:l,matches:[]},o.push(s[c])),d.forEach(({matches:f})=>{s[c].matches.push(...f)}))}}),o}_searchObjectList(e){const n=dE(e,this.options),{keys:i,records:a}=this._myIndex,s=[];return a.forEach(({$:o,i:l})=>{if(!Ss(o))return;let c=[];i.forEach((d,f)=>{c.push(...this._findMatches({key:d,value:o[f],searcher:n}))}),c.length&&s.push({idx:l,item:o,matches:c})}),s}_findMatches({key:e,value:n,searcher:i}){if(!Ss(n))return[];let a=[];if(Oc(n))n.forEach(({v:s,i:o,n:l})=>{if(!Ss(s))return;const{isMatch:c,score:d,indices:f}=i.searchIn(s);c&&a.push({score:d,key:e,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:c,indices:d}=i.searchIn(s);l&&a.push({score:c,key:e,value:s,norm:o,indices:d})}return a}}eo.version="7.1.0";eo.createIndex=Ez;eo.parseIndex=LK;eo.config=an;eo.parseQuery=Mz;JK(XK);var Z_,fI;function aQ(){if(fI)return Z_;fI=1;var t="Expected a function",e=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks,d=typeof self=="object"&&self&&self.Object===Object&&self,f=c||d||Function("return this")(),p=Object.prototype,y=p.toString,x=Math.max,v=Math.min,S=function(){return f.Date.now()};function N(k,P,I){var F,B,$,L,V,H,te=0,X=!1,q=!1,W=!0;if(typeof k!="function")throw new TypeError(t);P=O(P)||0,_(I)&&(X=!!I.leading,q="maxWait"in I,$=q?x(O(I.maxWait)||0,P):$,W="trailing"in I?!!I.trailing:W);function ae(Ie){var be=F,re=B;return F=B=void 0,te=Ie,L=k.apply(re,be),L}function G(Ie){return te=Ie,V=setTimeout(je,P),X?ae(Ie):L}function z(Ie){var be=Ie-H,re=Ie-te,ve=P-be;return q?v(ve,$-re):ve}function le(Ie){var be=Ie-H,re=Ie-te;return H===void 0||be>=P||be<0||q&&re>=$}function je(){var Ie=S();if(le(Ie))return K(Ie);V=setTimeout(je,z(Ie))}function K(Ie){return V=void 0,W&&F?ae(Ie):(F=B=void 0,L)}function Oe(){V!==void 0&&clearTimeout(V),te=0,F=H=B=V=void 0}function Ye(){return V===void 0?L:K(S())}function Me(){var Ie=S(),be=le(Ie);if(F=arguments,B=this,H=Ie,be){if(V===void 0)return G(H);if(q)return V=setTimeout(je,P),ae(H)}return V===void 0&&(V=setTimeout(je,P)),L}return Me.cancel=Oe,Me.flush=Ye,Me}function _(k){var P=typeof k;return!!k&&(P=="object"||P=="function")}function T(k){return!!k&&typeof k=="object"}function C(k){return typeof k=="symbol"||T(k)&&y.call(k)==n}function O(k){if(typeof k=="number")return k;if(C(k))return e;if(_(k)){var P=typeof k.valueOf=="function"?k.valueOf():k;k=_(P)?P+"":P}if(typeof k!="string")return k===0?k:+k;k=k.replace(i,"");var I=s.test(k);return I||o.test(k)?l(k.slice(2),I?2:8):a.test(k)?e:+k}return Z_=N,Z_}var sQ=aQ();const ud=Bn(sQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lQ=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),pI=t=>{const e=lQ(t);return e.charAt(0).toUpperCase()+e.slice(1)},Iz=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:s,iconNode:o,...l},c)=>b.createElement("svg",{ref:c,...cQ,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:Iz("lucide",a),...l},[...o.map(([d,f])=>b.createElement(d,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=(t,e)=>{const n=b.forwardRef(({className:i,...a},s)=>b.createElement(uQ,{ref:s,iconNode:e,className:Iz(`lucide-${oQ(pI(t))}`,`lucide-${t}`,i),...a}));return n.displayName=pI(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],xc=ct("activity",dQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],Rz=ct("align-justify",hQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],mI=ct("arrow-down",fQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nn=ct("arrow-left",pQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],gI=ct("arrow-up",mQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],yQ=ct("beaker",gQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],vQ=ct("bed-double",xQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],jQ=ct("bed",bQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],SQ=ct("bell",wQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],yI=ct("book-open",NQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],kv=ct("bot",_Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],TQ=ct("brain-circuit",CQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],FO=ct("brain",kQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=[["path",{d:"M12 11v4",key:"a6ujw6"}],["path",{d:"M14 13h-4",key:"1pl8zg"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M18 6v14",key:"1mu4gy"}],["path",{d:"M6 6v14",key:"1s15cj"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],EQ=ct("briefcase-medical",AQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],OQ=ct("building",PQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],xI=ct("calendar-check-2",DQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],$O=ct("calendar-days",MQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gi=ct("calendar",IQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],pE=ct("camera",RQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],mE=ct("chart-pie",LQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Cl=ct("check",FQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Lz=ct("chevron-down",$Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Cb=ct("chevron-left",BQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dd=ct("chevron-right",zQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],UQ=ct("chevron-up",qQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xr=ct("circle-alert",VQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ol=ct("circle-check-big",HQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cv=ct("circle-check",GQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fj=ct("circle-help",WQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],vI=ct("circle-minus",YQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],_s=ct("circle-plus",KQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],XQ=ct("circle-user",QQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],dw=ct("clipboard-list",JQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Qj=ct("clipboard",ZQ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Tb=ct("clock",eX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],nX=ct("command",tX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],bI=ct("copy",rX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],BO=ct("credit-card",iX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],mf=ct("dollar-sign",aX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Fz=ct("download",sX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dm=ct("eye",oX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],cX=ct("file-check",lX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],la=ct("file-text",uX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],eC=ct("file",dX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],fX=ct("film",hX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],rs=ct("flask-conical",pX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],gX=ct("funnel",mX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],gE=ct("globe",yX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],gf=ct("grid-3x3",xX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Ma=ct("hash",vX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],jX=ct("heart",bX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],yE=ct("house",wX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],jI=ct("image",SX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Sl=ct("info",NX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],$z=ct("key",_X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Xm=ct("layout-dashboard",CX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Bz=ct("layout-grid",TX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],wI=ct("lightbulb",kX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],zz=ct("link",AX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],kb=ct("list",EX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Dc=ct("loader-circle",PX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],DX=ct("loader",OX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],IX=ct("lock",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],LX=ct("log-out",RX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],SI=ct("mail",FX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],qz=ct("map-pin",$X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Uz=ct("maximize-2",BX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],tC=ct("message-circle",zX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],UX=ct("mic-off",qX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],RS=ct("mic",VX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],GX=ct("minimize-2",HX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],YX=ct("monitor",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],QX=ct("music",KX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],NI=ct("package-open",XX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],yf=ct("package",JX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],eJ=ct("palette",ZX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],_I=ct("panels-top-left",tJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],zO=ct("paperclip",nJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],iJ=ct("pause",rJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],vc=ct("pen",aJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sJ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],oJ=ct("pencil",sJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Jm=ct("phone",lJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Nc=ct("pill",cJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uJ=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Vz=ct("play",uJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ur=ct("plus",dJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Av=ct("printer",hJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xE=ct("refresh-cw",fJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],CI=ct("rocket",pJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],gJ=ct("rotate-ccw",mJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Hz=ct("rotate-cw",yJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Js=ct("save",xJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Hn=ct("search",vJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],LS=ct("send",bJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],TI=ct("server-crash",jJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],od=ct("settings",wJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Gz=ct("share-2",SJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_J=ct("shield-check",NJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Zm=ct("shield",CJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],vE=ct("shopping-cart",TJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],AJ=ct("smile",kJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],hw=ct("sparkles",EJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Mc=ct("split",PJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ia=ct("square-pen",OJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],MJ=ct("square",DJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],kI=ct("star",IJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],eg=ct("stethoscope",RJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Ab=ct("table",LJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],$J=ct("tag",FJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],zJ=ct("target",BJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Wn=ct("trash-2",qJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],VJ=ct("trending-up",UJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],GJ=ct("triangle-alert",HJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],qO=ct("truck",WJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],bE=ct("upload",YJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Wz=ct("user-check",KJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],FS=ct("user-plus",QJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vr=ct("user",XJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Eo=ct("users",JJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],eZ=ct("video",ZJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],fw=ct("wallet",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qt=ct("x",nZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],AI=ct("zap",rZ);function iZ(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const aZ=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sZ=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,oZ={};function EI(t,e){return(oZ.jsx?sZ:aZ).test(t)}const lZ=/[ \t\n\f\r]/g;function cZ(t){return typeof t=="object"?t.type==="text"?PI(t.value):!1:PI(t)}function PI(t){return t.replace(lZ,"")===""}class Eb{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}Eb.prototype.normal={};Eb.prototype.property={};Eb.prototype.space=void 0;function Yz(t,e){const n={},i={};for(const a of t)Object.assign(n,a.property),Object.assign(i,a.normal);return new Eb(n,i,e)}function jE(t){return t.toLowerCase()}class ss{constructor(e,n){this.attribute=n,this.property=e}}ss.prototype.attribute="";ss.prototype.booleanish=!1;ss.prototype.boolean=!1;ss.prototype.commaOrSpaceSeparated=!1;ss.prototype.commaSeparated=!1;ss.prototype.defined=!1;ss.prototype.mustUseProperty=!1;ss.prototype.number=!1;ss.prototype.overloadedBoolean=!1;ss.prototype.property="";ss.prototype.spaceSeparated=!1;ss.prototype.space=void 0;let uZ=0;const hn=Ef(),hi=Ef(),Kz=Ef(),wt=Ef(),Pr=Ef(),Mm=Ef(),vs=Ef();function Ef(){return 2**++uZ}const wE=Object.freeze(Object.defineProperty({__proto__:null,boolean:hn,booleanish:hi,commaOrSpaceSeparated:vs,commaSeparated:Mm,number:wt,overloadedBoolean:Kz,spaceSeparated:Pr},Symbol.toStringTag,{value:"Module"})),nC=Object.keys(wE);class UO extends ss{constructor(e,n,i,a){let s=-1;if(super(e,n),OI(this,"space",a),typeof i=="number")for(;++s<nC.length;){const o=nC[s];OI(this,nC[s],(i&wE[o])===wE[o])}}}UO.prototype.defined=!0;function OI(t,e,n){n&&(t[e]=n)}function Ig(t){const e={},n={};for(const[i,a]of Object.entries(t.properties)){const s=new UO(i,t.transform(t.attributes||{},i),a,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[jE(i)]=i,n[jE(s.attribute)]=i}return new Eb(e,n,t.space)}const Qz=Ig({properties:{ariaActiveDescendant:null,ariaAtomic:hi,ariaAutoComplete:null,ariaBusy:hi,ariaChecked:hi,ariaColCount:wt,ariaColIndex:wt,ariaColSpan:wt,ariaControls:Pr,ariaCurrent:null,ariaDescribedBy:Pr,ariaDetails:null,ariaDisabled:hi,ariaDropEffect:Pr,ariaErrorMessage:null,ariaExpanded:hi,ariaFlowTo:Pr,ariaGrabbed:hi,ariaHasPopup:null,ariaHidden:hi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Pr,ariaLevel:wt,ariaLive:null,ariaModal:hi,ariaMultiLine:hi,ariaMultiSelectable:hi,ariaOrientation:null,ariaOwns:Pr,ariaPlaceholder:null,ariaPosInSet:wt,ariaPressed:hi,ariaReadOnly:hi,ariaRelevant:null,ariaRequired:hi,ariaRoleDescription:Pr,ariaRowCount:wt,ariaRowIndex:wt,ariaRowSpan:wt,ariaSelected:hi,ariaSetSize:wt,ariaSort:null,ariaValueMax:wt,ariaValueMin:wt,ariaValueNow:wt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Xz(t,e){return e in t?t[e]:e}function Jz(t,e){return Xz(t,e.toLowerCase())}const dZ=Ig({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Mm,acceptCharset:Pr,accessKey:Pr,action:null,allow:null,allowFullScreen:hn,allowPaymentRequest:hn,allowUserMedia:hn,alt:null,as:null,async:hn,autoCapitalize:null,autoComplete:Pr,autoFocus:hn,autoPlay:hn,blocking:Pr,capture:null,charSet:null,checked:hn,cite:null,className:Pr,cols:wt,colSpan:null,content:null,contentEditable:hi,controls:hn,controlsList:Pr,coords:wt|Mm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:hn,defer:hn,dir:null,dirName:null,disabled:hn,download:Kz,draggable:hi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:hn,formTarget:null,headers:Pr,height:wt,hidden:hn,high:wt,href:null,hrefLang:null,htmlFor:Pr,httpEquiv:Pr,id:null,imageSizes:null,imageSrcSet:null,inert:hn,inputMode:null,integrity:null,is:null,isMap:hn,itemId:null,itemProp:Pr,itemRef:Pr,itemScope:hn,itemType:Pr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:hn,low:wt,manifest:null,max:null,maxLength:wt,media:null,method:null,min:null,minLength:wt,multiple:hn,muted:hn,name:null,nonce:null,noModule:hn,noValidate:hn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:hn,optimum:wt,pattern:null,ping:Pr,placeholder:null,playsInline:hn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:hn,referrerPolicy:null,rel:Pr,required:hn,reversed:hn,rows:wt,rowSpan:wt,sandbox:Pr,scope:null,scoped:hn,seamless:hn,selected:hn,shadowRootClonable:hn,shadowRootDelegatesFocus:hn,shadowRootMode:null,shape:null,size:wt,sizes:null,slot:null,span:wt,spellCheck:hi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:wt,step:null,style:null,tabIndex:wt,target:null,title:null,translate:null,type:null,typeMustMatch:hn,useMap:null,value:hi,width:wt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Pr,axis:null,background:null,bgColor:null,border:wt,borderColor:null,bottomMargin:wt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:hn,declare:hn,event:null,face:null,frame:null,frameBorder:null,hSpace:wt,leftMargin:wt,link:null,longDesc:null,lowSrc:null,marginHeight:wt,marginWidth:wt,noResize:hn,noHref:hn,noShade:hn,noWrap:hn,object:null,profile:null,prompt:null,rev:null,rightMargin:wt,rules:null,scheme:null,scrolling:hi,standby:null,summary:null,text:null,topMargin:wt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:wt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:hn,disableRemotePlayback:hn,prefix:null,property:null,results:wt,security:null,unselectable:null},space:"html",transform:Jz}),hZ=Ig({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:vs,accentHeight:wt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:wt,amplitude:wt,arabicForm:null,ascent:wt,attributeName:null,attributeType:null,azimuth:wt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:wt,by:null,calcMode:null,capHeight:wt,className:Pr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:wt,diffuseConstant:wt,direction:null,display:null,dur:null,divisor:wt,dominantBaseline:null,download:hn,dx:null,dy:null,edgeMode:null,editable:null,elevation:wt,enableBackground:null,end:null,event:null,exponent:wt,externalResourcesRequired:null,fill:null,fillOpacity:wt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Mm,g2:Mm,glyphName:Mm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:wt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:wt,horizOriginX:wt,horizOriginY:wt,id:null,ideographic:wt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:wt,k:wt,k1:wt,k2:wt,k3:wt,k4:wt,kernelMatrix:vs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:wt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:wt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:wt,overlineThickness:wt,paintOrder:null,panose1:null,path:null,pathLength:wt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Pr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:wt,pointsAtY:wt,pointsAtZ:wt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:vs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:vs,rev:vs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:vs,requiredFeatures:vs,requiredFonts:vs,requiredFormats:vs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:wt,specularExponent:wt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:wt,strikethroughThickness:wt,string:null,stroke:null,strokeDashArray:vs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:wt,strokeOpacity:wt,strokeWidth:null,style:null,surfaceScale:wt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:vs,tabIndex:wt,tableValues:null,target:null,targetX:wt,targetY:wt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:vs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:wt,underlineThickness:wt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:wt,values:null,vAlphabetic:wt,vMathematical:wt,vectorEffect:null,vHanging:wt,vIdeographic:wt,version:null,vertAdvY:wt,vertOriginX:wt,vertOriginY:wt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:wt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Xz}),Zz=Ig({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),eq=Ig({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Jz}),tq=Ig({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),fZ={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},pZ=/[A-Z]/g,DI=/-[a-z]/g,mZ=/^data[-\w.:]+$/i;function gZ(t,e){const n=jE(e);let i=e,a=ss;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&mZ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(DI,xZ);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!DI.test(s)){let o=s.replace(pZ,yZ);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}a=UO}return new a(i,e)}function yZ(t){return"-"+t.toLowerCase()}function xZ(t){return t.charAt(1).toUpperCase()}const vZ=Yz([Qz,dZ,Zz,eq,tq],"html"),VO=Yz([Qz,hZ,Zz,eq,tq],"svg");function bZ(t){return t.join(" ").trim()}var hm={},rC,MI;function jZ(){if(MI)return rC;MI=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,d="/",f="*",p="",y="comment",x="declaration";rC=function(S,N){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];N=N||{};var _=1,T=1;function C(H){var te=H.match(e);te&&(_+=te.length);var X=H.lastIndexOf(c);T=~X?H.length-X:T+H.length}function O(){var H={line:_,column:T};return function(te){return te.position=new k(H),F(),te}}function k(H){this.start=H,this.end={line:_,column:T},this.source=N.source}k.prototype.content=S;function P(H){var te=new Error(N.source+":"+_+":"+T+": "+H);if(te.reason=H,te.filename=N.source,te.line=_,te.column=T,te.source=S,!N.silent)throw te}function I(H){var te=H.exec(S);if(te){var X=te[0];return C(X),S=S.slice(X.length),te}}function F(){I(n)}function B(H){var te;for(H=H||[];te=$();)te!==!1&&H.push(te);return H}function $(){var H=O();if(!(d!=S.charAt(0)||f!=S.charAt(1))){for(var te=2;p!=S.charAt(te)&&(f!=S.charAt(te)||d!=S.charAt(te+1));)++te;if(te+=2,p===S.charAt(te-1))return P("End of comment missing");var X=S.slice(2,te-2);return T+=2,C(X),S=S.slice(te),T+=2,H({type:y,comment:X})}}function L(){var H=O(),te=I(i);if(te){if($(),!I(a))return P("property missing ':'");var X=I(s),q=H({type:x,property:v(te[0].replace(t,p)),value:X?v(X[0].replace(t,p)):p});return I(o),q}}function V(){var H=[];B(H);for(var te;te=L();)te!==!1&&(H.push(te),B(H));return H}return F(),V()};function v(S){return S?S.replace(l,p):p}return rC}var II;function wZ(){if(II)return hm;II=1;var t=hm&&hm.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(hm,"__esModule",{value:!0}),hm.default=n;var e=t(jZ());function n(i,a){var s=null;if(!i||typeof i!="string")return s;var o=(0,e.default)(i),l=typeof a=="function";return o.forEach(function(c){if(c.type==="declaration"){var d=c.property,f=c.value;l?a(d,f,c):f&&(s=s||{},s[d]=f)}}),s}return hm}var qx={},RI;function SZ(){if(RI)return qx;RI=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,s=function(d){return!d||n.test(d)||t.test(d)},o=function(d,f){return f.toUpperCase()},l=function(d,f){return"".concat(f,"-")},c=function(d,f){return f===void 0&&(f={}),s(d)?d:(d=d.toLowerCase(),f.reactCompat?d=d.replace(a,l):d=d.replace(i,l),d.replace(e,o))};return qx.camelCase=c,qx}var Ux,LI;function NZ(){if(LI)return Ux;LI=1;var t=Ux&&Ux.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},e=t(wZ()),n=SZ();function i(a,s){var o={};return!a||typeof a!="string"||(0,e.default)(a,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return i.default=i,Ux=i,Ux}var _Z=NZ();const CZ=Bn(_Z),nq=rq("end"),HO=rq("start");function rq(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function TZ(t){const e=HO(t),n=nq(t);if(e&&n)return{start:e,end:n}}function gv(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?FI(t.position):"start"in t||"end"in t?FI(t):"line"in t||"column"in t?SE(t):""}function SE(t){return $I(t&&t.line)+":"+$I(t&&t.column)}function FI(t){return SE(t&&t.start)+"-"+SE(t&&t.end)}function $I(t){return t&&typeof t=="number"?t:1}class da extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let a="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?a=e:!s.cause&&e&&(o=!0,a=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?s.ruleId=i:(s.source=i.slice(0,c),s.ruleId=i.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=a,this.line=l?l.line:void 0,this.name=gv(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}da.prototype.file="";da.prototype.name="";da.prototype.reason="";da.prototype.message="";da.prototype.stack="";da.prototype.column=void 0;da.prototype.line=void 0;da.prototype.ancestors=void 0;da.prototype.cause=void 0;da.prototype.fatal=void 0;da.prototype.place=void 0;da.prototype.ruleId=void 0;da.prototype.source=void 0;const GO={}.hasOwnProperty,kZ=new Map,AZ=/[A-Z]/g,EZ=new Set(["table","tbody","thead","tfoot","tr"]),PZ=new Set(["td","th"]),iq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function OZ(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=BZ(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=$Z(n,e.jsx,e.jsxs)}const a={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?VO:vZ,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=aq(a,t,void 0);return s&&typeof s!="string"?s:a.create(t,a.Fragment,{children:s||void 0},void 0)}function aq(t,e,n){if(e.type==="element")return DZ(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return MZ(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return RZ(t,e,n);if(e.type==="mdxjsEsm")return IZ(t,e);if(e.type==="root")return LZ(t,e,n);if(e.type==="text")return FZ(t,e)}function DZ(t,e,n){const i=t.schema;let a=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(a=VO,t.schema=a),t.ancestors.push(e);const s=oq(t,e.tagName,!1),o=zZ(t,e);let l=YO(t,e);return EZ.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!cZ(c):!0})),sq(t,o,s,e),WO(o,l),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function MZ(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}Ev(t,e.position)}function IZ(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Ev(t,e.position)}function RZ(t,e,n){const i=t.schema;let a=i;e.name==="svg"&&i.space==="html"&&(a=VO,t.schema=a),t.ancestors.push(e);const s=e.name===null?t.Fragment:oq(t,e.name,!0),o=qZ(t,e),l=YO(t,e);return sq(t,o,s,e),WO(o,l),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function LZ(t,e,n){const i={};return WO(i,YO(t,e)),t.create(e,t.Fragment,i,n)}function FZ(t,e){return e.value}function sq(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function WO(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function $Z(t,e,n){return i;function i(a,s,o,l){const d=Array.isArray(o.children)?n:e;return l?d(s,o,l):d(s,o)}}function BZ(t,e){return n;function n(i,a,s,o){const l=Array.isArray(s.children),c=HO(i);return e(a,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function zZ(t,e){const n={};let i,a;for(a in e.properties)if(a!=="children"&&GO.call(e.properties,a)){const s=UZ(t,a,e.properties[a]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&PZ.has(e.tagName)?i=l:n[o]=l}}if(i){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function qZ(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const s=i.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Ev(t,e.position);else{const a=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const l=i.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else Ev(t,e.position);else s=i.value===null?!0:i.value;n[a]=s}return n}function YO(t,e){const n=[];let i=-1;const a=t.passKeys?new Map:kZ;for(;++i<e.children.length;){const s=e.children[i];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const d=a.get(c)||0;o=c+"-"+d,a.set(c,d+1)}}const l=aq(t,s,o);l!==void 0&&n.push(l)}return n}function UZ(t,e,n){const i=gZ(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?iZ(n):bZ(n)),i.property==="style"){let a=typeof n=="object"?n:VZ(t,String(n));return t.stylePropertyNameCase==="css"&&(a=HZ(a)),["style",a]}return[t.elementAttributeNameCase==="react"&&i.space?fZ[i.property]||i.property:i.attribute,n]}}function VZ(t,e){try{return CZ(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,a=new da("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=t.filePath||void 0,a.url=iq+"#cannot-parse-style-attribute",a}}function oq(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const a=e.split(".");let s=-1,o;for(;++s<a.length;){const l=EI(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}i=o}else i=EI(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const a=i.value;return GO.call(t.components,a)?t.components[a]:a}if(t.evaluater)return t.evaluater.evaluateExpression(i);Ev(t)}function Ev(t,e){const n=new da("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=iq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function HZ(t){const e={};let n;for(n in t)GO.call(t,n)&&(e[GZ(n)]=t[n]);return e}function GZ(t){let e=t.replace(AZ,WZ);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function WZ(t){return"-"+t.toLowerCase()}const iC={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},YZ={};function KO(t,e){const n=YZ,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return lq(t,i,a)}function lq(t,e,n){if(KZ(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return BI(t.children,e,n)}return Array.isArray(t)?BI(t,e,n):""}function BI(t,e,n){const i=[];let a=-1;for(;++a<t.length;)i[a]=lq(t[a],e,n);return i.join("")}function KZ(t){return!!(t&&typeof t=="object")}const zI=document.createElement("i");function QO(t){const e="&"+t+";";zI.innerHTML=e;const n=zI.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Cs(t,e,n,i){const a=t.length;let s=0,o;if(e<0?e=-e>a?0:a+e:e=e>a?a:e,n=n>0?n:0,i.length<1e4)o=Array.from(i),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<i.length;)o=i.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ws(t,e){return t.length>0?(Cs(t,t.length,0,e),t):e}const qI={}.hasOwnProperty;function cq(t){const e={};let n=-1;for(;++n<t.length;)QZ(e,t[n]);return e}function QZ(t,e){let n;for(n in e){const a=(qI.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){qI.call(a,o)||(a[o]=[]);const l=s[o];XZ(a[o],Array.isArray(l)?l:l?[l]:[])}}}function XZ(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);Cs(t,0,0,i)}function uq(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Po(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ea=hd(/[A-Za-z]/),oa=hd(/[\dA-Za-z]/),JZ=hd(/[#-'*+\--9=?A-Z^-~]/);function pw(t){return t!==null&&(t<32||t===127)}const NE=hd(/\d/),ZZ=hd(/[\dA-Fa-f]/),eee=hd(/[!-/:-@[-`{-~]/);function Wt(t){return t!==null&&t<-2}function _r(t){return t!==null&&(t<0||t===32)}function En(t){return t===-2||t===-1||t===32}const $S=hd(new RegExp("\\p{P}|\\p{S}","u")),xf=hd(/\s/);function hd(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Rg(t){const e=[];let n=-1,i=0,a=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&oa(t.charCodeAt(n+1))&&oa(t.charCodeAt(n+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),a=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(i,n),encodeURIComponent(o)),i=n+a+1,o=""),a&&(n+=a,a=0)}return e.join("")+t.slice(i)}function $n(t,e,n,i){const a=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return En(c)?(t.enter(n),l(c)):e(c)}function l(c){return En(c)&&s++<a?(t.consume(c),l):(t.exit(n),e(c))}}const tee={tokenize:nee};function nee(t){const e=t.attempt(this.parser.constructs.contentInitial,i,a);let n;return e;function i(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),$n(t,e,"linePrefix")}function a(l){return t.enter("paragraph"),s(l)}function s(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Wt(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const ree={tokenize:iee},UI={tokenize:aee};function iee(t){const e=this,n=[];let i=0,a,s,o;return l;function l(C){if(i<n.length){const O=n[i];return e.containerState=O[1],t.attempt(O[0].continuation,c,d)(C)}return d(C)}function c(C){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,a&&T();const O=e.events.length;let k=O,P;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){P=e.events[k][1].end;break}_(i);let I=O;for(;I<e.events.length;)e.events[I][1].end={...P},I++;return Cs(e.events,k+1,0,e.events.slice(O)),e.events.length=I,d(C)}return l(C)}function d(C){if(i===n.length){if(!a)return y(C);if(a.currentConstruct&&a.currentConstruct.concrete)return v(C);e.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(UI,f,p)(C)}function f(C){return a&&T(),_(i),y(C)}function p(C){return e.parser.lazy[e.now().line]=i!==n.length,o=e.now().offset,v(C)}function y(C){return e.containerState={},t.attempt(UI,x,v)(C)}function x(C){return i++,n.push([e.currentConstruct,e.containerState]),y(C)}function v(C){if(C===null){a&&T(),_(0),t.consume(C);return}return a=a||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),S(C)}function S(C){if(C===null){N(t.exit("chunkFlow"),!0),_(0),t.consume(C);return}return Wt(C)?(t.consume(C),N(t.exit("chunkFlow")),i=0,e.interrupt=void 0,l):(t.consume(C),S)}function N(C,O){const k=e.sliceStream(C);if(O&&k.push(null),C.previous=s,s&&(s.next=C),s=C,a.defineSkip(C.start),a.write(k),e.parser.lazy[C.start.line]){let P=a.events.length;for(;P--;)if(a.events[P][1].start.offset<o&&(!a.events[P][1].end||a.events[P][1].end.offset>o))return;const I=e.events.length;let F=I,B,$;for(;F--;)if(e.events[F][0]==="exit"&&e.events[F][1].type==="chunkFlow"){if(B){$=e.events[F][1].end;break}B=!0}for(_(i),P=I;P<e.events.length;)e.events[P][1].end={...$},P++;Cs(e.events,F+1,0,e.events.slice(I)),e.events.length=P}}function _(C){let O=n.length;for(;O-- >C;){const k=n[O];e.containerState=k[1],k[0].exit.call(e,t)}n.length=C}function T(){a.write([null]),s=void 0,a=void 0,e.containerState._closeFlow=void 0}}function aee(t,e,n){return $n(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tg(t){if(t===null||_r(t)||xf(t))return 1;if($S(t))return 2}function BS(t,e,n){const i=[];let a=-1;for(;++a<t.length;){const s=t[a].resolveAll;s&&!i.includes(s)&&(e=s(e,n),i.push(s))}return e}const _E={name:"attention",resolveAll:see,tokenize:oee};function see(t,e){let n=-1,i,a,s,o,l,c,d,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[i][1].end},y={...t[n][1].start};VI(p,-c),VI(y,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...t[i][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:y},s={type:c>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[i][1].end={...o.start},t[n][1].start={...l.end},d=[],t[i][1].end.offset-t[i][1].start.offset&&(d=Ws(d,[["enter",t[i][1],e],["exit",t[i][1],e]])),d=Ws(d,[["enter",a,e],["enter",o,e],["exit",o,e],["enter",s,e]]),d=Ws(d,BS(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),d=Ws(d,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",a,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,d=Ws(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,Cs(t,i-1,n-i+3,d),n=i+d.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function oee(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,a=tg(i);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;const d=t.exit("attentionSequence"),f=tg(c),p=!f||f===2&&a||n.includes(c),y=!a||a===2&&f||n.includes(i);return d._open=!!(s===42?p:p&&(a||!y)),d._close=!!(s===42?y:y&&(f||!p)),e(c)}}function VI(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const lee={name:"autolink",tokenize:cee};function cee(t,e,n){let i=0;return a;function a(x){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(x){return Ea(x)?(t.consume(x),o):x===64?n(x):d(x)}function o(x){return x===43||x===45||x===46||oa(x)?(i=1,l(x)):d(x)}function l(x){return x===58?(t.consume(x),i=0,c):(x===43||x===45||x===46||oa(x))&&i++<32?(t.consume(x),l):(i=0,d(x))}function c(x){return x===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):x===null||x===32||x===60||pw(x)?n(x):(t.consume(x),c)}function d(x){return x===64?(t.consume(x),f):JZ(x)?(t.consume(x),d):n(x)}function f(x){return oa(x)?p(x):n(x)}function p(x){return x===46?(t.consume(x),i=0,f):x===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):y(x)}function y(x){if((x===45||oa(x))&&i++<63){const v=x===45?y:p;return t.consume(x),v}return n(x)}}const Pb={partial:!0,tokenize:uee};function uee(t,e,n){return i;function i(s){return En(s)?$n(t,a,"linePrefix")(s):a(s)}function a(s){return s===null||Wt(s)?e(s):n(s)}}const dq={continuation:{tokenize:hee},exit:fee,name:"blockQuote",tokenize:dee};function dee(t,e,n){const i=this;return a;function a(o){if(o===62){const l=i.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return En(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function hee(t,e,n){const i=this;return a;function a(o){return En(o)?$n(t,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(dq,e,n)(o)}}function fee(t){t.exit("blockQuote")}const hq={name:"characterEscape",tokenize:pee};function pee(t,e,n){return i;function i(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),a}function a(s){return eee(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const fq={name:"characterReference",tokenize:mee};function mee(t,e,n){const i=this;let a=0,s,o;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),c}function c(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),s=31,o=oa,f(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=ZZ,f):(t.enter("characterReferenceValue"),s=7,o=NE,f(p))}function f(p){if(p===59&&a){const y=t.exit("characterReferenceValue");return o===oa&&!QO(i.sliceSerialize(y))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(p)&&a++<s?(t.consume(p),f):n(p)}}const HI={partial:!0,tokenize:yee},GI={concrete:!0,name:"codeFenced",tokenize:gee};function gee(t,e,n){const i=this,a={partial:!0,tokenize:k};let s=0,o=0,l;return c;function c(P){return d(P)}function d(P){const I=i.events[i.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=P,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(P)}function f(P){return P===l?(o++,t.consume(P),f):o<3?n(P):(t.exit("codeFencedFenceSequence"),En(P)?$n(t,p,"whitespace")(P):p(P))}function p(P){return P===null||Wt(P)?(t.exit("codeFencedFence"),i.interrupt?e(P):t.check(HI,S,O)(P)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),y(P))}function y(P){return P===null||Wt(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(P)):En(P)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),$n(t,x,"whitespace")(P)):P===96&&P===l?n(P):(t.consume(P),y)}function x(P){return P===null||Wt(P)?p(P):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(P))}function v(P){return P===null||Wt(P)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(P)):P===96&&P===l?n(P):(t.consume(P),v)}function S(P){return t.attempt(a,O,N)(P)}function N(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),_}function _(P){return s>0&&En(P)?$n(t,T,"linePrefix",s+1)(P):T(P)}function T(P){return P===null||Wt(P)?t.check(HI,S,O)(P):(t.enter("codeFlowValue"),C(P))}function C(P){return P===null||Wt(P)?(t.exit("codeFlowValue"),T(P)):(t.consume(P),C)}function O(P){return t.exit("codeFenced"),e(P)}function k(P,I,F){let B=0;return $;function $(X){return P.enter("lineEnding"),P.consume(X),P.exit("lineEnding"),L}function L(X){return P.enter("codeFencedFence"),En(X)?$n(P,V,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):V(X)}function V(X){return X===l?(P.enter("codeFencedFenceSequence"),H(X)):F(X)}function H(X){return X===l?(B++,P.consume(X),H):B>=o?(P.exit("codeFencedFenceSequence"),En(X)?$n(P,te,"whitespace")(X):te(X)):F(X)}function te(X){return X===null||Wt(X)?(P.exit("codeFencedFence"),I(X)):F(X)}}}function yee(t,e,n){const i=this;return a;function a(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}const aC={name:"codeIndented",tokenize:vee},xee={partial:!0,tokenize:bee};function vee(t,e,n){const i=this;return a;function a(d){return t.enter("codeIndented"),$n(t,s,"linePrefix",5)(d)}function s(d){const f=i.events[i.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):Wt(d)?t.attempt(xee,o,c)(d):(t.enter("codeFlowValue"),l(d))}function l(d){return d===null||Wt(d)?(t.exit("codeFlowValue"),o(d)):(t.consume(d),l)}function c(d){return t.exit("codeIndented"),e(d)}}function bee(t,e,n){const i=this;return a;function a(o){return i.parser.lazy[i.now().line]?n(o):Wt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),a):$n(t,s,"linePrefix",5)(o)}function s(o){const l=i.events[i.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Wt(o)?a(o):n(o)}}const jee={name:"codeText",previous:See,resolve:wee,tokenize:Nee};function wee(t){let e=t.length-4,n=3,i,a;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)a===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(a=i):(i===e||t[i][1].type==="lineEnding")&&(t[a][1].type="codeTextData",i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),e-=i-a-2,i=a+2),a=void 0);return t}function See(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Nee(t,e,n){let i=0,a,s;return o;function o(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),i++,l):(t.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),c):p===96?(s=t.enter("codeTextSequence"),a=0,f(p)):Wt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||Wt(p)?(t.exit("codeTextData"),c(p)):(t.consume(p),d)}function f(p){return p===96?(t.consume(p),a++,f):a===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(s.type="codeTextData",d(p))}}class _ee{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const a=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return i&&Vx(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Vx(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Vx(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Vx(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Vx(this.left,n.reverse())}}}function Vx(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function pq(t){const e={};let n=-1,i,a,s,o,l,c,d;const f=new _ee(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(i=f.get(n),n&&i[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,Cee(f,n)),n=e[n],d=!0);else if(i[1]._container){for(s=n,a=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(i[1].end={...f.get(a)[1].start},l=f.slice(a,n),l.unshift(i),f.splice(a,n-a+1,l))}}return Cs(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!d}function Cee(t,e){const n=t.get(e)[1],i=t.get(e)[2];let a=e-1;const s=[];let o=n._tokenizer;o||(o=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let f,p,y=-1,x=n,v=0,S=0;const N=[S];for(;x;){for(;t.get(++a)[1]!==x;);s.push(a),x._tokenizer||(f=i.sliceStream(x),x.next||f.push(null),p&&o.defineSkip(x.start),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),x._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=x,x=x.next}for(x=n;++y<l.length;)l[y][0]==="exit"&&l[y-1][0]==="enter"&&l[y][1].type===l[y-1][1].type&&l[y][1].start.line!==l[y][1].end.line&&(S=y+1,N.push(S),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(o.events=[],x?(x._tokenizer=void 0,x.previous=void 0):N.pop(),y=N.length;y--;){const _=l.slice(N[y],N[y+1]),T=s.pop();c.push([T,T+_.length-1]),t.splice(T,2,_)}for(c.reverse(),y=-1;++y<c.length;)d[v+c[y][0]]=v+c[y][1],v+=c[y][1]-c[y][0]-1;return d}const Tee={resolve:Aee,tokenize:Eee},kee={partial:!0,tokenize:Pee};function Aee(t){return pq(t),t}function Eee(t,e){let n;return i;function i(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?s(l):Wt(l)?t.check(kee,o,s)(l):(t.consume(l),a)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function Pee(t,e,n){const i=this;return a;function a(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),$n(t,s,"linePrefix")}function s(o){if(o===null||Wt(o))return n(o);const l=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(i.parser.constructs.flow,n,e)(o)}}function mq(t,e,n,i,a,s,o,l,c){const d=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(_){return _===60?(t.enter(i),t.enter(a),t.enter(s),t.consume(_),t.exit(s),y):_===null||_===32||_===41||pw(_)?n(_):(t.enter(i),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),S(_))}function y(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(a),t.exit(i),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),x(_))}function x(_){return _===62?(t.exit("chunkString"),t.exit(l),y(_)):_===null||_===60||Wt(_)?n(_):(t.consume(_),_===92?v:x)}function v(_){return _===60||_===62||_===92?(t.consume(_),x):x(_)}function S(_){return!f&&(_===null||_===41||_r(_))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(i),e(_)):f<d&&_===40?(t.consume(_),f++,S):_===41?(t.consume(_),f--,S):_===null||_===32||_===40||pw(_)?n(_):(t.consume(_),_===92?N:S)}function N(_){return _===40||_===41||_===92?(t.consume(_),S):S(_)}}function gq(t,e,n,i,a,s){const o=this;let l=0,c;return d;function d(x){return t.enter(i),t.enter(a),t.consume(x),t.exit(a),t.enter(s),f}function f(x){return l>999||x===null||x===91||x===93&&!c||x===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(x):x===93?(t.exit(s),t.enter(a),t.consume(x),t.exit(a),t.exit(i),e):Wt(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||x===91||x===93||Wt(x)||l++>999?(t.exit("chunkString"),f(x)):(t.consume(x),c||(c=!En(x)),x===92?y:p)}function y(x){return x===91||x===92||x===93?(t.consume(x),l++,p):p(x)}}function yq(t,e,n,i,a,s){let o;return l;function l(y){return y===34||y===39||y===40?(t.enter(i),t.enter(a),t.consume(y),t.exit(a),o=y===40?41:y,c):n(y)}function c(y){return y===o?(t.enter(a),t.consume(y),t.exit(a),t.exit(i),e):(t.enter(s),d(y))}function d(y){return y===o?(t.exit(s),c(o)):y===null?n(y):Wt(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),$n(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===o||y===null||Wt(y)?(t.exit("chunkString"),d(y)):(t.consume(y),y===92?p:f)}function p(y){return y===o||y===92?(t.consume(y),f):f(y)}}function yv(t,e){let n;return i;function i(a){return Wt(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),n=!0,i):En(a)?$n(t,i,n?"linePrefix":"lineSuffix")(a):e(a)}}const Oee={name:"definition",tokenize:Mee},Dee={partial:!0,tokenize:Iee};function Mee(t,e,n){const i=this;let a;return s;function s(x){return t.enter("definition"),o(x)}function o(x){return gq.call(i,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return a=Po(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),c):n(x)}function c(x){return _r(x)?yv(t,d)(x):d(x)}function d(x){return mq(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function f(x){return t.attempt(Dee,p,p)(x)}function p(x){return En(x)?$n(t,y,"whitespace")(x):y(x)}function y(x){return x===null||Wt(x)?(t.exit("definition"),i.parser.defined.push(a),e(x)):n(x)}}function Iee(t,e,n){return i;function i(l){return _r(l)?yv(t,a)(l):n(l)}function a(l){return yq(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return En(l)?$n(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Wt(l)?e(l):n(l)}}const Ree={name:"hardBreakEscape",tokenize:Lee};function Lee(t,e,n){return i;function i(s){return t.enter("hardBreakEscape"),t.consume(s),a}function a(s){return Wt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const Fee={name:"headingAtx",resolve:$ee,tokenize:Bee};function $ee(t,e){let n=t.length-2,i=3,a,s;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(a={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},s={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},Cs(t,i,n-i+1,[["enter",a,e],["enter",s,e],["exit",s,e],["exit",a,e]])),t}function Bee(t,e,n){let i=0;return a;function a(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&i++<6?(t.consume(f),o):f===null||_r(f)?(t.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||Wt(f)?(t.exit("atxHeading"),e(f)):En(f)?$n(t,l,"whitespace")(f):(t.enter("atxHeadingText"),d(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),l(f))}function d(f){return f===null||f===35||_r(f)?(t.exit("atxHeadingText"),l(f)):(t.consume(f),d)}}const zee=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],WI=["pre","script","style","textarea"],qee={concrete:!0,name:"htmlFlow",resolveTo:Hee,tokenize:Gee},Uee={partial:!0,tokenize:Yee},Vee={partial:!0,tokenize:Wee};function Hee(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Gee(t,e,n){const i=this;let a,s,o,l,c;return d;function d(K){return f(K)}function f(K){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(K),p}function p(K){return K===33?(t.consume(K),y):K===47?(t.consume(K),s=!0,S):K===63?(t.consume(K),a=3,i.interrupt?e:z):Ea(K)?(t.consume(K),o=String.fromCharCode(K),N):n(K)}function y(K){return K===45?(t.consume(K),a=2,x):K===91?(t.consume(K),a=5,l=0,v):Ea(K)?(t.consume(K),a=4,i.interrupt?e:z):n(K)}function x(K){return K===45?(t.consume(K),i.interrupt?e:z):n(K)}function v(K){const Oe="CDATA[";return K===Oe.charCodeAt(l++)?(t.consume(K),l===Oe.length?i.interrupt?e:V:v):n(K)}function S(K){return Ea(K)?(t.consume(K),o=String.fromCharCode(K),N):n(K)}function N(K){if(K===null||K===47||K===62||_r(K)){const Oe=K===47,Ye=o.toLowerCase();return!Oe&&!s&&WI.includes(Ye)?(a=1,i.interrupt?e(K):V(K)):zee.includes(o.toLowerCase())?(a=6,Oe?(t.consume(K),_):i.interrupt?e(K):V(K)):(a=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(K):s?T(K):C(K))}return K===45||oa(K)?(t.consume(K),o+=String.fromCharCode(K),N):n(K)}function _(K){return K===62?(t.consume(K),i.interrupt?e:V):n(K)}function T(K){return En(K)?(t.consume(K),T):$(K)}function C(K){return K===47?(t.consume(K),$):K===58||K===95||Ea(K)?(t.consume(K),O):En(K)?(t.consume(K),C):$(K)}function O(K){return K===45||K===46||K===58||K===95||oa(K)?(t.consume(K),O):k(K)}function k(K){return K===61?(t.consume(K),P):En(K)?(t.consume(K),k):C(K)}function P(K){return K===null||K===60||K===61||K===62||K===96?n(K):K===34||K===39?(t.consume(K),c=K,I):En(K)?(t.consume(K),P):F(K)}function I(K){return K===c?(t.consume(K),c=null,B):K===null||Wt(K)?n(K):(t.consume(K),I)}function F(K){return K===null||K===34||K===39||K===47||K===60||K===61||K===62||K===96||_r(K)?k(K):(t.consume(K),F)}function B(K){return K===47||K===62||En(K)?C(K):n(K)}function $(K){return K===62?(t.consume(K),L):n(K)}function L(K){return K===null||Wt(K)?V(K):En(K)?(t.consume(K),L):n(K)}function V(K){return K===45&&a===2?(t.consume(K),q):K===60&&a===1?(t.consume(K),W):K===62&&a===4?(t.consume(K),le):K===63&&a===3?(t.consume(K),z):K===93&&a===5?(t.consume(K),G):Wt(K)&&(a===6||a===7)?(t.exit("htmlFlowData"),t.check(Uee,je,H)(K)):K===null||Wt(K)?(t.exit("htmlFlowData"),H(K)):(t.consume(K),V)}function H(K){return t.check(Vee,te,je)(K)}function te(K){return t.enter("lineEnding"),t.consume(K),t.exit("lineEnding"),X}function X(K){return K===null||Wt(K)?H(K):(t.enter("htmlFlowData"),V(K))}function q(K){return K===45?(t.consume(K),z):V(K)}function W(K){return K===47?(t.consume(K),o="",ae):V(K)}function ae(K){if(K===62){const Oe=o.toLowerCase();return WI.includes(Oe)?(t.consume(K),le):V(K)}return Ea(K)&&o.length<8?(t.consume(K),o+=String.fromCharCode(K),ae):V(K)}function G(K){return K===93?(t.consume(K),z):V(K)}function z(K){return K===62?(t.consume(K),le):K===45&&a===2?(t.consume(K),z):V(K)}function le(K){return K===null||Wt(K)?(t.exit("htmlFlowData"),je(K)):(t.consume(K),le)}function je(K){return t.exit("htmlFlow"),e(K)}}function Wee(t,e,n){const i=this;return a;function a(o){return Wt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}function Yee(t,e,n){return i;function i(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),t.attempt(Pb,e,n)}}const Kee={name:"htmlText",tokenize:Qee};function Qee(t,e,n){const i=this;let a,s,o;return l;function l(z){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(z),c}function c(z){return z===33?(t.consume(z),d):z===47?(t.consume(z),k):z===63?(t.consume(z),C):Ea(z)?(t.consume(z),F):n(z)}function d(z){return z===45?(t.consume(z),f):z===91?(t.consume(z),s=0,v):Ea(z)?(t.consume(z),T):n(z)}function f(z){return z===45?(t.consume(z),x):n(z)}function p(z){return z===null?n(z):z===45?(t.consume(z),y):Wt(z)?(o=p,W(z)):(t.consume(z),p)}function y(z){return z===45?(t.consume(z),x):p(z)}function x(z){return z===62?q(z):z===45?y(z):p(z)}function v(z){const le="CDATA[";return z===le.charCodeAt(s++)?(t.consume(z),s===le.length?S:v):n(z)}function S(z){return z===null?n(z):z===93?(t.consume(z),N):Wt(z)?(o=S,W(z)):(t.consume(z),S)}function N(z){return z===93?(t.consume(z),_):S(z)}function _(z){return z===62?q(z):z===93?(t.consume(z),_):S(z)}function T(z){return z===null||z===62?q(z):Wt(z)?(o=T,W(z)):(t.consume(z),T)}function C(z){return z===null?n(z):z===63?(t.consume(z),O):Wt(z)?(o=C,W(z)):(t.consume(z),C)}function O(z){return z===62?q(z):C(z)}function k(z){return Ea(z)?(t.consume(z),P):n(z)}function P(z){return z===45||oa(z)?(t.consume(z),P):I(z)}function I(z){return Wt(z)?(o=I,W(z)):En(z)?(t.consume(z),I):q(z)}function F(z){return z===45||oa(z)?(t.consume(z),F):z===47||z===62||_r(z)?B(z):n(z)}function B(z){return z===47?(t.consume(z),q):z===58||z===95||Ea(z)?(t.consume(z),$):Wt(z)?(o=B,W(z)):En(z)?(t.consume(z),B):q(z)}function $(z){return z===45||z===46||z===58||z===95||oa(z)?(t.consume(z),$):L(z)}function L(z){return z===61?(t.consume(z),V):Wt(z)?(o=L,W(z)):En(z)?(t.consume(z),L):B(z)}function V(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(t.consume(z),a=z,H):Wt(z)?(o=V,W(z)):En(z)?(t.consume(z),V):(t.consume(z),te)}function H(z){return z===a?(t.consume(z),a=void 0,X):z===null?n(z):Wt(z)?(o=H,W(z)):(t.consume(z),H)}function te(z){return z===null||z===34||z===39||z===60||z===61||z===96?n(z):z===47||z===62||_r(z)?B(z):(t.consume(z),te)}function X(z){return z===47||z===62||_r(z)?B(z):n(z)}function q(z){return z===62?(t.consume(z),t.exit("htmlTextData"),t.exit("htmlText"),e):n(z)}function W(z){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),ae}function ae(z){return En(z)?$n(t,G,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):G(z)}function G(z){return t.enter("htmlTextData"),o(z)}}const XO={name:"labelEnd",resolveAll:ete,resolveTo:tte,tokenize:nte},Xee={tokenize:rte},Jee={tokenize:ite},Zee={tokenize:ate};function ete(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const a=i.type==="labelImage"?4:2;i.type="data",e+=a}}return t.length!==n.length&&Cs(t,0,t.length,n),t}function tte(t,e){let n=t.length,i=0,a,s,o,l;for(;n--;)if(a=t[n][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;t[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=n,a.type!=="labelLink")){i=2;break}}else a.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},f={type:"labelText",start:{...t[s+i+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",c,e],["enter",d,e]],l=Ws(l,t.slice(s+1,s+i+3)),l=Ws(l,[["enter",f,e]]),l=Ws(l,BS(e.parser.constructs.insideSpan.null,t.slice(s+i+4,o-3),e)),l=Ws(l,[["exit",f,e],t[o-2],t[o-1],["exit",d,e]]),l=Ws(l,t.slice(o+1)),l=Ws(l,[["exit",c,e]]),Cs(t,s,t.length,l),t}function nte(t,e,n){const i=this;let a=i.events.length,s,o;for(;a--;)if((i.events[a][1].type==="labelImage"||i.events[a][1].type==="labelLink")&&!i.events[a][1]._balanced){s=i.events[a][1];break}return l;function l(y){return s?s._inactive?p(y):(o=i.parser.defined.includes(Po(i.sliceSerialize({start:s.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(y),t.exit("labelMarker"),t.exit("labelEnd"),c):n(y)}function c(y){return y===40?t.attempt(Xee,f,o?f:p)(y):y===91?t.attempt(Jee,f,o?d:p)(y):o?f(y):p(y)}function d(y){return t.attempt(Zee,f,p)(y)}function f(y){return e(y)}function p(y){return s._balanced=!0,n(y)}}function rte(t,e,n){return i;function i(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),a}function a(p){return _r(p)?yv(t,s)(p):s(p)}function s(p){return p===41?f(p):mq(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return _r(p)?yv(t,c)(p):f(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?yq(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function d(p){return _r(p)?yv(t,f)(p):f(p)}function f(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function ite(t,e,n){const i=this;return a;function a(l){return gq.call(i,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return i.parser.defined.includes(Po(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function ate(t,e,n){return i;function i(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),a}function a(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const ste={name:"labelStartImage",resolveAll:XO.resolveAll,tokenize:ote};function ote(t,e,n){const i=this;return a;function a(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):e(l)}}const lte={name:"labelStartLink",resolveAll:XO.resolveAll,tokenize:cte};function cte(t,e,n){const i=this;return a;function a(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):e(o)}}const sC={name:"lineEnding",tokenize:ute};function ute(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),$n(t,e,"linePrefix")}}const Xj={name:"thematicBreak",tokenize:dte};function dte(t,e,n){let i=0,a;return s;function s(d){return t.enter("thematicBreak"),o(d)}function o(d){return a=d,l(d)}function l(d){return d===a?(t.enter("thematicBreakSequence"),c(d)):i>=3&&(d===null||Wt(d))?(t.exit("thematicBreak"),e(d)):n(d)}function c(d){return d===a?(t.consume(d),i++,c):(t.exit("thematicBreakSequence"),En(d)?$n(t,l,"whitespace")(d):l(d))}}const Ja={continuation:{tokenize:mte},exit:yte,name:"list",tokenize:pte},hte={partial:!0,tokenize:xte},fte={partial:!0,tokenize:gte};function pte(t,e,n){const i=this,a=i.events[i.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(x){const v=i.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!i.containerState.marker||x===i.containerState.marker:NE(x)){if(i.containerState.type||(i.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),x===42||x===45?t.check(Xj,n,d)(x):d(x);if(!i.interrupt||x===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(x)}return n(x)}function c(x){return NE(x)&&++o<10?(t.consume(x),c):(!i.interrupt||o<2)&&(i.containerState.marker?x===i.containerState.marker:x===41||x===46)?(t.exit("listItemValue"),d(x)):n(x)}function d(x){return t.enter("listItemMarker"),t.consume(x),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||x,t.check(Pb,i.interrupt?n:f,t.attempt(hte,y,p))}function f(x){return i.containerState.initialBlankLine=!0,s++,y(x)}function p(x){return En(x)?(t.enter("listItemPrefixWhitespace"),t.consume(x),t.exit("listItemPrefixWhitespace"),y):n(x)}function y(x){return i.containerState.size=s+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(x)}}function mte(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Pb,a,s);function a(l){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,$n(t,e,"listItemIndent",i.containerState.size+1)(l)}function s(l){return i.containerState.furtherBlankLines||!En(l)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(l)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(fte,e,o)(l))}function o(l){return i.containerState._closeFlow=!0,i.interrupt=void 0,$n(t,t.attempt(Ja,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function gte(t,e,n){const i=this;return $n(t,a,"listItemIndent",i.containerState.size+1);function a(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?e(s):n(s)}}function yte(t){t.exit(this.containerState.type)}function xte(t,e,n){const i=this;return $n(t,a,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const o=i.events[i.events.length-1];return!En(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const YI={name:"setextUnderline",resolveTo:vte,tokenize:bte};function vte(t,e){let n=t.length,i,a,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(a=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[a][1].type="setextHeadingText",s?(t.splice(a,0,["enter",o,e]),t.splice(s+1,0,["exit",t[i][1],e]),t[i][1].end={...t[s][1].end}):t[i][1]=o,t.push(["exit",o,e]),t}function bte(t,e,n){const i=this;let a;return s;function s(d){let f=i.events.length,p;for(;f--;)if(i.events[f][1].type!=="lineEnding"&&i.events[f][1].type!=="linePrefix"&&i.events[f][1].type!=="content"){p=i.events[f][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||p)?(t.enter("setextHeadingLine"),a=d,o(d)):n(d)}function o(d){return t.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===a?(t.consume(d),l):(t.exit("setextHeadingLineSequence"),En(d)?$n(t,c,"lineSuffix")(d):c(d))}function c(d){return d===null||Wt(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const jte={tokenize:wte};function wte(t){const e=this,n=t.attempt(Pb,i,t.attempt(this.parser.constructs.flowInitial,a,$n(t,t.attempt(this.parser.constructs.flow,a,t.attempt(Tee,a)),"linePrefix")));return n;function i(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function a(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Ste={resolveAll:vq()},Nte=xq("string"),_te=xq("text");function xq(t){return{resolveAll:vq(t==="text"?Cte:void 0),tokenize:e};function e(n){const i=this,a=this.parser.constructs[t],s=n.attempt(a,o,l);return o;function o(f){return d(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return d(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function d(f){if(f===null)return!0;const p=a[f];let y=-1;if(p)for(;++y<p.length;){const x=p[y];if(!x.previous||x.previous.call(i,i.previous))return!0}return!1}}}function vq(t){return e;function e(n,i){let a=-1,s;for(;++a<=n.length;)s===void 0?n[a]&&n[a][1].type==="data"&&(s=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==s+2&&(n[s][1].end=n[a-1][1].end,n.splice(s+2,a-s-2),a=s+2),s=void 0);return t?t(n,i):n}}function Cte(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],a=e.sliceStream(i);let s=a.length,o=-1,l=0,c;for(;s--;){const d=a[s];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const d={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const Tte={42:Ja,43:Ja,45:Ja,48:Ja,49:Ja,50:Ja,51:Ja,52:Ja,53:Ja,54:Ja,55:Ja,56:Ja,57:Ja,62:dq},kte={91:Oee},Ate={[-2]:aC,[-1]:aC,32:aC},Ete={35:Fee,42:Xj,45:[YI,Xj],60:qee,61:YI,95:Xj,96:GI,126:GI},Pte={38:fq,92:hq},Ote={[-5]:sC,[-4]:sC,[-3]:sC,33:ste,38:fq,42:_E,60:[lee,Kee],91:lte,92:[Ree,hq],93:XO,95:_E,96:jee},Dte={null:[_E,Ste]},Mte={null:[42,95]},Ite={null:[]},Rte=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Mte,contentInitial:kte,disable:Ite,document:Tte,flow:Ete,flowInitial:Ate,insideSpan:Dte,string:Pte,text:Ote},Symbol.toStringTag,{value:"Module"}));function Lte(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},s=[];let o=[],l=[];const c={attempt:I(k),check:I(P),consume:T,enter:C,exit:O,interrupt:I(P,{interrupt:!0})},d={code:null,containerState:{},defineSkip:S,events:[],now:v,parser:t,previous:null,sliceSerialize:y,sliceStream:x,write:p};let f=e.tokenize.call(d,c);return e.resolveAll&&s.push(e),d;function p(L){return o=Ws(o,L),N(),o[o.length-1]!==null?[]:(F(e,0),d.events=BS(s,d.events,d),d.events)}function y(L,V){return $te(x(L),V)}function x(L){return Fte(o,L)}function v(){const{_bufferIndex:L,_index:V,line:H,column:te,offset:X}=i;return{_bufferIndex:L,_index:V,line:H,column:te,offset:X}}function S(L){a[L.line]=L.column,$()}function N(){let L;for(;i._index<o.length;){const V=o[i._index];if(typeof V=="string")for(L=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===L&&i._bufferIndex<V.length;)_(V.charCodeAt(i._bufferIndex));else _(V)}}function _(L){f=f(L)}function T(L){Wt(L)?(i.line++,i.column=1,i.offset+=L===-3?2:1,$()):L!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=L}function C(L,V){const H=V||{};return H.type=L,H.start=v(),d.events.push(["enter",H,d]),l.push(H),H}function O(L){const V=l.pop();return V.end=v(),d.events.push(["exit",V,d]),V}function k(L,V){F(L,V.from)}function P(L,V){V.restore()}function I(L,V){return H;function H(te,X,q){let W,ae,G,z;return Array.isArray(te)?je(te):"tokenize"in te?je([te]):le(te);function le(Me){return Ie;function Ie(be){const re=be!==null&&Me[be],ve=be!==null&&Me.null,ce=[...Array.isArray(re)?re:re?[re]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return je(ce)(be)}}function je(Me){return W=Me,ae=0,Me.length===0?q:K(Me[ae])}function K(Me){return Ie;function Ie(be){return z=B(),G=Me,Me.partial||(d.currentConstruct=Me),Me.name&&d.parser.constructs.disable.null.includes(Me.name)?Ye():Me.tokenize.call(V?Object.assign(Object.create(d),V):d,c,Oe,Ye)(be)}}function Oe(Me){return L(G,z),X}function Ye(Me){return z.restore(),++ae<W.length?K(W[ae]):q}}}function F(L,V){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&Cs(d.events,V,d.events.length-V,L.resolve(d.events.slice(V),d)),L.resolveTo&&(d.events=L.resolveTo(d.events,d))}function B(){const L=v(),V=d.previous,H=d.currentConstruct,te=d.events.length,X=Array.from(l);return{from:te,restore:q};function q(){i=L,d.previous=V,d.currentConstruct=H,d.events.length=te,l=X,$()}}function $(){i.line in a&&i.column<2&&(i.column=a[i.line],i.offset+=a[i.line]-1)}}function Fte(t,e){const n=e.start._index,i=e.start._bufferIndex,a=e.end._index,s=e.end._bufferIndex;let o;if(n===a)o=[t[n].slice(i,s)];else{if(o=t.slice(n,a),i>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(i):o.shift()}s>0&&o.push(t[a].slice(0,s))}return o}function $te(t,e){let n=-1;const i=[];let a;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&a)continue;o=" ";break}default:o=String.fromCharCode(s)}a=s===-2,i.push(o)}return i.join("")}function Bte(t){const i={constructs:cq([Rte,...(t||{}).extensions||[]]),content:a(tee),defined:[],document:a(ree),flow:a(jte),lazy:{},string:a(Nte),text:a(_te)};return i;function a(s){return o;function o(l){return Lte(i,s,l)}}}function zte(t){for(;!pq(t););return t}const KI=/[\0\t\n\r]/g;function qte(){let t=1,e="",n=!0,i;return a;function a(s,o,l){const c=[];let d,f,p,y,x;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),p=0,e="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(KI.lastIndex=p,d=KI.exec(s),y=d&&d.index!==void 0?d.index:s.length,x=s.charCodeAt(y),!d){e=s.slice(p);break}if(x===10&&p===y&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),p<y&&(c.push(s.slice(p,y)),t+=y-p),x){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:i=!0,t=1}p=y+1}return l&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const Ute=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Vte(t){return t.replace(Ute,Hte)}function Hte(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),s=a===120||a===88;return uq(n.slice(s?2:1),s?16:10)}return QO(n)||t}const bq={}.hasOwnProperty;function Gte(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Wte(n)(zte(Bte(n).document().write(qte()(t,e,!0))))}function Wte(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ue),autolinkProtocol:B,autolinkEmail:B,atxHeading:s(ie),blockQuote:s(ve),characterEscape:B,characterReference:B,codeFenced:s(ce),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ce,o),codeText:s(fe,o),codeTextData:B,data:B,codeFlowValue:B,definition:s(se),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Q),hardBreakEscape:s(ge),hardBreakTrailing:s(ge),htmlFlow:s(ee,o),htmlFlowData:B,htmlText:s(ee,o),htmlTextData:B,image:s(we),label:o,link:s(Ue),listItem:s(Le),listItemValue:y,listOrdered:s(Ge,p),listUnordered:s(Ge),paragraph:s(oe),reference:K,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ie),strong:s(_e),thematicBreak:s(ze)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:re,autolinkProtocol:be,blockQuote:c(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:Ye,characterReferenceMarkerNumeric:Ye,characterReferenceValue:Me,characterReference:Ie,codeFenced:c(N),codeFencedFence:S,codeFencedFenceInfo:x,codeFencedFenceMeta:v,codeFlowValue:$,codeIndented:c(_),codeText:c(X),codeTextData:$,data:$,definition:c(),definitionDestinationString:O,definitionLabelString:T,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(V),hardBreakTrailing:c(V),htmlFlow:c(H),htmlFlowData:$,htmlText:c(te),htmlTextData:$,image:c(W),label:G,labelText:ae,lineEnding:L,link:c(q),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Oe,resourceDestinationString:z,resourceTitleString:le,resource:je,setextHeading:c(F),setextHeadingLineSequence:I,setextHeadingText:P,strong:c(),thematicBreak:c()}};jq(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(Y){let ye={type:"root",children:[]};const pe={stack:[ye],tokenStack:[],config:e,enter:l,exit:d,buffer:o,resume:f,data:n},me=[];let Ne=-1;for(;++Ne<Y.length;)if(Y[Ne][1].type==="listOrdered"||Y[Ne][1].type==="listUnordered")if(Y[Ne][0]==="enter")me.push(Ne);else{const Be=me.pop();Ne=a(Y,Be,Ne)}for(Ne=-1;++Ne<Y.length;){const Be=e[Y[Ne][0]];bq.call(Be,Y[Ne][1].type)&&Be[Y[Ne][1].type].call(Object.assign({sliceSerialize:Y[Ne][2].sliceSerialize},pe),Y[Ne][1])}if(pe.tokenStack.length>0){const Be=pe.tokenStack[pe.tokenStack.length-1];(Be[1]||QI).call(pe,void 0,Be[0])}for(ye.position={start:$u(Y.length>0?Y[0][1].start:{line:1,column:1,offset:0}),end:$u(Y.length>0?Y[Y.length-2][1].end:{line:1,column:1,offset:0})},Ne=-1;++Ne<e.transforms.length;)ye=e.transforms[Ne](ye)||ye;return ye}function a(Y,ye,pe){let me=ye-1,Ne=-1,Be=!1,Ee,Ke,rt,mt;for(;++me<=pe;){const Pe=Y[me];switch(Pe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Pe[0]==="enter"?Ne++:Ne--,mt=void 0;break}case"lineEndingBlank":{Pe[0]==="enter"&&(Ee&&!mt&&!Ne&&!rt&&(rt=me),mt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:mt=void 0}if(!Ne&&Pe[0]==="enter"&&Pe[1].type==="listItemPrefix"||Ne===-1&&Pe[0]==="exit"&&(Pe[1].type==="listUnordered"||Pe[1].type==="listOrdered")){if(Ee){let Je=me;for(Ke=void 0;Je--;){const et=Y[Je];if(et[1].type==="lineEnding"||et[1].type==="lineEndingBlank"){if(et[0]==="exit")continue;Ke&&(Y[Ke][1].type="lineEndingBlank",Be=!0),et[1].type="lineEnding",Ke=Je}else if(!(et[1].type==="linePrefix"||et[1].type==="blockQuotePrefix"||et[1].type==="blockQuotePrefixWhitespace"||et[1].type==="blockQuoteMarker"||et[1].type==="listItemIndent"))break}rt&&(!Ke||rt<Ke)&&(Ee._spread=!0),Ee.end=Object.assign({},Ke?Y[Ke][1].start:Pe[1].end),Y.splice(Ke||me,0,["exit",Ee,Pe[2]]),me++,pe++}if(Pe[1].type==="listItemPrefix"){const Je={type:"listItem",_spread:!1,start:Object.assign({},Pe[1].start),end:void 0};Ee=Je,Y.splice(me,0,["enter",Je,Pe[2]]),me++,pe++,rt=void 0,mt=!0}}}return Y[ye][1]._spread=Be,pe}function s(Y,ye){return pe;function pe(me){l.call(this,Y(me),me),ye&&ye.call(this,me)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(Y,ye,pe){this.stack[this.stack.length-1].children.push(Y),this.stack.push(Y),this.tokenStack.push([ye,pe||void 0]),Y.position={start:$u(ye.start),end:void 0}}function c(Y){return ye;function ye(pe){Y&&Y.call(this,pe),d.call(this,pe)}}function d(Y,ye){const pe=this.stack.pop(),me=this.tokenStack.pop();if(me)me[0].type!==Y.type&&(ye?ye.call(this,Y,me[0]):(me[1]||QI).call(this,Y,me[0]));else throw new Error("Cannot close `"+Y.type+"` ("+gv({start:Y.start,end:Y.end})+"): its not open");pe.position.end=$u(Y.end)}function f(){return KO(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function y(Y){if(this.data.expectingFirstListItemValue){const ye=this.stack[this.stack.length-2];ye.start=Number.parseInt(this.sliceSerialize(Y),10),this.data.expectingFirstListItemValue=void 0}}function x(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.lang=Y}function v(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.meta=Y}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function N(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.value=Y.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.value=Y.replace(/(\r?\n|\r)$/g,"")}function T(Y){const ye=this.resume(),pe=this.stack[this.stack.length-1];pe.label=ye,pe.identifier=Po(this.sliceSerialize(Y)).toLowerCase()}function C(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.title=Y}function O(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.url=Y}function k(Y){const ye=this.stack[this.stack.length-1];if(!ye.depth){const pe=this.sliceSerialize(Y).length;ye.depth=pe}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function I(Y){const ye=this.stack[this.stack.length-1];ye.depth=this.sliceSerialize(Y).codePointAt(0)===61?1:2}function F(){this.data.setextHeadingSlurpLineEnding=void 0}function B(Y){const pe=this.stack[this.stack.length-1].children;let me=pe[pe.length-1];(!me||me.type!=="text")&&(me=$e(),me.position={start:$u(Y.start),end:void 0},pe.push(me)),this.stack.push(me)}function $(Y){const ye=this.stack.pop();ye.value+=this.sliceSerialize(Y),ye.position.end=$u(Y.end)}function L(Y){const ye=this.stack[this.stack.length-1];if(this.data.atHardBreak){const pe=ye.children[ye.children.length-1];pe.position.end=$u(Y.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ye.type)&&(B.call(this,Y),$.call(this,Y))}function V(){this.data.atHardBreak=!0}function H(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.value=Y}function te(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.value=Y}function X(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.value=Y}function q(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=ye,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function W(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const ye=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=ye,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function ae(Y){const ye=this.sliceSerialize(Y),pe=this.stack[this.stack.length-2];pe.label=Vte(ye),pe.identifier=Po(ye).toLowerCase()}function G(){const Y=this.stack[this.stack.length-1],ye=this.resume(),pe=this.stack[this.stack.length-1];if(this.data.inReference=!0,pe.type==="link"){const me=Y.children;pe.children=me}else pe.alt=ye}function z(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.url=Y}function le(){const Y=this.resume(),ye=this.stack[this.stack.length-1];ye.title=Y}function je(){this.data.inReference=void 0}function K(){this.data.referenceType="collapsed"}function Oe(Y){const ye=this.resume(),pe=this.stack[this.stack.length-1];pe.label=ye,pe.identifier=Po(this.sliceSerialize(Y)).toLowerCase(),this.data.referenceType="full"}function Ye(Y){this.data.characterReferenceType=Y.type}function Me(Y){const ye=this.sliceSerialize(Y),pe=this.data.characterReferenceType;let me;pe?(me=uq(ye,pe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):me=QO(ye);const Ne=this.stack[this.stack.length-1];Ne.value+=me}function Ie(Y){const ye=this.stack.pop();ye.position.end=$u(Y.end)}function be(Y){$.call(this,Y);const ye=this.stack[this.stack.length-1];ye.url=this.sliceSerialize(Y)}function re(Y){$.call(this,Y);const ye=this.stack[this.stack.length-1];ye.url="mailto:"+this.sliceSerialize(Y)}function ve(){return{type:"blockquote",children:[]}}function ce(){return{type:"code",lang:null,meta:null,value:""}}function fe(){return{type:"inlineCode",value:""}}function se(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Q(){return{type:"emphasis",children:[]}}function ie(){return{type:"heading",depth:0,children:[]}}function ge(){return{type:"break"}}function ee(){return{type:"html",value:""}}function we(){return{type:"image",title:null,url:"",alt:null}}function Ue(){return{type:"link",title:null,url:"",children:[]}}function Ge(Y){return{type:"list",ordered:Y.type==="listOrdered",start:null,spread:Y._spread,children:[]}}function Le(Y){return{type:"listItem",spread:Y._spread,checked:null,children:[]}}function oe(){return{type:"paragraph",children:[]}}function _e(){return{type:"strong",children:[]}}function $e(){return{type:"text",value:""}}function ze(){return{type:"thematicBreak"}}}function $u(t){return{line:t.line,column:t.column,offset:t.offset}}function jq(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?jq(t,i):Yte(t,i)}}function Yte(t,e){let n;for(n in e)if(bq.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function QI(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+gv({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+gv({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+gv({start:e.start,end:e.end})+") is still open")}function Kte(t){const e=this;e.parser=n;function n(i){return Gte(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Qte(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function Xte(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Jte(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let a={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function Zte(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ene(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function tne(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),a=Rg(i.toLowerCase()),s=t.footnoteOrder.indexOf(i);let o,l=t.footnoteCounts.get(i);l===void 0?(l=0,t.footnoteOrder.push(i),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(i,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,d),t.applyData(e,d)}function nne(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function rne(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function wq(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const a=t.all(e),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=i:a.push({type:"text",value:i}),a}function ine(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return wq(t,e);const a={src:Rg(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(a.title=i.title);const s={type:"element",tagName:"img",properties:a,children:[]};return t.patch(e,s),t.applyData(e,s)}function ane(t,e){const n={src:Rg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function sne(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function one(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return wq(t,e);const a={href:Rg(i.url||"")};i.title!==null&&i.title!==void 0&&(a.title=i.title);const s={type:"element",tagName:"a",properties:a,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function lne(t,e){const n={href:Rg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function cne(t,e,n){const i=t.all(e),a=n?une(n):Sq(e),s={},o=[];if(typeof e.checked=="boolean"){const f=i[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},i.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<i.length;){const f=i[l];(a||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?o.push(...f.children):o.push(f)}const c=i[i.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,d),t.applyData(e,d)}function une(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=Sq(n[i])}return e}function Sq(t){const e=t.spread;return e??t.children.length>1}function dne(t,e){const n={},i=t.all(e);let a=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++a<i.length;){const o=i[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function hne(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function fne(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function pne(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mne(t,e){const n=t.all(e),i=n.shift(),a=[];if(i){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=HO(e.children[1]),c=nq(e.children[e.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(a,!0)};return t.patch(e,s),t.applyData(e,s)}function gne(t,e,n){const i=n?n.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let c=-1;const d=[];for(;++c<l;){const p=e.children[c],y={},x=o?o[c]:void 0;x&&(y.align=x);let v={type:"element",tagName:s,properties:y,children:[]};p&&(v.children=t.all(p),t.patch(p,v),v=t.applyData(p,v)),d.push(v)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,f),t.applyData(e,f)}function yne(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const XI=9,JI=32;function xne(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),a=0;const s=[];for(;i;)s.push(ZI(e.slice(a,i.index),a>0,!0),i[0]),a=i.index+i[0].length,i=n.exec(e);return s.push(ZI(e.slice(a),a>0,!1)),s.join("")}function ZI(t,e,n){let i=0,a=t.length;if(e){let s=t.codePointAt(i);for(;s===XI||s===JI;)i++,s=t.codePointAt(i)}if(n){let s=t.codePointAt(a-1);for(;s===XI||s===JI;)a--,s=t.codePointAt(a-1)}return a>i?t.slice(i,a):""}function vne(t,e){const n={type:"text",value:xne(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function bne(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const jne={blockquote:Qte,break:Xte,code:Jte,delete:Zte,emphasis:ene,footnoteReference:tne,heading:nne,html:rne,imageReference:ine,image:ane,inlineCode:sne,linkReference:one,link:lne,listItem:cne,list:dne,paragraph:hne,root:fne,strong:pne,table:mne,tableCell:yne,tableRow:gne,text:vne,thematicBreak:bne,toml:pj,yaml:pj,definition:pj,footnoteDefinition:pj};function pj(){}const Nq=-1,zS=0,xv=1,mw=2,JO=3,ZO=4,eD=5,tD=6,_q=7,Cq=8,eR=typeof self=="object"?self:globalThis,wne=(t,e)=>{const n=(a,s)=>(t.set(s,a),a),i=a=>{if(t.has(a))return t.get(a);const[s,o]=e[a];switch(s){case zS:case Nq:return n(o,a);case xv:{const l=n([],a);for(const c of o)l.push(i(c));return l}case mw:{const l=n({},a);for(const[c,d]of o)l[i(c)]=i(d);return l}case JO:return n(new Date(o),a);case ZO:{const{source:l,flags:c}=o;return n(new RegExp(l,c),a)}case eD:{const l=n(new Map,a);for(const[c,d]of o)l.set(i(c),i(d));return l}case tD:{const l=n(new Set,a);for(const c of o)l.add(i(c));return l}case _q:{const{name:l,message:c}=o;return n(new eR[l](c),a)}case Cq:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new eR[s](o),a)};return i},tR=t=>wne(new Map,t)(0),fm="",{toString:Sne}={},{keys:Nne}=Object,Hx=t=>{const e=typeof t;if(e!=="object"||!t)return[zS,e];const n=Sne.call(t).slice(8,-1);switch(n){case"Array":return[xv,fm];case"Object":return[mw,fm];case"Date":return[JO,fm];case"RegExp":return[ZO,fm];case"Map":return[eD,fm];case"Set":return[tD,fm];case"DataView":return[xv,n]}return n.includes("Array")?[xv,n]:n.includes("Error")?[_q,n]:[mw,n]},mj=([t,e])=>t===zS&&(e==="function"||e==="symbol"),_ne=(t,e,n,i)=>{const a=(o,l)=>{const c=i.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=Hx(o);switch(l){case zS:{let f=o;switch(c){case"bigint":l=Cq,f=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return a([Nq],o)}return a([l,f],o)}case xv:{if(c){let y=o;return c==="DataView"?y=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(y=new Uint8Array(o)),a([c,[...y]],o)}const f=[],p=a([l,f],o);for(const y of o)f.push(s(y));return p}case mw:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],p=a([l,f],o);for(const y of Nne(o))(t||!mj(Hx(o[y])))&&f.push([s(y),s(o[y])]);return p}case JO:return a([l,o.toISOString()],o);case ZO:{const{source:f,flags:p}=o;return a([l,{source:f,flags:p}],o)}case eD:{const f=[],p=a([l,f],o);for(const[y,x]of o)(t||!(mj(Hx(y))||mj(Hx(x))))&&f.push([s(y),s(x)]);return p}case tD:{const f=[],p=a([l,f],o);for(const y of o)(t||!mj(Hx(y)))&&f.push(s(y));return p}}const{message:d}=o;return a([l,{name:c,message:d}],o)};return s},nR=(t,{json:e,lossy:n}={})=>{const i=[];return _ne(!(e||n),!!e,new Map,i)(t),i},gw=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?tR(nR(t,e)):structuredClone(t):(t,e)=>tR(nR(t,e));function Cne(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Tne(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function kne(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Cne,i=t.options.footnoteBackLabel||Tne,a=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[c]);if(!d)continue;const f=t.all(d),p=String(d.identifier).toUpperCase(),y=Rg(p.toLowerCase());let x=0;const v=[],S=t.footnoteCounts.get(p);for(;S!==void 0&&++x<=S;){v.length>0&&v.push({type:"text",value:" "});let T=typeof n=="string"?n:n(c,x);typeof T=="string"&&(T={type:"text",value:T}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+y+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,x),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const N=f[f.length-1];if(N&&N.type==="element"&&N.tagName==="p"){const T=N.children[N.children.length-1];T&&T.type==="text"?T.value+=" ":N.children.push({type:"text",value:" "}),N.children.push(...v)}else f.push(...v);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+y},children:t.wrap(f,!0)};t.patch(d,_),l.push(_)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...gw(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const qS=function(t){if(t==null)return One;if(typeof t=="function")return US(t);if(typeof t=="object")return Array.isArray(t)?Ane(t):Ene(t);if(typeof t=="string")return Pne(t);throw new Error("Expected function, string, or object as test")};function Ane(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=qS(t[n]);return US(i);function i(...a){let s=-1;for(;++s<e.length;)if(e[s].apply(this,a))return!0;return!1}}function Ene(t){const e=t;return US(n);function n(i){const a=i;let s;for(s in t)if(a[s]!==e[s])return!1;return!0}}function Pne(t){return US(e);function e(n){return n&&n.type===t}}function US(t){return e;function e(n,i,a){return!!(Dne(n)&&t.call(this,n,typeof i=="number"?i:void 0,a||void 0))}}function One(){return!0}function Dne(t){return t!==null&&typeof t=="object"&&"type"in t}const Tq=[],Mne=!0,CE=!1,Ine="skip";function kq(t,e,n,i){let a;typeof e=="function"&&typeof n!="function"?(i=n,n=e):a=e;const s=qS(a),o=i?-1:1;l(t,void 0,[])();function l(c,d,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const x=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(c.type+(x?"<"+x+">":""))+")"})}return y;function y(){let x=Tq,v,S,N;if((!e||s(c,d,f[f.length-1]||void 0))&&(x=Rne(n(c,f)),x[0]===CE))return x;if("children"in c&&c.children){const _=c;if(_.children&&x[0]!==Ine)for(S=(i?_.children.length:-1)+o,N=f.concat(_);S>-1&&S<_.children.length;){const T=_.children[S];if(v=l(T,S,N)(),v[0]===CE)return v;S=typeof v[1]=="number"?v[1]:S+o}}return x}}}function Rne(t){return Array.isArray(t)?t:typeof t=="number"?[Mne,t]:t==null?Tq:[t]}function nD(t,e,n,i){let a,s,o;typeof e=="function"?(s=void 0,o=e,a=n):(s=e,o=n,a=i),kq(t,s,l,a);function l(c,d){const f=d[d.length-1],p=f?f.children.indexOf(c):void 0;return o(c,p,f)}}const TE={}.hasOwnProperty,Lne={};function Fne(t,e){const n=e||Lne,i=new Map,a=new Map,s=new Map,o={...jne,...n.handlers},l={all:d,applyData:Bne,definitionById:i,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:$ne,wrap:qne};return nD(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?i:a,y=String(f.identifier).toUpperCase();p.has(y)||p.set(y,f)}}),l;function c(f,p){const y=f.type,x=l.handlers[y];if(TE.call(l.handlers,y)&&x)return x(l,f,p);if(l.options.passThrough&&l.options.passThrough.includes(y)){if("children"in f){const{children:S,...N}=f,_=gw(N);return _.children=l.all(f),_}return gw(f)}return(l.options.unknownHandler||zne)(l,f,p)}function d(f){const p=[];if("children"in f){const y=f.children;let x=-1;for(;++x<y.length;){const v=l.one(y[x],f);if(v){if(x&&y[x-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=rR(v.value)),!Array.isArray(v)&&v.type==="element")){const S=v.children[0];S&&S.type==="text"&&(S.value=rR(S.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function $ne(t,e){t.position&&(e.position=TZ(t))}function Bne(t,e){let n=e;if(t&&t.data){const i=t.data.hName,a=t.data.hChildren,s=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const o="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,gw(s)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function zne(t,e){const n=e.data||{},i="value"in e&&!(TE.call(n,"hProperties")||TE.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function qne(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function rR(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function iR(t,e){const n=Fne(t,e),i=n.one(t,void 0),a=kne(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function Une(t,e){return t&&"run"in t?async function(n,i){const a=iR(n,{file:i,...e});await t.run(a,i)}:function(n,i){return iR(n,{file:i,...t||e})}}function aR(t){if(t)throw t}var oC,sR;function Vne(){if(sR)return oC;sR=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var f=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!f&&!p)return!1;var y;for(y in d);return typeof y>"u"||t.call(d,y)},o=function(d,f){n&&f.name==="__proto__"?n(d,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):d[f.name]=f.newValue},l=function(d,f){if(f==="__proto__")if(t.call(d,f)){if(i)return i(d,f).value}else return;return d[f]};return oC=function c(){var d,f,p,y,x,v,S=arguments[0],N=1,_=arguments.length,T=!1;for(typeof S=="boolean"&&(T=S,S=arguments[1]||{},N=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});N<_;++N)if(d=arguments[N],d!=null)for(f in d)p=l(S,f),y=l(d,f),S!==y&&(T&&y&&(s(y)||(x=a(y)))?(x?(x=!1,v=p&&a(p)?p:[]):v=p&&s(p)?p:{},o(S,{name:f,newValue:c(T,v,y)})):typeof y<"u"&&o(S,{name:f,newValue:y}));return S},oC}var Hne=Vne();const lC=Bn(Hne);function kE(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Gne(){const t=[],e={run:n,use:i};return e;function n(...a){let s=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...d){const f=t[++s];let p=-1;if(c){o(c);return}for(;++p<a.length;)(d[p]===null||d[p]===void 0)&&(d[p]=a[p]);a=d,f?Wne(f,l)(...d):o(null,...d)}}function i(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return t.push(a),e}}function Wne(t,e){let n;return i;function i(...o){const l=t.length>o.length;let c;l&&o.push(a);try{c=t.apply(this,o)}catch(d){const f=d;if(l&&n)throw f;return a(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,a):c instanceof Error?a(c):s(c))}function a(o,...l){n||(n=!0,e(o,...l))}function s(o){a(null,o)}}const gl={basename:Yne,dirname:Kne,extname:Qne,join:Xne,sep:"/"};function Yne(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ob(t);let n=0,i=-1,a=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;a--;)if(t.codePointAt(a)===47){if(s){n=a+1;break}}else i<0&&(s=!0,i=a+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let o=-1,l=e.length-1;for(;a--;)if(t.codePointAt(a)===47){if(s){n=a+1;break}}else o<0&&(s=!0,o=a+1),l>-1&&(t.codePointAt(a)===e.codePointAt(l--)?l<0&&(i=a):(l=-1,i=o));return n===i?i=o:i<0&&(i=t.length),t.slice(n,i)}function Kne(t){if(Ob(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Qne(t){Ob(t);let e=t.length,n=-1,i=0,a=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){i=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?a<0?a=e:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||n<0||s===0||s===1&&a===n-1&&a===i+1?"":t.slice(a,n)}function Xne(...t){let e=-1,n;for(;++e<t.length;)Ob(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Jne(n)}function Jne(t){Ob(t);const e=t.codePointAt(0)===47;let n=Zne(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Zne(t,e){let n="",i=0,a=-1,s=0,o=-1,l,c;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||s===1))if(a!==o-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",i=0):(n=n.slice(0,c),i=n.length-1-n.lastIndexOf("/")),a=o,s=0;continue}}else if(n.length>0){n="",i=0,a=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(a+1,o):n=t.slice(a+1,o),i=o-a-1;a=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Ob(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const ere={cwd:tre};function tre(){return"/"}function AE(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function nre(t){if(typeof t=="string")t=new URL(t);else if(!AE(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return rre(t)}function rre(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(e)}const cC=["history","path","basename","stem","extname","dirname"];class Aq{constructor(e){let n;e?AE(e)?n={path:e}:typeof e=="string"||ire(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":ere.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<cC.length;){const s=cC[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let a;for(a in n)cC.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?gl.basename(this.path):void 0}set basename(e){dC(e,"basename"),uC(e,"basename"),this.path=gl.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?gl.dirname(this.path):void 0}set dirname(e){oR(this.basename,"dirname"),this.path=gl.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?gl.extname(this.path):void 0}set extname(e){if(uC(e,"extname"),oR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=gl.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){AE(e)&&(e=nre(e)),dC(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?gl.basename(this.path,this.extname):void 0}set stem(e){dC(e,"stem"),uC(e,"stem"),this.path=gl.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const a=this.message(e,n,i);throw a.fatal=!0,a}info(e,n,i){const a=this.message(e,n,i);return a.fatal=void 0,a}message(e,n,i){const a=new da(e,n,i);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function uC(t,e){if(t&&t.includes(gl.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+gl.sep+"`")}function dC(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function oR(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function ire(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const are=function(t){const i=this.constructor.prototype,a=i[t],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},sre={}.hasOwnProperty;class rD extends are{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Gne()}copy(){const e=new rD;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(lC(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(pC("data",this.frozen),this.namespace[e]=n,this):sre.call(this.namespace,e)&&this.namespace[e]||void 0:e?(pC("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const a=n.call(e,...i);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=gj(e),i=this.parser||this.Parser;return hC("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),hC("process",this.parser||this.Parser),fC("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(s,o){const l=gj(e),c=i.parse(l);i.run(c,l,function(f,p,y){if(f||!p||!y)return d(f);const x=p,v=i.stringify(x,y);cre(v)?y.value=v:y.result=v,d(f,y)});function d(f,p){f||!p?o(f):s?s(p):n(void 0,p)}}}processSync(e){let n=!1,i;return this.freeze(),hC("processSync",this.parser||this.Parser),fC("processSync",this.compiler||this.Compiler),this.process(e,a),cR("processSync","process",n),i;function a(s,o){n=!0,aR(s),i=o}}run(e,n,i){lR(e),this.freeze();const a=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(o,l){const c=gj(n);a.run(e,c,d);function d(f,p,y){const x=p||e;f?l(f):o?o(x):i(void 0,x,y)}}}runSync(e,n){let i=!1,a;return this.run(e,n,s),cR("runSync","run",i),a;function s(o,l){aR(o),a=l,i=!0}}stringify(e,n){this.freeze();const i=gj(n),a=this.compiler||this.Compiler;return fC("stringify",a),lR(e),a(e,i)}use(e,...n){const i=this.attachers,a=this.namespace;if(pC("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[f,...p]=d;c(f,p)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(a.settings=lC(!0,a.settings,d.settings))}function l(d){let f=-1;if(d!=null)if(Array.isArray(d))for(;++f<d.length;){const p=d[f];s(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,f){let p=-1,y=-1;for(;++p<i.length;)if(i[p][0]===d){y=p;break}if(y===-1)i.push([d,...f]);else if(f.length>0){let[x,...v]=f;const S=i[y][1];kE(S)&&kE(x)&&(x=lC(!0,S,x)),i[y]=[d,x,...v]}}}}const ore=new rD().freeze();function hC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function fC(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function pC(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function lR(t){if(!kE(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function cR(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function gj(t){return lre(t)?t:new Aq(t)}function lre(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function cre(t){return typeof t=="string"||ure(t)}function ure(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const dre="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",uR=[],dR={allowDangerousHtml:!0},hre=/^(https?|ircs?|mailto|xmpp)$/i,fre=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function vf(t){const e=pre(t),n=mre(t);return gre(e.runSync(e.parse(n),n),t)}function pre(t){const e=t.rehypePlugins||uR,n=t.remarkPlugins||uR,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...dR}:dR;return ore().use(Kte).use(n).use(Une,i).use(e)}function mre(t){const e=t.children||"",n=new Aq;return typeof e=="string"&&(n.value=e),n}function gre(t,e){const n=e.allowedElements,i=e.allowElement,a=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||yre;for(const f of fre)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+dre+f.id,void 0);return nD(t,d),OZ(t,{Fragment:r.Fragment,components:a,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function d(f,p,y){if(f.type==="raw"&&y&&typeof p=="number")return o?y.children.splice(p,1):y.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let x;for(x in iC)if(Object.hasOwn(iC,x)&&Object.hasOwn(f.properties,x)){const v=f.properties[x],S=iC[x];(S===null||S.includes(f.tagName))&&(f.properties[x]=c(String(v||""),x,f))}}if(f.type==="element"){let x=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!x&&i&&typeof p=="number"&&(x=!i(f,p,y)),x&&y&&typeof p=="number")return l&&f.children?y.children.splice(p,1,...f.children):y.children.splice(p,1),p}}}function yre(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),a=t.indexOf("/");return e===-1||a!==-1&&e>a||n!==-1&&e>n||i!==-1&&e>i||hre.test(t.slice(0,e))?t:""}function hR(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,a=n.indexOf(e);for(;a!==-1;)i++,a=n.indexOf(e,a+e.length);return i}function xre(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function vre(t,e,n){const a=qS((n||{}).ignore||[]),s=bre(e);let o=-1;for(;++o<s.length;)kq(t,"text",l);function l(d,f){let p=-1,y;for(;++p<f.length;){const x=f[p],v=y?y.children:void 0;if(a(x,v?v.indexOf(x):void 0,y))return;y=x}if(y)return c(d,f)}function c(d,f){const p=f[f.length-1],y=s[o][0],x=s[o][1];let v=0;const N=p.children.indexOf(d);let _=!1,T=[];y.lastIndex=0;let C=y.exec(d.value);for(;C;){const O=C.index,k={index:C.index,input:C.input,stack:[...f,d]};let P=x(...C,k);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?y.lastIndex=O+1:(v!==O&&T.push({type:"text",value:d.value.slice(v,O)}),Array.isArray(P)?T.push(...P):P&&T.push(P),v=O+C[0].length,_=!0),!y.global)break;C=y.exec(d.value)}return _?(v<d.value.length&&T.push({type:"text",value:d.value.slice(v)}),p.children.splice(N,1,...T)):T=[d],N+T.length}}function bre(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const a=n[i];e.push([jre(a[0]),wre(a[1])])}return e}function jre(t){return typeof t=="string"?new RegExp(xre(t),"g"):t}function wre(t){return typeof t=="function"?t:function(){return t}}const mC="phrasing",gC=["autolink","link","image","label"];function Sre(){return{transforms:[Ere],enter:{literalAutolink:_re,literalAutolinkEmail:yC,literalAutolinkHttp:yC,literalAutolinkWww:yC},exit:{literalAutolink:Are,literalAutolinkEmail:kre,literalAutolinkHttp:Cre,literalAutolinkWww:Tre}}}function Nre(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:mC,notInConstruct:gC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:mC,notInConstruct:gC},{character:":",before:"[ps]",after:"\\/",inConstruct:mC,notInConstruct:gC}]}}function _re(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function yC(t){this.config.enter.autolinkProtocol.call(this,t)}function Cre(t){this.config.exit.autolinkProtocol.call(this,t)}function Tre(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function kre(t){this.config.exit.autolinkEmail.call(this,t)}function Are(t){this.exit(t)}function Ere(t){vre(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Pre],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Ore]],{ignore:["link","linkReference"]})}function Pre(t,e,n,i,a){let s="";if(!Eq(a)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!Dre(n)))return!1;const o=Mre(n+i);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function Ore(t,e,n,i){return!Eq(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Dre(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Mre(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const a=hR(t,"(");let s=hR(t,")");for(;i!==-1&&a>s;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[t,n]}function Eq(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||xf(n)||$S(n))&&(!e||n!==47)}Pq.peek=Ure;function Ire(){this.buffer()}function Rre(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Lre(){this.buffer()}function Fre(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function $re(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Po(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Bre(t){this.exit(t)}function zre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Po(this.sliceSerialize(t)).toLowerCase(),n.label=e}function qre(t){this.exit(t)}function Ure(){return"["}function Pq(t,e,n,i){const a=n.createTracker(i);let s=a.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=a.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=a.move("]"),s}function Vre(){return{enter:{gfmFootnoteCallString:Ire,gfmFootnoteCall:Rre,gfmFootnoteDefinitionLabelString:Lre,gfmFootnoteDefinition:Fre},exit:{gfmFootnoteCallString:$re,gfmFootnoteCall:Bre,gfmFootnoteDefinitionLabelString:zre,gfmFootnoteDefinition:qre}}}function Hre(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Pq},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,a,s,o){const l=s.createTracker(o);let c=l.move("[^");const d=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(i),{before:c,after:"]"})),f(),c+=l.move("]:"),i.children&&i.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(i,l.current()),e?Oq:Gre))),d(),c}}function Gre(t,e,n){return e===0?t:Oq(t,e,n)}function Oq(t,e,n){return(n?"":"    ")+t}const Wre=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Dq.peek=Jre;function Yre(){return{canContainEols:["delete"],enter:{strikethrough:Qre},exit:{strikethrough:Xre}}}function Kre(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Wre}],handlers:{delete:Dq}}}function Qre(t){this.enter({type:"delete",children:[]},t)}function Xre(t){this.exit(t)}function Dq(t,e,n,i){const a=n.createTracker(i),s=n.enter("strikethrough");let o=a.move("~~");return o+=n.containerPhrasing(t,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),s(),o}function Jre(){return"~"}function Zre(t){return t.length}function eie(t,e){const n=e||{},i=(n.align||[]).concat(),a=n.stringLength||Zre,s=[],o=[],l=[],c=[];let d=0,f=-1;for(;++f<t.length;){const S=[],N=[];let _=-1;for(t[f].length>d&&(d=t[f].length);++_<t[f].length;){const T=tie(t[f][_]);if(n.alignDelimiters!==!1){const C=a(T);N[_]=C,(c[_]===void 0||C>c[_])&&(c[_]=C)}S.push(T)}o[f]=S,l[f]=N}let p=-1;if(typeof i=="object"&&"length"in i)for(;++p<d;)s[p]=fR(i[p]);else{const S=fR(i);for(;++p<d;)s[p]=S}p=-1;const y=[],x=[];for(;++p<d;){const S=s[p];let N="",_="";S===99?(N=":",_=":"):S===108?N=":":S===114&&(_=":");let T=n.alignDelimiters===!1?1:Math.max(1,c[p]-N.length-_.length);const C=N+"-".repeat(T)+_;n.alignDelimiters!==!1&&(T=N.length+T+_.length,T>c[p]&&(c[p]=T),x[p]=T),y[p]=C}o.splice(1,0,y),l.splice(1,0,x),f=-1;const v=[];for(;++f<o.length;){const S=o[f],N=l[f];p=-1;const _=[];for(;++p<d;){const T=S[p]||"";let C="",O="";if(n.alignDelimiters!==!1){const k=c[p]-(N[p]||0),P=s[p];P===114?C=" ".repeat(k):P===99?k%2?(C=" ".repeat(k/2+.5),O=" ".repeat(k/2-.5)):(C=" ".repeat(k/2),O=C):O=" ".repeat(k)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(C),_.push(T),n.alignDelimiters!==!1&&_.push(O),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&_.push("|")}v.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return v.join(`
`)}function tie(t){return t==null?"":String(t)}function fR(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function nie(t,e,n,i){const a=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),rie);return a(),o}function rie(t,e,n){return">"+(n?"":" ")+t}function iie(t,e){return pR(t,e.inConstruct,!0)&&!pR(t,e.notInConstruct,!1)}function pR(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function mR(t,e,n,i){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&iie(n.stack,n.unsafe[a]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function aie(t,e){const n=String(t);let i=n.indexOf(e),a=i,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===a?++s>o&&(o=s):s=1,a=i+e.length,i=n.indexOf(e,a);return o}function sie(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function oie(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function lie(t,e,n,i){const a=oie(n),s=t.value||"",o=a==="`"?"GraveAccent":"Tilde";if(sie(t,n)){const p=n.enter("codeIndented"),y=n.indentLines(s,cie);return p(),y}const l=n.createTracker(i),c=a.repeat(Math.max(aie(s,a)+1,3)),d=n.enter("codeFenced");let f=l.move(c);if(t.lang){const p=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...l.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...l.current()})),p()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),d(),f}function cie(t,e,n){return(n?"":"    ")+t}function iD(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function uie(t,e,n,i){const a=iD(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(i);let d=c.move("[");return d+=c.move(n.safe(n.associationId(t),{before:d,after:"]",...c.current()})),d+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+a),d+=c.move(n.safe(t.title,{before:d,after:a,...c.current()})),d+=c.move(a),l()),o(),d}function die(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Pv(t){return"&#x"+t.toString(16).toUpperCase()+";"}function yw(t,e,n){const i=tg(t),a=tg(e);return i===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Mq.peek=hie;function Mq(t,e,n,i){const a=die(n),s=n.enter("emphasis"),o=n.createTracker(i),l=o.move(a);let c=o.move(n.containerPhrasing(t,{after:a,before:l,...o.current()}));const d=c.charCodeAt(0),f=yw(i.before.charCodeAt(i.before.length-1),d,a);f.inside&&(c=Pv(d)+c.slice(1));const p=c.charCodeAt(c.length-1),y=yw(i.after.charCodeAt(0),p,a);y.inside&&(c=c.slice(0,-1)+Pv(p));const x=o.move(a);return s(),n.attentionEncodeSurroundingInfo={after:y.outside,before:f.outside},l+c+x}function hie(t,e,n){return n.options.emphasis||"*"}function fie(t,e){let n=!1;return nD(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,CE}),!!((!t.depth||t.depth<3)&&KO(t)&&(e.options.setext||n))}function pie(t,e,n,i){const a=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(i);if(fie(t,n)){const f=n.enter("headingSetext"),p=n.enter("phrasing"),y=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return p(),f(),y+`
`+(a===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(d)&&(d=Pv(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,n.options.closeAtx&&(d+=" "+o),c(),l(),d}Iq.peek=mie;function Iq(t){return t.value||""}function mie(){return"<"}Rq.peek=gie;function Rq(t,e,n,i){const a=iD(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(i);let d=c.move("![");return d+=c.move(n.safe(t.alt,{before:d,after:"]",...c.current()})),d+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(t.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(t.url,{before:d,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),d+=c.move(" "+a),d+=c.move(n.safe(t.title,{before:d,after:a,...c.current()})),d+=c.move(a),l()),d+=c.move(")"),o(),d}function gie(){return"!"}Lq.peek=yie;function Lq(t,e,n,i){const a=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(i);let c=l.move("![");const d=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!d||d!==p?c+=l.move(p+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function yie(){return"!"}Fq.peek=xie;function Fq(t,e,n){let i=t.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(i);)a+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(i);){let d=c.index;i.charCodeAt(d)===10&&i.charCodeAt(d-1)===13&&d--,i=i.slice(0,d)+" "+i.slice(c.index+1)}}return a+i+a}function xie(){return"`"}function $q(t,e){const n=KO(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Bq.peek=vie;function Bq(t,e,n,i){const a=iD(n),s=a==='"'?"Quote":"Apostrophe",o=n.createTracker(i);let l,c;if($q(t,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let p=o.move("<");return p+=o.move(n.containerPhrasing(t,{before:p,after:">",...o.current()})),p+=o.move(">"),l(),n.stack=f,p}l=n.enter("link"),c=n.enter("label");let d=o.move("[");return d+=o.move(n.containerPhrasing(t,{before:d,after:"](",...o.current()})),d+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(n.safe(t.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(c=n.enter("destinationRaw"),d+=o.move(n.safe(t.url,{before:d,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),d+=o.move(" "+a),d+=o.move(n.safe(t.title,{before:d,after:a,...o.current()})),d+=o.move(a),c()),d+=o.move(")"),l(),d}function vie(t,e,n){return $q(t,n)?"<":"["}zq.peek=bie;function zq(t,e,n,i){const a=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(i);let c=l.move("[");const d=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!d||d!==p?c+=l.move(p+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function bie(){return"["}function aD(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function jie(t){const e=aD(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function wie(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function qq(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Sie(t,e,n,i){const a=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?wie(n):aD(n);const l=t.ordered?o==="."?")":".":jie(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),qq(n)===o&&f){let p=-1;for(;++p<t.children.length;){const y=t.children[p];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const d=n.containerFlow(t,i);return n.bulletLastUsed=o,n.bulletCurrent=s,a(),d}function Nie(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function _ie(t,e,n,i){const a=Nie(n);let s=n.bulletCurrent||aD(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(a==="tab"||a==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(i);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,l.current()),f);return c(),d;function f(p,y,x){return y?(x?"":" ".repeat(o))+p:(x?s:s+" ".repeat(o-s.length))+p}}function Cie(t,e,n,i){const a=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,i);return s(),a(),o}const Tie=qS(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function kie(t,e,n,i){return(t.children.some(function(o){return Tie(o)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function Aie(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Uq.peek=Eie;function Uq(t,e,n,i){const a=Aie(n),s=n.enter("strong"),o=n.createTracker(i),l=o.move(a+a);let c=o.move(n.containerPhrasing(t,{after:a,before:l,...o.current()}));const d=c.charCodeAt(0),f=yw(i.before.charCodeAt(i.before.length-1),d,a);f.inside&&(c=Pv(d)+c.slice(1));const p=c.charCodeAt(c.length-1),y=yw(i.after.charCodeAt(0),p,a);y.inside&&(c=c.slice(0,-1)+Pv(p));const x=o.move(a+a);return s(),n.attentionEncodeSurroundingInfo={after:y.outside,before:f.outside},l+c+x}function Eie(t,e,n){return n.options.strong||"*"}function Pie(t,e,n,i){return n.safe(t.value,i)}function Oie(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Die(t,e,n){const i=(qq(n)+(n.options.ruleSpaces?" ":"")).repeat(Oie(n));return n.options.ruleSpaces?i.slice(0,-1):i}const Vq={blockquote:nie,break:mR,code:lie,definition:uie,emphasis:Mq,hardBreak:mR,heading:pie,html:Iq,image:Rq,imageReference:Lq,inlineCode:Fq,link:Bq,linkReference:zq,list:Sie,listItem:_ie,paragraph:Cie,root:kie,strong:Uq,text:Pie,thematicBreak:Die};function Mie(){return{enter:{table:Iie,tableData:gR,tableHeader:gR,tableRow:Lie},exit:{codeText:Fie,table:Rie,tableData:xC,tableHeader:xC,tableRow:xC}}}function Iie(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Rie(t){this.exit(t),this.data.inTable=void 0}function Lie(t){this.enter({type:"tableRow",children:[]},t)}function xC(t){this.exit(t)}function gR(t){this.enter({type:"tableCell",children:[]},t)}function Fie(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,$ie));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function $ie(t,e){return e==="|"?e:t}function Bie(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,a=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:o,tableCell:c,tableRow:l}};function o(x,v,S,N){return d(f(x,S,N),x.align)}function l(x,v,S,N){const _=p(x,S,N),T=d([_]);return T.slice(0,T.indexOf(`
`))}function c(x,v,S,N){const _=S.enter("tableCell"),T=S.enter("phrasing"),C=S.containerPhrasing(x,{...N,before:s,after:s});return T(),_(),C}function d(x,v){return eie(x,{align:v,alignDelimiters:i,padding:n,stringLength:a})}function f(x,v,S){const N=x.children;let _=-1;const T=[],C=v.enter("table");for(;++_<N.length;)T[_]=p(N[_],v,S);return C(),T}function p(x,v,S){const N=x.children;let _=-1;const T=[],C=v.enter("tableRow");for(;++_<N.length;)T[_]=c(N[_],x,v,S);return C(),T}function y(x,v,S){let N=Vq.inlineCode(x,v,S);return S.stack.includes("tableCell")&&(N=N.replace(/\|/g,"\\$&")),N}}function zie(){return{exit:{taskListCheckValueChecked:yR,taskListCheckValueUnchecked:yR,paragraph:Uie}}}function qie(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Vie}}}function yR(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Uie(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const a=e.children;let s=-1,o;for(;++s<a.length;){const l=a[s];if(l.type==="paragraph"){o=l;break}}o===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function Vie(t,e,n,i){const a=t.children[0],s=typeof t.checked=="boolean"&&a&&a.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(i);s&&l.move(o);let c=Vq.listItem(t,e,n,{...i,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),c;function d(f){return f+o}}function Hie(){return[Sre(),Vre(),Yre(),Mie(),zie()]}function Gie(t){return{extensions:[Nre(),Hre(t),Kre(),Bie(t),qie()]}}const Wie={tokenize:Zie,partial:!0},Hq={tokenize:eae,partial:!0},Gq={tokenize:tae,partial:!0},Wq={tokenize:nae,partial:!0},Yie={tokenize:rae,partial:!0},Yq={name:"wwwAutolink",tokenize:Xie,previous:Qq},Kq={name:"protocolAutolink",tokenize:Jie,previous:Xq},zc={name:"emailAutolink",tokenize:Qie,previous:Jq},Dl={};function Kie(){return{text:Dl}}let Lh=48;for(;Lh<123;)Dl[Lh]=zc,Lh++,Lh===58?Lh=65:Lh===91&&(Lh=97);Dl[43]=zc;Dl[45]=zc;Dl[46]=zc;Dl[95]=zc;Dl[72]=[zc,Kq];Dl[104]=[zc,Kq];Dl[87]=[zc,Yq];Dl[119]=[zc,Yq];function Qie(t,e,n){const i=this;let a,s;return o;function o(p){return!EE(p)||!Jq.call(i,i.previous)||sD(i.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(p))}function l(p){return EE(p)?(t.consume(p),l):p===64?(t.consume(p),c):n(p)}function c(p){return p===46?t.check(Yie,f,d)(p):p===45||p===95||oa(p)?(s=!0,t.consume(p),c):f(p)}function d(p){return t.consume(p),a=!0,c}function f(p){return s&&a&&Ea(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function Xie(t,e,n){const i=this;return a;function a(o){return o!==87&&o!==119||!Qq.call(i,i.previous)||sD(i.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Wie,t.attempt(Hq,t.attempt(Gq,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Jie(t,e,n){const i=this;let a="",s=!1;return o;function o(p){return(p===72||p===104)&&Xq.call(i,i.previous)&&!sD(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),a+=String.fromCodePoint(p),t.consume(p),l):n(p)}function l(p){if(Ea(p)&&a.length<5)return a+=String.fromCodePoint(p),t.consume(p),l;if(p===58){const y=a.toLowerCase();if(y==="http"||y==="https")return t.consume(p),c}return n(p)}function c(p){return p===47?(t.consume(p),s?d:(s=!0,c)):n(p)}function d(p){return p===null||pw(p)||_r(p)||xf(p)||$S(p)?n(p):t.attempt(Hq,t.attempt(Gq,f),n)(p)}function f(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function Zie(t,e,n){let i=0;return a;function a(o){return(o===87||o===119)&&i<3?(i++,t.consume(o),a):o===46&&i===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function eae(t,e,n){let i,a,s;return o;function o(d){return d===46||d===95?t.check(Wq,c,l)(d):d===null||_r(d)||xf(d)||d!==45&&$S(d)?c(d):(s=!0,t.consume(d),o)}function l(d){return d===95?i=!0:(a=i,i=void 0),t.consume(d),o}function c(d){return a||i||!s?n(d):e(d)}}function tae(t,e){let n=0,i=0;return a;function a(o){return o===40?(n++,t.consume(o),a):o===41&&i<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Wq,e,s)(o):o===null||_r(o)||xf(o)?e(o):(t.consume(o),a)}function s(o){return o===41&&i++,t.consume(o),a}}function nae(t,e,n){return i;function i(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),i):l===38?(t.consume(l),s):l===93?(t.consume(l),a):l===60||l===null||_r(l)||xf(l)?e(l):n(l)}function a(l){return l===null||l===40||l===91||_r(l)||xf(l)?e(l):i(l)}function s(l){return Ea(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),i):Ea(l)?(t.consume(l),o):n(l)}}function rae(t,e,n){return i;function i(s){return t.consume(s),a}function a(s){return oa(s)?n(s):e(s)}}function Qq(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||_r(t)}function Xq(t){return!Ea(t)}function Jq(t){return!(t===47||EE(t))}function EE(t){return t===43||t===45||t===46||t===95||oa(t)}function sD(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const iae={tokenize:hae,partial:!0};function aae(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:cae,continuation:{tokenize:uae},exit:dae}},text:{91:{name:"gfmFootnoteCall",tokenize:lae},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:sae,resolveTo:oae}}}}function sae(t,e,n){const i=this;let a=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o;for(;a--;){const c=i.events[a][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const d=Po(i.sliceSerialize({start:o.end,end:i.now()}));return d.codePointAt(0)!==94||!s.includes(d.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function oae(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",a,e],["exit",a,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...l),t}function lae(t,e,n){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,o;return l;function l(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(s>999||p===93&&!o||p===null||p===91||_r(p))return n(p);if(p===93){t.exit("chunkString");const y=t.exit("gfmFootnoteCallString");return a.includes(Po(i.sliceSerialize(y)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return _r(p)||(o=!0),s++,t.consume(p),p===92?f:d}function f(p){return p===91||p===92||p===93?(t.consume(p),s++,d):d(p)}}function cae(t,e,n){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(v)}function f(v){if(o>999||v===93&&!l||v===null||v===91||_r(v))return n(v);if(v===93){t.exit("chunkString");const S=t.exit("gfmFootnoteDefinitionLabelString");return s=Po(i.sliceSerialize(S)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),y}return _r(v)||(l=!0),o++,t.consume(v),v===92?p:f}function p(v){return v===91||v===92||v===93?(t.consume(v),o++,f):f(v)}function y(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),a.includes(s)||a.push(s),$n(t,x,"gfmFootnoteDefinitionWhitespace")):n(v)}function x(v){return e(v)}}function uae(t,e,n){return t.check(Pb,e,t.attempt(iae,e,n))}function dae(t){t.exit("gfmFootnoteDefinition")}function hae(t,e,n){const i=this;return $n(t,a,"gfmFootnoteDefinitionIndent",5);function a(s){const o=i.events[i.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function fae(t){let n=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:a};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function a(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let d=c;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[c][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[c][1].end)},p={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[c][1].start)},y=[["enter",f,l],["enter",o[d][1],l],["exit",o[d][1],l],["enter",p,l]],x=l.parser.constructs.insideSpan.null;x&&Cs(y,y.length,0,BS(x,o.slice(d+1,c),l)),Cs(y,y.length,0,[["exit",p,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),Cs(o,d-1,c-d+3,y),c=d+y.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const d=this.previous,f=this.events;let p=0;return y;function y(v){return d===126&&f[f.length-1][1].type!=="characterEscape"?c(v):(o.enter("strikethroughSequenceTemporary"),x(v))}function x(v){const S=tg(d);if(v===126)return p>1?c(v):(o.consume(v),p++,x);if(p<2&&!n)return c(v);const N=o.exit("strikethroughSequenceTemporary"),_=tg(v);return N._open=!_||_===2&&!!S,N._close=!S||S===2&&!!_,l(v)}}}class pae{constructor(){this.map=[]}add(e,n,i){mae(this,e,n,i)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push(e.slice()),e.length=0;let a=i.pop();for(;a;){for(const s of a)e.push(s);a=i.pop()}this.map.length=0}}function mae(t,e,n,i){let a=0;if(!(n===0&&i.length===0)){for(;a<t.map.length;){if(t.map[a][0]===e){t.map[a][1]+=n,t.map[a][2].push(...i);return}a+=1}t.map.push([e,n,i])}}function gae(t,e){let n=!1;const i=[];for(;e<t.length;){const a=t[e];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function yae(){return{flow:{null:{name:"table",tokenize:xae,resolveAll:vae}}}}function xae(t,e,n){const i=this;let a=0,s=0,o;return l;function l($){let L=i.events.length-1;for(;L>-1;){const te=i.events[L][1].type;if(te==="lineEnding"||te==="linePrefix")L--;else break}const V=L>-1?i.events[L][1].type:null,H=V==="tableHead"||V==="tableRow"?P:c;return H===P&&i.parser.lazy[i.now().line]?n($):H($)}function c($){return t.enter("tableHead"),t.enter("tableRow"),d($)}function d($){return $===124||(o=!0,s+=1),f($)}function f($){return $===null?n($):Wt($)?s>1?(s=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),x):n($):En($)?$n(t,f,"whitespace")($):(s+=1,o&&(o=!1,a+=1),$===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),o=!0,f):(t.enter("data"),p($)))}function p($){return $===null||$===124||_r($)?(t.exit("data"),f($)):(t.consume($),$===92?y:p)}function y($){return $===92||$===124?(t.consume($),p):p($)}function x($){return i.interrupt=!1,i.parser.lazy[i.now().line]?n($):(t.enter("tableDelimiterRow"),o=!1,En($)?$n(t,v,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):v($))}function v($){return $===45||$===58?N($):$===124?(o=!0,t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),S):k($)}function S($){return En($)?$n(t,N,"whitespace")($):N($)}function N($){return $===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),_):$===45?(s+=1,_($)):$===null||Wt($)?O($):k($)}function _($){return $===45?(t.enter("tableDelimiterFiller"),T($)):k($)}function T($){return $===45?(t.consume($),T):$===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C($))}function C($){return En($)?$n(t,O,"whitespace")($):O($)}function O($){return $===124?v($):$===null||Wt($)?!o||a!==s?k($):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e($)):k($)}function k($){return n($)}function P($){return t.enter("tableRow"),I($)}function I($){return $===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),I):$===null||Wt($)?(t.exit("tableRow"),e($)):En($)?$n(t,I,"whitespace")($):(t.enter("data"),F($))}function F($){return $===null||$===124||_r($)?(t.exit("data"),I($)):(t.consume($),$===92?B:F)}function B($){return $===92||$===124?(t.consume($),F):F($)}}function vae(t,e){let n=-1,i=!0,a=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,d,f,p;const y=new pae;for(;++n<t.length;){const x=t[n],v=x[1];x[0]==="enter"?v.type==="tableHead"?(l=!1,c!==0&&(xR(y,e,c,d,f),f=void 0,c=0),d={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",d,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(i=!0,p=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},y.add(n,0,[["enter",f,e]])),a=v.type==="tableDelimiterRow"?2:f?3:1):a&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(i=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],p=yj(y,e,s,a,void 0,p),s=[0,0,0,0]),o[2]=n)):v.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(o[0]=o[1],p=yj(y,e,s,a,void 0,p)),s=o,o=[s[1],n,0,0])):v.type==="tableHead"?(l=!0,c=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],p=yj(y,e,s,a,n,p)):o[1]!==0&&(p=yj(y,e,o,a,n,p)),a=0):a&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&xR(y,e,c,d,f),y.consume(e.events),n=-1;++n<e.events.length;){const x=e.events[n];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=gae(e.events,n))}return t}function yj(t,e,n,i,a,s){const o=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Nm(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=Nm(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const d=Nm(e.events,n[2]),f=Nm(e.events,n[3]),p={type:l,start:Object.assign({},d),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",p,e]]),i!==2){const y=e.events[n[2]],x=e.events[n[3]];if(y[1].end=Object.assign({},x[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,S=n[3]-n[2]-1;t.add(v,S,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return a!==void 0&&(s.end=Object.assign({},Nm(e.events,a)),t.add(a,0,[["exit",s,e]]),s=void 0),s}function xR(t,e,n,i,a){const s=[],o=Nm(e.events,n);a&&(a.end=Object.assign({},o),s.push(["exit",a,e])),i.end=Object.assign({},o),s.push(["exit",i,e]),t.add(n+1,0,s)}function Nm(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const bae={name:"tasklistCheck",tokenize:wae};function jae(){return{text:{91:bae}}}function wae(t,e,n){const i=this;return a;function a(c){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return _r(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Wt(c)?e(c):En(c)?t.check({tokenize:Sae},e,n)(c):n(c)}}function Sae(t,e,n){return $n(t,i,"whitespace");function i(a){return a===null?n(a):e(a)}}function Nae(t){return cq([Kie(),aae(),fae(t),yae(),jae()])}const _ae={};function bf(t){const e=this,n=t||_ae,i=e.data(),a=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),o=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);a.push(Nae(n)),s.push(Hie()),o.push(Gie(n))}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Cae,Tae;function kae(){return{geminiUrl:Cae,vertexUrl:Tae}}function Aae(t,e,n){var i,a,s;if(!(!((i=t.httpOptions)===null||i===void 0)&&i.baseUrl)){const o=kae();return t.vertexai?(a=o.vertexUrl)!==null&&a!==void 0?a:e:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Db{}function sn(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const s=e[a];return s!=null?String(s):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function D(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];D(f,e.slice(s+1),n[d])}else for(const d of c)D(d,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];D(c[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const i=e[e.length-1],a=t[i];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function E(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in t){const s=t[a];return Array.isArray(s)?s.map(o=>E(o,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ur(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Zq(t,e){const n=Ur(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function eU(t,e){return Array.isArray(e)?e.map(n=>xw(t,n)):[xw(t,e)]}function xw(t,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Eae(t,e){const n=xw(t,e);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Pae(t,e){const n=xw(t,e);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function vR(t,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function tU(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(n=>vR(t,n)):[vR(t,e)]}function PE(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function bR(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function jR(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ts(t,e){if(e==null)throw new Error("ContentUnion is required");return PE(e)?e:{role:"user",parts:tU(t,e)}}function nU(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=ts(t,n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=ts(t,e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ts(t,n)):[ts(t,e)]}function fd(t,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(bR(e)||jR(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ts(t,e)]}const n=[],i=[],a=PE(e[0]);for(const s of e){const o=PE(s);if(o!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)n.push(s);else{if(bR(s)||jR(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(s)}}return a||n.push({role:"user",parts:tU(t,i)}),n}function rU(t,e){return e}function iU(t,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function VS(t,e){return e}function HS(t,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function Oae(t,e,n,i=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function pd(t,e){if(typeof e!="string")throw new Error("name must be a string");return Oae(t,e,"cachedContents")}function aU(t,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function md(t,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Dae(t){return t!=null&&typeof t=="object"&&"name"in t}function Mae(t){return t!=null&&typeof t=="object"&&"video"in t}function Iae(t){return t!=null&&typeof t=="object"&&"uri"in t}function sU(t,e){var n;let i;if(Dae(e)&&(i=e.name),!(Iae(e)&&(i=e.uri,i===void 0))&&!(Mae(e)&&(i=(n=e.video)===null||n===void 0?void 0:n.uri,i===void 0))){if(typeof e=="string"&&(i=e),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const s=i.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${i}`);i=s[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function oU(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function lU(t,e){for(const n of["models","tunedModels","publisherModels"])if(Rae(e,n))return e[n];return[]}function Rae(t,e){return t!==null&&typeof t=="object"&&e in t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lae(t,e){const n={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=E(e,["data"]);i!=null&&D(n,["data"],i);const a=E(e,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function Fae(t,e){const n={};if(E(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=E(e,["thought"]);i!=null&&D(n,["thought"],i);const a=E(e,["inlineData"]);a!=null&&D(n,["inlineData"],Lae(t,a));const s=E(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=E(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=E(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=E(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=E(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=E(e,["text"]);return f!=null&&D(n,["text"],f),n}function wR(t,e){const n={},i=E(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Fae(t,o))),D(n,["parts"],s)}const a=E(e,["role"]);return a!=null&&D(n,["role"],a),n}function $ae(){return{}}function Bae(t,e){const n={},i=E(e,["mode"]);i!=null&&D(n,["mode"],i);const a=E(e,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function zae(t,e){const n={},i=E(e,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],Bae(t,i)),n}function qae(t,e){const n={};if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");E(e,["googleSearch"])!=null&&D(n,["googleSearch"],$ae());const a=E(e,["googleSearchRetrieval"]);if(a!=null&&D(n,["googleSearchRetrieval"],zae(t,a)),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(E(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=E(e,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=E(e,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function Uae(t,e){const n={},i=E(e,["mode"]);i!=null&&D(n,["mode"],i);const a=E(e,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function Vae(t,e){const n={},i=E(e,["functionCallingConfig"]);if(i!=null&&D(n,["functionCallingConfig"],Uae(t,i)),E(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function Hae(t,e,n){const i={},a=E(e,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=E(e,["expireTime"]);n!==void 0&&s!=null&&D(n,["expireTime"],s);const o=E(e,["displayName"]);n!==void 0&&o!=null&&D(n,["displayName"],o);const l=E(e,["contents"]);if(n!==void 0&&l!=null){let p=fd(t,l);Array.isArray(p)&&(p=p.map(y=>wR(t,y))),D(n,["contents"],p)}const c=E(e,["systemInstruction"]);n!==void 0&&c!=null&&D(n,["systemInstruction"],wR(t,ts(t,c)));const d=E(e,["tools"]);if(n!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(y=>qae(t,y))),D(n,["tools"],p)}const f=E(e,["toolConfig"]);return n!==void 0&&f!=null&&D(n,["toolConfig"],Vae(t,f)),i}function Gae(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["model"],Zq(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],Hae(t,a,n)),n}function Wae(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["_url","name"],pd(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function Yae(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["_url","name"],pd(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function Kae(t,e,n){const i={},a=E(e,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=E(e,["expireTime"]);return n!==void 0&&s!=null&&D(n,["expireTime"],s),i}function Qae(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["_url","name"],pd(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],Kae(t,a,n)),n}function Xae(t,e,n){const i={},a=E(e,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=E(e,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),i}function Jae(t,e){const n={},i=E(e,["config"]);return i!=null&&D(n,["config"],Xae(t,i,n)),n}function Zae(t,e){const n={},i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const a=E(e,["data"]);a!=null&&D(n,["data"],a);const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function ese(t,e){const n={},i=E(e,["videoMetadata"]);i!=null&&D(n,["videoMetadata"],i);const a=E(e,["thought"]);a!=null&&D(n,["thought"],a);const s=E(e,["inlineData"]);s!=null&&D(n,["inlineData"],Zae(t,s));const o=E(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=E(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=E(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=E(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=E(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=E(e,["text"]);return p!=null&&D(n,["text"],p),n}function SR(t,e){const n={},i=E(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>ese(t,o))),D(n,["parts"],s)}const a=E(e,["role"]);return a!=null&&D(n,["role"],a),n}function tse(){return{}}function nse(t,e){const n={},i=E(e,["mode"]);i!=null&&D(n,["mode"],i);const a=E(e,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function rse(t,e){const n={},i=E(e,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],nse(t,i)),n}function ise(){return{}}function ase(t,e){const n={},i=E(e,["apiKeyString"]);return i!=null&&D(n,["apiKeyString"],i),n}function sse(t,e){const n={},i=E(e,["apiKeyConfig"]);i!=null&&D(n,["apiKeyConfig"],ase(t,i));const a=E(e,["authType"]);a!=null&&D(n,["authType"],a);const s=E(e,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=E(e,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=E(e,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=E(e,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function ose(t,e){const n={},i=E(e,["authConfig"]);return i!=null&&D(n,["authConfig"],sse(t,i)),n}function lse(t,e){const n={},i=E(e,["retrieval"]);i!=null&&D(n,["retrieval"],i),E(e,["googleSearch"])!=null&&D(n,["googleSearch"],tse());const s=E(e,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],rse(t,s)),E(e,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],ise());const l=E(e,["googleMaps"]);l!=null&&D(n,["googleMaps"],ose(t,l));const c=E(e,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const d=E(e,["functionDeclarations"]);return d!=null&&D(n,["functionDeclarations"],d),n}function cse(t,e){const n={},i=E(e,["mode"]);i!=null&&D(n,["mode"],i);const a=E(e,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function use(t,e){const n={},i=E(e,["latitude"]);i!=null&&D(n,["latitude"],i);const a=E(e,["longitude"]);return a!=null&&D(n,["longitude"],a),n}function dse(t,e){const n={},i=E(e,["latLng"]);return i!=null&&D(n,["latLng"],use(t,i)),n}function hse(t,e){const n={},i=E(e,["functionCallingConfig"]);i!=null&&D(n,["functionCallingConfig"],cse(t,i));const a=E(e,["retrievalConfig"]);return a!=null&&D(n,["retrievalConfig"],dse(t,a)),n}function fse(t,e,n){const i={},a=E(e,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=E(e,["expireTime"]);n!==void 0&&s!=null&&D(n,["expireTime"],s);const o=E(e,["displayName"]);n!==void 0&&o!=null&&D(n,["displayName"],o);const l=E(e,["contents"]);if(n!==void 0&&l!=null){let p=fd(t,l);Array.isArray(p)&&(p=p.map(y=>SR(t,y))),D(n,["contents"],p)}const c=E(e,["systemInstruction"]);n!==void 0&&c!=null&&D(n,["systemInstruction"],SR(t,ts(t,c)));const d=E(e,["tools"]);if(n!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(y=>lse(t,y))),D(n,["tools"],p)}const f=E(e,["toolConfig"]);return n!==void 0&&f!=null&&D(n,["toolConfig"],hse(t,f)),i}function pse(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["model"],Zq(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],fse(t,a,n)),n}function mse(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["_url","name"],pd(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function gse(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["_url","name"],pd(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function yse(t,e,n){const i={},a=E(e,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=E(e,["expireTime"]);return n!==void 0&&s!=null&&D(n,["expireTime"],s),i}function xse(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["_url","name"],pd(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],yse(t,a,n)),n}function vse(t,e,n){const i={},a=E(e,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=E(e,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),i}function bse(t,e){const n={},i=E(e,["config"]);return i!=null&&D(n,["config"],vse(t,i,n)),n}function Jj(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const s=E(e,["model"]);s!=null&&D(n,["model"],s);const o=E(e,["createTime"]);o!=null&&D(n,["createTime"],o);const l=E(e,["updateTime"]);l!=null&&D(n,["updateTime"],l);const c=E(e,["expireTime"]);c!=null&&D(n,["expireTime"],c);const d=E(e,["usageMetadata"]);return d!=null&&D(n,["usageMetadata"],d),n}function jse(){return{}}function wse(t,e){const n={},i=E(e,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=E(e,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Jj(t,o))),D(n,["cachedContents"],s)}return n}function Zj(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const s=E(e,["model"]);s!=null&&D(n,["model"],s);const o=E(e,["createTime"]);o!=null&&D(n,["createTime"],o);const l=E(e,["updateTime"]);l!=null&&D(n,["updateTime"],l);const c=E(e,["expireTime"]);c!=null&&D(n,["expireTime"],c);const d=E(e,["usageMetadata"]);return d!=null&&D(n,["usageMetadata"],d),n}function Sse(){return{}}function Nse(t,e){const n={},i=E(e,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=E(e,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>Zj(t,o))),D(n,["cachedContents"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ng;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ng||(ng={}));class GS{constructor(e,n,i,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,a)}init(e,n,i){var a,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};i?typeof i=="object"?o=Object.assign({},i):o=i:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(a=o.config)===null||a===void 0?void 0:a.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var NR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(NR||(NR={}));var _R;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(_R||(_R={}));var CR;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(CR||(CR={}));var TR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(TR||(TR={}));var kR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(kR||(kR={}));var AR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(AR||(AR={}));var ER;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ER||(ER={}));var rg;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT"})(rg||(rg={}));var PR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY"})(PR||(PR={}));var OR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(OR||(OR={}));var DR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(DR||(DR={}));var MR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(MR||(MR={}));var IR;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(IR||(IR={}));var ld;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ld||(ld={}));var RR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(RR||(RR={}));var OE;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(OE||(OE={}));var LR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(LR||(LR={}));var FR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(FR||(FR={}));var $R;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})($R||($R={}));var BR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(BR||(BR={}));var zR;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(zR||(zR={}));var qR;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(qR||(qR={}));var UR;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(UR||(UR={}));var VR;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(VR||(VR={}));var HR;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(HR||(HR={}));var GR;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(GR||(GR={}));var WR;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(WR||(WR={}));var YR;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(YR||(YR={}));var KR;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(KR||(KR={}));var QR;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(QR||(QR={}));var XR;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(XR||(XR={}));var JR;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(JR||(JR={}));var ZR;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ZR||(ZR={}));var e4;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(e4||(e4={}));class xj{get text(){var e,n,i,a,s,o,l,c;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const y of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,v]of Object.entries(y))x!=="text"&&x!=="thought"&&(v!==null||v!==void 0)&&p.push(x);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;f=!0,d+=y.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,i,a,s,o,l,c;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[y,x]of Object.entries(p))y!=="inlineData"&&(x!==null||x!==void 0)&&f.push(y);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,a,s,o,l,c;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,i,a,s,o,l,c,d;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,a,s,o,l,c,d;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class t4{}class n4{}class _se{}class Cse{}class r4{}class i4{}class a4{}class Tse{}class s4{}class o4{}class l4{}class kse{}class DE{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ase{}class Ese{}class Pse{get text(){var e,n,i;let a="",s=!1;const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,a+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?a:void 0}get data(){var e,n,i;let a="";const s=[];for(const o of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&s.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(a+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ose extends Db{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new GS(ng.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=pse(this.apiClient,e);return l=sn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}else{const d=Gae(this.apiClient,e);return l=sn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Jj(this.apiClient,f))}}async get(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=mse(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}else{const d=Wae(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Jj(this.apiClient,f))}}async delete(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=gse(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Sse(),p=new o4;return Object.assign(p,f),p})}else{const d=Yae(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=jse(),p=new o4;return Object.assign(p,f),p})}}async update(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=xse(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Zj(this.apiClient,f))}else{const d=Qae(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Jj(this.apiClient,f))}}async listInternal(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=bse(this.apiClient,e);return l=sn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Nse(this.apiClient,f),y=new l4;return Object.assign(y,p),y})}else{const d=Jae(this.apiClient,e);return l=sn("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=wse(this.apiClient,f),y=new l4;return Object.assign(y,p),y})}}}function c4(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function aa(t){return this instanceof aa?(this.v=t,this):new aa(t)}function vw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(x){return function(v){return Promise.resolve(v).then(x,p)}}function l(x,v){i[x]&&(a[x]=function(S){return new Promise(function(N,_){s.push([x,S,N,_])>1||c(x,S)})},v&&(a[x]=v(a[x])))}function c(x,v){try{d(i[x](v))}catch(S){y(s[0][3],S)}}function d(x){x.value instanceof aa?Promise.resolve(x.value.v).then(f,p):y(s[0][2],x)}function f(x){c("next",x)}function p(x){c("throw",x)}function y(x,v){x(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ME(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof c4=="function"?c4(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(l,c){o=t[s](o),a(l,c,o.done,o.value)})}}function a(s,o,l,c){Promise.resolve(c).then(function(d){s({value:d,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dse(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:cU(n)}function cU(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function Mse(t){if(t.length!==0){if(t[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ise(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0,a=t[0];for(;i<n;)if(t[i].role==="user")a=t[i],i++;else{const s=[];let o=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),o&&!cU(t[i])&&(o=!1),i++;o&&(e.push(a),e.push(...s))}return e}class Rse{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Lse(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class Lse{constructor(e,n,i,a={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=a,this.history=s,this.sendPromise=Promise.resolve(),Mse(s)}async sendMessage(e){var n;await this.sendPromise;const i=ts(this.apiClient,e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o;const c=(o=(s=(await a).candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,d=c?[c]:[];this.recordHistory(i,d)})(),await this.sendPromise,a}async sendMessageStream(e){var n;await this.sendPromise;const i=ts(this.apiClient,e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const s=await a;return this.processStreamResponse(s,i)}getHistory(e=!1){return e?Ise(this.history):this.history}processStreamResponse(e,n){var i,a;return vw(this,arguments,function*(){var o,l,c,d;const f=[];try{for(var p=!0,y=ME(e),x;x=yield aa(y.next()),o=x.done,!o;p=!0){d=x.value,p=!1;const v=d;if(Dse(v)){const S=(a=(i=v.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content;S!==void 0&&f.push(S)}yield yield aa(v)}}catch(v){l={error:v}}finally{try{!p&&!o&&(c=y.return)&&(yield aa(c.call(y)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(e,n){let i=[];n.length>0&&n.every(a=>a.role==="model")?i=n:i.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fse(t,e,n){const i={},a=E(e,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=E(e,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),i}function $se(t,e){const n={},i=E(e,["config"]);return i!=null&&D(n,["config"],Fse(t,i,n)),n}function Bse(t,e){const n={},i=E(e,["details"]);i!=null&&D(n,["details"],i);const a=E(e,["message"]);a!=null&&D(n,["message"],a);const s=E(e,["code"]);return s!=null&&D(n,["code"],s),n}function zse(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const s=E(e,["mimeType"]);s!=null&&D(n,["mimeType"],s);const o=E(e,["sizeBytes"]);o!=null&&D(n,["sizeBytes"],o);const l=E(e,["createTime"]);l!=null&&D(n,["createTime"],l);const c=E(e,["expirationTime"]);c!=null&&D(n,["expirationTime"],c);const d=E(e,["updateTime"]);d!=null&&D(n,["updateTime"],d);const f=E(e,["sha256Hash"]);f!=null&&D(n,["sha256Hash"],f);const p=E(e,["uri"]);p!=null&&D(n,["uri"],p);const y=E(e,["downloadUri"]);y!=null&&D(n,["downloadUri"],y);const x=E(e,["state"]);x!=null&&D(n,["state"],x);const v=E(e,["source"]);v!=null&&D(n,["source"],v);const S=E(e,["videoMetadata"]);S!=null&&D(n,["videoMetadata"],S);const N=E(e,["error"]);return N!=null&&D(n,["error"],Bse(t,N)),n}function qse(t,e){const n={},i=E(e,["file"]);i!=null&&D(n,["file"],zse(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function Use(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["_url","file"],sU(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function Vse(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["_url","file"],sU(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function Hse(t,e){const n={},i=E(e,["details"]);i!=null&&D(n,["details"],i);const a=E(e,["message"]);a!=null&&D(n,["message"],a);const s=E(e,["code"]);return s!=null&&D(n,["code"],s),n}function IE(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const s=E(e,["mimeType"]);s!=null&&D(n,["mimeType"],s);const o=E(e,["sizeBytes"]);o!=null&&D(n,["sizeBytes"],o);const l=E(e,["createTime"]);l!=null&&D(n,["createTime"],l);const c=E(e,["expirationTime"]);c!=null&&D(n,["expirationTime"],c);const d=E(e,["updateTime"]);d!=null&&D(n,["updateTime"],d);const f=E(e,["sha256Hash"]);f!=null&&D(n,["sha256Hash"],f);const p=E(e,["uri"]);p!=null&&D(n,["uri"],p);const y=E(e,["downloadUri"]);y!=null&&D(n,["downloadUri"],y);const x=E(e,["state"]);x!=null&&D(n,["state"],x);const v=E(e,["source"]);v!=null&&D(n,["source"],v);const S=E(e,["videoMetadata"]);S!=null&&D(n,["videoMetadata"],S);const N=E(e,["error"]);return N!=null&&D(n,["error"],Hse(t,N)),n}function Gse(t,e){const n={},i=E(e,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=E(e,["files"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>IE(t,o))),D(n,["files"],s)}return n}function Wse(){return{}}function Yse(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kse extends Db{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new GS(ng.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>IE(this.apiClient,n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=$se(this.apiClient,e);return s=sn("files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=Gse(this.apiClient,c),f=new kse;return Object.assign(f,d),f})}}async createInternal(e){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=qse(this.apiClient,e);return s=sn("upload/v1beta/files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(()=>{const c=Wse(),d=new Ase;return Object.assign(d,c),d})}}async get(e){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Use(this.apiClient,e);return s=sn("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>IE(this.apiClient,c))}}async delete(e){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Vse(this.apiClient,e);return s=sn("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(()=>{const c=Yse(),d=new Ese;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qse(t,e){const n={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=E(e,["data"]);i!=null&&D(n,["data"],i);const a=E(e,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function Xse(t,e){const n={},i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const a=E(e,["data"]);a!=null&&D(n,["data"],a);const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Jse(t,e){const n={};if(E(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=E(e,["thought"]);i!=null&&D(n,["thought"],i);const a=E(e,["inlineData"]);a!=null&&D(n,["inlineData"],Qse(t,a));const s=E(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=E(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=E(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=E(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=E(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=E(e,["text"]);return f!=null&&D(n,["text"],f),n}function Zse(t,e){const n={},i=E(e,["videoMetadata"]);i!=null&&D(n,["videoMetadata"],i);const a=E(e,["thought"]);a!=null&&D(n,["thought"],a);const s=E(e,["inlineData"]);s!=null&&D(n,["inlineData"],Xse(t,s));const o=E(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=E(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=E(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=E(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=E(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=E(e,["text"]);return p!=null&&D(n,["text"],p),n}function eoe(t,e){const n={},i=E(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Jse(t,o))),D(n,["parts"],s)}const a=E(e,["role"]);return a!=null&&D(n,["role"],a),n}function toe(t,e){const n={},i=E(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Zse(t,o))),D(n,["parts"],s)}const a=E(e,["role"]);return a!=null&&D(n,["role"],a),n}function noe(){return{}}function roe(){return{}}function ioe(t,e){const n={},i=E(e,["mode"]);i!=null&&D(n,["mode"],i);const a=E(e,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function aoe(t,e){const n={},i=E(e,["mode"]);i!=null&&D(n,["mode"],i);const a=E(e,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function soe(t,e){const n={},i=E(e,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],ioe(t,i)),n}function ooe(t,e){const n={},i=E(e,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],aoe(t,i)),n}function loe(){return{}}function coe(t,e){const n={},i=E(e,["apiKeyString"]);return i!=null&&D(n,["apiKeyString"],i),n}function uoe(t,e){const n={},i=E(e,["apiKeyConfig"]);i!=null&&D(n,["apiKeyConfig"],coe(t,i));const a=E(e,["authType"]);a!=null&&D(n,["authType"],a);const s=E(e,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=E(e,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=E(e,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=E(e,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function doe(t,e){const n={},i=E(e,["authConfig"]);return i!=null&&D(n,["authConfig"],uoe(t,i)),n}function hoe(t,e){const n={};if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");E(e,["googleSearch"])!=null&&D(n,["googleSearch"],noe());const a=E(e,["googleSearchRetrieval"]);if(a!=null&&D(n,["googleSearchRetrieval"],soe(t,a)),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(E(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=E(e,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=E(e,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function foe(t,e){const n={},i=E(e,["retrieval"]);i!=null&&D(n,["retrieval"],i),E(e,["googleSearch"])!=null&&D(n,["googleSearch"],roe());const s=E(e,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],ooe(t,s)),E(e,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],loe());const l=E(e,["googleMaps"]);l!=null&&D(n,["googleMaps"],doe(t,l));const c=E(e,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const d=E(e,["functionDeclarations"]);return d!=null&&D(n,["functionDeclarations"],d),n}function poe(t,e){const n={},i=E(e,["handle"]);if(i!=null&&D(n,["handle"],i),E(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function moe(t,e){const n={},i=E(e,["handle"]);i!=null&&D(n,["handle"],i);const a=E(e,["transparent"]);return a!=null&&D(n,["transparent"],a),n}function u4(){return{}}function d4(){return{}}function goe(t,e){const n={},i=E(e,["disabled"]);i!=null&&D(n,["disabled"],i);const a=E(e,["startOfSpeechSensitivity"]);a!=null&&D(n,["startOfSpeechSensitivity"],a);const s=E(e,["endOfSpeechSensitivity"]);s!=null&&D(n,["endOfSpeechSensitivity"],s);const o=E(e,["prefixPaddingMs"]);o!=null&&D(n,["prefixPaddingMs"],o);const l=E(e,["silenceDurationMs"]);return l!=null&&D(n,["silenceDurationMs"],l),n}function yoe(t,e){const n={},i=E(e,["disabled"]);i!=null&&D(n,["disabled"],i);const a=E(e,["startOfSpeechSensitivity"]);a!=null&&D(n,["startOfSpeechSensitivity"],a);const s=E(e,["endOfSpeechSensitivity"]);s!=null&&D(n,["endOfSpeechSensitivity"],s);const o=E(e,["prefixPaddingMs"]);o!=null&&D(n,["prefixPaddingMs"],o);const l=E(e,["silenceDurationMs"]);return l!=null&&D(n,["silenceDurationMs"],l),n}function xoe(t,e){const n={},i=E(e,["automaticActivityDetection"]);i!=null&&D(n,["automaticActivityDetection"],goe(t,i));const a=E(e,["activityHandling"]);a!=null&&D(n,["activityHandling"],a);const s=E(e,["turnCoverage"]);return s!=null&&D(n,["turnCoverage"],s),n}function voe(t,e){const n={},i=E(e,["automaticActivityDetection"]);i!=null&&D(n,["automaticActivityDetection"],yoe(t,i));const a=E(e,["activityHandling"]);a!=null&&D(n,["activityHandling"],a);const s=E(e,["turnCoverage"]);return s!=null&&D(n,["turnCoverage"],s),n}function boe(t,e){const n={},i=E(e,["targetTokens"]);return i!=null&&D(n,["targetTokens"],i),n}function joe(t,e){const n={},i=E(e,["targetTokens"]);return i!=null&&D(n,["targetTokens"],i),n}function woe(t,e){const n={},i=E(e,["triggerTokens"]);i!=null&&D(n,["triggerTokens"],i);const a=E(e,["slidingWindow"]);return a!=null&&D(n,["slidingWindow"],boe(t,a)),n}function Soe(t,e){const n={},i=E(e,["triggerTokens"]);i!=null&&D(n,["triggerTokens"],i);const a=E(e,["slidingWindow"]);return a!=null&&D(n,["slidingWindow"],joe(t,a)),n}function Noe(t,e,n){const i={},a=E(e,["generationConfig"]);n!==void 0&&a!=null&&D(n,["setup","generationConfig"],a);const s=E(e,["responseModalities"]);n!==void 0&&s!=null&&D(n,["setup","generationConfig","responseModalities"],s);const o=E(e,["temperature"]);n!==void 0&&o!=null&&D(n,["setup","generationConfig","temperature"],o);const l=E(e,["topP"]);n!==void 0&&l!=null&&D(n,["setup","generationConfig","topP"],l);const c=E(e,["topK"]);n!==void 0&&c!=null&&D(n,["setup","generationConfig","topK"],c);const d=E(e,["maxOutputTokens"]);n!==void 0&&d!=null&&D(n,["setup","generationConfig","maxOutputTokens"],d);const f=E(e,["mediaResolution"]);n!==void 0&&f!=null&&D(n,["setup","generationConfig","mediaResolution"],f);const p=E(e,["seed"]);n!==void 0&&p!=null&&D(n,["setup","generationConfig","seed"],p);const y=E(e,["speechConfig"]);n!==void 0&&y!=null&&D(n,["setup","generationConfig","speechConfig"],y);const x=E(e,["systemInstruction"]);n!==void 0&&x!=null&&D(n,["setup","systemInstruction"],eoe(t,ts(t,x)));const v=E(e,["tools"]);if(n!==void 0&&v!=null){let O=HS(t,v);Array.isArray(O)&&(O=O.map(k=>hoe(t,VS(t,k)))),D(n,["setup","tools"],O)}const S=E(e,["sessionResumption"]);n!==void 0&&S!=null&&D(n,["setup","sessionResumption"],poe(t,S));const N=E(e,["inputAudioTranscription"]);n!==void 0&&N!=null&&D(n,["setup","inputAudioTranscription"],u4());const _=E(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&D(n,["setup","outputAudioTranscription"],u4());const T=E(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&D(n,["setup","realtimeInputConfig"],xoe(t,T));const C=E(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&D(n,["setup","contextWindowCompression"],woe(t,C)),i}function _oe(t,e,n){const i={},a=E(e,["generationConfig"]);n!==void 0&&a!=null&&D(n,["setup","generationConfig"],a);const s=E(e,["responseModalities"]);n!==void 0&&s!=null&&D(n,["setup","generationConfig","responseModalities"],s);const o=E(e,["temperature"]);n!==void 0&&o!=null&&D(n,["setup","generationConfig","temperature"],o);const l=E(e,["topP"]);n!==void 0&&l!=null&&D(n,["setup","generationConfig","topP"],l);const c=E(e,["topK"]);n!==void 0&&c!=null&&D(n,["setup","generationConfig","topK"],c);const d=E(e,["maxOutputTokens"]);n!==void 0&&d!=null&&D(n,["setup","generationConfig","maxOutputTokens"],d);const f=E(e,["mediaResolution"]);n!==void 0&&f!=null&&D(n,["setup","generationConfig","mediaResolution"],f);const p=E(e,["seed"]);n!==void 0&&p!=null&&D(n,["setup","generationConfig","seed"],p);const y=E(e,["speechConfig"]);n!==void 0&&y!=null&&D(n,["setup","generationConfig","speechConfig"],y);const x=E(e,["systemInstruction"]);n!==void 0&&x!=null&&D(n,["setup","systemInstruction"],toe(t,ts(t,x)));const v=E(e,["tools"]);if(n!==void 0&&v!=null){let O=HS(t,v);Array.isArray(O)&&(O=O.map(k=>foe(t,VS(t,k)))),D(n,["setup","tools"],O)}const S=E(e,["sessionResumption"]);n!==void 0&&S!=null&&D(n,["setup","sessionResumption"],moe(t,S));const N=E(e,["inputAudioTranscription"]);n!==void 0&&N!=null&&D(n,["setup","inputAudioTranscription"],d4());const _=E(e,["outputAudioTranscription"]);n!==void 0&&_!=null&&D(n,["setup","outputAudioTranscription"],d4());const T=E(e,["realtimeInputConfig"]);n!==void 0&&T!=null&&D(n,["setup","realtimeInputConfig"],voe(t,T));const C=E(e,["contextWindowCompression"]);return n!==void 0&&C!=null&&D(n,["setup","contextWindowCompression"],Soe(t,C)),i}function Coe(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["setup","model"],Ur(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],Noe(t,a,n)),n}function Toe(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["setup","model"],Ur(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],_oe(t,a,n)),n}function koe(){return{}}function Aoe(){return{}}function Eoe(){return{}}function Poe(){return{}}function Ooe(t,e){const n={},i=E(e,["media"]);i!=null&&D(n,["mediaChunks"],eU(t,i));const a=E(e,["audio"]);a!=null&&D(n,["audio"],Pae(t,a));const s=E(e,["audioStreamEnd"]);s!=null&&D(n,["audioStreamEnd"],s);const o=E(e,["video"]);o!=null&&D(n,["video"],Eae(t,o));const l=E(e,["text"]);return l!=null&&D(n,["text"],l),E(e,["activityStart"])!=null&&D(n,["activityStart"],koe()),E(e,["activityEnd"])!=null&&D(n,["activityEnd"],Eoe()),n}function Doe(t,e){const n={},i=E(e,["media"]);if(i!=null&&D(n,["mediaChunks"],eU(t,i)),E(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const a=E(e,["audioStreamEnd"]);if(a!=null&&D(n,["audioStreamEnd"],a),E(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(E(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return E(e,["activityStart"])!=null&&D(n,["activityStart"],Aoe()),E(e,["activityEnd"])!=null&&D(n,["activityEnd"],Poe()),n}function Moe(){return{}}function Ioe(){return{}}function Roe(t,e){const n={},i=E(e,["data"]);i!=null&&D(n,["data"],i);const a=E(e,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function Loe(t,e){const n={},i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const a=E(e,["data"]);a!=null&&D(n,["data"],a);const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Foe(t,e){const n={},i=E(e,["thought"]);i!=null&&D(n,["thought"],i);const a=E(e,["inlineData"]);a!=null&&D(n,["inlineData"],Roe(t,a));const s=E(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=E(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=E(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=E(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=E(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=E(e,["text"]);return f!=null&&D(n,["text"],f),n}function $oe(t,e){const n={},i=E(e,["videoMetadata"]);i!=null&&D(n,["videoMetadata"],i);const a=E(e,["thought"]);a!=null&&D(n,["thought"],a);const s=E(e,["inlineData"]);s!=null&&D(n,["inlineData"],Loe(t,s));const o=E(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=E(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=E(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=E(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=E(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=E(e,["text"]);return p!=null&&D(n,["text"],p),n}function Boe(t,e){const n={},i=E(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Foe(t,o))),D(n,["parts"],s)}const a=E(e,["role"]);return a!=null&&D(n,["role"],a),n}function zoe(t,e){const n={},i=E(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>$oe(t,o))),D(n,["parts"],s)}const a=E(e,["role"]);return a!=null&&D(n,["role"],a),n}function h4(t,e){const n={},i=E(e,["text"]);i!=null&&D(n,["text"],i);const a=E(e,["finished"]);return a!=null&&D(n,["finished"],a),n}function f4(t,e){const n={},i=E(e,["text"]);i!=null&&D(n,["text"],i);const a=E(e,["finished"]);return a!=null&&D(n,["finished"],a),n}function qoe(t,e){const n={},i=E(e,["modelTurn"]);i!=null&&D(n,["modelTurn"],Boe(t,i));const a=E(e,["turnComplete"]);a!=null&&D(n,["turnComplete"],a);const s=E(e,["interrupted"]);s!=null&&D(n,["interrupted"],s);const o=E(e,["groundingMetadata"]);o!=null&&D(n,["groundingMetadata"],o);const l=E(e,["generationComplete"]);l!=null&&D(n,["generationComplete"],l);const c=E(e,["inputTranscription"]);c!=null&&D(n,["inputTranscription"],h4(t,c));const d=E(e,["outputTranscription"]);return d!=null&&D(n,["outputTranscription"],h4(t,d)),n}function Uoe(t,e){const n={},i=E(e,["modelTurn"]);i!=null&&D(n,["modelTurn"],zoe(t,i));const a=E(e,["turnComplete"]);a!=null&&D(n,["turnComplete"],a);const s=E(e,["interrupted"]);s!=null&&D(n,["interrupted"],s);const o=E(e,["groundingMetadata"]);o!=null&&D(n,["groundingMetadata"],o);const l=E(e,["generationComplete"]);l!=null&&D(n,["generationComplete"],l);const c=E(e,["inputTranscription"]);c!=null&&D(n,["inputTranscription"],f4(t,c));const d=E(e,["outputTranscription"]);return d!=null&&D(n,["outputTranscription"],f4(t,d)),n}function Voe(t,e){const n={},i=E(e,["id"]);i!=null&&D(n,["id"],i);const a=E(e,["args"]);a!=null&&D(n,["args"],a);const s=E(e,["name"]);return s!=null&&D(n,["name"],s),n}function Hoe(t,e){const n={},i=E(e,["args"]);i!=null&&D(n,["args"],i);const a=E(e,["name"]);return a!=null&&D(n,["name"],a),n}function Goe(t,e){const n={},i=E(e,["functionCalls"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>Voe(t,s))),D(n,["functionCalls"],a)}return n}function Woe(t,e){const n={},i=E(e,["functionCalls"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>Hoe(t,s))),D(n,["functionCalls"],a)}return n}function Yoe(t,e){const n={},i=E(e,["ids"]);return i!=null&&D(n,["ids"],i),n}function Koe(t,e){const n={},i=E(e,["ids"]);return i!=null&&D(n,["ids"],i),n}function vj(t,e){const n={},i=E(e,["modality"]);i!=null&&D(n,["modality"],i);const a=E(e,["tokenCount"]);return a!=null&&D(n,["tokenCount"],a),n}function bj(t,e){const n={},i=E(e,["modality"]);i!=null&&D(n,["modality"],i);const a=E(e,["tokenCount"]);return a!=null&&D(n,["tokenCount"],a),n}function Qoe(t,e){const n={},i=E(e,["promptTokenCount"]);i!=null&&D(n,["promptTokenCount"],i);const a=E(e,["cachedContentTokenCount"]);a!=null&&D(n,["cachedContentTokenCount"],a);const s=E(e,["responseTokenCount"]);s!=null&&D(n,["responseTokenCount"],s);const o=E(e,["toolUsePromptTokenCount"]);o!=null&&D(n,["toolUsePromptTokenCount"],o);const l=E(e,["thoughtsTokenCount"]);l!=null&&D(n,["thoughtsTokenCount"],l);const c=E(e,["totalTokenCount"]);c!=null&&D(n,["totalTokenCount"],c);const d=E(e,["promptTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(v=>vj(t,v))),D(n,["promptTokensDetails"],x)}const f=E(e,["cacheTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(v=>vj(t,v))),D(n,["cacheTokensDetails"],x)}const p=E(e,["responseTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(v=>vj(t,v))),D(n,["responseTokensDetails"],x)}const y=E(e,["toolUsePromptTokensDetails"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(v=>vj(t,v))),D(n,["toolUsePromptTokensDetails"],x)}return n}function Xoe(t,e){const n={},i=E(e,["promptTokenCount"]);i!=null&&D(n,["promptTokenCount"],i);const a=E(e,["cachedContentTokenCount"]);a!=null&&D(n,["cachedContentTokenCount"],a);const s=E(e,["candidatesTokenCount"]);s!=null&&D(n,["responseTokenCount"],s);const o=E(e,["toolUsePromptTokenCount"]);o!=null&&D(n,["toolUsePromptTokenCount"],o);const l=E(e,["thoughtsTokenCount"]);l!=null&&D(n,["thoughtsTokenCount"],l);const c=E(e,["totalTokenCount"]);c!=null&&D(n,["totalTokenCount"],c);const d=E(e,["promptTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(S=>bj(t,S))),D(n,["promptTokensDetails"],v)}const f=E(e,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(S=>bj(t,S))),D(n,["cacheTokensDetails"],v)}const p=E(e,["candidatesTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(S=>bj(t,S))),D(n,["responseTokensDetails"],v)}const y=E(e,["toolUsePromptTokensDetails"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(S=>bj(t,S))),D(n,["toolUsePromptTokensDetails"],v)}const x=E(e,["trafficType"]);return x!=null&&D(n,["trafficType"],x),n}function Joe(t,e){const n={},i=E(e,["timeLeft"]);return i!=null&&D(n,["timeLeft"],i),n}function Zoe(t,e){const n={},i=E(e,["timeLeft"]);return i!=null&&D(n,["timeLeft"],i),n}function ele(t,e){const n={},i=E(e,["newHandle"]);i!=null&&D(n,["newHandle"],i);const a=E(e,["resumable"]);a!=null&&D(n,["resumable"],a);const s=E(e,["lastConsumedClientMessageIndex"]);return s!=null&&D(n,["lastConsumedClientMessageIndex"],s),n}function tle(t,e){const n={},i=E(e,["newHandle"]);i!=null&&D(n,["newHandle"],i);const a=E(e,["resumable"]);a!=null&&D(n,["resumable"],a);const s=E(e,["lastConsumedClientMessageIndex"]);return s!=null&&D(n,["lastConsumedClientMessageIndex"],s),n}function nle(t,e){const n={};E(e,["setupComplete"])!=null&&D(n,["setupComplete"],Moe());const a=E(e,["serverContent"]);a!=null&&D(n,["serverContent"],qoe(t,a));const s=E(e,["toolCall"]);s!=null&&D(n,["toolCall"],Goe(t,s));const o=E(e,["toolCallCancellation"]);o!=null&&D(n,["toolCallCancellation"],Yoe(t,o));const l=E(e,["usageMetadata"]);l!=null&&D(n,["usageMetadata"],Qoe(t,l));const c=E(e,["goAway"]);c!=null&&D(n,["goAway"],Joe(t,c));const d=E(e,["sessionResumptionUpdate"]);return d!=null&&D(n,["sessionResumptionUpdate"],ele(t,d)),n}function rle(t,e){const n={};E(e,["setupComplete"])!=null&&D(n,["setupComplete"],Ioe());const a=E(e,["serverContent"]);a!=null&&D(n,["serverContent"],Uoe(t,a));const s=E(e,["toolCall"]);s!=null&&D(n,["toolCall"],Woe(t,s));const o=E(e,["toolCallCancellation"]);o!=null&&D(n,["toolCallCancellation"],Koe(t,o));const l=E(e,["usageMetadata"]);l!=null&&D(n,["usageMetadata"],Xoe(t,l));const c=E(e,["goAway"]);c!=null&&D(n,["goAway"],Zoe(t,c));const d=E(e,["sessionResumptionUpdate"]);return d!=null&&D(n,["sessionResumptionUpdate"],tle(t,d)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ile(t,e){const n={};if(E(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=E(e,["data"]);i!=null&&D(n,["data"],i);const a=E(e,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function ale(t,e){const n={};if(E(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=E(e,["thought"]);i!=null&&D(n,["thought"],i);const a=E(e,["inlineData"]);a!=null&&D(n,["inlineData"],ile(t,a));const s=E(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=E(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=E(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=E(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=E(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=E(e,["text"]);return f!=null&&D(n,["text"],f),n}function WS(t,e){const n={},i=E(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>ale(t,o))),D(n,["parts"],s)}const a=E(e,["role"]);return a!=null&&D(n,["role"],a),n}function sle(t,e){const n={};if(E(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=E(e,["category"]);i!=null&&D(n,["category"],i);const a=E(e,["threshold"]);return a!=null&&D(n,["threshold"],a),n}function ole(){return{}}function lle(t,e){const n={},i=E(e,["mode"]);i!=null&&D(n,["mode"],i);const a=E(e,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function cle(t,e){const n={},i=E(e,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],lle(t,i)),n}function ule(t,e){const n={};if(E(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");E(e,["googleSearch"])!=null&&D(n,["googleSearch"],ole());const a=E(e,["googleSearchRetrieval"]);if(a!=null&&D(n,["googleSearchRetrieval"],cle(t,a)),E(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(E(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=E(e,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=E(e,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function dle(t,e){const n={},i=E(e,["mode"]);i!=null&&D(n,["mode"],i);const a=E(e,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function hle(t,e){const n={},i=E(e,["functionCallingConfig"]);if(i!=null&&D(n,["functionCallingConfig"],dle(t,i)),E(e,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function fle(t,e){const n={},i=E(e,["voiceName"]);return i!=null&&D(n,["voiceName"],i),n}function ple(t,e){const n={},i=E(e,["prebuiltVoiceConfig"]);return i!=null&&D(n,["prebuiltVoiceConfig"],fle(t,i)),n}function mle(t,e){const n={},i=E(e,["voiceConfig"]);i!=null&&D(n,["voiceConfig"],ple(t,i));const a=E(e,["languageCode"]);return a!=null&&D(n,["languageCode"],a),n}function gle(t,e){const n={},i=E(e,["includeThoughts"]);i!=null&&D(n,["includeThoughts"],i);const a=E(e,["thinkingBudget"]);return a!=null&&D(n,["thinkingBudget"],a),n}function yle(t,e,n){const i={},a=E(e,["systemInstruction"]);n!==void 0&&a!=null&&D(n,["systemInstruction"],WS(t,ts(t,a)));const s=E(e,["temperature"]);s!=null&&D(i,["temperature"],s);const o=E(e,["topP"]);o!=null&&D(i,["topP"],o);const l=E(e,["topK"]);l!=null&&D(i,["topK"],l);const c=E(e,["candidateCount"]);c!=null&&D(i,["candidateCount"],c);const d=E(e,["maxOutputTokens"]);d!=null&&D(i,["maxOutputTokens"],d);const f=E(e,["stopSequences"]);f!=null&&D(i,["stopSequences"],f);const p=E(e,["responseLogprobs"]);p!=null&&D(i,["responseLogprobs"],p);const y=E(e,["logprobs"]);y!=null&&D(i,["logprobs"],y);const x=E(e,["presencePenalty"]);x!=null&&D(i,["presencePenalty"],x);const v=E(e,["frequencyPenalty"]);v!=null&&D(i,["frequencyPenalty"],v);const S=E(e,["seed"]);S!=null&&D(i,["seed"],S);const N=E(e,["responseMimeType"]);N!=null&&D(i,["responseMimeType"],N);const _=E(e,["responseSchema"]);if(_!=null&&D(i,["responseSchema"],rU(t,_)),E(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(E(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=E(e,["safetySettings"]);if(n!==void 0&&T!=null){let $=T;Array.isArray($)&&($=$.map(L=>sle(t,L))),D(n,["safetySettings"],$)}const C=E(e,["tools"]);if(n!==void 0&&C!=null){let $=HS(t,C);Array.isArray($)&&($=$.map(L=>ule(t,VS(t,L)))),D(n,["tools"],$)}const O=E(e,["toolConfig"]);if(n!==void 0&&O!=null&&D(n,["toolConfig"],hle(t,O)),E(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=E(e,["cachedContent"]);n!==void 0&&k!=null&&D(n,["cachedContent"],pd(t,k));const P=E(e,["responseModalities"]);P!=null&&D(i,["responseModalities"],P);const I=E(e,["mediaResolution"]);I!=null&&D(i,["mediaResolution"],I);const F=E(e,["speechConfig"]);if(F!=null&&D(i,["speechConfig"],mle(t,iU(t,F))),E(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=E(e,["thinkingConfig"]);return B!=null&&D(i,["thinkingConfig"],gle(t,B)),i}function p4(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["contents"]);if(a!=null){let o=fd(t,a);Array.isArray(o)&&(o=o.map(l=>WS(t,l))),D(n,["contents"],o)}const s=E(e,["config"]);return s!=null&&D(n,["generationConfig"],yle(t,s,n)),n}function xle(t,e,n){const i={},a=E(e,["taskType"]);n!==void 0&&a!=null&&D(n,["requests[]","taskType"],a);const s=E(e,["title"]);n!==void 0&&s!=null&&D(n,["requests[]","title"],s);const o=E(e,["outputDimensionality"]);if(n!==void 0&&o!=null&&D(n,["requests[]","outputDimensionality"],o),E(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(E(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function vle(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["contents"]);a!=null&&D(n,["requests[]","content"],nU(t,a));const s=E(e,["config"]);s!=null&&D(n,["config"],xle(t,s,n));const o=E(e,["model"]);return o!==void 0&&D(n,["requests[]","model"],Ur(t,o)),n}function ble(t,e,n){const i={};if(E(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(E(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=E(e,["numberOfImages"]);n!==void 0&&a!=null&&D(n,["parameters","sampleCount"],a);const s=E(e,["aspectRatio"]);n!==void 0&&s!=null&&D(n,["parameters","aspectRatio"],s);const o=E(e,["guidanceScale"]);if(n!==void 0&&o!=null&&D(n,["parameters","guidanceScale"],o),E(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=E(e,["safetyFilterLevel"]);n!==void 0&&l!=null&&D(n,["parameters","safetySetting"],l);const c=E(e,["personGeneration"]);n!==void 0&&c!=null&&D(n,["parameters","personGeneration"],c);const d=E(e,["includeSafetyAttributes"]);n!==void 0&&d!=null&&D(n,["parameters","includeSafetyAttributes"],d);const f=E(e,["includeRaiReason"]);n!==void 0&&f!=null&&D(n,["parameters","includeRaiReason"],f);const p=E(e,["language"]);n!==void 0&&p!=null&&D(n,["parameters","language"],p);const y=E(e,["outputMimeType"]);n!==void 0&&y!=null&&D(n,["parameters","outputOptions","mimeType"],y);const x=E(e,["outputCompressionQuality"]);if(n!==void 0&&x!=null&&D(n,["parameters","outputOptions","compressionQuality"],x),E(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(E(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function jle(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=E(e,["config"]);return s!=null&&D(n,["config"],ble(t,s,n)),n}function wle(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","name"],Ur(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function Sle(t,e,n){const i={},a=E(e,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=E(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=E(e,["filter"]);n!==void 0&&o!=null&&D(n,["_query","filter"],o);const l=E(e,["queryBase"]);return n!==void 0&&l!=null&&D(n,["_url","models_url"],oU(t,l)),i}function Nle(t,e){const n={},i=E(e,["config"]);return i!=null&&D(n,["config"],Sle(t,i,n)),n}function _le(t,e,n){const i={},a=E(e,["displayName"]);n!==void 0&&a!=null&&D(n,["displayName"],a);const s=E(e,["description"]);n!==void 0&&s!=null&&D(n,["description"],s);const o=E(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&D(n,["defaultCheckpointId"],o),i}function Cle(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","name"],Ur(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],_le(t,a,n)),n}function Tle(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","name"],Ur(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function kle(t,e){const n={};if(E(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(E(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(E(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Ale(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["contents"]);if(a!=null){let o=fd(t,a);Array.isArray(o)&&(o=o.map(l=>WS(t,l))),D(n,["contents"],o)}const s=E(e,["config"]);return s!=null&&D(n,["config"],kle(t,s)),n}function Ele(t,e){const n={};if(E(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=E(e,["imageBytes"]);i!=null&&D(n,["bytesBase64Encoded"],md(t,i));const a=E(e,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function Ple(t,e,n){const i={},a=E(e,["numberOfVideos"]);if(n!==void 0&&a!=null&&D(n,["parameters","sampleCount"],a),E(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(E(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=E(e,["durationSeconds"]);if(n!==void 0&&s!=null&&D(n,["parameters","durationSeconds"],s),E(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=E(e,["aspectRatio"]);if(n!==void 0&&o!=null&&D(n,["parameters","aspectRatio"],o),E(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=E(e,["personGeneration"]);if(n!==void 0&&l!=null&&D(n,["parameters","personGeneration"],l),E(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=E(e,["negativePrompt"]);if(n!==void 0&&c!=null&&D(n,["parameters","negativePrompt"],c),E(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function Ole(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=E(e,["image"]);s!=null&&D(n,["instances[0]","image"],Ele(t,s));const o=E(e,["config"]);return o!=null&&D(n,["config"],Ple(t,o,n)),n}function Dle(t,e){const n={},i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const a=E(e,["data"]);a!=null&&D(n,["data"],a);const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Mle(t,e){const n={},i=E(e,["videoMetadata"]);i!=null&&D(n,["videoMetadata"],i);const a=E(e,["thought"]);a!=null&&D(n,["thought"],a);const s=E(e,["inlineData"]);s!=null&&D(n,["inlineData"],Dle(t,s));const o=E(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=E(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=E(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=E(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=E(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=E(e,["text"]);return p!=null&&D(n,["text"],p),n}function Lg(t,e){const n={},i=E(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Mle(t,o))),D(n,["parts"],s)}const a=E(e,["role"]);return a!=null&&D(n,["role"],a),n}function Ile(t,e){const n={},i=E(e,["featureSelectionPreference"]);return i!=null&&D(n,["featureSelectionPreference"],i),n}function Rle(t,e){const n={},i=E(e,["method"]);i!=null&&D(n,["method"],i);const a=E(e,["category"]);a!=null&&D(n,["category"],a);const s=E(e,["threshold"]);return s!=null&&D(n,["threshold"],s),n}function Lle(){return{}}function Fle(t,e){const n={},i=E(e,["mode"]);i!=null&&D(n,["mode"],i);const a=E(e,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function $le(t,e){const n={},i=E(e,["dynamicRetrievalConfig"]);return i!=null&&D(n,["dynamicRetrievalConfig"],Fle(t,i)),n}function Ble(){return{}}function zle(t,e){const n={},i=E(e,["apiKeyString"]);return i!=null&&D(n,["apiKeyString"],i),n}function qle(t,e){const n={},i=E(e,["apiKeyConfig"]);i!=null&&D(n,["apiKeyConfig"],zle(t,i));const a=E(e,["authType"]);a!=null&&D(n,["authType"],a);const s=E(e,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=E(e,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=E(e,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=E(e,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function Ule(t,e){const n={},i=E(e,["authConfig"]);return i!=null&&D(n,["authConfig"],qle(t,i)),n}function uU(t,e){const n={},i=E(e,["retrieval"]);i!=null&&D(n,["retrieval"],i),E(e,["googleSearch"])!=null&&D(n,["googleSearch"],Lle());const s=E(e,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],$le(t,s)),E(e,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],Ble());const l=E(e,["googleMaps"]);l!=null&&D(n,["googleMaps"],Ule(t,l));const c=E(e,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const d=E(e,["functionDeclarations"]);return d!=null&&D(n,["functionDeclarations"],d),n}function Vle(t,e){const n={},i=E(e,["mode"]);i!=null&&D(n,["mode"],i);const a=E(e,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function Hle(t,e){const n={},i=E(e,["latitude"]);i!=null&&D(n,["latitude"],i);const a=E(e,["longitude"]);return a!=null&&D(n,["longitude"],a),n}function Gle(t,e){const n={},i=E(e,["latLng"]);return i!=null&&D(n,["latLng"],Hle(t,i)),n}function Wle(t,e){const n={},i=E(e,["functionCallingConfig"]);i!=null&&D(n,["functionCallingConfig"],Vle(t,i));const a=E(e,["retrievalConfig"]);return a!=null&&D(n,["retrievalConfig"],Gle(t,a)),n}function Yle(t,e){const n={},i=E(e,["voiceName"]);return i!=null&&D(n,["voiceName"],i),n}function Kle(t,e){const n={},i=E(e,["prebuiltVoiceConfig"]);return i!=null&&D(n,["prebuiltVoiceConfig"],Yle(t,i)),n}function Qle(t,e){const n={},i=E(e,["voiceConfig"]);i!=null&&D(n,["voiceConfig"],Kle(t,i));const a=E(e,["languageCode"]);return a!=null&&D(n,["languageCode"],a),n}function Xle(t,e){const n={},i=E(e,["includeThoughts"]);i!=null&&D(n,["includeThoughts"],i);const a=E(e,["thinkingBudget"]);return a!=null&&D(n,["thinkingBudget"],a),n}function Jle(t,e,n){const i={},a=E(e,["systemInstruction"]);n!==void 0&&a!=null&&D(n,["systemInstruction"],Lg(t,ts(t,a)));const s=E(e,["temperature"]);s!=null&&D(i,["temperature"],s);const o=E(e,["topP"]);o!=null&&D(i,["topP"],o);const l=E(e,["topK"]);l!=null&&D(i,["topK"],l);const c=E(e,["candidateCount"]);c!=null&&D(i,["candidateCount"],c);const d=E(e,["maxOutputTokens"]);d!=null&&D(i,["maxOutputTokens"],d);const f=E(e,["stopSequences"]);f!=null&&D(i,["stopSequences"],f);const p=E(e,["responseLogprobs"]);p!=null&&D(i,["responseLogprobs"],p);const y=E(e,["logprobs"]);y!=null&&D(i,["logprobs"],y);const x=E(e,["presencePenalty"]);x!=null&&D(i,["presencePenalty"],x);const v=E(e,["frequencyPenalty"]);v!=null&&D(i,["frequencyPenalty"],v);const S=E(e,["seed"]);S!=null&&D(i,["seed"],S);const N=E(e,["responseMimeType"]);N!=null&&D(i,["responseMimeType"],N);const _=E(e,["responseSchema"]);_!=null&&D(i,["responseSchema"],rU(t,_));const T=E(e,["routingConfig"]);T!=null&&D(i,["routingConfig"],T);const C=E(e,["modelSelectionConfig"]);C!=null&&D(i,["modelConfig"],Ile(t,C));const O=E(e,["safetySettings"]);if(n!==void 0&&O!=null){let te=O;Array.isArray(te)&&(te=te.map(X=>Rle(t,X))),D(n,["safetySettings"],te)}const k=E(e,["tools"]);if(n!==void 0&&k!=null){let te=HS(t,k);Array.isArray(te)&&(te=te.map(X=>uU(t,VS(t,X)))),D(n,["tools"],te)}const P=E(e,["toolConfig"]);n!==void 0&&P!=null&&D(n,["toolConfig"],Wle(t,P));const I=E(e,["labels"]);n!==void 0&&I!=null&&D(n,["labels"],I);const F=E(e,["cachedContent"]);n!==void 0&&F!=null&&D(n,["cachedContent"],pd(t,F));const B=E(e,["responseModalities"]);B!=null&&D(i,["responseModalities"],B);const $=E(e,["mediaResolution"]);$!=null&&D(i,["mediaResolution"],$);const L=E(e,["speechConfig"]);L!=null&&D(i,["speechConfig"],Qle(t,iU(t,L)));const V=E(e,["audioTimestamp"]);V!=null&&D(i,["audioTimestamp"],V);const H=E(e,["thinkingConfig"]);return H!=null&&D(i,["thinkingConfig"],Xle(t,H)),i}function m4(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["contents"]);if(a!=null){let o=fd(t,a);Array.isArray(o)&&(o=o.map(l=>Lg(t,l))),D(n,["contents"],o)}const s=E(e,["config"]);return s!=null&&D(n,["generationConfig"],Jle(t,s,n)),n}function Zle(t,e,n){const i={},a=E(e,["taskType"]);n!==void 0&&a!=null&&D(n,["instances[]","task_type"],a);const s=E(e,["title"]);n!==void 0&&s!=null&&D(n,["instances[]","title"],s);const o=E(e,["outputDimensionality"]);n!==void 0&&o!=null&&D(n,["parameters","outputDimensionality"],o);const l=E(e,["mimeType"]);n!==void 0&&l!=null&&D(n,["instances[]","mimeType"],l);const c=E(e,["autoTruncate"]);return n!==void 0&&c!=null&&D(n,["parameters","autoTruncate"],c),i}function ece(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["contents"]);a!=null&&D(n,["instances[]","content"],nU(t,a));const s=E(e,["config"]);return s!=null&&D(n,["config"],Zle(t,s,n)),n}function tce(t,e,n){const i={},a=E(e,["outputGcsUri"]);n!==void 0&&a!=null&&D(n,["parameters","storageUri"],a);const s=E(e,["negativePrompt"]);n!==void 0&&s!=null&&D(n,["parameters","negativePrompt"],s);const o=E(e,["numberOfImages"]);n!==void 0&&o!=null&&D(n,["parameters","sampleCount"],o);const l=E(e,["aspectRatio"]);n!==void 0&&l!=null&&D(n,["parameters","aspectRatio"],l);const c=E(e,["guidanceScale"]);n!==void 0&&c!=null&&D(n,["parameters","guidanceScale"],c);const d=E(e,["seed"]);n!==void 0&&d!=null&&D(n,["parameters","seed"],d);const f=E(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&D(n,["parameters","safetySetting"],f);const p=E(e,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const y=E(e,["includeSafetyAttributes"]);n!==void 0&&y!=null&&D(n,["parameters","includeSafetyAttributes"],y);const x=E(e,["includeRaiReason"]);n!==void 0&&x!=null&&D(n,["parameters","includeRaiReason"],x);const v=E(e,["language"]);n!==void 0&&v!=null&&D(n,["parameters","language"],v);const S=E(e,["outputMimeType"]);n!==void 0&&S!=null&&D(n,["parameters","outputOptions","mimeType"],S);const N=E(e,["outputCompressionQuality"]);n!==void 0&&N!=null&&D(n,["parameters","outputOptions","compressionQuality"],N);const _=E(e,["addWatermark"]);n!==void 0&&_!=null&&D(n,["parameters","addWatermark"],_);const T=E(e,["enhancePrompt"]);return n!==void 0&&T!=null&&D(n,["parameters","enhancePrompt"],T),i}function nce(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=E(e,["config"]);return s!=null&&D(n,["config"],tce(t,s,n)),n}function oD(t,e){const n={},i=E(e,["gcsUri"]);i!=null&&D(n,["gcsUri"],i);const a=E(e,["imageBytes"]);a!=null&&D(n,["bytesBase64Encoded"],md(t,a));const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function rce(t,e){const n={},i=E(e,["maskMode"]);i!=null&&D(n,["maskMode"],i);const a=E(e,["segmentationClasses"]);a!=null&&D(n,["maskClasses"],a);const s=E(e,["maskDilation"]);return s!=null&&D(n,["dilation"],s),n}function ice(t,e){const n={},i=E(e,["controlType"]);i!=null&&D(n,["controlType"],i);const a=E(e,["enableControlImageComputation"]);return a!=null&&D(n,["computeControl"],a),n}function ace(t,e){const n={},i=E(e,["styleDescription"]);return i!=null&&D(n,["styleDescription"],i),n}function sce(t,e){const n={},i=E(e,["subjectType"]);i!=null&&D(n,["subjectType"],i);const a=E(e,["subjectDescription"]);return a!=null&&D(n,["subjectDescription"],a),n}function oce(t,e){const n={},i=E(e,["referenceImage"]);i!=null&&D(n,["referenceImage"],oD(t,i));const a=E(e,["referenceId"]);a!=null&&D(n,["referenceId"],a);const s=E(e,["referenceType"]);s!=null&&D(n,["referenceType"],s);const o=E(e,["maskImageConfig"]);o!=null&&D(n,["maskImageConfig"],rce(t,o));const l=E(e,["controlImageConfig"]);l!=null&&D(n,["controlImageConfig"],ice(t,l));const c=E(e,["styleImageConfig"]);c!=null&&D(n,["styleImageConfig"],ace(t,c));const d=E(e,["subjectImageConfig"]);return d!=null&&D(n,["subjectImageConfig"],sce(t,d)),n}function lce(t,e,n){const i={},a=E(e,["outputGcsUri"]);n!==void 0&&a!=null&&D(n,["parameters","storageUri"],a);const s=E(e,["negativePrompt"]);n!==void 0&&s!=null&&D(n,["parameters","negativePrompt"],s);const o=E(e,["numberOfImages"]);n!==void 0&&o!=null&&D(n,["parameters","sampleCount"],o);const l=E(e,["aspectRatio"]);n!==void 0&&l!=null&&D(n,["parameters","aspectRatio"],l);const c=E(e,["guidanceScale"]);n!==void 0&&c!=null&&D(n,["parameters","guidanceScale"],c);const d=E(e,["seed"]);n!==void 0&&d!=null&&D(n,["parameters","seed"],d);const f=E(e,["safetyFilterLevel"]);n!==void 0&&f!=null&&D(n,["parameters","safetySetting"],f);const p=E(e,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const y=E(e,["includeSafetyAttributes"]);n!==void 0&&y!=null&&D(n,["parameters","includeSafetyAttributes"],y);const x=E(e,["includeRaiReason"]);n!==void 0&&x!=null&&D(n,["parameters","includeRaiReason"],x);const v=E(e,["language"]);n!==void 0&&v!=null&&D(n,["parameters","language"],v);const S=E(e,["outputMimeType"]);n!==void 0&&S!=null&&D(n,["parameters","outputOptions","mimeType"],S);const N=E(e,["outputCompressionQuality"]);n!==void 0&&N!=null&&D(n,["parameters","outputOptions","compressionQuality"],N);const _=E(e,["editMode"]);n!==void 0&&_!=null&&D(n,["parameters","editMode"],_);const T=E(e,["baseSteps"]);return n!==void 0&&T!=null&&D(n,["parameters","editConfig","baseSteps"],T),i}function cce(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=E(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>oce(t,c))),D(n,["instances[0]","referenceImages"],l)}const o=E(e,["config"]);return o!=null&&D(n,["config"],lce(t,o,n)),n}function uce(t,e,n){const i={},a=E(e,["includeRaiReason"]);n!==void 0&&a!=null&&D(n,["parameters","includeRaiReason"],a);const s=E(e,["outputMimeType"]);n!==void 0&&s!=null&&D(n,["parameters","outputOptions","mimeType"],s);const o=E(e,["outputCompressionQuality"]);n!==void 0&&o!=null&&D(n,["parameters","outputOptions","compressionQuality"],o);const l=E(e,["numberOfImages"]);n!==void 0&&l!=null&&D(n,["parameters","sampleCount"],l);const c=E(e,["mode"]);return n!==void 0&&c!=null&&D(n,["parameters","mode"],c),i}function dce(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["image"]);a!=null&&D(n,["instances[0]","image"],oD(t,a));const s=E(e,["upscaleFactor"]);s!=null&&D(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=E(e,["config"]);return o!=null&&D(n,["config"],uce(t,o,n)),n}function hce(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","name"],Ur(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function fce(t,e,n){const i={},a=E(e,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=E(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=E(e,["filter"]);n!==void 0&&o!=null&&D(n,["_query","filter"],o);const l=E(e,["queryBase"]);return n!==void 0&&l!=null&&D(n,["_url","models_url"],oU(t,l)),i}function pce(t,e){const n={},i=E(e,["config"]);return i!=null&&D(n,["config"],fce(t,i,n)),n}function mce(t,e,n){const i={},a=E(e,["displayName"]);n!==void 0&&a!=null&&D(n,["displayName"],a);const s=E(e,["description"]);n!==void 0&&s!=null&&D(n,["description"],s);const o=E(e,["defaultCheckpointId"]);return n!==void 0&&o!=null&&D(n,["defaultCheckpointId"],o),i}function gce(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],mce(t,a,n)),n}function yce(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","name"],Ur(t,i));const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function xce(t,e,n){const i={},a=E(e,["systemInstruction"]);n!==void 0&&a!=null&&D(n,["systemInstruction"],Lg(t,ts(t,a)));const s=E(e,["tools"]);if(n!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>uU(t,c))),D(n,["tools"],l)}const o=E(e,["generationConfig"]);return n!==void 0&&o!=null&&D(n,["generationConfig"],o),i}function vce(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["contents"]);if(a!=null){let o=fd(t,a);Array.isArray(o)&&(o=o.map(l=>Lg(t,l))),D(n,["contents"],o)}const s=E(e,["config"]);return s!=null&&D(n,["config"],xce(t,s,n)),n}function bce(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["contents"]);if(a!=null){let o=fd(t,a);Array.isArray(o)&&(o=o.map(l=>Lg(t,l))),D(n,["contents"],o)}const s=E(e,["config"]);return s!=null&&D(n,["config"],s),n}function jce(t,e,n){const i={},a=E(e,["numberOfVideos"]);n!==void 0&&a!=null&&D(n,["parameters","sampleCount"],a);const s=E(e,["outputGcsUri"]);n!==void 0&&s!=null&&D(n,["parameters","storageUri"],s);const o=E(e,["fps"]);n!==void 0&&o!=null&&D(n,["parameters","fps"],o);const l=E(e,["durationSeconds"]);n!==void 0&&l!=null&&D(n,["parameters","durationSeconds"],l);const c=E(e,["seed"]);n!==void 0&&c!=null&&D(n,["parameters","seed"],c);const d=E(e,["aspectRatio"]);n!==void 0&&d!=null&&D(n,["parameters","aspectRatio"],d);const f=E(e,["resolution"]);n!==void 0&&f!=null&&D(n,["parameters","resolution"],f);const p=E(e,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const y=E(e,["pubsubTopic"]);n!==void 0&&y!=null&&D(n,["parameters","pubsubTopic"],y);const x=E(e,["negativePrompt"]);n!==void 0&&x!=null&&D(n,["parameters","negativePrompt"],x);const v=E(e,["enhancePrompt"]);return n!==void 0&&v!=null&&D(n,["parameters","enhancePrompt"],v),i}function wce(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["_url","model"],Ur(t,i));const a=E(e,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=E(e,["image"]);s!=null&&D(n,["instances[0]","image"],oD(t,s));const o=E(e,["config"]);return o!=null&&D(n,["config"],jce(t,o,n)),n}function Sce(t,e){const n={},i=E(e,["data"]);i!=null&&D(n,["data"],i);const a=E(e,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function Nce(t,e){const n={},i=E(e,["thought"]);i!=null&&D(n,["thought"],i);const a=E(e,["inlineData"]);a!=null&&D(n,["inlineData"],Sce(t,a));const s=E(e,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=E(e,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=E(e,["fileData"]);l!=null&&D(n,["fileData"],l);const c=E(e,["functionCall"]);c!=null&&D(n,["functionCall"],c);const d=E(e,["functionResponse"]);d!=null&&D(n,["functionResponse"],d);const f=E(e,["text"]);return f!=null&&D(n,["text"],f),n}function _ce(t,e){const n={},i=E(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Nce(t,o))),D(n,["parts"],s)}const a=E(e,["role"]);return a!=null&&D(n,["role"],a),n}function Cce(t,e){const n={},i=E(e,["citationSources"]);return i!=null&&D(n,["citations"],i),n}function Tce(t,e){const n={},i=E(e,["content"]);i!=null&&D(n,["content"],_ce(t,i));const a=E(e,["citationMetadata"]);a!=null&&D(n,["citationMetadata"],Cce(t,a));const s=E(e,["tokenCount"]);s!=null&&D(n,["tokenCount"],s);const o=E(e,["finishReason"]);o!=null&&D(n,["finishReason"],o);const l=E(e,["avgLogprobs"]);l!=null&&D(n,["avgLogprobs"],l);const c=E(e,["groundingMetadata"]);c!=null&&D(n,["groundingMetadata"],c);const d=E(e,["index"]);d!=null&&D(n,["index"],d);const f=E(e,["logprobsResult"]);f!=null&&D(n,["logprobsResult"],f);const p=E(e,["safetyRatings"]);return p!=null&&D(n,["safetyRatings"],p),n}function g4(t,e){const n={},i=E(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Tce(t,c))),D(n,["candidates"],l)}const a=E(e,["modelVersion"]);a!=null&&D(n,["modelVersion"],a);const s=E(e,["promptFeedback"]);s!=null&&D(n,["promptFeedback"],s);const o=E(e,["usageMetadata"]);return o!=null&&D(n,["usageMetadata"],o),n}function kce(t,e){const n={},i=E(e,["values"]);return i!=null&&D(n,["values"],i),n}function Ace(){return{}}function Ece(t,e){const n={},i=E(e,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>kce(t,o))),D(n,["embeddings"],s)}return E(e,["metadata"])!=null&&D(n,["metadata"],Ace()),n}function Pce(t,e){const n={},i=E(e,["bytesBase64Encoded"]);i!=null&&D(n,["imageBytes"],md(t,i));const a=E(e,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function dU(t,e){const n={},i=E(e,["safetyAttributes","categories"]);i!=null&&D(n,["categories"],i);const a=E(e,["safetyAttributes","scores"]);a!=null&&D(n,["scores"],a);const s=E(e,["contentType"]);return s!=null&&D(n,["contentType"],s),n}function Oce(t,e){const n={},i=E(e,["_self"]);i!=null&&D(n,["image"],Pce(t,i));const a=E(e,["raiFilteredReason"]);a!=null&&D(n,["raiFilteredReason"],a);const s=E(e,["_self"]);return s!=null&&D(n,["safetyAttributes"],dU(t,s)),n}function Dce(t,e){const n={},i=E(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Oce(t,o))),D(n,["generatedImages"],s)}const a=E(e,["positivePromptSafetyAttributes"]);return a!=null&&D(n,["positivePromptSafetyAttributes"],dU(t,a)),n}function Mce(t,e){const n={},i=E(e,["baseModel"]);i!=null&&D(n,["baseModel"],i);const a=E(e,["createTime"]);a!=null&&D(n,["createTime"],a);const s=E(e,["updateTime"]);return s!=null&&D(n,["updateTime"],s),n}function RE(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const s=E(e,["description"]);s!=null&&D(n,["description"],s);const o=E(e,["version"]);o!=null&&D(n,["version"],o);const l=E(e,["_self"]);l!=null&&D(n,["tunedModelInfo"],Mce(t,l));const c=E(e,["inputTokenLimit"]);c!=null&&D(n,["inputTokenLimit"],c);const d=E(e,["outputTokenLimit"]);d!=null&&D(n,["outputTokenLimit"],d);const f=E(e,["supportedGenerationMethods"]);return f!=null&&D(n,["supportedActions"],f),n}function Ice(t,e){const n={},i=E(e,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=E(e,["_self"]);if(a!=null){let s=lU(t,a);Array.isArray(s)&&(s=s.map(o=>RE(t,o))),D(n,["models"],s)}return n}function Rce(){return{}}function Lce(t,e){const n={},i=E(e,["totalTokens"]);i!=null&&D(n,["totalTokens"],i);const a=E(e,["cachedContentTokenCount"]);return a!=null&&D(n,["cachedContentTokenCount"],a),n}function Fce(t,e){const n={},i=E(e,["video","uri"]);i!=null&&D(n,["uri"],i);const a=E(e,["video","encodedVideo"]);a!=null&&D(n,["videoBytes"],md(t,a));const s=E(e,["encoding"]);return s!=null&&D(n,["mimeType"],s),n}function $ce(t,e){const n={},i=E(e,["_self"]);return i!=null&&D(n,["video"],Fce(t,i)),n}function Bce(t,e){const n={},i=E(e,["generatedSamples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$ce(t,l))),D(n,["generatedVideos"],o)}const a=E(e,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=E(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function zce(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["metadata"]);a!=null&&D(n,["metadata"],a);const s=E(e,["done"]);s!=null&&D(n,["done"],s);const o=E(e,["error"]);o!=null&&D(n,["error"],o);const l=E(e,["response","generateVideoResponse"]);return l!=null&&D(n,["response"],Bce(t,l)),n}function qce(t,e){const n={},i=E(e,["displayName"]);i!=null&&D(n,["displayName"],i);const a=E(e,["data"]);a!=null&&D(n,["data"],a);const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Uce(t,e){const n={},i=E(e,["videoMetadata"]);i!=null&&D(n,["videoMetadata"],i);const a=E(e,["thought"]);a!=null&&D(n,["thought"],a);const s=E(e,["inlineData"]);s!=null&&D(n,["inlineData"],qce(t,s));const o=E(e,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=E(e,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=E(e,["fileData"]);c!=null&&D(n,["fileData"],c);const d=E(e,["functionCall"]);d!=null&&D(n,["functionCall"],d);const f=E(e,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=E(e,["text"]);return p!=null&&D(n,["text"],p),n}function Vce(t,e){const n={},i=E(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Uce(t,o))),D(n,["parts"],s)}const a=E(e,["role"]);return a!=null&&D(n,["role"],a),n}function Hce(t,e){const n={},i=E(e,["citations"]);return i!=null&&D(n,["citations"],i),n}function Gce(t,e){const n={},i=E(e,["content"]);i!=null&&D(n,["content"],Vce(t,i));const a=E(e,["citationMetadata"]);a!=null&&D(n,["citationMetadata"],Hce(t,a));const s=E(e,["finishMessage"]);s!=null&&D(n,["finishMessage"],s);const o=E(e,["finishReason"]);o!=null&&D(n,["finishReason"],o);const l=E(e,["avgLogprobs"]);l!=null&&D(n,["avgLogprobs"],l);const c=E(e,["groundingMetadata"]);c!=null&&D(n,["groundingMetadata"],c);const d=E(e,["index"]);d!=null&&D(n,["index"],d);const f=E(e,["logprobsResult"]);f!=null&&D(n,["logprobsResult"],f);const p=E(e,["safetyRatings"]);return p!=null&&D(n,["safetyRatings"],p),n}function y4(t,e){const n={},i=E(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>Gce(t,f))),D(n,["candidates"],d)}const a=E(e,["createTime"]);a!=null&&D(n,["createTime"],a);const s=E(e,["responseId"]);s!=null&&D(n,["responseId"],s);const o=E(e,["modelVersion"]);o!=null&&D(n,["modelVersion"],o);const l=E(e,["promptFeedback"]);l!=null&&D(n,["promptFeedback"],l);const c=E(e,["usageMetadata"]);return c!=null&&D(n,["usageMetadata"],c),n}function Wce(t,e){const n={},i=E(e,["truncated"]);i!=null&&D(n,["truncated"],i);const a=E(e,["token_count"]);return a!=null&&D(n,["tokenCount"],a),n}function Yce(t,e){const n={},i=E(e,["values"]);i!=null&&D(n,["values"],i);const a=E(e,["statistics"]);return a!=null&&D(n,["statistics"],Wce(t,a)),n}function Kce(t,e){const n={},i=E(e,["billableCharacterCount"]);return i!=null&&D(n,["billableCharacterCount"],i),n}function Qce(t,e){const n={},i=E(e,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Yce(t,o))),D(n,["embeddings"],s)}const a=E(e,["metadata"]);return a!=null&&D(n,["metadata"],Kce(t,a)),n}function Xce(t,e){const n={},i=E(e,["gcsUri"]);i!=null&&D(n,["gcsUri"],i);const a=E(e,["bytesBase64Encoded"]);a!=null&&D(n,["imageBytes"],md(t,a));const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function hU(t,e){const n={},i=E(e,["safetyAttributes","categories"]);i!=null&&D(n,["categories"],i);const a=E(e,["safetyAttributes","scores"]);a!=null&&D(n,["scores"],a);const s=E(e,["contentType"]);return s!=null&&D(n,["contentType"],s),n}function lD(t,e){const n={},i=E(e,["_self"]);i!=null&&D(n,["image"],Xce(t,i));const a=E(e,["raiFilteredReason"]);a!=null&&D(n,["raiFilteredReason"],a);const s=E(e,["_self"]);s!=null&&D(n,["safetyAttributes"],hU(t,s));const o=E(e,["prompt"]);return o!=null&&D(n,["enhancedPrompt"],o),n}function Jce(t,e){const n={},i=E(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>lD(t,o))),D(n,["generatedImages"],s)}const a=E(e,["positivePromptSafetyAttributes"]);return a!=null&&D(n,["positivePromptSafetyAttributes"],hU(t,a)),n}function Zce(t,e){const n={},i=E(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>lD(t,s))),D(n,["generatedImages"],a)}return n}function eue(t,e){const n={},i=E(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>lD(t,s))),D(n,["generatedImages"],a)}return n}function tue(t,e){const n={},i=E(e,["endpoint"]);i!=null&&D(n,["name"],i);const a=E(e,["deployedModelId"]);return a!=null&&D(n,["deployedModelId"],a),n}function nue(t,e){const n={},i=E(e,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&D(n,["baseModel"],i);const a=E(e,["createTime"]);a!=null&&D(n,["createTime"],a);const s=E(e,["updateTime"]);return s!=null&&D(n,["updateTime"],s),n}function rue(t,e){const n={},i=E(e,["checkpointId"]);i!=null&&D(n,["checkpointId"],i);const a=E(e,["epoch"]);a!=null&&D(n,["epoch"],a);const s=E(e,["step"]);return s!=null&&D(n,["step"],s),n}function LE(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["displayName"]);a!=null&&D(n,["displayName"],a);const s=E(e,["description"]);s!=null&&D(n,["description"],s);const o=E(e,["versionId"]);o!=null&&D(n,["version"],o);const l=E(e,["deployedModels"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(x=>tue(t,x))),D(n,["endpoints"],y)}const c=E(e,["labels"]);c!=null&&D(n,["labels"],c);const d=E(e,["_self"]);d!=null&&D(n,["tunedModelInfo"],nue(t,d));const f=E(e,["defaultCheckpointId"]);f!=null&&D(n,["defaultCheckpointId"],f);const p=E(e,["checkpoints"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(x=>rue(t,x))),D(n,["checkpoints"],y)}return n}function iue(t,e){const n={},i=E(e,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=E(e,["_self"]);if(a!=null){let s=lU(t,a);Array.isArray(s)&&(s=s.map(o=>LE(t,o))),D(n,["models"],s)}return n}function aue(){return{}}function sue(t,e){const n={},i=E(e,["totalTokens"]);return i!=null&&D(n,["totalTokens"],i),n}function oue(t,e){const n={},i=E(e,["tokensInfo"]);return i!=null&&D(n,["tokensInfo"],i),n}function lue(t,e){const n={},i=E(e,["gcsUri"]);i!=null&&D(n,["uri"],i);const a=E(e,["bytesBase64Encoded"]);a!=null&&D(n,["videoBytes"],md(t,a));const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function cue(t,e){const n={},i=E(e,["_self"]);return i!=null&&D(n,["video"],lue(t,i)),n}function uue(t,e){const n={},i=E(e,["videos"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>cue(t,l))),D(n,["generatedVideos"],o)}const a=E(e,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=E(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function due(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["metadata"]);a!=null&&D(n,["metadata"],a);const s=E(e,["done"]);s!=null&&D(n,["done"],s);const o=E(e,["error"]);o!=null&&D(n,["error"],o);const l=E(e,["response"]);return l!=null&&D(n,["response"],uue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hue="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function fue(t,e,n){const i=new Pse;let a;if(n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),t.isVertexAI()){const s=rle(t,a);Object.assign(i,s)}else{const s=nle(t,a);Object.assign(i,s)}e(i)}class pue{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i,a,s;const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const d=xue(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d);else{const O=this.apiClient.getApiKey();c=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${O}`}let f=()=>{};const p=new Promise(O=>{f=O}),y=e.callbacks,x=function(){var O;(O=y==null?void 0:y.onopen)===null||O===void 0||O.call(y),f({})},v=this.apiClient,S={onopen:x,onmessage:O=>{fue(v,y.onmessage,O)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(O){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(O){}},N=this.webSocketFactory.create(c,yue(d),S);N.connect(),await p;let _=Ur(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const O=this.apiClient.getProject(),k=this.apiClient.getLocation();_=`projects/${O}/locations/${k}/`+_}let T={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ld.AUDIO]}:e.config.responseModalities=[ld.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=Toe(this.apiClient,C):T=Coe(this.apiClient,C),delete T.config,N.send(JSON.stringify(T)),new gue(N,this.apiClient)}}const mue={turnComplete:!0};class gue{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=fd(e,n.turns),e.isVertexAI()?i=i.map(a=>Lg(e,a)):i=i.map(a=>WS(e,a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(hue)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},mue),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Doe(this.apiClient,e)}:n={realtimeInput:Ooe(this.apiClient,e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function yue(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function xue(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vue extends Db{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var a;let s;const o=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((a=c==null?void 0:c.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let l;return s?l={generatedImages:o,positivePromptSafetyAttributes:s}:l={generatedImages:o},l}),this.list=async n=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new GS(ng.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(a)}}async generateContentInternal(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=m4(this.apiClient,e);return l=sn("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=y4(this.apiClient,f),y=new xj;return Object.assign(y,p),y})}else{const d=p4(this.apiClient,e);return l=sn("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=g4(this.apiClient,f),y=new xj;return Object.assign(y,p),y})}}async generateContentStreamInternal(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=m4(this.apiClient,e);l=sn("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return vw(this,arguments,function*(){var y,x,v,S;try{for(var N=!0,_=ME(p),T;T=yield aa(_.next()),y=T.done,!y;N=!0){S=T.value,N=!1;const O=y4(f,yield aa(S.json())),k=new xj;Object.assign(k,O),yield yield aa(k)}}catch(C){x={error:C}}finally{try{!N&&!y&&(v=_.return)&&(yield aa(v.call(_)))}finally{if(x)throw x.error}}})})}else{const d=p4(this.apiClient,e);l=sn("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return vw(this,arguments,function*(){var y,x,v,S;try{for(var N=!0,_=ME(p),T;T=yield aa(_.next()),y=T.done,!y;N=!0){S=T.value,N=!1;const O=g4(f,yield aa(S.json())),k=new xj;Object.assign(k,O),yield yield aa(k)}}catch(C){x={error:C}}finally{try{!N&&!y&&(v=_.return)&&(yield aa(v.call(_)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=ece(this.apiClient,e);return l=sn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Qce(this.apiClient,f),y=new t4;return Object.assign(y,p),y})}else{const d=vle(this.apiClient,e);return l=sn("{model}:batchEmbedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Ece(this.apiClient,f),y=new t4;return Object.assign(y,p),y})}}async generateImagesInternal(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=nce(this.apiClient,e);return l=sn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Jce(this.apiClient,f),y=new n4;return Object.assign(y,p),y})}else{const d=jle(this.apiClient,e);return l=sn("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Dce(this.apiClient,f),y=new n4;return Object.assign(y,p),y})}}async editImageInternal(e){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=cce(this.apiClient,e);return s=sn("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=Zce(this.apiClient,c),f=new _se;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=dce(this.apiClient,e);return s=sn("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=eue(this.apiClient,c),f=new Cse;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=hce(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>LE(this.apiClient,f))}else{const d=wle(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>RE(this.apiClient,f))}}async listInternal(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=pce(this.apiClient,e);return l=sn("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=iue(this.apiClient,f),y=new r4;return Object.assign(y,p),y})}else{const d=Nle(this.apiClient,e);return l=sn("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Ice(this.apiClient,f),y=new r4;return Object.assign(y,p),y})}}async update(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=gce(this.apiClient,e);return l=sn("{model}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>LE(this.apiClient,f))}else{const d=Cle(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>RE(this.apiClient,f))}}async delete(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=yce(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=aue(),p=new i4;return Object.assign(p,f),p})}else{const d=Tle(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Rce(),p=new i4;return Object.assign(p,f),p})}}async countTokens(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=vce(this.apiClient,e);return l=sn("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=sue(this.apiClient,f),y=new a4;return Object.assign(y,p),y})}else{const d=Ale(this.apiClient,e);return l=sn("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Lce(this.apiClient,f),y=new a4;return Object.assign(y,p),y})}}async computeTokens(e){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=bce(this.apiClient,e);return s=sn("{model}:computeTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>{const d=oue(this.apiClient,c),f=new Tse;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=wce(this.apiClient,e);return l=sn("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>due(this.apiClient,f))}else{const d=Ole(this.apiClient,e);return l=sn("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>zce(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bue(t,e){const n={},i=E(e,["operationName"]);i!=null&&D(n,["_url","operationName"],i);const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function jue(t,e){const n={},i=E(e,["operationName"]);i!=null&&D(n,["_url","operationName"],i);const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function wue(t,e){const n={},i=E(e,["operationName"]);i!=null&&D(n,["operationName"],i);const a=E(e,["resourceName"]);a!=null&&D(n,["_url","resourceName"],a);const s=E(e,["config"]);return s!=null&&D(n,["config"],s),n}function Sue(t,e){const n={},i=E(e,["video","uri"]);i!=null&&D(n,["uri"],i);const a=E(e,["video","encodedVideo"]);a!=null&&D(n,["videoBytes"],md(t,a));const s=E(e,["encoding"]);return s!=null&&D(n,["mimeType"],s),n}function Nue(t,e){const n={},i=E(e,["_self"]);return i!=null&&D(n,["video"],Sue(t,i)),n}function _ue(t,e){const n={},i=E(e,["generatedSamples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Nue(t,l))),D(n,["generatedVideos"],o)}const a=E(e,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=E(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function Cue(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["metadata"]);a!=null&&D(n,["metadata"],a);const s=E(e,["done"]);s!=null&&D(n,["done"],s);const o=E(e,["error"]);o!=null&&D(n,["error"],o);const l=E(e,["response","generateVideoResponse"]);return l!=null&&D(n,["response"],_ue(t,l)),n}function Tue(t,e){const n={},i=E(e,["gcsUri"]);i!=null&&D(n,["uri"],i);const a=E(e,["bytesBase64Encoded"]);a!=null&&D(n,["videoBytes"],md(t,a));const s=E(e,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function kue(t,e){const n={},i=E(e,["_self"]);return i!=null&&D(n,["video"],Tue(t,i)),n}function Aue(t,e){const n={},i=E(e,["videos"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>kue(t,l))),D(n,["generatedVideos"],o)}const a=E(e,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=E(e,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function x4(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["metadata"]);a!=null&&D(n,["metadata"],a);const s=E(e,["done"]);s!=null&&D(n,["done"],s);const o=E(e,["error"]);o!=null&&D(n,["error"],o);const l=E(e,["response"]);return l!=null&&D(n,["response"],Aue(t,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Eue extends Db{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let s;return i&&"httpOptions"in i&&(s=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=jue(this.apiClient,e);return l=sn("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>x4(this.apiClient,f))}else{const d=bue(this.apiClient,e);return l=sn("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Cue(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=wue(this.apiClient,e);return s=sn("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>x4(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pue="Content-Type",Oue="X-Server-Timeout",Due="User-Agent",Mue="x-goog-api-client",Iue="0.14.1",Rue=`google-genai-sdk/${Iue}`,Lue="v1beta1",Fue="v1beta",v4=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class fU extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class FE extends Error{constructor(e,n){n?super(e,{cause:n}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class $ue{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Lue,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Fue,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const a=[this.getRequestUrlInternal(n)];return i&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))a.searchParams.append(o,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(a,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[a,s]of Object.entries(n))typeof s=="object"?i[a]=Object.assign(Object.assign({},i[a]),s):s!==void 0&&(i[a]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,i);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(a,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const a=new AbortController,s=a.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>a.abort(),n.timeout),i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=s}return e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await b4(a),new DE(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await b4(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var n;return vw(this,arguments,function*(){const a=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:c}=yield aa(a.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(c);try{const p=JSON.parse(d);if("error"in p){const y=JSON.parse(JSON.stringify(p.error)),x=y.status,v=y.code,S=`got status: ${x}. ${JSON.stringify(p)}`;if(v>=400&&v<500)throw new fU(S);if(v>=500&&v<600)throw new FE(S)}}catch(p){const y=p;if(y.name==="ClientError"||y.name==="ServerError")throw p}o+=d;let f=o.match(v4);for(;f;){const p=f[1];try{const y=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield aa(new DE(y)),o=o.slice(f[0].length),f=o.match(v4)}catch(y){throw new Error(`exception parsing stream chunk ${p}. ${y}`)}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Rue+" "+this.clientOptions.userAgentExtra;return e[Due]=n,e[Mue]=n,e[Pue]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))n.append(i,a);e.timeout&&e.timeout>0&&n.append(Oue,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);a.sizeBytes=String(o.size);const l=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=l;const c=await this.fetchUploadUrl(a,n);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let a={};n!=null&&n.httpOptions?a=n.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:sn("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:a});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(i=o==null?void 0:o.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function b4(t){var e;if(t===void 0)throw new FE("response is undefined");if(!t.ok){const n=t.status,i=t.statusText;let a;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?a=await t.json():a={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=`got status: ${n} ${i}. ${JSON.stringify(a)}`;throw n>=400&&n<500?new fU(s):n>=500&&n<600?new FE(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bue(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["_url","name"],i);const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function zue(t,e,n){const i={},a=E(e,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=E(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=E(e,["filter"]);return n!==void 0&&o!=null&&D(n,["_query","filter"],o),i}function que(t,e){const n={},i=E(e,["config"]);return i!=null&&D(n,["config"],zue(t,i,n)),n}function Uue(t,e){const n={},i=E(e,["textInput"]);i!=null&&D(n,["textInput"],i);const a=E(e,["output"]);return a!=null&&D(n,["output"],a),n}function Vue(t,e){const n={};if(E(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=E(e,["examples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>Uue(t,s))),D(n,["examples","examples"],a)}return n}function Hue(t,e,n){const i={};if(E(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=E(e,["tunedModelDisplayName"]);if(n!==void 0&&a!=null&&D(n,["displayName"],a),E(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=E(e,["epochCount"]);n!==void 0&&s!=null&&D(n,["tuningTask","hyperparameters","epochCount"],s);const o=E(e,["learningRateMultiplier"]);if(o!=null&&D(i,["tuningTask","hyperparameters","learningRateMultiplier"],o),E(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(E(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=E(e,["batchSize"]);n!==void 0&&l!=null&&D(n,["tuningTask","hyperparameters","batchSize"],l);const c=E(e,["learningRate"]);return n!==void 0&&c!=null&&D(n,["tuningTask","hyperparameters","learningRate"],c),i}function Gue(t,e){const n={},i=E(e,["baseModel"]);i!=null&&D(n,["baseModel"],i);const a=E(e,["trainingDataset"]);a!=null&&D(n,["tuningTask","trainingData"],Vue(t,a));const s=E(e,["config"]);return s!=null&&D(n,["config"],Hue(t,s,n)),n}function Wue(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["_url","name"],i);const a=E(e,["config"]);return a!=null&&D(n,["config"],a),n}function Yue(t,e,n){const i={},a=E(e,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=E(e,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=E(e,["filter"]);return n!==void 0&&o!=null&&D(n,["_query","filter"],o),i}function Kue(t,e){const n={},i=E(e,["config"]);return i!=null&&D(n,["config"],Yue(t,i,n)),n}function Que(t,e,n){const i={},a=E(e,["gcsUri"]);if(n!==void 0&&a!=null&&D(n,["supervisedTuningSpec","trainingDatasetUri"],a),E(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Xue(t,e){const n={},i=E(e,["gcsUri"]);return i!=null&&D(n,["validationDatasetUri"],i),n}function Jue(t,e,n){const i={},a=E(e,["validationDataset"]);n!==void 0&&a!=null&&D(n,["supervisedTuningSpec"],Xue(t,a));const s=E(e,["tunedModelDisplayName"]);n!==void 0&&s!=null&&D(n,["tunedModelDisplayName"],s);const o=E(e,["description"]);n!==void 0&&o!=null&&D(n,["description"],o);const l=E(e,["epochCount"]);n!==void 0&&l!=null&&D(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=E(e,["learningRateMultiplier"]);n!==void 0&&c!=null&&D(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const d=E(e,["exportLastCheckpointOnly"]);n!==void 0&&d!=null&&D(n,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const f=E(e,["adapterSize"]);if(n!==void 0&&f!=null&&D(n,["supervisedTuningSpec","hyperParameters","adapterSize"],f),E(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(E(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function Zue(t,e){const n={},i=E(e,["baseModel"]);i!=null&&D(n,["baseModel"],i);const a=E(e,["trainingDataset"]);a!=null&&D(n,["supervisedTuningSpec","trainingDatasetUri"],Que(t,a,n));const s=E(e,["config"]);return s!=null&&D(n,["config"],Jue(t,s,n)),n}function ede(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["model"],i);const a=E(e,["name"]);return a!=null&&D(n,["endpoint"],a),n}function pU(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["state"]);a!=null&&D(n,["state"],aU(t,a));const s=E(e,["createTime"]);s!=null&&D(n,["createTime"],s);const o=E(e,["tuningTask","startTime"]);o!=null&&D(n,["startTime"],o);const l=E(e,["tuningTask","completeTime"]);l!=null&&D(n,["endTime"],l);const c=E(e,["updateTime"]);c!=null&&D(n,["updateTime"],c);const d=E(e,["description"]);d!=null&&D(n,["description"],d);const f=E(e,["baseModel"]);f!=null&&D(n,["baseModel"],f);const p=E(e,["_self"]);p!=null&&D(n,["tunedModel"],ede(t,p));const y=E(e,["distillationSpec"]);y!=null&&D(n,["distillationSpec"],y);const x=E(e,["experiment"]);x!=null&&D(n,["experiment"],x);const v=E(e,["labels"]);v!=null&&D(n,["labels"],v);const S=E(e,["pipelineJob"]);S!=null&&D(n,["pipelineJob"],S);const N=E(e,["tunedModelDisplayName"]);return N!=null&&D(n,["tunedModelDisplayName"],N),n}function tde(t,e){const n={},i=E(e,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=E(e,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>pU(t,o))),D(n,["tuningJobs"],s)}return n}function nde(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["metadata"]);a!=null&&D(n,["metadata"],a);const s=E(e,["done"]);s!=null&&D(n,["done"],s);const o=E(e,["error"]);return o!=null&&D(n,["error"],o),n}function rde(t,e){const n={},i=E(e,["checkpointId"]);i!=null&&D(n,["checkpointId"],i);const a=E(e,["epoch"]);a!=null&&D(n,["epoch"],a);const s=E(e,["step"]);s!=null&&D(n,["step"],s);const o=E(e,["endpoint"]);return o!=null&&D(n,["endpoint"],o),n}function ide(t,e){const n={},i=E(e,["model"]);i!=null&&D(n,["model"],i);const a=E(e,["endpoint"]);a!=null&&D(n,["endpoint"],a);const s=E(e,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>rde(t,l))),D(n,["checkpoints"],o)}return n}function $E(t,e){const n={},i=E(e,["name"]);i!=null&&D(n,["name"],i);const a=E(e,["state"]);a!=null&&D(n,["state"],aU(t,a));const s=E(e,["createTime"]);s!=null&&D(n,["createTime"],s);const o=E(e,["startTime"]);o!=null&&D(n,["startTime"],o);const l=E(e,["endTime"]);l!=null&&D(n,["endTime"],l);const c=E(e,["updateTime"]);c!=null&&D(n,["updateTime"],c);const d=E(e,["error"]);d!=null&&D(n,["error"],d);const f=E(e,["description"]);f!=null&&D(n,["description"],f);const p=E(e,["baseModel"]);p!=null&&D(n,["baseModel"],p);const y=E(e,["tunedModel"]);y!=null&&D(n,["tunedModel"],ide(t,y));const x=E(e,["supervisedTuningSpec"]);x!=null&&D(n,["supervisedTuningSpec"],x);const v=E(e,["tuningDataStats"]);v!=null&&D(n,["tuningDataStats"],v);const S=E(e,["encryptionSpec"]);S!=null&&D(n,["encryptionSpec"],S);const N=E(e,["partnerModelTuningSpec"]);N!=null&&D(n,["partnerModelTuningSpec"],N);const _=E(e,["distillationSpec"]);_!=null&&D(n,["distillationSpec"],_);const T=E(e,["experiment"]);T!=null&&D(n,["experiment"],T);const C=E(e,["labels"]);C!=null&&D(n,["labels"],C);const O=E(e,["pipelineJob"]);O!=null&&D(n,["pipelineJob"],O);const k=E(e,["tunedModelDisplayName"]);return k!=null&&D(n,["tunedModelDisplayName"],k),n}function ade(t,e){const n={},i=E(e,["nextPageToken"]);i!=null&&D(n,["nextPageToken"],i);const a=E(e,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>$E(t,o))),D(n,["tuningJobs"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sde extends Db{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new GS(ng.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let a="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?a=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(a=i.name.split("/operations/")[0]),{name:a,state:OE.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Wue(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>$E(this.apiClient,f))}else{const d=Bue(this.apiClient,e);return l=sn("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>pU(this.apiClient,f))}}async listInternal(e){var n,i,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const d=Kue(this.apiClient,e);return l=sn("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=ade(this.apiClient,f),y=new s4;return Object.assign(y,p),y})}else{const d=que(this.apiClient,e);return l=sn("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=tde(this.apiClient,f),y=new s4;return Object.assign(y,p),y})}}async tuneInternal(e){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=Zue(this.apiClient,e);return s=sn("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>$E(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Gue(this.apiClient,e);return s=sn("tunedModels",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),a.then(c=>nde(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ode{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const lde=1024*1024*8,cde=3,ude=1e3,dde=2,vC="x-goog-upload-status";async function hde(t,e,n){var i,a,s;let o=0,l=0,c=new DE(new Response),d="upload";for(o=t.size;l<o;){const p=Math.min(lde,o-l),y=t.slice(l,l+p);l+p>=o&&(d+=", finalize");let x=0,v=ude;for(;x<cde&&(c=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[vC]));)x++,await pde(v),v=v*dde;if(l+=p,((a=c==null?void 0:c.headers)===null||a===void 0?void 0:a[vC])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[vC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function fde(t){return{size:t.size,type:t.type}}function pde(t){return new Promise(e=>setTimeout(e,t))}class mde{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hde(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await fde(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gde{create(e,n,i){return new yde(e,n,i)}}class yde{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j4="x-goog-api-key";class xde{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(j4)===null&&e.append(j4,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vde="gl-node/";class mU{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=Aae(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const a=new xde(this.apiKey);this.apiClient=new $ue({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:vde+"web",uploader:new mde,downloader:new ode}),this.models=new vue(this.apiClient),this.live=new pue(this.apiClient,a,new gde),this.chats=new Rse(this.models,this.apiClient),this.caches=new Ose(this.apiClient),this.files=new Kse(this.apiClient),this.operations=new Eue(this.apiClient),this.tunings=new sde(this.apiClient)}}const bde=()=>{const t=localStorage.getItem("currentClinicId");return t||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},gU=()=>localStorage.getItem("authToken");class jde{constructor(){gr(this,"listeners",[]);gr(this,"activeRequests",0)}subscribe(e){return this.listeners.push(e),e(this.activeRequests>0),()=>this.unsubscribe(e)}unsubscribe(e){this.listeners=this.listeners.filter(n=>n!==e)}notify(e){e?this.activeRequests++:this.activeRequests=Math.max(0,this.activeRequests-1);const n=this.activeRequests>0;this.listeners.forEach(i=>i(n))}}const BE=new jde,wde="https://backend.newtons.in",Sde=()=>localStorage.getItem("authToken"),ue=async(t,e={})=>{const n=Sde(),i={...e.headers};n&&(i.Authorization=`Bearer ${n}`),!(e.body instanceof FormData)&&!i["Content-Type"]&&(i["Content-Type"]="application/json");const a=i;let s=t.startsWith("/")?t:`/${t}`;s.startsWith("/api/")||(s=`/api${s}`);const o=`${wde}${s}`;BE.notify(!0);try{console.log(`Making API call to: ${o}`);const l=await fetch(o,{...e,headers:a});if(l.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!l.ok){let c=`HTTP error! status: ${l.status}`;try{const d=await l.json();c=(d==null?void 0:d.message)||(d==null?void 0:d.error)||c}catch{}throw console.error(`API Error: ${l.status} ${l.statusText} - ${c}`),new Error(c)}return l}catch(l){throw l instanceof TypeError&&l.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",l):console.error("API Fetch Error:",l),l}finally{BE.notify(!1)}},bC="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Nde="models/gemini-3-flash-preview",_de=`You are an intelligent Clinic Hub Assistant for a Clinic Management System. Your role is to help the Clinic Administrator or Doctor manage their clinic ecosystem efficiently.

You have access to the current state of the clinic settings and the staff list. You can perform actions to update these settings or manage staff members.

**Capabilities:**
1.  **View Settings & Staff:** User can ask about current charges, clinic details, or staff members. Answer based on the provided context.
2.  **Update Settings:** Change fees, clinic name, address, etc.
3.  **Manage Staff:** Add new staff members or update existing ones.
4.  **Voice AI Settings:** Update the \`voice_ai_language\` for the Live API Assistant. Available codes:
    -   India: \`en-US\` (English), \`hi-IN\` (Hindi), \`te-IN\` (Telugu), \`bn-IN\` (Bengali), \`mr-IN\` (Marathi), \`ta-IN\` (Tamil), \`gu-IN\` (Gujarati), \`kn-IN\` (Kannada), \`ml-IN\` (Malayalam), \`pa-IN\` (Punjabi)
    -   Global: \`es-ES\` (Spanish), \`fr-FR\` (French), \`de-DE\` (German), \`it-IT\` (Italian), \`pt-PT\` (Portuguese), \`ru-RU\` (Russian), \`ja-JP\` (Japanese), \`ko-KR\` (Korean), \`zh-CN\` (Chinese), \`ar-SA\` (Arabic).
5.  **Analyze Financials & Inventory:** Access the Analysis Dashboard to view revenue, expenses, and inventory movement. Set date ranges to filter data.
6.  **Manage Inventory:** Update pharmacy tokens (drugs) and lab tests. You will reference items by their **Serial Number** as provided in the context.
7.  **Purchase Management:** Search for distributors, select one, and build a purchase order by adding items. You can add multiple items at once. Editing items uses Serial Numbers.
8.  **Looping & Reasoning:** You should think step-by-step. If a user request involves multiple steps or if you need to check something after an action, you can continue the loop.
9.  **Follow-up:** If critical information is missing, ask the user.
10.  **Manage Custom Columns:** You can add or remove custom columns/fields for various entities (patients, drugs, lab_tests). Use the \`manage_custom_columns\` action.
11.  **Custom Fields Data:** When searching or updating items (like drugs or patients), pay attention to their \`custom_fields\`. You can update these fields using the \`update_drug\` (or similar) action by passing a \`custom_fields\` object with key-value pairs. Keys must match the \`key\` defined in the Clinic Settings.
12.  **Custom Tables:** You can create entirely new tables to track anything (e.g., "Gym Members", "Diet Plans"). Use \`create_custom_table\`. You can then add rows to these tables using \`add_table_row\` (requires Table ID) and update them with \`update_table_row\`. meaningful descriptions are helpful.
13.  **Dashboards:** You can create persistent custom dashboards using \`create_custom_dashboard\` or show a specialized temporary view using \`render_temporary_dashboard\`.
     - Use \`render_temporary_dashboard\` when the user asks to "show", "view", or "see" data (e.g., "Show me John's meds").
     - Use \`create_custom_dashboard\` when the user explicitly asks to "create a dashboard" or "save a view".
     - **Data Sources:** Use the provided "Dashboard Data Sources" context to know valid keys (e.g., \`api:patients\`, \`table:123\`).
       - **Advanced Features:** You can add **Charts** (bar, line, pie) and **Filters** to widgets.
       - **Filters (SERVER-SIDE):** Use the \`filters\` array in config. Filters are applied on the server for efficiency.
         - **Supported Operators:**
           - \`equals\` or \`eq\`: Exact match
           - \`neq\` or \`not_equals\`: Not equal
           - \`contains\` or \`like\`: Case-insensitive substring match
           - \`starts_with\`: Value starts with
           - \`ends_with\`: Value ends with
           - \`gt\` or \`greater_than\`: Greater than
           - \`gte\`: Greater than or equal
           - \`lt\` or \`less_than\`: Less than
           - \`lte\`: Less than or equal
           - \`in\`: Value in array (value should be array)
           - \`not_in\`: Value not in array
           - \`is_null\`: Field is null
           - \`is_not_null\`: Field is not null
           - \`between\`: Value between two values (value should be [min, max])
         - **Filterable Fields:** The "Dashboard Data Sources" in context includes a \`filterableFields\` list for each source. You **MUST** use these fields.
           - **Mixed Tables:** Sources like \`api:pharmacy-orders\` or \`api:lab-orders\` support filtering by associated **Patient** data using \`patient_name\`, \`patient_phone\`, and \`token\`.
         - **Example 1:** User: "Show pharmacy orders for John" -> Action: \`render_temporary_dashboard\` with widget config: \`filters: [{ field: 'patient_name', operator: 'contains', value: 'John' }]\`
         - **Example 2:** User: "Show orders for Token 123" -> \`filters: [{ field: 'token', operator: 'equals', value: 123 }]\`
         - **Example 3:** \`filters: [{ field: 'expiry_date', operator: 'lt', value: '2024-01-01' }, { field: 'stock', operator: 'gt', value: 0 }]\`
         - Smartly infer dates for "expired" (lt today), "expiring this week" (between today and next week), etc.
       - **Charts:** Set \`type: 'chart'\`. Config requires \`chartType\`, \`xAxisKey\` (category), \`dataKey\` (value).

**Interpretation Rules:**
- **Analysis Dates:** When the user asks for analysis (financial or inventory) for a specific time range (e.g., "last month", "yesterday"), you **MUST** include \`startDate\` and \`endDate\` in the \`navigate_to\` action for \`/dashboard/analysis\`.
- If the user says "add drug", "buy medicine", or "new stock", they **usually mean "Add Item to Purchase Order"** (use \`add_purchase_items\` or navigate to \`/dashboard/purchase\`).
- **Prerequisite:** If you are using ANY purchase tools (\`add_purchase_items\`, \`search_distributor_purchase\`, \`set_distributor_purchase\`, \`edit_purchase_items\`), you **MUST** include a \`navigate_to\` action with \`page: "/dashboard/purchase"\` as the **FIRST** action in your list, unless you are already on that page.
- **ONLY** use \`update_drug\` (create) if the user explicitly says "create new drug definition" or "add to master inventory".
- The correct route for purchasing is \`/dashboard/purchase\`.

- **Drug Name & Brand Handling (CRITICAL):**
  - "Name" refers to the **Composition Name** (or Generic Name).
  - "Brand Name" refers to the **Brand Name**.
  - **Auto-Computation:** If the user provides a *Brand Name* (e.g., "Tab Dolo 650"), you **MUST** automatically:
    1.  Infer the **Composition** (e.g., "Tab Paracetamol 650mg") and use it for the "name" field.
    2.  Use the provided brand for the "brand_name" field (e.g., "Dolo 650").
    3.  Infer the **pack size** if implied (e.g., "1x10") and use it for the "pack" field.
  - If the user provides only a Brand Name and you cannot confidently infer the Composition, you **MUST** use \`ask_followup_question\` to ask the user for the composition.
  - Apply this logic to both \`add_purchase_items\` and \`update_drug\` actions.

- **Inventory Navigation:** If you execute "update_drug" or "search_pharmacy_inventory", you **MUST** include a "navigate_to" action for "/dashboard/inventory". If you searched for or updated a specific term, append it as "?search=Term" (e.g. "/dashboard/inventory?search=Paracetamol").
- **Lab Navigation:** If you execute "update_lab_test", you **MUST** include a "navigate_to" action for "/lab-inventory", unless you are already on that page.

**Action Tools:**
You can perform the following actions. Return a JSON array of actions.

\`\`\`json
[
    {
        "action": "update_clinic_settings",
        "updates": {
            "admissionCharge": "number string",
            "perDayCharge": "number string",
            "otherCharges": "number string",
            "name": "string",
            "address": "string",
            "notes": "string",
            "logoUrl": "string",
            "upi_id": "string",
            "low_stock_threshold": number,
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "gemini_api_key": "string",
            "voice_ai_language": "string (e.g. 'en-US', 'te-IN')"
        }
    },
    {
        "action": "create_staff_member",
        "staff": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null
        }
    },
    {
        "action": "update_staff_member",
        "id": "string | number",
        "updates": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null,
            "active": boolean
        }
    },
    {
        "action": "set_analysis_dates",
        "startDate": "YYYY-MM-DD",
        "endDate": "YYYY-MM-DD"
    },
    {
        "action": "navigate_to",
        "page": "/dashboard/inventory" | "/lab-inventory" | "/dashboard/queue" | "/dashboard/staff" | "/dashboard/purchase" | "/dashboard/analysis" | "/dashboard/clinic-hub" | "/billing" | "/dashboard/patients",
        "section": "financial" | "inventory" | "string (optional)",
        "startDate": "YYYY-MM-DD (optional, for analysis page)",
        "endDate": "YYYY-MM-DD (optional, for analysis page)"
    },
    {
        "action": "highlight_section",
        "elementId": "string"
    },
    {
        "action": "refresh_analysis"
    },
    {
        "action": "ask_followup_question",
        "question": "string"
    },
    {
        "action": "search_pharmacy_inventory",
        "query": "string (name, brand, or composition)"
    },
    {
        "action": "update_drug",
        "id": "number",
        "updates": {
            "name": "string",
            "brand_name": "string",
            "description": "string",
            "mrp": "number (MRP)",
            "stock": "number",
            "pack": "string (e.g. strip, bottle)",
            "supplier": "string",
            "expiry_date": "YYYY-MM-DD",
            "rate": "number",
            "box_number": "string",
            "gst": "number",
            "margin": "number",
            "discount": "number",
            "batch": "string",
            "hsn_code": "string",
            "mfg": "string",
            "mfg": "string",
            "loose": "number",
            "custom_fields": "object { key: value } (Optional: Update custom field values)"
        }
    },
    {
        "action": "update_lab_test",
        "serial_number": 1,
        "updates": {
            "name": "string",
            "price": "number",
            "description": "string",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit }"
        }
    },
    {
        "action": "search_lab_inventory",
        "query": "string (test name or description)"
    },
    {
        "action": "create_lab_test",
        "test": {
            "name": "string",
            "price": "number",
            "description": "string (optional)",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit } (optional)"
        }
    },
    {
        "action": "search_distributor_purchase",
        "query": "string"
    },
    {
        "action": "set_distributor_purchase",
        "distributorId": "string"
    },
    {
        "action": "add_purchase_items",
        "items": [
            {
                "name": "string (Composition Name)",
                "brand_name": "string",
                "stock": "number (quantity)",
                "rate": "number (buying price)",
                "mrp": "number",
                "pack": "string",
                "expiry_date": "YYYY-MM-DD",
                "batch": "string",
                "discount": "number",
                "gst": "number"
            }
        ]
    },
    {
        "action": "edit_purchase_items",
        "updates": [
            {
                "serial_number": "number (The Row # from context)",
                "field": "string (name, stock, rate, etc.)",
                "value": "string | number"
            }
        ]
    },
    {
        "action": "end_task",
        "summary": "string"
    },
    {
        "action": "open_new_case",
        "name": "string (Patient Name)",
        "age": "number (optional)",
        "gender": "M | F | O (optional)",
        "phone": "string (optional)",
        "complaint": "string (The medical complaint/reason)"
    },
    {
        "action": "manage_custom_columns",
        "entity": "patients" | "drugs" | "lab_tests",
        "operation": "add" | "remove",
        "column": {
            "label": "string",
            "type": "text" | "number" | "date" | "boolean",
            "required": boolean
        }
    },
    {
        "action": "create_custom_table",
        "name": "string",
        "description": "string (optional)",
        "columns": [
            {
                "label": "string",
                "type": "text" | "number" | "date" | "boolean",
                "required": boolean
            }
        ]
    },
    {
        "action": "add_table_row",
        "tableId": "string (The ID of the custom table)",
        "data": "object { key: value } (Keys must match column keys derived from labels)"
    },
    {
        "tableId": "string",
        "recordId": "string (The ID of the row/record to update)",
        "data": "object { key: value } (Updates to apply)"
    },
    {
        "action": "create_custom_dashboard",
        "name": "string",
        "description": "string (optional)",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string (one of the keys from Dashboard Data Sources, e.g. api:patients, table:xyz)",
                "config": "object { columns?: string[], label?: string, chartType?: 'bar'|'line'|'pie', xAxisKey?: string, dataKey?: string, filters?: Array<{field, operator, value}> }"
            }
        ]
    },
    {
        "action": "render_temporary_dashboard",
        "title": "string",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string",
                "config": "object { columns?: [], label?, chartType?, xAxisKey?, dataKey?, filters?: [] }"
            }
        ]
    }
]
\`\`\`

**Navigation Reference:**
- **Pharmacy Inventory:** \`/dashboard/inventory\`
- **Lab Inventory:** \`/lab-inventory\`
- **Doctor Queue:** \`/dashboard/queue\`
- **Staff Management:** \`/dashboard/staff\`
- **All Patients:** \`/dashboard/patients\`
- **Billing:** \`/billing\`
- **Purchase Page:** \`/dashboard/purchase\`
- **Analysis:** \`/dashboard/analysis\`
- **Clinic Hub:** \`/dashboard/clinic-hub\`
\`\`\`

**Rules:**
-   **Always** return a JSON array as the last part of your response.
-   If the user's request is satisfied, use the \`end_task\` action with a summary of what was done.
-   If you need more info, use \`ask_followup_question\`.
-   If you perform an action (like updating settings), and there's nothing else to do *immediately* but you want to confirm it's done, you can return the action. The system will execute it and call you back with the result. Then you can \`end_task\`.
-   For \`create_staff_member\`, if password is not provided by user, generate a secure random password and mention it in the summary.
-   Update numeric strings as strings (e.g., "500.00").
-   **CRITICAL DO's and DON'Ts:**
    -   **DO NOT** fill in empty fields (like \`gemini_api_key\`, \`logoUrl\`, \`upi_id\`, etc.) with fake, placeholder, or example data.
    -   **ONLY** update fields that the user *intentionally* asked to change.
    -   **PRESERVE** existing values for any fields not explicitly mentioned in the user's request.
    -   If a field is empty and the user didn't ask to set it, **leave it empty**.
    -   Do not invent values.
`;async function Cde(){var n;if(!gU()&&bC)return bC;let e=null;try{const i=await ue("/api/clinics/settings");if(i.ok){const a=await i.json();(n=a.gemini_api_key)!=null&&n.trim()&&(e=a.gemini_api_key.trim())}}catch(i){console.warn("Error fetching updated key",i)}if(e)return e;try{const i=await ue("/api/global-settings/app_gemini_api_key");if(i.ok){const s=(await i.json()).value;if(s&&s.trim()!=="")return s.trim()}}catch(i){console.warn("Could not fetch global API key.",i)}return bC}async function Tde(t,e,n=[],i){var f,p,y,x,v,S;let a=(f=e.settings)==null?void 0:f.gemini_api_key;if(!a||!a.trim())try{a=await Cde()}catch(N){console.warn("Using fallback key or failing:",N)}if(!a)throw new Error("No Gemini API Key provided in settings or environment.");const s=new mU({apiKey:a}),o=[];o.push({role:"user",parts:[{text:_de}]}),o.push({role:"model",parts:[{text:"Understood. I am ready to assist with Clinic Hub management."}]}),n.forEach(N=>{o.push({role:N.role,parts:[{text:N.text}]})});const d=[{text:`
    Context:
    ${`
    --- Current Clinic Context ---
    Settings: ${JSON.stringify(e.settings,null,2)}
    
    Custom Columns Configuration: ${JSON.stringify(e.settings.custom_columns_config||{},null,2)}

    Custom Tables (Available for adding/editing rows): ${JSON.stringify(e.customTables||[],null,2)}
    
    Dashboard Data Sources (Use these keys for widgets): ${JSON.stringify(e.dashboardDataSources||[],null,2)}

    --- DYNAMIC CONTEXT DATA (Configured tables with <200 rows) ---
    ${Object.entries(e.dynamicContextData||{}).map(([N,_])=>{const T=(_.data||[]).slice(0,50).map((C,O)=>({_sn:O+1,...C}));return`${_.label||N} (${_.count||0} records): ${JSON.stringify(T,null,2)}`}).join(`

`)}
    --- END DYNAMIC CONTEXT ---

    Staff List: ${JSON.stringify(e.staffList.map(N=>({id:N.id||N._id,name:N.name,role:N.role,email:N.email,active:N.active,opd_fee:N.opd_fee})),null,2)}
    
    Previous Action Results (if any): ${JSON.stringify(e.actionResults||[],null,2)}

    Analysis Data (if active): ${JSON.stringify(e.analysisData||{},null,2)}

    Pharmacy Inventory: ${e.pharmacyInventory?JSON.stringify(e.pharmacyInventory,null,2):"Not loaded. Use 'search_pharmacy_inventory' to find items."}

    Distributors List: ${JSON.stringify((e.distributors||[]).map(N=>({serial_number:N.serial_number,name:N.name,contact_person:N.contact_person,phone:N.phone,remainingBalance:N.remainingBalance})),null,2)}

    Lab Tests Inventory: ${JSON.stringify((e.labInventory||[]).map(N=>({serial:N.serial_number,name:N.name,price:N.price,description:N.description,default_parameters:N.default_parameters})),null,2)}

    Current Purchase Page Rows: ${JSON.stringify((e.purchaseRows||[]).map((N,_)=>({serial_number:_+1,name:N.name,stock:N.stock,rate:N.rate,mrp:N.mrp,net_value:(N.stock*N.rate).toFixed(2)})),null,2)}

    Current Application Page Context: ${e.pageContext?JSON.stringify(e.pageContext,null,2):"Unknown/General Dashboard"}
    `}

    User Query/Input:
    ${t}
    `}];if(i){const N=i.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"");d.push({inlineData:{data:N,mimeType:"image/jpeg"}})}o.push({role:"user",parts:d});try{const N={model:Nde,contents:o,generationConfig:{temperature:.7,maxOutputTokens:2048,responseMimeType:"text/plain"}},_=await s.models.generateContentStream(N);let T="";for await(const C of _){const O=C;O.text&&typeof O.text=="function"?T+=O.text():(S=(v=(x=(y=(p=O.candidates)==null?void 0:p[0])==null?void 0:y.content)==null?void 0:x.parts)==null?void 0:v[0])!=null&&S.text&&(T+=O.candidates[0].content.parts[0].text)}if(!T)throw new Error("Empty response from AI");return T}catch(N){throw console.error("Gemini Interaction Error:",N),new Error("Failed to communicate with AI Assistant.")}}const cD=({settings:t,staffList:e,onSettingsUpdate:n,onStaffUpdate:i,onHighlight:a,enableDynamicContext:s=!1})=>{const o=Mt(),l=as(),{setAnalysisDateRange:c,analysisData:d,analysisNavigate:f,refreshAnalysis:p,pageContext:y}=IS(),{setDistributors:x,setSelectedDistributor:v,setSearchTerm:S,addPurchaseRow:N,updatePurchaseRow:_,distributors:T,purchaseRows:C}=Nz(),[O,k]=b.useState(""),P=b.useRef(d),I=b.useRef(C);b.useEffect(()=>{P.current=d},[d]),b.useEffect(()=>{I.current=C},[C]);const[F,B]=b.useState([]),[$,L]=b.useState([]),[V,H]=b.useState([]),[te,X]=b.useState(!1),[q,W]=b.useState(null),ae=b.useRef(!1),G=b.useRef(0),z=5,le=()=>{ae.current=!1,X(!1),H(ce=>[...ce,{role:"system",text:" Task stopped by user."}])},je=ce=>{const fe=new FileReader;fe.onloadend=()=>{W(fe.result)},fe.readAsDataURL(ce)},K=()=>{W(null)},[Oe,Ye]=b.useState(null),Me=()=>Ye(null),Ie=async(ce,fe)=>{if(!Oe)return;const se={name:ce,description:fe,widgets:Oe.widgets};if(!(await ue("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).ok)throw new Error("Failed to save dashboard");Ye(null)},be=async(ce,fe,se=[],Q)=>{var ie,ge,ee;if(ae.current){if(G.current+=1,G.current>z){H(we=>[...we,{role:"system",text:" Task limit reached. Stopping automatically."}]),X(!1),ae.current=!1;return}try{let we=t,Ue=e,Ge=[],Le=[],oe=[],_e=[],$e=[];try{const[Pe,Je]=await Promise.all([ue("/api/clinics/settings"),ue("/staff")]);if(Pe.ok&&Je.ok){const et=await Pe.json(),ut=await Je.json(),[_t,vt,Ce,lt]=await Promise.all([ue("/api/drugs"),ue("/api/lab-tests"),ue("/api/distributors"),ue("/api/custom-tables"),ue("/api/dashboards/data-sources")]);if(_t.ok){const Tt=await _t.json();Ge=Tt.drugs||Tt||[]}if(vt.ok){const qe=(await vt.json()).map((jt,Ct)=>({...jt,serial_number:Ct+1}));Le=qe,B(qe)}if(Ce.ok&&(oe=(await Ce.json()||[]).map((qe,jt)=>({...qe,serial_number:jt+1}))),lt.ok){const Tt=await lt.json();_e=Tt,L(Tt)}try{const Tt=await ue("/api/dashboards/data-sources");Tt.ok&&($e=await Tt.json())}catch(Tt){console.warn("Failed to fetch dashboard sources",Tt)}we={...et,admissionCharge:parseFloat(et.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(et.perDayCharge||0).toFixed(2),otherCharges:parseFloat(et.otherCharges||0).toFixed(2),aiMemory:et.aiMemory||"",clinicWideSystemPrompt:et.clinicWideSystemPrompt||"",gemini_api_key:et.gemini_api_key||"",low_stock_threshold:et.low_stock_threshold!==void 0&&et.low_stock_threshold!==null?String(et.low_stock_threshold):"10",name:et.name||"",logoUrl:et.logoUrl||"",upi_id:et.upi_id||"",address:et.address||"",notes:et.notes||"",clinic_id:et.clinic_id},Ue=ut.map(Tt=>({...Tt,id:Tt._id||Tt.id}))}}catch(Pe){console.warn("Failed to fetch fresh context for AI loop, falling back to props",Pe)}let ze={};if(s)try{const Pe=await ue("/api/ai-context/data");Pe.ok&&(ze=await Pe.json())}catch(Pe){console.warn("Failed to fetch dynamic AI context",Pe)}const Y={settings:we,staffList:Ue,analysisData:P.current,pharmacyInventory:Ge.length>50?void 0:Ge,labInventory:Le,distributors:oe,purchaseRows:I.current,actionResults:se,pageContext:y||void 0,customTables:_e,dashboardDataSources:$e,dynamicContextData:ze},ye=fe.filter(Pe=>Pe.role!=="system"),pe=await Tde(ce,Y,ye,Q);if(!ae.current)return;let me=[];try{const Pe=pe.match(/\[[\s\S]*\]/);if(Pe)me=JSON.parse(Pe[0]);else{H(Je=>[...Je,{role:"model",text:pe}]),X(!1),ae.current=!1;return}}catch(Pe){console.error("Failed to parse AI response",Pe),H(Je=>[...Je,{role:"model",text:"I'm having trouble processing that. Please try again."}]),X(!1),ae.current=!1;return}const Ne=[];let Be=[],Ee=[];for(const Pe of me){if(!ae.current)break;if(Pe.action==="end_task"){H(Je=>[...Je,{role:"model",text:Pe.summary}]),X(!1),ae.current=!1;return}if(Pe.action==="ask_followup_question"){H(Je=>[...Je,{role:"model",text:Pe.question}]),X(!1),ae.current=!1;return}try{if(Pe.action==="update_clinic_settings"){const Je=Pe.updates;Object.keys(Je).forEach(_t=>Be.push(`setting-${_t}`));const et={...we,...Je},ut={...et,admissionCharge:parseFloat(et.admissionCharge),perDayCharge:parseFloat(et.perDayCharge),otherCharges:parseFloat(et.otherCharges),low_stock_threshold:parseInt(et.low_stock_threshold)};await ue("/api/clinics/settings",{method:"PUT",body:JSON.stringify(ut)}),n&&n(),Ne.push({action:"update_clinic_settings",status:"success"}),Ee.push({role:"system",text:" Updated clinic settings"})}if(Pe.action==="create_staff_member"&&(await ue("/api/staff",{method:"POST",body:JSON.stringify({...Pe.staff,clinic_id:we.clinic_id})}),i&&i(),Ne.push({action:"create_staff_member",status:"success",name:Pe.staff.name}),Ee.push({role:"system",text:` Created staff member: ${Pe.staff.name}`})),Pe.action==="update_staff_member"){const Je=Pe.id;await ue(`/api/staff/${Je}`,{method:"PUT",body:JSON.stringify(Pe.updates)}),i&&i(),Be.push(`staff-member-${Je}`),Ne.push({action:"update_staff_member",status:"success",id:Je}),Ee.push({role:"system",text:" Updated staff member details"})}if(Pe.action==="set_analysis_dates"){const{startDate:Je,endDate:et}=Pe;c({startDate:new Date(Je),endDate:new Date(et)}),Ne.push({action:"set_analysis_dates",status:"success",startDate:Je,endDate:et}),Ee.push({role:"system",text:` Set analysis dates: ${Je} to ${et}`})}if(Pe.action==="navigate_to"){let Je=Pe.page;if(Pe.page&&Pe.page.includes("analysis")&&Pe.startDate&&Pe.endDate){const et=Je.includes("?")?"&":"?";Je=`${Je}${et}startDate=${Pe.startDate}&endDate=${Pe.endDate}`}else Pe.page&&Pe.page.includes("analysis")&&((ie=P.current)!=null&&ie.startDate)&&((ge=P.current)!=null&&ge.endDate);o(Je),Pe.section&&setTimeout(()=>f(Pe.section),500),Ne.push({action:"navigate_to",status:"success",page:Je}),Ee.push({role:"system",text:` Navigated to ${Je}`})}if(Pe.action==="highlight_section"&&(Be.push(Pe.elementId),Ne.push({action:"highlight_section",status:"success",id:Pe.elementId})),Pe.action==="refresh_analysis"){Ee.push({role:"system",text:" Refreshing analysis data..."});const Je=await p();Je?(P.current=Je,Ne.push({action:"refresh_analysis",status:"success",summary:"Data refreshed successfully"}),Ee.push({role:"system",text:" Analysis data refreshed"})):(Ne.push({action:"refresh_analysis",status:"error",error:"No data returned"}),Ee.push({role:"system",text:" Failed to refresh analysis data"}))}if(Pe.action==="search_pharmacy_inventory"){const Je=Pe.query.toLowerCase(),et=Ge.filter(_t=>_t.name&&_t.name.toLowerCase().includes(Je)||_t.brand_name&&_t.brand_name.toLowerCase().includes(Je)||_t.description&&_t.description.toLowerCase().includes(Je)),ut=et.slice(0,10);Ne.push({action:"search_pharmacy_inventory",status:"success",count:et.length,results:ut}),et.length>0?Ee.push({role:"system",text:` Found ${et.length} matches for "${Pe.query}". Showing top ${ut.length}.`}):Ee.push({role:"system",text:` No matches found for "${Pe.query}"`})}if(Pe.action==="update_drug"){const Je=Pe.id;try{const et=Ge.find(vt=>vt.id===Je);if(!et)throw new Error(`Drug with ID ${Je} not found.`);const ut={...Pe.updates};ut.custom_fields&&(ut.custom_fields={...et.custom_fields||{},...ut.custom_fields});const _t={...et,...ut};await ue(`/api/drugs/${Je}`,{method:"PUT",body:JSON.stringify(_t)}),Ne.push({action:"update_drug",status:"success",id:Je,updates:Pe.updates}),Ee.push({role:"system",text:` Updated drug: ${et.name}`}),Ye({title:`Updated: ${et.name}`,widgets:[{id:"edited-drug",type:"table",title:`Drug Updated: ${et.name}`,dataSource:"api:drugs",config:{filters:[{field:"id",operator:"equals",value:Je}],columns:["name","brand_name","stock","mrp","expiry_date","pack"]},position:{x:0,y:0,w:12,h:4}}]})}catch(et){Ne.push({action:"update_drug",status:"error",error:et.message}),Ee.push({role:"system",text:` Failed to update drug: ${et.message}`})}}if(Pe.action==="update_lab_test"){const Je=Le.find(et=>et.serial_number===Pe.serial_number);if(Je){const et={...Je,...Pe.updates};await ue(`/api/lab-tests/${Je.id}`,{method:"PUT",body:JSON.stringify(et)}),Ne.push({action:"update_lab_test",status:"success",item:Je.name}),Ee.push({role:"system",text:` Updated lab test: ${Je.name}`}),Ye({title:`Updated: ${Je.name}`,widgets:[{id:"edited-lab-test",type:"table",title:`Lab Test Updated: ${Je.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Je.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}else Ne.push({action:"update_lab_test",status:"error",error:`Test with serial ${Pe.serial_number} not found`}),Ee.push({role:"system",text:` Lab test with serial ${Pe.serial_number} not found`})}if(Pe.action==="search_lab_inventory"){const Je=Pe.query.toLowerCase(),et=Le.filter(_t=>_t.name&&_t.name.toLowerCase().includes(Je)||_t.description&&_t.description.toLowerCase().includes(Je)),ut=et.slice(0,10);Ne.push({action:"search_lab_inventory",status:"success",count:et.length,results:ut.map(_t=>({serial_number:_t.serial_number,id:_t.id,name:_t.name,price:_t.price,description:_t.description}))}),et.length>0?Ee.push({role:"system",text:` Found ${et.length} lab tests for "${Pe.query}". Showing top ${ut.length}.`}):Ee.push({role:"system",text:` No lab tests found for "${Pe.query}"`})}if(Pe.action==="create_lab_test")try{const Je=Pe.test,et={name:Je.name,price:parseFloat(Je.price)||0,description:Je.description||"",default_parameters:Je.default_parameters||[]},ut=await ue("/api/lab-tests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(et)});if(!ut.ok){const vt=await ut.json();throw new Error(vt.message||"Failed to create lab test")}const _t=await ut.json();Ne.push({action:"create_lab_test",status:"success",id:_t.id,name:Je.name}),Ee.push({role:"system",text:` Created lab test: ${Je.name}`}),Ye({title:`Created: ${Je.name}`,widgets:[{id:"created-lab-test",type:"table",title:`New Lab Test: ${Je.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:_t.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Je){Ne.push({action:"create_lab_test",status:"error",error:Je.message}),Ee.push({role:"system",text:` Failed to create lab test: ${Je.message}`})}if(Pe.action==="search_distributor_purchase"){const Je=Pe.query,et=await ue(`/api/distributors?search=${encodeURIComponent(Je)}`);if(et.ok){const ut=await et.json();x(ut),S(Je),Ne.push({action:"search_distributor_purchase",status:"success",count:ut.length,results:ut}),Ee.push({role:"system",text:` Found ${ut.length} distributors for "${Je}"`})}else Ne.push({action:"search_distributor_purchase",status:"error",error:et.statusText}),Ee.push({role:"system",text:" Failed to search distributors"})}if(Pe.action==="set_distributor_purchase"){const Je=Pe.distributorId;let et=T.find(ut=>ut.id===Je);et?(v(et),S(et.name),Ne.push({action:"set_distributor_purchase",status:"success",distributor:et.name}),Ee.push({role:"system",text:` Selected distributor: ${et.name}`})):(Ne.push({action:"set_distributor_purchase",status:"error",error:"Distributor not found in current search results. Please search first."}),Ee.push({role:"system",text:" Distributor not found. Please search first."}))}if(Pe.action==="add_purchase_items"){const Je=Pe.items;let et=0;Je.forEach(ut=>{const vt={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:ut.name||"",composition:ut.composition||"",description:ut.description||"",mrp:ut.mrp||0,stock:ut.stock||0,pack:ut.pack||"",supplier:"",expiry_date:ut.expiry_date||"",rate:ut.rate||0,box_number:ut.box_number||"",gst:ut.gst||0,margin:ut.margin||0,discount:ut.discount||0,brand_name:ut.brand_name||"",batch:ut.batch||"",hsn_code:ut.hsn_code||"",mfg:ut.mfg||"",loose:ut.loose||0,last_updated:"",created_at:""};N(vt),et++}),Ne.push({action:"add_purchase_items",status:"success",count:et}),Ee.push({role:"system",text:` Added ${et} items to purchase list`})}if(Pe.action==="edit_purchase_items"){const Je=Pe.updates;let et=0;const ut=I.current||[];Je.forEach(_t=>{if(_t.serial_number){const vt=_t.serial_number-1,Ce=ut[vt];Ce&&Ce.id?(_(Ce.id,{[_t.field]:_t.value}),et++):(console.warn(`Row with serial number ${_t.serial_number} not found.`),Ee.push({role:"system",text:` Row #${_t.serial_number} not found.`}))}}),Ne.push({action:"edit_purchase_items",status:"success",count:et}),Ee.push({role:"system",text:` Updated ${et} items`})}if(Pe.action==="open_new_case"){const{name:Je,age:et,gender:ut,complaint:_t,phone:vt}=Pe;try{const Ce=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Je||"New Patient",age:et||null,gender:ut||null,phone:vt||null,address:null})});if(!Ce.ok){const Ct=await Ce.json().catch(()=>({}));throw Ce.status===403&&((ee=Ct.message)!=null&&ee.includes("Patient limit"))?new Error(`Patient limit reached: ${Ct.message}`):new Error(Ct.message||"Failed to create patient")}const lt=await Ce.json();if(!lt||!lt.id)throw new Error("Created patient has no ID");const Tt=await ue("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:lt.id,complaint:_t||"New Case"})});if(!Tt.ok)throw new Error("Failed to create queue entry");const qe=await Tt.json(),jt=lt.id;jt&&(l.prefetchQuery({queryKey:Ut.patients.context(jt),queryFn:()=>ue(`/api/patients/${jt}/context`).then(Ct=>Ct.json()),staleTime:1e3*60*5}),l.prefetchQuery({queryKey:Ut.patientDebts.balance(jt),queryFn:()=>ue(`/api/patient-debts/${jt}/balance`).then(Ct=>Ct.json()),staleTime:1e3*60}),l.prefetchQuery({queryKey:Ut.queue.latest(jt),queryFn:()=>ue(`/api/queue/patient/${jt}/latest`).then(Ct=>Ct.json()),staleTime:1e3*5})),o(`/dashboard/edit-complaint/${qe.id}`,{state:{initialComplaint:_t}}),Ne.push({action:"open_new_case",status:"success",patientId:lt.id,queueId:qe.id}),Ee.push({role:"system",text:` Opened new case for ${Je}`}),X(!1),ae.current=!1;return}catch(Ce){Ce.message.includes("Patient limit")&&(o("/start-clinic-subscription"),Ee.push({role:"system",text:" Patient limit reached. Redirecting to subscription."})),Ne.push({action:"open_new_case",status:"error",error:Ce.message}),Ee.push({role:"system",text:` Failed to open new case: ${Ce.message}`})}}if(Pe.action==="manage_custom_columns"){const{entity:Je,operation:et,column:ut}=Pe,_t=we.custom_columns_config||{drugs:[],patients:[],lab_tests:[]};let Ce=[..._t[Je]||[]];if(et==="add"){const Tt=ut.label.toLowerCase().replace(/[^a-z0-9]/g,"_");Ce.some(qe=>qe.key===Tt)||Ce.push({...ut,key:Tt})}else if(et==="remove"){const Tt=ut.label.toLowerCase().replace(/[^a-z0-9]/g,"_");Ce=Ce.filter(qe=>qe.key!==Tt&&qe.label!==ut.label)}const lt={..._t,[Je]:Ce};await ue("/api/clinics/settings",{method:"PUT",body:JSON.stringify({...we,custom_columns_config:lt})}),n&&n(),Ne.push({action:"manage_custom_columns",status:"success",entity:Je,operation:et,column:ut.label}),Ee.push({role:"system",text:` ${et==="add"?"Added":"Removed"} custom column '${ut.label}' for ${Je}`})}if(Pe.action==="create_custom_table"){const{name:Je,description:et,columns:ut}=Pe,_t=ut.map(lt=>({...lt,key:lt.label.toLowerCase().replace(/[^a-z0-9]/g,"_")})),vt=await ue("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Je,description:et,columns:_t})});if(!vt.ok)throw new Error("Failed to create table");const Ce=await vt.json();L(lt=>[...lt,Ce]),Ne.push({action:"create_custom_table",status:"success",tableId:Ce.id}),Ee.push({role:"system",text:` Created custom table: ${Je}`})}if(Pe.action==="add_table_row"){const{tableId:Je,data:et}=Pe;if(!(await ue(`/api/custom-tables/${Je}/records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:et})})).ok)throw new Error("Failed to add row");Ne.push({action:"add_table_row",status:"success"}),Ee.push({role:"system",text:" Added row to table"})}if(Pe.action==="update_table_row"){const{recordId:Je,data:et}=Pe;if(!(await ue(`/api/custom-tables/records/${Je}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:et})})).ok)throw new Error("Failed to update row");Ne.push({action:"update_table_row",status:"success"}),Ee.push({role:"system",text:" Updated row"})}if(Pe.action==="create_custom_dashboard"){const{name:Je,description:et,widgets:ut}=Pe,_t=await ue("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Je,description:et,widgets:ut})});if(!_t.ok)throw new Error("Failed to create dashboard");const vt=await _t.json();Ne.push({action:"create_custom_dashboard",status:"success",id:vt.id}),Ee.push({role:"system",text:` Created dashboard: ${Je}`})}Pe.action==="render_temporary_dashboard"&&(Ye({title:Pe.title,widgets:Pe.widgets}),Ne.push({action:"render_temporary_dashboard",status:"success"}),Ee.push({role:"system",text:` Showing temporary dashboard: ${Pe.title}`}))}catch(Je){console.error("Action execution failed",Pe,Je),Ne.push({action:Pe.action,status:"error",error:Je.message}),Ee.push({role:"system",text:` Failed to execute action: ${Pe.action}`})}}Be.length>0&&a&&setTimeout(()=>a(Be),500),Ee.length>0&&H(Pe=>[...Pe,...Ee]);const Ke=[...se,...Ne],rt=`Reflecting on previous actions: ${JSON.stringify(Ne)}. What is the next step? If done, call end_task.`,mt=[...fe,...Ee,{role:"model",text:pe},{role:"user",text:rt}];await be(rt,mt,Ke,void 0)}catch(we){console.error(we),H(Ue=>[...Ue,{role:"model",text:"Something went wrong."}]),X(!1),ae.current=!1}}},re=b.useCallback(()=>{H([]),k(""),X(!1),ae.current=!1,G.current=0,W(null)},[]);return{chatQuery:O,setChatQuery:k,chatHistory:V,isProcessing:te,handleSendMessage:ce=>{const fe=ce!==void 0?ce:O;if(!fe.trim()&&!q)return;ae.current=!0,X(!0),G.current=0;const se={role:"user",text:fe};q&&(se.text+=" [Image Attached]"),H(ie=>[...ie,se]);const Q=q||void 0;k(""),W(null),be(fe,V,[],Q)},refreshChat:re,stopGeneration:le,selectedImage:q,handleImageSelect:je,clearImage:K,temporaryDashboard:Oe,closeTemporaryDashboard:Me,saveTemporaryDashboard:Ie}},Z=({className:t="",width:e,height:n,variant:i="rectangular",animate:a=!0,style:s={}})=>{const o={width:e,height:n,...s};return r.jsx("div",{className:`skeleton skeleton-${i} ${a?"skeleton-animate":""} ${t}`,style:o})};var jC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var w4;function kde(){return w4||(w4=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=a(s,i(l)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)e.call(s,l)&&s[l]&&(o=a(o,l));return o}function a(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(jC)),jC.exports}var Ade=kde();const nd=Bn(Ade);function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function Ede(t,e){if(jf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(jf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yU(t){var e=Ede(t,"string");return jf(e)=="symbol"?e:e+""}function uv(t,e,n){return(e=yU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S4(Object(n),!0).forEach(function(i){uv(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Pde(t){if(Array.isArray(t))return t}function Ode(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function zE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function xU(t,e){if(t){if(typeof t=="string")return zE(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zE(t,e):void 0}}function Dde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _c(t,e){return Pde(t)||Ode(t,e)||xU(t,e)||Dde()}function Mde(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function qc(t,e){if(t==null)return{};var n,i,a=Mde(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var Ide=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Rde(t){var e=t.defaultInputValue,n=e===void 0?"":e,i=t.defaultMenuIsOpen,a=i===void 0?!1:i,s=t.defaultValue,o=s===void 0?null:s,l=t.inputValue,c=t.menuIsOpen,d=t.onChange,f=t.onInputChange,p=t.onMenuClose,y=t.onMenuOpen,x=t.value,v=qc(t,Ide),S=b.useState(l!==void 0?l:n),N=_c(S,2),_=N[0],T=N[1],C=b.useState(c!==void 0?c:a),O=_c(C,2),k=O[0],P=O[1],I=b.useState(x!==void 0?x:o),F=_c(I,2),B=F[0],$=F[1],L=b.useCallback(function(ae,G){typeof d=="function"&&d(ae,G),$(ae)},[d]),V=b.useCallback(function(ae,G){var z;typeof f=="function"&&(z=f(ae,G)),T(z!==void 0?z:ae)},[f]),H=b.useCallback(function(){typeof y=="function"&&y(),P(!0)},[y]),te=b.useCallback(function(){typeof p=="function"&&p(),P(!1)},[p]),X=l!==void 0?l:_,q=c!==void 0?c:k,W=x!==void 0?x:B;return Yt(Yt({},v),{},{inputValue:X,menuIsOpen:q,onChange:L,onInputChange:V,onMenuClose:te,onMenuOpen:H,value:W})}function Zt(){return Zt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zt.apply(null,arguments)}function Lde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N4(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,yU(i.key),i)}}function Fde(t,e,n){return e&&N4(t.prototype,e),n&&N4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qE(t,e){return qE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qE(t,e)}function $de(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qE(t,e)}function bw(t){return bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bw(t)}function vU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vU=function(){return!!t})()}function Bde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zde(t,e){if(e&&(jf(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bde(t)}function qde(t){var e=vU();return function(){var n,i=bw(t);if(e){var a=bw(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return zde(this,n)}}function Ude(t){if(Array.isArray(t))return zE(t)}function Vde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Hde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uD(t){return Ude(t)||Vde(t)||xU(t)||Hde()}function Gde(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Wde(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Yde=function(){function t(n){var i=this;this._insertTag=function(a){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(a,s),i.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Wde(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Gde(a);try{s.insertRule(i,s.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var a;return(a=i.parentNode)==null?void 0:a.removeChild(i)}),this.tags=[],this.ctr=0},t}(),ra="-ms-",jw="-moz-",er="-webkit-",bU="comm",dD="rule",hD="decl",Kde="@import",jU="@keyframes",Qde="@layer",Xde=Math.abs,YS=String.fromCharCode,Jde=Object.assign;function Zde(t,e){return zi(t,0)^45?(((e<<2^zi(t,0))<<2^zi(t,1))<<2^zi(t,2))<<2^zi(t,3):0}function wU(t){return t.trim()}function ehe(t,e){return(t=e.exec(t))?t[0]:t}function tr(t,e,n){return t.replace(e,n)}function UE(t,e){return t.indexOf(e)}function zi(t,e){return t.charCodeAt(e)|0}function Ov(t,e,n){return t.slice(e,n)}function bl(t){return t.length}function fD(t){return t.length}function jj(t,e){return e.push(t),t}function the(t,e){return t.map(e).join("")}var KS=1,ig=1,SU=0,is=0,pi=0,Fg="";function QS(t,e,n,i,a,s,o){return{value:t,root:e,parent:n,type:i,props:a,children:s,line:KS,column:ig,length:o,return:""}}function Gx(t,e){return Jde(QS("",null,null,"",null,null,0),t,{length:-t.length},e)}function nhe(){return pi}function rhe(){return pi=is>0?zi(Fg,--is):0,ig--,pi===10&&(ig=1,KS--),pi}function Ts(){return pi=is<SU?zi(Fg,is++):0,ig++,pi===10&&(ig=1,KS++),pi}function Tl(){return zi(Fg,is)}function ew(){return is}function Mb(t,e){return Ov(Fg,t,e)}function Dv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function NU(t){return KS=ig=1,SU=bl(Fg=t),is=0,[]}function _U(t){return Fg="",t}function tw(t){return wU(Mb(is-1,VE(t===91?t+2:t===40?t+1:t)))}function ihe(t){for(;(pi=Tl())&&pi<33;)Ts();return Dv(t)>2||Dv(pi)>3?"":" "}function ahe(t,e){for(;--e&&Ts()&&!(pi<48||pi>102||pi>57&&pi<65||pi>70&&pi<97););return Mb(t,ew()+(e<6&&Tl()==32&&Ts()==32))}function VE(t){for(;Ts();)switch(pi){case t:return is;case 34:case 39:t!==34&&t!==39&&VE(pi);break;case 40:t===41&&VE(t);break;case 92:Ts();break}return is}function she(t,e){for(;Ts()&&t+pi!==57;)if(t+pi===84&&Tl()===47)break;return"/*"+Mb(e,is-1)+"*"+YS(t===47?t:Ts())}function ohe(t){for(;!Dv(Tl());)Ts();return Mb(t,is)}function lhe(t){return _U(nw("",null,null,null,[""],t=NU(t),0,[0],t))}function nw(t,e,n,i,a,s,o,l,c){for(var d=0,f=0,p=o,y=0,x=0,v=0,S=1,N=1,_=1,T=0,C="",O=a,k=s,P=i,I=C;N;)switch(v=T,T=Ts()){case 40:if(v!=108&&zi(I,p-1)==58){UE(I+=tr(tw(T),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=tw(T);break;case 9:case 10:case 13:case 32:I+=ihe(v);break;case 92:I+=ahe(ew()-1,7);continue;case 47:switch(Tl()){case 42:case 47:jj(che(she(Ts(),ew()),e,n),c);break;default:I+="/"}break;case 123*S:l[d++]=bl(I)*_;case 125*S:case 59:case 0:switch(T){case 0:case 125:N=0;case 59+f:_==-1&&(I=tr(I,/\f/g,"")),x>0&&bl(I)-p&&jj(x>32?C4(I+";",i,n,p-1):C4(tr(I," ","")+";",i,n,p-2),c);break;case 59:I+=";";default:if(jj(P=_4(I,e,n,d,f,a,l,C,O=[],k=[],p),s),T===123)if(f===0)nw(I,e,P,P,O,s,p,l,k);else switch(y===99&&zi(I,3)===110?100:y){case 100:case 108:case 109:case 115:nw(t,P,P,i&&jj(_4(t,P,P,0,0,a,l,C,a,O=[],p),k),a,k,p,l,i?O:k);break;default:nw(I,P,P,P,[""],k,0,l,k)}}d=f=x=0,S=_=1,C=I="",p=o;break;case 58:p=1+bl(I),x=v;default:if(S<1){if(T==123)--S;else if(T==125&&S++==0&&rhe()==125)continue}switch(I+=YS(T),T*S){case 38:_=f>0?1:(I+="\f",-1);break;case 44:l[d++]=(bl(I)-1)*_,_=1;break;case 64:Tl()===45&&(I+=tw(Ts())),y=Tl(),f=p=bl(C=I+=ohe(ew())),T++;break;case 45:v===45&&bl(I)==2&&(S=0)}}return s}function _4(t,e,n,i,a,s,o,l,c,d,f){for(var p=a-1,y=a===0?s:[""],x=fD(y),v=0,S=0,N=0;v<i;++v)for(var _=0,T=Ov(t,p+1,p=Xde(S=o[v])),C=t;_<x;++_)(C=wU(S>0?y[_]+" "+T:tr(T,/&\f/g,y[_])))&&(c[N++]=C);return QS(t,e,n,a===0?dD:l,c,d,f)}function che(t,e,n){return QS(t,e,n,bU,YS(nhe()),Ov(t,2,-2),0)}function C4(t,e,n,i){return QS(t,e,n,hD,Ov(t,0,i),Ov(t,i+1,-1),i)}function Im(t,e){for(var n="",i=fD(t),a=0;a<i;a++)n+=e(t[a],a,t,e)||"";return n}function uhe(t,e,n,i){switch(t.type){case Qde:if(t.children.length)break;case Kde:case hD:return t.return=t.return||t.value;case bU:return"";case jU:return t.return=t.value+"{"+Im(t.children,i)+"}";case dD:t.value=t.props.join(",")}return bl(n=Im(t.children,i))?t.return=t.value+"{"+n+"}":""}function dhe(t){var e=fD(t);return function(n,i,a,s){for(var o="",l=0;l<e;l++)o+=t[l](n,i,a,s)||"";return o}}function hhe(t){return function(e){e.root||(e=e.return)&&t(e)}}function fhe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var phe=function(e,n,i){for(var a=0,s=0;a=s,s=Tl(),a===38&&s===12&&(n[i]=1),!Dv(s);)Ts();return Mb(e,is)},mhe=function(e,n){var i=-1,a=44;do switch(Dv(a)){case 0:a===38&&Tl()===12&&(n[i]=1),e[i]+=phe(is-1,n,i);break;case 2:e[i]+=tw(a);break;case 4:if(a===44){e[++i]=Tl()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=YS(a)}while(a=Ts());return e},ghe=function(e,n){return _U(mhe(NU(e),n))},T4=new WeakMap,yhe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,a=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!T4.get(i))&&!a){T4.set(e,!0);for(var s=[],o=ghe(n,s),l=i.props,c=0,d=0;c<o.length;c++)for(var f=0;f<l.length;f++,d++)e.props[d]=s[c]?o[c].replace(/&\f/g,l[f]):l[f]+" "+o[c]}}},xhe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function CU(t,e){switch(Zde(t,e)){case 5103:return er+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return er+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return er+t+jw+t+ra+t+t;case 6828:case 4268:return er+t+ra+t+t;case 6165:return er+t+ra+"flex-"+t+t;case 5187:return er+t+tr(t,/(\w+).+(:[^]+)/,er+"box-$1$2"+ra+"flex-$1$2")+t;case 5443:return er+t+ra+"flex-item-"+tr(t,/flex-|-self/,"")+t;case 4675:return er+t+ra+"flex-line-pack"+tr(t,/align-content|flex-|-self/,"")+t;case 5548:return er+t+ra+tr(t,"shrink","negative")+t;case 5292:return er+t+ra+tr(t,"basis","preferred-size")+t;case 6060:return er+"box-"+tr(t,"-grow","")+er+t+ra+tr(t,"grow","positive")+t;case 4554:return er+tr(t,/([^-])(transform)/g,"$1"+er+"$2")+t;case 6187:return tr(tr(tr(t,/(zoom-|grab)/,er+"$1"),/(image-set)/,er+"$1"),t,"")+t;case 5495:case 3959:return tr(t,/(image-set\([^]*)/,er+"$1$`$1");case 4968:return tr(tr(t,/(.+:)(flex-)?(.*)/,er+"box-pack:$3"+ra+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+er+t+t;case 4095:case 3583:case 4068:case 2532:return tr(t,/(.+)-inline(.+)/,er+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(bl(t)-1-e>6)switch(zi(t,e+1)){case 109:if(zi(t,e+4)!==45)break;case 102:return tr(t,/(.+:)(.+)-([^]+)/,"$1"+er+"$2-$3$1"+jw+(zi(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~UE(t,"stretch")?CU(tr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(zi(t,e+1)!==115)break;case 6444:switch(zi(t,bl(t)-3-(~UE(t,"!important")&&10))){case 107:return tr(t,":",":"+er)+t;case 101:return tr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+er+(zi(t,14)===45?"inline-":"")+"box$3$1"+er+"$2$3$1"+ra+"$2box$3")+t}break;case 5936:switch(zi(t,e+11)){case 114:return er+t+ra+tr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return er+t+ra+tr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return er+t+ra+tr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return er+t+ra+t+t}return t}var vhe=function(e,n,i,a){if(e.length>-1&&!e.return)switch(e.type){case hD:e.return=CU(e.value,e.length);break;case jU:return Im([Gx(e,{value:tr(e.value,"@","@"+er)})],a);case dD:if(e.length)return the(e.props,function(s){switch(ehe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Im([Gx(e,{props:[tr(s,/:(read-\w+)/,":"+jw+"$1")]})],a);case"::placeholder":return Im([Gx(e,{props:[tr(s,/:(plac\w+)/,":"+er+"input-$1")]}),Gx(e,{props:[tr(s,/:(plac\w+)/,":"+jw+"$1")]}),Gx(e,{props:[tr(s,/:(plac\w+)/,ra+"input-$1")]})],a)}return""})}},bhe=[vhe],jhe=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(S){var N=S.getAttribute("data-emotion");N.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var a=e.stylisPlugins||bhe,s={},o,l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(S){for(var N=S.getAttribute("data-emotion").split(" "),_=1;_<N.length;_++)s[N[_]]=!0;l.push(S)});var c,d=[yhe,xhe];{var f,p=[uhe,hhe(function(S){f.insert(S)})],y=dhe(d.concat(a,p)),x=function(N){return Im(lhe(N),y)};c=function(N,_,T,C){f=T,x(N?N+"{"+_.styles+"}":_.styles),C&&(v.inserted[_.name]=!0)}}var v={key:n,sheet:new Yde({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return v.sheet.hydrate(l),v},wC={exports:{}},ar={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k4;function whe(){if(k4)return ar;k4=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,y=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,v=t?Symbol.for("react.lazy"):60116,S=t?Symbol.for("react.block"):60121,N=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,T=t?Symbol.for("react.scope"):60119;function C(k){if(typeof k=="object"&&k!==null){var P=k.$$typeof;switch(P){case e:switch(k=k.type,k){case c:case d:case i:case s:case a:case p:return k;default:switch(k=k&&k.$$typeof,k){case l:case f:case v:case x:case o:return k;default:return P}}case n:return P}}}function O(k){return C(k)===d}return ar.AsyncMode=c,ar.ConcurrentMode=d,ar.ContextConsumer=l,ar.ContextProvider=o,ar.Element=e,ar.ForwardRef=f,ar.Fragment=i,ar.Lazy=v,ar.Memo=x,ar.Portal=n,ar.Profiler=s,ar.StrictMode=a,ar.Suspense=p,ar.isAsyncMode=function(k){return O(k)||C(k)===c},ar.isConcurrentMode=O,ar.isContextConsumer=function(k){return C(k)===l},ar.isContextProvider=function(k){return C(k)===o},ar.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},ar.isForwardRef=function(k){return C(k)===f},ar.isFragment=function(k){return C(k)===i},ar.isLazy=function(k){return C(k)===v},ar.isMemo=function(k){return C(k)===x},ar.isPortal=function(k){return C(k)===n},ar.isProfiler=function(k){return C(k)===s},ar.isStrictMode=function(k){return C(k)===a},ar.isSuspense=function(k){return C(k)===p},ar.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===i||k===d||k===s||k===a||k===p||k===y||typeof k=="object"&&k!==null&&(k.$$typeof===v||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===f||k.$$typeof===N||k.$$typeof===_||k.$$typeof===T||k.$$typeof===S)},ar.typeOf=C,ar}var A4;function She(){return A4||(A4=1,wC.exports=whe()),wC.exports}var SC,E4;function Nhe(){if(E4)return SC;E4=1;var t=She(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=i,s[t.Memo]=a;function o(v){return t.isMemo(v)?a:s[v.$$typeof]||e}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,y=Object.prototype;function x(v,S,N){if(typeof S!="string"){if(y){var _=p(S);_&&_!==y&&x(v,_,N)}var T=c(S);d&&(T=T.concat(d(S)));for(var C=o(v),O=o(S),k=0;k<T.length;++k){var P=T[k];if(!n[P]&&!(N&&N[P])&&!(O&&O[P])&&!(C&&C[P])){var I=f(S,P);try{l(v,P,I)}catch{}}}}return v}return SC=x,SC}Nhe();var _he=!0;function Che(t,e,n){var i="";return n.split(" ").forEach(function(a){t[a]!==void 0?e.push(t[a]+";"):a&&(i+=a+" ")}),i}var TU=function(e,n,i){var a=e.key+"-"+n.name;(i===!1||_he===!1)&&e.registered[a]===void 0&&(e.registered[a]=n.styles)},The=function(e,n,i){TU(e,n,i);var a=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+a:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function khe(t){for(var e=0,n,i=0,a=t.length;a>=4;++i,a-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Ahe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ehe=/[A-Z]|^ms/g,Phe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,kU=function(e){return e.charCodeAt(1)===45},P4=function(e){return e!=null&&typeof e!="boolean"},NC=fhe(function(t){return kU(t)?t:t.replace(Ehe,"-$&").toLowerCase()}),O4=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Phe,function(i,a,s){return jl={name:a,styles:s,next:jl},a})}return Ahe[e]!==1&&!kU(e)&&typeof n=="number"&&n!==0?n+"px":n};function Mv(t,e,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return jl={name:a.name,styles:a.styles,next:jl},a.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)jl={name:o.name,styles:o.styles,next:jl},o=o.next;var l=s.styles+";";return l}return Ohe(t,e,n)}case"function":{if(t!==void 0){var c=jl,d=n(t);return jl=c,Mv(t,e,d)}break}}var f=n;return f}function Ohe(t,e,n){var i="";if(Array.isArray(n))for(var a=0;a<n.length;a++)i+=Mv(t,e,n[a])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var l=o;P4(l)&&(i+=NC(s)+":"+O4(s,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var c=0;c<o.length;c++)P4(o[c])&&(i+=NC(s)+":"+O4(s,o[c])+";");else{var d=Mv(t,e,o);switch(s){case"animation":case"animationName":{i+=NC(s)+":"+d+";";break}default:i+=s+"{"+d+"}"}}}return i}var D4=/label:\s*([^\s;{]+)\s*(;|$)/g,jl;function AU(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,a="";jl=void 0;var s=t[0];if(s==null||s.raw===void 0)i=!1,a+=Mv(n,e,s);else{var o=s;a+=o[0]}for(var l=1;l<t.length;l++)if(a+=Mv(n,e,t[l]),i){var c=s;a+=c[l]}D4.lastIndex=0;for(var d="",f;(f=D4.exec(a))!==null;)d+="-"+f[1];var p=khe(a)+d;return{name:p,styles:a,next:jl}}var Dhe=function(e){return e()},Mhe=LM.useInsertionEffect?LM.useInsertionEffect:!1,Ihe=Mhe||Dhe,EU=b.createContext(typeof HTMLElement<"u"?jhe({key:"css"}):null);EU.Provider;var Rhe=function(e){return b.forwardRef(function(n,i){var a=b.useContext(EU);return e(n,a,i)})},Lhe=b.createContext({}),pD={}.hasOwnProperty,HE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Fhe=function(e,n){var i={};for(var a in n)pD.call(n,a)&&(i[a]=n[a]);return i[HE]=e,i},$he=function(e){var n=e.cache,i=e.serialized,a=e.isStringTag;return TU(n,i,a),Ihe(function(){return The(n,i,a)}),null},Bhe=Rhe(function(t,e,n){var i=t.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var a=t[HE],s=[i],o="";typeof t.className=="string"?o=Che(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var l=AU(s,void 0,b.useContext(Lhe));o+=e.key+"-"+l.name;var c={};for(var d in t)pD.call(t,d)&&d!=="css"&&d!==HE&&(c[d]=t[d]);return c.className=o,n&&(c.ref=n),b.createElement(b.Fragment,null,b.createElement($he,{cache:e,serialized:l,isStringTag:typeof a=="string"}),b.createElement(a,c))}),zhe=Bhe,zt=function(e,n){var i=arguments;if(n==null||!pD.call(n,"css"))return b.createElement.apply(void 0,i);var a=i.length,s=new Array(a);s[0]=zhe,s[1]=Fhe(e,n);for(var o=2;o<a;o++)s[o]=i[o];return b.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(zt||(zt={}));function mD(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return AU(e)}function qhe(){var t=mD.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function Uhe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const Vhe=Math.min,Hhe=Math.max,ww=Math.round,wj=Math.floor,Sw=t=>({x:t,y:t});function Ghe(t){const{x:e,y:n,width:i,height:a}=t;return{width:i,height:a,top:n,left:e,right:e+i,bottom:n+a,x:e,y:n}}function XS(){return typeof window<"u"}function PU(t){return DU(t)?(t.nodeName||"").toLowerCase():"#document"}function Ic(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function OU(t){var e;return(e=(DU(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function DU(t){return XS()?t instanceof Node||t instanceof Ic(t).Node:!1}function Whe(t){return XS()?t instanceof Element||t instanceof Ic(t).Element:!1}function gD(t){return XS()?t instanceof HTMLElement||t instanceof Ic(t).HTMLElement:!1}function M4(t){return!XS()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ic(t).ShadowRoot}const Yhe=new Set(["inline","contents"]);function MU(t){const{overflow:e,overflowX:n,overflowY:i,display:a}=yD(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!Yhe.has(a)}function Khe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Qhe=new Set(["html","body","#document"]);function Xhe(t){return Qhe.has(PU(t))}function yD(t){return Ic(t).getComputedStyle(t)}function Jhe(t){if(PU(t)==="html")return t;const e=t.assignedSlot||t.parentNode||M4(t)&&t.host||OU(t);return M4(e)?e.host:e}function IU(t){const e=Jhe(t);return Xhe(e)?t.ownerDocument?t.ownerDocument.body:t.body:gD(e)&&MU(e)?e:IU(e)}function Nw(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=IU(t),s=a===((i=t.ownerDocument)==null?void 0:i.body),o=Ic(a);if(s){const l=GE(o);return e.concat(o,o.visualViewport||[],MU(a)?a:[],l&&n?Nw(l):[])}return e.concat(a,Nw(a,[],n))}function GE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Zhe(t){const e=yD(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const a=gD(t),s=a?t.offsetWidth:n,o=a?t.offsetHeight:i,l=ww(n)!==s||ww(i)!==o;return l&&(n=s,i=o),{width:n,height:i,$:l}}function xD(t){return Whe(t)?t:t.contextElement}function I4(t){const e=xD(t);if(!gD(e))return Sw(1);const n=e.getBoundingClientRect(),{width:i,height:a,$:s}=Zhe(e);let o=(s?ww(n.width):n.width)/i,l=(s?ww(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const efe=Sw(0);function tfe(t){const e=Ic(t);return!Khe()||!e.visualViewport?efe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function nfe(t,e,n){return!1}function R4(t,e,n,i){e===void 0&&(e=!1);const a=t.getBoundingClientRect(),s=xD(t);let o=Sw(1);e&&(o=I4(t));const l=nfe()?tfe(s):Sw(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,f=a.width/o.x,p=a.height/o.y;if(s){const y=Ic(s),x=i;let v=y,S=GE(v);for(;S&&i&&x!==v;){const N=I4(S),_=S.getBoundingClientRect(),T=yD(S),C=_.left+(S.clientLeft+parseFloat(T.paddingLeft))*N.x,O=_.top+(S.clientTop+parseFloat(T.paddingTop))*N.y;c*=N.x,d*=N.y,f*=N.x,p*=N.y,c+=C,d+=O,v=Ic(S),S=GE(v)}}return Ghe({width:f,height:p,x:c,y:d})}function RU(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function rfe(t,e){let n=null,i;const a=OU(t);function s(){var l;clearTimeout(i),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const d=t.getBoundingClientRect(),{left:f,top:p,width:y,height:x}=d;if(l||e(),!y||!x)return;const v=wj(p),S=wj(a.clientWidth-(f+y)),N=wj(a.clientHeight-(p+x)),_=wj(f),C={rootMargin:-v+"px "+-S+"px "+-N+"px "+-_+"px",threshold:Hhe(0,Vhe(1,c))||1};let O=!0;function k(P){const I=P[0].intersectionRatio;if(I!==c){if(!O)return o();I?o(!1,I):i=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!RU(d,t.getBoundingClientRect())&&o(),O=!1}try{n=new IntersectionObserver(k,{...C,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,C)}n.observe(t)}return o(!0),s}function ife(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=i,d=xD(t),f=a||s?[...d?Nw(d):[],...Nw(e)]:[];f.forEach(_=>{a&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const p=d&&l?rfe(d,n):null;let y=-1,x=null;o&&(x=new ResizeObserver(_=>{let[T]=_;T&&T.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(e)})),n()}),d&&!c&&x.observe(d),x.observe(e));let v,S=c?R4(t):null;c&&N();function N(){const _=R4(t);S&&!RU(S,_)&&n(),S=_,v=requestAnimationFrame(N)}return n(),()=>{var _;f.forEach(T=>{a&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),p==null||p(),(_=x)==null||_.disconnect(),x=null,c&&cancelAnimationFrame(v)}}var WE=b.useLayoutEffect,afe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],_w=function(){};function sfe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function ofe(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var s=[].concat(i);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(sfe(t,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var L4=function(e){return gfe(e)?e.filter(Boolean):jf(e)==="object"&&e!==null?[e]:[]},LU=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=qc(e,afe);return Yt({},n)},Jr=function(e,n,i){var a=e.cx,s=e.getStyles,o=e.getClassNames,l=e.className;return{css:s(n,e),className:a(i??{},o(n,e),l)}};function JS(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function lfe(t){return JS(t)?window.innerHeight:t.clientHeight}function FU(t){return JS(t)?window.pageYOffset:t.scrollTop}function Cw(t,e){if(JS(t)){window.scrollTo(0,e);return}t.scrollTop=e}function cfe(t){var e=getComputedStyle(t),n=e.position==="absolute",i=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var a=t;a=a.parentElement;)if(e=getComputedStyle(a),!(n&&e.position==="static")&&i.test(e.overflow+e.overflowY+e.overflowX))return a;return document.documentElement}function ufe(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}function Sj(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_w,a=FU(t),s=e-a,o=10,l=0;function c(){l+=o;var d=ufe(l,a,s,n);Cw(t,d),l<n?window.requestAnimationFrame(c):i(t)}c()}function F4(t,e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),a=e.offsetHeight/3;i.bottom+a>n.bottom?Cw(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+a,t.scrollHeight)):i.top-a<n.top&&Cw(t,Math.max(e.offsetTop-a,0))}function dfe(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function $4(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function hfe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var $U=!1,ffe={get passive(){return $U=!0}},Nj=typeof window<"u"?window:{};Nj.addEventListener&&Nj.removeEventListener&&(Nj.addEventListener("p",_w,ffe),Nj.removeEventListener("p",_w,!1));var pfe=$U;function mfe(t){return t!=null}function gfe(t){return Array.isArray(t)}function _j(t,e,n){return t?e:n}var yfe=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=Object.entries(e).filter(function(o){var l=_c(o,1),c=l[0];return!i.includes(c)});return s.reduce(function(o,l){var c=_c(l,2),d=c[0],f=c[1];return o[d]=f,o},{})},xfe=["children","innerProps"],vfe=["children","innerProps"];function bfe(t){var e=t.maxHeight,n=t.menuEl,i=t.minHeight,a=t.placement,s=t.shouldScroll,o=t.isFixedPosition,l=t.controlHeight,c=cfe(n),d={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return d;var f=c.getBoundingClientRect(),p=f.height,y=n.getBoundingClientRect(),x=y.bottom,v=y.height,S=y.top,N=n.offsetParent.getBoundingClientRect(),_=N.top,T=o?window.innerHeight:lfe(c),C=FU(c),O=parseInt(getComputedStyle(n).marginBottom,10),k=parseInt(getComputedStyle(n).marginTop,10),P=_-k,I=T-S,F=P+C,B=p-C-S,$=x-T+C+O,L=C+S-k,V=160;switch(a){case"auto":case"bottom":if(I>=v)return{placement:"bottom",maxHeight:e};if(B>=v&&!o)return s&&Sj(c,$,V),{placement:"bottom",maxHeight:e};if(!o&&B>=i||o&&I>=i){s&&Sj(c,$,V);var H=o?I-O:B-O;return{placement:"bottom",maxHeight:H}}if(a==="auto"||o){var te=e,X=o?P:F;return X>=i&&(te=Math.min(X-O-l,e)),{placement:"top",maxHeight:te}}if(a==="bottom")return s&&Cw(c,$),{placement:"bottom",maxHeight:e};break;case"top":if(P>=v)return{placement:"top",maxHeight:e};if(F>=v&&!o)return s&&Sj(c,L,V),{placement:"top",maxHeight:e};if(!o&&F>=i||o&&P>=i){var q=e;return(!o&&F>=i||o&&P>=i)&&(q=o?P-k:F-k),s&&Sj(c,L,V),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return d}function jfe(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var BU=function(e){return e==="auto"?"bottom":e},wfe=function(e,n){var i,a=e.placement,s=e.theme,o=s.borderRadius,l=s.spacing,c=s.colors;return Yt((i={label:"menu"},uv(i,jfe(a),"100%"),uv(i,"position","absolute"),uv(i,"width","100%"),uv(i,"zIndex",1),i),n?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},zU=b.createContext(null),Sfe=function(e){var n=e.children,i=e.minMenuHeight,a=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,l=e.menuShouldScrollIntoView,c=e.theme,d=b.useContext(zU)||{},f=d.setPortalPlacement,p=b.useRef(null),y=b.useState(a),x=_c(y,2),v=x[0],S=x[1],N=b.useState(null),_=_c(N,2),T=_[0],C=_[1],O=c.spacing.controlHeight;return WE(function(){var k=p.current;if(k){var P=o==="fixed",I=l&&!P,F=bfe({maxHeight:a,menuEl:k,minHeight:i,placement:s,shouldScroll:I,isFixedPosition:P,controlHeight:O});S(F.maxHeight),C(F.placement),f==null||f(F.placement)}},[a,s,o,l,i,f,O]),n({ref:p,placerProps:Yt(Yt({},e),{},{placement:T||BU(s),maxHeight:v})})},Nfe=function(e){var n=e.children,i=e.innerRef,a=e.innerProps;return zt("div",Zt({},Jr(e,"menu",{menu:!0}),{ref:i},a),n)},_fe=Nfe,Cfe=function(e,n){var i=e.maxHeight,a=e.theme.spacing.baseUnit;return Yt({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:a,paddingTop:a})},Tfe=function(e){var n=e.children,i=e.innerProps,a=e.innerRef,s=e.isMulti;return zt("div",Zt({},Jr(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:a},i),n)},qU=function(e,n){var i=e.theme,a=i.spacing.baseUnit,s=i.colors;return Yt({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},kfe=qU,Afe=qU,Efe=function(e){var n=e.children,i=n===void 0?"No options":n,a=e.innerProps,s=qc(e,xfe);return zt("div",Zt({},Jr(Yt(Yt({},s),{},{children:i,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),i)},Pfe=function(e){var n=e.children,i=n===void 0?"Loading...":n,a=e.innerProps,s=qc(e,vfe);return zt("div",Zt({},Jr(Yt(Yt({},s),{},{children:i,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),i)},Ofe=function(e){var n=e.rect,i=e.offset,a=e.position;return{left:n.left,position:a,top:i,width:n.width,zIndex:1}},Dfe=function(e){var n=e.appendTo,i=e.children,a=e.controlElement,s=e.innerProps,o=e.menuPlacement,l=e.menuPosition,c=b.useRef(null),d=b.useRef(null),f=b.useState(BU(o)),p=_c(f,2),y=p[0],x=p[1],v=b.useMemo(function(){return{setPortalPlacement:x}},[]),S=b.useState(null),N=_c(S,2),_=N[0],T=N[1],C=b.useCallback(function(){if(a){var I=dfe(a),F=l==="fixed"?0:window.pageYOffset,B=I[y]+F;(B!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&T({offset:B,rect:I})}},[a,l,y,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);WE(function(){C()},[C]);var O=b.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),a&&c.current&&(d.current=ife(a,c.current,C,{elementResize:"ResizeObserver"in window}))},[a,C]);WE(function(){O()},[O]);var k=b.useCallback(function(I){c.current=I,O()},[O]);if(!n&&l!=="fixed"||!_)return null;var P=zt("div",Zt({ref:k},Jr(Yt(Yt({},e),{},{offset:_.offset,position:l,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),i);return zt(zU.Provider,{value:v},n?mK.createPortal(P,n):P)},Mfe=function(e){var n=e.isDisabled,i=e.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},Ife=function(e){var n=e.children,i=e.innerProps,a=e.isDisabled,s=e.isRtl;return zt("div",Zt({},Jr(e,"container",{"--is-disabled":a,"--is-rtl":s}),i),n)},Rfe=function(e,n){var i=e.theme.spacing,a=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Yt({alignItems:"center",display:a&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},Lfe=function(e){var n=e.children,i=e.innerProps,a=e.isMulti,s=e.hasValue;return zt("div",Zt({},Jr(e,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":s}),i),n)},Ffe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},$fe=function(e){var n=e.children,i=e.innerProps;return zt("div",Zt({},Jr(e,"indicatorsContainer",{indicators:!0}),i),n)},B4,Bfe=["size"],zfe=["innerProps","isRtl","size"],qfe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},UU=function(e){var n=e.size,i=qc(e,Bfe);return zt("svg",Zt({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:qfe},i))},vD=function(e){return zt(UU,Zt({size:20},e),zt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},VU=function(e){return zt(UU,Zt({size:20},e),zt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},HU=function(e,n){var i=e.isFocused,a=e.theme,s=a.spacing.baseUnit,o=a.colors;return Yt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:i?o.neutral60:o.neutral20,padding:s*2,":hover":{color:i?o.neutral80:o.neutral40}})},Ufe=HU,Vfe=function(e){var n=e.children,i=e.innerProps;return zt("div",Zt({},Jr(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),n||zt(VU,null))},Hfe=HU,Gfe=function(e){var n=e.children,i=e.innerProps;return zt("div",Zt({},Jr(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),n||zt(vD,null))},Wfe=function(e,n){var i=e.isDisabled,a=e.theme,s=a.spacing.baseUnit,o=a.colors;return Yt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:i?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},Yfe=function(e){var n=e.innerProps;return zt("span",Zt({},n,Jr(e,"indicatorSeparator",{"indicator-separator":!0})))},Kfe=qhe(B4||(B4=Uhe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Qfe=function(e,n){var i=e.isFocused,a=e.size,s=e.theme,o=s.colors,l=s.spacing.baseUnit;return Yt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},n?{}:{color:i?o.neutral60:o.neutral20,padding:l*2})},_C=function(e){var n=e.delay,i=e.offset;return zt("span",{css:mD({animation:"".concat(Kfe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Xfe=function(e){var n=e.innerProps,i=e.isRtl,a=e.size,s=a===void 0?4:a,o=qc(e,zfe);return zt("div",Zt({},Jr(Yt(Yt({},o),{},{innerProps:n,isRtl:i,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),zt(_C,{delay:0,offset:i}),zt(_C,{delay:160,offset:!0}),zt(_C,{delay:320,offset:!i}))},Jfe=function(e,n){var i=e.isDisabled,a=e.isFocused,s=e.theme,o=s.colors,l=s.borderRadius,c=s.spacing;return Yt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:i?o.neutral5:o.neutral0,borderColor:i?o.neutral10:a?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:a?o.primary:o.neutral30}})},Zfe=function(e){var n=e.children,i=e.isDisabled,a=e.isFocused,s=e.innerRef,o=e.innerProps,l=e.menuIsOpen;return zt("div",Zt({ref:s},Jr(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":a,"control--menu-is-open":l}),o,{"aria-disabled":i||void 0}),n)},epe=Zfe,tpe=["data"],npe=function(e,n){var i=e.theme.spacing;return n?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},rpe=function(e){var n=e.children,i=e.cx,a=e.getStyles,s=e.getClassNames,o=e.Heading,l=e.headingProps,c=e.innerProps,d=e.label,f=e.theme,p=e.selectProps;return zt("div",Zt({},Jr(e,"group",{group:!0}),c),zt(o,Zt({},l,{selectProps:p,theme:f,getStyles:a,getClassNames:s,cx:i}),d),zt("div",null,n))},ipe=function(e,n){var i=e.theme,a=i.colors,s=i.spacing;return Yt({label:"group",cursor:"default",display:"block"},n?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},ape=function(e){var n=LU(e);n.data;var i=qc(n,tpe);return zt("div",Zt({},Jr(e,"groupHeading",{"group-heading":!0}),i))},spe=rpe,ope=["innerRef","isDisabled","isHidden","inputClassName"],lpe=function(e,n){var i=e.isDisabled,a=e.value,s=e.theme,o=s.spacing,l=s.colors;return Yt(Yt({visibility:i?"hidden":"visible",transform:a?"translateZ(0)":""},cpe),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},GU={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},cpe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Yt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},GU)},upe=function(e){return Yt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},GU)},dpe=function(e){var n=e.cx,i=e.value,a=LU(e),s=a.innerRef,o=a.isDisabled,l=a.isHidden,c=a.inputClassName,d=qc(a,ope);return zt("div",Zt({},Jr(e,"input",{"input-container":!0}),{"data-value":i||""}),zt("input",Zt({className:n({input:!0},c),ref:s,style:upe(l),disabled:o},d)))},hpe=dpe,fpe=function(e,n){var i=e.theme,a=i.spacing,s=i.borderRadius,o=i.colors;return Yt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:a.baseUnit/2})},ppe=function(e,n){var i=e.theme,a=i.borderRadius,s=i.colors,o=e.cropWithEllipsis;return Yt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:a/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},mpe=function(e,n){var i=e.theme,a=i.spacing,s=i.borderRadius,o=i.colors,l=e.isFocused;return Yt({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},WU=function(e){var n=e.children,i=e.innerProps;return zt("div",i,n)},gpe=WU,ype=WU;function xpe(t){var e=t.children,n=t.innerProps;return zt("div",Zt({role:"button"},n),e||zt(vD,{size:14}))}var vpe=function(e){var n=e.children,i=e.components,a=e.data,s=e.innerProps,o=e.isDisabled,l=e.removeProps,c=e.selectProps,d=i.Container,f=i.Label,p=i.Remove;return zt(d,{data:a,innerProps:Yt(Yt({},Jr(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:c},zt(f,{data:a,innerProps:Yt({},Jr(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),zt(p,{data:a,innerProps:Yt(Yt({},Jr(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:c}))},bpe=vpe,jpe=function(e,n){var i=e.isDisabled,a=e.isFocused,s=e.isSelected,o=e.theme,l=o.spacing,c=o.colors;return Yt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?c.primary:a?c.primary25:"transparent",color:i?c.neutral20:s?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:s?c.primary:c.primary50}})},wpe=function(e){var n=e.children,i=e.isDisabled,a=e.isFocused,s=e.isSelected,o=e.innerRef,l=e.innerProps;return zt("div",Zt({},Jr(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":a,"option--is-selected":s}),{ref:o,"aria-disabled":i},l),n)},Spe=wpe,Npe=function(e,n){var i=e.theme,a=i.spacing,s=i.colors;return Yt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},_pe=function(e){var n=e.children,i=e.innerProps;return zt("div",Zt({},Jr(e,"placeholder",{placeholder:!0}),i),n)},Cpe=_pe,Tpe=function(e,n){var i=e.isDisabled,a=e.theme,s=a.spacing,o=a.colors;return Yt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:i?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},kpe=function(e){var n=e.children,i=e.isDisabled,a=e.innerProps;return zt("div",Zt({},Jr(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),a),n)},Ape=kpe,Epe={ClearIndicator:Gfe,Control:epe,DropdownIndicator:Vfe,DownChevron:VU,CrossIcon:vD,Group:spe,GroupHeading:ape,IndicatorsContainer:$fe,IndicatorSeparator:Yfe,Input:hpe,LoadingIndicator:Xfe,Menu:_fe,MenuList:Tfe,MenuPortal:Dfe,LoadingMessage:Pfe,NoOptionsMessage:Efe,MultiValue:bpe,MultiValueContainer:gpe,MultiValueLabel:ype,MultiValueRemove:xpe,Option:Spe,Placeholder:Cpe,SelectContainer:Ife,SingleValue:Ape,ValueContainer:Lfe},Ppe=function(e){return Yt(Yt({},Epe),e.components)},z4=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ope(t,e){return!!(t===e||z4(t)&&z4(e))}function Dpe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Ope(t[n],e[n]))return!1;return!0}function Mpe(t,e){e===void 0&&(e=Dpe);var n=null;function i(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(n&&n.lastThis===this&&e(a,n.lastArgs))return n.lastResult;var o=t.apply(this,a);return n={lastResult:o,lastArgs:a,lastThis:this},o}return i.clear=function(){n=null},i}var Ipe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Rpe=function(e){return zt("span",Zt({css:Ipe},e))},q4=Rpe,Lpe={guidance:function(e){var n=e.isSearchable,i=e.isMulti,a=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,i=e.label,a=i===void 0?"":i,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(e){var n=e.context,i=e.focused,a=e.options,s=e.label,o=s===void 0?"":s,l=e.selectValue,c=e.isDisabled,d=e.isSelected,f=e.isAppleDevice,p=function(S,N){return S&&S.length?"".concat(S.indexOf(N)+1," of ").concat(S.length):""};if(n==="value"&&l)return"value ".concat(o," focused, ").concat(p(l,i),".");if(n==="menu"&&f){var y=c?" disabled":"",x="".concat(d?" selected":"").concat(y);return"".concat(o).concat(x,", ").concat(p(a,i),".")}return""},onFilter:function(e){var n=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(n?" for search term "+n:"",".")}},Fpe=function(e){var n=e.ariaSelection,i=e.focusedOption,a=e.focusedValue,s=e.focusableOptions,o=e.isFocused,l=e.selectValue,c=e.selectProps,d=e.id,f=e.isAppleDevice,p=c.ariaLiveMessages,y=c.getOptionLabel,x=c.inputValue,v=c.isMulti,S=c.isOptionDisabled,N=c.isSearchable,_=c.menuIsOpen,T=c.options,C=c.screenReaderStatus,O=c.tabSelectsValue,k=c.isLoading,P=c["aria-label"],I=c["aria-live"],F=b.useMemo(function(){return Yt(Yt({},Lpe),p||{})},[p]),B=b.useMemo(function(){var X="";if(n&&F.onChange){var q=n.option,W=n.options,ae=n.removedValue,G=n.removedValues,z=n.value,le=function(be){return Array.isArray(be)?null:be},je=ae||q||le(z),K=je?y(je):"",Oe=W||G||void 0,Ye=Oe?Oe.map(y):[],Me=Yt({isDisabled:je&&S(je,l),label:K,labels:Ye},n);X=F.onChange(Me)}return X},[n,F,S,l,y]),$=b.useMemo(function(){var X="",q=i||a,W=!!(i&&l&&l.includes(i));if(q&&F.onFocus){var ae={focused:q,label:y(q),isDisabled:S(q,l),isSelected:W,options:s,context:q===i?"menu":"value",selectValue:l,isAppleDevice:f};X=F.onFocus(ae)}return X},[i,a,y,S,F,s,l,f]),L=b.useMemo(function(){var X="";if(_&&T.length&&!k&&F.onFilter){var q=C({count:s.length});X=F.onFilter({inputValue:x,resultsMessage:q})}return X},[s,x,_,F,T,C,k]),V=(n==null?void 0:n.action)==="initial-input-focus",H=b.useMemo(function(){var X="";if(F.guidance){var q=a?"value":_?"menu":"input";X=F.guidance({"aria-label":P,context:q,isDisabled:i&&S(i,l),isMulti:v,isSearchable:N,tabSelectsValue:O,isInitialFocus:V})}return X},[P,i,a,v,S,N,_,F,l,O,V]),te=zt(b.Fragment,null,zt("span",{id:"aria-selection"},B),zt("span",{id:"aria-focused"},$),zt("span",{id:"aria-results"},L),zt("span",{id:"aria-guidance"},H));return zt(b.Fragment,null,zt(q4,{id:d},V&&te),zt(q4,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!V&&te))},$pe=Fpe,YE=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Bpe=new RegExp("["+YE.map(function(t){return t.letters}).join("")+"]","g"),YU={};for(var CC=0;CC<YE.length;CC++)for(var TC=YE[CC],kC=0;kC<TC.letters.length;kC++)YU[TC.letters[kC]]=TC.base;var KU=function(e){return e.replace(Bpe,function(n){return YU[n]})},zpe=Mpe(KU),U4=function(e){return e.replace(/^\s+|\s+$/g,"")},qpe=function(e){return"".concat(e.label," ").concat(e.value)},Upe=function(e){return function(n,i){if(n.data.__isNew__)return!0;var a=Yt({ignoreCase:!0,ignoreAccents:!0,stringify:qpe,trim:!0,matchFrom:"any"},e),s=a.ignoreCase,o=a.ignoreAccents,l=a.stringify,c=a.trim,d=a.matchFrom,f=c?U4(i):i,p=c?U4(l(n)):l(n);return s&&(f=f.toLowerCase(),p=p.toLowerCase()),o&&(f=zpe(f),p=KU(p)),d==="start"?p.substr(0,f.length)===f:p.indexOf(f)>-1}},Vpe=["innerRef"];function Hpe(t){var e=t.innerRef,n=qc(t,Vpe),i=yfe(n,"onExited","in","enter","exit","appear");return zt("input",Zt({ref:e},i,{css:mD({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Gpe=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function Wpe(t){var e=t.isEnabled,n=t.onBottomArrive,i=t.onBottomLeave,a=t.onTopArrive,s=t.onTopLeave,o=b.useRef(!1),l=b.useRef(!1),c=b.useRef(0),d=b.useRef(null),f=b.useCallback(function(N,_){if(d.current!==null){var T=d.current,C=T.scrollTop,O=T.scrollHeight,k=T.clientHeight,P=d.current,I=_>0,F=O-k-C,B=!1;F>_&&o.current&&(i&&i(N),o.current=!1),I&&l.current&&(s&&s(N),l.current=!1),I&&_>F?(n&&!o.current&&n(N),P.scrollTop=O,B=!0,o.current=!0):!I&&-_>C&&(a&&!l.current&&a(N),P.scrollTop=0,B=!0,l.current=!0),B&&Gpe(N)}},[n,i,a,s]),p=b.useCallback(function(N){f(N,N.deltaY)},[f]),y=b.useCallback(function(N){c.current=N.changedTouches[0].clientY},[]),x=b.useCallback(function(N){var _=c.current-N.changedTouches[0].clientY;f(N,_)},[f]),v=b.useCallback(function(N){if(N){var _=pfe?{passive:!1}:!1;N.addEventListener("wheel",p,_),N.addEventListener("touchstart",y,_),N.addEventListener("touchmove",x,_)}},[x,y,p]),S=b.useCallback(function(N){N&&(N.removeEventListener("wheel",p,!1),N.removeEventListener("touchstart",y,!1),N.removeEventListener("touchmove",x,!1))},[x,y,p]);return b.useEffect(function(){if(e){var N=d.current;return v(N),function(){S(N)}}},[e,v,S]),function(N){d.current=N}}var V4=["boxSizing","height","overflow","paddingRight","position"],H4={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function G4(t){t.cancelable&&t.preventDefault()}function W4(t){t.stopPropagation()}function Y4(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function K4(){return"ontouchstart"in window||navigator.maxTouchPoints}var Q4=!!(typeof window<"u"&&window.document&&window.document.createElement),Wx=0,pm={capture:!1,passive:!1};function Ype(t){var e=t.isEnabled,n=t.accountForScrollbars,i=n===void 0?!0:n,a=b.useRef({}),s=b.useRef(null),o=b.useCallback(function(c){if(Q4){var d=document.body,f=d&&d.style;if(i&&V4.forEach(function(v){var S=f&&f[v];a.current[v]=S}),i&&Wx<1){var p=parseInt(a.current.paddingRight,10)||0,y=document.body?document.body.clientWidth:0,x=window.innerWidth-y+p||0;Object.keys(H4).forEach(function(v){var S=H4[v];f&&(f[v]=S)}),f&&(f.paddingRight="".concat(x,"px"))}d&&K4()&&(d.addEventListener("touchmove",G4,pm),c&&(c.addEventListener("touchstart",Y4,pm),c.addEventListener("touchmove",W4,pm))),Wx+=1}},[i]),l=b.useCallback(function(c){if(Q4){var d=document.body,f=d&&d.style;Wx=Math.max(Wx-1,0),i&&Wx<1&&V4.forEach(function(p){var y=a.current[p];f&&(f[p]=y)}),d&&K4()&&(d.removeEventListener("touchmove",G4,pm),c&&(c.removeEventListener("touchstart",Y4,pm),c.removeEventListener("touchmove",W4,pm)))}},[i]);return b.useEffect(function(){if(e){var c=s.current;return o(c),function(){l(c)}}},[e,o,l]),function(c){s.current=c}}var Kpe=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},Qpe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Xpe(t){var e=t.children,n=t.lockEnabled,i=t.captureEnabled,a=i===void 0?!0:i,s=t.onBottomArrive,o=t.onBottomLeave,l=t.onTopArrive,c=t.onTopLeave,d=Wpe({isEnabled:a,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),f=Ype({isEnabled:n}),p=function(x){d(x),f(x)};return zt(b.Fragment,null,n&&zt("div",{onClick:Kpe,css:Qpe}),e(p))}var Jpe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Zpe=function(e){var n=e.name,i=e.onFocus;return zt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:Jpe,value:"",onChange:function(){}})},eme=Zpe;function bD(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function tme(){return bD(/^iPhone/i)}function QU(){return bD(/^Mac/i)}function nme(){return bD(/^iPad/i)||QU()&&navigator.maxTouchPoints>1}function rme(){return tme()||nme()}function ime(){return QU()||rme()}var ame=function(e){return e.label},sme=function(e){return e.label},ome=function(e){return e.value},lme=function(e){return!!e.isDisabled},cme={clearIndicator:Hfe,container:Mfe,control:Jfe,dropdownIndicator:Ufe,group:npe,groupHeading:ipe,indicatorsContainer:Ffe,indicatorSeparator:Wfe,input:lpe,loadingIndicator:Qfe,loadingMessage:Afe,menu:wfe,menuList:Cfe,menuPortal:Ofe,multiValue:fpe,multiValueLabel:ppe,multiValueRemove:mpe,noOptionsMessage:kfe,option:jpe,placeholder:Npe,singleValue:Tpe,valueContainer:Rfe},ume={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},dme=4,XU=4,hme=38,fme=XU*2,pme={baseUnit:XU,controlHeight:hme,menuGutter:fme},AC={borderRadius:dme,colors:ume,spacing:pme},mme={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:$4(),captureMenuScroll:!$4(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Upe(),formatGroupLabel:ame,getOptionLabel:sme,getOptionValue:ome,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:lme,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!hfe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function X4(t,e,n,i){var a=e9(t,e,n),s=t9(t,e,n),o=ZU(t,e),l=Tw(t,e);return{type:"option",data:e,isDisabled:a,isSelected:s,label:o,value:l,index:i}}function rw(t,e){return t.options.map(function(n,i){if("options"in n){var a=n.options.map(function(o,l){return X4(t,o,e,l)}).filter(function(o){return Z4(t,o)});return a.length>0?{type:"group",data:n,options:a,index:i}:void 0}var s=X4(t,n,e,i);return Z4(t,s)?s:void 0}).filter(mfe)}function JU(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,uD(n.options.map(function(i){return i.data}))):e.push(n.data),e},[])}function J4(t,e){return t.reduce(function(n,i){return i.type==="group"?n.push.apply(n,uD(i.options.map(function(a){return{data:a.data,id:"".concat(e,"-").concat(i.index,"-").concat(a.index)}}))):n.push({data:i.data,id:"".concat(e,"-").concat(i.index)}),n},[])}function gme(t,e){return JU(rw(t,e))}function Z4(t,e){var n=t.inputValue,i=n===void 0?"":n,a=e.data,s=e.isSelected,o=e.label,l=e.value;return(!r9(t)||!s)&&n9(t,{label:o,value:l,data:a},i)}function yme(t,e){var n=t.focusedValue,i=t.selectValue,a=i.indexOf(n);if(a>-1){var s=e.indexOf(n);if(s>-1)return n;if(a<e.length)return e[a]}return null}function xme(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var EC=function(e,n){var i,a=(i=e.find(function(s){return s.data===n}))===null||i===void 0?void 0:i.id;return a||null},ZU=function(e,n){return e.getOptionLabel(n)},Tw=function(e,n){return e.getOptionValue(n)};function e9(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function t9(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var i=Tw(t,e);return n.some(function(a){return Tw(t,a)===i})}function n9(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var r9=function(e){var n=e.hideSelectedOptions,i=e.isMulti;return n===void 0?i:n},vme=1,i9=function(t){$de(n,t);var e=qde(n);function n(i){var a;if(Lde(this,n),a=e.call(this,i),a.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.controlRef=null,a.getControlRef=function(c){a.controlRef=c},a.focusedOptionRef=null,a.getFocusedOptionRef=function(c){a.focusedOptionRef=c},a.menuListRef=null,a.getMenuListRef=function(c){a.menuListRef=c},a.inputRef=null,a.getInputRef=function(c){a.inputRef=c},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(c,d){var f=a.props,p=f.onChange,y=f.name;d.name=y,a.ariaOnChange(c,d),p(c,d)},a.setValue=function(c,d,f){var p=a.props,y=p.closeMenuOnSelect,x=p.isMulti,v=p.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:v}),y&&(a.setState({inputIsHiddenAfterUpdate:!x}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(c,{action:d,option:f})},a.selectOption=function(c){var d=a.props,f=d.blurInputOnSelect,p=d.isMulti,y=d.name,x=a.state.selectValue,v=p&&a.isOptionSelected(c,x),S=a.isOptionDisabled(c,x);if(v){var N=a.getOptionValue(c);a.setValue(x.filter(function(_){return a.getOptionValue(_)!==N}),"deselect-option",c)}else if(!S)p?a.setValue([].concat(uD(x),[c]),"select-option",c):a.setValue(c,"select-option");else{a.ariaOnChange(c,{action:"select-option",option:c,name:y});return}f&&a.blurInput()},a.removeValue=function(c){var d=a.props.isMulti,f=a.state.selectValue,p=a.getOptionValue(c),y=f.filter(function(v){return a.getOptionValue(v)!==p}),x=_j(d,y,y[0]||null);a.onChange(x,{action:"remove-value",removedValue:c}),a.focusInput()},a.clearValue=function(){var c=a.state.selectValue;a.onChange(_j(a.props.isMulti,[],null),{action:"clear",removedValues:c})},a.popValue=function(){var c=a.props.isMulti,d=a.state.selectValue,f=d[d.length-1],p=d.slice(0,d.length-1),y=_j(c,p,p[0]||null);f&&a.onChange(y,{action:"pop-value",removedValue:f})},a.getFocusedOptionId=function(c){return EC(a.state.focusableOptionsWithIds,c)},a.getFocusableOptionsWithIds=function(){return J4(rw(a.props,a.state.selectValue),a.getElementId("option"))},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return ofe.apply(void 0,[a.props.classNamePrefix].concat(d))},a.getOptionLabel=function(c){return ZU(a.props,c)},a.getOptionValue=function(c){return Tw(a.props,c)},a.getStyles=function(c,d){var f=a.props.unstyled,p=cme[c](d,f);p.boxSizing="border-box";var y=a.props.styles[c];return y?y(p,d):p},a.getClassNames=function(c,d){var f,p;return(f=(p=a.props.classNames)[c])===null||f===void 0?void 0:f.call(p,d)},a.getElementId=function(c){return"".concat(a.state.instancePrefix,"-").concat(c)},a.getComponents=function(){return Ppe(a.props)},a.buildCategorizedOptions=function(){return rw(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return JU(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(c,d){a.setState({ariaSelection:Yt({value:c},d)})},a.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(c){a.blockOptionHover=!1},a.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&a.onMenuClose():d&&a.openMenu("first"):(d&&(a.openAfterFocus=!0),a.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},a.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!a.props.isDisabled){var d=a.props,f=d.isMulti,p=d.menuIsOpen;a.focusInput(),p?(a.setState({inputIsHiddenAfterUpdate:!f}),a.onMenuClose()):a.openMenu("first"),c.preventDefault()}},a.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(a.clearValue(),c.preventDefault(),a.openAfterFocus=!1,c.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(c){typeof a.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&JS(c.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(c)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(c){var d=c.touches,f=d&&d.item(0);f&&(a.initialTouchX=f.clientX,a.initialTouchY=f.clientY,a.userIsDragging=!1)},a.onTouchMove=function(c){var d=c.touches,f=d&&d.item(0);if(f){var p=Math.abs(f.clientX-a.initialTouchX),y=Math.abs(f.clientY-a.initialTouchY),x=5;a.userIsDragging=p>x||y>x}},a.onTouchEnd=function(c){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(c.target)&&a.menuListRef&&!a.menuListRef.contains(c.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(c){a.userIsDragging||a.onControlMouseDown(c)},a.onClearIndicatorTouchEnd=function(c){a.userIsDragging||a.onClearIndicatorMouseDown(c)},a.onDropdownIndicatorTouchEnd=function(c){a.userIsDragging||a.onDropdownIndicatorMouseDown(c)},a.handleInputChange=function(c){var d=a.props.inputValue,f=c.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(f,{action:"input-change",prevInputValue:d}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(c){a.props.onFocus&&a.props.onFocus(c),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(c){var d=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(c),a.onInputChange("",{action:"input-blur",prevInputValue:d}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(c){if(!(a.blockOptionHover||a.state.focusedOption===c)){var d=a.getFocusableOptions(),f=d.indexOf(c);a.setState({focusedOption:c,focusedOptionId:f>-1?a.getFocusedOptionId(c):null})}},a.shouldHideSelectedOptions=function(){return r9(a.props)},a.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),a.focus()},a.onKeyDown=function(c){var d=a.props,f=d.isMulti,p=d.backspaceRemovesValue,y=d.escapeClearsValue,x=d.inputValue,v=d.isClearable,S=d.isDisabled,N=d.menuIsOpen,_=d.onKeyDown,T=d.tabSelectsValue,C=d.openMenuOnFocus,O=a.state,k=O.focusedOption,P=O.focusedValue,I=O.selectValue;if(!S&&!(typeof _=="function"&&(_(c),c.defaultPrevented))){switch(a.blockOptionHover=!0,c.key){case"ArrowLeft":if(!f||x)return;a.focusValue("previous");break;case"ArrowRight":if(!f||x)return;a.focusValue("next");break;case"Delete":case"Backspace":if(x)return;if(P)a.removeValue(P);else{if(!p)return;f?a.popValue():v&&a.clearValue()}break;case"Tab":if(a.isComposing||c.shiftKey||!N||!T||!k||C&&a.isOptionSelected(k,I))return;a.selectOption(k);break;case"Enter":if(c.keyCode===229)break;if(N){if(!k||a.isComposing)return;a.selectOption(k);break}return;case"Escape":N?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:x}),a.onMenuClose()):v&&y&&a.clearValue();break;case" ":if(x)return;if(!N){a.openMenu("first");break}if(!k)return;a.selectOption(k);break;case"ArrowUp":N?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":N?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!N)return;a.focusOption("pageup");break;case"PageDown":if(!N)return;a.focusOption("pagedown");break;case"Home":if(!N)return;a.focusOption("first");break;case"End":if(!N)return;a.focusOption("last");break;default:return}c.preventDefault()}},a.state.instancePrefix="react-select-"+(a.props.instanceId||++vme),a.state.selectValue=L4(i.value),i.menuIsOpen&&a.state.selectValue.length){var s=a.getFocusableOptionsWithIds(),o=a.buildFocusableOptions(),l=o.indexOf(a.state.selectValue[0]);a.state.focusableOptionsWithIds=s,a.state.focusedOption=o[l],a.state.focusedOptionId=EC(s,o[l])}return a}return Fde(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&F4(this.menuListRef,this.focusedOptionRef),ime()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,c=this.state.isFocused;(c&&!o&&a.isDisabled||c&&l&&!a.menuIsOpen)&&this.focusInput(),c&&o&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(F4(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,s){this.props.onInputChange(a,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var s=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),f=a==="first"?0:d.length-1;if(!this.props.isMulti){var p=d.indexOf(l[0]);p>-1&&(f=p)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[f],focusedOptionId:this.getFocusedOptionId(d[f])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(a){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,f=-1;if(o.length){switch(a){case"previous":c===0?f=0:c===-1?f=d:f=c-1;break;case"next":c>-1&&c<d&&(f=c+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:o[f]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),a==="up"?c=d>0?d-1:l.length-1:a==="down"?c=(d+1)%l.length:a==="pageup"?(c=d-s,c<0&&(c=0)):a==="pagedown"?(c=d+s,c>l.length-1&&(c=l.length-1)):a==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(AC):Yt(Yt({},AC),this.props.theme):AC}},{key:"getCommonProps",value:function(){var a=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,f=this.setValue,p=this.props,y=p.isMulti,x=p.isRtl,v=p.options,S=this.hasValue();return{clearValue:a,cx:s,getStyles:o,getClassNames:l,getValue:c,hasValue:S,isMulti:y,isRtl:x,options:v,selectOption:d,selectProps:p,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,s=a.isClearable,o=a.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(a,s){return e9(this.props,a,s)}},{key:"isOptionSelected",value:function(a,s){return t9(this.props,a,s)}},{key:"filterOption",value:function(a,s){return n9(this.props,a,s)}},{key:"formatOptionLabel",value:function(a,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(a,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var a=this.props,s=a.isDisabled,o=a.isSearchable,l=a.inputId,c=a.inputValue,d=a.tabIndex,f=a.form,p=a.menuIsOpen,y=a.required,x=this.getComponents(),v=x.Input,S=this.state,N=S.inputIsHidden,_=S.ariaSelection,T=this.commonProps,C=l||this.getElementId("input"),O=Yt(Yt(Yt({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":y,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?b.createElement(v,Zt({},T,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:s,isHidden:N,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:f,type:"text",value:c},O)):b.createElement(Hpe,Zt({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:_w,onFocus:this.onInputFocus,disabled:s,tabIndex:d,inputMode:"none",form:f,value:""},O))}},{key:"renderPlaceholderOrValue",value:function(){var a=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,c=s.MultiValueLabel,d=s.MultiValueRemove,f=s.SingleValue,p=s.Placeholder,y=this.commonProps,x=this.props,v=x.controlShouldRenderValue,S=x.isDisabled,N=x.isMulti,_=x.inputValue,T=x.placeholder,C=this.state,O=C.selectValue,k=C.focusedValue,P=C.isFocused;if(!this.hasValue()||!v)return _?null:b.createElement(p,Zt({},y,{key:"placeholder",isDisabled:S,isFocused:P,innerProps:{id:this.getElementId("placeholder")}}),T);if(N)return O.map(function(F,B){var $=F===k,L="".concat(a.getOptionLabel(F),"-").concat(a.getOptionValue(F));return b.createElement(o,Zt({},y,{components:{Container:l,Label:c,Remove:d},isFocused:$,isDisabled:S,key:L,index:B,removeProps:{onClick:function(){return a.removeValue(F)},onTouchEnd:function(){return a.removeValue(F)},onMouseDown:function(H){H.preventDefault()}},data:F}),a.formatOptionLabel(F,"value"))});if(_)return null;var I=O[0];return b.createElement(f,Zt({},y,{data:I,isDisabled:S}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),s=a.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||d)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(s,Zt({},o,{innerProps:p,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),s=a.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,f=this.state.isFocused;if(!s||!d)return null;var p={"aria-hidden":"true"};return b.createElement(s,Zt({},o,{innerProps:p,isDisabled:c,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),s=a.DropdownIndicator,o=a.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return b.createElement(o,Zt({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),s=a.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(s,Zt({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var a=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,c=s.Menu,d=s.MenuList,f=s.MenuPortal,p=s.LoadingMessage,y=s.NoOptionsMessage,x=s.Option,v=this.commonProps,S=this.state.focusedOption,N=this.props,_=N.captureMenuScroll,T=N.inputValue,C=N.isLoading,O=N.loadingMessage,k=N.minMenuHeight,P=N.maxMenuHeight,I=N.menuIsOpen,F=N.menuPlacement,B=N.menuPosition,$=N.menuPortalTarget,L=N.menuShouldBlockScroll,V=N.menuShouldScrollIntoView,H=N.noOptionsMessage,te=N.onMenuScrollToTop,X=N.onMenuScrollToBottom;if(!I)return null;var q=function(K,Oe){var Ye=K.type,Me=K.data,Ie=K.isDisabled,be=K.isSelected,re=K.label,ve=K.value,ce=S===Me,fe=Ie?void 0:function(){return a.onOptionHover(Me)},se=Ie?void 0:function(){return a.selectOption(Me)},Q="".concat(a.getElementId("option"),"-").concat(Oe),ie={id:Q,onClick:se,onMouseMove:fe,onMouseOver:fe,tabIndex:-1,role:"option","aria-selected":a.state.isAppleDevice?void 0:be};return b.createElement(x,Zt({},v,{innerProps:ie,data:Me,isDisabled:Ie,isSelected:be,key:Q,label:re,type:Ye,value:ve,isFocused:ce,innerRef:ce?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(K.data,"menu"))},W;if(this.hasOptions())W=this.getCategorizedOptions().map(function(je){if(je.type==="group"){var K=je.data,Oe=je.options,Ye=je.index,Me="".concat(a.getElementId("group"),"-").concat(Ye),Ie="".concat(Me,"-heading");return b.createElement(o,Zt({},v,{key:Me,data:K,options:Oe,Heading:l,headingProps:{id:Ie,data:je.data},label:a.formatGroupLabel(je.data)}),je.options.map(function(be){return q(be,"".concat(Ye,"-").concat(be.index))}))}else if(je.type==="option")return q(je,"".concat(je.index))});else if(C){var ae=O({inputValue:T});if(ae===null)return null;W=b.createElement(p,v,ae)}else{var G=H({inputValue:T});if(G===null)return null;W=b.createElement(y,v,G)}var z={minMenuHeight:k,maxMenuHeight:P,menuPlacement:F,menuPosition:B,menuShouldScrollIntoView:V},le=b.createElement(Sfe,Zt({},v,z),function(je){var K=je.ref,Oe=je.placerProps,Ye=Oe.placement,Me=Oe.maxHeight;return b.createElement(c,Zt({},v,z,{innerRef:K,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:C,placement:Ye}),b.createElement(Xpe,{captureEnabled:_,onTopArrive:te,onBottomArrive:X,lockEnabled:L},function(Ie){return b.createElement(d,Zt({},v,{innerRef:function(re){a.getMenuListRef(re),Ie(re)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:a.getElementId("listbox")},isLoading:C,maxHeight:Me,focusedOption:S}),W)}))});return $||B==="fixed"?b.createElement(f,Zt({},v,{appendTo:$,controlElement:this.controlRef,menuPlacement:F,menuPosition:B}),le):le}},{key:"renderFormField",value:function(){var a=this,s=this.props,o=s.delimiter,l=s.isDisabled,c=s.isMulti,d=s.name,f=s.required,p=this.state.selectValue;if(f&&!this.hasValue()&&!l)return b.createElement(eme,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var y=p.map(function(S){return a.getOptionValue(S)}).join(o);return b.createElement("input",{name:d,type:"hidden",value:y})}else{var x=p.length>0?p.map(function(S,N){return b.createElement("input",{key:"i-".concat(N),name:d,type:"hidden",value:a.getOptionValue(S)})}):b.createElement("input",{name:d,type:"hidden",value:""});return b.createElement("div",null,x)}else{var v=p[0]?this.getOptionValue(p[0]):"";return b.createElement("input",{name:d,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,c=s.focusedValue,d=s.isFocused,f=s.selectValue,p=this.getFocusableOptions();return b.createElement($pe,Zt({},a,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:f,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var a=this.getComponents(),s=a.Control,o=a.IndicatorsContainer,l=a.SelectContainer,c=a.ValueContainer,d=this.props,f=d.className,p=d.id,y=d.isDisabled,x=d.menuIsOpen,v=this.state.isFocused,S=this.commonProps=this.getCommonProps();return b.createElement(l,Zt({},S,{className:f,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:y,isFocused:v}),this.renderLiveRegion(),b.createElement(s,Zt({},S,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:y,isFocused:v,menuIsOpen:x}),b.createElement(c,Zt({},S,{isDisabled:y}),this.renderPlaceholderOrValue(),this.renderInput()),b.createElement(o,Zt({},S,{isDisabled:y}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,c=s.inputIsHiddenAfterUpdate,d=s.ariaSelection,f=s.isFocused,p=s.prevWasFocused,y=s.instancePrefix,x=a.options,v=a.value,S=a.menuIsOpen,N=a.inputValue,_=a.isMulti,T=L4(v),C={};if(o&&(v!==o.value||x!==o.options||S!==o.menuIsOpen||N!==o.inputValue)){var O=S?gme(a,T):[],k=S?J4(rw(a,T),"".concat(y,"-option")):[],P=l?yme(s,T):null,I=xme(s,O),F=EC(k,I);C={selectValue:T,focusedOption:I,focusedOptionId:F,focusableOptionsWithIds:k,focusedValue:P,clearFocusValueOnUpdate:!1}}var B=c!=null&&a!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},$=d,L=f&&p;return f&&!L&&($={value:_j(_,T,T[0]||null),options:T,action:"initial-input-focus"},L=!p),(d==null?void 0:d.action)==="initial-input-focus"&&($=null),Yt(Yt(Yt({},C),B),{},{prevProps:a,ariaSelection:$,prevWasFocused:L})}}]),n}(b.Component);i9.defaultProps=mme;var bme=b.forwardRef(function(t,e){var n=Rde(t);return b.createElement(i9,Zt({ref:e},n))}),a9=bme;const mm=new Map,s9=(()=>{const t=new Promise(e=>{window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})});return async e=>{try{const n=new Audio;if(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play(),e!=null&&e.id&&mm.has(e.id)){const a=mm.get(e.id);if(a)return a}const i=new AudioContext(e);return e!=null&&e.id&&mm.set(e.id,i),i}catch{if(await t,e!=null&&e.id&&mm.has(e.id)){const a=mm.get(e.id);if(a)return a}const i=new AudioContext(e);return e!=null&&e.id&&mm.set(e.id,i),i}}})();function jme(t){var e=atob(t),n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n.buffer}const wme=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,o9=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,Cj=new Map,KE=(t,e)=>{const n=new Blob([`registerProcessor("${t}", ${e})`],{type:"application/javascript"});return URL.createObjectURL(n)};var PC={exports:{}},e3;function Sme(){return e3||(e3=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function a(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new a(f,p||c,y),v=n?n+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],x]:c._events[v].push(x):(c._events[v]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new i:delete c._events[d]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,v=new Array(x);y<x;y++)v[y]=p[y].fn;return v},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,y,x,v){var S=n?n+d:d;if(!this._events[S])return!1;var N=this._events[S],_=arguments.length,T,C;if(N.fn){switch(N.once&&this.removeListener(d,N.fn,void 0,!0),_){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,f),!0;case 3:return N.fn.call(N.context,f,p),!0;case 4:return N.fn.call(N.context,f,p,y),!0;case 5:return N.fn.call(N.context,f,p,y,x),!0;case 6:return N.fn.call(N.context,f,p,y,x,v),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];N.fn.apply(N.context,T)}else{var O=N.length,k;for(C=0;C<O;C++)switch(N[C].once&&this.removeListener(d,N[C].fn,void 0,!0),_){case 1:N[C].fn.call(N[C].context);break;case 2:N[C].fn.call(N[C].context,f);break;case 3:N[C].fn.call(N[C].context,f,p);break;case 4:N[C].fn.call(N[C].context,f,p,y);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];N[C].fn.apply(N[C].context,T)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,y){var x=n?n+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var v=this._events[x];if(v.fn)v.fn===f&&(!y||v.once)&&(!p||v.context===p)&&o(this,x);else{for(var S=0,N=[],_=v.length;S<_;S++)(v[S].fn!==f||y&&!v[S].once||p&&v[S].context!==p)&&N.push(v[S]);N.length?this._events[x]=N.length===1?N[0]:N:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(PC)),PC.exports}var Nme=Sme();const l9=Bn(Nme);function _me(t){for(var e="",n=new Uint8Array(t),i=n.byteLength,a=0;a<i;a++)e+=String.fromCharCode(n[a]);return window.btoa(e)}class c9 extends l9{constructor(n=16e3){super();gr(this,"stream");gr(this,"audioContext");gr(this,"source");gr(this,"recording",!1);gr(this,"recordingWorklet");gr(this,"vuWorklet");gr(this,"starting",null);this.sampleRate=n}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async n=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await s9({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const i="audio-recorder-worklet",a=KE(i,wme);await this.audioContext.audioWorklet.addModule(a),this.recordingWorklet=new AudioWorkletNode(this.audioContext,i),this.recordingWorklet.port.onmessage=async o=>{const l=o.data.data.int16arrayBuffer;if(l){const c=_me(l);this.emit("data",c)}},this.source.connect(this.recordingWorklet);const s="vu-meter";await this.audioContext.audioWorklet.addModule(KE(s,o9)),this.vuWorklet=new AudioWorkletNode(this.audioContext,s),this.vuWorklet.port.onmessage=o=>{this.emit("volume",o.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,n(),this.starting=null})}stop(){const n=()=>{var i,a;(i=this.source)==null||i.disconnect(),(a=this.stream)==null||a.getTracks().forEach(s=>s.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(n);return}n()}}const Cme=3,Tme=({active:t,volume:e,hover:n})=>{const i=b.useRef([]);return b.useEffect(()=>{let a=null;const s=()=>{i.current.forEach((o,l)=>{o&&(o.style.height=`${Math.min(24,4+e*(l===1?400:60))}px`)}),a=window.setTimeout(s,100)};return s(),()=>clearTimeout(a)},[e]),r.jsx("div",{className:nd("audioPulse",{active:t,hover:n}),children:Array(Cme).fill(null).map((a,s)=>r.jsx("div",{ref:o=>{i.current[s]=o},style:{animationDelay:`${s*133}ms`}},s))})};var dv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var kme=dv.exports,t3;function Ame(){return t3||(t3=1,function(t,e){(function(){var n,i="4.17.21",a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,f="__lodash_placeholder__",p=1,y=2,x=4,v=1,S=2,N=1,_=2,T=4,C=8,O=16,k=32,P=64,I=128,F=256,B=512,$=30,L="...",V=800,H=16,te=1,X=2,q=3,W=1/0,ae=9007199254740991,G=17976931348623157e292,z=NaN,le=4294967295,je=le-1,K=le>>>1,Oe=[["ary",I],["bind",N],["bindKey",_],["curry",C],["curryRight",O],["flip",B],["partial",k],["partialRight",P],["rearg",F]],Ye="[object Arguments]",Me="[object Array]",Ie="[object AsyncFunction]",be="[object Boolean]",re="[object Date]",ve="[object DOMException]",ce="[object Error]",fe="[object Function]",se="[object GeneratorFunction]",Q="[object Map]",ie="[object Number]",ge="[object Null]",ee="[object Object]",we="[object Promise]",Ue="[object Proxy]",Ge="[object RegExp]",Le="[object Set]",oe="[object String]",_e="[object Symbol]",$e="[object Undefined]",ze="[object WeakMap]",Y="[object WeakSet]",ye="[object ArrayBuffer]",pe="[object DataView]",me="[object Float32Array]",Ne="[object Float64Array]",Be="[object Int8Array]",Ee="[object Int16Array]",Ke="[object Int32Array]",rt="[object Uint8Array]",mt="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Je="[object Uint32Array]",et=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vt=/&(?:amp|lt|gt|quot|#39);/g,Ce=/[&<>"']/g,lt=RegExp(vt.source),Tt=RegExp(Ce.source),qe=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,Ct=/<%=([\s\S]+?)%>/g,Kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,br=/^\w*$/,zn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_n=/[\\^$.*+?()[\]{}|]/g,wn=RegExp(_n.source),oi=/^\s+/,qn=/\s/,qi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ll=/\{\n\/\* \[wrapped with (.+)\] \*/,Fo=/,? & /,Fl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nd=/[()=,{}\[\]\/\s]/,$o=/\\(\\)?/g,it=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,St=/\w*$/,Nt=/^[-+]0x[0-9a-f]+$/i,It=/^0b[01]+$/i,vn=/^\[object .+?Constructor\]$/,On=/^0o[0-7]+$/i,yi=/^(?:0|[1-9]\d*)$/,ha=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,no=/($^)/,_d=/['\n\r\u2028\u2029\\]/g,Cd="\\ud800-\\udfff",FN="\\u0300-\\u036f",Rf="\\ufe20-\\ufe2f",Lf="\\u20d0-\\u20ff",Es=FN+Rf+Lf,Ff="\\u2700-\\u27bf",Wg="a-z\\xdf-\\xf6\\xf8-\\xff",Wc="\\xac\\xb1\\xd7\\xf7",Yg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Kg="\\u2000-\\u206f",$N=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qg="A-Z\\xc0-\\xd6\\xd8-\\xde",fa="\\ufe0e\\ufe0f",Xg=Wc+Yg+Kg+$N,Jg="[']",$f="["+Cd+"]",Zg="["+Xg+"]",$l="["+Es+"]",Gb="\\d+",La="["+Ff+"]",Bf="["+Wg+"]",ey="[^"+Cd+Xg+Gb+Ff+Wg+Qg+"]",Td="\\ud83c[\\udffb-\\udfff]",Yc="(?:"+$l+"|"+Td+")",ty="[^"+Cd+"]",zf="(?:\\ud83c[\\udde6-\\uddff]){2}",Bo="[\\ud800-\\udbff][\\udc00-\\udfff]",Kc="["+Qg+"]",ny="\\u200d",ry="(?:"+Bf+"|"+ey+")",iy="(?:"+Kc+"|"+ey+")",Wb="(?:"+Jg+"(?:d|ll|m|re|s|t|ve))?",Yb="(?:"+Jg+"(?:D|LL|M|RE|S|T|VE))?",kd=Yc+"?",qf="["+fa+"]?",ay="(?:"+ny+"(?:"+[ty,zf,Bo].join("|")+")"+qf+kd+")*",Qc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sy=qf+kd+ay,oy="(?:"+[La,zf,Bo].join("|")+")"+sy,Kb="(?:"+[ty+$l+"?",$l,zf,Bo,$f].join("|")+")",Ad=RegExp(Jg,"g"),ro=RegExp($l,"g"),Ed=RegExp(Td+"(?="+Td+")|"+Kb+sy,"g"),Pd=RegExp([Kc+"?"+Bf+"+"+Wb+"(?="+[Zg,Kc,"$"].join("|")+")",iy+"+"+Yb+"(?="+[Zg,Kc+ry,"$"].join("|")+")",Kc+"?"+ry+"+"+Wb,Kc+"+"+Yb,Xc,Qc,Gb,oy].join("|"),"g"),zo=RegExp("["+ny+Cd+Es+fa+"]"),ly=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Uf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qb=-1,nr={};nr[me]=nr[Ne]=nr[Be]=nr[Ee]=nr[Ke]=nr[rt]=nr[mt]=nr[Pe]=nr[Je]=!0,nr[Ye]=nr[Me]=nr[ye]=nr[be]=nr[pe]=nr[re]=nr[ce]=nr[fe]=nr[Q]=nr[ie]=nr[ee]=nr[Ge]=nr[Le]=nr[oe]=nr[ze]=!1;var Qn={};Qn[Ye]=Qn[Me]=Qn[ye]=Qn[pe]=Qn[be]=Qn[re]=Qn[me]=Qn[Ne]=Qn[Be]=Qn[Ee]=Qn[Ke]=Qn[Q]=Qn[ie]=Qn[ee]=Qn[Ge]=Qn[Le]=Qn[oe]=Qn[_e]=Qn[rt]=Qn[mt]=Qn[Pe]=Qn[Je]=!0,Qn[ce]=Qn[fe]=Qn[ze]=!1;var Xb={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ui={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Vf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Od=parseFloat,BN=parseInt,Hf=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks,cy=typeof self=="object"&&self&&self.Object===Object&&self,Hr=Hf||cy||Function("return this")(),Jc=e&&!e.nodeType&&e,qo=Jc&&!0&&t&&!t.nodeType&&t,Jb=qo&&qo.exports===Jc,uy=Jb&&Hf.process,Fa=function(){try{var Ve=qo&&qo.require&&qo.require("util").types;return Ve||uy&&uy.binding&&uy.binding("util")}catch{}}(),Gf=Fa&&Fa.isArrayBuffer,Zb=Fa&&Fa.isDate,e0=Fa&&Fa.isMap,t0=Fa&&Fa.isRegExp,n0=Fa&&Fa.isSet,r0=Fa&&Fa.isTypedArray;function Vi(Ve,at,nt){switch(nt.length){case 0:return Ve.call(at);case 1:return Ve.call(at,nt[0]);case 2:return Ve.call(at,nt[0],nt[1]);case 3:return Ve.call(at,nt[0],nt[1],nt[2])}return Ve.apply(at,nt)}function zN(Ve,at,nt,kt){for(var Kt=-1,Mn=Ve==null?0:Ve.length;++Kt<Mn;){var Gr=Ve[Kt];at(kt,Gr,nt(Gr),Ve)}return kt}function $a(Ve,at){for(var nt=-1,kt=Ve==null?0:Ve.length;++nt<kt&&at(Ve[nt],nt,Ve)!==!1;);return Ve}function qN(Ve,at){for(var nt=Ve==null?0:Ve.length;nt--&&at(Ve[nt],nt,Ve)!==!1;);return Ve}function i0(Ve,at){for(var nt=-1,kt=Ve==null?0:Ve.length;++nt<kt;)if(!at(Ve[nt],nt,Ve))return!1;return!0}function Ps(Ve,at){for(var nt=-1,kt=Ve==null?0:Ve.length,Kt=0,Mn=[];++nt<kt;){var Gr=Ve[nt];at(Gr,nt,Ve)&&(Mn[Kt++]=Gr)}return Mn}function Wf(Ve,at){var nt=Ve==null?0:Ve.length;return!!nt&&Zc(Ve,at,0)>-1}function dy(Ve,at,nt){for(var kt=-1,Kt=Ve==null?0:Ve.length;++kt<Kt;)if(nt(at,Ve[kt]))return!0;return!1}function Cr(Ve,at){for(var nt=-1,kt=Ve==null?0:Ve.length,Kt=Array(kt);++nt<kt;)Kt[nt]=at(Ve[nt],nt,Ve);return Kt}function io(Ve,at){for(var nt=-1,kt=at.length,Kt=Ve.length;++nt<kt;)Ve[Kt+nt]=at[nt];return Ve}function hy(Ve,at,nt,kt){var Kt=-1,Mn=Ve==null?0:Ve.length;for(kt&&Mn&&(nt=Ve[++Kt]);++Kt<Mn;)nt=at(nt,Ve[Kt],Kt,Ve);return nt}function UN(Ve,at,nt,kt){var Kt=Ve==null?0:Ve.length;for(kt&&Kt&&(nt=Ve[--Kt]);Kt--;)nt=at(nt,Ve[Kt],Kt,Ve);return nt}function fy(Ve,at){for(var nt=-1,kt=Ve==null?0:Ve.length;++nt<kt;)if(at(Ve[nt],nt,Ve))return!0;return!1}var VN=Kf("length");function HN(Ve){return Ve.split("")}function GN(Ve){return Ve.match(Fl)||[]}function a0(Ve,at,nt){var kt;return nt(Ve,function(Kt,Mn,Gr){if(at(Kt,Mn,Gr))return kt=Mn,!1}),kt}function Yf(Ve,at,nt,kt){for(var Kt=Ve.length,Mn=nt+(kt?1:-1);kt?Mn--:++Mn<Kt;)if(at(Ve[Mn],Mn,Ve))return Mn;return-1}function Zc(Ve,at,nt){return at===at?QN(Ve,at,nt):Yf(Ve,eu,nt)}function py(Ve,at,nt,kt){for(var Kt=nt-1,Mn=Ve.length;++Kt<Mn;)if(kt(Ve[Kt],at))return Kt;return-1}function eu(Ve){return Ve!==Ve}function s0(Ve,at){var nt=Ve==null?0:Ve.length;return nt?Xf(Ve,at)/nt:z}function Kf(Ve){return function(at){return at==null?n:at[Ve]}}function Qf(Ve){return function(at){return Ve==null?n:Ve[at]}}function my(Ve,at,nt,kt,Kt){return Kt(Ve,function(Mn,Gr,In){nt=kt?(kt=!1,Mn):at(nt,Mn,Gr,In)}),nt}function o0(Ve,at){var nt=Ve.length;for(Ve.sort(at);nt--;)Ve[nt]=Ve[nt].value;return Ve}function Xf(Ve,at){for(var nt,kt=-1,Kt=Ve.length;++kt<Kt;){var Mn=at(Ve[kt]);Mn!==n&&(nt=nt===n?Mn:nt+Mn)}return nt}function Uo(Ve,at){for(var nt=-1,kt=Array(Ve);++nt<Ve;)kt[nt]=at(nt);return kt}function WN(Ve,at){return Cr(at,function(nt){return[nt,Ve[nt]]})}function l0(Ve){return Ve&&Ve.slice(0,yy(Ve)+1).replace(oi,"")}function pa(Ve){return function(at){return Ve(at)}}function Jf(Ve,at){return Cr(at,function(nt){return Ve[nt]})}function tu(Ve,at){return Ve.has(at)}function nu(Ve,at){for(var nt=-1,kt=Ve.length;++nt<kt&&Zc(at,Ve[nt],0)>-1;);return nt}function ru(Ve,at){for(var nt=Ve.length;nt--&&Zc(at,Ve[nt],0)>-1;);return nt}function YN(Ve,at){for(var nt=Ve.length,kt=0;nt--;)Ve[nt]===at&&++kt;return kt}var Zf=Qf(Xb),c0=Qf(Ui);function u0(Ve){return"\\"+Vf[Ve]}function gy(Ve,at){return Ve==null?n:Ve[at]}function Vo(Ve){return zo.test(Ve)}function d0(Ve){return ly.test(Ve)}function h0(Ve){for(var at,nt=[];!(at=Ve.next()).done;)nt.push(at.value);return nt}function ep(Ve){var at=-1,nt=Array(Ve.size);return Ve.forEach(function(kt,Kt){nt[++at]=[Kt,kt]}),nt}function f0(Ve,at){return function(nt){return Ve(at(nt))}}function Ho(Ve,at){for(var nt=-1,kt=Ve.length,Kt=0,Mn=[];++nt<kt;){var Gr=Ve[nt];(Gr===at||Gr===f)&&(Ve[nt]=f,Mn[Kt++]=nt)}return Mn}function tp(Ve){var at=-1,nt=Array(Ve.size);return Ve.forEach(function(kt){nt[++at]=kt}),nt}function KN(Ve){var at=-1,nt=Array(Ve.size);return Ve.forEach(function(kt){nt[++at]=[kt,kt]}),nt}function QN(Ve,at,nt){for(var kt=nt-1,Kt=Ve.length;++kt<Kt;)if(Ve[kt]===at)return kt;return-1}function ma(Ve,at,nt){for(var kt=nt+1;kt--;)if(Ve[kt]===at)return kt;return kt}function Os(Ve){return Vo(Ve)?m0(Ve):VN(Ve)}function Ba(Ve){return Vo(Ve)?xy(Ve):HN(Ve)}function yy(Ve){for(var at=Ve.length;at--&&qn.test(Ve.charAt(at)););return at}var p0=Qf(Bl);function m0(Ve){for(var at=Ed.lastIndex=0;Ed.test(Ve);)++at;return at}function xy(Ve){return Ve.match(Ed)||[]}function XN(Ve){return Ve.match(Pd)||[]}var iu=function Ve(at){at=at==null?Hr:Go.defaults(Hr.Object(),at,Go.pick(Hr,Uf));var nt=at.Array,kt=at.Date,Kt=at.Error,Mn=at.Function,Gr=at.Math,In=at.Object,np=at.RegExp,g0=at.String,ga=at.TypeError,rp=nt.prototype,JN=Mn.prototype,au=In.prototype,Dd=at["__core-js_shared__"],Md=JN.toString,Un=au.hasOwnProperty,ls=0,vy=function(){var g=/[^.]+$/.exec(Dd&&Dd.keys&&Dd.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Mi=au.toString,za=Md.call(In),su=Hr._,by=np("^"+Md.call(Un).replace(_n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zl=Jb?at.Buffer:n,cs=at.Symbol,ou=at.Uint8Array,ql=zl?zl.allocUnsafe:n,Id=f0(In.getPrototypeOf,In),Rd=In.create,Ul=au.propertyIsEnumerable,ip=rp.splice,Hi=cs?cs.isConcatSpreadable:n,Vl=cs?cs.iterator:n,Ii=cs?cs.toStringTag:n,Ld=function(){try{var g=tl(In,"defineProperty");return g({},"",{}),g}catch{}}(),ap=at.clearTimeout!==Hr.clearTimeout&&at.clearTimeout,Hl=kt&&kt.now!==Hr.Date.now&&kt.now,jy=at.setTimeout!==Hr.setTimeout&&at.setTimeout,lu=Gr.ceil,ao=Gr.floor,Wo=In.getOwnPropertySymbols,sp=zl?zl.isBuffer:n,Fd=at.isFinite,qa=rp.join,Ua=f0(In.keys,In),jr=Gr.max,Tr=Gr.min,so=kt.now,Gl=at.parseInt,wy=Gr.random,Sy=rp.reverse,$d=tl(at,"DataView"),Zr=tl(at,"Map"),kr=tl(at,"Promise"),Sn=tl(at,"Set"),us=tl(at,"WeakMap"),Gi=tl(In,"create"),cu=us&&new us,Va={},y0=go($d),x0=go(Zr),Bd=go(kr),zd=go(Sn),v0=go(us),Yo=cs?cs.prototype:n,Wl=Yo?Yo.valueOf:n,Ko=Yo?Yo.toString:n;function de(g){if(Ir(g)&&!tn(g)&&!(g instanceof mn)){if(g instanceof Wi)return g;if(Un.call(g,"__wrapped__"))return ti(g)}return new Wi(g)}var ya=function(){function g(){}return function(j){if(!Er(j))return{};if(Rd)return Rd(j);g.prototype=j;var M=new g;return g.prototype=n,M}}();function Ha(){}function Wi(g,j){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!j,this.__index__=0,this.__values__=n}de.templateSettings={escape:qe,evaluate:jt,interpolate:Ct,variable:"",imports:{_:de}},de.prototype=Ha.prototype,de.prototype.constructor=de,Wi.prototype=ya(Ha.prototype),Wi.prototype.constructor=Wi;function mn(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=le,this.__views__=[]}function qd(){var g=new mn(this.__wrapped__);return g.__actions__=ei(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=ei(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=ei(this.__views__),g}function op(){if(this.__filtered__){var g=new mn(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function Yl(){var g=this.__wrapped__.value(),j=this.__dir__,M=tn(g),U=j<0,ne=M?g.length:0,xe=J0(0,ne,this.__views__),Te=xe.start,Re=xe.end,We=Re-Te,ht=U?Re:Te-1,pt=this.__iteratees__,gt=pt.length,At=0,Rt=Tr(We,this.__takeCount__);if(!M||!U&&ne==We&&Rt==We)return F0(g,this.__actions__);var Qt=[];e:for(;We--&&At<Rt;){ht+=j;for(var yn=-1,Xt=g[ht];++yn<gt;){var Tn=pt[yn],Ln=Tn.iteratee,ys=Tn.type,Na=Ln(Xt);if(ys==X)Xt=Na;else if(!Na){if(ys==te)continue e;break e}}Qt[At++]=Xt}return Qt}mn.prototype=ya(Ha.prototype),mn.prototype.constructor=mn;function Lr(g){var j=-1,M=g==null?0:g.length;for(this.clear();++j<M;){var U=g[j];this.set(U[0],U[1])}}function lp(){this.__data__=Gi?Gi(null):{},this.size=0}function b0(g){var j=this.has(g)&&delete this.__data__[g];return this.size-=j?1:0,j}function ZN(g){var j=this.__data__;if(Gi){var M=j[g];return M===c?n:M}return Un.call(j,g)?j[g]:n}function e_(g){var j=this.__data__;return Gi?j[g]!==n:Un.call(j,g)}function t_(g,j){var M=this.__data__;return this.size+=this.has(g)?0:1,M[g]=Gi&&j===n?c:j,this}Lr.prototype.clear=lp,Lr.prototype.delete=b0,Lr.prototype.get=ZN,Lr.prototype.has=e_,Lr.prototype.set=t_;function dr(g){var j=-1,M=g==null?0:g.length;for(this.clear();++j<M;){var U=g[j];this.set(U[0],U[1])}}function Ny(){this.__data__=[],this.size=0}function Ud(g){var j=this.__data__,M=hu(j,g);if(M<0)return!1;var U=j.length-1;return M==U?j.pop():ip.call(j,M,1),--this.size,!0}function Vd(g){var j=this.__data__,M=hu(j,g);return M<0?n:j[M][1]}function _y(g){return hu(this.__data__,g)>-1}function uu(g,j){var M=this.__data__,U=hu(M,g);return U<0?(++this.size,M.push([g,j])):M[U][1]=j,this}dr.prototype.clear=Ny,dr.prototype.delete=Ud,dr.prototype.get=Vd,dr.prototype.has=_y,dr.prototype.set=uu;function Yi(g){var j=-1,M=g==null?0:g.length;for(this.clear();++j<M;){var U=g[j];this.set(U[0],U[1])}}function n_(){this.size=0,this.__data__={hash:new Lr,map:new(Zr||dr),string:new Lr}}function j0(g){var j=xu(this,g).delete(g);return this.size-=j?1:0,j}function r_(g){return xu(this,g).get(g)}function w0(g){return xu(this,g).has(g)}function Kl(g,j){var M=xu(this,g),U=M.size;return M.set(g,j),this.size+=M.size==U?0:1,this}Yi.prototype.clear=n_,Yi.prototype.delete=j0,Yi.prototype.get=r_,Yi.prototype.has=w0,Yi.prototype.set=Kl;function oo(g){var j=-1,M=g==null?0:g.length;for(this.__data__=new Yi;++j<M;)this.add(g[j])}function cp(g){return this.__data__.set(g,c),this}function S0(g){return this.__data__.has(g)}oo.prototype.add=oo.prototype.push=cp,oo.prototype.has=S0;function Ri(g){var j=this.__data__=new dr(g);this.size=j.size}function N0(){this.__data__=new dr,this.size=0}function up(g){var j=this.__data__,M=j.delete(g);return this.size=j.size,M}function Cy(g){return this.__data__.get(g)}function _0(g){return this.__data__.has(g)}function dp(g,j){var M=this.__data__;if(M instanceof dr){var U=M.__data__;if(!Zr||U.length<a-1)return U.push([g,j]),this.size=++M.size,this;M=this.__data__=new Yi(U)}return M.set(g,j),this.size=M.size,this}Ri.prototype.clear=N0,Ri.prototype.delete=up,Ri.prototype.get=Cy,Ri.prototype.has=_0,Ri.prototype.set=dp;function Ty(g,j){var M=tn(g),U=!M&&bo(g),ne=!M&&!U&&dl(g),xe=!M&&!U&&!ne&&Ou(g),Te=M||U||ne||xe,Re=Te?Uo(g.length,g0):[],We=Re.length;for(var ht in g)(j||Un.call(g,ht))&&!(Te&&(ht=="length"||ne&&(ht=="offset"||ht=="parent")||xe&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||ps(ht,We)))&&Re.push(ht);return Re}function du(g){var j=g.length;return j?g[jp(0,j-1)]:n}function C0(g,j){return yh(ei(g),hs(j,0,g.length))}function T0(g){return yh(ei(g))}function Ds(g,j,M){(M!==n&&!ta(g[j],M)||M===n&&!(j in g))&&ds(g,j,M)}function Ql(g,j,M){var U=g[j];(!(Un.call(g,j)&&ta(U,M))||M===n&&!(j in g))&&ds(g,j,M)}function hu(g,j){for(var M=g.length;M--;)if(ta(g[M][0],j))return M;return-1}function Qo(g,j,M,U){return co(g,function(ne,xe,Te){j(U,ne,M(ne),Te)}),U}function lo(g,j){return g&&Xi(j,ii(j),g)}function Hd(g,j){return g&&Xi(j,ui(j),g)}function ds(g,j,M){j=="__proto__"&&Ld?Ld(g,j,{configurable:!0,enumerable:!0,value:M,writable:!0}):g[j]=M}function Gd(g,j){for(var M=-1,U=j.length,ne=nt(U),xe=g==null;++M<U;)ne[M]=xe?n:Ph(g,j[M]);return ne}function hs(g,j,M){return g===g&&(M!==n&&(g=g<=M?g:M),j!==n&&(g=g>=j?g:j)),g}function _i(g,j,M,U,ne,xe){var Te,Re=j&p,We=j&y,ht=j&x;if(M&&(Te=ne?M(g,U,ne,xe):M(g)),Te!==n)return Te;if(!Er(g))return g;var pt=tn(g);if(pt){if(Te=Zy(g),!Re)return ei(g,Te)}else{var gt=ci(g),At=gt==fe||gt==se;if(dl(g))return Hy(g,Re);if(gt==ee||gt==Ye||At&&!ne){if(Te=We||At?{}:ex(g),!Re)return We?ah(g,Hd(Te,g)):Tp(g,lo(Te,g))}else{if(!Qn[gt])return ne?g:{};Te=tx(g,gt,Re)}}xe||(xe=new Ri);var Rt=xe.get(g);if(Rt)return Rt;xe.set(g,Te),V1(g)?g.forEach(function(Xt){Te.add(_i(Xt,j,M,Xt,g,xe))}):Jp(g)&&g.forEach(function(Xt,Tn){Te.set(Tn,_i(Xt,j,M,Tn,g,xe))});var Qt=ht?We?Pp:Ep:We?ui:ii,yn=pt?n:Qt(g);return $a(yn||g,function(Xt,Tn){yn&&(Tn=Xt,Xt=g[Tn]),Ql(Te,Tn,_i(Xt,j,M,Tn,g,xe))}),Te}function k0(g){var j=ii(g);return function(M){return ky(M,g,j)}}function ky(g,j,M){var U=M.length;if(g==null)return!U;for(g=In(g);U--;){var ne=M[U],xe=j[ne],Te=g[ne];if(Te===n&&!(ne in g)||!xe(Te))return!1}return!0}function Xl(g,j,M){if(typeof g!="function")throw new ga(o);return bu(function(){g.apply(n,M)},j)}function Xo(g,j,M,U){var ne=-1,xe=Wf,Te=!0,Re=g.length,We=[],ht=j.length;if(!Re)return We;M&&(j=Cr(j,pa(M))),U?(xe=dy,Te=!1):j.length>=a&&(xe=tu,Te=!1,j=new oo(j));e:for(;++ne<Re;){var pt=g[ne],gt=M==null?pt:M(pt);if(pt=U||pt!==0?pt:0,Te&&gt===gt){for(var At=ht;At--;)if(j[At]===gt)continue e;We.push(pt)}else xe(j,gt,U)||We.push(pt)}return We}var co=Ky(Ci),hp=Ky(pu,!0);function Ay(g,j){var M=!0;return co(g,function(U,ne,xe){return M=!!j(U,ne,xe),M}),M}function fs(g,j,M){for(var U=-1,ne=g.length;++U<ne;){var xe=g[U],Te=j(xe);if(Te!=null&&(Re===n?Te===Te&&!$i(Te):M(Te,Re)))var Re=Te,We=xe}return We}function fn(g,j,M,U){var ne=g.length;for(M=on(M),M<0&&(M=-M>ne?0:ne+M),U=U===n||U>ne?ne:on(U),U<0&&(U+=ne),U=M>U?0:qs(U);M<U;)g[M++]=j;return g}function Xn(g,j){var M=[];return co(g,function(U,ne,xe){j(U,ne,xe)&&M.push(U)}),M}function Nn(g,j,M,U,ne){var xe=-1,Te=g.length;for(M||(M=po),ne||(ne=[]);++xe<Te;){var Re=g[xe];j>0&&M(Re)?j>1?Nn(Re,j-1,M,U,ne):io(ne,Re):U||(ne[ne.length]=Re)}return ne}var fu=ic(),Jl=ic(!0);function Ci(g,j){return g&&fu(g,j,ii)}function pu(g,j){return g&&Jl(g,j,ii)}function Jo(g,j){return Ps(j,function(M){return ms(g[M])})}function Ga(g,j){j=ho(j,g);for(var M=0,U=j.length;g!=null&&M<U;)g=g[Gn(j[M++])];return M&&M==U?g:n}function A0(g,j,M){var U=j(g);return tn(g)?U:io(U,M(g))}function Cn(g){return g==null?g===n?$e:ge:Ii&&Ii in In(g)?X0(g):r1(g)}function Wd(g,j){return g>j}function Ey(g,j){return g!=null&&Un.call(g,j)}function E0(g,j){return g!=null&&j in In(g)}function P0(g,j,M){return g>=Tr(j,M)&&g<jr(j,M)}function Py(g,j,M){for(var U=M?dy:Wf,ne=g[0].length,xe=g.length,Te=xe,Re=nt(xe),We=1/0,ht=[];Te--;){var pt=g[Te];Te&&j&&(pt=Cr(pt,pa(j))),We=Tr(pt.length,We),Re[Te]=!M&&(j||ne>=120&&pt.length>=120)?new oo(Te&&pt):n}pt=g[0];var gt=-1,At=Re[0];e:for(;++gt<ne&&ht.length<We;){var Rt=pt[gt],Qt=j?j(Rt):Rt;if(Rt=M||Rt!==0?Rt:0,!(At?tu(At,Qt):U(ht,Qt,M))){for(Te=xe;--Te;){var yn=Re[Te];if(!(yn?tu(yn,Qt):U(g[Te],Qt,M)))continue e}At&&At.push(Qt),ht.push(Rt)}}return ht}function Oy(g,j,M,U){return Ci(g,function(ne,xe,Te){j(U,M(ne),xe,Te)}),U}function Zl(g,j,M){j=ho(j,g),g=vu(g,j);var U=g==null?g:g[Gn(Ti(j))];return U==null?n:Vi(U,g,M)}function fp(g){return Ir(g)&&Cn(g)==Ye}function Ki(g){return Ir(g)&&Cn(g)==ye}function Wr(g){return Ir(g)&&Cn(g)==re}function ec(g,j,M,U,ne){return g===j?!0:g==null||j==null||!Ir(g)&&!Ir(j)?g!==g&&j!==j:Yd(g,j,M,U,ec,ne)}function Yd(g,j,M,U,ne,xe){var Te=tn(g),Re=tn(j),We=Te?Me:ci(g),ht=Re?Me:ci(j);We=We==Ye?ee:We,ht=ht==Ye?ee:ht;var pt=We==ee,gt=ht==ee,At=We==ht;if(At&&dl(g)){if(!dl(j))return!1;Te=!0,pt=!1}if(At&&!pt)return xe||(xe=new Ri),Te||Ou(g)?K0(g,j,M,U,ne,xe):Q0(g,j,We,M,U,ne,xe);if(!(M&v)){var Rt=pt&&Un.call(g,"__wrapped__"),Qt=gt&&Un.call(j,"__wrapped__");if(Rt||Qt){var yn=Rt?g.value():g,Xt=Qt?j.value():j;return xe||(xe=new Ri),ne(yn,Xt,M,U,xe)}}return At?(xe||(xe=new Ri),li(g,j,M,U,ne,xe)):!1}function pp(g){return Ir(g)&&ci(g)==Q}function Kd(g,j,M,U){var ne=M.length,xe=ne,Te=!U;if(g==null)return!xe;for(g=In(g);ne--;){var Re=M[ne];if(Te&&Re[2]?Re[1]!==g[Re[0]]:!(Re[0]in g))return!1}for(;++ne<xe;){Re=M[ne];var We=Re[0],ht=g[We],pt=Re[1];if(Te&&Re[2]){if(ht===n&&!(We in g))return!1}else{var gt=new Ri;if(U)var At=U(ht,pt,We,g,j,gt);if(!(At===n?ec(pt,ht,v|S,U,gt):At))return!1}}return!0}function Ms(g){if(!Er(g)||Lp(g))return!1;var j=ms(g)?by:vn;return j.test(go(g))}function mp(g){return Ir(g)&&Cn(g)==Ge}function Dy(g){return Ir(g)&&ci(g)==Le}function My(g){return Ir(g)&&cc(g.length)&&!!nr[Cn(g)]}function Iy(g){return typeof g=="function"?g:g==null?Ze:typeof g=="object"?tn(g)?xp(g[0],g[1]):Ly(g):Rn(g)}function gp(g){if(!hr(g))return Ua(g);var j=[];for(var M in In(g))Un.call(g,M)&&M!="constructor"&&j.push(M);return j}function O0(g){if(!Er(g))return nl(g);var j=hr(g),M=[];for(var U in g)U=="constructor"&&(j||!Un.call(g,U))||M.push(U);return M}function yp(g,j){return g<j}function Ry(g,j){var M=-1,U=ni(g)?nt(g.length):[];return co(g,function(ne,xe,Te){U[++M]=j(ne,xe,Te)}),U}function Ly(g){var j=Dp(g);return j.length==1&&j[0][2]?t1(j[0][0],j[0][1]):function(M){return M===g||Kd(M,g,j)}}function xp(g,j){return Ip(g)&&e1(j)?t1(Gn(g),j):function(M){var U=Ph(M,g);return U===n&&U===j?Ru(M,g):ec(j,U,v|S)}}function Qd(g,j,M,U,ne){g!==j&&fu(j,function(xe,Te){if(ne||(ne=new Ri),Er(xe))i_(g,j,Te,M,Qd,U,ne);else{var Re=U?U(Fp(g,Te),xe,Te+"",g,j,ne):n;Re===n&&(Re=xe),Ds(g,Te,Re)}},ui)}function i_(g,j,M,U,ne,xe,Te){var Re=Fp(g,M),We=Fp(j,M),ht=Te.get(We);if(ht){Ds(g,M,ht);return}var pt=xe?xe(Re,We,M+"",g,j,Te):n,gt=pt===n;if(gt){var At=tn(We),Rt=!At&&dl(We),Qt=!At&&!Rt&&Ou(We);pt=We,At||Rt||Qt?tn(Re)?pt=Re:Br(Re)?pt=ei(Re):Rt?(gt=!1,pt=Hy(We,!0)):Qt?(gt=!1,pt=Wy(We,!0)):pt=[]:Qa(We)||bo(We)?(pt=Re,bo(Re)?pt=W1(Re):(!Er(Re)||ms(Re))&&(pt=ex(We))):gt=!1}gt&&(Te.set(We,pt),ne(pt,We,U,xe,Te),Te.delete(We)),Ds(g,M,pt)}function Fy(g,j){var M=g.length;if(M)return j+=j<0?M:0,ps(j,M)?g[j]:n}function $y(g,j,M){j.length?j=Cr(j,function(xe){return tn(xe)?function(Te){return Ga(Te,xe.length===1?xe[0]:xe)}:xe}):j=[Ze];var U=-1;j=Cr(j,pa($t()));var ne=Ry(g,function(xe,Te,Re){var We=Cr(j,function(ht){return ht(xe)});return{criteria:We,index:++U,value:xe}});return o0(ne,function(xe,Te){return q0(xe,Te,M)})}function D0(g,j){return vp(g,j,function(M,U){return Ru(g,U)})}function vp(g,j,M){for(var U=-1,ne=j.length,xe={};++U<ne;){var Te=j[U],Re=Ga(g,Te);M(Re,Te)&&gu(xe,ho(Te,g),Re)}return xe}function M0(g){return function(j){return Ga(j,g)}}function bp(g,j,M,U){var ne=U?py:Zc,xe=-1,Te=j.length,Re=g;for(g===j&&(j=ei(j)),M&&(Re=Cr(g,pa(M)));++xe<Te;)for(var We=0,ht=j[xe],pt=M?M(ht):ht;(We=ne(Re,pt,We,U))>-1;)Re!==g&&ip.call(Re,We,1),ip.call(g,We,1);return g}function By(g,j){for(var M=g?j.length:0,U=M-1;M--;){var ne=j[M];if(M==U||ne!==xe){var xe=ne;ps(ne)?ip.call(g,ne,1):eh(g,ne)}}return g}function jp(g,j){return g+ao(wy()*(j-g+1))}function I0(g,j,M,U){for(var ne=-1,xe=jr(lu((j-g)/(M||1)),0),Te=nt(xe);xe--;)Te[U?xe:++ne]=g,g+=M;return Te}function zy(g,j){var M="";if(!g||j<1||j>ae)return M;do j%2&&(M+=g),j=ao(j/2),j&&(g+=g);while(j);return M}function dn(g,j){return mh(nx(g,j,Ze),g+"")}function mu(g){return du(Fu(g))}function wp(g,j){var M=Fu(g);return yh(M,hs(j,0,M.length))}function gu(g,j,M,U){if(!Er(g))return g;j=ho(j,g);for(var ne=-1,xe=j.length,Te=xe-1,Re=g;Re!=null&&++ne<xe;){var We=Gn(j[ne]),ht=M;if(We==="__proto__"||We==="constructor"||We==="prototype")return g;if(ne!=Te){var pt=Re[We];ht=U?U(pt,We,Re):n,ht===n&&(ht=Er(pt)?pt:ps(j[ne+1])?[]:{})}Ql(Re,We,ht),Re=Re[We]}return g}var Xd=cu?function(g,j){return cu.set(g,j),g}:Ze,Jd=Ld?function(g,j){return Ld(g,"toString",{configurable:!0,enumerable:!1,value:Xe(j),writable:!0})}:Ze;function R0(g){return yh(Fu(g))}function xa(g,j,M){var U=-1,ne=g.length;j<0&&(j=-j>ne?0:ne+j),M=M>ne?ne:M,M<0&&(M+=ne),ne=j>M?0:M-j>>>0,j>>>=0;for(var xe=nt(ne);++U<ne;)xe[U]=g[U+j];return xe}function L0(g,j){var M;return co(g,function(U,ne,xe){return M=j(U,ne,xe),!M}),!!M}function Zd(g,j,M){var U=0,ne=g==null?U:g.length;if(typeof j=="number"&&j===j&&ne<=K){for(;U<ne;){var xe=U+ne>>>1,Te=g[xe];Te!==null&&!$i(Te)&&(M?Te<=j:Te<j)?U=xe+1:ne=xe}return ne}return Sp(g,j,Ze,M)}function Sp(g,j,M,U){var ne=0,xe=g==null?0:g.length;if(xe===0)return 0;j=M(j);for(var Te=j!==j,Re=j===null,We=$i(j),ht=j===n;ne<xe;){var pt=ao((ne+xe)/2),gt=M(g[pt]),At=gt!==n,Rt=gt===null,Qt=gt===gt,yn=$i(gt);if(Te)var Xt=U||Qt;else ht?Xt=Qt&&(U||At):Re?Xt=Qt&&At&&(U||!Rt):We?Xt=Qt&&At&&!Rt&&(U||!yn):Rt||yn?Xt=!1:Xt=U?gt<=j:gt<j;Xt?ne=pt+1:xe=pt}return Tr(xe,je)}function qy(g,j){for(var M=-1,U=g.length,ne=0,xe=[];++M<U;){var Te=g[M],Re=j?j(Te):Te;if(!M||!ta(Re,We)){var We=Re;xe[ne++]=Te===0?0:Te}}return xe}function Np(g){return typeof g=="number"?g:$i(g)?z:+g}function Qi(g){if(typeof g=="string")return g;if(tn(g))return Cr(g,Qi)+"";if($i(g))return Ko?Ko.call(g):"";var j=g+"";return j=="0"&&1/g==-1/0?"-0":j}function uo(g,j,M){var U=-1,ne=Wf,xe=g.length,Te=!0,Re=[],We=Re;if(M)Te=!1,ne=dy;else if(xe>=a){var ht=j?null:W0(g);if(ht)return tp(ht);Te=!1,ne=tu,We=new oo}else We=j?[]:Re;e:for(;++U<xe;){var pt=g[U],gt=j?j(pt):pt;if(pt=M||pt!==0?pt:0,Te&&gt===gt){for(var At=We.length;At--;)if(We[At]===gt)continue e;j&&We.push(gt),Re.push(pt)}else ne(We,gt,M)||(We!==Re&&We.push(gt),Re.push(pt))}return Re}function eh(g,j){return j=ho(j,g),g=vu(g,j),g==null||delete g[Gn(Ti(j))]}function Uy(g,j,M,U){return gu(g,j,M(Ga(g,j)),U)}function th(g,j,M,U){for(var ne=g.length,xe=U?ne:-1;(U?xe--:++xe<ne)&&j(g[xe],xe,g););return M?xa(g,U?0:xe,U?xe+1:ne):xa(g,U?xe+1:0,U?ne:xe)}function F0(g,j){var M=g;return M instanceof mn&&(M=M.value()),hy(j,function(U,ne){return ne.func.apply(ne.thisArg,io([U],ne.args))},M)}function nh(g,j,M){var U=g.length;if(U<2)return U?uo(g[0]):[];for(var ne=-1,xe=nt(U);++ne<U;)for(var Te=g[ne],Re=-1;++Re<U;)Re!=ne&&(xe[ne]=Xo(xe[ne]||Te,g[Re],j,M));return uo(Nn(xe,1),j,M)}function Vy(g,j,M){for(var U=-1,ne=g.length,xe=j.length,Te={};++U<ne;){var Re=U<xe?j[U]:n;M(Te,g[U],Re)}return Te}function _p(g){return Br(g)?g:[]}function rh(g){return typeof g=="function"?g:Ze}function ho(g,j){return tn(g)?g:Ip(g,j)?[g]:Fs(Vn(g))}var $0=dn;function Zo(g,j,M){var U=g.length;return M=M===n?U:M,!j&&M>=U?g:xa(g,j,M)}var B0=ap||function(g){return Hr.clearTimeout(g)};function Hy(g,j){if(j)return g.slice();var M=g.length,U=ql?ql(M):new g.constructor(M);return g.copy(U),U}function tc(g){var j=new g.constructor(g.byteLength);return new ou(j).set(new ou(g)),j}function Gy(g,j){var M=j?tc(g.buffer):g.buffer;return new g.constructor(M,g.byteOffset,g.byteLength)}function Cp(g){var j=new g.constructor(g.source,St.exec(g));return j.lastIndex=g.lastIndex,j}function z0(g){return Wl?In(Wl.call(g)):{}}function Wy(g,j){var M=j?tc(g.buffer):g.buffer;return new g.constructor(M,g.byteOffset,g.length)}function ih(g,j){if(g!==j){var M=g!==n,U=g===null,ne=g===g,xe=$i(g),Te=j!==n,Re=j===null,We=j===j,ht=$i(j);if(!Re&&!ht&&!xe&&g>j||xe&&Te&&We&&!Re&&!ht||U&&Te&&We||!M&&We||!ne)return 1;if(!U&&!xe&&!ht&&g<j||ht&&M&&ne&&!U&&!xe||Re&&M&&ne||!Te&&ne||!We)return-1}return 0}function q0(g,j,M){for(var U=-1,ne=g.criteria,xe=j.criteria,Te=ne.length,Re=M.length;++U<Te;){var We=ih(ne[U],xe[U]);if(We){if(U>=Re)return We;var ht=M[U];return We*(ht=="desc"?-1:1)}}return g.index-j.index}function Yy(g,j,M,U){for(var ne=-1,xe=g.length,Te=M.length,Re=-1,We=j.length,ht=jr(xe-Te,0),pt=nt(We+ht),gt=!U;++Re<We;)pt[Re]=j[Re];for(;++ne<Te;)(gt||ne<xe)&&(pt[M[ne]]=g[ne]);for(;ht--;)pt[Re++]=g[ne++];return pt}function U0(g,j,M,U){for(var ne=-1,xe=g.length,Te=-1,Re=M.length,We=-1,ht=j.length,pt=jr(xe-Re,0),gt=nt(pt+ht),At=!U;++ne<pt;)gt[ne]=g[ne];for(var Rt=ne;++We<ht;)gt[Rt+We]=j[We];for(;++Te<Re;)(At||ne<xe)&&(gt[Rt+M[Te]]=g[ne++]);return gt}function ei(g,j){var M=-1,U=g.length;for(j||(j=nt(U));++M<U;)j[M]=g[M];return j}function Xi(g,j,M,U){var ne=!M;M||(M={});for(var xe=-1,Te=j.length;++xe<Te;){var Re=j[xe],We=U?U(M[Re],g[Re],Re,M,g):n;We===n&&(We=g[Re]),ne?ds(M,Re,We):Ql(M,Re,We)}return M}function Tp(g,j){return Xi(g,dh(g),j)}function ah(g,j){return Xi(g,Mp(g),j)}function nc(g,j){return function(M,U){var ne=tn(M)?zN:Qo,xe=j?j():{};return ne(M,g,$t(U,2),xe)}}function rc(g){return dn(function(j,M){var U=-1,ne=M.length,xe=ne>1?M[ne-1]:n,Te=ne>2?M[2]:n;for(xe=g.length>3&&typeof xe=="function"?(ne--,xe):n,Te&&Fi(M[0],M[1],Te)&&(xe=ne<3?n:xe,ne=1),j=In(j);++U<ne;){var Re=M[U];Re&&g(j,Re,U,xe)}return j})}function Ky(g,j){return function(M,U){if(M==null)return M;if(!ni(M))return g(M,U);for(var ne=M.length,xe=j?ne:-1,Te=In(M);(j?xe--:++xe<ne)&&U(Te[xe],xe,Te)!==!1;);return M}}function ic(g){return function(j,M,U){for(var ne=-1,xe=In(j),Te=U(j),Re=Te.length;Re--;){var We=Te[g?Re:++ne];if(M(xe[We],We,xe)===!1)break}return j}}function V0(g,j,M){var U=j&N,ne=Wa(g);function xe(){var Te=this&&this!==Hr&&this instanceof xe?ne:g;return Te.apply(U?M:this,arguments)}return xe}function va(g){return function(j){j=Vn(j);var M=Vo(j)?Ba(j):n,U=M?M[0]:j.charAt(0),ne=M?Zo(M,1).join(""):j.slice(1);return U[g]()+ne}}function Li(g){return function(j){return hy(A(jo(j).replace(Ad,"")),g,"")}}function Wa(g){return function(){var j=arguments;switch(j.length){case 0:return new g;case 1:return new g(j[0]);case 2:return new g(j[0],j[1]);case 3:return new g(j[0],j[1],j[2]);case 4:return new g(j[0],j[1],j[2],j[3]);case 5:return new g(j[0],j[1],j[2],j[3],j[4]);case 6:return new g(j[0],j[1],j[2],j[3],j[4],j[5]);case 7:return new g(j[0],j[1],j[2],j[3],j[4],j[5],j[6])}var M=ya(g.prototype),U=g.apply(M,j);return Er(U)?U:M}}function H0(g,j,M){var U=Wa(g);function ne(){for(var xe=arguments.length,Te=nt(xe),Re=xe,We=sc(ne);Re--;)Te[Re]=arguments[Re];var ht=xe<3&&Te[0]!==We&&Te[xe-1]!==We?[]:Ho(Te,We);if(xe-=ht.length,xe<M)return Qy(g,j,Fr,ne.placeholder,n,Te,ht,n,n,M-xe);var pt=this&&this!==Hr&&this instanceof ne?U:g;return Vi(pt,this,Te)}return ne}function fo(g){return function(j,M,U){var ne=In(j);if(!ni(j)){var xe=$t(M,3);j=ii(j),M=function(Re){return xe(ne[Re],Re,ne)}}var Te=g(j,M,U);return Te>-1?ne[xe?j[Te]:Te]:n}}function Is(g){return wr(function(j){var M=j.length,U=M,ne=Wi.prototype.thru;for(g&&j.reverse();U--;){var xe=j[U];if(typeof xe!="function")throw new ga(o);if(ne&&!Te&&uh(xe)=="wrapper")var Te=new Wi([],!0)}for(U=Te?U:M;++U<M;){xe=j[U];var Re=uh(xe),We=Re=="wrapper"?Op(xe):n;We&&Rp(We[0])&&We[1]==(I|C|k|F)&&!We[4].length&&We[9]==1?Te=Te[uh(We[0])].apply(Te,We[3]):Te=xe.length==1&&Rp(xe)?Te[Re]():Te.thru(xe)}return function(){var ht=arguments,pt=ht[0];if(Te&&ht.length==1&&tn(pt))return Te.plant(pt).value();for(var gt=0,At=M?j[gt].apply(this,ht):pt;++gt<M;)At=j[gt].call(this,At);return At}})}function Fr(g,j,M,U,ne,xe,Te,Re,We,ht){var pt=j&I,gt=j&N,At=j&_,Rt=j&(C|O),Qt=j&B,yn=At?n:Wa(g);function Xt(){for(var Tn=arguments.length,Ln=nt(Tn),ys=Tn;ys--;)Ln[ys]=arguments[ys];if(Rt)var Na=sc(Xt),xs=YN(Ln,Na);if(U&&(Ln=Yy(Ln,U,ne,Rt)),xe&&(Ln=U0(Ln,xe,Te,Rt)),Tn-=xs,Rt&&Tn<ht){var ai=Ho(Ln,Na);return Qy(g,j,Fr,Xt.placeholder,M,Ln,ai,Re,We,ht-Tn)}var wo=gt?M:this,uc=At?wo[g]:g;return Tn=Ln.length,Re?Ln=Ls(Ln,Re):Qt&&Tn>1&&Ln.reverse(),pt&&We<Tn&&(Ln.length=We),this&&this!==Hr&&this instanceof Xt&&(uc=yn||Wa(uc)),uc.apply(wo,Ln)}return Xt}function sh(g,j){return function(M,U){return Oy(M,g,j(U),{})}}function yu(g,j){return function(M,U){var ne;if(M===n&&U===n)return j;if(M!==n&&(ne=M),U!==n){if(ne===n)return U;typeof M=="string"||typeof U=="string"?(M=Qi(M),U=Qi(U)):(M=Np(M),U=Np(U)),ne=g(M,U)}return ne}}function oh(g){return wr(function(j){return j=Cr(j,pa($t())),dn(function(M){var U=this;return g(j,function(ne){return Vi(ne,U,M)})})})}function lh(g,j){j=j===n?" ":Qi(j);var M=j.length;if(M<2)return M?zy(j,g):j;var U=zy(j,lu(g/Os(j)));return Vo(j)?Zo(Ba(U),0,g).join(""):U.slice(0,g)}function G0(g,j,M,U){var ne=j&N,xe=Wa(g);function Te(){for(var Re=-1,We=arguments.length,ht=-1,pt=U.length,gt=nt(pt+We),At=this&&this!==Hr&&this instanceof Te?xe:g;++ht<pt;)gt[ht]=U[ht];for(;We--;)gt[ht++]=arguments[++Re];return Vi(At,ne?M:this,gt)}return Te}function el(g){return function(j,M,U){return U&&typeof U!="number"&&Fi(j,M,U)&&(M=U=n),j=zs(j),M===n?(M=j,j=0):M=zs(M),U=U===n?j<M?1:-1:zs(U),I0(j,M,U,g)}}function ac(g){return function(j,M){return typeof j=="string"&&typeof M=="string"||(j=Xa(j),M=Xa(M)),g(j,M)}}function Qy(g,j,M,U,ne,xe,Te,Re,We,ht){var pt=j&C,gt=pt?Te:n,At=pt?n:Te,Rt=pt?xe:n,Qt=pt?n:xe;j|=pt?k:P,j&=~(pt?P:k),j&T||(j&=-4);var yn=[g,j,ne,Rt,gt,Qt,At,Re,We,ht],Xt=M.apply(n,yn);return Rp(g)&&$p(Xt,yn),Xt.placeholder=U,Bp(Xt,g,j)}function kp(g){var j=Gr[g];return function(M,U){if(M=Xa(M),U=U==null?0:Tr(on(U),292),U&&Fd(M)){var ne=(Vn(M)+"e").split("e"),xe=j(ne[0]+"e"+(+ne[1]+U));return ne=(Vn(xe)+"e").split("e"),+(ne[0]+"e"+(+ne[1]-U))}return j(M)}}var W0=Sn&&1/tp(new Sn([,-0]))[1]==W?function(g){return new Sn(g)}:Pt;function ch(g){return function(j){var M=ci(j);return M==Q?ep(j):M==Le?KN(j):WN(j,g(j))}}function Rs(g,j,M,U,ne,xe,Te,Re){var We=j&_;if(!We&&typeof g!="function")throw new ga(o);var ht=U?U.length:0;if(ht||(j&=-97,U=ne=n),Te=Te===n?Te:jr(on(Te),0),Re=Re===n?Re:on(Re),ht-=ne?ne.length:0,j&P){var pt=U,gt=ne;U=ne=n}var At=We?n:Op(g),Rt=[g,j,M,U,ne,pt,gt,xe,Te,Re];if(At&&ph(Rt,At),g=Rt[0],j=Rt[1],M=Rt[2],U=Rt[3],ne=Rt[4],Re=Rt[9]=Rt[9]===n?We?0:g.length:jr(Rt[9]-ht,0),!Re&&j&(C|O)&&(j&=-25),!j||j==N)var Qt=V0(g,j,M);else j==C||j==O?Qt=H0(g,j,Re):(j==k||j==(N|k))&&!ne.length?Qt=G0(g,j,M,U):Qt=Fr.apply(n,Rt);var yn=At?Xd:$p;return Bp(yn(Qt,Rt),g,j)}function Ap(g,j,M,U){return g===n||ta(g,au[M])&&!Un.call(U,M)?j:g}function Xy(g,j,M,U,ne,xe){return Er(g)&&Er(j)&&(xe.set(j,g),Qd(g,j,n,Xy,xe),xe.delete(j)),g}function Y0(g){return Qa(g)?n:g}function K0(g,j,M,U,ne,xe){var Te=M&v,Re=g.length,We=j.length;if(Re!=We&&!(Te&&We>Re))return!1;var ht=xe.get(g),pt=xe.get(j);if(ht&&pt)return ht==j&&pt==g;var gt=-1,At=!0,Rt=M&S?new oo:n;for(xe.set(g,j),xe.set(j,g);++gt<Re;){var Qt=g[gt],yn=j[gt];if(U)var Xt=Te?U(yn,Qt,gt,j,g,xe):U(Qt,yn,gt,g,j,xe);if(Xt!==n){if(Xt)continue;At=!1;break}if(Rt){if(!fy(j,function(Tn,Ln){if(!tu(Rt,Ln)&&(Qt===Tn||ne(Qt,Tn,M,U,xe)))return Rt.push(Ln)})){At=!1;break}}else if(!(Qt===yn||ne(Qt,yn,M,U,xe))){At=!1;break}}return xe.delete(g),xe.delete(j),At}function Q0(g,j,M,U,ne,xe,Te){switch(M){case pe:if(g.byteLength!=j.byteLength||g.byteOffset!=j.byteOffset)return!1;g=g.buffer,j=j.buffer;case ye:return!(g.byteLength!=j.byteLength||!xe(new ou(g),new ou(j)));case be:case re:case ie:return ta(+g,+j);case ce:return g.name==j.name&&g.message==j.message;case Ge:case oe:return g==j+"";case Q:var Re=ep;case Le:var We=U&v;if(Re||(Re=tp),g.size!=j.size&&!We)return!1;var ht=Te.get(g);if(ht)return ht==j;U|=S,Te.set(g,j);var pt=K0(Re(g),Re(j),U,ne,xe,Te);return Te.delete(g),pt;case _e:if(Wl)return Wl.call(g)==Wl.call(j)}return!1}function li(g,j,M,U,ne,xe){var Te=M&v,Re=Ep(g),We=Re.length,ht=Ep(j),pt=ht.length;if(We!=pt&&!Te)return!1;for(var gt=We;gt--;){var At=Re[gt];if(!(Te?At in j:Un.call(j,At)))return!1}var Rt=xe.get(g),Qt=xe.get(j);if(Rt&&Qt)return Rt==j&&Qt==g;var yn=!0;xe.set(g,j),xe.set(j,g);for(var Xt=Te;++gt<We;){At=Re[gt];var Tn=g[At],Ln=j[At];if(U)var ys=Te?U(Ln,Tn,At,j,g,xe):U(Tn,Ln,At,g,j,xe);if(!(ys===n?Tn===Ln||ne(Tn,Ln,M,U,xe):ys)){yn=!1;break}Xt||(Xt=At=="constructor")}if(yn&&!Xt){var Na=g.constructor,xs=j.constructor;Na!=xs&&"constructor"in g&&"constructor"in j&&!(typeof Na=="function"&&Na instanceof Na&&typeof xs=="function"&&xs instanceof xs)&&(yn=!1)}return xe.delete(g),xe.delete(j),yn}function wr(g){return mh(nx(g,n,Zi),g+"")}function Ep(g){return A0(g,ii,dh)}function Pp(g){return A0(g,ui,Mp)}var Op=cu?function(g){return cu.get(g)}:Pt;function uh(g){for(var j=g.name+"",M=Va[j],U=Un.call(Va,j)?M.length:0;U--;){var ne=M[U],xe=ne.func;if(xe==null||xe==g)return ne.name}return j}function sc(g){var j=Un.call(de,"placeholder")?de:g;return j.placeholder}function $t(){var g=de.iteratee||Ht;return g=g===Ht?Iy:g,arguments.length?g(arguments[0],arguments[1]):g}function xu(g,j){var M=g.__data__;return mo(j)?M[typeof j=="string"?"string":"hash"]:M.map}function Dp(g){for(var j=ii(g),M=j.length;M--;){var U=j[M],ne=g[U];j[M]=[U,ne,e1(ne)]}return j}function tl(g,j){var M=gy(g,j);return Ms(M)?M:n}function X0(g){var j=Un.call(g,Ii),M=g[Ii];try{g[Ii]=n;var U=!0}catch{}var ne=Mi.call(g);return U&&(j?g[Ii]=M:delete g[Ii]),ne}var dh=Wo?function(g){return g==null?[]:(g=In(g),Ps(Wo(g),function(j){return Ul.call(g,j)}))}:z_,Mp=Wo?function(g){for(var j=[];g;)io(j,dh(g)),g=Id(g);return j}:z_,ci=Cn;($d&&ci(new $d(new ArrayBuffer(1)))!=pe||Zr&&ci(new Zr)!=Q||kr&&ci(kr.resolve())!=we||Sn&&ci(new Sn)!=Le||us&&ci(new us)!=ze)&&(ci=function(g){var j=Cn(g),M=j==ee?g.constructor:n,U=M?go(M):"";if(U)switch(U){case y0:return pe;case x0:return Q;case Bd:return we;case zd:return Le;case v0:return ze}return j});function J0(g,j,M){for(var U=-1,ne=M.length;++U<ne;){var xe=M[U],Te=xe.size;switch(xe.type){case"drop":g+=Te;break;case"dropRight":j-=Te;break;case"take":j=Tr(j,g+Te);break;case"takeRight":g=jr(g,j-Te);break}}return{start:g,end:j}}function Jy(g){var j=g.match(Ll);return j?j[1].split(Fo):[]}function hh(g,j,M){j=ho(j,g);for(var U=-1,ne=j.length,xe=!1;++U<ne;){var Te=Gn(j[U]);if(!(xe=g!=null&&M(g,Te)))break;g=g[Te]}return xe||++U!=ne?xe:(ne=g==null?0:g.length,!!ne&&cc(ne)&&ps(Te,ne)&&(tn(g)||bo(g)))}function Zy(g){var j=g.length,M=new g.constructor(j);return j&&typeof g[0]=="string"&&Un.call(g,"index")&&(M.index=g.index,M.input=g.input),M}function ex(g){return typeof g.constructor=="function"&&!hr(g)?ya(Id(g)):{}}function tx(g,j,M){var U=g.constructor;switch(j){case ye:return tc(g);case be:case re:return new U(+g);case pe:return Gy(g,M);case me:case Ne:case Be:case Ee:case Ke:case rt:case mt:case Pe:case Je:return Wy(g,M);case Q:return new U;case ie:case oe:return new U(g);case Ge:return Cp(g);case Le:return new U;case _e:return z0(g)}}function Z0(g,j){var M=j.length;if(!M)return g;var U=M-1;return j[U]=(M>1?"& ":"")+j[U],j=j.join(M>2?", ":" "),g.replace(qi,`{
/* [wrapped with `+j+`] */
`)}function po(g){return tn(g)||bo(g)||!!(Hi&&g&&g[Hi])}function ps(g,j){var M=typeof g;return j=j??ae,!!j&&(M=="number"||M!="symbol"&&yi.test(g))&&g>-1&&g%1==0&&g<j}function Fi(g,j,M){if(!Er(M))return!1;var U=typeof j;return(U=="number"?ni(M)&&ps(j,M.length):U=="string"&&j in M)?ta(M[j],g):!1}function Ip(g,j){if(tn(g))return!1;var M=typeof g;return M=="number"||M=="symbol"||M=="boolean"||g==null||$i(g)?!0:br.test(g)||!Kn.test(g)||j!=null&&g in In(j)}function mo(g){var j=typeof g;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?g!=="__proto__":g===null}function Rp(g){var j=uh(g),M=de[j];if(typeof M!="function"||!(j in mn.prototype))return!1;if(g===M)return!0;var U=Op(M);return!!U&&g===U[0]}function Lp(g){return!!vy&&vy in g}var fh=Dd?ms:q_;function hr(g){var j=g&&g.constructor,M=typeof j=="function"&&j.prototype||au;return g===M}function e1(g){return g===g&&!Er(g)}function t1(g,j){return function(M){return M==null?!1:M[g]===j&&(j!==n||g in In(M))}}function n1(g){var j=_h(g,function(U){return M.size===d&&M.clear(),U}),M=j.cache;return j}function ph(g,j){var M=g[1],U=j[1],ne=M|U,xe=ne<(N|_|I),Te=U==I&&M==C||U==I&&M==F&&g[7].length<=j[8]||U==(I|F)&&j[7].length<=j[8]&&M==C;if(!(xe||Te))return g;U&N&&(g[2]=j[2],ne|=M&N?0:T);var Re=j[3];if(Re){var We=g[3];g[3]=We?Yy(We,Re,j[4]):Re,g[4]=We?Ho(g[3],f):j[4]}return Re=j[5],Re&&(We=g[5],g[5]=We?U0(We,Re,j[6]):Re,g[6]=We?Ho(g[5],f):j[6]),Re=j[7],Re&&(g[7]=Re),U&I&&(g[8]=g[8]==null?j[8]:Tr(g[8],j[8])),g[9]==null&&(g[9]=j[9]),g[0]=j[0],g[1]=ne,g}function nl(g){var j=[];if(g!=null)for(var M in In(g))j.push(M);return j}function r1(g){return Mi.call(g)}function nx(g,j,M){return j=jr(j===n?g.length-1:j,0),function(){for(var U=arguments,ne=-1,xe=jr(U.length-j,0),Te=nt(xe);++ne<xe;)Te[ne]=U[j+ne];ne=-1;for(var Re=nt(j+1);++ne<j;)Re[ne]=U[ne];return Re[j]=M(Te),Vi(g,this,Re)}}function vu(g,j){return j.length<2?g:Ga(g,xa(j,0,-1))}function Ls(g,j){for(var M=g.length,U=Tr(j.length,M),ne=ei(g);U--;){var xe=j[U];g[U]=ps(xe,M)?ne[xe]:n}return g}function Fp(g,j){if(!(j==="constructor"&&typeof g[j]=="function")&&j!="__proto__")return g[j]}var $p=gh(Xd),bu=jy||function(g,j){return Hr.setTimeout(g,j)},mh=gh(Jd);function Bp(g,j,M){var U=j+"";return mh(g,Z0(U,i1(Jy(U),M)))}function gh(g){var j=0,M=0;return function(){var U=so(),ne=H-(U-M);if(M=U,ne>0){if(++j>=V)return arguments[0]}else j=0;return g.apply(n,arguments)}}function yh(g,j){var M=-1,U=g.length,ne=U-1;for(j=j===n?U:j;++M<j;){var xe=jp(M,ne),Te=g[xe];g[xe]=g[M],g[M]=Te}return g.length=j,g}var Fs=n1(function(g){var j=[];return g.charCodeAt(0)===46&&j.push(""),g.replace(zn,function(M,U,ne,xe){j.push(ne?xe.replace($o,"$1"):U||M)}),j});function Gn(g){if(typeof g=="string"||$i(g))return g;var j=g+"";return j=="0"&&1/g==-1/0?"-0":j}function go(g){if(g!=null){try{return Md.call(g)}catch{}try{return g+""}catch{}}return""}function i1(g,j){return $a(Oe,function(M){var U="_."+M[0];j&M[1]&&!Wf(g,U)&&g.push(U)}),g.sort()}function ti(g){if(g instanceof mn)return g.clone();var j=new Wi(g.__wrapped__,g.__chain__);return j.__actions__=ei(g.__actions__),j.__index__=g.__index__,j.__values__=g.__values__,j}function a_(g,j,M){(M?Fi(g,j,M):j===n)?j=1:j=jr(on(j),0);var U=g==null?0:g.length;if(!U||j<1)return[];for(var ne=0,xe=0,Te=nt(lu(U/j));ne<U;)Te[xe++]=xa(g,ne,ne+=j);return Te}function a1(g){for(var j=-1,M=g==null?0:g.length,U=0,ne=[];++j<M;){var xe=g[j];xe&&(ne[U++]=xe)}return ne}function s1(){var g=arguments.length;if(!g)return[];for(var j=nt(g-1),M=arguments[0],U=g;U--;)j[U-1]=arguments[U];return io(tn(M)?ei(M):[M],Nn(j,1))}var Ar=dn(function(g,j){return Br(g)?Xo(g,Nn(j,1,Br,!0)):[]}),Ji=dn(function(g,j){var M=Ti(j);return Br(M)&&(M=n),Br(g)?Xo(g,Nn(j,1,Br,!0),$t(M,2)):[]}),yo=dn(function(g,j){var M=Ti(j);return Br(M)&&(M=n),Br(g)?Xo(g,Nn(j,1,Br,!0),n,M):[]});function o1(g,j,M){var U=g==null?0:g.length;return U?(j=M||j===n?1:on(j),xa(g,j<0?0:j,U)):[]}function l1(g,j,M){var U=g==null?0:g.length;return U?(j=M||j===n?1:on(j),j=U-j,xa(g,0,j<0?0:j)):[]}function s_(g,j){return g&&g.length?th(g,$t(j,3),!0,!0):[]}function rx(g,j){return g&&g.length?th(g,$t(j,3),!0):[]}function ba(g,j,M,U){var ne=g==null?0:g.length;return ne?(M&&typeof M!="number"&&Fi(g,j,M)&&(M=0,U=ne),fn(g,j,M,U)):[]}function Ya(g,j,M){var U=g==null?0:g.length;if(!U)return-1;var ne=M==null?0:on(M);return ne<0&&(ne=jr(U+ne,0)),Yf(g,$t(j,3),ne)}function ix(g,j,M){var U=g==null?0:g.length;if(!U)return-1;var ne=U-1;return M!==n&&(ne=on(M),ne=M<0?jr(U+ne,0):Tr(ne,U-1)),Yf(g,$t(j,3),ne,!0)}function Zi(g){var j=g==null?0:g.length;return j?Nn(g,1):[]}function c1(g){var j=g==null?0:g.length;return j?Nn(g,W):[]}function rl(g,j){var M=g==null?0:g.length;return M?(j=j===n?1:on(j),Nn(g,j)):[]}function oc(g){for(var j=-1,M=g==null?0:g.length,U={};++j<M;){var ne=g[j];U[ne[0]]=ne[1]}return U}function xo(g){return g&&g.length?g[0]:n}function ax(g,j,M){var U=g==null?0:g.length;if(!U)return-1;var ne=M==null?0:on(M);return ne<0&&(ne=jr(U+ne,0)),Zc(g,j,ne)}function sx(g){var j=g==null?0:g.length;return j?xa(g,0,-1):[]}var $s=dn(function(g){var j=Cr(g,_p);return j.length&&j[0]===g[0]?Py(j):[]}),u1=dn(function(g){var j=Ti(g),M=Cr(g,_p);return j===Ti(M)?j=n:M.pop(),M.length&&M[0]===g[0]?Py(M,$t(j,2)):[]}),ju=dn(function(g){var j=Ti(g),M=Cr(g,_p);return j=typeof j=="function"?j:n,j&&M.pop(),M.length&&M[0]===g[0]?Py(M,n,j):[]});function xh(g,j){return g==null?"":qa.call(g,j)}function Ti(g){var j=g==null?0:g.length;return j?g[j-1]:n}function wu(g,j,M){var U=g==null?0:g.length;if(!U)return-1;var ne=U;return M!==n&&(ne=on(M),ne=ne<0?jr(U+ne,0):Tr(ne,U-1)),j===j?ma(g,j,ne):Yf(g,eu,ne,!0)}function d1(g,j){return g&&g.length?Fy(g,on(j)):n}var h1=dn(Su);function Su(g,j){return g&&g.length&&j&&j.length?bp(g,j):g}function f1(g,j,M){return g&&g.length&&j&&j.length?bp(g,j,$t(M,2)):g}function zp(g,j,M){return g&&g.length&&j&&j.length?bp(g,j,n,M):g}var p1=wr(function(g,j){var M=g==null?0:g.length,U=Gd(g,j);return By(g,Cr(j,function(ne){return ps(ne,M)?+ne:ne}).sort(ih)),U});function o_(g,j){var M=[];if(!(g&&g.length))return M;var U=-1,ne=[],xe=g.length;for(j=$t(j,3);++U<xe;){var Te=g[U];j(Te,U,g)&&(M.push(Te),ne.push(U))}return By(g,ne),M}function ox(g){return g==null?g:Sy.call(g)}function Jn(g,j,M){var U=g==null?0:g.length;return U?(M&&typeof M!="number"&&Fi(g,j,M)?(j=0,M=U):(j=j==null?0:on(j),M=M===n?U:on(M)),xa(g,j,M)):[]}function mr(g,j){return Zd(g,j)}function bn(g,j,M){return Sp(g,j,$t(M,2))}function Dn(g,j){var M=g==null?0:g.length;if(M){var U=Zd(g,j);if(U<M&&ta(g[U],j))return U}return-1}function Zn(g,j){return Zd(g,j,!0)}function ja(g,j,M){return Sp(g,j,$t(M,2),!0)}function il(g,j){var M=g==null?0:g.length;if(M){var U=Zd(g,j,!0)-1;if(ta(g[U],j))return U}return-1}function Nu(g){return g&&g.length?qy(g):[]}function lx(g,j){return g&&g.length?qy(g,$t(j,2)):[]}function vo(g){var j=g==null?0:g.length;return j?xa(g,1,j):[]}function $r(g,j,M){return g&&g.length?(j=M||j===n?1:on(j),xa(g,0,j<0?0:j)):[]}function al(g,j,M){var U=g==null?0:g.length;return U?(j=M||j===n?1:on(j),j=U-j,xa(g,j<0?0:j,U)):[]}function lc(g,j){return g&&g.length?th(g,$t(j,3),!1,!0):[]}function cx(g,j){return g&&g.length?th(g,$t(j,3)):[]}var Ka=dn(function(g){return uo(Nn(g,1,Br,!0))}),_u=dn(function(g){var j=Ti(g);return Br(j)&&(j=n),uo(Nn(g,1,Br,!0),$t(j,2))}),vh=dn(function(g){var j=Ti(g);return j=typeof j=="function"?j:n,uo(Nn(g,1,Br,!0),n,j)});function ea(g){return g&&g.length?uo(g):[]}function ux(g,j){return g&&g.length?uo(g,$t(j,2)):[]}function dx(g,j){return j=typeof j=="function"?j:n,g&&g.length?uo(g,n,j):[]}function Cu(g){if(!(g&&g.length))return[];var j=0;return g=Ps(g,function(M){if(Br(M))return j=jr(M.length,j),!0}),Uo(j,function(M){return Cr(g,Kf(M))})}function bh(g,j){if(!(g&&g.length))return[];var M=Cu(g);return j==null?M:Cr(M,function(U){return Vi(j,n,U)})}var sl=dn(function(g,j){return Br(g)?Xo(g,j):[]}),xi=dn(function(g){return nh(Ps(g,Br))}),ol=dn(function(g){var j=Ti(g);return Br(j)&&(j=n),nh(Ps(g,Br),$t(j,2))}),Tu=dn(function(g){var j=Ti(g);return j=typeof j=="function"?j:n,nh(Ps(g,Br),n,j)}),ku=dn(Cu);function hx(g,j){return Vy(g||[],j||[],Ql)}function fx(g,j){return Vy(g||[],j||[],gu)}var m1=dn(function(g){var j=g.length,M=j>1?g[j-1]:n;return M=typeof M=="function"?(g.pop(),M):n,bh(g,M)});function Au(g){var j=de(g);return j.__chain__=!0,j}function px(g,j){return j(g),g}function ki(g,j){return j(g)}var g1=wr(function(g){var j=g.length,M=j?g[0]:0,U=this.__wrapped__,ne=function(xe){return Gd(xe,g)};return j>1||this.__actions__.length||!(U instanceof mn)||!ps(M)?this.thru(ne):(U=U.slice(M,+M+(j?1:0)),U.__actions__.push({func:ki,args:[ne],thisArg:n}),new Wi(U,this.__chain__).thru(function(xe){return j&&!xe.length&&xe.push(n),xe}))});function wa(){return Au(this)}function y1(){return new Wi(this.value(),this.__chain__)}function x1(){this.__values__===n&&(this.__values__=Sa(this.value()));var g=this.__index__>=this.__values__.length,j=g?n:this.__values__[this.__index__++];return{done:g,value:j}}function l_(){return this}function ll(g){for(var j,M=this;M instanceof Ha;){var U=ti(M);U.__index__=0,U.__values__=n,j?ne.__wrapped__=U:j=U;var ne=U;M=M.__wrapped__}return ne.__wrapped__=g,j}function qp(){var g=this.__wrapped__;if(g instanceof mn){var j=g;return this.__actions__.length&&(j=new mn(this)),j=j.reverse(),j.__actions__.push({func:ki,args:[ox],thisArg:n}),new Wi(j,this.__chain__)}return this.thru(ox)}function mx(){return F0(this.__wrapped__,this.__actions__)}var Eu=nc(function(g,j,M){Un.call(g,M)?++g[M]:ds(g,M,1)});function v1(g,j,M){var U=tn(g)?i0:Ay;return M&&Fi(g,j,M)&&(j=n),U(g,$t(j,3))}function b1(g,j){var M=tn(g)?Ps:Xn;return M(g,$t(j,3))}var j1=fo(Ya),gx=fo(ix);function yx(g,j){return Nn(jh(g,j),1)}function c_(g,j){return Nn(jh(g,j),W)}function u_(g,j,M){return M=M===n?1:on(M),Nn(jh(g,j),M)}function w1(g,j){var M=tn(g)?$a:co;return M(g,$t(j,3))}function xx(g,j){var M=tn(g)?qN:hp;return M(g,$t(j,3))}var S1=nc(function(g,j,M){Un.call(g,M)?g[M].push(j):ds(g,M,[j])});function Pu(g,j,M,U){g=ni(g)?g:Fu(g),M=M&&!U?on(M):0;var ne=g.length;return M<0&&(M=jr(ne+M,0)),em(g)?M<=ne&&g.indexOf(j,M)>-1:!!ne&&Zc(g,j,M)>-1}var Up=dn(function(g,j,M){var U=-1,ne=typeof j=="function",xe=ni(g)?nt(g.length):[];return co(g,function(Te){xe[++U]=ne?Vi(j,Te,M):Zl(Te,j,M)}),xe}),N1=nc(function(g,j,M){ds(g,M,j)});function jh(g,j){var M=tn(g)?Cr:Ry;return M(g,$t(j,3))}function _1(g,j,M,U){return g==null?[]:(tn(j)||(j=j==null?[]:[j]),M=U?n:M,tn(M)||(M=M==null?[]:[M]),$y(g,j,M))}var C1=nc(function(g,j,M){g[M?0:1].push(j)},function(){return[[],[]]});function T1(g,j,M){var U=tn(g)?hy:my,ne=arguments.length<3;return U(g,$t(j,4),M,ne,co)}function k1(g,j,M){var U=tn(g)?UN:my,ne=arguments.length<3;return U(g,$t(j,4),M,ne,hp)}function Vp(g,j){var M=tn(g)?Ps:Xn;return M(g,Ch($t(j,3)))}function A1(g){var j=tn(g)?du:mu;return j(g)}function E1(g,j,M){(M?Fi(g,j,M):j===n)?j=1:j=on(j);var U=tn(g)?C0:wp;return U(g,j)}function fr(g){var j=tn(g)?T0:R0;return j(g)}function vx(g){if(g==null)return 0;if(ni(g))return em(g)?Os(g):g.length;var j=ci(g);return j==Q||j==Le?g.size:gp(g).length}function d_(g,j,M){var U=tn(g)?fy:L0;return M&&Fi(g,j,M)&&(j=n),U(g,$t(j,3))}var P1=dn(function(g,j){if(g==null)return[];var M=j.length;return M>1&&Fi(g,j[0],j[1])?j=[]:M>2&&Fi(j[0],j[1],j[2])&&(j=[j[0]]),$y(g,Nn(j,1),[])}),Hp=Hl||function(){return Hr.Date.now()};function h_(g,j){if(typeof j!="function")throw new ga(o);return g=on(g),function(){if(--g<1)return j.apply(this,arguments)}}function O1(g,j,M){return j=M?n:j,j=g&&j==null?g.length:j,Rs(g,I,n,n,n,n,j)}function wh(g,j){var M;if(typeof j!="function")throw new ga(o);return g=on(g),function(){return--g>0&&(M=j.apply(this,arguments)),g<=1&&(j=n),M}}var cl=dn(function(g,j,M){var U=N;if(M.length){var ne=Ho(M,sc(cl));U|=k}return Rs(g,U,j,M,ne)}),Gp=dn(function(g,j,M){var U=N|_;if(M.length){var ne=Ho(M,sc(Gp));U|=k}return Rs(j,U,g,M,ne)});function Sh(g,j,M){j=M?n:j;var U=Rs(g,C,n,n,n,n,n,j);return U.placeholder=Sh.placeholder,U}function Wp(g,j,M){j=M?n:j;var U=Rs(g,O,n,n,n,n,n,j);return U.placeholder=Wp.placeholder,U}function ul(g,j,M){var U,ne,xe,Te,Re,We,ht=0,pt=!1,gt=!1,At=!0;if(typeof g!="function")throw new ga(o);j=Xa(j)||0,Er(M)&&(pt=!!M.leading,gt="maxWait"in M,xe=gt?jr(Xa(M.maxWait)||0,j):xe,At="trailing"in M?!!M.trailing:At);function Rt(ai){var wo=U,uc=ne;return U=ne=n,ht=ai,Te=g.apply(uc,wo),Te}function Qt(ai){return ht=ai,Re=bu(Tn,j),pt?Rt(ai):Te}function yn(ai){var wo=ai-We,uc=ai-ht,PM=j-wo;return gt?Tr(PM,xe-uc):PM}function Xt(ai){var wo=ai-We,uc=ai-ht;return We===n||wo>=j||wo<0||gt&&uc>=xe}function Tn(){var ai=Hp();if(Xt(ai))return Ln(ai);Re=bu(Tn,yn(ai))}function Ln(ai){return Re=n,At&&U?Rt(ai):(U=ne=n,Te)}function ys(){Re!==n&&B0(Re),ht=0,U=We=ne=Re=n}function Na(){return Re===n?Te:Ln(Hp())}function xs(){var ai=Hp(),wo=Xt(ai);if(U=arguments,ne=this,We=ai,wo){if(Re===n)return Qt(We);if(gt)return B0(Re),Re=bu(Tn,j),Rt(We)}return Re===n&&(Re=bu(Tn,j)),Te}return xs.cancel=ys,xs.flush=Na,xs}var Bs=dn(function(g,j){return Xl(g,1,j)}),Nh=dn(function(g,j,M){return Xl(g,Xa(j)||0,M)});function f_(g){return Rs(g,B)}function _h(g,j){if(typeof g!="function"||j!=null&&typeof j!="function")throw new ga(o);var M=function(){var U=arguments,ne=j?j.apply(this,U):U[0],xe=M.cache;if(xe.has(ne))return xe.get(ne);var Te=g.apply(this,U);return M.cache=xe.set(ne,Te)||xe,Te};return M.cache=new(_h.Cache||Yi),M}_h.Cache=Yi;function Ch(g){if(typeof g!="function")throw new ga(o);return function(){var j=arguments;switch(j.length){case 0:return!g.call(this);case 1:return!g.call(this,j[0]);case 2:return!g.call(this,j[0],j[1]);case 3:return!g.call(this,j[0],j[1],j[2])}return!g.apply(this,j)}}function D1(g){return wh(2,g)}var M1=$0(function(g,j){j=j.length==1&&tn(j[0])?Cr(j[0],pa($t())):Cr(Nn(j,1),pa($t()));var M=j.length;return dn(function(U){for(var ne=-1,xe=Tr(U.length,M);++ne<xe;)U[ne]=j[ne].call(this,U[ne]);return Vi(g,this,U)})}),bx=dn(function(g,j){var M=Ho(j,sc(bx));return Rs(g,k,n,j,M)}),Yp=dn(function(g,j){var M=Ho(j,sc(Yp));return Rs(g,P,n,j,M)}),I1=wr(function(g,j){return Rs(g,F,n,n,n,j)});function R1(g,j){if(typeof g!="function")throw new ga(o);return j=j===n?j:on(j),dn(g,j)}function p_(g,j){if(typeof g!="function")throw new ga(o);return j=j==null?0:jr(on(j),0),dn(function(M){var U=M[j],ne=Zo(M,0,j);return U&&io(ne,U),Vi(g,this,ne)})}function jx(g,j,M){var U=!0,ne=!0;if(typeof g!="function")throw new ga(o);return Er(M)&&(U="leading"in M?!!M.leading:U,ne="trailing"in M?!!M.trailing:ne),ul(g,j,{leading:U,maxWait:j,trailing:ne})}function wx(g){return O1(g,1)}function m_(g,j){return bx(rh(j),g)}function g_(){if(!arguments.length)return[];var g=arguments[0];return tn(g)?g:[g]}function Th(g){return _i(g,x)}function y_(g,j){return j=typeof j=="function"?j:n,_i(g,x,j)}function L1(g){return _i(g,p|x)}function jn(g,j){return j=typeof j=="function"?j:n,_i(g,p|x,j)}function Sx(g,j){return j==null||ky(g,j,ii(j))}function ta(g,j){return g===j||g!==g&&j!==j}var Nx=ac(Wd),F1=ac(function(g,j){return g>=j}),bo=fp(function(){return arguments}())?fp:function(g){return Ir(g)&&Un.call(g,"callee")&&!Ul.call(g,"callee")},tn=nt.isArray,Kp=Gf?pa(Gf):Ki;function ni(g){return g!=null&&cc(g.length)&&!ms(g)}function Br(g){return Ir(g)&&ni(g)}function x_(g){return g===!0||g===!1||Ir(g)&&Cn(g)==be}var dl=sp||q_,$1=Zb?pa(Zb):Wr;function B1(g){return Ir(g)&&g.nodeType===1&&!Qa(g)}function Qp(g){if(g==null)return!0;if(ni(g)&&(tn(g)||typeof g=="string"||typeof g.splice=="function"||dl(g)||Ou(g)||bo(g)))return!g.length;var j=ci(g);if(j==Q||j==Le)return!g.size;if(hr(g))return!gp(g).length;for(var M in g)if(Un.call(g,M))return!1;return!0}function rr(g,j){return ec(g,j)}function _x(g,j,M){M=typeof M=="function"?M:n;var U=M?M(g,j):n;return U===n?ec(g,j,n,M):!!U}function ri(g){if(!Ir(g))return!1;var j=Cn(g);return j==ce||j==ve||typeof g.message=="string"&&typeof g.name=="string"&&!Qa(g)}function v_(g){return typeof g=="number"&&Fd(g)}function ms(g){if(!Er(g))return!1;var j=Cn(g);return j==fe||j==se||j==Ie||j==Ue}function Xp(g){return typeof g=="number"&&g==on(g)}function cc(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=ae}function Er(g){var j=typeof g;return g!=null&&(j=="object"||j=="function")}function Ir(g){return g!=null&&typeof g=="object"}var Jp=e0?pa(e0):pp;function Cx(g,j){return g===j||Kd(g,j,Dp(j))}function b_(g,j,M){return M=typeof M=="function"?M:n,Kd(g,j,Dp(j),M)}function z1(g){return U1(g)&&g!=+g}function j_(g){if(fh(g))throw new Kt(s);return Ms(g)}function q1(g){return g===null}function w_(g){return g==null}function U1(g){return typeof g=="number"||Ir(g)&&Cn(g)==ie}function Qa(g){if(!Ir(g)||Cn(g)!=ee)return!1;var j=Id(g);if(j===null)return!0;var M=Un.call(j,"constructor")&&j.constructor;return typeof M=="function"&&M instanceof M&&Md.call(M)==za}var Zp=t0?pa(t0):mp;function Tx(g){return Xp(g)&&g>=-9007199254740991&&g<=ae}var V1=n0?pa(n0):Dy;function em(g){return typeof g=="string"||!tn(g)&&Ir(g)&&Cn(g)==oe}function $i(g){return typeof g=="symbol"||Ir(g)&&Cn(g)==_e}var Ou=r0?pa(r0):My;function gs(g){return g===n}function kx(g){return Ir(g)&&ci(g)==ze}function H1(g){return Ir(g)&&Cn(g)==Y}var G1=ac(yp),kh=ac(function(g,j){return g<=j});function Sa(g){if(!g)return[];if(ni(g))return em(g)?Ba(g):ei(g);if(Vl&&g[Vl])return h0(g[Vl]());var j=ci(g),M=j==Q?ep:j==Le?tp:Fu;return M(g)}function zs(g){if(!g)return g===0?g:0;if(g=Xa(g),g===W||g===-1/0){var j=g<0?-1:1;return j*G}return g===g?g:0}function on(g){var j=zs(g),M=j%1;return j===j?M?j-M:j:0}function qs(g){return g?hs(on(g),0,le):0}function Xa(g){if(typeof g=="number")return g;if($i(g))return z;if(Er(g)){var j=typeof g.valueOf=="function"?g.valueOf():g;g=Er(j)?j+"":j}if(typeof g!="string")return g===0?g:+g;g=l0(g);var M=It.test(g);return M||On.test(g)?BN(g.slice(2),M?2:8):Nt.test(g)?z:+g}function W1(g){return Xi(g,ui(g))}function Du(g){return g?hs(on(g),-9007199254740991,ae):g===0?g:0}function Vn(g){return g==null?"":Qi(g)}var S_=rc(function(g,j){if(hr(j)||ni(j)){Xi(j,ii(j),g);return}for(var M in j)Un.call(j,M)&&Ql(g,M,j[M])}),Y1=rc(function(g,j){Xi(j,ui(j),g)}),tm=rc(function(g,j,M,U){Xi(j,ui(j),g,U)}),N_=rc(function(g,j,M,U){Xi(j,ii(j),g,U)}),__=wr(Gd);function C_(g,j){var M=ya(g);return j==null?M:lo(M,j)}var T_=dn(function(g,j){g=In(g);var M=-1,U=j.length,ne=U>2?j[2]:n;for(ne&&Fi(j[0],j[1],ne)&&(U=1);++M<U;)for(var xe=j[M],Te=ui(xe),Re=-1,We=Te.length;++Re<We;){var ht=Te[Re],pt=g[ht];(pt===n||ta(pt,au[ht])&&!Un.call(g,ht))&&(g[ht]=xe[ht])}return g}),K1=dn(function(g){return g.push(n,Xy),Vi(Oh,n,g)});function Mu(g,j){return a0(g,$t(j,3),Ci)}function Ah(g,j){return a0(g,$t(j,3),pu)}function Q1(g,j){return g==null?g:fu(g,$t(j,3),ui)}function k_(g,j){return g==null?g:Jl(g,$t(j,3),ui)}function Iu(g,j){return g&&Ci(g,$t(j,3))}function Eh(g,j){return g&&pu(g,$t(j,3))}function X1(g){return g==null?[]:Jo(g,ii(g))}function nm(g){return g==null?[]:Jo(g,ui(g))}function Ph(g,j,M){var U=g==null?n:Ga(g,j);return U===n?M:U}function Ax(g,j){return g!=null&&hh(g,j,Ey)}function Ru(g,j){return g!=null&&hh(g,j,E0)}var J1=sh(function(g,j,M){j!=null&&typeof j.toString!="function"&&(j=Mi.call(j)),g[j]=M},Xe(Ze)),Z1=sh(function(g,j,M){j!=null&&typeof j.toString!="function"&&(j=Mi.call(j)),Un.call(g,j)?g[j].push(M):g[j]=[M]},$t),A_=dn(Zl);function ii(g){return ni(g)?Ty(g):gp(g)}function ui(g){return ni(g)?Ty(g,!0):O0(g)}function E_(g,j){var M={};return j=$t(j,3),Ci(g,function(U,ne,xe){ds(M,j(U,ne,xe),U)}),M}function P_(g,j){var M={};return j=$t(j,3),Ci(g,function(U,ne,xe){ds(M,ne,j(U,ne,xe))}),M}var O_=rc(function(g,j,M){Qd(g,j,M)}),Oh=rc(function(g,j,M,U){Qd(g,j,M,U)}),rm=wr(function(g,j){var M={};if(g==null)return M;var U=!1;j=Cr(j,function(xe){return xe=ho(xe,g),U||(U=xe.length>1),xe}),Xi(g,Pp(g),M),U&&(M=_i(M,p|y|x,Y0));for(var ne=j.length;ne--;)eh(M,j[ne]);return M});function Ex(g,j){return Lu(g,Ch($t(j)))}var D_=wr(function(g,j){return g==null?{}:D0(g,j)});function Lu(g,j){if(g==null)return{};var M=Cr(Pp(g),function(U){return[U]});return j=$t(j),vp(g,M,function(U,ne){return j(U,ne[0])})}function M_(g,j,M){j=ho(j,g);var U=-1,ne=j.length;for(ne||(ne=1,g=n);++U<ne;){var xe=g==null?n:g[Gn(j[U])];xe===n&&(U=ne,xe=M),g=ms(xe)?xe.call(g):xe}return g}function ej(g,j,M){return g==null?g:gu(g,j,M)}function tj(g,j,M,U){return U=typeof U=="function"?U:n,g==null?g:gu(g,j,M,U)}var Px=ch(ii),Ox=ch(ui);function Dx(g,j,M){var U=tn(g),ne=U||dl(g)||Ou(g);if(j=$t(j,4),M==null){var xe=g&&g.constructor;ne?M=U?new xe:[]:Er(g)?M=ms(xe)?ya(Id(g)):{}:M={}}return(ne?$a:Ci)(g,function(Te,Re,We){return j(M,Te,Re,We)}),M}function nj(g,j){return g==null?!0:eh(g,j)}function im(g,j,M){return g==null?g:Uy(g,j,rh(M))}function I_(g,j,M,U){return U=typeof U=="function"?U:n,g==null?g:Uy(g,j,rh(M),U)}function Fu(g){return g==null?[]:Jf(g,ii(g))}function Mx(g){return g==null?[]:Jf(g,ui(g))}function Ix(g,j,M){return M===n&&(M=j,j=n),M!==n&&(M=Xa(M),M=M===M?M:0),j!==n&&(j=Xa(j),j=j===j?j:0),hs(Xa(g),j,M)}function am(g,j,M){return j=zs(j),M===n?(M=j,j=0):M=zs(M),g=Xa(g),P0(g,j,M)}function Rx(g,j,M){if(M&&typeof M!="boolean"&&Fi(g,j,M)&&(j=M=n),M===n&&(typeof j=="boolean"?(M=j,j=n):typeof g=="boolean"&&(M=g,g=n)),g===n&&j===n?(g=0,j=1):(g=zs(g),j===n?(j=g,g=0):j=zs(j)),g>j){var U=g;g=j,j=U}if(M||g%1||j%1){var ne=wy();return Tr(g+ne*(j-g+Od("1e-"+((ne+"").length-1))),j)}return jp(g,j)}var rj=Li(function(g,j,M){return j=j.toLowerCase(),g+(M?sm(j):j)});function sm(g){return w(Vn(g).toLowerCase())}function jo(g){return g=Vn(g),g&&g.replace(ha,Zf).replace(ro,"")}function hl(g,j,M){g=Vn(g),j=Qi(j);var U=g.length;M=M===n?U:hs(on(M),0,U);var ne=M;return M-=j.length,M>=0&&g.slice(M,ne)==j}function fl(g){return g=Vn(g),g&&Tt.test(g)?g.replace(Ce,c0):g}function Dh(g){return g=Vn(g),g&&wn.test(g)?g.replace(_n,"\\$&"):g}var Mh=Li(function(g,j,M){return g+(M?"-":"")+j.toLowerCase()}),pl=Li(function(g,j,M){return g+(M?" ":"")+j.toLowerCase()}),R_=va("toLowerCase");function ij(g,j,M){g=Vn(g),j=on(j);var U=j?Os(g):0;if(!j||U>=j)return g;var ne=(j-U)/2;return lh(ao(ne),M)+g+lh(lu(ne),M)}function Ih(g,j,M){g=Vn(g),j=on(j);var U=j?Os(g):0;return j&&U<j?g+lh(j-U,M):g}function L_(g,j,M){g=Vn(g),j=on(j);var U=j?Os(g):0;return j&&U<j?lh(j-U,M)+g:g}function aj(g,j,M){return M||j==null?j=0:j&&(j=+j),Gl(Vn(g).replace(oi,""),j||0)}function om(g,j,M){return(M?Fi(g,j,M):j===n)?j=1:j=on(j),zy(Vn(g),j)}function sj(){var g=arguments,j=Vn(g[0]);return g.length<3?j:j.replace(g[1],g[2])}var F_=Li(function(g,j,M){return g+(M?"_":"")+j.toLowerCase()});function lm(g,j,M){return M&&typeof M!="number"&&Fi(g,j,M)&&(j=M=n),M=M===n?le:M>>>0,M?(g=Vn(g),g&&(typeof j=="string"||j!=null&&!Zp(j))&&(j=Qi(j),!j&&Vo(g))?Zo(Ba(g),0,M):g.split(j,M)):[]}var cm=Li(function(g,j,M){return g+(M?" ":"")+w(j)});function oj(g,j,M){return g=Vn(g),M=M==null?0:hs(on(M),0,g.length),j=Qi(j),g.slice(M,M+j.length)==j}function Rh(g,j,M){var U=de.templateSettings;M&&Fi(g,j,M)&&(j=n),g=Vn(g),j=tm({},j,U,Ap);var ne=tm({},j.imports,U.imports,Ap),xe=ii(ne),Te=Jf(ne,xe),Re,We,ht=0,pt=j.interpolate||no,gt="__p += '",At=np((j.escape||no).source+"|"+pt.source+"|"+(pt===Ct?it:no).source+"|"+(j.evaluate||no).source+"|$","g"),Rt="//# sourceURL="+(Un.call(j,"sourceURL")?(j.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qb+"]")+`
`;g.replace(At,function(Xt,Tn,Ln,ys,Na,xs){return Ln||(Ln=ys),gt+=g.slice(ht,xs).replace(_d,u0),Tn&&(Re=!0,gt+=`' +
__e(`+Tn+`) +
'`),Na&&(We=!0,gt+=`';
`+Na+`;
__p += '`),Ln&&(gt+=`' +
((__t = (`+Ln+`)) == null ? '' : __t) +
'`),ht=xs+Xt.length,Xt}),gt+=`';
`;var Qt=Un.call(j,"variable")&&j.variable;if(!Qt)gt=`with (obj) {
`+gt+`
}
`;else if(Nd.test(Qt))throw new Kt(l);gt=(We?gt.replace(et,""):gt).replace(ut,"$1").replace(_t,"$1;"),gt="function("+(Qt||"obj")+`) {
`+(Qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Re?", __e = _.escape":"")+(We?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+gt+`return __p
}`;var yn=R(function(){return Mn(xe,Rt+"return "+gt).apply(n,Te)});if(yn.source=gt,ri(yn))throw yn;return yn}function Lx(g){return Vn(g).toLowerCase()}function um(g){return Vn(g).toUpperCase()}function lj(g,j,M){if(g=Vn(g),g&&(M||j===n))return l0(g);if(!g||!(j=Qi(j)))return g;var U=Ba(g),ne=Ba(j),xe=nu(U,ne),Te=ru(U,ne)+1;return Zo(U,xe,Te).join("")}function $_(g,j,M){if(g=Vn(g),g&&(M||j===n))return g.slice(0,yy(g)+1);if(!g||!(j=Qi(j)))return g;var U=Ba(g),ne=ru(U,Ba(j))+1;return Zo(U,0,ne).join("")}function dm(g,j,M){if(g=Vn(g),g&&(M||j===n))return g.replace(oi,"");if(!g||!(j=Qi(j)))return g;var U=Ba(g),ne=nu(U,Ba(j));return Zo(U,ne).join("")}function u(g,j){var M=$,U=L;if(Er(j)){var ne="separator"in j?j.separator:ne;M="length"in j?on(j.length):M,U="omission"in j?Qi(j.omission):U}g=Vn(g);var xe=g.length;if(Vo(g)){var Te=Ba(g);xe=Te.length}if(M>=xe)return g;var Re=M-Os(U);if(Re<1)return U;var We=Te?Zo(Te,0,Re).join(""):g.slice(0,Re);if(ne===n)return We+U;if(Te&&(Re+=We.length-Re),Zp(ne)){if(g.slice(Re).search(ne)){var ht,pt=We;for(ne.global||(ne=np(ne.source,Vn(St.exec(ne))+"g")),ne.lastIndex=0;ht=ne.exec(pt);)var gt=ht.index;We=We.slice(0,gt===n?Re:gt)}}else if(g.indexOf(Qi(ne),Re)!=Re){var At=We.lastIndexOf(ne);At>-1&&(We=We.slice(0,At))}return We+U}function h(g){return g=Vn(g),g&&lt.test(g)?g.replace(vt,p0):g}var m=Li(function(g,j,M){return g+(M?" ":"")+j.toUpperCase()}),w=va("toUpperCase");function A(g,j,M){return g=Vn(g),j=M?n:j,j===n?d0(g)?XN(g):GN(g):g.match(j)||[]}var R=dn(function(g,j){try{return Vi(g,n,j)}catch(M){return ri(M)?M:new Kt(M)}}),J=wr(function(g,j){return $a(j,function(M){M=Gn(M),ds(g,M,cl(g[M],g))}),g});function he(g){var j=g==null?0:g.length,M=$t();return g=j?Cr(g,function(U){if(typeof U[1]!="function")throw new ga(o);return[M(U[0]),U[1]]}):[],dn(function(U){for(var ne=-1;++ne<j;){var xe=g[ne];if(Vi(xe[0],this,U))return Vi(xe[1],this,U)}})}function ke(g){return k0(_i(g,p))}function Xe(g){return function(){return g}}function ot(g,j){return g==null||g!==g?j:g}var ft=Is(),tt=Is(!0);function Ze(g){return g}function Ht(g){return Iy(typeof g=="function"?g:_i(g,p))}function Vt(g){return Ly(_i(g,p))}function ir(g,j){return xp(g,_i(j,p))}var He=dn(function(g,j){return function(M){return Zl(M,g,j)}}),Fe=dn(function(g,j){return function(M){return Zl(g,M,j)}});function Qe(g,j,M){var U=ii(j),ne=Jo(j,U);M==null&&!(Er(j)&&(ne.length||!U.length))&&(M=j,j=g,g=this,ne=Jo(j,ii(j)));var xe=!(Er(M)&&"chain"in M)||!!M.chain,Te=ms(g);return $a(ne,function(Re){var We=j[Re];g[Re]=We,Te&&(g.prototype[Re]=function(){var ht=this.__chain__;if(xe||ht){var pt=g(this.__wrapped__),gt=pt.__actions__=ei(this.__actions__);return gt.push({func:We,args:arguments,thisArg:g}),pt.__chain__=ht,pt}return We.apply(g,io([this.value()],arguments))})}),g}function dt(){return Hr._===this&&(Hr._=su),this}function Pt(){}function gn(g){return g=on(g),dn(function(j){return Fy(j,g)})}var Lt=oh(Cr),Gt=oh(i0),di=oh(fy);function Rn(g){return Ip(g)?Kf(Gn(g)):M0(g)}function ml(g){return function(j){return g==null?n:Ga(g,j)}}var B_=el(),vG=el(!0);function z_(){return[]}function q_(){return!1}function bG(){return{}}function jG(){return""}function wG(){return!0}function SG(g,j){if(g=on(g),g<1||g>ae)return[];var M=le,U=Tr(g,le);j=$t(j),g-=le;for(var ne=Uo(U,j);++M<g;)j(M);return ne}function NG(g){return tn(g)?Cr(g,Gn):$i(g)?[g]:ei(Fs(Vn(g)))}function _G(g){var j=++ls;return Vn(g)+j}var CG=yu(function(g,j){return g+j},0),TG=kp("ceil"),kG=yu(function(g,j){return g/j},1),AG=kp("floor");function EG(g){return g&&g.length?fs(g,Ze,Wd):n}function PG(g,j){return g&&g.length?fs(g,$t(j,2),Wd):n}function OG(g){return s0(g,Ze)}function DG(g,j){return s0(g,$t(j,2))}function MG(g){return g&&g.length?fs(g,Ze,yp):n}function IG(g,j){return g&&g.length?fs(g,$t(j,2),yp):n}var RG=yu(function(g,j){return g*j},1),LG=kp("round"),FG=yu(function(g,j){return g-j},0);function $G(g){return g&&g.length?Xf(g,Ze):0}function BG(g,j){return g&&g.length?Xf(g,$t(j,2)):0}return de.after=h_,de.ary=O1,de.assign=S_,de.assignIn=Y1,de.assignInWith=tm,de.assignWith=N_,de.at=__,de.before=wh,de.bind=cl,de.bindAll=J,de.bindKey=Gp,de.castArray=g_,de.chain=Au,de.chunk=a_,de.compact=a1,de.concat=s1,de.cond=he,de.conforms=ke,de.constant=Xe,de.countBy=Eu,de.create=C_,de.curry=Sh,de.curryRight=Wp,de.debounce=ul,de.defaults=T_,de.defaultsDeep=K1,de.defer=Bs,de.delay=Nh,de.difference=Ar,de.differenceBy=Ji,de.differenceWith=yo,de.drop=o1,de.dropRight=l1,de.dropRightWhile=s_,de.dropWhile=rx,de.fill=ba,de.filter=b1,de.flatMap=yx,de.flatMapDeep=c_,de.flatMapDepth=u_,de.flatten=Zi,de.flattenDeep=c1,de.flattenDepth=rl,de.flip=f_,de.flow=ft,de.flowRight=tt,de.fromPairs=oc,de.functions=X1,de.functionsIn=nm,de.groupBy=S1,de.initial=sx,de.intersection=$s,de.intersectionBy=u1,de.intersectionWith=ju,de.invert=J1,de.invertBy=Z1,de.invokeMap=Up,de.iteratee=Ht,de.keyBy=N1,de.keys=ii,de.keysIn=ui,de.map=jh,de.mapKeys=E_,de.mapValues=P_,de.matches=Vt,de.matchesProperty=ir,de.memoize=_h,de.merge=O_,de.mergeWith=Oh,de.method=He,de.methodOf=Fe,de.mixin=Qe,de.negate=Ch,de.nthArg=gn,de.omit=rm,de.omitBy=Ex,de.once=D1,de.orderBy=_1,de.over=Lt,de.overArgs=M1,de.overEvery=Gt,de.overSome=di,de.partial=bx,de.partialRight=Yp,de.partition=C1,de.pick=D_,de.pickBy=Lu,de.property=Rn,de.propertyOf=ml,de.pull=h1,de.pullAll=Su,de.pullAllBy=f1,de.pullAllWith=zp,de.pullAt=p1,de.range=B_,de.rangeRight=vG,de.rearg=I1,de.reject=Vp,de.remove=o_,de.rest=R1,de.reverse=ox,de.sampleSize=E1,de.set=ej,de.setWith=tj,de.shuffle=fr,de.slice=Jn,de.sortBy=P1,de.sortedUniq=Nu,de.sortedUniqBy=lx,de.split=lm,de.spread=p_,de.tail=vo,de.take=$r,de.takeRight=al,de.takeRightWhile=lc,de.takeWhile=cx,de.tap=px,de.throttle=jx,de.thru=ki,de.toArray=Sa,de.toPairs=Px,de.toPairsIn=Ox,de.toPath=NG,de.toPlainObject=W1,de.transform=Dx,de.unary=wx,de.union=Ka,de.unionBy=_u,de.unionWith=vh,de.uniq=ea,de.uniqBy=ux,de.uniqWith=dx,de.unset=nj,de.unzip=Cu,de.unzipWith=bh,de.update=im,de.updateWith=I_,de.values=Fu,de.valuesIn=Mx,de.without=sl,de.words=A,de.wrap=m_,de.xor=xi,de.xorBy=ol,de.xorWith=Tu,de.zip=ku,de.zipObject=hx,de.zipObjectDeep=fx,de.zipWith=m1,de.entries=Px,de.entriesIn=Ox,de.extend=Y1,de.extendWith=tm,Qe(de,de),de.add=CG,de.attempt=R,de.camelCase=rj,de.capitalize=sm,de.ceil=TG,de.clamp=Ix,de.clone=Th,de.cloneDeep=L1,de.cloneDeepWith=jn,de.cloneWith=y_,de.conformsTo=Sx,de.deburr=jo,de.defaultTo=ot,de.divide=kG,de.endsWith=hl,de.eq=ta,de.escape=fl,de.escapeRegExp=Dh,de.every=v1,de.find=j1,de.findIndex=Ya,de.findKey=Mu,de.findLast=gx,de.findLastIndex=ix,de.findLastKey=Ah,de.floor=AG,de.forEach=w1,de.forEachRight=xx,de.forIn=Q1,de.forInRight=k_,de.forOwn=Iu,de.forOwnRight=Eh,de.get=Ph,de.gt=Nx,de.gte=F1,de.has=Ax,de.hasIn=Ru,de.head=xo,de.identity=Ze,de.includes=Pu,de.indexOf=ax,de.inRange=am,de.invoke=A_,de.isArguments=bo,de.isArray=tn,de.isArrayBuffer=Kp,de.isArrayLike=ni,de.isArrayLikeObject=Br,de.isBoolean=x_,de.isBuffer=dl,de.isDate=$1,de.isElement=B1,de.isEmpty=Qp,de.isEqual=rr,de.isEqualWith=_x,de.isError=ri,de.isFinite=v_,de.isFunction=ms,de.isInteger=Xp,de.isLength=cc,de.isMap=Jp,de.isMatch=Cx,de.isMatchWith=b_,de.isNaN=z1,de.isNative=j_,de.isNil=w_,de.isNull=q1,de.isNumber=U1,de.isObject=Er,de.isObjectLike=Ir,de.isPlainObject=Qa,de.isRegExp=Zp,de.isSafeInteger=Tx,de.isSet=V1,de.isString=em,de.isSymbol=$i,de.isTypedArray=Ou,de.isUndefined=gs,de.isWeakMap=kx,de.isWeakSet=H1,de.join=xh,de.kebabCase=Mh,de.last=Ti,de.lastIndexOf=wu,de.lowerCase=pl,de.lowerFirst=R_,de.lt=G1,de.lte=kh,de.max=EG,de.maxBy=PG,de.mean=OG,de.meanBy=DG,de.min=MG,de.minBy=IG,de.stubArray=z_,de.stubFalse=q_,de.stubObject=bG,de.stubString=jG,de.stubTrue=wG,de.multiply=RG,de.nth=d1,de.noConflict=dt,de.noop=Pt,de.now=Hp,de.pad=ij,de.padEnd=Ih,de.padStart=L_,de.parseInt=aj,de.random=Rx,de.reduce=T1,de.reduceRight=k1,de.repeat=om,de.replace=sj,de.result=M_,de.round=LG,de.runInContext=Ve,de.sample=A1,de.size=vx,de.snakeCase=F_,de.some=d_,de.sortedIndex=mr,de.sortedIndexBy=bn,de.sortedIndexOf=Dn,de.sortedLastIndex=Zn,de.sortedLastIndexBy=ja,de.sortedLastIndexOf=il,de.startCase=cm,de.startsWith=oj,de.subtract=FG,de.sum=$G,de.sumBy=BG,de.template=Rh,de.times=SG,de.toFinite=zs,de.toInteger=on,de.toLength=qs,de.toLower=Lx,de.toNumber=Xa,de.toSafeInteger=Du,de.toString=Vn,de.toUpper=um,de.trim=lj,de.trimEnd=$_,de.trimStart=dm,de.truncate=u,de.unescape=h,de.uniqueId=_G,de.upperCase=m,de.upperFirst=w,de.each=w1,de.eachRight=xx,de.first=xo,Qe(de,function(){var g={};return Ci(de,function(j,M){Un.call(de.prototype,M)||(g[M]=j)}),g}(),{chain:!1}),de.VERSION=i,$a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){de[g].placeholder=de}),$a(["drop","take"],function(g,j){mn.prototype[g]=function(M){M=M===n?1:jr(on(M),0);var U=this.__filtered__&&!j?new mn(this):this.clone();return U.__filtered__?U.__takeCount__=Tr(M,U.__takeCount__):U.__views__.push({size:Tr(M,le),type:g+(U.__dir__<0?"Right":"")}),U},mn.prototype[g+"Right"]=function(M){return this.reverse()[g](M).reverse()}}),$a(["filter","map","takeWhile"],function(g,j){var M=j+1,U=M==te||M==q;mn.prototype[g]=function(ne){var xe=this.clone();return xe.__iteratees__.push({iteratee:$t(ne,3),type:M}),xe.__filtered__=xe.__filtered__||U,xe}}),$a(["head","last"],function(g,j){var M="take"+(j?"Right":"");mn.prototype[g]=function(){return this[M](1).value()[0]}}),$a(["initial","tail"],function(g,j){var M="drop"+(j?"":"Right");mn.prototype[g]=function(){return this.__filtered__?new mn(this):this[M](1)}}),mn.prototype.compact=function(){return this.filter(Ze)},mn.prototype.find=function(g){return this.filter(g).head()},mn.prototype.findLast=function(g){return this.reverse().find(g)},mn.prototype.invokeMap=dn(function(g,j){return typeof g=="function"?new mn(this):this.map(function(M){return Zl(M,g,j)})}),mn.prototype.reject=function(g){return this.filter(Ch($t(g)))},mn.prototype.slice=function(g,j){g=on(g);var M=this;return M.__filtered__&&(g>0||j<0)?new mn(M):(g<0?M=M.takeRight(-g):g&&(M=M.drop(g)),j!==n&&(j=on(j),M=j<0?M.dropRight(-j):M.take(j-g)),M)},mn.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},mn.prototype.toArray=function(){return this.take(le)},Ci(mn.prototype,function(g,j){var M=/^(?:filter|find|map|reject)|While$/.test(j),U=/^(?:head|last)$/.test(j),ne=de[U?"take"+(j=="last"?"Right":""):j],xe=U||/^find/.test(j);ne&&(de.prototype[j]=function(){var Te=this.__wrapped__,Re=U?[1]:arguments,We=Te instanceof mn,ht=Re[0],pt=We||tn(Te),gt=function(Tn){var Ln=ne.apply(de,io([Tn],Re));return U&&At?Ln[0]:Ln};pt&&M&&typeof ht=="function"&&ht.length!=1&&(We=pt=!1);var At=this.__chain__,Rt=!!this.__actions__.length,Qt=xe&&!At,yn=We&&!Rt;if(!xe&&pt){Te=yn?Te:new mn(this);var Xt=g.apply(Te,Re);return Xt.__actions__.push({func:ki,args:[gt],thisArg:n}),new Wi(Xt,At)}return Qt&&yn?g.apply(this,Re):(Xt=this.thru(gt),Qt?U?Xt.value()[0]:Xt.value():Xt)})}),$a(["pop","push","shift","sort","splice","unshift"],function(g){var j=rp[g],M=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",U=/^(?:pop|shift)$/.test(g);de.prototype[g]=function(){var ne=arguments;if(U&&!this.__chain__){var xe=this.value();return j.apply(tn(xe)?xe:[],ne)}return this[M](function(Te){return j.apply(tn(Te)?Te:[],ne)})}}),Ci(mn.prototype,function(g,j){var M=de[j];if(M){var U=M.name+"";Un.call(Va,U)||(Va[U]=[]),Va[U].push({name:j,func:M})}}),Va[Fr(n,_).name]=[{name:"wrapper",func:n}],mn.prototype.clone=qd,mn.prototype.reverse=op,mn.prototype.value=Yl,de.prototype.at=g1,de.prototype.chain=wa,de.prototype.commit=y1,de.prototype.next=x1,de.prototype.plant=ll,de.prototype.reverse=qp,de.prototype.toJSON=de.prototype.valueOf=de.prototype.value=mx,de.prototype.first=de.prototype.head,Vl&&(de.prototype[Vl]=l_),de},Go=iu();qo?((qo.exports=Go)._=Go,Jc._=Go):Hr._=Go}).call(kme)}(dv,dv.exports)),dv.exports}var u9=Ame();class Eme{constructor(e){gr(this,"sampleRate",24e3);gr(this,"bufferSize",7680);gr(this,"audioQueue",[]);gr(this,"isPlaying",!1);gr(this,"isStreamComplete",!1);gr(this,"checkInterval",null);gr(this,"scheduledTime",0);gr(this,"initialBufferTime",.1);gr(this,"gainNode");gr(this,"source");gr(this,"endOfQueueAudioSource",null);gr(this,"onComplete",()=>{});this.context=e,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(e,n,i){let a=Cj.get(this.context);if(a&&a[e])return a[e].handlers.push(i),Promise.resolve(this);a||(Cj.set(this.context,{}),a=Cj.get(this.context)),a[e]={handlers:[i]};const s=KE(e,n);await this.context.audioWorklet.addModule(s);const o=new AudioWorkletNode(this.context,e);return a[e].node=o,this}_processPCM16Chunk(e){const n=new Float32Array(e.length/2),i=new DataView(e.buffer);for(let a=0;a<e.length/2;a++)try{const s=i.getInt16(a*2,!0);n[a]=s/32768}catch(s){console.error(s)}return n}addPCM16(e){this.isStreamComplete=!1;let n=this._processPCM16Chunk(e);for(;n.length>=this.bufferSize;){const i=n.slice(0,this.bufferSize);this.audioQueue.push(i),n=n.slice(this.bufferSize)}n.length>0&&this.audioQueue.push(n),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){const n=this.context.createBuffer(1,e.length,this.sampleRate);return n.getChannelData(0).set(e),n}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const n=this.audioQueue.shift(),i=this.createAudioBuffer(n),a=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=a,a.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===a&&(this.endOfQueueAudioSource=null,this.onComplete())}),a.buffer=i,a.connect(this.gainNode);const s=Cj.get(this.context);s&&Object.entries(s).forEach(([,l])=>{const{node:c,handlers:d}=l;c&&(a.connect(c),c.port.onmessage=function(f){d.forEach(p=>{p.call(c.port,f)})},c.connect(this.context.destination))});const o=Math.max(this.scheduledTime,this.context.currentTime);a.start(o),this.scheduledTime=o+i.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const n=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,n-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function Pme(){const[t,e]=b.useState(null),[n,i]=b.useState(!1);return b.useEffect(()=>{const l=()=>{i(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"screen",start:async()=>{const l=await navigator.mediaDevices.getDisplayMedia({video:!0});return e(l),i(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),i(!1))},isStreaming:n,stream:t}}function Ome(){const[t,e]=b.useState(null),[n,i]=b.useState(!1);return b.useEffect(()=>{const l=()=>{i(!1),e(null)};if(t)return t.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{t.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[t]),{type:"webcam",start:async()=>{const l=await navigator.mediaDevices.getUserMedia({video:!0});return e(l),i(!0),l},stop:()=>{t&&(t.getTracks().forEach(l=>l.stop()),e(null),i(!1))},isStreaming:n,stream:t}}class Dme extends l9{constructor(n){super();gr(this,"client");gr(this,"_status","disconnected");gr(this,"_session",null);gr(this,"_model",null);gr(this,"config",null);this.client=new mU(n),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(n,i){const a={date:new Date,type:n,message:i};this.emit("log",a)}async connect(n,i){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=i,this._model=n;const a={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:n,config:i,callbacks:a})}catch(s){return console.error("Error connecting to GenAI Live:",s),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var n;return this.session?((n=this.session)==null||n.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(n){this.log("server.error",n.message),this.emit("error",n)}onclose(n){this.log("server.close",`disconnected ${n.reason?`with reason: ${n.reason}`:""}`),this.emit("close",n)}async onmessage(n){var i;if(n.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(n.toolCall){this.log("server.toolCall",n),this.emit("toolcall",n.toolCall);return}if(n.toolCallCancellation){this.log("server.toolCallCancellation",n),this.emit("toolcallcancellation",n.toolCallCancellation);return}if(n.serverContent){const{serverContent:a}=n;if("interrupted"in a){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in a&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in a){let s=((i=a.modelTurn)==null?void 0:i.parts)||[];const o=s.filter(f=>{var p;return f.inlineData&&((p=f.inlineData.mimeType)==null?void 0:p.startsWith("audio/pcm"))}),l=o.map(f=>{var p;return(p=f.inlineData)==null?void 0:p.data}),c=u9.difference(s,o);if(l.forEach(f=>{if(f){const p=jme(f);this.emit("audio",p),this.log("server.audio",`buffer (${p.byteLength})`)}}),!c.length)return;s=c;const d={modelTurn:{parts:s}};this.emit("content",d),this.log("server.content",n)}}else console.log("received unmatched message",n)}sendRealtimeInput(n){var o;let i=!1,a=!1;for(const l of n)if((o=this.session)==null||o.sendRealtimeInput({media:l}),l.mimeType.includes("audio")&&(i=!0),l.mimeType.includes("image")&&(a=!0),i&&a)break;const s=i&&a?"audio + video":i?"audio":a?"video":"unknown";this.log("client.realtimeInput",s)}sendToolResponse(n){var i;n.functionResponses&&n.functionResponses.length&&((i=this.session)==null||i.sendToolResponse({functionResponses:n.functionResponses}),this.log("client.toolResponse",n))}send(n,i=!0){var a;(a=this.session)==null||a.sendClientContent({turns:n,turnComplete:i}),this.log("client.send",{turns:Array.isArray(n)?n:[n],turnComplete:i})}}function Mme(t){const e=b.useMemo(()=>new Dme(t),[t]),n=b.useRef(null),[i,a]=b.useState("models/gemini-2.5-flash-live-preview"),[s,o]=b.useState({}),[l,c]=b.useState(!1),[d,f]=b.useState(0),[p,y]=b.useState(null);b.useEffect(()=>{n.current||s9({id:"audio-out"}).then(S=>{n.current=new Eme(S),n.current.addWorklet("vumeter-out",o9,N=>{f(N.data.volume)}).then(()=>{})})},[n]),b.useEffect(()=>{const S=()=>{c(!0)},N=()=>{c(!1)},_=k=>{console.error("error",k)},T=()=>{var k;return(k=n.current)==null?void 0:k.stop()},C=k=>{var P;return(P=n.current)==null?void 0:P.addPCM16(new Uint8Array(k))},O=k=>{if(console.log("Received content event:",k),k.modelTurn&&k.modelTurn.parts){const P=k.modelTurn.parts.filter(I=>"text"in I&&I.text);if(P.length>0){const I=P.map(F=>F.text).join(" ");y(I),console.log("AI Summary received:",I)}}};return e.on("error",_).on("open",S).on("close",N).on("interrupted",T).on("audio",C).on("content",O),()=>{e.off("error",_).off("open",S).off("close",N).off("interrupted",T).off("audio",C).off("content",O).disconnect()}},[e]);const x=b.useCallback(async()=>{if(!s)throw new Error("config has not been set");e.disconnect(),await e.connect(i,s)},[e,s,i]),v=b.useCallback(async()=>{e.disconnect(),c(!1)},[c,e]);return{client:e,config:s,setConfig:o,model:i,setModel:a,connected:l,connect:x,disconnect:v,volume:d,aiSummary:p}}const d9=b.createContext(void 0),ZS=({options:t,children:e})=>{const n=Mme(t);return r.jsx(d9.Provider,{value:n,children:e})},gd=()=>{const t=b.useContext(d9);if(!t)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return t};function Ime(){const{config:t,setConfig:e}=gd(),[n,i]=b.useState({value:"audio",label:"audio"}),a=b.useCallback(s=>{e({...t,responseModalities:[s==="audio"?ld.AUDIO:ld.TEXT]})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),r.jsx(a9,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:n,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:s=>{i(s),s&&(s.value==="audio"||s.value==="text")&&a(s.value)}})]})}const n3=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function Rme(){const{config:t,setConfig:e}=gd();b.useEffect(()=>{var l,c,d;const s=((d=(c=(l=t.speechConfig)==null?void 0:l.voiceConfig)==null?void 0:c.prebuiltVoiceConfig)==null?void 0:d.voiceName)||"Atari02";i({value:s,label:s})},[t]);const[n,i]=b.useState(n3[5]),a=b.useCallback(s=>{e({...t,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}}})},[t,e]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),r.jsx(a9,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:n,defaultValue:n,options:n3,onChange:s=>{i(s),s&&a(s.value)}})]})}function Lme(){const[t,e]=b.useState(!1),{config:n,setConfig:i,connected:a}=gd(),s=b.useMemo(()=>Array.isArray(n.tools)?n.tools.filter(d=>Array.isArray(d.functionDeclarations)).map(d=>d.functionDeclarations).filter(d=>!!d).flat():[],[n]),o=b.useMemo(()=>{var d;return n.systemInstruction?typeof n.systemInstruction=="string"?n.systemInstruction:Array.isArray(n.systemInstruction)?n.systemInstruction.map(f=>typeof f=="string"?f:f.text).join(`
`):typeof n.systemInstruction=="object"&&"parts"in n.systemInstruction&&((d=n.systemInstruction.parts)==null?void 0:d.map(f=>f.text).join(`
`))||"":""},[n]),l=b.useCallback(d=>{const f={...n,systemInstruction:d.target.value};i(f)},[n,i]),c=b.useCallback((d,f)=>{var y;const p={...n,tools:((y=n.tools)==null?void 0:y.map(x=>{const v=x;return Array.isArray(v.functionDeclarations)?{...x,functionDeclarations:v.functionDeclarations.map(S=>S.name===d?{...S,description:f}:S)}:x}))||[]};i(p)},[n,i]);return r.jsxs("div",{className:"settings-dialog",children:[r.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>e(!t),children:"settings"}),r.jsx("dialog",{className:"dialog",style:{display:t?"block":"none"},children:r.jsxs("div",{className:`dialog-container ${a?"disabled":""}`,children:[a&&r.jsx("div",{className:"connected-indicator",children:r.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),r.jsxs("div",{className:"mode-selectors",children:[r.jsx(Ime,{}),r.jsx(Rme,{})]}),r.jsx("h3",{children:"System Instructions"}),r.jsx("textarea",{className:"system",onChange:l,value:o}),r.jsx("h4",{children:"Function declarations"}),r.jsx("div",{className:"function-declarations",children:r.jsx("div",{className:"fd-rows",children:s.map((d,f)=>{var p;return r.jsxs("div",{className:"fd-row",children:[r.jsx("span",{className:"fd-row-name",children:d.name}),r.jsx("span",{className:"fd-row-args",children:Object.keys(((p=d.parameters)==null?void 0:p.properties)||{}).map((y,x)=>r.jsx("span",{children:y},x))}),r.jsx("input",{className:"fd-row-description",type:"text",defaultValue:d.description,onBlur:y=>c(d.name,y.target.value)},`fd-${d.description}`)]},`function-${f}`)})})})]})})]})}const r3=b.memo(({isStreaming:t,onIcon:e,offIcon:n,start:i,stop:a})=>t?r.jsx("button",{className:"action-button",onClick:a,children:r.jsx("span",{className:"material-symbols-outlined",children:e})}):r.jsx("button",{className:"action-button",onClick:i,children:r.jsx("span",{className:"material-symbols-outlined",children:n})}));function Fme({videoRef:t,children:e,onVideoStreamChange:n=()=>{},supportsVideo:i,enableEditingSettings:a}){const s=[Ome(),Pme()],[o,l]=b.useState(null),[c,d]=s,[f,p]=b.useState(0),[y]=b.useState(()=>new c9),[x,v]=b.useState(!1),S=b.useRef(null),N=b.useRef(null),{client:_,connected:T,connect:C,disconnect:O,volume:k}=gd();b.useEffect(()=>{!T&&N.current&&N.current.focus()},[T]),b.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(f*200,8))}px`)},[f]),b.useEffect(()=>{const I=F=>{_.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:F}])};return T&&!x&&y?y.on("data",I).on("volume",p).start():y.stop(),()=>{y.off("data",I).off("volume",p)}},[T,_,x,y]),b.useEffect(()=>{t.current&&(t.current.srcObject=o);let I=-1;function F(){const B=t.current,$=S.current;if(!B||!$)return;const L=$.getContext("2d");if($.width=B.videoWidth*.25,$.height=B.videoHeight*.25,$.width+$.height>0){L.drawImage(B,0,0,$.width,$.height);const V=$.toDataURL("image/jpeg",1),H=V.slice(V.indexOf(",")+1,1/0);_.sendRealtimeInput([{mimeType:"image/jpeg",data:H}])}T&&(I=window.setTimeout(F,1e3/.5))}return T&&o!==null&&requestAnimationFrame(F),()=>{clearTimeout(I)}},[T,o,_,t]);const P=I=>async()=>{if(I){const F=await I.start();l(F),n(F)}else l(null),n(null);s.filter(F=>F!==I).forEach(F=>F.stop())};return r.jsxs("section",{className:"control-tray",children:[r.jsx("canvas",{style:{display:"none"},ref:S}),r.jsxs("nav",{className:nd("actions-nav",{disabled:!T}),children:[r.jsx("button",{className:nd("action-button mic-button",{recording:!x&&T}),onClick:()=>v(!x),children:x?r.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):r.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),r.jsx("div",{className:"action-button no-action outlined",children:r.jsx(Tme,{volume:k,active:T,hover:!1})}),i&&r.jsxs(r.Fragment,{children:[r.jsx(r3,{isStreaming:d.isStreaming,start:P(d),stop:P(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),r.jsx(r3,{isStreaming:c.isStreaming,start:P(c),stop:P(),onIcon:"videocam_off",offIcon:"videocam"})]}),e]}),r.jsxs("div",{className:nd("connection-container",{connected:T}),children:[r.jsx("div",{className:"connection-button-container",children:r.jsx("button",{ref:N,className:nd("action-button connect-toggle",{connected:T}),onClick:T?O:C,children:r.jsx("span",{className:"material-symbols-outlined filled",children:T?"pause":"play_arrow"})})}),r.jsx("span",{className:"text-indicator",children:"Streaming"})]}),a?r.jsx(Lme,{}):""]})}const i3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:rg.OBJECT,properties:{summary:{type:rg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},$me=({patientData:t,tokenNumber:e})=>{const[n,i]=b.useState(""),{client:a,setConfig:s,setModel:o}=gd();return b.useEffect(()=>{o("models/gemini-2.5-flash-live-preview"),s({responseModalities:[ld.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[i3]}]})},[s,o]),b.useEffect(()=>{const l=c=>{if(!c.functionCalls)return;const d=c.functionCalls.find(f=>f.name===i3.name);if(d){const f=d.args.summary;i(f)}c.functionCalls.length&&setTimeout(()=>{var f;return a.sendToolResponse({functionResponses:(f=c.functionCalls)==null?void 0:f.map(p=>({response:{output:{success:!0}},id:p.id,name:p.name}))})},200)};return a.on("toolcall",l),()=>{a.off("toolcall",l)}},[a]),b.useEffect(()=>{if(n){const l=encodeURIComponent(n);e?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${e}&caseDetails=${l}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${l}`}},[n,e]),r.jsxs("div",{className:"hospital-reception",children:[r.jsx("h1",{children:"Newtons Ai"}),r.jsx("p",{children:"Newtons Ai"}),e&&r.jsxs("h2",{children:["Token Number: ",e]}),t&&r.jsxs("div",{children:[r.jsx("h2",{children:"Patient Details"}),r.jsx("pre",{children:JSON.stringify(t,null,2)})]}),n&&r.jsxs("div",{children:[r.jsx("h2",{children:"Case Summary (from Tool Call)"}),r.jsx("p",{children:n})]})]})},a3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function Bme(){if(!gU())return console.warn("No auth token found, using default Live API key."),a3;try{const e=await ue("/api/clinics/gemini-api-key");if(e.ok){const i=(await e.json()).geminiApiKey;if(i)return i}}catch(e){console.error("Failed to fetch clinic-specific Live API key:",e)}return console.warn("Clinic-specific Live API key not found or failed to fetch, using default."),a3}function zme(){const t=b.useRef(null),[e,n]=b.useState(null),[i,a]=b.useState(null);return b.useEffect(()=>{(async()=>{try{const o=await Bme();a({apiKey:o})}catch(o){console.error("Error setting Live API options:",o)}})()},[]),i?r.jsx("div",{className:"App",children:r.jsx(ZS,{options:i,children:r.jsx(qme,{videoRef:t,setVideoStream:n,videoStream:e})})}):r.jsx("div",{children:"Loading Live API settings..."})}const qme=({videoRef:t,setVideoStream:e,videoStream:n})=>{const[i,a]=b.useState(null),[s,o]=b.useState(null),{connected:l,client:c,connect:d,config:f,model:p}=gd(),[y,x]=b.useState(""),v=b.useRef(null),[S,N]=b.useState(!1);b.useEffect(()=>{const T=window.matchMedia("(prefers-color-scheme: dark)"),C=O=>{document.documentElement.setAttribute("data-theme",O.matches?"dark":"light")};return C(T),T.addEventListener("change",C),()=>T.removeEventListener("change",C)},[]),b.useEffect(()=>{const T=new URLSearchParams(window.location.search),C={};for(const[O,k]of T.entries())O==="token_number"?o(k):C[O]=k;a(C)},[]),b.useEffect(()=>{Object.keys(f).length>0&&p&&d()},[d,f,p]),b.useEffect(()=>{if(l&&i&&!S){const T=JSON.stringify(i,null,2);c.send([{text:T}]),x(""),N(!0)}},[l,i,c,S]),b.useEffect(()=>{i&&x(JSON.stringify(i,null,2))},[i]);const _=()=>{c.send([{text:y}]),x(""),v.current&&(v.current.innerText="")};return r.jsx("div",{className:"streaming-console",children:r.jsxs("main",{children:[r.jsxs("div",{className:"main-app-area",children:[r.jsx($me,{patientData:i,tokenNumber:s}),r.jsx("video",{className:nd("stream",{hidden:!t.current||!n}),ref:t,autoPlay:!0,playsInline:!0})]}),r.jsx("div",{className:nd("input-container",{disabled:!l}),children:r.jsxs("div",{className:"input-content",children:[r.jsx("textarea",{className:"input-area",ref:v,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),T.stopPropagation(),_())},onChange:T=>x(T.target.value),value:y}),r.jsx("span",{className:nd("input-content-placeholder",{hidden:y.length}),children:"Typesomething..."}),r.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:_,children:"send"})]})}),r.jsx(Fme,{videoRef:t,supportsVideo:!0,onVideoStreamChange:e,enableEditingSettings:!0})]})})},s3="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Ume=({volume:t,active:e})=>{const n=Array.from({length:5},(i,a)=>r.jsx("div",{className:`audio-bar ${e?"active":""}`,style:{height:e?`${Math.min(24,20+t*40*(1+Math.sin(a)*.3))}px`:"8px",animationDelay:`${a*.1}s`}},a));return r.jsx("div",{className:"audio-pulse",children:n})},Vme=b.forwardRef(({videoRef:t,supportsVideo:e,onVideoStreamChange:n,textInput:i,onSubmitTextInput:a},s)=>{var P;const{connected:o,connect:l,disconnect:c,client:d,volume:f}=gd(),[p,y]=b.useState(!1),[x,v]=b.useState(!1),[S,N]=b.useState(!1),[_]=b.useState(()=>new c9),T=async()=>{o?await c():(await l(),i.trim()&&a())};b.useEffect(()=>{const I=F=>{d.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:F}])};return o&&!p?_.on("data",I).start():_.stop(),()=>{_.off("data",I),_.stop()}},[o,d,p,_]);const C=b.useCallback(async()=>{if(x)k==null||k.getTracks().forEach(I=>I.stop()),n(null),v(!1);else try{const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),v(!0)}catch(I){console.error("Error accessing webcam:",I),v(!1)}},[x,n,t]),O=b.useCallback(async()=>{if(S)k==null||k.getTracks().forEach(I=>I.stop()),n(null),N(!1);else try{const I=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=I),n(I),N(!0)}catch(I){console.error("Error accessing screen share:",I),N(!1)}},[S,n,t]),k=(P=t.current)==null?void 0:P.srcObject;return b.useEffect(()=>()=>{k&&k.getTracks().forEach(I=>I.stop())},[k]),b.useImperativeHandle(s,()=>({handleConnect:T})),r.jsx("div",{className:"live-api-control-tray",children:r.jsxs("div",{className:"live-api-control-tray-inner",children:[r.jsxs("div",{className:"live-api-control-group",children:[r.jsx("button",{onClick:()=>y(!p),disabled:!o,className:`live-api-control-button ${o&&!p?"mic-active":"mic-inactive"}`,"aria-label":p?"Unmute microphone":"Mute microphone",children:p?r.jsx(UX,{className:"w-5 h-5"}):r.jsx(RS,{className:"w-5 h-5"})}),r.jsx("div",{className:"live-api-audio-pulse-container",children:r.jsx(Ume,{volume:f,active:o})}),e&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:O,disabled:!o,className:`live-api-control-button ${S?"video-active":"video-inactive"}`,"aria-label":S?"Stop screen share":"Start screen share",children:r.jsx(YX,{className:"w-5 h-5"})}),r.jsx("button",{onClick:C,disabled:!o,className:`live-api-control-button ${x?"video-active":"video-inactive"}`,"aria-label":x?"Turn off webcam":"Turn on webcam",children:r.jsx(eZ,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"live-api-control-group",children:[r.jsxs("div",{className:"live-api-status-indicator",children:[r.jsx("div",{className:`live-api-status-dot ${o?"connected":"disconnected"}`}),r.jsx("span",{className:"live-api-status-text",children:o?"Streaming":"Disconnected"})]}),r.jsx("button",{onClick:T,className:`live-api-connect-button ${o?"connected":"disconnected"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(iJ,{className:"w-5 h-5"}),r.jsx("span",{children:"Pause"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Vz,{className:"w-5 h-5"}),r.jsx("span",{children:"Start"})]})})]})]})})}),Hme=({tokenNumber:t,aiSummary:e,clinicName:n})=>r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx("div",{className:"hospital-reception-logo",children:r.jsx("span",{children:n.charAt(0)})}),r.jsxs("h1",{className:"hospital-reception-title",children:[n," AI"]}),r.jsxs("p",{className:"hospital-reception-subtitle",children:["Intelligent ",n," Reception Assistant"]})]}),t&&r.jsxs("div",{className:"hospital-reception-token-card",children:[r.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),r.jsx("p",{className:"hospital-reception-token-number",children:t})]}),e&&r.jsxs("div",{className:"hospital-reception-summary-card",children:[r.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),r.jsx("p",{className:"hospital-reception-summary-text",children:e})]})]}),o3={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:rg.OBJECT,properties:{summary:{type:rg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},Gme=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:i,clinicName:a,voiceAiLanguage:s,lastMotionTimestamp:o,backgroundMode:l})=>{const c=b.useRef(null),d=b.useRef(null),[f,p]=b.useState(null),[y,x]=b.useState("hi"),{client:v,connected:S,setConfig:N,setModel:_,disconnect:T,connect:C}=gd(),O=b.useRef(!1),k=b.useRef(Date.now()),P=b.useRef(!1);b.useEffect(()=>{O.current=S,S&&(k.current=Date.now(),P.current=!1)},[S]),b.useEffect(()=>{if(o){if(k.current=Date.now(),O.current)return;S||C()}},[o,C,S]),b.useEffect(()=>{if(!o||!S)return;const H=setInterval(()=>{const X=Date.now()-k.current;X>25e3&&X<3e4&&!P.current&&(P.current=!0,v.send([{text:"I'll be here if you need more help!"}])),X>3e4&&(console.log("No motion for 30s. Disconnecting session."),T(),t())},1e3);return()=>clearInterval(H)},[o,S,v,T,t]);const I=b.useMemo(()=>{let H=`Your job is to:

If patient details like name, age, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (Name, Age) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's Name and Age only. Do not ask for their phone number.

    You should guess the patient's sex based on their voice or appearance.

For every visit, collect the patient's history by asking questions.

CRITICAL WORKFLOW - DO NOT USE THE 'case_summary' TOOL YET.

Phase 1: History Collection (MANDATORY LOOP)
Once you have the basics, you MUST ask the patient about their complaints.
- Ask clarifying questions to understand the onset, duration, severity, and associated symptoms.
- DO NOT just accept a one-line complaint.
- Loop your questions until you are confident you have a complete medical history.

Phase 2: Billing Check Protocol
ONLY after you are confident you have the complete history, proceed to the Billing Check Protocol immediately:
1. Ask: 'Would you like to get the tests done?'
   - IF PATIENT SAYS YES: STOP questioning. Do NOT mention medications (they will get them after reports).
     Result -> Lab: Yes, Pharmacy: No.
   - IF PATIENT SAYS NO: Ask: 'Would you like to get the medications?'
     - IF YES: Result -> Lab: No, Pharmacy: Yes.
     - IF NO: Result -> Lab: No, Pharmacy: No.

Phase 3: Final Summary
Only AFTER establishing the billing preferences as per the logic above, you should use the 'case_summary' tool EXACTLY ONCE at the end.

The 'case_summary' MUST be comprehensive and include:
- Patient Name, Age, Sex
- Medical History & Complaints
- Billing Preferences (e.g., 'Billing Preference: Lab - Yes, Pharmacy - No')

Do not call the tool multiple times. Wait until you have ALL the info, then generate the single final summary and ask them to wait in reception.`;e&&(H+=`

Patient Data: ${JSON.stringify(e,null,2)}`);const X={"en-US":"English","hi-IN":"Hindi","te-IN":"Telugu","bn-IN":"Bengali","mr-IN":"Marathi","ta-IN":"Tamil","gu-IN":"Gujarati","kn-IN":"Kannada","ml-IN":"Malayalam","pa-IN":"Punjabi","es-ES":"Spanish","fr-FR":"French","de-DE":"German","it-IT":"Italian","pt-PT":"Portuguese","ru-RU":"Russian","ja-JP":"Japanese","ko-KR":"Korean","zh-CN":"Chinese","ar-SA":"Arabic"}[s]||"English";return H+=` You should always speak in ${X}.`,s==="te-IN"&&(H+=" Dont write the telugu words in english."),{responseModalities:[ld.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:H}]},tools:[{functionDeclarations:[o3]}]}},[e,s]);b.useEffect(()=>{if(_("models/gemini-2.5-flash-native-audio-preview-12-2025"),N(I),!o){const H=setTimeout(()=>{d.current&&!S&&d.current.handleConnect()},2e3);return()=>clearTimeout(H)}},[N,_,I,S,o]),b.useEffect(()=>()=>{S&&T()},[S,T]);const[F,B]=b.useState(null);b.useEffect(()=>{const H=te=>{if(!te.functionCalls)return;const X=te.functionCalls.find(q=>q.name===o3.name);if(X){const q=X.args.summary;B(q),i(q)}te.functionCalls.length&&setTimeout(()=>{var q;return v.sendToolResponse({functionResponses:(q=te.functionCalls)==null?void 0:q.map(W=>({response:{output:{success:!0}},id:W.id,name:W.name}))})},200)};return v.on("toolcall",H),()=>{v.off("toolcall",H)}},[v,i]);const $=()=>{y.trim()&&(v.send([{text:y}]),x(""))},L=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),$())},V=async()=>{B(null),i(null),x("hi"),S?(T(),setTimeout(()=>{C()},500)):C()};return r.jsx("div",{className:"live-api-modal-overlay",style:l?{opacity:0,pointerEvents:"none",position:"absolute",zIndex:-1}:{},children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsxs("div",{className:"live-api-modal-header",children:[r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx("div",{className:"live-api-modal-logo",children:r.jsx("span",{children:a.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h1",{className:"live-api-modal-title",children:a}),r.jsxs("p",{className:"live-api-modal-subtitle",children:[a," Hospital Assistant"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:V,className:"live-api-modal-close-button",title:"Refresh Session","aria-label":"Refresh session",children:r.jsx(Hz,{className:"w-6 h-6"})}),r.jsx("button",{onClick:t,className:"live-api-modal-close-button","aria-label":"Close modal",children:r.jsx(qt,{className:"w-6 h-6"})})]})]}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"live-api-reception-area",children:[r.jsx(Hme,{patientData:e,tokenNumber:n,aiSummary:F,clinicName:a}),f&&r.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),r.jsx("div",{className:"live-api-input-area",children:r.jsxs("div",{className:"live-api-input-container",children:[r.jsx("textarea",{value:y,onChange:H=>x(H.target.value),onKeyDown:L,placeholder:"Type your message here...",disabled:!S,rows:1,className:"live-api-textarea"}),r.jsx("button",{onClick:$,disabled:!S||!y.trim(),className:"live-api-send-button","aria-label":"Send message",children:r.jsx(LS,{className:"w-5 h-5"})})]})}),r.jsx(Vme,{ref:d,videoRef:c,supportsVideo:!0,onVideoStreamChange:p,textInput:y,onSubmitTextInput:$})]})})]})})},eN=({onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:i,lastMotionTimestamp:a,backgroundMode:s})=>{const[o,l]=b.useState(null),[c,d]=b.useState("Newtons Ai"),[f,p]=b.useState("en-US"),[y,x]=b.useState(!0);if(b.useEffect(()=>{(async()=>{try{let N=null,_="Newtons Ai",T="en-US";try{const C=await ue("/api/clinics/settings");if(C.ok){const O=await C.json();O.name&&O.name!==""&&(_=O.name),O.gemini_api_key&&O.gemini_api_key.trim()!==""&&(N=O.gemini_api_key.trim()),O.voice_ai_language&&(T=O.voice_ai_language)}}catch(C){console.warn("Failed to fetch clinic settings",C)}if(d(_),p(T),N)l(N);else{try{const C=await ue("/api/global-settings/app_gemini_api_key");if(C.ok){const O=await C.json();if(O.value&&O.value.trim()!==""){l(O.value.trim());return}}}catch(C){console.warn("Failed to fetch global key fallback",C)}l(s3)}}catch(N){console.error("Unexpected error in getSettings:",N),l(s3)}finally{x(!1)}})()},[]),y)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsx("div",{className:"live-api-modal-header",style:{borderBottom:"none"},children:r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsxs("div",{style:{marginLeft:"12px"},children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:180,height:14,style:{marginTop:"4px"}})]})]})}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx(Z,{variant:"circular",width:64,height:64,style:{margin:"0 auto"}}),r.jsx(Z,{width:200,height:32,style:{margin:"16px auto 8px"}}),r.jsx(Z,{width:250,height:16,style:{margin:"0 auto"}})]}),r.jsxs("div",{className:"hospital-reception-token-card",style:{background:"transparent",boxShadow:"none"},children:[r.jsx(Z,{width:140,height:20,style:{margin:"0 auto 8px"}}),r.jsx(Z,{width:100,height:48,style:{margin:"0 auto"}})]})]})}),r.jsx("div",{className:"live-api-control-tray",style:{position:"relative"},children:r.jsx("div",{className:"live-api-control-tray-inner",style:{justifyContent:"center"},children:r.jsx("div",{className:"live-api-loading-text",children:"Initializing AI Assistant..."})})})]})});if(!o)return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsx("div",{className:"live-api-modal-content",children:r.jsx("div",{children:"Error: API Key not available."})})});const v={apiKey:o};return r.jsx(ZS,{options:v,children:r.jsx(Gme,{onClose:t,patientData:e,tokenNumber:n,onAiSummaryChange:i,clinicName:c,voiceAiLanguage:f,lastMotionTimestamp:a,backgroundMode:s})})},tN=()=>{const[t,e]=b.useState(null),[n,i]=b.useState(!0),[a,s]=b.useState(null),o=b.useCallback(async()=>{i(!0),s(null);try{const c=await ue("/api/clinics/settings");if(!c.ok)throw new Error("Failed to fetch clinic settings");const d=await c.json();e(d)}catch(c){s(c instanceof Error?c.message:"An error occurred")}finally{i(!1)}},[]);b.useEffect(()=>{o()},[o]);const l=(t==null?void 0:t.custom_columns_config)||{};return{settings:t,customColumnsConfig:l,loading:n,error:a,refetch:o}},Wme="_overlay_79cew_5",Yme="_overlayMinimized_79cew_55",Kme="_modal_79cew_65",Qme="_minimized_79cew_97",Xme="_contentWrapper_79cew_113",Jme="_exiting_79cew_161",Zme="_header_79cew_183",ege="_inputWrapper_79cew_197",tge="_inputContainer_79cew_215",nge="_minimizedSearchIcon_79cew_273",rge="_input_79cew_197",ige="_controlsGroup_79cew_347",age="_iconButton_79cew_373",sge="_sendButton_79cew_413",oge="_dragBar_79cew_459",lge="_dragBarTitle_79cew_489",cge="_dragBarControls_79cew_519",uge="_dragBarControlsRight_79cew_537",dge="_newChatBtn_79cew_553",hge="_windowControlBtn_79cew_589",fge="_content_79cew_113",pge="_overlayContent_79cew_687",mge="_section_79cew_711",gge="_sectionTitle_79cew_723",yge="_recentList_79cew_743",xge="_recentPill_79cew_767",vge="_recentName_79cew_807",bge="_recentToken_79cew_819",jge="_recentInfo_79cew_837",wge="_examplesGrid_79cew_849",Sge="_exampleCard_79cew_861",Nge="_exampleIcon_79cew_897",_ge="_exampleText_79cew_905",Cge="_chatSectionFill_79cew_919",Tge="_chatMessagesFill_79cew_935",kge="_chatBubble_79cew_955",Age="_chatBubbleUser_79cew_975",Ege="_chatBubbleModel_79cew_991",Pge="_chatBubbleSystem_79cew_1009",Oge="_processing_79cew_1025",Dge="_spinner_79cew_1043",Mge="_resultItem_79cew_1065",Ige="_resultName_79cew_1093",Rge="_resultToken_79cew_1103",Lge="_resultDetails_79cew_1115",Fge="_noResults_79cew_1125",Ot={overlay:Wme,overlayMinimized:Yme,modal:Kme,minimized:Qme,contentWrapper:Xme,exiting:Jme,header:Zme,inputWrapper:ege,inputContainer:tge,minimizedSearchIcon:nge,input:rge,controlsGroup:ige,iconButton:age,sendButton:sge,dragBar:oge,dragBarTitle:lge,dragBarControls:cge,dragBarControlsRight:uge,newChatBtn:dge,windowControlBtn:hge,content:fge,overlayContent:pge,section:mge,sectionTitle:gge,recentList:yge,recentPill:xge,recentName:vge,recentToken:bge,recentInfo:jge,examplesGrid:wge,exampleCard:Sge,exampleIcon:Nge,exampleText:_ge,chatSectionFill:Cge,chatMessagesFill:Tge,chatBubble:kge,chatBubbleUser:Age,chatBubbleModel:Ege,chatBubbleSystem:Pge,processing:Oge,spinner:Dge,resultItem:Mge,resultName:Ige,resultToken:Rge,resultDetails:Lge,noResults:Fge},Ib=({columns:t,data:e,onSave:n,onRowAdd:i,onRowDelete:a,onRowClick:s,onRowHover:o,editable:l=!0,showRowNumbers:c=!0,title:d})=>{const[f,p]=b.useState(e),[y,x]=b.useState(null),[v,S]=b.useState(""),[N,_]=b.useState(""),[T,C]=b.useState(null),[O,k]=b.useState(!1),[P,I]=b.useState(new Set);Se.useEffect(()=>{p(e),k(!1)},[e]);const F=b.useMemo(()=>{let q=[...f];if(N.trim()){const W=N.toLowerCase();q=q.filter(ae=>Object.values(ae).some(G=>G!=null&&String(G).toLowerCase().includes(W)))}return T&&q.sort((W,ae)=>{const G=W[T.key],z=ae[T.key];return G==null?1:z==null?-1:G<z?T.direction==="asc"?-1:1:G>z?T.direction==="asc"?1:-1:0}),q},[f,N,T]),B=(q,W)=>{var G;if(!l)return;const ae=t.find(z=>z.key===W);(ae==null?void 0:ae.editable)!==!1&&(x({row:q,col:W}),S(String(((G=f[q])==null?void 0:G[W])??"")))},$=()=>{var q;if(y){const W=[...f],ae=t.find(z=>z.key===y.col);let G=v;(ae==null?void 0:ae.type)==="number"&&(G=parseFloat(G)||0),(ae==null?void 0:ae.type)==="boolean"&&(G=G.toLowerCase()==="true"||G==="1"),((q=W[y.row])==null?void 0:q[y.col])!==G&&(W[y.row]={...W[y.row],[y.col]:G},p(W),k(!0))}x(null)},L=q=>{if(q.key==="Enter")$();else if(q.key==="Escape")x(null);else if(q.key==="Tab"&&(q.preventDefault(),$(),y)){const W=t.findIndex(G=>G.key===y.col),ae=t[W+1];ae?setTimeout(()=>B(y.row,ae.key),0):y.row<f.length-1&&setTimeout(()=>B(y.row+1,t[0].key),0)}},V=q=>{C(W=>(W==null?void 0:W.key)===q?W.direction==="asc"?{key:q,direction:"desc"}:null:{key:q,direction:"asc"})},H=()=>{n&&(n(f),k(!1))},te=()=>{const q=t.map(je=>je.label).join(","),W=f.map(je=>t.map(K=>{const Oe=je[K.key];return typeof Oe=="string"&&Oe.includes(",")?`"${Oe}"`:Oe}).join(",")),ae=[q,...W].join(`
`),G=new Blob([ae],{type:"text/csv"}),z=URL.createObjectURL(G),le=document.createElement("a");le.href=z,le.download=`${d||"data"}.csv`,le.click()},X=q=>{const W=new Set(P);W.has(q)?W.delete(q):W.add(q),I(W)};return r.jsxs("div",{className:"excel-grid",children:[r.jsxs("div",{className:"excel-toolbar",children:[r.jsxs("div",{className:"excel-search",children:[r.jsx("input",{type:"text",placeholder:" Search...",value:N,onChange:q=>_(q.target.value)}),N&&r.jsx("button",{className:"clear-search",onClick:()=>_(""),children:r.jsx(qt,{size:14})})]}),r.jsxs("div",{className:"excel-actions",children:[i&&r.jsxs("button",{onClick:i,className:"excel-btn",title:"Add Row",children:[r.jsx(ur,{size:16})," Add"]}),r.jsxs("button",{onClick:te,className:"excel-btn",title:"Export CSV",children:[r.jsx(Fz,{size:16})," Export"]}),l&&n&&r.jsxs("button",{onClick:H,className:`excel-btn save-btn ${O?"has-changes":""}`,disabled:!O,title:"Save Changes",children:[r.jsx(Js,{size:16})," Save"]})]})]}),r.jsxs("div",{className:"excel-status",children:[N&&r.jsxs("span",{children:["Showing ",F.length," of ",f.length]}),O&&r.jsx("span",{className:"unsaved-indicator",children:" Unsaved changes"})]}),r.jsx("div",{className:"excel-table-wrapper",children:r.jsxs("table",{className:"excel-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[c&&r.jsx("th",{className:"row-num-header",children:"#"}),t.map(q=>r.jsx("th",{onClick:()=>V(q.key),style:{width:q.width,cursor:"pointer"},children:r.jsxs("div",{className:"th-content",children:[q.label,(T==null?void 0:T.key)===q.key&&(T.direction==="asc"?r.jsx(UQ,{size:14}):r.jsx(Lz,{size:14}))]})},q.key)),a&&r.jsx("th",{className:"action-col",children:""})]})}),r.jsx("tbody",{children:F.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:t.length+(c?1:0)+(a?1:0),className:"no-data",children:"No data found"})}):F.map((q,W)=>r.jsxs("tr",{className:`${P.has(W)?"selected":""} ${s?"clickable-row":""}`,onClick:()=>s&&s(q,W),onMouseEnter:()=>o&&o(q,W),style:s?{cursor:"pointer"}:void 0,children:[c&&r.jsx("td",{className:"row-num",onClick:()=>X(W),children:W+1}),t.map(ae=>r.jsx("td",{onClick:()=>B(W,ae.key),className:`
                                                ${(y==null?void 0:y.row)===W&&(y==null?void 0:y.col)===ae.key?"editing":""}
                                                ${ae.editable===!1?"read-only":""}
                                            `,children:(y==null?void 0:y.row)===W&&(y==null?void 0:y.col)===ae.key?r.jsx("input",{type:ae.type==="number"?"number":"text",value:v,onChange:G=>S(G.target.value),onBlur:$,onKeyDown:L,autoFocus:!0}):r.jsx("span",{children:q[ae.key]??""})},ae.key)),a&&r.jsx("td",{className:"action-col",children:r.jsx("button",{className:"delete-row",onClick:()=>a(W),children:r.jsx(qt,{size:14})})})]},q.id||W))})]})}),r.jsxs("div",{className:"excel-footer",children:[r.jsxs("span",{children:[f.length," rows"]}),P.size>0&&r.jsxs("span",{children:[P.size," selected"]})]})]})};function h9(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=h9(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function un(){for(var t,e,n=0,i="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=h9(t))&&(i&&(i+=" "),i+=e);return i}var OC,l3;function os(){if(l3)return OC;l3=1;var t=Array.isArray;return OC=t,OC}var DC,c3;function f9(){if(c3)return DC;c3=1;var t=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks;return DC=t,DC}var MC,u3;function Ml(){if(u3)return MC;u3=1;var t=f9(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return MC=n,MC}var IC,d3;function Rb(){if(d3)return IC;d3=1;var t=Ml(),e=t.Symbol;return IC=e,IC}var RC,h3;function $ge(){if(h3)return RC;h3=1;var t=Rb(),e=Object.prototype,n=e.hasOwnProperty,i=e.toString,a=t?t.toStringTag:void 0;function s(o){var l=n.call(o,a),c=o[a];try{o[a]=void 0;var d=!0}catch{}var f=i.call(o);return d&&(l?o[a]=c:delete o[a]),f}return RC=s,RC}var LC,f3;function Bge(){if(f3)return LC;f3=1;var t=Object.prototype,e=t.toString;function n(i){return e.call(i)}return LC=n,LC}var FC,p3;function Uc(){if(p3)return FC;p3=1;var t=Rb(),e=$ge(),n=Bge(),i="[object Null]",a="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?a:i:s&&s in Object(l)?e(l):n(l)}return FC=o,FC}var $C,m3;function Vc(){if(m3)return $C;m3=1;function t(e){return e!=null&&typeof e=="object"}return $C=t,$C}var BC,g3;function $g(){if(g3)return BC;g3=1;var t=Uc(),e=Vc(),n="[object Symbol]";function i(a){return typeof a=="symbol"||e(a)&&t(a)==n}return BC=i,BC}var zC,y3;function jD(){if(y3)return zC;y3=1;var t=os(),e=$g(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:i.test(s)||!n.test(s)||o!=null&&s in Object(o)}return zC=a,zC}var qC,x3;function yd(){if(x3)return qC;x3=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return qC=t,qC}var UC,v3;function wD(){if(v3)return UC;v3=1;var t=Uc(),e=yd(),n="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==i||c==a||c==n||c==s}return UC=o,UC}var VC,b3;function zge(){if(b3)return VC;b3=1;var t=Ml(),e=t["__core-js_shared__"];return VC=e,VC}var HC,j3;function qge(){if(j3)return HC;j3=1;var t=zge(),e=function(){var i=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function n(i){return!!e&&e in i}return HC=n,HC}var GC,w3;function p9(){if(w3)return GC;w3=1;var t=Function.prototype,e=t.toString;function n(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return GC=n,GC}var WC,S3;function Uge(){if(S3)return WC;S3=1;var t=wD(),e=qge(),n=yd(),i=p9(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,f=RegExp("^"+c.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(y){if(!n(y)||e(y))return!1;var x=t(y)?f:s;return x.test(i(y))}return WC=p,WC}var YC,N3;function Vge(){if(N3)return YC;N3=1;function t(e,n){return e==null?void 0:e[n]}return YC=t,YC}var KC,_3;function Pf(){if(_3)return KC;_3=1;var t=Uge(),e=Vge();function n(i,a){var s=e(i,a);return t(s)?s:void 0}return KC=n,KC}var QC,C3;function nN(){if(C3)return QC;C3=1;var t=Pf(),e=t(Object,"create");return QC=e,QC}var XC,T3;function Hge(){if(T3)return XC;T3=1;var t=nN();function e(){this.__data__=t?t(null):{},this.size=0}return XC=e,XC}var JC,k3;function Gge(){if(k3)return JC;k3=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return JC=t,JC}var ZC,A3;function Wge(){if(A3)return ZC;A3=1;var t=nN(),e="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function a(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return i.call(o,s)?o[s]:void 0}return ZC=a,ZC}var e2,E3;function Yge(){if(E3)return e2;E3=1;var t=nN(),e=Object.prototype,n=e.hasOwnProperty;function i(a){var s=this.__data__;return t?s[a]!==void 0:n.call(s,a)}return e2=i,e2}var t2,P3;function Kge(){if(P3)return t2;P3=1;var t=nN(),e="__lodash_hash_undefined__";function n(i,a){var s=this.__data__;return this.size+=this.has(i)?0:1,s[i]=t&&a===void 0?e:a,this}return t2=n,t2}var n2,O3;function Qge(){if(O3)return n2;O3=1;var t=Hge(),e=Gge(),n=Wge(),i=Yge(),a=Kge();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,n2=s,n2}var r2,D3;function Xge(){if(D3)return r2;D3=1;function t(){this.__data__=[],this.size=0}return r2=t,r2}var i2,M3;function SD(){if(M3)return i2;M3=1;function t(e,n){return e===n||e!==e&&n!==n}return i2=t,i2}var a2,I3;function rN(){if(I3)return a2;I3=1;var t=SD();function e(n,i){for(var a=n.length;a--;)if(t(n[a][0],i))return a;return-1}return a2=e,a2}var s2,R3;function Jge(){if(R3)return s2;R3=1;var t=rN(),e=Array.prototype,n=e.splice;function i(a){var s=this.__data__,o=t(s,a);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return s2=i,s2}var o2,L3;function Zge(){if(L3)return o2;L3=1;var t=rN();function e(n){var i=this.__data__,a=t(i,n);return a<0?void 0:i[a][1]}return o2=e,o2}var l2,F3;function eye(){if(F3)return l2;F3=1;var t=rN();function e(n){return t(this.__data__,n)>-1}return l2=e,l2}var c2,$3;function tye(){if($3)return c2;$3=1;var t=rN();function e(n,i){var a=this.__data__,s=t(a,n);return s<0?(++this.size,a.push([n,i])):a[s][1]=i,this}return c2=e,c2}var u2,B3;function iN(){if(B3)return u2;B3=1;var t=Xge(),e=Jge(),n=Zge(),i=eye(),a=tye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,u2=s,u2}var d2,z3;function ND(){if(z3)return d2;z3=1;var t=Pf(),e=Ml(),n=t(e,"Map");return d2=n,d2}var h2,q3;function nye(){if(q3)return h2;q3=1;var t=Qge(),e=iN(),n=ND();function i(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return h2=i,h2}var f2,U3;function rye(){if(U3)return f2;U3=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return f2=t,f2}var p2,V3;function aN(){if(V3)return p2;V3=1;var t=rye();function e(n,i){var a=n.__data__;return t(i)?a[typeof i=="string"?"string":"hash"]:a.map}return p2=e,p2}var m2,H3;function iye(){if(H3)return m2;H3=1;var t=aN();function e(n){var i=t(this,n).delete(n);return this.size-=i?1:0,i}return m2=e,m2}var g2,G3;function aye(){if(G3)return g2;G3=1;var t=aN();function e(n){return t(this,n).get(n)}return g2=e,g2}var y2,W3;function sye(){if(W3)return y2;W3=1;var t=aN();function e(n){return t(this,n).has(n)}return y2=e,y2}var x2,Y3;function oye(){if(Y3)return x2;Y3=1;var t=aN();function e(n,i){var a=t(this,n),s=a.size;return a.set(n,i),this.size+=a.size==s?0:1,this}return x2=e,x2}var v2,K3;function _D(){if(K3)return v2;K3=1;var t=nye(),e=iye(),n=aye(),i=sye(),a=oye();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,v2=s,v2}var b2,Q3;function m9(){if(Q3)return b2;Q3=1;var t=_D(),e="Expected a function";function n(i,a){if(typeof i!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var s=function(){var o=arguments,l=a?a.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var d=i.apply(this,o);return s.cache=c.set(l,d)||c,d};return s.cache=new(n.Cache||t),s}return n.Cache=t,b2=n,b2}var j2,X3;function lye(){if(X3)return j2;X3=1;var t=m9(),e=500;function n(i){var a=t(i,function(o){return s.size===e&&s.clear(),o}),s=a.cache;return a}return j2=n,j2}var w2,J3;function cye(){if(J3)return w2;J3=1;var t=lye(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=t(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(e,function(o,l,c,d){s.push(c?d.replace(n,"$1"):l||o)}),s});return w2=i,w2}var S2,Z3;function CD(){if(Z3)return S2;Z3=1;function t(e,n){for(var i=-1,a=e==null?0:e.length,s=Array(a);++i<a;)s[i]=n(e[i],i,e);return s}return S2=t,S2}var N2,e6;function uye(){if(e6)return N2;e6=1;var t=Rb(),e=CD(),n=os(),i=$g(),a=t?t.prototype:void 0,s=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(i(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return N2=o,N2}var _2,t6;function g9(){if(t6)return _2;t6=1;var t=uye();function e(n){return n==null?"":t(n)}return _2=e,_2}var C2,n6;function y9(){if(n6)return C2;n6=1;var t=os(),e=jD(),n=cye(),i=g9();function a(s,o){return t(s)?s:e(s,o)?[s]:n(i(s))}return C2=a,C2}var T2,r6;function sN(){if(r6)return T2;r6=1;var t=$g();function e(n){if(typeof n=="string"||t(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return T2=e,T2}var k2,i6;function TD(){if(i6)return k2;i6=1;var t=y9(),e=sN();function n(i,a){a=t(a,i);for(var s=0,o=a.length;i!=null&&s<o;)i=i[e(a[s++])];return s&&s==o?i:void 0}return k2=n,k2}var A2,a6;function x9(){if(a6)return A2;a6=1;var t=TD();function e(n,i,a){var s=n==null?void 0:t(n,i);return s===void 0?a:s}return A2=e,A2}var dye=x9();const ks=Bn(dye);var E2,s6;function hye(){if(s6)return E2;s6=1;function t(e){return e==null}return E2=t,E2}var fye=hye();const ln=Bn(fye);var P2,o6;function pye(){if(o6)return P2;o6=1;var t=Uc(),e=os(),n=Vc(),i="[object String]";function a(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==i}return P2=a,P2}var mye=pye();const wf=Bn(mye);var gye=wD();const en=Bn(gye);var yye=yd();const Bg=Bn(yye);var O2={exports:{}},sr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l6;function xye(){if(l6)return sr;l6=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function S(N){if(typeof N=="object"&&N!==null){var _=N.$$typeof;switch(_){case t:switch(N=N.type,N){case n:case a:case i:case d:case f:return N;default:switch(N=N&&N.$$typeof,N){case l:case o:case c:case y:case p:case s:return N;default:return _}}case e:return _}}}return sr.ContextConsumer=o,sr.ContextProvider=s,sr.Element=t,sr.ForwardRef=c,sr.Fragment=n,sr.Lazy=y,sr.Memo=p,sr.Portal=e,sr.Profiler=a,sr.StrictMode=i,sr.Suspense=d,sr.SuspenseList=f,sr.isAsyncMode=function(){return!1},sr.isConcurrentMode=function(){return!1},sr.isContextConsumer=function(N){return S(N)===o},sr.isContextProvider=function(N){return S(N)===s},sr.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},sr.isForwardRef=function(N){return S(N)===c},sr.isFragment=function(N){return S(N)===n},sr.isLazy=function(N){return S(N)===y},sr.isMemo=function(N){return S(N)===p},sr.isPortal=function(N){return S(N)===e},sr.isProfiler=function(N){return S(N)===a},sr.isStrictMode=function(N){return S(N)===i},sr.isSuspense=function(N){return S(N)===d},sr.isSuspenseList=function(N){return S(N)===f},sr.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===a||N===i||N===d||N===f||N===x||typeof N=="object"&&N!==null&&(N.$$typeof===y||N.$$typeof===p||N.$$typeof===s||N.$$typeof===o||N.$$typeof===c||N.$$typeof===v||N.getModuleId!==void 0)},sr.typeOf=S,sr}var c6;function vye(){return c6||(c6=1,O2.exports=xye()),O2.exports}var bye=vye(),D2,u6;function v9(){if(u6)return D2;u6=1;var t=Uc(),e=Vc(),n="[object Number]";function i(a){return typeof a=="number"||e(a)&&t(a)==n}return D2=i,D2}var M2,d6;function jye(){if(d6)return M2;d6=1;var t=v9();function e(n){return t(n)&&n!=+n}return M2=e,M2}var wye=jye();const zg=Bn(wye);var Sye=v9();const Nye=Bn(Sye);var Pa=function(e){return e===0?0:e>0?1:-1},Yh=function(e){return wf(e)&&e.indexOf("%")===e.length-1},bt=function(e){return Nye(e)&&!zg(e)},_ye=function(e){return ln(e)},Si=function(e){return bt(e)||wf(e)},Cye=0,Of=function(e){var n=++Cye;return"".concat(e||"").concat(n)},Oa=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!bt(e)&&!wf(e))return i;var s;if(Yh(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return zg(s)&&(s=i),a&&s>n&&(s=n),s},Gu=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Tye=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,i={},a=0;a<n;a++)if(!i[e[a]])i[e[a]]=!0;else return!0;return!1},wi=function(e,n){return bt(e)&&bt(n)?function(i){return e+i*(n-e)}:function(){return n}};function kw(t,e,n){return!t||!t.length?null:t.find(function(i){return i&&(typeof e=="function"?e(i):ks(i,e))===n})}var kye=function(e,n){return bt(e)&&bt(n)?e-n:wf(e)&&wf(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Rm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var i in e)if({}.hasOwnProperty.call(e,i)&&!{}.hasOwnProperty.call(t,i))return!1;return!0}function QE(t){"@babel/helpers - typeof";return QE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QE(t)}var Aye=["viewBox","children"],Eye=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],h6=["points","pathLength"],I2={svg:Aye,polygon:h6,polyline:h6},kD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Aw=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(b.isValidElement(e)&&(i=e.props),!Bg(i))return null;var a={};return Object.keys(i).forEach(function(s){kD.includes(s)&&(a[s]=n||function(o){return i[s](i,o)})}),a},Pye=function(e,n,i){return function(a){return e(n,i,a),null}},Sf=function(e,n,i){if(!Bg(e)||QE(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(s){var o=e[s];kD.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=Pye(o,n,i))}),a},Oye=["children"],Dye=["children"];function f6(t,e){if(t==null)return{};var n=Mye(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Mye(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function XE(t){"@babel/helpers - typeof";return XE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XE(t)}var p6={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Cc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},m6=null,R2=null,AD=function t(e){if(e===m6&&Array.isArray(R2))return R2;var n=[];return b.Children.forEach(e,function(i){ln(i)||(bye.isFragment(i)?n=n.concat(t(i.props.children)):n.push(i))}),R2=n,m6=e,n};function As(t,e){var n=[],i=[];return Array.isArray(e)?i=e.map(function(a){return Cc(a)}):i=[Cc(e)],AD(t).forEach(function(a){var s=ks(a,"type.displayName")||ks(a,"type.name");i.indexOf(s)!==-1&&n.push(a)}),n}function ws(t,e){var n=As(t,e);return n&&n[0]}var g6=function(e){if(!e||!e.props)return!1;var n=e.props,i=n.width,a=n.height;return!(!bt(i)||i<=0||!bt(a)||a<=0)},Iye=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Rye=function(e){return e&&e.type&&wf(e.type)&&Iye.indexOf(e.type)>=0},b9=function(e){return e&&XE(e)==="object"&&"clipDot"in e},Lye=function(e,n,i,a){var s,o=(s=I2==null?void 0:I2[a])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!en(e)&&(a&&o.includes(n)||Eye.includes(n))||i&&kD.includes(n)},Ft=function(e,n,i){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(b.isValidElement(e)&&(a=e.props),!Bg(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;Lye((l=a)===null||l===void 0?void 0:l[o],o,n,i)&&(s[o]=a[o])}),s},JE=function t(e,n){if(e===n)return!0;var i=b.Children.count(e);if(i!==b.Children.count(n))return!1;if(i===0)return!0;if(i===1)return y6(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var a=0;a<i;a++){var s=e[a],o=n[a];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!y6(s,o))return!1}return!0},y6=function(e,n){if(ln(e)&&ln(n))return!0;if(!ln(e)&&!ln(n)){var i=e.props||{},a=i.children,s=f6(i,Oye),o=n.props||{},l=o.children,c=f6(o,Dye);return a&&l?Rm(s,c)&&JE(a,l):!a&&!l?Rm(s,c):!1}return!1},x6=function(e,n){var i=[],a={};return AD(e).forEach(function(s,o){if(Rye(s))i.push(s);else if(s){var l=Cc(s.type),c=n[l]||{},d=c.handler,f=c.once;if(d&&(!f||!a[l])){var p=d(s,l,o);i.push(p),a[l]=!0}}}),i},Fye=function(e){var n=e&&e.type;return n&&p6[n]?p6[n]:null},$ye=function(e,n){return AD(n).indexOf(e)},Bye=["children","width","height","viewBox","className","style","title","desc"];function ZE(){return ZE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ZE.apply(this,arguments)}function zye(t,e){if(t==null)return{};var n=qye(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function qye(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function eP(t){var e=t.children,n=t.width,i=t.height,a=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,d=zye(t,Bye),f=a||{width:n,height:i,x:0,y:0},p=un("recharts-surface",s);return Se.createElement("svg",ZE({},Ft(d,!0,"svg"),{className:p,width:n,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Se.createElement("title",null,l),Se.createElement("desc",null,c),e)}var Uye=["children","className"];function tP(){return tP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tP.apply(this,arguments)}function Vye(t,e){if(t==null)return{};var n=Hye(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Hye(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var Pn=Se.forwardRef(function(t,e){var n=t.children,i=t.className,a=Vye(t,Uye),s=un("recharts-layer",i);return Se.createElement("g",tP({className:s},Ft(a,!0),{ref:e}),n)}),Oo=function(e,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s]},L2,v6;function Gye(){if(v6)return L2;v6=1;function t(e,n,i){var a=-1,s=e.length;n<0&&(n=-n>s?0:s+n),i=i>s?s:i,i<0&&(i+=s),s=n>i?0:i-n>>>0,n>>>=0;for(var o=Array(s);++a<s;)o[a]=e[a+n];return o}return L2=t,L2}var F2,b6;function Wye(){if(b6)return F2;b6=1;var t=Gye();function e(n,i,a){var s=n.length;return a=a===void 0?s:a,!i&&a>=s?n:t(n,i,a)}return F2=e,F2}var $2,j6;function j9(){if(j6)return $2;j6=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=e+n+i,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+a+s+"]");function c(d){return l.test(d)}return $2=c,$2}var B2,w6;function Yye(){if(w6)return B2;w6=1;function t(e){return e.split("")}return B2=t,B2}var z2,S6;function Kye(){if(S6)return z2;S6=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=e+n+i,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",v=d+"?",S="["+s+"]?",N="(?:"+x+"(?:"+[f,p,y].join("|")+")"+S+v+")*",_=S+v+N,T="(?:"+[f+l+"?",l,p,y,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+T+_,"g");function O(k){return k.match(C)||[]}return z2=O,z2}var q2,N6;function Qye(){if(N6)return q2;N6=1;var t=Yye(),e=j9(),n=Kye();function i(a){return e(a)?n(a):t(a)}return q2=i,q2}var U2,_6;function Xye(){if(_6)return U2;_6=1;var t=Wye(),e=j9(),n=Qye(),i=g9();function a(s){return function(o){o=i(o);var l=e(o)?n(o):void 0,c=l?l[0]:o.charAt(0),d=l?t(l,1).join(""):o.slice(1);return c[s]()+d}}return U2=a,U2}var V2,C6;function Jye(){if(C6)return V2;C6=1;var t=Xye(),e=t("toUpperCase");return V2=e,V2}var Zye=Jye();const oN=Bn(Zye);function Dr(t){return function(){return t}}const w9=Math.cos,Ew=Math.sin,Lo=Math.sqrt,Pw=Math.PI,lN=2*Pw,nP=Math.PI,rP=2*nP,zh=1e-6,exe=rP-zh;function S9(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function txe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return S9;const n=10**e;return function(i){this._+=i[0];for(let a=1,s=i.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}class nxe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?S9:txe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,a){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(e,n,i,a,s,o){this._append`C${+e},${+n},${+i},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,i,a,s){if(e=+e,n=+n,i=+i,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=i-e,d=a-n,f=o-e,p=l-n,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(y>zh)if(!(Math.abs(p*c-d*f)>zh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let x=i-o,v=a-l,S=c*c+d*d,N=x*x+v*v,_=Math.sqrt(S),T=Math.sqrt(y),C=s*Math.tan((nP-Math.acos((S+y-N)/(2*_*T)))/2),O=C/T,k=C/_;Math.abs(O-1)>zh&&this._append`L${e+O*f},${n+O*p}`,this._append`A${s},${s},0,0,${+(p*x>f*v)},${this._x1=e+k*c},${this._y1=n+k*d}`}}arc(e,n,i,a,s,o){if(e=+e,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(a),c=i*Math.sin(a),d=e+l,f=n+c,p=1^o,y=o?a-s:s-a;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>zh||Math.abs(this._y1-f)>zh)&&this._append`L${d},${f}`,i&&(y<0&&(y=y%rP+rP),y>exe?this._append`A${i},${i},0,1,${p},${e-l},${n-c}A${i},${i},0,1,${p},${this._x1=d},${this._y1=f}`:y>zh&&this._append`A${i},${i},0,${+(y>=nP)},${p},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}}function ED(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new nxe(e)}function PD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function N9(t){this._context=t}N9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function cN(t){return new N9(t)}function _9(t){return t[0]}function C9(t){return t[1]}function T9(t,e){var n=Dr(!0),i=null,a=cN,s=null,o=ED(l);t=typeof t=="function"?t:t===void 0?_9:Dr(t),e=typeof e=="function"?e:e===void 0?C9:Dr(e);function l(c){var d,f=(c=PD(c)).length,p,y=!1,x;for(i==null&&(s=a(x=o())),d=0;d<=f;++d)!(d<f&&n(p=c[d],d,c))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+t(p,d,c),+e(p,d,c));if(x)return s=null,x+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Dr(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Dr(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Dr(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,i!=null&&(s=a(i)),l):a},l.context=function(c){return arguments.length?(c==null?i=s=null:s=a(i=c),l):i},l}function Tj(t,e,n){var i=null,a=Dr(!0),s=null,o=cN,l=null,c=ED(d);t=typeof t=="function"?t:t===void 0?_9:Dr(+t),e=typeof e=="function"?e:Dr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?C9:Dr(+n);function d(p){var y,x,v,S=(p=PD(p)).length,N,_=!1,T,C=new Array(S),O=new Array(S);for(s==null&&(l=o(T=c())),y=0;y<=S;++y){if(!(y<S&&a(N=p[y],y,p))===_)if(_=!_)x=y,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=y-1;v>=x;--v)l.point(C[v],O[v]);l.lineEnd(),l.areaEnd()}_&&(C[y]=+t(N,y,p),O[y]=+e(N,y,p),l.point(i?+i(N,y,p):C[y],n?+n(N,y,p):O[y]))}if(T)return l=null,T+""||null}function f(){return T9().defined(a).curve(o).context(s)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:Dr(+p),i=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Dr(+p),d):t},d.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:Dr(+p),d):i},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:Dr(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Dr(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Dr(+p),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(i).y(e)},d.defined=function(p){return arguments.length?(a=typeof p=="function"?p:Dr(!!p),d):a},d.curve=function(p){return arguments.length?(o=p,s!=null&&(l=o(s)),d):o},d.context=function(p){return arguments.length?(p==null?s=l=null:l=o(s=p),d):s},d}class k9{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function rxe(t){return new k9(t,!0)}function ixe(t){return new k9(t,!1)}const OD={draw(t,e){const n=Lo(e/Pw);t.moveTo(n,0),t.arc(0,0,n,0,lN)}},axe={draw(t,e){const n=Lo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},A9=Lo(1/3),sxe=A9*2,oxe={draw(t,e){const n=Lo(e/sxe),i=n*A9;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},lxe={draw(t,e){const n=Lo(e),i=-n/2;t.rect(i,i,n,n)}},cxe=.8908130915292852,E9=Ew(Pw/10)/Ew(7*Pw/10),uxe=Ew(lN/10)*E9,dxe=-w9(lN/10)*E9,hxe={draw(t,e){const n=Lo(e*cxe),i=uxe*n,a=dxe*n;t.moveTo(0,-n),t.lineTo(i,a);for(let s=1;s<5;++s){const o=lN*s/5,l=w9(o),c=Ew(o);t.lineTo(c*n,-l*n),t.lineTo(l*i-c*a,c*i+l*a)}t.closePath()}},H2=Lo(3),fxe={draw(t,e){const n=-Lo(e/(H2*3));t.moveTo(0,n*2),t.lineTo(-H2*n,-n),t.lineTo(H2*n,-n),t.closePath()}},Us=-.5,Vs=Lo(3)/2,iP=1/Lo(12),pxe=(iP/2+1)*3,mxe={draw(t,e){const n=Lo(e/pxe),i=n/2,a=n*iP,s=i,o=n*iP+n,l=-s,c=o;t.moveTo(i,a),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Us*i-Vs*a,Vs*i+Us*a),t.lineTo(Us*s-Vs*o,Vs*s+Us*o),t.lineTo(Us*l-Vs*c,Vs*l+Us*c),t.lineTo(Us*i+Vs*a,Us*a-Vs*i),t.lineTo(Us*s+Vs*o,Us*o-Vs*s),t.lineTo(Us*l+Vs*c,Us*c-Vs*l),t.closePath()}};function gxe(t,e){let n=null,i=ED(a);t=typeof t=="function"?t:Dr(t||OD),e=typeof e=="function"?e:Dr(e===void 0?64:+e);function a(){let s;if(n||(n=s=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Dr(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Dr(+s),a):e},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function Ow(){}function Dw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function P9(t){this._context=t}P9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function yxe(t){return new P9(t)}function O9(t){this._context=t}O9.prototype={areaStart:Ow,areaEnd:Ow,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xxe(t){return new O9(t)}function D9(t){this._context=t}D9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Dw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vxe(t){return new D9(t)}function M9(t){this._context=t}M9.prototype={areaStart:Ow,areaEnd:Ow,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function bxe(t){return new M9(t)}function T6(t){return t<0?-1:1}function k6(t,e,n){var i=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(i||a<0&&-0),o=(n-t._y1)/(a||i<0&&-0),l=(s*a+o*i)/(i+a);return(T6(s)+T6(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function A6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function G2(t,e,n){var i=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-i)/3;t._context.bezierCurveTo(i+l,a+l*e,s-l,o-l*n,s,o)}function Mw(t){this._context=t}Mw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:G2(this,this._t0,A6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,G2(this,A6(this,n=k6(this,t,e)),n);break;default:G2(this,this._t0,n=k6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function I9(t){this._context=new R9(t)}(I9.prototype=Object.create(Mw.prototype)).point=function(t,e){Mw.prototype.point.call(this,e,t)};function R9(t){this._context=t}R9.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,a,s){this._context.bezierCurveTo(e,t,i,n,s,a)}};function jxe(t){return new Mw(t)}function wxe(t){return new I9(t)}function L9(t){this._context=t}L9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=E6(t),a=E6(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],a[0][s],i[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function E6(t){var e,n=t.length-1,i,a=new Array(n),s=new Array(n),o=new Array(n);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=a[e]/s[e-1],s[e]-=i,o[e]-=i*o[e-1];for(a[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[n-1]=(t[n]+a[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function Sxe(t){return new L9(t)}function uN(t,e){this._context=t,this._t=e}uN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Nxe(t){return new uN(t,.5)}function _xe(t){return new uN(t,0)}function Cxe(t){return new uN(t,1)}function ag(t,e){if((o=t.length)>1)for(var n=1,i,a,s=t[e[0]],o,l=s.length;n<o;++n)for(a=s,s=t[e[n]],i=0;i<l;++i)s[i][1]+=s[i][0]=isNaN(a[i][1])?a[i][0]:a[i][1]}function aP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Txe(t,e){return t[e]}function kxe(t){const e=[];return e.key=t,e}function Axe(){var t=Dr([]),e=aP,n=ag,i=Txe;function a(s){var o=Array.from(t.apply(this,arguments),kxe),l,c=o.length,d=-1,f;for(const p of s)for(l=0,++d;l<c;++l)(o[l][d]=[0,+i(p,o[l].key,d,s)]).data=p;for(l=0,f=PD(e(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Dr(Array.from(s)),a):t},a.value=function(s){return arguments.length?(i=typeof s=="function"?s:Dr(+s),a):i},a.order=function(s){return arguments.length?(e=s==null?aP:typeof s=="function"?s:Dr(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(n=s??ag,a):n},a}function Exe(t,e){if((i=t.length)>0){for(var n,i,a=0,s=t[0].length,o;a<s;++a){for(o=n=0;n<i;++n)o+=t[n][a][1]||0;if(o)for(n=0;n<i;++n)t[n][a][1]/=o}ag(t,e)}}function Pxe(t,e){if((a=t.length)>0){for(var n=0,i=t[e[0]],a,s=i.length;n<s;++n){for(var o=0,l=0;o<a;++o)l+=t[o][n][1]||0;i[n][1]+=i[n][0]=-l/2}ag(t,e)}}function Oxe(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var n=0,i=1,a,s,o;i<s;++i){for(var l=0,c=0,d=0;l<o;++l){for(var f=t[e[l]],p=f[i][1]||0,y=f[i-1][1]||0,x=(p-y)/2,v=0;v<l;++v){var S=t[e[v]],N=S[i][1]||0,_=S[i-1][1]||0;x+=N-_}c+=p,d+=x*p}a[i-1][1]+=a[i-1][0]=n,c&&(n-=d/c)}a[i-1][1]+=a[i-1][0]=n,ag(t,e)}}function Iv(t){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(t)}var Dxe=["type","size","sizeType"];function sP(){return sP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sP.apply(this,arguments)}function P6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function O6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(n),!0).forEach(function(i){Mxe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Mxe(t,e,n){return e=Ixe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ixe(t){var e=Rxe(t,"string");return Iv(e)=="symbol"?e:e+""}function Rxe(t,e){if(Iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Iv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lxe(t,e){if(t==null)return{};var n=Fxe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Fxe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var F9={symbolCircle:OD,symbolCross:axe,symbolDiamond:oxe,symbolSquare:lxe,symbolStar:hxe,symbolTriangle:fxe,symbolWye:mxe},$xe=Math.PI/180,Bxe=function(e){var n="symbol".concat(oN(e));return F9[n]||OD},zxe=function(e,n,i){if(n==="area")return e;switch(i){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*$xe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},qxe=function(e,n){F9["symbol".concat(oN(e))]=n},DD=function(e){var n=e.type,i=n===void 0?"circle":n,a=e.size,s=a===void 0?64:a,o=e.sizeType,l=o===void 0?"area":o,c=Lxe(e,Dxe),d=O6(O6({},c),{},{type:i,size:s,sizeType:l}),f=function(){var N=Bxe(i),_=gxe().type(N).size(zxe(s,l,i));return _()},p=d.className,y=d.cx,x=d.cy,v=Ft(d,!0);return y===+y&&x===+x&&s===+s?Se.createElement("path",sP({},v,{className:un("recharts-symbols",p),transform:"translate(".concat(y,", ").concat(x,")"),d:f()})):null};DD.registerSymbol=qxe;function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function oP(){return oP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},oP.apply(this,arguments)}function D6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Uxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D6(Object(n),!0).forEach(function(i){Rv(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Vxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hxe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,B9(i.key),i)}}function Gxe(t,e,n){return e&&Hxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wxe(t,e,n){return e=Iw(e),Yxe(t,$9()?Reflect.construct(e,n||[],Iw(t).constructor):e.apply(t,n))}function Yxe(t,e){if(e&&(sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kxe(t)}function Kxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($9=function(){return!!t})()}function Iw(t){return Iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iw(t)}function Qxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lP(t,e)}function lP(t,e){return lP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},lP(t,e)}function Rv(t,e,n){return e=B9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B9(t){var e=Xxe(t,"string");return sg(e)=="symbol"?e:e+""}function Xxe(t,e){if(sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(sg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var So=32,MD=function(t){function e(){return Vxe(this,e),Wxe(this,e,arguments)}return Qxe(e,t),Gxe(e,[{key:"renderIcon",value:function(i){var a=this.props.inactiveColor,s=So/2,o=So/6,l=So/3,c=i.inactive?a:i.color;if(i.type==="plainline")return Se.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:s,x2:So,y2:s,className:"recharts-legend-icon"});if(i.type==="line")return Se.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(So,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(i.type==="rect")return Se.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(So/8,"h").concat(So,"v").concat(So*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Se.isValidElement(i.legendIcon)){var d=Uxe({},i);return delete d.legendIcon,Se.cloneElement(i.legendIcon,d)}return Se.createElement(DD,{fill:c,cx:s,cy:s,size:So,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,f={x:0,y:0,width:So,height:So},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(x,v){var S=x.formatter||c,N=un(Rv(Rv({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",x.inactive));if(x.type==="none")return null;var _=en(x.value)?null:x.value;Oo(!en(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=x.inactive?d:x.color;return Se.createElement("li",oP({className:N,style:p,key:"legend-item-".concat(v)},Sf(i.props,x,v)),Se.createElement(eP,{width:o,height:o,viewBox:f,style:y},i.renderIcon(x)),Se.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},S?S(_,x,v):_))})}},{key:"render",value:function(){var i=this.props,a=i.payload,s=i.layout,o=i.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Se.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(b.PureComponent);Rv(MD,"displayName","Legend");Rv(MD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var W2,M6;function Jxe(){if(M6)return W2;M6=1;var t=iN();function e(){this.__data__=new t,this.size=0}return W2=e,W2}var Y2,I6;function Zxe(){if(I6)return Y2;I6=1;function t(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i}return Y2=t,Y2}var K2,R6;function eve(){if(R6)return K2;R6=1;function t(e){return this.__data__.get(e)}return K2=t,K2}var Q2,L6;function tve(){if(L6)return Q2;L6=1;function t(e){return this.__data__.has(e)}return Q2=t,Q2}var X2,F6;function nve(){if(F6)return X2;F6=1;var t=iN(),e=ND(),n=_D(),i=200;function a(s,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<i-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return X2=a,X2}var J2,$6;function z9(){if($6)return J2;$6=1;var t=iN(),e=Jxe(),n=Zxe(),i=eve(),a=tve(),s=nve();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=i,o.prototype.has=a,o.prototype.set=s,J2=o,J2}var Z2,B6;function rve(){if(B6)return Z2;B6=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return Z2=e,Z2}var eT,z6;function ive(){if(z6)return eT;z6=1;function t(e){return this.__data__.has(e)}return eT=t,eT}var tT,q6;function q9(){if(q6)return tT;q6=1;var t=_D(),e=rve(),n=ive();function i(a){var s=-1,o=a==null?0:a.length;for(this.__data__=new t;++s<o;)this.add(a[s])}return i.prototype.add=i.prototype.push=e,i.prototype.has=n,tT=i,tT}var nT,U6;function U9(){if(U6)return nT;U6=1;function t(e,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(e[i],i,e))return!0;return!1}return nT=t,nT}var rT,V6;function V9(){if(V6)return rT;V6=1;function t(e,n){return e.has(n)}return rT=t,rT}var iT,H6;function H9(){if(H6)return iT;H6=1;var t=q9(),e=U9(),n=V9(),i=1,a=2;function s(o,l,c,d,f,p){var y=c&i,x=o.length,v=l.length;if(x!=v&&!(y&&v>x))return!1;var S=p.get(o),N=p.get(l);if(S&&N)return S==l&&N==o;var _=-1,T=!0,C=c&a?new t:void 0;for(p.set(o,l),p.set(l,o);++_<x;){var O=o[_],k=l[_];if(d)var P=y?d(k,O,_,l,o,p):d(O,k,_,o,l,p);if(P!==void 0){if(P)continue;T=!1;break}if(C){if(!e(l,function(I,F){if(!n(C,F)&&(O===I||f(O,I,c,d,p)))return C.push(F)})){T=!1;break}}else if(!(O===k||f(O,k,c,d,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return iT=s,iT}var aT,G6;function ave(){if(G6)return aT;G6=1;var t=Ml(),e=t.Uint8Array;return aT=e,aT}var sT,W6;function sve(){if(W6)return sT;W6=1;function t(e){var n=-1,i=Array(e.size);return e.forEach(function(a,s){i[++n]=[s,a]}),i}return sT=t,sT}var oT,Y6;function ID(){if(Y6)return oT;Y6=1;function t(e){var n=-1,i=Array(e.size);return e.forEach(function(a){i[++n]=a}),i}return oT=t,oT}var lT,K6;function ove(){if(K6)return lT;K6=1;var t=Rb(),e=ave(),n=SD(),i=H9(),a=sve(),s=ID(),o=1,l=2,c="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",y="[object Number]",x="[object RegExp]",v="[object Set]",S="[object String]",N="[object Symbol]",_="[object ArrayBuffer]",T="[object DataView]",C=t?t.prototype:void 0,O=C?C.valueOf:void 0;function k(P,I,F,B,$,L,V){switch(F){case T:if(P.byteLength!=I.byteLength||P.byteOffset!=I.byteOffset)return!1;P=P.buffer,I=I.buffer;case _:return!(P.byteLength!=I.byteLength||!L(new e(P),new e(I)));case c:case d:case y:return n(+P,+I);case f:return P.name==I.name&&P.message==I.message;case x:case S:return P==I+"";case p:var H=a;case v:var te=B&o;if(H||(H=s),P.size!=I.size&&!te)return!1;var X=V.get(P);if(X)return X==I;B|=l,V.set(P,I);var q=i(H(P),H(I),B,$,L,V);return V.delete(P),q;case N:if(O)return O.call(P)==O.call(I)}return!1}return lT=k,lT}var cT,Q6;function G9(){if(Q6)return cT;Q6=1;function t(e,n){for(var i=-1,a=n.length,s=e.length;++i<a;)e[s+i]=n[i];return e}return cT=t,cT}var uT,X6;function lve(){if(X6)return uT;X6=1;var t=G9(),e=os();function n(i,a,s){var o=a(i);return e(i)?o:t(o,s(i))}return uT=n,uT}var dT,J6;function cve(){if(J6)return dT;J6=1;function t(e,n){for(var i=-1,a=e==null?0:e.length,s=0,o=[];++i<a;){var l=e[i];n(l,i,e)&&(o[s++]=l)}return o}return dT=t,dT}var hT,Z6;function uve(){if(Z6)return hT;Z6=1;function t(){return[]}return hT=t,hT}var fT,eL;function dve(){if(eL)return fT;eL=1;var t=cve(),e=uve(),n=Object.prototype,i=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(l){return i.call(o,l)}))}:e;return fT=s,fT}var pT,tL;function hve(){if(tL)return pT;tL=1;function t(e,n){for(var i=-1,a=Array(e);++i<e;)a[i]=n(i);return a}return pT=t,pT}var mT,nL;function fve(){if(nL)return mT;nL=1;var t=Uc(),e=Vc(),n="[object Arguments]";function i(a){return e(a)&&t(a)==n}return mT=i,mT}var gT,rL;function RD(){if(rL)return gT;rL=1;var t=fve(),e=Vc(),n=Object.prototype,i=n.hasOwnProperty,a=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return e(o)&&i.call(o,"callee")&&!a.call(o,"callee")};return gT=s,gT}var hv={exports:{}},yT,iL;function pve(){if(iL)return yT;iL=1;function t(){return!1}return yT=t,yT}hv.exports;var aL;function W9(){return aL||(aL=1,function(t,e){var n=Ml(),i=pve(),a=e&&!e.nodeType&&e,s=a&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||i;t.exports=d}(hv,hv.exports)),hv.exports}var xT,sL;function LD(){if(sL)return xT;sL=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(i,a){var s=typeof i;return a=a??t,!!a&&(s=="number"||s!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<a}return xT=n,xT}var vT,oL;function FD(){if(oL)return vT;oL=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return vT=e,vT}var bT,lL;function mve(){if(lL)return bT;lL=1;var t=Uc(),e=FD(),n=Vc(),i="[object Arguments]",a="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",y="[object RegExp]",x="[object Set]",v="[object String]",S="[object WeakMap]",N="[object ArrayBuffer]",_="[object DataView]",T="[object Float32Array]",C="[object Float64Array]",O="[object Int8Array]",k="[object Int16Array]",P="[object Int32Array]",I="[object Uint8Array]",F="[object Uint8ClampedArray]",B="[object Uint16Array]",$="[object Uint32Array]",L={};L[T]=L[C]=L[O]=L[k]=L[P]=L[I]=L[F]=L[B]=L[$]=!0,L[i]=L[a]=L[N]=L[s]=L[_]=L[o]=L[l]=L[c]=L[d]=L[f]=L[p]=L[y]=L[x]=L[v]=L[S]=!1;function V(H){return n(H)&&e(H.length)&&!!L[t(H)]}return bT=V,bT}var jT,cL;function Y9(){if(cL)return jT;cL=1;function t(e){return function(n){return e(n)}}return jT=t,jT}var fv={exports:{}};fv.exports;var uL;function gve(){return uL||(uL=1,function(t,e){var n=f9(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(fv,fv.exports)),fv.exports}var wT,dL;function K9(){if(dL)return wT;dL=1;var t=mve(),e=Y9(),n=gve(),i=n&&n.isTypedArray,a=i?e(i):t;return wT=a,wT}var ST,hL;function yve(){if(hL)return ST;hL=1;var t=hve(),e=RD(),n=os(),i=W9(),a=LD(),s=K9(),o=Object.prototype,l=o.hasOwnProperty;function c(d,f){var p=n(d),y=!p&&e(d),x=!p&&!y&&i(d),v=!p&&!y&&!x&&s(d),S=p||y||x||v,N=S?t(d.length,String):[],_=N.length;for(var T in d)(f||l.call(d,T))&&!(S&&(T=="length"||x&&(T=="offset"||T=="parent")||v&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||a(T,_)))&&N.push(T);return N}return ST=c,ST}var NT,fL;function xve(){if(fL)return NT;fL=1;var t=Object.prototype;function e(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||t;return n===a}return NT=e,NT}var _T,pL;function Q9(){if(pL)return _T;pL=1;function t(e,n){return function(i){return e(n(i))}}return _T=t,_T}var CT,mL;function vve(){if(mL)return CT;mL=1;var t=Q9(),e=t(Object.keys,Object);return CT=e,CT}var TT,gL;function bve(){if(gL)return TT;gL=1;var t=xve(),e=vve(),n=Object.prototype,i=n.hasOwnProperty;function a(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))i.call(s,l)&&l!="constructor"&&o.push(l);return o}return TT=a,TT}var kT,yL;function Lb(){if(yL)return kT;yL=1;var t=wD(),e=FD();function n(i){return i!=null&&e(i.length)&&!t(i)}return kT=n,kT}var AT,xL;function dN(){if(xL)return AT;xL=1;var t=yve(),e=bve(),n=Lb();function i(a){return n(a)?t(a):e(a)}return AT=i,AT}var ET,vL;function jve(){if(vL)return ET;vL=1;var t=lve(),e=dve(),n=dN();function i(a){return t(a,n,e)}return ET=i,ET}var PT,bL;function wve(){if(bL)return PT;bL=1;var t=jve(),e=1,n=Object.prototype,i=n.hasOwnProperty;function a(s,o,l,c,d,f){var p=l&e,y=t(s),x=y.length,v=t(o),S=v.length;if(x!=S&&!p)return!1;for(var N=x;N--;){var _=y[N];if(!(p?_ in o:i.call(o,_)))return!1}var T=f.get(s),C=f.get(o);if(T&&C)return T==o&&C==s;var O=!0;f.set(s,o),f.set(o,s);for(var k=p;++N<x;){_=y[N];var P=s[_],I=o[_];if(c)var F=p?c(I,P,_,o,s,f):c(P,I,_,s,o,f);if(!(F===void 0?P===I||d(P,I,l,c,f):F)){O=!1;break}k||(k=_=="constructor")}if(O&&!k){var B=s.constructor,$=o.constructor;B!=$&&"constructor"in s&&"constructor"in o&&!(typeof B=="function"&&B instanceof B&&typeof $=="function"&&$ instanceof $)&&(O=!1)}return f.delete(s),f.delete(o),O}return PT=a,PT}var OT,jL;function Sve(){if(jL)return OT;jL=1;var t=Pf(),e=Ml(),n=t(e,"DataView");return OT=n,OT}var DT,wL;function Nve(){if(wL)return DT;wL=1;var t=Pf(),e=Ml(),n=t(e,"Promise");return DT=n,DT}var MT,SL;function X9(){if(SL)return MT;SL=1;var t=Pf(),e=Ml(),n=t(e,"Set");return MT=n,MT}var IT,NL;function _ve(){if(NL)return IT;NL=1;var t=Pf(),e=Ml(),n=t(e,"WeakMap");return IT=n,IT}var RT,_L;function Cve(){if(_L)return RT;_L=1;var t=Sve(),e=ND(),n=Nve(),i=X9(),a=_ve(),s=Uc(),o=p9(),l="[object Map]",c="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",y="[object DataView]",x=o(t),v=o(e),S=o(n),N=o(i),_=o(a),T=s;return(t&&T(new t(new ArrayBuffer(1)))!=y||e&&T(new e)!=l||n&&T(n.resolve())!=d||i&&T(new i)!=f||a&&T(new a)!=p)&&(T=function(C){var O=s(C),k=O==c?C.constructor:void 0,P=k?o(k):"";if(P)switch(P){case x:return y;case v:return l;case S:return d;case N:return f;case _:return p}return O}),RT=T,RT}var LT,CL;function Tve(){if(CL)return LT;CL=1;var t=z9(),e=H9(),n=ove(),i=wve(),a=Cve(),s=os(),o=W9(),l=K9(),c=1,d="[object Arguments]",f="[object Array]",p="[object Object]",y=Object.prototype,x=y.hasOwnProperty;function v(S,N,_,T,C,O){var k=s(S),P=s(N),I=k?f:a(S),F=P?f:a(N);I=I==d?p:I,F=F==d?p:F;var B=I==p,$=F==p,L=I==F;if(L&&o(S)){if(!o(N))return!1;k=!0,B=!1}if(L&&!B)return O||(O=new t),k||l(S)?e(S,N,_,T,C,O):n(S,N,I,_,T,C,O);if(!(_&c)){var V=B&&x.call(S,"__wrapped__"),H=$&&x.call(N,"__wrapped__");if(V||H){var te=V?S.value():S,X=H?N.value():N;return O||(O=new t),C(te,X,_,T,O)}}return L?(O||(O=new t),i(S,N,_,T,C,O)):!1}return LT=v,LT}var FT,TL;function $D(){if(TL)return FT;TL=1;var t=Tve(),e=Vc();function n(i,a,s,o,l){return i===a?!0:i==null||a==null||!e(i)&&!e(a)?i!==i&&a!==a:t(i,a,s,o,n,l)}return FT=n,FT}var $T,kL;function kve(){if(kL)return $T;kL=1;var t=z9(),e=$D(),n=1,i=2;function a(s,o,l,c){var d=l.length,f=d,p=!c;if(s==null)return!f;for(s=Object(s);d--;){var y=l[d];if(p&&y[2]?y[1]!==s[y[0]]:!(y[0]in s))return!1}for(;++d<f;){y=l[d];var x=y[0],v=s[x],S=y[1];if(p&&y[2]){if(v===void 0&&!(x in s))return!1}else{var N=new t;if(c)var _=c(v,S,x,s,o,N);if(!(_===void 0?e(S,v,n|i,c,N):_))return!1}}return!0}return $T=a,$T}var BT,AL;function J9(){if(AL)return BT;AL=1;var t=yd();function e(n){return n===n&&!t(n)}return BT=e,BT}var zT,EL;function Ave(){if(EL)return zT;EL=1;var t=J9(),e=dN();function n(i){for(var a=e(i),s=a.length;s--;){var o=a[s],l=i[o];a[s]=[o,l,t(l)]}return a}return zT=n,zT}var qT,PL;function Z9(){if(PL)return qT;PL=1;function t(e,n){return function(i){return i==null?!1:i[e]===n&&(n!==void 0||e in Object(i))}}return qT=t,qT}var UT,OL;function Eve(){if(OL)return UT;OL=1;var t=kve(),e=Ave(),n=Z9();function i(a){var s=e(a);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===a||t(o,a,s)}}return UT=i,UT}var VT,DL;function Pve(){if(DL)return VT;DL=1;function t(e,n){return e!=null&&n in Object(e)}return VT=t,VT}var HT,ML;function Ove(){if(ML)return HT;ML=1;var t=y9(),e=RD(),n=os(),i=LD(),a=FD(),s=sN();function o(l,c,d){c=t(c,l);for(var f=-1,p=c.length,y=!1;++f<p;){var x=s(c[f]);if(!(y=l!=null&&d(l,x)))break;l=l[x]}return y||++f!=p?y:(p=l==null?0:l.length,!!p&&a(p)&&i(x,p)&&(n(l)||e(l)))}return HT=o,HT}var GT,IL;function Dve(){if(IL)return GT;IL=1;var t=Pve(),e=Ove();function n(i,a){return i!=null&&e(i,a,t)}return GT=n,GT}var WT,RL;function Mve(){if(RL)return WT;RL=1;var t=$D(),e=x9(),n=Dve(),i=jD(),a=J9(),s=Z9(),o=sN(),l=1,c=2;function d(f,p){return i(f)&&a(p)?s(o(f),p):function(y){var x=e(y,f);return x===void 0&&x===p?n(y,f):t(p,x,l|c)}}return WT=d,WT}var YT,LL;function qg(){if(LL)return YT;LL=1;function t(e){return e}return YT=t,YT}var KT,FL;function Ive(){if(FL)return KT;FL=1;function t(e){return function(n){return n==null?void 0:n[e]}}return KT=t,KT}var QT,$L;function Rve(){if($L)return QT;$L=1;var t=TD();function e(n){return function(i){return t(i,n)}}return QT=e,QT}var XT,BL;function Lve(){if(BL)return XT;BL=1;var t=Ive(),e=Rve(),n=jD(),i=sN();function a(s){return n(s)?t(i(s)):e(s)}return XT=a,XT}var JT,zL;function Il(){if(zL)return JT;zL=1;var t=Eve(),e=Mve(),n=qg(),i=os(),a=Lve();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?i(o)?e(o[0],o[1]):t(o):a(o)}return JT=s,JT}var ZT,qL;function e7(){if(qL)return ZT;qL=1;function t(e,n,i,a){for(var s=e.length,o=i+(a?1:-1);a?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return ZT=t,ZT}var ek,UL;function Fve(){if(UL)return ek;UL=1;function t(e){return e!==e}return ek=t,ek}var tk,VL;function $ve(){if(VL)return tk;VL=1;function t(e,n,i){for(var a=i-1,s=e.length;++a<s;)if(e[a]===n)return a;return-1}return tk=t,tk}var nk,HL;function Bve(){if(HL)return nk;HL=1;var t=e7(),e=Fve(),n=$ve();function i(a,s,o){return s===s?n(a,s,o):t(a,e,o)}return nk=i,nk}var rk,GL;function zve(){if(GL)return rk;GL=1;var t=Bve();function e(n,i){var a=n==null?0:n.length;return!!a&&t(n,i,0)>-1}return rk=e,rk}var ik,WL;function qve(){if(WL)return ik;WL=1;function t(e,n,i){for(var a=-1,s=e==null?0:e.length;++a<s;)if(i(n,e[a]))return!0;return!1}return ik=t,ik}var ak,YL;function Uve(){if(YL)return ak;YL=1;function t(){}return ak=t,ak}var sk,KL;function Vve(){if(KL)return sk;KL=1;var t=X9(),e=Uve(),n=ID(),i=1/0,a=t&&1/n(new t([,-0]))[1]==i?function(s){return new t(s)}:e;return sk=a,sk}var ok,QL;function Hve(){if(QL)return ok;QL=1;var t=q9(),e=zve(),n=qve(),i=V9(),a=Vve(),s=ID(),o=200;function l(c,d,f){var p=-1,y=e,x=c.length,v=!0,S=[],N=S;if(f)v=!1,y=n;else if(x>=o){var _=d?null:a(c);if(_)return s(_);v=!1,y=i,N=new t}else N=d?[]:S;e:for(;++p<x;){var T=c[p],C=d?d(T):T;if(T=f||T!==0?T:0,v&&C===C){for(var O=N.length;O--;)if(N[O]===C)continue e;d&&N.push(C),S.push(T)}else y(N,C,f)||(N!==S&&N.push(C),S.push(T))}return S}return ok=l,ok}var lk,XL;function Gve(){if(XL)return lk;XL=1;var t=Il(),e=Hve();function n(i,a){return i&&i.length?e(i,t(a,2)):[]}return lk=n,lk}var Wve=Gve();const JL=Bn(Wve);function t7(t,e,n){return e===!0?JL(t,n):en(e)?JL(t,e):t}function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}var Yve=["ref"];function ZL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function dc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZL(Object(n),!0).forEach(function(i){hN(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZL(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Kve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e5(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r7(i.key),i)}}function Qve(t,e,n){return e&&e5(t.prototype,e),n&&e5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xve(t,e,n){return e=Rw(e),Jve(t,n7()?Reflect.construct(e,n||[],Rw(t).constructor):e.apply(t,n))}function Jve(t,e){if(e&&(og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zve(t)}function Zve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n7=function(){return!!t})()}function Rw(t){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rw(t)}function ebe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cP(t,e)}function cP(t,e){return cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},cP(t,e)}function hN(t,e,n){return e=r7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r7(t){var e=tbe(t,"string");return og(e)=="symbol"?e:e+""}function tbe(t,e){if(og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(og(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function nbe(t,e){if(t==null)return{};var n=rbe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function rbe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function ibe(t){return t.value}function abe(t,e){if(Se.isValidElement(t))return Se.cloneElement(t,e);if(typeof t=="function")return Se.createElement(t,e);e.ref;var n=nbe(e,Yve);return Se.createElement(MD,n)}var t5=1,Tc=function(t){function e(){var n;Kve(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=Xve(this,e,[].concat(a)),hN(n,"lastBoundingBox",{width:-1,height:-1}),n}return ebe(e,t),Qve(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();return i.height=this.wrapperNode.offsetHeight,i.width=this.wrapperNode.offsetWidth,i}return null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>t5||Math.abs(a.height-this.lastBoundingBox.height)>t5)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,i&&i(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?dc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,f=a.chartHeight,p,y;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(o==="center"&&s==="vertical"){var x=this.getBBoxSnapshot();p={left:((d||0)-x.width)/2}}else p=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();y={top:((f||0)-v.height)/2}}else y=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return dc(dc({},p),y)}},{key:"render",value:function(){var i=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,f=a.payload,p=dc(dc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Se.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){i.wrapperNode=x}},abe(s,dc(dc({},this.props),{},{payload:t7(f,d,ibe)})))}}],[{key:"getWithHeight",value:function(i,a){var s=dc(dc({},this.defaultProps),i.props),o=s.layout;return o==="vertical"&&bt(i.props.height)?{height:i.props.height}:o==="horizontal"?{width:i.props.width||a}:null}}])}(b.PureComponent);hN(Tc,"displayName","Legend");hN(Tc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var ck,n5;function sbe(){if(n5)return ck;n5=1;var t=Rb(),e=RD(),n=os(),i=t?t.isConcatSpreadable:void 0;function a(s){return n(s)||e(s)||!!(i&&s&&s[i])}return ck=a,ck}var uk,r5;function i7(){if(r5)return uk;r5=1;var t=G9(),e=sbe();function n(i,a,s,o,l){var c=-1,d=i.length;for(s||(s=e),l||(l=[]);++c<d;){var f=i[c];a>0&&s(f)?a>1?n(f,a-1,s,o,l):t(l,f):o||(l[l.length]=f)}return l}return uk=n,uk}var dk,i5;function obe(){if(i5)return dk;i5=1;function t(e){return function(n,i,a){for(var s=-1,o=Object(n),l=a(n),c=l.length;c--;){var d=l[e?c:++s];if(i(o[d],d,o)===!1)break}return n}}return dk=t,dk}var hk,a5;function lbe(){if(a5)return hk;a5=1;var t=obe(),e=t();return hk=e,hk}var fk,s5;function a7(){if(s5)return fk;s5=1;var t=lbe(),e=dN();function n(i,a){return i&&t(i,a,e)}return fk=n,fk}var pk,o5;function cbe(){if(o5)return pk;o5=1;var t=Lb();function e(n,i){return function(a,s){if(a==null)return a;if(!t(a))return n(a,s);for(var o=a.length,l=i?o:-1,c=Object(a);(i?l--:++l<o)&&s(c[l],l,c)!==!1;);return a}}return pk=e,pk}var mk,l5;function BD(){if(l5)return mk;l5=1;var t=a7(),e=cbe(),n=e(t);return mk=n,mk}var gk,c5;function s7(){if(c5)return gk;c5=1;var t=BD(),e=Lb();function n(i,a){var s=-1,o=e(i)?Array(i.length):[];return t(i,function(l,c,d){o[++s]=a(l,c,d)}),o}return gk=n,gk}var yk,u5;function ube(){if(u5)return yk;u5=1;function t(e,n){var i=e.length;for(e.sort(n);i--;)e[i]=e[i].value;return e}return yk=t,yk}var xk,d5;function dbe(){if(d5)return xk;d5=1;var t=$g();function e(n,i){if(n!==i){var a=n!==void 0,s=n===null,o=n===n,l=t(n),c=i!==void 0,d=i===null,f=i===i,p=t(i);if(!d&&!p&&!l&&n>i||l&&c&&f&&!d&&!p||s&&c&&f||!a&&f||!o)return 1;if(!s&&!l&&!p&&n<i||p&&a&&o&&!s&&!l||d&&a&&o||!c&&o||!f)return-1}return 0}return xk=e,xk}var vk,h5;function hbe(){if(h5)return vk;h5=1;var t=dbe();function e(n,i,a){for(var s=-1,o=n.criteria,l=i.criteria,c=o.length,d=a.length;++s<c;){var f=t(o[s],l[s]);if(f){if(s>=d)return f;var p=a[s];return f*(p=="desc"?-1:1)}}return n.index-i.index}return vk=e,vk}var bk,f5;function fbe(){if(f5)return bk;f5=1;var t=CD(),e=TD(),n=Il(),i=s7(),a=ube(),s=Y9(),o=hbe(),l=qg(),c=os();function d(f,p,y){p.length?p=t(p,function(S){return c(S)?function(N){return e(N,S.length===1?S[0]:S)}:S}):p=[l];var x=-1;p=t(p,s(n));var v=i(f,function(S,N,_){var T=t(p,function(C){return C(S)});return{criteria:T,index:++x,value:S}});return a(v,function(S,N){return o(S,N,y)})}return bk=d,bk}var jk,p5;function pbe(){if(p5)return jk;p5=1;function t(e,n,i){switch(i.length){case 0:return e.call(n);case 1:return e.call(n,i[0]);case 2:return e.call(n,i[0],i[1]);case 3:return e.call(n,i[0],i[1],i[2])}return e.apply(n,i)}return jk=t,jk}var wk,m5;function mbe(){if(m5)return wk;m5=1;var t=pbe(),e=Math.max;function n(i,a,s){return a=e(a===void 0?i.length-1:a,0),function(){for(var o=arguments,l=-1,c=e(o.length-a,0),d=Array(c);++l<c;)d[l]=o[a+l];l=-1;for(var f=Array(a+1);++l<a;)f[l]=o[l];return f[a]=s(d),t(i,this,f)}}return wk=n,wk}var Sk,g5;function gbe(){if(g5)return Sk;g5=1;function t(e){return function(){return e}}return Sk=t,Sk}var Nk,y5;function o7(){if(y5)return Nk;y5=1;var t=Pf(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Nk=e,Nk}var _k,x5;function ybe(){if(x5)return _k;x5=1;var t=gbe(),e=o7(),n=qg(),i=e?function(a,s){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return _k=i,_k}var Ck,v5;function xbe(){if(v5)return Ck;v5=1;var t=800,e=16,n=Date.now;function i(a){var s=0,o=0;return function(){var l=n(),c=e-(l-o);if(o=l,c>0){if(++s>=t)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return Ck=i,Ck}var Tk,b5;function vbe(){if(b5)return Tk;b5=1;var t=ybe(),e=xbe(),n=e(t);return Tk=n,Tk}var kk,j5;function bbe(){if(j5)return kk;j5=1;var t=qg(),e=mbe(),n=vbe();function i(a,s){return n(e(a,s,t),a+"")}return kk=i,kk}var Ak,w5;function fN(){if(w5)return Ak;w5=1;var t=SD(),e=Lb(),n=LD(),i=yd();function a(s,o,l){if(!i(l))return!1;var c=typeof o;return(c=="number"?e(l)&&n(o,l.length):c=="string"&&o in l)?t(l[o],s):!1}return Ak=a,Ak}var Ek,S5;function jbe(){if(S5)return Ek;S5=1;var t=i7(),e=fbe(),n=bbe(),i=fN(),a=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&i(s,o[0],o[1])?o=[]:l>2&&i(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return Ek=a,Ek}var wbe=jbe();const zD=Bn(wbe);function Lv(t){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(t)}function uP(){return uP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},uP.apply(this,arguments)}function Sbe(t,e){return Tbe(t)||Cbe(t,e)||_be(t,e)||Nbe()}function Nbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _be(t,e){if(t){if(typeof t=="string")return N5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N5(t,e)}}function N5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Cbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Tbe(t){if(Array.isArray(t))return t}function _5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Pk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(n),!0).forEach(function(i){kbe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_5(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function kbe(t,e,n){return e=Abe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Abe(t){var e=Ebe(t,"string");return Lv(e)=="symbol"?e:e+""}function Ebe(t,e){if(Lv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Lv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pbe(t){return Array.isArray(t)&&Si(t[0])&&Si(t[1])?t.join(" ~ "):t}var Obe=function(e){var n=e.separator,i=n===void 0?" : ":n,a=e.contentStyle,s=a===void 0?{}:a,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,f=e.payload,p=e.formatter,y=e.itemSorter,x=e.wrapperClassName,v=e.labelClassName,S=e.label,N=e.labelFormatter,_=e.accessibilityLayer,T=_===void 0?!1:_,C=function(){if(f&&f.length){var V={padding:0,margin:0},H=(y?zD(f,y):f).map(function(te,X){if(te.type==="none")return null;var q=Pk({display:"block",paddingTop:4,paddingBottom:4,color:te.color||"#000"},l),W=te.formatter||p||Pbe,ae=te.value,G=te.name,z=ae,le=G;if(W&&z!=null&&le!=null){var je=W(ae,G,te,X,f);if(Array.isArray(je)){var K=Sbe(je,2);z=K[0],le=K[1]}else z=je}return Se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(X),style:q},Si(le)?Se.createElement("span",{className:"recharts-tooltip-item-name"},le):null,Si(le)?Se.createElement("span",{className:"recharts-tooltip-item-separator"},i):null,Se.createElement("span",{className:"recharts-tooltip-item-value"},z),Se.createElement("span",{className:"recharts-tooltip-item-unit"},te.unit||""))});return Se.createElement("ul",{className:"recharts-tooltip-item-list",style:V},H)}return null},O=Pk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=Pk({margin:0},d),P=!ln(S),I=P?S:"",F=un("recharts-default-tooltip",x),B=un("recharts-tooltip-label",v);P&&N&&f!==void 0&&f!==null&&(I=N(S,f));var $=T?{role:"status","aria-live":"assertive"}:{};return Se.createElement("div",uP({className:F,style:O},$),Se.createElement("p",{className:B,style:k},Se.isValidElement(I)?I:"".concat(I)),C())};function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function kj(t,e,n){return e=Dbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dbe(t){var e=Mbe(t,"string");return Fv(e)=="symbol"?e:e+""}function Mbe(t,e){if(Fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Fv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yx="recharts-tooltip-wrapper",Ibe={visibility:"hidden"};function Rbe(t){var e=t.coordinate,n=t.translateX,i=t.translateY;return un(Yx,kj(kj(kj(kj({},"".concat(Yx,"-right"),bt(n)&&e&&bt(e.x)&&n>=e.x),"".concat(Yx,"-left"),bt(n)&&e&&bt(e.x)&&n<e.x),"".concat(Yx,"-bottom"),bt(i)&&e&&bt(e.y)&&i>=e.y),"".concat(Yx,"-top"),bt(i)&&e&&bt(e.y)&&i<e.y))}function C5(t){var e=t.allowEscapeViewBox,n=t.coordinate,i=t.key,a=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(s&&bt(s[i]))return s[i];var f=n[i]-l-a,p=n[i]+a;if(e[i])return o[i]?f:p;if(o[i]){var y=f,x=c[i];return y<x?Math.max(p,c[i]):Math.max(f,c[i])}var v=p+l,S=c[i]+d;return v>S?Math.max(f,c[i]):Math.max(p,c[i])}function Lbe(t){var e=t.translateX,n=t.translateY,i=t.useTranslate3d;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Fbe(t){var e=t.allowEscapeViewBox,n=t.coordinate,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,f,p;return o.height>0&&o.width>0&&n?(f=C5({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=C5({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Lbe({translateX:f,translateY:p,useTranslate3d:l})):d=Ibe,{cssProperties:d,cssClasses:Rbe({translateX:f,translateY:p,coordinate:n})}}function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}function T5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function k5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T5(Object(n),!0).forEach(function(i){hP(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bbe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,c7(i.key),i)}}function zbe(t,e,n){return e&&Bbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qbe(t,e,n){return e=Lw(e),Ube(t,l7()?Reflect.construct(e,n||[],Lw(t).constructor):e.apply(t,n))}function Ube(t,e){if(e&&(lg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vbe(t)}function Vbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l7=function(){return!!t})()}function Lw(t){return Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lw(t)}function Hbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dP(t,e)}function dP(t,e){return dP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},dP(t,e)}function hP(t,e,n){return e=c7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c7(t){var e=Gbe(t,"string");return lg(e)=="symbol"?e:e+""}function Gbe(t,e){if(lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(lg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var A5=1,Wbe=function(t){function e(){var n;$be(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=qbe(this,e,[].concat(a)),hP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),hP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),n}return Hbe(e,t),zbe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.state.lastBoundingBox.width)>A5||Math.abs(i.height-this.state.lastBoundingBox.height)>A5)&&this.setState({lastBoundingBox:{width:i.width,height:i.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,f=a.coordinate,p=a.hasPayload,y=a.isAnimationActive,x=a.offset,v=a.position,S=a.reverseDirection,N=a.useTranslate3d,_=a.viewBox,T=a.wrapperStyle,C=Fbe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:x,position:v,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:N,viewBox:_}),O=C.cssClasses,k=C.cssProperties,P=k5(k5({transition:y&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},T);return Se.createElement("div",{tabIndex:-1,className:O,style:P,ref:function(F){i.wrapperNode=F}},d)}}])}(b.PureComponent),Ybe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},xd={isSsr:Ybe()};function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}function E5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function P5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E5(Object(n),!0).forEach(function(i){qD(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E5(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Kbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qbe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,d7(i.key),i)}}function Xbe(t,e,n){return e&&Qbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jbe(t,e,n){return e=Fw(e),Zbe(t,u7()?Reflect.construct(e,n||[],Fw(t).constructor):e.apply(t,n))}function Zbe(t,e){if(e&&(cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e0e(t)}function e0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u7=function(){return!!t})()}function Fw(t){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fw(t)}function t0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fP(t,e)}function fP(t,e){return fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},fP(t,e)}function qD(t,e,n){return e=d7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d7(t){var e=n0e(t,"string");return cg(e)=="symbol"?e:e+""}function n0e(t,e){if(cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(cg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function r0e(t){return t.dataKey}function i0e(t,e){return Se.isValidElement(t)?Se.cloneElement(t,e):typeof t=="function"?Se.createElement(t,e):Se.createElement(Obe,e)}var Aa=function(t){function e(){return Kbe(this,e),Jbe(this,e,arguments)}return t0e(e,t),Xbe(e,[{key:"render",value:function(){var i=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,f=a.coordinate,p=a.filterNull,y=a.isAnimationActive,x=a.offset,v=a.payload,S=a.payloadUniqBy,N=a.position,_=a.reverseDirection,T=a.useTranslate3d,C=a.viewBox,O=a.wrapperStyle,k=v??[];p&&k.length&&(k=t7(v.filter(function(I){return I.value!=null&&(I.hide!==!0||i.props.includeHidden)}),S,r0e));var P=k.length>0;return Se.createElement(Wbe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:y,active:s,coordinate:f,hasPayload:P,offset:x,position:N,reverseDirection:_,useTranslate3d:T,viewBox:C,wrapperStyle:O},i0e(d,P5(P5({},this.props),{},{payload:k})))}}])}(b.PureComponent);qD(Aa,"displayName","Tooltip");qD(Aa,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!xd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Ok,O5;function a0e(){if(O5)return Ok;O5=1;var t=Ml(),e=function(){return t.Date.now()};return Ok=e,Ok}var Dk,D5;function s0e(){if(D5)return Dk;D5=1;var t=/\s/;function e(n){for(var i=n.length;i--&&t.test(n.charAt(i)););return i}return Dk=e,Dk}var Mk,M5;function o0e(){if(M5)return Mk;M5=1;var t=s0e(),e=/^\s+/;function n(i){return i&&i.slice(0,t(i)+1).replace(e,"")}return Mk=n,Mk}var Ik,I5;function h7(){if(I5)return Ik;I5=1;var t=o0e(),e=yd(),n=$g(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(n(d))return i;if(e(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=e(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=t(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):a.test(d)?i:+d}return Ik=c,Ik}var Rk,R5;function l0e(){if(R5)return Rk;R5=1;var t=yd(),e=a0e(),n=h7(),i="Expected a function",a=Math.max,s=Math.min;function o(l,c,d){var f,p,y,x,v,S,N=0,_=!1,T=!1,C=!0;if(typeof l!="function")throw new TypeError(i);c=n(c)||0,t(d)&&(_=!!d.leading,T="maxWait"in d,y=T?a(n(d.maxWait)||0,c):y,C="trailing"in d?!!d.trailing:C);function O(H){var te=f,X=p;return f=p=void 0,N=H,x=l.apply(X,te),x}function k(H){return N=H,v=setTimeout(F,c),_?O(H):x}function P(H){var te=H-S,X=H-N,q=c-te;return T?s(q,y-X):q}function I(H){var te=H-S,X=H-N;return S===void 0||te>=c||te<0||T&&X>=y}function F(){var H=e();if(I(H))return B(H);v=setTimeout(F,P(H))}function B(H){return v=void 0,C&&f?O(H):(f=p=void 0,x)}function $(){v!==void 0&&clearTimeout(v),N=0,f=S=p=v=void 0}function L(){return v===void 0?x:B(e())}function V(){var H=e(),te=I(H);if(f=arguments,p=this,S=H,te){if(v===void 0)return k(S);if(T)return clearTimeout(v),v=setTimeout(F,c),O(S)}return v===void 0&&(v=setTimeout(F,c)),x}return V.cancel=$,V.flush=L,V}return Rk=o,Rk}var Lk,L5;function c0e(){if(L5)return Lk;L5=1;var t=l0e(),e=yd(),n="Expected a function";function i(a,s,o){var l=!0,c=!0;if(typeof a!="function")throw new TypeError(n);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(a,s,{leading:l,maxWait:s,trailing:c})}return Lk=i,Lk}var u0e=c0e();const f7=Bn(u0e);function $v(t){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(t)}function F5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Aj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F5(Object(n),!0).forEach(function(i){d0e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F5(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function d0e(t,e,n){return e=h0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h0e(t){var e=f0e(t,"string");return $v(e)=="symbol"?e:e+""}function f0e(t,e){if($v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if($v(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p0e(t,e){return x0e(t)||y0e(t,e)||g0e(t,e)||m0e()}function m0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g0e(t,e){if(t){if(typeof t=="string")return $5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $5(t,e)}}function $5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function y0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function x0e(t){if(Array.isArray(t))return t}var iw=b.forwardRef(function(t,e){var n=t.aspect,i=t.initialDimension,a=i===void 0?{width:-1,height:-1}:i,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,f=d===void 0?0:d,p=t.minHeight,y=t.maxHeight,x=t.children,v=t.debounce,S=v===void 0?0:v,N=t.id,_=t.className,T=t.onResize,C=t.style,O=C===void 0?{}:C,k=b.useRef(null),P=b.useRef();P.current=T,b.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var I=b.useState({containerWidth:a.width,containerHeight:a.height}),F=p0e(I,2),B=F[0],$=F[1],L=b.useCallback(function(H,te){$(function(X){var q=Math.round(H),W=Math.round(te);return X.containerWidth===q&&X.containerHeight===W?X:{containerWidth:q,containerHeight:W}})},[]);b.useEffect(function(){var H=function(G){var z,le=G[0].contentRect,je=le.width,K=le.height;L(je,K),(z=P.current)===null||z===void 0||z.call(P,je,K)};S>0&&(H=f7(H,S,{trailing:!0,leading:!1}));var te=new ResizeObserver(H),X=k.current.getBoundingClientRect(),q=X.width,W=X.height;return L(q,W),te.observe(k.current),function(){te.disconnect()}},[L,S]);var V=b.useMemo(function(){var H=B.containerWidth,te=B.containerHeight;if(H<0||te<0)return null;Oo(Yh(o)||Yh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Oo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var X=Yh(o)?H:o,q=Yh(c)?te:c;n&&n>0&&(X?q=X/n:q&&(X=q*n),y&&q>y&&(q=y)),Oo(X>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,X,q,o,c,f,p,n);var W=!Array.isArray(x)&&Cc(x.type).endsWith("Chart");return Se.Children.map(x,function(ae){return Se.isValidElement(ae)?b.cloneElement(ae,Aj({width:X,height:q},W?{style:Aj({height:"100%",width:"100%",maxHeight:q,maxWidth:X},ae.props.style)}:{})):ae})},[n,x,c,y,p,f,B,o]);return Se.createElement("div",{id:N?"".concat(N):void 0,className:un("recharts-responsive-container",_),style:Aj(Aj({},O),{},{width:o,height:c,minWidth:f,minHeight:p,maxHeight:y}),ref:k},V)}),Fb=function(e){return null};Fb.displayName="Cell";function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function B5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function pP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B5(Object(n),!0).forEach(function(i){v0e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B5(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function v0e(t,e,n){return e=b0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b0e(t){var e=j0e(t,"string");return Bv(e)=="symbol"?e:e+""}function j0e(t,e){if(Bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Bv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gm={widthCache:{},cacheCount:0},w0e=2e3,S0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},z5="recharts_measurement_span";function N0e(t){var e=pP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var vv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||xd.isSsr)return{width:0,height:0};var i=N0e(n),a=JSON.stringify({text:e,copyStyle:i});if(gm.widthCache[a])return gm.widthCache[a];try{var s=document.getElementById(z5);s||(s=document.createElement("span"),s.setAttribute("id",z5),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=pP(pP({},S0e),i);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return gm.widthCache[a]=c,++gm.cacheCount>w0e&&(gm.cacheCount=0,gm.widthCache={}),c}catch{return{width:0,height:0}}},_0e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function $w(t,e){return A0e(t)||k0e(t,e)||T0e(t,e)||C0e()}function C0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T0e(t,e){if(t){if(typeof t=="string")return q5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q5(t,e)}}function q5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function k0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function A0e(t){if(Array.isArray(t))return t}function E0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U5(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,O0e(i.key),i)}}function P0e(t,e,n){return e&&U5(t.prototype,e),n&&U5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O0e(t){var e=D0e(t,"string");return zv(e)=="symbol"?e:e+""}function D0e(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(zv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var V5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,H5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,M0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,I0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,p7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},R0e=Object.keys(p7),Tm="NaN";function L0e(t,e){return t*p7[e]}var Ej=function(){function t(e,n){E0e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!M0e.test(n)&&(this.num=NaN,this.unit=""),R0e.includes(n)&&(this.num=L0e(e,n),this.unit="px")}return P0e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var i,a=(i=I0e.exec(n))!==null&&i!==void 0?i:[],s=$w(a,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function m7(t){if(t.includes(Tm))return Tm;for(var e=t;e.includes("*")||e.includes("/");){var n,i=(n=V5.exec(e))!==null&&n!==void 0?n:[],a=$w(i,4),s=a[1],o=a[2],l=a[3],c=Ej.parse(s??""),d=Ej.parse(l??""),f=o==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return Tm;e=e.replace(V5,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,y=(p=H5.exec(e))!==null&&p!==void 0?p:[],x=$w(y,4),v=x[1],S=x[2],N=x[3],_=Ej.parse(v??""),T=Ej.parse(N??""),C=S==="+"?_.add(T):_.subtract(T);if(C.isNaN())return Tm;e=e.replace(H5,C.toString())}return e}var G5=/\(([^()]*)\)/;function F0e(t){for(var e=t;e.includes("(");){var n=G5.exec(e),i=$w(n,2),a=i[1];e=e.replace(G5,m7(a))}return e}function $0e(t){var e=t.replace(/\s+/g,"");return e=F0e(e),e=m7(e),e}function B0e(t){try{return $0e(t)}catch{return Tm}}function Fk(t){var e=B0e(t.slice(5,-1));return e===Tm?"":e}var z0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],q0e=["dx","dy","angle","className","breakAll"];function mP(){return mP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mP.apply(this,arguments)}function W5(t,e){if(t==null)return{};var n=U0e(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function U0e(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Y5(t,e){return W0e(t)||G0e(t,e)||H0e(t,e)||V0e()}function V0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H0e(t,e){if(t){if(typeof t=="string")return K5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K5(t,e)}}function K5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function G0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function W0e(t){if(Array.isArray(t))return t}var g7=/[ \f\n\r\t\v\u2028\u2029]+/,y7=function(e){var n=e.children,i=e.breakAll,a=e.style;try{var s=[];ln(n)||(i?s=n.toString().split(""):s=n.toString().split(g7));var o=s.map(function(c){return{word:c,width:vv(c,a).width}}),l=i?0:vv("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Y0e=function(e,n,i,a,s){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,f=bt(o),p=l,y=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return X.reduce(function(q,W){var ae=W.word,G=W.width,z=q[q.length-1];if(z&&(a==null||s||z.width+G+i<Number(a)))z.words.push(ae),z.width+=G+i;else{var le={words:[ae],width:G};q.push(le)}return q},[])},x=y(n),v=function(X){return X.reduce(function(q,W){return q.width>W.width?q:W})};if(!f)return x;for(var S="",N=function(X){var q=p.slice(0,X),W=y7({breakAll:d,style:c,children:q+S}).wordsWithComputedWidth,ae=y(W),G=ae.length>o||v(ae).width>Number(a);return[G,ae]},_=0,T=p.length-1,C=0,O;_<=T&&C<=p.length-1;){var k=Math.floor((_+T)/2),P=k-1,I=N(P),F=Y5(I,2),B=F[0],$=F[1],L=N(k),V=Y5(L,1),H=V[0];if(!B&&!H&&(_=k+1),B&&H&&(T=k-1),!B&&H){O=$;break}C++}return O||x},Q5=function(e){var n=ln(e)?[]:e.toString().split(g7);return[{words:n}]},K0e=function(e){var n=e.width,i=e.scaleToFit,a=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((n||i)&&!xd.isSsr){var c,d,f=y7({breakAll:o,children:a,style:s});if(f){var p=f.wordsWithComputedWidth,y=f.spaceWidth;c=p,d=y}else return Q5(a);return Y0e({breakAll:o,children:a,maxLines:l,style:s},c,d,n,i)}return Q5(a)},X5="#808080",Nf=function(e){var n=e.x,i=n===void 0?0:n,a=e.y,s=a===void 0?0:a,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,f=e.scaleToFit,p=f===void 0?!1:f,y=e.textAnchor,x=y===void 0?"start":y,v=e.verticalAnchor,S=v===void 0?"end":v,N=e.fill,_=N===void 0?X5:N,T=W5(e,z0e),C=b.useMemo(function(){return K0e({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:p,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,p,T.style,T.width]),O=T.dx,k=T.dy,P=T.angle,I=T.className,F=T.breakAll,B=W5(T,q0e);if(!Si(i)||!Si(s))return null;var $=i+(bt(O)?O:0),L=s+(bt(k)?k:0),V;switch(S){case"start":V=Fk("calc(".concat(d,")"));break;case"middle":V=Fk("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:V=Fk("calc(".concat(C.length-1," * -").concat(l,")"));break}var H=[];if(p){var te=C[0].width,X=T.width;H.push("scale(".concat((bt(X)?X/te:1)/te,")"))}return P&&H.push("rotate(".concat(P,", ").concat($,", ").concat(L,")")),H.length&&(B.transform=H.join(" ")),Se.createElement("text",mP({},Ft(B,!0),{x:$,y:L,className:un("recharts-text",I),textAnchor:x,fill:_.includes("url")?X5:_}),C.map(function(q,W){var ae=q.words.join(F?"":" ");return Se.createElement("tspan",{x:$,dy:W===0?V:l,key:"".concat(ae,"-").concat(W)},ae)}))};function sd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Q0e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function UD(t){let e,n,i;t.length!==2?(e=sd,n=(l,c)=>sd(t(l),c),i=(l,c)=>t(l)-c):(e=t===sd||t===Q0e?t:X0e,n=t,i=t);function a(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<0?d=p+1:f=p}while(d<f)}return d}function s(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function o(l,c,d=0,f=l.length){const p=a(l,c,d,f-1);return p>d&&i(l[p-1],c)>-i(l[p],c)?p-1:p}return{left:a,center:o,right:s}}function X0e(){return 0}function x7(t){return t===null?NaN:+t}function*J0e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Z0e=UD(sd),$b=Z0e.right;UD(x7).center;class J5 extends Map{constructor(e,n=n1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,a]of e)this.set(i,a)}get(e){return super.get(Z5(this,e))}has(e){return super.has(Z5(this,e))}set(e,n){return super.set(e1e(this,e),n)}delete(e){return super.delete(t1e(this,e))}}function Z5({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function e1e({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function t1e({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function n1e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function r1e(t=sd){if(t===sd)return v7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function v7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const i1e=Math.sqrt(50),a1e=Math.sqrt(10),s1e=Math.sqrt(2);function Bw(t,e,n){const i=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(i)),s=i/Math.pow(10,a),o=s>=i1e?10:s>=a1e?5:s>=s1e?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=n&&n<2?Bw(t,e,n*2):[l,c,d]}function gP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[a,s,o]=i?Bw(e,t,n):Bw(t,e,n);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(i)if(o<0)for(let d=0;d<l;++d)c[d]=(s-d)/-o;else for(let d=0;d<l;++d)c[d]=(s-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function yP(t,e,n){return e=+e,t=+t,n=+n,Bw(t,e,n)[2]}function xP(t,e,n){e=+e,t=+t,n=+n;const i=e<t,a=i?yP(e,t,n):yP(t,e,n);return(i?-1:1)*(a<0?1/-a:a)}function eF(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function tF(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function b7(t,e,n=0,i=1/0,a){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(a=a===void 0?v7:r1e(a);i>n;){if(i-n>600){const c=i-n+1,d=e-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),x=Math.max(n,Math.floor(e-d*p/c+y)),v=Math.min(i,Math.floor(e+(c-d)*p/c+y));b7(t,e,x,v,a)}const s=t[e];let o=n,l=i;for(Kx(t,n,e),a(t[i],s)>0&&Kx(t,n,i);o<l;){for(Kx(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[n],s)===0?Kx(t,n,l):(++l,Kx(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function Kx(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function o1e(t,e,n){if(t=Float64Array.from(J0e(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return tF(t);if(e>=1)return eF(t);var i,a=(i-1)*e,s=Math.floor(a),o=eF(b7(t,s).subarray(0,s+1)),l=tF(t.subarray(s+1));return o+(l-o)*(a-s)}}function l1e(t,e,n=x7){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,a=(i-1)*e,s=Math.floor(a),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function c1e(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(a);++i<a;)s[i]=t+i*n;return s}function to(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Hc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const vP=Symbol("implicit");function VD(){var t=new J5,e=[],n=[],i=vP;function a(s){let o=t.get(s);if(o===void 0){if(i!==vP)return i;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new J5;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return VD(e,n).unknown(i)},to.apply(a,arguments),a}function qv(){var t=VD().unknown(void 0),e=t.domain,n=t.range,i=0,a=1,s,o,l=!1,c=0,d=0,f=.5;delete t.unknown;function p(){var y=e().length,x=a<i,v=x?a:i,S=x?i:a;s=(S-v)/Math.max(1,y-c+d*2),l&&(s=Math.floor(s)),v+=(S-v-s*(y-c))*f,o=s*(1-c),l&&(v=Math.round(v),o=Math.round(o));var N=c1e(y).map(function(_){return v+s*_});return n(x?N.reverse():N)}return t.domain=function(y){return arguments.length?(e(y),p()):e()},t.range=function(y){return arguments.length?([i,a]=y,i=+i,a=+a,p()):[i,a]},t.rangeRound=function(y){return[i,a]=y,i=+i,a=+a,l=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(y){return arguments.length?(l=!!y,p()):l},t.padding=function(y){return arguments.length?(c=Math.min(1,d=+y),p()):c},t.paddingInner=function(y){return arguments.length?(c=Math.min(1,y),p()):c},t.paddingOuter=function(y){return arguments.length?(d=+y,p()):d},t.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},t.copy=function(){return qv(e(),[i,a]).round(l).paddingInner(c).paddingOuter(d).align(f)},to.apply(p(),arguments)}function j7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return j7(e())},t}function bv(){return j7(qv.apply(null,arguments).paddingInner(1))}function HD(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function w7(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Bb(){}var Uv=.7,zw=1/Uv,Lm="\\s*([+-]?\\d+)\\s*",Vv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u1e=/^#([0-9a-f]{3,8})$/,d1e=new RegExp(`^rgb\\(${Lm},${Lm},${Lm}\\)$`),h1e=new RegExp(`^rgb\\(${kl},${kl},${kl}\\)$`),f1e=new RegExp(`^rgba\\(${Lm},${Lm},${Lm},${Vv}\\)$`),p1e=new RegExp(`^rgba\\(${kl},${kl},${kl},${Vv}\\)$`),m1e=new RegExp(`^hsl\\(${Vv},${kl},${kl}\\)$`),g1e=new RegExp(`^hsla\\(${Vv},${kl},${kl},${Vv}\\)$`),nF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HD(Bb,Hv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rF,formatHex:rF,formatHex8:y1e,formatHsl:x1e,formatRgb:iF,toString:iF});function rF(){return this.rgb().formatHex()}function y1e(){return this.rgb().formatHex8()}function x1e(){return S7(this).formatHsl()}function iF(){return this.rgb().formatRgb()}function Hv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=u1e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?aF(e):n===3?new ns(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Pj(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Pj(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=d1e.exec(t))?new ns(e[1],e[2],e[3],1):(e=h1e.exec(t))?new ns(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=f1e.exec(t))?Pj(e[1],e[2],e[3],e[4]):(e=p1e.exec(t))?Pj(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=m1e.exec(t))?lF(e[1],e[2]/100,e[3]/100,1):(e=g1e.exec(t))?lF(e[1],e[2]/100,e[3]/100,e[4]):nF.hasOwnProperty(t)?aF(nF[t]):t==="transparent"?new ns(NaN,NaN,NaN,0):null}function aF(t){return new ns(t>>16&255,t>>8&255,t&255,1)}function Pj(t,e,n,i){return i<=0&&(t=e=n=NaN),new ns(t,e,n,i)}function v1e(t){return t instanceof Bb||(t=Hv(t)),t?(t=t.rgb(),new ns(t.r,t.g,t.b,t.opacity)):new ns}function bP(t,e,n,i){return arguments.length===1?v1e(t):new ns(t,e,n,i??1)}function ns(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}HD(ns,bP,w7(Bb,{brighter(t){return t=t==null?zw:Math.pow(zw,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Uv:Math.pow(Uv,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ns(cf(this.r),cf(this.g),cf(this.b),qw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sF,formatHex:sF,formatHex8:b1e,formatRgb:oF,toString:oF}));function sF(){return`#${Kh(this.r)}${Kh(this.g)}${Kh(this.b)}`}function b1e(){return`#${Kh(this.r)}${Kh(this.g)}${Kh(this.b)}${Kh((isNaN(this.opacity)?1:this.opacity)*255)}`}function oF(){const t=qw(this.opacity);return`${t===1?"rgb(":"rgba("}${cf(this.r)}, ${cf(this.g)}, ${cf(this.b)}${t===1?")":`, ${t})`}`}function qw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Kh(t){return t=cf(t),(t<16?"0":"")+t.toString(16)}function lF(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ao(t,e,n,i)}function S7(t){if(t instanceof Ao)return new Ao(t.h,t.s,t.l,t.opacity);if(t instanceof Bb||(t=Hv(t)),!t)return new Ao;if(t instanceof Ao)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,l=s-a,c=(s+a)/2;return l?(e===s?o=(n-i)/l+(n<i)*6:n===s?o=(i-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Ao(o,l,c,t.opacity)}function j1e(t,e,n,i){return arguments.length===1?S7(t):new Ao(t,e,n,i??1)}function Ao(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}HD(Ao,j1e,w7(Bb,{brighter(t){return t=t==null?zw:Math.pow(zw,t),new Ao(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Uv:Math.pow(Uv,t),new Ao(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new ns($k(t>=240?t-240:t+120,a,i),$k(t,a,i),$k(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new Ao(cF(this.h),Oj(this.s),Oj(this.l),qw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qw(this.opacity);return`${t===1?"hsl(":"hsla("}${cF(this.h)}, ${Oj(this.s)*100}%, ${Oj(this.l)*100}%${t===1?")":`, ${t})`}`}}));function cF(t){return t=(t||0)%360,t<0?t+360:t}function Oj(t){return Math.max(0,Math.min(1,t||0))}function $k(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const GD=t=>()=>t;function w1e(t,e){return function(n){return t+n*e}}function S1e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function N1e(t){return(t=+t)==1?N7:function(e,n){return n-e?S1e(e,n,t):GD(isNaN(e)?n:e)}}function N7(t,e){var n=e-t;return n?w1e(t,n):GD(isNaN(t)?e:t)}const uF=function t(e){var n=N1e(e);function i(a,s){var o=n((a=bP(a)).r,(s=bP(s)).r),l=n(a.g,s.g),c=n(a.b,s.b),d=N7(a.opacity,s.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=c(f),a.opacity=d(f),a+""}}return i.gamma=t,i}(1);function _1e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),a;return function(s){for(a=0;a<n;++a)i[a]=t[a]*(1-s)+e[a]*s;return i}}function C1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function T1e(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,a=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)a[o]=Ug(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<i;++o)s[o]=a[o](l);return s}}function k1e(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Uw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function A1e(t,e){var n={},i={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=Ug(t[a],e[a]):i[a]=e[a];return function(s){for(a in n)i[a]=n[a](s);return i}}var jP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bk=new RegExp(jP.source,"g");function E1e(t){return function(){return t}}function P1e(t){return function(e){return t(e)+""}}function O1e(t,e){var n=jP.lastIndex=Bk.lastIndex=0,i,a,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(i=jP.exec(t))&&(a=Bk.exec(e));)(s=a.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Uw(i,a)})),n=Bk.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?P1e(c[0].x):E1e(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)l[(p=c[f]).i]=p.x(d);return l.join("")})}function Ug(t,e){var n=typeof e,i;return e==null||n==="boolean"?GD(e):(n==="number"?Uw:n==="string"?(i=Hv(e))?(e=i,uF):O1e:e instanceof Hv?uF:e instanceof Date?k1e:C1e(e)?_1e:Array.isArray(e)?T1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?A1e:Uw)(t,e)}function WD(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function D1e(t,e){e===void 0&&(e=t,t=Ug);for(var n=0,i=e.length-1,a=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(a,a=e[++n]);return function(o){var l=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[l](o-l)}}function M1e(t){return function(){return t}}function Vw(t){return+t}var dF=[0,1];function Da(t){return t}function wP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:M1e(isNaN(e)?NaN:.5)}function I1e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function R1e(t,e,n){var i=t[0],a=t[1],s=e[0],o=e[1];return a<i?(i=wP(a,i),s=n(o,s)):(i=wP(i,a),s=n(s,o)),function(l){return s(i(l))}}function L1e(t,e,n){var i=Math.min(t.length,e.length)-1,a=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)a[o]=wP(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var c=$b(t,l,1,i)-1;return s[c](a[c](l))}}function zb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function pN(){var t=dF,e=dF,n=Ug,i,a,s,o=Da,l,c,d;function f(){var y=Math.min(t.length,e.length);return o!==Da&&(o=I1e(t[0],t[y-1])),l=y>2?L1e:R1e,c=d=null,p}function p(y){return y==null||isNaN(y=+y)?s:(c||(c=l(t.map(i),e,n)))(i(o(y)))}return p.invert=function(y){return o(a((d||(d=l(e,t.map(i),Uw)))(y)))},p.domain=function(y){return arguments.length?(t=Array.from(y,Vw),f()):t.slice()},p.range=function(y){return arguments.length?(e=Array.from(y),f()):e.slice()},p.rangeRound=function(y){return e=Array.from(y),n=WD,f()},p.clamp=function(y){return arguments.length?(o=y?!0:Da,f()):o!==Da},p.interpolate=function(y){return arguments.length?(n=y,f()):n},p.unknown=function(y){return arguments.length?(s=y,p):s},function(y,x){return i=y,a=x,f()}}function YD(){return pN()(Da,Da)}function F1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Hw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function ug(t){return t=Hw(Math.abs(t)),t?t[1]:NaN}function $1e(t,e){return function(n,i){for(var a=n.length,s=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),s.push(n.substring(a-=l,a+l)),!((c+=l+1)>i));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function B1e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var z1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gv(t){if(!(e=z1e.exec(t)))throw new Error("invalid format: "+t);var e;return new KD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Gv.prototype=KD.prototype;function KD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}KD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function q1e(t){e:for(var e=t.length,n=1,i=-1,a;n<e;++n)switch(t[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(a+1):t}var _7;function U1e(t,e){var n=Hw(t,e);if(!n)return t+"";var i=n[0],a=n[1],s=a-(_7=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Hw(t,Math.max(0,e+s-1))[0]}function hF(t,e){var n=Hw(t,e);if(!n)return t+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const fF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:F1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>hF(t*100,e),r:hF,s:U1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pF(t){return t}var mF=Array.prototype.map,gF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function V1e(t){var e=t.grouping===void 0||t.thousands===void 0?pF:$1e(mF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?pF:B1e(mF.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=Gv(p);var y=p.fill,x=p.align,v=p.sign,S=p.symbol,N=p.zero,_=p.width,T=p.comma,C=p.precision,O=p.trim,k=p.type;k==="n"?(T=!0,k="g"):fF[k]||(C===void 0&&(C=12),O=!0,k="g"),(N||y==="0"&&x==="=")&&(N=!0,y="0",x="=");var P=S==="$"?n:S==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",I=S==="$"?i:/[%p]/.test(k)?o:"",F=fF[k],B=/[defgprs%]/.test(k);C=C===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function $(L){var V=P,H=I,te,X,q;if(k==="c")H=F(L)+H,L="";else{L=+L;var W=L<0||1/L<0;if(L=isNaN(L)?c:F(Math.abs(L),C),O&&(L=q1e(L)),W&&+L==0&&v!=="+"&&(W=!1),V=(W?v==="("?v:l:v==="-"||v==="("?"":v)+V,H=(k==="s"?gF[8+_7/3]:"")+H+(W&&v==="("?")":""),B){for(te=-1,X=L.length;++te<X;)if(q=L.charCodeAt(te),48>q||q>57){H=(q===46?a+L.slice(te+1):L.slice(te))+H,L=L.slice(0,te);break}}}T&&!N&&(L=e(L,1/0));var ae=V.length+L.length+H.length,G=ae<_?new Array(_-ae+1).join(y):"";switch(T&&N&&(L=e(G+L,G.length?_-H.length:1/0),G=""),x){case"<":L=V+L+H+G;break;case"=":L=V+G+L+H;break;case"^":L=G.slice(0,ae=G.length>>1)+V+L+H+G.slice(ae);break;default:L=G+V+L+H;break}return s(L)}return $.toString=function(){return p+""},$}function f(p,y){var x=d((p=Gv(p),p.type="f",p)),v=Math.max(-8,Math.min(8,Math.floor(ug(y)/3)))*3,S=Math.pow(10,-v),N=gF[8+v/3];return function(_){return x(S*_)+N}}return{format:d,formatPrefix:f}}var Dj,QD,C7;H1e({thousands:",",grouping:[3],currency:["$",""]});function H1e(t){return Dj=V1e(t),QD=Dj.format,C7=Dj.formatPrefix,Dj}function G1e(t){return Math.max(0,-ug(Math.abs(t)))}function W1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ug(e)/3)))*3-ug(Math.abs(t)))}function Y1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ug(e)-ug(t))+1}function T7(t,e,n,i){var a=xP(t,e,n),s;switch(i=Gv(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=W1e(a,o))&&(i.precision=s),C7(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Y1e(a,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=G1e(a))&&(i.precision=s-(i.type==="%")*2);break}}return QD(i)}function vd(t){var e=t.domain;return t.ticks=function(n){var i=e();return gP(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var a=e();return T7(a[0],a[a.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),a=0,s=i.length-1,o=i[a],l=i[s],c,d,f=10;for(l<o&&(d=o,o=l,l=d,d=a,a=s,s=d);f-- >0;){if(d=yP(o,l,n),d===c)return i[a]=o,i[s]=l,e(i);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function Gw(){var t=YD();return t.copy=function(){return zb(t,Gw())},to.apply(t,arguments),vd(t)}function k7(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,Vw),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return k7(t).unknown(e)},t=arguments.length?Array.from(t,Vw):[0,1],vd(n)}function A7(t,e){t=t.slice();var n=0,i=t.length-1,a=t[n],s=t[i],o;return s<a&&(o=n,n=i,i=o,o=a,a=s,s=o),t[n]=e.floor(a),t[i]=e.ceil(s),t}function yF(t){return Math.log(t)}function xF(t){return Math.exp(t)}function K1e(t){return-Math.log(-t)}function Q1e(t){return-Math.exp(-t)}function X1e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function J1e(t){return t===10?X1e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Z1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function vF(t){return(e,n)=>-t(-e,n)}function XD(t){const e=t(yF,xF),n=e.domain;let i=10,a,s;function o(){return a=Z1e(i),s=J1e(i),n()[0]<0?(a=vF(a),s=vF(s),t(K1e,Q1e)):t(yF,xF),e}return e.base=function(l){return arguments.length?(i=+l,o()):i},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let y=a(d),x=a(f),v,S;const N=l==null?10:+l;let _=[];if(!(i%1)&&x-y<N){if(y=Math.floor(y),x=Math.ceil(x),d>0){for(;y<=x;++y)for(v=1;v<i;++v)if(S=y<0?v/s(-y):v*s(y),!(S<d)){if(S>f)break;_.push(S)}}else for(;y<=x;++y)for(v=i-1;v>=1;--v)if(S=y>0?v/s(-y):v*s(y),!(S<d)){if(S>f)break;_.push(S)}_.length*2<N&&(_=gP(d,f,N))}else _=gP(y,x,Math.min(x-y,N)).map(s);return p?_.reverse():_},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=Gv(c)).precision==null&&(c.trim=!0),c=QD(c)),l===1/0)return c;const d=Math.max(1,i*l/e.ticks().length);return f=>{let p=f/s(Math.round(a(f)));return p*i<i-.5&&(p*=i),p<=d?c(f):""}},e.nice=()=>n(A7(n(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function E7(){const t=XD(pN()).domain([1,10]);return t.copy=()=>zb(t,E7()).base(t.base()),to.apply(t,arguments),t}function bF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function jF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function JD(t){var e=1,n=t(bF(e),jF(e));return n.constant=function(i){return arguments.length?t(bF(e=+i),jF(e)):e},vd(n)}function P7(){var t=JD(pN());return t.copy=function(){return zb(t,P7()).constant(t.constant())},to.apply(t,arguments)}function wF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function eje(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function tje(t){return t<0?-t*t:t*t}function ZD(t){var e=t(Da,Da),n=1;function i(){return n===1?t(Da,Da):n===.5?t(eje,tje):t(wF(n),wF(1/n))}return e.exponent=function(a){return arguments.length?(n=+a,i()):n},vd(e)}function eM(){var t=ZD(pN());return t.copy=function(){return zb(t,eM()).exponent(t.exponent())},to.apply(t,arguments),t}function nje(){return eM.apply(null,arguments).exponent(.5)}function SF(t){return Math.sign(t)*t*t}function rje(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function O7(){var t=YD(),e=[0,1],n=!1,i;function a(s){var o=rje(t(s));return isNaN(o)?i:n?Math.round(o):o}return a.invert=function(s){return t.invert(SF(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,Vw)).map(SF)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.copy=function(){return O7(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},to.apply(a,arguments),vd(a)}function D7(){var t=[],e=[],n=[],i;function a(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=l1e(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?i:e[$b(n,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(sd),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return D7().domain(t).range(e).unknown(i)},to.apply(s,arguments)}function M7(){var t=0,e=1,n=1,i=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[$b(i,c,0,n)]:s}function l(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,i[0]]:d>=n?[i[n-1],e]:[i[d-1],i[d]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return i.slice()},o.copy=function(){return M7().domain([t,e]).range(a).unknown(s)},to.apply(vd(o),arguments)}function I7(){var t=[.5],e=[0,1],n,i=1;function a(s){return s!=null&&s<=s?e[$b(t,s,0,i)]:n}return a.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return I7().domain(t).range(e).unknown(n)},to.apply(a,arguments)}const zk=new Date,qk=new Date;function Ni(t,e,n,i){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let d;do c.push(d=new Date(+s)),e(s,l),t(s);while(d<s&&s<o);return c},a.filter=s=>Ni(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(a.count=(s,o)=>(zk.setTime(+s),qk.setTime(+o),t(zk),t(qk),Math.floor(n(zk,qk))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(i?o=>i(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Ww=Ni(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ww.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ni(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ww);Ww.range;const bc=1e3,Qs=bc*60,jc=Qs*60,Rc=jc*24,tM=Rc*7,NF=Rc*30,Uk=Rc*365,Qh=Ni(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*bc)},(t,e)=>(e-t)/bc,t=>t.getUTCSeconds());Qh.range;const nM=Ni(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bc)},(t,e)=>{t.setTime(+t+e*Qs)},(t,e)=>(e-t)/Qs,t=>t.getMinutes());nM.range;const rM=Ni(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Qs)},(t,e)=>(e-t)/Qs,t=>t.getUTCMinutes());rM.range;const iM=Ni(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bc-t.getMinutes()*Qs)},(t,e)=>{t.setTime(+t+e*jc)},(t,e)=>(e-t)/jc,t=>t.getHours());iM.range;const aM=Ni(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*jc)},(t,e)=>(e-t)/jc,t=>t.getUTCHours());aM.range;const qb=Ni(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Qs)/Rc,t=>t.getDate()-1);qb.range;const mN=Ni(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rc,t=>t.getUTCDate()-1);mN.range;const R7=Ni(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rc,t=>Math.floor(t/Rc));R7.range;function Df(t){return Ni(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Qs)/tM)}const gN=Df(0),Yw=Df(1),ije=Df(2),aje=Df(3),dg=Df(4),sje=Df(5),oje=Df(6);gN.range;Yw.range;ije.range;aje.range;dg.range;sje.range;oje.range;function Mf(t){return Ni(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/tM)}const yN=Mf(0),Kw=Mf(1),lje=Mf(2),cje=Mf(3),hg=Mf(4),uje=Mf(5),dje=Mf(6);yN.range;Kw.range;lje.range;cje.range;hg.range;uje.range;dje.range;const sM=Ni(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sM.range;const oM=Ni(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());oM.range;const Lc=Ni(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Lc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ni(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Lc.range;const Fc=Ni(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Fc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ni(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Fc.range;function L7(t,e,n,i,a,s){const o=[[Qh,1,bc],[Qh,5,5*bc],[Qh,15,15*bc],[Qh,30,30*bc],[s,1,Qs],[s,5,5*Qs],[s,15,15*Qs],[s,30,30*Qs],[a,1,jc],[a,3,3*jc],[a,6,6*jc],[a,12,12*jc],[i,1,Rc],[i,2,2*Rc],[n,1,tM],[e,1,NF],[e,3,3*NF],[t,1,Uk]];function l(d,f,p){const y=f<d;y&&([d,f]=[f,d]);const x=p&&typeof p.range=="function"?p:c(d,f,p),v=x?x.range(d,+f+1):[];return y?v.reverse():v}function c(d,f,p){const y=Math.abs(f-d)/p,x=UD(([,,N])=>N).right(o,y);if(x===o.length)return t.every(xP(d/Uk,f/Uk,p));if(x===0)return Ww.every(Math.max(xP(d,f,p),1));const[v,S]=o[y/o[x-1][2]<o[x][2]/y?x-1:x];return v.every(S)}return[l,c]}const[hje,fje]=L7(Fc,oM,yN,R7,aM,rM),[pje,mje]=L7(Lc,sM,gN,qb,iM,nM);function Vk(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Hk(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function gje(t){var e=t.dateTime,n=t.date,i=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=Xx(a),f=Jx(a),p=Xx(s),y=Jx(s),x=Xx(o),v=Jx(o),S=Xx(l),N=Jx(l),_=Xx(c),T=Jx(c),C={a:W,A:ae,b:G,B:z,c:null,d:EF,e:EF,f:$je,g:Kje,G:Xje,H:Rje,I:Lje,j:Fje,L:F7,m:Bje,M:zje,p:le,q:je,Q:DF,s:MF,S:qje,u:Uje,U:Vje,V:Hje,w:Gje,W:Wje,x:null,X:null,y:Yje,Y:Qje,Z:Jje,"%":OF},O={a:K,A:Oe,b:Ye,B:Me,c:null,d:PF,e:PF,f:nwe,g:hwe,G:pwe,H:Zje,I:ewe,j:twe,L:B7,m:rwe,M:iwe,p:Ie,q:be,Q:DF,s:MF,S:awe,u:swe,U:owe,V:lwe,w:cwe,W:uwe,x:null,X:null,y:dwe,Y:fwe,Z:mwe,"%":OF},k={a:$,A:L,b:V,B:H,c:te,d:kF,e:kF,f:Oje,g:TF,G:CF,H:AF,I:AF,j:kje,L:Pje,m:Tje,M:Aje,p:B,q:Cje,Q:Mje,s:Ije,S:Eje,u:jje,U:wje,V:Sje,w:bje,W:Nje,x:X,X:q,y:TF,Y:CF,Z:_je,"%":Dje};C.x=P(n,C),C.X=P(i,C),C.c=P(e,C),O.x=P(n,O),O.X=P(i,O),O.c=P(e,O);function P(re,ve){return function(ce){var fe=[],se=-1,Q=0,ie=re.length,ge,ee,we;for(ce instanceof Date||(ce=new Date(+ce));++se<ie;)re.charCodeAt(se)===37&&(fe.push(re.slice(Q,se)),(ee=_F[ge=re.charAt(++se)])!=null?ge=re.charAt(++se):ee=ge==="e"?" ":"0",(we=ve[ge])&&(ge=we(ce,ee)),fe.push(ge),Q=se+1);return fe.push(re.slice(Q,se)),fe.join("")}}function I(re,ve){return function(ce){var fe=Qx(1900,void 0,1),se=F(fe,re,ce+="",0),Q,ie;if(se!=ce.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(ve&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Q=Hk(Qx(fe.y,0,1)),ie=Q.getUTCDay(),Q=ie>4||ie===0?Kw.ceil(Q):Kw(Q),Q=mN.offset(Q,(fe.V-1)*7),fe.y=Q.getUTCFullYear(),fe.m=Q.getUTCMonth(),fe.d=Q.getUTCDate()+(fe.w+6)%7):(Q=Vk(Qx(fe.y,0,1)),ie=Q.getDay(),Q=ie>4||ie===0?Yw.ceil(Q):Yw(Q),Q=qb.offset(Q,(fe.V-1)*7),fe.y=Q.getFullYear(),fe.m=Q.getMonth(),fe.d=Q.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),ie="Z"in fe?Hk(Qx(fe.y,0,1)).getUTCDay():Vk(Qx(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(ie+5)%7:fe.w+fe.U*7-(ie+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,Hk(fe)):Vk(fe)}}function F(re,ve,ce,fe){for(var se=0,Q=ve.length,ie=ce.length,ge,ee;se<Q;){if(fe>=ie)return-1;if(ge=ve.charCodeAt(se++),ge===37){if(ge=ve.charAt(se++),ee=k[ge in _F?ve.charAt(se++):ge],!ee||(fe=ee(re,ce,fe))<0)return-1}else if(ge!=ce.charCodeAt(fe++))return-1}return fe}function B(re,ve,ce){var fe=d.exec(ve.slice(ce));return fe?(re.p=f.get(fe[0].toLowerCase()),ce+fe[0].length):-1}function $(re,ve,ce){var fe=x.exec(ve.slice(ce));return fe?(re.w=v.get(fe[0].toLowerCase()),ce+fe[0].length):-1}function L(re,ve,ce){var fe=p.exec(ve.slice(ce));return fe?(re.w=y.get(fe[0].toLowerCase()),ce+fe[0].length):-1}function V(re,ve,ce){var fe=_.exec(ve.slice(ce));return fe?(re.m=T.get(fe[0].toLowerCase()),ce+fe[0].length):-1}function H(re,ve,ce){var fe=S.exec(ve.slice(ce));return fe?(re.m=N.get(fe[0].toLowerCase()),ce+fe[0].length):-1}function te(re,ve,ce){return F(re,e,ve,ce)}function X(re,ve,ce){return F(re,n,ve,ce)}function q(re,ve,ce){return F(re,i,ve,ce)}function W(re){return o[re.getDay()]}function ae(re){return s[re.getDay()]}function G(re){return c[re.getMonth()]}function z(re){return l[re.getMonth()]}function le(re){return a[+(re.getHours()>=12)]}function je(re){return 1+~~(re.getMonth()/3)}function K(re){return o[re.getUTCDay()]}function Oe(re){return s[re.getUTCDay()]}function Ye(re){return c[re.getUTCMonth()]}function Me(re){return l[re.getUTCMonth()]}function Ie(re){return a[+(re.getUTCHours()>=12)]}function be(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var ve=P(re+="",C);return ve.toString=function(){return re},ve},parse:function(re){var ve=I(re+="",!1);return ve.toString=function(){return re},ve},utcFormat:function(re){var ve=P(re+="",O);return ve.toString=function(){return re},ve},utcParse:function(re){var ve=I(re+="",!0);return ve.toString=function(){return re},ve}}}var _F={"-":"",_:" ",0:"0"},Di=/^\s*\d+/,yje=/^%/,xje=/[\\^$*+?|[\]().{}]/g;function Yn(t,e,n){var i=t<0?"-":"",a=(i?-t:t)+"",s=a.length;return i+(s<n?new Array(n-s+1).join(e)+a:a)}function vje(t){return t.replace(xje,"\\$&")}function Xx(t){return new RegExp("^(?:"+t.map(vje).join("|")+")","i")}function Jx(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function bje(t,e,n){var i=Di.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function jje(t,e,n){var i=Di.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function wje(t,e,n){var i=Di.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Sje(t,e,n){var i=Di.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Nje(t,e,n){var i=Di.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function CF(t,e,n){var i=Di.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function TF(t,e,n){var i=Di.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function _je(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Cje(t,e,n){var i=Di.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function Tje(t,e,n){var i=Di.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function kF(t,e,n){var i=Di.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function kje(t,e,n){var i=Di.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function AF(t,e,n){var i=Di.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Aje(t,e,n){var i=Di.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Eje(t,e,n){var i=Di.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Pje(t,e,n){var i=Di.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Oje(t,e,n){var i=Di.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Dje(t,e,n){var i=yje.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Mje(t,e,n){var i=Di.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Ije(t,e,n){var i=Di.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function EF(t,e){return Yn(t.getDate(),e,2)}function Rje(t,e){return Yn(t.getHours(),e,2)}function Lje(t,e){return Yn(t.getHours()%12||12,e,2)}function Fje(t,e){return Yn(1+qb.count(Lc(t),t),e,3)}function F7(t,e){return Yn(t.getMilliseconds(),e,3)}function $je(t,e){return F7(t,e)+"000"}function Bje(t,e){return Yn(t.getMonth()+1,e,2)}function zje(t,e){return Yn(t.getMinutes(),e,2)}function qje(t,e){return Yn(t.getSeconds(),e,2)}function Uje(t){var e=t.getDay();return e===0?7:e}function Vje(t,e){return Yn(gN.count(Lc(t)-1,t),e,2)}function $7(t){var e=t.getDay();return e>=4||e===0?dg(t):dg.ceil(t)}function Hje(t,e){return t=$7(t),Yn(dg.count(Lc(t),t)+(Lc(t).getDay()===4),e,2)}function Gje(t){return t.getDay()}function Wje(t,e){return Yn(Yw.count(Lc(t)-1,t),e,2)}function Yje(t,e){return Yn(t.getFullYear()%100,e,2)}function Kje(t,e){return t=$7(t),Yn(t.getFullYear()%100,e,2)}function Qje(t,e){return Yn(t.getFullYear()%1e4,e,4)}function Xje(t,e){var n=t.getDay();return t=n>=4||n===0?dg(t):dg.ceil(t),Yn(t.getFullYear()%1e4,e,4)}function Jje(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yn(e/60|0,"0",2)+Yn(e%60,"0",2)}function PF(t,e){return Yn(t.getUTCDate(),e,2)}function Zje(t,e){return Yn(t.getUTCHours(),e,2)}function ewe(t,e){return Yn(t.getUTCHours()%12||12,e,2)}function twe(t,e){return Yn(1+mN.count(Fc(t),t),e,3)}function B7(t,e){return Yn(t.getUTCMilliseconds(),e,3)}function nwe(t,e){return B7(t,e)+"000"}function rwe(t,e){return Yn(t.getUTCMonth()+1,e,2)}function iwe(t,e){return Yn(t.getUTCMinutes(),e,2)}function awe(t,e){return Yn(t.getUTCSeconds(),e,2)}function swe(t){var e=t.getUTCDay();return e===0?7:e}function owe(t,e){return Yn(yN.count(Fc(t)-1,t),e,2)}function z7(t){var e=t.getUTCDay();return e>=4||e===0?hg(t):hg.ceil(t)}function lwe(t,e){return t=z7(t),Yn(hg.count(Fc(t),t)+(Fc(t).getUTCDay()===4),e,2)}function cwe(t){return t.getUTCDay()}function uwe(t,e){return Yn(Kw.count(Fc(t)-1,t),e,2)}function dwe(t,e){return Yn(t.getUTCFullYear()%100,e,2)}function hwe(t,e){return t=z7(t),Yn(t.getUTCFullYear()%100,e,2)}function fwe(t,e){return Yn(t.getUTCFullYear()%1e4,e,4)}function pwe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?hg(t):hg.ceil(t),Yn(t.getUTCFullYear()%1e4,e,4)}function mwe(){return"+0000"}function OF(){return"%"}function DF(t){return+t}function MF(t){return Math.floor(+t/1e3)}var ym,q7,U7;gwe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gwe(t){return ym=gje(t),q7=ym.format,ym.parse,U7=ym.utcFormat,ym.utcParse,ym}function ywe(t){return new Date(t)}function xwe(t){return t instanceof Date?+t:+new Date(+t)}function lM(t,e,n,i,a,s,o,l,c,d){var f=YD(),p=f.invert,y=f.domain,x=d(".%L"),v=d(":%S"),S=d("%I:%M"),N=d("%I %p"),_=d("%a %d"),T=d("%b %d"),C=d("%B"),O=d("%Y");function k(P){return(c(P)<P?x:l(P)<P?v:o(P)<P?S:s(P)<P?N:i(P)<P?a(P)<P?_:T:n(P)<P?C:O)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?y(Array.from(P,xwe)):y().map(ywe)},f.ticks=function(P){var I=y();return t(I[0],I[I.length-1],P??10)},f.tickFormat=function(P,I){return I==null?k:d(I)},f.nice=function(P){var I=y();return(!P||typeof P.range!="function")&&(P=e(I[0],I[I.length-1],P??10)),P?y(A7(I,P)):f},f.copy=function(){return zb(f,lM(t,e,n,i,a,s,o,l,c,d))},f}function vwe(){return to.apply(lM(pje,mje,Lc,sM,gN,qb,iM,nM,Qh,q7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bwe(){return to.apply(lM(hje,fje,Fc,oM,yN,mN,aM,rM,Qh,U7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xN(){var t=0,e=1,n,i,a,s,o=Da,l=!1,c;function d(p){return p==null||isNaN(p=+p)?c:o(a===0?.5:(p=(s(p)-n)*a,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),i=s(e=+e),a=n===i?0:1/(i-n),d):[t,e]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function f(p){return function(y){var x,v;return arguments.length?([x,v]=y,o=p(x,v),d):[o(0),o(1)]}}return d.range=f(Ug),d.rangeRound=f(WD),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return s=p,n=p(t),i=p(e),a=n===i?0:1/(i-n),d}}function bd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function V7(){var t=vd(xN()(Da));return t.copy=function(){return bd(t,V7())},Hc.apply(t,arguments)}function H7(){var t=XD(xN()).domain([1,10]);return t.copy=function(){return bd(t,H7()).base(t.base())},Hc.apply(t,arguments)}function G7(){var t=JD(xN());return t.copy=function(){return bd(t,G7()).constant(t.constant())},Hc.apply(t,arguments)}function cM(){var t=ZD(xN());return t.copy=function(){return bd(t,cM()).exponent(t.exponent())},Hc.apply(t,arguments)}function jwe(){return cM.apply(null,arguments).exponent(.5)}function W7(){var t=[],e=Da;function n(i){if(i!=null&&!isNaN(i=+i))return e(($b(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let a of i)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(sd),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,a)=>e(a/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(a,s)=>o1e(t,s/i))},n.copy=function(){return W7(e).domain(t)},Hc.apply(n,arguments)}function vN(){var t=0,e=.5,n=1,i=1,a,s,o,l,c,d=Da,f,p=!1,y;function x(S){return isNaN(S=+S)?y:(S=.5+((S=+f(S))-s)*(i*S<i*s?l:c),d(p?Math.max(0,Math.min(1,S)):S))}x.domain=function(S){return arguments.length?([t,e,n]=S,a=f(t=+t),s=f(e=+e),o=f(n=+n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),i=s<a?-1:1,x):[t,e,n]},x.clamp=function(S){return arguments.length?(p=!!S,x):p},x.interpolator=function(S){return arguments.length?(d=S,x):d};function v(S){return function(N){var _,T,C;return arguments.length?([_,T,C]=N,d=D1e(S,[_,T,C]),x):[d(0),d(.5),d(1)]}}return x.range=v(Ug),x.rangeRound=v(WD),x.unknown=function(S){return arguments.length?(y=S,x):y},function(S){return f=S,a=S(t),s=S(e),o=S(n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),i=s<a?-1:1,x}}function Y7(){var t=vd(vN()(Da));return t.copy=function(){return bd(t,Y7())},Hc.apply(t,arguments)}function K7(){var t=XD(vN()).domain([.1,1,10]);return t.copy=function(){return bd(t,K7()).base(t.base())},Hc.apply(t,arguments)}function Q7(){var t=JD(vN());return t.copy=function(){return bd(t,Q7()).constant(t.constant())},Hc.apply(t,arguments)}function uM(){var t=ZD(vN());return t.copy=function(){return bd(t,uM()).exponent(t.exponent())},Hc.apply(t,arguments)}function wwe(){return uM.apply(null,arguments).exponent(.5)}const IF=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:qv,scaleDiverging:Y7,scaleDivergingLog:K7,scaleDivergingPow:uM,scaleDivergingSqrt:wwe,scaleDivergingSymlog:Q7,scaleIdentity:k7,scaleImplicit:vP,scaleLinear:Gw,scaleLog:E7,scaleOrdinal:VD,scalePoint:bv,scalePow:eM,scaleQuantile:D7,scaleQuantize:M7,scaleRadial:O7,scaleSequential:V7,scaleSequentialLog:H7,scaleSequentialPow:cM,scaleSequentialQuantile:W7,scaleSequentialSqrt:jwe,scaleSequentialSymlog:G7,scaleSqrt:nje,scaleSymlog:P7,scaleThreshold:I7,scaleTime:vwe,scaleUtc:bwe,tickFormat:T7},Symbol.toStringTag,{value:"Module"}));var Gk,RF;function bN(){if(RF)return Gk;RF=1;var t=$g();function e(n,i,a){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=i(l);if(c!=null&&(d===void 0?c===c&&!t(c):a(c,d)))var d=c,f=l}return f}return Gk=e,Gk}var Wk,LF;function X7(){if(LF)return Wk;LF=1;function t(e,n){return e>n}return Wk=t,Wk}var Yk,FF;function Swe(){if(FF)return Yk;FF=1;var t=bN(),e=X7(),n=qg();function i(a){return a&&a.length?t(a,n,e):void 0}return Yk=i,Yk}var Nwe=Swe();const rd=Bn(Nwe);var Kk,$F;function J7(){if($F)return Kk;$F=1;function t(e,n){return e<n}return Kk=t,Kk}var Qk,BF;function _we(){if(BF)return Qk;BF=1;var t=bN(),e=J7(),n=qg();function i(a){return a&&a.length?t(a,n,e):void 0}return Qk=i,Qk}var Cwe=_we();const jN=Bn(Cwe);var Xk,zF;function Twe(){if(zF)return Xk;zF=1;var t=CD(),e=Il(),n=s7(),i=os();function a(s,o){var l=i(s)?t:n;return l(s,e(o,3))}return Xk=a,Xk}var Jk,qF;function kwe(){if(qF)return Jk;qF=1;var t=i7(),e=Twe();function n(i,a){return t(e(i,a),1)}return Jk=n,Jk}var Awe=kwe();const Ewe=Bn(Awe);var Zk,UF;function Pwe(){if(UF)return Zk;UF=1;var t=$D();function e(n,i){return t(n,i)}return Zk=e,Zk}var Owe=Pwe();const _f=Bn(Owe);var Vg=1e9,Dwe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hM,zr=!0,Zs="[DecimalError] ",uf=Zs+"Invalid argument: ",dM=Zs+"Exponent out of range: ",Hg=Math.floor,qh=Math.pow,Mwe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ns,Ei=1e7,Rr=7,Z7=9007199254740991,Qw=Hg(Z7/Rr),Dt={};Dt.absoluteValue=Dt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Dt.comparedTo=Dt.cmp=function(t){var e,n,i,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(i=s.d.length,a=t.d.length,e=0,n=i<a?i:a;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return i===a?0:i>a^s.s<0?1:-1};Dt.decimalPlaces=Dt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Rr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Dt.dividedBy=Dt.div=function(t){return kc(this,new this.constructor(t))};Dt.dividedToIntegerBy=Dt.idiv=function(t){var e=this,n=e.constructor;return Nr(kc(e,new n(t),0,1),n.precision)};Dt.equals=Dt.eq=function(t){return!this.cmp(t)};Dt.exponent=function(){return mi(this)};Dt.greaterThan=Dt.gt=function(t){return this.cmp(t)>0};Dt.greaterThanOrEqualTo=Dt.gte=function(t){return this.cmp(t)>=0};Dt.isInteger=Dt.isint=function(){return this.e>this.d.length-2};Dt.isNegative=Dt.isneg=function(){return this.s<0};Dt.isPositive=Dt.ispos=function(){return this.s>0};Dt.isZero=function(){return this.s===0};Dt.lessThan=Dt.lt=function(t){return this.cmp(t)<0};Dt.lessThanOrEqualTo=Dt.lte=function(t){return this.cmp(t)<1};Dt.logarithm=Dt.log=function(t){var e,n=this,i=n.constructor,a=i.precision,s=a+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(Ns))throw Error(Zs+"NaN");if(n.s<1)throw Error(Zs+(n.s?"NaN":"-Infinity"));return n.eq(Ns)?new i(0):(zr=!1,e=kc(Wv(n,s),Wv(t,s),s),zr=!0,Nr(e,a))};Dt.minus=Dt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?nV(e,t):eV(e,(t.s=-t.s,t))};Dt.modulo=Dt.mod=function(t){var e,n=this,i=n.constructor,a=i.precision;if(t=new i(t),!t.s)throw Error(Zs+"NaN");return n.s?(zr=!1,e=kc(n,t,0,1).times(t),zr=!0,n.minus(e)):Nr(new i(n),a)};Dt.naturalExponential=Dt.exp=function(){return tV(this)};Dt.naturalLogarithm=Dt.ln=function(){return Wv(this)};Dt.negated=Dt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Dt.plus=Dt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?eV(e,t):nV(e,(t.s=-t.s,t))};Dt.precision=Dt.sd=function(t){var e,n,i,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(uf+t);if(e=mi(a)+1,i=a.d.length-1,n=i*Rr+1,i=a.d[i],i){for(;i%10==0;i/=10)n--;for(i=a.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};Dt.squareRoot=Dt.sqrt=function(){var t,e,n,i,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Zs+"NaN")}for(t=mi(l),zr=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=Nl(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Hg((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new c(e)):i=new c(a.toString()),n=c.precision,a=o=n+3;;)if(s=i,i=s.plus(kc(l,s,o+2)).times(.5),Nl(s.d).slice(0,o)===(e=Nl(i.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(Nr(s,n+1,0),s.times(s).eq(l)){i=s;break}}else if(e!="9999")break;o+=4}return zr=!0,Nr(i,n)};Dt.times=Dt.mul=function(t){var e,n,i,a,s,o,l,c,d,f=this,p=f.constructor,y=f.d,x=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,c=y.length,d=x.length,c<d&&(s=y,y=x,x=s,o=c,c=d,d=o),s=[],o=c+d,i=o;i--;)s.push(0);for(i=d;--i>=0;){for(e=0,a=c+i;a>i;)l=s[a]+x[i]*y[a-i-1]+e,s[a--]=l%Ei|0,e=l/Ei|0;s[a]=(s[a]+e)%Ei|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,zr?Nr(t,p.precision):t};Dt.toDecimalPlaces=Dt.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Pl(t,0,Vg),e===void 0?e=i.rounding:Pl(e,0,8),Nr(n,t+mi(n)+1,e))};Dt.toExponential=function(t,e){var n,i=this,a=i.constructor;return t===void 0?n=Cf(i,!0):(Pl(t,0,Vg),e===void 0?e=a.rounding:Pl(e,0,8),i=Nr(new a(i),t+1,e),n=Cf(i,!0,t+1)),n};Dt.toFixed=function(t,e){var n,i,a=this,s=a.constructor;return t===void 0?Cf(a):(Pl(t,0,Vg),e===void 0?e=s.rounding:Pl(e,0,8),i=Nr(new s(a),t+mi(a)+1,e),n=Cf(i.abs(),!1,t+mi(i)+1),a.isneg()&&!a.isZero()?"-"+n:n)};Dt.toInteger=Dt.toint=function(){var t=this,e=t.constructor;return Nr(new e(t),mi(t)+1,e.rounding)};Dt.toNumber=function(){return+this};Dt.toPower=Dt.pow=function(t){var e,n,i,a,s,o,l=this,c=l.constructor,d=12,f=+(t=new c(t));if(!t.s)return new c(Ns);if(l=new c(l),!l.s){if(t.s<1)throw Error(Zs+"Infinity");return l}if(l.eq(Ns))return l;if(i=c.precision,t.eq(Ns))return Nr(l,i);if(e=t.e,n=t.d.length-1,o=e>=n,s=l.s,o){if((n=f<0?-f:f)<=Z7){for(a=new c(Ns),e=Math.ceil(i/Rr+4),zr=!1;n%2&&(a=a.times(l),HF(a.d,e)),n=Hg(n/2),n!==0;)l=l.times(l),HF(l.d,e);return zr=!0,t.s<0?new c(Ns).div(a):Nr(a,i)}}else if(s<0)throw Error(Zs+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,zr=!1,a=t.times(Wv(l,i+d)),zr=!0,a=tV(a),a.s=s,a};Dt.toPrecision=function(t,e){var n,i,a=this,s=a.constructor;return t===void 0?(n=mi(a),i=Cf(a,n<=s.toExpNeg||n>=s.toExpPos)):(Pl(t,1,Vg),e===void 0?e=s.rounding:Pl(e,0,8),a=Nr(new s(a),t,e),n=mi(a),i=Cf(a,t<=n||n<=s.toExpNeg,t)),i};Dt.toSignificantDigits=Dt.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Pl(t,1,Vg),e===void 0?e=i.rounding:Pl(e,0,8)),Nr(new i(n),t,e)};Dt.toString=Dt.valueOf=Dt.val=Dt.toJSON=Dt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=mi(t),n=t.constructor;return Cf(t,e<=n.toExpNeg||e>=n.toExpPos)};function eV(t,e){var n,i,a,s,o,l,c,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),zr?Nr(e,p):e;if(c=t.d,d=e.d,o=t.e,a=e.e,c=c.slice(),s=o-a,s){for(s<0?(i=c,s=-s,l=d.length):(i=d,a=o,l=c.length),o=Math.ceil(p/Rr),l=o>l?o+1:l+1,s>l&&(s=l,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(l=c.length,s=d.length,l-s<0&&(s=l,i=d,d=c,c=i),n=0;s;)n=(c[--s]=c[s]+d[s]+n)/Ei|0,c[s]%=Ei;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,zr?Nr(e,p):e}function Pl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(uf+t)}function Nl(t){var e,n,i,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)i=t[e]+"",n=Rr-i.length,n&&(s+=Hu(n)),s+=i;o=t[e],i=o+"",n=Rr-i.length,n&&(s+=Hu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var kc=function(){function t(i,a){var s,o=0,l=i.length;for(i=i.slice();l--;)s=i[l]*a+o,i[l]=s%Ei|0,o=s/Ei|0;return o&&i.unshift(o),i}function e(i,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(i[l]!=a[l]){c=i[l]>a[l]?1:-1;break}return c}function n(i,a,s){for(var o=0;s--;)i[s]-=o,o=i[s]<a[s]?1:0,i[s]=o*Ei+i[s]-a[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,a,s,o){var l,c,d,f,p,y,x,v,S,N,_,T,C,O,k,P,I,F,B=i.constructor,$=i.s==a.s?1:-1,L=i.d,V=a.d;if(!i.s)return new B(i);if(!a.s)throw Error(Zs+"Division by zero");for(c=i.e-a.e,I=V.length,k=L.length,x=new B($),v=x.d=[],d=0;V[d]==(L[d]||0);)++d;if(V[d]>(L[d]||0)&&--c,s==null?T=s=B.precision:o?T=s+(mi(i)-mi(a))+1:T=s,T<0)return new B(0);if(T=T/Rr+2|0,d=0,I==1)for(f=0,V=V[0],T++;(d<k||f)&&T--;d++)C=f*Ei+(L[d]||0),v[d]=C/V|0,f=C%V|0;else{for(f=Ei/(V[0]+1)|0,f>1&&(V=t(V,f),L=t(L,f),I=V.length,k=L.length),O=I,S=L.slice(0,I),N=S.length;N<I;)S[N++]=0;F=V.slice(),F.unshift(0),P=V[0],V[1]>=Ei/2&&++P;do f=0,l=e(V,S,I,N),l<0?(_=S[0],I!=N&&(_=_*Ei+(S[1]||0)),f=_/P|0,f>1?(f>=Ei&&(f=Ei-1),p=t(V,f),y=p.length,N=S.length,l=e(p,S,y,N),l==1&&(f--,n(p,I<y?F:V,y))):(f==0&&(l=f=1),p=V.slice()),y=p.length,y<N&&p.unshift(0),n(S,p,N),l==-1&&(N=S.length,l=e(V,S,I,N),l<1&&(f++,n(S,I<N?F:V,N))),N=S.length):l===0&&(f++,S=[0]),v[d++]=f,l&&S[0]?S[N++]=L[O]||0:(S=[L[O]],N=1);while((O++<k||S[0]!==void 0)&&T--)}return v[0]||v.shift(),x.e=c,Nr(x,o?s+mi(x)+1:s)}}();function tV(t,e){var n,i,a,s,o,l,c=0,d=0,f=t.constructor,p=f.precision;if(mi(t)>16)throw Error(dM+mi(t));if(!t.s)return new f(Ns);for(zr=!1,l=p,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(i=Math.log(qh(2,d))/Math.LN10*2+5|0,l+=i,n=a=s=new f(Ns),f.precision=l;;){if(a=Nr(a.times(t),l),n=n.times(++c),o=s.plus(kc(a,n,l)),Nl(o.d).slice(0,l)===Nl(s.d).slice(0,l)){for(;d--;)s=Nr(s.times(s),l);return f.precision=p,e==null?(zr=!0,Nr(s,p)):s}s=o}}function mi(t){for(var e=t.e*Rr,n=t.d[0];n>=10;n/=10)e++;return e}function eA(t,e,n){if(e>t.LN10.sd())throw zr=!0,n&&(t.precision=n),Error(Zs+"LN10 precision limit exceeded");return Nr(new t(t.LN10),e)}function Hu(t){for(var e="";t--;)e+="0";return e}function Wv(t,e){var n,i,a,s,o,l,c,d,f,p=1,y=10,x=t,v=x.d,S=x.constructor,N=S.precision;if(x.s<1)throw Error(Zs+(x.s?"NaN":"-Infinity"));if(x.eq(Ns))return new S(0);if(e==null?(zr=!1,d=N):d=e,x.eq(10))return e==null&&(zr=!0),eA(S,d);if(d+=y,S.precision=d,n=Nl(v),i=n.charAt(0),s=mi(x),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)x=x.times(t),n=Nl(x.d),i=n.charAt(0),p++;s=mi(x),i>1?(x=new S("0."+n),s++):x=new S(i+"."+n.slice(1))}else return c=eA(S,d+2,N).times(s+""),x=Wv(new S(i+"."+n.slice(1)),d-y).plus(c),S.precision=N,e==null?(zr=!0,Nr(x,N)):x;for(l=o=x=kc(x.minus(Ns),x.plus(Ns),d),f=Nr(x.times(x),d),a=3;;){if(o=Nr(o.times(f),d),c=l.plus(kc(o,new S(a),d)),Nl(c.d).slice(0,d)===Nl(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(eA(S,d+2,N).times(s+""))),l=kc(l,new S(p),d),S.precision=N,e==null?(zr=!0,Nr(l,N)):l;l=c,a+=2}}function VF(t,e){var n,i,a;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(i,a),e){if(a-=i,n=n-i-1,t.e=Hg(n/Rr),t.d=[],i=(n+1)%Rr,n<0&&(i+=Rr),i<a){for(i&&t.d.push(+e.slice(0,i)),a-=Rr;i<a;)t.d.push(+e.slice(i,i+=Rr));e=e.slice(i),i=Rr-e.length}else i-=a;for(;i--;)e+="0";if(t.d.push(+e),zr&&(t.e>Qw||t.e<-Qw))throw Error(dM+n)}else t.s=0,t.e=0,t.d=[0];return t}function Nr(t,e,n){var i,a,s,o,l,c,d,f,p=t.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(i=e-o,i<0)i+=Rr,a=e,d=p[f=0];else{if(f=Math.ceil((i+1)/Rr),s=p.length,f>=s)return t;for(d=s=p[f],o=1;s>=10;s/=10)o++;i%=Rr,a=i-Rr+o}if(n!==void 0&&(s=qh(10,o-a-1),l=d/s%10|0,c=e<0||p[f+1]!==void 0||d%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(i>0?a>0?d/qh(10,o-a):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(s=mi(t),p.length=1,e=e-s-1,p[0]=qh(10,(Rr-e%Rr)%Rr),t.e=Hg(-e/Rr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(i==0?(p.length=f,s=1,f--):(p.length=f+1,s=qh(10,Rr-i),p[f]=a>0?(d/qh(10,o-a)%qh(10,a)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==Ei&&(p[0]=1,++t.e);break}else{if(p[f]+=s,p[f]!=Ei)break;p[f--]=0,s=1}for(i=p.length;p[--i]===0;)p.pop();if(zr&&(t.e>Qw||t.e<-Qw))throw Error(dM+mi(t));return t}function nV(t,e){var n,i,a,s,o,l,c,d,f,p,y=t.constructor,x=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),zr?Nr(e,x):e;if(c=t.d,p=e.d,i=e.e,d=t.e,c=c.slice(),o=d-i,o){for(f=o<0,f?(n=c,o=-o,l=p.length):(n=p,i=d,l=c.length),a=Math.max(Math.ceil(x/Rr),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=p.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(c[a]!=p[a]){f=c[a]<p[a];break}o=0}for(f&&(n=c,c=p,p=n,e.s=-e.s),l=c.length,a=p.length-l;a>0;--a)c[l++]=0;for(a=p.length;a>o;){if(c[--a]<p[a]){for(s=a;s&&c[--s]===0;)c[s]=Ei-1;--c[s],c[a]+=Ei}c[a]-=p[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(e.d=c,e.e=i,zr?Nr(e,x):e):new y(0)}function Cf(t,e,n){var i,a=mi(t),s=Nl(t.d),o=s.length;return e?(n&&(i=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Hu(i):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Hu(-a-1)+s,n&&(i=n-o)>0&&(s+=Hu(i))):a>=o?(s+=Hu(a+1-o),n&&(i=n-a-1)>0&&(s=s+"."+Hu(i))):((i=a+1)<o&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-o)>0&&(a+1===o&&(s+="."),s+=Hu(i))),t.s<0?"-"+s:s}function HF(t,e){if(t.length>e)return t.length=e,!0}function rV(t){var e,n,i;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(uf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return VF(o,s.toString())}else if(typeof s!="string")throw Error(uf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Mwe.test(s))VF(o,s);else throw Error(uf+s)}if(a.prototype=Dt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=rV,a.config=a.set=Iwe,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return a.config(t),a}function Iwe(t){if(!t||typeof t!="object")throw Error(Zs+"Object expected");var e,n,i,a=["precision",1,Vg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((i=t[n=a[e]])!==void 0)if(Hg(i)===i&&i>=a[e+1]&&i<=a[e+2])this[n]=i;else throw Error(uf+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(uf+n+": "+i);return this}var hM=rV(Dwe);Ns=new hM(1);const xr=hM;function Rwe(t){return Bwe(t)||$we(t)||Fwe(t)||Lwe()}function Lwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fwe(t,e){if(t){if(typeof t=="string")return SP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SP(t,e)}}function $we(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Bwe(t){if(Array.isArray(t))return SP(t)}function SP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var zwe=function(e){return e},iV={},aV=function(e){return e===iV},GF=function(e){return function n(){return arguments.length===0||arguments.length===1&&aV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},qwe=function t(e,n){return e===1?n:GF(function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==iV}).length;return o>=e?n.apply(void 0,a):t(e-o,GF(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=a.map(function(p){return aV(p)?c.shift():p});return n.apply(void 0,Rwe(f).concat(c))}))})},wN=function(e){return qwe(e.length,e)},NP=function(e,n){for(var i=[],a=e;a<n;++a)i[a-e]=a;return i},Uwe=wN(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Vwe=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return zwe;var a=n.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},_P=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},sV=function(e){var n=null,i=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,i=e.apply(void 0,s)),i}};function Hwe(t){var e;return t===0?e=1:e=Math.floor(new xr(t).abs().log(10).toNumber())+1,e}function Gwe(t,e,n){for(var i=new xr(t),a=0,s=[];i.lt(e)&&a<1e5;)s.push(i.toNumber()),i=i.add(n),a++;return s}var Wwe=wN(function(t,e,n){var i=+t,a=+e;return i+n*(a-i)}),Ywe=wN(function(t,e,n){var i=e-+t;return i=i||1/0,(n-t)/i}),Kwe=wN(function(t,e,n){var i=e-+t;return i=i||1/0,Math.max(0,Math.min(1,(n-t)/i))});const SN={rangeStep:Gwe,getDigitCount:Hwe,interpolateNumber:Wwe,uninterpolateNumber:Ywe,uninterpolateTruncation:Kwe};function CP(t){return Jwe(t)||Xwe(t)||oV(t)||Qwe()}function Qwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Jwe(t){if(Array.isArray(t))return TP(t)}function Yv(t,e){return tSe(t)||eSe(t,e)||oV(t,e)||Zwe()}function Zwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oV(t,e){if(t){if(typeof t=="string")return TP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TP(t,e)}}function TP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function eSe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],i=!0,a=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(i=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));i=!0);}catch(c){a=!0,s=c}finally{try{!i&&o.return!=null&&o.return()}finally{if(a)throw s}}return n}}function tSe(t){if(Array.isArray(t))return t}function lV(t){var e=Yv(t,2),n=e[0],i=e[1],a=n,s=i;return n>i&&(a=i,s=n),[a,s]}function cV(t,e,n){if(t.lte(0))return new xr(0);var i=SN.getDigitCount(t.toNumber()),a=new xr(10).pow(i),s=t.div(a),o=i!==1?.05:.1,l=new xr(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return e?c:new xr(Math.ceil(c))}function nSe(t,e,n){var i=1,a=new xr(t);if(!a.isint()&&n){var s=Math.abs(t);s<1?(i=new xr(10).pow(SN.getDigitCount(t)-1),a=new xr(Math.floor(a.div(i).toNumber())).mul(i)):s>1&&(a=new xr(Math.floor(t)))}else t===0?a=new xr(Math.floor((e-1)/2)):n||(a=new xr(Math.floor(t)));var o=Math.floor((e-1)/2),l=Vwe(Uwe(function(c){return a.add(new xr(c-o).mul(i)).toNumber()}),NP);return l(0,e)}function uV(t,e,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new xr(0),tickMin:new xr(0),tickMax:new xr(0)};var s=cV(new xr(e).sub(t).div(n-1),i,a),o;t<=0&&e>=0?o=new xr(0):(o=new xr(t).add(e).div(2),o=o.sub(new xr(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new xr(e).sub(o).div(s).toNumber()),d=l+c+1;return d>n?uV(t,e,n,i,a+1):(d<n&&(c=e>0?c+(n-d):c,l=e>0?l:l+(n-d)),{step:s,tickMin:o.sub(new xr(l).mul(s)),tickMax:o.add(new xr(c).mul(s))})}function rSe(t){var e=Yv(t,2),n=e[0],i=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=lV([n,i]),c=Yv(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var p=f===1/0?[d].concat(CP(NP(0,a-1).map(function(){return 1/0}))):[].concat(CP(NP(0,a-1).map(function(){return-1/0})),[f]);return n>i?_P(p):p}if(d===f)return nSe(d,a,s);var y=uV(d,f,o,s),x=y.step,v=y.tickMin,S=y.tickMax,N=SN.rangeStep(v,S.add(new xr(.1).mul(x)),x);return n>i?_P(N):N}function iSe(t,e){var n=Yv(t,2),i=n[0],a=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=lV([i,a]),l=Yv(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[i,a];if(c===d)return[c];var f=Math.max(e,2),p=cV(new xr(d).sub(c).div(f-1),s,0),y=[].concat(CP(SN.rangeStep(new xr(c),new xr(d).sub(new xr(.99).mul(p)),p)),[d]);return i>a?_P(y):y}var aSe=sV(rSe),sSe=sV(iSe),oSe="Invariant failed";function Tf(t,e){throw new Error(oSe)}var lSe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fg(t){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(t)}function Xw(){return Xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xw.apply(this,arguments)}function cSe(t,e){return fSe(t)||hSe(t,e)||dSe(t,e)||uSe()}function uSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dSe(t,e){if(t){if(typeof t=="string")return WF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WF(t,e)}}function WF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function hSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function fSe(t){if(Array.isArray(t))return t}function pSe(t,e){if(t==null)return{};var n=mSe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function mSe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function gSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ySe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,fV(i.key),i)}}function xSe(t,e,n){return e&&ySe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vSe(t,e,n){return e=Jw(e),bSe(t,dV()?Reflect.construct(e,n||[],Jw(t).constructor):e.apply(t,n))}function bSe(t,e){if(e&&(fg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jSe(t)}function jSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dV=function(){return!!t})()}function Jw(t){return Jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jw(t)}function wSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kP(t,e)}function kP(t,e){return kP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},kP(t,e)}function hV(t,e,n){return e=fV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fV(t){var e=SSe(t,"string");return fg(e)=="symbol"?e:e+""}function SSe(t,e){if(fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(fg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ub=function(t){function e(){return gSe(this,e),vSe(this,e,arguments)}return wSe(e,t),xSe(e,[{key:"render",value:function(){var i=this.props,a=i.offset,s=i.layout,o=i.width,l=i.dataKey,c=i.data,d=i.dataPointFormatter,f=i.xAxis,p=i.yAxis,y=pSe(i,lSe),x=Ft(y,!1);this.props.direction==="x"&&f.type!=="number"&&Tf();var v=c.map(function(S){var N=d(S,l),_=N.x,T=N.y,C=N.value,O=N.errorVal;if(!O)return null;var k=[],P,I;if(Array.isArray(O)){var F=cSe(O,2);P=F[0],I=F[1]}else P=I=O;if(s==="vertical"){var B=f.scale,$=T+a,L=$+o,V=$-o,H=B(C-P),te=B(C+I);k.push({x1:te,y1:L,x2:te,y2:V}),k.push({x1:H,y1:$,x2:te,y2:$}),k.push({x1:H,y1:L,x2:H,y2:V})}else if(s==="horizontal"){var X=p.scale,q=_+a,W=q-o,ae=q+o,G=X(C-P),z=X(C+I);k.push({x1:W,y1:z,x2:ae,y2:z}),k.push({x1:q,y1:G,x2:q,y2:z}),k.push({x1:W,y1:G,x2:ae,y2:G})}return Se.createElement(Pn,Xw({className:"recharts-errorBar",key:"bar-".concat(k.map(function(le){return"".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)}))},x),k.map(function(le){return Se.createElement("line",Xw({},le,{key:"line-".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)}))}))});return Se.createElement(Pn,{className:"recharts-errorBars"},v)}}])}(Se.Component);hV(Ub,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});hV(Ub,"displayName","ErrorBar");function Kv(t){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(t)}function YF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Fh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YF(Object(n),!0).forEach(function(i){NSe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function NSe(t,e,n){return e=_Se(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Se(t){var e=CSe(t,"string");return Kv(e)=="symbol"?e:e+""}function CSe(t,e){if(Kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Kv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pV=function(e){var n=e.children,i=e.formattedGraphicalItems,a=e.legendWidth,s=e.legendContent,o=ws(n,Tc);if(!o)return null;var l=Tc.defaultProps,c=l!==void 0?Fh(Fh({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:s==="children"?d=(i||[]).reduce(function(f,p){var y=p.item,x=p.props,v=x.sectors||x.data||[];return f.concat(v.map(function(S){return{type:o.props.iconType||y.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):d=(i||[]).map(function(f){var p=f.item,y=p.type.defaultProps,x=y!==void 0?Fh(Fh({},y),p.props):{},v=x.dataKey,S=x.name,N=x.legendType,_=x.hide;return{inactive:_,dataKey:v,type:c.iconType||N||"square",color:fM(p),value:S||v,payload:x}}),Fh(Fh(Fh({},c),Tc.getWithHeight(o,a)),{},{payload:d,item:o})};function Qv(t){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qv(t)}function KF(t){return ESe(t)||ASe(t)||kSe(t)||TSe()}function TSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kSe(t,e){if(t){if(typeof t=="string")return AP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AP(t,e)}}function ASe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ESe(t){if(Array.isArray(t))return AP(t)}function AP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function QF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QF(Object(n),!0).forEach(function(i){Fm(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Fm(t,e,n){return e=PSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PSe(t){var e=OSe(t,"string");return Qv(e)=="symbol"?e:e+""}function OSe(t,e){if(Qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Qv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function si(t,e,n){return ln(t)||ln(e)?n:Si(e)?ks(t,e,n):en(e)?e(t):n}function jv(t,e,n,i){var a=Ewe(t,function(l){return si(l,e)});if(n==="number"){var s=a.filter(function(l){return bt(l)||parseFloat(l)});return s.length?[jN(s),rd(s)]:[1/0,-1/0]}var o=i?a.filter(function(l){return!ln(l)}):a;return o.map(function(l){return Si(l)||l instanceof Date?l:""})}var DSe=function(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=i==null?void 0:i.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,d=0;d<l;d++){var f=d>0?a[d-1].coordinate:a[l-1].coordinate,p=a[d].coordinate,y=d>=l-1?a[0].coordinate:a[d+1].coordinate,x=void 0;if(Pa(p-f)!==Pa(y-p)){var v=[];if(Pa(y-p)===Pa(c[1]-c[0])){x=y;var S=p+c[1]-c[0];v[0]=Math.min(S,(S+f)/2),v[1]=Math.max(S,(S+f)/2)}else{x=f;var N=y+c[1]-c[0];v[0]=Math.min(p,(N+p)/2),v[1]=Math.max(p,(N+p)/2)}var _=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(e>_[0]&&e<=_[1]||e>=v[0]&&e<=v[1]){o=a[d].index;break}}else{var T=Math.min(f,y),C=Math.max(f,y);if(e>(T+p)/2&&e<=(C+p)/2){o=a[d].index;break}}}else for(var O=0;O<l;O++)if(O===0&&e<=(i[O].coordinate+i[O+1].coordinate)/2||O>0&&O<l-1&&e>(i[O].coordinate+i[O-1].coordinate)/2&&e<=(i[O].coordinate+i[O+1].coordinate)/2||O===l-1&&e>(i[O].coordinate+i[O-1].coordinate)/2){o=i[O].index;break}return o},fM=function(e){var n,i=e,a=i.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Qr(Qr({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},MSe=function(e){var n=e.barSize,i=e.totalSize,a=e.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,d=l.length;c<d;c++)for(var f=s[l[c]].stackGroups,p=Object.keys(f),y=0,x=p.length;y<x;y++){var v=f[p[y]],S=v.items,N=v.cateAxisId,_=S.filter(function(I){return Cc(I.type).indexOf("Bar")>=0});if(_&&_.length){var T=_[0].type.defaultProps,C=T!==void 0?Qr(Qr({},T),_[0].props):_[0].props,O=C.barSize,k=C[N];o[k]||(o[k]=[]);var P=ln(O)?n:O;o[k].push({item:_[0],stackList:_.slice(1),barSize:ln(P)?void 0:Oa(P,i,0)})}}return o},ISe=function(e){var n=e.barGap,i=e.barCategoryGap,a=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=Oa(n,a,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var y=!1,x=a/c,v=o.reduce(function(O,k){return O+k.barSize||0},0);v+=(c-1)*d,v>=a&&(v-=(c-1)*d,d=0),v>=a&&x>0&&(y=!0,x*=.9,v=c*x);var S=(a-v)/2>>0,N={offset:S-d,size:0};f=o.reduce(function(O,k){var P={item:k.item,position:{offset:N.offset+N.size+d,size:y?x:k.barSize}},I=[].concat(KF(O),[P]);return N=I[I.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(F){I.push({item:F,position:N})}),I},p)}else{var _=Oa(i,a,0,!0);a-2*_-(c-1)*d<=0&&(d=0);var T=(a-2*_-(c-1)*d)/c;T>1&&(T>>=0);var C=l===+l?Math.min(T,l):T;f=o.reduce(function(O,k,P){var I=[].concat(KF(O),[{item:k.item,position:{offset:_+(T+d)*P+(T-C)/2,size:C}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(F){I.push({item:F,position:I[I.length-1].position})}),I},p)}return f},RSe=function(e,n,i,a){var s=i.children,o=i.width,l=i.margin,c=o-(l.left||0)-(l.right||0),d=pV({children:s,legendWidth:c});if(d){var f=a||{},p=f.width,y=f.height,x=d.align,v=d.verticalAlign,S=d.layout;if((S==="vertical"||S==="horizontal"&&v==="middle")&&x!=="center"&&bt(e[x]))return Qr(Qr({},e),{},Fm({},x,e[x]+(p||0)));if((S==="horizontal"||S==="vertical"&&x==="center")&&v!=="middle"&&bt(e[v]))return Qr(Qr({},e),{},Fm({},v,e[v]+(y||0)))}return e},LSe=function(e,n,i){return ln(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||i==="x"?n==="xAxis":i==="y"?n==="yAxis":!0},mV=function(e,n,i,a,s){var o=n.props.children,l=As(o,Ub).filter(function(d){return LSe(a,s,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,f){var p=si(f,i);if(ln(p))return d;var y=Array.isArray(p)?[jN(p),rd(p)]:[p,p],x=c.reduce(function(v,S){var N=si(f,S,0),_=y[0]-Math.abs(Array.isArray(N)?N[0]:N),T=y[1]+Math.abs(Array.isArray(N)?N[1]:N);return[Math.min(_,v[0]),Math.max(T,v[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},FSe=function(e,n,i,a,s){var o=n.map(function(l){return mV(e,l,i,s,a)}).filter(function(l){return!ln(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},gV=function(e,n,i,a,s){var o=n.map(function(c){var d=c.props.dataKey;return i==="number"&&d&&mV(e,c,d,a)||jv(e,d,i,s)});if(i==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var f=0,p=d.length;f<p;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},yV=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},xV=function(e,n,i,a){if(a)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===i&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(i),l},wc=function(e,n,i){if(!e)return null;var a=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(n||i)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Pa(l[0]-l[1])*2*d:d,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(p){var y=s?s.indexOf(p):p;return{coordinate:a(y)+d,value:p,offset:d}});return f.filter(function(p){return!zg(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,y){return{coordinate:a(p)+d,value:p,index:y,offset:d}}):a.ticks&&!i?a.ticks(e.tickCount).map(function(p){return{coordinate:a(p)+d,value:p,offset:d}}):a.domain().map(function(p,y){return{coordinate:a(p)+d,value:s?s[p]:p,index:y,offset:d}})},tA=new WeakMap,Mj=function(e,n){if(typeof n!="function")return e;tA.has(e)||tA.set(e,new WeakMap);var i=tA.get(e);if(i.has(n))return i.get(n);var a=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return i.set(n,a),a},vV=function(e,n,i){var a=e.scale,s=e.type,o=e.layout,l=e.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:qv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Gw(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!i)?{scale:bv(),realScaleType:"point"}:s==="category"?{scale:qv(),realScaleType:"band"}:{scale:Gw(),realScaleType:"linear"};if(wf(a)){var c="scale".concat(oN(a));return{scale:(IF[c]||bv)(),realScaleType:IF[c]?c:"point"}}return en(a)?{scale:a}:{scale:bv(),realScaleType:"point"}},XF=1e-4,bV=function(e){var n=e.domain();if(!(!n||n.length<=2)){var i=n.length,a=e.range(),s=Math.min(a[0],a[1])-XF,o=Math.max(a[0],a[1])+XF,l=e(n[0]),c=e(n[i-1]);(l<s||l>o||c<s||c>o)&&e.domain([n[0],n[i-1]])}},$Se=function(e,n){if(!e)return null;for(var i=0,a=e.length;i<a;i++)if(e[i].item===n)return e[i].position;return null},BSe=function(e,n){if(!n||n.length!==2||!bt(n[0])||!bt(n[1]))return e;var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!bt(e[0])||e[0]<i)&&(s[0]=i),(!bt(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<i&&(s[1]=i),s},zSe=function(e){var n=e.length;if(!(n<=0))for(var i=0,a=e[0].length;i<a;++i)for(var s=0,o=0,l=0;l<n;++l){var c=zg(e[l][i][1])?e[l][i][0]:e[l][i][1];c>=0?(e[l][i][0]=s,e[l][i][1]=s+c,s=e[l][i][1]):(e[l][i][0]=o,e[l][i][1]=o+c,o=e[l][i][1])}},qSe=function(e){var n=e.length;if(!(n<=0))for(var i=0,a=e[0].length;i<a;++i)for(var s=0,o=0;o<n;++o){var l=zg(e[o][i][1])?e[o][i][0]:e[o][i][1];l>=0?(e[o][i][0]=s,e[o][i][1]=s+l,s=e[o][i][1]):(e[o][i][0]=0,e[o][i][1]=0)}},USe={sign:zSe,expand:Exe,none:ag,silhouette:Pxe,wiggle:Oxe,positive:qSe},VSe=function(e,n,i){var a=n.map(function(l){return l.props.dataKey}),s=USe[i],o=Axe().keys(a).value(function(l,c){return+si(l,c,0)}).order(aP).offset(s);return o(e)},HSe=function(e,n,i,a,s,o){if(!e)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(p,y){var x,v=(x=y.type)!==null&&x!==void 0&&x.defaultProps?Qr(Qr({},y.type.defaultProps),y.props):y.props,S=v.stackId,N=v.hide;if(N)return p;var _=v[i],T=p[_]||{hasStack:!1,stackGroups:{}};if(Si(S)){var C=T.stackGroups[S]||{numericAxisId:i,cateAxisId:a,items:[]};C.items.push(y),T.hasStack=!0,T.stackGroups[S]=C}else T.stackGroups[Of("_stackId_")]={numericAxisId:i,cateAxisId:a,items:[y]};return Qr(Qr({},p),{},Fm({},_,T))},c),f={};return Object.keys(d).reduce(function(p,y){var x=d[y];if(x.hasStack){var v={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(S,N){var _=x.stackGroups[N];return Qr(Qr({},S),{},Fm({},N,{numericAxisId:i,cateAxisId:a,items:_.items,stackedData:VSe(e,_.items,s)}))},v)}return Qr(Qr({},p),{},Fm({},y,x))},f)},jV=function(e,n){var i=n.realScaleType,a=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=i||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var f=aSe(d,s,l);return e.domain([jN(f),rd(f)]),{niceTicks:f}}if(s&&a==="number"){var p=e.domain(),y=sSe(p,s,l);return{niceTicks:y}}return null};function Zw(t){var e=t.axis,n=t.ticks,i=t.bandSize,a=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ln(a[e.dataKey])){var l=kw(n,"value",a[e.dataKey]);if(l)return l.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var c=si(a,ln(o)?e.dataKey:o);return ln(c)?null:e.scale(c)}var JF=function(e){var n=e.axis,i=e.ticks,a=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return i[l]?i[l].coordinate+a:null;var c=si(o,n.dataKey,n.domain[l]);return ln(c)?null:n.scale(c)-s/2+a},GSe=function(e){var n=e.numericAxis,i=n.scale.domain();if(n.type==="number"){var a=Math.min(i[0],i[1]),s=Math.max(i[0],i[1]);return a<=0&&s>=0?0:s<0?s:a}return i[0]},WSe=function(e,n){var i,a=(i=e.type)!==null&&i!==void 0&&i.defaultProps?Qr(Qr({},e.type.defaultProps),e.props):e.props,s=a.stackId;if(Si(s)){var o=n[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},YSe=function(e){return e.reduce(function(n,i){return[jN(i.concat([n[0]]).filter(bt)),rd(i.concat([n[1]]).filter(bt))]},[1/0,-1/0])},wV=function(e,n,i){return Object.keys(e).reduce(function(a,s){var o=e[s],l=o.stackedData,c=l.reduce(function(d,f){var p=YSe(f.slice(n,i+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},ZF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,e$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,EP=function(e,n,i){if(en(e))return e(n,i);if(!Array.isArray(e))return n;var a=[];if(bt(e[0]))a[0]=i?e[0]:Math.min(e[0],n[0]);else if(ZF.test(e[0])){var s=+ZF.exec(e[0])[1];a[0]=n[0]-s}else en(e[0])?a[0]=e[0](n[0]):a[0]=n[0];if(bt(e[1]))a[1]=i?e[1]:Math.max(e[1],n[1]);else if(e$.test(e[1])){var o=+e$.exec(e[1])[1];a[1]=n[1]+o}else en(e[1])?a[1]=e[1](n[1]):a[1]=n[1];return a},eS=function(e,n,i){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!i||a>0)return a}if(e&&n&&n.length>=2){for(var s=zD(n,function(p){return p.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var d=s[l],f=s[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return i?void 0:0},t$=function(e,n,i){return!e||!e.length||_f(e,ks(i,"type.defaultProps.domain"))?n:e},SV=function(e,n){var i=e.type.defaultProps?Qr(Qr({},e.type.defaultProps),e.props):e.props,a=i.dataKey,s=i.name,o=i.unit,l=i.formatter,c=i.tooltipType,d=i.chartType,f=i.hide;return Qr(Qr({},Ft(e,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:fM(e),value:si(n,a),type:c,payload:n,chartType:d,hide:f})};function Xv(t){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(t)}function n$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function fc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n$(Object(n),!0).forEach(function(i){NV(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function NV(t,e,n){return e=KSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KSe(t){var e=QSe(t,"string");return Xv(e)=="symbol"?e:e+""}function QSe(t,e){if(Xv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Xv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XSe(t,e){return tNe(t)||eNe(t,e)||ZSe(t,e)||JSe()}function JSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZSe(t,e){if(t){if(typeof t=="string")return r$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r$(t,e)}}function r$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function eNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function tNe(t){if(Array.isArray(t))return t}var tS=Math.PI/180,nNe=function(e){return e*180/Math.PI},Mr=function(e,n,i,a){return{x:e+Math.cos(-tS*a)*i,y:n+Math.sin(-tS*a)*i}},_V=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},rNe=function(e,n,i,a,s){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,f=Oa(e.cx,o,o/2),p=Oa(e.cy,l,l/2),y=_V(o,l,i),x=Oa(e.innerRadius,y,0),v=Oa(e.outerRadius,y,y*.8),S=Object.keys(n);return S.reduce(function(N,_){var T=n[_],C=T.domain,O=T.reversed,k;if(ln(T.range))a==="angleAxis"?k=[c,d]:a==="radiusAxis"&&(k=[x,v]),O&&(k=[k[1],k[0]]);else{k=T.range;var P=k,I=XSe(P,2);c=I[0],d=I[1]}var F=vV(T,s),B=F.realScaleType,$=F.scale;$.domain(C).range(k),bV($);var L=jV($,fc(fc({},T),{},{realScaleType:B})),V=fc(fc(fc({},T),L),{},{range:k,radius:v,realScaleType:B,scale:$,cx:f,cy:p,innerRadius:x,outerRadius:v,startAngle:c,endAngle:d});return fc(fc({},N),{},NV({},_,V))},{})},iNe=function(e,n){var i=e.x,a=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(i-s,2)+Math.pow(a-o,2))},aNe=function(e,n){var i=e.x,a=e.y,s=n.cx,o=n.cy,l=iNe({x:i,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(i-s)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:nNe(d),angleInRadian:d}},sNe=function(e){var n=e.startAngle,i=e.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),o=Math.min(a,s);return{startAngle:n-o*360,endAngle:i-o*360}},oNe=function(e,n){var i=n.startAngle,a=n.endAngle,s=Math.floor(i/360),o=Math.floor(a/360),l=Math.min(s,o);return e+l*360},i$=function(e,n){var i=e.x,a=e.y,s=aNe({x:i,y:a},n),o=s.radius,l=s.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var f=sNe(n),p=f.startAngle,y=f.endAngle,x=l,v;if(p<=y){for(;x>y;)x-=360;for(;x<p;)x+=360;v=x>=p&&x<=y}else{for(;x>p;)x-=360;for(;x<y;)x+=360;v=x>=y&&x<=p}return v?fc(fc({},n),{},{radius:o,angle:oNe(x,n)}):null},CV=function(e){return!b.isValidElement(e)&&!en(e)&&typeof e!="boolean"?e.className:""};function Jv(t){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(t)}var lNe=["offset"];function cNe(t){return fNe(t)||hNe(t)||dNe(t)||uNe()}function uNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dNe(t,e){if(t){if(typeof t=="string")return PP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PP(t,e)}}function hNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fNe(t){if(Array.isArray(t))return PP(t)}function PP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function pNe(t,e){if(t==null)return{};var n=mNe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function mNe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function a$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function bi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a$(Object(n),!0).forEach(function(i){gNe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gNe(t,e,n){return e=yNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yNe(t){var e=xNe(t,"string");return Jv(e)=="symbol"?e:e+""}function xNe(t,e){if(Jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Jv(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zv.apply(this,arguments)}var vNe=function(e){var n=e.value,i=e.formatter,a=ln(e.children)?n:e.children;return en(i)?i(a):a},bNe=function(e,n){var i=Pa(n-e),a=Math.min(Math.abs(n-e),360);return i*a},jNe=function(e,n,i){var a=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,d=c.cx,f=c.cy,p=c.innerRadius,y=c.outerRadius,x=c.startAngle,v=c.endAngle,S=c.clockWise,N=(p+y)/2,_=bNe(x,v),T=_>=0?1:-1,C,O;a==="insideStart"?(C=x+T*o,O=S):a==="insideEnd"?(C=v-T*o,O=!S):a==="end"&&(C=v+T*o,O=S),O=_<=0?O:!O;var k=Mr(d,f,N,C),P=Mr(d,f,N,C+(O?1:-1)*359),I="M".concat(k.x,",").concat(k.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(O?0:1,`,
    `).concat(P.x,",").concat(P.y),F=ln(e.id)?Of("recharts-radial-line-"):e.id;return Se.createElement("text",Zv({},i,{dominantBaseline:"central",className:un("recharts-radial-bar-label",l)}),Se.createElement("defs",null,Se.createElement("path",{id:F,d:I})),Se.createElement("textPath",{xlinkHref:"#".concat(F)},n))},wNe=function(e){var n=e.viewBox,i=e.offset,a=e.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,d=s.outerRadius,f=s.startAngle,p=s.endAngle,y=(f+p)/2;if(a==="outside"){var x=Mr(o,l,d+i,y),v=x.x,S=x.y;return{x:v,y:S,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var N=(c+d)/2,_=Mr(o,l,N,y),T=_.x,C=_.y;return{x:T,y:C,textAnchor:"middle",verticalAnchor:"middle"}},SNe=function(e){var n=e.viewBox,i=e.parentViewBox,a=e.offset,s=e.position,o=n,l=o.x,c=o.y,d=o.width,f=o.height,p=f>=0?1:-1,y=p*a,x=p>0?"end":"start",v=p>0?"start":"end",S=d>=0?1:-1,N=S*a,_=S>0?"end":"start",T=S>0?"start":"end";if(s==="top"){var C={x:l+d/2,y:c-p*a,textAnchor:"middle",verticalAnchor:x};return bi(bi({},C),i?{height:Math.max(c-i.y,0),width:d}:{})}if(s==="bottom"){var O={x:l+d/2,y:c+f+y,textAnchor:"middle",verticalAnchor:v};return bi(bi({},O),i?{height:Math.max(i.y+i.height-(c+f),0),width:d}:{})}if(s==="left"){var k={x:l-N,y:c+f/2,textAnchor:_,verticalAnchor:"middle"};return bi(bi({},k),i?{width:Math.max(k.x-i.x,0),height:f}:{})}if(s==="right"){var P={x:l+d+N,y:c+f/2,textAnchor:T,verticalAnchor:"middle"};return bi(bi({},P),i?{width:Math.max(i.x+i.width-P.x,0),height:f}:{})}var I=i?{width:d,height:f}:{};return s==="insideLeft"?bi({x:l+N,y:c+f/2,textAnchor:T,verticalAnchor:"middle"},I):s==="insideRight"?bi({x:l+d-N,y:c+f/2,textAnchor:_,verticalAnchor:"middle"},I):s==="insideTop"?bi({x:l+d/2,y:c+y,textAnchor:"middle",verticalAnchor:v},I):s==="insideBottom"?bi({x:l+d/2,y:c+f-y,textAnchor:"middle",verticalAnchor:x},I):s==="insideTopLeft"?bi({x:l+N,y:c+y,textAnchor:T,verticalAnchor:v},I):s==="insideTopRight"?bi({x:l+d-N,y:c+y,textAnchor:_,verticalAnchor:v},I):s==="insideBottomLeft"?bi({x:l+N,y:c+f-y,textAnchor:T,verticalAnchor:x},I):s==="insideBottomRight"?bi({x:l+d-N,y:c+f-y,textAnchor:_,verticalAnchor:x},I):Bg(s)&&(bt(s.x)||Yh(s.x))&&(bt(s.y)||Yh(s.y))?bi({x:l+Oa(s.x,d),y:c+Oa(s.y,f),textAnchor:"end",verticalAnchor:"end"},I):bi({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},I)},NNe=function(e){return"cx"in e&&bt(e.cx)};function Pi(t){var e=t.offset,n=e===void 0?5:e,i=pNe(t,lNe),a=bi({offset:n},i),s=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,f=a.className,p=f===void 0?"":f,y=a.textBreakAll;if(!s||ln(l)&&ln(c)&&!b.isValidElement(d)&&!en(d))return null;if(b.isValidElement(d))return b.cloneElement(d,a);var x;if(en(d)){if(x=b.createElement(d,a),b.isValidElement(x))return x}else x=vNe(a);var v=NNe(s),S=Ft(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return jNe(a,x,S);var N=v?wNe(a):SNe(a);return Se.createElement(Nf,Zv({className:un("recharts-label",p)},S,N,{breakAll:y}),x)}Pi.displayName="Label";var TV=function(e){var n=e.cx,i=e.cy,a=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,f=e.outerRadius,p=e.x,y=e.y,x=e.top,v=e.left,S=e.width,N=e.height,_=e.clockWise,T=e.labelViewBox;if(T)return T;if(bt(S)&&bt(N)){if(bt(p)&&bt(y))return{x:p,y,width:S,height:N};if(bt(x)&&bt(v))return{x,y:v,width:S,height:N}}return bt(p)&&bt(y)?{x:p,y,width:0,height:0}:bt(n)&&bt(i)?{cx:n,cy:i,startAngle:s||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:_}:e.viewBox?e.viewBox:{}},_Ne=function(e,n){return e?e===!0?Se.createElement(Pi,{key:"label-implicit",viewBox:n}):Si(e)?Se.createElement(Pi,{key:"label-implicit",viewBox:n,value:e}):b.isValidElement(e)?e.type===Pi?b.cloneElement(e,{key:"label-implicit",viewBox:n}):Se.createElement(Pi,{key:"label-implicit",content:e,viewBox:n}):en(e)?Se.createElement(Pi,{key:"label-implicit",content:e,viewBox:n}):Bg(e)?Se.createElement(Pi,Zv({viewBox:n},e,{key:"label-implicit"})):null:null},CNe=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&i&&!e.label)return null;var a=e.children,s=TV(e),o=As(a,Pi).map(function(c,d){return b.cloneElement(c,{viewBox:n||s,key:"label-".concat(d)})});if(!i)return o;var l=_Ne(e.label,n||s);return[l].concat(cNe(o))};Pi.parseViewBox=TV;Pi.renderCallByParent=CNe;var nA,s$;function TNe(){if(s$)return nA;s$=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return nA=t,nA}var kNe=TNe();const ANe=Bn(kNe);function eb(t){"@babel/helpers - typeof";return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eb(t)}var ENe=["valueAccessor"],PNe=["data","dataKey","clockWise","id","textBreakAll"];function ONe(t){return RNe(t)||INe(t)||MNe(t)||DNe()}function DNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MNe(t,e){if(t){if(typeof t=="string")return OP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OP(t,e)}}function INe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RNe(t){if(Array.isArray(t))return OP(t)}function OP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function nS(){return nS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nS.apply(this,arguments)}function o$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function l$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o$(Object(n),!0).forEach(function(i){LNe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function LNe(t,e,n){return e=FNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FNe(t){var e=$Ne(t,"string");return eb(e)=="symbol"?e:e+""}function $Ne(t,e){if(eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(eb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c$(t,e){if(t==null)return{};var n=BNe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function BNe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var zNe=function(e){return Array.isArray(e.value)?ANe(e.value):e.value};function Al(t){var e=t.valueAccessor,n=e===void 0?zNe:e,i=c$(t,ENe),a=i.data,s=i.dataKey,o=i.clockWise,l=i.id,c=i.textBreakAll,d=c$(i,PNe);return!a||!a.length?null:Se.createElement(Pn,{className:"recharts-label-list"},a.map(function(f,p){var y=ln(s)?n(f,p):si(f&&f.payload,s),x=ln(l)?{}:{id:"".concat(l,"-").concat(p)};return Se.createElement(Pi,nS({},Ft(f,!0),d,x,{parentViewBox:f.parentViewBox,value:y,textBreakAll:c,viewBox:Pi.parseViewBox(ln(o)?f:l$(l$({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Al.displayName="LabelList";function qNe(t,e){return t?t===!0?Se.createElement(Al,{key:"labelList-implicit",data:e}):Se.isValidElement(t)||en(t)?Se.createElement(Al,{key:"labelList-implicit",data:e,content:t}):Bg(t)?Se.createElement(Al,nS({data:e},t,{key:"labelList-implicit"})):null:null}function UNe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,a=As(i,Al).map(function(o,l){return b.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return a;var s=qNe(t.label,e);return[s].concat(ONe(a))}Al.renderCallByParent=UNe;function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}function DP(){return DP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},DP.apply(this,arguments)}function u$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function d$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(n),!0).forEach(function(i){VNe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function VNe(t,e,n){return e=HNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HNe(t){var e=GNe(t,"string");return tb(e)=="symbol"?e:e+""}function GNe(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(tb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WNe=function(e,n){var i=Pa(n-e),a=Math.min(Math.abs(n-e),359.999);return i*a},Ij=function(e){var n=e.cx,i=e.cy,a=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,f=c*(l?1:-1)+a,p=Math.asin(c/f)/tS,y=d?s:s+o*p,x=Mr(n,i,f,y),v=Mr(n,i,a,y),S=d?s-o*p:s,N=Mr(n,i,f*Math.cos(p*tS),S);return{center:x,circleTangency:v,lineTangency:N,theta:p}},kV=function(e){var n=e.cx,i=e.cy,a=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=WNe(o,l),d=o+c,f=Mr(n,i,s,o),p=Mr(n,i,s,d),y="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(a>0){var x=Mr(n,i,a,o),v=Mr(n,i,a,d);y+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else y+="L ".concat(n,",").concat(i," Z");return y},YNe=function(e){var n=e.cx,i=e.cy,a=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,f=e.endAngle,p=Pa(f-d),y=Ij({cx:n,cy:i,radius:s,angle:d,sign:p,cornerRadius:o,cornerIsExternal:c}),x=y.circleTangency,v=y.lineTangency,S=y.theta,N=Ij({cx:n,cy:i,radius:s,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:c}),_=N.circleTangency,T=N.lineTangency,C=N.theta,O=c?Math.abs(d-f):Math.abs(d-f)-S-C;if(O<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):kV({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f});var k="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(O>180),",").concat(+(p<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
  `);if(a>0){var P=Ij({cx:n,cy:i,radius:a,angle:d,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=P.circleTangency,F=P.lineTangency,B=P.theta,$=Ij({cx:n,cy:i,radius:a,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),L=$.circleTangency,V=$.lineTangency,H=$.theta,te=c?Math.abs(d-f):Math.abs(d-f)-B-H;if(te<0&&o===0)return"".concat(k,"L").concat(n,",").concat(i,"Z");k+="L".concat(V.x,",").concat(V.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(te>180),",").concat(+(p>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(F.x,",").concat(F.y,"Z")}else k+="L".concat(n,",").concat(i,"Z");return k},KNe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},AV=function(e){var n=d$(d$({},KNe),e),i=n.cx,a=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,f=n.startAngle,p=n.endAngle,y=n.className;if(o<s||f===p)return null;var x=un("recharts-sector",y),v=o-s,S=Oa(l,v,0,!0),N;return S>0&&Math.abs(f-p)<360?N=YNe({cx:i,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(S,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:p}):N=kV({cx:i,cy:a,innerRadius:s,outerRadius:o,startAngle:f,endAngle:p}),Se.createElement("path",DP({},Ft(n,!0),{className:x,d:N,role:"img"}))};function nb(t){"@babel/helpers - typeof";return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nb(t)}function MP(){return MP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},MP.apply(this,arguments)}function h$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function f$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(n),!0).forEach(function(i){QNe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function QNe(t,e,n){return e=XNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XNe(t){var e=JNe(t,"string");return nb(e)=="symbol"?e:e+""}function JNe(t,e){if(nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(nb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p$={curveBasisClosed:xxe,curveBasisOpen:vxe,curveBasis:yxe,curveBumpX:rxe,curveBumpY:ixe,curveLinearClosed:bxe,curveLinear:cN,curveMonotoneX:jxe,curveMonotoneY:wxe,curveNatural:Sxe,curveStep:Nxe,curveStepAfter:Cxe,curveStepBefore:_xe},Rj=function(e){return e.x===+e.x&&e.y===+e.y},Zx=function(e){return e.x},ev=function(e){return e.y},ZNe=function(e,n){if(en(e))return e;var i="curve".concat(oN(e));return(i==="curveMonotone"||i==="curveBump")&&n?p$["".concat(i).concat(n==="vertical"?"Y":"X")]:p$[i]||cN},e_e=function(e){var n=e.type,i=n===void 0?"linear":n,a=e.points,s=a===void 0?[]:a,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,f=ZNe(i,l),p=d?s.filter(function(S){return Rj(S)}):s,y;if(Array.isArray(o)){var x=d?o.filter(function(S){return Rj(S)}):o,v=p.map(function(S,N){return f$(f$({},S),{},{base:x[N]})});return l==="vertical"?y=Tj().y(ev).x1(Zx).x0(function(S){return S.base.x}):y=Tj().x(Zx).y1(ev).y0(function(S){return S.base.y}),y.defined(Rj).curve(f),y(v)}return l==="vertical"&&bt(o)?y=Tj().y(ev).x1(Zx).x0(o):bt(o)?y=Tj().x(Zx).y1(ev).y0(o):y=T9().x(Zx).y(ev),y.defined(Rj).curve(f),y(p)},df=function(e){var n=e.className,i=e.points,a=e.path,s=e.pathRef;if((!i||!i.length)&&!a)return null;var o=i&&i.length?e_e(e):a;return b.createElement("path",MP({},Ft(e,!1),Aw(e),{className:un("recharts-curve",n),d:o,ref:s}))},rA={exports:{}},iA,m$;function t_e(){if(m$)return iA;m$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return iA=t,iA}var aA,g$;function n_e(){if(g$)return aA;g$=1;var t=t_e();function e(){}function n(){}return n.resetWarningCache=e,aA=function(){function i(o,l,c,d,f,p){if(p!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}i.isRequired=i;function a(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},aA}var y$;function r_e(){return y$||(y$=1,rA.exports=n_e()()),rA.exports}var i_e=r_e();const or=Bn(i_e);var a_e=Object.getOwnPropertyNames,s_e=Object.getOwnPropertySymbols,o_e=Object.prototype.hasOwnProperty;function x$(t,e){return function(i,a,s){return t(i,a,s)&&e(i,a,s)}}function Lj(t){return function(n,i,a){if(!n||!i||typeof n!="object"||typeof i!="object")return t(n,i,a);var s=a.cache,o=s.get(n),l=s.get(i);if(o&&l)return o===i&&l===n;s.set(n,i),s.set(i,n);var c=t(n,i,a);return s.delete(n),s.delete(i),c}}function v$(t){return a_e(t).concat(s_e(t))}var l_e=Object.hasOwn||function(t,e){return o_e.call(t,e)};function If(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var c_e="__v",u_e="__o",d_e="_owner",b$=Object.getOwnPropertyDescriptor,j$=Object.keys;function h_e(t,e,n){var i=t.length;if(e.length!==i)return!1;for(;i-- >0;)if(!n.equals(t[i],e[i],i,i,t,e,n))return!1;return!0}function f_e(t,e){return If(t.getTime(),e.getTime())}function p_e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function m_e(t,e){return t===e}function w$(t,e,n){var i=t.size;if(i!==e.size)return!1;if(!i)return!0;for(var a=new Array(i),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var d=e.entries(),f=!1,p=0;(l=d.next())&&!l.done;){if(a[p]){p++;continue}var y=o.value,x=l.value;if(n.equals(y[0],x[0],c,p,t,e,n)&&n.equals(y[1],x[1],y[0],x[0],t,e,n)){f=a[p]=!0;break}p++}if(!f)return!1;c++}return!0}var g_e=If;function y_e(t,e,n){var i=j$(t),a=i.length;if(j$(e).length!==a)return!1;for(;a-- >0;)if(!EV(t,e,n,i[a]))return!1;return!0}function tv(t,e,n){var i=v$(t),a=i.length;if(v$(e).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=i[a],!EV(t,e,n,s)||(o=b$(t,s),l=b$(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function x_e(t,e){return If(t.valueOf(),e.valueOf())}function v_e(t,e){return t.source===e.source&&t.flags===e.flags}function S$(t,e,n){var i=t.size;if(i!==e.size)return!1;if(!i)return!0;for(var a=new Array(i),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),d=!1,f=0;(l=c.next())&&!l.done;){if(!a[f]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){d=a[f]=!0;break}f++}if(!d)return!1}return!0}function b_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function j_e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function EV(t,e,n,i){return(i===d_e||i===u_e||i===c_e)&&(t.$$typeof||e.$$typeof)?!0:l_e(e,i)&&n.equals(t[i],e[i],i,i,t,e,n)}var w_e="[object Arguments]",S_e="[object Boolean]",N_e="[object Date]",__e="[object Error]",C_e="[object Map]",T_e="[object Number]",k_e="[object Object]",A_e="[object RegExp]",E_e="[object Set]",P_e="[object String]",O_e="[object URL]",D_e=Array.isArray,N$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,_$=Object.assign,M_e=Object.prototype.toString.call.bind(Object.prototype.toString);function I_e(t){var e=t.areArraysEqual,n=t.areDatesEqual,i=t.areErrorsEqual,a=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,f=t.areSetsEqual,p=t.areTypedArraysEqual,y=t.areUrlsEqual;return function(v,S,N){if(v===S)return!0;if(v==null||S==null)return!1;var _=typeof v;if(_!==typeof S)return!1;if(_!=="object")return _==="number"?o(v,S,N):_==="function"?a(v,S,N):!1;var T=v.constructor;if(T!==S.constructor)return!1;if(T===Object)return l(v,S,N);if(D_e(v))return e(v,S,N);if(N$!=null&&N$(v))return p(v,S,N);if(T===Date)return n(v,S,N);if(T===RegExp)return d(v,S,N);if(T===Map)return s(v,S,N);if(T===Set)return f(v,S,N);var C=M_e(v);return C===N_e?n(v,S,N):C===A_e?d(v,S,N):C===C_e?s(v,S,N):C===E_e?f(v,S,N):C===k_e?typeof v.then!="function"&&typeof S.then!="function"&&l(v,S,N):C===O_e?y(v,S,N):C===__e?i(v,S,N):C===w_e?l(v,S,N):C===S_e||C===T_e||C===P_e?c(v,S,N):!1}}function R_e(t){var e=t.circular,n=t.createCustomConfig,i=t.strict,a={areArraysEqual:i?tv:h_e,areDatesEqual:f_e,areErrorsEqual:p_e,areFunctionsEqual:m_e,areMapsEqual:i?x$(w$,tv):w$,areNumbersEqual:g_e,areObjectsEqual:i?tv:y_e,arePrimitiveWrappersEqual:x_e,areRegExpsEqual:v_e,areSetsEqual:i?x$(S$,tv):S$,areTypedArraysEqual:i?tv:b_e,areUrlsEqual:j_e};if(n&&(a=_$({},a,n(a))),e){var s=Lj(a.areArraysEqual),o=Lj(a.areMapsEqual),l=Lj(a.areObjectsEqual),c=Lj(a.areSetsEqual);a=_$({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function L_e(t){return function(e,n,i,a,s,o,l){return t(e,n,l)}}function F_e(t){var e=t.circular,n=t.comparator,i=t.createState,a=t.equals,s=t.strict;if(i)return function(c,d){var f=i(),p=f.cache,y=p===void 0?e?new WeakMap:void 0:p,x=f.meta;return n(c,d,{cache:y,equals:a,meta:x,strict:s})};if(e)return function(c,d){return n(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,d){return n(c,d,o)}}var $_e=jd();jd({strict:!0});jd({circular:!0});jd({circular:!0,strict:!0});jd({createInternalComparator:function(){return If}});jd({strict:!0,createInternalComparator:function(){return If}});jd({circular:!0,createInternalComparator:function(){return If}});jd({circular:!0,createInternalComparator:function(){return If},strict:!0});function jd(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,i=t.createInternalComparator,a=t.createState,s=t.strict,o=s===void 0?!1:s,l=R_e(t),c=I_e(l),d=i?i(c):L_e(c);return F_e({circular:n,comparator:c,createState:a,equals:d,strict:o})}function B_e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function C$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,i=function a(s){n<0&&(n=s),s-n>e?(t(s),n=-1):B_e(a)};requestAnimationFrame(i)}function IP(t){"@babel/helpers - typeof";return IP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IP(t)}function z_e(t){return H_e(t)||V_e(t)||U_e(t)||q_e()}function q_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U_e(t,e){if(t){if(typeof t=="string")return T$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T$(t,e)}}function T$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function V_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function H_e(t){if(Array.isArray(t))return t}function G_e(){var t={},e=function(){return null},n=!1,i=function a(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=z_e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){C$(a.bind(null,d),c);return}a(c),C$(a.bind(null,d));return}IP(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,i(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function rb(t){"@babel/helpers - typeof";return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rb(t)}function k$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function A$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(n),!0).forEach(function(i){PV(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function PV(t,e,n){return e=W_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W_e(t){var e=Y_e(t,"string");return rb(e)==="symbol"?e:String(e)}function Y_e(t,e){if(rb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(rb(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K_e=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(i,a){return i.filter(function(s){return a.includes(s)})})},Q_e=function(e){return e},X_e=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},wv=function(e,n){return Object.keys(n).reduce(function(i,a){return A$(A$({},i),{},PV({},a,e(a,n[a])))},{})},E$=function(e,n,i){return e.map(function(a){return"".concat(X_e(a)," ").concat(n,"ms ").concat(i)}).join(",")};function J_e(t,e){return tCe(t)||eCe(t,e)||OV(t,e)||Z_e()}function Z_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function tCe(t){if(Array.isArray(t))return t}function nCe(t){return aCe(t)||iCe(t)||OV(t)||rCe()}function rCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OV(t,e){if(t){if(typeof t=="string")return RP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RP(t,e)}}function iCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aCe(t){if(Array.isArray(t))return RP(t)}function RP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var rS=1e-4,DV=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},MV=function(e,n){return e.map(function(i,a){return i*Math.pow(n,a)}).reduce(function(i,a){return i+a})},P$=function(e,n){return function(i){var a=DV(e,n);return MV(a,i)}},sCe=function(e,n){return function(i){var a=DV(e,n),s=[].concat(nCe(a.map(function(o,l){return o*l}).slice(1)),[0]);return MV(s,i)}},O$=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(N){return parseFloat(N)}),f=J_e(d,4);a=f[0],s=f[1],o=f[2],l=f[3]}}}var p=P$(a,o),y=P$(s,l),x=sCe(a,o),v=function(_){return _>1?1:_<0?0:_},S=function(_){for(var T=_>1?1:_,C=T,O=0;O<8;++O){var k=p(C)-T,P=x(C);if(Math.abs(k-T)<rS||P<rS)return y(C);C=v(C-k/P)}return y(C)};return S.isStepper=!1,S},oCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,i=n===void 0?100:n,a=e.damping,s=a===void 0?8:a,o=e.dt,l=o===void 0?17:o,c=function(f,p,y){var x=-(f-p)*i,v=y*s,S=y+(x-v)*l/1e3,N=y*l/1e3+f;return Math.abs(N-p)<rS&&Math.abs(S)<rS?[p,0]:[N,S]};return c.isStepper=!0,c.dt=l,c},lCe=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return O$(a);case"spring":return oCe();default:if(a.split("(")[0]==="cubic-bezier")return O$(a)}return typeof a=="function"?a:null};function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function D$(t){return dCe(t)||uCe(t)||IV(t)||cCe()}function cCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dCe(t){if(Array.isArray(t))return FP(t)}function M$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Bi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(n),!0).forEach(function(i){LP(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function LP(t,e,n){return e=hCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hCe(t){var e=fCe(t,"string");return ib(e)==="symbol"?e:String(e)}function fCe(t,e){if(ib(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(ib(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pCe(t,e){return yCe(t)||gCe(t,e)||IV(t,e)||mCe()}function mCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IV(t,e){if(t){if(typeof t=="string")return FP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FP(t,e)}}function FP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function gCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function yCe(t){if(Array.isArray(t))return t}var iS=function(e,n,i){return e+(n-e)*i},$P=function(e){var n=e.from,i=e.to;return n!==i},xCe=function t(e,n,i){var a=wv(function(s,o){if($P(o)){var l=e(o.from,o.to,o.velocity),c=pCe(l,2),d=c[0],f=c[1];return Bi(Bi({},o),{},{from:d,velocity:f})}return o},n);return i<1?wv(function(s,o){return $P(o)?Bi(Bi({},o),{},{velocity:iS(o.velocity,a[s].velocity,i),from:iS(o.from,a[s].from,i)}):o},n):t(e,a,i-1)};const vCe=function(t,e,n,i,a){var s=K_e(t,e),o=s.reduce(function(N,_){return Bi(Bi({},N),{},LP({},_,[t[_],e[_]]))},{}),l=s.reduce(function(N,_){return Bi(Bi({},N),{},LP({},_,{from:t[_],velocity:0,to:e[_]}))},{}),c=-1,d,f,p=function(){return null},y=function(){return wv(function(_,T){return T.from},l)},x=function(){return!Object.values(l).filter($P).length},v=function(_){d||(d=_);var T=_-d,C=T/n.dt;l=xCe(n,l,C),a(Bi(Bi(Bi({},t),e),y())),d=_,x()||(c=requestAnimationFrame(p))},S=function(_){f||(f=_);var T=(_-f)/i,C=wv(function(k,P){return iS.apply(void 0,D$(P).concat([n(T)]))},o);if(a(Bi(Bi(Bi({},t),e),C)),T<1)c=requestAnimationFrame(p);else{var O=wv(function(k,P){return iS.apply(void 0,D$(P).concat([n(1)]))},o);a(Bi(Bi(Bi({},t),e),O))}};return p=n.isStepper?v:S,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}};function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}var bCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function jCe(t,e){if(t==null)return{};var n=wCe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function wCe(t,e){if(t==null)return{};var n={},i=Object.keys(t),a,s;for(s=0;s<i.length;s++)a=i[s],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function sA(t){return CCe(t)||_Ce(t)||NCe(t)||SCe()}function SCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NCe(t,e){if(t){if(typeof t=="string")return BP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BP(t,e)}}function _Ce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CCe(t){if(Array.isArray(t))return BP(t)}function BP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function I$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function No(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(n),!0).forEach(function(i){pv(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function pv(t,e,n){return e=RV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kCe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,RV(i.key),i)}}function ACe(t,e,n){return e&&kCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RV(t){var e=ECe(t,"string");return pg(e)==="symbol"?e:String(e)}function ECe(t,e){if(pg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(pg(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zP(t,e)}function zP(t,e){return zP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},zP(t,e)}function OCe(t){var e=DCe();return function(){var i=aS(t),a;if(e){var s=aS(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return qP(this,a)}}function qP(t,e){if(e&&(pg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UP(t)}function UP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function aS(t){return aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aS(t)}var Do=function(t){PCe(n,t);var e=OCe(n);function n(i,a){var s;TCe(this,n),s=e.call(this,i,a);var o=s.props,l=o.isActive,c=o.attributeName,d=o.from,f=o.to,p=o.steps,y=o.children,x=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(UP(s)),s.changeStyle=s.changeStyle.bind(UP(s)),!l||x<=0)return s.state={style:{}},typeof y=="function"&&(s.state={style:f}),qP(s);if(p&&p.length)s.state={style:p[0].style};else if(d){if(typeof y=="function")return s.state={style:d},qP(s);s.state={style:c?pv({},c,d):d}}else s.state={style:{}};return s}return ACe(n,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,d=s.shouldReAnimate,f=s.to,p=s.from,y=this.state.style;if(l){if(!o){var x={style:c?pv({},c,f):f};this.state&&y&&(c&&y[c]!==f||!c&&y!==f)&&this.setState(x);return}if(!($_e(a.to,f)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=v||d?p:a.to;if(this.state&&y){var N={style:c?pv({},c,S):S};(c&&y[c]!==S||!c&&y!==S)&&this.setState(N)}this.runAnimation(No(No({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,d=a.easing,f=a.begin,p=a.onAnimationEnd,y=a.onAnimationStart,x=vCe(o,l,lCe(d),c,this.changeStyle),v=function(){s.stopJSAnimation=x()};this.manager.start([y,f,v,c,p])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],f=d.style,p=d.duration,y=p===void 0?0:p,x=function(S,N,_){if(_===0)return S;var T=N.duration,C=N.easing,O=C===void 0?"ease":C,k=N.style,P=N.properties,I=N.onAnimationEnd,F=_>0?o[_-1]:N,B=P||Object.keys(k);if(typeof O=="function"||O==="spring")return[].concat(sA(S),[s.runJSAnimation.bind(s,{from:F.style,to:k,duration:T,easing:O}),T]);var $=E$(B,T,O),L=No(No(No({},F.style),k),{},{transition:$});return[].concat(sA(S),[L,T,I]).filter(Q_e)};return this.manager.start([c].concat(sA(o.reduce(x,[f,Math.max(y,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=G_e());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,f=a.onAnimationStart,p=a.onAnimationEnd,y=a.steps,x=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(a);return}if(y.length>1){this.runStepAnimation(a);return}var S=l?pv({},l,c):c,N=E$(Object.keys(S),o,d);v.start([f,s,No(No({},S),{},{transition:N}),o,p])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=jCe(a,bCe),d=b.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||d===0||o<=0)return s;var p=function(x){var v=x.props,S=v.style,N=S===void 0?{}:S,_=v.className,T=b.cloneElement(x,No(No({},c),{},{style:No(No({},N),f),className:_}));return T};return d===1?p(b.Children.only(s)):Se.createElement("div",null,b.Children.map(s,function(y){return p(y)}))}}]),n}(b.PureComponent);Do.displayName="Animate";Do.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Do.propTypes={from:or.oneOfType([or.object,or.string]),to:or.oneOfType([or.object,or.string]),attributeName:or.string,duration:or.number,begin:or.number,easing:or.oneOfType([or.string,or.func]),steps:or.arrayOf(or.shape({duration:or.number.isRequired,style:or.object.isRequired,easing:or.oneOfType([or.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),or.func]),properties:or.arrayOf("string"),onAnimationEnd:or.func})),children:or.oneOfType([or.node,or.func]),isActive:or.bool,canBegin:or.bool,onAnimationEnd:or.func,shouldReAnimate:or.bool,onAnimationStart:or.func,onAnimationReStart:or.func};function ab(t){"@babel/helpers - typeof";return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}function sS(){return sS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sS.apply(this,arguments)}function MCe(t,e){return FCe(t)||LCe(t,e)||RCe(t,e)||ICe()}function ICe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RCe(t,e){if(t){if(typeof t=="string")return R$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R$(t,e)}}function R$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function LCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function FCe(t){if(Array.isArray(t))return t}function L$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function F$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L$(Object(n),!0).forEach(function(i){$Ce(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $Ce(t,e,n){return e=BCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BCe(t){var e=zCe(t,"string");return ab(e)=="symbol"?e:e+""}function zCe(t,e){if(ab(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(ab(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $$=function(e,n,i,a,s){var o=Math.min(Math.abs(i)/2,Math.abs(a)/2),l=a>=0?1:-1,c=i>=0?1:-1,d=a>=0&&i>=0||a<0&&i<0?1:0,f;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],y=0,x=4;y<x;y++)p[y]=s[y]>o?o:s[y];f="M".concat(e,",").concat(n+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+c*p[0],",").concat(n)),f+="L ".concat(e+i-c*p[1],",").concat(n),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+i,",").concat(n+l*p[1])),f+="L ".concat(e+i,",").concat(n+a-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+i-c*p[2],",").concat(n+a)),f+="L ".concat(e+c*p[3],",").concat(n+a),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(n+a-l*p[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var v=Math.min(o,s);f="M ".concat(e,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+c*v,",").concat(n,`
            L `).concat(e+i-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+i,",").concat(n+l*v,`
            L `).concat(e+i,",").concat(n+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+i-c*v,",").concat(n+a,`
            L `).concat(e+c*v,",").concat(n+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e,",").concat(n+a-l*v," Z")}else f="M ".concat(e,",").concat(n," h ").concat(i," v ").concat(a," h ").concat(-i," Z");return f},qCe=function(e,n){if(!e||!n)return!1;var i=e.x,a=e.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(s,s+l),f=Math.max(s,s+l),p=Math.min(o,o+c),y=Math.max(o,o+c);return i>=d&&i<=f&&a>=p&&a<=y}return!1},UCe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pM=function(e){var n=F$(F$({},UCe),e),i=b.useRef(),a=b.useState(-1),s=MCe(a,2),o=s[0],l=s[1];b.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var O=i.current.getTotalLength();O&&l(O)}catch{}},[]);var c=n.x,d=n.y,f=n.width,p=n.height,y=n.radius,x=n.className,v=n.animationEasing,S=n.animationDuration,N=n.animationBegin,_=n.isAnimationActive,T=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||f===0||p===0)return null;var C=un("recharts-rectangle",x);return T?Se.createElement(Do,{canBegin:o>0,from:{width:f,height:p,x:c,y:d},to:{width:f,height:p,x:c,y:d},duration:S,animationEasing:v,isActive:T},function(O){var k=O.width,P=O.height,I=O.x,F=O.y;return Se.createElement(Do,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:N,duration:S,isActive:_,easing:v},Se.createElement("path",sS({},Ft(n,!0),{className:C,d:$$(I,F,k,P,y),ref:i})))}):Se.createElement("path",sS({},Ft(n,!0),{className:C,d:$$(c,d,f,p,y)}))},VCe=["points","className","baseLinePoints","connectNulls"];function km(){return km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},km.apply(this,arguments)}function HCe(t,e){if(t==null)return{};var n=GCe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function GCe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function B$(t){return QCe(t)||KCe(t)||YCe(t)||WCe()}function WCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YCe(t,e){if(t){if(typeof t=="string")return VP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VP(t,e)}}function KCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QCe(t){if(Array.isArray(t))return VP(t)}function VP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var z$=function(e){return e&&e.x===+e.x&&e.y===+e.y},XCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(i){z$(i)?n[n.length-1].push(i):n[n.length-1].length>0&&n.push([])}),z$(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Sv=function(e,n){var i=XCe(e);n&&(i=[i.reduce(function(s,o){return[].concat(B$(s),B$(o))},[])]);var a=i.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return i.length===1?"".concat(a,"Z"):a},JCe=function(e,n,i){var a=Sv(e,i);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Sv(n.reverse(),i).slice(1))},ZCe=function(e){var n=e.points,i=e.className,a=e.baseLinePoints,s=e.connectNulls,o=HCe(e,VCe);if(!n||!n.length)return null;var l=un("recharts-polygon",i);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",d=JCe(n,a,s);return Se.createElement("g",{className:l},Se.createElement("path",km({},Ft(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?Se.createElement("path",km({},Ft(o,!0),{fill:"none",d:Sv(n,s)})):null,c?Se.createElement("path",km({},Ft(o,!0),{fill:"none",d:Sv(a,s)})):null)}var f=Sv(n,s);return Se.createElement("path",km({},Ft(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function HP(){return HP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},HP.apply(this,arguments)}var Vb=function(e){var n=e.cx,i=e.cy,a=e.r,s=e.className,o=un("recharts-dot",s);return n===+n&&i===+i&&a===+a?b.createElement("circle",HP({},Ft(e,!1),Aw(e),{className:o,cx:n,cy:i,r:a})):null};function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}var e2e=["x","y","top","left","width","height","className"];function GP(){return GP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},GP.apply(this,arguments)}function q$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function t2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q$(Object(n),!0).forEach(function(i){n2e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function n2e(t,e,n){return e=r2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r2e(t){var e=i2e(t,"string");return sb(e)=="symbol"?e:e+""}function i2e(t,e){if(sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(sb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a2e(t,e){if(t==null)return{};var n=s2e(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function s2e(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var o2e=function(e,n,i,a,s,o){return"M".concat(e,",").concat(s,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(i)},l2e=function(e){var n=e.x,i=n===void 0?0:n,a=e.y,s=a===void 0?0:a,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,f=e.width,p=f===void 0?0:f,y=e.height,x=y===void 0?0:y,v=e.className,S=a2e(e,e2e),N=t2e({x:i,y:s,top:l,left:d,width:p,height:x},S);return!bt(i)||!bt(s)||!bt(p)||!bt(x)||!bt(l)||!bt(d)?null:Se.createElement("path",GP({},Ft(N,!0),{className:un("recharts-cross",v),d:o2e(i,s,p,x,l,d)}))},oA,U$;function c2e(){if(U$)return oA;U$=1;var t=bN(),e=X7(),n=Il();function i(a,s){return a&&a.length?t(a,n(s,2),e):void 0}return oA=i,oA}var u2e=c2e();const d2e=Bn(u2e);var lA,V$;function h2e(){if(V$)return lA;V$=1;var t=bN(),e=Il(),n=J7();function i(a,s){return a&&a.length?t(a,e(s,2),n):void 0}return lA=i,lA}var f2e=h2e();const p2e=Bn(f2e);var m2e=["cx","cy","angle","ticks","axisLine"],g2e=["ticks","tick","angle","tickFormatter","stroke"];function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}function Nv(){return Nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Nv.apply(this,arguments)}function H$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function $h(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H$(Object(n),!0).forEach(function(i){NN(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function G$(t,e){if(t==null)return{};var n=y2e(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function y2e(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function x2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W$(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,FV(i.key),i)}}function v2e(t,e,n){return e&&W$(t.prototype,e),n&&W$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b2e(t,e,n){return e=oS(e),j2e(t,LV()?Reflect.construct(e,n||[],oS(t).constructor):e.apply(t,n))}function j2e(t,e){if(e&&(mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w2e(t)}function w2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LV=function(){return!!t})()}function oS(t){return oS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oS(t)}function S2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WP(t,e)}function WP(t,e){return WP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},WP(t,e)}function NN(t,e,n){return e=FV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FV(t){var e=N2e(t,"string");return mg(e)=="symbol"?e:e+""}function N2e(t,e){if(mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(mg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _N=function(t){function e(){return x2e(this,e),b2e(this,e,arguments)}return S2e(e,t),v2e(e,[{key:"getTickValueCoord",value:function(i){var a=i.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Mr(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var i=this.props.orientation,a;switch(i){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var i=this.props,a=i.cx,s=i.cy,o=i.angle,l=i.ticks,c=d2e(l,function(f){return f.coordinate||0}),d=p2e(l,function(f){return f.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var i=this.props,a=i.cx,s=i.cy,o=i.angle,l=i.ticks,c=i.axisLine,d=G$(i,m2e),f=l.reduce(function(v,S){return[Math.min(v[0],S.coordinate),Math.max(v[1],S.coordinate)]},[1/0,-1/0]),p=Mr(a,s,f[0],o),y=Mr(a,s,f[1],o),x=$h($h($h({},Ft(d,!1)),{},{fill:"none"},Ft(c,!1)),{},{x1:p.x,y1:p.y,x2:y.x,y2:y.y});return Se.createElement("line",Nv({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var i=this,a=this.props,s=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,d=a.stroke,f=G$(a,g2e),p=this.getTickTextAnchor(),y=Ft(f,!1),x=Ft(o,!1),v=s.map(function(S,N){var _=i.getTickValueCoord(S),T=$h($h($h($h({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(_.x,", ").concat(_.y,")")},y),{},{stroke:"none",fill:d},x),{},{index:N},_),{},{payload:S});return Se.createElement(Pn,Nv({className:un("recharts-polar-radius-axis-tick",CV(o)),key:"tick-".concat(S.coordinate)},Sf(i.props,S,N)),e.renderTickItem(o,T,c?c(S.value,N):S.value))});return Se.createElement(Pn,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var i=this.props,a=i.ticks,s=i.axisLine,o=i.tick;return!a||!a.length?null:Se.createElement(Pn,{className:un("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Pi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(i,a,s){var o;return Se.isValidElement(i)?o=Se.cloneElement(i,a):en(i)?o=i(a):o=Se.createElement(Nf,Nv({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(b.PureComponent);NN(_N,"displayName","PolarRadiusAxis");NN(_N,"axisType","radiusAxis");NN(_N,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function Gh(){return Gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gh.apply(this,arguments)}function Y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y$(Object(n),!0).forEach(function(i){CN(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y$(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K$(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,BV(i.key),i)}}function C2e(t,e,n){return e&&K$(t.prototype,e),n&&K$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function T2e(t,e,n){return e=lS(e),k2e(t,$V()?Reflect.construct(e,n||[],lS(t).constructor):e.apply(t,n))}function k2e(t,e){if(e&&(gg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A2e(t)}function A2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $V(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($V=function(){return!!t})()}function lS(t){return lS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lS(t)}function E2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YP(t,e)}function YP(t,e){return YP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},YP(t,e)}function CN(t,e,n){return e=BV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BV(t){var e=P2e(t,"string");return gg(e)=="symbol"?e:e+""}function P2e(t,e){if(gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(gg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var O2e=Math.PI/180,D2e=1e-5,TN=function(t){function e(){return _2e(this,e),T2e(this,e,arguments)}return E2e(e,t),C2e(e,[{key:"getTickLineCoord",value:function(i){var a=this.props,s=a.cx,o=a.cy,l=a.radius,c=a.orientation,d=a.tickSize,f=d||8,p=Mr(s,o,l,i.coordinate),y=Mr(s,o,l+(c==="inner"?-1:1)*f,i.coordinate);return{x1:p.x,y1:p.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(i){var a=this.props.orientation,s=Math.cos(-i.coordinate*O2e),o;return s>D2e?o=a==="outer"?"start":"end":s<-1e-5?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.axisLine,c=i.axisLineType,d=Bh(Bh({},Ft(this.props,!1)),{},{fill:"none"},Ft(l,!1));if(c==="circle")return Se.createElement(Vb,Gh({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:s,r:o}));var f=this.props.ticks,p=f.map(function(y){return Mr(a,s,o,y.coordinate)});return Se.createElement(ZCe,Gh({className:"recharts-polar-angle-axis-line"},d,{points:p}))}},{key:"renderTicks",value:function(){var i=this,a=this.props,s=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,d=a.stroke,f=Ft(this.props,!1),p=Ft(o,!1),y=Bh(Bh({},f),{},{fill:"none"},Ft(l,!1)),x=s.map(function(v,S){var N=i.getTickLineCoord(v),_=i.getTickTextAnchor(v),T=Bh(Bh(Bh({textAnchor:_},f),{},{stroke:"none",fill:d},p),{},{index:S,payload:v,x:N.x2,y:N.y2});return Se.createElement(Pn,Gh({className:un("recharts-polar-angle-axis-tick",CV(o)),key:"tick-".concat(v.coordinate)},Sf(i.props,v,S)),l&&Se.createElement("line",Gh({className:"recharts-polar-angle-axis-tick-line"},y,N)),o&&e.renderTickItem(o,T,c?c(v.value,S):v.value))});return Se.createElement(Pn,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var i=this.props,a=i.ticks,s=i.radius,o=i.axisLine;return s<=0||!a||!a.length?null:Se.createElement(Pn,{className:un("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(i,a,s){var o;return Se.isValidElement(i)?o=Se.cloneElement(i,a):en(i)?o=i(a):o=Se.createElement(Nf,Gh({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(b.PureComponent);CN(TN,"displayName","PolarAngleAxis");CN(TN,"axisType","angleAxis");CN(TN,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var cA,Q$;function M2e(){if(Q$)return cA;Q$=1;var t=Q9(),e=t(Object.getPrototypeOf,Object);return cA=e,cA}var uA,X$;function I2e(){if(X$)return uA;X$=1;var t=Uc(),e=M2e(),n=Vc(),i="[object Object]",a=Function.prototype,s=Object.prototype,o=a.toString,l=s.hasOwnProperty,c=o.call(Object);function d(f){if(!n(f)||t(f)!=i)return!1;var p=e(f);if(p===null)return!0;var y=l.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&o.call(y)==c}return uA=d,uA}var R2e=I2e();const L2e=Bn(R2e);var dA,J$;function F2e(){if(J$)return dA;J$=1;var t=Uc(),e=Vc(),n="[object Boolean]";function i(a){return a===!0||a===!1||e(a)&&t(a)==n}return dA=i,dA}var $2e=F2e();const B2e=Bn($2e);function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}function cS(){return cS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cS.apply(this,arguments)}function z2e(t,e){return H2e(t)||V2e(t,e)||U2e(t,e)||q2e()}function q2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U2e(t,e){if(t){if(typeof t=="string")return Z$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z$(t,e)}}function Z$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function V2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function H2e(t){if(Array.isArray(t))return t}function e8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function t8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e8(Object(n),!0).forEach(function(i){G2e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function G2e(t,e,n){return e=W2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W2e(t){var e=Y2e(t,"string");return ob(e)=="symbol"?e:e+""}function Y2e(t,e){if(ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(ob(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n8=function(e,n,i,a,s){var o=i-a,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+i,",").concat(n),l+="L ".concat(e+i-o/2,",").concat(n+s),l+="L ".concat(e+i-o/2-a,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},K2e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q2e=function(e){var n=t8(t8({},K2e),e),i=b.useRef(),a=b.useState(-1),s=z2e(a,2),o=s[0],l=s[1];b.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var C=i.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,d=n.y,f=n.upperWidth,p=n.lowerWidth,y=n.height,x=n.className,v=n.animationEasing,S=n.animationDuration,N=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||y!==+y||f===0&&p===0||y===0)return null;var T=un("recharts-trapezoid",x);return _?Se.createElement(Do,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:y,x:c,y:d},to:{upperWidth:f,lowerWidth:p,height:y,x:c,y:d},duration:S,animationEasing:v,isActive:_},function(C){var O=C.upperWidth,k=C.lowerWidth,P=C.height,I=C.x,F=C.y;return Se.createElement(Do,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:N,duration:S,easing:v},Se.createElement("path",cS({},Ft(n,!0),{className:T,d:n8(I,F,O,k,P),ref:i})))}):Se.createElement("g",null,Se.createElement("path",cS({},Ft(n,!0),{className:T,d:n8(c,d,f,p,y)})))},X2e=["option","shapeType","propTransformer","activeClassName","isActive"];function lb(t){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lb(t)}function J2e(t,e){if(t==null)return{};var n=Z2e(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Z2e(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function r8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function uS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r8(Object(n),!0).forEach(function(i){eTe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function eTe(t,e,n){return e=tTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tTe(t){var e=nTe(t,"string");return lb(e)=="symbol"?e:e+""}function nTe(t,e){if(lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(lb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rTe(t,e){return uS(uS({},e),t)}function iTe(t,e){return t==="symbols"}function i8(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Se.createElement(pM,n);case"trapezoid":return Se.createElement(Q2e,n);case"sector":return Se.createElement(AV,n);case"symbols":if(iTe(e))return Se.createElement(DD,n);break;default:return null}}function aTe(t){return b.isValidElement(t)?t.props:t}function zV(t){var e=t.option,n=t.shapeType,i=t.propTransformer,a=i===void 0?rTe:i,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=J2e(t,X2e),d;if(b.isValidElement(e))d=b.cloneElement(e,uS(uS({},c),aTe(e)));else if(en(e))d=e(c);else if(L2e(e)&&!B2e(e)){var f=a(e,c);d=Se.createElement(i8,{shapeType:n,elementProps:f})}else{var p=c;d=Se.createElement(i8,{shapeType:n,elementProps:p})}return l?Se.createElement(Pn,{className:o},d):d}function kN(t,e){return e!=null&&"trapezoids"in t.props}function AN(t,e){return e!=null&&"sectors"in t.props}function cb(t,e){return e!=null&&"points"in t.props}function sTe(t,e){var n,i,a=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(i=e.labelViewBox)===null||i===void 0?void 0:i.y)||t.y===e.y;return a&&s}function oTe(t,e){var n=t.endAngle===e.endAngle,i=t.startAngle===e.startAngle;return n&&i}function lTe(t,e){var n=t.x===e.x,i=t.y===e.y,a=t.z===e.z;return n&&i&&a}function cTe(t,e){var n;return kN(t,e)?n=sTe:AN(t,e)?n=oTe:cb(t,e)&&(n=lTe),n}function uTe(t,e){var n;return kN(t,e)?n="trapezoids":AN(t,e)?n="sectors":cb(t,e)&&(n="points"),n}function dTe(t,e){if(kN(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(AN(t,e)){var i;return(i=e.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}return cb(t,e)?e.payload:{}}function hTe(t){var e=t.activeTooltipItem,n=t.graphicalItem,i=t.itemData,a=uTe(n,e),s=dTe(n,e),o=i.filter(function(c,d){var f=_f(s,c),p=n.props[a].filter(function(v){var S=cTe(n,e);return S(v,e)}),y=n.props[a].indexOf(p[p.length-1]),x=d===y;return f&&x}),l=i.indexOf(o[o.length-1]);return l}var aw;function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Am.apply(this,arguments)}function a8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a8(Object(n),!0).forEach(function(i){Ys(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function fTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s8(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,UV(i.key),i)}}function pTe(t,e,n){return e&&s8(t.prototype,e),n&&s8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mTe(t,e,n){return e=dS(e),gTe(t,qV()?Reflect.construct(e,n||[],dS(t).constructor):e.apply(t,n))}function gTe(t,e){if(e&&(yg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yTe(t)}function yTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qV=function(){return!!t})()}function dS(t){return dS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dS(t)}function xTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KP(t,e)}function KP(t,e){return KP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},KP(t,e)}function Ys(t,e,n){return e=UV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UV(t){var e=vTe(t,"string");return yg(e)=="symbol"?e:e+""}function vTe(t,e){if(yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(yg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rl=function(t){function e(n){var i;return fTe(this,e),i=mTe(this,e,[n]),Ys(i,"pieRef",null),Ys(i,"sectorRefs",[]),Ys(i,"id",Of("recharts-pie-")),Ys(i,"handleAnimationEnd",function(){var a=i.props.onAnimationEnd;i.setState({isAnimationFinished:!0}),en(a)&&a()}),Ys(i,"handleAnimationStart",function(){var a=i.props.onAnimationStart;i.setState({isAnimationFinished:!1}),en(a)&&a()}),i.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},i}return xTe(e,t),pTe(e,[{key:"isActiveIndex",value:function(i){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(i)!==-1:i===a}},{key:"hasActiveIndex",value:function(){var i=this.props.activeIndex;return Array.isArray(i)?i.length!==0:i||i===0}},{key:"renderLabels",value:function(i){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,d=s.valueKey,f=Ft(this.props,!1),p=Ft(o,!1),y=Ft(l,!1),x=o&&o.offsetRadius||20,v=i.map(function(S,N){var _=(S.startAngle+S.endAngle)/2,T=Mr(S.cx,S.cy,S.outerRadius+x,_),C=Or(Or(Or(Or({},f),S),{},{stroke:"none"},p),{},{index:N,textAnchor:e.getTextAnchor(T.x,S.cx)},T),O=Or(Or(Or(Or({},f),S),{},{fill:"none",stroke:S.fill},y),{},{index:N,points:[Mr(S.cx,S.cy,S.outerRadius,_),T]}),k=c;return ln(c)&&ln(d)?k="value":ln(c)&&(k=d),Se.createElement(Pn,{key:"label-".concat(S.startAngle,"-").concat(S.endAngle,"-").concat(S.midAngle,"-").concat(N)},l&&e.renderLabelLineItem(l,O,"line"),e.renderLabelItem(o,C,si(S,k)))});return Se.createElement(Pn,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(i){var a=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return i.map(function(d,f){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&i.length!==1)return null;var p=a.isActiveIndex(f),y=c&&a.hasActiveIndex()?c:null,x=p?o:y,v=Or(Or({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return Se.createElement(Pn,Am({ref:function(N){N&&!a.sectorRefs.includes(N)&&a.sectorRefs.push(N)},tabIndex:-1,className:"recharts-pie-sector"},Sf(a.props,d,f),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(f)}),Se.createElement(zV,Am({option:x,isActive:p,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var i=this,a=this.props,s=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,f=a.animationId,p=this.state,y=p.prevSectors,x=p.prevIsAnimationActive;return Se.createElement(Do,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var S=v.t,N=[],_=s&&s[0],T=_.startAngle;return s.forEach(function(C,O){var k=y&&y[O],P=O>0?ks(C,"paddingAngle",0):0;if(k){var I=wi(k.endAngle-k.startAngle,C.endAngle-C.startAngle),F=Or(Or({},C),{},{startAngle:T+P,endAngle:T+I(S)+P});N.push(F),T=F.endAngle}else{var B=C.endAngle,$=C.startAngle,L=wi(0,B-$),V=L(S),H=Or(Or({},C),{},{startAngle:T+P,endAngle:T+V+P});N.push(H),T=H.endAngle}}),Se.createElement(Pn,null,i.renderSectorsStatically(N))})}},{key:"attachKeyboardHandlers",value:function(i){var a=this;i.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var i=this.props,a=i.sectors,s=i.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!_f(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var i=this,a=this.props,s=a.hide,o=a.sectors,l=a.className,c=a.label,d=a.cx,f=a.cy,p=a.innerRadius,y=a.outerRadius,x=a.isAnimationActive,v=this.state.isAnimationFinished;if(s||!o||!o.length||!bt(d)||!bt(f)||!bt(p)||!bt(y))return null;var S=un("recharts-pie",l);return Se.createElement(Pn,{tabIndex:this.props.rootTabIndex,className:S,ref:function(_){i.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),Pi.renderCallByParent(this.props,null,!1),(!x||v)&&Al.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return a.prevIsAnimationActive!==i.isAnimationActive?{prevIsAnimationActive:i.isAnimationActive,prevAnimationId:i.animationId,curSectors:i.sectors,prevSectors:[],isAnimationFinished:!0}:i.isAnimationActive&&i.animationId!==a.prevAnimationId?{prevAnimationId:i.animationId,curSectors:i.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:i.sectors!==a.curSectors?{curSectors:i.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(i,a){return i>a?"start":i<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(i,a,s){if(Se.isValidElement(i))return Se.cloneElement(i,a);if(en(i))return i(a);var o=un("recharts-pie-label-line",typeof i!="boolean"?i.className:"");return Se.createElement(df,Am({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(i,a,s){if(Se.isValidElement(i))return Se.cloneElement(i,a);var o=s;if(en(i)&&(o=i(a),Se.isValidElement(o)))return o;var l=un("recharts-pie-label-text",typeof i!="boolean"&&!en(i)?i.className:"");return Se.createElement(Nf,Am({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(b.PureComponent);aw=Rl;Ys(Rl,"displayName","Pie");Ys(Rl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!xd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ys(Rl,"parseDeltaAngle",function(t,e){var n=Pa(e-t),i=Math.min(Math.abs(e-t),360);return n*i});Ys(Rl,"getRealPieData",function(t){var e=t.data,n=t.children,i=Ft(t,!1),a=As(n,Fb);return e&&e.length?e.map(function(s,o){return Or(Or(Or({payload:s},i),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return Or(Or({},i),s.props)}):[]});Ys(Rl,"parseCoordinateOfPie",function(t,e){var n=e.top,i=e.left,a=e.width,s=e.height,o=_V(a,s),l=i+Oa(t.cx,a,a/2),c=n+Oa(t.cy,s,s/2),d=Oa(t.innerRadius,o,0),f=Oa(t.outerRadius,o,o*.8),p=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:f,maxRadius:p}});Ys(Rl,"getComposedData",function(t){var e=t.item,n=t.offset,i=e.type.defaultProps!==void 0?Or(Or({},e.type.defaultProps),e.props):e.props,a=aw.getRealPieData(i);if(!a||!a.length)return null;var s=i.cornerRadius,o=i.startAngle,l=i.endAngle,c=i.paddingAngle,d=i.dataKey,f=i.nameKey,p=i.valueKey,y=i.tooltipType,x=Math.abs(i.minAngle),v=aw.parseCoordinateOfPie(i,n),S=aw.parseDeltaAngle(o,l),N=Math.abs(S),_=d;ln(d)&&ln(p)?(Oo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):ln(d)&&(Oo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=p);var T=a.filter(function(F){return si(F,_,0)!==0}).length,C=(N>=360?T:T-1)*c,O=N-T*x-C,k=a.reduce(function(F,B){var $=si(B,_,0);return F+(bt($)?$:0)},0),P;if(k>0){var I;P=a.map(function(F,B){var $=si(F,_,0),L=si(F,f,B),V=(bt($)?$:0)/k,H;B?H=I.endAngle+Pa(S)*c*($!==0?1:0):H=o;var te=H+Pa(S)*(($!==0?x:0)+V*O),X=(H+te)/2,q=(v.innerRadius+v.outerRadius)/2,W=[{name:L,value:$,payload:F,dataKey:_,type:y}],ae=Mr(v.cx,v.cy,q,X);return I=Or(Or(Or({percent:V,cornerRadius:s,name:L,tooltipPayload:W,midAngle:X,middleRadius:q,tooltipPosition:ae},F),v),{},{value:si(F,_),startAngle:H,endAngle:te,payload:F,paddingAngle:Pa(S)*c}),I})}return Or(Or({},v),{},{sectors:P,data:a})});var hA,o8;function bTe(){if(o8)return hA;o8=1;var t=Math.ceil,e=Math.max;function n(i,a,s,o){for(var l=-1,c=e(t((a-i)/(s||1)),0),d=Array(c);c--;)d[o?c:++l]=i,i+=s;return d}return hA=n,hA}var fA,l8;function VV(){if(l8)return fA;l8=1;var t=h7(),e=1/0,n=17976931348623157e292;function i(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-1/0){var s=a<0?-1:1;return s*n}return a===a?a:0}return fA=i,fA}var pA,c8;function jTe(){if(c8)return pA;c8=1;var t=bTe(),e=fN(),n=VV();function i(a){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,a)}}return pA=i,pA}var mA,u8;function wTe(){if(u8)return mA;u8=1;var t=jTe(),e=t();return mA=e,mA}var STe=wTe();const hS=Bn(STe);function ub(t){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(t)}function d8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function h8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d8(Object(n),!0).forEach(function(i){HV(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function HV(t,e,n){return e=NTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NTe(t){var e=_Te(t,"string");return ub(e)=="symbol"?e:e+""}function _Te(t,e){if(ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(ub(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CTe=["Webkit","Moz","O","ms"],TTe=function(e,n){var i=e.replace(/(\w)/,function(s){return s.toUpperCase()}),a=CTe.reduce(function(s,o){return h8(h8({},s),{},HV({},o+i,n))},{});return a[e]=n,a};function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fS.apply(this,arguments)}function f8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function gA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f8(Object(n),!0).forEach(function(i){js(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function kTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p8(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,WV(i.key),i)}}function ATe(t,e,n){return e&&p8(t.prototype,e),n&&p8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ETe(t,e,n){return e=pS(e),PTe(t,GV()?Reflect.construct(e,n||[],pS(t).constructor):e.apply(t,n))}function PTe(t,e){if(e&&(xg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OTe(t)}function OTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GV=function(){return!!t})()}function pS(t){return pS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pS(t)}function DTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QP(t,e)}function QP(t,e){return QP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},QP(t,e)}function js(t,e,n){return e=WV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WV(t){var e=MTe(t,"string");return xg(e)=="symbol"?e:e+""}function MTe(t,e){if(xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(xg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ITe=function(e){var n=e.data,i=e.startIndex,a=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=bv().domain(hS(0,c)).range([s,s+o-l]),f=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(i),endX:d(a),scale:d,scaleValues:f}},m8=function(e){return e.changedTouches&&!!e.changedTouches.length},vg=function(t){function e(n){var i;return kTe(this,e),i=ETe(this,e,[n]),js(i,"handleDrag",function(a){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(a):i.state.isSlideMoving&&i.handleSlideDrag(a)}),js(i,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&i.handleDrag(a.changedTouches[0])}),js(i,"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=i.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),i.detachDragEndListener()}),js(i,"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),js(i,"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),js(i,"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),js(i,"handleSlideDragStart",function(a){var s=m8(a)?a.changedTouches[0]:a;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(i,"startX"),endX:i.handleTravellerDragStart.bind(i,"endX")},i.state={},i}return DTe(e,t),ATe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var a=i.startX,s=i.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,p=Math.min(a,s),y=Math.max(a,s),x=e.getIndexInRange(o,p),v=e.getIndexInRange(o,y);return{startIndex:x-x%c,endIndex:v===f?f:v-v%c}}},{key:"getTextOfTick",value:function(i){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=si(s[i],l,i);return en(o)?o(c,i):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,f=c.width,p=c.travellerWidth,y=c.startIndex,x=c.endIndex,v=c.onChange,S=i.pageX-s;S>0?S=Math.min(S,d+f-p-l,d+f-p-o):S<0&&(S=Math.max(S,d-o,d-l));var N=this.getIndex({startX:o+S,endX:l+S});(N.startIndex!==y||N.endIndex!==x)&&v&&v(N),this.setState({startX:o+S,endX:l+S,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,a){var s=m8(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],f=this.props,p=f.x,y=f.width,x=f.travellerWidth,v=f.onChange,S=f.gap,N=f.data,_={startX:this.state.startX,endX:this.state.endX},T=i.pageX-s;T>0?T=Math.min(T,p+y-x-d):T<0&&(T=Math.max(T,p-d)),_[o]=d+T;var C=this.getIndex(_),O=C.startIndex,k=C.endIndex,P=function(){var F=N.length-1;return o==="startX"&&(l>c?O%S===0:k%S===0)||l<c&&k===F||o==="endX"&&(l>c?k%S===0:O%S===0)||l>c&&k===F};this.setState(js(js({},o,d+T),"brushMoveStartX",i.pageX),function(){v&&P()&&v(C)})}},{key:"handleTravellerMoveKeyboard",value:function(i,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,f=this.state[a],p=l.indexOf(f);if(p!==-1){var y=p+i;if(!(y===-1||y>=l.length)){var x=l[y];a==="startX"&&x>=d||a==="endX"&&x<=c||this.setState(js({},a,x),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.fill,d=i.stroke;return Se.createElement("rect",{stroke:d,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.data,d=i.children,f=i.padding,p=b.Children.only(d);return p?Se.cloneElement(p,{x:a,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(i,a){var s,o,l=this,c=this.props,d=c.y,f=c.travellerWidth,p=c.height,y=c.traveller,x=c.ariaLabel,v=c.data,S=c.startIndex,N=c.endIndex,_=Math.max(i,this.props.x),T=gA(gA({},Ft(this.props,!1)),{},{x:_,y:d,width:f,height:p}),C=x||"Min value: ".concat((s=v[S])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=v[N])===null||o===void 0?void 0:o.name);return Se.createElement(Pn,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,T))}},{key:"renderSlide",value:function(i,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,d=s.travellerWidth,f=Math.min(i,a)+d,p=Math.max(Math.abs(a-i)-d,0);return Se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var i=this.props,a=i.startIndex,s=i.endIndex,o=i.y,l=i.height,c=i.travellerWidth,d=i.stroke,f=this.state,p=f.startX,y=f.endX,x=5,v={pointerEvents:"none",fill:d};return Se.createElement(Pn,{className:"recharts-brush-texts"},Se.createElement(Nf,fS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,y)-x,y:o+l/2},v),this.getTextOfTick(a)),Se.createElement(Nf,fS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,y)+c+x,y:o+l/2},v),this.getTextOfTick(s)))}},{key:"render",value:function(){var i=this.props,a=i.data,s=i.className,o=i.children,l=i.x,c=i.y,d=i.width,f=i.height,p=i.alwaysShowText,y=this.state,x=y.startX,v=y.endX,S=y.isTextActive,N=y.isSlideMoving,_=y.isTravellerMoving,T=y.isTravellerFocused;if(!a||!a.length||!bt(l)||!bt(c)||!bt(d)||!bt(f)||d<=0||f<=0)return null;var C=un("recharts-brush",s),O=Se.Children.count(o)===1,k=TTe("userSelect","none");return Se.createElement(Pn,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),O&&this.renderPanorama(),this.renderSlide(x,v),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(v,"endX"),(S||N||_||T||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var a=i.x,s=i.y,o=i.width,l=i.height,c=i.stroke,d=Math.floor(s+l/2)-1;return Se.createElement(Se.Fragment,null,Se.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),Se.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),Se.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,a){var s;return Se.isValidElement(i)?s=Se.cloneElement(i,a):en(i)?s=i(a):s=e.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(i,a){var s=i.data,o=i.width,l=i.x,c=i.travellerWidth,d=i.updateId,f=i.startIndex,p=i.endIndex;if(s!==a.prevData||d!==a.prevUpdateId)return gA({prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},s&&s.length?ITe({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var y=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(i.startIndex),endX:a.scale(i.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(i,a){for(var s=i.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);i[c]>a?l=c:o=c}return a>=i[l]?l:o}}])}(b.PureComponent);js(vg,"displayName","Brush");js(vg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var yA,g8;function RTe(){if(g8)return yA;g8=1;var t=BD();function e(n,i){var a;return t(n,function(s,o,l){return a=i(s,o,l),!a}),!!a}return yA=e,yA}var xA,y8;function LTe(){if(y8)return xA;y8=1;var t=U9(),e=Il(),n=RTe(),i=os(),a=fN();function s(o,l,c){var d=i(o)?t:n;return c&&a(o,l,c)&&(l=void 0),d(o,e(l,3))}return xA=s,xA}var FTe=LTe();const $Te=Bn(FTe);var El=function(e,n){var i=e.alwaysShow,a=e.ifOverflow;return i&&(a="extendDomain"),a===n},vA,x8;function BTe(){if(x8)return vA;x8=1;var t=o7();function e(n,i,a){i=="__proto__"&&t?t(n,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[i]=a}return vA=e,vA}var bA,v8;function zTe(){if(v8)return bA;v8=1;var t=BTe(),e=a7(),n=Il();function i(a,s){var o={};return s=n(s,3),e(a,function(l,c,d){t(o,c,s(l,c,d))}),o}return bA=i,bA}var qTe=zTe();const UTe=Bn(qTe);var jA,b8;function VTe(){if(b8)return jA;b8=1;function t(e,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(!n(e[i],i,e))return!1;return!0}return jA=t,jA}var wA,j8;function HTe(){if(j8)return wA;j8=1;var t=BD();function e(n,i){var a=!0;return t(n,function(s,o,l){return a=!!i(s,o,l),a}),a}return wA=e,wA}var SA,w8;function GTe(){if(w8)return SA;w8=1;var t=VTe(),e=HTe(),n=Il(),i=os(),a=fN();function s(o,l,c){var d=i(o)?t:e;return c&&a(o,l,c)&&(l=void 0),d(o,n(l,3))}return SA=s,SA}var WTe=GTe();const YV=Bn(WTe);var YTe=["x","y"];function db(t){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},db(t)}function XP(){return XP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},XP.apply(this,arguments)}function S8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function nv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S8(Object(n),!0).forEach(function(i){KTe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function KTe(t,e,n){return e=QTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QTe(t){var e=XTe(t,"string");return db(e)=="symbol"?e:e+""}function XTe(t,e){if(db(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(db(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JTe(t,e){if(t==null)return{};var n=ZTe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function ZTe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function eke(t,e){var n=t.x,i=t.y,a=JTe(t,YTe),s="".concat(n),o=parseInt(s,10),l="".concat(i),c=parseInt(l,10),d="".concat(e.height||a.height),f=parseInt(d,10),p="".concat(e.width||a.width),y=parseInt(p,10);return nv(nv(nv(nv(nv({},e),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:y,name:e.name,radius:e.radius})}function N8(t){return Se.createElement(zV,XP({shapeType:"rectangle",propTransformer:eke,activeClassName:"recharts-active-bar"},t))}var tke=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(i,a){if(typeof e=="number")return e;var s=bt(i)||_ye(i);return s?e(i,a):(s||Tf(),n)}},nke=["value","background"],KV;function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function rke(t,e){if(t==null)return{};var n=ike(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function ike(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function mS(){return mS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mS.apply(this,arguments)}function _8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_8(Object(n),!0).forEach(function(i){id(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ake(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C8(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,XV(i.key),i)}}function ske(t,e,n){return e&&C8(t.prototype,e),n&&C8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oke(t,e,n){return e=gS(e),lke(t,QV()?Reflect.construct(e,n||[],gS(t).constructor):e.apply(t,n))}function lke(t,e){if(e&&(bg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cke(t)}function cke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QV=function(){return!!t})()}function gS(t){return gS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gS(t)}function uke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JP(t,e)}function JP(t,e){return JP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},JP(t,e)}function id(t,e,n){return e=XV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XV(t){var e=dke(t,"string");return bg(e)=="symbol"?e:e+""}function dke(t,e){if(bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(bg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wd=function(t){function e(){var n;ake(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=oke(this,e,[].concat(a)),id(n,"state",{isAnimationFinished:!1}),id(n,"id",Of("recharts-bar-")),id(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),id(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return uke(e,t),ske(e,[{key:"renderRectanglesStatically",value:function(i){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,d=s.activeBar,f=Ft(this.props,!1);return i&&i.map(function(p,y){var x=y===c,v=x?d:o,S=fi(fi(fi({},f),p),{},{isActive:x,option:v,index:y,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Se.createElement(Pn,mS({className:"recharts-bar-rectangle"},Sf(a.props,p,y),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(y)}),Se.createElement(N8,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,f=a.animationEasing,p=a.animationId,y=this.state.prevData;return Se.createElement(Do,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var v=x.t,S=s.map(function(N,_){var T=y&&y[_];if(T){var C=wi(T.x,N.x),O=wi(T.y,N.y),k=wi(T.width,N.width),P=wi(T.height,N.height);return fi(fi({},N),{},{x:C(v),y:O(v),width:k(v),height:P(v)})}if(o==="horizontal"){var I=wi(0,N.height),F=I(v);return fi(fi({},N),{},{y:N.y+N.height-F,height:F})}var B=wi(0,N.width),$=B(v);return fi(fi({},N),{},{width:$})});return Se.createElement(Pn,null,i.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var i=this.props,a=i.data,s=i.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!_f(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var i=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=Ft(this.props.background,!1);return s.map(function(d,f){d.value;var p=d.background,y=rke(d,nke);if(!p)return null;var x=fi(fi(fi(fi(fi({},y),{},{fill:"#eee"},p),c),Sf(i.props,d,f)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Se.createElement(N8,mS({key:"background-bar-".concat(f),option:i.props.background,isActive:f===l},x))})}},{key:"renderErrorBar",value:function(i,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,d=s.layout,f=s.children,p=As(f,Ub);if(!p)return null;var y=d==="vertical"?o[0].height/2:o[0].width/2,x=function(N,_){var T=Array.isArray(N.value)?N.value[1]:N.value;return{x:N.x,y:N.y,value:T,errorVal:si(N,_)}},v={clipPath:i?"url(#clipPath-".concat(a,")"):null};return Se.createElement(Pn,v,p.map(function(S){return Se.cloneElement(S,{key:"error-bar-".concat(a,"-").concat(S.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:y,dataPointFormatter:x})}))}},{key:"render",value:function(){var i=this.props,a=i.hide,s=i.data,o=i.className,l=i.xAxis,c=i.yAxis,d=i.left,f=i.top,p=i.width,y=i.height,x=i.isAnimationActive,v=i.background,S=i.id;if(a||!s||!s.length)return null;var N=this.state.isAnimationFinished,_=un("recharts-bar",o),T=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,O=T||C,k=ln(S)?this.id:S;return Se.createElement(Pn,{className:_},T||C?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(k)},Se.createElement("rect",{x:T?d:d-p/2,y:C?f:f-y/2,width:T?p:p*2,height:C?y:y*2}))):null,Se.createElement(Pn,{className:"recharts-bar-rectangles",clipPath:O?"url(#clipPath-".concat(k,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(O,k),(!x||N)&&Al.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return i.animationId!==a.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:a.curData}:i.data!==a.curData?{curData:i.data}:null}}])}(b.PureComponent);KV=wd;id(wd,"displayName","Bar");id(wd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!xd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});id(wd,"getComposedData",function(t){var e=t.props,n=t.item,i=t.barPosition,a=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,y=t.offset,x=$Se(i,n);if(!x)return null;var v=e.layout,S=n.type.defaultProps,N=S!==void 0?fi(fi({},S),n.props):n.props,_=N.dataKey,T=N.children,C=N.minPointSize,O=v==="horizontal"?o:s,k=d?O.scale.domain():null,P=GSe({numericAxis:O}),I=As(T,Fb),F=p.map(function(B,$){var L,V,H,te,X,q;d?L=BSe(d[f+$],k):(L=si(B,_),Array.isArray(L)||(L=[P,L]));var W=tke(C,KV.defaultProps.minPointSize)(L[1],$);if(v==="horizontal"){var ae,G=[o.scale(L[0]),o.scale(L[1])],z=G[0],le=G[1];V=JF({axis:s,ticks:l,bandSize:a,offset:x.offset,entry:B,index:$}),H=(ae=le??z)!==null&&ae!==void 0?ae:void 0,te=x.size;var je=z-le;if(X=Number.isNaN(je)?0:je,q={x:V,y:o.y,width:te,height:o.height},Math.abs(W)>0&&Math.abs(X)<Math.abs(W)){var K=Pa(X||W)*(Math.abs(W)-Math.abs(X));H-=K,X+=K}}else{var Oe=[s.scale(L[0]),s.scale(L[1])],Ye=Oe[0],Me=Oe[1];if(V=Ye,H=JF({axis:o,ticks:c,bandSize:a,offset:x.offset,entry:B,index:$}),te=Me-Ye,X=x.size,q={x:s.x,y:H,width:s.width,height:X},Math.abs(W)>0&&Math.abs(te)<Math.abs(W)){var Ie=Pa(te||W)*(Math.abs(W)-Math.abs(te));te+=Ie}}return fi(fi(fi({},B),{},{x:V,y:H,width:te,height:X,value:d?L:L[1],payload:B,background:q},I&&I[$]&&I[$].props),{},{tooltipPayload:[SV(n,B)],tooltipPosition:{x:V+te/2,y:H+X/2}})});return fi({data:F,layout:v},y)});function hb(t){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hb(t)}function hke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T8(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,JV(i.key),i)}}function fke(t,e,n){return e&&T8(t.prototype,e),n&&T8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function k8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function To(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k8(Object(n),!0).forEach(function(i){EN(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function EN(t,e,n){return e=JV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JV(t){var e=pke(t,"string");return hb(e)=="symbol"?e:e+""}function pke(t,e){if(hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(hb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mM=function(e,n,i,a,s){var o=e.width,l=e.height,c=e.layout,d=e.children,f=Object.keys(n),p={left:i.left,leftMirror:i.left,right:o-i.right,rightMirror:o-i.right,top:i.top,topMirror:i.top,bottom:l-i.bottom,bottomMirror:l-i.bottom},y=!!ws(d,wd);return f.reduce(function(x,v){var S=n[v],N=S.orientation,_=S.domain,T=S.padding,C=T===void 0?{}:T,O=S.mirror,k=S.reversed,P="".concat(N).concat(O?"Mirror":""),I,F,B,$,L;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var V=_[1]-_[0],H=1/0,te=S.categoricalDomain.sort(kye);if(te.forEach(function(Oe,Ye){Ye>0&&(H=Math.min((Oe||0)-(te[Ye-1]||0),H))}),Number.isFinite(H)){var X=H/V,q=S.layout==="vertical"?i.height:i.width;if(S.padding==="gap"&&(I=X*q/2),S.padding==="no-gap"){var W=Oa(e.barCategoryGap,X*q),ae=X*q/2;I=ae-W-(ae-W)/q*W}}}a==="xAxis"?F=[i.left+(C.left||0)+(I||0),i.left+i.width-(C.right||0)-(I||0)]:a==="yAxis"?F=c==="horizontal"?[i.top+i.height-(C.bottom||0),i.top+(C.top||0)]:[i.top+(C.top||0)+(I||0),i.top+i.height-(C.bottom||0)-(I||0)]:F=S.range,k&&(F=[F[1],F[0]]);var G=vV(S,s,y),z=G.scale,le=G.realScaleType;z.domain(_).range(F),bV(z);var je=jV(z,To(To({},S),{},{realScaleType:le}));a==="xAxis"?(L=N==="top"&&!O||N==="bottom"&&O,B=i.left,$=p[P]-L*S.height):a==="yAxis"&&(L=N==="left"&&!O||N==="right"&&O,B=p[P]-L*S.width,$=i.top);var K=To(To(To({},S),je),{},{realScaleType:le,x:B,y:$,scale:z,width:a==="xAxis"?i.width:S.width,height:a==="yAxis"?i.height:S.height});return K.bandSize=eS(K,je),!S.hide&&a==="xAxis"?p[P]+=(L?-1:1)*K.height:S.hide||(p[P]+=(L?-1:1)*K.width),To(To({},x),{},EN({},v,K))},{})},ZV=function(e,n){var i=e.x,a=e.y,s=n.x,o=n.y;return{x:Math.min(i,s),y:Math.min(a,o),width:Math.abs(s-i),height:Math.abs(o-a)}},mke=function(e){var n=e.x1,i=e.y1,a=e.x2,s=e.y2;return ZV({x:n,y:i},{x:a,y:s})},eH=function(){function t(e){hke(this,t),this.scale=e}return fke(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.bandAware,s=i.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var i=this.range(),a=i[0],s=i[i.length-1];return a<=s?n>=a&&n<=s:n>=s&&n<=a}}],[{key:"create",value:function(n){return new t(n)}}])}();EN(eH,"EPS",1e-4);var gM=function(e){var n=Object.keys(e).reduce(function(i,a){return To(To({},i),{},EN({},a,eH.create(e[a])))},{});return To(To({},n),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return UTe(a,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return YV(a,function(s,o){return n[o].isInRange(s)})}})};function gke(t){return(t%180+180)%180}var yke=function(e){var n=e.width,i=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=gke(a),o=s*Math.PI/180,l=Math.atan(i/n),c=o>l&&o<Math.PI-l?i/Math.sin(o):n/Math.cos(o);return Math.abs(c)},NA,A8;function xke(){if(A8)return NA;A8=1;var t=Il(),e=Lb(),n=dN();function i(a){return function(s,o,l){var c=Object(s);if(!e(s)){var d=t(o,3);s=n(s),o=function(p){return d(c[p],p,c)}}var f=a(s,o,l);return f>-1?c[d?s[f]:f]:void 0}}return NA=i,NA}var _A,E8;function vke(){if(E8)return _A;E8=1;var t=VV();function e(n){var i=t(n),a=i%1;return i===i?a?i-a:i:0}return _A=e,_A}var CA,P8;function bke(){if(P8)return CA;P8=1;var t=e7(),e=Il(),n=vke(),i=Math.max;function a(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var d=l==null?0:n(l);return d<0&&(d=i(c+d,0)),t(s,e(o,3),d)}return CA=a,CA}var TA,O8;function jke(){if(O8)return TA;O8=1;var t=xke(),e=bke(),n=t(e);return TA=n,TA}var wke=jke();const Ske=Bn(wke);var Nke=m9();const _ke=Bn(Nke);var Cke=_ke(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),yM=b.createContext(void 0),xM=b.createContext(void 0),tH=b.createContext(void 0),nH=b.createContext({}),rH=b.createContext(void 0),iH=b.createContext(0),aH=b.createContext(0),D8=function(e){var n=e.state,i=n.xAxisMap,a=n.yAxisMap,s=n.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,f=Cke(s);return Se.createElement(yM.Provider,{value:i},Se.createElement(xM.Provider,{value:a},Se.createElement(nH.Provider,{value:s},Se.createElement(tH.Provider,{value:f},Se.createElement(rH.Provider,{value:o},Se.createElement(iH.Provider,{value:d},Se.createElement(aH.Provider,{value:c},l)))))))},Tke=function(){return b.useContext(rH)},sH=function(e){var n=b.useContext(yM);n==null&&Tf();var i=n[e];return i==null&&Tf(),i},kke=function(){var e=b.useContext(yM);return Gu(e)},Ake=function(){var e=b.useContext(xM),n=Ske(e,function(i){return YV(i.domain,Number.isFinite)});return n||Gu(e)},oH=function(e){var n=b.useContext(xM);n==null&&Tf();var i=n[e];return i==null&&Tf(),i},Eke=function(){var e=b.useContext(tH);return e},Pke=function(){return b.useContext(nH)},vM=function(){return b.useContext(aH)},bM=function(){return b.useContext(iH)};function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function Oke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dke(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,cH(i.key),i)}}function Mke(t,e,n){return e&&Dke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ike(t,e,n){return e=yS(e),Rke(t,lH()?Reflect.construct(e,n||[],yS(t).constructor):e.apply(t,n))}function Rke(t,e){if(e&&(jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lke(t)}function Lke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lH=function(){return!!t})()}function yS(t){return yS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yS(t)}function Fke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZP(t,e)}function ZP(t,e){return ZP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},ZP(t,e)}function M8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function I8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M8(Object(n),!0).forEach(function(i){jM(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jM(t,e,n){return e=cH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cH(t){var e=$ke(t,"string");return jg(e)=="symbol"?e:e+""}function $ke(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(jg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Bke(t,e){return Vke(t)||Uke(t,e)||qke(t,e)||zke()}function zke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qke(t,e){if(t){if(typeof t=="string")return R8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R8(t,e)}}function R8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Uke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Vke(t){if(Array.isArray(t))return t}function eO(){return eO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},eO.apply(this,arguments)}var Hke=function(e,n){var i;return Se.isValidElement(e)?i=Se.cloneElement(e,n):en(e)?i=e(n):i=Se.createElement("line",eO({},n,{className:"recharts-reference-line-line"})),i},Gke=function(e,n,i,a,s,o,l,c,d){var f=s.x,p=s.y,y=s.width,x=s.height;if(i){var v=d.y,S=e.y.apply(v,{position:o});if(El(d,"discard")&&!e.y.isInRange(S))return null;var N=[{x:f+y,y:S},{x:f,y:S}];return c==="left"?N.reverse():N}if(n){var _=d.x,T=e.x.apply(_,{position:o});if(El(d,"discard")&&!e.x.isInRange(T))return null;var C=[{x:T,y:p+x},{x:T,y:p}];return l==="top"?C.reverse():C}if(a){var O=d.segment,k=O.map(function(P){return e.apply(P,{position:o})});return El(d,"discard")&&$Te(k,function(P){return!e.isInRange(P)})?null:k}return null};function Wke(t){var e=t.x,n=t.y,i=t.segment,a=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=Tke(),f=sH(a),p=oH(s),y=Eke();if(!d||!y)return null;Oo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=gM({x:f.scale,y:p.scale}),v=Si(e),S=Si(n),N=i&&i.length===2,_=Gke(x,v,S,N,y,t.position,f.orientation,p.orientation,t);if(!_)return null;var T=Bke(_,2),C=T[0],O=C.x,k=C.y,P=T[1],I=P.x,F=P.y,B=El(t,"hidden")?"url(#".concat(d,")"):void 0,$=I8(I8({clipPath:B},Ft(t,!0)),{},{x1:O,y1:k,x2:I,y2:F});return Se.createElement(Pn,{className:un("recharts-reference-line",l)},Hke(o,$),Pi.renderCallByParent(t,mke({x1:O,y1:k,x2:I,y2:F})))}var wM=function(t){function e(){return Oke(this,e),Ike(this,e,arguments)}return Fke(e,t),Mke(e,[{key:"render",value:function(){return Se.createElement(Wke,this.props)}}])}(Se.Component);jM(wM,"displayName","ReferenceLine");jM(wM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function tO(){return tO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tO.apply(this,arguments)}function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function L8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function F8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L8(Object(n),!0).forEach(function(i){PN(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kke(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,dH(i.key),i)}}function Qke(t,e,n){return e&&Kke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xke(t,e,n){return e=xS(e),Jke(t,uH()?Reflect.construct(e,n||[],xS(t).constructor):e.apply(t,n))}function Jke(t,e){if(e&&(wg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zke(t)}function Zke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uH=function(){return!!t})()}function xS(t){return xS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xS(t)}function eAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nO(t,e)}function nO(t,e){return nO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},nO(t,e)}function PN(t,e,n){return e=dH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dH(t){var e=tAe(t,"string");return wg(e)=="symbol"?e:e+""}function tAe(t,e){if(wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(wg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nAe=function(e){var n=e.x,i=e.y,a=e.xAxis,s=e.yAxis,o=gM({x:a.scale,y:s.scale}),l=o.apply({x:n,y:i},{bandAware:!0});return El(e,"discard")&&!o.isInRange(l)?null:l},ON=function(t){function e(){return Yke(this,e),Xke(this,e,arguments)}return eAe(e,t),Qke(e,[{key:"render",value:function(){var i=this.props,a=i.x,s=i.y,o=i.r,l=i.alwaysShow,c=i.clipPathId,d=Si(a),f=Si(s);if(Oo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var p=nAe(this.props);if(!p)return null;var y=p.x,x=p.y,v=this.props,S=v.shape,N=v.className,_=El(this.props,"hidden")?"url(#".concat(c,")"):void 0,T=F8(F8({clipPath:_},Ft(this.props,!0)),{},{cx:y,cy:x});return Se.createElement(Pn,{className:un("recharts-reference-dot",N)},e.renderDot(S,T),Pi.renderCallByParent(this.props,{x:y-o,y:x-o,width:2*o,height:2*o}))}}])}(Se.Component);PN(ON,"displayName","ReferenceDot");PN(ON,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});PN(ON,"renderDot",function(t,e){var n;return Se.isValidElement(t)?n=Se.cloneElement(t,e):en(t)?n=t(e):n=Se.createElement(Vb,tO({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function rO(){return rO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rO.apply(this,arguments)}function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function $8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function B8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$8(Object(n),!0).forEach(function(i){DN(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function rAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iAe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,fH(i.key),i)}}function aAe(t,e,n){return e&&iAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sAe(t,e,n){return e=vS(e),oAe(t,hH()?Reflect.construct(e,n||[],vS(t).constructor):e.apply(t,n))}function oAe(t,e){if(e&&(Sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lAe(t)}function lAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hH=function(){return!!t})()}function vS(t){return vS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vS(t)}function cAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iO(t,e)}function iO(t,e){return iO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},iO(t,e)}function DN(t,e,n){return e=fH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fH(t){var e=uAe(t,"string");return Sg(e)=="symbol"?e:e+""}function uAe(t,e){if(Sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Sg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dAe=function(e,n,i,a,s){var o=s.x1,l=s.x2,c=s.y1,d=s.y2,f=s.xAxis,p=s.yAxis;if(!f||!p)return null;var y=gM({x:f.scale,y:p.scale}),x={x:e?y.x.apply(o,{position:"start"}):y.x.rangeMin,y:i?y.y.apply(c,{position:"start"}):y.y.rangeMin},v={x:n?y.x.apply(l,{position:"end"}):y.x.rangeMax,y:a?y.y.apply(d,{position:"end"}):y.y.rangeMax};return El(s,"discard")&&(!y.isInRange(x)||!y.isInRange(v))?null:ZV(x,v)},MN=function(t){function e(){return rAe(this,e),sAe(this,e,arguments)}return cAe(e,t),aAe(e,[{key:"render",value:function(){var i=this.props,a=i.x1,s=i.x2,o=i.y1,l=i.y2,c=i.className,d=i.alwaysShow,f=i.clipPathId;Oo(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Si(a),y=Si(s),x=Si(o),v=Si(l),S=this.props.shape;if(!p&&!y&&!x&&!v&&!S)return null;var N=dAe(p,y,x,v,this.props);if(!N&&!S)return null;var _=El(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Se.createElement(Pn,{className:un("recharts-reference-area",c)},e.renderRect(S,B8(B8({clipPath:_},Ft(this.props,!0)),N)),Pi.renderCallByParent(this.props,N))}}])}(Se.Component);DN(MN,"displayName","ReferenceArea");DN(MN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});DN(MN,"renderRect",function(t,e){var n;return Se.isValidElement(t)?n=Se.cloneElement(t,e):en(t)?n=t(e):n=Se.createElement(pM,rO({},e,{className:"recharts-reference-area-rect"})),n});function pH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var i=[],a=0;a<t.length;a+=e)i.push(t[a]);return i}function hAe(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return yke(i,n)}function fAe(t,e,n){var i=n==="width",a=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:i?a:s,end:i?a+o:s+l}:{start:i?a+o:s+l,end:i?a:s}}function bS(t,e,n,i,a){if(t*e<t*i||t*e>t*a)return!1;var s=n();return t*(e-t*s/2-i)>=0&&t*(e+t*s/2-a)<=0}function pAe(t,e){return pH(t,e+1)}function mAe(t,e,n,i,a){for(var s=(i||[]).slice(),o=e.start,l=e.end,c=0,d=1,f=o,p=function(){var v=i==null?void 0:i[c];if(v===void 0)return{v:pH(i,d)};var S=c,N,_=function(){return N===void 0&&(N=n(v,S)),N},T=v.coordinate,C=c===0||bS(t,T,_,f,l);C||(c=0,f=o,d+=1),C&&(f=T+t*(_()/2+a),c+=d)},y;d<=s.length;)if(y=p(),y)return y.v;return[]}function fb(t){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fb(t)}function z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function ia(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z8(Object(n),!0).forEach(function(i){gAe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gAe(t,e,n){return e=yAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yAe(t){var e=xAe(t,"string");return fb(e)=="symbol"?e:e+""}function xAe(t,e){if(fb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(fb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vAe(t,e,n,i,a){for(var s=(i||[]).slice(),o=s.length,l=e.start,c=e.end,d=function(y){var x=s[y],v,S=function(){return v===void 0&&(v=n(x,y)),v};if(y===o-1){var N=t*(x.coordinate+t*S()/2-c);s[y]=x=ia(ia({},x),{},{tickCoord:N>0?x.coordinate-N*t:x.coordinate})}else s[y]=x=ia(ia({},x),{},{tickCoord:x.coordinate});var _=bS(t,x.tickCoord,S,l,c);_&&(c=x.tickCoord-t*(S()/2+a),s[y]=ia(ia({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return s}function bAe(t,e,n,i,a,s){var o=(i||[]).slice(),l=o.length,c=e.start,d=e.end;if(s){var f=i[l-1],p=n(f,l-1),y=t*(f.coordinate+t*p/2-d);o[l-1]=f=ia(ia({},f),{},{tickCoord:y>0?f.coordinate-y*t:f.coordinate});var x=bS(t,f.tickCoord,function(){return p},c,d);x&&(d=f.tickCoord-t*(p/2+a),o[l-1]=ia(ia({},f),{},{isShow:!0}))}for(var v=s?l-1:l,S=function(T){var C=o[T],O,k=function(){return O===void 0&&(O=n(C,T)),O};if(T===0){var P=t*(C.coordinate-t*k()/2-c);o[T]=C=ia(ia({},C),{},{tickCoord:P<0?C.coordinate-P*t:C.coordinate})}else o[T]=C=ia(ia({},C),{},{tickCoord:C.coordinate});var I=bS(t,C.tickCoord,k,c,d);I&&(c=C.tickCoord+t*(k()/2+a),o[T]=ia(ia({},C),{},{isShow:!0}))},N=0;N<v;N++)S(N);return o}function SM(t,e,n){var i=t.tick,a=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,f=t.unit,p=t.angle;if(!a||!a.length||!i)return[];if(bt(c)||xd.isSsr)return pAe(a,typeof c=="number"&&bt(c)?c:0);var y=[],x=l==="top"||l==="bottom"?"width":"height",v=f&&x==="width"?vv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},S=function(C,O){var k=en(d)?d(C.value,O):C.value;return x==="width"?hAe(vv(k,{fontSize:e,letterSpacing:n}),v,p):vv(k,{fontSize:e,letterSpacing:n})[x]},N=a.length>=2?Pa(a[1].coordinate-a[0].coordinate):1,_=fAe(s,N,x);return c==="equidistantPreserveStart"?mAe(N,_,S,a,o):(c==="preserveStart"||c==="preserveStartEnd"?y=bAe(N,_,S,a,o,c==="preserveStartEnd"):y=vAe(N,_,S,a,o),y.filter(function(T){return T.isShow}))}var jAe=["viewBox"],wAe=["viewBox"],SAe=["ticks"];function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Em.apply(this,arguments)}function q8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function vi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q8(Object(n),!0).forEach(function(i){NM(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function kA(t,e){if(t==null)return{};var n=NAe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function NAe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function _Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U8(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,gH(i.key),i)}}function CAe(t,e,n){return e&&U8(t.prototype,e),n&&U8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function TAe(t,e,n){return e=jS(e),kAe(t,mH()?Reflect.construct(e,n||[],jS(t).constructor):e.apply(t,n))}function kAe(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AAe(t)}function AAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mH=function(){return!!t})()}function jS(t){return jS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jS(t)}function EAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aO(t,e)}function aO(t,e){return aO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},aO(t,e)}function NM(t,e,n){return e=gH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gH(t){var e=PAe(t,"string");return Ng(e)=="symbol"?e:e+""}function PAe(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Ng(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gg=function(t){function e(n){var i;return _Ae(this,e),i=TAe(this,e,[n]),i.state={fontSize:"",letterSpacing:""},i}return EAe(e,t),CAe(e,[{key:"shouldComponentUpdate",value:function(i,a){var s=i.viewBox,o=kA(i,jAe),l=this.props,c=l.viewBox,d=kA(l,wAe);return!Rm(s,c)||!Rm(o,d)||!Rm(a,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var a=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,f=a.tickSize,p=a.mirror,y=a.tickMargin,x,v,S,N,_,T,C=p?-1:1,O=i.tickSize||f,k=bt(i.tickCoord)?i.tickCoord:i.coordinate;switch(d){case"top":x=v=i.coordinate,N=o+ +!p*c,S=N-C*O,T=S-C*y,_=k;break;case"left":S=N=i.coordinate,v=s+ +!p*l,x=v-C*O,_=x-C*y,T=k;break;case"right":S=N=i.coordinate,v=s+ +p*l,x=v+C*O,_=x+C*y,T=k;break;default:x=v=i.coordinate,N=o+ +p*c,S=N+C*O,T=S+C*y,_=k;break}return{line:{x1:x,y1:S,x2:v,y2:N},tick:{x:_,y:T}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,a=i.orientation,s=i.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,a=i.orientation,s=i.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.orientation,d=i.mirror,f=i.axisLine,p=vi(vi(vi({},Ft(this.props,!1)),Ft(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var y=+(c==="top"&&!d||c==="bottom"&&d);p=vi(vi({},p),{},{x1:a,y1:s+y*l,x2:a+o,y2:s+y*l})}else{var x=+(c==="left"&&!d||c==="right"&&d);p=vi(vi({},p),{},{x1:a+x*o,y1:s,x2:a+x*o,y2:s+l})}return Se.createElement("line",Em({},p,{className:un("recharts-cartesian-axis-line",ks(f,"className"))}))}},{key:"renderTicks",value:function(i,a,s){var o=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,p=l.tickFormatter,y=l.unit,x=SM(vi(vi({},this.props),{},{ticks:i}),a,s),v=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),N=Ft(this.props,!1),_=Ft(f,!1),T=vi(vi({},N),{},{fill:"none"},Ft(c,!1)),C=x.map(function(O,k){var P=o.getTickLineCoord(O),I=P.line,F=P.tick,B=vi(vi(vi(vi({textAnchor:v,verticalAnchor:S},N),{},{stroke:"none",fill:d},_),F),{},{index:k,payload:O,visibleTicksCount:x.length,tickFormatter:p});return Se.createElement(Pn,Em({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Sf(o.props,O,k)),c&&Se.createElement("line",Em({},T,I,{className:un("recharts-cartesian-axis-tick-line",ks(c,"className"))})),f&&e.renderTickItem(f,B,"".concat(en(p)?p(O.value,k):O.value).concat(y||"")))});return Se.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var i=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,f=a.hide;if(f)return null;var p=this.props,y=p.ticks,x=kA(p,SAe),v=y;return en(c)&&(v=y&&y.length>0?c(this.props):c(x)),o<=0||l<=0||!v||!v.length?null:Se.createElement(Pn,{className:un("recharts-cartesian-axis",d),ref:function(N){i.layerReference=N}},s&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Pi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,a,s){var o,l=un(a.className,"recharts-cartesian-axis-tick-value");return Se.isValidElement(i)?o=Se.cloneElement(i,vi(vi({},a),{},{className:l})):en(i)?o=i(vi(vi({},a),{},{className:l})):o=Se.createElement(Nf,Em({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(b.Component);NM(Gg,"displayName","CartesianAxis");NM(Gg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var OAe=["x1","y1","x2","y2","key"],DAe=["offset"];function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}function V8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function sa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V8(Object(n),!0).forEach(function(i){MAe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function MAe(t,e,n){return e=IAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IAe(t){var e=RAe(t,"string");return kf(e)=="symbol"?e:e+""}function RAe(t,e){if(kf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(kf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xh.apply(this,arguments)}function H8(t,e){if(t==null)return{};var n=LAe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function LAe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var FAe=function(e){var n=e.fill;if(!n||n==="none")return null;var i=e.fillOpacity,a=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return Se.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:i,className:"recharts-cartesian-grid-bg"})};function yH(t,e){var n;if(Se.isValidElement(t))n=Se.cloneElement(t,e);else if(en(t))n=t(e);else{var i=e.x1,a=e.y1,s=e.x2,o=e.y2,l=e.key,c=H8(e,OAe),d=Ft(c,!1);d.offset;var f=H8(d,DAe);n=Se.createElement("line",Xh({},f,{x1:i,y1:a,x2:s,y2:o,fill:"none",key:l}))}return n}function $Ae(t){var e=t.x,n=t.width,i=t.horizontal,a=i===void 0?!0:i,s=t.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var d=sa(sa({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return yH(a,d)});return Se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function BAe(t){var e=t.y,n=t.height,i=t.vertical,a=i===void 0?!0:i,s=t.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var d=sa(sa({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return yH(a,d)});return Se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function zAe(t){var e=t.horizontalFill,n=t.fillOpacity,i=t.x,a=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var f=l.map(function(y){return Math.round(y+a-a)}).sort(function(y,x){return y-x});a!==f[0]&&f.unshift(0);var p=f.map(function(y,x){var v=!f[x+1],S=v?a+o-y:f[x+1]-y;if(S<=0)return null;var N=x%e.length;return Se.createElement("rect",{key:"react-".concat(x),y,x:i,height:S,width:s,stroke:"none",fill:e[N],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function qAe(t){var e=t.vertical,n=e===void 0?!0:e,i=t.verticalFill,a=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!n||!i||!i.length)return null;var f=d.map(function(y){return Math.round(y+s-s)}).sort(function(y,x){return y-x});s!==f[0]&&f.unshift(0);var p=f.map(function(y,x){var v=!f[x+1],S=v?s+l-y:f[x+1]-y;if(S<=0)return null;var N=x%i.length;return Se.createElement("rect",{key:"react-".concat(x),x:y,y:o,width:S,height:c,stroke:"none",fill:i[N],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var UAe=function(e,n){var i=e.xAxis,a=e.width,s=e.height,o=e.offset;return xV(SM(sa(sa(sa({},Gg.defaultProps),i),{},{ticks:wc(i,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,n)},VAe=function(e,n){var i=e.yAxis,a=e.width,s=e.height,o=e.offset;return xV(SM(sa(sa(sa({},Gg.defaultProps),i),{},{ticks:wc(i,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,n)},xm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pb(t){var e,n,i,a,s,o,l=vM(),c=bM(),d=Pke(),f=sa(sa({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:xm.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:xm.fill,horizontal:(i=t.horizontal)!==null&&i!==void 0?i:xm.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:xm.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:xm.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:xm.verticalFill,x:bt(t.x)?t.x:d.left,y:bt(t.y)?t.y:d.top,width:bt(t.width)?t.width:d.width,height:bt(t.height)?t.height:d.height}),p=f.x,y=f.y,x=f.width,v=f.height,S=f.syncWithTicks,N=f.horizontalValues,_=f.verticalValues,T=kke(),C=Ake();if(!bt(x)||x<=0||!bt(v)||v<=0||!bt(p)||p!==+p||!bt(y)||y!==+y)return null;var O=f.verticalCoordinatesGenerator||UAe,k=f.horizontalCoordinatesGenerator||VAe,P=f.horizontalPoints,I=f.verticalPoints;if((!P||!P.length)&&en(k)){var F=N&&N.length,B=k({yAxis:C?sa(sa({},C),{},{ticks:F?N:C.ticks}):void 0,width:l,height:c,offset:d},F?!0:S);Oo(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(kf(B),"]")),Array.isArray(B)&&(P=B)}if((!I||!I.length)&&en(O)){var $=_&&_.length,L=O({xAxis:T?sa(sa({},T),{},{ticks:$?_:T.ticks}):void 0,width:l,height:c,offset:d},$?!0:S);Oo(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(kf(L),"]")),Array.isArray(L)&&(I=L)}return Se.createElement("g",{className:"recharts-cartesian-grid"},Se.createElement(FAe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Se.createElement($Ae,Xh({},f,{offset:d,horizontalPoints:P,xAxis:T,yAxis:C})),Se.createElement(BAe,Xh({},f,{offset:d,verticalPoints:I,xAxis:T,yAxis:C})),Se.createElement(zAe,Xh({},f,{horizontalPoints:P})),Se.createElement(qAe,Xh({},f,{verticalPoints:I})))}pb.displayName="CartesianGrid";var HAe=["type","layout","connectNulls","ref"],GAe=["key"];function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function G8(t,e){if(t==null)return{};var n=WAe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function WAe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function _v(){return _v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_v.apply(this,arguments)}function W8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function bs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W8(Object(n),!0).forEach(function(i){ko(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vm(t){return XAe(t)||QAe(t)||KAe(t)||YAe()}function YAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KAe(t,e){if(t){if(typeof t=="string")return sO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sO(t,e)}}function QAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function XAe(t){if(Array.isArray(t))return sO(t)}function sO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function JAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y8(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,vH(i.key),i)}}function ZAe(t,e,n){return e&&Y8(t.prototype,e),n&&Y8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eEe(t,e,n){return e=wS(e),tEe(t,xH()?Reflect.construct(e,n||[],wS(t).constructor):e.apply(t,n))}function tEe(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nEe(t)}function nEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xH=function(){return!!t})()}function wS(t){return wS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wS(t)}function rEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oO(t,e)}function oO(t,e){return oO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},oO(t,e)}function ko(t,e,n){return e=vH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vH(t){var e=iEe(t,"string");return _g(e)=="symbol"?e:e+""}function iEe(t,e){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_g(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hb=function(t){function e(){var n;JAe(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=eEe(this,e,[].concat(a)),ko(n,"state",{isAnimationFinished:!0,totalLength:0}),ko(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),ko(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(_,T){return _+T});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),p=o%d,y=l-o,x=[],v=0,S=0;v<c.length;S+=c[v],++v)if(S+c[v]>p){x=[].concat(vm(c.slice(0,v)),[p-S]);break}var N=x.length%2===0?[0,y]:[y];return[].concat(vm(e.repeat(c,f)),vm(x),N).map(function(_){return"".concat(_,"px")}).join(", ")}),ko(n,"id",Of("recharts-line-")),ko(n,"pathRef",function(o){n.mainCurve=o}),ko(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ko(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return rEe(e,t),ZAe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();i!==this.state.totalLength&&this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,d=s.layout,f=s.children,p=As(f,Ub);if(!p)return null;var y=function(S,N){return{x:S.x,y:S.y,value:S.value,errorVal:si(S.payload,N)}},x={clipPath:i?"url(#clipPath-".concat(a,")"):null};return Se.createElement(Pn,x,p.map(function(v){return Se.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:y})}))}},{key:"renderDots",value:function(i,a,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,f=l.dataKey,p=Ft(this.props,!1),y=Ft(c,!0),x=d.map(function(S,N){var _=bs(bs(bs({key:"dot-".concat(N),r:3},p),y),{},{index:N,cx:S.x,cy:S.y,value:S.value,dataKey:f,payload:S.payload,points:d});return e.renderDotItem(c,_)}),v={clipPath:i?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return Se.createElement(Pn,_v({className:"recharts-line-dots",key:"dots"},v),x)}},{key:"renderCurveStatically",value:function(i,a,s,o){var l=this.props,c=l.type,d=l.layout,f=l.connectNulls;l.ref;var p=G8(l,HAe),y=bs(bs(bs({},Ft(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(s,")"):null,points:i},o),{},{type:c,layout:d,connectNulls:f});return Se.createElement(df,_v({},y,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,a){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,y=o.animationEasing,x=o.animationId,v=o.animateNewValues,S=o.width,N=o.height,_=this.state,T=_.prevPoints,C=_.totalLength;return Se.createElement(Do,{begin:f,duration:p,isActive:d,easing:y,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var k=O.t;if(T){var P=T.length/l.length,I=l.map(function(V,H){var te=Math.floor(H*P);if(T[te]){var X=T[te],q=wi(X.x,V.x),W=wi(X.y,V.y);return bs(bs({},V),{},{x:q(k),y:W(k)})}if(v){var ae=wi(S*2,V.x),G=wi(N/2,V.y);return bs(bs({},V),{},{x:ae(k),y:G(k)})}return bs(bs({},V),{},{x:V.x,y:V.y})});return s.renderCurveStatically(I,i,a)}var F=wi(0,C),B=F(k),$;if(c){var L="".concat(c).split(/[,\s]+/gim).map(function(V){return parseFloat(V)});$=s.getStrokeDasharray(B,C,L)}else $=s.generateSimpleStrokeDasharray(C,B);return s.renderCurveStatically(l,i,a,{strokeDasharray:$})})}},{key:"renderCurve",value:function(i,a){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,d=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!d&&f>0||!_f(d,o))?this.renderCurveWithAnimation(i,a):this.renderCurveStatically(o,i,a)}},{key:"render",value:function(){var i,a=this.props,s=a.hide,o=a.dot,l=a.points,c=a.className,d=a.xAxis,f=a.yAxis,p=a.top,y=a.left,x=a.width,v=a.height,S=a.isAnimationActive,N=a.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=un("recharts-line",c),O=d&&d.allowDataOverflow,k=f&&f.allowDataOverflow,P=O||k,I=ln(N)?this.id:N,F=(i=Ft(o,!1))!==null&&i!==void 0?i:{r:3,strokeWidth:2},B=F.r,$=B===void 0?3:B,L=F.strokeWidth,V=L===void 0?2:L,H=b9(o)?o:{},te=H.clipDot,X=te===void 0?!0:te,q=$*2+V;return Se.createElement(Pn,{className:C},O||k?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(I)},Se.createElement("rect",{x:O?y:y-x/2,y:k?p:p-v/2,width:O?x:x*2,height:k?v:v*2})),!X&&Se.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Se.createElement("rect",{x:y-q/2,y:p-q/2,width:x+q,height:v+q}))):null,!T&&this.renderCurve(P,I),this.renderErrorBar(P,I),(T||o)&&this.renderDots(P,X,I),(!S||_)&&Al.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return i.animationId!==a.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:a.curPoints}:i.points!==a.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,a){for(var s=i.length%2!==0?[].concat(vm(i),[0]):i,o=[],l=0;l<a;++l)o=[].concat(vm(o),vm(s));return o}},{key:"renderDotItem",value:function(i,a){var s;if(Se.isValidElement(i))s=Se.cloneElement(i,a);else if(en(i))s=i(a);else{var o=a.key,l=G8(a,GAe),c=un("recharts-line-dot",typeof i!="boolean"?i.className:"");s=Se.createElement(Vb,_v({key:o},l,{className:c}))}return s}}])}(b.PureComponent);ko(Hb,"displayName","Line");ko(Hb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!xd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ko(Hb,"getComposedData",function(t){var e=t.props,n=t.xAxis,i=t.yAxis,a=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,f=e.layout,p=c.map(function(y,x){var v=si(y,o);return f==="horizontal"?{x:Zw({axis:n,ticks:a,bandSize:l,entry:y,index:x}),y:ln(v)?null:i.scale(v),value:v,payload:y}:{x:ln(v)?null:n.scale(v),y:Zw({axis:i,ticks:s,bandSize:l,entry:y,index:x}),value:v,payload:y}});return bs({points:p,layout:f},d)});var aEe=["layout","type","stroke","connectNulls","isRange","ref"],sEe=["key"],bH;function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function jH(t,e){if(t==null)return{};var n=oEe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function oEe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Jh(){return Jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Jh.apply(this,arguments)}function K8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Vu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K8(Object(n),!0).forEach(function(i){_l(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function lEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q8(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,SH(i.key),i)}}function cEe(t,e,n){return e&&Q8(t.prototype,e),n&&Q8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uEe(t,e,n){return e=SS(e),dEe(t,wH()?Reflect.construct(e,n||[],SS(t).constructor):e.apply(t,n))}function dEe(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hEe(t)}function hEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wH=function(){return!!t})()}function SS(t){return SS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SS(t)}function fEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lO(t,e)}function lO(t,e){return lO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},lO(t,e)}function _l(t,e,n){return e=SH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SH(t){var e=pEe(t,"string");return Cg(e)=="symbol"?e:e+""}function pEe(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Cg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sd=function(t){function e(){var n;lEe(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=uEe(this,e,[].concat(a)),_l(n,"state",{isAnimationFinished:!0}),_l(n,"id",Of("recharts-area-")),_l(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),en(o)&&o()}),_l(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),en(o)&&o()}),n}return fEe(e,t),cEe(e,[{key:"renderDots",value:function(i,a,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,f=c.points,p=c.dataKey,y=Ft(this.props,!1),x=Ft(d,!0),v=f.map(function(N,_){var T=Vu(Vu(Vu({key:"dot-".concat(_),r:3},y),x),{},{index:_,cx:N.x,cy:N.y,dataKey:p,value:N.value,payload:N.payload,points:f});return e.renderDotItem(d,T)}),S={clipPath:i?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return Se.createElement(Pn,Jh({className:"recharts-area-dots"},S),v)}},{key:"renderHorizontalRect",value:function(i){var a=this.props,s=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,d=o[o.length-1].x,f=i*Math.abs(c-d),p=rd(o.map(function(y){return y.y||0}));return bt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(rd(s.map(function(y){return y.y||0})),p)),bt(p)?Se.createElement("rect",{x:c<d?c:c-f,y:0,width:f,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(i){var a=this.props,s=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,d=o[o.length-1].y,f=i*Math.abs(c-d),p=rd(o.map(function(y){return y.x||0}));return bt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(rd(s.map(function(y){return y.x||0})),p)),bt(p)?Se.createElement("rect",{x:0,y:c<d?c:c-f,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(i){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(i):this.renderHorizontalRect(i)}},{key:"renderAreaStatically",value:function(i,a,s,o){var l=this.props,c=l.layout,d=l.type,f=l.stroke,p=l.connectNulls,y=l.isRange;l.ref;var x=jH(l,aEe);return Se.createElement(Pn,{clipPath:s?"url(#clipPath-".concat(o,")"):null},Se.createElement(df,Jh({},Ft(x,!0),{points:i,connectNulls:p,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&Se.createElement(df,Jh({},Ft(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:i})),f!=="none"&&y&&Se.createElement(df,Jh({},Ft(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(i,a){var s=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,y=o.animationEasing,x=o.animationId,v=this.state,S=v.prevPoints,N=v.prevBaseLine;return Se.createElement(Do,{begin:f,duration:p,isActive:d,easing:y,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var T=_.t;if(S){var C=S.length/l.length,O=l.map(function(F,B){var $=Math.floor(B*C);if(S[$]){var L=S[$],V=wi(L.x,F.x),H=wi(L.y,F.y);return Vu(Vu({},F),{},{x:V(T),y:H(T)})}return F}),k;if(bt(c)&&typeof c=="number"){var P=wi(N,c);k=P(T)}else if(ln(c)||zg(c)){var I=wi(N,0);k=I(T)}else k=c.map(function(F,B){var $=Math.floor(B*C);if(N[$]){var L=N[$],V=wi(L.x,F.x),H=wi(L.y,F.y);return Vu(Vu({},F),{},{x:V(T),y:H(T)})}return F});return s.renderAreaStatically(O,k,i,a)}return Se.createElement(Pn,null,Se.createElement("defs",null,Se.createElement("clipPath",{id:"animationClipPath-".concat(a)},s.renderClipRect(T))),Se.createElement(Pn,{clipPath:"url(#animationClipPath-".concat(a,")")},s.renderAreaStatically(l,c,i,a)))})}},{key:"renderArea",value:function(i,a){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,d=this.state,f=d.prevPoints,p=d.prevBaseLine,y=d.totalLength;return c&&o&&o.length&&(!f&&y>0||!_f(f,o)||!_f(p,l))?this.renderAreaWithAnimation(i,a):this.renderAreaStatically(o,l,i,a)}},{key:"render",value:function(){var i,a=this.props,s=a.hide,o=a.dot,l=a.points,c=a.className,d=a.top,f=a.left,p=a.xAxis,y=a.yAxis,x=a.width,v=a.height,S=a.isAnimationActive,N=a.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=un("recharts-area",c),O=p&&p.allowDataOverflow,k=y&&y.allowDataOverflow,P=O||k,I=ln(N)?this.id:N,F=(i=Ft(o,!1))!==null&&i!==void 0?i:{r:3,strokeWidth:2},B=F.r,$=B===void 0?3:B,L=F.strokeWidth,V=L===void 0?2:L,H=b9(o)?o:{},te=H.clipDot,X=te===void 0?!0:te,q=$*2+V;return Se.createElement(Pn,{className:C},O||k?Se.createElement("defs",null,Se.createElement("clipPath",{id:"clipPath-".concat(I)},Se.createElement("rect",{x:O?f:f-x/2,y:k?d:d-v/2,width:O?x:x*2,height:k?v:v*2})),!X&&Se.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Se.createElement("rect",{x:f-q/2,y:d-q/2,width:x+q,height:v+q}))):null,T?null:this.renderArea(P,I),(o||T)&&this.renderDots(P,X,I),(!S||_)&&Al.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,a){return i.animationId!==a.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,curBaseLine:i.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:i.points!==a.curPoints||i.baseLine!==a.curBaseLine?{curPoints:i.points,curBaseLine:i.baseLine}:null}}])}(b.PureComponent);bH=Sd;_l(Sd,"displayName","Area");_l(Sd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!xd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});_l(Sd,"getBaseValue",function(t,e,n,i){var a=t.layout,s=t.baseValue,o=e.props.baseValue,l=o??s;if(bt(l)&&typeof l=="number")return l;var c=a==="horizontal"?i:n,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),p=Math.min(d[0],d[1]);return l==="dataMin"?p:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});_l(Sd,"getComposedData",function(t){var e=t.props,n=t.item,i=t.xAxis,a=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,y=t.offset,x=e.layout,v=d&&d.length,S=bH.getBaseValue(e,n,i,a),N=x==="horizontal",_=!1,T=p.map(function(O,k){var P;v?P=d[f+k]:(P=si(O,c),Array.isArray(P)?_=!0:P=[S,P]);var I=P[1]==null||v&&si(O,c)==null;return N?{x:Zw({axis:i,ticks:s,bandSize:l,entry:O,index:k}),y:I?null:a.scale(P[1]),value:P,payload:O}:{x:I?null:i.scale(P[1]),y:Zw({axis:a,ticks:o,bandSize:l,entry:O,index:k}),value:P,payload:O}}),C;return v||_?C=T.map(function(O){var k=Array.isArray(O.value)?O.value[0]:null;return N?{x:O.x,y:k!=null&&O.y!=null?a.scale(k):null}:{x:k!=null?i.scale(k):null,y:O.y}}):C=N?a.scale(S):i.scale(S),Vu({points:T,baseLine:C,layout:x,isRange:_},y)});_l(Sd,"renderDotItem",function(t,e){var n;if(Se.isValidElement(t))n=Se.cloneElement(t,e);else if(en(t))n=t(e);else{var i=un("recharts-area-dot",typeof t!="boolean"?t.className:""),a=e.key,s=jH(e,sEe);n=Se.createElement(Vb,Jh({},s,{key:a,className:i}))}return n});function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function mEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gEe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,CH(i.key),i)}}function yEe(t,e,n){return e&&gEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xEe(t,e,n){return e=NS(e),vEe(t,NH()?Reflect.construct(e,n||[],NS(t).constructor):e.apply(t,n))}function vEe(t,e){if(e&&(Tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bEe(t)}function bEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NH=function(){return!!t})()}function NS(t){return NS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NS(t)}function jEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cO(t,e)}function cO(t,e){return cO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},cO(t,e)}function _H(t,e,n){return e=CH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CH(t){var e=wEe(t,"string");return Tg(e)=="symbol"?e:e+""}function wEe(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Tg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function uO(){return uO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},uO.apply(this,arguments)}function SEe(t){var e=t.xAxisId,n=vM(),i=bM(),a=sH(e);return a==null?null:b.createElement(Gg,uO({},a,{className:un("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(o){return wc(o,!0)}}))}var $c=function(t){function e(){return mEe(this,e),xEe(this,e,arguments)}return jEe(e,t),yEe(e,[{key:"render",value:function(){return b.createElement(SEe,this.props)}}])}(b.Component);_H($c,"displayName","XAxis");_H($c,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function NEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Ee(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,AH(i.key),i)}}function CEe(t,e,n){return e&&_Ee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TEe(t,e,n){return e=_S(e),kEe(t,TH()?Reflect.construct(e,n||[],_S(t).constructor):e.apply(t,n))}function kEe(t,e){if(e&&(kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AEe(t)}function AEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TH=function(){return!!t})()}function _S(t){return _S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_S(t)}function EEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dO(t,e)}function dO(t,e){return dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},dO(t,e)}function kH(t,e,n){return e=AH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AH(t){var e=PEe(t,"string");return kg(e)=="symbol"?e:e+""}function PEe(t,e){if(kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(kg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function hO(){return hO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hO.apply(this,arguments)}var OEe=function(e){var n=e.yAxisId,i=vM(),a=bM(),s=oH(n);return s==null?null:b.createElement(Gg,hO({},s,{className:un("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:i,height:a},ticksGenerator:function(l){return wc(l,!0)}}))},Bc=function(t){function e(){return NEe(this,e),TEe(this,e,arguments)}return EEe(e,t),CEe(e,[{key:"render",value:function(){return b.createElement(OEe,this.props)}}])}(b.Component);kH(Bc,"displayName","YAxis");kH(Bc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function X8(t){return REe(t)||IEe(t)||MEe(t)||DEe()}function DEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MEe(t,e){if(t){if(typeof t=="string")return fO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fO(t,e)}}function IEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function REe(t){if(Array.isArray(t))return fO(t)}function fO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var pO=function(e,n,i,a,s){var o=As(e,wM),l=As(e,ON),c=[].concat(X8(o),X8(l)),d=As(e,MN),f="".concat(a,"Id"),p=a[0],y=n;if(c.length&&(y=c.reduce(function(S,N){if(N.props[f]===i&&El(N.props,"extendDomain")&&bt(N.props[p])){var _=N.props[p];return[Math.min(S[0],_),Math.max(S[1],_)]}return S},y)),d.length){var x="".concat(p,"1"),v="".concat(p,"2");y=d.reduce(function(S,N){if(N.props[f]===i&&El(N.props,"extendDomain")&&bt(N.props[x])&&bt(N.props[v])){var _=N.props[x],T=N.props[v];return[Math.min(S[0],_,T),Math.max(S[1],_,T)]}return S},y)}return s&&s.length&&(y=s.reduce(function(S,N){return bt(N)?[Math.min(S[0],N),Math.max(S[1],N)]:S},y)),y},AA={exports:{}},J8;function LEe(){return J8||(J8=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function a(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new a(f,p||c,y),v=n?n+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],x]:c._events[v].push(x):(c._events[v]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new i:delete c._events[d]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,v=new Array(x);y<x;y++)v[y]=p[y].fn;return v},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,y,x,v){var S=n?n+d:d;if(!this._events[S])return!1;var N=this._events[S],_=arguments.length,T,C;if(N.fn){switch(N.once&&this.removeListener(d,N.fn,void 0,!0),_){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,f),!0;case 3:return N.fn.call(N.context,f,p),!0;case 4:return N.fn.call(N.context,f,p,y),!0;case 5:return N.fn.call(N.context,f,p,y,x),!0;case 6:return N.fn.call(N.context,f,p,y,x,v),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];N.fn.apply(N.context,T)}else{var O=N.length,k;for(C=0;C<O;C++)switch(N[C].once&&this.removeListener(d,N[C].fn,void 0,!0),_){case 1:N[C].fn.call(N[C].context);break;case 2:N[C].fn.call(N[C].context,f);break;case 3:N[C].fn.call(N[C].context,f,p);break;case 4:N[C].fn.call(N[C].context,f,p,y);break;default:if(!T)for(k=1,T=new Array(_-1);k<_;k++)T[k-1]=arguments[k];N[C].fn.apply(N[C].context,T)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,y){var x=n?n+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var v=this._events[x];if(v.fn)v.fn===f&&(!y||v.once)&&(!p||v.context===p)&&o(this,x);else{for(var S=0,N=[],_=v.length;S<_;S++)(v[S].fn!==f||y&&!v[S].once||p&&v[S].context!==p)&&N.push(v[S]);N.length?this._events[x]=N.length===1?N[0]:N:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&o(this,f)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(AA)),AA.exports}var FEe=LEe();const $Ee=Bn(FEe);var EA=new $Ee,PA="recharts.syncMouseEvents";function mb(t){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(t)}function BEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zEe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,EH(i.key),i)}}function qEe(t,e,n){return e&&zEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OA(t,e,n){return e=EH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EH(t){var e=UEe(t,"string");return mb(e)=="symbol"?e:e+""}function UEe(t,e){if(mb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(mb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var VEe=function(){function t(){BEe(this,t),OA(this,"activeIndex",0),OA(this,"coordinateList",[]),OA(this,"layout","horizontal")}return qEe(t,[{key:"setDetails",value:function(n){var i,a=n.coordinateList,s=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,f=n.offset,p=f===void 0?null:f,y=n.mouseHandlerCallback,x=y===void 0?null:y;this.coordinateList=(i=s??this.coordinateList)!==null&&i!==void 0?i:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,i;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((i=window)===null||i===void 0?void 0:i.scrollY)||0,p=s+c+d,y=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:y})}}}])}();function HEe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var i=t==null?void 0:t[0],a=t==null?void 0:t[1];if(i&&a&&bt(i)&&bt(a))return!0}return!1}function GEe(t,e,n,i){var a=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-a,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function PH(t){var e=t.cx,n=t.cy,i=t.radius,a=t.startAngle,s=t.endAngle,o=Mr(e,n,i,a),l=Mr(e,n,i,s);return{points:[o,l],cx:e,cy:n,radius:i,startAngle:a,endAngle:s}}function WEe(t,e,n){var i,a,s,o;if(t==="horizontal")i=e.x,s=i,a=n.top,o=n.top+n.height;else if(t==="vertical")a=e.y,o=a,i=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,f=e.outerRadius,p=e.angle,y=Mr(l,c,d,p),x=Mr(l,c,f,p);i=y.x,a=y.y,s=x.x,o=x.y}else return PH(e);return[{x:i,y:a},{x:s,y:o}]}function gb(t){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(t)}function Z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Fj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z8(Object(n),!0).forEach(function(i){YEe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function YEe(t,e,n){return e=KEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KEe(t){var e=QEe(t,"string");return gb(e)=="symbol"?e:e+""}function QEe(t,e){if(gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(gb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XEe(t){var e,n,i=t.element,a=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,f=t.tooltipAxisBandSize,p=t.layout,y=t.chartName,x=(e=i.props.cursor)!==null&&e!==void 0?e:(n=i.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!i||!x||!s||!o||y!=="ScatterChart"&&a!=="axis")return null;var v,S=df;if(y==="ScatterChart")v=o,S=l2e;else if(y==="BarChart")v=GEe(p,o,c,f),S=pM;else if(p==="radial"){var N=PH(o),_=N.cx,T=N.cy,C=N.radius,O=N.startAngle,k=N.endAngle;v={cx:_,cy:T,startAngle:O,endAngle:k,innerRadius:C,outerRadius:C},S=AV}else v={points:WEe(p,o,c)},S=df;var P=Fj(Fj(Fj(Fj({stroke:"#ccc",pointerEvents:"none"},c),v),Ft(x,!1)),{},{payload:l,payloadIndex:d,className:un("recharts-tooltip-cursor",x.className)});return b.isValidElement(x)?b.cloneElement(x,P):b.createElement(S,P)}var JEe=["item"],ZEe=["children","className","width","height","style","compact","title","desc"];function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function Pm(){return Pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pm.apply(this,arguments)}function eB(t,e){return nPe(t)||tPe(t,e)||DH(t,e)||ePe()}function ePe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,a,s,o,l=[],c=!0,d=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function nPe(t){if(Array.isArray(t))return t}function tB(t,e){if(t==null)return{};var n=rPe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function rPe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function iPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aPe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,MH(i.key),i)}}function sPe(t,e,n){return e&&aPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oPe(t,e,n){return e=CS(e),lPe(t,OH()?Reflect.construct(e,n||[],CS(t).constructor):e.apply(t,n))}function lPe(t,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cPe(t)}function cPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OH=function(){return!!t})()}function CS(t){return CS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CS(t)}function uPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mO(t,e)}function mO(t,e){return mO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},mO(t,e)}function Eg(t){return fPe(t)||hPe(t)||DH(t)||dPe()}function dPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DH(t,e){if(t){if(typeof t=="string")return gO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gO(t,e)}}function hPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fPe(t){if(Array.isArray(t))return gO(t)}function gO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function nB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(n),!0).forEach(function(i){Jt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Jt(t,e,n){return e=MH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MH(t){var e=pPe(t,"string");return Ag(e)=="symbol"?e:e+""}function pPe(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Ag(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mPe={xAxis:["bottom","top"],yAxis:["left","right"]},gPe={width:"100%",height:"100%"},IH={x:0,y:0};function $j(t){return t}var yPe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},xPe=function(e,n,i,a){var s=n.find(function(f){return f&&f.index===i});if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=a.radius;return st(st(st({},a),Mr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,d=a.angle;return st(st(st({},a),Mr(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return IH},IN=function(e,n){var i=n.graphicalItems,a=n.dataStartIndex,s=n.dataEndIndex,o=(i??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Eg(l),Eg(d)):l},[]);return o.length>0?o:e&&e.length&&bt(a)&&bt(s)?e.slice(a,s+1):[]};function RH(t){return t==="number"?[0,"auto"]:void 0}var yO=function(e,n,i,a){var s=e.graphicalItems,o=e.tooltipAxis,l=IN(n,e);return i<0||!s||!s.length||i>=l.length?null:s.reduce(function(c,d){var f,p=(f=d.props.data)!==null&&f!==void 0?f:n;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=i&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;y=kw(x,o.dataKey,a)}else y=p&&p[i]||l[i];return y?[].concat(Eg(c),[SV(d,y)]):c},[])},rB=function(e,n,i,a){var s=a||{x:e.chartX,y:e.chartY},o=yPe(s,i),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,f=DSe(o,l,d,c);if(f>=0&&d){var p=d[f]&&d[f].value,y=yO(e,n,f,p),x=xPe(i,l,f,s);return{activeTooltipIndex:f,activeLabel:p,activePayload:y,activeCoordinate:x}}return null},vPe=function(e,n){var i=n.axes,a=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,y=e.stackOffset,x=yV(f,s);return i.reduce(function(v,S){var N,_=S.type.defaultProps!==void 0?st(st({},S.type.defaultProps),S.props):S.props,T=_.type,C=_.dataKey,O=_.allowDataOverflow,k=_.allowDuplicatedCategory,P=_.scale,I=_.ticks,F=_.includeHidden,B=_[o];if(v[B])return v;var $=IN(e.data,{graphicalItems:a.filter(function(je){var K,Oe=o in je.props?je.props[o]:(K=je.type.defaultProps)===null||K===void 0?void 0:K[o];return Oe===B}),dataStartIndex:c,dataEndIndex:d}),L=$.length,V,H,te;HEe(_.domain,O,T)&&(V=EP(_.domain,null,O),x&&(T==="number"||P!=="auto")&&(te=jv($,C,"category")));var X=RH(T);if(!V||V.length===0){var q,W=(q=_.domain)!==null&&q!==void 0?q:X;if(C){if(V=jv($,C,T),T==="category"&&x){var ae=Tye(V);k&&ae?(H=V,V=hS(0,L)):k||(V=t$(W,V,S).reduce(function(je,K){return je.indexOf(K)>=0?je:[].concat(Eg(je),[K])},[]))}else if(T==="category")k?V=V.filter(function(je){return je!==""&&!ln(je)}):V=t$(W,V,S).reduce(function(je,K){return je.indexOf(K)>=0||K===""||ln(K)?je:[].concat(Eg(je),[K])},[]);else if(T==="number"){var G=FSe($,a.filter(function(je){var K,Oe,Ye=o in je.props?je.props[o]:(K=je.type.defaultProps)===null||K===void 0?void 0:K[o],Me="hide"in je.props?je.props.hide:(Oe=je.type.defaultProps)===null||Oe===void 0?void 0:Oe.hide;return Ye===B&&(F||!Me)}),C,s,f);G&&(V=G)}x&&(T==="number"||P!=="auto")&&(te=jv($,C,"category"))}else x?V=hS(0,L):l&&l[B]&&l[B].hasStack&&T==="number"?V=y==="expand"?[0,1]:wV(l[B].stackGroups,c,d):V=gV($,a.filter(function(je){var K=o in je.props?je.props[o]:je.type.defaultProps[o],Oe="hide"in je.props?je.props.hide:je.type.defaultProps.hide;return K===B&&(F||!Oe)}),T,f,!0);if(T==="number")V=pO(p,V,B,s,I),W&&(V=EP(W,V,O));else if(T==="category"&&W){var z=W,le=V.every(function(je){return z.indexOf(je)>=0});le&&(V=z)}}return st(st({},v),{},Jt({},B,st(st({},_),{},{axisType:s,domain:V,categoricalDomain:te,duplicateDomain:H,originalDomain:(N=_.domain)!==null&&N!==void 0?N:X,isCategorical:x,layout:f})))},{})},bPe=function(e,n){var i=n.graphicalItems,a=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,y=IN(e.data,{graphicalItems:i,dataStartIndex:c,dataEndIndex:d}),x=y.length,v=yV(f,s),S=-1;return i.reduce(function(N,_){var T=_.type.defaultProps!==void 0?st(st({},_.type.defaultProps),_.props):_.props,C=T[o],O=RH("number");if(!N[C]){S++;var k;return v?k=hS(0,x):l&&l[C]&&l[C].hasStack?(k=wV(l[C].stackGroups,c,d),k=pO(p,k,C,s)):(k=EP(O,gV(y,i.filter(function(P){var I,F,B=o in P.props?P.props[o]:(I=P.type.defaultProps)===null||I===void 0?void 0:I[o],$="hide"in P.props?P.props.hide:(F=P.type.defaultProps)===null||F===void 0?void 0:F.hide;return B===C&&!$}),"number",f),a.defaultProps.allowDataOverflow),k=pO(p,k,C,s)),st(st({},N),{},Jt({},C,st(st({axisType:s},a.defaultProps),{},{hide:!0,orientation:ks(mPe,"".concat(s,".").concat(S%2),null),domain:k,originalDomain:O,isCategorical:v,layout:f})))}return N},{})},jPe=function(e,n){var i=n.axisType,a=i===void 0?"xAxis":i,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,f=e.children,p="".concat(a,"Id"),y=As(f,s),x={};return y&&y.length?x=vPe(e,{axes:y,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(x=bPe(e,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),x},wPe=function(e){var n=Gu(e),i=wc(n,!1,!0);return{tooltipTicks:i,orderedTooltipTicks:zD(i,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:eS(n,i)}},iB=function(e){var n=e.children,i=e.defaultShowTooltip,a=ws(n,vg),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!i}},SPe=function(e){return!e||!e.length?!1:e.some(function(n){var i=Cc(n&&n.type);return i&&i.indexOf("Bar")>=0})},aB=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},NPe=function(e,n){var i=e.props,a=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,d=i.width,f=i.height,p=i.children,y=i.margin||{},x=ws(p,vg),v=ws(p,Tc),S=Object.keys(c).reduce(function(k,P){var I=c[P],F=I.orientation;return!I.mirror&&!I.hide?st(st({},k),{},Jt({},F,k[F]+I.width)):k},{left:y.left||0,right:y.right||0}),N=Object.keys(o).reduce(function(k,P){var I=o[P],F=I.orientation;return!I.mirror&&!I.hide?st(st({},k),{},Jt({},F,ks(k,"".concat(F))+I.height)):k},{top:y.top||0,bottom:y.bottom||0}),_=st(st({},N),S),T=_.bottom;x&&(_.bottom+=x.props.height||vg.defaultProps.height),v&&n&&(_=RSe(_,a,i,n));var C=d-_.left-_.right,O=f-_.top-_.bottom;return st(st({brushBottom:T},_),{},{width:Math.max(C,0),height:Math.max(O,0)})},_Pe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},RN=function(e){var n=e.chartName,i=e.GraphicalChild,a=e.defaultTooltipEventType,s=a===void 0?"axis":a,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,f=e.formatAxisMap,p=e.defaultProps,y=function(_,T){var C=T.graphicalItems,O=T.stackGroups,k=T.offset,P=T.updateId,I=T.dataStartIndex,F=T.dataEndIndex,B=_.barSize,$=_.layout,L=_.barGap,V=_.barCategoryGap,H=_.maxBarSize,te=aB($),X=te.numericAxisName,q=te.cateAxisName,W=SPe(C),ae=[];return C.forEach(function(G,z){var le=IN(_.data,{graphicalItems:[G],dataStartIndex:I,dataEndIndex:F}),je=G.type.defaultProps!==void 0?st(st({},G.type.defaultProps),G.props):G.props,K=je.dataKey,Oe=je.maxBarSize,Ye=je["".concat(X,"Id")],Me=je["".concat(q,"Id")],Ie={},be=c.reduce(function(Le,oe){var _e=T["".concat(oe.axisType,"Map")],$e=je["".concat(oe.axisType,"Id")];_e&&_e[$e]||oe.axisType==="zAxis"||Tf();var ze=_e[$e];return st(st({},Le),{},Jt(Jt({},oe.axisType,ze),"".concat(oe.axisType,"Ticks"),wc(ze)))},Ie),re=be[q],ve=be["".concat(q,"Ticks")],ce=O&&O[Ye]&&O[Ye].hasStack&&WSe(G,O[Ye].stackGroups),fe=Cc(G.type).indexOf("Bar")>=0,se=eS(re,ve),Q=[],ie=W&&MSe({barSize:B,stackGroups:O,totalSize:_Pe(be,q)});if(fe){var ge,ee,we=ln(Oe)?H:Oe,Ue=(ge=(ee=eS(re,ve,!0))!==null&&ee!==void 0?ee:we)!==null&&ge!==void 0?ge:0;Q=ISe({barGap:L,barCategoryGap:V,bandSize:Ue!==se?Ue:se,sizeList:ie[Me],maxBarSize:we}),Ue!==se&&(Q=Q.map(function(Le){return st(st({},Le),{},{position:st(st({},Le.position),{},{offset:Le.position.offset-Ue/2})})}))}var Ge=G&&G.type&&G.type.getComposedData;Ge&&ae.push({props:st(st({},Ge(st(st({},be),{},{displayedData:le,props:_,dataKey:K,item:G,bandSize:se,barPosition:Q,offset:k,stackedData:ce,layout:$,dataStartIndex:I,dataEndIndex:F}))),{},Jt(Jt(Jt({key:G.key||"item-".concat(z)},X,be[X]),q,be[q]),"animationId",P)),childIndex:$ye(G,_.children),item:G})}),ae},x=function(_,T){var C=_.props,O=_.dataStartIndex,k=_.dataEndIndex,P=_.updateId;if(!g6({props:C}))return null;var I=C.children,F=C.layout,B=C.stackOffset,$=C.data,L=C.reverseStackOrder,V=aB(F),H=V.numericAxisName,te=V.cateAxisName,X=As(I,i),q=HSe($,X,"".concat(H,"Id"),"".concat(te,"Id"),B,L),W=c.reduce(function(je,K){var Oe="".concat(K.axisType,"Map");return st(st({},je),{},Jt({},Oe,jPe(C,st(st({},K),{},{graphicalItems:X,stackGroups:K.axisType===H&&q,dataStartIndex:O,dataEndIndex:k}))))},{}),ae=NPe(st(st({},W),{},{props:C,graphicalItems:X}),T==null?void 0:T.legendBBox);Object.keys(W).forEach(function(je){W[je]=f(C,W[je],ae,je.replace("Map",""),n)});var G=W["".concat(te,"Map")],z=wPe(G),le=y(C,st(st({},W),{},{dataStartIndex:O,dataEndIndex:k,updateId:P,graphicalItems:X,stackGroups:q,offset:ae}));return st(st({formattedGraphicalItems:le,graphicalItems:X,offset:ae,stackGroups:q},z),W)},v=function(N){function _(T){var C,O,k;return iPe(this,_),k=oPe(this,_,[T]),Jt(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Jt(k,"accessibilityManager",new VEe),Jt(k,"handleLegendBBoxUpdate",function(P){if(P){var I=k.state,F=I.dataStartIndex,B=I.dataEndIndex,$=I.updateId;k.setState(st({legendBBox:P},x({props:k.props,dataStartIndex:F,dataEndIndex:B,updateId:$},st(st({},k.state),{},{legendBBox:P}))))}}),Jt(k,"handleReceiveSyncEvent",function(P,I,F){if(k.props.syncId===P){if(F===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(I)}}),Jt(k,"handleBrushChange",function(P){var I=P.startIndex,F=P.endIndex;if(I!==k.state.dataStartIndex||F!==k.state.dataEndIndex){var B=k.state.updateId;k.setState(function(){return st({dataStartIndex:I,dataEndIndex:F},x({props:k.props,dataStartIndex:I,dataEndIndex:F,updateId:B},k.state))}),k.triggerSyncEvent({dataStartIndex:I,dataEndIndex:F})}}),Jt(k,"handleMouseEnter",function(P){var I=k.getMouseInfo(P);if(I){var F=st(st({},I),{},{isTooltipActive:!0});k.setState(F),k.triggerSyncEvent(F);var B=k.props.onMouseEnter;en(B)&&B(F,P)}}),Jt(k,"triggeredAfterMouseMove",function(P){var I=k.getMouseInfo(P),F=I?st(st({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(F),k.triggerSyncEvent(F);var B=k.props.onMouseMove;en(B)&&B(F,P)}),Jt(k,"handleItemMouseEnter",function(P){k.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Jt(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Jt(k,"handleMouseMove",function(P){P.persist(),k.throttleTriggeredAfterMouseMove(P)}),Jt(k,"handleMouseLeave",function(P){k.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};k.setState(I),k.triggerSyncEvent(I);var F=k.props.onMouseLeave;en(F)&&F(I,P)}),Jt(k,"handleOuterEvent",function(P){var I=Fye(P),F=ks(k.props,"".concat(I));if(I&&en(F)){var B,$;/.*touch.*/i.test(I)?$=k.getMouseInfo(P.changedTouches[0]):$=k.getMouseInfo(P),F((B=$)!==null&&B!==void 0?B:{},P)}}),Jt(k,"handleClick",function(P){var I=k.getMouseInfo(P);if(I){var F=st(st({},I),{},{isTooltipActive:!0});k.setState(F),k.triggerSyncEvent(F);var B=k.props.onClick;en(B)&&B(F,P)}}),Jt(k,"handleMouseDown",function(P){var I=k.props.onMouseDown;if(en(I)){var F=k.getMouseInfo(P);I(F,P)}}),Jt(k,"handleMouseUp",function(P){var I=k.props.onMouseUp;if(en(I)){var F=k.getMouseInfo(P);I(F,P)}}),Jt(k,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Jt(k,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&k.handleMouseDown(P.changedTouches[0])}),Jt(k,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&k.handleMouseUp(P.changedTouches[0])}),Jt(k,"handleDoubleClick",function(P){var I=k.props.onDoubleClick;if(en(I)){var F=k.getMouseInfo(P);I(F,P)}}),Jt(k,"handleContextMenu",function(P){var I=k.props.onContextMenu;if(en(I)){var F=k.getMouseInfo(P);I(F,P)}}),Jt(k,"triggerSyncEvent",function(P){k.props.syncId!==void 0&&EA.emit(PA,k.props.syncId,P,k.eventEmitterSymbol)}),Jt(k,"applySyncEvent",function(P){var I=k.props,F=I.layout,B=I.syncMethod,$=k.state.updateId,L=P.dataStartIndex,V=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)k.setState(st({dataStartIndex:L,dataEndIndex:V},x({props:k.props,dataStartIndex:L,dataEndIndex:V,updateId:$},k.state)));else if(P.activeTooltipIndex!==void 0){var H=P.chartX,te=P.chartY,X=P.activeTooltipIndex,q=k.state,W=q.offset,ae=q.tooltipTicks;if(!W)return;if(typeof B=="function")X=B(ae,P);else if(B==="value"){X=-1;for(var G=0;G<ae.length;G++)if(ae[G].value===P.activeLabel){X=G;break}}var z=st(st({},W),{},{x:W.left,y:W.top}),le=Math.min(H,z.x+z.width),je=Math.min(te,z.y+z.height),K=ae[X]&&ae[X].value,Oe=yO(k.state,k.props.data,X),Ye=ae[X]?{x:F==="horizontal"?ae[X].coordinate:le,y:F==="horizontal"?je:ae[X].coordinate}:IH;k.setState(st(st({},P),{},{activeLabel:K,activeCoordinate:Ye,activePayload:Oe,activeTooltipIndex:X}))}else k.setState(P)}),Jt(k,"renderCursor",function(P){var I,F=k.state,B=F.isTooltipActive,$=F.activeCoordinate,L=F.activePayload,V=F.offset,H=F.activeTooltipIndex,te=F.tooltipAxisBandSize,X=k.getTooltipEventType(),q=(I=P.props.active)!==null&&I!==void 0?I:B,W=k.props.layout,ae=P.key||"_recharts-cursor";return Se.createElement(XEe,{key:ae,activeCoordinate:$,activePayload:L,activeTooltipIndex:H,chartName:n,element:P,isActive:q,layout:W,offset:V,tooltipAxisBandSize:te,tooltipEventType:X})}),Jt(k,"renderPolarAxis",function(P,I,F){var B=ks(P,"type.axisType"),$=ks(k.state,"".concat(B,"Map")),L=P.type.defaultProps,V=L!==void 0?st(st({},L),P.props):P.props,H=$&&$[V["".concat(B,"Id")]];return b.cloneElement(P,st(st({},H),{},{className:un(B,H.className),key:P.key||"".concat(I,"-").concat(F),ticks:wc(H,!0)}))}),Jt(k,"renderPolarGrid",function(P){var I=P.props,F=I.radialLines,B=I.polarAngles,$=I.polarRadius,L=k.state,V=L.radiusAxisMap,H=L.angleAxisMap,te=Gu(V),X=Gu(H),q=X.cx,W=X.cy,ae=X.innerRadius,G=X.outerRadius;return b.cloneElement(P,{polarAngles:Array.isArray(B)?B:wc(X,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray($)?$:wc(te,!0).map(function(z){return z.coordinate}),cx:q,cy:W,innerRadius:ae,outerRadius:G,key:P.key||"polar-grid",radialLines:F})}),Jt(k,"renderLegend",function(){var P=k.state.formattedGraphicalItems,I=k.props,F=I.children,B=I.width,$=I.height,L=k.props.margin||{},V=B-(L.left||0)-(L.right||0),H=pV({children:F,formattedGraphicalItems:P,legendWidth:V,legendContent:d});if(!H)return null;var te=H.item,X=tB(H,JEe);return b.cloneElement(te,st(st({},X),{},{chartWidth:B,chartHeight:$,margin:L,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Jt(k,"renderTooltip",function(){var P,I=k.props,F=I.children,B=I.accessibilityLayer,$=ws(F,Aa);if(!$)return null;var L=k.state,V=L.isTooltipActive,H=L.activeCoordinate,te=L.activePayload,X=L.activeLabel,q=L.offset,W=(P=$.props.active)!==null&&P!==void 0?P:V;return b.cloneElement($,{viewBox:st(st({},q),{},{x:q.left,y:q.top}),active:W,label:X,payload:W?te:[],coordinate:H,accessibilityLayer:B})}),Jt(k,"renderBrush",function(P){var I=k.props,F=I.margin,B=I.data,$=k.state,L=$.offset,V=$.dataStartIndex,H=$.dataEndIndex,te=$.updateId;return b.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Mj(k.handleBrushChange,P.props.onChange),data:B,x:bt(P.props.x)?P.props.x:L.left,y:bt(P.props.y)?P.props.y:L.top+L.height+L.brushBottom-(F.bottom||0),width:bt(P.props.width)?P.props.width:L.width,startIndex:V,endIndex:H,updateId:"brush-".concat(te)})}),Jt(k,"renderReferenceElement",function(P,I,F){if(!P)return null;var B=k,$=B.clipPathId,L=k.state,V=L.xAxisMap,H=L.yAxisMap,te=L.offset,X=P.type.defaultProps||{},q=P.props,W=q.xAxisId,ae=W===void 0?X.xAxisId:W,G=q.yAxisId,z=G===void 0?X.yAxisId:G;return b.cloneElement(P,{key:P.key||"".concat(I,"-").concat(F),xAxis:V[ae],yAxis:H[z],viewBox:{x:te.left,y:te.top,width:te.width,height:te.height},clipPathId:$})}),Jt(k,"renderActivePoints",function(P){var I=P.item,F=P.activePoint,B=P.basePoint,$=P.childIndex,L=P.isRange,V=[],H=I.props.key,te=I.item.type.defaultProps!==void 0?st(st({},I.item.type.defaultProps),I.item.props):I.item.props,X=te.activeDot,q=te.dataKey,W=st(st({index:$,dataKey:q,cx:F.x,cy:F.y,r:4,fill:fM(I.item),strokeWidth:2,stroke:"#fff",payload:F.payload,value:F.value},Ft(X,!1)),Aw(X));return V.push(_.renderActiveDot(X,W,"".concat(H,"-activePoint-").concat($))),B?V.push(_.renderActiveDot(X,st(st({},W),{},{cx:B.x,cy:B.y}),"".concat(H,"-basePoint-").concat($))):L&&V.push(null),V}),Jt(k,"renderGraphicChild",function(P,I,F){var B=k.filterFormatItem(P,I,F);if(!B)return null;var $=k.getTooltipEventType(),L=k.state,V=L.isTooltipActive,H=L.tooltipAxis,te=L.activeTooltipIndex,X=L.activeLabel,q=k.props.children,W=ws(q,Aa),ae=B.props,G=ae.points,z=ae.isRange,le=ae.baseLine,je=B.item.type.defaultProps!==void 0?st(st({},B.item.type.defaultProps),B.item.props):B.item.props,K=je.activeDot,Oe=je.hide,Ye=je.activeBar,Me=je.activeShape,Ie=!!(!Oe&&V&&W&&(K||Ye||Me)),be={};$!=="axis"&&W&&W.props.trigger==="click"?be={onClick:Mj(k.handleItemMouseEnter,P.props.onClick)}:$!=="axis"&&(be={onMouseLeave:Mj(k.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Mj(k.handleItemMouseEnter,P.props.onMouseEnter)});var re=b.cloneElement(P,st(st({},B.props),be));function ve(oe){return typeof H.dataKey=="function"?H.dataKey(oe.payload):null}if(Ie)if(te>=0){var ce,fe;if(H.dataKey&&!H.allowDuplicatedCategory){var se=typeof H.dataKey=="function"?ve:"payload.".concat(H.dataKey.toString());ce=kw(G,se,X),fe=z&&le&&kw(le,se,X)}else ce=G==null?void 0:G[te],fe=z&&le&&le[te];if(Me||Ye){var Q=P.props.activeIndex!==void 0?P.props.activeIndex:te;return[b.cloneElement(P,st(st(st({},B.props),be),{},{activeIndex:Q})),null,null]}if(!ln(ce))return[re].concat(Eg(k.renderActivePoints({item:B,activePoint:ce,basePoint:fe,childIndex:te,isRange:z})))}else{var ie,ge=(ie=k.getItemByXY(k.state.activeCoordinate))!==null&&ie!==void 0?ie:{graphicalItem:re},ee=ge.graphicalItem,we=ee.item,Ue=we===void 0?P:we,Ge=ee.childIndex,Le=st(st(st({},B.props),be),{},{activeIndex:Ge});return[b.cloneElement(Ue,Le),null,null]}return z?[re,null,null]:[re,null]}),Jt(k,"renderCustomized",function(P,I,F){return b.cloneElement(P,st(st({key:"recharts-customized-".concat(F)},k.props),k.state))}),Jt(k,"renderMap",{CartesianGrid:{handler:$j,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:$j},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:$j},YAxis:{handler:$j},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((C=T.id)!==null&&C!==void 0?C:Of("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=f7(k.triggeredAfterMouseMove,(O=T.throttleDelay)!==null&&O!==void 0?O:1e3/60),k.state={},k}return uPe(_,N),sPe(_,[{key:"componentDidMount",value:function(){var C,O;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,O=C.children,k=C.data,P=C.height,I=C.layout,F=ws(O,Aa);if(F){var B=F.props.defaultIndex;if(!(typeof B!="number"||B<0||B>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[B]&&this.state.tooltipTicks[B].value,L=yO(this.state,k,B,$),V=this.state.tooltipTicks[B].coordinate,H=(this.state.offset.top+P)/2,te=I==="horizontal",X=te?{x:V,y:H}:{y:V,x:H},q=this.state.formattedGraphicalItems.find(function(ae){var G=ae.item;return G.type.name==="Scatter"});q&&(X=st(st({},X),q.props.points[B].tooltipPosition),L=q.props.points[B].tooltipPayload);var W={activeTooltipIndex:B,isTooltipActive:!0,activeLabel:$,activePayload:L,activeCoordinate:X};this.setState(W),this.renderCursor(F),this.accessibilityManager.setIndex(B)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,O){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==O.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var k,P;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(C){JE([ws(C.children,Aa)],[ws(this.props.children,Aa)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=ws(this.props.children,Aa);if(C&&typeof C.props.shared=="boolean"){var O=C.props.shared?"axis":"item";return l.indexOf(O)>=0?O:s}return s}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var O=this.container,k=O.getBoundingClientRect(),P=_0e(k),I={chartX:Math.round(C.pageX-P.left),chartY:Math.round(C.pageY-P.top)},F=k.width/O.offsetWidth||1,B=this.inRange(I.chartX,I.chartY,F);if(!B)return null;var $=this.state,L=$.xAxisMap,V=$.yAxisMap,H=this.getTooltipEventType(),te=rB(this.state,this.props.data,this.props.layout,B);if(H!=="axis"&&L&&V){var X=Gu(L).scale,q=Gu(V).scale,W=X&&X.invert?X.invert(I.chartX):null,ae=q&&q.invert?q.invert(I.chartY):null;return st(st({},I),{},{xValue:W,yValue:ae},te)}return te?st(st({},I),te):null}},{key:"inRange",value:function(C,O){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,I=C/k,F=O/k;if(P==="horizontal"||P==="vertical"){var B=this.state.offset,$=I>=B.left&&I<=B.left+B.width&&F>=B.top&&F<=B.top+B.height;return $?{x:I,y:F}:null}var L=this.state,V=L.angleAxisMap,H=L.radiusAxisMap;if(V&&H){var te=Gu(V);return i$({x:I,y:F},te)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,O=this.getTooltipEventType(),k=ws(C,Aa),P={};k&&O==="axis"&&(k.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Aw(this.props,this.handleOuterEvent);return st(st({},I),P)}},{key:"addListener",value:function(){EA.on(PA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){EA.removeListener(PA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,O,k){for(var P=this.state.formattedGraphicalItems,I=0,F=P.length;I<F;I++){var B=P[I];if(B.item===C||B.props.key===C.key||O===Cc(B.item.type)&&k===B.childIndex)return B}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,O=this.state.offset,k=O.left,P=O.top,I=O.height,F=O.width;return Se.createElement("defs",null,Se.createElement("clipPath",{id:C},Se.createElement("rect",{x:k,y:P,height:I,width:F})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(O,k){var P=eB(k,2),I=P[0],F=P[1];return st(st({},O),{},Jt({},I,F.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(O,k){var P=eB(k,2),I=P[0],F=P[1];return st(st({},O),{},Jt({},I,F.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var O;return(O=this.state.xAxisMap)===null||O===void 0||(O=O[C])===null||O===void 0?void 0:O.scale}},{key:"getYScaleByAxisId",value:function(C){var O;return(O=this.state.yAxisMap)===null||O===void 0||(O=O[C])===null||O===void 0?void 0:O.scale}},{key:"getItemByXY",value:function(C){var O=this.state,k=O.formattedGraphicalItems,P=O.activeItem;if(k&&k.length)for(var I=0,F=k.length;I<F;I++){var B=k[I],$=B.props,L=B.item,V=L.type.defaultProps!==void 0?st(st({},L.type.defaultProps),L.props):L.props,H=Cc(L.type);if(H==="Bar"){var te=($.data||[]).find(function(ae){return qCe(C,ae)});if(te)return{graphicalItem:B,payload:te}}else if(H==="RadialBar"){var X=($.data||[]).find(function(ae){return i$(C,ae)});if(X)return{graphicalItem:B,payload:X}}else if(kN(B,P)||AN(B,P)||cb(B,P)){var q=hTe({graphicalItem:B,activeTooltipItem:P,itemData:V.data}),W=V.activeIndex===void 0?q:V.activeIndex;return{graphicalItem:st(st({},B),{},{childIndex:W}),payload:cb(B,P)?V.data[q]:B.props.data[q]}}}return null}},{key:"render",value:function(){var C=this;if(!g6(this))return null;var O=this.props,k=O.children,P=O.className,I=O.width,F=O.height,B=O.style,$=O.compact,L=O.title,V=O.desc,H=tB(O,ZEe),te=Ft(H,!1);if($)return Se.createElement(D8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Se.createElement(eP,Pm({},te,{width:I,height:F,title:L,desc:V}),this.renderClipPath(),x6(k,this.renderMap)));if(this.props.accessibilityLayer){var X,q;te.tabIndex=(X=this.props.tabIndex)!==null&&X!==void 0?X:0,te.role=(q=this.props.role)!==null&&q!==void 0?q:"application",te.onKeyDown=function(ae){C.accessibilityManager.keyboardEvent(ae)},te.onFocus=function(){C.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return Se.createElement(D8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Se.createElement("div",Pm({className:un("recharts-wrapper",P),style:st({position:"relative",cursor:"default",width:I,height:F},B)},W,{ref:function(G){C.container=G}}),Se.createElement(eP,Pm({},te,{width:I,height:F,title:L,desc:V,style:gPe}),this.renderClipPath(),x6(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(b.Component);Jt(v,"displayName",n),Jt(v,"defaultProps",st({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Jt(v,"getDerivedStateFromProps",function(N,_){var T=N.dataKey,C=N.data,O=N.children,k=N.width,P=N.height,I=N.layout,F=N.stackOffset,B=N.margin,$=_.dataStartIndex,L=_.dataEndIndex;if(_.updateId===void 0){var V=iB(N);return st(st(st({},V),{},{updateId:0},x(st(st({props:N},V),{},{updateId:0}),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:P,prevLayout:I,prevStackOffset:F,prevMargin:B,prevChildren:O})}if(T!==_.prevDataKey||C!==_.prevData||k!==_.prevWidth||P!==_.prevHeight||I!==_.prevLayout||F!==_.prevStackOffset||!Rm(B,_.prevMargin)){var H=iB(N),te={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},X=st(st({},rB(_,C,I)),{},{updateId:_.updateId+1}),q=st(st(st({},H),te),X);return st(st(st({},q),x(st({props:N},q),_)),{},{prevDataKey:T,prevData:C,prevWidth:k,prevHeight:P,prevLayout:I,prevStackOffset:F,prevMargin:B,prevChildren:O})}if(!JE(O,_.prevChildren)){var W,ae,G,z,le=ws(O,vg),je=le&&(W=(ae=le.props)===null||ae===void 0?void 0:ae.startIndex)!==null&&W!==void 0?W:$,K=le&&(G=(z=le.props)===null||z===void 0?void 0:z.endIndex)!==null&&G!==void 0?G:L,Oe=je!==$||K!==L,Ye=!ln(C),Me=Ye&&!Oe?_.updateId:_.updateId+1;return st(st({updateId:Me},x(st(st({props:N},_),{},{updateId:Me,dataStartIndex:je,dataEndIndex:K}),_)),{},{prevChildren:O,dataStartIndex:je,dataEndIndex:K})}return null}),Jt(v,"renderActiveDot",function(N,_,T){var C;return b.isValidElement(N)?C=b.cloneElement(N,_):en(N)?C=N(_):C=Se.createElement(Vb,_),Se.createElement(Pn,{className:"recharts-active-dot",key:T},C)});var S=b.forwardRef(function(_,T){return Se.createElement(v,Pm({},_,{ref:T}))});return S.displayName=v.displayName,S},CPe=RN({chartName:"LineChart",GraphicalChild:Hb,axisComponents:[{axisType:"xAxis",AxisComp:$c},{axisType:"yAxis",AxisComp:Bc}],formatAxisMap:mM}),LH=RN({chartName:"BarChart",GraphicalChild:wd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:$c},{axisType:"yAxis",AxisComp:Bc}],formatAxisMap:mM}),FH=RN({chartName:"PieChart",GraphicalChild:Rl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:TN},{axisType:"radiusAxis",AxisComp:_N}],formatAxisMap:rNe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),TPe=RN({chartName:"AreaChart",GraphicalChild:Sd,axisComponents:[{axisType:"xAxis",AxisComp:$c},{axisType:"yAxis",AxisComp:Bc}],formatAxisMap:mM});const _M=({widget:t,className:e="",autoHideEmptyColumns:n=!1})=>{const i=Mt(),a=as(),[s,o]=b.useState(null),[l,c]=b.useState(null),[d,f]=b.useState([]),[p,y]=b.useState(!1),[x,v]=b.useState(null),[S,N]=b.useState(""),[_,T]=b.useState(!1);b.useEffect(()=>{const P=async()=>{var I,F,B,$,L,V;y(!0),v(null);try{const H=t.dataSource,te=((I=t.config)==null?void 0:I.filters)&&Array.isArray(t.config.filters)&&t.config.filters.length>0;let X=[];if(te&&(H.startsWith("api:")||H.startsWith("table:"))){const q=await ue("/api/dashboards/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:H,filters:t.config.filters})});if(q.ok){const W=await q.json();X=Array.isArray(W)?W:W.data||[],o(X)}else throw new Error("Failed to fetch filtered data")}else{let q="";const W={"api:patients":{url:"/api/patients?limit=50",dataKey:"patients"},"api:drugs":{url:"/api/drugs?limit=50",dataKey:"drugs"},"api:recurring-medications":{url:"/api/recurring-medications?limit=50"},"api:pharmacy-orders":{url:"/api/pharmacy/orders?limit=50",dataKey:"orders"},"api:lab-orders":{url:"/api/lab/orders?limit=50",dataKey:"orders"},"api:lab-tests":{url:"/api/lab/tests?limit=50",dataKey:"tests"},"api:queue":{url:"/api/queue?limit=50",dataKey:"queue"},"api:bills":{url:"/api/bills?limit=100",dataKey:"bills"}};if(W[H])q=W[H].url;else if(H.startsWith("join:"))q=`/api/dashboards/joined-data?join=${H.split(":")[1]}&limit=50`;else if(H.startsWith("dynamic:")){const G=H.split(":"),z=G[1],le=G[2],je=((B=(F=t.config)==null?void 0:F.primaryColumns)==null?void 0:B.join(","))||"",K=((L=($=t.config)==null?void 0:$.relatedColumns)==null?void 0:L.join(","))||"";q=`/api/dashboards/dynamic-join?primary=${z}&related=${le}&primaryCols=${je}&relatedCols=${K}&limit=50`}else H.startsWith("table:")?q=`/api/custom-tables/${H.split(":")[1]}/records?limit=50`:q=`/api/${H.replace("api:","")}?limit=50`;const ae=await ue(q);if(ae.ok){const G=await ae.json();Array.isArray(G)?X=G:(V=W[H])!=null&&V.dataKey&&G[W[H].dataKey]?X=G[W[H].dataKey]:G.data?X=G.data:X=Object.values(G).find(le=>Array.isArray(le))||[],o(X)}else throw new Error(`Failed to fetch data from ${H}`)}if(t.type==="table"&&n&&X.length>0){const W=(t.config.columns||[...new Set(X.flatMap(ae=>Object.keys(ae)))]).filter(ae=>X.some(G=>{const z=G[ae];return z!=null&&z!==""&&(Array.isArray(z)?z.length>0:!0)}));f(W)}else f(t.config.columns||[])}catch(H){v(H.message)}finally{y(!1)}};t.dataSource&&P()},[t.dataSource,t.config]),b.useEffect(()=>{var I;if(!s||!Array.isArray(s)){c(s);return}let P=[...s];if((I=t.config)!=null&&I.filters&&Array.isArray(t.config.filters)&&(P=P.filter(F=>t.config.filters.every(B=>{const $=F[B.field],L=B.value;switch(B.operator){case"equals":return $==L;case"neq":return $!=L;case"contains":return String($).toLowerCase().includes(String(L).toLowerCase());case"gt":return $>L;case"lt":return $<L;case"gte":return $>=L;case"lte":return $<=L;default:return!0}}))),S){const F=S.toLowerCase();P=P.filter(B=>Object.values(B).some($=>String($).toLowerCase().includes(F)))}c(P)},[s,t.config,S]);const C=P=>{P&&(a.prefetchQuery({queryKey:Ut.patients.context(P),queryFn:async()=>{const I=await ue(`/api/patients/${P}/context`);if(!I.ok)throw new Error("Failed to fetch patient context");return I.json()},staleTime:1e3*60*5}),a.prefetchQuery({queryKey:Ut.patientDebts.balance(P),queryFn:async()=>{const I=await ue(`/api/patient-debts/${P}/balance`);if(!I.ok)throw new Error("Failed to fetch patient debt");return I.json()},staleTime:1e3*60}),a.prefetchQuery({queryKey:Ut.queue.latest(P),queryFn:async()=>{const I=await ue(`/api/queue/patient/${P}/latest`);if(!I.ok){if(I.status===404)return null;throw new Error("Failed to fetch queue status")}return I.json()},staleTime:1e3*5}))},O=()=>{var I,F,B;if(p)return r.jsxs("div",{className:"widget-loading",children:[r.jsx(DX,{className:"spin"})," Loading..."]});if(x)return r.jsxs("div",{className:"widget-error",children:["Error: ",x]});const P=l||[];if(t.type==="stat"){const $=Array.isArray(P)?P.length:0;return r.jsxs("div",{className:"widget-stat",children:[r.jsx("div",{className:"stat-value",children:$}),r.jsx("div",{className:"stat-label",children:((I=t.config)==null?void 0:I.label)||"Total Records"})]})}if(t.type==="chart"){if(!Array.isArray(P)||P.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const{chartType:$="bar",xAxisKey:L="name",dataKey:V="value"}=t.config,H=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return r.jsx("div",{style:{width:"100%",height:350,minHeight:200},children:r.jsx(iw,{width:"100%",height:"100%",children:$==="line"?r.jsxs(CPe,{data:P,children:[r.jsx(pb,{strokeDasharray:"3 3"}),r.jsx($c,{dataKey:L}),r.jsx(Bc,{}),r.jsx(Aa,{}),r.jsx(Tc,{}),r.jsx(Hb,{type:"monotone",dataKey:V,stroke:"#8884d8",activeDot:{r:8}})]}):$==="pie"?r.jsxs(FH,{children:[r.jsx(Rl,{data:P,cx:"50%",cy:"50%",labelLine:!1,label:({name:te,percent:X})=>`${te} ${(X*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:V,nameKey:L,children:P.map((te,X)=>r.jsx(Fb,{fill:H[X%H.length]},`cell-${X}`))}),r.jsx(Aa,{})]}):r.jsxs(LH,{data:P,children:[r.jsx(pb,{strokeDasharray:"3 3"}),r.jsx($c,{dataKey:L}),r.jsx(Bc,{}),r.jsx(Aa,{}),r.jsx(Tc,{}),r.jsx(wd,{dataKey:V,fill:"#82ca9d"})]})})})}if(t.type==="table"){if(!Array.isArray(P)||P.length===0)return r.jsx("div",{className:"no-data",children:"No data"});const L=(d.length>0?d:((F=t.config)==null?void 0:F.columns)||(P[0]?Object.keys(P[0]).slice(0,5):[])).map(X=>({key:X,label:X.replace(/_/g," ").replace(/\b\w/g,q=>q.toUpperCase()),editable:!1})),V=async X=>{try{const q=t.dataSource;if(q.startsWith("table:")){const W=q.split(":")[1];for(const ae of X)ae.id&&await ue(`/api/custom-tables/${W}/records/${ae.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:ae})})}else alert("Changes saved locally. Built-in table edits require specific API integration.")}catch(q){console.error("Error saving data:",q),alert("Failed to save changes")}};if(P.length<=10){const X=((B=t.config)==null?void 0:B.columns)||Object.keys(P[0]).filter(W=>!W.startsWith("_")&&W!=="id"),q=W=>{const ae=W.patient_id||W.patientId;ae&&i(`/dashboard/edit-complaint/patient/${ae}`)};return r.jsx("div",{className:"widget-detail-cards",children:P.map((W,ae)=>{const G=W.patient_id||W.patientId,z=!!G;return r.jsxs("div",{className:`detail-card ${z?"clickable":""}`,onClick:z?()=>q(W):void 0,onMouseEnter:()=>z&&C(G),style:z?{cursor:"pointer"}:void 0,children:[r.jsxs("div",{className:"detail-card-header",children:[r.jsx("span",{className:"detail-card-title",children:W.name||W.patient_name||W.title||W.brand_name||`Record ${ae+1}`}),W.token&&r.jsxs("span",{className:"detail-card-badge",children:["Token #",W.token]}),W.status&&r.jsx("span",{className:`detail-card-status status-${W.status.toLowerCase()}`,children:W.status})]}),r.jsx("div",{className:"detail-card-fields",children:X.map(le=>{const je=W[le];if(je==null||je===""||le==="name"||le==="title")return null;const K=le.replace(/_/g," ").replace(/\b\w/g,Ye=>Ye.toUpperCase()),Oe=typeof je=="object"?JSON.stringify(je):String(je);return r.jsxs("div",{className:"detail-field",children:[r.jsx("span",{className:"detail-field-label",children:K}),r.jsx("span",{className:"detail-field-value",children:Oe})]},le)})})]},W.id||ae)})})}const H=X=>{const q=X.patient_id||X.patientId;q&&i(`/dashboard/edit-complaint/patient/${q}`)},te=X=>{const q=X.patient_id||X.patientId;q&&C(q)};return r.jsxs("div",{className:"widget-table-container",children:[r.jsxs("div",{className:"widget-table-search",children:[r.jsx(Hn,{size:14}),r.jsx("input",{type:"text",placeholder:"Search...",value:S,onChange:X=>N(X.target.value)})]}),r.jsx(Ib,{columns:L,data:P,editable:!0,showRowNumbers:!0,title:"",onSave:V,onRowClick:H,onRowHover:te})]})}return r.jsx("div",{children:"Unsupported widget type"})},k=r.jsxs("div",{className:`dashboard-widget ${e}`,children:[r.jsxs("div",{className:"widget-header",children:[r.jsx("h3",{children:t.title}),r.jsx("button",{className:"widget-expand-btn",onClick:()=>T(!0),title:"Expand",children:r.jsx(Uz,{size:14})})]}),r.jsx("div",{className:"widget-content",children:O()})]});return r.jsxs(r.Fragment,{children:[k,_&&r.jsx("div",{className:"widget-modal-overlay",onClick:()=>T(!1),children:r.jsxs("div",{className:"widget-modal-content",onClick:P=>P.stopPropagation(),children:[r.jsxs("div",{className:"widget-modal-header",children:[r.jsx("h2",{children:t.title}),r.jsx("button",{onClick:()=>T(!1),className:"widget-modal-close",children:r.jsx(qt,{size:20})})]}),r.jsx("div",{className:"widget-modal-body",children:O()})]})})]})},kPe=({isOpen:t,onClose:e,title:n,widgets:i,onSave:a})=>{const[s,o]=b.useState(!1),[l,c]=b.useState(n),[d,f]=b.useState(""),[p,y]=b.useState(!1);if(!t)return null;const x=async()=>{if(!(!a||!l.trim())){y(!0);try{await a(l,d),o(!1),e()}catch(v){console.error("Failed to save dashboard:",v),alert("Failed to save dashboard")}finally{y(!1)}}};return r.jsx("div",{className:"temp-dash-overlay",onClick:e,children:r.jsxs("div",{className:"temp-dash-modal",onClick:v=>v.stopPropagation(),children:[r.jsxs("div",{className:"temp-dash-header",children:[r.jsxs("div",{className:"temp-dash-title-group",children:[r.jsx("div",{className:"temp-dash-icon",children:r.jsx(Xm,{size:16})}),r.jsxs("div",{className:"temp-dash-title-text",children:[r.jsx("h2",{children:n}),r.jsxs("span",{className:"temp-dash-ai-badge",children:[r.jsx(hw,{size:8})," AI Generated"]})]})]}),r.jsxs("div",{className:"temp-dash-actions",children:[a&&!s&&r.jsxs("button",{onClick:()=>o(!0),className:"temp-dash-save-btn",children:[r.jsx(Js,{size:12})," Save"]}),r.jsx("button",{onClick:e,className:"temp-dash-close-btn",children:r.jsx(qt,{size:16})})]})]}),s&&r.jsxs("div",{className:"temp-dash-save-form",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:l,onChange:v=>c(v.target.value),autoFocus:!0}),r.jsx("input",{type:"text",placeholder:"Description (optional)",value:d,onChange:v=>f(v.target.value)}),r.jsxs("div",{className:"temp-dash-save-actions",children:[r.jsx("button",{onClick:()=>o(!1),className:"temp-dash-cancel-btn",children:"Cancel"}),r.jsx("button",{onClick:x,className:"temp-dash-confirm-btn",disabled:p||!l.trim(),children:p?"Saving...":"Confirm"})]})]}),r.jsx("div",{className:"temp-dash-body",children:i.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets to display."}):r.jsx("div",{className:"temp-dash-grid",children:i.map((v,S)=>r.jsx(_M,{widget:v,isEditing:!1,autoHideEmptyColumns:!0},v.id||`widget-${S}`))})})]})})},sB=()=>OS(()=>import("./EditComplaintPage-Z9q76bN8.js"),__vite__mapDeps([0,1])),APe=()=>OS(()=>import("./AddPatientPage-DWDpizgC.js"),__vite__mapDeps([2,3])),Bj=[{name:"Dashboard",path:"/dashboard",icon:r.jsx(Xm,{size:16}),keywords:["home","main","analytics","stats"],roles:["all"]},{name:"Clinic Hub",path:"/dashboard/clinic-hub",icon:r.jsx(xc,{size:16}),keywords:["central","hub","overview"],roles:["admin","superadmin"]},{name:"Analysis Dashboard",path:"/dashboard/analysis",icon:r.jsx(xc,{size:16}),keywords:["reports","stats","finance","money"],roles:["admin","superadmin"]},{name:"Live AI Assistant",path:"/live-api",icon:r.jsx(kv,{size:16}),keywords:["ai","chat","voice","assistant"],roles:["all"]},{name:"Clinic Subscriptions",path:"/dashboard/clinic-subscriptions",icon:r.jsx(xc,{size:16}),keywords:["plans","billing","tenants"],roles:["superadmin"]},{name:"User Management",path:"/dashboard/users",icon:r.jsx(Eo,{size:16}),keywords:["admins","clinics","accounts"],roles:["superadmin"]},{name:"Patient Search",path:"/dashboard/search-patient",icon:r.jsx(Hn,{size:16}),keywords:["find","lookup","patient"],roles:["all"]},{name:"All Patients",path:"/dashboard/all-patients",icon:r.jsx(Eo,{size:16}),keywords:["list","records","database"],roles:["admin","receptionist","doctor"]},{name:"Add New Patient",path:"/dashboard/add-patient",icon:r.jsx(FS,{size:16}),keywords:["register","new","create","onboard"],roles:["admin","receptionist","doctor"]},{name:"Admissions",path:"/manage-admission",icon:r.jsx(EQ,{size:16}),keywords:["ipd","admit","discharge","rooms"],roles:["admin","doctor","receptionist"]},{name:"Appointment Queue",path:"/dashboard/reception",icon:r.jsx(Eo,{size:16}),keywords:["queue","reception","waiting","appointments"],roles:["admin","receptionist","superadmin"]},{name:"Doctor Queue",path:"/dashboard/queue",icon:r.jsx(xc,{size:16}),keywords:["waiting","patients","consultation"],roles:["admin","doctor","superadmin"]},{name:"Pharmacy Inventory",path:"/dashboard/inventory",icon:r.jsx(Nc,{size:16}),keywords:["drugs","medicine","stock","pharmacy"],roles:["admin","pharmacy"]},{name:"Pharmacy Queue",path:"/dashboard/pharmacy-queue",icon:r.jsx(Nc,{size:16}),keywords:["orders","billing","dispense"],roles:["admin","pharmacy","superadmin"]},{name:"Add New Drug",path:"/dashboard/inventory/add",icon:r.jsx(Nc,{size:16}),keywords:["create","medicine","stock"],roles:["admin","pharmacy"]},{name:"Add Pharmacy Order",path:"/dashboard/add-order",icon:r.jsx(vE,{size:16}),keywords:["sell","bill","dispense"],roles:["admin","pharmacy"]},{name:"Refill Reminders",path:"/refill-reminders",icon:r.jsx(gi,{size:16}),keywords:["recurring","sms","alert"],roles:["admin","pharmacy"]},{name:"Distributors",path:"/dashboard/distributors",icon:r.jsx(qO,{size:16}),keywords:["suppliers","vendors","stock"],roles:["admin","pharmacy"]},{name:"Purchase",path:"/dashboard/purchase",icon:r.jsx(vE,{size:16}),keywords:["buy","procurement","stock"],roles:["admin","pharmacy"]},{name:"Lab Panel",path:"/dashboard/lab",icon:r.jsx(rs,{size:16}),keywords:["billing","orders","queue"],roles:["admin","lab","superadmin"]},{name:"Create Lab Order",path:"/create-lab-order",icon:r.jsx(rs,{size:16}),keywords:["test","pathology","diagnostics"],roles:["admin","doctor","lab"]},{name:"Search Lab Reports",path:"/lab/search-report",icon:r.jsx(Hn,{size:16}),keywords:["results","history","find"],roles:["admin","doctor","lab"]},{name:"Lab Inventory",path:"/lab-inventory",icon:r.jsx(rs,{size:16}),keywords:["reagents","tests","stock"],roles:["admin","lab"]},{name:"Dental",path:"/dashboard/dental",icon:r.jsx(xc,{size:16}),keywords:["teeth","dentist","chart","odontogram"],roles:["admin","doctor","superadmin"]},{name:"Create Custom Bill",path:"/create-custom-bill",icon:r.jsx(la,{size:16}),keywords:["invoice","custom","charge"],roles:["admin","receptionist"]},{name:"Billing History",path:"/billing",icon:r.jsx(BO,{size:16}),keywords:["transactions","payments","history"],roles:["admin"]},{name:"Custom Tables",path:"/custom-tables",icon:r.jsx(la,{size:16}),keywords:["database","sheets","custom data"],roles:["admin","superadmin"]},{name:"Custom Dashboards",path:"/dashboards",icon:r.jsx(Xm,{size:16}),keywords:["charts","reports","analytics"],roles:["admin","doctor","superadmin"]},{name:"Staff Management",path:"/dashboard/staff",icon:r.jsx(Zm,{size:16}),keywords:["users","employees","roles","admin"],roles:["admin","superadmin"]},{name:"Role Management",path:"/dashboard/roles",icon:r.jsx(Zm,{size:16}),keywords:["roles","permissions","access","custom roles"],roles:["admin","superadmin"]}],oB=[{icon:"",text:"Update Paracetamol stock to 100",roles:["admin","pharmacy"]},{icon:"",text:"Change CBC Test price to 350",roles:["admin","lab","superadmin"]},{icon:"",text:"Set Voice AI language to Hindi",roles:["all"]},{icon:"",text:"Show revenue for last month",roles:["admin","superadmin"]},{icon:"",text:"Purchase 50 strips of Aspirin",roles:["admin","pharmacy"]},{icon:"",text:"Update consultation fee to 500",roles:["admin","superadmin"]},{icon:"",text:"Add new staff member",roles:["admin","superadmin"]},{icon:"",text:"Register: John Doe, 25M, Fever",roles:["all"]},{icon:"",text:"Check Metformin availability",roles:["admin","pharmacy","doctor"]}],EPe=({user:t})=>{const{isOpen:e,closeCommandBar:n}=Pc(),i=Mt(),a=Vr(),s=b.useRef(null),[o,l]=b.useState(""),[c,d]=b.useState([]),[f,p]=b.useState([]),[y,x]=b.useState([]),[v,S]=b.useState(!1),[N,_]=b.useState(!0),[T,C]=b.useState(!0),{customColumnsConfig:O}=tN(),k=(O==null?void 0:O.patients)||[],[P,I]=b.useState(null),[F,B]=b.useState(!1),$=as(),{chatHistory:L,isProcessing:V,handleSendMessage:H,setChatQuery:te,refreshChat:X,selectedImage:q,handleImageSelect:W,clearImage:ae,temporaryDashboard:G,closeTemporaryDashboard:z,saveTemporaryDashboard:le}=cD({settings:{},staffList:[],enableDynamicContext:!1}),je=qe=>{qe&&($.prefetchQuery({queryKey:Ut.patients.context(qe),queryFn:async()=>{const jt=await ue(`/api/patients/${qe}/context`);if(!jt.ok)throw new Error("Failed to fetch patient context");return jt.json()},staleTime:5*60*1e3}),$.prefetchQuery({queryKey:Ut.patientDebts.balance(qe),queryFn:async()=>{const jt=await ue(`/api/patient-debts/${qe}/balance`);return jt.ok?jt.json():{netDebt:0}},staleTime:1*60*1e3}),$.prefetchQuery({queryKey:Ut.queue.latest(qe),queryFn:async()=>{const jt=await ue(`/api/queue/patient/${qe}/latest`);if(!jt.ok)throw new Error("Failed to fetch latest queue status");const Ct=await jt.json();return Ct!=null&&Ct._id&&$.prefetchQuery({queryKey:Ut.queue.entry(Ct._id),queryFn:async()=>{const Kn=await ue(`/api/queue/doctor/complaint/${Ct._id}`);if(!Kn.ok)throw new Error("Failed to fetch complaint record");return Kn.json()},staleTime:1*60*1e3}),Ct},staleTime:5e3}),$.prefetchQuery({queryKey:Ut.dental.records(qe),queryFn:async()=>{const jt=await ue(`/api/dental/patient/${qe}`);if(!jt.ok)throw new Error("Failed to fetch dental records");return jt.json()},staleTime:5*60*1e3}))},K=b.useMemo(()=>t?Bj.filter(qe=>qe.roles.includes("all")||t.role&&qe.roles.includes(t.role)):Bj,[t]),Oe=b.useMemo(()=>t?oB.filter(qe=>qe.roles.includes("all")||t.role&&qe.roles.includes(t.role)):oB,[t]),Ye=b.useMemo(()=>new eo(K,{keys:["name","keywords"],threshold:.3}),[K]),[Me,Ie]=b.useState(!1),[be,re]=b.useState(!1),[ve,ce]=b.useState(!1);b.useEffect(()=>{if(e)Ie(!0),ce(!1);else{ce(!0);const qe=setTimeout(()=>{Ie(!1),ce(!1),X()},200);return()=>clearTimeout(qe)}},[e,X]);const{setPageContext:fe}=IS();b.useEffect(()=>{if(e){const qe=a.pathname,jt=Bj.find(Ct=>Ct.path===qe)||Bj.find(Ct=>qe.startsWith(Ct.path)&&Ct.path!=="/dashboard");fe(jt?{name:jt.name,path:qe,data:{role:jt.roles}}:{name:"Current Page",path:qe})}},[e,a.pathname,fe]);const se=b.useRef(null),Q=qe=>{var Ct;const jt=(Ct=qe.target.files)==null?void 0:Ct[0];jt&&W(jt)},[ie,ge]=b.useState({x:0,y:0}),[ee,we]=b.useState(!1),Ue=b.useRef({x:0,y:0}),Ge=b.useRef({x:0,y:0}),Le=b.useRef(!1),oe=b.useRef(null);b.useEffect(()=>{const qe=Ct=>{if(!ee)return;Le.current=!0;const Kn=Ct.clientX-Ue.current.x,br=Ct.clientY-Ue.current.y;let zn=Ge.current.x+Kn,_n=Ge.current.y+br;if(oe.current){const wn=oe.current.offsetWidth,oi=oe.current.offsetHeight,qn=(window.innerWidth-wn)/2,qi=(window.innerHeight-oi)/2,Ll=Math.max(0,qn),Fo=Math.max(0,qi);zn=Math.max(-Ll,Math.min(Ll,zn)),_n=Math.max(-Fo,Math.min(Fo,_n))}ge({x:zn,y:_n})},jt=()=>{we(!1)};return ee&&(window.addEventListener("mousemove",qe),window.addEventListener("mouseup",jt)),()=>{window.removeEventListener("mousemove",qe),window.removeEventListener("mouseup",jt)}},[ee]),b.useEffect(()=>{a.pathname==="/dashboard"&&(l(""),p([]),x([])),e&&(a.pathname==="/dashboard"?B(!1):B(!0))},[a.pathname]),b.useEffect(()=>{(f.length>0||y.length>0)&&F&&B(!1)},[f,y]),b.useEffect(()=>{if(e&&window.innerWidth<=768){window.history.pushState({commandBarOpen:!0},"");const qe=jt=>{jt.preventDefault(),B(!0)};return window.addEventListener("popstate",qe),()=>{window.removeEventListener("popstate",qe)}}},[e]),b.useEffect(()=>{F||ge({x:0,y:0})},[F]),b.useEffect(()=>{te(o)},[o]),b.useEffect(()=>{e&&!F&&s.current&&setTimeout(()=>{if(s.current){s.current.focus();const qe=s.current.value.length;qe>0&&s.current.setSelectionRange(qe,qe)}},50)},[e,F]),b.useEffect(()=>{if(!e||F||!(window.innerWidth<=768))return;const jt=window.scrollY,Ct=document.body.style.overflow,Kn=document.documentElement.style.overflow,br=document.body.style.position,zn=document.body.style.top,_n=document.body.style.width;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${jt}px`,document.body.style.width="100%",()=>{document.documentElement.style.overflow=Kn,document.body.style.overflow=Ct,document.body.style.position=br,document.body.style.top=zn,document.body.style.width=_n,window.scrollTo(0,jt)}},[e,F]);const _e=qe=>{!qe.trim()&&!q||(B(!1),H(qe),l(""),p([]),x([]))},{preFilledQuery:$e,setPreFilledQuery:ze}=Pc();b.useEffect(()=>{e&&$e&&(l($e),setTimeout(()=>{_e($e),ze("")},300))},[e,$e,ze]),b.useEffect(()=>{P&&(l(P),re(!1),setTimeout(()=>_e(P),50),I(null))},[P]);const Y=()=>{re(!0)},ye=()=>{l(""),p([]),x([]),X(),s.current&&s.current.focus()};b.useEffect(()=>{e&&(async()=>{_(!0);try{const jt=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),Ct=await ue(`/api/patients?${jt.toString()}`);if(Ct.ok){const Kn=await Ct.json();d(Kn.patients||[])}}catch(jt){console.error("Error fetching recent patients:",jt)}finally{_(!1)}})()},[e]);const pe=b.useMemo(()=>ud(async qe=>{const jt=qe.trim(),Ct=/^\d+$/.test(jt),Kn=jt.split(/\s+/).length;if(jt.length>1){const br=Ye.search(jt);x(br.map(zn=>zn.item))}else x([]);if(jt.length<2||Ct&&jt.length>10||!Ct&&Kn>3){p([]),S(!1);return}S(!0);try{const br=new URLSearchParams({search:encodeURIComponent(qe),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),zn=await ue(`/api/patients?${br.toString()}`);if(zn.ok){const _n=await zn.json();p(_n.patients||[])}}catch(br){console.error("Search error:",br)}finally{S(!1),sB()}},300),[t]),me=qe=>{const jt=qe.target.value;l(jt),pe(jt)},Ne=qe=>{qe.id&&i(`/dashboard/edit-complaint/patient/${qe.id}`)},Be=qe=>{i(qe.path)},Ee=qe=>{qe.path==="/dashboard/add-patient"&&APe()},Ke=qe=>{l(qe),setTimeout(()=>_e(qe),50)},rt=async()=>{if(o.trim()){S(!0);try{const qe=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.trim(),age:null,gender:null,phone:null})});if(!qe.ok){const br=await qe.json();throw new Error(br.message||"Failed to create patient")}const jt=await qe.json();let Ct=null;const Kn=await ue("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:jt.id,complaint:"Walk-in (Quick Create)"})});if(Kn.ok&&(Ct=(await Kn.json()).id),Ct)i(`/dashboard/edit-complaint/${Ct}`);else{const br=await ue(`/api/queue/patient/${jt.id}/latest`);if(br.ok){const zn=await br.json();zn&&zn._id&&i(`/dashboard/edit-complaint/${zn._id}`)}}n()}catch(qe){console.error("Failed to create patient:",qe),alert("Failed to create patient. Please try again.")}finally{S(!1)}}},mt=qe=>{o.trim()&&_e(o)},Pe=qe=>{qe.key==="Enter"&&!qe.shiftKey&&(qe.preventDefault(),mt())},Je=qe=>{qe.target===qe.currentTarget&&n()};if(!e&&!Me)return null;const et=o.trim().length>0||(f.length>0||y.length>0)&&!v,ut=o.length===0&&f.length===0&&y.length===0,_t=o.length>=3&&f.length===0&&y.length===0&&!v,vt=L.length>0||V,Ce=!vt||et,lt=vt&&et,Tt=vt&&!T&&!F&&!et;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${Ot.overlay} ${F?Ot.overlayMinimized:""} ${ve?Ot.exiting:""}`,onClick:Je,children:r.jsxs("div",{ref:oe,className:`${Ot.modal} ${F?Ot.minimized:""} ${Tt?Ot.collapsed:""} ${ve?Ot.exiting:""}`,style:{transform:`translate(${ie.x}px, ${ie.y}px)`,height:Tt?"auto":void 0},onClick:()=>{Le.current||(F?B(!1):Tt&&C(!0))},children:[r.jsxs("div",{className:Ot.dragBar,onMouseDown:qe=>{qe.target.closest("button")||(we(!0),Le.current=!1,Ue.current={x:qe.clientX,y:qe.clientY},Ge.current={x:ie.x,y:ie.y})},children:[r.jsxs("div",{className:Ot.dragBarControls,children:[r.jsx("button",{className:Ot.windowControlBtn,onClick:n,title:"Close",children:r.jsx(qt,{size:24,color:"#64748b"})}),r.jsx("button",{className:Ot.windowControlBtn,onClick:()=>B(!F),title:F?"Maximize":"Minimize",children:F?r.jsx(Uz,{size:24,color:"#64748b"}):r.jsx(GX,{size:24,color:"#64748b"})})]}),r.jsx("div",{className:Ot.dragBarTitle,children:vt?r.jsxs(r.Fragment,{children:[r.jsx(kv,{size:14,className:"text-violet-600"}),r.jsx("span",{children:"AI Assistant"})]}):et?r.jsxs(r.Fragment,{children:[r.jsx(Hn,{size:14,className:"text-blue-500"}),r.jsx("span",{children:"Search Results"})]}):r.jsx("span",{style:{opacity:.5,fontWeight:500},children:"Clinic Manager AI"})}),r.jsx("div",{className:Ot.dragBarControlsRight,children:r.jsx("button",{className:Ot.newChatBtn,onClick:ye,title:"New Chat",children:r.jsx(Ia,{size:20})})})]}),r.jsxs("div",{className:Ot.contentWrapper,children:[vt&&r.jsx("div",{className:Ot.chatSectionFill,children:r.jsxs("div",{className:Ot.chatMessagesFill,children:[L.map((qe,jt)=>r.jsx("div",{className:`${Ot.chatBubble} ${qe.role==="user"?Ot.chatBubbleUser:qe.role==="model"?Ot.chatBubbleModel:Ot.chatBubbleSystem}`,children:qe.role==="model"?r.jsx(vf,{remarkPlugins:[bf],children:qe.text}):qe.text},jt)),V&&r.jsxs("div",{className:Ot.processing,children:[r.jsx(Dc,{size:14,className:Ot.spinner}),"Thinking..."]})]})}),Ce&&r.jsxs("div",{className:lt?Ot.overlayContent:Ot.content,children:[ut&&!vt&&r.jsxs("div",{className:Ot.section,children:[r.jsx("div",{className:Ot.sectionTitle,children:"Newly Registered"}),r.jsx("div",{className:Ot.recentList,children:N?[1,2,3,4,5].map(qe=>r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}},qe)):c.length>0?c.map(qe=>r.jsxs("div",{className:Ot.recentPill,onClick:()=>Ne(qe),onMouseEnter:()=>je(qe.id),children:[r.jsx("span",{className:Ot.recentName,children:qe.name||"Patient"}),r.jsxs("span",{className:Ot.recentToken,children:["#",qe.token]}),r.jsxs("span",{className:Ot.recentInfo,children:[qe.age?`${qe.age}y`:""," ",qe.gender||""]})]},qe.id)):r.jsx("div",{className:Ot.recentInfo,style:{opacity:.5},children:"No recent patients found."})})]}),ut&&!vt&&r.jsxs("div",{className:Ot.section,children:[r.jsx("div",{className:Ot.sectionTitle,children:"Try Asking AI..."}),r.jsx("div",{className:Ot.examplesGrid,children:Oe.map((qe,jt)=>r.jsxs("div",{className:Ot.exampleCard,onClick:()=>Ke(qe.text),children:[r.jsx("span",{className:Ot.exampleIcon,children:qe.icon}),r.jsx("span",{className:Ot.exampleText,children:qe.text})]},jt))})]}),v&&r.jsx("div",{className:Ot.section,children:r.jsxs("div",{className:Ot.processing,children:[r.jsx(Dc,{size:16,className:Ot.spinner}),"Searching..."]})}),y.length>0&&!v&&r.jsxs("div",{className:Ot.section,children:[r.jsx("div",{className:Ot.sectionTitle,children:"Pages Found"}),r.jsx("div",{className:Ot.resultsList,children:y.map((qe,jt)=>r.jsxs("div",{className:Ot.resultItem,onClick:()=>Be(qe),onMouseEnter:()=>Ee(qe),children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{color:"#7c3aed"},children:qe.icon}),r.jsx("span",{className:Ot.resultName,children:qe.name})]}),r.jsx("span",{className:Ot.resultDetails,style:{fontSize:"0.7rem"},children:"Jump to page"})]},jt))})]}),et&&r.jsxs("div",{className:Ot.section,children:[r.jsx("div",{className:Ot.sectionTitle,children:"Patients Found"}),r.jsxs("div",{className:Ot.resultsList,children:[o.trim().length>0&&r.jsx("div",{className:Ot.resultItem,onClick:rt,style:{border:"1px dashed #6366f1",backgroundColor:"#f5f3ff"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#8b5cf6",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(FS,{size:16})}),r.jsxs("div",{children:[r.jsxs("span",{className:Ot.resultName,style:{color:"#7c3aed"},children:['Create "',o,'"']}),r.jsx("div",{className:"text-xs text-violet-600 mt-0.5",children:"Add new patient"})]})]})}),f.map(qe=>r.jsxs("div",{className:Ot.resultItem,onClick:()=>Ne(qe),onMouseEnter:()=>{sB(),je(qe.id)},children:[r.jsxs("div",{children:[r.jsxs("span",{className:Ot.resultToken,children:["[#",qe.token,"]"]}),r.jsx("span",{className:Ot.resultName,children:qe.name})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[qe.age&&r.jsxs("span",{children:[qe.age," Yrs"]}),qe.gender&&r.jsx("span",{children:qe.gender}),r.jsxs("span",{children:["ID: ",qe.id.slice(-6).toUpperCase()]}),k.map(jt=>{var Kn;const Ct=(Kn=qe.custom_fields)==null?void 0:Kn[jt.key];return Ct?r.jsxs("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 border border-slate-200",children:[jt.label,": ",String(Ct)]},jt.key):null})]})]},qe.id))]})]}),_t&&!vt&&r.jsx("div",{className:Ot.section,children:r.jsxs("div",{className:Ot.noResults,children:["Press ",r.jsx("strong",{children:"Enter"}),' to send "',o,'" to AI Assistant']})})]})]}),r.jsxs("div",{className:Ot.header,children:[r.jsx("div",{className:Ot.inputWrapper,children:r.jsxs("div",{className:Ot.inputContainer,children:[r.jsx("div",{className:Ot.minimizedSearchIcon,children:r.jsx(Hn,{size:24})}),r.jsx("textarea",{ref:qe=>{s.current=qe,qe&&(qe.style.height="auto",qe.style.height=Math.min(qe.scrollHeight,150)+"px")},className:Ot.input,placeholder:F?"Type here...":"Search (Name/Token/Phone), Ask AI, or Enter New Case (Name Age Sex Complaint)...",value:o,onChange:qe=>{me(qe),qe.target.style.height="auto",qe.target.style.height=Math.min(qe.target.scrollHeight,150)+"px"},onKeyDown:Pe,onFocus:qe=>{qe.target.scrollIntoView=()=>{},setTimeout(()=>{oe.current&&(oe.current.scrollTop=oe.current.scrollHeight)},100)},rows:1,disabled:V}),q&&r.jsxs("div",{style:{position:"relative",marginRight:"0.5rem"},children:[r.jsx("img",{src:q,alt:"Selected",style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"4px",border:"1px solid #e2e8f0"}}),r.jsx("button",{onClick:ae,style:{position:"absolute",top:-4,right:-4,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",padding:"1px",cursor:"pointer",display:"flex"},children:r.jsx(qt,{size:8})})]}),r.jsxs("div",{className:Ot.controlsGroup,children:[r.jsx("button",{className:Ot.iconButton,onClick:()=>{var qe;return(qe=se.current)==null?void 0:qe.click()},title:"Attach Image",children:r.jsx(zO,{size:16})}),(o.trim().length>0||q)&&r.jsx("button",{className:`${Ot.iconButton} ${Ot.sendButton}`,onClick:()=>_e(o),title:"Send to AI",children:r.jsx(LS,{size:16})}),r.jsx("button",{className:Ot.iconButton,onClick:Y,title:"Voice Input",children:r.jsx(RS,{size:16})})]})]})}),r.jsx("input",{type:"file",ref:se,onChange:Q,accept:"image/*",style:{display:"none"}})]})]})}),be&&r.jsx(eN,{onClose:()=>re(!1),patientData:null,tokenNumber:null,onAiSummaryChange:qe=>{console.log("AI Summary:",qe),I(qe)}}),G&&r.jsx(kPe,{isOpen:!!G,onClose:z,title:G.title,widgets:G.widgets,onSave:le})]})};var $H={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lB=Se.createContext&&Se.createContext($H),PPe=["attr","size","title"];function OPe(t,e){if(t==null)return{};var n=DPe(t,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function DPe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function TS(){return TS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},TS.apply(this,arguments)}function cB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function kS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(n),!0).forEach(function(i){MPe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function MPe(t,e,n){return e=IPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IPe(t){var e=RPe(t,"string");return typeof e=="symbol"?e:e+""}function RPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BH(t){return t&&t.map((e,n)=>Se.createElement(e.tag,kS({key:n},e.attr),BH(e.child)))}function Ra(t){return e=>Se.createElement(LPe,TS({attr:kS({},t.attr)},e),BH(t.child))}function LPe(t){var e=n=>{var{attr:i,size:a,title:s}=t,o=OPe(t,PPe),l=a||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Se.createElement("svg",TS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:c,style:kS(kS({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Se.createElement("title",null,s),t.children)};return lB!==void 0?Se.createElement(lB.Consumer,null,n=>e(n)):e($H)}function FPe(t){return Ra({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(t)}function uB(t){return Ra({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function rv(t){return Ra({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function dB(t){return Ra({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function DA(t){return Ra({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(t)}function Uh(t){return Ra({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function zj(t){return Ra({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(t)}function bm(t){return Ra({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(t)}function iv(t){return Ra({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(t)}function _m(t){return Ra({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function zH(t){return Ra({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function hB(t){return Ra({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function $Pe(t){return Ra({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function qj(t){return Ra({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(t)}function jm(t){return Ra({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const qH={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:Uh},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:zj},{path:"/dashboard/users",name:"User Management",icon:jm}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:Uh}]},{title:"Clinic Management",links:[{path:"/dashboard/clinic-hub",name:"Clinic Hub",icon:dB},{path:"/dashboard/staff",name:"Staff Management",icon:jm},{path:"/dashboard/roles",name:"Role Management",icon:qj},{path:"/custom-tables",name:"Custom Tables",icon:rv},{path:"/dashboards",name:"Custom Dashboards",icon:uB}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:zj},{path:"/dashboard/patients",name:"All Patients",icon:jm},{path:"/dashboard/patients/search",name:"Search Patient",icon:_m},{path:"/dashboard/files",name:"Patient Files",icon:rv}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:rv},{path:"/dashboard/inventory",name:"Inventory Management",icon:iv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:iv},{path:"/dashboard/distributors",name:"Distributor Management",icon:jm}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:hB},{path:"/dashboard/reception",name:"Appointment Queue",icon:Uh},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:bm},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:bm}]},{title:"Role Operations",links:[{path:"/manage-admission",name:"Admission Desk",icon:qj},{path:"/dashboard/pharmacy-queue",name:"Pharmacy Queue",icon:iv},{path:"/dashboard/lab",name:"Lab Panel",icon:DA},{path:"/billing",name:"Billing",icon:bm},{path:"/create-custom-bill",name:"Custom Bill",icon:bm}]},{title:"Help & Support",links:[{path:"/dashboard/guide",name:"User Guide",icon:FPe}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search-patient",name:"Patient Search",icon:_m},{path:"/dashboard/add-patient",name:"Add Patient",icon:zj},{path:"/manage-admission",name:"Manage Admission",icon:qj}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:DA},{path:"/billing",name:"Billing",icon:bm}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:hB}]},{title:"Analytics",links:[{path:"/dashboards",name:"Custom Dashboards",icon:uB}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Appointment Queue",icon:Uh}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:jm},{path:"/dashboard/add-patient",name:"Add Patient",icon:zj},{path:"/dashboard/search-patient",name:"Search Patient",icon:_m}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:bm},{path:"/manage-admission",name:"Manage Admission",icon:qj}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:Uh},{path:"/lab-inventory",name:"Lab Test Inventory",icon:DA},{path:"/lab/search-report",name:"Search Lab Report",icon:_m}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:Uh},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:iv},{path:"/dashboard/inventory/add",name:"Add Drug",icon:iv},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:rv},{path:"/dashboard/distributors",name:"Distributor Management",icon:jm}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:rv},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:dB},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:_m}]}]},CM=async()=>{const t=await ue("/api/clinic-subscriptions/plans",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription plans")}return t.json()},BPe=async t=>{const e=await ue(`/api/clinic-subscriptions/cancel/${t}`,{method:"PUT"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to cancel clinic subscription")}return e.json()},zPe=async t=>{const e=await ue(`/api/clinics/${t}/subscription-status`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||`Failed to fetch subscription status for clinic ${t}`)}return e.json()},qPe=async t=>{const e=await ue(`/api/clinic-subscriptions/plans/${t}`,{method:"GET"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to fetch clinic subscription plan")}return e.json()},UPe=async t=>{const e=await ue("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to create clinic subscription plan")}return e.json()},VPe=async(t,e)=>{const n=await ue(`/api/clinic-subscriptions/plans/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const i=await n.json();throw new Error(i.message||"Failed to update clinic subscription plan")}return n.json()},HPe=async t=>{const e=await ue(`/api/clinic-subscriptions/plans/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to deactivate clinic subscription plan")}return e.json()},GPe=async t=>{const e=await ue("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to initiate clinic subscription")}return e.json()},WPe=async()=>{try{const t=await ue("/api/clinic-subscriptions/pending",{method:"GET"});return t.ok?t.json():null}catch(t){return console.error("Error checking for pending subscription:",t),null}},YPe=async()=>{const t=await ue("/api/clinics/subscription-status",{method:"GET"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch clinic subscription status")}return t.json()};function KPe(t=!0){return PS({queryKey:Ut.clinicSubscription,queryFn:YPe,enabled:t,staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!0})}const QPe="_container_c9bhr_3",XPe="_header_c9bhr_21",JPe="_titleGroup_c9bhr_41",ZPe="_title_c9bhr_41",eOe="_closeButton_c9bhr_59",tOe="_messageList_c9bhr_79",nOe="_emptyState_c9bhr_108",rOe="_emptyStateIcon_c9bhr_119",iOe="_exampleContainer_c9bhr_145",aOe="_exampleChip_c9bhr_153",sOe="_messageRow_c9bhr_176",oOe="_messageRowUser_c9bhr_194",lOe="_messageRowModel_c9bhr_198",cOe="_messageRowSystem_c9bhr_202",uOe="_bubble_c9bhr_208",dOe="_bubbleUser_c9bhr_224",hOe="_bubbleModel_c9bhr_234",fOe="_bubbleSystem_c9bhr_247",pOe="_processingIndicator_c9bhr_330",mOe="_spin_c9bhr_343",gOe="_inputArea_c9bhr_358",yOe="_imagePreviewContainer_c9bhr_365",xOe="_inputContainer_c9bhr_376",vOe="_inputField_c9bhr_393",bOe="_sendButton_c9bhr_407",lr={container:QPe,header:XPe,titleGroup:JPe,title:ZPe,closeButton:eOe,messageList:tOe,emptyState:nOe,emptyStateIcon:rOe,exampleContainer:iOe,exampleChip:aOe,messageRow:sOe,messageRowUser:oOe,messageRowModel:lOe,messageRowSystem:cOe,bubble:uOe,bubbleUser:dOe,bubbleModel:hOe,bubbleSystem:fOe,processingIndicator:pOe,spin:mOe,inputArea:gOe,imagePreviewContainer:yOe,inputContainer:xOe,inputField:vOe,sendButton:bOe},UH=({onClose:t,settings:e,staffList:n,onSettingsUpdate:i,onStaffUpdate:a,onHighlight:s})=>{const{chatQuery:o,setChatQuery:l,chatHistory:c,isProcessing:d,handleSendMessage:f,refreshChat:p,stopGeneration:y,selectedImage:x,handleImageSelect:v,clearImage:S}=cD({settings:e,staffList:n,onSettingsUpdate:i,onStaffUpdate:a,onHighlight:s}),N=b.useRef(null),_=b.useRef(null),T=()=>{var P;(P=N.current)==null||P.scrollIntoView({behavior:"smooth"})};b.useEffect(()=>{T()},[c,d]);const C=P=>{var F;const I=(F=P.target.files)==null?void 0:F[0];I&&v(I)},O=["Check Paracetamol stock","Go to Pharmacy","Analysis for last month","Add nurse Sarah"],k=P=>{l(P)};return r.jsxs("div",{className:lr.container,children:[r.jsxs("header",{className:lr.header,children:[r.jsxs("div",{className:lr.titleGroup,children:[r.jsx(kv,{size:20,className:"text-violet-600"}),r.jsx("h3",{className:lr.title,children:"Clinic Assistant"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:p,className:lr.closeButton,title:"Refresh Chat",children:r.jsx(Hz,{size:18})}),r.jsx("button",{onClick:t,className:lr.closeButton,title:"Close",children:r.jsx(qt,{size:20})})]})]}),r.jsxs("div",{className:lr.messageList,children:[c.length===0&&r.jsxs("div",{className:lr.emptyState,children:[r.jsx(kv,{size:48,className:lr.emptyStateIcon}),r.jsx("p",{children:"How can I help you manage the clinic today?"}),r.jsx("div",{className:lr.exampleContainer,children:O.map((P,I)=>r.jsx("button",{className:lr.exampleChip,onClick:()=>k(P),children:P},I))})]}),c.map((P,I)=>r.jsx("div",{className:`${lr.messageRow} ${P.role==="user"?lr.messageRowUser:P.role==="model"?lr.messageRowModel:lr.messageRowSystem}`,children:r.jsx("div",{className:`${lr.bubble} ${P.role==="user"?lr.bubbleUser:P.role==="model"?lr.bubbleModel:lr.bubbleSystem}`,children:P.role==="user"||P.role==="system"?P.text:r.jsx(vf,{remarkPlugins:[bf],children:P.text})})},I)),d&&r.jsx("div",{className:`${lr.messageRow} ${lr.messageRowModel}`,children:r.jsxs("div",{className:lr.processingIndicator,children:[r.jsx(Dc,{size:14,className:lr.spin}),"Thinking..."]})}),r.jsx("div",{ref:N})]}),r.jsxs("div",{className:lr.inputArea,children:[x&&r.jsxs("div",{className:lr.imagePreviewContainer,style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",overflow:"hidden"},children:[r.jsx("img",{src:x,alt:"Selected",style:{width:"100%",height:"100%",objectFit:"cover"}}),r.jsx("button",{onClick:S,style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.5)",color:"white",border:"none",cursor:"pointer",padding:"1px"},children:r.jsx(qt,{size:12})})]}),r.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Image attached"})]}),r.jsxs("div",{className:lr.inputContainer,children:[r.jsx("input",{type:"file",ref:_,onChange:C,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:lr.sendButton,onClick:()=>{var P;return(P=_.current)==null?void 0:P.click()},disabled:d,title:"Attach Image",style:{marginRight:"0.5rem",color:"#6b7280"},children:r.jsx(zO,{size:18})}),r.jsx("input",{type:"text",className:lr.inputField,placeholder:"Type your request...",value:o,onChange:P=>l(P.target.value),onKeyDown:P=>P.key==="Enter"&&!d&&f(),disabled:d,autoFocus:!0}),d?r.jsx("button",{className:lr.sendButton,onClick:y,title:"Stop Generating",style:{color:"#ef4444"},children:r.jsx(MJ,{size:18,fill:"currentColor"})}):r.jsx("button",{className:lr.sendButton,onClick:()=>f(),disabled:!o.trim()&&!x,children:r.jsx(LS,{size:18})})]})]})]})};function Gc(t,e=100){const n=b.useRef(!1);b.useEffect(()=>{if(n.current)return;const i=setTimeout(()=>{const a=document,s=['input[type="text"]:not([disabled]):not([readonly])','input[type="search"]:not([disabled]):not([readonly])','input[type="email"]:not([disabled]):not([readonly])','input[type="tel"]:not([disabled]):not([readonly])','input[type="url"]:not([disabled]):not([readonly])',"input:not([type]):not([disabled]):not([readonly])"].join(", "),o=a.querySelectorAll(s),l=Array.from(o).filter(c=>{const d=window.getComputedStyle(c),f=c.getBoundingClientRect();return d.display!=="none"&&d.visibility!=="hidden"&&d.opacity!=="0"&&f.width>0&&f.height>0});if(l.length>0){const c=l[0];c.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{c.focus()},50),n.current=!0}},e);return()=>clearTimeout(i)},[t,e])}const jOe=({onLoginSuccess:t})=>{const[e,n]=b.useState(""),[i,a]=b.useState(""),[s,o]=b.useState(null),[l,c]=b.useState(!1),d=Mt();Gc();const f=async x=>{x.preventDefault(),c(!0),o(null);try{const v=await ue("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:i})});if(!v.ok){let N=`Login failed with status: ${v.status}`;try{N=(await v.json()).message||N}catch{try{const T=await v.text();T&&(N=`${N} - ${T}`)}catch{}}throw new Error(N)}const S=await v.json();console.log("Login successful:",S),localStorage.setItem("authToken",S.token),localStorage.setItem("currentUser",JSON.stringify(S.user)),S.user.clinic_id&&localStorage.setItem("currentClinicId",S.user.clinic_id),t(S.user),S.user.role==="doctor"?d("/dashboard/queue"):d("/dashboard")}catch(v){console.error("Login failed:",v),o(v.message||"Login failed. Please check your credentials.")}finally{c(!1)}},p=async x=>{c(!0),o(null);try{const v=await ue("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x.credential})});if(!v.ok)throw new Error("Google Sign-In failed");const S=await v.json();localStorage.setItem("authToken",S.token),localStorage.setItem("currentUser",JSON.stringify(S.user)),S.user.clinic_id&&localStorage.setItem("currentClinicId",S.user.clinic_id),t(S.user),S.user.role==="doctor"?d("/dashboard/queue"):d("/dashboard")}catch(v){console.error("Google Login Error:",v),o("Google Sign-In failed. Please try again.")}finally{c(!1)}},y=()=>{console.error("Google Login Failed"),o("Google Sign-In was unsuccessful. Please try again.")};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Newtons AI HMS"}),r.jsx("p",{className:"auth-subtitle",children:"Sign in to continue"}),r.jsxs("form",{onSubmit:f,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:x=>n(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"email",children:"Email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:x=>a(x.target.value),className:"auth-text-input",placeholder:" "}),r.jsx("label",{htmlFor:"password",children:"Password"})]}),s&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:s})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:l,className:"auth-submit-button",children:l?"Signing in...":"Sign In"})})]}),r.jsx("div",{className:"google-login-container",children:r.jsx(VW,{onSuccess:p,onError:y,useOneTap:!0})}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",r.jsx(Sr,{to:"/register",className:"auth-navigation-link",children:"Create account"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},wOe=()=>{const[t,e]=b.useState(""),[n,i]=b.useState(""),[a,s]=b.useState(""),[o,l]=b.useState(""),[c,d]=b.useState(null),[f,p]=b.useState(!1),y=Mt(),x=async v=>{v.preventDefault(),p(!0),d(null);try{const S=await ue("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:t,userName:n,userEmail:a,userPassword:o})}),N=await S.json();if(!S.ok)throw new Error(N.message||`HTTP error! status: ${S.status}`);console.log("Registration successful:",N),y("/login")}catch(S){console.error("Registration failed:",S),d(S.message||"Registration failed. Please try again.")}finally{p(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),r.jsxs("form",{onSubmit:x,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"}),r.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:t,onChange:v=>e(v.target.value),className:"auth-text-input",placeholder:"Your Clinic's Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"}),r.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:n,onChange:v=>i(v.target.value),className:"auth-text-input",placeholder:"Your Full Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userEmail",children:"Your Email (Admin Login)"}),r.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:a,onChange:v=>s(v.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userPassword",children:"Password"}),r.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:o,onChange:v=>l(v.target.value),className:"auth-text-input",placeholder:"Min. 6 characters"})]}),c&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:c})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:f,className:"auth-submit-button",children:f?"Registering...":"Register Clinic & Admin"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",r.jsx(Sr,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},SOe=({user:t,onLogout:e,userRole:n,isOpen:i,onClose:a})=>{const s=Vr(),[o,l]=b.useState(""),c=qH[n]||[],[d,f]=b.useState(500),p=b.useRef(!1),y=b.useCallback(N=>{p.current=!0,N.preventDefault()},[]),x=b.useCallback(()=>{p.current=!1},[]),v=b.useCallback(N=>{if(p.current){const _=window.innerWidth-N.clientX;_>250&&_<window.innerWidth*.8&&f(_)}},[]);b.useEffect(()=>(window.addEventListener("mousemove",v),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",x)}),[v,x]);const S=c.map(N=>({...N,links:N.links.filter(_=>_.name.toLowerCase().includes(o.toLowerCase()))})).filter(N=>N.links.length>0);return r.jsxs("div",{className:`side-panel ${i?"open":""}`,style:{width:`${d}px`,right:i?"0":`-${d}px`},children:[r.jsx("div",{className:"resizer",onMouseDown:y}),r.jsxs("div",{className:"side-panel-header",children:[r.jsx(Sr,{to:"/dashboard",className:"home-button",onClick:a,children:r.jsx(Uh,{})}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(_m,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),r.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:o,onChange:N=>l(N.target.value)})]}),r.jsx("button",{className:"close-button",onClick:a,children:""})]}),r.jsx("nav",{children:S.map((N,_)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:N.title}),r.jsx("ul",{className:"sub-page-list",children:N.links.map(T=>{const C=T.icon;return r.jsx("li",{children:r.jsxs(Sr,{to:T.path,className:s.pathname===T.path?"active":"",onClick:a,children:[C&&r.jsx(C,{})," ",T.name]})},T.path)})})]},_))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(zH,{})," Logout"]})]})]})},NOe=({user:t,onLogout:e,userRole:n,isOpen:i,onClose:a,roleNavigation:s})=>{const o=Vr(),l=s[n]||[];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mobile-side-panel-overlay ${i?"open":""}`,onClick:a}),r.jsxs("div",{className:`mobile-side-panel ${i?"open":""}`,children:[r.jsxs("div",{className:"mobile-side-panel-header",children:[r.jsx("h3",{children:"Menu"}),r.jsx("button",{className:"close-button",onClick:a,children:r.jsx($Pe,{})})]}),r.jsx("nav",{children:l.map((c,d)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:c.title}),r.jsx("ul",{className:"sub-page-list",children:c.links.map(f=>{const p=f.icon;return r.jsx("li",{children:r.jsxs(Sr,{to:f.path,className:o.pathname===f.path?"active":"",onClick:a,children:[p&&r.jsx(p,{})," ",f.name]})},f.path)})})]},d))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:e,className:"logout-button-sidebar",children:[r.jsx(zH,{})," Logout"]})]})]})]})},Bu={"/dashboard":{label:"Dashboard"},"/dashboard/staff":{label:"Staff Management",parent:"/dashboard"},"/dashboard/staff/add":{label:"Add Staff",parent:"/dashboard/staff"},"/dashboard/staff/edit":{label:"Edit Staff",parent:"/dashboard/staff"},"/dashboard/roles":{label:"Role Management",parent:"/dashboard"},"/dashboard/patients":{label:"All Patients",parent:"/dashboard"},"/dashboard/patients/add":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search-patient":{label:"Search Patient",parent:"/dashboard"},"/dashboard/clinic-hub":{label:"Clinic Hub",parent:"/dashboard"},"/dashboard/reception":{label:"Appointment Queue",parent:"/dashboard"},"/dashboard/pharmacy-queue":{label:"Pharmacy Queue",parent:"/dashboard"},"/dashboard/lab":{label:"Lab Panel",parent:"/dashboard"},"/dashboard/inventory":{label:"Inventory",parent:"/dashboard"},"/dashboard/inventory/add":{label:"Add Drug",parent:"/dashboard/inventory"},"/dashboard/inventory/edit":{label:"Edit Drug",parent:"/dashboard/inventory"},"/dashboard/purchase":{label:"Purchase",parent:"/dashboard"},"/dashboard/distributors":{label:"Distributors",parent:"/dashboard"},"/dashboard/patient-debts":{label:"Patient Debts",parent:"/dashboard"},"/dashboard/add-order":{label:"Add Pharmacy Order",parent:"/dashboard"},"/dashboard/edit-pharmacy-order":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/pharmacy-billing":{label:"Pharmacy Billing",parent:"/dashboard"},"/dashboard/analysis":{label:"Analysis",parent:"/dashboard"},"/dashboard/settings":{label:"Settings",parent:"/dashboard"},"/dashboard/search-patient-records":{label:"Search Records",parent:"/dashboard"},"/dashboard/queue":{label:"Queue",parent:"/dashboard"},"/dashboard/add-patient":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search":{label:"Patient Search",parent:"/dashboard"},"/dashboard/patients/search":{label:"Search Patient",parent:"/dashboard"},"/dashboard/subscriptions":{label:"Subscriptions",parent:"/dashboard"},"/dashboard/subscriptions/add":{label:"Add Plan",parent:"/dashboard/subscriptions"},"/dashboard/subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/subscriptions"},"/dashboard/clinic-subscriptions":{label:"Clinic Subscriptions",parent:"/dashboard"},"/dashboard/clinic-subscriptions/add":{label:"Add Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/clinic-subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/users":{label:"User Management",parent:"/dashboard"},"/dashboard/lab-billing":{label:"Lab Billing",parent:"/dashboard"},"/lab-inventory":{label:"Lab Inventory",parent:"/dashboard"},"/lab/search-report":{label:"Search Lab Report",parent:"/dashboard"},"/create-lab-order":{label:"Create Lab Order",parent:"/dashboard"},"/enter-lab-report":{label:"Enter Lab Report",parent:"/dashboard"},"/view-lab-report":{label:"View Lab Report",parent:"/dashboard"},"/lab/report/:id":{label:"Lab Report",parent:"/lab/search-report"},"/lab/enter-report/:id":{label:"Enter Report",parent:"/lab/search-report"},"/lab/view-report/:id":{label:"View Report",parent:"/lab/search-report"},"/billing":{label:"Billing",parent:"/dashboard"},"/dashboard/doctor-billing":{label:"Doctor Billing",parent:"/dashboard"},"/dashboard/doctor-billing/:id":{label:"Doctor Bill",parent:"/dashboard/doctor-billing"},"/create-custom-bill":{label:"Create Custom Bill",parent:"/dashboard"},"/patient":{label:"Patient",parent:"/dashboard"},"/patient/:id/admission-billing":{label:"Admission Billing",parent:"/manage-admission"},"/patient/:id/admission-bill":{label:"Admission Bill",parent:"/patient/:id/admission-billing"},"/patient/:id/lab-reports":{label:"Lab Reports",parent:"/patient"},"/patient/:id/pharmacy-orders":{label:"Pharmacy Orders",parent:"/patient"},"/patient/:id/complaints":{label:"Past Complaints",parent:"/patient"},"/edit-complaint":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/:id":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/patient/:id":{label:"New Complaint",parent:"/dashboard"},"/start-subscription":{label:"Start Subscription",parent:"/dashboard"},"/start-subscription/:id":{label:"Start Subscription",parent:"/dashboard"},"/manage-admission":{label:"Manage Admission",parent:"/dashboard"},"/dashboard/guide":{label:"User Guide",parent:"/dashboard"},"/custom-tables":{label:"Custom Tables",parent:"/dashboard"},"/custom-tables/:id":{label:"Table Records",parent:"/custom-tables"},"/dashboards":{label:"Dashboards",parent:"/dashboard"},"/dashboards/new":{label:"New Dashboard",parent:"/dashboards"},"/dashboards/:id":{label:"Dashboard View",parent:"/dashboards"},"/dashboards/:id/edit":{label:"Edit Dashboard",parent:"/dashboards"},"/dashboard/pharmacy-billing/:id":{label:"Pharmacy Bill",parent:"/dashboard/pharmacy-billing"},"/dashboard/lab-billing/:id":{label:"Lab Bill",parent:"/dashboard/lab-billing"},"/dashboard/edit-pharmacy-order/:id":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/orders/:id":{label:"Order Details",parent:"/dashboard/add-order"},"/refill-reminders":{label:"Refill Reminders",parent:"/dashboard"},"/start-clinic-subscription":{label:"Start Clinic Subscription",parent:"/dashboard"},"/dashboard/all-patients":{label:"All Patients",parent:"/dashboard"}},fB=t=>t.split("/").map(e=>{const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),i=/^\d+$/.test(e);return n||i?":id":e}).join("/"),_Oe=t=>{if(Bu[t])return Bu[t].label;const e=fB(t);if(Bu[e])return Bu[e].label;const n=t.split("/"),i=n[n.length-1],a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(i),s=/^\d+$/.test(i);if(a||s){const o=n.slice(0,-1).join("/"),l=fB(o);if(Bu[l])return Bu[l].label;if(Bu[o])return Bu[o].label}return i.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},COe=()=>{const t=Vr(),e=b.useMemo(()=>{const n=t.pathname.split("/").filter(s=>s!=="");if(n.length===0||n[0]==="login"||n[0]==="registration")return[];const i=[];let a="";return n.forEach((s,o)=>{if(a+=`/${s}`,o===0&&s==="dashboard")i.push({label:"Home",path:"/dashboard",isLast:o===n.length-1});else if(s!=="dashboard"){const l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s),c=/^\d+$/.test(s);let d=_Oe(a);(l||c)&&d.replace(/\s/g,"").toLowerCase()===s.replace(/[-_]/g,"").toLowerCase()&&(l?d=`#${s.substring(0,8)}`:c&&(d=`#${s}`)),i.push({label:d,path:a,isLast:o===n.length-1})}}),n[0]!=="dashboard"&&i.length>0&&i.unshift({label:"Home",path:"/dashboard",isLast:!1}),i},[t.pathname]);return e.length===0?null:r.jsx("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:r.jsx("ol",{className:"breadcrumb-list",children:e.map((n,i)=>r.jsxs("li",{className:"breadcrumb-item",children:[i>0&&r.jsx(dd,{className:"breadcrumb-separator",size:14}),n.isLast?r.jsxs("span",{className:"breadcrumb-current","aria-current":"page",children:[i===0&&r.jsx(yE,{size:14,className:"breadcrumb-home-icon"}),n.label]}):r.jsxs(Sr,{to:n.path,className:"breadcrumb-link",children:[i===0&&r.jsx(yE,{size:14,className:"breadcrumb-home-icon"}),n.label]})]},n.path))})})},TOe="_container_1ivr9_5",kOe="_visualContainer_1ivr9_33",AOe="_mobileDashboardGrid_1ivr9_49",EOe="_mobileDashboardItem_1ivr9_87",POe="_mobileDashboardIcon_1ivr9_195",OOe="_mobileDashboardLabel_1ivr9_233",DOe="_brandTitle_1ivr9_331",MOe="_searchBar_1ivr9_387",IOe="_searchIconWrapper_1ivr9_435",ROe="_searchIcon_1ivr9_435",LOe="_placeholderText_1ivr9_459",FOe="_shortcutHint_1ivr9_479",$Oe="_key_1ivr9_495",BOe="_plus_1ivr9_519",zOe="_micButtonWrapper_1ivr9_529",qOe="_micIcon_1ivr9_577",UOe="_newlyRegisteredSection_1ivr9_901",VOe="_recentList_1ivr9_917",HOe="_recentPatientPill_1ivr9_931",GOe="_recentNameContainer_1ivr9_957",WOe="_recentInfo_1ivr9_969",YOe="_newlyRegisteredLabel_1ivr9_1007",KOe="_recentName_1ivr9_957",QOe="_recentToken_1ivr9_1171",yr={container:TOe,visualContainer:kOe,mobileDashboardGrid:AOe,mobileDashboardItem:EOe,mobileDashboardIcon:POe,mobileDashboardLabel:OOe,brandTitle:DOe,searchBar:MOe,searchIconWrapper:IOe,searchIcon:ROe,placeholderText:LOe,shortcutHint:FOe,key:$Oe,plus:BOe,micButtonWrapper:zOe,micIcon:qOe,newlyRegisteredSection:UOe,recentList:VOe,recentPatientPill:HOe,recentNameContainer:GOe,recentInfo:WOe,newlyRegisteredLabel:YOe,recentName:KOe,recentToken:QOe},XOe=[{label:"Doctor",icon:r.jsx(eg,{size:24}),path:"/dashboard/doctor"},{label:"Labs",icon:r.jsx(Qj,{size:24}),path:"/create-lab-order"},{label:"Clinic",icon:r.jsx(Bz,{size:24}),path:"/dashboard/clinic-hub"},{label:"Inventory",icon:r.jsx(Nc,{size:24}),path:"/dashboard/inventory"},{label:"Analysis",icon:r.jsx(Qj,{size:24}),path:"/dashboard/analysis"},{label:"Dental",icon:r.jsx(AJ,{size:24}),path:"/dashboard/dental"},{label:"Files",icon:r.jsx(Qj,{size:24}),path:"/dashboard/files"},{label:"Distributors",icon:r.jsx(qO,{size:24}),path:"/dashboard/distributors"},{label:"Custom Bill",icon:r.jsx(la,{size:24}),path:"/create-custom-bill"},{label:"Patients",icon:r.jsx(Eo,{size:24}),path:"/dashboard/patients"},{label:"Debts",icon:r.jsx(BO,{size:24}),path:"/dashboard/patient-debts"}],VH="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",JOe={apiKey:VH},ZOe=()=>{const{openCommandBar:t,isOpen:e,setPreFilledQuery:n}=Pc(),[i,a]=b.useState(!1),[s,o]=b.useState(null),l=Mt(),c=v=>{v.stopPropagation(),a(!0)};b.useEffect(()=>{s&&(a(!1),n&&n(s),t(),o(null))},[s,t,n]);const d=as(),{data:f,isLoading:p}=PS({queryKey:["recentPatients"],queryFn:async()=>{const v=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),S=await ue(`/api/patients?${v.toString()}`);if(!S.ok)throw new Error("Failed to fetch recent patients");return S.json()},staleTime:60*1e3});b.useEffect(()=>{d.prefetchQuery({queryKey:Ut.clinicSettings,queryFn:async()=>{const v=await ue("/api/clinics/settings");if(!v.ok)throw new Error("Failed to fetch clinic settings");return v.json()},staleTime:30*60*1e3}),d.prefetchQuery({queryKey:Ut.drugs.all,queryFn:async()=>{const v=await ue("/api/drugs");if(!v.ok)throw new Error("Failed to fetch drugs");const S=await v.json();return S.drugs||S},staleTime:10*60*1e3}),d.prefetchQuery({queryKey:Ut.labTests.all,queryFn:async()=>{const v=await ue("/api/lab-tests");if(!v.ok)throw new Error("Failed to fetch lab tests");return v.json()},staleTime:10*60*1e3})},[d]);const y=(f==null?void 0:f.patients)||[],x=v=>{v&&(d.prefetchQuery({queryKey:Ut.patients.context(v),queryFn:async()=>{const S=await ue(`/api/patients/${v}/context`);if(!S.ok)throw new Error("Failed to fetch patient context");return S.json()},staleTime:5*60*1e3}),d.prefetchQuery({queryKey:Ut.dental.records(v),queryFn:async()=>{const S=await ue(`/api/dental/patient/${v}`);if(!S.ok)throw new Error("Failed to fetch dental records");return S.json()},staleTime:5*60*1e3}),d.prefetchQuery({queryKey:Ut.patientDebts.balance(v),queryFn:async()=>{const S=await ue(`/api/patient-debts/${v}/balance`);return S.ok?S.json():{netDebt:0}},staleTime:1*60*1e3}),d.prefetchQuery({queryKey:Ut.queue.latest(v),queryFn:async()=>{const S=await ue(`/api/queue/patient/${v}/latest`);if(!S.ok)throw new Error("Failed to fetch latest queue status");const N=await S.json();return N!=null&&N._id&&d.prefetchQuery({queryKey:Ut.queue.entry(N._id),queryFn:async()=>{const _=await ue(`/api/queue/doctor/complaint/${N._id}`);if(!_.ok)throw new Error("Failed to fetch complaint record");return _.json()},staleTime:1*60*1e3}),N},staleTime:5e3}))};return r.jsxs("div",{className:yr.container,children:[!e&&r.jsx("div",{className:yr.mobileDashboardGrid,children:XOe.map((v,S)=>r.jsxs("div",{className:yr.mobileDashboardItem,onClick:()=>l(v.path),children:[r.jsx("div",{className:yr.mobileDashboardIcon,children:v.icon}),r.jsx("span",{className:yr.mobileDashboardLabel,children:v.label})]},S))}),r.jsxs("div",{className:yr.visualContainer,children:[r.jsx("h1",{className:yr.brandTitle,children:"Newtons Ai"}),!e&&r.jsxs("div",{className:yr.searchBar,onClick:()=>t(),children:[r.jsx("div",{className:yr.searchIconWrapper,children:r.jsx(Hn,{className:yr.searchIcon})}),r.jsx("span",{className:yr.placeholderText,children:"Search or Ask AI..."}),r.jsx("div",{className:yr.micButtonWrapper,onClick:c,children:r.jsx(RS,{className:yr.micIcon})}),r.jsxs("div",{className:yr.shortcutHint,children:[r.jsx("span",{className:yr.key,children:"Ctrl"}),r.jsx("span",{className:yr.plus,children:"+"}),r.jsx("span",{className:yr.key,children:"K"})]})]})]}),!e&&(p||y.length>0)&&r.jsxs("div",{className:yr.newlyRegisteredSection,children:[r.jsx("div",{className:yr.newlyRegisteredLabel,children:"Newly Registered"}),r.jsx("div",{className:yr.recentList,children:p?[1,2,3,4,5].map(v=>r.jsxs("div",{className:yr.recentPatientPill,style:{cursor:"default"},children:[r.jsxs("div",{className:yr.recentNameContainer,children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:20})]}),r.jsx("div",{className:yr.recentInfo,children:r.jsx(Z,{width:80,height:14})})]},v)):y.map(v=>r.jsxs("div",{className:yr.recentPatientPill,onClick:()=>l(`/dashboard/edit-complaint/patient/${v.id}`),onMouseEnter:()=>v.id&&x(v.id),children:[r.jsxs("div",{className:yr.recentNameContainer,children:[r.jsx("span",{className:yr.recentName,children:v.name||"New Patient"}),r.jsxs("span",{className:yr.recentToken,children:["#",v.token]})]}),r.jsxs("div",{className:yr.recentInfo,children:[v.age?`${v.age} yrs`:"",v.age&&v.gender?" / ":"",v.gender||""]})]},v.id))})]}),i&&VH&&r.jsx(ZS,{options:JOe,children:r.jsx(eN,{onClose:()=>a(!1),patientData:null,tokenNumber:null,onAiSummaryChange:o})})]})},HH=({queueList:t,onPatientClick:e})=>{const a=Array.from({length:13},(o,l)=>8+l),s={};return a.forEach(o=>s[o]=[]),t.forEach(o=>{const c=new Date(o.createdAt).getHours();c>=8&&c<=20&&s[c].push(o)}),r.jsx("div",{className:"appointment-timeline-container",children:a.map(o=>r.jsxs("div",{className:"timeline-hour-row",children:[r.jsx("div",{className:"timeline-time-label",children:r.jsxs("span",{className:"time-text",children:[o>12?o-12:o," ",o>=12?"PM":"AM"]})}),r.jsxs("div",{className:"timeline-track",children:[s[o].length===0?r.jsx("div",{className:"timeline-empty-slot"}):r.jsx("div",{className:"timeline-appointments-group",children:s[o].map(l=>{var c,d;return r.jsxs("div",{className:`timeline-card status-${l.status}`,onClick:()=>e(l),children:[r.jsxs("div",{className:"timeline-card-header",children:[r.jsx("span",{className:"patient-name-card",children:(c=l.Patient)==null?void 0:c.name}),r.jsxs("span",{className:"token-badge",children:["#",l.token_no]})]}),r.jsxs("div",{className:"timeline-card-details",children:[((d=l.Patient)==null?void 0:d.phone)&&r.jsxs("div",{className:"detail-row",children:[r.jsx(Jm,{size:12}),r.jsx("span",{children:l.Patient.phone})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx(Tb,{size:12}),r.jsx("span",{children:new Date(l.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),r.jsx("div",{className:`status-line-indicator status-color-${l.status}`})]},l.id)})}),r.jsx("div",{className:"timeline-grid-line"})]})]},o))})},GH=({isOpen:t,onClose:e,onAppointmentBooked:n})=>{const[i,a]=b.useState(""),[s,o]=b.useState([]),[l,c]=b.useState(null),[d,f]=b.useState(""),[p,y]=b.useState(!1),[x,v]=b.useState(!1),[S,N]=b.useState(null);b.useEffect(()=>{t&&(a(""),o([]),c(null),f(""),N(null))},[t]);const _=Se.useMemo(()=>ud(async P=>{if(P.length<2){o([]),v(!1);return}v(!0);try{const I=new URLSearchParams({search:encodeURIComponent(P),page:"1",limit:"10"}),F=await ue(`/api/patients?${I.toString()}`);if(F.ok){const B=await F.json();o(B.patients||[])}}catch(I){console.error("Error searching patients:",I)}finally{v(!1)}},300),[]),T=P=>{const I=P.target.value;a(I),l&&c(null),I.length>=2?(v(!0),_(I)):o([])},C=P=>{c(P),a(P.name),o([])},O=async()=>{if(i.trim()){y(!0);try{const P=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.trim(),age:null,gender:null,phone:null})});if(!P.ok){const B=await P.json();throw new Error(B.message||"Failed to create patient")}const I=await P.json(),F={id:I.id,name:I.name,phone:I.phone,age:I.age,gender:I.gender,token:I.token};C(F)}catch(P){console.error("Failed to create patient:",P),N(P.message||"Failed to create patient")}finally{y(!1)}}},k=async()=>{if(!l){N("Please select a patient.");return}if(!d){N("Please select a date and time.");return}y(!0),N(null);try{if(!(await ue("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id,date:new Date(d).toISOString(),description:"Appointment"})})).ok)throw new Error("Failed to book appointment");n(),e()}catch(P){console.error("Error booking appointment:",P),N(P.message||"Failed to book appointment.")}finally{y(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content appointment-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:"Book Appointment"}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx(qt,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[S&&r.jsx("div",{className:"error-message",children:S}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Search Patient"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Hn,{className:"search-icon-input",size:18}),r.jsx("input",{type:"text",placeholder:"Search by name, phone, or ID...",value:i,onChange:T,className:"modal-input"}),x&&r.jsx("div",{className:"spinner-sm"})]}),(s.length>0||i.length>0&&!x)&&!l&&r.jsxs("div",{className:"search-results-dropdown",children:[i.trim().length>0&&!x&&r.jsx("div",{className:"search-result-item create-patient-item",onClick:O,children:r.jsxs("div",{className:"patient-info",style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx("div",{className:"create-icon-wrapper",children:r.jsx(FS,{size:16,color:"white"})}),r.jsxs("div",{children:[r.jsxs("span",{className:"name",style:{color:"#7c3aed"},children:['Create "',i,'"']}),r.jsx("span",{className:"details",style:{color:"#7c3aed"},children:"Add new patient"})]})]})}),s.map(P=>r.jsxs("div",{className:"search-result-item",onClick:()=>C(P),children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:P.name}),r.jsxs("span",{className:"details",children:[P.age?`${P.age} yrs`:""," ",P.gender?`/ ${P.gender}`:""]})]}),P.phone&&r.jsx("span",{className:"phone",children:P.phone})]},P.id))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Appointment Date & Time"}),r.jsx("div",{className:"date-input-wrapper",children:r.jsx("input",{type:"datetime-local",className:"modal-input",value:d,onChange:P=>f(P.target.value)})})]}),l&&r.jsxs("div",{className:"selected-patient-preview",children:[r.jsx("div",{className:"preview-label",children:"Selected Patient:"}),r.jsxs("div",{className:"preview-card",children:[r.jsx(vr,{size:20}),r.jsxs("div",{children:[r.jsx("strong",{children:l.name}),r.jsxs("div",{children:[l.age?`${l.age} yrs`:"-"," / ",l.gender||"-"]})]})]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:k,className:"submit-button",disabled:p||!l||!d,children:p?"Booking...":"Book Appointment"})]})]})}):null},eDe=async t=>{const e=t?`/api/queue?date=${t}`:"/api/queue",n=await ue(e);if(!n.ok)throw new Error("Failed to fetch queue");return n.json()};function WH(t){return PS({queryKey:["queue",t||"today"],queryFn:()=>eDe(t),staleTime:5e3,refetchInterval:7e3,placeholderData:e=>e,refetchOnMount:"always",refetchOnWindowFocus:!0})}function tDe(){const t=as();return IW({mutationFn:async({queueId:e,status:n,doctorId:i})=>{const a=await ue(`/api/queue/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,doctorId:i})});if(!a.ok)throw new Error("Failed to update queue status");return a.json()},onSuccess:(e,{queueId:n})=>{t.invalidateQueries({queryKey:Ut.queue.today}),t.invalidateQueries({queryKey:Ut.queue.entry(n)})}})}const Uj=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},nDe=t=>{if(!t)return"Unknown Date";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},MA=({title:t,icon:e,items:n,renderItemContent:i,isLoading:a,noDataText:s})=>{const o=b.useMemo(()=>{const l={};n.forEach(d=>{if(isNaN(d.date.getTime())){l["Unknown Date"]||(l["Unknown Date"]=[]),l["Unknown Date"].push(d);return}const f=nDe(d.originalDateString);l[f]||(l[f]=[]),l[f].push(d)});const c=Object.keys(l);return c.sort((d,f)=>{if(d==="Unknown Date")return 1;if(f==="Unknown Date")return-1;try{const p=v=>{const S=v.split(" ");if(S.length===3){const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(S[1]);if(_!==-1)return new Date(parseInt(S[2]),_,parseInt(S[0]))}return new Date(v)},y=p(d),x=p(f);if(!isNaN(y.getTime())&&!isNaN(x.getTime()))return x.getTime()-y.getTime()}catch(p){console.error("Error parsing date for sorting:",p)}return f.localeCompare(d)}),c.map(d=>({date:d,items:l[d]}))},[n]);return r.jsxs("div",{className:"dcp-group-card",children:[r.jsxs("h4",{className:"dcp-group-header",children:[e&&r.jsx(e,{size:14,className:"dcp-group-icon"}),t]}),r.jsxs("div",{className:"dcp-group-content",children:[a&&r.jsx("div",{className:"dcp-history-items",children:[1,2].map(l=>r.jsxs("div",{className:"dcp-history-item",style:{border:"none"},children:[r.jsx(Z,{width:"60%",height:16,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"30%",height:12})]},l))}),!a&&n.length===0&&r.jsx("p",{className:"dcp-history-empty",children:s}),!a&&n.length>0&&r.jsx("div",{children:o.map(({date:l,items:c})=>r.jsxs("div",{className:"dcp-date-group",children:[r.jsx("h5",{className:"dcp-date-label",children:l}),r.jsx("div",{className:"dcp-date-items",children:c.map((d,f)=>r.jsx("div",{className:"dcp-history-item",children:i(d)},`${d.type}-${d.originalDateString}-${f}`))})]},l))})]})]})},Vj=()=>{var ve,ce;const{openCommandBar:t}=Pc(),[e,n]=b.useState(new Date),[i,a]=b.useState("list"),[s,o]=b.useState(!1),l=e.toISOString().split("T")[0],{data:c,isLoading:d,refetch:f,isError:p}=WH(l),y=(c==null?void 0:c.list)||[],x=(c==null?void 0:c.summary)||{currentPatient:null,nextPatient:null,waitingCount:0},v=d,[S,N]=b.useState(!1),[_,T]=b.useState(null),C=()=>{f()},[O,k]=b.useState(null),[P,I]=b.useState(null),[F,B]=b.useState(null),[$,L]=b.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[V,H]=b.useState(!1),[te,X]=b.useState(null),{patientId:q}=Oi(),W=Mt(),ae=as(),G=fe=>{fe&&(ae.prefetchQuery({queryKey:Ut.patients.context(fe),queryFn:async()=>{const se=await ue(`/api/patients/${fe}/context`);if(!se.ok)throw new Error("Failed to fetch patient context");return se.json()},staleTime:5*60*1e3}),ae.prefetchQuery({queryKey:Ut.patientDebts.balance(fe),queryFn:async()=>{const se=await ue(`/api/patient-debts/${fe}/balance`);return se.ok?se.json():{netDebt:0}},staleTime:1*60*1e3}),ae.prefetchQuery({queryKey:Ut.queue.latest(fe),queryFn:async()=>{const se=await ue(`/api/queue/patient/${fe}/latest`);if(!se.ok)throw new Error("Failed to fetch latest queue status");const Q=await se.json();return Q!=null&&Q._id&&ae.prefetchQuery({queryKey:Ut.queue.entry(Q._id),queryFn:async()=>{const ie=await ue(`/api/queue/doctor/complaint/${Q._id}`);if(!ie.ok)throw new Error("Failed to fetch complaint record");return ie.json()},staleTime:1*60*1e3}),Q},staleTime:5e3}),ae.prefetchQuery({queryKey:Ut.dental.records(fe),queryFn:async()=>{const se=await ue(`/api/dental/patient/${fe}`);if(!se.ok)throw new Error("Failed to fetch dental records");return se.json()},staleTime:5*60*1e3}))},z=b.useCallback(async fe=>{B(null),k(null),I(null),H(!0),X(null),L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const se=await ue(`/api/patients/${fe}`);if(!se.ok)throw new Error(`Patient details fetch failed (${se.status})`);const Q=await se.json();k(Q);const ie=await ue(`/api/queue/patient/${fe}/latest`);if(!ie.ok&&ie.status!==404)throw new Error(`Queue entry fetch failed (${ie.status})`);if(ie.ok){const ge=await ie.json();I(ge)}await le(fe)}catch(se){console.error("Error fetching specific patient data:",se),B(se.message||"Failed to load patient data."),X(se.message||"Failed to load patient history.")}finally{H(!1)}},[]),le=b.useCallback(async fe=>{H(!0),X(null);try{const[se,Q,ie,ge]=await Promise.all([ue(`/api/queue/patient/${fe}/complaints`),ue(`/api/lab/patient/${fe}`),ue(`/api/lab/orders/patient/${fe}?status=pending`),ue(`/api/pharmacy-orders/patient/${fe}`)]),ee=se.ok?await se.json():[],we=Q.ok?await Q.json():[],Ue=ie.ok?await ie.json():[],Ge=ge.ok?await ge.json():[];L({pastComplaints:ee||[],labReports:we||[],pendingLabOrders:Ue||[],pharmacyOrders:Ge||[]})}catch(se){console.error("Error fetching patient history:",se),X(se.message||"Failed to load patient history."),L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{H(!1)}},[]);b.useEffect(()=>{q?z(q):(k(null),I(null),f())},[q,z,f]),b.useEffect(()=>{var fe;if(!q&&((fe=x.currentPatient)==null?void 0:fe.status)==="consulting"){const se=x.currentPatient._id;se&&W(`/dashboard/edit-complaint/${se}`)}},[q,x.currentPatient,W]),b.useEffect(()=>{var fe;!q&&((fe=x.currentPatient)!=null&&fe.patientId)?le(x.currentPatient.patientId):!q&&!x.currentPatient&&(L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),H(!1),X(null))},[q,(ve=x.currentPatient)==null?void 0:ve.patientId,le]);const je=((ce=x.currentPatient)==null?void 0:ce.patientId)||(q?parseInt(q,10):null),K=b.useMemo(()=>{if(!je||!$.pastComplaints)return[];const fe=$.pastComplaints.map(se=>({date:new Date(se.createdAt),type:"Complaint",data:se,originalDateString:se.createdAt})).filter(se=>!isNaN(se.date.getTime()));return fe.sort((se,Q)=>Q.date.getTime()-se.date.getTime()),fe},[je,$.pastComplaints]),Oe=b.useMemo(()=>{if(!je)return[];const fe=[];return($.pendingLabOrders??[]).forEach(se=>{const Q=new Date(se.createdAt);isNaN(Q.getTime())||fe.push({date:Q,type:"Lab Order (Pending)",data:se,originalDateString:se.createdAt})}),($.labReports??[]).forEach(se=>{const Q=se.reportCreatedAt?new Date(se.reportCreatedAt):null;Q&&!isNaN(Q.getTime())&&fe.push({date:Q,type:"Lab Report",data:se,originalDateString:se.reportCreatedAt})}),fe.sort((se,Q)=>Q.date.getTime()-se.date.getTime()),fe},[je,$.pendingLabOrders,$.labReports]),Ye=b.useMemo(()=>{if(!je||!$.pharmacyOrders)return[];const fe=$.pharmacyOrders.map(se=>({date:new Date(se.date),type:"Pharmacy Order",data:se,originalDateString:se.date})).filter(se=>!isNaN(se.date.getTime()));return fe.sort((se,Q)=>Q.date.getTime()-se.date.getTime()),fe},[je,$.pharmacyOrders]),Me=async()=>{N(!0),T(null);try{await ue("/api/queue/doctor/next",{method:"POST"}),await f()}catch(fe){console.error("Error calling next patient:",fe),T(fe.message||"Failed to call next patient.")}finally{N(!1)}},Ie=fe=>{switch(fe){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return fe}},[be,re]=b.useState("info");return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"dcp-container",children:[r.jsxs("div",{className:"dcp-header-row",children:[r.jsx("button",{onClick:()=>W(-1),className:"dcp-back-btn",children:r.jsx(nn,{size:20})}),r.jsx("h1",{className:"dcp-title",children:"Doctor Consultation Panel"})]}),q?r.jsxs(r.Fragment,{children:[F&&r.jsx("div",{className:"dcp-error",children:F}),O&&r.jsx("div",{className:"dcp-card dcp-card-violet",children:r.jsxs("div",{className:"dcp-card-content",children:[r.jsxs("div",{className:"dcp-mobile-tabs",children:[r.jsx("button",{className:`dcp-mobile-tab ${be==="info"?"active":""}`,onClick:()=>re("info"),children:"Patient Record"}),r.jsx("button",{className:`dcp-mobile-tab ${be==="history"?"active":""}`,onClick:()=>re("history"),children:"History"})]}),r.jsxs("div",{className:"dcp-flex-split",children:[r.jsxs("div",{className:`dcp-flex-half dcp-tab-info ${be==="info"?"":"hidden"}`,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("div",{className:"dcp-section-header dcp-section-header-violet",children:"Patient Record"}),r.jsxs("button",{onClick:()=>W("/dashboard/doctor"),className:"dcp-btn dcp-btn-outline",style:{padding:"4px 10px",fontSize:"0.75rem"},children:[r.jsx(nn,{size:12})," Back to Queue"]})]}),r.jsx("div",{className:"dcp-patient-name dcp-patient-name-gradient",children:O.name}),r.jsxs("div",{className:"dcp-patient-meta",style:{marginBottom:"12px"},children:[r.jsxs("span",{className:"dcp-patient-badge",children:[O.age||"N/A"," Yrs"]}),r.jsx("span",{className:"dcp-patient-badge",children:O.gender||"N/A"})]}),r.jsxs("div",{className:"dcp-activity-box",children:[r.jsx("div",{className:"dcp-activity-label",children:"Latest Activity"}),P?r.jsxs("div",{children:[r.jsxs("div",{className:"dcp-activity-content",children:[r.jsx("strong",{children:"Complaint:"})," ",P.complaint||r.jsx("span",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"None"})]}),r.jsxs("div",{style:{marginTop:"8px"},children:[r.jsx("span",{className:`dcp-status ${P.status==="consulting"?"dcp-status-consulting":P.status==="seen"?"dcp-status-seen":P.status==="waiting"?"dcp-status-waiting":""}`,children:Ie(P.status)}),P.status==="consulting"&&P._id&&r.jsx("button",{onClick:()=>W(`/dashboard/edit-complaint/${P._id}`),onMouseEnter:()=>G(String(O.id)),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px",padding:"4px 12px"},children:"Resume"})]}),_&&r.jsx("div",{className:"dcp-error-card",style:{marginBottom:"16px"},children:_}),P.case_summary&&r.jsxs("div",{className:"dcp-ai-summary",style:{marginTop:"10px"},children:[r.jsx("div",{className:"dcp-ai-label",children:" AI Summary"}),r.jsx("p",{className:"dcp-ai-text",children:P.case_summary})]})]}):r.jsx("p",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"No queue entry found for this patient today."})]})]}),r.jsxs("div",{className:`dcp-flex-half dcp-history-section dcp-tab-history ${be==="history"?"":"hidden"} dcp-desktop-only`,children:[r.jsxs("div",{className:"dcp-history-header",children:[r.jsx("span",{className:"dcp-history-title",children:"Patient History"}),V&&r.jsx(Z,{width:60,height:14})]}),te&&r.jsx("div",{className:"dcp-error",children:te}),r.jsxs("div",{className:"dcp-history-scroll dcp-scrollbar",children:[r.jsx(MA,{title:"Past Complaints",icon:la,items:K,isLoading:V,noDataText:"No past complaints.",renderItemContent:fe=>r.jsxs("div",{children:[fe.data.complaint,r.jsx("div",{className:"dcp-history-timestamp",children:Uj(fe.originalDateString)})]})}),r.jsx(MA,{title:"Lab Reports",icon:rs,items:Oe,isLoading:V,noDataText:"No lab history.",renderItemContent:fe=>fe.type==="Lab Order (Pending)"?r.jsxs("div",{children:[r.jsx("span",{className:"dcp-type-pending",children:"Pending Order"}),r.jsx("div",{children:fe.data.tests.map(se=>se.name).join(", ")}),r.jsx("div",{className:"dcp-history-timestamp",children:Uj(fe.originalDateString)})]}):r.jsxs("div",{children:[r.jsxs("span",{className:"dcp-type-report",children:["Report: ",fe.data.testName]}),r.jsxs("div",{style:{fontStyle:"italic"},children:['"',fe.data.reportFindings.substring(0,50),fe.data.reportFindings.length>50?"...":"",'"']}),r.jsx("div",{className:"dcp-history-timestamp",children:Uj(fe.originalDateString)})]})}),r.jsx(MA,{title:"Medications",icon:yf,items:Ye,isLoading:V,noDataText:"No pharmacy history.",renderItemContent:fe=>r.jsxs("div",{children:[fe.data.medications.map(se=>`${se.name} (${se.pack_quantity||0}p ${se.loose_quantity||0}l)`).join(", "),r.jsxs("div",{className:"dcp-history-timestamp",children:[Uj(fe.originalDateString),"  ",r.jsx("span",{style:{textTransform:"capitalize"},children:fe.data.status})]})]})}),K.length===0&&Oe.length===0&&Ye.length===0&&!V&&r.jsx("div",{className:"dcp-empty-state",children:"No history records found."})]})]})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"16px"},children:[p&&r.jsx("div",{className:"dcp-error",children:"Failed to fetch queue data."}),v&&!x.currentPatient?r.jsxs("div",{className:"dcp-card",style:{padding:"2rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx(Z,{width:"40%",height:32}),r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx(Z,{width:"60%",height:24}),r.jsx(Z,{width:"40%",height:16,style:{marginTop:"8px"}})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsx(Z,{width:"100%",height:80,style:{borderRadius:"12px"}})}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[r.jsx(Z,{width:180,height:40}),r.jsx(Z,{width:120,height:40})]})]}):r.jsx("div",{className:"dcp-empty-state",children:x.currentPatient?"Redirecting to consultation...":"No patient currently being seen. Use 'Call Next' or search for a patient record."})]}),r.jsxs("div",{className:"dcp-scheduler-section",children:[r.jsx("div",{className:"queue-header",children:r.jsx("div",{className:"queue-actions",children:r.jsxs("div",{className:"controls-row",children:[r.jsxs("div",{className:"view-toggle-container",children:[r.jsx("button",{className:`view-toggle-btn ${i==="list"?"active":""}`,onClick:()=>a("list"),title:"List View",children:r.jsx(Rz,{size:16})}),r.jsx("button",{className:`view-toggle-btn ${i==="timeline"?"active":""}`,onClick:()=>a("timeline"),title:"Timeline View",children:r.jsx($O,{size:16})})]}),r.jsxs("div",{className:"date-picker-container",children:[r.jsx(gi,{size:16,className:"text-gray-500"}),r.jsx("input",{type:"date",className:"date-input",value:e.toISOString().split("T")[0],onChange:fe=>n(new Date(fe.target.value))})]}),r.jsxs("button",{onClick:()=>o(!0),className:"appointment-button",children:[r.jsx(Tb,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),r.jsx("span",{className:"sm:hidden",children:"Book"})]}),r.jsx("button",{onClick:()=>t(),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px"},children:"Search Patient"})]})})}),r.jsx(GH,{isOpen:s,onClose:()=>{o(!1),f()},onAppointmentBooked:C}),d&&y.length===0?r.jsx("div",{style:{padding:"20px"},children:r.jsx(Z,{width:"100%",height:200})}):i==="timeline"?r.jsx(HH,{queueList:y,onPatientClick:fe=>W(`/dashboard/edit-complaint/${fe.id}`)}):r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Details"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{children:y.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"20px"},children:"No appointments for this date."})}):y.map(fe=>{var se,Q,ie;return r.jsxs("tr",{onClick:()=>W(`/dashboard/edit-complaint/${fe.id}`),className:"queue-row-clickable",children:[r.jsxs("td",{children:["#",fe.token_no]}),r.jsx("td",{children:r.jsx("div",{className:"patient-info",children:r.jsx("span",{className:"name",children:(se=fe.Patient)==null?void 0:se.name})})}),r.jsxs("td",{className:"hidden-mobile",children:[(Q=fe.Patient)==null?void 0:Q.age,"y, ",(ie=fe.Patient)==null?void 0:ie.gender,"  ",fe.complaint||"-"]}),r.jsx("td",{children:r.jsx("span",{className:`dcp-status ${fe.status==="waiting"?"dcp-status-waiting":fe.status==="consulting"?"dcp-status-consulting":fe.status==="seen"?"dcp-status-seen":""}`,children:Ie(fe.status)})}),r.jsx("td",{children:r.jsx("button",{className:"dcp-btn dcp-btn-outline",style:{padding:"4px 8px",fontSize:"0.75rem"},children:"View"})})]},fe.id)})})]})})]}),r.jsxs("div",{className:"dcp-bottom-bar",children:[r.jsx("button",{onClick:Me,disabled:S||v||!x.nextPatient||!!x.currentPatient,className:"dcp-btn dcp-btn-teal",children:"Call Next Patient"}),r.jsxs("div",{className:"dcp-waiting-count",children:[x.waitingCount," patients waiting"]})]})]})]})})},rDe="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",iDe={apiKey:rDe},mv=()=>{const[t,e]=b.useState(""),[n,i]=b.useState([]),[a,s]=b.useState(!1),[o,l]=b.useState(null),[c,d]=b.useState(!1),[f,p]=b.useState(null),y=b.useRef(null),[x,v]=b.useState(!1),[S,N]=b.useState(!1),[_,T]=b.useState(null),[C,O]=b.useState(null),[k,P]=b.useState([]),[I,F]=b.useState(!0),[B,$]=b.useState(!1);Gc();const L=Mt(),V=Vr(),H=cD({settings:{},staffList:[]}),te=as(),X=ce=>{ce&&(te.prefetchQuery({queryKey:Ut.patients.context(ce),queryFn:async()=>{const fe=await ue(`/api/patients/${ce}/context`);if(!fe.ok)throw new Error("Failed to fetch patient context");return fe.json()},staleTime:5*60*1e3}),te.prefetchQuery({queryKey:Ut.patientDebts.balance(ce),queryFn:async()=>{const fe=await ue(`/api/patient-debts/${ce}/balance`);return fe.ok?fe.json():{netDebt:0}},staleTime:1*60*1e3}),te.prefetchQuery({queryKey:Ut.queue.latest(ce),queryFn:async()=>{const fe=await ue(`/api/queue/patient/${ce}/latest`);if(!fe.ok)throw new Error("Failed to fetch latest queue status");const se=await fe.json();return se!=null&&se._id&&te.prefetchQuery({queryKey:Ut.queue.entry(se._id),queryFn:async()=>{const Q=await ue(`/api/queue/doctor/complaint/${se._id}`);if(!Q.ok)throw new Error("Failed to fetch complaint record");return Q.json()},staleTime:1*60*1e3}),se},staleTime:5e3}),te.prefetchQuery({queryKey:Ut.dental.records(ce),queryFn:async()=>{const fe=await ue(`/api/dental/patient/${ce}`);if(!fe.ok)throw new Error("Failed to fetch dental records");return fe.json()},staleTime:5*60*1e3}))},{selectedImage:q,handleImageSelect:W,clearImage:ae}=H,G=b.useRef(null),z=ce=>{var se;const fe=(se=ce.target.files)==null?void 0:se[0];fe&&W(fe)};b.useEffect(()=>{H.chatHistory.length>0&&B&&H.isProcessing},[H.chatHistory.length]),b.useEffect(()=>{(async()=>{F(!0);try{const fe=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),se=await ue(`/api/patients?${fe.toString()}`);if(se.ok){const Q=await se.json();P(Q.patients||[])}}catch(fe){console.error("Error fetching recent patients:",fe)}finally{F(!1)}})()},[]),b.useEffect(()=>{H.setChatQuery(t)},[t]);const le=b.useCallback(async ce=>{if(!(ce||t).trim()){p("Please enter complaint details.");return}d(!0),p(null),ce&&ce!==H.chatQuery&&H.setChatQuery(ce);try{H.handleSendMessage(),e("")}catch(se){console.error("AI Error:",se),p("AI failed to process. Try again."),d(!1)}},[t,H]);b.useEffect(()=>{!H.isProcessing&&c&&d(!1)},[H.isProcessing,c]),b.useEffect(()=>{const ce=y.current;ce&&(ce.style.height="auto",ce.style.height=`${ce.scrollHeight}px`);const se=new URLSearchParams(V.search).get("caseDetails");if(se){const Q=decodeURIComponent(se);Q!==t&&(e(Q),v(!0))}},[V.search,t]),b.useEffect(()=>{x&&t.trim()&&(L(V.pathname,{replace:!0}),le(t),v(!1))},[x,t,le,L,V.pathname]),b.useEffect(()=>{const ce=y.current;ce&&(ce.style.height="auto",ce.style.height=`${ce.scrollHeight}px`)},[t]),b.useEffect(()=>{_&&(e(_),N(!1),H.setChatQuery(_),setTimeout(()=>H.handleSendMessage(),0),T(null))},[_,H]);const je=()=>{O({id:null,token:null,name:"New Case",age:null,gender:null}),N(!0)},K=b.useMemo(()=>ud(async ce=>{const fe=ce.trim(),se=/^\d+$/.test(fe),Q=fe.split(/\s+/).length;if(fe.length<2||se&&fe.length>10||!se&&Q>2){i([]),s(!1),l(null);return}s(!0),l(null);try{const ie=new URLSearchParams({search:encodeURIComponent(ce),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),ge=await ue(`/api/patients?${ie.toString()}`);if(!ge.ok){const we=await ge.text();throw new Error(`API Error (${ge.status}): ${we||ge.statusText}`)}const ee=await ge.json();i(ee.patients)}catch(ie){console.error("Error searching patients:",ie),l(ie.message||"Failed to search patients."),i([])}finally{s(!1)}},300),[]),Oe=ce=>{const fe=ce.target.value;e(fe);const se=fe.trim(),Q=/^\d+$/.test(se),ie=se.split(/\s+/).length;se.length>=2&&!(Q&&se.length>10||!Q&&ie>2)?s(!0):(s(!1),i([])),K(fe)},Ye=ce=>{ce.key==="Enter"&&!ce.shiftKey&&(ce.preventDefault(),t.trim()&&!a&&ve())},Me=async ce=>{ce&&ce.id&&L(`/dashboard/edit-complaint/patient/${ce.id}`)},Ie=[{icon:"",title:"Example: Fever & Cold",description:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough",text:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough"},{icon:"",title:"Example: Stomach Ache",description:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days",text:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days"}],be=ce=>{e(ce),setTimeout(()=>{H.handleSendMessage(ce),e(""),i([])},50)},re=()=>{e(""),i([]),H.refreshChat()},ve=()=>{!t.trim()&&!q||(K.cancel(),H.handleSendMessage(t),e(""),i([]))};return r.jsxs("div",{className:"patient-search-page-container",children:[r.jsxs("div",{className:"patient-search-header",children:[r.jsx("button",{onClick:()=>L("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"}),r.jsx("button",{onClick:()=>L(-1),className:"patient-search-button patient-search-button-back",children:r.jsx(nn,{size:16})})]}),r.jsxs("div",{className:"patient-search-content-box",children:[o&&r.jsx("p",{className:"patient-search-error",children:o}),f&&r.jsx("p",{className:"patient-search-error",children:f}),I?r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:[1,2,3,4,5].map(ce=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:14})]}),r.jsx("div",{className:"recent-info",children:r.jsx(Z,{width:60,height:12})})]},ce))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}):k.length>0&&r.jsxs("div",{className:"newly-registered-section",children:[r.jsx("div",{className:"recent-list",children:k.map(ce=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>Me(ce),onMouseEnter:()=>ce.id&&X(ce.id),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:ce.name||"New Patient"}),r.jsxs("span",{className:"recent-token",children:["#",ce.token]})]}),r.jsxs("div",{className:"recent-info",children:[ce.age," yrs / ",ce.gender]})]},ce.id))}),r.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}),H.chatHistory.length===0&&n.length===0&&r.jsxs("div",{className:"example-cases-section",children:[r.jsxs("div",{className:"example-cases-header",children:[r.jsx("span",{className:"sparkles-icon",children:""}),r.jsx("h3",{children:"Try AI with Example Cases"})]}),r.jsx("div",{className:"example-cards-container",children:Ie.map((ce,fe)=>r.jsxs("div",{className:"example-case-card",onClick:()=>be(ce.text),children:[r.jsx("div",{className:"example-icon",children:ce.icon}),r.jsxs("div",{className:"example-content",children:[r.jsx("div",{className:"example-title",children:ce.title}),r.jsx("div",{className:"example-description",children:ce.description})]})]},fe))})]})]}),H.chatHistory.length>0&&!c&&r.jsxs("div",{className:`ai-chat-overlay ${B?"minimized":""}`,children:[r.jsxs("div",{className:"ai-chat-header",children:[r.jsx("span",{children:"AI Assistant"}),r.jsx("div",{className:"ai-chat-controls",children:r.jsx("button",{className:"icon-btn",onClick:()=>re(),title:"Clear Chat",children:r.jsx(qt,{size:16})})})]}),r.jsxs("div",{className:"ai-chat-messages",children:[H.chatHistory.map((ce,fe)=>r.jsx("div",{className:`chat-bubble ${ce.role==="model"?"model":"user"}`,children:ce.role==="system"?r.jsx("i",{children:ce.text}):ce.text},fe)),H.isProcessing&&r.jsx("div",{className:"chat-bubble model",children:"Typing..."})]})]}),n.length>0&&!c&&r.jsxs("div",{className:"patient-search-results-overlay",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem"},children:[r.jsx("div",{style:{fontWeight:600,color:"#64748b"},children:"Found Patients"}),r.jsx("button",{onClick:()=>i([]),style:{border:"none",background:"transparent",color:"#94a3b8",cursor:"pointer"},children:r.jsx(qt,{size:14})})]}),n.map(ce=>r.jsxs("div",{onClick:()=>Me(ce),onMouseEnter:()=>ce.id&&X(ce.id),className:"patient-search-result-item",children:[r.jsxs("div",{className:"patient-search-result-item-name-container",children:[r.jsxs("span",{className:"patient-search-result-item-token",children:["[#",ce.token,"]"]}),r.jsx("span",{className:"patient-search-result-item-name",children:ce.name})]}),r.jsxs("div",{className:"patient-search-result-item-details",children:[ce.age?`${ce.age} yrs`:"",ce.age&&ce.gender?" / ":"",ce.gender||"N/A"]})]},ce.id))]}),r.jsxs("div",{className:"sticky-chat-input-box",children:[r.jsxs("div",{className:"cmd-input-container",children:[q&&r.jsxs("div",{className:"cmd-image-preview",children:[r.jsx("img",{src:q,alt:"Selected"}),r.jsx("button",{className:"cmd-image-delete",onClick:ae,children:r.jsx(qt,{size:12})})]}),r.jsx("textarea",{ref:y,placeholder:"Search (Name/Token/Phone), Ask AI, or Enter New Case...",value:t,onChange:Oe,onKeyDown:Ye,className:"cmd-input",disabled:c||H.isProcessing,rows:1}),r.jsxs("div",{className:"cmd-controls-group",children:[r.jsx("input",{type:"file",ref:G,onChange:z,accept:"image/*",style:{display:"none"}}),r.jsx("button",{className:"cmd-icon-btn",onClick:()=>{var ce;return(ce=G.current)==null?void 0:ce.click()},title:"Attach Image",children:r.jsx(zO,{})}),r.jsx("button",{className:"cmd-icon-btn",onClick:je,title:"Voice Input",children:r.jsx(RS,{})}),(t.length>0||q)&&r.jsx("button",{className:"cmd-icon-btn send-btn",onClick:ve,title:"Send",children:r.jsx(LS,{})})]})]}),S&&r.jsx(ZS,{options:iDe,children:r.jsx(eN,{onClose:()=>N(!1),patientData:C,tokenNumber:null,onAiSummaryChange:T})})]})]})},TM=()=>{const[t,e]=b.useState(""),[n,i]=b.useState([]),[a,s]=b.useState(!1),[o,l]=b.useState(!1),c=Mt(),d=b.useRef(null);b.useEffect(()=>{const C=O=>{d.current&&!d.current.contains(O.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const f=b.useCallback(u9.debounce(async C=>{if(C.trim().length<2){i([]),s(!1);return}s(!0);try{const O=new URLSearchParams({search:encodeURIComponent(C),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),k=await ue(`/api/patients?${O.toString()}`);if(!k.ok)throw new Error("Failed to fetch patients");const P=await k.json();i(P.patients)}catch{i([])}finally{s(!1)}},400),[]);b.useEffect(()=>(t?(s(!0),f(t)):(i([]),f.cancel(),s(!1)),()=>f.cancel()),[t,f]);const p=C=>{c(`/patient/${encodeURIComponent(C.id)}/admission-billing`)},y=()=>{e(""),i([]),l(!1)},x=C=>C.slice(0,1).toUpperCase(),[v,S]=b.useState(!1),[N,_]=b.useState(!1),T=async()=>{_(!0);try{const C=await ue("/api/patients/discharge-all",{method:"POST"}),O=await C.json();C.ok?(alert(O.message),i([]),e("")):alert(O.message||"Failed to discharge patients")}catch(C){console.error("Bulk discharge error:",C),alert("An error occurred while processing bulk discharge.")}finally{_(!1),S(!1)}};return r.jsxs("div",{className:"ma-container",children:[r.jsxs("div",{className:"ma-header-section",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"ma-title",children:"Manage Admission"}),r.jsx("p",{className:"ma-subtitle",children:"Search for a patient to admit, discharge, or view billing details"})]}),r.jsx("button",{className:"ma-discharge-all-btn",onClick:()=>S(!0),children:"Discharge Everyone"})]}),v&&r.jsx("div",{className:"ma-modal-overlay",children:r.jsxs("div",{className:"ma-modal-content",children:[r.jsx("h3",{children:"Confirm Bulk Discharge"}),r.jsxs("p",{children:["Are you sure you want to discharge ",r.jsx("strong",{children:"ALL"})," currently admitted patients?"]}),r.jsx("div",{className:"ma-modal-warning",children:r.jsx("p",{children:" This will finalize bills for all admitted patients."})}),r.jsxs("div",{className:"ma-modal-actions",children:[r.jsx("button",{className:"ma-modal-cancel",onClick:()=>S(!1),disabled:N,children:"Cancel"}),r.jsx("button",{className:"ma-modal-confirm",onClick:T,disabled:N,children:N?"Processing...":"Yes, Discharge All"})]})]})}),r.jsxs("div",{className:"ma-search-wrapper",ref:d,children:[a?r.jsxs("div",{className:"ma-loading-spinner",children:[r.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e2e8f0",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]}):r.jsx(Hn,{className:"ma-search-icon",size:20}),r.jsx("input",{type:"text",value:t,onChange:C=>{e(C.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search by Name, Phone, or Token...",className:"ma-search-input",autoFocus:!0}),t&&r.jsx("div",{className:"ma-clear-icon",onClick:y,children:r.jsx(qt,{size:18})}),r.jsxs("div",{className:`ma-results-dropdown ${o&&(n.length>0||a)?"open":""}`,children:[n.map(C=>{const O=C.admission_date&&!C.discharge_date;return r.jsxs("div",{onClick:()=>p(C),className:"ma-result-item",children:[r.jsxs("div",{className:"ma-patient-info",children:[r.jsx("div",{className:"ma-avatar",children:x(C.name)}),r.jsxs("div",{className:"ma-patient-text",children:[r.jsxs("h4",{children:[C.name,r.jsxs("span",{className:"ma-patient-token",children:["#",C.token]})]}),r.jsxs("p",{className:"ma-patient-subtext",children:[C.phone||"No phone","  ",C.age?`${C.age} Y`:"","  ",C.gender||""]})]})]}),r.jsx("div",{className:`ma-badge ${O?"ma-badge-admitted":"ma-badge-discharged"}`,children:O?"ADMITTED":"NOT ADMITTED"})]},C.id)}),t.length>2&&!a&&n.length===0&&r.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:['No patients found matching "',t,'"']})]})]})]})},pB=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"boolean",label:"Yes/No"},{value:"computed",label:"Computed (Formula)"}],kM=({isOpen:t,onClose:e,entityType:n,entityLabel:i,currentConfig:a,onConfigUpdated:s})=>{const[o,l]=b.useState([]),[c,d]=b.useState(!1),[f,p]=b.useState(null),[y,x]=b.useState({key:"",label:"",type:"text",required:!1,formula:""});b.useEffect(()=>{t&&(l(a[n]||[]),p(null),x({key:"",label:"",type:"text",required:!1,formula:""}))},[t,a,n]);const v=T=>T.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_"),S=()=>{var C;if(!y.label.trim()){p("Column label is required");return}if(y.type==="computed"&&!((C=y.formula)!=null&&C.trim())){p("Formula is required for computed columns");return}const T=v(y.label);if(o.some(O=>O.key===T)){p("A column with this name already exists");return}l([...o,{...y,key:T}]),x({key:"",label:"",type:"text",required:!1,formula:""}),p(null)},N=T=>{l(o.filter(C=>C.key!==T))},_=async()=>{d(!0),p(null);try{const T={...a,[n]:o};if(!(await ue("/api/clinics/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_columns_config:T})})).ok)throw new Error("Failed to save custom columns");s(T),e()}catch(T){p(T.message||"Failed to save")}finally{d(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content manage-columns-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h2",{children:["Manage Custom Columns - ",i]}),r.jsx("button",{onClick:e,className:"close-button",title:"Close",children:r.jsx(qt,{size:24})})]}),f&&r.jsx("div",{className:"error-message",children:f}),r.jsxs("div",{className:"columns-list",children:[r.jsx("h4",{children:"Current Custom Columns"}),o.length===0?r.jsx("p",{className:"no-columns",children:"No custom columns defined yet."}):r.jsxs("table",{className:"columns-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Label"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:o.map(T=>{var C;return r.jsxs("tr",{children:[r.jsx("td",{children:T.label}),r.jsx("td",{children:((C=pB.find(O=>O.value===T.type))==null?void 0:C.label)||T.type}),r.jsx("td",{children:T.type==="computed"?r.jsx("code",{className:"computed-formula",children:T.formula}):T.required?"Required":"Optional"}),r.jsx("td",{children:r.jsx("button",{onClick:()=>N(T.key),className:"remove-column-btn",title:"Remove Column",children:r.jsx(Wn,{size:16})})})]},T.key)})})]})]}),r.jsxs("div",{className:"add-column-section",children:[r.jsx("h4",{children:"Add New Column"}),r.jsxs("div",{className:"add-column-form",children:[r.jsx("input",{type:"text",placeholder:"Column Label (e.g., BMI)",value:y.label,onChange:T=>x({...y,label:T.target.value}),className:"column-input"}),r.jsx("select",{value:y.type,onChange:T=>x({...y,type:T.target.value}),className:"column-select",children:pB.map(T=>r.jsx("option",{value:T.value,children:T.label},T.value))}),y.type==="computed"?r.jsx("input",{type:"text",placeholder:"Formula (e.g. weight / (height * height))",value:y.formula||"",onChange:T=>x({...y,formula:T.target.value}),className:"column-input",style:{flex:2}}):r.jsxs("label",{className:"required-checkbox",children:[r.jsx("input",{type:"checkbox",checked:y.required,onChange:T=>x({...y,required:T.target.checked})}),"Required"]}),r.jsxs("button",{onClick:S,className:"add-column-btn",children:[r.jsx(ur,{size:16})," Add"]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:e,className:"cancel-btn",disabled:c,children:"Cancel"}),r.jsxs("button",{onClick:_,className:"save-btn",disabled:c,children:[r.jsx(Js,{size:16})," ",c?"Saving...":"Save Changes"]})]})]})}):null},IA=15,xO=()=>{const t=Mt(),{customColumnsConfig:e,refetch:n}=tN(),[i,a]=b.useState(!1),[s,o]=b.useState([]),[l,c]=b.useState(!0),[d,f]=b.useState(null),[p,y]=b.useState(""),[x,v]=b.useState(1),[S,N]=b.useState(1),[_,T]=b.useState(0),[C,O]=b.useState("created_at"),k=as(),P=ee=>{ee&&(k.prefetchQuery({queryKey:Ut.patients.context(ee),queryFn:async()=>{const we=await ue(`/api/patients/${ee}/context`);if(!we.ok)throw new Error("Failed to fetch patient context");return we.json()},staleTime:5*60*1e3}),k.prefetchQuery({queryKey:Ut.patientDebts.balance(ee),queryFn:async()=>{const we=await ue(`/api/patient-debts/${ee}/balance`);return we.ok?we.json():{netDebt:0}},staleTime:1*60*1e3}),k.prefetchQuery({queryKey:Ut.queue.latest(ee),queryFn:async()=>{const we=await ue(`/api/queue/patient/${ee}/latest`);if(!we.ok)throw new Error("Failed to fetch latest queue status");const Ue=await we.json();return Ue!=null&&Ue._id&&k.prefetchQuery({queryKey:Ut.queue.entry(Ue._id),queryFn:async()=>{const Ge=await ue(`/api/queue/doctor/complaint/${Ue._id}`);if(!Ge.ok)throw new Error("Failed to fetch complaint record");return Ge.json()},staleTime:1*60*1e3}),Ue},staleTime:5e3}),k.prefetchQuery({queryKey:Ut.dental.records(ee),queryFn:async()=>{const we=await ue(`/api/dental/patient/${ee}`);if(!we.ok)throw new Error("Failed to fetch dental records");return we.json()},staleTime:5*60*1e3}))},[I,F]=b.useState("desc"),[B,$]=b.useState(""),[L,V]=b.useState(!1),[H,te]=b.useState(null),[X,q]=b.useState([]),[W,ae]=b.useState(""),[G,z]=b.useState(!1),[le,je]=b.useState(null),[K,Oe]=b.useState(!0),[Ye,Me]=b.useState(null),[Ie,be]=b.useState(p);Gc(),b.useEffect(()=>{const ee=setTimeout(()=>{be(p),v(1)},500);return()=>{clearTimeout(ee)}},[p]);const re=b.useCallback(async()=>{Oe(!0),Me(null);try{const ee=await ue("/api/subscriptions");if(!ee.ok){let Ue=`Failed to fetch subscription plans (${ee.status})`;try{Ue=(await ee.json()).message||Ue}catch{}throw new Error(Ue)}const we=await ee.json();q(we)}catch(ee){console.error("Error fetching subscription plans:",ee),Me(ee.message||"An unknown error occurred while fetching plans."),q([])}finally{Oe(!1)}},[]),ve=b.useCallback(async(ee,we,Ue,Ge,Le)=>{c(!0),f(null);try{const oe=new URLSearchParams({page:ee.toString(),limit:IA.toString(),sortBy:Ue,sortOrder:Ge});we&&oe.append("search",we),Le&&oe.append("gender",Le);const _e=await ue(`/api/patients?${oe.toString()}`);if(!_e.ok){const ze=await _e.json();throw new Error(ze.message||"Failed to fetch patients")}const $e=await _e.json();o($e.patients),T($e.totalCount),v($e.currentPage),N($e.totalPages)}catch(oe){console.error("Error fetching patients:",oe),f(`Failed to load patients: ${oe.message}`),o([]),T(0),v(1),N(1)}finally{c(!1)}},[]);b.useEffect(()=>{ve(x,Ie,C,I,B),re()},[x,Ie,C,I,B,ve,re]);const ce=ee=>{const we=C===ee&&I==="asc"?"desc":"asc";O(ee),F(we),v(1)},fe=ee=>{try{return new Date(ee).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},se=()=>{V(!1),te(null),ae(""),je(null),z(!1)},Q=async(ee,we)=>{o(Ue=>Ue.map(Ge=>Ge.id===ee?{...Ge,insurance_type:we}:Ge));try{const Ue=await ue(`/api/patients/${ee}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:we})});if(!Ue.ok){const Ge=await Ue.json();throw new Error(Ge.message||"Failed to update insurance type")}}catch(Ue){console.error("Error updating insurance type:",Ue),ve(x,Ie,C,I,B)}},ie=(ee,we)=>{const Ue=new Date(ee),Ge=we.interval||1;switch(we.period){case"daily":Ue.setDate(ee.getDate()+Ge);break;case"weekly":Ue.setDate(ee.getDate()+Ge*7);break;case"monthly":Ue.setMonth(ee.getMonth()+Ge);break;case"yearly":Ue.setFullYear(ee.getFullYear()+Ge);break;default:console.warn(`Unknown subscription period: ${we.period}. Defaulting to 1 month.`),Ue.setMonth(ee.getMonth()+1)}return Ue},ge=async()=>{if(!H||!W){je("Please select a subscription plan.");return}const ee=X.find(we=>we.id===W);if(!ee){je("Selected plan details not found.");return}z(!0),je(null);try{const we=new Date,Ue=ie(we,ee),Ge={subscription_plan_id:W,subscription_status:"active",subscription_start_date:we.toISOString(),subscription_end_date:Ue.toISOString(),subscription_payment_method:"manual"},Le=await ue(`/api/patients/${H.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ge)});if(!Le.ok){const oe=await Le.json();throw new Error(oe.message||"Failed to update patient subscription")}se(),ve(x,Ie,C,I,B)}catch(we){console.error("Error starting subscription:",we),je(`Failed to start subscription: ${we.message}`)}finally{z(!1)}};return r.jsxs("div",{className:"all-patients-container",children:[r.jsxs("div",{className:"all-patients-header-section",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(nn,{size:16})}),r.jsxs("h1",{className:"all-patients-title",children:[r.jsx(vr,{size:28}),"All Patients"]})]}),r.jsxs("div",{className:"controls-container",children:[!K&&!Ye&&X.length>0&&r.jsx("div",{className:"compact-subscriptions",children:X.map(ee=>r.jsxs("span",{className:"plan-chip",title:`${ee.name}: ${ee.price} / ${ee.interval} ${ee.period}${ee.description?" - "+ee.description:""}`,children:[ee.name,": ",ee.price]},ee.id))}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search...",className:"search-input",value:p,onChange:ee=>y(ee.target.value)}),r.jsx(Hn,{className:"search-input-icon",size:16})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("div",{className:"filter-select-container",children:[r.jsx(gX,{size:14,className:"filter-select-icon"}),r.jsxs("select",{id:"genderFilter",value:B,onChange:ee=>$(ee.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"Gender"}),r.jsx("option",{value:"M",children:"M"}),r.jsx("option",{value:"F",children:"F"}),r.jsx("option",{value:"O",children:"O"})]})]})}),r.jsxs("button",{onClick:()=>a(!0),className:"action-button",title:"Manage Custom Columns",children:[r.jsx(od,{size:14})," Columns"]})]})]}),d&&r.jsxs("div",{className:"error-alert",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:d})]}),l?r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:50,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{className:"patient-name",children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:120,height:20})]})}),r.jsx("td",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:32})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:32,style:{borderRadius:"4px"}})})]},ee))})]})}):s.length===0?r.jsx("div",{className:"empty-state",children:Ie?"No patients found matching your search.":"No patients registered yet."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ce("name"),children:["Name",C==="name"&&(I==="asc"?r.jsx(gI,{size:14,className:"sort-icon"}):r.jsx(mI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Age"}),r.jsx("th",{children:"Gender"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Address"}),r.jsxs("th",{className:"sortable-header",onClick:()=>ce("created_at"),children:["Registered On",C==="created_at"&&(I==="asc"?r.jsx(gI,{size:14,className:"sort-icon"}):r.jsx(mI,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Insurance Type"})," ",r.jsx("th",{children:"Action"})," "]})}),r.jsx("tbody",{children:s.map(ee=>r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{className:"patient-row clickable-row",onClick:()=>t(`/dashboard/edit-complaint/patient/${ee.id}`),onMouseEnter:()=>P(ee.id),children:[r.jsx("td",{children:ee.token??"-"}),r.jsx("td",{className:"patient-name",children:ee.name}),r.jsx("td",{children:ee.age??"-"}),r.jsx("td",{children:ee.gender??"-"}),r.jsx("td",{children:ee.phone??"-"}),r.jsx("td",{children:ee.address??"-"}),r.jsx("td",{children:fe(ee.created_at)}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${ee.subscription_status==="active"?"active":ee.subscription_status==="cancelled"||ee.subscription_status==="expired"?"inactive":"none"}`,children:ee.subscription_status??"None"})}),r.jsx("td",{children:r.jsxs("select",{value:ee.insurance_type,onClick:we=>we.stopPropagation(),onChange:we=>Q(ee.id,we.target.value),className:"form-select insurance-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),r.jsx("td",{children:r.jsx("button",{onClick:we=>{we.stopPropagation(),t(`/start-subscription/${ee.id}`)},className:"action-button",children:"Start Sub"})})]}),e.patients&&e.patients.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:10,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:e.patients.map(we=>{var Ue;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[we.label,":"]})," ",(Ue=ee.custom_fields)!=null&&Ue[we.key]?String(ee.custom_fields[we.key]):"-"]},we.key)})})})})]},ee.id))})]})}),S>1&&r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("div",{className:"pagination-info",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(x-1)*IA+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(x*IA,_)})," ","of"," ",r.jsx("span",{className:"font-medium",children:_})," results"]}),r.jsxs("div",{className:"pagination-buttons",children:[r.jsxs("button",{onClick:()=>v(ee=>Math.max(ee-1,1)),disabled:x===1||l,className:"pagination-button",children:[r.jsx(Cb,{size:16,className:"prev-icon"}),"Previous"]}),r.jsxs("span",{className:"pagination-current-page",children:["Page ",r.jsx("span",{className:"font-medium",children:x})," of ",r.jsx("span",{className:"font-medium",children:S})]}),r.jsxs("button",{onClick:()=>v(ee=>Math.min(ee+1,S)),disabled:x===S||l,className:"pagination-button",children:["Next",r.jsx(dd,{size:16,className:"next-icon"})]})]})]})]}),L&&H&&r.jsx("div",{className:"subscription-modal-overlay",children:r.jsxs("div",{className:"subscription-modal-content",children:[r.jsxs("div",{className:"subscription-modal-header",children:[r.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",H.name]}),r.jsx("button",{onClick:se,className:"subscription-modal-close-button",children:r.jsx(qt,{size:24})})]}),le&&r.jsx("div",{className:"error-alert",role:"alert",children:r.jsx("span",{children:le})}),r.jsxs("div",{className:"subscription-modal-body",children:[r.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),r.jsxs("select",{id:"subscriptionPlan",value:W,onChange:ee=>ae(ee.target.value),className:"form-select",disabled:G||K||Ye!==null||X.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),K?r.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):Ye?r.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):X.length>0?X.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.name," - ",ee.price," (",ee.interval," ",ee.period,ee.interval>1?"s":"",")"]},ee.id)):r.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),Ye&&r.jsx("p",{className:"error-message",children:Ye}),X.length===0&&!K&&!Ye&&r.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),r.jsxs("div",{className:"subscription-modal-footer",children:[r.jsx("button",{onClick:se,disabled:G,className:"subscription-modal-button cancel",children:"Cancel"}),r.jsx("button",{onClick:ge,disabled:!W||G,className:"subscription-modal-button submit",children:G?"Starting...":"Start Subscription"})]})]})}),r.jsx(kM,{isOpen:i,onClose:()=>a(!1),entityType:"patients",entityLabel:"Patients",currentConfig:e,onConfigUpdated:()=>{n()}})]})},YH=()=>{const t=Mt(),[e,n]=b.useState(""),[i,a]=b.useState([]),[s,o]=b.useState(!1),[l,c]=b.useState(!1),[d,f]=b.useState(!1),p=/^\+?[0-9\s\-().]{7,20}$/,y=b.useMemo(()=>ud(async _=>{if(_.trim().length<2){a([]),o(!1);return}o(!0);try{const T=new URLSearchParams({search:encodeURIComponent(_),page:"1",limit:"8",sortBy:"name",sortOrder:"asc"}),C=await ue(`/api/patients?${T.toString()}`);if(!C.ok)throw new Error("Failed to search");const O=await C.json();a(O.patients)}catch{a([])}finally{o(!1)}},300),[]),x=_=>{const T=_.target.value;n(T),c(p.test(T)),o(!0),f(!0),y(T)},v=b.useCallback(_=>{t("/billing",{state:{patientId:_.id,patientName:_.name}})},[t]),S=b.useCallback(async()=>{if(!(!e||!l)){o(!0);try{const T=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Direct Patient",phone:e,age:null,gender:null,token:null})});if(!T.ok)throw new Error("Failed to create patient");const C=await T.json();v(C)}catch(_){alert(`Error: ${_.message}`)}finally{o(!1)}}},[e,l,v]),N=_=>_.slice(0,1).toUpperCase();return r.jsxs("div",{className:"ccb-container",children:[r.jsxs("div",{className:"ccb-header-section",children:[r.jsx("button",{onClick:()=>t(-1),className:"ccb-back-button",title:"Go Back",children:r.jsx(nn,{size:24})}),r.jsx("h1",{className:"ccb-title",children:"Create Custom Bill"}),r.jsx("p",{className:"ccb-subtitle",children:"Search for a patient to bill manually, or create a new one instantly."})]}),r.jsxs("div",{className:"ccb-search-wrapper",children:[r.jsx(Hn,{className:"ccb-search-icon",size:20}),r.jsx("input",{type:"text",placeholder:"Search by Name, Phone, or Token...",value:e,onChange:x,onFocus:()=>f(!0),className:"ccb-search-input",autoFocus:!0}),e&&r.jsx("div",{className:"ccb-clear-icon",onClick:()=>{n(""),a([]),f(!1)},children:r.jsx(qt,{size:18})}),r.jsxs("div",{className:`ccb-results-dropdown ${d&&(i.length>0||s||e.length>2&&i.length===0)?"open":""}`,children:[s&&r.jsx("div",{className:"p-4 flex justify-center items-center",children:r.jsx("div",{className:"ccb-spinner"})}),!s&&i.map(_=>r.jsxs("div",{onClick:()=>v(_),className:"ccb-result-item",children:[r.jsxs("div",{className:"ccb-patient-info",children:[r.jsx("div",{className:"ccb-avatar",children:N(_.name)}),r.jsxs("div",{className:"ccb-patient-details",children:[r.jsx("h4",{children:_.name}),r.jsxs("p",{className:"ccb-patient-meta",children:[_.phone||"No phone","  ",_.gender||"-","  ",_.age?`${_.age}y`:"-"]})]})]}),r.jsxs("span",{className:"ccb-token-badge",children:["#",_.token]})]},_.id)),!s&&i.length===0&&e.length>2&&r.jsxs("div",{className:"ccb-create-action",children:[r.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No patients found."}),l&&r.jsxs("button",{onClick:S,className:"ccb-create-btn w-full",children:["Create Patient with Phone ",e]})]})]})]})]})},KH=({currentUser:t})=>{const e=Mt(),n=as(),[i,a]=b.useState("select_patient"),[s,o]=b.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,c]=b.useState(null),[d,f]=b.useState([]),[p,y]=b.useState([]),[x,v]=b.useState(""),[S,N]=b.useState([]),[_,T]=b.useState(""),[C,O]=b.useState([]),[k,P]=b.useState(!1),[I,F]=b.useState(null),[B,$]=b.useState(null),[L,V]=b.useState(null),[H,te]=b.useState(!1),[X,q]=b.useState(!1),[W,ae]=b.useState(!1),G=/^\+?[0-9\s\-().]{7,20}$/,z=/^[a-zA-Z\s'-]{2,}$/,le=b.useCallback(async()=>{if(!(d.length>0)){te(!0),V(null);try{const Q=await ue("/api/lab-tests");if(!Q.ok)throw new Error("Failed to fetch lab tests");const ie=await Q.json();f(ie)}catch(Q){console.error("Failed to fetch available lab tests:",Q),V("Could not load lab test list: "+Q.message),f([])}finally{te(!1)}}},[d.length]),je=Q=>{Q&&(n.prefetchQuery({queryKey:Ut.patients.context(Q),queryFn:async()=>{const ie=await ue(`/api/patients/${Q}/context`);if(!ie.ok)throw new Error("Failed to fetch patient context");return ie.json()},staleTime:1e3*60*5}),n.prefetchQuery({queryKey:Ut.patientDebts.balance(Q),queryFn:async()=>{const ie=await ue(`/api/patient-debts/${Q}/balance`);if(!ie.ok)throw new Error("Failed to fetch patient debt");return ie.json()},staleTime:1e3*60}),n.prefetchQuery({queryKey:Ut.queue.latest(Q),queryFn:async()=>{const ie=await ue(`/api/queue/patient/${Q}/latest`);if(!ie.ok){if(ie.status===404)return null;throw new Error("Failed to fetch queue status")}return ie.json()},staleTime:1e3*5}))},K=b.useMemo(()=>new eo(d,{keys:["name","description"],threshold:.3,ignoreLocation:!0}),[d]);b.useEffect(()=>{if(!x){N([]);return}const Q=K.search(x).map(ie=>ie.item);N(Q.slice(0,10))},[x,K]);const Oe=b.useCallback(Q=>{const ie={id:Q.id,name:Q.name,token:Q.token,age:Q.age,gender:Q.gender,phone:Q.phone};c(ie),a("create_order"),y([]),v(""),N([]),V(null),le()},[le]),Ye=b.useMemo(()=>ud(async Q=>{if(Q.trim().length<2){O([]),P(!1),F(null);return}P(!0),F(null);try{const ie=new URLSearchParams({search:encodeURIComponent(Q),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),ge=await ue(`/api/patients?${ie.toString()}`);if(!ge.ok){const we=await ge.text();throw new Error(`API Error (${ge.status}): ${we||ge.statusText}`)}const ee=await ge.json();O(ee.patients)}catch(ie){console.error("Error searching lab patients:",ie),F(ie.message||"Failed to search lab patients."),O([])}finally{P(!1)}},300),[G,z]),Me=Q=>{const ie=Q.target.value;T(ie),q(G.test(ie)),ae(z.test(ie)&&!G.test(ie)),P(!0),Ye(ie)},Ie=b.useCallback(async Q=>{if(!_||Q==="phone"&&!X||Q==="name"&&!W){F(`Invalid ${Q} to create a new patient.`);return}P(!0),F(null);try{const ge=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Q==="name"?_:"direct lab",phone:Q==="phone"?_:null,age:null,gender:null,token:null})});if(!ge.ok){const we=await ge.json();throw new Error(we.message||`Failed to create patient: ${ge.statusText}`)}const ee=await ge.json();alert(`New patient "${ee.name}" created with ${Q==="phone"?`phone ${ee.phone}`:`name ${ee.name}`}.`),Oe({id:ee.id,name:ee.name,token:ee.token??null,age:ee.age??null,gender:ee.gender??null,phone:ee.phone})}catch(ie){console.error("Error creating new patient:",ie),F(ie.message||"Failed to create new patient.")}finally{P(!1)}},[_,X,W,Oe]),be=()=>{a("select_patient"),c(null),T(""),O([]),F(null)},re=Q=>{const{name:ie,value:ge}=Q.target;o(ee=>({...ee,[ie]:ie==="age"?ge?parseInt(ge,10):void 0:ge}))},ve=async Q=>{if(Q.preventDefault(),$(null),!s.name){$("Patient Name is required.");return}const ie={name:s.name,age:s.age,gender:s.gender,phone:s.phone,address:s.address};try{const ge=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!ge.ok){const we=await ge.json();throw new Error(we.message||`Failed to create patient: ${ge.statusText}`)}const ee=await ge.json();Oe({id:ee.id,name:ee.name,token:ee.token??null,age:ee.age??null,gender:ee.gender??null,phone:ee.phone})}catch(ge){console.error("Failed to create patient:",ge),$(ge.message||"Failed to create patient. Please try again.")}},ce=Q=>{if(p.some(ie=>ie.id===Q.id)){V(`${Q.name} is already in the order.`),setTimeout(()=>V(null),3e3),v(""),N([]);return}y(ie=>[...ie,{...Q}]),v(""),N([])},fe=Q=>{y(ie=>ie.filter(ge=>ge.id!==Q))},se=async Q=>{if(Q.preventDefault(),V(null),!l){V("No patient selected.");return}if(p.length===0){V("No lab tests selected.");return}const ie={patient_id:l.id,tests:p.map(ge=>({id:ge.id,name:ge.name,price:ge.price}))};console.log("Submitting Lab Order:",ie);try{const ge=await ue("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!ge.ok){const Ue=await ge.json();throw console.error("API Error Data:",Ue),new Error(Ue.message||`Failed to create lab order: ${ge.statusText}`)}const ee=await ge.json();console.log("Lab Order Creation Result:",ee);let we=l.queueId;if(!we){const Ue=await ue(`/api/queue/patient/${l.id}/latest`);if(Ue.ok){const Ge=await Ue.json();Ge!=null&&Ge._id&&(we=Ge._id)}}if(!we){const Ue=await ue("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id})});if(!Ue.ok){const Le=await Ue.text();throw new Error(`Failed to create queue entry for redirection: ${Le||Ue.statusText}`)}const Ge=await Ue.json();if(Ge!=null&&Ge.id)we=Ge.id;else throw new Error("Failed to get ID from new queue entry for redirection.")}(t==null?void 0:t.role)==="lab"?e("/dashboard"):e(`/dashboard/edit-complaint/${we}`)}catch(ge){console.error("Failed to create lab order:",ge),V(ge.message||"Failed to create lab order.")}};return b.useEffect(()=>{le()},[le]),r.jsxs("div",{className:"create-lab-order-container",children:[r.jsxs("div",{className:"create-lab-order-header",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button","aria-label":"Go back",children:r.jsx(nn,{size:20})}),r.jsx("h1",{className:"create-lab-order-title",children:"Create New Lab Order"}),r.jsx("div",{style:{width:"64px"}})," "]}),(i==="select_patient"||i==="create_patient")&&r.jsxs("div",{className:"glass-card",children:[i==="select_patient"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"header-with-action",children:r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Select Patient"})}),r.jsxs("div",{className:"search-container",children:[r.jsx(Hn,{className:"search-icon",size:20}),r.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No...",value:_,onChange:Me,className:"modern-input",autoFocus:!0,autoComplete:"off"}),k&&r.jsx("div",{style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(Z,{width:80,height:14})})]}),k&&r.jsx("ul",{className:"patient-list",children:[1,2,3].map(Q=>r.jsxs("li",{className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx(Z,{width:120,height:20}),r.jsx(Z,{width:50,height:24,style:{borderRadius:"12px"}})]}),r.jsx("div",{className:"patient-details",children:r.jsx(Z,{width:200,height:16})})]},Q))}),I&&r.jsxs("div",{className:"error-message",children:[r.jsx(Xr,{size:18}),I]}),C.length>0&&r.jsx("ul",{className:"patient-list",children:C.map(Q=>r.jsxs("li",{onClick:()=>Oe(Q),onMouseEnter:()=>je(Q.id),className:"patient-list-item",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("strong",{children:Q.name}),r.jsxs("span",{className:"token-badge",children:["#",Q.token||"N/A"]})]}),r.jsxs("div",{className:"patient-details",children:[Q.age?`${Q.age} yrs`:"",Q.gender?` / ${Q.gender}`:"",Q.phone?`  ${Q.phone}`:""]})]},Q.id))}),_.length>=2&&!k&&C.length===0&&!I&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{className:"no-data-message",style:{background:"none",border:"none",padding:0},children:['No patients found matching "',_,'".']}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px",marginTop:"15px"},children:[X&&r.jsxs("button",{type:"button",onClick:()=>Ie("phone"),className:"secondary-button",children:['Create "Direct Lab" Patient (Phone: ',_,")"]}),W&&r.jsxs("button",{type:"button",onClick:()=>Ie("name"),className:"secondary-button",children:["Create Patient (Name: ",_,")"]})]})]}),_.length<2&&!k&&r.jsx("div",{className:"info-message",children:"Start typing to search for a patient..."})]}),i==="create_patient"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"New Patient Registration"}),r.jsx("button",{onClick:be,className:"text-button",children:" Back to Search "})]}),B&&r.jsxs("div",{className:"error-message",children:[r.jsx(Xr,{size:18}),B]}),r.jsxs("form",{onSubmit:ve,children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-name",className:"form-label",children:"Patient Name *"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(vr,{className:"search-icon",size:18}),r.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:s.name,onChange:re,className:"modern-input",placeholder:"Enter full name"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-age",className:"form-label",children:"Age"}),r.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:s.age??"",onChange:re,className:"modern-input",style:{paddingLeft:"16px"},placeholder:"e.g. 30"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"lab-patient-gender",className:"form-label",children:"Gender"}),r.jsxs("select",{name:"gender",id:"lab-patient-gender",value:s.gender??"",onChange:re,className:"modern-input",style:{paddingLeft:"16px"},children:[r.jsx("option",{value:"",children:"Select Gender..."}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-phone",className:"form-label",children:"Phone Number"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(Jm,{className:"search-icon",size:18}),r.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:s.phone||"",onChange:re,className:"modern-input",placeholder:"e.g. 9876543210"})]})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{htmlFor:"lab-patient-address",className:"form-label",children:"Address"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[r.jsx(qz,{className:"search-icon",size:18,style:{top:"20px"}}),r.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:s.address||"",onChange:re,className:"modern-input",style:{resize:"none"},placeholder:"Enter address (optional)"})]})]})]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:be,className:"secondary-button",children:" Cancel "}),r.jsxs("button",{type:"submit",className:"primary-button",children:[r.jsx(ur,{size:18}),"Create & Proceed"]})]})]})]})]}),i==="create_order"&&l&&r.jsxs("div",{className:"glass-card",children:[r.jsxs("div",{className:"header-with-action",children:[r.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Create Lab Order"}),r.jsx("button",{onClick:be,className:"text-button",children:" Change Patient "})]}),r.jsxs("div",{className:"patient-summary",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(vr,{size:20,className:"highlight-primary"}),r.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600"},children:l.name})]}),r.jsxs("div",{className:"patient-details",style:{marginLeft:"30px",marginTop:"4px"},children:[l.age?`${l.age} yrs`:"Age N/A",l.gender&&`  ${l.gender}`,l.phone&&`  ${l.phone}`]})]}),L&&r.jsxs("div",{className:"error-message",children:[r.jsx(Xr,{size:18}),L]}),r.jsxs("form",{onSubmit:se,children:[r.jsxs("div",{className:"form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",className:"form-label",children:"Add Lab Test"}),r.jsxs("div",{className:"search-container",style:{margin:0},children:[H?r.jsx("div",{style:{position:"absolute",right:"45px",top:"50%",transform:"translateY(-50%)"},children:r.jsx(Z,{width:24,height:24,variant:"circular"})}):r.jsx(Hn,{className:"search-icon",size:18}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search tests (e.g. CBC, Lipid Profile)...",value:x,onChange:Q=>v(Q.target.value),className:"modern-input",disabled:H,autoComplete:"off"})]}),H&&x&&r.jsx("div",{className:"search-results-dropdown",children:[1,2,3].map(Q=>r.jsxs("div",{className:"search-result-item",children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"20%",height:20})]},Q))}),x&&S.length>0&&r.jsx("div",{className:"search-results-dropdown",children:S.map(Q=>r.jsxs("div",{onClick:()=>ce(Q),className:"search-result-item",children:[r.jsx("span",{style:{fontWeight:500},children:Q.name}),r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(Q.price).toFixed(2)]})]},Q.id))}),x&&S.length===0&&!H&&r.jsxs("div",{className:"no-data-message",style:{marginTop:"5px",padding:"10px",fontSize:"0.9rem"},children:['No tests found matching "',x,'".']})]}),r.jsxs("div",{style:{marginTop:"30px"},children:[r.jsxs("h4",{className:"card-title",style:{fontSize:"1.1rem"},children:["Selected Tests (",p.length,")"]}),p.length===0?r.jsx("div",{className:"info-message",children:"No tests added yet. Search above to add tests."}):r.jsx("div",{className:"selected-tests-list",children:p.map(Q=>r.jsxs("div",{className:"selected-test-item",children:[r.jsx("div",{style:{flex:1},children:r.jsx("div",{style:{fontWeight:500},children:Q.name})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[r.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(Q.price).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>fe(Q.id),className:"remove-button",title:"Remove Test",children:r.jsx(Wn,{size:18})})]})]},Q.id))})]}),p.length>0&&r.jsxs("div",{className:"total-price",children:["Total: ",p.reduce((Q,ie)=>Q+parseFloat(ie.price),0).toFixed(2)]}),r.jsxs("div",{className:"flex-end",children:[r.jsx("button",{type:"button",onClick:be,className:"secondary-button",children:" Cancel Order "}),r.jsxs("button",{type:"submit",disabled:p.length===0,className:"primary-button",children:[r.jsx(vE,{size:18}),"Create Lab Order"]})]})]})]})]})},aDe=()=>{const t=b.useRef(null),e=b.useRef(null),[n,i]=b.useState(!1),[a,s]=b.useState(0),[o,l]=b.useState(!1),[c,d]=b.useState(!1),[f,p]=b.useState(null),y=30,x=100,v=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:!0});t.current&&(t.current.srcObject=_,d(!0),p(null))}catch(_){console.error("Error accessing camera:",_),p("Camera access denied. Please allow camera permissions to use motion detection."),d(!1)}},S=()=>{var T;const _=(T=t.current)==null?void 0:T.srcObject;_&&_.getTracks().forEach(C=>C.stop()),d(!1)};b.useEffect(()=>(v(),()=>S()),[]),b.useEffect(()=>{if(!c)return;let _;const T=e.current,C=t.current;if(!T||!C)return;const O=T.getContext("2d",{willReadFrequently:!0});if(!O)return;const k=320,P=240;T.width=k,T.height=P;let I=null;const F=()=>{if(C.readyState===C.HAVE_ENOUGH_DATA){O.drawImage(C,0,0,k,P);const $=O.getImageData(0,0,k,P).data;if(I){let L=0;for(let V=0;V<$.length;V+=4*4){const H=Math.abs($[V]-I[V]),te=Math.abs($[V+1]-I[V+1]),X=Math.abs($[V+2]-I[V+2]);H+te+X>y&&L++}if(L>x){const V=Date.now();s(V),i(!0),o||l(!0)}else i(!1)}I=$}_=requestAnimationFrame(F)};return F(),()=>{cancelAnimationFrame(_)}},[c,o]);const N=()=>{l(!1)};return r.jsxs("div",{className:"motion-detect-container",style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{className:"status-header bg-white p-4 rounded-lg shadow-sm flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${c?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:r.jsx(pE,{size:24})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Motion Detection Status"}),r.jsx("p",{className:"text-sm text-gray-500",children:c?"Camera Active - Monitoring":"Camera Inactive"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${n?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(xc,{size:16}),r.jsx("span",{className:"font-medium",children:n?"Motion Detected!":"No Motion"})]}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${o?"bg-blue-50 border-blue-200 text-blue-600":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[r.jsx(gE,{size:16}),r.jsx("span",{className:"font-medium",children:o?"AI Assistant Active":"AI Assistant Idle"})]})]})]}),f&&r.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-200",children:f}),r.jsxs("div",{className:"video-feed-container bg-black rounded-lg overflow-hidden relative shadow-lg",style:{maxWidth:"640px",margin:"0 auto"},children:[r.jsx("video",{ref:t,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",display:c?"block":"none"}}),r.jsx("canvas",{ref:e,style:{display:"none"}}),!c&&!f&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:r.jsxs("div",{className:"text-center",children:[r.jsx(pE,{size:48,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Connecting to camera..."})]})})]}),o&&r.jsx(eN,{onClose:N,patientData:null,tokenNumber:null,onAiSummaryChange:()=>{},lastMotionTimestamp:a,backgroundMode:!0})]})},sDe=async()=>{const t=await ue("/api/staff");if(!t.ok)throw new Error("Failed to fetch staff");const e=await t.json();return e.staff||e||[]};function oDe(){return PS({queryKey:[...Ut.staff.list,"doctors"],queryFn:sDe,staleTime:5*60*1e3,select:t=>t.filter(e=>e.role==="doctor"||e.role==="admin")})}const mB=({currentUser:t})=>{const[e,n]=b.useState("queue"),[i,a]=b.useState(""),[s,o]=b.useState(new Date),l=s.toISOString().split("T")[0],[c,d]=b.useState(!1),[f,p]=b.useState("list"),{data:y,isLoading:x,refetch:v}=WH(l),S=(y==null?void 0:y.list)||[],{data:N=[],isLoading:_}=oDe(),T=tDe(),C=as(),[O,k]=b.useState(null),[P,I]=b.useState(null),F=Mt(),B=Vr(),$=()=>{v()};b.useEffect(()=>{const z=new URLSearchParams(B.search).get("tab");z&&X.find(je=>je.id===z)&&n(z)},[B.search]),b.useEffect(()=>{e==="queue"&&v()},[e,v]);const L=b.useCallback(async(G,z)=>{if(console.log(`Attempting to assign doctor ${z} to queue ${G}`),I(null),k(null),!z){console.log("No doctor ID provided, skipping assignment.");return}const le=S.find(Oe=>Oe.id===G);if(!le){console.error(`Queue entry ${G} not found in local state.`),I("Queue entry not found.");return}if(le.doctor_id===z){console.log(`Queue ${G} already assigned to doctor ${z}. Skipping.`);return}const je=async Oe=>{if(!Oe||!Oe.id||!Oe.name){I("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",Oe);return}const Ye=async()=>{try{await T.mutateAsync({queueId:G,status:"waiting",doctorId:z});const Me=N.find(Ie=>Ie.id===z);return console.log(`Successfully assigned doctor ${Me==null?void 0:Me.name} to queue ${G}.`),!0}catch(Me){return console.error(`Error assigning doctor for queue ${G}:`,Me),I(`Failed to assign doctor: ${Me.message}`),!1}};Oe.subscription_status==="active"?(console.log(`Patient ${Oe.name} (ID: ${Oe.id}) has active subscription. Assigning doctor directly.`),await Ye()):(console.log(`Patient ${Oe.name} (ID: ${Oe.id}) does not have active subscription. Navigating to billing WITHOUT assigning doctor yet.`),F(`/dashboard/doctor-billing/${G}?doctorId=${z}`))},K=le.Patient;if(K&&K.id&&K.name)console.log("Patient details found in state. Proceeding with assignment."),await je(K);else{console.warn(`Patient details missing for queue entry ${G}. Fetching patient ${le.patient_id}...`);try{const Oe=await ue(`/api/patients/${le.patient_id}`);if(!Oe.ok){const Me=await Oe.json().catch(()=>({}));throw new Error(Me.message||`Failed to fetch patient details (status ${Oe.status})`)}const Ye=await Oe.json();console.log("Successfully fetched patient details:",Ye),await je(Ye)}catch(Oe){console.error(`Failed to fetch patient details for patient ID ${le.patient_id}:`,Oe),I(`Failed to fetch required patient details: ${Oe.message}`)}}},[N,S,F,T]),V=G=>{G&&(C.prefetchQuery({queryKey:Ut.patients.context(G),queryFn:async()=>{const z=await ue(`/api/patients/${G}/context`);if(!z.ok)throw new Error("Failed to fetch patient context");return z.json()},staleTime:5*60*1e3}),C.prefetchQuery({queryKey:Ut.patientDebts.balance(G),queryFn:async()=>{const z=await ue(`/api/patient-debts/${G}/balance`);return z.ok?z.json():{netDebt:0}},staleTime:1*60*1e3}),C.prefetchQuery({queryKey:Ut.queue.latest(G),queryFn:async()=>{const z=await ue(`/api/queue/patient/${G}/latest`);if(!z.ok)throw new Error("Failed to fetch latest queue status");const le=await z.json();return le!=null&&le._id&&C.prefetchQuery({queryKey:Ut.queue.entry(le._id),queryFn:async()=>{const je=await ue(`/api/queue/doctor/complaint/${le._id}`);if(!je.ok)throw new Error("Failed to fetch complaint record");return je.json()},staleTime:1*60*1e3}),le},staleTime:5e3}),C.prefetchQuery({queryKey:Ut.dental.records(G),queryFn:async()=>{const z=await ue(`/api/dental/patient/${G}`);if(!z.ok)throw new Error("Failed to fetch dental records");return z.json()},staleTime:5*60*1e3}))},H=async(G,z)=>{var je;I(null);const le=z==="consulting"?"start consultation":"complete visit";try{await T.mutateAsync({queueId:G,status:z,doctorId:z==="consulting"&&((je=S.find(K=>K.id===G))==null?void 0:je.doctor_id)||void 0})}catch(K){console.error(`Error trying to ${le}:`,K),I(`Failed to ${le}: ${K.message}`)}},te=async(G,z)=>{let le="red";z==="red"?le="green":z==="green"?le="blue":z==="blue"?le=null:le="red";try{if(!(await ue(`/api/patients/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_code:le})})).ok)throw new Error("Failed to update patient color");v()}catch(je){console.error("Error updating patient color:",je)}},X=[{id:"queue",label:"Appointment Queue",icon:r.jsx(Eo,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:r.jsx(Hn,{size:20})},{id:"manage-admission",label:"Manage Admission",icon:r.jsx(vQ,{size:20})},{id:"all-patients",label:"All Patients",icon:r.jsx(kb,{size:20})},{id:"lab",label:"Lab Tests",icon:r.jsx(Qj,{size:20})},{id:"custom-bill",label:"Custom Bill",icon:r.jsx(_s,{size:20})},{id:"motion-detect",label:"Motion Detect",icon:r.jsx(pE,{size:20})}],q=G=>{try{return new Date(G).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},W=S.filter(G=>{var z,le;return(le=(z=G.Patient)==null?void 0:z.name)==null?void 0:le.toLowerCase().includes(i.toLowerCase())}),{openCommandBar:ae}=Pc();return r.jsxs("div",{className:"admin-panel-container",children:[P&&r.jsxs("div",{className:"error-message-reception",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:P})]}),r.jsx("div",{className:"admin-nav-bar",children:X.map(G=>r.jsxs("button",{className:`admin-nav-button ${e===G.id?"active":""}`,onClick:()=>{G.id==="newtons-ai"?ae():n(G.id)},children:[r.jsx("span",{children:G.icon}),G.label]},G.id))}),r.jsx("div",{className:"admin-content-section",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[e==="queue"&&r.jsxs("div",{className:"space-y-6",children:[" ",r.jsxs("div",{className:"queue-header",children:[r.jsxs("div",{className:"queue-actions",children:[r.jsxs("div",{className:"search-bar-container",children:[r.jsx("input",{type:"text",placeholder:"Search patients...",className:"search-input",value:i,onChange:G=>a(G.target.value)}),r.jsx(Hn,{className:"search-icon",size:18})]}),r.jsxs("div",{className:"controls-row",children:[r.jsxs("div",{className:"view-toggle-container",children:[r.jsx("button",{className:`view-toggle-btn ${f==="list"?"active":""}`,onClick:()=>p("list"),title:"List View",children:r.jsx(Rz,{size:16})}),r.jsx("button",{className:`view-toggle-btn ${f==="timeline"?"active":""}`,onClick:()=>p("timeline"),title:"Timeline View",children:r.jsx($O,{size:16})})]}),r.jsxs("div",{className:"date-picker-container",children:[r.jsx(gi,{size:16,className:"text-gray-500"}),r.jsx("input",{type:"date",className:"date-input",value:s.toISOString().split("T")[0],onChange:G=>o(new Date(G.target.value))})]}),r.jsxs("button",{onClick:()=>d(!0),className:"appointment-button",children:[r.jsx(Tb,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),r.jsx("span",{className:"sm:hidden",children:"Book"})]})]})]}),r.jsxs("div",{className:"summary-cards-grid",children:[r.jsxs("div",{className:"summary-card card-waiting",children:[r.jsx("div",{className:"summary-card-title",children:"Waiting"}),r.jsx("div",{className:"summary-card-value",children:S.filter(G=>G.status==="waiting").length})]}),r.jsxs("div",{className:"summary-card card-consulting",children:[r.jsx("div",{className:"summary-card-title",children:"Consulting"}),r.jsx("div",{className:"summary-card-value",children:S.filter(G=>G.status==="consulting").length})]}),r.jsxs("div",{className:"summary-card card-completed",children:[r.jsx("div",{className:"summary-card-title",children:"Completed"}),r.jsx("div",{className:"summary-card-value",children:S.filter(G=>G.status==="seen").length})]})]})]}),r.jsx(GH,{isOpen:c,onClose:()=>{d(!1),v()},onAppointmentBooked:$}),x&&S.length===0?r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:50,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{className:"hidden md:table-cell",children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:120,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(G=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:32})})]},G))})]})}):W.length===0?r.jsx("div",{className:"empty-queue-message",children:i?"No patients found matching your search.":"Queue is empty."}):f==="timeline"?r.jsx(HH,{queueList:W,onPatientClick:G=>F(`/dashboard/edit-complaint/${G.id}`)}):r.jsx("div",{className:"queue-table-wrapper",children:r.jsxs("table",{className:"queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"hidden-mobile",children:"Token"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{className:"hidden-mobile",children:"Phone"}),r.jsx("th",{className:"hidden-mobile",children:"Complaint"}),r.jsx("th",{className:"hidden-mobile",children:"Subscription"}),r.jsx("th",{className:"hidden-mobile",children:"Time"}),r.jsx("th",{className:"text-center",children:"Action"})]})}),r.jsx("tbody",{children:W.map(G=>{var z,le,je,K,Oe,Ye,Me,Ie,be,re,ve,ce;return r.jsxs("tr",{onClick:()=>F(`/dashboard/edit-complaint/${G.id}`),onMouseEnter:()=>G.patient_id&&V(G.patient_id),className:"queue-row-clickable",children:[r.jsxs("td",{className:"hidden-mobile",children:[" ",r.jsxs("span",{className:"queue-token",children:["#",G.token_no]})," "]}),r.jsx("td",{children:r.jsxs("div",{className:"patient-cell-content",children:[r.jsx("span",{className:`color-dot color-${((z=G.Patient)==null?void 0:z.color_code)||"none"}`,onClick:fe=>{var se;fe.stopPropagation(),(se=G.Patient)!=null&&se.id&&te(G.Patient.id,G.Patient.color_code)},title:"Click to change color"}),r.jsxs("div",{className:"patient-info",children:[r.jsx("span",{className:"name",children:((le=G.Patient)==null?void 0:le.name)||"N/A"}),r.jsxs("span",{className:"details",children:[(je=G.Patient)!=null&&je.age?`${G.Patient.age}y`:"",(K=G.Patient)!=null&&K.gender?`, ${G.Patient.gender}`:""]})]})]})}),r.jsxs("td",{className:"hidden-mobile",children:[" ",r.jsx("div",{className:"text-sm text-gray-500",children:((Oe=G.Patient)==null?void 0:Oe.phone)||"-"})," "]}),r.jsx("td",{className:"hidden-mobile",children:r.jsx("span",{className:"complaint-badge",children:G.complaint||"-"})}),r.jsxs("td",{className:"hidden-mobile",children:[r.jsx("span",{className:`status-badge ${((Ye=G.Patient)==null?void 0:Ye.subscription_status)==="active"?"status-active":((Me=G.Patient)==null?void 0:Me.subscription_status)==="cancelled"||((Ie=G.Patient)==null?void 0:Ie.subscription_status)==="expired"?"status-inactive":"status-none"}`,children:((be=G.Patient)==null?void 0:be.subscription_status)??"None"}),G.Patient&&G.Patient.id&&G.Patient.subscription_status!=="active"&&r.jsx("button",{onClick:fe=>{fe.stopPropagation(),G.Patient&&F(`/start-subscription/${G.Patient.id}`)},className:"btn-start-sub ml-2",children:"Start Sub"})]}),r.jsx("td",{className:"hidden-mobile text-sm text-gray-500",children:q(G.createdAt)}),r.jsx("td",{className:"action-doctor-cell",children:O===G.id?r.jsx("div",{className:"relative inline-block text-left w-full",onClick:fe=>fe.stopPropagation(),children:r.jsxs("select",{value:"",onChange:fe=>L(G.id,fe.target.value),onBlur:()=>k(null),className:"doctor-select",autoFocus:!0,children:[r.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),_?r.jsx("option",{disabled:!0,children:"Loading..."}):N.length>0?N.map(fe=>r.jsx("option",{value:fe.id,children:fe.name},fe.id)):r.jsx("option",{disabled:!0,children:"No doctors available"})]})}):r.jsxs("div",{className:"action-doctor-content",onClick:fe=>fe.stopPropagation(),children:[G.status==="waiting"&&r.jsx(r.Fragment,{children:(re=G.User)!=null&&re.name?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"doctor-name-display",children:G.User.name}),r.jsx("button",{onClick:()=>H(G.id,"consulting"),className:"btn-action btn-start",children:"Start"})]}):_?r.jsx(Z,{width:80,height:20}):N.length===0?r.jsx("span",{className:"text-red-500 text-xs",children:"No docs"}):N.length===1?r.jsxs("button",{onClick:()=>L(G.id,N[0].id),className:"btn-action btn-assign",children:["Assign ",N[0].name.split(" ")[0]]}):r.jsx("button",{onClick:()=>k(G.id),className:"btn-action btn-assign",children:"Assign"})}),G.status==="consulting"&&r.jsxs(r.Fragment,{children:[((ve=G.User)==null?void 0:ve.name)&&r.jsx("span",{className:"doctor-name-display",children:G.User.name}),r.jsx("button",{onClick:()=>H(G.id,"seen"),className:"btn-action btn-complete",children:"Complete"})]}),G.status==="seen"&&r.jsxs(r.Fragment,{children:[((ce=G.User)==null?void 0:ce.name)&&r.jsx("span",{className:"doctor-name-display",children:G.User.name}),r.jsx("span",{className:"text-gray-400 italic text-xs",children:"Done"})]}),G.status==="cancelled"&&r.jsx("span",{className:"text-red-500 italic text-xs",children:"Cancelled"})]})})]},G.id)})})]})})]}),e==="lab"&&r.jsxs("div",{className:"lab-tab-content",children:[" ",r.jsx(KH,{currentUser:t}),r.jsxs("button",{onClick:()=>F("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[r.jsx(Hn,{size:16}),"Search Lab Reports"]})]}),e==="newtons-ai"&&r.jsx("div",{className:"newtons-ai-tab-content",children:r.jsx(mv,{})}),e==="manage-admission"&&r.jsx("div",{className:"manage-admission-tab-content",children:r.jsx(TM,{})}),e==="all-patients"&&r.jsx("div",{className:"all-patients-tab-content",children:r.jsx(xO,{})}),e==="custom-bill"&&r.jsx("div",{className:"custom-bill-tab-content",children:r.jsx(YH,{})}),e==="motion-detect"&&r.jsx("div",{className:"motion-detect-tab-content",style:{height:"100%"},children:r.jsx(aDe,{})})]})})," "]})},QH=6048e5,lDe=864e5,XH=6e4,JH=36e5,gB=Symbol.for("constructDateFrom");function Mo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&gB in t?t[gB](e):t instanceof Date?new t.constructor(e):new Date(e)}function ca(t,e){return Mo(e||t,t)}function cDe(t,e,n){const i=ca(t,n==null?void 0:n.in);if(isNaN(e))return Mo(t,NaN);const a=i.getDate(),s=Mo(t,i.getTime());s.setMonth(i.getMonth()+e+1,0);const o=s.getDate();return a>=o?s:(i.setFullYear(s.getFullYear(),s.getMonth(),a),i)}let uDe={};function LN(){return uDe}function yb(t,e){var l,c,d,f;const n=LN(),i=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,a=ca(t,e==null?void 0:e.in),s=a.getDay(),o=(s<i?7:0)+s-i;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function AS(t,e){return yb(t,{...e,weekStartsOn:1})}function ZH(t,e){const n=ca(t,e==null?void 0:e.in),i=n.getFullYear(),a=Mo(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const s=AS(a),o=Mo(n,0);o.setFullYear(i,0,4),o.setHours(0,0,0,0);const l=AS(o);return n.getTime()>=s.getTime()?i+1:n.getTime()>=l.getTime()?i:i-1}function yB(t){const e=ca(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function dDe(t,...e){const n=Mo.bind(null,e.find(i=>typeof i=="object"));return e.map(n)}function xB(t,e){const n=ca(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function hDe(t,e,n){const[i,a]=dDe(n==null?void 0:n.in,t,e),s=xB(i),o=xB(a),l=+s-yB(s),c=+o-yB(o);return Math.round((l-c)/lDe)}function fDe(t,e){const n=ZH(t,e),i=Mo(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),AS(i)}function pDe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function vO(t){return!(!pDe(t)&&typeof t!="number"||isNaN(+ca(t)))}function mDe(t,e){const n=ca(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const gDe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yDe=(t,e,n)=>{let i;const a=gDe[t];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function RA(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const xDe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vDe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bDe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jDe={date:RA({formats:xDe,defaultWidth:"full"}),time:RA({formats:vDe,defaultWidth:"full"}),dateTime:RA({formats:bDe,defaultWidth:"full"})},wDe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},SDe=(t,e,n,i)=>wDe[t];function av(t){return(e,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let a;if(i==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const NDe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_De={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},CDe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},TDe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ADe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},EDe=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},PDe={ordinalNumber:EDe,era:av({values:NDe,defaultWidth:"wide"}),quarter:av({values:_De,defaultWidth:"wide",argumentCallback:t=>t-1}),month:av({values:CDe,defaultWidth:"wide"}),day:av({values:TDe,defaultWidth:"wide"}),dayPeriod:av({values:kDe,defaultWidth:"wide",formattingValues:ADe,defaultFormattingWidth:"wide"})};function sv(t){return(e,n={})=>{const i=n.width,a=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const o=s[0],l=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?DDe(l,p=>p.test(o)):ODe(l,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function ODe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function DDe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function MDe(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const a=i[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const IDe=/^(\d+)(th|st|nd|rd)?/i,RDe=/\d+/i,LDe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},FDe={any:[/^b/i,/^(a|c)/i]},$De={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},BDe={any:[/1/i,/2/i,/3/i,/4/i]},zDe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qDe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},UDe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},VDe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},HDe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GDe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WDe={ordinalNumber:MDe({matchPattern:IDe,parsePattern:RDe,valueCallback:t=>parseInt(t,10)}),era:sv({matchPatterns:LDe,defaultMatchWidth:"wide",parsePatterns:FDe,defaultParseWidth:"any"}),quarter:sv({matchPatterns:$De,defaultMatchWidth:"wide",parsePatterns:BDe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:sv({matchPatterns:zDe,defaultMatchWidth:"wide",parsePatterns:qDe,defaultParseWidth:"any"}),day:sv({matchPatterns:UDe,defaultMatchWidth:"wide",parsePatterns:VDe,defaultParseWidth:"any"}),dayPeriod:sv({matchPatterns:HDe,defaultMatchWidth:"any",parsePatterns:GDe,defaultParseWidth:"any"})},YDe={code:"en-US",formatDistance:yDe,formatLong:jDe,formatRelative:SDe,localize:PDe,match:WDe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function KDe(t,e){const n=ca(t,e==null?void 0:e.in);return hDe(n,mDe(n))+1}function QDe(t,e){const n=ca(t,e==null?void 0:e.in),i=+AS(n)-+fDe(n);return Math.round(i/QH)+1}function eG(t,e){var f,p,y,x;const n=ca(t,e==null?void 0:e.in),i=n.getFullYear(),a=LN(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(y=a.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??1,o=Mo((e==null?void 0:e.in)||t,0);o.setFullYear(i+1,0,s),o.setHours(0,0,0,0);const l=yb(o,e),c=Mo((e==null?void 0:e.in)||t,0);c.setFullYear(i,0,s),c.setHours(0,0,0,0);const d=yb(c,e);return+n>=+l?i+1:+n>=+d?i:i-1}function XDe(t,e){var l,c,d,f;const n=LN(),i=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=eG(t,e),s=Mo((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,i),s.setHours(0,0,0,0),yb(s,e)}function JDe(t,e){const n=ca(t,e==null?void 0:e.in),i=+yb(n,e)-+XDe(n,e);return Math.round(i/QH)+1}function pr(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const zu={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return pr(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):pr(n+1,2)},d(t,e){return pr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return pr(t.getHours()%12||12,e.length)},H(t,e){return pr(t.getHours(),e.length)},m(t,e){return pr(t.getMinutes(),e.length)},s(t,e){return pr(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return pr(a,e.length)}},wm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vB={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return zu.y(t,e)},Y:function(t,e,n,i){const a=eG(t,i),s=a>0?a:1-a;if(e==="YY"){const o=s%100;return pr(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):pr(s,e.length)},R:function(t,e){const n=ZH(t);return pr(n,e.length)},u:function(t,e){const n=t.getFullYear();return pr(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return pr(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return pr(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return zu.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return pr(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const a=JDe(t,i);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):pr(a,e.length)},I:function(t,e,n){const i=QDe(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):pr(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):zu.d(t,e)},D:function(t,e,n){const i=KDe(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):pr(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const a=t.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return pr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const a=t.getDay(),s=(a-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return pr(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),a=i===0?7:i;switch(e){case"i":return String(a);case"ii":return pr(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let a;switch(i===12?a=wm.noon:i===0?a=wm.midnight:a=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let a;switch(i>=17?a=wm.evening:i>=12?a=wm.afternoon:i>=4?a=wm.morning:a=wm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return zu.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):zu.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):pr(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):pr(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):zu.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):zu.s(t,e)},S:function(t,e){return zu.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return jB(i);case"XXXX":case"XX":return Vh(i);case"XXXXX":case"XXX":default:return Vh(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return jB(i);case"xxxx":case"xx":return Vh(i);case"xxxxx":case"xxx":default:return Vh(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+bB(i,":");case"OOOO":default:return"GMT"+Vh(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+bB(i,":");case"zzzz":default:return"GMT"+Vh(i,":")}},t:function(t,e,n){const i=Math.trunc(+t/1e3);return pr(i,e.length)},T:function(t,e,n){return pr(+t,e.length)}};function bB(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),a=Math.trunc(i/60),s=i%60;return s===0?n+String(a):n+String(a)+e+pr(s,2)}function jB(t,e){return t%60===0?(t>0?"-":"+")+pr(Math.abs(t)/60,2):Vh(t,e)}function Vh(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),a=pr(Math.trunc(i/60),2),s=pr(i%60,2);return n+a+e+s}const wB=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},tG=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ZDe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return wB(t,e);let s;switch(i){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",wB(i,e)).replace("{{time}}",tG(a,e))},eMe={p:tG,P:ZDe},tMe=/^D+$/,nMe=/^Y+$/,rMe=["D","DD","YY","YYYY"];function iMe(t){return tMe.test(t)}function aMe(t){return nMe.test(t)}function sMe(t,e,n){const i=oMe(t,e,n);if(console.warn(i),rMe.includes(t))throw new RangeError(i)}function oMe(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lMe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cMe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uMe=/^'([^]*?)'?$/,dMe=/''/g,hMe=/[a-zA-Z]/;function hf(t,e,n){var f,p,y,x;const i=LN(),a=i.locale??YDe,s=i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=i.weekStartsOn??((x=(y=i.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,l=ca(t,n==null?void 0:n.in);if(!vO(l))throw new RangeError("Invalid time value");let c=e.match(cMe).map(v=>{const S=v[0];if(S==="p"||S==="P"){const N=eMe[S];return N(v,a.formatLong)}return v}).join("").match(lMe).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const S=v[0];if(S==="'")return{isToken:!1,value:fMe(v)};if(vB[S])return{isToken:!0,value:v};if(S.match(hMe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(v=>{if(!v.isToken)return v.value;const S=v.value;(aMe(S)||iMe(S))&&sMe(S,e,String(t));const N=vB[S[0]];return N(l,S,a.localize,d)}).join("")}function fMe(t){const e=t.match(uMe);return e?e[1].replace(dMe,"'"):t}function LA(t,e){return+ca(t)<+ca(e)}function SB(t,e){const n=()=>Mo(e==null?void 0:e.in,NaN),a=yMe(t);let s;if(a.date){const d=xMe(a.date,2);s=vMe(d.restDateString,d.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,c;if(a.time&&(l=bMe(a.time),isNaN(l)))return n();if(a.timezone){if(c=jMe(a.timezone),isNaN(c))return n()}else{const d=new Date(o+l),f=ca(0,e==null?void 0:e.in);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return ca(o+l+c,e==null?void 0:e.in)}const Hj={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},pMe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,mMe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,gMe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function yMe(t){const e={},n=t.split(Hj.dateTimeDelimiter);let i;if(n.length>2)return e;if(/:/.test(n[0])?i=n[0]:(e.date=n[0],i=n[1],Hj.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Hj.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){const a=Hj.timezone.exec(i);a?(e.time=i.replace(a[1],""),e.timezone=a[1]):e.time=i}return e}function xMe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const a=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?a:s*100,restDateString:t.slice((i[1]||i[2]).length)}}function vMe(t,e){if(e===null)return new Date(NaN);const n=t.match(pMe);if(!n)return new Date(NaN);const i=!!n[4],a=ov(n[1]),s=ov(n[2])-1,o=ov(n[3]),l=ov(n[4]),c=ov(n[5])-1;if(i)return CMe(e,l,c)?wMe(e,l,c):new Date(NaN);{const d=new Date(0);return!NMe(e,s,o)||!_Me(e,a)?new Date(NaN):(d.setUTCFullYear(e,s,Math.max(a,o)),d)}}function ov(t){return t?parseInt(t):1}function bMe(t){const e=t.match(mMe);if(!e)return NaN;const n=FA(e[1]),i=FA(e[2]),a=FA(e[3]);return TMe(n,i,a)?n*JH+i*XH+a*1e3:NaN}function FA(t){return t&&parseFloat(t.replace(",","."))||0}function jMe(t){if(t==="Z")return 0;const e=t.match(gMe);if(!e)return 0;const n=e[1]==="+"?-1:1,i=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return kMe(i,a)?n*(i*JH+a*XH):NaN}function wMe(t,e,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const a=i.getUTCDay()||7,s=(e-1)*7+n+1-a;return i.setUTCDate(i.getUTCDate()+s),i}const SMe=[31,null,31,30,31,30,31,31,30,31,30,31];function nG(t){return t%400===0||t%4===0&&t%100!==0}function NMe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(SMe[e]||(nG(t)?29:28))}function _Me(t,e){return e>=1&&e<=(nG(t)?366:365)}function CMe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function TMe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function kMe(t,e){return e>=0&&e<=59}const AM=({isEmbedded:t=!1})=>{const{customColumnsConfig:e,refetch:n}=tN(),i=e.lab_tests||[],[a,s]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState([]),[f,p]=b.useState(""),[y,x]=b.useState(!1),[v,S]=b.useState(null),[N,_]=b.useState(!1),[T,C]=b.useState(null),O=b.useRef(null),[k,P]=b.useState(!1),[I,F]=b.useState(null),[B,$]=b.useState(!1),[L,V]=b.useState(!1),[H,te]=b.useState(null),[X,q]=b.useState({name:"",description:"",price:"",default_parameters:[]}),W=b.useCallback(async()=>{x(!0),S(null),C(null),F(null);try{const Q=await ue("/api/lab-tests");if(!Q.ok)throw new Error(`HTTP error! status: ${Q.status}`);const ie=await Q.json();d(ie)}catch(Q){console.error("Error fetching lab tests:",Q),S(Q.message||"Failed to fetch lab tests.")}finally{x(!1)}},[]);b.useEffect(()=>{W()},[W]);const ae=Q=>{const{name:ie,value:ge}=Q.target;q(ee=>({...ee,[ie]:ge}))},G=(Q,ie,ge)=>{const ee=[...X.default_parameters],we=ee[Q];if(ie==="type")switch(we.type=ge,ge){case"number":we.defaultValue=0,we.lower_limit=null,we.upper_limit=null,we.unit="";break;case"boolean":we.defaultValue=!1,we.lower_limit=void 0,we.upper_limit=void 0,we.unit=void 0;break;case"string":default:we.defaultValue="",we.lower_limit=void 0,we.upper_limit=void 0,we.unit=void 0;break}else ie==="defaultValue"?we.type==="number"?we.defaultValue=parseFloat(ge)||0:(we.type,we.defaultValue=ge):ie==="lower_limit"||ie==="upper_limit"?we[ie]=ge===""?null:parseFloat(ge):we[ie]=ge;q(Ue=>({...Ue,default_parameters:ee}))},z=()=>{q(Q=>({...Q,default_parameters:[...Q.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},le=Q=>{q(ie=>({...ie,default_parameters:ie.default_parameters.filter((ge,ee)=>ee!==Q)}))},je=async Q=>{Q.preventDefault(),x(!0),S(null);const ie=H!==null,ge=ie?`/api/lab-tests/${H}`:"/api/lab-tests",ee=ie?"PUT":"POST";try{const we=await ue(ge,{method:ee,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:X.name,description:X.description,price:parseFloat(X.price),default_parameters:X.default_parameters})});if(!we.ok){const Ue=await we.json();throw new Error(Ue.message||`HTTP error! status: ${we.status}`)}V(!1),te(null),q({name:"",description:"",price:"",default_parameters:[]}),W()}catch(we){console.error(`Error ${ie?"updating":"adding"} lab test:`,we),S(we.message||`Failed to ${ie?"update":"add"} lab test.`)}finally{x(!1)}},K=()=>{te(null),q({name:"",description:"",price:"",default_parameters:[]}),V(!0)},Oe=Q=>{if(H===Q.id)te(null);else{te(Q.id);const ie=(Q.default_parameters||[]).map(ge=>({...ge,unit:ge.unit||"",lower_limit:ge.lower_limit===void 0?null:ge.lower_limit,upper_limit:ge.upper_limit===void 0?null:ge.upper_limit}));q({name:Q.name,description:Q.description||"",price:Q.price,default_parameters:ie}),V(!1)}},Ye=async Q=>{if(window.confirm("Are you sure you want to delete this lab test?")){x(!0),S(null);try{const ie=await ue(`/api/lab-tests/${Q}`,{method:"DELETE"});if(!ie.ok){const ge=await ie.json();throw new Error(ge.message||`HTTP error! status: ${ie.status}`)}W()}catch(ie){console.error("Error deleting lab test:",ie),S(ie.message||"Failed to delete lab test.")}finally{x(!1)}}},Me=()=>{V(!1),te(null),S(null),q({name:"",description:"",price:"",default_parameters:[]})},Ie=async Q=>{if(!Q){C("No file selected.");return}_(!0),C(null),S(null);const ie=new FormData;ie.append("file",Q);try{const ge=await ue("/api/lab-tests/import",{method:"POST",body:ie});if(!ge.ok){const ee=await ge.json();throw new Error(ee.message||`Import failed: ${ge.statusText}`)}W()}catch(ge){console.error("Error importing lab tests from Excel:",ge),C(ge.message||"Failed to import lab tests from Excel.")}finally{_(!1)}},be=async Q=>{if(Q.target.files&&Q.target.files[0]){const ie=Q.target.files[0];await Ie(ie),Q.target&&(Q.target.value="")}},re=async()=>{if(window.confirm("Are you sure you want to import default biochemistry and pathology tests? This will add new tests and may duplicate existing ones if names match.")){P(!0),F(null),S(null);try{const Q=await ue("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"}});if(!Q.ok){const ie=await Q.json();throw new Error(ie.message||`Default import failed: ${Q.statusText}`)}W()}catch(Q){console.error("Error importing default lab tests:",Q),F(Q.message||"Failed to import default lab tests.")}finally{P(!1)}}},ve=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){$(!0),S(null),C(null),F(null);try{const Q=await ue("/api/lab-tests/all",{method:"DELETE"});if(!Q.ok){const ie=await Q.json();throw new Error(ie.message||`Delete all failed: ${Q.statusText}`)}W()}catch(Q){console.error("Error deleting all lab tests:",Q),S(Q.message||"Failed to delete all lab tests.")}finally{$(!1)}}},ce=y||N||k||B,fe=b.useMemo(()=>new eo(c,{keys:["name","description","default_parameters.name"],threshold:.3,ignoreLocation:!0}),[c]),se=b.useMemo(()=>f?fe.search(f).map(Q=>Q.item):c,[c,f,fe]);return r.jsxs("div",{className:`lab-inventory-card ${t?"embedded":""}`,style:t?{border:"none",boxShadow:"none",padding:0}:{},children:[!t&&r.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),r.jsx("div",{className:"mb-4",style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:r.jsx("input",{type:"text",placeholder:"Search by test name...",value:f,onChange:Q=>p(Q.target.value),className:"lab-inventory-input",style:{maxWidth:"300px",marginRight:"10px"}})}),r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:K,className:"lab-inventory-button",disabled:ce,children:"Add New Test"}),r.jsx("button",{onClick:()=>{var Q;return(Q=O.current)==null?void 0:Q.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:ce,children:N?"Importing...":"Import from Excel"}),r.jsx("input",{type:"file",ref:O,onChange:be,accept:".xlsx, .xls",style:{display:"none"},disabled:N}),r.jsx("button",{onClick:re,className:"lab-inventory-button lab-inventory-button-secondary",disabled:ce,children:k?"Importing Defaults...":"Import Default Tests"}),r.jsx("button",{onClick:ve,className:"lab-inventory-button lab-inventory-button-danger",disabled:ce,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:B?"Deleting All...":"Delete All Tests"}),r.jsxs("button",{onClick:()=>s(!0),className:"lab-inventory-button lab-inventory-button-secondary",disabled:ce,title:"Manage Custom Columns",children:[r.jsx(od,{size:16,style:{marginRight:"4px"}})," Columns"]}),r.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"auto"},children:[r.jsxs("button",{onClick:()=>l(!1),className:`view-mode-btn ${o?"":"active"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>l(!0),className:`view-mode-btn ${o?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(gf,{size:18})," Excel"]})]})]}),v&&r.jsx("div",{className:"error-text mb-4",children:v}),T&&r.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",T]}),I&&r.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",I]}),L&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:X.name,onChange:ae,className:"lab-inventory-input",required:!0,disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:X.description,onChange:ae,rows:3,className:"lab-inventory-input",disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:X.price,onChange:ae,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),X.default_parameters.map((Q,ie)=>{var ge,ee;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:Q.name,onChange:we=>G(ie,"name",we.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:Q.type,onChange:we=>G(ie,"type",we.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),Q.type==="boolean"?r.jsxs("select",{value:Q.defaultValue.toString(),onChange:we=>G(ie,"defaultValue",we.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:Q.type==="number"?"number":"text",placeholder:"Default Value",value:Q.defaultValue.toString(),onChange:we=>G(ie,"defaultValue",we.target.value),className:"lab-inventory-input"}),Q.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:Q.lower_limit===null?"":((ge=Q.lower_limit)==null?void 0:ge.toString())??"",onChange:we=>G(ie,"lower_limit",we.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:Q.upper_limit===null?"":((ee=Q.upper_limit)==null?void 0:ee.toString())??"",onChange:we=>G(ie,"upper_limit",we.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:Q.unit||"",onChange:we=>G(ie,"unit",we.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>le(ie),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},ie)}),r.jsx("button",{type:"button",onClick:z,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Me,className:"lab-inventory-button lab-inventory-button-secondary",disabled:ce,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:ce,children:y?"Saving...":"Add Test"})]})]})]}),ce&&!L?r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("div",{className:"mb-4 flex gap-2",children:[1,2,3,4,5].map(Q=>r.jsx(Z,{width:100,height:36},Q))}),r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"}),r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(Q=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:"60%",height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:"90%",height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:50,height:20})]})})]},Q))})]}),r.jsx("p",{className:"loading-text mt-2 text-sm italic text-gray-500",children:N?"Importing Excel data...":k?"Importing default data...":"Loading tests..."})]}):null,!ce&&se.length===0&&!v&&!T&&!I&&r.jsx("p",{className:"no-data-message",children:f?`No lab tests found matching "${f}".`:"No lab tests found. Add one or import from Excel to get started."}),o&&se.length>0?r.jsx(Ib,{columns:[{key:"name",label:"Test Name",editable:!0,type:"text"},{key:"description",label:"Description",editable:!0,type:"text"},{key:"price",label:"Price",editable:!0,type:"number"}],data:se,editable:!0,showRowNumbers:!0,title:"Lab Test Inventory",onSave:async Q=>{const ie=Q.map(async ge=>{const ee=c.find(we=>we.id===ge.id);if(ee&&(ee.name!==ge.name||ee.price!==ge.price||ee.description!==ge.description))return ue(`/api/lab-tests/${ge.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)})});try{await Promise.all(ie),W()}catch(ge){alert("Error saving changes"),console.error(ge)}}}):!ce&&se.length>0&&r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:se.map(Q=>{const ie=H===Q.id,ge=Q.price&&typeof Q.price=="string"?parseFloat(Q.price):NaN,ee=isNaN(ge)?"0.00":ge.toFixed(2);return r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{onClick:()=>Oe(Q),style:{cursor:"pointer"},children:[r.jsx("td",{children:Q.name}),r.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:Q.description||"-"}),r.jsxs("td",{children:["",ee]}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{onClick:we=>{we.stopPropagation(),Oe(Q)},className:"lab-inventory-link",disabled:ce,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),r.jsx("button",{onClick:we=>{we.stopPropagation(),Ye(Q.id)},className:"lab-inventory-link",disabled:ce,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),i.length>0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:r.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:i.map(we=>{var Ue;return r.jsxs("div",{style:{fontSize:"0.9em"},children:[r.jsxs("strong",{style:{color:"#555"},children:[we.label,":"]})," ",(Ue=Q.custom_fields)!=null&&Ue[we.key]?String(Q.custom_fields[we.key]):"-"]},we.key)})})})}),ie&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:X.name,onChange:ae,className:"lab-inventory-input",required:!0,disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:X.description,onChange:ae,rows:3,className:"lab-inventory-input",disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:X.price,onChange:ae,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:ce})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),X.default_parameters.map((we,Ue)=>{var Ge,Le;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:we.name,onChange:oe=>G(Ue,"name",oe.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:we.type,onChange:oe=>G(Ue,"type",oe.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),we.type==="boolean"?r.jsxs("select",{value:we.defaultValue.toString(),onChange:oe=>G(Ue,"defaultValue",oe.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:we.type==="number"?"number":"text",placeholder:"Default Value",value:we.defaultValue.toString(),onChange:oe=>G(Ue,"defaultValue",oe.target.value),className:"lab-inventory-input"}),we.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:we.lower_limit===null?"":((Ge=we.lower_limit)==null?void 0:Ge.toString())??"",onChange:oe=>G(Ue,"lower_limit",oe.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:we.upper_limit===null?"":((Le=we.upper_limit)==null?void 0:Le.toString())??"",onChange:oe=>G(Ue,"upper_limit",oe.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:we.unit||"",onChange:oe=>G(Ue,"unit",oe.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>le(Ue),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},Ue)}),r.jsx("button",{type:"button",onClick:z,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:Me,className:"lab-inventory-button lab-inventory-button-secondary",disabled:ce,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:ce,children:y?"Saving...":"Update Test"})]})]})]})})})]},Q.id)})})]})]}),r.jsx(kM,{isOpen:a,onClose:()=>s(!1),entityType:"lab_tests",entityLabel:"Lab Tests",currentConfig:e,onConfigUpdated:()=>{n()}})]})},AMe=t=>{let e="";if(!t.report_content)return"No report content available.";e+=`*Report Date:* ${t.report_date?new Date(t.report_date).toLocaleDateString():"N/A"}

`;try{const n=JSON.parse(t.report_content);typeof n=="object"&&n!==null&&t.tests?t.tests.forEach((i,a)=>{e+=`*Test: ${i.name}*
`,n[i.id]?Object.entries(n[i.id]).forEach(([s,o])=>{var f;const l=(f=i.default_parameters)==null?void 0:f.find(p=>p.name===s);let c=String(o),d="";if(l){const p=l.unit?` _${l.unit}_`:"";if(l.type==="boolean"){const y=o===!0||o==="true";c=y?"*Reactive*":"Non-Reactive",y||(d="`Normal: Non-Reactive`")}else if(l.type==="number"){const y=typeof o=="string"?parseFloat(o):typeof o=="number"?o:NaN;if(l.lower_limit!=null||l.upper_limit!=null){let x=[];l.lower_limit!=null&&x.push(`${l.lower_limit}`),l.upper_limit!=null&&x.push(`${l.upper_limit}`),d=`\`Normal: ${x.join(" - ")}\`${p}`,!isNaN(y)&&(l.lower_limit!=null&&y<l.lower_limit||l.upper_limit!=null&&y>l.upper_limit)&&(c=`*${c}*`)}}l.unit&&(c+=p)}e+=`${s}: ${c}
`,d&&((l==null?void 0:l.type)==="boolean"&&(o===!0||o==="true")||(e+=`${d}
`))}):e+=`_No parameters reported for this test._
`,a<t.tests.length-1&&(e+=`
`)}):e+=t.report_content}catch{e+=t.report_content}return e},EM=t=>{var o;if(!((o=t==null?void 0:t.Patient)!=null&&o.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(t!=null&&t.report_content)){alert("Cannot share report: No report content is available to share.");return}const e=t.Patient.name||"Patient",n=AMe(t),i=`Hello ${e},

Your lab report is ready.

${n}`,s=`https://wa.me/${EMe(t.Patient.phone)}?text=${encodeURIComponent(i)}`;window.open(s,"_blank")},EMe=t=>{let e=t.replace(/\D/g,"");const n=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,i=e.match(n);return i?e="91"+i[1]:e.startsWith("91")||(e="91"+e),e},NB=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(""),[a,s]=b.useState(!0),[o,l]=b.useState(!0),[c,d]=b.useState(null),[f,p]=b.useState("orders"),[y,x]=b.useState(1),[v]=b.useState(20),[S,N]=b.useState(0),_=b.useMemo(()=>Math.ceil(S/v),[S,v]),T=b.useCallback(async(L=1,V="")=>{s(!0),d(null);try{const H=new URLSearchParams({page:String(L),limit:String(v)});V&&H.append("search",V);const te=await ue(`/api/lab?${H.toString()}`);if(!te.ok)throw new Error(`HTTP error! status: ${te.status}`);const X=await te.json(),q=X.orders.map(W=>{var ae,G;return{id:W.id,labTokenNumber:String(W.lab_token_number??"N/A"),patientName:((ae=W.Patient)==null?void 0:ae.name)||"N/A",patientId:W.patient_id,patientTokenNumber:String(((G=W.Patient)==null?void 0:G.patient_token_number)??"N/A"),tests:(W.tests||[]).map(z=>z.name||"Unknown Test"),date:hf(new Date(W.createdAt),"yyyy-MM-dd"),status:W.status,reportId:W.reportId,billId:W.billId}});e(q),N(X.totalCount),x(L)}catch(H){console.error("Failed to fetch lab orders:",H),d(H instanceof Error?H.message:"An unknown error occurred"),e([]),N(0)}finally{s(!1),l(!1)}},[v]);b.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${y}, Search term: "${n}"`),n.length===0||n.length>=2?(console.log(`Condition met (length ${n.length}). Fetching orders...`),T(y,n)):console.log(`Condition not met (length ${n.length}). Not fetching.`)},[T,y,n]),b.useEffect(()=>{const L=setTimeout(()=>{n.length>=2?y!==1&&x(1):n.length<2&&y!==1&&x(1)},1e3);return()=>{clearTimeout(L)}},[n]);const C=async(L,V)=>{console.log(`Updating order ${L} to status ${V}`);try{const H=await ue(`/api/lab/${L}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:V})});if(!H.ok){const te=await H.json();throw new Error(te.message||`Failed to update status: ${H.status}`)}if(V==="completed"){const te=await ue(`/api/lab/orders/${L}/report`);if(te.ok){const X=await te.json();EM(X)}}await T(y,n),console.log(`Order ${L} status updated to ${V}, refetching page ${y}`)}catch(H){console.error("Error updating status:",H),alert(`Failed to update status: ${H instanceof Error?H.message:"Unknown error"}`)}},{openCommandBar:O}=Pc(),k=Mt(),P=L=>{if(!L){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}L.billId?(console.log(`Navigating to existing bill for Bill ID: ${L.billId}, Patient: ${L.patientName}`),k("/billing",{state:{billId:L.billId,patientId:L.patientId,patientName:L.patientName,billType:"lab"}})):(console.log(`Navigating to LabBillingPage for Order ID: ${L.id}`),k(`/dashboard/lab-billing/${L.id}`))},I=L=>{L&&L.id?k(`/lab/report/${L.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},F=L=>{switch(L){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:L,className:"status-badge"}}};if(a&&o)return r.jsxs("div",{className:"admin-panel-container",children:[r.jsx("div",{className:"admin-nav-bar",children:[1,2,3,4].map(L=>r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px",margin:"0 8px"}},L))}),r.jsxs("div",{className:"admin-content-section",style:{padding:"20px"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx(Z,{width:200,height:32}),r.jsx(Z,{width:300,height:40})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},L))})]})})]})]});if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[r.jsx(Xr,{size:48,className:"mb-4"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),r.jsx("p",{className:"mb-4",children:c}),r.jsx("button",{onClick:()=>T(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const B=()=>{y>1&&x(L=>L-1)},$=()=>{y<_&&x(L=>L+1)};return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("div",{className:"admin-nav-bar",children:[r.jsxs("button",{onClick:()=>k(-1),className:"admin-nav-button",title:"Back",children:[r.jsx(nn,{})," Back"]}),r.jsxs("button",{onClick:()=>p("orders"),className:`admin-nav-button ${f==="orders"?"active":""}`,children:[r.jsx(yE,{})," Orders"]}),r.jsx("button",{onClick:()=>k("/create-lab-order"),className:"admin-nav-button",children:"Create New Lab Order"}),r.jsxs("button",{onClick:()=>p("inventory"),className:`admin-nav-button ${f==="inventory"?"active":""}`,children:[r.jsx(yQ,{})," Inventory"]}),r.jsxs("button",{onClick:()=>O(),className:"admin-nav-button",children:[r.jsx(FO,{})," Newton's AI"]})]}),r.jsx("div",{className:"admin-content-section",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[f==="orders"&&r.jsxs("div",{className:"lab-orders-view",children:[" ",r.jsxs("div",{className:"lab-orders-header-controls",children:[r.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),r.jsxs("div",{className:"lab-orders-search-container",children:[r.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:n,onChange:L=>i(L.target.value),className:"lab-inventory-input lab-orders-search-input"}),r.jsx(Hn,{size:18,className:"lab-orders-search-icon"})]})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient (Token)"}),r.jsx("th",{children:"Tests"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),r.jsxs("tbody",{children:[a&&!c&&t.length===0&&[1,2,3,4,5].map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},L)),!a&&!c&&t.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."})}),!a&&!c&&t.map(L=>{const V=F(L.status);return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:L.patientName}),r.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",L.patientTokenNumber]})]}),r.jsx("td",{children:L.tests.map((H,te)=>r.jsx("div",{children:H},te))}),r.jsx("td",{className:"hidden md:table-cell",children:L.date}),r.jsx("td",{children:r.jsx("span",{className:V.className,children:V.text})}),r.jsx("td",{children:r.jsxs("div",{className:"lab-table-actions",children:[L.status==="pending"&&r.jsx("button",{onClick:()=>P(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&r.jsx("button",{onClick:()=>C(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&r.jsx("button",{onClick:()=>C(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>I(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>C(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>{L.id?k(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},L.id)})]})]})}),r.jsxs("div",{className:"lab-orders-card-container",children:[a&&!c&&t.length===0&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(L=>r.jsx("div",{className:"lab-order-card",children:r.jsx(Z,{width:"100%",height:150})},L))}),!a&&!c&&t.length===0&&r.jsx("div",{className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."}),!a&&!c&&t.map(L=>{const V=F(L.status);return r.jsxs("div",{className:"lab-order-card",children:[r.jsxs("div",{className:"lab-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lab-card-patient-name",children:L.patientName}),r.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",L.patientTokenNumber]}),r.jsx("div",{className:"lab-card-date",children:L.date})]}),r.jsx("span",{className:`${V.className} lab-card-status-pill`,children:V.text})]}),r.jsxs("div",{className:"lab-card-section",children:[r.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),L.tests.map((H,te)=>r.jsx("div",{className:"lab-card-test-item",children:H},te)),L.tests.length===0&&r.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),r.jsxs("div",{className:"lab-card-actions",children:[L.status==="pending"&&r.jsx("button",{onClick:()=>P(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&r.jsx("button",{onClick:()=>C(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&r.jsx("button",{onClick:()=>C(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>I(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>C(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>{L.id?k(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},L.id)})]}),!a&&S>0&&r.jsxs("div",{className:"lab-pagination-controls",children:[r.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",r.jsx("strong",{children:(y-1)*v+1})," ","to"," ",r.jsx("strong",{children:Math.min(y*v,S)})," ","of"," ",r.jsx("strong",{children:S})," ","results"]}),r.jsxs("div",{className:"lab-pagination-buttons",children:[r.jsx("button",{onClick:B,disabled:y===1,className:"lab-pagination-button","aria-label":"Previous page",children:r.jsx(Cb,{size:18})}),r.jsxs("span",{children:["Page ",y," of ",_]}),r.jsx("button",{onClick:$,disabled:y===_,className:"lab-pagination-button","aria-label":"Next page",children:r.jsx(dd,{size:18})})]})]})]}),f==="inventory"&&r.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",r.jsx(AM,{})]})]})})," "]})},_B=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(""),[a,s]=b.useState(!0),[o,l]=b.useState(null),c=Mt(),d=b.useRef(null),{openCommandBar:f}=Pc(),p=as(),y=F=>{F&&(p.prefetchQuery({queryKey:Ut.patients.context(F),queryFn:async()=>{const B=await ue(`/api/patients/${F}/context`);if(!B.ok)throw new Error("Failed to fetch patient context");return B.json()},staleTime:5*60*1e3}),p.prefetchQuery({queryKey:Ut.patientDebts.balance(F),queryFn:async()=>{const B=await ue(`/api/patient-debts/${F}/balance`);return B.ok?B.json():{netDebt:0}},staleTime:1*60*1e3}),p.prefetchQuery({queryKey:Ut.queue.latest(F),queryFn:async()=>{const B=await ue(`/api/queue/patient/${F}/latest`);if(!B.ok)throw new Error("Failed to fetch latest queue status");const $=await B.json();return $!=null&&$._id&&p.prefetchQuery({queryKey:Ut.queue.entry($._id),queryFn:async()=>{const L=await ue(`/api/queue/doctor/complaint/${$._id}`);if(!L.ok)throw new Error("Failed to fetch complaint record");return L.json()},staleTime:1*60*1e3}),$},staleTime:5e3}),p.prefetchQuery({queryKey:Ut.dental.records(F),queryFn:async()=>{const B=await ue(`/api/dental/patient/${F}`);if(!B.ok)throw new Error("Failed to fetch dental records");return B.json()},staleTime:5*60*1e3}))},[x,v]=b.useState(1),[S,N]=b.useState(1),_=10,T=b.useCallback(async(F,B,$)=>{s(!0),l(null);try{let L=`/api/pharmacy-orders?page=${F}&limit=${B}`;$&&$.trim()!==""&&(L+=`&search=${encodeURIComponent($.trim())}`);const V=await ue(L);if(!V.ok)throw new Error(`Failed to fetch orders: ${V.statusText} (${V.status})`);const H=await V.json();H&&Array.isArray(H.orders)?(e(H.orders),N(H.totalPages||1),v(H.currentPage||F)):e([])}catch(L){console.error("Failed to fetch pharmacy orders:",L),l(L.message||"Failed to fetch orders."),e([])}finally{s(!1)}},[]);b.useEffect(()=>(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{T(n?1:x,_,n)},500),()=>{d.current&&clearTimeout(d.current)}),[n,x,T]);const C=F=>c(`/dashboard/edit-pharmacy-order/${F}`),O=F=>c(`/dashboard/edit-complaint/patient/${F.patientId}`),k=F=>{const B=t.find($=>$.id===F);if(B){const $=B.medications.map(L=>({name:L.name,pack_quantity:L.pack_quantity,loose_quantity:L.loose_quantity,price:L.price??0,pack_price:L.pack_price,loose_price:L.loose_price,total_price:L.total_price,isLoose:L.isLoose,unit:L.unit,drug_id:L.drug_id?String(L.drug_id):null,tabletsPerDay:L.tabletsPerDay,numberOfDays:L.numberOfDays,directions_to_use:L.directions_to_use,discount_percentage:0,batch:L.batch,expiry_date:L.expiry_date}));c(`/dashboard/pharmacy-billing/${F}`,{state:{initialItems:$}})}},P=async(F,B)=>{const $=t.find(L=>L.id===F);if($)try{const L=await ue(`/api/pharmacy-orders/${F}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:B,medications:$.medications})});if(L.ok){const V=await L.json();e(H=>H.map(te=>te.id===V.id?{...te,status:V.status}:te))}}catch(L){console.error("Status update failed",L),alert("Failed to update status")}},I=F=>`pq-pill ${F}`;return r.jsxs("div",{className:"pq-container",children:[r.jsxs("div",{className:"pq-header",children:[r.jsxs("div",{className:"pq-nav-actions",children:[r.jsxs("button",{onClick:()=>c("/dashboard/add-order"),className:"pq-btn",children:[r.jsx(_s,{})," Add Order"]}),r.jsxs("button",{onClick:()=>c("/dashboard/inventory"),className:"pq-btn",children:[r.jsx(yf,{})," Inventory"]}),r.jsxs("button",{onClick:()=>f(),className:"pq-btn",children:[r.jsx(FO,{})," Newton's AI"]}),r.jsxs("button",{onClick:()=>c("/dashboard/distributors"),className:"pq-btn",children:[r.jsx(yf,{})," Distributors"]})]}),r.jsxs("div",{className:"pq-search-wrap",children:[r.jsx(Hn,{className:"pq-search-icon"}),r.jsx("input",{className:"pq-search-input",placeholder:"Search orders...",value:n,onChange:F=>i(F.target.value)})]})]}),r.jsxs("div",{className:"pq-card",children:[r.jsxs("div",{className:"pq-card-content",children:[a&&t.length===0&&r.jsx("div",{className:"p-4 space-y-2",children:[1,2,3].map(F=>r.jsx(Z,{height:40,className:"mb-2"},F))}),o&&r.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]}),!a&&!o&&t.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."}),!a&&t.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pq-table-wrapper",children:r.jsxs("table",{className:"pq-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Total"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map(F=>r.jsxs("tr",{className:"pq-row",onClick:()=>O(F),onMouseEnter:()=>y(F.patientId),children:[r.jsxs("td",{children:[r.jsx("div",{className:"pq-text-bold",children:F.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",F.patientTokenNumber]})]}),r.jsx("td",{children:r.jsxs("div",{className:"pq-nested-table-wrap",children:[r.jsx("table",{className:"pq-nested-table",children:r.jsx("tbody",{children:F.medications.map((B,$)=>r.jsxs("tr",{children:[r.jsx("td",{className:"pq-text-bold",children:B.name}),r.jsxs("td",{children:[B.pack_quantity>0&&`Pack: ${B.pack_quantity} `,B.loose_quantity>0&&`Loose: ${B.loose_quantity}`]}),r.jsx("td",{className:"pq-text-sm",children:B.directions_to_use})]},$))})}),F.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"mt-1 text-xs opacity-75 pq-markdown",children:[r.jsx("strong",{children:"Note:"})," ",r.jsx(vf,{remarkPlugins:[bf],children:F.prescriptionForUnavailableDrugs})]})]})}),r.jsx("td",{className:"pq-text-sm",children:new Date(F.date).toLocaleDateString()}),r.jsxs("td",{className:"pq-text-mono pq-text-bold",children:["",Number(F.order_total||0).toFixed(2)]}),r.jsx("td",{children:r.jsx("span",{className:I(F.status),children:F.status})}),r.jsx("td",{children:r.jsxs("div",{className:"pq-actions",children:[F.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:B=>{B.stopPropagation(),C(F.id)},className:"pq-action-btn pq-btn-edit",children:[r.jsx(Ia,{size:12})," Edit"]}),r.jsxs("button",{onClick:B=>{B.stopPropagation(),k(F.id)},className:"pq-action-btn pq-btn-bill",children:[r.jsx(mf,{size:12})," Bill"]})]}),F.status==="billed"&&r.jsxs("button",{onClick:B=>{B.stopPropagation(),P(F.id,"dispensed")},className:"pq-action-btn pq-btn-dispense",children:[r.jsx(Ol,{size:12})," Dispense"]}),(F.status==="pending"||F.status==="billed")&&r.jsx("button",{onClick:B=>{B.stopPropagation(),P(F.id,"cancelled")},className:"pq-action-btn pq-btn-cancel",children:"Cancel"}),r.jsx("button",{onClick:B=>{B.stopPropagation(),O(F)},onMouseEnter:()=>y(F.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})]})})]},F.id))})]})}),r.jsx("div",{className:"pq-card-list",children:t.map(F=>r.jsxs("div",{className:"pq-mobile-card",onClick:()=>O(F),onMouseEnter:()=>y(F.patientId),children:[r.jsxs("div",{className:"pq-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"pq-text-bold",children:F.patientName}),r.jsxs("div",{className:"pq-text-sm",children:["#",F.patientTokenNumber]})]}),r.jsx("span",{className:I(F.status),children:F.status})]}),r.jsx("div",{className:"mb-2",children:F.medications.slice(0,3).map((B,$)=>r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[B.name," (",B.pack_quantity>0?`${B.pack_quantity}p`:""," ",B.loose_quantity>0?`${B.loose_quantity}l`:"",")"]},$))}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("div",{className:"pq-text-mono pq-text-bold",children:["",Number(F.order_total||0).toFixed(2)]}),r.jsx("div",{className:"pq-actions",children:r.jsx("button",{onClick:B=>{B.stopPropagation(),O(F)},onMouseEnter:()=>y(F.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})})]})]},F.id))})]})]}),!a&&S>1&&r.jsxs("div",{className:"pq-footer px-4 pb-4",children:[r.jsxs("div",{className:"pq-page-info",children:["Page ",x," of ",S]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"pq-pagination-btn",disabled:x===1,onClick:()=>v(F=>Math.max(1,F-1)),children:r.jsx(Cb,{size:16})}),r.jsx("button",{className:"pq-pagination-btn",disabled:x===S,onClick:()=>v(F=>Math.min(S,F+1)),children:r.jsx(dd,{size:16})})]})]})]})]})},$A=10,PMe=3,rG=({isEmbedded:t=!1,initialSearch:e=""})=>{const n=Mt(),{customColumnsConfig:i,refetch:a}=tN(),s=i.drugs||[],[o,l]=b.useState(!1),[c,d]=b.useState(!1),[f,p]=b.useState([]),[y,x]=b.useState([]),[v,S]=b.useState(e),[N,_]=b.useState(!0),[T,C]=b.useState(null),[O,k]=b.useState(new Set),[P,I]=b.useState("all"),F=async()=>{try{const Ce=await ue("/api/inventory/download-csv");if(!Ce.ok)throw new Error(`Failed to download CSV: ${Ce.statusText}`);const lt=await Ce.blob(),Tt=window.URL.createObjectURL(lt),qe=document.createElement("a");qe.href=Tt,qe.download="pharmacy_inventory.csv",document.body.appendChild(qe),qe.click(),qe.remove(),window.URL.revokeObjectURL(Tt)}catch(Ce){console.error("Failed to download CSV:",Ce),C(Ce.message||"Failed to download inventory CSV. Please try again.")}},[B,$]=b.useState(!1),[L,V]=b.useState(!1),[H,te]=b.useState(null),[X,q]=b.useState(!1),[W,ae]=b.useState(new Set),[G,z]=b.useState(1),le=8,[je,K]=b.useState(null),[Oe,Ye]=b.useState(0),[Me,Ie]=b.useState(!1),[be,re]=b.useState(null),[ve,ce]=b.useState(1),[fe,se]=b.useState(!1),Q=G*le,ie=Q-le,ge=y.slice(ie,Q),ee=Math.ceil(y.length/le);b.useEffect(()=>{z(1)},[v,P]);const we=b.useCallback(async()=>{_(!0),C(null);try{const Ce=await ue("/api/drugs");if(!Ce.ok)throw new Error(`Failed to fetch drugs: ${Ce.statusText} (${Ce.status})`);const lt=await Ce.json();let Tt=Array.isArray(lt)?lt:lt.drugs||[];Tt=Tt.map(qe=>({...qe,mrp:parseFloat(String(qe.mrp))||0,rate:qe.rate!==null&&qe.rate!==void 0?parseFloat(String(qe.rate)):null,stock:parseInt(String(qe.stock),10)||0,gst:qe.gst!==null&&qe.gst!==void 0?parseFloat(String(qe.gst)):null,margin:qe.margin!==null&&qe.margin!==void 0?parseFloat(String(qe.margin)):null,discount:qe.discount!==null&&qe.discount!==void 0?parseFloat(String(qe.discount)):null})),p(Tt),x(Tt)}catch(Ce){console.error("Failed to fetch drugs:",Ce),C(Ce.message||"Failed to load inventory. Please try again.")}finally{_(!1)}},[]);b.useEffect(()=>{we()},[we]),b.useEffect(()=>{e&&S(e)},[e]);const Ue=b.useMemo(()=>new eo(f,{keys:["name","brand_name","description","supplier","box_number"],threshold:.3,ignoreLocation:!0}),[f]);b.useEffect(()=>{let Ce=f;v&&(Ce=Ue.search(v).map(qe=>qe.item));const lt=new Date,Tt=cDe(lt,PMe);P==="low-stock"?Ce=Ce.filter(qe=>qe.stock<=$A):P==="near-expiry"?Ce=Ce.filter(qe=>{if(!qe.expiry_date)return!1;const jt=SB(qe.expiry_date);return vO(jt)&&LA(jt,Tt)&&!LA(jt,lt)}):P==="expired"&&(Ce=Ce.filter(qe=>{if(!qe.expiry_date)return!1;const jt=SB(qe.expiry_date);return vO(jt)&&LA(jt,lt)})),x(Ce)},[v,f,P,Ue]);const Ge=()=>{$(!1),K(null)},Le=Ce=>{Ye(parseInt(Ce.target.value,10)||0)},oe=async Ce=>{if(Ce.preventDefault(),C(null),!je||!je.id||Oe===0){C("No drug selected or adjustment amount is zero.");return}try{const lt=await ue(`/api/drugs/${je.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:Oe})});if(!lt.ok){const qe=await lt.json();throw new Error(qe.message||`Failed to adjust stock: ${lt.statusText}`)}const Tt=await lt.json();p(qe=>qe.map(jt=>jt.id===Tt.id?Tt:jt)),Ge()}catch(lt){console.error("Failed to adjust stock:",lt),C(lt.message||"Failed to adjust stock. Please try again.")}},_e=Ce=>{te(Ce),V(!0)},$e=()=>{V(!1),te(null)},ze=async()=>{if(!H||!H.id){C("No drug selected for deletion.");return}_(!0),C(null);try{const Ce=await ue(`/api/drugs/${H.id}`,{method:"DELETE"});if(!Ce.ok){const lt=await Ce.json();throw new Error(lt.message||`Failed to delete drug: ${Ce.statusText}`)}we(),$e()}catch(Ce){console.error("Failed to delete drug:",Ce),C(Ce.message||"Failed to delete drug. Please try again.")}finally{_(!1)}},Y=()=>{q(!0)},ye=()=>{q(!1)},[pe,me]=b.useState(!1),Ne=()=>{W.size>0&&me(!0)},Be=()=>{me(!1)},Ee=async()=>{if(W.size===0){C("No drugs selected for deletion.");return}_(!0),C(null);try{const Ce=await ue("/api/drugs/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugIds:Array.from(W)})});if(!Ce.ok){const lt=await Ce.json();throw new Error(lt.message||`Failed to delete selected drugs: ${Ce.statusText}`)}we(),ae(new Set),Be()}catch(Ce){console.error("Failed to delete selected drugs:",Ce),C(Ce.message||"Failed to delete selected drugs. Please try again.")}finally{_(!1)}},Ke=async()=>{_(!0),C(null);try{const Ce=await ue("/api/drugs/all",{method:"DELETE"});if(!Ce.ok){const lt=await Ce.json();throw new Error(lt.message||`Failed to delete all drugs: ${Ce.statusText}`)}we(),ye()}catch(Ce){console.error("Failed to delete all drugs:",Ce),C(Ce.message||"Failed to delete all drugs. Please try again.")}finally{_(!1)}},rt=Ce=>{if(!Ce)return null;const lt=Ce.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return lt?parseInt(lt[1],10):null},mt=Ce=>{re(Ce),ce(1),Ie(!0)},Pe=()=>{Ie(!1),re(null),ce(1)},Je=Ce=>{ce(parseInt(Ce.target.value,10)||0)},et=async Ce=>{if(Ce.preventDefault(),C(null),!be||!be.id||ve<=0){C("No drug selected or invalid number of packs to convert.");return}const lt=rt(be.pack);if(!lt||lt<=0){C(`Cannot convert "${be.name}" to loose. Invalid pack unit: ${be.pack||"N/A"}.`);return}if(ve>(be.stock??0)){C(`Cannot convert ${ve} packs. Only ${be.stock??0} packs are in stock.`);return}try{const Tt=await ue(`/api/drugs/${be.id}/convert-to-loose`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({packsToConvert:ve,packSize:lt})});if(!Tt.ok){const jt=await Tt.json();throw new Error(jt.message||`Failed to convert to loose: ${Tt.statusText}`)}const qe=await Tt.json();p(jt=>jt.map(Ct=>Ct.id===qe.id?qe:Ct)),Pe()}catch(Tt){console.error("Failed to convert to loose:",Tt),C(Tt.message||"Failed to convert to loose. Please try again.")}finally{_(!1)}},ut=()=>{se(!0)},_t=()=>{se(!1)},vt=async()=>{_(!0),C(null);try{const Ce=await ue("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!Ce.ok){const lt=await Ce.json();throw new Error(lt.message||`Failed to add default medications: ${Ce.statusText}`)}we(),_t()}catch(Ce){console.error("Failed to add default medications:",Ce),C(Ce.message||"Failed to add default medications. Please try again.")}finally{_(!1)}};return N?r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsx("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[1,2,3,4].map(Ce=>r.jsx(Z,{width:120,height:36},Ce))}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsx(Z,{width:100,height:36}),[1,2,3,4].map(Ce=>r.jsx(Z,{width:120,height:36},Ce))]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsx(Z,{width:"100%",height:40,style:{maxWidth:"600px"}}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx(Z,{width:20,height:20})}),r.jsx("th",{children:"DRUG DETAILS"}),r.jsx("th",{children:"PACK"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{className:"qty-header",children:"STOCK"}),r.jsx("th",{className:"mrp-header",children:"MRP"}),r.jsx("th",{className:"rate-header",children:"RATE"}),r.jsx("th",{children:"BOX"}),r.jsx("th",{children:"DISC %"}),r.jsx("th",{children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(Ce=>r.jsxs("tr",{children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx(Z,{width:20,height:20})}),r.jsxs("td",{children:[r.jsx(Z,{width:"80%",height:20}),r.jsx(Z,{width:"40%",height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsxs("td",{children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:60,height:14,style:{marginTop:"4px"}})]}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:40,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{width:20,height:20}),r.jsx(Z,{width:20,height:20}),r.jsx(Z,{width:20,height:20})]})})]},Ce))})]})})]}):T?r.jsxs("div",{className:"error-indicator",children:["Error: ",T]}):r.jsxs("div",{className:`pharmacy-inventory-page ${t?"embedded":""}`,style:t?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[r.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:r.jsxs("div",{className:"inventory-actions-group",children:[r.jsxs("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline add-drug-button",children:[r.jsx(_s,{size:18}),"Add New Drug"]}),r.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline",children:[r.jsx(_s,{size:18}),"Purchase Page"]}),r.jsxs("button",{onClick:()=>n("/dashboard/distributors"),className:"action-button-outline",children:[r.jsx(_s,{size:18}),"Distributors"]}),r.jsxs("button",{onClick:()=>l(!0),className:"action-button-outline",title:"Manage Custom Columns",children:[r.jsx(od,{size:18}),"Columns"]})]}),r.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>d(!1),className:`view-mode-btn ${c?"":"active"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>d(!0),className:`view-mode-btn ${c?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(gf,{size:18})," Excel"]})]}),r.jsx("button",{onClick:F,className:"action-button-outline",children:"Download CSV"}),r.jsxs("button",{onClick:ut,className:"action-button-outline",children:[r.jsx(_s,{size:18}),"Import Defaults"]}),r.jsxs("button",{onClick:Ne,className:"action-button-outline delete-button-outline",disabled:W.size===0,children:[r.jsx(Wn,{size:18}),"Delete (",W.size,")"]}),r.jsxs("button",{onClick:Y,className:"action-button-outline delete-all-button-outline",children:[r.jsx(Wn,{size:18}),"Delete All"]})]})]})}),r.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[r.jsxs("div",{className:"search-input-wrapper",style:{maxWidth:"600px"},children:[r.jsx(Hn,{size:20,className:"search-input-icon"}),r.jsx("input",{type:"text",placeholder:"Search drugs...",value:v,onChange:Ce=>S(Ce.target.value),className:"inventory-search-input"})]}),r.jsx("div",{className:"filter-dropdown-wrapper",children:r.jsxs("select",{value:P,onChange:Ce=>I(Ce.target.value),className:"inventory-filter-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})})]}),c?r.jsx("div",{className:"inventory-table-container",style:{padding:"1rem"},children:r.jsx(Ib,{title:"Pharmacy Inventory",columns:[{key:"name",label:"Drug Name",type:"text",editable:!0},{key:"brand_name",label:"Brand Name",type:"text",editable:!0},{key:"pack",label:"Pack",type:"text",editable:!0},{key:"expiry_date",label:"Expiry",type:"date",editable:!0},{key:"stock",label:"Stock",type:"number",editable:!0},{key:"mrp",label:"MRP",type:"number",editable:!0},{key:"rate",label:"Rate",type:"number",editable:!0},{key:"box_number",label:"Box",type:"text",editable:!0},{key:"discount",label:"Discount %",type:"number",editable:!0},{key:"gst",label:"GST %",type:"number",editable:!0},{key:"supplier",label:"Supplier",type:"text",editable:!0}],data:y,onSave:async Ce=>{try{for(const lt of Ce)lt.id&&await ue(`/api/drugs/${lt.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(lt)});we()}catch(lt){console.error("Failed to save:",lt),C(lt.message||"Failed to save changes")}},editable:!0,showRowNumbers:!0})}):r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"checkbox-column",children:r.jsx("input",{type:"checkbox",onChange:Ce=>{if(Ce.target.checked){const lt=new Set(y.map(Tt=>Tt.id));ae(lt)}else ae(new Set)},checked:W.size===y.length&&y.length>0,disabled:y.length===0})}),r.jsx("th",{className:"drug-name-header",children:"DRUG DETAILS"}),r.jsx("th",{className:"pack-header",children:"PACK"}),r.jsx("th",{className:"expiry-header",children:"EXPIRY"}),r.jsx("th",{className:"text-stock qty-header",children:"STOCK"}),r.jsx("th",{className:"text-price mrp-header",children:"MRP"}),r.jsx("th",{className:"text-cost rate-header",children:"RATE"}),r.jsx("th",{className:"box-number-header",children:"BOX"}),r.jsx("th",{className:"discount-header",children:"DISC %"}),r.jsx("th",{className:"margin-header",children:"MARGIN"}),r.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),r.jsxs("tbody",{children:[y.length===0&&r.jsx("tr",{className:"no-results-message",children:r.jsx("td",{colSpan:11,children:"No drugs found matching your search."})}),ge.map(Ce=>r.jsxs(Se.Fragment,{children:[r.jsxs("tr",{className:"drug-row",onClick:()=>{const lt=new Set(O);lt.has(Ce.id)&&Ce.id!==void 0?lt.delete(Ce.id):Ce.id!==void 0&&lt.add(Ce.id),k(lt)},children:[r.jsx("td",{className:"checkbox-cell",children:r.jsx("input",{type:"checkbox",onClick:lt=>lt.stopPropagation(),checked:W.has(Ce.id),onChange:()=>{const lt=new Set(W);lt.has(Ce.id)?lt.delete(Ce.id):lt.add(Ce.id),ae(lt)}})}),r.jsx("td",{className:"drug-name-cell",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:Ce.brand_name||Ce.name||"-"}),Ce.brand_name&&Ce.name&&Ce.brand_name!==Ce.name&&r.jsx("span",{className:"text-xs text-muted-foreground",style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:Ce.name})]})}),r.jsx("td",{className:"text-muted pack-cell",children:Ce.pack||"-"}),r.jsx("td",{className:"text-muted",children:Ce.expiry_date?new Date(Ce.expiry_date).toLocaleDateString("en-GB"):"-"}),r.jsxs("td",{className:`text-stock ${Ce.stock<=$A?"low-stock":""}`,children:[r.jsx("div",{style:{fontWeight:"bold"},children:Ce.stock}),r.jsx("div",{className:"loose-quantity",children:Ce.loose!==null&&Ce.loose!==void 0?`${Ce.loose} loose`:"0 loose"})]}),r.jsxs("td",{className:"text-muted text-price",children:["",typeof Ce.mrp=="number"?Ce.mrp.toFixed(2):"N/A"]}),r.jsx("td",{className:"text-muted text-cost",children:Ce.rate!==null&&Ce.rate!==void 0?`${Ce.rate.toFixed(2)}`:"-"}),r.jsx("td",{className:"text-muted",children:Ce.box_number||"-"}),r.jsx("td",{className:"text-muted",children:Ce.discount!==null&&Ce.discount!==void 0?`${Ce.discount.toFixed(2)}%`:"0.00%"}),r.jsx("td",{className:"text-muted",children:(()=>{const lt=Ce.mrp||0,Tt=Ce.rate||0,qe=Ce.discount||0,jt=Ce.gst||0,Kn=Tt*(1-qe/100)*(1+jt/100),br=lt-Kn;return`${(lt>0?br/lt*100:0).toFixed(2)}%`})()}),r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsx("button",{onClick:lt=>{lt.stopPropagation(),n(`/dashboard/inventory/edit/${Ce.id}`)},className:"action-icon-button",title:"Edit Drug",children:r.jsx(Ia,{size:16})}),r.jsx("button",{onClick:lt=>{lt.stopPropagation(),_e(Ce)},className:"action-icon-button delete-button",title:"Delete Drug",children:r.jsx(Wn,{size:16})}),r.jsx("button",{onClick:lt=>{lt.stopPropagation(),K(Ce),$(!0)},className:"action-icon-button adjust-stock-button",title:"Adjust Stock",children:r.jsx(vI,{size:16})}),r.jsx("button",{onClick:lt=>{lt.stopPropagation(),mt(Ce)},className:"action-icon-button convert-to-loose-button",title:"Convert to Loose",disabled:!Ce.pack||rt(Ce.pack)===null,children:r.jsx(NI,{size:16})})]})})]}),O.has(Ce.id)&&r.jsx("tr",{className:"collapsible-row",children:r.jsx("td",{colSpan:11,children:r.jsxs("div",{className:"collapsible-content",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",Ce.description||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Supplier:"})," ",Ce.supplier||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Batch:"})," ",Ce.batch||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"HSN Code:"})," ",Ce.hsn_code||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"MFG:"})," ",Ce.mfg||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Loose Price:"}),(()=>{const lt=rt(Ce.pack);return lt&&lt>0&&typeof Ce.mrp=="number"?`${(Ce.mrp/lt).toFixed(2)}`:"N/A"})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"GST:"})," ",Ce.gst!==null&&Ce.gst!==void 0?`${Ce.gst.toFixed(2)}%`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",new Date(Ce.last_updated).toLocaleString()]}),s.length>0&&r.jsx("div",{className:"custom-fields-display",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px dashed var(--border-color)"},children:s.map(lt=>{var Tt;return r.jsxs("p",{children:[r.jsxs("strong",{children:[lt.label,":"]})," ",(Tt=Ce.custom_fields)!=null&&Tt[lt.key]?String(Ce.custom_fields[lt.key]):"-"]},lt.key)})})]})})})]},Ce.id))]})]})}),r.jsx("div",{className:`inventory-grid-mobile ${t?"embedded":""}`,style:{display:c?"none":void 0},children:y.length===0?r.jsx("div",{className:"inventory-card-empty",children:"No drugs found matching your search."}):ge.map(Ce=>r.jsxs("div",{className:"inventory-card",onClick:()=>{const lt=new Set(O);lt.has(Ce.id)&&Ce.id!==void 0?lt.delete(Ce.id):Ce.id!==void 0&&lt.add(Ce.id),k(lt)},children:[r.jsxs("div",{className:"inventory-card-header",children:[r.jsxs("div",{className:"inventory-card-drug-info",children:[r.jsx("h4",{className:"inventory-card-drug-name",children:Ce.brand_name||Ce.name||"-"}),Ce.brand_name&&Ce.name&&Ce.brand_name!==Ce.name&&r.jsx("div",{className:"inventory-card-brand-name",children:Ce.name})]}),r.jsx("div",{className:"inventory-card-checkbox",onClick:lt=>lt.stopPropagation(),children:r.jsx("input",{type:"checkbox",checked:W.has(Ce.id),onChange:()=>{const lt=new Set(W);lt.has(Ce.id)?lt.delete(Ce.id):lt.add(Ce.id),ae(lt)}})})]}),r.jsxs("div",{className:"inventory-card-body",children:[r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Stock"}),r.jsxs("span",{className:`inventory-card-field-value stock-value ${Ce.stock<=$A?"stock-low":""}`,children:[Ce.stock,r.jsxs("span",{className:"inventory-card-loose",children:[" (",Ce.loose??0," loose)"]})]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"MRP"}),r.jsxs("span",{className:"inventory-card-field-value price-value",children:["",typeof Ce.mrp=="number"?Ce.mrp.toFixed(2):"N/A"]})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Pack"}),r.jsx("span",{className:"inventory-card-field-value",children:Ce.pack||"-"})]}),r.jsxs("div",{className:"inventory-card-field",children:[r.jsx("span",{className:"inventory-card-field-label",children:"Expiry"}),r.jsx("span",{className:"inventory-card-field-value",children:Ce.expiry_date?new Date(Ce.expiry_date).toLocaleDateString("en-GB"):"-"})]})]}),O.has(Ce.id)&&r.jsxs("div",{className:"inventory-card-expanded",children:[r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Rate"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.rate!==null&&Ce.rate!==void 0?`${Ce.rate.toFixed(2)}`:"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Box"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.box_number||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Supplier"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.supplier||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Batch"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.batch||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"HSN Code"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.hsn_code||"-"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"Discount"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.discount!==null&&Ce.discount!==void 0?`${Ce.discount.toFixed(2)}%`:"0.00%"})]}),r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:"GST"}),r.jsx("span",{className:"inventory-card-expanded-value",children:Ce.gst!==null&&Ce.gst!==void 0?`${Ce.gst.toFixed(2)}%`:"-"})]}),s.length>0&&s.map(lt=>{var Tt;return r.jsxs("div",{className:"inventory-card-expanded-row",children:[r.jsx("span",{className:"inventory-card-expanded-label",children:lt.label}),r.jsx("span",{className:"inventory-card-expanded-value",children:(Tt=Ce.custom_fields)!=null&&Tt[lt.key]?String(Ce.custom_fields[lt.key]):"-"})]},lt.key)})]}),r.jsxs("div",{className:"inventory-card-actions",onClick:lt=>lt.stopPropagation(),children:[r.jsxs("button",{className:"inventory-card-action-btn btn-edit",onClick:()=>n(`/dashboard/inventory/edit/${Ce.id}`),title:"Edit Drug",children:[r.jsx(Ia,{size:14}),"Edit"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-delete",onClick:()=>_e(Ce),title:"Delete Drug",children:[r.jsx(Wn,{size:14}),"Delete"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-adjust",onClick:()=>{K(Ce),$(!0)},title:"Adjust Stock",children:[r.jsx(vI,{size:14}),"Adjust"]}),r.jsxs("button",{className:"inventory-card-action-btn btn-convert",onClick:()=>mt(Ce),title:"Convert to Loose",disabled:!Ce.pack||rt(Ce.pack)===null,children:[r.jsx(NI,{size:14}),"Loose"]})]})]},Ce.id))}),ee>1&&r.jsxs("div",{className:"pagination-controls",style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",backgroundColor:"var(--card-bg, #fff)",borderTop:"1px solid var(--border-color)"},children:[r.jsx("button",{onClick:()=>z(Ce=>Math.max(Ce-1,1)),disabled:G===1,className:"pagination-button",children:"Previous"}),r.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Page ",G," of ",ee]}),r.jsx("button",{onClick:()=>z(Ce=>Math.min(Ce+1,ee)),disabled:G===ee,className:"pagination-button",children:"Next"})]}),L&&H&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:$e,className:"modal-close-button",children:r.jsx(qt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),r.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',r.jsx("span",{className:"drug-name",children:H.name||"Unnamed Drug"}),'"? This action cannot be undone.']}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:$e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ze,className:"button-delete",children:"Delete"})]})]})}),B&&je&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Ge,className:"modal-close-button",children:r.jsx(qt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:je.name||"Unnamed Drug"}),r.jsx("br",{}),"Current Stock: ",je.stock]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:oe,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),r.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:Oe===0?"":Oe,onChange:Le,placeholder:"e.g., 10 or -5",className:"form-input"}),r.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Ge,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),X&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ye,className:"modal-close-button",children:r.jsx(qt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ye,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ke,className:"button-delete",children:"Delete All"})]})]})}),pe&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Be,className:"modal-close-button",children:r.jsx(qt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of Selected Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:W.size})," selected drug(s)? This action cannot be undone."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Be,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ee,className:"button-delete",children:"Delete Selected"})]})]})}),Me&&be&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:Pe,className:"modal-close-button",children:r.jsx(qt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Convert to Loose"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:be.name||"Unnamed Drug"}),r.jsx("br",{}),"Pack Size: ",be.pack,r.jsx("br",{}),"Current Stock: ",be.stock," packs, ",be.loose??0," loose units."]}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("form",{onSubmit:et,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"packsToConvert",className:"form-label",children:"Packs to Convert"}),r.jsx("input",{type:"number",name:"packsToConvert",id:"packsToConvert",required:!0,step:"1",min:"1",max:be.stock,value:ve===0?"":ve,onChange:Je,className:"form-input"}),r.jsxs("p",{className:"form-help-text",children:["Converting ",ve," pack(s) will add ",ve*(rt(be.pack)||0)," loose units."]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:Pe,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Convert"})]})]})]})}),fe&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:_t,className:"modal-close-button",children:r.jsx(qt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Add Default Medications"}),r.jsx("p",{className:"modal-description",children:"Are you sure you want to add default medications to the inventory? This will add a predefined set of common medications."}),T&&r.jsx("div",{className:"modal-error-message",children:T}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:_t,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:vt,className:"button-submit",children:"Add Defaults"})]})]})}),r.jsx(kM,{isOpen:o,onClose:()=>l(!1),entityType:"drugs",entityLabel:"Pharmacy Drugs",currentConfig:i,onConfigUpdated:()=>{a()}})]})},OMe=()=>{const t=Mt();return r.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[r.jsx("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},iG=()=>{const{id:t}=Oi(),e=Mt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,d]=b.useState(!1),[f,p]=b.useState(!1),y=b.useRef(null),x=b.useRef(null),v=b.useRef(null),S=b.useCallback(async()=>{if(!t){l("Drug ID is missing."),s(!1);return}s(!0),l(null);try{const C=await ue(`/api/drugs/${t}`);if(!C.ok){const k=await C.json();throw new Error(k.message||`Failed to fetch drug: ${C.statusText}`)}let O=await C.json();O={...O,name:O.name||"",brand_name:O.brand_name||"",mrp:parseFloat(String(O.mrp))||0,rate:O.rate!==null&&O.rate!==void 0?parseFloat(String(O.rate)):null,stock:parseInt(String(O.stock),10)||0,gst:O.gst!==null&&O.gst!==void 0?parseFloat(String(O.gst)):null,margin:O.margin!==null&&O.margin!==void 0?parseFloat(String(O.margin)):null,discount:O.discount!==null&&O.discount!==void 0?parseFloat(String(O.discount)):null,batch:O.batch||"",hsn_code:O.hsn_code||"",mfg:O.mfg||"",loose:O.loose!==null&&O.loose!==void 0?parseInt(String(O.loose),10):null},i(O)}catch(C){console.error("Failed to fetch drug:",C),l(C.message||"Failed to load drug data. Please try again.")}finally{s(!1)}},[t]);b.useEffect(()=>{S()},[S]),b.useEffect(()=>{const C=k=>{k.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var P;(P=v.current)==null||P.focus()},0),k.preventDefault()))},O=k=>{y.current&&!y.current.contains(k.target)&&p(!1)};return document.addEventListener("keydown",C),document.addEventListener("mousedown",O),()=>{document.removeEventListener("keydown",C),document.removeEventListener("mousedown",O)}},[f]);const N=C=>{const{name:O,value:k,type:P}=C.target;i(I=>I?{...I,[O]:P==="number"?parseFloat(k)||null:k}:null)},_=()=>{e(-1)},T=async C=>{if(C.preventDefault(),l(null),d(!0),!n||!n.id){l("Cannot edit drug: No drug data available."),d(!1);return}if(n.mrp===void 0||n.stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const O={...n,name:n.name===""?null:n.name,brand_name:n.brand_name===""?null:n.brand_name,rate:n.rate===0?null:n.rate,expiry_date:n.expiry_date===""?null:n.expiry_date,gst:n.gst===0?null:n.gst,margin:n.margin===0?null:n.margin,discount:n.discount===0?null:n.discount,batch:n.batch===""?null:n.batch,hsn_code:n.hsn_code===""?null:n.hsn_code,mfg:n.mfg===""?null:n.mfg,loose:n.loose===0?null:n.loose};try{const k=await ue(`/api/drugs/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!k.ok){const P=await k.json();throw new Error(P.message||`Failed to update drug: ${k.statusText}`)}await k.json(),e(-1)}catch(k){console.error("Failed to update drug:",k),l(k.message||"Failed to update drug. Please try again.")}finally{d(!1)}};return a?r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):o&&!n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"error-message-load",children:["Error: ",o]})}):n?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"edit-drug-form-container",children:[r.jsxs("div",{className:"edit-drug-form-header",children:[r.jsxs("h2",{children:["Edit Drug: ",n.name]}),r.jsx("button",{onClick:_,className:"cancel-button",title:"Go Back",children:r.jsx(qt,{size:24})})]}),o&&r.jsx("div",{className:"error-message-submit",children:o}),r.jsxs("form",{onSubmit:T,className:"edit-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Composition Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Sl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"edit-name",value:n.name||"",onChange:N,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})," "]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-brand_name",className:"form-label",children:"Brand Name"})," ",r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Sl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"edit-brand_name",value:n.brand_name||"",onChange:N,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Sl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"edit-mrp",required:!0,step:"0.01",min:"0",value:n.mrp||"",onChange:N,className:"custom-text-input",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Sl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"edit-stock",required:!0,step:"1",min:"0",value:n.stock||"",onChange:N,className:"custom-text-input",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"edit-pack",value:n.pack||"",onChange:N,className:"custom-text-input",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:n.expiry_date||"",onChange:N,className:"custom-text-input",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:n.box_number||"",onChange:N,className:"custom-text-input",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:y,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:n.description||"",onChange:N,className:"custom-text-input",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:n.supplier||"",onChange:N,className:"custom-text-input",placeholder:"Optional",tabIndex:10})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"edit-rate",step:"0.01",min:"0",value:n.rate??"",onChange:N,placeholder:"Optional",className:"custom-text-input",tabIndex:11,ref:v})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"edit-gst",step:"0.01",min:"0",max:"100",value:n.gst??"",onChange:N,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"edit-margin",step:"0.01",min:"0",max:"100",value:n.margin??"",onChange:N,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"edit-discount",step:"0.01",min:"0",max:"100",value:n.discount??"",onChange:N,placeholder:"Optional",className:"custom-text-input",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"edit-batch",value:n.batch||"",onChange:N,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"edit-hsn_code",value:n.hsn_code||"",onChange:N,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"edit-mfg",value:n.mfg||"",onChange:N,className:"custom-text-input",placeholder:"Optional",tabIndex:17})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-loose",className:"form-label",children:"Loose"}),r.jsx("input",{type:"number",name:"loose",id:"edit-loose",step:"1",min:"0",value:n.loose??"",onChange:N,placeholder:"Optional",className:"custom-text-input",tabIndex:18})]})]})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:_,disabled:c,className:"form-button cancel-form-button",tabIndex:19,children:"Back"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:20,children:c?"Saving...":"Save Changes"})]})]})]})}):r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"not-found-message",children:"Drug not found."})})},DMe=({clinicId:t})=>{const e=Mt(),[n,i]=b.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[a,s]=b.useState(null),[o,l]=b.useState(!1),[c,d]=b.useState([]),[f,p]=b.useState(!0),y=async()=>{try{const N=await ue("/api/clinic-roles");if(N.ok){const _=await N.json();d(_)}}catch(N){console.error("Failed to fetch roles:",N)}finally{p(!1)}};b.useEffect(()=>{s(t?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly."),y()},[t]);const x=N=>{const{name:_,value:T}=N.target;i(C=>{const O={...C,[_]:T};return _==="role"&&T!=="doctor"&&(O.opd_fee=""),O})},v=async N=>{if(N.preventDefault(),s(null),!n.name||!n.email||!n.role||!n.password){s("Name, Email, Role, and Password are required.");return}if(!t){s("Clinic information is missing. Cannot add staff.");return}const _={...n,clinic_id:t,opd_fee:n.role==="doctor"&&n.opd_fee?parseFloat(String(n.opd_fee)):null};if(_.role==="doctor"&&n.opd_fee&&isNaN(_.opd_fee)){s("Invalid OPD Fee format. Please enter a number.");return}l(!0);try{const T=await ue("/api/staff",{method:"POST",body:JSON.stringify(_)});if(!T.ok){const C=await T.json();throw new Error(C.message||"Server responded with an error")}e(-1)}catch(T){s(`Failed to add staff: ${T.message}`)}finally{l(!1)}},S=()=>{e(-1)};return r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:S,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(nn,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{children:"Add New Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),a&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),a]}),r.jsxs("form",{onSubmit:v,className:`staff-form ${t?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{id:"name",type:"text",name:"name",value:n.name||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",name:"email",value:n.email||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"role",children:"Assign Role"}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:x,required:!0,disabled:o||!t||f,children:f?r.jsx("option",{value:"",children:"Loading roles..."}):c.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]}):c.map(N=>r.jsx("option",{value:N.key,children:N.name},N.key))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:n.password||"",onChange:x,required:!0,disabled:o||!t,placeholder:"Create a password"})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee () (Optional)"}),r.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:n.opd_fee||"",onChange:x,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:o||!t}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),r.jsxs("button",{type:"submit",disabled:o||!t,children:[o?r.jsx(Dc,{size:18,className:"animate-spin mr-2"}):r.jsx(ur,{size:18,className:"mr-2"}),o?"Adding...":"Add Staff Member"]})]})]})},MMe=()=>{const{id:t}=Oi(),e=Mt(),[n,i]=b.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[a,s]=b.useState(""),[o,l]=b.useState(!0),[c,d]=b.useState(!1),[f,p]=b.useState(null),[y,x]=b.useState(null),[v,S]=b.useState([]),[N,_]=b.useState(!0),T=async()=>{try{const I=await ue("/api/clinic-roles");if(I.ok){const F=await I.json();S(F)}}catch(I){console.error("Failed to fetch roles:",I)}finally{_(!1)}},C=b.useCallback(async()=>{if(!t){p("Staff ID is missing."),l(!1);return}l(!0),p(null),x(null);try{const I=await ue(`/staff/${t}`);if(!I.ok){const B=await I.json();throw new Error(B.message||`HTTP error! status: ${I.status}`)}const F=await I.json();i({name:F.name,email:F.email,role:F.role,opd_fee:F.opd_fee??"",active:F.active})}catch(I){p(`Failed to load staff details: ${I.message}`)}finally{l(!1)}},[t]);b.useEffect(()=>{C(),T()},[C]);const O=I=>{const{name:F,value:B,type:$}=I.target;if($==="checkbox"){const{checked:L}=I.target;i(V=>({...V,[F]:L}))}else i(L=>({...L,[F]:B}))},k=I=>{s(I.target.value)},P=async I=>{if(I.preventDefault(),!t){p("Staff ID is missing.");return}d(!0),p(null),x(null);const F={name:n.name,email:n.email,role:n.role,active:n.active};if(n.role==="doctor"){const B=n.opd_fee?parseFloat(String(n.opd_fee)):null;if(B!==null&&isNaN(B)){p("OPD Fee must be a valid number."),d(!1);return}F.opd_fee=B}else F.opd_fee=null;a.trim()!==""&&(F.password=a.trim());try{const B=await ue(`/staff/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!B.ok){const $=await B.json();throw new Error($.message||`HTTP error! status: ${B.status}`)}x("Staff details updated successfully!"),s(""),setTimeout(()=>e(-1),1500)}catch(B){p(`Failed to update staff: ${B.message}`)}finally{d(!1)}};return o?r.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(Dc,{className:"h-12 w-12 animate-spin text-teal-600"}),r.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(nn,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),f&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),f,r.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),y&&r.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[r.jsx(Ol,{size:18,className:"mr-2 text-green-500"}),y,r.jsx("button",{onClick:()=>x(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:""})]}),r.jsxs("form",{onSubmit:P,className:"staff-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:O,required:!0,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:n.email||"",onChange:O,required:!0,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"role",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:O,required:!0,disabled:N,children:N?r.jsx("option",{value:"",children:"Loading roles..."}):v.length===0?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"lab",children:"Lab Technician"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"})]}):v.map(I=>r.jsx("option",{value:I.key,children:I.name},I.key))})]}),n.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee ()"}),r.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:n.opd_fee||"",onChange:O,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),r.jsxs("div",{className:"form-group checkbox-group",children:[r.jsx("input",{id:"active",name:"active",type:"checkbox",checked:n.active??!0,onChange:O}),r.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),r.jsx("input",{type:"password",id:"password",name:"password",value:a,onChange:k,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),r.jsx("button",{type:"submit",disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(Dc,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Js,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})},IMe=()=>{const{patientId:t}=Oi(),e=Mt(),[n,i]=b.useState([]),[a,s]=b.useState(null),[o,l]=b.useState(!1),[c,d]=b.useState(null);b.useEffect(()=>{(async()=>{if(!t){d("Patient ID not provided.");return}l(!0),d(null);try{const y=await ue(`/api/patients/${t}`);if(!y.ok)throw new Error(`Failed to fetch patient details: ${y.status}`);const x=await y.json();s({name:x.name,age:x.age,gender:x.gender});const v=await ue(`/api/patients/${t}/complaints`);if(v.ok){const N=(await v.json()).sort((_,T)=>new Date(T.createdAt).getTime()-new Date(_.createdAt).getTime());i(N)}else if(v.status===404)i([]);else throw new Error(`Failed to fetch complaints: ${v.status}`)}catch(y){console.error("Error fetching past complaints or patient info:",y),d(`Failed to load data. ${y.message}`),i([]),s(null)}finally{l(!1)}})()},[t]);const f=p=>{navigator.clipboard.writeText(p).then(()=>console.log("Complaint copied to clipboard")).catch(y=>console.error("Failed to copy complaint: ",y))};return r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),r.jsx("div",{className:"w-16"})," "]}),a&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",r.jsx("strong",{children:a.name})," (",a.age??"N/A"," / ",a.gender??"N/A",")"]}),c&&r.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",c]}),o&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!o&&n.length===0&&!c&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!o&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(p=>r.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(p.createdAt).toLocaleString()}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.complaint}),r.jsx("button",{onClick:()=>f(p.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:""})]},p.id))})]})};var RMe=Object.defineProperty,ES=Object.getOwnPropertySymbols,aG=Object.prototype.hasOwnProperty,sG=Object.prototype.propertyIsEnumerable,CB=(t,e,n)=>e in t?RMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bO=(t,e)=>{for(var n in e||(e={}))aG.call(e,n)&&CB(t,n,e[n]);if(ES)for(var n of ES(e))sG.call(e,n)&&CB(t,n,e[n]);return t},jO=(t,e)=>{var n={};for(var i in t)aG.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&ES)for(var i of ES(t))e.indexOf(i)<0&&sG.call(t,i)&&(n[i]=t[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Af;(t=>{const e=class An{constructor(c,d,f,p){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<An.MIN_VERSION||c>An.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let y=[];for(let v=0;v<this.size;v++)y.push(!1);for(let v=0;v<this.size;v++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(f);if(this.drawCodewords(x),p==-1){let v=1e9;for(let S=0;S<8;S++){this.applyMask(S),this.drawFormatBits(S);const N=this.getPenaltyScore();N<v&&(p=S,v=N),this.applyMask(S)}}a(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,d){const f=t.QrSegment.makeSegments(c);return An.encodeSegments(f,d)}static encodeBinary(c,d){const f=t.QrSegment.makeBytes(c);return An.encodeSegments([f],d)}static encodeSegments(c,d,f=1,p=40,y=-1,x=!0){if(!(An.MIN_VERSION<=f&&f<=p&&p<=An.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let v,S;for(v=f;;v++){const C=An.getNumDataCodewords(v,d)*8,O=o.getTotalBits(c,v);if(O<=C){S=O;break}if(v>=p)throw new RangeError("Data too long")}for(const C of[An.Ecc.MEDIUM,An.Ecc.QUARTILE,An.Ecc.HIGH])x&&S<=An.getNumDataCodewords(v,C)*8&&(d=C);let N=[];for(const C of c){n(C.mode.modeBits,4,N),n(C.numChars,C.mode.numCharCountBits(v),N);for(const O of C.getData())N.push(O)}a(N.length==S);const _=An.getNumDataCodewords(v,d)*8;a(N.length<=_),n(0,Math.min(4,_-N.length),N),n(0,(8-N.length%8)%8,N),a(N.length%8==0);for(let C=236;N.length<_;C^=253)n(C,8,N);let T=[];for(;T.length*8<N.length;)T.push(0);return N.forEach((C,O)=>T[O>>>3]|=C<<7-(O&7)),new An(v,d,T,y)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let f=0;f<d;f++)for(let p=0;p<d;p++)f==0&&p==0||f==0&&p==d-1||f==d-1&&p==0||this.drawAlignmentPattern(c[f],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let f=d;for(let y=0;y<10;y++)f=f<<1^(f>>>9)*1335;const p=(d<<10|f)^21522;a(p>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,i(p,y));this.setFunctionModule(8,7,i(p,6)),this.setFunctionModule(8,8,i(p,7)),this.setFunctionModule(7,8,i(p,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,i(p,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,i(p,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,i(p,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let f=0;f<12;f++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;a(d>>>18==0);for(let f=0;f<18;f++){const p=i(d,f),y=this.size-11+f%3,x=Math.floor(f/3);this.setFunctionModule(y,x,p),this.setFunctionModule(x,y,p)}}drawFinderPattern(c,d){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const y=Math.max(Math.abs(p),Math.abs(f)),x=c+p,v=d+f;0<=x&&x<this.size&&0<=v&&v<this.size&&this.setFunctionModule(x,v,y!=2&&y!=4)}}drawAlignmentPattern(c,d){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,d+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(c,d,f){this.modules[d][c]=f,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,f=this.errorCorrectionLevel;if(c.length!=An.getNumDataCodewords(d,f))throw new RangeError("Invalid argument");const p=An.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][d],y=An.ECC_CODEWORDS_PER_BLOCK[f.ordinal][d],x=Math.floor(An.getNumRawDataModules(d)/8),v=p-x%p,S=Math.floor(x/p);let N=[];const _=An.reedSolomonComputeDivisor(y);for(let C=0,O=0;C<p;C++){let k=c.slice(O,O+S-y+(C<v?0:1));O+=k.length;const P=An.reedSolomonComputeRemainder(k,_);C<v&&k.push(0),N.push(k.concat(P))}let T=[];for(let C=0;C<N[0].length;C++)N.forEach((O,k)=>{(C!=S-y||k>=v)&&T.push(O[C])});return a(T.length==x),T}drawCodewords(c){if(c.length!=Math.floor(An.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let y=0;y<2;y++){const x=f-y,S=(f+1&2)==0?this.size-1-p:p;!this.isFunction[S][x]&&d<c.length*8&&(this.modules[S][x]=i(c[d>>>3],7-(d&7)),d++)}}a(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let f=0;f<this.size;f++){let p;switch(c){case 0:p=(f+d)%2==0;break;case 1:p=d%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+d)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(d/2))%2==0;break;case 5:p=f*d%2+f*d%3==0;break;case 6:p=(f*d%2+f*d%3)%2==0;break;case 7:p=((f+d)%2+f*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][f]&&p&&(this.modules[d][f]=!this.modules[d][f])}}getPenaltyScore(){let c=0;for(let y=0;y<this.size;y++){let x=!1,v=0,S=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[y][N]==x?(v++,v==5?c+=An.PENALTY_N1:v>5&&c++):(this.finderPenaltyAddHistory(v,S),x||(c+=this.finderPenaltyCountPatterns(S)*An.PENALTY_N3),x=this.modules[y][N],v=1);c+=this.finderPenaltyTerminateAndCount(x,v,S)*An.PENALTY_N3}for(let y=0;y<this.size;y++){let x=!1,v=0,S=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[N][y]==x?(v++,v==5?c+=An.PENALTY_N1:v>5&&c++):(this.finderPenaltyAddHistory(v,S),x||(c+=this.finderPenaltyCountPatterns(S)*An.PENALTY_N3),x=this.modules[N][y],v=1);c+=this.finderPenaltyTerminateAndCount(x,v,S)*An.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let x=0;x<this.size-1;x++){const v=this.modules[y][x];v==this.modules[y][x+1]&&v==this.modules[y+1][x]&&v==this.modules[y+1][x+1]&&(c+=An.PENALTY_N2)}let d=0;for(const y of this.modules)d=y.reduce((x,v)=>x+(v?1:0),d);const f=this.size*this.size,p=Math.ceil(Math.abs(d*20-f*10)/f)-1;return a(0<=p&&p<=9),c+=p*An.PENALTY_N4,a(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let f=[6];for(let p=this.size-7;f.length<c;p-=d)f.splice(1,0,p);return f}}static getNumRawDataModules(c){if(c<An.MIN_VERSION||c>An.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const f=Math.floor(c/7)+2;d-=(25*f-10)*f-55,c>=7&&(d-=36)}return a(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(An.getNumRawDataModules(c)/8)-An.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*An.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let p=0;p<c-1;p++)d.push(0);d.push(1);let f=1;for(let p=0;p<c;p++){for(let y=0;y<d.length;y++)d[y]=An.reedSolomonMultiply(d[y],f),y+1<d.length&&(d[y]^=d[y+1]);f=An.reedSolomonMultiply(f,2)}return d}static reedSolomonComputeRemainder(c,d){let f=d.map(p=>0);for(const p of c){const y=p^f.shift();f.push(0),d.forEach((x,v)=>f[v]^=An.reedSolomonMultiply(x,y))}return f}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(d>>>p&1)*c;return a(f>>>8==0),f}finderPenaltyCountPatterns(c){const d=c[1];a(d<=this.size*3);const f=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(f&&c[0]>=d*4&&c[6]>=d?1:0)+(f&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,f){return c&&(this.finderPenaltyAddHistory(d,f),d=0),d+=this.size,this.finderPenaltyAddHistory(d,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let f=c-1;f>=0;f--)d.push(l>>>f&1)}function i(l,c){return(l>>>c&1)!=0}function a(l){if(!l)throw new Error("Assertion error")}const s=class Yr{constructor(c,d,f){if(this.mode=c,this.numChars=d,this.bitData=f,d<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(c){let d=[];for(const f of c)n(f,8,d);return new Yr(Yr.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!Yr.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let f=0;f<c.length;){const p=Math.min(c.length-f,3);n(parseInt(c.substring(f,f+p),10),p*3+1,d),f+=p}return new Yr(Yr.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!Yr.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],f;for(f=0;f+2<=c.length;f+=2){let p=Yr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f))*45;p+=Yr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f+1)),n(p,11,d)}return f<c.length&&n(Yr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f)),6,d),new Yr(Yr.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:Yr.isNumeric(c)?[Yr.makeNumeric(c)]:Yr.isAlphanumeric(c)?[Yr.makeAlphanumeric(c)]:[Yr.makeBytes(Yr.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new Yr(Yr.Mode.ECI,0,d)}static isNumeric(c){return Yr.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Yr.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let f=0;for(const p of c){const y=p.mode.numCharCountBits(d);if(p.numChars>=1<<y)return 1/0;f+=4+y+p.bitData.length}return f}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let f=0;f<c.length;f++)c.charAt(f)!="%"?d.push(c.charCodeAt(f)):(d.push(parseInt(c.substring(f+1,f+3),16)),f+=2);return d}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;t.QrSegment=s})(Af||(Af={}));(t=>{(e=>{const n=class{constructor(a,s){this.ordinal=a,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Af||(Af={}));(t=>{(e=>{const n=class{constructor(a,s){this.modeBits=a,this.numBitsCharCount=s}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Af||(Af={}));var Om=Af;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var LMe={L:Om.QrCode.Ecc.LOW,M:Om.QrCode.Ecc.MEDIUM,Q:Om.QrCode.Ecc.QUARTILE,H:Om.QrCode.Ecc.HIGH},oG=128,lG="L",cG="#FFFFFF",uG="#000000",dG=!1,hG=1,FMe=4,$Me=0,BMe=.1;function fG(t,e=0){const n=[];return t.forEach(function(i,a){let s=null;i.forEach(function(o,l){if(!o&&s!==null){n.push(`M${s+e} ${a+e}h${l-s}v1H${s+e}z`),s=null;return}if(l===i.length-1){if(!o)return;s===null?n.push(`M${l+e},${a+e} h1v1H${l+e}z`):n.push(`M${s+e},${a+e} h${l+1-s}v1H${s+e}z`);return}o&&s===null&&(s=l)})}),n.join("")}function pG(t,e){return t.slice().map((n,i)=>i<e.y||i>=e.y+e.h?n:n.map((a,s)=>s<e.x||s>=e.x+e.w?a:!1))}function zMe(t,e,n,i){if(i==null)return null;const a=t.length+n*2,s=Math.floor(e*BMe),o=a/e,l=(i.width||s)*o,c=(i.height||s)*o,d=i.x==null?t.length/2-l/2:i.x*o,f=i.y==null?t.length/2-c/2:i.y*o,p=i.opacity==null?1:i.opacity;let y=null;if(i.excavate){let v=Math.floor(d),S=Math.floor(f),N=Math.ceil(l+d-v),_=Math.ceil(c+f-S);y={x:v,y:S,w:N,h:_}}const x=i.crossOrigin;return{x:d,y:f,h:c,w:l,excavation:y,opacity:p,crossOrigin:x}}function qMe(t,e){return e!=null?Math.max(Math.floor(e),0):t?FMe:$Me}function mG({value:t,level:e,minVersion:n,includeMargin:i,marginSize:a,imageSettings:s,size:o,boostLevel:l}){let c=Se.useMemo(()=>{const v=(Array.isArray(t)?t:[t]).reduce((S,N)=>(S.push(...Om.QrSegment.makeSegments(N)),S),[]);return Om.QrCode.encodeSegments(v,LMe[e],n,void 0,void 0,l)},[t,e,n,l]);const{cells:d,margin:f,numCells:p,calculatedImageSettings:y}=Se.useMemo(()=>{let x=c.getModules();const v=qMe(i,a),S=x.length+v*2,N=zMe(x,o,v,s);return{cells:x,margin:v,numCells:S,calculatedImageSettings:N}},[c,o,s,i,a]);return{qrcode:c,margin:f,cells:d,numCells:p,calculatedImageSettings:y}}var UMe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),ua=Se.forwardRef(function(e,n){const i=e,{value:a,size:s=oG,level:o=lG,bgColor:l=cG,fgColor:c=uG,includeMargin:d=dG,minVersion:f=hG,boostLevel:p,marginSize:y,imageSettings:x}=i,S=jO(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:N}=S,_=jO(S,["style"]),T=x==null?void 0:x.src,C=Se.useRef(null),O=Se.useRef(null),k=Se.useCallback(te=>{C.current=te,typeof n=="function"?n(te):n&&(n.current=te)},[n]),[P,I]=Se.useState(!1),{margin:F,cells:B,numCells:$,calculatedImageSettings:L}=mG({value:a,level:o,minVersion:f,boostLevel:p,includeMargin:d,marginSize:y,imageSettings:x,size:s});Se.useEffect(()=>{if(C.current!=null){const te=C.current,X=te.getContext("2d");if(!X)return;let q=B;const W=O.current,ae=L!=null&&W!==null&&W.complete&&W.naturalHeight!==0&&W.naturalWidth!==0;ae&&L.excavation!=null&&(q=pG(B,L.excavation));const G=window.devicePixelRatio||1;te.height=te.width=s*G;const z=s/$*G;X.scale(z,z),X.fillStyle=l,X.fillRect(0,0,$,$),X.fillStyle=c,UMe?X.fill(new Path2D(fG(q,F))):B.forEach(function(le,je){le.forEach(function(K,Oe){K&&X.fillRect(Oe+F,je+F,1,1)})}),L&&(X.globalAlpha=L.opacity),ae&&X.drawImage(W,L.x+F,L.y+F,L.w,L.h)}}),Se.useEffect(()=>{I(!1)},[T]);const V=bO({height:s,width:s},N);let H=null;return T!=null&&(H=Se.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{I(!0)},ref:O,crossOrigin:L==null?void 0:L.crossOrigin})),Se.createElement(Se.Fragment,null,Se.createElement("canvas",bO({style:V,height:s,width:s,ref:k,role:"img"},_)),H)});ua.displayName="QRCodeCanvas";var VMe=Se.forwardRef(function(e,n){const i=e,{value:a,size:s=oG,level:o=lG,bgColor:l=cG,fgColor:c=uG,includeMargin:d=dG,minVersion:f=hG,boostLevel:p,title:y,marginSize:x,imageSettings:v}=i,S=jO(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:N,cells:_,numCells:T,calculatedImageSettings:C}=mG({value:a,level:o,minVersion:f,boostLevel:p,includeMargin:d,marginSize:x,imageSettings:v,size:s});let O=_,k=null;v!=null&&C!=null&&(C.excavation!=null&&(O=pG(_,C.excavation)),k=Se.createElement("image",{href:v.src,height:C.h,width:C.w,x:C.x+N,y:C.y+N,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const P=fG(O,N);return Se.createElement("svg",bO({height:s,width:s,viewBox:`0 0 ${T} ${T}`,ref:n,role:"img"},S),!!y&&Se.createElement("title",null,y),Se.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),Se.createElement("path",{fill:c,d:P,shapeRendering:"crispEdges"}),k)});VMe.displayName="QRCodeSVG";const HMe=t=>{if(t===0)return"Zero";const e=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],i=l=>l===0?"":l<20?e[l]:l<100?n[Math.floor(l/10)]+(l%10?" "+e[l%10]:""):e[Math.floor(l/100)]+" Hundred"+(l%100?" and "+i(l%100):""),a=Math.floor(t),s=Math.round((t-a)*100);let o="";return a>=1e7&&(o+=i(Math.floor(a/1e7))+" Crore "),a>=1e5&&(o+=i(Math.floor(a%1e7/1e5))+" Lakh "),a>=1e3&&(o+=i(Math.floor(a%1e5/1e3))+" Thousand "),a>=100&&(o+=i(Math.floor(a%1e3/100))+" Hundred "),a%100&&(o+=(o?"and ":"")+i(a%100)),o=o.trim()+" Rupees",s>0&&(o+=" and "+i(s)+" Paise"),o+" Only"},GMe=t=>{const e=typeof t=="string"?parseInt(t,10):t;return`INV-${String(e).padStart(6,"0")}`},BA=500,TB="defaultConsultationFee",WMe=({patientId:t,billId:e,queueId:n,onBillCreated:i,onBillUpdated:a,initialItems:s=[],billType:o="other",relatedId:l,initialStatus:c="pending",initialDiscountPercentage:d=0,readOnlyMode:f=!1,doctorId:p,labOrderId:y,patientInsuranceType:x})=>{const[v,S]=b.useState(null),[N,_]=b.useState([]),T=b.useRef([]),[C,O]=b.useState(""),[k,P]=b.useState(""),[I,F]=b.useState(1),[B,$]=b.useState(d),[L,V]=b.useState("cash"),[H,te]=b.useState(!1),[X,q]=b.useState(null),[W,ae]=b.useState(!1),[G,z]=b.useState(!1),[le,je]=b.useState(!1),[K,Oe]=b.useState(null),[Ye,Me]=b.useState([]),[Ie,be]=b.useState(null),[re,ve]=b.useState(""),[ce,fe]=b.useState("cash"),[se,Q]=b.useState(!1),[ie,ge]=b.useState(!1),[ee,we]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ue=()=>{ee.length<5&&we(it=>[...it,{id:Date.now().toString(),method:"cash",amount:0}])},Ge=it=>{ee.length>2&&we(St=>St.filter(Nt=>Nt.id!==it))},Le=(it,St,Nt)=>{we(It=>It.map(On=>On.id===it?St==="method"?{...On,method:Nt}:{...On,amount:Math.max(0,Nt)}:On))},oe=(it,St)=>{const Nt=ee.filter(vn=>vn.id!==it).reduce((vn,On)=>vn+On.amount,0),It=Math.max(0,St-Nt);we(vn=>vn.map(On=>On.id===it?{...On,amount:It}:On))},[_e,$e]=b.useState(null),[ze,Y]=b.useState(!1),[ye,pe]=b.useState(BA),[me,Ne]=b.useState(BA.toString()),[Be,Ee]=b.useState(""),[Ke,rt]=b.useState(""),[mt,Pe]=b.useState(""),[Je,et]=b.useState(""),[ut,_t]=b.useState(""),vt=e?"view_pay":"create";b.useEffect(()=>{const it=localStorage.getItem(TB),St=it?parseFloat(it):BA;isNaN(St)||(pe(St),Ne(St.toString()))},[]);const Ce=s.length===0;b.useEffect(()=>{t?(async()=>{te(!0),q(null);try{const St=await ue(`/api/patients/${t}`);if(!St.ok){const It=await St.json().catch(()=>({}));throw new Error(It.message||"Failed to fetch patient details")}const Nt=await St.json();S(Nt)}catch(St){q(`Failed to load patient details: ${St.message}`),S(null)}finally{te(!1)}})():S(null)},[t]),b.useEffect(()=>{e?(async()=>{je(!0),q(null),Oe(null),Me([]),be(null);try{const St=await ue(`/api/bills/${e}`);if(!St.ok){const It=await St.json().catch(()=>({}));throw new Error(It.message||"Failed to fetch bill details")}const Nt=await St.json();if(!Nt.bill||!Nt.payments||!Nt.calculated)throw new Error("Invalid bill details structure.");Oe(Nt.bill),Me(Nt.payments),be(Nt.calculated),$(Nt.bill.discount_percentage!==void 0&&Nt.bill.discount_percentage!==null?parseFloat(Nt.bill.discount_percentage.toString()):0),Nt.bill.payment_mode&&V(Nt.bill.payment_mode),!v&&Nt.bill.patient_id&&lt(Nt.bill.patient_id.toString())}catch(St){q(`Failed to load bill details: ${St.message}`),Oe(null),Me([]),be(null)}finally{je(!1)}})():(Oe(null),Me([]),be(null))},[e]),b.useEffect(()=>{(async()=>{try{const St=await ue("/api/clinics/settings");if(!St.ok)throw new Error("Failed to fetch clinic settings");const Nt=await St.json();Ee(Nt.upi_id||""),rt(Nt.name||""),Pe(Nt.address||""),et(Nt.notes||"")}catch(St){console.error("Error fetching clinic settings:",St)}})()},[]);const lt=async it=>{te(!0);try{const St=await ue(`/api/patients/${it}`);if(!St.ok)throw new Error("Failed to fetch patient");const Nt=await St.json();S(Nt)}catch(St){console.error("Error fetching patient details:",St),S(null)}finally{te(!1)}},Tt=b.useCallback(async it=>{z(!0),q(null);const St=it.filter(Nt=>Nt.drug_id!=null).map(async Nt=>{try{const It=await ue(`/api/drugs/${Nt.drug_id}`);if(!It.ok)throw new Error(`Drug ${Nt.drug_id} not found.`);const vn=await It.json();return{...Nt,price:vn.price,total:vn.price*Nt.quantity}}catch{return q(vn=>`${vn?vn+"; ":""}Failed to fetch price for ${Nt.name}`),Nt}});try{const Nt=await Promise.all(St);_(It=>{const vn=new Map(Nt.map(On=>[On.id,On]));return It.map(On=>vn.get(On.id)||On)})}catch{}finally{z(!1)}},[ue]);b.useEffect(()=>{if(e){_([]),T.current=[];return}JSON.stringify(s)===JSON.stringify(T.current)||(async()=>{let Nt=[];if(s&&s.length>0)Nt=s.map((It,vn)=>({...It,id:`initial-${vn}-${Date.now()}`})),V(c==="paid"?"cash":x==="no_cash_insurance"?"no_cash_insurance":"cash"),$(d),o==="pharmacy"&&!f&&await Tt(Nt);else if(t&&Ce&&o==="consultation"){let It=ye;if(p)try{const vn=await ue(`/api/staff/${p}`);if(!vn.ok){const yi=await vn.json().catch(()=>({}));throw new Error(yi.message||"Doctor not found or error fetching fee")}const On=await vn.json();On.opd_fee!=null&&!isNaN(parseFloat(String(On.opd_fee)))&&parseFloat(String(On.opd_fee))>=0&&(It=parseFloat(String(On.opd_fee)))}catch(vn){q(On=>`${On?On+"; ":""}Could not fetch doctor's fee, using default. (${vn.message})`)}Nt=[{id:Date.now(),name:"Consultation Fee",price:It,quantity:1,total:It*1,drug_id:null}],V(x==="no_cash_insurance"?"no_cash_insurance":"cash")}else Nt=[],V(x==="no_cash_insurance"?"no_cash_insurance":"cash");_(Nt),T.current=s})()},[e,t,p,s,o,ye,Ce,c,f,Tt,d,x]);const qe=()=>{const it=parseFloat(k);if(!f)if(C&&!isNaN(it)&&it>=0&&I>0){if(C.trim().toLowerCase()==="consultation fee"&&N.some(Nt=>Nt.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const St={id:Date.now(),name:C.trim(),price:it,quantity:I,total:it*I,drug_id:null};_([...N,St]),O(""),P(""),F(1)}else alert("Invalid item details.")},jt=it=>{f||_(N.filter(St=>St.id!==it))},Ct=b.useMemo(()=>{let it=N.reduce((St,Nt)=>St+Nt.total,0);return vt==="create"&&B>0&&(it=it*(1-B/100)),(Ie==null?void 0:Ie.totalDue)!==void 0&&(Ie==null?void 0:Ie.totalDue)!==null?Ie.totalDue:it},[N,Ie,B,vt]),Kn=b.useMemo(()=>N.reduce((it,St)=>it+St.total,0),[N]),br=b.useMemo(()=>Kn*(B/100),[Kn,B]),zn=b.useMemo(()=>(Ie==null?void 0:Ie.totalPaid)??0,[Ie]),_n=b.useMemo(()=>(Ie==null?void 0:Ie.balance)!==void 0&&(Ie==null?void 0:Ie.balance)!==null?Ie.balance:Ct-zn,[Ie,Ct,zn]);b.useEffect(()=>{if(Ct>0&&Be){const it=`upi://pay?pa=${Be}&pn=${encodeURIComponent(Ke)}&am=${Ct.toFixed(2)}&cu=INR`;_t(it)}else _t("")},[Ct,Be,Ke]),b.useEffect(()=>{(async()=>{if(L==="credit"&&t){Y(!0);try{const St=await ue(`/api/patient-debts/${t}/balance`);if(St.ok){const Nt=await St.json();$e(Nt.netDebt||0)}else $e(0)}catch(St){console.error("Error fetching patient debt:",St),$e(0)}finally{Y(!1)}}})()},[L,t]);const wn=()=>{const it=parseFloat(me);!isNaN(it)&&it>=0?(pe(it),localStorage.setItem(TB,it.toString())):alert("Invalid fee amount.")},oi=async(it,St)=>{ae(!0),q(null);try{const Nt=await ue("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:St,billId:it})}),It=await Nt.json();if(!Nt.ok||!It.order)throw new Error(It.message||"Failed to create Razorpay order.");const{key_id:vn,order:On}=It,yi={key:vn,amount:On.amount,currency:On.currency,name:"Newtons Ai HMS Clinic",description:`Bill Payment for Patient ID: ${t}`,order_id:On.id,handler:async function(ha){try{const no=await ue("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:ha.razorpay_payment_id,razorpay_order_id:ha.razorpay_order_id,razorpay_signature:ha.razorpay_signature,billId:it})}),_d=await no.json();if(no.ok&&_d.success)i&&i(it),a&&a(),setTimeout(()=>window.print(),200);else throw new Error(_d.message||"Payment verification failed.")}catch(no){q(`Payment verification failed: ${no.message}. Contact support.`)}finally{ae(!1)}},prefill:{name:(v==null?void 0:v.name)||""},notes:{bill_id:it,patient_id:t},theme:{color:"#3399cc"},modal:{ondismiss:function(){q("Payment cancelled."),ae(!1)}}};if(window.Razorpay)new window.Razorpay(yi).open();else throw new Error("Razorpay SDK not loaded.")}catch(Nt){q(`Failed to initiate online payment: ${Nt.message}`),ae(!1)}},qn=async()=>{if(!e){q("Bill ID is missing.");return}const it=ie?qi:parseFloat(re);if(isNaN(it)||it<=0){q("Please enter a valid positive payment amount.");return}Q(!0),q(null);try{if(ie){for(const St of ee)if(St.amount>0){const Nt=await ue(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:St.amount,payment_mode:St.method})});if(!Nt.ok){const It=await Nt.json();throw new Error(It.message||`Failed to record ${St.method} payment`)}}}else{const St={amount_paid:it,payment_mode:ce},Nt=await ue(`/api/bills/${e}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(St)}),It=await Nt.json();if(!Nt.ok)throw new Error(It.message||`Failed to record payment (Status: ${Nt.status})`)}ve(""),ie&&(we([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),ge(!1)),a?a():console.log("Payment recorded.")}catch(St){q(`Failed to record payment: ${St.message}`)}finally{Q(!1)}},qi=ee.reduce((it,St)=>it+St.amount,0),Ll=Math.abs(qi-(vt==="create"?Ct:qi))<.01,Fo=ie?ee.some(it=>it.method==="credit"):vt==="create"?L==="credit":ce==="credit",Fl=async()=>{if(vt==="view_pay")return;if(!t){q("Patient ID is missing for creating a bill.");return}if(N.length===0){q("Cannot finalize an empty bill.");return}if(ie&&Math.abs(qi-Ct)>.01){q(`Split payment total (${qi.toFixed(2)}) must match the bill total (${Ct.toFixed(2)}).`);return}ae(!0),q(null);const it=Ct,St=N.map(({id:It,...vn})=>vn),Nt={patientId:t,queueId:n||null,items:St,amount:it,paymentMode:ie?"split":L==="online"?"online":L,type:o,related_id:l||y||null,status:L==="online"?"pending":ie||L?"paid":"pending",discountPercentage:B,labOrderId:y||null};if(ie&&(Nt.splitPayments=ee.map(It=>({method:It.method,amount:It.amount}))),L==="online"&&!ie)try{const It=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nt)}),vn=await It.json();if(!It.ok)throw new Error(vn.message||"Failed to create pending bill.");oi(vn.id,Math.round(it*100))}catch(It){q(`Failed to create pending bill: ${It.message}`),ae(!1)}else{if(!L&&!ie){q("Payment mode required."),ae(!1);return}setTimeout(()=>window.print(),200);try{const It=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nt)}),vn=await It.json();if(!It.ok)throw new Error(vn.message||"Failed to create bill.");if(Fo&&t){const On=ie?ee.filter(yi=>yi.method==="credit").reduce((yi,ha)=>yi+ha.amount,0):L==="credit"?it:0;if(On>0)try{await ue(`/api/patient-debts/${t}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:On,related_bill_id:vn.id,notes:`Bill #${vn.id} (Credit Part)`})})}catch(yi){console.error("Failed to create debt entry:",yi)}}i&&i(vn.id),ae(!1)}catch(It){q(`Failed to process bill: ${It.message}`),ae(!1)}}},Nd=(K==null?void 0:K.status)??c,$o=vt==="view_pay"&&K&&Nd==="pending";return!t&&!e?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):H||vt==="view_pay"&&le?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):vt==="view_pay"&&!K&&!le&&X?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",X]}):vt==="create"&&!v&&!H&&X?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",X]}):r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:Ke?`${Ke}`:"Bill"}),(mt||Je)&&r.jsxs("div",{className:"clinic-details-print",children:[mt&&r.jsx("span",{className:"small-text clinic-address",children:mt}),Je&&r.jsx("span",{className:"small-text clinic-notes",children:Je})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient"]})," ",(v==null?void 0:v.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Date"]})," ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]}),K&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"# Invoice"})," ",GMe(K.id)]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",v==null?void 0:v.name]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," ID"]})," ",v==null?void 0:v.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Age/Gender"]})," ",(v==null?void 0:v.age)??"N/A"," / ",(v==null?void 0:v.gender)??"N/A"]}),vt==="view_pay"&&K&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Nc,{size:16})," Bill ID"]})," ",K.id]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h2",{children:"Bill Items"}),vt==="create"&&o==="pharmacy"&&!f&&N.some(it=>it.drug_id!=null)&&r.jsxs("button",{onClick:()=>Tt(N),disabled:G,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[r.jsx(xE,{size:14,className:`lucide ${G?"animate-spin":""}`}),G?"Refreshing...":"Refresh"]})]}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"Description"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Total"}),vt==="create"&&!f&&r.jsx("th",{className:"no-print",children:"Action"})]})}),r.jsxs("tbody",{children:[vt==="create"&&N.map((it,St)=>r.jsxs("tr",{children:[r.jsx("td",{children:St+1}),r.jsx("td",{children:it.name}),r.jsx("td",{children:it.quantity}),r.jsxs("td",{children:["",it.price.toFixed(2)]}),r.jsxs("td",{children:["",it.total.toFixed(2)]}),!f&&r.jsx("td",{className:"no-print",children:typeof it.id=="number"&&it.name!=="Consultation Fee"?r.jsxs("button",{onClick:()=>jt(it.id),className:"remove-item-button",title:"Remove",children:[" ",r.jsx(qt,{size:16})," "]}):r.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",r.jsx(IX,{size:14})," "]})})]},it.id)),vt==="view_pay"&&K&&K.items.map((it,St)=>r.jsxs("tr",{children:[r.jsx("td",{children:St+1}),r.jsx("td",{children:it.name}),r.jsx("td",{children:it.quantity}),r.jsxs("td",{children:["",it.price.toFixed(2)]}),r.jsxs("td",{children:["",(it.total??it.price*it.quantity).toFixed(2)]})]},St)),(vt==="create"&&N.length===0||vt==="view_pay"&&(K==null?void 0:K.items.length)===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"20px"},children:"No items added."})})]})]}),vt==="create"&&!f&&r.jsxs("div",{className:"add-item-form no-print",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Item Description"}),r.jsx("input",{type:"text",value:C,onChange:it=>O(it.target.value),placeholder:"Service Name",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"80px"},children:[r.jsx("label",{children:"Qty"}),r.jsx("input",{type:"number",min:"1",value:I,onChange:it=>F(parseInt(it.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{maxWidth:"100px"},children:[r.jsx("label",{children:"Price ()"}),r.jsx("input",{type:"number",value:k,onChange:it=>P(it.target.value),placeholder:"0.00",className:"custom-text-input"})]}),r.jsx("button",{onClick:qe,className:"add-item-button",children:"Add Item"}),o==="consultation"&&r.jsxs("div",{className:"default-fee-section",style:{marginLeft:"auto",display:"flex",alignItems:"flex-end",gap:"5px"},children:[r.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[r.jsx("label",{children:"Default Fee"}),r.jsx("input",{type:"number",value:me,onChange:it=>Ne(it.target.value),style:{width:"80px",padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}})]}),r.jsx("button",{onClick:wn,className:"secondary-button",style:{padding:"10px"},children:r.jsx(Js,{size:16})})]})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Kn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",B,"%)"]}),r.jsxs("span",{children:["- ",br.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",Ct.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"5px",borderTop:"1px dashed #ddd"},children:[r.jsx("div",{style:{fontWeight:600,fontSize:"0.9em",marginBottom:"5px"},children:"Payment Mode:"}),ie?ee.map((it,St)=>it.amount>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:it.method.toUpperCase()}),r.jsxs("span",{children:["",it.amount.toFixed(2)]})]},St)):r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em"},children:[r.jsx("span",{children:L?L.toUpperCase():"CASH"}),r.jsxs("span",{children:["",Ct.toFixed(2)]})]}),vt==="view_pay"&&Ye&&Ye.length>0&&r.jsxs("div",{style:{marginTop:"5px"},children:[r.jsx("div",{style:{fontSize:"0.8em",color:"#666"},children:"Payment History:"}),Ye.map(it=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8em"},children:[r.jsxs("span",{children:[it.payment_mode," (",new Date(it.payment_date).toLocaleDateString(),")"]}),r.jsxs("span",{children:["",it.amount_paid]})]},it.id))]})]}),Fo&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",fontSize:"0.85em",fontWeight:500},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Prev. Debt:"}),r.jsxs("span",{children:["",(_e||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:"Net Payable:"}),r.jsxs("span",{children:["",((_e||0)+(ie?ee.filter(it=>it.method==="credit").reduce((it,St)=>it+St.amount,0):L==="credit"?Ct:0)).toFixed(2)]})]})]})]}),ut&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(ua,{value:ut,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Kn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),vt==="create"&&!f?r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:B,onChange:it=>$(parseFloat(it.target.value)||0),min:"0",max:"100",className:"discount-input-total"}),"%"]}):r.jsxs("span",{children:[B,"%"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Amount"}),r.jsxs("span",{children:["- ",br.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",Ct.toFixed(2)]})]}),vt==="view_pay"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"summary-row",style:{color:"green"},children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",zn.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",style:{color:"red",fontWeight:"bold"},children:[r.jsx("span",{children:"Balance Due"}),r.jsxs("span",{children:["",_n.toFixed(2)]})]})]}),r.jsx("div",{className:"qr-code-container",children:ut?r.jsxs(r.Fragment,{children:[r.jsx(ua,{value:ut,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available."})}),vt==="create"&&r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>ge(!ie),disabled:f||W,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:ie?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:ie?"rgba(79, 172, 254, 0.1)":"transparent",color:ie?"#4facfe":"#666",cursor:f||W?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Mc,{size:14})," Split"]})]}),ie?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",qi.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:ee.map((it,St)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:St+1}),r.jsxs("select",{value:it.method,onChange:Nt=>Le(it.id,"method",Nt.target.value),className:"split-payment-select",disabled:W,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:it.amount||"",onChange:Nt=>Le(it.id,"amount",parseFloat(Nt.target.value)||0),className:"split-payment-input",disabled:W})]}),ee.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>oe(it.id,Ct),className:"split-payment-btn split-payment-btn-fill",title:"Fill",children:"Buy"}),r.jsx("button",{type:"button",onClick:()=>Ge(it.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Wn,{size:12})})]})]},it.id))}),ee.length<5&&r.jsxs("button",{type:"button",onClick:Ue,className:"split-payment-add-btn",disabled:W,children:[r.jsx(ur,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Required:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ct.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ll?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:Ll?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",qi.toFixed(2)]})]})]})]}):r.jsxs("select",{id:"paymentMode",value:L,onChange:it=>V(it.target.value),className:"payment-mode-select",disabled:f||W,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"}),r.jsx("option",{value:"online",children:"Online (Razorpay)"})]})]}),vt==="create"&&L==="credit"&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),ze?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:_e&&_e>0?"#dc3545":"#28a745"},children:["",(_e||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"This Bill:"}),r.jsxs("strong",{children:["+ ",Ct.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((_e||0)+Ct).toFixed(2)]})]})]})]}),vt==="create"&&!f&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:Fl,className:"primary-button",disabled:W||N.length===0,children:W?"Processing...":"Finalise and Bill"})}),vt==="view_pay"&&r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:()=>window.print(),className:"secondary-button",children:"Print Bill"}),$o&&_n>0&&r.jsxs("div",{className:"payment-recording-section",style:{marginTop:"20px",borderTop:"1px dashed #ccc",paddingTop:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("h3",{style:{fontSize:"1em",marginBottom:"0"},children:"Record Payment"}),r.jsxs("button",{type:"button",onClick:()=>ge(!ie),disabled:se,style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",fontSize:"0.75rem",border:ie?"1px solid #4facfe":"1px solid #ccc",borderRadius:"4px",backgroundColor:ie?"rgba(79, 172, 254, 0.1)":"transparent",color:ie?"#4facfe":"#666",cursor:se?"not-allowed":"pointer"},children:[r.jsx(Mc,{size:12})," Split"]})]}),ie?r.jsxs("div",{className:"split-payment-wrapper",style:{marginBottom:"10px",fontSize:"0.9em"},children:[r.jsx("div",{className:"split-payment-list",children:ee.map(it=>r.jsxs("div",{className:"split-payment-row",children:[r.jsxs("select",{value:it.method,onChange:St=>Le(it.id,"method",St.target.value),className:"split-payment-select",disabled:se,style:{padding:"4px"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Ins."}),r.jsx("option",{value:"credit",children:"Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",style:{left:"5px",fontSize:"0.8em"},children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:it.amount||"",onChange:St=>Le(it.id,"amount",parseFloat(St.target.value)||0),className:"split-payment-input",style:{paddingLeft:"15px"},disabled:se})]}),ee.length>2&&r.jsx("button",{type:"button",onClick:()=>Ge(it.id),className:"split-payment-btn split-payment-btn-remove",children:r.jsx(Wn,{size:12})})]},it.id))}),ee.length<5&&r.jsxs("button",{type:"button",onClick:Ue,className:"split-payment-add-btn",disabled:se,style:{fontSize:"0.8em",padding:"4px"},children:[r.jsx(ur,{size:12})," Add"]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85em",marginTop:"5px",color:"#666"},children:[r.jsxs("span",{children:["Paying: ",r.jsxs("strong",{children:["",qi.toFixed(2)]})]}),r.jsxs("span",{style:{color:qi>_n?"red":"inherit"},children:["Max: ",_n.toFixed(2)]})]})]}):r.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[r.jsx("input",{type:"number",value:re,onChange:it=>ve(it.target.value),placeholder:`Max ${_n.toFixed(2)}`,className:"custom-text-input",style:{flex:1}}),r.jsxs("select",{value:ce,onChange:it=>fe(it.target.value),className:"custom-select-input",style:{width:"auto"},children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),r.jsx("button",{onClick:qn,disabled:se||ie&&qi<=0||!ie&&(!re||parseFloat(re)<=0),className:"primary-button",style:{width:"100%",fontSize:"0.9em"},children:se?"Recording...":"Record Payment"})]})]})]})})]}),r.jsxs("div",{className:"amount-in-words-print print-only",children:[r.jsx("strong",{children:"Amount in Words:"})," ",HMe(vt==="view_pay"&&K?K.amount:Ct)]}),r.jsxs("div",{className:"terms-conditions-print print-only",children:[r.jsx("h4",{children:"Terms & Conditions"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Goods once sold will not be taken back or exchanged."}),r.jsx("li",{children:"All disputes are subject to local jurisdiction."}),r.jsx("li",{children:"Please retain this bill for future reference."})]})]}),r.jsxs("div",{className:"signature-section-print print-only",children:[r.jsx("div",{className:"receiver-sign",children:r.jsx("div",{className:"sign-line",children:"Receiver's Signature"})}),r.jsxs("div",{className:"authorized-sign",children:[r.jsxs("div",{className:"for-clinic",children:["For ",Ke||"Clinic"]}),r.jsx("div",{className:"sign-line",children:"Authorised Signatory"})]})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{className:"thank-you",children:"Thank you for your visit!"}),r.jsx("p",{className:"computer-generated",children:"This is a computer generated invoice and does not require a physical signature."})]})]})]})},YMe=()=>{const t=Mt(),e=Vr(),{patientId:n,queueId:i,patientName:a,initialItems:s,billType:o,relatedId:l,initialStatus:c,initialDiscountPercentage:d,doctorId:f,billId:p,labOrderId:y}=e.state||{},[x,v]=b.useState(null),[S,N]=b.useState(null),[_,T]=b.useState(null),[C,O]=b.useState(null),[k,P]=b.useState(null),[I,F]=b.useState(null),[B,$]=b.useState(null),[L,V]=b.useState(null),[H,te]=b.useState(!0),[X,q]=b.useState(null),[W,ae]=b.useState(a||"");b.useEffect(()=>{if(!n){console.error("BillingPage loaded without required patientId in location state."),t("/");return}(async()=>{te(!0),q(null);try{let Oe=n,Ye=s||null,Me=c||null,Ie=o||null,be=l||null,re=d!==void 0?parseFloat(d):null,ve=a||null,ce=null;if(p){console.log(`Fetching details for Bill ID: ${p}`);const fe=await ue(`/api/bills/${p}`);if(!fe.ok){const Q=await fe.json().catch(()=>({message:`Failed to fetch bill details for ID ${p}`}));throw new Error(Q.message||`Failed to fetch bill details (Status: ${fe.status})`)}const se=await fe.json();if(console.log("Fetched Bill Data:",se),Ye=se.bill.items||[],Me=se.bill.status||"pending",Ie=se.bill.type||null,be=se.bill.related_id||null,re=se.bill.discount_percentage!==void 0&&se.bill.discount_percentage!==null?parseFloat(se.bill.discount_percentage):0,Oe=se.bill.patient_id,O(Ye),P(Me),F(Ie),$(be),V(re),Oe){const Q=await ue(`/api/patients/${Oe}`);if(Q.ok){const ie=await Q.json();ve=ie.name,ce=ie.phone??null,T(ie.insurance_type??null),ae(ve),N(ce)}else console.warn(`Could not fetch patient details for ID ${Oe} from bill.`),ae("Patient (Not Found)")}else console.warn(`Bill ${p} does not have an associated patient_id.`),ae("Patient (Unknown)")}else if(y){console.log(`Fetching details for Lab Order ID: ${y}`);const fe=await ue(`/api/lab/${y}`);if(!fe.ok){let Q=`Failed to fetch lab order details (Status: ${fe.status} ${fe.statusText})`;try{Q=(await fe.json()).message||Q}catch{console.error("Response was not valid JSON:",await fe.text())}throw new Error(Q)}const se=await fe.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(se,null,2)),Ye=(se.tests||[]).filter(Q=>Q&&typeof Q.name=="string"&&Q.price!==void 0&&Q.id!==void 0).map(Q=>{const ie=parseFloat(Q.price||"0"),ge=!isNaN(ie)&&isFinite(ie)?ie:0;return{item_id:Q.id,name:Q.name,price:ge,quantity:1,total:ge*1,type:"lab_test"}}),Ye&&Ye.length===0&&(se.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",se.tests),q(Q=>`${Q?Q+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),Me="pending",Ie="lab",be=y,Oe=se.patient_id,O(Ye),P(Me),F(Ie),$(be),Oe){const Q=await ue(`/api/patients/${Oe}`);if(Q.ok){const ie=await Q.json();ve=ie.name,ce=ie.phone??null,T(ie.insurance_type??null),ae(ve),N(ce)}else console.warn(`Could not fetch patient details for ID ${Oe} from lab order.`),ae("Patient (Not Found)")}else console.warn(`Lab Order ${y} does not have an associated patient_id.`),ae("Patient (Unknown)")}else if(O(s||null),P(c||null),F(o||null),$(l||null),V(d!==void 0?parseFloat(d):null),ae(a||`ID ${n}`),Oe){const fe=await ue(`/api/patients/${Oe}`);if(fe.ok){const se=await fe.json();N(se.phone??null),T(se.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${Oe}.`)}if(i){const fe=await ue(`/api/queue/${i}`);if(fe.ok){const se=await fe.json();v(se.token_number)}else console.warn(`Could not fetch queue details for ID ${i}.`)}}catch(Oe){console.error("Error fetching billing page details:",Oe),q(`Failed to load details: ${Oe.message}`),O(null),P(null),F(null),$(null),ae(a||""),N(null),v(null)}finally{te(!1)}})()},[n,p,y,i,t]);const G=K=>{console.log(`Billing process completed for patient ID ${n}. New Bill ID: ${K}`),t(-1)},z=()=>{console.log(`Bill updated for patient ID ${n}.`),t(-1)};if(!n)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(TI,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),r.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(H)return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx(Z,{width:80,height:32})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsx(Z,{width:300,height:32})}),r.jsxs("div",{className:"patient-info-bar mb-6",style:{display:"flex",gap:"1rem",padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:120,height:20}),r.jsx(Z,{width:140,height:20})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 space-y-4",children:[r.jsx(Z,{width:"100%",height:200,className:"rounded-lg"}),r.jsx(Z,{width:"100%",height:150,className:"rounded-lg"})]}),r.jsx("div",{className:"space-y-4",children:r.jsx(Z,{width:"100%",height:300,className:"rounded-lg"})})]})]})]});if(X)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(TI,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),r.jsx("p",{className:"text-sm text-center mb-4",children:X}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>t(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const je=(k??c)==="paid";return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(nn,{size:20,className:"lucide"})})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsxs("h3",{className:"billing-page-title",children:[p?"Bill Details":y?"Create Lab Bill":"Create Bill"," for Patient: ",W||`ID ${n}`]}),r.jsxs("div",{className:"patient-info-bar",children:[x!==null&&r.jsxs("span",{children:[r.jsx(Ma,{size:14,className:"lucide"})," Token: ",x]}),S&&r.jsxs("span",{children:[r.jsx(Jm,{size:14,className:"lucide"})," Phone: ",S]}),y&&r.jsxs("span",{className:"lab-order-info",children:[r.jsx(rs,{size:14,className:"lucide"})," Lab Order: ",y.substring(0,8),"..."]}),!S&&x===null&&!y&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),_&&r.jsxs("span",{className:"insurance-info",children:[r.jsx(_J,{size:14,className:"lucide"})," Insurance: ",_.replace(/_/g," ").replace(/\b\w/g,K=>K.toUpperCase())]}),!S&&x===null&&!y&&!_&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),r.jsx(WMe,{patientId:n,labOrderId:y,queueId:i,onBillCreated:G,onBillUpdated:z,initialItems:C??s,billType:I??o,relatedId:B??l,initialStatus:k??c,initialDiscountPercentage:L??d,readOnlyMode:je,doctorId:f,patientInsuranceType:_??void 0})]})]})},KMe=()=>{const{patientId:t}=Oi(),e=Mt(),[n,i]=b.useState([]),[a,s]=b.useState(!1),[o,l]=b.useState(null),[c,d]=b.useState("");return b.useEffect(()=>{(async()=>{if(!t){l("Patient ID not provided in URL.");return}s(!0),l(null),i([]);try{try{const x=await ue(`/api/patients/${t}`);if(x.ok){const v=await x.json();d(v.name)}}catch(x){console.warn("Could not fetch patient name:",x)}console.log(`Fetching pharmacy orders for patient ID: ${t}`);const p=await ue(`/api/pharmacy-orders/patient/${t}`);if(!p.ok){const x=await p.json().catch(()=>({}));throw new Error(x.message||`HTTP error! status: ${p.status}`)}const y=await p.json();console.log("Fetched Pharmacy Orders:",y),i(y||[])}catch(p){console.error("Error fetching pharmacy orders:",p),l(`Failed to load pharmacy orders: ${p.message}`)}finally{s(!1)}})()},[t]),r.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(nn,{size:16,className:"mr-1"}),"Back"]}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[r.jsx(yf,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",c&&`for ${c}`]}),r.jsx("div",{})," "]}),a&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:100,height:20})]}),r.jsx(Z,{width:200,height:20,className:"mb-2"}),r.jsx(Z,{width:180,height:20,className:"mb-3"}),r.jsx(Z,{width:120,height:24,className:"mb-2"}),r.jsxs("div",{className:"space-y-1 ml-4",children:[r.jsx(Z,{width:"80%",height:16}),r.jsx(Z,{width:"70%",height:16}),r.jsx(Z,{width:"60%",height:16})]})]},f))}),o&&r.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:o}),!a&&n.length===0&&!o&&r.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!a&&n.length>0&&r.jsx("div",{className:"space-y-4",children:n.map(f=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Date:"})," ",new Date(f.date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm font-medium capitalize",children:[r.jsx("strong",{children:"Status:"})," ",f.status]})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Prescribed By:"})," ",f.prescribedBy||"N/A"]}),f.dispensedBy&&r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Dispensed By:"})," ",f.dispensedBy]}),r.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),r.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:f.medications.map((p,y)=>r.jsxs("li",{children:[p.name," - Qty: ",p.quantity,p.tabletsPerDay&&` (${p.tabletsPerDay} per day`,p.numberOfDays&&` for ${p.numberOfDays} days)`,!p.tabletsPerDay&&p.numberOfDays&&` (for ${p.numberOfDays} days)`,p.tabletsPerDay&&!p.numberOfDays&&")"]},y))})]},f.id))})]})},QMe=()=>{const t=Mt(),e=Vr(),[n,i]=b.useState(null),[a,s]=b.useState([]),[o,l]=b.useState([]),[c,d]=b.useState(""),[f,p]=b.useState([]),[y,x]=b.useState(null),[v,S]=b.useState(!1),[N,_]=b.useState(null),[T,C]=b.useState(!0),[O,k]=b.useState(""),[P,I]=b.useState([]),[F,B]=b.useState(!1),[$,L]=b.useState(null),[V,H]=b.useState(!1),[te,X]=b.useState(!1),[q,W]=b.useState([]),[ae,G]=b.useState(!1),[z,le]=b.useState(null),je=/^\+?[0-9\s\-().]{7,20}$/,K=/^[a-zA-Z\s'-]{2,}$/,Oe=b.useCallback(async()=>{try{const oe=await ue("/api/drugs");if(!oe.ok)throw new Error("Failed to fetch drugs");const _e=await oe.json(),$e=_e.drugs||_e||[];s($e)}catch(oe){console.error("Failed to fetch available drugs:",oe),x("Could not load drug list. "+oe.message)}},[]),Ye=b.useCallback(async oe=>{G(!0),le(null);try{const _e=await ue(`/api/pharmacy-orders/patient/${oe}`);if(!_e.ok){const ze=await _e.json().catch(()=>({}));throw new Error(ze.message||`HTTP error! status: ${_e.status}`)}const $e=await _e.json();W($e||[])}catch(_e){console.error("Failed to fetch previous pharmacy orders:",_e),le(`Could not load previous orders: ${_e.message}`)}finally{G(!1)}},[]);b.useEffect(()=>{var oe;Oe(),(oe=e.state)!=null&&oe.patient?re(e.state.patient):C(!0)},[Oe,e.state]),b.useEffect(()=>{n!=null&&n.id?Ye(n.id):W([])},[n,Ye]);const Me=b.useMemo(()=>new eo(a,{keys:["name","brand_name"],threshold:.3}),[a]);b.useEffect(()=>{if(!c){p([]);return}const oe=Me.search(c).map(_e=>_e.item);p(oe.slice(0,10))},[c,Me]);const Ie=b.useMemo(()=>ud(async oe=>{if(oe.trim().length<2){I([]),B(!1),L(null);return}B(!0),L(null);try{const _e=new URLSearchParams({search:encodeURIComponent(oe),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),$e=await ue(`/api/patients?${_e.toString()}`);if(!$e.ok){const Y=await $e.text();throw new Error(`API Error (${$e.status}): ${Y||$e.statusText}`)}const ze=await $e.json();I(ze.patients)}catch(_e){console.error("Error searching patients:",_e),L(_e.message||"Failed to search patients."),I([])}finally{B(!1)}},300),[je]),be=oe=>{const _e=oe.target.value;k(_e),H(je.test(_e)),X(K.test(_e)&&!je.test(_e)),B(!0),Ie(_e)},re=b.useCallback(oe=>{i(oe),C(!1),k(""),I([]),L(null)},[]),ve=b.useCallback(async oe=>{if(!O||oe==="phone"&&!V||oe==="name"&&!te){L(`Invalid ${oe} to create a new patient.`);return}B(!0),L(null);try{const $e=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:oe==="name"?O:"direct pharmacy",phone:oe==="phone"?O:null,age:null,gender:null,token:null})});if(!$e.ok){const Y=await $e.json();throw new Error(Y.message||`Failed to create patient: ${$e.statusText}`)}const ze=await $e.json();alert(`New patient "${ze.name}" created with ${oe==="phone"?`phone ${ze.phone}`:`name ${ze.name}`}.`),re(ze)}catch(_e){console.error("Error creating new patient:",_e),L(_e.message||"Failed to create new patient.")}finally{B(!1)}},[O,V,te,re]),ce=()=>{i(null),C(!0),l([]),x(null),W([])},fe=oe=>{if(o.some(_e=>_e.drug_id===oe.id)){const _e=oe.name||oe.brand_name||"This drug";x(`${_e} is already in the order.`),setTimeout(()=>x(null),3e3),d(""),p([]);return}l(_e=>[..._e,{drug_id:oe.id,name:oe.name||oe.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,tabletsPerDay:1,numberOfDays:1,mrp:Number(oe.mrp)||0,originalMrp:Number(oe.mrp)||0,stock:oe.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(oe.mrp)||0)/(Q(oe.pack)||1),pack:oe.pack}]),d(""),p([])},se=()=>{const oe=c.trim();if(!oe){x("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>x(null),3e3);return}t("/dashboard/inventory/add",{state:{initialDrugName:oe}}),d(""),p([])},Q=oe=>{if(!oe)return null;const _e=oe.match(/(?:\d+x)?(\d+)/);return _e?parseInt(_e[1],10):null},ie=oe=>{l(_e=>_e.filter($e=>($e.drug_id??$e.name)!==oe))},ge=(oe,_e)=>{l($e=>$e.map(ze=>{if((ze.drug_id??ze.name)===oe&&ze.isLoose){const ye=Q(ze.pack),pe=Math.max(0,_e),me=pe*(ye??1)+(ze.looseUnits??0);return{...ze,loosePacks:pe,looseQuantity:me,pack_quantity:pe}}return ze}))},ee=(oe,_e)=>{l($e=>$e.map(ze=>{if((ze.drug_id??ze.name)===oe&&ze.isLoose){const ye=Q(ze.pack),pe=Math.max(0,_e),me=(ze.loosePacks??0)*(ye??1)+pe;return{...ze,looseUnits:pe,looseQuantity:me}}return ze}))},we=oe=>{const _e=[];oe.medications.forEach($e=>{if(o.find(Y=>Y.drug_id&&$e.drug_id&&Y.drug_id===$e.drug_id||Y.name.toLowerCase()===$e.name.toLowerCase()))l(Y=>Y.map(ye=>{if(ye.drug_id&&$e.drug_id&&ye.drug_id===$e.drug_id||ye.name.toLowerCase()===$e.name.toLowerCase()){const pe=(ye.pack_quantity??0)+($e.pack_quantity??0),me=(ye.loose_quantity??0)+($e.loose_quantity??0),Ne=$e.tabletsPerDay??ye.tabletsPerDay,Be=$e.numberOfDays??ye.numberOfDays,Ee=Q(ye.pack),Ke=pe*(Ee??1)+me;return{...ye,pack_quantity:pe,loose_quantity:me,directions_to_use:$e.directions_to_use??ye.directions_to_use,tabletsPerDay:Ne,numberOfDays:Be,looseQuantity:Ke,loosePacks:Math.floor(Ke/(Ee??1)),looseUnits:Ke%(Ee??1)}}return ye}));else{let Y=$e.drug_id,ye=$e.drug_id?a.find(pe=>pe.id===$e.drug_id):void 0;if(!Y&&$e.name){const pe=a.find(me=>me.name&&me.name.toLowerCase()===$e.name.toLowerCase());pe&&(Y=pe.id,ye=pe)}_e.push({drug_id:Y,name:$e.name,pack_quantity:$e.pack_quantity??0,loose_quantity:$e.loose_quantity??0,directions_to_use:$e.directions_to_use,tabletsPerDay:$e.tabletsPerDay??1,numberOfDays:$e.numberOfDays??1,mrp:ye?ye.mrp:$e.pack_price,originalMrp:ye?ye.mrp:$e.pack_price,stock:ye?ye.stock:$e.stock,isLoose:!0,loosePacks:0,looseUnits:($e.pack_quantity??0)*(Q((ye==null?void 0:ye.pack)||$e.pack)??1)+($e.loose_quantity??0),looseQuantity:($e.pack_quantity??0)*(Q((ye==null?void 0:ye.pack)||$e.pack)??1)+($e.loose_quantity??0),pricePerLooseUnit:(ye?Number(ye.mrp):Number($e.pack_price)||0)/(Q((ye==null?void 0:ye.pack)||$e.pack)||1),pack:(ye==null?void 0:ye.pack)||$e.pack})}}),l($e=>[...$e,..._e]),oe.prescriptionForUnavailableDrugs&&(!N||!N.includes(oe.prescriptionForUnavailableDrugs))&&_($e=>$e?`${$e}

-- From Order ${oe.id.substring(0,8)} --
${oe.prescriptionForUnavailableDrugs}`:oe.prescriptionForUnavailableDrugs),x("Medications from previous order added to current order."),setTimeout(()=>x(null),3e3)},Ue=async oe=>{if(oe.preventDefault(),x(null),S(!0),!n){x("No patient selected for the order."),S(!1);return}if(o.length===0&&!(N!=null&&N.trim())){x("Please add at least one medication or provide a prescription for unavailable drugs."),S(!1);return}const _e=o.filter(ze=>{const Y=ze.looseQuantity??0;return Y<=0||ze.stock!==void 0&&Y>ze.stock});if(_e.length>0){x(`Invalid quantity or insufficient stock for: ${_e.map(ze=>ze.name).join(", ")}`),S(!1);return}const $e={patient_id:n.id,items:o.map(ze=>{const Y=ze.mrp??0,ye=ze.pricePerLooseUnit??0,pe=ye*(ze.looseQuantity??0);return{drug_id:ze.drug_id===void 0?null:ze.drug_id,name:ze.name,pack_quantity:ze.loosePacks??0,loose_quantity:ze.looseUnits??0,pack_price:Y,loose_price:ye,total_price:pe,price:ze.originalMrp??0,directions_to_use:ze.directions_to_use===void 0?null:ze.directions_to_use,tabletsPerDay:ze.tabletsPerDay??1,numberOfDays:ze.numberOfDays??1}}),order_total:Ge,prescription_for_unavailable_drugs:N};try{const ze=await ue("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($e)});if(!ze.ok){const Y=await ze.json();throw new Error(Y.message||`Failed to create order: ${ze.statusText}`)}t(-1)}catch(ze){console.error("Failed to create pharmacy order:",ze),x(ze.message||"Failed to create order. Please try again.")}finally{S(!1)}},Ge=b.useMemo(()=>o.reduce((oe,_e)=>{const $e=_e.isLoose?_e.pricePerLooseUnit??0:_e.mrp??0,ze=_e.isLoose?_e.looseQuantity??0:_e.quantity??0;return oe+$e*ze},0),[o]),Le=(Number(Ge)||0).toFixed(2);return r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",r.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[r.jsx(nn,{size:20})," "]}),r.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),T&&r.jsxs("div",{className:"content-section",children:[" ",r.jsx("h3",{className:"section-title",children:"Select Patient"})," ",r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:O,onChange:be,className:"custom-text-input mt-1",autoFocus:!0})]}),$&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:$})," ",F?r.jsx("div",{className:"patient-search-results items-loading mt-1",children:[1,2,3].map(oe=>r.jsx("div",{className:"px-4 py-3 border-b border-gray-100 last:border-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(Z,{width:40,height:20}),r.jsx(Z,{width:120,height:20})]}),r.jsx("div",{className:"mt-1 sm:mt-0",children:r.jsx(Z,{width:150,height:16})})]})},oe))}):P.length>0&&r.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",r.jsxs("ul",{children:[" ",P.map(oe=>r.jsxs("li",{onClick:()=>re({id:oe.id,name:oe.name,token:oe.token,age:oe.age,gender:oe.gender,phone:oe.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",oe.token]}),oe.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[oe.age?`${oe.age} yrs`:"Age N/A",oe.gender?` / ${oe.gender}`:" / Gender N/A",oe.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",oe.phone]})]})]}),oe.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",oe.phone]})]},oe.id))]})]}),O.length>=2&&!F&&P.length===0&&!$&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',O,'".']}),V&&r.jsx("button",{type:"button",onClick:()=>ve("phone"),className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:F,children:'Create "direct pharmacy" Patient with this Phone'}),te&&r.jsx("button",{type:"button",onClick:()=>ve("name"),className:"create-patient-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-2",disabled:F,children:"Create Patient with this Name"})]}),O.length<2&&!F&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),n&&!T&&r.jsxs("form",{onSubmit:Ue,children:[r.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:"section-title",children:[" ","Patient: ",r.jsx("span",{className:"font-normal",children:n.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:n.token??"N/A"}),n.age&&`    Age: ${n.age}`,n.gender&&`    Gender: ${n.gender}`,n.phone&&`    Phone: ${n.phone}`]}),r.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${n.id}`,children:["ID: ",n.id.substring(0,12),"..."]})]}),r.jsx("button",{type:"button",onClick:ce,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),y&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:y})," ",ae?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:[1,2].map(oe=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx(Z,{width:"90%",height:16}),r.jsx(Z,{width:"70%",height:16})]}),r.jsx(Z,{width:"100%",height:36,style:{borderRadius:"6px"}})]},oe))})]}):z?r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:z}):q.length>0?r.jsxs("div",{className:"content-section mt-4",children:[r.jsx("h3",{className:"section-title",children:"Previous Orders"}),r.jsx("div",{className:"space-y-4",children:q.map(oe=>r.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"font-semibold text-gray-800",children:["Order Date: ",new Date(oe.date).toLocaleDateString()]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${oe.status==="dispensed"?"bg-green-100 text-green-800":oe.status==="pending"?"bg-yellow-100 text-yellow-800":oe.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:oe.status.charAt(0).toUpperCase()+oe.status.slice(1)})]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-3",children:oe.medications.map((_e,$e)=>r.jsxs("li",{children:[r.jsx("strong",{children:_e.name}),": ",_e.quantity," Qty",_e.directions_to_use&&` - Directions: ${_e.directions_to_use}`]},$e))}),oe.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[r.jsx("span",{className:"font-semibold",children:"Prescription for Unavailable:"}),r.jsxs("div",{className:"prose prose-sm max-w-none",children:[" ",r.jsx(vf,{remarkPlugins:[bf],children:oe.prescriptionForUnavailableDrugs})]})]}),r.jsxs("button",{type:"button",onClick:()=>we(oe),className:"add-previous-meds-button mt-3 px-3 py-1.5 text-sm font-medium rounded-md flex items-center justify-center",children:[r.jsx(ur,{size:16,className:"mr-1"})," Add Medications to Current Order"]})]},oe.id))})]}):n&&r.jsx("div",{className:"content-section text-center py-4 mt-4",children:r.jsx("p",{className:"text-gray-500",children:"No previous orders found for this patient."})}),r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:N??"",onChange:oe=>_(oe.target.value||null),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[" ",r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:c,onChange:oe=>d(oe.target.value),className:"custom-text-input mt-1"}),c&&r.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",f.length>0&&r.jsxs("ul",{children:[" ",f.map(oe=>r.jsxs("li",{onClick:()=>fe(oe),className:"cursor-pointer select-none relative",children:[r.jsx("span",{className:"font-medium block truncate",children:oe.name||oe.brand_name}),r.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",oe.stock??"N/A",", MRP: ",Number(oe.mrp||0).toFixed(2),")"]})]},oe.id))]}),c.trim()&&!a.some(oe=>oe.name&&oe.name.toLowerCase()===c.trim().toLowerCase()||oe.brand_name&&oe.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsxs("div",{onClick:se,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',c.trim(),'" as new item']}),c.trim()&&f.length===0&&a.some(oe=>oe.name&&oe.name.toLowerCase()===c.trim().toLowerCase()||oe.brand_name&&oe.brand_name.toLowerCase()===c.trim().toLowerCase())&&r.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",r.jsx("h4",{className:"section-title",children:"Order Items"})," ",o.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),o.length>0&&r.jsx("ul",{className:"space-y-4",children:o.map(oe=>{const _e=oe.drug_id??oe.name,$e=!oe.drug_id;return r.jsxs("li",{className:"order-item-card text-sm",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsxs("span",{className:`item-name block text-base ${$e?"custom":""}`,children:[" ",oe.name,$e?" (custom)":""]}),!$e&&oe.pricePerLooseUnit!==void 0&&r.jsxs("span",{className:"item-details text-xs",children:[" ","@ ",(Number(oe.pricePerLooseUnit)||0).toFixed(2)," per loose unit"]}),oe.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${oe.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",oe.stock,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-packs-${_e}`,className:"dosage-label",children:"Packs:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>ge(_e,(oe.loosePacks??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-packs-${_e}`,min:"0",value:oe.loosePacks||"",onChange:ze=>{const Y=parseInt(ze.target.value,10);ge(_e,isNaN(Y)?0:Y)},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>ge(_e,(oe.loosePacks??0)+1),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`loose-units-${_e}`,className:"dosage-label",children:"Loose:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>ee(_e,(oe.looseUnits??0)-1),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`loose-units-${_e}`,min:"0",value:oe.looseUnits||"",onChange:ze=>{const Y=parseInt(ze.target.value,10);ee(_e,isNaN(Y)?0:Y)},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>ee(_e,(oe.looseUnits??0)+1),className:"quantity-btn",children:"+"})]}),oe.pack&&r.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",oe.pack.split("x")[1]||oe.pack," per pack)"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","",(Number((oe.pricePerLooseUnit??0)*(oe.looseQuantity??0))||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ie(_e),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:r.jsx(Wn,{size:18})})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2 mt-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`tablets-per-day-${_e}`,className:"dosage-label",children:"Per Day:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(ze=>ze.map(Y=>Y.drug_id===_e?{...Y,tabletsPerDay:Math.max(1,(Y.tabletsPerDay??1)-1)}:Y)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`tablets-per-day-${_e}`,min:"1",value:oe.tabletsPerDay??1,onChange:ze=>{const Y=parseInt(ze.target.value,10);l(ye=>ye.map(pe=>pe.drug_id===_e?{...pe,tabletsPerDay:isNaN(Y)?1:Math.max(1,Y)}:pe))},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(ze=>ze.map(Y=>Y.drug_id===_e?{...Y,tabletsPerDay:(Y.tabletsPerDay??1)+1}:Y)),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("label",{htmlFor:`number-of-days-${_e}`,className:"dosage-label",children:"No. Days:"}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("button",{type:"button",onClick:()=>l(ze=>ze.map(Y=>Y.drug_id===_e?{...Y,numberOfDays:Math.max(1,(Y.numberOfDays??1)-1)}:Y)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",id:`number-of-days-${_e}`,min:"1",value:oe.numberOfDays??1,onChange:ze=>{const Y=parseInt(ze.target.value,10);l(ye=>ye.map(pe=>pe.drug_id===_e?{...pe,numberOfDays:isNaN(Y)?1:Math.max(1,Y)}:pe))},onFocus:ze=>ze.target.select(),className:"dosage-input text-sm text-right"}),r.jsx("button",{type:"button",onClick:()=>l(ze=>ze.map(Y=>Y.drug_id===_e?{...Y,numberOfDays:(Y.numberOfDays??1)+1}:Y)),className:"quantity-btn",children:"+"})]})]})]}),r.jsx("div",{className:"flex items-center mt-2",children:oe.pack&&Q(oe.pack)&&r.jsx("span",{className:"ml-4 text-sm text-gray-400",children:(()=>{const ze=Q(oe.pack),Y=oe.looseQuantity??0;if(ze&&ze>0){const ye=Math.floor(Y/ze),pe=Y%ze;return`(Subtract: ${ye} packs, ${pe} loose)`}return""})()})}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${_e}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${_e}`,placeholder:"e.g., 'After food', 'Twice a day'",value:oe.directions_to_use??"",onChange:ze=>{const Y=ze.target.value;l(ye=>ye.map(pe=>(pe.drug_id??pe.name)===_e?{...pe,directions_to_use:Y}:pe))},className:"dosage-input text-sm w-full mt-1"})]})]},_e)})})]}),o.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ",Le]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:v||o.length===0&&!(N!=null&&N.trim()),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${v||o.length===0&&!(N!=null&&N.trim())?"":"hover:opacity-90"}`,children:v?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},gG=()=>{const{orderId:t}=Oi(),e=Mt(),[n,i]=b.useState(null),[a,s]=b.useState(null),[o,l]=b.useState([]),[c,d]=b.useState([]),[f,p]=b.useState(""),[y,x]=b.useState([]),[v,S]=b.useState(null),[N,_]=b.useState(!1),[T,C]=b.useState(null),[O,k]=b.useState(!0);Gc();const P=b.useCallback(async()=>{k(!0);try{const q=await ue(`/api/pharmacy-orders/${t}`);if(!q.ok)throw new Error("Failed to fetch order details");const W=await q.json();i(W),s({id:W.patientId,name:W.patientName||"N/A",token:W.patientTokenNumber}),C(W.prescriptionForUnavailableDrugs);const ae=W.medications.map(G=>{const z=B(G.pack),le=G.pack_quantity*(z??1)+G.loose_quantity;return{...G,isLoose:!0,loosePacks:G.pack_quantity,looseUnits:G.loose_quantity,looseQuantity:le,pack_price:G.pack_price,loose_price:G.loose_price,total_price:G.total_price,pricePerLooseUnit:G.loose_price,originalPrice:G.pack_price,box_number:G.box_number,pack:G.pack,batch:G.batch,expiry_date:G.expiry_date,discount_percentage:G.discount_percentage}});d(ae)}catch(q){S("Could not load order details. "+q.message)}finally{k(!1)}},[t]),I=b.useCallback(async()=>{try{const q=await ue("/api/drugs");if(!q.ok)throw new Error("Failed to fetch drugs");const W=await q.json(),ae=W.drugs||W||[];l(ae)}catch(q){S("Could not load drug list. "+q.message)}},[]);b.useEffect(()=>{P(),I()},[P,I]);const F=b.useMemo(()=>new eo(o,{keys:["name","brand_name"],threshold:.3}),[o]);b.useEffect(()=>{if(!f){x([]);return}const q=F.search(f).map(W=>W.item);x(q.slice(0,10))},[f,F]);const B=q=>{if(!q)return null;const W=q.match(/(?:\d+x)?(\d+)/);return W?parseInt(W[1],10):null},$=q=>{if(c.some(W=>W.drug_id===q.id)){S(`${q.name||q.brand_name} is already in the order.`),setTimeout(()=>S(null),3e3),p(""),x([]);return}d(W=>[...W,{drug_id:q.id,name:q.name||q.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,pack_price:Number(q.mrp)||0,loose_price:(Number(q.mrp)||0)/(B(q.pack)||1),total_price:(Number(q.mrp)||0)/(B(q.pack)||1),discount_percentage:0,directions_to_use:"",tabletsPerDay:1,numberOfDays:1,stock:q.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(q.mrp)||0)/(B(q.pack)||1),originalPrice:Number(q.mrp)||0,pack:q.pack}]),p(""),x([])},L=q=>{d(W=>W.filter(ae=>(ae.drug_id??ae.name)!==q))},V=(q,W)=>{d(ae=>ae.map(G=>{if((G.drug_id??G.name)===q&&G.isLoose){const z=B(G.pack),le=Math.max(0,W),je=le*(z??1)+(G.looseUnits??0);return{...G,loosePacks:le,looseQuantity:je,pack_quantity:le}}return G}))},H=(q,W)=>{d(ae=>ae.map(G=>{if((G.drug_id??G.name)===q&&G.isLoose){const z=B(G.pack),le=Math.max(0,W),je=(G.loosePacks??0)*(z??1)+le;return{...G,looseUnits:le,looseQuantity:je,loose_quantity:le}}return G}))},te=async q=>{if(q.preventDefault(),S(null),_(!0),c.length===0&&!(T!=null&&T.trim())){S("Please add at least one medication or provide a prescription."),_(!1);return}const W=c.filter(G=>{const z=G.looseQuantity??0;return z<=0||G.stock!==void 0&&z>G.stock});if(W.length>0){S(`Invalid quantity or insufficient stock for: ${W.map(G=>G.name).join(", ")}`),_(!1);return}const ae={items:c.map(G=>({drug_id:G.drug_id??null,name:G.name,pack_quantity:G.loosePacks??0,loose_quantity:G.looseUnits??0,pack_price:G.pack_price??0,loose_price:G.loose_price??0,total_price:(G.loose_price??0)*(G.looseQuantity??0),discount_percentage:G.discount_percentage??0,directions_to_use:G.directions_to_use??null,tabletsPerDay:G.tabletsPerDay??1,numberOfDays:G.numberOfDays??1})),prescription_for_unavailable_drugs:T,order_total:X};try{const G=await ue(`/api/pharmacy-orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!G.ok){const z=await G.json();throw new Error(z.message||"Failed to update order")}e(-1)}catch(G){S(G.message||"Failed to update order. Please try again.")}finally{_(!1)}},X=b.useMemo(()=>c.reduce((q,W)=>{const ae=W.loose_price??0,G=W.looseQuantity??0;return q+ae*G},0),[c]);return O?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsx(Z,{width:300,height:32})]}),r.jsx("div",{className:"header-right",children:r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}})})]}),r.jsx("div",{className:"order-meta",style:{display:"flex",gap:"1rem",margin:"1rem 0"},children:r.jsx(Z,{width:200,height:24})}),r.jsxs("div",{className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(Z,{width:200,height:24})}),r.jsx("div",{style:{padding:"1.5rem"},children:r.jsx(Z,{height:42})})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsx(Z,{width:250,height:24})}),r.jsxs("div",{className:"table-container",style:{padding:"0 1rem 1rem"},children:[r.jsxs("div",{className:"table-header-row",style:{display:"flex",gap:"1rem",padding:"1rem"},children:[r.jsx(Z,{width:"30%",height:20}),r.jsx(Z,{width:"20%",height:20}),r.jsx(Z,{width:"20%",height:20}),r.jsx(Z,{width:"15%",height:20}),r.jsx(Z,{width:"5%",height:20})]}),r.jsx("div",{className:"table-body",children:[1,2,3].map(q=>r.jsxs("div",{className:"table-row",style:{display:"flex",gap:"1rem",padding:"1rem",borderBottom:"1px solid #eee"},children:[r.jsxs("div",{style:{width:"30%"},children:[r.jsx(Z,{width:"80%",height:20,className:"mb-2"}),r.jsx(Z,{width:"40%",height:14})]}),r.jsx(Z,{width:"20%",height:36}),r.jsx(Z,{width:"20%",height:36}),r.jsx(Z,{width:"15%",height:20,style:{alignSelf:"center"}}),r.jsx(Z,{width:"5%",height:24,style:{alignSelf:"center"}})]},q))})]})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx(Z,{width:180,height:24})}),r.jsx("div",{style:{padding:"1rem"},children:r.jsx(Z,{height:80})})]}),r.jsx("div",{style:{marginTop:"20px"},children:r.jsx(Z,{height:48,width:"100%"})})]})]})]}):n?r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"page-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:r.jsx(nn,{size:20})}),r.jsxs("h2",{className:"page-title",children:["EDIT ORDER ",r.jsxs("span",{className:"text-gray-500 text-lg font-normal ml-2",children:[a==null?void 0:a.name," #",n.id.substring(0,4)]})]})]}),r.jsx("div",{className:"header-right",children:r.jsx("span",{className:"status-badge",children:n.status.toUpperCase()})})]}),r.jsx("div",{className:"order-meta",children:r.jsxs("span",{className:"order-date",children:[" Order Date: ",new Date(n.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})}),r.jsxs("form",{onSubmit:te,className:"main-layout",children:[r.jsxs("div",{className:"left-column",children:[r.jsxs("div",{className:"card search-section",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{children:" Find & Add Medication"})}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by name or brand...",value:f,onChange:q=>p(q.target.value),className:"search-input"}),f&&r.jsx("div",{className:"dropdown-results",children:y.length>0?r.jsx("ul",{children:y.map(q=>r.jsxs("li",{onClick:()=>$(q),className:"dropdown-item",children:[r.jsx("span",{className:"drug-name",children:q.name||q.brand_name}),r.jsxs("span",{className:"drug-meta",children:["(Stock: ",q.stock??"N/A",", MRP: ",Number(q.mrp||0).toFixed(2),")"]})]},q.id))}):r.jsxs("div",{className:"p-3 text-gray-500 text-sm",children:['No drugs found matching "',f,'"']})})]})]}),r.jsxs("div",{className:"card medications-list-section",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{children:[" Medications in Order ",r.jsxs("span",{className:"item-count",children:[c.length," items"]})]})}),c.length>0?r.jsxs("div",{className:"table-container",children:[r.jsxs("div",{className:"table-header-row",children:[r.jsx("div",{className:"col-medication",children:"MEDICATION"}),r.jsx("div",{className:"col-directions",children:"DIRECTIONS"}),r.jsx("div",{className:"col-quantity",children:"QUANTITY"}),r.jsx("div",{className:"col-subtotal",children:"SUBTOTAL"}),r.jsx("div",{className:"col-action"})]}),r.jsx("div",{className:"table-body",children:c.map(q=>{const W=q.drug_id??q.name;return r.jsxs("div",{className:"table-row",children:[r.jsxs("div",{className:"col-medication",children:[r.jsx("span",{className:"med-name",children:q.name}),q.pack&&r.jsx("span",{className:"med-unit text-xs text-gray-500 block",children:q.pack}),r.jsxs("div",{className:"stock-info",children:[" Stock: ",r.jsxs("span",{className:"stock-value",children:[" ",q.stock!==void 0?q.pack?`BOX OF ${B(q.pack)}`:q.stock:"N/A"]})]})]}),r.jsx("div",{className:"col-directions",children:r.jsx("input",{type:"text",placeholder:"1 tablet twice daily...",value:q.directions_to_use??"",onChange:ae=>{const G=ae.target.value;d(z=>z.map(le=>(le.drug_id??le.name)===W?{...le,directions_to_use:G}:le))},className:"directions-input"})}),r.jsx("div",{className:"col-quantity",children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"PACKS"}),r.jsx("input",{type:"number",min:"0",value:q.loosePacks||"",onChange:ae=>V(W,ae.target.value===""?0:parseInt(ae.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"LOOSE"}),r.jsx("input",{type:"number",min:"0",value:q.looseUnits||"",onChange:ae=>H(W,ae.target.value===""?0:parseInt(ae.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]})]})}),r.jsxs("div",{className:"col-subtotal",children:["",(Number((q.pricePerLooseUnit??0)*(q.looseQuantity??0))||0).toFixed(2)]}),r.jsx("div",{className:"col-action",children:r.jsx("button",{type:"button",onClick:()=>L(W),className:"delete-btn",title:"Remove Item",children:r.jsx(Wn,{size:18,strokeWidth:2.5})})})]},W)})})]}):r.jsx("div",{className:"empty-state",children:"No medications added. Search above to add."})]})]}),r.jsxs("div",{className:"right-column",children:[r.jsxs("div",{className:"card notes-card",children:[r.jsx("div",{className:"card-header border-b-0 pb-2",children:r.jsx("h3",{children:" Prescription Notes"})}),r.jsx("textarea",{rows:3,value:T??"",onChange:q=>C(q.target.value||null),placeholder:"Add notes about unavailable drugs...",className:"notes-input"})]}),r.jsxs("button",{type:"submit",disabled:N,className:"confirm-btn",style:{width:"100%",margin:"20px 0 0 0"},children:[r.jsx("span",{className:"check-icon",children:""})," ",N?"Updating...":"Confirm Changes"]}),v&&r.jsx("div",{className:"error-alert mt-4",children:v})]})]})]}):r.jsx("div",{className:"p-6 text-red-500 flex justify-center items-center h-screen",children:"Order not found or failed to load."})},XMe=(t,e,n,i="non-black")=>{if(isNaN(t)||isNaN(e)||t<=0||e<=0)return null;let a;return n==="female"?t<=.7?a=141*Math.pow(t/.7,-.329)*Math.pow(.993,e):a=141*Math.pow(t/.7,-1.209)*Math.pow(.993,e):t<=.9?a=141*Math.pow(t/.9,-.411)*Math.pow(.993,e):a=141*Math.pow(t/.9,-1.209)*Math.pow(.993,e),i==="black"&&(a*=1.018),parseFloat(a.toFixed(2))},JMe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0||n>=400)return null;const i=t-e-n/5;return parseFloat(i.toFixed(2))},ZMe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},eIe=(t,e)=>{if(isNaN(t)||isNaN(e)||t<0||e<0)return null;const n=t-e;return parseFloat(n.toFixed(2))},tIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const i=t-(e+n);return parseFloat(i.toFixed(2))},nIe=(t,e,n)=>{if(isNaN(t)||isNaN(e)||isNaN(n)||t<0||e<0||n<0)return null;const i=2*t+e/18+n/2.8;return parseFloat(i.toFixed(2))},rIe=t=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(t),kB=()=>{var ce,fe;const{orderId:t}=Oi(),e=Mt(),[n,i]=b.useState(null),[a,s]=b.useState({}),[o,l]=b.useState(!0),[c,d]=b.useState(!1),[f,p]=b.useState(null),[y,x]=b.useState(null),[v,S]=b.useState(null),[N,_]=b.useState({}),[T,C]=b.useState(null),[O,k]=b.useState(!1),[P,I]=b.useState(""),[F,B]=b.useState(!1),[$,L]=b.useState(""),[V,H]=b.useState(""),[te,X]=b.useState(!1),[q,W]=b.useState(""),ae=b.useCallback(async se=>{var Q;try{const ie=await ue(`/api/patients/${se}`);if(!ie.ok)throw new Error(`Failed to fetch patient details: ${ie.status}`);const ge=await ie.json();x(ge.age),S(((Q=ge.sex)==null?void 0:Q.toLowerCase())==="female"?"female":"male"),ge.phone&&i(ee=>ee?{...ee,Patient:{...ee.Patient,phone:ge.phone}}:null)}catch(ie){console.error("Error fetching patient details:",ie),x(null),S(null)}},[]),G=b.useCallback(async()=>{if(t){l(!0),p(null);try{const se=await ue(`/api/lab/${t}`);if(!se.ok){const ge=await se.json().catch(()=>({message:`HTTP error! status: ${se.status}`}));throw new Error(ge.message||`HTTP error! status: ${se.status}`)}const Q=await se.json();if(i(Q),Q.createdAt)try{const ge=new Date(Q.createdAt),ee=new Date(ge.getTime()-ge.getTimezoneOffset()*6e4).toISOString().slice(0,16);I(ee)}catch(ge){console.error("Error formatting date for edit:",ge)}if(Q.report_date)try{const ge=new Date(Q.report_date),ee=new Date(ge.getTime()-ge.getTimezoneOffset()*6e4).toISOString().slice(0,16);L(ee)}catch(ge){console.error("Error formatting report date for edit:",ge)}else{const ge=new Date,ee=new Date(ge.getTime()-ge.getTimezoneOffset()*6e4).toISOString().slice(0,16);L(ee)}Q.referral_doctor&&W(Q.referral_doctor),Q.patient_id&&ae(Q.patient_id);const ie={};if(Q.tests&&Q.tests.forEach(ge=>{ie[ge.id]={},ge.default_parameters&&ge.default_parameters.length>0?ge.default_parameters.forEach(ee=>{ie[ge.id][ee.name]=ee.defaultValue}):ie[ge.id].report_content=""}),Q.report_content)try{const ge=JSON.parse(Q.report_content);typeof ge=="object"&&ge!==null&&!Array.isArray(ge)?s(ge):(console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),s(ie))}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),s(ie)}else s({})}catch(se){console.error("Failed to fetch lab order details:",se),p(se instanceof Error?se.message:"An unknown error occurred while fetching order details.")}finally{l(!1)}}},[t,ae]);b.useEffect(()=>{t?G():(p("No Order ID provided in the URL."),l(!1))},[t,G]),b.useEffect(()=>{(async()=>{try{const Q=await ue("/api/clinics/settings");if(Q.ok){const ie=await Q.json();H(ie.labLetterheadUrl||"")}}catch(Q){console.error("Error fetching clinic settings:",Q)}})()},[]);const z=(se,Q,ie)=>{s(ge=>{var Ke,rt,mt,Pe,Je,et,ut,_t,vt,Ce,lt,Tt,qe,jt,Ct,Kn,br,zn,_n;const ee={...ge,[se]:{...ge[se],[Q]:ie}},we=parseFloat((Ke=ee[se])==null?void 0:Ke.Creatinine),Ue=y,Ge=v;if(Q==="Creatinine"&&!isNaN(we)&&Ue!==null&&Ge!==null){const wn=XMe(we,Ue,Ge);wn!==null&&((rt=n==null?void 0:n.tests.find(qn=>qn.id===se))!=null&&rt.default_parameters.find(qn=>qn.name==="eGFR"))&&(ee[se].eGFR=wn)}const Le=parseFloat((mt=ee[se])==null?void 0:mt["Total Cholesterol"]),oe=parseFloat((Pe=ee[se])==null?void 0:Pe["HDL Cholesterol"]),_e=parseFloat((Je=ee[se])==null?void 0:Je.Triglycerides);if((Q==="Total Cholesterol"||Q==="HDL Cholesterol"||Q==="Triglycerides")&&!isNaN(Le)&&!isNaN(oe)&&!isNaN(_e)){const wn=JMe(Le,oe,_e);wn!==null&&((et=n==null?void 0:n.tests.find(qn=>qn.id===se))!=null&&et.default_parameters.find(qn=>qn.name==="LDL Cholesterol"))&&(ee[se]["LDL Cholesterol"]=wn)}const $e=parseFloat((ut=ee[se])==null?void 0:ut["Total Bilirubin"]),ze=parseFloat((_t=ee[se])==null?void 0:_t["Direct Bilirubin"]);if((Q==="Total Bilirubin"||Q==="Direct Bilirubin")&&!isNaN($e)&&!isNaN(ze)){const wn=ZMe($e,ze);wn!==null&&((vt=n==null?void 0:n.tests.find(qn=>qn.id===se))!=null&&vt.default_parameters.find(qn=>qn.name==="Indirect Bilirubin"))&&(ee[se]["Indirect Bilirubin"]=wn)}const Y=parseFloat((Ce=ee[se])==null?void 0:Ce["Total Protein"]),ye=parseFloat((lt=ee[se])==null?void 0:lt.Albumin);if((Q==="Total Protein"||Q==="Albumin")&&!isNaN(Y)&&!isNaN(ye)){const wn=eIe(Y,ye);wn!==null&&((Tt=n==null?void 0:n.tests.find(qn=>qn.id===se))!=null&&Tt.default_parameters.find(qn=>qn.name==="Globulin"))&&(ee[se].Globulin=wn)}const pe=parseFloat((qe=ee[se])==null?void 0:qe.Sodium),me=parseFloat((jt=ee[se])==null?void 0:jt.Chloride),Ne=parseFloat((Ct=ee[se])==null?void 0:Ct.Bicarbonate);if((Q==="Sodium"||Q==="Chloride"||Q==="Bicarbonate")&&!isNaN(pe)&&!isNaN(me)&&!isNaN(Ne)){const wn=tIe(pe,me,Ne);wn!==null&&((Kn=n==null?void 0:n.tests.find(qn=>qn.id===se))!=null&&Kn.default_parameters.find(qn=>qn.name==="Anion Gap"))&&(ee[se]["Anion Gap"]=wn)}const Be=parseFloat((br=ee[se])==null?void 0:br.Glucose),Ee=parseFloat((zn=ee[se])==null?void 0:zn.BUN);if((Q==="Sodium"||Q==="Glucose"||Q==="BUN")&&!isNaN(pe)&&!isNaN(Be)&&!isNaN(Ee)){const wn=nIe(pe,Be,Ee);wn!==null&&((_n=n==null?void 0:n.tests.find(qn=>qn.id===se))!=null&&_n.default_parameters.find(qn=>qn.name==="Osmolality"))&&(ee[se].Osmolality=wn)}return ee})},le=async se=>{const Q=a[se]||{},ie=n==null?void 0:n.tests.find(Ue=>Ue.id===se);if(!ie)return;const ge={};ie.default_parameters&&ie.default_parameters.forEach(Ue=>{ge[Ue.name]=Ue.defaultValue});const ee={...ge,...Q},we={...a,[se]:ee};s(we),d(!0),p(null);try{const Ue=await ue(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(we),isPartial:!0})});if(!Ue.ok)throw new Error(`Save failed: ${Ue.status}`)}catch(Ue){console.error("Error saving test report:",Ue),alert("Failed to save test report.")}finally{d(!1)}},je=async(se=null)=>{if(!n||!n.tests||!t){alert("Order details not loaded.");return}d(!0),p(null);try{let Q;if(se===null){const ge={};n.tests.forEach(ee=>{const we=a[ee.id]||{},Ue={};ee.default_parameters&&ee.default_parameters.forEach(Ge=>{Ge.defaultValue!==void 0&&Ge.defaultValue!==null&&(Ue[Ge.name]=Ge.defaultValue)}),ge[ee.id]={...Ue,...we},(!ee.default_parameters||ee.default_parameters.length===0)&&!ge[ee.id].report_content&&(ge[ee.id].report_content="")}),Q=ge,s(ge)}else{const ge=a[se]||{},ee=n.tests.find(Ge=>Ge.id===se);if(!ee){d(!1);return}const we={};ee.default_parameters&&ee.default_parameters.forEach(Ge=>{we[Ge.name]=Ge.defaultValue});const Ue={...we,...ge};Q={...a,[se]:Ue},s(Q)}const ie=await ue(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(Q),isPartial:se!==null})});if(!ie.ok)throw new Error(`Save failed: ${ie.status}`);C(se),setTimeout(()=>{window.print()},100)}catch(Q){console.error("Error saving before print:",Q),alert("Failed to save report before printing.")}finally{d(!1)}},K=()=>{n&&EM(n)},Oe=async()=>{if(!n||!n.tests){alert("Order details not loaded.");return}if(!t){alert("Cannot submit report without an Order ID.");return}const se={};if(n.tests.forEach(Q=>{const ie=a[Q.id]||{},ge={};Q.default_parameters&&Q.default_parameters.forEach(ee=>{ee.defaultValue!==void 0&&ee.defaultValue!==null&&(ge[ee.name]=ee.defaultValue)}),se[Q.id]={...ge,...ie},(!Q.default_parameters||Q.default_parameters.length===0)&&!se[Q.id].report_content&&(se[Q.id].report_content="")}),Object.keys(se).length===0){alert("Report content cannot be empty.");return}s(se),d(!0),p(null);try{const Q=await ue(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(se)})});if(!Q.ok){const ie=await Q.json().catch(()=>({message:`Submission failed: ${Q.status}`}));throw new Error(ie.message||`Submission failed: ${Q.status}`)}e(-1)}catch(Q){console.error("Error submitting report:",Q),p(Q instanceof Error?Q.message:"An unknown error occurred during submission.")}finally{d(!1)}},Ye=async()=>{if(!(!t||!P))try{const se=await ue(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:new Date(P).toISOString()})});if(!se.ok)throw new Error("Failed to update date");const Q=await se.json();Q.order&&i(ie=>ie?{...ie,createdAt:Q.order.createdAt}:null),k(!1)}catch(se){console.error("Failed to update date:",se),alert("Failed to update date")}},Me=async()=>{if(!(!t||!$))try{const se=await ue(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportDate:new Date($).toISOString()})});if(!se.ok)throw new Error("Failed to update report date");const Q=await se.json();Q.order&&i(ie=>ie?{...ie,report_date:Q.order.report_date}:null),B(!1)}catch(se){console.error("Failed to update report date:",se),alert("Failed to update report date")}},Ie=async()=>{if(t)try{const se=await ue(`/api/lab/orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralDoctor:q})});if(!se.ok)throw new Error("Failed to update referral doctor");const Q=await se.json();Q.order&&(W(Q.order.referral_doctor||""),i(ie=>ie?{...ie,referral_doctor:Q.order.referral_doctor}:null)),X(!1)}catch(se){console.error("Failed to update referral doctor:",se),alert("Failed to update referral doctor")}};if(o)return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem"},children:[r.jsx(Z,{width:200,height:28}),r.jsxs("div",{className:"header-actions",style:{display:"flex",gap:"8px"},children:[r.jsx(Z,{width:80,height:32}),r.jsx(Z,{width:80,height:32}),r.jsx(Z,{width:80,height:32})]})]}),r.jsxs("div",{className:"lab-inventory-card no-print summary-card",style:{margin:"1rem",padding:"0"},children:[r.jsx("div",{className:"lab-inventory-header summary-header",style:{padding:"0.75rem 1rem",borderBottom:"1px solid #eee"},children:r.jsx(Z,{width:120,height:20})}),r.jsxs("div",{className:"summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem"},children:[r.jsx(Z,{height:24}),r.jsx(Z,{height:24}),r.jsx(Z,{height:24}),r.jsx(Z,{height:24})]})]}),r.jsx("div",{className:"lab-tests-container no-print",style:{padding:"1rem"},children:[1,2].map(se=>r.jsxs("div",{className:"test-card",style:{marginBottom:"1.5rem",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"white"},children:[r.jsxs("div",{className:"test-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsx(Z,{width:250,height:24}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsx(Z,{width:70,height:30}),r.jsx(Z,{width:36,height:30})]})]}),r.jsx("div",{className:"parameter-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(Q=>r.jsxs("div",{className:"parameter-item",children:[r.jsx(Z,{width:"30%",height:16,style:{marginBottom:"0.5rem"}}),r.jsx(Z,{height:40})]},Q))})]},se))})]})});if(f&&!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Xr,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),r.jsx("p",{className:"error-text",children:f}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:r.jsx(nn,{size:16})})]})});if(!n)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Sl,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${t}.`}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:r.jsx(nn,{size:16})})]})});const be=(ce=n==null?void 0:n.Patient)==null?void 0:ce.name,re=(fe=n==null?void 0:n.Patient)==null?void 0:fe.patient_token_number;return r.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",children:[r.jsx("h2",{children:"Enter Lab Report"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:r.jsx(nn,{size:16})}),r.jsxs("button",{onClick:()=>je(null),className:"lab-inventory-button compact-btn",title:"Print Full Report",children:[r.jsx(Av,{size:16}),r.jsx("span",{className:"btn-text",children:"Print"})]}),r.jsxs("button",{onClick:K,className:"lab-inventory-button whatsapp-btn compact-btn",title:"Share via WhatsApp",children:[r.jsx(Gz,{size:16}),r.jsx("span",{className:"btn-text",children:"Share"})]})]})]}),n&&r.jsxs("div",{className:"lab-inventory-card no-print summary-card",children:[r.jsxs("h3",{className:"lab-inventory-header summary-header",children:[r.jsx(Sl,{size:14})," Summary"]}),r.jsxs("div",{className:"summary-grid",children:[r.jsxs("div",{className:"summary-item",children:[r.jsx(vr,{size:13,className:"icon"}),r.jsx("strong",{children:"Patient:"})," ",be??"N/A"," (",re??"N/A",")"]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(xI,{size:13,className:"icon"}),r.jsx("strong",{children:"Ordered:"})," ",O?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:P,onChange:se=>I(se.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Ye,className:"icon-btn save",children:r.jsx(Cl,{size:12})}),r.jsx("button",{onClick:()=>k(!1),className:"icon-btn cancel",children:r.jsx(qt,{size:12})})]}):r.jsxs(r.Fragment,{children:[hf(new Date(n.createdAt),"dd MMM, HH:mm"),r.jsx("button",{onClick:()=>k(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(vc,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(xI,{size:13,className:"icon"}),r.jsx("strong",{children:"Reported:"})," ",F?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"datetime-local",value:$,onChange:se=>L(se.target.value),className:"lab-inventory-input date-input"}),r.jsx("button",{onClick:Me,className:"icon-btn save",children:r.jsx(Cl,{size:12})}),r.jsx("button",{onClick:()=>B(!1),className:"icon-btn cancel",children:r.jsx(qt,{size:12})})]}):r.jsxs(r.Fragment,{children:[n.report_date?hf(new Date(n.report_date),"dd MMM, HH:mm"):"Not Set",r.jsx("button",{onClick:()=>B(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(vc,{size:11})})]})]}),r.jsxs("div",{className:"summary-item",children:[r.jsx(vr,{size:13,className:"icon"}),r.jsx("strong",{children:"Ref. Doctor:"})," ",te?r.jsxs("span",{className:"date-edit-wrapper",children:[r.jsx("input",{type:"text",value:q,onChange:se=>W(se.target.value),className:"lab-inventory-input date-input",placeholder:"Enter referral doctor name"}),r.jsx("button",{onClick:Ie,className:"icon-btn save",children:r.jsx(Cl,{size:12})}),r.jsx("button",{onClick:()=>X(!1),className:"icon-btn cancel",children:r.jsx(qt,{size:12})})]}):r.jsxs(r.Fragment,{children:[q||"Not Set",r.jsx("button",{onClick:()=>X(!0),className:"icon-btn edit",title:"Edit",children:r.jsx(vc,{size:11})})]})]})]})]}),r.jsxs("div",{className:"lab-tests-container no-print",children:[n==null?void 0:n.tests.map(se=>{var Q;return r.jsxs("div",{className:"test-card",children:[r.jsxs("div",{className:"test-header",children:[r.jsx("h4",{children:se.name}),r.jsxs("div",{style:{display:"flex",gap:"6px"},children:[r.jsxs("button",{type:"button",onClick:ie=>{ie.stopPropagation(),le(se.id)},className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:[r.jsx(Js,{size:14}),r.jsx("span",{className:"btn-text",children:"Save"})]}),r.jsx("button",{type:"button",onClick:ie=>{ie.stopPropagation(),je(se.id)},className:"lab-inventory-button compact-btn",title:"Print",children:r.jsx(Av,{size:14})})]})]}),r.jsx("div",{className:"test-parameters-body",children:se.default_parameters&&se.default_parameters.length>0?r.jsx("div",{className:"parameter-grid",children:se.default_parameters.map(ie=>{var Le,oe;const ge=(Le=a[se.id])==null?void 0:Le[ie.name],ee=ge!==void 0?ge:ie.defaultValue??"",we=ie.type==="number"&&ee!==""&&(ie.lower_limit!=null&&parseFloat(String(ee))<ie.lower_limit||ie.upper_limit!=null&&parseFloat(String(ee))>ie.upper_limit),Ue=rIe(ie.name),Ge=(oe=N[se.id])==null?void 0:oe[ie.name];return r.jsxs("div",{className:"parameter-item",children:[r.jsxs("label",{className:"parameter-label",htmlFor:`${se.id}-${ie.name}`,children:[ie.name," ",ie.unit&&r.jsxs("span",{className:"parameter-unit",children:["(",ie.unit,")"]})]}),r.jsxs("div",{className:"input-wrapper",children:[ie.type==="boolean"?r.jsxs("select",{id:`${se.id}-${ie.name}`,value:(ee==null?void 0:ee.toString())??"false",onChange:_e=>z(se.id,ie.name,_e.target.value==="true"),className:"lab-inventory-input parameter-input",disabled:c,children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-Reactive"})]}):r.jsx("input",{id:`${se.id}-${ie.name}`,type:ie.type==="number"?"number":"text",value:ee,onChange:_e=>z(se.id,ie.name,_e.target.value),className:`lab-inventory-input parameter-input ${we?"abnormal-result":""} ${Ue?"calculated-input":""}`,disabled:c||Ue&&!Ge,placeholder:ie.lower_limit!=null&&ie.upper_limit!=null?`${ie.lower_limit}-${ie.upper_limit}`:""}),Ue&&r.jsx("button",{type:"button",onClick:()=>_(_e=>({..._e,[se.id]:{..._e[se.id]||{},[ie.name]:!Ge}})),className:"edit-calculated-btn",title:Ge?"Lock":"Edit",children:r.jsx(vc,{size:11})})]})]},ie.name)})}):r.jsxs("div",{className:"parameter-item",style:{width:"100%"},children:[r.jsx("label",{className:"parameter-label",htmlFor:`${se.id}-report_content`,children:"Results / Observations"}),r.jsx("textarea",{id:`${se.id}-report_content`,value:((Q=a[se.id])==null?void 0:Q.report_content)??"",onChange:ie=>z(se.id,"report_content",ie.target.value),className:"lab-inventory-input parameter-textarea",rows:3,placeholder:`Enter results for ${se.name}...`,disabled:c})]})})]},se.id)}),f&&r.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[r.jsx(Xr,{size:15,className:"inline mr-1"}),f]})]}),r.jsx("div",{className:"form-actions-footer no-print",children:r.jsx("button",{type:"button",onClick:Oe,disabled:c,className:"lab-inventory-button lab-inventory-button-primary submit-btn",children:c?r.jsxs(r.Fragment,{children:[r.jsx(Dc,{className:"animate-spin",size:16})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Js,{size:16})," Save All"]})})}),r.jsxs("div",{className:"printable-only",children:[V&&r.jsx("div",{className:"print-letterhead-container",children:r.jsx("img",{src:V,alt:"Lab Letterhead",className:"print-letterhead-image"})}),n&&n.Patient&&r.jsxs("div",{style:{marginBottom:"20px",borderBottom:"1px solid #ccc",paddingBottom:"10px"},children:[r.jsx("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Lab Report"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"12px"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Patient Name:"})," ",n.Patient.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age/Sex:"})," ",y??"N/A"," / ",v??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ref. Doctor:"})," ",q||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Date:"})," ",hf(new Date(n.createdAt),"PPpp")]})]})]}),n==null?void 0:n.tests.filter(se=>T===null||se.id===T).map(se=>{var Q;return r.jsxs("div",{style:{marginBottom:"20px",pageBreakInside:"avoid"},children:[r.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"5px"},children:se.name}),se.default_parameters&&se.default_parameters.length>0?r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"#f9f9f9"},children:[r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Parameter"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Result"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Units"}),r.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Normal Range"})]})}),r.jsx("tbody",{children:se.default_parameters.map(ie=>{var Le;const ge=(Le=a[se.id])==null?void 0:Le[ie.name],ee=typeof ge=="string"?parseFloat(ge):typeof ge=="number"?ge:NaN,we=ie.type==="number"&&!isNaN(ee)&&ge!==""&&(ie.lower_limit!=null&&ee<ie.lower_limit||ie.upper_limit!=null&&ee>ie.upper_limit),Ue=ie.type==="boolean"&&(ge===!0||ge==="true"),Ge=ie.type==="boolean"?ge===!0||ge==="true"?"Reactive":"Non-Reactive":ge??"";return r.jsxs("tr",{children:[r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ie.name}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee",fontWeight:we||Ue?"bold":"normal",color:we?"red":Ue?"green":"inherit"},children:Ge}),r.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ie.unit??""}),r.jsxs("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:[ie.lower_limit!==null&&ie.lower_limit!==void 0&&`> ${ie.lower_limit}`,ie.lower_limit!==null&&ie.lower_limit!==void 0&&ie.upper_limit!==null&&ie.upper_limit!==void 0&&" - ",ie.upper_limit!==null&&ie.upper_limit!==void 0&&`< ${ie.upper_limit}`]})]},ie.name)})})]}):r.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"12px",padding:"10px"},children:((Q=a[se.id])==null?void 0:Q.report_content)||"No report content entered."})]},se.id)})]})]})})},iIe=()=>{const{orderId:t}=Oi(),e=Mt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,d]=b.useState(""),f=b.useCallback(async y=>{if(!y){l("No Order ID specified in the URL."),s(!1),i(null);return}s(!0),l(null),i(null);try{console.log(`Fetching order details for ID: ${y}`);const x=await ue(`/api/lab/orders/${y}/report`);if(!x.ok){let S;try{S=await x.json()}catch{S={message:`Server returned status ${x.status}`}}throw console.error("Fetch order details error response:",S),new Error(S.message||`Failed to fetch order details: ${x.status}`)}const v=await x.json();if(console.log("Received order data:",v),!v)throw console.error("Invalid order data structure:",v),new Error("Invalid order data received from server.");i(v)}catch(x){console.error("Error fetching order details:",x),l(x instanceof Error?x.message:"An unknown error occurred while fetching the order details")}finally{s(!1)}},[ue]);b.useEffect(()=>{f(t)},[t,f]),b.useEffect(()=>{(async()=>{try{const x=await ue("/api/clinics/settings");if(x.ok){const v=await x.json();d(v.labLetterheadUrl||"")}}catch(x){console.error("Error fetching clinic settings:",x)}})()},[]);const p=()=>{n&&EM(n)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs(Sr,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[r.jsx(Hn,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),r.jsx("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:r.jsx(nn,{size:16})}),r.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[r.jsx(Av,{size:16,style:{marginRight:"5px"}}),"Print"]}),r.jsxs("button",{onClick:p,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[r.jsx(Gz,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",t||"None Specified",")"]}),a&&r.jsx("div",{className:"loading-text",children:"Loading report..."}),o&&!a&&r.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[r.jsx(Xr,{size:48}),r.jsx("h3",{className:"error-title",children:"Error Loading Report"}),r.jsx("p",{children:o}),t&&r.jsx("button",{onClick:()=>f(t),className:"retry-button",children:"Retry"})]}),r.jsxs("div",{className:"printable-section",children:[c&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:c,alt:"Lab Letterhead",className:"print-letterhead-image"})}),!a&&!o&&(n==null?void 0:n.Patient)&&r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(vr,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",n.Patient.name||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age:"})," ",n.Patient.age??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Gender:"})," ",n.Patient.gender||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Token No:"})," ",n.Patient.patient_token_number||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Patient ID:"})," ",n.Patient.id]}),n.Patient.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",n.Patient.phone]})]})]}),!a&&!o&&(n==null?void 0:n.report_content)&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(la,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const y=JSON.parse(n.report_content||"{}");return typeof y=="object"&&y!==null&&n.tests?n.tests.map(x=>r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em"},children:x.name}),y[x.id]?r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(y[x.id]).map(([v,S])=>{var k;const N=(k=x.default_parameters)==null?void 0:k.find(P=>P.name===v),_=typeof S=="string"?parseFloat(S):typeof S=="number"?S:NaN,T=(N==null?void 0:N.type)==="number"&&!isNaN(_)&&(N.lower_limit!=null&&_<N.lower_limit||N.upper_limit!=null&&_>N.upper_limit),C=(N==null?void 0:N.type)==="boolean"?S===!0||S==="true"?"Reactive":"Non-Reactive":String(S),O=(N==null?void 0:N.type)==="boolean"&&(S===!0||S==="true");return r.jsxs("tr",{children:[r.jsx("td",{children:v}),r.jsxs("td",{className:`${T?"abnormal-result":""} ${O?"reactive-result":""}`,children:[C," ",N==null?void 0:N.unit]}),r.jsx("td",{children:N&&N.type==="number"&&(N.lower_limit!==null||N.upper_limit!==null)?r.jsxs(r.Fragment,{children:[N.lower_limit!=null&&` > ${N.lower_limit}`,N.lower_limit!=null&&N.upper_limit!=null&&" - ",N.upper_limit!=null&&` < ${N.upper_limit}`,N.unit&&` ${N.unit}`]}):((N==null?void 0:N.type)==="boolean","N/A")})]},v)})})]}):r.jsx("p",{children:"No parameters reported for this test."})]},x.id)):r.jsx(vf,{remarkPlugins:[bf],children:n.report_content})}catch{return r.jsx(vf,{remarkPlugins:[bf],children:n.report_content||"*No findings recorded.*"})}})()})]})]}),!a&&!o&&!(n!=null&&n.report_content)&&!(n!=null&&n.Patient)&&t&&r.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",t,". The order might be processing, does not exist, or the ID is incorrect."]}),!t&&!a&&!o&&r.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",r.jsx(Sr,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},aIe=()=>{const t=Mt(),[e,n]=b.useState(""),[i,a]=b.useState(!1),[s,o]=b.useState([]),[l,c]=b.useState(null),[d,f]=b.useState(e);Gc(),b.useEffect(()=>{const S=setTimeout(()=>{f(e)},500);return()=>{clearTimeout(S)}},[e]),b.useEffect(()=>{p()},[d]);const p=async()=>{const S=e.trim();if(!S){o([]),c(null);return}a(!0),c(null),o([]),console.log(`Searching for: ${S}`);try{const N=await ue("/api/lab");if(!N.ok){let P;try{P=await N.json()}catch{P={message:`Server returned status ${N.status}`}}throw console.error("Search fetch error response:",P),new Error(P.message||`HTTP error! status: ${N.status}`)}const{orders:_}=await N.json();console.log("Received lab orders for search:",_);const C=_.filter(P=>!!P.report_content).map(P=>{var I,F;return{id:P.id,labTokenNumber:String(P.lab_token_number??"N/A"),patientName:((I=P.Patient)==null?void 0:I.name)||"N/A",patientId:P.patient_id,patientTokenNumber:String(((F=P.Patient)==null?void 0:F.patient_token_number)??"N/A"),tests:(P.tests||[]).map(B=>B.name||"Unknown Test"),date:hf(new Date(P.createdAt),"yyyy-MM-dd"),status:P.status}}),O=new eo(C,{keys:["patientName","labTokenNumber","patientTokenNumber","tests","id","patientId"],threshold:.3,ignoreLocation:!0}),k=e.trim()?O.search(e).map(P=>P.item):C;console.log("Filtered search results:",k),o(k),k.length===0&&S?c(`No matching reports found for "${S}".`):c(null)}catch(N){console.error("Failed to search lab reports:",N),c(N instanceof Error?N.message:"An unknown error occurred during search")}finally{a(!1)}},y=S=>{console.log(`Result clicked, navigating to view report for order ID: ${S}`),t(`/lab/view-report/${S}`)},x=S=>{switch(S){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:S,color:"text-gray-600 bg-gray-100"}}},v=S=>{switch(S){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),r.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(nn,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[r.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[r.jsx(Hn,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),r.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:e,onChange:S=>n(S.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[i&&r.jsx("div",{className:"loading-text",children:"Searching..."}),l&&!i&&r.jsxs("div",{className:"error-text",children:[r.jsx(Xr,{size:20,className:"inline mr-2"})," ",l]}),s.length>0&&!i&&r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:s.map(S=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>y(S.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[r.jsx(XQ,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),S.patientName," (Token: ",S.patientTokenNumber,")"]}),r.jsx("span",{className:v(S.status),children:x(S.status).text})]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(la,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",S.id]}),r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx($J,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",S.tests.join(", ")]}),r.jsxs("div",{children:[r.jsx($O,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",S.date]})]})]},S.id))}),!i&&s.length===0&&!l&&e.trim()&&r.jsxs("div",{className:"no-data-message",children:['No results found for "',e,'".']}),!i&&s.length===0&&!l&&!e.trim()&&r.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},sIe=()=>{const{patientId:t}=Oi(),e=Mt(),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,d]=b.useState(null),[f,p]=b.useState(null);b.useEffect(()=>{(async()=>{if(!t){l("Patient ID is missing from the URL."),s(!1);return}s(!0),l(null),i([]),p(null);try{const v=await ue(`/api/patients/${t}`);if(v.ok){const _=await v.json();p(_.name||`Patient ID: ${t}`)}else console.warn(`Failed to fetch patient name for ID ${t}`),p(`Patient ID: ${t}`);const S=await ue(`/api/lab/patient/${t}`);if(!S.ok){const _=await S.json().catch(()=>({}));throw new Error(_.message||`HTTP error! status: ${S.status}`)}const N=await S.json();i(N||[])}catch(v){console.error("Error fetching data:",v),l(`Failed to load data: ${v.message}`)}finally{s(!1)}})()},[t]);const y=x=>{x.report_content?e(`/lab/view-report/${x.id}`):e(`/lab/enter-report/${x.id}`)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{margin:0},children:["Lab Reports ",f?`for ${f}`:`for Patient ID: ${t}`]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:async()=>{if(!t){alert("Patient ID is missing. Cannot create a new report.");return}try{const x=await ue("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:t})});if(!x.ok){const S=await x.json().catch(()=>({message:`Failed to create new lab order: ${x.status}`}));throw new Error(S.message||`Failed to create new lab order: ${x.status}`)}const v=await x.json();e(`/lab/enter-report/${v.newOrderId}`)}catch(x){console.error("Error creating new lab order:",x),alert(`Error creating new lab order: ${x.message}`)}},className:"lab-inventory-button",disabled:!t,title:t?"Enter a new lab report for this patient":"Patient ID missing",children:[r.jsx(_s,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),r.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[r.jsx(nn,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),r.jsx("div",{style:{marginTop:"20px"},children:a?r.jsx("div",{className:"skeleton-reports-list",children:[1,2,3].map(x=>r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[r.jsx(Z,{variant:"circular",width:24,height:24,style:{marginRight:"15px"}}),r.jsxs("div",{style:{flex:1},children:[r.jsx(Z,{width:"40%",height:20,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"60%",height:16})]})]}),r.jsx("div",{style:{marginLeft:"10px"},children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"12px"}})})]},x))}):o?r.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[r.jsx(GJ,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),r.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),r.jsx("p",{children:o})]}):n.length===0?r.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(la,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),r.jsx("p",{children:"No lab reports found for this patient."}),r.jsxs("p",{children:["You can ",r.jsx(Sr,{to:`/lab/create-order/${t}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):c?r.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",c.report_date?hf(new Date(c.report_date),"PPP p"):"N/A"]}),r.jsxs("button",{onClick:()=>d(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[r.jsx(nn,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),r.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[r.jsx("strong",{children:"Tests Ordered:"})," ",(c.tests||[]).map(x=>x.name).join(", ")]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:r.jsx(vf,{remarkPlugins:[bf],children:c.report_content||"*No findings recorded.*"})})]}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:n.map(x=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>y(x),tabIndex:0,onKeyPress:v=>v.key==="Enter"&&y(x),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(la,{size:24,style:{marginRight:"15px",color:"#007bff"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",hf(new Date(x.createdAt),"PPP")]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",x.tests&&x.tests.length>0?x.tests.map(v=>v.name).join(", "):"N/A"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[x.status&&r.jsx("span",{className:lIe(x.status),children:oIe(x.status)}),r.jsx(dd,{size:20,style:{color:"#6c757d"}})]})]},x.id))})})]})})},oIe=t=>{if(!t)return"Unknown";switch(t.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return t.charAt(0).toUpperCase()+t.slice(1)}},lIe=t=>{if(!t)return"status-badge";switch(t.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},yG=()=>{const t=Mt(),[e]=jz(),n=e.get("search")||"",[i,a]=b.useState("pharmacy");return Gc(void 0,300),r.jsxs("div",{className:"inventory-management-container",style:{padding:"10px 15px",backgroundColor:"var(--background-color)",minHeight:"100vh"},children:[r.jsxs("div",{className:"inventory-header",style:{marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"action-icon-button",title:"Go Back",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-primary)"},children:r.jsx(nn,{size:20})}),r.jsx("h1",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700",color:"var(--text-primary)"},children:"Inventory Management"})]}),r.jsxs("div",{className:"inventory-tabs",style:{display:"flex",gap:"4px",backgroundColor:"var(--card-bg, #f3f4f6)",padding:"3px",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[r.jsxs("button",{onClick:()=>a("pharmacy"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:i==="pharmacy"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:i==="pharmacy"?"var(--card-bg-active, #fff)":"transparent",boxShadow:i==="pharmacy"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:i==="pharmacy"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:i==="pharmacy"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(Nc,{size:16}),"Pharmacy Stock"]}),r.jsxs("button",{onClick:()=>a("lab"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:i==="lab"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:i==="lab"?"var(--card-bg-active, #fff)":"transparent",boxShadow:i==="lab"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:i==="lab"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:i==="lab"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[r.jsx(rs,{size:16}),"Lab Stock"]})]})]}),r.jsx("div",{className:"inventory-content",style:{backgroundColor:"var(--card-bg, #fff)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:i==="pharmacy"?r.jsx(rG,{isEmbedded:!0,initialSearch:n}):r.jsx(AM,{isEmbedded:!0})})]})},cIe=({fetchWithAuth:t})=>{const e=Mt(),[n,i]=b.useState(!0),[a,s]=b.useState([]),[o,l]=b.useState(null),[c,d]=b.useState(null),f=b.useCallback(async()=>{i(!0),l(null);try{const v=await(await t("/staff")).json();s(v.map(S=>({...S,id:S._id||S.id})))}catch(x){l(`Failed to load staff data: ${x.message}`),s([])}finally{i(!1)}},[t]);b.useEffect(()=>{f()},[f]),b.useEffect(()=>{if(c){const x=setTimeout(()=>d(null),5e3);return()=>clearTimeout(x)}},[c]);const p=x=>{switch(x){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},y=x=>{switch(x){case"doctor":return r.jsx(eg,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return r.jsx(Wz,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return r.jsx(Nc,{size:16,className:"mr-2 text-purple-600"});case"lab":return r.jsx(rs,{size:16,className:"mr-2 text-yellow-600"});case"admin":return r.jsx(od,{size:16,className:"mr-2 text-teal-600"});default:return r.jsx(Eo,{size:16,className:"mr-2 text-gray-500"})}};return n?r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Z,{width:40,height:40,variant:"circular"}),r.jsx(Z,{width:200,height:32})]}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:20})}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:32})})]},x))})]})})]}):r.jsxs("div",{className:"staff-page-container",children:[c&&r.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[c.type==="success"?r.jsx(Ol,{size:18,className:"mr-2"}):r.jsx(Xr,{size:18,className:"mr-2"}),r.jsx("span",{children:c.message}),r.jsx("button",{onClick:()=>d(null),className:"ml-auto text-xl font-bold",children:""})]}),o&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),o,r.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(nn,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),r.jsxs("button",{onClick:()=>e("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[r.jsx(ur,{size:16,className:"mr-2"})," Add New Staff"]})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:a.length===0&&!n?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):a.map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:x.name}),r.jsx("td",{className:"hidden md:table-cell",children:x.email}),r.jsx("td",{children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(x.role)}`,children:[y(x.role),x.role.charAt(0).toUpperCase()+x.role.slice(1)]})}),r.jsx("td",{className:"hidden md:table-cell",children:x.role==="doctor"?x.opd_fee?parseFloat(String(x.opd_fee)).toFixed(2):"Not Set":"N/A"}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="active"?"Active":"Inactive"})}),r.jsx("td",{className:"actions",children:r.jsxs("button",{onClick:()=>e(`/dashboard/staff/edit/${x.id}`),className:"edit-link",disabled:x.role==="admin",title:"Edit Staff",children:[r.jsx(Ia,{size:16})," Edit"]})})]},x.id))})]})})]})},AB=()=>{var se,Q,ie,ge,ee,we,Ue,Ge,Le,oe,_e,$e,ze,Y,ye,pe,me,Ne,Be;const{patientId:t,billId:e}=Oi(),n=Mt(),[i,a]=b.useState(null),[s,o]=b.useState(!0),[l,c]=b.useState(null),[d,f]=b.useState(""),[p,y]=b.useState("cash"),[x,v]=b.useState(!1),[S,N]=b.useState(""),[_,T]=b.useState(""),[C,O]=b.useState(""),[k,P]=b.useState(""),[I,F]=b.useState([]),[B,$]=b.useState(""),[L,V]=b.useState(!1),[H,te]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),X=()=>{H.length<5&&te(Ee=>[...Ee,{id:Date.now().toString(),method:"cash",amount:0}])},q=Ee=>{H.length>2&&te(Ke=>Ke.filter(rt=>rt.id!==Ee))},W=(Ee,Ke,rt)=>{te(mt=>mt.map(Pe=>Pe.id===Ee?Ke==="method"?{...Pe,method:rt}:{...Pe,amount:Math.max(0,rt)}:Pe))},ae=(Ee,Ke)=>{const rt=H.filter(Pe=>Pe.id!==Ee).reduce((Pe,Je)=>Pe+Je.amount,0),mt=Math.max(0,Ke-rt);te(Pe=>Pe.map(Je=>Je.id===Ee?{...Je,amount:mt}:Je))},[G,z]=b.useState([]),[le,je]=b.useState(0),K=((se=i==null?void 0:i.patient)==null?void 0:se.insurance_type)==="no_cash_insurance";b.useEffect(()=>{y(K?"no_cash_insurance":"cash")},[K]),b.useEffect(()=>{e&&(async()=>{o(!0),c(null);try{const[Ke,rt,mt]=await Promise.all([ue(`/api/bills/${e}`),ue("/api/clinics/settings").catch(()=>null),ue(`/api/bills?patientId=${t}`).catch(()=>null)]);if(!Ke.ok)throw new Error(`HTTP error! status: ${Ke.status}`);const Pe=await Ke.json();if(!Pe||!Pe.bill||!Pe.calculated)throw new Error("Incomplete data structure received from backend.");if(Pe.bill.type!=="admission")throw new Error(`Unexpected bill type: ${Pe.bill.type}. Expected 'admission'.`);const Je=Array.isArray(Pe.admissionPayments)?Pe.admissionPayments:[];if(a({...Pe.bill,amount:Pe.bill.amount,created_at:Pe.bill.createdAt||Pe.bill.created_at,items:(Pe.bill.items||[]).map(et=>({...et,price:parseFloat(et.price)||0,quantity:parseInt(et.quantity)||1})),AdmissionPayments:Je,calculated:Pe.calculated,admissionRecord:Pe.admissionRecord,patient:Pe.bill.Patient?{id:Pe.bill.Patient.id,name:Pe.bill.Patient.name,admission_date:Pe.bill.Patient.admission_date,discharge_date:Pe.bill.Patient.discharge_date,token:Pe.bill.Patient.patient_token_number||Pe.bill.Patient.token,insurance_type:Pe.bill.Patient.insurance_type}:void 0}),rt&&rt.ok){const et=await rt.json();N(et.name||""),T(et.address||""),O(et.notes||""),P(et.upi_id||"")}try{const et=await ue(`/api/patients/${t}/admission-payments`);if(et.ok){const ut=await et.json();F(ut)}}catch(et){console.error("Failed to fetch payment history:",et)}if(mt&&mt.ok){const ut=((await mt.json()).bills||[]).filter(vt=>vt.type==="admission"&&vt.id!==e).map(vt=>{var lt,Tt;const Ce=vt.AdmissionRecord;return{id:vt.id,amount:Ce?parseFloat(Ce.total_amount):parseFloat(vt.amount)||0,status:Ce?Ce.balance<=0||Ce.status==="discharged"&&Ce.balance<=0?"paid":"pending":vt.status,created_at:vt.createdAt||vt.created_at,admission_date:Ce?Ce.admission_date:((lt=vt.Patient)==null?void 0:lt.admission_date)||vt.admission_date,discharge_date:Ce?Ce.discharge_date:((Tt=vt.Patient)==null?void 0:Tt.discharge_date)||vt.discharge_date,admissionRecord:Ce}});z(ut);const _t=ut.filter(vt=>vt.admissionRecord?vt.admissionRecord.balance>0:vt.status!=="paid").reduce((vt,Ce)=>Ce.admissionRecord?vt+(typeof Ce.admissionRecord.balance=="string"?parseFloat(Ce.admissionRecord.balance):Ce.admissionRecord.balance):vt+Ce.amount,0);je(_t)}}catch(Ke){console.error("Failed to fetch admission bill details:",Ke),c(Ke instanceof Error?Ke.message:"An unknown error occurred")}finally{o(!1)}})()},[e,t]),b.useEffect(()=>{(async()=>{if(!e){if(!t){c("Patient ID is missing."),o(!1);return}try{o(!0);const Ke=await ue(`/api/patients/${t}`);if(Ke.ok){const rt=await Ke.json();if(rt){if(rt.admission_date&&!rt.discharge_date){const Pe=await ue(`/api/patients/${t}/active-bill?type=admission`);if(Pe.ok){const Je=await Pe.json();if(Je&&Je.id){n(`/patient/${t}/admission-bill/${Je.id}`,{replace:!0});return}}}a({id:0,patient_id:rt.id,type:"admission",amount:"0",status:"pending",created_at:new Date().toISOString(),AdmissionPayments:[],calculated:{totalPaid:0,totalDue:0,balance:0,daysStayed:0,perDayCharge:0},patient:{id:rt.id,name:rt.name,admission_date:rt.admission_date,discharge_date:rt.discharge_date,token:rt.token,insurance_type:rt.insurance_type}});const mt=await ue(`/api/bills?patientId=${t}`);if(mt.ok){const Je=((await mt.json()).bills||[]).filter(et=>et.type==="admission").map(et=>{var _t,vt;const ut=et.AdmissionRecord;return{id:et.id,amount:ut?parseFloat(ut.total_amount):parseFloat(et.amount)||0,status:ut?ut.balance<=0||ut.status==="discharged"&&ut.balance<=0?"paid":"pending":et.status,created_at:et.createdAt||et.created_at,admission_date:ut?ut.admission_date:((_t=et.Patient)==null?void 0:_t.admission_date)||et.admission_date,discharge_date:ut?ut.discharge_date:((vt=et.Patient)==null?void 0:vt.discharge_date)||et.discharge_date,admissionRecord:ut}});z(Je)}}else c("Patient not found")}}catch(Ke){console.error("Error fetching patient status:",Ke),c("Failed to load patient details")}finally{o(!1)}}})()},[t,e,n]);const Oe=async()=>{if(t){v(!0);try{const Ee=await ue(`/api/patients/${t}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Ee.ok){const rt=await Ee.json();throw new Error(rt.message||"Failed to admit patient")}const Ke=await Ee.json();Ke.bill&&Ke.bill.id?n(`/patient/${t}/admission-bill/${Ke.bill.id}`):window.location.reload()}catch(Ee){c(Ee instanceof Error?Ee.message:"Failed to admit patient"),v(!1)}}},Ye=async()=>{if(t&&window.confirm("Are you sure you want to discharge this patient? This will finalize the bill.")){v(!0);try{const Ee=await ue(`/api/patients/${t}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Ee.ok){const Ke=await Ee.json();throw new Error(Ke.message||"Failed to discharge patient")}window.location.reload()}catch(Ee){c(Ee instanceof Error?Ee.message:"Failed to discharge patient"),v(!1)}}},Me=((Q=i==null?void 0:i.patient)==null?void 0:Q.admission_date)&&!((ie=i==null?void 0:i.patient)!=null&&ie.discharge_date),Ie=!!((ge=i==null?void 0:i.patient)!=null&&ge.discharge_date);b.useEffect(()=>{var rt,mt;const Ke=Number(((rt=i==null?void 0:i.calculated)==null?void 0:rt.balance)??((mt=i==null?void 0:i.admissionRecord)==null?void 0:mt.balance)??0)+le;if(Ke>0&&k){const Pe=`upi://pay?pa=${k}&pn=${encodeURIComponent(S||"Clinic")}&am=${Ke.toFixed(2)}&cu=INR`;$(Pe)}else $("")},[i,le,k,S]);const be=H.reduce((Ee,Ke)=>Ee+Ke.amount,0),re=async Ee=>{var Pe,Je;Ee.preventDefault();const rt=Number(((Pe=i==null?void 0:i.calculated)==null?void 0:Pe.balance)??((Je=i==null?void 0:i.admissionRecord)==null?void 0:Je.balance)??0)+le,mt=L?be:parseFloat(d);if(!t||mt<=0||mt>rt+.1){c(`Please enter a valid amount. Max payable: ${rt.toFixed(2)}`);return}c(null),v(!0);try{if(L){for(const _t of H)if(_t.amount>0){const vt=await ue(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:_t.amount,payment_mode:_t.method})});if(!vt.ok){const Ce=await vt.json();throw new Error(Ce.message||`Failed to record ${_t.method} payment`)}}}else{const _t=await ue(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(d),payment_mode:p})});if(!_t.ok){const vt=await _t.json();throw new Error(vt.message||`HTTP error! status: ${_t.status}`)}}const ut=await(await ue(`/api/bills/${e}`)).json();if(ut&&ut.bill&&ut.calculated&&ut.admissionPayments)a({...ut.bill,amount:parseFloat(ut.bill.amount),AdmissionPayments:ut.admissionPayments,calculated:ut.calculated,patient:ut.bill.Patient?{id:ut.bill.Patient.id,name:ut.bill.Patient.name,admission_date:ut.bill.Patient.admission_date,discharge_date:ut.bill.Patient.discharge_date,token:ut.bill.Patient.token,insurance_type:ut.bill.Patient.insurance_type}:void 0});else throw new Error("Invalid data structure received after payment submission.");f(""),y("cash"),L&&(te([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),V(!1)),setTimeout(()=>{window.print()},100)}catch(et){console.error("Failed to submit payment:",et),c(et instanceof Error?et.message:"Failed to record payment")}finally{v(!1)}},ve=()=>{window.print()};if(s)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsx("main",{className:"order-content",children:r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]})}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]})]})]})})]})]})});if(l)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>n(-1),className:"back-button",children:r.jsx(nn,{size:20})}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"error-message-box",children:["Error: ",l]})]})});if(!i||!i.calculated)return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"error-message-box",children:"No bill details found or data is incomplete."})});const ce=Number(i.calculated&&i.calculated.balance!==void 0?i.calculated.balance:i.admissionRecord?i.admissionRecord.balance:0),fe=i.status==="paid"||ce<=0;return r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"ADMISSION BILL"}),r.jsx("h2",{className:"clinic-name-print",children:S||"Hospital"}),(_||C)&&r.jsxs("div",{className:"clinic-details-print",children:[_&&r.jsx("span",{className:"small-text clinic-address",children:_}),C&&r.jsx("span",{className:"small-text clinic-notes",children:C})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient"]})," ",((ee=i.patient)==null?void 0:ee.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",((we=i.patient)==null?void 0:we.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Date"]})," ",new Date(i.created_at).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[r.jsx(nn,{size:20}),r.jsx("span",{children:"Back"})]}),r.jsx("h1",{children:"Admission Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{children:"Patient Information"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[!Me&&!Ie&&r.jsxs("button",{onClick:Oe,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(FS,{size:16})," Admit Patient"]}),Me&&r.jsxs("button",{onClick:Ye,disabled:x,className:"secondary-button",style:{fontSize:"0.85em",padding:"6px 12px",background:"#dc3545",color:"white"},children:[r.jsx(LX,{size:16})," Discharge"]}),Ie&&r.jsxs("button",{onClick:Oe,disabled:x,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[r.jsx(gJ,{size:16})," Re-Admit"]})]})]}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",((Ue=i.patient)==null?void 0:Ue.name)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",((Ge=i.patient)==null?void 0:Ge.token)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(jQ,{size:16})," Bill ID"]})," ",i.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Created"]})," ",new Date(i.created_at).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Admission Charges Breakdown"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsxs("tbody",{children:[i.admissionRecord?r.jsxs(r.Fragment,{children:[r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Number(i.admissionRecord.admission_charge).toFixed(2)]}),r.jsxs("td",{children:["",Number(i.admissionRecord.admission_charge).toFixed(2)]})]}),i.admissionRecord.days_stayed?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(i.admissionRecord.admission_date).toLocaleDateString(),i.admissionRecord.discharge_date?` - ${new Date(i.admissionRecord.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[i.admissionRecord.days_stayed," days"]}),r.jsxs("td",{children:["",Number(i.admissionRecord.per_day_charge).toFixed(2)]}),r.jsxs("td",{children:["",(Number(i.admissionRecord.days_stayed)*Number(i.admissionRecord.per_day_charge)).toFixed(2)]})]}):i.calculated.daysStayed&&i.calculated.perDayCharge&&i.calculated.perDayCharge>0?r.jsxs("tr",{children:[r.jsx("td",{children:"2"}),r.jsxs("td",{children:["Per Day Charges (Ongoing)",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(i.admissionRecord.admission_date).toLocaleDateString()," - Today)"]})]}),r.jsxs("td",{children:[i.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",i.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(i.calculated.daysStayed*i.calculated.perDayCharge).toFixed(2)]})]}):null]}):r.jsxs(r.Fragment,{children:[i.items&&i.items.length>0?i.items.map((Ee,Ke)=>r.jsxs("tr",{children:[r.jsx("td",{children:Ke+1}),r.jsx("td",{children:Ee.name}),r.jsx("td",{children:Ee.quantity}),r.jsxs("td",{children:["",Ee.price.toFixed(2)]}),r.jsxs("td",{children:["",(Ee.price*Ee.quantity).toFixed(2)]})]},`item-${Ke}`)):r.jsxs("tr",{children:[r.jsx("td",{children:"1"}),r.jsx("td",{children:"Initial Admission Charge"}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",parseFloat(i.amount).toFixed(2)]}),r.jsxs("td",{children:["",parseFloat(i.amount).toFixed(2)]})]}),i.calculated.daysStayed&&i.calculated.perDayCharge&&i.calculated.perDayCharge>0&&r.jsxs("tr",{children:[r.jsx("td",{children:(((Le=i.items)==null?void 0:Le.length)||1)+1}),r.jsxs("td",{children:["Per Day Charges",r.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",(oe=i.patient)!=null&&oe.admission_date?new Date(i.patient.admission_date).toLocaleDateString():"",(_e=i.patient)!=null&&_e.discharge_date?` - ${new Date(i.patient.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),r.jsxs("td",{children:[i.calculated.daysStayed," days"]}),r.jsxs("td",{children:["",i.calculated.perDayCharge.toFixed(2)]}),r.jsxs("td",{children:["",(i.calculated.daysStayed*i.calculated.perDayCharge).toFixed(2)]})]})]}),r.jsxs("tr",{className:"subtotal-row current-admission-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Current Admission Total"}),r.jsxs("td",{children:["",Number((($e=i.calculated)==null?void 0:$e.totalDue)??((ze=i.admissionRecord)==null?void 0:ze.total_amount)??0).toFixed(2)]})]}),G.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("tr",{className:"section-header-row previous-admissions-header",children:r.jsx("td",{colSpan:5,style:{fontWeight:600,textAlign:"center"},children:"Previous Admissions"})}),G.map((Ee,Ke)=>r.jsxs("tr",{className:Ee.status!=="paid"?"bill-row-unpaid":"bill-row-paid",children:[r.jsx("td",{children:Ke+1}),r.jsxs("td",{children:["Admission - ",Ee.admission_date?new Date(Ee.admission_date).toLocaleDateString():"N/A",Ee.discharge_date&&r.jsxs("small",{style:{display:"block",color:"inherit",opacity:.8,fontSize:"0.75em"},children:["Discharged: ",new Date(Ee.discharge_date).toLocaleDateString()]})]}),r.jsx("td",{children:"1"}),r.jsxs("td",{children:["",Ee.amount.toFixed(2)]}),r.jsxs("td",{className:Ee.status!=="paid"?"text-danger":"text-success",children:["",Ee.amount.toFixed(2),Ee.status==="paid"&&r.jsx("small",{style:{marginLeft:"4px"},children:"(Paid)"})]})]},Ee.id)),le>0&&r.jsxs("tr",{className:"subtotal-row unpaid-balance-row",children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Previous Unpaid Balance"}),r.jsxs("td",{children:["",le.toFixed(2)]})]})]}),r.jsxs("tr",{className:`grand-total-row-dynamic ${le>0?"grand-total-unpaid":"grand-total-paid"}`,children:[r.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"GRAND TOTAL"}),r.jsxs("td",{style:{fontSize:"1.1em"},children:["",(Number(((Y=i.calculated)==null?void 0:Y.totalDue)??((ye=i.admissionRecord)==null?void 0:ye.total_amount)??0)+le).toFixed(2)]})]})]})]})]}),I.length>0&&r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Payment History"})}),r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DATE"}),r.jsx("th",{children:"MODE"}),r.jsx("th",{children:"AMOUNT"})]})}),r.jsx("tbody",{children:I.map((Ee,Ke)=>{var rt;return r.jsxs("tr",{children:[r.jsx("td",{children:Ke+1}),r.jsx("td",{children:Ee.payment_date?new Date(Ee.payment_date).toLocaleDateString():"N/A"}),r.jsx("td",{style:{textTransform:"capitalize"},children:((rt=Ee.payment_mode)==null?void 0:rt.replace(/_/g," "))||"N/A"}),r.jsxs("td",{children:["",(Number(Ee.amount_paid)||0).toFixed(2)]})]},Ee.id)})})]})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",Number(((pe=i.calculated)==null?void 0:pe.totalDue)??((me=i.admissionRecord)==null?void 0:me.total_amount)??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["",Number(((Ne=i.calculated)==null?void 0:Ne.totalPaid)??((Be=i.admissionRecord)==null?void 0:Be.total_paid)??0).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Balance Due: ",ce.toFixed(2)]})})]}),B&&ce>0&&r.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[r.jsx(ua,{value:B,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Due"}),r.jsxs("span",{children:["",(i.calculated.totalDue||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Days Stayed"}),r.jsx("span",{children:i.calculated.daysStayed??0})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{style:{color:"#28a745"},children:["",(i.calculated.totalPaid||0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Balance Due"}),r.jsxs("strong",{style:{color:ce>0?"#dc3545":"#28a745"},children:["",ce.toFixed(2)]})]}),G.length>0&&r.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #dee2e6"},children:[r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",color:"#495057"},children:"Previous Admissions"}),G.map(Ee=>r.jsxs("div",{className:"summary-row",style:{fontSize:"0.8rem"},children:[r.jsxs("span",{style:{color:"#6c757d"},children:[Ee.admission_date?new Date(Ee.admission_date).toLocaleDateString():"N/A",Ee.status!=="paid"&&r.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"(Unpaid)"})]}),r.jsxs("span",{style:{color:Ee.status!=="paid"?"#dc3545":"#28a745"},children:["",Ee.amount.toFixed(2)]})]},Ee.id)),le>0&&r.jsxs("div",{className:"summary-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e9ecef"},children:[r.jsx("strong",{style:{color:"#dc3545",fontSize:"0.875rem"},children:"Previous Balance"}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",le.toFixed(2)]})]})]}),le>0&&r.jsxs("div",{className:"summary-row grand-total-row",style:{marginTop:"0.75rem",background:"#fff3cd"},children:[r.jsx("strong",{style:{color:"#856404"},children:"Total Outstanding"}),r.jsxs("strong",{style:{color:"#856404"},children:["",(ce+le).toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:B&&ce>0?r.jsxs(r.Fragment,{children:[r.jsx(ua,{value:B,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):ce<=0?r.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#28a745"},children:[r.jsx(cv,{size:48}),r.jsx("p",{style:{marginTop:"10px",fontWeight:600},children:"Fully Paid"})]}):r.jsx("p",{children:"UPI QR code not available."})}),!fe&&r.jsxs("form",{onSubmit:re,children:[r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Details"})}),r.jsxs("button",{type:"button",onClick:()=>V(!L),disabled:x,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:L?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:L?"rgba(79, 172, 254, 0.1)":"transparent",color:L?"#4facfe":"#666",cursor:x?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Mc,{size:14}),"Split"]})]}),L?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",be.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:H.map((Ee,Ke)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:Ke+1}),r.jsxs("select",{value:Ee.method,onChange:rt=>W(Ee.id,"method",rt.target.value),className:"split-payment-select",disabled:x,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Ee.amount||"",onChange:rt=>W(Ee.id,"amount",parseFloat(rt.target.value)||0),className:"split-payment-input",disabled:x})]}),H.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>ae(Ee.id,ce+le),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining balance",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>q(Ee.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},Ee.id))}),H.length<5&&r.jsxs("button",{type:"button",onClick:X,className:"split-payment-add-btn",disabled:x,children:[r.jsx(ur,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Max Payable:"}),r.jsxs("span",{style:{fontWeight:600},children:["",(ce+le).toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${be<=ce+le+.1?"balanced":"unbalanced"}`,children:[r.jsx("span",{className:"split-payment-status-icon",children:be<=ce+le+.1?"":"Warning"}),r.jsxs("span",{className:"split-payment-status-amount",children:["Paying: ",be.toFixed(2)]})]}),be>ce+le+.1&&r.jsx("div",{className:"split-payment-warning",children:" Amount exceeds balance!"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"payment-input-group",style:{marginBottom:"15px"},children:[r.jsx("label",{htmlFor:"paymentAmount",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Amount ()"}),r.jsx("input",{type:"number",id:"paymentAmount",value:d,onChange:Ee=>f(Ee.target.value),placeholder:`Max ${(ce+le).toFixed(2)}`,min:"0.01",step:"0.01",max:ce+le,className:"payment-mode-select",required:!0})]}),r.jsxs("div",{className:"payment-input-group",children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",style:{display:"block",marginBottom:"5px"},children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",value:p,onChange:Ee=>y(Ee.target.value),className:"payment-mode-select",disabled:K,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),K&&r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"})]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{type:"button",onClick:ve,className:"secondary-button print-preview-button",children:"Print Preview"}),r.jsx("button",{type:"submit",className:"primary-button",disabled:x||!L&&(!d||parseFloat(d)<=0||parseFloat(d)>ce+le)||L&&(be<=0||be>ce+le+.1),children:x?"Processing...":"Record Payment & Print"})]})]}),fe&&r.jsx("div",{className:"bill-actions",children:r.jsx("button",{onClick:ve,className:"secondary-button",children:"Print Bill"})})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for choosing our hospital!"}),r.jsx("p",{children:"This is a computer-generated bill and does not require a signature."})]})]})})},uIe=t=>{switch(t){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},dIe=()=>{const{orderId:t}=Oi(),e=Mt(),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,d]=b.useState(!1),[f,p]=b.useState({}),[y,x]=b.useState(""),[v,S]=b.useState(""),[N,_]=b.useState("cash"),T=b.useMemo(()=>(n==null?void 0:n.medications.reduce((L,V)=>{const H=V.total_price??0,te=H*(V.discount_percentage??0)/100;return L+H-te},0))??0,[n==null?void 0:n.medications]),C=5,O=b.useMemo(()=>!n||!n.medications?0:n.medications.reduce((L,V,H)=>{var G,z;const te=V.drug_id??`index-${H}`,X=((G=f[te])==null?void 0:G.pack)||0,q=((z=f[te])==null?void 0:z.loose)||0,W=V.pack_price??0,ae=V.loose_price??0;return L+X*W+q*ae},0),[n,f]),k=b.useCallback(async()=>{if(!t){l("Order ID is missing."),s(!1);return}s(!0),l(null);try{const L=await ue(`/api/pharmacy-orders/${t}`);if(!L.ok)throw L.status===404?new Error(`Order with ID ${t} not found.`):new Error(`Failed to fetch order details: ${L.statusText} (${L.status})`);const V=await L.json();console.log("Fetched order data after return:",V);const te=V.medications.map(q=>q.pack_price&&q.loose_price&&q.loose_price>0?{...q,unitsPerPack:Math.round(q.pack_price/q.loose_price)}:{...q,unitsPerPack:0}).map(q=>({...q,discount_percentage:q.discount_percentage??0}));i({...V,medications:te});const X={};te.forEach((q,W)=>{const ae=q.drug_id??`index-${W}`;X[ae]={pack:0,loose:0}}),p(X)}catch(L){console.error("Failed to fetch order details:",L),l(L.message||"Failed to load order details.")}finally{s(!1)}},[t]);b.useEffect(()=>{k()},[k]),b.useEffect(()=>{(async()=>{try{const V=await ue("/api/clinics/settings");if(!V.ok)throw new Error("Failed to fetch clinic settings");const H=await V.json();console.log("Fetched clinic settings:",H),x(H.upi_id||"")}catch(V){console.error("Error fetching clinic settings:",V)}})()},[]),b.useEffect(()=>{if((n==null?void 0:n.order_total)!==void 0&&n.order_total>0&&y){const L=`upi://pay?pa=${y}&pn=ClinicName&am=${n.order_total.toFixed(2)}&cu=INR`;S(L)}else S("")},[n==null?void 0:n.order_total,y]);const P=(L,V)=>{i(H=>{if(!H)return null;const te=H.medications.map((q,W)=>(q.drug_id??`index-${W}`)===L?{...q,discount_percentage:isNaN(V)?0:V}:q),X=te.reduce((q,W)=>{const ae=W.total_price??0,G=ae*(W.discount_percentage??0)/100;return q+ae-G},0);return{...H,medications:te,order_total:X}})},I=(L,V,H)=>{p(te=>{const X=H.unitsPerPack||0,W=H.pack_quantity*X+H.loose_quantity,ae=Math.max(0,Math.min(V,W));let G=0,z=ae;return X>0&&(G=Math.floor(ae/X),z=ae%X),{...te,[L]:{pack:G,loose:z}}})},F=async()=>{const L=n==null?void 0:n.medications.map((V,H)=>{var W,ae;const te=V.drug_id??`index-${H}`,X=((W=f[te])==null?void 0:W.pack)||0,q=((ae=f[te])==null?void 0:ae.loose)||0;return X>0||q>0?{drug_id:V.drug_id,name:V.name,pack_quantity:V.pack_quantity,loose_quantity:V.loose_quantity,returnPackQuantity:X,returnLooseQuantity:q}:null}).filter(V=>V!==null);if(!L||L.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!t){alert("Order ID is missing. Cannot process return.");return}if(!L){alert("Could not prepare items for return.");return}d(!0),l(null);try{const V=await ue(`/api/pharmacy-orders/${t}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:L})}),H=await V.json();if(!V.ok)throw new Error(H.message||`Failed to process return: ${V.statusText}`);const te={};n==null||n.medications.forEach((X,q)=>{const W=X.drug_id??`index-${q}`;te[W]={pack:0,loose:0}}),p(te),k()}catch(V){console.error("Failed to process return:",V),l(V.message||"An error occurred while processing the return."),alert(`Error processing return: ${V.message||"Unknown error"}`)}finally{d(!1)}};if(a)return r.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(o)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(nn,{size:14,className:"mr-1.5"})," Back"]}),r.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",o]})]});if(!n)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(nn,{size:14,className:"mr-1.5"})," Back"]}),r.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const B=()=>{window.print()},$=uIe(n.status);return r.jsx("div",{className:"pharmacy-order-details-page",children:r.jsxs("div",{className:"order-details-container printable-section",children:[r.jsxs("div",{className:"order-details-header no-print",children:[r.jsx("h1",{children:"Pharmacy Order Details"}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(nn,{size:20})}),r.jsxs("button",{onClick:B,className:"print-button",children:[r.jsx(Av,{size:18})," Print Bill"]})]})]}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{children:"Mahajan Pharmacy"}),r.jsxs("div",{className:"clinic-details-print",children:[r.jsx("span",{className:"small-text clinic-address",children:"D.No: 3-1-289, Plot No. 101, Kabela Center, RR Nagar, Vijayawada  520012."}),r.jsx("span",{className:"small-text clinic-notes",children:"Phone: 93919 44733"}),r.jsx("span",{className:"small-text clinic-license",children:"Licence No:RLF20AP2025003328"})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Patient Name:"})," RESHMA"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Token:"})," 12"]}),r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Order Date:"})," 31/10/2025"]})]})]}),r.jsxs("div",{className:"order-info-section no-print",children:[r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Order ID:"})," ",n.id]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Patient:"})," ",n.patientName||"N/A"," (",n.patientTokenNumber||"N/A",")"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleString()]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Prescribed By:"})," ",n.prescribedBy||"N/A"]}),r.jsxs("div",{className:"order-info-item",children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:`status-pill ${$.text} ${$.bg}`,children:n.status})]})]}),r.jsxs("div",{className:"medications-section",children:[r.jsx("h2",{children:"Medications Ordered"}),n.medications.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"PACK QTY"}),r.jsx("th",{children:"PACK PRICE"}),r.jsx("th",{children:"LOOSE QTY"}),r.jsx("th",{children:"LOOSE PRICE"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"no-print",children:"RETURN PACK QTY"}),r.jsx("th",{className:"no-print",children:"RETURN LOOSE QTY"})]})]})}),r.jsx("tbody",{children:n.medications.map((L,V)=>{var G,z;const H=L.drug_id??`index-${V}`,te=L.total_price??0,X=te*(L.discount_percentage??0)/100,q=te-X,W=((G=f[H])==null?void 0:G.pack)||0,ae=((z=f[H])==null?void 0:z.loose)||0;return r.jsxs("tr",{children:[r.jsx("td",{children:L.name}),r.jsx("td",{children:L.pack_quantity??0}),r.jsx("td",{children:L.pack_price!=null?Number(L.pack_price).toFixed(2):"N/A"}),r.jsx("td",{children:L.loose_quantity??0}),r.jsx("td",{children:L.loose_price!=null?Number(L.loose_price).toFixed(2):"N/A"}),r.jsx("td",{children:L.price!=null?Number(L.price).toFixed(2):"N/A"})," ",r.jsx("td",{children:L.price!=null?Number(L.price).toFixed(2):"N/A"})," ",r.jsxs("td",{children:[r.jsx("input",{type:"number",value:L.discount_percentage??0,onChange:le=>P(H,parseFloat(le.target.value)),min:"0",max:"100",className:"discount-input-table no-print"}),r.jsxs("span",{className:"print-only",children:[L.discount_percentage??0,"%"]})]}),r.jsxs("td",{children:[C.toFixed(1),"%"]}),r.jsx("td",{children:q.toFixed(2)}),(n.status==="dispensed"||n.status==="billed")&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:L.pack_quantity,value:W,onChange:le=>{const K=(parseInt(le.target.value,10)||0)*(L.unitsPerPack||0)+ae;I(H,K,L)},className:"return-quantity-input"})}),r.jsx("td",{className:"no-print",children:r.jsx("input",{type:"number",min:"0",max:L.loose_quantity+L.pack_quantity*(L.unitsPerPack||0)-W*(L.unitsPerPack||0),value:ae,onChange:le=>{const je=parseInt(le.target.value,10)||0,K=W*(L.unitsPerPack||0)+je;I(H,K,L)},className:"return-quantity-input"})})]})]},H)})})]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",T.toFixed(2)]})}),r.jsxs("div",{className:"order-total-section no-print",children:[r.jsx("span",{className:"total-label",children:"Order Total:"}),r.jsxs("span",{className:"total-amount",children:["",T.toFixed(2)]})]}),r.jsxs("div",{className:"payment-section no-print",children:[r.jsxs("div",{className:"payment-mode-group",children:[r.jsx("label",{htmlFor:"paymentMode",children:"Payment Mode:"}),r.jsxs("select",{id:"paymentMode",value:N,onChange:L=>_(L.target.value),className:"payment-mode-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),r.jsx("option",{value:"credit",children:"Credit"})]})]}),v&&r.jsxs("div",{className:"qr-code-container",children:[r.jsx(ua,{value:v,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]})]}),(n.status==="dispensed"||n.status==="billed")&&n.medications.length>0&&r.jsxs("div",{className:"return-action-section no-print",children:[O>0&&r.jsxs("div",{className:"total-refund-display",children:["Total Refund: ",O.toFixed(2)]}),r.jsx("button",{onClick:F,disabled:Object.values(f).every(L=>L.pack===0&&L.loose===0)||c,className:"process-return-button",children:c?r.jsxs(r.Fragment,{children:[r.jsx(xE,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(xE,{size:16,className:"mr-2"})," Process Return"]})})]})]})})},hIe=async()=>{const t=await ue("/subscriptions");if(!t.ok)throw new Error("Failed to fetch subscription plans");return await t.json()},fIe=async t=>{const e=await ue(`/subscriptions/${t}`);if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(n.message||"Failed to fetch subscription plan details")}return await e.json()},pIe=async t=>{const e=await ue("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(n.message||"Failed to create subscription plan")}return await e.json()},mIe=async(t,e)=>{const n=await ue(`/subscriptions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const i=await n.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(i.message||"Failed to update subscription plan")}return await n.json()},gIe=async t=>{const e=await ue(`/subscriptions/${t}`,{method:"DELETE"});if(!e.ok){const n=await e.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(n.message||"Failed to deactivate subscription plan")}return await e.json()},yIe=async(t,e)=>{const n=await ue("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:t,planId:e})});if(!n.ok){const i=await n.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(i.message||"Failed to initiate Razorpay subscription")}return await n.json()},xIe=()=>{const t=Mt(),[e,n]=b.useState([]),[i,a]=b.useState(!1),[s,o]=b.useState(null),[l,c]=b.useState(null),d=b.useCallback(async()=>{a(!0),o(null);try{const p=await hIe();n(p)}catch(p){o(p.message||"Failed to fetch subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{a(!1)}},[]);b.useEffect(()=>{d()},[d]),b.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){a(!0),o(null),c(null);try{await gIe(p),c({type:"success",message:"Plan deactivated successfully!"}),d()}catch(y){o(y.message||"Failed to deactivate plan."),c({type:"error",message:y.message||"Failed to deactivate plan."})}finally{a(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ol,{size:18,className:"mr-2 text-green-500"}):r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(qt,{size:16})})]}),r.jsxs("div",{children:[" ",r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(nn,{size:16})}),r.jsx("h1",{children:"Manage Subscription Plans"}),r.jsxs("button",{onClick:()=>t("/dashboard/subscriptions/add"),className:"subscription-btn",children:[r.jsx(ur,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),i&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(Z,{width:80,height:32})})]},p))})]})}),!i&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(Ia,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:i,children:r.jsx(Wn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!i&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},vIe=()=>{const t=Mt(),[e,n]=b.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[i,a]=b.useState(!1),[s,o]=b.useState(null),[l,c]=b.useState(null);b.useEffect(()=>{if(l){const y=setTimeout(()=>c(null),5e3);return()=>clearTimeout(y)}},[l]);const d=y=>{const{name:x,value:v}=y.target;n(S=>({...S,[x]:v}))},f=async y=>{if(y.preventDefault(),a(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),a(!1);return}try{await pIe(e),c({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/subscriptions")},2e3)}catch(x){const v=x.message||"Failed to create plan.";o(v),c({type:"error",message:v})}finally{a(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ol,{size:18,className:"mr-2 text-green-500"}):r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(qt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:d,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:d,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:d,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:d,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:d})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:r.jsx(nn,{size:16})}),r.jsxs("button",{type:"submit",disabled:i,className:"subscription-btn",children:[i?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,i?"Creating...":"Create Plan"]})]})]})]})]})},bIe=()=>{const{id:t}=Oi(),e=Mt(),[n,i]=b.useState(null),[a,s]=b.useState({}),[o,l]=b.useState(!1),[c,d]=b.useState(!0),[f,p]=b.useState(null),[y,x]=b.useState(null),v=b.useCallback(async()=>{if(!t){p("Plan ID is missing."),d(!1);return}d(!0),p(null);try{const T=await fIe(t);i(T),s({name:T.name,description:T.description||"",price:T.price,period:T.period,interval:T.interval,razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{d(!1)}},[t]);b.useEffect(()=>{v()},[v]),b.useEffect(()=>{if(y){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[y]);const S=T=>{const{name:C,value:O}=T.target;s(k=>({...k,[C]:O}))},N=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!a.name||!a.price||!a.period||a.interval===void 0||a.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await mIe(t,a),x({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const O=C.message||"Failed to update plan.";p(O),x({type:"error",message:O})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[y&&r.jsxs("div",{className:`${y.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[y.type==="success"?r.jsx(Ol,{size:18,className:"mr-2"}):r.jsx(Xr,{size:18,className:"mr-2"}),r.jsx("span",{children:y.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(qt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:N,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:a.name||"",onChange:S,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:a.description||"",onChange:S})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:a.price!==void 0?a.price:"",onChange:S,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:a.period||"monthly",onChange:S,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:a.interval||1,onChange:S,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:a.razorpay_plan_id||"",onChange:S})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:a.status||"active",onChange:S,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:r.jsx(nn,{size:16})}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},jIe=()=>{const{patientId:t}=Oi(),e=Mt(),[n,i]=b.useState(null),[a,s]=b.useState([]),[o,l]=b.useState(""),[c,d]=b.useState(!0),[f,p]=b.useState(null),[y,x]=b.useState("manual"),[v,S]=b.useState(!1),[N,_]=b.useState(null),T=b.useCallback(async()=>{d(!0),p(null);try{const k=await ue(`/api/patients/${t}`);if(!k.ok){const B=await k.json();throw new Error(B.message||"Failed to fetch patient details")}const P=await k.json();i(P);const I=await ue("/api/subscriptions");if(!I.ok){const B=await I.json();throw new Error(B.message||"Failed to fetch subscription plans")}const F=await I.json();s(F.filter(B=>B.status==="active"))}catch(k){console.error("Error fetching data:",k),p(`Failed to load data: ${k.message}`)}finally{d(!1)}},[t]);b.useEffect(()=>{t?T():(p("Patient ID is missing."),d(!1))},[t,T]);const C=(k,P)=>{const I=new Date(k),F=P.interval||1;switch(P.period){case"daily":I.setDate(k.getDate()+F);break;case"weekly":I.setDate(k.getDate()+F*7);break;case"monthly":I.setMonth(k.getMonth()+F);break;case"yearly":I.setFullYear(k.getFullYear()+F);break;default:console.warn(`Unknown subscription period: ${P.period}. Defaulting to 1 month.`),I.setMonth(k.getMonth()+1)}return I},O=async()=>{if(!t||!o){_("Please select a subscription plan.");return}const k=a.find(P=>P.id===o);if(!k){_("Selected plan details not found.");return}S(!0),_(null);try{const P=new Date,I=C(P,k);if(y==="manual"){const F={subscription_plan_id:o,subscription_status:"active",subscription_start_date:P.toISOString(),subscription_end_date:I.toISOString(),subscription_payment_method:"manual"},B=await ue(`/api/patients/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!B.ok){const $=await B.json();throw new Error($.message||"Failed to start subscription manually")}e("/all-patients")}else if(y==="razorpay"){console.log("Initiating Razorpay subscription for plan:",k);const F=await yIe(t,o);if(F&&F.short_url)window.location.href=F.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch(P){console.error("Error starting subscription:",P),_(`Failed to start subscription: ${P.message}`),S(!1)}};return c?r.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):f?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:f})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(nn,{size:16})})]}):n?r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(nn,{size:16})}),r.jsxs("h1",{children:[r.jsx(vr,{size:28})," ","Start Subscription for ",n.name]}),N&&r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",r.jsx("span",{children:N})]}),r.jsxs("div",{className:"subscription-form",children:[" ",r.jsx("h2",{children:"Available Subscription Plans"}),a.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:a.map(k=>r.jsxs("div",{className:`subscription-plan-card ${o===k.id?"selected-plan":""}`,onClick:()=>l(k.id),children:[r.jsx("h3",{children:k.name}),r.jsxs("p",{className:"price",children:["",k.price]}),r.jsxs("p",{className:"duration",children:["Every ",k.interval," ",k.period,k.interval>1?"s":""]}),k.description&&r.jsx("p",{children:k.description})]},k.id))})]}),r.jsxs("div",{className:"subscription-form mb-6",children:[" ",r.jsx("h2",{children:"Select Payment Method"}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:y==="manual",onChange:()=>x("manual"),className:"mr-2"}),r.jsx("span",{children:"Cash (Manual)"})]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:y==="razorpay",onChange:()=>x("razorpay"),className:"mr-2"}),r.jsx("span",{children:"Razorpay"})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:O,disabled:!o||v||a.length===0,className:"subscription-btn",children:[v&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),v?"Starting...":"Start Subscription"]})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Warning: "}),r.jsx("span",{children:"Patient not found."})]}),r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(nn,{size:16})})]})},wIe=()=>{const t=Mt(),[e,n]=b.useState([]),[i,a]=b.useState(!1),[s,o]=b.useState(null),[l,c]=b.useState(null),d=b.useCallback(async()=>{a(!0),o(null);try{const p=await CM();n(p)}catch(p){o(p.message||"Failed to fetch clinic subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{a(!1)}},[]);b.useEffect(()=>{d()},[d]),b.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){a(!0),o(null),c(null);try{await HPe(p),c({type:"success",message:"Clinic plan deactivated successfully!"}),d()}catch(y){o(y.message||"Failed to deactivate clinic plan."),c({type:"error",message:y.message||"Failed to deactivate plan."})}finally{a(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ol,{size:18,className:"mr-2 text-green-500"}):r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(qt,{size:16})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(nn,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),r.jsxs("button",{onClick:()=>t("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[r.jsx(ur,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),i&&e.length===0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3].map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{className:"text-right",children:r.jsx(Z,{width:80,height:32})})]},p))})]})}),!i&&s&&e.length===0&&r.jsx("p",{className:"text-center text-red-500",children:s}),e.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(p=>r.jsxs("tr",{children:[r.jsx("td",{children:p.name}),r.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/clinic-subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(Ia,{size:16,className:"inline-block"})}),p.status==="active"&&r.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:i,children:r.jsx(Wn,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!i&&e.length===0&&!s&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},SIe=()=>{const t=Mt(),[e,n]=b.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[i,a]=b.useState(!1),[s,o]=b.useState(null),[l,c]=b.useState(null);b.useEffect(()=>{if(l){const y=setTimeout(()=>c(null),5e3);return()=>clearTimeout(y)}},[l]);const d=y=>{const{name:x,value:v,type:S}=y.target;n(N=>({...N,[x]:S==="number"?parseFloat(v):v}))},f=async y=>{if(y.preventDefault(),a(!0),o(null),c(null),!e.name||!e.price||!e.period||e.interval===void 0||e.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),a(!1);return}try{await UPe(e),c({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/clinic-subscriptions")},2e3)}catch(x){const v=x.message||"Failed to create clinic plan.";o(v),c({type:"error",message:v})}finally{a(!1)}},p=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[l&&r.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[l.type==="success"?r.jsx(Ol,{size:18,className:"mr-2 text-green-500"}):r.jsx(Xr,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:l.message})]}),r.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(qt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Clinic Subscription Plan"}),s&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:d,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:e.description||"",onChange:d})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:e.price!==void 0?e.price:"",onChange:d,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:e.period||"monthly",onChange:d,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:e.interval||1,onChange:d,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:e.razorpay_plan_id||"",onChange:d})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:i,className:"subscription-btn",children:[i?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,i?"Creating...":"Create Plan"]})]})]})]})]})},NIe=()=>{const{id:t}=Oi(),e=Mt(),[n,i]=b.useState(null),[a,s]=b.useState({}),[o,l]=b.useState(!1),[c,d]=b.useState(!0),[f,p]=b.useState(null),[y,x]=b.useState(null),v=b.useCallback(async()=>{if(!t){p("Plan ID is missing."),d(!1);return}d(!0),p(null);try{const T=await qPe(t);i(T),s({name:T.name,description:T.description||"",price:Number(T.price),period:T.period,interval:Number(T.interval),razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch clinic plan details."),x({type:"error",message:T.message||"Failed to fetch plan details."})}finally{d(!1)}},[t]);b.useEffect(()=>{v()},[v]),b.useEffect(()=>{if(y){const T=setTimeout(()=>x(null),5e3);return()=>clearTimeout(T)}},[y]);const S=T=>{const{name:C,value:O,type:k}=T.target;s(P=>({...P,[C]:k==="number"?parseFloat(O):O}))},N=async T=>{if(T.preventDefault(),!t){p("Plan ID is missing.");return}if(l(!0),p(null),x(null),!a.name||!a.price||!a.period||a.interval===void 0||a.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await VPe(t,a),x({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{e(-1)},2e3)}catch(C){const O=C.message||"Failed to update clinic plan.";p(O),x({type:"error",message:O})}finally{l(!1)}},_=()=>{e(-1)};return c?r.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):f&&!n?r.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?r.jsxs("div",{className:"subscription-page-container",children:[y&&r.jsxs("div",{className:`${y.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[y.type==="success"?r.jsx(Ol,{size:18,className:"mr-2"}):r.jsx(Xr,{size:18,className:"mr-2"}),r.jsx("span",{children:y.message})]}),r.jsx("button",{onClick:()=>x(null),className:"ml-4",children:r.jsx(qt,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Clinic Subscription Plan"}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),r.jsxs("form",{onSubmit:N,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:a.name||"",onChange:S,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:a.description||"",onChange:S})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:a.price!==void 0?a.price:"",onChange:S,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:a.period||"monthly",onChange:S,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:a.interval!==void 0?a.interval:"",onChange:S,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:a.razorpay_plan_id||"",onChange:S})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:a.status||"active",onChange:S,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},_Ie=()=>{const t=Mt(),[e,n]=b.useState([]),[i,a]=b.useState(""),[s,o]=b.useState(!0),[l,c]=b.useState(null),[d,f]=b.useState(!1),[p,y]=b.useState(null),x=b.useCallback(async()=>{c(null);try{const N=(await CM()).filter(_=>_.status==="active");n(N),N.length>0&&!i&&a(N[0].id)}catch(S){console.error("Error fetching plans:",S),c(`Failed to load subscription plans: ${S.message}`)}},[]);b.useEffect(()=>{(async()=>{o(!0);try{const N=await WPe();if(N&&N.short_url){window.location.href=N.short_url,c("You have a pending subscription. Redirecting to payment...");return}await x()}catch(N){console.error("Error during initial page load:",N),c(`An unexpected error occurred: ${N.message}`)}finally{o(!1)}})()},[x]);const v=async()=>{if(!i){y("Please select a clinic subscription plan.");return}const S=e.find(N=>N.id===i);if(!S){y("Selected plan details not found.");return}f(!0),y(null);try{console.log("Initiating Razorpay clinic subscription for plan:",S);const N=await GPe(i);if(N&&N.short_url)window.location.href=N.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(N){console.error("Error starting clinic subscription:",N),y(`Failed to start clinic subscription: ${N.message}`),f(!1)}};return s?r.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):l?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:l})]}),r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(nn,{size:16})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(nn,{size:16})}),r.jsxs("h1",{children:[r.jsx(OQ,{size:28}),"Buy Pro Plan for Clinic"]}),p&&r.jsx("div",{className:"error-alert-subscription",role:"alert",children:r.jsx("span",{children:p})}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h2",{children:"Available Pro Plans"}),e.length===0?r.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:e.map(S=>r.jsxs("div",{className:`subscription-plan-card ${i===S.id?"selected-plan":""}`,onClick:()=>a(S.id),children:[r.jsx("h3",{children:S.name}),r.jsxs("p",{className:"price",children:["",Number(S.price).toFixed(2)]}),r.jsxs("p",{className:"duration",children:["Every ",S.interval," ",S.period,S.interval>1?"s":""]}),S.description&&r.jsx("p",{children:S.description})]},S.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:v,disabled:!i||d||e.length===0,className:"subscription-btn",children:[d&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),d?"Initiating Payment...":"Buy Pro Plan"]})})]})},CIe=()=>{const t=Mt(),[e,n]=b.useState([]),[i,a]=b.useState(!0),[s,o]=b.useState(!0),[l,c]=b.useState(null),[d,f]=b.useState(!1),[p,y]=b.useState(!1),[x,v]=b.useState(null),[S,N]=b.useState({name:"",email:"",password:"",role:"user"}),[_,T]=b.useState({name:"",email:"",role:"",password:"",confirmPassword:""}),[C,O]=b.useState(""),[k,P]=b.useState(""),[I,F]=b.useState({}),[B,$]=b.useState(!1),[L,V]=b.useState(null),[H,te]=b.useState([]),[X,q]=b.useState(""),[W,ae]=b.useState(!1),[G,z]=b.useState(null);b.useEffect(()=>{const ve=setTimeout(()=>{P(C)},500);return()=>{clearTimeout(ve)}},[C]),b.useEffect(()=>{le(k)},[k]);const le=async(ve="")=>{a(!0);try{const ce=ve?`/api/users?search=${encodeURIComponent(ve)}`:"/api/users",se=await(await ue(ce)).json();if(n(se),se.length>0){const Q=[...new Set(se.map(ge=>ge.clinic_id).filter(ge=>!!ge))],ie={};await Promise.all(Q.map(async ge=>{try{const ee=await zPe(ge);ie[ge]=ee}catch(ee){console.error(`Failed to fetch subscription status for clinic ${ge}`,ee),ie[ge]={hasProPlan:!1}}})),F(ie)}c(null)}catch(ce){c("Failed to fetch users."),console.error(ce)}finally{a(!1),o(!1)}},je=async ve=>{ve.preventDefault();try{await ue("/users",{method:"POST",body:JSON.stringify(S)}),f(!1),N({name:"",email:"",password:"",role:"user"}),le()}catch(ce){c("Failed to add user."),console.error(ce)}},K=async ve=>{if(ve.preventDefault(),!x)return;const{password:ce,confirmPassword:fe,...se}=_,Q={...se};if(ce){if(ce.length<6){c("Password must be at least 6 characters long.");return}if(ce!==fe){c("Passwords do not match.");return}Q.password=ce}try{await ue(`/users/${x.id}`,{method:"PUT",body:JSON.stringify(Q)}),y(!1),v(null),T({..._,password:"",confirmPassword:""}),le()}catch(ie){c("Failed to update user."),console.error(ie)}},Oe=async ve=>{if(window.confirm("Are you sure you want to delete this user?"))try{await ue(`/users/${ve}`,{method:"DELETE"}),le()}catch(ce){c("Failed to delete user."),console.error(ce)}},Ye=ve=>{v(ve),T({name:ve.name,email:ve.email,role:ve.role,password:"",confirmPassword:""}),y(!0)},Me=async()=>{ae(!0);try{const ve=await CM();te(ve),ve.length>0&&q(ve[0].id),z(null)}catch(ve){z("Failed to fetch subscription plans."),console.error(ve)}finally{ae(!1)}},Ie=ve=>{V(ve),$(!0),Me()},be=async ve=>{if(ve.preventDefault(),!L||!X){c("Please select a clinic and a plan.");return}try{await ue("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:L,planId:X})}),$(!1),V(null),q(""),le(),c(null)}catch(ce){c("Failed to manually activate clinic subscription."),console.error(ce)}},re=async ve=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await BPe(ve),le(),c(null)}catch(ce){c("Failed to cancel subscription."),console.error(ce)}};return i&&s?r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("div",{className:"back-button",style:{width:80,height:32},children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx(Z,{width:"100%",height:40,style:{maxWidth:"300px"}}),r.jsx(Z,{width:150,height:40})]}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(ve=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:24,style:{borderRadius:"16px"}})}),r.jsx("td",{children:r.jsx(Z,{width:150,height:32})})]},ve))})]})]}):l&&s?r.jsx("div",{className:"error-message",children:l}):r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(nn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"User Management"})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:C,onChange:ve=>O(ve.target.value),className:"search-input"}),r.jsx("button",{onClick:()=>f(!0),className:"add-user-button",children:"Add New User"})]}),d&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>f(!1),children:""}),r.jsx("h2",{children:"Add New User"}),r.jsxs("form",{onSubmit:je,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:S.name,onChange:ve=>N({...S,name:ve.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:S.email,onChange:ve=>N({...S,email:ve.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",value:S.password,onChange:ve=>N({...S,password:ve.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:S.role,onChange:ve=>N({...S,role:ve.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Add User"})]})]})}),p&&x&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>y(!1),children:""}),r.jsx("h2",{children:"Edit User"}),r.jsxs("form",{onSubmit:K,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:_.name,onChange:ve=>T({..._,name:ve.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:_.email,onChange:ve=>T({..._,email:ve.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:_.role,onChange:ve=>T({..._,role:ve.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"New Password (optional):"}),r.jsx("input",{type:"password",value:_.password,onChange:ve=>T({..._,password:ve.target.value})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm New Password:"}),r.jsx("input",{type:"password",value:_.confirmPassword,onChange:ve=>T({..._,confirmPassword:ve.target.value})})]}),r.jsx("button",{type:"submit",children:"Update User"})]})]})}),B&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>$(!1),children:""}),r.jsx("h2",{children:"Select Subscription Plan for Clinic"}),W&&r.jsx("div",{children:"Loading plans..."}),G&&r.jsx("div",{className:"error-message",children:G}),!W&&!G&&H.length===0&&r.jsx("div",{children:"No active subscription plans available."}),!W&&!G&&H.length>0&&r.jsxs("form",{onSubmit:be,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Plan:"}),r.jsx("select",{value:X,onChange:ve=>q(ve.target.value),required:!0,children:H.map(ve=>r.jsxs("option",{value:ve.id,children:[ve.name," - $",ve.price,"/",ve.interval," ",ve.period]},ve.id))})]}),r.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:e.map(ve=>{const ce=ve.clinic_id||"N/A",fe=ce!=="N/A"?I[ce]:null,se=(fe==null?void 0:fe.hasProPlan)??!1,Q=se?"PRO":"Standard";return r.jsxs("tr",{children:[r.jsx("td",{children:ve.name}),r.jsx("td",{children:ve.email}),r.jsx("td",{children:ve.role}),r.jsx("td",{children:ce}),r.jsx("td",{children:ce!=="N/A"?r.jsx("span",{className:se?"pro-badge":"standard-badge",children:Q}):"N/A"}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>Ye(ve),className:"edit-button",children:"Edit"}),r.jsx("button",{onClick:()=>Oe(ve.id),className:"delete-button",children:"Delete"}),ve.clinic_id&&!se&&r.jsx("button",{onClick:()=>Ie(ve.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),ve.clinic_id&&se&&r.jsx("button",{onClick:()=>re(ve.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},ve.id)})})]})]})},TIe="_modalOverlay_1spz3_3",kIe="_modalContent_1spz3_29",AIe="_modalHeader_1spz3_53",EIe="_modalTitle_1spz3_71",PIe="_modalCloseButton_1spz3_83",OIe="_modalBody_1spz3_111",DIe="_formGroup_1spz3_119",MIe="_inputField_1spz3_141",IIe="_errorText_1spz3_175",RIe="_successText_1spz3_193",LIe="_modalFooter_1spz3_211",FIe="_button_1spz3_227",$Ie="_buttonPrimary_1spz3_247",BIe="_buttonSecondary_1spz3_265",_a={modalOverlay:TIe,modalContent:kIe,modalHeader:AIe,modalTitle:EIe,modalCloseButton:PIe,modalBody:OIe,formGroup:DIe,inputField:MIe,errorText:IIe,successText:RIe,modalFooter:LIe,button:FIe,buttonPrimary:$Ie,buttonSecondary:BIe},zIe=({isOpen:t,onClose:e})=>{const[n,i]=b.useState(""),[a,s]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(null),[f,p]=b.useState(null);Gc(void 0,t?200:99999),b.useEffect(()=>{t&&y()},[t]);const y=async()=>{s(!0),d(null);try{const v=await ue("/api/global-settings/app_gemini_api_key");if(v.ok){const S=await v.json();i(S.value||"")}else v.status}catch(v){console.warn("Could not fetch existing key:",v)}finally{s(!1)}},x=async()=>{l(!0),d(null),p(null);try{if(!(await ue("/api/global-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"app_gemini_api_key",value:n})})).ok)throw new Error("Failed to save API Key");p("API Key updated successfully!"),setTimeout(()=>{e(),p(null)},1500)}catch(v){d(v.message||"Error saving key")}finally{l(!1)}};return t?r.jsx("div",{className:_a.modalOverlay,children:r.jsxs("div",{className:_a.modalContent,children:[r.jsxs("div",{className:_a.modalHeader,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx($z,{size:24}),r.jsx("h3",{className:_a.modalTitle,children:"App Gemini API Key"})]}),r.jsx("button",{onClick:e,className:_a.modalCloseButton,children:r.jsx(qt,{size:20})})]}),r.jsxs("div",{className:_a.modalBody,children:[c&&r.jsx("div",{className:_a.errorText,children:c}),f&&r.jsx("div",{className:_a.successText,children:f}),r.jsxs("div",{className:_a.formGroup,children:[r.jsx("label",{htmlFor:"gemini-key",children:"Gemini API Key"}),a?r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}}):r.jsx("input",{type:"text",id:"gemini-key",value:n,onChange:v=>i(v.target.value),className:_a.inputField,placeholder:"Enter Gemini API Key (AIza...)",disabled:o})]}),r.jsx("p",{style:{fontSize:"0.9em",color:"var(--secondary-text-color, #666)"},children:"This key will be used as a fallback for all clinics if their specific Gemini API key is not configured."})]}),r.jsxs("div",{className:_a.modalFooter,children:[r.jsx("button",{onClick:e,className:`${_a.button} ${_a.buttonSecondary}`,disabled:o,children:"Cancel"}),r.jsx("button",{onClick:x,className:`${_a.button} ${_a.buttonPrimary}`,disabled:o,children:o?"Saving...":"Save Key"})]})]})}):null},qIe=()=>{const[t,e]=b.useState(!1);return r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("h1",{className:"admin-panel-title",children:[r.jsx(od,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),r.jsxs("div",{className:"admin-panel-grid",children:[r.jsxs(Sr,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[r.jsx(mf,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Clinic Subscription Plans"}),r.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),r.jsxs(Sr,{to:"/dashboard/users",className:"admin-panel-card",children:[r.jsx(Eo,{size:48,className:"card-icon"}),r.jsx("h2",{children:"User Management"}),r.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]}),r.jsxs("div",{className:"admin-panel-card",onClick:()=>e(!0),style:{cursor:"pointer"},children:[r.jsx($z,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage App Gemini API Key"}),r.jsx("p",{children:"Update the fallback Gemini API key used by the application."})]})]}),r.jsx(zIe,{isOpen:t,onClose:()=>e(!1)})]})},zA="tutorialCurrentStep",UIe=({onActionComplete:t})=>{const[e,n]=b.useState(!1),[i,a]=b.useState(!1),[s,o]=b.useState(null),l=async()=>{var c,d;n(!0);try{const f=await ue("/api/drugs/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){a(!0);const y=((c=p.details)==null?void 0:c.added)||0,x=((d=p.details)==null?void 0:d.updated)||0,v=`Added: ${y}, Updated: ${x}`;o(v),t(!0,"Default medications imported successfully!","pharmacyImport")}else t(!1,"Failed to import medications.")}catch{t(!1,"Error importing medications.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"One click to populate your inventory."}),i?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Cl,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(Dc,{size:18,className:"animate-spin"})," Importing ~80 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(dw,{size:18})," Import Drugs"]})})]})},VIe=({onActionComplete:t})=>{const[e,n]=b.useState(!1),[i,a]=b.useState(!1),[s,o]=b.useState(null),l=async()=>{var c,d;n(!0);try{const f=await ue("/api/lab-tests/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){a(!0);const y=((c=p.details)==null?void 0:c.added)||0,x=((d=p.details)==null?void 0:d.updated)||0,v=`Added: ${y}, Updated: ${x}`;o(v),t(!0,"Default lab tests imported successfully!","labImport")}else t(!1,"Failed to import lab tests.")}catch{t(!1,"Error importing lab tests.")}finally{n(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Setup your lab with common tests."}),i?r.jsxs("div",{className:"success-badge flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Cl,{size:16})," Imported"]}),s&&r.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):r.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:e,children:e?r.jsxs(r.Fragment,{children:[r.jsx(Dc,{size:18,className:"animate-spin"})," Importing ~25 items..."]}):r.jsxs(r.Fragment,{children:[r.jsx(rs,{size:18})," Import Tests"]})})]})},HIe=({onOpenCommandBar:t})=>r.jsxs("div",{className:"tutorial-interactive-component center-content",children:[r.jsx("p",{className:"action-hint",children:"Ready to experience the power? Open the command bar to start."}),r.jsx("button",{onClick:t,className:"tutorial-button primary large-button",children:r.jsxs("div",{className:"flex items-center gap-2",children:["Open Command Bar ",r.jsx("span",{className:"shortcut-hint-badge",children:"Ctrl+K"})]})})]}),qA=[{title:"Welcome to Newtons Ai HMS",description:"Your all-in-one clinic management solution. Let's get your clinic ready in less than 2 minutes.",icon:r.jsx(hw,{size:48,className:"step-icon welcome"}),component:null,actionText:"Get Started"},{title:"Pharmacy Setup",description:"Start by populating your pharmacy. We can import a standard list of medicines for you.",icon:r.jsx(dw,{size:48,className:"step-icon pharmacy"}),component:UIe,actionText:"Next",showSkip:!0},{title:"Lab Configuration",description:"Next, let's set up your lab. Import common lab tests to start generating reports immediately.",icon:r.jsx(rs,{size:48,className:"step-icon lab"}),component:VIe,actionText:"Next",showSkip:!0},{title:"Power at Your Fingertips",description:"The Command Bar is your central hub for everything. Search patients, add orders, or use AI tools instantly.",icon:r.jsx(TQ,{size:48,className:"step-icon ai"}),component:HIe,actionText:null,isLast:!0}],GIe=({onClose:t,onMarkAsSeen:e})=>{const{openCommandBar:n}=Pc(),[i,a]=b.useState(()=>{const N=localStorage.getItem(zA);return N?parseInt(N,10):0}),[s,o]=b.useState(!1),[l,c]=b.useState(null),[d,f]=b.useState(null);b.useEffect(()=>{localStorage.setItem(zA,i.toString()),c(null)},[i]);const p=()=>{o(!0),setTimeout(()=>{a(N=>Math.min(N+1,qA.length-1)),o(!1)},300)},y=(N,_,T)=>{f(N),c(_),N&&(T==="pharmacyImport"||T==="labImport")&&setTimeout(p,1e3)},x=()=>{e(),t(),localStorage.removeItem(zA)},v=()=>{x(),setTimeout(()=>{n()},100)},S=qA[i];return r.jsx("div",{className:"tutorial-overlay",children:r.jsxs("div",{className:`tutorial-card ${s?"fade-out":"fade-in"}`,children:[r.jsxs("div",{className:"tutorial-visual",children:[r.jsx("div",{className:"icon-circle",children:S.icon}),r.jsx("div",{className:"step-indicators",children:qA.map((N,_)=>r.jsx("div",{className:`step-dot ${_===i?"active":""} ${_<i?"completed":""}`},_))})]}),r.jsxs("div",{className:"tutorial-content",children:[r.jsx("button",{className:"close-button",onClick:x,title:"Close Tutorial",children:r.jsx(qt,{size:20})}),r.jsxs("div",{className:"text-content",children:[r.jsx("h2",{children:S.title}),r.jsx("p",{className:"description",children:S.description})]}),r.jsxs("div",{className:"interactive-area",children:[S.component?r.jsx(S.component,{onActionComplete:y,onOpenCommandBar:v}):null,l&&r.jsx("div",{className:`status-message ${d?"success":"error"}`,children:l})]}),r.jsxs("div",{className:"action-footer",children:[S.showSkip&&r.jsx("button",{onClick:p,className:"tutorial-button text-only",children:"Skip for now"}),S.actionText&&r.jsxs("button",{onClick:p,className:"tutorial-button primary",children:[S.actionText," ",r.jsx(dd,{size:16})]})]})]})]})})},WIe=({isOpen:t,onClose:e,onSuccess:n,medication:i,initialPatient:a,initialItems:s})=>{const[o,l]=b.useState(""),[c,d]=b.useState([]),[f,p]=b.useState(null),[y,x]=b.useState(!1);Gc(void 0,t?200:99999),b.useEffect(()=>{if(t&&i){S([{id:Date.now(),medication_name:i.medicationName,drug_id:null,quantity:i.quantity,tablets_per_day:i.tabletsPerDay||1,number_of_days:i.numberOfDays||30,directions:i.directions||"",notes:i.notes||""}]),_(i.frequencyDays);try{const Ie=new Date(i.nextDeliveryDate);isNaN(Ie.getTime())||C(Ie.toISOString().split("T")[0])}catch(Ie){console.error("Error parsing date",Ie)}p({id:i.patientId,name:i.patientName,phone:i.patientPhone,patient_token_number:i.patientToken})}else t&&(a||s)?(s&&s.length>0&&S(s),a&&p(a)):t&&!i&&!s&&(S([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30),C(""),p(null),l(""))},[t,i,a,s]);const[v,S]=b.useState([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),[N,_]=b.useState(30),[T,C]=b.useState(""),[O,k]=b.useState(null),[P,I]=b.useState(""),[F,B]=b.useState([]),[$,L]=b.useState(!1),[V,H]=b.useState(!1),[te,X]=b.useState(null),q=b.useRef(null),W=b.useRef(null);b.useEffect(()=>{if(t){const Ie=new Date;Ie.setDate(Ie.getDate()+30),C(Ie.toISOString().split("T")[0])}},[t]);const ae=b.useCallback(async Ie=>{if(!Ie.trim()){d([]);return}x(!0);try{const be=await ue(`/api/patients?search=${encodeURIComponent(Ie)}&limit=10`);if(be.ok){const re=await be.json();d(re.patients||[])}}catch(be){console.error("Error searching patients:",be)}finally{x(!1)}},[]);b.useEffect(()=>{q.current&&clearTimeout(q.current),o&&!f?q.current=setTimeout(()=>ae(o),300):d([])},[o,f,ae]);const G=b.useCallback(async Ie=>{if(!Ie.trim()){B([]);return}L(!0);try{const be=await ue(`/api/drugs?search=${encodeURIComponent(Ie)}&limit=10`);if(be.ok){const re=await be.json();B(re.drugs||[])}}catch(be){console.error("Error searching drugs:",be)}finally{L(!1)}},[]);b.useEffect(()=>{W.current&&clearTimeout(W.current),P&&O!==null?W.current=setTimeout(()=>G(P),300):B([])},[P,O,G]);const z=Ie=>{if(!Ie)return 1;const be=Ie.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return be?parseInt(be[1],10):1},le=Ie=>{p(Ie),l(`${Ie.name} (${Ie.patient_token_number})`),d([])},je=(Ie,be)=>{const re=[...v];re[be]={...re[be],medication_name:Ie.name,drug_id:Ie.id,pack_size:z(Ie.pack),packs:0,loose:0,quantity:0},S(re),k(null),I(""),B([])},K=(Ie,be,re)=>{const ve=[...v],ce={...ve[Ie]},fe=ce.pack_size||1;if(be==="packs"||be==="loose"){const se=parseInt(re)||0;be==="packs"&&(ce.packs=se),be==="loose"&&(ce.loose=se);const Q=ce.packs||0,ie=ce.loose||0;ce.quantity=Q*fe+ie}else if(be==="tablets_per_day"||be==="number_of_days"){be==="tablets_per_day"&&(ce.tablets_per_day=re),be==="number_of_days"&&(ce.number_of_days=re);const se=parseFloat(ce.tablets_per_day.toString())||0,Q=parseInt(ce.number_of_days.toString())||0,ie=Math.ceil(se*Q);ce.quantity=ie,ce.packs=Math.floor(ie/fe),ce.loose=ie%fe}else ce[be]=re;ve[Ie]=ce,S(ve)},Oe=()=>{S([...v,{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:N,directions:"",notes:"",packs:0,loose:0,pack_size:1}])},Ye=Ie=>{v.length>1&&S(v.filter((be,re)=>re!==Ie))},Me=async Ie=>{if(Ie.preventDefault(),X(null),!f){X("Please select a patient.");return}if(v.some(re=>!re.medication_name||re.quantity<=0)){X("Please ensure all items have a medication name and valid quantity.");return}H(!0);try{const re={patient_id:f.id,items:v.map(ce=>({medication_name:ce.medication_name,drug_id:ce.drug_id,quantity:ce.quantity,tablets_per_day:ce.tablets_per_day,number_of_days:ce.number_of_days,directions:ce.directions,notes:ce.notes,frequency_days:N,next_delivery_date:T}))},ve=await ue("/api/recurring-medications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(re)});if(!ve.ok){const ce=await ve.json();throw new Error(ce.message+(ce.error?": "+ce.error:"")||"Failed to create recurring medication.")}n(),e(),p(null),l(""),S([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30)}catch(re){X(re.message)}finally{H(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"add-recurring-modal",style:{maxWidth:"800px",width:"95%"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Add Recurring Medication Order"}),r.jsx("button",{className:"close-btn",onClick:e,children:r.jsx(qt,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[te&&r.jsx("div",{className:"error-message",children:te}),r.jsxs("form",{onSubmit:Me,className:"recurring-form",children:[r.jsxs("div",{className:"order-settings-row",children:[r.jsxs("div",{className:"form-group",style:{flex:2},children:[r.jsxs("label",{children:[r.jsx(vr,{size:16})," Patient"]}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search patient...",value:o,onChange:Ie=>{l(Ie.target.value),p(null)},className:f?"selected":"unselected"}),y&&r.jsx("span",{className:"spinner",children:"..."}),o&&!f&&c.length>0&&r.jsx("ul",{className:"suggestions-list",children:c.map(Ie=>r.jsxs("li",{onClick:()=>le(Ie),children:[r.jsx("div",{className:"suggestion-name",children:Ie.name}),r.jsxs("div",{className:"suggestion-details",children:[Ie.phone,"  ",Ie.patient_token_number]})]},Ie.id))})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(Tb,{size:16})," Frequency"]}),r.jsxs("select",{value:N,onChange:Ie=>{const be=parseInt(Ie.target.value);_(be);const re=new Date;re.setDate(re.getDate()+be),C(re.toISOString().split("T")[0]);const ve=v.map(ce=>({...ce,number_of_days:be}));S(ve)},children:[r.jsx("option",{value:15,children:"Every 15 Days"}),r.jsx("option",{value:30,children:"Every 30 Days"}),r.jsx("option",{value:60,children:"Every 60 Days"}),r.jsx("option",{value:90,children:"Every 90 Days"})]})]}),r.jsxs("div",{className:"form-group",style:{flex:1},children:[r.jsxs("label",{children:[r.jsx(gi,{size:16})," Next Delivery"]}),r.jsx("input",{type:"date",value:T,onChange:Ie=>C(Ie.target.value)})]})]}),r.jsx("hr",{className:"divider"}),r.jsxs("div",{className:"items-header",children:[r.jsx("h4",{children:"Medications"}),r.jsxs("button",{type:"button",className:"add-item-btn",onClick:Oe,children:[r.jsx(ur,{size:14})," Add Drug"]})]}),r.jsx("div",{className:"items-list",children:v.map((Ie,be)=>r.jsxs("div",{className:"medication-item-row",children:[r.jsxs("div",{className:"row-top",children:[r.jsxs("div",{className:"form-group med-search-group",children:[r.jsx("label",{children:"Drug Name"}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search drug...",value:O===be?P:Ie.medication_name,onFocus:()=>{k(be),I(Ie.medication_name)},onChange:re=>{I(re.target.value),K(be,"medication_name",re.target.value)}}),O===be&&$&&r.jsx("span",{className:"spinner",children:"..."}),O===be&&P&&F.length>0&&r.jsx("ul",{className:"suggestions-list",children:F.map(re=>r.jsxs("li",{onClick:()=>je(re,be),children:[r.jsx("div",{className:"suggestion-name",children:re.name}),r.jsxs("div",{className:"suggestion-details",children:["Stock: ",re.stock]})]},re.id))})]})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Tabs/Day"}),r.jsx("input",{type:"number",min:"0.5",step:"0.5",value:Ie.tablets_per_day,onChange:re=>K(be,"tablets_per_day",re.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Days"}),r.jsx("input",{type:"number",min:"1",value:Ie.number_of_days,onChange:re=>K(be,"number_of_days",re.target.value)})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Packs"}),r.jsx("input",{type:"number",min:"0",value:Ie.packs||"",onChange:re=>K(be,"packs",re.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Loose"}),r.jsx("input",{type:"number",min:"0",value:Ie.loose||"",onChange:re=>K(be,"loose",re.target.value),placeholder:"0"})]}),r.jsxs("div",{className:"form-group small-input",children:[r.jsx("label",{children:"Total"}),r.jsx("input",{type:"number",value:Ie.quantity,disabled:!0,style:{backgroundColor:"#f5f5f5",cursor:"not-allowed"}})]}),r.jsx("button",{type:"button",className:"remove-btn",onClick:()=>Ye(be),disabled:v.length===1,children:r.jsx(Wn,{size:16})})]}),r.jsxs("div",{className:"row-bottom",children:[r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Directions (e.g. 1-0-1 after food)",value:Ie.directions,onChange:re=>K(be,"directions",re.target.value)})}),r.jsx("div",{className:"form-group",style:{flex:1},children:r.jsx("input",{type:"text",placeholder:"Notes",value:Ie.notes,onChange:re=>K(be,"notes",re.target.value)})})]})]},Ie.id))}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-submit",disabled:V,children:V?"Creating...":"Create Recurring Order"})]})]})]})]})}):null},YIe=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null),[o,l]=b.useState(""),[c,d]=b.useState(1),[f,p]=b.useState(1),[y,x]=b.useState(0),[v,S]=b.useState(!1),[N,_]=b.useState(void 0),T=10,C=b.useRef(null);Gc();const O=b.useCallback(async(L,V)=>{i(!0),s(null);try{let H=`/api/recurring-medications?page=${L}&limit=${T}`;V&&(H+=`&search=${encodeURIComponent(V)}`);const te=await ue(H);if(!te.ok)throw new Error("Failed to fetch recurring medications.");const X=await te.json();e(X.medications),p(X.totalPages),x(X.total),d(X.page)}catch(H){console.error(H),s(H.message||"An error occurred while fetching data.")}finally{i(!1)}},[]);b.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{O(c,o)},500),()=>{C.current&&clearTimeout(C.current)}),[o,c,O]);const k=L=>{l(L.target.value),d(1)},P=L=>{L>=1&&L<=f&&d(L)},I=L=>{_(L),S(!0)},F=()=>{O(c,o),S(!1),_(void 0)},B=L=>L===30?"Every 30 Days (Monthly)":L===15?"Every 15 Days":`Every ${L} Days`,$=L=>{switch(L){case"active":return"status-pill status-pill-active";case"paused":return"status-pill status-pill-paused";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill"}};return r.jsxs("div",{className:"refill-reminders-container",children:[r.jsxs("div",{className:"refill-header",children:[r.jsx("h3",{className:"refill-title",children:"Recurring Medications"}),r.jsxs("div",{className:"refill-actions",children:[r.jsxs("button",{className:"refill-action-button btn-add",onClick:()=>{_(void 0),S(!0)},children:[r.jsx(_s,{size:16})," Add New"]}),r.jsxs("div",{className:"search-box",children:[r.jsx("input",{type:"text",placeholder:"Search patient, phone, medication...",value:o,onChange:k}),r.jsx(Hn,{size:18,className:"search-icon"})]})]})]}),a&&r.jsx("div",{className:"error-message-box",children:a}),r.jsx("div",{className:"refill-table-container",children:n?r.jsx("div",{className:"loading-pulse",children:"Loading..."}):t.length===0?r.jsx("div",{className:"empty-state",children:"No recurring medications found."}):r.jsx("div",{className:"refill-grouped-list",children:Object.values(t.reduce((L,V)=>{const H=V.patientId;return L[H]||(L[H]={patientId:V.patientId,patientName:V.patientName,patientPhone:V.patientPhone,patientToken:V.patientToken,medications:[]}),L[H].medications.push(V),L},{})).map(L=>r.jsxs("div",{className:"patient-medication-group-card",children:[r.jsxs("div",{className:"group-header",children:[r.jsxs("div",{className:"patient-info",children:[r.jsx("h4",{className:"patient-name",children:L.patientName}),r.jsxs("span",{className:"patient-meta",children:["Token: ",L.patientToken,"  Phone: ",L.patientPhone]})]}),r.jsx("div",{className:"group-actions"})]}),r.jsxs("table",{className:"refill-table group-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Medication"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Frequency"}),r.jsx("th",{children:"Next Delivery"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:L.medications.map(V=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"med-name",children:V.medicationName}),(V.tabletsPerDay||V.numberOfDays||V.directions)&&r.jsxs("div",{className:"med-usage-details",style:{fontSize:"0.8em",color:"#666"},children:[V.tabletsPerDay&&r.jsxs("span",{children:[V.tabletsPerDay," tabs/day  "]}),V.numberOfDays&&r.jsxs("span",{children:[V.numberOfDays," days "]})]}),V.notes&&r.jsxs("div",{className:"med-notes",children:["Note: ",V.notes]})]}),r.jsx("td",{children:V.quantity}),r.jsx("td",{children:r.jsx("span",{className:"frequency-badge",children:B(V.frequencyDays)})}),r.jsx("td",{children:r.jsx("div",{className:"date-display",children:new Date(V.nextDeliveryDate).toLocaleDateString()})}),r.jsx("td",{children:r.jsx("span",{className:$(V.status),children:V.status})}),r.jsx("td",{children:r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{className:"action-btn edit",title:"Edit",onClick:()=>I(V),children:r.jsx(Ia,{size:16})}),r.jsx("button",{className:"action-btn delete",title:"Delete/Cancel",children:r.jsx(Wn,{size:16})})]})})]},V.id))})]})]},L.patientId))})}),!n&&f>1&&r.jsxs("div",{className:"pagination-container",children:[r.jsxs("span",{className:"pagination-info",children:["Page ",c," of ",f," (Total ",y,")"]}),r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("button",{onClick:()=>P(c-1),disabled:c===1,className:"page-btn",children:[r.jsx(Cb,{size:16})," Prev"]}),r.jsxs("button",{onClick:()=>P(c+1),disabled:c===f,className:"page-btn",children:["Next ",r.jsx(dd,{size:16})]})]})]}),r.jsx(WIe,{isOpen:v,onClose:()=>{S(!1),_(void 0)},onSuccess:F,medication:N})]})},KIe=()=>{const t=Mt(),e=Vr();return b.useEffect(()=>{const n=new URLSearchParams(e.search),i=n.get("token"),a=n.get("caseDetails");i?(async()=>{try{const o=await ue(`/api/patients?search=${i}&limit=1`);if(!o.ok)throw new Error("Failed to fetch patient by token");const c=(await o.json()).patients[0];if(!c)throw new Error("Patient with the given token not found");const d=await ue(`/api/queue/patient/${c.id}/latest`);if(d.ok){const y=await d.json();if(y!=null&&y._id){t(`/dashboard/edit-complaint/${y._id}`,{state:{initialComplaint:a}});return}}const f=await ue("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:c.id,complaint:a})});if(!f.ok)throw new Error("Failed to create queue entry");const p=await f.json();if(p!=null&&p.id)t(`/dashboard/edit-complaint/${p.id}`,{state:{initialComplaint:a}});else throw new Error("Failed to get ID from new queue entry.")}catch(o){console.error("Error handling complaint URL:",o),t("/dashboard/search-patient")}})():t("/dashboard/search-patient")},[e,t]),r.jsx("div",{children:"Loading..."})},EB=()=>{const t=Mt(),[e,n]=b.useState([]),[i,a]=b.useState(!0),[s,o]=b.useState(null),[l,c]=b.useState(!1),[d,f]=b.useState(!1),[p,y]=b.useState(!1),[x,v]=b.useState(!1),[S,N]=b.useState(!1),[_,T]=b.useState(!1),[C,O]=b.useState(null),[k,P]=b.useState([]),[I,F]=b.useState(null),[B,$]=b.useState(""),[L,V]=b.useState(""),[H,te]=b.useState(""),[X,q]=b.useState(""),[W,ae]=b.useState(""),[G,z]=b.useState(""),[le,je]=b.useState(""),[K,Oe]=b.useState(""),[Ye,Me]=b.useState(""),[Ie,be]=b.useState(""),[re,ve]=b.useState(""),[ce,fe]=b.useState("cash"),se=b.useCallback(async()=>{a(!0),o(null);try{const me=await ue("/api/distributors");if(!me.ok)throw new Error(`Failed to fetch distributors: ${me.statusText}`);const Ne=await me.json();n(Ne)}catch(me){console.error("Failed to fetch distributors:",me),o(me.message||"Failed to load distributors.")}finally{a(!1)}},[]);b.useEffect(()=>{se()},[se]);const Q=async me=>{me.preventDefault(),o(null);try{const Ne=await ue("/api/distributors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,contact_person:L,phone:H,email:X,address:W,gst_number:G,drug_license_number:le})});if(!Ne.ok){const Be=await Ne.json();throw new Error(Be.message||"Failed to add distributor.")}Ge(),se()}catch(Ne){console.error("Error adding distributor:",Ne),o(Ne.message||"Failed to add distributor.")}},ie=async me=>{if(me.preventDefault(),o(null),!!C)try{const Ne=await ue(`/api/distributors/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,contact_person:L,phone:H,email:X,address:W,gst_number:G,drug_license_number:le})});if(!Ne.ok){const Be=await Ne.json();throw new Error(Be.message||"Failed to update distributor.")}oe(),se()}catch(Ne){console.error("Error updating distributor:",Ne),o(Ne.message||"Failed to update distributor.")}},ge=async()=>{if(o(null),!!C)try{const me=await ue(`/api/distributors/${C.id}`,{method:"DELETE"});if(!me.ok){const Ne=await me.json();throw new Error(Ne.message||"Failed to delete distributor.")}$e(),se()}catch(me){console.error("Error deleting distributor:",me),o(me.message||"Failed to delete distributor.")}},ee=b.useCallback(async me=>{o(null);try{const Ne=await ue(`/api/distributors/${me}/payments`);if(!Ne.ok)throw new Error(`Failed to fetch payments: ${Ne.statusText}`);const Ee=(await Ne.json()).map(mt=>({...mt,order_value:parseFloat(mt.order_value),amount_paid:parseFloat(mt.amount_paid),balance_remaining:parseFloat(mt.balance_remaining)}));P(Ee);const Ke=await ue(`/api/distributors/${me}/balance`);if(!Ke.ok)throw new Error(`Failed to fetch balance: ${Ke.statusText}`);const rt=await Ke.json();F({totalOrderValue:parseFloat(rt.totalOrderValue),totalAmountPaid:parseFloat(rt.totalAmountPaid),remainingBalance:parseFloat(rt.remainingBalance)})}catch(Ne){console.error("Error fetching payments/balance:",Ne),o(Ne.message||"Failed to load payments or balance.")}},[]),we=async me=>{if(me.preventDefault(),o(null),!!C)try{const Ne=await ue(`/api/distributors/${C.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:K,order_value:parseFloat(Ye||"0"),amount_paid:parseFloat(Ie||"0"),notes:re,payment_mode:ce})});if(!Ne.ok){const Be=await Ne.json();throw new Error(Be.message||"Failed to add payment.")}pe(),ee(C.id)}catch(Ne){console.error("Error adding payment:",Ne),o(Ne.message||"Failed to add payment.")}},Ue=()=>{$(""),V(""),te(""),q(""),ae(""),z(""),je(""),o(null),f(!0)},Ge=()=>{f(!1)},Le=me=>{O(me),$(me.name),V(me.contact_person||""),te(me.phone||""),q(me.email||""),ae(me.address||""),z(me.gst_number||""),je(me.drug_license_number||""),o(null),y(!0)},oe=()=>{y(!1),O(null)},_e=me=>{O(me),o(null),v(!0)},$e=()=>{v(!1),O(null)},ze=me=>{O(me),ee(me.id),o(null),N(!0)},Y=()=>{N(!1),O(null),P([]),F(null)},ye=me=>{O(me),Oe(new Date().toISOString().split("T")[0]),Me("0"),be("0"),ve(""),fe("cash"),o(null),T(!0)},pe=()=>{T(!1),O(null)};return i?r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",style:{marginBottom:"20px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{width:80,height:36}),r.jsx(Z,{width:200,height:32})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx(Z,{width:150,height:36}),r.jsx(Z,{width:150,height:36}),r.jsx(Z,{width:180,height:36})]})]}),r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Contact Person"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5].map(me=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:120,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:30})})]},me))})]})})]}):s?r.jsxs("div",{className:"error-indicator",children:["Error: ",s]}):r.jsxs("div",{id:"distributor-page-container",children:[r.jsxs("div",{className:"distributor-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("button",{onClick:()=>t(-1),className:"dmp-button dmp-button-secondary",title:"Go Back",children:[r.jsx(nn,{size:20})," Back"]}),r.jsx("h2",{children:"Distributor Management"})]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("div",{className:"view-mode-toggle",style:{display:"flex",gap:"8px"},children:[r.jsxs("button",{onClick:()=>c(!1),className:`dmp-button ${l?"dmp-button-secondary":"dmp-button-primary"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>c(!0),className:`dmp-button ${l?"dmp-button-primary":"dmp-button-secondary"}`,title:"Excel Mode (Edit)",children:[r.jsx(gf,{size:18})," Excel"]})]}),r.jsxs("button",{onClick:Ue,className:"dmp-button dmp-button-primary",children:[r.jsx(_s,{size:18}),"Add Distributor"]})]})]}),(()=>{const me=e.reduce((Be,Ee)=>Be+parseFloat(Ee.remainingBalance||"0"),0),Ne=me>=0;return r.jsxs("div",{className:"stats-container",children:[r.jsxs("div",{className:`stat-card ${Ne?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Total Balance"}),r.jsxs("span",{className:"value",children:["",me.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Distributors"}),r.jsx("span",{className:"value",children:e.length})]})]})})(),r.jsx("div",{className:"table-wrapper",children:l?r.jsx(Ib,{columns:[{key:"name",label:"Name",editable:!0,type:"text"},{key:"contact_person",label:"Contact Person",editable:!0,type:"text"},{key:"phone",label:"Phone",editable:!0,type:"text"},{key:"email",label:"Email",editable:!0,type:"text"},{key:"address",label:"Address",editable:!0,type:"text"},{key:"gst_number",label:"GST Number",editable:!0,type:"text"},{key:"drug_license_number",label:"Drug License",editable:!0,type:"text"}],data:e,editable:!0,showRowNumbers:!0,title:"Distributors",onSave:async me=>{const Ne=me.map(async Be=>{const Ee=e.find(Ke=>Ke.id===Be.id);if(Ee&&JSON.stringify(Ee)!==JSON.stringify(Be))return ue(`/api/distributors/${Be.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)})});try{await Promise.all(Ne),se()}catch(Be){alert("Error saving changes"),console.error(Be)}}}):r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name / Contact"}),r.jsx("th",{children:"Details"}),r.jsx("th",{children:"Tax / License"}),r.jsx("th",{children:"Balance"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"2rem",color:"var(--dmp-text-secondary)"},children:"No distributors found."})}):e.map(me=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"primary-text",children:me.name}),r.jsx("div",{className:"secondary-text",children:me.contact_person})]}),r.jsxs("td",{children:[r.jsx("div",{className:"secondary-text",children:me.phone||"-"}),r.jsx("div",{className:"secondary-text",children:me.email||"-"}),r.jsx("div",{className:"secondary-text",children:me.address||"-"})]}),r.jsxs("td",{children:[r.jsxs("div",{className:"secondary-text",children:["GST: ",me.gst_number||"-"]}),r.jsxs("div",{className:"secondary-text",children:["DL: ",me.drug_license_number||"-"]})]}),r.jsx("td",{children:r.jsxs("span",{className:`status-badge ${parseFloat(me.remainingBalance||"0")>0?"balance-ok":"balance-owed"}`,children:["",me.remainingBalance||"0.00"]})}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>ze(me),className:"dmp-button-icon",title:"View Payments & Balance",children:r.jsx(Dm,{size:18})}),r.jsx("button",{onClick:()=>ye(me),className:"dmp-button-icon",title:"Add Payment",children:r.jsx(fw,{size:18})}),r.jsx("button",{onClick:()=>Le(me),className:"dmp-button-icon edit",title:"Edit Distributor",children:r.jsx(Ia,{size:18})}),r.jsx("button",{onClick:()=>_e(me),className:"dmp-button-icon delete",title:"Delete Distributor",children:r.jsx(Wn,{size:18})})]})})]},me.id))})]})}),d&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:Ge,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Add New Distributor"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:Q,children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"name",children:"Name:"}),r.jsx("input",{type:"text",id:"name",className:"dmp-input",value:B,onChange:me=>$(me.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"contact_person",className:"dmp-input",value:L,onChange:me=>V(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"phone",className:"dmp-input",value:H,onChange:me=>te(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"email",children:"Email:"}),r.jsx("input",{type:"email",id:"email",className:"dmp-input",value:X,onChange:me=>q(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"address",children:"Address:"}),r.jsx("textarea",{id:"address",className:"dmp-textarea",value:W,onChange:me=>ae(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"gst_number",className:"dmp-input",value:G,onChange:me=>z(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"drug_license_number",children:"Drug License Number:"}),r.jsx("input",{type:"text",id:"drug_license_number",className:"dmp-input",value:le,onChange:me=>je(me.target.value)})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:Ge,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Add Distributor"})]})]})]})}),p&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:oe,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Edit Distributor"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:ie,children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-name",children:"Name:"}),r.jsx("input",{type:"text",id:"edit-name",className:"dmp-input",value:B,onChange:me=>$(me.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-contact_person",children:"Contact Person:"}),r.jsx("input",{type:"text",id:"edit-contact_person",className:"dmp-input",value:L,onChange:me=>V(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-phone",children:"Phone:"}),r.jsx("input",{type:"text",id:"edit-phone",className:"dmp-input",value:H,onChange:me=>te(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-email",children:"Email:"}),r.jsx("input",{type:"email",id:"edit-email",className:"dmp-input",value:X,onChange:me=>q(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-address",children:"Address:"}),r.jsx("textarea",{id:"edit-address",className:"dmp-textarea",value:W,onChange:me=>ae(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-gst_number",children:"GST Number:"}),r.jsx("input",{type:"text",id:"edit-gst_number",className:"dmp-input",value:G,onChange:me=>z(me.target.value)})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"edit-drug_license_number",children:"Drug License Number:"}),r.jsx("input",{type:"text",id:"edit-drug_license_number",className:"dmp-input",value:le,onChange:me=>je(me.target.value)})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:oe,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Save Changes"})]})]})]})}),x&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",children:[r.jsx("button",{onClick:$e,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Confirm Delete"}),r.jsxs("p",{children:['Are you sure you want to delete distributor "',C.name,'"?']}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:$e,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ge,className:"dmp-button dmp-button-primary",style:{backgroundColor:"var(--dmp-danger-color)"},children:"Delete"})]})]})}),S&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"900px"},children:[r.jsx("button",{onClick:Y,className:"dmp-modal-close",children:""}),r.jsxs("h3",{className:"dmp-modal-title",children:["Payments & Balance for ",C.name]}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),I&&r.jsxs("div",{className:"stats-container",style:{marginBottom:"2rem"},children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Order Value"}),r.jsxs("span",{className:"value",children:["",I.totalOrderValue.toFixed(2)]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("span",{className:"label",children:"Total Amount Paid"}),r.jsxs("span",{className:"value",children:["",I.totalAmountPaid.toFixed(2)]})]}),r.jsxs("div",{className:`stat-card ${I.remainingBalance>0?"positive":"negative"}`,children:[r.jsx("span",{className:"label",children:"Remaining Balance"}),r.jsxs("span",{className:"value",children:["",I.remainingBalance.toFixed(2)]})]})]}),r.jsx("h4",{children:"Payment History"}),k.length===0?r.jsx("p",{children:"No payments recorded for this distributor."}):r.jsx("div",{className:"table-wrapper",children:r.jsxs("table",{className:"dmp-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Order Value"}),r.jsx("th",{children:"Amount Paid"}),r.jsx("th",{children:"Balance Remaining"}),r.jsx("th",{children:"Payment Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:k.map(me=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(me.payment_date).toLocaleDateString()}),r.jsxs("td",{"data-label":"Order Value",children:["",me.order_value.toFixed(2)]}),r.jsxs("td",{"data-label":"Amount Paid",children:["",me.amount_paid.toFixed(2)]}),r.jsxs("td",{"data-label":"Balance Remaining",children:["",me.balance_remaining.toFixed(2)]}),r.jsx("td",{"data-label":"Payment Mode",children:me.payment_mode?me.payment_mode.charAt(0).toUpperCase()+me.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",children:me.notes||"-"})]},me.id))})]})}),r.jsx("div",{className:"dmp-modal-actions",children:r.jsx("button",{type:"button",onClick:Y,className:"dmp-button dmp-button-secondary",children:"Close"})})]})}),_&&C&&r.jsx("div",{className:"dmp-modal-overlay",children:r.jsxs("div",{className:"dmp-modal",style:{maxWidth:"420px"},children:[r.jsx("button",{onClick:pe,className:"dmp-modal-close",children:""}),r.jsx("h3",{className:"dmp-modal-title",children:"Add Payment"}),s&&r.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),r.jsxs("form",{onSubmit:we,children:[r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_date",children:"Date:"}),r.jsx("input",{type:"date",id:"payment_date",className:"dmp-input",value:K,onChange:me=>Oe(me.target.value),required:!0})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_mode",children:"Mode:"}),r.jsxs("select",{id:"payment_mode",className:"dmp-select",value:ce,onChange:me=>fe(me.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"order_value",children:"Order Value:"}),r.jsx("input",{type:"number",id:"order_value",className:"dmp-input",value:Ye,onChange:me=>Me(me.target.value),step:"0.01"})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"amount_paid",children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount_paid",className:"dmp-input",value:Ie,onChange:me=>be(me.target.value),step:"0.01"})]})]}),r.jsxs("div",{className:"dmp-form-group",children:[r.jsx("label",{className:"dmp-label",htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",className:"dmp-textarea",value:re,onChange:me=>ve(me.target.value),rows:2,style:{resize:"none"}})]}),r.jsxs("div",{className:"dmp-modal-actions",children:[r.jsx("button",{type:"button",onClick:pe,className:"dmp-button dmp-button-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Add Payment"})]})]})]})})]})},Gj=t=>{if(!t)return"";let e=t.toLowerCase();return e=e.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),e=e.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),e=e.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),e},QIe=(t,e)=>{if(!t||!e||e.length===0)return;const n=Gj(t);let i=e.find(o=>Gj(o.name)===n);if(i)return i;let a=e.find(o=>Gj(o.name).includes(n));if(a)return a;let s=e.find(o=>n.includes(Gj(o.name)));if(s)return s},XIe=({isOpen:t,onClose:e,excelHeaders:n,onConfirm:i,availableFields:a})=>{const[s,o]=b.useState({});if(b.useEffect(()=>{t&&c()},[t,n,a]),!t)return null;const l=(f,p)=>{o(y=>({...y,[f]:p}))},c=()=>{const f={};n.forEach(p=>{const y=a.map(v=>({name:v})),x=QIe(p,y);x&&(f[p]=x.name)}),o(f)},d=()=>{const f={};for(const p in s)s[p]&&s[p]!=="none"&&(f[p]=s[p]);i(f),e()};return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:e,className:"modal-close-button",children:r.jsx(qt,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Match File Columns"}),r.jsx("p",{className:"modal-description",children:'Please match the columns from your uploaded file to the corresponding fields in the drug inventory. You can use the "Auto Match" button for suggestions.'}),r.jsx("div",{className:"modal-actions-top",children:r.jsx("button",{type:"button",onClick:c,className:"button-auto-match",children:"Auto Match"})}),r.jsxs("div",{className:"column-mapping-grid",children:[r.jsx("div",{className:"grid-header",children:"Excel Column"}),r.jsx("div",{className:"grid-header",children:"App Field"}),n.map((f,p)=>r.jsxs(Se.Fragment,{children:[r.jsx("div",{className:"excel-header-cell",children:f}),r.jsx("div",{className:"app-field-cell",children:r.jsxs("select",{value:s[f]||"",onChange:y=>l(f,y.target.value),className:"app-field-select",children:[r.jsx("option",{value:"",children:"-- Select Field --"}),r.jsx("option",{value:"none",children:"None (Ignore Column)"}),a.map((y,x)=>r.jsxs("option",{value:y,children:[y==="name"?"Composition Name":y==="brand_name"?"Brand Name":y==="price"?"MRP":y==="buying_price"?"Rate":y==="unit"?"Pack":y==="batch"?"Batch":y==="hsn_code"?"HSN Code":y==="mfg"?"MFG":y==="loose_quantity"?"Loose":y.replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase())," "]},x))]})})]},p))]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:e,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:d,className:"button-submit",children:"Confirm Mapping"})]})]})})},JIe=({entityType:t,config:e,values:n,onChange:i,className:a=""})=>{const o=(e[t]||[]).filter(c=>c.type!=="computed");if(o.length===0)return null;const l=c=>{const d=n[c.key]??"";switch(c.type){case"number":return r.jsx("input",{type:"number",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>i(c.key,f.target.value===""?null:parseFloat(f.target.value)),className:"custom-text-input mt-1",placeholder:c.label,required:c.required});case"date":return r.jsx("input",{type:"date",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>i(c.key,f.target.value||null),className:"custom-text-input mt-1",required:c.required});case"boolean":return r.jsx("input",{type:"checkbox",id:`custom_${c.key}`,name:`custom_${c.key}`,checked:!!d,onChange:f=>i(c.key,f.target.checked),className:"custom-checkbox mt-1"});case"text":default:return r.jsx("input",{type:"text",id:`custom_${c.key}`,name:`custom_${c.key}`,value:d,onChange:f=>i(c.key,f.target.value||null),className:"custom-text-input mt-1",placeholder:c.label,required:c.required})}};return r.jsxs("div",{className:`custom-fields-section ${a}`,children:[r.jsx("h4",{className:"custom-fields-title",children:"Custom Fields"}),r.jsx("div",{className:"custom-fields-grid",children:o.map(c=>r.jsxs("div",{className:"custom-field-item",children:[r.jsxs("label",{htmlFor:`custom_${c.key}`,className:"form-label",children:[c.label,c.required&&r.jsx("span",{className:"required-star",children:"*"})]}),l(c)]},c.key))})]})},ZIe=({isOpen:t,onClose:e,onDrugAddedToPurchase:n,customColumnsConfig:i={}})=>{const[a,s]=b.useState({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),[o,l]=b.useState(null),[c,d]=b.useState(!1),[f,p]=b.useState(!1),y=b.useRef(null),x=b.useRef(null),v=b.useRef(null);b.useEffect(()=>{t&&(s({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),l(null),d(!1),p(!1))},[t]),b.useEffect(()=>{const T=O=>{O.key==="Tab"&&x.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var k;(k=v.current)==null||k.focus()},0),O.preventDefault()))},C=O=>{y.current&&!y.current.contains(O.target)&&p(!1)};return document.addEventListener("keydown",T),document.addEventListener("mousedown",C),()=>{document.removeEventListener("keydown",T),document.removeEventListener("mousedown",C)}},[f]);const S=T=>{const{name:C,value:O,type:k}=T.target;s(P=>({...P,[C]:k==="number"?parseFloat(O)||null:O}))},N=(T,C)=>{s(O=>({...O,custom_fields:{...O.custom_fields,[T]:C}}))},_=T=>{if(T.preventDefault(),l(null),d(!0),a.mrp===void 0||a.stock===void 0){l("MRP and Stock Quantity are required."),d(!1);return}const C={...a,name:a.name===""?null:a.name,composition:a.composition===""?null:a.composition,rate:a.rate===0?null:a.rate,expiry_date:a.expiry_date===""?null:a.expiry_date,gst:a.gst===0?null:a.gst,margin:a.margin===0?null:a.margin,discount:a.discount===0?null:a.discount,brand_name:a.brand_name===""?null:a.brand_name,batch:a.batch===""?null:a.batch,hsn_code:a.hsn_code===""?null:a.hsn_code,mfg:a.mfg===""?null:a.mfg,loose:a.loose===0?null:a.loose,custom_fields:a.custom_fields||{}};n(C),d(!1),e()};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content add-drug-form-container max-w-2xl mx-auto",children:[r.jsxs("div",{className:"add-drug-form-header",children:[r.jsx("h2",{children:"Add New Drug"}),r.jsx("button",{onClick:e,className:"cancel-button",title:"Close",children:r.jsx(qt,{size:24})})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("form",{onSubmit:_,className:"add-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"name",className:"form-label",children:"Composition Name"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Sl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"name",id:"name",value:a.name||"",onChange:S,className:"custom-text-input mt-1",placeholder:"e.g., Paracetamol",tabIndex:1})]}),r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"brand_name",className:"form-label",children:"Brand Name"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Sl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),r.jsx("input",{type:"text",name:"brand_name",id:"brand_name",value:a.brand_name||"",onChange:S,className:"custom-text-input mt-1",placeholder:"e.g., Calpol",tabIndex:2})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"mrp",className:"form-label",children:"MRP () *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Sl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"mrp",id:"mrp",required:!0,step:"0.01",min:"0",value:a.mrp||"",onChange:S,className:"custom-text-input mt-1",placeholder:"e.g., 500",tabIndex:3})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(Sl,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"stock",id:"stock",required:!0,step:"1",min:"0",value:a.stock||"",onChange:S,className:"custom-text-input mt-1",placeholder:"e.g., 5",tabIndex:4})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),r.jsx("input",{type:"text",name:"pack",id:"pack",value:a.pack||"",onChange:S,className:"custom-text-input mt-1",placeholder:"e.g., strip, bottle",tabIndex:5})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:a.expiry_date||"",onChange:S,className:"custom-text-input mt-1",tabIndex:6})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"box_number",value:a.box_number||"",onChange:S,className:"custom-text-input mt-1",tabIndex:7})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:y,children:[r.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:x,children:"Others"}),f&&r.jsxs("div",{className:"others-fields-grid",children:[" ",r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"description",rows:3,value:a.description||"",onChange:S,className:"custom-text-input mt-1",tabIndex:9})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"rate",className:"form-label",children:"Rate ()"}),r.jsx("input",{type:"number",name:"rate",id:"rate",step:"0.01",min:"0",value:a.rate??"",onChange:S,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:10,ref:v})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"gst",className:"form-label",children:"GST (%)"}),r.jsx("input",{type:"number",name:"gst",id:"gst",step:"0.01",min:"0",max:"100",value:a.gst??"",onChange:S,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:11})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"margin",className:"form-label",children:"Margin (%)"}),r.jsx("input",{type:"number",name:"margin",id:"margin",step:"0.01",min:"0",max:"100",value:a.margin??"",onChange:S,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:12})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"discount",className:"form-label",children:"Discount (%)"}),r.jsx("input",{type:"number",name:"discount",id:"discount",step:"0.01",min:"0",max:"100",value:a.discount??"",onChange:S,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:13})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"batch",className:"form-label",children:"Batch"}),r.jsx("input",{type:"text",name:"batch",id:"batch",value:a.batch||"",onChange:S,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:14})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"hsn_code",className:"form-label",children:"HSN Code"}),r.jsx("input",{type:"text",name:"hsn_code",id:"hsn_code",value:a.hsn_code||"",onChange:S,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:15})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"mfg",className:"form-label",children:"MFG"}),r.jsx("input",{type:"text",name:"mfg",id:"mfg",value:a.mfg||"",onChange:S,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:16})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"loose",className:"form-label",children:"Loose Quantity"}),r.jsx("input",{type:"number",name:"loose",id:"loose",step:"1",min:"0",value:a.loose??"",onChange:S,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:17})]})]})]})]}),r.jsx(JIe,{entityType:"drugs",config:i,values:a.custom_fields||{},onChange:N}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:e,disabled:c,className:"form-button cancel-form-button",tabIndex:18,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button inline-flex justify-center",tabIndex:19,children:c?"Adding...":"Add Drug"})]})]})]})}):null},eRe=({purchaseRows:t,onCellChange:e,onRemoveDrug:n,onAddEmptyRow:i})=>{const a=b.useRef(new Map),s=["name","mrp","stock","pack","expiry_date","rate","brand_name","box_number","gst","discount","batch","hsn_code","mfg","loose"],o=(l,c,d)=>{if(l.key==="Tab"){l.preventDefault();const f=s.indexOf(d);if(f!==-1){const p=(f+1)%s.length,y=s[p],x=a.current.get(`${c}-${y}`);x==null||x.focus()}}};return t.length===0?r.jsxs("div",{className:"no-drugs-message",children:[r.jsx("p",{children:"No drugs added to the purchase list yet."}),r.jsxs("button",{onClick:i,className:"action-button add-drug-to-table-button",children:[r.jsx(_s,{size:18,className:"button-icon"}),"Add the first drug"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"purchase-drugs-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Composition Name"}),r.jsx("th",{children:"MRP ()"}),r.jsx("th",{children:"Qty"}),r.jsx("th",{children:"Pack"}),r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Rate ()"}),r.jsx("th",{children:"Brand Name"}),r.jsx("th",{children:"Box Number"}),r.jsx("th",{children:"GST (%)"}),r.jsx("th",{children:"Discount (%)"}),r.jsx("th",{children:"Margin (%)"}),r.jsx("th",{children:"Batch"}),r.jsx("th",{children:"HSN Code"}),r.jsx("th",{children:"MFG"}),r.jsx("th",{children:"Loose"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map((l,c)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("input",{type:"text",value:l.name||"",onChange:d=>e(d,l.id,"name"),onKeyDown:d=>o(d,l.id,"name"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-name`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.mrp||"",onChange:d=>e(d,l.id,"mrp"),onKeyDown:d=>o(d,l.id,"mrp"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-mrp`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.stock||"",onChange:d=>e(d,l.id,"stock"),onKeyDown:d=>o(d,l.id,"stock"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-stock`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.pack||"",onChange:d=>e(d,l.id,"pack"),onKeyDown:d=>o(d,l.id,"pack"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-pack`,d)}})}),r.jsx("td",{children:l.supplier||"N/A"}),r.jsx("td",{children:r.jsx("input",{type:"date",value:l.expiry_date||"",onChange:d=>e(d,l.id,"expiry_date"),onKeyDown:d=>o(d,l.id,"expiry_date"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-expiry_date`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.rate||"",onChange:d=>e(d,l.id,"rate"),onKeyDown:d=>o(d,l.id,"rate"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-rate`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.brand_name||"",onChange:d=>e(d,l.id,"brand_name"),onKeyDown:d=>o(d,l.id,"brand_name"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-brand_name`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.box_number||"",onChange:d=>e(d,l.id,"box_number"),onKeyDown:d=>o(d,l.id,"box_number"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-box_number`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.gst||"",onChange:d=>e(d,l.id,"gst"),onKeyDown:d=>o(d,l.id,"gst"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-gst`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.discount||"",onChange:d=>e(d,l.id,"discount"),onKeyDown:d=>o(d,l.id,"discount"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-discount`,d)}})}),r.jsx("td",{children:(()=>{const d=l.mrp||0,f=l.rate||0,p=l.gst!==null&&l.gst!==void 0?l.gst/100*f:0,y=l.discount!==null&&l.discount!==void 0?l.discount/100*d:0,x=d-(f+p)-y;return`${(d>0?x/d*100:0).toFixed(2)}%`})()}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.batch||"",onChange:d=>e(d,l.id,"batch"),onKeyDown:d=>o(d,l.id,"batch"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-batch`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.hsn_code||"",onChange:d=>e(d,l.id,"hsn_code"),onKeyDown:d=>o(d,l.id,"hsn_code"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-hsn_code`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"text",value:l.mfg||"",onChange:d=>e(d,l.id,"mfg"),onKeyDown:d=>o(d,l.id,"mfg"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-mfg`,d)}})}),r.jsx("td",{children:r.jsx("input",{type:"number",value:l.loose||"",onChange:d=>e(d,l.id,"loose"),onKeyDown:d=>o(d,l.id,"loose"),className:"editable-cell-input",ref:d=>{l.id&&a.current.set(`${l.id}-loose`,d)}})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>n(l.id),className:"delete-button",title:"Remove Item",children:r.jsx(Wn,{size:16})})})]},l.id||c))})]})})},tRe="_container_7ak2k_7",nRe="_header_7ak2k_207",rRe="_backButton_7ak2k_221",iRe="_title_7ak2k_265",aRe="_stickyActionBar_7ak2k_287",sRe="_actionRow_7ak2k_317",oRe="_inputWrapper_7ak2k_335",lRe="_inputIcon_7ak2k_345",cRe="_input_7ak2k_335",uRe="_quickDistributors_7ak2k_401",dRe="_distributorChip_7ak2k_417",hRe="_distributorChipIcon_7ak2k_463",fRe="_selectedInfo_7ak2k_473",pRe="_resultsDropdown_7ak2k_503",mRe="_resultItem_7ak2k_537",gRe="_buttonGroup_7ak2k_565",yRe="_button_7ak2k_565",xRe="_buttonPrimary_7ak2k_609",vRe="_buttonSecondary_7ak2k_631",bRe="_buttonAccent_7ak2k_653",jRe="_buttonDisabled_7ak2k_675",wRe="_tableSection_7ak2k_691",SRe="_cardTitle_7ak2k_707",NRe="_cardIcon_7ak2k_727",_Re="_footer_7ak2k_947",CRe="_totalValue_7ak2k_981",TRe="_footerControls_7ak2k_1005",kRe="_paidInputGroup_7ak2k_1017",ARe="_paidLabel_7ak2k_1029",ERe="_paidInput_7ak2k_1017",PRe="_errorMsg_7ak2k_1075",cn={container:tRe,header:nRe,backButton:rRe,title:iRe,stickyActionBar:aRe,actionRow:sRe,inputWrapper:oRe,inputIcon:lRe,input:cRe,quickDistributors:uRe,distributorChip:dRe,distributorChipIcon:hRe,selectedInfo:fRe,resultsDropdown:pRe,resultItem:mRe,buttonGroup:gRe,button:yRe,buttonPrimary:xRe,buttonSecondary:vRe,buttonAccent:bRe,buttonDisabled:jRe,tableSection:wRe,cardTitle:SRe,cardIcon:NRe,footer:_Re,totalValue:CRe,footerControls:TRe,paidInputGroup:kRe,paidLabel:ARe,paidInput:ERe,errorMsg:PRe},PB=()=>{const t=Mt(),{purchaseRows:e,setPurchaseRows:n,selectedDistributor:i,setSelectedDistributor:a,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:d,setDistributors:f}=Nz(),[p,y]=b.useState(!1),[x,v]=b.useState(!0),S=b.useRef(null),N=b.useRef(null),[_,T]=b.useState(!1),C=b.useRef(null),[O,k]=b.useState(!1),[P,I]=b.useState([]),[F,B]=b.useState(null),[$,L]=b.useState(null),[V,H]=b.useState(!1),[te,X]=b.useState([]),q=["name","description","mrp","stock","pack","supplier","expiry_date","rate","box_number","gst","margin","discount","brand_name","batch","hsn_code","mfg","loose"];b.useEffect(()=>{(async()=>{v(!0);try{const ge=await ue("/api/distributors?limit=4");if(ge.ok){const ee=await ge.json();X(Array.isArray(ee)?ee.slice(0,4):[])}}catch(ge){console.error("Failed to fetch initial distributors",ge)}finally{v(!1)}})()},[]);const W=()=>{const ge={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:"",composition:"",description:"",mrp:0,stock:0,pack:"",supplier:i?i.name:"",expiry_date:"",rate:0,box_number:"",gst:0,margin:0,discount:0,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:0,last_updated:"",created_at:""};n(ee=>[...ee,ge])},ae=async(ie,ge)=>{if(!ie){L("No file provided for import.");return}if(!i){L("Please select a distributor before importing.");return}y(!0),L(null);const ee=new FormData;ee.append("inventoryFile",ie),ee.append("columnMapping",JSON.stringify(ge));try{const we=await ue("/api/drugs/parse-excel",{method:"POST",body:ee});if(!we.ok){const Ge=await we.json();throw new Error(Ge.message||`Failed to parse Excel file: ${we.statusText}`)}const Ue=await we.json();n(Ge=>[...Ge,...Ue.map(Le=>({...Le,id:Date.now().toString()+Math.random().toString(36).substring(2,9),supplier:i?i.name:Le.supplier}))])}catch(we){console.error("Failed to parse Excel file:",we),L(we.message||"Failed to parse Excel file. Please check the file format and try again.")}finally{S.current&&(S.current.value=""),y(!1),B(null)}},G=async ie=>{if(ie.target.files&&ie.target.files[0]){const ge=ie.target.files[0];B(ge),L(null),y(!0);const ee=new FormData;ee.append("inventoryFile",ge);try{const we=await ue("/api/drugs/get-file-headers",{method:"POST",body:ee});if(!we.ok){const Ge=await we.json();throw new Error(Ge.message||`Failed to get file headers: ${we.statusText}`)}const{headers:Ue}=await we.json();I(Ue),k(!0)}catch(we){console.error("Failed to get file headers:",we),L(we.message||"Failed to read file headers. Please check the file format and try again."),B(null)}finally{y(!1)}}else B(null)},z=ie=>{F?ae(F,ie):L("No file selected for import after mapping."),k(!1)},le=()=>{k(!1),I([]),B(null),S.current&&(S.current.value="")},je=()=>{var ie;(ie=S.current)==null||ie.click()},K=async ie=>{if(ie.target.files&&ie.target.files[0]){const ge=ie.target.files[0];L(null),y(!0);const ee=new FormData;ee.append("file",ge),ee.append("output_type","csv");const Ue={Authorization:"Bearer 00841ac4-b279-11f0-ab55-0a3a41e3fad1"};try{const Ge=await fetch("https://extraction-api.nanonets.com/extract",{method:"POST",headers:Ue,body:ee});if(!Ge.ok){const pe=await Ge.json();throw new Error(pe.message||`Failed to extract data from image/PDF: ${Ge.statusText}`)}const Le=await Ge.json();if(!Le.success||!Le.content)throw new Error(Le.detail||"Nanonets API did not return expected content.");let oe=Le.content;oe=oe.split(`
`).filter(pe=>!pe.startsWith("#")&&pe.trim()!=="").join(`
`);const $e=new File([oe],"extracted_data.csv",{type:"text/csv"}),ze=new FormData;ze.append("inventoryFile",$e);const Y=await ue("/api/drugs/get-file-headers",{method:"POST",body:ze});if(!Y.ok){const pe=await Y.json();throw new Error(pe.message||`Failed to get headers from extracted CSV: ${Y.statusText}`)}const{headers:ye}=await Y.json();I(ye),B($e),k(!0)}catch(Ge){console.error("Failed to extract data from image/PDF:",Ge),L(Ge.message||"Failed to extract data from image/PDF. Please check the file and try again.")}finally{N.current&&(N.current.value=""),y(!1)}}},Oe=()=>{var ie;(ie=N.current)==null||ie.click()},Ye=()=>{if(!i){L("Please select a distributor before adding a drug manually.");return}H(!0)},Me=()=>{H(!1),L(null)},Ie=ie=>{n(ge=>[...ge,{...ie,id:Date.now().toString(),supplier:i?i.name:ie.supplier}]),Me()},be=ie=>{n(ge=>ge.filter(ee=>ee.id!==ie))},re=(ie,ge,ee)=>{const{value:we}=ie.target;n(Ue=>Ue.map(Ge=>{if(Ge.id===ge){let Le=we;ee==="expiry_date"?Le=we.trim()===""?null:we:["mrp","stock","rate","gst","margin","discount","loose"].includes(ee)&&(Le=parseFloat(we),isNaN(Le)&&(Le=null));const oe={...Ge,[ee]:Le};return ee==="name"&&i&&!oe.supplier&&(oe.supplier=i.name),oe}return Ge}))},ve=b.useCallback(()=>e.reduce((ie,ge)=>{const ee=ge.stock||0,we=ge.rate||0,Ue=ge.gst||0,Ge=ge.discount||0;let Le=we*(1-Ge/100),oe=ee*Le;return oe+=oe*(Ue/100),ie+oe},0),[e]),ce=async()=>{if(!i){L("Please select a distributor before submitting the purchase.");return}const ie=e.filter(ge=>Object.values(ge).some(ee=>typeof ee=="string"&&ee.trim()!==""||typeof ee=="number"&&ee!==0||ee!=null&&typeof ee!="string"&&typeof ee!="number"));if(ie.length===0){L("No valid drugs to submit. Please fill in at least one field for a row, or remove empty rows."),y(!1);return}y(!0),L(null);try{for(const Ue of ie){const Ge={...Ue,expiry_date:Ue.expiry_date===""?null:Ue.expiry_date,distributorId:i.id},Le=await ue("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ge)});if(!Le.ok){const oe=await Le.json();throw new Error(oe.message||`Failed to add drug ${Ue.name}: ${Le.statusText}`)}}const ge=ve(),ee=new Date().toISOString().split("T")[0],we=await ue(`/api/distributors/${i.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:ee,order_value:ge,amount_paid:l,notes:"Payment from purchase page."})});if(!we.ok){const Ue=await we.json();throw new Error(Ue.message||`Failed to record distributor payment: ${we.statusText}`)}n([]),a(null),o(""),c(0),t("/dashboard/inventory")}catch(ge){console.error("Failed to submit purchase:",ge),L(ge.message||"Failed to submit purchase. Please try again.")}finally{y(!1)}},fe=b.useCallback(async ie=>{if(ie.trim()===""){f([]);return}try{const ge=await ue(`/api/distributors?search=${encodeURIComponent(ie)}`);if(!ge.ok)throw new Error(`Failed to fetch distributors: ${ge.statusText}`);const ee=await ge.json();f(ee)}catch(ge){console.error("Failed to fetch distributors:",ge),L(ge.message||"Failed to load distributors.")}},[]),se=ie=>{const ge=ie.target.value;o(ge),a(null),C.current&&clearTimeout(C.current),ge.trim()!==""?C.current=setTimeout(()=>{fe(ge),T(!0)},300):(f([]),T(!1))},Q=ie=>{a(ie),o(ie.name),T(!1),f([])};return b.useEffect(()=>{const ie=ge=>{ge.target instanceof HTMLElement&&!ge.target.closest(`.${cn.inputWrapper}`)&&T(!1)};return document.addEventListener("mousedown",ie),()=>{document.removeEventListener("mousedown",ie),C.current&&clearTimeout(C.current)}},[]),r.jsxs("div",{className:cn.container,children:[r.jsxs("div",{className:cn.header,children:[r.jsx("button",{onClick:()=>t(-1),className:cn.backButton,title:"Go Back",children:r.jsx(nn,{size:24})}),r.jsx("h2",{className:cn.title,children:"Purchase Inventory"})]}),$&&r.jsxs("div",{className:cn.errorMsg,children:[r.jsx(Xr,{size:20}),$]}),r.jsx("div",{className:cn.stickyActionBar,children:r.jsxs("div",{className:cn.actionRow,children:[r.jsxs("div",{style:{flex:1,minWidth:"300px",position:"relative"},children:[r.jsxs("div",{className:cn.inputWrapper,children:[r.jsx(Hn,{className:cn.inputIcon,size:20}),r.jsx("input",{type:"text",placeholder:"Search distributor...",value:s,onChange:se,onFocus:()=>s.trim()!==""&&T(!0),className:cn.input}),_&&d.length>0&&r.jsx("ul",{className:cn.resultsDropdown,children:d.map(ie=>r.jsx("li",{onClick:()=>Q(ie),className:cn.resultItem,children:ie.name},ie.id))})]}),x?r.jsx("div",{className:cn.quickDistributors,children:[1,2,3,4].map(ie=>r.jsx(Z,{width:100,height:32,style:{borderRadius:"16px"}},ie))}):te.length>0&&!i&&r.jsx("div",{className:cn.quickDistributors,children:te.map(ie=>r.jsxs("button",{className:cn.distributorChip,onClick:()=>Q(ie),children:[r.jsx(vr,{className:cn.distributorChipIcon}),ie.name]},ie.id))}),i&&r.jsxs("div",{className:cn.selectedInfo,style:{marginTop:"0.5rem",marginBottom:0},children:[r.jsx(Ol,{size:18}),r.jsxs("span",{children:["Selected: ",r.jsx("strong",{children:i.name})]})]})]}),r.jsxs("div",{className:cn.buttonGroup,children:[r.jsx("input",{ref:S,type:"file",className:"sr-only",style:{display:"none"},accept:".xlsx, .xls, .csv",onChange:G}),r.jsx("input",{ref:N,type:"file",className:"sr-only",style:{display:"none"},accept:".pdf, .png, .jpg, .jpeg",onChange:K}),r.jsxs("button",{onClick:je,disabled:p||!i,className:`${cn.button} ${cn.buttonPrimary} ${p||!i?cn.buttonDisabled:""}`,title:i?"":"Select a distributor to import",children:[r.jsx(bE,{size:18}),p?"Processing...":"Import Excel/CSV"]}),r.jsxs("button",{onClick:Oe,disabled:p||!i,className:`${cn.button} ${cn.buttonSecondary} ${p||!i?cn.buttonDisabled:""}`,title:i?"":"Select a distributor",children:[r.jsx(la,{size:18}),"Scan Image/PDF"]}),r.jsxs("button",{onClick:Ye,disabled:!i,className:`${cn.button} ${cn.buttonAccent} ${i?"":cn.buttonDisabled}`,title:i?"":"Select a distributor",children:[r.jsx(_s,{size:18}),"Add Manually"]})]})]})}),r.jsx(XIe,{isOpen:O,onClose:le,excelHeaders:P,onConfirm:z,availableFields:q}),V&&r.jsx(ZIe,{isOpen:V,onClose:Me,onDrugAddedToPurchase:Ie}),r.jsxs("div",{className:cn.tableSection,children:[r.jsxs("div",{className:cn.cardTitle,children:[r.jsx(Ab,{className:cn.cardIcon,size:24}),"Purchase Items (",e.length,")"]}),r.jsx(eRe,{purchaseRows:e,onCellChange:re,onRemoveDrug:be,onAddEmptyRow:W})]}),r.jsxs("div",{className:cn.footer,children:[r.jsxs("button",{onClick:W,className:`${cn.button} ${cn.buttonSecondary}`,children:[r.jsx(_s,{size:18}),"Add New Row"]}),r.jsxs("div",{className:cn.footerControls,children:[r.jsxs("div",{className:cn.paidInputGroup,children:[r.jsx("label",{htmlFor:"amount-paid",className:cn.paidLabel,children:"Amount Paid:"}),r.jsx("input",{type:"number",id:"amount-paid",value:l,onChange:ie=>c(parseFloat(ie.target.value)||0),placeholder:"0.00",className:cn.paidInput,step:"0.01",disabled:!i})]}),r.jsxs("div",{className:cn.totalValue,children:["Total: ",r.jsxs("span",{children:["",ve().toFixed(2)]})]}),r.jsx("button",{onClick:ce,disabled:p||e.length===0||!i,className:`${cn.button} ${cn.buttonPrimary} ${cn.submitButton} ${p||!i||e.length===0?cn.buttonDisabled:""}`,style:{padding:"0.8rem 1.5rem",fontSize:"1rem"},children:p?"Submitting...":"Complete Purchase"})]})]})]})},ORe=t=>{if(!t)return 1;const e=t.match(/(?:\d+x)?(\d+)/);return e&&e[1]?parseInt(e[1],10):1},DRe=()=>{const t=Mt(),e=Vr(),[n,i]=b.useState(null),[a,s]=b.useState([]),[o,l]=b.useState(!0),[c,d]=b.useState(null),[f,p]=b.useState(!1),[y,x]=b.useState("cash"),[v,S]=b.useState(""),[N,_]=b.useState(""),[T,C]=b.useState(""),[O,k]=b.useState(""),[P,I]=b.useState(""),[F,B]=b.useState(0),$=b.useRef(!1),[L,V]=b.useState(null),[H,te]=b.useState(!1),[X,q]=b.useState(!1),[W,ae]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),G=()=>{W.length<5&&ae(ee=>[...ee,{id:Date.now().toString(),method:"cash",amount:0}])},z=ee=>{W.length>2&&ae(we=>we.filter(Ue=>Ue.id!==ee))},le=(ee,we,Ue)=>{ae(Ge=>{const Le=Ge.map(oe=>oe.id===ee?we==="method"?{...oe,method:Ue}:{...oe,amount:Math.max(0,Ue)}:oe);if(we==="amount"&&Le.length===2){const _e=Le.findIndex(Y=>Y.id===ee)===0?1:0,$e=Math.max(0,Ue),ze=ce-$e;Le[_e]={...Le[_e],amount:Math.max(0,ze)}}return Le})},je=(ee,we)=>{const Ue=W.filter(Le=>Le.id!==ee).reduce((Le,oe)=>Le+oe.amount,0),Ge=Math.max(0,we-Ue);ae(Le=>Le.map(oe=>oe.id===ee?{...oe,amount:Ge}:oe))},K=ee=>{const we=Math.max(0,Math.min(100,isNaN(ee)?0:ee));$.current=!0,B(we);const Ue=a.map(Ge=>({...Ge,discount_percentage:we}));s(Ue)},Oe=(ee,we)=>{const Ue=[...a];Ue[ee].discount_percentage=isNaN(we)?0:we,s(Ue)};b.useEffect(()=>{if($.current){$.current=!1;return}const ee=a.reduce((Ge,Le)=>Ge+(Le.total_price??0),0);if(ee===0){B(0);return}const Ue=a.reduce((Ge,Le)=>{const _e=(Le.total_price??0)*((Le.discount_percentage??0)/100);return Ge+_e},0)/ee*100;B(Ge=>Math.abs(Ge-Ue)>.01?Ue:Ge)},[a]);const Ye=async()=>{if(!n)return d("No order data available to bill."),null;if(a.length===0)return d("Cannot bill an empty order."),null;p(!0),d(null);try{const ee=a.map(_e=>{const $e=(_e.pricePerLooseUnit??0)*(_e.looseQuantity??0),ze=$e*((_e.discount_percentage??0)/100),Y=$e-ze;return{name:_e.name,pack_quantity:_e.loosePacks??0,loose_quantity:_e.looseUnits??0,price:_e.originalPrice??0,pack_price:_e.originalPrice??0,loose_price:_e.pricePerLooseUnit??0,total:Y,drug_id:_e.drug_id,discount_percentage:_e.discount_percentage??0,batch:_e.batch,expiry_date:_e.expiry_date}}),we={patientId:n.patientId,queueId:n.id,items:ee,amount:ce,paymentMode:X?"split":y,type:"pharmacy",related_id:n.id,status:"paid",discountPercentage:F};X&&(we.splitPayments=W.map(_e=>({method:_e.method,amount:_e.amount})));const Ue=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(we)}),Ge=await Ue.json();if(!Ue.ok||!Ge.id)throw new Error(Ge.message||"Failed to create bill.");const Le=await ue(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:Ge.id,medications:a})});if(!Le.ok){const _e=await Le.text();throw new Error(`Failed to update pharmacy order status: ${Le.statusText} - ${_e}`)}i(_e=>_e?{..._e,status:"billed",bill_id:Ge.id}:null);const oe=X?W.filter(_e=>_e.method==="credit").reduce((_e,$e)=>_e+$e.amount,0):y==="credit"?ce:0;if(oe>0)try{await ue(`/api/patient-debts/${n.patientId}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:oe,related_bill_id:Ge.id,notes:`Pharmacy Bill #${Ge.id}`})})}catch(_e){console.error("Failed to create debt entry:",_e)}return t(`/dashboard/pharmacy-billing/${n.id}`,{replace:!0,state:{order:{...n,status:"billed",bill_id:Ge.id},initialItems:a}}),Ge.id}catch(ee){return console.error("Billing process failed:",ee),d(ee.message||"Failed to mark order as billed. Please try again."),null}finally{p(!1)}},Me=async()=>{if(n)try{const ee=await ue(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"dispensed",medications:a})});if(!ee.ok){const we=await ee.text();console.error("Failed to dispense order:",we)}}catch(ee){console.error("Error dispensing order:",ee)}},Ie=()=>{window.print()},be=async()=>{await Ye()&&(window.print(),await Me(),t(-1))};b.useEffect(()=>{const ee=e.pathname.split("/"),we=ee[ee.length-1];we?(async()=>{try{l(!0);const[Ge,Le,oe]=await Promise.all([ue(`/api/pharmacy-orders/${we}`),ue("/api/drugs").then(Y=>Y.ok?Y.json():null).catch(()=>null),ue("/api/clinics/settings").then(Y=>Y.ok?Y.json():null).catch(()=>null)]);if(!Ge.ok)throw new Error("Failed to fetch pharmacy order details");const _e=await Ge.json();i(_e);let $e=[];Le&&($e=Le.drugs||Le||[]),oe&&(_(oe.upi_id||""),C(oe.name||""),k(oe.address||""),I(oe.notes||""));const ze=_e.medications.map(Y=>{const ye=ORe(Y.unit),pe=(Y.pack_quantity??0)*ye+(Y.loose_quantity??0),me=$e.find(mt=>Y.drug_id&&String(mt.id)===String(Y.drug_id)||mt.name.toLowerCase()===Y.name.toLowerCase()),Ne=Y.batch||(me==null?void 0:me.batch)||(me==null?void 0:me.batch_number),Be=Y.expiry_date||(me==null?void 0:me.expiry_date),Ee=Number(Y.pack_price)||Number(me==null?void 0:me.mrp)||0,Ke=Number(me==null?void 0:me.rate)||0;let rt=Number(Y.loose_price)||0;return rt===0&&(Ee>0&&ye>0?rt=Ee/ye:Ke>0&&(rt=Ke)),{...Y,isLoose:!0,loosePacks:Y.pack_quantity??0,looseUnits:Y.loose_quantity??0,looseQuantity:pe,pack_price:Ee,loose_price:rt,total_price:Number(Y.total_price)||rt*pe,pricePerLooseUnit:rt,originalPrice:Ee,discount_percentage:Number(Y.discount_percentage)??0,directions_to_use:Y.directions_to_use,tabletsPerDay:Y.tabletsPerDay,numberOfDays:Y.numberOfDays,batch:Ne,expiry_date:Be}});s(ze)}catch(Ge){console.error("Failed to fetch data:",Ge),d(Ge.message||"Failed to load order details.")}finally{l(!1)}})():(d("No pharmacy order ID provided."),l(!1))},[e.pathname]);const re=b.useMemo(()=>a.reduce((ee,we)=>ee+(we.total_price??0),0),[a]),ve=b.useMemo(()=>a.reduce((ee,we)=>{const Ge=(we.total_price??0)*(we.discount_percentage??0)/100;return ee+Ge},0),[a]),ce=b.useMemo(()=>re-ve,[re,ve]),fe=b.useMemo(()=>W.reduce((ee,we)=>ee+we.amount,0),[W]),se=b.useMemo(()=>ce-fe,[ce,fe]),Q=b.useMemo(()=>Math.abs(se)<.01,[se]),ie=b.useMemo(()=>X?W.some(ee=>ee.method==="credit"&&ee.amount>0):y==="credit",[X,W,y]),ge=b.useMemo(()=>X?W.filter(ee=>ee.method==="credit").reduce((ee,we)=>ee+we.amount,0):y==="credit"?ce:0,[X,W,y,ce]);return b.useEffect(()=>{if(ce>0&&N){const ee=`upi://pay?pa=${N}&pn=ClinicName&am=${ce.toFixed(2)}&cu=INR`;S(ee)}else S("")},[ce,N]),b.useEffect(()=>{(async()=>{if(y==="credit"&&(n!=null&&n.patientId)){te(!0);try{const we=await ue(`/api/patient-debts/${n.patientId}/balance`);if(we.ok){const Ue=await we.json();V(Ue.netDebt||0)}else V(0)}catch(we){console.error("Error fetching patient debt:",we),V(0)}finally{te(!1)}}})()},[y,n==null?void 0:n.patientId]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:60,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(ee=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:60,height:20})})]},ee))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(Z,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T?`${T} Pharmacy`:"Pharmacy Bill"}),(O||P)&&r.jsxs("div",{className:"clinic-details-print",children:[O&&r.jsx("span",{className:"small-text clinic-address",children:O}),P&&r.jsx("span",{className:"small-text clinic-notes",children:P})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(nn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Pharmacy Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",n.patientName]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(Nc,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Medications"})}),a.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"BATCH"}),r.jsx("th",{children:"EXPIRY"}),r.jsx("th",{children:"QUANTITY"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"GST%"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:a.map((ee,we)=>{var _e;const Ue=ee.total_price??0,Ge=Ue*(ee.discount_percentage??0)/100,Le=Ue-Ge;return r.jsxs("tr",{children:[r.jsx("td",{children:we+1}),r.jsx("td",{children:ee.name}),r.jsx("td",{children:ee.batch||"N/A"}),r.jsx("td",{children:ee.expiry_date?new Date(ee.expiry_date).toLocaleDateString():"N/A"}),r.jsxs("td",{children:[r.jsxs("div",{children:["Packs: ",ee.loosePacks??0]}),r.jsxs("div",{children:["Loose: ",ee.looseUnits??0]})]}),r.jsx("td",{children:((_e=ee.originalPrice)==null?void 0:_e.toFixed(2))??"N/A"}),r.jsx("td",{children:((ee.pricePerLooseUnit??0)*(1-(ee.discount_percentage??0)/100)).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:ee.discount_percentage===0?"":ee.discount_percentage,onChange:$e=>Oe(we,parseFloat($e.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsxs("td",{children:[5 .toFixed(1),"%"]}),r.jsx("td",{children:Le.toFixed(2)})]},we)})})]}):r.jsx("p",{children:"No medications in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",re.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",F.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"GST (Included)"}),r.jsxs("span",{children:["",(ce*.05).toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ce.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:X?"Split Payment":y==="cash"?"Cash":y==="upi"?"UPI":y==="card"?"Card":y==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),X&&W.map((ee,we)=>ee.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:ee.method==="cash"?"Cash":ee.method==="upi"?"UPI":ee.method==="card"?"Card":ee.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",ee.amount.toFixed(2)]})]},we))]}),L!==null&&(L>0||ie)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(L??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(L??0).toFixed(2)]})]}),ie&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ge.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((L??0)+(ie?ge:0)).toFixed(2)]})]})]})]}),v&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${y!=="upi"?"hide-on-screen":""}`,children:[r.jsx(ua,{value:v,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",re.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ve.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:F===0?"":F,onChange:ee=>K(parseFloat(ee.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ce.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:v?r.jsxs(r.Fragment,{children:[r.jsx(ua,{value:v,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>q(!X),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:X?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:X?"rgba(79, 172, 254, 0.1)":"transparent",color:X?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Mc,{size:14}),"Split"]})]}),X?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ce.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:W.map((ee,we)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:we+1}),r.jsxs("select",{value:ee.method,onChange:Ue=>le(ee.id,"method",Ue.target.value),className:`split-payment-select ${ee.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:ee.amount||"",onChange:Ue=>le(ee.id,"amount",parseFloat(Ue.target.value)||0),className:`split-payment-input ${ee.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),W.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>je(ee.id,ce),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>z(ee.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},ee.id))}),W.length<5&&r.jsxs("button",{type:"button",onClick:G,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(ur,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",fe.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Q?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Q?"":se>0?"":"",Q?"Balanced":se>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(se).toFixed(2)]})]}),!Q&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ce.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:y,onChange:ee=>x(ee.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),ie&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),H?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:L&&L>0?"#dc3545":"#28a745"},children:["",(L||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ge.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((L||0)+ge).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[n.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Ie,className:"secondary-button print-preview-button no-print",disabled:f||a.length===0,children:"Print Preview"}),r.jsx("button",{onClick:be,className:"primary-button",disabled:f||a.length===0,children:f?"Processing...":"Finalise and Bill"})]}),n.status==="billed"&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${n.bill_id}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},MRe=()=>{const t=Mt(),e=Vr(),[n,i]=b.useState(null),[a,s]=b.useState(""),[o,l]=b.useState(""),[c,d]=b.useState([]),[f,p]=b.useState(!0),[y,x]=b.useState(null),[v,S]=b.useState(!1),[N,_]=b.useState("cash"),[T,C]=b.useState(""),[O,k]=b.useState(""),[P,I]=b.useState(""),[F,B]=b.useState(""),[$,L]=b.useState(""),[V,H]=b.useState(""),[te,X]=b.useState(0),q=b.useRef(!1),[W,ae]=b.useState(null),[G,z]=b.useState(!1),[le,je]=b.useState(!1),[K,Oe]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),Ye=()=>{K.length<5&&Oe(oe=>[...oe,{id:Date.now().toString(),method:"cash",amount:0}])},Me=oe=>{K.length>2&&Oe(_e=>_e.filter($e=>$e.id!==oe))},Ie=(oe,_e,$e)=>{Oe(ze=>{const Y=ze.map(ye=>ye.id===oe?_e==="method"?{...ye,method:$e}:{...ye,amount:Math.max(0,$e)}:ye);if(_e==="amount"&&Y.length===2){const pe=Y.findIndex(Be=>Be.id===oe)===0?1:0,me=Math.max(0,$e),Ne=ge-me;Y[pe]={...Y[pe],amount:Math.max(0,Ne)}}return Y})},be=(oe,_e)=>{const $e=K.filter(Y=>Y.id!==oe).reduce((Y,ye)=>Y+ye.amount,0),ze=Math.max(0,_e-$e);Oe(Y=>Y.map(ye=>ye.id===oe?{...ye,amount:ze}:ye))},re=oe=>{const _e=Math.max(0,Math.min(100,isNaN(oe)?0:oe));q.current=!0,X(_e);const $e=c.map(ze=>({...ze,discount_percentage:_e}));d($e)},ve=(oe,_e)=>{const $e=[...c];$e[oe].discount_percentage=isNaN(_e)?0:_e,d($e)};b.useEffect(()=>{if(q.current){q.current=!1;return}const oe=c.reduce((ze,Y)=>ze+(Y.price??0),0);if(oe===0){X(0);return}const $e=c.reduce((ze,Y)=>{const pe=(Y.price??0)*((Y.discount_percentage??0)/100);return ze+pe},0)/oe*100;X(ze=>Math.abs(ze-$e)>.01?$e:ze)},[c]);const ce=async()=>{if(!n)return x("No order data available to bill."),null;if(c.length===0)return x("Cannot bill an empty order."),null;S(!0),x(null);try{const oe=c.map(pe=>{const me=pe.price,Ne=me*((pe.discount_percentage??0)/100),Be=me-Ne;return{name:pe.name,price:pe.price,quantity:1,total:Be,item_id:pe.id,type:"lab_test",discount_percentage:pe.discount_percentage??0}}),_e={patientId:n.patient_id,items:oe,amount:ge,paymentMode:le?"split":N,type:"lab",related_id:n.id,status:"paid",discountPercentage:te};le&&(_e.splitPayments=K.map(pe=>({method:pe.method,amount:pe.amount})));const $e=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)}),ze=await $e.json();if(!$e.ok||!ze.id)throw new Error(ze.message||"Failed to create bill.");const Y=await ue(`/api/lab/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:ze.id})});if(!Y.ok){const pe=await Y.text();throw new Error(`Failed to update lab order status: ${Y.statusText} - ${pe}`)}i(pe=>pe?{...pe,status:"billed",bill_id:ze.id}:null);const ye=le?K.filter(pe=>pe.method==="credit").reduce((pe,me)=>pe+me.amount,0):N==="credit"?ge:0;if(ye>0)try{await ue(`/api/patient-debts/${n.patient_id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:ye,related_bill_id:ze.id,notes:`Lab Bill #${ze.id}`})})}catch(pe){console.error("Failed to create debt entry:",pe)}return t(`/dashboard/lab-billing/${n.id}`,{replace:!0,state:{...e.state,order:{...n,status:"billed",bill_id:ze.id}}}),ze.id}catch(oe){return console.error("Billing process failed:",oe),x(oe.message||"Failed to mark order as billed. Please try again."),null}finally{S(!1)}},fe=()=>{window.print()},se=async()=>{await ce()&&(window.print(),t(-1))};b.useEffect(()=>{const oe=e.pathname.split("/"),_e=oe[oe.length-1];_e?(async()=>{try{const[ze,Y]=await Promise.all([ue(`/api/lab/${_e}`),ue("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ze.ok)throw new Error("Failed to fetch lab order details");const ye=await ze.json();i(ye);const pe=ye.patient_id?ue(`/api/patients/${ye.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1});if(Y.ok&&"json"in Y){const Be=await Y.json();k(Be.upi_id||""),I(Be.name||""),B(Be.address||""),L(Be.notes||""),H(Be.labLetterheadUrl||"")}const me=await pe;if(me.ok&&"json"in me){const Be=await me.json();s(Be.name),l(Be.patient_token_number)}const Ne=ye.tests.map(Be=>({...Be,price:typeof Be.price=="string"?parseFloat(Be.price):Number(Be.price)||0,discount_percentage:0,total_price:typeof Be.price=="string"?parseFloat(Be.price):Number(Be.price)||0}));d(Ne)}catch(ze){console.error("Failed to fetch data:",ze),x(ze.message||"Failed to load order details.")}finally{p(!1)}})():(x("No lab order ID provided."),p(!1))},[e.pathname]);const Q=b.useMemo(()=>c.reduce((oe,_e)=>oe+(_e.price??0),0),[c]),ie=b.useMemo(()=>c.reduce((oe,_e)=>{const ze=(_e.price??0)*(_e.discount_percentage??0)/100;return oe+ze},0),[c]),ge=b.useMemo(()=>Q-ie,[Q,ie]),ee=b.useMemo(()=>K.reduce((oe,_e)=>oe+_e.amount,0),[K]),we=b.useMemo(()=>ge-ee,[ge,ee]),Ue=b.useMemo(()=>Math.abs(we)<.01,[we]),Ge=b.useMemo(()=>le?K.some(oe=>oe.method==="credit"&&oe.amount>0):N==="credit",[le,K,N]),Le=b.useMemo(()=>le?K.filter(oe=>oe.method==="credit").reduce((oe,_e)=>oe+_e.amount,0):N==="credit"?ge:0,[le,K,N,ge]);return b.useEffect(()=>{if(ge>0&&O){const oe=`upi://pay?pa=${O}&pn=ClinicName&am=${ge.toFixed(2)}&cu=INR`;C(oe)}else C("")},[ge,O]),b.useEffect(()=>{(async()=>{if(Ge&&(n!=null&&n.patient_id)){z(!0);try{const _e=await ue(`/api/patient-debts/${n.patient_id}/balance`);if(_e.ok){const $e=await _e.json();ae($e.netDebt||0)}else ae(0)}catch(_e){console.error("Error fetching patient debt:",_e),ae(0)}finally{z(!1)}}})()},[Ge,n==null?void 0:n.patient_id]),f?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(Z,{width:200,height:20}),r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:100,height:24})]}),r.jsx(Z,{width:"100%",height:150})," ",r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})})]})]})}):y?r.jsxs("div",{className:"error-message-box",children:["Error: ",y]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[V&&r.jsx("div",{className:"print-only print-letterhead-container",children:r.jsx("img",{src:V,alt:"Lab Letterhead",className:"print-letterhead-image"})}),r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:P?`${P} Lab`:"Lab Bill"}),(F||$)&&r.jsxs("div",{className:"clinic-details-print",children:[F&&r.jsx("span",{className:"small-text clinic-address",children:F}),$&&r.jsx("span",{className:"small-text clinic-notes",children:$})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",a]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(nn,{size:20})}),r.jsx("h1",{children:"Lab Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",a]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",o??"N/A"]}),r.jsxs("div",{className:"info-item no-print",children:[r.jsxs("strong",{children:[r.jsx(rs,{size:16})," Order ID"]})," ",n.id]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Lab Tests"})}),c.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"TEST DESCRIPTION"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:c.map((oe,_e)=>{const $e=oe.price??0,ze=$e*(oe.discount_percentage??0)/100,Y=$e-ze;return r.jsxs("tr",{children:[r.jsx("td",{children:_e+1}),r.jsx("td",{children:oe.name}),r.jsx("td",{children:typeof oe.price=="number"?oe.price.toFixed(2):Number(oe.price||0).toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:oe.discount_percentage||"",onChange:ye=>ve(_e,parseFloat(ye.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Y.toFixed(2)})]},_e)})})]}):r.jsx("p",{children:"No tests in this order."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Total Discount (",te.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ge.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:le?"Split Payment":N==="cash"?"Cash":N==="upi"?"UPI":N==="card"?"Card":N==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),le&&K.map((oe,_e)=>oe.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:oe.method==="cash"?"Cash":oe.method==="upi"?"UPI":oe.method==="card"?"Card":oe.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",oe.amount.toFixed(2)]})]},_e))]}),W!==null&&(W>0||Ge)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(W??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(W??0).toFixed(2)]})]}),Ge&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",Le.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((W??0)+(Ge?Le:0)).toFixed(2)]})]})]})]}),T&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${N!=="upi"?"hide-on-screen":""}`,children:[r.jsx(ua,{value:T,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:te===0?"":te,onChange:oe=>re(parseFloat(oe.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:v||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ge.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:T?r.jsxs(r.Fragment,{children:[r.jsx(ua,{value:T,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>je(!le),disabled:v||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:le?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:le?"rgba(79, 172, 254, 0.1)":"transparent",color:le?"#4facfe":"#666",cursor:v||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Mc,{size:14}),"Split"]})]}),le?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ge.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:K.map((oe,_e)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:_e+1}),r.jsxs("select",{value:oe.method,onChange:$e=>Ie(oe.id,"method",$e.target.value),className:`split-payment-select ${oe.method==="credit"?"is-credit":""}`,disabled:v||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:oe.amount||"",onChange:$e=>Ie(oe.id,"amount",parseFloat($e.target.value)||0),className:`split-payment-input ${oe.method==="credit"?"is-credit":""}`,disabled:v||n.status==="billed"})]}),K.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>be(oe.id,ge),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>Me(oe.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},oe.id))}),K.length<5&&r.jsxs("button",{type:"button",onClick:Ye,className:"split-payment-add-btn",disabled:v||n.status==="billed",children:[r.jsx(ur,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ee.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ue?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Ue?"":we>0?"":"",Ue?"Balanced":we>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(we).toFixed(2)]})]}),!Ue&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ge.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:N,onChange:oe=>_(oe.target.value),className:"payment-mode-select",disabled:v||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Ge&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),G?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:W&&W>0?"#dc3545":"#28a745"},children:["",(W||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",Le.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((W||0)+Le).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[r.jsx("button",{onClick:fe,className:"secondary-button print-preview-button no-print",disabled:v||c.length===0,children:"Print Preview"}),n.status!=="billed"&&r.jsx("button",{onClick:se,className:"primary-button",disabled:v||c.length===0,children:v?"Processing...":"Finalise and Bill"}),n.status==="billed"&&n.bill_id&&r.jsx("button",{onClick:()=>t("/billing",{state:{billId:n.bill_id}}),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your business!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})]}):r.jsx("div",{className:"error-message-box",children:"No order data available."})},IRe=500,RRe=()=>{const t=Mt(),{queueId:e}=Oi(),[n]=jz(),i=n.get("doctorId"),[a,s]=b.useState(null),[o,l]=b.useState(null),[c,d]=b.useState(null),[f,p]=b.useState(null),[y,x]=b.useState([]),[v,S]=b.useState(!0),[N,_]=b.useState(null),[T,C]=b.useState(!1),[O,k]=b.useState(!1),[P,I]=b.useState(null),[F,B]=b.useState("cash"),[$,L]=b.useState(""),[V,H]=b.useState(""),[te,X]=b.useState(""),[q,W]=b.useState(""),[ae,G]=b.useState(""),[z,le]=b.useState(0),[je,K]=b.useState(null),[Oe,Ye]=b.useState(!1),[Me,Ie]=b.useState(!1),[be,re]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),ve=()=>{be.length<5&&re(Y=>[...Y,{id:Date.now().toString(),method:"cash",amount:0}])},ce=Y=>{be.length>2&&re(ye=>ye.filter(pe=>pe.id!==Y))},fe=(Y,ye,pe)=>{re(me=>{const Ne=me.map(Be=>Be.id===Y?ye==="method"?{...Be,method:pe}:{...Be,amount:Math.max(0,pe)}:Be);if(ye==="amount"&&Ne.length===2){const Ee=Ne.findIndex(mt=>mt.id===Y)===0?1:0,Ke=Math.max(0,pe),rt=ge-Ke;Ne[Ee]={...Ne[Ee],amount:Math.max(0,rt)}}return Ne})},se=(Y,ye)=>{const pe=be.filter(Ne=>Ne.id!==Y).reduce((Ne,Be)=>Ne+Be.amount,0),me=Math.max(0,ye-pe);re(Ne=>Ne.map(Be=>Be.id===Y?{...Be,amount:me}:Be))};b.useEffect(()=>{(async()=>{if(!e){_("No queue ID provided."),S(!1);return}try{S(!0),_(null);const[ye,pe]=await Promise.all([ue(`/api/queue/${e}`),ue("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ye.ok)throw new Error("Failed to fetch queue entry");const me=await ye.json();if(s(me),pe.ok&&"json"in pe){const rt=await pe.json();H(rt.upi_id||""),X(rt.name||""),W(rt.address||""),G(rt.notes||"")}const Ne=i||me.doctor_id,[Be,Ee]=await Promise.all([me.patient_id?ue(`/api/patients/${me.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1}),Ne?ue(`/api/staff/${Ne}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1})]);if(Be.ok&&"json"in Be){const rt=await Be.json();l(rt)}let Ke=IRe;if(Ne&&(p(Ne),Ee.ok&&"json"in Ee)){const rt=await Ee.json();d(rt),rt.opd_fee!=null&&!isNaN(parseFloat(String(rt.opd_fee)))&&(Ke=parseFloat(String(rt.opd_fee)))}x([{name:"Consultation Fee",quantity:1,price:Ke,total:Ke,discount_percentage:0}])}catch(ye){console.error("Failed to fetch data:",ye),_(ye.message||"Failed to load billing details.")}finally{S(!1)}})()},[e,i]);const Q=b.useMemo(()=>y.reduce((Y,ye)=>Y+ye.total,0),[y]),ie=b.useMemo(()=>Q*(z/100),[Q,z]),ge=b.useMemo(()=>Q-ie,[Q,ie]),ee=b.useMemo(()=>be.reduce((Y,ye)=>Y+ye.amount,0),[be]),we=b.useMemo(()=>ge-ee,[ge,ee]),Ue=b.useMemo(()=>Math.abs(we)<.01,[we]),Ge=b.useMemo(()=>Me?be.some(Y=>Y.method==="credit"&&Y.amount>0):F==="credit",[Me,be,F]),Le=b.useMemo(()=>Me?be.filter(Y=>Y.method==="credit").reduce((Y,ye)=>Y+ye.amount,0):F==="credit"?ge:0,[Me,be,F,ge]);b.useEffect(()=>{if(ge>0&&V){const Y=`upi://pay?pa=${V}&pn=${encodeURIComponent(te)}&am=${ge.toFixed(2)}&cu=INR`;L(Y)}else L("")},[ge,V,te]),b.useEffect(()=>{(async()=>{if(Ge&&(o!=null&&o.id)){Ye(!0);try{const ye=await ue(`/api/patient-debts/${o.id}/balance`);if(ye.ok){const pe=await ye.json();K(pe.netDebt||0)}else K(0)}catch(ye){console.error("Error fetching patient debt:",ye),K(0)}finally{Ye(!1)}}})()},[Ge,o==null?void 0:o.id]);const oe=Y=>{const ye=Math.max(0,Math.min(100,isNaN(Y)?0:Y));le(ye)},_e=async()=>{if(!a||!o)return _("Missing queue or patient data."),null;if(y.length===0)return _("Cannot create an empty bill."),null;C(!0),_(null);try{const Y=y.map(Be=>({name:Be.name,quantity:Be.quantity,price:Be.price,total:Be.total*(1-z/100)})),ye={patientId:o.id,queueId:a.id,items:Y,amount:ge,paymentMode:Me?"split":F,type:"consultation",related_id:a.id,status:"paid",discountPercentage:z};Me&&(ye.splitPayments=be.map(Be=>({method:Be.method,amount:Be.amount})));const pe=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ye)}),me=await pe.json();if(!pe.ok||!me.id)throw new Error(me.message||"Failed to create bill.");const Ne=Me?be.filter(Be=>Be.method==="credit").reduce((Be,Ee)=>Be+Ee.amount,0):F==="credit"?ge:0;if(Ne>0)try{await ue(`/api/patient-debts/${o.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Ne,related_bill_id:me.id,notes:`Consultation Bill #${me.id}`})})}catch(Be){console.error("Failed to create debt entry:",Be)}if(f&&a.id)try{const Be={status:"waiting",doctorId:f},Ee=await ue(`/api/queue/${a.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)});if(Ee.ok)console.log(`Doctor ${f} assigned to queue ${a.id} after billing.`);else{const Ke=await Ee.json();console.error("Failed to assign doctor to queue:",Ke.message)}}catch(Be){console.error("Error assigning doctor to queue:",Be)}return k(!0),I(me.id),me.id}catch(Y){return console.error("Billing process failed:",Y),_(Y.message||"Failed to create bill. Please try again."),null}finally{C(!1)}},$e=()=>{window.print()},ze=async()=>{await _e()&&(window.print(),t(-1))};return v?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:80,height:32})}),r.jsx("h1",{children:r.jsx(Z,{width:200,height:32})})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx(Z,{width:200,height:20}),r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:180,height:20}),r.jsx(Z,{width:150,height:20})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:100,height:24})})}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:24}),r.jsx(Z,{width:100,height:24})]}),r.jsx(Z,{width:"100%",height:150})," ",r.jsx(Z,{width:"100%",height:40}),r.jsx(Z,{width:"100%",height:40})]})]})})]})]})}):N?r.jsxs("div",{className:"error-message-box",children:["Error: ",N]}):a?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:te||"Clinic Bill"}),(q||ae)&&r.jsxs("div",{className:"clinic-details-print",children:[q&&r.jsx("span",{className:"small-text clinic-address",children:q}),ae&&r.jsx("span",{className:"small-text clinic-notes",children:ae})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",a.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Date"]})," ",new Date().toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(nn,{size:20})}),r.jsx("h1",{children:"Consultation Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",a.token_no]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Patient ID"]})," ",(o==null?void 0:o.id)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Date"]})," ",new Date().toLocaleDateString()]}),c&&r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(eg,{size:16})," Doctor"]})," ",c.name]}),a.complaint&&r.jsxs("div",{className:"info-item",children:[r.jsx("strong",{children:"Complaint"})," ",a.complaint]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Bill Items"})}),y.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"DESCRIPTION"}),r.jsx("th",{children:"QTY"}),r.jsx("th",{children:"RATE"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:y.map((Y,ye)=>{const pe=Y.total*(z/100),me=Y.total-pe;return r.jsxs("tr",{children:[r.jsx("td",{children:ye+1}),r.jsx("td",{children:Y.name}),r.jsx("td",{children:Y.quantity}),r.jsxs("td",{children:["",Y.price.toFixed(2)]}),r.jsxs("td",{children:["",me.toFixed(2)]})]},ye)})})]}):r.jsx("p",{children:"No items in this bill."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),z>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",z.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ge.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:Me?"Split Payment":F==="cash"?"Cash":F==="upi"?"UPI":F==="card"?"Card":F==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),Me&&be.map((Y,ye)=>Y.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:Y.method==="cash"?"Cash":Y.method==="upi"?"UPI":Y.method==="card"?"Card":Y.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",Y.amount.toFixed(2)]})]},ye))]}),je!==null&&(je>0||Ge)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(je??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(je??0).toFixed(2)]})]}),Ge&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",Le.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((je??0)+(Ge?Le:0)).toFixed(2)]})]})]})]}),$&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${F!=="upi"?"hide-on-screen":""}`,children:[r.jsx(ua,{value:$,size:100}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Q.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{children:["- ",ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:z===0?"":z,onChange:Y=>oe(parseFloat(Y.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:T||O}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ge.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:$?r.jsxs(r.Fragment,{children:[r.jsx(ua,{value:$,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>Ie(!Me),disabled:T||O,style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:Me?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:Me?"rgba(79, 172, 254, 0.1)":"transparent",color:Me?"#4facfe":"#666",cursor:T||O?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Mc,{size:14}),"Split"]})]}),Me?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ge.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:be.map((Y,ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ye+1}),r.jsxs("select",{value:Y.method,onChange:pe=>fe(Y.id,"method",pe.target.value),className:`split-payment-select ${Y.method==="credit"?"is-credit":""}`,disabled:T||O,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Y.amount||"",onChange:pe=>fe(Y.id,"amount",parseFloat(pe.target.value)||0),className:`split-payment-input ${Y.method==="credit"?"is-credit":""}`,disabled:T||O})]}),be.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>se(Y.id,ge),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>ce(Y.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},Y.id))}),be.length<5&&r.jsxs("button",{type:"button",onClick:ve,className:"split-payment-add-btn",disabled:T||O,children:[r.jsx(ur,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ee.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Ue?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Ue?"":we>0?"":"",Ue?"Balanced":we>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(we).toFixed(2)]})]}),!Ue&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ge.toFixed(2)]})]})]}):r.jsxs("select",{id:"paymentMode",value:F,onChange:Y=>B(Y.target.value),className:"payment-mode-select",disabled:T||O,children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Ge&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Oe?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:je&&je>0?"#dc3545":"#28a745"},children:["",(je||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",Le.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((je||0)+Le).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"bill-actions",children:[!O&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:$e,className:"secondary-button print-preview-button no-print",disabled:T||y.length===0,children:"Print Preview"}),r.jsx("button",{onClick:ze,className:"primary-button",disabled:T||y.length===0,children:T?"Processing...":"Finalise and Bill"})]}),O&&P&&r.jsx("button",{onClick:()=>t(`/dashboard/bills/${P}`),className:"secondary-button",children:"View Bill"})]})]})})]}),r.jsxs("footer",{className:"billing-footer print-only",children:[r.jsx("p",{children:"Thank you for your visit!"}),r.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):r.jsx("div",{className:"error-message-box",children:"No queue data available."})},LRe=()=>{const t=Mt(),[e,n]=b.useState(!0),[i,a]=b.useState([]),[s,o]=b.useState(""),[l,c]=b.useState(!0),[d,f]=b.useState(!1),[p,y]=b.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",name:"",logoUrl:"",labLetterheadUrl:"",upi_id:"",address:"",notes:"",voice_ai_language:"en-US"}),[x,v]=b.useState(null),[S,N]=b.useState(!1),_=($,L)=>{v({type:$,message:L}),setTimeout(()=>v(null),3e3)},T=$=>{switch($){case"doctor":return r.jsx(eg,{size:14,className:"text-blue-600"});case"receptionist":return r.jsx(Wz,{size:14,className:"text-green-600"});case"pharmacy":return r.jsx(Nc,{size:14,className:"text-purple-600"});case"lab":return r.jsx(rs,{size:14,className:"text-yellow-600"});default:return r.jsx(od,{size:14,className:"text-gray-500"})}},C=$=>{switch($){case"doctor":return"avatar-blue";case"receptionist":return"avatar-green";case"pharmacy":return"avatar-purple";case"lab":return"avatar-yellow";default:return"avatar-gray"}},O=b.useCallback(async()=>{n(!0);try{const $=await ue("/staff");if($.ok){const L=await $.json();a(L.map(V=>({...V,id:V._id||V.id})))}}catch($){console.error("Error fetching staff:",$),_("error","Failed to load staff list")}finally{n(!1)}},[]),k=b.useCallback(async()=>{c(!0);try{const $=await ue("/api/clinics/settings");if($.ok){const L=await $.json();y({admissionCharge:parseFloat(L.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(L.perDayCharge||0).toFixed(2),otherCharges:parseFloat(L.otherCharges||0).toFixed(2),aiMemory:L.aiMemory||"",clinicWideSystemPrompt:L.clinicWideSystemPrompt||"",gemini_api_key:L.gemini_api_key||"",low_stock_threshold:L.low_stock_threshold!==void 0&&L.low_stock_threshold!==null?String(L.low_stock_threshold):"10",name:L.name||"",logoUrl:L.logoUrl||"",labLetterheadUrl:L.labLetterheadUrl||"",upi_id:L.upi_id||"",address:L.address||"",notes:L.notes||"",clinic_id:L.clinic_id,voice_ai_language:L.voice_ai_language||"en-US"})}}catch($){console.error("Error fetching settings:",$),_("error","Failed to load settings")}finally{c(!1)}},[]);b.useEffect(()=>{O(),k()},[O,k]);const P=$=>{const{name:L,value:V}=$.target;y(H=>({...H,[L]:V}))},I=async()=>{f(!0);try{const $=parseFloat(p.admissionCharge),L=parseFloat(p.perDayCharge),V=parseFloat(p.otherCharges),H=parseInt(p.low_stock_threshold);if((await ue("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:p.name,admissionCharge:$,perDayCharge:L,otherCharges:V,aiMemory:p.aiMemory,clinicWideSystemPrompt:p.clinicWideSystemPrompt,gemini_api_key:p.gemini_api_key,low_stock_threshold:H,logoUrl:p.logoUrl,labLetterheadUrl:p.labLetterheadUrl,upi_id:p.upi_id,address:p.address,notes:p.notes,voice_ai_language:p.voice_ai_language})})).ok)_("success","Changes saved successfully");else throw new Error("Failed to save")}catch($){console.error("Error saving settings:",$),_("error","Failed to save settings")}finally{f(!1)}},F=i.filter($=>$.name.toLowerCase().includes(s.toLowerCase())||$.role.toLowerCase().includes(s.toLowerCase())),B=async $=>{for(const L of $){const V=document.getElementById(L);V&&(V.scrollIntoView({behavior:"smooth",block:"center"}),V.classList.add("ai-feedback-glow"),await new Promise(H=>setTimeout(H,1500)),V.classList.remove("ai-feedback-glow"))}};return r.jsxs("div",{className:"clinic-hub-container",children:[r.jsxs("header",{className:"clinic-hub-header",children:[r.jsxs("div",{className:"clinic-hub-title",children:[r.jsx("h1",{children:"Clinic Hub"}),r.jsx("p",{className:"clinic-hub-subtitle",children:"Manage your ecosystem"})]}),r.jsxs("div",{className:"clinic-hub-actions",children:[x&&r.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.message}),r.jsxs("button",{className:"btn-add-staff",onClick:()=>t("/dashboard/staff/add"),children:[r.jsx(ur,{size:16})," Add Staff"]}),r.jsxs("button",{className:"btn-save-changes",onClick:I,disabled:d,children:[r.jsx(Js,{size:16})," ",d?"Saving...":"Save Changes"]})]})]}),r.jsxs("main",{className:"clinic-hub-content",children:[r.jsxs("div",{className:"team-directory-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(Eo,{size:18,className:"text-gray-500"}),r.jsxs("span",{className:"panel-title",children:["Team Directory (",i.length,")"]})]}),r.jsx("div",{className:"search-container",children:r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Hn,{size:16,className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Find member...",className:"search-input",value:s,onChange:$=>o($.target.value)})]})}),r.jsx("div",{className:"team-list",children:e?r.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4].map($=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Z,{variant:"circular",width:40,height:40}),r.jsxs("div",{className:"flex-1",children:[r.jsx(Z,{width:120,height:16,className:"mb-1"}),r.jsx(Z,{width:80,height:12})]})]},$))}):F.length===0?r.jsx("div",{className:"empty-state",children:"No staff found."}):F.map($=>r.jsxs("div",{id:`staff-member-${$.id}`,className:"team-member-item",children:[r.jsx("div",{className:`member-avatar ${C($.role)}`,children:$.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"member-info",children:[r.jsx("div",{className:"member-name",children:$.name}),r.jsxs("div",{className:"member-role",children:[T($.role),$.role]})]}),r.jsx("span",{className:`member-status ${$.active?"status-active":"status-inactive"}`,children:$.active?"Active":"Inactive"}),r.jsx("button",{className:"btn-edit-member",onClick:()=>t(`/dashboard/staff/edit/${$.id}`),children:r.jsx(Ia,{size:16})})]},$.id))})]}),r.jsxs("div",{className:"config-console-panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx(Bz,{size:18,className:"text-gray-500"}),r.jsx("span",{className:"panel-title",children:"Configuration Console"})]}),l?r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:80,style:{borderRadius:"8px"}})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:20})]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx(Z,{width:120,height:14,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"100%",height:40,style:{borderRadius:"8px"}})]})]})]})]}):r.jsxs("div",{className:"config-content",children:[r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(qz,{size:16})," CLINIC IDENTITY & LOCATION"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Clinic Name"}),r.jsx("input",{type:"text",className:"form-input",name:"name",id:"setting-name",value:p.name,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Logo URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"logoUrl",id:"setting-logoUrl",value:p.logoUrl,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Lab Letterhead URL"}),r.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"labLetterheadUrl",id:"setting-labLetterheadUrl",value:p.labLetterheadUrl,onChange:P})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Address"}),r.jsx("textarea",{className:"form-textarea",placeholder:"Full physical address",name:"address",id:"setting-address",value:p.address,onChange:P})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(mf,{size:16})," FINANCIAL OPERATIONS"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Admission Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"admissionCharge",id:"setting-admissionCharge",value:p.admissionCharge,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Per Day Charge ()"}),r.jsx("input",{type:"number",className:"form-input",name:"perDayCharge",id:"setting-perDayCharge",value:p.perDayCharge,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Other Charges ()"}),r.jsx("input",{type:"number",className:"form-input",name:"otherCharges",id:"setting-otherCharges",value:p.otherCharges,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"UPI ID"}),r.jsx("input",{type:"text",className:"form-input",name:"upi_id",id:"setting-upi_id",value:p.upi_id,onChange:P})]})]})]}),r.jsxs("div",{className:"config-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx(FO,{size:16})," INVENTORY & AI"]}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Low Stock Threshold"}),r.jsx("input",{type:"number",className:"form-input",name:"low_stock_threshold",id:"setting-low_stock_threshold",value:p.low_stock_threshold,onChange:P})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Voice AI Language"}),r.jsxs("select",{className:"form-input",name:"voice_ai_language",id:"setting-voice_ai_language",value:p.voice_ai_language,onChange:$=>y(L=>({...L,voice_ai_language:$.target.value})),children:[r.jsx("option",{value:"en-US",children:"English"}),r.jsx("option",{value:"hi-IN",children:"Hindi"}),r.jsx("option",{value:"te-IN",children:"Telugu"}),r.jsx("option",{value:"bn-IN",children:"Bengali"}),r.jsx("option",{value:"mr-IN",children:"Marathi"}),r.jsx("option",{value:"ta-IN",children:"Tamil"}),r.jsx("option",{value:"gu-IN",children:"Gujarati"}),r.jsx("option",{value:"kn-IN",children:"Kannada"}),r.jsx("option",{value:"ml-IN",children:"Malayalam"}),r.jsx("option",{value:"pa-IN",children:"Punjabi"}),r.jsx("option",{value:"es-ES",children:"Spanish"}),r.jsx("option",{value:"fr-FR",children:"French"}),r.jsx("option",{value:"de-DE",children:"German"}),r.jsx("option",{value:"it-IT",children:"Italian"}),r.jsx("option",{value:"pt-PT",children:"Portuguese"}),r.jsx("option",{value:"ru-RU",children:"Russian"}),r.jsx("option",{value:"ja-JP",children:"Japanese"}),r.jsx("option",{value:"ko-KR",children:"Korean"}),r.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),r.jsx("option",{value:"ar-SA",children:"Arabic"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Gemini API Key"}),r.jsx("input",{type:"password",className:"form-input",name:"gemini_api_key",id:"setting-gemini_api_key",value:p.gemini_api_key,onChange:P,placeholder:"******************"})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Clinic-Wide System Prompt"}),r.jsx("textarea",{className:"form-textarea",name:"clinicWideSystemPrompt",id:"setting-clinicWideSystemPrompt",value:p.clinicWideSystemPrompt,onChange:P,placeholder:"Instructions for the AI..."})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"AI Memory (Context)"}),r.jsx("textarea",{className:"form-textarea",name:"aiMemory",id:"setting-aiMemory",value:p.aiMemory,onChange:P,placeholder:"Shared context for the AI..."})]})]})]})]})]})]}),S&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:r.jsx("div",{className:"w-96 bg-white h-full shadow-2xl animate-slide-in-right",children:r.jsx(UH,{onClose:()=>N(!1),settings:p,staffList:i,onSettingsUpdate:k,onStaffUpdate:O,onHighlight:B})})})]})},FRe="_container_13uqm_121",$Re="_header_13uqm_141",BRe="_title_13uqm_187",zRe="_controls_13uqm_203",qRe="_dateInputGroup_13uqm_231",URe="_dateInputLabel_13uqm_255",VRe="_dateInput_13uqm_231",HRe="_section_13uqm_297",GRe="_sectionTitle_13uqm_325",WRe="_statsGrid_13uqm_351",YRe="_statCard_13uqm_365",KRe="_statTitle_13uqm_397",QRe="_statValue_13uqm_415",XRe="_statSubtitle_13uqm_431",JRe="_revenueGrid_13uqm_443",ZRe="_revenueCard_13uqm_469",e4e="_revenueCardTitle_13uqm_485",t4e="_revenueCardList_13uqm_505",n4e="_revenueCardListItem_13uqm_517",r4e="_tableContainer_13uqm_557",i4e="_table_13uqm_557",a4e="_textRight_13uqm_639",s4e="_textGreen_13uqm_647",o4e="_textRed_13uqm_655",l4e="_loadingContainer_13uqm_673",c4e="_errorAlert_13uqm_693",u4e="_backButton_13uqm_759",d4e="_chartsGrid_13uqm_797",h4e="_chartCard_13uqm_823",f4e="_chartWrapper_13uqm_873",yt={container:FRe,header:$Re,title:BRe,controls:zRe,dateInputGroup:qRe,dateInputLabel:URe,dateInput:VRe,section:HRe,sectionTitle:GRe,statsGrid:WRe,statCard:YRe,statTitle:KRe,statValue:QRe,statSubtitle:XRe,revenueGrid:JRe,revenueCard:ZRe,revenueCardTitle:e4e,revenueCardList:t4e,revenueCardListItem:n4e,tableContainer:r4e,table:i4e,textRight:a4e,textGreen:s4e,textRed:o4e,loadingContainer:l4e,errorAlert:c4e,backButton:u4e,chartsGrid:d4e,chartCard:h4e,chartWrapper:f4e},OB=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],UA=({active:t,payload:e,label:n})=>t&&e&&e.length?r.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[r.jsx("p",{className:"font-semibold text-gray-800",children:n}),e.map((i,a)=>r.jsxs("p",{style:{color:i.color},className:"text-sm",children:[i.name,": ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(i.value)]},a))]}):null,p4e=()=>{const t=Mt(),e=Vr(),n=new URLSearchParams(e.search),i=n.get("startDate"),a=n.get("endDate"),s=new Date().toISOString().split("T")[0],[o,l]=b.useState(i||s),[c,d]=b.useState(a||s),[f,p]=b.useState(!1),[y,x]=b.useState(null),{setAnalysisDateRange:v,analysisDateRange:S,setAnalysisData:N,registerAnalysisNavigator:_,registerAnalysisRefresher:T}=IS(),[C,O]=b.useState(0),[k,P]=b.useState(0),[I,F]=b.useState(0),[B,$]=b.useState(null),[L,V]=b.useState(null),[H,te]=b.useState(null),[X,q]=b.useState({reception:{},pharmacy:{},lab:{},dental:{}}),[W,ae]=b.useState(0),[G,z]=b.useState(null),[le,je]=b.useState([]),[K,Oe]=b.useState(null),Ye=b.useCallback(async(re,ve)=>{p(!0),x(null);const ce=re||o,fe=ve||c;if(O(0),P(0),F(0),$(null),V(null),te(null),q({reception:{},pharmacy:{},lab:{},dental:{}}),Oe(null),Oe(null),ae(0),z(null),je([]),!ce||!fe){x("Please select both start and end dates."),p(!1);return}try{const se=bde(),[Q,ie,ge,ee,we,Ue]=await Promise.all([ue(`/api/bills?startDate=${o}&endDate=${c}&limit=10000`),ue(`/api/payment/admission?startDate=${o}&endDate=${c}`),ue(`/api/subscriptions/transactions/manual?startDate=${o}&endDate=${c}`),ue(`/api/patient-debts/collections/analysis?startDate=${o}&endDate=${c}`),se?ue(`/api/inventory/comprehensive-analysis?startDate=${o}&endDate=${c}&clinicId=${se}`):Promise.resolve(null),ue(`/api/distributors/payments/analysis?startDate=${o}&endDate=${c}`)]);if(Q.ok&&ie.ok&&ge.ok){const Ge=await Q.json(),Le=await ie.json(),oe=await ge.json(),_e=Ge.bills||[],$e=Le.admissionPayments||[],ze=oe||[];let Y={totalRevenue:0,totalCashCollected:0,revenueByType:{consultation:0,pharmacy:0,lab:0,dental:0,other:0},cashByMode:{},revenueByMode:{},detailedRevenue:{reception:{},pharmacy:{},lab:{},dental:{}},dailyRevenue:new Map,pharmacyReturns:0};const ye=(Ne,Be)=>{const Ee=Ne.split("T")[0];Y.dailyRevenue.set(Ee,(Y.dailyRevenue.get(Ee)||0)+Be)},pe=(Ne,Be,Ee,Ke,rt=!0)=>{const mt=Be.toLowerCase()==="credit";rt&&(Y.totalRevenue+=Ne,Y.revenueByType.hasOwnProperty(Ee)?Y.revenueByType[Ee]+=Ne:Y.revenueByType.other=(Y.revenueByType.other||0)+Ne,ye(Ke,Ne),Y.revenueByMode[Be]=(Y.revenueByMode[Be]||0)+Ne),mt||(Y.totalCashCollected+=Ne,Y.cashByMode[Be]=(Y.cashByMode[Be]||0)+Ne),rt&&(Ee==="pharmacy"?Y.detailedRevenue.pharmacy[Be]=(Y.detailedRevenue.pharmacy[Be]||0)+Ne:Ee==="lab"?Y.detailedRevenue.lab[Be]=(Y.detailedRevenue.lab[Be]||0)+Ne:Ee==="dental"?Y.detailedRevenue.dental[Be]=(Y.detailedRevenue.dental[Be]||0)+Ne:Ee!=="debt"&&(Y.detailedRevenue.reception[Be]=(Y.detailedRevenue.reception[Be]||0)+Ne)),Ee==="debt"&&(Y.detailedRevenue.debt=Y.detailedRevenue.debt||{},Y.detailedRevenue.debt[Be]=(Y.detailedRevenue.debt[Be]||0)+Ne)};if(_e.forEach(Ne=>{if(Ne.status==="paid"||Ne.type==="pharmacy_return"){let Be=parseFloat(Ne.amount.toString()),Ee=Ne.type||"other";if(Ee==="pharmacy_return"&&(Y.pharmacyReturns+=Be,Ee="pharmacy"),Ne.split_payments&&Array.isArray(Ne.split_payments)&&Ne.split_payments.length>0)Ne.split_payments.forEach(Ke=>{const rt=parseFloat(Ke.amount.toString()),mt=Ke.method||"Unknown",Pe=mt.toLowerCase()==="credit";Y.totalRevenue+=rt,Y.revenueByType.hasOwnProperty(Ee)?Y.revenueByType[Ee]+=rt:Y.revenueByType.other=(Y.revenueByType.other||0)+rt,ye(Ne.createdAt,rt),Y.revenueByMode[mt]=(Y.revenueByMode[mt]||0)+rt,Pe||(Y.totalCashCollected+=rt,Y.cashByMode[mt]=(Y.cashByMode[mt]||0)+rt),Ee==="pharmacy"?Y.detailedRevenue.pharmacy[mt]=(Y.detailedRevenue.pharmacy[mt]||0)+rt:Ee==="lab"?Y.detailedRevenue.lab[mt]=(Y.detailedRevenue.lab[mt]||0)+rt:Ee==="dental"?Y.detailedRevenue.dental[mt]=(Y.detailedRevenue.dental[mt]||0)+rt:Y.detailedRevenue.reception[mt]=(Y.detailedRevenue.reception[mt]||0)+rt});else{const Ke=Ne.payment_mode||"Unknown";pe(Be,Ke,Ee,Ne.createdAt,!0)}}}),$e.forEach(Ne=>{pe(parseFloat(Ne.amount_paid.toString()),Ne.payment_mode||"Unknown","consultation",Ne.payment_date,!0)}),ze.forEach(Ne=>{var Ke,rt;const Be=parseFloat(((rt=(Ke=Ne.subscriptionPlan)==null?void 0:Ke.price)==null?void 0:rt.toString())??"0"),Ee=Ne.subscription_payment_method||"manual";pe(Be,Ee,"consultation",Ne.subscription_start_date,!0)}),ee.ok){const Be=(await ee.json()).paymentModeBreakdown||{};Object.entries(Be).forEach(([Ee,Ke])=>{const rt=Number(Ke);pe(rt,Ee,"debt","",!1)})}if(P(Y.totalCashCollected),O(Y.totalRevenue),F(Y.pharmacyReturns),$(Y.cashByMode),V(Y.revenueByMode),te(Y.revenueByType),q(Y.detailedRevenue),Ue&&Ue.ok){const Ne=await Ue.json();ae(Ne.totalPaid||0),z(Ne.paymentModeBreakdown||{})}const me=Array.from(Y.dailyRevenue.entries()).sort((Ne,Be)=>new Date(Ne[0]).getTime()-new Date(Be[0]).getTime()).map(([Ne,Be])=>({date:Ne,amount:Be}));je(me)}if(we&&we.ok){const Ge=await we.json();Oe(Ge)}}catch(se){console.error("Analysis Fetch Error:",se),x("Failed to fetch analysis data. Please try again.")}finally{p(!1)}},[o,c]);b.useEffect(()=>{_(re=>{const ve=`analysis-${re}`,ce=document.getElementById(ve);ce&&(ce.scrollIntoView({behavior:"smooth",block:"center"}),ce.classList.add("ai-highlight-glow"),setTimeout(()=>ce.classList.remove("ai-highlight-glow"),2e3))})},[_]),b.useEffect(()=>{T(async()=>(await Ye(),null))},[T,Ye]),b.useEffect(()=>{if(S.startDate&&S.endDate){const re=S.startDate.toISOString().split("T")[0],ve=S.endDate.toISOString().split("T")[0];(re!==o||ve!==c)&&(l(re),d(ve))}},[S]),b.useEffect(()=>{const re=new URLSearchParams(e.search),ve=re.get("section"),ce=re.get("startDate"),fe=re.get("endDate");if(ce&&fe){l(ce),d(fe);const se=S.startDate?S.startDate.toISOString().split("T")[0]:null,Q=S.endDate?S.endDate.toISOString().split("T")[0]:null;(se!==ce||Q!==fe)&&v({startDate:new Date(ce),endDate:new Date(fe)})}if(ve){const se=`analysis-${ve}`;setTimeout(()=>{const Q=document.getElementById(se);Q&&(Q.scrollIntoView({behavior:"smooth",block:"center"}),Q.classList.add("ai-highlight-glow"),setTimeout(()=>Q.classList.remove("ai-highlight-glow"),2e3))},500)}},[e.search]),b.useEffect(()=>{Ye()},[o,c,Ye]),b.useEffect(()=>{!f&&(k>0||K)&&N({totalRevenue:C,totalCashFlow:k,totalExpenses:W,netCashFlow:k-W,collectionsBreakdown:B,revenueBreakdown:L,inventoryValue:0,pharmacyRevenue:(H==null?void 0:H.pharmacy)||0,labRevenue:(H==null?void 0:H.lab)||0,dentalRevenue:(H==null?void 0:H.dental)||0,receptionRevenue:((H==null?void 0:H.consultation)||0)+((H==null?void 0:H.other)||0),inventorySummary:K?{totalItemsAnalyzed:K.pharmacyAnalysis.length,netPositiveItems:K.pharmacyAnalysis.filter(re=>re.net_change>0).length}:null})},[C,k,W,B,L,K,H,f,N]);const Me=re=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(re),Ie=b.useMemo(()=>L?Object.entries(L).map(([re,ve])=>({name:re,value:ve})):[],[L]),be=b.useMemo(()=>H?[{name:"Consultation",value:H.consultation},{name:"Pharmacy",value:H.pharmacy},{name:"Lab",value:H.lab},{name:"Dental",value:H.dental},{name:"Debt Collections",value:H.debt||0},{name:"Other",value:H.other||0}].filter(re=>re.value>0):[],[H]);return r.jsxs("div",{className:yt.container,children:[r.jsxs("div",{className:yt.header,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:()=>t(-1),className:yt.backButton,title:"Go Back",children:[r.jsx(nn,{size:20})," Back"]}),r.jsx("h1",{className:yt.title,children:"Analysis Dashboard"})]}),r.jsxs("div",{className:yt.controls,children:[r.jsxs("div",{className:yt.dateInputGroup,children:[r.jsx("label",{className:yt.dateInputLabel,children:"From:"}),r.jsx("input",{type:"date",className:yt.dateInput,value:o,onChange:re=>{l(re.target.value),c&&v({startDate:new Date(re.target.value),endDate:new Date(c)})}})]}),r.jsxs("div",{className:yt.dateInputGroup,children:[r.jsx("label",{className:yt.dateInputLabel,children:"To:"}),r.jsx("input",{type:"date",className:yt.dateInput,value:c,onChange:re=>{d(re.target.value),o&&v({startDate:new Date(o),endDate:new Date(re.target.value)})}})]})]})]}),y&&r.jsxs("div",{className:yt.errorAlert,children:[r.jsx(Xr,{size:20}),r.jsx("span",{children:y})]}),!f&&r.jsxs("div",{children:[r.jsxs("section",{className:yt.section,id:"analysis-expenses",children:[r.jsxs("div",{className:yt.sectionTitle,children:[r.jsx(fw,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Cash Flow Analysis"})]}),r.jsxs("div",{className:yt.statsGrid,children:[r.jsxs("div",{className:yt.statCard,children:[r.jsx("div",{className:yt.statTitle,children:"Total Cash Inflow"}),r.jsx("div",{className:yt.statValue,style:{color:"var(--accent-success)"},children:Me(k)}),r.jsx("div",{className:yt.statSubtitle,children:"Collections (Cash, UPI, etc.)"})]}),r.jsxs("div",{className:yt.statCard,children:[r.jsx("div",{className:yt.statTitle,children:"Total Expenses"}),r.jsx("div",{className:yt.statValue,style:{color:"var(--accent-danger)"},children:Me(W)}),r.jsx("div",{className:yt.statSubtitle,children:"Distributor Payments"})]}),r.jsxs("div",{className:yt.statCard,children:[r.jsx("div",{className:yt.statTitle,children:"Net Cash Flow"}),r.jsx("div",{className:yt.statValue,style:{color:k-W>=0?"var(--accent-success)":"var(--accent-danger)"},children:Me(k-W)}),r.jsx("div",{className:yt.statSubtitle,children:"Inflow - Outflow"})]})]}),r.jsxs("div",{className:yt.revenueGrid,style:{marginTop:"1rem"},children:[B&&Object.keys(B).length>0&&r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Collections Breakdown"}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(B).map(([re,ve])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]}),G&&Object.keys(G).length>0&&r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Expense Breakdown"}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(G).map(([re,ve])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]})]})]}),r.jsxs("section",{className:yt.section,id:"analysis-financial",children:[r.jsxs("div",{className:yt.sectionTitle,children:[r.jsx(mf,{style:{color:"var(--accent-primary)"},size:24}),r.jsx("h2",{children:"Financial Performance"})]}),r.jsx("div",{className:yt.statsGrid,children:r.jsxs("div",{className:yt.statCard,children:[r.jsx("div",{className:yt.statTitle,children:"Total Revenue Generated"}),r.jsx("div",{className:yt.statValue,style:{color:"var(--accent-primary)"},children:Me(C)}),r.jsx("div",{className:yt.statSubtitle,children:"Billings & Services (Accrual)"})]})}),r.jsxs("div",{className:yt.chartsGrid,children:[r.jsxs("div",{className:yt.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx("h3",{children:"Revenue Trend (Daily)"}),r.jsx("div",{className:yt.chartWrapper,children:r.jsx(iw,{width:"100%",height:300,children:r.jsxs(TPe,{data:le,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"var(--accent-primary)",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"var(--accent-primary)",stopOpacity:.05})]})}),r.jsx(pb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx($c,{dataKey:"date",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Bc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:re=>`${re/1e3}k`}),r.jsx(Aa,{content:r.jsx(UA,{})}),r.jsx(Sd,{type:"monotone",dataKey:"amount",stroke:"var(--accent-primary)",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),r.jsxs("div",{className:yt.chartCard,children:[r.jsx("h3",{children:"Payment Method Distribution"}),r.jsx("div",{className:yt.chartWrapper,children:r.jsx(iw,{width:"100%",height:300,children:r.jsxs(FH,{children:[r.jsx(Rl,{data:Ie,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:Ie.map((re,ve)=>r.jsx(Fb,{fill:OB[ve%OB.length]},`cell-${ve}`))}),r.jsx(Aa,{content:r.jsx(UA,{})}),r.jsx(Tc,{verticalAlign:"bottom",height:36,formatter:re=>r.jsx("span",{style:{color:"var(--text-primary)"},children:re})})]})})})]}),r.jsxs("div",{className:yt.chartCard,children:[r.jsx("h3",{children:"Revenue by Source"}),r.jsx("div",{className:yt.chartWrapper,children:r.jsx(iw,{width:"100%",height:300,children:r.jsxs(LH,{data:be,children:[r.jsx(pb,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),r.jsx($c,{dataKey:"name",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(Bc,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:re=>`${re/1e3}k`}),r.jsx(Aa,{content:r.jsx(UA,{}),cursor:{fill:"var(--bg-primary)"}}),r.jsx(wd,{dataKey:"value",fill:"var(--accent-success)",radius:[4,4,0,0]})]})})})]})]}),X&&r.jsxs("div",{className:yt.sectionTitle,style:{marginTop:"2rem"},children:[r.jsx(mE,{style:{color:"var(--text-secondary)"},size:20}),r.jsx("h3",{children:"Detailed Breakdown"})]}),X&&r.jsxs("div",{className:yt.revenueGrid,children:[r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Reception / Clinic"}),r.jsx("div",{className:yt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Me(((H==null?void 0:H.consultation)||0)+((H==null?void 0:H.other)||0))}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(X.reception).map(([re,ve])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]}),r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Pharmacy"}),r.jsx("div",{className:yt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Me((H==null?void 0:H.pharmacy)||0)}),I<0&&r.jsxs("div",{className:`${yt.textRed} text-sm mb-2`,children:["Returns: ",Me(I)]}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(X.pharmacy).map(([re,ve])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]}),r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Laboratory"}),r.jsx("div",{className:yt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Me((H==null?void 0:H.lab)||0)}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(X.lab).map(([re,ve])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]}),r.jsxs("div",{className:yt.revenueCard,children:[r.jsx("h3",{className:yt.revenueCardTitle,children:"Dental"}),r.jsx("div",{className:yt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Me((H==null?void 0:H.dental)||0)}),r.jsx("ul",{className:yt.revenueCardList,children:Object.entries(X.dental).map(([re,ve])=>r.jsxs("li",{className:yt.revenueCardListItem,children:[r.jsx("span",{children:re}),r.jsx("span",{children:Me(ve)})]},re))})]})]})]}),r.jsxs("section",{className:yt.section,id:"analysis-inventory",children:[r.jsxs("div",{className:yt.sectionTitle,children:[r.jsx(yf,{style:{color:"var(--accent-success)"},size:24}),r.jsx("h2",{children:"Inventory Movement"})]}),K&&K.pharmacyAnalysis.length>0?r.jsx("div",{className:yt.tableContainer,children:r.jsxs("table",{className:yt.table,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Item Name"}),r.jsx("th",{children:"Stock In"}),r.jsx("th",{children:"Stock Out"}),r.jsx("th",{children:"Net Change"}),r.jsx("th",{className:yt.textRight,children:"Est. Revenue"}),r.jsx("th",{className:yt.textRight,children:"Est. Profit"})]})}),r.jsx("tbody",{children:K.pharmacyAnalysis.map(re=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{style:{fontWeight:600},children:re.name}),r.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:re.supplier})]}),r.jsxs("td",{className:yt.textGreen,children:["+",re.quantity_in,Object.entries(re.quantity_in_by_reason).map(([ve,ce])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[ve,": ",ce]},ve))]}),r.jsxs("td",{className:yt.textRed,children:["-",re.quantity_out,Object.entries(re.quantity_out_by_reason).map(([ve,ce])=>r.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[ve,": ",ce]},ve))]}),r.jsx("td",{children:r.jsxs("span",{style:{fontWeight:600},className:re.net_change>=0?yt.textGreen:yt.textRed,children:[re.net_change>0?"+":"",re.net_change]})}),r.jsx("td",{className:yt.textRight,children:Me(re.revenue)}),r.jsx("td",{className:`${yt.textRight} ${re.profit>=0?yt.textGreen:yt.textRed}`,children:Me(re.profit)})]},re.drug_id))})]})}):r.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No inventory movement recorded for this period."})]})]}),f&&r.jsxs("div",{className:yt.loadingContainer,style:{display:"block"},children:[r.jsxs("div",{className:yt.sectionTitle,children:[r.jsx(Z,{variant:"circular",width:24,height:24}),r.jsx(Z,{width:200,height:24})]}),r.jsxs("div",{className:yt.statsGrid,children:[r.jsxs("div",{className:yt.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]}),r.jsxs("div",{className:yt.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]}),r.jsxs("div",{className:yt.statCard,children:[r.jsx(Z,{width:"60%",height:20}),r.jsx(Z,{width:"80%",height:32}),r.jsx(Z,{width:"40%",height:16})]})]}),r.jsx("div",{style:{marginTop:"2rem"},children:r.jsxs("div",{className:yt.chartsGrid,children:[r.jsxs("div",{className:yt.chartCard,style:{gridColumn:"1 / -1"},children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:250})]}),r.jsxs("div",{className:yt.chartCard,children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:200,variant:"circular",style:{margin:"0 auto"}})]}),r.jsxs("div",{className:yt.chartCard,children:[r.jsx(Z,{width:180,height:24,className:"mb-4"}),r.jsx(Z,{width:"100%",height:250})]})]})})]})]})},DB=()=>{const t=Mt(),e=as(),[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,d]=b.useState(""),[f,p]=b.useState("debtHighToLow"),[y,x]=b.useState(!0),[v,S]=b.useState(""),[N,_]=b.useState(!1),[T,C]=b.useState(!1),[O,k]=b.useState(null),[P,I]=b.useState([]),[F,B]=b.useState(null),[$,L]=b.useState(""),[V,H]=b.useState(""),[te,X]=b.useState(""),[q,W]=b.useState("cash"),[ae,G]=b.useState(0),z=b.useMemo(()=>{let re=[...n];y&&(re=re.filter(ce=>parseFloat(ce.netDebt)>0));const ve=parseFloat(v);switch(!isNaN(ve)&&ve>0&&(re=re.filter(ce=>parseFloat(ce.netDebt)>=ve)),f){case"name":re.sort((ce,fe)=>ce.name.localeCompare(fe.name));break;case"debtHighToLow":re.sort((ce,fe)=>parseFloat(fe.netDebt)-parseFloat(ce.netDebt));break;case"debtLowToHigh":re.sort((ce,fe)=>parseFloat(ce.netDebt)-parseFloat(fe.netDebt));break}return re},[n,y,v,f]),le=b.useCallback(async()=>{s(!0),l(null);try{const re=c?`/api/patient-debts?search=${encodeURIComponent(c)}`:"/api/patient-debts",ve=await ue(re);if(!ve.ok)throw new Error(`Failed to fetch patients with debt: ${ve.statusText}`);const ce=await ve.json();i(ce);const fe=ce.reduce((se,Q)=>se+parseFloat(Q.netDebt||"0"),0);G(fe)}catch(re){console.error("Failed to fetch patients with debt:",re),l(re.message||"Failed to load patients with debt.")}finally{s(!1)}},[c]);b.useEffect(()=>{le()},[le]);const je=b.useCallback(async re=>{l(null);try{const ve=await ue(`/api/patient-debts/${re}/transactions`);if(!ve.ok)throw new Error(`Failed to fetch transactions: ${ve.statusText}`);const fe=(await ve.json()).map(ie=>({...ie,debt_value:parseFloat(ie.debt_value),amount_paid:parseFloat(ie.amount_paid),balance_remaining:parseFloat(ie.balance_remaining)}));I(fe);const se=await ue(`/api/patient-debts/${re}/balance`);if(!se.ok)throw new Error(`Failed to fetch balance: ${se.statusText}`);const Q=await se.json();B({patientId:Q.patientId,patientName:Q.patientName,totalDebtValue:parseFloat(Q.totalDebtValue),totalAmountPaid:parseFloat(Q.totalAmountPaid),netDebt:parseFloat(Q.netDebt)})}catch(ve){console.error("Error fetching transactions/balance:",ve),l(ve.message||"Failed to load transactions or balance.")}},[]),K=re=>{re&&(e.prefetchQuery({queryKey:Ut.patients.context(re),queryFn:async()=>{const ve=await ue(`/api/patients/${re}/context`);if(!ve.ok)throw new Error("Failed to fetch patient context");return ve.json()},staleTime:1e3*60*5}),e.prefetchQuery({queryKey:Ut.patientDebts.balance(re),queryFn:async()=>{const ve=await ue(`/api/patient-debts/${re}/balance`);if(!ve.ok)throw new Error("Failed to fetch patient debt");return ve.json()},staleTime:1e3*60}),e.prefetchQuery({queryKey:Ut.queue.latest(re),queryFn:async()=>{const ve=await ue(`/api/queue/patient/${re}/latest`);if(!ve.ok){if(ve.status===404)return null;throw new Error("Failed to fetch queue status")}return ve.json()},staleTime:1e3*5}))},Oe=async re=>{if(re.preventDefault(),l(null),!O)return;const ve=parseFloat(V||"0");if(ve<=0){l("Payment amount must be greater than 0");return}try{const ce=await ue(`/api/patient-debts/${O.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:$,amount_paid:ve,notes:te,payment_mode:q})});if(!ce.ok){const fe=await ce.json();throw new Error(fe.message||"Failed to add payment.")}be(),je(O.id),le()}catch(ce){console.error("Error adding payment:",ce),l(ce.message||"Failed to add payment.")}},Ye=re=>{k(re),je(re.id),l(null),_(!0)},Me=()=>{_(!1),k(null),I([]),B(null)},Ie=re=>{k(re),L(new Date().toISOString().split("T")[0]),H(""),X(""),W("cash"),l(null),C(!0)},be=()=>{C(!1),k(null)};return a?r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(Z,{width:80,height:36}),r.jsx(Z,{width:200,height:32})]}),r.jsx(Z,{width:250,height:36})]}),r.jsxs("div",{className:"filter-container",children:[r.jsx(Z,{width:200,height:40}),r.jsx(Z,{width:120,height:40}),r.jsx(Z,{width:100,height:40}),r.jsx(Z,{width:150,height:40})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Total Debt Value"}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6].map(re=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:100,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:32})})]},re))})]})})]}):r.jsxs("div",{className:"patient-debt-management-page",children:[r.jsxs("div",{className:"patient-debt-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:r.jsx(nn,{size:20})}),r.jsx("h2",{children:"Patient Debt Management"})]}),r.jsxs("div",{className:`total-debt-display ${ae>0?"debt-positive":"debt-zero"}`,children:[r.jsx(mf,{size:20}),r.jsx("strong",{children:"Total Outstanding Debt:"})," ",ae.toFixed(2)]})]}),o&&r.jsx("div",{className:"error-message",children:o}),r.jsxs("div",{className:"filter-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or phone...",value:c,onChange:re=>d(re.target.value),className:"filter-search-input"}),r.jsxs("select",{id:"sortBy",value:f,onChange:re=>p(re.target.value),className:"filter-select",title:"Sort by",children:[r.jsx("option",{value:"debtHighToLow",children:"Debt "}),r.jsx("option",{value:"debtLowToHigh",children:"Debt "}),r.jsx("option",{value:"name",children:"Name A-Z"})]}),r.jsx("input",{type:"number",id:"minDebt",value:v,onChange:re=>S(re.target.value),placeholder:"Min ",min:"0",className:"filter-number-input",title:"Minimum debt amount"}),r.jsxs("label",{className:"filter-checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:y,onChange:re=>x(re.target.checked)}),"Outstanding only"]}),r.jsxs("span",{className:"filter-count",children:[z.length,"/",n.length]})]}),r.jsx("div",{className:"debt-table-container",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsxs("th",{children:[r.jsx(vr,{size:14})," Patient Name"]}),r.jsxs("th",{children:[r.jsx(Jm,{size:14})," Phone"]}),r.jsxs("th",{children:[r.jsx(BO,{size:14})," Total Debt Value"]}),r.jsx("th",{children:"Total Paid"}),r.jsx("th",{children:"Net Debt (Outstanding)"}),r.jsx("th",{className:"actions-cell",children:"Actions"})]})}),r.jsx("tbody",{children:z.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"no-results-message",children:c?"No patients found matching your search.":"No patients with outstanding debt."})}):z.map(re=>r.jsxs("tr",{onClick:()=>t(`/dashboard/edit-complaint/patient/${re.id}`),onMouseEnter:()=>K(re.id),style:{cursor:"pointer"},title:"Click to view patient details",children:[r.jsx("td",{"data-label":"Patient Name",children:r.jsxs("div",{className:"patient-name-cell",children:[r.jsx("strong",{children:re.name}),re.age&&re.gender&&r.jsxs("span",{className:"patient-meta",children:[re.age,"y / ",re.gender]})]})}),r.jsx("td",{"data-label":"Phone",children:re.phone||"-"}),r.jsxs("td",{"data-label":"Total Debt Value",children:["",re.totalDebtValue]}),r.jsxs("td",{"data-label":"Total Paid",className:"amount-paid",children:["",re.totalAmountPaid]}),r.jsxs("td",{"data-label":"Net Debt",className:parseFloat(re.netDebt)>0?"debt-outstanding":"debt-clear",children:["",re.netDebt]}),r.jsx("td",{className:"actions-cell",onClick:ve=>ve.stopPropagation(),children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsxs("button",{onClick:()=>Ye(re),className:"action-text-button view-button",title:"View Transactions",children:[r.jsx(Dm,{size:16})," View History"]}),r.jsxs("button",{onClick:()=>Ie(re),className:"action-text-button add-payment-button",title:"Record Payment",children:[r.jsx(_s,{size:16})," Record Payment"]})]})})]},re.id))})]})}),N&&O&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsx("button",{onClick:Me,className:"modal-close-button",children:""}),r.jsxs("h3",{className:"modal-title",children:["Debt History for ",O.name]}),o&&r.jsx("div",{className:"modal-error-message",children:o}),F&&r.jsxs("div",{className:"balance-summary",children:[r.jsxs("div",{className:"balance-row",children:[r.jsx("span",{children:"Total Debt Value:"}),r.jsxs("strong",{children:["",F.totalDebtValue.toFixed(2)]})]}),r.jsxs("div",{className:"balance-row",children:[r.jsx("span",{children:"Total Amount Paid:"}),r.jsxs("strong",{className:"amount-paid",children:["",F.totalAmountPaid.toFixed(2)]})]}),r.jsxs("div",{className:"balance-row net-debt-row",children:[r.jsx("span",{children:r.jsx("strong",{children:"Net Outstanding Debt:"})}),r.jsxs("strong",{className:F.netDebt>0?"debt-outstanding":"debt-clear",children:["",F.netDebt.toFixed(2)]})]})]}),r.jsx("h4",{children:"Transaction History"}),P.length===0?r.jsx("p",{children:"No transactions recorded for this patient."}):r.jsx("div",{className:"table-responsive",children:r.jsxs("table",{className:"debt-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Debt Added"}),r.jsx("th",{children:"Payment Received"}),r.jsx("th",{children:"Balance After"}),r.jsx("th",{children:"Due Date"}),r.jsx("th",{children:"Payment Mode"}),r.jsx("th",{children:"Notes"})]})}),r.jsx("tbody",{children:P.map(re=>r.jsxs("tr",{children:[r.jsx("td",{"data-label":"Date",children:new Date(re.transaction_date).toLocaleDateString()}),r.jsx("td",{"data-label":"Debt Added",className:re.debt_value>0?"debt-added":"",children:re.debt_value>0?`+ ${re.debt_value.toFixed(2)}`:"-"}),r.jsx("td",{"data-label":"Payment Received",className:re.amount_paid>0?"payment-received":"",children:re.amount_paid>0?`- ${re.amount_paid.toFixed(2)}`:"-"}),r.jsxs("td",{"data-label":"Balance After",children:["",re.balance_remaining.toFixed(2)]}),r.jsx("td",{"data-label":"Due Date",children:re.due_date?new Date(re.due_date).toLocaleDateString():"-"}),r.jsx("td",{"data-label":"Payment Mode",children:re.payment_mode?re.payment_mode.charAt(0).toUpperCase()+re.payment_mode.slice(1):"-"}),r.jsx("td",{"data-label":"Notes",children:re.notes||"-"})]},re.id))})]})}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:()=>{Me(),Ie(O)},className:"button-submit",children:"Record Payment"}),r.jsx("button",{type:"button",onClick:Me,className:"button-cancel",children:"Close"})]})]})}),T&&O&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:be,className:"modal-close-button",children:""}),r.jsxs("h3",{className:"modal-title",children:["Record Payment for ",O.name]}),r.jsxs("div",{className:"current-debt-info",children:[r.jsx("span",{children:"Current Outstanding Debt:"}),r.jsxs("strong",{className:"debt-outstanding",children:["",O.netDebt]})]}),o&&r.jsx("div",{className:"modal-error-message",children:o}),r.jsxs("form",{onSubmit:Oe,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_date",children:"Payment Date:"}),r.jsx("input",{type:"date",id:"payment_date",value:$,onChange:re=>L(re.target.value),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"amount_paid",children:"Amount Paid ():"}),r.jsx("input",{type:"number",id:"amount_paid",value:V,onChange:re=>H(re.target.value),step:"0.01",min:"0.01",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_mode",children:"Payment Mode:"}),r.jsxs("select",{id:"payment_mode",value:q,onChange:re=>W(re.target.value),children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Online"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"payment_notes",children:"Notes:"}),r.jsx("textarea",{id:"payment_notes",value:te,onChange:re=>X(re.target.value),placeholder:"e.g., Partial payment via cash"})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:be,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Record Payment"})]})]})]})})]})},m4e=()=>{const t=Mt(),[e,n]=b.useState([]),[i,a]=b.useState(!0),[,s]=b.useState(null),[o,l]=b.useState(!1),[c,d]=b.useState(null),[f,p]=b.useState({name:"",description:"",columns:[]}),y=async()=>{a(!0);try{const C=await ue("/api/custom-tables");if(!C.ok)throw new Error("Failed to fetch tables");const O=await C.json();n(O)}catch(C){s(C.message)}finally{a(!1)}};b.useEffect(()=>{y()},[]);const x=C=>{C?(d(C),p({name:C.name,description:C.description,columns:[...C.columns]})):(d(null),p({name:"",description:"",columns:[]})),l(!0)},v=async()=>{try{const C=c?`/api/custom-tables/${c.id}`:"/api/custom-tables";if(!(await ue(C,{method:c?"PUT":"POST",body:JSON.stringify(f)})).ok)throw new Error("Failed to save table");l(!1),y()}catch(C){alert(C.message)}},S=async C=>{if(confirm("Are you sure? This will delete all data in this table!"))try{await ue(`/api/custom-tables/${C}`,{method:"DELETE"}),y()}catch(O){alert(O.message)}},N=()=>{p(C=>({...C,columns:[...C.columns,{key:`col_${Date.now()}`,label:"New Column",type:"text"}]}))},_=(C,O,k)=>{const P=[...f.columns];P[C]={...P[C],[O]:k},O==="label"&&(P[C].key=k.toLowerCase().replace(/[^a-z0-9]/g,"_")),p(I=>({...I,columns:P}))},T=C=>{p(O=>({...O,columns:O.columns.filter((k,P)=>P!==C)}))};return r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("h1",{children:[r.jsx(Ab,{size:24})," Custom Tables Manager"]}),r.jsxs("button",{className:"primary-button",onClick:()=>x(),children:[r.jsx(ur,{size:16})," Create New Table"]})]}),i?r.jsx("p",{children:"Loading..."}):r.jsx("div",{className:"tables-grid",children:e.map(C=>r.jsxs("div",{className:"table-card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{children:C.name}),r.jsxs("div",{className:"actions",children:[r.jsx("button",{onClick:()=>x(C),children:r.jsx(Ia,{size:16})}),r.jsx("button",{onClick:()=>S(C.id),className:"danger",children:r.jsx(Wn,{size:16})})]})]}),r.jsx("p",{className:"description",children:C.description||"No description"}),r.jsxs("div",{className:"column-preview",children:[C.columns.length," columns defined"]}),r.jsx("button",{className:"secondary-button",onClick:()=>t(`/custom-tables/${C.id}`),children:"View Data & Records"})]},C.id))}),o&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:c?"Edit Table":"Create New Table"}),r.jsx("button",{onClick:()=>l(!1),children:r.jsx(qt,{size:20})})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Table Name"}),r.jsx("input",{value:f.name,onChange:C=>p({...f,name:C.target.value}),placeholder:"e.g., Equipment Log"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("textarea",{value:f.description,onChange:C=>p({...f,description:C.target.value})})]}),r.jsxs("div",{className:"columns-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h3",{children:"Columns"}),r.jsx("button",{onClick:N,className:"icon-button",children:r.jsx(ur,{size:16})})]}),f.columns.map((C,O)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{value:C.label,onChange:k=>_(O,"label",k.target.value),placeholder:"Column Name"}),r.jsxs("select",{value:C.type,onChange:k=>_(O,"type",k.target.value),children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>T(O),className:"danger",children:r.jsx(Wn,{size:14})})]},O))]})]}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:v,className:"primary-button",children:"Save Table"})})]})})]})},g4e=()=>{const{id:t}=Oi(),e=Mt(),[n,i]=b.useState(null),[a,s]=b.useState([]),[o,l]=b.useState(!0),[c,d]=b.useState(null),[f,p]=b.useState(!1),[y,x]=b.useState(!1),[v,S]=b.useState(null),[N,_]=b.useState({});b.useEffect(()=>{t&&T()},[t]);const T=async()=>{l(!0);try{const I=await ue(`/api/custom-tables/${t}`);if(!I.ok)throw new Error("Failed to fetch table definition");const F=await I.json();i(F);const B=await ue(`/api/custom-tables/${t}/records`);if(!B.ok)throw new Error("Failed to fetch records");const $=await B.json();s($)}catch(I){d(I.message)}finally{l(!1)}},C=I=>{I?(S(I),_({...I.data})):(S(null),_({})),x(!0)},O=async()=>{try{const I=v?`/api/custom-tables/records/${v.id}`:`/api/custom-tables/${t}/records`;if(!(await ue(I,{method:v?"PUT":"POST",body:JSON.stringify({data:N})})).ok)throw new Error("Failed to save record");x(!1),T()}catch(I){alert(I.message)}},k=async I=>{if(confirm("Delete this record?"))try{await ue(`/api/custom-tables/records/${I}`,{method:"DELETE"}),T()}catch(F){alert(F.message)}},P=I=>{const F=N[I.key]||"";switch(I.type){case"boolean":return r.jsxs("select",{value:F,onChange:B=>_({...N,[I.key]:B.target.value}),children:[r.jsx("option",{value:"",children:"Select..."}),r.jsx("option",{value:"true",children:"Yes"}),r.jsx("option",{value:"false",children:"No"})]});case"number":return r.jsx("input",{type:"number",value:F,onChange:B=>_({...N,[I.key]:B.target.value})});case"date":return r.jsx("input",{type:"date",value:F,onChange:B=>_({...N,[I.key]:B.target.value})});default:return r.jsx("input",{type:"text",value:F,onChange:B=>_({...N,[I.key]:B.target.value})})}};return o?r.jsx("div",{className:"p-4",children:"Loading..."}):c||!n?r.jsxs("div",{className:"p-4 error",children:["Error: ",c||"Table not found"]}):r.jsxs("div",{className:"custom-tables-container",children:[r.jsxs("div",{className:"header-section",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[r.jsx("button",{onClick:()=>e("/custom-tables"),className:"icon-button",children:r.jsx(nn,{size:20})}),r.jsx("h1",{children:n.name})]}),r.jsxs("div",{className:"view-mode-toggle",children:[r.jsxs("button",{onClick:()=>p(!1),className:`view-mode-btn ${f?"":"active"}`,title:"List View",children:[r.jsx(kb,{size:18})," List"]}),r.jsxs("button",{onClick:()=>p(!0),className:`view-mode-btn ${f?"active":""}`,title:"Excel Mode (Edit)",children:[r.jsx(gf,{size:18})," Excel"]})]}),r.jsxs("button",{className:"primary-button",onClick:()=>C(),children:[r.jsx(ur,{size:16})," Add Record"]})]}),r.jsx("div",{className:"table-wrapper",style:{background:"var(--bg-card)",borderRadius:"12px",padding:"20px",overflowX:"auto"},children:f?r.jsx(Ib,{columns:n.columns.map(I=>({key:I.key,label:I.label,editable:!0,type:I.type})),data:a.map(I=>({...I.data,id:I.id})),editable:!0,showRowNumbers:!0,title:n.name,onSave:async I=>{const F=I.map(async B=>{const $=a.find(L=>L.id===B.id);if($&&JSON.stringify($.data)!==JSON.stringify(B)){const{id:L,...V}=B;if(JSON.stringify($.data)!==JSON.stringify(V))return ue(`/api/custom-tables/records/${B.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:V})})}});try{await Promise.all(F),T()}catch(B){alert("Error saving changes"),console.error(B)}}}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{children:[n.columns.map(I=>r.jsx("th",{style:{textAlign:"left",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:I.label},I.key)),r.jsx("th",{style:{width:"100px",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:"Actions"})]})}),r.jsx("tbody",{children:a.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:n.columns.length+1,style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"No records yet"})}):a.map(I=>r.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.columns.map(F=>r.jsx("td",{style:{padding:"12px"},children:F.type==="boolean"?I.data[F.key]==="true"?"Yes":"No":String(I.data[F.key]||"-")},F.key)),r.jsx("td",{style:{padding:"12px"},children:r.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.jsx("button",{onClick:()=>C(I),className:"icon-button",children:r.jsx(Ia,{size:16})}),r.jsx("button",{onClick:()=>k(I.id),className:"icon-button",style:{color:"#dc3545"},children:r.jsx(Wn,{size:16})})]})})]},I.id))})]})}),y&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content large-modal",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:v?"Edit Record":"Add New Record"}),r.jsx("button",{onClick:()=>x(!1),children:r.jsx(qt,{size:20})})]}),r.jsx("div",{className:"modal-body",children:n.columns.map(I=>r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:I.label}),P(I)]},I.key))}),r.jsx("div",{className:"modal-footer",children:r.jsx("button",{onClick:O,className:"primary-button",children:"Save Record"})})]})})]})},y4e=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(""),o=Mt();b.useEffect(()=>{l()},[]);const l=async()=>{try{const p=await ue("/api/dashboards");if(p.ok){const y=await p.json();e(y)}}catch(p){console.error("Error fetching dashboards:",p)}finally{i(!1)}},c=async(p,y)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this dashboard?"))try{await ue(`/api/dashboards/${y}`,{method:"DELETE"}),e(t.filter(x=>x.id!==y))}catch(x){console.error("Error deleting dashboard:",x)}},d=p=>{try{const y=new Date(p);return y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:y.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}},f=t.filter(p=>p.name.toLowerCase().includes(a.toLowerCase())||p.description&&p.description.toLowerCase().includes(a.toLowerCase()));return r.jsxs("div",{className:"custom-dashboards-container",children:[r.jsxs("div",{className:"cdp-header",children:[r.jsxs("div",{className:"cdp-title-row",children:[r.jsxs("div",{className:"cdp-title",children:[r.jsx("div",{className:"cdp-icon",children:r.jsx(gf,{size:20})}),r.jsxs("div",{children:[r.jsx("h1",{children:"Custom Dashboards"}),r.jsxs("span",{className:"cdp-subtitle",children:[t.length," dashboard",t.length!==1?"s":""]})]})]}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(ur,{size:16}),r.jsx("span",{className:"cdp-btn-text",children:"Create"})]})]}),t.length>0&&r.jsxs("div",{className:"cdp-search",children:[r.jsx(Hn,{size:16}),r.jsx("input",{type:"text",placeholder:"Search dashboards...",value:a,onChange:p=>s(p.target.value)})]})]}),r.jsx("div",{className:"cdp-content",children:n?r.jsx("div",{className:"cdp-grid",children:[1,2,3,4,5,6].map(p=>r.jsxs("div",{className:"cdp-card",style:{cursor:"default"},children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx(Z,{width:18,height:18,variant:"circular"}),r.jsx(Z,{width:80,height:12})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx(Z,{width:"70%",height:24,style:{marginBottom:"8px"}}),r.jsx(Z,{width:"90%",height:16})]}),r.jsxs("div",{className:"cdp-card-footer",style:{borderTop:"none"},children:[r.jsx(Z,{width:60,height:32}),r.jsx(Z,{width:60,height:32}),r.jsx(Z,{width:32,height:32})]})]},p))}):f.length===0?r.jsxs("div",{className:"cdp-empty",children:[r.jsx("div",{className:"cdp-empty-icon",children:r.jsx(Xm,{size:48})}),a?r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No results found"}),r.jsx("p",{children:"Try a different search term"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{children:"No dashboards yet"}),r.jsx("p",{children:"Create your first custom dashboard to get started"}),r.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[r.jsx(ur,{size:16})," Create Dashboard"]})]})]}):r.jsx("div",{className:"cdp-grid",children:f.map(p=>r.jsxs("div",{className:"cdp-card",onClick:()=>o(`/dashboards/${p.id}`),children:[r.jsxs("div",{className:"cdp-card-header",children:[r.jsx("div",{className:"cdp-card-icon",children:r.jsx(Xm,{size:18})}),r.jsx("div",{className:"cdp-card-meta",children:p.created_at&&r.jsxs("span",{className:"cdp-card-date",children:[r.jsx(gi,{size:12}),d(p.created_at)]})})]}),r.jsxs("div",{className:"cdp-card-body",children:[r.jsx("h3",{children:p.name}),r.jsx("p",{children:p.description||"No description"})]}),r.jsxs("div",{className:"cdp-card-footer",children:[r.jsxs("button",{className:"cdp-action-btn cdp-view-btn",onClick:y=>{y.stopPropagation(),o(`/dashboards/${p.id}`)},children:[r.jsx(Dm,{size:14}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{className:"cdp-action-btn cdp-edit-btn",onClick:y=>{y.stopPropagation(),o(`/dashboards/${p.id}/edit`)},children:[r.jsx(Ia,{size:14}),r.jsx("span",{children:"Edit"})]}),r.jsx("button",{className:"cdp-action-btn cdp-delete-btn",onClick:y=>c(y,p.id),children:r.jsx(Wn,{size:14})})]})]},p.id))})})]})},x4e=({isOpen:t,onClose:e,onConfirm:n})=>{const[i,a]=b.useState({}),[s,o]=b.useState(""),[l,c]=b.useState(""),[d,f]=b.useState([]),[p,y]=b.useState([]),[x,v]=b.useState(!1);b.useEffect(()=>{t&&S()},[t]);const S=async()=>{v(!0);try{const I=await ue("/api/dashboards/table-relations");if(I.ok){const F=await I.json();a(F);const B=Object.keys(F);B.length>0&&o(B[0])}}catch(I){console.error("Error fetching table relations:",I)}finally{v(!1)}},N=I=>{o(I),c(""),f([]),y([])},_=I=>{c(I),y([])},T=(I,F,B)=>{I.includes(B)?F(I.filter($=>$!==B)):F([...I,B])},C=()=>{var I,F;if(!s||!l){alert("Please select both primary and related tables");return}if(d.length===0&&p.length===0){alert("Please select at least one column");return}n({primary:s,related:l,primaryColumns:d,relatedColumns:p,primaryLabel:((I=i[s])==null?void 0:I.label)||s,relatedLabel:((F=i[l])==null?void 0:F.label)||l}),e()};if(!t)return null;const O=i[s],k=(O==null?void 0:O.relations)||{},P=i[l];return r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{children:[r.jsx(zz,{size:18})," Join Tables Builder"]}),r.jsx("button",{onClick:e,className:"close-button",children:r.jsx(qt,{size:20})})]}),x?r.jsx("div",{children:"Loading tables..."}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",padding:"20px"},children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 1:"})," Select Primary Table"]}),r.jsx("select",{value:s,onChange:I=>N(I.target.value),style:{width:"100%",padding:"8px"},children:Object.entries(i).filter(([I,F])=>Object.keys(F.relations).length>0).map(([I,F])=>r.jsx("option",{value:I,children:F.label},I))})]}),s&&Object.keys(k).length>0&&r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx("strong",{children:"Step 2:"})," Select Related Table"]}),r.jsxs("select",{value:l,onChange:I=>_(I.target.value),style:{width:"100%",padding:"8px"},children:[r.jsx("option",{value:"",children:"-- Select --"}),Object.entries(k).map(([I,F])=>r.jsxs("option",{value:I,children:[F.label," (via ",F.foreignKey,")"]},I))]})]}),s&&O&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",O.label,":"]})}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px"},children:O.columns.map(I=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",background:d.includes(I)?"#e0f0ff":"#f0f0f0",padding:"4px 8px",borderRadius:"4px"},children:[r.jsx("input",{type:"checkbox",checked:d.includes(I),onChange:()=>T(d,f,I)}),I]},I))})]}),l&&P&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:r.jsxs("strong",{children:["Columns from ",P.label,":"]})}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px"},children:P.columns.map(I=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",background:p.includes(I)?"#e0ffe0":"#f0f0f0",padding:"4px 8px",borderRadius:"4px"},children:[r.jsx("input",{type:"checkbox",checked:p.includes(I),onChange:()=>T(p,y,I)}),I]},I))})]}),d.length>0||p.length>0?r.jsxs("div",{style:{background:"#f8f9fa",padding:"10px",borderRadius:"4px"},children:[r.jsx("strong",{children:"Preview Columns:"}),r.jsxs("div",{style:{marginTop:"5px",fontSize:"0.9em"},children:[d.map(I=>r.jsxs("span",{style:{marginRight:"8px",color:"#0066cc"},children:[O==null?void 0:O.label,".",I]},I)),p.map(I=>r.jsxs("span",{style:{marginRight:"8px",color:"#009900"},children:[P==null?void 0:P.label,".",I]},I))]})]}):null]}),r.jsxs("div",{className:"modal-actions",style:{padding:"15px",borderTop:"1px solid #eee"},children:[r.jsx("button",{onClick:e,children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:C,disabled:!l,children:"Create Joined Widget"})]})]})})},v4e=({isOpen:t,onClose:e,onCreated:n})=>{const[i,a]=b.useState(""),[s,o]=b.useState(""),[l,c]=b.useState([{key:"name",label:"Name",type:"text"}]),[d,f]=b.useState(!1),p=()=>{c([...l,{key:"",label:"",type:"text"}])},y=S=>{c(l.filter((N,_)=>_!==S))},x=(S,N,_)=>{const T=[...l];T[S]={...T[S],[N]:_},N==="label"&&!T[S].key&&(T[S].key=_.toLowerCase().replace(/\s+/g,"_")),c(T)},v=async()=>{if(!i.trim()){alert("Table name is required");return}if(l.length===0||l.some(S=>!S.key||!S.label)){alert("All columns must have a key and label");return}f(!0);try{(await ue("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,description:s,columns:l})})).ok?(n(),e(),a(""),o(""),c([{key:"name",label:"Name",type:"text"}])):alert("Failed to create table")}catch(S){console.error("Error creating table:",S),alert("Error creating table")}finally{f(!1)}};return t?r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content create-table-modal-content",children:[r.jsxs("div",{className:"create-table-header",children:[r.jsxs("h3",{children:[r.jsx(Ab,{size:20})," Create Custom Table"]}),r.jsx("button",{onClick:e,className:"close-btn",children:r.jsx(qt,{size:20})})]}),r.jsxs("div",{className:"form-content",children:[r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Table Name *"}),r.jsx("input",{type:"text",value:i,onChange:S=>a(S.target.value),placeholder:"e.g., Patient Notes, Appointments",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:s,onChange:S=>o(S.target.value),placeholder:"Optional description",className:"modal-input"})]}),r.jsxs("div",{className:"form-field-group",children:[r.jsx("label",{children:"Columns"}),r.jsx("div",{className:"columns-container",children:l.map((S,N)=>r.jsxs("div",{className:"column-row",children:[r.jsx("input",{type:"text",value:S.label,onChange:_=>x(N,"label",_.target.value),placeholder:"Column label",className:"modal-input column-label-input"}),r.jsx("input",{type:"text",value:S.key,onChange:_=>x(N,"key",_.target.value),placeholder:"key",className:"modal-input column-key-input"}),r.jsxs("select",{value:S.type,onChange:_=>x(N,"type",_.target.value),className:"column-type-select",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"date",children:"Date"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),r.jsx("button",{onClick:()=>y(N),className:"remove-col-btn",disabled:l.length<=1,children:r.jsx(Wn,{size:16})})]},N))}),r.jsxs("button",{onClick:p,className:"add-col-btn",children:[r.jsx(ur,{size:14})," Add Column"]})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:e,className:"cancel-button",children:"Cancel"}),r.jsx("button",{onClick:v,disabled:d,className:"create-button",children:d?"Creating...":"Create Table"})]})]})}):null},MB=()=>{const{id:t}=Oi(),e=Mt(),n=!!t,[i,a]=b.useState(""),[s,o]=b.useState(""),[l,c]=b.useState([]),[d,f]=b.useState(!1),[p,y]=b.useState([]),[x,v]=b.useState(!1),[S,N]=b.useState("stat"),[_,T]=b.useState(""),[C,O]=b.useState("api:patients"),[k,P]=b.useState([]),[I,F]=b.useState(!1),[B,$]=b.useState(!1);b.useEffect(()=>{L(),n&&V()},[t]);const L=async()=>{try{const G=await ue("/api/dashboards/data-sources");if(G.ok){const z=await G.json();y(z),z.length>0&&O(z[0].key)}}catch(G){console.error("Error fetching data sources:",G)}},V=async()=>{try{const G=await ue(`/api/dashboards/${t}`);if(G.ok){const z=await G.json();a(z.name),o(z.description),c(z.widgets||[])}}catch(G){console.error("Error fetching dashboard:",G)}},H=async()=>{if(!i.trim())return alert("Name is required");f(!0);try{const G={name:i,description:s,widgets:l},z=n?`/api/dashboards/${t}`:"/api/dashboards";(await ue(z,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)})).ok?e("/dashboards"):alert("Failed to save dashboard")}catch(G){console.error("Error saving dashboard:",G)}finally{f(!1)}},te=()=>{var le;const G=p.find(je=>je.key===C),z={id:Date.now().toString(),type:S,title:_||(G==null?void 0:G.label)||"New Widget",dataSource:C,config:{columns:k.length>0?k:((le=G==null?void 0:G.columns)==null?void 0:le.slice(0,3))||[]}};c([...l,z]),v(!1),T(""),P([])},X=G=>{c(l.filter(z=>z.id!==G))},q=G=>{O(G),P([])},W=p.find(G=>G.key===C),ae=G=>{const z={id:Date.now().toString(),type:"table",title:`${G.primaryLabel} + ${G.relatedLabel}`,dataSource:`dynamic:${G.primary}:${G.related}`,config:{primaryColumns:G.primaryColumns,relatedColumns:G.relatedColumns}};c([...l,z])};return r.jsxs("div",{className:"dashboard-builder-container",children:[r.jsxs("div",{className:"builder-header",children:[r.jsxs("button",{className:"back-btn",onClick:()=>e("/dashboards"),children:[r.jsx(nn,{size:16})," Back"]}),r.jsxs("div",{className:"title-inputs",children:[r.jsx("input",{type:"text",placeholder:"Dashboard Name",value:i,onChange:G=>a(G.target.value),className:"dashboard-name-input"}),r.jsx("input",{type:"text",placeholder:"Description (Optional)",value:s,onChange:G=>o(G.target.value),className:"dashboard-desc-input"})]}),r.jsxs("button",{className:"primary-button",onClick:H,disabled:d,children:[r.jsx(Js,{size:16})," ",d?"Saving...":"Save Dashboard"]})]}),r.jsx("div",{className:"widgets-area",children:l.length===0?r.jsxs("div",{className:"empty-canvas",children:[r.jsx("p",{children:"Canvas is empty. Add a widget to start."}),r.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"},children:[r.jsxs("button",{onClick:()=>v(!0),className:"add-widget-btn",children:[r.jsx(ur,{size:16})," Add Widget"]}),r.jsxs("button",{onClick:()=>F(!0),className:"add-widget-btn",style:{background:"#2196F3"},children:[r.jsx(zz,{size:16})," Create Joined Widget"]}),r.jsxs("button",{onClick:()=>$(!0),className:"add-widget-btn",style:{background:"#4CAF50"},children:[r.jsx(Ab,{size:16})," Create Custom Table"]})]})]}):r.jsxs("div",{className:"widgets-grid",children:[l.map(G=>r.jsxs("div",{className:"widget-wrapper",children:[r.jsx("div",{className:"widget-actions-overlay",children:r.jsx("button",{onClick:()=>X(G.id),className:"remove-widget-btn",children:r.jsx(Wn,{size:14})})}),r.jsx(_M,{widget:G})]},G.id)),r.jsxs("div",{className:"add-more-card",onClick:()=>v(!0),children:[r.jsx(ur,{size:24}),r.jsx("span",{children:"Add Widget"})]})]})}),x&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("h3",{children:"Add Widget"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title (Optional)"}),r.jsx("input",{type:"text",placeholder:"Leave blank for auto-title",value:_,onChange:G=>T(G.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Type"}),r.jsxs("select",{value:S,onChange:G=>N(G.target.value),children:[r.jsx("option",{value:"stat",children:"Statistic (Count)"}),r.jsx("option",{value:"table",children:"Table (List)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Data Source"}),r.jsxs("select",{value:C,onChange:G=>q(G.target.value),children:[r.jsx("optgroup",{label:"Single Tables",children:p.filter(G=>!G.isCustom&&!G.isJoin).map(G=>r.jsx("option",{value:G.key,children:G.label},G.key))}),p.some(G=>G.isJoin)&&r.jsx("optgroup",{label:"Joined Tables (Multi-Table)",children:p.filter(G=>G.isJoin).map(G=>r.jsx("option",{value:G.key,children:G.label},G.key))}),p.some(G=>G.isCustom)&&r.jsx("optgroup",{label:"Custom Tables",children:p.filter(G=>G.isCustom).map(G=>r.jsx("option",{value:G.key,children:G.label},G.key))})]}),W&&r.jsx("small",{style:{color:"#666"},children:W.description})]}),S==="table"&&(W==null?void 0:W.columns)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Columns to Display (select multiple)"}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:W.columns.map(G=>r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:k.includes(G),onChange:z=>{z.target.checked?P([...k,G]):P(k.filter(le=>le!==G))}}),G]},G))})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{onClick:()=>v(!1),children:"Cancel"}),r.jsx("button",{className:"primary-button",onClick:te,children:"Add"})]})]})}),r.jsx(x4e,{isOpen:I,onClose:()=>F(!1),onConfirm:ae}),r.jsx(v4e,{isOpen:B,onClose:()=>$(!1),onCreated:()=>L()})]})},b4e=()=>{const{id:t}=Oi(),e=Mt(),[n,i]=b.useState(null);if(b.useEffect(()=>{(async()=>{try{const o=await ue(`/api/dashboards/${t}`);if(o.ok){const l=await o.json();i(l)}}catch(o){console.error("Error fetching dashboard:",o)}})()},[t]),!n)return r.jsx("div",{className:"temp-dash-empty",children:"Loading..."});const a=n.widgets||[];return r.jsxs("div",{className:"saved-dash-container",children:[r.jsxs("div",{className:"saved-dash-header",children:[r.jsxs("div",{className:"saved-dash-title-group",children:[r.jsx("button",{className:"saved-dash-back-btn",onClick:()=>e("/dashboards"),children:r.jsx(nn,{size:16})}),r.jsx("div",{className:"saved-dash-icon",children:r.jsx(Xm,{size:16})}),r.jsxs("div",{className:"saved-dash-title-text",children:[r.jsx("h2",{children:n.name}),n.description&&r.jsx("span",{className:"saved-dash-description",children:n.description})]})]}),r.jsx("div",{className:"saved-dash-actions",children:r.jsxs("button",{className:"saved-dash-edit-btn",onClick:()=>e(`/dashboards/${t}/edit`),children:[r.jsx(Ia,{size:12})," Edit"]})})]}),r.jsx("div",{className:"saved-dash-body",children:a.length===0?r.jsx("div",{className:"temp-dash-empty",children:"No widgets in this dashboard. Click Edit to add some!"}):r.jsx("div",{className:"temp-dash-grid",children:a.map((s,o)=>r.jsx(_M,{widget:s,autoHideEmptyColumns:!0},s.id||`view-widget-${o}`))})})]})},VA=["#8b5cf6","#3b82f6","#06b6d4","#10b981","#22c55e","#f59e0b","#f97316","#ef4444","#ec4899","#a855f7"],j4e=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(!0),[a,s]=b.useState(null),[o,l]=b.useState(null),[c,d]=b.useState(!1),[f,p]=b.useState({name:"",key:"",color:"#6b7280",description:""}),[y,x]=b.useState(!1),v=async()=>{i(!0),s(null);try{const B=await ue("/api/clinic-roles");if(B.ok){const $=await B.json();e($)}else s("Failed to load roles")}catch{s("Failed to connect to server")}finally{i(!1)}};b.useEffect(()=>{v()},[]);const S=B=>B.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),N=B=>{p($=>({...$,name:B,key:o?$.key:S(B)}))},_=async()=>{if(f.name.trim()){x(!0);try{const B=await ue("/api/clinic-roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),key:f.key||S(f.name),color:f.color,description:f.description.trim()||null})});if(B.ok)await v(),d(!1),p({name:"",key:"",color:"#6b7280",description:""});else{const $=await B.json();s($.message||"Failed to create role")}}catch{s("Failed to create role")}finally{x(!1)}}},T=async()=>{if(!(!o||!f.name.trim())){x(!0);try{const B=await ue(`/api/clinic-roles/${o.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),color:f.color,description:f.description.trim()||null})});if(B.ok)await v(),l(null),p({name:"",key:"",color:"#6b7280",description:""});else{const $=await B.json();s($.message||"Failed to update role")}}catch{s("Failed to update role")}finally{x(!1)}}},C=async B=>{if(!B.isSystem&&window.confirm(`Delete role "${B.name}"? This cannot be undone.`))try{const $=await ue(`/api/clinic-roles/${B.id}`,{method:"DELETE"});if($.ok)await v();else{const L=await $.json();s(L.message||"Failed to delete role")}}catch{s("Failed to delete role")}},O=B=>{l(B),p({name:B.name,key:B.key,color:B.color,description:B.description||""}),d(!1)},k=()=>{d(!0),l(null),p({name:"",key:"",color:VA[Math.floor(Math.random()*VA.length)],description:""})},P=()=>{d(!1),l(null),p({name:"",key:"",color:"#6b7280",description:""})},I=t.filter(B=>B.isSystem),F=t.filter(B=>!B.isSystem);return r.jsxs("div",{className:"role-management-page",children:[r.jsxs("div",{className:"role-management-header",children:[r.jsxs("div",{className:"header-title",children:[r.jsx(Zm,{size:28}),r.jsxs("div",{children:[r.jsx("h1",{children:"Role Management"}),r.jsx("p",{children:"Manage custom roles for your clinic staff"})]})]}),r.jsxs("button",{className:"create-role-btn",onClick:k,disabled:c,children:[r.jsx(ur,{size:18}),"Create Custom Role"]})]}),a&&r.jsxs("div",{className:"role-error-banner",children:[r.jsx(Xr,{size:18}),a,r.jsx("button",{onClick:()=>s(null),children:r.jsx(qt,{size:16})})]}),(c||o)&&r.jsxs("div",{className:"role-form-card",children:[r.jsx("h3",{children:o?"Edit Role":"Create New Role"}),r.jsxs("div",{className:"role-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Name *"}),r.jsx("input",{type:"text",value:f.name,onChange:B=>N(B.target.value),placeholder:"e.g., Senior Doctor, Ward Nurse"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role Key"}),r.jsx("input",{type:"text",value:f.key,onChange:B=>p($=>({...$,key:B.target.value})),placeholder:"auto-generated",disabled:!!o})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsx("input",{type:"text",value:f.description,onChange:B=>p($=>({...$,description:B.target.value})),placeholder:"Brief description of role responsibilities"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{children:[r.jsx(eJ,{size:14}),"Color"]}),r.jsxs("div",{className:"color-picker",children:[VA.map(B=>r.jsx("button",{className:`color-option ${f.color===B?"selected":""}`,style:{background:B},onClick:()=>p($=>({...$,color:B}))},B)),r.jsx("input",{type:"color",value:f.color,onChange:B=>p($=>({...$,color:B.target.value})),className:"custom-color-input"})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{className:"cancel-btn",onClick:P,children:"Cancel"}),r.jsxs("button",{className:"save-btn",onClick:o?T:_,disabled:y||!f.name.trim(),children:[r.jsx(Cl,{size:16}),y?"Saving...":o?"Update Role":"Create Role"]})]})]})]}),r.jsxs("div",{className:"roles-container",children:[r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"System Roles"}),r.jsx("p",{className:"section-desc",children:"Default roles - can be customized but not deleted"}),n?r.jsx("div",{className:"roles-grid",children:[1,2,3].map(B=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",style:{marginBottom:"10px"},children:[r.jsx(Z,{variant:"circular",width:12,height:12,style:{marginRight:"8px"}}),r.jsx(Z,{width:100,height:20})]}),r.jsx(Z,{width:80,height:16,style:{marginBottom:"10px"}}),r.jsx(Z,{width:"100%",height:20}),r.jsx("div",{className:"role-actions",style:{marginTop:"15px"},children:r.jsx(Z,{width:60,height:24})})]},B))}):r.jsx("div",{className:"roles-grid",children:I.map(B=>r.jsxs("div",{className:"role-card system",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:B.color}}),r.jsx("span",{className:"role-name",children:B.name}),r.jsx("span",{className:"system-badge",children:"System"})]}),r.jsx("div",{className:"role-key",children:B.key}),B.description&&r.jsx("div",{className:"role-description",children:B.description}),r.jsx("div",{className:"role-actions",children:r.jsxs("button",{className:"edit-role-btn",onClick:()=>O(B),children:[r.jsx(vc,{size:14}),"Edit"]})})]},B.id))})]}),r.jsxs("div",{className:"roles-section",children:[r.jsx("h3",{children:"Custom Roles"}),r.jsx("p",{className:"section-desc",children:"Roles created for your clinic"}),F.length===0?r.jsxs("div",{className:"no-roles",children:[r.jsx(Zm,{size:32}),r.jsx("p",{children:"No custom roles created yet"}),r.jsxs("button",{onClick:k,children:[r.jsx(ur,{size:16}),"Create your first custom role"]})]}):r.jsx("div",{className:"roles-grid",children:F.map(B=>r.jsxs("div",{className:"role-card custom",children:[r.jsxs("div",{className:"role-header",children:[r.jsx("span",{className:"role-color-dot",style:{background:B.color}}),r.jsx("span",{className:"role-name",children:B.name})]}),r.jsx("div",{className:"role-key",children:B.key}),B.description&&r.jsx("div",{className:"role-description",children:B.description}),r.jsxs("div",{className:"role-actions",children:[r.jsxs("button",{className:"edit-role-btn",onClick:()=>O(B),children:[r.jsx(vc,{size:14}),"Edit"]}),r.jsxs("button",{className:"delete-role-btn",onClick:()=>C(B),children:[r.jsx(Wn,{size:14}),"Delete"]})]})]},B.id))})]})]})]})},w4e="_container_16815_47",S4e="_progressBar_16815_67",N4e="_sidebar_16815_97",_4e="_sidebarTitle_16815_161",C4e="_searchBox_16815_193",T4e="_searchInput_16815_203",k4e="_searchIcon_16815_237",A4e="_navSection_16815_255",E4e="_navSectionTitle_16815_263",P4e="_navLink_16815_287",O4e="_activeNavLink_16815_367",D4e="_navLinkIcon_16815_387",M4e="_content_16815_409",I4e="_header_16815_425",R4e="_headerContent_16815_493",L4e="_title_16815_503",F4e="_subtitle_16815_563",$4e="_headerBadges_16815_575",B4e="_headerBadge_16815_575",z4e="_section_16815_625",q4e="_sectionTitle_16815_665",U4e="_sectionTitleIcon_16815_689",V4e="_sectionContent_16815_713",H4e="_featureList_16815_751",G4e="_featureItem_16815_767",W4e="_featureIcon_16815_799",Y4e="_featureText_16815_813",K4e="_infoBox_16815_839",Q4e="_infoBoxTitle_16815_881",X4e="_infoBoxContent_16815_903",J4e="_workflowList_16815_917",Z4e="_kbd_16815_959",e3e="_moduleLinkBtn_16815_1179",t3e="_uiGrid_16815_1231",n3e="_uiCard_16815_1245",r3e="_uiLabel_16815_1277",i3e="_demoBtn_16815_1301",a3e="_demoBtnPrimary_16815_1323",s3e="_demoBtnSecondary_16815_1335",o3e="_demoBtnDanger_16815_1347",l3e="_demoBadge_16815_1361",c3e="_demoBadgeSuccess_16815_1385",u3e="_demoBadgeWarning_16815_1397",d3e="_demoBadgeError_16815_1409",h3e="_iconRow_16815_1421",f3e="_faqList_16815_1455",p3e="_faqItem_16815_1469",m3e="_faqQuestion_16815_1493",g3e="_faqIcon_16815_1523",y3e="_faqIconOpen_16815_1533",x3e="_faqAnswer_16815_1541",v3e="_footer_16815_1587",b3e="_footerText_16815_1605",j3e="_footerBrand_16815_1617",w3e="_floatingParticles_16815_1641",S3e="_particle_16815_1663",N3e="_headerLabel_16815_1817",_3e="_waveEmoji_16815_1845",C3e="_headerActions_16815_1857",T3e="_headerBtn_16815_1871",k3e="_headerBtnSecondary_16815_1913",A3e="_statsSection_16815_1963",E3e="_statCard_16815_1977",P3e="_statIcon_16815_2009",O3e="_statValue_16815_2039",D3e="_statLabel_16815_2053",M3e="_quickTipsSection_16815_2073",I3e="_quickTipsHeader_16815_2089",R3e="_tipNav_16815_2123",L3e="_tipCard_16815_2185",F3e="_tipIcon_16815_2231",$3e="_tipContent_16815_2251",B3e="_tipIndicators_16815_2279",z3e="_tipIndicator_16815_2279",q3e="_tipIndicatorActive_16815_2323",U3e="_shortcutsGrid_16815_2343",V3e="_shortcutCard_16815_2357",H3e="_shortcutCardActive_16815_2383",G3e="_shortcutKeys_16815_2397",W3e="_kbdPlus_16815_2411",Y3e="_kbdActive_16815_2423",K3e="_shortcutInfo_16815_2437",Q3e="_shortcutAction_16815_2445",X3e="_shortcutDesc_16815_2459",J3e="_fabContainer_16815_3077",Z3e="_fabButton_16815_3099",e6e="_fabContent_16815_3141",t6e="_contactRow_16815_3195",n6e="_contactIcon_16815_3213",r6e="_copyBtn_16815_3223",Ae={container:w4e,progressBar:S4e,sidebar:N4e,sidebarTitle:_4e,searchBox:C4e,searchInput:T4e,searchIcon:k4e,navSection:A4e,navSectionTitle:E4e,navLink:P4e,activeNavLink:O4e,navLinkIcon:D4e,content:M4e,header:I4e,headerContent:R4e,title:L4e,subtitle:F4e,headerBadges:$4e,headerBadge:B4e,section:z4e,sectionTitle:q4e,sectionTitleIcon:U4e,sectionContent:V4e,featureList:H4e,featureItem:G4e,featureIcon:W4e,featureText:Y4e,infoBox:K4e,infoBoxTitle:Q4e,infoBoxContent:X4e,workflowList:J4e,kbd:Z4e,moduleLinkBtn:e3e,uiGrid:t3e,uiCard:n3e,uiLabel:r3e,demoBtn:i3e,demoBtnPrimary:a3e,demoBtnSecondary:s3e,demoBtnDanger:o3e,demoBadge:l3e,demoBadgeSuccess:c3e,demoBadgeWarning:u3e,demoBadgeError:d3e,iconRow:h3e,faqList:f3e,faqItem:p3e,faqQuestion:m3e,faqIcon:g3e,faqIconOpen:y3e,faqAnswer:x3e,footer:v3e,footerText:b3e,footerBrand:j3e,floatingParticles:w3e,particle:S3e,headerLabel:N3e,waveEmoji:_3e,headerActions:C3e,headerBtn:T3e,headerBtnSecondary:k3e,statsSection:A3e,statCard:E3e,statIcon:P3e,statValue:O3e,statLabel:D3e,quickTipsSection:M3e,quickTipsHeader:I3e,tipNav:R3e,tipCard:L3e,tipIcon:F3e,tipContent:$3e,tipIndicators:B3e,tipIndicator:z3e,tipIndicatorActive:q3e,shortcutsGrid:U3e,shortcutCard:V3e,shortcutCardActive:H3e,shortcutKeys:G3e,kbdPlus:W3e,kbdActive:Y3e,shortcutInfo:K3e,shortcutAction:Q3e,shortcutDesc:X3e,fabContainer:J3e,fabButton:Z3e,fabContent:e6e,contactRow:t6e,contactIcon:n6e,copyBtn:r6e},i6e=(t,e=2e3)=>{const[n,i]=b.useState(0),[a,s]=b.useState(!1),o=b.useRef(null);return b.useEffect(()=>{const l=new IntersectionObserver(([c])=>{c.isIntersecting&&s(!0)},{threshold:.3});return o.current&&l.observe(o.current),()=>l.disconnect()},[]),b.useEffect(()=>{if(!a)return;let l=null;const c=d=>{l||(l=d);const f=Math.min((d-l)/e,1);i(Math.floor(f*t)),f<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[a,t,e]),{count:n,ref:o}},a6e=()=>{const[t,e]=b.useState("getting-started"),[n,i]=b.useState(""),[a,s]=b.useState(0),[o,l]=b.useState(null),[c,d]=b.useState(!1),[f,p]=b.useState(0),[y,x]=b.useState(null),v=b.useRef(null),S=b.useCallback(()=>{const F=document.documentElement.scrollHeight-window.innerHeight,B=window.scrollY/F*100;s(Math.min(B,100))},[]);b.useEffect(()=>{const F=()=>{const B=document.querySelectorAll("section[id]");let $="";B.forEach(L=>{const V=L.offsetTop;window.scrollY>=V-120&&($=L.getAttribute("id")||"")}),$&&e($),S()};return window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F)},[S]);const N=F=>{const B=document.getElementById(F);B&&window.scrollTo({top:B.offsetTop-80,behavior:"smooth"})},_={navigation:[{id:"getting-started",label:"Getting Started",icon:CI},{id:"clinical-workflow",label:"Doctor Workflow",icon:dw},{id:"financial-mgmt",label:"Financial Control",icon:mf},{id:"analytics",label:"Analytics & Insights",icon:mE},{id:"pharmacy-inventory",label:"Pharmacy & Stock",icon:yf},{id:"advanced-lab",label:"Advanced Lab Mgmt",icon:rs},{id:"ipd-admission",label:"IPD & Admission",icon:eg},{id:"custom-data",label:"System Customization",icon:gf},{id:"admin",label:"Administration",icon:od}],reference:[{id:"ui-reference",label:"Interface & UI",icon:Dm},{id:"troubleshooting",label:"Troubleshooting",icon:fj}]},T=F=>n?F.filter(B=>B.label.toLowerCase().includes(n.toLowerCase())):F,C=({id:F,label:B,Icon:$})=>r.jsxs("a",{className:`${Ae.navLink} ${t===F?Ae.activeNavLink:""}`,onClick:()=>N(F),children:[r.jsx($,{className:Ae.navLinkIcon,size:18}),B]}),O=[{question:"Bill not printing correctly?",answer:"Ensure pop-ups are not blocked in your browser. Also, check if your printer is properly configured in system settings. For thermal printers, verify the paper size matches the bill format."},{question:"Sync issues with data?",answer:"Make sure your internet connection is stable. The system auto-syncs when online. You can also manually trigger sync from the settings menu. If issues persist, try clearing browser cache."},{question:"How to reset my password?",answer:"Contact your clinic administrator who can reset your password from the Staff Management section. For security reasons, passwords cannot be self-reset without admin approval."},{question:"AI suggestions not appearing?",answer:'AI features require an active internet connection. Also ensure AI features are enabled in Clinic Settings under the "AI & Automation" tab.'},{question:"How do I record a partial payment for patient debt?",answer:"Navigate to Financial Control -> Patient Debts. Click on a patient's name to view their full transaction history. Use the payment recording form at the bottom to enter the amount paid and save."},{question:"How can I set up normal ranges for Lab tests?",answer:"Go to Advanced Lab Management -> Test Master. Click 'Edit' on a test, then go to the 'Parameters' tab. Here you can define min/max values, units, and default results."}],k=[{icon:wI,title:"Pro Tip: Voice Commands",description:'Use the AI Command Bar to speak naturally. Say "Create prescription for John" to get started instantly!',color:"#f59e0b"},{icon:AI,title:"Speed Boost",description:"Double-click any patient name in the queue to instantly open their full history.",color:"#8b5cf6"},{icon:zJ,title:"Smart Billing",description:"The system auto-suggests medicine quantities based on prescription duration!",color:"#10b981"},{icon:kI,title:"Favorites",description:"Star frequently prescribed medicines to access them from your quick-add panel.",color:"#ef4444"}];b.useEffect(()=>{const F=setInterval(()=>{p(B=>(B+1)%k.length)},5e3);return()=>clearInterval(F)},[k.length]);const P=[{icon:Eo,value:1e4,suffix:"+",label:"Patients Managed",color:"#6366f1"},{icon:Tb,value:75,suffix:"%",label:"Time Saved",color:"#10b981"},{icon:VJ,value:99,suffix:".9%",label:"Uptime",color:"#f59e0b"},{icon:jX,value:50,suffix:"+",label:"Happy Clinics",color:"#ef4444"}],I=[{keys:["Ctrl","K"],action:"Open Command Bar",description:"Quick access to AI assistant and navigation"},{keys:["Ctrl","P"],action:"Quick Print",description:"Print current document or bill"},{keys:["Ctrl","S"],action:"Save Record",description:"Save current form or entry"},{keys:["Esc"],action:"Close Modal",description:"Close any open dialog or panel"}];return r.jsxs("div",{className:Ae.container,children:[r.jsx("div",{className:Ae.progressBar,style:{width:`${a}%`}}),r.jsxs("aside",{className:Ae.sidebar,children:[r.jsxs("h2",{className:Ae.sidebarTitle,children:[r.jsx(yI,{size:22}),"User Guide"]}),r.jsxs("div",{className:Ae.searchBox,children:[r.jsx(Hn,{className:Ae.searchIcon,size:16}),r.jsx("input",{type:"text",className:Ae.searchInput,placeholder:"Search topics...",value:n,onChange:F=>i(F.target.value)})]}),r.jsxs("div",{className:Ae.navSection,children:[r.jsxs("span",{className:Ae.navSectionTitle,children:[r.jsx(la,{size:12}),"Navigation"]}),T(_.navigation).map(F=>r.jsx(C,{id:F.id,label:F.label,Icon:F.icon},F.id))]}),r.jsxs("div",{className:Ae.navSection,children:[r.jsxs("span",{className:Ae.navSectionTitle,children:[r.jsx(kI,{size:12}),"Reference"]}),T(_.reference).map(F=>r.jsx(C,{id:F.id,label:F.label,Icon:F.icon},F.id))]})]}),r.jsxs("main",{className:Ae.content,ref:v,children:[r.jsxs("header",{className:Ae.header,children:[r.jsxs("div",{className:Ae.floatingParticles,children:[r.jsx("div",{className:Ae.particle}),r.jsx("div",{className:Ae.particle}),r.jsx("div",{className:Ae.particle}),r.jsx("div",{className:Ae.particle}),r.jsx("div",{className:Ae.particle})]}),r.jsxs("div",{className:Ae.headerContent,children:[r.jsxs("div",{className:Ae.headerLabel,children:[r.jsx(yI,{size:16}),"Complete Documentation"]}),r.jsxs("h1",{className:Ae.title,children:["Master Newtons Ai HMS ",r.jsx("span",{className:Ae.waveEmoji,children:""})]}),r.jsx("p",{className:Ae.subtitle,children:"Your comprehensive guide to maximizing efficiency with the AI-Powered Health Management System. Master every feature and transform your clinical workflow."}),r.jsxs("div",{className:Ae.headerBadges,children:[r.jsxs("span",{className:Ae.headerBadge,children:[r.jsx(Zm,{size:14}),"HIPAA Compliant"]}),r.jsxs("span",{className:Ae.headerBadge,children:[r.jsx(hw,{size:14}),"AI Powered"]}),r.jsxs("span",{className:Ae.headerBadge,children:[r.jsx(gE,{size:14}),"Multi-Language"]})]}),r.jsxs("div",{className:Ae.headerActions,children:[r.jsxs("button",{className:Ae.headerBtn,onClick:()=>N("getting-started"),children:[r.jsx(Vz,{size:16}),"Get Started"]}),r.jsxs("button",{className:Ae.headerBtnSecondary,onClick:()=>N("troubleshooting"),children:[r.jsx(fj,{size:16}),"Need Help?"]})]})]})]}),r.jsx("section",{className:Ae.statsSection,children:P.map((F,B)=>{const{count:$,ref:L}=i6e(F.value);return r.jsxs("div",{className:Ae.statCard,ref:L,children:[r.jsx("div",{className:Ae.statIcon,style:{backgroundColor:`${F.color}15`,color:F.color},children:r.jsx(F.icon,{size:24})}),r.jsxs("div",{className:Ae.statValue,style:{color:F.color},children:[$,F.suffix]}),r.jsx("div",{className:Ae.statLabel,children:F.label})]},B)})}),r.jsxs("section",{className:Ae.quickTipsSection,children:[r.jsxs("div",{className:Ae.quickTipsHeader,children:[r.jsxs("h3",{children:[r.jsx(wI,{size:20})," Quick Tips"]}),r.jsxs("div",{className:Ae.tipNav,children:[r.jsx("button",{onClick:()=>p(F=>(F-1+k.length)%k.length),children:r.jsx(Cb,{size:18})}),r.jsxs("span",{children:[f+1," / ",k.length]}),r.jsx("button",{onClick:()=>p(F=>(F+1)%k.length),children:r.jsx(dd,{size:18})})]})]}),r.jsxs("div",{className:Ae.tipCard,children:[r.jsx("div",{className:Ae.tipIcon,style:{backgroundColor:`${k[f].color}15`,color:k[f].color},children:Se.createElement(k[f].icon,{size:28})}),r.jsxs("div",{className:Ae.tipContent,children:[r.jsx("h4",{children:k[f].title}),r.jsx("p",{children:k[f].description})]})]},f),r.jsx("div",{className:Ae.tipIndicators,children:k.map((F,B)=>r.jsx("button",{className:`${Ae.tipIndicator} ${f===B?Ae.tipIndicatorActive:""}`,onClick:()=>p(B)},B))})]}),r.jsxs("section",{id:"getting-started",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(CI,{size:18})}),"Getting Started"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsx("p",{children:"Welcome to the Newtons Ai HMS. This guide will help you navigate and master the system's features, from clinical workflows to advanced financial analytics."}),r.jsxs("div",{className:Ae.infoBox,children:[r.jsxs("span",{className:Ae.infoBoxTitle,children:[r.jsx(hw,{size:18}),"Multi-Platform Accessibility"]}),r.jsx("div",{className:Ae.infoBoxContent,children:"Newtons Ai is a PWA (Progressive Web App). You can install it on your Desktop, Android, or iOS device for a native-like experience with faster performance and offline support."})]}),r.jsx("div",{className:Ae.shortcutsGrid,children:I.map((F,B)=>r.jsxs("div",{className:`${Ae.shortcutCard} ${y===F.action?Ae.shortcutCardActive:""}`,onMouseEnter:()=>x(F.action),onMouseLeave:()=>x(null),children:[r.jsx("div",{className:Ae.shortcutKeys,children:F.keys.map(($,L)=>r.jsxs(Se.Fragment,{children:[r.jsx("kbd",{className:`${Ae.kbd} ${y===F.action?Ae.kbdActive:""}`,children:$}),L<F.keys.length-1&&r.jsx("span",{className:Ae.kbdPlus,children:"+"})]},L))}),r.jsxs("div",{className:Ae.shortcutInfo,children:[r.jsx("div",{className:Ae.shortcutAction,children:F.action}),r.jsx("div",{className:Ae.shortcutDesc,children:F.description})]})]},B))}),r.jsxs("div",{className:Ae.uiGrid,children:[r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(nX,{size:14})," Smart Navigation"]}),r.jsxs("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:["Press ",r.jsx("kbd",{className:Ae.kbd,children:"Ctrl"})," + ",r.jsx("kbd",{className:Ae.kbd,children:"K"})," anywhere to open the Command Bar. Instantly jump to patients, bills, or settings."]})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(Eo,{size:14})," Multi-Role Access"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"The system adapts to your role: Doctor, Receptionist, Pharmacist, or Lab Technician."})]})]})]})]}),r.jsxs("section",{id:"clinical-workflow",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(dw,{size:18})}),"Doctor Workflow & Live Queue"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsx("p",{children:"The Doctor Consultation Panel is optimized for speed and clarity, providing all necessary patient context at a single glance."}),r.jsxs("div",{className:Ae.uiGrid,children:[r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(xc,{size:14})," Live Queue Control"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:'Use the "Call Next" buttons to manage the patient flow. The system automatically marks seen patients and updates the waiting list.'}),r.jsx(Sr,{to:"/dashboard/doctor",className:Ae.moduleLinkBtn,children:"Consultation Panel"})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(kv,{size:14})," AI Patient Briefs"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:`" AI Brief" provides a summarized snapshot of the patient's current complaint and relevant history saving valuable consultation time.`})]})]}),r.jsx("h3",{children:"Comprehensive History"}),r.jsxs("ul",{className:Ae.featureList,children:[r.jsxs("li",{className:Ae.featureItem,children:[r.jsx(cv,{size:16,className:Ae.featureIcon}),r.jsxs("div",{className:Ae.featureText,children:[r.jsx("strong",{children:"Unified Timeline:"})," View past complaints, lab reports, and medications in a single, chronologically grouped view."]})]}),r.jsxs("li",{className:Ae.featureItem,children:[r.jsx(cX,{size:16,className:Ae.featureIcon,style:{color:"var(--guide-primary)"}}),r.jsxs("div",{className:Ae.featureText,children:[r.jsx("strong",{children:"One-Click Action:"})," From the history view, copy past medications to new prescriptions or quickly re-order tests."]})]})]})]})]}),r.jsxs("section",{id:"financial-mgmt",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(mf,{size:18})}),"Financial Control & Debt Management"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsx("p",{children:"Keep your clinic's finances healthy with precise billing and proactive debt management."}),r.jsxs("div",{className:Ae.uiGrid,children:[r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(fw,{size:14})," Debt Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Monitor all outstanding balances in the Patent Debt module. View individual transaction histories and record settlements."}),r.jsx(Sr,{to:"/dashboard/admin/patient-debts",className:Ae.moduleLinkBtn,children:"Manage Debt"})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(la,{size:14})," Custom Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Need to bill for something non-standard? Use the Custom Bill tool to create items on-the-fly."}),r.jsx(Sr,{to:"/create-custom-bill",className:Ae.moduleLinkBtn,children:"Custom Bill"})]})]}),r.jsxs("div",{className:Ae.infoBox,children:[r.jsxs("span",{className:Ae.infoBoxTitle,children:[r.jsx(Zm,{size:18}),"Payment Verification"]}),r.jsx("div",{className:Ae.infoBoxContent,children:'The system tracks payment modes (Cash, UPI, Card, Credit). "Credit" sales are automatically added to the Patient Debt list for later follow-up.'})]})]})]}),r.jsxs("section",{id:"analytics",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(mE,{size:18})}),"Analytics & Insights"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsx("p",{children:"Transition from simply managing data to understanding it. The Analysis Dashboard provides deep insights into your operations."}),r.jsxs("div",{className:Ae.uiGrid,children:[r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(xc,{size:14})," Revenue vs Cash Flow"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Compare Sales (Accrual) against actual Cash Collected (Cash Basis) to understand your true liquidity."}),r.jsx(Sr,{to:"/dashboard/analysis",className:Ae.moduleLinkBtn,children:"Open Analysis"})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(_I,{size:14})," Dept. Analysis"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"See exactly which departments (Pharmacy, Lab, OPD) are driving your clinic's growth."})]})]}),r.jsx("h3",{children:"Advanced Metrics"}),r.jsxs("ul",{className:Ae.featureList,children:[r.jsxs("li",{className:Ae.featureItem,children:[r.jsx(cv,{size:16,className:Ae.featureIcon}),r.jsxs("div",{className:Ae.featureText,children:[r.jsx("strong",{children:"Inventory Movement:"})," Analyze stock inflow vs outflow to predict future procurement needs."]})]}),r.jsxs("li",{className:Ae.featureItem,children:[r.jsx(cv,{size:16,className:Ae.featureIcon}),r.jsxs("div",{className:Ae.featureText,children:[r.jsx("strong",{children:"Profit Estimation:"})," View estimated profits based on cost of goods sold (COGS) vs revenue generated."]})]})]})]})]}),r.jsxs("section",{id:"pharmacy-inventory",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(yf,{size:18})}),"Pharmacy & Inventory Tracking"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsx("p",{children:"Maintain optimal stock levels and manage supplier relationships effortlessly."}),r.jsxs("div",{className:Ae.uiGrid,children:[r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(qO,{size:14})," Distributor Mgmt"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep a directory of suppliers, track payments made to them, and manage purchase entries."}),r.jsx(Sr,{to:"/dashboard/distributors",className:Ae.moduleLinkBtn,children:"Distributors"})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(SQ,{size:14})," Refill Reminders"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automatically notify patients when their chronic medication stock is about to run out."}),r.jsx(Sr,{to:"/refill-reminders",className:Ae.moduleLinkBtn,children:"Refill Alerts"})]})]}),r.jsxs("div",{className:Ae.infoBox,children:[r.jsxs("span",{className:Ae.infoBoxTitle,children:[r.jsx(xc,{size:18}),"Stock-Out Alerts"]}),r.jsx("div",{className:Ae.infoBoxContent,children:"High-demand items are highlighted when stock falls below your defined threshold, ensuring you never run out of critical medicines."})]})]})]}),r.jsxs("section",{id:"advanced-lab",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(rs,{size:18})}),"Advanced Lab Management"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsx("p",{children:"Go beyond simple test lists. Configure complex diagnostic parameters with automated clinical validation."}),r.jsxs("div",{className:Ae.uiGrid,children:[r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(Hn,{size:14})," Multi-Parameter Search"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Find reports by Patient Name, ID, Token, or even specific Test Name. The intelligent search uses fuzzy matching."}),r.jsx(Sr,{to:"/lab/search-report",className:Ae.moduleLinkBtn,children:"Find Reports"})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(rs,{size:14})," Test Master"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define parametric data, normal ranges, and automated formatting for your reports."}),r.jsx(Sr,{to:"/lab-inventory",className:Ae.moduleLinkBtn,children:"Configure Tests"})]})]})]})]}),r.jsxs("section",{id:"ipd-admission",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(eg,{size:18})}),"IPD & Admission Management"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsx("p",{children:"Manage the full lifecycle of in-patient care, from the moment of admission to final discharge and billing."}),r.jsxs("div",{className:Ae.uiGrid,children:[r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(vr,{size:14})," In-Patient Tracking"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep track of all currently admitted patients, their ward assignments, and duration of stay."}),r.jsx(Sr,{to:"/manage-admission",className:Ae.moduleLinkBtn,children:"Admission Mgmt"})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(fw,{size:14})," Cumulative Billing"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automated daily room charges combined with services and medications consumed during the stay."})]})]}),r.jsx("h3",{children:"Workflow Steps"}),r.jsxs("ol",{className:Ae.workflowList,children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Admit:"})," Register the patient and set the admission date and bed details."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Manage:"})," Record observations and clinical notes throughout the stay."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Discharge:"})," Finalize all pending charges and generate the discharge summary."]})]})]})]}),r.jsxs("section",{id:"custom-data",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(gf,{size:18})}),"System Customization"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsx("p",{children:"Newtons Ai HMS is designed to be extensible. Create your own data structures and visualization tools."}),r.jsxs("div",{className:Ae.uiGrid,children:[r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(Ab,{size:14})," Custom Tables"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define new data types (e.g., Equipment Logs, Consent Forms). Support for text, number, date, and boolean."}),r.jsx(Sr,{to:"/custom-tables",className:Ae.moduleLinkBtn,children:"Data Tables"})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(_I,{size:14})," Custom Dashboards"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Build your own reporting views. Drag and drop widgets to visualize your performance."}),r.jsx(Sr,{to:"/dashboards",className:Ae.moduleLinkBtn,children:"Manage Dashboards"})]})]})]})]}),r.jsxs("section",{id:"admin",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(od,{size:18})}),"Administration"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsx("p",{children:"Central command for clinic owners. Access critical functions and manage staff permissions."}),r.jsxs("div",{className:Ae.uiGrid,children:[r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(Eo,{size:14})," Staff & Permissions"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Add/edit staff and define exactly what each role can see and do in the system."}),r.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[r.jsx(Sr,{to:"/dashboard/staff",className:Ae.moduleLinkBtn,children:"Staff"}),r.jsx(Sr,{to:"/dashboard/roles",className:Ae.moduleLinkBtn,children:"Roles"})]})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsxs("div",{className:Ae.uiLabel,children:[r.jsx(gi,{size:14})," Subscription Plans"]}),r.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Manage your patients' subscription plans, billing cycles, and membership statuses."}),r.jsx(Sr,{to:"/dashboard/subscriptions",className:Ae.moduleLinkBtn,children:"Subscriptions"})]})]})]})]}),r.jsxs("section",{id:"ui-reference",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(Dm,{size:18})}),"Interface & UI Reference"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsx("p",{children:"Familiarize yourself with the common UI elements used throughout the application."}),r.jsxs("div",{className:Ae.uiGrid,children:[r.jsxs("div",{className:Ae.uiCard,children:[r.jsx("div",{className:Ae.uiLabel,children:"Action Buttons"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("button",{className:`${Ae.demoBtn} ${Ae.demoBtnPrimary}`,children:"Primary / Save"}),r.jsx("button",{className:`${Ae.demoBtn} ${Ae.demoBtnSecondary}`,children:"Secondary"}),r.jsx("button",{className:`${Ae.demoBtn} ${Ae.demoBtnDanger}`,children:"Danger / Delete"})]})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsx("div",{className:Ae.uiLabel,children:"Status Indicators"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsxs("div",{className:`${Ae.demoBadge} ${Ae.demoBadgeSuccess}`,children:[r.jsx(cv,{size:12}),"Paid / Completed"]}),r.jsxs("div",{className:`${Ae.demoBadge} ${Ae.demoBadgeWarning}`,children:[r.jsx(AI,{size:12}),"Pending / Due"]}),r.jsxs("div",{className:`${Ae.demoBadge} ${Ae.demoBadgeError}`,children:[r.jsx(fj,{size:12}),"Overdue / Failed"]})]})]}),r.jsxs("div",{className:Ae.uiCard,children:[r.jsx("div",{className:Ae.uiLabel,children:"Common Icons"}),r.jsxs("div",{className:Ae.iconRow,children:[r.jsx(Ia,{size:16})," ",r.jsx("span",{children:"Edit Record"})]}),r.jsxs("div",{className:Ae.iconRow,children:[r.jsx(Wn,{size:16})," ",r.jsx("span",{children:"Delete Item"})]}),r.jsxs("div",{className:Ae.iconRow,children:[r.jsx(Dm,{size:16})," ",r.jsx("span",{children:"View Details"})]})]})]})]})]}),r.jsxs("section",{id:"troubleshooting",className:Ae.section,children:[r.jsxs("h2",{className:Ae.sectionTitle,children:[r.jsx("span",{className:Ae.sectionTitleIcon,children:r.jsx(fj,{size:18})}),"Troubleshooting & Support"]}),r.jsxs("div",{className:Ae.sectionContent,children:[r.jsxs("div",{className:Ae.infoBox,children:[r.jsxs("span",{className:Ae.infoBoxTitle,children:[r.jsx(gE,{size:18}),"Offline Support (PWA)"]}),r.jsxs("div",{className:Ae.infoBoxContent,children:["Newtons Ai HMS is a ",r.jsx("strong",{children:"Progressive Web App (PWA)"}),'. Install it on your desktop or mobile home screen using the "Install" button in the header for faster loading and offline syncing of critical data.']})]}),r.jsxs("div",{className:Ae.infoBox,style:{borderLeftColor:"var(--guide-accent)"},children:[r.jsxs("span",{className:Ae.infoBoxTitle,style:{color:"var(--guide-accent)"},children:[r.jsx(tC,{size:18}),"Need Direct Support?"]}),r.jsx("div",{className:Ae.infoBoxContent,children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(Jm,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"+91 63631 11328"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[r.jsx(SI,{size:16,color:"var(--guide-accent)"}),r.jsx("strong",{children:"shiva@newtons.in"})]})]})})]}),r.jsx("h3",{children:"Frequently Asked Questions"}),r.jsx("div",{className:Ae.faqList,children:O.map((F,B)=>r.jsxs("div",{className:Ae.faqItem,children:[r.jsxs("div",{className:Ae.faqQuestion,onClick:()=>l(o===B?null:B),children:[r.jsx("span",{children:F.question}),r.jsx(Lz,{size:18,className:`${Ae.faqIcon} ${o===B?Ae.faqIconOpen:""}`})]}),o===B&&r.jsx("div",{className:Ae.faqAnswer,children:F.answer})]},B))})]})]}),r.jsx("footer",{className:Ae.footer,children:r.jsxs("p",{className:Ae.footerText,children:[" ",new Date().getFullYear()," ",r.jsx("span",{className:Ae.footerBrand,children:"Newtons Ai"}),". Empowering Healthcare through Intelligence."]})})]}),r.jsxs("div",{className:Ae.fabContainer,children:[c&&r.jsxs("div",{className:Ae.fabContent,children:[r.jsxs("h4",{children:[r.jsx(tC,{size:18}),"Customer Care"]}),r.jsxs("div",{className:Ae.contactRow,children:[r.jsx(Jm,{size:16,className:Ae.contactIcon}),r.jsx("span",{children:"+91 63631 11328"}),r.jsx("button",{className:Ae.copyBtn,onClick:()=>navigator.clipboard.writeText("+916363111328"),title:"Copy Phone",children:r.jsx(bI,{size:14})})]}),r.jsxs("div",{className:Ae.contactRow,children:[r.jsx(SI,{size:16,className:Ae.contactIcon}),r.jsx("span",{children:"shiva@newtons.in"}),r.jsx("button",{className:Ae.copyBtn,onClick:()=>navigator.clipboard.writeText("shiva@newtons.in"),title:"Copy Email",children:r.jsx(bI,{size:14})})]})]}),r.jsx("button",{className:Ae.fabButton,onClick:()=>d(!c),title:"Customer Support",children:c?r.jsx(qt,{size:24}):r.jsx(tC,{size:24})})]})]})},s6e=({patient:t,onClose:e,onSave:n})=>{const[i,a]=b.useState({name:t.name,age:t.age,gender:t.gender,phone:t.phone||""}),[s,o]=b.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{await n({...i,phone:i.phone||void 0}),e()}catch(d){console.error(d),alert("Failed to update patient")}finally{o(!1)}};return r.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",width:"400px",maxWidth:"90%",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[r.jsx("h3",{style:{margin:0,fontSize:"1.2rem",color:"#333"},children:"Edit Patient Details"}),r.jsx("button",{onClick:e,style:{border:"none",background:"none",cursor:"pointer",color:"#666"},children:r.jsx(qt,{size:20})})]}),r.jsxs("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Name"}),r.jsx("input",{type:"text",value:i.name,onChange:c=>a({...i,name:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"},required:!0})]}),r.jsxs("div",{style:{display:"flex",gap:"16px"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Age"}),r.jsx("input",{type:"number",value:i.age||"",onChange:c=>a({...i,age:parseInt(c.target.value)||0}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"}})]}),r.jsxs("div",{style:{flex:1},children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Gender"}),r.jsxs("select",{value:i.gender||"",onChange:c=>a({...i,gender:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem",width:"100%"},children:[r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Phone"}),r.jsx("input",{type:"tel",value:i.phone,onChange:c=>a({...i,phone:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"},placeholder:"Optional"})]}),r.jsx("button",{type:"submit",className:"save-btn",style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:s,children:s?"Saving...":r.jsxs(r.Fragment,{children:[r.jsx(Js,{size:18})," Save Changes"]})})]})]})})},o6e=t=>[1,2,3,14,15,16,17,18,19,30,31,32].includes(t)?{type:"molar",roots:2}:[4,5,12,13,20,21,28,29].includes(t)?{type:"premolar",roots:1}:[6,11,22,27].includes(t)?{type:"canine",roots:1}:t>=1&&t<=32?{type:"incisor",roots:1}:[41,42,49,50,51,52,59,60].includes(t)?{type:"molar",roots:2}:[43,48,53,58].includes(t)?{type:"canine",roots:1}:[44,45,46,47,54,55,56,57].includes(t)?{type:"incisor",roots:1}:{type:"incisor",roots:1},qu=({toothNumber:t,conditions:e=[],className:n,style:i,isSelected:a,bridgeConnectPrevious:s})=>{const{type:o}=o6e(t),l=t<=16||t>=41&&t<=50,c="M5,20 Q5,5 18,5 Q31,5 31,20 L29,25 Q18,28 7,25 Z",d="M7,25 Q5,40 10,44 Q14,40 14,26",f="M29,25 Q31,40 26,44 Q22,40 22,26",p="M8,20 Q8,8 18,8 Q28,8 28,20 L26,24 Q18,27 10,24 Z",y="M10,24 Q16,44 18,45 Q20,44 26,24",x="M8,22 Q18,2 28,22 L26,25 Q18,28 10,25 Z",v="M10,25 Q18,48 26,25",S="M10,22 L10,12 Q18,12 26,12 L26,22 L24,25 Q18,27 12,25 Z",N="M12,25 Q18,46 24,25";let _=c,T=[d,f];o==="incisor"?(_=S,T=[N]):o==="canine"?(_=x,T=[v]):o==="premolar"&&(_=p,T=[y]);const C=e.includes("condition-rct"),O=e.includes("condition-filling"),k=e.includes("condition-crown"),P=e.includes("condition-bridge"),I=e.includes("condition-extraction"),F=e.includes("condition-implant"),B=C?"#e9d5ff":"#f3f4f6",$=I?"#fee2e2":"#ffffff",L=I?"#ef4444":P?"#0891b2":F?"#475569":k?"#b45309":a?"#3b82f6":"#6b7280",V=a||P||k||F?2:1.5,H=l?"M20,15 L56,15 L56,22 L20,22 Z":"M16,15 L-20,15 L-20,22 L16,22 Z";return r.jsxs("svg",{viewBox:"0 0 36 50",className:n,style:{width:"100%",height:"100%",overflow:"visible",...i},children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"goldGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),r.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),r.jsxs("linearGradient",{id:"bridgeGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),r.jsx("stop",{offset:"100%",stopColor:"#0891b2"})]}),r.jsxs("linearGradient",{id:"titaniumGradient",x1:"0",x2:"1",y1:"0",y2:"0",children:[r.jsx("stop",{offset:"0%",stopColor:"#475569"}),r.jsx("stop",{offset:"30%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"50%",stopColor:"#f8fafc"}),r.jsx("stop",{offset:"70%",stopColor:"#94a3b8"}),r.jsx("stop",{offset:"100%",stopColor:"#475569"})]})]}),s&&r.jsx("path",{d:H,fill:"url(#bridgeGradient)",stroke:"#0891b2",strokeWidth:"1.5"}),F?r.jsxs("g",{children:[r.jsx("path",{d:"M13,25 L23,25 L22,28 L23,29 L22,30 L22,33 L23,34 L22,35 L22,38 L23,39 L22,40 L19,46 Q18,48 17,46 L14,40 L13,39 L14,38 L14,35 L13,34 L14,33 L14,30 L13,29 L14,28 Z",fill:"url(#titaniumGradient)",stroke:L,strokeWidth:"1"}),r.jsxs("g",{stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",children:[r.jsx("line",{x1:"14",y1:"29",x2:"22",y2:"29"}),r.jsx("line",{x1:"14",y1:"34",x2:"22",y2:"34"}),r.jsx("line",{x1:"14",y1:"39",x2:"22",y2:"39"})]}),r.jsx("rect",{x:"15",y:"22",width:"6",height:"4",fill:"#64748b",stroke:L,strokeWidth:"1",rx:"1"})]}):r.jsx("g",{fill:B,stroke:L,strokeWidth:V,strokeLinejoin:"round",children:T.map((te,X)=>r.jsx("path",{d:te},X))}),C&&!F&&r.jsx("g",{fill:"none",stroke:"#9333ea",strokeWidth:"2.5",strokeLinecap:"round",children:o==="molar"?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M12,28 L11,42"}),r.jsx("path",{d:"M24,28 L25,42"})]}):r.jsx("path",{d:"M18,25 L18,44"})}),r.jsx("path",{d:_,fill:P?"url(#bridgeGradient)":k?"url(#goldGradient)":$,stroke:L,strokeWidth:V,strokeLinejoin:"round"}),O&&!k&&!P&&!F&&r.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"1"}),I&&r.jsxs("g",{stroke:"#ef4444",strokeWidth:"3",strokeLinecap:"round",children:[r.jsx("line",{x1:"8",y1:"8",x2:"28",y2:"42"}),r.jsx("line",{x1:"28",y1:"8",x2:"8",y2:"42"})]})]})},xb=(t,e="universal")=>e==="universal"?t<=32?t.toString():t>=41&&t<=50?String.fromCharCode(65+(t-41)):t>=51&&t<=60?String.fromCharCode(75+(t-51)):t.toString():e==="fdi"?t>=1&&t<=8?(18-(t-1)).toString():t>=9&&t<=16?(21+(t-9)).toString():t>=17&&t<=24?(38-(t-17)).toString():t>=25&&t<=32?(41+(t-25)).toString():t>=41&&t<=45?(55-(t-41)).toString():t>=46&&t<=50?(61+(t-46)).toString():t>=51&&t<=55?(75-(t-51)).toString():t>=56&&t<=60?(81+(t-56)).toString():t.toString():t.toString(),xG=({selectedTeeth:t,toothConditions:e={},toothDetails:n={},onToothClick:i,onEditPastRecord:a,onPrint:s,numberingSystem:o="universal"})=>{const[l,c]=Se.useState("permanent"),d=Array.from({length:16},(_,T)=>T+1),f=Array.from({length:16},(_,T)=>32-T),p=Array.from({length:10},(_,T)=>41+T),y=Array.from({length:10},(_,T)=>60-T),[x,v]=Se.useState(null),S=_=>{const T=e[_]||[],C=t.includes(_);let O=[],k="#9ca3af",P;const I=T.includes("condition-extraction");return C&&(k="#3b82f6"),T.includes("condition-filling")&&O.push("#60a5fa"),T.includes("condition-rct")&&O.push("#c084fc"),T.includes("condition-crown")&&(O.push("#fcd34d"),k="#d97706"),T.includes("condition-bridge")&&(O.push("#22d3ee"),k="#0891b2"),T.includes("condition-implant")&&(O.push("#94a3b8"),k="#475569"),T.includes("condition-extraction")&&(O.push("#fee2e2"),k="#ef4444"),O.length===0&&C&&O.push("#eff6ff"),O.length===0&&O.push("#ffffff"),{fillColors:O,borderColor:k,overlayColor:P,isSelected:C,hasExtraction:I}},N=_=>{const{isSelected:T}=S(_),C=e[_]||[],O=n[_],k=_<=16||_>=41&&_<=50,P=C.includes("condition-bridge");let I=!1;if(P){let B=null;k?(_>1&&_<=16&&(B=_-1),_>41&&_<=50&&(B=_-1)):(_<32&&_>=17&&(B=_+1),_<60&&_>=51&&(B=_+1)),B!==null&&(e[B]||[]).includes("condition-bridge")&&(I=!0)}const F=xb(_,o);return r.jsxs("div",{onClick:()=>i(_),onMouseEnter:()=>v(_),onMouseLeave:()=>v(null),className:`tooth-item-container ${T?"selected":""}`,title:"",children:[r.jsx("div",{className:"tooth-number-label",children:F}),r.jsx("div",{className:"tooth-svg-wrapper",style:{transform:k?"rotate(180deg)":"none"},children:r.jsx(qu,{toothNumber:_,conditions:C,isSelected:T,bridgeConnectPrevious:I})}),x===_&&O&&O.length>0&&r.jsxs("div",{className:"tooth-tooltip-window",children:[r.jsxs("div",{className:"tooltip-header",children:["Tooth ",F]}),r.jsx("ul",{className:"tooltip-list",children:O.map((B,$)=>r.jsxs("li",{className:"tooltip-detail-item",children:[r.jsxs("span",{className:"detail-text",children:[B.name," ",r.jsxs("small",{children:["(",B.date,")"]})]}),B.isPast&&a&&r.jsx("button",{className:"tooltip-edit-btn",onClick:L=>{L.stopPropagation(),a(B.recordId)},title:"Edit this record",children:r.jsx(vc,{size:12})})]},$))})]})]},_)};return r.jsxs("div",{className:"chart-container-inner",style:{position:"relative"},children:[r.jsxs("div",{className:"chart-header-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[r.jsxs("div",{className:"view-toggle-container",style:{display:"flex",gap:4,background:"#f3f4f6",padding:4,borderRadius:8},children:[r.jsx("button",{className:`view-toggle-btn ${l==="permanent"?"active":""}`,onClick:()=>c("permanent"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="permanent"?"#fff":"transparent",boxShadow:l==="permanent"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="permanent"?"#111827":"#6b7280"},children:"Permanent"}),r.jsx("button",{className:`view-toggle-btn ${l==="primary"?"active":""}`,onClick:()=>c("primary"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="primary"?"#fff":"transparent",boxShadow:l==="primary"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="primary"?"#111827":"#6b7280"},children:"Primary"})]}),s&&r.jsxs("button",{onClick:_=>{_.stopPropagation(),s()},className:"chart-print-btn no-print",title:"Print Report",children:[r.jsx(Av,{size:16}),r.jsx("span",{children:"Print Report"})]})]}),r.jsx("div",{className:"arch-label",children:"Maxillary (Upper)"}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?d.slice(0,8).map(_=>N(_)):p.slice(0,5).map(_=>N(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?d.slice(8).map(_=>N(_)):p.slice(5).map(_=>N(_))})]}),r.jsxs("div",{className:"midline-divider",children:[r.jsx("div",{className:"divider-line"}),r.jsx("span",{className:"chart-label",children:"Midline"}),r.jsx("div",{className:"divider-line"})]}),r.jsxs("div",{className:"arch-row",children:[r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(0,8).map(_=>N(_)):y.slice(0,5).map(_=>N(_))}),r.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(8).map(_=>N(_)):y.slice(5).map(_=>N(_))})]}),r.jsx("div",{className:"arch-label",children:"Mandibular (Lower)"}),r.jsxs("div",{className:"chart-legend",children:[r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(qu,{toothNumber:1,conditions:[],style:{width:16,height:22}})}),r.jsx("span",{children:"Healthy"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(qu,{toothNumber:1,conditions:["condition-filling"],style:{width:16,height:22}})}),r.jsx("span",{children:"Filling (Dot)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(qu,{toothNumber:1,conditions:["condition-rct"],style:{width:16,height:22}})}),r.jsx("span",{children:"RCT (Root Lines)"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(qu,{toothNumber:1,conditions:["condition-crown"],style:{width:16,height:22}})}),r.jsx("span",{children:"Crown"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(qu,{toothNumber:1,conditions:["condition-bridge"],style:{width:16,height:22}})}),r.jsx("span",{children:"Bridge"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(qu,{toothNumber:1,conditions:["condition-implant"],style:{width:16,height:22}})}),r.jsx("span",{children:"Implant"})]}),r.jsxs("div",{className:"legend-item",children:[r.jsx("div",{className:"legend-preview-mini",children:r.jsx(qu,{toothNumber:1,conditions:["condition-extraction"],style:{width:16,height:22}})}),r.jsx("span",{children:"Extraction (X)"})]})]}),r.jsxs("div",{className:"print-only-details-summary print-only",children:[r.jsx("h3",{children:"Tooth Procedure Details"}),Object.keys(n).length===0?r.jsx("p",{className:"no-details",children:"No specific tooth procedures recorded."}):r.jsxs("table",{className:"print-details-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Tooth"}),r.jsx("th",{children:"Procedure"}),r.jsx("th",{children:"Date"})]})}),r.jsx("tbody",{children:Object.entries(n).sort(([_],[T])=>parseInt(_)-parseInt(T)).map(([_,T])=>r.jsx(Se.Fragment,{children:T.map((C,O)=>r.jsxs("tr",{children:[O===0?r.jsxs("td",{rowSpan:T.length,className:"tooth-cell",children:["Tooth ",xb(parseInt(_),o)]}):null,r.jsx("td",{children:C.name}),r.jsx("td",{children:C.date})]},`${_}-${O}`))},_))})]})]})]})},l6e=({onClose:t,onUpdate:e})=>{const[n,i]=b.useState([]),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,d]=b.useState({}),[f,p]=b.useState(!1),[y,x]=b.useState({name:"",cost:0,type:"general"});b.useEffect(()=>{v()},[]);const v=async()=>{s(!0);try{const C=await ue("/api/dental/procedures");if(C.ok){const O=await C.json();i(O)}}catch(C){console.error(C)}finally{s(!1)}},S=async()=>{if(!(!y.name||!y.cost))try{(await ue("/api/dental/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).ok&&(p(!1),x({name:"",cost:0,type:"general"}),v(),e())}catch(C){console.error(C)}},N=async C=>{try{(await ue(`/api/dental/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),d({}),v(),e())}catch(O){console.error(O)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await ue(`/api/dental/procedures/${C}`,{method:"DELETE"})).ok&&(v(),e())}catch(O){console.error(O)}},T=C=>{l(C.id),d({name:C.name,cost:C.cost,type:C.type})};return r.jsx("div",{className:"manage-procedures-modal-overlay",children:r.jsxs("div",{className:"manage-procedures-modal-content",children:[r.jsxs("div",{className:"manage-procedures-modal-header",children:[r.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Procedures"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await ue("/api/dental/procedures/import-defaults",{method:"POST"}),v(),e()}catch(C){console.error(C)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),r.jsx("button",{onClick:t,className:"manage-procedures-close-btn",children:r.jsx(qt,{size:20})})]})]}),r.jsx("div",{className:"manage-procedures-list-container",children:a?r.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):r.jsxs("table",{className:"manage-procedures-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{style:{width:"40%"},children:"Name"}),r.jsx("th",{style:{width:"20%"},children:"Type"}),r.jsx("th",{style:{width:"20%"},children:"Cost ()"}),r.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),r.jsx("tbody",{children:n.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):n.map(C=>r.jsx("tr",{children:o===C.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{children:r.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:O=>d({...c,name:O.target.value}),placeholder:"Procedure Name"})}),r.jsx("td",{children:r.jsxs("select",{className:"edit-select",value:c.type||"general",onChange:O=>d({...c,type:O.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"})]})}),r.jsx("td",{children:r.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:O=>d({...c,cost:parseFloat(O.target.value)}),placeholder:"Cost"})}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>N(C.id),className:"action-btn btn-save",title:"Save",children:r.jsx(Js,{size:18})}),r.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:r.jsx(qt,{size:18})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{children:C.name}),r.jsx("td",{children:r.jsx("span",{className:`procedure-badge badge-${C.type}`,children:C.type})}),r.jsxs("td",{style:{fontWeight:500},children:["",C.cost]}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>T(C),className:"action-btn btn-edit",title:"Edit",children:r.jsx(vc,{size:18})}),r.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:r.jsx(Wn,{size:18})})]})]})},C.id))})]})}),r.jsx("div",{className:"add-procedure-section",children:f?r.jsxs("div",{className:"add-procedure-card",children:[r.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),r.jsxs("div",{className:"add-form-grid",children:[r.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:y.name||"",onChange:C=>x({...y,name:C.target.value})}),r.jsxs("select",{className:"form-select",value:y.type||"general",onChange:C=>x({...y,type:C.target.value}),children:[r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"filling",children:"Filling"}),r.jsx("option",{value:"rct",children:"RCT"}),r.jsx("option",{value:"extraction",children:"Extraction"}),r.jsx("option",{value:"crown",children:"Crown"}),r.jsx("option",{value:"bridge",children:"Bridge"}),r.jsx("option",{value:"implant",children:"Implant"})]}),r.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:y.cost||"",onChange:C=>x({...y,cost:parseFloat(C.target.value)})}),r.jsxs("div",{className:"btn-group",children:[r.jsx("button",{onClick:S,className:"btn-primary",children:"Save"}),r.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):r.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[r.jsx(ur,{size:18})," Add New Procedure"]})})]})})},c6e=({toothNumber:t,procedures:e,history:n=[],onSelect:i,onClose:a,numberingSystem:s="universal"})=>{const[o,l]=b.useState(""),[c,d]=b.useState(n.length>0?"history":"add"),f=xb(t,s),p=b.useMemo(()=>e.filter(y=>y.name.toLowerCase().includes(o.toLowerCase())),[e,o]);return r.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(2px)"},children:[r.jsxs("div",{className:"modal-content",style:{backgroundColor:"var(--dp-card-bg)",borderRadius:"12px",width:"100%",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",overflow:"hidden",animation:"scaleUp 0.2s ease-out"},children:[r.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid var(--dp-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--dp-bg)"},children:[r.jsxs("h3",{style:{margin:0,color:"var(--dp-text)",fontSize:"1.1rem"},children:["Tooth ",f]}),r.jsx("button",{onClick:a,style:{background:"none",border:"none",color:"var(--dp-text-sec)",cursor:"pointer",padding:"4px"},children:r.jsx(qt,{size:20})})]}),n.length>0&&r.jsxs("div",{className:"sidebar-tabs",style:{padding:"0 16px",paddingTop:"8px",background:"var(--dp-bg)"},children:[r.jsx("button",{className:c==="add"?"active":"",onClick:()=>d("add"),style:{padding:"8px 12px",borderBottomWidth:"2px"},children:"Add Procedure"}),r.jsxs("button",{className:c==="history"?"active":"",onClick:()=>d("history"),style:{padding:"8px 12px",borderBottomWidth:"2px"},children:["History (",n.length,")"]})]}),c==="add"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--dp-border)"},children:r.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[r.jsx(Hn,{size:16,style:{position:"absolute",left:"12px",color:"var(--dp-text-sec)"}}),r.jsx("input",{type:"text",placeholder:"Search procedures...",value:o,onChange:y=>l(y.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",borderRadius:"8px",border:"1px solid var(--dp-border)",backgroundColor:"var(--dp-bg)",color:"var(--dp-text)",fontSize:"0.9rem",outline:"none"},autoFocus:!0})]})}),r.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:p.length===0?r.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.9rem"},children:"No procedures found."}):r.jsx("div",{style:{display:"flex",flexDirection:"column"},children:p.map(y=>r.jsxs("button",{onClick:()=>i(y),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",border:"none",background:"transparent",borderBottom:"1px solid var(--dp-border)",cursor:"pointer",textAlign:"left",transition:"background-color 0.1s"},className:"procedure-modal-item",onMouseOver:x=>x.currentTarget.style.backgroundColor="var(--dp-bg)",onMouseOut:x=>x.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("div",{children:[r.jsx("div",{style:{color:"var(--dp-text)",fontWeight:500,fontSize:"0.95rem"},children:y.name}),r.jsx("div",{style:{color:"var(--dp-text-sec)",fontSize:"0.8rem",textTransform:"capitalize"},children:y.type})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--dp-primary)",fontWeight:600,fontSize:"0.9rem"},children:[r.jsxs("span",{children:["",y.cost]}),r.jsx(ur,{size:16})]})]},y.id))})})]}),c==="history"&&r.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",padding:"0"},children:n.map((y,x)=>r.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--dp-border)"},children:[r.jsx("div",{style:{fontWeight:500,fontSize:"0.9rem"},children:y.name}),r.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)"},children:[y.date," ",y.isPast?"(Past)":"(Current)"]})]},x))})]}),r.jsx("style",{children:`
                @keyframes scaleUp {
                    from { transform: scale(0.95); opacity: 0; }
                    to { transform: scale(1); opacity: 1; }
                }
            `})]})},u6e=({isOpen:t,onClose:e,recordId:n,onBillingComplete:i})=>{var ee,we,Ue,Ge,Le,oe,_e,$e,ze;const[a,s]=b.useState(null),[o,l]=b.useState([]),[c,d]=b.useState(!0),[f,p]=b.useState(null),[y,x]=b.useState(!1),[v,S]=b.useState("cash"),[N,_]=b.useState(""),[T,C]=b.useState(""),[O,k]=b.useState(""),[P,I]=b.useState(""),[F,B]=b.useState(""),[$,L]=b.useState(!1),[V,H]=b.useState([{id:crypto.randomUUID(),method:"cash",amount:0},{id:crypto.randomUUID(),method:"upi",amount:0}]),[te,X]=b.useState(0),q=b.useRef(!1),[W,ae]=b.useState(null),[G,z]=b.useState(!1),le=()=>{const Y=V.map(pe=>pe.method),ye=["cash","upi","card","no_cash_insurance","credit"].filter(pe=>!Y.includes(pe));ye.length>0&&H([...V,{id:crypto.randomUUID(),method:ye[0],amount:0}])},je=Y=>{V.length>2&&H(V.filter(ye=>ye.id!==Y))},K=(Y,ye,pe)=>{H(me=>{const Ne=me.map(Be=>Be.id===Y?ye==="method"?{...Be,method:pe}:{...Be,amount:Math.max(0,pe)}:Be);if(ye==="amount"&&Ne.length===2){const Ee=Ne.findIndex(mt=>mt.id===Y)===0?1:0,Ke=Math.max(0,pe),rt=se-Ke;Ne[Ee]={...Ne[Ee],amount:Math.max(0,rt)}}return Ne})},Oe=Y=>{const ye=V.filter(me=>me.id!==Y).reduce((me,Ne)=>me+Ne.amount,0),pe=Math.max(0,se-ye);K(Y,"amount",pe)},Ye=b.useMemo(()=>V.reduce((Y,ye)=>Y+ye.amount,0),[V]),Me=Y=>{const ye=Math.max(0,Math.min(100,isNaN(Y)?0:Y));q.current=!0,X(ye);const pe=o.map(me=>({...me,discount_percentage:ye}));l(pe)},Ie=(Y,ye)=>{const pe=[...o];pe[Y].discount_percentage=isNaN(ye)?0:ye,l(pe)};b.useEffect(()=>{if(q.current){q.current=!1;return}const Y=o.reduce((me,Ne)=>me+(Ne.price??0),0);if(Y===0){X(0);return}const pe=o.reduce((me,Ne)=>{const Ee=(Ne.price??0)*((Ne.discount_percentage??0)/100);return me+Ee},0)/Y*100;X(me=>Math.abs(me-pe)>.01?pe:me)},[o]);const be=async()=>{var Y,ye;if(!a)return p("No record data available to bill."),null;if(o.length===0)return p("Cannot bill an empty procedure list."),null;x(!0),p(null);try{const pe=o.map(Pe=>{const Je=Pe.price,et=Je*((Pe.discount_percentage??0)/100),ut=Je-et;return{name:Pe.name,price:Pe.price,quantity:1,total:ut,item_id:Pe.id||`proc_${Date.now()}`,type:"service",discount_percentage:Pe.discount_percentage??0}}),me=$?((Y=V[0])==null?void 0:Y.method)||"cash":v,Ne=$?V.map(Pe=>({method:Pe.method,amount:Pe.amount})):void 0,Be={patientId:a.patientId.id,items:pe,amount:se,paymentMode:me,splitPayments:Ne,type:"dental",related_id:a.id,status:"paid",discountPercentage:te},Ee=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)}),Ke=await Ee.json();if(!Ee.ok||!Ke.id)throw new Error(Ke.message||"Failed to create bill.");(await ue(`/api/dental/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:Ke.id})})).ok||console.error("Failed to update dental record status"),s(Pe=>Pe?{...Pe,status:"billed",billId:Ke.id}:null);const mt=$?((ye=V.find(Pe=>Pe.method==="credit"))==null?void 0:ye.amount)||0:v==="credit"?se:0;if(mt>0)try{await ue(`/api/patient-debts/${a.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:mt,related_bill_id:Ke.id,notes:`Dental Bill #${Ke.id}${$?" (Split Payment - Credit portion)":""}`})})}catch(Pe){console.error("Failed to create debt entry:",Pe)}return i&&i(),Ke.id}catch(pe){return console.error("Billing process failed:",pe),p(pe.message||"Failed to create bill."),null}finally{x(!1)}},re=()=>{window.print()},ve=async()=>{await be()&&setTimeout(()=>window.print(),800)};b.useEffect(()=>{t&&n&&(async()=>{d(!0);try{const[ye,pe]=await Promise.all([ue(`/api/dental/${n}`),ue("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!ye.ok)throw new Error("Failed to fetch dental record");const me=await ye.json(),Ne={...me,patientId:me.Patient||me.patientId};if(s(Ne),pe.ok){const Ke=await pe.json();C(Ke.upi_id||""),k(Ke.name||""),I(Ke.address||""),B(Ke.notes||"")}const Ee=(Ne.selected_procedures||Ne.selectedProcedures||[]).map(Ke=>({...Ke,price:Ke.cost,discount_percentage:0}));l(Ee)}catch(ye){console.error("Failed to fetch data:",ye),p(ye.message)}finally{d(!1)}})()},[t,n]);const ce=b.useMemo(()=>o.reduce((Y,ye)=>Y+(ye.price??0),0),[o]),fe=b.useMemo(()=>o.reduce((Y,ye)=>{const me=(ye.price??0)*(ye.discount_percentage??0)/100;return Y+me},0),[o]),se=b.useMemo(()=>ce-fe,[ce,fe]),Q=b.useMemo(()=>se-Ye,[se,Ye]),ie=b.useMemo(()=>Math.abs(Q)<.01,[Q]);b.useEffect(()=>{if($&&V.length>=1&&Ye===0){const Y=[...V];Y[0].amount=se,H(Y)}},[$,se]),b.useEffect(()=>{if(se>0&&T){const Y=`upi://pay?pa=${T}&pn=${encodeURIComponent(O)}&am=${se.toFixed(2)}&cu=INR`;_(Y)}else _("")},[se,T,O]);const ge=b.useMemo(()=>$?V.some(Y=>Y.method==="credit"):v==="credit",[$,V,v]);return b.useEffect(()=>{(async()=>{var ye;if(ge&&((ye=a==null?void 0:a.patientId)!=null&&ye.id)){z(!0);try{const pe=await ue(`/api/patient-debts/${a.patientId.id}/balance`);if(pe.ok){const me=await pe.json();ae(me.netDebt||0)}else ae(0)}catch{ae(0)}finally{z(!1)}}})()},[ge,(ee=a==null?void 0:a.patientId)==null?void 0:ee.id]),t?r.jsx("div",{className:"dental-billing-modal-overlay",children:r.jsxs("div",{className:"dental-billing-modal-content",children:[r.jsxs("header",{className:"dental-billing-modal-header no-print",children:[r.jsx("h2",{children:"Dental Invoice"}),r.jsx("button",{onClick:e,className:"close-modal-btn",children:r.jsx(qt,{size:20})})]}),r.jsx("div",{className:"dental-billing-modal-body",children:c?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsx("div",{className:"billing-container",children:r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3].map(Y=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})})]},Y))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]})]})]})})]})})}):f?r.jsxs("div",{className:"error-message-box",children:["Error: ",f]}):a?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:O||"Clinic Name"}),(P||F)&&r.jsxs("div",{className:"clinic-details-print",children:[P&&r.jsx("span",{className:"small-text clinic-address",children:P}),F&&r.jsx("span",{className:"small-text clinic-notes",children:F})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",((we=a.patientId)==null?void 0:we.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",((Ue=a.patientId)==null?void 0:Ue.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Date"]})," ",new Date(a.date||a.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",((Ge=a.patientId)==null?void 0:Ge.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",((Le=a.patientId)==null?void 0:Le.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(la,{size:16})," Record ID"]})," ",a.id.substring(a.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Date"]})," ",new Date(a.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"dental-chart-section-modal",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Dental Chart"})}),r.jsx("div",{className:"chart-wrapper-modal",children:r.jsx(xG,{selectedTeeth:[],onToothClick:()=>{},toothConditions:(()=>{const Y={};return a.teeth&&a.teeth.forEach(ye=>{ye.procedures.forEach(pe=>{var Ne,Be;const me=((Ne=a.selected_procedures)==null?void 0:Ne.find(Ee=>Ee.id===pe))||((Be=a.selectedProcedures)==null?void 0:Be.find(Ee=>Ee.id===pe));if(me&&me.type&&me.type!=="general"){Y[ye.toothNumber]||(Y[ye.toothNumber]=[]);const Ee=`condition-${me.type}`;Y[ye.toothNumber].includes(Ee)||Y[ye.toothNumber].push(Ee)}})}),Y})(),toothDetails:(()=>{const Y={};return a.teeth&&a.teeth.forEach(ye=>{Y[ye.toothNumber]||(Y[ye.toothNumber]=[]),ye.procedures.forEach(pe=>{var Ne,Be;const me=((Ne=a.selected_procedures)==null?void 0:Ne.find(Ee=>Ee.id===pe))||((Be=a.selectedProcedures)==null?void 0:Be.find(Ee=>Ee.id===pe));me&&Y[ye.toothNumber].push({name:me.name,date:new Date(a.date||a.createdAt).toLocaleDateString()})})}),Y})()})})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),o.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:o.map((Y,ye)=>{const pe=Y.price??0,me=pe*(Y.discount_percentage??0)/100,Ne=pe-me;return r.jsxs("tr",{children:[r.jsx("td",{children:ye+1}),r.jsx("td",{children:Y.name}),r.jsx("td",{children:Y.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:Y.discount_percentage===0?"":Y.discount_percentage,onChange:Be=>Ie(ye,parseFloat(Be.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:Ne.toFixed(2)})]},ye)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",te.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",fe.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",se.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"12px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px"},children:"Payment Details:"}),$?r.jsx("div",{className:"split-payment-details-print",children:V.map(Y=>r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:Y.method.toUpperCase()}),r.jsxs("span",{children:["",Y.amount.toFixed(2)]})]},Y.id))}):r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Mode"}),r.jsx("span",{children:v.toUpperCase()})]})]}),(v==="credit"||$&&V.some(Y=>Y.method==="credit"))&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"10px",borderTop:"1px dashed #ccc",paddingTop:"10px"},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"12px",color:"#e53e3e"},children:"Credit/Debt Information:"}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Credit Amount"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",$?(((oe=V.find(Y=>Y.method==="credit"))==null?void 0:oe.amount)||0).toFixed(2):se.toFixed(2)]})]}),(W??0)>0&&r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px"},children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(W??0).toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontSize:"11px",fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((W??0)+($?((_e=V.find(Y=>Y.method==="credit"))==null?void 0:_e.amount)||0:se)).toFixed(2)]})]})]})]}),N&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${v!=="upi"&&!($&&V.some(Y=>Y.method==="upi"))?"hide-on-screen":""}`,children:[r.jsx(ua,{value:N,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",ce.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",fe.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:te===0?"":te,onChange:Y=>Me(parseFloat(Y.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:y||a.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",se.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:N?r.jsxs(r.Fragment,{children:[r.jsx(ua,{value:N,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{className:"payment-mode-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",style:{margin:0},children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",className:`split-payment-toggle ${$?"active":""}`,onClick:()=>L(!$),disabled:y||a.status==="billed",style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"20px",border:$?"2px solid #4facfe":"1px solid #ddd",background:$?"linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15))":"transparent",color:$?"#4facfe":"#666",cursor:"pointer",fontSize:"0.85rem",fontWeight:$?"600":"500",transition:"all 0.2s ease"},children:[r.jsx(Mc,{size:14}),"Split Pay"]})]}),$?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsxs("span",{className:"split-payment-title",children:[r.jsx(Mc,{size:14}),"Split Payment"]}),r.jsxs("span",{className:"split-payment-total",children:["",se.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:V.map((Y,ye)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:ye+1}),r.jsxs("select",{value:Y.method,onChange:pe=>K(Y.id,"method",pe.target.value),className:`split-payment-select ${Y.method==="credit"?"is-credit":""}`,disabled:y||a.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",value:Y.amount===0?"":Y.amount,onChange:pe=>K(Y.id,"amount",parseFloat(pe.target.value)||0),placeholder:"0",className:`split-payment-input ${Y.method==="credit"?"is-credit":""}`,disabled:y||a.status==="billed"})]}),V.length>2&&r.jsx("button",{type:"button",onClick:()=>Oe(Y.id),className:"split-payment-btn split-payment-btn-fill",disabled:y||a.status==="billed",children:"Fill"}),V.length>2&&r.jsx("button",{type:"button",onClick:()=>je(Y.id),className:"split-payment-btn split-payment-btn-remove",disabled:y||a.status==="billed",children:r.jsx(Wn,{size:12})})]},Y.id))}),V.length<5&&r.jsxs("button",{type:"button",onClick:le,className:"split-payment-add-btn",disabled:y||a.status==="billed",children:[r.jsx(ur,{size:14}),"Add Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",Ye.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${Math.abs(Q)<.01?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[Math.abs(Q)<.01?"":Q>0?"":"",Math.abs(Q)<.01?"Balanced":Q>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(Q).toFixed(2)]})]}),!ie&&r.jsxs("div",{className:"split-payment-warning",children:[" Must equal ",se.toFixed(2)]})]})]}):r.jsxs("select",{value:v,onChange:Y=>S(Y.target.value),className:"payment-mode-select",disabled:y||a.status==="billed",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),r.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),ge&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),G?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:W&&W>0?"#dc3545":"#28a745"},children:["",(W||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:$?"Credit Amount:":"This Bill:"}),r.jsxs("strong",{children:["+ ",($?(($e=V.find(Y=>Y.method==="credit"))==null?void 0:$e.amount)||0:se).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((W||0)+($?((ze=V.find(Y=>Y.method==="credit"))==null?void 0:ze.amount)||0:se)).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:a.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:re,className:"secondary-button print-preview-button no-print",disabled:y,children:"Print Preview"}),r.jsx("button",{onClick:ve,className:"primary-button",disabled:y||$&&!ie,children:y?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Cl,{size:20})," Bill Generated"]}),r.jsx("button",{onClick:re,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})}):r.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},IB=/^\+?[0-9\s\-().]{7,20}$/,d6e=/^[a-zA-Z\s'-]{2,}$/,h6e=()=>{const t=Mt(),[e,n]=b.useState(""),[i,a]=b.useState([]),[s,o]=b.useState(!1),[l,c]=b.useState(null),[d,f]=b.useState(!1),[p,y]=b.useState(!1),[x,v]=b.useState(!1),[S,N]=b.useState([]),[_,T]=b.useState(!0),[C,O]=b.useState(()=>{const pe=localStorage.getItem("dentalNumberingSystem");return pe==="fdi"||pe==="universal"?pe:"universal"});b.useEffect(()=>{localStorage.setItem("dentalNumberingSystem",C)},[C]);const k=Vr();b.useEffect(()=>{k.state&&k.state.patient&&se(k.state.patient)},[k.state]);const[P,I]=b.useState([]),[F,B]=b.useState([]),[$,L]=b.useState({}),[V,H]=b.useState(""),[te,X]=b.useState(!1),[q,W]=b.useState("plan"),[ae,G]=b.useState([]),[z,le]=b.useState([]),[je,K]=b.useState(!1),[Oe,Ye]=b.useState(!1),[Me,Ie]=b.useState(null);b.useEffect(()=>{re(),be()},[]);const be=async()=>{try{const pe=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),me=await ue(`/api/patients?${pe.toString()}`);if(me.ok){const Ne=await me.json();N(Ne.patients||[])}}catch(pe){console.error("Error fetching recent patients",pe)}finally{T(!1)}},re=async()=>{try{const pe=await ue("/api/dental/procedures");if(pe.ok){const me=await pe.json();le(me)}}catch(pe){console.error("Error fetching procedures",pe)}};b.useEffect(()=>{(async()=>{if(!l){G([]),Ie(null),H(""),B([]),L({}),I([]);return}try{const me=await ue(`/api/dental/patient/${l.id}`);if(me.ok){const Ne=await me.json();G(Ne);const Be=new Date().toDateString(),Ee=Ne.find(Ke=>Ke.status==="draft"&&new Date(Ke.date||Ke.createdAt||Date.now()).toDateString()===Be);if(Ee){Ie(Ee.id),H(Ee.notes||"");const Ke=Ee.selected_procedures.filter(Pe=>!Ee.teeth.some(Je=>Je.procedures.includes(Pe.id)));B(Ke.map(Pe=>({instanceId:crypto.randomUUID(),procedureId:Pe.id,name:Pe.name,price:Pe.cost,type:Pe.type})));const rt={},mt=[];Ee.teeth.forEach(Pe=>{const Je=Pe.procedures.map(et=>{const ut=Ee.selected_procedures.find(_t=>_t.id===et)||z.find(_t=>_t.id===et);return{instanceId:crypto.randomUUID(),procedureId:et,name:ut?ut.name:et,price:ut?ut.cost:0,type:ut?ut.type:"general"}});Je.length>0&&(rt[Pe.toothNumber]=Je,mt.push(Pe.toothNumber))}),L(rt),I(mt)}else Ie(null),H(""),B([]),L({}),I([])}}catch(me){console.error("Error fetching history",me)}})()},[l,z]);const ve=b.useMemo(()=>ud(async pe=>{if(!pe.trim()||pe.length<2){a([]),o(!1);return}o(!0);try{const me=await ue(`/api/patients?search=${encodeURIComponent(pe)}&limit=10`);if(me.ok){const Ne=await me.json();a(Ne.patients||[])}}catch(me){console.error("Search error:",me)}finally{o(!1)}},300),[]);b.useEffect(()=>{ve(e)},[e,ve]);const ce=pe=>{const me=pe.target.value;n(me),y(IB.test(me)),v(d6e.test(me)&&!IB.test(me))},fe=async pe=>{if(!(!e||pe==="phone"&&!p||pe==="name"&&!x)){o(!0);try{const Ne=await ue("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:pe==="name"?e:"direct dental",phone:pe==="phone"?e:null,age:null,gender:null,token:null})});if(Ne.ok){const Be=await Ne.json();se({id:Be.id,name:Be.name,token:Be.token??null,age:Be.age??null,gender:Be.gender??null,phone:Be.phone})}else alert("Failed to create patient")}catch(me){console.error("Error creating patient:",me),alert("Error creating patient")}finally{o(!1)}}},se=pe=>{c(pe),n(""),a([])},Q=()=>{c(null),I([]),B([]),L({}),H("")},ie=async pe=>{if(!l)return;const me=await ue(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)});if(me.ok)await me.json(),c(Ne=>Ne?{...Ne,...pe}:null);else throw new Error("Failed to update")},[ge,ee]=b.useState(null),we=pe=>{ee(pe)},Ue=pe=>{if(!ge)return;const me={instanceId:crypto.randomUUID(),procedureId:pe.id,name:pe.name,price:pe.cost,type:pe.type};L(Ne=>{const Be=Ne[ge]||[];return{...Ne,[ge]:[...Be,me]}}),I(Ne=>Ne.includes(ge)?Ne:[...Ne,ge]),ee(null)},Ge=()=>{const pe={},me={},Ne=(Ke,rt)=>{pe[Ke]||(pe[Ke]=[]);const mt=`condition-${rt}`;pe[Ke].includes(mt)||pe[Ke].push(mt)},Be=(Ke,rt)=>{me[Ke]||(me[Ke]=[]),me[Ke].push(rt)};return[...ae].sort((Ke,rt)=>new Date(Ke.date).getTime()-new Date(rt.date).getTime()).forEach(Ke=>{Ke.teeth&&Array.isArray(Ke.teeth)&&Ke.teeth.forEach(rt=>{rt.procedures.forEach(mt=>{var Je;let Pe=(Je=Ke.selected_procedures)==null?void 0:Je.find(et=>et.id===mt);Pe||(Pe=z.find(et=>et.id===mt)),Pe&&Pe.type!=="general"?(Ne(rt.toothNumber,Pe.type),Be(rt.toothNumber,{name:Pe.name,date:new Date(Ke.date||Ke.createdAt||0).toLocaleDateString(),recordId:Ke.id,isPast:!0})):mt&&Be(rt.toothNumber,{name:`Procedure: ${mt}`,date:new Date(Ke.date||Ke.createdAt||0).toLocaleDateString(),recordId:Ke.id,isPast:!0})})})}),Object.keys($).forEach(Ke=>{const rt=parseInt(Ke),mt=$[rt];mt&&mt.length>0&&mt.forEach(Pe=>{Pe.type!=="general"&&(Ne(rt,Pe.type),Be(rt,{name:Pe.name,date:"Current",isPast:!1}))})}),{conditions:pe,details:me}},{conditions:Le,details:oe}=b.useMemo(()=>Ge(),[ae,$,z]),_e=pe=>{const me=ae.find(Ke=>Ke.id===pe);if(!me)return;H(me.notes||"");const Ne=me.selected_procedures.filter(Ke=>!me.teeth.some(rt=>rt.procedures.includes(Ke.id)));B(Ne.map(Ke=>({instanceId:crypto.randomUUID(),procedureId:Ke.id,name:Ke.name,price:Ke.cost,type:Ke.type})));const Be={},Ee=[];me.teeth.forEach(Ke=>{const rt=Ke.procedures.map(mt=>{const Pe=me.selected_procedures.find(Je=>Je.id===mt)||z.find(Je=>Je.id===mt);return{instanceId:crypto.randomUUID(),procedureId:mt,name:Pe?Pe.name:mt,price:Pe?Pe.cost:0,type:Pe?Pe.type:"general"}});rt.length>0&&(Be[Ke.toothNumber]=rt,Ee.push(Ke.toothNumber))}),L(Be),I(Ee),W("plan")},$e=(pe,me)=>{me?(L(Ne=>{const Be={...Ne};return Be[me]=(Ne[me]||[]).filter(Ee=>Ee.instanceId!==pe),Be[me].length===0&&delete Be[me],Be}),I(Ne=>Ne)):B(Ne=>Ne.filter(Be=>Be.instanceId!==pe))},ze=(pe,me,Ne)=>{Ne?L(Be=>({...Be,[Ne]:(Be[Ne]||[]).map(Ee=>Ee.instanceId===pe?{...Ee,price:me}:Ee)})):B(Be=>Be.map(Ee=>Ee.instanceId===pe?{...Ee,price:me}:Ee))},Y=()=>{window.print()},ye=async(pe=!0)=>{var me;if(l){X(!0);try{const Be=[...F,...Object.values($).flat()].map(Pe=>({id:Pe.procedureId,name:Pe.name,cost:Pe.price,type:Pe.type})),Ke=Object.keys($).map(Number).map(Pe=>({toothNumber:Pe,procedures:($[Pe]||[]).map(Je=>Je.procedureId),notes:V})),rt={patientId:l.id,teeth:Ke,selectedProcedures:Be,notes:V};let mt;if(Me?((me=ae.find(Je=>Je.id===Me))==null?void 0:me.status)==="draft"?mt=await ue(`/api/dental/${Me}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(rt)}):mt=await ue("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(rt)}):mt=await ue("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(rt)}),mt.ok){const Pe=await mt.json();Ie(Pe.id);const Je=await ue(`/api/dental/patient/${l.id}`);if(Je.ok){const et=await Je.json();G(et)}pe?Ye(!0):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save dental record.")}catch(Ne){console.error(Ne),alert("Error saving record.")}finally{X(!1)}}};return r.jsxs("div",{className:"dental-page-container printable-section",children:[r.jsxs("header",{className:"dental-header",children:[r.jsxs("div",{className:"dental-title-group",children:[r.jsx(la,{className:"dental-title-icon"}),r.jsxs("div",{children:[r.jsx("h1",{className:"dental-title",children:"Dental Report"}),r.jsx("p",{className:"dental-subtitle",children:"Create new dental records and bills"})]}),r.jsxs("div",{className:"numbering-toggle",style:{marginLeft:"auto",marginRight:"16px",display:"flex",gap:"4px",background:"var(--dp-bg-sec)",padding:"4px",borderRadius:"8px"},children:[r.jsx("button",{onClick:()=>O("universal"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="universal"?"var(--dp-card-bg)":"transparent",boxShadow:C==="universal"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="universal"?"var(--dp-text)":"var(--dp-text-sec)"},children:"Universal"}),r.jsx("button",{onClick:()=>O("fdi"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="fdi"?"var(--dp-card-bg)":"transparent",boxShadow:C==="fdi"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="fdi"?"var(--dp-text)":"var(--dp-text-sec)"},children:"FDI"})]})]}),l&&r.jsxs("div",{className:"selected-patient-header-group",children:[r.jsxs("div",{className:"header-patient-info",children:[r.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"header-patient-text",children:[r.jsxs("div",{className:"header-patient-name-row",children:[r.jsx("span",{className:"header-patient-name",children:l.name}),r.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:r.jsx(vc,{size:12})})]}),r.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),r.jsx("button",{onClick:Q,className:"header-close-patient-btn no-print",title:"Change Patient",children:r.jsx(qt,{size:16})})]}),r.jsx("div",{className:"header-search-wrapper no-print",children:r.jsxs("div",{className:"search-input-wrapper header-variant",children:[r.jsx(Hn,{className:"search-icon-overlay",size:16}),r.jsx("input",{type:"text",placeholder:"Search patient...",className:"dental-search-input header-input",value:e,onChange:ce}),s&&r.jsx("div",{className:"search-spinner small"}),i.length>0&&r.jsx("div",{className:"search-results-dropdown header-dropdown",children:i.map(pe=>r.jsxs("div",{onClick:()=>se(pe),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:pe.name}),r.jsxs("div",{className:"patient-meta",children:[pe.age," yrs / ",pe.gender,"  ",pe.phone]})]}),r.jsx(vr,{size:16,color:"var(--dp-text-sec)"})]},pe.id))}),e.length>=2&&!s&&i.length===0&&r.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[r.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)",marginBottom:"8px"},children:['No match for "',e,'"']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||x)&&r.jsx("button",{type:"button",onClick:()=>fe(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>t(-1),className:"dental-back-btn no-print",children:"Back"})})]}),!l&&r.jsxs("div",{className:"patient-search-container",children:[!l&&r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--dp-text)"},children:"Who is this for?"}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Hn,{className:"search-icon-overlay",size:20}),r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"dental-search-input",value:e,onChange:ce,autoFocus:!0}),s&&r.jsx("div",{className:"search-spinner"})]}),i.length>0&&r.jsx("div",{className:"search-results-dropdown",children:i.map(pe=>r.jsxs("div",{onClick:()=>se(pe),className:"search-result-item",children:[r.jsxs("div",{children:[r.jsx("span",{className:"patient-name-highlight",children:pe.name}),r.jsxs("div",{className:"patient-meta",children:[pe.age," yrs / ",pe.gender,"  ",pe.phone]})]}),r.jsx(vr,{size:18,color:"var(--dp-text-sec)"})]},pe.id))}),e.length>=2&&!s&&i.length===0&&r.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[r.jsxs("p",{style:{color:"var(--dp-text-sec)",marginBottom:"15px"},children:['No patients found matching "',e,'".']}),r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:(p||x)&&r.jsxs("button",{type:"button",onClick:()=>fe(p?"phone":"name"),className:"register-new-btn",style:{backgroundColor:"var(--dp-card-bg)",border:"1px solid var(--dp-primary)",padding:"8px 16px",borderRadius:"8px"},children:['Create "',e,'"']})})]}),!l&&r.jsx("div",{style:{marginTop:"32px"},children:r.jsx("button",{onClick:()=>K(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage Procedures"})}),!l&&(_||S.length>0)&&r.jsxs("div",{className:"recent-registered-section",children:[r.jsx("div",{className:"recent-registered-label",children:"Recent Patients"}),r.jsx("div",{className:"recent-list",children:_?[1,2,3].map(pe=>r.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx(Z,{width:100,height:18}),r.jsx(Z,{width:30,height:20})]}),r.jsx("div",{className:"recent-info",children:r.jsx(Z,{width:80,height:14})})]},pe)):S.map(pe=>r.jsxs("div",{className:"recent-patient-pill",onClick:()=>se(pe),children:[r.jsxs("div",{className:"recent-name-container",children:[r.jsx("span",{className:"recent-name",children:pe.name||"New Patient"}),pe.token&&r.jsxs("span",{className:"recent-token",children:["#",pe.token]})]}),r.jsxs("div",{className:"recent-info",children:[pe.age?`${pe.age} yrs`:"",pe.age&&pe.gender?" / ":"",pe.gender||""]})]},pe.id))})]})]}),l&&r.jsx("div",{className:"dental-workspace",children:r.jsxs("div",{className:"dental-grid",children:[r.jsxs("div",{className:"chart-section",children:[r.jsx("div",{className:"dental-card chart-card-scroll",children:r.jsx(xG,{selectedTeeth:P,toothConditions:Le,toothDetails:oe,onToothClick:we,onEditPastRecord:_e,onPrint:Y,numberingSystem:C})}),r.jsxs("div",{className:"dental-card notes-container",children:[r.jsxs("div",{className:"notes-header",children:[r.jsx("h4",{className:"section-title-sm",children:"Clinical Notes"}),r.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>ye(!1),disabled:te,title:"Save notes and procedures without billing",children:[r.jsx(Js,{size:12})," Save"]})]}),r.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:V,onChange:pe=>H(pe.target.value)})]})]}),r.jsx("div",{className:"dental-card procedures-section",children:r.jsxs("div",{className:"treatment-plan-container",style:{borderTop:"none"},children:[r.jsxs("div",{className:"sidebar-tabs",children:[r.jsx("button",{onClick:()=>W("plan"),className:q==="plan"?"active":"",children:"Treatment Plan"}),r.jsx("button",{onClick:()=>W("history"),className:q==="history"?"active":"",children:"Visit History"})]}),r.jsx("div",{className:"treatment-plan-list custom-scrollbar",children:q==="plan"?r.jsx(r.Fragment,{children:F.length===0&&Object.keys($).length===0?r.jsx("div",{className:"no-print",style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"Select a tooth to add procedures."}):r.jsxs(r.Fragment,{children:[F.length>0&&r.jsxs("div",{className:"plan-group",children:[r.jsx("h4",{children:"General"}),F.map(pe=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:pe.name,children:pe.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:pe.price,onChange:me=>ze(pe.instanceId,parseFloat(me.target.value)||0),className:"cost-input"}),r.jsx("button",{onClick:()=>$e(pe.instanceId),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(qt,{size:14})})]})]},pe.instanceId))]}),Object.entries($).map(([pe,me])=>me.length===0?null:r.jsxs("div",{className:"plan-group",children:[r.jsxs("h4",{children:["Tooth ",xb(parseInt(pe),C)]}),me.map(Ne=>r.jsxs("div",{className:"plan-item",children:[r.jsx("span",{className:"plan-item-name",title:Ne.name,children:Ne.name}),r.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("input",{type:"number",value:Ne.price,onChange:Be=>ze(Ne.instanceId,parseFloat(Be.target.value)||0,parseInt(pe)),className:"cost-input"}),r.jsx("button",{onClick:()=>$e(Ne.instanceId,parseInt(pe)),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:r.jsx(qt,{size:14})})]})]},Ne.instanceId))]},pe))]})}):r.jsx("div",{className:"history-list",children:ae.length===0?r.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"No past visits found."}):ae.map(pe=>r.jsxs("div",{className:"history-record-card",children:[r.jsxs("div",{className:"history-record-header",children:[r.jsx("span",{className:"record-date",children:new Date(pe.date).toLocaleDateString()}),r.jsx("span",{className:"record-status",children:pe.status})]}),r.jsxs("div",{className:"history-record-body",children:[pe.teeth.map(me=>r.jsxs("div",{className:"history-tooth-group",children:[r.jsxs("strong",{children:["Tooth ",xb(me.toothNumber,C),":"]})," ",me.procedures.map(Ne=>{const Be=pe.selected_procedures.find(Ee=>Ee.id===Ne)||z.find(Ee=>Ee.id===Ne);return Be?Be.name:Ne}).join(", ")]},me.toothNumber)),pe.notes&&r.jsx("p",{className:"history-notes",children:r.jsxs("em",{children:["Notes: ",pe.notes]})}),pe.status==="billed"&&r.jsx("div",{className:"history-record-actions mt-3",children:r.jsxs("button",{onClick:()=>{Ie(pe.id),Ye(!0)},className:"view-bill-btn",children:[r.jsx(la,{size:14})," View Bill"]})})]})]},pe.id))})}),r.jsx("div",{className:"action-footer",children:r.jsx("button",{onClick:()=>ye(!0),className:"save-btn",disabled:te||F.length===0&&Object.keys($).length===0,children:te?"Saving...":"Save & Bill"})})]})})]})}),d&&l&&r.jsx(s6e,{patient:l,onClose:()=>f(!1),onSave:ie}),je&&r.jsx(l6e,{onClose:()=>K(!1),onUpdate:re}),ge!==null&&r.jsx(c6e,{toothNumber:ge,procedures:z.map(pe=>({id:pe.id,name:pe.name,cost:pe.cost,type:pe.type})),history:oe[ge]||[],onSelect:Ue,onClose:()=>ee(null),numberingSystem:C}),r.jsx(u6e,{isOpen:Oe,recordId:Me,onClose:()=>{Ye(!1),Q()},onBillingComplete:()=>{}})]})},f6e=()=>{var ge,ee,we,Ue,Ge;const t=Mt(),e=Vr(),[n,i]=b.useState(null),[a,s]=b.useState([]),[o,l]=b.useState(!0),[c,d]=b.useState(null),[f,p]=b.useState(!1),[y,x]=b.useState("cash"),[v,S]=b.useState(""),[N,_]=b.useState(""),[T,C]=b.useState(""),[O,k]=b.useState(""),[P,I]=b.useState(""),[F,B]=b.useState(!1),[$,L]=b.useState([{id:"1",method:"cash",amount:0},{id:"2",method:"upi",amount:0}]),V=()=>{$.length<5&&L(Le=>[...Le,{id:Date.now().toString(),method:"cash",amount:0}])},H=Le=>{$.length>2&&L(oe=>oe.filter(_e=>_e.id!==Le))},te=(Le,oe,_e)=>{L($e=>{const ze=$e.map(Y=>Y.id===Le?oe==="method"?{...Y,method:_e}:{...Y,amount:Math.max(0,_e)}:Y);if(oe==="amount"&&ze.length===2){const ye=ze.findIndex(Ne=>Ne.id===Le)===0?1:0,pe=Math.max(0,_e),me=ve-pe;ze[ye]={...ze[ye],amount:Math.max(0,me)}}return ze})},X=(Le,oe)=>{const _e=$.filter(ze=>ze.id!==Le).reduce((ze,Y)=>ze+Y.amount,0),$e=Math.max(0,oe-_e);L(ze=>ze.map(Y=>Y.id===Le?{...Y,amount:$e}:Y))},[q,W]=b.useState(0),ae=b.useRef(!1),[G,z]=b.useState(null),[le,je]=b.useState(!1),K=Le=>{const oe=Math.max(0,Math.min(100,isNaN(Le)?0:Le));ae.current=!0,W(oe);const _e=a.map($e=>({...$e,discount_percentage:oe}));s(_e)},Oe=(Le,oe)=>{const _e=[...a];_e[Le].discount_percentage=isNaN(oe)?0:oe,s(_e)};b.useEffect(()=>{if(ae.current){ae.current=!1;return}const Le=a.reduce(($e,ze)=>$e+(ze.price??0),0);if(Le===0){W(0);return}const _e=a.reduce(($e,ze)=>{const ye=(ze.price??0)*((ze.discount_percentage??0)/100);return $e+ye},0)/Le*100;W($e=>Math.abs($e-_e)>.01?_e:$e)},[a]);const Ye=async()=>{if(!n)return d("No record data available to bill."),null;if(a.length===0)return d("Cannot bill an empty procedure list."),null;p(!0),d(null);try{const Le=a.map(ye=>{const pe=ye.price,me=pe*((ye.discount_percentage??0)/100),Ne=pe-me;return{name:ye.name,price:ye.price,quantity:1,total:Ne,item_id:ye.id||`proc_${Date.now()}`,type:"service",discount_percentage:ye.discount_percentage??0}}),oe={patientId:n.patientId.id,items:Le,amount:ve,paymentMode:F?"split":y,type:"dental",related_id:n.id,status:"paid",discountPercentage:q};F&&(oe.splitPayments=$.map(ye=>({method:ye.method,amount:ye.amount})));const _e=await ue("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)}),$e=await _e.json();if(!_e.ok||!$e.id)throw new Error($e.message||"Failed to create bill.");(await ue(`/api/dental/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:$e.id})})).ok||console.error("Failed to update dental record status"),i(ye=>ye?{...ye,status:"billed",billId:$e.id}:null);const Y=F?$.filter(ye=>ye.method==="credit").reduce((ye,pe)=>ye+pe.amount,0):y==="credit"?ve:0;if(Y>0)try{await ue(`/api/patient-debts/${n.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Y,related_bill_id:$e.id,notes:`Dental Bill #${$e.id}`})})}catch(ye){console.error("Failed to create debt entry:",ye)}return $e.id}catch(Le){return console.error("Billing process failed:",Le),d(Le.message||"Failed to create bill."),null}finally{p(!1)}},Me=()=>{window.print()},Ie=async()=>{await Ye()&&setTimeout(()=>window.print(),500)};b.useEffect(()=>{const Le=e.pathname.split("/"),oe=Le[Le.length-1];oe?(async()=>{l(!0);try{const[$e,ze]=await Promise.all([ue(`/api/dental/${oe}`),ue("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!$e.ok)throw new Error("Failed to fetch dental record");const Y=await $e.json(),ye={...Y,patientId:Y.Patient||Y.patientId};if(i(ye),ze.ok){const Ne=await ze.json();_(Ne.upi_id||""),C(Ne.name||""),k(Ne.address||""),I(Ne.notes||"")}const me=(ye.selected_procedures||ye.selectedProcedures||[]).map(Ne=>({...Ne,price:Ne.cost,discount_percentage:0}));s(me)}catch($e){console.error("Failed to fetch data:",$e),d($e.message)}finally{l(!1)}})():(d("No record ID provided."),l(!1))},[e.pathname]);const be=b.useMemo(()=>a.reduce((Le,oe)=>Le+(oe.price??0),0),[a]),re=b.useMemo(()=>a.reduce((Le,oe)=>{const $e=(oe.price??0)*(oe.discount_percentage??0)/100;return Le+$e},0),[a]),ve=b.useMemo(()=>be-re,[be,re]),ce=b.useMemo(()=>$.reduce((Le,oe)=>Le+oe.amount,0),[$]),fe=b.useMemo(()=>ve-ce,[ve,ce]),se=b.useMemo(()=>Math.abs(fe)<.01,[fe]),Q=b.useMemo(()=>F?$.some(Le=>Le.method==="credit"&&Le.amount>0):y==="credit",[F,$,y]),ie=b.useMemo(()=>F?$.filter(Le=>Le.method==="credit").reduce((Le,oe)=>Le+oe.amount,0):y==="credit"?ve:0,[F,$,y,ve]);return b.useEffect(()=>{if(ve>0&&N){const Le=`upi://pay?pa=${N}&pn=${encodeURIComponent(T)}&am=${ve.toFixed(2)}&cu=INR`;S(Le)}else S("")},[ve,N,T]),b.useEffect(()=>{(async()=>{var oe;if(Q&&((oe=n==null?void 0:n.patientId)!=null&&oe.id)){je(!0);try{const _e=await ue(`/api/patient-debts/${n.patientId.id}/balance`);if(_e.ok){const $e=await _e.json();z($e.netDebt||0)}else z(0)}catch{z(0)}finally{je(!1)}}})()},[Q,(ge=n==null?void 0:n.patientId)==null?void 0:ge.id]),o?r.jsx("div",{className:"pharmacy-billing-page",children:r.jsxs("div",{className:"billing-container",children:[r.jsxs("div",{className:"billing-header no-print",children:[r.jsx("div",{className:"back-button",children:r.jsx(Z,{width:100,height:40,style:{borderRadius:"8px"}})}),r.jsx(Z,{width:300,height:40})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("div",{className:"order-details-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:150,height:24})})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:200,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:180,height:20})}),r.jsx("div",{className:"info-item",children:r.jsx(Z,{width:150,height:20})})]})]}),r.jsxs("div",{className:"medications-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:120,height:24})})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:r.jsx(Z,{width:30,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:150,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:80,height:20})}),r.jsx("th",{children:r.jsx(Z,{width:100,height:20})})]})}),r.jsx("tbody",{children:[1,2,3,4].map(Le=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx(Z,{width:20,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:180,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:70,height:20})}),r.jsx("td",{children:r.jsx(Z,{width:90,height:20})})]},Le))})]})})]})]}),r.jsx("aside",{className:"billing-sidebar",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:r.jsx(Z,{width:160,height:24})})}),r.jsxs("div",{className:"space-y-4 p-5",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:100,height:20}),r.jsx(Z,{width:80,height:20})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(Z,{width:120,height:28}),r.jsx(Z,{width:100,height:28})]}),r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:r.jsx(Z,{width:150,height:150})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}}),r.jsx(Z,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?r.jsxs("div",{className:"pharmacy-billing-page",children:[" ",r.jsxs("div",{className:"billing-container printable-section",children:[r.jsxs("div",{className:"billing-header print-only",children:[r.jsx("div",{className:"clinic-header-left",children:r.jsx("div",{className:"clinic-info-print",children:r.jsxs("div",{className:"clinic-name-and-details-print",children:[r.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),r.jsx("h2",{className:"clinic-name-print",children:T||"Clinic Name"}),(O||P)&&r.jsxs("div",{className:"clinic-details-print",children:[O&&r.jsx("span",{className:"small-text clinic-address",children:O}),P&&r.jsx("span",{className:"small-text clinic-notes",children:P})]})]})})}),r.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",((ee=n.patientId)==null?void 0:ee.name)||"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",((we=n.patientId)==null?void 0:we.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Date"]})," ",new Date(n.date||n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("header",{className:"billing-header no-print",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(nn,{className:"w-4 h-4"})}),r.jsx("h1",{children:"Dental Bill"})]}),r.jsxs("div",{className:"billing-layout",children:[r.jsxs("main",{className:"order-content",children:[r.jsxs("section",{className:"order-details-card no-print",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Patient Information"})}),r.jsxs("div",{className:"patient-info-grid",children:[r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(vr,{size:16})," Patient Name"]})," ",((Ue=n.patientId)==null?void 0:Ue.name)||"N/A"," "]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(Ma,{size:16})," Token"]})," ",((Ge=n.patientId)==null?void 0:Ge.patient_token_number)??"N/A"]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(la,{size:16})," Record ID"]})," ",n.id.substring(n.id.length-6)]}),r.jsxs("div",{className:"info-item",children:[r.jsxs("strong",{children:[r.jsx(gi,{size:16})," Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),r.jsxs("section",{className:"medications-card",children:[r.jsx("div",{className:"card-header no-print",children:r.jsx("h2",{children:"Procedures"})}),a.length>0?r.jsxs("table",{className:"medications-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.No."}),r.jsx("th",{children:"PROCEDURE"}),r.jsx("th",{children:"PRICE"}),r.jsx("th",{children:"DIS %"}),r.jsx("th",{children:"AMT"})]})}),r.jsx("tbody",{children:a.map((Le,oe)=>{const _e=Le.price??0,$e=_e*(Le.discount_percentage??0)/100,ze=_e-$e;return r.jsxs("tr",{children:[r.jsx("td",{children:oe+1}),r.jsx("td",{children:Le.name}),r.jsx("td",{children:Le.price.toFixed(2)}),r.jsxs("td",{children:[r.jsx("input",{type:"number",value:Le.discount_percentage===0?"":Le.discount_percentage,onChange:Y=>Oe(oe,parseFloat(Y.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),r.jsx("td",{children:ze.toFixed(2)})]},oe)})})]}):r.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),r.jsxs("div",{className:"bill-summary-print print-only",children:[r.jsxs("div",{className:"bill-summary-details",children:[r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",children:[r.jsxs("span",{children:["Discount (",q.toFixed(2),"%)"]}),r.jsxs("span",{children:["- ",re.toFixed(2)]})]}),r.jsx("div",{className:"print-only-total",children:r.jsxs("strong",{children:["Grand Total: ",ve.toFixed(2)]})}),r.jsxs("div",{className:"payment-details-print",style:{marginTop:"10px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold",marginBottom:"4px"},children:[r.jsx("span",{children:"Payment Mode:"}),r.jsx("span",{children:F?"Split Payment":y==="cash"?"Cash":y==="upi"?"UPI":y==="card"?"Card":y==="no_cash_insurance"?"Insurance":"Credit (Debt)"})]}),F&&$.map((Le,oe)=>Le.amount>0&&r.jsxs("div",{className:"summary-row-print",style:{paddingLeft:"8px"},children:[r.jsx("span",{children:Le.method==="cash"?"Cash":Le.method==="upi"?"UPI":Le.method==="card"?"Card":Le.method==="no_cash_insurance"?"Insurance":"Credit"}),r.jsxs("span",{children:["",Le.amount.toFixed(2)]})]},oe))]}),G!==null&&(G>0||Q)&&r.jsxs("div",{className:"debt-details-print",style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #ccc",fontSize:"11px"},children:[(G??0)>0&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Previous Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",(G??0).toFixed(2)]})]}),Q&&r.jsxs("div",{className:"summary-row-print",children:[r.jsx("span",{children:"Added to Debt"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",ie.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row-print",style:{fontWeight:"bold"},children:[r.jsx("span",{children:"Total Outstanding"}),r.jsxs("span",{style:{color:"#e53e3e"},children:["",((G??0)+(Q?ie:0)).toFixed(2)]})]})]})]}),v&&r.jsxs("div",{className:`qr-code-container qr-code-printable-section ${y!=="upi"?"hide-on-screen":""}`,children:[r.jsx(ua,{value:v,size:80}),r.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),r.jsx("aside",{className:"billing-sidebar no-print",children:r.jsxs("div",{className:"billing-summary-card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{children:"Billing Summary"})}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",be.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Total Discount"}),r.jsxs("span",{children:["- ",re.toFixed(2)]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Discount Percentage"}),r.jsxs("div",{className:"discount-input-wrapper",children:[r.jsx("input",{type:"number",value:q===0?"":q,onChange:Le=>K(parseFloat(Le.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),r.jsxs("div",{className:"summary-row grand-total-row",children:[r.jsx("strong",{children:"Grand Total"}),r.jsxs("strong",{children:["",ve.toFixed(2)]})]}),r.jsx("div",{className:"qr-code-container",children:v?r.jsxs(r.Fragment,{children:[r.jsx(ua,{value:v,size:128}),r.jsx("p",{children:"Scan to pay using UPI"})]}):r.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),r.jsxs("div",{className:"payment-mode-section",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsx("label",{className:"info-item",children:r.jsx("strong",{children:"Payment Mode"})}),r.jsxs("button",{type:"button",onClick:()=>B(!F),disabled:f||n.status==="billed",style:{display:"flex",alignItems:"center",gap:"4px",padding:"5px 10px",fontSize:"0.8rem",border:F?"1px solid #4facfe":"1px solid #ccc",borderRadius:"6px",backgroundColor:F?"rgba(79, 172, 254, 0.1)":"transparent",color:F?"#4facfe":"#666",cursor:f||n.status==="billed"?"not-allowed":"pointer",fontWeight:500},children:[r.jsx(Mc,{size:14}),"Split"]})]}),F?r.jsxs("div",{className:"split-payment-wrapper",children:[r.jsxs("div",{className:"split-payment-header",children:[r.jsx("span",{className:"split-payment-title",children:" Split Payment"}),r.jsxs("span",{className:"split-payment-total",children:["Total: ",ve.toFixed(2)]})]}),r.jsx("div",{className:"split-payment-list",children:$.map((Le,oe)=>r.jsxs("div",{className:"split-payment-row",children:[r.jsx("span",{className:"split-payment-index",children:oe+1}),r.jsxs("select",{value:Le.method,onChange:_e=>te(Le.id,"method",_e.target.value),className:`split-payment-select ${Le.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" Insurance"}),r.jsx("option",{value:"credit",children:" Credit"})]}),r.jsxs("div",{className:"split-payment-amount-wrapper",children:[r.jsx("span",{className:"split-payment-currency",children:""}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:Le.amount||"",onChange:_e=>te(Le.id,"amount",parseFloat(_e.target.value)||0),className:`split-payment-input ${Le.method==="credit"?"is-credit":""}`,disabled:f||n.status==="billed"})]}),$.length>2&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>X(Le.id,ve),className:"split-payment-btn split-payment-btn-fill",title:"Fill remaining amount",children:"Fill"}),r.jsx("button",{type:"button",onClick:()=>H(Le.id),className:"split-payment-btn split-payment-btn-remove",title:"Remove",children:r.jsx(Wn,{size:12})})]})]},Le.id))}),$.length<5&&r.jsxs("button",{type:"button",onClick:V,className:"split-payment-add-btn",disabled:f||n.status==="billed",children:[r.jsx(ur,{size:14})," Add Payment Method"]}),r.jsxs("div",{className:"split-payment-summary",children:[r.jsxs("div",{className:"split-payment-summary-row",children:[r.jsx("span",{style:{color:"#666"},children:"Allocated:"}),r.jsxs("span",{style:{fontWeight:600},children:["",ce.toFixed(2)]})]}),r.jsxs("div",{className:`split-payment-status ${se?"balanced":"unbalanced"}`,children:[r.jsxs("span",{className:"split-payment-status-icon",children:[se?"":fe>0?"":"",se?"Balanced":fe>0?"Remaining":"Over"]}),r.jsxs("span",{className:"split-payment-status-amount",children:["",Math.abs(fe).toFixed(2)]})]}),!se&&r.jsxs("div",{className:"split-payment-warning",children:[" Split amounts must equal ",ve.toFixed(2)]})]})]}):r.jsxs("select",{value:y,onChange:Le=>x(Le.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[r.jsx("option",{value:"cash",children:" Cash"}),r.jsx("option",{value:"upi",children:" UPI"}),r.jsx("option",{value:"card",children:" Card"}),r.jsx("option",{value:"no_cash_insurance",children:" No Cash Insurance"}),r.jsx("option",{value:"credit",children:" Credit (Debt)"})]})]}),Q&&r.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[r.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),le?r.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Current Debt:"}),r.jsxs("strong",{style:{color:G&&G>0?"#dc3545":"#28a745"},children:["",(G||0).toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{children:"Credit Amount:"}),r.jsxs("strong",{children:["+ ",ie.toFixed(2)]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[r.jsx("span",{children:r.jsx("strong",{children:"New Total Debt:"})}),r.jsxs("strong",{style:{color:"#dc3545"},children:["",((G||0)+ie).toFixed(2)]})]})]})]}),r.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:n.status!=="billed"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Me,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),r.jsx("button",{onClick:Ie,className:"primary-button",disabled:f,children:f?"Processing...":"Finalise and Bill"})]}):r.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[r.jsx(Cl,{size:20})," Bill Generated"]})})]})})]}),r.jsx("footer",{className:"billing-footer print-only",children:r.jsx("p",{children:"Computer generated invoice."})})]})]}):r.jsx("div",{className:"error-message-box",children:"No record found."})},p6e=()=>{const t=Mt(),e=Vr(),[n,i]=b.useState(""),[a,s]=b.useState([]),[o,l]=b.useState(!1),[c,d]=b.useState(null),[f,p]=b.useState([]),[y,x]=b.useState([]),[v,S]=b.useState(!1),[N,_]=b.useState(!1),[T,C]=b.useState("idle"),[O,k]=b.useState(null),[P,I]=b.useState(""),F=b.useMemo(()=>ud(async be=>{if(be.trim().length<2){s([]),l(!1);return}l(!0);try{const re=new URLSearchParams({search:encodeURIComponent(be),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),ve=await ue(`/api/patients?${re.toString()}`);if(ve.ok){const ce=await ve.json();s(ce.patients||[])}}catch(re){console.error("Search failed",re)}finally{l(!1)}},300),[]),B=be=>{const re=be.target.value;i(re),re.length>=2?(l(!0),F(re)):(s([]),l(!1))},$=b.useCallback(async be=>{_(!0);try{const re=await ue(`/api/patient-files/${be}`);if(re.ok){const ve=await re.json();x(ve)}}catch(re){console.error("Failed to fetch files",re)}finally{_(!1)}},[]),L=be=>{d({id:be.id,name:be.name,age:be.age,gender:be.gender,phone:be.phone,token:be.token}),i(""),I(""),s([]),k(null),C("idle"),p([]),$(be.id)},V=()=>{d(null),p([]),x([]),C("idle")};Se.useEffect(()=>{if(e.state&&e.state.patient){const be=e.state.patient;L(be)}},[e.state]);const H=be=>{if(be.target.files){const re=Array.from(be.target.files);p(ve=>[...ve,...re]),C("idle")}},te=be=>{p(re=>re.filter((ve,ce)=>ce!==be))},X=async be=>{if(confirm("Are you sure you want to delete this file?"))try{(await ue(`/api/patient-files/${be}`,{method:"DELETE"})).ok?x(ve=>ve.filter(ce=>ce.id!==be)):alert("Failed to delete file.")}catch(re){console.error("Delete error",re),alert("Error deleting file.")}},q=be=>be.startsWith("image/")?r.jsx(jI,{size:20}):be==="application/pdf"?r.jsx(la,{size:20}):be.startsWith("video/")?r.jsx(fX,{size:20}):be.startsWith("audio/")?r.jsx(QX,{size:20}):r.jsx(eC,{size:20}),W=be=>{if(be===0)return"0 Bytes";const re=1024,ve=["Bytes","KB","MB","GB"],ce=Math.floor(Math.log(be)/Math.log(re));return parseFloat((be/Math.pow(re,ce)).toFixed(2))+" "+ve[ce]},ae=async()=>{if(!(!c||f.length===0)){S(!0),k(null),C("idle");try{const be=new FormData;f.forEach(ve=>{be.append("files",ve)});const re=await ue(`/api/patient-files/${c.id}`,{method:"POST",body:be});if(re.ok){C("success");const ve=await re.json();ve.files&&x(ce=>[...ve.files,...ce]),setTimeout(()=>{p([]),C("idle")},1500)}else throw new Error("Upload failed")}catch(be){console.error("Upload error",be),k("Failed to upload files. Please try again."),C("error")}finally{S(!1)}}},[G,z]=b.useState(null),[le,je]=b.useState(""),K=b.useRef(null),Oe=()=>{K.current&&(K.current.value="",K.current.click())},Ye=be=>{z(be.id),je(be.original_name)},Me=()=>{z(null),je("")},Ie=async be=>{if(le.trim())try{(await ue(`/api/patient-files/${be}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:le})})).ok?(x(ve=>ve.map(ce=>ce.id===be?{...ce,original_name:le}:ce)),z(null)):alert("Failed to rename file.")}catch(re){console.error("Rename error",re),alert("Error renaming file.")}};return r.jsxs("div",{className:"files-page-container",children:[r.jsx("div",{className:"files-page-header",children:r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(nn,{size:18})," Back"]}),r.jsx("h1",{className:"files-page-title",children:"Patient Files"})]})}),c?r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("div",{className:"selected-patient-header",children:[r.jsx("div",{className:"patient-avatar",children:c.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"selected-patient-info",children:[r.jsx("h2",{className:"selected-patient-name",children:c.name}),r.jsxs("div",{className:"selected-patient-details",children:[r.jsxs("span",{children:["Token: #",c.token||"NA"]}),c.gender&&r.jsxs("span",{children:[" ",c.gender]}),c.age&&r.jsxs("span",{children:[" ",c.age," yrs"]}),c.phone&&r.jsxs("span",{children:[" ",c.phone]})]}),r.jsx("input",{ref:K,type:"file",multiple:!0,onChange:H,style:{display:"none"}})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Oe,className:"primary-btn",style:{padding:"8px 16px"},children:[r.jsx(bE,{size:18}),r.jsx("span",{children:"Upload"})]}),r.jsx("button",{onClick:V,className:"secondary-btn change-patient-btn",children:"Change Patient"})]})]}),(y.length>0||N)&&r.jsxs("div",{className:"existing-files-section mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[r.jsx(eC,{className:"text-indigo-500",size:20}),"Uploaded Files (",y.length,")"]}),r.jsxs("div",{className:"relative",style:{width:"300px"},children:[r.jsx(Hn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),r.jsx("input",{type:"text",placeholder:"Search in Drive...",value:P,onChange:be=>I(be.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),N?r.jsx("div",{className:"flex justify-center p-8",children:r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx(Z,{width:300,height:20}),r.jsx(Z,{width:300,height:20}),r.jsx(Z,{width:300,height:20})]})}):r.jsxs("div",{className:"file-grid",children:[y.filter(be=>be.original_name.toLowerCase().includes(P.toLowerCase())).map(be=>{const re=be.mime_type.startsWith("image/");return r.jsxs("div",{className:"file-card-item fade-in",children:[r.jsxs("div",{className:"file-preview-container",children:[re?r.jsx("img",{src:be.url,alt:be.original_name,className:"file-thumbnail-img",loading:"lazy"}):r.jsx("div",{className:"file-thumbnail-icon",children:q(be.mime_type)}),r.jsxs("div",{className:"file-actions-overlay",children:[r.jsx("a",{href:be.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-icon-btn download",title:"Download",children:r.jsx(Fz,{size:18})}),r.jsx("button",{onClick:()=>Ye(be),className:"action-icon-btn rename",title:"Rename",children:r.jsx(oJ,{size:18})}),r.jsx("button",{onClick:()=>X(be.id),className:"action-icon-btn delete",title:"Delete",children:r.jsx(Wn,{size:18})})]})]}),r.jsx("div",{className:"file-card-meta",children:G===be.id?r.jsxs("div",{className:"rename-input-group compact",children:[r.jsx("input",{type:"text",value:le,onChange:ve=>je(ve.target.value),className:"rename-input",autoFocus:!0,onKeyDown:ve=>{ve.key==="Enter"&&Ie(be.id),ve.key==="Escape"&&Me()}}),r.jsxs("div",{className:"rename-actions",children:[r.jsx("button",{onClick:()=>Ie(be.id),className:"icon-btn text-green-600",children:r.jsx(Cl,{size:14})}),r.jsx("button",{onClick:Me,className:"icon-btn text-red-500",children:r.jsx(qt,{size:14})})]})]}):r.jsxs("div",{className:"file-name-row",children:[r.jsx("div",{className:"file-icon-small",children:re?r.jsx(jI,{size:16,className:"text-purple-500"}):q(be.mime_type)}),r.jsx("a",{href:be.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:be.original_name,children:be.original_name})]})})]},be.id)}),y.filter(be=>be.original_name.toLowerCase().includes(P.toLowerCase())).length===0&&P&&r.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(Hn,{size:48,className:"text-slate-200"}),r.jsxs("p",{children:['No files found matching "',P,'"']})]})})]})]}),(f.length>0||T==="success"||O)&&r.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:f.length>0?"Pending Uploads":"Upload Status"}),O&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[r.jsx(Xr,{size:20}),O]}),T==="success"&&r.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[r.jsx(Cl,{size:20}),"Files uploaded successfully!"]}),f.length>0&&r.jsx("div",{className:"file-list",children:f.map((be,re)=>r.jsxs("div",{className:"file-item fade-in",children:[r.jsx("div",{className:"file-icon",children:r.jsx(eC,{size:20})}),r.jsxs("div",{className:"file-info",children:[r.jsx("div",{className:"file-name",title:be.name,children:be.name}),r.jsx("div",{className:"file-size",children:W(be.size)})]}),r.jsx("button",{onClick:()=>te(re),className:"remove-file-btn",title:"Remove file",children:r.jsx(qt,{size:16})})]},re))}),f.length>0&&r.jsxs("div",{className:"action-buttons",children:[r.jsx("button",{onClick:()=>p([]),className:"secondary-btn",disabled:v,children:"Clear"}),r.jsx("button",{onClick:ae,className:"primary-btn",disabled:v,children:v?r.jsx(r.Fragment,{children:"Uploading..."}):r.jsxs(r.Fragment,{children:[r.jsx(bE,{size:18}),"Upload ",f.length," File",f.length!==1?"s":""]})})]})]})]}):r.jsxs("div",{className:"glass-card fade-in",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-slate-700",children:[r.jsx(Hn,{className:"text-indigo-500"}),"Search Patient"]}),r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx(Hn,{className:"search-icon-files",size:20}),r.jsx("input",{type:"text",placeholder:"Enter patient name, phone, or token...",value:n,onChange:B,className:"search-input",autoFocus:!0})]}),o?r.jsx("div",{className:"patient-results-list",children:[1,2,3].map(be=>r.jsxs("div",{className:"patient-result-item",style:{cursor:"default"},children:[r.jsx(Z,{width:150,height:20}),r.jsx(Z,{width:100,height:16})]},be))}):a.length>0&&r.jsx("ul",{className:"patient-results-list",children:a.map(be=>r.jsxs("li",{className:"patient-result-item",onClick:()=>L(be),children:[r.jsxs("div",{children:[r.jsx("div",{className:"patient-name-text",children:be.name}),r.jsxs("div",{className:"patient-meta",children:[r.jsxs("span",{children:["#",be.token||"N/A"]}),be.gender&&r.jsx("span",{children:be.gender}),be.age&&r.jsxs("span",{children:[be.age," yrs"]})]})]}),r.jsx("div",{className:"patient-phone",children:be.phone})]},be.id))}),n.length>=2&&!o&&a.length===0&&r.jsxs("div",{style:{textAlign:"center",padding:"30px",color:"#94a3b8"},children:['No patients found matching "',n,'"']})]})]})},wO=b.lazy(()=>OS(()=>import("./AddPatientPage-DWDpizgC.js"),__vite__mapDeps([2,3]))),RB=b.lazy(()=>OS(()=>import("./EditComplaintPage-Z9q76bN8.js"),__vite__mapDeps([0,1])));function m6e(){const[t,e]=b.useState(!1),[n,i]=b.useState(null),[a,s]=b.useState(!0),[o,l]=b.useState(null),[c,d]=b.useState(!1),f=O=>{i(O),e(!0),O.role==="admin"&&!O.has_seen_tutorial&&d(!0)},p=()=>{e(!1),i(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};b.useEffect(()=>{const O=localStorage.getItem("authToken"),k=localStorage.getItem("currentUser");if(O&&k)try{const P=JSON.parse(k);i(P),e(!0),P.role==="admin"&&!P.has_seen_tutorial&&d(!0)}catch(P){console.error("Error parsing stored user data:",P),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}s(!1)},[]);const{data:y}=KPe(t&&!!n);b.useEffect(()=>{y?l(y):t||l(null)},[y,t]);const[x,v]=b.useState(null),[S,N]=b.useState(!1);b.useEffect(()=>{const O=k=>{k.preventDefault(),v(k),N(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",O),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),N(!1)),()=>{window.removeEventListener("beforeinstallprompt",O)}},[]),b.useEffect(()=>{const O=window.matchMedia("(prefers-color-scheme: dark)"),k=()=>{O.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return k(),O.addEventListener("change",k),()=>{O.removeEventListener("change",k),document.body.classList.remove("dark-mode")}},[]);const _=b.useCallback(async()=>{if(!x){console.log("Install prompt event not available.");return}const O=x;O.prompt();const{outcome:k}=await O.userChoice;console.log(`User response to the install prompt: ${k}`),v(null),N(!1)},[x]),T=async()=>{if(n)try{(await ue(`/api/users/${n.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(i(k=>k?{...k,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...n,has_seen_tutorial:!0})),d(!1)):console.error("Failed to update tutorial status on backend.")}catch(O){console.error("Error marking tutorial as seen:",O)}};return a?r.jsx(Cm,{}):r.jsx(BW,{clientId:"277898779560-33obduhn8r758rini4qagetdrupvisri.apps.googleusercontent.com",children:r.jsx(vK,{children:r.jsx(yK,{children:r.jsx(xK,{children:r.jsxs(aK,{children:[r.jsx(gK,{children:r.jsxs(Sm,{children:[r.jsx(xt,{path:"/login",element:t?r.jsx(rn,{to:"/dashboard"}):r.jsx(jOe,{onLoginSuccess:f})}),r.jsx(xt,{path:"/register",element:t?r.jsx(rn,{to:"/dashboard"}):r.jsx(wOe,{})}),r.jsx(xt,{path:"/handle-complaint-url",element:t?r.jsx(KIe,{}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/live-api",element:t?r.jsx(zme,{}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/create-lab-order",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(KH,{currentUser:n})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/manage-admission",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(TM,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/lab/report/:orderId",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(kB,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/lab/enter-report/:orderId",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(kB,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/add-patient",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(b.Suspense,{fallback:r.jsx(Cm,{}),children:r.jsx(wO,{})})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/billing",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(YMe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-complaint/:recordId",element:t&&n?r.jsx(b.Suspense,{fallback:r.jsx(Cm,{}),children:r.jsx(RB,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-complaint/patient/:patientId",element:t&&n?r.jsx(b.Suspense,{fallback:r.jsx(Cm,{}),children:r.jsx(RB,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/edit-pharmacy-order/:orderId",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(gG,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/guide",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(a6e,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/*",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:g6e(n.role,n,ue)}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/lab/view-report/:orderId",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(iIe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/lab/search-report",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(aIe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/lab-reports",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(sIe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/pharmacy-orders",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(KMe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(yG,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory/add",element:t&&n?r.jsx(rn,{to:"/dashboard/purchase",replace:!0}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/dental",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(h6e,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/dental-billing/:id",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(f6e,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/inventory/edit/:id",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(iG,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/lab-inventory",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(AM,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/complaints",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(IMe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/admission-bill/:billId",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(AB,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/patient/:patientId/admission-billing",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(AB,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/start-subscription/:patientId",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(jIe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/start-clinic-subscription",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(_Ie,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/refill-reminders",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(YIe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/create-custom-bill",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(YH,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/pharmacy-billing/:orderId",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(DRe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/lab-billing/:orderId",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(MRe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/doctor-billing/:queueId",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(RRe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/custom-tables",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(m4e,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/custom-tables/:id",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(g4e,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(y4e,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/new",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(MB,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/:id",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(b4e,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboards/:id/edit",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(MB,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/analysis",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(p4e,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/clinic-hub",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(LRe,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"/dashboard/files",element:t&&n?r.jsx(kn,{user:n,onLogout:p,showInstallPrompt:S,onInstallClick:_,clinicProPlanStatus:o,children:r.jsx(p6e,{})}):r.jsx(rn,{to:"/login"})}),r.jsx(xt,{path:"*",element:r.jsx(rn,{to:t?"/dashboard":"/login"})})]})}),c&&(n==null?void 0:n.role)==="admin"&&r.jsx(GIe,{onClose:()=>d(!1),onMarkAsSeen:T}),t&&n&&r.jsx(y6e,{user:n}),t&&n&&r.jsx(EPe,{user:n})]})})})})})}const g6e=(t,e,n)=>{switch(t){case"superadmin":return r.jsxs(Sm,{children:[r.jsx(xt,{index:!0,element:r.jsx(qIe,{})}),r.jsx(xt,{path:"clinic-subscriptions",element:r.jsx(wIe,{})}),r.jsx(xt,{path:"clinic-subscriptions/add",element:r.jsx(SIe,{})}),r.jsx(xt,{path:"clinic-subscriptions/edit/:id",element:r.jsx(NIe,{})}),r.jsx(xt,{path:"users",element:r.jsx(CIe,{})})," ",r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return r.jsxs(Sm,{children:[r.jsx(xt,{index:!0,element:r.jsx(ZOe,{})}),r.jsx(xt,{path:"search-patient",element:r.jsx(mv,{})}),r.jsx(xt,{path:"patients",element:r.jsx(xO,{})}),r.jsx(xt,{path:"doctor",element:r.jsx(Vj,{})}),r.jsx(xt,{path:"staff",element:r.jsx(cIe,{fetchWithAuth:n})}),r.jsx(xt,{path:"staff/add",element:r.jsx(DMe,{clinicId:e==null?void 0:e.clinic_id})}),r.jsx(xt,{path:"staff/edit/:id",element:r.jsx(MMe,{})}),r.jsx(xt,{path:"roles",element:r.jsx(j4e,{})}),r.jsx(xt,{path:"patients/add",element:r.jsx(b.Suspense,{fallback:r.jsx(Cm,{}),children:r.jsx(wO,{})})}),r.jsx(xt,{path:"inventory",element:r.jsx(rG,{})}),r.jsx(xt,{path:"inventory/edit/:id",element:r.jsx(iG,{})}),r.jsx(xt,{path:"distributors",element:r.jsx(EB,{})}),r.jsx(xt,{path:"patient-debts",element:r.jsx(DB,{})})," ",r.jsx(xt,{path:"purchase",element:r.jsx(PB,{})})," ",r.jsx(xt,{path:"queue",element:r.jsx(Vj,{})}),r.jsx(xt,{path:"subscriptions",element:r.jsx(xIe,{})}),r.jsx(xt,{path:"subscriptions/add",element:r.jsx(vIe,{})}),r.jsx(xt,{path:"subscriptions/edit/:id",element:r.jsx(bIe,{})}),r.jsx(xt,{path:"manage-admission",element:r.jsx(TM,{})}),r.jsx(xt,{path:"reception",element:r.jsx(mB,{currentUser:e})}),r.jsx(xt,{path:"lab",element:r.jsx(NB,{})}),r.jsx(xt,{path:"pharmacy-queue",element:r.jsx(_B,{})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return r.jsxs(Sm,{children:[r.jsx(xt,{index:!0,element:r.jsx(rn,{to:"search-patient",replace:!0})}),r.jsx(xt,{path:"search-patient",element:r.jsx(mv,{})}),r.jsx(xt,{path:"queue",element:r.jsx(Vj,{})}),r.jsx(xt,{path:":patientId",element:r.jsx(Vj,{})}),r.jsx(xt,{path:"add-patient",element:r.jsx(b.Suspense,{fallback:r.jsx(Cm,{}),children:r.jsx(wO,{})})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return r.jsxs(Sm,{children:[r.jsx(xt,{index:!0,element:r.jsx(mB,{currentUser:e})}),r.jsx(xt,{path:"all-patients",element:r.jsx(xO,{})}),r.jsx(xt,{path:"search-patient",element:r.jsx(mv,{})}),r.jsx(xt,{path:"*",element:r.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return r.jsx(NB,{});case"pharmacy":return r.jsxs(Sm,{children:[r.jsx(xt,{index:!0,element:r.jsx(_B,{})}),r.jsx(xt,{path:"inventory",element:r.jsx(yG,{})}),r.jsx(xt,{path:"settings",element:r.jsx(OMe,{})}),r.jsx(xt,{path:"add-order",element:r.jsx(QMe,{})}),r.jsx(xt,{path:"edit-pharmacy-order/:orderId",element:r.jsx(gG,{})}),r.jsx(xt,{path:"orders/:orderId",element:r.jsx(dIe,{})}),r.jsx(xt,{path:"search-patient-records",element:r.jsx(mv,{})}),r.jsx(xt,{path:"distributors",element:r.jsx(EB,{})}),r.jsx(xt,{path:"patient-debts",element:r.jsx(DB,{})})," ",r.jsx(xt,{path:"purchase",element:r.jsx(PB,{})})," ",r.jsx(xt,{path:"*",element:r.jsx(rn,{to:"/dashboard",replace:!0})})]});default:return r.jsxs("div",{children:["Unknown role (",t,") or dashboard not implemented."]},t)}},kn=({user:t,onLogout:e,children:n,showInstallPrompt:i,onInstallClick:a,clinicProPlanStatus:s})=>{const o=Mt(),[l,c]=b.useState(!1),[d,f]=b.useState(window.innerWidth<=768),[p,y]=b.useState(null),[x,v]=b.useState(!1);b.useEffect(()=>BE.subscribe(T=>{v(T)}),[]),b.useEffect(()=>{const T=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),b.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const C=await ue("/api/clinics/settings");if(C.ok){const O=await C.json();y(O.logoUrl)}else console.error("Failed to fetch clinic details for display:",C.statusText),y(null)}catch(C){console.error("Error fetching clinic details for display:",C),y(null)}else y(null)})()},[t==null?void 0:t.clinic_id]);const S=()=>{c(!l)},{toggleCommandBar:N,isOpen:_}=Pc();return r.jsxs("div",{className:"dashboard-layout",children:[" ",r.jsxs("nav",{className:"app-header no-print",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),o("/dashboard")},className:"logo-container",children:r.jsx("img",{src:p||"/logo.png",alt:"App Logo",className:"logo-image"})}),r.jsxs("div",{className:"title-section",children:[r.jsx("span",{className:"app-title-link",children:"Newtons Ai"}),r.jsxs("span",{className:"user-role-panel",children:["(",t.role.charAt(0).toUpperCase()+t.role.slice(1)," Panel)"]})]})]}),r.jsxs("div",{className:"header-right",children:[i&&r.jsxs("button",{onClick:a,className:"install-button",title:"Install App",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{children:"Install"})]}),r.jsxs("a",{href:"https://store.newtons.in",target:"_blank",rel:"noopener noreferrer",className:"shop-button",title:"Visit Store",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),r.jsx("span",{children:"Shop"})]}),!d&&r.jsxs("button",{onClick:()=>o("/dashboard/guide"),className:"guide-button",title:"User Guide",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),r.jsx("span",{children:"Guide"})]}),s&&(s.hasProPlan?r.jsx("span",{className:"pro-badge",children:"PRO"}):r.jsx("button",{onClick:()=>o("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),!_&&r.jsx("button",{onClick:N,className:"command-bar-button",title:"Search & Commands (Ctrl+K)",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("path",{d:"m21 21-4.3-4.3"})]})}),r.jsx("button",{className:"hamburger-icon",onClick:S,"aria-label":"Open navigation",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),x&&r.jsx("div",{className:"global-loading-bar"})]}),r.jsxs("main",{className:"main-content",children:[r.jsx(COe,{}),n]}),d?r.jsx(NOe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:S,roleNavigation:qH}):r.jsx(SOe,{user:t,onLogout:e,userRole:t.role,isOpen:l,onClose:S}),!d&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:S}),!d&&l&&r.jsx("div",{className:"side-panel-overlay",onClick:S})]})},y6e=({user:t})=>{const{isOpen:e,closeAssistant:n}=IS(),i=Mt(),[a,s]=b.useState(null),[o,l]=b.useState([]);return b.useEffect(()=>{(async()=>{if(t!=null&&t.clinic_id)try{const[d,f]=await Promise.all([ue("/api/clinics/settings"),ue("/api/staff")]);d.ok&&s(await d.json()),f.ok&&l(await f.json())}catch(d){console.error("Failed to fetch initial AI context",d)}})()},[t.clinic_id]),e?r.jsx("div",{className:"ai-assistant-wrapper",children:r.jsx(UH,{onClose:n,settings:a,staffList:o,onSettingsUpdate:()=>{},onStaffUpdate:()=>{},onHighlight:c=>{c.forEach(d=>{if(d.startsWith("navigate_")){const f=d.replace("navigate_","");i(`/dashboard/analysis?section=${f}`)}else{const f=document.getElementById(d);f&&(f.scrollIntoView({behavior:"smooth",block:"center"}),f.classList.add("ai-highlight-glow"),setTimeout(()=>f.classList.remove("ai-highlight-glow"),2e3))}})}})}):null};JG.createRoot(document.getElementById("root")).render(r.jsx(b.StrictMode,{children:r.jsx(SW,{client:RW,children:r.jsx(m6e,{})})}));export{nn as A,Lz as B,Tb as C,mf as D,Dm as E,eo as F,mU as G,Ma as H,qu as I,Hn as J,bI as K,eN as L,vf as M,xG as N,od as O,oJ as P,ua as Q,Se as R,Z as S,Wn as T,FS as U,zO as V,RS as W,qt as X,gI as Y,WIe as Z,Gc as a,Wz as b,ct as c,Av as d,Js as e,ue as f,Bn as g,gU as h,QIe as i,r as j,gi as k,ur as l,vr as m,mK as n,bf as o,PS as p,Ut as q,b as r,Pc as s,Oi as t,Mt as u,as as v,Vr as w,la as x,Ol as y,UQ as z};

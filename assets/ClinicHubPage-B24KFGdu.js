import{f as p,j as e,S as t}from"./index-DCOSVs-d.js";import{u as R,r as n}from"./react-vendor-Cc0P4_ZX.js";import z from"./ClinicAiAssistant-Idw4jpxA.js";import{e as T,f as D,U as E,i as M,m as B,I as W,a9 as O,a4 as H,a2 as $,ai as G,F as K,s as J,a6 as V,aC as Y}from"./ui-vendor-SmiJk_kJ.js";import"./utils-vendor-azd6ta8e.js";import"./ai-vendor-CB5T-uN5.js";import"./chart-vendor-BcjzKorn.js";const te=()=>{const j=R(),[w,v]=n.useState(!0),[d,_]=n.useState([]),[h,S]=n.useState(""),[k,f]=n.useState(!0),[N,y]=n.useState(!1),[i,m]=n.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",name:"",logoUrl:"",labLetterheadUrl:"",upi_id:"",address:"",notes:"",voice_ai_language:"en-US"}),[g,b]=n.useState(null),[I,L]=n.useState(!1),c=(s,a)=>{b({type:s,message:a}),setTimeout(()=>b(null),3e3)},U=s=>{switch(s){case"doctor":return e.jsx(Y,{size:14,className:"text-blue-600"});case"receptionist":return e.jsx(V,{size:14,className:"text-green-600"});case"pharmacy":return e.jsx(J,{size:14,className:"text-purple-600"});case"lab":return e.jsx(K,{size:14,className:"text-yellow-600"});default:return e.jsx(G,{size:14,className:"text-gray-500"})}},P=s=>{switch(s){case"doctor":return"avatar-blue";case"receptionist":return"avatar-green";case"pharmacy":return"avatar-purple";case"lab":return"avatar-yellow";default:return"avatar-gray"}},u=n.useCallback(async()=>{v(!0);try{const s=await p("/staff");if(s.ok){const a=await s.json();_(a.map(r=>({...r,id:r._id||r.id})))}}catch(s){console.error("Error fetching staff:",s),c("error","Failed to load staff list")}finally{v(!1)}},[]),x=n.useCallback(async()=>{f(!0);try{const s=await p("/api/clinics/settings");if(s.ok){const a=await s.json();m({admissionCharge:parseFloat(a.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(a.perDayCharge||0).toFixed(2),otherCharges:parseFloat(a.otherCharges||0).toFixed(2),aiMemory:a.aiMemory||"",clinicWideSystemPrompt:a.clinicWideSystemPrompt||"",gemini_api_key:a.gemini_api_key||"",low_stock_threshold:a.low_stock_threshold!==void 0&&a.low_stock_threshold!==null?String(a.low_stock_threshold):"10",name:a.name||"",logoUrl:a.logoUrl||"",labLetterheadUrl:a.labLetterheadUrl||"",upi_id:a.upi_id||"",address:a.address||"",notes:a.notes||"",clinic_id:a.clinic_id,voice_ai_language:a.voice_ai_language||"en-US"})}}catch(s){console.error("Error fetching settings:",s),c("error","Failed to load settings")}finally{f(!1)}},[]);n.useEffect(()=>{u(),x()},[u,x]);const l=s=>{const{name:a,value:r}=s.target;m(o=>({...o,[a]:r}))},A=async()=>{y(!0);try{const s=parseFloat(i.admissionCharge),a=parseFloat(i.perDayCharge),r=parseFloat(i.otherCharges),o=parseInt(i.low_stock_threshold);if((await p("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:i.name,admissionCharge:s,perDayCharge:a,otherCharges:r,aiMemory:i.aiMemory,clinicWideSystemPrompt:i.clinicWideSystemPrompt,gemini_api_key:i.gemini_api_key,low_stock_threshold:o,logoUrl:i.logoUrl,labLetterheadUrl:i.labLetterheadUrl,upi_id:i.upi_id,address:i.address,notes:i.notes,voice_ai_language:i.voice_ai_language})})).ok)c("success","Changes saved successfully");else throw new Error("Failed to save")}catch(s){console.error("Error saving settings:",s),c("error","Failed to save settings")}finally{y(!1)}},C=d.filter(s=>s.name.toLowerCase().includes(h.toLowerCase())||s.role.toLowerCase().includes(h.toLowerCase())),F=async s=>{for(const a of s){const r=document.getElementById(a);r&&(r.scrollIntoView({behavior:"smooth",block:"center"}),r.classList.add("ai-feedback-glow"),await new Promise(o=>setTimeout(o,1500)),r.classList.remove("ai-feedback-glow"))}};return e.jsxs("div",{className:"clinic-hub-container",children:[e.jsxs("header",{className:"clinic-hub-header",children:[e.jsxs("div",{className:"clinic-hub-title",children:[e.jsx("h1",{children:"Clinic Hub"}),e.jsx("p",{className:"clinic-hub-subtitle",children:"Manage your ecosystem"})]}),e.jsxs("div",{className:"clinic-hub-actions",children:[g&&e.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium ${g.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.message}),e.jsxs("button",{className:"btn-add-staff",onClick:()=>j("/dashboard/staff/add"),children:[e.jsx(T,{size:16})," Add Staff"]}),e.jsxs("button",{className:"btn-save-changes",onClick:A,disabled:N,children:[e.jsx(D,{size:16})," ",N?"Saving...":"Save Changes"]})]})]}),e.jsxs("main",{className:"clinic-hub-content",children:[e.jsxs("div",{className:"team-directory-panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsx(E,{size:18,className:"text-gray-500"}),e.jsxs("span",{className:"panel-title",children:["Team Directory (",d.length,")"]})]}),e.jsx("div",{className:"search-container",children:e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx(M,{size:16,className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Find member...",className:"search-input",value:h,onChange:s=>S(s.target.value)})]})}),e.jsx("div",{className:"team-list",children:w?e.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4].map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t,{variant:"circular",width:40,height:40}),e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{width:120,height:16,className:"mb-1"}),e.jsx(t,{width:80,height:12})]})]},s))}):C.length===0?e.jsx("div",{className:"empty-state",children:"No staff found."}):C.map(s=>e.jsxs("div",{id:`staff-member-${s.id}`,className:"team-member-item",children:[e.jsx("div",{className:`member-avatar ${P(s.role)}`,children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"member-info",children:[e.jsx("div",{className:"member-name",children:s.name}),e.jsxs("div",{className:"member-role",children:[U(s.role),s.role]})]}),e.jsx("span",{className:`member-status ${s.active?"status-active":"status-inactive"}`,children:s.active?"Active":"Inactive"}),e.jsx("button",{className:"btn-edit-member",onClick:()=>j(`/dashboard/staff/edit/${s.id}`),children:e.jsx(B,{size:16})})]},s.id))})]}),e.jsxs("div",{className:"config-console-panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsx(W,{size:18,className:"text-gray-500"}),e.jsx("span",{className:"panel-title",children:"Configuration Console"})]}),k?e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"config-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(t,{variant:"circular",width:24,height:24}),e.jsx(t,{width:200,height:20})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx(t,{width:120,height:14,style:{marginBottom:"8px"}}),e.jsx(t,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx(t,{width:120,height:14,style:{marginBottom:"8px"}}),e.jsx(t,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx(t,{width:120,height:14,style:{marginBottom:"8px"}}),e.jsx(t,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx(t,{width:120,height:14,style:{marginBottom:"8px"}}),e.jsx(t,{width:"100%",height:80,style:{borderRadius:"8px"}})]})]})]}),e.jsxs("div",{className:"config-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(t,{variant:"circular",width:24,height:24}),e.jsx(t,{width:200,height:20})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx(t,{width:120,height:14,style:{marginBottom:"8px"}}),e.jsx(t,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx(t,{width:120,height:14,style:{marginBottom:"8px"}}),e.jsx(t,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx(t,{width:120,height:14,style:{marginBottom:"8px"}}),e.jsx(t,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx(t,{width:120,height:14,style:{marginBottom:"8px"}}),e.jsx(t,{width:"100%",height:40,style:{borderRadius:"8px"}})]})]})]})]}):e.jsxs("div",{className:"config-content",children:[e.jsxs("div",{className:"config-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(O,{size:16})," CLINIC IDENTITY & LOCATION"]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Clinic Name"}),e.jsx("input",{type:"text",className:"form-input",name:"name",id:"setting-name",value:i.name,onChange:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Logo URL"}),e.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"logoUrl",id:"setting-logoUrl",value:i.logoUrl,onChange:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Lab Letterhead URL"}),e.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"labLetterheadUrl",id:"setting-labLetterheadUrl",value:i.labLetterheadUrl,onChange:l})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Full physical address",name:"address",id:"setting-address",value:i.address,onChange:l})]})]})]}),e.jsxs("div",{className:"config-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(H,{size:16})," FINANCIAL OPERATIONS"]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Admission Charge (₹)"}),e.jsx("input",{type:"number",className:"form-input",name:"admissionCharge",id:"setting-admissionCharge",value:i.admissionCharge,onChange:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Per Day Charge (₹)"}),e.jsx("input",{type:"number",className:"form-input",name:"perDayCharge",id:"setting-perDayCharge",value:i.perDayCharge,onChange:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Other Charges (₹)"}),e.jsx("input",{type:"number",className:"form-input",name:"otherCharges",id:"setting-otherCharges",value:i.otherCharges,onChange:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"UPI ID"}),e.jsx("input",{type:"text",className:"form-input",name:"upi_id",id:"setting-upi_id",value:i.upi_id,onChange:l})]})]})]}),e.jsxs("div",{className:"config-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx($,{size:16})," INVENTORY & AI"]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Low Stock Threshold"}),e.jsx("input",{type:"number",className:"form-input",name:"low_stock_threshold",id:"setting-low_stock_threshold",value:i.low_stock_threshold,onChange:l})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Voice AI Language"}),e.jsxs("select",{className:"form-input",name:"voice_ai_language",id:"setting-voice_ai_language",value:i.voice_ai_language,onChange:s=>m(a=>({...a,voice_ai_language:s.target.value})),children:[e.jsx("option",{value:"en-US",children:"English"}),e.jsx("option",{value:"hi-IN",children:"Hindi"}),e.jsx("option",{value:"te-IN",children:"Telugu"}),e.jsx("option",{value:"bn-IN",children:"Bengali"}),e.jsx("option",{value:"mr-IN",children:"Marathi"}),e.jsx("option",{value:"ta-IN",children:"Tamil"}),e.jsx("option",{value:"gu-IN",children:"Gujarati"}),e.jsx("option",{value:"kn-IN",children:"Kannada"}),e.jsx("option",{value:"ml-IN",children:"Malayalam"}),e.jsx("option",{value:"pa-IN",children:"Punjabi"}),e.jsx("option",{value:"es-ES",children:"Spanish"}),e.jsx("option",{value:"fr-FR",children:"French"}),e.jsx("option",{value:"de-DE",children:"German"}),e.jsx("option",{value:"it-IT",children:"Italian"}),e.jsx("option",{value:"pt-PT",children:"Portuguese"}),e.jsx("option",{value:"ru-RU",children:"Russian"}),e.jsx("option",{value:"ja-JP",children:"Japanese"}),e.jsx("option",{value:"ko-KR",children:"Korean"}),e.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),e.jsx("option",{value:"ar-SA",children:"Arabic"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Gemini API Key"}),e.jsx("input",{type:"password",className:"form-input",name:"gemini_api_key",id:"setting-gemini_api_key",value:i.gemini_api_key,onChange:l,placeholder:"******************"})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{className:"form-label",children:"Clinic-Wide System Prompt"}),e.jsx("textarea",{className:"form-textarea",name:"clinicWideSystemPrompt",id:"setting-clinicWideSystemPrompt",value:i.clinicWideSystemPrompt,onChange:l,placeholder:"Instructions for the AI..."})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{className:"form-label",children:"AI Memory (Context)"}),e.jsx("textarea",{className:"form-textarea",name:"aiMemory",id:"setting-aiMemory",value:i.aiMemory,onChange:l,placeholder:"Shared context for the AI..."})]})]})]})]})]})]}),I&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:e.jsx("div",{className:"w-96 bg-white h-full shadow-2xl animate-slide-in-right",children:e.jsx(z,{onClose:()=>L(!1),settings:i,staffList:d,onSettingsUpdate:x,onStaffUpdate:u,onHighlight:F})})})]})};export{te as default};

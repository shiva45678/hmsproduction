import{j as e}from"./index-B0SGsixC.js";import{b as T}from"./react-vendor-Cc0P4_ZX.js";import{ae as Z,ar as B}from"./ui-vendor-CZgqa0n4.js";const E=s=>[1,2,3,14,15,16,17,18,19,30,31,32].includes(s)?{type:"molar",roots:2}:[4,5,12,13,20,21,28,29].includes(s)?{type:"premolar",roots:1}:[6,11,22,27].includes(s)?{type:"canine",roots:1}:s>=1&&s<=32?{type:"incisor",roots:1}:[41,42,49,50,51,52,59,60].includes(s)?{type:"molar",roots:2}:[43,48,53,58].includes(s)?{type:"canine",roots:1}:[44,45,46,47,54,55,56,57].includes(s)?{type:"incisor",roots:1}:{type:"incisor",roots:1},f=({toothNumber:s,conditions:l=[],className:m,style:Q,isSelected:v,bridgeConnectPrevious:y})=>{const{type:j}=E(s),r=s<=16||s>=41&&s<=50,u="M5,20 Q5,5 18,5 Q31,5 31,20 L29,25 Q18,28 7,25 Z",w="M7,25 Q5,40 10,44 Q14,40 14,26",L="M29,25 Q31,40 26,44 Q22,40 22,26",C="M8,20 Q8,8 18,8 Q28,8 28,20 L26,24 Q18,27 10,24 Z",k="M10,24 Q16,44 18,45 Q20,44 26,24",R="M8,22 Q18,2 28,22 L26,25 Q18,28 10,25 Z",M="M10,25 Q18,48 26,25",N="M10,22 L10,12 Q18,12 26,12 L26,22 L24,25 Q18,27 12,25 Z",d="M12,25 Q18,46 24,25";let i=u,n=[w,L];j==="incisor"?(i=N,n=[d]):j==="canine"?(i=R,n=[M]):j==="premolar"&&(i=C,n=[k]);const c=l.includes("condition-rct"),t=l.includes("condition-filling"),o=l.includes("condition-crown"),p=l.includes("condition-bridge"),h=l.includes("condition-extraction"),x=l.includes("condition-implant"),a=c?"#e9d5ff":"#f3f4f6",S=h?"#fee2e2":"#ffffff",g=h?"#ef4444":p?"#0891b2":x?"#475569":o?"#b45309":v?"#3b82f6":"#6b7280",P=v||p||o||x?2:1.5,G=r?"M20,15 L56,15 L56,22 L20,22 Z":"M16,15 L-20,15 L-20,22 L16,22 Z";return e.jsxs("svg",{viewBox:"0 0 36 50",className:m,style:{width:"100%",height:"100%",overflow:"visible",...Q},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"goldGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),e.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),e.jsxs("linearGradient",{id:"bridgeGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),e.jsx("stop",{offset:"100%",stopColor:"#0891b2"})]}),e.jsxs("linearGradient",{id:"titaniumGradient",x1:"0",x2:"1",y1:"0",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#475569"}),e.jsx("stop",{offset:"30%",stopColor:"#94a3b8"}),e.jsx("stop",{offset:"50%",stopColor:"#f8fafc"}),e.jsx("stop",{offset:"70%",stopColor:"#94a3b8"}),e.jsx("stop",{offset:"100%",stopColor:"#475569"})]})]}),y&&e.jsx("path",{d:G,fill:"url(#bridgeGradient)",stroke:"#0891b2",strokeWidth:"1.5"}),x?e.jsxs("g",{children:[e.jsx("path",{d:"M13,25 L23,25 L22,28 L23,29 L22,30 L22,33 L23,34 L22,35 L22,38 L23,39 L22,40 L19,46 Q18,48 17,46 L14,40 L13,39 L14,38 L14,35 L13,34 L14,33 L14,30 L13,29 L14,28 Z",fill:"url(#titaniumGradient)",stroke:g,strokeWidth:"1"}),e.jsxs("g",{stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",children:[e.jsx("line",{x1:"14",y1:"29",x2:"22",y2:"29"}),e.jsx("line",{x1:"14",y1:"34",x2:"22",y2:"34"}),e.jsx("line",{x1:"14",y1:"39",x2:"22",y2:"39"})]}),e.jsx("rect",{x:"15",y:"22",width:"6",height:"4",fill:"#64748b",stroke:g,strokeWidth:"1",rx:"1"})]}):e.jsx("g",{fill:a,stroke:g,strokeWidth:P,strokeLinejoin:"round",children:n.map((W,I)=>e.jsx("path",{d:W},I))}),c&&!x&&e.jsx("g",{fill:"none",stroke:"#9333ea",strokeWidth:"2.5",strokeLinecap:"round",children:j==="molar"?e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M12,28 L11,42"}),e.jsx("path",{d:"M24,28 L25,42"})]}):e.jsx("path",{d:"M18,25 L18,44"})}),e.jsx("path",{d:i,fill:p?"url(#bridgeGradient)":o?"url(#goldGradient)":S,stroke:g,strokeWidth:P,strokeLinejoin:"round"}),t&&!o&&!p&&!x&&e.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"1"}),h&&e.jsxs("g",{stroke:"#ef4444",strokeWidth:"3",strokeLinecap:"round",children:[e.jsx("line",{x1:"8",y1:"8",x2:"28",y2:"42"}),e.jsx("line",{x1:"28",y1:"8",x2:"8",y2:"42"})]})]})},b=(s,l="universal")=>l==="universal"?s<=32?s.toString():s>=41&&s<=50?String.fromCharCode(65+(s-41)):s>=51&&s<=60?String.fromCharCode(75+(s-51)):s.toString():l==="fdi"?s>=1&&s<=8?(18-(s-1)).toString():s>=9&&s<=16?(21+(s-9)).toString():s>=17&&s<=24?(38-(s-17)).toString():s>=25&&s<=32?(41+(s-25)).toString():s>=41&&s<=45?(55-(s-41)).toString():s>=46&&s<=50?(61+(s-46)).toString():s>=51&&s<=55?(75-(s-51)).toString():s>=56&&s<=60?(81+(s-56)).toString():s.toString():s.toString(),A=({selectedTeeth:s,toothConditions:l={},toothDetails:m={},onToothClick:Q,onEditPastRecord:v,onPrint:y,numberingSystem:j="universal"})=>{const[r,u]=T.useState("permanent"),w=Array.from({length:16},(i,n)=>n+1),L=Array.from({length:16},(i,n)=>32-n),C=Array.from({length:10},(i,n)=>41+n),k=Array.from({length:10},(i,n)=>60-n),[R,M]=T.useState(null),N=i=>{const n=l[i]||[],c=s.includes(i);let t=[],o="#9ca3af",p;const h=n.includes("condition-extraction");return c&&(o="#3b82f6"),n.includes("condition-filling")&&t.push("#60a5fa"),n.includes("condition-rct")&&t.push("#c084fc"),n.includes("condition-crown")&&(t.push("#fcd34d"),o="#d97706"),n.includes("condition-bridge")&&(t.push("#22d3ee"),o="#0891b2"),n.includes("condition-implant")&&(t.push("#94a3b8"),o="#475569"),n.includes("condition-extraction")&&(t.push("#fee2e2"),o="#ef4444"),t.length===0&&c&&t.push("#eff6ff"),t.length===0&&t.push("#ffffff"),{fillColors:t,borderColor:o,overlayColor:p,isSelected:c,hasExtraction:h}},d=i=>{const{isSelected:n}=N(i),c=l[i]||[],t=m[i],o=i<=16||i>=41&&i<=50,p=c.includes("condition-bridge");let h=!1;if(p){let a=null;o?(i>1&&i<=16&&(a=i-1),i>41&&i<=50&&(a=i-1)):(i<32&&i>=17&&(a=i+1),i<60&&i>=51&&(a=i+1)),a!==null&&(l[a]||[]).includes("condition-bridge")&&(h=!0)}const x=b(i,j);return e.jsxs("div",{onClick:()=>Q(i),onMouseEnter:()=>M(i),onMouseLeave:()=>M(null),className:`tooth-item-container ${n?"selected":""}`,title:"",children:[e.jsx("div",{className:"tooth-number-label",children:x}),e.jsx("div",{className:"tooth-svg-wrapper",style:{transform:o?"rotate(180deg)":"none"},children:e.jsx(f,{toothNumber:i,conditions:c,isSelected:n,bridgeConnectPrevious:h})}),R===i&&t&&t.length>0&&e.jsxs("div",{className:"tooth-tooltip-window",children:[e.jsxs("div",{className:"tooltip-header",children:["Tooth ",x]}),e.jsx("ul",{className:"tooltip-list",children:t.map((a,S)=>e.jsxs("li",{className:"tooltip-detail-item",children:[e.jsxs("span",{className:"detail-text",children:[a.name," ",e.jsxs("small",{children:["(",a.date,")"]})]}),a.isPast&&v&&e.jsx("button",{className:"tooltip-edit-btn",onClick:g=>{g.stopPropagation(),v(a.recordId)},title:"Edit this record",children:e.jsx(B,{size:12})})]},S))})]})]},i)};return e.jsxs("div",{className:"chart-container-inner",style:{position:"relative"},children:[e.jsxs("div",{className:"chart-header-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsxs("div",{className:"view-toggle-container",style:{display:"flex",gap:4,background:"#f3f4f6",padding:4,borderRadius:8},children:[e.jsx("button",{className:`view-toggle-btn ${r==="permanent"?"active":""}`,onClick:()=>u("permanent"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:r==="permanent"?"#fff":"transparent",boxShadow:r==="permanent"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:r==="permanent"?"#111827":"#6b7280"},children:"Permanent"}),e.jsx("button",{className:`view-toggle-btn ${r==="primary"?"active":""}`,onClick:()=>u("primary"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:r==="primary"?"#fff":"transparent",boxShadow:r==="primary"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:r==="primary"?"#111827":"#6b7280"},children:"Primary"})]}),y&&e.jsxs("button",{onClick:i=>{i.stopPropagation(),y()},className:"chart-print-btn no-print",title:"Print Report",children:[e.jsx(Z,{size:16}),e.jsx("span",{children:"Print Report"})]})]}),e.jsx("div",{className:"arch-label",children:"Maxillary (Upper)"}),e.jsxs("div",{className:"arch-row",children:[e.jsx("div",{className:"quadrant",children:r==="permanent"?w.slice(0,8).map(i=>d(i)):C.slice(0,5).map(i=>d(i))}),e.jsx("div",{className:"quadrant",children:r==="permanent"?w.slice(8).map(i=>d(i)):C.slice(5).map(i=>d(i))})]}),e.jsxs("div",{className:"midline-divider",children:[e.jsx("div",{className:"divider-line"}),e.jsx("span",{className:"chart-label",children:"Midline"}),e.jsx("div",{className:"divider-line"})]}),e.jsxs("div",{className:"arch-row",children:[e.jsx("div",{className:"quadrant",children:r==="permanent"?L.slice(0,8).map(i=>d(i)):k.slice(0,5).map(i=>d(i))}),e.jsx("div",{className:"quadrant",children:r==="permanent"?L.slice(8).map(i=>d(i)):k.slice(5).map(i=>d(i))})]}),e.jsx("div",{className:"arch-label",children:"Mandibular (Lower)"}),e.jsxs("div",{className:"chart-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-preview-mini",children:e.jsx(f,{toothNumber:1,conditions:[],style:{width:16,height:22}})}),e.jsx("span",{children:"Healthy"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-preview-mini",children:e.jsx(f,{toothNumber:1,conditions:["condition-filling"],style:{width:16,height:22}})}),e.jsx("span",{children:"Filling (Dot)"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-preview-mini",children:e.jsx(f,{toothNumber:1,conditions:["condition-rct"],style:{width:16,height:22}})}),e.jsx("span",{children:"RCT (Root Lines)"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-preview-mini",children:e.jsx(f,{toothNumber:1,conditions:["condition-crown"],style:{width:16,height:22}})}),e.jsx("span",{children:"Crown"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-preview-mini",children:e.jsx(f,{toothNumber:1,conditions:["condition-bridge"],style:{width:16,height:22}})}),e.jsx("span",{children:"Bridge"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-preview-mini",children:e.jsx(f,{toothNumber:1,conditions:["condition-implant"],style:{width:16,height:22}})}),e.jsx("span",{children:"Implant"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-preview-mini",children:e.jsx(f,{toothNumber:1,conditions:["condition-extraction"],style:{width:16,height:22}})}),e.jsx("span",{children:"Extraction (X)"})]})]}),e.jsxs("div",{className:"print-only-details-summary print-only",children:[e.jsx("h3",{children:"Tooth Procedure Details"}),Object.keys(m).length===0?e.jsx("p",{className:"no-details",children:"No specific tooth procedures recorded."}):e.jsxs("table",{className:"print-details-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Tooth"}),e.jsx("th",{children:"Procedure"}),e.jsx("th",{children:"Date"})]})}),e.jsx("tbody",{children:Object.entries(m).sort(([i],[n])=>parseInt(i)-parseInt(n)).map(([i,n])=>e.jsx(T.Fragment,{children:n.map((c,t)=>e.jsxs("tr",{children:[t===0?e.jsxs("td",{rowSpan:n.length,className:"tooth-cell",children:["Tooth ",b(parseInt(i),j)]}):null,e.jsx("td",{children:c.name}),e.jsx("td",{children:c.date})]},`${i}-${t}`))},i))})]})]})]})};export{A as D,f as T,b as g};

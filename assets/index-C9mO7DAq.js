const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EditComplaintPage-nT_jXBjx.js","assets/EditComplaintPage-DGa1R4ya.css","assets/AddPatientPage-2oZE-H5p.js","assets/AddPatientPage-CvaX_3Vg.css"])))=>i.map(i=>d[i]);
var lK=Object.defineProperty;var yI=e=>{throw TypeError(e)};var cK=(e,t,n)=>t in e?lK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var hr=(e,t,n)=>cK(e,typeof t!="symbol"?t+"":t,n),gC=(e,t,n)=>t.has(e)||yI("Cannot "+n);var Pe=(e,t,n)=>(gC(e,t,"read from private field"),n?n.call(e):t.get(e)),Bt=(e,t,n)=>t.has(e)?yI("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),_t=(e,t,n,r)=>(gC(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),wn=(e,t,n)=>(gC(e,t,"access private method"),n);var _j=(e,t,n,r)=>({set _(a){_t(e,t,a,n)},get _(){return Pe(e,t,r)}});function uK(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var Ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yC={exports:{}},Wv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vI;function dK(){if(vI)return Wv;vI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:s}}return Wv.Fragment=t,Wv.jsx=n,Wv.jsxs=n,Wv}var xI;function hK(){return xI||(xI=1,yC.exports=dK()),yC.exports}var i=hK(),vC={exports:{}},vn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI;function fK(){if(bI)return vn;bI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function w(B,fe,me){this.props=B,this.context=fe,this.refs=b,this.updater=me||v}w.prototype.isReactComponent={},w.prototype.setState=function(B,fe){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,fe,"setState")},w.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function _(){}_.prototype=w.prototype;function T(B,fe,me){this.props=B,this.context=fe,this.refs=b,this.updater=me||v}var C=T.prototype=new _;C.constructor=T,x(C,w.prototype),C.isPureReactComponent=!0;var O=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function I(B,fe,me,Y,xe,Ie){return me=Ie.ref,{$$typeof:e,type:B,key:fe,ref:me!==void 0?me:null,props:Ie}}function F(B,fe){return I(B.type,fe,void 0,void 0,void 0,B.props)}function $(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function z(B){var fe={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(me){return fe[me]})}var L=/\/+/g;function H(B,fe){return typeof B=="object"&&B!==null&&B.key!=null?z(""+B.key):fe.toString(36)}function V(){}function ne(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(V,V):(B.status="pending",B.then(function(fe){B.status==="pending"&&(B.status="fulfilled",B.value=fe)},function(fe){B.status==="pending"&&(B.status="rejected",B.reason=fe)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Z(B,fe,me,Y,xe){var Ie=typeof B;(Ie==="undefined"||Ie==="boolean")&&(B=null);var Ne=!1;if(B===null)Ne=!0;else switch(Ie){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(B.$$typeof){case e:case t:Ne=!0;break;case f:return Ne=B._init,Z(Ne(B._payload),fe,me,Y,xe)}}if(Ne)return xe=xe(B),Ne=Y===""?"."+H(B,0):Y,O(xe)?(me="",Ne!=null&&(me=Ne.replace(L,"$&/")+"/"),Z(xe,fe,me,"",function(Q){return Q})):xe!=null&&($(xe)&&(xe=F(xe,me+(xe.key==null||B&&B.key===xe.key?"":(""+xe.key).replace(L,"$&/")+"/")+Ne)),fe.push(xe)),1;Ne=0;var ke=Y===""?".":Y+":";if(O(B))for(var de=0;de<B.length;de++)Y=B[de],Ie=ke+H(Y,de),Ne+=Z(Y,fe,me,Ie,xe);else if(de=y(B),typeof de=="function")for(B=de.call(B),de=0;!(Y=B.next()).done;)Y=Y.value,Ie=ke+H(Y,de++),Ne+=Z(Y,fe,me,Ie,xe);else if(Ie==="object"){if(typeof B.then=="function")return Z(ne(B),fe,me,Y,xe);throw fe=String(B),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function q(B,fe,me){if(B==null)return B;var Y=[],xe=0;return Z(B,Y,"","",function(Ie){return fe.call(me,Ie,xe++)}),Y}function K(B){if(B._status===-1){var fe=B._result;fe=fe(),fe.then(function(me){(B._status===0||B._status===-1)&&(B._status=1,B._result=me)},function(me){(B._status===0||B._status===-1)&&(B._status=2,B._result=me)}),B._status===-1&&(B._status=0,B._result=fe)}if(B._status===1)return B._result.default;throw B._result}var se=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function G(){}return vn.Children={map:q,forEach:function(B,fe,me){q(B,function(){fe.apply(this,arguments)},me)},count:function(B){var fe=0;return q(B,function(){fe++}),fe},toArray:function(B){return q(B,function(fe){return fe})||[]},only:function(B){if(!$(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},vn.Component=w,vn.Fragment=n,vn.Profiler=a,vn.PureComponent=T,vn.StrictMode=r,vn.Suspense=c,vn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,vn.__COMPILER_RUNTIME={__proto__:null,c:function(B){return E.H.useMemoCache(B)}},vn.cache=function(B){return function(){return B.apply(null,arguments)}},vn.cloneElement=function(B,fe,me){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Y=x({},B.props),xe=B.key,Ie=void 0;if(fe!=null)for(Ne in fe.ref!==void 0&&(Ie=void 0),fe.key!==void 0&&(xe=""+fe.key),fe)!P.call(fe,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&fe.ref===void 0||(Y[Ne]=fe[Ne]);var Ne=arguments.length-2;if(Ne===1)Y.children=me;else if(1<Ne){for(var ke=Array(Ne),de=0;de<Ne;de++)ke[de]=arguments[de+2];Y.children=ke}return I(B.type,xe,void 0,void 0,Ie,Y)},vn.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:s,_context:B},B},vn.createElement=function(B,fe,me){var Y,xe={},Ie=null;if(fe!=null)for(Y in fe.key!==void 0&&(Ie=""+fe.key),fe)P.call(fe,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(xe[Y]=fe[Y]);var Ne=arguments.length-2;if(Ne===1)xe.children=me;else if(1<Ne){for(var ke=Array(Ne),de=0;de<Ne;de++)ke[de]=arguments[de+2];xe.children=ke}if(B&&B.defaultProps)for(Y in Ne=B.defaultProps,Ne)xe[Y]===void 0&&(xe[Y]=Ne[Y]);return I(B,Ie,void 0,void 0,null,xe)},vn.createRef=function(){return{current:null}},vn.forwardRef=function(B){return{$$typeof:l,render:B}},vn.isValidElement=$,vn.lazy=function(B){return{$$typeof:f,_payload:{_status:-1,_result:B},_init:K}},vn.memo=function(B,fe){return{$$typeof:u,type:B,compare:fe===void 0?null:fe}},vn.startTransition=function(B){var fe=E.T,me={};E.T=me;try{var Y=B(),xe=E.S;xe!==null&&xe(me,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(G,se)}catch(Ie){se(Ie)}finally{E.T=fe}},vn.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},vn.use=function(B){return E.H.use(B)},vn.useActionState=function(B,fe,me){return E.H.useActionState(B,fe,me)},vn.useCallback=function(B,fe){return E.H.useCallback(B,fe)},vn.useContext=function(B){return E.H.useContext(B)},vn.useDebugValue=function(){},vn.useDeferredValue=function(B,fe){return E.H.useDeferredValue(B,fe)},vn.useEffect=function(B,fe,me){var Y=E.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(B,fe)},vn.useId=function(){return E.H.useId()},vn.useImperativeHandle=function(B,fe,me){return E.H.useImperativeHandle(B,fe,me)},vn.useInsertionEffect=function(B,fe){return E.H.useInsertionEffect(B,fe)},vn.useLayoutEffect=function(B,fe){return E.H.useLayoutEffect(B,fe)},vn.useMemo=function(B,fe){return E.H.useMemo(B,fe)},vn.useOptimistic=function(B,fe){return E.H.useOptimistic(B,fe)},vn.useReducer=function(B,fe,me){return E.H.useReducer(B,fe,me)},vn.useRef=function(B){return E.H.useRef(B)},vn.useState=function(B){return E.H.useState(B)},vn.useSyncExternalStore=function(B,fe,me){return E.H.useSyncExternalStore(B,fe,me)},vn.useTransition=function(){return E.H.useTransition()},vn.version="19.1.0",vn}var jI;function sD(){return jI||(jI=1,vC.exports=fK()),vC.exports}var j=sD();const ye=Bn(j),wI=uK({__proto__:null,default:ye},[j]);var xC={exports:{}},Kv={},bC={exports:{}},jC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SI;function pK(){return SI||(SI=1,function(e){function t(q,K){var se=q.length;q.push(K);e:for(;0<se;){var G=se-1>>>1,B=q[G];if(0<a(B,K))q[G]=K,q[se]=B,se=G;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var K=q[0],se=q.pop();if(se!==K){q[0]=se;e:for(var G=0,B=q.length,fe=B>>>1;G<fe;){var me=2*(G+1)-1,Y=q[me],xe=me+1,Ie=q[xe];if(0>a(Y,se))xe<B&&0>a(Ie,Y)?(q[G]=Ie,q[xe]=se,G=xe):(q[G]=Y,q[me]=se,G=me);else if(xe<B&&0>a(Ie,se))q[G]=Ie,q[xe]=se,G=xe;else break e}}return K}function a(q,K){var se=q.sortIndex-K.sortIndex;return se!==0?se:q.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,p=null,y=3,v=!1,x=!1,b=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(q){for(var K=n(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=q)r(u),K.sortIndex=K.expirationTime,t(c,K);else break;K=n(u)}}function E(q){if(b=!1,O(q),!x)if(n(c)!==null)x=!0,P||(P=!0,H());else{var K=n(u);K!==null&&Z(E,K.startTime-q)}}var P=!1,I=-1,F=5,$=-1;function z(){return w?!0:!(e.unstable_now()-$<F)}function L(){if(w=!1,P){var q=e.unstable_now();$=q;var K=!0;try{e:{x=!1,b&&(b=!1,T(I),I=-1),v=!0;var se=y;try{t:{for(O(q),p=n(c);p!==null&&!(p.expirationTime>q&&z());){var G=p.callback;if(typeof G=="function"){p.callback=null,y=p.priorityLevel;var B=G(p.expirationTime<=q);if(q=e.unstable_now(),typeof B=="function"){p.callback=B,O(q),K=!0;break t}p===n(c)&&r(c),O(q)}else r(c);p=n(c)}if(p!==null)K=!0;else{var fe=n(u);fe!==null&&Z(E,fe.startTime-q),K=!1}}break e}finally{p=null,y=se,v=!1}K=void 0}}finally{K?H():P=!1}}}var H;if(typeof C=="function")H=function(){C(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ne=V.port2;V.port1.onmessage=L,H=function(){ne.postMessage(null)}}else H=function(){_(L,0)};function Z(q,K){I=_(function(){q(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(q){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var se=y;y=K;try{return q()}finally{y=se}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=y;y=q;try{return K()}finally{y=se}},e.unstable_scheduleCallback=function(q,K,se){var G=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?G+se:G):se=G,q){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=se+B,q={id:f++,callback:K,priorityLevel:q,startTime:se,expirationTime:B,sortIndex:-1},se>G?(q.sortIndex=se,t(u,q),n(c)===null&&q===n(u)&&(b?(T(I),I=-1):b=!0,Z(E,se-G))):(q.sortIndex=B,t(c,q),x||v||(x=!0,P||(P=!0,H()))),q},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(q){var K=y;return function(){var se=y;y=K;try{return q.apply(this,arguments)}finally{y=se}}}}(jC)),jC}var NI;function mK(){return NI||(NI=1,bC.exports=pK()),bC.exports}var wC={exports:{}},Ji={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _I;function gK(){if(_I)return Ji;_I=1;var e=sD();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:u,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ji.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ji.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,f)},Ji.flushSync=function(c){var u=o.T,f=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=u,r.p=f,r.d.f()}},Ji.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Ji.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ji.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,p=l(f,u.crossOrigin),y=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:v}):f==="script"&&r.d.X(c,{crossOrigin:p,integrity:y,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ji.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=l(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Ji.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,p=l(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ji.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=l(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Ji.requestFormReset=function(c){r.d.r(c)},Ji.unstable_batchedUpdates=function(c,u){return c(u)},Ji.useFormState=function(c,u,f){return o.H.useFormState(c,u,f)},Ji.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ji.version="19.1.0",Ji}var CI;function Gz(){if(CI)return wC.exports;CI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),wC.exports=gK(),wC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI;function yK(){if(TI)return Kv;TI=1;var e=mK(),t=sD(),n=Gz();function r(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function s(d){var h=d,m=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(m=h.return),d=h.return;while(d)}return h.tag===3?m:null}function o(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function l(d){if(s(d)!==d)throw Error(r(188))}function c(d){var h=d.alternate;if(!h){if(h=s(d),h===null)throw Error(r(188));return h!==d?null:d}for(var m=d,N=h;;){var A=m.return;if(A===null)break;var R=A.alternate;if(R===null){if(N=A.return,N!==null){m=N;continue}break}if(A.child===R.child){for(R=A.child;R;){if(R===m)return l(A),d;if(R===N)return l(A),h;R=R.sibling}throw Error(r(188))}if(m.return!==N.return)m=A,N=R;else{for(var J=!1,he=A.child;he;){if(he===m){J=!0,m=A,N=R;break}if(he===N){J=!0,N=A,m=R;break}he=he.sibling}if(!J){for(he=R.child;he;){if(he===m){J=!0,m=R,N=A;break}if(he===N){J=!0,N=R,m=A;break}he=he.sibling}if(!J)throw Error(r(189))}}if(m.alternate!==N)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?d:h}function u(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d;for(d=d.child;d!==null;){if(h=u(d),h!==null)return h;d=d.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function H(d){return d===null||typeof d!="object"?null:(d=L&&d[L]||d["@@iterator"],typeof d=="function"?d:null)}var V=Symbol.for("react.client.reference");function ne(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===V?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case x:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case E:return"Suspense";case P:return"SuspenseList";case $:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case v:return"Portal";case C:return(d.displayName||"Context")+".Provider";case T:return(d._context.displayName||"Context")+".Consumer";case O:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case I:return h=d.displayName||null,h!==null?h:ne(d.type)||"Memo";case F:h=d._payload,d=d._init;try{return ne(d(h))}catch{}}return null}var Z=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},G=[],B=-1;function fe(d){return{current:d}}function me(d){0>B||(d.current=G[B],G[B]=null,B--)}function Y(d,h){B++,G[B]=d.current,d.current=h}var xe=fe(null),Ie=fe(null),Ne=fe(null),ke=fe(null);function de(d,h){switch(Y(Ne,h),Y(Ie,d),Y(xe,null),h.nodeType){case 9:case 11:d=(d=h.documentElement)&&(d=d.namespaceURI)?_r(d):0;break;default:if(d=h.tagName,h=h.namespaceURI)h=_r(h),d=kr(h,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}me(xe),Y(xe,d)}function Q(){me(xe),me(Ie),me(Ne)}function oe(d){d.memoizedState!==null&&Y(ke,d);var h=xe.current,m=kr(h,d.type);h!==m&&(Y(Ie,d),Y(xe,m))}function re(d){Ie.current===d&&(me(xe),me(Ie)),ke.current===d&&(me(ke),zu._currentValue=se)}var ae=Object.prototype.hasOwnProperty,X=e.unstable_scheduleCallback,W=e.unstable_cancelCallback,ie=e.unstable_shouldYield,pe=e.unstable_requestPaint,le=e.unstable_now,je=e.unstable_getCurrentPriorityLevel,Ge=e.unstable_ImmediatePriority,et=e.unstable_UserBlockingPriority,ht=e.unstable_NormalPriority,_e=e.unstable_LowPriority,Fe=e.unstable_IdlePriority,Ye=e.log,Ke=e.unstable_setDisableYieldValue,be=null,De=null;function we(d){if(typeof Ye=="function"&&Ke(d),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(be,d)}catch{}}var ve=Math.clz32?Math.clz32:Ve,Ce=Math.log,nt=Math.LN2;function Ve(d){return d>>>=0,d===0?32:31-(Ce(d)/nt|0)|0}var dt=256,Ct=4194304;function kt(d){var h=d&42;if(h!==0)return h;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function ze(d,h,m){var N=d.pendingLanes;if(N===0)return 0;var A=0,R=d.suspendedLanes,J=d.pingedLanes;d=d.warmLanes;var he=N&134217727;return he!==0?(N=he&~R,N!==0?A=kt(N):(J&=he,J!==0?A=kt(J):m||(m=he&~d,m!==0&&(A=kt(m))))):(he=N&~R,he!==0?A=kt(he):J!==0?A=kt(J):m||(m=N&~d,m!==0&&(A=kt(m)))),A===0?0:h!==0&&h!==A&&(h&R)===0&&(R=A&-A,m=h&-h,R>=m||R===32&&(m&4194048)!==0)?h:A}function Xe(d,h){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&h)===0}function Je(d,h){switch(d){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var d=dt;return dt<<=1,(dt&4194048)===0&&(dt=256),d}function Pt(){var d=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),d}function dn(d){for(var h=[],m=0;31>m;m++)h.push(d);return h}function Ee(d,h){d.pendingLanes|=h,h!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function at(d,h,m,N,A,R){var J=d.pendingLanes;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=m,d.entangledLanes&=m,d.errorRecoveryDisabledLanes&=m,d.shellSuspendCounter=0;var he=d.entanglements,Te=d.expirationTimes,Ue=d.hiddenUpdates;for(m=J&~m;0<m;){var it=31-ve(m),ct=1<<it;he[it]=0,Te[it]=-1;var We=Ue[it];if(We!==null)for(Ue[it]=null,it=0;it<We.length;it++){var He=We[it];He!==null&&(He.lane&=-536870913)}m&=~ct}N!==0&&Tt(d,N,0),R!==0&&A===0&&d.tag!==0&&(d.suspendedLanes|=R&~(J&~h))}function Tt(d,h,m){d.pendingLanes|=h,d.suspendedLanes&=~h;var N=31-ve(h);d.entangledLanes|=h,d.entanglements[N]=d.entanglements[N]|1073741824|m&4194090}function Re(d,h){var m=d.entangledLanes|=h;for(d=d.entanglements;m;){var N=31-ve(m),A=1<<N;A&h|d[N]&h&&(d[N]|=h),m&=~A}}function vt(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function It(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function ur(){var d=K.p;return d!==0?d:(d=window.event,d===void 0?32:xj(d.type))}function pt(d,h){var m=K.p;try{return K.p=d,h()}finally{K.p=m}}var jt=Math.random().toString(36).slice(2),bt="__reactFiber$"+jt,Dt="__reactProps$"+jt,un="__reactContainer$"+jt,Ut="__reactEvents$"+jt,to="__reactListeners$"+jt,no="__reactHandles$"+jt,Es="__reactResources$"+jt,$o="__reactMarker$"+jt;function ty(d){delete d[bt],delete d[Dt],delete d[Ut],delete d[to],delete d[no]}function Gc(d){var h=d[bt];if(h)return h;for(var m=d.parentNode;m;){if(h=m[un]||m[bt]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(d=oj(d);d!==null;){if(m=d[bt])return m;d=oj(d)}return h}d=m,m=d.parentNode}return null}function Wc(d){if(d=d[bt]||d[un]){var h=d.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return d}return null}function Kc(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d.stateNode;throw Error(r(33))}function Yc(d){var h=d[Es];return h||(h=d[Es]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function ai(d){d[$o]=!0}var a0=new Set,s0={};function Fl(d,h){Qc(d,h),Qc(d+"Capture",h)}function Qc(d,h){for(s0[d]=h,d=0;d<h.length;d++)a0.add(h[d])}var zf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),o0={},Ed={};function d_(d){return ae.call(Ed,d)?!0:ae.call(o0,d)?!1:zf.test(d)?Ed[d]=!0:(o0[d]=!0,!1)}function qf(d,h,m){if(d_(h))if(m===null)d.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":d.removeAttribute(h);return;case"boolean":var N=h.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){d.removeAttribute(h);return}}d.setAttribute(h,""+m)}}function Uf(d,h,m){if(m===null)d.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(h);return}d.setAttribute(h,""+m)}}function As(d,h,m,N){if(N===null)d.removeAttribute(m);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(m);return}d.setAttributeNS(h,m,""+N)}}var Vf,ny;function Xc(d){if(Vf===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);Vf=h&&h[1]||"",ny=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vf+d+ny}var ry=!1;function iy(d,h){if(!d||ry)return"";ry=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(h){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(He){var We=He}Reflect.construct(d,[],ct)}else{try{ct.call()}catch(He){We=He}d.call(ct.prototype)}}else{try{throw Error()}catch(He){We=He}(ct=d())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(He){if(He&&We&&typeof He.stack=="string")return[He.stack,We.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=N.DetermineComponentFrameRoot(),J=R[0],he=R[1];if(J&&he){var Te=J.split(`
`),Ue=he.split(`
`);for(A=N=0;N<Te.length&&!Te[N].includes("DetermineComponentFrameRoot");)N++;for(;A<Ue.length&&!Ue[A].includes("DetermineComponentFrameRoot");)A++;if(N===Te.length||A===Ue.length)for(N=Te.length-1,A=Ue.length-1;1<=N&&0<=A&&Te[N]!==Ue[A];)A--;for(;1<=N&&0<=A;N--,A--)if(Te[N]!==Ue[A]){if(N!==1||A!==1)do if(N--,A--,0>A||Te[N]!==Ue[A]){var it=`
`+Te[N].replace(" at new "," at ");return d.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",d.displayName)),it}while(1<=N&&0<=A);break}}}finally{ry=!1,Error.prepareStackTrace=m}return(m=d?d.displayName||d.name:"")?Xc(m):""}function h_(d){switch(d.tag){case 26:case 27:case 5:return Xc(d.type);case 16:return Xc("Lazy");case 13:return Xc("Suspense");case 19:return Xc("SuspenseList");case 0:case 15:return iy(d.type,!1);case 11:return iy(d.type.render,!1);case 1:return iy(d.type,!0);case 31:return Xc("Activity");default:return""}}function ay(d){try{var h="";do h+=h_(d),d=d.return;while(d);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function ca(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function sy(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function oy(d){var h=sy(d)?"checked":"value",m=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),N=""+d[h];if(!d.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,R=m.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return A.call(this)},set:function(J){N=""+J,R.call(this,J)}}),Object.defineProperty(d,h,{enumerable:m.enumerable}),{getValue:function(){return N},setValue:function(J){N=""+J},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function Hf(d){d._valueTracker||(d._valueTracker=oy(d))}function ly(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var m=h.getValue(),N="";return d&&(N=sy(d)?d.checked?"true":"false":d.value),d=N,d!==m?(h.setValue(d),!0):!1}function $l(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var l0=/[\n"\\]/g;function Da(d){return d.replace(l0,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Gf(d,h,m,N,A,R,J,he){d.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?d.type=J:d.removeAttribute("type"),h!=null?J==="number"?(h===0&&d.value===""||d.value!=h)&&(d.value=""+ca(h)):d.value!==""+ca(h)&&(d.value=""+ca(h)):J!=="submit"&&J!=="reset"||d.removeAttribute("value"),h!=null?Ad(d,J,ca(h)):m!=null?Ad(d,J,ca(m)):N!=null&&d.removeAttribute("value"),A==null&&R!=null&&(d.defaultChecked=!!R),A!=null&&(d.checked=A&&typeof A!="function"&&typeof A!="symbol"),he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?d.name=""+ca(he):d.removeAttribute("name")}function cy(d,h,m,N,A,R,J,he){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(d.type=R),h!=null||m!=null){if(!(R!=="submit"&&R!=="reset"||h!=null))return;m=m!=null?""+ca(m):"",h=h!=null?""+ca(h):m,he||h===d.value||(d.value=h),d.defaultValue=h}N=N??A,N=typeof N!="function"&&typeof N!="symbol"&&!!N,d.checked=he?d.checked:!!N,d.defaultChecked=!!N,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(d.name=J)}function Ad(d,h,m){h==="number"&&$l(d.ownerDocument)===d||d.defaultValue===""+m||(d.defaultValue=""+m)}function Jc(d,h,m,N){if(d=d.options,h){h={};for(var A=0;A<m.length;A++)h["$"+m[A]]=!0;for(m=0;m<d.length;m++)A=h.hasOwnProperty("$"+d[m].value),d[m].selected!==A&&(d[m].selected=A),A&&N&&(d[m].defaultSelected=!0)}else{for(m=""+ca(m),h=null,A=0;A<d.length;A++){if(d[A].value===m){d[A].selected=!0,N&&(d[A].defaultSelected=!0);return}h!==null||d[A].disabled||(h=d[A])}h!==null&&(h.selected=!0)}}function uy(d,h,m){if(h!=null&&(h=""+ca(h),h!==d.value&&(d.value=h),m==null)){d.defaultValue!==h&&(d.defaultValue=h);return}d.defaultValue=m!=null?""+ca(m):""}function Wf(d,h,m,N){if(h==null){if(N!=null){if(m!=null)throw Error(r(92));if(Z(N)){if(1<N.length)throw Error(r(93));N=N[0]}m=N}m==null&&(m=""),h=m}m=ca(h),d.defaultValue=m,N=d.textContent,N===m&&N!==""&&N!==null&&(d.value=N)}function Bo(d,h){if(h){var m=d.firstChild;if(m&&m===d.lastChild&&m.nodeType===3){m.nodeValue=h;return}}d.textContent=h}var Zc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dy(d,h,m){var N=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?N?d.setProperty(h,""):h==="float"?d.cssFloat="":d[h]="":N?d.setProperty(h,m):typeof m!="number"||m===0||Zc.has(h)?h==="float"?d.cssFloat=m:d[h]=(""+m).trim():d[h]=m+"px"}function hy(d,h,m){if(h!=null&&typeof h!="object")throw Error(r(62));if(d=d.style,m!=null){for(var N in m)!m.hasOwnProperty(N)||h!=null&&h.hasOwnProperty(N)||(N.indexOf("--")===0?d.setProperty(N,""):N==="float"?d.cssFloat="":d[N]="");for(var A in h)N=h[A],h.hasOwnProperty(A)&&m[A]!==N&&dy(d,A,N)}else for(var R in h)h.hasOwnProperty(R)&&dy(d,R,h[R])}function fy(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),u0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kd(d){return u0.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var Kf=null;function py(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var eu=null,tu=null;function my(d){var h=Wc(d);if(h&&(d=h.stateNode)){var m=d[Dt]||null;e:switch(d=h.stateNode,h.type){case"input":if(Gf(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=d;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Da(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var N=m[h];if(N!==d&&N.form===d.form){var A=N[Dt]||null;if(!A)throw Error(r(90));Gf(N,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(h=0;h<m.length;h++)N=m[h],N.form===d.form&&ly(N)}break e;case"textarea":uy(d,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Jc(d,!!m.multiple,h,!1)}}}var gy=!1;function d0(d,h,m){if(gy)return d(h,m);gy=!0;try{var N=d(h);return N}finally{if(gy=!1,(eu!==null||tu!==null)&&(Kp(),eu&&(h=eu,d=tu,tu=eu=null,my(h),d)))for(h=0;h<d.length;h++)my(d[h])}}function Pd(d,h){var m=d.stateNode;if(m===null)return null;var N=m[Dt]||null;if(N===null)return null;m=N[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(d=d.type,N=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!N;break e;default:d=!1}if(d)return null;if(m&&typeof m!="function")throw Error(r(231,h,typeof m));return m}var ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=!1;if(ro)try{var Dd={};Object.defineProperty(Dd,"passive",{get:function(){Od=!0}}),window.addEventListener("test",Dd,Dd),window.removeEventListener("test",Dd,Dd)}catch{Od=!1}var zo=null,yy=null,Yf=null;function h0(){if(Yf)return Yf;var d,h=yy,m=h.length,N,A="value"in zo?zo.value:zo.textContent,R=A.length;for(d=0;d<m&&h[d]===A[d];d++);var J=m-d;for(N=1;N<=J&&h[m-N]===A[R-N];N++);return Yf=A.slice(d,1<N?1-N:void 0)}function Jn(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function Gn(){return!0}function f0(){return!1}function $i(d){function h(m,N,A,R,J){this._reactName=m,this._targetInst=A,this.type=N,this.nativeEvent=R,this.target=J,this.currentTarget=null;for(var he in d)d.hasOwnProperty(he)&&(m=d[he],this[he]=m?m(R):R[he]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Gn:f0,this.isPropagationStopped=f0,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),h}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qf=$i(Bl),Md=f({},Bl,{view:0,detail:0}),f_=$i(Md),Xf,vy,Br,nu=f({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Br&&(Br&&d.type==="mousemove"?(Xf=d.screenX-Br.screenX,vy=d.screenY-Br.screenY):vy=Xf=0,Br=d),Xf)},movementY:function(d){return"movementY"in d?d.movementY:vy}}),qo=$i(nu),p0=f({},nu,{dataTransfer:0}),xy=$i(p0),Ma=f({},Md,{relatedTarget:0}),Jf=$i(Ma),m0=f({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),g0=$i(m0),y0=f({},Bl,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),v0=$i(y0),x0=f({},Bl,{data:0}),Bi=$i(x0),p_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ia={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b0(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=m_[d])?!!h[d]:!1}function ks(){return b0}var Zf=f({},Md,{key:function(d){if(d.key){var h=p_[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=Jn(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Ia[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(d){return d.type==="keypress"?Jn(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Jn(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),by=$i(Zf),jr=f({},nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),io=$i(jr),jy=f({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks}),g_=$i(jy),wy=f({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),y_=$i(wy),v_=f({},nu,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),x_=$i(v_),j0=f({},Bl,{newState:0,oldState:0}),ep=$i(j0),ru=[9,13,27,32],Sy=ro&&"CompositionEvent"in window,iu=null;ro&&"documentMode"in document&&(iu=document.documentMode);var w0=ro&&"TextEvent"in window&&!iu,tp=ro&&(!Sy||iu&&8<iu&&11>=iu),np=" ",Ny=!1;function S0(d,h){switch(d){case"keyup":return ru.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rp(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Uo=!1;function b_(d,h){switch(d){case"compositionend":return rp(h);case"keypress":return h.which!==32?null:(Ny=!0,np);case"textInput":return d=h.data,d===np&&Ny?null:d;default:return null}}function N0(d,h){if(Uo)return d==="compositionend"||!Sy&&S0(d,h)?(d=h0(),Yf=yy=zo=null,Uo=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return tp&&h.locale!=="ko"?null:h.data;default:return null}}var ua={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ip(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!ua[d.type]:h==="textarea"}function au(d,h,m,N){eu?tu?tu.push(N):tu=[N]:eu=N,h=tm(h,"onChange"),0<h.length&&(m=new Qf("onChange","change",null,m,N),d.push({event:m,listeners:h}))}var su=null,ou=null;function j_(d){Z1(d,0)}function ap(d){var h=Kc(d);if(ly(h))return d}function _0(d,h){if(d==="change")return h}var C0=!1;if(ro){var _y;if(ro){var Vo="oninput"in document;if(!Vo){var T0=document.createElement("div");T0.setAttribute("oninput","return;"),Vo=typeof T0.oninput=="function"}_y=Vo}else _y=!1;C0=_y&&(!document.documentMode||9<document.documentMode)}function E0(){su&&(su.detachEvent("onpropertychange",sp),ou=su=null)}function sp(d){if(d.propertyName==="value"&&ap(ou)){var h=[];au(h,ou,d,py(d)),d0(j_,h)}}function A0(d,h,m){d==="focusin"?(E0(),su=h,ou=m,su.attachEvent("onpropertychange",sp)):d==="focusout"&&E0()}function Ho(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return ap(ou)}function op(d,h){if(d==="click")return ap(h)}function w_(d,h){if(d==="input"||d==="change")return ap(h)}function S_(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var da=typeof Object.is=="function"?Object.is:S_;function Ps(d,h){if(da(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var m=Object.keys(d),N=Object.keys(h);if(m.length!==N.length)return!1;for(N=0;N<m.length;N++){var A=m[N];if(!ae.call(h,A)||!da(d[A],h[A]))return!1}return!0}function Ra(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Cy(d,h){var m=Ra(d);d=0;for(var N;m;){if(m.nodeType===3){if(N=d+m.textContent.length,d<=h&&N>=h)return{node:m,offset:h-d};d=N}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ra(m)}}function k0(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?k0(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function P0(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var h=$l(d.document);h instanceof d.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)d=h.contentWindow;else break;h=$l(d.document)}return h}function Ty(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}var N_=ro&&"documentMode"in document&&11>=document.documentMode,lu=null,Go=null,Le=null,tt=!1;function Qe(d,h,m){var N=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;tt||lu==null||lu!==$l(N)||(N=lu,"selectionStart"in N&&Ty(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Le&&Ps(Le,N)||(Le=N,N=tm(Go,"onSelect"),0<N.length&&(h=new Qf("onSelect","select",null,h,m),d.push({event:h,listeners:N}),h.target=lu)))}function St(d,h){var m={};return m[d.toLowerCase()]=h.toLowerCase(),m["Webkit"+d]="webkit"+h,m["Moz"+d]="moz"+h,m}var Qt={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionrun:St("Transition","TransitionRun"),transitionstart:St("Transition","TransitionStart"),transitioncancel:St("Transition","TransitionCancel"),transitionend:St("Transition","TransitionEnd")},Mn={},qr={};ro&&(qr=document.createElement("div").style,"AnimationEvent"in window||(delete Qt.animationend.animation,delete Qt.animationiteration.animation,delete Qt.animationstart.animation),"TransitionEvent"in window||delete Qt.transitionend.transition);function In(d){if(Mn[d])return Mn[d];if(!Qt[d])return d;var h=Qt[d],m;for(m in h)if(h.hasOwnProperty(m)&&m in qr)return Mn[d]=h[m];return d}var lp=In("animationend"),O0=In("animationiteration"),ha=In("animationstart"),cp=In("transitionrun"),__=In("transitionstart"),cu=In("transitioncancel"),Id=In("transitionend"),Rd=new Map,zn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zn.push("scrollEnd");function as(d,h){Rd.set(d,h),Fl(h,[d])}var Ey=new WeakMap;function Pi(d,h){if(typeof d=="object"&&d!==null){var m=Ey.get(d);return m!==void 0?m:(h={value:d,source:h,stack:ay(h)},Ey.set(d,h),h)}return{value:d,source:h,stack:ay(h)}}var La=[],uu=0,Ay=0;function zl(){for(var d=uu,h=Ay=uu=0;h<d;){var m=La[h];La[h++]=null;var N=La[h];La[h++]=null;var A=La[h];La[h++]=null;var R=La[h];if(La[h++]=null,N!==null&&A!==null){var J=N.pending;J===null?A.next=A:(A.next=J.next,J.next=A),N.pending=A}R!==0&&Ld(m,A,R)}}function ss(d,h,m,N){La[uu++]=d,La[uu++]=h,La[uu++]=m,La[uu++]=N,Ay|=N,d.lanes|=N,d=d.alternate,d!==null&&(d.lanes|=N)}function du(d,h,m,N){return ss(d,h,m,N),Fd(d)}function ql(d,h){return ss(d,null,null,h),Fd(d)}function Ld(d,h,m){d.lanes|=m;var N=d.alternate;N!==null&&(N.lanes|=m);for(var A=!1,R=d.return;R!==null;)R.childLanes|=m,N=R.alternate,N!==null&&(N.childLanes|=m),R.tag===22&&(d=R.stateNode,d===null||d._visibility&1||(A=!0)),d=R,R=R.return;return d.tag===3?(R=d.stateNode,A&&h!==null&&(A=31-ve(m),d=R.hiddenUpdates,N=d[A],N===null?d[A]=[h]:N.push(h),h.lane=m|536870912),R):null}function Fd(d){if(50<Du)throw Du=0,Sv=null,Error(r(185));for(var h=d.return;h!==null;)d=h,h=d.return;return d.tag===3?d.stateNode:null}var Ul={};function up(d,h,m,N){this.tag=d,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(d,h,m,N){return new up(d,h,m,N)}function Vl(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Oi(d,h){var m=d.alternate;return m===null?(m=zi(d.tag,h,d.key,d.mode),m.elementType=d.elementType,m.type=d.type,m.stateNode=d.stateNode,m.alternate=d,d.alternate=m):(m.pendingProps=h,m.type=d.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=d.flags&65011712,m.childLanes=d.childLanes,m.lanes=d.lanes,m.child=d.child,m.memoizedProps=d.memoizedProps,m.memoizedState=d.memoizedState,m.updateQueue=d.updateQueue,h=d.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=d.sibling,m.index=d.index,m.ref=d.ref,m.refCleanup=d.refCleanup,m}function $d(d,h){d.flags&=65011714;var m=d.alternate;return m===null?(d.childLanes=0,d.lanes=h,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type,h=m.dependencies,d.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),d}function dp(d,h,m,N,A,R){var J=0;if(N=d,typeof d=="function")Vl(d)&&(J=1);else if(typeof d=="string")J=nC(d,m,xe.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case $:return d=zi(31,m,h,A),d.elementType=$,d.lanes=R,d;case x:return Hl(m.children,A,R,h);case b:J=8,A|=24;break;case w:return d=zi(12,m,h,A|2),d.elementType=w,d.lanes=R,d;case E:return d=zi(13,m,h,A),d.elementType=E,d.lanes=R,d;case P:return d=zi(19,m,h,A),d.elementType=P,d.lanes=R,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case _:case C:J=10;break e;case T:J=9;break e;case O:J=11;break e;case I:J=14;break e;case F:J=16,N=null;break e}J=29,m=Error(r(130,d===null?"null":typeof d,"")),N=null}return h=zi(J,m,h,A),h.elementType=d,h.type=N,h.lanes=R,h}function Hl(d,h,m,N){return d=zi(7,d,N,h),d.lanes=m,d}function ky(d,h,m){return d=zi(6,d,null,h),d.lanes=m,d}function hu(d,h,m){return h=zi(4,d.children!==null?d.children:[],d.key,h),h.lanes=m,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}var ao=[],Wo=0,hp=null,Bd=0,Fa=[],$a=0,gr=null,wr=1,so="";function Gl(d,h){ao[Wo++]=Bd,ao[Wo++]=hp,hp=d,Bd=h}function Py(d,h,m){Fa[$a++]=wr,Fa[$a++]=so,Fa[$a++]=gr,gr=d;var N=wr;d=so;var A=32-ve(N)-1;N&=~(1<<A),m+=1;var R=32-ve(h)+A;if(30<R){var J=A-A%5;R=(N&(1<<J)-1).toString(32),N>>=J,A-=J,wr=1<<32-ve(h)+A|m<<A|N,so=R+d}else wr=1<<R|m<<A|N,so=d}function Oy(d){d.return!==null&&(Gl(d,1),Py(d,1,0))}function zd(d){for(;d===hp;)hp=ao[--Wo],ao[Wo]=null,Bd=ao[--Wo],ao[Wo]=null;for(;d===gr;)gr=Fa[--$a],Fa[$a]=null,so=Fa[--$a],Fa[$a]=null,wr=Fa[--$a],Fa[$a]=null}var Qr=null,Sr=null,_n=!1,os=null,qi=!1,fu=Error(r(519));function Ba(d){var h=Error(r(418,""));throw Ko(Pi(h,d)),fu}function D0(d){var h=d.stateNode,m=d.type,N=d.memoizedProps;switch(h[bt]=d,h[Dt]=N,m){case"dialog":Nn("cancel",h),Nn("close",h);break;case"iframe":case"object":case"embed":Nn("load",h);break;case"video":case"audio":for(m=0;m<Ah.length;m++)Nn(Ah[m],h);break;case"source":Nn("error",h);break;case"img":case"image":case"link":Nn("error",h),Nn("load",h);break;case"details":Nn("toggle",h);break;case"input":Nn("invalid",h),cy(h,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0),Hf(h);break;case"select":Nn("invalid",h);break;case"textarea":Nn("invalid",h),Wf(h,N.value,N.defaultValue,N.children),Hf(h)}m=N.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||N.suppressHydrationWarning===!0||nj(h.textContent,m)?(N.popover!=null&&(Nn("beforetoggle",h),Nn("toggle",h)),N.onScroll!=null&&Nn("scroll",h),N.onScrollEnd!=null&&Nn("scrollend",h),N.onClick!=null&&(h.onclick=nm),h=!0):h=!1,h||Ba(d)}function M0(d){for(Qr=d.return;Qr;)switch(Qr.tag){case 5:case 13:qi=!1;return;case 27:case 3:qi=!0;return;default:Qr=Qr.return}}function qd(d){if(d!==Qr)return!1;if(!_n)return M0(d),_n=!0,!1;var h=d.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=d.type,m=!(m!=="form"&&m!=="button")||im(d.type,d.memoizedProps)),m=!m),m&&Sr&&Ba(d),M0(d),h===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8)if(m=d.data,m==="/$"){if(h===0){Sr=fs(d.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;d=d.nextSibling}Sr=null}}else h===27?(h=Sr,Ga(d.type)?(d=Lv,Lv=null,Sr=d):Sr=h):Sr=Qr?fs(d.stateNode.nextSibling):null;return!0}function Ud(){Sr=Qr=null,_n=!1}function I0(){var d=os;return d!==null&&(Qi===null?Qi=d:Qi.push.apply(Qi,d),os=null),d}function Ko(d){os===null?os=[d]:os.push(d)}var Wl=fe(null),Yo=null,ue=null;function fa(d,h,m){Y(Wl,h._currentValue),h._currentValue=m}function za(d){d._currentValue=Wl.current,me(Wl)}function Ui(d,h,m){for(;d!==null;){var N=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,N!==null&&(N.childLanes|=h)):N!==null&&(N.childLanes&h)!==h&&(N.childLanes|=h),d===m)break;d=d.return}}function xn(d,h,m,N){var A=d.child;for(A!==null&&(A.return=d);A!==null;){var R=A.dependencies;if(R!==null){var J=A.child;R=R.firstContext;e:for(;R!==null;){var he=R;R=A;for(var Te=0;Te<h.length;Te++)if(he.context===h[Te]){R.lanes|=m,he=R.alternate,he!==null&&(he.lanes|=m),Ui(R.return,m,d),N||(J=null);break e}R=he.next}}else if(A.tag===18){if(J=A.return,J===null)throw Error(r(341));J.lanes|=m,R=J.alternate,R!==null&&(R.lanes|=m),Ui(J,m,d),J=null}else J=A.child;if(J!==null)J.return=A;else for(J=A;J!==null;){if(J===d){J=null;break}if(A=J.sibling,A!==null){A.return=J.return,J=A;break}J=J.return}A=J}}function Vd(d,h,m,N){d=null;for(var A=h,R=!1;A!==null;){if(!R){if((A.flags&524288)!==0)R=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var J=A.alternate;if(J===null)throw Error(r(387));if(J=J.memoizedProps,J!==null){var he=A.type;da(A.pendingProps.value,J.value)||(d!==null?d.push(he):d=[he])}}else if(A===ke.current){if(J=A.alternate,J===null)throw Error(r(387));J.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(d!==null?d.push(zu):d=[zu])}A=A.return}d!==null&&xn(h,d,m,N),h.flags|=262144}function fp(d){for(d=d.firstContext;d!==null;){if(!da(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function Kl(d){Yo=d,ue=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Or(d){return R0(Yo,d)}function pp(d,h){return Yo===null&&Kl(d),R0(d,h)}function R0(d,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},ue===null){if(d===null)throw Error(r(308));ue=h,d.dependencies={lanes:0,firstContext:h},d.flags|=524288}else ue=ue.next=h;return m}var C_=typeof AbortController<"u"?AbortController:function(){var d=[],h=this.signal={aborted:!1,addEventListener:function(m,N){d.push(N)}};this.abort=function(){h.aborted=!0,d.forEach(function(m){return m()})}},T_=e.unstable_scheduleCallback,E_=e.unstable_NormalPriority,sr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dy(){return{controller:new C_,data:new Map,refCount:0}}function Hd(d){d.refCount--,d.refCount===0&&T_(E_,function(){d.controller.abort()})}var Gd=null,My=0,pu=0,Vi=null;function A_(d,h){if(Gd===null){var m=Gd=[];My=0,pu=em(),Vi={status:"pending",value:void 0,then:function(N){m.push(N)}}}return My++,h.then(L0,L0),h}function L0(){if(--My===0&&Gd!==null){Vi!==null&&(Vi.status="fulfilled");var d=Gd;Gd=null,pu=0,Vi=null;for(var h=0;h<d.length;h++)(0,d[h])()}}function k_(d,h){var m=[],N={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return d.then(function(){N.status="fulfilled",N.value=h;for(var A=0;A<m.length;A++)(0,m[A])(h)},function(A){for(N.status="rejected",N.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),N}var F0=q.S;q.S=function(d,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&A_(d,h),F0!==null&&F0(d,h)};var Yl=fe(null);function oo(){var d=Yl.current;return d!==null?d:dr.pooledCache}function mp(d,h){h===null?Y(Yl,Yl.current):Y(Yl,h.pool)}function $0(){var d=oo();return d===null?null:{parent:sr._currentValue,pool:d}}var Di=Error(r(460)),B0=Error(r(474)),gp=Error(r(542)),Iy={then:function(){}};function z0(d){return d=d.status,d==="fulfilled"||d==="rejected"}function yp(){}function Ry(d,h,m){switch(m=d[m],m===void 0?d.push(h):m!==h&&(h.then(yp,yp),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,U0(d),d;default:if(typeof h.status=="string")h.then(yp,yp);else{if(d=dr,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=h,d.status="pending",d.then(function(N){if(h.status==="pending"){var A=h;A.status="fulfilled",A.value=N}},function(N){if(h.status==="pending"){var A=h;A.status="rejected",A.reason=N}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,U0(d),d}throw mu=h,Di}}var mu=null;function q0(){if(mu===null)throw Error(r(459));var d=mu;return mu=null,d}function U0(d){if(d===Di||d===gp)throw Error(r(483))}var Os=!1;function Ql(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gu(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Qo(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function lo(d,h,m){var N=d.updateQueue;if(N===null)return null;if(N=N.shared,(Kn&2)!==0){var A=N.pending;return A===null?h.next=h:(h.next=A.next,A.next=h),N.pending=h,h=Fd(d),Ld(d,null,m),h}return ss(d,N,h,m),Fd(d)}function Wd(d,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var N=h.lanes;N&=d.pendingLanes,m|=N,h.lanes=m,Re(d,m)}}function ls(d,h){var m=d.updateQueue,N=d.alternate;if(N!==null&&(N=N.updateQueue,m===N)){var A=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var J={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};R===null?A=R=J:R=R.next=J,m=m.next}while(m!==null);R===null?A=R=h:R=R.next=h}else A=R=h;m={baseState:N.baseState,firstBaseUpdate:A,lastBaseUpdate:R,shared:N.shared,callbacks:N.callbacks},d.updateQueue=m;return}d=m.lastBaseUpdate,d===null?m.firstBaseUpdate=h:d.next=h,m.lastBaseUpdate=h}var Kd=!1;function cs(){if(Kd){var d=Vi;if(d!==null)throw d}}function wi(d,h,m,N){Kd=!1;var A=d.updateQueue;Os=!1;var R=A.firstBaseUpdate,J=A.lastBaseUpdate,he=A.shared.pending;if(he!==null){A.shared.pending=null;var Te=he,Ue=Te.next;Te.next=null,J===null?R=Ue:J.next=Ue,J=Te;var it=d.alternate;it!==null&&(it=it.updateQueue,he=it.lastBaseUpdate,he!==J&&(he===null?it.firstBaseUpdate=Ue:he.next=Ue,it.lastBaseUpdate=Te))}if(R!==null){var ct=A.baseState;J=0,it=Ue=Te=null,he=R;do{var We=he.lane&-536870913,He=We!==he.lane;if(He?(Dn&We)===We:(N&We)===We){We!==0&&We===pu&&(Kd=!0),it!==null&&(it=it.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var Gt=d,Ht=he;We=h;var er=m;switch(Ht.tag){case 1:if(Gt=Ht.payload,typeof Gt=="function"){ct=Gt.call(er,ct,We);break e}ct=Gt;break e;case 3:Gt.flags=Gt.flags&-65537|128;case 0:if(Gt=Ht.payload,We=typeof Gt=="function"?Gt.call(er,ct,We):Gt,We==null)break e;ct=f({},ct,We);break e;case 2:Os=!0}}We=he.callback,We!==null&&(d.flags|=64,He&&(d.flags|=8192),He=A.callbacks,He===null?A.callbacks=[We]:He.push(We))}else He={lane:We,tag:he.tag,payload:he.payload,callback:he.callback,next:null},it===null?(Ue=it=He,Te=ct):it=it.next=He,J|=We;if(he=he.next,he===null){if(he=A.shared.pending,he===null)break;He=he,he=He.next,He.next=null,A.lastBaseUpdate=He,A.shared.pending=null}}while(!0);it===null&&(Te=ct),A.baseState=Te,A.firstBaseUpdate=Ue,A.lastBaseUpdate=it,R===null&&(A.shared.lanes=0),al|=J,d.lanes=J,d.memoizedState=ct}}function V0(d,h){if(typeof d!="function")throw Error(r(191,d));d.call(h)}function Ly(d,h){var m=d.callbacks;if(m!==null)for(d.callbacks=null,d=0;d<m.length;d++)V0(m[d],h)}var Xl=fe(null),Xo=fe(0);function co(d,h){d=xo,Y(Xo,d),Y(Xl,h),xo=d|h.baseLanes}function vp(){Y(Xo,xo),Y(Xl,Xl.current)}function Fy(){xo=Xo.current,me(Xl),me(Xo)}var us=0,yn=null,Wn=null,Cn=null,yu=!1,Jl=!1,Si=!1,vu=0,Jo=0,qa=null,H0=0;function Tn(){throw Error(r(321))}function Yd(d,h){if(h===null)return!1;for(var m=0;m<h.length&&m<d.length;m++)if(!da(d[m],h[m]))return!1;return!0}function $y(d,h,m,N,A,R){return us=R,yn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,q.H=d===null||d.memoizedState===null?i1:rv,Si=!1,R=m(N,A),Si=!1,Jl&&(R=W0(h,m,N,A)),G0(d),R}function G0(d){q.H=sh;var h=Wn!==null&&Wn.next!==null;if(us=0,Cn=Wn=yn=null,yu=!1,Jo=0,qa=null,h)throw Error(r(300));d===null||si||(d=d.dependencies,d!==null&&fp(d)&&(si=!0))}function W0(d,h,m,N){yn=d;var A=0;do{if(Jl&&(qa=null),Jo=0,Jl=!1,25<=A)throw Error(r(301));if(A+=1,Cn=Wn=null,d.updateQueue!=null){var R=d.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}q.H=a1,R=h(m,N)}while(Jl);return R}function By(){var d=q.H,h=d.useState()[0];return h=typeof h.then=="function"?Qd(h):h,d=d.useState()[0],(Wn!==null?Wn.memoizedState:null)!==d&&(yn.flags|=1024),h}function zy(){var d=vu!==0;return vu=0,d}function Zl(d,h,m){h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~m}function xp(d){if(yu){for(d=d.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}yu=!1}us=0,Cn=Wn=yn=null,Jl=!1,Jo=vu=0,qa=null}function Hi(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?yn.memoizedState=Cn=d:Cn=Cn.next=d,Cn}function Ur(){if(Wn===null){var d=yn.alternate;d=d!==null?d.memoizedState:null}else d=Wn.next;var h=Cn===null?yn.memoizedState:Cn.next;if(h!==null)Cn=h,Wn=d;else{if(d===null)throw yn.alternate===null?Error(r(467)):Error(r(310));Wn=d,d={memoizedState:Wn.memoizedState,baseState:Wn.baseState,baseQueue:Wn.baseQueue,queue:Wn.queue,next:null},Cn===null?yn.memoizedState=Cn=d:Cn=Cn.next=d}return Cn}function ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qd(d){var h=Jo;return Jo+=1,qa===null&&(qa=[]),d=Ry(qa,d,h),h=yn,(Cn===null?h.memoizedState:Cn.next)===null&&(h=h.alternate,q.H=h===null||h.memoizedState===null?i1:rv),d}function bp(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Qd(d);if(d.$$typeof===C)return Or(d)}throw Error(r(438,String(d)))}function Xd(d){var h=null,m=yn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var N=yn.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(h={data:N.data.map(function(A){return A.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=ec(),yn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(d),N=0;N<d;N++)m[N]=z;return h.index++,m}function Ds(d,h){return typeof h=="function"?h(d):h}function jp(d){var h=Ur();return qy(h,Wn,d)}function qy(d,h,m){var N=d.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=m;var A=d.baseQueue,R=N.pending;if(R!==null){if(A!==null){var J=A.next;A.next=R.next,R.next=J}h.baseQueue=A=R,N.pending=null}if(R=d.baseState,A===null)d.memoizedState=R;else{h=A.next;var he=J=null,Te=null,Ue=h,it=!1;do{var ct=Ue.lane&-536870913;if(ct!==Ue.lane?(Dn&ct)===ct:(us&ct)===ct){var We=Ue.revertLane;if(We===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),ct===pu&&(it=!0);else if((us&We)===We){Ue=Ue.next,We===pu&&(it=!0);continue}else ct={lane:0,revertLane:Ue.revertLane,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},Te===null?(he=Te=ct,J=R):Te=Te.next=ct,yn.lanes|=We,al|=We;ct=Ue.action,Si&&m(R,ct),R=Ue.hasEagerState?Ue.eagerState:m(R,ct)}else We={lane:ct,revertLane:Ue.revertLane,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},Te===null?(he=Te=We,J=R):Te=Te.next=We,yn.lanes|=ct,al|=ct;Ue=Ue.next}while(Ue!==null&&Ue!==h);if(Te===null?J=R:Te.next=he,!da(R,d.memoizedState)&&(si=!0,it&&(m=Vi,m!==null)))throw m;d.memoizedState=R,d.baseState=J,d.baseQueue=Te,N.lastRenderedState=R}return A===null&&(N.lanes=0),[d.memoizedState,N.dispatch]}function Uy(d){var h=Ur(),m=h.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var N=m.dispatch,A=m.pending,R=h.memoizedState;if(A!==null){m.pending=null;var J=A=A.next;do R=d(R,J.action),J=J.next;while(J!==A);da(R,h.memoizedState)||(si=!0),h.memoizedState=R,h.baseQueue===null&&(h.baseState=R),m.lastRenderedState=R}return[R,N]}function Vy(d,h,m){var N=yn,A=Ur(),R=_n;if(R){if(m===void 0)throw Error(r(407));m=m()}else m=h();var J=!da((Wn||A).memoizedState,m);J&&(A.memoizedState=m,si=!0),A=A.queue;var he=Sp.bind(null,N,A,d);if(eh(2048,8,he,[d]),A.getSnapshot!==h||J||Cn!==null&&Cn.memoizedState.tag&1){if(N.flags|=2048,xu(9,Ep(),K0.bind(null,N,A,m,h),null),dr===null)throw Error(r(349));R||(us&124)!==0||wp(N,h,m)}return m}function wp(d,h,m){d.flags|=16384,d={getSnapshot:h,value:m},h=yn.updateQueue,h===null?(h=ec(),yn.updateQueue=h,h.stores=[d]):(m=h.stores,m===null?h.stores=[d]:m.push(d))}function K0(d,h,m,N){h.value=m,h.getSnapshot=N,Hy(h)&&Gy(d)}function Sp(d,h,m){return m(function(){Hy(h)&&Gy(d)})}function Hy(d){var h=d.getSnapshot;d=d.value;try{var m=h();return!da(d,m)}catch{return!0}}function Gy(d){var h=ql(d,2);h!==null&&va(h,d,2)}function Np(d){var h=Hi();if(typeof d=="function"){var m=d;if(d=m(),Si){we(!0);try{m()}finally{we(!1)}}}return h.memoizedState=h.baseState=d,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:d},h}function Jd(d,h,m,N){return d.baseState=m,qy(d,Wn,typeof N=="function"?N:Ds)}function P_(d,h,m,N,A){if(Op(d))throw Error(r(485));if(d=h.action,d!==null){var R={payload:A,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){R.listeners.push(J)}};q.T!==null?m(!0):R.isTransition=!1,N(R),m=h.pending,m===null?(R.next=h.pending=R,Wy(h,R)):(R.next=m.next,h.pending=m.next=R)}}function Wy(d,h){var m=h.action,N=h.payload,A=d.state;if(h.isTransition){var R=q.T,J={};q.T=J;try{var he=m(A,N),Te=q.S;Te!==null&&Te(J,he),Ky(d,h,he)}catch(Ue){_p(d,h,Ue)}finally{q.T=R}}else try{R=m(A,N),Ky(d,h,R)}catch(Ue){_p(d,h,Ue)}}function Ky(d,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(N){Y0(d,h,N)},function(N){return _p(d,h,N)}):Y0(d,h,m)}function Y0(d,h,m){h.status="fulfilled",h.value=m,Q0(h),d.state=m,h=d.pending,h!==null&&(m=h.next,m===h?d.pending=null:(m=m.next,h.next=m,Wy(d,m)))}function _p(d,h,m){var N=d.pending;if(d.pending=null,N!==null){N=N.next;do h.status="rejected",h.reason=m,Q0(h),h=h.next;while(h!==N)}d.action=null}function Q0(d){d=d.listeners;for(var h=0;h<d.length;h++)(0,d[h])()}function Cp(d,h){return h}function Yy(d,h){if(_n){var m=dr.formState;if(m!==null){e:{var N=yn;if(_n){if(Sr){t:{for(var A=Sr,R=qi;A.nodeType!==8;){if(!R){A=null;break t}if(A=fs(A.nextSibling),A===null){A=null;break t}}R=A.data,A=R==="F!"||R==="F"?A:null}if(A){Sr=fs(A.nextSibling),N=A.data==="F!";break e}}Ba(N)}N=!1}N&&(h=m[0])}}return m=Hi(),m.memoizedState=m.baseState=h,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cp,lastRenderedState:h},m.queue=N,m=ev.bind(null,yn,N),N.dispatch=m,N=Np(!1),R=tv.bind(null,yn,!1,N.queue),N=Hi(),A={state:h,dispatch:null,action:d,pending:null},N.queue=A,m=P_.bind(null,yn,A,R,m),A.dispatch=m,N.memoizedState=d,[h,m,!1]}function Tp(d){var h=Ur();return X0(h,Wn,d)}function X0(d,h,m){if(h=qy(d,h,Cp)[0],d=jp(Ds)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var N=Qd(h)}catch(J){throw J===Di?gp:J}else N=h;h=Ur();var A=h.queue,R=A.dispatch;return m!==h.memoizedState&&(yn.flags|=2048,xu(9,Ep(),Qy.bind(null,A,m),null)),[N,R,d]}function Qy(d,h){d.action=h}function pn(d){var h=Ur(),m=Wn;if(m!==null)return X0(h,m,d);Ur(),h=h.memoizedState,m=Ur();var N=m.queue.dispatch;return m.memoizedState=d,[h,N,!1]}function xu(d,h,m,N){return d={tag:d,create:m,deps:N,inst:h,next:null},h=yn.updateQueue,h===null&&(h=ec(),yn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=d.next=d:(N=m.next,m.next=d,d.next=N,h.lastEffect=d),d}function Ep(){return{destroy:void 0,resource:void 0}}function bu(){return Ur().memoizedState}function Zd(d,h,m,N){var A=Hi();N=N===void 0?null:N,yn.flags|=d,A.memoizedState=xu(1|h,Ep(),m,N)}function eh(d,h,m,N){var A=Ur();N=N===void 0?null:N;var R=A.memoizedState.inst;Wn!==null&&N!==null&&Yd(N,Wn.memoizedState.deps)?A.memoizedState=xu(h,R,m,N):(yn.flags|=d,A.memoizedState=xu(1|h,R,m,N))}function J0(d,h){Zd(8390656,8,d,h)}function pa(d,h){eh(2048,8,d,h)}function Z0(d,h){return eh(4,2,d,h)}function th(d,h){return eh(4,4,d,h)}function Ap(d,h){if(typeof h=="function"){d=d();var m=h(d);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function Xy(d,h,m){m=m!=null?m.concat([d]):null,eh(4,4,Ap.bind(null,h,d),m)}function kp(){}function Gi(d,h){var m=Ur();h=h===void 0?null:h;var N=m.memoizedState;return h!==null&&Yd(h,N[1])?N[0]:(m.memoizedState=[d,h],d)}function uo(d,h){var m=Ur();h=h===void 0?null:h;var N=m.memoizedState;if(h!==null&&Yd(h,N[1]))return N[0];if(N=d(),Si){we(!0);try{d()}finally{we(!1)}}return m.memoizedState=[N,h],N}function nh(d,h,m){return m===void 0||(us&1073741824)!==0?d.memoizedState=h:(d.memoizedState=m,d=O1(),yn.lanes|=d,al|=d,m)}function Jy(d,h,m,N){return da(m,h)?m:Xl.current!==null?(d=nh(d,m,N),da(d,h)||(si=!0),d):(us&42)===0?(si=!0,d.memoizedState=m):(d=O1(),yn.lanes|=d,al|=d,h)}function rh(d,h,m,N,A){var R=K.p;K.p=R!==0&&8>R?R:8;var J=q.T,he={};q.T=he,tv(d,!1,h,m);try{var Te=A(),Ue=q.S;if(Ue!==null&&Ue(he,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var it=k_(Te,N);tc(d,h,it,_i(d))}else tc(d,h,N,_i(d))}catch(ct){tc(d,h,{then:function(){},status:"rejected",reason:ct},_i())}finally{K.p=R,q.T=J}}function e1(){}function ih(d,h,m,N){if(d.tag!==5)throw Error(r(476));var A=Zy(d).queue;rh(d,A,h,se,m===null?e1:function(){return Pp(d),m(N)})}function Zy(d){var h=d.memoizedState;if(h!==null)return h;h={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:se},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:m},next:null},d.memoizedState=h,d=d.alternate,d!==null&&(d.memoizedState=h),h}function Pp(d){var h=Zy(d).next.queue;tc(d,h,{},_i())}function ah(){return Or(zu)}function ho(){return Ur().memoizedState}function t1(){return Ur().memoizedState}function Zo(d){for(var h=d.return;h!==null;){switch(h.tag){case 24:case 3:var m=_i();d=Qo(m);var N=lo(h,d,m);N!==null&&(va(N,h,m),Wd(N,h,m)),h={cache:Dy()},d.payload=h;return}h=h.return}}function n1(d,h,m){var N=_i();m={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Op(d)?r1(h,m):(m=du(d,h,m,N),m!==null&&(va(m,d,N),nv(m,h,N)))}function ev(d,h,m){var N=_i();tc(d,h,m,N)}function tc(d,h,m,N){var A={lane:N,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Op(d))r1(h,A);else{var R=d.alternate;if(d.lanes===0&&(R===null||R.lanes===0)&&(R=h.lastRenderedReducer,R!==null))try{var J=h.lastRenderedState,he=R(J,m);if(A.hasEagerState=!0,A.eagerState=he,da(he,J))return ss(d,h,A,0),dr===null&&zl(),!1}catch{}finally{}if(m=du(d,h,A,N),m!==null)return va(m,d,N),nv(m,h,N),!0}return!1}function tv(d,h,m,N){if(N={lane:2,revertLane:em(),action:N,hasEagerState:!1,eagerState:null,next:null},Op(d)){if(h)throw Error(r(479))}else h=du(d,m,N,2),h!==null&&va(h,d,2)}function Op(d){var h=d.alternate;return d===yn||h!==null&&h===yn}function r1(d,h){Jl=yu=!0;var m=d.pending;m===null?h.next=h:(h.next=m.next,m.next=h),d.pending=h}function nv(d,h,m){if((m&4194048)!==0){var N=h.lanes;N&=d.pendingLanes,m|=N,h.lanes=m,Re(d,m)}}var sh={readContext:Or,use:bp,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn,useHostTransitionStatus:Tn,useFormState:Tn,useActionState:Tn,useOptimistic:Tn,useMemoCache:Tn,useCacheRefresh:Tn},i1={readContext:Or,use:bp,useCallback:function(d,h){return Hi().memoizedState=[d,h===void 0?null:h],d},useContext:Or,useEffect:J0,useImperativeHandle:function(d,h,m){m=m!=null?m.concat([d]):null,Zd(4194308,4,Ap.bind(null,h,d),m)},useLayoutEffect:function(d,h){return Zd(4194308,4,d,h)},useInsertionEffect:function(d,h){Zd(4,2,d,h)},useMemo:function(d,h){var m=Hi();h=h===void 0?null:h;var N=d();if(Si){we(!0);try{d()}finally{we(!1)}}return m.memoizedState=[N,h],N},useReducer:function(d,h,m){var N=Hi();if(m!==void 0){var A=m(h);if(Si){we(!0);try{m(h)}finally{we(!1)}}}else A=h;return N.memoizedState=N.baseState=A,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:A},N.queue=d,d=d.dispatch=n1.bind(null,yn,d),[N.memoizedState,d]},useRef:function(d){var h=Hi();return d={current:d},h.memoizedState=d},useState:function(d){d=Np(d);var h=d.queue,m=ev.bind(null,yn,h);return h.dispatch=m,[d.memoizedState,m]},useDebugValue:kp,useDeferredValue:function(d,h){var m=Hi();return nh(m,d,h)},useTransition:function(){var d=Np(!1);return d=rh.bind(null,yn,d.queue,!0,!1),Hi().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,h,m){var N=yn,A=Hi();if(_n){if(m===void 0)throw Error(r(407));m=m()}else{if(m=h(),dr===null)throw Error(r(349));(Dn&124)!==0||wp(N,h,m)}A.memoizedState=m;var R={value:m,getSnapshot:h};return A.queue=R,J0(Sp.bind(null,N,R,d),[d]),N.flags|=2048,xu(9,Ep(),K0.bind(null,N,R,m,h),null),m},useId:function(){var d=Hi(),h=dr.identifierPrefix;if(_n){var m=so,N=wr;m=(N&~(1<<32-ve(N)-1)).toString(32)+m,h=""+h+"R"+m,m=vu++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=H0++,h=""+h+"r"+m.toString(32)+"";return d.memoizedState=h},useHostTransitionStatus:ah,useFormState:Yy,useActionState:Yy,useOptimistic:function(d){var h=Hi();h.memoizedState=h.baseState=d;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=tv.bind(null,yn,!0,m),m.dispatch=h,[d,h]},useMemoCache:Xd,useCacheRefresh:function(){return Hi().memoizedState=Zo.bind(null,yn)}},rv={readContext:Or,use:bp,useCallback:Gi,useContext:Or,useEffect:pa,useImperativeHandle:Xy,useInsertionEffect:Z0,useLayoutEffect:th,useMemo:uo,useReducer:jp,useRef:bu,useState:function(){return jp(Ds)},useDebugValue:kp,useDeferredValue:function(d,h){var m=Ur();return Jy(m,Wn.memoizedState,d,h)},useTransition:function(){var d=jp(Ds)[0],h=Ur().memoizedState;return[typeof d=="boolean"?d:Qd(d),h]},useSyncExternalStore:Vy,useId:ho,useHostTransitionStatus:ah,useFormState:Tp,useActionState:Tp,useOptimistic:function(d,h){var m=Ur();return Jd(m,Wn,d,h)},useMemoCache:Xd,useCacheRefresh:t1},a1={readContext:Or,use:bp,useCallback:Gi,useContext:Or,useEffect:pa,useImperativeHandle:Xy,useInsertionEffect:Z0,useLayoutEffect:th,useMemo:uo,useReducer:Uy,useRef:bu,useState:function(){return Uy(Ds)},useDebugValue:kp,useDeferredValue:function(d,h){var m=Ur();return Wn===null?nh(m,d,h):Jy(m,Wn.memoizedState,d,h)},useTransition:function(){var d=Uy(Ds)[0],h=Ur().memoizedState;return[typeof d=="boolean"?d:Qd(d),h]},useSyncExternalStore:Vy,useId:ho,useHostTransitionStatus:ah,useFormState:pn,useActionState:pn,useOptimistic:function(d,h){var m=Ur();return Wn!==null?Jd(m,Wn,d,h):(m.baseState=d,[d,m.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:t1},Xr=null,Wi=0;function Dp(d){var h=Wi;return Wi+=1,Xr===null&&(Xr=[]),Ry(Xr,d,h)}function oh(d,h){h=h.props.ref,d.ref=h!==void 0?h:null}function nc(d,h){throw h.$$typeof===p?Error(r(525)):(d=Object.prototype.toString.call(h),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d)))}function rc(d){var h=d._init;return h(d._payload)}function iv(d){function h($e,Me){if(d){var qe=$e.deletions;qe===null?($e.deletions=[Me],$e.flags|=16):qe.push(Me)}}function m($e,Me){if(!d)return null;for(;Me!==null;)h($e,Me),Me=Me.sibling;return null}function N($e){for(var Me=new Map;$e!==null;)$e.key!==null?Me.set($e.key,$e):Me.set($e.index,$e),$e=$e.sibling;return Me}function A($e,Me){return $e=Oi($e,Me),$e.index=0,$e.sibling=null,$e}function R($e,Me,qe){return $e.index=qe,d?(qe=$e.alternate,qe!==null?(qe=qe.index,qe<Me?($e.flags|=67108866,Me):qe):($e.flags|=67108866,Me)):($e.flags|=1048576,Me)}function J($e){return d&&$e.alternate===null&&($e.flags|=67108866),$e}function he($e,Me,qe,ot){return Me===null||Me.tag!==6?(Me=ky(qe,$e.mode,ot),Me.return=$e,Me):(Me=A(Me,qe),Me.return=$e,Me)}function Te($e,Me,qe,ot){var Et=qe.type;return Et===x?it($e,Me,qe.props.children,ot,qe.key):Me!==null&&(Me.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===F&&rc(Et)===Me.type)?(Me=A(Me,qe.props),oh(Me,qe),Me.return=$e,Me):(Me=dp(qe.type,qe.key,qe.props,null,$e.mode,ot),oh(Me,qe),Me.return=$e,Me)}function Ue($e,Me,qe,ot){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==qe.containerInfo||Me.stateNode.implementation!==qe.implementation?(Me=hu(qe,$e.mode,ot),Me.return=$e,Me):(Me=A(Me,qe.children||[]),Me.return=$e,Me)}function it($e,Me,qe,ot,Et){return Me===null||Me.tag!==7?(Me=Hl(qe,$e.mode,ot,Et),Me.return=$e,Me):(Me=A(Me,qe),Me.return=$e,Me)}function ct($e,Me,qe){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Me=ky(""+Me,$e.mode,qe),Me.return=$e,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case y:return qe=dp(Me.type,Me.key,Me.props,null,$e.mode,qe),oh(qe,Me),qe.return=$e,qe;case v:return Me=hu(Me,$e.mode,qe),Me.return=$e,Me;case F:var ot=Me._init;return Me=ot(Me._payload),ct($e,Me,qe)}if(Z(Me)||H(Me))return Me=Hl(Me,$e.mode,qe,null),Me.return=$e,Me;if(typeof Me.then=="function")return ct($e,Dp(Me),qe);if(Me.$$typeof===C)return ct($e,pp($e,Me),qe);nc($e,Me)}return null}function We($e,Me,qe,ot){var Et=Me!==null?Me.key:null;if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return Et!==null?null:he($e,Me,""+qe,ot);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case y:return qe.key===Et?Te($e,Me,qe,ot):null;case v:return qe.key===Et?Ue($e,Me,qe,ot):null;case F:return Et=qe._init,qe=Et(qe._payload),We($e,Me,qe,ot)}if(Z(qe)||H(qe))return Et!==null?null:it($e,Me,qe,ot,null);if(typeof qe.then=="function")return We($e,Me,Dp(qe),ot);if(qe.$$typeof===C)return We($e,Me,pp($e,qe),ot);nc($e,qe)}return null}function He($e,Me,qe,ot,Et){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return $e=$e.get(qe)||null,he(Me,$e,""+ot,Et);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case y:return $e=$e.get(ot.key===null?qe:ot.key)||null,Te(Me,$e,ot,Et);case v:return $e=$e.get(ot.key===null?qe:ot.key)||null,Ue(Me,$e,ot,Et);case F:var bn=ot._init;return ot=bn(ot._payload),He($e,Me,qe,ot,Et)}if(Z(ot)||H(ot))return $e=$e.get(qe)||null,it(Me,$e,ot,Et,null);if(typeof ot.then=="function")return He($e,Me,qe,Dp(ot),Et);if(ot.$$typeof===C)return He($e,Me,qe,pp(Me,ot),Et);nc(Me,ot)}return null}function Gt($e,Me,qe,ot){for(var Et=null,bn=null,Lt=Me,Wt=Me=0,ci=null;Lt!==null&&Wt<qe.length;Wt++){Lt.index>Wt?(ci=Lt,Lt=null):ci=Lt.sibling;var Rn=We($e,Lt,qe[Wt],ot);if(Rn===null){Lt===null&&(Lt=ci);break}d&&Lt&&Rn.alternate===null&&h($e,Lt),Me=R(Rn,Me,Wt),bn===null?Et=Rn:bn.sibling=Rn,bn=Rn,Lt=ci}if(Wt===qe.length)return m($e,Lt),_n&&Gl($e,Wt),Et;if(Lt===null){for(;Wt<qe.length;Wt++)Lt=ct($e,qe[Wt],ot),Lt!==null&&(Me=R(Lt,Me,Wt),bn===null?Et=Lt:bn.sibling=Lt,bn=Lt);return _n&&Gl($e,Wt),Et}for(Lt=N(Lt);Wt<qe.length;Wt++)ci=He(Lt,$e,Wt,qe[Wt],ot),ci!==null&&(d&&ci.alternate!==null&&Lt.delete(ci.key===null?Wt:ci.key),Me=R(ci,Me,Wt),bn===null?Et=ci:bn.sibling=ci,bn=ci);return d&&Lt.forEach(function(ml){return h($e,ml)}),_n&&Gl($e,Wt),Et}function Ht($e,Me,qe,ot){if(qe==null)throw Error(r(151));for(var Et=null,bn=null,Lt=Me,Wt=Me=0,ci=null,Rn=qe.next();Lt!==null&&!Rn.done;Wt++,Rn=qe.next()){Lt.index>Wt?(ci=Lt,Lt=null):ci=Lt.sibling;var ml=We($e,Lt,Rn.value,ot);if(ml===null){Lt===null&&(Lt=ci);break}d&&Lt&&ml.alternate===null&&h($e,Lt),Me=R(ml,Me,Wt),bn===null?Et=ml:bn.sibling=ml,bn=ml,Lt=ci}if(Rn.done)return m($e,Lt),_n&&Gl($e,Wt),Et;if(Lt===null){for(;!Rn.done;Wt++,Rn=qe.next())Rn=ct($e,Rn.value,ot),Rn!==null&&(Me=R(Rn,Me,Wt),bn===null?Et=Rn:bn.sibling=Rn,bn=Rn);return _n&&Gl($e,Wt),Et}for(Lt=N(Lt);!Rn.done;Wt++,Rn=qe.next())Rn=He(Lt,$e,Wt,Rn.value,ot),Rn!==null&&(d&&Rn.alternate!==null&&Lt.delete(Rn.key===null?Wt:Rn.key),Me=R(Rn,Me,Wt),bn===null?Et=Rn:bn.sibling=Rn,bn=Rn);return d&&Lt.forEach(function(fC){return h($e,fC)}),_n&&Gl($e,Wt),Et}function er($e,Me,qe,ot){if(typeof qe=="object"&&qe!==null&&qe.type===x&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case y:e:{for(var Et=qe.key;Me!==null;){if(Me.key===Et){if(Et=qe.type,Et===x){if(Me.tag===7){m($e,Me.sibling),ot=A(Me,qe.props.children),ot.return=$e,$e=ot;break e}}else if(Me.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===F&&rc(Et)===Me.type){m($e,Me.sibling),ot=A(Me,qe.props),oh(ot,qe),ot.return=$e,$e=ot;break e}m($e,Me);break}else h($e,Me);Me=Me.sibling}qe.type===x?(ot=Hl(qe.props.children,$e.mode,ot,qe.key),ot.return=$e,$e=ot):(ot=dp(qe.type,qe.key,qe.props,null,$e.mode,ot),oh(ot,qe),ot.return=$e,$e=ot)}return J($e);case v:e:{for(Et=qe.key;Me!==null;){if(Me.key===Et)if(Me.tag===4&&Me.stateNode.containerInfo===qe.containerInfo&&Me.stateNode.implementation===qe.implementation){m($e,Me.sibling),ot=A(Me,qe.children||[]),ot.return=$e,$e=ot;break e}else{m($e,Me);break}else h($e,Me);Me=Me.sibling}ot=hu(qe,$e.mode,ot),ot.return=$e,$e=ot}return J($e);case F:return Et=qe._init,qe=Et(qe._payload),er($e,Me,qe,ot)}if(Z(qe))return Gt($e,Me,qe,ot);if(H(qe)){if(Et=H(qe),typeof Et!="function")throw Error(r(150));return qe=Et.call(qe),Ht($e,Me,qe,ot)}if(typeof qe.then=="function")return er($e,Me,Dp(qe),ot);if(qe.$$typeof===C)return er($e,Me,pp($e,qe),ot);nc($e,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint"?(qe=""+qe,Me!==null&&Me.tag===6?(m($e,Me.sibling),ot=A(Me,qe),ot.return=$e,$e=ot):(m($e,Me),ot=ky(qe,$e.mode,ot),ot.return=$e,$e=ot),J($e)):m($e,Me)}return function($e,Me,qe,ot){try{Wi=0;var Et=er($e,Me,qe,ot);return Xr=null,Et}catch(Lt){if(Lt===Di||Lt===gp)throw Lt;var bn=zi(29,Lt,null,$e.mode);return bn.lanes=ot,bn.return=$e,bn}finally{}}}var ic=iv(!0),s1=iv(!1),ma=fe(null),Mi=null;function Ua(d){var h=d.alternate;Y(Dr,Dr.current&1),Y(ma,d),Mi===null&&(h===null||Xl.current!==null||h.memoizedState!==null)&&(Mi=d)}function o1(d){if(d.tag===22){if(Y(Dr,Dr.current),Y(ma,d),Mi===null){var h=d.alternate;h!==null&&h.memoizedState!==null&&(Mi=d)}}else fo()}function fo(){Y(Dr,Dr.current),Y(ma,ma.current)}function Ms(d){me(ma),Mi===d&&(Mi=null),me(Dr)}var Dr=fe(0);function lh(d){for(var h=d;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||Ri(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function ju(d,h,m,N){h=d.memoizedState,m=m(N,h),m=m==null?h:f({},h,m),d.memoizedState=m,d.lanes===0&&(d.updateQueue.baseState=m)}var ch={enqueueSetState:function(d,h,m){d=d._reactInternals;var N=_i(),A=Qo(N);A.payload=h,m!=null&&(A.callback=m),h=lo(d,A,N),h!==null&&(va(h,d,N),Wd(h,d,N))},enqueueReplaceState:function(d,h,m){d=d._reactInternals;var N=_i(),A=Qo(N);A.tag=1,A.payload=h,m!=null&&(A.callback=m),h=lo(d,A,N),h!==null&&(va(h,d,N),Wd(h,d,N))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var m=_i(),N=Qo(m);N.tag=2,h!=null&&(N.callback=h),h=lo(d,N,m),h!==null&&(va(h,d,m),Wd(h,d,m))}};function uh(d,h,m,N,A,R,J){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(N,R,J):h.prototype&&h.prototype.isPureReactComponent?!Ps(m,N)||!Ps(A,R):!0}function l1(d,h,m,N){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,N),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,N),h.state!==d&&ch.enqueueReplaceState(h,h.state,null)}function el(d,h){var m=h;if("ref"in h){m={};for(var N in h)N!=="ref"&&(m[N]=h[N])}if(d=d.defaultProps){m===h&&(m=f({},m));for(var A in d)m[A]===void 0&&(m[A]=d[A])}return m}var ac=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function av(d){ac(d)}function Mp(d){console.error(d)}function c1(d){ac(d)}function dh(d,h){try{var m=d.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(N){setTimeout(function(){throw N})}}function Is(d,h,m){try{var N=d.onCaughtError;N(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Ip(d,h,m){return m=Qo(m),m.tag=3,m.payload={element:null},m.callback=function(){dh(d,h)},m}function sv(d){return d=Qo(d),d.tag=3,d}function u1(d,h,m,N){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var R=N.value;d.payload=function(){return A(R)},d.callback=function(){Is(h,m,N)}}var J=m.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(d.callback=function(){Is(h,m,N),typeof A!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var he=N.stack;this.componentDidCatch(N.value,{componentStack:he!==null?he:""})})}function d1(d,h,m,N,A){if(m.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(h=m.alternate,h!==null&&Vd(h,m,A,!0),m=ma.current,m!==null){switch(m.tag){case 13:return Mi===null?_v():m.alternate===null&&Mr===0&&(Mr=3),m.flags&=-257,m.flags|=65536,m.lanes=A,N===Iy?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([N]):h.add(N),Ev(d,N,A)),!1;case 22:return m.flags|=65536,N===Iy?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([N])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([N]):m.add(N)),Ev(d,N,A)),!1}throw Error(r(435,m.tag))}return Ev(d,N,A),_v(),!1}if(_n)return h=ma.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=A,N!==fu&&(d=Error(r(422),{cause:N}),Ko(Pi(d,m)))):(N!==fu&&(h=Error(r(423),{cause:N}),Ko(Pi(h,m))),d=d.current.alternate,d.flags|=65536,A&=-A,d.lanes|=A,N=Pi(N,m),A=Ip(d.stateNode,N,A),ls(d,A),Mr!==4&&(Mr=2)),!1;var R=Error(r(520),{cause:N});if(R=Pi(R,m),jh===null?jh=[R]:jh.push(R),Mr!==4&&(Mr=2),h===null)return!0;N=Pi(N,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,d=A&-A,m.lanes|=d,d=Ip(m.stateNode,N,d),ls(m,d),!1;case 1:if(h=m.type,R=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(sl===null||!sl.has(R))))return m.flags|=65536,A&=-A,m.lanes|=A,A=sv(A),u1(A,d,m,N),ls(m,A),!1}m=m.return}while(m!==null);return!1}var h1=Error(r(461)),si=!1;function yr(d,h,m,N){h.child=d===null?s1(h,null,m,N):ic(h,d.child,m,N)}function Rp(d,h,m,N,A){m=m.render;var R=h.ref;if("ref"in N){var J={};for(var he in N)he!=="ref"&&(J[he]=N[he])}else J=N;return Kl(h),N=$y(d,h,m,J,R,A),he=zy(),d!==null&&!si?(Zl(d,h,A),po(d,h,A)):(_n&&he&&Oy(h),h.flags|=1,yr(d,h,N,A),h.child)}function Lp(d,h,m,N,A){if(d===null){var R=m.type;return typeof R=="function"&&!Vl(R)&&R.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=R,Fp(d,h,R,N,A)):(d=dp(m.type,null,N,h,h.mode,A),d.ref=h.ref,d.return=h,h.child=d)}if(R=d.child,!ds(d,A)){var J=R.memoizedProps;if(m=m.compare,m=m!==null?m:Ps,m(J,N)&&d.ref===h.ref)return po(d,h,A)}return h.flags|=1,d=Oi(R,N),d.ref=h.ref,d.return=h,h.child=d}function Fp(d,h,m,N,A){if(d!==null){var R=d.memoizedProps;if(Ps(R,N)&&d.ref===h.ref)if(si=!1,h.pendingProps=N=R,ds(d,A))(d.flags&131072)!==0&&(si=!0);else return h.lanes=d.lanes,po(d,h,A)}return wu(d,h,m,N,A)}function hh(d,h,m){var N=h.pendingProps,A=N.children,R=d!==null?d.memoizedState:null;if(N.mode==="hidden"){if((h.flags&128)!==0){if(N=R!==null?R.baseLanes|m:m,d!==null){for(A=h.child=d.child,R=0;A!==null;)R=R|A.lanes|A.childLanes,A=A.sibling;h.childLanes=R&~N}else h.childLanes=0,h.child=null;return sc(d,h,N,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},d!==null&&mp(h,R!==null?R.cachePool:null),R!==null?co(h,R):vp(),o1(h);else return h.lanes=h.childLanes=536870912,sc(d,h,R!==null?R.baseLanes|m:m,m)}else R!==null?(mp(h,R.cachePool),co(h,R),fo(),h.memoizedState=null):(d!==null&&mp(h,null),vp(),fo());return yr(d,h,A,m),h.child}function sc(d,h,m,N){var A=oo();return A=A===null?null:{parent:sr._currentValue,pool:A},h.memoizedState={baseLanes:m,cachePool:A},d!==null&&mp(h,null),vp(),o1(h),d!==null&&Vd(d,h,N,!0),null}function $t(d,h){var m=h.ref;if(m===null)d!==null&&d.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(d===null||d.ref!==m)&&(h.flags|=4194816)}}function wu(d,h,m,N,A){return Kl(h),m=$y(d,h,m,N,void 0,A),N=zy(),d!==null&&!si?(Zl(d,h,A),po(d,h,A)):(_n&&N&&Oy(h),h.flags|=1,yr(d,h,m,A),h.child)}function $p(d,h,m,N,A,R){return Kl(h),h.updateQueue=null,m=W0(h,N,m,A),G0(d),N=zy(),d!==null&&!si?(Zl(d,h,R),po(d,h,R)):(_n&&N&&Oy(h),h.flags|=1,yr(d,h,m,R),h.child)}function tl(d,h,m,N,A){if(Kl(h),h.stateNode===null){var R=Ul,J=m.contextType;typeof J=="object"&&J!==null&&(R=Or(J)),R=new m(N,R),h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=ch,h.stateNode=R,R._reactInternals=h,R=h.stateNode,R.props=N,R.state=h.memoizedState,R.refs={},Ql(h),J=m.contextType,R.context=typeof J=="object"&&J!==null?Or(J):Ul,R.state=h.memoizedState,J=m.getDerivedStateFromProps,typeof J=="function"&&(ju(h,m,J,N),R.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(J=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),J!==R.state&&ch.enqueueReplaceState(R,R.state,null),wi(h,N,R,A),cs(),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308),N=!0}else if(d===null){R=h.stateNode;var he=h.memoizedProps,Te=el(m,he);R.props=Te;var Ue=R.context,it=m.contextType;J=Ul,typeof it=="object"&&it!==null&&(J=Or(it));var ct=m.getDerivedStateFromProps;it=typeof ct=="function"||typeof R.getSnapshotBeforeUpdate=="function",he=h.pendingProps!==he,it||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(he||Ue!==J)&&l1(h,R,N,J),Os=!1;var We=h.memoizedState;R.state=We,wi(h,N,R,A),cs(),Ue=h.memoizedState,he||We!==Ue||Os?(typeof ct=="function"&&(ju(h,m,ct,N),Ue=h.memoizedState),(Te=Os||uh(h,m,Te,N,We,Ue,J))?(it||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(h.flags|=4194308)):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=N,h.memoizedState=Ue),R.props=N,R.state=Ue,R.context=J,N=Te):(typeof R.componentDidMount=="function"&&(h.flags|=4194308),N=!1)}else{R=h.stateNode,gu(d,h),J=h.memoizedProps,it=el(m,J),R.props=it,ct=h.pendingProps,We=R.context,Ue=m.contextType,Te=Ul,typeof Ue=="object"&&Ue!==null&&(Te=Or(Ue)),he=m.getDerivedStateFromProps,(Ue=typeof he=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(J!==ct||We!==Te)&&l1(h,R,N,Te),Os=!1,We=h.memoizedState,R.state=We,wi(h,N,R,A),cs();var He=h.memoizedState;J!==ct||We!==He||Os||d!==null&&d.dependencies!==null&&fp(d.dependencies)?(typeof he=="function"&&(ju(h,m,he,N),He=h.memoizedState),(it=Os||uh(h,m,it,N,We,He,Te)||d!==null&&d.dependencies!==null&&fp(d.dependencies))?(Ue||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(N,He,Te),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(N,He,Te)),typeof R.componentDidUpdate=="function"&&(h.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof R.componentDidUpdate!="function"||J===d.memoizedProps&&We===d.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===d.memoizedProps&&We===d.memoizedState||(h.flags|=1024),h.memoizedProps=N,h.memoizedState=He),R.props=N,R.state=He,R.context=Te,N=it):(typeof R.componentDidUpdate!="function"||J===d.memoizedProps&&We===d.memoizedState||(h.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||J===d.memoizedProps&&We===d.memoizedState||(h.flags|=1024),N=!1)}return R=N,$t(d,h),N=(h.flags&128)!==0,R||N?(R=h.stateNode,m=N&&typeof m.getDerivedStateFromError!="function"?null:R.render(),h.flags|=1,d!==null&&N?(h.child=ic(h,d.child,null,A),h.child=ic(h,null,m,A)):yr(d,h,m,A),h.memoizedState=R.state,d=h.child):d=po(d,h,A),d}function f1(d,h,m,N){return Ud(),h.flags|=256,yr(d,h,m,N),h.child}var fh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bp(d){return{baseLanes:d,cachePool:$0()}}function oi(d,h,m){return d=d!==null?d.childLanes&~m:0,h&&(d|=Ha),d}function p1(d,h,m){var N=h.pendingProps,A=!1,R=(h.flags&128)!==0,J;if((J=R)||(J=d!==null&&d.memoizedState===null?!1:(Dr.current&2)!==0),J&&(A=!0,h.flags&=-129),J=(h.flags&32)!==0,h.flags&=-33,d===null){if(_n){if(A?Ua(h):fo(),_n){var he=Sr,Te;if(Te=he){e:{for(Te=he,he=qi;Te.nodeType!==8;){if(!he){he=null;break e}if(Te=fs(Te.nextSibling),Te===null){he=null;break e}}he=Te}he!==null?(h.memoizedState={dehydrated:he,treeContext:gr!==null?{id:wr,overflow:so}:null,retryLane:536870912,hydrationErrors:null},Te=zi(18,null,null,0),Te.stateNode=he,Te.return=h,h.child=Te,Qr=h,Sr=null,Te=!0):Te=!1}Te||Ba(h)}if(he=h.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return Ri(he)?h.lanes=32:h.lanes=536870912,null;Ms(h)}return he=N.children,N=N.fallback,A?(fo(),A=h.mode,he=ph({mode:"hidden",children:he},A),N=Hl(N,A,m,null),he.return=h,N.return=h,he.sibling=N,h.child=he,A=h.child,A.memoizedState=Bp(m),A.childLanes=oi(d,J,m),h.memoizedState=fh,N):(Ua(h),ov(h,he))}if(Te=d.memoizedState,Te!==null&&(he=Te.dehydrated,he!==null)){if(R)h.flags&256?(Ua(h),h.flags&=-257,h=lv(d,h,m)):h.memoizedState!==null?(fo(),h.child=d.child,h.flags|=128,h=null):(fo(),A=N.fallback,he=h.mode,N=ph({mode:"visible",children:N.children},he),A=Hl(A,he,m,null),A.flags|=2,N.return=h,A.return=h,N.sibling=A,h.child=N,ic(h,d.child,null,m),N=h.child,N.memoizedState=Bp(m),N.childLanes=oi(d,J,m),h.memoizedState=fh,h=A);else if(Ua(h),Ri(he)){if(J=he.nextSibling&&he.nextSibling.dataset,J)var Ue=J.dgst;J=Ue,N=Error(r(419)),N.stack="",N.digest=J,Ko({value:N,source:null,stack:null}),h=lv(d,h,m)}else if(si||Vd(d,h,m,!1),J=(m&d.childLanes)!==0,si||J){if(J=dr,J!==null&&(N=m&-m,N=(N&42)!==0?1:vt(N),N=(N&(J.suspendedLanes|m))!==0?0:N,N!==0&&N!==Te.retryLane))throw Te.retryLane=N,ql(d,N),va(J,d,N),h1;he.data==="$?"||_v(),h=lv(d,h,m)}else he.data==="$?"?(h.flags|=192,h.child=d.child,h=null):(d=Te.treeContext,Sr=fs(he.nextSibling),Qr=h,_n=!0,os=null,qi=!1,d!==null&&(Fa[$a++]=wr,Fa[$a++]=so,Fa[$a++]=gr,wr=d.id,so=d.overflow,gr=h),h=ov(h,N.children),h.flags|=4096);return h}return A?(fo(),A=N.fallback,he=h.mode,Te=d.child,Ue=Te.sibling,N=Oi(Te,{mode:"hidden",children:N.children}),N.subtreeFlags=Te.subtreeFlags&65011712,Ue!==null?A=Oi(Ue,A):(A=Hl(A,he,m,null),A.flags|=2),A.return=h,N.return=h,N.sibling=A,h.child=N,N=A,A=h.child,he=d.child.memoizedState,he===null?he=Bp(m):(Te=he.cachePool,Te!==null?(Ue=sr._currentValue,Te=Te.parent!==Ue?{parent:Ue,pool:Ue}:Te):Te=$0(),he={baseLanes:he.baseLanes|m,cachePool:Te}),A.memoizedState=he,A.childLanes=oi(d,J,m),h.memoizedState=fh,N):(Ua(h),m=d.child,d=m.sibling,m=Oi(m,{mode:"visible",children:N.children}),m.return=h,m.sibling=null,d!==null&&(J=h.deletions,J===null?(h.deletions=[d],h.flags|=16):J.push(d)),h.child=m,h.memoizedState=null,m)}function ov(d,h){return h=ph({mode:"visible",children:h},d.mode),h.return=d,d.child=h}function ph(d,h){return d=zi(22,d,null,h),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function lv(d,h,m){return ic(h,d.child,null,m),d=ov(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function cv(d,h,m){d.lanes|=h;var N=d.alternate;N!==null&&(N.lanes|=h),Ui(d.return,h,m)}function uv(d,h,m,N,A){var R=d.memoizedState;R===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:N,tail:m,tailMode:A}:(R.isBackwards=h,R.rendering=null,R.renderingStartTime=0,R.last=N,R.tail=m,R.tailMode=A)}function m1(d,h,m){var N=h.pendingProps,A=N.revealOrder,R=N.tail;if(yr(d,h,N.children,m),N=Dr.current,(N&2)!==0)N=N&1|2,h.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&cv(d,m,h);else if(d.tag===19)cv(d,m,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}N&=1}switch(Y(Dr,N),A){case"forwards":for(m=h.child,A=null;m!==null;)d=m.alternate,d!==null&&lh(d)===null&&(A=m),m=m.sibling;m=A,m===null?(A=h.child,h.child=null):(A=m.sibling,m.sibling=null),uv(h,!1,A,m,R);break;case"backwards":for(m=null,A=h.child,h.child=null;A!==null;){if(d=A.alternate,d!==null&&lh(d)===null){h.child=A;break}d=A.sibling,A.sibling=m,m=A,A=d}uv(h,!0,m,null,R);break;case"together":uv(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function po(d,h,m){if(d!==null&&(h.dependencies=d.dependencies),al|=h.lanes,(m&h.childLanes)===0)if(d!==null){if(Vd(d,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(d!==null&&h.child!==d.child)throw Error(r(153));if(h.child!==null){for(d=h.child,m=Oi(d,d.pendingProps),h.child=m,m.return=h;d.sibling!==null;)d=d.sibling,m=m.sibling=Oi(d,d.pendingProps),m.return=h;m.sibling=null}return h.child}function ds(d,h){return(d.lanes&h)!==0?!0:(d=d.dependencies,!!(d!==null&&fp(d)))}function Ii(d,h,m){switch(h.tag){case 3:de(h,h.stateNode.containerInfo),fa(h,sr,d.memoizedState.cache),Ud();break;case 27:case 5:oe(h);break;case 4:de(h,h.stateNode.containerInfo);break;case 10:fa(h,h.type,h.memoizedProps.value);break;case 13:var N=h.memoizedState;if(N!==null)return N.dehydrated!==null?(Ua(h),h.flags|=128,null):(m&h.child.childLanes)!==0?p1(d,h,m):(Ua(h),d=po(d,h,m),d!==null?d.sibling:null);Ua(h);break;case 19:var A=(d.flags&128)!==0;if(N=(m&h.childLanes)!==0,N||(Vd(d,h,m,!1),N=(m&h.childLanes)!==0),A){if(N)return m1(d,h,m);h.flags|=128}if(A=h.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Y(Dr,Dr.current),N)break;return null;case 22:case 23:return h.lanes=0,hh(d,h,m);case 24:fa(h,sr,d.memoizedState.cache)}return po(d,h,m)}function zp(d,h,m){if(d!==null)if(d.memoizedProps!==h.pendingProps)si=!0;else{if(!ds(d,m)&&(h.flags&128)===0)return si=!1,Ii(d,h,m);si=(d.flags&131072)!==0}else si=!1,_n&&(h.flags&1048576)!==0&&Py(h,Bd,h.index);switch(h.lanes=0,h.tag){case 16:e:{d=h.pendingProps;var N=h.elementType,A=N._init;if(N=A(N._payload),h.type=N,typeof N=="function")Vl(N)?(d=el(N,d),h.tag=1,h=tl(null,h,N,d,m)):(h.tag=0,h=wu(null,h,N,d,m));else{if(N!=null){if(A=N.$$typeof,A===O){h.tag=11,h=Rp(null,h,N,d,m);break e}else if(A===I){h.tag=14,h=Lp(null,h,N,d,m);break e}}throw h=ne(N)||N,Error(r(306,h,""))}}return h;case 0:return wu(d,h,h.type,h.pendingProps,m);case 1:return N=h.type,A=el(N,h.pendingProps),tl(d,h,N,A,m);case 3:e:{if(de(h,h.stateNode.containerInfo),d===null)throw Error(r(387));N=h.pendingProps;var R=h.memoizedState;A=R.element,gu(d,h),wi(h,N,null,m);var J=h.memoizedState;if(N=J.cache,fa(h,sr,N),N!==R.cache&&xn(h,[sr],m,!0),cs(),N=J.element,R.isDehydrated)if(R={element:N,isDehydrated:!1,cache:J.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=f1(d,h,N,m);break e}else if(N!==A){A=Pi(Error(r(424)),h),Ko(A),h=f1(d,h,N,m);break e}else{switch(d=h.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(Sr=fs(d.firstChild),Qr=h,_n=!0,os=null,qi=!0,m=s1(h,null,N,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Ud(),N===A){h=po(d,h,m);break e}yr(d,h,N,m)}h=h.child}return h;case 26:return $t(d,h),d===null?(m=dj(h.type,null,h.pendingProps,null))?h.memoizedState=m:_n||(m=h.type,d=h.pendingProps,N=cc(Ne.current).createElement(m),N[bt]=h,N[Dt]=d,ei(N,m,d),ai(N),h.stateNode=N):h.memoizedState=dj(h.type,d.memoizedProps,h.pendingProps,d.memoizedState),null;case 27:return oe(h),d===null&&_n&&(N=h.stateNode=lj(h.type,h.pendingProps,Ne.current),Qr=h,qi=!0,A=Sr,Ga(h.type)?(Lv=A,Sr=fs(N.firstChild)):Sr=A),yr(d,h,h.pendingProps.children,m),$t(d,h),d===null&&(h.flags|=4194304),h.child;case 5:return d===null&&_n&&((A=N=Sr)&&(N=sj(N,h.type,h.pendingProps,qi),N!==null?(h.stateNode=N,Qr=h,Sr=fs(N.firstChild),qi=!1,A=!0):A=!1),A||Ba(h)),oe(h),A=h.type,R=h.pendingProps,J=d!==null?d.memoizedProps:null,N=R.children,im(A,R)?N=null:J!==null&&im(A,J)&&(h.flags|=32),h.memoizedState!==null&&(A=$y(d,h,By,null,null,m),zu._currentValue=A),$t(d,h),yr(d,h,N,m),h.child;case 6:return d===null&&_n&&((d=m=Sr)&&(m=sm(m,h.pendingProps,qi),m!==null?(h.stateNode=m,Qr=h,Sr=null,d=!0):d=!1),d||Ba(h)),null;case 13:return p1(d,h,m);case 4:return de(h,h.stateNode.containerInfo),N=h.pendingProps,d===null?h.child=ic(h,null,N,m):yr(d,h,N,m),h.child;case 11:return Rp(d,h,h.type,h.pendingProps,m);case 7:return yr(d,h,h.pendingProps,m),h.child;case 8:return yr(d,h,h.pendingProps.children,m),h.child;case 12:return yr(d,h,h.pendingProps.children,m),h.child;case 10:return N=h.pendingProps,fa(h,h.type,N.value),yr(d,h,N.children,m),h.child;case 9:return A=h.type._context,N=h.pendingProps.children,Kl(h),A=Or(A),N=N(A),h.flags|=1,yr(d,h,N,m),h.child;case 14:return Lp(d,h,h.type,h.pendingProps,m);case 15:return Fp(d,h,h.type,h.pendingProps,m);case 19:return m1(d,h,m);case 31:return N=h.pendingProps,m=h.mode,N={mode:N.mode,children:N.children},d===null?(m=ph(N,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=Oi(d.child,N),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return hh(d,h,m);case 24:return Kl(h),N=Or(sr),d===null?(A=oo(),A===null&&(A=dr,R=Dy(),A.pooledCache=R,R.refCount++,R!==null&&(A.pooledCacheLanes|=m),A=R),h.memoizedState={parent:N,cache:A},Ql(h),fa(h,sr,A)):((d.lanes&m)!==0&&(gu(d,h),wi(h,null,null,m),cs()),A=d.memoizedState,R=h.memoizedState,A.parent!==N?(A={parent:N,cache:N},h.memoizedState=A,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=A),fa(h,sr,N)):(N=R.cache,fa(h,sr,N),N!==A.cache&&xn(h,[sr],m,!0))),yr(d,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function mo(d){d.flags|=4}function qp(d,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!ti(h)){if(h=ma.current,h!==null&&((Dn&4194048)===Dn?Mi!==null:(Dn&62914560)!==Dn&&(Dn&536870912)===0||h!==Mi))throw mu=Iy,B0;d.flags|=8192}}function Up(d,h){h!==null&&(d.flags|=4),d.flags&16384&&(h=d.tag!==22?Pt():536870912,d.lanes|=h,Au|=h)}function mh(d,h){if(!_n)switch(d.tailMode){case"hidden":h=d.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?d.tail=null:m.sibling=null;break;case"collapsed":m=d.tail;for(var N=null;m!==null;)m.alternate!==null&&(N=m),m=m.sibling;N===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:N.sibling=null}}function or(d){var h=d.alternate!==null&&d.alternate.child===d.child,m=0,N=0;if(h)for(var A=d.child;A!==null;)m|=A.lanes|A.childLanes,N|=A.subtreeFlags&65011712,N|=A.flags&65011712,A.return=d,A=A.sibling;else for(A=d.child;A!==null;)m|=A.lanes|A.childLanes,N|=A.subtreeFlags,N|=A.flags,A.return=d,A=A.sibling;return d.subtreeFlags|=N,d.childLanes=m,h}function g1(d,h,m){var N=h.pendingProps;switch(zd(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(h),null;case 1:return or(h),null;case 3:return m=h.stateNode,N=null,d!==null&&(N=d.memoizedState.cache),h.memoizedState.cache!==N&&(h.flags|=2048),za(sr),Q(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(d===null||d.child===null)&&(qd(h)?mo(h):d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,I0())),or(h),null;case 26:return m=h.memoizedState,d===null?(mo(h),m!==null?(or(h),qp(h,m)):(or(h),h.flags&=-16777217)):m?m!==d.memoizedState?(mo(h),or(h),qp(h,m)):(or(h),h.flags&=-16777217):(d.memoizedProps!==N&&mo(h),or(h),h.flags&=-16777217),null;case 27:re(h),m=Ne.current;var A=h.type;if(d!==null&&h.stateNode!=null)d.memoizedProps!==N&&mo(h);else{if(!N){if(h.stateNode===null)throw Error(r(166));return or(h),null}d=xe.current,qd(h)?D0(h):(d=lj(A,N,m),h.stateNode=d,mo(h))}return or(h),null;case 5:if(re(h),m=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==N&&mo(h);else{if(!N){if(h.stateNode===null)throw Error(r(166));return or(h),null}if(d=xe.current,qd(h))D0(h);else{switch(A=cc(Ne.current),d){case 1:d=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:d=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":d=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":d=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":d=A.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof N.is=="string"?A.createElement("select",{is:N.is}):A.createElement("select"),N.multiple?d.multiple=!0:N.size&&(d.size=N.size);break;default:d=typeof N.is=="string"?A.createElement(m,{is:N.is}):A.createElement(m)}}d[bt]=h,d[Dt]=N;e:for(A=h.child;A!==null;){if(A.tag===5||A.tag===6)d.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}h.stateNode=d;e:switch(ei(d,m,N),m){case"button":case"input":case"select":case"textarea":d=!!N.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&mo(h)}}return or(h),h.flags&=-16777217,null;case 6:if(d&&h.stateNode!=null)d.memoizedProps!==N&&mo(h);else{if(typeof N!="string"&&h.stateNode===null)throw Error(r(166));if(d=Ne.current,qd(h)){if(d=h.stateNode,m=h.memoizedProps,N=null,A=Qr,A!==null)switch(A.tag){case 27:case 5:N=A.memoizedProps}d[bt]=h,d=!!(d.nodeValue===m||N!==null&&N.suppressHydrationWarning===!0||nj(d.nodeValue,m)),d||Ba(h)}else d=cc(d).createTextNode(N),d[bt]=h,h.stateNode=d}return or(h),null;case 13:if(N=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(A=qd(h),N!==null&&N.dehydrated!==null){if(d===null){if(!A)throw Error(r(318));if(A=h.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[bt]=h}else Ud(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;or(h),A=!1}else A=I0(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=A),A=!0;if(!A)return h.flags&256?(Ms(h),h):(Ms(h),null)}if(Ms(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=N!==null,d=d!==null&&d.memoizedState!==null,m){N=h.child,A=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(A=N.alternate.memoizedState.cachePool.pool);var R=null;N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(R=N.memoizedState.cachePool.pool),R!==A&&(N.flags|=2048)}return m!==d&&m&&(h.child.flags|=8192),Up(h,h.updateQueue),or(h),null;case 4:return Q(),d===null&&Dv(h.stateNode.containerInfo),or(h),null;case 10:return za(h.type),or(h),null;case 19:if(me(Dr),A=h.memoizedState,A===null)return or(h),null;if(N=(h.flags&128)!==0,R=A.rendering,R===null)if(N)mh(A,!1);else{if(Mr!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(R=lh(d),R!==null){for(h.flags|=128,mh(A,!1),d=R.updateQueue,h.updateQueue=d,Up(h,d),h.subtreeFlags=0,d=m,m=h.child;m!==null;)$d(m,d),m=m.sibling;return Y(Dr,Dr.current&1|2),h.child}d=d.sibling}A.tail!==null&&le()>ku&&(h.flags|=128,N=!0,mh(A,!1),h.lanes=4194304)}else{if(!N)if(d=lh(R),d!==null){if(h.flags|=128,N=!0,d=d.updateQueue,h.updateQueue=d,Up(h,d),mh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!R.alternate&&!_n)return or(h),null}else 2*le()-A.renderingStartTime>ku&&m!==536870912&&(h.flags|=128,N=!0,mh(A,!1),h.lanes=4194304);A.isBackwards?(R.sibling=h.child,h.child=R):(d=A.last,d!==null?d.sibling=R:h.child=R,A.last=R)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=le(),h.sibling=null,d=Dr.current,Y(Dr,N?d&1|2:d&1),h):(or(h),null);case 22:case 23:return Ms(h),Fy(),N=h.memoizedState!==null,d!==null?d.memoizedState!==null!==N&&(h.flags|=8192):N&&(h.flags|=8192),N?(m&536870912)!==0&&(h.flags&128)===0&&(or(h),h.subtreeFlags&6&&(h.flags|=8192)):or(h),m=h.updateQueue,m!==null&&Up(h,m.retryQueue),m=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(m=d.memoizedState.cachePool.pool),N=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(N=h.memoizedState.cachePool.pool),N!==m&&(h.flags|=2048),d!==null&&me(Yl),null;case 24:return m=null,d!==null&&(m=d.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),za(sr),or(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function y1(d,h){switch(zd(h),h.tag){case 1:return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return za(sr),Q(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 26:case 27:case 5:return re(h),null;case 13:if(Ms(h),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Ud()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return me(Dr),null;case 4:return Q(),null;case 10:return za(h.type),null;case 22:case 23:return Ms(h),Fy(),d!==null&&me(Yl),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 24:return za(sr),null;case 25:return null;default:return null}}function v1(d,h){switch(zd(h),h.tag){case 3:za(sr),Q();break;case 26:case 27:case 5:re(h);break;case 4:Q();break;case 13:Ms(h);break;case 19:me(Dr);break;case 10:za(h.type);break;case 22:case 23:Ms(h),Fy(),d!==null&&me(Yl);break;case 24:za(sr)}}function gh(d,h){try{var m=h.updateQueue,N=m!==null?m.lastEffect:null;if(N!==null){var A=N.next;m=A;do{if((m.tag&d)===d){N=void 0;var R=m.create,J=m.inst;N=R(),J.destroy=N}m=m.next}while(m!==A)}}catch(he){lr(h,h.return,he)}}function nl(d,h,m){try{var N=h.updateQueue,A=N!==null?N.lastEffect:null;if(A!==null){var R=A.next;N=R;do{if((N.tag&d)===d){var J=N.inst,he=J.destroy;if(he!==void 0){J.destroy=void 0,A=h;var Te=m,Ue=he;try{Ue()}catch(it){lr(A,Te,it)}}}N=N.next}while(N!==R)}}catch(it){lr(h,h.return,it)}}function x1(d){var h=d.updateQueue;if(h!==null){var m=d.stateNode;try{Ly(h,m)}catch(N){lr(d,d.return,N)}}}function dv(d,h,m){m.props=el(d.type,d.memoizedProps),m.state=d.memoizedState;try{m.componentWillUnmount()}catch(N){lr(d,h,N)}}function Su(d,h){try{var m=d.ref;if(m!==null){switch(d.tag){case 26:case 27:case 5:var N=d.stateNode;break;case 30:N=d.stateNode;break;default:N=d.stateNode}typeof m=="function"?d.refCleanup=m(N):m.current=N}}catch(A){lr(d,h,A)}}function Rs(d,h){var m=d.ref,N=d.refCleanup;if(m!==null)if(typeof N=="function")try{N()}catch(A){lr(d,h,A)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){lr(d,h,A)}else m.current=null}function Vp(d){var h=d.type,m=d.memoizedProps,N=d.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&N.focus();break e;case"img":m.src?N.src=m.src:m.srcSet&&(N.srcset=m.srcSet)}}catch(A){lr(d,d.return,A)}}function Hp(d,h,m){try{var N=d.stateNode;G_(N,d.type,m,h),N[Dt]=h}catch(A){lr(d,d.return,A)}}function Nu(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&Ga(d.type)||d.tag===4}function yh(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Nu(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&Ga(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Gp(d,h,m){var N=d.tag;if(N===5||N===6)d=d.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(d,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(d),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=nm));else if(N!==4&&(N===27&&Ga(d.type)&&(m=d.stateNode,h=null),d=d.child,d!==null))for(Gp(d,h,m),d=d.sibling;d!==null;)Gp(d,h,m),d=d.sibling}function vh(d,h,m){var N=d.tag;if(N===5||N===6)d=d.stateNode,h?m.insertBefore(d,h):m.appendChild(d);else if(N!==4&&(N===27&&Ga(d.type)&&(m=d.stateNode),d=d.child,d!==null))for(vh(d,h,m),d=d.sibling;d!==null;)vh(d,h,m),d=d.sibling}function xh(d){var h=d.stateNode,m=d.memoizedProps;try{for(var N=d.type,A=h.attributes;A.length;)h.removeAttributeNode(A[0]);ei(h,N,m),h[bt]=d,h[Dt]=m}catch(R){lr(d,d.return,R)}}var Ls=!1,Vn=!1,go=!1,b1=typeof WeakSet=="function"?WeakSet:Set,Jr=null;function O_(d,h){if(d=d.containerInfo,hs=um,d=P0(d),Ty(d)){if("selectionStart"in d)var m={start:d.selectionStart,end:d.selectionEnd};else e:{m=(m=d.ownerDocument)&&m.defaultView||window;var N=m.getSelection&&m.getSelection();if(N&&N.rangeCount!==0){m=N.anchorNode;var A=N.anchorOffset,R=N.focusNode;N=N.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var J=0,he=-1,Te=-1,Ue=0,it=0,ct=d,We=null;t:for(;;){for(var He;ct!==m||A!==0&&ct.nodeType!==3||(he=J+A),ct!==R||N!==0&&ct.nodeType!==3||(Te=J+N),ct.nodeType===3&&(J+=ct.nodeValue.length),(He=ct.firstChild)!==null;)We=ct,ct=He;for(;;){if(ct===d)break t;if(We===m&&++Ue===A&&(he=J),We===R&&++it===N&&(Te=J),(He=ct.nextSibling)!==null)break;ct=We,We=ct.parentNode}ct=He}m=he===-1||Te===-1?null:{start:he,end:Te}}else m=null}m=m||{start:0,end:0}}else m=null;for(rm={focusedElem:d,selectionRange:m},um=!1,Jr=h;Jr!==null;)if(h=Jr,d=h.child,(h.subtreeFlags&1024)!==0&&d!==null)d.return=h,Jr=d;else for(;Jr!==null;){switch(h=Jr,R=h.alternate,d=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&R!==null){d=void 0,m=h,A=R.memoizedProps,R=R.memoizedState,N=m.stateNode;try{var Gt=el(m.type,A,m.elementType===m.type);d=N.getSnapshotBeforeUpdate(Gt,R),N.__reactInternalSnapshotBeforeUpdate=d}catch(Ht){lr(m,m.return,Ht)}}break;case 3:if((d&1024)!==0){if(d=h.stateNode.containerInfo,m=d.nodeType,m===9)Rv(d);else if(m===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":Rv(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=h.sibling,d!==null){d.return=h.return,Jr=d;break}Jr=h.return}}function j1(d,h,m){var N=m.flags;switch(m.tag){case 0:case 11:case 15:rl(d,m),N&4&&gh(5,m);break;case 1:if(rl(d,m),N&4)if(d=m.stateNode,h===null)try{d.componentDidMount()}catch(J){lr(m,m.return,J)}else{var A=el(m.type,h.memoizedProps);h=h.memoizedState;try{d.componentDidUpdate(A,h,d.__reactInternalSnapshotBeforeUpdate)}catch(J){lr(m,m.return,J)}}N&64&&x1(m),N&512&&Su(m,m.return);break;case 3:if(rl(d,m),N&64&&(d=m.updateQueue,d!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{Ly(d,h)}catch(J){lr(m,m.return,J)}}break;case 27:h===null&&N&4&&xh(m);case 26:case 5:rl(d,m),h===null&&N&4&&Vp(m),N&512&&Su(m,m.return);break;case 12:rl(d,m);break;case 13:rl(d,m),N&4&&N1(d,m),N&64&&(d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(m=Xp.bind(null,m),Ru(d,m))));break;case 22:if(N=m.memoizedState!==null||Ls,!N){h=h!==null&&h.memoizedState!==null||Vn,A=Ls;var R=Vn;Ls=N,(Vn=h)&&!R?vo(d,m,(m.subtreeFlags&8772)!==0):rl(d,m),Ls=A,Vn=R}break;case 30:break;default:rl(d,m)}}function w1(d){var h=d.alternate;h!==null&&(d.alternate=null,w1(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&ty(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Nr=null,Ki=!1;function yo(d,h,m){for(m=m.child;m!==null;)S1(d,h,m),m=m.sibling}function S1(d,h,m){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(be,m)}catch{}switch(m.tag){case 26:Vn||Rs(m,h),yo(d,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Vn||Rs(m,h);var N=Nr,A=Ki;Ga(m.type)&&(Nr=m.stateNode,Ki=!1),yo(d,h,m),kh(m.stateNode),Nr=N,Ki=A;break;case 5:Vn||Rs(m,h);case 6:if(N=Nr,A=Ki,Nr=null,yo(d,h,m),Nr=N,Ki=A,Nr!==null)if(Ki)try{(Nr.nodeType===9?Nr.body:Nr.nodeName==="HTML"?Nr.ownerDocument.body:Nr).removeChild(m.stateNode)}catch(R){lr(m,h,R)}else try{Nr.removeChild(m.stateNode)}catch(R){lr(m,h,R)}break;case 18:Nr!==null&&(Ki?(d=Nr,am(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,m.stateNode),Fh(d)):am(Nr,m.stateNode));break;case 4:N=Nr,A=Ki,Nr=m.stateNode.containerInfo,Ki=!0,yo(d,h,m),Nr=N,Ki=A;break;case 0:case 11:case 14:case 15:Vn||nl(2,m,h),Vn||nl(4,m,h),yo(d,h,m);break;case 1:Vn||(Rs(m,h),N=m.stateNode,typeof N.componentWillUnmount=="function"&&dv(m,h,N)),yo(d,h,m);break;case 21:yo(d,h,m);break;case 22:Vn=(N=Vn)||m.memoizedState!==null,yo(d,h,m),Vn=N;break;default:yo(d,h,m)}}function N1(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Fh(d)}catch(m){lr(h,h.return,m)}}function D_(d){switch(d.tag){case 13:case 19:var h=d.stateNode;return h===null&&(h=d.stateNode=new b1),h;case 22:return d=d.stateNode,h=d._retryCache,h===null&&(h=d._retryCache=new b1),h;default:throw Error(r(435,d.tag))}}function hv(d,h){var m=D_(d);h.forEach(function(N){var A=$_.bind(null,d,N);m.has(N)||(m.add(N),N.then(A,A))})}function ga(d,h){var m=h.deletions;if(m!==null)for(var N=0;N<m.length;N++){var A=m[N],R=d,J=h,he=J;e:for(;he!==null;){switch(he.tag){case 27:if(Ga(he.type)){Nr=he.stateNode,Ki=!1;break e}break;case 5:Nr=he.stateNode,Ki=!1;break e;case 3:case 4:Nr=he.stateNode.containerInfo,Ki=!0;break e}he=he.return}if(Nr===null)throw Error(r(160));S1(R,J,A),Nr=null,Ki=!1,R=A.alternate,R!==null&&(R.return=null),A.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)fv(h,d),h=h.sibling}var Va=null;function fv(d,h){var m=d.alternate,N=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:ga(h,d),Yi(d),N&4&&(nl(3,d,d.return),gh(3,d),nl(5,d,d.return));break;case 1:ga(h,d),Yi(d),N&512&&(Vn||m===null||Rs(m,m.return)),N&64&&Ls&&(d=d.updateQueue,d!==null&&(N=d.callbacks,N!==null&&(m=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=m===null?N:m.concat(N))));break;case 26:var A=Va;if(ga(h,d),Yi(d),N&512&&(Vn||m===null||Rs(m,m.return)),N&4){var R=m!==null?m.memoizedState:null;if(N=d.memoizedState,m===null)if(N===null)if(d.stateNode===null){e:{N=d.type,m=d.memoizedProps,A=A.ownerDocument||A;t:switch(N){case"title":R=A.getElementsByTagName("title")[0],(!R||R[$o]||R[bt]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=A.createElement(N),A.head.insertBefore(R,A.querySelector("head > title"))),ei(R,N,m),R[bt]=d,ai(R),N=R;break e;case"link":var J=pj("link","href",A).get(N+(m.href||""));if(J){for(var he=0;he<J.length;he++)if(R=J[he],R.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&R.getAttribute("rel")===(m.rel==null?null:m.rel)&&R.getAttribute("title")===(m.title==null?null:m.title)&&R.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){J.splice(he,1);break t}}R=A.createElement(N),ei(R,N,m),A.head.appendChild(R);break;case"meta":if(J=pj("meta","content",A).get(N+(m.content||""))){for(he=0;he<J.length;he++)if(R=J[he],R.getAttribute("content")===(m.content==null?null:""+m.content)&&R.getAttribute("name")===(m.name==null?null:m.name)&&R.getAttribute("property")===(m.property==null?null:m.property)&&R.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&R.getAttribute("charset")===(m.charSet==null?null:m.charSet)){J.splice(he,1);break t}}R=A.createElement(N),ei(R,N,m),A.head.appendChild(R);break;default:throw Error(r(468,N))}R[bt]=d,ai(R),N=R}d.stateNode=N}else mj(A,d.type,d.stateNode);else d.stateNode=fj(A,N,d.memoizedProps);else R!==N?(R===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):R.count--,N===null?mj(A,d.type,d.stateNode):fj(A,N,d.memoizedProps)):N===null&&d.stateNode!==null&&Hp(d,d.memoizedProps,m.memoizedProps)}break;case 27:ga(h,d),Yi(d),N&512&&(Vn||m===null||Rs(m,m.return)),m!==null&&N&4&&Hp(d,d.memoizedProps,m.memoizedProps);break;case 5:if(ga(h,d),Yi(d),N&512&&(Vn||m===null||Rs(m,m.return)),d.flags&32){A=d.stateNode;try{Bo(A,"")}catch(He){lr(d,d.return,He)}}N&4&&d.stateNode!=null&&(A=d.memoizedProps,Hp(d,A,m!==null?m.memoizedProps:A)),N&1024&&(go=!0);break;case 6:if(ga(h,d),Yi(d),N&4){if(d.stateNode===null)throw Error(r(162));N=d.memoizedProps,m=d.stateNode;try{m.nodeValue=N}catch(He){lr(d,d.return,He)}}break;case 3:if(Bu=null,A=Va,Va=ln(h.containerInfo),ga(h,d),Va=A,Yi(d),N&4&&m!==null&&m.memoizedState.isDehydrated)try{Fh(h.containerInfo)}catch(He){lr(d,d.return,He)}go&&(go=!1,_1(d));break;case 4:N=Va,Va=ln(d.stateNode.containerInfo),ga(h,d),Yi(d),Va=N;break;case 12:ga(h,d),Yi(d);break;case 13:ga(h,d),Yi(d),d.child.flags&8192&&d.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(bv=le()),N&4&&(N=d.updateQueue,N!==null&&(d.updateQueue=null,hv(d,N)));break;case 22:A=d.memoizedState!==null;var Te=m!==null&&m.memoizedState!==null,Ue=Ls,it=Vn;if(Ls=Ue||A,Vn=it||Te,ga(h,d),Vn=it,Ls=Ue,Yi(d),N&8192)e:for(h=d.stateNode,h._visibility=A?h._visibility&-2:h._visibility|1,A&&(m===null||Te||Ls||Vn||oc(d)),m=null,h=d;;){if(h.tag===5||h.tag===26){if(m===null){Te=m=h;try{if(R=Te.stateNode,A)J=R.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{he=Te.stateNode;var ct=Te.memoizedProps.style,We=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;he.style.display=We==null||typeof We=="boolean"?"":(""+We).trim()}}catch(He){lr(Te,Te.return,He)}}}else if(h.tag===6){if(m===null){Te=h;try{Te.stateNode.nodeValue=A?"":Te.memoizedProps}catch(He){lr(Te,Te.return,He)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===d)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}N&4&&(N=d.updateQueue,N!==null&&(m=N.retryQueue,m!==null&&(N.retryQueue=null,hv(d,m))));break;case 19:ga(h,d),Yi(d),N&4&&(N=d.updateQueue,N!==null&&(d.updateQueue=null,hv(d,N)));break;case 30:break;case 21:break;default:ga(h,d),Yi(d)}}function Yi(d){var h=d.flags;if(h&2){try{for(var m,N=d.return;N!==null;){if(Nu(N)){m=N;break}N=N.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var A=m.stateNode,R=yh(d);vh(d,R,A);break;case 5:var J=m.stateNode;m.flags&32&&(Bo(J,""),m.flags&=-33);var he=yh(d);vh(d,he,J);break;case 3:case 4:var Te=m.stateNode.containerInfo,Ue=yh(d);Gp(d,Ue,Te);break;default:throw Error(r(161))}}catch(it){lr(d,d.return,it)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function _1(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var h=d;_1(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),d=d.sibling}}function rl(d,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)j1(d,h.alternate,h),h=h.sibling}function oc(d){for(d=d.child;d!==null;){var h=d;switch(h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return),oc(h);break;case 1:Rs(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&dv(h,h.return,m),oc(h);break;case 27:kh(h.stateNode);case 26:case 5:Rs(h,h.return),oc(h);break;case 22:h.memoizedState===null&&oc(h);break;case 30:oc(h);break;default:oc(h)}d=d.sibling}}function vo(d,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var N=h.alternate,A=d,R=h,J=R.flags;switch(R.tag){case 0:case 11:case 15:vo(A,R,m),gh(4,R);break;case 1:if(vo(A,R,m),N=R,A=N.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ue){lr(N,N.return,Ue)}if(N=R,A=N.updateQueue,A!==null){var he=N.stateNode;try{var Te=A.shared.hiddenCallbacks;if(Te!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Te.length;A++)V0(Te[A],he)}catch(Ue){lr(N,N.return,Ue)}}m&&J&64&&x1(R),Su(R,R.return);break;case 27:xh(R);case 26:case 5:vo(A,R,m),m&&N===null&&J&4&&Vp(R),Su(R,R.return);break;case 12:vo(A,R,m);break;case 13:vo(A,R,m),m&&J&4&&N1(A,R);break;case 22:R.memoizedState===null&&vo(A,R,m),Su(R,R.return);break;case 30:break;default:vo(A,R,m)}h=h.sibling}}function pv(d,h){var m=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(m=d.memoizedState.cachePool.pool),d=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(d=h.memoizedState.cachePool.pool),d!==m&&(d!=null&&d.refCount++,m!=null&&Hd(m))}function mv(d,h){d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&Hd(d))}function Fs(d,h,m,N){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)C1(d,h,m,N),h=h.sibling}function C1(d,h,m,N){var A=h.flags;switch(h.tag){case 0:case 11:case 15:Fs(d,h,m,N),A&2048&&gh(9,h);break;case 1:Fs(d,h,m,N);break;case 3:Fs(d,h,m,N),A&2048&&(d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&Hd(d)));break;case 12:if(A&2048){Fs(d,h,m,N),d=h.stateNode;try{var R=h.memoizedProps,J=R.id,he=R.onPostCommit;typeof he=="function"&&he(J,h.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(Te){lr(h,h.return,Te)}}else Fs(d,h,m,N);break;case 13:Fs(d,h,m,N);break;case 23:break;case 22:R=h.stateNode,J=h.alternate,h.memoizedState!==null?R._visibility&2?Fs(d,h,m,N):bh(d,h):R._visibility&2?Fs(d,h,m,N):(R._visibility|=2,_u(d,h,m,N,(h.subtreeFlags&10256)!==0)),A&2048&&pv(J,h);break;case 24:Fs(d,h,m,N),A&2048&&mv(h.alternate,h);break;default:Fs(d,h,m,N)}}function _u(d,h,m,N,A){for(A=A&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var R=d,J=h,he=m,Te=N,Ue=J.flags;switch(J.tag){case 0:case 11:case 15:_u(R,J,he,Te,A),gh(8,J);break;case 23:break;case 22:var it=J.stateNode;J.memoizedState!==null?it._visibility&2?_u(R,J,he,Te,A):bh(R,J):(it._visibility|=2,_u(R,J,he,Te,A)),A&&Ue&2048&&pv(J.alternate,J);break;case 24:_u(R,J,he,Te,A),A&&Ue&2048&&mv(J.alternate,J);break;default:_u(R,J,he,Te,A)}h=h.sibling}}function bh(d,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=d,N=h,A=N.flags;switch(N.tag){case 22:bh(m,N),A&2048&&pv(N.alternate,N);break;case 24:bh(m,N),A&2048&&mv(N.alternate,N);break;default:bh(m,N)}h=h.sibling}}var Ni=8192;function Cu(d){if(d.subtreeFlags&Ni)for(d=d.child;d!==null;)T1(d),d=d.sibling}function T1(d){switch(d.tag){case 26:Cu(d),d.flags&Ni&&d.memoizedState!==null&&iC(Va,d.memoizedState,d.memoizedProps);break;case 5:Cu(d);break;case 3:case 4:var h=Va;Va=ln(d.stateNode.containerInfo),Cu(d),Va=h;break;case 22:d.memoizedState===null&&(h=d.alternate,h!==null&&h.memoizedState!==null?(h=Ni,Ni=16777216,Cu(d),Ni=h):Cu(d));break;default:Cu(d)}}function E1(d){var h=d.alternate;if(h!==null&&(d=h.child,d!==null)){h.child=null;do h=d.sibling,d.sibling=null,d=h;while(d!==null)}}function Tu(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];Jr=N,k1(N,d)}E1(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)A1(d),d=d.sibling}function A1(d){switch(d.tag){case 0:case 11:case 15:Tu(d),d.flags&2048&&nl(9,d,d.return);break;case 3:Tu(d);break;case 12:Tu(d);break;case 22:var h=d.stateNode;d.memoizedState!==null&&h._visibility&2&&(d.return===null||d.return.tag!==13)?(h._visibility&=-3,Wp(d)):Tu(d);break;default:Tu(d)}}function Wp(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var N=h[m];Jr=N,k1(N,d)}E1(d)}for(d=d.child;d!==null;){switch(h=d,h.tag){case 0:case 11:case 15:nl(8,h,h.return),Wp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,Wp(h));break;default:Wp(h)}d=d.sibling}}function k1(d,h){for(;Jr!==null;){var m=Jr;switch(m.tag){case 0:case 11:case 15:nl(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var N=m.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:Hd(m.memoizedState.cache)}if(N=m.child,N!==null)N.return=m,Jr=N;else e:for(m=d;Jr!==null;){N=Jr;var A=N.sibling,R=N.return;if(w1(N),N===m){Jr=null;break e}if(A!==null){A.return=R,Jr=A;break e}Jr=R}}}var M_={getCacheForType:function(d){var h=Or(sr),m=h.data.get(d);return m===void 0&&(m=d(),h.data.set(d,m)),m}},gv=typeof WeakMap=="function"?WeakMap:Map,Kn=0,dr=null,Sn=null,Dn=0,Yn=0,ya=null,il=!1,Eu=!1,yv=!1,xo=0,Mr=0,al=0,lc=0,vv=0,Ha=0,Au=0,jh=null,Qi=null,xv=!1,bv=0,ku=1/0,wh=null,sl=null,mi=0,ol=null,Pu=null,Ou=0,jv=0,wv=null,P1=null,Du=0,Sv=null;function _i(){if((Kn&2)!==0&&Dn!==0)return Dn&-Dn;if(q.T!==null){var d=pu;return d!==0?d:em()}return ur()}function O1(){Ha===0&&(Ha=(Dn&536870912)===0||_n?wt():536870912);var d=ma.current;return d!==null&&(d.flags|=32),Ha}function va(d,h,m){(d===dr&&(Yn===2||Yn===9)||d.cancelPendingCommit!==null)&&(Mu(d,0),ll(d,Dn,Ha,!1)),Ee(d,m),((Kn&2)===0||d!==dr)&&(d===dr&&((Kn&2)===0&&(lc|=m),Mr===4&&ll(d,Dn,Ha,!1)),$s(d))}function D1(d,h,m){if((Kn&6)!==0)throw Error(r(327));var N=!m&&(h&124)===0&&(h&d.expiredLanes)===0||Xe(d,h),A=N?L_(d,h):Cv(d,h,!0),R=N;do{if(A===0){Eu&&!N&&ll(d,h,0,!1);break}else{if(m=d.current.alternate,R&&!I_(m)){A=Cv(d,h,!1),R=!1;continue}if(A===2){if(R=h,d.errorRecoveryDisabledLanes&R)var J=0;else J=d.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){h=J;e:{var he=d;A=jh;var Te=he.current.memoizedState.isDehydrated;if(Te&&(Mu(he,J).flags|=256),J=Cv(he,J,!1),J!==2){if(yv&&!Te){he.errorRecoveryDisabledLanes|=R,lc|=R,A=4;break e}R=Qi,Qi=A,R!==null&&(Qi===null?Qi=R:Qi.push.apply(Qi,R))}A=J}if(R=!1,A!==2)continue}}if(A===1){Mu(d,0),ll(d,h,0,!0);break}e:{switch(N=d,R=A,R){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:ll(N,h,Ha,!il);break e;case 2:Qi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(A=bv+300-le(),10<A)){if(ll(N,h,Ha,!il),ze(N,0,!0)!==0)break e;N.timeoutHandle=rj(M1.bind(null,N,m,Qi,wh,xv,h,Ha,lc,Au,il,R,2,-0,0),A);break e}M1(N,m,Qi,wh,xv,h,Ha,lc,Au,il,R,0,-0,0)}}break}while(!0);$s(d)}function M1(d,h,m,N,A,R,J,he,Te,Ue,it,ct,We,He){if(d.timeoutHandle=-1,ct=h.subtreeFlags,(ct&8192||(ct&16785408)===16785408)&&(li={stylesheets:null,count:0,unsuspend:rC},T1(h),ct=aC(),ct!==null)){d.cancelPendingCommit=ct(Sh.bind(null,d,h,R,m,N,A,J,he,Te,it,1,We,He)),ll(d,R,J,!Ue);return}Sh(d,h,R,m,N,A,J,he,Te)}function I_(d){for(var h=d;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var N=0;N<m.length;N++){var A=m[N],R=A.getSnapshot;A=A.value;try{if(!da(R(),A))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ll(d,h,m,N){h&=~vv,h&=~lc,d.suspendedLanes|=h,d.pingedLanes&=~h,N&&(d.warmLanes|=h),N=d.expirationTimes;for(var A=h;0<A;){var R=31-ve(A),J=1<<R;N[R]=-1,A&=~J}m!==0&&Tt(d,m,h)}function Kp(){return(Kn&6)===0?(Ch(0),!1):!0}function Nv(){if(Sn!==null){if(Yn===0)var d=Sn.return;else d=Sn,ue=Yo=null,xp(d),Xr=null,Wi=0,d=Sn;for(;d!==null;)v1(d.alternate,d),d=d.return;Sn=null}}function Mu(d,h){var m=d.timeoutHandle;m!==-1&&(d.timeoutHandle=-1,K_(m)),m=d.cancelPendingCommit,m!==null&&(d.cancelPendingCommit=null,m()),Nv(),dr=d,Sn=m=Oi(d.current,null),Dn=h,Yn=0,ya=null,il=!1,Eu=Xe(d,h),yv=!1,Au=Ha=vv=lc=al=Mr=0,Qi=jh=null,xv=!1,(h&8)!==0&&(h|=h&32);var N=d.entangledLanes;if(N!==0)for(d=d.entanglements,N&=h;0<N;){var A=31-ve(N),R=1<<A;h|=d[A],N&=~R}return xo=h,zl(),m}function I1(d,h){yn=null,q.H=sh,h===Di||h===gp?(h=q0(),Yn=3):h===B0?(h=q0(),Yn=4):Yn=h===h1?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,ya=h,Sn===null&&(Mr=1,dh(d,Pi(h,d.current)))}function R1(){var d=q.H;return q.H=sh,d===null?sh:d}function L1(){var d=q.A;return q.A=M_,d}function _v(){Mr=4,il||(Dn&4194048)!==Dn&&ma.current!==null||(Eu=!0),(al&134217727)===0&&(lc&134217727)===0||dr===null||ll(dr,Dn,Ha,!1)}function Cv(d,h,m){var N=Kn;Kn|=2;var A=R1(),R=L1();(dr!==d||Dn!==h)&&(wh=null,Mu(d,h)),h=!1;var J=Mr;e:do try{if(Yn!==0&&Sn!==null){var he=Sn,Te=ya;switch(Yn){case 8:Nv(),J=6;break e;case 3:case 2:case 9:case 6:ma.current===null&&(h=!0);var Ue=Yn;if(Yn=0,ya=null,Iu(d,he,Te,Ue),m&&Eu){J=0;break e}break;default:Ue=Yn,Yn=0,ya=null,Iu(d,he,Te,Ue)}}R_(),J=Mr;break}catch(it){I1(d,it)}while(!0);return h&&d.shellSuspendCounter++,ue=Yo=null,Kn=N,q.H=A,q.A=R,Sn===null&&(dr=null,Dn=0,zl()),J}function R_(){for(;Sn!==null;)Tv(Sn)}function L_(d,h){var m=Kn;Kn|=2;var N=R1(),A=L1();dr!==d||Dn!==h?(wh=null,ku=le()+500,Mu(d,h)):Eu=Xe(d,h);e:do try{if(Yn!==0&&Sn!==null){h=Sn;var R=ya;t:switch(Yn){case 1:Yn=0,ya=null,Iu(d,h,R,1);break;case 2:case 9:if(z0(R)){Yn=0,ya=null,$1(h);break}h=function(){Yn!==2&&Yn!==9||dr!==d||(Yn=7),$s(d)},R.then(h,h);break e;case 3:Yn=7;break e;case 4:Yn=5;break e;case 7:z0(R)?(Yn=0,ya=null,$1(h)):(Yn=0,ya=null,Iu(d,h,R,7));break;case 5:var J=null;switch(Sn.tag){case 26:J=Sn.memoizedState;case 5:case 27:var he=Sn;if(!J||ti(J)){Yn=0,ya=null;var Te=he.sibling;if(Te!==null)Sn=Te;else{var Ue=he.return;Ue!==null?(Sn=Ue,Yp(Ue)):Sn=null}break t}}Yn=0,ya=null,Iu(d,h,R,5);break;case 6:Yn=0,ya=null,Iu(d,h,R,6);break;case 8:Nv(),Mr=6;break e;default:throw Error(r(462))}}F1();break}catch(it){I1(d,it)}while(!0);return ue=Yo=null,q.H=N,q.A=A,Kn=m,Sn!==null?0:(dr=null,Dn=0,zl(),Mr)}function F1(){for(;Sn!==null&&!ie();)Tv(Sn)}function Tv(d){var h=zp(d.alternate,d,xo);d.memoizedProps=d.pendingProps,h===null?Yp(d):Sn=h}function $1(d){var h=d,m=h.alternate;switch(h.tag){case 15:case 0:h=$p(m,h,h.pendingProps,h.type,void 0,Dn);break;case 11:h=$p(m,h,h.pendingProps,h.type.render,h.ref,Dn);break;case 5:xp(h);default:v1(m,h),h=Sn=$d(h,xo),h=zp(m,h,xo)}d.memoizedProps=d.pendingProps,h===null?Yp(d):Sn=h}function Iu(d,h,m,N){ue=Yo=null,xp(h),Xr=null,Wi=0;var A=h.return;try{if(d1(d,A,h,m,Dn)){Mr=1,dh(d,Pi(m,d.current)),Sn=null;return}}catch(R){if(A!==null)throw Sn=A,R;Mr=1,dh(d,Pi(m,d.current)),Sn=null;return}h.flags&32768?(_n||N===1?d=!0:Eu||(Dn&536870912)!==0?d=!1:(il=d=!0,(N===2||N===9||N===3||N===6)&&(N=ma.current,N!==null&&N.tag===13&&(N.flags|=16384))),B1(h,d)):Yp(h)}function Yp(d){var h=d;do{if((h.flags&32768)!==0){B1(h,il);return}d=h.return;var m=g1(h.alternate,h,xo);if(m!==null){Sn=m;return}if(h=h.sibling,h!==null){Sn=h;return}Sn=h=d}while(h!==null);Mr===0&&(Mr=5)}function B1(d,h){do{var m=y1(d.alternate,d);if(m!==null){m.flags&=32767,Sn=m;return}if(m=d.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(d=d.sibling,d!==null)){Sn=d;return}Sn=d=m}while(d!==null);Mr=6,Sn=null}function Sh(d,h,m,N,A,R,J,he,Te){d.cancelPendingCommit=null;do Qp();while(mi!==0);if((Kn&6)!==0)throw Error(r(327));if(h!==null){if(h===d.current)throw Error(r(177));if(R=h.lanes|h.childLanes,R|=Ay,at(d,m,R,J,he,Te),d===dr&&(Sn=dr=null,Dn=0),Pu=h,ol=d,Ou=m,jv=R,wv=A,P1=N,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,K1(ht,function(){return H1(),null})):(d.callbackNode=null,d.callbackPriority=0),N=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||N){N=q.T,q.T=null,A=K.p,K.p=2,J=Kn,Kn|=4;try{O_(d,h,m)}finally{Kn=J,K.p=A,q.T=N}}mi=1,z1(),q1(),U1()}}function z1(){if(mi===1){mi=0;var d=ol,h=Pu,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=q.T,q.T=null;var N=K.p;K.p=2;var A=Kn;Kn|=4;try{fv(h,d);var R=rm,J=P0(d.containerInfo),he=R.focusedElem,Te=R.selectionRange;if(J!==he&&he&&he.ownerDocument&&k0(he.ownerDocument.documentElement,he)){if(Te!==null&&Ty(he)){var Ue=Te.start,it=Te.end;if(it===void 0&&(it=Ue),"selectionStart"in he)he.selectionStart=Ue,he.selectionEnd=Math.min(it,he.value.length);else{var ct=he.ownerDocument||document,We=ct&&ct.defaultView||window;if(We.getSelection){var He=We.getSelection(),Gt=he.textContent.length,Ht=Math.min(Te.start,Gt),er=Te.end===void 0?Ht:Math.min(Te.end,Gt);!He.extend&&Ht>er&&(J=er,er=Ht,Ht=J);var $e=Cy(he,Ht),Me=Cy(he,er);if($e&&Me&&(He.rangeCount!==1||He.anchorNode!==$e.node||He.anchorOffset!==$e.offset||He.focusNode!==Me.node||He.focusOffset!==Me.offset)){var qe=ct.createRange();qe.setStart($e.node,$e.offset),He.removeAllRanges(),Ht>er?(He.addRange(qe),He.extend(Me.node,Me.offset)):(qe.setEnd(Me.node,Me.offset),He.addRange(qe))}}}}for(ct=[],He=he;He=He.parentNode;)He.nodeType===1&&ct.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof he.focus=="function"&&he.focus(),he=0;he<ct.length;he++){var ot=ct[he];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}um=!!hs,rm=hs=null}finally{Kn=A,K.p=N,q.T=m}}d.current=h,mi=2}}function q1(){if(mi===2){mi=0;var d=ol,h=Pu,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=q.T,q.T=null;var N=K.p;K.p=2;var A=Kn;Kn|=4;try{j1(d,h.alternate,h)}finally{Kn=A,K.p=N,q.T=m}}mi=3}}function U1(){if(mi===4||mi===3){mi=0,pe();var d=ol,h=Pu,m=Ou,N=P1;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?mi=5:(mi=0,Pu=ol=null,V1(d,d.pendingLanes));var A=d.pendingLanes;if(A===0&&(sl=null),It(m),h=h.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(be,h,void 0,(h.current.flags&128)===128)}catch{}if(N!==null){h=q.T,A=K.p,K.p=2,q.T=null;try{for(var R=d.onRecoverableError,J=0;J<N.length;J++){var he=N[J];R(he.value,{componentStack:he.stack})}}finally{q.T=h,K.p=A}}(Ou&3)!==0&&Qp(),$s(d),A=d.pendingLanes,(m&4194090)!==0&&(A&42)!==0?d===Sv?Du++:(Du=0,Sv=d):Du=0,Ch(0)}}function V1(d,h){(d.pooledCacheLanes&=h)===0&&(h=d.pooledCache,h!=null&&(d.pooledCache=null,Hd(h)))}function Qp(d){return z1(),q1(),U1(),H1()}function H1(){if(mi!==5)return!1;var d=ol,h=jv;jv=0;var m=It(Ou),N=q.T,A=K.p;try{K.p=32>m?32:m,q.T=null,m=wv,wv=null;var R=ol,J=Ou;if(mi=0,Pu=ol=null,Ou=0,(Kn&6)!==0)throw Error(r(331));var he=Kn;if(Kn|=4,A1(R.current),C1(R,R.current,J,m),Kn=he,Ch(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(be,R)}catch{}return!0}finally{K.p=A,q.T=N,V1(d,h)}}function G1(d,h,m){h=Pi(m,h),h=Ip(d.stateNode,h,2),d=lo(d,h,2),d!==null&&(Ee(d,2),$s(d))}function lr(d,h,m){if(d.tag===3)G1(d,d,m);else for(;h!==null;){if(h.tag===3){G1(h,d,m);break}else if(h.tag===1){var N=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(sl===null||!sl.has(N))){d=Pi(m,d),m=sv(2),N=lo(h,m,2),N!==null&&(u1(m,N,h,d),Ee(N,2),$s(N));break}}h=h.return}}function Ev(d,h,m){var N=d.pingCache;if(N===null){N=d.pingCache=new gv;var A=new Set;N.set(h,A)}else A=N.get(h),A===void 0&&(A=new Set,N.set(h,A));A.has(m)||(yv=!0,A.add(m),d=F_.bind(null,d,h,m),h.then(d,d))}function F_(d,h,m){var N=d.pingCache;N!==null&&N.delete(h),d.pingedLanes|=d.suspendedLanes&m,d.warmLanes&=~m,dr===d&&(Dn&m)===m&&(Mr===4||Mr===3&&(Dn&62914560)===Dn&&300>le()-bv?(Kn&2)===0&&Mu(d,0):vv|=m,Au===Dn&&(Au=0)),$s(d)}function W1(d,h){h===0&&(h=Pt()),d=ql(d,h),d!==null&&(Ee(d,h),$s(d))}function Xp(d){var h=d.memoizedState,m=0;h!==null&&(m=h.retryLane),W1(d,m)}function $_(d,h){var m=0;switch(d.tag){case 13:var N=d.stateNode,A=d.memoizedState;A!==null&&(m=A.retryLane);break;case 19:N=d.stateNode;break;case 22:N=d.stateNode._retryCache;break;default:throw Error(r(314))}N!==null&&N.delete(h),W1(d,m)}function K1(d,h){return X(d,h)}var Nh=null,cl=null,Jp=!1,_h=!1,Zp=!1,ul=0;function $s(d){d!==cl&&d.next===null&&(cl===null?Nh=cl=d:cl=cl.next=d),_h=!0,Jp||(Jp=!0,Av())}function Ch(d,h){if(!Zp&&_h){Zp=!0;do for(var m=!1,N=Nh;N!==null;){if(d!==0){var A=N.pendingLanes;if(A===0)var R=0;else{var J=N.suspendedLanes,he=N.pingedLanes;R=(1<<31-ve(42|d)+1)-1,R&=A&~(J&~he),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(m=!0,Q1(N,R))}else R=Dn,R=ze(N,N===dr?R:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(R&3)===0||Xe(N,R)||(m=!0,Q1(N,R));N=N.next}while(m);Zp=!1}}function B_(){Th()}function Th(){_h=Jp=!1;var d=0;ul!==0&&(W_()&&(d=ul),ul=0);for(var h=le(),m=null,N=Nh;N!==null;){var A=N.next,R=Eh(N,h);R===0?(N.next=null,m===null?Nh=A:m.next=A,A===null&&(cl=m)):(m=N,(d!==0||(R&3)!==0)&&(_h=!0)),N=A}Ch(d)}function Eh(d,h){for(var m=d.suspendedLanes,N=d.pingedLanes,A=d.expirationTimes,R=d.pendingLanes&-62914561;0<R;){var J=31-ve(R),he=1<<J,Te=A[J];Te===-1?((he&m)===0||(he&N)!==0)&&(A[J]=Je(he,h)):Te<=h&&(d.expiredLanes|=he),R&=~he}if(h=dr,m=Dn,m=ze(d,d===h?m:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),N=d.callbackNode,m===0||d===h&&(Yn===2||Yn===9)||d.cancelPendingCommit!==null)return N!==null&&N!==null&&W(N),d.callbackNode=null,d.callbackPriority=0;if((m&3)===0||Xe(d,m)){if(h=m&-m,h===d.callbackPriority)return h;switch(N!==null&&W(N),It(m)){case 2:case 8:m=et;break;case 32:m=ht;break;case 268435456:m=Fe;break;default:m=ht}return N=Y1.bind(null,d),m=X(m,N),d.callbackPriority=h,d.callbackNode=m,h}return N!==null&&N!==null&&W(N),d.callbackPriority=2,d.callbackNode=null,2}function Y1(d,h){if(mi!==0&&mi!==5)return d.callbackNode=null,d.callbackPriority=0,null;var m=d.callbackNode;if(Qp()&&d.callbackNode!==m)return null;var N=Dn;return N=ze(d,d===dr?N:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),N===0?null:(D1(d,N,h),Eh(d,le()),d.callbackNode!=null&&d.callbackNode===m?Y1.bind(null,d):null)}function Q1(d,h){if(Qp())return null;D1(d,h,!0)}function Av(){Y_(function(){(Kn&6)!==0?X(Ge,B_):Th()})}function em(){return ul===0&&(ul=wt()),ul}function X1(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:kd(""+d)}function J1(d,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,d.id&&m.setAttribute("form",d.id),h.parentNode.insertBefore(m,h),d=new FormData(d),m.parentNode.removeChild(m),d}function z_(d,h,m,N,A){if(h==="submit"&&m&&m.stateNode===A){var R=X1((A[Dt]||null).action),J=N.submitter;J&&(h=(h=J[Dt]||null)?X1(h.formAction):J.getAttribute("formAction"),h!==null&&(R=h,J=null));var he=new Qf("action","action",null,N,A);d.push({event:he,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(ul!==0){var Te=J?J1(A,J):new FormData(A);ih(m,{pending:!0,data:Te,method:A.method,action:R},null,Te)}}else typeof R=="function"&&(he.preventDefault(),Te=J?J1(A,J):new FormData(A),ih(m,{pending:!0,data:Te,method:A.method,action:R},R,Te))},currentTarget:A}]})}}for(var kv=0;kv<zn.length;kv++){var Pv=zn[kv],q_=Pv.toLowerCase(),U_=Pv[0].toUpperCase()+Pv.slice(1);as(q_,"on"+U_)}as(lp,"onAnimationEnd"),as(O0,"onAnimationIteration"),as(ha,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(cp,"onTransitionRun"),as(__,"onTransitionStart"),as(cu,"onTransitionCancel"),as(Id,"onTransitionEnd"),Qc("onMouseEnter",["mouseout","mouseover"]),Qc("onMouseLeave",["mouseout","mouseover"]),Qc("onPointerEnter",["pointerout","pointerover"]),Qc("onPointerLeave",["pointerout","pointerover"]),Fl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ah="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ah));function Z1(d,h){h=(h&4)!==0;for(var m=0;m<d.length;m++){var N=d[m],A=N.event;N=N.listeners;e:{var R=void 0;if(h)for(var J=N.length-1;0<=J;J--){var he=N[J],Te=he.instance,Ue=he.currentTarget;if(he=he.listener,Te!==R&&A.isPropagationStopped())break e;R=he,A.currentTarget=Ue;try{R(A)}catch(it){ac(it)}A.currentTarget=null,R=Te}else for(J=0;J<N.length;J++){if(he=N[J],Te=he.instance,Ue=he.currentTarget,he=he.listener,Te!==R&&A.isPropagationStopped())break e;R=he,A.currentTarget=Ue;try{R(A)}catch(it){ac(it)}A.currentTarget=null,R=Te}}}}function Nn(d,h){var m=h[Ut];m===void 0&&(m=h[Ut]=new Set);var N=d+"__bubble";m.has(N)||(ej(h,d,2,!1),m.add(N))}function Ov(d,h,m){var N=0;h&&(N|=4),ej(m,d,N,h)}var Xi="_reactListening"+Math.random().toString(36).slice(2);function Dv(d){if(!d[Xi]){d[Xi]=!0,a0.forEach(function(m){m!=="selectionchange"&&(V_.has(m)||Ov(m,!1,d),Ov(m,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[Xi]||(h[Xi]=!0,Ov("selectionchange",!1,h))}}function ej(d,h,m,N){switch(xj(h)){case 2:var A=lC;break;case 8:A=qu;break;default:A=Uv}m=A.bind(null,h,m,d),A=void 0,!Od||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(A=!0),N?A!==void 0?d.addEventListener(h,m,{capture:!0,passive:A}):d.addEventListener(h,m,!0):A!==void 0?d.addEventListener(h,m,{passive:A}):d.addEventListener(h,m,!1)}function bo(d,h,m,N,A){var R=N;if((h&1)===0&&(h&2)===0&&N!==null)e:for(;;){if(N===null)return;var J=N.tag;if(J===3||J===4){var he=N.stateNode.containerInfo;if(he===A)break;if(J===4)for(J=N.return;J!==null;){var Te=J.tag;if((Te===3||Te===4)&&J.stateNode.containerInfo===A)return;J=J.return}for(;he!==null;){if(J=Gc(he),J===null)return;if(Te=J.tag,Te===5||Te===6||Te===26||Te===27){N=R=J;continue e}he=he.parentNode}}N=N.return}d0(function(){var Ue=R,it=py(m),ct=[];e:{var We=Rd.get(d);if(We!==void 0){var He=Qf,Gt=d;switch(d){case"keypress":if(Jn(m)===0)break e;case"keydown":case"keyup":He=by;break;case"focusin":Gt="focus",He=Jf;break;case"focusout":Gt="blur",He=Jf;break;case"beforeblur":case"afterblur":He=Jf;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=xy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=g_;break;case lp:case O0:case ha:He=g0;break;case Id:He=y_;break;case"scroll":case"scrollend":He=f_;break;case"wheel":He=x_;break;case"copy":case"cut":case"paste":He=v0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=io;break;case"toggle":case"beforetoggle":He=ep}var Ht=(h&4)!==0,er=!Ht&&(d==="scroll"||d==="scrollend"),$e=Ht?We!==null?We+"Capture":null:We;Ht=[];for(var Me=Ue,qe;Me!==null;){var ot=Me;if(qe=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||qe===null||$e===null||(ot=Pd(Me,$e),ot!=null&&Ht.push(nn(Me,ot,qe))),er)break;Me=Me.return}0<Ht.length&&(We=new He(We,Gt,null,m,it),ct.push({event:We,listeners:Ht}))}}if((h&7)===0){e:{if(We=d==="mouseover"||d==="pointerover",He=d==="mouseout"||d==="pointerout",We&&m!==Kf&&(Gt=m.relatedTarget||m.fromElement)&&(Gc(Gt)||Gt[un]))break e;if((He||We)&&(We=it.window===it?it:(We=it.ownerDocument)?We.defaultView||We.parentWindow:window,He?(Gt=m.relatedTarget||m.toElement,He=Ue,Gt=Gt?Gc(Gt):null,Gt!==null&&(er=s(Gt),Ht=Gt.tag,Gt!==er||Ht!==5&&Ht!==27&&Ht!==6)&&(Gt=null)):(He=null,Gt=Ue),He!==Gt)){if(Ht=qo,ot="onMouseLeave",$e="onMouseEnter",Me="mouse",(d==="pointerout"||d==="pointerover")&&(Ht=io,ot="onPointerLeave",$e="onPointerEnter",Me="pointer"),er=He==null?We:Kc(He),qe=Gt==null?We:Kc(Gt),We=new Ht(ot,Me+"leave",He,m,it),We.target=er,We.relatedTarget=qe,ot=null,Gc(it)===Ue&&(Ht=new Ht($e,Me+"enter",Gt,m,it),Ht.target=qe,Ht.relatedTarget=er,ot=Ht),er=ot,He&&Gt)t:{for(Ht=He,$e=Gt,Me=0,qe=Ht;qe;qe=Zr(qe))Me++;for(qe=0,ot=$e;ot;ot=Zr(ot))qe++;for(;0<Me-qe;)Ht=Zr(Ht),Me--;for(;0<qe-Me;)$e=Zr($e),qe--;for(;Me--;){if(Ht===$e||$e!==null&&Ht===$e.alternate)break t;Ht=Zr(Ht),$e=Zr($e)}Ht=null}else Ht=null;He!==null&&Ir(ct,We,He,Ht,!1),Gt!==null&&er!==null&&Ir(ct,er,Gt,Ht,!0)}}e:{if(We=Ue?Kc(Ue):window,He=We.nodeName&&We.nodeName.toLowerCase(),He==="select"||He==="input"&&We.type==="file")var Et=_0;else if(ip(We))if(C0)Et=w_;else{Et=Ho;var bn=A0}else He=We.nodeName,!He||He.toLowerCase()!=="input"||We.type!=="checkbox"&&We.type!=="radio"?Ue&&fy(Ue.elementType)&&(Et=_0):Et=op;if(Et&&(Et=Et(d,Ue))){au(ct,Et,m,it);break e}bn&&bn(d,We,Ue),d==="focusout"&&Ue&&We.type==="number"&&Ue.memoizedProps.value!=null&&Ad(We,"number",We.value)}switch(bn=Ue?Kc(Ue):window,d){case"focusin":(ip(bn)||bn.contentEditable==="true")&&(lu=bn,Go=Ue,Le=null);break;case"focusout":Le=Go=lu=null;break;case"mousedown":tt=!0;break;case"contextmenu":case"mouseup":case"dragend":tt=!1,Qe(ct,m,it);break;case"selectionchange":if(N_)break;case"keydown":case"keyup":Qe(ct,m,it)}var Lt;if(Sy)e:{switch(d){case"compositionstart":var Wt="onCompositionStart";break e;case"compositionend":Wt="onCompositionEnd";break e;case"compositionupdate":Wt="onCompositionUpdate";break e}Wt=void 0}else Uo?S0(d,m)&&(Wt="onCompositionEnd"):d==="keydown"&&m.keyCode===229&&(Wt="onCompositionStart");Wt&&(tp&&m.locale!=="ko"&&(Uo||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&Uo&&(Lt=h0()):(zo=it,yy="value"in zo?zo.value:zo.textContent,Uo=!0)),bn=tm(Ue,Wt),0<bn.length&&(Wt=new Bi(Wt,d,null,m,it),ct.push({event:Wt,listeners:bn}),Lt?Wt.data=Lt:(Lt=rp(m),Lt!==null&&(Wt.data=Lt)))),(Lt=w0?b_(d,m):N0(d,m))&&(Wt=tm(Ue,"onBeforeInput"),0<Wt.length&&(bn=new Bi("onBeforeInput","beforeinput",null,m,it),ct.push({event:bn,listeners:Wt}),bn.data=Lt)),z_(ct,d,Ue,m,it)}Z1(ct,h)})}function nn(d,h,m){return{instance:d,listener:h,currentTarget:m}}function tm(d,h){for(var m=h+"Capture",N=[];d!==null;){var A=d,R=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||R===null||(A=Pd(d,m),A!=null&&N.unshift(nn(d,A,R)),A=Pd(d,h),A!=null&&N.push(nn(d,A,R))),d.tag===3)return N;d=d.return}return[]}function Zr(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function Ir(d,h,m,N,A){for(var R=h._reactName,J=[];m!==null&&m!==N;){var he=m,Te=he.alternate,Ue=he.stateNode;if(he=he.tag,Te!==null&&Te===N)break;he!==5&&he!==26&&he!==27||Ue===null||(Te=Ue,A?(Ue=Pd(m,R),Ue!=null&&J.unshift(nn(m,Ue,Te))):A||(Ue=Pd(m,R),Ue!=null&&J.push(nn(m,Ue,Te)))),m=m.return}J.length!==0&&d.push({event:h,listeners:J})}var H_=/\r\n?/g,dl=/\u0000|\uFFFD/g;function tj(d){return(typeof d=="string"?d:""+d).replace(H_,`
`).replace(dl,"")}function nj(d,h){return h=tj(h),tj(d)===h}function nm(){}function Zn(d,h,m,N,A,R){switch(m){case"children":typeof N=="string"?h==="body"||h==="textarea"&&N===""||Bo(d,N):(typeof N=="number"||typeof N=="bigint")&&h!=="body"&&Bo(d,""+N);break;case"className":Uf(d,"class",N);break;case"tabIndex":Uf(d,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":Uf(d,m,N);break;case"style":hy(d,N,R);break;case"data":if(h!=="object"){Uf(d,"data",N);break}case"src":case"href":if(N===""&&(h!=="a"||m!=="href")){d.removeAttribute(m);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){d.removeAttribute(m);break}N=kd(""+N),d.setAttribute(m,N);break;case"action":case"formAction":if(typeof N=="function"){d.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(m==="formAction"?(h!=="input"&&Zn(d,h,"name",A.name,A,null),Zn(d,h,"formEncType",A.formEncType,A,null),Zn(d,h,"formMethod",A.formMethod,A,null),Zn(d,h,"formTarget",A.formTarget,A,null)):(Zn(d,h,"encType",A.encType,A,null),Zn(d,h,"method",A.method,A,null),Zn(d,h,"target",A.target,A,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){d.removeAttribute(m);break}N=kd(""+N),d.setAttribute(m,N);break;case"onClick":N!=null&&(d.onclick=nm);break;case"onScroll":N!=null&&Nn("scroll",d);break;case"onScrollEnd":N!=null&&Nn("scrollend",d);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(r(61));if(m=N.__html,m!=null){if(A.children!=null)throw Error(r(60));d.innerHTML=m}}break;case"multiple":d.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":d.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){d.removeAttribute("xlink:href");break}m=kd(""+N),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?d.setAttribute(m,""+N):d.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?d.setAttribute(m,""):d.removeAttribute(m);break;case"capture":case"download":N===!0?d.setAttribute(m,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?d.setAttribute(m,N):d.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?d.setAttribute(m,N):d.removeAttribute(m);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?d.removeAttribute(m):d.setAttribute(m,N);break;case"popover":Nn("beforetoggle",d),Nn("toggle",d),qf(d,"popover",N);break;case"xlinkActuate":As(d,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":As(d,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":As(d,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":As(d,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":As(d,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":As(d,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":As(d,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":As(d,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":As(d,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":qf(d,"is",N);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=c0.get(m)||m,qf(d,m,N))}}function Mv(d,h,m,N,A,R){switch(m){case"style":hy(d,N,R);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(r(61));if(m=N.__html,m!=null){if(A.children!=null)throw Error(r(60));d.innerHTML=m}}break;case"children":typeof N=="string"?Bo(d,N):(typeof N=="number"||typeof N=="bigint")&&Bo(d,""+N);break;case"onScroll":N!=null&&Nn("scroll",d);break;case"onScrollEnd":N!=null&&Nn("scrollend",d);break;case"onClick":N!=null&&(d.onclick=nm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!s0.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),h=m.slice(2,A?m.length-7:void 0),R=d[Dt]||null,R=R!=null?R[m]:null,typeof R=="function"&&d.removeEventListener(h,R,A),typeof N=="function")){typeof R!="function"&&R!==null&&(m in d?d[m]=null:d.hasAttribute(m)&&d.removeAttribute(m)),d.addEventListener(h,N,A);break e}m in d?d[m]=N:N===!0?d.setAttribute(m,""):qf(d,m,N)}}}function ei(d,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nn("error",d),Nn("load",d);var N=!1,A=!1,R;for(R in m)if(m.hasOwnProperty(R)){var J=m[R];if(J!=null)switch(R){case"src":N=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:Zn(d,h,R,J,m,null)}}A&&Zn(d,h,"srcSet",m.srcSet,m,null),N&&Zn(d,h,"src",m.src,m,null);return;case"input":Nn("invalid",d);var he=R=J=A=null,Te=null,Ue=null;for(N in m)if(m.hasOwnProperty(N)){var it=m[N];if(it!=null)switch(N){case"name":A=it;break;case"type":J=it;break;case"checked":Te=it;break;case"defaultChecked":Ue=it;break;case"value":R=it;break;case"defaultValue":he=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,h));break;default:Zn(d,h,N,it,m,null)}}cy(d,R,he,Te,Ue,J,A,!1),Hf(d);return;case"select":Nn("invalid",d),N=J=R=null;for(A in m)if(m.hasOwnProperty(A)&&(he=m[A],he!=null))switch(A){case"value":R=he;break;case"defaultValue":J=he;break;case"multiple":N=he;default:Zn(d,h,A,he,m,null)}h=R,m=J,d.multiple=!!N,h!=null?Jc(d,!!N,h,!1):m!=null&&Jc(d,!!N,m,!0);return;case"textarea":Nn("invalid",d),R=A=N=null;for(J in m)if(m.hasOwnProperty(J)&&(he=m[J],he!=null))switch(J){case"value":N=he;break;case"defaultValue":A=he;break;case"children":R=he;break;case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(91));break;default:Zn(d,h,J,he,m,null)}Wf(d,N,A,R),Hf(d);return;case"option":for(Te in m)if(m.hasOwnProperty(Te)&&(N=m[Te],N!=null))switch(Te){case"selected":d.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:Zn(d,h,Te,N,m,null)}return;case"dialog":Nn("beforetoggle",d),Nn("toggle",d),Nn("cancel",d),Nn("close",d);break;case"iframe":case"object":Nn("load",d);break;case"video":case"audio":for(N=0;N<Ah.length;N++)Nn(Ah[N],d);break;case"image":Nn("error",d),Nn("load",d);break;case"details":Nn("toggle",d);break;case"embed":case"source":case"link":Nn("error",d),Nn("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ue in m)if(m.hasOwnProperty(Ue)&&(N=m[Ue],N!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:Zn(d,h,Ue,N,m,null)}return;default:if(fy(h)){for(it in m)m.hasOwnProperty(it)&&(N=m[it],N!==void 0&&Mv(d,h,it,N,m,void 0));return}}for(he in m)m.hasOwnProperty(he)&&(N=m[he],N!=null&&Zn(d,h,he,N,m,null))}function G_(d,h,m,N){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,R=null,J=null,he=null,Te=null,Ue=null,it=null;for(He in m){var ct=m[He];if(m.hasOwnProperty(He)&&ct!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":Te=ct;default:N.hasOwnProperty(He)||Zn(d,h,He,null,N,ct)}}for(var We in N){var He=N[We];if(ct=m[We],N.hasOwnProperty(We)&&(He!=null||ct!=null))switch(We){case"type":R=He;break;case"name":A=He;break;case"checked":Ue=He;break;case"defaultChecked":it=He;break;case"value":J=He;break;case"defaultValue":he=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,h));break;default:He!==ct&&Zn(d,h,We,He,N,ct)}}Gf(d,J,he,Te,Ue,it,R,A);return;case"select":He=J=he=We=null;for(R in m)if(Te=m[R],m.hasOwnProperty(R)&&Te!=null)switch(R){case"value":break;case"multiple":He=Te;default:N.hasOwnProperty(R)||Zn(d,h,R,null,N,Te)}for(A in N)if(R=N[A],Te=m[A],N.hasOwnProperty(A)&&(R!=null||Te!=null))switch(A){case"value":We=R;break;case"defaultValue":he=R;break;case"multiple":J=R;default:R!==Te&&Zn(d,h,A,R,N,Te)}h=he,m=J,N=He,We!=null?Jc(d,!!m,We,!1):!!N!=!!m&&(h!=null?Jc(d,!!m,h,!0):Jc(d,!!m,m?[]:"",!1));return;case"textarea":He=We=null;for(he in m)if(A=m[he],m.hasOwnProperty(he)&&A!=null&&!N.hasOwnProperty(he))switch(he){case"value":break;case"children":break;default:Zn(d,h,he,null,N,A)}for(J in N)if(A=N[J],R=m[J],N.hasOwnProperty(J)&&(A!=null||R!=null))switch(J){case"value":We=A;break;case"defaultValue":He=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==R&&Zn(d,h,J,A,N,R)}uy(d,We,He);return;case"option":for(var Gt in m)if(We=m[Gt],m.hasOwnProperty(Gt)&&We!=null&&!N.hasOwnProperty(Gt))switch(Gt){case"selected":d.selected=!1;break;default:Zn(d,h,Gt,null,N,We)}for(Te in N)if(We=N[Te],He=m[Te],N.hasOwnProperty(Te)&&We!==He&&(We!=null||He!=null))switch(Te){case"selected":d.selected=We&&typeof We!="function"&&typeof We!="symbol";break;default:Zn(d,h,Te,We,N,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in m)We=m[Ht],m.hasOwnProperty(Ht)&&We!=null&&!N.hasOwnProperty(Ht)&&Zn(d,h,Ht,null,N,We);for(Ue in N)if(We=N[Ue],He=m[Ue],N.hasOwnProperty(Ue)&&We!==He&&(We!=null||He!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(r(137,h));break;default:Zn(d,h,Ue,We,N,He)}return;default:if(fy(h)){for(var er in m)We=m[er],m.hasOwnProperty(er)&&We!==void 0&&!N.hasOwnProperty(er)&&Mv(d,h,er,void 0,N,We);for(it in N)We=N[it],He=m[it],!N.hasOwnProperty(it)||We===He||We===void 0&&He===void 0||Mv(d,h,it,We,N,He);return}}for(var $e in m)We=m[$e],m.hasOwnProperty($e)&&We!=null&&!N.hasOwnProperty($e)&&Zn(d,h,$e,null,N,We);for(ct in N)We=N[ct],He=m[ct],!N.hasOwnProperty(ct)||We===He||We==null&&He==null||Zn(d,h,ct,We,N,He)}var hs=null,rm=null;function cc(d){return d.nodeType===9?d:d.ownerDocument}function _r(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kr(d,h){if(d===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&h==="foreignObject"?0:d}function im(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Iv=null;function W_(){var d=window.event;return d&&d.type==="popstate"?d===Iv?!1:(Iv=d,!0):(Iv=null,!1)}var rj=typeof setTimeout=="function"?setTimeout:void 0,K_=typeof clearTimeout=="function"?clearTimeout:void 0,ij=typeof Promise=="function"?Promise:void 0,Y_=typeof queueMicrotask=="function"?queueMicrotask:typeof ij<"u"?function(d){return ij.resolve(null).then(d).catch(aj)}:rj;function aj(d){setTimeout(function(){throw d})}function Ga(d){return d==="head"}function am(d,h){var m=h,N=0,A=0;do{var R=m.nextSibling;if(d.removeChild(m),R&&R.nodeType===8)if(m=R.data,m==="/$"){if(0<N&&8>N){m=N;var J=d.ownerDocument;if(m&1&&kh(J.documentElement),m&2&&kh(J.body),m&4)for(m=J.head,kh(m),J=m.firstChild;J;){var he=J.nextSibling,Te=J.nodeName;J[$o]||Te==="SCRIPT"||Te==="STYLE"||Te==="LINK"&&J.rel.toLowerCase()==="stylesheet"||m.removeChild(J),J=he}}if(A===0){d.removeChild(R),Fh(h);return}A--}else m==="$"||m==="$?"||m==="$!"?A++:N=m.charCodeAt(0)-48;else N=0;m=R}while(m);Fh(h)}function Rv(d){var h=d.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Rv(m),ty(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}d.removeChild(m)}}function sj(d,h,m,N){for(;d.nodeType===1;){var A=m;if(d.nodeName.toLowerCase()!==h.toLowerCase()){if(!N&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(N){if(!d[$o])switch(h){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(R=d.getAttribute("rel"),R==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(R!==A.rel||d.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||d.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||d.getAttribute("title")!==(A.title==null?null:A.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(R=d.getAttribute("src"),(R!==(A.src==null?null:A.src)||d.getAttribute("type")!==(A.type==null?null:A.type)||d.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&R&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(h==="input"&&d.type==="hidden"){var R=A.name==null?null:""+A.name;if(A.type==="hidden"&&d.getAttribute("name")===R)return d}else return d;if(d=fs(d.nextSibling),d===null)break}return null}function sm(d,h,m){if(h==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!m||(d=fs(d.nextSibling),d===null))return null;return d}function Ri(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function Ru(d,h){var m=d.ownerDocument;if(d.data!=="$?"||m.readyState==="complete")h();else{var N=function(){h(),m.removeEventListener("DOMContentLoaded",N)};m.addEventListener("DOMContentLoaded",N),d._reactRetry=N}}function fs(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return d}var Lv=null;function oj(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var m=d.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return d;h--}else m==="/$"&&h++}d=d.previousSibling}return null}function lj(d,h,m){switch(h=cc(m),d){case"html":if(d=h.documentElement,!d)throw Error(r(452));return d;case"head":if(d=h.head,!d)throw Error(r(453));return d;case"body":if(d=h.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function kh(d){for(var h=d.attributes;h.length;)d.removeAttributeNode(h[0]);ty(d)}var xa=new Map,Bs=new Set;function ln(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var zs=K.d;K.d={f:Wa,r:cj,D:Q_,C:uj,L:om,m:X_,X:Z_,S:J_,M:eC};function Wa(){var d=zs.f(),h=Kp();return d||h}function cj(d){var h=Wc(d);h!==null&&h.tag===5&&h.type==="form"?Pp(h):zs.r(d)}var Lu=typeof document>"u"?null:document;function qn(d,h,m){var N=Lu;if(N&&typeof h=="string"&&h){var A=Da(h);A='link[rel="'+d+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),Bs.has(A)||(Bs.add(A),d={rel:d,crossOrigin:m,href:h},N.querySelector(A)===null&&(h=N.createElement("link"),ei(h,"link",d),ai(h),N.head.appendChild(h)))}}function Q_(d){zs.D(d),qn("dns-prefetch",d,null)}function uj(d,h){zs.C(d,h),qn("preconnect",d,h)}function om(d,h,m){zs.L(d,h,m);var N=Lu;if(N&&d&&h){var A='link[rel="preload"][as="'+Da(h)+'"]';h==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+Da(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+Da(m.imageSizes)+'"]')):A+='[href="'+Da(d)+'"]';var R=A;switch(h){case"style":R=Fu(d);break;case"script":R=$u(d)}xa.has(R)||(d=f({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:d,as:h},m),xa.set(R,d),N.querySelector(A)!==null||h==="style"&&N.querySelector(Ph(R))||h==="script"&&N.querySelector(Oh(R))||(h=N.createElement("link"),ei(h,"link",d),ai(h),N.head.appendChild(h)))}}function X_(d,h){zs.m(d,h);var m=Lu;if(m&&d){var N=h&&typeof h.as=="string"?h.as:"script",A='link[rel="modulepreload"][as="'+Da(N)+'"][href="'+Da(d)+'"]',R=A;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=$u(d)}if(!xa.has(R)&&(d=f({rel:"modulepreload",href:d},h),xa.set(R,d),m.querySelector(A)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Oh(R)))return}N=m.createElement("link"),ei(N,"link",d),ai(N),m.head.appendChild(N)}}}function J_(d,h,m){zs.S(d,h,m);var N=Lu;if(N&&d){var A=Yc(N).hoistableStyles,R=Fu(d);h=h||"default";var J=A.get(R);if(!J){var he={loading:0,preload:null};if(J=N.querySelector(Ph(R)))he.loading=5;else{d=f({rel:"stylesheet",href:d,"data-precedence":h},m),(m=xa.get(R))&&Dh(d,m);var Te=J=N.createElement("link");ai(Te),ei(Te,"link",d),Te._p=new Promise(function(Ue,it){Te.onload=Ue,Te.onerror=it}),Te.addEventListener("load",function(){he.loading|=1}),Te.addEventListener("error",function(){he.loading|=2}),he.loading|=4,lm(J,h,N)}J={type:"stylesheet",instance:J,count:1,state:he},A.set(R,J)}}}function Z_(d,h){zs.X(d,h);var m=Lu;if(m&&d){var N=Yc(m).hoistableScripts,A=$u(d),R=N.get(A);R||(R=m.querySelector(Oh(A)),R||(d=f({src:d,async:!0},h),(h=xa.get(A))&&Fv(d,h),R=m.createElement("script"),ai(R),ei(R,"link",d),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},N.set(A,R))}}function eC(d,h){zs.M(d,h);var m=Lu;if(m&&d){var N=Yc(m).hoistableScripts,A=$u(d),R=N.get(A);R||(R=m.querySelector(Oh(A)),R||(d=f({src:d,async:!0,type:"module"},h),(h=xa.get(A))&&Fv(d,h),R=m.createElement("script"),ai(R),ei(R,"link",d),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},N.set(A,R))}}function dj(d,h,m,N){var A=(A=Ne.current)?ln(A):null;if(!A)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Fu(m.href),m=Yc(A).hoistableStyles,N=m.get(h),N||(N={type:"style",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){d=Fu(m.href);var R=Yc(A).hoistableStyles,J=R.get(d);if(J||(A=A.ownerDocument||A,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(d,J),(R=A.querySelector(Ph(d)))&&!R._p&&(J.instance=R,J.state.loading=5),xa.has(d)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},xa.set(d,m),R||tC(A,d,m,J.state))),h&&N===null)throw Error(r(528,""));return J}if(h&&N!==null)throw Error(r(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=$u(m),m=Yc(A).hoistableScripts,N=m.get(h),N||(N={type:"script",instance:null,count:0,state:null},m.set(h,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function Fu(d){return'href="'+Da(d)+'"'}function Ph(d){return'link[rel="stylesheet"]['+d+"]"}function hj(d){return f({},d,{"data-precedence":d.precedence,precedence:null})}function tC(d,h,m,N){d.querySelector('link[rel="preload"][as="style"]['+h+"]")?N.loading=1:(h=d.createElement("link"),N.preload=h,h.addEventListener("load",function(){return N.loading|=1}),h.addEventListener("error",function(){return N.loading|=2}),ei(h,"link",m),ai(h),d.head.appendChild(h))}function $u(d){return'[src="'+Da(d)+'"]'}function Oh(d){return"script[async]"+d}function fj(d,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var N=d.querySelector('style[data-href~="'+Da(m.href)+'"]');if(N)return h.instance=N,ai(N),N;var A=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return N=(d.ownerDocument||d).createElement("style"),ai(N),ei(N,"style",A),lm(N,m.precedence,d),h.instance=N;case"stylesheet":A=Fu(m.href);var R=d.querySelector(Ph(A));if(R)return h.state.loading|=4,h.instance=R,ai(R),R;N=hj(m),(A=xa.get(A))&&Dh(N,A),R=(d.ownerDocument||d).createElement("link"),ai(R);var J=R;return J._p=new Promise(function(he,Te){J.onload=he,J.onerror=Te}),ei(R,"link",N),h.state.loading|=4,lm(R,m.precedence,d),h.instance=R;case"script":return R=$u(m.src),(A=d.querySelector(Oh(R)))?(h.instance=A,ai(A),A):(N=m,(A=xa.get(R))&&(N=f({},m),Fv(N,A)),d=d.ownerDocument||d,A=d.createElement("script"),ai(A),ei(A,"link",N),d.head.appendChild(A),h.instance=A);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(N=h.instance,h.state.loading|=4,lm(N,m.precedence,d));return h.instance}function lm(d,h,m){for(var N=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=N.length?N[N.length-1]:null,R=A,J=0;J<N.length;J++){var he=N[J];if(he.dataset.precedence===h)R=he;else if(R!==A)break}R?R.parentNode.insertBefore(d,R.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(d,h.firstChild))}function Dh(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.title==null&&(d.title=h.title)}function Fv(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.integrity==null&&(d.integrity=h.integrity)}var Bu=null;function pj(d,h,m){if(Bu===null){var N=new Map,A=Bu=new Map;A.set(m,N)}else A=Bu,N=A.get(m),N||(N=new Map,A.set(m,N));if(N.has(d))return N;for(N.set(d,null),m=m.getElementsByTagName(d),A=0;A<m.length;A++){var R=m[A];if(!(R[$o]||R[bt]||d==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var J=R.getAttribute(h)||"";J=d+J;var he=N.get(J);he?he.push(R):N.set(J,[R])}}return N}function mj(d,h,m){d=d.ownerDocument||d,d.head.insertBefore(m,h==="title"?d.querySelector("head > title"):null)}function nC(d,h,m){if(m===1||h.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return d=h.disabled,typeof h.precedence=="string"&&d==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function ti(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var li=null;function rC(){}function iC(d,h,m){if(li===null)throw Error(r(475));var N=li;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=Fu(m.href),R=d.querySelector(Ph(A));if(R){d=R._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(N.count++,N=Mh.bind(N),d.then(N,N)),h.state.loading|=4,h.instance=R,ai(R);return}R=d.ownerDocument||d,m=hj(m),(A=xa.get(A))&&Dh(m,A),R=R.createElement("link"),ai(R);var J=R;J._p=new Promise(function(he,Te){J.onload=he,J.onerror=Te}),ei(R,"link",m),h.instance=R}N.stylesheets===null&&(N.stylesheets=new Map),N.stylesheets.set(h,d),(d=h.state.preload)&&(h.state.loading&3)===0&&(N.count++,h=Mh.bind(N),d.addEventListener("load",h),d.addEventListener("error",h))}}function aC(){if(li===null)throw Error(r(475));var d=li;return d.stylesheets&&d.count===0&&$v(d,d.stylesheets),0<d.count?function(h){var m=setTimeout(function(){if(d.stylesheets&&$v(d,d.stylesheets),d.unsuspend){var N=d.unsuspend;d.unsuspend=null,N()}},6e4);return d.unsuspend=h,function(){d.unsuspend=null,clearTimeout(m)}}:null}function Mh(){if(this.count--,this.count===0){if(this.stylesheets)$v(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var cm=null;function $v(d,h){d.stylesheets=null,d.unsuspend!==null&&(d.count++,cm=new Map,h.forEach(sC,d),cm=null,Mh.call(d))}function sC(d,h){if(!(h.state.loading&4)){var m=cm.get(d);if(m)var N=m.get(null);else{m=new Map,cm.set(d,m);for(var A=d.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<A.length;R++){var J=A[R];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(m.set(J.dataset.precedence,J),N=J)}N&&m.set(null,N)}A=h.instance,J=A.getAttribute("data-precedence"),R=m.get(J)||N,R===N&&m.set(null,A),m.set(J,A),this.count++,N=Mh.bind(this),A.addEventListener("load",N),A.addEventListener("error",N),R?R.parentNode.insertBefore(A,R.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(A,d.firstChild)),h.state.loading|=4}}var zu={$$typeof:C,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function oC(d,h,m,N,A,R,J,he){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dn(0),this.hiddenUpdates=dn(null),this.identifierPrefix=N,this.onUncaughtError=A,this.onCaughtError=R,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function gj(d,h,m,N,A,R,J,he,Te,Ue,it,ct){return d=new oC(d,h,m,J,he,Te,Ue,ct),h=1,R===!0&&(h|=24),R=zi(3,null,null,h),d.current=R,R.stateNode=d,h=Dy(),h.refCount++,d.pooledCache=h,h.refCount++,R.memoizedState={element:N,isDehydrated:m,cache:h},Ql(R),d}function yj(d){return d?(d=Ul,d):Ul}function Bv(d,h,m,N,A,R){A=yj(A),N.context===null?N.context=A:N.pendingContext=A,N=Qo(h),N.payload={element:m},R=R===void 0?null:R,R!==null&&(N.callback=R),m=lo(d,N,h),m!==null&&(va(m,d,h),Wd(m,d,h))}function zv(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var m=d.retryLane;d.retryLane=m!==0&&m<h?m:h}}function qv(d,h){zv(d,h),(d=d.alternate)&&zv(d,h)}function vj(d){if(d.tag===13){var h=ql(d,67108864);h!==null&&va(h,d,67108864),qv(d,67108864)}}var um=!0;function lC(d,h,m,N){var A=q.T;q.T=null;var R=K.p;try{K.p=2,Uv(d,h,m,N)}finally{K.p=R,q.T=A}}function qu(d,h,m,N){var A=q.T;q.T=null;var R=K.p;try{K.p=8,Uv(d,h,m,N)}finally{K.p=R,q.T=A}}function Uv(d,h,m,N){if(um){var A=Vv(N);if(A===null)bo(d,h,N,dm,m),bj(d,N);else if(uC(A,d,h,m,N))N.stopPropagation();else if(bj(d,N),h&4&&-1<cC.indexOf(d)){for(;A!==null;){var R=Wc(A);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var J=kt(R.pendingLanes);if(J!==0){var he=R;for(he.pendingLanes|=2,he.entangledLanes|=2;J;){var Te=1<<31-ve(J);he.entanglements[1]|=Te,J&=~Te}$s(R),(Kn&6)===0&&(ku=le()+500,Ch(0))}}break;case 13:he=ql(R,2),he!==null&&va(he,R,2),Kp(),qv(R,2)}if(R=Vv(N),R===null&&bo(d,h,N,dm,m),R===A)break;A=R}A!==null&&N.stopPropagation()}else bo(d,h,N,null,m)}}function Vv(d){return d=py(d),Hv(d)}var dm=null;function Hv(d){if(dm=null,d=Gc(d),d!==null){var h=s(d);if(h===null)d=null;else{var m=h.tag;if(m===13){if(d=o(h),d!==null)return d;d=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null)}}return dm=d,null}function xj(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(je()){case Ge:return 2;case et:return 8;case ht:case _e:return 32;case Fe:return 268435456;default:return 32}default:return 32}}var hm=!1,jo=null,hl=null,fl=null,Ih=new Map,Rh=new Map,pl=[],cC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bj(d,h){switch(d){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":fl=null;break;case"pointerover":case"pointerout":Ih.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(h.pointerId)}}function Lh(d,h,m,N,A,R){return d===null||d.nativeEvent!==R?(d={blockedOn:h,domEventName:m,eventSystemFlags:N,nativeEvent:R,targetContainers:[A]},h!==null&&(h=Wc(h),h!==null&&vj(h)),d):(d.eventSystemFlags|=N,h=d.targetContainers,A!==null&&h.indexOf(A)===-1&&h.push(A),d)}function uC(d,h,m,N,A){switch(h){case"focusin":return jo=Lh(jo,d,h,m,N,A),!0;case"dragenter":return hl=Lh(hl,d,h,m,N,A),!0;case"mouseover":return fl=Lh(fl,d,h,m,N,A),!0;case"pointerover":var R=A.pointerId;return Ih.set(R,Lh(Ih.get(R)||null,d,h,m,N,A)),!0;case"gotpointercapture":return R=A.pointerId,Rh.set(R,Lh(Rh.get(R)||null,d,h,m,N,A)),!0}return!1}function jj(d){var h=Gc(d.target);if(h!==null){var m=s(h);if(m!==null){if(h=m.tag,h===13){if(h=o(m),h!==null){d.blockedOn=h,pt(d.priority,function(){if(m.tag===13){var N=_i();N=vt(N);var A=ql(m,N);A!==null&&va(A,m,N),qv(m,N)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){d.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}d.blockedOn=null}function fm(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var m=Vv(d.nativeEvent);if(m===null){m=d.nativeEvent;var N=new m.constructor(m.type,m);Kf=N,m.target.dispatchEvent(N),Kf=null}else return h=Wc(m),h!==null&&vj(h),d.blockedOn=m,!1;h.shift()}return!0}function wj(d,h,m){fm(d)&&m.delete(h)}function dC(){hm=!1,jo!==null&&fm(jo)&&(jo=null),hl!==null&&fm(hl)&&(hl=null),fl!==null&&fm(fl)&&(fl=null),Ih.forEach(wj),Rh.forEach(wj)}function pm(d,h){d.blockedOn===h&&(d.blockedOn=null,hm||(hm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dC)))}var mm=null;function Sj(d){mm!==d&&(mm=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){mm===d&&(mm=null);for(var h=0;h<d.length;h+=3){var m=d[h],N=d[h+1],A=d[h+2];if(typeof N!="function"){if(Hv(N||m)===null)continue;break}var R=Wc(m);R!==null&&(d.splice(h,3),h-=3,ih(R,{pending:!0,data:A,method:m.method,action:N},N,A))}}))}function Fh(d){function h(Te){return pm(Te,d)}jo!==null&&pm(jo,d),hl!==null&&pm(hl,d),fl!==null&&pm(fl,d),Ih.forEach(h),Rh.forEach(h);for(var m=0;m<pl.length;m++){var N=pl[m];N.blockedOn===d&&(N.blockedOn=null)}for(;0<pl.length&&(m=pl[0],m.blockedOn===null);)jj(m),m.blockedOn===null&&pl.shift();if(m=(d.ownerDocument||d).$$reactFormReplay,m!=null)for(N=0;N<m.length;N+=3){var A=m[N],R=m[N+1],J=A[Dt]||null;if(typeof R=="function")J||Sj(m);else if(J){var he=null;if(R&&R.hasAttribute("formAction")){if(A=R,J=R[Dt]||null)he=J.formAction;else if(Hv(A)!==null)continue}else he=J.action;typeof he=="function"?m[N+1]=he:(m.splice(N,3),N-=3),Sj(m)}}}function Gv(d){this._internalRoot=d}gm.prototype.render=Gv.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(r(409));var m=h.current,N=_i();Bv(m,N,d,h,null,null)},gm.prototype.unmount=Gv.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Bv(d.current,2,null,d,null,null),Kp(),h[un]=null}};function gm(d){this._internalRoot=d}gm.prototype.unstable_scheduleHydration=function(d){if(d){var h=ur();d={blockedOn:null,target:d,priority:h};for(var m=0;m<pl.length&&h!==0&&h<pl[m].priority;m++);pl.splice(m,0,d),m===0&&jj(d)}};var Nj=t.version;if(Nj!=="19.1.0")throw Error(r(527,Nj,"19.1.0"));K.findDOMNode=function(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=c(h),d=d!==null?u(d):null,d=d===null?null:d.stateNode,d};var hC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ym.isDisabled&&ym.supportsFiber)try{be=ym.inject(hC),De=ym}catch{}}return Kv.createRoot=function(d,h){if(!a(d))throw Error(r(299));var m=!1,N="",A=av,R=Mp,J=c1,he=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(R=h.onCaughtError),h.onRecoverableError!==void 0&&(J=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(he=h.unstable_transitionCallbacks)),h=gj(d,1,!1,null,null,m,N,A,R,J,he,null),d[un]=h.current,Dv(d),new Gv(h)},Kv.hydrateRoot=function(d,h,m){if(!a(d))throw Error(r(299));var N=!1,A="",R=av,J=Mp,he=c1,Te=null,Ue=null;return m!=null&&(m.unstable_strictMode===!0&&(N=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(J=m.onCaughtError),m.onRecoverableError!==void 0&&(he=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Te=m.unstable_transitionCallbacks),m.formState!==void 0&&(Ue=m.formState)),h=gj(d,1,!0,h,m??null,N,A,R,J,he,Te,Ue),h.context=yj(null),m=h.current,N=_i(),N=vt(N),A=Qo(N),A.callback=null,lo(m,A,N),m=N,h.current.lanes=m,Ee(h,m),$s(h),d[un]=h.current,Dv(d),new gm(h)},Kv.version="19.1.0",Kv}var EI;function vK(){if(EI)return xC.exports;EI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),xC.exports=yK(),xC.exports}var xK=vK(),Lg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},bK={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Xu,aD,Iz,jK=(Iz=class{constructor(){Bt(this,Xu,bK);Bt(this,aD,!1)}setTimeoutProvider(e){_t(this,Xu,e)}setTimeout(e,t){return Pe(this,Xu).setTimeout(e,t)}clearTimeout(e){Pe(this,Xu).clearTimeout(e)}setInterval(e,t){return Pe(this,Xu).setInterval(e,t)}clearInterval(e){Pe(this,Xu).clearInterval(e)}},Xu=new WeakMap,aD=new WeakMap,Iz),Yh=new jK;function wK(e){setTimeout(e,0)}var yf=typeof window>"u"||"Deno"in globalThis;function Na(){}function SK(e,t){return typeof e=="function"?e(t):e}function jk(e){return typeof e=="number"&&e>=0&&e!==1/0}function Wz(e,t){return Math.max(e+(t||0)-Date.now(),0)}function cd(e,t){return typeof e=="function"?e(t):e}function Hs(e,t){return typeof e=="function"?e(t):e}function AI(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:s,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==oD(o,t.options))return!1}else if(!Rx(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||s&&!s(t))}function kI(e,t){const{exact:n,status:r,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(vf(t.options.mutationKey)!==vf(s))return!1}else if(!Rx(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function oD(e,t){return((t==null?void 0:t.queryKeyHashFn)||vf)(e)}function vf(e){return JSON.stringify(e,(t,n)=>wk(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function Rx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Rx(e[n],t[n])):!1}var NK=Object.prototype.hasOwnProperty;function Kz(e,t,n=0){if(e===t)return e;if(n>500)return t;const r=PI(e)&&PI(t);if(!r&&!(wk(e)&&wk(t)))return t;const s=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),l=o.length,c=r?new Array(l):{};let u=0;for(let f=0;f<l;f++){const p=r?f:o[f],y=e[p],v=t[p];if(y===v){c[p]=y,(r?f<s:NK.call(e,p))&&u++;continue}if(y===null||v===null||typeof y!="object"||typeof v!="object"){c[p]=v;continue}const x=Kz(y,v,n+1);c[p]=x,x===y&&u++}return s===l&&u===s?e:c}function _w(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function PI(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function wk(e){if(!OI(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!OI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function OI(e){return Object.prototype.toString.call(e)==="[object Object]"}function _K(e){return new Promise(t=>{Yh.setTimeout(t,e)})}function Sk(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Kz(e,t):t}function CK(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function TK(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var lD=Symbol();function Yz(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===lD?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function cD(e,t){return typeof e=="function"?e(...t):!!e}function EK(e,t,n){let r=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=t()),r||(r=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)}),e}var nf,Ju,Hm,Rz,AK=(Rz=class extends Lg{constructor(){super();Bt(this,nf);Bt(this,Ju);Bt(this,Hm);_t(this,Hm,t=>{if(!yf&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Pe(this,Ju)||this.setEventListener(Pe(this,Hm))}onUnsubscribe(){var t;this.hasListeners()||((t=Pe(this,Ju))==null||t.call(this),_t(this,Ju,void 0))}setEventListener(t){var n;_t(this,Hm,t),(n=Pe(this,Ju))==null||n.call(this),_t(this,Ju,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Pe(this,nf)!==t&&(_t(this,nf,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Pe(this,nf)=="boolean"?Pe(this,nf):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},nf=new WeakMap,Ju=new WeakMap,Hm=new WeakMap,Rz),uD=new AK;function Nk(){let e,t;const n=new Promise((a,s)=>{e=a,t=s});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}var kK=wK;function PK(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=kK;const s=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var vi=PK(),Gm,Zu,Wm,Lz,OK=(Lz=class extends Lg{constructor(){super();Bt(this,Gm,!0);Bt(this,Zu);Bt(this,Wm);_t(this,Wm,t=>{if(!yf&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Pe(this,Zu)||this.setEventListener(Pe(this,Wm))}onUnsubscribe(){var t;this.hasListeners()||((t=Pe(this,Zu))==null||t.call(this),_t(this,Zu,void 0))}setEventListener(t){var n;_t(this,Wm,t),(n=Pe(this,Zu))==null||n.call(this),_t(this,Zu,t(this.setOnline.bind(this)))}setOnline(t){Pe(this,Gm)!==t&&(_t(this,Gm,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Pe(this,Gm)}},Gm=new WeakMap,Zu=new WeakMap,Wm=new WeakMap,Lz),Cw=new OK;function DK(e){return Math.min(1e3*2**e,3e4)}function Qz(e){return(e??"online")==="online"?Cw.isOnline():!0}var _k=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Xz(e){let t=!1,n=0,r;const a=Nk(),s=()=>a.status!=="pending",o=b=>{var w;if(!s()){const _=new _k(b);y(_),(w=e.onCancel)==null||w.call(e,_)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>uD.isFocused()&&(e.networkMode==="always"||Cw.isOnline())&&e.canRun(),f=()=>Qz(e.networkMode)&&e.canRun(),p=b=>{s()||(r==null||r(),a.resolve(b))},y=b=>{s()||(r==null||r(),a.reject(b))},v=()=>new Promise(b=>{var w;r=_=>{(s()||u())&&b(_)},(w=e.onPause)==null||w.call(e)}).then(()=>{var b;r=void 0,s()||(b=e.onContinue)==null||b.call(e)}),x=()=>{if(s())return;let b;const w=n===0?e.initialPromise:void 0;try{b=w??e.fn()}catch(_){b=Promise.reject(_)}Promise.resolve(b).then(p).catch(_=>{var P;if(s())return;const T=e.retry??(yf?0:3),C=e.retryDelay??DK,O=typeof C=="function"?C(n,_):C,E=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,_);if(t||!E){y(_);return}n++,(P=e.onFail)==null||P.call(e,n,_),_K(O).then(()=>u()?void 0:v()).then(()=>{t?y(_):x()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(r==null||r(),a),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?x():v().then(x),a)}}var rf,Fz,Jz=(Fz=class{constructor(){Bt(this,rf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jk(this.gcTime)&&_t(this,rf,Yh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(yf?1/0:5*60*1e3))}clearGcTimeout(){Pe(this,rf)&&(Yh.clearTimeout(Pe(this,rf)),_t(this,rf,void 0))}},rf=new WeakMap,Fz),af,Km,Vs,sf,Ci,kb,of,_o,hc,$z,MK=($z=class extends Jz{constructor(t){super();Bt(this,_o);Bt(this,af);Bt(this,Km);Bt(this,Vs);Bt(this,sf);Bt(this,Ci);Bt(this,kb);Bt(this,of);_t(this,of,!1),_t(this,kb,t.defaultOptions),this.setOptions(t.options),this.observers=[],_t(this,sf,t.client),_t(this,Vs,Pe(this,sf).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,_t(this,af,MI(this.options)),this.state=t.state??Pe(this,af),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Pe(this,Ci))==null?void 0:t.promise}setOptions(t){if(this.options={...Pe(this,kb),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=MI(this.options);n.data!==void 0&&(this.setState(DI(n.data,n.dataUpdatedAt)),_t(this,af,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Pe(this,Vs).remove(this)}setData(t,n){const r=Sk(this.state.data,t,this.options);return wn(this,_o,hc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){wn(this,_o,hc).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=Pe(this,Ci))==null?void 0:r.promise;return(a=Pe(this,Ci))==null||a.cancel(t),n?n.then(Na).catch(Na):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Pe(this,af))}isActive(){return this.observers.some(t=>Hs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===lD||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>cd(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Wz(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Pe(this,Ci))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Pe(this,Ci))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Pe(this,Vs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Pe(this,Ci)&&(Pe(this,of)?Pe(this,Ci).cancel({revert:!0}):Pe(this,Ci).cancelRetry()),this.scheduleGc()),Pe(this,Vs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wn(this,_o,hc).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,f,p,y,v,x,b,w,_,T,C;if(this.state.fetchStatus!=="idle"&&((c=Pe(this,Ci))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Pe(this,Ci))return Pe(this,Ci).continueRetry(),Pe(this,Ci).promise}if(t&&this.setOptions(t),!this.options.queryFn){const O=this.observers.find(E=>E.options.queryFn);O&&this.setOptions(O.options)}const r=new AbortController,a=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(_t(this,of,!0),r.signal)})},s=()=>{const O=Yz(this.options,n),P=(()=>{const I={client:Pe(this,sf),queryKey:this.queryKey,meta:this.meta};return a(I),I})();return _t(this,of,!1),this.options.persister?this.options.persister(O,P,this):O(P)},l=(()=>{const O={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Pe(this,sf),state:this.state,fetchFn:s};return a(O),O})();(u=this.options.behavior)==null||u.onFetch(l,this),_t(this,Km,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&wn(this,_o,hc).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta}),_t(this,Ci,Xz({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:O=>{O instanceof _k&&O.revert&&this.setState({...Pe(this,Km),fetchStatus:"idle"}),r.abort()},onFail:(O,E)=>{wn(this,_o,hc).call(this,{type:"failed",failureCount:O,error:E})},onPause:()=>{wn(this,_o,hc).call(this,{type:"pause"})},onContinue:()=>{wn(this,_o,hc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const O=await Pe(this,Ci).start();if(O===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(O),(v=(y=Pe(this,Vs).config).onSuccess)==null||v.call(y,O,this),(b=(x=Pe(this,Vs).config).onSettled)==null||b.call(x,O,this.state.error,this),O}catch(O){if(O instanceof _k){if(O.silent)return Pe(this,Ci).promise;if(O.revert){if(this.state.data===void 0)throw O;return this.state.data}}throw wn(this,_o,hc).call(this,{type:"error",error:O}),(_=(w=Pe(this,Vs).config).onError)==null||_.call(w,O,this),(C=(T=Pe(this,Vs).config).onSettled)==null||C.call(T,this.state.data,O,this),O}finally{this.scheduleGc()}}},af=new WeakMap,Km=new WeakMap,Vs=new WeakMap,sf=new WeakMap,Ci=new WeakMap,kb=new WeakMap,of=new WeakMap,_o=new WeakSet,hc=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Zz(r.data,this.options),fetchMeta:t.meta??null};case"success":const a={...r,...DI(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _t(this,Km,t.manual?a:void 0),a;case"error":const s=t.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),vi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Pe(this,Vs).notify({query:this,type:"updated",action:t})})},$z);function Zz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Qz(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function DI(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function MI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ya,Fn,Pb,wa,lf,Ym,pc,ed,Ob,Qm,Xm,cf,uf,td,Jm,ar,vx,Ck,Tk,Ek,Ak,kk,Pk,Ok,eq,Bz,IK=(Bz=class extends Lg{constructor(t,n){super();Bt(this,ar);Bt(this,Ya);Bt(this,Fn);Bt(this,Pb);Bt(this,wa);Bt(this,lf);Bt(this,Ym);Bt(this,pc);Bt(this,ed);Bt(this,Ob);Bt(this,Qm);Bt(this,Xm);Bt(this,cf);Bt(this,uf);Bt(this,td);Bt(this,Jm,new Set);this.options=n,_t(this,Ya,t),_t(this,ed,null),_t(this,pc,Nk()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Pe(this,Fn).addObserver(this),II(Pe(this,Fn),this.options)?wn(this,ar,vx).call(this):this.updateResult(),wn(this,ar,Ak).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Dk(Pe(this,Fn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Dk(Pe(this,Fn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,wn(this,ar,kk).call(this),wn(this,ar,Pk).call(this),Pe(this,Fn).removeObserver(this)}setOptions(t){const n=this.options,r=Pe(this,Fn);if(this.options=Pe(this,Ya).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Hs(this.options.enabled,Pe(this,Fn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");wn(this,ar,Ok).call(this),Pe(this,Fn).setOptions(this.options),n._defaulted&&!_w(this.options,n)&&Pe(this,Ya).getQueryCache().notify({type:"observerOptionsUpdated",query:Pe(this,Fn),observer:this});const a=this.hasListeners();a&&RI(Pe(this,Fn),r,this.options,n)&&wn(this,ar,vx).call(this),this.updateResult(),a&&(Pe(this,Fn)!==r||Hs(this.options.enabled,Pe(this,Fn))!==Hs(n.enabled,Pe(this,Fn))||cd(this.options.staleTime,Pe(this,Fn))!==cd(n.staleTime,Pe(this,Fn)))&&wn(this,ar,Ck).call(this);const s=wn(this,ar,Tk).call(this);a&&(Pe(this,Fn)!==r||Hs(this.options.enabled,Pe(this,Fn))!==Hs(n.enabled,Pe(this,Fn))||s!==Pe(this,td))&&wn(this,ar,Ek).call(this,s)}getOptimisticResult(t){const n=Pe(this,Ya).getQueryCache().build(Pe(this,Ya),t),r=this.createResult(n,t);return LK(this,r)&&(_t(this,wa,r),_t(this,Ym,this.options),_t(this,lf,Pe(this,Fn).state)),r}getCurrentResult(){return Pe(this,wa)}trackResult(t,n){return new Proxy(t,{get:(r,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Pe(this,pc).status==="pending"&&Pe(this,pc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,a))})}trackProp(t){Pe(this,Jm).add(t)}getCurrentQuery(){return Pe(this,Fn)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=Pe(this,Ya).defaultQueryOptions(t),r=Pe(this,Ya).getQueryCache().build(Pe(this,Ya),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return wn(this,ar,vx).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Pe(this,wa)))}createResult(t,n){var $;const r=Pe(this,Fn),a=this.options,s=Pe(this,wa),o=Pe(this,lf),l=Pe(this,Ym),u=t!==r?t.state:Pe(this,Pb),{state:f}=t;let p={...f},y=!1,v;if(n._optimisticResults){const z=this.hasListeners(),L=!z&&II(t,n),H=z&&RI(t,r,n,a);(L||H)&&(p={...p,...Zz(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:b,status:w}=p;v=p.data;let _=!1;if(n.placeholderData!==void 0&&v===void 0&&w==="pending"){let z;s!=null&&s.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(z=s.data,_=!0):z=typeof n.placeholderData=="function"?n.placeholderData(($=Pe(this,Xm))==null?void 0:$.state.data,Pe(this,Xm)):n.placeholderData,z!==void 0&&(w="success",v=Sk(s==null?void 0:s.data,z,n),y=!0)}if(n.select&&v!==void 0&&!_)if(s&&v===(o==null?void 0:o.data)&&n.select===Pe(this,Ob))v=Pe(this,Qm);else try{_t(this,Ob,n.select),v=n.select(v),v=Sk(s==null?void 0:s.data,v,n),_t(this,Qm,v),_t(this,ed,null)}catch(z){_t(this,ed,z)}Pe(this,ed)&&(x=Pe(this,ed),v=Pe(this,Qm),b=Date.now(),w="error");const T=p.fetchStatus==="fetching",C=w==="pending",O=w==="error",E=C&&T,P=v!==void 0,F={status:w,fetchStatus:p.fetchStatus,isPending:C,isSuccess:w==="success",isError:O,isInitialLoading:E,isLoading:E,data:v,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:b,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:O&&!P,isPaused:p.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:O&&P,isStale:dD(t,n),refetch:this.refetch,promise:Pe(this,pc),isEnabled:Hs(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const z=F.data!==void 0,L=F.status==="error"&&!z,H=Z=>{L?Z.reject(F.error):z&&Z.resolve(F.data)},V=()=>{const Z=_t(this,pc,F.promise=Nk());H(Z)},ne=Pe(this,pc);switch(ne.status){case"pending":t.queryHash===r.queryHash&&H(ne);break;case"fulfilled":(L||F.data!==ne.value)&&V();break;case"rejected":(!L||F.error!==ne.reason)&&V();break}}return F}updateResult(){const t=Pe(this,wa),n=this.createResult(Pe(this,Fn),this.options);if(_t(this,lf,Pe(this,Fn).state),_t(this,Ym,this.options),Pe(this,lf).data!==void 0&&_t(this,Xm,Pe(this,Fn)),_w(n,t))return;_t(this,wa,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!Pe(this,Jm).size)return!0;const o=new Set(s??Pe(this,Jm));return this.options.throwOnError&&o.add("error"),Object.keys(Pe(this,wa)).some(l=>{const c=l;return Pe(this,wa)[c]!==t[c]&&o.has(c)})};wn(this,ar,eq).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&wn(this,ar,Ak).call(this)}},Ya=new WeakMap,Fn=new WeakMap,Pb=new WeakMap,wa=new WeakMap,lf=new WeakMap,Ym=new WeakMap,pc=new WeakMap,ed=new WeakMap,Ob=new WeakMap,Qm=new WeakMap,Xm=new WeakMap,cf=new WeakMap,uf=new WeakMap,td=new WeakMap,Jm=new WeakMap,ar=new WeakSet,vx=function(t){wn(this,ar,Ok).call(this);let n=Pe(this,Fn).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Na)),n},Ck=function(){wn(this,ar,kk).call(this);const t=cd(this.options.staleTime,Pe(this,Fn));if(yf||Pe(this,wa).isStale||!jk(t))return;const r=Wz(Pe(this,wa).dataUpdatedAt,t)+1;_t(this,cf,Yh.setTimeout(()=>{Pe(this,wa).isStale||this.updateResult()},r))},Tk=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Pe(this,Fn)):this.options.refetchInterval)??!1},Ek=function(t){wn(this,ar,Pk).call(this),_t(this,td,t),!(yf||Hs(this.options.enabled,Pe(this,Fn))===!1||!jk(Pe(this,td))||Pe(this,td)===0)&&_t(this,uf,Yh.setInterval(()=>{(this.options.refetchIntervalInBackground||uD.isFocused())&&wn(this,ar,vx).call(this)},Pe(this,td)))},Ak=function(){wn(this,ar,Ck).call(this),wn(this,ar,Ek).call(this,wn(this,ar,Tk).call(this))},kk=function(){Pe(this,cf)&&(Yh.clearTimeout(Pe(this,cf)),_t(this,cf,void 0))},Pk=function(){Pe(this,uf)&&(Yh.clearInterval(Pe(this,uf)),_t(this,uf,void 0))},Ok=function(){const t=Pe(this,Ya).getQueryCache().build(Pe(this,Ya),this.options);if(t===Pe(this,Fn))return;const n=Pe(this,Fn);_t(this,Fn,t),_t(this,Pb,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},eq=function(t){vi.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(Pe(this,wa))}),Pe(this,Ya).getQueryCache().notify({query:Pe(this,Fn),type:"observerResultsUpdated"})})},Bz);function RK(e,t){return Hs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function II(e,t){return RK(e,t)||e.state.data!==void 0&&Dk(e,t,t.refetchOnMount)}function Dk(e,t,n){if(Hs(t.enabled,e)!==!1&&cd(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&dD(e,t)}return!1}function RI(e,t,n,r){return(e!==t||Hs(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&dD(e,n)}function dD(e,t){return Hs(t.enabled,e)!==!1&&e.isStaleByTime(cd(t.staleTime,e))}function LK(e,t){return!_w(e.getCurrentResult(),t)}function LI(e){return{onFetch:(t,n)=>{var f,p,y,v,x;const r=t.options,a=(y=(p=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:y.direction,s=((v=t.state.data)==null?void 0:v.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let b=!1;const w=C=>{EK(C,()=>t.signal,()=>b=!0)},_=Yz(t.options,t.fetchOptions),T=async(C,O,E)=>{if(b)return Promise.reject();if(O==null&&C.pages.length)return Promise.resolve(C);const I=(()=>{const L={client:t.client,queryKey:t.queryKey,pageParam:O,direction:E?"backward":"forward",meta:t.options.meta};return w(L),L})(),F=await _(I),{maxPages:$}=t.options,z=E?TK:CK;return{pages:z(C.pages,F,$),pageParams:z(C.pageParams,O,$)}};if(a&&s.length){const C=a==="backward",O=C?FK:FI,E={pages:s,pageParams:o},P=O(r,E);l=await T(E,P,C)}else{const C=e??s.length;do{const O=c===0?o[0]??r.initialPageParam:FI(r,l);if(c>0&&O==null)break;l=await T(l,O),c++}while(c<C)}return l};t.options.persister?t.fetchFn=()=>{var b,w;return(w=(b=t.options).persister)==null?void 0:w.call(b,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function FI(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function FK(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Db,vl,Sa,df,xl,Wu,zz,$K=(zz=class extends Jz{constructor(t){super();Bt(this,xl);Bt(this,Db);Bt(this,vl);Bt(this,Sa);Bt(this,df);_t(this,Db,t.client),this.mutationId=t.mutationId,_t(this,Sa,t.mutationCache),_t(this,vl,[]),this.state=t.state||tq(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Pe(this,vl).includes(t)||(Pe(this,vl).push(t),this.clearGcTimeout(),Pe(this,Sa).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){_t(this,vl,Pe(this,vl).filter(n=>n!==t)),this.scheduleGc(),Pe(this,Sa).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Pe(this,vl).length||(this.state.status==="pending"?this.scheduleGc():Pe(this,Sa).remove(this))}continue(){var t;return((t=Pe(this,df))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,f,p,y,v,x,b,w,_,T,C,O,E,P,I,F,$;const n=()=>{wn(this,xl,Wu).call(this,{type:"continue"})},r={client:Pe(this,Db),meta:this.options.meta,mutationKey:this.options.mutationKey};_t(this,df,Xz({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(z,L)=>{wn(this,xl,Wu).call(this,{type:"failed",failureCount:z,error:L})},onPause:()=>{wn(this,xl,Wu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Pe(this,Sa).canRun(this)}));const a=this.state.status==="pending",s=!Pe(this,df).canStart();try{if(a)n();else{wn(this,xl,Wu).call(this,{type:"pending",variables:t,isPaused:s}),await((l=(o=Pe(this,Sa).config).onMutate)==null?void 0:l.call(o,t,this,r));const L=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,r));L!==this.state.context&&wn(this,xl,Wu).call(this,{type:"pending",context:L,variables:t,isPaused:s})}const z=await Pe(this,df).start();return await((p=(f=Pe(this,Sa).config).onSuccess)==null?void 0:p.call(f,z,t,this.state.context,this,r)),await((v=(y=this.options).onSuccess)==null?void 0:v.call(y,z,t,this.state.context,r)),await((b=(x=Pe(this,Sa).config).onSettled)==null?void 0:b.call(x,z,null,this.state.variables,this.state.context,this,r)),await((_=(w=this.options).onSettled)==null?void 0:_.call(w,z,null,t,this.state.context,r)),wn(this,xl,Wu).call(this,{type:"success",data:z}),z}catch(z){try{await((C=(T=Pe(this,Sa).config).onError)==null?void 0:C.call(T,z,t,this.state.context,this,r))}catch(L){Promise.reject(L)}try{await((E=(O=this.options).onError)==null?void 0:E.call(O,z,t,this.state.context,r))}catch(L){Promise.reject(L)}try{await((I=(P=Pe(this,Sa).config).onSettled)==null?void 0:I.call(P,void 0,z,this.state.variables,this.state.context,this,r))}catch(L){Promise.reject(L)}try{await(($=(F=this.options).onSettled)==null?void 0:$.call(F,void 0,z,t,this.state.context,r))}catch(L){Promise.reject(L)}throw wn(this,xl,Wu).call(this,{type:"error",error:z}),z}finally{Pe(this,Sa).runNext(this)}}},Db=new WeakMap,vl=new WeakMap,Sa=new WeakMap,df=new WeakMap,xl=new WeakSet,Wu=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),vi.batch(()=>{Pe(this,vl).forEach(r=>{r.onMutationUpdate(t)}),Pe(this,Sa).notify({mutation:this,type:"updated",action:t})})},zz);function tq(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mc,Co,Mb,qz,BK=(qz=class extends Lg{constructor(t={}){super();Bt(this,mc);Bt(this,Co);Bt(this,Mb);this.config=t,_t(this,mc,new Set),_t(this,Co,new Map),_t(this,Mb,0)}build(t,n,r){const a=new $K({client:t,mutationCache:this,mutationId:++_j(this,Mb)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){Pe(this,mc).add(t);const n=Cj(t);if(typeof n=="string"){const r=Pe(this,Co).get(n);r?r.push(t):Pe(this,Co).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Pe(this,mc).delete(t)){const n=Cj(t);if(typeof n=="string"){const r=Pe(this,Co).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&Pe(this,Co).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Cj(t);if(typeof n=="string"){const r=Pe(this,Co).get(n),a=r==null?void 0:r.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=Cj(t);if(typeof n=="string"){const a=(r=Pe(this,Co).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){vi.batch(()=>{Pe(this,mc).forEach(t=>{this.notify({type:"removed",mutation:t})}),Pe(this,mc).clear(),Pe(this,Co).clear()})}getAll(){return Array.from(Pe(this,mc))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>kI(n,r))}findAll(t={}){return this.getAll().filter(n=>kI(t,n))}notify(t){vi.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return vi.batch(()=>Promise.all(t.map(n=>n.continue().catch(Na))))}},mc=new WeakMap,Co=new WeakMap,Mb=new WeakMap,qz);function Cj(e){var t;return(t=e.options.scope)==null?void 0:t.id}var gc,nd,Qa,yc,Ac,cw,Mk,Uz,zK=(Uz=class extends Lg{constructor(n,r){super();Bt(this,Ac);Bt(this,gc);Bt(this,nd);Bt(this,Qa);Bt(this,yc);_t(this,gc,n),this.setOptions(r),this.bindMethods(),wn(this,Ac,cw).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const r=this.options;this.options=Pe(this,gc).defaultMutationOptions(n),_w(this.options,r)||Pe(this,gc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Pe(this,Qa),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&vf(r.mutationKey)!==vf(this.options.mutationKey)?this.reset():((a=Pe(this,Qa))==null?void 0:a.state.status)==="pending"&&Pe(this,Qa).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Pe(this,Qa))==null||n.removeObserver(this)}onMutationUpdate(n){wn(this,Ac,cw).call(this),wn(this,Ac,Mk).call(this,n)}getCurrentResult(){return Pe(this,nd)}reset(){var n;(n=Pe(this,Qa))==null||n.removeObserver(this),_t(this,Qa,void 0),wn(this,Ac,cw).call(this),wn(this,Ac,Mk).call(this)}mutate(n,r){var a;return _t(this,yc,r),(a=Pe(this,Qa))==null||a.removeObserver(this),_t(this,Qa,Pe(this,gc).getMutationCache().build(Pe(this,gc),this.options)),Pe(this,Qa).addObserver(this),Pe(this,Qa).execute(n)}},gc=new WeakMap,nd=new WeakMap,Qa=new WeakMap,yc=new WeakMap,Ac=new WeakSet,cw=function(){var r;const n=((r=Pe(this,Qa))==null?void 0:r.state)??tq();_t(this,nd,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Mk=function(n){vi.batch(()=>{var r,a,s,o,l,c,u,f;if(Pe(this,yc)&&this.hasListeners()){const p=Pe(this,nd).variables,y=Pe(this,nd).context,v={client:Pe(this,gc),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(a=(r=Pe(this,yc)).onSuccess)==null||a.call(r,n.data,p,y,v)}catch(x){Promise.reject(x)}try{(o=(s=Pe(this,yc)).onSettled)==null||o.call(s,n.data,null,p,y,v)}catch(x){Promise.reject(x)}}else if((n==null?void 0:n.type)==="error"){try{(c=(l=Pe(this,yc)).onError)==null||c.call(l,n.error,p,y,v)}catch(x){Promise.reject(x)}try{(f=(u=Pe(this,yc)).onSettled)==null||f.call(u,void 0,n.error,p,y,v)}catch(x){Promise.reject(x)}}}this.listeners.forEach(p=>{p(Pe(this,nd))})})},Uz),bl,Vz,qK=(Vz=class extends Lg{constructor(t={}){super();Bt(this,bl);this.config=t,_t(this,bl,new Map)}build(t,n,r){const a=n.queryKey,s=n.queryHash??oD(a,n);let o=this.get(s);return o||(o=new MK({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Pe(this,bl).has(t.queryHash)||(Pe(this,bl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Pe(this,bl).get(t.queryHash);n&&(t.destroy(),n===t&&Pe(this,bl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){vi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Pe(this,bl).get(t)}getAll(){return[...Pe(this,bl).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>AI(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>AI(t,r)):n}notify(t){vi.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){vi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){vi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},bl=new WeakMap,Vz),Hr,rd,id,Zm,eg,ad,tg,ng,Hz,UK=(Hz=class{constructor(e={}){Bt(this,Hr);Bt(this,rd);Bt(this,id);Bt(this,Zm);Bt(this,eg);Bt(this,ad);Bt(this,tg);Bt(this,ng);_t(this,Hr,e.queryCache||new qK),_t(this,rd,e.mutationCache||new BK),_t(this,id,e.defaultOptions||{}),_t(this,Zm,new Map),_t(this,eg,new Map),_t(this,ad,0)}mount(){_j(this,ad)._++,Pe(this,ad)===1&&(_t(this,tg,uD.subscribe(async e=>{e&&(await this.resumePausedMutations(),Pe(this,Hr).onFocus())})),_t(this,ng,Cw.subscribe(async e=>{e&&(await this.resumePausedMutations(),Pe(this,Hr).onOnline())})))}unmount(){var e,t;_j(this,ad)._--,Pe(this,ad)===0&&((e=Pe(this,tg))==null||e.call(this),_t(this,tg,void 0),(t=Pe(this,ng))==null||t.call(this),_t(this,ng,void 0))}isFetching(e){return Pe(this,Hr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Pe(this,rd).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Pe(this,Hr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Pe(this,Hr).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(cd(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Pe(this,Hr).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=Pe(this,Hr).get(r.queryHash),s=a==null?void 0:a.state.data,o=SK(t,s);if(o!==void 0)return Pe(this,Hr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return vi.batch(()=>Pe(this,Hr).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Pe(this,Hr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Pe(this,Hr);vi.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Pe(this,Hr);return vi.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=vi.batch(()=>Pe(this,Hr).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Na).catch(Na)}invalidateQueries(e,t={}){return vi.batch(()=>(Pe(this,Hr).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=vi.batch(()=>Pe(this,Hr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(Na)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Na)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Pe(this,Hr).build(this,t);return n.isStaleByTime(cd(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Na).catch(Na)}fetchInfiniteQuery(e){return e.behavior=LI(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Na).catch(Na)}ensureInfiniteQueryData(e){return e.behavior=LI(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Cw.isOnline()?Pe(this,rd).resumePausedMutations():Promise.resolve()}getQueryCache(){return Pe(this,Hr)}getMutationCache(){return Pe(this,rd)}getDefaultOptions(){return Pe(this,id)}setDefaultOptions(e){_t(this,id,e)}setQueryDefaults(e,t){Pe(this,Zm).set(vf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Pe(this,Zm).values()],n={};return t.forEach(r=>{Rx(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Pe(this,eg).set(vf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Pe(this,eg).values()],n={};return t.forEach(r=>{Rx(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Pe(this,id).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=oD(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===lD&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Pe(this,id).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Pe(this,Hr).clear(),Pe(this,rd).clear()}},Hr=new WeakMap,rd=new WeakMap,id=new WeakMap,Zm=new WeakMap,eg=new WeakMap,ad=new WeakMap,tg=new WeakMap,ng=new WeakMap,Hz),nq=j.createContext(void 0),ns=e=>{const t=j.useContext(nq);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},VK=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(nq.Provider,{value:e,children:t})),rq=j.createContext(!1),HK=()=>j.useContext(rq);rq.Provider;function GK(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var WK=j.createContext(GK()),KK=()=>j.useContext(WK),YK=(e,t,n)=>{const r=n!=null&&n.state.error&&typeof e.throwOnError=="function"?cD(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(t.isReset()||(e.retryOnMount=!1))},QK=e=>{j.useEffect(()=>{e.clearReset()},[e])},XK=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||cD(n,[e.error,r])),JK=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>n(r(...a)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},ZK=(e,t)=>e.isLoading&&e.isFetching&&!t,eY=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,$I=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function tY(e,t,n){var y,v,x,b;const r=HK(),a=KK(),s=ns(),o=s.defaultQueryOptions(e);(v=(y=s.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,o);const l=s.getQueryCache().get(o.queryHash);o._optimisticResults=r?"isRestoring":"optimistic",JK(o),YK(o,a,l),QK(a);const c=!s.getQueryCache().get(o.queryHash),[u]=j.useState(()=>new t(s,o)),f=u.getOptimisticResult(o),p=!r&&e.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(w=>{const _=p?u.subscribe(vi.batchCalls(w)):Na;return u.updateResult(),_},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),j.useEffect(()=>{u.setOptions(o)},[o,u]),eY(o,f))throw $I(o,u,a);if(XK({result:f,errorResetBoundary:a,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;if((b=(x=s.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||b.call(x,o,f),o.experimental_prefetchInRender&&!yf&&ZK(f,r)){const w=c?$I(o,u,a):l==null?void 0:l.promise;w==null||w.catch(Na).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?f:u.trackResult(f)}function JS(e,t){return tY(e,IK)}function nY(e,t){const n=ns(),[r]=j.useState(()=>new zK(n,e));j.useEffect(()=>{r.setOptions(e)},[r,e]);const a=j.useSyncExternalStore(j.useCallback(o=>r.subscribe(vi.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=j.useCallback((o,l)=>{r.mutate(o,l).catch(Na)},[r]);if(a.error&&cD(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const rY=new UK({defaultOptions:{queries:{staleTime:0,gcTime:10*60*1e3,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!1}}}),Vt={clinicSettings:["clinicSettings"],clinicSubscription:["clinicSubscription"],patients:{all:["patients"],list:e=>["patients","list",e],detail:e=>["patients","detail",e],context:e=>["patients","context",e]},queue:{all:["queue"],today:["queue","today"],entry:e=>["queue","entry",e],latest:e=>["queue","patient",e,"latest"]},staff:{all:["staff"],list:["staff","list"],detail:e=>["staff","detail",e]},pharmacyOrders:{all:["pharmacyOrders"],detail:e=>["pharmacyOrders","detail",e],byPatient:e=>["pharmacyOrders","patient",e]},labOrders:{all:["labOrders"],detail:e=>["labOrders","detail",e],byPatient:e=>["labOrders","patient",e]},drugs:{all:["drugs"],list:["drugs","list"],detail:e=>["drugs","detail",e]},labTests:{all:["labTests"],list:["labTests","list"]},patientDebts:{balance:e=>["patientDebts","balance",e]},dental:{records:e=>["dental","records",e]}},iY="modulepreload",aY=function(e){return"/"+e},BI={},ZS=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(n.map(u=>{if(u=aY(u),u in BI)return;BI[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":iY,f||(y.as="script"),y.crossOrigin="",y.href=u,c&&y.setAttribute("nonce",c),document.head.appendChild(y),f)return new Promise((v,x)=>{y.addEventListener("load",v),y.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},Om=({message:e="Newtons Ai HMS",fullScreen:t=!1})=>i.jsx("div",{className:`loading-container ${t?"fullscreen":""}`,children:i.jsxs("div",{className:"loading-content",children:[i.jsxs("div",{className:"spinner-ring",children:[i.jsx("div",{}),i.jsx("div",{}),i.jsx("div",{}),i.jsx("div",{})]}),i.jsx("div",{className:"loading-title",children:e}),t&&i.jsx("div",{className:"loading-subtitle",children:"Optimizing your experience..."})]})});function sY(e={}){const{nonce:t,locale:n,onScriptLoadSuccess:r,onScriptLoadError:a}=e,[s,o]=j.useState(!1),l=j.useRef(r);l.current=r;const c=j.useRef(a);return c.current=a,j.useEffect(()=>{const u=document.createElement("script");return u.src="https://accounts.google.com/gsi/client",n&&(u.src+=`?hl=${n}`),u.async=!0,u.defer=!0,u.nonce=t,u.onload=()=>{var f;o(!0),(f=l.current)===null||f===void 0||f.call(l)},u.onerror=()=>{var f;o(!1),(f=c.current)===null||f===void 0||f.call(c)},document.body.appendChild(u),()=>{document.body.removeChild(u)}},[t]),s}const iq=j.createContext(null);function oY({clientId:e,nonce:t,locale:n,onScriptLoadSuccess:r,onScriptLoadError:a,children:s}){const o=sY({nonce:t,onScriptLoadSuccess:r,onScriptLoadError:a,locale:n}),l=j.useMemo(()=>({locale:n,clientId:e,scriptLoadedSuccessfully:o}),[e,o]);return ye.createElement(iq.Provider,{value:l},s)}function lY(){const e=j.useContext(iq);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function cY(e){var t;return(t=e==null?void 0:e.clientId)!==null&&t!==void 0?t:e==null?void 0:e.client_id}const uY={large:40,medium:32,small:20};function dY({onSuccess:e,onError:t,useOneTap:n,promptMomentNotification:r,type:a="standard",theme:s="outline",size:o="large",text:l,shape:c,logo_alignment:u,width:f,click_listener:p,state:y,containerProps:v,...x}){const b=j.useRef(null),{clientId:w,locale:_,scriptLoadedSuccessfully:T}=lY(),C=j.useRef(e);C.current=e;const O=j.useRef(t);O.current=t;const E=j.useRef(r);return E.current=r,j.useEffect(()=>{var P,I,F,$,z,L,H,V,ne;if(T)return(F=(I=(P=window==null?void 0:window.google)===null||P===void 0?void 0:P.accounts)===null||I===void 0?void 0:I.id)===null||F===void 0||F.initialize({client_id:w,callback:Z=>{var q;if(!(Z!=null&&Z.credential))return(q=O.current)===null||q===void 0?void 0:q.call(O);const{credential:K,select_by:se}=Z;C.current({credential:K,clientId:cY(Z),select_by:se})},...x}),(L=(z=($=window==null?void 0:window.google)===null||$===void 0?void 0:$.accounts)===null||z===void 0?void 0:z.id)===null||L===void 0||L.renderButton(b.current,{type:a,theme:s,size:o,text:l,shape:c,logo_alignment:u,width:f,locale:_,click_listener:p,state:y}),n&&((ne=(V=(H=window==null?void 0:window.google)===null||H===void 0?void 0:H.accounts)===null||V===void 0?void 0:V.id)===null||ne===void 0||ne.prompt(E.current)),()=>{var Z,q,K;n&&((K=(q=(Z=window==null?void 0:window.google)===null||Z===void 0?void 0:Z.accounts)===null||q===void 0?void 0:q.id)===null||K===void 0||K.cancel())}},[w,T,n,a,s,o,l,c,u,f,_]),ye.createElement("div",{...v,ref:b,style:{height:uY[o],...v==null?void 0:v.style}})}var Yv={},zI;function hY(){if(zI)return Yv;zI=1,Object.defineProperty(Yv,"__esModule",{value:!0}),Yv.parse=o,Yv.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,s=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function o(y,v){const x=new s,b=y.length;if(b<2)return x;const w=(v==null?void 0:v.decode)||f;let _=0;do{const T=y.indexOf("=",_);if(T===-1)break;const C=y.indexOf(";",_),O=C===-1?b:C;if(T>O){_=y.lastIndexOf(";",T-1)+1;continue}const E=l(y,_,T),P=c(y,T,E),I=y.slice(E,P);if(x[I]===void 0){let F=l(y,T+1,O),$=c(y,O,F);const z=w(y.slice(F,$));x[I]=z}_=O+1}while(_<b);return x}function l(y,v,x){do{const b=y.charCodeAt(v);if(b!==32&&b!==9)return v}while(++v<x);return x}function c(y,v,x){for(;v>x;){const b=y.charCodeAt(--v);if(b!==32&&b!==9)return v+1}return x}function u(y,v,x){const b=(x==null?void 0:x.encode)||encodeURIComponent;if(!e.test(y))throw new TypeError(`argument name is invalid: ${y}`);const w=b(v);if(!t.test(w))throw new TypeError(`argument val is invalid: ${v}`);let _=y+"="+w;if(!x)return _;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);_+="; Max-Age="+x.maxAge}if(x.domain){if(!n.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);_+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);_+="; Path="+x.path}if(x.expires){if(!p(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);_+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(_+="; HttpOnly"),x.secure&&(_+="; Secure"),x.partitioned&&(_+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return _}function f(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function p(y){return a.call(y)==="[object Date]"}return Yv}hY();var qI="popstate";function fY(e={}){function t(r,a){let{pathname:s,search:o,hash:l}=r.location;return Ik("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Lx(a)}return mY(t,n,null,e)}function Lr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pY(){return Math.random().toString(36).substring(2,10)}function UI(e,t){return{usr:e.state,key:e.key,idx:t}}function Ik(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Fg(t):t,state:n,key:t&&t.key||r||pY()}}function Lx({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Fg(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function mY(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,l="POP",c=null,u=f();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let w=f(),_=w==null?null:w-u;u=w,c&&c({action:l,location:b.location,delta:_})}function y(w,_){l="PUSH";let T=Ik(b.location,w,_);u=f()+1;let C=UI(T,u),O=b.createHref(T);try{o.pushState(C,"",O)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(O)}s&&c&&c({action:l,location:b.location,delta:1})}function v(w,_){l="REPLACE";let T=Ik(b.location,w,_);u=f();let C=UI(T,u),O=b.createHref(T);o.replaceState(C,"",O),s&&c&&c({action:l,location:b.location,delta:0})}function x(w){return gY(w)}let b={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(qI,p),c=w,()=>{a.removeEventListener(qI,p),c=null}},createHref(w){return t(a,w)},createURL:x,encodeLocation(w){let _=x(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:v,go(w){return o.go(w)}};return b}function gY(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Lr(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Lx(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function aq(e,t,n="/"){return yY(e,t,n,!1)}function yY(e,t,n,r){let a=typeof t=="string"?Fg(t):t,s=kc(a.pathname||"/",n);if(s==null)return null;let o=sq(e);vY(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=AY(s);l=TY(o[c],u,r)}return l}function sq(e,t=[],n=[],r=""){let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Lr(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let u=Sc([r,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(Lr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),sq(s.children,t,f,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:_Y(u,s.index),routesMeta:f})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of oq(s.path))a(s,o,c)}),t}function oq(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let o=oq(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function vY(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:CY(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var xY=/^:[\w-]+$/,bY=3,jY=2,wY=1,SY=10,NY=-2,VI=e=>e==="*";function _Y(e,t){let n=e.split("/"),r=n.length;return n.some(VI)&&(r+=NY),t&&(r+=jY),n.filter(a=>!VI(a)).reduce((a,s)=>a+(xY.test(s)?bY:s===""?wY:SY),r)}function CY(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function TY(e,t,n=!1){let{routesMeta:r}=e,a={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,f=s==="/"?t:t.slice(s.length)||"/",p=Tw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),y=c.route;if(!p&&u&&n&&!r[r.length-1].route.index&&(p=Tw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Sc([s,p.pathname]),pathnameBase:DY(Sc([s,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(s=Sc([s,p.pathnameBase]))}return o}function Tw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=EY(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:p},y)=>{if(f==="*"){let x=l[y]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const v=l[y];return p&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function EY(e,t=!1,n=!0){Qs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function AY(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function kc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function kY(e,t="/"){let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Fg(e):e;return{pathname:n?n.startsWith("/")?n:PY(n,t):t,search:MY(r),hash:IY(a)}}function PY(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function SC(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OY(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function hD(e){let t=OY(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function fD(e,t,n,r=!1){let a;typeof e=="string"?a=Fg(e):(a={...e},Lr(!a.pathname||!a.pathname.includes("?"),SC("?","pathname","search",a)),Lr(!a.pathname||!a.pathname.includes("#"),SC("#","pathname","hash",a)),Lr(!a.search||!a.search.includes("#"),SC("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;a.pathname=y.join("/")}l=p>=0?t[p]:"/"}let c=kY(a,l),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var Sc=e=>e.join("/").replace(/\/\/+/g,"/"),DY=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MY=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,IY=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function RY(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var lq=["POST","PUT","PATCH","DELETE"];new Set(lq);var LY=["GET",...lq];new Set(LY);var $g=j.createContext(null);$g.displayName="DataRouter";var eN=j.createContext(null);eN.displayName="DataRouterState";var cq=j.createContext({isTransitioning:!1});cq.displayName="ViewTransition";var FY=j.createContext(new Map);FY.displayName="Fetchers";var $Y=j.createContext(null);$Y.displayName="Await";var Io=j.createContext(null);Io.displayName="Navigation";var Ib=j.createContext(null);Ib.displayName="Location";var Ro=j.createContext({outlet:null,matches:[],isDataRoute:!1});Ro.displayName="Route";var pD=j.createContext(null);pD.displayName="RouteError";function BY(e,{relative:t}={}){Lr(Bg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=j.useContext(Io),{hash:a,pathname:s,search:o}=Rb(e,{relative:t}),l=s;return n!=="/"&&(l=s==="/"?n:Sc([n,s])),r.createHref({pathname:l,search:o,hash:a})}function Bg(){return j.useContext(Ib)!=null}function $r(){return Lr(Bg(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Ib).location}var uq="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dq(e){j.useContext(Io).static||j.useLayoutEffect(e)}function Mt(){let{isDataRoute:e}=j.useContext(Ro);return e?ZY():zY()}function zY(){Lr(Bg(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext($g),{basename:t,navigator:n}=j.useContext(Io),{matches:r}=j.useContext(Ro),{pathname:a}=$r(),s=JSON.stringify(hD(r)),o=j.useRef(!1);return dq(()=>{o.current=!0}),j.useCallback((c,u={})=>{if(Qs(o.current,uq),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=fD(c,JSON.parse(s),a,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Sc([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,s,a,e])}j.createContext(null);function Ai(){let{matches:e}=j.useContext(Ro),t=e[e.length-1];return t?t.params:{}}function Rb(e,{relative:t}={}){let{matches:n}=j.useContext(Ro),{pathname:r}=$r(),a=JSON.stringify(hD(n));return j.useMemo(()=>fD(e,JSON.parse(a),r,t==="path"),[e,a,r,t])}function qY(e,t){return hq(e,t)}function hq(e,t,n,r){var T;Lr(Bg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:s}=j.useContext(Io),{matches:o}=j.useContext(Ro),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";fq(u,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=$r(),v;if(t){let C=typeof t=="string"?Fg(t):t;Lr(f==="/"||((T=C.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=y;let x=v.pathname||"/",b=x;if(f!=="/"){let C=f.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=!s&&n&&n.matches&&n.matches.length>0?n.matches:aq(e,{pathname:b});Qs(p||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Qs(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=WY(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Sc([f,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Sc([f,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,r);return t&&_?j.createElement(Ib.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},_):_}function UY(){let e=JY(),t=RY(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:s},"ErrorBoundary")," or"," ",j.createElement("code",{style:s},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:a},n):null,o)}var VY=j.createElement(UY,null),HY=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(Ro.Provider,{value:this.props.routeContext},j.createElement(pD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GY({routeContext:e,match:t,children:n}){let r=j.useContext($g);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Ro.Provider,{value:e},n)}function WY(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,s=n==null?void 0:n.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Lr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:f,errors:p}=n,y=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!p||p[u.route.id]===void 0);if(u.route.lazy||y){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,f)=>{let p,y=!1,v=null,x=null;n&&(p=s&&u.route.id?s[u.route.id]:void 0,v=u.route.errorElement||VY,o&&(l<0&&f===0?(fq("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,x=null):l===f&&(y=!0,x=u.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,f+1)),w=()=>{let _;return p?_=v:y?_=x:u.route.Component?_=j.createElement(u.route.Component,null):u.route.element?_=u.route.element:_=c,j.createElement(GY,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:_})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?j.createElement(HY,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}function mD(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KY(e){let t=j.useContext($g);return Lr(t,mD(e)),t}function YY(e){let t=j.useContext(eN);return Lr(t,mD(e)),t}function QY(e){let t=j.useContext(Ro);return Lr(t,mD(e)),t}function gD(e){let t=QY(e),n=t.matches[t.matches.length-1];return Lr(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function XY(){return gD("useRouteId")}function JY(){var r;let e=j.useContext(pD),t=YY("useRouteError"),n=gD("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function ZY(){let{router:e}=KY("useNavigate"),t=gD("useNavigate"),n=j.useRef(!1);return dq(()=>{n.current=!0}),j.useCallback(async(a,s={})=>{Qs(n.current,uq),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var HI={};function fq(e,t,n){!t&&!HI[e]&&(HI[e]=!0,Qs(!1,n))}j.memo(eQ);function eQ({routes:e,future:t,state:n}){return hq(e,void 0,n,t)}function an({to:e,replace:t,state:n,relative:r}){Lr(Bg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=j.useContext(Io);Qs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=j.useContext(Ro),{pathname:o}=$r(),l=Mt(),c=fD(e,hD(s),o,r==="path"),u=JSON.stringify(c);return j.useEffect(()=>{l(JSON.parse(u),{replace:t,state:n,relative:r})},[l,u,r,t,n]),null}function gt(e){Lr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tQ({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:s=!1}){Lr(!Bg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=j.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof n=="string"&&(n=Fg(n));let{pathname:c="/",search:u="",hash:f="",state:p=null,key:y="default"}=n,v=j.useMemo(()=>{let x=kc(c,o);return x==null?null:{location:{pathname:x,search:u,hash:f,state:p,key:y},navigationType:r}},[o,c,u,f,p,y,r]);return Qs(v!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:j.createElement(Io.Provider,{value:l},j.createElement(Ib.Provider,{children:t,value:v}))}function Am({children:e,location:t}){return qY(Rk(e),t)}function Rk(e,t=[]){let n=[];return j.Children.forEach(e,(r,a)=>{if(!j.isValidElement(r))return;let s=[...t,a];if(r.type===j.Fragment){n.push.apply(n,Rk(r.props.children,s));return}Lr(r.type===gt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rk(r.props.children,s)),n.push(o)}),n}var uw="get",dw="application/x-www-form-urlencoded";function tN(e){return e!=null&&typeof e.tagName=="string"}function nQ(e){return tN(e)&&e.tagName.toLowerCase()==="button"}function rQ(e){return tN(e)&&e.tagName.toLowerCase()==="form"}function iQ(e){return tN(e)&&e.tagName.toLowerCase()==="input"}function aQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function sQ(e,t){return e.button===0&&(!t||t==="_self")&&!aQ(e)}function Lk(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function oQ(e,t){let n=Lk(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(s=>{n.append(a,s)})}),n}var Tj=null;function lQ(){if(Tj===null)try{new FormData(document.createElement("form"),0),Tj=!1}catch{Tj=!0}return Tj}var cQ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function NC(e){return e!=null&&!cQ.has(e)?(Qs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dw}"`),null):e}function uQ(e,t){let n,r,a,s,o;if(rQ(e)){let l=e.getAttribute("action");r=l?kc(l,t):null,n=e.getAttribute("method")||uw,a=NC(e.getAttribute("enctype"))||dw,s=new FormData(e)}else if(nQ(e)||iQ(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(r=c?kc(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||uw,a=NC(e.getAttribute("formenctype"))||NC(l.getAttribute("enctype"))||dw,s=new FormData(l,e),!lQ()){let{name:u,type:f,value:p}=e;if(f==="image"){let y=u?`${u}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else u&&s.append(u,p)}}else{if(tN(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=uw,r=null,a=dw,o=e}return s&&a==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:s,body:o}}function yD(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function dQ(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hQ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function fQ(e,t,n){let r=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let o=await dQ(s,n);return o.links?o.links():[]}return[]}));return yQ(r.flat(1).filter(hQ).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function GI(e,t,n,r,a,s){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var f;return n[u].pathname!==c.pathname||((f=n[u].route.path)==null?void 0:f.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return s==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):s==="data"?t.filter((c,u)=>{var p;let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function pQ(e,t,{includeHydrateFallback:n}={}){return mQ(e.map(r=>{let a=t.routes[r.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function mQ(e){return[...new Set(e)]}function gQ(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function yQ(e,t){let n=new Set;return new Set(t),e.reduce((r,a)=>{let s=JSON.stringify(gQ(a));return n.has(s)||(n.add(s),r.push({key:s,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vQ=new Set([100,101,204,205]);function xQ(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&kc(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function pq(){let e=j.useContext($g);return yD(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function bQ(){let e=j.useContext(eN);return yD(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var vD=j.createContext(void 0);vD.displayName="FrameworkContext";function mq(){let e=j.useContext(vD);return yD(e,"You must render this element inside a <HydratedRouter> element"),e}function jQ(e,t){let n=j.useContext(vD),[r,a]=j.useState(!1),[s,o]=j.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:p}=t,y=j.useRef(null);j.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let b=_=>{_.forEach(T=>{o(T.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return y.current&&w.observe(y.current),()=>{w.disconnect()}}},[e]),j.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let v=()=>{a(!0)},x=()=>{a(!1),o(!1)};return n?e!=="intent"?[s,y,{}]:[s,y,{onFocus:Qv(l,v),onBlur:Qv(c,x),onMouseEnter:Qv(u,v),onMouseLeave:Qv(f,x),onTouchStart:Qv(p,v)}]:[!1,y,{}]}function Qv(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function wQ({page:e,...t}){let{router:n}=pq(),r=j.useMemo(()=>aq(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?j.createElement(NQ,{page:e,matches:r,...t}):null}function SQ(e){let{manifest:t,routeModules:n}=mq(),[r,a]=j.useState([]);return j.useEffect(()=>{let s=!1;return fQ(e,t,n).then(o=>{s||a(o)}),()=>{s=!0}},[e,t,n]),r}function NQ({page:e,matches:t,...n}){let r=$r(),{manifest:a,routeModules:s}=mq(),{basename:o}=pq(),{loaderData:l,matches:c}=bQ(),u=j.useMemo(()=>GI(e,t,c,a,r,"data"),[e,t,c,a,r]),f=j.useMemo(()=>GI(e,t,c,a,r,"assets"),[e,t,c,a,r]),p=j.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let x=new Set,b=!1;if(t.forEach(_=>{var C;let T=a.routes[_.route.id];!T||!T.hasLoader||(!u.some(O=>O.route.id===_.route.id)&&_.route.id in l&&((C=s[_.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?b=!0:x.add(_.route.id))}),x.size===0)return[];let w=xQ(e,o);return b&&x.size>0&&w.searchParams.set("_routes",t.filter(_=>x.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[o,l,r,a,u,t,e,s]),y=j.useMemo(()=>pQ(f,a),[f,a]),v=SQ(f);return j.createElement(j.Fragment,null,p.map(x=>j.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),y.map(x=>j.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),v.map(({key:x,link:b})=>j.createElement("link",{key:x,...b})))}function _Q(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var gq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gq&&(window.__reactRouterVersion="7.6.0")}catch{}function CQ({basename:e,children:t,window:n}){let r=j.useRef();r.current==null&&(r.current=fY({window:n,v5Compat:!0}));let a=r.current,[s,o]=j.useState({action:a.action,location:a.location}),l=j.useCallback(c=>{j.startTransition(()=>o(c))},[o]);return j.useLayoutEffect(()=>a.listen(l),[a,l]),j.createElement(tQ,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a})}var yq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vr=j.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:p,...y},v){let{basename:x}=j.useContext(Io),b=typeof u=="string"&&yq.test(u),w,_=!1;if(typeof u=="string"&&b&&(w=u,gq))try{let $=new URL(window.location.href),z=u.startsWith("//")?new URL($.protocol+u):new URL(u),L=kc(z.pathname,x);z.origin===$.origin&&L!=null?u=L+z.search+z.hash:_=!0}catch{Qs(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=BY(u,{relative:a}),[C,O,E]=jQ(r,y),P=kQ(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:a,viewTransition:p});function I($){t&&t($),$.defaultPrevented||P($)}let F=j.createElement("a",{...y,...E,href:w||T,onClick:_||s?t:I,ref:_Q(v,O),target:c,"data-discover":!b&&n==="render"?"true":void 0});return C&&!b?j.createElement(j.Fragment,null,F,j.createElement(wQ,{page:T})):F});vr.displayName="Link";var TQ=j.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:a=!1,style:s,to:o,viewTransition:l,children:c,...u},f){let p=Rb(o,{relative:u.relative}),y=$r(),v=j.useContext(eN),{navigator:x,basename:b}=j.useContext(Io),w=v!=null&&IQ(p)&&l===!0,_=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,T=y.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&b&&(C=kc(C,b)||C);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let E=T===_||!a&&T.startsWith(_)&&T.charAt(O)==="/",P=C!=null&&(C===_||!a&&C.startsWith(_)&&C.charAt(_.length)==="/"),I={isActive:E,isPending:P,isTransitioning:w},F=E?t:void 0,$;typeof r=="function"?$=r(I):$=[r,E?"active":null,P?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof s=="function"?s(I):s;return j.createElement(vr,{...u,"aria-current":F,className:$,ref:f,style:z,to:o,viewTransition:l},typeof c=="function"?c(I):c)});TQ.displayName="NavLink";var EQ=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:s,method:o=uw,action:l,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:p,...y},v)=>{let x=DQ(),b=MQ(l,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&yq.test(l),T=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,E=(O==null?void 0:O.getAttribute("formmethod"))||o;x(O||C.currentTarget,{fetcherKey:t,method:E,navigate:n,replace:a,state:s,relative:u,preventScrollReset:f,viewTransition:p})};return j.createElement("form",{ref:v,method:w,action:b,onSubmit:r?c:T,...y,"data-discover":!_&&e==="render"?"true":void 0})});EQ.displayName="Form";function AQ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vq(e){let t=j.useContext($g);return Lr(t,AQ(e)),t}function kQ(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=Mt(),c=$r(),u=Rb(e,{relative:s});return j.useCallback(f=>{if(sQ(f,t)){f.preventDefault();let p=n!==void 0?n:Lx(c)===Lx(u);l(e,{replace:p,state:r,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,u,n,r,t,e,a,s,o])}function xq(e){Qs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=j.useRef(Lk(e)),n=j.useRef(!1),r=$r(),a=j.useMemo(()=>oQ(r.search,n.current?null:t.current),[r.search]),s=Mt(),o=j.useCallback((l,c)=>{const u=Lk(typeof l=="function"?l(a):l);n.current=!0,s("?"+u,c)},[s,a]);return[a,o]}var PQ=0,OQ=()=>`__${String(++PQ)}__`;function DQ(){let{router:e}=vq("useSubmit"),{basename:t}=j.useContext(Io),n=XY();return j.useCallback(async(r,a={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=uQ(r,t);if(a.navigate===!1){let f=a.fetcherKey||OQ();await e.fetch(f,n,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function MQ(e,{relative:t}={}){let{basename:n}=j.useContext(Io),r=j.useContext(Ro);Lr(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),s={...Rb(e||".",{relative:t})},o=$r();if(e==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(f=>f==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();s.search=f?`?${f}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Sc([n,s.pathname])),Lx(s)}function IQ(e,t={}){let n=j.useContext(cq);Lr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=vq("useViewTransitionState"),a=Rb(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=kc(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=kc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Tw(a.pathname,o)!=null||Tw(a.pathname,s)!=null}[...vQ];var RQ=Gz();class LQ extends j.Component{constructor(){super(...arguments);hr(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){return this.state.hasError?i.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red",border:"1px solid red",borderRadius:"5px"},children:[i.jsx("h1",{children:"Something went wrong."}),i.jsx("p",{children:"We are sorry for the inconvenience. Please try again later."})]}):this.props.children}}const bq=j.createContext(void 0),FQ=({children:e})=>{const[t,n]=j.useState(!1),[r,a]=j.useState({startDate:null,endDate:null}),[s,o]=j.useState(null),[l,c]=j.useState(null),[u,f]=j.useState(null),p=j.useCallback(()=>n(!0),[]),y=j.useCallback(()=>n(!1),[]),v=j.useCallback(()=>n(O=>!O),[]),x=j.useCallback(O=>{f(()=>O)},[]),b=j.useCallback(O=>{u?u(O):console.warn("Analysis navigator not registered")},[u]),[w,_]=j.useState(null),T=j.useCallback(O=>{_(()=>O)},[]),C=j.useCallback(async()=>w?await w():(console.warn("Analysis refresher not registered"),null),[w]);return i.jsx(bq.Provider,{value:{isOpen:t,openAssistant:p,closeAssistant:y,toggleAssistant:v,analysisDateRange:r,setAnalysisDateRange:a,analysisData:s,setAnalysisData:o,analysisNavigate:b,registerAnalysisNavigator:x,refreshAnalysis:C,registerAnalysisRefresher:T,pageContext:l,setPageContext:c},children:e})},nN=()=>{const e=j.useContext(bq);if(e===void 0)throw new Error("useClinicAssistantContext must be used within a ClinicAssistantProvider");return e},jq=j.createContext(void 0),$Q=({children:e})=>{const[t,n]=j.useState([]),[r,a]=j.useState(null),[s,o]=j.useState(""),[l,c]=j.useState(0),[u,f]=j.useState([]),p=j.useCallback(b=>{n(w=>[...w,b])},[]),y=j.useCallback((b,w)=>{n(_=>_.map(T=>T.id===b?{...T,...w}:T))},[]),v=j.useCallback(b=>{n(w=>w.filter(_=>_.id!==b))},[]),x=j.useCallback(()=>{n([]),a(null),o(""),c(0),f([])},[]);return i.jsx(jq.Provider,{value:{purchaseRows:t,setPurchaseRows:n,selectedDistributor:r,setSelectedDistributor:a,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:u,setDistributors:f,addPurchaseRow:p,updatePurchaseRow:y,removePurchaseRow:v,resetPurchase:x},children:e})},wq=()=>{const e=j.useContext(jq);if(!e)throw new Error("usePurchaseContext must be used within a PurchaseProvider");return e},Sq=j.createContext(void 0),BQ=({children:e})=>{const[t,n]=j.useState(!1),[r,a]=j.useState(""),s=j.useCallback(()=>n(!0),[]),o=j.useCallback(()=>n(!1),[]),l=j.useCallback(()=>n(c=>!c),[]);return j.useEffect(()=>{const c=u=>{(u.ctrlKey||u.metaKey)&&u.key==="k"&&(u.preventDefault(),l()),u.key==="Escape"&&t&&o()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[t,l,o]),i.jsx(Sq.Provider,{value:{isOpen:t,openCommandBar:s,closeCommandBar:o,toggleCommandBar:l,preFilledQuery:r,setPreFilledQuery:a},children:e})},Pc=()=>{const e=j.useContext(Sq);if(e===void 0)throw new Error("useCommandBar must be used within a CommandBarProvider");return e};function Oc(e){return Array.isArray?Array.isArray(e):Cq(e)==="[object Array]"}function zQ(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function qQ(e){return e==null?"":zQ(e)}function Sl(e){return typeof e=="string"}function Nq(e){return typeof e=="number"}function UQ(e){return e===!0||e===!1||VQ(e)&&Cq(e)=="[object Boolean]"}function _q(e){return typeof e=="object"}function VQ(e){return _q(e)&&e!==null}function bs(e){return e!=null}function _C(e){return!e.trim().length}function Cq(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const HQ="Incorrect 'index' type",GQ=e=>`Invalid value for key ${e}`,WQ=e=>`Pattern length exceeds max of ${e}.`,KQ=e=>`Missing ${e} property in key`,YQ=e=>`Property 'weight' in key '${e}' must be a positive integer`,WI=Object.prototype.hasOwnProperty;class QQ{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let a=Tq(r);this._keys.push(a),this._keyMap[a.id]=a,n+=a.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Tq(e){let t=null,n=null,r=null,a=1,s=null;if(Sl(e)||Oc(e))r=e,t=KI(e),n=Fk(e);else{if(!WI.call(e,"name"))throw new Error(KQ("name"));const o=e.name;if(r=o,WI.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(YQ(o));t=KI(o),n=Fk(o),s=e.getFn}return{path:t,id:n,weight:a,src:r,getFn:s}}function KI(e){return Oc(e)?e:e.split(".")}function Fk(e){return Oc(e)?e.join("."):e}function XQ(e,t){let n=[],r=!1;const a=(s,o,l)=>{if(bs(s))if(!o[l])n.push(s);else{let c=o[l];const u=s[c];if(!bs(u))return;if(l===o.length-1&&(Sl(u)||Nq(u)||UQ(u)))n.push(qQ(u));else if(Oc(u)){r=!0;for(let f=0,p=u.length;f<p;f+=1)a(u[f],o,l+1)}else o.length&&a(u,o,l+1)}};return a(e,Sl(t)?t.split("."):t,0),r?n:n[0]}const JQ={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ZQ={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},eX={location:0,threshold:.6,distance:100},tX={useExtendedSearch:!1,getFn:XQ,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var sn={...ZQ,...JQ,...eX,...tX};const nX=/[^ ]+/g;function rX(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(a){const s=a.match(nX).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class xD{constructor({getFn:t=sn.getFn,fieldNormWeight:n=sn.fieldNormWeight}={}){this.norm=rX(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Sl(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Sl(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!bs(t)||_C(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((a,s)=>{let o=a.getFn?a.getFn(t):this.getFn(t,a.path);if(bs(o)){if(Oc(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:f}=c.pop();if(bs(f))if(Sl(f)&&!_C(f)){let p={v:f,i:u,n:this.norm.get(f)};l.push(p)}else Oc(f)&&f.forEach((p,y)=>{c.push({nestedArrIndex:y,value:p})})}r.$[s]=l}else if(Sl(o)&&!_C(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Eq(e,t,{getFn:n=sn.getFn,fieldNormWeight:r=sn.fieldNormWeight}={}){const a=new xD({getFn:n,fieldNormWeight:r});return a.setKeys(e.map(Tq)),a.setSources(t),a.create(),a}function iX(e,{getFn:t=sn.getFn,fieldNormWeight:n=sn.fieldNormWeight}={}){const{keys:r,records:a}=e,s=new xD({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(a),s}function Ej(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:a=sn.distance,ignoreLocation:s=sn.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(r-n);return a?o+l/a:l?1:o}function aX(e=[],t=sn.minMatchCharLength){let n=[],r=-1,a=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&r===-1?r=s:!l&&r!==-1&&(a=s-1,a-r+1>=t&&n.push([r,a]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const Wh=32;function sX(e,t,n,{location:r=sn.location,distance:a=sn.distance,threshold:s=sn.threshold,findAllMatches:o=sn.findAllMatches,minMatchCharLength:l=sn.minMatchCharLength,includeMatches:c=sn.includeMatches,ignoreLocation:u=sn.ignoreLocation}={}){if(t.length>Wh)throw new Error(WQ(Wh));const f=t.length,p=e.length,y=Math.max(0,Math.min(r,p));let v=s,x=y;const b=l>1||c,w=b?Array(p):[];let _;for(;(_=e.indexOf(t,x))>-1;){let I=Ej(t,{currentLocation:_,expectedLocation:y,distance:a,ignoreLocation:u});if(v=Math.min(I,v),x=_+f,b){let F=0;for(;F<f;)w[_+F]=1,F+=1}}x=-1;let T=[],C=1,O=f+p;const E=1<<f-1;for(let I=0;I<f;I+=1){let F=0,$=O;for(;F<$;)Ej(t,{errors:I,currentLocation:y+$,expectedLocation:y,distance:a,ignoreLocation:u})<=v?F=$:O=$,$=Math.floor((O-F)/2+F);O=$;let z=Math.max(1,y-$+1),L=o?p:Math.min(y+$,p)+f,H=Array(L+2);H[L+1]=(1<<I)-1;for(let ne=L;ne>=z;ne-=1){let Z=ne-1,q=n[e.charAt(Z)];if(b&&(w[Z]=+!!q),H[ne]=(H[ne+1]<<1|1)&q,I&&(H[ne]|=(T[ne+1]|T[ne])<<1|1|T[ne+1]),H[ne]&E&&(C=Ej(t,{errors:I,currentLocation:Z,expectedLocation:y,distance:a,ignoreLocation:u}),C<=v)){if(v=C,x=Z,x<=y)break;z=Math.max(1,2*y-x)}}if(Ej(t,{errors:I+1,currentLocation:y,expectedLocation:y,distance:a,ignoreLocation:u})>v)break;T=H}const P={isMatch:x>=0,score:Math.max(.001,C)};if(b){const I=aX(w,l);I.length?c&&(P.indices=I):P.isMatch=!1}return P}function oX(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<r-n-1}return t}const Ew=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class Aq{constructor(t,{location:n=sn.location,threshold:r=sn.threshold,distance:a=sn.distance,includeMatches:s=sn.includeMatches,findAllMatches:o=sn.findAllMatches,minMatchCharLength:l=sn.minMatchCharLength,isCaseSensitive:c=sn.isCaseSensitive,ignoreDiacritics:u=sn.ignoreDiacritics,ignoreLocation:f=sn.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:a,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:f},t=c?t:t.toLowerCase(),t=u?Ew(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(v,x)=>{this.chunks.push({pattern:v,alphabet:oX(v),startIndex:x})},y=this.pattern.length;if(y>Wh){let v=0;const x=y%Wh,b=y-x;for(;v<b;)p(this.pattern.substr(v,Wh),v),v+=Wh;if(x){const w=y-Wh;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:a}=this.options;if(t=n?t:t.toLowerCase(),t=r?Ew(t):t,this.pattern===t){let b={isMatch:!0,score:0};return a&&(b.indices=[[0,t.length-1]]),b}const{location:s,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,ignoreLocation:f}=this.options;let p=[],y=0,v=!1;this.chunks.forEach(({pattern:b,alphabet:w,startIndex:_})=>{const{isMatch:T,score:C,indices:O}=sX(t,b,w,{location:s+_,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:u,includeMatches:a,ignoreLocation:f});T&&(v=!0),y+=C,T&&O&&(p=[...p,...O])});let x={isMatch:v,score:v?y/this.chunks.length:1};return v&&a&&(x.indices=p),x}}class fd{constructor(t){this.pattern=t}static isMultiMatch(t){return YI(t,this.multiRegex)}static isSingleMatch(t){return YI(t,this.singleRegex)}search(){}}function YI(e,t){const n=e.match(t);return n?n[1]:null}class lX extends fd{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class cX extends fd{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class uX extends fd{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class dX extends fd{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class hX extends fd{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class fX extends fd{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class kq extends fd{constructor(t,{location:n=sn.location,threshold:r=sn.threshold,distance:a=sn.distance,includeMatches:s=sn.includeMatches,findAllMatches:o=sn.findAllMatches,minMatchCharLength:l=sn.minMatchCharLength,isCaseSensitive:c=sn.isCaseSensitive,ignoreDiacritics:u=sn.ignoreDiacritics,ignoreLocation:f=sn.ignoreLocation}={}){super(t),this._bitapSearch=new Aq(t,{location:n,threshold:r,distance:a,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Pq extends fd{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const a=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,a.push([r,n-1]);const o=!!a.length;return{isMatch:o,score:o?0:1,indices:a}}}const $k=[lX,Pq,uX,dX,fX,hX,cX,kq],QI=$k.length,pX=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,mX="|";function gX(e,t={}){return e.split(mX).map(n=>{let r=n.trim().split(pX).filter(s=>s&&!!s.trim()),a=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let c=!1,u=-1;for(;!c&&++u<QI;){const f=$k[u];let p=f.isMultiMatch(l);p&&(a.push(new f(p,t)),c=!0)}if(!c)for(u=-1;++u<QI;){const f=$k[u];let p=f.isSingleMatch(l);if(p){a.push(new f(p,t));break}}}return a})}const yX=new Set([kq.type,Pq.type]);class vX{constructor(t,{isCaseSensitive:n=sn.isCaseSensitive,ignoreDiacritics:r=sn.ignoreDiacritics,includeMatches:a=sn.includeMatches,minMatchCharLength:s=sn.minMatchCharLength,ignoreLocation:o=sn.ignoreLocation,findAllMatches:l=sn.findAllMatches,location:c=sn.location,threshold:u=sn.threshold,distance:f=sn.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:a,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:c,threshold:u,distance:f},t=n?t:t.toLowerCase(),t=r?Ew(t):t,this.pattern=t,this.query=gX(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:a,ignoreDiacritics:s}=this.options;t=a?t:t.toLowerCase(),t=s?Ew(t):t;let o=0,l=[],c=0;for(let u=0,f=n.length;u<f;u+=1){const p=n[u];l.length=0,o=0;for(let y=0,v=p.length;y<v;y+=1){const x=p[y],{isMatch:b,indices:w,score:_}=x.search(t);if(b){if(o+=1,c+=_,r){const T=x.constructor.type;yX.has(T)?l=[...l,...w]:l.push(w)}}else{c=0,o=0,l.length=0;break}}if(o){let y={isMatch:!0,score:c/o};return r&&(y.indices=l),y}}return{isMatch:!1,score:1}}}const Bk=[];function xX(...e){Bk.push(...e)}function zk(e,t){for(let n=0,r=Bk.length;n<r;n+=1){let a=Bk[n];if(a.condition(e,t))return new a(e,t)}return new Aq(e,t)}const Aw={AND:"$and",OR:"$or"},qk={PATH:"$path",PATTERN:"$val"},Uk=e=>!!(e[Aw.AND]||e[Aw.OR]),bX=e=>!!e[qk.PATH],jX=e=>!Oc(e)&&_q(e)&&!Uk(e),XI=e=>({[Aw.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Oq(e,t,{auto:n=!0}={}){const r=a=>{let s=Object.keys(a);const o=bX(a);if(!o&&s.length>1&&!Uk(a))return r(XI(a));if(jX(a)){const c=o?a[qk.PATH]:s[0],u=o?a[qk.PATTERN]:a[c];if(!Sl(u))throw new Error(GQ(c));const f={keyId:Fk(c),pattern:u};return n&&(f.searcher=zk(u,t)),f}let l={children:[],operator:s[0]};return s.forEach(c=>{const u=a[c];Oc(u)&&u.forEach(f=>{l.children.push(r(f))})}),l};return Uk(e)||(e=XI(e)),r(e)}function wX(e,{ignoreFieldNorm:t=sn.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:a,norm:s,score:o})=>{const l=a?a.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=r})}function SX(e,t){const n=e.matches;t.matches=[],bs(n)&&n.forEach(r=>{if(!bs(r.indices)||!r.indices.length)return;const{indices:a,value:s}=r;let o={indices:a,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function NX(e,t){t.score=e.score}function _X(e,t,{includeMatches:n=sn.includeMatches,includeScore:r=sn.includeScore}={}){const a=[];return n&&a.push(SX),r&&a.push(NX),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return a.length&&a.forEach(c=>{c(s,l)}),l})}class Zs{constructor(t,n={},r){this.options={...sn,...n},this.options.useExtendedSearch,this._keyStore=new QQ(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof xD))throw new Error(HQ);this._myIndex=n||Eq(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){bs(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,a=this._docs.length;r<a;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,a-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:a,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let c=Sl(t)?Sl(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return wX(c,{ignoreFieldNorm:l}),s&&c.sort(o),Nq(n)&&n>-1&&(c=c.slice(0,n)),_X(c,this._docs,{includeMatches:r,includeScore:a})}_searchStringList(t){const n=zk(t,this.options),{records:r}=this._myIndex,a=[];return r.forEach(({v:s,i:o,n:l})=>{if(!bs(s))return;const{isMatch:c,score:u,indices:f}=n.searchIn(s);c&&a.push({item:s,idx:o,matches:[{score:u,value:s,norm:l,indices:f}]})}),a}_searchLogical(t){const n=Oq(t,this.options),r=(l,c,u)=>{if(!l.children){const{keyId:p,searcher:y}=l,v=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:y});return v&&v.length?[{idx:u,item:c,matches:v}]:[]}const f=[];for(let p=0,y=l.children.length;p<y;p+=1){const v=l.children[p],x=r(v,c,u);if(x.length)f.push(...x);else if(l.operator===Aw.AND)return[]}return f},a=this._myIndex.records,s={},o=[];return a.forEach(({$:l,i:c})=>{if(bs(l)){let u=r(n,l,c);u.length&&(s[c]||(s[c]={idx:c,item:l,matches:[]},o.push(s[c])),u.forEach(({matches:f})=>{s[c].matches.push(...f)}))}}),o}_searchObjectList(t){const n=zk(t,this.options),{keys:r,records:a}=this._myIndex,s=[];return a.forEach(({$:o,i:l})=>{if(!bs(o))return;let c=[];r.forEach((u,f)=>{c.push(...this._findMatches({key:u,value:o[f],searcher:n}))}),c.length&&s.push({idx:l,item:o,matches:c})}),s}_findMatches({key:t,value:n,searcher:r}){if(!bs(n))return[];let a=[];if(Oc(n))n.forEach(({v:s,i:o,n:l})=>{if(!bs(s))return;const{isMatch:c,score:u,indices:f}=r.searchIn(s);c&&a.push({score:u,key:t,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:c,indices:u}=r.searchIn(s);l&&a.push({score:c,key:t,value:s,norm:o,indices:u})}return a}}Zs.version="7.1.0";Zs.createIndex=Eq;Zs.parseIndex=iX;Zs.config=sn;Zs.parseQuery=Oq;xX(vX);var CC,JI;function CX(){if(JI)return CC;JI=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks,u=typeof self=="object"&&self&&self.Object===Object&&self,f=c||u||Function("return this")(),p=Object.prototype,y=p.toString,v=Math.max,x=Math.min,b=function(){return f.Date.now()};function w(E,P,I){var F,$,z,L,H,V,ne=0,Z=!1,q=!1,K=!0;if(typeof E!="function")throw new TypeError(e);P=O(P)||0,_(I)&&(Z=!!I.leading,q="maxWait"in I,z=q?v(O(I.maxWait)||0,P):z,K="trailing"in I?!!I.trailing:K);function se(ke){var de=F,Q=$;return F=$=void 0,ne=ke,L=E.apply(Q,de),L}function G(ke){return ne=ke,H=setTimeout(me,P),Z?se(ke):L}function B(ke){var de=ke-V,Q=ke-ne,oe=P-de;return q?x(oe,z-Q):oe}function fe(ke){var de=ke-V,Q=ke-ne;return V===void 0||de>=P||de<0||q&&Q>=z}function me(){var ke=b();if(fe(ke))return Y(ke);H=setTimeout(me,B(ke))}function Y(ke){return H=void 0,K&&F?se(ke):(F=$=void 0,L)}function xe(){H!==void 0&&clearTimeout(H),ne=0,F=V=$=H=void 0}function Ie(){return H===void 0?L:Y(b())}function Ne(){var ke=b(),de=fe(ke);if(F=arguments,$=this,V=ke,de){if(H===void 0)return G(V);if(q)return H=setTimeout(me,P),se(V)}return H===void 0&&(H=setTimeout(me,P)),L}return Ne.cancel=xe,Ne.flush=Ie,Ne}function _(E){var P=typeof E;return!!E&&(P=="object"||P=="function")}function T(E){return!!E&&typeof E=="object"}function C(E){return typeof E=="symbol"||T(E)&&y.call(E)==n}function O(E){if(typeof E=="number")return E;if(C(E))return t;if(_(E)){var P=typeof E.valueOf=="function"?E.valueOf():E;E=_(P)?P+"":P}if(typeof E!="string")return E===0?E:+E;E=E.replace(r,"");var I=s.test(E);return I||o.test(E)?l(E.slice(2),I?2:8):a.test(E)?t:+E}return CC=w,CC}var TX=CX();const pd=Bn(TX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AX=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),ZI=e=>{const t=AX(e);return t.charAt(0).toUpperCase()+t.slice(1)},Dq=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...kX,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Dq("lucide",a),...l},[...o.map(([u,f])=>j.createElement(u,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(e,t)=>{const n=j.forwardRef(({className:r,...a},s)=>j.createElement(PX,{ref:s,iconNode:t,className:Dq(`lucide-${EX(ZI(e))}`,`lucide-${e}`,r),...a}));return n.displayName=ZI(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vc=st("activity",OX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],Mq=st("align-justify",DX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],eR=st("arrow-down",MX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rn=st("arrow-left",IX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],tR=st("arrow-up",RX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],FX=st("beaker",LX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],BX=st("bed-double",$X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],qX=st("bed",zX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],VX=st("bell",UX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],nR=st("book-open",HX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Fx=st("bot",GX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],KX=st("brain-circuit",WX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],bD=st("brain",YX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M12 11v4",key:"a6ujw6"}],["path",{d:"M14 13h-4",key:"1pl8zg"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M18 6v14",key:"1mu4gy"}],["path",{d:"M6 6v14",key:"1s15cj"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],XX=st("briefcase-medical",QX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],ZX=st("building",JX);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eJ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],rR=st("calendar-check-2",eJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],jD=st("calendar-days",tJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pi=st("calendar",nJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Vk=st("camera",rJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Hk=st("chart-pie",iJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Tl=st("check",aJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sJ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Iq=st("chevron-down",sJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Lb=st("chevron-left",oJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],md=st("chevron-right",lJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],uJ=st("chevron-up",cJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Wr=st("circle-alert",dJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Dl=st("circle-check-big",hJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xx=st("circle-check",fJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Aj=st("circle-help",pJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],iR=st("circle-minus",mJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ws=st("circle-plus",gJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],vJ=st("circle-user",yJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],kw=st("clipboard-list",xJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],hw=st("clipboard",bJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Fb=st("clock",jJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],SJ=st("command",wJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],aR=st("copy",NJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],wD=st("credit-card",_J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],xf=st("dollar-sign",CJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Rq=st("download",TJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$m=st("eye",EJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],kJ=st("file-check",AJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],aa=st("file-text",PJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],TC=st("file",OJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],MJ=st("film",DJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Za=st("flask-conical",IJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],LJ=st("funnel",RJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Gk=st("globe",FJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],bf=st("grid-3x3",$J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ka=st("hash",BJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],qJ=st("heart",zJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Wk=st("house",UJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],sR=st("image",VJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Nl=st("info",HJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Lq=st("key",GJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],rg=st("layout-dashboard",WJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Fq=st("layout-grid",KJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],oR=st("lightbulb",YJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],$q=st("link",QJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],$b=st("list",XJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Dc=st("loader-circle",JJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],eZ=st("loader",ZJ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],nZ=st("lock",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],iZ=st("log-out",rZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],lR=st("mail",aZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Bq=st("map-pin",sZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],zq=st("maximize-2",oZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],EC=st("message-circle",lZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],uZ=st("mic-off",cZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],rN=st("mic",dZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],fZ=st("minimize-2",hZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],mZ=st("monitor",pZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],yZ=st("music",gZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],cR=st("package-open",vZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],jf=st("package",xZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],jZ=st("palette",bZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],uR=st("panels-top-left",wZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],SD=st("paperclip",SZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],_Z=st("pause",NZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xc=st("pen",CZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ig=st("phone",TZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Nc=st("pill",EZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AZ=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],qq=st("play",AZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Yr=st("plus",kZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],$x=st("printer",PZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Kk=st("refresh-cw",OZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],dR=st("rocket",DZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],IZ=st("rotate-ccw",MZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RZ=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Uq=st("rotate-cw",RZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Xs=st("save",LZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Un=st("search",FZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Z=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],iN=st("send",$Z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],hR=st("server-crash",BZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dd=st("settings",zZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qZ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Vq=st("share-2",qZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],VZ=st("shield-check",UZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ag=st("shield",HZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Yk=st("shopping-cart",GZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],KZ=st("smile",WZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YZ=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Pw=st("sparkles",YZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Pa=st("square-pen",QZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],JZ=st("square",XZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZZ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fR=st("star",ZZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eee=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],sg=st("stethoscope",eee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Bb=st("table",tee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ree=st("tag",nee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],aee=st("target",iee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zr=st("trash-2",see);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],lee=st("trending-up",oee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uee=st("triangle-alert",cee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ND=st("truck",dee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hee=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Qk=st("upload",hee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Hq=st("user-check",fee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],aN=st("user-plus",pee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],mr=st("user",mee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ko=st("users",gee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],vee=st("video",yee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xee=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ow=st("wallet",xee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zt=st("x",bee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],pR=st("zap",jee);function wee(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const See=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Nee=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,_ee={};function mR(e,t){return(_ee.jsx?Nee:See).test(e)}const Cee=/[ \t\n\f\r]/g;function Tee(e){return typeof e=="object"?e.type==="text"?gR(e.value):!1:gR(e)}function gR(e){return e.replace(Cee,"")===""}class zb{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}zb.prototype.normal={};zb.prototype.property={};zb.prototype.space=void 0;function Gq(e,t){const n={},r={};for(const a of e)Object.assign(n,a.property),Object.assign(r,a.normal);return new zb(n,r,t)}function Xk(e){return e.toLowerCase()}class rs{constructor(t,n){this.attribute=n,this.property=t}}rs.prototype.attribute="";rs.prototype.booleanish=!1;rs.prototype.boolean=!1;rs.prototype.commaOrSpaceSeparated=!1;rs.prototype.commaSeparated=!1;rs.prototype.defined=!1;rs.prototype.mustUseProperty=!1;rs.prototype.number=!1;rs.prototype.overloadedBoolean=!1;rs.prototype.property="";rs.prototype.spaceSeparated=!1;rs.prototype.space=void 0;let Eee=0;const mn=If(),ui=If(),Wq=If(),xt=If(),Cr=If(),Bm=If(),gs=If();function If(){return 2**++Eee}const Jk=Object.freeze(Object.defineProperty({__proto__:null,boolean:mn,booleanish:ui,commaOrSpaceSeparated:gs,commaSeparated:Bm,number:xt,overloadedBoolean:Wq,spaceSeparated:Cr},Symbol.toStringTag,{value:"Module"})),AC=Object.keys(Jk);class _D extends rs{constructor(t,n,r,a){let s=-1;if(super(t,n),yR(this,"space",a),typeof r=="number")for(;++s<AC.length;){const o=AC[s];yR(this,AC[s],(r&Jk[o])===Jk[o])}}}_D.prototype.defined=!0;function yR(e,t,n){n&&(e[t]=n)}function zg(e){const t={},n={};for(const[r,a]of Object.entries(e.properties)){const s=new _D(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Xk(r)]=r,n[Xk(s.attribute)]=r}return new zb(t,n,e.space)}const Kq=zg({properties:{ariaActiveDescendant:null,ariaAtomic:ui,ariaAutoComplete:null,ariaBusy:ui,ariaChecked:ui,ariaColCount:xt,ariaColIndex:xt,ariaColSpan:xt,ariaControls:Cr,ariaCurrent:null,ariaDescribedBy:Cr,ariaDetails:null,ariaDisabled:ui,ariaDropEffect:Cr,ariaErrorMessage:null,ariaExpanded:ui,ariaFlowTo:Cr,ariaGrabbed:ui,ariaHasPopup:null,ariaHidden:ui,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Cr,ariaLevel:xt,ariaLive:null,ariaModal:ui,ariaMultiLine:ui,ariaMultiSelectable:ui,ariaOrientation:null,ariaOwns:Cr,ariaPlaceholder:null,ariaPosInSet:xt,ariaPressed:ui,ariaReadOnly:ui,ariaRelevant:null,ariaRequired:ui,ariaRoleDescription:Cr,ariaRowCount:xt,ariaRowIndex:xt,ariaRowSpan:xt,ariaSelected:ui,ariaSetSize:xt,ariaSort:null,ariaValueMax:xt,ariaValueMin:xt,ariaValueNow:xt,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Yq(e,t){return t in e?e[t]:t}function Qq(e,t){return Yq(e,t.toLowerCase())}const Aee=zg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Bm,acceptCharset:Cr,accessKey:Cr,action:null,allow:null,allowFullScreen:mn,allowPaymentRequest:mn,allowUserMedia:mn,alt:null,as:null,async:mn,autoCapitalize:null,autoComplete:Cr,autoFocus:mn,autoPlay:mn,blocking:Cr,capture:null,charSet:null,checked:mn,cite:null,className:Cr,cols:xt,colSpan:null,content:null,contentEditable:ui,controls:mn,controlsList:Cr,coords:xt|Bm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mn,defer:mn,dir:null,dirName:null,disabled:mn,download:Wq,draggable:ui,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mn,formTarget:null,headers:Cr,height:xt,hidden:mn,high:xt,href:null,hrefLang:null,htmlFor:Cr,httpEquiv:Cr,id:null,imageSizes:null,imageSrcSet:null,inert:mn,inputMode:null,integrity:null,is:null,isMap:mn,itemId:null,itemProp:Cr,itemRef:Cr,itemScope:mn,itemType:Cr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mn,low:xt,manifest:null,max:null,maxLength:xt,media:null,method:null,min:null,minLength:xt,multiple:mn,muted:mn,name:null,nonce:null,noModule:mn,noValidate:mn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mn,optimum:xt,pattern:null,ping:Cr,placeholder:null,playsInline:mn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mn,referrerPolicy:null,rel:Cr,required:mn,reversed:mn,rows:xt,rowSpan:xt,sandbox:Cr,scope:null,scoped:mn,seamless:mn,selected:mn,shadowRootClonable:mn,shadowRootDelegatesFocus:mn,shadowRootMode:null,shape:null,size:xt,sizes:null,slot:null,span:xt,spellCheck:ui,src:null,srcDoc:null,srcLang:null,srcSet:null,start:xt,step:null,style:null,tabIndex:xt,target:null,title:null,translate:null,type:null,typeMustMatch:mn,useMap:null,value:ui,width:xt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Cr,axis:null,background:null,bgColor:null,border:xt,borderColor:null,bottomMargin:xt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mn,declare:mn,event:null,face:null,frame:null,frameBorder:null,hSpace:xt,leftMargin:xt,link:null,longDesc:null,lowSrc:null,marginHeight:xt,marginWidth:xt,noResize:mn,noHref:mn,noShade:mn,noWrap:mn,object:null,profile:null,prompt:null,rev:null,rightMargin:xt,rules:null,scheme:null,scrolling:ui,standby:null,summary:null,text:null,topMargin:xt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:xt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mn,disableRemotePlayback:mn,prefix:null,property:null,results:xt,security:null,unselectable:null},space:"html",transform:Qq}),kee=zg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:gs,accentHeight:xt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:xt,amplitude:xt,arabicForm:null,ascent:xt,attributeName:null,attributeType:null,azimuth:xt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:xt,by:null,calcMode:null,capHeight:xt,className:Cr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:xt,diffuseConstant:xt,direction:null,display:null,dur:null,divisor:xt,dominantBaseline:null,download:mn,dx:null,dy:null,edgeMode:null,editable:null,elevation:xt,enableBackground:null,end:null,event:null,exponent:xt,externalResourcesRequired:null,fill:null,fillOpacity:xt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Bm,g2:Bm,glyphName:Bm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:xt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:xt,horizOriginX:xt,horizOriginY:xt,id:null,ideographic:xt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:xt,k:xt,k1:xt,k2:xt,k3:xt,k4:xt,kernelMatrix:gs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:xt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:xt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:xt,overlineThickness:xt,paintOrder:null,panose1:null,path:null,pathLength:xt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Cr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:xt,pointsAtY:xt,pointsAtZ:xt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:gs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:gs,rev:gs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:gs,requiredFeatures:gs,requiredFonts:gs,requiredFormats:gs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:xt,specularExponent:xt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:xt,strikethroughThickness:xt,string:null,stroke:null,strokeDashArray:gs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:xt,strokeOpacity:xt,strokeWidth:null,style:null,surfaceScale:xt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:gs,tabIndex:xt,tableValues:null,target:null,targetX:xt,targetY:xt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:gs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:xt,underlineThickness:xt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:xt,values:null,vAlphabetic:xt,vMathematical:xt,vectorEffect:null,vHanging:xt,vIdeographic:xt,version:null,vertAdvY:xt,vertOriginX:xt,vertOriginY:xt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:xt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Yq}),Xq=zg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Jq=zg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Qq}),Zq=zg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Pee={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Oee=/[A-Z]/g,vR=/-[a-z]/g,Dee=/^data[-\w.:]+$/i;function Mee(e,t){const n=Xk(t);let r=t,a=rs;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Dee.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(vR,Ree);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!vR.test(s)){let o=s.replace(Oee,Iee);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=_D}return new a(r,t)}function Iee(e){return"-"+e.toLowerCase()}function Ree(e){return e.charAt(1).toUpperCase()}const Lee=Gq([Kq,Aee,Xq,Jq,Zq],"html"),CD=Gq([Kq,kee,Xq,Jq,Zq],"svg");function Fee(e){return e.join(" ").trim()}var vm={},kC,xR;function $ee(){if(xR)return kC;xR=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,u="/",f="*",p="",y="comment",v="declaration";kC=function(b,w){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];w=w||{};var _=1,T=1;function C(V){var ne=V.match(t);ne&&(_+=ne.length);var Z=V.lastIndexOf(c);T=~Z?V.length-Z:T+V.length}function O(){var V={line:_,column:T};return function(ne){return ne.position=new E(V),F(),ne}}function E(V){this.start=V,this.end={line:_,column:T},this.source=w.source}E.prototype.content=b;function P(V){var ne=new Error(w.source+":"+_+":"+T+": "+V);if(ne.reason=V,ne.filename=w.source,ne.line=_,ne.column=T,ne.source=b,!w.silent)throw ne}function I(V){var ne=V.exec(b);if(ne){var Z=ne[0];return C(Z),b=b.slice(Z.length),ne}}function F(){I(n)}function $(V){var ne;for(V=V||[];ne=z();)ne!==!1&&V.push(ne);return V}function z(){var V=O();if(!(u!=b.charAt(0)||f!=b.charAt(1))){for(var ne=2;p!=b.charAt(ne)&&(f!=b.charAt(ne)||u!=b.charAt(ne+1));)++ne;if(ne+=2,p===b.charAt(ne-1))return P("End of comment missing");var Z=b.slice(2,ne-2);return T+=2,C(Z),b=b.slice(ne),T+=2,V({type:y,comment:Z})}}function L(){var V=O(),ne=I(r);if(ne){if(z(),!I(a))return P("property missing ':'");var Z=I(s),q=V({type:v,property:x(ne[0].replace(e,p)),value:Z?x(Z[0].replace(e,p)):p});return I(o),q}}function H(){var V=[];$(V);for(var ne;ne=L();)ne!==!1&&(V.push(ne),$(V));return V}return F(),H()};function x(b){return b?b.replace(l,p):p}return kC}var bR;function Bee(){if(bR)return vm;bR=1;var e=vm&&vm.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vm,"__esModule",{value:!0}),vm.default=n;var t=e($ee());function n(r,a){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),l=typeof a=="function";return o.forEach(function(c){if(c.type==="declaration"){var u=c.property,f=c.value;l?a(u,f,c):f&&(s=s||{},s[u]=f)}}),s}return vm}var Xv={},jR;function zee(){if(jR)return Xv;jR=1,Object.defineProperty(Xv,"__esModule",{value:!0}),Xv.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,s=function(u){return!u||n.test(u)||e.test(u)},o=function(u,f){return f.toUpperCase()},l=function(u,f){return"".concat(f,"-")},c=function(u,f){return f===void 0&&(f={}),s(u)?u:(u=u.toLowerCase(),f.reactCompat?u=u.replace(a,l):u=u.replace(r,l),u.replace(t,o))};return Xv.camelCase=c,Xv}var Jv,wR;function qee(){if(wR)return Jv;wR=1;var e=Jv&&Jv.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(Bee()),n=zee();function r(a,s){var o={};return!a||typeof a!="string"||(0,t.default)(a,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return r.default=r,Jv=r,Jv}var Uee=qee();const Vee=Bn(Uee),eU=tU("end"),TD=tU("start");function tU(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Hee(e){const t=TD(e),n=eU(e);if(t&&n)return{start:t,end:n}}function Cx(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?SR(e.position):"start"in e||"end"in e?SR(e):"line"in e||"column"in e?Zk(e):""}function Zk(e){return NR(e&&e.line)+":"+NR(e&&e.column)}function SR(e){return Zk(e&&e.start)+"-"+Zk(e&&e.end)}function NR(e){return e&&typeof e=="number"?e:1}class la extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let a="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?a=t:!s.cause&&t&&(o=!0,a=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=a,this.line=l?l.line:void 0,this.name=Cx(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}la.prototype.file="";la.prototype.name="";la.prototype.reason="";la.prototype.message="";la.prototype.stack="";la.prototype.column=void 0;la.prototype.line=void 0;la.prototype.ancestors=void 0;la.prototype.cause=void 0;la.prototype.fatal=void 0;la.prototype.place=void 0;la.prototype.ruleId=void 0;la.prototype.source=void 0;const ED={}.hasOwnProperty,Gee=new Map,Wee=/[A-Z]/g,Kee=new Set(["table","tbody","thead","tfoot","tr"]),Yee=new Set(["td","th"]),nU="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Qee(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=ite(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=rte(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?CD:Lee,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=rU(a,e,void 0);return s&&typeof s!="string"?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}function rU(e,t,n){if(t.type==="element")return Xee(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Jee(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return ete(e,t,n);if(t.type==="mdxjsEsm")return Zee(e,t);if(t.type==="root")return tte(e,t,n);if(t.type==="text")return nte(e,t)}function Xee(e,t,n){const r=e.schema;let a=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=CD,e.schema=a),e.ancestors.push(t);const s=aU(e,t.tagName,!1),o=ate(e,t);let l=kD(e,t);return Kee.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!Tee(c):!0})),iU(e,o,s,t),AD(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Jee(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Bx(e,t.position)}function Zee(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Bx(e,t.position)}function ete(e,t,n){const r=e.schema;let a=r;t.name==="svg"&&r.space==="html"&&(a=CD,e.schema=a),e.ancestors.push(t);const s=t.name===null?e.Fragment:aU(e,t.name,!0),o=ste(e,t),l=kD(e,t);return iU(e,o,s,t),AD(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function tte(e,t,n){const r={};return AD(r,kD(e,t)),e.create(t,e.Fragment,r,n)}function nte(e,t){return t.value}function iU(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function AD(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function rte(e,t,n){return r;function r(a,s,o,l){const u=Array.isArray(o.children)?n:t;return l?u(s,o,l):u(s,o)}}function ite(e,t){return n;function n(r,a,s,o){const l=Array.isArray(s.children),c=TD(r);return t(a,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function ate(e,t){const n={};let r,a;for(a in t.properties)if(a!=="children"&&ED.call(t.properties,a)){const s=ote(e,a,t.properties[a]);if(s){const[o,l]=s;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&Yee.has(t.tagName)?r=l:n[o]=l}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function ste(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Bx(e,t.position);else{const a=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,s=e.evaluater.evaluateExpression(l.expression)}else Bx(e,t.position);else s=r.value===null?!0:r.value;n[a]=s}return n}function kD(e,t){const n=[];let r=-1;const a=e.passKeys?new Map:Gee;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=a.get(c)||0;o=c+"-"+u,a.set(c,u+1)}}const l=rU(e,s,o);l!==void 0&&n.push(l)}return n}function ote(e,t,n){const r=Mee(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?wee(n):Fee(n)),r.property==="style"){let a=typeof n=="object"?n:lte(e,String(n));return e.stylePropertyNameCase==="css"&&(a=cte(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&r.space?Pee[r.property]||r.property:r.attribute,n]}}function lte(e,t){try{return Vee(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,a=new la("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=nU+"#cannot-parse-style-attribute",a}}function aU(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let s=-1,o;for(;++s<a.length;){const l=mR(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=o}else r=mR(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const a=r.value;return ED.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(r);Bx(e)}function Bx(e,t){const n=new la("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=nU+"#cannot-handle-mdx-estrees-without-createevaluater",n}function cte(e){const t={};let n;for(n in e)ED.call(e,n)&&(t[ute(n)]=e[n]);return t}function ute(e){let t=e.replace(Wee,dte);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function dte(e){return"-"+e.toLowerCase()}const PC={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},hte={};function PD(e,t){const n=hte,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return sU(e,r,a)}function sU(e,t,n){if(fte(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return _R(e.children,t,n)}return Array.isArray(e)?_R(e,t,n):""}function _R(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=sU(e[a],t,n);return r.join("")}function fte(e){return!!(e&&typeof e=="object")}const CR=document.createElement("i");function OD(e){const t="&"+e+";";CR.innerHTML=t;const n=CR.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ss(e,t,n,r){const a=e.length;let s=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Gs(e,t){return e.length>0?(Ss(e,e.length,0,t),e):t}const TR={}.hasOwnProperty;function oU(e){const t={};let n=-1;for(;++n<e.length;)pte(t,e[n]);return t}function pte(e,t){let n;for(n in t){const a=(TR.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){TR.call(a,o)||(a[o]=[]);const l=s[o];mte(a[o],Array.isArray(l)?l:l?[l]:[])}}}function mte(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ss(e,0,0,r)}function lU(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Po(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ca=gd(/[A-Za-z]/),ia=gd(/[\dA-Za-z]/),gte=gd(/[#-'*+\--9=?A-Z^-~]/);function Dw(e){return e!==null&&(e<32||e===127)}const eP=gd(/\d/),yte=gd(/[\dA-Fa-f]/),vte=gd(/[!-/:-@[-`{-~]/);function Kt(e){return e!==null&&e<-2}function br(e){return e!==null&&(e<0||e===32)}function Pn(e){return e===-2||e===-1||e===32}const sN=gd(new RegExp("\\p{P}|\\p{S}","u")),wf=gd(/\s/);function gd(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function qg(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&ia(e.charCodeAt(n+1))&&ia(e.charCodeAt(n+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=e.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),a=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function $n(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Pn(c)?(e.enter(n),l(c)):t(c)}function l(c){return Pn(c)&&s++<a?(e.consume(c),l):(e.exit(n),t(c))}}const xte={tokenize:bte};function bte(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),$n(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),s(l)}function s(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return Kt(l)?(e.consume(l),e.exit("chunkText"),s):(e.consume(l),o)}}const jte={tokenize:wte},ER={tokenize:Ste};function wte(e){const t=this,n=[];let r=0,a,s,o;return l;function l(C){if(r<n.length){const O=n[r];return t.containerState=O[1],e.attempt(O[0].continuation,c,u)(C)}return u(C)}function c(C){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&T();const O=t.events.length;let E=O,P;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){P=t.events[E][1].end;break}_(r);let I=O;for(;I<t.events.length;)t.events[I][1].end={...P},I++;return Ss(t.events,E+1,0,t.events.slice(O)),t.events.length=I,u(C)}return l(C)}function u(C){if(r===n.length){if(!a)return y(C);if(a.currentConstruct&&a.currentConstruct.concrete)return x(C);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ER,f,p)(C)}function f(C){return a&&T(),_(r),y(C)}function p(C){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,x(C)}function y(C){return t.containerState={},e.attempt(ER,v,x)(C)}function v(C){return r++,n.push([t.currentConstruct,t.containerState]),y(C)}function x(C){if(C===null){a&&T(),_(0),e.consume(C);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),b(C)}function b(C){if(C===null){w(e.exit("chunkFlow"),!0),_(0),e.consume(C);return}return Kt(C)?(e.consume(C),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(C),b)}function w(C,O){const E=t.sliceStream(C);if(O&&E.push(null),C.previous=s,s&&(s.next=C),s=C,a.defineSkip(C.start),a.write(E),t.parser.lazy[C.start.line]){let P=a.events.length;for(;P--;)if(a.events[P][1].start.offset<o&&(!a.events[P][1].end||a.events[P][1].end.offset>o))return;const I=t.events.length;let F=I,$,z;for(;F--;)if(t.events[F][0]==="exit"&&t.events[F][1].type==="chunkFlow"){if($){z=t.events[F][1].end;break}$=!0}for(_(r),P=I;P<t.events.length;)t.events[P][1].end={...z},P++;Ss(t.events,F+1,0,t.events.slice(I)),t.events.length=P}}function _(C){let O=n.length;for(;O-- >C;){const E=n[O];t.containerState=E[1],E[0].exit.call(t,e)}n.length=C}function T(){a.write([null]),s=void 0,a=void 0,t.containerState._closeFlow=void 0}}function Ste(e,t,n){return $n(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function og(e){if(e===null||br(e)||wf(e))return 1;if(sN(e))return 2}function oN(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const s=e[a].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const tP={name:"attention",resolveAll:Nte,tokenize:_te};function Nte(e,t){let n=-1,r,a,s,o,l,c,u,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[r][1].end},y={...e[n][1].start};AR(p,-c),AR(y,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:y},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Gs(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Gs(u,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=Gs(u,oN(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Gs(u,[["exit",s,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,u=Gs(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,Ss(e,r-1,n-r+3,u),n=r+u.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function _te(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=og(r);let s;return o;function o(c){return s=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===s)return e.consume(c),l;const u=e.exit("attentionSequence"),f=og(c),p=!f||f===2&&a||n.includes(c),y=!a||a===2&&f||n.includes(r);return u._open=!!(s===42?p:p&&(a||!y)),u._close=!!(s===42?y:y&&(f||!p)),t(c)}}function AR(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Cte={name:"autolink",tokenize:Tte};function Tte(e,t,n){let r=0;return a;function a(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(v){return Ca(v)?(e.consume(v),o):v===64?n(v):u(v)}function o(v){return v===43||v===45||v===46||ia(v)?(r=1,l(v)):u(v)}function l(v){return v===58?(e.consume(v),r=0,c):(v===43||v===45||v===46||ia(v))&&r++<32?(e.consume(v),l):(r=0,u(v))}function c(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||Dw(v)?n(v):(e.consume(v),c)}function u(v){return v===64?(e.consume(v),f):gte(v)?(e.consume(v),u):n(v)}function f(v){return ia(v)?p(v):n(v)}function p(v){return v===46?(e.consume(v),r=0,f):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):y(v)}function y(v){if((v===45||ia(v))&&r++<63){const x=v===45?y:p;return e.consume(v),x}return n(v)}}const qb={partial:!0,tokenize:Ete};function Ete(e,t,n){return r;function r(s){return Pn(s)?$n(e,a,"linePrefix")(s):a(s)}function a(s){return s===null||Kt(s)?t(s):n(s)}}const cU={continuation:{tokenize:kte},exit:Pte,name:"blockQuote",tokenize:Ate};function Ate(e,t,n){const r=this;return a;function a(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Pn(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function kte(e,t,n){const r=this;return a;function a(o){return Pn(o)?$n(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(cU,t,n)(o)}}function Pte(e){e.exit("blockQuote")}const uU={name:"characterEscape",tokenize:Ote};function Ote(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),a}function a(s){return vte(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const dU={name:"characterReference",tokenize:Dte};function Dte(e,t,n){const r=this;let a=0,s,o;return l;function l(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),c}function c(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=ia,f(p))}function u(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=yte,f):(e.enter("characterReferenceValue"),s=7,o=eP,f(p))}function f(p){if(p===59&&a){const y=e.exit("characterReferenceValue");return o===ia&&!OD(r.sliceSerialize(y))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(p)&&a++<s?(e.consume(p),f):n(p)}}const kR={partial:!0,tokenize:Ite},PR={concrete:!0,name:"codeFenced",tokenize:Mte};function Mte(e,t,n){const r=this,a={partial:!0,tokenize:E};let s=0,o=0,l;return c;function c(P){return u(P)}function u(P){const I=r.events[r.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=P,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(P)}function f(P){return P===l?(o++,e.consume(P),f):o<3?n(P):(e.exit("codeFencedFenceSequence"),Pn(P)?$n(e,p,"whitespace")(P):p(P))}function p(P){return P===null||Kt(P)?(e.exit("codeFencedFence"),r.interrupt?t(P):e.check(kR,b,O)(P)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),y(P))}function y(P){return P===null||Kt(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(P)):Pn(P)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),$n(e,v,"whitespace")(P)):P===96&&P===l?n(P):(e.consume(P),y)}function v(P){return P===null||Kt(P)?p(P):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(P))}function x(P){return P===null||Kt(P)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(P)):P===96&&P===l?n(P):(e.consume(P),x)}function b(P){return e.attempt(a,O,w)(P)}function w(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),_}function _(P){return s>0&&Pn(P)?$n(e,T,"linePrefix",s+1)(P):T(P)}function T(P){return P===null||Kt(P)?e.check(kR,b,O)(P):(e.enter("codeFlowValue"),C(P))}function C(P){return P===null||Kt(P)?(e.exit("codeFlowValue"),T(P)):(e.consume(P),C)}function O(P){return e.exit("codeFenced"),t(P)}function E(P,I,F){let $=0;return z;function z(Z){return P.enter("lineEnding"),P.consume(Z),P.exit("lineEnding"),L}function L(Z){return P.enter("codeFencedFence"),Pn(Z)?$n(P,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Z):H(Z)}function H(Z){return Z===l?(P.enter("codeFencedFenceSequence"),V(Z)):F(Z)}function V(Z){return Z===l?($++,P.consume(Z),V):$>=o?(P.exit("codeFencedFenceSequence"),Pn(Z)?$n(P,ne,"whitespace")(Z):ne(Z)):F(Z)}function ne(Z){return Z===null||Kt(Z)?(P.exit("codeFencedFence"),I(Z)):F(Z)}}}function Ite(e,t,n){const r=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const OC={name:"codeIndented",tokenize:Lte},Rte={partial:!0,tokenize:Fte};function Lte(e,t,n){const r=this;return a;function a(u){return e.enter("codeIndented"),$n(e,s,"linePrefix",5)(u)}function s(u){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):Kt(u)?e.attempt(Rte,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||Kt(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function Fte(e,t,n){const r=this;return a;function a(o){return r.parser.lazy[r.now().line]?n(o):Kt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):$n(e,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):Kt(o)?a(o):n(o)}}const $te={name:"codeText",previous:zte,resolve:Bte,tokenize:qte};function Bte(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function zte(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function qte(e,t,n){let r=0,a,s;return o;function o(p){return e.enter("codeText"),e.enter("codeTextSequence"),l(p)}function l(p){return p===96?(e.consume(p),r++,l):(e.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),c):p===96?(s=e.enter("codeTextSequence"),a=0,f(p)):Kt(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(p))}function u(p){return p===null||p===32||p===96||Kt(p)?(e.exit("codeTextData"),c(p)):(e.consume(p),u)}function f(p){return p===96?(e.consume(p),a++,f):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(s.type="codeTextData",u(p))}}class Ute{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const a=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&Zv(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Zv(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Zv(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Zv(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Zv(this.left,n.reverse())}}}function Zv(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function hU(e){const t={};let n=-1,r,a,s,o,l,c,u;const f=new Ute(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Vte(f,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,a=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(r[1].end={...f.get(a)[1].start},l=f.slice(a,n),l.unshift(r),f.splice(a,n-a+1,l))}}return Ss(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function Vte(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let f,p,y=-1,v=n,x=0,b=0;const w=[b];for(;v;){for(;e.get(++a)[1]!==v;);s.push(a),v._tokenizer||(f=r.sliceStream(v),v.next||f.push(null),p&&o.defineSkip(v.start),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=v,v=v.next}for(v=n;++y<l.length;)l[y][0]==="exit"&&l[y-1][0]==="enter"&&l[y][1].type===l[y-1][1].type&&l[y][1].start.line!==l[y][1].end.line&&(b=y+1,w.push(b),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(o.events=[],v?(v._tokenizer=void 0,v.previous=void 0):w.pop(),y=w.length;y--;){const _=l.slice(w[y],w[y+1]),T=s.pop();c.push([T,T+_.length-1]),e.splice(T,2,_)}for(c.reverse(),y=-1;++y<c.length;)u[x+c[y][0]]=x+c[y][1],x+=c[y][1]-c[y][0]-1;return u}const Hte={resolve:Wte,tokenize:Kte},Gte={partial:!0,tokenize:Yte};function Wte(e){return hU(e),e}function Kte(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?s(l):Kt(l)?e.check(Gte,o,s)(l):(e.consume(l),a)}function s(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function Yte(e,t,n){const r=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),$n(e,s,"linePrefix")}function s(o){if(o===null||Kt(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function fU(e,t,n,r,a,s,o,l,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(_){return _===60?(e.enter(r),e.enter(a),e.enter(s),e.consume(_),e.exit(s),y):_===null||_===32||_===41||Dw(_)?n(_):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),b(_))}function y(_){return _===62?(e.enter(s),e.consume(_),e.exit(s),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),v(_))}function v(_){return _===62?(e.exit("chunkString"),e.exit(l),y(_)):_===null||_===60||Kt(_)?n(_):(e.consume(_),_===92?x:v)}function x(_){return _===60||_===62||_===92?(e.consume(_),v):v(_)}function b(_){return!f&&(_===null||_===41||br(_))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(_)):f<u&&_===40?(e.consume(_),f++,b):_===41?(e.consume(_),f--,b):_===null||_===32||_===40||Dw(_)?n(_):(e.consume(_),_===92?w:b)}function w(_){return _===40||_===41||_===92?(e.consume(_),b):b(_)}}function pU(e,t,n,r,a,s){const o=this;let l=0,c;return u;function u(v){return e.enter(r),e.enter(a),e.consume(v),e.exit(a),e.enter(s),f}function f(v){return l>999||v===null||v===91||v===93&&!c||v===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(v):v===93?(e.exit(s),e.enter(a),e.consume(v),e.exit(a),e.exit(r),t):Kt(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===null||v===91||v===93||Kt(v)||l++>999?(e.exit("chunkString"),f(v)):(e.consume(v),c||(c=!Pn(v)),v===92?y:p)}function y(v){return v===91||v===92||v===93?(e.consume(v),l++,p):p(v)}}function mU(e,t,n,r,a,s){let o;return l;function l(y){return y===34||y===39||y===40?(e.enter(r),e.enter(a),e.consume(y),e.exit(a),o=y===40?41:y,c):n(y)}function c(y){return y===o?(e.enter(a),e.consume(y),e.exit(a),e.exit(r),t):(e.enter(s),u(y))}function u(y){return y===o?(e.exit(s),c(o)):y===null?n(y):Kt(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),$n(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===o||y===null||Kt(y)?(e.exit("chunkString"),u(y)):(e.consume(y),y===92?p:f)}function p(y){return y===o||y===92?(e.consume(y),f):f(y)}}function Tx(e,t){let n;return r;function r(a){return Kt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):Pn(a)?$n(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const Qte={name:"definition",tokenize:Jte},Xte={partial:!0,tokenize:Zte};function Jte(e,t,n){const r=this;let a;return s;function s(v){return e.enter("definition"),o(v)}function o(v){return pU.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function l(v){return a=Po(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),c):n(v)}function c(v){return br(v)?Tx(e,u)(v):u(v)}function u(v){return fU(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function f(v){return e.attempt(Xte,p,p)(v)}function p(v){return Pn(v)?$n(e,y,"whitespace")(v):y(v)}function y(v){return v===null||Kt(v)?(e.exit("definition"),r.parser.defined.push(a),t(v)):n(v)}}function Zte(e,t,n){return r;function r(l){return br(l)?Tx(e,a)(l):n(l)}function a(l){return mU(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Pn(l)?$n(e,o,"whitespace")(l):o(l)}function o(l){return l===null||Kt(l)?t(l):n(l)}}const ene={name:"hardBreakEscape",tokenize:tne};function tne(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),a}function a(s){return Kt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const nne={name:"headingAtx",resolve:rne,tokenize:ine};function rne(e,t){let n=e.length-2,r=3,a,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ss(e,r,n-r+1,[["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t]])),e}function ine(e,t,n){let r=0;return a;function a(f){return e.enter("atxHeading"),s(f)}function s(f){return e.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&r++<6?(e.consume(f),o):f===null||br(f)?(e.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(e.enter("atxHeadingSequence"),c(f)):f===null||Kt(f)?(e.exit("atxHeading"),t(f)):Pn(f)?$n(e,l,"whitespace")(f):(e.enter("atxHeadingText"),u(f))}function c(f){return f===35?(e.consume(f),c):(e.exit("atxHeadingSequence"),l(f))}function u(f){return f===null||f===35||br(f)?(e.exit("atxHeadingText"),l(f)):(e.consume(f),u)}}const ane=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],OR=["pre","script","style","textarea"],sne={concrete:!0,name:"htmlFlow",resolveTo:cne,tokenize:une},one={partial:!0,tokenize:hne},lne={partial:!0,tokenize:dne};function cne(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function une(e,t,n){const r=this;let a,s,o,l,c;return u;function u(Y){return f(Y)}function f(Y){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Y),p}function p(Y){return Y===33?(e.consume(Y),y):Y===47?(e.consume(Y),s=!0,b):Y===63?(e.consume(Y),a=3,r.interrupt?t:B):Ca(Y)?(e.consume(Y),o=String.fromCharCode(Y),w):n(Y)}function y(Y){return Y===45?(e.consume(Y),a=2,v):Y===91?(e.consume(Y),a=5,l=0,x):Ca(Y)?(e.consume(Y),a=4,r.interrupt?t:B):n(Y)}function v(Y){return Y===45?(e.consume(Y),r.interrupt?t:B):n(Y)}function x(Y){const xe="CDATA[";return Y===xe.charCodeAt(l++)?(e.consume(Y),l===xe.length?r.interrupt?t:H:x):n(Y)}function b(Y){return Ca(Y)?(e.consume(Y),o=String.fromCharCode(Y),w):n(Y)}function w(Y){if(Y===null||Y===47||Y===62||br(Y)){const xe=Y===47,Ie=o.toLowerCase();return!xe&&!s&&OR.includes(Ie)?(a=1,r.interrupt?t(Y):H(Y)):ane.includes(o.toLowerCase())?(a=6,xe?(e.consume(Y),_):r.interrupt?t(Y):H(Y)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Y):s?T(Y):C(Y))}return Y===45||ia(Y)?(e.consume(Y),o+=String.fromCharCode(Y),w):n(Y)}function _(Y){return Y===62?(e.consume(Y),r.interrupt?t:H):n(Y)}function T(Y){return Pn(Y)?(e.consume(Y),T):z(Y)}function C(Y){return Y===47?(e.consume(Y),z):Y===58||Y===95||Ca(Y)?(e.consume(Y),O):Pn(Y)?(e.consume(Y),C):z(Y)}function O(Y){return Y===45||Y===46||Y===58||Y===95||ia(Y)?(e.consume(Y),O):E(Y)}function E(Y){return Y===61?(e.consume(Y),P):Pn(Y)?(e.consume(Y),E):C(Y)}function P(Y){return Y===null||Y===60||Y===61||Y===62||Y===96?n(Y):Y===34||Y===39?(e.consume(Y),c=Y,I):Pn(Y)?(e.consume(Y),P):F(Y)}function I(Y){return Y===c?(e.consume(Y),c=null,$):Y===null||Kt(Y)?n(Y):(e.consume(Y),I)}function F(Y){return Y===null||Y===34||Y===39||Y===47||Y===60||Y===61||Y===62||Y===96||br(Y)?E(Y):(e.consume(Y),F)}function $(Y){return Y===47||Y===62||Pn(Y)?C(Y):n(Y)}function z(Y){return Y===62?(e.consume(Y),L):n(Y)}function L(Y){return Y===null||Kt(Y)?H(Y):Pn(Y)?(e.consume(Y),L):n(Y)}function H(Y){return Y===45&&a===2?(e.consume(Y),q):Y===60&&a===1?(e.consume(Y),K):Y===62&&a===4?(e.consume(Y),fe):Y===63&&a===3?(e.consume(Y),B):Y===93&&a===5?(e.consume(Y),G):Kt(Y)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(one,me,V)(Y)):Y===null||Kt(Y)?(e.exit("htmlFlowData"),V(Y)):(e.consume(Y),H)}function V(Y){return e.check(lne,ne,me)(Y)}function ne(Y){return e.enter("lineEnding"),e.consume(Y),e.exit("lineEnding"),Z}function Z(Y){return Y===null||Kt(Y)?V(Y):(e.enter("htmlFlowData"),H(Y))}function q(Y){return Y===45?(e.consume(Y),B):H(Y)}function K(Y){return Y===47?(e.consume(Y),o="",se):H(Y)}function se(Y){if(Y===62){const xe=o.toLowerCase();return OR.includes(xe)?(e.consume(Y),fe):H(Y)}return Ca(Y)&&o.length<8?(e.consume(Y),o+=String.fromCharCode(Y),se):H(Y)}function G(Y){return Y===93?(e.consume(Y),B):H(Y)}function B(Y){return Y===62?(e.consume(Y),fe):Y===45&&a===2?(e.consume(Y),B):H(Y)}function fe(Y){return Y===null||Kt(Y)?(e.exit("htmlFlowData"),me(Y)):(e.consume(Y),fe)}function me(Y){return e.exit("htmlFlow"),t(Y)}}function dne(e,t,n){const r=this;return a;function a(o){return Kt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function hne(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(qb,t,n)}}const fne={name:"htmlText",tokenize:pne};function pne(e,t,n){const r=this;let a,s,o;return l;function l(B){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(B),c}function c(B){return B===33?(e.consume(B),u):B===47?(e.consume(B),E):B===63?(e.consume(B),C):Ca(B)?(e.consume(B),F):n(B)}function u(B){return B===45?(e.consume(B),f):B===91?(e.consume(B),s=0,x):Ca(B)?(e.consume(B),T):n(B)}function f(B){return B===45?(e.consume(B),v):n(B)}function p(B){return B===null?n(B):B===45?(e.consume(B),y):Kt(B)?(o=p,K(B)):(e.consume(B),p)}function y(B){return B===45?(e.consume(B),v):p(B)}function v(B){return B===62?q(B):B===45?y(B):p(B)}function x(B){const fe="CDATA[";return B===fe.charCodeAt(s++)?(e.consume(B),s===fe.length?b:x):n(B)}function b(B){return B===null?n(B):B===93?(e.consume(B),w):Kt(B)?(o=b,K(B)):(e.consume(B),b)}function w(B){return B===93?(e.consume(B),_):b(B)}function _(B){return B===62?q(B):B===93?(e.consume(B),_):b(B)}function T(B){return B===null||B===62?q(B):Kt(B)?(o=T,K(B)):(e.consume(B),T)}function C(B){return B===null?n(B):B===63?(e.consume(B),O):Kt(B)?(o=C,K(B)):(e.consume(B),C)}function O(B){return B===62?q(B):C(B)}function E(B){return Ca(B)?(e.consume(B),P):n(B)}function P(B){return B===45||ia(B)?(e.consume(B),P):I(B)}function I(B){return Kt(B)?(o=I,K(B)):Pn(B)?(e.consume(B),I):q(B)}function F(B){return B===45||ia(B)?(e.consume(B),F):B===47||B===62||br(B)?$(B):n(B)}function $(B){return B===47?(e.consume(B),q):B===58||B===95||Ca(B)?(e.consume(B),z):Kt(B)?(o=$,K(B)):Pn(B)?(e.consume(B),$):q(B)}function z(B){return B===45||B===46||B===58||B===95||ia(B)?(e.consume(B),z):L(B)}function L(B){return B===61?(e.consume(B),H):Kt(B)?(o=L,K(B)):Pn(B)?(e.consume(B),L):$(B)}function H(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),a=B,V):Kt(B)?(o=H,K(B)):Pn(B)?(e.consume(B),H):(e.consume(B),ne)}function V(B){return B===a?(e.consume(B),a=void 0,Z):B===null?n(B):Kt(B)?(o=V,K(B)):(e.consume(B),V)}function ne(B){return B===null||B===34||B===39||B===60||B===61||B===96?n(B):B===47||B===62||br(B)?$(B):(e.consume(B),ne)}function Z(B){return B===47||B===62||br(B)?$(B):n(B)}function q(B){return B===62?(e.consume(B),e.exit("htmlTextData"),e.exit("htmlText"),t):n(B)}function K(B){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),se}function se(B){return Pn(B)?$n(e,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):G(B)}function G(B){return e.enter("htmlTextData"),o(B)}}const DD={name:"labelEnd",resolveAll:vne,resolveTo:xne,tokenize:bne},mne={tokenize:jne},gne={tokenize:wne},yne={tokenize:Sne};function vne(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",t+=a}}return e.length!==n.length&&Ss(e,0,e.length,n),e}function xne(e,t){let n=e.length,r=0,a,s,o,l;for(;n--;)if(a=e[n][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(o=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},f={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=Gs(l,e.slice(s+1,s+r+3)),l=Gs(l,[["enter",f,t]]),l=Gs(l,oN(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),l=Gs(l,[["exit",f,t],e[o-2],e[o-1],["exit",u,t]]),l=Gs(l,e.slice(o+1)),l=Gs(l,[["exit",c,t]]),Ss(e,s,e.length,l),e}function bne(e,t,n){const r=this;let a=r.events.length,s,o;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){s=r.events[a][1];break}return l;function l(y){return s?s._inactive?p(y):(o=r.parser.defined.includes(Po(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(y),e.exit("labelMarker"),e.exit("labelEnd"),c):n(y)}function c(y){return y===40?e.attempt(mne,f,o?f:p)(y):y===91?e.attempt(gne,f,o?u:p)(y):o?f(y):p(y)}function u(y){return e.attempt(yne,f,p)(y)}function f(y){return t(y)}function p(y){return s._balanced=!0,n(y)}}function jne(e,t,n){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),a}function a(p){return br(p)?Tx(e,s)(p):s(p)}function s(p){return p===41?f(p):fU(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return br(p)?Tx(e,c)(p):f(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?mU(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function u(p){return br(p)?Tx(e,f)(p):f(p)}function f(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function wne(e,t,n){const r=this;return a;function a(l){return pU.call(r,e,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(Po(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function Sne(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),a}function a(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Nne={name:"labelStartImage",resolveAll:DD.resolveAll,tokenize:_ne};function _ne(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),s}function s(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const Cne={name:"labelStartLink",resolveAll:DD.resolveAll,tokenize:Tne};function Tne(e,t,n){const r=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const DC={name:"lineEnding",tokenize:Ene};function Ene(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),$n(e,t,"linePrefix")}}const fw={name:"thematicBreak",tokenize:Ane};function Ane(e,t,n){let r=0,a;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return a=u,l(u)}function l(u){return u===a?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||Kt(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===a?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),Pn(u)?$n(e,l,"whitespace")(u):l(u))}}const Ka={continuation:{tokenize:Dne},exit:Ine,name:"list",tokenize:One},kne={partial:!0,tokenize:Rne},Pne={partial:!0,tokenize:Mne};function One(e,t,n){const r=this,a=r.events[r.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(v){const x=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:eP(v)){if(r.containerState.type||(r.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(fw,n,u)(v):u(v);if(!r.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(v)}return n(v)}function c(v){return eP(v)&&++o<10?(e.consume(v),c):(!r.interrupt||o<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),u(v)):n(v)}function u(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,e.check(qb,r.interrupt?n:f,e.attempt(kne,y,p))}function f(v){return r.containerState.initialBlankLine=!0,s++,y(v)}function p(v){return Pn(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),y):n(v)}function y(v){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function Dne(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(qb,a,s);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,$n(e,t,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!Pn(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Pne,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,$n(e,e.attempt(Ka,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Mne(e,t,n){const r=this;return $n(e,a,"listItemIndent",r.containerState.size+1);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Ine(e){e.exit(this.containerState.type)}function Rne(e,t,n){const r=this;return $n(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const o=r.events[r.events.length-1];return!Pn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const DR={name:"setextUnderline",resolveTo:Lne,tokenize:Fne};function Lne(e,t){let n=e.length,r,a,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",s?(e.splice(a,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function Fne(e,t,n){const r=this;let a;return s;function s(u){let f=r.events.length,p;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){p=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),a=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===a?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Pn(u)?$n(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||Kt(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const $ne={tokenize:Bne};function Bne(e){const t=this,n=e.attempt(qb,r,e.attempt(this.parser.constructs.flowInitial,a,$n(e,e.attempt(this.parser.constructs.flow,a,e.attempt(Hte,a)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const zne={resolveAll:yU()},qne=gU("string"),Une=gU("text");function gU(e){return{resolveAll:yU(e==="text"?Vne:void 0),tokenize:t};function t(n){const r=this,a=this.parser.constructs[e],s=n.attempt(a,o,l);return o;function o(f){return u(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return u(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function u(f){if(f===null)return!0;const p=a[f];let y=-1;if(p)for(;++y<p.length;){const v=p[y];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function yU(e){return t;function t(n,r){let a=-1,s;for(;++a<=n.length;)s===void 0?n[a]&&n[a][1].type==="data"&&(s=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==s+2&&(n[s][1].end=n[a-1][1].end,n.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(n,r):n}}function Vne(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let s=a.length,o=-1,l=0,c;for(;s--;){const u=a[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const Hne={42:Ka,43:Ka,45:Ka,48:Ka,49:Ka,50:Ka,51:Ka,52:Ka,53:Ka,54:Ka,55:Ka,56:Ka,57:Ka,62:cU},Gne={91:Qte},Wne={[-2]:OC,[-1]:OC,32:OC},Kne={35:nne,42:fw,45:[DR,fw],60:sne,61:DR,95:fw,96:PR,126:PR},Yne={38:dU,92:uU},Qne={[-5]:DC,[-4]:DC,[-3]:DC,33:Nne,38:dU,42:tP,60:[Cte,fne],91:Cne,92:[ene,uU],93:DD,95:tP,96:$te},Xne={null:[tP,zne]},Jne={null:[42,95]},Zne={null:[]},ere=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Jne,contentInitial:Gne,disable:Zne,document:Hne,flow:Kne,flowInitial:Wne,insideSpan:Xne,string:Yne,text:Qne},Symbol.toStringTag,{value:"Module"}));function tre(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},s=[];let o=[],l=[];const c={attempt:I(E),check:I(P),consume:T,enter:C,exit:O,interrupt:I(P,{interrupt:!0})},u={code:null,containerState:{},defineSkip:b,events:[],now:x,parser:e,previous:null,sliceSerialize:y,sliceStream:v,write:p};let f=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function p(L){return o=Gs(o,L),w(),o[o.length-1]!==null?[]:(F(t,0),u.events=oN(s,u.events,u),u.events)}function y(L,H){return rre(v(L),H)}function v(L){return nre(o,L)}function x(){const{_bufferIndex:L,_index:H,line:V,column:ne,offset:Z}=r;return{_bufferIndex:L,_index:H,line:V,column:ne,offset:Z}}function b(L){a[L.line]=L.column,z()}function w(){let L;for(;r._index<o.length;){const H=o[r._index];if(typeof H=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<H.length;)_(H.charCodeAt(r._bufferIndex));else _(H)}}function _(L){f=f(L)}function T(L){Kt(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,z()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=L}function C(L,H){const V=H||{};return V.type=L,V.start=x(),u.events.push(["enter",V,u]),l.push(V),V}function O(L){const H=l.pop();return H.end=x(),u.events.push(["exit",H,u]),H}function E(L,H){F(L,H.from)}function P(L,H){H.restore()}function I(L,H){return V;function V(ne,Z,q){let K,se,G,B;return Array.isArray(ne)?me(ne):"tokenize"in ne?me([ne]):fe(ne);function fe(Ne){return ke;function ke(de){const Q=de!==null&&Ne[de],oe=de!==null&&Ne.null,re=[...Array.isArray(Q)?Q:Q?[Q]:[],...Array.isArray(oe)?oe:oe?[oe]:[]];return me(re)(de)}}function me(Ne){return K=Ne,se=0,Ne.length===0?q:Y(Ne[se])}function Y(Ne){return ke;function ke(de){return B=$(),G=Ne,Ne.partial||(u.currentConstruct=Ne),Ne.name&&u.parser.constructs.disable.null.includes(Ne.name)?Ie():Ne.tokenize.call(H?Object.assign(Object.create(u),H):u,c,xe,Ie)(de)}}function xe(Ne){return L(G,B),Z}function Ie(Ne){return B.restore(),++se<K.length?Y(K[se]):q}}}function F(L,H){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&Ss(u.events,H,u.events.length-H,L.resolve(u.events.slice(H),u)),L.resolveTo&&(u.events=L.resolveTo(u.events,u))}function $(){const L=x(),H=u.previous,V=u.currentConstruct,ne=u.events.length,Z=Array.from(l);return{from:ne,restore:q};function q(){r=L,u.previous=H,u.currentConstruct=V,u.events.length=ne,l=Z,z()}}function z(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function nre(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(r,s)];else{if(o=e.slice(n,a),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(e[a].slice(0,s))}return o}function rre(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(s)}a=s===-2,r.push(o)}return r.join("")}function ire(e){const r={constructs:oU([ere,...(e||{}).extensions||[]]),content:a(xte),defined:[],document:a(jte),flow:a($ne),lazy:{},string:a(qne),text:a(Une)};return r;function a(s){return o;function o(l){return tre(r,s,l)}}}function are(e){for(;!hU(e););return e}const MR=/[\0\t\n\r]/g;function sre(){let e=1,t="",n=!0,r;return a;function a(s,o,l){const c=[];let u,f,p,y,v;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),p=0,t="",n&&(s.charCodeAt(0)===65279&&p++,n=void 0);p<s.length;){if(MR.lastIndex=p,u=MR.exec(s),y=u&&u.index!==void 0?u.index:s.length,v=s.charCodeAt(y),!u){t=s.slice(p);break}if(v===10&&p===y&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<y&&(c.push(s.slice(p,y)),e+=y-p),v){case 0:{c.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,c.push(-2);e++<f;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}p=y+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const ore=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function lre(e){return e.replace(ore,cre)}function cre(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),s=a===120||a===88;return lU(n.slice(s?2:1),s?16:10)}return OD(n)||e}const vU={}.hasOwnProperty;function ure(e,t,n){return typeof t!="string"&&(n=t,t=void 0),dre(n)(are(ire(n).document().write(sre()(e,t,!0))))}function dre(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ge),autolinkProtocol:$,autolinkEmail:$,atxHeading:s(ie),blockQuote:s(oe),characterEscape:$,characterReference:$,codeFenced:s(re),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(re,o),codeText:s(ae,o),codeTextData:$,data:$,codeFlowValue:$,definition:s(X),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(W),hardBreakEscape:s(pe),hardBreakTrailing:s(pe),htmlFlow:s(le,o),htmlFlowData:$,htmlText:s(le,o),htmlTextData:$,image:s(je),label:o,link:s(Ge),listItem:s(ht),listItemValue:y,listOrdered:s(et,p),listUnordered:s(et),paragraph:s(_e),reference:Y,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ie),strong:s(Fe),thematicBreak:s(Ke)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:Q,autolinkProtocol:de,blockQuote:c(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:Ie,characterReferenceMarkerNumeric:Ie,characterReferenceValue:Ne,characterReference:ke,codeFenced:c(w),codeFencedFence:b,codeFencedFenceInfo:v,codeFencedFenceMeta:x,codeFlowValue:z,codeIndented:c(_),codeText:c(Z),codeTextData:z,data:z,definition:c(),definitionDestinationString:O,definitionLabelString:T,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(H),hardBreakTrailing:c(H),htmlFlow:c(V),htmlFlowData:z,htmlText:c(ne),htmlTextData:z,image:c(K),label:G,labelText:se,lineEnding:L,link:c(q),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:xe,resourceDestinationString:B,resourceTitleString:fe,resource:me,setextHeading:c(F),setextHeadingLineSequence:I,setextHeadingText:P,strong:c(),thematicBreak:c()}};xU(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(be){let De={type:"root",children:[]};const we={stack:[De],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:f,data:n},ve=[];let Ce=-1;for(;++Ce<be.length;)if(be[Ce][1].type==="listOrdered"||be[Ce][1].type==="listUnordered")if(be[Ce][0]==="enter")ve.push(Ce);else{const nt=ve.pop();Ce=a(be,nt,Ce)}for(Ce=-1;++Ce<be.length;){const nt=t[be[Ce][0]];vU.call(nt,be[Ce][1].type)&&nt[be[Ce][1].type].call(Object.assign({sliceSerialize:be[Ce][2].sliceSerialize},we),be[Ce][1])}if(we.tokenStack.length>0){const nt=we.tokenStack[we.tokenStack.length-1];(nt[1]||IR).call(we,void 0,nt[0])}for(De.position={start:Uu(be.length>0?be[0][1].start:{line:1,column:1,offset:0}),end:Uu(be.length>0?be[be.length-2][1].end:{line:1,column:1,offset:0})},Ce=-1;++Ce<t.transforms.length;)De=t.transforms[Ce](De)||De;return De}function a(be,De,we){let ve=De-1,Ce=-1,nt=!1,Ve,dt,Ct,kt;for(;++ve<=we;){const ze=be[ve];switch(ze[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ze[0]==="enter"?Ce++:Ce--,kt=void 0;break}case"lineEndingBlank":{ze[0]==="enter"&&(Ve&&!kt&&!Ce&&!Ct&&(Ct=ve),kt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:kt=void 0}if(!Ce&&ze[0]==="enter"&&ze[1].type==="listItemPrefix"||Ce===-1&&ze[0]==="exit"&&(ze[1].type==="listUnordered"||ze[1].type==="listOrdered")){if(Ve){let Xe=ve;for(dt=void 0;Xe--;){const Je=be[Xe];if(Je[1].type==="lineEnding"||Je[1].type==="lineEndingBlank"){if(Je[0]==="exit")continue;dt&&(be[dt][1].type="lineEndingBlank",nt=!0),Je[1].type="lineEnding",dt=Xe}else if(!(Je[1].type==="linePrefix"||Je[1].type==="blockQuotePrefix"||Je[1].type==="blockQuotePrefixWhitespace"||Je[1].type==="blockQuoteMarker"||Je[1].type==="listItemIndent"))break}Ct&&(!dt||Ct<dt)&&(Ve._spread=!0),Ve.end=Object.assign({},dt?be[dt][1].start:ze[1].end),be.splice(dt||ve,0,["exit",Ve,ze[2]]),ve++,we++}if(ze[1].type==="listItemPrefix"){const Xe={type:"listItem",_spread:!1,start:Object.assign({},ze[1].start),end:void 0};Ve=Xe,be.splice(ve,0,["enter",Xe,ze[2]]),ve++,we++,Ct=void 0,kt=!0}}}return be[De][1]._spread=nt,we}function s(be,De){return we;function we(ve){l.call(this,be(ve),ve),De&&De.call(this,ve)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(be,De,we){this.stack[this.stack.length-1].children.push(be),this.stack.push(be),this.tokenStack.push([De,we||void 0]),be.position={start:Uu(De.start),end:void 0}}function c(be){return De;function De(we){be&&be.call(this,we),u.call(this,we)}}function u(be,De){const we=this.stack.pop(),ve=this.tokenStack.pop();if(ve)ve[0].type!==be.type&&(De?De.call(this,be,ve[0]):(ve[1]||IR).call(this,be,ve[0]));else throw new Error("Cannot close `"+be.type+"` ("+Cx({start:be.start,end:be.end})+"): its not open");we.position.end=Uu(be.end)}function f(){return PD(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function y(be){if(this.data.expectingFirstListItemValue){const De=this.stack[this.stack.length-2];De.start=Number.parseInt(this.sliceSerialize(be),10),this.data.expectingFirstListItemValue=void 0}}function v(){const be=this.resume(),De=this.stack[this.stack.length-1];De.lang=be}function x(){const be=this.resume(),De=this.stack[this.stack.length-1];De.meta=be}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const be=this.resume(),De=this.stack[this.stack.length-1];De.value=be.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const be=this.resume(),De=this.stack[this.stack.length-1];De.value=be.replace(/(\r?\n|\r)$/g,"")}function T(be){const De=this.resume(),we=this.stack[this.stack.length-1];we.label=De,we.identifier=Po(this.sliceSerialize(be)).toLowerCase()}function C(){const be=this.resume(),De=this.stack[this.stack.length-1];De.title=be}function O(){const be=this.resume(),De=this.stack[this.stack.length-1];De.url=be}function E(be){const De=this.stack[this.stack.length-1];if(!De.depth){const we=this.sliceSerialize(be).length;De.depth=we}}function P(){this.data.setextHeadingSlurpLineEnding=!0}function I(be){const De=this.stack[this.stack.length-1];De.depth=this.sliceSerialize(be).codePointAt(0)===61?1:2}function F(){this.data.setextHeadingSlurpLineEnding=void 0}function $(be){const we=this.stack[this.stack.length-1].children;let ve=we[we.length-1];(!ve||ve.type!=="text")&&(ve=Ye(),ve.position={start:Uu(be.start),end:void 0},we.push(ve)),this.stack.push(ve)}function z(be){const De=this.stack.pop();De.value+=this.sliceSerialize(be),De.position.end=Uu(be.end)}function L(be){const De=this.stack[this.stack.length-1];if(this.data.atHardBreak){const we=De.children[De.children.length-1];we.position.end=Uu(be.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(De.type)&&($.call(this,be),z.call(this,be))}function H(){this.data.atHardBreak=!0}function V(){const be=this.resume(),De=this.stack[this.stack.length-1];De.value=be}function ne(){const be=this.resume(),De=this.stack[this.stack.length-1];De.value=be}function Z(){const be=this.resume(),De=this.stack[this.stack.length-1];De.value=be}function q(){const be=this.stack[this.stack.length-1];if(this.data.inReference){const De=this.data.referenceType||"shortcut";be.type+="Reference",be.referenceType=De,delete be.url,delete be.title}else delete be.identifier,delete be.label;this.data.referenceType=void 0}function K(){const be=this.stack[this.stack.length-1];if(this.data.inReference){const De=this.data.referenceType||"shortcut";be.type+="Reference",be.referenceType=De,delete be.url,delete be.title}else delete be.identifier,delete be.label;this.data.referenceType=void 0}function se(be){const De=this.sliceSerialize(be),we=this.stack[this.stack.length-2];we.label=lre(De),we.identifier=Po(De).toLowerCase()}function G(){const be=this.stack[this.stack.length-1],De=this.resume(),we=this.stack[this.stack.length-1];if(this.data.inReference=!0,we.type==="link"){const ve=be.children;we.children=ve}else we.alt=De}function B(){const be=this.resume(),De=this.stack[this.stack.length-1];De.url=be}function fe(){const be=this.resume(),De=this.stack[this.stack.length-1];De.title=be}function me(){this.data.inReference=void 0}function Y(){this.data.referenceType="collapsed"}function xe(be){const De=this.resume(),we=this.stack[this.stack.length-1];we.label=De,we.identifier=Po(this.sliceSerialize(be)).toLowerCase(),this.data.referenceType="full"}function Ie(be){this.data.characterReferenceType=be.type}function Ne(be){const De=this.sliceSerialize(be),we=this.data.characterReferenceType;let ve;we?(ve=lU(De,we==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ve=OD(De);const Ce=this.stack[this.stack.length-1];Ce.value+=ve}function ke(be){const De=this.stack.pop();De.position.end=Uu(be.end)}function de(be){z.call(this,be);const De=this.stack[this.stack.length-1];De.url=this.sliceSerialize(be)}function Q(be){z.call(this,be);const De=this.stack[this.stack.length-1];De.url="mailto:"+this.sliceSerialize(be)}function oe(){return{type:"blockquote",children:[]}}function re(){return{type:"code",lang:null,meta:null,value:""}}function ae(){return{type:"inlineCode",value:""}}function X(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function W(){return{type:"emphasis",children:[]}}function ie(){return{type:"heading",depth:0,children:[]}}function pe(){return{type:"break"}}function le(){return{type:"html",value:""}}function je(){return{type:"image",title:null,url:"",alt:null}}function Ge(){return{type:"link",title:null,url:"",children:[]}}function et(be){return{type:"list",ordered:be.type==="listOrdered",start:null,spread:be._spread,children:[]}}function ht(be){return{type:"listItem",spread:be._spread,checked:null,children:[]}}function _e(){return{type:"paragraph",children:[]}}function Fe(){return{type:"strong",children:[]}}function Ye(){return{type:"text",value:""}}function Ke(){return{type:"thematicBreak"}}}function Uu(e){return{line:e.line,column:e.column,offset:e.offset}}function xU(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?xU(e,r):hre(e,r)}}function hre(e,t){let n;for(n in t)if(vU.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function IR(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Cx({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Cx({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Cx({start:t.start,end:t.end})+") is still open")}function fre(e){const t=this;t.parser=n;function n(r){return ure(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function pre(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function mre(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function gre(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function yre(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vre(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xre(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=qg(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function bre(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jre(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function bU(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=r:a.push({type:"text",value:r}),a}function wre(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return bU(e,t);const a={src:qg(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,s),e.applyData(t,s)}function Sre(e,t){const n={src:qg(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Nre(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function _re(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return bU(e,t);const a={href:qg(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Cre(e,t){const n={href:qg(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Tre(e,t,n){const r=e.all(t),a=n?Ere(n):jU(t),s={},o=[];if(typeof t.checked=="boolean"){const f=r[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const f=r[l];(a||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?o.push(...f.children):o.push(f)}const c=r[r.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function Ere(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=jU(n[r])}return t}function jU(e){const t=e.spread;return t??e.children.length>1}function Are(e,t){const n={},r=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<r.length;){const o=r[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function kre(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Pre(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Ore(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Dre(e,t){const n=e.all(t),r=n.shift(),a=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=TD(t.children[1]),c=eU(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)}function Mre(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const p=t.children[c],y={},v=o?o[c]:void 0;v&&(y.align=v);let x={type:"element",tagName:s,properties:y,children:[]};p&&(x.children=e.all(p),e.patch(p,x),x=e.applyData(p,x)),u.push(x)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,f),e.applyData(t,f)}function Ire(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const RR=9,LR=32;function Rre(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const s=[];for(;r;)s.push(FR(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return s.push(FR(t.slice(a),a>0,!1)),s.join("")}function FR(e,t,n){let r=0,a=e.length;if(t){let s=e.codePointAt(r);for(;s===RR||s===LR;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(a-1);for(;s===RR||s===LR;)a--,s=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function Lre(e,t){const n={type:"text",value:Rre(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Fre(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const $re={blockquote:pre,break:mre,code:gre,delete:yre,emphasis:vre,footnoteReference:xre,heading:bre,html:jre,imageReference:wre,image:Sre,inlineCode:Nre,linkReference:_re,link:Cre,listItem:Tre,list:Are,paragraph:kre,root:Pre,strong:Ore,table:Dre,tableCell:Ire,tableRow:Mre,text:Lre,thematicBreak:Fre,toml:kj,yaml:kj,definition:kj,footnoteDefinition:kj};function kj(){}const wU=-1,lN=0,Ex=1,Mw=2,MD=3,ID=4,RD=5,LD=6,SU=7,NU=8,$R=typeof self=="object"?self:globalThis,Bre=(e,t)=>{const n=(a,s)=>(e.set(s,a),a),r=a=>{if(e.has(a))return e.get(a);const[s,o]=t[a];switch(s){case lN:case wU:return n(o,a);case Ex:{const l=n([],a);for(const c of o)l.push(r(c));return l}case Mw:{const l=n({},a);for(const[c,u]of o)l[r(c)]=r(u);return l}case MD:return n(new Date(o),a);case ID:{const{source:l,flags:c}=o;return n(new RegExp(l,c),a)}case RD:{const l=n(new Map,a);for(const[c,u]of o)l.set(r(c),r(u));return l}case LD:{const l=n(new Set,a);for(const c of o)l.add(r(c));return l}case SU:{const{name:l,message:c}=o;return n(new $R[l](c),a)}case NU:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new $R[s](o),a)};return r},BR=e=>Bre(new Map,e)(0),xm="",{toString:zre}={},{keys:qre}=Object,ex=e=>{const t=typeof e;if(t!=="object"||!e)return[lN,t];const n=zre.call(e).slice(8,-1);switch(n){case"Array":return[Ex,xm];case"Object":return[Mw,xm];case"Date":return[MD,xm];case"RegExp":return[ID,xm];case"Map":return[RD,xm];case"Set":return[LD,xm];case"DataView":return[Ex,n]}return n.includes("Array")?[Ex,n]:n.includes("Error")?[SU,n]:[Mw,n]},Pj=([e,t])=>e===lN&&(t==="function"||t==="symbol"),Ure=(e,t,n,r)=>{const a=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=ex(o);switch(l){case lN:{let f=o;switch(c){case"bigint":l=NU,f=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return a([wU],o)}return a([l,f],o)}case Ex:{if(c){let y=o;return c==="DataView"?y=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(y=new Uint8Array(o)),a([c,[...y]],o)}const f=[],p=a([l,f],o);for(const y of o)f.push(s(y));return p}case Mw:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const f=[],p=a([l,f],o);for(const y of qre(o))(e||!Pj(ex(o[y])))&&f.push([s(y),s(o[y])]);return p}case MD:return a([l,o.toISOString()],o);case ID:{const{source:f,flags:p}=o;return a([l,{source:f,flags:p}],o)}case RD:{const f=[],p=a([l,f],o);for(const[y,v]of o)(e||!(Pj(ex(y))||Pj(ex(v))))&&f.push([s(y),s(v)]);return p}case LD:{const f=[],p=a([l,f],o);for(const y of o)(e||!Pj(ex(y)))&&f.push(s(y));return p}}const{message:u}=o;return a([l,{name:c,message:u}],o)};return s},zR=(e,{json:t,lossy:n}={})=>{const r=[];return Ure(!(t||n),!!t,new Map,r)(e),r},Iw=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?BR(zR(e,t)):structuredClone(e):(e,t)=>BR(zR(e,t));function Vre(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Hre(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Gre(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Vre,r=e.options.footnoteBackLabel||Hre,a=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const f=e.all(u),p=String(u.identifier).toUpperCase(),y=qg(p.toLowerCase());let v=0;const x=[],b=e.footnoteCounts.get(p);for(;b!==void 0&&++v<=b;){x.length>0&&x.push({type:"text",value:" "});let T=typeof n=="string"?n:n(c,v);typeof T=="string"&&(T={type:"text",value:T}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+y+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,v),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const w=f[f.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const T=w.children[w.children.length-1];T&&T.type==="text"?T.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...x)}else f.push(...x);const _={type:"element",tagName:"li",properties:{id:t+"fn-"+y},children:e.wrap(f,!0)};e.patch(u,_),l.push(_)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Iw(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const cN=function(e){if(e==null)return Qre;if(typeof e=="function")return uN(e);if(typeof e=="object")return Array.isArray(e)?Wre(e):Kre(e);if(typeof e=="string")return Yre(e);throw new Error("Expected function, string, or object as test")};function Wre(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=cN(e[n]);return uN(r);function r(...a){let s=-1;for(;++s<t.length;)if(t[s].apply(this,a))return!0;return!1}}function Kre(e){const t=e;return uN(n);function n(r){const a=r;let s;for(s in e)if(a[s]!==t[s])return!1;return!0}}function Yre(e){return uN(t);function t(n){return n&&n.type===e}}function uN(e){return t;function t(n,r,a){return!!(Xre(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function Qre(){return!0}function Xre(e){return e!==null&&typeof e=="object"&&"type"in e}const _U=[],Jre=!0,nP=!1,Zre="skip";function CU(e,t,n,r){let a;typeof t=="function"&&typeof n!="function"?(r=n,n=t):a=t;const s=cN(a),o=r?-1:1;l(e,void 0,[])();function l(c,u,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const v=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(c.type+(v?"<"+v+">":""))+")"})}return y;function y(){let v=_U,x,b,w;if((!t||s(c,u,f[f.length-1]||void 0))&&(v=eie(n(c,f)),v[0]===nP))return v;if("children"in c&&c.children){const _=c;if(_.children&&v[0]!==Zre)for(b=(r?_.children.length:-1)+o,w=f.concat(_);b>-1&&b<_.children.length;){const T=_.children[b];if(x=l(T,b,w)(),x[0]===nP)return x;b=typeof x[1]=="number"?x[1]:b+o}}return v}}}function eie(e){return Array.isArray(e)?e:typeof e=="number"?[Jre,e]:e==null?_U:[e]}function FD(e,t,n,r){let a,s,o;typeof t=="function"?(s=void 0,o=t,a=n):(s=t,o=n,a=r),CU(e,s,l,a);function l(c,u){const f=u[u.length-1],p=f?f.children.indexOf(c):void 0;return o(c,p,f)}}const rP={}.hasOwnProperty,tie={};function nie(e,t){const n=t||tie,r=new Map,a=new Map,s=new Map,o={...$re,...n.handlers},l={all:u,applyData:iie,definitionById:r,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:rie,wrap:sie};return FD(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?r:a,y=String(f.identifier).toUpperCase();p.has(y)||p.set(y,f)}}),l;function c(f,p){const y=f.type,v=l.handlers[y];if(rP.call(l.handlers,y)&&v)return v(l,f,p);if(l.options.passThrough&&l.options.passThrough.includes(y)){if("children"in f){const{children:b,...w}=f,_=Iw(w);return _.children=l.all(f),_}return Iw(f)}return(l.options.unknownHandler||aie)(l,f,p)}function u(f){const p=[];if("children"in f){const y=f.children;let v=-1;for(;++v<y.length;){const x=l.one(y[v],f);if(x){if(v&&y[v-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=qR(x.value)),!Array.isArray(x)&&x.type==="element")){const b=x.children[0];b&&b.type==="text"&&(b.value=qR(b.value))}Array.isArray(x)?p.push(...x):p.push(x)}}}return p}}function rie(e,t){e.position&&(t.position=Hee(e))}function iie(e,t){let n=t;if(e&&e.data){const r=e.data.hName,a=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Iw(s)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function aie(e,t){const n=t.data||{},r="value"in t&&!(rP.call(n,"hProperties")||rP.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function sie(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function qR(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function UR(e,t){const n=nie(e,t),r=n.one(e,void 0),a=Gre(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function oie(e,t){return e&&"run"in e?async function(n,r){const a=UR(n,{file:r,...t});await e.run(a,r)}:function(n,r){return UR(n,{file:r,...e||t})}}function VR(e){if(e)throw e}var MC,HR;function lie(){if(HR)return MC;HR=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(u){return typeof Array.isArray=="function"?Array.isArray(u):t.call(u)==="[object Array]"},s=function(u){if(!u||t.call(u)!=="[object Object]")return!1;var f=e.call(u,"constructor"),p=u.constructor&&u.constructor.prototype&&e.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!f&&!p)return!1;var y;for(y in u);return typeof y>"u"||e.call(u,y)},o=function(u,f){n&&f.name==="__proto__"?n(u,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):u[f.name]=f.newValue},l=function(u,f){if(f==="__proto__")if(e.call(u,f)){if(r)return r(u,f).value}else return;return u[f]};return MC=function c(){var u,f,p,y,v,x,b=arguments[0],w=1,_=arguments.length,T=!1;for(typeof b=="boolean"&&(T=b,b=arguments[1]||{},w=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});w<_;++w)if(u=arguments[w],u!=null)for(f in u)p=l(b,f),y=l(u,f),b!==y&&(T&&y&&(s(y)||(v=a(y)))?(v?(v=!1,x=p&&a(p)?p:[]):x=p&&s(p)?p:{},o(b,{name:f,newValue:c(T,x,y)})):typeof y<"u"&&o(b,{name:f,newValue:y}));return b},MC}var cie=lie();const IC=Bn(cie);function iP(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function uie(){const e=[],t={run:n,use:r};return t;function n(...a){let s=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...u){const f=e[++s];let p=-1;if(c){o(c);return}for(;++p<a.length;)(u[p]===null||u[p]===void 0)&&(u[p]=a[p]);a=u,f?die(f,l)(...u):o(null,...u)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function die(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(a);try{c=e.apply(this,o)}catch(u){const f=u;if(l&&n)throw f;return a(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,a):c instanceof Error?a(c):s(c))}function a(o,...l){n||(n=!0,t(o,...l))}function s(o){a(null,o)}}const yl={basename:hie,dirname:fie,extname:pie,join:mie,sep:"/"};function hie(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ub(e);let n=0,r=-1,a=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else r<0&&(s=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else o<0&&(s=!0,o=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function fie(e){if(Ub(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function pie(e){Ub(e);let t=e.length,n=-1,r=0,a=-1,s=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?a<0?a=t:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||n<0||s===0||s===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function mie(...e){let t=-1,n;for(;++t<e.length;)Ub(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":gie(n)}function gie(e){Ub(e);const t=e.codePointAt(0)===47;let n=yie(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function yie(e,t){let n="",r=0,a=-1,s=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||s===1))if(a!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),a=o,s=0;continue}}else if(n.length>0){n="",r=0,a=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Ub(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const vie={cwd:xie};function xie(){return"/"}function aP(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function bie(e){if(typeof e=="string")e=new URL(e);else if(!aP(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return jie(e)}function jie(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const RC=["history","path","basename","stem","extname","dirname"];class TU{constructor(t){let n;t?aP(t)?n={path:t}:typeof t=="string"||wie(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":vie.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<RC.length;){const s=RC[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let a;for(a in n)RC.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?yl.basename(this.path):void 0}set basename(t){FC(t,"basename"),LC(t,"basename"),this.path=yl.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?yl.dirname(this.path):void 0}set dirname(t){GR(this.basename,"dirname"),this.path=yl.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?yl.extname(this.path):void 0}set extname(t){if(LC(t,"extname"),GR(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=yl.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){aP(t)&&(t=bie(t)),FC(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?yl.basename(this.path,this.extname):void 0}set stem(t){FC(t,"stem"),LC(t,"stem"),this.path=yl.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=void 0,a}message(t,n,r){const a=new la(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function LC(e,t){if(e&&e.includes(yl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+yl.sep+"`")}function FC(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function GR(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function wie(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Sie=function(e){const r=this.constructor.prototype,a=r[e],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Nie={}.hasOwnProperty;class $D extends Sie{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=uie()}copy(){const t=new $D;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(IC(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(zC("data",this.frozen),this.namespace[t]=n,this):Nie.call(this.namespace,t)&&this.namespace[t]||void 0:t?(zC("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=n.call(t,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Oj(t),r=this.parser||this.Parser;return $C("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),$C("process",this.parser||this.Parser),BC("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(s,o){const l=Oj(t),c=r.parse(l);r.run(c,l,function(f,p,y){if(f||!p||!y)return u(f);const v=p,x=r.stringify(v,y);Tie(x)?y.value=x:y.result=x,u(f,y)});function u(f,p){f||!p?o(f):s?s(p):n(void 0,p)}}}processSync(t){let n=!1,r;return this.freeze(),$C("processSync",this.parser||this.Parser),BC("processSync",this.compiler||this.Compiler),this.process(t,a),KR("processSync","process",n),r;function a(s,o){n=!0,VR(s),r=o}}run(t,n,r){WR(t),this.freeze();const a=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const c=Oj(n);a.run(t,c,u);function u(f,p,y){const v=p||t;f?l(f):o?o(v):r(void 0,v,y)}}}runSync(t,n){let r=!1,a;return this.run(t,n,s),KR("runSync","run",r),a;function s(o,l){VR(o),a=l,r=!0}}stringify(t,n){this.freeze();const r=Oj(n),a=this.compiler||this.Compiler;return BC("stringify",a),WR(t),a(t,r)}use(t,...n){const r=this.attachers,a=this.namespace;if(zC("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...p]=u;c(f,p)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(a.settings=IC(!0,a.settings,u.settings))}function l(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const p=u[f];s(p)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let p=-1,y=-1;for(;++p<r.length;)if(r[p][0]===u){y=p;break}if(y===-1)r.push([u,...f]);else if(f.length>0){let[v,...x]=f;const b=r[y][1];iP(b)&&iP(v)&&(v=IC(!0,b,v)),r[y]=[u,v,...x]}}}}const _ie=new $D().freeze();function $C(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function BC(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function zC(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function WR(e){if(!iP(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function KR(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Oj(e){return Cie(e)?e:new TU(e)}function Cie(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Tie(e){return typeof e=="string"||Eie(e)}function Eie(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Aie="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",YR=[],QR={allowDangerousHtml:!0},kie=/^(https?|ircs?|mailto|xmpp)$/i,Pie=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Sf(e){const t=Oie(e),n=Die(e);return Mie(t.runSync(t.parse(n),n),e)}function Oie(e){const t=e.rehypePlugins||YR,n=e.remarkPlugins||YR,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...QR}:QR;return _ie().use(fre).use(n).use(oie,r).use(t)}function Die(e){const t=e.children||"",n=new TU;return typeof t=="string"&&(n.value=t),n}function Mie(e,t){const n=t.allowedElements,r=t.allowElement,a=t.components,s=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||Iie;for(const f of Pie)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+Aie+f.id,void 0);return FD(e,u),Qee(e,{Fragment:i.Fragment,components:a,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(f,p,y){if(f.type==="raw"&&y&&typeof p=="number")return o?y.children.splice(p,1):y.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let v;for(v in PC)if(Object.hasOwn(PC,v)&&Object.hasOwn(f.properties,v)){const x=f.properties[v],b=PC[v];(b===null||b.includes(f.tagName))&&(f.properties[v]=c(String(x||""),v,f))}}if(f.type==="element"){let v=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!v&&r&&typeof p=="number"&&(v=!r(f,p,y)),v&&y&&typeof p=="number")return l&&f.children?y.children.splice(p,1,...f.children):y.children.splice(p,1),p}}}function Iie(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||r!==-1&&t>r||kie.test(e.slice(0,t))?e:""}function XR(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function Rie(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Lie(e,t,n){const a=cN((n||{}).ignore||[]),s=Fie(t);let o=-1;for(;++o<s.length;)CU(e,"text",l);function l(u,f){let p=-1,y;for(;++p<f.length;){const v=f[p],x=y?y.children:void 0;if(a(v,x?x.indexOf(v):void 0,y))return;y=v}if(y)return c(u,f)}function c(u,f){const p=f[f.length-1],y=s[o][0],v=s[o][1];let x=0;const w=p.children.indexOf(u);let _=!1,T=[];y.lastIndex=0;let C=y.exec(u.value);for(;C;){const O=C.index,E={index:C.index,input:C.input,stack:[...f,u]};let P=v(...C,E);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P===!1?y.lastIndex=O+1:(x!==O&&T.push({type:"text",value:u.value.slice(x,O)}),Array.isArray(P)?T.push(...P):P&&T.push(P),x=O+C[0].length,_=!0),!y.global)break;C=y.exec(u.value)}return _?(x<u.value.length&&T.push({type:"text",value:u.value.slice(x)}),p.children.splice(w,1,...T)):T=[u],w+T.length}}function Fie(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const a=n[r];t.push([$ie(a[0]),Bie(a[1])])}return t}function $ie(e){return typeof e=="string"?new RegExp(Rie(e),"g"):e}function Bie(e){return typeof e=="function"?e:function(){return e}}const qC="phrasing",UC=["autolink","link","image","label"];function zie(){return{transforms:[Kie],enter:{literalAutolink:Uie,literalAutolinkEmail:VC,literalAutolinkHttp:VC,literalAutolinkWww:VC},exit:{literalAutolink:Wie,literalAutolinkEmail:Gie,literalAutolinkHttp:Vie,literalAutolinkWww:Hie}}}function qie(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:qC,notInConstruct:UC},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:qC,notInConstruct:UC},{character:":",before:"[ps]",after:"\\/",inConstruct:qC,notInConstruct:UC}]}}function Uie(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function VC(e){this.config.enter.autolinkProtocol.call(this,e)}function Vie(e){this.config.exit.autolinkProtocol.call(this,e)}function Hie(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Gie(e){this.config.exit.autolinkEmail.call(this,e)}function Wie(e){this.exit(e)}function Kie(e){Lie(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Yie],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Qie]],{ignore:["link","linkReference"]})}function Yie(e,t,n,r,a){let s="";if(!EU(a)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!Xie(n)))return!1;const o=Jie(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function Qie(e,t,n,r){return!EU(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Xie(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Jie(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const a=XR(e,"(");let s=XR(e,")");for(;r!==-1&&a>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function EU(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||wf(n)||sN(n))&&(!t||n!==47)}AU.peek=oae;function Zie(){this.buffer()}function eae(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function tae(){this.buffer()}function nae(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function rae(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Po(this.sliceSerialize(e)).toLowerCase(),n.label=t}function iae(e){this.exit(e)}function aae(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Po(this.sliceSerialize(e)).toLowerCase(),n.label=t}function sae(e){this.exit(e)}function oae(){return"["}function AU(e,t,n,r){const a=n.createTracker(r);let s=a.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=a.move(n.safe(n.associationId(e),{after:"]",before:s})),l(),o(),s+=a.move("]"),s}function lae(){return{enter:{gfmFootnoteCallString:Zie,gfmFootnoteCall:eae,gfmFootnoteDefinitionLabelString:tae,gfmFootnoteDefinition:nae},exit:{gfmFootnoteCallString:rae,gfmFootnoteCall:iae,gfmFootnoteDefinitionLabelString:aae,gfmFootnoteDefinition:sae}}}function cae(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:AU},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,a,s,o){const l=s.createTracker(o);let c=l.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(r),{before:c,after:"]"})),f(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,l.current()),t?kU:uae))),u(),c}}function uae(e,t,n){return t===0?e:kU(e,t,n)}function kU(e,t,n){return(n?"":"    ")+e}const dae=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];PU.peek=gae;function hae(){return{canContainEols:["delete"],enter:{strikethrough:pae},exit:{strikethrough:mae}}}function fae(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:dae}],handlers:{delete:PU}}}function pae(e){this.enter({type:"delete",children:[]},e)}function mae(e){this.exit(e)}function PU(e,t,n,r){const a=n.createTracker(r),s=n.enter("strikethrough");let o=a.move("~~");return o+=n.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),s(),o}function gae(){return"~"}function yae(e){return e.length}function vae(e,t){const n=t||{},r=(n.align||[]).concat(),a=n.stringLength||yae,s=[],o=[],l=[],c=[];let u=0,f=-1;for(;++f<e.length;){const b=[],w=[];let _=-1;for(e[f].length>u&&(u=e[f].length);++_<e[f].length;){const T=xae(e[f][_]);if(n.alignDelimiters!==!1){const C=a(T);w[_]=C,(c[_]===void 0||C>c[_])&&(c[_]=C)}b.push(T)}o[f]=b,l[f]=w}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<u;)s[p]=JR(r[p]);else{const b=JR(r);for(;++p<u;)s[p]=b}p=-1;const y=[],v=[];for(;++p<u;){const b=s[p];let w="",_="";b===99?(w=":",_=":"):b===108?w=":":b===114&&(_=":");let T=n.alignDelimiters===!1?1:Math.max(1,c[p]-w.length-_.length);const C=w+"-".repeat(T)+_;n.alignDelimiters!==!1&&(T=w.length+T+_.length,T>c[p]&&(c[p]=T),v[p]=T),y[p]=C}o.splice(1,0,y),l.splice(1,0,v),f=-1;const x=[];for(;++f<o.length;){const b=o[f],w=l[f];p=-1;const _=[];for(;++p<u;){const T=b[p]||"";let C="",O="";if(n.alignDelimiters!==!1){const E=c[p]-(w[p]||0),P=s[p];P===114?C=" ".repeat(E):P===99?E%2?(C=" ".repeat(E/2+.5),O=" ".repeat(E/2-.5)):(C=" ".repeat(E/2),O=C):O=" ".repeat(E)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(C),_.push(T),n.alignDelimiters!==!1&&_.push(O),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==u-1)&&_.push("|")}x.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return x.join(`
`)}function xae(e){return e==null?"":String(e)}function JR(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function bae(e,t,n,r){const a=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),jae);return a(),o}function jae(e,t,n){return">"+(n?"":" ")+e}function wae(e,t){return ZR(e,t.inConstruct,!0)&&!ZR(e,t.notInConstruct,!1)}function ZR(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function e4(e,t,n,r){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&wae(n.stack,n.unsafe[a]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Sae(e,t){const n=String(e);let r=n.indexOf(t),a=r,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===a?++s>o&&(o=s):s=1,a=r+t.length,r=n.indexOf(t,a);return o}function Nae(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function _ae(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Cae(e,t,n,r){const a=_ae(n),s=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if(Nae(e,n)){const p=n.enter("codeIndented"),y=n.indentLines(s,Tae);return p(),y}const l=n.createTracker(r),c=a.repeat(Math.max(Sae(s,a)+1,3)),u=n.enter("codeFenced");let f=l.move(c);if(e.lang){const p=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...l.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...l.current()})),p()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),u(),f}function Tae(e,t,n){return(n?"":"    ")+e}function BD(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Eae(e,t,n,r){const a=BD(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),o(),u}function Aae(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function zx(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Rw(e,t,n){const r=og(e),a=og(t);return r===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}OU.peek=kae;function OU(e,t,n,r){const a=Aae(n),s=n.enter("emphasis"),o=n.createTracker(r),l=o.move(a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=Rw(r.before.charCodeAt(r.before.length-1),u,a);f.inside&&(c=zx(u)+c.slice(1));const p=c.charCodeAt(c.length-1),y=Rw(r.after.charCodeAt(0),p,a);y.inside&&(c=c.slice(0,-1)+zx(p));const v=o.move(a);return s(),n.attentionEncodeSurroundingInfo={after:y.outside,before:f.outside},l+c+v}function kae(e,t,n){return n.options.emphasis||"*"}function Pae(e,t){let n=!1;return FD(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,nP}),!!((!e.depth||e.depth<3)&&PD(e)&&(t.options.setext||n))}function Oae(e,t,n,r){const a=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(Pae(e,n)){const f=n.enter("headingSetext"),p=n.enter("phrasing"),y=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return p(),f(),y+`
`+(a===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=zx(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}DU.peek=Dae;function DU(e){return e.value||""}function Dae(){return"<"}MU.peek=Mae;function MU(e,t,n,r){const a=BD(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),u+=c.move(")"),o(),u}function Mae(){return"!"}IU.peek=Iae;function IU(e,t,n,r){const a=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==p?c+=l.move(p+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Iae(){return"!"}RU.peek=Rae;function RU(e,t,n){let r=e.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return a+r+a}function Rae(){return"`"}function LU(e,t){const n=PD(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}FU.peek=Lae;function FU(e,t,n,r){const a=BD(n),s=a==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(LU(e,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let p=o.move("<");return p+=o.move(n.containerPhrasing(e,{before:p,after:">",...o.current()})),p+=o.move(">"),l(),n.stack=f,p}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${s}`),u+=o.move(" "+a),u+=o.move(n.safe(e.title,{before:u,after:a,...o.current()})),u+=o.move(a),c()),u+=o.move(")"),l(),u}function Lae(e,t,n){return LU(e,n)?"<":"["}$U.peek=Fae;function $U(e,t,n,r){const a=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const p=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==p?c+=l.move(p+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Fae(){return"["}function zD(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function $ae(e){const t=zD(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Bae(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function BU(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function zae(e,t,n,r){const a=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?Bae(n):zD(n);const l=e.ordered?o==="."?")":".":$ae(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),BU(n)===o&&f){let p=-1;for(;++p<e.children.length;){const y=e.children[p];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=s,a(),u}function qae(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Uae(e,t,n,r){const a=qae(n);let s=n.bulletCurrent||zD(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),f);return c(),u;function f(p,y,v){return y?(v?"":" ".repeat(o))+p:(v?s:s+" ".repeat(o-s.length))+p}}function Vae(e,t,n,r){const a=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,r);return s(),a(),o}const Hae=cN(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Gae(e,t,n,r){return(e.children.some(function(o){return Hae(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function Wae(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}zU.peek=Kae;function zU(e,t,n,r){const a=Wae(n),s=n.enter("strong"),o=n.createTracker(r),l=o.move(a+a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=Rw(r.before.charCodeAt(r.before.length-1),u,a);f.inside&&(c=zx(u)+c.slice(1));const p=c.charCodeAt(c.length-1),y=Rw(r.after.charCodeAt(0),p,a);y.inside&&(c=c.slice(0,-1)+zx(p));const v=o.move(a+a);return s(),n.attentionEncodeSurroundingInfo={after:y.outside,before:f.outside},l+c+v}function Kae(e,t,n){return n.options.strong||"*"}function Yae(e,t,n,r){return n.safe(e.value,r)}function Qae(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Xae(e,t,n){const r=(BU(n)+(n.options.ruleSpaces?" ":"")).repeat(Qae(n));return n.options.ruleSpaces?r.slice(0,-1):r}const qU={blockquote:bae,break:e4,code:Cae,definition:Eae,emphasis:OU,hardBreak:e4,heading:Oae,html:DU,image:MU,imageReference:IU,inlineCode:RU,link:FU,linkReference:$U,list:zae,listItem:Uae,paragraph:Vae,root:Gae,strong:zU,text:Yae,thematicBreak:Xae};function Jae(){return{enter:{table:Zae,tableData:t4,tableHeader:t4,tableRow:tse},exit:{codeText:nse,table:ese,tableData:HC,tableHeader:HC,tableRow:HC}}}function Zae(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function ese(e){this.exit(e),this.data.inTable=void 0}function tse(e){this.enter({type:"tableRow",children:[]},e)}function HC(e){this.exit(e)}function t4(e){this.enter({type:"tableCell",children:[]},e)}function nse(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,rse));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function rse(e,t){return t==="|"?t:e}function ise(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:o,tableCell:c,tableRow:l}};function o(v,x,b,w){return u(f(v,b,w),v.align)}function l(v,x,b,w){const _=p(v,b,w),T=u([_]);return T.slice(0,T.indexOf(`
`))}function c(v,x,b,w){const _=b.enter("tableCell"),T=b.enter("phrasing"),C=b.containerPhrasing(v,{...w,before:s,after:s});return T(),_(),C}function u(v,x){return vae(v,{align:x,alignDelimiters:r,padding:n,stringLength:a})}function f(v,x,b){const w=v.children;let _=-1;const T=[],C=x.enter("table");for(;++_<w.length;)T[_]=p(w[_],x,b);return C(),T}function p(v,x,b){const w=v.children;let _=-1;const T=[],C=x.enter("tableRow");for(;++_<w.length;)T[_]=c(w[_],v,x,b);return C(),T}function y(v,x,b){let w=qU.inlineCode(v,x,b);return b.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function ase(){return{exit:{taskListCheckValueChecked:n4,taskListCheckValueUnchecked:n4,paragraph:ose}}}function sse(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:lse}}}function n4(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function ose(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const a=t.children;let s=-1,o;for(;++s<a.length;){const l=a[s];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function lse(e,t,n,r){const a=e.children[0],s=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);s&&l.move(o);let c=qU.listItem(e,t,n,{...r,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+o}}function cse(){return[zie(),lae(),hae(),Jae(),ase()]}function use(e){return{extensions:[qie(),cae(e),fae(),ise(e),sse()]}}const dse={tokenize:yse,partial:!0},UU={tokenize:vse,partial:!0},VU={tokenize:xse,partial:!0},HU={tokenize:bse,partial:!0},hse={tokenize:jse,partial:!0},GU={name:"wwwAutolink",tokenize:mse,previous:KU},WU={name:"protocolAutolink",tokenize:gse,previous:YU},Bc={name:"emailAutolink",tokenize:pse,previous:QU},Ml={};function fse(){return{text:Ml}}let $h=48;for(;$h<123;)Ml[$h]=Bc,$h++,$h===58?$h=65:$h===91&&($h=97);Ml[43]=Bc;Ml[45]=Bc;Ml[46]=Bc;Ml[95]=Bc;Ml[72]=[Bc,WU];Ml[104]=[Bc,WU];Ml[87]=[Bc,GU];Ml[119]=[Bc,GU];function pse(e,t,n){const r=this;let a,s;return o;function o(p){return!sP(p)||!QU.call(r,r.previous)||qD(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(p))}function l(p){return sP(p)?(e.consume(p),l):p===64?(e.consume(p),c):n(p)}function c(p){return p===46?e.check(hse,f,u)(p):p===45||p===95||ia(p)?(s=!0,e.consume(p),c):f(p)}function u(p){return e.consume(p),a=!0,c}function f(p){return s&&a&&Ca(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function mse(e,t,n){const r=this;return a;function a(o){return o!==87&&o!==119||!KU.call(r,r.previous)||qD(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(dse,e.attempt(UU,e.attempt(VU,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function gse(e,t,n){const r=this;let a="",s=!1;return o;function o(p){return(p===72||p===104)&&YU.call(r,r.previous)&&!qD(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(p),e.consume(p),l):n(p)}function l(p){if(Ca(p)&&a.length<5)return a+=String.fromCodePoint(p),e.consume(p),l;if(p===58){const y=a.toLowerCase();if(y==="http"||y==="https")return e.consume(p),c}return n(p)}function c(p){return p===47?(e.consume(p),s?u:(s=!0,c)):n(p)}function u(p){return p===null||Dw(p)||br(p)||wf(p)||sN(p)?n(p):e.attempt(UU,e.attempt(VU,f),n)(p)}function f(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function yse(e,t,n){let r=0;return a;function a(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),a):o===46&&r===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function vse(e,t,n){let r,a,s;return o;function o(u){return u===46||u===95?e.check(HU,c,l)(u):u===null||br(u)||wf(u)||u!==45&&sN(u)?c(u):(s=!0,e.consume(u),o)}function l(u){return u===95?r=!0:(a=r,r=void 0),e.consume(u),o}function c(u){return a||r||!s?n(u):t(u)}}function xse(e,t){let n=0,r=0;return a;function a(o){return o===40?(n++,e.consume(o),a):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(HU,t,s)(o):o===null||br(o)||wf(o)?t(o):(e.consume(o),a)}function s(o){return o===41&&r++,e.consume(o),a}}function bse(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),s):l===93?(e.consume(l),a):l===60||l===null||br(l)||wf(l)?t(l):n(l)}function a(l){return l===null||l===40||l===91||br(l)||wf(l)?t(l):r(l)}function s(l){return Ca(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):Ca(l)?(e.consume(l),o):n(l)}}function jse(e,t,n){return r;function r(s){return e.consume(s),a}function a(s){return ia(s)?n(s):t(s)}}function KU(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||br(e)}function YU(e){return!Ca(e)}function QU(e){return!(e===47||sP(e))}function sP(e){return e===43||e===45||e===46||e===95||ia(e)}function qD(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const wse={tokenize:kse,partial:!0};function Sse(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Tse,continuation:{tokenize:Ese},exit:Ase}},text:{91:{name:"gfmFootnoteCall",tokenize:Cse},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Nse,resolveTo:_se}}}}function Nse(e,t,n){const r=this;let a=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;a--;){const c=r.events[a][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=Po(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function _se(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function Cse(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return l;function l(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(p){if(s>999||p===93&&!o||p===null||p===91||br(p))return n(p);if(p===93){e.exit("chunkString");const y=e.exit("gfmFootnoteCallString");return a.includes(Po(r.sliceSerialize(y)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return br(p)||(o=!0),s++,e.consume(p),p===92?f:u}function f(p){return p===91||p===92||p===93?(e.consume(p),s++,u):u(p)}}function Tse(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(x){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(x){return x===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(x)}function f(x){if(o>999||x===93&&!l||x===null||x===91||br(x))return n(x);if(x===93){e.exit("chunkString");const b=e.exit("gfmFootnoteDefinitionLabelString");return s=Po(r.sliceSerialize(b)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),y}return br(x)||(l=!0),o++,e.consume(x),x===92?p:f}function p(x){return x===91||x===92||x===93?(e.consume(x),o++,f):f(x)}function y(x){return x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),a.includes(s)||a.push(s),$n(e,v,"gfmFootnoteDefinitionWhitespace")):n(x)}function v(x){return t(x)}}function Ese(e,t,n){return e.check(qb,t,e.attempt(wse,t,n))}function Ase(e){e.exit("gfmFootnoteDefinition")}function kse(e,t,n){const r=this;return $n(e,a,"gfmFootnoteDefinitionIndent",5);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function Pse(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:a};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function a(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},p={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},y=[["enter",f,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",p,l]],v=l.parser.constructs.insideSpan.null;v&&Ss(y,y.length,0,oN(v,o.slice(u+1,c),l)),Ss(y,y.length,0,[["exit",p,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),Ss(o,u-1,c-u+3,y),c=u+y.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const u=this.previous,f=this.events;let p=0;return y;function y(x){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(x):(o.enter("strikethroughSequenceTemporary"),v(x))}function v(x){const b=og(u);if(x===126)return p>1?c(x):(o.consume(x),p++,v);if(p<2&&!n)return c(x);const w=o.exit("strikethroughSequenceTemporary"),_=og(x);return w._open=!_||_===2&&!!b,w._close=!b||b===2&&!!_,l(x)}}}class Ose{constructor(){this.map=[]}add(t,n,r){Dse(this,t,n,r)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let a=r.pop();for(;a;){for(const s of a)t.push(s);a=r.pop()}this.map.length=0}}function Dse(e,t,n,r){let a=0;if(!(n===0&&r.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...r);return}a+=1}e.map.push([t,n,r])}}function Mse(e,t){let n=!1;const r=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function Ise(){return{flow:{null:{name:"table",tokenize:Rse,resolveAll:Lse}}}}function Rse(e,t,n){const r=this;let a=0,s=0,o;return l;function l(z){let L=r.events.length-1;for(;L>-1;){const ne=r.events[L][1].type;if(ne==="lineEnding"||ne==="linePrefix")L--;else break}const H=L>-1?r.events[L][1].type:null,V=H==="tableHead"||H==="tableRow"?P:c;return V===P&&r.parser.lazy[r.now().line]?n(z):V(z)}function c(z){return e.enter("tableHead"),e.enter("tableRow"),u(z)}function u(z){return z===124||(o=!0,s+=1),f(z)}function f(z){return z===null?n(z):Kt(z)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),v):n(z):Pn(z)?$n(e,f,"whitespace")(z):(s+=1,o&&(o=!1,a+=1),z===124?(e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),o=!0,f):(e.enter("data"),p(z)))}function p(z){return z===null||z===124||br(z)?(e.exit("data"),f(z)):(e.consume(z),z===92?y:p)}function y(z){return z===92||z===124?(e.consume(z),p):p(z)}function v(z){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(z):(e.enter("tableDelimiterRow"),o=!1,Pn(z)?$n(e,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):x(z))}function x(z){return z===45||z===58?w(z):z===124?(o=!0,e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),b):E(z)}function b(z){return Pn(z)?$n(e,w,"whitespace")(z):w(z)}function w(z){return z===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(z),e.exit("tableDelimiterMarker"),_):z===45?(s+=1,_(z)):z===null||Kt(z)?O(z):E(z)}function _(z){return z===45?(e.enter("tableDelimiterFiller"),T(z)):E(z)}function T(z){return z===45?(e.consume(z),T):z===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(z),e.exit("tableDelimiterMarker"),C):(e.exit("tableDelimiterFiller"),C(z))}function C(z){return Pn(z)?$n(e,O,"whitespace")(z):O(z)}function O(z){return z===124?x(z):z===null||Kt(z)?!o||a!==s?E(z):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(z)):E(z)}function E(z){return n(z)}function P(z){return e.enter("tableRow"),I(z)}function I(z){return z===124?(e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),I):z===null||Kt(z)?(e.exit("tableRow"),t(z)):Pn(z)?$n(e,I,"whitespace")(z):(e.enter("data"),F(z))}function F(z){return z===null||z===124||br(z)?(e.exit("data"),I(z)):(e.consume(z),z===92?$:F)}function $(z){return z===92||z===124?(e.consume(z),F):F(z)}}function Lse(e,t){let n=-1,r=!0,a=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,f,p;const y=new Ose;for(;++n<e.length;){const v=e[n],x=v[1];v[0]==="enter"?x.type==="tableHead"?(l=!1,c!==0&&(r4(y,t,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},y.add(n,0,[["enter",u,t]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,p=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},y.add(n,0,[["enter",f,t]])),a=x.type==="tableDelimiterRow"?2:f?3:1):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],p=Dj(y,t,s,a,void 0,p),s=[0,0,0,0]),o[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],p=Dj(y,t,s,a,void 0,p)),s=o,o=[s[1],n,0,0])):x.type==="tableHead"?(l=!0,c=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],p=Dj(y,t,s,a,n,p)):o[1]!==0&&(p=Dj(y,t,o,a,n,p)),a=0):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&r4(y,t,c,u,f),y.consume(t.events),n=-1;++n<t.events.length;){const v=t.events[n];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=Mse(t.events,n))}return e}function Dj(e,t,n,r,a,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},km(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=km(t.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=km(t.events,n[2]),f=km(t.events,n[3]),p={type:l,start:Object.assign({},u),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",p,t]]),r!==2){const y=t.events[n[2]],v=t.events[n[3]];if(y[1].end=Object.assign({},v[1].end),y[1].type="chunkText",y[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,b=n[3]-n[2]-1;e.add(x,b,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return a!==void 0&&(s.end=Object.assign({},km(t.events,a)),e.add(a,0,[["exit",s,t]]),s=void 0),s}function r4(e,t,n,r,a){const s=[],o=km(t.events,n);a&&(a.end=Object.assign({},o),s.push(["exit",a,t])),r.end=Object.assign({},o),s.push(["exit",r,t]),e.add(n+1,0,s)}function km(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const Fse={name:"tasklistCheck",tokenize:Bse};function $se(){return{text:{91:Fse}}}function Bse(e,t,n){const r=this;return a;function a(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return br(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return Kt(c)?t(c):Pn(c)?e.check({tokenize:zse},t,n)(c):n(c)}}function zse(e,t,n){return $n(e,r,"whitespace");function r(a){return a===null?n(a):t(a)}}function qse(e){return oU([fse(),Sse(),Pse(e),Ise(),$se()])}const Use={};function Nf(e){const t=this,n=e||Use,r=t.data(),a=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);a.push(qse(n)),s.push(cse()),o.push(use(n))}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vse,Hse;function Gse(){return{geminiUrl:Vse,vertexUrl:Hse}}function Wse(e,t,n){var r,a,s;if(!(!((r=e.httpOptions)===null||r===void 0)&&r.baseUrl)){const o=Gse();return e.vertexai?(a=o.vertexUrl)!==null&&a!==void 0?a:t:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return e.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vb{}function on(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,a)=>{if(Object.prototype.hasOwnProperty.call(t,a)){const s=t[a];return s!=null?String(s):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function D(e,t,n){for(let s=0;s<t.length-1;s++){const o=t[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in e))if(Array.isArray(n))e[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(e[l])){const c=e[l];if(Array.isArray(n))for(let u=0;u<c.length;u++){const f=c[u];D(f,t.slice(s+1),n[u])}else for(const u of c)D(u,t.slice(s+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in e||(e[l]=[{}]);const c=e[l];D(c[0],t.slice(s+1),n);return}(!e[o]||typeof e[o]!="object")&&(e[o]={}),e=e[o]}const r=t[t.length-1],a=e[r];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else e[r]=n}function k(e,t){try{if(t.length===1&&t[0]==="_self")return e;for(let n=0;n<t.length;n++){if(typeof e!="object"||e===null)return;const r=t[n];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in e){const s=e[a];return Array.isArray(s)?s.map(o=>k(o,t.slice(n+1))):void 0}else return}else e=e[r]}return e}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fr(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function XU(e,t){const n=Fr(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function JU(e,t){return Array.isArray(t)?t.map(n=>Lw(e,n)):[Lw(e,t)]}function Lw(e,t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Kse(e,t){const n=Lw(e,t);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function Yse(e,t){const n=Lw(e,t);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}function i4(e,t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function ZU(e,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(n=>i4(e,n)):[i4(e,t)]}function oP(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function a4(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function s4(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Xa(e,t){if(t==null)throw new Error("ContentUnion is required");return oP(t)?t:{role:"user",parts:ZU(e,t)}}function e9(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=Xa(e,n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=Xa(e,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Xa(e,n)):[Xa(e,t)]}function yd(e,t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(a4(t)||s4(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Xa(e,t)]}const n=[],r=[],a=oP(t[0]);for(const s of t){const o=oP(s);if(o!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)n.push(s);else{if(a4(s)||s4(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(s)}}return a||n.push({role:"user",parts:ZU(e,r)}),n}function t9(e,t){return t}function n9(e,t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function dN(e,t){return t}function hN(e,t){if(!Array.isArray(t))throw new Error("tool is required and must be an array of Tools");return t}function Qse(e,t,n,r=1){const a=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:a?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:a?`${n}/${t}`:t}function vd(e,t){if(typeof t!="string")throw new Error("name must be a string");return Qse(e,t,"cachedContents")}function r9(e,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function xd(e,t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Xse(e){return e!=null&&typeof e=="object"&&"name"in e}function Jse(e){return e!=null&&typeof e=="object"&&"video"in e}function Zse(e){return e!=null&&typeof e=="object"&&"uri"in e}function i9(e,t){var n;let r;if(Xse(t)&&(r=t.name),!(Zse(t)&&(r=t.uri,r===void 0))&&!(Jse(t)&&(r=(n=t.video)===null||n===void 0?void 0:n.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const s=r.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${r}`);r=s[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function a9(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function s9(e,t){for(const n of["models","tunedModels","publisherModels"])if(eoe(t,n))return t[n];return[]}function eoe(e,t){return e!==null&&typeof e=="object"&&t in e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function toe(e,t){const n={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=k(t,["data"]);r!=null&&D(n,["data"],r);const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function noe(e,t){const n={};if(k(t,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=k(t,["thought"]);r!=null&&D(n,["thought"],r);const a=k(t,["inlineData"]);a!=null&&D(n,["inlineData"],toe(e,a));const s=k(t,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=k(t,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=k(t,["fileData"]);l!=null&&D(n,["fileData"],l);const c=k(t,["functionCall"]);c!=null&&D(n,["functionCall"],c);const u=k(t,["functionResponse"]);u!=null&&D(n,["functionResponse"],u);const f=k(t,["text"]);return f!=null&&D(n,["text"],f),n}function o4(e,t){const n={},r=k(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>noe(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function roe(){return{}}function ioe(e,t){const n={},r=k(t,["mode"]);r!=null&&D(n,["mode"],r);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function aoe(e,t){const n={},r=k(t,["dynamicRetrievalConfig"]);return r!=null&&D(n,["dynamicRetrievalConfig"],ioe(e,r)),n}function soe(e,t){const n={};if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");k(t,["googleSearch"])!=null&&D(n,["googleSearch"],roe());const a=k(t,["googleSearchRetrieval"]);if(a!=null&&D(n,["googleSearchRetrieval"],aoe(e,a)),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(k(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=k(t,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=k(t,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function ooe(e,t){const n={},r=k(t,["mode"]);r!=null&&D(n,["mode"],r);const a=k(t,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function loe(e,t){const n={},r=k(t,["functionCallingConfig"]);if(r!=null&&D(n,["functionCallingConfig"],ooe(e,r)),k(t,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function coe(e,t,n){const r={},a=k(t,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=k(t,["expireTime"]);n!==void 0&&s!=null&&D(n,["expireTime"],s);const o=k(t,["displayName"]);n!==void 0&&o!=null&&D(n,["displayName"],o);const l=k(t,["contents"]);if(n!==void 0&&l!=null){let p=yd(e,l);Array.isArray(p)&&(p=p.map(y=>o4(e,y))),D(n,["contents"],p)}const c=k(t,["systemInstruction"]);n!==void 0&&c!=null&&D(n,["systemInstruction"],o4(e,Xa(e,c)));const u=k(t,["tools"]);if(n!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>soe(e,y))),D(n,["tools"],p)}const f=k(t,["toolConfig"]);return n!==void 0&&f!=null&&D(n,["toolConfig"],loe(e,f)),r}function uoe(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["model"],XU(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],coe(e,a,n)),n}function doe(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["_url","name"],vd(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function hoe(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["_url","name"],vd(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function foe(e,t,n){const r={},a=k(t,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=k(t,["expireTime"]);return n!==void 0&&s!=null&&D(n,["expireTime"],s),r}function poe(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["_url","name"],vd(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],foe(e,a,n)),n}function moe(e,t,n){const r={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),r}function goe(e,t){const n={},r=k(t,["config"]);return r!=null&&D(n,["config"],moe(e,r,n)),n}function yoe(e,t){const n={},r=k(t,["displayName"]);r!=null&&D(n,["displayName"],r);const a=k(t,["data"]);a!=null&&D(n,["data"],a);const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function voe(e,t){const n={},r=k(t,["videoMetadata"]);r!=null&&D(n,["videoMetadata"],r);const a=k(t,["thought"]);a!=null&&D(n,["thought"],a);const s=k(t,["inlineData"]);s!=null&&D(n,["inlineData"],yoe(e,s));const o=k(t,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=k(t,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=k(t,["fileData"]);c!=null&&D(n,["fileData"],c);const u=k(t,["functionCall"]);u!=null&&D(n,["functionCall"],u);const f=k(t,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=k(t,["text"]);return p!=null&&D(n,["text"],p),n}function l4(e,t){const n={},r=k(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>voe(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function xoe(){return{}}function boe(e,t){const n={},r=k(t,["mode"]);r!=null&&D(n,["mode"],r);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function joe(e,t){const n={},r=k(t,["dynamicRetrievalConfig"]);return r!=null&&D(n,["dynamicRetrievalConfig"],boe(e,r)),n}function woe(){return{}}function Soe(e,t){const n={},r=k(t,["apiKeyString"]);return r!=null&&D(n,["apiKeyString"],r),n}function Noe(e,t){const n={},r=k(t,["apiKeyConfig"]);r!=null&&D(n,["apiKeyConfig"],Soe(e,r));const a=k(t,["authType"]);a!=null&&D(n,["authType"],a);const s=k(t,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=k(t,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=k(t,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=k(t,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function _oe(e,t){const n={},r=k(t,["authConfig"]);return r!=null&&D(n,["authConfig"],Noe(e,r)),n}function Coe(e,t){const n={},r=k(t,["retrieval"]);r!=null&&D(n,["retrieval"],r),k(t,["googleSearch"])!=null&&D(n,["googleSearch"],xoe());const s=k(t,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],joe(e,s)),k(t,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],woe());const l=k(t,["googleMaps"]);l!=null&&D(n,["googleMaps"],_oe(e,l));const c=k(t,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const u=k(t,["functionDeclarations"]);return u!=null&&D(n,["functionDeclarations"],u),n}function Toe(e,t){const n={},r=k(t,["mode"]);r!=null&&D(n,["mode"],r);const a=k(t,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function Eoe(e,t){const n={},r=k(t,["latitude"]);r!=null&&D(n,["latitude"],r);const a=k(t,["longitude"]);return a!=null&&D(n,["longitude"],a),n}function Aoe(e,t){const n={},r=k(t,["latLng"]);return r!=null&&D(n,["latLng"],Eoe(e,r)),n}function koe(e,t){const n={},r=k(t,["functionCallingConfig"]);r!=null&&D(n,["functionCallingConfig"],Toe(e,r));const a=k(t,["retrievalConfig"]);return a!=null&&D(n,["retrievalConfig"],Aoe(e,a)),n}function Poe(e,t,n){const r={},a=k(t,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=k(t,["expireTime"]);n!==void 0&&s!=null&&D(n,["expireTime"],s);const o=k(t,["displayName"]);n!==void 0&&o!=null&&D(n,["displayName"],o);const l=k(t,["contents"]);if(n!==void 0&&l!=null){let p=yd(e,l);Array.isArray(p)&&(p=p.map(y=>l4(e,y))),D(n,["contents"],p)}const c=k(t,["systemInstruction"]);n!==void 0&&c!=null&&D(n,["systemInstruction"],l4(e,Xa(e,c)));const u=k(t,["tools"]);if(n!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>Coe(e,y))),D(n,["tools"],p)}const f=k(t,["toolConfig"]);return n!==void 0&&f!=null&&D(n,["toolConfig"],koe(e,f)),r}function Ooe(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["model"],XU(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],Poe(e,a,n)),n}function Doe(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["_url","name"],vd(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Moe(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["_url","name"],vd(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Ioe(e,t,n){const r={},a=k(t,["ttl"]);n!==void 0&&a!=null&&D(n,["ttl"],a);const s=k(t,["expireTime"]);return n!==void 0&&s!=null&&D(n,["expireTime"],s),r}function Roe(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["_url","name"],vd(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],Ioe(e,a,n)),n}function Loe(e,t,n){const r={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),r}function Foe(e,t){const n={},r=k(t,["config"]);return r!=null&&D(n,["config"],Loe(e,r,n)),n}function pw(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["model"]);s!=null&&D(n,["model"],s);const o=k(t,["createTime"]);o!=null&&D(n,["createTime"],o);const l=k(t,["updateTime"]);l!=null&&D(n,["updateTime"],l);const c=k(t,["expireTime"]);c!=null&&D(n,["expireTime"],c);const u=k(t,["usageMetadata"]);return u!=null&&D(n,["usageMetadata"],u),n}function $oe(){return{}}function Boe(e,t){const n={},r=k(t,["nextPageToken"]);r!=null&&D(n,["nextPageToken"],r);const a=k(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>pw(e,o))),D(n,["cachedContents"],s)}return n}function mw(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["model"]);s!=null&&D(n,["model"],s);const o=k(t,["createTime"]);o!=null&&D(n,["createTime"],o);const l=k(t,["updateTime"]);l!=null&&D(n,["updateTime"],l);const c=k(t,["expireTime"]);c!=null&&D(n,["expireTime"],c);const u=k(t,["usageMetadata"]);return u!=null&&D(n,["usageMetadata"],u),n}function zoe(){return{}}function qoe(e,t){const n={},r=k(t,["nextPageToken"]);r!=null&&D(n,["nextPageToken"],r);const a=k(t,["cachedContents"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>mw(e,o))),D(n,["cachedContents"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lg;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(lg||(lg={}));class fN{constructor(t,n,r,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,a)}init(t,n,r){var a,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};r?typeof r=="object"?o=Object.assign({},r):o=r:o={config:{}},o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(a=o.config)===null||a===void 0?void 0:a.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var c4;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(c4||(c4={}));var u4;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(u4||(u4={}));var d4;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(d4||(d4={}));var h4;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(h4||(h4={}));var f4;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(f4||(f4={}));var p4;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(p4||(p4={}));var m4;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(m4||(m4={}));var cg;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT"})(cg||(cg={}));var g4;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY"})(g4||(g4={}));var y4;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(y4||(y4={}));var v4;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(v4||(v4={}));var x4;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(x4||(x4={}));var b4;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(b4||(b4={}));var hd;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(hd||(hd={}));var j4;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(j4||(j4={}));var lP;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(lP||(lP={}));var w4;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(w4||(w4={}));var S4;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(S4||(S4={}));var N4;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(N4||(N4={}));var _4;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(_4||(_4={}));var C4;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(C4||(C4={}));var T4;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(T4||(T4={}));var E4;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi"})(E4||(E4={}));var A4;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(A4||(A4={}));var k4;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(k4||(k4={}));var P4;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(P4||(P4={}));var O4;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(O4||(O4={}));var D4;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(D4||(D4={}));var M4;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(M4||(M4={}));var I4;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(I4||(I4={}));var R4;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(R4||(R4={}));var L4;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(L4||(L4={}));var F4;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(F4||(F4={}));var $4;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($4||($4={}));class Mj{get text(){var t,n,r,a,s,o,l,c;if(((a=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const p=[];for(const y of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[v,x]of Object.entries(y))v!=="text"&&v!=="thought"&&(x!==null||x!==void 0)&&p.push(v);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;f=!0,u+=y.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var t,n,r,a,s,o,l,c;if(((a=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const p of(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[y,v]of Object.entries(p))y!=="inlineData"&&(v!==null||v!==void 0)&&f.push(y);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var t,n,r,a,s,o,l,c;if(((a=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var t,n,r,a,s,o,l,c,u;if(((a=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var t,n,r,a,s,o,l,c,u;if(((a=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class B4{}class z4{}class Uoe{}class Voe{}class q4{}class U4{}class V4{}class Hoe{}class H4{}class G4{}class W4{}class Goe{}class cP{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Woe{}class Koe{}class Yoe{get text(){var t,n,r;let a="",s=!1;const o=[];for(const l of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,u]of Object.entries(l))c!=="text"&&c!=="thought"&&u!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,a+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?a:void 0}get data(){var t,n,r;let a="";const s=[];for(const o of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&s.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(a+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qoe extends Vb{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new fN(lg.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Ooe(this.apiClient,t);return l=on("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>mw(this.apiClient,f))}else{const u=uoe(this.apiClient,t);return l=on("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>pw(this.apiClient,f))}}async get(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Doe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>mw(this.apiClient,f))}else{const u=doe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>pw(this.apiClient,f))}}async delete(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Moe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(()=>{const f=zoe(),p=new G4;return Object.assign(p,f),p})}else{const u=hoe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=$oe(),p=new G4;return Object.assign(p,f),p})}}async update(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Roe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>mw(this.apiClient,f))}else{const u=poe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>pw(this.apiClient,f))}}async listInternal(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Foe(this.apiClient,t);return l=on("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=qoe(this.apiClient,f),y=new W4;return Object.assign(y,p),y})}else{const u=goe(this.apiClient,t);return l=on("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Boe(this.apiClient,f),y=new W4;return Object.assign(y,p),y})}}}function K4(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ta(e){return this instanceof ta?(this.v=e,this):new ta(e)}function Fw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(v){return function(x){return Promise.resolve(x).then(v,p)}}function l(v,x){r[v]&&(a[v]=function(b){return new Promise(function(w,_){s.push([v,b,w,_])>1||c(v,b)})},x&&(a[v]=x(a[v])))}function c(v,x){try{u(r[v](x))}catch(b){y(s[0][3],b)}}function u(v){v.value instanceof ta?Promise.resolve(v.value.v).then(f,p):y(s[0][2],v)}function f(v){c("next",v)}function p(v){c("throw",v)}function y(v,x){v(x),s.shift(),s.length&&c(s[0][0],s[0][1])}}function uP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof K4=="function"?K4(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(l,c){o=e[s](o),a(l,c,o.done,o.value)})}}function a(s,o,l,c){Promise.resolve(c).then(function(u){s({value:u,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xoe(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:o9(n)}function o9(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0||t.text!==void 0&&t.text==="")return!1;return!0}function Joe(e){if(e.length!==0){if(e[0].role!=="user")throw new Error("History must start with a user turn.");for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Zoe(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0,a=e[0];for(;r<n;)if(e[r].role==="user")a=e[r],r++;else{const s=[];let o=!0;for(;r<n&&e[r].role==="model";)s.push(e[r]),o&&!o9(e[r])&&(o=!1),r++;o&&(t.push(a),t.push(...s))}return t}class ele{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new tle(this.apiClient,this.modelsModule,t.model,t.config,t.history)}}class tle{constructor(t,n,r,a={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=a,this.history=s,this.sendPromise=Promise.resolve(),Joe(s)}async sendMessage(t){var n;await this.sendPromise;const r=Xa(this.apiClient,t.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o;const c=(o=(s=(await a).candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=c?[c]:[];this.recordHistory(r,u)})(),await this.sendPromise,a}async sendMessageStream(t){var n;await this.sendPromise;const r=Xa(this.apiClient,t.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const s=await a;return this.processStreamResponse(s,r)}getHistory(t=!1){return t?Zoe(this.history):this.history}processStreamResponse(t,n){var r,a;return Fw(this,arguments,function*(){var o,l,c,u;const f=[];try{for(var p=!0,y=uP(t),v;v=yield ta(y.next()),o=v.done,!o;p=!0){u=v.value,p=!1;const x=u;if(Xoe(x)){const b=(a=(r=x.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content;b!==void 0&&f.push(b)}yield yield ta(x)}}catch(x){l={error:x}}finally{try{!p&&!o&&(c=y.return)&&(yield ta(c.call(y)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(t,n){let r=[];n.length>0&&n.every(a=>a.role==="model")?r=n:r.push({role:"model",parts:[]}),this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nle(e,t,n){const r={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);return n!==void 0&&s!=null&&D(n,["_query","pageToken"],s),r}function rle(e,t){const n={},r=k(t,["config"]);return r!=null&&D(n,["config"],nle(e,r,n)),n}function ile(e,t){const n={},r=k(t,["details"]);r!=null&&D(n,["details"],r);const a=k(t,["message"]);a!=null&&D(n,["message"],a);const s=k(t,["code"]);return s!=null&&D(n,["code"],s),n}function ale(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["mimeType"]);s!=null&&D(n,["mimeType"],s);const o=k(t,["sizeBytes"]);o!=null&&D(n,["sizeBytes"],o);const l=k(t,["createTime"]);l!=null&&D(n,["createTime"],l);const c=k(t,["expirationTime"]);c!=null&&D(n,["expirationTime"],c);const u=k(t,["updateTime"]);u!=null&&D(n,["updateTime"],u);const f=k(t,["sha256Hash"]);f!=null&&D(n,["sha256Hash"],f);const p=k(t,["uri"]);p!=null&&D(n,["uri"],p);const y=k(t,["downloadUri"]);y!=null&&D(n,["downloadUri"],y);const v=k(t,["state"]);v!=null&&D(n,["state"],v);const x=k(t,["source"]);x!=null&&D(n,["source"],x);const b=k(t,["videoMetadata"]);b!=null&&D(n,["videoMetadata"],b);const w=k(t,["error"]);return w!=null&&D(n,["error"],ile(e,w)),n}function sle(e,t){const n={},r=k(t,["file"]);r!=null&&D(n,["file"],ale(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function ole(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["_url","file"],i9(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function lle(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["_url","file"],i9(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function cle(e,t){const n={},r=k(t,["details"]);r!=null&&D(n,["details"],r);const a=k(t,["message"]);a!=null&&D(n,["message"],a);const s=k(t,["code"]);return s!=null&&D(n,["code"],s),n}function dP(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["mimeType"]);s!=null&&D(n,["mimeType"],s);const o=k(t,["sizeBytes"]);o!=null&&D(n,["sizeBytes"],o);const l=k(t,["createTime"]);l!=null&&D(n,["createTime"],l);const c=k(t,["expirationTime"]);c!=null&&D(n,["expirationTime"],c);const u=k(t,["updateTime"]);u!=null&&D(n,["updateTime"],u);const f=k(t,["sha256Hash"]);f!=null&&D(n,["sha256Hash"],f);const p=k(t,["uri"]);p!=null&&D(n,["uri"],p);const y=k(t,["downloadUri"]);y!=null&&D(n,["downloadUri"],y);const v=k(t,["state"]);v!=null&&D(n,["state"],v);const x=k(t,["source"]);x!=null&&D(n,["source"],x);const b=k(t,["videoMetadata"]);b!=null&&D(n,["videoMetadata"],b);const w=k(t,["error"]);return w!=null&&D(n,["error"],cle(e,w)),n}function ule(e,t){const n={},r=k(t,["nextPageToken"]);r!=null&&D(n,["nextPageToken"],r);const a=k(t,["files"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>dP(e,o))),D(n,["files"],s)}return n}function dle(){return{}}function hle(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fle extends Vb{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new fN(lg.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>dP(this.apiClient,n))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=rle(this.apiClient,t);return s=on("files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>{const u=ule(this.apiClient,c),f=new Goe;return Object.assign(f,u),f})}}async createInternal(t){var n,r;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=sle(this.apiClient,t);return s=on("upload/v1beta/files",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(()=>{const c=dle(),u=new Woe;return Object.assign(u,c),u})}}async get(t){var n,r;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=ole(this.apiClient,t);return s=on("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>dP(this.apiClient,c))}}async delete(t){var n,r;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=lle(this.apiClient,t);return s=on("files/{file}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(()=>{const c=hle(),u=new Koe;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ple(e,t){const n={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=k(t,["data"]);r!=null&&D(n,["data"],r);const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function mle(e,t){const n={},r=k(t,["displayName"]);r!=null&&D(n,["displayName"],r);const a=k(t,["data"]);a!=null&&D(n,["data"],a);const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function gle(e,t){const n={};if(k(t,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=k(t,["thought"]);r!=null&&D(n,["thought"],r);const a=k(t,["inlineData"]);a!=null&&D(n,["inlineData"],ple(e,a));const s=k(t,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=k(t,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=k(t,["fileData"]);l!=null&&D(n,["fileData"],l);const c=k(t,["functionCall"]);c!=null&&D(n,["functionCall"],c);const u=k(t,["functionResponse"]);u!=null&&D(n,["functionResponse"],u);const f=k(t,["text"]);return f!=null&&D(n,["text"],f),n}function yle(e,t){const n={},r=k(t,["videoMetadata"]);r!=null&&D(n,["videoMetadata"],r);const a=k(t,["thought"]);a!=null&&D(n,["thought"],a);const s=k(t,["inlineData"]);s!=null&&D(n,["inlineData"],mle(e,s));const o=k(t,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=k(t,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=k(t,["fileData"]);c!=null&&D(n,["fileData"],c);const u=k(t,["functionCall"]);u!=null&&D(n,["functionCall"],u);const f=k(t,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=k(t,["text"]);return p!=null&&D(n,["text"],p),n}function vle(e,t){const n={},r=k(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>gle(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function xle(e,t){const n={},r=k(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>yle(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function ble(){return{}}function jle(){return{}}function wle(e,t){const n={},r=k(t,["mode"]);r!=null&&D(n,["mode"],r);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function Sle(e,t){const n={},r=k(t,["mode"]);r!=null&&D(n,["mode"],r);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function Nle(e,t){const n={},r=k(t,["dynamicRetrievalConfig"]);return r!=null&&D(n,["dynamicRetrievalConfig"],wle(e,r)),n}function _le(e,t){const n={},r=k(t,["dynamicRetrievalConfig"]);return r!=null&&D(n,["dynamicRetrievalConfig"],Sle(e,r)),n}function Cle(){return{}}function Tle(e,t){const n={},r=k(t,["apiKeyString"]);return r!=null&&D(n,["apiKeyString"],r),n}function Ele(e,t){const n={},r=k(t,["apiKeyConfig"]);r!=null&&D(n,["apiKeyConfig"],Tle(e,r));const a=k(t,["authType"]);a!=null&&D(n,["authType"],a);const s=k(t,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=k(t,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=k(t,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=k(t,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function Ale(e,t){const n={},r=k(t,["authConfig"]);return r!=null&&D(n,["authConfig"],Ele(e,r)),n}function kle(e,t){const n={};if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");k(t,["googleSearch"])!=null&&D(n,["googleSearch"],ble());const a=k(t,["googleSearchRetrieval"]);if(a!=null&&D(n,["googleSearchRetrieval"],Nle(e,a)),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(k(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=k(t,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=k(t,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function Ple(e,t){const n={},r=k(t,["retrieval"]);r!=null&&D(n,["retrieval"],r),k(t,["googleSearch"])!=null&&D(n,["googleSearch"],jle());const s=k(t,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],_le(e,s)),k(t,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],Cle());const l=k(t,["googleMaps"]);l!=null&&D(n,["googleMaps"],Ale(e,l));const c=k(t,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const u=k(t,["functionDeclarations"]);return u!=null&&D(n,["functionDeclarations"],u),n}function Ole(e,t){const n={},r=k(t,["handle"]);if(r!=null&&D(n,["handle"],r),k(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return n}function Dle(e,t){const n={},r=k(t,["handle"]);r!=null&&D(n,["handle"],r);const a=k(t,["transparent"]);return a!=null&&D(n,["transparent"],a),n}function Y4(){return{}}function Q4(){return{}}function Mle(e,t){const n={},r=k(t,["disabled"]);r!=null&&D(n,["disabled"],r);const a=k(t,["startOfSpeechSensitivity"]);a!=null&&D(n,["startOfSpeechSensitivity"],a);const s=k(t,["endOfSpeechSensitivity"]);s!=null&&D(n,["endOfSpeechSensitivity"],s);const o=k(t,["prefixPaddingMs"]);o!=null&&D(n,["prefixPaddingMs"],o);const l=k(t,["silenceDurationMs"]);return l!=null&&D(n,["silenceDurationMs"],l),n}function Ile(e,t){const n={},r=k(t,["disabled"]);r!=null&&D(n,["disabled"],r);const a=k(t,["startOfSpeechSensitivity"]);a!=null&&D(n,["startOfSpeechSensitivity"],a);const s=k(t,["endOfSpeechSensitivity"]);s!=null&&D(n,["endOfSpeechSensitivity"],s);const o=k(t,["prefixPaddingMs"]);o!=null&&D(n,["prefixPaddingMs"],o);const l=k(t,["silenceDurationMs"]);return l!=null&&D(n,["silenceDurationMs"],l),n}function Rle(e,t){const n={},r=k(t,["automaticActivityDetection"]);r!=null&&D(n,["automaticActivityDetection"],Mle(e,r));const a=k(t,["activityHandling"]);a!=null&&D(n,["activityHandling"],a);const s=k(t,["turnCoverage"]);return s!=null&&D(n,["turnCoverage"],s),n}function Lle(e,t){const n={},r=k(t,["automaticActivityDetection"]);r!=null&&D(n,["automaticActivityDetection"],Ile(e,r));const a=k(t,["activityHandling"]);a!=null&&D(n,["activityHandling"],a);const s=k(t,["turnCoverage"]);return s!=null&&D(n,["turnCoverage"],s),n}function Fle(e,t){const n={},r=k(t,["targetTokens"]);return r!=null&&D(n,["targetTokens"],r),n}function $le(e,t){const n={},r=k(t,["targetTokens"]);return r!=null&&D(n,["targetTokens"],r),n}function Ble(e,t){const n={},r=k(t,["triggerTokens"]);r!=null&&D(n,["triggerTokens"],r);const a=k(t,["slidingWindow"]);return a!=null&&D(n,["slidingWindow"],Fle(e,a)),n}function zle(e,t){const n={},r=k(t,["triggerTokens"]);r!=null&&D(n,["triggerTokens"],r);const a=k(t,["slidingWindow"]);return a!=null&&D(n,["slidingWindow"],$le(e,a)),n}function qle(e,t,n){const r={},a=k(t,["generationConfig"]);n!==void 0&&a!=null&&D(n,["setup","generationConfig"],a);const s=k(t,["responseModalities"]);n!==void 0&&s!=null&&D(n,["setup","generationConfig","responseModalities"],s);const o=k(t,["temperature"]);n!==void 0&&o!=null&&D(n,["setup","generationConfig","temperature"],o);const l=k(t,["topP"]);n!==void 0&&l!=null&&D(n,["setup","generationConfig","topP"],l);const c=k(t,["topK"]);n!==void 0&&c!=null&&D(n,["setup","generationConfig","topK"],c);const u=k(t,["maxOutputTokens"]);n!==void 0&&u!=null&&D(n,["setup","generationConfig","maxOutputTokens"],u);const f=k(t,["mediaResolution"]);n!==void 0&&f!=null&&D(n,["setup","generationConfig","mediaResolution"],f);const p=k(t,["seed"]);n!==void 0&&p!=null&&D(n,["setup","generationConfig","seed"],p);const y=k(t,["speechConfig"]);n!==void 0&&y!=null&&D(n,["setup","generationConfig","speechConfig"],y);const v=k(t,["systemInstruction"]);n!==void 0&&v!=null&&D(n,["setup","systemInstruction"],vle(e,Xa(e,v)));const x=k(t,["tools"]);if(n!==void 0&&x!=null){let O=hN(e,x);Array.isArray(O)&&(O=O.map(E=>kle(e,dN(e,E)))),D(n,["setup","tools"],O)}const b=k(t,["sessionResumption"]);n!==void 0&&b!=null&&D(n,["setup","sessionResumption"],Ole(e,b));const w=k(t,["inputAudioTranscription"]);n!==void 0&&w!=null&&D(n,["setup","inputAudioTranscription"],Y4());const _=k(t,["outputAudioTranscription"]);n!==void 0&&_!=null&&D(n,["setup","outputAudioTranscription"],Y4());const T=k(t,["realtimeInputConfig"]);n!==void 0&&T!=null&&D(n,["setup","realtimeInputConfig"],Rle(e,T));const C=k(t,["contextWindowCompression"]);return n!==void 0&&C!=null&&D(n,["setup","contextWindowCompression"],Ble(e,C)),r}function Ule(e,t,n){const r={},a=k(t,["generationConfig"]);n!==void 0&&a!=null&&D(n,["setup","generationConfig"],a);const s=k(t,["responseModalities"]);n!==void 0&&s!=null&&D(n,["setup","generationConfig","responseModalities"],s);const o=k(t,["temperature"]);n!==void 0&&o!=null&&D(n,["setup","generationConfig","temperature"],o);const l=k(t,["topP"]);n!==void 0&&l!=null&&D(n,["setup","generationConfig","topP"],l);const c=k(t,["topK"]);n!==void 0&&c!=null&&D(n,["setup","generationConfig","topK"],c);const u=k(t,["maxOutputTokens"]);n!==void 0&&u!=null&&D(n,["setup","generationConfig","maxOutputTokens"],u);const f=k(t,["mediaResolution"]);n!==void 0&&f!=null&&D(n,["setup","generationConfig","mediaResolution"],f);const p=k(t,["seed"]);n!==void 0&&p!=null&&D(n,["setup","generationConfig","seed"],p);const y=k(t,["speechConfig"]);n!==void 0&&y!=null&&D(n,["setup","generationConfig","speechConfig"],y);const v=k(t,["systemInstruction"]);n!==void 0&&v!=null&&D(n,["setup","systemInstruction"],xle(e,Xa(e,v)));const x=k(t,["tools"]);if(n!==void 0&&x!=null){let O=hN(e,x);Array.isArray(O)&&(O=O.map(E=>Ple(e,dN(e,E)))),D(n,["setup","tools"],O)}const b=k(t,["sessionResumption"]);n!==void 0&&b!=null&&D(n,["setup","sessionResumption"],Dle(e,b));const w=k(t,["inputAudioTranscription"]);n!==void 0&&w!=null&&D(n,["setup","inputAudioTranscription"],Q4());const _=k(t,["outputAudioTranscription"]);n!==void 0&&_!=null&&D(n,["setup","outputAudioTranscription"],Q4());const T=k(t,["realtimeInputConfig"]);n!==void 0&&T!=null&&D(n,["setup","realtimeInputConfig"],Lle(e,T));const C=k(t,["contextWindowCompression"]);return n!==void 0&&C!=null&&D(n,["setup","contextWindowCompression"],zle(e,C)),r}function Vle(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["setup","model"],Fr(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],qle(e,a,n)),n}function Hle(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["setup","model"],Fr(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],Ule(e,a,n)),n}function Gle(){return{}}function Wle(){return{}}function Kle(){return{}}function Yle(){return{}}function Qle(e,t){const n={},r=k(t,["media"]);r!=null&&D(n,["mediaChunks"],JU(e,r));const a=k(t,["audio"]);a!=null&&D(n,["audio"],Yse(e,a));const s=k(t,["audioStreamEnd"]);s!=null&&D(n,["audioStreamEnd"],s);const o=k(t,["video"]);o!=null&&D(n,["video"],Kse(e,o));const l=k(t,["text"]);return l!=null&&D(n,["text"],l),k(t,["activityStart"])!=null&&D(n,["activityStart"],Gle()),k(t,["activityEnd"])!=null&&D(n,["activityEnd"],Kle()),n}function Xle(e,t){const n={},r=k(t,["media"]);if(r!=null&&D(n,["mediaChunks"],JU(e,r)),k(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const a=k(t,["audioStreamEnd"]);if(a!=null&&D(n,["audioStreamEnd"],a),k(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(k(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return k(t,["activityStart"])!=null&&D(n,["activityStart"],Wle()),k(t,["activityEnd"])!=null&&D(n,["activityEnd"],Yle()),n}function Jle(){return{}}function Zle(){return{}}function ece(e,t){const n={},r=k(t,["data"]);r!=null&&D(n,["data"],r);const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function tce(e,t){const n={},r=k(t,["displayName"]);r!=null&&D(n,["displayName"],r);const a=k(t,["data"]);a!=null&&D(n,["data"],a);const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function nce(e,t){const n={},r=k(t,["thought"]);r!=null&&D(n,["thought"],r);const a=k(t,["inlineData"]);a!=null&&D(n,["inlineData"],ece(e,a));const s=k(t,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=k(t,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=k(t,["fileData"]);l!=null&&D(n,["fileData"],l);const c=k(t,["functionCall"]);c!=null&&D(n,["functionCall"],c);const u=k(t,["functionResponse"]);u!=null&&D(n,["functionResponse"],u);const f=k(t,["text"]);return f!=null&&D(n,["text"],f),n}function rce(e,t){const n={},r=k(t,["videoMetadata"]);r!=null&&D(n,["videoMetadata"],r);const a=k(t,["thought"]);a!=null&&D(n,["thought"],a);const s=k(t,["inlineData"]);s!=null&&D(n,["inlineData"],tce(e,s));const o=k(t,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=k(t,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=k(t,["fileData"]);c!=null&&D(n,["fileData"],c);const u=k(t,["functionCall"]);u!=null&&D(n,["functionCall"],u);const f=k(t,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=k(t,["text"]);return p!=null&&D(n,["text"],p),n}function ice(e,t){const n={},r=k(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>nce(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function ace(e,t){const n={},r=k(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>rce(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function X4(e,t){const n={},r=k(t,["text"]);r!=null&&D(n,["text"],r);const a=k(t,["finished"]);return a!=null&&D(n,["finished"],a),n}function J4(e,t){const n={},r=k(t,["text"]);r!=null&&D(n,["text"],r);const a=k(t,["finished"]);return a!=null&&D(n,["finished"],a),n}function sce(e,t){const n={},r=k(t,["modelTurn"]);r!=null&&D(n,["modelTurn"],ice(e,r));const a=k(t,["turnComplete"]);a!=null&&D(n,["turnComplete"],a);const s=k(t,["interrupted"]);s!=null&&D(n,["interrupted"],s);const o=k(t,["groundingMetadata"]);o!=null&&D(n,["groundingMetadata"],o);const l=k(t,["generationComplete"]);l!=null&&D(n,["generationComplete"],l);const c=k(t,["inputTranscription"]);c!=null&&D(n,["inputTranscription"],X4(e,c));const u=k(t,["outputTranscription"]);return u!=null&&D(n,["outputTranscription"],X4(e,u)),n}function oce(e,t){const n={},r=k(t,["modelTurn"]);r!=null&&D(n,["modelTurn"],ace(e,r));const a=k(t,["turnComplete"]);a!=null&&D(n,["turnComplete"],a);const s=k(t,["interrupted"]);s!=null&&D(n,["interrupted"],s);const o=k(t,["groundingMetadata"]);o!=null&&D(n,["groundingMetadata"],o);const l=k(t,["generationComplete"]);l!=null&&D(n,["generationComplete"],l);const c=k(t,["inputTranscription"]);c!=null&&D(n,["inputTranscription"],J4(e,c));const u=k(t,["outputTranscription"]);return u!=null&&D(n,["outputTranscription"],J4(e,u)),n}function lce(e,t){const n={},r=k(t,["id"]);r!=null&&D(n,["id"],r);const a=k(t,["args"]);a!=null&&D(n,["args"],a);const s=k(t,["name"]);return s!=null&&D(n,["name"],s),n}function cce(e,t){const n={},r=k(t,["args"]);r!=null&&D(n,["args"],r);const a=k(t,["name"]);return a!=null&&D(n,["name"],a),n}function uce(e,t){const n={},r=k(t,["functionCalls"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>lce(e,s))),D(n,["functionCalls"],a)}return n}function dce(e,t){const n={},r=k(t,["functionCalls"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>cce(e,s))),D(n,["functionCalls"],a)}return n}function hce(e,t){const n={},r=k(t,["ids"]);return r!=null&&D(n,["ids"],r),n}function fce(e,t){const n={},r=k(t,["ids"]);return r!=null&&D(n,["ids"],r),n}function Ij(e,t){const n={},r=k(t,["modality"]);r!=null&&D(n,["modality"],r);const a=k(t,["tokenCount"]);return a!=null&&D(n,["tokenCount"],a),n}function Rj(e,t){const n={},r=k(t,["modality"]);r!=null&&D(n,["modality"],r);const a=k(t,["tokenCount"]);return a!=null&&D(n,["tokenCount"],a),n}function pce(e,t){const n={},r=k(t,["promptTokenCount"]);r!=null&&D(n,["promptTokenCount"],r);const a=k(t,["cachedContentTokenCount"]);a!=null&&D(n,["cachedContentTokenCount"],a);const s=k(t,["responseTokenCount"]);s!=null&&D(n,["responseTokenCount"],s);const o=k(t,["toolUsePromptTokenCount"]);o!=null&&D(n,["toolUsePromptTokenCount"],o);const l=k(t,["thoughtsTokenCount"]);l!=null&&D(n,["thoughtsTokenCount"],l);const c=k(t,["totalTokenCount"]);c!=null&&D(n,["totalTokenCount"],c);const u=k(t,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(x=>Ij(e,x))),D(n,["promptTokensDetails"],v)}const f=k(t,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(x=>Ij(e,x))),D(n,["cacheTokensDetails"],v)}const p=k(t,["responseTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(x=>Ij(e,x))),D(n,["responseTokensDetails"],v)}const y=k(t,["toolUsePromptTokensDetails"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(x=>Ij(e,x))),D(n,["toolUsePromptTokensDetails"],v)}return n}function mce(e,t){const n={},r=k(t,["promptTokenCount"]);r!=null&&D(n,["promptTokenCount"],r);const a=k(t,["cachedContentTokenCount"]);a!=null&&D(n,["cachedContentTokenCount"],a);const s=k(t,["candidatesTokenCount"]);s!=null&&D(n,["responseTokenCount"],s);const o=k(t,["toolUsePromptTokenCount"]);o!=null&&D(n,["toolUsePromptTokenCount"],o);const l=k(t,["thoughtsTokenCount"]);l!=null&&D(n,["thoughtsTokenCount"],l);const c=k(t,["totalTokenCount"]);c!=null&&D(n,["totalTokenCount"],c);const u=k(t,["promptTokensDetails"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(b=>Rj(e,b))),D(n,["promptTokensDetails"],x)}const f=k(t,["cacheTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(b=>Rj(e,b))),D(n,["cacheTokensDetails"],x)}const p=k(t,["candidatesTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>Rj(e,b))),D(n,["responseTokensDetails"],x)}const y=k(t,["toolUsePromptTokensDetails"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(b=>Rj(e,b))),D(n,["toolUsePromptTokensDetails"],x)}const v=k(t,["trafficType"]);return v!=null&&D(n,["trafficType"],v),n}function gce(e,t){const n={},r=k(t,["timeLeft"]);return r!=null&&D(n,["timeLeft"],r),n}function yce(e,t){const n={},r=k(t,["timeLeft"]);return r!=null&&D(n,["timeLeft"],r),n}function vce(e,t){const n={},r=k(t,["newHandle"]);r!=null&&D(n,["newHandle"],r);const a=k(t,["resumable"]);a!=null&&D(n,["resumable"],a);const s=k(t,["lastConsumedClientMessageIndex"]);return s!=null&&D(n,["lastConsumedClientMessageIndex"],s),n}function xce(e,t){const n={},r=k(t,["newHandle"]);r!=null&&D(n,["newHandle"],r);const a=k(t,["resumable"]);a!=null&&D(n,["resumable"],a);const s=k(t,["lastConsumedClientMessageIndex"]);return s!=null&&D(n,["lastConsumedClientMessageIndex"],s),n}function bce(e,t){const n={};k(t,["setupComplete"])!=null&&D(n,["setupComplete"],Jle());const a=k(t,["serverContent"]);a!=null&&D(n,["serverContent"],sce(e,a));const s=k(t,["toolCall"]);s!=null&&D(n,["toolCall"],uce(e,s));const o=k(t,["toolCallCancellation"]);o!=null&&D(n,["toolCallCancellation"],hce(e,o));const l=k(t,["usageMetadata"]);l!=null&&D(n,["usageMetadata"],pce(e,l));const c=k(t,["goAway"]);c!=null&&D(n,["goAway"],gce(e,c));const u=k(t,["sessionResumptionUpdate"]);return u!=null&&D(n,["sessionResumptionUpdate"],vce(e,u)),n}function jce(e,t){const n={};k(t,["setupComplete"])!=null&&D(n,["setupComplete"],Zle());const a=k(t,["serverContent"]);a!=null&&D(n,["serverContent"],oce(e,a));const s=k(t,["toolCall"]);s!=null&&D(n,["toolCall"],dce(e,s));const o=k(t,["toolCallCancellation"]);o!=null&&D(n,["toolCallCancellation"],fce(e,o));const l=k(t,["usageMetadata"]);l!=null&&D(n,["usageMetadata"],mce(e,l));const c=k(t,["goAway"]);c!=null&&D(n,["goAway"],yce(e,c));const u=k(t,["sessionResumptionUpdate"]);return u!=null&&D(n,["sessionResumptionUpdate"],xce(e,u)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wce(e,t){const n={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=k(t,["data"]);r!=null&&D(n,["data"],r);const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function Sce(e,t){const n={};if(k(t,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=k(t,["thought"]);r!=null&&D(n,["thought"],r);const a=k(t,["inlineData"]);a!=null&&D(n,["inlineData"],wce(e,a));const s=k(t,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=k(t,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=k(t,["fileData"]);l!=null&&D(n,["fileData"],l);const c=k(t,["functionCall"]);c!=null&&D(n,["functionCall"],c);const u=k(t,["functionResponse"]);u!=null&&D(n,["functionResponse"],u);const f=k(t,["text"]);return f!=null&&D(n,["text"],f),n}function pN(e,t){const n={},r=k(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Sce(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function Nce(e,t){const n={};if(k(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=k(t,["category"]);r!=null&&D(n,["category"],r);const a=k(t,["threshold"]);return a!=null&&D(n,["threshold"],a),n}function _ce(){return{}}function Cce(e,t){const n={},r=k(t,["mode"]);r!=null&&D(n,["mode"],r);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function Tce(e,t){const n={},r=k(t,["dynamicRetrievalConfig"]);return r!=null&&D(n,["dynamicRetrievalConfig"],Cce(e,r)),n}function Ece(e,t){const n={};if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");k(t,["googleSearch"])!=null&&D(n,["googleSearch"],_ce());const a=k(t,["googleSearchRetrieval"]);if(a!=null&&D(n,["googleSearchRetrieval"],Tce(e,a)),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(k(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const s=k(t,["codeExecution"]);s!=null&&D(n,["codeExecution"],s);const o=k(t,["functionDeclarations"]);return o!=null&&D(n,["functionDeclarations"],o),n}function Ace(e,t){const n={},r=k(t,["mode"]);r!=null&&D(n,["mode"],r);const a=k(t,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function kce(e,t){const n={},r=k(t,["functionCallingConfig"]);if(r!=null&&D(n,["functionCallingConfig"],Ace(e,r)),k(t,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return n}function Pce(e,t){const n={},r=k(t,["voiceName"]);return r!=null&&D(n,["voiceName"],r),n}function Oce(e,t){const n={},r=k(t,["prebuiltVoiceConfig"]);return r!=null&&D(n,["prebuiltVoiceConfig"],Pce(e,r)),n}function Dce(e,t){const n={},r=k(t,["voiceConfig"]);r!=null&&D(n,["voiceConfig"],Oce(e,r));const a=k(t,["languageCode"]);return a!=null&&D(n,["languageCode"],a),n}function Mce(e,t){const n={},r=k(t,["includeThoughts"]);r!=null&&D(n,["includeThoughts"],r);const a=k(t,["thinkingBudget"]);return a!=null&&D(n,["thinkingBudget"],a),n}function Ice(e,t,n){const r={},a=k(t,["systemInstruction"]);n!==void 0&&a!=null&&D(n,["systemInstruction"],pN(e,Xa(e,a)));const s=k(t,["temperature"]);s!=null&&D(r,["temperature"],s);const o=k(t,["topP"]);o!=null&&D(r,["topP"],o);const l=k(t,["topK"]);l!=null&&D(r,["topK"],l);const c=k(t,["candidateCount"]);c!=null&&D(r,["candidateCount"],c);const u=k(t,["maxOutputTokens"]);u!=null&&D(r,["maxOutputTokens"],u);const f=k(t,["stopSequences"]);f!=null&&D(r,["stopSequences"],f);const p=k(t,["responseLogprobs"]);p!=null&&D(r,["responseLogprobs"],p);const y=k(t,["logprobs"]);y!=null&&D(r,["logprobs"],y);const v=k(t,["presencePenalty"]);v!=null&&D(r,["presencePenalty"],v);const x=k(t,["frequencyPenalty"]);x!=null&&D(r,["frequencyPenalty"],x);const b=k(t,["seed"]);b!=null&&D(r,["seed"],b);const w=k(t,["responseMimeType"]);w!=null&&D(r,["responseMimeType"],w);const _=k(t,["responseSchema"]);if(_!=null&&D(r,["responseSchema"],t9(e,_)),k(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(k(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=k(t,["safetySettings"]);if(n!==void 0&&T!=null){let z=T;Array.isArray(z)&&(z=z.map(L=>Nce(e,L))),D(n,["safetySettings"],z)}const C=k(t,["tools"]);if(n!==void 0&&C!=null){let z=hN(e,C);Array.isArray(z)&&(z=z.map(L=>Ece(e,dN(e,L)))),D(n,["tools"],z)}const O=k(t,["toolConfig"]);if(n!==void 0&&O!=null&&D(n,["toolConfig"],kce(e,O)),k(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=k(t,["cachedContent"]);n!==void 0&&E!=null&&D(n,["cachedContent"],vd(e,E));const P=k(t,["responseModalities"]);P!=null&&D(r,["responseModalities"],P);const I=k(t,["mediaResolution"]);I!=null&&D(r,["mediaResolution"],I);const F=k(t,["speechConfig"]);if(F!=null&&D(r,["speechConfig"],Dce(e,n9(e,F))),k(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=k(t,["thinkingConfig"]);return $!=null&&D(r,["thinkingConfig"],Mce(e,$)),r}function Z4(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["contents"]);if(a!=null){let o=yd(e,a);Array.isArray(o)&&(o=o.map(l=>pN(e,l))),D(n,["contents"],o)}const s=k(t,["config"]);return s!=null&&D(n,["generationConfig"],Ice(e,s,n)),n}function Rce(e,t,n){const r={},a=k(t,["taskType"]);n!==void 0&&a!=null&&D(n,["requests[]","taskType"],a);const s=k(t,["title"]);n!==void 0&&s!=null&&D(n,["requests[]","title"],s);const o=k(t,["outputDimensionality"]);if(n!==void 0&&o!=null&&D(n,["requests[]","outputDimensionality"],o),k(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(k(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Lce(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["contents"]);a!=null&&D(n,["requests[]","content"],e9(e,a));const s=k(t,["config"]);s!=null&&D(n,["config"],Rce(e,s,n));const o=k(t,["model"]);return o!==void 0&&D(n,["requests[]","model"],Fr(e,o)),n}function Fce(e,t,n){const r={};if(k(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(k(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=k(t,["numberOfImages"]);n!==void 0&&a!=null&&D(n,["parameters","sampleCount"],a);const s=k(t,["aspectRatio"]);n!==void 0&&s!=null&&D(n,["parameters","aspectRatio"],s);const o=k(t,["guidanceScale"]);if(n!==void 0&&o!=null&&D(n,["parameters","guidanceScale"],o),k(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=k(t,["safetyFilterLevel"]);n!==void 0&&l!=null&&D(n,["parameters","safetySetting"],l);const c=k(t,["personGeneration"]);n!==void 0&&c!=null&&D(n,["parameters","personGeneration"],c);const u=k(t,["includeSafetyAttributes"]);n!==void 0&&u!=null&&D(n,["parameters","includeSafetyAttributes"],u);const f=k(t,["includeRaiReason"]);n!==void 0&&f!=null&&D(n,["parameters","includeRaiReason"],f);const p=k(t,["language"]);n!==void 0&&p!=null&&D(n,["parameters","language"],p);const y=k(t,["outputMimeType"]);n!==void 0&&y!=null&&D(n,["parameters","outputOptions","mimeType"],y);const v=k(t,["outputCompressionQuality"]);if(n!==void 0&&v!=null&&D(n,["parameters","outputOptions","compressionQuality"],v),k(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(k(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function $ce(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=k(t,["config"]);return s!=null&&D(n,["config"],Fce(e,s,n)),n}function Bce(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","name"],Fr(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function zce(e,t,n){const r={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=k(t,["filter"]);n!==void 0&&o!=null&&D(n,["_query","filter"],o);const l=k(t,["queryBase"]);return n!==void 0&&l!=null&&D(n,["_url","models_url"],a9(e,l)),r}function qce(e,t){const n={},r=k(t,["config"]);return r!=null&&D(n,["config"],zce(e,r,n)),n}function Uce(e,t,n){const r={},a=k(t,["displayName"]);n!==void 0&&a!=null&&D(n,["displayName"],a);const s=k(t,["description"]);n!==void 0&&s!=null&&D(n,["description"],s);const o=k(t,["defaultCheckpointId"]);return n!==void 0&&o!=null&&D(n,["defaultCheckpointId"],o),r}function Vce(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","name"],Fr(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],Uce(e,a,n)),n}function Hce(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","name"],Fr(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Gce(e,t){const n={};if(k(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(k(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(k(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Wce(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["contents"]);if(a!=null){let o=yd(e,a);Array.isArray(o)&&(o=o.map(l=>pN(e,l))),D(n,["contents"],o)}const s=k(t,["config"]);return s!=null&&D(n,["config"],Gce(e,s)),n}function Kce(e,t){const n={};if(k(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=k(t,["imageBytes"]);r!=null&&D(n,["bytesBase64Encoded"],xd(e,r));const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function Yce(e,t,n){const r={},a=k(t,["numberOfVideos"]);if(n!==void 0&&a!=null&&D(n,["parameters","sampleCount"],a),k(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(k(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=k(t,["durationSeconds"]);if(n!==void 0&&s!=null&&D(n,["parameters","durationSeconds"],s),k(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=k(t,["aspectRatio"]);if(n!==void 0&&o!=null&&D(n,["parameters","aspectRatio"],o),k(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=k(t,["personGeneration"]);if(n!==void 0&&l!=null&&D(n,["parameters","personGeneration"],l),k(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=k(t,["negativePrompt"]);if(n!==void 0&&c!=null&&D(n,["parameters","negativePrompt"],c),k(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function Qce(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=k(t,["image"]);s!=null&&D(n,["instances[0]","image"],Kce(e,s));const o=k(t,["config"]);return o!=null&&D(n,["config"],Yce(e,o,n)),n}function Xce(e,t){const n={},r=k(t,["displayName"]);r!=null&&D(n,["displayName"],r);const a=k(t,["data"]);a!=null&&D(n,["data"],a);const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Jce(e,t){const n={},r=k(t,["videoMetadata"]);r!=null&&D(n,["videoMetadata"],r);const a=k(t,["thought"]);a!=null&&D(n,["thought"],a);const s=k(t,["inlineData"]);s!=null&&D(n,["inlineData"],Xce(e,s));const o=k(t,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=k(t,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=k(t,["fileData"]);c!=null&&D(n,["fileData"],c);const u=k(t,["functionCall"]);u!=null&&D(n,["functionCall"],u);const f=k(t,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=k(t,["text"]);return p!=null&&D(n,["text"],p),n}function Ug(e,t){const n={},r=k(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Jce(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function Zce(e,t){const n={},r=k(t,["featureSelectionPreference"]);return r!=null&&D(n,["featureSelectionPreference"],r),n}function eue(e,t){const n={},r=k(t,["method"]);r!=null&&D(n,["method"],r);const a=k(t,["category"]);a!=null&&D(n,["category"],a);const s=k(t,["threshold"]);return s!=null&&D(n,["threshold"],s),n}function tue(){return{}}function nue(e,t){const n={},r=k(t,["mode"]);r!=null&&D(n,["mode"],r);const a=k(t,["dynamicThreshold"]);return a!=null&&D(n,["dynamicThreshold"],a),n}function rue(e,t){const n={},r=k(t,["dynamicRetrievalConfig"]);return r!=null&&D(n,["dynamicRetrievalConfig"],nue(e,r)),n}function iue(){return{}}function aue(e,t){const n={},r=k(t,["apiKeyString"]);return r!=null&&D(n,["apiKeyString"],r),n}function sue(e,t){const n={},r=k(t,["apiKeyConfig"]);r!=null&&D(n,["apiKeyConfig"],aue(e,r));const a=k(t,["authType"]);a!=null&&D(n,["authType"],a);const s=k(t,["googleServiceAccountConfig"]);s!=null&&D(n,["googleServiceAccountConfig"],s);const o=k(t,["httpBasicAuthConfig"]);o!=null&&D(n,["httpBasicAuthConfig"],o);const l=k(t,["oauthConfig"]);l!=null&&D(n,["oauthConfig"],l);const c=k(t,["oidcConfig"]);return c!=null&&D(n,["oidcConfig"],c),n}function oue(e,t){const n={},r=k(t,["authConfig"]);return r!=null&&D(n,["authConfig"],sue(e,r)),n}function l9(e,t){const n={},r=k(t,["retrieval"]);r!=null&&D(n,["retrieval"],r),k(t,["googleSearch"])!=null&&D(n,["googleSearch"],tue());const s=k(t,["googleSearchRetrieval"]);s!=null&&D(n,["googleSearchRetrieval"],rue(e,s)),k(t,["enterpriseWebSearch"])!=null&&D(n,["enterpriseWebSearch"],iue());const l=k(t,["googleMaps"]);l!=null&&D(n,["googleMaps"],oue(e,l));const c=k(t,["codeExecution"]);c!=null&&D(n,["codeExecution"],c);const u=k(t,["functionDeclarations"]);return u!=null&&D(n,["functionDeclarations"],u),n}function lue(e,t){const n={},r=k(t,["mode"]);r!=null&&D(n,["mode"],r);const a=k(t,["allowedFunctionNames"]);return a!=null&&D(n,["allowedFunctionNames"],a),n}function cue(e,t){const n={},r=k(t,["latitude"]);r!=null&&D(n,["latitude"],r);const a=k(t,["longitude"]);return a!=null&&D(n,["longitude"],a),n}function uue(e,t){const n={},r=k(t,["latLng"]);return r!=null&&D(n,["latLng"],cue(e,r)),n}function due(e,t){const n={},r=k(t,["functionCallingConfig"]);r!=null&&D(n,["functionCallingConfig"],lue(e,r));const a=k(t,["retrievalConfig"]);return a!=null&&D(n,["retrievalConfig"],uue(e,a)),n}function hue(e,t){const n={},r=k(t,["voiceName"]);return r!=null&&D(n,["voiceName"],r),n}function fue(e,t){const n={},r=k(t,["prebuiltVoiceConfig"]);return r!=null&&D(n,["prebuiltVoiceConfig"],hue(e,r)),n}function pue(e,t){const n={},r=k(t,["voiceConfig"]);r!=null&&D(n,["voiceConfig"],fue(e,r));const a=k(t,["languageCode"]);return a!=null&&D(n,["languageCode"],a),n}function mue(e,t){const n={},r=k(t,["includeThoughts"]);r!=null&&D(n,["includeThoughts"],r);const a=k(t,["thinkingBudget"]);return a!=null&&D(n,["thinkingBudget"],a),n}function gue(e,t,n){const r={},a=k(t,["systemInstruction"]);n!==void 0&&a!=null&&D(n,["systemInstruction"],Ug(e,Xa(e,a)));const s=k(t,["temperature"]);s!=null&&D(r,["temperature"],s);const o=k(t,["topP"]);o!=null&&D(r,["topP"],o);const l=k(t,["topK"]);l!=null&&D(r,["topK"],l);const c=k(t,["candidateCount"]);c!=null&&D(r,["candidateCount"],c);const u=k(t,["maxOutputTokens"]);u!=null&&D(r,["maxOutputTokens"],u);const f=k(t,["stopSequences"]);f!=null&&D(r,["stopSequences"],f);const p=k(t,["responseLogprobs"]);p!=null&&D(r,["responseLogprobs"],p);const y=k(t,["logprobs"]);y!=null&&D(r,["logprobs"],y);const v=k(t,["presencePenalty"]);v!=null&&D(r,["presencePenalty"],v);const x=k(t,["frequencyPenalty"]);x!=null&&D(r,["frequencyPenalty"],x);const b=k(t,["seed"]);b!=null&&D(r,["seed"],b);const w=k(t,["responseMimeType"]);w!=null&&D(r,["responseMimeType"],w);const _=k(t,["responseSchema"]);_!=null&&D(r,["responseSchema"],t9(e,_));const T=k(t,["routingConfig"]);T!=null&&D(r,["routingConfig"],T);const C=k(t,["modelSelectionConfig"]);C!=null&&D(r,["modelConfig"],Zce(e,C));const O=k(t,["safetySettings"]);if(n!==void 0&&O!=null){let ne=O;Array.isArray(ne)&&(ne=ne.map(Z=>eue(e,Z))),D(n,["safetySettings"],ne)}const E=k(t,["tools"]);if(n!==void 0&&E!=null){let ne=hN(e,E);Array.isArray(ne)&&(ne=ne.map(Z=>l9(e,dN(e,Z)))),D(n,["tools"],ne)}const P=k(t,["toolConfig"]);n!==void 0&&P!=null&&D(n,["toolConfig"],due(e,P));const I=k(t,["labels"]);n!==void 0&&I!=null&&D(n,["labels"],I);const F=k(t,["cachedContent"]);n!==void 0&&F!=null&&D(n,["cachedContent"],vd(e,F));const $=k(t,["responseModalities"]);$!=null&&D(r,["responseModalities"],$);const z=k(t,["mediaResolution"]);z!=null&&D(r,["mediaResolution"],z);const L=k(t,["speechConfig"]);L!=null&&D(r,["speechConfig"],pue(e,n9(e,L)));const H=k(t,["audioTimestamp"]);H!=null&&D(r,["audioTimestamp"],H);const V=k(t,["thinkingConfig"]);return V!=null&&D(r,["thinkingConfig"],mue(e,V)),r}function e3(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["contents"]);if(a!=null){let o=yd(e,a);Array.isArray(o)&&(o=o.map(l=>Ug(e,l))),D(n,["contents"],o)}const s=k(t,["config"]);return s!=null&&D(n,["generationConfig"],gue(e,s,n)),n}function yue(e,t,n){const r={},a=k(t,["taskType"]);n!==void 0&&a!=null&&D(n,["instances[]","task_type"],a);const s=k(t,["title"]);n!==void 0&&s!=null&&D(n,["instances[]","title"],s);const o=k(t,["outputDimensionality"]);n!==void 0&&o!=null&&D(n,["parameters","outputDimensionality"],o);const l=k(t,["mimeType"]);n!==void 0&&l!=null&&D(n,["instances[]","mimeType"],l);const c=k(t,["autoTruncate"]);return n!==void 0&&c!=null&&D(n,["parameters","autoTruncate"],c),r}function vue(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["contents"]);a!=null&&D(n,["instances[]","content"],e9(e,a));const s=k(t,["config"]);return s!=null&&D(n,["config"],yue(e,s,n)),n}function xue(e,t,n){const r={},a=k(t,["outputGcsUri"]);n!==void 0&&a!=null&&D(n,["parameters","storageUri"],a);const s=k(t,["negativePrompt"]);n!==void 0&&s!=null&&D(n,["parameters","negativePrompt"],s);const o=k(t,["numberOfImages"]);n!==void 0&&o!=null&&D(n,["parameters","sampleCount"],o);const l=k(t,["aspectRatio"]);n!==void 0&&l!=null&&D(n,["parameters","aspectRatio"],l);const c=k(t,["guidanceScale"]);n!==void 0&&c!=null&&D(n,["parameters","guidanceScale"],c);const u=k(t,["seed"]);n!==void 0&&u!=null&&D(n,["parameters","seed"],u);const f=k(t,["safetyFilterLevel"]);n!==void 0&&f!=null&&D(n,["parameters","safetySetting"],f);const p=k(t,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const y=k(t,["includeSafetyAttributes"]);n!==void 0&&y!=null&&D(n,["parameters","includeSafetyAttributes"],y);const v=k(t,["includeRaiReason"]);n!==void 0&&v!=null&&D(n,["parameters","includeRaiReason"],v);const x=k(t,["language"]);n!==void 0&&x!=null&&D(n,["parameters","language"],x);const b=k(t,["outputMimeType"]);n!==void 0&&b!=null&&D(n,["parameters","outputOptions","mimeType"],b);const w=k(t,["outputCompressionQuality"]);n!==void 0&&w!=null&&D(n,["parameters","outputOptions","compressionQuality"],w);const _=k(t,["addWatermark"]);n!==void 0&&_!=null&&D(n,["parameters","addWatermark"],_);const T=k(t,["enhancePrompt"]);return n!==void 0&&T!=null&&D(n,["parameters","enhancePrompt"],T),r}function bue(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=k(t,["config"]);return s!=null&&D(n,["config"],xue(e,s,n)),n}function UD(e,t){const n={},r=k(t,["gcsUri"]);r!=null&&D(n,["gcsUri"],r);const a=k(t,["imageBytes"]);a!=null&&D(n,["bytesBase64Encoded"],xd(e,a));const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function jue(e,t){const n={},r=k(t,["maskMode"]);r!=null&&D(n,["maskMode"],r);const a=k(t,["segmentationClasses"]);a!=null&&D(n,["maskClasses"],a);const s=k(t,["maskDilation"]);return s!=null&&D(n,["dilation"],s),n}function wue(e,t){const n={},r=k(t,["controlType"]);r!=null&&D(n,["controlType"],r);const a=k(t,["enableControlImageComputation"]);return a!=null&&D(n,["computeControl"],a),n}function Sue(e,t){const n={},r=k(t,["styleDescription"]);return r!=null&&D(n,["styleDescription"],r),n}function Nue(e,t){const n={},r=k(t,["subjectType"]);r!=null&&D(n,["subjectType"],r);const a=k(t,["subjectDescription"]);return a!=null&&D(n,["subjectDescription"],a),n}function _ue(e,t){const n={},r=k(t,["referenceImage"]);r!=null&&D(n,["referenceImage"],UD(e,r));const a=k(t,["referenceId"]);a!=null&&D(n,["referenceId"],a);const s=k(t,["referenceType"]);s!=null&&D(n,["referenceType"],s);const o=k(t,["maskImageConfig"]);o!=null&&D(n,["maskImageConfig"],jue(e,o));const l=k(t,["controlImageConfig"]);l!=null&&D(n,["controlImageConfig"],wue(e,l));const c=k(t,["styleImageConfig"]);c!=null&&D(n,["styleImageConfig"],Sue(e,c));const u=k(t,["subjectImageConfig"]);return u!=null&&D(n,["subjectImageConfig"],Nue(e,u)),n}function Cue(e,t,n){const r={},a=k(t,["outputGcsUri"]);n!==void 0&&a!=null&&D(n,["parameters","storageUri"],a);const s=k(t,["negativePrompt"]);n!==void 0&&s!=null&&D(n,["parameters","negativePrompt"],s);const o=k(t,["numberOfImages"]);n!==void 0&&o!=null&&D(n,["parameters","sampleCount"],o);const l=k(t,["aspectRatio"]);n!==void 0&&l!=null&&D(n,["parameters","aspectRatio"],l);const c=k(t,["guidanceScale"]);n!==void 0&&c!=null&&D(n,["parameters","guidanceScale"],c);const u=k(t,["seed"]);n!==void 0&&u!=null&&D(n,["parameters","seed"],u);const f=k(t,["safetyFilterLevel"]);n!==void 0&&f!=null&&D(n,["parameters","safetySetting"],f);const p=k(t,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const y=k(t,["includeSafetyAttributes"]);n!==void 0&&y!=null&&D(n,["parameters","includeSafetyAttributes"],y);const v=k(t,["includeRaiReason"]);n!==void 0&&v!=null&&D(n,["parameters","includeRaiReason"],v);const x=k(t,["language"]);n!==void 0&&x!=null&&D(n,["parameters","language"],x);const b=k(t,["outputMimeType"]);n!==void 0&&b!=null&&D(n,["parameters","outputOptions","mimeType"],b);const w=k(t,["outputCompressionQuality"]);n!==void 0&&w!=null&&D(n,["parameters","outputOptions","compressionQuality"],w);const _=k(t,["editMode"]);n!==void 0&&_!=null&&D(n,["parameters","editMode"],_);const T=k(t,["baseSteps"]);return n!==void 0&&T!=null&&D(n,["parameters","editConfig","baseSteps"],T),r}function Tue(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=k(t,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>_ue(e,c))),D(n,["instances[0]","referenceImages"],l)}const o=k(t,["config"]);return o!=null&&D(n,["config"],Cue(e,o,n)),n}function Eue(e,t,n){const r={},a=k(t,["includeRaiReason"]);n!==void 0&&a!=null&&D(n,["parameters","includeRaiReason"],a);const s=k(t,["outputMimeType"]);n!==void 0&&s!=null&&D(n,["parameters","outputOptions","mimeType"],s);const o=k(t,["outputCompressionQuality"]);n!==void 0&&o!=null&&D(n,["parameters","outputOptions","compressionQuality"],o);const l=k(t,["numberOfImages"]);n!==void 0&&l!=null&&D(n,["parameters","sampleCount"],l);const c=k(t,["mode"]);return n!==void 0&&c!=null&&D(n,["parameters","mode"],c),r}function Aue(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["image"]);a!=null&&D(n,["instances[0]","image"],UD(e,a));const s=k(t,["upscaleFactor"]);s!=null&&D(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=k(t,["config"]);return o!=null&&D(n,["config"],Eue(e,o,n)),n}function kue(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","name"],Fr(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Pue(e,t,n){const r={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=k(t,["filter"]);n!==void 0&&o!=null&&D(n,["_query","filter"],o);const l=k(t,["queryBase"]);return n!==void 0&&l!=null&&D(n,["_url","models_url"],a9(e,l)),r}function Oue(e,t){const n={},r=k(t,["config"]);return r!=null&&D(n,["config"],Pue(e,r,n)),n}function Due(e,t,n){const r={},a=k(t,["displayName"]);n!==void 0&&a!=null&&D(n,["displayName"],a);const s=k(t,["description"]);n!==void 0&&s!=null&&D(n,["description"],s);const o=k(t,["defaultCheckpointId"]);return n!==void 0&&o!=null&&D(n,["defaultCheckpointId"],o),r}function Mue(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],Due(e,a,n)),n}function Iue(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","name"],Fr(e,r));const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Rue(e,t,n){const r={},a=k(t,["systemInstruction"]);n!==void 0&&a!=null&&D(n,["systemInstruction"],Ug(e,Xa(e,a)));const s=k(t,["tools"]);if(n!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>l9(e,c))),D(n,["tools"],l)}const o=k(t,["generationConfig"]);return n!==void 0&&o!=null&&D(n,["generationConfig"],o),r}function Lue(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["contents"]);if(a!=null){let o=yd(e,a);Array.isArray(o)&&(o=o.map(l=>Ug(e,l))),D(n,["contents"],o)}const s=k(t,["config"]);return s!=null&&D(n,["config"],Rue(e,s,n)),n}function Fue(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["contents"]);if(a!=null){let o=yd(e,a);Array.isArray(o)&&(o=o.map(l=>Ug(e,l))),D(n,["contents"],o)}const s=k(t,["config"]);return s!=null&&D(n,["config"],s),n}function $ue(e,t,n){const r={},a=k(t,["numberOfVideos"]);n!==void 0&&a!=null&&D(n,["parameters","sampleCount"],a);const s=k(t,["outputGcsUri"]);n!==void 0&&s!=null&&D(n,["parameters","storageUri"],s);const o=k(t,["fps"]);n!==void 0&&o!=null&&D(n,["parameters","fps"],o);const l=k(t,["durationSeconds"]);n!==void 0&&l!=null&&D(n,["parameters","durationSeconds"],l);const c=k(t,["seed"]);n!==void 0&&c!=null&&D(n,["parameters","seed"],c);const u=k(t,["aspectRatio"]);n!==void 0&&u!=null&&D(n,["parameters","aspectRatio"],u);const f=k(t,["resolution"]);n!==void 0&&f!=null&&D(n,["parameters","resolution"],f);const p=k(t,["personGeneration"]);n!==void 0&&p!=null&&D(n,["parameters","personGeneration"],p);const y=k(t,["pubsubTopic"]);n!==void 0&&y!=null&&D(n,["parameters","pubsubTopic"],y);const v=k(t,["negativePrompt"]);n!==void 0&&v!=null&&D(n,["parameters","negativePrompt"],v);const x=k(t,["enhancePrompt"]);return n!==void 0&&x!=null&&D(n,["parameters","enhancePrompt"],x),r}function Bue(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["_url","model"],Fr(e,r));const a=k(t,["prompt"]);a!=null&&D(n,["instances[0]","prompt"],a);const s=k(t,["image"]);s!=null&&D(n,["instances[0]","image"],UD(e,s));const o=k(t,["config"]);return o!=null&&D(n,["config"],$ue(e,o,n)),n}function zue(e,t){const n={},r=k(t,["data"]);r!=null&&D(n,["data"],r);const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function que(e,t){const n={},r=k(t,["thought"]);r!=null&&D(n,["thought"],r);const a=k(t,["inlineData"]);a!=null&&D(n,["inlineData"],zue(e,a));const s=k(t,["codeExecutionResult"]);s!=null&&D(n,["codeExecutionResult"],s);const o=k(t,["executableCode"]);o!=null&&D(n,["executableCode"],o);const l=k(t,["fileData"]);l!=null&&D(n,["fileData"],l);const c=k(t,["functionCall"]);c!=null&&D(n,["functionCall"],c);const u=k(t,["functionResponse"]);u!=null&&D(n,["functionResponse"],u);const f=k(t,["text"]);return f!=null&&D(n,["text"],f),n}function Uue(e,t){const n={},r=k(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>que(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function Vue(e,t){const n={},r=k(t,["citationSources"]);return r!=null&&D(n,["citations"],r),n}function Hue(e,t){const n={},r=k(t,["content"]);r!=null&&D(n,["content"],Uue(e,r));const a=k(t,["citationMetadata"]);a!=null&&D(n,["citationMetadata"],Vue(e,a));const s=k(t,["tokenCount"]);s!=null&&D(n,["tokenCount"],s);const o=k(t,["finishReason"]);o!=null&&D(n,["finishReason"],o);const l=k(t,["avgLogprobs"]);l!=null&&D(n,["avgLogprobs"],l);const c=k(t,["groundingMetadata"]);c!=null&&D(n,["groundingMetadata"],c);const u=k(t,["index"]);u!=null&&D(n,["index"],u);const f=k(t,["logprobsResult"]);f!=null&&D(n,["logprobsResult"],f);const p=k(t,["safetyRatings"]);return p!=null&&D(n,["safetyRatings"],p),n}function t3(e,t){const n={},r=k(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Hue(e,c))),D(n,["candidates"],l)}const a=k(t,["modelVersion"]);a!=null&&D(n,["modelVersion"],a);const s=k(t,["promptFeedback"]);s!=null&&D(n,["promptFeedback"],s);const o=k(t,["usageMetadata"]);return o!=null&&D(n,["usageMetadata"],o),n}function Gue(e,t){const n={},r=k(t,["values"]);return r!=null&&D(n,["values"],r),n}function Wue(){return{}}function Kue(e,t){const n={},r=k(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Gue(e,o))),D(n,["embeddings"],s)}return k(t,["metadata"])!=null&&D(n,["metadata"],Wue()),n}function Yue(e,t){const n={},r=k(t,["bytesBase64Encoded"]);r!=null&&D(n,["imageBytes"],xd(e,r));const a=k(t,["mimeType"]);return a!=null&&D(n,["mimeType"],a),n}function c9(e,t){const n={},r=k(t,["safetyAttributes","categories"]);r!=null&&D(n,["categories"],r);const a=k(t,["safetyAttributes","scores"]);a!=null&&D(n,["scores"],a);const s=k(t,["contentType"]);return s!=null&&D(n,["contentType"],s),n}function Que(e,t){const n={},r=k(t,["_self"]);r!=null&&D(n,["image"],Yue(e,r));const a=k(t,["raiFilteredReason"]);a!=null&&D(n,["raiFilteredReason"],a);const s=k(t,["_self"]);return s!=null&&D(n,["safetyAttributes"],c9(e,s)),n}function Xue(e,t){const n={},r=k(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Que(e,o))),D(n,["generatedImages"],s)}const a=k(t,["positivePromptSafetyAttributes"]);return a!=null&&D(n,["positivePromptSafetyAttributes"],c9(e,a)),n}function Jue(e,t){const n={},r=k(t,["baseModel"]);r!=null&&D(n,["baseModel"],r);const a=k(t,["createTime"]);a!=null&&D(n,["createTime"],a);const s=k(t,["updateTime"]);return s!=null&&D(n,["updateTime"],s),n}function hP(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["description"]);s!=null&&D(n,["description"],s);const o=k(t,["version"]);o!=null&&D(n,["version"],o);const l=k(t,["_self"]);l!=null&&D(n,["tunedModelInfo"],Jue(e,l));const c=k(t,["inputTokenLimit"]);c!=null&&D(n,["inputTokenLimit"],c);const u=k(t,["outputTokenLimit"]);u!=null&&D(n,["outputTokenLimit"],u);const f=k(t,["supportedGenerationMethods"]);return f!=null&&D(n,["supportedActions"],f),n}function Zue(e,t){const n={},r=k(t,["nextPageToken"]);r!=null&&D(n,["nextPageToken"],r);const a=k(t,["_self"]);if(a!=null){let s=s9(e,a);Array.isArray(s)&&(s=s.map(o=>hP(e,o))),D(n,["models"],s)}return n}function ede(){return{}}function tde(e,t){const n={},r=k(t,["totalTokens"]);r!=null&&D(n,["totalTokens"],r);const a=k(t,["cachedContentTokenCount"]);return a!=null&&D(n,["cachedContentTokenCount"],a),n}function nde(e,t){const n={},r=k(t,["video","uri"]);r!=null&&D(n,["uri"],r);const a=k(t,["video","encodedVideo"]);a!=null&&D(n,["videoBytes"],xd(e,a));const s=k(t,["encoding"]);return s!=null&&D(n,["mimeType"],s),n}function rde(e,t){const n={},r=k(t,["_self"]);return r!=null&&D(n,["video"],nde(e,r)),n}function ide(e,t){const n={},r=k(t,["generatedSamples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>rde(e,l))),D(n,["generatedVideos"],o)}const a=k(t,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=k(t,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function ade(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["metadata"]);a!=null&&D(n,["metadata"],a);const s=k(t,["done"]);s!=null&&D(n,["done"],s);const o=k(t,["error"]);o!=null&&D(n,["error"],o);const l=k(t,["response","generateVideoResponse"]);return l!=null&&D(n,["response"],ide(e,l)),n}function sde(e,t){const n={},r=k(t,["displayName"]);r!=null&&D(n,["displayName"],r);const a=k(t,["data"]);a!=null&&D(n,["data"],a);const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function ode(e,t){const n={},r=k(t,["videoMetadata"]);r!=null&&D(n,["videoMetadata"],r);const a=k(t,["thought"]);a!=null&&D(n,["thought"],a);const s=k(t,["inlineData"]);s!=null&&D(n,["inlineData"],sde(e,s));const o=k(t,["codeExecutionResult"]);o!=null&&D(n,["codeExecutionResult"],o);const l=k(t,["executableCode"]);l!=null&&D(n,["executableCode"],l);const c=k(t,["fileData"]);c!=null&&D(n,["fileData"],c);const u=k(t,["functionCall"]);u!=null&&D(n,["functionCall"],u);const f=k(t,["functionResponse"]);f!=null&&D(n,["functionResponse"],f);const p=k(t,["text"]);return p!=null&&D(n,["text"],p),n}function lde(e,t){const n={},r=k(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>ode(e,o))),D(n,["parts"],s)}const a=k(t,["role"]);return a!=null&&D(n,["role"],a),n}function cde(e,t){const n={},r=k(t,["citations"]);return r!=null&&D(n,["citations"],r),n}function ude(e,t){const n={},r=k(t,["content"]);r!=null&&D(n,["content"],lde(e,r));const a=k(t,["citationMetadata"]);a!=null&&D(n,["citationMetadata"],cde(e,a));const s=k(t,["finishMessage"]);s!=null&&D(n,["finishMessage"],s);const o=k(t,["finishReason"]);o!=null&&D(n,["finishReason"],o);const l=k(t,["avgLogprobs"]);l!=null&&D(n,["avgLogprobs"],l);const c=k(t,["groundingMetadata"]);c!=null&&D(n,["groundingMetadata"],c);const u=k(t,["index"]);u!=null&&D(n,["index"],u);const f=k(t,["logprobsResult"]);f!=null&&D(n,["logprobsResult"],f);const p=k(t,["safetyRatings"]);return p!=null&&D(n,["safetyRatings"],p),n}function n3(e,t){const n={},r=k(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>ude(e,f))),D(n,["candidates"],u)}const a=k(t,["createTime"]);a!=null&&D(n,["createTime"],a);const s=k(t,["responseId"]);s!=null&&D(n,["responseId"],s);const o=k(t,["modelVersion"]);o!=null&&D(n,["modelVersion"],o);const l=k(t,["promptFeedback"]);l!=null&&D(n,["promptFeedback"],l);const c=k(t,["usageMetadata"]);return c!=null&&D(n,["usageMetadata"],c),n}function dde(e,t){const n={},r=k(t,["truncated"]);r!=null&&D(n,["truncated"],r);const a=k(t,["token_count"]);return a!=null&&D(n,["tokenCount"],a),n}function hde(e,t){const n={},r=k(t,["values"]);r!=null&&D(n,["values"],r);const a=k(t,["statistics"]);return a!=null&&D(n,["statistics"],dde(e,a)),n}function fde(e,t){const n={},r=k(t,["billableCharacterCount"]);return r!=null&&D(n,["billableCharacterCount"],r),n}function pde(e,t){const n={},r=k(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>hde(e,o))),D(n,["embeddings"],s)}const a=k(t,["metadata"]);return a!=null&&D(n,["metadata"],fde(e,a)),n}function mde(e,t){const n={},r=k(t,["gcsUri"]);r!=null&&D(n,["gcsUri"],r);const a=k(t,["bytesBase64Encoded"]);a!=null&&D(n,["imageBytes"],xd(e,a));const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function u9(e,t){const n={},r=k(t,["safetyAttributes","categories"]);r!=null&&D(n,["categories"],r);const a=k(t,["safetyAttributes","scores"]);a!=null&&D(n,["scores"],a);const s=k(t,["contentType"]);return s!=null&&D(n,["contentType"],s),n}function VD(e,t){const n={},r=k(t,["_self"]);r!=null&&D(n,["image"],mde(e,r));const a=k(t,["raiFilteredReason"]);a!=null&&D(n,["raiFilteredReason"],a);const s=k(t,["_self"]);s!=null&&D(n,["safetyAttributes"],u9(e,s));const o=k(t,["prompt"]);return o!=null&&D(n,["enhancedPrompt"],o),n}function gde(e,t){const n={},r=k(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>VD(e,o))),D(n,["generatedImages"],s)}const a=k(t,["positivePromptSafetyAttributes"]);return a!=null&&D(n,["positivePromptSafetyAttributes"],u9(e,a)),n}function yde(e,t){const n={},r=k(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>VD(e,s))),D(n,["generatedImages"],a)}return n}function vde(e,t){const n={},r=k(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>VD(e,s))),D(n,["generatedImages"],a)}return n}function xde(e,t){const n={},r=k(t,["endpoint"]);r!=null&&D(n,["name"],r);const a=k(t,["deployedModelId"]);return a!=null&&D(n,["deployedModelId"],a),n}function bde(e,t){const n={},r=k(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&D(n,["baseModel"],r);const a=k(t,["createTime"]);a!=null&&D(n,["createTime"],a);const s=k(t,["updateTime"]);return s!=null&&D(n,["updateTime"],s),n}function jde(e,t){const n={},r=k(t,["checkpointId"]);r!=null&&D(n,["checkpointId"],r);const a=k(t,["epoch"]);a!=null&&D(n,["epoch"],a);const s=k(t,["step"]);return s!=null&&D(n,["step"],s),n}function fP(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["displayName"]);a!=null&&D(n,["displayName"],a);const s=k(t,["description"]);s!=null&&D(n,["description"],s);const o=k(t,["versionId"]);o!=null&&D(n,["version"],o);const l=k(t,["deployedModels"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(v=>xde(e,v))),D(n,["endpoints"],y)}const c=k(t,["labels"]);c!=null&&D(n,["labels"],c);const u=k(t,["_self"]);u!=null&&D(n,["tunedModelInfo"],bde(e,u));const f=k(t,["defaultCheckpointId"]);f!=null&&D(n,["defaultCheckpointId"],f);const p=k(t,["checkpoints"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(v=>jde(e,v))),D(n,["checkpoints"],y)}return n}function wde(e,t){const n={},r=k(t,["nextPageToken"]);r!=null&&D(n,["nextPageToken"],r);const a=k(t,["_self"]);if(a!=null){let s=s9(e,a);Array.isArray(s)&&(s=s.map(o=>fP(e,o))),D(n,["models"],s)}return n}function Sde(){return{}}function Nde(e,t){const n={},r=k(t,["totalTokens"]);return r!=null&&D(n,["totalTokens"],r),n}function _de(e,t){const n={},r=k(t,["tokensInfo"]);return r!=null&&D(n,["tokensInfo"],r),n}function Cde(e,t){const n={},r=k(t,["gcsUri"]);r!=null&&D(n,["uri"],r);const a=k(t,["bytesBase64Encoded"]);a!=null&&D(n,["videoBytes"],xd(e,a));const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Tde(e,t){const n={},r=k(t,["_self"]);return r!=null&&D(n,["video"],Cde(e,r)),n}function Ede(e,t){const n={},r=k(t,["videos"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Tde(e,l))),D(n,["generatedVideos"],o)}const a=k(t,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=k(t,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function Ade(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["metadata"]);a!=null&&D(n,["metadata"],a);const s=k(t,["done"]);s!=null&&D(n,["done"],s);const o=k(t,["error"]);o!=null&&D(n,["error"],o);const l=k(t,["response"]);return l!=null&&D(n,["response"],Ede(e,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kde="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Pde(e,t,n){const r=new Yoe;let a;if(n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),e.isVertexAI()){const s=jce(e,a);Object.assign(r,s)}else{const s=bce(e,a);Object.assign(r,s)}t(r)}class Ode{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r,a,s;const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const u=Rde(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(u);else{const O=this.apiClient.getApiKey();c=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${O}`}let f=()=>{};const p=new Promise(O=>{f=O}),y=t.callbacks,v=function(){var O;(O=y==null?void 0:y.onopen)===null||O===void 0||O.call(y),f({})},x=this.apiClient,b={onopen:v,onmessage:O=>{Pde(x,y.onmessage,O)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(O){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(O){}},w=this.webSocketFactory.create(c,Ide(u),b);w.connect(),await p;let _=Fr(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const O=this.apiClient.getProject(),E=this.apiClient.getLocation();_=`projects/${O}/locations/${E}/`+_}let T={};this.apiClient.isVertexAI()&&((a=t.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[hd.AUDIO]}:t.config.responseModalities=[hd.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C={model:_,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?T=Hle(this.apiClient,C):T=Vle(this.apiClient,C),delete T.config,w.send(JSON.stringify(T)),new Mde(w,this.apiClient)}}const Dde={turnComplete:!0};class Mde{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=yd(t,n.turns),t.isVertexAI()?r=r.map(a=>Ug(t,a)):r=r.map(a=>pN(t,a))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(kde)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},Dde),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Xle(this.apiClient,t)}:n={realtimeInput:Qle(this.apiClient,t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Ide(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function Rde(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lde extends Vb{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>await this.generateContentInternal(n),this.generateContentStream=async n=>await this.generateContentStreamInternal(n),this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var a;let s;const o=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((a=c==null?void 0:c.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let l;return s?l={generatedImages:o,positivePromptSafetyAttributes:s}:l={generatedImages:o},l}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new fN(lg.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(a)}}async generateContentInternal(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=e3(this.apiClient,t);return l=on("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=n3(this.apiClient,f),y=new Mj;return Object.assign(y,p),y})}else{const u=Z4(this.apiClient,t);return l=on("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=t3(this.apiClient,f),y=new Mj;return Object.assign(y,p),y})}}async generateContentStreamInternal(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=e3(this.apiClient,t);l=on("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(p){return Fw(this,arguments,function*(){var y,v,x,b;try{for(var w=!0,_=uP(p),T;T=yield ta(_.next()),y=T.done,!y;w=!0){b=T.value,w=!1;const O=n3(f,yield ta(b.json())),E=new Mj;Object.assign(E,O),yield yield ta(E)}}catch(C){v={error:C}}finally{try{!w&&!y&&(x=_.return)&&(yield ta(x.call(_)))}finally{if(v)throw v.error}}})})}else{const u=Z4(this.apiClient,t);l=on("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return Fw(this,arguments,function*(){var y,v,x,b;try{for(var w=!0,_=uP(p),T;T=yield ta(_.next()),y=T.done,!y;w=!0){b=T.value,w=!1;const O=t3(f,yield ta(b.json())),E=new Mj;Object.assign(E,O),yield yield ta(E)}}catch(C){v={error:C}}finally{try{!w&&!y&&(x=_.return)&&(yield ta(x.call(_)))}finally{if(v)throw v.error}}})})}}async embedContent(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=vue(this.apiClient,t);return l=on("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=pde(this.apiClient,f),y=new B4;return Object.assign(y,p),y})}else{const u=Lce(this.apiClient,t);return l=on("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Kue(this.apiClient,f),y=new B4;return Object.assign(y,p),y})}}async generateImagesInternal(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=bue(this.apiClient,t);return l=on("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=gde(this.apiClient,f),y=new z4;return Object.assign(y,p),y})}else{const u=$ce(this.apiClient,t);return l=on("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Xue(this.apiClient,f),y=new z4;return Object.assign(y,p),y})}}async editImageInternal(t){var n,r;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=Tue(this.apiClient,t);return s=on("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>{const u=yde(this.apiClient,c),f=new Uoe;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=Aue(this.apiClient,t);return s=on("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>{const u=vde(this.apiClient,c),f=new Voe;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=kue(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>fP(this.apiClient,f))}else{const u=Bce(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>hP(this.apiClient,f))}}async listInternal(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Oue(this.apiClient,t);return l=on("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=wde(this.apiClient,f),y=new q4;return Object.assign(y,p),y})}else{const u=qce(this.apiClient,t);return l=on("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Zue(this.apiClient,f),y=new q4;return Object.assign(y,p),y})}}async update(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Mue(this.apiClient,t);return l=on("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>fP(this.apiClient,f))}else{const u=Vce(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>hP(this.apiClient,f))}}async delete(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Iue(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(()=>{const f=Sde(),p=new U4;return Object.assign(p,f),p})}else{const u=Hce(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=ede(),p=new U4;return Object.assign(p,f),p})}}async countTokens(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Lue(this.apiClient,t);return l=on("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=Nde(this.apiClient,f),y=new V4;return Object.assign(y,p),y})}else{const u=Wce(this.apiClient,t);return l=on("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=tde(this.apiClient,f),y=new V4;return Object.assign(y,p),y})}}async computeTokens(t){var n,r;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=Fue(this.apiClient,t);return s=on("{model}:computeTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>{const u=_de(this.apiClient,c),f=new Hoe;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=Bue(this.apiClient,t);return l=on("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>Ade(this.apiClient,f))}else{const u=Qce(this.apiClient,t);return l=on("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>ade(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fde(e,t){const n={},r=k(t,["operationName"]);r!=null&&D(n,["_url","operationName"],r);const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function $de(e,t){const n={},r=k(t,["operationName"]);r!=null&&D(n,["_url","operationName"],r);const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function Bde(e,t){const n={},r=k(t,["operationName"]);r!=null&&D(n,["operationName"],r);const a=k(t,["resourceName"]);a!=null&&D(n,["_url","resourceName"],a);const s=k(t,["config"]);return s!=null&&D(n,["config"],s),n}function zde(e,t){const n={},r=k(t,["video","uri"]);r!=null&&D(n,["uri"],r);const a=k(t,["video","encodedVideo"]);a!=null&&D(n,["videoBytes"],xd(e,a));const s=k(t,["encoding"]);return s!=null&&D(n,["mimeType"],s),n}function qde(e,t){const n={},r=k(t,["_self"]);return r!=null&&D(n,["video"],zde(e,r)),n}function Ude(e,t){const n={},r=k(t,["generatedSamples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>qde(e,l))),D(n,["generatedVideos"],o)}const a=k(t,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=k(t,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function Vde(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["metadata"]);a!=null&&D(n,["metadata"],a);const s=k(t,["done"]);s!=null&&D(n,["done"],s);const o=k(t,["error"]);o!=null&&D(n,["error"],o);const l=k(t,["response","generateVideoResponse"]);return l!=null&&D(n,["response"],Ude(e,l)),n}function Hde(e,t){const n={},r=k(t,["gcsUri"]);r!=null&&D(n,["uri"],r);const a=k(t,["bytesBase64Encoded"]);a!=null&&D(n,["videoBytes"],xd(e,a));const s=k(t,["mimeType"]);return s!=null&&D(n,["mimeType"],s),n}function Gde(e,t){const n={},r=k(t,["_self"]);return r!=null&&D(n,["video"],Hde(e,r)),n}function Wde(e,t){const n={},r=k(t,["videos"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Gde(e,l))),D(n,["generatedVideos"],o)}const a=k(t,["raiMediaFilteredCount"]);a!=null&&D(n,["raiMediaFilteredCount"],a);const s=k(t,["raiMediaFilteredReasons"]);return s!=null&&D(n,["raiMediaFilteredReasons"],s),n}function r3(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["metadata"]);a!=null&&D(n,["metadata"],a);const s=k(t,["done"]);s!=null&&D(n,["done"],s);const o=k(t,["error"]);o!=null&&D(n,["error"],o);const l=k(t,["response"]);return l!=null&&D(n,["response"],Wde(e,l)),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kde extends Vb{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let s;return r&&"httpOptions"in r&&(s=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:r})}async getVideosOperationInternal(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=$de(this.apiClient,t);return l=on("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>r3(this.apiClient,f))}else{const u=Fde(this.apiClient,t);return l=on("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Vde(this.apiClient,f))}}async fetchPredictVideosOperationInternal(t){var n,r;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=Bde(this.apiClient,t);return s=on("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>r3(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yde="Content-Type",Qde="X-Server-Timeout",Xde="User-Agent",Jde="x-goog-api-client",Zde="0.14.1",ehe=`google-genai-sdk/${Zde}`,the="v1beta1",nhe="v1beta",i3=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class d9 extends Error{constructor(t,n){n?super(t,{cause:n}):super(t,{cause:new Error().stack}),this.message=t,this.name="ClientError"}}class pP extends Error{constructor(t,n){n?super(t,{cause:n}):super(t,{cause:new Error().stack}),this.message=t,this.name="ServerError"}}class rhe{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:the,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:nhe,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const a=[this.getRequestUrlInternal(n)];return r&&a.push(this.getBaseResourcePath()),t!==""&&a.push(t),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[o,l]of Object.entries(t.queryParams))a.searchParams.append(o,String(l));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,t.abortSignal),this.unaryApiCall(a,s,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[a,s]of Object.entries(n))typeof s=="object"?r[a]=Object.assign(Object.assign({},r[a]),s):s!==void 0&&(r[a]=s);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),a=this.constructUrl(t.path,n,r);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,t.abortSignal),this.streamApiCall(a,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r){if(n&&n.timeout||r){const a=new AbortController,s=a.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>a.abort(),n.timeout),r&&r.addEventListener("abort",()=>{a.abort()}),t.signal=s}return t.headers=await this.getHeadersInternal(n),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async a=>(await a3(a),new cP(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async a=>(await a3(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(t){var n;return Fw(this,arguments,function*(){const a=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let o="";for(;;){const{done:l,value:c}=yield ta(a.read());if(l){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(c);try{const p=JSON.parse(u);if("error"in p){const y=JSON.parse(JSON.stringify(p.error)),v=y.status,x=y.code,b=`got status: ${v}. ${JSON.stringify(p)}`;if(x>=400&&x<500)throw new d9(b);if(x>=500&&x<600)throw new pP(b)}}catch(p){const y=p;if(y.name==="ClientError"||y.name==="ServerError")throw p}o+=u;let f=o.match(i3);for(;f;){const p=f[1];try{const y=new Response(p,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ta(new cP(y)),o=o.slice(f[0].length),f=o.match(i3)}catch(y){throw new Error(`exception parsing stream chunk ${p}. ${y}`)}}}}finally{a.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=ehe+" "+this.clientOptions.userAgentExtra;return t[Xde]=n,t[Jde]=n,t[Yde]="application/json",t}async getHeadersInternal(t){const n=new Headers;if(t&&t.headers){for(const[r,a]of Object.entries(t.headers))n.append(r,a);t.timeout&&t.timeout>0&&n.append(Qde,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(t,n){var r;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const s=this.clientOptions.uploader,o=await s.stat(t);a.sizeBytes=String(o.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=l;const c=await this.fetchUploadUrl(a,n);return s.upload(t,c,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n){var r;let a={};n!=null&&n.httpOptions?a=n.httpOptions:a={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const s={file:t},o=await this.request({path:on("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:a});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(r=o==null?void 0:o.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function a3(e){var t;if(e===void 0)throw new pP("response is undefined");if(!e.ok){const n=e.status,r=e.statusText;let a;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?a=await e.json():a={error:{message:await e.text(),code:e.status,status:e.statusText}};const s=`got status: ${n} ${r}. ${JSON.stringify(a)}`;throw n>=400&&n<500?new d9(s):n>=500&&n<600?new pP(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ihe(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["_url","name"],r);const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function ahe(e,t,n){const r={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=k(t,["filter"]);return n!==void 0&&o!=null&&D(n,["_query","filter"],o),r}function she(e,t){const n={},r=k(t,["config"]);return r!=null&&D(n,["config"],ahe(e,r,n)),n}function ohe(e,t){const n={},r=k(t,["textInput"]);r!=null&&D(n,["textInput"],r);const a=k(t,["output"]);return a!=null&&D(n,["output"],a),n}function lhe(e,t){const n={};if(k(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=k(t,["examples"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>ohe(e,s))),D(n,["examples","examples"],a)}return n}function che(e,t,n){const r={};if(k(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=k(t,["tunedModelDisplayName"]);if(n!==void 0&&a!=null&&D(n,["displayName"],a),k(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=k(t,["epochCount"]);n!==void 0&&s!=null&&D(n,["tuningTask","hyperparameters","epochCount"],s);const o=k(t,["learningRateMultiplier"]);if(o!=null&&D(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),k(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(k(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=k(t,["batchSize"]);n!==void 0&&l!=null&&D(n,["tuningTask","hyperparameters","batchSize"],l);const c=k(t,["learningRate"]);return n!==void 0&&c!=null&&D(n,["tuningTask","hyperparameters","learningRate"],c),r}function uhe(e,t){const n={},r=k(t,["baseModel"]);r!=null&&D(n,["baseModel"],r);const a=k(t,["trainingDataset"]);a!=null&&D(n,["tuningTask","trainingData"],lhe(e,a));const s=k(t,["config"]);return s!=null&&D(n,["config"],che(e,s,n)),n}function dhe(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["_url","name"],r);const a=k(t,["config"]);return a!=null&&D(n,["config"],a),n}function hhe(e,t,n){const r={},a=k(t,["pageSize"]);n!==void 0&&a!=null&&D(n,["_query","pageSize"],a);const s=k(t,["pageToken"]);n!==void 0&&s!=null&&D(n,["_query","pageToken"],s);const o=k(t,["filter"]);return n!==void 0&&o!=null&&D(n,["_query","filter"],o),r}function fhe(e,t){const n={},r=k(t,["config"]);return r!=null&&D(n,["config"],hhe(e,r,n)),n}function phe(e,t,n){const r={},a=k(t,["gcsUri"]);if(n!==void 0&&a!=null&&D(n,["supervisedTuningSpec","trainingDatasetUri"],a),k(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function mhe(e,t){const n={},r=k(t,["gcsUri"]);return r!=null&&D(n,["validationDatasetUri"],r),n}function ghe(e,t,n){const r={},a=k(t,["validationDataset"]);n!==void 0&&a!=null&&D(n,["supervisedTuningSpec"],mhe(e,a));const s=k(t,["tunedModelDisplayName"]);n!==void 0&&s!=null&&D(n,["tunedModelDisplayName"],s);const o=k(t,["description"]);n!==void 0&&o!=null&&D(n,["description"],o);const l=k(t,["epochCount"]);n!==void 0&&l!=null&&D(n,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=k(t,["learningRateMultiplier"]);n!==void 0&&c!=null&&D(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const u=k(t,["exportLastCheckpointOnly"]);n!==void 0&&u!=null&&D(n,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const f=k(t,["adapterSize"]);if(n!==void 0&&f!=null&&D(n,["supervisedTuningSpec","hyperParameters","adapterSize"],f),k(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(k(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function yhe(e,t){const n={},r=k(t,["baseModel"]);r!=null&&D(n,["baseModel"],r);const a=k(t,["trainingDataset"]);a!=null&&D(n,["supervisedTuningSpec","trainingDatasetUri"],phe(e,a,n));const s=k(t,["config"]);return s!=null&&D(n,["config"],ghe(e,s,n)),n}function vhe(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["model"],r);const a=k(t,["name"]);return a!=null&&D(n,["endpoint"],a),n}function h9(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["state"]);a!=null&&D(n,["state"],r9(e,a));const s=k(t,["createTime"]);s!=null&&D(n,["createTime"],s);const o=k(t,["tuningTask","startTime"]);o!=null&&D(n,["startTime"],o);const l=k(t,["tuningTask","completeTime"]);l!=null&&D(n,["endTime"],l);const c=k(t,["updateTime"]);c!=null&&D(n,["updateTime"],c);const u=k(t,["description"]);u!=null&&D(n,["description"],u);const f=k(t,["baseModel"]);f!=null&&D(n,["baseModel"],f);const p=k(t,["_self"]);p!=null&&D(n,["tunedModel"],vhe(e,p));const y=k(t,["distillationSpec"]);y!=null&&D(n,["distillationSpec"],y);const v=k(t,["experiment"]);v!=null&&D(n,["experiment"],v);const x=k(t,["labels"]);x!=null&&D(n,["labels"],x);const b=k(t,["pipelineJob"]);b!=null&&D(n,["pipelineJob"],b);const w=k(t,["tunedModelDisplayName"]);return w!=null&&D(n,["tunedModelDisplayName"],w),n}function xhe(e,t){const n={},r=k(t,["nextPageToken"]);r!=null&&D(n,["nextPageToken"],r);const a=k(t,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>h9(e,o))),D(n,["tuningJobs"],s)}return n}function bhe(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["metadata"]);a!=null&&D(n,["metadata"],a);const s=k(t,["done"]);s!=null&&D(n,["done"],s);const o=k(t,["error"]);return o!=null&&D(n,["error"],o),n}function jhe(e,t){const n={},r=k(t,["checkpointId"]);r!=null&&D(n,["checkpointId"],r);const a=k(t,["epoch"]);a!=null&&D(n,["epoch"],a);const s=k(t,["step"]);s!=null&&D(n,["step"],s);const o=k(t,["endpoint"]);return o!=null&&D(n,["endpoint"],o),n}function whe(e,t){const n={},r=k(t,["model"]);r!=null&&D(n,["model"],r);const a=k(t,["endpoint"]);a!=null&&D(n,["endpoint"],a);const s=k(t,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>jhe(e,l))),D(n,["checkpoints"],o)}return n}function mP(e,t){const n={},r=k(t,["name"]);r!=null&&D(n,["name"],r);const a=k(t,["state"]);a!=null&&D(n,["state"],r9(e,a));const s=k(t,["createTime"]);s!=null&&D(n,["createTime"],s);const o=k(t,["startTime"]);o!=null&&D(n,["startTime"],o);const l=k(t,["endTime"]);l!=null&&D(n,["endTime"],l);const c=k(t,["updateTime"]);c!=null&&D(n,["updateTime"],c);const u=k(t,["error"]);u!=null&&D(n,["error"],u);const f=k(t,["description"]);f!=null&&D(n,["description"],f);const p=k(t,["baseModel"]);p!=null&&D(n,["baseModel"],p);const y=k(t,["tunedModel"]);y!=null&&D(n,["tunedModel"],whe(e,y));const v=k(t,["supervisedTuningSpec"]);v!=null&&D(n,["supervisedTuningSpec"],v);const x=k(t,["tuningDataStats"]);x!=null&&D(n,["tuningDataStats"],x);const b=k(t,["encryptionSpec"]);b!=null&&D(n,["encryptionSpec"],b);const w=k(t,["partnerModelTuningSpec"]);w!=null&&D(n,["partnerModelTuningSpec"],w);const _=k(t,["distillationSpec"]);_!=null&&D(n,["distillationSpec"],_);const T=k(t,["experiment"]);T!=null&&D(n,["experiment"],T);const C=k(t,["labels"]);C!=null&&D(n,["labels"],C);const O=k(t,["pipelineJob"]);O!=null&&D(n,["pipelineJob"],O);const E=k(t,["tunedModelDisplayName"]);return E!=null&&D(n,["tunedModelDisplayName"],E),n}function She(e,t){const n={},r=k(t,["nextPageToken"]);r!=null&&D(n,["nextPageToken"],r);const a=k(t,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>mP(e,o))),D(n,["tuningJobs"],s)}return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nhe extends Vb{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new fN(lg.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const r=await this.tuneMldevInternal(n);let a="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?a=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(a=r.name.split("/operations/")[0]),{name:a,state:lP.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=dhe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>mP(this.apiClient,f))}else{const u=ihe(this.apiClient,t);return l=on("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>h9(this.apiClient,f))}}async listInternal(t){var n,r,a,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=fhe(this.apiClient,t);return l=on("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=She(this.apiClient,f),y=new H4;return Object.assign(y,p),y})}else{const u=she(this.apiClient,t);return l=on("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=xhe(this.apiClient,f),y=new H4;return Object.assign(y,p),y})}}async tuneInternal(t){var n,r;let a,s="",o={};if(this.apiClient.isVertexAI()){const l=yhe(this.apiClient,t);return s=on("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>mP(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let a,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=uhe(this.apiClient,t);return s=on("tunedModels",l._url),o=l._query,delete l.config,delete l._url,delete l._query,a=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>bhe(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _he{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Che=1024*1024*8,The=3,Ehe=1e3,Ahe=2,GC="x-goog-upload-status";async function khe(e,t,n){var r,a,s;let o=0,l=0,c=new cP(new Response),u="upload";for(o=e.size;l<o;){const p=Math.min(Che,o-l),y=e.slice(l,l+p);l+p>=o&&(u+=", finalize");let v=0,x=Ehe;for(;v<The&&(c=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(l),"Content-Length":String(p)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[GC]));)v++,await Ohe(x),x=x*Ahe;if(l+=p,((a=c==null?void 0:c.headers)===null||a===void 0?void 0:a[GC])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[GC])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Phe(e){return{size:e.size,type:e.type}}function Ohe(e){return new Promise(t=>setTimeout(t,e))}class Dhe{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await khe(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Phe(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mhe{create(t,n,r){return new Ihe(t,n,r)}}class Ihe{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s3="x-goog-api-key";class Rhe{constructor(t){this.apiKey=t}async addAuthHeaders(t){t.get(s3)===null&&t.append(s3,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lhe="gl-node/";class f9{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=Wse(t,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion;const a=new Rhe(this.apiKey);this.apiClient=new rhe({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:Lhe+"web",uploader:new Dhe,downloader:new _he}),this.models=new Lde(this.apiClient),this.live=new Ode(this.apiClient,a,new Mhe),this.chats=new ele(this.models,this.apiClient),this.caches=new Qoe(this.apiClient),this.files=new fle(this.apiClient),this.operations=new Kde(this.apiClient),this.tunings=new Nhe(this.apiClient)}}const Fhe=()=>{const e=localStorage.getItem("currentClinicId");return e||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},p9=()=>localStorage.getItem("authToken");class $he{constructor(){hr(this,"listeners",[]);hr(this,"activeRequests",0)}subscribe(t){return this.listeners.push(t),t(this.activeRequests>0),()=>this.unsubscribe(t)}unsubscribe(t){this.listeners=this.listeners.filter(n=>n!==t)}notify(t){t?this.activeRequests++:this.activeRequests=Math.max(0,this.activeRequests-1);const n=this.activeRequests>0;this.listeners.forEach(r=>r(n))}}const gP=new $he,Bhe="https://backend.newtons.in",zhe=()=>localStorage.getItem("authToken"),ce=async(e,t={})=>{const n=zhe(),r={...t.headers};n&&(r.Authorization=`Bearer ${n}`),!(t.body instanceof FormData)&&!r["Content-Type"]&&(r["Content-Type"]="application/json");const a=r;let s=e.startsWith("/")?e:`/${e}`;s.startsWith("/api/")||(s=`/api${s}`);const o=`${Bhe}${s}`;gP.notify(!0);try{console.log(`Making API call to: ${o}`);const l=await fetch(o,{...t,headers:a});if(l.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!l.ok){let c=`HTTP error! status: ${l.status}`;try{const u=await l.json();c=(u==null?void 0:u.message)||(u==null?void 0:u.error)||c}catch{}throw console.error(`API Error: ${l.status} ${l.statusText} - ${c}`),new Error(c)}return l}catch(l){throw l instanceof TypeError&&l.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",l):console.error("API Fetch Error:",l),l}finally{gP.notify(!1)}},WC="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",qhe="models/gemini-3-flash-preview",Uhe=`You are an intelligent Clinic Hub Assistant for a Clinic Management System. Your role is to help the Clinic Administrator or Doctor manage their clinic ecosystem efficiently.

You have access to the current state of the clinic settings and the staff list. You can perform actions to update these settings or manage staff members.

**Capabilities:**
1.  **View Settings & Staff:** User can ask about current charges, clinic details, or staff members. Answer based on the provided context.
2.  **Update Settings:** Change fees, clinic name, address, etc.
3.  **Manage Staff:** Add new staff members or update existing ones.
4.  **Voice AI Settings:** Update the \`voice_ai_language\` for the Live API Assistant. Available codes:
    -   India: \`en-US\` (English), \`hi-IN\` (Hindi), \`te-IN\` (Telugu), \`bn-IN\` (Bengali), \`mr-IN\` (Marathi), \`ta-IN\` (Tamil), \`gu-IN\` (Gujarati), \`kn-IN\` (Kannada), \`ml-IN\` (Malayalam), \`pa-IN\` (Punjabi)
    -   Global: \`es-ES\` (Spanish), \`fr-FR\` (French), \`de-DE\` (German), \`it-IT\` (Italian), \`pt-PT\` (Portuguese), \`ru-RU\` (Russian), \`ja-JP\` (Japanese), \`ko-KR\` (Korean), \`zh-CN\` (Chinese), \`ar-SA\` (Arabic).
5.  **Analyze Financials & Inventory:** Access the Analysis Dashboard to view revenue, expenses, and inventory movement. Set date ranges to filter data.
6.  **Manage Inventory:** Update pharmacy tokens (drugs) and lab tests. You will reference items by their **Serial Number** as provided in the context.
7.  **Purchase Management:** Search for distributors, select one, and build a purchase order by adding items. You can add multiple items at once. Editing items uses Serial Numbers.
8.  **Looping & Reasoning:** You should think step-by-step. If a user request involves multiple steps or if you need to check something after an action, you can continue the loop.
9.  **Follow-up:** If critical information is missing, ask the user.
10.  **Manage Custom Columns:** You can add or remove custom columns/fields for various entities (patients, drugs, lab_tests). Use the \`manage_custom_columns\` action.
11.  **Custom Fields Data:** When searching or updating items (like drugs or patients), pay attention to their \`custom_fields\`. You can update these fields using the \`update_drug\` (or similar) action by passing a \`custom_fields\` object with key-value pairs. Keys must match the \`key\` defined in the Clinic Settings.
12.  **Custom Tables:** You can create entirely new tables to track anything (e.g., "Gym Members", "Diet Plans"). Use \`create_custom_table\`. You can then add rows to these tables using \`add_table_row\` (requires Table ID) and update them with \`update_table_row\`. meaningful descriptions are helpful.
13.  **Dashboards:** You can create persistent custom dashboards using \`create_custom_dashboard\` or show a specialized temporary view using \`render_temporary_dashboard\`.
     - Use \`render_temporary_dashboard\` when the user asks to "show", "view", or "see" data (e.g., "Show me John's meds").
     - Use \`create_custom_dashboard\` when the user explicitly asks to "create a dashboard" or "save a view".
     - **Data Sources:** Use the provided "Dashboard Data Sources" context to know valid keys (e.g., \`api:patients\`, \`table:123\`).
       - **Advanced Features:** You can add **Charts** (bar, line, pie) and **Filters** to widgets.
       - **Filters (SERVER-SIDE):** Use the \`filters\` array in config. Filters are applied on the server for efficiency.
         - **Supported Operators:**
           - \`equals\` or \`eq\`: Exact match
           - \`neq\` or \`not_equals\`: Not equal
           - \`contains\` or \`like\`: Case-insensitive substring match
           - \`starts_with\`: Value starts with
           - \`ends_with\`: Value ends with
           - \`gt\` or \`greater_than\`: Greater than
           - \`gte\`: Greater than or equal
           - \`lt\` or \`less_than\`: Less than
           - \`lte\`: Less than or equal
           - \`in\`: Value in array (value should be array)
           - \`not_in\`: Value not in array
           - \`is_null\`: Field is null
           - \`is_not_null\`: Field is not null
           - \`between\`: Value between two values (value should be [min, max])
         - **Filterable Fields:** The "Dashboard Data Sources" in context includes a \`filterableFields\` list for each source. You **MUST** use these fields.
           - **Mixed Tables:** Sources like \`api:pharmacy-orders\` or \`api:lab-orders\` support filtering by associated **Patient** data using \`patient_name\`, \`patient_phone\`, and \`token\`.
         - **Example 1:** User: "Show pharmacy orders for John" -> Action: \`render_temporary_dashboard\` with widget config: \`filters: [{ field: 'patient_name', operator: 'contains', value: 'John' }]\`
         - **Example 2:** User: "Show orders for Token 123" -> \`filters: [{ field: 'token', operator: 'equals', value: 123 }]\`
         - **Example 3:** \`filters: [{ field: 'expiry_date', operator: 'lt', value: '2024-01-01' }, { field: 'stock', operator: 'gt', value: 0 }]\`
         - Smartly infer dates for "expired" (lt today), "expiring this week" (between today and next week), etc.
       - **Charts:** Set \`type: 'chart'\`. Config requires \`chartType\`, \`xAxisKey\` (category), \`dataKey\` (value).

**Interpretation Rules:**
- **Analysis Dates:** When the user asks for analysis (financial or inventory) for a specific time range (e.g., "last month", "yesterday"), you **MUST** include \`startDate\` and \`endDate\` in the \`navigate_to\` action for \`/dashboard/analysis\`.
- If the user says "add drug", "buy medicine", or "new stock", they **usually mean "Add Item to Purchase Order"** (use \`add_purchase_items\` or navigate to \`/dashboard/purchase\`).
- **Prerequisite:** If you are using ANY purchase tools (\`add_purchase_items\`, \`search_distributor_purchase\`, \`set_distributor_purchase\`, \`edit_purchase_items\`), you **MUST** include a \`navigate_to\` action with \`page: "/dashboard/purchase"\` as the **FIRST** action in your list, unless you are already on that page.
- **ONLY** use \`update_drug\` (create) if the user explicitly says "create new drug definition" or "add to master inventory".
- The correct route for purchasing is \`/dashboard/purchase\`.

- **Drug Name & Brand Handling (CRITICAL):**
  - "Name" refers to the **Composition Name** (or Generic Name).
  - "Brand Name" refers to the **Brand Name**.
  - **Auto-Computation:** If the user provides a *Brand Name* (e.g., "Tab Dolo 650"), you **MUST** automatically:
    1.  Infer the **Composition** (e.g., "Tab Paracetamol 650mg") and use it for the "name" field.
    2.  Use the provided brand for the "brand_name" field (e.g., "Dolo 650").
    3.  Infer the **pack size** if implied (e.g., "1x10") and use it for the "pack" field.
  - If the user provides only a Brand Name and you cannot confidently infer the Composition, you **MUST** use \`ask_followup_question\` to ask the user for the composition.
  - Apply this logic to both \`add_purchase_items\` and \`update_drug\` actions.

- **Inventory Navigation:** If you execute "update_drug" or "search_pharmacy_inventory", you **MUST** include a "navigate_to" action for "/dashboard/inventory". If you searched for or updated a specific term, append it as "?search=Term" (e.g. "/dashboard/inventory?search=Paracetamol").
- **Lab Navigation:** If you execute "update_lab_test", you **MUST** include a "navigate_to" action for "/lab-inventory", unless you are already on that page.

**Action Tools:**
You can perform the following actions. Return a JSON array of actions.

\`\`\`json
[
    {
        "action": "update_clinic_settings",
        "updates": {
            "admissionCharge": "number string",
            "perDayCharge": "number string",
            "otherCharges": "number string",
            "name": "string",
            "address": "string",
            "notes": "string",
            "logoUrl": "string",
            "upi_id": "string",
            "low_stock_threshold": number,
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "clinicWideSystemPrompt": "string",
            "aiMemory": "string",
            "gemini_api_key": "string",
            "voice_ai_language": "string (e.g. 'en-US', 'te-IN')"
        }
    },
    {
        "action": "create_staff_member",
        "staff": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null
        }
    },
    {
        "action": "update_staff_member",
        "id": "string | number",
        "updates": {
            "name": "string",
            "email": "string",
            "role": "doctor" | "receptionist" | "pharmacy" | "lab",
            "password": "string",
            "opd_fee": number | null,
            "active": boolean
        }
    },
    {
        "action": "set_analysis_dates",
        "startDate": "YYYY-MM-DD",
        "endDate": "YYYY-MM-DD"
    },
    {
        "action": "navigate_to",
        "page": "/dashboard/inventory" | "/lab-inventory" | "/dashboard/queue" | "/dashboard/staff" | "/dashboard/purchase" | "/dashboard/analysis" | "/dashboard/clinic-hub" | "/billing" | "/dashboard/patients",
        "section": "financial" | "inventory" | "string (optional)",
        "startDate": "YYYY-MM-DD (optional, for analysis page)",
        "endDate": "YYYY-MM-DD (optional, for analysis page)"
    },
    {
        "action": "highlight_section",
        "elementId": "string"
    },
    {
        "action": "refresh_analysis"
    },
    {
        "action": "ask_followup_question",
        "question": "string"
    },
    {
        "action": "search_pharmacy_inventory",
        "query": "string (name, brand, or composition)"
    },
    {
        "action": "update_drug",
        "id": "number",
        "updates": {
            "name": "string",
            "brand_name": "string",
            "description": "string",
            "mrp": "number (MRP)",
            "stock": "number",
            "pack": "string (e.g. strip, bottle)",
            "supplier": "string",
            "expiry_date": "YYYY-MM-DD",
            "rate": "number",
            "box_number": "string",
            "gst": "number",
            "margin": "number",
            "discount": "number",
            "batch": "string",
            "hsn_code": "string",
            "mfg": "string",
            "mfg": "string",
            "loose": "number",
            "custom_fields": "object { key: value } (Optional: Update custom field values)"
        }
    },
    {
        "action": "update_lab_test",
        "serial_number": 1,
        "updates": {
            "name": "string",
            "price": "number",
            "description": "string",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit }"
        }
    },
    {
        "action": "search_lab_inventory",
        "query": "string (test name or description)"
    },
    {
        "action": "create_lab_test",
        "test": {
            "name": "string",
            "price": "number",
            "description": "string (optional)",
            "default_parameters": "array of objects { name, type, defaultValue, unit, lower_limit, upper_limit } (optional)"
        }
    },
    {
        "action": "search_distributor_purchase",
        "query": "string"
    },
    {
        "action": "set_distributor_purchase",
        "distributorId": "string"
    },
    {
        "action": "add_purchase_items",
        "items": [
            {
                "name": "string (Composition Name)",
                "brand_name": "string",
                "stock": "number (quantity)",
                "rate": "number (buying price)",
                "mrp": "number",
                "pack": "string",
                "expiry_date": "YYYY-MM-DD",
                "batch": "string",
                "discount": "number",
                "gst": "number"
            }
        ]
    },
    {
        "action": "edit_purchase_items",
        "updates": [
            {
                "serial_number": "number (The Row # from context)",
                "field": "string (name, stock, rate, etc.)",
                "value": "string | number"
            }
        ]
    },
    {
        "action": "end_task",
        "summary": "string"
    },
    {
        "action": "open_new_case",
        "name": "string (Patient Name)",
        "age": "number (optional)",
        "gender": "M | F | O (optional)",
        "phone": "string (optional)",
        "complaint": "string (The medical complaint/reason)"
    },
    {
        "action": "manage_custom_columns",
        "entity": "patients" | "drugs" | "lab_tests",
        "operation": "add" | "remove",
        "column": {
            "label": "string",
            "type": "text" | "number" | "date" | "boolean",
            "required": boolean
        }
    },
    {
        "action": "create_custom_table",
        "name": "string",
        "description": "string (optional)",
        "columns": [
            {
                "label": "string",
                "type": "text" | "number" | "date" | "boolean",
                "required": boolean
            }
        ]
    },
    {
        "action": "add_table_row",
        "tableId": "string (The ID of the custom table)",
        "data": "object { key: value } (Keys must match column keys derived from labels)"
    },
    {
        "tableId": "string",
        "recordId": "string (The ID of the row/record to update)",
        "data": "object { key: value } (Updates to apply)"
    },
    {
        "action": "create_custom_dashboard",
        "name": "string",
        "description": "string (optional)",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string (one of the keys from Dashboard Data Sources, e.g. api:patients, table:xyz)",
                "config": "object { columns?: string[], label?: string, chartType?: 'bar'|'line'|'pie', xAxisKey?: string, dataKey?: string, filters?: Array<{field, operator, value}> }"
            }
        ]
    },
    {
        "action": "render_temporary_dashboard",
        "title": "string",
        "widgets": [
            {
                "type": "stat" | "table" | "chart",
                "title": "string",
                "dataSource": "string",
                "config": "object { columns?: [], label?, chartType?, xAxisKey?, dataKey?, filters?: [] }"
            }
        ]
    }
]
\`\`\`

**Navigation Reference:**
- **Pharmacy Inventory:** \`/dashboard/inventory\`
- **Lab Inventory:** \`/lab-inventory\`
- **Doctor Queue:** \`/dashboard/queue\`
- **Staff Management:** \`/dashboard/staff\`
- **All Patients:** \`/dashboard/patients\`
- **Billing:** \`/billing\`
- **Purchase Page:** \`/dashboard/purchase\`
- **Analysis:** \`/dashboard/analysis\`
- **Clinic Hub:** \`/dashboard/clinic-hub\`
\`\`\`

**Rules:**
-   **Always** return a JSON array as the last part of your response.
-   If the user's request is satisfied, use the \`end_task\` action with a summary of what was done.
-   If you need more info, use \`ask_followup_question\`.
-   If you perform an action (like updating settings), and there's nothing else to do *immediately* but you want to confirm it's done, you can return the action. The system will execute it and call you back with the result. Then you can \`end_task\`.
-   For \`create_staff_member\`, if password is not provided by user, generate a secure random password and mention it in the summary.
-   Update numeric strings as strings (e.g., "500.00").
-   **CRITICAL DO's and DON'Ts:**
    -   **DO NOT** fill in empty fields (like \`gemini_api_key\`, \`logoUrl\`, \`upi_id\`, etc.) with fake, placeholder, or example data.
    -   **ONLY** update fields that the user *intentionally* asked to change.
    -   **PRESERVE** existing values for any fields not explicitly mentioned in the user's request.
    -   If a field is empty and the user didn't ask to set it, **leave it empty**.
    -   Do not invent values.
`;async function Vhe(){var n;if(!p9()&&WC)return WC;let t=null;try{const r=await ce("/api/clinics/settings");if(r.ok){const a=await r.json();(n=a.gemini_api_key)!=null&&n.trim()&&(t=a.gemini_api_key.trim())}}catch(r){console.warn("Error fetching updated key",r)}if(t)return t;try{const r=await ce("/api/global-settings/app_gemini_api_key");if(r.ok){const s=(await r.json()).value;if(s&&s.trim()!=="")return s.trim()}}catch(r){console.warn("Could not fetch global API key.",r)}return WC}async function Hhe(e,t,n=[],r){var f,p,y,v,x,b;let a=(f=t.settings)==null?void 0:f.gemini_api_key;if(!a||!a.trim())try{a=await Vhe()}catch(w){console.warn("Using fallback key or failing:",w)}if(!a)throw new Error("No Gemini API Key provided in settings or environment.");const s=new f9({apiKey:a}),o=[];o.push({role:"user",parts:[{text:Uhe}]}),o.push({role:"model",parts:[{text:"Understood. I am ready to assist with Clinic Hub management."}]}),n.forEach(w=>{o.push({role:w.role,parts:[{text:w.text}]})});const u=[{text:`
    Context:
    ${`
    --- Current Clinic Context ---
    Settings: ${JSON.stringify(t.settings,null,2)}
    
    Custom Columns Configuration: ${JSON.stringify(t.settings.custom_columns_config||{},null,2)}

    Custom Tables (Available for adding/editing rows): ${JSON.stringify(t.customTables||[],null,2)}
    
    Dashboard Data Sources (Use these keys for widgets): ${JSON.stringify(t.dashboardDataSources||[],null,2)}

    --- DYNAMIC CONTEXT DATA (Configured tables with <200 rows) ---
    ${Object.entries(t.dynamicContextData||{}).map(([w,_])=>{const T=(_.data||[]).slice(0,50).map((C,O)=>({_sn:O+1,...C}));return`${_.label||w} (${_.count||0} records): ${JSON.stringify(T,null,2)}`}).join(`

`)}
    --- END DYNAMIC CONTEXT ---

    Staff List: ${JSON.stringify(t.staffList.map(w=>({id:w.id||w._id,name:w.name,role:w.role,email:w.email,active:w.active,opd_fee:w.opd_fee})),null,2)}
    
    Previous Action Results (if any): ${JSON.stringify(t.actionResults||[],null,2)}

    Analysis Data (if active): ${JSON.stringify(t.analysisData||{},null,2)}

    Pharmacy Inventory: ${t.pharmacyInventory?JSON.stringify(t.pharmacyInventory,null,2):"Not loaded. Use 'search_pharmacy_inventory' to find items."}

    Distributors List: ${JSON.stringify((t.distributors||[]).map(w=>({serial_number:w.serial_number,name:w.name,contact_person:w.contact_person,phone:w.phone,remainingBalance:w.remainingBalance})),null,2)}

    Lab Tests Inventory: ${JSON.stringify((t.labInventory||[]).map(w=>({serial:w.serial_number,name:w.name,price:w.price,description:w.description,default_parameters:w.default_parameters})),null,2)}

    Current Purchase Page Rows: ${JSON.stringify((t.purchaseRows||[]).map((w,_)=>({serial_number:_+1,name:w.name,stock:w.stock,rate:w.rate,mrp:w.mrp,net_value:(w.stock*w.rate).toFixed(2)})),null,2)}

    Current Application Page Context: ${t.pageContext?JSON.stringify(t.pageContext,null,2):"Unknown/General Dashboard"}
    `}

    User Query/Input:
    ${e}
    `}];if(r){const w=r.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"");u.push({inlineData:{data:w,mimeType:"image/jpeg"}})}o.push({role:"user",parts:u});try{const w={model:qhe,contents:o,generationConfig:{temperature:.7,maxOutputTokens:2048,responseMimeType:"text/plain"}},_=await s.models.generateContentStream(w);let T="";for await(const C of _){const O=C;O.text&&typeof O.text=="function"?T+=O.text():(b=(x=(v=(y=(p=O.candidates)==null?void 0:p[0])==null?void 0:y.content)==null?void 0:v.parts)==null?void 0:x[0])!=null&&b.text&&(T+=O.candidates[0].content.parts[0].text)}if(!T)throw new Error("Empty response from AI");return T}catch(w){throw console.error("Gemini Interaction Error:",w),new Error("Failed to communicate with AI Assistant.")}}const HD=({settings:e,staffList:t,onSettingsUpdate:n,onStaffUpdate:r,onHighlight:a,enableDynamicContext:s=!1})=>{const o=Mt(),l=ns(),{setAnalysisDateRange:c,analysisData:u,analysisNavigate:f,refreshAnalysis:p,pageContext:y}=nN(),{setDistributors:v,setSelectedDistributor:x,setSearchTerm:b,addPurchaseRow:w,updatePurchaseRow:_,distributors:T,purchaseRows:C}=wq(),[O,E]=j.useState(""),P=j.useRef(u),I=j.useRef(C);j.useEffect(()=>{P.current=u},[u]),j.useEffect(()=>{I.current=C},[C]);const[F,$]=j.useState([]),[z,L]=j.useState([]),[H,V]=j.useState([]),[ne,Z]=j.useState(!1),[q,K]=j.useState(null),se=j.useRef(!1),G=j.useRef(0),B=5,fe=()=>{se.current=!1,Z(!1),V(re=>[...re,{role:"system",text:" Task stopped by user."}])},me=re=>{const ae=new FileReader;ae.onloadend=()=>{K(ae.result)},ae.readAsDataURL(re)},Y=()=>{K(null)},[xe,Ie]=j.useState(null),Ne=()=>Ie(null),ke=async(re,ae)=>{if(!xe)return;const X={name:re,description:ae,widgets:xe.widgets};if(!(await ce("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)})).ok)throw new Error("Failed to save dashboard");Ie(null)},de=async(re,ae,X=[],W)=>{var ie,pe,le;if(se.current){if(G.current+=1,G.current>B){V(je=>[...je,{role:"system",text:" Task limit reached. Stopping automatically."}]),Z(!1),se.current=!1;return}try{let je=e,Ge=t,et=[],ht=[],_e=[],Fe=[],Ye=[];try{const[ze,Xe]=await Promise.all([ce("/api/clinics/settings"),ce("/staff")]);if(ze.ok&&Xe.ok){const Je=await ze.json(),wt=await Xe.json(),[Pt,dn,Ee,at]=await Promise.all([ce("/api/drugs"),ce("/api/lab-tests"),ce("/api/distributors"),ce("/api/custom-tables"),ce("/api/dashboards/data-sources")]);if(Pt.ok){const Tt=await Pt.json();et=Tt.drugs||Tt||[]}if(dn.ok){const Re=(await dn.json()).map((vt,It)=>({...vt,serial_number:It+1}));ht=Re,$(Re)}if(Ee.ok&&(_e=(await Ee.json()||[]).map((Re,vt)=>({...Re,serial_number:vt+1}))),at.ok){const Tt=await at.json();Fe=Tt,L(Tt)}try{const Tt=await ce("/api/dashboards/data-sources");Tt.ok&&(Ye=await Tt.json())}catch(Tt){console.warn("Failed to fetch dashboard sources",Tt)}je={...Je,admissionCharge:parseFloat(Je.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(Je.perDayCharge||0).toFixed(2),otherCharges:parseFloat(Je.otherCharges||0).toFixed(2),aiMemory:Je.aiMemory||"",clinicWideSystemPrompt:Je.clinicWideSystemPrompt||"",gemini_api_key:Je.gemini_api_key||"",low_stock_threshold:Je.low_stock_threshold!==void 0&&Je.low_stock_threshold!==null?String(Je.low_stock_threshold):"10",name:Je.name||"",logoUrl:Je.logoUrl||"",upi_id:Je.upi_id||"",address:Je.address||"",notes:Je.notes||"",clinic_id:Je.clinic_id},Ge=wt.map(Tt=>({...Tt,id:Tt._id||Tt.id}))}}catch(ze){console.warn("Failed to fetch fresh context for AI loop, falling back to props",ze)}let Ke={};if(s)try{const ze=await ce("/api/ai-context/data");ze.ok&&(Ke=await ze.json())}catch(ze){console.warn("Failed to fetch dynamic AI context",ze)}const be={settings:je,staffList:Ge,analysisData:P.current,pharmacyInventory:et.length>50?void 0:et,labInventory:ht,distributors:_e,purchaseRows:I.current,actionResults:X,pageContext:y||void 0,customTables:Fe,dashboardDataSources:Ye,dynamicContextData:Ke},De=ae.filter(ze=>ze.role!=="system"),we=await Hhe(re,be,De,W);if(!se.current)return;let ve=[];try{const ze=we.match(/\[[\s\S]*\]/);if(ze)ve=JSON.parse(ze[0]);else{V(Xe=>[...Xe,{role:"model",text:we}]),Z(!1),se.current=!1;return}}catch(ze){console.error("Failed to parse AI response",ze),V(Xe=>[...Xe,{role:"model",text:"I'm having trouble processing that. Please try again."}]),Z(!1),se.current=!1;return}const Ce=[];let nt=[],Ve=[];for(const ze of ve){if(!se.current)break;if(ze.action==="end_task"){V(Xe=>[...Xe,{role:"model",text:ze.summary}]),Z(!1),se.current=!1;return}if(ze.action==="ask_followup_question"){V(Xe=>[...Xe,{role:"model",text:ze.question}]),Z(!1),se.current=!1;return}try{if(ze.action==="update_clinic_settings"){const Xe=ze.updates;Object.keys(Xe).forEach(Pt=>nt.push(`setting-${Pt}`));const Je={...je,...Xe},wt={...Je,admissionCharge:parseFloat(Je.admissionCharge),perDayCharge:parseFloat(Je.perDayCharge),otherCharges:parseFloat(Je.otherCharges),low_stock_threshold:parseInt(Je.low_stock_threshold)};await ce("/api/clinics/settings",{method:"PUT",body:JSON.stringify(wt)}),n&&n(),Ce.push({action:"update_clinic_settings",status:"success"}),Ve.push({role:"system",text:" Updated clinic settings"})}if(ze.action==="create_staff_member"&&(await ce("/api/staff",{method:"POST",body:JSON.stringify({...ze.staff,clinic_id:je.clinic_id})}),r&&r(),Ce.push({action:"create_staff_member",status:"success",name:ze.staff.name}),Ve.push({role:"system",text:` Created staff member: ${ze.staff.name}`})),ze.action==="update_staff_member"){const Xe=ze.id;await ce(`/api/staff/${Xe}`,{method:"PUT",body:JSON.stringify(ze.updates)}),r&&r(),nt.push(`staff-member-${Xe}`),Ce.push({action:"update_staff_member",status:"success",id:Xe}),Ve.push({role:"system",text:" Updated staff member details"})}if(ze.action==="set_analysis_dates"){const{startDate:Xe,endDate:Je}=ze;c({startDate:new Date(Xe),endDate:new Date(Je)}),Ce.push({action:"set_analysis_dates",status:"success",startDate:Xe,endDate:Je}),Ve.push({role:"system",text:` Set analysis dates: ${Xe} to ${Je}`})}if(ze.action==="navigate_to"){let Xe=ze.page;if(ze.page&&ze.page.includes("analysis")&&ze.startDate&&ze.endDate){const Je=Xe.includes("?")?"&":"?";Xe=`${Xe}${Je}startDate=${ze.startDate}&endDate=${ze.endDate}`}else ze.page&&ze.page.includes("analysis")&&((ie=P.current)!=null&&ie.startDate)&&((pe=P.current)!=null&&pe.endDate);o(Xe),ze.section&&setTimeout(()=>f(ze.section),500),Ce.push({action:"navigate_to",status:"success",page:Xe}),Ve.push({role:"system",text:` Navigated to ${Xe}`})}if(ze.action==="highlight_section"&&(nt.push(ze.elementId),Ce.push({action:"highlight_section",status:"success",id:ze.elementId})),ze.action==="refresh_analysis"){Ve.push({role:"system",text:" Refreshing analysis data..."});const Xe=await p();Xe?(P.current=Xe,Ce.push({action:"refresh_analysis",status:"success",summary:"Data refreshed successfully"}),Ve.push({role:"system",text:" Analysis data refreshed"})):(Ce.push({action:"refresh_analysis",status:"error",error:"No data returned"}),Ve.push({role:"system",text:" Failed to refresh analysis data"}))}if(ze.action==="search_pharmacy_inventory"){const Xe=ze.query.toLowerCase(),Je=et.filter(Pt=>Pt.name&&Pt.name.toLowerCase().includes(Xe)||Pt.brand_name&&Pt.brand_name.toLowerCase().includes(Xe)||Pt.description&&Pt.description.toLowerCase().includes(Xe)),wt=Je.slice(0,10);Ce.push({action:"search_pharmacy_inventory",status:"success",count:Je.length,results:wt}),Je.length>0?Ve.push({role:"system",text:` Found ${Je.length} matches for "${ze.query}". Showing top ${wt.length}.`}):Ve.push({role:"system",text:` No matches found for "${ze.query}"`})}if(ze.action==="update_drug"){const Xe=ze.id;try{const Je=et.find(dn=>dn.id===Xe);if(!Je)throw new Error(`Drug with ID ${Xe} not found.`);const wt={...ze.updates};wt.custom_fields&&(wt.custom_fields={...Je.custom_fields||{},...wt.custom_fields});const Pt={...Je,...wt};await ce(`/api/drugs/${Xe}`,{method:"PUT",body:JSON.stringify(Pt)}),Ce.push({action:"update_drug",status:"success",id:Xe,updates:ze.updates}),Ve.push({role:"system",text:` Updated drug: ${Je.name}`}),Ie({title:`Updated: ${Je.name}`,widgets:[{id:"edited-drug",type:"table",title:`Drug Updated: ${Je.name}`,dataSource:"api:drugs",config:{filters:[{field:"id",operator:"equals",value:Xe}],columns:["name","brand_name","stock","mrp","expiry_date","pack"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Je){Ce.push({action:"update_drug",status:"error",error:Je.message}),Ve.push({role:"system",text:` Failed to update drug: ${Je.message}`})}}if(ze.action==="update_lab_test"){const Xe=ht.find(Je=>Je.serial_number===ze.serial_number);if(Xe){const Je={...Xe,...ze.updates};await ce(`/api/lab-tests/${Xe.id}`,{method:"PUT",body:JSON.stringify(Je)}),Ce.push({action:"update_lab_test",status:"success",item:Xe.name}),Ve.push({role:"system",text:` Updated lab test: ${Xe.name}`}),Ie({title:`Updated: ${Xe.name}`,widgets:[{id:"edited-lab-test",type:"table",title:`Lab Test Updated: ${Xe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Xe.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}else Ce.push({action:"update_lab_test",status:"error",error:`Test with serial ${ze.serial_number} not found`}),Ve.push({role:"system",text:` Lab test with serial ${ze.serial_number} not found`})}if(ze.action==="search_lab_inventory"){const Xe=ze.query.toLowerCase(),Je=ht.filter(Pt=>Pt.name&&Pt.name.toLowerCase().includes(Xe)||Pt.description&&Pt.description.toLowerCase().includes(Xe)),wt=Je.slice(0,10);Ce.push({action:"search_lab_inventory",status:"success",count:Je.length,results:wt.map(Pt=>({serial_number:Pt.serial_number,id:Pt.id,name:Pt.name,price:Pt.price,description:Pt.description}))}),Je.length>0?Ve.push({role:"system",text:` Found ${Je.length} lab tests for "${ze.query}". Showing top ${wt.length}.`}):Ve.push({role:"system",text:` No lab tests found for "${ze.query}"`})}if(ze.action==="create_lab_test")try{const Xe=ze.test,Je={name:Xe.name,price:parseFloat(Xe.price)||0,description:Xe.description||"",default_parameters:Xe.default_parameters||[]},wt=await ce("/api/lab-tests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Je)});if(!wt.ok){const dn=await wt.json();throw new Error(dn.message||"Failed to create lab test")}const Pt=await wt.json();Ce.push({action:"create_lab_test",status:"success",id:Pt.id,name:Xe.name}),Ve.push({role:"system",text:` Created lab test: ${Xe.name}`}),Ie({title:`Created: ${Xe.name}`,widgets:[{id:"created-lab-test",type:"table",title:`New Lab Test: ${Xe.name}`,dataSource:"api:lab-tests",config:{filters:[{field:"id",operator:"equals",value:Pt.id}],columns:["name","price","description","default_parameters"]},position:{x:0,y:0,w:12,h:4}}]})}catch(Xe){Ce.push({action:"create_lab_test",status:"error",error:Xe.message}),Ve.push({role:"system",text:` Failed to create lab test: ${Xe.message}`})}if(ze.action==="search_distributor_purchase"){const Xe=ze.query,Je=await ce(`/api/distributors?search=${encodeURIComponent(Xe)}`);if(Je.ok){const wt=await Je.json();v(wt),b(Xe),Ce.push({action:"search_distributor_purchase",status:"success",count:wt.length,results:wt}),Ve.push({role:"system",text:` Found ${wt.length} distributors for "${Xe}"`})}else Ce.push({action:"search_distributor_purchase",status:"error",error:Je.statusText}),Ve.push({role:"system",text:" Failed to search distributors"})}if(ze.action==="set_distributor_purchase"){const Xe=ze.distributorId;let Je=T.find(wt=>wt.id===Xe);Je?(x(Je),b(Je.name),Ce.push({action:"set_distributor_purchase",status:"success",distributor:Je.name}),Ve.push({role:"system",text:` Selected distributor: ${Je.name}`})):(Ce.push({action:"set_distributor_purchase",status:"error",error:"Distributor not found in current search results. Please search first."}),Ve.push({role:"system",text:" Distributor not found. Please search first."}))}if(ze.action==="add_purchase_items"){const Xe=ze.items;let Je=0;Xe.forEach(wt=>{const dn={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:wt.name||"",composition:wt.composition||"",description:wt.description||"",mrp:wt.mrp||0,stock:wt.stock||0,pack:wt.pack||"",supplier:"",expiry_date:wt.expiry_date||"",rate:wt.rate||0,box_number:wt.box_number||"",gst:wt.gst||0,margin:wt.margin||0,discount:wt.discount||0,brand_name:wt.brand_name||"",batch:wt.batch||"",hsn_code:wt.hsn_code||"",mfg:wt.mfg||"",loose:wt.loose||0,last_updated:"",created_at:""};w(dn),Je++}),Ce.push({action:"add_purchase_items",status:"success",count:Je}),Ve.push({role:"system",text:` Added ${Je} items to purchase list`})}if(ze.action==="edit_purchase_items"){const Xe=ze.updates;let Je=0;const wt=I.current||[];Xe.forEach(Pt=>{if(Pt.serial_number){const dn=Pt.serial_number-1,Ee=wt[dn];Ee&&Ee.id?(_(Ee.id,{[Pt.field]:Pt.value}),Je++):(console.warn(`Row with serial number ${Pt.serial_number} not found.`),Ve.push({role:"system",text:` Row #${Pt.serial_number} not found.`}))}}),Ce.push({action:"edit_purchase_items",status:"success",count:Je}),Ve.push({role:"system",text:` Updated ${Je} items`})}if(ze.action==="open_new_case"){const{name:Xe,age:Je,gender:wt,complaint:Pt,phone:dn}=ze;try{const Ee=await ce("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Xe||"New Patient",age:Je||null,gender:wt||null,phone:dn||null,address:null})});if(!Ee.ok){const It=await Ee.json().catch(()=>({}));throw Ee.status===403&&((le=It.message)!=null&&le.includes("Patient limit"))?new Error(`Patient limit reached: ${It.message}`):new Error(It.message||"Failed to create patient")}const at=await Ee.json();if(!at||!at.id)throw new Error("Created patient has no ID");const Tt=await ce("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:at.id,complaint:Pt||"New Case"})});if(!Tt.ok)throw new Error("Failed to create queue entry");const Re=await Tt.json(),vt=at.id;vt&&(l.prefetchQuery({queryKey:Vt.patients.context(vt),queryFn:()=>ce(`/api/patients/${vt}/context`).then(It=>It.json()),staleTime:1e3*60*5}),l.prefetchQuery({queryKey:Vt.patientDebts.balance(vt),queryFn:()=>ce(`/api/patient-debts/${vt}/balance`).then(It=>It.json()),staleTime:1e3*60}),l.prefetchQuery({queryKey:Vt.queue.latest(vt),queryFn:()=>ce(`/api/queue/patient/${vt}/latest`).then(It=>It.json()),staleTime:1e3*5})),o(`/dashboard/edit-complaint/${Re.id}`,{state:{initialComplaint:Pt}}),Ce.push({action:"open_new_case",status:"success",patientId:at.id,queueId:Re.id}),Ve.push({role:"system",text:` Opened new case for ${Xe}`}),Z(!1),se.current=!1;return}catch(Ee){Ee.message.includes("Patient limit")&&(o("/start-clinic-subscription"),Ve.push({role:"system",text:" Patient limit reached. Redirecting to subscription."})),Ce.push({action:"open_new_case",status:"error",error:Ee.message}),Ve.push({role:"system",text:` Failed to open new case: ${Ee.message}`})}}if(ze.action==="manage_custom_columns"){const{entity:Xe,operation:Je,column:wt}=ze,Pt=je.custom_columns_config||{drugs:[],patients:[],lab_tests:[]};let Ee=[...Pt[Xe]||[]];if(Je==="add"){const Tt=wt.label.toLowerCase().replace(/[^a-z0-9]/g,"_");Ee.some(Re=>Re.key===Tt)||Ee.push({...wt,key:Tt})}else if(Je==="remove"){const Tt=wt.label.toLowerCase().replace(/[^a-z0-9]/g,"_");Ee=Ee.filter(Re=>Re.key!==Tt&&Re.label!==wt.label)}const at={...Pt,[Xe]:Ee};await ce("/api/clinics/settings",{method:"PUT",body:JSON.stringify({...je,custom_columns_config:at})}),n&&n(),Ce.push({action:"manage_custom_columns",status:"success",entity:Xe,operation:Je,column:wt.label}),Ve.push({role:"system",text:` ${Je==="add"?"Added":"Removed"} custom column '${wt.label}' for ${Xe}`})}if(ze.action==="create_custom_table"){const{name:Xe,description:Je,columns:wt}=ze,Pt=wt.map(at=>({...at,key:at.label.toLowerCase().replace(/[^a-z0-9]/g,"_")})),dn=await ce("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Xe,description:Je,columns:Pt})});if(!dn.ok)throw new Error("Failed to create table");const Ee=await dn.json();L(at=>[...at,Ee]),Ce.push({action:"create_custom_table",status:"success",tableId:Ee.id}),Ve.push({role:"system",text:` Created custom table: ${Xe}`})}if(ze.action==="add_table_row"){const{tableId:Xe,data:Je}=ze;if(!(await ce(`/api/custom-tables/${Xe}/records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Je})})).ok)throw new Error("Failed to add row");Ce.push({action:"add_table_row",status:"success"}),Ve.push({role:"system",text:" Added row to table"})}if(ze.action==="update_table_row"){const{recordId:Xe,data:Je}=ze;if(!(await ce(`/api/custom-tables/records/${Xe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:Je})})).ok)throw new Error("Failed to update row");Ce.push({action:"update_table_row",status:"success"}),Ve.push({role:"system",text:" Updated row"})}if(ze.action==="create_custom_dashboard"){const{name:Xe,description:Je,widgets:wt}=ze,Pt=await ce("/api/dashboards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Xe,description:Je,widgets:wt})});if(!Pt.ok)throw new Error("Failed to create dashboard");const dn=await Pt.json();Ce.push({action:"create_custom_dashboard",status:"success",id:dn.id}),Ve.push({role:"system",text:` Created dashboard: ${Xe}`})}ze.action==="render_temporary_dashboard"&&(Ie({title:ze.title,widgets:ze.widgets}),Ce.push({action:"render_temporary_dashboard",status:"success"}),Ve.push({role:"system",text:` Showing temporary dashboard: ${ze.title}`}))}catch(Xe){console.error("Action execution failed",ze,Xe),Ce.push({action:ze.action,status:"error",error:Xe.message}),Ve.push({role:"system",text:` Failed to execute action: ${ze.action}`})}}nt.length>0&&a&&setTimeout(()=>a(nt),500),Ve.length>0&&V(ze=>[...ze,...Ve]);const dt=[...X,...Ce],Ct=`Reflecting on previous actions: ${JSON.stringify(Ce)}. What is the next step? If done, call end_task.`,kt=[...ae,...Ve,{role:"model",text:we},{role:"user",text:Ct}];await de(Ct,kt,dt,void 0)}catch(je){console.error(je),V(Ge=>[...Ge,{role:"model",text:"Something went wrong."}]),Z(!1),se.current=!1}}},Q=j.useCallback(()=>{V([]),E(""),Z(!1),se.current=!1,G.current=0,K(null)},[]);return{chatQuery:O,setChatQuery:E,chatHistory:H,isProcessing:ne,handleSendMessage:re=>{const ae=re!==void 0?re:O;if(!ae.trim()&&!q)return;se.current=!0,Z(!0),G.current=0;const X={role:"user",text:ae};q&&(X.text+=" [Image Attached]"),V(ie=>[...ie,X]);const W=q||void 0;E(""),K(null),de(ae,H,[],W)},refreshChat:Q,stopGeneration:fe,selectedImage:q,handleImageSelect:me,clearImage:Y,temporaryDashboard:xe,closeTemporaryDashboard:Ne,saveTemporaryDashboard:ke}},ee=({className:e="",width:t,height:n,variant:r="rectangular",animate:a=!0,style:s={}})=>{const o={width:t,height:n,...s};return i.jsx("div",{className:`skeleton skeleton-${r} ${a?"skeleton-animate":""} ${e}`,style:o})};var KC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var o3;function Ghe(){return o3||(o3=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=a(s,r(l)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)t.call(s,l)&&s[l]&&(o=a(o,l));return o}function a(s,o){return o?s?s+" "+o:s+o:s}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(KC)),KC.exports}var Whe=Ghe();const sd=Bn(Whe);function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function Khe(e,t){if(_f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m9(e){var t=Khe(e,"string");return _f(t)=="symbol"?t:t+""}function bx(e,t,n){return(t=m9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l3(Object(n),!0).forEach(function(r){bx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yhe(e){if(Array.isArray(e))return e}function Qhe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function yP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function g9(e,t){if(e){if(typeof e=="string")return yP(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yP(e,t):void 0}}function Xhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _c(e,t){return Yhe(e)||Qhe(e,t)||g9(e,t)||Xhe()}function Jhe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function zc(e,t){if(e==null)return{};var n,r,a=Jhe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Zhe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function efe(e){var t=e.defaultInputValue,n=t===void 0?"":t,r=e.defaultMenuIsOpen,a=r===void 0?!1:r,s=e.defaultValue,o=s===void 0?null:s,l=e.inputValue,c=e.menuIsOpen,u=e.onChange,f=e.onInputChange,p=e.onMenuClose,y=e.onMenuOpen,v=e.value,x=zc(e,Zhe),b=j.useState(l!==void 0?l:n),w=_c(b,2),_=w[0],T=w[1],C=j.useState(c!==void 0?c:a),O=_c(C,2),E=O[0],P=O[1],I=j.useState(v!==void 0?v:o),F=_c(I,2),$=F[0],z=F[1],L=j.useCallback(function(se,G){typeof u=="function"&&u(se,G),z(se)},[u]),H=j.useCallback(function(se,G){var B;typeof f=="function"&&(B=f(se,G)),T(B!==void 0?B:se)},[f]),V=j.useCallback(function(){typeof y=="function"&&y(),P(!0)},[y]),ne=j.useCallback(function(){typeof p=="function"&&p(),P(!1)},[p]),Z=l!==void 0?l:_,q=c!==void 0?c:E,K=v!==void 0?v:$;return Yt(Yt({},x),{},{inputValue:Z,menuIsOpen:q,onChange:L,onInputChange:H,onMenuClose:ne,onMenuOpen:V,value:K})}function en(){return en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},en.apply(null,arguments)}function tfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m9(r.key),r)}}function nfe(e,t,n){return t&&c3(e.prototype,t),n&&c3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vP(e,t){return vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},vP(e,t)}function rfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vP(e,t)}function $w(e){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$w(e)}function y9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y9=function(){return!!e})()}function ife(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function afe(e,t){if(t&&(_f(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ife(e)}function sfe(e){var t=y9();return function(){var n,r=$w(e);if(t){var a=$w(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return afe(this,n)}}function ofe(e){if(Array.isArray(e))return yP(e)}function lfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GD(e){return ofe(e)||lfe(e)||g9(e)||cfe()}function ufe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function dfe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var hfe=function(){function e(n){var r=this;this._insertTag=function(a){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,s),r.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(dfe(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var s=ufe(a);try{s.insertRule(r,s.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var a;return(a=r.parentNode)==null?void 0:a.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Zi="-ms-",Bw="-moz-",Qn="-webkit-",v9="comm",WD="rule",KD="decl",ffe="@import",x9="@keyframes",pfe="@layer",mfe=Math.abs,mN=String.fromCharCode,gfe=Object.assign;function yfe(e,t){return Fi(e,0)^45?(((t<<2^Fi(e,0))<<2^Fi(e,1))<<2^Fi(e,2))<<2^Fi(e,3):0}function b9(e){return e.trim()}function vfe(e,t){return(e=t.exec(e))?e[0]:e}function Xn(e,t,n){return e.replace(t,n)}function xP(e,t){return e.indexOf(t)}function Fi(e,t){return e.charCodeAt(t)|0}function qx(e,t,n){return e.slice(t,n)}function jl(e){return e.length}function YD(e){return e.length}function Lj(e,t){return t.push(e),e}function xfe(e,t){return e.map(t).join("")}var gN=1,ug=1,j9=0,ts=0,hi=0,Vg="";function yN(e,t,n,r,a,s,o){return{value:e,root:t,parent:n,type:r,props:a,children:s,line:gN,column:ug,length:o,return:""}}function tx(e,t){return gfe(yN("",null,null,"",null,null,0),e,{length:-e.length},t)}function bfe(){return hi}function jfe(){return hi=ts>0?Fi(Vg,--ts):0,ug--,hi===10&&(ug=1,gN--),hi}function Ns(){return hi=ts<j9?Fi(Vg,ts++):0,ug++,hi===10&&(ug=1,gN++),hi}function El(){return Fi(Vg,ts)}function gw(){return ts}function Hb(e,t){return qx(Vg,e,t)}function Ux(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function w9(e){return gN=ug=1,j9=jl(Vg=e),ts=0,[]}function S9(e){return Vg="",e}function yw(e){return b9(Hb(ts-1,bP(e===91?e+2:e===40?e+1:e)))}function wfe(e){for(;(hi=El())&&hi<33;)Ns();return Ux(e)>2||Ux(hi)>3?"":" "}function Sfe(e,t){for(;--t&&Ns()&&!(hi<48||hi>102||hi>57&&hi<65||hi>70&&hi<97););return Hb(e,gw()+(t<6&&El()==32&&Ns()==32))}function bP(e){for(;Ns();)switch(hi){case e:return ts;case 34:case 39:e!==34&&e!==39&&bP(hi);break;case 40:e===41&&bP(e);break;case 92:Ns();break}return ts}function Nfe(e,t){for(;Ns()&&e+hi!==57;)if(e+hi===84&&El()===47)break;return"/*"+Hb(t,ts-1)+"*"+mN(e===47?e:Ns())}function _fe(e){for(;!Ux(El());)Ns();return Hb(e,ts)}function Cfe(e){return S9(vw("",null,null,null,[""],e=w9(e),0,[0],e))}function vw(e,t,n,r,a,s,o,l,c){for(var u=0,f=0,p=o,y=0,v=0,x=0,b=1,w=1,_=1,T=0,C="",O=a,E=s,P=r,I=C;w;)switch(x=T,T=Ns()){case 40:if(x!=108&&Fi(I,p-1)==58){xP(I+=Xn(yw(T),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=yw(T);break;case 9:case 10:case 13:case 32:I+=wfe(x);break;case 92:I+=Sfe(gw()-1,7);continue;case 47:switch(El()){case 42:case 47:Lj(Tfe(Nfe(Ns(),gw()),t,n),c);break;default:I+="/"}break;case 123*b:l[u++]=jl(I)*_;case 125*b:case 59:case 0:switch(T){case 0:case 125:w=0;case 59+f:_==-1&&(I=Xn(I,/\f/g,"")),v>0&&jl(I)-p&&Lj(v>32?d3(I+";",r,n,p-1):d3(Xn(I," ","")+";",r,n,p-2),c);break;case 59:I+=";";default:if(Lj(P=u3(I,t,n,u,f,a,l,C,O=[],E=[],p),s),T===123)if(f===0)vw(I,t,P,P,O,s,p,l,E);else switch(y===99&&Fi(I,3)===110?100:y){case 100:case 108:case 109:case 115:vw(e,P,P,r&&Lj(u3(e,P,P,0,0,a,l,C,a,O=[],p),E),a,E,p,l,r?O:E);break;default:vw(I,P,P,P,[""],E,0,l,E)}}u=f=v=0,b=_=1,C=I="",p=o;break;case 58:p=1+jl(I),v=x;default:if(b<1){if(T==123)--b;else if(T==125&&b++==0&&jfe()==125)continue}switch(I+=mN(T),T*b){case 38:_=f>0?1:(I+="\f",-1);break;case 44:l[u++]=(jl(I)-1)*_,_=1;break;case 64:El()===45&&(I+=yw(Ns())),y=El(),f=p=jl(C=I+=_fe(gw())),T++;break;case 45:x===45&&jl(I)==2&&(b=0)}}return s}function u3(e,t,n,r,a,s,o,l,c,u,f){for(var p=a-1,y=a===0?s:[""],v=YD(y),x=0,b=0,w=0;x<r;++x)for(var _=0,T=qx(e,p+1,p=mfe(b=o[x])),C=e;_<v;++_)(C=b9(b>0?y[_]+" "+T:Xn(T,/&\f/g,y[_])))&&(c[w++]=C);return yN(e,t,n,a===0?WD:l,c,u,f)}function Tfe(e,t,n){return yN(e,t,n,v9,mN(bfe()),qx(e,2,-2),0)}function d3(e,t,n,r){return yN(e,t,n,KD,qx(e,0,r),qx(e,r+1,-1),r)}function zm(e,t){for(var n="",r=YD(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function Efe(e,t,n,r){switch(e.type){case pfe:if(e.children.length)break;case ffe:case KD:return e.return=e.return||e.value;case v9:return"";case x9:return e.return=e.value+"{"+zm(e.children,r)+"}";case WD:e.value=e.props.join(",")}return jl(n=zm(e.children,r))?e.return=e.value+"{"+n+"}":""}function Afe(e){var t=YD(e);return function(n,r,a,s){for(var o="",l=0;l<t;l++)o+=e[l](n,r,a,s)||"";return o}}function kfe(e){return function(t){t.root||(t=t.return)&&e(t)}}function Pfe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Ofe=function(t,n,r){for(var a=0,s=0;a=s,s=El(),a===38&&s===12&&(n[r]=1),!Ux(s);)Ns();return Hb(t,ts)},Dfe=function(t,n){var r=-1,a=44;do switch(Ux(a)){case 0:a===38&&El()===12&&(n[r]=1),t[r]+=Ofe(ts-1,n,r);break;case 2:t[r]+=yw(a);break;case 4:if(a===44){t[++r]=El()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=mN(a)}while(a=Ns());return t},Mfe=function(t,n){return S9(Dfe(w9(t),n))},h3=new WeakMap,Ife=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,a=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!h3.get(r))&&!a){h3.set(t,!0);for(var s=[],o=Mfe(n,s),l=r.props,c=0,u=0;c<o.length;c++)for(var f=0;f<l.length;f++,u++)t.props[u]=s[c]?o[c].replace(/&\f/g,l[f]):l[f]+" "+o[c]}}},Rfe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function N9(e,t){switch(yfe(e,t)){case 5103:return Qn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Qn+e+Bw+e+Zi+e+e;case 6828:case 4268:return Qn+e+Zi+e+e;case 6165:return Qn+e+Zi+"flex-"+e+e;case 5187:return Qn+e+Xn(e,/(\w+).+(:[^]+)/,Qn+"box-$1$2"+Zi+"flex-$1$2")+e;case 5443:return Qn+e+Zi+"flex-item-"+Xn(e,/flex-|-self/,"")+e;case 4675:return Qn+e+Zi+"flex-line-pack"+Xn(e,/align-content|flex-|-self/,"")+e;case 5548:return Qn+e+Zi+Xn(e,"shrink","negative")+e;case 5292:return Qn+e+Zi+Xn(e,"basis","preferred-size")+e;case 6060:return Qn+"box-"+Xn(e,"-grow","")+Qn+e+Zi+Xn(e,"grow","positive")+e;case 4554:return Qn+Xn(e,/([^-])(transform)/g,"$1"+Qn+"$2")+e;case 6187:return Xn(Xn(Xn(e,/(zoom-|grab)/,Qn+"$1"),/(image-set)/,Qn+"$1"),e,"")+e;case 5495:case 3959:return Xn(e,/(image-set\([^]*)/,Qn+"$1$`$1");case 4968:return Xn(Xn(e,/(.+:)(flex-)?(.*)/,Qn+"box-pack:$3"+Zi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qn+e+e;case 4095:case 3583:case 4068:case 2532:return Xn(e,/(.+)-inline(.+)/,Qn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(jl(e)-1-t>6)switch(Fi(e,t+1)){case 109:if(Fi(e,t+4)!==45)break;case 102:return Xn(e,/(.+:)(.+)-([^]+)/,"$1"+Qn+"$2-$3$1"+Bw+(Fi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~xP(e,"stretch")?N9(Xn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Fi(e,t+1)!==115)break;case 6444:switch(Fi(e,jl(e)-3-(~xP(e,"!important")&&10))){case 107:return Xn(e,":",":"+Qn)+e;case 101:return Xn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Qn+(Fi(e,14)===45?"inline-":"")+"box$3$1"+Qn+"$2$3$1"+Zi+"$2box$3")+e}break;case 5936:switch(Fi(e,t+11)){case 114:return Qn+e+Zi+Xn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Qn+e+Zi+Xn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Qn+e+Zi+Xn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Qn+e+Zi+e+e}return e}var Lfe=function(t,n,r,a){if(t.length>-1&&!t.return)switch(t.type){case KD:t.return=N9(t.value,t.length);break;case x9:return zm([tx(t,{value:Xn(t.value,"@","@"+Qn)})],a);case WD:if(t.length)return xfe(t.props,function(s){switch(vfe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zm([tx(t,{props:[Xn(s,/:(read-\w+)/,":"+Bw+"$1")]})],a);case"::placeholder":return zm([tx(t,{props:[Xn(s,/:(plac\w+)/,":"+Qn+"input-$1")]}),tx(t,{props:[Xn(s,/:(plac\w+)/,":"+Bw+"$1")]}),tx(t,{props:[Xn(s,/:(plac\w+)/,Zi+"input-$1")]})],a)}return""})}},Ffe=[Lfe],$fe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var w=b.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var a=t.stylisPlugins||Ffe,s={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var w=b.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)s[w[_]]=!0;l.push(b)});var c,u=[Ife,Rfe];{var f,p=[Efe,kfe(function(b){f.insert(b)})],y=Afe(u.concat(a,p)),v=function(w){return zm(Cfe(w),y)};c=function(w,_,T,C){f=T,v(w?w+"{"+_.styles+"}":_.styles),C&&(x.inserted[_.name]=!0)}}var x={key:n,sheet:new hfe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:c};return x.sheet.hydrate(l),x},YC={exports:{}},tr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f3;function Bfe(){if(f3)return tr;f3=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,y=e?Symbol.for("react.suspense_list"):60120,v=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,b=e?Symbol.for("react.block"):60121,w=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,T=e?Symbol.for("react.scope"):60119;function C(E){if(typeof E=="object"&&E!==null){var P=E.$$typeof;switch(P){case t:switch(E=E.type,E){case c:case u:case r:case s:case a:case p:return E;default:switch(E=E&&E.$$typeof,E){case l:case f:case x:case v:case o:return E;default:return P}}case n:return P}}}function O(E){return C(E)===u}return tr.AsyncMode=c,tr.ConcurrentMode=u,tr.ContextConsumer=l,tr.ContextProvider=o,tr.Element=t,tr.ForwardRef=f,tr.Fragment=r,tr.Lazy=x,tr.Memo=v,tr.Portal=n,tr.Profiler=s,tr.StrictMode=a,tr.Suspense=p,tr.isAsyncMode=function(E){return O(E)||C(E)===c},tr.isConcurrentMode=O,tr.isContextConsumer=function(E){return C(E)===l},tr.isContextProvider=function(E){return C(E)===o},tr.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},tr.isForwardRef=function(E){return C(E)===f},tr.isFragment=function(E){return C(E)===r},tr.isLazy=function(E){return C(E)===x},tr.isMemo=function(E){return C(E)===v},tr.isPortal=function(E){return C(E)===n},tr.isProfiler=function(E){return C(E)===s},tr.isStrictMode=function(E){return C(E)===a},tr.isSuspense=function(E){return C(E)===p},tr.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===r||E===u||E===s||E===a||E===p||E===y||typeof E=="object"&&E!==null&&(E.$$typeof===x||E.$$typeof===v||E.$$typeof===o||E.$$typeof===l||E.$$typeof===f||E.$$typeof===w||E.$$typeof===_||E.$$typeof===T||E.$$typeof===b)},tr.typeOf=C,tr}var p3;function zfe(){return p3||(p3=1,YC.exports=Bfe()),YC.exports}var QC,m3;function qfe(){if(m3)return QC;m3=1;var e=zfe(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=r,s[e.Memo]=a;function o(x){return e.isMemo(x)?a:s[x.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,y=Object.prototype;function v(x,b,w){if(typeof b!="string"){if(y){var _=p(b);_&&_!==y&&v(x,_,w)}var T=c(b);u&&(T=T.concat(u(b)));for(var C=o(x),O=o(b),E=0;E<T.length;++E){var P=T[E];if(!n[P]&&!(w&&w[P])&&!(O&&O[P])&&!(C&&C[P])){var I=f(b,P);try{l(x,P,I)}catch{}}}}return x}return QC=v,QC}qfe();var Ufe=!0;function Vfe(e,t,n){var r="";return n.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):a&&(r+=a+" ")}),r}var _9=function(t,n,r){var a=t.key+"-"+n.name;(r===!1||Ufe===!1)&&t.registered[a]===void 0&&(t.registered[a]=n.styles)},Hfe=function(t,n,r){_9(t,n,r);var a=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+a:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function Gfe(e){for(var t=0,n,r=0,a=e.length;a>=4;++r,a-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Wfe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Kfe=/[A-Z]|^ms/g,Yfe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,C9=function(t){return t.charCodeAt(1)===45},g3=function(t){return t!=null&&typeof t!="boolean"},XC=Pfe(function(e){return C9(e)?e:e.replace(Kfe,"-$&").toLowerCase()}),y3=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Yfe,function(r,a,s){return wl={name:a,styles:s,next:wl},a})}return Wfe[t]!==1&&!C9(t)&&typeof n=="number"&&n!==0?n+"px":n};function Vx(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return wl={name:a.name,styles:a.styles,next:wl},a.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)wl={name:o.name,styles:o.styles,next:wl},o=o.next;var l=s.styles+";";return l}return Qfe(e,t,n)}case"function":{if(e!==void 0){var c=wl,u=n(e);return wl=c,Vx(e,t,u)}break}}var f=n;return f}function Qfe(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=Vx(e,t,n[a])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var l=o;g3(l)&&(r+=XC(s)+":"+y3(s,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&t==null)for(var c=0;c<o.length;c++)g3(o[c])&&(r+=XC(s)+":"+y3(s,o[c])+";");else{var u=Vx(e,t,o);switch(s){case"animation":case"animationName":{r+=XC(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var v3=/label:\s*([^\s;{]+)\s*(;|$)/g,wl;function T9(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,a="";wl=void 0;var s=e[0];if(s==null||s.raw===void 0)r=!1,a+=Vx(n,t,s);else{var o=s;a+=o[0]}for(var l=1;l<e.length;l++)if(a+=Vx(n,t,e[l]),r){var c=s;a+=c[l]}v3.lastIndex=0;for(var u="",f;(f=v3.exec(a))!==null;)u+="-"+f[1];var p=Gfe(a)+u;return{name:p,styles:a,next:wl}}var Xfe=function(t){return t()},Jfe=wI.useInsertionEffect?wI.useInsertionEffect:!1,Zfe=Jfe||Xfe,E9=j.createContext(typeof HTMLElement<"u"?$fe({key:"css"}):null);E9.Provider;var epe=function(t){return j.forwardRef(function(n,r){var a=j.useContext(E9);return t(n,a,r)})},tpe=j.createContext({}),QD={}.hasOwnProperty,jP="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",npe=function(t,n){var r={};for(var a in n)QD.call(n,a)&&(r[a]=n[a]);return r[jP]=t,r},rpe=function(t){var n=t.cache,r=t.serialized,a=t.isStringTag;return _9(n,r,a),Zfe(function(){return Hfe(n,r,a)}),null},ipe=epe(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var a=e[jP],s=[r],o="";typeof e.className=="string"?o=Vfe(t.registered,s,e.className):e.className!=null&&(o=e.className+" ");var l=T9(s,void 0,j.useContext(tpe));o+=t.key+"-"+l.name;var c={};for(var u in e)QD.call(e,u)&&u!=="css"&&u!==jP&&(c[u]=e[u]);return c.className=o,n&&(c.ref=n),j.createElement(j.Fragment,null,j.createElement(rpe,{cache:t,serialized:l,isStringTag:typeof a=="string"}),j.createElement(a,c))}),ape=ipe,qt=function(t,n){var r=arguments;if(n==null||!QD.call(n,"css"))return j.createElement.apply(void 0,r);var a=r.length,s=new Array(a);s[0]=ape,s[1]=npe(t,n);for(var o=2;o<a;o++)s[o]=r[o];return j.createElement.apply(null,s)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(qt||(qt={}));function XD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T9(t)}function spe(){var e=XD.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function ope(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const lpe=Math.min,cpe=Math.max,zw=Math.round,Fj=Math.floor,qw=e=>({x:e,y:e});function upe(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function vN(){return typeof window<"u"}function A9(e){return P9(e)?(e.nodeName||"").toLowerCase():"#document"}function Mc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function k9(e){var t;return(t=(P9(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function P9(e){return vN()?e instanceof Node||e instanceof Mc(e).Node:!1}function dpe(e){return vN()?e instanceof Element||e instanceof Mc(e).Element:!1}function JD(e){return vN()?e instanceof HTMLElement||e instanceof Mc(e).HTMLElement:!1}function x3(e){return!vN()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Mc(e).ShadowRoot}const hpe=new Set(["inline","contents"]);function O9(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=ZD(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!hpe.has(a)}function fpe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ppe=new Set(["html","body","#document"]);function mpe(e){return ppe.has(A9(e))}function ZD(e){return Mc(e).getComputedStyle(e)}function gpe(e){if(A9(e)==="html")return e;const t=e.assignedSlot||e.parentNode||x3(e)&&e.host||k9(e);return x3(t)?t.host:t}function D9(e){const t=gpe(e);return mpe(t)?e.ownerDocument?e.ownerDocument.body:e.body:JD(t)&&O9(t)?t:D9(t)}function Uw(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=D9(e),s=a===((r=e.ownerDocument)==null?void 0:r.body),o=Mc(a);if(s){const l=wP(o);return t.concat(o,o.visualViewport||[],O9(a)?a:[],l&&n?Uw(l):[])}return t.concat(a,Uw(a,[],n))}function wP(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ype(e){const t=ZD(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=JD(e),s=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=zw(n)!==s||zw(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function eM(e){return dpe(e)?e:e.contextElement}function b3(e){const t=eM(e);if(!JD(t))return qw(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:s}=ype(t);let o=(s?zw(n.width):n.width)/r,l=(s?zw(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const vpe=qw(0);function xpe(e){const t=Mc(e);return!fpe()||!t.visualViewport?vpe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bpe(e,t,n){return!1}function j3(e,t,n,r){t===void 0&&(t=!1);const a=e.getBoundingClientRect(),s=eM(e);let o=qw(1);t&&(o=b3(e));const l=bpe()?xpe(s):qw(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,f=a.width/o.x,p=a.height/o.y;if(s){const y=Mc(s),v=r;let x=y,b=wP(x);for(;b&&r&&v!==x;){const w=b3(b),_=b.getBoundingClientRect(),T=ZD(b),C=_.left+(b.clientLeft+parseFloat(T.paddingLeft))*w.x,O=_.top+(b.clientTop+parseFloat(T.paddingTop))*w.y;c*=w.x,u*=w.y,f*=w.x,p*=w.y,c+=C,u+=O,x=Mc(b),b=wP(x)}}return upe({width:f,height:p,x:c,y:u})}function M9(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function jpe(e,t){let n=null,r;const a=k9(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:f,top:p,width:y,height:v}=u;if(l||t(),!y||!v)return;const x=Fj(p),b=Fj(a.clientWidth-(f+y)),w=Fj(a.clientHeight-(p+v)),_=Fj(f),C={rootMargin:-x+"px "+-b+"px "+-w+"px "+-_+"px",threshold:cpe(0,lpe(1,c))||1};let O=!0;function E(P){const I=P[0].intersectionRatio;if(I!==c){if(!O)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!M9(u,e.getBoundingClientRect())&&o(),O=!1}try{n=new IntersectionObserver(E,{...C,root:a.ownerDocument})}catch{n=new IntersectionObserver(E,C)}n.observe(e)}return o(!0),s}function wpe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=eM(e),f=a||s?[...u?Uw(u):[],...Uw(t)]:[];f.forEach(_=>{a&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const p=u&&l?jpe(u,n):null;let y=-1,v=null;o&&(v=new ResizeObserver(_=>{let[T]=_;T&&T.target===u&&v&&(v.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var C;(C=v)==null||C.observe(t)})),n()}),u&&!c&&v.observe(u),v.observe(t));let x,b=c?j3(e):null;c&&w();function w(){const _=j3(e);b&&!M9(b,_)&&n(),b=_,x=requestAnimationFrame(w)}return n(),()=>{var _;f.forEach(T=>{a&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),p==null||p(),(_=v)==null||_.disconnect(),v=null,c&&cancelAnimationFrame(x)}}var SP=j.useLayoutEffect,Spe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Vw=function(){};function Npe(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function _pe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var s=[].concat(r);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(Npe(e,o)));return s.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var w3=function(t){return Mpe(t)?t.filter(Boolean):_f(t)==="object"&&t!==null?[t]:[]},I9=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var n=zc(t,Spe);return Yt({},n)},Kr=function(t,n,r){var a=t.cx,s=t.getStyles,o=t.getClassNames,l=t.className;return{css:s(n,t),className:a(r??{},o(n,t),l)}};function xN(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Cpe(e){return xN(e)?window.innerHeight:e.clientHeight}function R9(e){return xN(e)?window.pageYOffset:e.scrollTop}function Hw(e,t){if(xN(e)){window.scrollTo(0,t);return}e.scrollTop=t}function Tpe(e){var t=getComputedStyle(e),n=t.position==="absolute",r=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var a=e;a=a.parentElement;)if(t=getComputedStyle(a),!(n&&t.position==="static")&&r.test(t.overflow+t.overflowY+t.overflowX))return a;return document.documentElement}function Epe(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}function $j(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Vw,a=R9(e),s=t-a,o=10,l=0;function c(){l+=o;var u=Epe(l,a,s,n);Hw(e,u),l<n?window.requestAnimationFrame(c):r(e)}c()}function S3(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=t.offsetHeight/3;r.bottom+a>n.bottom?Hw(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):r.top-a<n.top&&Hw(e,Math.max(t.offsetTop-a,0))}function Ape(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function N3(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function kpe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var L9=!1,Ppe={get passive(){return L9=!0}},Bj=typeof window<"u"?window:{};Bj.addEventListener&&Bj.removeEventListener&&(Bj.addEventListener("p",Vw,Ppe),Bj.removeEventListener("p",Vw,!1));var Ope=L9;function Dpe(e){return e!=null}function Mpe(e){return Array.isArray(e)}function zj(e,t,n){return e?t:n}var Ipe=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var s=Object.entries(t).filter(function(o){var l=_c(o,1),c=l[0];return!r.includes(c)});return s.reduce(function(o,l){var c=_c(l,2),u=c[0],f=c[1];return o[u]=f,o},{})},Rpe=["children","innerProps"],Lpe=["children","innerProps"];function Fpe(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,a=e.placement,s=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=Tpe(n),u={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return u;var f=c.getBoundingClientRect(),p=f.height,y=n.getBoundingClientRect(),v=y.bottom,x=y.height,b=y.top,w=n.offsetParent.getBoundingClientRect(),_=w.top,T=o?window.innerHeight:Cpe(c),C=R9(c),O=parseInt(getComputedStyle(n).marginBottom,10),E=parseInt(getComputedStyle(n).marginTop,10),P=_-E,I=T-b,F=P+C,$=p-C-b,z=v-T+C+O,L=C+b-E,H=160;switch(a){case"auto":case"bottom":if(I>=x)return{placement:"bottom",maxHeight:t};if($>=x&&!o)return s&&$j(c,z,H),{placement:"bottom",maxHeight:t};if(!o&&$>=r||o&&I>=r){s&&$j(c,z,H);var V=o?I-O:$-O;return{placement:"bottom",maxHeight:V}}if(a==="auto"||o){var ne=t,Z=o?P:F;return Z>=r&&(ne=Math.min(Z-O-l,t)),{placement:"top",maxHeight:ne}}if(a==="bottom")return s&&Hw(c,z),{placement:"bottom",maxHeight:t};break;case"top":if(P>=x)return{placement:"top",maxHeight:t};if(F>=x&&!o)return s&&$j(c,L,H),{placement:"top",maxHeight:t};if(!o&&F>=r||o&&P>=r){var q=t;return(!o&&F>=r||o&&P>=r)&&(q=o?P-E:F-E),s&&$j(c,L,H),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}function $pe(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var F9=function(t){return t==="auto"?"bottom":t},Bpe=function(t,n){var r,a=t.placement,s=t.theme,o=s.borderRadius,l=s.spacing,c=s.colors;return Yt((r={label:"menu"},bx(r,$pe(a),"100%"),bx(r,"position","absolute"),bx(r,"width","100%"),bx(r,"zIndex",1),r),n?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},$9=j.createContext(null),zpe=function(t){var n=t.children,r=t.minMenuHeight,a=t.maxMenuHeight,s=t.menuPlacement,o=t.menuPosition,l=t.menuShouldScrollIntoView,c=t.theme,u=j.useContext($9)||{},f=u.setPortalPlacement,p=j.useRef(null),y=j.useState(a),v=_c(y,2),x=v[0],b=v[1],w=j.useState(null),_=_c(w,2),T=_[0],C=_[1],O=c.spacing.controlHeight;return SP(function(){var E=p.current;if(E){var P=o==="fixed",I=l&&!P,F=Fpe({maxHeight:a,menuEl:E,minHeight:r,placement:s,shouldScroll:I,isFixedPosition:P,controlHeight:O});b(F.maxHeight),C(F.placement),f==null||f(F.placement)}},[a,s,o,l,r,f,O]),n({ref:p,placerProps:Yt(Yt({},t),{},{placement:T||F9(s),maxHeight:x})})},qpe=function(t){var n=t.children,r=t.innerRef,a=t.innerProps;return qt("div",en({},Kr(t,"menu",{menu:!0}),{ref:r},a),n)},Upe=qpe,Vpe=function(t,n){var r=t.maxHeight,a=t.theme.spacing.baseUnit;return Yt({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:a,paddingTop:a})},Hpe=function(t){var n=t.children,r=t.innerProps,a=t.innerRef,s=t.isMulti;return qt("div",en({},Kr(t,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:a},r),n)},B9=function(t,n){var r=t.theme,a=r.spacing.baseUnit,s=r.colors;return Yt({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},Gpe=B9,Wpe=B9,Kpe=function(t){var n=t.children,r=n===void 0?"No options":n,a=t.innerProps,s=zc(t,Rpe);return qt("div",en({},Kr(Yt(Yt({},s),{},{children:r,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),r)},Ype=function(t){var n=t.children,r=n===void 0?"Loading...":n,a=t.innerProps,s=zc(t,Lpe);return qt("div",en({},Kr(Yt(Yt({},s),{},{children:r,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),r)},Qpe=function(t){var n=t.rect,r=t.offset,a=t.position;return{left:n.left,position:a,top:r,width:n.width,zIndex:1}},Xpe=function(t){var n=t.appendTo,r=t.children,a=t.controlElement,s=t.innerProps,o=t.menuPlacement,l=t.menuPosition,c=j.useRef(null),u=j.useRef(null),f=j.useState(F9(o)),p=_c(f,2),y=p[0],v=p[1],x=j.useMemo(function(){return{setPortalPlacement:v}},[]),b=j.useState(null),w=_c(b,2),_=w[0],T=w[1],C=j.useCallback(function(){if(a){var I=Ape(a),F=l==="fixed"?0:window.pageYOffset,$=I[y]+F;($!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&T({offset:$,rect:I})}},[a,l,y,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);SP(function(){C()},[C]);var O=j.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),a&&c.current&&(u.current=wpe(a,c.current,C,{elementResize:"ResizeObserver"in window}))},[a,C]);SP(function(){O()},[O]);var E=j.useCallback(function(I){c.current=I,O()},[O]);if(!n&&l!=="fixed"||!_)return null;var P=qt("div",en({ref:E},Kr(Yt(Yt({},t),{},{offset:_.offset,position:l,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),r);return qt($9.Provider,{value:x},n?RQ.createPortal(P,n):P)},Jpe=function(t){var n=t.isDisabled,r=t.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},Zpe=function(t){var n=t.children,r=t.innerProps,a=t.isDisabled,s=t.isRtl;return qt("div",en({},Kr(t,"container",{"--is-disabled":a,"--is-rtl":s}),r),n)},eme=function(t,n){var r=t.theme.spacing,a=t.isMulti,s=t.hasValue,o=t.selectProps.controlShouldRenderValue;return Yt({alignItems:"center",display:a&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},tme=function(t){var n=t.children,r=t.innerProps,a=t.isMulti,s=t.hasValue;return qt("div",en({},Kr(t,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":s}),r),n)},nme=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},rme=function(t){var n=t.children,r=t.innerProps;return qt("div",en({},Kr(t,"indicatorsContainer",{indicators:!0}),r),n)},_3,ime=["size"],ame=["innerProps","isRtl","size"],sme={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},z9=function(t){var n=t.size,r=zc(t,ime);return qt("svg",en({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:sme},r))},tM=function(t){return qt(z9,en({size:20},t),qt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},q9=function(t){return qt(z9,en({size:20},t),qt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},U9=function(t,n){var r=t.isFocused,a=t.theme,s=a.spacing.baseUnit,o=a.colors;return Yt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?o.neutral60:o.neutral20,padding:s*2,":hover":{color:r?o.neutral80:o.neutral40}})},ome=U9,lme=function(t){var n=t.children,r=t.innerProps;return qt("div",en({},Kr(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||qt(q9,null))},cme=U9,ume=function(t){var n=t.children,r=t.innerProps;return qt("div",en({},Kr(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||qt(tM,null))},dme=function(t,n){var r=t.isDisabled,a=t.theme,s=a.spacing.baseUnit,o=a.colors;return Yt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},hme=function(t){var n=t.innerProps;return qt("span",en({},n,Kr(t,"indicatorSeparator",{"indicator-separator":!0})))},fme=spe(_3||(_3=ope([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),pme=function(t,n){var r=t.isFocused,a=t.size,s=t.theme,o=s.colors,l=s.spacing.baseUnit;return Yt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?o.neutral60:o.neutral20,padding:l*2})},JC=function(t){var n=t.delay,r=t.offset;return qt("span",{css:XD({animation:"".concat(fme," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},mme=function(t){var n=t.innerProps,r=t.isRtl,a=t.size,s=a===void 0?4:a,o=zc(t,ame);return qt("div",en({},Kr(Yt(Yt({},o),{},{innerProps:n,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),qt(JC,{delay:0,offset:r}),qt(JC,{delay:160,offset:!0}),qt(JC,{delay:320,offset:!r}))},gme=function(t,n){var r=t.isDisabled,a=t.isFocused,s=t.theme,o=s.colors,l=s.borderRadius,c=s.spacing;return Yt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?o.neutral5:o.neutral0,borderColor:r?o.neutral10:a?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:a?o.primary:o.neutral30}})},yme=function(t){var n=t.children,r=t.isDisabled,a=t.isFocused,s=t.innerRef,o=t.innerProps,l=t.menuIsOpen;return qt("div",en({ref:s},Kr(t,"control",{control:!0,"control--is-disabled":r,"control--is-focused":a,"control--menu-is-open":l}),o,{"aria-disabled":r||void 0}),n)},vme=yme,xme=["data"],bme=function(t,n){var r=t.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},jme=function(t){var n=t.children,r=t.cx,a=t.getStyles,s=t.getClassNames,o=t.Heading,l=t.headingProps,c=t.innerProps,u=t.label,f=t.theme,p=t.selectProps;return qt("div",en({},Kr(t,"group",{group:!0}),c),qt(o,en({},l,{selectProps:p,theme:f,getStyles:a,getClassNames:s,cx:r}),u),qt("div",null,n))},wme=function(t,n){var r=t.theme,a=r.colors,s=r.spacing;return Yt({label:"group",cursor:"default",display:"block"},n?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},Sme=function(t){var n=I9(t);n.data;var r=zc(n,xme);return qt("div",en({},Kr(t,"groupHeading",{"group-heading":!0}),r))},Nme=jme,_me=["innerRef","isDisabled","isHidden","inputClassName"],Cme=function(t,n){var r=t.isDisabled,a=t.value,s=t.theme,o=s.spacing,l=s.colors;return Yt(Yt({visibility:r?"hidden":"visible",transform:a?"translateZ(0)":""},Tme),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},V9={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Tme={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Yt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},V9)},Eme=function(t){return Yt({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},V9)},Ame=function(t){var n=t.cx,r=t.value,a=I9(t),s=a.innerRef,o=a.isDisabled,l=a.isHidden,c=a.inputClassName,u=zc(a,_me);return qt("div",en({},Kr(t,"input",{"input-container":!0}),{"data-value":r||""}),qt("input",en({className:n({input:!0},c),ref:s,style:Eme(l),disabled:o},u)))},kme=Ame,Pme=function(t,n){var r=t.theme,a=r.spacing,s=r.borderRadius,o=r.colors;return Yt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:a.baseUnit/2})},Ome=function(t,n){var r=t.theme,a=r.borderRadius,s=r.colors,o=t.cropWithEllipsis;return Yt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:a/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Dme=function(t,n){var r=t.theme,a=r.spacing,s=r.borderRadius,o=r.colors,l=t.isFocused;return Yt({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},H9=function(t){var n=t.children,r=t.innerProps;return qt("div",r,n)},Mme=H9,Ime=H9;function Rme(e){var t=e.children,n=e.innerProps;return qt("div",en({role:"button"},n),t||qt(tM,{size:14}))}var Lme=function(t){var n=t.children,r=t.components,a=t.data,s=t.innerProps,o=t.isDisabled,l=t.removeProps,c=t.selectProps,u=r.Container,f=r.Label,p=r.Remove;return qt(u,{data:a,innerProps:Yt(Yt({},Kr(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:c},qt(f,{data:a,innerProps:Yt({},Kr(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},n),qt(p,{data:a,innerProps:Yt(Yt({},Kr(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:c}))},Fme=Lme,$me=function(t,n){var r=t.isDisabled,a=t.isFocused,s=t.isSelected,o=t.theme,l=o.spacing,c=o.colors;return Yt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?c.primary:a?c.primary25:"transparent",color:r?c.neutral20:s?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:s?c.primary:c.primary50}})},Bme=function(t){var n=t.children,r=t.isDisabled,a=t.isFocused,s=t.isSelected,o=t.innerRef,l=t.innerProps;return qt("div",en({},Kr(t,"option",{option:!0,"option--is-disabled":r,"option--is-focused":a,"option--is-selected":s}),{ref:o,"aria-disabled":r},l),n)},zme=Bme,qme=function(t,n){var r=t.theme,a=r.spacing,s=r.colors;return Yt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},Ume=function(t){var n=t.children,r=t.innerProps;return qt("div",en({},Kr(t,"placeholder",{placeholder:!0}),r),n)},Vme=Ume,Hme=function(t,n){var r=t.isDisabled,a=t.theme,s=a.spacing,o=a.colors;return Yt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Gme=function(t){var n=t.children,r=t.isDisabled,a=t.innerProps;return qt("div",en({},Kr(t,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),a),n)},Wme=Gme,Kme={ClearIndicator:ume,Control:vme,DropdownIndicator:lme,DownChevron:q9,CrossIcon:tM,Group:Nme,GroupHeading:Sme,IndicatorsContainer:rme,IndicatorSeparator:hme,Input:kme,LoadingIndicator:mme,Menu:Upe,MenuList:Hpe,MenuPortal:Xpe,LoadingMessage:Ype,NoOptionsMessage:Kpe,MultiValue:Fme,MultiValueContainer:Mme,MultiValueLabel:Ime,MultiValueRemove:Rme,Option:zme,Placeholder:Vme,SelectContainer:Zpe,SingleValue:Wme,ValueContainer:tme},Yme=function(t){return Yt(Yt({},Kme),t.components)},C3=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Qme(e,t){return!!(e===t||C3(e)&&C3(t))}function Xme(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Qme(e[n],t[n]))return!1;return!0}function Jme(e,t){t===void 0&&(t=Xme);var n=null;function r(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;var o=e.apply(this,a);return n={lastResult:o,lastArgs:a,lastThis:this},o}return r.clear=function(){n=null},r}var Zme={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ege=function(t){return qt("span",en({css:Zme},t))},T3=ege,tge={guidance:function(t){var n=t.isSearchable,r=t.isMulti,a=t.tabSelectsValue,s=t.context,o=t.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(t["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var n=t.action,r=t.label,a=r===void 0?"":r,s=t.labels,o=t.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(t){var n=t.context,r=t.focused,a=t.options,s=t.label,o=s===void 0?"":s,l=t.selectValue,c=t.isDisabled,u=t.isSelected,f=t.isAppleDevice,p=function(b,w){return b&&b.length?"".concat(b.indexOf(w)+1," of ").concat(b.length):""};if(n==="value"&&l)return"value ".concat(o," focused, ").concat(p(l,r),".");if(n==="menu"&&f){var y=c?" disabled":"",v="".concat(u?" selected":"").concat(y);return"".concat(o).concat(v,", ").concat(p(a,r),".")}return""},onFilter:function(t){var n=t.inputValue,r=t.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},nge=function(t){var n=t.ariaSelection,r=t.focusedOption,a=t.focusedValue,s=t.focusableOptions,o=t.isFocused,l=t.selectValue,c=t.selectProps,u=t.id,f=t.isAppleDevice,p=c.ariaLiveMessages,y=c.getOptionLabel,v=c.inputValue,x=c.isMulti,b=c.isOptionDisabled,w=c.isSearchable,_=c.menuIsOpen,T=c.options,C=c.screenReaderStatus,O=c.tabSelectsValue,E=c.isLoading,P=c["aria-label"],I=c["aria-live"],F=j.useMemo(function(){return Yt(Yt({},tge),p||{})},[p]),$=j.useMemo(function(){var Z="";if(n&&F.onChange){var q=n.option,K=n.options,se=n.removedValue,G=n.removedValues,B=n.value,fe=function(de){return Array.isArray(de)?null:de},me=se||q||fe(B),Y=me?y(me):"",xe=K||G||void 0,Ie=xe?xe.map(y):[],Ne=Yt({isDisabled:me&&b(me,l),label:Y,labels:Ie},n);Z=F.onChange(Ne)}return Z},[n,F,b,l,y]),z=j.useMemo(function(){var Z="",q=r||a,K=!!(r&&l&&l.includes(r));if(q&&F.onFocus){var se={focused:q,label:y(q),isDisabled:b(q,l),isSelected:K,options:s,context:q===r?"menu":"value",selectValue:l,isAppleDevice:f};Z=F.onFocus(se)}return Z},[r,a,y,b,F,s,l,f]),L=j.useMemo(function(){var Z="";if(_&&T.length&&!E&&F.onFilter){var q=C({count:s.length});Z=F.onFilter({inputValue:v,resultsMessage:q})}return Z},[s,v,_,F,T,C,E]),H=(n==null?void 0:n.action)==="initial-input-focus",V=j.useMemo(function(){var Z="";if(F.guidance){var q=a?"value":_?"menu":"input";Z=F.guidance({"aria-label":P,context:q,isDisabled:r&&b(r,l),isMulti:x,isSearchable:w,tabSelectsValue:O,isInitialFocus:H})}return Z},[P,r,a,x,b,w,_,F,l,O,H]),ne=qt(j.Fragment,null,qt("span",{id:"aria-selection"},$),qt("span",{id:"aria-focused"},z),qt("span",{id:"aria-results"},L),qt("span",{id:"aria-guidance"},V));return qt(j.Fragment,null,qt(T3,{id:u},H&&ne),qt(T3,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!H&&ne))},rge=nge,NP=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],ige=new RegExp("["+NP.map(function(e){return e.letters}).join("")+"]","g"),G9={};for(var ZC=0;ZC<NP.length;ZC++)for(var e2=NP[ZC],t2=0;t2<e2.letters.length;t2++)G9[e2.letters[t2]]=e2.base;var W9=function(t){return t.replace(ige,function(n){return G9[n]})},age=Jme(W9),E3=function(t){return t.replace(/^\s+|\s+$/g,"")},sge=function(t){return"".concat(t.label," ").concat(t.value)},oge=function(t){return function(n,r){if(n.data.__isNew__)return!0;var a=Yt({ignoreCase:!0,ignoreAccents:!0,stringify:sge,trim:!0,matchFrom:"any"},t),s=a.ignoreCase,o=a.ignoreAccents,l=a.stringify,c=a.trim,u=a.matchFrom,f=c?E3(r):r,p=c?E3(l(n)):l(n);return s&&(f=f.toLowerCase(),p=p.toLowerCase()),o&&(f=age(f),p=W9(p)),u==="start"?p.substr(0,f.length)===f:p.indexOf(f)>-1}},lge=["innerRef"];function cge(e){var t=e.innerRef,n=zc(e,lge),r=Ipe(n,"onExited","in","enter","exit","appear");return qt("input",en({ref:t},r,{css:XD({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var uge=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function dge(e){var t=e.isEnabled,n=e.onBottomArrive,r=e.onBottomLeave,a=e.onTopArrive,s=e.onTopLeave,o=j.useRef(!1),l=j.useRef(!1),c=j.useRef(0),u=j.useRef(null),f=j.useCallback(function(w,_){if(u.current!==null){var T=u.current,C=T.scrollTop,O=T.scrollHeight,E=T.clientHeight,P=u.current,I=_>0,F=O-E-C,$=!1;F>_&&o.current&&(r&&r(w),o.current=!1),I&&l.current&&(s&&s(w),l.current=!1),I&&_>F?(n&&!o.current&&n(w),P.scrollTop=O,$=!0,o.current=!0):!I&&-_>C&&(a&&!l.current&&a(w),P.scrollTop=0,$=!0,l.current=!0),$&&uge(w)}},[n,r,a,s]),p=j.useCallback(function(w){f(w,w.deltaY)},[f]),y=j.useCallback(function(w){c.current=w.changedTouches[0].clientY},[]),v=j.useCallback(function(w){var _=c.current-w.changedTouches[0].clientY;f(w,_)},[f]),x=j.useCallback(function(w){if(w){var _=Ope?{passive:!1}:!1;w.addEventListener("wheel",p,_),w.addEventListener("touchstart",y,_),w.addEventListener("touchmove",v,_)}},[v,y,p]),b=j.useCallback(function(w){w&&(w.removeEventListener("wheel",p,!1),w.removeEventListener("touchstart",y,!1),w.removeEventListener("touchmove",v,!1))},[v,y,p]);return j.useEffect(function(){if(t){var w=u.current;return x(w),function(){b(w)}}},[t,x,b]),function(w){u.current=w}}var A3=["boxSizing","height","overflow","paddingRight","position"],k3={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function P3(e){e.cancelable&&e.preventDefault()}function O3(e){e.stopPropagation()}function D3(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;e===0?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function M3(){return"ontouchstart"in window||navigator.maxTouchPoints}var I3=!!(typeof window<"u"&&window.document&&window.document.createElement),nx=0,bm={capture:!1,passive:!1};function hge(e){var t=e.isEnabled,n=e.accountForScrollbars,r=n===void 0?!0:n,a=j.useRef({}),s=j.useRef(null),o=j.useCallback(function(c){if(I3){var u=document.body,f=u&&u.style;if(r&&A3.forEach(function(x){var b=f&&f[x];a.current[x]=b}),r&&nx<1){var p=parseInt(a.current.paddingRight,10)||0,y=document.body?document.body.clientWidth:0,v=window.innerWidth-y+p||0;Object.keys(k3).forEach(function(x){var b=k3[x];f&&(f[x]=b)}),f&&(f.paddingRight="".concat(v,"px"))}u&&M3()&&(u.addEventListener("touchmove",P3,bm),c&&(c.addEventListener("touchstart",D3,bm),c.addEventListener("touchmove",O3,bm))),nx+=1}},[r]),l=j.useCallback(function(c){if(I3){var u=document.body,f=u&&u.style;nx=Math.max(nx-1,0),r&&nx<1&&A3.forEach(function(p){var y=a.current[p];f&&(f[p]=y)}),u&&M3()&&(u.removeEventListener("touchmove",P3,bm),c&&(c.removeEventListener("touchstart",D3,bm),c.removeEventListener("touchmove",O3,bm)))}},[r]);return j.useEffect(function(){if(t){var c=s.current;return o(c),function(){l(c)}}},[t,o,l]),function(c){s.current=c}}var fge=function(t){var n=t.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},pge={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function mge(e){var t=e.children,n=e.lockEnabled,r=e.captureEnabled,a=r===void 0?!0:r,s=e.onBottomArrive,o=e.onBottomLeave,l=e.onTopArrive,c=e.onTopLeave,u=dge({isEnabled:a,onBottomArrive:s,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),f=hge({isEnabled:n}),p=function(v){u(v),f(v)};return qt(j.Fragment,null,n&&qt("div",{onClick:fge,css:pge}),t(p))}var gge={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},yge=function(t){var n=t.name,r=t.onFocus;return qt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:gge,value:"",onChange:function(){}})},vge=yge;function nM(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function xge(){return nM(/^iPhone/i)}function K9(){return nM(/^Mac/i)}function bge(){return nM(/^iPad/i)||K9()&&navigator.maxTouchPoints>1}function jge(){return xge()||bge()}function wge(){return K9()||jge()}var Sge=function(t){return t.label},Nge=function(t){return t.label},_ge=function(t){return t.value},Cge=function(t){return!!t.isDisabled},Tge={clearIndicator:cme,container:Jpe,control:gme,dropdownIndicator:ome,group:bme,groupHeading:wme,indicatorsContainer:nme,indicatorSeparator:dme,input:Cme,loadingIndicator:pme,loadingMessage:Wpe,menu:Bpe,menuList:Vpe,menuPortal:Qpe,multiValue:Pme,multiValueLabel:Ome,multiValueRemove:Dme,noOptionsMessage:Gpe,option:$me,placeholder:qme,singleValue:Hme,valueContainer:eme},Ege={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Age=4,Y9=4,kge=38,Pge=Y9*2,Oge={baseUnit:Y9,controlHeight:kge,menuGutter:Pge},n2={borderRadius:Age,colors:Ege,spacing:Oge},Dge={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:N3(),captureMenuScroll:!N3(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:oge(),formatGroupLabel:Sge,getOptionLabel:Nge,getOptionValue:_ge,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Cge,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!kpe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var n=t.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function R3(e,t,n,r){var a=J9(e,t,n),s=Z9(e,t,n),o=X9(e,t),l=Gw(e,t);return{type:"option",data:t,isDisabled:a,isSelected:s,label:o,value:l,index:r}}function xw(e,t){return e.options.map(function(n,r){if("options"in n){var a=n.options.map(function(o,l){return R3(e,o,t,l)}).filter(function(o){return F3(e,o)});return a.length>0?{type:"group",data:n,options:a,index:r}:void 0}var s=R3(e,n,t,r);return F3(e,s)?s:void 0}).filter(Dpe)}function Q9(e){return e.reduce(function(t,n){return n.type==="group"?t.push.apply(t,GD(n.options.map(function(r){return r.data}))):t.push(n.data),t},[])}function L3(e,t){return e.reduce(function(n,r){return r.type==="group"?n.push.apply(n,GD(r.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(r.index,"-").concat(a.index)}}))):n.push({data:r.data,id:"".concat(t,"-").concat(r.index)}),n},[])}function Mge(e,t){return Q9(xw(e,t))}function F3(e,t){var n=e.inputValue,r=n===void 0?"":n,a=t.data,s=t.isSelected,o=t.label,l=t.value;return(!t7(e)||!s)&&e7(e,{label:o,value:l,data:a},r)}function Ige(e,t){var n=e.focusedValue,r=e.selectValue,a=r.indexOf(n);if(a>-1){var s=t.indexOf(n);if(s>-1)return n;if(a<t.length)return t[a]}return null}function Rge(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}var r2=function(t,n){var r,a=(r=t.find(function(s){return s.data===n}))===null||r===void 0?void 0:r.id;return a||null},X9=function(t,n){return t.getOptionLabel(n)},Gw=function(t,n){return t.getOptionValue(n)};function J9(e,t,n){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,n):!1}function Z9(e,t,n){if(n.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,n);var r=Gw(e,t);return n.some(function(a){return Gw(e,a)===r})}function e7(e,t,n){return e.filterOption?e.filterOption(t,n):!0}var t7=function(t){var n=t.hideSelectedOptions,r=t.isMulti;return n===void 0?r:n},Lge=1,n7=function(e){rfe(n,e);var t=sfe(n);function n(r){var a;if(tfe(this,n),a=t.call(this,r),a.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.controlRef=null,a.getControlRef=function(c){a.controlRef=c},a.focusedOptionRef=null,a.getFocusedOptionRef=function(c){a.focusedOptionRef=c},a.menuListRef=null,a.getMenuListRef=function(c){a.menuListRef=c},a.inputRef=null,a.getInputRef=function(c){a.inputRef=c},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(c,u){var f=a.props,p=f.onChange,y=f.name;u.name=y,a.ariaOnChange(c,u),p(c,u)},a.setValue=function(c,u,f){var p=a.props,y=p.closeMenuOnSelect,v=p.isMulti,x=p.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:x}),y&&(a.setState({inputIsHiddenAfterUpdate:!v}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(c,{action:u,option:f})},a.selectOption=function(c){var u=a.props,f=u.blurInputOnSelect,p=u.isMulti,y=u.name,v=a.state.selectValue,x=p&&a.isOptionSelected(c,v),b=a.isOptionDisabled(c,v);if(x){var w=a.getOptionValue(c);a.setValue(v.filter(function(_){return a.getOptionValue(_)!==w}),"deselect-option",c)}else if(!b)p?a.setValue([].concat(GD(v),[c]),"select-option",c):a.setValue(c,"select-option");else{a.ariaOnChange(c,{action:"select-option",option:c,name:y});return}f&&a.blurInput()},a.removeValue=function(c){var u=a.props.isMulti,f=a.state.selectValue,p=a.getOptionValue(c),y=f.filter(function(x){return a.getOptionValue(x)!==p}),v=zj(u,y,y[0]||null);a.onChange(v,{action:"remove-value",removedValue:c}),a.focusInput()},a.clearValue=function(){var c=a.state.selectValue;a.onChange(zj(a.props.isMulti,[],null),{action:"clear",removedValues:c})},a.popValue=function(){var c=a.props.isMulti,u=a.state.selectValue,f=u[u.length-1],p=u.slice(0,u.length-1),y=zj(c,p,p[0]||null);f&&a.onChange(y,{action:"pop-value",removedValue:f})},a.getFocusedOptionId=function(c){return r2(a.state.focusableOptionsWithIds,c)},a.getFocusableOptionsWithIds=function(){return L3(xw(a.props,a.state.selectValue),a.getElementId("option"))},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return _pe.apply(void 0,[a.props.classNamePrefix].concat(u))},a.getOptionLabel=function(c){return X9(a.props,c)},a.getOptionValue=function(c){return Gw(a.props,c)},a.getStyles=function(c,u){var f=a.props.unstyled,p=Tge[c](u,f);p.boxSizing="border-box";var y=a.props.styles[c];return y?y(p,u):p},a.getClassNames=function(c,u){var f,p;return(f=(p=a.props.classNames)[c])===null||f===void 0?void 0:f.call(p,u)},a.getElementId=function(c){return"".concat(a.state.instancePrefix,"-").concat(c)},a.getComponents=function(){return Yme(a.props)},a.buildCategorizedOptions=function(){return xw(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return Q9(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(c,u){a.setState({ariaSelection:Yt({value:c},u)})},a.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(c){a.blockOptionHover=!1},a.onControlMouseDown=function(c){if(!c.defaultPrevented){var u=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&a.onMenuClose():u&&a.openMenu("first"):(u&&(a.openAfterFocus=!0),a.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},a.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!a.props.isDisabled){var u=a.props,f=u.isMulti,p=u.menuIsOpen;a.focusInput(),p?(a.setState({inputIsHiddenAfterUpdate:!f}),a.onMenuClose()):a.openMenu("first"),c.preventDefault()}},a.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(a.clearValue(),c.preventDefault(),a.openAfterFocus=!1,c.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(c){typeof a.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&xN(c.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(c)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(c){var u=c.touches,f=u&&u.item(0);f&&(a.initialTouchX=f.clientX,a.initialTouchY=f.clientY,a.userIsDragging=!1)},a.onTouchMove=function(c){var u=c.touches,f=u&&u.item(0);if(f){var p=Math.abs(f.clientX-a.initialTouchX),y=Math.abs(f.clientY-a.initialTouchY),v=5;a.userIsDragging=p>v||y>v}},a.onTouchEnd=function(c){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(c.target)&&a.menuListRef&&!a.menuListRef.contains(c.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(c){a.userIsDragging||a.onControlMouseDown(c)},a.onClearIndicatorTouchEnd=function(c){a.userIsDragging||a.onClearIndicatorMouseDown(c)},a.onDropdownIndicatorTouchEnd=function(c){a.userIsDragging||a.onDropdownIndicatorMouseDown(c)},a.handleInputChange=function(c){var u=a.props.inputValue,f=c.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(f,{action:"input-change",prevInputValue:u}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(c){a.props.onFocus&&a.props.onFocus(c),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(c){var u=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(c),a.onInputChange("",{action:"input-blur",prevInputValue:u}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(c){if(!(a.blockOptionHover||a.state.focusedOption===c)){var u=a.getFocusableOptions(),f=u.indexOf(c);a.setState({focusedOption:c,focusedOptionId:f>-1?a.getFocusedOptionId(c):null})}},a.shouldHideSelectedOptions=function(){return t7(a.props)},a.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),a.focus()},a.onKeyDown=function(c){var u=a.props,f=u.isMulti,p=u.backspaceRemovesValue,y=u.escapeClearsValue,v=u.inputValue,x=u.isClearable,b=u.isDisabled,w=u.menuIsOpen,_=u.onKeyDown,T=u.tabSelectsValue,C=u.openMenuOnFocus,O=a.state,E=O.focusedOption,P=O.focusedValue,I=O.selectValue;if(!b&&!(typeof _=="function"&&(_(c),c.defaultPrevented))){switch(a.blockOptionHover=!0,c.key){case"ArrowLeft":if(!f||v)return;a.focusValue("previous");break;case"ArrowRight":if(!f||v)return;a.focusValue("next");break;case"Delete":case"Backspace":if(v)return;if(P)a.removeValue(P);else{if(!p)return;f?a.popValue():x&&a.clearValue()}break;case"Tab":if(a.isComposing||c.shiftKey||!w||!T||!E||C&&a.isOptionSelected(E,I))return;a.selectOption(E);break;case"Enter":if(c.keyCode===229)break;if(w){if(!E||a.isComposing)return;a.selectOption(E);break}return;case"Escape":w?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:v}),a.onMenuClose()):x&&y&&a.clearValue();break;case" ":if(v)return;if(!w){a.openMenu("first");break}if(!E)return;a.selectOption(E);break;case"ArrowUp":w?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":w?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!w)return;a.focusOption("pageup");break;case"PageDown":if(!w)return;a.focusOption("pagedown");break;case"Home":if(!w)return;a.focusOption("first");break;case"End":if(!w)return;a.focusOption("last");break;default:return}c.preventDefault()}},a.state.instancePrefix="react-select-"+(a.props.instanceId||++Lge),a.state.selectValue=w3(r.value),r.menuIsOpen&&a.state.selectValue.length){var s=a.getFocusableOptionsWithIds(),o=a.buildFocusableOptions(),l=o.indexOf(a.state.selectValue[0]);a.state.focusableOptionsWithIds=s,a.state.focusedOption=o[l],a.state.focusedOptionId=r2(s,o[l])}return a}return nfe(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&S3(this.menuListRef,this.focusedOptionRef),wge()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isDisabled,l=s.menuIsOpen,c=this.state.isFocused;(c&&!o&&a.isDisabled||c&&l&&!a.menuIsOpen)&&this.focusInput(),c&&o&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(S3(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,s){this.props.onInputChange(a,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var s=this,o=this.state,l=o.selectValue,c=o.isFocused,u=this.buildFocusableOptions(),f=a==="first"?0:u.length-1;if(!this.props.isMulti){var p=u.indexOf(l[0]);p>-1&&(f=p)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[f],focusedOptionId:this.getFocusedOptionId(u[f])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(a){var s=this.state,o=s.selectValue,l=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var u=o.length-1,f=-1;if(o.length){switch(a){case"previous":c===0?f=0:c===-1?f=u:f=c-1;break;case"next":c>-1&&c<u&&(f=c+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:o[f]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,u=l.indexOf(o);o||(u=-1),a==="up"?c=u>0?u-1:l.length-1:a==="down"?c=(u+1)%l.length:a==="pageup"?(c=u-s,c<0&&(c=0)):a==="pagedown"?(c=u+s,c>l.length-1&&(c=l.length-1)):a==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(n2):Yt(Yt({},n2),this.props.theme):n2}},{key:"getCommonProps",value:function(){var a=this.clearValue,s=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,u=this.selectOption,f=this.setValue,p=this.props,y=p.isMulti,v=p.isRtl,x=p.options,b=this.hasValue();return{clearValue:a,cx:s,getStyles:o,getClassNames:l,getValue:c,hasValue:b,isMulti:y,isRtl:v,options:x,selectOption:u,selectProps:p,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,s=a.isClearable,o=a.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(a,s){return J9(this.props,a,s)}},{key:"isOptionSelected",value:function(a,s){return Z9(this.props,a,s)}},{key:"filterOption",value:function(a,s){return e7(this.props,a,s)}},{key:"formatOptionLabel",value:function(a,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(a,{context:s,inputValue:o,selectValue:l})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var a=this.props,s=a.isDisabled,o=a.isSearchable,l=a.inputId,c=a.inputValue,u=a.tabIndex,f=a.form,p=a.menuIsOpen,y=a.required,v=this.getComponents(),x=v.Input,b=this.state,w=b.inputIsHidden,_=b.ariaSelection,T=this.commonProps,C=l||this.getElementId("input"),O=Yt(Yt(Yt({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":y,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?j.createElement(x,en({},T,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:s,isHidden:w,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:f,type:"text",value:c},O)):j.createElement(cge,en({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Vw,onFocus:this.onInputFocus,disabled:s,tabIndex:u,inputMode:"none",form:f,value:""},O))}},{key:"renderPlaceholderOrValue",value:function(){var a=this,s=this.getComponents(),o=s.MultiValue,l=s.MultiValueContainer,c=s.MultiValueLabel,u=s.MultiValueRemove,f=s.SingleValue,p=s.Placeholder,y=this.commonProps,v=this.props,x=v.controlShouldRenderValue,b=v.isDisabled,w=v.isMulti,_=v.inputValue,T=v.placeholder,C=this.state,O=C.selectValue,E=C.focusedValue,P=C.isFocused;if(!this.hasValue()||!x)return _?null:j.createElement(p,en({},y,{key:"placeholder",isDisabled:b,isFocused:P,innerProps:{id:this.getElementId("placeholder")}}),T);if(w)return O.map(function(F,$){var z=F===E,L="".concat(a.getOptionLabel(F),"-").concat(a.getOptionValue(F));return j.createElement(o,en({},y,{components:{Container:l,Label:c,Remove:u},isFocused:z,isDisabled:b,key:L,index:$,removeProps:{onClick:function(){return a.removeValue(F)},onTouchEnd:function(){return a.removeValue(F)},onMouseDown:function(V){V.preventDefault()}},data:F}),a.formatOptionLabel(F,"value"))});if(_)return null;var I=O[0];return j.createElement(f,en({},y,{data:I,isDisabled:b}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),s=a.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,u=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!s||c||!this.hasValue()||u)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(s,en({},o,{innerProps:p,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),s=a.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,u=l.isLoading,f=this.state.isFocused;if(!s||!u)return null;var p={"aria-hidden":"true"};return j.createElement(s,en({},o,{innerProps:p,isDisabled:c,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),s=a.DropdownIndicator,o=a.IndicatorSeparator;if(!s||!o)return null;var l=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused;return j.createElement(o,en({},l,{isDisabled:c,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),s=a.DropdownIndicator;if(!s)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return j.createElement(s,en({},o,{innerProps:u,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var a=this,s=this.getComponents(),o=s.Group,l=s.GroupHeading,c=s.Menu,u=s.MenuList,f=s.MenuPortal,p=s.LoadingMessage,y=s.NoOptionsMessage,v=s.Option,x=this.commonProps,b=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,T=w.inputValue,C=w.isLoading,O=w.loadingMessage,E=w.minMenuHeight,P=w.maxMenuHeight,I=w.menuIsOpen,F=w.menuPlacement,$=w.menuPosition,z=w.menuPortalTarget,L=w.menuShouldBlockScroll,H=w.menuShouldScrollIntoView,V=w.noOptionsMessage,ne=w.onMenuScrollToTop,Z=w.onMenuScrollToBottom;if(!I)return null;var q=function(Y,xe){var Ie=Y.type,Ne=Y.data,ke=Y.isDisabled,de=Y.isSelected,Q=Y.label,oe=Y.value,re=b===Ne,ae=ke?void 0:function(){return a.onOptionHover(Ne)},X=ke?void 0:function(){return a.selectOption(Ne)},W="".concat(a.getElementId("option"),"-").concat(xe),ie={id:W,onClick:X,onMouseMove:ae,onMouseOver:ae,tabIndex:-1,role:"option","aria-selected":a.state.isAppleDevice?void 0:de};return j.createElement(v,en({},x,{innerProps:ie,data:Ne,isDisabled:ke,isSelected:de,key:W,label:Q,type:Ie,value:oe,isFocused:re,innerRef:re?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(Y.data,"menu"))},K;if(this.hasOptions())K=this.getCategorizedOptions().map(function(me){if(me.type==="group"){var Y=me.data,xe=me.options,Ie=me.index,Ne="".concat(a.getElementId("group"),"-").concat(Ie),ke="".concat(Ne,"-heading");return j.createElement(o,en({},x,{key:Ne,data:Y,options:xe,Heading:l,headingProps:{id:ke,data:me.data},label:a.formatGroupLabel(me.data)}),me.options.map(function(de){return q(de,"".concat(Ie,"-").concat(de.index))}))}else if(me.type==="option")return q(me,"".concat(me.index))});else if(C){var se=O({inputValue:T});if(se===null)return null;K=j.createElement(p,x,se)}else{var G=V({inputValue:T});if(G===null)return null;K=j.createElement(y,x,G)}var B={minMenuHeight:E,maxMenuHeight:P,menuPlacement:F,menuPosition:$,menuShouldScrollIntoView:H},fe=j.createElement(zpe,en({},x,B),function(me){var Y=me.ref,xe=me.placerProps,Ie=xe.placement,Ne=xe.maxHeight;return j.createElement(c,en({},x,B,{innerRef:Y,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:C,placement:Ie}),j.createElement(mge,{captureEnabled:_,onTopArrive:ne,onBottomArrive:Z,lockEnabled:L},function(ke){return j.createElement(u,en({},x,{innerRef:function(Q){a.getMenuListRef(Q),ke(Q)},innerProps:{role:"listbox","aria-multiselectable":x.isMulti,id:a.getElementId("listbox")},isLoading:C,maxHeight:Ne,focusedOption:b}),K)}))});return z||$==="fixed"?j.createElement(f,en({},x,{appendTo:z,controlElement:this.controlRef,menuPlacement:F,menuPosition:$}),fe):fe}},{key:"renderFormField",value:function(){var a=this,s=this.props,o=s.delimiter,l=s.isDisabled,c=s.isMulti,u=s.name,f=s.required,p=this.state.selectValue;if(f&&!this.hasValue()&&!l)return j.createElement(vge,{name:u,onFocus:this.onValueInputFocus});if(!(!u||l))if(c)if(o){var y=p.map(function(b){return a.getOptionValue(b)}).join(o);return j.createElement("input",{name:u,type:"hidden",value:y})}else{var v=p.length>0?p.map(function(b,w){return j.createElement("input",{key:"i-".concat(w),name:u,type:"hidden",value:a.getOptionValue(b)})}):j.createElement("input",{name:u,type:"hidden",value:""});return j.createElement("div",null,v)}else{var x=p[0]?this.getOptionValue(p[0]):"";return j.createElement("input",{name:u,type:"hidden",value:x})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,s=this.state,o=s.ariaSelection,l=s.focusedOption,c=s.focusedValue,u=s.isFocused,f=s.selectValue,p=this.getFocusableOptions();return j.createElement(rge,en({},a,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:u,selectValue:f,focusableOptions:p,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var a=this.getComponents(),s=a.Control,o=a.IndicatorsContainer,l=a.SelectContainer,c=a.ValueContainer,u=this.props,f=u.className,p=u.id,y=u.isDisabled,v=u.menuIsOpen,x=this.state.isFocused,b=this.commonProps=this.getCommonProps();return j.createElement(l,en({},b,{className:f,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:y,isFocused:x}),this.renderLiveRegion(),j.createElement(s,en({},b,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:y,isFocused:x,menuIsOpen:v}),j.createElement(c,en({},b,{isDisabled:y}),this.renderPlaceholderOrValue(),this.renderInput()),j.createElement(o,en({},b,{isDisabled:y}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,s){var o=s.prevProps,l=s.clearFocusValueOnUpdate,c=s.inputIsHiddenAfterUpdate,u=s.ariaSelection,f=s.isFocused,p=s.prevWasFocused,y=s.instancePrefix,v=a.options,x=a.value,b=a.menuIsOpen,w=a.inputValue,_=a.isMulti,T=w3(x),C={};if(o&&(x!==o.value||v!==o.options||b!==o.menuIsOpen||w!==o.inputValue)){var O=b?Mge(a,T):[],E=b?L3(xw(a,T),"".concat(y,"-option")):[],P=l?Ige(s,T):null,I=Rge(s,O),F=r2(E,I);C={selectValue:T,focusedOption:I,focusedOptionId:F,focusableOptionsWithIds:E,focusedValue:P,clearFocusValueOnUpdate:!1}}var $=c!=null&&a!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},z=u,L=f&&p;return f&&!L&&(z={value:zj(_,T,T[0]||null),options:T,action:"initial-input-focus"},L=!p),(u==null?void 0:u.action)==="initial-input-focus"&&(z=null),Yt(Yt(Yt({},C),$),{},{prevProps:a,ariaSelection:z,prevWasFocused:L})}}]),n}(j.Component);n7.defaultProps=Dge;var Fge=j.forwardRef(function(e,t){var n=efe(e);return j.createElement(n7,en({ref:t},n))}),r7=Fge;const jm=new Map,i7=(()=>{const e=new Promise(t=>{window.addEventListener("pointerdown",t,{once:!0}),window.addEventListener("keydown",t,{once:!0})});return async t=>{try{const n=new Audio;if(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play(),t!=null&&t.id&&jm.has(t.id)){const a=jm.get(t.id);if(a)return a}const r=new AudioContext(t);return t!=null&&t.id&&jm.set(t.id,r),r}catch{if(await e,t!=null&&t.id&&jm.has(t.id)){const a=jm.get(t.id);if(a)return a}const r=new AudioContext(t);return t!=null&&t.id&&jm.set(t.id,r),r}}})();function $ge(e){var t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}const Bge=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,a7=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,qj=new Map,_P=(e,t)=>{const n=new Blob([`registerProcessor("${e}", ${t})`],{type:"application/javascript"});return URL.createObjectURL(n)};var i2={exports:{}},$3;function zge(){return $3||($3=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new a(f,p||c,y),x=n?n+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],v]:c._events[x].push(v):(c._events[x]=v,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)t.call(f,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,v=p.length,x=new Array(v);y<v;y++)x[y]=p[y].fn;return x},l.prototype.listenerCount=function(u){var f=n?n+u:u,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,f,p,y,v,x){var b=n?n+u:u;if(!this._events[b])return!1;var w=this._events[b],_=arguments.length,T,C;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,p),!0;case 4:return w.fn.call(w.context,f,p,y),!0;case 5:return w.fn.call(w.context,f,p,y,v),!0;case 6:return w.fn.call(w.context,f,p,y,v,x),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];w.fn.apply(w.context,T)}else{var O=w.length,E;for(C=0;C<O;C++)switch(w[C].once&&this.removeListener(u,w[C].fn,void 0,!0),_){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,f);break;case 3:w[C].fn.call(w[C].context,f,p);break;case 4:w[C].fn.call(w[C].context,f,p,y);break;default:if(!T)for(E=1,T=new Array(_-1);E<_;E++)T[E-1]=arguments[E];w[C].fn.apply(w[C].context,T)}}return!0},l.prototype.on=function(u,f,p){return s(this,u,f,p,!1)},l.prototype.once=function(u,f,p){return s(this,u,f,p,!0)},l.prototype.removeListener=function(u,f,p,y){var v=n?n+u:u;if(!this._events[v])return this;if(!f)return o(this,v),this;var x=this._events[v];if(x.fn)x.fn===f&&(!y||x.once)&&(!p||x.context===p)&&o(this,v);else{for(var b=0,w=[],_=x.length;b<_;b++)(x[b].fn!==f||y&&!x[b].once||p&&x[b].context!==p)&&w.push(x[b]);w.length?this._events[v]=w.length===1?w[0]:w:o(this,v)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}(i2)),i2.exports}var qge=zge();const s7=Bn(qge);function Uge(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,a=0;a<r;a++)t+=String.fromCharCode(n[a]);return window.btoa(t)}class o7 extends s7{constructor(n=16e3){super();hr(this,"stream");hr(this,"audioContext");hr(this,"source");hr(this,"recording",!1);hr(this,"recordingWorklet");hr(this,"vuWorklet");hr(this,"starting",null);this.sampleRate=n}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async n=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await i7({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const r="audio-recorder-worklet",a=_P(r,Bge);await this.audioContext.audioWorklet.addModule(a),this.recordingWorklet=new AudioWorkletNode(this.audioContext,r),this.recordingWorklet.port.onmessage=async o=>{const l=o.data.data.int16arrayBuffer;if(l){const c=Uge(l);this.emit("data",c)}},this.source.connect(this.recordingWorklet);const s="vu-meter";await this.audioContext.audioWorklet.addModule(_P(s,a7)),this.vuWorklet=new AudioWorkletNode(this.audioContext,s),this.vuWorklet.port.onmessage=o=>{this.emit("volume",o.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,n(),this.starting=null})}stop(){const n=()=>{var r,a;(r=this.source)==null||r.disconnect(),(a=this.stream)==null||a.getTracks().forEach(s=>s.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(n);return}n()}}const Vge=3,Hge=({active:e,volume:t,hover:n})=>{const r=j.useRef([]);return j.useEffect(()=>{let a=null;const s=()=>{r.current.forEach((o,l)=>{o&&(o.style.height=`${Math.min(24,4+t*(l===1?400:60))}px`)}),a=window.setTimeout(s,100)};return s(),()=>clearTimeout(a)},[t]),i.jsx("div",{className:sd("audioPulse",{active:e,hover:n}),children:Array(Vge).fill(null).map((a,s)=>i.jsx("div",{ref:o=>{r.current[s]=o},style:{animationDelay:`${s*133}ms`}},s))})};var jx={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Gge=jx.exports,B3;function Wge(){return B3||(B3=1,function(e,t){(function(){var n,r="4.17.21",a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,f="__lodash_placeholder__",p=1,y=2,v=4,x=1,b=2,w=1,_=2,T=4,C=8,O=16,E=32,P=64,I=128,F=256,$=512,z=30,L="...",H=800,V=16,ne=1,Z=2,q=3,K=1/0,se=9007199254740991,G=17976931348623157e292,B=NaN,fe=4294967295,me=fe-1,Y=fe>>>1,xe=[["ary",I],["bind",w],["bindKey",_],["curry",C],["curryRight",O],["flip",$],["partial",E],["partialRight",P],["rearg",F]],Ie="[object Arguments]",Ne="[object Array]",ke="[object AsyncFunction]",de="[object Boolean]",Q="[object Date]",oe="[object DOMException]",re="[object Error]",ae="[object Function]",X="[object GeneratorFunction]",W="[object Map]",ie="[object Number]",pe="[object Null]",le="[object Object]",je="[object Promise]",Ge="[object Proxy]",et="[object RegExp]",ht="[object Set]",_e="[object String]",Fe="[object Symbol]",Ye="[object Undefined]",Ke="[object WeakMap]",be="[object WeakSet]",De="[object ArrayBuffer]",we="[object DataView]",ve="[object Float32Array]",Ce="[object Float64Array]",nt="[object Int8Array]",Ve="[object Int16Array]",dt="[object Int32Array]",Ct="[object Uint8Array]",kt="[object Uint8ClampedArray]",ze="[object Uint16Array]",Xe="[object Uint32Array]",Je=/\b__p \+= '';/g,wt=/\b(__p \+=) '' \+/g,Pt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,dn=/&(?:amp|lt|gt|quot|#39);/g,Ee=/[&<>"']/g,at=RegExp(dn.source),Tt=RegExp(Ee.source),Re=/<%-([\s\S]+?)%>/g,vt=/<%([\s\S]+?)%>/g,It=/<%=([\s\S]+?)%>/g,ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bt=/[\\^$.*+?()[\]{}|]/g,Dt=RegExp(bt.source),un=/^\s+/,Ut=/\s/,to=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,no=/\{\n\/\* \[wrapped with (.+)\] \*/,Es=/,? & /,$o=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ty=/[()=,{}\[\]\/\s]/,Gc=/\\(\\)?/g,Wc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Kc=/\w*$/,Yc=/^[-+]0x[0-9a-f]+$/i,ai=/^0b[01]+$/i,a0=/^\[object .+?Constructor\]$/,s0=/^0o[0-7]+$/i,Fl=/^(?:0|[1-9]\d*)$/,Qc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zf=/($^)/,o0=/['\n\r\u2028\u2029\\]/g,Ed="\\ud800-\\udfff",d_="\\u0300-\\u036f",qf="\\ufe20-\\ufe2f",Uf="\\u20d0-\\u20ff",As=d_+qf+Uf,Vf="\\u2700-\\u27bf",ny="a-z\\xdf-\\xf6\\xf8-\\xff",Xc="\\xac\\xb1\\xd7\\xf7",ry="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",iy="\\u2000-\\u206f",h_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ay="A-Z\\xc0-\\xd6\\xd8-\\xde",ca="\\ufe0e\\ufe0f",sy=Xc+ry+iy+h_,oy="[']",Hf="["+Ed+"]",ly="["+sy+"]",$l="["+As+"]",l0="\\d+",Da="["+Vf+"]",Gf="["+ny+"]",cy="[^"+Ed+sy+l0+Vf+ny+ay+"]",Ad="\\ud83c[\\udffb-\\udfff]",Jc="(?:"+$l+"|"+Ad+")",uy="[^"+Ed+"]",Wf="(?:\\ud83c[\\udde6-\\uddff]){2}",Bo="[\\ud800-\\udbff][\\udc00-\\udfff]",Zc="["+ay+"]",dy="\\u200d",hy="(?:"+Gf+"|"+cy+")",fy="(?:"+Zc+"|"+cy+")",c0="(?:"+oy+"(?:d|ll|m|re|s|t|ve))?",u0="(?:"+oy+"(?:D|LL|M|RE|S|T|VE))?",kd=Jc+"?",Kf="["+ca+"]?",py="(?:"+dy+"(?:"+[uy,Wf,Bo].join("|")+")"+Kf+kd+")*",eu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",my=Kf+kd+py,gy="(?:"+[Da,Wf,Bo].join("|")+")"+my,d0="(?:"+[uy+$l+"?",$l,Wf,Bo,Hf].join("|")+")",Pd=RegExp(oy,"g"),ro=RegExp($l,"g"),Od=RegExp(Ad+"(?="+Ad+")|"+d0+my,"g"),Dd=RegExp([Zc+"?"+Gf+"+"+c0+"(?="+[ly,Zc,"$"].join("|")+")",fy+"+"+u0+"(?="+[ly,Zc+hy,"$"].join("|")+")",Zc+"?"+hy+"+"+c0,Zc+"+"+u0,tu,eu,l0,gy].join("|"),"g"),zo=RegExp("["+dy+Ed+As+ca+"]"),yy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],h0=-1,Jn={};Jn[ve]=Jn[Ce]=Jn[nt]=Jn[Ve]=Jn[dt]=Jn[Ct]=Jn[kt]=Jn[ze]=Jn[Xe]=!0,Jn[Ie]=Jn[Ne]=Jn[De]=Jn[de]=Jn[we]=Jn[Q]=Jn[re]=Jn[ae]=Jn[W]=Jn[ie]=Jn[le]=Jn[et]=Jn[ht]=Jn[_e]=Jn[Ke]=!1;var Gn={};Gn[Ie]=Gn[Ne]=Gn[De]=Gn[we]=Gn[de]=Gn[Q]=Gn[ve]=Gn[Ce]=Gn[nt]=Gn[Ve]=Gn[dt]=Gn[W]=Gn[ie]=Gn[le]=Gn[et]=Gn[ht]=Gn[_e]=Gn[Fe]=Gn[Ct]=Gn[kt]=Gn[ze]=Gn[Xe]=!0,Gn[re]=Gn[ae]=Gn[Ke]=!1;var f0={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},$i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Md=parseFloat,f_=parseInt,Xf=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks,vy=typeof self=="object"&&self&&self.Object===Object&&self,Br=Xf||vy||Function("return this")(),nu=t&&!t.nodeType&&t,qo=nu&&!0&&e&&!e.nodeType&&e,p0=qo&&qo.exports===nu,xy=p0&&Xf.process,Ma=function(){try{var Le=qo&&qo.require&&qo.require("util").types;return Le||xy&&xy.binding&&xy.binding("util")}catch{}}(),Jf=Ma&&Ma.isArrayBuffer,m0=Ma&&Ma.isDate,g0=Ma&&Ma.isMap,y0=Ma&&Ma.isRegExp,v0=Ma&&Ma.isSet,x0=Ma&&Ma.isTypedArray;function Bi(Le,tt,Qe){switch(Qe.length){case 0:return Le.call(tt);case 1:return Le.call(tt,Qe[0]);case 2:return Le.call(tt,Qe[0],Qe[1]);case 3:return Le.call(tt,Qe[0],Qe[1],Qe[2])}return Le.apply(tt,Qe)}function p_(Le,tt,Qe,St){for(var Qt=-1,Mn=Le==null?0:Le.length;++Qt<Mn;){var qr=Le[Qt];tt(St,qr,Qe(qr),Le)}return St}function Ia(Le,tt){for(var Qe=-1,St=Le==null?0:Le.length;++Qe<St&&tt(Le[Qe],Qe,Le)!==!1;);return Le}function m_(Le,tt){for(var Qe=Le==null?0:Le.length;Qe--&&tt(Le[Qe],Qe,Le)!==!1;);return Le}function b0(Le,tt){for(var Qe=-1,St=Le==null?0:Le.length;++Qe<St;)if(!tt(Le[Qe],Qe,Le))return!1;return!0}function ks(Le,tt){for(var Qe=-1,St=Le==null?0:Le.length,Qt=0,Mn=[];++Qe<St;){var qr=Le[Qe];tt(qr,Qe,Le)&&(Mn[Qt++]=qr)}return Mn}function Zf(Le,tt){var Qe=Le==null?0:Le.length;return!!Qe&&ru(Le,tt,0)>-1}function by(Le,tt,Qe){for(var St=-1,Qt=Le==null?0:Le.length;++St<Qt;)if(Qe(tt,Le[St]))return!0;return!1}function jr(Le,tt){for(var Qe=-1,St=Le==null?0:Le.length,Qt=Array(St);++Qe<St;)Qt[Qe]=tt(Le[Qe],Qe,Le);return Qt}function io(Le,tt){for(var Qe=-1,St=tt.length,Qt=Le.length;++Qe<St;)Le[Qt+Qe]=tt[Qe];return Le}function jy(Le,tt,Qe,St){var Qt=-1,Mn=Le==null?0:Le.length;for(St&&Mn&&(Qe=Le[++Qt]);++Qt<Mn;)Qe=tt(Qe,Le[Qt],Qt,Le);return Qe}function g_(Le,tt,Qe,St){var Qt=Le==null?0:Le.length;for(St&&Qt&&(Qe=Le[--Qt]);Qt--;)Qe=tt(Qe,Le[Qt],Qt,Le);return Qe}function wy(Le,tt){for(var Qe=-1,St=Le==null?0:Le.length;++Qe<St;)if(tt(Le[Qe],Qe,Le))return!0;return!1}var y_=tp("length");function v_(Le){return Le.split("")}function x_(Le){return Le.match($o)||[]}function j0(Le,tt,Qe){var St;return Qe(Le,function(Qt,Mn,qr){if(tt(Qt,Mn,qr))return St=Mn,!1}),St}function ep(Le,tt,Qe,St){for(var Qt=Le.length,Mn=Qe+(St?1:-1);St?Mn--:++Mn<Qt;)if(tt(Le[Mn],Mn,Le))return Mn;return-1}function ru(Le,tt,Qe){return tt===tt?S_(Le,tt,Qe):ep(Le,iu,Qe)}function Sy(Le,tt,Qe,St){for(var Qt=Qe-1,Mn=Le.length;++Qt<Mn;)if(St(Le[Qt],tt))return Qt;return-1}function iu(Le){return Le!==Le}function w0(Le,tt){var Qe=Le==null?0:Le.length;return Qe?rp(Le,tt)/Qe:B}function tp(Le){return function(tt){return tt==null?n:tt[Le]}}function np(Le){return function(tt){return Le==null?n:Le[tt]}}function Ny(Le,tt,Qe,St,Qt){return Qt(Le,function(Mn,qr,In){Qe=St?(St=!1,Mn):tt(Qe,Mn,qr,In)}),Qe}function S0(Le,tt){var Qe=Le.length;for(Le.sort(tt);Qe--;)Le[Qe]=Le[Qe].value;return Le}function rp(Le,tt){for(var Qe,St=-1,Qt=Le.length;++St<Qt;){var Mn=tt(Le[St]);Mn!==n&&(Qe=Qe===n?Mn:Qe+Mn)}return Qe}function Uo(Le,tt){for(var Qe=-1,St=Array(Le);++Qe<Le;)St[Qe]=tt(Qe);return St}function b_(Le,tt){return jr(tt,function(Qe){return[Qe,Le[Qe]]})}function N0(Le){return Le&&Le.slice(0,Cy(Le)+1).replace(un,"")}function ua(Le){return function(tt){return Le(tt)}}function ip(Le,tt){return jr(tt,function(Qe){return Le[Qe]})}function au(Le,tt){return Le.has(tt)}function su(Le,tt){for(var Qe=-1,St=Le.length;++Qe<St&&ru(tt,Le[Qe],0)>-1;);return Qe}function ou(Le,tt){for(var Qe=Le.length;Qe--&&ru(tt,Le[Qe],0)>-1;);return Qe}function j_(Le,tt){for(var Qe=Le.length,St=0;Qe--;)Le[Qe]===tt&&++St;return St}var ap=np(f0),_0=np($i);function C0(Le){return"\\"+Qf[Le]}function _y(Le,tt){return Le==null?n:Le[tt]}function Vo(Le){return zo.test(Le)}function T0(Le){return yy.test(Le)}function E0(Le){for(var tt,Qe=[];!(tt=Le.next()).done;)Qe.push(tt.value);return Qe}function sp(Le){var tt=-1,Qe=Array(Le.size);return Le.forEach(function(St,Qt){Qe[++tt]=[Qt,St]}),Qe}function A0(Le,tt){return function(Qe){return Le(tt(Qe))}}function Ho(Le,tt){for(var Qe=-1,St=Le.length,Qt=0,Mn=[];++Qe<St;){var qr=Le[Qe];(qr===tt||qr===f)&&(Le[Qe]=f,Mn[Qt++]=Qe)}return Mn}function op(Le){var tt=-1,Qe=Array(Le.size);return Le.forEach(function(St){Qe[++tt]=St}),Qe}function w_(Le){var tt=-1,Qe=Array(Le.size);return Le.forEach(function(St){Qe[++tt]=[St,St]}),Qe}function S_(Le,tt,Qe){for(var St=Qe-1,Qt=Le.length;++St<Qt;)if(Le[St]===tt)return St;return-1}function da(Le,tt,Qe){for(var St=Qe+1;St--;)if(Le[St]===tt)return St;return St}function Ps(Le){return Vo(Le)?P0(Le):y_(Le)}function Ra(Le){return Vo(Le)?Ty(Le):v_(Le)}function Cy(Le){for(var tt=Le.length;tt--&&Ut.test(Le.charAt(tt)););return tt}var k0=np(Bl);function P0(Le){for(var tt=Od.lastIndex=0;Od.test(Le);)++tt;return tt}function Ty(Le){return Le.match(Od)||[]}function N_(Le){return Le.match(Dd)||[]}var lu=function Le(tt){tt=tt==null?Br:Go.defaults(Br.Object(),tt,Go.pick(Br,Yf));var Qe=tt.Array,St=tt.Date,Qt=tt.Error,Mn=tt.Function,qr=tt.Math,In=tt.Object,lp=tt.RegExp,O0=tt.String,ha=tt.TypeError,cp=Qe.prototype,__=Mn.prototype,cu=In.prototype,Id=tt["__core-js_shared__"],Rd=__.toString,zn=cu.hasOwnProperty,as=0,Ey=function(){var g=/[^.]+$/.exec(Id&&Id.keys&&Id.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Pi=cu.toString,La=Rd.call(In),uu=Br._,Ay=lp("^"+Rd.call(zn).replace(bt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zl=p0?tt.Buffer:n,ss=tt.Symbol,du=tt.Uint8Array,ql=zl?zl.allocUnsafe:n,Ld=A0(In.getPrototypeOf,In),Fd=In.create,Ul=cu.propertyIsEnumerable,up=cp.splice,zi=ss?ss.isConcatSpreadable:n,Vl=ss?ss.iterator:n,Oi=ss?ss.toStringTag:n,$d=function(){try{var g=tl(In,"defineProperty");return g({},"",{}),g}catch{}}(),dp=tt.clearTimeout!==Br.clearTimeout&&tt.clearTimeout,Hl=St&&St.now!==Br.Date.now&&St.now,ky=tt.setTimeout!==Br.setTimeout&&tt.setTimeout,hu=qr.ceil,ao=qr.floor,Wo=In.getOwnPropertySymbols,hp=zl?zl.isBuffer:n,Bd=tt.isFinite,Fa=cp.join,$a=A0(In.keys,In),gr=qr.max,wr=qr.min,so=St.now,Gl=tt.parseInt,Py=qr.random,Oy=cp.reverse,zd=tl(tt,"DataView"),Qr=tl(tt,"Map"),Sr=tl(tt,"Promise"),_n=tl(tt,"Set"),os=tl(tt,"WeakMap"),qi=tl(In,"create"),fu=os&&new os,Ba={},D0=go(zd),M0=go(Qr),qd=go(Sr),Ud=go(_n),I0=go(os),Ko=ss?ss.prototype:n,Wl=Ko?Ko.valueOf:n,Yo=Ko?Ko.toString:n;function ue(g){if(kr(g)&&!nn(g)&&!(g instanceof xn)){if(g instanceof Ui)return g;if(zn.call(g,"__wrapped__"))return Jr(g)}return new Ui(g)}var fa=function(){function g(){}return function(S){if(!_r(S))return{};if(Fd)return Fd(S);g.prototype=S;var M=new g;return g.prototype=n,M}}();function za(){}function Ui(g,S){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=n}ue.templateSettings={escape:Re,evaluate:vt,interpolate:It,variable:"",imports:{_:ue}},ue.prototype=za.prototype,ue.prototype.constructor=ue,Ui.prototype=fa(za.prototype),Ui.prototype.constructor=Ui;function xn(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function Vd(){var g=new xn(this.__wrapped__);return g.__actions__=Xr(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=Xr(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=Xr(this.__views__),g}function fp(){if(this.__filtered__){var g=new xn(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function Kl(){var g=this.__wrapped__.value(),S=this.__dir__,M=nn(g),U=S<0,te=M?g.length:0,ge=p1(0,te,this.__views__),Se=ge.start,Oe=ge.end,Be=Oe-Se,lt=U?Oe:Se-1,ut=this.__iteratees__,ft=ut.length,Nt=0,Rt=wr(Be,this.__takeCount__);if(!M||!U&&te==Be&&Rt==Be)return e1(g,this.__actions__);var Xt=[];e:for(;Be--&&Nt<Rt;){lt+=S;for(var jn=-1,Jt=g[lt];++jn<ft;){var En=ut[jn],Ln=En.iteratee,ps=En.type,ba=Ln(Jt);if(ps==Z)Jt=ba;else if(!ba){if(ps==ne)continue e;break e}}Xt[Nt++]=Jt}return Xt}xn.prototype=fa(za.prototype),xn.prototype.constructor=xn;function Or(g){var S=-1,M=g==null?0:g.length;for(this.clear();++S<M;){var U=g[S];this.set(U[0],U[1])}}function pp(){this.__data__=qi?qi(null):{},this.size=0}function R0(g){var S=this.has(g)&&delete this.__data__[g];return this.size-=S?1:0,S}function C_(g){var S=this.__data__;if(qi){var M=S[g];return M===c?n:M}return zn.call(S,g)?S[g]:n}function T_(g){var S=this.__data__;return qi?S[g]!==n:zn.call(S,g)}function E_(g,S){var M=this.__data__;return this.size+=this.has(g)?0:1,M[g]=qi&&S===n?c:S,this}Or.prototype.clear=pp,Or.prototype.delete=R0,Or.prototype.get=C_,Or.prototype.has=T_,Or.prototype.set=E_;function sr(g){var S=-1,M=g==null?0:g.length;for(this.clear();++S<M;){var U=g[S];this.set(U[0],U[1])}}function Dy(){this.__data__=[],this.size=0}function Hd(g){var S=this.__data__,M=gu(S,g);if(M<0)return!1;var U=S.length-1;return M==U?S.pop():up.call(S,M,1),--this.size,!0}function Gd(g){var S=this.__data__,M=gu(S,g);return M<0?n:S[M][1]}function My(g){return gu(this.__data__,g)>-1}function pu(g,S){var M=this.__data__,U=gu(M,g);return U<0?(++this.size,M.push([g,S])):M[U][1]=S,this}sr.prototype.clear=Dy,sr.prototype.delete=Hd,sr.prototype.get=Gd,sr.prototype.has=My,sr.prototype.set=pu;function Vi(g){var S=-1,M=g==null?0:g.length;for(this.clear();++S<M;){var U=g[S];this.set(U[0],U[1])}}function A_(){this.size=0,this.__data__={hash:new Or,map:new(Qr||sr),string:new Or}}function L0(g){var S=wu(this,g).delete(g);return this.size-=S?1:0,S}function k_(g){return wu(this,g).get(g)}function F0(g){return wu(this,g).has(g)}function Yl(g,S){var M=wu(this,g),U=M.size;return M.set(g,S),this.size+=M.size==U?0:1,this}Vi.prototype.clear=A_,Vi.prototype.delete=L0,Vi.prototype.get=k_,Vi.prototype.has=F0,Vi.prototype.set=Yl;function oo(g){var S=-1,M=g==null?0:g.length;for(this.__data__=new Vi;++S<M;)this.add(g[S])}function mp(g){return this.__data__.set(g,c),this}function $0(g){return this.__data__.has(g)}oo.prototype.add=oo.prototype.push=mp,oo.prototype.has=$0;function Di(g){var S=this.__data__=new sr(g);this.size=S.size}function B0(){this.__data__=new sr,this.size=0}function gp(g){var S=this.__data__,M=S.delete(g);return this.size=S.size,M}function Iy(g){return this.__data__.get(g)}function z0(g){return this.__data__.has(g)}function yp(g,S){var M=this.__data__;if(M instanceof sr){var U=M.__data__;if(!Qr||U.length<a-1)return U.push([g,S]),this.size=++M.size,this;M=this.__data__=new Vi(U)}return M.set(g,S),this.size=M.size,this}Di.prototype.clear=B0,Di.prototype.delete=gp,Di.prototype.get=Iy,Di.prototype.has=z0,Di.prototype.set=yp;function Ry(g,S){var M=nn(g),U=!M&&bo(g),te=!M&&!U&&dl(g),ge=!M&&!U&&!te&&Ru(g),Se=M||U||te||ge,Oe=Se?Uo(g.length,O0):[],Be=Oe.length;for(var lt in g)(S||zn.call(g,lt))&&!(Se&&(lt=="length"||te&&(lt=="offset"||lt=="parent")||ge&&(lt=="buffer"||lt=="byteLength"||lt=="byteOffset")||ds(lt,Be)))&&Oe.push(lt);return Oe}function mu(g){var S=g.length;return S?g[Tp(0,S-1)]:n}function q0(g,S){return xh(Xr(g),cs(S,0,g.length))}function U0(g){return xh(Xr(g))}function Os(g,S,M){(M!==n&&!Xi(g[S],M)||M===n&&!(S in g))&&ls(g,S,M)}function Ql(g,S,M){var U=g[S];(!(zn.call(g,S)&&Xi(U,M))||M===n&&!(S in g))&&ls(g,S,M)}function gu(g,S){for(var M=g.length;M--;)if(Xi(g[M][0],S))return M;return-1}function Qo(g,S,M,U){return co(g,function(te,ge,Se){S(U,te,M(te),Se)}),U}function lo(g,S){return g&&Wi(S,ti(S),g)}function Wd(g,S){return g&&Wi(S,li(S),g)}function ls(g,S,M){S=="__proto__"&&$d?$d(g,S,{configurable:!0,enumerable:!0,value:M,writable:!0}):g[S]=M}function Kd(g,S){for(var M=-1,U=S.length,te=Qe(U),ge=g==null;++M<U;)te[M]=ge?n:Dh(g,S[M]);return te}function cs(g,S,M){return g===g&&(M!==n&&(g=g<=M?g:M),S!==n&&(g=g>=S?g:S)),g}function wi(g,S,M,U,te,ge){var Se,Oe=S&p,Be=S&y,lt=S&v;if(M&&(Se=te?M(g,U,te,ge):M(g)),Se!==n)return Se;if(!_r(g))return g;var ut=nn(g);if(ut){if(Se=lv(g),!Oe)return Xr(g,Se)}else{var ft=oi(g),Nt=ft==ae||ft==X;if(dl(g))return ev(g,Oe);if(ft==le||ft==Ie||Nt&&!te){if(Se=Be||Nt?{}:cv(g),!Oe)return Be?oh(g,Wd(Se,g)):Dp(g,lo(Se,g))}else{if(!Gn[ft])return te?g:{};Se=uv(g,ft,Oe)}}ge||(ge=new Di);var Rt=ge.get(g);if(Rt)return Rt;ge.set(g,Se),sj(g)?g.forEach(function(Jt){Se.add(wi(Jt,S,M,Jt,g,ge))}):im(g)&&g.forEach(function(Jt,En){Se.set(En,wi(Jt,S,M,En,g,ge))});var Xt=lt?Be?Lp:Rp:Be?li:ti,jn=ut?n:Xt(g);return Ia(jn||g,function(Jt,En){jn&&(En=Jt,Jt=g[En]),Ql(Se,En,wi(Jt,S,M,En,g,ge))}),Se}function V0(g){var S=ti(g);return function(M){return Ly(M,g,S)}}function Ly(g,S,M){var U=M.length;if(g==null)return!U;for(g=In(g);U--;){var te=M[U],ge=S[te],Se=g[te];if(Se===n&&!(te in g)||!ge(Se))return!1}return!0}function Xl(g,S,M){if(typeof g!="function")throw new ha(o);return Nu(function(){g.apply(n,M)},S)}function Xo(g,S,M,U){var te=-1,ge=Zf,Se=!0,Oe=g.length,Be=[],lt=S.length;if(!Oe)return Be;M&&(S=jr(S,ua(M))),U?(ge=by,Se=!1):S.length>=a&&(ge=au,Se=!1,S=new oo(S));e:for(;++te<Oe;){var ut=g[te],ft=M==null?ut:M(ut);if(ut=U||ut!==0?ut:0,Se&&ft===ft){for(var Nt=lt;Nt--;)if(S[Nt]===ft)continue e;Be.push(ut)}else ge(S,ft,U)||Be.push(ut)}return Be}var co=iv(Si),vp=iv(vu,!0);function Fy(g,S){var M=!0;return co(g,function(U,te,ge){return M=!!S(U,te,ge),M}),M}function us(g,S,M){for(var U=-1,te=g.length;++U<te;){var ge=g[U],Se=S(ge);if(Se!=null&&(Oe===n?Se===Se&&!Ri(Se):M(Se,Oe)))var Oe=Se,Be=ge}return Be}function yn(g,S,M,U){var te=g.length;for(M=ln(M),M<0&&(M=-M>te?0:te+M),U=U===n||U>te?te:ln(U),U<0&&(U+=te),U=M>U?0:zs(U);M<U;)g[M++]=S;return g}function Wn(g,S){var M=[];return co(g,function(U,te,ge){S(U,te,ge)&&M.push(U)}),M}function Cn(g,S,M,U,te){var ge=-1,Se=g.length;for(M||(M=po),te||(te=[]);++ge<Se;){var Oe=g[ge];S>0&&M(Oe)?S>1?Cn(Oe,S-1,M,U,te):io(te,Oe):U||(te[te.length]=Oe)}return te}var yu=ic(),Jl=ic(!0);function Si(g,S){return g&&yu(g,S,ti)}function vu(g,S){return g&&Jl(g,S,ti)}function Jo(g,S){return ks(S,function(M){return hs(g[M])})}function qa(g,S){S=ho(S,g);for(var M=0,U=S.length;g!=null&&M<U;)g=g[Vn(S[M++])];return M&&M==U?g:n}function H0(g,S,M){var U=S(g);return nn(g)?U:io(U,M(g))}function Tn(g){return g==null?g===n?Ye:pe:Oi&&Oi in In(g)?f1(g):x1(g)}function Yd(g,S){return g>S}function $y(g,S){return g!=null&&zn.call(g,S)}function G0(g,S){return g!=null&&S in In(g)}function W0(g,S,M){return g>=wr(S,M)&&g<gr(S,M)}function By(g,S,M){for(var U=M?by:Zf,te=g[0].length,ge=g.length,Se=ge,Oe=Qe(ge),Be=1/0,lt=[];Se--;){var ut=g[Se];Se&&S&&(ut=jr(ut,ua(S))),Be=wr(ut.length,Be),Oe[Se]=!M&&(S||te>=120&&ut.length>=120)?new oo(Se&&ut):n}ut=g[0];var ft=-1,Nt=Oe[0];e:for(;++ft<te&&lt.length<Be;){var Rt=ut[ft],Xt=S?S(Rt):Rt;if(Rt=M||Rt!==0?Rt:0,!(Nt?au(Nt,Xt):U(lt,Xt,M))){for(Se=ge;--Se;){var jn=Oe[Se];if(!(jn?au(jn,Xt):U(g[Se],Xt,M)))continue e}Nt&&Nt.push(Xt),lt.push(Rt)}}return lt}function zy(g,S,M,U){return Si(g,function(te,ge,Se){S(U,M(te),ge,Se)}),U}function Zl(g,S,M){S=ho(S,g),g=Su(g,S);var U=g==null?g:g[Vn(Ni(S))];return U==null?n:Bi(U,g,M)}function xp(g){return kr(g)&&Tn(g)==Ie}function Hi(g){return kr(g)&&Tn(g)==De}function Ur(g){return kr(g)&&Tn(g)==Q}function ec(g,S,M,U,te){return g===S?!0:g==null||S==null||!kr(g)&&!kr(S)?g!==g&&S!==S:Qd(g,S,M,U,ec,te)}function Qd(g,S,M,U,te,ge){var Se=nn(g),Oe=nn(S),Be=Se?Ne:oi(g),lt=Oe?Ne:oi(S);Be=Be==Ie?le:Be,lt=lt==Ie?le:lt;var ut=Be==le,ft=lt==le,Nt=Be==lt;if(Nt&&dl(g)){if(!dl(S))return!1;Se=!0,ut=!1}if(Nt&&!ut)return ge||(ge=new Di),Se||Ru(g)?d1(g,S,M,U,te,ge):h1(g,S,Be,M,U,te,ge);if(!(M&x)){var Rt=ut&&zn.call(g,"__wrapped__"),Xt=ft&&zn.call(S,"__wrapped__");if(Rt||Xt){var jn=Rt?g.value():g,Jt=Xt?S.value():S;return ge||(ge=new Di),te(jn,Jt,M,U,ge)}}return Nt?(ge||(ge=new Di),si(g,S,M,U,te,ge)):!1}function bp(g){return kr(g)&&oi(g)==W}function Xd(g,S,M,U){var te=M.length,ge=te,Se=!U;if(g==null)return!ge;for(g=In(g);te--;){var Oe=M[te];if(Se&&Oe[2]?Oe[1]!==g[Oe[0]]:!(Oe[0]in g))return!1}for(;++te<ge;){Oe=M[te];var Be=Oe[0],lt=g[Be],ut=Oe[1];if(Se&&Oe[2]){if(lt===n&&!(Be in g))return!1}else{var ft=new Di;if(U)var Nt=U(lt,ut,Be,g,S,ft);if(!(Nt===n?ec(ut,lt,x|b,U,ft):Nt))return!1}}return!0}function Ds(g){if(!_r(g)||Up(g))return!1;var S=hs(g)?Ay:a0;return S.test(go(g))}function jp(g){return kr(g)&&Tn(g)==et}function qy(g){return kr(g)&&oi(g)==ht}function Uy(g){return kr(g)&&cc(g.length)&&!!Jn[Tn(g)]}function Vy(g){return typeof g=="function"?g:g==null?He:typeof g=="object"?nn(g)?Np(g[0],g[1]):Gy(g):Rn(g)}function wp(g){if(!or(g))return $a(g);var S=[];for(var M in In(g))zn.call(g,M)&&M!="constructor"&&S.push(M);return S}function K0(g){if(!_r(g))return nl(g);var S=or(g),M=[];for(var U in g)U=="constructor"&&(S||!zn.call(g,U))||M.push(U);return M}function Sp(g,S){return g<S}function Hy(g,S){var M=-1,U=Zr(g)?Qe(g.length):[];return co(g,function(te,ge,Se){U[++M]=S(te,ge,Se)}),U}function Gy(g){var S=$p(g);return S.length==1&&S[0][2]?y1(S[0][0],S[0][1]):function(M){return M===g||Xd(M,g,S)}}function Np(g,S){return zp(g)&&g1(S)?y1(Vn(g),S):function(M){var U=Dh(M,g);return U===n&&U===S?Bu(M,g):ec(S,U,x|b)}}function Jd(g,S,M,U,te){g!==S&&yu(S,function(ge,Se){if(te||(te=new Di),_r(ge))P_(g,S,Se,M,Jd,U,te);else{var Oe=U?U(Vp(g,Se),ge,Se+"",g,S,te):n;Oe===n&&(Oe=ge),Os(g,Se,Oe)}},li)}function P_(g,S,M,U,te,ge,Se){var Oe=Vp(g,M),Be=Vp(S,M),lt=Se.get(Be);if(lt){Os(g,M,lt);return}var ut=ge?ge(Oe,Be,M+"",g,S,Se):n,ft=ut===n;if(ft){var Nt=nn(Be),Rt=!Nt&&dl(Be),Xt=!Nt&&!Rt&&Ru(Be);ut=Be,Nt||Rt||Xt?nn(Oe)?ut=Oe:Ir(Oe)?ut=Xr(Oe):Rt?(ft=!1,ut=ev(Be,!0)):Xt?(ft=!1,ut=nv(Be,!0)):ut=[]:Ga(Be)||bo(Be)?(ut=Oe,bo(Oe)?ut=cj(Oe):(!_r(Oe)||hs(Oe))&&(ut=cv(Be))):ft=!1}ft&&(Se.set(Be,ut),te(ut,Be,U,ge,Se),Se.delete(Be)),Os(g,M,ut)}function Wy(g,S){var M=g.length;if(M)return S+=S<0?M:0,ds(S,M)?g[S]:n}function Ky(g,S,M){S.length?S=jr(S,function(ge){return nn(ge)?function(Se){return qa(Se,ge.length===1?ge[0]:ge)}:ge}):S=[He];var U=-1;S=jr(S,ua($t()));var te=Hy(g,function(ge,Se,Oe){var Be=jr(S,function(lt){return lt(ge)});return{criteria:Be,index:++U,value:ge}});return S0(te,function(ge,Se){return i1(ge,Se,M)})}function Y0(g,S){return _p(g,S,function(M,U){return Bu(g,U)})}function _p(g,S,M){for(var U=-1,te=S.length,ge={};++U<te;){var Se=S[U],Oe=qa(g,Se);M(Oe,Se)&&bu(ge,ho(Se,g),Oe)}return ge}function Q0(g){return function(S){return qa(S,g)}}function Cp(g,S,M,U){var te=U?Sy:ru,ge=-1,Se=S.length,Oe=g;for(g===S&&(S=Xr(S)),M&&(Oe=jr(g,ua(M)));++ge<Se;)for(var Be=0,lt=S[ge],ut=M?M(lt):lt;(Be=te(Oe,ut,Be,U))>-1;)Oe!==g&&up.call(Oe,Be,1),up.call(g,Be,1);return g}function Yy(g,S){for(var M=g?S.length:0,U=M-1;M--;){var te=S[M];if(M==U||te!==ge){var ge=te;ds(te)?up.call(g,te,1):nh(g,te)}}return g}function Tp(g,S){return g+ao(Py()*(S-g+1))}function X0(g,S,M,U){for(var te=-1,ge=gr(hu((S-g)/(M||1)),0),Se=Qe(ge);ge--;)Se[U?ge:++te]=g,g+=M;return Se}function Qy(g,S){var M="";if(!g||S<1||S>se)return M;do S%2&&(M+=g),S=ao(S/2),S&&(g+=g);while(S);return M}function pn(g,S){return yh(dv(g,S,He),g+"")}function xu(g){return mu(qu(g))}function Ep(g,S){var M=qu(g);return xh(M,cs(S,0,M.length))}function bu(g,S,M,U){if(!_r(g))return g;S=ho(S,g);for(var te=-1,ge=S.length,Se=ge-1,Oe=g;Oe!=null&&++te<ge;){var Be=Vn(S[te]),lt=M;if(Be==="__proto__"||Be==="constructor"||Be==="prototype")return g;if(te!=Se){var ut=Oe[Be];lt=U?U(ut,Be,Oe):n,lt===n&&(lt=_r(ut)?ut:ds(S[te+1])?[]:{})}Ql(Oe,Be,lt),Oe=Oe[Be]}return g}var Zd=fu?function(g,S){return fu.set(g,S),g}:He,eh=$d?function(g,S){return $d(g,"toString",{configurable:!0,enumerable:!1,value:Ue(S),writable:!0})}:He;function J0(g){return xh(qu(g))}function pa(g,S,M){var U=-1,te=g.length;S<0&&(S=-S>te?0:te+S),M=M>te?te:M,M<0&&(M+=te),te=S>M?0:M-S>>>0,S>>>=0;for(var ge=Qe(te);++U<te;)ge[U]=g[U+S];return ge}function Z0(g,S){var M;return co(g,function(U,te,ge){return M=S(U,te,ge),!M}),!!M}function th(g,S,M){var U=0,te=g==null?U:g.length;if(typeof S=="number"&&S===S&&te<=Y){for(;U<te;){var ge=U+te>>>1,Se=g[ge];Se!==null&&!Ri(Se)&&(M?Se<=S:Se<S)?U=ge+1:te=ge}return te}return Ap(g,S,He,M)}function Ap(g,S,M,U){var te=0,ge=g==null?0:g.length;if(ge===0)return 0;S=M(S);for(var Se=S!==S,Oe=S===null,Be=Ri(S),lt=S===n;te<ge;){var ut=ao((te+ge)/2),ft=M(g[ut]),Nt=ft!==n,Rt=ft===null,Xt=ft===ft,jn=Ri(ft);if(Se)var Jt=U||Xt;else lt?Jt=Xt&&(U||Nt):Oe?Jt=Xt&&Nt&&(U||!Rt):Be?Jt=Xt&&Nt&&!Rt&&(U||!jn):Rt||jn?Jt=!1:Jt=U?ft<=S:ft<S;Jt?te=ut+1:ge=ut}return wr(ge,me)}function Xy(g,S){for(var M=-1,U=g.length,te=0,ge=[];++M<U;){var Se=g[M],Oe=S?S(Se):Se;if(!M||!Xi(Oe,Be)){var Be=Oe;ge[te++]=Se===0?0:Se}}return ge}function kp(g){return typeof g=="number"?g:Ri(g)?B:+g}function Gi(g){if(typeof g=="string")return g;if(nn(g))return jr(g,Gi)+"";if(Ri(g))return Yo?Yo.call(g):"";var S=g+"";return S=="0"&&1/g==-1/0?"-0":S}function uo(g,S,M){var U=-1,te=Zf,ge=g.length,Se=!0,Oe=[],Be=Oe;if(M)Se=!1,te=by;else if(ge>=a){var lt=S?null:c1(g);if(lt)return op(lt);Se=!1,te=au,Be=new oo}else Be=S?[]:Oe;e:for(;++U<ge;){var ut=g[U],ft=S?S(ut):ut;if(ut=M||ut!==0?ut:0,Se&&ft===ft){for(var Nt=Be.length;Nt--;)if(Be[Nt]===ft)continue e;S&&Be.push(ft),Oe.push(ut)}else te(Be,ft,M)||(Be!==Oe&&Be.push(ft),Oe.push(ut))}return Oe}function nh(g,S){return S=ho(S,g),g=Su(g,S),g==null||delete g[Vn(Ni(S))]}function Jy(g,S,M,U){return bu(g,S,M(qa(g,S)),U)}function rh(g,S,M,U){for(var te=g.length,ge=U?te:-1;(U?ge--:++ge<te)&&S(g[ge],ge,g););return M?pa(g,U?0:ge,U?ge+1:te):pa(g,U?ge+1:0,U?te:ge)}function e1(g,S){var M=g;return M instanceof xn&&(M=M.value()),jy(S,function(U,te){return te.func.apply(te.thisArg,io([U],te.args))},M)}function ih(g,S,M){var U=g.length;if(U<2)return U?uo(g[0]):[];for(var te=-1,ge=Qe(U);++te<U;)for(var Se=g[te],Oe=-1;++Oe<U;)Oe!=te&&(ge[te]=Xo(ge[te]||Se,g[Oe],S,M));return uo(Cn(ge,1),S,M)}function Zy(g,S,M){for(var U=-1,te=g.length,ge=S.length,Se={};++U<te;){var Oe=U<ge?S[U]:n;M(Se,g[U],Oe)}return Se}function Pp(g){return Ir(g)?g:[]}function ah(g){return typeof g=="function"?g:He}function ho(g,S){return nn(g)?g:zp(g,S)?[g]:Ls(qn(g))}var t1=pn;function Zo(g,S,M){var U=g.length;return M=M===n?U:M,!S&&M>=U?g:pa(g,S,M)}var n1=dp||function(g){return Br.clearTimeout(g)};function ev(g,S){if(S)return g.slice();var M=g.length,U=ql?ql(M):new g.constructor(M);return g.copy(U),U}function tc(g){var S=new g.constructor(g.byteLength);return new du(S).set(new du(g)),S}function tv(g,S){var M=S?tc(g.buffer):g.buffer;return new g.constructor(M,g.byteOffset,g.byteLength)}function Op(g){var S=new g.constructor(g.source,Kc.exec(g));return S.lastIndex=g.lastIndex,S}function r1(g){return Wl?In(Wl.call(g)):{}}function nv(g,S){var M=S?tc(g.buffer):g.buffer;return new g.constructor(M,g.byteOffset,g.length)}function sh(g,S){if(g!==S){var M=g!==n,U=g===null,te=g===g,ge=Ri(g),Se=S!==n,Oe=S===null,Be=S===S,lt=Ri(S);if(!Oe&&!lt&&!ge&&g>S||ge&&Se&&Be&&!Oe&&!lt||U&&Se&&Be||!M&&Be||!te)return 1;if(!U&&!ge&&!lt&&g<S||lt&&M&&te&&!U&&!ge||Oe&&M&&te||!Se&&te||!Be)return-1}return 0}function i1(g,S,M){for(var U=-1,te=g.criteria,ge=S.criteria,Se=te.length,Oe=M.length;++U<Se;){var Be=sh(te[U],ge[U]);if(Be){if(U>=Oe)return Be;var lt=M[U];return Be*(lt=="desc"?-1:1)}}return g.index-S.index}function rv(g,S,M,U){for(var te=-1,ge=g.length,Se=M.length,Oe=-1,Be=S.length,lt=gr(ge-Se,0),ut=Qe(Be+lt),ft=!U;++Oe<Be;)ut[Oe]=S[Oe];for(;++te<Se;)(ft||te<ge)&&(ut[M[te]]=g[te]);for(;lt--;)ut[Oe++]=g[te++];return ut}function a1(g,S,M,U){for(var te=-1,ge=g.length,Se=-1,Oe=M.length,Be=-1,lt=S.length,ut=gr(ge-Oe,0),ft=Qe(ut+lt),Nt=!U;++te<ut;)ft[te]=g[te];for(var Rt=te;++Be<lt;)ft[Rt+Be]=S[Be];for(;++Se<Oe;)(Nt||te<ge)&&(ft[Rt+M[Se]]=g[te++]);return ft}function Xr(g,S){var M=-1,U=g.length;for(S||(S=Qe(U));++M<U;)S[M]=g[M];return S}function Wi(g,S,M,U){var te=!M;M||(M={});for(var ge=-1,Se=S.length;++ge<Se;){var Oe=S[ge],Be=U?U(M[Oe],g[Oe],Oe,M,g):n;Be===n&&(Be=g[Oe]),te?ls(M,Oe,Be):Ql(M,Oe,Be)}return M}function Dp(g,S){return Wi(g,fh(g),S)}function oh(g,S){return Wi(g,Bp(g),S)}function nc(g,S){return function(M,U){var te=nn(M)?p_:Qo,ge=S?S():{};return te(M,g,$t(U,2),ge)}}function rc(g){return pn(function(S,M){var U=-1,te=M.length,ge=te>1?M[te-1]:n,Se=te>2?M[2]:n;for(ge=g.length>3&&typeof ge=="function"?(te--,ge):n,Se&&Ii(M[0],M[1],Se)&&(ge=te<3?n:ge,te=1),S=In(S);++U<te;){var Oe=M[U];Oe&&g(S,Oe,U,ge)}return S})}function iv(g,S){return function(M,U){if(M==null)return M;if(!Zr(M))return g(M,U);for(var te=M.length,ge=S?te:-1,Se=In(M);(S?ge--:++ge<te)&&U(Se[ge],ge,Se)!==!1;);return M}}function ic(g){return function(S,M,U){for(var te=-1,ge=In(S),Se=U(S),Oe=Se.length;Oe--;){var Be=Se[g?Oe:++te];if(M(ge[Be],Be,ge)===!1)break}return S}}function s1(g,S,M){var U=S&w,te=Ua(g);function ge(){var Se=this&&this!==Br&&this instanceof ge?te:g;return Se.apply(U?M:this,arguments)}return ge}function ma(g){return function(S){S=qn(S);var M=Vo(S)?Ra(S):n,U=M?M[0]:S.charAt(0),te=M?Zo(M,1).join(""):S.slice(1);return U[g]()+te}}function Mi(g){return function(S){return jy(A(jo(S).replace(Pd,"")),g,"")}}function Ua(g){return function(){var S=arguments;switch(S.length){case 0:return new g;case 1:return new g(S[0]);case 2:return new g(S[0],S[1]);case 3:return new g(S[0],S[1],S[2]);case 4:return new g(S[0],S[1],S[2],S[3]);case 5:return new g(S[0],S[1],S[2],S[3],S[4]);case 6:return new g(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new g(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var M=fa(g.prototype),U=g.apply(M,S);return _r(U)?U:M}}function o1(g,S,M){var U=Ua(g);function te(){for(var ge=arguments.length,Se=Qe(ge),Oe=ge,Be=sc(te);Oe--;)Se[Oe]=arguments[Oe];var lt=ge<3&&Se[0]!==Be&&Se[ge-1]!==Be?[]:Ho(Se,Be);if(ge-=lt.length,ge<M)return av(g,S,Dr,te.placeholder,n,Se,lt,n,n,M-ge);var ut=this&&this!==Br&&this instanceof te?U:g;return Bi(ut,this,Se)}return te}function fo(g){return function(S,M,U){var te=In(S);if(!Zr(S)){var ge=$t(M,3);S=ti(S),M=function(Oe){return ge(te[Oe],Oe,te)}}var Se=g(S,M,U);return Se>-1?te[ge?S[Se]:Se]:n}}function Ms(g){return yr(function(S){var M=S.length,U=M,te=Ui.prototype.thru;for(g&&S.reverse();U--;){var ge=S[U];if(typeof ge!="function")throw new ha(o);if(te&&!Se&&hh(ge)=="wrapper")var Se=new Ui([],!0)}for(U=Se?U:M;++U<M;){ge=S[U];var Oe=hh(ge),Be=Oe=="wrapper"?Fp(ge):n;Be&&qp(Be[0])&&Be[1]==(I|C|E|F)&&!Be[4].length&&Be[9]==1?Se=Se[hh(Be[0])].apply(Se,Be[3]):Se=ge.length==1&&qp(ge)?Se[Oe]():Se.thru(ge)}return function(){var lt=arguments,ut=lt[0];if(Se&&lt.length==1&&nn(ut))return Se.plant(ut).value();for(var ft=0,Nt=M?S[ft].apply(this,lt):ut;++ft<M;)Nt=S[ft].call(this,Nt);return Nt}})}function Dr(g,S,M,U,te,ge,Se,Oe,Be,lt){var ut=S&I,ft=S&w,Nt=S&_,Rt=S&(C|O),Xt=S&$,jn=Nt?n:Ua(g);function Jt(){for(var En=arguments.length,Ln=Qe(En),ps=En;ps--;)Ln[ps]=arguments[ps];if(Rt)var ba=sc(Jt),ms=j_(Ln,ba);if(U&&(Ln=rv(Ln,U,te,Rt)),ge&&(Ln=a1(Ln,ge,Se,Rt)),En-=ms,Rt&&En<lt){var ni=Ho(Ln,ba);return av(g,S,Dr,Jt.placeholder,M,Ln,ni,Oe,Be,lt-En)}var wo=ft?M:this,uc=Nt?wo[g]:g;return En=Ln.length,Oe?Ln=Rs(Ln,Oe):Xt&&En>1&&Ln.reverse(),ut&&Be<En&&(Ln.length=Be),this&&this!==Br&&this instanceof Jt&&(uc=jn||Ua(uc)),uc.apply(wo,Ln)}return Jt}function lh(g,S){return function(M,U){return zy(M,g,S(U),{})}}function ju(g,S){return function(M,U){var te;if(M===n&&U===n)return S;if(M!==n&&(te=M),U!==n){if(te===n)return U;typeof M=="string"||typeof U=="string"?(M=Gi(M),U=Gi(U)):(M=kp(M),U=kp(U)),te=g(M,U)}return te}}function ch(g){return yr(function(S){return S=jr(S,ua($t())),pn(function(M){var U=this;return g(S,function(te){return Bi(te,U,M)})})})}function uh(g,S){S=S===n?" ":Gi(S);var M=S.length;if(M<2)return M?Qy(S,g):S;var U=Qy(S,hu(g/Ps(S)));return Vo(S)?Zo(Ra(U),0,g).join(""):U.slice(0,g)}function l1(g,S,M,U){var te=S&w,ge=Ua(g);function Se(){for(var Oe=-1,Be=arguments.length,lt=-1,ut=U.length,ft=Qe(ut+Be),Nt=this&&this!==Br&&this instanceof Se?ge:g;++lt<ut;)ft[lt]=U[lt];for(;Be--;)ft[lt++]=arguments[++Oe];return Bi(Nt,te?M:this,ft)}return Se}function el(g){return function(S,M,U){return U&&typeof U!="number"&&Ii(S,M,U)&&(M=U=n),S=Bs(S),M===n?(M=S,S=0):M=Bs(M),U=U===n?S<M?1:-1:Bs(U),X0(S,M,U,g)}}function ac(g){return function(S,M){return typeof S=="string"&&typeof M=="string"||(S=Wa(S),M=Wa(M)),g(S,M)}}function av(g,S,M,U,te,ge,Se,Oe,Be,lt){var ut=S&C,ft=ut?Se:n,Nt=ut?n:Se,Rt=ut?ge:n,Xt=ut?n:ge;S|=ut?E:P,S&=~(ut?P:E),S&T||(S&=-4);var jn=[g,S,te,Rt,ft,Xt,Nt,Oe,Be,lt],Jt=M.apply(n,jn);return qp(g)&&Hp(Jt,jn),Jt.placeholder=U,Gp(Jt,g,S)}function Mp(g){var S=qr[g];return function(M,U){if(M=Wa(M),U=U==null?0:wr(ln(U),292),U&&Bd(M)){var te=(qn(M)+"e").split("e"),ge=S(te[0]+"e"+(+te[1]+U));return te=(qn(ge)+"e").split("e"),+(te[0]+"e"+(+te[1]-U))}return S(M)}}var c1=_n&&1/op(new _n([,-0]))[1]==K?function(g){return new _n(g)}:Et;function dh(g){return function(S){var M=oi(S);return M==W?sp(S):M==ht?w_(S):b_(S,g(S))}}function Is(g,S,M,U,te,ge,Se,Oe){var Be=S&_;if(!Be&&typeof g!="function")throw new ha(o);var lt=U?U.length:0;if(lt||(S&=-97,U=te=n),Se=Se===n?Se:gr(ln(Se),0),Oe=Oe===n?Oe:ln(Oe),lt-=te?te.length:0,S&P){var ut=U,ft=te;U=te=n}var Nt=Be?n:Fp(g),Rt=[g,S,M,U,te,ut,ft,ge,Se,Oe];if(Nt&&gh(Rt,Nt),g=Rt[0],S=Rt[1],M=Rt[2],U=Rt[3],te=Rt[4],Oe=Rt[9]=Rt[9]===n?Be?0:g.length:gr(Rt[9]-lt,0),!Oe&&S&(C|O)&&(S&=-25),!S||S==w)var Xt=s1(g,S,M);else S==C||S==O?Xt=o1(g,S,Oe):(S==E||S==(w|E))&&!te.length?Xt=l1(g,S,M,U):Xt=Dr.apply(n,Rt);var jn=Nt?Zd:Hp;return Gp(jn(Xt,Rt),g,S)}function Ip(g,S,M,U){return g===n||Xi(g,cu[M])&&!zn.call(U,M)?S:g}function sv(g,S,M,U,te,ge){return _r(g)&&_r(S)&&(ge.set(S,g),Jd(g,S,n,sv,ge),ge.delete(S)),g}function u1(g){return Ga(g)?n:g}function d1(g,S,M,U,te,ge){var Se=M&x,Oe=g.length,Be=S.length;if(Oe!=Be&&!(Se&&Be>Oe))return!1;var lt=ge.get(g),ut=ge.get(S);if(lt&&ut)return lt==S&&ut==g;var ft=-1,Nt=!0,Rt=M&b?new oo:n;for(ge.set(g,S),ge.set(S,g);++ft<Oe;){var Xt=g[ft],jn=S[ft];if(U)var Jt=Se?U(jn,Xt,ft,S,g,ge):U(Xt,jn,ft,g,S,ge);if(Jt!==n){if(Jt)continue;Nt=!1;break}if(Rt){if(!wy(S,function(En,Ln){if(!au(Rt,Ln)&&(Xt===En||te(Xt,En,M,U,ge)))return Rt.push(Ln)})){Nt=!1;break}}else if(!(Xt===jn||te(Xt,jn,M,U,ge))){Nt=!1;break}}return ge.delete(g),ge.delete(S),Nt}function h1(g,S,M,U,te,ge,Se){switch(M){case we:if(g.byteLength!=S.byteLength||g.byteOffset!=S.byteOffset)return!1;g=g.buffer,S=S.buffer;case De:return!(g.byteLength!=S.byteLength||!ge(new du(g),new du(S)));case de:case Q:case ie:return Xi(+g,+S);case re:return g.name==S.name&&g.message==S.message;case et:case _e:return g==S+"";case W:var Oe=sp;case ht:var Be=U&x;if(Oe||(Oe=op),g.size!=S.size&&!Be)return!1;var lt=Se.get(g);if(lt)return lt==S;U|=b,Se.set(g,S);var ut=d1(Oe(g),Oe(S),U,te,ge,Se);return Se.delete(g),ut;case Fe:if(Wl)return Wl.call(g)==Wl.call(S)}return!1}function si(g,S,M,U,te,ge){var Se=M&x,Oe=Rp(g),Be=Oe.length,lt=Rp(S),ut=lt.length;if(Be!=ut&&!Se)return!1;for(var ft=Be;ft--;){var Nt=Oe[ft];if(!(Se?Nt in S:zn.call(S,Nt)))return!1}var Rt=ge.get(g),Xt=ge.get(S);if(Rt&&Xt)return Rt==S&&Xt==g;var jn=!0;ge.set(g,S),ge.set(S,g);for(var Jt=Se;++ft<Be;){Nt=Oe[ft];var En=g[Nt],Ln=S[Nt];if(U)var ps=Se?U(Ln,En,Nt,S,g,ge):U(En,Ln,Nt,g,S,ge);if(!(ps===n?En===Ln||te(En,Ln,M,U,ge):ps)){jn=!1;break}Jt||(Jt=Nt=="constructor")}if(jn&&!Jt){var ba=g.constructor,ms=S.constructor;ba!=ms&&"constructor"in g&&"constructor"in S&&!(typeof ba=="function"&&ba instanceof ba&&typeof ms=="function"&&ms instanceof ms)&&(jn=!1)}return ge.delete(g),ge.delete(S),jn}function yr(g){return yh(dv(g,n,Yi),g+"")}function Rp(g){return H0(g,ti,fh)}function Lp(g){return H0(g,li,Bp)}var Fp=fu?function(g){return fu.get(g)}:Et;function hh(g){for(var S=g.name+"",M=Ba[S],U=zn.call(Ba,S)?M.length:0;U--;){var te=M[U],ge=te.func;if(ge==null||ge==g)return te.name}return S}function sc(g){var S=zn.call(ue,"placeholder")?ue:g;return S.placeholder}function $t(){var g=ue.iteratee||Gt;return g=g===Gt?Vy:g,arguments.length?g(arguments[0],arguments[1]):g}function wu(g,S){var M=g.__data__;return mo(S)?M[typeof S=="string"?"string":"hash"]:M.map}function $p(g){for(var S=ti(g),M=S.length;M--;){var U=S[M],te=g[U];S[M]=[U,te,g1(te)]}return S}function tl(g,S){var M=_y(g,S);return Ds(M)?M:n}function f1(g){var S=zn.call(g,Oi),M=g[Oi];try{g[Oi]=n;var U=!0}catch{}var te=Pi.call(g);return U&&(S?g[Oi]=M:delete g[Oi]),te}var fh=Wo?function(g){return g==null?[]:(g=In(g),ks(Wo(g),function(S){return Ul.call(g,S)}))}:pC,Bp=Wo?function(g){for(var S=[];g;)io(S,fh(g)),g=Ld(g);return S}:pC,oi=Tn;(zd&&oi(new zd(new ArrayBuffer(1)))!=we||Qr&&oi(new Qr)!=W||Sr&&oi(Sr.resolve())!=je||_n&&oi(new _n)!=ht||os&&oi(new os)!=Ke)&&(oi=function(g){var S=Tn(g),M=S==le?g.constructor:n,U=M?go(M):"";if(U)switch(U){case D0:return we;case M0:return W;case qd:return je;case Ud:return ht;case I0:return Ke}return S});function p1(g,S,M){for(var U=-1,te=M.length;++U<te;){var ge=M[U],Se=ge.size;switch(ge.type){case"drop":g+=Se;break;case"dropRight":S-=Se;break;case"take":S=wr(S,g+Se);break;case"takeRight":g=gr(g,S-Se);break}}return{start:g,end:S}}function ov(g){var S=g.match(no);return S?S[1].split(Es):[]}function ph(g,S,M){S=ho(S,g);for(var U=-1,te=S.length,ge=!1;++U<te;){var Se=Vn(S[U]);if(!(ge=g!=null&&M(g,Se)))break;g=g[Se]}return ge||++U!=te?ge:(te=g==null?0:g.length,!!te&&cc(te)&&ds(Se,te)&&(nn(g)||bo(g)))}function lv(g){var S=g.length,M=new g.constructor(S);return S&&typeof g[0]=="string"&&zn.call(g,"index")&&(M.index=g.index,M.input=g.input),M}function cv(g){return typeof g.constructor=="function"&&!or(g)?fa(Ld(g)):{}}function uv(g,S,M){var U=g.constructor;switch(S){case De:return tc(g);case de:case Q:return new U(+g);case we:return tv(g,M);case ve:case Ce:case nt:case Ve:case dt:case Ct:case kt:case ze:case Xe:return nv(g,M);case W:return new U;case ie:case _e:return new U(g);case et:return Op(g);case ht:return new U;case Fe:return r1(g)}}function m1(g,S){var M=S.length;if(!M)return g;var U=M-1;return S[U]=(M>1?"& ":"")+S[U],S=S.join(M>2?", ":" "),g.replace(to,`{
/* [wrapped with `+S+`] */
`)}function po(g){return nn(g)||bo(g)||!!(zi&&g&&g[zi])}function ds(g,S){var M=typeof g;return S=S??se,!!S&&(M=="number"||M!="symbol"&&Fl.test(g))&&g>-1&&g%1==0&&g<S}function Ii(g,S,M){if(!_r(M))return!1;var U=typeof S;return(U=="number"?Zr(M)&&ds(S,M.length):U=="string"&&S in M)?Xi(M[S],g):!1}function zp(g,S){if(nn(g))return!1;var M=typeof g;return M=="number"||M=="symbol"||M=="boolean"||g==null||Ri(g)?!0:pt.test(g)||!ur.test(g)||S!=null&&g in In(S)}function mo(g){var S=typeof g;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?g!=="__proto__":g===null}function qp(g){var S=hh(g),M=ue[S];if(typeof M!="function"||!(S in xn.prototype))return!1;if(g===M)return!0;var U=Fp(M);return!!U&&g===U[0]}function Up(g){return!!Ey&&Ey in g}var mh=Id?hs:mC;function or(g){var S=g&&g.constructor,M=typeof S=="function"&&S.prototype||cu;return g===M}function g1(g){return g===g&&!_r(g)}function y1(g,S){return function(M){return M==null?!1:M[g]===S&&(S!==n||g in In(M))}}function v1(g){var S=Th(g,function(U){return M.size===u&&M.clear(),U}),M=S.cache;return S}function gh(g,S){var M=g[1],U=S[1],te=M|U,ge=te<(w|_|I),Se=U==I&&M==C||U==I&&M==F&&g[7].length<=S[8]||U==(I|F)&&S[7].length<=S[8]&&M==C;if(!(ge||Se))return g;U&w&&(g[2]=S[2],te|=M&w?0:T);var Oe=S[3];if(Oe){var Be=g[3];g[3]=Be?rv(Be,Oe,S[4]):Oe,g[4]=Be?Ho(g[3],f):S[4]}return Oe=S[5],Oe&&(Be=g[5],g[5]=Be?a1(Be,Oe,S[6]):Oe,g[6]=Be?Ho(g[5],f):S[6]),Oe=S[7],Oe&&(g[7]=Oe),U&I&&(g[8]=g[8]==null?S[8]:wr(g[8],S[8])),g[9]==null&&(g[9]=S[9]),g[0]=S[0],g[1]=te,g}function nl(g){var S=[];if(g!=null)for(var M in In(g))S.push(M);return S}function x1(g){return Pi.call(g)}function dv(g,S,M){return S=gr(S===n?g.length-1:S,0),function(){for(var U=arguments,te=-1,ge=gr(U.length-S,0),Se=Qe(ge);++te<ge;)Se[te]=U[S+te];te=-1;for(var Oe=Qe(S+1);++te<S;)Oe[te]=U[te];return Oe[S]=M(Se),Bi(g,this,Oe)}}function Su(g,S){return S.length<2?g:qa(g,pa(S,0,-1))}function Rs(g,S){for(var M=g.length,U=wr(S.length,M),te=Xr(g);U--;){var ge=S[U];g[U]=ds(ge,M)?te[ge]:n}return g}function Vp(g,S){if(!(S==="constructor"&&typeof g[S]=="function")&&S!="__proto__")return g[S]}var Hp=vh(Zd),Nu=ky||function(g,S){return Br.setTimeout(g,S)},yh=vh(eh);function Gp(g,S,M){var U=S+"";return yh(g,m1(U,b1(ov(U),M)))}function vh(g){var S=0,M=0;return function(){var U=so(),te=V-(U-M);if(M=U,te>0){if(++S>=H)return arguments[0]}else S=0;return g.apply(n,arguments)}}function xh(g,S){var M=-1,U=g.length,te=U-1;for(S=S===n?U:S;++M<S;){var ge=Tp(M,te),Se=g[ge];g[ge]=g[M],g[M]=Se}return g.length=S,g}var Ls=v1(function(g){var S=[];return g.charCodeAt(0)===46&&S.push(""),g.replace(jt,function(M,U,te,ge){S.push(te?ge.replace(Gc,"$1"):U||M)}),S});function Vn(g){if(typeof g=="string"||Ri(g))return g;var S=g+"";return S=="0"&&1/g==-1/0?"-0":S}function go(g){if(g!=null){try{return Rd.call(g)}catch{}try{return g+""}catch{}}return""}function b1(g,S){return Ia(xe,function(M){var U="_."+M[0];S&M[1]&&!Zf(g,U)&&g.push(U)}),g.sort()}function Jr(g){if(g instanceof xn)return g.clone();var S=new Ui(g.__wrapped__,g.__chain__);return S.__actions__=Xr(g.__actions__),S.__index__=g.__index__,S.__values__=g.__values__,S}function O_(g,S,M){(M?Ii(g,S,M):S===n)?S=1:S=gr(ln(S),0);var U=g==null?0:g.length;if(!U||S<1)return[];for(var te=0,ge=0,Se=Qe(hu(U/S));te<U;)Se[ge++]=pa(g,te,te+=S);return Se}function j1(g){for(var S=-1,M=g==null?0:g.length,U=0,te=[];++S<M;){var ge=g[S];ge&&(te[U++]=ge)}return te}function w1(){var g=arguments.length;if(!g)return[];for(var S=Qe(g-1),M=arguments[0],U=g;U--;)S[U-1]=arguments[U];return io(nn(M)?Xr(M):[M],Cn(S,1))}var Nr=pn(function(g,S){return Ir(g)?Xo(g,Cn(S,1,Ir,!0)):[]}),Ki=pn(function(g,S){var M=Ni(S);return Ir(M)&&(M=n),Ir(g)?Xo(g,Cn(S,1,Ir,!0),$t(M,2)):[]}),yo=pn(function(g,S){var M=Ni(S);return Ir(M)&&(M=n),Ir(g)?Xo(g,Cn(S,1,Ir,!0),n,M):[]});function S1(g,S,M){var U=g==null?0:g.length;return U?(S=M||S===n?1:ln(S),pa(g,S<0?0:S,U)):[]}function N1(g,S,M){var U=g==null?0:g.length;return U?(S=M||S===n?1:ln(S),S=U-S,pa(g,0,S<0?0:S)):[]}function D_(g,S){return g&&g.length?rh(g,$t(S,3),!0,!0):[]}function hv(g,S){return g&&g.length?rh(g,$t(S,3),!0):[]}function ga(g,S,M,U){var te=g==null?0:g.length;return te?(M&&typeof M!="number"&&Ii(g,S,M)&&(M=0,U=te),yn(g,S,M,U)):[]}function Va(g,S,M){var U=g==null?0:g.length;if(!U)return-1;var te=M==null?0:ln(M);return te<0&&(te=gr(U+te,0)),ep(g,$t(S,3),te)}function fv(g,S,M){var U=g==null?0:g.length;if(!U)return-1;var te=U-1;return M!==n&&(te=ln(M),te=M<0?gr(U+te,0):wr(te,U-1)),ep(g,$t(S,3),te,!0)}function Yi(g){var S=g==null?0:g.length;return S?Cn(g,1):[]}function _1(g){var S=g==null?0:g.length;return S?Cn(g,K):[]}function rl(g,S){var M=g==null?0:g.length;return M?(S=S===n?1:ln(S),Cn(g,S)):[]}function oc(g){for(var S=-1,M=g==null?0:g.length,U={};++S<M;){var te=g[S];U[te[0]]=te[1]}return U}function vo(g){return g&&g.length?g[0]:n}function pv(g,S,M){var U=g==null?0:g.length;if(!U)return-1;var te=M==null?0:ln(M);return te<0&&(te=gr(U+te,0)),ru(g,S,te)}function mv(g){var S=g==null?0:g.length;return S?pa(g,0,-1):[]}var Fs=pn(function(g){var S=jr(g,Pp);return S.length&&S[0]===g[0]?By(S):[]}),C1=pn(function(g){var S=Ni(g),M=jr(g,Pp);return S===Ni(M)?S=n:M.pop(),M.length&&M[0]===g[0]?By(M,$t(S,2)):[]}),_u=pn(function(g){var S=Ni(g),M=jr(g,Pp);return S=typeof S=="function"?S:n,S&&M.pop(),M.length&&M[0]===g[0]?By(M,n,S):[]});function bh(g,S){return g==null?"":Fa.call(g,S)}function Ni(g){var S=g==null?0:g.length;return S?g[S-1]:n}function Cu(g,S,M){var U=g==null?0:g.length;if(!U)return-1;var te=U;return M!==n&&(te=ln(M),te=te<0?gr(U+te,0):wr(te,U-1)),S===S?da(g,S,te):ep(g,iu,te,!0)}function T1(g,S){return g&&g.length?Wy(g,ln(S)):n}var E1=pn(Tu);function Tu(g,S){return g&&g.length&&S&&S.length?Cp(g,S):g}function A1(g,S,M){return g&&g.length&&S&&S.length?Cp(g,S,$t(M,2)):g}function Wp(g,S,M){return g&&g.length&&S&&S.length?Cp(g,S,n,M):g}var k1=yr(function(g,S){var M=g==null?0:g.length,U=Kd(g,S);return Yy(g,jr(S,function(te){return ds(te,M)?+te:te}).sort(sh)),U});function M_(g,S){var M=[];if(!(g&&g.length))return M;var U=-1,te=[],ge=g.length;for(S=$t(S,3);++U<ge;){var Se=g[U];S(Se,U,g)&&(M.push(Se),te.push(U))}return Yy(g,te),M}function gv(g){return g==null?g:Oy.call(g)}function Kn(g,S,M){var U=g==null?0:g.length;return U?(M&&typeof M!="number"&&Ii(g,S,M)?(S=0,M=U):(S=S==null?0:ln(S),M=M===n?U:ln(M)),pa(g,S,M)):[]}function dr(g,S){return th(g,S)}function Sn(g,S,M){return Ap(g,S,$t(M,2))}function Dn(g,S){var M=g==null?0:g.length;if(M){var U=th(g,S);if(U<M&&Xi(g[U],S))return U}return-1}function Yn(g,S){return th(g,S,!0)}function ya(g,S,M){return Ap(g,S,$t(M,2),!0)}function il(g,S){var M=g==null?0:g.length;if(M){var U=th(g,S,!0)-1;if(Xi(g[U],S))return U}return-1}function Eu(g){return g&&g.length?Xy(g):[]}function yv(g,S){return g&&g.length?Xy(g,$t(S,2)):[]}function xo(g){var S=g==null?0:g.length;return S?pa(g,1,S):[]}function Mr(g,S,M){return g&&g.length?(S=M||S===n?1:ln(S),pa(g,0,S<0?0:S)):[]}function al(g,S,M){var U=g==null?0:g.length;return U?(S=M||S===n?1:ln(S),S=U-S,pa(g,S<0?0:S,U)):[]}function lc(g,S){return g&&g.length?rh(g,$t(S,3),!1,!0):[]}function vv(g,S){return g&&g.length?rh(g,$t(S,3)):[]}var Ha=pn(function(g){return uo(Cn(g,1,Ir,!0))}),Au=pn(function(g){var S=Ni(g);return Ir(S)&&(S=n),uo(Cn(g,1,Ir,!0),$t(S,2))}),jh=pn(function(g){var S=Ni(g);return S=typeof S=="function"?S:n,uo(Cn(g,1,Ir,!0),n,S)});function Qi(g){return g&&g.length?uo(g):[]}function xv(g,S){return g&&g.length?uo(g,$t(S,2)):[]}function bv(g,S){return S=typeof S=="function"?S:n,g&&g.length?uo(g,n,S):[]}function ku(g){if(!(g&&g.length))return[];var S=0;return g=ks(g,function(M){if(Ir(M))return S=gr(M.length,S),!0}),Uo(S,function(M){return jr(g,tp(M))})}function wh(g,S){if(!(g&&g.length))return[];var M=ku(g);return S==null?M:jr(M,function(U){return Bi(S,n,U)})}var sl=pn(function(g,S){return Ir(g)?Xo(g,S):[]}),mi=pn(function(g){return ih(ks(g,Ir))}),ol=pn(function(g){var S=Ni(g);return Ir(S)&&(S=n),ih(ks(g,Ir),$t(S,2))}),Pu=pn(function(g){var S=Ni(g);return S=typeof S=="function"?S:n,ih(ks(g,Ir),n,S)}),Ou=pn(ku);function jv(g,S){return Zy(g||[],S||[],Ql)}function wv(g,S){return Zy(g||[],S||[],bu)}var P1=pn(function(g){var S=g.length,M=S>1?g[S-1]:n;return M=typeof M=="function"?(g.pop(),M):n,wh(g,M)});function Du(g){var S=ue(g);return S.__chain__=!0,S}function Sv(g,S){return S(g),g}function _i(g,S){return S(g)}var O1=yr(function(g){var S=g.length,M=S?g[0]:0,U=this.__wrapped__,te=function(ge){return Kd(ge,g)};return S>1||this.__actions__.length||!(U instanceof xn)||!ds(M)?this.thru(te):(U=U.slice(M,+M+(S?1:0)),U.__actions__.push({func:_i,args:[te],thisArg:n}),new Ui(U,this.__chain__).thru(function(ge){return S&&!ge.length&&ge.push(n),ge}))});function va(){return Du(this)}function D1(){return new Ui(this.value(),this.__chain__)}function M1(){this.__values__===n&&(this.__values__=xa(this.value()));var g=this.__index__>=this.__values__.length,S=g?n:this.__values__[this.__index__++];return{done:g,value:S}}function I_(){return this}function ll(g){for(var S,M=this;M instanceof za;){var U=Jr(M);U.__index__=0,U.__values__=n,S?te.__wrapped__=U:S=U;var te=U;M=M.__wrapped__}return te.__wrapped__=g,S}function Kp(){var g=this.__wrapped__;if(g instanceof xn){var S=g;return this.__actions__.length&&(S=new xn(this)),S=S.reverse(),S.__actions__.push({func:_i,args:[gv],thisArg:n}),new Ui(S,this.__chain__)}return this.thru(gv)}function Nv(){return e1(this.__wrapped__,this.__actions__)}var Mu=nc(function(g,S,M){zn.call(g,M)?++g[M]:ls(g,M,1)});function I1(g,S,M){var U=nn(g)?b0:Fy;return M&&Ii(g,S,M)&&(S=n),U(g,$t(S,3))}function R1(g,S){var M=nn(g)?ks:Wn;return M(g,$t(S,3))}var L1=fo(Va),_v=fo(fv);function Cv(g,S){return Cn(Sh(g,S),1)}function R_(g,S){return Cn(Sh(g,S),K)}function L_(g,S,M){return M=M===n?1:ln(M),Cn(Sh(g,S),M)}function F1(g,S){var M=nn(g)?Ia:co;return M(g,$t(S,3))}function Tv(g,S){var M=nn(g)?m_:vp;return M(g,$t(S,3))}var $1=nc(function(g,S,M){zn.call(g,M)?g[M].push(S):ls(g,M,[S])});function Iu(g,S,M,U){g=Zr(g)?g:qu(g),M=M&&!U?ln(M):0;var te=g.length;return M<0&&(M=gr(te+M,0)),sm(g)?M<=te&&g.indexOf(S,M)>-1:!!te&&ru(g,S,M)>-1}var Yp=pn(function(g,S,M){var U=-1,te=typeof S=="function",ge=Zr(g)?Qe(g.length):[];return co(g,function(Se){ge[++U]=te?Bi(S,Se,M):Zl(Se,S,M)}),ge}),B1=nc(function(g,S,M){ls(g,M,S)});function Sh(g,S){var M=nn(g)?jr:Hy;return M(g,$t(S,3))}function z1(g,S,M,U){return g==null?[]:(nn(S)||(S=S==null?[]:[S]),M=U?n:M,nn(M)||(M=M==null?[]:[M]),Ky(g,S,M))}var q1=nc(function(g,S,M){g[M?0:1].push(S)},function(){return[[],[]]});function U1(g,S,M){var U=nn(g)?jy:Ny,te=arguments.length<3;return U(g,$t(S,4),M,te,co)}function V1(g,S,M){var U=nn(g)?g_:Ny,te=arguments.length<3;return U(g,$t(S,4),M,te,vp)}function Qp(g,S){var M=nn(g)?ks:Wn;return M(g,Eh($t(S,3)))}function H1(g){var S=nn(g)?mu:xu;return S(g)}function G1(g,S,M){(M?Ii(g,S,M):S===n)?S=1:S=ln(S);var U=nn(g)?q0:Ep;return U(g,S)}function lr(g){var S=nn(g)?U0:J0;return S(g)}function Ev(g){if(g==null)return 0;if(Zr(g))return sm(g)?Ps(g):g.length;var S=oi(g);return S==W||S==ht?g.size:wp(g).length}function F_(g,S,M){var U=nn(g)?wy:Z0;return M&&Ii(g,S,M)&&(S=n),U(g,$t(S,3))}var W1=pn(function(g,S){if(g==null)return[];var M=S.length;return M>1&&Ii(g,S[0],S[1])?S=[]:M>2&&Ii(S[0],S[1],S[2])&&(S=[S[0]]),Ky(g,Cn(S,1),[])}),Xp=Hl||function(){return Br.Date.now()};function $_(g,S){if(typeof S!="function")throw new ha(o);return g=ln(g),function(){if(--g<1)return S.apply(this,arguments)}}function K1(g,S,M){return S=M?n:S,S=g&&S==null?g.length:S,Is(g,I,n,n,n,n,S)}function Nh(g,S){var M;if(typeof S!="function")throw new ha(o);return g=ln(g),function(){return--g>0&&(M=S.apply(this,arguments)),g<=1&&(S=n),M}}var cl=pn(function(g,S,M){var U=w;if(M.length){var te=Ho(M,sc(cl));U|=E}return Is(g,U,S,M,te)}),Jp=pn(function(g,S,M){var U=w|_;if(M.length){var te=Ho(M,sc(Jp));U|=E}return Is(S,U,g,M,te)});function _h(g,S,M){S=M?n:S;var U=Is(g,C,n,n,n,n,n,S);return U.placeholder=_h.placeholder,U}function Zp(g,S,M){S=M?n:S;var U=Is(g,O,n,n,n,n,n,S);return U.placeholder=Zp.placeholder,U}function ul(g,S,M){var U,te,ge,Se,Oe,Be,lt=0,ut=!1,ft=!1,Nt=!0;if(typeof g!="function")throw new ha(o);S=Wa(S)||0,_r(M)&&(ut=!!M.leading,ft="maxWait"in M,ge=ft?gr(Wa(M.maxWait)||0,S):ge,Nt="trailing"in M?!!M.trailing:Nt);function Rt(ni){var wo=U,uc=te;return U=te=n,lt=ni,Se=g.apply(uc,wo),Se}function Xt(ni){return lt=ni,Oe=Nu(En,S),ut?Rt(ni):Se}function jn(ni){var wo=ni-Be,uc=ni-lt,gI=S-wo;return ft?wr(gI,ge-uc):gI}function Jt(ni){var wo=ni-Be,uc=ni-lt;return Be===n||wo>=S||wo<0||ft&&uc>=ge}function En(){var ni=Xp();if(Jt(ni))return Ln(ni);Oe=Nu(En,jn(ni))}function Ln(ni){return Oe=n,Nt&&U?Rt(ni):(U=te=n,Se)}function ps(){Oe!==n&&n1(Oe),lt=0,U=Be=te=Oe=n}function ba(){return Oe===n?Se:Ln(Xp())}function ms(){var ni=Xp(),wo=Jt(ni);if(U=arguments,te=this,Be=ni,wo){if(Oe===n)return Xt(Be);if(ft)return n1(Oe),Oe=Nu(En,S),Rt(Be)}return Oe===n&&(Oe=Nu(En,S)),Se}return ms.cancel=ps,ms.flush=ba,ms}var $s=pn(function(g,S){return Xl(g,1,S)}),Ch=pn(function(g,S,M){return Xl(g,Wa(S)||0,M)});function B_(g){return Is(g,$)}function Th(g,S){if(typeof g!="function"||S!=null&&typeof S!="function")throw new ha(o);var M=function(){var U=arguments,te=S?S.apply(this,U):U[0],ge=M.cache;if(ge.has(te))return ge.get(te);var Se=g.apply(this,U);return M.cache=ge.set(te,Se)||ge,Se};return M.cache=new(Th.Cache||Vi),M}Th.Cache=Vi;function Eh(g){if(typeof g!="function")throw new ha(o);return function(){var S=arguments;switch(S.length){case 0:return!g.call(this);case 1:return!g.call(this,S[0]);case 2:return!g.call(this,S[0],S[1]);case 3:return!g.call(this,S[0],S[1],S[2])}return!g.apply(this,S)}}function Y1(g){return Nh(2,g)}var Q1=t1(function(g,S){S=S.length==1&&nn(S[0])?jr(S[0],ua($t())):jr(Cn(S,1),ua($t()));var M=S.length;return pn(function(U){for(var te=-1,ge=wr(U.length,M);++te<ge;)U[te]=S[te].call(this,U[te]);return Bi(g,this,U)})}),Av=pn(function(g,S){var M=Ho(S,sc(Av));return Is(g,E,n,S,M)}),em=pn(function(g,S){var M=Ho(S,sc(em));return Is(g,P,n,S,M)}),X1=yr(function(g,S){return Is(g,F,n,n,n,S)});function J1(g,S){if(typeof g!="function")throw new ha(o);return S=S===n?S:ln(S),pn(g,S)}function z_(g,S){if(typeof g!="function")throw new ha(o);return S=S==null?0:gr(ln(S),0),pn(function(M){var U=M[S],te=Zo(M,0,S);return U&&io(te,U),Bi(g,this,te)})}function kv(g,S,M){var U=!0,te=!0;if(typeof g!="function")throw new ha(o);return _r(M)&&(U="leading"in M?!!M.leading:U,te="trailing"in M?!!M.trailing:te),ul(g,S,{leading:U,maxWait:S,trailing:te})}function Pv(g){return K1(g,1)}function q_(g,S){return Av(ah(S),g)}function U_(){if(!arguments.length)return[];var g=arguments[0];return nn(g)?g:[g]}function Ah(g){return wi(g,v)}function V_(g,S){return S=typeof S=="function"?S:n,wi(g,v,S)}function Z1(g){return wi(g,p|v)}function Nn(g,S){return S=typeof S=="function"?S:n,wi(g,p|v,S)}function Ov(g,S){return S==null||Ly(g,S,ti(S))}function Xi(g,S){return g===S||g!==g&&S!==S}var Dv=ac(Yd),ej=ac(function(g,S){return g>=S}),bo=xp(function(){return arguments}())?xp:function(g){return kr(g)&&zn.call(g,"callee")&&!Ul.call(g,"callee")},nn=Qe.isArray,tm=Jf?ua(Jf):Hi;function Zr(g){return g!=null&&cc(g.length)&&!hs(g)}function Ir(g){return kr(g)&&Zr(g)}function H_(g){return g===!0||g===!1||kr(g)&&Tn(g)==de}var dl=hp||mC,tj=m0?ua(m0):Ur;function nj(g){return kr(g)&&g.nodeType===1&&!Ga(g)}function nm(g){if(g==null)return!0;if(Zr(g)&&(nn(g)||typeof g=="string"||typeof g.splice=="function"||dl(g)||Ru(g)||bo(g)))return!g.length;var S=oi(g);if(S==W||S==ht)return!g.size;if(or(g))return!wp(g).length;for(var M in g)if(zn.call(g,M))return!1;return!0}function Zn(g,S){return ec(g,S)}function Mv(g,S,M){M=typeof M=="function"?M:n;var U=M?M(g,S):n;return U===n?ec(g,S,n,M):!!U}function ei(g){if(!kr(g))return!1;var S=Tn(g);return S==re||S==oe||typeof g.message=="string"&&typeof g.name=="string"&&!Ga(g)}function G_(g){return typeof g=="number"&&Bd(g)}function hs(g){if(!_r(g))return!1;var S=Tn(g);return S==ae||S==X||S==ke||S==Ge}function rm(g){return typeof g=="number"&&g==ln(g)}function cc(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=se}function _r(g){var S=typeof g;return g!=null&&(S=="object"||S=="function")}function kr(g){return g!=null&&typeof g=="object"}var im=g0?ua(g0):bp;function Iv(g,S){return g===S||Xd(g,S,$p(S))}function W_(g,S,M){return M=typeof M=="function"?M:n,Xd(g,S,$p(S),M)}function rj(g){return aj(g)&&g!=+g}function K_(g){if(mh(g))throw new Qt(s);return Ds(g)}function ij(g){return g===null}function Y_(g){return g==null}function aj(g){return typeof g=="number"||kr(g)&&Tn(g)==ie}function Ga(g){if(!kr(g)||Tn(g)!=le)return!1;var S=Ld(g);if(S===null)return!0;var M=zn.call(S,"constructor")&&S.constructor;return typeof M=="function"&&M instanceof M&&Rd.call(M)==La}var am=y0?ua(y0):jp;function Rv(g){return rm(g)&&g>=-9007199254740991&&g<=se}var sj=v0?ua(v0):qy;function sm(g){return typeof g=="string"||!nn(g)&&kr(g)&&Tn(g)==_e}function Ri(g){return typeof g=="symbol"||kr(g)&&Tn(g)==Fe}var Ru=x0?ua(x0):Uy;function fs(g){return g===n}function Lv(g){return kr(g)&&oi(g)==Ke}function oj(g){return kr(g)&&Tn(g)==be}var lj=ac(Sp),kh=ac(function(g,S){return g<=S});function xa(g){if(!g)return[];if(Zr(g))return sm(g)?Ra(g):Xr(g);if(Vl&&g[Vl])return E0(g[Vl]());var S=oi(g),M=S==W?sp:S==ht?op:qu;return M(g)}function Bs(g){if(!g)return g===0?g:0;if(g=Wa(g),g===K||g===-1/0){var S=g<0?-1:1;return S*G}return g===g?g:0}function ln(g){var S=Bs(g),M=S%1;return S===S?M?S-M:S:0}function zs(g){return g?cs(ln(g),0,fe):0}function Wa(g){if(typeof g=="number")return g;if(Ri(g))return B;if(_r(g)){var S=typeof g.valueOf=="function"?g.valueOf():g;g=_r(S)?S+"":S}if(typeof g!="string")return g===0?g:+g;g=N0(g);var M=ai.test(g);return M||s0.test(g)?f_(g.slice(2),M?2:8):Yc.test(g)?B:+g}function cj(g){return Wi(g,li(g))}function Lu(g){return g?cs(ln(g),-9007199254740991,se):g===0?g:0}function qn(g){return g==null?"":Gi(g)}var Q_=rc(function(g,S){if(or(S)||Zr(S)){Wi(S,ti(S),g);return}for(var M in S)zn.call(S,M)&&Ql(g,M,S[M])}),uj=rc(function(g,S){Wi(S,li(S),g)}),om=rc(function(g,S,M,U){Wi(S,li(S),g,U)}),X_=rc(function(g,S,M,U){Wi(S,ti(S),g,U)}),J_=yr(Kd);function Z_(g,S){var M=fa(g);return S==null?M:lo(M,S)}var eC=pn(function(g,S){g=In(g);var M=-1,U=S.length,te=U>2?S[2]:n;for(te&&Ii(S[0],S[1],te)&&(U=1);++M<U;)for(var ge=S[M],Se=li(ge),Oe=-1,Be=Se.length;++Oe<Be;){var lt=Se[Oe],ut=g[lt];(ut===n||Xi(ut,cu[lt])&&!zn.call(g,lt))&&(g[lt]=ge[lt])}return g}),dj=pn(function(g){return g.push(n,sv),Bi(Mh,n,g)});function Fu(g,S){return j0(g,$t(S,3),Si)}function Ph(g,S){return j0(g,$t(S,3),vu)}function hj(g,S){return g==null?g:yu(g,$t(S,3),li)}function tC(g,S){return g==null?g:Jl(g,$t(S,3),li)}function $u(g,S){return g&&Si(g,$t(S,3))}function Oh(g,S){return g&&vu(g,$t(S,3))}function fj(g){return g==null?[]:Jo(g,ti(g))}function lm(g){return g==null?[]:Jo(g,li(g))}function Dh(g,S,M){var U=g==null?n:qa(g,S);return U===n?M:U}function Fv(g,S){return g!=null&&ph(g,S,$y)}function Bu(g,S){return g!=null&&ph(g,S,G0)}var pj=lh(function(g,S,M){S!=null&&typeof S.toString!="function"&&(S=Pi.call(S)),g[S]=M},Ue(He)),mj=lh(function(g,S,M){S!=null&&typeof S.toString!="function"&&(S=Pi.call(S)),zn.call(g,S)?g[S].push(M):g[S]=[M]},$t),nC=pn(Zl);function ti(g){return Zr(g)?Ry(g):wp(g)}function li(g){return Zr(g)?Ry(g,!0):K0(g)}function rC(g,S){var M={};return S=$t(S,3),Si(g,function(U,te,ge){ls(M,S(U,te,ge),U)}),M}function iC(g,S){var M={};return S=$t(S,3),Si(g,function(U,te,ge){ls(M,te,S(U,te,ge))}),M}var aC=rc(function(g,S,M){Jd(g,S,M)}),Mh=rc(function(g,S,M,U){Jd(g,S,M,U)}),cm=yr(function(g,S){var M={};if(g==null)return M;var U=!1;S=jr(S,function(ge){return ge=ho(ge,g),U||(U=ge.length>1),ge}),Wi(g,Lp(g),M),U&&(M=wi(M,p|y|v,u1));for(var te=S.length;te--;)nh(M,S[te]);return M});function $v(g,S){return zu(g,Eh($t(S)))}var sC=yr(function(g,S){return g==null?{}:Y0(g,S)});function zu(g,S){if(g==null)return{};var M=jr(Lp(g),function(U){return[U]});return S=$t(S),_p(g,M,function(U,te){return S(U,te[0])})}function oC(g,S,M){S=ho(S,g);var U=-1,te=S.length;for(te||(te=1,g=n);++U<te;){var ge=g==null?n:g[Vn(S[U])];ge===n&&(U=te,ge=M),g=hs(ge)?ge.call(g):ge}return g}function gj(g,S,M){return g==null?g:bu(g,S,M)}function yj(g,S,M,U){return U=typeof U=="function"?U:n,g==null?g:bu(g,S,M,U)}var Bv=dh(ti),zv=dh(li);function qv(g,S,M){var U=nn(g),te=U||dl(g)||Ru(g);if(S=$t(S,4),M==null){var ge=g&&g.constructor;te?M=U?new ge:[]:_r(g)?M=hs(ge)?fa(Ld(g)):{}:M={}}return(te?Ia:Si)(g,function(Se,Oe,Be){return S(M,Se,Oe,Be)}),M}function vj(g,S){return g==null?!0:nh(g,S)}function um(g,S,M){return g==null?g:Jy(g,S,ah(M))}function lC(g,S,M,U){return U=typeof U=="function"?U:n,g==null?g:Jy(g,S,ah(M),U)}function qu(g){return g==null?[]:ip(g,ti(g))}function Uv(g){return g==null?[]:ip(g,li(g))}function Vv(g,S,M){return M===n&&(M=S,S=n),M!==n&&(M=Wa(M),M=M===M?M:0),S!==n&&(S=Wa(S),S=S===S?S:0),cs(Wa(g),S,M)}function dm(g,S,M){return S=Bs(S),M===n?(M=S,S=0):M=Bs(M),g=Wa(g),W0(g,S,M)}function Hv(g,S,M){if(M&&typeof M!="boolean"&&Ii(g,S,M)&&(S=M=n),M===n&&(typeof S=="boolean"?(M=S,S=n):typeof g=="boolean"&&(M=g,g=n)),g===n&&S===n?(g=0,S=1):(g=Bs(g),S===n?(S=g,g=0):S=Bs(S)),g>S){var U=g;g=S,S=U}if(M||g%1||S%1){var te=Py();return wr(g+te*(S-g+Md("1e-"+((te+"").length-1))),S)}return Tp(g,S)}var xj=Mi(function(g,S,M){return S=S.toLowerCase(),g+(M?hm(S):S)});function hm(g){return N(qn(g).toLowerCase())}function jo(g){return g=qn(g),g&&g.replace(Qc,ap).replace(ro,"")}function hl(g,S,M){g=qn(g),S=Gi(S);var U=g.length;M=M===n?U:cs(ln(M),0,U);var te=M;return M-=S.length,M>=0&&g.slice(M,te)==S}function fl(g){return g=qn(g),g&&Tt.test(g)?g.replace(Ee,_0):g}function Ih(g){return g=qn(g),g&&Dt.test(g)?g.replace(bt,"\\$&"):g}var Rh=Mi(function(g,S,M){return g+(M?"-":"")+S.toLowerCase()}),pl=Mi(function(g,S,M){return g+(M?" ":"")+S.toLowerCase()}),cC=ma("toLowerCase");function bj(g,S,M){g=qn(g),S=ln(S);var U=S?Ps(g):0;if(!S||U>=S)return g;var te=(S-U)/2;return uh(ao(te),M)+g+uh(hu(te),M)}function Lh(g,S,M){g=qn(g),S=ln(S);var U=S?Ps(g):0;return S&&U<S?g+uh(S-U,M):g}function uC(g,S,M){g=qn(g),S=ln(S);var U=S?Ps(g):0;return S&&U<S?uh(S-U,M)+g:g}function jj(g,S,M){return M||S==null?S=0:S&&(S=+S),Gl(qn(g).replace(un,""),S||0)}function fm(g,S,M){return(M?Ii(g,S,M):S===n)?S=1:S=ln(S),Qy(qn(g),S)}function wj(){var g=arguments,S=qn(g[0]);return g.length<3?S:S.replace(g[1],g[2])}var dC=Mi(function(g,S,M){return g+(M?"_":"")+S.toLowerCase()});function pm(g,S,M){return M&&typeof M!="number"&&Ii(g,S,M)&&(S=M=n),M=M===n?fe:M>>>0,M?(g=qn(g),g&&(typeof S=="string"||S!=null&&!am(S))&&(S=Gi(S),!S&&Vo(g))?Zo(Ra(g),0,M):g.split(S,M)):[]}var mm=Mi(function(g,S,M){return g+(M?" ":"")+N(S)});function Sj(g,S,M){return g=qn(g),M=M==null?0:cs(ln(M),0,g.length),S=Gi(S),g.slice(M,M+S.length)==S}function Fh(g,S,M){var U=ue.templateSettings;M&&Ii(g,S,M)&&(S=n),g=qn(g),S=om({},S,U,Ip);var te=om({},S.imports,U.imports,Ip),ge=ti(te),Se=ip(te,ge),Oe,Be,lt=0,ut=S.interpolate||zf,ft="__p += '",Nt=lp((S.escape||zf).source+"|"+ut.source+"|"+(ut===It?Wc:zf).source+"|"+(S.evaluate||zf).source+"|$","g"),Rt="//# sourceURL="+(zn.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++h0+"]")+`
`;g.replace(Nt,function(Jt,En,Ln,ps,ba,ms){return Ln||(Ln=ps),ft+=g.slice(lt,ms).replace(o0,C0),En&&(Oe=!0,ft+=`' +
__e(`+En+`) +
'`),ba&&(Be=!0,ft+=`';
`+ba+`;
__p += '`),Ln&&(ft+=`' +
((__t = (`+Ln+`)) == null ? '' : __t) +
'`),lt=ms+Jt.length,Jt}),ft+=`';
`;var Xt=zn.call(S,"variable")&&S.variable;if(!Xt)ft=`with (obj) {
`+ft+`
}
`;else if(ty.test(Xt))throw new Qt(l);ft=(Be?ft.replace(Je,""):ft).replace(wt,"$1").replace(Pt,"$1;"),ft="function("+(Xt||"obj")+`) {
`+(Xt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Oe?", __e = _.escape":"")+(Be?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ft+`return __p
}`;var jn=R(function(){return Mn(ge,Rt+"return "+ft).apply(n,Se)});if(jn.source=ft,ei(jn))throw jn;return jn}function Gv(g){return qn(g).toLowerCase()}function gm(g){return qn(g).toUpperCase()}function Nj(g,S,M){if(g=qn(g),g&&(M||S===n))return N0(g);if(!g||!(S=Gi(S)))return g;var U=Ra(g),te=Ra(S),ge=su(U,te),Se=ou(U,te)+1;return Zo(U,ge,Se).join("")}function hC(g,S,M){if(g=qn(g),g&&(M||S===n))return g.slice(0,Cy(g)+1);if(!g||!(S=Gi(S)))return g;var U=Ra(g),te=ou(U,Ra(S))+1;return Zo(U,0,te).join("")}function ym(g,S,M){if(g=qn(g),g&&(M||S===n))return g.replace(un,"");if(!g||!(S=Gi(S)))return g;var U=Ra(g),te=su(U,Ra(S));return Zo(U,te).join("")}function d(g,S){var M=z,U=L;if(_r(S)){var te="separator"in S?S.separator:te;M="length"in S?ln(S.length):M,U="omission"in S?Gi(S.omission):U}g=qn(g);var ge=g.length;if(Vo(g)){var Se=Ra(g);ge=Se.length}if(M>=ge)return g;var Oe=M-Ps(U);if(Oe<1)return U;var Be=Se?Zo(Se,0,Oe).join(""):g.slice(0,Oe);if(te===n)return Be+U;if(Se&&(Oe+=Be.length-Oe),am(te)){if(g.slice(Oe).search(te)){var lt,ut=Be;for(te.global||(te=lp(te.source,qn(Kc.exec(te))+"g")),te.lastIndex=0;lt=te.exec(ut);)var ft=lt.index;Be=Be.slice(0,ft===n?Oe:ft)}}else if(g.indexOf(Gi(te),Oe)!=Oe){var Nt=Be.lastIndexOf(te);Nt>-1&&(Be=Be.slice(0,Nt))}return Be+U}function h(g){return g=qn(g),g&&at.test(g)?g.replace(dn,k0):g}var m=Mi(function(g,S,M){return g+(M?" ":"")+S.toUpperCase()}),N=ma("toUpperCase");function A(g,S,M){return g=qn(g),S=M?n:S,S===n?T0(g)?N_(g):x_(g):g.match(S)||[]}var R=pn(function(g,S){try{return Bi(g,n,S)}catch(M){return ei(M)?M:new Qt(M)}}),J=yr(function(g,S){return Ia(S,function(M){M=Vn(M),ls(g,M,cl(g[M],g))}),g});function he(g){var S=g==null?0:g.length,M=$t();return g=S?jr(g,function(U){if(typeof U[1]!="function")throw new ha(o);return[M(U[0]),U[1]]}):[],pn(function(U){for(var te=-1;++te<S;){var ge=g[te];if(Bi(ge[0],this,U))return Bi(ge[1],this,U)}})}function Te(g){return V0(wi(g,p))}function Ue(g){return function(){return g}}function it(g,S){return g==null||g!==g?S:g}var ct=Ms(),We=Ms(!0);function He(g){return g}function Gt(g){return Vy(typeof g=="function"?g:wi(g,p))}function Ht(g){return Gy(wi(g,p))}function er(g,S){return Np(g,wi(S,p))}var $e=pn(function(g,S){return function(M){return Zl(M,g,S)}}),Me=pn(function(g,S){return function(M){return Zl(g,M,S)}});function qe(g,S,M){var U=ti(S),te=Jo(S,U);M==null&&!(_r(S)&&(te.length||!U.length))&&(M=S,S=g,g=this,te=Jo(S,ti(S)));var ge=!(_r(M)&&"chain"in M)||!!M.chain,Se=hs(g);return Ia(te,function(Oe){var Be=S[Oe];g[Oe]=Be,Se&&(g.prototype[Oe]=function(){var lt=this.__chain__;if(ge||lt){var ut=g(this.__wrapped__),ft=ut.__actions__=Xr(this.__actions__);return ft.push({func:Be,args:arguments,thisArg:g}),ut.__chain__=lt,ut}return Be.apply(g,io([this.value()],arguments))})}),g}function ot(){return Br._===this&&(Br._=uu),this}function Et(){}function bn(g){return g=ln(g),pn(function(S){return Wy(S,g)})}var Lt=ch(jr),Wt=ch(b0),ci=ch(wy);function Rn(g){return zp(g)?tp(Vn(g)):Q0(g)}function ml(g){return function(S){return g==null?n:qa(g,S)}}var fC=el(),BW=el(!0);function pC(){return[]}function mC(){return!1}function zW(){return{}}function qW(){return""}function UW(){return!0}function VW(g,S){if(g=ln(g),g<1||g>se)return[];var M=fe,U=wr(g,fe);S=$t(S),g-=fe;for(var te=Uo(U,S);++M<g;)S(M);return te}function HW(g){return nn(g)?jr(g,Vn):Ri(g)?[g]:Xr(Ls(qn(g)))}function GW(g){var S=++as;return qn(g)+S}var WW=ju(function(g,S){return g+S},0),KW=Mp("ceil"),YW=ju(function(g,S){return g/S},1),QW=Mp("floor");function XW(g){return g&&g.length?us(g,He,Yd):n}function JW(g,S){return g&&g.length?us(g,$t(S,2),Yd):n}function ZW(g){return w0(g,He)}function eK(g,S){return w0(g,$t(S,2))}function tK(g){return g&&g.length?us(g,He,Sp):n}function nK(g,S){return g&&g.length?us(g,$t(S,2),Sp):n}var rK=ju(function(g,S){return g*S},1),iK=Mp("round"),aK=ju(function(g,S){return g-S},0);function sK(g){return g&&g.length?rp(g,He):0}function oK(g,S){return g&&g.length?rp(g,$t(S,2)):0}return ue.after=$_,ue.ary=K1,ue.assign=Q_,ue.assignIn=uj,ue.assignInWith=om,ue.assignWith=X_,ue.at=J_,ue.before=Nh,ue.bind=cl,ue.bindAll=J,ue.bindKey=Jp,ue.castArray=U_,ue.chain=Du,ue.chunk=O_,ue.compact=j1,ue.concat=w1,ue.cond=he,ue.conforms=Te,ue.constant=Ue,ue.countBy=Mu,ue.create=Z_,ue.curry=_h,ue.curryRight=Zp,ue.debounce=ul,ue.defaults=eC,ue.defaultsDeep=dj,ue.defer=$s,ue.delay=Ch,ue.difference=Nr,ue.differenceBy=Ki,ue.differenceWith=yo,ue.drop=S1,ue.dropRight=N1,ue.dropRightWhile=D_,ue.dropWhile=hv,ue.fill=ga,ue.filter=R1,ue.flatMap=Cv,ue.flatMapDeep=R_,ue.flatMapDepth=L_,ue.flatten=Yi,ue.flattenDeep=_1,ue.flattenDepth=rl,ue.flip=B_,ue.flow=ct,ue.flowRight=We,ue.fromPairs=oc,ue.functions=fj,ue.functionsIn=lm,ue.groupBy=$1,ue.initial=mv,ue.intersection=Fs,ue.intersectionBy=C1,ue.intersectionWith=_u,ue.invert=pj,ue.invertBy=mj,ue.invokeMap=Yp,ue.iteratee=Gt,ue.keyBy=B1,ue.keys=ti,ue.keysIn=li,ue.map=Sh,ue.mapKeys=rC,ue.mapValues=iC,ue.matches=Ht,ue.matchesProperty=er,ue.memoize=Th,ue.merge=aC,ue.mergeWith=Mh,ue.method=$e,ue.methodOf=Me,ue.mixin=qe,ue.negate=Eh,ue.nthArg=bn,ue.omit=cm,ue.omitBy=$v,ue.once=Y1,ue.orderBy=z1,ue.over=Lt,ue.overArgs=Q1,ue.overEvery=Wt,ue.overSome=ci,ue.partial=Av,ue.partialRight=em,ue.partition=q1,ue.pick=sC,ue.pickBy=zu,ue.property=Rn,ue.propertyOf=ml,ue.pull=E1,ue.pullAll=Tu,ue.pullAllBy=A1,ue.pullAllWith=Wp,ue.pullAt=k1,ue.range=fC,ue.rangeRight=BW,ue.rearg=X1,ue.reject=Qp,ue.remove=M_,ue.rest=J1,ue.reverse=gv,ue.sampleSize=G1,ue.set=gj,ue.setWith=yj,ue.shuffle=lr,ue.slice=Kn,ue.sortBy=W1,ue.sortedUniq=Eu,ue.sortedUniqBy=yv,ue.split=pm,ue.spread=z_,ue.tail=xo,ue.take=Mr,ue.takeRight=al,ue.takeRightWhile=lc,ue.takeWhile=vv,ue.tap=Sv,ue.throttle=kv,ue.thru=_i,ue.toArray=xa,ue.toPairs=Bv,ue.toPairsIn=zv,ue.toPath=HW,ue.toPlainObject=cj,ue.transform=qv,ue.unary=Pv,ue.union=Ha,ue.unionBy=Au,ue.unionWith=jh,ue.uniq=Qi,ue.uniqBy=xv,ue.uniqWith=bv,ue.unset=vj,ue.unzip=ku,ue.unzipWith=wh,ue.update=um,ue.updateWith=lC,ue.values=qu,ue.valuesIn=Uv,ue.without=sl,ue.words=A,ue.wrap=q_,ue.xor=mi,ue.xorBy=ol,ue.xorWith=Pu,ue.zip=Ou,ue.zipObject=jv,ue.zipObjectDeep=wv,ue.zipWith=P1,ue.entries=Bv,ue.entriesIn=zv,ue.extend=uj,ue.extendWith=om,qe(ue,ue),ue.add=WW,ue.attempt=R,ue.camelCase=xj,ue.capitalize=hm,ue.ceil=KW,ue.clamp=Vv,ue.clone=Ah,ue.cloneDeep=Z1,ue.cloneDeepWith=Nn,ue.cloneWith=V_,ue.conformsTo=Ov,ue.deburr=jo,ue.defaultTo=it,ue.divide=YW,ue.endsWith=hl,ue.eq=Xi,ue.escape=fl,ue.escapeRegExp=Ih,ue.every=I1,ue.find=L1,ue.findIndex=Va,ue.findKey=Fu,ue.findLast=_v,ue.findLastIndex=fv,ue.findLastKey=Ph,ue.floor=QW,ue.forEach=F1,ue.forEachRight=Tv,ue.forIn=hj,ue.forInRight=tC,ue.forOwn=$u,ue.forOwnRight=Oh,ue.get=Dh,ue.gt=Dv,ue.gte=ej,ue.has=Fv,ue.hasIn=Bu,ue.head=vo,ue.identity=He,ue.includes=Iu,ue.indexOf=pv,ue.inRange=dm,ue.invoke=nC,ue.isArguments=bo,ue.isArray=nn,ue.isArrayBuffer=tm,ue.isArrayLike=Zr,ue.isArrayLikeObject=Ir,ue.isBoolean=H_,ue.isBuffer=dl,ue.isDate=tj,ue.isElement=nj,ue.isEmpty=nm,ue.isEqual=Zn,ue.isEqualWith=Mv,ue.isError=ei,ue.isFinite=G_,ue.isFunction=hs,ue.isInteger=rm,ue.isLength=cc,ue.isMap=im,ue.isMatch=Iv,ue.isMatchWith=W_,ue.isNaN=rj,ue.isNative=K_,ue.isNil=Y_,ue.isNull=ij,ue.isNumber=aj,ue.isObject=_r,ue.isObjectLike=kr,ue.isPlainObject=Ga,ue.isRegExp=am,ue.isSafeInteger=Rv,ue.isSet=sj,ue.isString=sm,ue.isSymbol=Ri,ue.isTypedArray=Ru,ue.isUndefined=fs,ue.isWeakMap=Lv,ue.isWeakSet=oj,ue.join=bh,ue.kebabCase=Rh,ue.last=Ni,ue.lastIndexOf=Cu,ue.lowerCase=pl,ue.lowerFirst=cC,ue.lt=lj,ue.lte=kh,ue.max=XW,ue.maxBy=JW,ue.mean=ZW,ue.meanBy=eK,ue.min=tK,ue.minBy=nK,ue.stubArray=pC,ue.stubFalse=mC,ue.stubObject=zW,ue.stubString=qW,ue.stubTrue=UW,ue.multiply=rK,ue.nth=T1,ue.noConflict=ot,ue.noop=Et,ue.now=Xp,ue.pad=bj,ue.padEnd=Lh,ue.padStart=uC,ue.parseInt=jj,ue.random=Hv,ue.reduce=U1,ue.reduceRight=V1,ue.repeat=fm,ue.replace=wj,ue.result=oC,ue.round=iK,ue.runInContext=Le,ue.sample=H1,ue.size=Ev,ue.snakeCase=dC,ue.some=F_,ue.sortedIndex=dr,ue.sortedIndexBy=Sn,ue.sortedIndexOf=Dn,ue.sortedLastIndex=Yn,ue.sortedLastIndexBy=ya,ue.sortedLastIndexOf=il,ue.startCase=mm,ue.startsWith=Sj,ue.subtract=aK,ue.sum=sK,ue.sumBy=oK,ue.template=Fh,ue.times=VW,ue.toFinite=Bs,ue.toInteger=ln,ue.toLength=zs,ue.toLower=Gv,ue.toNumber=Wa,ue.toSafeInteger=Lu,ue.toString=qn,ue.toUpper=gm,ue.trim=Nj,ue.trimEnd=hC,ue.trimStart=ym,ue.truncate=d,ue.unescape=h,ue.uniqueId=GW,ue.upperCase=m,ue.upperFirst=N,ue.each=F1,ue.eachRight=Tv,ue.first=vo,qe(ue,function(){var g={};return Si(ue,function(S,M){zn.call(ue.prototype,M)||(g[M]=S)}),g}(),{chain:!1}),ue.VERSION=r,Ia(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){ue[g].placeholder=ue}),Ia(["drop","take"],function(g,S){xn.prototype[g]=function(M){M=M===n?1:gr(ln(M),0);var U=this.__filtered__&&!S?new xn(this):this.clone();return U.__filtered__?U.__takeCount__=wr(M,U.__takeCount__):U.__views__.push({size:wr(M,fe),type:g+(U.__dir__<0?"Right":"")}),U},xn.prototype[g+"Right"]=function(M){return this.reverse()[g](M).reverse()}}),Ia(["filter","map","takeWhile"],function(g,S){var M=S+1,U=M==ne||M==q;xn.prototype[g]=function(te){var ge=this.clone();return ge.__iteratees__.push({iteratee:$t(te,3),type:M}),ge.__filtered__=ge.__filtered__||U,ge}}),Ia(["head","last"],function(g,S){var M="take"+(S?"Right":"");xn.prototype[g]=function(){return this[M](1).value()[0]}}),Ia(["initial","tail"],function(g,S){var M="drop"+(S?"":"Right");xn.prototype[g]=function(){return this.__filtered__?new xn(this):this[M](1)}}),xn.prototype.compact=function(){return this.filter(He)},xn.prototype.find=function(g){return this.filter(g).head()},xn.prototype.findLast=function(g){return this.reverse().find(g)},xn.prototype.invokeMap=pn(function(g,S){return typeof g=="function"?new xn(this):this.map(function(M){return Zl(M,g,S)})}),xn.prototype.reject=function(g){return this.filter(Eh($t(g)))},xn.prototype.slice=function(g,S){g=ln(g);var M=this;return M.__filtered__&&(g>0||S<0)?new xn(M):(g<0?M=M.takeRight(-g):g&&(M=M.drop(g)),S!==n&&(S=ln(S),M=S<0?M.dropRight(-S):M.take(S-g)),M)},xn.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},xn.prototype.toArray=function(){return this.take(fe)},Si(xn.prototype,function(g,S){var M=/^(?:filter|find|map|reject)|While$/.test(S),U=/^(?:head|last)$/.test(S),te=ue[U?"take"+(S=="last"?"Right":""):S],ge=U||/^find/.test(S);te&&(ue.prototype[S]=function(){var Se=this.__wrapped__,Oe=U?[1]:arguments,Be=Se instanceof xn,lt=Oe[0],ut=Be||nn(Se),ft=function(En){var Ln=te.apply(ue,io([En],Oe));return U&&Nt?Ln[0]:Ln};ut&&M&&typeof lt=="function"&&lt.length!=1&&(Be=ut=!1);var Nt=this.__chain__,Rt=!!this.__actions__.length,Xt=ge&&!Nt,jn=Be&&!Rt;if(!ge&&ut){Se=jn?Se:new xn(this);var Jt=g.apply(Se,Oe);return Jt.__actions__.push({func:_i,args:[ft],thisArg:n}),new Ui(Jt,Nt)}return Xt&&jn?g.apply(this,Oe):(Jt=this.thru(ft),Xt?U?Jt.value()[0]:Jt.value():Jt)})}),Ia(["pop","push","shift","sort","splice","unshift"],function(g){var S=cp[g],M=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",U=/^(?:pop|shift)$/.test(g);ue.prototype[g]=function(){var te=arguments;if(U&&!this.__chain__){var ge=this.value();return S.apply(nn(ge)?ge:[],te)}return this[M](function(Se){return S.apply(nn(Se)?Se:[],te)})}}),Si(xn.prototype,function(g,S){var M=ue[S];if(M){var U=M.name+"";zn.call(Ba,U)||(Ba[U]=[]),Ba[U].push({name:S,func:M})}}),Ba[Dr(n,_).name]=[{name:"wrapper",func:n}],xn.prototype.clone=Vd,xn.prototype.reverse=fp,xn.prototype.value=Kl,ue.prototype.at=O1,ue.prototype.chain=va,ue.prototype.commit=D1,ue.prototype.next=M1,ue.prototype.plant=ll,ue.prototype.reverse=Kp,ue.prototype.toJSON=ue.prototype.valueOf=ue.prototype.value=Nv,ue.prototype.first=ue.prototype.head,Vl&&(ue.prototype[Vl]=I_),ue},Go=lu();qo?((qo.exports=Go)._=Go,nu._=Go):Br._=Go}).call(Gge)}(jx,jx.exports)),jx.exports}var l7=Wge();class Kge{constructor(t){hr(this,"sampleRate",24e3);hr(this,"bufferSize",7680);hr(this,"audioQueue",[]);hr(this,"isPlaying",!1);hr(this,"isStreamComplete",!1);hr(this,"checkInterval",null);hr(this,"scheduledTime",0);hr(this,"initialBufferTime",.1);hr(this,"gainNode");hr(this,"source");hr(this,"endOfQueueAudioSource",null);hr(this,"onComplete",()=>{});this.context=t,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(t,n,r){let a=qj.get(this.context);if(a&&a[t])return a[t].handlers.push(r),Promise.resolve(this);a||(qj.set(this.context,{}),a=qj.get(this.context)),a[t]={handlers:[r]};const s=_P(t,n);await this.context.audioWorklet.addModule(s);const o=new AudioWorkletNode(this.context,t);return a[t].node=o,this}_processPCM16Chunk(t){const n=new Float32Array(t.length/2),r=new DataView(t.buffer);for(let a=0;a<t.length/2;a++)try{const s=r.getInt16(a*2,!0);n[a]=s/32768}catch(s){console.error(s)}return n}addPCM16(t){this.isStreamComplete=!1;let n=this._processPCM16Chunk(t);for(;n.length>=this.bufferSize;){const r=n.slice(0,this.bufferSize);this.audioQueue.push(r),n=n.slice(this.bufferSize)}n.length>0&&this.audioQueue.push(n),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(t){const n=this.context.createBuffer(1,t.length,this.sampleRate);return n.getChannelData(0).set(t),n}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const n=this.audioQueue.shift(),r=this.createAudioBuffer(n),a=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=a,a.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===a&&(this.endOfQueueAudioSource=null,this.onComplete())}),a.buffer=r,a.connect(this.gainNode);const s=qj.get(this.context);s&&Object.entries(s).forEach(([,l])=>{const{node:c,handlers:u}=l;c&&(a.connect(c),c.port.onmessage=function(f){u.forEach(p=>{p.call(c.port,f)})},c.connect(this.context.destination))});const o=Math.max(this.scheduledTime,this.context.currentTime);a.start(o),this.scheduledTime=o+r.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const n=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,n-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function c7(e,t){return function(){return e.apply(t,arguments)}}const{toString:Yge}=Object.prototype,{getPrototypeOf:rM}=Object,bN=(e=>t=>{const n=Yge.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Lo=e=>(e=e.toLowerCase(),t=>bN(t)===e),jN=e=>t=>typeof t===e,{isArray:Hg}=Array,Hx=jN("undefined");function Qge(e){return e!==null&&!Hx(e)&&e.constructor!==null&&!Hx(e.constructor)&&_s(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const u7=Lo("ArrayBuffer");function Xge(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&u7(e.buffer),t}const Jge=jN("string"),_s=jN("function"),d7=jN("number"),wN=e=>e!==null&&typeof e=="object",Zge=e=>e===!0||e===!1,bw=e=>{if(bN(e)!=="object")return!1;const t=rM(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},eye=Lo("Date"),tye=Lo("File"),nye=Lo("Blob"),rye=Lo("FileList"),iye=e=>wN(e)&&_s(e.pipe),aye=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_s(e.append)&&((t=bN(e))==="formdata"||t==="object"&&_s(e.toString)&&e.toString()==="[object FormData]"))},sye=Lo("URLSearchParams"),[oye,lye,cye,uye]=["ReadableStream","Request","Response","Headers"].map(Lo),dye=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gb(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,a;if(typeof e!="object"&&(e=[e]),Hg(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let l;for(r=0;r<o;r++)l=s[r],t.call(null,e[l],l,e)}}function h7(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,a;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const Qh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,f7=e=>!Hx(e)&&e!==Qh;function CP(){const{caseless:e}=f7(this)&&this||{},t={},n=(r,a)=>{const s=e&&h7(t,a)||a;bw(t[s])&&bw(r)?t[s]=CP(t[s],r):bw(r)?t[s]=CP({},r):Hg(r)?t[s]=r.slice():t[s]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Gb(arguments[r],n);return t}const hye=(e,t,n,{allOwnKeys:r}={})=>(Gb(t,(a,s)=>{n&&_s(a)?e[s]=c7(a,n):e[s]=a},{allOwnKeys:r}),e),fye=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),pye=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},mye=(e,t,n,r)=>{let a,s,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)o=a[s],(!r||r(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&rM(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},gye=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},yye=e=>{if(!e)return null;if(Hg(e))return e;let t=e.length;if(!d7(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},vye=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&rM(Uint8Array)),xye=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=r.next())&&!a.done;){const s=a.value;t.call(e,s[0],s[1])}},bye=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},jye=Lo("HTMLFormElement"),wye=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),z3=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Sye=Lo("RegExp"),p7=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Gb(n,(a,s)=>{let o;(o=t(a,s,e))!==!1&&(r[s]=o||a)}),Object.defineProperties(e,r)},Nye=e=>{p7(e,(t,n)=>{if(_s(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(_s(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},_ye=(e,t)=>{const n={},r=a=>{a.forEach(s=>{n[s]=!0})};return Hg(e)?r(e):r(String(e).split(t)),n},Cye=()=>{},Tye=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Eye(e){return!!(e&&_s(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Aye=e=>{const t=new Array(10),n=(r,a)=>{if(wN(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[a]=r;const s=Hg(r)?[]:{};return Gb(r,(o,l)=>{const c=n(o,a+1);!Hx(c)&&(s[l]=c)}),t[a]=void 0,s}}return r};return n(e,0)},kye=Lo("AsyncFunction"),Pye=e=>e&&(wN(e)||_s(e))&&_s(e.then)&&_s(e.catch),m7=((e,t)=>e?setImmediate:t?((n,r)=>(Qh.addEventListener("message",({source:a,data:s})=>{a===Qh&&s===n&&r.length&&r.shift()()},!1),a=>{r.push(a),Qh.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",_s(Qh.postMessage)),Oye=typeof queueMicrotask<"u"?queueMicrotask.bind(Qh):typeof process<"u"&&process.nextTick||m7,Ze={isArray:Hg,isArrayBuffer:u7,isBuffer:Qge,isFormData:aye,isArrayBufferView:Xge,isString:Jge,isNumber:d7,isBoolean:Zge,isObject:wN,isPlainObject:bw,isReadableStream:oye,isRequest:lye,isResponse:cye,isHeaders:uye,isUndefined:Hx,isDate:eye,isFile:tye,isBlob:nye,isRegExp:Sye,isFunction:_s,isStream:iye,isURLSearchParams:sye,isTypedArray:vye,isFileList:rye,forEach:Gb,merge:CP,extend:hye,trim:dye,stripBOM:fye,inherits:pye,toFlatObject:mye,kindOf:bN,kindOfTest:Lo,endsWith:gye,toArray:yye,forEachEntry:xye,matchAll:bye,isHTMLForm:jye,hasOwnProperty:z3,hasOwnProp:z3,reduceDescriptors:p7,freezeMethods:Nye,toObjectSet:_ye,toCamelCase:wye,noop:Cye,toFiniteNumber:Tye,findKey:h7,global:Qh,isContextDefined:f7,isSpecCompliantForm:Eye,toJSONObject:Aye,isAsyncFn:kye,isThenable:Pye,setImmediate:m7,asap:Oye};function gn(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}Ze.inherits(gn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ze.toJSONObject(this.config),code:this.code,status:this.status}}});const g7=gn.prototype,y7={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{y7[e]={value:e}});Object.defineProperties(gn,y7);Object.defineProperty(g7,"isAxiosError",{value:!0});gn.from=(e,t,n,r,a,s)=>{const o=Object.create(g7);return Ze.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),gn.call(o,e.message,t,n,r,a),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Dye=null;function TP(e){return Ze.isPlainObject(e)||Ze.isArray(e)}function v7(e){return Ze.endsWith(e,"[]")?e.slice(0,-2):e}function q3(e,t,n){return e?e.concat(t).map(function(a,s){return a=v7(a),!n&&s?"["+a+"]":a}).join(n?".":""):t}function Mye(e){return Ze.isArray(e)&&!e.some(TP)}const Iye=Ze.toFlatObject(Ze,{},null,function(t){return/^is[A-Z]/.test(t)});function SN(e,t,n){if(!Ze.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Ze.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,w){return!Ze.isUndefined(w[b])});const r=n.metaTokens,a=n.visitor||f,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Ze.isSpecCompliantForm(t);if(!Ze.isFunction(a))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(Ze.isDate(x))return x.toISOString();if(!c&&Ze.isBlob(x))throw new gn("Blob is not supported. Use a Buffer instead.");return Ze.isArrayBuffer(x)||Ze.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function f(x,b,w){let _=x;if(x&&!w&&typeof x=="object"){if(Ze.endsWith(b,"{}"))b=r?b:b.slice(0,-2),x=JSON.stringify(x);else if(Ze.isArray(x)&&Mye(x)||(Ze.isFileList(x)||Ze.endsWith(b,"[]"))&&(_=Ze.toArray(x)))return b=v7(b),_.forEach(function(C,O){!(Ze.isUndefined(C)||C===null)&&t.append(o===!0?q3([b],O,s):o===null?b:b+"[]",u(C))}),!1}return TP(x)?!0:(t.append(q3(w,b,s),u(x)),!1)}const p=[],y=Object.assign(Iye,{defaultVisitor:f,convertValue:u,isVisitable:TP});function v(x,b){if(!Ze.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(x),Ze.forEach(x,function(_,T){(!(Ze.isUndefined(_)||_===null)&&a.call(t,_,Ze.isString(T)?T.trim():T,b,y))===!0&&v(_,b?b.concat(T):[T])}),p.pop()}}if(!Ze.isObject(e))throw new TypeError("data must be an object");return v(e),t}function U3(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function iM(e,t){this._pairs=[],e&&SN(e,this,t)}const x7=iM.prototype;x7.append=function(t,n){this._pairs.push([t,n])};x7.toString=function(t){const n=t?function(r){return t.call(this,r,U3)}:U3;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function Rye(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function b7(e,t,n){if(!t)return e;const r=n&&n.encode||Rye;Ze.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let s;if(a?s=a(t,n):s=Ze.isURLSearchParams(t)?t.toString():new iM(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class V3{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ze.forEach(this.handlers,function(r){r!==null&&t(r)})}}const j7={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lye=typeof URLSearchParams<"u"?URLSearchParams:iM,Fye=typeof FormData<"u"?FormData:null,$ye=typeof Blob<"u"?Blob:null,Bye={isBrowser:!0,classes:{URLSearchParams:Lye,FormData:Fye,Blob:$ye},protocols:["http","https","file","blob","url","data"]},aM=typeof window<"u"&&typeof document<"u",EP=typeof navigator=="object"&&navigator||void 0,zye=aM&&(!EP||["ReactNative","NativeScript","NS"].indexOf(EP.product)<0),qye=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Uye=aM&&window.location.href||"http://localhost",Vye=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:aM,hasStandardBrowserEnv:zye,hasStandardBrowserWebWorkerEnv:qye,navigator:EP,origin:Uye},Symbol.toStringTag,{value:"Module"})),ra={...Vye,...Bye};function Hye(e,t){return SN(e,new ra.classes.URLSearchParams,Object.assign({visitor:function(n,r,a,s){return ra.isNode&&Ze.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Gye(e){return Ze.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Wye(e){const t={},n=Object.keys(e);let r;const a=n.length;let s;for(r=0;r<a;r++)s=n[r],t[s]=e[s];return t}function w7(e){function t(n,r,a,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=s>=n.length;return o=!o&&Ze.isArray(a)?a.length:o,c?(Ze.hasOwnProp(a,o)?a[o]=[a[o],r]:a[o]=r,!l):((!a[o]||!Ze.isObject(a[o]))&&(a[o]=[]),t(n,r,a[o],s)&&Ze.isArray(a[o])&&(a[o]=Wye(a[o])),!l)}if(Ze.isFormData(e)&&Ze.isFunction(e.entries)){const n={};return Ze.forEachEntry(e,(r,a)=>{t(Gye(r),a,n,0)}),n}return null}function Kye(e,t,n){if(Ze.isString(e))try{return(t||JSON.parse)(e),Ze.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Wb={transitional:j7,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,s=Ze.isObject(t);if(s&&Ze.isHTMLForm(t)&&(t=new FormData(t)),Ze.isFormData(t))return a?JSON.stringify(w7(t)):t;if(Ze.isArrayBuffer(t)||Ze.isBuffer(t)||Ze.isStream(t)||Ze.isFile(t)||Ze.isBlob(t)||Ze.isReadableStream(t))return t;if(Ze.isArrayBufferView(t))return t.buffer;if(Ze.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Hye(t,this.formSerializer).toString();if((l=Ze.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return SN(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||a?(n.setContentType("application/json",!1),Kye(t)):t}],transformResponse:[function(t){const n=this.transitional||Wb.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(Ze.isResponse(t)||Ze.isReadableStream(t))return t;if(t&&Ze.isString(t)&&(r&&!this.responseType||a)){const o=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?gn.from(l,gn.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ra.classes.FormData,Blob:ra.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ze.forEach(["delete","get","head","post","put","patch"],e=>{Wb.headers[e]={}});const Yye=Ze.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qye=e=>{const t={};let n,r,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),n=o.substring(0,a).trim().toLowerCase(),r=o.substring(a+1).trim(),!(!n||t[n]&&Yye[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},H3=Symbol("internals");function rx(e){return e&&String(e).trim().toLowerCase()}function jw(e){return e===!1||e==null?e:Ze.isArray(e)?e.map(jw):String(e)}function Xye(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Jye=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function a2(e,t,n,r,a){if(Ze.isFunction(r))return r.call(this,t,n);if(a&&(t=n),!!Ze.isString(t)){if(Ze.isString(r))return t.indexOf(r)!==-1;if(Ze.isRegExp(r))return r.test(t)}}function Zye(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function eve(e,t){const n=Ze.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(a,s,o){return this[r].call(this,t,a,s,o)},configurable:!0})})}let es=class{constructor(t){t&&this.set(t)}set(t,n,r){const a=this;function s(l,c,u){const f=rx(c);if(!f)throw new Error("header name must be a non-empty string");const p=Ze.findKey(a,f);(!p||a[p]===void 0||u===!0||u===void 0&&a[p]!==!1)&&(a[p||c]=jw(l))}const o=(l,c)=>Ze.forEach(l,(u,f)=>s(u,f,c));if(Ze.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(Ze.isString(t)&&(t=t.trim())&&!Jye(t))o(Qye(t),n);else if(Ze.isHeaders(t))for(const[l,c]of t.entries())s(c,l,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=rx(t),t){const r=Ze.findKey(this,t);if(r){const a=this[r];if(!n)return a;if(n===!0)return Xye(a);if(Ze.isFunction(n))return n.call(this,a,r);if(Ze.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=rx(t),t){const r=Ze.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||a2(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let a=!1;function s(o){if(o=rx(o),o){const l=Ze.findKey(r,o);l&&(!n||a2(r,r[l],l,n))&&(delete r[l],a=!0)}}return Ze.isArray(t)?t.forEach(s):s(t),a}clear(t){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const s=n[r];(!t||a2(this,this[s],s,t,!0))&&(delete this[s],a=!0)}return a}normalize(t){const n=this,r={};return Ze.forEach(this,(a,s)=>{const o=Ze.findKey(r,s);if(o){n[o]=jw(a),delete n[s];return}const l=t?Zye(s):String(s).trim();l!==s&&delete n[s],n[l]=jw(a),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Ze.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=t&&Ze.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(a=>r.set(a)),r}static accessor(t){const r=(this[H3]=this[H3]={accessors:{}}).accessors,a=this.prototype;function s(o){const l=rx(o);r[l]||(eve(a,o),r[l]=!0)}return Ze.isArray(t)?t.forEach(s):s(t),this}};es.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ze.reduceDescriptors(es.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Ze.freezeMethods(es);function s2(e,t){const n=this||Wb,r=t||n,a=es.from(r.headers);let s=r.data;return Ze.forEach(e,function(l){s=l.call(n,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function S7(e){return!!(e&&e.__CANCEL__)}function Gg(e,t,n){gn.call(this,e??"canceled",gn.ERR_CANCELED,t,n),this.name="CanceledError"}Ze.inherits(Gg,gn,{__CANCEL__:!0});function N7(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new gn("Request failed with status code "+n.status,[gn.ERR_BAD_REQUEST,gn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function tve(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function nve(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),f=r[s];o||(o=u),n[a]=c,r[a]=u;let p=s,y=0;for(;p!==a;)y+=n[p++],p=p%e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),u-o<t)return;const v=f&&u-f;return v?Math.round(y*1e3/v):void 0}}function rve(e,t){let n=0,r=1e3/t,a,s;const o=(u,f=Date.now())=>{n=f,a=null,s&&(clearTimeout(s),s=null),e.apply(null,u)};return[(...u)=>{const f=Date.now(),p=f-n;p>=r?o(u,f):(a=u,s||(s=setTimeout(()=>{s=null,o(a)},r-p)))},()=>a&&o(a)]}const Ww=(e,t,n=3)=>{let r=0;const a=nve(50,250);return rve(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,c=o-r,u=a(c),f=o<=l;r=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&f?(l-o)/u:void 0,event:s,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(p)},n)},G3=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},W3=e=>(...t)=>Ze.asap(()=>e(...t)),ive=ra.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ra.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ra.origin),ra.navigator&&/(msie|trident)/i.test(ra.navigator.userAgent)):()=>!0,ave=ra.hasStandardBrowserEnv?{write(e,t,n,r,a,s){const o=[e+"="+encodeURIComponent(t)];Ze.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ze.isString(r)&&o.push("path="+r),Ze.isString(a)&&o.push("domain="+a),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function sve(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ove(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function _7(e,t,n){let r=!sve(t);return e&&(r||n==!1)?ove(e,t):t}const K3=e=>e instanceof es?{...e}:e;function Cf(e,t){t=t||{};const n={};function r(u,f,p,y){return Ze.isPlainObject(u)&&Ze.isPlainObject(f)?Ze.merge.call({caseless:y},u,f):Ze.isPlainObject(f)?Ze.merge({},f):Ze.isArray(f)?f.slice():f}function a(u,f,p,y){if(Ze.isUndefined(f)){if(!Ze.isUndefined(u))return r(void 0,u,p,y)}else return r(u,f,p,y)}function s(u,f){if(!Ze.isUndefined(f))return r(void 0,f)}function o(u,f){if(Ze.isUndefined(f)){if(!Ze.isUndefined(u))return r(void 0,u)}else return r(void 0,f)}function l(u,f,p){if(p in t)return r(u,f);if(p in e)return r(void 0,u)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,f,p)=>a(K3(u),K3(f),p,!0)};return Ze.forEach(Object.keys(Object.assign({},e,t)),function(f){const p=c[f]||a,y=p(e[f],t[f],f);Ze.isUndefined(y)&&p!==l||(n[f]=y)}),n}const C7=e=>{const t=Cf({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:l}=t;t.headers=o=es.from(o),t.url=b7(_7(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Ze.isFormData(n)){if(ra.hasStandardBrowserEnv||ra.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...f]=c?c.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...f].join("; "))}}if(ra.hasStandardBrowserEnv&&(r&&Ze.isFunction(r)&&(r=r(t)),r||r!==!1&&ive(t.url))){const u=a&&s&&ave.read(s);u&&o.set(a,u)}return t},lve=typeof XMLHttpRequest<"u",cve=lve&&function(e){return new Promise(function(n,r){const a=C7(e);let s=a.data;const o=es.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,f,p,y,v,x;function b(){v&&v(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function _(){if(!w)return;const C=es.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:C,config:e,request:w};N7(function(I){n(I),b()},function(I){r(I),b()},E),w=null}"onloadend"in w?w.onloadend=_:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(_)},w.onabort=function(){w&&(r(new gn("Request aborted",gn.ECONNABORTED,e,w)),w=null)},w.onerror=function(){r(new gn("Network Error",gn.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let O=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const E=a.transitional||j7;a.timeoutErrorMessage&&(O=a.timeoutErrorMessage),r(new gn(O,E.clarifyTimeoutError?gn.ETIMEDOUT:gn.ECONNABORTED,e,w)),w=null},s===void 0&&o.setContentType(null),"setRequestHeader"in w&&Ze.forEach(o.toJSON(),function(O,E){w.setRequestHeader(E,O)}),Ze.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),l&&l!=="json"&&(w.responseType=a.responseType),u&&([y,x]=Ww(u,!0),w.addEventListener("progress",y)),c&&w.upload&&([p,v]=Ww(c),w.upload.addEventListener("progress",p),w.upload.addEventListener("loadend",v)),(a.cancelToken||a.signal)&&(f=C=>{w&&(r(!C||C.type?new Gg(null,e,w):C),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const T=tve(a.url);if(T&&ra.protocols.indexOf(T)===-1){r(new gn("Unsupported protocol "+T+":",gn.ERR_BAD_REQUEST,e));return}w.send(s||null)})},uve=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,a;const s=function(u){if(!a){a=!0,l();const f=u instanceof Error?u:this.reason;r.abort(f instanceof gn?f:new Gg(f instanceof Error?f.message:f))}};let o=t&&setTimeout(()=>{o=null,s(new gn(`timeout ${t} of ms exceeded`,gn.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),e=null)};e.forEach(u=>u.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>Ze.asap(l),c}},dve=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,a;for(;r<n;)a=r+t,yield e.slice(r,a),r=a},hve=async function*(e,t){for await(const n of fve(e))yield*dve(n,t)},fve=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Y3=(e,t,n,r)=>{const a=hve(e,t);let s=0,o,l=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:f}=await a.next();if(u){l(),c.close();return}let p=f.byteLength;if(n){let y=s+=p;n(y)}c.enqueue(new Uint8Array(f))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},NN=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",T7=NN&&typeof ReadableStream=="function",pve=NN&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),E7=(e,...t)=>{try{return!!e(...t)}catch{return!1}},mve=T7&&E7(()=>{let e=!1;const t=new Request(ra.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Q3=64*1024,AP=T7&&E7(()=>Ze.isReadableStream(new Response("").body)),Kw={stream:AP&&(e=>e.body)};NN&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Kw[t]&&(Kw[t]=Ze.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new gn(`Response type '${t}' is not supported`,gn.ERR_NOT_SUPPORT,r)})})})(new Response);const gve=async e=>{if(e==null)return 0;if(Ze.isBlob(e))return e.size;if(Ze.isSpecCompliantForm(e))return(await new Request(ra.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ze.isArrayBufferView(e)||Ze.isArrayBuffer(e))return e.byteLength;if(Ze.isURLSearchParams(e)&&(e=e+""),Ze.isString(e))return(await pve(e)).byteLength},yve=async(e,t)=>{const n=Ze.toFiniteNumber(e.getContentLength());return n??gve(t)},vve=NN&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:f,withCredentials:p="same-origin",fetchOptions:y}=C7(e);u=u?(u+"").toLowerCase():"text";let v=uve([a,s&&s.toAbortSignal()],o),x;const b=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let w;try{if(c&&mve&&n!=="get"&&n!=="head"&&(w=await yve(f,r))!==0){let E=new Request(t,{method:"POST",body:r,duplex:"half"}),P;if(Ze.isFormData(r)&&(P=E.headers.get("content-type"))&&f.setContentType(P),E.body){const[I,F]=G3(w,Ww(W3(c)));r=Y3(E.body,Q3,I,F)}}Ze.isString(p)||(p=p?"include":"omit");const _="credentials"in Request.prototype;x=new Request(t,{...y,signal:v,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:_?p:void 0});let T=await fetch(x);const C=AP&&(u==="stream"||u==="response");if(AP&&(l||C&&b)){const E={};["status","statusText","headers"].forEach($=>{E[$]=T[$]});const P=Ze.toFiniteNumber(T.headers.get("content-length")),[I,F]=l&&G3(P,Ww(W3(l),!0))||[];T=new Response(Y3(T.body,Q3,I,()=>{F&&F(),b&&b()}),E)}u=u||"text";let O=await Kw[Ze.findKey(Kw,u)||"text"](T,e);return!C&&b&&b(),await new Promise((E,P)=>{N7(E,P,{data:O,headers:es.from(T.headers),status:T.status,statusText:T.statusText,config:e,request:x})})}catch(_){throw b&&b(),_&&_.name==="TypeError"&&/fetch/i.test(_.message)?Object.assign(new gn("Network Error",gn.ERR_NETWORK,e,x),{cause:_.cause||_}):gn.from(_,_&&_.code,e,x)}}),kP={http:Dye,xhr:cve,fetch:vve};Ze.forEach(kP,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const X3=e=>`- ${e}`,xve=e=>Ze.isFunction(e)||e===null||e===!1,A7={getAdapter:e=>{e=Ze.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!xve(n)&&(r=kP[(o=String(n)).toLowerCase()],r===void 0))throw new gn(`Unknown adapter '${o}'`);if(r)break;a[o||"#"+s]=r}if(!r){const s=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(X3).join(`
`):" "+X3(s[0]):"as no adapter specified";throw new gn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:kP};function o2(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Gg(null,e)}function J3(e){return o2(e),e.headers=es.from(e.headers),e.data=s2.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),A7.getAdapter(e.adapter||Wb.adapter)(e).then(function(r){return o2(e),r.data=s2.call(e,e.transformResponse,r),r.headers=es.from(r.headers),r},function(r){return S7(r)||(o2(e),r&&r.response&&(r.response.data=s2.call(e,e.transformResponse,r.response),r.response.headers=es.from(r.response.headers))),Promise.reject(r)})}const k7="1.8.4",_N={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_N[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Z3={};_N.transitional=function(t,n,r){function a(s,o){return"[Axios v"+k7+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(t===!1)throw new gn(a(o," has been removed"+(n?" in "+n:"")),gn.ERR_DEPRECATED);return n&&!Z3[o]&&(Z3[o]=!0,console.warn(a(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,l):!0}};_N.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function bve(e,t,n){if(typeof e!="object")throw new gn("options must be an object",gn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const s=r[a],o=t[s];if(o){const l=e[s],c=l===void 0||o(l,s,e);if(c!==!0)throw new gn("option "+s+" must be "+c,gn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new gn("Unknown option "+s,gn.ERR_BAD_OPTION)}}const ww={assertOptions:bve,validators:_N},gl=ww.validators;let hf=class{constructor(t){this.defaults=t,this.interceptors={request:new V3,response:new V3}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Cf(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:s}=n;r!==void 0&&ww.assertOptions(r,{silentJSONParsing:gl.transitional(gl.boolean),forcedJSONParsing:gl.transitional(gl.boolean),clarifyTimeoutError:gl.transitional(gl.boolean)},!1),a!=null&&(Ze.isFunction(a)?n.paramsSerializer={serialize:a}:ww.assertOptions(a,{encode:gl.function,serialize:gl.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ww.assertOptions(n,{baseUrl:gl.spelling("baseURL"),withXsrfToken:gl.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ze.merge(s.common,s[n.method]);s&&Ze.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=es.concat(o,s);const l=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let f,p=0,y;if(!c){const x=[J3.bind(this),void 0];for(x.unshift.apply(x,l),x.push.apply(x,u),y=x.length,f=Promise.resolve(n);p<y;)f=f.then(x[p++],x[p++]);return f}y=l.length;let v=n;for(p=0;p<y;){const x=l[p++],b=l[p++];try{v=x(v)}catch(w){b.call(this,w);break}}try{f=J3.call(this,v)}catch(x){return Promise.reject(x)}for(p=0,y=u.length;p<y;)f=f.then(u[p++],u[p++]);return f}getUri(t){t=Cf(this.defaults,t);const n=_7(t.baseURL,t.url,t.allowAbsoluteUrls);return b7(n,t.params,t.paramsSerializer)}};Ze.forEach(["delete","get","head","options"],function(t){hf.prototype[t]=function(n,r){return this.request(Cf(r||{},{method:t,url:n,data:(r||{}).data}))}});Ze.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,l){return this.request(Cf(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}hf.prototype[t]=n(),hf.prototype[t+"Form"]=n(!0)});let jve=class P7{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(a=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](a);r._listeners=null}),this.promise.then=a=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(a);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,l){r.reason||(r.reason=new Gg(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new P7(function(a){t=a}),cancel:t}}};function wve(e){return function(n){return e.apply(null,n)}}function Sve(e){return Ze.isObject(e)&&e.isAxiosError===!0}const PP={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(PP).forEach(([e,t])=>{PP[t]=e});function O7(e){const t=new hf(e),n=c7(hf.prototype.request,t);return Ze.extend(n,hf.prototype,t,{allOwnKeys:!0}),Ze.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return O7(Cf(e,a))},n}const ii=O7(Wb);ii.Axios=hf;ii.CanceledError=Gg;ii.CancelToken=jve;ii.isCancel=S7;ii.VERSION=k7;ii.toFormData=SN;ii.AxiosError=gn;ii.Cancel=ii.CanceledError;ii.all=function(t){return Promise.all(t)};ii.spread=wve;ii.isAxiosError=Sve;ii.mergeConfig=Cf;ii.AxiosHeaders=es;ii.formToJSON=e=>w7(Ze.isHTMLForm(e)?new FormData(e):e);ii.getAdapter=A7.getAdapter;ii.HttpStatusCode=PP;ii.default=ii;const{Axios:g5e,AxiosError:y5e,CanceledError:v5e,isCancel:x5e,CancelToken:b5e,VERSION:j5e,all:w5e,Cancel:S5e,isAxiosError:N5e,spread:_5e,toFormData:C5e,AxiosHeaders:T5e,HttpStatusCode:E5e,formToJSON:A5e,getAdapter:k5e,mergeConfig:P5e}=ii;function Nve(){const[e,t]=j.useState(null),[n,r]=j.useState(!1);return j.useEffect(()=>{const l=()=>{r(!1),t(null)};if(e)return e.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{e.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[e]),{type:"screen",start:async()=>{const l=await navigator.mediaDevices.getDisplayMedia({video:!0});return t(l),r(!0),l},stop:()=>{e&&(e.getTracks().forEach(l=>l.stop()),t(null),r(!1))},isStreaming:n,stream:e}}function _ve(){const[e,t]=j.useState(null),[n,r]=j.useState(!1);return j.useEffect(()=>{const l=()=>{r(!1),t(null)};if(e)return e.getTracks().forEach(c=>c.addEventListener("ended",l)),()=>{e.getTracks().forEach(c=>c.removeEventListener("ended",l))}},[e]),{type:"webcam",start:async()=>{const l=await navigator.mediaDevices.getUserMedia({video:!0});return t(l),r(!0),l},stop:()=>{e&&(e.getTracks().forEach(l=>l.stop()),t(null),r(!1))},isStreaming:n,stream:e}}class Cve extends s7{constructor(n){super();hr(this,"client");hr(this,"_status","disconnected");hr(this,"_session",null);hr(this,"_model",null);hr(this,"config",null);this.client=new f9(n),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(n,r){const a={date:new Date,type:n,message:r};this.emit("log",a)}async connect(n,r){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=r,this._model=n;const a={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:n,config:r,callbacks:a})}catch(s){return console.error("Error connecting to GenAI Live:",s),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var n;return this.session?((n=this.session)==null||n.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(n){this.log("server.error",n.message),this.emit("error",n)}onclose(n){this.log("server.close",`disconnected ${n.reason?`with reason: ${n.reason}`:""}`),this.emit("close",n)}async onmessage(n){var r;if(n.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(n.toolCall){this.log("server.toolCall",n),this.emit("toolcall",n.toolCall);return}if(n.toolCallCancellation){this.log("server.toolCallCancellation",n),this.emit("toolcallcancellation",n.toolCallCancellation);return}if(n.serverContent){const{serverContent:a}=n;if("interrupted"in a){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in a&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in a){let s=((r=a.modelTurn)==null?void 0:r.parts)||[];const o=s.filter(f=>{var p;return f.inlineData&&((p=f.inlineData.mimeType)==null?void 0:p.startsWith("audio/pcm"))}),l=o.map(f=>{var p;return(p=f.inlineData)==null?void 0:p.data}),c=l7.difference(s,o);if(l.forEach(f=>{if(f){const p=$ge(f);this.emit("audio",p),this.log("server.audio",`buffer (${p.byteLength})`)}}),!c.length)return;s=c;const u={modelTurn:{parts:s}};this.emit("content",u),this.log("server.content",n)}}else console.log("received unmatched message",n)}sendRealtimeInput(n){var o;let r=!1,a=!1;for(const l of n)if((o=this.session)==null||o.sendRealtimeInput({media:l}),l.mimeType.includes("audio")&&(r=!0),l.mimeType.includes("image")&&(a=!0),r&&a)break;const s=r&&a?"audio + video":r?"audio":a?"video":"unknown";this.log("client.realtimeInput",s)}sendToolResponse(n){var r;n.functionResponses&&n.functionResponses.length&&((r=this.session)==null||r.sendToolResponse({functionResponses:n.functionResponses}),this.log("client.toolResponse",n))}send(n,r=!0){var a;(a=this.session)==null||a.sendClientContent({turns:n,turnComplete:r}),this.log("client.send",{turns:Array.isArray(n)?n:[n],turnComplete:r})}}function Tve(e){const t=j.useMemo(()=>new Cve(e),[e]),n=j.useRef(null),[r,a]=j.useState("models/gemini-2.5-flash-live-preview"),[s,o]=j.useState({}),[l,c]=j.useState(!1),[u,f]=j.useState(0),[p,y]=j.useState(null);j.useEffect(()=>{n.current||i7({id:"audio-out"}).then(b=>{n.current=new Kge(b),n.current.addWorklet("vumeter-out",a7,w=>{f(w.data.volume)}).then(()=>{})})},[n]),j.useEffect(()=>{const b=()=>{c(!0)},w=()=>{c(!1)},_=E=>{console.error("error",E)},T=()=>{var E;return(E=n.current)==null?void 0:E.stop()},C=E=>{var P;return(P=n.current)==null?void 0:P.addPCM16(new Uint8Array(E))},O=E=>{if(console.log("Received content event:",E),E.modelTurn&&E.modelTurn.parts){const P=E.modelTurn.parts.filter(I=>"text"in I&&I.text);if(P.length>0){const I=P.map(F=>F.text).join(" ");y(I),console.log("AI Summary received:",I)}}};return t.on("error",_).on("open",b).on("close",w).on("interrupted",T).on("audio",C).on("content",O),()=>{t.off("error",_).off("open",b).off("close",w).off("interrupted",T).off("audio",C).off("content",O).disconnect()}},[t]);const v=j.useCallback(async()=>{if(!s)throw new Error("config has not been set");t.disconnect(),await t.connect(r,s)},[t,s,r]),x=j.useCallback(async()=>{t.disconnect(),c(!1)},[c,t]);return{client:t,config:s,setConfig:o,model:r,setModel:a,connected:l,connect:v,disconnect:x,volume:u,aiSummary:p}}const D7=j.createContext(void 0),CN=({options:e,children:t})=>{const n=Tve(e);return i.jsx(D7.Provider,{value:n,children:t})},bd=()=>{const e=j.useContext(D7);if(!e)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return e};function Eve(){const{config:e,setConfig:t}=bd(),[n,r]=j.useState({value:"audio",label:"audio"}),a=j.useCallback(s=>{t({...e,responseModalities:[s==="audio"?hd.AUDIO:hd.TEXT]})},[e,t]);return i.jsxs("div",{className:"select-group",children:[i.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),i.jsx(r7,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:n,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:s=>{r(s),s&&(s.value==="audio"||s.value==="text")&&a(s.value)}})]})}const eL=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function Ave(){const{config:e,setConfig:t}=bd();j.useEffect(()=>{var l,c,u;const s=((u=(c=(l=e.speechConfig)==null?void 0:l.voiceConfig)==null?void 0:c.prebuiltVoiceConfig)==null?void 0:u.voiceName)||"Atari02";r({value:s,label:s})},[e]);const[n,r]=j.useState(eL[5]),a=j.useCallback(s=>{t({...e,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}}})},[e,t]);return i.jsxs("div",{className:"select-group",children:[i.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),i.jsx(r7,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:n,defaultValue:n,options:eL,onChange:s=>{r(s),s&&a(s.value)}})]})}function kve(){const[e,t]=j.useState(!1),{config:n,setConfig:r,connected:a}=bd(),s=j.useMemo(()=>Array.isArray(n.tools)?n.tools.filter(u=>Array.isArray(u.functionDeclarations)).map(u=>u.functionDeclarations).filter(u=>!!u).flat():[],[n]),o=j.useMemo(()=>{var u;return n.systemInstruction?typeof n.systemInstruction=="string"?n.systemInstruction:Array.isArray(n.systemInstruction)?n.systemInstruction.map(f=>typeof f=="string"?f:f.text).join(`
`):typeof n.systemInstruction=="object"&&"parts"in n.systemInstruction&&((u=n.systemInstruction.parts)==null?void 0:u.map(f=>f.text).join(`
`))||"":""},[n]),l=j.useCallback(u=>{const f={...n,systemInstruction:u.target.value};r(f)},[n,r]),c=j.useCallback((u,f)=>{var y;const p={...n,tools:((y=n.tools)==null?void 0:y.map(v=>{const x=v;return Array.isArray(x.functionDeclarations)?{...v,functionDeclarations:x.functionDeclarations.map(b=>b.name===u?{...b,description:f}:b)}:v}))||[]};r(p)},[n,r]);return i.jsxs("div",{className:"settings-dialog",children:[i.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>t(!e),children:"settings"}),i.jsx("dialog",{className:"dialog",style:{display:e?"block":"none"},children:i.jsxs("div",{className:`dialog-container ${a?"disabled":""}`,children:[a&&i.jsx("div",{className:"connected-indicator",children:i.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),i.jsxs("div",{className:"mode-selectors",children:[i.jsx(Eve,{}),i.jsx(Ave,{})]}),i.jsx("h3",{children:"System Instructions"}),i.jsx("textarea",{className:"system",onChange:l,value:o}),i.jsx("h4",{children:"Function declarations"}),i.jsx("div",{className:"function-declarations",children:i.jsx("div",{className:"fd-rows",children:s.map((u,f)=>{var p;return i.jsxs("div",{className:"fd-row",children:[i.jsx("span",{className:"fd-row-name",children:u.name}),i.jsx("span",{className:"fd-row-args",children:Object.keys(((p=u.parameters)==null?void 0:p.properties)||{}).map((y,v)=>i.jsx("span",{children:y},v))}),i.jsx("input",{className:"fd-row-description",type:"text",defaultValue:u.description,onBlur:y=>c(u.name,y.target.value)},`fd-${u.description}`)]},`function-${f}`)})})})]})})]})}const tL=j.memo(({isStreaming:e,onIcon:t,offIcon:n,start:r,stop:a})=>e?i.jsx("button",{className:"action-button",onClick:a,children:i.jsx("span",{className:"material-symbols-outlined",children:t})}):i.jsx("button",{className:"action-button",onClick:r,children:i.jsx("span",{className:"material-symbols-outlined",children:n})}));function Pve({videoRef:e,children:t,onVideoStreamChange:n=()=>{},supportsVideo:r,enableEditingSettings:a}){const s=[_ve(),Nve()],[o,l]=j.useState(null),[c,u]=s,[f,p]=j.useState(0),[y]=j.useState(()=>new o7),[v,x]=j.useState(!1),b=j.useRef(null),w=j.useRef(null),{client:_,connected:T,connect:C,disconnect:O,volume:E}=bd();j.useEffect(()=>{!T&&w.current&&w.current.focus()},[T]),j.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(f*200,8))}px`)},[f]),j.useEffect(()=>{const I=F=>{_.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:F}])};return T&&!v&&y?y.on("data",I).on("volume",p).start():y.stop(),()=>{y.off("data",I).off("volume",p)}},[T,_,v,y]),j.useEffect(()=>{e.current&&(e.current.srcObject=o);let I=-1;function F(){const $=e.current,z=b.current;if(!$||!z)return;const L=z.getContext("2d");if(z.width=$.videoWidth*.25,z.height=$.videoHeight*.25,z.width+z.height>0){L.drawImage($,0,0,z.width,z.height);const H=z.toDataURL("image/jpeg",1),V=H.slice(H.indexOf(",")+1,1/0);_.sendRealtimeInput([{mimeType:"image/jpeg",data:V}])}T&&(I=window.setTimeout(F,1e3/.5))}return T&&o!==null&&requestAnimationFrame(F),()=>{clearTimeout(I)}},[T,o,_,e]);const P=I=>async()=>{if(I){const F=await I.start();l(F),n(F)}else l(null),n(null);s.filter(F=>F!==I).forEach(F=>F.stop())};return i.jsxs("section",{className:"control-tray",children:[i.jsx("canvas",{style:{display:"none"},ref:b}),i.jsxs("nav",{className:sd("actions-nav",{disabled:!T}),children:[i.jsx("button",{className:sd("action-button mic-button",{recording:!v&&T}),onClick:()=>x(!v),children:v?i.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):i.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),i.jsx("div",{className:"action-button no-action outlined",children:i.jsx(Hge,{volume:E,active:T,hover:!1})}),r&&i.jsxs(i.Fragment,{children:[i.jsx(tL,{isStreaming:u.isStreaming,start:P(u),stop:P(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),i.jsx(tL,{isStreaming:c.isStreaming,start:P(c),stop:P(),onIcon:"videocam_off",offIcon:"videocam"})]}),t]}),i.jsxs("div",{className:sd("connection-container",{connected:T}),children:[i.jsx("div",{className:"connection-button-container",children:i.jsx("button",{ref:w,className:sd("action-button connect-toggle",{connected:T}),onClick:T?O:C,children:i.jsx("span",{className:"material-symbols-outlined filled",children:T?"pause":"play_arrow"})})}),i.jsx("span",{className:"text-indicator",children:"Streaming"})]}),a?i.jsx(kve,{}):""]})}const nL={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:cg.OBJECT,properties:{summary:{type:cg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},Ove=({patientData:e,tokenNumber:t})=>{const[n,r]=j.useState(""),{client:a,setConfig:s,setModel:o}=bd();return j.useEffect(()=>{o("models/gemini-2.5-flash-live-preview"),s({responseModalities:[hd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[nL]}]})},[s,o]),j.useEffect(()=>{const l=c=>{if(!c.functionCalls)return;const u=c.functionCalls.find(f=>f.name===nL.name);if(u){const f=u.args.summary;r(f)}c.functionCalls.length&&setTimeout(()=>{var f;return a.sendToolResponse({functionResponses:(f=c.functionCalls)==null?void 0:f.map(p=>({response:{output:{success:!0}},id:p.id,name:p.name}))})},200)};return a.on("toolcall",l),()=>{a.off("toolcall",l)}},[a]),j.useEffect(()=>{if(n){const l=encodeURIComponent(n);t?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${t}&caseDetails=${l}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${l}`}},[n,t]),i.jsxs("div",{className:"hospital-reception",children:[i.jsx("h1",{children:"Newtons Ai"}),i.jsx("p",{children:"Newtons Ai"}),t&&i.jsxs("h2",{children:["Token Number: ",t]}),e&&i.jsxs("div",{children:[i.jsx("h2",{children:"Patient Details"}),i.jsx("pre",{children:JSON.stringify(e,null,2)})]}),n&&i.jsxs("div",{children:[i.jsx("h2",{children:"Case Summary (from Tool Call)"}),i.jsx("p",{children:n})]})]})},rL="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function Dve(){const e=p9();if(!e)return console.warn("No auth token found, using default Live API key."),rL;try{const n=(await ii.get("/api/clinics/gemini-api-key",{headers:{Authorization:`Bearer ${e}`}})).data.geminiApiKey;if(n)return n}catch(t){console.error("Failed to fetch clinic-specific Live API key:",t)}return console.warn("Clinic-specific Live API key not found or failed to fetch, using default."),rL}function Mve(){const e=j.useRef(null),[t,n]=j.useState(null),[r,a]=j.useState(null);return j.useEffect(()=>{(async()=>{try{const o=await Dve();a({apiKey:o})}catch(o){console.error("Error setting Live API options:",o)}})()},[]),r?i.jsx("div",{className:"App",children:i.jsx(CN,{options:r,children:i.jsx(Ive,{videoRef:e,setVideoStream:n,videoStream:t})})}):i.jsx("div",{children:"Loading Live API settings..."})}const Ive=({videoRef:e,setVideoStream:t,videoStream:n})=>{const[r,a]=j.useState(null),[s,o]=j.useState(null),{connected:l,client:c,connect:u,config:f,model:p}=bd(),[y,v]=j.useState(""),x=j.useRef(null),[b,w]=j.useState(!1);j.useEffect(()=>{const T=window.matchMedia("(prefers-color-scheme: dark)"),C=O=>{document.documentElement.setAttribute("data-theme",O.matches?"dark":"light")};return C(T),T.addEventListener("change",C),()=>T.removeEventListener("change",C)},[]),j.useEffect(()=>{const T=new URLSearchParams(window.location.search),C={};for(const[O,E]of T.entries())O==="token_number"?o(E):C[O]=E;a(C)},[]),j.useEffect(()=>{Object.keys(f).length>0&&p&&u()},[u,f,p]),j.useEffect(()=>{if(l&&r&&!b){const T=JSON.stringify(r,null,2);c.send([{text:T}]),v(""),w(!0)}},[l,r,c,b]),j.useEffect(()=>{r&&v(JSON.stringify(r,null,2))},[r]);const _=()=>{c.send([{text:y}]),v(""),x.current&&(x.current.innerText="")};return i.jsx("div",{className:"streaming-console",children:i.jsxs("main",{children:[i.jsxs("div",{className:"main-app-area",children:[i.jsx(Ove,{patientData:r,tokenNumber:s}),i.jsx("video",{className:sd("stream",{hidden:!e.current||!n}),ref:e,autoPlay:!0,playsInline:!0})]}),i.jsx("div",{className:sd("input-container",{disabled:!l}),children:i.jsxs("div",{className:"input-content",children:[i.jsx("textarea",{className:"input-area",ref:x,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),T.stopPropagation(),_())},onChange:T=>v(T.target.value),value:y}),i.jsx("span",{className:sd("input-content-placeholder",{hidden:y.length}),children:"Typesomething..."}),i.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:_,children:"send"})]})}),i.jsx(Pve,{videoRef:e,supportsVideo:!0,onVideoStreamChange:t,enableEditingSettings:!0})]})})},iL="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",Rve=({volume:e,active:t})=>{const n=Array.from({length:5},(r,a)=>i.jsx("div",{className:`audio-bar ${t?"active":""}`,style:{height:t?`${Math.min(24,20+e*40*(1+Math.sin(a)*.3))}px`:"8px",animationDelay:`${a*.1}s`}},a));return i.jsx("div",{className:"audio-pulse",children:n})},Lve=j.forwardRef(({videoRef:e,supportsVideo:t,onVideoStreamChange:n,textInput:r,onSubmitTextInput:a},s)=>{var P;const{connected:o,connect:l,disconnect:c,client:u,volume:f}=bd(),[p,y]=j.useState(!1),[v,x]=j.useState(!1),[b,w]=j.useState(!1),[_]=j.useState(()=>new o7),T=async()=>{o?await c():(await l(),r.trim()&&a())};j.useEffect(()=>{const I=F=>{u.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:F}])};return o&&!p?_.on("data",I).start():_.stop(),()=>{_.off("data",I),_.stop()}},[o,u,p,_]);const C=j.useCallback(async()=>{if(v)E==null||E.getTracks().forEach(I=>I.stop()),n(null),x(!1);else try{const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});e.current&&(e.current.srcObject=I),n(I),x(!0)}catch(I){console.error("Error accessing webcam:",I),x(!1)}},[v,n,e]),O=j.useCallback(async()=>{if(b)E==null||E.getTracks().forEach(I=>I.stop()),n(null),w(!1);else try{const I=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});e.current&&(e.current.srcObject=I),n(I),w(!0)}catch(I){console.error("Error accessing screen share:",I),w(!1)}},[b,n,e]),E=(P=e.current)==null?void 0:P.srcObject;return j.useEffect(()=>()=>{E&&E.getTracks().forEach(I=>I.stop())},[E]),j.useImperativeHandle(s,()=>({handleConnect:T})),i.jsx("div",{className:"live-api-control-tray",children:i.jsxs("div",{className:"live-api-control-tray-inner",children:[i.jsxs("div",{className:"live-api-control-group",children:[i.jsx("button",{onClick:()=>y(!p),disabled:!o,className:`live-api-control-button ${o&&!p?"mic-active":"mic-inactive"}`,"aria-label":p?"Unmute microphone":"Mute microphone",children:p?i.jsx(uZ,{className:"w-5 h-5"}):i.jsx(rN,{className:"w-5 h-5"})}),i.jsx("div",{className:"live-api-audio-pulse-container",children:i.jsx(Rve,{volume:f,active:o})}),t&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:O,disabled:!o,className:`live-api-control-button ${b?"video-active":"video-inactive"}`,"aria-label":b?"Stop screen share":"Start screen share",children:i.jsx(mZ,{className:"w-5 h-5"})}),i.jsx("button",{onClick:C,disabled:!o,className:`live-api-control-button ${v?"video-active":"video-inactive"}`,"aria-label":v?"Turn off webcam":"Turn on webcam",children:i.jsx(vee,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"live-api-control-group",children:[i.jsxs("div",{className:"live-api-status-indicator",children:[i.jsx("div",{className:`live-api-status-dot ${o?"connected":"disconnected"}`}),i.jsx("span",{className:"live-api-status-text",children:o?"Streaming":"Disconnected"})]}),i.jsx("button",{onClick:T,className:`live-api-connect-button ${o?"connected":"disconnected"}`,children:o?i.jsxs(i.Fragment,{children:[i.jsx(_Z,{className:"w-5 h-5"}),i.jsx("span",{children:"Pause"})]}):i.jsxs(i.Fragment,{children:[i.jsx(qq,{className:"w-5 h-5"}),i.jsx("span",{children:"Start"})]})})]})]})})}),Fve=({tokenNumber:e,aiSummary:t,clinicName:n})=>i.jsxs("div",{className:"hospital-reception-container",children:[i.jsxs("div",{className:"hospital-reception-logo-section",children:[i.jsx("div",{className:"hospital-reception-logo",children:i.jsx("span",{children:n.charAt(0)})}),i.jsxs("h1",{className:"hospital-reception-title",children:[n," AI"]}),i.jsxs("p",{className:"hospital-reception-subtitle",children:["Intelligent ",n," Reception Assistant"]})]}),e&&i.jsxs("div",{className:"hospital-reception-token-card",children:[i.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),i.jsx("p",{className:"hospital-reception-token-number",children:e})]}),t&&i.jsxs("div",{className:"hospital-reception-summary-card",children:[i.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),i.jsx("p",{className:"hospital-reception-summary-text",children:t})]})]}),aL={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:cg.OBJECT,properties:{summary:{type:cg.STRING,description:"The summary of the patient's case."}},required:["summary"]}},$ve=({onClose:e,patientData:t,tokenNumber:n,onAiSummaryChange:r,clinicName:a,voiceAiLanguage:s,lastMotionTimestamp:o,backgroundMode:l})=>{const c=j.useRef(null),u=j.useRef(null),[f,p]=j.useState(null),[y,v]=j.useState("hi"),{client:x,connected:b,setConfig:w,setModel:_,disconnect:T,connect:C}=bd(),O=j.useRef(!1),E=j.useRef(Date.now()),P=j.useRef(!1);j.useEffect(()=>{O.current=b,b&&(E.current=Date.now(),P.current=!1)},[b]),j.useEffect(()=>{if(o){if(E.current=Date.now(),O.current)return;b||C()}},[o,C,b]),j.useEffect(()=>{if(!o||!b)return;const V=setInterval(()=>{const Z=Date.now()-E.current;Z>25e3&&Z<3e4&&!P.current&&(P.current=!0,x.send([{text:"I'll be here if you need more help!"}])),Z>3e4&&(console.log("No motion for 30s. Disconnecting session."),T(),e())},1e3);return()=>clearInterval(V)},[o,b,x,T,e]);const I=j.useMemo(()=>{let V=`Your job is to:

If patient details like name, age, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (Name, Age) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's Name and Age only. Do not ask for their phone number.

    You should guess the patient's sex based on their voice or appearance.

For every visit, collect the patient's history by asking questions.

CRITICAL WORKFLOW - DO NOT USE THE 'case_summary' TOOL YET.

Phase 1: History Collection (MANDATORY LOOP)
Once you have the basics, you MUST ask the patient about their complaints.
- Ask clarifying questions to understand the onset, duration, severity, and associated symptoms.
- DO NOT just accept a one-line complaint.
- Loop your questions until you are confident you have a complete medical history.

Phase 2: Billing Check Protocol
ONLY after you are confident you have the complete history, proceed to the Billing Check Protocol immediately:
1. Ask: 'Would you like to get the tests done?'
   - IF PATIENT SAYS YES: STOP questioning. Do NOT mention medications (they will get them after reports).
     Result -> Lab: Yes, Pharmacy: No.
   - IF PATIENT SAYS NO: Ask: 'Would you like to get the medications?'
     - IF YES: Result -> Lab: No, Pharmacy: Yes.
     - IF NO: Result -> Lab: No, Pharmacy: No.

Phase 3: Final Summary
Only AFTER establishing the billing preferences as per the logic above, you should use the 'case_summary' tool EXACTLY ONCE at the end.

The 'case_summary' MUST be comprehensive and include:
- Patient Name, Age, Sex
- Medical History & Complaints
- Billing Preferences (e.g., 'Billing Preference: Lab - Yes, Pharmacy - No')

Do not call the tool multiple times. Wait until you have ALL the info, then generate the single final summary and ask them to wait in reception.`;t&&(V+=`

Patient Data: ${JSON.stringify(t,null,2)}`);const Z={"en-US":"English","hi-IN":"Hindi","te-IN":"Telugu","bn-IN":"Bengali","mr-IN":"Marathi","ta-IN":"Tamil","gu-IN":"Gujarati","kn-IN":"Kannada","ml-IN":"Malayalam","pa-IN":"Punjabi","es-ES":"Spanish","fr-FR":"French","de-DE":"German","it-IT":"Italian","pt-PT":"Portuguese","ru-RU":"Russian","ja-JP":"Japanese","ko-KR":"Korean","zh-CN":"Chinese","ar-SA":"Arabic"}[s]||"English";return V+=` You should always speak in ${Z}.`,s==="te-IN"&&(V+=" Dont write the telugu words in english."),{responseModalities:[hd.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:V}]},tools:[{functionDeclarations:[aL]}]}},[t,s]);j.useEffect(()=>{if(_("models/gemini-2.5-flash-native-audio-preview-12-2025"),w(I),!o){const V=setTimeout(()=>{u.current&&!b&&u.current.handleConnect()},2e3);return()=>clearTimeout(V)}},[w,_,I,b,o]),j.useEffect(()=>()=>{b&&T()},[b,T]);const[F,$]=j.useState(null);j.useEffect(()=>{const V=ne=>{if(!ne.functionCalls)return;const Z=ne.functionCalls.find(q=>q.name===aL.name);if(Z){const q=Z.args.summary;$(q),r(q)}ne.functionCalls.length&&setTimeout(()=>{var q;return x.sendToolResponse({functionResponses:(q=ne.functionCalls)==null?void 0:q.map(K=>({response:{output:{success:!0}},id:K.id,name:K.name}))})},200)};return x.on("toolcall",V),()=>{x.off("toolcall",V)}},[x,r]);const z=()=>{y.trim()&&(x.send([{text:y}]),v(""))},L=V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),z())},H=async()=>{$(null),r(null),v("hi"),b?(T(),setTimeout(()=>{C()},500)):C()};return i.jsx("div",{className:"live-api-modal-overlay",style:l?{opacity:0,pointerEvents:"none",position:"absolute",zIndex:-1}:{},children:i.jsxs("div",{className:"live-api-modal-content",children:[i.jsxs("div",{className:"live-api-modal-header",children:[i.jsxs("div",{className:"live-api-modal-header-left",children:[i.jsx("div",{className:"live-api-modal-logo",children:i.jsx("span",{children:a.charAt(0)})}),i.jsxs("div",{children:[i.jsx("h1",{className:"live-api-modal-title",children:a}),i.jsxs("p",{className:"live-api-modal-subtitle",children:[a," Hospital Assistant"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:H,className:"live-api-modal-close-button",title:"Refresh Session","aria-label":"Refresh session",children:i.jsx(Uq,{className:"w-6 h-6"})}),i.jsx("button",{onClick:e,className:"live-api-modal-close-button","aria-label":"Close modal",children:i.jsx(zt,{className:"w-6 h-6"})})]})]}),i.jsx("div",{className:"live-api-modal-main-content",children:i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsxs("div",{className:"live-api-reception-area",children:[i.jsx(Fve,{patientData:t,tokenNumber:n,aiSummary:F,clinicName:a}),f&&i.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),i.jsx("div",{className:"live-api-input-area",children:i.jsxs("div",{className:"live-api-input-container",children:[i.jsx("textarea",{value:y,onChange:V=>v(V.target.value),onKeyDown:L,placeholder:"Type your message here...",disabled:!b,rows:1,className:"live-api-textarea"}),i.jsx("button",{onClick:z,disabled:!b||!y.trim(),className:"live-api-send-button","aria-label":"Send message",children:i.jsx(iN,{className:"w-5 h-5"})})]})}),i.jsx(Lve,{ref:u,videoRef:c,supportsVideo:!0,onVideoStreamChange:p,textInput:y,onSubmitTextInput:z})]})})]})})},TN=({onClose:e,patientData:t,tokenNumber:n,onAiSummaryChange:r,lastMotionTimestamp:a,backgroundMode:s})=>{const[o,l]=j.useState(null),[c,u]=j.useState("Newtons Ai"),[f,p]=j.useState("en-US"),[y,v]=j.useState(!0);if(j.useEffect(()=>{(async()=>{try{let w=null,_="Newtons Ai",T="en-US";try{const C=await ce("/api/clinics/settings");if(C.ok){const O=await C.json();O.name&&O.name!==""&&(_=O.name),O.gemini_api_key&&O.gemini_api_key.trim()!==""&&(w=O.gemini_api_key.trim()),O.voice_ai_language&&(T=O.voice_ai_language)}}catch(C){console.warn("Failed to fetch clinic settings",C)}if(u(_),p(T),w)l(w);else{try{const C=await ce("/api/global-settings/app_gemini_api_key");if(C.ok){const O=await C.json();if(O.value&&O.value.trim()!==""){l(O.value.trim());return}}}catch(C){console.warn("Failed to fetch global key fallback",C)}l(iL)}}catch(w){console.error("Unexpected error in getSettings:",w),l(iL)}finally{v(!1)}})()},[]),y)return i.jsx("div",{className:"live-api-modal-overlay",children:i.jsxs("div",{className:"live-api-modal-content",children:[i.jsx("div",{className:"live-api-modal-header",style:{borderBottom:"none"},children:i.jsxs("div",{className:"live-api-modal-header-left",children:[i.jsx(ee,{variant:"circular",width:40,height:40}),i.jsxs("div",{style:{marginLeft:"12px"},children:[i.jsx(ee,{width:120,height:24}),i.jsx(ee,{width:180,height:14,style:{marginTop:"4px"}})]})]})}),i.jsx("div",{className:"live-api-modal-main-content",children:i.jsxs("div",{className:"hospital-reception-container",children:[i.jsxs("div",{className:"hospital-reception-logo-section",children:[i.jsx(ee,{variant:"circular",width:64,height:64,style:{margin:"0 auto"}}),i.jsx(ee,{width:200,height:32,style:{margin:"16px auto 8px"}}),i.jsx(ee,{width:250,height:16,style:{margin:"0 auto"}})]}),i.jsxs("div",{className:"hospital-reception-token-card",style:{background:"transparent",boxShadow:"none"},children:[i.jsx(ee,{width:140,height:20,style:{margin:"0 auto 8px"}}),i.jsx(ee,{width:100,height:48,style:{margin:"0 auto"}})]})]})}),i.jsx("div",{className:"live-api-control-tray",style:{position:"relative"},children:i.jsx("div",{className:"live-api-control-tray-inner",style:{justifyContent:"center"},children:i.jsx("div",{className:"live-api-loading-text",children:"Initializing AI Assistant..."})})})]})});if(!o)return i.jsx("div",{className:"live-api-modal-overlay",children:i.jsx("div",{className:"live-api-modal-content",children:i.jsx("div",{children:"Error: API Key not available."})})});const x={apiKey:o};return i.jsx(CN,{options:x,children:i.jsx($ve,{onClose:e,patientData:t,tokenNumber:n,onAiSummaryChange:r,clinicName:c,voiceAiLanguage:f,lastMotionTimestamp:a,backgroundMode:s})})},EN=()=>{const[e,t]=j.useState(null),[n,r]=j.useState(!0),[a,s]=j.useState(null),o=j.useCallback(async()=>{r(!0),s(null);try{const c=await ce("/api/clinics/settings");if(!c.ok)throw new Error("Failed to fetch clinic settings");const u=await c.json();t(u)}catch(c){s(c instanceof Error?c.message:"An error occurred")}finally{r(!1)}},[]);j.useEffect(()=>{o()},[o]);const l=(e==null?void 0:e.custom_columns_config)||{};return{settings:e,customColumnsConfig:l,loading:n,error:a,refetch:o}},Bve="_overlay_79cew_5",zve="_overlayMinimized_79cew_55",qve="_modal_79cew_65",Uve="_minimized_79cew_97",Vve="_contentWrapper_79cew_113",Hve="_exiting_79cew_161",Gve="_header_79cew_183",Wve="_inputWrapper_79cew_197",Kve="_inputContainer_79cew_215",Yve="_minimizedSearchIcon_79cew_273",Qve="_input_79cew_197",Xve="_controlsGroup_79cew_347",Jve="_iconButton_79cew_373",Zve="_sendButton_79cew_413",exe="_dragBar_79cew_459",txe="_dragBarTitle_79cew_489",nxe="_dragBarControls_79cew_519",rxe="_dragBarControlsRight_79cew_537",ixe="_newChatBtn_79cew_553",axe="_windowControlBtn_79cew_589",sxe="_content_79cew_113",oxe="_overlayContent_79cew_687",lxe="_section_79cew_711",cxe="_sectionTitle_79cew_723",uxe="_recentList_79cew_743",dxe="_recentPill_79cew_767",hxe="_recentName_79cew_807",fxe="_recentToken_79cew_819",pxe="_recentInfo_79cew_837",mxe="_examplesGrid_79cew_849",gxe="_exampleCard_79cew_861",yxe="_exampleIcon_79cew_897",vxe="_exampleText_79cew_905",xxe="_chatSectionFill_79cew_919",bxe="_chatMessagesFill_79cew_935",jxe="_chatBubble_79cew_955",wxe="_chatBubbleUser_79cew_975",Sxe="_chatBubbleModel_79cew_991",Nxe="_chatBubbleSystem_79cew_1009",_xe="_processing_79cew_1025",Cxe="_spinner_79cew_1043",Txe="_resultItem_79cew_1065",Exe="_resultName_79cew_1093",Axe="_resultToken_79cew_1103",kxe="_resultDetails_79cew_1115",Pxe="_noResults_79cew_1125",At={overlay:Bve,overlayMinimized:zve,modal:qve,minimized:Uve,contentWrapper:Vve,exiting:Hve,header:Gve,inputWrapper:Wve,inputContainer:Kve,minimizedSearchIcon:Yve,input:Qve,controlsGroup:Xve,iconButton:Jve,sendButton:Zve,dragBar:exe,dragBarTitle:txe,dragBarControls:nxe,dragBarControlsRight:rxe,newChatBtn:ixe,windowControlBtn:axe,content:sxe,overlayContent:oxe,section:lxe,sectionTitle:cxe,recentList:uxe,recentPill:dxe,recentName:hxe,recentToken:fxe,recentInfo:pxe,examplesGrid:mxe,exampleCard:gxe,exampleIcon:yxe,exampleText:vxe,chatSectionFill:xxe,chatMessagesFill:bxe,chatBubble:jxe,chatBubbleUser:wxe,chatBubbleModel:Sxe,chatBubbleSystem:Nxe,processing:_xe,spinner:Cxe,resultItem:Txe,resultName:Exe,resultToken:Axe,resultDetails:kxe,noResults:Pxe},Kb=({columns:e,data:t,onSave:n,onRowAdd:r,onRowDelete:a,onRowClick:s,onRowHover:o,editable:l=!0,showRowNumbers:c=!0,title:u})=>{const[f,p]=j.useState(t),[y,v]=j.useState(null),[x,b]=j.useState(""),[w,_]=j.useState(""),[T,C]=j.useState(null),[O,E]=j.useState(!1),[P,I]=j.useState(new Set);ye.useEffect(()=>{p(t),E(!1)},[t]);const F=j.useMemo(()=>{let q=[...f];if(w.trim()){const K=w.toLowerCase();q=q.filter(se=>Object.values(se).some(G=>G!=null&&String(G).toLowerCase().includes(K)))}return T&&q.sort((K,se)=>{const G=K[T.key],B=se[T.key];return G==null?1:B==null?-1:G<B?T.direction==="asc"?-1:1:G>B?T.direction==="asc"?1:-1:0}),q},[f,w,T]),$=(q,K)=>{var G;if(!l)return;const se=e.find(B=>B.key===K);(se==null?void 0:se.editable)!==!1&&(v({row:q,col:K}),b(String(((G=f[q])==null?void 0:G[K])??"")))},z=()=>{var q;if(y){const K=[...f],se=e.find(B=>B.key===y.col);let G=x;(se==null?void 0:se.type)==="number"&&(G=parseFloat(G)||0),(se==null?void 0:se.type)==="boolean"&&(G=G.toLowerCase()==="true"||G==="1"),((q=K[y.row])==null?void 0:q[y.col])!==G&&(K[y.row]={...K[y.row],[y.col]:G},p(K),E(!0))}v(null)},L=q=>{if(q.key==="Enter")z();else if(q.key==="Escape")v(null);else if(q.key==="Tab"&&(q.preventDefault(),z(),y)){const K=e.findIndex(G=>G.key===y.col),se=e[K+1];se?setTimeout(()=>$(y.row,se.key),0):y.row<f.length-1&&setTimeout(()=>$(y.row+1,e[0].key),0)}},H=q=>{C(K=>(K==null?void 0:K.key)===q?K.direction==="asc"?{key:q,direction:"desc"}:null:{key:q,direction:"asc"})},V=()=>{n&&(n(f),E(!1))},ne=()=>{const q=e.map(me=>me.label).join(","),K=f.map(me=>e.map(Y=>{const xe=me[Y.key];return typeof xe=="string"&&xe.includes(",")?`"${xe}"`:xe}).join(",")),se=[q,...K].join(`
`),G=new Blob([se],{type:"text/csv"}),B=URL.createObjectURL(G),fe=document.createElement("a");fe.href=B,fe.download=`${u||"data"}.csv`,fe.click()},Z=q=>{const K=new Set(P);K.has(q)?K.delete(q):K.add(q),I(K)};return i.jsxs("div",{className:"excel-grid",children:[i.jsxs("div",{className:"excel-toolbar",children:[i.jsxs("div",{className:"excel-search",children:[i.jsx("input",{type:"text",placeholder:" Search...",value:w,onChange:q=>_(q.target.value)}),w&&i.jsx("button",{className:"clear-search",onClick:()=>_(""),children:i.jsx(zt,{size:14})})]}),i.jsxs("div",{className:"excel-actions",children:[r&&i.jsxs("button",{onClick:r,className:"excel-btn",title:"Add Row",children:[i.jsx(Yr,{size:16})," Add"]}),i.jsxs("button",{onClick:ne,className:"excel-btn",title:"Export CSV",children:[i.jsx(Rq,{size:16})," Export"]}),l&&n&&i.jsxs("button",{onClick:V,className:`excel-btn save-btn ${O?"has-changes":""}`,disabled:!O,title:"Save Changes",children:[i.jsx(Xs,{size:16})," Save"]})]})]}),i.jsxs("div",{className:"excel-status",children:[w&&i.jsxs("span",{children:["Showing ",F.length," of ",f.length]}),O&&i.jsx("span",{className:"unsaved-indicator",children:" Unsaved changes"})]}),i.jsx("div",{className:"excel-table-wrapper",children:i.jsxs("table",{className:"excel-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[c&&i.jsx("th",{className:"row-num-header",children:"#"}),e.map(q=>i.jsx("th",{onClick:()=>H(q.key),style:{width:q.width,cursor:"pointer"},children:i.jsxs("div",{className:"th-content",children:[q.label,(T==null?void 0:T.key)===q.key&&(T.direction==="asc"?i.jsx(uJ,{size:14}):i.jsx(Iq,{size:14}))]})},q.key)),a&&i.jsx("th",{className:"action-col",children:""})]})}),i.jsx("tbody",{children:F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:e.length+(c?1:0)+(a?1:0),className:"no-data",children:"No data found"})}):F.map((q,K)=>i.jsxs("tr",{className:`${P.has(K)?"selected":""} ${s?"clickable-row":""}`,onClick:()=>s&&s(q,K),onMouseEnter:()=>o&&o(q,K),style:s?{cursor:"pointer"}:void 0,children:[c&&i.jsx("td",{className:"row-num",onClick:()=>Z(K),children:K+1}),e.map(se=>i.jsx("td",{onClick:()=>$(K,se.key),className:`
                                                ${(y==null?void 0:y.row)===K&&(y==null?void 0:y.col)===se.key?"editing":""}
                                                ${se.editable===!1?"read-only":""}
                                            `,children:(y==null?void 0:y.row)===K&&(y==null?void 0:y.col)===se.key?i.jsx("input",{type:se.type==="number"?"number":"text",value:x,onChange:G=>b(G.target.value),onBlur:z,onKeyDown:L,autoFocus:!0}):i.jsx("span",{children:q[se.key]??""})},se.key)),a&&i.jsx("td",{className:"action-col",children:i.jsx("button",{className:"delete-row",onClick:()=>a(K),children:i.jsx(zt,{size:14})})})]},q.id||K))})]})}),i.jsxs("div",{className:"excel-footer",children:[i.jsxs("span",{children:[f.length," rows"]}),P.size>0&&i.jsxs("span",{children:[P.size," selected"]})]})]})};function M7(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=M7(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function fn(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=M7(e))&&(r&&(r+=" "),r+=t);return r}var l2,sL;function is(){if(sL)return l2;sL=1;var e=Array.isArray;return l2=e,l2}var c2,oL;function I7(){if(oL)return c2;oL=1;var e=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks;return c2=e,c2}var u2,lL;function Il(){if(lL)return u2;lL=1;var e=I7(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return u2=n,u2}var d2,cL;function Yb(){if(cL)return d2;cL=1;var e=Il(),t=e.Symbol;return d2=t,d2}var h2,uL;function Oxe(){if(uL)return h2;uL=1;var e=Yb(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,a=e?e.toStringTag:void 0;function s(o){var l=n.call(o,a),c=o[a];try{o[a]=void 0;var u=!0}catch{}var f=r.call(o);return u&&(l?o[a]=c:delete o[a]),f}return h2=s,h2}var f2,dL;function Dxe(){if(dL)return f2;dL=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return f2=n,f2}var p2,hL;function qc(){if(hL)return p2;hL=1;var e=Yb(),t=Oxe(),n=Dxe(),r="[object Null]",a="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?a:r:s&&s in Object(l)?t(l):n(l)}return p2=o,p2}var m2,fL;function Uc(){if(fL)return m2;fL=1;function e(t){return t!=null&&typeof t=="object"}return m2=e,m2}var g2,pL;function Wg(){if(pL)return g2;pL=1;var e=qc(),t=Uc(),n="[object Symbol]";function r(a){return typeof a=="symbol"||t(a)&&e(a)==n}return g2=r,g2}var y2,mL;function sM(){if(mL)return y2;mL=1;var e=is(),t=Wg(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function a(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return y2=a,y2}var v2,gL;function jd(){if(gL)return v2;gL=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return v2=e,v2}var x2,yL;function oM(){if(yL)return x2;yL=1;var e=qc(),t=jd(),n="[object AsyncFunction]",r="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==r||c==a||c==n||c==s}return x2=o,x2}var b2,vL;function Mxe(){if(vL)return b2;vL=1;var e=Il(),t=e["__core-js_shared__"];return b2=t,b2}var j2,xL;function Ixe(){if(xL)return j2;xL=1;var e=Mxe(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return j2=n,j2}var w2,bL;function R7(){if(bL)return w2;bL=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return w2=n,w2}var S2,jL;function Rxe(){if(jL)return S2;jL=1;var e=oM(),t=Ixe(),n=jd(),r=R7(),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,f=RegExp("^"+c.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(y){if(!n(y)||t(y))return!1;var v=e(y)?f:s;return v.test(r(y))}return S2=p,S2}var N2,wL;function Lxe(){if(wL)return N2;wL=1;function e(t,n){return t==null?void 0:t[n]}return N2=e,N2}var _2,SL;function Rf(){if(SL)return _2;SL=1;var e=Rxe(),t=Lxe();function n(r,a){var s=t(r,a);return e(s)?s:void 0}return _2=n,_2}var C2,NL;function AN(){if(NL)return C2;NL=1;var e=Rf(),t=e(Object,"create");return C2=t,C2}var T2,_L;function Fxe(){if(_L)return T2;_L=1;var e=AN();function t(){this.__data__=e?e(null):{},this.size=0}return T2=t,T2}var E2,CL;function $xe(){if(CL)return E2;CL=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return E2=e,E2}var A2,TL;function Bxe(){if(TL)return A2;TL=1;var e=AN(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function a(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return r.call(o,s)?o[s]:void 0}return A2=a,A2}var k2,EL;function zxe(){if(EL)return k2;EL=1;var e=AN(),t=Object.prototype,n=t.hasOwnProperty;function r(a){var s=this.__data__;return e?s[a]!==void 0:n.call(s,a)}return k2=r,k2}var P2,AL;function qxe(){if(AL)return P2;AL=1;var e=AN(),t="__lodash_hash_undefined__";function n(r,a){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&a===void 0?t:a,this}return P2=n,P2}var O2,kL;function Uxe(){if(kL)return O2;kL=1;var e=Fxe(),t=$xe(),n=Bxe(),r=zxe(),a=qxe();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=a,O2=s,O2}var D2,PL;function Vxe(){if(PL)return D2;PL=1;function e(){this.__data__=[],this.size=0}return D2=e,D2}var M2,OL;function lM(){if(OL)return M2;OL=1;function e(t,n){return t===n||t!==t&&n!==n}return M2=e,M2}var I2,DL;function kN(){if(DL)return I2;DL=1;var e=lM();function t(n,r){for(var a=n.length;a--;)if(e(n[a][0],r))return a;return-1}return I2=t,I2}var R2,ML;function Hxe(){if(ML)return R2;ML=1;var e=kN(),t=Array.prototype,n=t.splice;function r(a){var s=this.__data__,o=e(s,a);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return R2=r,R2}var L2,IL;function Gxe(){if(IL)return L2;IL=1;var e=kN();function t(n){var r=this.__data__,a=e(r,n);return a<0?void 0:r[a][1]}return L2=t,L2}var F2,RL;function Wxe(){if(RL)return F2;RL=1;var e=kN();function t(n){return e(this.__data__,n)>-1}return F2=t,F2}var $2,LL;function Kxe(){if(LL)return $2;LL=1;var e=kN();function t(n,r){var a=this.__data__,s=e(a,n);return s<0?(++this.size,a.push([n,r])):a[s][1]=r,this}return $2=t,$2}var B2,FL;function PN(){if(FL)return B2;FL=1;var e=Vxe(),t=Hxe(),n=Gxe(),r=Wxe(),a=Kxe();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=a,B2=s,B2}var z2,$L;function cM(){if($L)return z2;$L=1;var e=Rf(),t=Il(),n=e(t,"Map");return z2=n,z2}var q2,BL;function Yxe(){if(BL)return q2;BL=1;var e=Uxe(),t=PN(),n=cM();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return q2=r,q2}var U2,zL;function Qxe(){if(zL)return U2;zL=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return U2=e,U2}var V2,qL;function ON(){if(qL)return V2;qL=1;var e=Qxe();function t(n,r){var a=n.__data__;return e(r)?a[typeof r=="string"?"string":"hash"]:a.map}return V2=t,V2}var H2,UL;function Xxe(){if(UL)return H2;UL=1;var e=ON();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return H2=t,H2}var G2,VL;function Jxe(){if(VL)return G2;VL=1;var e=ON();function t(n){return e(this,n).get(n)}return G2=t,G2}var W2,HL;function Zxe(){if(HL)return W2;HL=1;var e=ON();function t(n){return e(this,n).has(n)}return W2=t,W2}var K2,GL;function ebe(){if(GL)return K2;GL=1;var e=ON();function t(n,r){var a=e(this,n),s=a.size;return a.set(n,r),this.size+=a.size==s?0:1,this}return K2=t,K2}var Y2,WL;function uM(){if(WL)return Y2;WL=1;var e=Yxe(),t=Xxe(),n=Jxe(),r=Zxe(),a=ebe();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=a,Y2=s,Y2}var Q2,KL;function L7(){if(KL)return Q2;KL=1;var e=uM(),t="Expected a function";function n(r,a){if(typeof r!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var s=function(){var o=arguments,l=a?a.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var u=r.apply(this,o);return s.cache=c.set(l,u)||c,u};return s.cache=new(n.Cache||e),s}return n.Cache=e,Q2=n,Q2}var X2,YL;function tbe(){if(YL)return X2;YL=1;var e=L7(),t=500;function n(r){var a=e(r,function(o){return s.size===t&&s.clear(),o}),s=a.cache;return a}return X2=n,X2}var J2,QL;function nbe(){if(QL)return J2;QL=1;var e=tbe(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(t,function(o,l,c,u){s.push(c?u.replace(n,"$1"):l||o)}),s});return J2=r,J2}var Z2,XL;function dM(){if(XL)return Z2;XL=1;function e(t,n){for(var r=-1,a=t==null?0:t.length,s=Array(a);++r<a;)s[r]=n(t[r],r,t);return s}return Z2=e,Z2}var eT,JL;function rbe(){if(JL)return eT;JL=1;var e=Yb(),t=dM(),n=is(),r=Wg(),a=e?e.prototype:void 0,s=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return eT=o,eT}var tT,ZL;function F7(){if(ZL)return tT;ZL=1;var e=rbe();function t(n){return n==null?"":e(n)}return tT=t,tT}var nT,e6;function $7(){if(e6)return nT;e6=1;var e=is(),t=sM(),n=nbe(),r=F7();function a(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return nT=a,nT}var rT,t6;function DN(){if(t6)return rT;t6=1;var e=Wg();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return rT=t,rT}var iT,n6;function hM(){if(n6)return iT;n6=1;var e=$7(),t=DN();function n(r,a){a=e(a,r);for(var s=0,o=a.length;r!=null&&s<o;)r=r[t(a[s++])];return s&&s==o?r:void 0}return iT=n,iT}var aT,r6;function B7(){if(r6)return aT;r6=1;var e=hM();function t(n,r,a){var s=n==null?void 0:e(n,r);return s===void 0?a:s}return aT=t,aT}var ibe=B7();const Cs=Bn(ibe);var sT,i6;function abe(){if(i6)return sT;i6=1;function e(t){return t==null}return sT=e,sT}var sbe=abe();const cn=Bn(sbe);var oT,a6;function obe(){if(a6)return oT;a6=1;var e=qc(),t=is(),n=Uc(),r="[object String]";function a(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return oT=a,oT}var lbe=obe();const Tf=Bn(lbe);var cbe=oM();const tn=Bn(cbe);var ube=jd();const Kg=Bn(ube);var lT={exports:{}},nr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s6;function dbe(){if(s6)return nr;s6=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function b(w){if(typeof w=="object"&&w!==null){var _=w.$$typeof;switch(_){case e:switch(w=w.type,w){case n:case a:case r:case u:case f:return w;default:switch(w=w&&w.$$typeof,w){case l:case o:case c:case y:case p:case s:return w;default:return _}}case t:return _}}}return nr.ContextConsumer=o,nr.ContextProvider=s,nr.Element=e,nr.ForwardRef=c,nr.Fragment=n,nr.Lazy=y,nr.Memo=p,nr.Portal=t,nr.Profiler=a,nr.StrictMode=r,nr.Suspense=u,nr.SuspenseList=f,nr.isAsyncMode=function(){return!1},nr.isConcurrentMode=function(){return!1},nr.isContextConsumer=function(w){return b(w)===o},nr.isContextProvider=function(w){return b(w)===s},nr.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},nr.isForwardRef=function(w){return b(w)===c},nr.isFragment=function(w){return b(w)===n},nr.isLazy=function(w){return b(w)===y},nr.isMemo=function(w){return b(w)===p},nr.isPortal=function(w){return b(w)===t},nr.isProfiler=function(w){return b(w)===a},nr.isStrictMode=function(w){return b(w)===r},nr.isSuspense=function(w){return b(w)===u},nr.isSuspenseList=function(w){return b(w)===f},nr.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===a||w===r||w===u||w===f||w===v||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===p||w.$$typeof===s||w.$$typeof===o||w.$$typeof===c||w.$$typeof===x||w.getModuleId!==void 0)},nr.typeOf=b,nr}var o6;function hbe(){return o6||(o6=1,lT.exports=dbe()),lT.exports}var fbe=hbe(),cT,l6;function z7(){if(l6)return cT;l6=1;var e=qc(),t=Uc(),n="[object Number]";function r(a){return typeof a=="number"||t(a)&&e(a)==n}return cT=r,cT}var uT,c6;function pbe(){if(c6)return uT;c6=1;var e=z7();function t(n){return e(n)&&n!=+n}return uT=t,uT}var mbe=pbe();const Yg=Bn(mbe);var gbe=z7();const ybe=Bn(gbe);var Ta=function(t){return t===0?0:t>0?1:-1},Xh=function(t){return Tf(t)&&t.indexOf("%")===t.length-1},yt=function(t){return ybe(t)&&!Yg(t)},vbe=function(t){return cn(t)},bi=function(t){return yt(t)||Tf(t)},xbe=0,Lf=function(t){var n=++xbe;return"".concat(t||"").concat(n)},Ea=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!yt(t)&&!Tf(t))return r;var s;if(Xh(t)){var o=t.indexOf("%");s=n*parseFloat(t.slice(0,o))/100}else s=+t;return Yg(s)&&(s=r),a&&s>n&&(s=n),s},Qu=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},bbe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},xi=function(t,n){return yt(t)&&yt(n)?function(r){return t+r*(n-t)}:function(){return n}};function Yw(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Cs(r,t))===n})}var jbe=function(t,n){return yt(t)&&yt(n)?t-n:Tf(t)&&Tf(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function qm(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function OP(e){"@babel/helpers - typeof";return OP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OP(e)}var wbe=["viewBox","children"],Sbe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],u6=["points","pathLength"],dT={svg:wbe,polygon:u6,polyline:u6},fM=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Qw=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(j.isValidElement(t)&&(r=t.props),!Kg(r))return null;var a={};return Object.keys(r).forEach(function(s){fM.includes(s)&&(a[s]=n||function(o){return r[s](r,o)})}),a},Nbe=function(t,n,r){return function(a){return t(n,r,a),null}},Ef=function(t,n,r){if(!Kg(t)||OP(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(s){var o=t[s];fM.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=Nbe(o,n,r))}),a},_be=["children"],Cbe=["children"];function d6(e,t){if(e==null)return{};var n=Tbe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Tbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function DP(e){"@babel/helpers - typeof";return DP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DP(e)}var h6={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Cc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},f6=null,hT=null,pM=function e(t){if(t===f6&&Array.isArray(hT))return hT;var n=[];return j.Children.forEach(t,function(r){cn(r)||(fbe.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),hT=n,f6=t,n};function Ts(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return Cc(a)}):r=[Cc(t)],pM(e).forEach(function(a){var s=Cs(a,"type.displayName")||Cs(a,"type.name");r.indexOf(s)!==-1&&n.push(a)}),n}function xs(e,t){var n=Ts(e,t);return n&&n[0]}var p6=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!yt(r)||r<=0||!yt(a)||a<=0)},Ebe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Abe=function(t){return t&&t.type&&Tf(t.type)&&Ebe.indexOf(t.type)>=0},q7=function(t){return t&&DP(t)==="object"&&"clipDot"in t},kbe=function(t,n,r,a){var s,o=(s=dT==null?void 0:dT[a])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!tn(t)&&(a&&o.includes(n)||Sbe.includes(n))||r&&fM.includes(n)},Ft=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(j.isValidElement(t)&&(a=t.props),!Kg(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;kbe((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(s[o]=a[o])}),s},MP=function e(t,n){if(t===n)return!0;var r=j.Children.count(t);if(r!==j.Children.count(n))return!1;if(r===0)return!0;if(r===1)return m6(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var s=t[a],o=n[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!m6(s,o))return!1}return!0},m6=function(t,n){if(cn(t)&&cn(n))return!0;if(!cn(t)&&!cn(n)){var r=t.props||{},a=r.children,s=d6(r,_be),o=n.props||{},l=o.children,c=d6(o,Cbe);return a&&l?qm(s,c)&&MP(a,l):!a&&!l?qm(s,c):!1}return!1},g6=function(t,n){var r=[],a={};return pM(t).forEach(function(s,o){if(Abe(s))r.push(s);else if(s){var l=Cc(s.type),c=n[l]||{},u=c.handler,f=c.once;if(u&&(!f||!a[l])){var p=u(s,l,o);r.push(p),a[l]=!0}}}),r},Pbe=function(t){var n=t&&t.type;return n&&h6[n]?h6[n]:null},Obe=function(t,n){return pM(n).indexOf(t)},Dbe=["children","width","height","viewBox","className","style","title","desc"];function IP(){return IP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IP.apply(this,arguments)}function Mbe(e,t){if(e==null)return{};var n=Ibe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ibe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function RP(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=Mbe(e,Dbe),f=a||{width:n,height:r,x:0,y:0},p=fn("recharts-surface",s);return ye.createElement("svg",IP({},Ft(u,!0,"svg"),{className:p,width:n,height:r,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),ye.createElement("title",null,l),ye.createElement("desc",null,c),t)}var Rbe=["children","className"];function LP(){return LP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LP.apply(this,arguments)}function Lbe(e,t){if(e==null)return{};var n=Fbe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var On=ye.forwardRef(function(e,t){var n=e.children,r=e.className,a=Lbe(e,Rbe),s=fn("recharts-layer",r);return ye.createElement("g",LP({className:s},Ft(a,!0),{ref:t}),n)}),Oo=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s]},fT,y6;function $be(){if(y6)return fT;y6=1;function e(t,n,r){var a=-1,s=t.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var o=Array(s);++a<s;)o[a]=t[a+n];return o}return fT=e,fT}var pT,v6;function Bbe(){if(v6)return pT;v6=1;var e=$be();function t(n,r,a){var s=n.length;return a=a===void 0?s:a,!r&&a>=s?n:e(n,r,a)}return pT=t,pT}var mT,x6;function U7(){if(x6)return mT;x6=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+a+s+"]");function c(u){return l.test(u)}return mT=c,mT}var gT,b6;function zbe(){if(b6)return gT;b6=1;function e(t){return t.split("")}return gT=e,gT}var yT,j6;function qbe(){if(j6)return yT;j6=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",a=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",f="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",x=u+"?",b="["+s+"]?",w="(?:"+v+"(?:"+[f,p,y].join("|")+")"+b+x+")*",_=b+x+w,T="(?:"+[f+l+"?",l,p,y,o].join("|")+")",C=RegExp(c+"(?="+c+")|"+T+_,"g");function O(E){return E.match(C)||[]}return yT=O,yT}var vT,w6;function Ube(){if(w6)return vT;w6=1;var e=zbe(),t=U7(),n=qbe();function r(a){return t(a)?n(a):e(a)}return vT=r,vT}var xT,S6;function Vbe(){if(S6)return xT;S6=1;var e=Bbe(),t=U7(),n=Ube(),r=F7();function a(s){return function(o){o=r(o);var l=t(o)?n(o):void 0,c=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return c[s]()+u}}return xT=a,xT}var bT,N6;function Hbe(){if(N6)return bT;N6=1;var e=Vbe(),t=e("toUpperCase");return bT=t,bT}var Gbe=Hbe();const MN=Bn(Gbe);function Er(e){return function(){return e}}const V7=Math.cos,Xw=Math.sin,Fo=Math.sqrt,Jw=Math.PI,IN=2*Jw,FP=Math.PI,$P=2*FP,Uh=1e-6,Wbe=$P-Uh;function H7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Kbe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return H7;const n=10**t;return function(r){this._+=r[0];for(let a=1,s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class Ybe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?H7:Kbe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,s,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,a,s){if(t=+t,n=+n,r=+r,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,f=o-t,p=l-n,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>Uh)if(!(Math.abs(p*c-u*f)>Uh)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let v=r-o,x=a-l,b=c*c+u*u,w=v*v+x*x,_=Math.sqrt(b),T=Math.sqrt(y),C=s*Math.tan((FP-Math.acos((b+y-w)/(2*_*T)))/2),O=C/T,E=C/_;Math.abs(O-1)>Uh&&this._append`L${t+O*f},${n+O*p}`,this._append`A${s},${s},0,0,${+(p*v>f*x)},${this._x1=t+E*c},${this._y1=n+E*u}`}}arc(t,n,r,a,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,f=n+c,p=1^o,y=o?a-s:s-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Uh||Math.abs(this._y1-f)>Uh)&&this._append`L${u},${f}`,r&&(y<0&&(y=y%$P+$P),y>Wbe?this._append`A${r},${r},0,1,${p},${t-l},${n-c}A${r},${r},0,1,${p},${this._x1=u},${this._y1=f}`:y>Uh&&this._append`A${r},${r},0,${+(y>=FP)},${p},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function mM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Ybe(t)}function gM(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function G7(e){this._context=e}G7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function RN(e){return new G7(e)}function W7(e){return e[0]}function K7(e){return e[1]}function Y7(e,t){var n=Er(!0),r=null,a=RN,s=null,o=mM(l);e=typeof e=="function"?e:e===void 0?W7:Er(e),t=typeof t=="function"?t:t===void 0?K7:Er(t);function l(c){var u,f=(c=gM(c)).length,p,y=!1,v;for(r==null&&(s=a(v=o())),u=0;u<=f;++u)!(u<f&&n(p=c[u],u,c))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(p,u,c),+t(p,u,c));if(v)return s=null,v+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Er(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Er(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Er(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(s=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=s=null:s=a(r=c),l):r},l}function Uj(e,t,n){var r=null,a=Er(!0),s=null,o=RN,l=null,c=mM(u);e=typeof e=="function"?e:e===void 0?W7:Er(+e),t=typeof t=="function"?t:Er(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?K7:Er(+n);function u(p){var y,v,x,b=(p=gM(p)).length,w,_=!1,T,C=new Array(b),O=new Array(b);for(s==null&&(l=o(T=c())),y=0;y<=b;++y){if(!(y<b&&a(w=p[y],y,p))===_)if(_=!_)v=y,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=y-1;x>=v;--x)l.point(C[x],O[x]);l.lineEnd(),l.areaEnd()}_&&(C[y]=+e(w,y,p),O[y]=+t(w,y,p),l.point(r?+r(w,y,p):C[y],n?+n(w,y,p):O[y]))}if(T)return l=null,T+""||null}function f(){return Y7().defined(a).curve(o).context(s)}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:Er(+p),r=null,u):e},u.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Er(+p),u):e},u.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Er(+p),u):r},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:Er(+p),n=null,u):t},u.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Er(+p),u):t},u.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Er(+p),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(p){return arguments.length?(a=typeof p=="function"?p:Er(!!p),u):a},u.curve=function(p){return arguments.length?(o=p,s!=null&&(l=o(s)),u):o},u.context=function(p){return arguments.length?(p==null?s=l=null:l=o(s=p),u):s},u}class Q7{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Qbe(e){return new Q7(e,!0)}function Xbe(e){return new Q7(e,!1)}const yM={draw(e,t){const n=Fo(t/Jw);e.moveTo(n,0),e.arc(0,0,n,0,IN)}},Jbe={draw(e,t){const n=Fo(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},X7=Fo(1/3),Zbe=X7*2,e0e={draw(e,t){const n=Fo(t/Zbe),r=n*X7;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},t0e={draw(e,t){const n=Fo(t),r=-n/2;e.rect(r,r,n,n)}},n0e=.8908130915292852,J7=Xw(Jw/10)/Xw(7*Jw/10),r0e=Xw(IN/10)*J7,i0e=-V7(IN/10)*J7,a0e={draw(e,t){const n=Fo(t*n0e),r=r0e*n,a=i0e*n;e.moveTo(0,-n),e.lineTo(r,a);for(let s=1;s<5;++s){const o=IN*s/5,l=V7(o),c=Xw(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},jT=Fo(3),s0e={draw(e,t){const n=-Fo(t/(jT*3));e.moveTo(0,n*2),e.lineTo(-jT*n,-n),e.lineTo(jT*n,-n),e.closePath()}},qs=-.5,Us=Fo(3)/2,BP=1/Fo(12),o0e=(BP/2+1)*3,l0e={draw(e,t){const n=Fo(t/o0e),r=n/2,a=n*BP,s=r,o=n*BP+n,l=-s,c=o;e.moveTo(r,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(qs*r-Us*a,Us*r+qs*a),e.lineTo(qs*s-Us*o,Us*s+qs*o),e.lineTo(qs*l-Us*c,Us*l+qs*c),e.lineTo(qs*r+Us*a,qs*a-Us*r),e.lineTo(qs*s+Us*o,qs*o-Us*s),e.lineTo(qs*l+Us*c,qs*c-Us*l),e.closePath()}};function c0e(e,t){let n=null,r=mM(a);e=typeof e=="function"?e:Er(e||yM),t=typeof t=="function"?t:Er(t===void 0?64:+t);function a(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Er(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Er(+s),a):t},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function Zw(){}function eS(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Z7(e){this._context=e}Z7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:eS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:eS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function u0e(e){return new Z7(e)}function eV(e){this._context=e}eV.prototype={areaStart:Zw,areaEnd:Zw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:eS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function d0e(e){return new eV(e)}function tV(e){this._context=e}tV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:eS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function h0e(e){return new tV(e)}function nV(e){this._context=e}nV.prototype={areaStart:Zw,areaEnd:Zw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function f0e(e){return new nV(e)}function _6(e){return e<0?-1:1}function C6(e,t,n){var r=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(s*a+o*r)/(r+a);return(_6(s)+_6(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function T6(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function wT(e,t,n){var r=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-r)/3;e._context.bezierCurveTo(r+l,a+l*t,s-l,o-l*n,s,o)}function tS(e){this._context=e}tS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wT(this,this._t0,T6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wT(this,T6(this,n=C6(this,e,t)),n);break;default:wT(this,this._t0,n=C6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function rV(e){this._context=new iV(e)}(rV.prototype=Object.create(tS.prototype)).point=function(e,t){tS.prototype.point.call(this,t,e)};function iV(e){this._context=e}iV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,s){this._context.bezierCurveTo(t,e,r,n,s,a)}};function p0e(e){return new tS(e)}function m0e(e){return new rV(e)}function aV(e){this._context=e}aV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=E6(e),a=E6(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],a[0][s],r[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function E6(e){var t,n=e.length-1,r,a=new Array(n),s=new Array(n),o=new Array(n);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function g0e(e){return new aV(e)}function LN(e,t){this._context=e,this._t=t}LN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function y0e(e){return new LN(e,.5)}function v0e(e){return new LN(e,0)}function x0e(e){return new LN(e,1)}function dg(e,t){if((o=e.length)>1)for(var n=1,r,a,s=e[t[0]],o,l=s.length;n<o;++n)for(a=s,s=e[t[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function zP(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function b0e(e,t){return e[t]}function j0e(e){const t=[];return t.key=e,t}function w0e(){var e=Er([]),t=zP,n=dg,r=b0e;function a(s){var o=Array.from(e.apply(this,arguments),j0e),l,c=o.length,u=-1,f;for(const p of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(p,o[l].key,u,s)]).data=p;for(l=0,f=gM(t(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Er(Array.from(s)),a):e},a.value=function(s){return arguments.length?(r=typeof s=="function"?s:Er(+s),a):r},a.order=function(s){return arguments.length?(t=s==null?zP:typeof s=="function"?s:Er(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(n=s??dg,a):n},a}function S0e(e,t){if((r=e.length)>0){for(var n,r,a=0,s=e[0].length,o;a<s;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}dg(e,t)}}function N0e(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,s=r.length;n<s;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}dg(e,t)}}function _0e(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,s,o;r<s;++r){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],p=f[r][1]||0,y=f[r-1][1]||0,v=(p-y)/2,x=0;x<l;++x){var b=e[t[x]],w=b[r][1]||0,_=b[r-1][1]||0;v+=w-_}c+=p,u+=v*p}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,dg(e,t)}}function Gx(e){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gx(e)}var C0e=["type","size","sizeType"];function qP(){return qP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qP.apply(this,arguments)}function A6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function k6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(n),!0).forEach(function(r){T0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T0e(e,t,n){return t=E0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E0e(e){var t=A0e(e,"string");return Gx(t)=="symbol"?t:t+""}function A0e(e,t){if(Gx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Gx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k0e(e,t){if(e==null)return{};var n=P0e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function P0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var sV={symbolCircle:yM,symbolCross:Jbe,symbolDiamond:e0e,symbolSquare:t0e,symbolStar:a0e,symbolTriangle:s0e,symbolWye:l0e},O0e=Math.PI/180,D0e=function(t){var n="symbol".concat(MN(t));return sV[n]||yM},M0e=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*O0e;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},I0e=function(t,n){sV["symbol".concat(MN(t))]=n},vM=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,s=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=k0e(t,C0e),u=k6(k6({},c),{},{type:r,size:s,sizeType:l}),f=function(){var w=D0e(r),_=c0e().type(w).size(M0e(s,l,r));return _()},p=u.className,y=u.cx,v=u.cy,x=Ft(u,!0);return y===+y&&v===+v&&s===+s?ye.createElement("path",qP({},x,{className:fn("recharts-symbols",p),transform:"translate(".concat(y,", ").concat(v,")"),d:f()})):null};vM.registerSymbol=I0e;function hg(e){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}function UP(){return UP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UP.apply(this,arguments)}function P6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function R0e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P6(Object(n),!0).forEach(function(r){Wx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lV(r.key),r)}}function $0e(e,t,n){return t&&F0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function B0e(e,t,n){return t=nS(t),z0e(e,oV()?Reflect.construct(t,n||[],nS(e).constructor):t.apply(e,n))}function z0e(e,t){if(t&&(hg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q0e(e)}function q0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oV=function(){return!!e})()}function nS(e){return nS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nS(e)}function U0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VP(e,t)}function VP(e,t){return VP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},VP(e,t)}function Wx(e,t,n){return t=lV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lV(e){var t=V0e(e,"string");return hg(t)=="symbol"?t:t+""}function V0e(e,t){if(hg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(hg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var So=32,xM=function(e){function t(){return L0e(this,t),B0e(this,t,arguments)}return U0e(t,e),$0e(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,s=So/2,o=So/6,l=So/3,c=r.inactive?a:r.color;if(r.type==="plainline")return ye.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:So,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return ye.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(So,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return ye.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(So/8,"h").concat(So,"v").concat(So*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(ye.isValidElement(r.legendIcon)){var u=R0e({},r);return delete u.legendIcon,ye.cloneElement(r.legendIcon,u)}return ye.createElement(vM,{fill:c,cx:s,cy:s,size:So,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:So,height:So},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(v,x){var b=v.formatter||c,w=fn(Wx(Wx({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",v.inactive));if(v.type==="none")return null;var _=tn(v.value)?null:v.value;Oo(!tn(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=v.inactive?u:v.color;return ye.createElement("li",UP({className:w,style:p,key:"legend-item-".concat(x)},Ef(r.props,v,x)),ye.createElement(RP,{width:o,height:o,viewBox:f,style:y},r.renderIcon(v)),ye.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},b?b(_,v,x):_))})}},{key:"render",value:function(){var r=this.props,a=r.payload,s=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return ye.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(j.PureComponent);Wx(xM,"displayName","Legend");Wx(xM,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var ST,O6;function H0e(){if(O6)return ST;O6=1;var e=PN();function t(){this.__data__=new e,this.size=0}return ST=t,ST}var NT,D6;function G0e(){if(D6)return NT;D6=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return NT=e,NT}var _T,M6;function W0e(){if(M6)return _T;M6=1;function e(t){return this.__data__.get(t)}return _T=e,_T}var CT,I6;function K0e(){if(I6)return CT;I6=1;function e(t){return this.__data__.has(t)}return CT=e,CT}var TT,R6;function Y0e(){if(R6)return TT;R6=1;var e=PN(),t=cM(),n=uM(),r=200;function a(s,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<r-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return TT=a,TT}var ET,L6;function cV(){if(L6)return ET;L6=1;var e=PN(),t=H0e(),n=G0e(),r=W0e(),a=K0e(),s=Y0e();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=a,o.prototype.set=s,ET=o,ET}var AT,F6;function Q0e(){if(F6)return AT;F6=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return AT=t,AT}var kT,$6;function X0e(){if($6)return kT;$6=1;function e(t){return this.__data__.has(t)}return kT=e,kT}var PT,B6;function uV(){if(B6)return PT;B6=1;var e=uM(),t=Q0e(),n=X0e();function r(a){var s=-1,o=a==null?0:a.length;for(this.__data__=new e;++s<o;)this.add(a[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,PT=r,PT}var OT,z6;function dV(){if(z6)return OT;z6=1;function e(t,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(n(t[r],r,t))return!0;return!1}return OT=e,OT}var DT,q6;function hV(){if(q6)return DT;q6=1;function e(t,n){return t.has(n)}return DT=e,DT}var MT,U6;function fV(){if(U6)return MT;U6=1;var e=uV(),t=dV(),n=hV(),r=1,a=2;function s(o,l,c,u,f,p){var y=c&r,v=o.length,x=l.length;if(v!=x&&!(y&&x>v))return!1;var b=p.get(o),w=p.get(l);if(b&&w)return b==l&&w==o;var _=-1,T=!0,C=c&a?new e:void 0;for(p.set(o,l),p.set(l,o);++_<v;){var O=o[_],E=l[_];if(u)var P=y?u(E,O,_,l,o,p):u(O,E,_,o,l,p);if(P!==void 0){if(P)continue;T=!1;break}if(C){if(!t(l,function(I,F){if(!n(C,F)&&(O===I||f(O,I,c,u,p)))return C.push(F)})){T=!1;break}}else if(!(O===E||f(O,E,c,u,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return MT=s,MT}var IT,V6;function J0e(){if(V6)return IT;V6=1;var e=Il(),t=e.Uint8Array;return IT=t,IT}var RT,H6;function Z0e(){if(H6)return RT;H6=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(a,s){r[++n]=[s,a]}),r}return RT=e,RT}var LT,G6;function bM(){if(G6)return LT;G6=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(a){r[++n]=a}),r}return LT=e,LT}var FT,W6;function e1e(){if(W6)return FT;W6=1;var e=Yb(),t=J0e(),n=lM(),r=fV(),a=Z0e(),s=bM(),o=1,l=2,c="[object Boolean]",u="[object Date]",f="[object Error]",p="[object Map]",y="[object Number]",v="[object RegExp]",x="[object Set]",b="[object String]",w="[object Symbol]",_="[object ArrayBuffer]",T="[object DataView]",C=e?e.prototype:void 0,O=C?C.valueOf:void 0;function E(P,I,F,$,z,L,H){switch(F){case T:if(P.byteLength!=I.byteLength||P.byteOffset!=I.byteOffset)return!1;P=P.buffer,I=I.buffer;case _:return!(P.byteLength!=I.byteLength||!L(new t(P),new t(I)));case c:case u:case y:return n(+P,+I);case f:return P.name==I.name&&P.message==I.message;case v:case b:return P==I+"";case p:var V=a;case x:var ne=$&o;if(V||(V=s),P.size!=I.size&&!ne)return!1;var Z=H.get(P);if(Z)return Z==I;$|=l,H.set(P,I);var q=r(V(P),V(I),$,z,L,H);return H.delete(P),q;case w:if(O)return O.call(P)==O.call(I)}return!1}return FT=E,FT}var $T,K6;function pV(){if(K6)return $T;K6=1;function e(t,n){for(var r=-1,a=n.length,s=t.length;++r<a;)t[s+r]=n[r];return t}return $T=e,$T}var BT,Y6;function t1e(){if(Y6)return BT;Y6=1;var e=pV(),t=is();function n(r,a,s){var o=a(r);return t(r)?o:e(o,s(r))}return BT=n,BT}var zT,Q6;function n1e(){if(Q6)return zT;Q6=1;function e(t,n){for(var r=-1,a=t==null?0:t.length,s=0,o=[];++r<a;){var l=t[r];n(l,r,t)&&(o[s++]=l)}return o}return zT=e,zT}var qT,X6;function r1e(){if(X6)return qT;X6=1;function e(){return[]}return qT=e,qT}var UT,J6;function i1e(){if(J6)return UT;J6=1;var e=n1e(),t=r1e(),n=Object.prototype,r=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(o){return o==null?[]:(o=Object(o),e(a(o),function(l){return r.call(o,l)}))}:t;return UT=s,UT}var VT,Z6;function a1e(){if(Z6)return VT;Z6=1;function e(t,n){for(var r=-1,a=Array(t);++r<t;)a[r]=n(r);return a}return VT=e,VT}var HT,eF;function s1e(){if(eF)return HT;eF=1;var e=qc(),t=Uc(),n="[object Arguments]";function r(a){return t(a)&&e(a)==n}return HT=r,HT}var GT,tF;function jM(){if(tF)return GT;tF=1;var e=s1e(),t=Uc(),n=Object.prototype,r=n.hasOwnProperty,a=n.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(o){return t(o)&&r.call(o,"callee")&&!a.call(o,"callee")};return GT=s,GT}var wx={exports:{}},WT,nF;function o1e(){if(nF)return WT;nF=1;function e(){return!1}return WT=e,WT}wx.exports;var rF;function mV(){return rF||(rF=1,function(e,t){var n=Il(),r=o1e(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u}(wx,wx.exports)),wx.exports}var KT,iF;function wM(){if(iF)return KT;iF=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,a){var s=typeof r;return a=a??e,!!a&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<a}return KT=n,KT}var YT,aF;function SM(){if(aF)return YT;aF=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return YT=t,YT}var QT,sF;function l1e(){if(sF)return QT;sF=1;var e=qc(),t=SM(),n=Uc(),r="[object Arguments]",a="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",f="[object Number]",p="[object Object]",y="[object RegExp]",v="[object Set]",x="[object String]",b="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",T="[object Float32Array]",C="[object Float64Array]",O="[object Int8Array]",E="[object Int16Array]",P="[object Int32Array]",I="[object Uint8Array]",F="[object Uint8ClampedArray]",$="[object Uint16Array]",z="[object Uint32Array]",L={};L[T]=L[C]=L[O]=L[E]=L[P]=L[I]=L[F]=L[$]=L[z]=!0,L[r]=L[a]=L[w]=L[s]=L[_]=L[o]=L[l]=L[c]=L[u]=L[f]=L[p]=L[y]=L[v]=L[x]=L[b]=!1;function H(V){return n(V)&&t(V.length)&&!!L[e(V)]}return QT=H,QT}var XT,oF;function gV(){if(oF)return XT;oF=1;function e(t){return function(n){return t(n)}}return XT=e,XT}var Sx={exports:{}};Sx.exports;var lF;function c1e(){return lF||(lF=1,function(e,t){var n=I7(),r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===r,o=s&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l}(Sx,Sx.exports)),Sx.exports}var JT,cF;function yV(){if(cF)return JT;cF=1;var e=l1e(),t=gV(),n=c1e(),r=n&&n.isTypedArray,a=r?t(r):e;return JT=a,JT}var ZT,uF;function u1e(){if(uF)return ZT;uF=1;var e=a1e(),t=jM(),n=is(),r=mV(),a=wM(),s=yV(),o=Object.prototype,l=o.hasOwnProperty;function c(u,f){var p=n(u),y=!p&&t(u),v=!p&&!y&&r(u),x=!p&&!y&&!v&&s(u),b=p||y||v||x,w=b?e(u.length,String):[],_=w.length;for(var T in u)(f||l.call(u,T))&&!(b&&(T=="length"||v&&(T=="offset"||T=="parent")||x&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||a(T,_)))&&w.push(T);return w}return ZT=c,ZT}var eE,dF;function d1e(){if(dF)return eE;dF=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,a=typeof r=="function"&&r.prototype||e;return n===a}return eE=t,eE}var tE,hF;function vV(){if(hF)return tE;hF=1;function e(t,n){return function(r){return t(n(r))}}return tE=e,tE}var nE,fF;function h1e(){if(fF)return nE;fF=1;var e=vV(),t=e(Object.keys,Object);return nE=t,nE}var rE,pF;function f1e(){if(pF)return rE;pF=1;var e=d1e(),t=h1e(),n=Object.prototype,r=n.hasOwnProperty;function a(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return rE=a,rE}var iE,mF;function Qb(){if(mF)return iE;mF=1;var e=oM(),t=SM();function n(r){return r!=null&&t(r.length)&&!e(r)}return iE=n,iE}var aE,gF;function FN(){if(gF)return aE;gF=1;var e=u1e(),t=f1e(),n=Qb();function r(a){return n(a)?e(a):t(a)}return aE=r,aE}var sE,yF;function p1e(){if(yF)return sE;yF=1;var e=t1e(),t=i1e(),n=FN();function r(a){return e(a,n,t)}return sE=r,sE}var oE,vF;function m1e(){if(vF)return oE;vF=1;var e=p1e(),t=1,n=Object.prototype,r=n.hasOwnProperty;function a(s,o,l,c,u,f){var p=l&t,y=e(s),v=y.length,x=e(o),b=x.length;if(v!=b&&!p)return!1;for(var w=v;w--;){var _=y[w];if(!(p?_ in o:r.call(o,_)))return!1}var T=f.get(s),C=f.get(o);if(T&&C)return T==o&&C==s;var O=!0;f.set(s,o),f.set(o,s);for(var E=p;++w<v;){_=y[w];var P=s[_],I=o[_];if(c)var F=p?c(I,P,_,o,s,f):c(P,I,_,s,o,f);if(!(F===void 0?P===I||u(P,I,l,c,f):F)){O=!1;break}E||(E=_=="constructor")}if(O&&!E){var $=s.constructor,z=o.constructor;$!=z&&"constructor"in s&&"constructor"in o&&!(typeof $=="function"&&$ instanceof $&&typeof z=="function"&&z instanceof z)&&(O=!1)}return f.delete(s),f.delete(o),O}return oE=a,oE}var lE,xF;function g1e(){if(xF)return lE;xF=1;var e=Rf(),t=Il(),n=e(t,"DataView");return lE=n,lE}var cE,bF;function y1e(){if(bF)return cE;bF=1;var e=Rf(),t=Il(),n=e(t,"Promise");return cE=n,cE}var uE,jF;function xV(){if(jF)return uE;jF=1;var e=Rf(),t=Il(),n=e(t,"Set");return uE=n,uE}var dE,wF;function v1e(){if(wF)return dE;wF=1;var e=Rf(),t=Il(),n=e(t,"WeakMap");return dE=n,dE}var hE,SF;function x1e(){if(SF)return hE;SF=1;var e=g1e(),t=cM(),n=y1e(),r=xV(),a=v1e(),s=qc(),o=R7(),l="[object Map]",c="[object Object]",u="[object Promise]",f="[object Set]",p="[object WeakMap]",y="[object DataView]",v=o(e),x=o(t),b=o(n),w=o(r),_=o(a),T=s;return(e&&T(new e(new ArrayBuffer(1)))!=y||t&&T(new t)!=l||n&&T(n.resolve())!=u||r&&T(new r)!=f||a&&T(new a)!=p)&&(T=function(C){var O=s(C),E=O==c?C.constructor:void 0,P=E?o(E):"";if(P)switch(P){case v:return y;case x:return l;case b:return u;case w:return f;case _:return p}return O}),hE=T,hE}var fE,NF;function b1e(){if(NF)return fE;NF=1;var e=cV(),t=fV(),n=e1e(),r=m1e(),a=x1e(),s=is(),o=mV(),l=yV(),c=1,u="[object Arguments]",f="[object Array]",p="[object Object]",y=Object.prototype,v=y.hasOwnProperty;function x(b,w,_,T,C,O){var E=s(b),P=s(w),I=E?f:a(b),F=P?f:a(w);I=I==u?p:I,F=F==u?p:F;var $=I==p,z=F==p,L=I==F;if(L&&o(b)){if(!o(w))return!1;E=!0,$=!1}if(L&&!$)return O||(O=new e),E||l(b)?t(b,w,_,T,C,O):n(b,w,I,_,T,C,O);if(!(_&c)){var H=$&&v.call(b,"__wrapped__"),V=z&&v.call(w,"__wrapped__");if(H||V){var ne=H?b.value():b,Z=V?w.value():w;return O||(O=new e),C(ne,Z,_,T,O)}}return L?(O||(O=new e),r(b,w,_,T,C,O)):!1}return fE=x,fE}var pE,_F;function NM(){if(_F)return pE;_F=1;var e=b1e(),t=Uc();function n(r,a,s,o,l){return r===a?!0:r==null||a==null||!t(r)&&!t(a)?r!==r&&a!==a:e(r,a,s,o,n,l)}return pE=n,pE}var mE,CF;function j1e(){if(CF)return mE;CF=1;var e=cV(),t=NM(),n=1,r=2;function a(s,o,l,c){var u=l.length,f=u,p=!c;if(s==null)return!f;for(s=Object(s);u--;){var y=l[u];if(p&&y[2]?y[1]!==s[y[0]]:!(y[0]in s))return!1}for(;++u<f;){y=l[u];var v=y[0],x=s[v],b=y[1];if(p&&y[2]){if(x===void 0&&!(v in s))return!1}else{var w=new e;if(c)var _=c(x,b,v,s,o,w);if(!(_===void 0?t(b,x,n|r,c,w):_))return!1}}return!0}return mE=a,mE}var gE,TF;function bV(){if(TF)return gE;TF=1;var e=jd();function t(n){return n===n&&!e(n)}return gE=t,gE}var yE,EF;function w1e(){if(EF)return yE;EF=1;var e=bV(),t=FN();function n(r){for(var a=t(r),s=a.length;s--;){var o=a[s],l=r[o];a[s]=[o,l,e(l)]}return a}return yE=n,yE}var vE,AF;function jV(){if(AF)return vE;AF=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return vE=e,vE}var xE,kF;function S1e(){if(kF)return xE;kF=1;var e=j1e(),t=w1e(),n=jV();function r(a){var s=t(a);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===a||e(o,a,s)}}return xE=r,xE}var bE,PF;function N1e(){if(PF)return bE;PF=1;function e(t,n){return t!=null&&n in Object(t)}return bE=e,bE}var jE,OF;function _1e(){if(OF)return jE;OF=1;var e=$7(),t=jM(),n=is(),r=wM(),a=SM(),s=DN();function o(l,c,u){c=e(c,l);for(var f=-1,p=c.length,y=!1;++f<p;){var v=s(c[f]);if(!(y=l!=null&&u(l,v)))break;l=l[v]}return y||++f!=p?y:(p=l==null?0:l.length,!!p&&a(p)&&r(v,p)&&(n(l)||t(l)))}return jE=o,jE}var wE,DF;function C1e(){if(DF)return wE;DF=1;var e=N1e(),t=_1e();function n(r,a){return r!=null&&t(r,a,e)}return wE=n,wE}var SE,MF;function T1e(){if(MF)return SE;MF=1;var e=NM(),t=B7(),n=C1e(),r=sM(),a=bV(),s=jV(),o=DN(),l=1,c=2;function u(f,p){return r(f)&&a(p)?s(o(f),p):function(y){var v=t(y,f);return v===void 0&&v===p?n(y,f):e(p,v,l|c)}}return SE=u,SE}var NE,IF;function Qg(){if(IF)return NE;IF=1;function e(t){return t}return NE=e,NE}var _E,RF;function E1e(){if(RF)return _E;RF=1;function e(t){return function(n){return n==null?void 0:n[t]}}return _E=e,_E}var CE,LF;function A1e(){if(LF)return CE;LF=1;var e=hM();function t(n){return function(r){return e(r,n)}}return CE=t,CE}var TE,FF;function k1e(){if(FF)return TE;FF=1;var e=E1e(),t=A1e(),n=sM(),r=DN();function a(s){return n(s)?e(r(s)):t(s)}return TE=a,TE}var EE,$F;function Rl(){if($F)return EE;$F=1;var e=S1e(),t=T1e(),n=Qg(),r=is(),a=k1e();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):a(o)}return EE=s,EE}var AE,BF;function wV(){if(BF)return AE;BF=1;function e(t,n,r,a){for(var s=t.length,o=r+(a?1:-1);a?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return AE=e,AE}var kE,zF;function P1e(){if(zF)return kE;zF=1;function e(t){return t!==t}return kE=e,kE}var PE,qF;function O1e(){if(qF)return PE;qF=1;function e(t,n,r){for(var a=r-1,s=t.length;++a<s;)if(t[a]===n)return a;return-1}return PE=e,PE}var OE,UF;function D1e(){if(UF)return OE;UF=1;var e=wV(),t=P1e(),n=O1e();function r(a,s,o){return s===s?n(a,s,o):e(a,t,o)}return OE=r,OE}var DE,VF;function M1e(){if(VF)return DE;VF=1;var e=D1e();function t(n,r){var a=n==null?0:n.length;return!!a&&e(n,r,0)>-1}return DE=t,DE}var ME,HF;function I1e(){if(HF)return ME;HF=1;function e(t,n,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(n,t[a]))return!0;return!1}return ME=e,ME}var IE,GF;function R1e(){if(GF)return IE;GF=1;function e(){}return IE=e,IE}var RE,WF;function L1e(){if(WF)return RE;WF=1;var e=xV(),t=R1e(),n=bM(),r=1/0,a=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return RE=a,RE}var LE,KF;function F1e(){if(KF)return LE;KF=1;var e=uV(),t=M1e(),n=I1e(),r=hV(),a=L1e(),s=bM(),o=200;function l(c,u,f){var p=-1,y=t,v=c.length,x=!0,b=[],w=b;if(f)x=!1,y=n;else if(v>=o){var _=u?null:a(c);if(_)return s(_);x=!1,y=r,w=new e}else w=u?[]:b;e:for(;++p<v;){var T=c[p],C=u?u(T):T;if(T=f||T!==0?T:0,x&&C===C){for(var O=w.length;O--;)if(w[O]===C)continue e;u&&w.push(C),b.push(T)}else y(w,C,f)||(w!==b&&w.push(C),b.push(T))}return b}return LE=l,LE}var FE,YF;function $1e(){if(YF)return FE;YF=1;var e=Rl(),t=F1e();function n(r,a){return r&&r.length?t(r,e(a,2)):[]}return FE=n,FE}var B1e=$1e();const QF=Bn(B1e);function SV(e,t,n){return t===!0?QF(e,n):tn(t)?QF(e,t):e}function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}var z1e=["ref"];function XF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XF(Object(n),!0).forEach(function(r){$N(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_V(r.key),r)}}function U1e(e,t,n){return t&&JF(e.prototype,t),n&&JF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function V1e(e,t,n){return t=rS(t),H1e(e,NV()?Reflect.construct(t,n||[],rS(e).constructor):t.apply(e,n))}function H1e(e,t){if(t&&(fg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G1e(e)}function G1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NV=function(){return!!e})()}function rS(e){return rS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rS(e)}function W1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HP(e,t)}function HP(e,t){return HP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},HP(e,t)}function $N(e,t,n){return t=_V(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _V(e){var t=K1e(e,"string");return fg(t)=="symbol"?t:t+""}function K1e(e,t){if(fg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Y1e(e,t){if(e==null)return{};var n=Q1e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Q1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function X1e(e){return e.value}function J1e(e,t){if(ye.isValidElement(e))return ye.cloneElement(e,t);if(typeof e=="function")return ye.createElement(e,t);t.ref;var n=Y1e(t,z1e);return ye.createElement(xM,n)}var ZF=1,Tc=function(e){function t(){var n;q1e(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=V1e(this,t,[].concat(a)),$N(n,"lastBoundingBox",{width:-1,height:-1}),n}return W1e(t,e),U1e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>ZF||Math.abs(a.height-this.lastBoundingBox.height)>ZF)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?dc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,f=a.chartHeight,p,y;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var v=this.getBBoxSnapshot();p={left:((u||0)-v.width)/2}}else p=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();y={top:((f||0)-x.height)/2}}else y=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return dc(dc({},p),y)}},{key:"render",value:function(){var r=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,p=dc(dc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ye.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(v){r.wrapperNode=v}},J1e(s,dc(dc({},this.props),{},{payload:SV(f,u,X1e)})))}}],[{key:"getWithHeight",value:function(r,a){var s=dc(dc({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&yt(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(j.PureComponent);$N(Tc,"displayName","Legend");$N(Tc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var $E,e5;function Z1e(){if(e5)return $E;e5=1;var e=Yb(),t=jM(),n=is(),r=e?e.isConcatSpreadable:void 0;function a(s){return n(s)||t(s)||!!(r&&s&&s[r])}return $E=a,$E}var BE,t5;function CV(){if(t5)return BE;t5=1;var e=pV(),t=Z1e();function n(r,a,s,o,l){var c=-1,u=r.length;for(s||(s=t),l||(l=[]);++c<u;){var f=r[c];a>0&&s(f)?a>1?n(f,a-1,s,o,l):e(l,f):o||(l[l.length]=f)}return l}return BE=n,BE}var zE,n5;function eje(){if(n5)return zE;n5=1;function e(t){return function(n,r,a){for(var s=-1,o=Object(n),l=a(n),c=l.length;c--;){var u=l[t?c:++s];if(r(o[u],u,o)===!1)break}return n}}return zE=e,zE}var qE,r5;function tje(){if(r5)return qE;r5=1;var e=eje(),t=e();return qE=t,qE}var UE,i5;function TV(){if(i5)return UE;i5=1;var e=tje(),t=FN();function n(r,a){return r&&e(r,a,t)}return UE=n,UE}var VE,a5;function nje(){if(a5)return VE;a5=1;var e=Qb();function t(n,r){return function(a,s){if(a==null)return a;if(!e(a))return n(a,s);for(var o=a.length,l=r?o:-1,c=Object(a);(r?l--:++l<o)&&s(c[l],l,c)!==!1;);return a}}return VE=t,VE}var HE,s5;function _M(){if(s5)return HE;s5=1;var e=TV(),t=nje(),n=t(e);return HE=n,HE}var GE,o5;function EV(){if(o5)return GE;o5=1;var e=_M(),t=Qb();function n(r,a){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(l,c,u){o[++s]=a(l,c,u)}),o}return GE=n,GE}var WE,l5;function rje(){if(l5)return WE;l5=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return WE=e,WE}var KE,c5;function ije(){if(c5)return KE;c5=1;var e=Wg();function t(n,r){if(n!==r){var a=n!==void 0,s=n===null,o=n===n,l=e(n),c=r!==void 0,u=r===null,f=r===r,p=e(r);if(!u&&!p&&!l&&n>r||l&&c&&f&&!u&&!p||s&&c&&f||!a&&f||!o)return 1;if(!s&&!l&&!p&&n<r||p&&a&&o&&!s&&!l||u&&a&&o||!c&&o||!f)return-1}return 0}return KE=t,KE}var YE,u5;function aje(){if(u5)return YE;u5=1;var e=ije();function t(n,r,a){for(var s=-1,o=n.criteria,l=r.criteria,c=o.length,u=a.length;++s<c;){var f=e(o[s],l[s]);if(f){if(s>=u)return f;var p=a[s];return f*(p=="desc"?-1:1)}}return n.index-r.index}return YE=t,YE}var QE,d5;function sje(){if(d5)return QE;d5=1;var e=dM(),t=hM(),n=Rl(),r=EV(),a=rje(),s=gV(),o=aje(),l=Qg(),c=is();function u(f,p,y){p.length?p=e(p,function(b){return c(b)?function(w){return t(w,b.length===1?b[0]:b)}:b}):p=[l];var v=-1;p=e(p,s(n));var x=r(f,function(b,w,_){var T=e(p,function(C){return C(b)});return{criteria:T,index:++v,value:b}});return a(x,function(b,w){return o(b,w,y)})}return QE=u,QE}var XE,h5;function oje(){if(h5)return XE;h5=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return XE=e,XE}var JE,f5;function lje(){if(f5)return JE;f5=1;var e=oje(),t=Math.max;function n(r,a,s){return a=t(a===void 0?r.length-1:a,0),function(){for(var o=arguments,l=-1,c=t(o.length-a,0),u=Array(c);++l<c;)u[l]=o[a+l];l=-1;for(var f=Array(a+1);++l<a;)f[l]=o[l];return f[a]=s(u),e(r,this,f)}}return JE=n,JE}var ZE,p5;function cje(){if(p5)return ZE;p5=1;function e(t){return function(){return t}}return ZE=e,ZE}var eA,m5;function AV(){if(m5)return eA;m5=1;var e=Rf(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return eA=t,eA}var tA,g5;function uje(){if(g5)return tA;g5=1;var e=cje(),t=AV(),n=Qg(),r=t?function(a,s){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return tA=r,tA}var nA,y5;function dje(){if(y5)return nA;y5=1;var e=800,t=16,n=Date.now;function r(a){var s=0,o=0;return function(){var l=n(),c=t-(l-o);if(o=l,c>0){if(++s>=e)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}return nA=r,nA}var rA,v5;function hje(){if(v5)return rA;v5=1;var e=uje(),t=dje(),n=t(e);return rA=n,rA}var iA,x5;function fje(){if(x5)return iA;x5=1;var e=Qg(),t=lje(),n=hje();function r(a,s){return n(t(a,s,e),a+"")}return iA=r,iA}var aA,b5;function BN(){if(b5)return aA;b5=1;var e=lM(),t=Qb(),n=wM(),r=jd();function a(s,o,l){if(!r(l))return!1;var c=typeof o;return(c=="number"?t(l)&&n(o,l.length):c=="string"&&o in l)?e(l[o],s):!1}return aA=a,aA}var sA,j5;function pje(){if(j5)return sA;j5=1;var e=CV(),t=sje(),n=fje(),r=BN(),a=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return sA=a,sA}var mje=pje();const CM=Bn(mje);function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}function GP(){return GP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GP.apply(this,arguments)}function gje(e,t){return bje(e)||xje(e,t)||vje(e,t)||yje()}function yje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vje(e,t){if(e){if(typeof e=="string")return w5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w5(e,t)}}function w5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function bje(e){if(Array.isArray(e))return e}function S5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function oA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S5(Object(n),!0).forEach(function(r){jje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jje(e,t,n){return t=wje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wje(e){var t=Sje(e,"string");return Kx(t)=="symbol"?t:t+""}function Sje(e,t){if(Kx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Kx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nje(e){return Array.isArray(e)&&bi(e[0])&&bi(e[1])?e.join(" ~ "):e}var _je=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,s=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,p=t.formatter,y=t.itemSorter,v=t.wrapperClassName,x=t.labelClassName,b=t.label,w=t.labelFormatter,_=t.accessibilityLayer,T=_===void 0?!1:_,C=function(){if(f&&f.length){var H={padding:0,margin:0},V=(y?CM(f,y):f).map(function(ne,Z){if(ne.type==="none")return null;var q=oA({display:"block",paddingTop:4,paddingBottom:4,color:ne.color||"#000"},l),K=ne.formatter||p||Nje,se=ne.value,G=ne.name,B=se,fe=G;if(K&&B!=null&&fe!=null){var me=K(se,G,ne,Z,f);if(Array.isArray(me)){var Y=gje(me,2);B=Y[0],fe=Y[1]}else B=me}return ye.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Z),style:q},bi(fe)?ye.createElement("span",{className:"recharts-tooltip-item-name"},fe):null,bi(fe)?ye.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ye.createElement("span",{className:"recharts-tooltip-item-value"},B),ye.createElement("span",{className:"recharts-tooltip-item-unit"},ne.unit||""))});return ye.createElement("ul",{className:"recharts-tooltip-item-list",style:H},V)}return null},O=oA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),E=oA({margin:0},u),P=!cn(b),I=P?b:"",F=fn("recharts-default-tooltip",v),$=fn("recharts-tooltip-label",x);P&&w&&f!==void 0&&f!==null&&(I=w(b,f));var z=T?{role:"status","aria-live":"assertive"}:{};return ye.createElement("div",GP({className:F,style:O},z),ye.createElement("p",{className:$,style:E},ye.isValidElement(I)?I:"".concat(I)),C())};function Yx(e){"@babel/helpers - typeof";return Yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yx(e)}function Vj(e,t,n){return t=Cje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cje(e){var t=Tje(e,"string");return Yx(t)=="symbol"?t:t+""}function Tje(e,t){if(Yx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Yx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ix="recharts-tooltip-wrapper",Eje={visibility:"hidden"};function Aje(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return fn(ix,Vj(Vj(Vj(Vj({},"".concat(ix,"-right"),yt(n)&&t&&yt(t.x)&&n>=t.x),"".concat(ix,"-left"),yt(n)&&t&&yt(t.x)&&n<t.x),"".concat(ix,"-bottom"),yt(r)&&t&&yt(t.y)&&r>=t.y),"".concat(ix,"-top"),yt(r)&&t&&yt(t.y)&&r<t.y))}function N5(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&yt(s[r]))return s[r];var f=n[r]-l-a,p=n[r]+a;if(t[r])return o[r]?f:p;if(o[r]){var y=f,v=c[r];return y<v?Math.max(p,c[r]):Math.max(f,c[r])}var x=p+l,b=c[r]+u;return x>b?Math.max(f,c[r]):Math.max(p,c[r])}function kje(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Pje(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,p;return o.height>0&&o.width>0&&n?(f=N5({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=N5({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=kje({translateX:f,translateY:p,useTranslate3d:l})):u=Eje,{cssProperties:u,cssClasses:Aje({translateX:f,translateY:p,coordinate:n})}}function pg(e){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pg(e)}function _5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function C5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_5(Object(n),!0).forEach(function(r){KP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dje(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PV(r.key),r)}}function Mje(e,t,n){return t&&Dje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ije(e,t,n){return t=iS(t),Rje(e,kV()?Reflect.construct(t,n||[],iS(e).constructor):t.apply(e,n))}function Rje(e,t){if(t&&(pg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lje(e)}function Lje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kV=function(){return!!e})()}function iS(e){return iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iS(e)}function Fje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WP(e,t)}function WP(e,t){return WP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},WP(e,t)}function KP(e,t,n){return t=PV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PV(e){var t=$je(e,"string");return pg(t)=="symbol"?t:t+""}function $je(e,t){if(pg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var T5=1,Bje=function(e){function t(){var n;Oje(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=Ije(this,t,[].concat(a)),KP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),KP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return Fje(t,e),Mje(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>T5||Math.abs(r.height-this.state.lastBoundingBox.height)>T5)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,f=a.coordinate,p=a.hasPayload,y=a.isAnimationActive,v=a.offset,x=a.position,b=a.reverseDirection,w=a.useTranslate3d,_=a.viewBox,T=a.wrapperStyle,C=Pje({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:v,position:x,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:_}),O=C.cssClasses,E=C.cssProperties,P=C5(C5({transition:y&&s?"transform ".concat(l,"ms ").concat(c):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&p?"visible":"hidden",position:"absolute",top:0,left:0},T);return ye.createElement("div",{tabIndex:-1,className:O,style:P,ref:function(F){r.wrapperNode=F}},u)}}])}(j.PureComponent),zje=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},wd={isSsr:zje()};function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}function E5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function A5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E5(Object(n),!0).forEach(function(r){TM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uje(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,DV(r.key),r)}}function Vje(e,t,n){return t&&Uje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hje(e,t,n){return t=aS(t),Gje(e,OV()?Reflect.construct(t,n||[],aS(e).constructor):t.apply(e,n))}function Gje(e,t){if(t&&(mg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wje(e)}function Wje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OV=function(){return!!e})()}function aS(e){return aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aS(e)}function Kje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YP(e,t)}function YP(e,t){return YP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},YP(e,t)}function TM(e,t,n){return t=DV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DV(e){var t=Yje(e,"string");return mg(t)=="symbol"?t:t+""}function Yje(e,t){if(mg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Qje(e){return e.dataKey}function Xje(e,t){return ye.isValidElement(e)?ye.cloneElement(e,t):typeof e=="function"?ye.createElement(e,t):ye.createElement(_je,t)}var _a=function(e){function t(){return qje(this,t),Hje(this,t,arguments)}return Kje(t,e),Vje(t,[{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,f=a.coordinate,p=a.filterNull,y=a.isAnimationActive,v=a.offset,x=a.payload,b=a.payloadUniqBy,w=a.position,_=a.reverseDirection,T=a.useTranslate3d,C=a.viewBox,O=a.wrapperStyle,E=x??[];p&&E.length&&(E=SV(x.filter(function(I){return I.value!=null&&(I.hide!==!0||r.props.includeHidden)}),b,Qje));var P=E.length>0;return ye.createElement(Bje,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:y,active:s,coordinate:f,hasPayload:P,offset:v,position:w,reverseDirection:_,useTranslate3d:T,viewBox:C,wrapperStyle:O},Xje(u,A5(A5({},this.props),{},{payload:E})))}}])}(j.PureComponent);TM(_a,"displayName","Tooltip");TM(_a,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!wd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var lA,k5;function Jje(){if(k5)return lA;k5=1;var e=Il(),t=function(){return e.Date.now()};return lA=t,lA}var cA,P5;function Zje(){if(P5)return cA;P5=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return cA=t,cA}var uA,O5;function ewe(){if(O5)return uA;O5=1;var e=Zje(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return uA=n,uA}var dA,D5;function MV(){if(D5)return dA;D5=1;var e=ewe(),t=jd(),n=Wg(),r=NaN,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=t(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=e(u);var p=s.test(u);return p||o.test(u)?l(u.slice(2),p?2:8):a.test(u)?r:+u}return dA=c,dA}var hA,M5;function twe(){if(M5)return hA;M5=1;var e=jd(),t=Jje(),n=MV(),r="Expected a function",a=Math.max,s=Math.min;function o(l,c,u){var f,p,y,v,x,b,w=0,_=!1,T=!1,C=!0;if(typeof l!="function")throw new TypeError(r);c=n(c)||0,e(u)&&(_=!!u.leading,T="maxWait"in u,y=T?a(n(u.maxWait)||0,c):y,C="trailing"in u?!!u.trailing:C);function O(V){var ne=f,Z=p;return f=p=void 0,w=V,v=l.apply(Z,ne),v}function E(V){return w=V,x=setTimeout(F,c),_?O(V):v}function P(V){var ne=V-b,Z=V-w,q=c-ne;return T?s(q,y-Z):q}function I(V){var ne=V-b,Z=V-w;return b===void 0||ne>=c||ne<0||T&&Z>=y}function F(){var V=t();if(I(V))return $(V);x=setTimeout(F,P(V))}function $(V){return x=void 0,C&&f?O(V):(f=p=void 0,v)}function z(){x!==void 0&&clearTimeout(x),w=0,f=b=p=x=void 0}function L(){return x===void 0?v:$(t())}function H(){var V=t(),ne=I(V);if(f=arguments,p=this,b=V,ne){if(x===void 0)return E(b);if(T)return clearTimeout(x),x=setTimeout(F,c),O(b)}return x===void 0&&(x=setTimeout(F,c)),v}return H.cancel=z,H.flush=L,H}return hA=o,hA}var fA,I5;function nwe(){if(I5)return fA;I5=1;var e=twe(),t=jd(),n="Expected a function";function r(a,s,o){var l=!0,c=!0;if(typeof a!="function")throw new TypeError(n);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(a,s,{leading:l,maxWait:s,trailing:c})}return fA=r,fA}var rwe=nwe();const IV=Bn(rwe);function Qx(e){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(e)}function R5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R5(Object(n),!0).forEach(function(r){iwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iwe(e,t,n){return t=awe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function awe(e){var t=swe(e,"string");return Qx(t)=="symbol"?t:t+""}function swe(e,t){if(Qx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Qx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function owe(e,t){return dwe(e)||uwe(e,t)||cwe(e,t)||lwe()}function lwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cwe(e,t){if(e){if(typeof e=="string")return L5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L5(e,t)}}function L5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function dwe(e){if(Array.isArray(e))return e}var Sw=j.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,p=e.minHeight,y=e.maxHeight,v=e.children,x=e.debounce,b=x===void 0?0:x,w=e.id,_=e.className,T=e.onResize,C=e.style,O=C===void 0?{}:C,E=j.useRef(null),P=j.useRef();P.current=T,j.useImperativeHandle(t,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var I=j.useState({containerWidth:a.width,containerHeight:a.height}),F=owe(I,2),$=F[0],z=F[1],L=j.useCallback(function(V,ne){z(function(Z){var q=Math.round(V),K=Math.round(ne);return Z.containerWidth===q&&Z.containerHeight===K?Z:{containerWidth:q,containerHeight:K}})},[]);j.useEffect(function(){var V=function(G){var B,fe=G[0].contentRect,me=fe.width,Y=fe.height;L(me,Y),(B=P.current)===null||B===void 0||B.call(P,me,Y)};b>0&&(V=IV(V,b,{trailing:!0,leading:!1}));var ne=new ResizeObserver(V),Z=E.current.getBoundingClientRect(),q=Z.width,K=Z.height;return L(q,K),ne.observe(E.current),function(){ne.disconnect()}},[L,b]);var H=j.useMemo(function(){var V=$.containerWidth,ne=$.containerHeight;if(V<0||ne<0)return null;Oo(Xh(o)||Xh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Oo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Z=Xh(o)?V:o,q=Xh(c)?ne:c;n&&n>0&&(Z?q=Z/n:q&&(Z=q*n),y&&q>y&&(q=y)),Oo(Z>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Z,q,o,c,f,p,n);var K=!Array.isArray(v)&&Cc(v.type).endsWith("Chart");return ye.Children.map(v,function(se){return ye.isValidElement(se)?j.cloneElement(se,Hj({width:Z,height:q},K?{style:Hj({height:"100%",width:"100%",maxHeight:q,maxWidth:Z},se.props.style)}:{})):se})},[n,v,c,y,p,f,$,o]);return ye.createElement("div",{id:w?"".concat(w):void 0,className:fn("recharts-responsive-container",_),style:Hj(Hj({},O),{},{width:o,height:c,minWidth:f,minHeight:p,maxHeight:y}),ref:E},H)}),Xb=function(t){return null};Xb.displayName="Cell";function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}function F5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function QP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F5(Object(n),!0).forEach(function(r){hwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hwe(e,t,n){return t=fwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fwe(e){var t=pwe(e,"string");return Xx(t)=="symbol"?t:t+""}function pwe(e,t){if(Xx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wm={widthCache:{},cacheCount:0},mwe=2e3,gwe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$5="recharts_measurement_span";function ywe(e){var t=QP({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Ax=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||wd.isSsr)return{width:0,height:0};var r=ywe(n),a=JSON.stringify({text:t,copyStyle:r});if(wm.widthCache[a])return wm.widthCache[a];try{var s=document.getElementById($5);s||(s=document.createElement("span"),s.setAttribute("id",$5),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=QP(QP({},gwe),r);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return wm.widthCache[a]=c,++wm.cacheCount>mwe&&(wm.cacheCount=0,wm.widthCache={}),c}catch{return{width:0,height:0}}},vwe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Jx(e){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jx(e)}function sS(e,t){return wwe(e)||jwe(e,t)||bwe(e,t)||xwe()}function xwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bwe(e,t){if(e){if(typeof e=="string")return B5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B5(e,t)}}function B5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function wwe(e){if(Array.isArray(e))return e}function Swe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_we(r.key),r)}}function Nwe(e,t,n){return t&&z5(e.prototype,t),n&&z5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _we(e){var t=Cwe(e,"string");return Jx(t)=="symbol"?t:t+""}function Cwe(e,t){if(Jx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Jx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var q5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,U5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Twe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ewe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,RV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Awe=Object.keys(RV),Dm="NaN";function kwe(e,t){return e*RV[t]}var Gj=function(){function e(t,n){Swe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Twe.test(n)&&(this.num=NaN,this.unit=""),Awe.includes(n)&&(this.num=kwe(t,n),this.unit="px")}return Nwe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=Ewe.exec(n))!==null&&r!==void 0?r:[],s=sS(a,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function LV(e){if(e.includes(Dm))return Dm;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=q5.exec(t))!==null&&n!==void 0?n:[],a=sS(r,4),s=a[1],o=a[2],l=a[3],c=Gj.parse(s??""),u=Gj.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Dm;t=t.replace(q5,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,y=(p=U5.exec(t))!==null&&p!==void 0?p:[],v=sS(y,4),x=v[1],b=v[2],w=v[3],_=Gj.parse(x??""),T=Gj.parse(w??""),C=b==="+"?_.add(T):_.subtract(T);if(C.isNaN())return Dm;t=t.replace(U5,C.toString())}return t}var V5=/\(([^()]*)\)/;function Pwe(e){for(var t=e;t.includes("(");){var n=V5.exec(t),r=sS(n,2),a=r[1];t=t.replace(V5,LV(a))}return t}function Owe(e){var t=e.replace(/\s+/g,"");return t=Pwe(t),t=LV(t),t}function Dwe(e){try{return Owe(e)}catch{return Dm}}function pA(e){var t=Dwe(e.slice(5,-1));return t===Dm?"":t}var Mwe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Iwe=["dx","dy","angle","className","breakAll"];function XP(){return XP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XP.apply(this,arguments)}function H5(e,t){if(e==null)return{};var n=Rwe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rwe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function G5(e,t){return Bwe(e)||$we(e,t)||Fwe(e,t)||Lwe()}function Lwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fwe(e,t){if(e){if(typeof e=="string")return W5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W5(e,t)}}function W5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $we(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Bwe(e){if(Array.isArray(e))return e}var FV=/[ \f\n\r\t\v\u2028\u2029]+/,$V=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var s=[];cn(n)||(r?s=n.toString().split(""):s=n.toString().split(FV));var o=s.map(function(c){return{word:c,width:Ax(c,a).width}}),l=r?0:Ax("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},zwe=function(t,n,r,a,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=yt(o),p=l,y=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z.reduce(function(q,K){var se=K.word,G=K.width,B=q[q.length-1];if(B&&(a==null||s||B.width+G+r<Number(a)))B.words.push(se),B.width+=G+r;else{var fe={words:[se],width:G};q.push(fe)}return q},[])},v=y(n),x=function(Z){return Z.reduce(function(q,K){return q.width>K.width?q:K})};if(!f)return v;for(var b="",w=function(Z){var q=p.slice(0,Z),K=$V({breakAll:u,style:c,children:q+b}).wordsWithComputedWidth,se=y(K),G=se.length>o||x(se).width>Number(a);return[G,se]},_=0,T=p.length-1,C=0,O;_<=T&&C<=p.length-1;){var E=Math.floor((_+T)/2),P=E-1,I=w(P),F=G5(I,2),$=F[0],z=F[1],L=w(E),H=G5(L,1),V=H[0];if(!$&&!V&&(_=E+1),$&&V&&(T=E-1),!$&&V){O=z;break}C++}return O||v},K5=function(t){var n=cn(t)?[]:t.toString().split(FV);return[{words:n}]},qwe=function(t){var n=t.width,r=t.scaleToFit,a=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!wd.isSsr){var c,u,f=$V({breakAll:o,children:a,style:s});if(f){var p=f.wordsWithComputedWidth,y=f.spaceWidth;c=p,u=y}else return K5(a);return zwe({breakAll:o,children:a,maxLines:l,style:s},c,u,n,r)}return K5(a)},Y5="#808080",Af=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,p=f===void 0?!1:f,y=t.textAnchor,v=y===void 0?"start":y,x=t.verticalAnchor,b=x===void 0?"end":x,w=t.fill,_=w===void 0?Y5:w,T=H5(t,Mwe),C=j.useMemo(function(){return qwe({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:p,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,p,T.style,T.width]),O=T.dx,E=T.dy,P=T.angle,I=T.className,F=T.breakAll,$=H5(T,Iwe);if(!bi(r)||!bi(s))return null;var z=r+(yt(O)?O:0),L=s+(yt(E)?E:0),H;switch(b){case"start":H=pA("calc(".concat(u,")"));break;case"middle":H=pA("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:H=pA("calc(".concat(C.length-1," * -").concat(l,")"));break}var V=[];if(p){var ne=C[0].width,Z=T.width;V.push("scale(".concat((yt(Z)?Z/ne:1)/ne,")"))}return P&&V.push("rotate(".concat(P,", ").concat(z,", ").concat(L,")")),V.length&&($.transform=V.join(" ")),ye.createElement("text",XP({},Ft($,!0),{x:z,y:L,className:fn("recharts-text",I),textAnchor:v,fill:_.includes("url")?Y5:_}),C.map(function(q,K){var se=q.words.join(F?"":" ");return ye.createElement("tspan",{x:z,dy:K===0?H:l,key:"".concat(se,"-").concat(K)},se)}))};function ud(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Uwe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function EM(e){let t,n,r;e.length!==2?(t=ud,n=(l,c)=>ud(e(l),c),r=(l,c)=>e(l)-c):(t=e===ud||e===Uwe?e:Vwe,n=e,r=e);function a(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const p=u+f>>>1;n(l[p],c)<0?u=p+1:f=p}while(u<f)}return u}function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const p=u+f>>>1;n(l[p],c)<=0?u=p+1:f=p}while(u<f)}return u}function o(l,c,u=0,f=l.length){const p=a(l,c,u,f-1);return p>u&&r(l[p-1],c)>-r(l[p],c)?p-1:p}return{left:a,center:o,right:s}}function Vwe(){return 0}function BV(e){return e===null?NaN:+e}function*Hwe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Gwe=EM(ud),Jb=Gwe.right;EM(BV).center;class Q5 extends Map{constructor(t,n=Ywe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(X5(this,t))}has(t){return super.has(X5(this,t))}set(t,n){return super.set(Wwe(this,t),n)}delete(t){return super.delete(Kwe(this,t))}}function X5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Wwe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Kwe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ywe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Qwe(e=ud){if(e===ud)return zV;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function zV(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Xwe=Math.sqrt(50),Jwe=Math.sqrt(10),Zwe=Math.sqrt(2);function oS(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),o=s>=Xwe?10:s>=Jwe?5:s>=Zwe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?oS(e,t,n*2):[l,c,u]}function JP(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,s,o]=r?oS(t,e,n):oS(e,t,n);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function ZP(e,t,n){return t=+t,e=+e,n=+n,oS(e,t,n)[2]}function eO(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?ZP(t,e,n):ZP(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function J5(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Z5(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function qV(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?zV:Qwe(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(c-p)/c)*(u-c/2<0?-1:1),v=Math.max(n,Math.floor(t-u*p/c+y)),x=Math.min(r,Math.floor(t+(c-u)*p/c+y));qV(e,t,v,x,a)}const s=e[t];let o=n,l=r;for(ax(e,n,t),a(e[r],s)>0&&ax(e,n,r);o<l;){for(ax(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[n],s)===0?ax(e,n,l):(++l,ax(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function ax(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function eSe(e,t,n){if(e=Float64Array.from(Hwe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Z5(e);if(t>=1)return J5(e);var r,a=(r-1)*t,s=Math.floor(a),o=J5(qV(e,s).subarray(0,s+1)),l=Z5(e.subarray(s+1));return o+(l-o)*(a-s)}}function tSe(e,t,n=BV){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,s=Math.floor(a),o=+n(e[s],s,e),l=+n(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function nSe(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(a);++r<a;)s[r]=e+r*n;return s}function eo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tO=Symbol("implicit");function AM(){var e=new Q5,t=[],n=[],r=tO;function a(s){let o=e.get(s);if(o===void 0){if(r!==tO)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Q5;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return AM(t,n).unknown(r)},eo.apply(a,arguments),a}function Zx(){var e=AM().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,s,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function p(){var y=t().length,v=a<r,x=v?a:r,b=v?r:a;s=(b-x)/Math.max(1,y-c+u*2),l&&(s=Math.floor(s)),x+=(b-x-s*(y-c))*f,o=s*(1-c),l&&(x=Math.round(x),o=Math.round(o));var w=nSe(y).map(function(_){return x+s*_});return n(v?w.reverse():w)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([r,a]=y,r=+r,a=+a,p()):[r,a]},e.rangeRound=function(y){return[r,a]=y,r=+r,a=+a,l=!0,p()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(y){return arguments.length?(l=!!y,p()):l},e.padding=function(y){return arguments.length?(c=Math.min(1,u=+y),p()):c},e.paddingInner=function(y){return arguments.length?(c=Math.min(1,y),p()):c},e.paddingOuter=function(y){return arguments.length?(u=+y,p()):u},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return Zx(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(f)},eo.apply(p(),arguments)}function UV(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return UV(t())},e}function kx(){return UV(Zx.apply(null,arguments).paddingInner(1))}function kM(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function VV(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zb(){}var eb=.7,lS=1/eb,Um="\\s*([+-]?\\d+)\\s*",tb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Al="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rSe=/^#([0-9a-f]{3,8})$/,iSe=new RegExp(`^rgb\\(${Um},${Um},${Um}\\)$`),aSe=new RegExp(`^rgb\\(${Al},${Al},${Al}\\)$`),sSe=new RegExp(`^rgba\\(${Um},${Um},${Um},${tb}\\)$`),oSe=new RegExp(`^rgba\\(${Al},${Al},${Al},${tb}\\)$`),lSe=new RegExp(`^hsl\\(${tb},${Al},${Al}\\)$`),cSe=new RegExp(`^hsla\\(${tb},${Al},${Al},${tb}\\)$`),e$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kM(Zb,nb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:t$,formatHex:t$,formatHex8:uSe,formatHsl:dSe,formatRgb:n$,toString:n$});function t$(){return this.rgb().formatHex()}function uSe(){return this.rgb().formatHex8()}function dSe(){return HV(this).formatHsl()}function n$(){return this.rgb().formatRgb()}function nb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rSe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?r$(t):n===3?new Ja(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wj(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wj(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iSe.exec(e))?new Ja(t[1],t[2],t[3],1):(t=aSe.exec(e))?new Ja(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sSe.exec(e))?Wj(t[1],t[2],t[3],t[4]):(t=oSe.exec(e))?Wj(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lSe.exec(e))?s$(t[1],t[2]/100,t[3]/100,1):(t=cSe.exec(e))?s$(t[1],t[2]/100,t[3]/100,t[4]):e$.hasOwnProperty(e)?r$(e$[e]):e==="transparent"?new Ja(NaN,NaN,NaN,0):null}function r$(e){return new Ja(e>>16&255,e>>8&255,e&255,1)}function Wj(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ja(e,t,n,r)}function hSe(e){return e instanceof Zb||(e=nb(e)),e?(e=e.rgb(),new Ja(e.r,e.g,e.b,e.opacity)):new Ja}function nO(e,t,n,r){return arguments.length===1?hSe(e):new Ja(e,t,n,r??1)}function Ja(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}kM(Ja,nO,VV(Zb,{brighter(e){return e=e==null?lS:Math.pow(lS,e),new Ja(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?eb:Math.pow(eb,e),new Ja(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ja(ff(this.r),ff(this.g),ff(this.b),cS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i$,formatHex:i$,formatHex8:fSe,formatRgb:a$,toString:a$}));function i$(){return`#${Jh(this.r)}${Jh(this.g)}${Jh(this.b)}`}function fSe(){return`#${Jh(this.r)}${Jh(this.g)}${Jh(this.b)}${Jh((isNaN(this.opacity)?1:this.opacity)*255)}`}function a$(){const e=cS(this.opacity);return`${e===1?"rgb(":"rgba("}${ff(this.r)}, ${ff(this.g)}, ${ff(this.b)}${e===1?")":`, ${e})`}`}function cS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ff(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jh(e){return e=ff(e),(e<16?"0":"")+e.toString(16)}function s$(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ao(e,t,n,r)}function HV(e){if(e instanceof Ao)return new Ao(e.h,e.s,e.l,e.opacity);if(e instanceof Zb||(e=nb(e)),!e)return new Ao;if(e instanceof Ao)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Ao(o,l,c,e.opacity)}function pSe(e,t,n,r){return arguments.length===1?HV(e):new Ao(e,t,n,r??1)}function Ao(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}kM(Ao,pSe,VV(Zb,{brighter(e){return e=e==null?lS:Math.pow(lS,e),new Ao(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?eb:Math.pow(eb,e),new Ao(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Ja(mA(e>=240?e-240:e+120,a,r),mA(e,a,r),mA(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Ao(o$(this.h),Kj(this.s),Kj(this.l),cS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cS(this.opacity);return`${e===1?"hsl(":"hsla("}${o$(this.h)}, ${Kj(this.s)*100}%, ${Kj(this.l)*100}%${e===1?")":`, ${e})`}`}}));function o$(e){return e=(e||0)%360,e<0?e+360:e}function Kj(e){return Math.max(0,Math.min(1,e||0))}function mA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const PM=e=>()=>e;function mSe(e,t){return function(n){return e+n*t}}function gSe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ySe(e){return(e=+e)==1?GV:function(t,n){return n-t?gSe(t,n,e):PM(isNaN(t)?n:t)}}function GV(e,t){var n=t-e;return n?mSe(e,n):PM(isNaN(e)?t:e)}const l$=function e(t){var n=ySe(t);function r(a,s){var o=n((a=nO(a)).r,(s=nO(s)).r),l=n(a.g,s.g),c=n(a.b,s.b),u=GV(a.opacity,s.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=c(f),a.opacity=u(f),a+""}}return r.gamma=e,r}(1);function vSe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=e[a]*(1-s)+t[a]*s;return r}}function xSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bSe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)a[o]=Xg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=a[o](l);return s}}function jSe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function uS(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wSe(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Xg(e[a],t[a]):r[a]=t[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var rO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gA=new RegExp(rO.source,"g");function SSe(e){return function(){return e}}function NSe(e){return function(t){return e(t)+""}}function _Se(e,t){var n=rO.lastIndex=gA.lastIndex=0,r,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=rO.exec(e))&&(a=gA.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:uS(r,a)})),n=gA.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?NSe(c[0].x):SSe(t):(t=c.length,function(u){for(var f=0,p;f<t;++f)l[(p=c[f]).i]=p.x(u);return l.join("")})}function Xg(e,t){var n=typeof t,r;return t==null||n==="boolean"?PM(t):(n==="number"?uS:n==="string"?(r=nb(t))?(t=r,l$):_Se:t instanceof nb?l$:t instanceof Date?jSe:xSe(t)?vSe:Array.isArray(t)?bSe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wSe:uS)(e,t)}function OM(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function CSe(e,t){t===void 0&&(t=e,e=Xg);for(var n=0,r=t.length-1,a=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function TSe(e){return function(){return e}}function dS(e){return+e}var c$=[0,1];function Aa(e){return e}function iO(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:TSe(isNaN(t)?NaN:.5)}function ESe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ASe(e,t,n){var r=e[0],a=e[1],s=t[0],o=t[1];return a<r?(r=iO(a,r),s=n(o,s)):(r=iO(r,a),s=n(s,o)),function(l){return s(r(l))}}function kSe(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=iO(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(l){var c=Jb(e,l,1,r)-1;return s[c](a[c](l))}}function e0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function zN(){var e=c$,t=c$,n=Xg,r,a,s,o=Aa,l,c,u;function f(){var y=Math.min(e.length,t.length);return o!==Aa&&(o=ESe(e[0],e[y-1])),l=y>2?kSe:ASe,c=u=null,p}function p(y){return y==null||isNaN(y=+y)?s:(c||(c=l(e.map(r),t,n)))(r(o(y)))}return p.invert=function(y){return o(a((u||(u=l(t,e.map(r),uS)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,dS),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),n=OM,f()},p.clamp=function(y){return arguments.length?(o=y?!0:Aa,f()):o!==Aa},p.interpolate=function(y){return arguments.length?(n=y,f()):n},p.unknown=function(y){return arguments.length?(s=y,p):s},function(y,v){return r=y,a=v,f()}}function DM(){return zN()(Aa,Aa)}function PSe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hS(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function gg(e){return e=hS(Math.abs(e)),e?e[1]:NaN}function OSe(e,t){return function(n,r){for(var a=n.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function DSe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var MSe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rb(e){if(!(t=MSe.exec(e)))throw new Error("invalid format: "+e);var t;return new MM({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}rb.prototype=MM.prototype;function MM(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}MM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ISe(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var WV;function RSe(e,t){var n=hS(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(WV=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+hS(e,Math.max(0,t+s-1))[0]}function u$(e,t){var n=hS(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const d$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:PSe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>u$(e*100,t),r:u$,s:RSe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function h$(e){return e}var f$=Array.prototype.map,p$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function LSe(e){var t=e.grouping===void 0||e.thousands===void 0?h$:OSe(f$.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?h$:DSe(f$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(p){p=rb(p);var y=p.fill,v=p.align,x=p.sign,b=p.symbol,w=p.zero,_=p.width,T=p.comma,C=p.precision,O=p.trim,E=p.type;E==="n"?(T=!0,E="g"):d$[E]||(C===void 0&&(C=12),O=!0,E="g"),(w||y==="0"&&v==="=")&&(w=!0,y="0",v="=");var P=b==="$"?n:b==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",I=b==="$"?r:/[%p]/.test(E)?o:"",F=d$[E],$=/[defgprs%]/.test(E);C=C===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function z(L){var H=P,V=I,ne,Z,q;if(E==="c")V=F(L)+V,L="";else{L=+L;var K=L<0||1/L<0;if(L=isNaN(L)?c:F(Math.abs(L),C),O&&(L=ISe(L)),K&&+L==0&&x!=="+"&&(K=!1),H=(K?x==="("?x:l:x==="-"||x==="("?"":x)+H,V=(E==="s"?p$[8+WV/3]:"")+V+(K&&x==="("?")":""),$){for(ne=-1,Z=L.length;++ne<Z;)if(q=L.charCodeAt(ne),48>q||q>57){V=(q===46?a+L.slice(ne+1):L.slice(ne))+V,L=L.slice(0,ne);break}}}T&&!w&&(L=t(L,1/0));var se=H.length+L.length+V.length,G=se<_?new Array(_-se+1).join(y):"";switch(T&&w&&(L=t(G+L,G.length?_-V.length:1/0),G=""),v){case"<":L=H+L+V+G;break;case"=":L=H+G+L+V;break;case"^":L=G.slice(0,se=G.length>>1)+H+L+V+G.slice(se);break;default:L=G+H+L+V;break}return s(L)}return z.toString=function(){return p+""},z}function f(p,y){var v=u((p=rb(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(gg(y)/3)))*3,b=Math.pow(10,-x),w=p$[8+x/3];return function(_){return v(b*_)+w}}return{format:u,formatPrefix:f}}var Yj,IM,KV;FSe({thousands:",",grouping:[3],currency:["$",""]});function FSe(e){return Yj=LSe(e),IM=Yj.format,KV=Yj.formatPrefix,Yj}function $Se(e){return Math.max(0,-gg(Math.abs(e)))}function BSe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gg(t)/3)))*3-gg(Math.abs(e)))}function zSe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gg(t)-gg(e))+1}function YV(e,t,n,r){var a=eO(e,t,n),s;switch(r=rb(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=BSe(a,o))&&(r.precision=s),KV(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=zSe(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=$Se(a))&&(r.precision=s-(r.type==="%")*2);break}}return IM(r)}function Sd(e){var t=e.domain;return e.ticks=function(n){var r=t();return JP(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return YV(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,s=r.length-1,o=r[a],l=r[s],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);f-- >0;){if(u=ZP(o,l,n),u===c)return r[a]=o,r[s]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function fS(){var e=DM();return e.copy=function(){return e0(e,fS())},eo.apply(e,arguments),Sd(e)}function QV(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,dS),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return QV(e).unknown(t)},e=arguments.length?Array.from(e,dS):[0,1],Sd(n)}function XV(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],s=e[r],o;return s<a&&(o=n,n=r,r=o,o=a,a=s,s=o),e[n]=t.floor(a),e[r]=t.ceil(s),e}function m$(e){return Math.log(e)}function g$(e){return Math.exp(e)}function qSe(e){return-Math.log(-e)}function USe(e){return-Math.exp(-e)}function VSe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function HSe(e){return e===10?VSe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function GSe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function y$(e){return(t,n)=>-e(-t,n)}function RM(e){const t=e(m$,g$),n=t.domain;let r=10,a,s;function o(){return a=GSe(r),s=HSe(r),n()[0]<0?(a=y$(a),s=y$(s),e(qSe,USe)):e(m$,g$),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],f=c[c.length-1];const p=f<u;p&&([u,f]=[f,u]);let y=a(u),v=a(f),x,b;const w=l==null?10:+l;let _=[];if(!(r%1)&&v-y<w){if(y=Math.floor(y),v=Math.ceil(v),u>0){for(;y<=v;++y)for(x=1;x<r;++x)if(b=y<0?x/s(-y):x*s(y),!(b<u)){if(b>f)break;_.push(b)}}else for(;y<=v;++y)for(x=r-1;x>=1;--x)if(b=y>0?x/s(-y):x*s(y),!(b<u)){if(b>f)break;_.push(b)}_.length*2<w&&(_=JP(u,f,w))}else _=JP(y,v,Math.min(v-y,w)).map(s);return p?_.reverse():_},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=rb(c)).precision==null&&(c.trim=!0),c=IM(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return f=>{let p=f/s(Math.round(a(f)));return p*r<r-.5&&(p*=r),p<=u?c(f):""}},t.nice=()=>n(XV(n(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function JV(){const e=RM(zN()).domain([1,10]);return e.copy=()=>e0(e,JV()).base(e.base()),eo.apply(e,arguments),e}function v$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function x$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function LM(e){var t=1,n=e(v$(t),x$(t));return n.constant=function(r){return arguments.length?e(v$(t=+r),x$(t)):t},Sd(n)}function ZV(){var e=LM(zN());return e.copy=function(){return e0(e,ZV()).constant(e.constant())},eo.apply(e,arguments)}function b$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function WSe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function KSe(e){return e<0?-e*e:e*e}function FM(e){var t=e(Aa,Aa),n=1;function r(){return n===1?e(Aa,Aa):n===.5?e(WSe,KSe):e(b$(n),b$(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Sd(t)}function $M(){var e=FM(zN());return e.copy=function(){return e0(e,$M()).exponent(e.exponent())},eo.apply(e,arguments),e}function YSe(){return $M.apply(null,arguments).exponent(.5)}function j$(e){return Math.sign(e)*e*e}function QSe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function eH(){var e=DM(),t=[0,1],n=!1,r;function a(s){var o=QSe(e(s));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(s){return e.invert(j$(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,dS)).map(j$)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return eH(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},eo.apply(a,arguments),Sd(a)}function tH(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=tSe(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Jb(n,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ud),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return tH().domain(e).range(t).unknown(r)},eo.apply(s,arguments)}function nH(){var e=0,t=1,n=1,r=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Jb(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return nH().domain([e,t]).range(a).unknown(s)},eo.apply(Sd(o),arguments)}function rH(){var e=[.5],t=[0,1],n,r=1;function a(s){return s!=null&&s<=s?t[Jb(e,s,0,r)]:n}return a.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return rH().domain(e).range(t).unknown(n)},eo.apply(a,arguments)}const yA=new Date,vA=new Date;function ji(e,t,n,r){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>ji(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),n&&(a.count=(s,o)=>(yA.setTime(+s),vA.setTime(+o),e(yA),e(vA),Math.floor(n(yA,vA))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(r?o=>r(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const pS=ji(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ji(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):pS);pS.range;const bc=1e3,Ys=bc*60,jc=Ys*60,Ic=jc*24,BM=Ic*7,w$=Ic*30,xA=Ic*365,Zh=ji(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bc)},(e,t)=>(t-e)/bc,e=>e.getUTCSeconds());Zh.range;const zM=ji(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bc)},(e,t)=>{e.setTime(+e+t*Ys)},(e,t)=>(t-e)/Ys,e=>e.getMinutes());zM.range;const qM=ji(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ys)},(e,t)=>(t-e)/Ys,e=>e.getUTCMinutes());qM.range;const UM=ji(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bc-e.getMinutes()*Ys)},(e,t)=>{e.setTime(+e+t*jc)},(e,t)=>(t-e)/jc,e=>e.getHours());UM.range;const VM=ji(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*jc)},(e,t)=>(t-e)/jc,e=>e.getUTCHours());VM.range;const t0=ji(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ys)/Ic,e=>e.getDate()-1);t0.range;const qN=ji(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ic,e=>e.getUTCDate()-1);qN.range;const iH=ji(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ic,e=>Math.floor(e/Ic));iH.range;function Ff(e){return ji(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ys)/BM)}const UN=Ff(0),mS=Ff(1),XSe=Ff(2),JSe=Ff(3),yg=Ff(4),ZSe=Ff(5),eNe=Ff(6);UN.range;mS.range;XSe.range;JSe.range;yg.range;ZSe.range;eNe.range;function $f(e){return ji(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/BM)}const VN=$f(0),gS=$f(1),tNe=$f(2),nNe=$f(3),vg=$f(4),rNe=$f(5),iNe=$f(6);VN.range;gS.range;tNe.range;nNe.range;vg.range;rNe.range;iNe.range;const HM=ji(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());HM.range;const GM=ji(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());GM.range;const Rc=ji(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Rc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ji(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Rc.range;const Lc=ji(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Lc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ji(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Lc.range;function aH(e,t,n,r,a,s){const o=[[Zh,1,bc],[Zh,5,5*bc],[Zh,15,15*bc],[Zh,30,30*bc],[s,1,Ys],[s,5,5*Ys],[s,15,15*Ys],[s,30,30*Ys],[a,1,jc],[a,3,3*jc],[a,6,6*jc],[a,12,12*jc],[r,1,Ic],[r,2,2*Ic],[n,1,BM],[t,1,w$],[t,3,3*w$],[e,1,xA]];function l(u,f,p){const y=f<u;y&&([u,f]=[f,u]);const v=p&&typeof p.range=="function"?p:c(u,f,p),x=v?v.range(u,+f+1):[];return y?x.reverse():x}function c(u,f,p){const y=Math.abs(f-u)/p,v=EM(([,,w])=>w).right(o,y);if(v===o.length)return e.every(eO(u/xA,f/xA,p));if(v===0)return pS.every(Math.max(eO(u,f,p),1));const[x,b]=o[y/o[v-1][2]<o[v][2]/y?v-1:v];return x.every(b)}return[l,c]}const[aNe,sNe]=aH(Lc,GM,VN,iH,VM,qM),[oNe,lNe]=aH(Rc,HM,UN,t0,UM,zM);function bA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sx(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function cNe(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=ox(a),f=lx(a),p=ox(s),y=lx(s),v=ox(o),x=lx(o),b=ox(l),w=lx(l),_=ox(c),T=lx(c),C={a:K,A:se,b:G,B,c:null,d:E$,e:E$,f:ONe,g:qNe,G:VNe,H:ANe,I:kNe,j:PNe,L:sH,m:DNe,M:MNe,p:fe,q:me,Q:P$,s:O$,S:INe,u:RNe,U:LNe,V:FNe,w:$Ne,W:BNe,x:null,X:null,y:zNe,Y:UNe,Z:HNe,"%":k$},O={a:Y,A:xe,b:Ie,B:Ne,c:null,d:A$,e:A$,f:YNe,g:a_e,G:o_e,H:GNe,I:WNe,j:KNe,L:lH,m:QNe,M:XNe,p:ke,q:de,Q:P$,s:O$,S:JNe,u:ZNe,U:e_e,V:t_e,w:n_e,W:r_e,x:null,X:null,y:i_e,Y:s_e,Z:l_e,"%":k$},E={a:z,A:L,b:H,B:V,c:ne,d:C$,e:C$,f:_Ne,g:_$,G:N$,H:T$,I:T$,j:jNe,L:NNe,m:bNe,M:wNe,p:$,q:xNe,Q:TNe,s:ENe,S:SNe,u:pNe,U:mNe,V:gNe,w:fNe,W:yNe,x:Z,X:q,y:_$,Y:N$,Z:vNe,"%":CNe};C.x=P(n,C),C.X=P(r,C),C.c=P(t,C),O.x=P(n,O),O.X=P(r,O),O.c=P(t,O);function P(Q,oe){return function(re){var ae=[],X=-1,W=0,ie=Q.length,pe,le,je;for(re instanceof Date||(re=new Date(+re));++X<ie;)Q.charCodeAt(X)===37&&(ae.push(Q.slice(W,X)),(le=S$[pe=Q.charAt(++X)])!=null?pe=Q.charAt(++X):le=pe==="e"?" ":"0",(je=oe[pe])&&(pe=je(re,le)),ae.push(pe),W=X+1);return ae.push(Q.slice(W,X)),ae.join("")}}function I(Q,oe){return function(re){var ae=sx(1900,void 0,1),X=F(ae,Q,re+="",0),W,ie;if(X!=re.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(oe&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(W=jA(sx(ae.y,0,1)),ie=W.getUTCDay(),W=ie>4||ie===0?gS.ceil(W):gS(W),W=qN.offset(W,(ae.V-1)*7),ae.y=W.getUTCFullYear(),ae.m=W.getUTCMonth(),ae.d=W.getUTCDate()+(ae.w+6)%7):(W=bA(sx(ae.y,0,1)),ie=W.getDay(),W=ie>4||ie===0?mS.ceil(W):mS(W),W=t0.offset(W,(ae.V-1)*7),ae.y=W.getFullYear(),ae.m=W.getMonth(),ae.d=W.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),ie="Z"in ae?jA(sx(ae.y,0,1)).getUTCDay():bA(sx(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(ie+5)%7:ae.w+ae.U*7-(ie+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,jA(ae)):bA(ae)}}function F(Q,oe,re,ae){for(var X=0,W=oe.length,ie=re.length,pe,le;X<W;){if(ae>=ie)return-1;if(pe=oe.charCodeAt(X++),pe===37){if(pe=oe.charAt(X++),le=E[pe in S$?oe.charAt(X++):pe],!le||(ae=le(Q,re,ae))<0)return-1}else if(pe!=re.charCodeAt(ae++))return-1}return ae}function $(Q,oe,re){var ae=u.exec(oe.slice(re));return ae?(Q.p=f.get(ae[0].toLowerCase()),re+ae[0].length):-1}function z(Q,oe,re){var ae=v.exec(oe.slice(re));return ae?(Q.w=x.get(ae[0].toLowerCase()),re+ae[0].length):-1}function L(Q,oe,re){var ae=p.exec(oe.slice(re));return ae?(Q.w=y.get(ae[0].toLowerCase()),re+ae[0].length):-1}function H(Q,oe,re){var ae=_.exec(oe.slice(re));return ae?(Q.m=T.get(ae[0].toLowerCase()),re+ae[0].length):-1}function V(Q,oe,re){var ae=b.exec(oe.slice(re));return ae?(Q.m=w.get(ae[0].toLowerCase()),re+ae[0].length):-1}function ne(Q,oe,re){return F(Q,t,oe,re)}function Z(Q,oe,re){return F(Q,n,oe,re)}function q(Q,oe,re){return F(Q,r,oe,re)}function K(Q){return o[Q.getDay()]}function se(Q){return s[Q.getDay()]}function G(Q){return c[Q.getMonth()]}function B(Q){return l[Q.getMonth()]}function fe(Q){return a[+(Q.getHours()>=12)]}function me(Q){return 1+~~(Q.getMonth()/3)}function Y(Q){return o[Q.getUTCDay()]}function xe(Q){return s[Q.getUTCDay()]}function Ie(Q){return c[Q.getUTCMonth()]}function Ne(Q){return l[Q.getUTCMonth()]}function ke(Q){return a[+(Q.getUTCHours()>=12)]}function de(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var oe=P(Q+="",C);return oe.toString=function(){return Q},oe},parse:function(Q){var oe=I(Q+="",!1);return oe.toString=function(){return Q},oe},utcFormat:function(Q){var oe=P(Q+="",O);return oe.toString=function(){return Q},oe},utcParse:function(Q){var oe=I(Q+="",!0);return oe.toString=function(){return Q},oe}}}var S$={"-":"",_:" ",0:"0"},ki=/^\s*\d+/,uNe=/^%/,dNe=/[\\^$*+?|[\]().{}]/g;function Hn(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",s=a.length;return r+(s<n?new Array(n-s+1).join(t)+a:a)}function hNe(e){return e.replace(dNe,"\\$&")}function ox(e){return new RegExp("^(?:"+e.map(hNe).join("|")+")","i")}function lx(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function fNe(e,t,n){var r=ki.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function pNe(e,t,n){var r=ki.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function mNe(e,t,n){var r=ki.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function gNe(e,t,n){var r=ki.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function yNe(e,t,n){var r=ki.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function N$(e,t,n){var r=ki.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function _$(e,t,n){var r=ki.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function vNe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function xNe(e,t,n){var r=ki.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function bNe(e,t,n){var r=ki.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function C$(e,t,n){var r=ki.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function jNe(e,t,n){var r=ki.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function T$(e,t,n){var r=ki.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wNe(e,t,n){var r=ki.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function SNe(e,t,n){var r=ki.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function NNe(e,t,n){var r=ki.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function _Ne(e,t,n){var r=ki.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function CNe(e,t,n){var r=uNe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function TNe(e,t,n){var r=ki.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function ENe(e,t,n){var r=ki.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function E$(e,t){return Hn(e.getDate(),t,2)}function ANe(e,t){return Hn(e.getHours(),t,2)}function kNe(e,t){return Hn(e.getHours()%12||12,t,2)}function PNe(e,t){return Hn(1+t0.count(Rc(e),e),t,3)}function sH(e,t){return Hn(e.getMilliseconds(),t,3)}function ONe(e,t){return sH(e,t)+"000"}function DNe(e,t){return Hn(e.getMonth()+1,t,2)}function MNe(e,t){return Hn(e.getMinutes(),t,2)}function INe(e,t){return Hn(e.getSeconds(),t,2)}function RNe(e){var t=e.getDay();return t===0?7:t}function LNe(e,t){return Hn(UN.count(Rc(e)-1,e),t,2)}function oH(e){var t=e.getDay();return t>=4||t===0?yg(e):yg.ceil(e)}function FNe(e,t){return e=oH(e),Hn(yg.count(Rc(e),e)+(Rc(e).getDay()===4),t,2)}function $Ne(e){return e.getDay()}function BNe(e,t){return Hn(mS.count(Rc(e)-1,e),t,2)}function zNe(e,t){return Hn(e.getFullYear()%100,t,2)}function qNe(e,t){return e=oH(e),Hn(e.getFullYear()%100,t,2)}function UNe(e,t){return Hn(e.getFullYear()%1e4,t,4)}function VNe(e,t){var n=e.getDay();return e=n>=4||n===0?yg(e):yg.ceil(e),Hn(e.getFullYear()%1e4,t,4)}function HNe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Hn(t/60|0,"0",2)+Hn(t%60,"0",2)}function A$(e,t){return Hn(e.getUTCDate(),t,2)}function GNe(e,t){return Hn(e.getUTCHours(),t,2)}function WNe(e,t){return Hn(e.getUTCHours()%12||12,t,2)}function KNe(e,t){return Hn(1+qN.count(Lc(e),e),t,3)}function lH(e,t){return Hn(e.getUTCMilliseconds(),t,3)}function YNe(e,t){return lH(e,t)+"000"}function QNe(e,t){return Hn(e.getUTCMonth()+1,t,2)}function XNe(e,t){return Hn(e.getUTCMinutes(),t,2)}function JNe(e,t){return Hn(e.getUTCSeconds(),t,2)}function ZNe(e){var t=e.getUTCDay();return t===0?7:t}function e_e(e,t){return Hn(VN.count(Lc(e)-1,e),t,2)}function cH(e){var t=e.getUTCDay();return t>=4||t===0?vg(e):vg.ceil(e)}function t_e(e,t){return e=cH(e),Hn(vg.count(Lc(e),e)+(Lc(e).getUTCDay()===4),t,2)}function n_e(e){return e.getUTCDay()}function r_e(e,t){return Hn(gS.count(Lc(e)-1,e),t,2)}function i_e(e,t){return Hn(e.getUTCFullYear()%100,t,2)}function a_e(e,t){return e=cH(e),Hn(e.getUTCFullYear()%100,t,2)}function s_e(e,t){return Hn(e.getUTCFullYear()%1e4,t,4)}function o_e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?vg(e):vg.ceil(e),Hn(e.getUTCFullYear()%1e4,t,4)}function l_e(){return"+0000"}function k$(){return"%"}function P$(e){return+e}function O$(e){return Math.floor(+e/1e3)}var Sm,uH,dH;c_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function c_e(e){return Sm=cNe(e),uH=Sm.format,Sm.parse,dH=Sm.utcFormat,Sm.utcParse,Sm}function u_e(e){return new Date(e)}function d_e(e){return e instanceof Date?+e:+new Date(+e)}function WM(e,t,n,r,a,s,o,l,c,u){var f=DM(),p=f.invert,y=f.domain,v=u(".%L"),x=u(":%S"),b=u("%I:%M"),w=u("%I %p"),_=u("%a %d"),T=u("%b %d"),C=u("%B"),O=u("%Y");function E(P){return(c(P)<P?v:l(P)<P?x:o(P)<P?b:s(P)<P?w:r(P)<P?a(P)<P?_:T:n(P)<P?C:O)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?y(Array.from(P,d_e)):y().map(u_e)},f.ticks=function(P){var I=y();return e(I[0],I[I.length-1],P??10)},f.tickFormat=function(P,I){return I==null?E:u(I)},f.nice=function(P){var I=y();return(!P||typeof P.range!="function")&&(P=t(I[0],I[I.length-1],P??10)),P?y(XV(I,P)):f},f.copy=function(){return e0(f,WM(e,t,n,r,a,s,o,l,c,u))},f}function h_e(){return eo.apply(WM(oNe,lNe,Rc,HM,UN,t0,UM,zM,Zh,uH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function f_e(){return eo.apply(WM(aNe,sNe,Lc,GM,VN,qN,VM,qM,Zh,dH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function HN(){var e=0,t=1,n,r,a,s,o=Aa,l=!1,c;function u(p){return p==null||isNaN(p=+p)?c:o(a===0?.5:(p=(s(p)-n)*a,l?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([e,t]=p,n=s(e=+e),r=s(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(p){return arguments.length?(l=!!p,u):l},u.interpolator=function(p){return arguments.length?(o=p,u):o};function f(p){return function(y){var v,x;return arguments.length?([v,x]=y,o=p(v,x),u):[o(0),o(1)]}}return u.range=f(Xg),u.rangeRound=f(OM),u.unknown=function(p){return arguments.length?(c=p,u):c},function(p){return s=p,n=p(e),r=p(t),a=n===r?0:1/(r-n),u}}function Nd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hH(){var e=Sd(HN()(Aa));return e.copy=function(){return Nd(e,hH())},Vc.apply(e,arguments)}function fH(){var e=RM(HN()).domain([1,10]);return e.copy=function(){return Nd(e,fH()).base(e.base())},Vc.apply(e,arguments)}function pH(){var e=LM(HN());return e.copy=function(){return Nd(e,pH()).constant(e.constant())},Vc.apply(e,arguments)}function KM(){var e=FM(HN());return e.copy=function(){return Nd(e,KM()).exponent(e.exponent())},Vc.apply(e,arguments)}function p_e(){return KM.apply(null,arguments).exponent(.5)}function mH(){var e=[],t=Aa;function n(r){if(r!=null&&!isNaN(r=+r))return t((Jb(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ud),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,s)=>eSe(e,s/r))},n.copy=function(){return mH(t).domain(e)},Vc.apply(n,arguments)}function GN(){var e=0,t=.5,n=1,r=1,a,s,o,l,c,u=Aa,f,p=!1,y;function v(b){return isNaN(b=+b)?y:(b=.5+((b=+f(b))-s)*(r*b<r*s?l:c),u(p?Math.max(0,Math.min(1,b)):b))}v.domain=function(b){return arguments.length?([e,t,n]=b,a=f(e=+e),s=f(t=+t),o=f(n=+n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,v):[e,t,n]},v.clamp=function(b){return arguments.length?(p=!!b,v):p},v.interpolator=function(b){return arguments.length?(u=b,v):u};function x(b){return function(w){var _,T,C;return arguments.length?([_,T,C]=w,u=CSe(b,[_,T,C]),v):[u(0),u(.5),u(1)]}}return v.range=x(Xg),v.rangeRound=x(OM),v.unknown=function(b){return arguments.length?(y=b,v):y},function(b){return f=b,a=b(e),s=b(t),o=b(n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,v}}function gH(){var e=Sd(GN()(Aa));return e.copy=function(){return Nd(e,gH())},Vc.apply(e,arguments)}function yH(){var e=RM(GN()).domain([.1,1,10]);return e.copy=function(){return Nd(e,yH()).base(e.base())},Vc.apply(e,arguments)}function vH(){var e=LM(GN());return e.copy=function(){return Nd(e,vH()).constant(e.constant())},Vc.apply(e,arguments)}function YM(){var e=FM(GN());return e.copy=function(){return Nd(e,YM()).exponent(e.exponent())},Vc.apply(e,arguments)}function m_e(){return YM.apply(null,arguments).exponent(.5)}const D$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Zx,scaleDiverging:gH,scaleDivergingLog:yH,scaleDivergingPow:YM,scaleDivergingSqrt:m_e,scaleDivergingSymlog:vH,scaleIdentity:QV,scaleImplicit:tO,scaleLinear:fS,scaleLog:JV,scaleOrdinal:AM,scalePoint:kx,scalePow:$M,scaleQuantile:tH,scaleQuantize:nH,scaleRadial:eH,scaleSequential:hH,scaleSequentialLog:fH,scaleSequentialPow:KM,scaleSequentialQuantile:mH,scaleSequentialSqrt:p_e,scaleSequentialSymlog:pH,scaleSqrt:YSe,scaleSymlog:ZV,scaleThreshold:rH,scaleTime:h_e,scaleUtc:f_e,tickFormat:YV},Symbol.toStringTag,{value:"Module"}));var wA,M$;function WN(){if(M$)return wA;M$=1;var e=Wg();function t(n,r,a){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=r(l);if(c!=null&&(u===void 0?c===c&&!e(c):a(c,u)))var u=c,f=l}return f}return wA=t,wA}var SA,I$;function xH(){if(I$)return SA;I$=1;function e(t,n){return t>n}return SA=e,SA}var NA,R$;function g_e(){if(R$)return NA;R$=1;var e=WN(),t=xH(),n=Qg();function r(a){return a&&a.length?e(a,n,t):void 0}return NA=r,NA}var y_e=g_e();const od=Bn(y_e);var _A,L$;function bH(){if(L$)return _A;L$=1;function e(t,n){return t<n}return _A=e,_A}var CA,F$;function v_e(){if(F$)return CA;F$=1;var e=WN(),t=bH(),n=Qg();function r(a){return a&&a.length?e(a,n,t):void 0}return CA=r,CA}var x_e=v_e();const KN=Bn(x_e);var TA,$$;function b_e(){if($$)return TA;$$=1;var e=dM(),t=Rl(),n=EV(),r=is();function a(s,o){var l=r(s)?e:n;return l(s,t(o,3))}return TA=a,TA}var EA,B$;function j_e(){if(B$)return EA;B$=1;var e=CV(),t=b_e();function n(r,a){return e(t(r,a),1)}return EA=n,EA}var w_e=j_e();const S_e=Bn(w_e);var AA,z$;function N_e(){if(z$)return AA;z$=1;var e=NM();function t(n,r){return e(n,r)}return AA=t,AA}var __e=N_e();const kf=Bn(__e);var Jg=1e9,C_e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},XM,Rr=!0,Js="[DecimalError] ",pf=Js+"Invalid argument: ",QM=Js+"Exponent out of range: ",Zg=Math.floor,Vh=Math.pow,T_e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,js,Ti=1e7,Pr=7,jH=9007199254740991,yS=Zg(jH/Pr),Ot={};Ot.absoluteValue=Ot.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ot.comparedTo=Ot.cmp=function(e){var t,n,r,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===a?0:r>a^s.s<0?1:-1};Ot.decimalPlaces=Ot.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Pr;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ot.dividedBy=Ot.div=function(e){return Ec(this,new this.constructor(e))};Ot.dividedToIntegerBy=Ot.idiv=function(e){var t=this,n=t.constructor;return xr(Ec(t,new n(e),0,1),n.precision)};Ot.equals=Ot.eq=function(e){return!this.cmp(e)};Ot.exponent=function(){return fi(this)};Ot.greaterThan=Ot.gt=function(e){return this.cmp(e)>0};Ot.greaterThanOrEqualTo=Ot.gte=function(e){return this.cmp(e)>=0};Ot.isInteger=Ot.isint=function(){return this.e>this.d.length-2};Ot.isNegative=Ot.isneg=function(){return this.s<0};Ot.isPositive=Ot.ispos=function(){return this.s>0};Ot.isZero=function(){return this.s===0};Ot.lessThan=Ot.lt=function(e){return this.cmp(e)<0};Ot.lessThanOrEqualTo=Ot.lte=function(e){return this.cmp(e)<1};Ot.logarithm=Ot.log=function(e){var t,n=this,r=n.constructor,a=r.precision,s=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(js))throw Error(Js+"NaN");if(n.s<1)throw Error(Js+(n.s?"NaN":"-Infinity"));return n.eq(js)?new r(0):(Rr=!1,t=Ec(ib(n,s),ib(e,s),s),Rr=!0,xr(t,a))};Ot.minus=Ot.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?NH(t,e):wH(t,(e.s=-e.s,e))};Ot.modulo=Ot.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(Js+"NaN");return n.s?(Rr=!1,t=Ec(n,e,0,1).times(e),Rr=!0,n.minus(t)):xr(new r(n),a)};Ot.naturalExponential=Ot.exp=function(){return SH(this)};Ot.naturalLogarithm=Ot.ln=function(){return ib(this)};Ot.negated=Ot.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ot.plus=Ot.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wH(t,e):NH(t,(e.s=-e.s,e))};Ot.precision=Ot.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(pf+e);if(t=fi(a)+1,r=a.d.length-1,n=r*Pr+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ot.squareRoot=Ot.sqrt=function(){var e,t,n,r,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Js+"NaN")}for(e=fi(l),Rr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=_l(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Zg((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(s=r,r=s.plus(Ec(l,s,o+2)).times(.5),_l(s.d).slice(0,o)===(t=_l(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(xr(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(t!="9999")break;o+=4}return Rr=!0,xr(r,n)};Ot.times=Ot.mul=function(e){var t,n,r,a,s,o,l,c,u,f=this,p=f.constructor,y=f.d,v=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,n=f.e+e.e,c=y.length,u=v.length,c<u&&(s=y,y=v,v=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=s[a]+v[r]*y[a-r-1]+t,s[a--]=l%Ti|0,t=l/Ti|0;s[a]=(s[a]+t)%Ti|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Rr?xr(e,p.precision):e};Ot.toDecimalPlaces=Ot.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ol(e,0,Jg),t===void 0?t=r.rounding:Ol(t,0,8),xr(n,e+fi(n)+1,t))};Ot.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Pf(r,!0):(Ol(e,0,Jg),t===void 0?t=a.rounding:Ol(t,0,8),r=xr(new a(r),e+1,t),n=Pf(r,!0,e+1)),n};Ot.toFixed=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?Pf(a):(Ol(e,0,Jg),t===void 0?t=s.rounding:Ol(t,0,8),r=xr(new s(a),e+fi(a)+1,t),n=Pf(r.abs(),!1,e+fi(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};Ot.toInteger=Ot.toint=function(){var e=this,t=e.constructor;return xr(new t(e),fi(e)+1,t.rounding)};Ot.toNumber=function(){return+this};Ot.toPower=Ot.pow=function(e){var t,n,r,a,s,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(js);if(l=new c(l),!l.s){if(e.s<1)throw Error(Js+"Infinity");return l}if(l.eq(js))return l;if(r=c.precision,e.eq(js))return xr(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,s=l.s,o){if((n=f<0?-f:f)<=jH){for(a=new c(js),t=Math.ceil(r/Pr+4),Rr=!1;n%2&&(a=a.times(l),U$(a.d,t)),n=Zg(n/2),n!==0;)l=l.times(l),U$(l.d,t);return Rr=!0,e.s<0?new c(js).div(a):xr(a,r)}}else if(s<0)throw Error(Js+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Rr=!1,a=e.times(ib(l,r+u)),Rr=!0,a=SH(a),a.s=s,a};Ot.toPrecision=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?(n=fi(a),r=Pf(a,n<=s.toExpNeg||n>=s.toExpPos)):(Ol(e,1,Jg),t===void 0?t=s.rounding:Ol(t,0,8),a=xr(new s(a),e,t),n=fi(a),r=Pf(a,e<=n||n<=s.toExpNeg,e)),r};Ot.toSignificantDigits=Ot.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ol(e,1,Jg),t===void 0?t=r.rounding:Ol(t,0,8)),xr(new r(n),e,t)};Ot.toString=Ot.valueOf=Ot.val=Ot.toJSON=Ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=fi(e),n=e.constructor;return Pf(e,t<=n.toExpNeg||t>=n.toExpPos)};function wH(e,t){var n,r,a,s,o,l,c,u,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Rr?xr(t,p):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(p/Pr),l=o>l?o+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/Ti|0,c[s]%=Ti;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Rr?xr(t,p):t}function Ol(e,t,n){if(e!==~~e||e<t||e>n)throw Error(pf+e)}function _l(e){var t,n,r,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)r=e[t]+"",n=Pr-r.length,n&&(s+=Yu(n)),s+=r;o=e[t],r=o+"",n=Pr-r.length,n&&(s+=Yu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Ec=function(){function e(r,a){var s,o=0,l=r.length;for(r=r.slice();l--;)s=r[l]*a+o,r[l]=s%Ti|0,o=s/Ti|0;return o&&r.unshift(o),r}function t(r,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,s){for(var o=0;s--;)r[s]-=o,o=r[s]<a[s]?1:0,r[s]=o*Ti+r[s]-a[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,s,o){var l,c,u,f,p,y,v,x,b,w,_,T,C,O,E,P,I,F,$=r.constructor,z=r.s==a.s?1:-1,L=r.d,H=a.d;if(!r.s)return new $(r);if(!a.s)throw Error(Js+"Division by zero");for(c=r.e-a.e,I=H.length,E=L.length,v=new $(z),x=v.d=[],u=0;H[u]==(L[u]||0);)++u;if(H[u]>(L[u]||0)&&--c,s==null?T=s=$.precision:o?T=s+(fi(r)-fi(a))+1:T=s,T<0)return new $(0);if(T=T/Pr+2|0,u=0,I==1)for(f=0,H=H[0],T++;(u<E||f)&&T--;u++)C=f*Ti+(L[u]||0),x[u]=C/H|0,f=C%H|0;else{for(f=Ti/(H[0]+1)|0,f>1&&(H=e(H,f),L=e(L,f),I=H.length,E=L.length),O=I,b=L.slice(0,I),w=b.length;w<I;)b[w++]=0;F=H.slice(),F.unshift(0),P=H[0],H[1]>=Ti/2&&++P;do f=0,l=t(H,b,I,w),l<0?(_=b[0],I!=w&&(_=_*Ti+(b[1]||0)),f=_/P|0,f>1?(f>=Ti&&(f=Ti-1),p=e(H,f),y=p.length,w=b.length,l=t(p,b,y,w),l==1&&(f--,n(p,I<y?F:H,y))):(f==0&&(l=f=1),p=H.slice()),y=p.length,y<w&&p.unshift(0),n(b,p,w),l==-1&&(w=b.length,l=t(H,b,I,w),l<1&&(f++,n(b,I<w?F:H,w))),w=b.length):l===0&&(f++,b=[0]),x[u++]=f,l&&b[0]?b[w++]=L[O]||0:(b=[L[O]],w=1);while((O++<E||b[0]!==void 0)&&T--)}return x[0]||x.shift(),v.e=c,xr(v,o?s+fi(v)+1:s)}}();function SH(e,t){var n,r,a,s,o,l,c=0,u=0,f=e.constructor,p=f.precision;if(fi(e)>16)throw Error(QM+fi(e));if(!e.s)return new f(js);for(Rr=!1,l=p,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(Vh(2,u))/Math.LN10*2+5|0,l+=r,n=a=s=new f(js),f.precision=l;;){if(a=xr(a.times(e),l),n=n.times(++c),o=s.plus(Ec(a,n,l)),_l(o.d).slice(0,l)===_l(s.d).slice(0,l)){for(;u--;)s=xr(s.times(s),l);return f.precision=p,t==null?(Rr=!0,xr(s,p)):s}s=o}}function fi(e){for(var t=e.e*Pr,n=e.d[0];n>=10;n/=10)t++;return t}function kA(e,t,n){if(t>e.LN10.sd())throw Rr=!0,n&&(e.precision=n),Error(Js+"LN10 precision limit exceeded");return xr(new e(e.LN10),t)}function Yu(e){for(var t="";e--;)t+="0";return t}function ib(e,t){var n,r,a,s,o,l,c,u,f,p=1,y=10,v=e,x=v.d,b=v.constructor,w=b.precision;if(v.s<1)throw Error(Js+(v.s?"NaN":"-Infinity"));if(v.eq(js))return new b(0);if(t==null?(Rr=!1,u=w):u=t,v.eq(10))return t==null&&(Rr=!0),kA(b,u);if(u+=y,b.precision=u,n=_l(x),r=n.charAt(0),s=fi(v),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(e),n=_l(v.d),r=n.charAt(0),p++;s=fi(v),r>1?(v=new b("0."+n),s++):v=new b(r+"."+n.slice(1))}else return c=kA(b,u+2,w).times(s+""),v=ib(new b(r+"."+n.slice(1)),u-y).plus(c),b.precision=w,t==null?(Rr=!0,xr(v,w)):v;for(l=o=v=Ec(v.minus(js),v.plus(js),u),f=xr(v.times(v),u),a=3;;){if(o=xr(o.times(f),u),c=l.plus(Ec(o,new b(a),u)),_l(c.d).slice(0,u)===_l(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(kA(b,u+2,w).times(s+""))),l=Ec(l,new b(p),u),b.precision=w,t==null?(Rr=!0,xr(l,w)):l;l=c,a+=2}}function q$(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=Zg(n/Pr),e.d=[],r=(n+1)%Pr,n<0&&(r+=Pr),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=Pr;r<a;)e.d.push(+t.slice(r,r+=Pr));t=t.slice(r),r=Pr-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),Rr&&(e.e>yS||e.e<-yS))throw Error(QM+n)}else e.s=0,e.e=0,e.d=[0];return e}function xr(e,t,n){var r,a,s,o,l,c,u,f,p=e.d;for(o=1,s=p[0];s>=10;s/=10)o++;if(r=t-o,r<0)r+=Pr,a=t,u=p[f=0];else{if(f=Math.ceil((r+1)/Pr),s=p.length,f>=s)return e;for(u=s=p[f],o=1;s>=10;s/=10)o++;r%=Pr,a=r-Pr+o}if(n!==void 0&&(s=Vh(10,o-a-1),l=u/s%10|0,c=t<0||p[f+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/Vh(10,o-a):0:p[f-1])%10&1||n==(e.s<0?8:7))),t<1||!p[0])return c?(s=fi(e),p.length=1,t=t-s-1,p[0]=Vh(10,(Pr-t%Pr)%Pr),e.e=Zg(-t/Pr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(r==0?(p.length=f,s=1,f--):(p.length=f+1,s=Vh(10,Pr-r),p[f]=a>0?(u/Vh(10,o-a)%Vh(10,a)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==Ti&&(p[0]=1,++e.e);break}else{if(p[f]+=s,p[f]!=Ti)break;p[f--]=0,s=1}for(r=p.length;p[--r]===0;)p.pop();if(Rr&&(e.e>yS||e.e<-yS))throw Error(QM+fi(e));return e}function NH(e,t){var n,r,a,s,o,l,c,u,f,p,y=e.constructor,v=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Rr?xr(t,v):t;if(c=e.d,p=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(f=o<0,f?(n=c,o=-o,l=p.length):(n=p,r=u,l=c.length),a=Math.max(Math.ceil(v/Pr),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=p.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(c[a]!=p[a]){f=c[a]<p[a];break}o=0}for(f&&(n=c,c=p,p=n,t.s=-t.s),l=c.length,a=p.length-l;a>0;--a)c[l++]=0;for(a=p.length;a>o;){if(c[--a]<p[a]){for(s=a;s&&c[--s]===0;)c[s]=Ti-1;--c[s],c[a]+=Ti}c[a]-=p[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Rr?xr(t,v):t):new y(0)}function Pf(e,t,n){var r,a=fi(e),s=_l(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Yu(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Yu(-a-1)+s,n&&(r=n-o)>0&&(s+=Yu(r))):a>=o?(s+=Yu(a+1-o),n&&(r=n-a-1)>0&&(s=s+"."+Yu(r))):((r=a+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(s+="."),s+=Yu(r))),e.s<0?"-"+s:s}function U$(e,t){if(e.length>t)return e.length=t,!0}function _H(e){var t,n,r;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(pf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return q$(o,s.toString())}else if(typeof s!="string")throw Error(pf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,T_e.test(s))q$(o,s);else throw Error(pf+s)}if(a.prototype=Ot,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=_H,a.config=a.set=E_e,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function E_e(e){if(!e||typeof e!="object")throw Error(Js+"Object expected");var t,n,r,a=["precision",1,Jg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(Zg(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(pf+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(pf+n+": "+r);return this}var XM=_H(C_e);js=new XM(1);const pr=XM;function A_e(e){return D_e(e)||O_e(e)||P_e(e)||k_e()}function k_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P_e(e,t){if(e){if(typeof e=="string")return aO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aO(e,t)}}function O_e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function D_e(e){if(Array.isArray(e))return aO(e)}function aO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M_e=function(t){return t},CH={},TH=function(t){return t===CH},V$=function(t){return function n(){return arguments.length===0||arguments.length===1&&TH(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},I_e=function e(t,n){return t===1?n:V$(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==CH}).length;return o>=t?n.apply(void 0,a):e(t-o,V$(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=a.map(function(p){return TH(p)?c.shift():p});return n.apply(void 0,A_e(f).concat(c))}))})},YN=function(t){return I_e(t.length,t)},sO=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},R_e=YN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),L_e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return M_e;var a=n.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},oO=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},EH=function(t){var n=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=t.apply(void 0,s)),r}};function F_e(e){var t;return e===0?t=1:t=Math.floor(new pr(e).abs().log(10).toNumber())+1,t}function $_e(e,t,n){for(var r=new pr(e),a=0,s=[];r.lt(t)&&a<1e5;)s.push(r.toNumber()),r=r.add(n),a++;return s}var B_e=YN(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),z_e=YN(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),q_e=YN(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const QN={rangeStep:$_e,getDigitCount:F_e,interpolateNumber:B_e,uninterpolateNumber:z_e,uninterpolateTruncation:q_e};function lO(e){return H_e(e)||V_e(e)||AH(e)||U_e()}function U_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V_e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function H_e(e){if(Array.isArray(e))return cO(e)}function ab(e,t){return K_e(e)||W_e(e,t)||AH(e,t)||G_e()}function G_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AH(e,t){if(e){if(typeof e=="string")return cO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cO(e,t)}}function cO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W_e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw s}}return n}}function K_e(e){if(Array.isArray(e))return e}function kH(e){var t=ab(e,2),n=t[0],r=t[1],a=n,s=r;return n>r&&(a=r,s=n),[a,s]}function PH(e,t,n){if(e.lte(0))return new pr(0);var r=QN.getDigitCount(e.toNumber()),a=new pr(10).pow(r),s=e.div(a),o=r!==1?.05:.1,l=new pr(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new pr(Math.ceil(c))}function Y_e(e,t,n){var r=1,a=new pr(e);if(!a.isint()&&n){var s=Math.abs(e);s<1?(r=new pr(10).pow(QN.getDigitCount(e)-1),a=new pr(Math.floor(a.div(r).toNumber())).mul(r)):s>1&&(a=new pr(Math.floor(e)))}else e===0?a=new pr(Math.floor((t-1)/2)):n||(a=new pr(Math.floor(e)));var o=Math.floor((t-1)/2),l=L_e(R_e(function(c){return a.add(new pr(c-o).mul(r)).toNumber()}),sO);return l(0,t)}function OH(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new pr(0),tickMin:new pr(0),tickMax:new pr(0)};var s=PH(new pr(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new pr(0):(o=new pr(e).add(t).div(2),o=o.sub(new pr(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new pr(t).sub(o).div(s).toNumber()),u=l+c+1;return u>n?OH(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:s,tickMin:o.sub(new pr(l).mul(s)),tickMax:o.add(new pr(c).mul(s))})}function Q_e(e){var t=ab(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=kH([n,r]),c=ab(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var p=f===1/0?[u].concat(lO(sO(0,a-1).map(function(){return 1/0}))):[].concat(lO(sO(0,a-1).map(function(){return-1/0})),[f]);return n>r?oO(p):p}if(u===f)return Y_e(u,a,s);var y=OH(u,f,o,s),v=y.step,x=y.tickMin,b=y.tickMax,w=QN.rangeStep(x,b.add(new pr(.1).mul(v)),v);return n>r?oO(w):w}function X_e(e,t){var n=ab(e,2),r=n[0],a=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=kH([r,a]),l=ab(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var f=Math.max(t,2),p=PH(new pr(u).sub(c).div(f-1),s,0),y=[].concat(lO(QN.rangeStep(new pr(c),new pr(u).sub(new pr(.99).mul(p)),p)),[u]);return r>a?oO(y):y}var J_e=EH(Q_e),Z_e=EH(X_e),eCe="Invariant failed";function Of(e,t){throw new Error(eCe)}var tCe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vS.apply(this,arguments)}function nCe(e,t){return sCe(e)||aCe(e,t)||iCe(e,t)||rCe()}function rCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iCe(e,t){if(e){if(typeof e=="string")return H$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H$(e,t)}}function H$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function sCe(e){if(Array.isArray(e))return e}function oCe(e,t){if(e==null)return{};var n=lCe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lCe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function cCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IH(r.key),r)}}function dCe(e,t,n){return t&&uCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hCe(e,t,n){return t=xS(t),fCe(e,DH()?Reflect.construct(t,n||[],xS(e).constructor):t.apply(e,n))}function fCe(e,t){if(t&&(xg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pCe(e)}function pCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DH=function(){return!!e})()}function xS(e){return xS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xS(e)}function mCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uO(e,t)}function uO(e,t){return uO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},uO(e,t)}function MH(e,t,n){return t=IH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IH(e){var t=gCe(e,"string");return xg(t)=="symbol"?t:t+""}function gCe(e,t){if(xg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var n0=function(e){function t(){return cCe(this,t),hCe(this,t,arguments)}return mCe(t,e),dCe(t,[{key:"render",value:function(){var r=this.props,a=r.offset,s=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,f=r.xAxis,p=r.yAxis,y=oCe(r,tCe),v=Ft(y,!1);this.props.direction==="x"&&f.type!=="number"&&Of();var x=c.map(function(b){var w=u(b,l),_=w.x,T=w.y,C=w.value,O=w.errorVal;if(!O)return null;var E=[],P,I;if(Array.isArray(O)){var F=nCe(O,2);P=F[0],I=F[1]}else P=I=O;if(s==="vertical"){var $=f.scale,z=T+a,L=z+o,H=z-o,V=$(C-P),ne=$(C+I);E.push({x1:ne,y1:L,x2:ne,y2:H}),E.push({x1:V,y1:z,x2:ne,y2:z}),E.push({x1:V,y1:L,x2:V,y2:H})}else if(s==="horizontal"){var Z=p.scale,q=_+a,K=q-o,se=q+o,G=Z(C-P),B=Z(C+I);E.push({x1:K,y1:B,x2:se,y2:B}),E.push({x1:q,y1:G,x2:q,y2:B}),E.push({x1:K,y1:G,x2:se,y2:G})}return ye.createElement(On,vS({className:"recharts-errorBar",key:"bar-".concat(E.map(function(fe){return"".concat(fe.x1,"-").concat(fe.x2,"-").concat(fe.y1,"-").concat(fe.y2)}))},v),E.map(function(fe){return ye.createElement("line",vS({},fe,{key:"line-".concat(fe.x1,"-").concat(fe.x2,"-").concat(fe.y1,"-").concat(fe.y2)}))}))});return ye.createElement(On,{className:"recharts-errorBars"},x)}}])}(ye.Component);MH(n0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});MH(n0,"displayName","ErrorBar");function sb(e){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sb(e)}function G$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Bh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G$(Object(n),!0).forEach(function(r){yCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yCe(e,t,n){return t=vCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vCe(e){var t=xCe(e,"string");return sb(t)=="symbol"?t:t+""}function xCe(e,t){if(sb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(sb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RH=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,s=t.legendContent,o=xs(n,Tc);if(!o)return null;var l=Tc.defaultProps,c=l!==void 0?Bh(Bh({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(f,p){var y=p.item,v=p.props,x=v.sectors||v.data||[];return f.concat(x.map(function(b){return{type:o.props.iconType||y.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):u=(r||[]).map(function(f){var p=f.item,y=p.type.defaultProps,v=y!==void 0?Bh(Bh({},y),p.props):{},x=v.dataKey,b=v.name,w=v.legendType,_=v.hide;return{inactive:_,dataKey:x,type:c.iconType||w||"square",color:JM(p),value:b||x,payload:v}}),Bh(Bh(Bh({},c),Tc.getWithHeight(o,a)),{},{payload:u,item:o})};function ob(e){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ob(e)}function W$(e){return SCe(e)||wCe(e)||jCe(e)||bCe()}function bCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jCe(e,t){if(e){if(typeof e=="string")return dO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dO(e,t)}}function wCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SCe(e){if(Array.isArray(e))return dO(e)}function dO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K$(Object(n),!0).forEach(function(r){Vm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vm(e,t,n){return t=NCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NCe(e){var t=_Ce(e,"string");return ob(t)=="symbol"?t:t+""}function _Ce(e,t){if(ob(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ob(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ri(e,t,n){return cn(e)||cn(t)?n:bi(t)?Cs(e,t,n):tn(t)?t(e):n}function Px(e,t,n,r){var a=S_e(e,function(l){return ri(l,t)});if(n==="number"){var s=a.filter(function(l){return yt(l)||parseFloat(l)});return s.length?[KN(s),od(s)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!cn(l)}):a;return o.map(function(l){return bi(l)||l instanceof Date?l:""})}var CCe=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var f=u>0?a[u-1].coordinate:a[l-1].coordinate,p=a[u].coordinate,y=u>=l-1?a[0].coordinate:a[u+1].coordinate,v=void 0;if(Ta(p-f)!==Ta(y-p)){var x=[];if(Ta(y-p)===Ta(c[1]-c[0])){v=y;var b=p+c[1]-c[0];x[0]=Math.min(b,(b+f)/2),x[1]=Math.max(b,(b+f)/2)}else{v=f;var w=y+c[1]-c[0];x[0]=Math.min(p,(w+p)/2),x[1]=Math.max(p,(w+p)/2)}var _=[Math.min(p,(v+p)/2),Math.max(p,(v+p)/2)];if(t>_[0]&&t<=_[1]||t>=x[0]&&t<=x[1]){o=a[u].index;break}}else{var T=Math.min(f,y),C=Math.max(f,y);if(t>(T+p)/2&&t<=(C+p)/2){o=a[u].index;break}}}else for(var O=0;O<l;O++)if(O===0&&t<=(r[O].coordinate+r[O+1].coordinate)/2||O>0&&O<l-1&&t>(r[O].coordinate+r[O-1].coordinate)/2&&t<=(r[O].coordinate+r[O+1].coordinate)/2||O===l-1&&t>(r[O].coordinate+r[O-1].coordinate)/2){o=r[O].index;break}return o},JM=function(t){var n,r=t,a=r.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Gr(Gr({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},TCe=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var f=s[l[c]].stackGroups,p=Object.keys(f),y=0,v=p.length;y<v;y++){var x=f[p[y]],b=x.items,w=x.cateAxisId,_=b.filter(function(I){return Cc(I.type).indexOf("Bar")>=0});if(_&&_.length){var T=_[0].type.defaultProps,C=T!==void 0?Gr(Gr({},T),_[0].props):_[0].props,O=C.barSize,E=C[w];o[E]||(o[E]=[]);var P=cn(O)?n:O;o[E].push({item:_[0],stackList:_.slice(1),barSize:cn(P)?void 0:Ea(P,r,0)})}}return o},ECe=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Ea(n,a,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var y=!1,v=a/c,x=o.reduce(function(O,E){return O+E.barSize||0},0);x+=(c-1)*u,x>=a&&(x-=(c-1)*u,u=0),x>=a&&v>0&&(y=!0,v*=.9,x=c*v);var b=(a-x)/2>>0,w={offset:b-u,size:0};f=o.reduce(function(O,E){var P={item:E.item,position:{offset:w.offset+w.size+u,size:y?v:E.barSize}},I=[].concat(W$(O),[P]);return w=I[I.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(F){I.push({item:F,position:w})}),I},p)}else{var _=Ea(r,a,0,!0);a-2*_-(c-1)*u<=0&&(u=0);var T=(a-2*_-(c-1)*u)/c;T>1&&(T>>=0);var C=l===+l?Math.min(T,l):T;f=o.reduce(function(O,E,P){var I=[].concat(W$(O),[{item:E.item,position:{offset:_+(T+u)*P+(T-C)/2,size:C}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(F){I.push({item:F,position:I[I.length-1].position})}),I},p)}return f},ACe=function(t,n,r,a){var s=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=RH({children:s,legendWidth:c});if(u){var f=a||{},p=f.width,y=f.height,v=u.align,x=u.verticalAlign,b=u.layout;if((b==="vertical"||b==="horizontal"&&x==="middle")&&v!=="center"&&yt(t[v]))return Gr(Gr({},t),{},Vm({},v,t[v]+(p||0)));if((b==="horizontal"||b==="vertical"&&v==="center")&&x!=="middle"&&yt(t[x]))return Gr(Gr({},t),{},Vm({},x,t[x]+(y||0)))}return t},kCe=function(t,n,r){return cn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},LH=function(t,n,r,a,s){var o=n.props.children,l=Ts(o,n0).filter(function(u){return kCe(a,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var p=ri(f,r);if(cn(p))return u;var y=Array.isArray(p)?[KN(p),od(p)]:[p,p],v=c.reduce(function(x,b){var w=ri(f,b,0),_=y[0]-Math.abs(Array.isArray(w)?w[0]:w),T=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(_,x[0]),Math.max(T,x[1])]},[1/0,-1/0]);return[Math.min(v[0],u[0]),Math.max(v[1],u[1])]},[1/0,-1/0])}return null},PCe=function(t,n,r,a,s){var o=n.map(function(l){return LH(t,l,r,s,a)}).filter(function(l){return!cn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},FH=function(t,n,r,a,s){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&LH(t,c,u,a)||Px(t,u,r,s)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,p=u.length;f<p;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},$H=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},BH=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(r),l},wc=function(t,n,r){if(!t)return null;var a=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ta(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(p){var y=s?s.indexOf(p):p;return{coordinate:a(y)+u,value:p,offset:u}});return f.filter(function(p){return!Yg(p.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(p,y){return{coordinate:a(p)+u,value:p,index:y,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(p){return{coordinate:a(p)+u,value:p,offset:u}}):a.domain().map(function(p,y){return{coordinate:a(p)+u,value:s?s[p]:p,index:y,offset:u}})},PA=new WeakMap,Qj=function(t,n){if(typeof n!="function")return t;PA.has(t)||PA.set(t,new WeakMap);var r=PA.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},zH=function(t,n,r){var a=t.scale,s=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Zx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:fS(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:kx(),realScaleType:"point"}:s==="category"?{scale:Zx(),realScaleType:"band"}:{scale:fS(),realScaleType:"linear"};if(Tf(a)){var c="scale".concat(MN(a));return{scale:(D$[c]||kx)(),realScaleType:D$[c]?c:"point"}}return tn(a)?{scale:a}:{scale:kx(),realScaleType:"point"}},Y$=1e-4,qH=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),s=Math.min(a[0],a[1])-Y$,o=Math.max(a[0],a[1])+Y$,l=t(n[0]),c=t(n[r-1]);(l<s||l>o||c<s||c>o)&&t.domain([n[0],n[r-1]])}},OCe=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},DCe=function(t,n){if(!n||n.length!==2||!yt(n[0])||!yt(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!yt(t[0])||t[0]<r)&&(s[0]=r),(!yt(t[1])||t[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},MCe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0,l=0;l<n;++l){var c=Yg(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=s,t[l][r][1]=s+c,s=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},ICe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0;o<n;++o){var l=Yg(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},RCe={sign:MCe,expand:S0e,none:dg,silhouette:N0e,wiggle:_0e,positive:ICe},LCe=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),s=RCe[r],o=w0e().keys(a).value(function(l,c){return+ri(l,c,0)}).order(zP).offset(s);return o(t)},FCe=function(t,n,r,a,s,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(p,y){var v,x=(v=y.type)!==null&&v!==void 0&&v.defaultProps?Gr(Gr({},y.type.defaultProps),y.props):y.props,b=x.stackId,w=x.hide;if(w)return p;var _=x[r],T=p[_]||{hasStack:!1,stackGroups:{}};if(bi(b)){var C=T.stackGroups[b]||{numericAxisId:r,cateAxisId:a,items:[]};C.items.push(y),T.hasStack=!0,T.stackGroups[b]=C}else T.stackGroups[Lf("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[y]};return Gr(Gr({},p),{},Vm({},_,T))},c),f={};return Object.keys(u).reduce(function(p,y){var v=u[y];if(v.hasStack){var x={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(b,w){var _=v.stackGroups[w];return Gr(Gr({},b),{},Vm({},w,{numericAxisId:r,cateAxisId:a,items:_.items,stackedData:LCe(t,_.items,s)}))},x)}return Gr(Gr({},p),{},Vm({},y,v))},f)},UH=function(t,n){var r=n.realScaleType,a=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=J_e(u,s,l);return t.domain([KN(f),od(f)]),{niceTicks:f}}if(s&&a==="number"){var p=t.domain(),y=Z_e(p,s,l);return{niceTicks:y}}return null};function bS(e){var t=e.axis,n=e.ticks,r=e.bandSize,a=e.entry,s=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!cn(a[t.dataKey])){var l=Yw(n,"value",a[t.dataKey]);if(l)return l.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var c=ri(a,cn(o)?t.dataKey:o);return cn(c)?null:t.scale(c)}var Q$=function(t){var n=t.axis,r=t.ticks,a=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=ri(o,n.dataKey,n.domain[l]);return cn(c)?null:n.scale(c)-s/2+a},$Ce=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},BCe=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Gr(Gr({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(bi(s)){var o=n[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},zCe=function(t){return t.reduce(function(n,r){return[KN(r.concat([n[0]]).filter(yt)),od(r.concat([n[1]]).filter(yt))]},[1/0,-1/0])},VH=function(t,n,r){return Object.keys(t).reduce(function(a,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,f){var p=zCe(f.slice(n,r+1));return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},X$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,J$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hO=function(t,n,r){if(tn(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(yt(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(X$.test(t[0])){var s=+X$.exec(t[0])[1];a[0]=n[0]-s}else tn(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(yt(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(J$.test(t[1])){var o=+J$.exec(t[1])[1];a[1]=n[1]+o}else tn(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},jS=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var s=CM(n,function(p){return p.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],f=s[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},Z$=function(t,n,r){return!t||!t.length||kf(t,Cs(r,"type.defaultProps.domain"))?n:t},HH=function(t,n){var r=t.type.defaultProps?Gr(Gr({},t.type.defaultProps),t.props):t.props,a=r.dataKey,s=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,f=r.hide;return Gr(Gr({},Ft(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:JM(t),value:ri(n,a),type:c,payload:n,chartType:u,hide:f})};function lb(e){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lb(e)}function e8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e8(Object(n),!0).forEach(function(r){GH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GH(e,t,n){return t=qCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qCe(e){var t=UCe(e,"string");return lb(t)=="symbol"?t:t+""}function UCe(e,t){if(lb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(lb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VCe(e,t){return KCe(e)||WCe(e,t)||GCe(e,t)||HCe()}function HCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GCe(e,t){if(e){if(typeof e=="string")return t8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t8(e,t)}}function t8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function WCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function KCe(e){if(Array.isArray(e))return e}var wS=Math.PI/180,YCe=function(t){return t*180/Math.PI},Ar=function(t,n,r,a){return{x:t+Math.cos(-wS*a)*r,y:n+Math.sin(-wS*a)*r}},WH=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},QCe=function(t,n,r,a,s){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,f=Ea(t.cx,o,o/2),p=Ea(t.cy,l,l/2),y=WH(o,l,r),v=Ea(t.innerRadius,y,0),x=Ea(t.outerRadius,y,y*.8),b=Object.keys(n);return b.reduce(function(w,_){var T=n[_],C=T.domain,O=T.reversed,E;if(cn(T.range))a==="angleAxis"?E=[c,u]:a==="radiusAxis"&&(E=[v,x]),O&&(E=[E[1],E[0]]);else{E=T.range;var P=E,I=VCe(P,2);c=I[0],u=I[1]}var F=zH(T,s),$=F.realScaleType,z=F.scale;z.domain(C).range(E),qH(z);var L=UH(z,fc(fc({},T),{},{realScaleType:$})),H=fc(fc(fc({},T),L),{},{range:E,radius:x,realScaleType:$,scale:z,cx:f,cy:p,innerRadius:v,outerRadius:x,startAngle:c,endAngle:u});return fc(fc({},w),{},GH({},_,H))},{})},XCe=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(a-o,2))},JCe=function(t,n){var r=t.x,a=t.y,s=n.cx,o=n.cy,l=XCe({x:r,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:YCe(u),angleInRadian:u}},ZCe=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(a,s);return{startAngle:n-o*360,endAngle:r-o*360}},e2e=function(t,n){var r=n.startAngle,a=n.endAngle,s=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(s,o);return t+l*360},n8=function(t,n){var r=t.x,a=t.y,s=JCe({x:r,y:a},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=ZCe(n),p=f.startAngle,y=f.endAngle,v=l,x;if(p<=y){for(;v>y;)v-=360;for(;v<p;)v+=360;x=v>=p&&v<=y}else{for(;v>p;)v-=360;for(;v<y;)v+=360;x=v>=y&&v<=p}return x?fc(fc({},n),{},{radius:o,angle:e2e(v,n)}):null},KH=function(t){return!j.isValidElement(t)&&!tn(t)&&typeof t!="boolean"?t.className:""};function cb(e){"@babel/helpers - typeof";return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cb(e)}var t2e=["offset"];function n2e(e){return s2e(e)||a2e(e)||i2e(e)||r2e()}function r2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i2e(e,t){if(e){if(typeof e=="string")return fO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fO(e,t)}}function a2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function s2e(e){if(Array.isArray(e))return fO(e)}function fO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o2e(e,t){if(e==null)return{};var n=l2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function l2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function r8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r8(Object(n),!0).forEach(function(r){c2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c2e(e,t,n){return t=u2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u2e(e){var t=d2e(e,"string");return cb(t)=="symbol"?t:t+""}function d2e(e,t){if(cb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ub.apply(this,arguments)}var h2e=function(t){var n=t.value,r=t.formatter,a=cn(t.children)?n:t.children;return tn(r)?r(a):a},f2e=function(t,n){var r=Ta(n-t),a=Math.min(Math.abs(n-t),360);return r*a},p2e=function(t,n,r){var a=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,f=c.cy,p=c.innerRadius,y=c.outerRadius,v=c.startAngle,x=c.endAngle,b=c.clockWise,w=(p+y)/2,_=f2e(v,x),T=_>=0?1:-1,C,O;a==="insideStart"?(C=v+T*o,O=b):a==="insideEnd"?(C=x-T*o,O=!b):a==="end"&&(C=x+T*o,O=b),O=_<=0?O:!O;var E=Ar(u,f,w,C),P=Ar(u,f,w,C+(O?1:-1)*359),I="M".concat(E.x,",").concat(E.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(O?0:1,`,
    `).concat(P.x,",").concat(P.y),F=cn(t.id)?Lf("recharts-radial-line-"):t.id;return ye.createElement("text",ub({},r,{dominantBaseline:"central",className:fn("recharts-radial-bar-label",l)}),ye.createElement("defs",null,ye.createElement("path",{id:F,d:I})),ye.createElement("textPath",{xlinkHref:"#".concat(F)},n))},m2e=function(t){var n=t.viewBox,r=t.offset,a=t.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,f=s.startAngle,p=s.endAngle,y=(f+p)/2;if(a==="outside"){var v=Ar(o,l,u+r,y),x=v.x,b=v.y;return{x,y:b,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var w=(c+u)/2,_=Ar(o,l,w,y),T=_.x,C=_.y;return{x:T,y:C,textAnchor:"middle",verticalAnchor:"middle"}},g2e=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,s=t.position,o=n,l=o.x,c=o.y,u=o.width,f=o.height,p=f>=0?1:-1,y=p*a,v=p>0?"end":"start",x=p>0?"start":"end",b=u>=0?1:-1,w=b*a,_=b>0?"end":"start",T=b>0?"start":"end";if(s==="top"){var C={x:l+u/2,y:c-p*a,textAnchor:"middle",verticalAnchor:v};return yi(yi({},C),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var O={x:l+u/2,y:c+f+y,textAnchor:"middle",verticalAnchor:x};return yi(yi({},O),r?{height:Math.max(r.y+r.height-(c+f),0),width:u}:{})}if(s==="left"){var E={x:l-w,y:c+f/2,textAnchor:_,verticalAnchor:"middle"};return yi(yi({},E),r?{width:Math.max(E.x-r.x,0),height:f}:{})}if(s==="right"){var P={x:l+u+w,y:c+f/2,textAnchor:T,verticalAnchor:"middle"};return yi(yi({},P),r?{width:Math.max(r.x+r.width-P.x,0),height:f}:{})}var I=r?{width:u,height:f}:{};return s==="insideLeft"?yi({x:l+w,y:c+f/2,textAnchor:T,verticalAnchor:"middle"},I):s==="insideRight"?yi({x:l+u-w,y:c+f/2,textAnchor:_,verticalAnchor:"middle"},I):s==="insideTop"?yi({x:l+u/2,y:c+y,textAnchor:"middle",verticalAnchor:x},I):s==="insideBottom"?yi({x:l+u/2,y:c+f-y,textAnchor:"middle",verticalAnchor:v},I):s==="insideTopLeft"?yi({x:l+w,y:c+y,textAnchor:T,verticalAnchor:x},I):s==="insideTopRight"?yi({x:l+u-w,y:c+y,textAnchor:_,verticalAnchor:x},I):s==="insideBottomLeft"?yi({x:l+w,y:c+f-y,textAnchor:T,verticalAnchor:v},I):s==="insideBottomRight"?yi({x:l+u-w,y:c+f-y,textAnchor:_,verticalAnchor:v},I):Kg(s)&&(yt(s.x)||Xh(s.x))&&(yt(s.y)||Xh(s.y))?yi({x:l+Ea(s.x,u),y:c+Ea(s.y,f),textAnchor:"end",verticalAnchor:"end"},I):yi({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},I)},y2e=function(t){return"cx"in t&&yt(t.cx)};function Ei(e){var t=e.offset,n=t===void 0?5:t,r=o2e(e,t2e),a=yi({offset:n},r),s=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,f=a.className,p=f===void 0?"":f,y=a.textBreakAll;if(!s||cn(l)&&cn(c)&&!j.isValidElement(u)&&!tn(u))return null;if(j.isValidElement(u))return j.cloneElement(u,a);var v;if(tn(u)){if(v=j.createElement(u,a),j.isValidElement(v))return v}else v=h2e(a);var x=y2e(s),b=Ft(a,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return p2e(a,v,b);var w=x?m2e(a):g2e(a);return ye.createElement(Af,ub({className:fn("recharts-label",p)},b,w,{breakAll:y}),v)}Ei.displayName="Label";var YH=function(t){var n=t.cx,r=t.cy,a=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,p=t.x,y=t.y,v=t.top,x=t.left,b=t.width,w=t.height,_=t.clockWise,T=t.labelViewBox;if(T)return T;if(yt(b)&&yt(w)){if(yt(p)&&yt(y))return{x:p,y,width:b,height:w};if(yt(v)&&yt(x))return{x:v,y:x,width:b,height:w}}return yt(p)&&yt(y)?{x:p,y,width:0,height:0}:yt(n)&&yt(r)?{cx:n,cy:r,startAngle:s||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:_}:t.viewBox?t.viewBox:{}},v2e=function(t,n){return t?t===!0?ye.createElement(Ei,{key:"label-implicit",viewBox:n}):bi(t)?ye.createElement(Ei,{key:"label-implicit",viewBox:n,value:t}):j.isValidElement(t)?t.type===Ei?j.cloneElement(t,{key:"label-implicit",viewBox:n}):ye.createElement(Ei,{key:"label-implicit",content:t,viewBox:n}):tn(t)?ye.createElement(Ei,{key:"label-implicit",content:t,viewBox:n}):Kg(t)?ye.createElement(Ei,ub({viewBox:n},t,{key:"label-implicit"})):null:null},x2e=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,s=YH(t),o=Ts(a,Ei).map(function(c,u){return j.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var l=v2e(t.label,n||s);return[l].concat(n2e(o))};Ei.parseViewBox=YH;Ei.renderCallByParent=x2e;var OA,i8;function b2e(){if(i8)return OA;i8=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return OA=e,OA}var j2e=b2e();const w2e=Bn(j2e);function db(e){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},db(e)}var S2e=["valueAccessor"],N2e=["data","dataKey","clockWise","id","textBreakAll"];function _2e(e){return A2e(e)||E2e(e)||T2e(e)||C2e()}function C2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T2e(e,t){if(e){if(typeof e=="string")return pO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pO(e,t)}}function E2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function A2e(e){if(Array.isArray(e))return pO(e)}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function SS(){return SS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SS.apply(this,arguments)}function a8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function s8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a8(Object(n),!0).forEach(function(r){k2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k2e(e,t,n){return t=P2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P2e(e){var t=O2e(e,"string");return db(t)=="symbol"?t:t+""}function O2e(e,t){if(db(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(db(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o8(e,t){if(e==null)return{};var n=D2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function D2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var M2e=function(t){return Array.isArray(t.value)?w2e(t.value):t.value};function kl(e){var t=e.valueAccessor,n=t===void 0?M2e:t,r=o8(e,S2e),a=r.data,s=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=o8(r,N2e);return!a||!a.length?null:ye.createElement(On,{className:"recharts-label-list"},a.map(function(f,p){var y=cn(s)?n(f,p):ri(f&&f.payload,s),v=cn(l)?{}:{id:"".concat(l,"-").concat(p)};return ye.createElement(Ei,SS({},Ft(f,!0),u,v,{parentViewBox:f.parentViewBox,value:y,textBreakAll:c,viewBox:Ei.parseViewBox(cn(o)?f:s8(s8({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}kl.displayName="LabelList";function I2e(e,t){return e?e===!0?ye.createElement(kl,{key:"labelList-implicit",data:t}):ye.isValidElement(e)||tn(e)?ye.createElement(kl,{key:"labelList-implicit",data:t,content:e}):Kg(e)?ye.createElement(kl,SS({data:t},e,{key:"labelList-implicit"})):null:null}function R2e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=Ts(r,kl).map(function(o,l){return j.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var s=I2e(e.label,t);return[s].concat(_2e(a))}kl.renderCallByParent=R2e;function hb(e){"@babel/helpers - typeof";return hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hb(e)}function mO(){return mO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mO.apply(this,arguments)}function l8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function c8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l8(Object(n),!0).forEach(function(r){L2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L2e(e,t,n){return t=F2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F2e(e){var t=$2e(e,"string");return hb(t)=="symbol"?t:t+""}function $2e(e,t){if(hb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(hb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var B2e=function(t,n){var r=Ta(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},Xj=function(t){var n=t.cx,r=t.cy,a=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+a,p=Math.asin(c/f)/wS,y=u?s:s+o*p,v=Ar(n,r,f,y),x=Ar(n,r,a,y),b=u?s-o*p:s,w=Ar(n,r,f*Math.cos(p*wS),b);return{center:v,circleTangency:x,lineTangency:w,theta:p}},QH=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=B2e(o,l),u=o+c,f=Ar(n,r,s,o),p=Ar(n,r,s,u),y="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(a>0){var v=Ar(n,r,a,o),x=Ar(n,r,a,u);y+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(v.x,",").concat(v.y," Z")}else y+="L ".concat(n,",").concat(r," Z");return y},z2e=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,p=Ta(f-u),y=Xj({cx:n,cy:r,radius:s,angle:u,sign:p,cornerRadius:o,cornerIsExternal:c}),v=y.circleTangency,x=y.lineTangency,b=y.theta,w=Xj({cx:n,cy:r,radius:s,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:c}),_=w.circleTangency,T=w.lineTangency,C=w.theta,O=c?Math.abs(u-f):Math.abs(u-f)-b-C;if(O<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):QH({cx:n,cy:r,innerRadius:a,outerRadius:s,startAngle:u,endAngle:f});var E="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(O>180),",").concat(+(p<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
  `);if(a>0){var P=Xj({cx:n,cy:r,radius:a,angle:u,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=P.circleTangency,F=P.lineTangency,$=P.theta,z=Xj({cx:n,cy:r,radius:a,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),L=z.circleTangency,H=z.lineTangency,V=z.theta,ne=c?Math.abs(u-f):Math.abs(u-f)-$-V;if(ne<0&&o===0)return"".concat(E,"L").concat(n,",").concat(r,"Z");E+="L".concat(H.x,",").concat(H.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(ne>180),",").concat(+(p>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(F.x,",").concat(F.y,"Z")}else E+="L".concat(n,",").concat(r,"Z");return E},q2e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},XH=function(t){var n=c8(c8({},q2e),t),r=n.cx,a=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,f=n.startAngle,p=n.endAngle,y=n.className;if(o<s||f===p)return null;var v=fn("recharts-sector",y),x=o-s,b=Ea(l,x,0,!0),w;return b>0&&Math.abs(f-p)<360?w=z2e({cx:r,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(b,x/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:p}):w=QH({cx:r,cy:a,innerRadius:s,outerRadius:o,startAngle:f,endAngle:p}),ye.createElement("path",mO({},Ft(n,!0),{className:v,d:w,role:"img"}))};function fb(e){"@babel/helpers - typeof";return fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fb(e)}function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gO.apply(this,arguments)}function u8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function d8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u8(Object(n),!0).forEach(function(r){U2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U2e(e,t,n){return t=V2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V2e(e){var t=H2e(e,"string");return fb(t)=="symbol"?t:t+""}function H2e(e,t){if(fb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h8={curveBasisClosed:d0e,curveBasisOpen:h0e,curveBasis:u0e,curveBumpX:Qbe,curveBumpY:Xbe,curveLinearClosed:f0e,curveLinear:RN,curveMonotoneX:p0e,curveMonotoneY:m0e,curveNatural:g0e,curveStep:y0e,curveStepAfter:x0e,curveStepBefore:v0e},Jj=function(t){return t.x===+t.x&&t.y===+t.y},cx=function(t){return t.x},ux=function(t){return t.y},G2e=function(t,n){if(tn(t))return t;var r="curve".concat(MN(t));return(r==="curveMonotone"||r==="curveBump")&&n?h8["".concat(r).concat(n==="vertical"?"Y":"X")]:h8[r]||RN},W2e=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,s=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=G2e(r,l),p=u?s.filter(function(b){return Jj(b)}):s,y;if(Array.isArray(o)){var v=u?o.filter(function(b){return Jj(b)}):o,x=p.map(function(b,w){return d8(d8({},b),{},{base:v[w]})});return l==="vertical"?y=Uj().y(ux).x1(cx).x0(function(b){return b.base.x}):y=Uj().x(cx).y1(ux).y0(function(b){return b.base.y}),y.defined(Jj).curve(f),y(x)}return l==="vertical"&&yt(o)?y=Uj().y(ux).x1(cx).x0(o):yt(o)?y=Uj().x(cx).y1(ux).y0(o):y=Y7().x(cx).y(ux),y.defined(Jj).curve(f),y(p)},mf=function(t){var n=t.className,r=t.points,a=t.path,s=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?W2e(t):a;return j.createElement("path",gO({},Ft(t,!1),Qw(t),{className:fn("recharts-curve",n),d:o,ref:s}))},DA={exports:{}},MA,f8;function K2e(){if(f8)return MA;f8=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return MA=e,MA}var IA,p8;function Y2e(){if(p8)return IA;p8=1;var e=K2e();function t(){}function n(){}return n.resetWarningCache=t,IA=function(){function r(o,l,c,u,f,p){if(p!==e){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function a(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},IA}var m8;function Q2e(){return m8||(m8=1,DA.exports=Y2e()()),DA.exports}var X2e=Q2e();const rr=Bn(X2e);var J2e=Object.getOwnPropertyNames,Z2e=Object.getOwnPropertySymbols,eTe=Object.prototype.hasOwnProperty;function g8(e,t){return function(r,a,s){return e(r,a,s)&&t(r,a,s)}}function Zj(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var s=a.cache,o=s.get(n),l=s.get(r);if(o&&l)return o===r&&l===n;s.set(n,r),s.set(r,n);var c=e(n,r,a);return s.delete(n),s.delete(r),c}}function y8(e){return J2e(e).concat(Z2e(e))}var tTe=Object.hasOwn||function(e,t){return eTe.call(e,t)};function Bf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var nTe="__v",rTe="__o",iTe="_owner",v8=Object.getOwnPropertyDescriptor,x8=Object.keys;function aTe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function sTe(e,t){return Bf(e.getTime(),t.getTime())}function oTe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function lTe(e,t){return e===t}function b8(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=t.entries(),f=!1,p=0;(l=u.next())&&!l.done;){if(a[p]){p++;continue}var y=o.value,v=l.value;if(n.equals(y[0],v[0],c,p,e,t,n)&&n.equals(y[1],v[1],y[0],v[0],e,t,n)){f=a[p]=!0;break}p++}if(!f)return!1;c++}return!0}var cTe=Bf;function uTe(e,t,n){var r=x8(e),a=r.length;if(x8(t).length!==a)return!1;for(;a-- >0;)if(!JH(e,t,n,r[a]))return!1;return!0}function dx(e,t,n){var r=y8(e),a=r.length;if(y8(t).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=r[a],!JH(e,t,n,s)||(o=v8(e,s),l=v8(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function dTe(e,t){return Bf(e.valueOf(),t.valueOf())}function hTe(e,t){return e.source===t.source&&e.flags===t.flags}function j8(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),u=!1,f=0;(l=c.next())&&!l.done;){if(!a[f]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function fTe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function pTe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function JH(e,t,n,r){return(r===iTe||r===rTe||r===nTe)&&(e.$$typeof||t.$$typeof)?!0:tTe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var mTe="[object Arguments]",gTe="[object Boolean]",yTe="[object Date]",vTe="[object Error]",xTe="[object Map]",bTe="[object Number]",jTe="[object Object]",wTe="[object RegExp]",STe="[object Set]",NTe="[object String]",_Te="[object URL]",CTe=Array.isArray,w8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,S8=Object.assign,TTe=Object.prototype.toString.call.bind(Object.prototype.toString);function ETe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,f=e.areSetsEqual,p=e.areTypedArraysEqual,y=e.areUrlsEqual;return function(x,b,w){if(x===b)return!0;if(x==null||b==null)return!1;var _=typeof x;if(_!==typeof b)return!1;if(_!=="object")return _==="number"?o(x,b,w):_==="function"?a(x,b,w):!1;var T=x.constructor;if(T!==b.constructor)return!1;if(T===Object)return l(x,b,w);if(CTe(x))return t(x,b,w);if(w8!=null&&w8(x))return p(x,b,w);if(T===Date)return n(x,b,w);if(T===RegExp)return u(x,b,w);if(T===Map)return s(x,b,w);if(T===Set)return f(x,b,w);var C=TTe(x);return C===yTe?n(x,b,w):C===wTe?u(x,b,w):C===xTe?s(x,b,w):C===STe?f(x,b,w):C===jTe?typeof x.then!="function"&&typeof b.then!="function"&&l(x,b,w):C===_Te?y(x,b,w):C===vTe?r(x,b,w):C===mTe?l(x,b,w):C===gTe||C===bTe||C===NTe?c(x,b,w):!1}}function ATe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?dx:aTe,areDatesEqual:sTe,areErrorsEqual:oTe,areFunctionsEqual:lTe,areMapsEqual:r?g8(b8,dx):b8,areNumbersEqual:cTe,areObjectsEqual:r?dx:uTe,arePrimitiveWrappersEqual:dTe,areRegExpsEqual:hTe,areSetsEqual:r?g8(j8,dx):j8,areTypedArraysEqual:r?dx:fTe,areUrlsEqual:pTe};if(n&&(a=S8({},a,n(a))),t){var s=Zj(a.areArraysEqual),o=Zj(a.areMapsEqual),l=Zj(a.areObjectsEqual),c=Zj(a.areSetsEqual);a=S8({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function kTe(e){return function(t,n,r,a,s,o,l){return e(t,n,l)}}function PTe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,s=e.strict;if(r)return function(c,u){var f=r(),p=f.cache,y=p===void 0?t?new WeakMap:void 0:p,v=f.meta;return n(c,u,{cache:y,equals:a,meta:v,strict:s})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var OTe=_d();_d({strict:!0});_d({circular:!0});_d({circular:!0,strict:!0});_d({createInternalComparator:function(){return Bf}});_d({strict:!0,createInternalComparator:function(){return Bf}});_d({circular:!0,createInternalComparator:function(){return Bf}});_d({circular:!0,createInternalComparator:function(){return Bf},strict:!0});function _d(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,s=e.strict,o=s===void 0?!1:s,l=ATe(e),c=ETe(l),u=r?r(c):kTe(c);return PTe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function DTe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function N8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(s){n<0&&(n=s),s-n>t?(e(s),n=-1):DTe(a)};requestAnimationFrame(r)}function yO(e){"@babel/helpers - typeof";return yO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yO(e)}function MTe(e){return FTe(e)||LTe(e)||RTe(e)||ITe()}function ITe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RTe(e,t){if(e){if(typeof e=="string")return _8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _8(e,t)}}function _8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function LTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FTe(e){if(Array.isArray(e))return e}function $Te(){var e={},t=function(){return null},n=!1,r=function a(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=MTe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){N8(a.bind(null,u),c);return}a(c),N8(a.bind(null,u));return}yO(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function pb(e){"@babel/helpers - typeof";return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pb(e)}function C8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function T8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C8(Object(n),!0).forEach(function(r){ZH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZH(e,t,n){return t=BTe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BTe(e){var t=zTe(e,"string");return pb(t)==="symbol"?t:String(t)}function zTe(e,t){if(pb(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(pb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qTe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(s){return a.includes(s)})})},UTe=function(t){return t},VTe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Ox=function(t,n){return Object.keys(n).reduce(function(r,a){return T8(T8({},r),{},ZH({},a,t(a,n[a])))},{})},E8=function(t,n,r){return t.map(function(a){return"".concat(VTe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function HTe(e,t){return KTe(e)||WTe(e,t)||eG(e,t)||GTe()}function GTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WTe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function KTe(e){if(Array.isArray(e))return e}function YTe(e){return JTe(e)||XTe(e)||eG(e)||QTe()}function QTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eG(e,t){if(e){if(typeof e=="string")return vO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vO(e,t)}}function XTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JTe(e){if(Array.isArray(e))return vO(e)}function vO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var NS=1e-4,tG=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},nG=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},A8=function(t,n){return function(r){var a=tG(t,n);return nG(a,r)}},ZTe=function(t,n){return function(r){var a=tG(t,n),s=[].concat(YTe(a.map(function(o,l){return o*l}).slice(1)),[0]);return nG(s,r)}},k8=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),f=HTe(u,4);a=f[0],s=f[1],o=f[2],l=f[3]}}}var p=A8(a,o),y=A8(s,l),v=ZTe(a,o),x=function(_){return _>1?1:_<0?0:_},b=function(_){for(var T=_>1?1:_,C=T,O=0;O<8;++O){var E=p(C)-T,P=v(C);if(Math.abs(E-T)<NS||P<NS)return y(C);C=x(C-E/P)}return y(C)};return b.isStepper=!1,b},eEe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,s=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(f,p,y){var v=-(f-p)*r,x=y*s,b=y+(v-x)*l/1e3,w=y*l/1e3+f;return Math.abs(w-p)<NS&&Math.abs(b)<NS?[p,0]:[w,b]};return c.isStepper=!0,c.dt=l,c},tEe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return k8(a);case"spring":return eEe();default:if(a.split("(")[0]==="cubic-bezier")return k8(a)}return typeof a=="function"?a:null};function mb(e){"@babel/helpers - typeof";return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mb(e)}function P8(e){return iEe(e)||rEe(e)||rG(e)||nEe()}function nEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iEe(e){if(Array.isArray(e))return bO(e)}function O8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O8(Object(n),!0).forEach(function(r){xO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xO(e,t,n){return t=aEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aEe(e){var t=sEe(e,"string");return mb(t)==="symbol"?t:String(t)}function sEe(e,t){if(mb(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(mb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oEe(e,t){return uEe(e)||cEe(e,t)||rG(e,t)||lEe()}function lEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rG(e,t){if(e){if(typeof e=="string")return bO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bO(e,t)}}function bO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function uEe(e){if(Array.isArray(e))return e}var _S=function(t,n,r){return t+(n-t)*r},jO=function(t){var n=t.from,r=t.to;return n!==r},dEe=function e(t,n,r){var a=Ox(function(s,o){if(jO(o)){var l=t(o.from,o.to,o.velocity),c=oEe(l,2),u=c[0],f=c[1];return Li(Li({},o),{},{from:u,velocity:f})}return o},n);return r<1?Ox(function(s,o){return jO(o)?Li(Li({},o),{},{velocity:_S(o.velocity,a[s].velocity,r),from:_S(o.from,a[s].from,r)}):o},n):e(t,a,r-1)};const hEe=function(e,t,n,r,a){var s=qTe(e,t),o=s.reduce(function(w,_){return Li(Li({},w),{},xO({},_,[e[_],t[_]]))},{}),l=s.reduce(function(w,_){return Li(Li({},w),{},xO({},_,{from:e[_],velocity:0,to:t[_]}))},{}),c=-1,u,f,p=function(){return null},y=function(){return Ox(function(_,T){return T.from},l)},v=function(){return!Object.values(l).filter(jO).length},x=function(_){u||(u=_);var T=_-u,C=T/n.dt;l=dEe(n,l,C),a(Li(Li(Li({},e),t),y())),u=_,v()||(c=requestAnimationFrame(p))},b=function(_){f||(f=_);var T=(_-f)/r,C=Ox(function(E,P){return _S.apply(void 0,P8(P).concat([n(T)]))},o);if(a(Li(Li(Li({},e),t),C)),T<1)c=requestAnimationFrame(p);else{var O=Ox(function(E,P){return _S.apply(void 0,P8(P).concat([n(1)]))},o);a(Li(Li(Li({},e),t),O))}};return p=n.isStepper?x:b,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}};function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}var fEe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function pEe(e,t){if(e==null)return{};var n=mEe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mEe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function RA(e){return xEe(e)||vEe(e)||yEe(e)||gEe()}function gEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yEe(e,t){if(e){if(typeof e=="string")return wO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wO(e,t)}}function vEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xEe(e){if(Array.isArray(e))return wO(e)}function wO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D8(Object(n),!0).forEach(function(r){Nx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nx(e,t,n){return t=iG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jEe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iG(r.key),r)}}function wEe(e,t,n){return t&&jEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function iG(e){var t=SEe(e,"string");return bg(t)==="symbol"?t:String(t)}function SEe(e,t){if(bg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(bg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SO(e,t)}function SO(e,t){return SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},SO(e,t)}function _Ee(e){var t=CEe();return function(){var r=CS(e),a;if(t){var s=CS(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return NO(this,a)}}function NO(e,t){if(t&&(bg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _O(e)}function _O(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function CS(e){return CS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CS(e)}var Do=function(e){NEe(n,e);var t=_Ee(n);function n(r,a){var s;bEe(this,n),s=t.call(this,r,a);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,p=o.steps,y=o.children,v=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(_O(s)),s.changeStyle=s.changeStyle.bind(_O(s)),!l||v<=0)return s.state={style:{}},typeof y=="function"&&(s.state={style:f}),NO(s);if(p&&p.length)s.state={style:p[0].style};else if(u){if(typeof y=="function")return s.state={style:u},NO(s);s.state={style:c?Nx({},c,u):u}}else s.state={style:{}};return s}return wEe(n,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,f=s.to,p=s.from,y=this.state.style;if(l){if(!o){var v={style:c?Nx({},c,f):f};this.state&&y&&(c&&y[c]!==f||!c&&y!==f)&&this.setState(v);return}if(!(OTe(a.to,f)&&a.canBegin&&a.isActive)){var x=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=x||u?p:a.to;if(this.state&&y){var w={style:c?Nx({},c,b):b};(c&&y[c]!==b||!c&&y!==b)&&this.setState(w)}this.runAnimation(No(No({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,u=a.easing,f=a.begin,p=a.onAnimationEnd,y=a.onAnimationStart,v=hEe(o,l,tEe(u),c,this.changeStyle),x=function(){s.stopJSAnimation=v()};this.manager.start([y,f,x,c,p])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],f=u.style,p=u.duration,y=p===void 0?0:p,v=function(b,w,_){if(_===0)return b;var T=w.duration,C=w.easing,O=C===void 0?"ease":C,E=w.style,P=w.properties,I=w.onAnimationEnd,F=_>0?o[_-1]:w,$=P||Object.keys(E);if(typeof O=="function"||O==="spring")return[].concat(RA(b),[s.runJSAnimation.bind(s,{from:F.style,to:E,duration:T,easing:O}),T]);var z=E8($,T,O),L=No(No(No({},F.style),E),{},{transition:z});return[].concat(RA(b),[L,T,I]).filter(UTe)};return this.manager.start([c].concat(RA(o.reduce(v,[f,Math.max(y,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=$Te());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,f=a.onAnimationStart,p=a.onAnimationEnd,y=a.steps,v=a.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof u=="function"||typeof v=="function"||u==="spring"){this.runJSAnimation(a);return}if(y.length>1){this.runStepAnimation(a);return}var b=l?Nx({},l,c):c,w=E8(Object.keys(b),o,u);x.start([f,s,No(No({},b),{},{transition:w}),o,p])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=pEe(a,fEe),u=j.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||u===0||o<=0)return s;var p=function(v){var x=v.props,b=x.style,w=b===void 0?{}:b,_=x.className,T=j.cloneElement(v,No(No({},c),{},{style:No(No({},w),f),className:_}));return T};return u===1?p(j.Children.only(s)):ye.createElement("div",null,j.Children.map(s,function(y){return p(y)}))}}]),n}(j.PureComponent);Do.displayName="Animate";Do.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Do.propTypes={from:rr.oneOfType([rr.object,rr.string]),to:rr.oneOfType([rr.object,rr.string]),attributeName:rr.string,duration:rr.number,begin:rr.number,easing:rr.oneOfType([rr.string,rr.func]),steps:rr.arrayOf(rr.shape({duration:rr.number.isRequired,style:rr.object.isRequired,easing:rr.oneOfType([rr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),rr.func]),properties:rr.arrayOf("string"),onAnimationEnd:rr.func})),children:rr.oneOfType([rr.node,rr.func]),isActive:rr.bool,canBegin:rr.bool,onAnimationEnd:rr.func,shouldReAnimate:rr.bool,onAnimationStart:rr.func,onAnimationReStart:rr.func};function gb(e){"@babel/helpers - typeof";return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gb(e)}function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TS.apply(this,arguments)}function TEe(e,t){return PEe(e)||kEe(e,t)||AEe(e,t)||EEe()}function EEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AEe(e,t){if(e){if(typeof e=="string")return M8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M8(e,t)}}function M8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function PEe(e){if(Array.isArray(e))return e}function I8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function R8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I8(Object(n),!0).forEach(function(r){OEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OEe(e,t,n){return t=DEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DEe(e){var t=MEe(e,"string");return gb(t)=="symbol"?t:t+""}function MEe(e,t){if(gb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(gb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L8=function(t,n,r,a,s){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,f;if(o>0&&s instanceof Array){for(var p=[0,0,0,0],y=0,v=4;y<v;y++)p[y]=s[y]>o?o:s[y];f="M".concat(t,",").concat(n+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(u,",").concat(t+c*p[0],",").concat(n)),f+="L ".concat(t+r-c*p[1],",").concat(n),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*p[1])),f+="L ".concat(t+r,",").concat(n+a-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(u,`,
        `).concat(t+r-c*p[2],",").concat(n+a)),f+="L ".concat(t+c*p[3],",").concat(n+a),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*p[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var x=Math.min(o,s);f="M ".concat(t,",").concat(n+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+c*x,",").concat(n,`
            L `).concat(t+r-c*x,",").concat(n,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*x,`
            L `).concat(t+r,",").concat(n+a-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+r-c*x,",").concat(n+a,`
            L `).concat(t+c*x,",").concat(n+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*x," Z")}else f="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return f},IEe=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),f=Math.max(s,s+l),p=Math.min(o,o+c),y=Math.max(o,o+c);return r>=u&&r<=f&&a>=p&&a<=y}return!1},REe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ZM=function(t){var n=R8(R8({},REe),t),r=j.useRef(),a=j.useState(-1),s=TEe(a,2),o=s[0],l=s[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var O=r.current.getTotalLength();O&&l(O)}catch{}},[]);var c=n.x,u=n.y,f=n.width,p=n.height,y=n.radius,v=n.className,x=n.animationEasing,b=n.animationDuration,w=n.animationBegin,_=n.isAnimationActive,T=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||p!==+p||f===0||p===0)return null;var C=fn("recharts-rectangle",v);return T?ye.createElement(Do,{canBegin:o>0,from:{width:f,height:p,x:c,y:u},to:{width:f,height:p,x:c,y:u},duration:b,animationEasing:x,isActive:T},function(O){var E=O.width,P=O.height,I=O.x,F=O.y;return ye.createElement(Do,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:b,isActive:_,easing:x},ye.createElement("path",TS({},Ft(n,!0),{className:C,d:L8(I,F,E,P,y),ref:r})))}):ye.createElement("path",TS({},Ft(n,!0),{className:C,d:L8(c,u,f,p,y)}))},LEe=["points","className","baseLinePoints","connectNulls"];function Mm(){return Mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mm.apply(this,arguments)}function FEe(e,t){if(e==null)return{};var n=$Ee(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $Ee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function F8(e){return UEe(e)||qEe(e)||zEe(e)||BEe()}function BEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zEe(e,t){if(e){if(typeof e=="string")return CO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CO(e,t)}}function qEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UEe(e){if(Array.isArray(e))return CO(e)}function CO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $8=function(t){return t&&t.x===+t.x&&t.y===+t.y},VEe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){$8(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),$8(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Dx=function(t,n){var r=VEe(t);n&&(r=[r.reduce(function(s,o){return[].concat(F8(s),F8(o))},[])]);var a=r.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},HEe=function(t,n,r){var a=Dx(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Dx(n.reverse(),r).slice(1))},GEe=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,s=t.connectNulls,o=FEe(t,LEe);if(!n||!n.length)return null;var l=fn("recharts-polygon",r);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=HEe(n,a,s);return ye.createElement("g",{className:l},ye.createElement("path",Mm({},Ft(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?ye.createElement("path",Mm({},Ft(o,!0),{fill:"none",d:Dx(n,s)})):null,c?ye.createElement("path",Mm({},Ft(o,!0),{fill:"none",d:Dx(a,s)})):null)}var f=Dx(n,s);return ye.createElement("path",Mm({},Ft(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function TO(){return TO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TO.apply(this,arguments)}var r0=function(t){var n=t.cx,r=t.cy,a=t.r,s=t.className,o=fn("recharts-dot",s);return n===+n&&r===+r&&a===+a?j.createElement("circle",TO({},Ft(t,!1),Qw(t),{className:o,cx:n,cy:r,r:a})):null};function yb(e){"@babel/helpers - typeof";return yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yb(e)}var WEe=["x","y","top","left","width","height","className"];function EO(){return EO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EO.apply(this,arguments)}function B8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function KEe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B8(Object(n),!0).forEach(function(r){YEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YEe(e,t,n){return t=QEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QEe(e){var t=XEe(e,"string");return yb(t)=="symbol"?t:t+""}function XEe(e,t){if(yb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(yb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JEe(e,t){if(e==null)return{};var n=ZEe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ZEe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var eAe=function(t,n,r,a,s,o){return"M".concat(t,",").concat(s,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},tAe=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,p=f===void 0?0:f,y=t.height,v=y===void 0?0:y,x=t.className,b=JEe(t,WEe),w=KEe({x:r,y:s,top:l,left:u,width:p,height:v},b);return!yt(r)||!yt(s)||!yt(p)||!yt(v)||!yt(l)||!yt(u)?null:ye.createElement("path",EO({},Ft(w,!0),{className:fn("recharts-cross",x),d:eAe(r,s,p,v,l,u)}))},LA,z8;function nAe(){if(z8)return LA;z8=1;var e=WN(),t=xH(),n=Rl();function r(a,s){return a&&a.length?e(a,n(s,2),t):void 0}return LA=r,LA}var rAe=nAe();const iAe=Bn(rAe);var FA,q8;function aAe(){if(q8)return FA;q8=1;var e=WN(),t=Rl(),n=bH();function r(a,s){return a&&a.length?e(a,t(s,2),n):void 0}return FA=r,FA}var sAe=aAe();const oAe=Bn(sAe);var lAe=["cx","cy","angle","ticks","axisLine"],cAe=["ticks","tick","angle","tickFormatter","stroke"];function jg(e){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mx.apply(this,arguments)}function U8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U8(Object(n),!0).forEach(function(r){XN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V8(e,t){if(e==null)return{};var n=uAe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uAe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function dAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sG(r.key),r)}}function hAe(e,t,n){return t&&H8(e.prototype,t),n&&H8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fAe(e,t,n){return t=ES(t),pAe(e,aG()?Reflect.construct(t,n||[],ES(e).constructor):t.apply(e,n))}function pAe(e,t){if(t&&(jg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mAe(e)}function mAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aG=function(){return!!e})()}function ES(e){return ES=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ES(e)}function gAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AO(e,t)}function AO(e,t){return AO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},AO(e,t)}function XN(e,t,n){return t=sG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sG(e){var t=yAe(e,"string");return jg(t)=="symbol"?t:t+""}function yAe(e,t){if(jg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(jg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var JN=function(e){function t(){return dAe(this,t),fAe(this,t,arguments)}return gAe(t,e),hAe(t,[{key:"getTickValueCoord",value:function(r){var a=r.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Ar(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,a;switch(r){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var r=this.props,a=r.cx,s=r.cy,o=r.angle,l=r.ticks,c=iAe(l,function(f){return f.coordinate||0}),u=oAe(l,function(f){return f.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,s=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=V8(r,lAe),f=l.reduce(function(x,b){return[Math.min(x[0],b.coordinate),Math.max(x[1],b.coordinate)]},[1/0,-1/0]),p=Ar(a,s,f[0],o),y=Ar(a,s,f[1],o),v=zh(zh(zh({},Ft(u,!1)),{},{fill:"none"},Ft(c,!1)),{},{x1:p.x,y1:p.y,x2:y.x,y2:y.y});return ye.createElement("line",Mx({className:"recharts-polar-radius-axis-line"},v))}},{key:"renderTicks",value:function(){var r=this,a=this.props,s=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,f=V8(a,cAe),p=this.getTickTextAnchor(),y=Ft(f,!1),v=Ft(o,!1),x=s.map(function(b,w){var _=r.getTickValueCoord(b),T=zh(zh(zh(zh({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(_.x,", ").concat(_.y,")")},y),{},{stroke:"none",fill:u},v),{},{index:w},_),{},{payload:b});return ye.createElement(On,Mx({className:fn("recharts-polar-radius-axis-tick",KH(o)),key:"tick-".concat(b.coordinate)},Ef(r.props,b,w)),t.renderTickItem(o,T,c?c(b.value,w):b.value))});return ye.createElement(On,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var r=this.props,a=r.ticks,s=r.axisLine,o=r.tick;return!a||!a.length?null:ye.createElement(On,{className:fn("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Ei.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,a,s){var o;return ye.isValidElement(r)?o=ye.cloneElement(r,a):tn(r)?o=r(a):o=ye.createElement(Af,Mx({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(j.PureComponent);XN(JN,"displayName","PolarRadiusAxis");XN(JN,"axisType","radiusAxis");XN(JN,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kh.apply(this,arguments)}function G8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G8(Object(n),!0).forEach(function(r){ZN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lG(r.key),r)}}function xAe(e,t,n){return t&&W8(e.prototype,t),n&&W8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bAe(e,t,n){return t=AS(t),jAe(e,oG()?Reflect.construct(t,n||[],AS(e).constructor):t.apply(e,n))}function jAe(e,t){if(t&&(wg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wAe(e)}function wAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oG=function(){return!!e})()}function AS(e){return AS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AS(e)}function SAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kO(e,t)}function kO(e,t){return kO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},kO(e,t)}function ZN(e,t,n){return t=lG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lG(e){var t=NAe(e,"string");return wg(t)=="symbol"?t:t+""}function NAe(e,t){if(wg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _Ae=Math.PI/180,CAe=1e-5,e_=function(e){function t(){return vAe(this,t),bAe(this,t,arguments)}return SAe(t,e),xAe(t,[{key:"getTickLineCoord",value:function(r){var a=this.props,s=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,f=u||8,p=Ar(s,o,l,r.coordinate),y=Ar(s,o,l+(c==="inner"?-1:1)*f,r.coordinate);return{x1:p.x,y1:p.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(r){var a=this.props.orientation,s=Math.cos(-r.coordinate*_Ae),o;return s>CAe?o=a==="outer"?"start":"end":s<-1e-5?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,s=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=qh(qh({},Ft(this.props,!1)),{},{fill:"none"},Ft(l,!1));if(c==="circle")return ye.createElement(r0,Kh({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:s,r:o}));var f=this.props.ticks,p=f.map(function(y){return Ar(a,s,o,y.coordinate)});return ye.createElement(GEe,Kh({className:"recharts-polar-angle-axis-line"},u,{points:p}))}},{key:"renderTicks",value:function(){var r=this,a=this.props,s=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,f=Ft(this.props,!1),p=Ft(o,!1),y=qh(qh({},f),{},{fill:"none"},Ft(l,!1)),v=s.map(function(x,b){var w=r.getTickLineCoord(x),_=r.getTickTextAnchor(x),T=qh(qh(qh({textAnchor:_},f),{},{stroke:"none",fill:u},p),{},{index:b,payload:x,x:w.x2,y:w.y2});return ye.createElement(On,Kh({className:fn("recharts-polar-angle-axis-tick",KH(o)),key:"tick-".concat(x.coordinate)},Ef(r.props,x,b)),l&&ye.createElement("line",Kh({className:"recharts-polar-angle-axis-tick-line"},y,w)),o&&t.renderTickItem(o,T,c?c(x.value,b):x.value))});return ye.createElement(On,{className:"recharts-polar-angle-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,a=r.ticks,s=r.radius,o=r.axisLine;return s<=0||!a||!a.length?null:ye.createElement(On,{className:fn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,a,s){var o;return ye.isValidElement(r)?o=ye.cloneElement(r,a):tn(r)?o=r(a):o=ye.createElement(Af,Kh({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(j.PureComponent);ZN(e_,"displayName","PolarAngleAxis");ZN(e_,"axisType","angleAxis");ZN(e_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var $A,K8;function TAe(){if(K8)return $A;K8=1;var e=vV(),t=e(Object.getPrototypeOf,Object);return $A=t,$A}var BA,Y8;function EAe(){if(Y8)return BA;Y8=1;var e=qc(),t=TAe(),n=Uc(),r="[object Object]",a=Function.prototype,s=Object.prototype,o=a.toString,l=s.hasOwnProperty,c=o.call(Object);function u(f){if(!n(f)||e(f)!=r)return!1;var p=t(f);if(p===null)return!0;var y=l.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&o.call(y)==c}return BA=u,BA}var AAe=EAe();const kAe=Bn(AAe);var zA,Q8;function PAe(){if(Q8)return zA;Q8=1;var e=qc(),t=Uc(),n="[object Boolean]";function r(a){return a===!0||a===!1||t(a)&&e(a)==n}return zA=r,zA}var OAe=PAe();const DAe=Bn(OAe);function vb(e){"@babel/helpers - typeof";return vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vb(e)}function kS(){return kS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kS.apply(this,arguments)}function MAe(e,t){return FAe(e)||LAe(e,t)||RAe(e,t)||IAe()}function IAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RAe(e,t){if(e){if(typeof e=="string")return X8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X8(e,t)}}function X8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function LAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function FAe(e){if(Array.isArray(e))return e}function J8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Z8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J8(Object(n),!0).forEach(function(r){$Ae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $Ae(e,t,n){return t=BAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BAe(e){var t=zAe(e,"string");return vb(t)=="symbol"?t:t+""}function zAe(e,t){if(vb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(vb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eB=function(t,n,r,a,s){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+s),l+="L ".concat(t+r-o/2-a,",").concat(n+s),l+="L ".concat(t,",").concat(n," Z"),l},qAe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UAe=function(t){var n=Z8(Z8({},qAe),t),r=j.useRef(),a=j.useState(-1),s=MAe(a,2),o=s[0],l=s[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,u=n.y,f=n.upperWidth,p=n.lowerWidth,y=n.height,v=n.className,x=n.animationEasing,b=n.animationDuration,w=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||p!==+p||y!==+y||f===0&&p===0||y===0)return null;var T=fn("recharts-trapezoid",v);return _?ye.createElement(Do,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:y,x:c,y:u},to:{upperWidth:f,lowerWidth:p,height:y,x:c,y:u},duration:b,animationEasing:x,isActive:_},function(C){var O=C.upperWidth,E=C.lowerWidth,P=C.height,I=C.x,F=C.y;return ye.createElement(Do,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:b,easing:x},ye.createElement("path",kS({},Ft(n,!0),{className:T,d:eB(I,F,O,E,P),ref:r})))}):ye.createElement("g",null,ye.createElement("path",kS({},Ft(n,!0),{className:T,d:eB(c,u,f,p,y)})))},VAe=["option","shapeType","propTransformer","activeClassName","isActive"];function xb(e){"@babel/helpers - typeof";return xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xb(e)}function HAe(e,t){if(e==null)return{};var n=GAe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function GAe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function tB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function PS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tB(Object(n),!0).forEach(function(r){WAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WAe(e,t,n){return t=KAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KAe(e){var t=YAe(e,"string");return xb(t)=="symbol"?t:t+""}function YAe(e,t){if(xb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QAe(e,t){return PS(PS({},t),e)}function XAe(e,t){return e==="symbols"}function nB(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return ye.createElement(ZM,n);case"trapezoid":return ye.createElement(UAe,n);case"sector":return ye.createElement(XH,n);case"symbols":if(XAe(t))return ye.createElement(vM,n);break;default:return null}}function JAe(e){return j.isValidElement(e)?e.props:e}function cG(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?QAe:r,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=HAe(e,VAe),u;if(j.isValidElement(t))u=j.cloneElement(t,PS(PS({},c),JAe(t)));else if(tn(t))u=t(c);else if(kAe(t)&&!DAe(t)){var f=a(t,c);u=ye.createElement(nB,{shapeType:n,elementProps:f})}else{var p=c;u=ye.createElement(nB,{shapeType:n,elementProps:p})}return l?ye.createElement(On,{className:o},u):u}function t_(e,t){return t!=null&&"trapezoids"in e.props}function n_(e,t){return t!=null&&"sectors"in e.props}function bb(e,t){return t!=null&&"points"in e.props}function ZAe(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&s}function eke(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function tke(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function nke(e,t){var n;return t_(e,t)?n=ZAe:n_(e,t)?n=eke:bb(e,t)&&(n=tke),n}function rke(e,t){var n;return t_(e,t)?n="trapezoids":n_(e,t)?n="sectors":bb(e,t)&&(n="points"),n}function ike(e,t){if(t_(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(n_(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return bb(e,t)?t.payload:{}}function ake(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=rke(n,t),s=ike(n,t),o=r.filter(function(c,u){var f=kf(s,c),p=n.props[a].filter(function(x){var b=nke(n,t);return b(x,t)}),y=n.props[a].indexOf(p[p.length-1]),v=u===y;return f&&v}),l=r.indexOf(o[o.length-1]);return l}var Nw;function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Im.apply(this,arguments)}function rB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rB(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ske(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dG(r.key),r)}}function oke(e,t,n){return t&&iB(e.prototype,t),n&&iB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lke(e,t,n){return t=OS(t),cke(e,uG()?Reflect.construct(t,n||[],OS(e).constructor):t.apply(e,n))}function cke(e,t){if(t&&(Sg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uke(e)}function uke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uG=function(){return!!e})()}function OS(e){return OS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},OS(e)}function dke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PO(e,t)}function PO(e,t){return PO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},PO(e,t)}function Ws(e,t,n){return t=dG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dG(e){var t=hke(e,"string");return Sg(t)=="symbol"?t:t+""}function hke(e,t){if(Sg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ll=function(e){function t(n){var r;return ske(this,t),r=lke(this,t,[n]),Ws(r,"pieRef",null),Ws(r,"sectorRefs",[]),Ws(r,"id",Lf("recharts-pie-")),Ws(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),tn(a)&&a()}),Ws(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),tn(a)&&a()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return dke(t,e),oke(t,[{key:"isActiveIndex",value:function(r){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(r)!==-1:r===a}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,f=Ft(this.props,!1),p=Ft(o,!1),y=Ft(l,!1),v=o&&o.offsetRadius||20,x=r.map(function(b,w){var _=(b.startAngle+b.endAngle)/2,T=Ar(b.cx,b.cy,b.outerRadius+v,_),C=Tr(Tr(Tr(Tr({},f),b),{},{stroke:"none"},p),{},{index:w,textAnchor:t.getTextAnchor(T.x,b.cx)},T),O=Tr(Tr(Tr(Tr({},f),b),{},{fill:"none",stroke:b.fill},y),{},{index:w,points:[Ar(b.cx,b.cy,b.outerRadius,_),T]}),E=c;return cn(c)&&cn(u)?E="value":cn(c)&&(E=u),ye.createElement(On,{key:"label-".concat(b.startAngle,"-").concat(b.endAngle,"-").concat(b.midAngle,"-").concat(w)},l&&t.renderLabelLineItem(l,O,"line"),t.renderLabelItem(o,C,ri(b,E)))});return ye.createElement(On,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(r){var a=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return r.map(function(u,f){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var p=a.isActiveIndex(f),y=c&&a.hasActiveIndex()?c:null,v=p?o:y,x=Tr(Tr({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return ye.createElement(On,Im({ref:function(w){w&&!a.sectorRefs.includes(w)&&a.sectorRefs.push(w)},tabIndex:-1,className:"recharts-pie-sector"},Ef(a.props,u,f),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(f)}),ye.createElement(cG,Im({option:v,isActive:p,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,a=this.props,s=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,f=a.animationId,p=this.state,y=p.prevSectors,v=p.prevIsAnimationActive;return ye.createElement(Do,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(v),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var b=x.t,w=[],_=s&&s[0],T=_.startAngle;return s.forEach(function(C,O){var E=y&&y[O],P=O>0?Cs(C,"paddingAngle",0):0;if(E){var I=xi(E.endAngle-E.startAngle,C.endAngle-C.startAngle),F=Tr(Tr({},C),{},{startAngle:T+P,endAngle:T+I(b)+P});w.push(F),T=F.endAngle}else{var $=C.endAngle,z=C.startAngle,L=xi(0,$-z),H=L(b),V=Tr(Tr({},C),{},{startAngle:T+P,endAngle:T+H+P});w.push(V),T=V.endAngle}}),ye.createElement(On,null,r.renderSectorsStatically(w))})}},{key:"attachKeyboardHandlers",value:function(r){var a=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,a=r.sectors,s=r.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!kf(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,a=this.props,s=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,f=a.cy,p=a.innerRadius,y=a.outerRadius,v=a.isAnimationActive,x=this.state.isAnimationFinished;if(s||!o||!o.length||!yt(u)||!yt(f)||!yt(p)||!yt(y))return null;var b=fn("recharts-pie",l);return ye.createElement(On,{tabIndex:this.props.rootTabIndex,className:b,ref:function(_){r.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),Ei.renderCallByParent(this.props,null,!1),(!v||x)&&kl.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return a.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:r.sectors!==a.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,a){return r>a?"start":r<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,a,s){if(ye.isValidElement(r))return ye.cloneElement(r,a);if(tn(r))return r(a);var o=fn("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return ye.createElement(mf,Im({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,a,s){if(ye.isValidElement(r))return ye.cloneElement(r,a);var o=s;if(tn(r)&&(o=r(a),ye.isValidElement(o)))return o;var l=fn("recharts-pie-label-text",typeof r!="boolean"&&!tn(r)?r.className:"");return ye.createElement(Af,Im({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(j.PureComponent);Nw=Ll;Ws(Ll,"displayName","Pie");Ws(Ll,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!wd.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ws(Ll,"parseDeltaAngle",function(e,t){var n=Ta(t-e),r=Math.min(Math.abs(t-e),360);return n*r});Ws(Ll,"getRealPieData",function(e){var t=e.data,n=e.children,r=Ft(e,!1),a=Ts(n,Xb);return t&&t.length?t.map(function(s,o){return Tr(Tr(Tr({payload:s},r),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return Tr(Tr({},r),s.props)}):[]});Ws(Ll,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,s=t.height,o=WH(a,s),l=r+Ea(e.cx,a,a/2),c=n+Ea(e.cy,s,s/2),u=Ea(e.innerRadius,o,0),f=Ea(e.outerRadius,o,o*.8),p=e.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:p}});Ws(Ll,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?Tr(Tr({},t.type.defaultProps),t.props):t.props,a=Nw.getRealPieData(r);if(!a||!a.length)return null;var s=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,f=r.nameKey,p=r.valueKey,y=r.tooltipType,v=Math.abs(r.minAngle),x=Nw.parseCoordinateOfPie(r,n),b=Nw.parseDeltaAngle(o,l),w=Math.abs(b),_=u;cn(u)&&cn(p)?(Oo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):cn(u)&&(Oo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=p);var T=a.filter(function(F){return ri(F,_,0)!==0}).length,C=(w>=360?T:T-1)*c,O=w-T*v-C,E=a.reduce(function(F,$){var z=ri($,_,0);return F+(yt(z)?z:0)},0),P;if(E>0){var I;P=a.map(function(F,$){var z=ri(F,_,0),L=ri(F,f,$),H=(yt(z)?z:0)/E,V;$?V=I.endAngle+Ta(b)*c*(z!==0?1:0):V=o;var ne=V+Ta(b)*((z!==0?v:0)+H*O),Z=(V+ne)/2,q=(x.innerRadius+x.outerRadius)/2,K=[{name:L,value:z,payload:F,dataKey:_,type:y}],se=Ar(x.cx,x.cy,q,Z);return I=Tr(Tr(Tr({percent:H,cornerRadius:s,name:L,tooltipPayload:K,midAngle:Z,middleRadius:q,tooltipPosition:se},F),x),{},{value:ri(F,_),startAngle:V,endAngle:ne,payload:F,paddingAngle:Ta(b)*c}),I})}return Tr(Tr({},x),{},{sectors:P,data:a})});var qA,aB;function fke(){if(aB)return qA;aB=1;var e=Math.ceil,t=Math.max;function n(r,a,s,o){for(var l=-1,c=t(e((a-r)/(s||1)),0),u=Array(c);c--;)u[o?c:++l]=r,r+=s;return u}return qA=n,qA}var UA,sB;function hG(){if(sB)return UA;sB=1;var e=MV(),t=1/0,n=17976931348623157e292;function r(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-1/0){var s=a<0?-1:1;return s*n}return a===a?a:0}return UA=r,UA}var VA,oB;function pke(){if(oB)return VA;oB=1;var e=fke(),t=BN(),n=hG();function r(a){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,a)}}return VA=r,VA}var HA,lB;function mke(){if(lB)return HA;lB=1;var e=pke(),t=e();return HA=t,HA}var gke=mke();const DS=Bn(gke);function jb(e){"@babel/helpers - typeof";return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jb(e)}function cB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cB(Object(n),!0).forEach(function(r){fG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fG(e,t,n){return t=yke(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yke(e){var t=vke(e,"string");return jb(t)=="symbol"?t:t+""}function vke(e,t){if(jb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(jb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xke=["Webkit","Moz","O","ms"],bke=function(t,n){var r=t.replace(/(\w)/,function(s){return s.toUpperCase()}),a=xke.reduce(function(s,o){return uB(uB({},s),{},fG({},o+r,n))},{});return a[t]=n,a};function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function MS(){return MS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MS.apply(this,arguments)}function dB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function GA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dB(Object(n),!0).forEach(function(r){vs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mG(r.key),r)}}function wke(e,t,n){return t&&hB(e.prototype,t),n&&hB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ske(e,t,n){return t=IS(t),Nke(e,pG()?Reflect.construct(t,n||[],IS(e).constructor):t.apply(e,n))}function Nke(e,t){if(t&&(Ng(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ke(e)}function _ke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pG=function(){return!!e})()}function IS(e){return IS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},IS(e)}function Cke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OO(e,t)}function OO(e,t){return OO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},OO(e,t)}function vs(e,t,n){return t=mG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mG(e){var t=Tke(e,"string");return Ng(t)=="symbol"?t:t+""}function Tke(e,t){if(Ng(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ng(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Eke=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=kx().domain(DS(0,c)).range([s,s+o-l]),f=u.domain().map(function(p){return u(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:f}},fB=function(t){return t.changedTouches&&!!t.changedTouches.length},_g=function(e){function t(n){var r;return jke(this,t),r=Ske(this,t,[n]),vs(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),vs(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),vs(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),vs(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),vs(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),vs(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),vs(r,"handleSlideDragStart",function(a){var s=fB(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Cke(t,e),wke(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,s=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,p=Math.min(a,s),y=Math.max(a,s),v=t.getIndexInRange(o,p),x=t.getIndexInRange(o,y);return{startIndex:v-v%c,endIndex:x===f?f:x-x%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=ri(s[r],l,r);return tn(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,f=c.width,p=c.travellerWidth,y=c.startIndex,v=c.endIndex,x=c.onChange,b=r.pageX-s;b>0?b=Math.min(b,u+f-p-l,u+f-p-o):b<0&&(b=Math.max(b,u-o,u-l));var w=this.getIndex({startX:o+b,endX:l+b});(w.startIndex!==y||w.endIndex!==v)&&x&&x(w),this.setState({startX:o+b,endX:l+b,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var s=fB(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],f=this.props,p=f.x,y=f.width,v=f.travellerWidth,x=f.onChange,b=f.gap,w=f.data,_={startX:this.state.startX,endX:this.state.endX},T=r.pageX-s;T>0?T=Math.min(T,p+y-v-u):T<0&&(T=Math.max(T,p-u)),_[o]=u+T;var C=this.getIndex(_),O=C.startIndex,E=C.endIndex,P=function(){var F=w.length-1;return o==="startX"&&(l>c?O%b===0:E%b===0)||l<c&&E===F||o==="endX"&&(l>c?E%b===0:O%b===0)||l>c&&E===F};this.setState(vs(vs({},o,u+T),"brushMoveStartX",r.pageX),function(){x&&P()&&x(C)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[a],p=l.indexOf(f);if(p!==-1){var y=p+r;if(!(y===-1||y>=l.length)){var v=l[y];a==="startX"&&v>=u||a==="endX"&&v<=c||this.setState(vs({},a,v),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return ye.createElement("rect",{stroke:u,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.data,u=r.children,f=r.padding,p=j.Children.only(u);return p?ye.cloneElement(p,{x:a,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var s,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,p=c.height,y=c.traveller,v=c.ariaLabel,x=c.data,b=c.startIndex,w=c.endIndex,_=Math.max(r,this.props.x),T=GA(GA({},Ft(this.props,!1)),{},{x:_,y:u,width:f,height:p}),C=v||"Min value: ".concat((s=x[b])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=x[w])===null||o===void 0?void 0:o.name);return ye.createElement(On,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),l.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(y,T))}},{key:"renderSlide",value:function(r,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,f=Math.min(r,a)+u,p=Math.max(Math.abs(a-r)-u,0);return ye.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,s=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,f=this.state,p=f.startX,y=f.endX,v=5,x={pointerEvents:"none",fill:u};return ye.createElement(On,{className:"recharts-brush-texts"},ye.createElement(Af,MS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,y)-v,y:o+l/2},x),this.getTextOfTick(a)),ye.createElement(Af,MS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,y)+c+v,y:o+l/2},x),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,a=r.data,s=r.className,o=r.children,l=r.x,c=r.y,u=r.width,f=r.height,p=r.alwaysShowText,y=this.state,v=y.startX,x=y.endX,b=y.isTextActive,w=y.isSlideMoving,_=y.isTravellerMoving,T=y.isTravellerFocused;if(!a||!a.length||!yt(l)||!yt(c)||!yt(u)||!yt(f)||u<=0||f<=0)return null;var C=fn("recharts-brush",s),O=ye.Children.count(o)===1,E=bke("userSelect","none");return ye.createElement(On,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),O&&this.renderPanorama(),this.renderSlide(v,x),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(x,"endX"),(b||w||_||T||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,s=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return ye.createElement(ye.Fragment,null,ye.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),ye.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),ye.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var s;return ye.isValidElement(r)?s=ye.cloneElement(r,a):tn(r)?s=r(a):s=t.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(r,a){var s=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,f=r.startIndex,p=r.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return GA({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?Eke({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var y=a.scale.domain().map(function(v){return a.scale(v)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(r,a){for(var s=r.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(j.PureComponent);vs(_g,"displayName","Brush");vs(_g,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var WA,pB;function Ake(){if(pB)return WA;pB=1;var e=_M();function t(n,r){var a;return e(n,function(s,o,l){return a=r(s,o,l),!a}),!!a}return WA=t,WA}var KA,mB;function kke(){if(mB)return KA;mB=1;var e=dV(),t=Rl(),n=Ake(),r=is(),a=BN();function s(o,l,c){var u=r(o)?e:n;return c&&a(o,l,c)&&(l=void 0),u(o,t(l,3))}return KA=s,KA}var Pke=kke();const Oke=Bn(Pke);var Pl=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},YA,gB;function Dke(){if(gB)return YA;gB=1;var e=AV();function t(n,r,a){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[r]=a}return YA=t,YA}var QA,yB;function Mke(){if(yB)return QA;yB=1;var e=Dke(),t=TV(),n=Rl();function r(a,s){var o={};return s=n(s,3),t(a,function(l,c,u){e(o,c,s(l,c,u))}),o}return QA=r,QA}var Ike=Mke();const Rke=Bn(Ike);var XA,vB;function Lke(){if(vB)return XA;vB=1;function e(t,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(!n(t[r],r,t))return!1;return!0}return XA=e,XA}var JA,xB;function Fke(){if(xB)return JA;xB=1;var e=_M();function t(n,r){var a=!0;return e(n,function(s,o,l){return a=!!r(s,o,l),a}),a}return JA=t,JA}var ZA,bB;function $ke(){if(bB)return ZA;bB=1;var e=Lke(),t=Fke(),n=Rl(),r=is(),a=BN();function s(o,l,c){var u=r(o)?e:t;return c&&a(o,l,c)&&(l=void 0),u(o,n(l,3))}return ZA=s,ZA}var Bke=$ke();const gG=Bn(Bke);var zke=["x","y"];function wb(e){"@babel/helpers - typeof";return wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wb(e)}function DO(){return DO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DO.apply(this,arguments)}function jB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jB(Object(n),!0).forEach(function(r){qke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qke(e,t,n){return t=Uke(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uke(e){var t=Vke(e,"string");return wb(t)=="symbol"?t:t+""}function Vke(e,t){if(wb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hke(e,t){if(e==null)return{};var n=Gke(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gke(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Wke(e,t){var n=e.x,r=e.y,a=Hke(e,zke),s="".concat(n),o=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),f=parseInt(u,10),p="".concat(t.width||a.width),y=parseInt(p,10);return hx(hx(hx(hx(hx({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function wB(e){return ye.createElement(cG,DO({shapeType:"rectangle",propTransformer:Wke,activeClassName:"recharts-active-bar"},e))}var Kke=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var s=yt(r)||vbe(r);return s?t(r,a):(s||Of(),n)}},Yke=["value","background"],yG;function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function Qke(e,t){if(e==null)return{};var n=Xke(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xke(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function RS(){return RS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RS.apply(this,arguments)}function SB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function di(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SB(Object(n),!0).forEach(function(r){ld(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xG(r.key),r)}}function Zke(e,t,n){return t&&NB(e.prototype,t),n&&NB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ePe(e,t,n){return t=LS(t),tPe(e,vG()?Reflect.construct(t,n||[],LS(e).constructor):t.apply(e,n))}function tPe(e,t){if(t&&(Cg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nPe(e)}function nPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vG=function(){return!!e})()}function LS(e){return LS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},LS(e)}function rPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MO(e,t)}function MO(e,t){return MO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},MO(e,t)}function ld(e,t,n){return t=xG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xG(e){var t=iPe(e,"string");return Cg(t)=="symbol"?t:t+""}function iPe(e,t){if(Cg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Cd=function(e){function t(){var n;Jke(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=ePe(this,t,[].concat(a)),ld(n,"state",{isAnimationFinished:!1}),ld(n,"id",Lf("recharts-bar-")),ld(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),ld(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return rPe(t,e),Zke(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,f=Ft(this.props,!1);return r&&r.map(function(p,y){var v=y===c,x=v?u:o,b=di(di(di({},f),p),{},{isActive:v,option:x,index:y,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ye.createElement(On,RS({className:"recharts-bar-rectangle"},Ef(a.props,p,y),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(y)}),ye.createElement(wB,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,f=a.animationEasing,p=a.animationId,y=this.state.prevData;return ye.createElement(Do,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var x=v.t,b=s.map(function(w,_){var T=y&&y[_];if(T){var C=xi(T.x,w.x),O=xi(T.y,w.y),E=xi(T.width,w.width),P=xi(T.height,w.height);return di(di({},w),{},{x:C(x),y:O(x),width:E(x),height:P(x)})}if(o==="horizontal"){var I=xi(0,w.height),F=I(x);return di(di({},w),{},{y:w.y+w.height-F,height:F})}var $=xi(0,w.width),z=$(x);return di(di({},w),{},{width:z})});return ye.createElement(On,null,r.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!kf(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=Ft(this.props.background,!1);return s.map(function(u,f){u.value;var p=u.background,y=Qke(u,Yke);if(!p)return null;var v=di(di(di(di(di({},y),{},{fill:"#eee"},p),c),Ef(r.props,u,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return ye.createElement(wB,RS({key:"background-bar-".concat(f),option:r.props.background,isActive:f===l},v))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,p=Ts(f,n0);if(!p)return null;var y=u==="vertical"?o[0].height/2:o[0].width/2,v=function(w,_){var T=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:T,errorVal:ri(w,_)}},x={clipPath:r?"url(#clipPath-".concat(a,")"):null};return ye.createElement(On,x,p.map(function(b){return ye.cloneElement(b,{key:"error-bar-".concat(a,"-").concat(b.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:y,dataPointFormatter:v})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,s=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,f=r.top,p=r.width,y=r.height,v=r.isAnimationActive,x=r.background,b=r.id;if(a||!s||!s.length)return null;var w=this.state.isAnimationFinished,_=fn("recharts-bar",o),T=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,O=T||C,E=cn(b)?this.id:b;return ye.createElement(On,{className:_},T||C?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(E)},ye.createElement("rect",{x:T?u:u-p/2,y:C?f:f-y/2,width:T?p:p*2,height:C?y:y*2}))):null,ye.createElement(On,{className:"recharts-bar-rectangles",clipPath:O?"url(#clipPath-".concat(E,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(O,E),(!v||w)&&kl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(j.PureComponent);yG=Cd;ld(Cd,"displayName","Bar");ld(Cd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!wd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ld(Cd,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,p=e.displayedData,y=e.offset,v=OCe(r,n);if(!v)return null;var x=t.layout,b=n.type.defaultProps,w=b!==void 0?di(di({},b),n.props):n.props,_=w.dataKey,T=w.children,C=w.minPointSize,O=x==="horizontal"?o:s,E=u?O.scale.domain():null,P=$Ce({numericAxis:O}),I=Ts(T,Xb),F=p.map(function($,z){var L,H,V,ne,Z,q;u?L=DCe(u[f+z],E):(L=ri($,_),Array.isArray(L)||(L=[P,L]));var K=Kke(C,yG.defaultProps.minPointSize)(L[1],z);if(x==="horizontal"){var se,G=[o.scale(L[0]),o.scale(L[1])],B=G[0],fe=G[1];H=Q$({axis:s,ticks:l,bandSize:a,offset:v.offset,entry:$,index:z}),V=(se=fe??B)!==null&&se!==void 0?se:void 0,ne=v.size;var me=B-fe;if(Z=Number.isNaN(me)?0:me,q={x:H,y:o.y,width:ne,height:o.height},Math.abs(K)>0&&Math.abs(Z)<Math.abs(K)){var Y=Ta(Z||K)*(Math.abs(K)-Math.abs(Z));V-=Y,Z+=Y}}else{var xe=[s.scale(L[0]),s.scale(L[1])],Ie=xe[0],Ne=xe[1];if(H=Ie,V=Q$({axis:o,ticks:c,bandSize:a,offset:v.offset,entry:$,index:z}),ne=Ne-Ie,Z=v.size,q={x:s.x,y:V,width:s.width,height:Z},Math.abs(K)>0&&Math.abs(ne)<Math.abs(K)){var ke=Ta(ne||K)*(Math.abs(K)-Math.abs(ne));ne+=ke}}return di(di(di({},$),{},{x:H,y:V,width:ne,height:Z,value:u?L:L[1],payload:$,background:q},I&&I[z]&&I[z].props),{},{tooltipPayload:[HH(n,$)],tooltipPosition:{x:H+ne/2,y:V+Z/2}})});return di({data:F,layout:x},y)});function Sb(e){"@babel/helpers - typeof";return Sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sb(e)}function aPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bG(r.key),r)}}function sPe(e,t,n){return t&&_B(e.prototype,t),n&&_B(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function CB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CB(Object(n),!0).forEach(function(r){r_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r_(e,t,n){return t=bG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bG(e){var t=oPe(e,"string");return Sb(t)=="symbol"?t:t+""}function oPe(e,t){if(Sb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eI=function(t,n,r,a,s){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(n),p={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},y=!!xs(u,Cd);return f.reduce(function(v,x){var b=n[x],w=b.orientation,_=b.domain,T=b.padding,C=T===void 0?{}:T,O=b.mirror,E=b.reversed,P="".concat(w).concat(O?"Mirror":""),I,F,$,z,L;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var H=_[1]-_[0],V=1/0,ne=b.categoricalDomain.sort(jbe);if(ne.forEach(function(xe,Ie){Ie>0&&(V=Math.min((xe||0)-(ne[Ie-1]||0),V))}),Number.isFinite(V)){var Z=V/H,q=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(I=Z*q/2),b.padding==="no-gap"){var K=Ea(t.barCategoryGap,Z*q),se=Z*q/2;I=se-K-(se-K)/q*K}}}a==="xAxis"?F=[r.left+(C.left||0)+(I||0),r.left+r.width-(C.right||0)-(I||0)]:a==="yAxis"?F=c==="horizontal"?[r.top+r.height-(C.bottom||0),r.top+(C.top||0)]:[r.top+(C.top||0)+(I||0),r.top+r.height-(C.bottom||0)-(I||0)]:F=b.range,E&&(F=[F[1],F[0]]);var G=zH(b,s,y),B=G.scale,fe=G.realScaleType;B.domain(_).range(F),qH(B);var me=UH(B,To(To({},b),{},{realScaleType:fe}));a==="xAxis"?(L=w==="top"&&!O||w==="bottom"&&O,$=r.left,z=p[P]-L*b.height):a==="yAxis"&&(L=w==="left"&&!O||w==="right"&&O,$=p[P]-L*b.width,z=r.top);var Y=To(To(To({},b),me),{},{realScaleType:fe,x:$,y:z,scale:B,width:a==="xAxis"?r.width:b.width,height:a==="yAxis"?r.height:b.height});return Y.bandSize=jS(Y,me),!b.hide&&a==="xAxis"?p[P]+=(L?-1:1)*Y.height:b.hide||(p[P]+=(L?-1:1)*Y.width),To(To({},v),{},r_({},x,Y))},{})},jG=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(a,o),width:Math.abs(s-r),height:Math.abs(o-a)}},lPe=function(t){var n=t.x1,r=t.y1,a=t.x2,s=t.y2;return jG({x:n,y:r},{x:a,y:s})},wG=function(){function e(t){aPe(this,e),this.scale=t}return sPe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?n>=a&&n<=s:n>=s&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();r_(wG,"EPS",1e-4);var tI=function(t){var n=Object.keys(t).reduce(function(r,a){return To(To({},r),{},r_({},a,wG.create(t[a])))},{});return To(To({},n),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return Rke(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return gG(a,function(s,o){return n[o].isInRange(s)})}})};function cPe(e){return(e%180+180)%180}var uPe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=cPe(a),o=s*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},ek,TB;function dPe(){if(TB)return ek;TB=1;var e=Rl(),t=Qb(),n=FN();function r(a){return function(s,o,l){var c=Object(s);if(!t(s)){var u=e(o,3);s=n(s),o=function(p){return u(c[p],p,c)}}var f=a(s,o,l);return f>-1?c[u?s[f]:f]:void 0}}return ek=r,ek}var tk,EB;function hPe(){if(EB)return tk;EB=1;var e=hG();function t(n){var r=e(n),a=r%1;return r===r?a?r-a:r:0}return tk=t,tk}var nk,AB;function fPe(){if(AB)return nk;AB=1;var e=wV(),t=Rl(),n=hPe(),r=Math.max;function a(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var u=l==null?0:n(l);return u<0&&(u=r(c+u,0)),e(s,t(o,3),u)}return nk=a,nk}var rk,kB;function pPe(){if(kB)return rk;kB=1;var e=dPe(),t=fPe(),n=e(t);return rk=n,rk}var mPe=pPe();const gPe=Bn(mPe);var yPe=L7();const vPe=Bn(yPe);var xPe=vPe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),nI=j.createContext(void 0),rI=j.createContext(void 0),SG=j.createContext(void 0),NG=j.createContext({}),_G=j.createContext(void 0),CG=j.createContext(0),TG=j.createContext(0),PB=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,s=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=xPe(s);return ye.createElement(nI.Provider,{value:r},ye.createElement(rI.Provider,{value:a},ye.createElement(NG.Provider,{value:s},ye.createElement(SG.Provider,{value:f},ye.createElement(_G.Provider,{value:o},ye.createElement(CG.Provider,{value:u},ye.createElement(TG.Provider,{value:c},l)))))))},bPe=function(){return j.useContext(_G)},EG=function(t){var n=j.useContext(nI);n==null&&Of();var r=n[t];return r==null&&Of(),r},jPe=function(){var t=j.useContext(nI);return Qu(t)},wPe=function(){var t=j.useContext(rI),n=gPe(t,function(r){return gG(r.domain,Number.isFinite)});return n||Qu(t)},AG=function(t){var n=j.useContext(rI);n==null&&Of();var r=n[t];return r==null&&Of(),r},SPe=function(){var t=j.useContext(SG);return t},NPe=function(){return j.useContext(NG)},iI=function(){return j.useContext(TG)},aI=function(){return j.useContext(CG)};function Tg(e){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(e)}function _Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CPe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PG(r.key),r)}}function TPe(e,t,n){return t&&CPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EPe(e,t,n){return t=FS(t),APe(e,kG()?Reflect.construct(t,n||[],FS(e).constructor):t.apply(e,n))}function APe(e,t){if(t&&(Tg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kPe(e)}function kPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kG=function(){return!!e})()}function FS(e){return FS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},FS(e)}function PPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IO(e,t)}function IO(e,t){return IO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},IO(e,t)}function OB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function DB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OB(Object(n),!0).forEach(function(r){sI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sI(e,t,n){return t=PG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PG(e){var t=OPe(e,"string");return Tg(t)=="symbol"?t:t+""}function OPe(e,t){if(Tg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function DPe(e,t){return LPe(e)||RPe(e,t)||IPe(e,t)||MPe()}function MPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IPe(e,t){if(e){if(typeof e=="string")return MB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MB(e,t)}}function MB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RPe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function LPe(e){if(Array.isArray(e))return e}function RO(){return RO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RO.apply(this,arguments)}var FPe=function(t,n){var r;return ye.isValidElement(t)?r=ye.cloneElement(t,n):tn(t)?r=t(n):r=ye.createElement("line",RO({},n,{className:"recharts-reference-line-line"})),r},$Pe=function(t,n,r,a,s,o,l,c,u){var f=s.x,p=s.y,y=s.width,v=s.height;if(r){var x=u.y,b=t.y.apply(x,{position:o});if(Pl(u,"discard")&&!t.y.isInRange(b))return null;var w=[{x:f+y,y:b},{x:f,y:b}];return c==="left"?w.reverse():w}if(n){var _=u.x,T=t.x.apply(_,{position:o});if(Pl(u,"discard")&&!t.x.isInRange(T))return null;var C=[{x:T,y:p+v},{x:T,y:p}];return l==="top"?C.reverse():C}if(a){var O=u.segment,E=O.map(function(P){return t.apply(P,{position:o})});return Pl(u,"discard")&&Oke(E,function(P){return!t.isInRange(P)})?null:E}return null};function BPe(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=bPe(),f=EG(a),p=AG(s),y=SPe();if(!u||!y)return null;Oo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=tI({x:f.scale,y:p.scale}),x=bi(t),b=bi(n),w=r&&r.length===2,_=$Pe(v,x,b,w,y,e.position,f.orientation,p.orientation,e);if(!_)return null;var T=DPe(_,2),C=T[0],O=C.x,E=C.y,P=T[1],I=P.x,F=P.y,$=Pl(e,"hidden")?"url(#".concat(u,")"):void 0,z=DB(DB({clipPath:$},Ft(e,!0)),{},{x1:O,y1:E,x2:I,y2:F});return ye.createElement(On,{className:fn("recharts-reference-line",l)},FPe(o,z),Ei.renderCallByParent(e,lPe({x1:O,y1:E,x2:I,y2:F})))}var oI=function(e){function t(){return _Pe(this,t),EPe(this,t,arguments)}return PPe(t,e),TPe(t,[{key:"render",value:function(){return ye.createElement(BPe,this.props)}}])}(ye.Component);sI(oI,"displayName","ReferenceLine");sI(oI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function LO(){return LO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LO.apply(this,arguments)}function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function IB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function RB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IB(Object(n),!0).forEach(function(r){i_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qPe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,DG(r.key),r)}}function UPe(e,t,n){return t&&qPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VPe(e,t,n){return t=$S(t),HPe(e,OG()?Reflect.construct(t,n||[],$S(e).constructor):t.apply(e,n))}function HPe(e,t){if(t&&(Eg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GPe(e)}function GPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OG=function(){return!!e})()}function $S(e){return $S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$S(e)}function WPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FO(e,t)}function FO(e,t){return FO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},FO(e,t)}function i_(e,t,n){return t=DG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DG(e){var t=KPe(e,"string");return Eg(t)=="symbol"?t:t+""}function KPe(e,t){if(Eg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var YPe=function(t){var n=t.x,r=t.y,a=t.xAxis,s=t.yAxis,o=tI({x:a.scale,y:s.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Pl(t,"discard")&&!o.isInRange(l)?null:l},a_=function(e){function t(){return zPe(this,t),VPe(this,t,arguments)}return WPe(t,e),UPe(t,[{key:"render",value:function(){var r=this.props,a=r.x,s=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=bi(a),f=bi(s);if(Oo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var p=YPe(this.props);if(!p)return null;var y=p.x,v=p.y,x=this.props,b=x.shape,w=x.className,_=Pl(this.props,"hidden")?"url(#".concat(c,")"):void 0,T=RB(RB({clipPath:_},Ft(this.props,!0)),{},{cx:y,cy:v});return ye.createElement(On,{className:fn("recharts-reference-dot",w)},t.renderDot(b,T),Ei.renderCallByParent(this.props,{x:y-o,y:v-o,width:2*o,height:2*o}))}}])}(ye.Component);i_(a_,"displayName","ReferenceDot");i_(a_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});i_(a_,"renderDot",function(e,t){var n;return ye.isValidElement(e)?n=ye.cloneElement(e,t):tn(e)?n=e(t):n=ye.createElement(r0,LO({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function $O(){return $O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$O.apply(this,arguments)}function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}function LB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function FB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LB(Object(n),!0).forEach(function(r){s_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XPe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IG(r.key),r)}}function JPe(e,t,n){return t&&XPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZPe(e,t,n){return t=BS(t),eOe(e,MG()?Reflect.construct(t,n||[],BS(e).constructor):t.apply(e,n))}function eOe(e,t){if(t&&(Ag(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tOe(e)}function tOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MG=function(){return!!e})()}function BS(e){return BS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},BS(e)}function nOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BO(e,t)}function BO(e,t){return BO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},BO(e,t)}function s_(e,t,n){return t=IG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IG(e){var t=rOe(e,"string");return Ag(t)=="symbol"?t:t+""}function rOe(e,t){if(Ag(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ag(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var iOe=function(t,n,r,a,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,f=s.xAxis,p=s.yAxis;if(!f||!p)return null;var y=tI({x:f.scale,y:p.scale}),v={x:t?y.x.apply(o,{position:"start"}):y.x.rangeMin,y:r?y.y.apply(c,{position:"start"}):y.y.rangeMin},x={x:n?y.x.apply(l,{position:"end"}):y.x.rangeMax,y:a?y.y.apply(u,{position:"end"}):y.y.rangeMax};return Pl(s,"discard")&&(!y.isInRange(v)||!y.isInRange(x))?null:jG(v,x)},o_=function(e){function t(){return QPe(this,t),ZPe(this,t,arguments)}return nOe(t,e),JPe(t,[{key:"render",value:function(){var r=this.props,a=r.x1,s=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,f=r.clipPathId;Oo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=bi(a),y=bi(s),v=bi(o),x=bi(l),b=this.props.shape;if(!p&&!y&&!v&&!x&&!b)return null;var w=iOe(p,y,v,x,this.props);if(!w&&!b)return null;var _=Pl(this.props,"hidden")?"url(#".concat(f,")"):void 0;return ye.createElement(On,{className:fn("recharts-reference-area",c)},t.renderRect(b,FB(FB({clipPath:_},Ft(this.props,!0)),w)),Ei.renderCallByParent(this.props,w))}}])}(ye.Component);s_(o_,"displayName","ReferenceArea");s_(o_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});s_(o_,"renderRect",function(e,t){var n;return ye.isValidElement(e)?n=ye.cloneElement(e,t):tn(e)?n=e(t):n=ye.createElement(ZM,$O({},t,{className:"recharts-reference-area-rect"})),n});function RG(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function aOe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return uPe(r,n)}function sOe(e,t,n){var r=n==="width",a=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:r?a:s,end:r?a+o:s+l}:{start:r?a+o:s+l,end:r?a:s}}function zS(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-a)<=0}function oOe(e,t){return RG(e,t+1)}function lOe(e,t,n,r,a){for(var s=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,p=function(){var x=r==null?void 0:r[c];if(x===void 0)return{v:RG(r,u)};var b=c,w,_=function(){return w===void 0&&(w=n(x,b)),w},T=x.coordinate,C=c===0||zS(e,T,_,f,l);C||(c=0,f=o,u+=1),C&&(f=T+e*(_()/2+a),c+=u)},y;u<=s.length;)if(y=p(),y)return y.v;return[]}function Nb(e){"@babel/helpers - typeof";return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nb(e)}function $B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$B(Object(n),!0).forEach(function(r){cOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$B(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cOe(e,t,n){return t=uOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uOe(e){var t=dOe(e,"string");return Nb(t)=="symbol"?t:t+""}function dOe(e,t){if(Nb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Nb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hOe(e,t,n,r,a){for(var s=(r||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(y){var v=s[y],x,b=function(){return x===void 0&&(x=n(v,y)),x};if(y===o-1){var w=e*(v.coordinate+e*b()/2-c);s[y]=v=ea(ea({},v),{},{tickCoord:w>0?v.coordinate-w*e:v.coordinate})}else s[y]=v=ea(ea({},v),{},{tickCoord:v.coordinate});var _=zS(e,v.tickCoord,b,l,c);_&&(c=v.tickCoord-e*(b()/2+a),s[y]=ea(ea({},v),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return s}function fOe(e,t,n,r,a,s){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var f=r[l-1],p=n(f,l-1),y=e*(f.coordinate+e*p/2-u);o[l-1]=f=ea(ea({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate});var v=zS(e,f.tickCoord,function(){return p},c,u);v&&(u=f.tickCoord-e*(p/2+a),o[l-1]=ea(ea({},f),{},{isShow:!0}))}for(var x=s?l-1:l,b=function(T){var C=o[T],O,E=function(){return O===void 0&&(O=n(C,T)),O};if(T===0){var P=e*(C.coordinate-e*E()/2-c);o[T]=C=ea(ea({},C),{},{tickCoord:P<0?C.coordinate-P*e:C.coordinate})}else o[T]=C=ea(ea({},C),{},{tickCoord:C.coordinate});var I=zS(e,C.tickCoord,E,c,u);I&&(c=C.tickCoord+e*(E()/2+a),o[T]=ea(ea({},C),{},{isShow:!0}))},w=0;w<x;w++)b(w);return o}function lI(e,t,n){var r=e.tick,a=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,p=e.angle;if(!a||!a.length||!r)return[];if(yt(c)||wd.isSsr)return oOe(a,typeof c=="number"&&yt(c)?c:0);var y=[],v=l==="top"||l==="bottom"?"width":"height",x=f&&v==="width"?Ax(f,{fontSize:t,letterSpacing:n}):{width:0,height:0},b=function(C,O){var E=tn(u)?u(C.value,O):C.value;return v==="width"?aOe(Ax(E,{fontSize:t,letterSpacing:n}),x,p):Ax(E,{fontSize:t,letterSpacing:n})[v]},w=a.length>=2?Ta(a[1].coordinate-a[0].coordinate):1,_=sOe(s,w,v);return c==="equidistantPreserveStart"?lOe(w,_,b,a,o):(c==="preserveStart"||c==="preserveStartEnd"?y=fOe(w,_,b,a,o,c==="preserveStartEnd"):y=hOe(w,_,b,a,o),y.filter(function(T){return T.isShow}))}var pOe=["viewBox"],mOe=["viewBox"],gOe=["ticks"];function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rm.apply(this,arguments)}function BB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BB(Object(n),!0).forEach(function(r){cI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ik(e,t){if(e==null)return{};var n=yOe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FG(r.key),r)}}function xOe(e,t,n){return t&&zB(e.prototype,t),n&&zB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bOe(e,t,n){return t=qS(t),jOe(e,LG()?Reflect.construct(t,n||[],qS(e).constructor):t.apply(e,n))}function jOe(e,t){if(t&&(kg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wOe(e)}function wOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LG=function(){return!!e})()}function qS(e){return qS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qS(e)}function SOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zO(e,t)}function zO(e,t){return zO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},zO(e,t)}function cI(e,t,n){return t=FG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FG(e){var t=NOe(e,"string");return kg(t)=="symbol"?t:t+""}function NOe(e,t){if(kg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ey=function(e){function t(n){var r;return vOe(this,t),r=bOe(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return SOe(t,e),xOe(t,[{key:"shouldComponentUpdate",value:function(r,a){var s=r.viewBox,o=ik(r,pOe),l=this.props,c=l.viewBox,u=ik(l,mOe);return!qm(s,c)||!qm(o,u)||!qm(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,f=a.tickSize,p=a.mirror,y=a.tickMargin,v,x,b,w,_,T,C=p?-1:1,O=r.tickSize||f,E=yt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":v=x=r.coordinate,w=o+ +!p*c,b=w-C*O,T=b-C*y,_=E;break;case"left":b=w=r.coordinate,x=s+ +!p*l,v=x-C*O,_=v-C*y,T=E;break;case"right":b=w=r.coordinate,x=s+ +p*l,v=x+C*O,_=v+C*y,T=E;break;default:v=x=r.coordinate,w=o+ +p*c,b=w+C*O,T=b+C*y,_=E;break}return{line:{x1:v,y1:b,x2:x,y2:w},tick:{x:_,y:T}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,f=r.axisLine,p=gi(gi(gi({},Ft(this.props,!1)),Ft(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var y=+(c==="top"&&!u||c==="bottom"&&u);p=gi(gi({},p),{},{x1:a,y1:s+y*l,x2:a+o,y2:s+y*l})}else{var v=+(c==="left"&&!u||c==="right"&&u);p=gi(gi({},p),{},{x1:a+v*o,y1:s,x2:a+v*o,y2:s+l})}return ye.createElement("line",Rm({},p,{className:fn("recharts-cartesian-axis-line",Cs(f,"className"))}))}},{key:"renderTicks",value:function(r,a,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,p=l.tickFormatter,y=l.unit,v=lI(gi(gi({},this.props),{},{ticks:r}),a,s),x=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),w=Ft(this.props,!1),_=Ft(f,!1),T=gi(gi({},w),{},{fill:"none"},Ft(c,!1)),C=v.map(function(O,E){var P=o.getTickLineCoord(O),I=P.line,F=P.tick,$=gi(gi(gi(gi({textAnchor:x,verticalAnchor:b},w),{},{stroke:"none",fill:u},_),F),{},{index:E,payload:O,visibleTicksCount:v.length,tickFormatter:p});return ye.createElement(On,Rm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Ef(o.props,O,E)),c&&ye.createElement("line",Rm({},T,I,{className:fn("recharts-cartesian-axis-tick-line",Cs(c,"className"))})),f&&t.renderTickItem(f,$,"".concat(tn(p)?p(O.value,E):O.value).concat(y||"")))});return ye.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var r=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var p=this.props,y=p.ticks,v=ik(p,gOe),x=y;return tn(c)&&(x=y&&y.length>0?c(this.props):c(v)),o<=0||l<=0||!x||!x.length?null:ye.createElement(On,{className:fn("recharts-cartesian-axis",u),ref:function(w){r.layerReference=w}},s&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),Ei.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,s){var o,l=fn(a.className,"recharts-cartesian-axis-tick-value");return ye.isValidElement(r)?o=ye.cloneElement(r,gi(gi({},a),{},{className:l})):tn(r)?o=r(gi(gi({},a),{},{className:l})):o=ye.createElement(Af,Rm({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(j.Component);cI(ey,"displayName","CartesianAxis");cI(ey,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _Oe=["x1","y1","x2","y2","key"],COe=["offset"];function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function qB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function na(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qB(Object(n),!0).forEach(function(r){TOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TOe(e,t,n){return t=EOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EOe(e){var t=AOe(e,"string");return Df(t)=="symbol"?t:t+""}function AOe(e,t){if(Df(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ef(){return ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ef.apply(this,arguments)}function UB(e,t){if(e==null)return{};var n=kOe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var POe=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return ye.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function $G(e,t){var n;if(ye.isValidElement(e))n=ye.cloneElement(e,t);else if(tn(e))n=e(t);else{var r=t.x1,a=t.y1,s=t.x2,o=t.y2,l=t.key,c=UB(t,_Oe),u=Ft(c,!1);u.offset;var f=UB(u,COe);n=ye.createElement("line",ef({},f,{x1:r,y1:a,x2:s,y2:o,fill:"none",key:l}))}return n}function OOe(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=na(na({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return $G(a,u)});return ye.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function DOe(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,s=e.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=na(na({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return $G(a,u)});return ye.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function MOe(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(y){return Math.round(y+a-a)}).sort(function(y,v){return y-v});a!==f[0]&&f.unshift(0);var p=f.map(function(y,v){var x=!f[v+1],b=x?a+o-y:f[v+1]-y;if(b<=0)return null;var w=v%t.length;return ye.createElement("rect",{key:"react-".concat(v),y,x:r,height:b,width:s,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function IOe(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var f=u.map(function(y){return Math.round(y+s-s)}).sort(function(y,v){return y-v});s!==f[0]&&f.unshift(0);var p=f.map(function(y,v){var x=!f[v+1],b=x?s+l-y:f[v+1]-y;if(b<=0)return null;var w=v%r.length;return ye.createElement("rect",{key:"react-".concat(v),x:y,y:o,width:b,height:c,stroke:"none",fill:r[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var ROe=function(t,n){var r=t.xAxis,a=t.width,s=t.height,o=t.offset;return BH(lI(na(na(na({},ey.defaultProps),r),{},{ticks:wc(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,n)},LOe=function(t,n){var r=t.yAxis,a=t.width,s=t.height,o=t.offset;return BH(lI(na(na(na({},ey.defaultProps),r),{},{ticks:wc(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,n)},Nm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function _b(e){var t,n,r,a,s,o,l=iI(),c=aI(),u=NPe(),f=na(na({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Nm.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Nm.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Nm.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Nm.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:Nm.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Nm.verticalFill,x:yt(e.x)?e.x:u.left,y:yt(e.y)?e.y:u.top,width:yt(e.width)?e.width:u.width,height:yt(e.height)?e.height:u.height}),p=f.x,y=f.y,v=f.width,x=f.height,b=f.syncWithTicks,w=f.horizontalValues,_=f.verticalValues,T=jPe(),C=wPe();if(!yt(v)||v<=0||!yt(x)||x<=0||!yt(p)||p!==+p||!yt(y)||y!==+y)return null;var O=f.verticalCoordinatesGenerator||ROe,E=f.horizontalCoordinatesGenerator||LOe,P=f.horizontalPoints,I=f.verticalPoints;if((!P||!P.length)&&tn(E)){var F=w&&w.length,$=E({yAxis:C?na(na({},C),{},{ticks:F?w:C.ticks}):void 0,width:l,height:c,offset:u},F?!0:b);Oo(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Df($),"]")),Array.isArray($)&&(P=$)}if((!I||!I.length)&&tn(O)){var z=_&&_.length,L=O({xAxis:T?na(na({},T),{},{ticks:z?_:T.ticks}):void 0,width:l,height:c,offset:u},z?!0:b);Oo(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Df(L),"]")),Array.isArray(L)&&(I=L)}return ye.createElement("g",{className:"recharts-cartesian-grid"},ye.createElement(POe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),ye.createElement(OOe,ef({},f,{offset:u,horizontalPoints:P,xAxis:T,yAxis:C})),ye.createElement(DOe,ef({},f,{offset:u,verticalPoints:I,xAxis:T,yAxis:C})),ye.createElement(MOe,ef({},f,{horizontalPoints:P})),ye.createElement(IOe,ef({},f,{verticalPoints:I})))}_b.displayName="CartesianGrid";var FOe=["type","layout","connectNulls","ref"],$Oe=["key"];function Pg(e){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg(e)}function VB(e,t){if(e==null)return{};var n=BOe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function BOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ix(){return Ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ix.apply(this,arguments)}function HB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HB(Object(n),!0).forEach(function(r){Eo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _m(e){return VOe(e)||UOe(e)||qOe(e)||zOe()}function zOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qOe(e,t){if(e){if(typeof e=="string")return qO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qO(e,t)}}function UOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VOe(e){if(Array.isArray(e))return qO(e)}function qO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function HOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zG(r.key),r)}}function GOe(e,t,n){return t&&GB(e.prototype,t),n&&GB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function WOe(e,t,n){return t=US(t),KOe(e,BG()?Reflect.construct(t,n||[],US(e).constructor):t.apply(e,n))}function KOe(e,t){if(t&&(Pg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YOe(e)}function YOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BG=function(){return!!e})()}function US(e){return US=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},US(e)}function QOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UO(e,t)}function UO(e,t){return UO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},UO(e,t)}function Eo(e,t,n){return t=zG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zG(e){var t=XOe(e,"string");return Pg(t)=="symbol"?t:t+""}function XOe(e,t){if(Pg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var i0=function(e){function t(){var n;HOe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=WOe(this,t,[].concat(a)),Eo(n,"state",{isAnimationFinished:!0,totalLength:0}),Eo(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Eo(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(_,T){return _+T});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/u),p=o%u,y=l-o,v=[],x=0,b=0;x<c.length;b+=c[x],++x)if(b+c[x]>p){v=[].concat(_m(c.slice(0,x)),[p-b]);break}var w=v.length%2===0?[0,y]:[y];return[].concat(_m(t.repeat(c,f)),_m(v),w).map(function(_){return"".concat(_,"px")}).join(", ")}),Eo(n,"id",Lf("recharts-line-")),Eo(n,"pathRef",function(o){n.mainCurve=o}),Eo(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Eo(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return QOe(t,e),GOe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,p=Ts(f,n0);if(!p)return null;var y=function(b,w){return{x:b.x,y:b.y,value:b.value,errorVal:ri(b.payload,w)}},v={clipPath:r?"url(#clipPath-".concat(a,")"):null};return ye.createElement(On,v,p.map(function(x){return ye.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:y})}))}},{key:"renderDots",value:function(r,a,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,f=l.dataKey,p=Ft(this.props,!1),y=Ft(c,!0),v=u.map(function(b,w){var _=ys(ys(ys({key:"dot-".concat(w),r:3},p),y),{},{index:w,cx:b.x,cy:b.y,value:b.value,dataKey:f,payload:b.payload,points:u});return t.renderDotItem(c,_)}),x={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return ye.createElement(On,Ix({className:"recharts-line-dots",key:"dots"},x),v)}},{key:"renderCurveStatically",value:function(r,a,s,o){var l=this.props,c=l.type,u=l.layout,f=l.connectNulls;l.ref;var p=VB(l,FOe),y=ys(ys(ys({},Ft(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(s,")"):null,points:r},o),{},{type:c,layout:u,connectNulls:f});return ye.createElement(mf,Ix({},y,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,a){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,y=o.animationEasing,v=o.animationId,x=o.animateNewValues,b=o.width,w=o.height,_=this.state,T=_.prevPoints,C=_.totalLength;return ye.createElement(Do,{begin:f,duration:p,isActive:u,easing:y,from:{t:0},to:{t:1},key:"line-".concat(v),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var E=O.t;if(T){var P=T.length/l.length,I=l.map(function(H,V){var ne=Math.floor(V*P);if(T[ne]){var Z=T[ne],q=xi(Z.x,H.x),K=xi(Z.y,H.y);return ys(ys({},H),{},{x:q(E),y:K(E)})}if(x){var se=xi(b*2,H.x),G=xi(w/2,H.y);return ys(ys({},H),{},{x:se(E),y:G(E)})}return ys(ys({},H),{},{x:H.x,y:H.y})});return s.renderCurveStatically(I,r,a)}var F=xi(0,C),$=F(E),z;if(c){var L="".concat(c).split(/[,\s]+/gim).map(function(H){return parseFloat(H)});z=s.getStrokeDasharray($,C,L)}else z=s.generateSimpleStrokeDasharray(C,$);return s.renderCurveStatically(l,r,a,{strokeDasharray:z})})}},{key:"renderCurve",value:function(r,a){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,f=c.totalLength;return l&&o&&o.length&&(!u&&f>0||!kf(u,o))?this.renderCurveWithAnimation(r,a):this.renderCurveStatically(o,r,a)}},{key:"render",value:function(){var r,a=this.props,s=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,f=a.yAxis,p=a.top,y=a.left,v=a.width,x=a.height,b=a.isAnimationActive,w=a.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=fn("recharts-line",c),O=u&&u.allowDataOverflow,E=f&&f.allowDataOverflow,P=O||E,I=cn(w)?this.id:w,F=(r=Ft(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},$=F.r,z=$===void 0?3:$,L=F.strokeWidth,H=L===void 0?2:L,V=q7(o)?o:{},ne=V.clipDot,Z=ne===void 0?!0:ne,q=z*2+H;return ye.createElement(On,{className:C},O||E?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(I)},ye.createElement("rect",{x:O?y:y-v/2,y:E?p:p-x/2,width:O?v:v*2,height:E?x:x*2})),!Z&&ye.createElement("clipPath",{id:"clipPath-dots-".concat(I)},ye.createElement("rect",{x:y-q/2,y:p-q/2,width:v+q,height:x+q}))):null,!T&&this.renderCurve(P,I),this.renderErrorBar(P,I),(T||o)&&this.renderDots(P,Z,I),(!b||_)&&kl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:a.curPoints}:r.points!==a.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,a){for(var s=r.length%2!==0?[].concat(_m(r),[0]):r,o=[],l=0;l<a;++l)o=[].concat(_m(o),_m(s));return o}},{key:"renderDotItem",value:function(r,a){var s;if(ye.isValidElement(r))s=ye.cloneElement(r,a);else if(tn(r))s=r(a);else{var o=a.key,l=VB(a,$Oe),c=fn("recharts-line-dot",typeof r!="boolean"?r.className:"");s=ye.createElement(r0,Ix({key:o},l,{className:c}))}return s}}])}(j.PureComponent);Eo(i0,"displayName","Line");Eo(i0,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!wd.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Eo(i0,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,a=e.xAxisTicks,s=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,f=t.layout,p=c.map(function(y,v){var x=ri(y,o);return f==="horizontal"?{x:bS({axis:n,ticks:a,bandSize:l,entry:y,index:v}),y:cn(x)?null:r.scale(x),value:x,payload:y}:{x:cn(x)?null:n.scale(x),y:bS({axis:r,ticks:s,bandSize:l,entry:y,index:v}),value:x,payload:y}});return ys({points:p,layout:f},u)});var JOe=["layout","type","stroke","connectNulls","isRange","ref"],ZOe=["key"],qG;function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}function UG(e,t){if(e==null)return{};var n=eDe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eDe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function tf(){return tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tf.apply(this,arguments)}function WB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ku(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WB(Object(n),!0).forEach(function(r){Cl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HG(r.key),r)}}function nDe(e,t,n){return t&&KB(e.prototype,t),n&&KB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rDe(e,t,n){return t=VS(t),iDe(e,VG()?Reflect.construct(t,n||[],VS(e).constructor):t.apply(e,n))}function iDe(e,t){if(t&&(Og(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aDe(e)}function aDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VG=function(){return!!e})()}function VS(e){return VS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},VS(e)}function sDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VO(e,t)}function VO(e,t){return VO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},VO(e,t)}function Cl(e,t,n){return t=HG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HG(e){var t=oDe(e,"string");return Og(t)=="symbol"?t:t+""}function oDe(e,t){if(Og(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Td=function(e){function t(){var n;tDe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=rDe(this,t,[].concat(a)),Cl(n,"state",{isAnimationFinished:!0}),Cl(n,"id",Lf("recharts-area-")),Cl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),tn(o)&&o()}),Cl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),tn(o)&&o()}),n}return sDe(t,e),nDe(t,[{key:"renderDots",value:function(r,a,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,f=c.points,p=c.dataKey,y=Ft(this.props,!1),v=Ft(u,!0),x=f.map(function(w,_){var T=Ku(Ku(Ku({key:"dot-".concat(_),r:3},y),v),{},{index:_,cx:w.x,cy:w.y,dataKey:p,value:w.value,payload:w.payload,points:f});return t.renderDotItem(u,T)}),b={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(s,")"):null};return ye.createElement(On,tf({className:"recharts-area-dots"},b),x)}},{key:"renderHorizontalRect",value:function(r){var a=this.props,s=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,f=r*Math.abs(c-u),p=od(o.map(function(y){return y.y||0}));return yt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(od(s.map(function(y){return y.y||0})),p)),yt(p)?ye.createElement("rect",{x:c<u?c:c-f,y:0,width:f,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var a=this.props,s=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,f=r*Math.abs(c-u),p=od(o.map(function(y){return y.x||0}));return yt(s)&&typeof s=="number"?p=Math.max(s,p):s&&Array.isArray(s)&&s.length&&(p=Math.max(od(s.map(function(y){return y.x||0})),p)),yt(p)?ye.createElement("rect",{x:0,y:c<u?c:c-f,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(r){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,a,s,o){var l=this.props,c=l.layout,u=l.type,f=l.stroke,p=l.connectNulls,y=l.isRange;l.ref;var v=UG(l,JOe);return ye.createElement(On,{clipPath:s?"url(#clipPath-".concat(o,")"):null},ye.createElement(mf,tf({},Ft(v,!0),{points:r,connectNulls:p,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&ye.createElement(mf,tf({},Ft(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:p,fill:"none",points:r})),f!=="none"&&y&&ye.createElement(mf,tf({},Ft(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:p,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(r,a){var s=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,y=o.animationEasing,v=o.animationId,x=this.state,b=x.prevPoints,w=x.prevBaseLine;return ye.createElement(Do,{begin:f,duration:p,isActive:u,easing:y,from:{t:0},to:{t:1},key:"area-".concat(v),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var T=_.t;if(b){var C=b.length/l.length,O=l.map(function(F,$){var z=Math.floor($*C);if(b[z]){var L=b[z],H=xi(L.x,F.x),V=xi(L.y,F.y);return Ku(Ku({},F),{},{x:H(T),y:V(T)})}return F}),E;if(yt(c)&&typeof c=="number"){var P=xi(w,c);E=P(T)}else if(cn(c)||Yg(c)){var I=xi(w,0);E=I(T)}else E=c.map(function(F,$){var z=Math.floor($*C);if(w[z]){var L=w[z],H=xi(L.x,F.x),V=xi(L.y,F.y);return Ku(Ku({},F),{},{x:H(T),y:V(T)})}return F});return s.renderAreaStatically(O,E,r,a)}return ye.createElement(On,null,ye.createElement("defs",null,ye.createElement("clipPath",{id:"animationClipPath-".concat(a)},s.renderClipRect(T))),ye.createElement(On,{clipPath:"url(#animationClipPath-".concat(a,")")},s.renderAreaStatically(l,c,r,a)))})}},{key:"renderArea",value:function(r,a){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,f=u.prevPoints,p=u.prevBaseLine,y=u.totalLength;return c&&o&&o.length&&(!f&&y>0||!kf(f,o)||!kf(p,l))?this.renderAreaWithAnimation(r,a):this.renderAreaStatically(o,l,r,a)}},{key:"render",value:function(){var r,a=this.props,s=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,f=a.left,p=a.xAxis,y=a.yAxis,v=a.width,x=a.height,b=a.isAnimationActive,w=a.id;if(s||!l||!l.length)return null;var _=this.state.isAnimationFinished,T=l.length===1,C=fn("recharts-area",c),O=p&&p.allowDataOverflow,E=y&&y.allowDataOverflow,P=O||E,I=cn(w)?this.id:w,F=(r=Ft(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},$=F.r,z=$===void 0?3:$,L=F.strokeWidth,H=L===void 0?2:L,V=q7(o)?o:{},ne=V.clipDot,Z=ne===void 0?!0:ne,q=z*2+H;return ye.createElement(On,{className:C},O||E?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(I)},ye.createElement("rect",{x:O?f:f-v/2,y:E?u:u-x/2,width:O?v:v*2,height:E?x:x*2})),!Z&&ye.createElement("clipPath",{id:"clipPath-dots-".concat(I)},ye.createElement("rect",{x:f-q/2,y:u-q/2,width:v+q,height:x+q}))):null,T?null:this.renderArea(P,I),(o||T)&&this.renderDots(P,Z,I),(!b||_)&&kl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:r.points!==a.curPoints||r.baseLine!==a.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(j.PureComponent);qG=Td;Cl(Td,"displayName","Area");Cl(Td,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!wd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Cl(Td,"getBaseValue",function(e,t,n,r){var a=e.layout,s=e.baseValue,o=t.props.baseValue,l=o??s;if(yt(l)&&typeof l=="number")return l;var c=a==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var f=Math.max(u[0],u[1]),p=Math.min(u[0],u[1]);return l==="dataMin"?p:l==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Cl(Td,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,a=e.yAxis,s=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,f=e.dataStartIndex,p=e.displayedData,y=e.offset,v=t.layout,x=u&&u.length,b=qG.getBaseValue(t,n,r,a),w=v==="horizontal",_=!1,T=p.map(function(O,E){var P;x?P=u[f+E]:(P=ri(O,c),Array.isArray(P)?_=!0:P=[b,P]);var I=P[1]==null||x&&ri(O,c)==null;return w?{x:bS({axis:r,ticks:s,bandSize:l,entry:O,index:E}),y:I?null:a.scale(P[1]),value:P,payload:O}:{x:I?null:r.scale(P[1]),y:bS({axis:a,ticks:o,bandSize:l,entry:O,index:E}),value:P,payload:O}}),C;return x||_?C=T.map(function(O){var E=Array.isArray(O.value)?O.value[0]:null;return w?{x:O.x,y:E!=null&&O.y!=null?a.scale(E):null}:{x:E!=null?r.scale(E):null,y:O.y}}):C=w?a.scale(b):r.scale(b),Ku({points:T,baseLine:C,layout:v,isRange:_},y)});Cl(Td,"renderDotItem",function(e,t){var n;if(ye.isValidElement(e))n=ye.cloneElement(e,t);else if(tn(e))n=e(t);else{var r=fn("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,s=UG(t,ZOe);n=ye.createElement(r0,tf({},s,{key:a,className:r}))}return n});function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function lDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cDe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KG(r.key),r)}}function uDe(e,t,n){return t&&cDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dDe(e,t,n){return t=HS(t),hDe(e,GG()?Reflect.construct(t,n||[],HS(e).constructor):t.apply(e,n))}function hDe(e,t){if(t&&(Dg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fDe(e)}function fDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GG=function(){return!!e})()}function HS(e){return HS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},HS(e)}function pDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HO(e,t)}function HO(e,t){return HO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},HO(e,t)}function WG(e,t,n){return t=KG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KG(e){var t=mDe(e,"string");return Dg(t)=="symbol"?t:t+""}function mDe(e,t){if(Dg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function GO(){return GO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GO.apply(this,arguments)}function gDe(e){var t=e.xAxisId,n=iI(),r=aI(),a=EG(t);return a==null?null:j.createElement(ey,GO({},a,{className:fn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return wc(o,!0)}}))}var Fc=function(e){function t(){return lDe(this,t),dDe(this,t,arguments)}return pDe(t,e),uDe(t,[{key:"render",value:function(){return j.createElement(gDe,this.props)}}])}(j.Component);WG(Fc,"displayName","XAxis");WG(Fc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function yDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vDe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XG(r.key),r)}}function xDe(e,t,n){return t&&vDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bDe(e,t,n){return t=GS(t),jDe(e,YG()?Reflect.construct(t,n||[],GS(e).constructor):t.apply(e,n))}function jDe(e,t){if(t&&(Mg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wDe(e)}function wDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YG=function(){return!!e})()}function GS(e){return GS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},GS(e)}function SDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WO(e,t)}function WO(e,t){return WO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},WO(e,t)}function QG(e,t,n){return t=XG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XG(e){var t=NDe(e,"string");return Mg(t)=="symbol"?t:t+""}function NDe(e,t){if(Mg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function KO(){return KO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KO.apply(this,arguments)}var _De=function(t){var n=t.yAxisId,r=iI(),a=aI(),s=AG(n);return s==null?null:j.createElement(ey,KO({},s,{className:fn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return wc(l,!0)}}))},$c=function(e){function t(){return yDe(this,t),bDe(this,t,arguments)}return SDe(t,e),xDe(t,[{key:"render",value:function(){return j.createElement(_De,this.props)}}])}(j.Component);QG($c,"displayName","YAxis");QG($c,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function YB(e){return ADe(e)||EDe(e)||TDe(e)||CDe()}function CDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TDe(e,t){if(e){if(typeof e=="string")return YO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YO(e,t)}}function EDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ADe(e){if(Array.isArray(e))return YO(e)}function YO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var QO=function(t,n,r,a,s){var o=Ts(t,oI),l=Ts(t,a_),c=[].concat(YB(o),YB(l)),u=Ts(t,o_),f="".concat(a,"Id"),p=a[0],y=n;if(c.length&&(y=c.reduce(function(b,w){if(w.props[f]===r&&Pl(w.props,"extendDomain")&&yt(w.props[p])){var _=w.props[p];return[Math.min(b[0],_),Math.max(b[1],_)]}return b},y)),u.length){var v="".concat(p,"1"),x="".concat(p,"2");y=u.reduce(function(b,w){if(w.props[f]===r&&Pl(w.props,"extendDomain")&&yt(w.props[v])&&yt(w.props[x])){var _=w.props[v],T=w.props[x];return[Math.min(b[0],_,T),Math.max(b[1],_,T)]}return b},y)}return s&&s.length&&(y=s.reduce(function(b,w){return yt(w)?[Math.min(b[0],w),Math.max(b[1],w)]:b},y)),y},ak={exports:{}},QB;function kDe(){return QB||(QB=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new a(f,p||c,y),x=n?n+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],v]:c._events[x].push(v):(c._events[x]=v,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)t.call(f,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,v=p.length,x=new Array(v);y<v;y++)x[y]=p[y].fn;return x},l.prototype.listenerCount=function(u){var f=n?n+u:u,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,f,p,y,v,x){var b=n?n+u:u;if(!this._events[b])return!1;var w=this._events[b],_=arguments.length,T,C;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),_){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,p),!0;case 4:return w.fn.call(w.context,f,p,y),!0;case 5:return w.fn.call(w.context,f,p,y,v),!0;case 6:return w.fn.call(w.context,f,p,y,v,x),!0}for(C=1,T=new Array(_-1);C<_;C++)T[C-1]=arguments[C];w.fn.apply(w.context,T)}else{var O=w.length,E;for(C=0;C<O;C++)switch(w[C].once&&this.removeListener(u,w[C].fn,void 0,!0),_){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,f);break;case 3:w[C].fn.call(w[C].context,f,p);break;case 4:w[C].fn.call(w[C].context,f,p,y);break;default:if(!T)for(E=1,T=new Array(_-1);E<_;E++)T[E-1]=arguments[E];w[C].fn.apply(w[C].context,T)}}return!0},l.prototype.on=function(u,f,p){return s(this,u,f,p,!1)},l.prototype.once=function(u,f,p){return s(this,u,f,p,!0)},l.prototype.removeListener=function(u,f,p,y){var v=n?n+u:u;if(!this._events[v])return this;if(!f)return o(this,v),this;var x=this._events[v];if(x.fn)x.fn===f&&(!y||x.once)&&(!p||x.context===p)&&o(this,v);else{for(var b=0,w=[],_=x.length;b<_;b++)(x[b].fn!==f||y&&!x[b].once||p&&x[b].context!==p)&&w.push(x[b]);w.length?this._events[v]=w.length===1?w[0]:w:o(this,v)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}(ak)),ak.exports}var PDe=kDe();const ODe=Bn(PDe);var sk=new ODe,ok="recharts.syncMouseEvents";function Cb(e){"@babel/helpers - typeof";return Cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cb(e)}function DDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MDe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JG(r.key),r)}}function IDe(e,t,n){return t&&MDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lk(e,t,n){return t=JG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JG(e){var t=RDe(e,"string");return Cb(t)=="symbol"?t:t+""}function RDe(e,t){if(Cb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var LDe=function(){function e(){DDe(this,e),lk(this,"activeIndex",0),lk(this,"coordinateList",[]),lk(this,"layout","horizontal")}return IDe(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,s=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,f=n.offset,p=f===void 0?null:f,y=n.mouseHandlerCallback,v=y===void 0?null:y;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,p=s+c+u,y=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:y})}}}])}();function FDe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&yt(r)&&yt(a))return!0}return!1}function $De(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function ZG(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,s=e.endAngle,o=Ar(t,n,r,a),l=Ar(t,n,r,s);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:s}}function BDe(e,t,n){var r,a,s,o;if(e==="horizontal")r=t.x,s=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,p=t.angle,y=Ar(l,c,u,p),v=Ar(l,c,f,p);r=y.x,a=y.y,s=v.x,o=v.y}else return ZG(t);return[{x:r,y:a},{x:s,y:o}]}function Tb(e){"@babel/helpers - typeof";return Tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tb(e)}function XB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ew(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XB(Object(n),!0).forEach(function(r){zDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zDe(e,t,n){return t=qDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qDe(e){var t=UDe(e,"string");return Tb(t)=="symbol"?t:t+""}function UDe(e,t){if(Tb(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VDe(e){var t,n,r=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,p=e.layout,y=e.chartName,v=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!v||!s||!o||y!=="ScatterChart"&&a!=="axis")return null;var x,b=mf;if(y==="ScatterChart")x=o,b=tAe;else if(y==="BarChart")x=$De(p,o,c,f),b=ZM;else if(p==="radial"){var w=ZG(o),_=w.cx,T=w.cy,C=w.radius,O=w.startAngle,E=w.endAngle;x={cx:_,cy:T,startAngle:O,endAngle:E,innerRadius:C,outerRadius:C},b=XH}else x={points:BDe(p,o,c)},b=mf;var P=ew(ew(ew(ew({stroke:"#ccc",pointerEvents:"none"},c),x),Ft(v,!1)),{},{payload:l,payloadIndex:u,className:fn("recharts-tooltip-cursor",v.className)});return j.isValidElement(v)?j.cloneElement(v,P):j.createElement(b,P)}var HDe=["item"],GDe=["children","className","width","height","style","compact","title","desc"];function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lm.apply(this,arguments)}function JB(e,t){return YDe(e)||KDe(e,t)||tW(e,t)||WDe()}function WDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KDe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function YDe(e){if(Array.isArray(e))return e}function ZB(e,t){if(e==null)return{};var n=QDe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function QDe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function XDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JDe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nW(r.key),r)}}function ZDe(e,t,n){return t&&JDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function eMe(e,t,n){return t=WS(t),tMe(e,eW()?Reflect.construct(t,n||[],WS(e).constructor):t.apply(e,n))}function tMe(e,t){if(t&&(Ig(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nMe(e)}function nMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eW=function(){return!!e})()}function WS(e){return WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},WS(e)}function rMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XO(e,t)}function XO(e,t){return XO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},XO(e,t)}function Rg(e){return sMe(e)||aMe(e)||tW(e)||iMe()}function iMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tW(e,t){if(e){if(typeof e=="string")return JO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JO(e,t)}}function aMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sMe(e){if(Array.isArray(e))return JO(e)}function JO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ez(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ez(Object(n),!0).forEach(function(r){Zt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ez(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zt(e,t,n){return t=nW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nW(e){var t=oMe(e,"string");return Ig(t)=="symbol"?t:t+""}function oMe(e,t){if(Ig(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lMe={xAxis:["bottom","top"],yAxis:["left","right"]},cMe={width:"100%",height:"100%"},rW={x:0,y:0};function tw(e){return e}var uMe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},dMe=function(t,n,r,a){var s=n.find(function(f){return f&&f.index===r});if(s){if(t==="horizontal")return{x:s.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=a.radius;return rt(rt(rt({},a),Ar(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=a.angle;return rt(rt(rt({},a),Ar(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return rW},l_=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Rg(l),Rg(u)):l},[]);return o.length>0?o:t&&t.length&&yt(a)&&yt(s)?t.slice(a,s+1):[]};function iW(e){return e==="number"?[0,"auto"]:void 0}var ZO=function(t,n,r,a){var s=t.graphicalItems,o=t.tooltipAxis,l=l_(n,t);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var f,p=(f=u.props.data)!==null&&f!==void 0?f:n;p&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(p=p.slice(t.dataStartIndex,t.dataEndIndex+1));var y;if(o.dataKey&&!o.allowDuplicatedCategory){var v=p===void 0?l:p;y=Yw(v,o.dataKey,a)}else y=p&&p[r]||l[r];return y?[].concat(Rg(c),[HH(u,y)]):c},[])},tz=function(t,n,r,a){var s=a||{x:t.chartX,y:t.chartY},o=uMe(s,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=CCe(o,l,u,c);if(f>=0&&u){var p=u[f]&&u[f].value,y=ZO(t,n,f,p),v=dMe(r,l,f,s);return{activeTooltipIndex:f,activeLabel:p,activePayload:y,activeCoordinate:v}}return null},hMe=function(t,n){var r=n.axes,a=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,p=t.children,y=t.stackOffset,v=$H(f,s);return r.reduce(function(x,b){var w,_=b.type.defaultProps!==void 0?rt(rt({},b.type.defaultProps),b.props):b.props,T=_.type,C=_.dataKey,O=_.allowDataOverflow,E=_.allowDuplicatedCategory,P=_.scale,I=_.ticks,F=_.includeHidden,$=_[o];if(x[$])return x;var z=l_(t.data,{graphicalItems:a.filter(function(me){var Y,xe=o in me.props?me.props[o]:(Y=me.type.defaultProps)===null||Y===void 0?void 0:Y[o];return xe===$}),dataStartIndex:c,dataEndIndex:u}),L=z.length,H,V,ne;FDe(_.domain,O,T)&&(H=hO(_.domain,null,O),v&&(T==="number"||P!=="auto")&&(ne=Px(z,C,"category")));var Z=iW(T);if(!H||H.length===0){var q,K=(q=_.domain)!==null&&q!==void 0?q:Z;if(C){if(H=Px(z,C,T),T==="category"&&v){var se=bbe(H);E&&se?(V=H,H=DS(0,L)):E||(H=Z$(K,H,b).reduce(function(me,Y){return me.indexOf(Y)>=0?me:[].concat(Rg(me),[Y])},[]))}else if(T==="category")E?H=H.filter(function(me){return me!==""&&!cn(me)}):H=Z$(K,H,b).reduce(function(me,Y){return me.indexOf(Y)>=0||Y===""||cn(Y)?me:[].concat(Rg(me),[Y])},[]);else if(T==="number"){var G=PCe(z,a.filter(function(me){var Y,xe,Ie=o in me.props?me.props[o]:(Y=me.type.defaultProps)===null||Y===void 0?void 0:Y[o],Ne="hide"in me.props?me.props.hide:(xe=me.type.defaultProps)===null||xe===void 0?void 0:xe.hide;return Ie===$&&(F||!Ne)}),C,s,f);G&&(H=G)}v&&(T==="number"||P!=="auto")&&(ne=Px(z,C,"category"))}else v?H=DS(0,L):l&&l[$]&&l[$].hasStack&&T==="number"?H=y==="expand"?[0,1]:VH(l[$].stackGroups,c,u):H=FH(z,a.filter(function(me){var Y=o in me.props?me.props[o]:me.type.defaultProps[o],xe="hide"in me.props?me.props.hide:me.type.defaultProps.hide;return Y===$&&(F||!xe)}),T,f,!0);if(T==="number")H=QO(p,H,$,s,I),K&&(H=hO(K,H,O));else if(T==="category"&&K){var B=K,fe=H.every(function(me){return B.indexOf(me)>=0});fe&&(H=B)}}return rt(rt({},x),{},Zt({},$,rt(rt({},_),{},{axisType:s,domain:H,categoricalDomain:ne,duplicateDomain:V,originalDomain:(w=_.domain)!==null&&w!==void 0?w:Z,isCategorical:v,layout:f})))},{})},fMe=function(t,n){var r=n.graphicalItems,a=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,p=t.children,y=l_(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),v=y.length,x=$H(f,s),b=-1;return r.reduce(function(w,_){var T=_.type.defaultProps!==void 0?rt(rt({},_.type.defaultProps),_.props):_.props,C=T[o],O=iW("number");if(!w[C]){b++;var E;return x?E=DS(0,v):l&&l[C]&&l[C].hasStack?(E=VH(l[C].stackGroups,c,u),E=QO(p,E,C,s)):(E=hO(O,FH(y,r.filter(function(P){var I,F,$=o in P.props?P.props[o]:(I=P.type.defaultProps)===null||I===void 0?void 0:I[o],z="hide"in P.props?P.props.hide:(F=P.type.defaultProps)===null||F===void 0?void 0:F.hide;return $===C&&!z}),"number",f),a.defaultProps.allowDataOverflow),E=QO(p,E,C,s)),rt(rt({},w),{},Zt({},C,rt(rt({axisType:s},a.defaultProps),{},{hide:!0,orientation:Cs(lMe,"".concat(s,".").concat(b%2),null),domain:E,originalDomain:O,isCategorical:x,layout:f})))}return w},{})},pMe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.children,p="".concat(a,"Id"),y=Ts(f,s),v={};return y&&y.length?v=hMe(t,{axes:y,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(v=fMe(t,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),v},mMe=function(t){var n=Qu(t),r=wc(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:CM(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:jS(n,r)}},nz=function(t){var n=t.children,r=t.defaultShowTooltip,a=xs(n,_g),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},gMe=function(t){return!t||!t.length?!1:t.some(function(n){var r=Cc(n&&n.type);return r&&r.indexOf("Bar")>=0})},rz=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},yMe=function(t,n){var r=t.props,a=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,f=r.height,p=r.children,y=r.margin||{},v=xs(p,_g),x=xs(p,Tc),b=Object.keys(c).reduce(function(E,P){var I=c[P],F=I.orientation;return!I.mirror&&!I.hide?rt(rt({},E),{},Zt({},F,E[F]+I.width)):E},{left:y.left||0,right:y.right||0}),w=Object.keys(o).reduce(function(E,P){var I=o[P],F=I.orientation;return!I.mirror&&!I.hide?rt(rt({},E),{},Zt({},F,Cs(E,"".concat(F))+I.height)):E},{top:y.top||0,bottom:y.bottom||0}),_=rt(rt({},w),b),T=_.bottom;v&&(_.bottom+=v.props.height||_g.defaultProps.height),x&&n&&(_=ACe(_,a,r,n));var C=u-_.left-_.right,O=f-_.top-_.bottom;return rt(rt({brushBottom:T},_),{},{width:Math.max(C,0),height:Math.max(O,0)})},vMe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},c_=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,s=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,p=t.defaultProps,y=function(_,T){var C=T.graphicalItems,O=T.stackGroups,E=T.offset,P=T.updateId,I=T.dataStartIndex,F=T.dataEndIndex,$=_.barSize,z=_.layout,L=_.barGap,H=_.barCategoryGap,V=_.maxBarSize,ne=rz(z),Z=ne.numericAxisName,q=ne.cateAxisName,K=gMe(C),se=[];return C.forEach(function(G,B){var fe=l_(_.data,{graphicalItems:[G],dataStartIndex:I,dataEndIndex:F}),me=G.type.defaultProps!==void 0?rt(rt({},G.type.defaultProps),G.props):G.props,Y=me.dataKey,xe=me.maxBarSize,Ie=me["".concat(Z,"Id")],Ne=me["".concat(q,"Id")],ke={},de=c.reduce(function(ht,_e){var Fe=T["".concat(_e.axisType,"Map")],Ye=me["".concat(_e.axisType,"Id")];Fe&&Fe[Ye]||_e.axisType==="zAxis"||Of();var Ke=Fe[Ye];return rt(rt({},ht),{},Zt(Zt({},_e.axisType,Ke),"".concat(_e.axisType,"Ticks"),wc(Ke)))},ke),Q=de[q],oe=de["".concat(q,"Ticks")],re=O&&O[Ie]&&O[Ie].hasStack&&BCe(G,O[Ie].stackGroups),ae=Cc(G.type).indexOf("Bar")>=0,X=jS(Q,oe),W=[],ie=K&&TCe({barSize:$,stackGroups:O,totalSize:vMe(de,q)});if(ae){var pe,le,je=cn(xe)?V:xe,Ge=(pe=(le=jS(Q,oe,!0))!==null&&le!==void 0?le:je)!==null&&pe!==void 0?pe:0;W=ECe({barGap:L,barCategoryGap:H,bandSize:Ge!==X?Ge:X,sizeList:ie[Ne],maxBarSize:je}),Ge!==X&&(W=W.map(function(ht){return rt(rt({},ht),{},{position:rt(rt({},ht.position),{},{offset:ht.position.offset-Ge/2})})}))}var et=G&&G.type&&G.type.getComposedData;et&&se.push({props:rt(rt({},et(rt(rt({},de),{},{displayedData:fe,props:_,dataKey:Y,item:G,bandSize:X,barPosition:W,offset:E,stackedData:re,layout:z,dataStartIndex:I,dataEndIndex:F}))),{},Zt(Zt(Zt({key:G.key||"item-".concat(B)},Z,de[Z]),q,de[q]),"animationId",P)),childIndex:Obe(G,_.children),item:G})}),se},v=function(_,T){var C=_.props,O=_.dataStartIndex,E=_.dataEndIndex,P=_.updateId;if(!p6({props:C}))return null;var I=C.children,F=C.layout,$=C.stackOffset,z=C.data,L=C.reverseStackOrder,H=rz(F),V=H.numericAxisName,ne=H.cateAxisName,Z=Ts(I,r),q=FCe(z,Z,"".concat(V,"Id"),"".concat(ne,"Id"),$,L),K=c.reduce(function(me,Y){var xe="".concat(Y.axisType,"Map");return rt(rt({},me),{},Zt({},xe,pMe(C,rt(rt({},Y),{},{graphicalItems:Z,stackGroups:Y.axisType===V&&q,dataStartIndex:O,dataEndIndex:E}))))},{}),se=yMe(rt(rt({},K),{},{props:C,graphicalItems:Z}),T==null?void 0:T.legendBBox);Object.keys(K).forEach(function(me){K[me]=f(C,K[me],se,me.replace("Map",""),n)});var G=K["".concat(ne,"Map")],B=mMe(G),fe=y(C,rt(rt({},K),{},{dataStartIndex:O,dataEndIndex:E,updateId:P,graphicalItems:Z,stackGroups:q,offset:se}));return rt(rt({formattedGraphicalItems:fe,graphicalItems:Z,offset:se,stackGroups:q},B),K)},x=function(w){function _(T){var C,O,E;return XDe(this,_),E=eMe(this,_,[T]),Zt(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Zt(E,"accessibilityManager",new LDe),Zt(E,"handleLegendBBoxUpdate",function(P){if(P){var I=E.state,F=I.dataStartIndex,$=I.dataEndIndex,z=I.updateId;E.setState(rt({legendBBox:P},v({props:E.props,dataStartIndex:F,dataEndIndex:$,updateId:z},rt(rt({},E.state),{},{legendBBox:P}))))}}),Zt(E,"handleReceiveSyncEvent",function(P,I,F){if(E.props.syncId===P){if(F===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(I)}}),Zt(E,"handleBrushChange",function(P){var I=P.startIndex,F=P.endIndex;if(I!==E.state.dataStartIndex||F!==E.state.dataEndIndex){var $=E.state.updateId;E.setState(function(){return rt({dataStartIndex:I,dataEndIndex:F},v({props:E.props,dataStartIndex:I,dataEndIndex:F,updateId:$},E.state))}),E.triggerSyncEvent({dataStartIndex:I,dataEndIndex:F})}}),Zt(E,"handleMouseEnter",function(P){var I=E.getMouseInfo(P);if(I){var F=rt(rt({},I),{},{isTooltipActive:!0});E.setState(F),E.triggerSyncEvent(F);var $=E.props.onMouseEnter;tn($)&&$(F,P)}}),Zt(E,"triggeredAfterMouseMove",function(P){var I=E.getMouseInfo(P),F=I?rt(rt({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(F),E.triggerSyncEvent(F);var $=E.props.onMouseMove;tn($)&&$(F,P)}),Zt(E,"handleItemMouseEnter",function(P){E.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Zt(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),Zt(E,"handleMouseMove",function(P){P.persist(),E.throttleTriggeredAfterMouseMove(P)}),Zt(E,"handleMouseLeave",function(P){E.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};E.setState(I),E.triggerSyncEvent(I);var F=E.props.onMouseLeave;tn(F)&&F(I,P)}),Zt(E,"handleOuterEvent",function(P){var I=Pbe(P),F=Cs(E.props,"".concat(I));if(I&&tn(F)){var $,z;/.*touch.*/i.test(I)?z=E.getMouseInfo(P.changedTouches[0]):z=E.getMouseInfo(P),F(($=z)!==null&&$!==void 0?$:{},P)}}),Zt(E,"handleClick",function(P){var I=E.getMouseInfo(P);if(I){var F=rt(rt({},I),{},{isTooltipActive:!0});E.setState(F),E.triggerSyncEvent(F);var $=E.props.onClick;tn($)&&$(F,P)}}),Zt(E,"handleMouseDown",function(P){var I=E.props.onMouseDown;if(tn(I)){var F=E.getMouseInfo(P);I(F,P)}}),Zt(E,"handleMouseUp",function(P){var I=E.props.onMouseUp;if(tn(I)){var F=E.getMouseInfo(P);I(F,P)}}),Zt(E,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Zt(E,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&E.handleMouseDown(P.changedTouches[0])}),Zt(E,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&E.handleMouseUp(P.changedTouches[0])}),Zt(E,"handleDoubleClick",function(P){var I=E.props.onDoubleClick;if(tn(I)){var F=E.getMouseInfo(P);I(F,P)}}),Zt(E,"handleContextMenu",function(P){var I=E.props.onContextMenu;if(tn(I)){var F=E.getMouseInfo(P);I(F,P)}}),Zt(E,"triggerSyncEvent",function(P){E.props.syncId!==void 0&&sk.emit(ok,E.props.syncId,P,E.eventEmitterSymbol)}),Zt(E,"applySyncEvent",function(P){var I=E.props,F=I.layout,$=I.syncMethod,z=E.state.updateId,L=P.dataStartIndex,H=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)E.setState(rt({dataStartIndex:L,dataEndIndex:H},v({props:E.props,dataStartIndex:L,dataEndIndex:H,updateId:z},E.state)));else if(P.activeTooltipIndex!==void 0){var V=P.chartX,ne=P.chartY,Z=P.activeTooltipIndex,q=E.state,K=q.offset,se=q.tooltipTicks;if(!K)return;if(typeof $=="function")Z=$(se,P);else if($==="value"){Z=-1;for(var G=0;G<se.length;G++)if(se[G].value===P.activeLabel){Z=G;break}}var B=rt(rt({},K),{},{x:K.left,y:K.top}),fe=Math.min(V,B.x+B.width),me=Math.min(ne,B.y+B.height),Y=se[Z]&&se[Z].value,xe=ZO(E.state,E.props.data,Z),Ie=se[Z]?{x:F==="horizontal"?se[Z].coordinate:fe,y:F==="horizontal"?me:se[Z].coordinate}:rW;E.setState(rt(rt({},P),{},{activeLabel:Y,activeCoordinate:Ie,activePayload:xe,activeTooltipIndex:Z}))}else E.setState(P)}),Zt(E,"renderCursor",function(P){var I,F=E.state,$=F.isTooltipActive,z=F.activeCoordinate,L=F.activePayload,H=F.offset,V=F.activeTooltipIndex,ne=F.tooltipAxisBandSize,Z=E.getTooltipEventType(),q=(I=P.props.active)!==null&&I!==void 0?I:$,K=E.props.layout,se=P.key||"_recharts-cursor";return ye.createElement(VDe,{key:se,activeCoordinate:z,activePayload:L,activeTooltipIndex:V,chartName:n,element:P,isActive:q,layout:K,offset:H,tooltipAxisBandSize:ne,tooltipEventType:Z})}),Zt(E,"renderPolarAxis",function(P,I,F){var $=Cs(P,"type.axisType"),z=Cs(E.state,"".concat($,"Map")),L=P.type.defaultProps,H=L!==void 0?rt(rt({},L),P.props):P.props,V=z&&z[H["".concat($,"Id")]];return j.cloneElement(P,rt(rt({},V),{},{className:fn($,V.className),key:P.key||"".concat(I,"-").concat(F),ticks:wc(V,!0)}))}),Zt(E,"renderPolarGrid",function(P){var I=P.props,F=I.radialLines,$=I.polarAngles,z=I.polarRadius,L=E.state,H=L.radiusAxisMap,V=L.angleAxisMap,ne=Qu(H),Z=Qu(V),q=Z.cx,K=Z.cy,se=Z.innerRadius,G=Z.outerRadius;return j.cloneElement(P,{polarAngles:Array.isArray($)?$:wc(Z,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(z)?z:wc(ne,!0).map(function(B){return B.coordinate}),cx:q,cy:K,innerRadius:se,outerRadius:G,key:P.key||"polar-grid",radialLines:F})}),Zt(E,"renderLegend",function(){var P=E.state.formattedGraphicalItems,I=E.props,F=I.children,$=I.width,z=I.height,L=E.props.margin||{},H=$-(L.left||0)-(L.right||0),V=RH({children:F,formattedGraphicalItems:P,legendWidth:H,legendContent:u});if(!V)return null;var ne=V.item,Z=ZB(V,HDe);return j.cloneElement(ne,rt(rt({},Z),{},{chartWidth:$,chartHeight:z,margin:L,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),Zt(E,"renderTooltip",function(){var P,I=E.props,F=I.children,$=I.accessibilityLayer,z=xs(F,_a);if(!z)return null;var L=E.state,H=L.isTooltipActive,V=L.activeCoordinate,ne=L.activePayload,Z=L.activeLabel,q=L.offset,K=(P=z.props.active)!==null&&P!==void 0?P:H;return j.cloneElement(z,{viewBox:rt(rt({},q),{},{x:q.left,y:q.top}),active:K,label:Z,payload:K?ne:[],coordinate:V,accessibilityLayer:$})}),Zt(E,"renderBrush",function(P){var I=E.props,F=I.margin,$=I.data,z=E.state,L=z.offset,H=z.dataStartIndex,V=z.dataEndIndex,ne=z.updateId;return j.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Qj(E.handleBrushChange,P.props.onChange),data:$,x:yt(P.props.x)?P.props.x:L.left,y:yt(P.props.y)?P.props.y:L.top+L.height+L.brushBottom-(F.bottom||0),width:yt(P.props.width)?P.props.width:L.width,startIndex:H,endIndex:V,updateId:"brush-".concat(ne)})}),Zt(E,"renderReferenceElement",function(P,I,F){if(!P)return null;var $=E,z=$.clipPathId,L=E.state,H=L.xAxisMap,V=L.yAxisMap,ne=L.offset,Z=P.type.defaultProps||{},q=P.props,K=q.xAxisId,se=K===void 0?Z.xAxisId:K,G=q.yAxisId,B=G===void 0?Z.yAxisId:G;return j.cloneElement(P,{key:P.key||"".concat(I,"-").concat(F),xAxis:H[se],yAxis:V[B],viewBox:{x:ne.left,y:ne.top,width:ne.width,height:ne.height},clipPathId:z})}),Zt(E,"renderActivePoints",function(P){var I=P.item,F=P.activePoint,$=P.basePoint,z=P.childIndex,L=P.isRange,H=[],V=I.props.key,ne=I.item.type.defaultProps!==void 0?rt(rt({},I.item.type.defaultProps),I.item.props):I.item.props,Z=ne.activeDot,q=ne.dataKey,K=rt(rt({index:z,dataKey:q,cx:F.x,cy:F.y,r:4,fill:JM(I.item),strokeWidth:2,stroke:"#fff",payload:F.payload,value:F.value},Ft(Z,!1)),Qw(Z));return H.push(_.renderActiveDot(Z,K,"".concat(V,"-activePoint-").concat(z))),$?H.push(_.renderActiveDot(Z,rt(rt({},K),{},{cx:$.x,cy:$.y}),"".concat(V,"-basePoint-").concat(z))):L&&H.push(null),H}),Zt(E,"renderGraphicChild",function(P,I,F){var $=E.filterFormatItem(P,I,F);if(!$)return null;var z=E.getTooltipEventType(),L=E.state,H=L.isTooltipActive,V=L.tooltipAxis,ne=L.activeTooltipIndex,Z=L.activeLabel,q=E.props.children,K=xs(q,_a),se=$.props,G=se.points,B=se.isRange,fe=se.baseLine,me=$.item.type.defaultProps!==void 0?rt(rt({},$.item.type.defaultProps),$.item.props):$.item.props,Y=me.activeDot,xe=me.hide,Ie=me.activeBar,Ne=me.activeShape,ke=!!(!xe&&H&&K&&(Y||Ie||Ne)),de={};z!=="axis"&&K&&K.props.trigger==="click"?de={onClick:Qj(E.handleItemMouseEnter,P.props.onClick)}:z!=="axis"&&(de={onMouseLeave:Qj(E.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Qj(E.handleItemMouseEnter,P.props.onMouseEnter)});var Q=j.cloneElement(P,rt(rt({},$.props),de));function oe(_e){return typeof V.dataKey=="function"?V.dataKey(_e.payload):null}if(ke)if(ne>=0){var re,ae;if(V.dataKey&&!V.allowDuplicatedCategory){var X=typeof V.dataKey=="function"?oe:"payload.".concat(V.dataKey.toString());re=Yw(G,X,Z),ae=B&&fe&&Yw(fe,X,Z)}else re=G==null?void 0:G[ne],ae=B&&fe&&fe[ne];if(Ne||Ie){var W=P.props.activeIndex!==void 0?P.props.activeIndex:ne;return[j.cloneElement(P,rt(rt(rt({},$.props),de),{},{activeIndex:W})),null,null]}if(!cn(re))return[Q].concat(Rg(E.renderActivePoints({item:$,activePoint:re,basePoint:ae,childIndex:ne,isRange:B})))}else{var ie,pe=(ie=E.getItemByXY(E.state.activeCoordinate))!==null&&ie!==void 0?ie:{graphicalItem:Q},le=pe.graphicalItem,je=le.item,Ge=je===void 0?P:je,et=le.childIndex,ht=rt(rt(rt({},$.props),de),{},{activeIndex:et});return[j.cloneElement(Ge,ht),null,null]}return B?[Q,null,null]:[Q,null]}),Zt(E,"renderCustomized",function(P,I,F){return j.cloneElement(P,rt(rt({key:"recharts-customized-".concat(F)},E.props),E.state))}),Zt(E,"renderMap",{CartesianGrid:{handler:tw,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:tw},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:tw},YAxis:{handler:tw},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((C=T.id)!==null&&C!==void 0?C:Lf("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=IV(E.triggeredAfterMouseMove,(O=T.throttleDelay)!==null&&O!==void 0?O:1e3/60),E.state={},E}return rMe(_,w),ZDe(_,[{key:"componentDidMount",value:function(){var C,O;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,O=C.children,E=C.data,P=C.height,I=C.layout,F=xs(O,_a);if(F){var $=F.props.defaultIndex;if(!(typeof $!="number"||$<0||$>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[$]&&this.state.tooltipTicks[$].value,L=ZO(this.state,E,$,z),H=this.state.tooltipTicks[$].coordinate,V=(this.state.offset.top+P)/2,ne=I==="horizontal",Z=ne?{x:H,y:V}:{y:H,x:V},q=this.state.formattedGraphicalItems.find(function(se){var G=se.item;return G.type.name==="Scatter"});q&&(Z=rt(rt({},Z),q.props.points[$].tooltipPosition),L=q.props.points[$].tooltipPayload);var K={activeTooltipIndex:$,isTooltipActive:!0,activeLabel:z,activePayload:L,activeCoordinate:Z};this.setState(K),this.renderCursor(F),this.accessibilityManager.setIndex($)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,O){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==O.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var E,P;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(C){MP([xs(C.children,_a)],[xs(this.props.children,_a)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=xs(this.props.children,_a);if(C&&typeof C.props.shared=="boolean"){var O=C.props.shared?"axis":"item";return l.indexOf(O)>=0?O:s}return s}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var O=this.container,E=O.getBoundingClientRect(),P=vwe(E),I={chartX:Math.round(C.pageX-P.left),chartY:Math.round(C.pageY-P.top)},F=E.width/O.offsetWidth||1,$=this.inRange(I.chartX,I.chartY,F);if(!$)return null;var z=this.state,L=z.xAxisMap,H=z.yAxisMap,V=this.getTooltipEventType(),ne=tz(this.state,this.props.data,this.props.layout,$);if(V!=="axis"&&L&&H){var Z=Qu(L).scale,q=Qu(H).scale,K=Z&&Z.invert?Z.invert(I.chartX):null,se=q&&q.invert?q.invert(I.chartY):null;return rt(rt({},I),{},{xValue:K,yValue:se},ne)}return ne?rt(rt({},I),ne):null}},{key:"inRange",value:function(C,O){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,I=C/E,F=O/E;if(P==="horizontal"||P==="vertical"){var $=this.state.offset,z=I>=$.left&&I<=$.left+$.width&&F>=$.top&&F<=$.top+$.height;return z?{x:I,y:F}:null}var L=this.state,H=L.angleAxisMap,V=L.radiusAxisMap;if(H&&V){var ne=Qu(H);return n8({x:I,y:F},ne)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,O=this.getTooltipEventType(),E=xs(C,_a),P={};E&&O==="axis"&&(E.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Qw(this.props,this.handleOuterEvent);return rt(rt({},I),P)}},{key:"addListener",value:function(){sk.on(ok,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){sk.removeListener(ok,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,O,E){for(var P=this.state.formattedGraphicalItems,I=0,F=P.length;I<F;I++){var $=P[I];if($.item===C||$.props.key===C.key||O===Cc($.item.type)&&E===$.childIndex)return $}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,O=this.state.offset,E=O.left,P=O.top,I=O.height,F=O.width;return ye.createElement("defs",null,ye.createElement("clipPath",{id:C},ye.createElement("rect",{x:E,y:P,height:I,width:F})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(O,E){var P=JB(E,2),I=P[0],F=P[1];return rt(rt({},O),{},Zt({},I,F.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(O,E){var P=JB(E,2),I=P[0],F=P[1];return rt(rt({},O),{},Zt({},I,F.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var O;return(O=this.state.xAxisMap)===null||O===void 0||(O=O[C])===null||O===void 0?void 0:O.scale}},{key:"getYScaleByAxisId",value:function(C){var O;return(O=this.state.yAxisMap)===null||O===void 0||(O=O[C])===null||O===void 0?void 0:O.scale}},{key:"getItemByXY",value:function(C){var O=this.state,E=O.formattedGraphicalItems,P=O.activeItem;if(E&&E.length)for(var I=0,F=E.length;I<F;I++){var $=E[I],z=$.props,L=$.item,H=L.type.defaultProps!==void 0?rt(rt({},L.type.defaultProps),L.props):L.props,V=Cc(L.type);if(V==="Bar"){var ne=(z.data||[]).find(function(se){return IEe(C,se)});if(ne)return{graphicalItem:$,payload:ne}}else if(V==="RadialBar"){var Z=(z.data||[]).find(function(se){return n8(C,se)});if(Z)return{graphicalItem:$,payload:Z}}else if(t_($,P)||n_($,P)||bb($,P)){var q=ake({graphicalItem:$,activeTooltipItem:P,itemData:H.data}),K=H.activeIndex===void 0?q:H.activeIndex;return{graphicalItem:rt(rt({},$),{},{childIndex:K}),payload:bb($,P)?H.data[q]:$.props.data[q]}}}return null}},{key:"render",value:function(){var C=this;if(!p6(this))return null;var O=this.props,E=O.children,P=O.className,I=O.width,F=O.height,$=O.style,z=O.compact,L=O.title,H=O.desc,V=ZB(O,GDe),ne=Ft(V,!1);if(z)return ye.createElement(PB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement(RP,Lm({},ne,{width:I,height:F,title:L,desc:H}),this.renderClipPath(),g6(E,this.renderMap)));if(this.props.accessibilityLayer){var Z,q;ne.tabIndex=(Z=this.props.tabIndex)!==null&&Z!==void 0?Z:0,ne.role=(q=this.props.role)!==null&&q!==void 0?q:"application",ne.onKeyDown=function(se){C.accessibilityManager.keyboardEvent(se)},ne.onFocus=function(){C.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return ye.createElement(PB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement("div",Lm({className:fn("recharts-wrapper",P),style:rt({position:"relative",cursor:"default",width:I,height:F},$)},K,{ref:function(G){C.container=G}}),ye.createElement(RP,Lm({},ne,{width:I,height:F,title:L,desc:H,style:cMe}),this.renderClipPath(),g6(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);Zt(x,"displayName",n),Zt(x,"defaultProps",rt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Zt(x,"getDerivedStateFromProps",function(w,_){var T=w.dataKey,C=w.data,O=w.children,E=w.width,P=w.height,I=w.layout,F=w.stackOffset,$=w.margin,z=_.dataStartIndex,L=_.dataEndIndex;if(_.updateId===void 0){var H=nz(w);return rt(rt(rt({},H),{},{updateId:0},v(rt(rt({props:w},H),{},{updateId:0}),_)),{},{prevDataKey:T,prevData:C,prevWidth:E,prevHeight:P,prevLayout:I,prevStackOffset:F,prevMargin:$,prevChildren:O})}if(T!==_.prevDataKey||C!==_.prevData||E!==_.prevWidth||P!==_.prevHeight||I!==_.prevLayout||F!==_.prevStackOffset||!qm($,_.prevMargin)){var V=nz(w),ne={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},Z=rt(rt({},tz(_,C,I)),{},{updateId:_.updateId+1}),q=rt(rt(rt({},V),ne),Z);return rt(rt(rt({},q),v(rt({props:w},q),_)),{},{prevDataKey:T,prevData:C,prevWidth:E,prevHeight:P,prevLayout:I,prevStackOffset:F,prevMargin:$,prevChildren:O})}if(!MP(O,_.prevChildren)){var K,se,G,B,fe=xs(O,_g),me=fe&&(K=(se=fe.props)===null||se===void 0?void 0:se.startIndex)!==null&&K!==void 0?K:z,Y=fe&&(G=(B=fe.props)===null||B===void 0?void 0:B.endIndex)!==null&&G!==void 0?G:L,xe=me!==z||Y!==L,Ie=!cn(C),Ne=Ie&&!xe?_.updateId:_.updateId+1;return rt(rt({updateId:Ne},v(rt(rt({props:w},_),{},{updateId:Ne,dataStartIndex:me,dataEndIndex:Y}),_)),{},{prevChildren:O,dataStartIndex:me,dataEndIndex:Y})}return null}),Zt(x,"renderActiveDot",function(w,_,T){var C;return j.isValidElement(w)?C=j.cloneElement(w,_):tn(w)?C=w(_):C=ye.createElement(r0,_),ye.createElement(On,{className:"recharts-active-dot",key:T},C)});var b=j.forwardRef(function(_,T){return ye.createElement(x,Lm({},_,{ref:T}))});return b.displayName=x.displayName,b},xMe=c_({chartName:"LineChart",GraphicalChild:i0,axisComponents:[{axisType:"xAxis",AxisComp:Fc},{axisType:"yAxis",AxisComp:$c}],formatAxisMap:eI}),aW=c_({chartName:"BarChart",GraphicalChild:Cd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Fc},{axisType:"yAxis",AxisComp:$c}],formatAxisMap:eI}),sW=c_({chartName:"PieChart",GraphicalChild:Ll,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:e_},{axisType:"radiusAxis",AxisComp:JN}],formatAxisMap:QCe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),bMe=c_({chartName:"AreaChart",GraphicalChild:Td,axisComponents:[{axisType:"xAxis",AxisComp:Fc},{axisType:"yAxis",AxisComp:$c}],formatAxisMap:eI});const uI=({widget:e,className:t="",autoHideEmptyColumns:n=!1})=>{const r=Mt(),a=ns(),[s,o]=j.useState(null),[l,c]=j.useState(null),[u,f]=j.useState([]),[p,y]=j.useState(!1),[v,x]=j.useState(null),[b,w]=j.useState(""),[_,T]=j.useState(!1);j.useEffect(()=>{const P=async()=>{var I,F,$,z,L,H;y(!0),x(null);try{const V=e.dataSource,ne=((I=e.config)==null?void 0:I.filters)&&Array.isArray(e.config.filters)&&e.config.filters.length>0;let Z=[];if(ne&&(V.startsWith("api:")||V.startsWith("table:"))){const q=await ce("/api/dashboards/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:V,filters:e.config.filters})});if(q.ok){const K=await q.json();Z=Array.isArray(K)?K:K.data||[],o(Z)}else throw new Error("Failed to fetch filtered data")}else{let q="";const K={"api:patients":{url:"/api/patients?limit=50",dataKey:"patients"},"api:drugs":{url:"/api/drugs?limit=50",dataKey:"drugs"},"api:recurring-medications":{url:"/api/recurring-medications?limit=50"},"api:pharmacy-orders":{url:"/api/pharmacy/orders?limit=50",dataKey:"orders"},"api:lab-orders":{url:"/api/lab/orders?limit=50",dataKey:"orders"},"api:lab-tests":{url:"/api/lab/tests?limit=50",dataKey:"tests"},"api:queue":{url:"/api/queue?limit=50",dataKey:"queue"},"api:bills":{url:"/api/bills?limit=100",dataKey:"bills"}};if(K[V])q=K[V].url;else if(V.startsWith("join:"))q=`/api/dashboards/joined-data?join=${V.split(":")[1]}&limit=50`;else if(V.startsWith("dynamic:")){const G=V.split(":"),B=G[1],fe=G[2],me=(($=(F=e.config)==null?void 0:F.primaryColumns)==null?void 0:$.join(","))||"",Y=((L=(z=e.config)==null?void 0:z.relatedColumns)==null?void 0:L.join(","))||"";q=`/api/dashboards/dynamic-join?primary=${B}&related=${fe}&primaryCols=${me}&relatedCols=${Y}&limit=50`}else V.startsWith("table:")?q=`/api/custom-tables/${V.split(":")[1]}/records?limit=50`:q=`/api/${V.replace("api:","")}?limit=50`;const se=await ce(q);if(se.ok){const G=await se.json();Array.isArray(G)?Z=G:(H=K[V])!=null&&H.dataKey&&G[K[V].dataKey]?Z=G[K[V].dataKey]:G.data?Z=G.data:Z=Object.values(G).find(fe=>Array.isArray(fe))||[],o(Z)}else throw new Error(`Failed to fetch data from ${V}`)}if(e.type==="table"&&n&&Z.length>0){const K=(e.config.columns||[...new Set(Z.flatMap(se=>Object.keys(se)))]).filter(se=>Z.some(G=>{const B=G[se];return B!=null&&B!==""&&(Array.isArray(B)?B.length>0:!0)}));f(K)}else f(e.config.columns||[])}catch(V){x(V.message)}finally{y(!1)}};e.dataSource&&P()},[e.dataSource,e.config]),j.useEffect(()=>{var I;if(!s||!Array.isArray(s)){c(s);return}let P=[...s];if((I=e.config)!=null&&I.filters&&Array.isArray(e.config.filters)&&(P=P.filter(F=>e.config.filters.every($=>{const z=F[$.field],L=$.value;switch($.operator){case"equals":return z==L;case"neq":return z!=L;case"contains":return String(z).toLowerCase().includes(String(L).toLowerCase());case"gt":return z>L;case"lt":return z<L;case"gte":return z>=L;case"lte":return z<=L;default:return!0}}))),b){const F=b.toLowerCase();P=P.filter($=>Object.values($).some(z=>String(z).toLowerCase().includes(F)))}c(P)},[s,e.config,b]);const C=P=>{P&&(a.prefetchQuery({queryKey:Vt.patients.context(P),queryFn:async()=>{const I=await ce(`/api/patients/${P}/context`);if(!I.ok)throw new Error("Failed to fetch patient context");return I.json()},staleTime:1e3*60*5}),a.prefetchQuery({queryKey:Vt.patientDebts.balance(P),queryFn:async()=>{const I=await ce(`/api/patient-debts/${P}/balance`);if(!I.ok)throw new Error("Failed to fetch patient debt");return I.json()},staleTime:1e3*60}),a.prefetchQuery({queryKey:Vt.queue.latest(P),queryFn:async()=>{const I=await ce(`/api/queue/patient/${P}/latest`);if(!I.ok){if(I.status===404)return null;throw new Error("Failed to fetch queue status")}return I.json()},staleTime:1e3*5}))},O=()=>{var I,F,$;if(p)return i.jsxs("div",{className:"widget-loading",children:[i.jsx(eZ,{className:"spin"})," Loading..."]});if(v)return i.jsxs("div",{className:"widget-error",children:["Error: ",v]});const P=l||[];if(e.type==="stat"){const z=Array.isArray(P)?P.length:0;return i.jsxs("div",{className:"widget-stat",children:[i.jsx("div",{className:"stat-value",children:z}),i.jsx("div",{className:"stat-label",children:((I=e.config)==null?void 0:I.label)||"Total Records"})]})}if(e.type==="chart"){if(!Array.isArray(P)||P.length===0)return i.jsx("div",{className:"no-data",children:"No data"});const{chartType:z="bar",xAxisKey:L="name",dataKey:H="value"}=e.config,V=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return i.jsx("div",{style:{width:"100%",height:350,minHeight:200},children:i.jsx(Sw,{width:"100%",height:"100%",children:z==="line"?i.jsxs(xMe,{data:P,children:[i.jsx(_b,{strokeDasharray:"3 3"}),i.jsx(Fc,{dataKey:L}),i.jsx($c,{}),i.jsx(_a,{}),i.jsx(Tc,{}),i.jsx(i0,{type:"monotone",dataKey:H,stroke:"#8884d8",activeDot:{r:8}})]}):z==="pie"?i.jsxs(sW,{children:[i.jsx(Ll,{data:P,cx:"50%",cy:"50%",labelLine:!1,label:({name:ne,percent:Z})=>`${ne} ${(Z*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:H,nameKey:L,children:P.map((ne,Z)=>i.jsx(Xb,{fill:V[Z%V.length]},`cell-${Z}`))}),i.jsx(_a,{})]}):i.jsxs(aW,{data:P,children:[i.jsx(_b,{strokeDasharray:"3 3"}),i.jsx(Fc,{dataKey:L}),i.jsx($c,{}),i.jsx(_a,{}),i.jsx(Tc,{}),i.jsx(Cd,{dataKey:H,fill:"#82ca9d"})]})})})}if(e.type==="table"){if(!Array.isArray(P)||P.length===0)return i.jsx("div",{className:"no-data",children:"No data"});const L=(u.length>0?u:((F=e.config)==null?void 0:F.columns)||(P[0]?Object.keys(P[0]).slice(0,5):[])).map(Z=>({key:Z,label:Z.replace(/_/g," ").replace(/\b\w/g,q=>q.toUpperCase()),editable:!1})),H=async Z=>{try{const q=e.dataSource;if(q.startsWith("table:")){const K=q.split(":")[1];for(const se of Z)se.id&&await ce(`/api/custom-tables/${K}/records/${se.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:se})})}else alert("Changes saved locally. Built-in table edits require specific API integration.")}catch(q){console.error("Error saving data:",q),alert("Failed to save changes")}};if(P.length<=10){const Z=(($=e.config)==null?void 0:$.columns)||Object.keys(P[0]).filter(K=>!K.startsWith("_")&&K!=="id"),q=K=>{const se=K.patient_id||K.patientId;se&&r(`/dashboard/edit-complaint/patient/${se}`)};return i.jsx("div",{className:"widget-detail-cards",children:P.map((K,se)=>{const G=K.patient_id||K.patientId,B=!!G;return i.jsxs("div",{className:`detail-card ${B?"clickable":""}`,onClick:B?()=>q(K):void 0,onMouseEnter:()=>B&&C(G),style:B?{cursor:"pointer"}:void 0,children:[i.jsxs("div",{className:"detail-card-header",children:[i.jsx("span",{className:"detail-card-title",children:K.name||K.patient_name||K.title||K.brand_name||`Record ${se+1}`}),K.token&&i.jsxs("span",{className:"detail-card-badge",children:["Token #",K.token]}),K.status&&i.jsx("span",{className:`detail-card-status status-${K.status.toLowerCase()}`,children:K.status})]}),i.jsx("div",{className:"detail-card-fields",children:Z.map(fe=>{const me=K[fe];if(me==null||me===""||fe==="name"||fe==="title")return null;const Y=fe.replace(/_/g," ").replace(/\b\w/g,Ie=>Ie.toUpperCase()),xe=typeof me=="object"?JSON.stringify(me):String(me);return i.jsxs("div",{className:"detail-field",children:[i.jsx("span",{className:"detail-field-label",children:Y}),i.jsx("span",{className:"detail-field-value",children:xe})]},fe)})})]},K.id||se)})})}const V=Z=>{const q=Z.patient_id||Z.patientId;q&&r(`/dashboard/edit-complaint/patient/${q}`)},ne=Z=>{const q=Z.patient_id||Z.patientId;q&&C(q)};return i.jsxs("div",{className:"widget-table-container",children:[i.jsxs("div",{className:"widget-table-search",children:[i.jsx(Un,{size:14}),i.jsx("input",{type:"text",placeholder:"Search...",value:b,onChange:Z=>w(Z.target.value)})]}),i.jsx(Kb,{columns:L,data:P,editable:!0,showRowNumbers:!0,title:"",onSave:H,onRowClick:V,onRowHover:ne})]})}return i.jsx("div",{children:"Unsupported widget type"})},E=i.jsxs("div",{className:`dashboard-widget ${t}`,children:[i.jsxs("div",{className:"widget-header",children:[i.jsx("h3",{children:e.title}),i.jsx("button",{className:"widget-expand-btn",onClick:()=>T(!0),title:"Expand",children:i.jsx(zq,{size:14})})]}),i.jsx("div",{className:"widget-content",children:O()})]});return i.jsxs(i.Fragment,{children:[E,_&&i.jsx("div",{className:"widget-modal-overlay",onClick:()=>T(!1),children:i.jsxs("div",{className:"widget-modal-content",onClick:P=>P.stopPropagation(),children:[i.jsxs("div",{className:"widget-modal-header",children:[i.jsx("h2",{children:e.title}),i.jsx("button",{onClick:()=>T(!1),className:"widget-modal-close",children:i.jsx(zt,{size:20})})]}),i.jsx("div",{className:"widget-modal-body",children:O()})]})})]})},jMe=({isOpen:e,onClose:t,title:n,widgets:r,onSave:a})=>{const[s,o]=j.useState(!1),[l,c]=j.useState(n),[u,f]=j.useState(""),[p,y]=j.useState(!1);if(!e)return null;const v=async()=>{if(!(!a||!l.trim())){y(!0);try{await a(l,u),o(!1),t()}catch(x){console.error("Failed to save dashboard:",x),alert("Failed to save dashboard")}finally{y(!1)}}};return i.jsx("div",{className:"temp-dash-overlay",onClick:t,children:i.jsxs("div",{className:"temp-dash-modal",onClick:x=>x.stopPropagation(),children:[i.jsxs("div",{className:"temp-dash-header",children:[i.jsxs("div",{className:"temp-dash-title-group",children:[i.jsx("div",{className:"temp-dash-icon",children:i.jsx(rg,{size:16})}),i.jsxs("div",{className:"temp-dash-title-text",children:[i.jsx("h2",{children:n}),i.jsxs("span",{className:"temp-dash-ai-badge",children:[i.jsx(Pw,{size:8})," AI Generated"]})]})]}),i.jsxs("div",{className:"temp-dash-actions",children:[a&&!s&&i.jsxs("button",{onClick:()=>o(!0),className:"temp-dash-save-btn",children:[i.jsx(Xs,{size:12})," Save"]}),i.jsx("button",{onClick:t,className:"temp-dash-close-btn",children:i.jsx(zt,{size:16})})]})]}),s&&i.jsxs("div",{className:"temp-dash-save-form",children:[i.jsx("input",{type:"text",placeholder:"Dashboard Name",value:l,onChange:x=>c(x.target.value),autoFocus:!0}),i.jsx("input",{type:"text",placeholder:"Description (optional)",value:u,onChange:x=>f(x.target.value)}),i.jsxs("div",{className:"temp-dash-save-actions",children:[i.jsx("button",{onClick:()=>o(!1),className:"temp-dash-cancel-btn",children:"Cancel"}),i.jsx("button",{onClick:v,className:"temp-dash-confirm-btn",disabled:p||!l.trim(),children:p?"Saving...":"Confirm"})]})]}),i.jsx("div",{className:"temp-dash-body",children:r.length===0?i.jsx("div",{className:"temp-dash-empty",children:"No widgets to display."}):i.jsx("div",{className:"temp-dash-grid",children:r.map((x,b)=>i.jsx(uI,{widget:x,isEditing:!1,autoHideEmptyColumns:!0},x.id||`widget-${b}`))})})]})})},iz=()=>ZS(()=>import("./EditComplaintPage-nT_jXBjx.js"),__vite__mapDeps([0,1])),wMe=()=>ZS(()=>import("./AddPatientPage-2oZE-H5p.js"),__vite__mapDeps([2,3])),nw=[{name:"Dashboard",path:"/dashboard",icon:i.jsx(rg,{size:16}),keywords:["home","main","analytics","stats"],roles:["all"]},{name:"Clinic Hub",path:"/dashboard/clinic-hub",icon:i.jsx(vc,{size:16}),keywords:["central","hub","overview"],roles:["admin","superadmin"]},{name:"Analysis Dashboard",path:"/dashboard/analysis",icon:i.jsx(vc,{size:16}),keywords:["reports","stats","finance","money"],roles:["admin","superadmin"]},{name:"Live AI Assistant",path:"/live-api",icon:i.jsx(Fx,{size:16}),keywords:["ai","chat","voice","assistant"],roles:["all"]},{name:"Clinic Subscriptions",path:"/dashboard/clinic-subscriptions",icon:i.jsx(vc,{size:16}),keywords:["plans","billing","tenants"],roles:["superadmin"]},{name:"User Management",path:"/dashboard/users",icon:i.jsx(ko,{size:16}),keywords:["admins","clinics","accounts"],roles:["superadmin"]},{name:"Patient Search",path:"/dashboard/search-patient",icon:i.jsx(Un,{size:16}),keywords:["find","lookup","patient"],roles:["all"]},{name:"All Patients",path:"/dashboard/all-patients",icon:i.jsx(ko,{size:16}),keywords:["list","records","database"],roles:["admin","receptionist","doctor"]},{name:"Add New Patient",path:"/dashboard/add-patient",icon:i.jsx(aN,{size:16}),keywords:["register","new","create","onboard"],roles:["admin","receptionist","doctor"]},{name:"Admissions",path:"/manage-admission",icon:i.jsx(XX,{size:16}),keywords:["ipd","admit","discharge","rooms"],roles:["admin","doctor","receptionist"]},{name:"Appointment Queue",path:"/dashboard/reception",icon:i.jsx(ko,{size:16}),keywords:["queue","reception","waiting","appointments"],roles:["admin","receptionist","superadmin"]},{name:"Doctor Queue",path:"/dashboard/queue",icon:i.jsx(vc,{size:16}),keywords:["waiting","patients","consultation"],roles:["admin","doctor","superadmin"]},{name:"Pharmacy Inventory",path:"/dashboard/inventory",icon:i.jsx(Nc,{size:16}),keywords:["drugs","medicine","stock","pharmacy"],roles:["admin","pharmacy"]},{name:"Pharmacy Queue",path:"/dashboard/pharmacy-queue",icon:i.jsx(Nc,{size:16}),keywords:["orders","billing","dispense"],roles:["admin","pharmacy","superadmin"]},{name:"Add New Drug",path:"/dashboard/inventory/add",icon:i.jsx(Nc,{size:16}),keywords:["create","medicine","stock"],roles:["admin","pharmacy"]},{name:"Add Pharmacy Order",path:"/dashboard/add-order",icon:i.jsx(Yk,{size:16}),keywords:["sell","bill","dispense"],roles:["admin","pharmacy"]},{name:"Refill Reminders",path:"/refill-reminders",icon:i.jsx(pi,{size:16}),keywords:["recurring","sms","alert"],roles:["admin","pharmacy"]},{name:"Distributors",path:"/dashboard/distributors",icon:i.jsx(ND,{size:16}),keywords:["suppliers","vendors","stock"],roles:["admin","pharmacy"]},{name:"Purchase",path:"/dashboard/purchase",icon:i.jsx(Yk,{size:16}),keywords:["buy","procurement","stock"],roles:["admin","pharmacy"]},{name:"Lab Panel",path:"/dashboard/lab",icon:i.jsx(Za,{size:16}),keywords:["billing","orders","queue"],roles:["admin","lab","superadmin"]},{name:"Create Lab Order",path:"/create-lab-order",icon:i.jsx(Za,{size:16}),keywords:["test","pathology","diagnostics"],roles:["admin","doctor","lab"]},{name:"Search Lab Reports",path:"/lab/search-report",icon:i.jsx(Un,{size:16}),keywords:["results","history","find"],roles:["admin","doctor","lab"]},{name:"Lab Inventory",path:"/lab-inventory",icon:i.jsx(Za,{size:16}),keywords:["reagents","tests","stock"],roles:["admin","lab"]},{name:"Dental",path:"/dashboard/dental",icon:i.jsx(vc,{size:16}),keywords:["teeth","dentist","chart","odontogram"],roles:["admin","doctor","superadmin"]},{name:"Create Custom Bill",path:"/create-custom-bill",icon:i.jsx(aa,{size:16}),keywords:["invoice","custom","charge"],roles:["admin","receptionist"]},{name:"Billing History",path:"/billing",icon:i.jsx(wD,{size:16}),keywords:["transactions","payments","history"],roles:["admin"]},{name:"Custom Tables",path:"/custom-tables",icon:i.jsx(aa,{size:16}),keywords:["database","sheets","custom data"],roles:["admin","superadmin"]},{name:"Custom Dashboards",path:"/dashboards",icon:i.jsx(rg,{size:16}),keywords:["charts","reports","analytics"],roles:["admin","doctor","superadmin"]},{name:"Staff Management",path:"/dashboard/staff",icon:i.jsx(ag,{size:16}),keywords:["users","employees","roles","admin"],roles:["admin","superadmin"]},{name:"Role Management",path:"/dashboard/roles",icon:i.jsx(ag,{size:16}),keywords:["roles","permissions","access","custom roles"],roles:["admin","superadmin"]}],az=[{icon:"",text:"Update Paracetamol stock to 100",roles:["admin","pharmacy"]},{icon:"",text:"Change CBC Test price to 350",roles:["admin","lab","superadmin"]},{icon:"",text:"Set Voice AI language to Hindi",roles:["all"]},{icon:"",text:"Show revenue for last month",roles:["admin","superadmin"]},{icon:"",text:"Purchase 50 strips of Aspirin",roles:["admin","pharmacy"]},{icon:"",text:"Update consultation fee to 500",roles:["admin","superadmin"]},{icon:"",text:"Add new staff member",roles:["admin","superadmin"]},{icon:"",text:"Register: John Doe, 25M, Fever",roles:["all"]},{icon:"",text:"Check Metformin availability",roles:["admin","pharmacy","doctor"]}],SMe=({user:e})=>{const{isOpen:t,closeCommandBar:n}=Pc(),r=Mt(),a=$r(),s=j.useRef(null),[o,l]=j.useState(""),[c,u]=j.useState([]),[f,p]=j.useState([]),[y,v]=j.useState([]),[x,b]=j.useState(!1),[w,_]=j.useState(!0),[T,C]=j.useState(!0),{customColumnsConfig:O}=EN(),E=(O==null?void 0:O.patients)||[],[P,I]=j.useState(null),[F,$]=j.useState(!1),z=ns(),{chatHistory:L,isProcessing:H,handleSendMessage:V,setChatQuery:ne,refreshChat:Z,selectedImage:q,handleImageSelect:K,clearImage:se,temporaryDashboard:G,closeTemporaryDashboard:B,saveTemporaryDashboard:fe}=HD({settings:{},staffList:[],enableDynamicContext:!1}),me=Re=>{Re&&(z.prefetchQuery({queryKey:Vt.patients.context(Re),queryFn:async()=>{const vt=await ce(`/api/patients/${Re}/context`);if(!vt.ok)throw new Error("Failed to fetch patient context");return vt.json()},staleTime:5*60*1e3}),z.prefetchQuery({queryKey:Vt.patientDebts.balance(Re),queryFn:async()=>{const vt=await ce(`/api/patient-debts/${Re}/balance`);return vt.ok?vt.json():{netDebt:0}},staleTime:1*60*1e3}),z.prefetchQuery({queryKey:Vt.queue.latest(Re),queryFn:async()=>{const vt=await ce(`/api/queue/patient/${Re}/latest`);if(!vt.ok)throw new Error("Failed to fetch latest queue status");const It=await vt.json();return It!=null&&It._id&&z.prefetchQuery({queryKey:Vt.queue.entry(It._id),queryFn:async()=>{const ur=await ce(`/api/queue/doctor/complaint/${It._id}`);if(!ur.ok)throw new Error("Failed to fetch complaint record");return ur.json()},staleTime:1*60*1e3}),It},staleTime:5e3}),z.prefetchQuery({queryKey:Vt.dental.records(Re),queryFn:async()=>{const vt=await ce(`/api/dental/patient/${Re}`);if(!vt.ok)throw new Error("Failed to fetch dental records");return vt.json()},staleTime:5*60*1e3}))},Y=j.useMemo(()=>e?nw.filter(Re=>Re.roles.includes("all")||e.role&&Re.roles.includes(e.role)):nw,[e]),xe=j.useMemo(()=>e?az.filter(Re=>Re.roles.includes("all")||e.role&&Re.roles.includes(e.role)):az,[e]),Ie=j.useMemo(()=>new Zs(Y,{keys:["name","keywords"],threshold:.3}),[Y]),[Ne,ke]=j.useState(!1),[de,Q]=j.useState(!1),[oe,re]=j.useState(!1);j.useEffect(()=>{if(t)ke(!0),re(!1);else{re(!0);const Re=setTimeout(()=>{ke(!1),re(!1),Z()},200);return()=>clearTimeout(Re)}},[t,Z]);const{setPageContext:ae}=nN();j.useEffect(()=>{if(t){const Re=a.pathname,vt=nw.find(It=>It.path===Re)||nw.find(It=>Re.startsWith(It.path)&&It.path!=="/dashboard");ae(vt?{name:vt.name,path:Re,data:{role:vt.roles}}:{name:"Current Page",path:Re})}},[t,a.pathname,ae]);const X=j.useRef(null),W=Re=>{var It;const vt=(It=Re.target.files)==null?void 0:It[0];vt&&K(vt)},[ie,pe]=j.useState({x:0,y:0}),[le,je]=j.useState(!1),Ge=j.useRef({x:0,y:0}),et=j.useRef({x:0,y:0}),ht=j.useRef(!1),_e=j.useRef(null);j.useEffect(()=>{const Re=It=>{if(!le)return;ht.current=!0;const ur=It.clientX-Ge.current.x,pt=It.clientY-Ge.current.y;let jt=et.current.x+ur,bt=et.current.y+pt;if(_e.current){const Dt=_e.current.offsetWidth,un=_e.current.offsetHeight,Ut=(window.innerWidth-Dt)/2,to=(window.innerHeight-un)/2,no=Math.max(0,Ut),Es=Math.max(0,to);jt=Math.max(-no,Math.min(no,jt)),bt=Math.max(-Es,Math.min(Es,bt))}pe({x:jt,y:bt})},vt=()=>{je(!1)};return le&&(window.addEventListener("mousemove",Re),window.addEventListener("mouseup",vt)),()=>{window.removeEventListener("mousemove",Re),window.removeEventListener("mouseup",vt)}},[le]),j.useEffect(()=>{a.pathname==="/dashboard"&&(l(""),p([]),v([])),t&&(a.pathname==="/dashboard"?$(!1):$(!0))},[a.pathname]),j.useEffect(()=>{(f.length>0||y.length>0)&&F&&$(!1)},[f,y]),j.useEffect(()=>{if(t&&window.innerWidth<=768){window.history.pushState({commandBarOpen:!0},"");const Re=vt=>{vt.preventDefault(),$(!0)};return window.addEventListener("popstate",Re),()=>{window.removeEventListener("popstate",Re)}}},[t]),j.useEffect(()=>{F||pe({x:0,y:0})},[F]),j.useEffect(()=>{ne(o)},[o]),j.useEffect(()=>{t&&!F&&s.current&&setTimeout(()=>{if(s.current){s.current.focus();const Re=s.current.value.length;Re>0&&s.current.setSelectionRange(Re,Re)}},50)},[t,F]),j.useEffect(()=>{if(!t||F||!(window.innerWidth<=768))return;const vt=window.scrollY,It=document.body.style.overflow,ur=document.documentElement.style.overflow,pt=document.body.style.position,jt=document.body.style.top,bt=document.body.style.width;return document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${vt}px`,document.body.style.width="100%",()=>{document.documentElement.style.overflow=ur,document.body.style.overflow=It,document.body.style.position=pt,document.body.style.top=jt,document.body.style.width=bt,window.scrollTo(0,vt)}},[t,F]);const Fe=Re=>{!Re.trim()&&!q||($(!1),V(Re),l(""),p([]),v([]))},{preFilledQuery:Ye,setPreFilledQuery:Ke}=Pc();j.useEffect(()=>{t&&Ye&&(l(Ye),setTimeout(()=>{Fe(Ye),Ke("")},300))},[t,Ye,Ke]),j.useEffect(()=>{P&&(l(P),Q(!1),setTimeout(()=>Fe(P),50),I(null))},[P]);const be=()=>{Q(!0)},De=()=>{l(""),p([]),v([]),Z(),s.current&&s.current.focus()};j.useEffect(()=>{t&&(async()=>{_(!0);try{const vt=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),It=await ce(`/api/patients?${vt.toString()}`);if(It.ok){const ur=await It.json();u(ur.patients||[])}}catch(vt){console.error("Error fetching recent patients:",vt)}finally{_(!1)}})()},[t]);const we=j.useMemo(()=>pd(async Re=>{const vt=Re.trim(),It=/^\d+$/.test(vt),ur=vt.split(/\s+/).length;if(vt.length>1){const pt=Ie.search(vt);v(pt.map(jt=>jt.item))}else v([]);if(vt.length<2||It&&vt.length>10||!It&&ur>3){p([]),b(!1);return}b(!0);try{const pt=new URLSearchParams({search:encodeURIComponent(Re),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),jt=await ce(`/api/patients?${pt.toString()}`);if(jt.ok){const bt=await jt.json();p(bt.patients||[])}}catch(pt){console.error("Search error:",pt)}finally{b(!1),iz()}},300),[e]),ve=Re=>{const vt=Re.target.value;l(vt),we(vt)},Ce=Re=>{Re.id&&r(`/dashboard/edit-complaint/patient/${Re.id}`)},nt=Re=>{r(Re.path)},Ve=Re=>{Re.path==="/dashboard/add-patient"&&wMe()},dt=Re=>{l(Re),setTimeout(()=>Fe(Re),50)},Ct=async()=>{if(o.trim()){b(!0);try{const Re=await ce("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.trim(),age:null,gender:null,phone:null})});if(!Re.ok){const pt=await Re.json();throw new Error(pt.message||"Failed to create patient")}const vt=await Re.json();let It=null;const ur=await ce("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:vt.id,complaint:"Walk-in (Quick Create)"})});if(ur.ok&&(It=(await ur.json()).id),It)r(`/dashboard/edit-complaint/${It}`);else{const pt=await ce(`/api/queue/patient/${vt.id}/latest`);if(pt.ok){const jt=await pt.json();jt&&jt._id&&r(`/dashboard/edit-complaint/${jt._id}`)}}n()}catch(Re){console.error("Failed to create patient:",Re),alert("Failed to create patient. Please try again.")}finally{b(!1)}}},kt=Re=>{o.trim()&&Fe(o)},ze=Re=>{Re.key==="Enter"&&!Re.shiftKey&&(Re.preventDefault(),kt())},Xe=Re=>{Re.target===Re.currentTarget&&n()};if(!t&&!Ne)return null;const Je=o.trim().length>0||(f.length>0||y.length>0)&&!x,wt=o.length===0&&f.length===0&&y.length===0,Pt=o.length>=3&&f.length===0&&y.length===0&&!x,dn=L.length>0||H,Ee=!dn||Je,at=dn&&Je,Tt=dn&&!T&&!F&&!Je;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`${At.overlay} ${F?At.overlayMinimized:""} ${oe?At.exiting:""}`,onClick:Xe,children:i.jsxs("div",{ref:_e,className:`${At.modal} ${F?At.minimized:""} ${Tt?At.collapsed:""} ${oe?At.exiting:""}`,style:{transform:`translate(${ie.x}px, ${ie.y}px)`,height:Tt?"auto":void 0},onClick:()=>{ht.current||(F?$(!1):Tt&&C(!0))},children:[i.jsxs("div",{className:At.dragBar,onMouseDown:Re=>{Re.target.closest("button")||(je(!0),ht.current=!1,Ge.current={x:Re.clientX,y:Re.clientY},et.current={x:ie.x,y:ie.y})},children:[i.jsxs("div",{className:At.dragBarControls,children:[i.jsx("button",{className:At.windowControlBtn,onClick:n,title:"Close",children:i.jsx(zt,{size:24,color:"#64748b"})}),i.jsx("button",{className:At.windowControlBtn,onClick:()=>$(!F),title:F?"Maximize":"Minimize",children:F?i.jsx(zq,{size:24,color:"#64748b"}):i.jsx(fZ,{size:24,color:"#64748b"})})]}),i.jsx("div",{className:At.dragBarTitle,children:dn?i.jsxs(i.Fragment,{children:[i.jsx(Fx,{size:14,className:"text-violet-600"}),i.jsx("span",{children:"AI Assistant"})]}):Je?i.jsxs(i.Fragment,{children:[i.jsx(Un,{size:14,className:"text-blue-500"}),i.jsx("span",{children:"Search Results"})]}):i.jsx("span",{style:{opacity:.5,fontWeight:500},children:"Clinic Manager AI"})}),i.jsx("div",{className:At.dragBarControlsRight,children:i.jsx("button",{className:At.newChatBtn,onClick:De,title:"New Chat",children:i.jsx(Pa,{size:20})})})]}),i.jsxs("div",{className:At.contentWrapper,children:[dn&&i.jsx("div",{className:At.chatSectionFill,children:i.jsxs("div",{className:At.chatMessagesFill,children:[L.map((Re,vt)=>i.jsx("div",{className:`${At.chatBubble} ${Re.role==="user"?At.chatBubbleUser:Re.role==="model"?At.chatBubbleModel:At.chatBubbleSystem}`,children:Re.role==="model"?i.jsx(Sf,{remarkPlugins:[Nf],children:Re.text}):Re.text},vt)),H&&i.jsxs("div",{className:At.processing,children:[i.jsx(Dc,{size:14,className:At.spinner}),"Thinking..."]})]})}),Ee&&i.jsxs("div",{className:at?At.overlayContent:At.content,children:[wt&&!dn&&i.jsxs("div",{className:At.section,children:[i.jsx("div",{className:At.sectionTitle,children:"Newly Registered"}),i.jsx("div",{className:At.recentList,children:w?[1,2,3,4,5].map(Re=>i.jsx(ee,{width:100,height:32,style:{borderRadius:"16px"}},Re)):c.length>0?c.map(Re=>i.jsxs("div",{className:At.recentPill,onClick:()=>Ce(Re),onMouseEnter:()=>me(Re.id),children:[i.jsx("span",{className:At.recentName,children:Re.name||"Patient"}),i.jsxs("span",{className:At.recentToken,children:["#",Re.token]}),i.jsxs("span",{className:At.recentInfo,children:[Re.age?`${Re.age}y`:""," ",Re.gender||""]})]},Re.id)):i.jsx("div",{className:At.recentInfo,style:{opacity:.5},children:"No recent patients found."})})]}),wt&&!dn&&i.jsxs("div",{className:At.section,children:[i.jsx("div",{className:At.sectionTitle,children:"Try Asking AI..."}),i.jsx("div",{className:At.examplesGrid,children:xe.map((Re,vt)=>i.jsxs("div",{className:At.exampleCard,onClick:()=>dt(Re.text),children:[i.jsx("span",{className:At.exampleIcon,children:Re.icon}),i.jsx("span",{className:At.exampleText,children:Re.text})]},vt))})]}),x&&i.jsx("div",{className:At.section,children:i.jsxs("div",{className:At.processing,children:[i.jsx(Dc,{size:16,className:At.spinner}),"Searching..."]})}),y.length>0&&!x&&i.jsxs("div",{className:At.section,children:[i.jsx("div",{className:At.sectionTitle,children:"Pages Found"}),i.jsx("div",{className:At.resultsList,children:y.map((Re,vt)=>i.jsxs("div",{className:At.resultItem,onClick:()=>nt(Re),onMouseEnter:()=>Ve(Re),children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("span",{style:{color:"#7c3aed"},children:Re.icon}),i.jsx("span",{className:At.resultName,children:Re.name})]}),i.jsx("span",{className:At.resultDetails,style:{fontSize:"0.7rem"},children:"Jump to page"})]},vt))})]}),Je&&i.jsxs("div",{className:At.section,children:[i.jsx("div",{className:At.sectionTitle,children:"Patients Found"}),i.jsxs("div",{className:At.resultsList,children:[o.trim().length>0&&i.jsx("div",{className:At.resultItem,onClick:Ct,style:{border:"1px dashed #6366f1",backgroundColor:"#f5f3ff"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#8b5cf6",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(aN,{size:16})}),i.jsxs("div",{children:[i.jsxs("span",{className:At.resultName,style:{color:"#7c3aed"},children:['Create "',o,'"']}),i.jsx("div",{className:"text-xs text-violet-600 mt-0.5",children:"Add new patient"})]})]})}),f.map(Re=>i.jsxs("div",{className:At.resultItem,onClick:()=>Ce(Re),onMouseEnter:()=>{iz(),me(Re.id)},children:[i.jsxs("div",{children:[i.jsxs("span",{className:At.resultToken,children:["[#",Re.token,"]"]}),i.jsx("span",{className:At.resultName,children:Re.name})]}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-1",children:[Re.age&&i.jsxs("span",{children:[Re.age," Yrs"]}),Re.gender&&i.jsx("span",{children:Re.gender}),i.jsxs("span",{children:["ID: ",Re.id.slice(-6).toUpperCase()]}),E.map(vt=>{var ur;const It=(ur=Re.custom_fields)==null?void 0:ur[vt.key];return It?i.jsxs("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 border border-slate-200",children:[vt.label,": ",String(It)]},vt.key):null})]})]},Re.id))]})]}),Pt&&!dn&&i.jsx("div",{className:At.section,children:i.jsxs("div",{className:At.noResults,children:["Press ",i.jsx("strong",{children:"Enter"}),' to send "',o,'" to AI Assistant']})})]})]}),i.jsxs("div",{className:At.header,children:[i.jsx("div",{className:At.inputWrapper,children:i.jsxs("div",{className:At.inputContainer,children:[i.jsx("div",{className:At.minimizedSearchIcon,children:i.jsx(Un,{size:24})}),i.jsx("textarea",{ref:Re=>{s.current=Re,Re&&(Re.style.height="auto",Re.style.height=Math.min(Re.scrollHeight,150)+"px")},className:At.input,placeholder:F?"Type here...":"Search (Name/Token/Phone), Ask AI, or Enter New Case (Name Age Sex Complaint)...",value:o,onChange:Re=>{ve(Re),Re.target.style.height="auto",Re.target.style.height=Math.min(Re.target.scrollHeight,150)+"px"},onKeyDown:ze,onFocus:Re=>{Re.target.scrollIntoView=()=>{},setTimeout(()=>{_e.current&&(_e.current.scrollTop=_e.current.scrollHeight)},100)},rows:1,disabled:H}),q&&i.jsxs("div",{style:{position:"relative",marginRight:"0.5rem"},children:[i.jsx("img",{src:q,alt:"Selected",style:{width:"24px",height:"24px",objectFit:"cover",borderRadius:"4px",border:"1px solid #e2e8f0"}}),i.jsx("button",{onClick:se,style:{position:"absolute",top:-4,right:-4,background:"rgba(0,0,0,0.6)",color:"white",border:"none",borderRadius:"50%",padding:"1px",cursor:"pointer",display:"flex"},children:i.jsx(zt,{size:8})})]}),i.jsxs("div",{className:At.controlsGroup,children:[i.jsx("button",{className:At.iconButton,onClick:()=>{var Re;return(Re=X.current)==null?void 0:Re.click()},title:"Attach Image",children:i.jsx(SD,{size:16})}),(o.trim().length>0||q)&&i.jsx("button",{className:`${At.iconButton} ${At.sendButton}`,onClick:()=>Fe(o),title:"Send to AI",children:i.jsx(iN,{size:16})}),i.jsx("button",{className:At.iconButton,onClick:be,title:"Voice Input",children:i.jsx(rN,{size:16})})]})]})}),i.jsx("input",{type:"file",ref:X,onChange:W,accept:"image/*",style:{display:"none"}})]})]})}),de&&i.jsx(TN,{onClose:()=>Q(!1),patientData:null,tokenNumber:null,onAiSummaryChange:Re=>{console.log("AI Summary:",Re),I(Re)}}),G&&i.jsx(jMe,{isOpen:!!G,onClose:B,title:G.title,widgets:G.widgets,onSave:fe})]})};var oW={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sz=ye.createContext&&ye.createContext(oW),NMe=["attr","size","title"];function _Me(e,t){if(e==null)return{};var n=CMe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function CMe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function KS(){return KS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KS.apply(this,arguments)}function oz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function YS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oz(Object(n),!0).forEach(function(r){TMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TMe(e,t,n){return t=EMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EMe(e){var t=AMe(e,"string");return typeof t=="symbol"?t:t+""}function AMe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lW(e){return e&&e.map((t,n)=>ye.createElement(t.tag,YS({key:n},t.attr),lW(t.child)))}function Oa(e){return t=>ye.createElement(kMe,KS({attr:YS({},e.attr)},t),lW(e.child))}function kMe(e){var t=n=>{var{attr:r,size:a,title:s}=e,o=_Me(e,NMe),l=a||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),ye.createElement("svg",KS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:YS(YS({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&ye.createElement("title",null,s),e.children)};return sz!==void 0?ye.createElement(sz.Consumer,null,n=>t(n)):t(oW)}function PMe(e){return Oa({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(e)}function lz(e){return Oa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function fx(e){return Oa({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function cz(e){return Oa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(e)}function ck(e){return Oa({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(e)}function Hh(e){return Oa({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function rw(e){return Oa({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(e)}function Cm(e){return Oa({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(e)}function px(e){return Oa({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(e)}function Pm(e){return Oa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function cW(e){return Oa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function uz(e){return Oa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(e)}function OMe(e){return Oa({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function iw(e){return Oa({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(e)}function Tm(e){return Oa({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const uW={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:Hh},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:rw},{path:"/dashboard/users",name:"User Management",icon:Tm}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:Hh}]},{title:"Clinic Management",links:[{path:"/dashboard/clinic-hub",name:"Clinic Hub",icon:cz},{path:"/dashboard/staff",name:"Staff Management",icon:Tm},{path:"/dashboard/roles",name:"Role Management",icon:iw},{path:"/custom-tables",name:"Custom Tables",icon:fx},{path:"/dashboards",name:"Custom Dashboards",icon:lz}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:rw},{path:"/dashboard/patients",name:"All Patients",icon:Tm},{path:"/dashboard/patients/search",name:"Search Patient",icon:Pm},{path:"/dashboard/files",name:"Patient Files",icon:fx}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:fx},{path:"/dashboard/inventory",name:"Inventory Management",icon:px},{path:"/dashboard/inventory/add",name:"Add Drug",icon:px},{path:"/dashboard/distributors",name:"Distributor Management",icon:Tm}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:uz},{path:"/dashboard/reception",name:"Appointment Queue",icon:Hh},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:Cm},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:Cm}]},{title:"Role Operations",links:[{path:"/manage-admission",name:"Admission Desk",icon:iw},{path:"/dashboard/pharmacy-queue",name:"Pharmacy Queue",icon:px},{path:"/dashboard/lab",name:"Lab Panel",icon:ck},{path:"/billing",name:"Billing",icon:Cm},{path:"/create-custom-bill",name:"Custom Bill",icon:Cm}]},{title:"Help & Support",links:[{path:"/dashboard/guide",name:"User Guide",icon:PMe}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search-patient",name:"Patient Search",icon:Pm},{path:"/dashboard/add-patient",name:"Add Patient",icon:rw},{path:"/manage-admission",name:"Manage Admission",icon:iw}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:ck},{path:"/billing",name:"Billing",icon:Cm}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:uz}]},{title:"Analytics",links:[{path:"/dashboards",name:"Custom Dashboards",icon:lz}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Appointment Queue",icon:Hh}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:Tm},{path:"/dashboard/add-patient",name:"Add Patient",icon:rw},{path:"/dashboard/search-patient",name:"Search Patient",icon:Pm}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:Cm},{path:"/manage-admission",name:"Manage Admission",icon:iw}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:Hh},{path:"/lab-inventory",name:"Lab Test Inventory",icon:ck},{path:"/lab/search-report",name:"Search Lab Report",icon:Pm}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:Hh},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:px},{path:"/dashboard/inventory/add",name:"Add Drug",icon:px},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:fx},{path:"/dashboard/distributors",name:"Distributor Management",icon:Tm}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Analysis Dashboard",icon:fx},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:cz},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:Pm}]}]},dI=async()=>{const e=await ce("/api/clinic-subscriptions/plans",{method:"GET"});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to fetch clinic subscription plans")}return e.json()},DMe=async e=>{const t=await ce(`/api/clinic-subscriptions/cancel/${e}`,{method:"PUT"});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to cancel clinic subscription")}return t.json()},MMe=async e=>{const t=await ce(`/api/clinics/${e}/subscription-status`,{method:"GET"});if(!t.ok){const n=await t.json();throw new Error(n.message||`Failed to fetch subscription status for clinic ${e}`)}return t.json()},IMe=async e=>{const t=await ce(`/api/clinic-subscriptions/plans/${e}`,{method:"GET"});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch clinic subscription plan")}return t.json()},RMe=async e=>{const t=await ce("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to create clinic subscription plan")}return t.json()},LMe=async(e,t)=>{const n=await ce(`/api/clinic-subscriptions/plans/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to update clinic subscription plan")}return n.json()},FMe=async e=>{const t=await ce(`/api/clinic-subscriptions/plans/${e}`,{method:"DELETE"});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to deactivate clinic subscription plan")}return t.json()},$Me=async e=>{const t=await ce("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:e})});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to initiate clinic subscription")}return t.json()},BMe=async()=>{try{const e=await ce("/api/clinic-subscriptions/pending",{method:"GET"});return e.ok?e.json():null}catch(e){return console.error("Error checking for pending subscription:",e),null}},zMe=async()=>{const e=await ce("/api/clinics/subscription-status",{method:"GET"});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to fetch clinic subscription status")}return e.json()};function qMe(e=!0){return JS({queryKey:Vt.clinicSubscription,queryFn:zMe,enabled:e,staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!0})}const UMe="_container_c9bhr_3",VMe="_header_c9bhr_21",HMe="_titleGroup_c9bhr_41",GMe="_title_c9bhr_41",WMe="_closeButton_c9bhr_59",KMe="_messageList_c9bhr_79",YMe="_emptyState_c9bhr_108",QMe="_emptyStateIcon_c9bhr_119",XMe="_exampleContainer_c9bhr_145",JMe="_exampleChip_c9bhr_153",ZMe="_messageRow_c9bhr_176",eIe="_messageRowUser_c9bhr_194",tIe="_messageRowModel_c9bhr_198",nIe="_messageRowSystem_c9bhr_202",rIe="_bubble_c9bhr_208",iIe="_bubbleUser_c9bhr_224",aIe="_bubbleModel_c9bhr_234",sIe="_bubbleSystem_c9bhr_247",oIe="_processingIndicator_c9bhr_330",lIe="_spin_c9bhr_343",cIe="_inputArea_c9bhr_358",uIe="_imagePreviewContainer_c9bhr_365",dIe="_inputContainer_c9bhr_376",hIe="_inputField_c9bhr_393",fIe="_sendButton_c9bhr_407",ir={container:UMe,header:VMe,titleGroup:HMe,title:GMe,closeButton:WMe,messageList:KMe,emptyState:YMe,emptyStateIcon:QMe,exampleContainer:XMe,exampleChip:JMe,messageRow:ZMe,messageRowUser:eIe,messageRowModel:tIe,messageRowSystem:nIe,bubble:rIe,bubbleUser:iIe,bubbleModel:aIe,bubbleSystem:sIe,processingIndicator:oIe,spin:lIe,inputArea:cIe,imagePreviewContainer:uIe,inputContainer:dIe,inputField:hIe,sendButton:fIe},dW=({onClose:e,settings:t,staffList:n,onSettingsUpdate:r,onStaffUpdate:a,onHighlight:s})=>{const{chatQuery:o,setChatQuery:l,chatHistory:c,isProcessing:u,handleSendMessage:f,refreshChat:p,stopGeneration:y,selectedImage:v,handleImageSelect:x,clearImage:b}=HD({settings:t,staffList:n,onSettingsUpdate:r,onStaffUpdate:a,onHighlight:s}),w=j.useRef(null),_=j.useRef(null),T=()=>{var P;(P=w.current)==null||P.scrollIntoView({behavior:"smooth"})};j.useEffect(()=>{T()},[c,u]);const C=P=>{var F;const I=(F=P.target.files)==null?void 0:F[0];I&&x(I)},O=["Check Paracetamol stock","Go to Pharmacy","Analysis for last month","Add nurse Sarah"],E=P=>{l(P)};return i.jsxs("div",{className:ir.container,children:[i.jsxs("header",{className:ir.header,children:[i.jsxs("div",{className:ir.titleGroup,children:[i.jsx(Fx,{size:20,className:"text-violet-600"}),i.jsx("h3",{className:ir.title,children:"Clinic Assistant"})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:p,className:ir.closeButton,title:"Refresh Chat",children:i.jsx(Uq,{size:18})}),i.jsx("button",{onClick:e,className:ir.closeButton,title:"Close",children:i.jsx(zt,{size:20})})]})]}),i.jsxs("div",{className:ir.messageList,children:[c.length===0&&i.jsxs("div",{className:ir.emptyState,children:[i.jsx(Fx,{size:48,className:ir.emptyStateIcon}),i.jsx("p",{children:"How can I help you manage the clinic today?"}),i.jsx("div",{className:ir.exampleContainer,children:O.map((P,I)=>i.jsx("button",{className:ir.exampleChip,onClick:()=>E(P),children:P},I))})]}),c.map((P,I)=>i.jsx("div",{className:`${ir.messageRow} ${P.role==="user"?ir.messageRowUser:P.role==="model"?ir.messageRowModel:ir.messageRowSystem}`,children:i.jsx("div",{className:`${ir.bubble} ${P.role==="user"?ir.bubbleUser:P.role==="model"?ir.bubbleModel:ir.bubbleSystem}`,children:P.role==="user"||P.role==="system"?P.text:i.jsx(Sf,{remarkPlugins:[Nf],children:P.text})})},I)),u&&i.jsx("div",{className:`${ir.messageRow} ${ir.messageRowModel}`,children:i.jsxs("div",{className:ir.processingIndicator,children:[i.jsx(Dc,{size:14,className:ir.spin}),"Thinking..."]})}),i.jsx("div",{ref:w})]}),i.jsxs("div",{className:ir.inputArea,children:[v&&i.jsxs("div",{className:ir.imagePreviewContainer,style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",overflow:"hidden"},children:[i.jsx("img",{src:v,alt:"Selected",style:{width:"100%",height:"100%",objectFit:"cover"}}),i.jsx("button",{onClick:b,style:{position:"absolute",top:0,right:0,background:"rgba(0,0,0,0.5)",color:"white",border:"none",cursor:"pointer",padding:"1px"},children:i.jsx(zt,{size:12})})]}),i.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Image attached"})]}),i.jsxs("div",{className:ir.inputContainer,children:[i.jsx("input",{type:"file",ref:_,onChange:C,accept:"image/*",style:{display:"none"}}),i.jsx("button",{className:ir.sendButton,onClick:()=>{var P;return(P=_.current)==null?void 0:P.click()},disabled:u,title:"Attach Image",style:{marginRight:"0.5rem",color:"#6b7280"},children:i.jsx(SD,{size:18})}),i.jsx("input",{type:"text",className:ir.inputField,placeholder:"Type your request...",value:o,onChange:P=>l(P.target.value),onKeyDown:P=>P.key==="Enter"&&!u&&f(),disabled:u,autoFocus:!0}),u?i.jsx("button",{className:ir.sendButton,onClick:y,title:"Stop Generating",style:{color:"#ef4444"},children:i.jsx(JZ,{size:18,fill:"currentColor"})}):i.jsx("button",{className:ir.sendButton,onClick:()=>f(),disabled:!o.trim()&&!v,children:i.jsx(iN,{size:18})})]})]})]})};function Hc(e,t=100){const n=j.useRef(!1);j.useEffect(()=>{if(n.current)return;const r=setTimeout(()=>{const a=document,s=['input[type="text"]:not([disabled]):not([readonly])','input[type="search"]:not([disabled]):not([readonly])','input[type="email"]:not([disabled]):not([readonly])','input[type="tel"]:not([disabled]):not([readonly])','input[type="url"]:not([disabled]):not([readonly])',"input:not([type]):not([disabled]):not([readonly])"].join(", "),o=a.querySelectorAll(s),l=Array.from(o).filter(c=>{const u=window.getComputedStyle(c),f=c.getBoundingClientRect();return u.display!=="none"&&u.visibility!=="hidden"&&u.opacity!=="0"&&f.width>0&&f.height>0});if(l.length>0){const c=l[0];c.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{c.focus()},50),n.current=!0}},t);return()=>clearTimeout(r)},[e,t])}const pIe=({onLoginSuccess:e})=>{const[t,n]=j.useState(""),[r,a]=j.useState(""),[s,o]=j.useState(null),[l,c]=j.useState(!1),u=Mt();Hc();const f=async v=>{v.preventDefault(),c(!0),o(null);try{const x=await ce("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})});if(!x.ok){let w=`Login failed with status: ${x.status}`;try{w=(await x.json()).message||w}catch{try{const T=await x.text();T&&(w=`${w} - ${T}`)}catch{}}throw new Error(w)}const b=await x.json();console.log("Login successful:",b),localStorage.setItem("authToken",b.token),localStorage.setItem("currentUser",JSON.stringify(b.user)),b.user.clinic_id&&localStorage.setItem("currentClinicId",b.user.clinic_id),e(b.user),b.user.role==="doctor"?u("/dashboard/queue"):u("/dashboard")}catch(x){console.error("Login failed:",x),o(x.message||"Login failed. Please check your credentials.")}finally{c(!1)}},p=async v=>{c(!0),o(null);try{const x=await ce("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:v.credential})});if(!x.ok)throw new Error("Google Sign-In failed");const b=await x.json();localStorage.setItem("authToken",b.token),localStorage.setItem("currentUser",JSON.stringify(b.user)),b.user.clinic_id&&localStorage.setItem("currentClinicId",b.user.clinic_id),e(b.user),b.user.role==="doctor"?u("/dashboard/queue"):u("/dashboard")}catch(x){console.error("Google Login Error:",x),o("Google Sign-In failed. Please try again.")}finally{c(!1)}},y=()=>{console.error("Google Login Failed"),o("Google Sign-In was unsuccessful. Please try again.")};return i.jsx("div",{className:"auth-page-container",children:i.jsxs("div",{className:"auth-form-card",children:[i.jsx("h2",{className:"auth-title",children:"Newtons AI HMS"}),i.jsx("p",{className:"auth-subtitle",children:"Sign in to continue"}),i.jsxs("form",{onSubmit:f,className:"auth-form",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:v=>n(v.target.value),className:"auth-text-input",placeholder:" "}),i.jsx("label",{htmlFor:"email",children:"Email address"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:v=>a(v.target.value),className:"auth-text-input",placeholder:" "}),i.jsx("label",{htmlFor:"password",children:"Password"})]}),s&&i.jsx("div",{className:"auth-error-message",children:i.jsx("p",{children:s})}),i.jsx("div",{className:"form-group",children:i.jsx("button",{type:"submit",disabled:l,className:"auth-submit-button",children:l?"Signing in...":"Sign In"})})]}),i.jsx("div",{className:"google-login-container",children:i.jsx(dY,{onSuccess:p,onError:y,useOneTap:!0})}),i.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",i.jsx(vr,{to:"/register",className:"auth-navigation-link",children:"Create account"})]}),i.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},mIe=()=>{const[e,t]=j.useState(""),[n,r]=j.useState(""),[a,s]=j.useState(""),[o,l]=j.useState(""),[c,u]=j.useState(null),[f,p]=j.useState(!1),y=Mt(),v=async x=>{x.preventDefault(),p(!0),u(null);try{const b=await ce("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:e,userName:n,userEmail:a,userPassword:o})}),w=await b.json();if(!b.ok)throw new Error(w.message||`HTTP error! status: ${b.status}`);console.log("Registration successful:",w),y("/login")}catch(b){console.error("Registration failed:",b),u(b.message||"Registration failed. Please try again.")}finally{p(!1)}};return i.jsx("div",{className:"auth-page-container",children:i.jsxs("div",{className:"auth-form-card",children:[i.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),i.jsxs("form",{onSubmit:v,className:"auth-form",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"}),i.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:e,onChange:x=>t(x.target.value),className:"auth-text-input",placeholder:"Your Clinic's Name"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"}),i.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:n,onChange:x=>r(x.target.value),className:"auth-text-input",placeholder:"Your Full Name"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"userEmail",children:"Your Email (Admin Login)"}),i.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:a,onChange:x=>s(x.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"userPassword",children:"Password"}),i.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:o,onChange:x=>l(x.target.value),className:"auth-text-input",placeholder:"Min. 6 characters"})]}),c&&i.jsx("div",{className:"auth-error-message",children:i.jsx("p",{children:c})}),i.jsx("div",{className:"form-group",children:i.jsx("button",{type:"submit",disabled:f,className:"auth-submit-button",children:f?"Registering...":"Register Clinic & Admin"})})]}),i.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",i.jsx(vr,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),i.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},gIe=({user:e,onLogout:t,userRole:n,isOpen:r,onClose:a})=>{const s=$r(),[o,l]=j.useState(""),c=uW[n]||[],[u,f]=j.useState(500),p=j.useRef(!1),y=j.useCallback(w=>{p.current=!0,w.preventDefault()},[]),v=j.useCallback(()=>{p.current=!1},[]),x=j.useCallback(w=>{if(p.current){const _=window.innerWidth-w.clientX;_>250&&_<window.innerWidth*.8&&f(_)}},[]);j.useEffect(()=>(window.addEventListener("mousemove",x),window.addEventListener("mouseup",v),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",v)}),[x,v]);const b=c.map(w=>({...w,links:w.links.filter(_=>_.name.toLowerCase().includes(o.toLowerCase()))})).filter(w=>w.links.length>0);return i.jsxs("div",{className:`side-panel ${r?"open":""}`,style:{width:`${u}px`,right:r?"0":`-${u}px`},children:[i.jsx("div",{className:"resizer",onMouseDown:y}),i.jsxs("div",{className:"side-panel-header",children:[i.jsx(vr,{to:"/dashboard",className:"home-button",onClick:a,children:i.jsx(Hh,{})}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(Pm,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),i.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:o,onChange:w=>l(w.target.value)})]}),i.jsx("button",{className:"close-button",onClick:a,children:""})]}),i.jsx("nav",{children:b.map((w,_)=>i.jsxs("div",{className:"page-section",children:[i.jsx("div",{className:"page-title",children:w.title}),i.jsx("ul",{className:"sub-page-list",children:w.links.map(T=>{const C=T.icon;return i.jsx("li",{children:i.jsxs(vr,{to:T.path,className:s.pathname===T.path?"active":"",onClick:a,children:[C&&i.jsx(C,{})," ",T.name]})},T.path)})})]},_))}),i.jsxs("div",{className:"user-info-section",children:[i.jsxs("span",{className:"user-name",children:["Welcome, ",e.name]}),i.jsxs("button",{onClick:t,className:"logout-button-sidebar",children:[i.jsx(cW,{})," Logout"]})]})]})},yIe=({user:e,onLogout:t,userRole:n,isOpen:r,onClose:a,roleNavigation:s})=>{const o=$r(),l=s[n]||[];return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`mobile-side-panel-overlay ${r?"open":""}`,onClick:a}),i.jsxs("div",{className:`mobile-side-panel ${r?"open":""}`,children:[i.jsxs("div",{className:"mobile-side-panel-header",children:[i.jsx("h3",{children:"Menu"}),i.jsx("button",{className:"close-button",onClick:a,children:i.jsx(OMe,{})})]}),i.jsx("nav",{children:l.map((c,u)=>i.jsxs("div",{className:"page-section",children:[i.jsx("div",{className:"page-title",children:c.title}),i.jsx("ul",{className:"sub-page-list",children:c.links.map(f=>{const p=f.icon;return i.jsx("li",{children:i.jsxs(vr,{to:f.path,className:o.pathname===f.path?"active":"",onClick:a,children:[p&&i.jsx(p,{})," ",f.name]})},f.path)})})]},u))}),i.jsxs("div",{className:"user-info-section",children:[i.jsxs("span",{className:"user-name",children:["Welcome, ",e.name]}),i.jsxs("button",{onClick:t,className:"logout-button-sidebar",children:[i.jsx(cW,{})," Logout"]})]})]})]})},Vu={"/dashboard":{label:"Dashboard"},"/dashboard/staff":{label:"Staff Management",parent:"/dashboard"},"/dashboard/staff/add":{label:"Add Staff",parent:"/dashboard/staff"},"/dashboard/staff/edit":{label:"Edit Staff",parent:"/dashboard/staff"},"/dashboard/roles":{label:"Role Management",parent:"/dashboard"},"/dashboard/patients":{label:"All Patients",parent:"/dashboard"},"/dashboard/patients/add":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search-patient":{label:"Search Patient",parent:"/dashboard"},"/dashboard/clinic-hub":{label:"Clinic Hub",parent:"/dashboard"},"/dashboard/reception":{label:"Appointment Queue",parent:"/dashboard"},"/dashboard/pharmacy-queue":{label:"Pharmacy Queue",parent:"/dashboard"},"/dashboard/lab":{label:"Lab Panel",parent:"/dashboard"},"/dashboard/inventory":{label:"Inventory",parent:"/dashboard"},"/dashboard/inventory/add":{label:"Add Drug",parent:"/dashboard/inventory"},"/dashboard/inventory/edit":{label:"Edit Drug",parent:"/dashboard/inventory"},"/dashboard/purchase":{label:"Purchase",parent:"/dashboard"},"/dashboard/distributors":{label:"Distributors",parent:"/dashboard"},"/dashboard/patient-debts":{label:"Patient Debts",parent:"/dashboard"},"/dashboard/add-order":{label:"Add Pharmacy Order",parent:"/dashboard"},"/dashboard/edit-pharmacy-order":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/pharmacy-billing":{label:"Pharmacy Billing",parent:"/dashboard"},"/dashboard/analysis":{label:"Analysis",parent:"/dashboard"},"/dashboard/settings":{label:"Settings",parent:"/dashboard"},"/dashboard/search-patient-records":{label:"Search Records",parent:"/dashboard"},"/dashboard/queue":{label:"Queue",parent:"/dashboard"},"/dashboard/add-patient":{label:"Add Patient",parent:"/dashboard"},"/dashboard/search":{label:"Patient Search",parent:"/dashboard"},"/dashboard/patients/search":{label:"Search Patient",parent:"/dashboard"},"/dashboard/subscriptions":{label:"Subscriptions",parent:"/dashboard"},"/dashboard/subscriptions/add":{label:"Add Plan",parent:"/dashboard/subscriptions"},"/dashboard/subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/subscriptions"},"/dashboard/clinic-subscriptions":{label:"Clinic Subscriptions",parent:"/dashboard"},"/dashboard/clinic-subscriptions/add":{label:"Add Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/clinic-subscriptions/edit":{label:"Edit Plan",parent:"/dashboard/clinic-subscriptions"},"/dashboard/users":{label:"User Management",parent:"/dashboard"},"/dashboard/lab-billing":{label:"Lab Billing",parent:"/dashboard"},"/lab-inventory":{label:"Lab Inventory",parent:"/dashboard"},"/lab/search-report":{label:"Search Lab Report",parent:"/dashboard"},"/create-lab-order":{label:"Create Lab Order",parent:"/dashboard"},"/enter-lab-report":{label:"Enter Lab Report",parent:"/dashboard"},"/view-lab-report":{label:"View Lab Report",parent:"/dashboard"},"/lab/report/:id":{label:"Lab Report",parent:"/lab/search-report"},"/lab/enter-report/:id":{label:"Enter Report",parent:"/lab/search-report"},"/lab/view-report/:id":{label:"View Report",parent:"/lab/search-report"},"/billing":{label:"Billing",parent:"/dashboard"},"/dashboard/doctor-billing":{label:"Doctor Billing",parent:"/dashboard"},"/dashboard/doctor-billing/:id":{label:"Doctor Bill",parent:"/dashboard/doctor-billing"},"/create-custom-bill":{label:"Create Custom Bill",parent:"/dashboard"},"/patient":{label:"Patient",parent:"/dashboard"},"/patient/:id/admission-billing":{label:"Admission Billing",parent:"/manage-admission"},"/patient/:id/admission-bill":{label:"Admission Bill",parent:"/patient/:id/admission-billing"},"/patient/:id/lab-reports":{label:"Lab Reports",parent:"/patient"},"/patient/:id/pharmacy-orders":{label:"Pharmacy Orders",parent:"/patient"},"/patient/:id/complaints":{label:"Past Complaints",parent:"/patient"},"/edit-complaint":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/:id":{label:"Edit Complaint",parent:"/dashboard"},"/dashboard/edit-complaint/patient/:id":{label:"New Complaint",parent:"/dashboard"},"/start-subscription":{label:"Start Subscription",parent:"/dashboard"},"/start-subscription/:id":{label:"Start Subscription",parent:"/dashboard"},"/manage-admission":{label:"Manage Admission",parent:"/dashboard"},"/dashboard/guide":{label:"User Guide",parent:"/dashboard"},"/custom-tables":{label:"Custom Tables",parent:"/dashboard"},"/custom-tables/:id":{label:"Table Records",parent:"/custom-tables"},"/dashboards":{label:"Dashboards",parent:"/dashboard"},"/dashboards/new":{label:"New Dashboard",parent:"/dashboards"},"/dashboards/:id":{label:"Dashboard View",parent:"/dashboards"},"/dashboards/:id/edit":{label:"Edit Dashboard",parent:"/dashboards"},"/dashboard/pharmacy-billing/:id":{label:"Pharmacy Bill",parent:"/dashboard/pharmacy-billing"},"/dashboard/lab-billing/:id":{label:"Lab Bill",parent:"/dashboard/lab-billing"},"/dashboard/edit-pharmacy-order/:id":{label:"Edit Pharmacy Order",parent:"/dashboard"},"/dashboard/orders/:id":{label:"Order Details",parent:"/dashboard/add-order"},"/refill-reminders":{label:"Refill Reminders",parent:"/dashboard"},"/start-clinic-subscription":{label:"Start Clinic Subscription",parent:"/dashboard"},"/dashboard/all-patients":{label:"All Patients",parent:"/dashboard"}},dz=e=>e.split("/").map(t=>{const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t),r=/^\d+$/.test(t);return n||r?":id":t}).join("/"),vIe=e=>{if(Vu[e])return Vu[e].label;const t=dz(e);if(Vu[t])return Vu[t].label;const n=e.split("/"),r=n[n.length-1],a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(r),s=/^\d+$/.test(r);if(a||s){const o=n.slice(0,-1).join("/"),l=dz(o);if(Vu[l])return Vu[l].label;if(Vu[o])return Vu[o].label}return r.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},xIe=()=>{const e=$r(),t=j.useMemo(()=>{const n=e.pathname.split("/").filter(s=>s!=="");if(n.length===0||n[0]==="login"||n[0]==="registration")return[];const r=[];let a="";return n.forEach((s,o)=>{if(a+=`/${s}`,o===0&&s==="dashboard")r.push({label:"Home",path:"/dashboard",isLast:o===n.length-1});else if(s!=="dashboard"){const l=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s),c=/^\d+$/.test(s);let u=vIe(a);(l||c)&&u.replace(/\s/g,"").toLowerCase()===s.replace(/[-_]/g,"").toLowerCase()&&(l?u=`#${s.substring(0,8)}`:c&&(u=`#${s}`)),r.push({label:u,path:a,isLast:o===n.length-1})}}),n[0]!=="dashboard"&&r.length>0&&r.unshift({label:"Home",path:"/dashboard",isLast:!1}),r},[e.pathname]);return t.length===0?null:i.jsx("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:i.jsx("ol",{className:"breadcrumb-list",children:t.map((n,r)=>i.jsxs("li",{className:"breadcrumb-item",children:[r>0&&i.jsx(md,{className:"breadcrumb-separator",size:14}),n.isLast?i.jsxs("span",{className:"breadcrumb-current","aria-current":"page",children:[r===0&&i.jsx(Wk,{size:14,className:"breadcrumb-home-icon"}),n.label]}):i.jsxs(vr,{to:n.path,className:"breadcrumb-link",children:[r===0&&i.jsx(Wk,{size:14,className:"breadcrumb-home-icon"}),n.label]})]},n.path))})})},bIe="_container_1ivr9_5",jIe="_visualContainer_1ivr9_33",wIe="_mobileDashboardGrid_1ivr9_49",SIe="_mobileDashboardItem_1ivr9_87",NIe="_mobileDashboardIcon_1ivr9_195",_Ie="_mobileDashboardLabel_1ivr9_233",CIe="_brandTitle_1ivr9_331",TIe="_searchBar_1ivr9_387",EIe="_searchIconWrapper_1ivr9_435",AIe="_searchIcon_1ivr9_435",kIe="_placeholderText_1ivr9_459",PIe="_shortcutHint_1ivr9_479",OIe="_key_1ivr9_495",DIe="_plus_1ivr9_519",MIe="_micButtonWrapper_1ivr9_529",IIe="_micIcon_1ivr9_577",RIe="_newlyRegisteredSection_1ivr9_901",LIe="_recentList_1ivr9_917",FIe="_recentPatientPill_1ivr9_931",$Ie="_recentNameContainer_1ivr9_957",BIe="_recentInfo_1ivr9_969",zIe="_newlyRegisteredLabel_1ivr9_1007",qIe="_recentName_1ivr9_957",UIe="_recentToken_1ivr9_1171",fr={container:bIe,visualContainer:jIe,mobileDashboardGrid:wIe,mobileDashboardItem:SIe,mobileDashboardIcon:NIe,mobileDashboardLabel:_Ie,brandTitle:CIe,searchBar:TIe,searchIconWrapper:EIe,searchIcon:AIe,placeholderText:kIe,shortcutHint:PIe,key:OIe,plus:DIe,micButtonWrapper:MIe,micIcon:IIe,newlyRegisteredSection:RIe,recentList:LIe,recentPatientPill:FIe,recentNameContainer:$Ie,recentInfo:BIe,newlyRegisteredLabel:zIe,recentName:qIe,recentToken:UIe},VIe=[{label:"Doctor",icon:i.jsx(sg,{size:24}),path:"/dashboard/doctor"},{label:"Labs",icon:i.jsx(hw,{size:24}),path:"/create-lab-order"},{label:"Clinic",icon:i.jsx(Fq,{size:24}),path:"/dashboard/clinic-hub"},{label:"Inventory",icon:i.jsx(Nc,{size:24}),path:"/dashboard/inventory"},{label:"Analysis",icon:i.jsx(hw,{size:24}),path:"/dashboard/analysis"},{label:"Dental",icon:i.jsx(KZ,{size:24}),path:"/dashboard/dental"},{label:"Files",icon:i.jsx(hw,{size:24}),path:"/dashboard/files"},{label:"Distributors",icon:i.jsx(ND,{size:24}),path:"/dashboard/distributors"},{label:"Custom Bill",icon:i.jsx(aa,{size:24}),path:"/create-custom-bill"},{label:"Patients",icon:i.jsx(ko,{size:24}),path:"/dashboard/patients"},{label:"Debts",icon:i.jsx(wD,{size:24}),path:"/dashboard/patient-debts"}],hW="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",HIe={apiKey:hW},GIe=()=>{const{openCommandBar:e,isOpen:t,setPreFilledQuery:n}=Pc(),[r,a]=j.useState(!1),[s,o]=j.useState(null),l=Mt(),c=x=>{x.stopPropagation(),a(!0)};j.useEffect(()=>{s&&(a(!1),n&&n(s),e(),o(null))},[s,e,n]);const u=ns(),{data:f,isLoading:p}=JS({queryKey:["recentPatients"],queryFn:async()=>{const x=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),b=await ce(`/api/patients?${x.toString()}`);if(!b.ok)throw new Error("Failed to fetch recent patients");return b.json()},staleTime:60*1e3});j.useEffect(()=>{u.prefetchQuery({queryKey:Vt.clinicSettings,queryFn:async()=>{const x=await ce("/api/clinics/settings");if(!x.ok)throw new Error("Failed to fetch clinic settings");return x.json()},staleTime:30*60*1e3}),u.prefetchQuery({queryKey:Vt.drugs.all,queryFn:async()=>{const x=await ce("/api/drugs");if(!x.ok)throw new Error("Failed to fetch drugs");const b=await x.json();return b.drugs||b},staleTime:10*60*1e3}),u.prefetchQuery({queryKey:Vt.labTests.all,queryFn:async()=>{const x=await ce("/api/lab-tests");if(!x.ok)throw new Error("Failed to fetch lab tests");return x.json()},staleTime:10*60*1e3})},[u]);const y=(f==null?void 0:f.patients)||[],v=x=>{x&&(u.prefetchQuery({queryKey:Vt.patients.context(x),queryFn:async()=>{const b=await ce(`/api/patients/${x}/context`);if(!b.ok)throw new Error("Failed to fetch patient context");return b.json()},staleTime:5*60*1e3}),u.prefetchQuery({queryKey:Vt.dental.records(x),queryFn:async()=>{const b=await ce(`/api/dental/patient/${x}`);if(!b.ok)throw new Error("Failed to fetch dental records");return b.json()},staleTime:5*60*1e3}),u.prefetchQuery({queryKey:Vt.patientDebts.balance(x),queryFn:async()=>{const b=await ce(`/api/patient-debts/${x}/balance`);return b.ok?b.json():{netDebt:0}},staleTime:1*60*1e3}),u.prefetchQuery({queryKey:Vt.queue.latest(x),queryFn:async()=>{const b=await ce(`/api/queue/patient/${x}/latest`);if(!b.ok)throw new Error("Failed to fetch latest queue status");const w=await b.json();return w!=null&&w._id&&u.prefetchQuery({queryKey:Vt.queue.entry(w._id),queryFn:async()=>{const _=await ce(`/api/queue/doctor/complaint/${w._id}`);if(!_.ok)throw new Error("Failed to fetch complaint record");return _.json()},staleTime:1*60*1e3}),w},staleTime:5e3}))};return i.jsxs("div",{className:fr.container,children:[!t&&i.jsx("div",{className:fr.mobileDashboardGrid,children:VIe.map((x,b)=>i.jsxs("div",{className:fr.mobileDashboardItem,onClick:()=>l(x.path),children:[i.jsx("div",{className:fr.mobileDashboardIcon,children:x.icon}),i.jsx("span",{className:fr.mobileDashboardLabel,children:x.label})]},b))}),i.jsxs("div",{className:fr.visualContainer,children:[i.jsx("h1",{className:fr.brandTitle,children:"Newtons Ai"}),!t&&i.jsxs("div",{className:fr.searchBar,onClick:()=>e(),children:[i.jsx("div",{className:fr.searchIconWrapper,children:i.jsx(Un,{className:fr.searchIcon})}),i.jsx("span",{className:fr.placeholderText,children:"Search or Ask AI..."}),i.jsx("div",{className:fr.micButtonWrapper,onClick:c,children:i.jsx(rN,{className:fr.micIcon})}),i.jsxs("div",{className:fr.shortcutHint,children:[i.jsx("span",{className:fr.key,children:"Ctrl"}),i.jsx("span",{className:fr.plus,children:"+"}),i.jsx("span",{className:fr.key,children:"K"})]})]})]}),!t&&(p||y.length>0)&&i.jsxs("div",{className:fr.newlyRegisteredSection,children:[i.jsx("div",{className:fr.newlyRegisteredLabel,children:"Newly Registered"}),i.jsx("div",{className:fr.recentList,children:p?[1,2,3,4,5].map(x=>i.jsxs("div",{className:fr.recentPatientPill,style:{cursor:"default"},children:[i.jsxs("div",{className:fr.recentNameContainer,children:[i.jsx(ee,{width:100,height:18}),i.jsx(ee,{width:30,height:20})]}),i.jsx("div",{className:fr.recentInfo,children:i.jsx(ee,{width:80,height:14})})]},x)):y.map(x=>i.jsxs("div",{className:fr.recentPatientPill,onClick:()=>l(`/dashboard/edit-complaint/patient/${x.id}`),onMouseEnter:()=>x.id&&v(x.id),children:[i.jsxs("div",{className:fr.recentNameContainer,children:[i.jsx("span",{className:fr.recentName,children:x.name||"New Patient"}),i.jsxs("span",{className:fr.recentToken,children:["#",x.token]})]}),i.jsxs("div",{className:fr.recentInfo,children:[x.age?`${x.age} yrs`:"",x.age&&x.gender?" / ":"",x.gender||""]})]},x.id))})]}),r&&hW&&i.jsx(CN,{options:HIe,children:i.jsx(TN,{onClose:()=>a(!1),patientData:null,tokenNumber:null,onAiSummaryChange:o})})]})},fW=({queueList:e,onPatientClick:t})=>{const a=Array.from({length:13},(o,l)=>8+l),s={};return a.forEach(o=>s[o]=[]),e.forEach(o=>{const c=new Date(o.createdAt).getHours();c>=8&&c<=20&&s[c].push(o)}),i.jsx("div",{className:"appointment-timeline-container",children:a.map(o=>i.jsxs("div",{className:"timeline-hour-row",children:[i.jsx("div",{className:"timeline-time-label",children:i.jsxs("span",{className:"time-text",children:[o>12?o-12:o," ",o>=12?"PM":"AM"]})}),i.jsxs("div",{className:"timeline-track",children:[s[o].length===0?i.jsx("div",{className:"timeline-empty-slot"}):i.jsx("div",{className:"timeline-appointments-group",children:s[o].map(l=>{var c,u;return i.jsxs("div",{className:`timeline-card status-${l.status}`,onClick:()=>t(l),children:[i.jsxs("div",{className:"timeline-card-header",children:[i.jsx("span",{className:"patient-name-card",children:(c=l.Patient)==null?void 0:c.name}),i.jsxs("span",{className:"token-badge",children:["#",l.token_no]})]}),i.jsxs("div",{className:"timeline-card-details",children:[((u=l.Patient)==null?void 0:u.phone)&&i.jsxs("div",{className:"detail-row",children:[i.jsx(ig,{size:12}),i.jsx("span",{children:l.Patient.phone})]}),i.jsxs("div",{className:"detail-row",children:[i.jsx(Fb,{size:12}),i.jsx("span",{children:new Date(l.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),i.jsx("div",{className:`status-line-indicator status-color-${l.status}`})]},l.id)})}),i.jsx("div",{className:"timeline-grid-line"})]})]},o))})},pW=({isOpen:e,onClose:t,onAppointmentBooked:n})=>{const[r,a]=j.useState(""),[s,o]=j.useState([]),[l,c]=j.useState(null),[u,f]=j.useState(""),[p,y]=j.useState(!1),[v,x]=j.useState(!1),[b,w]=j.useState(null);j.useEffect(()=>{e&&(a(""),o([]),c(null),f(""),w(null))},[e]);const _=ye.useMemo(()=>pd(async P=>{if(P.length<2){o([]),x(!1);return}x(!0);try{const I=new URLSearchParams({search:encodeURIComponent(P),page:"1",limit:"10"}),F=await ce(`/api/patients?${I.toString()}`);if(F.ok){const $=await F.json();o($.patients||[])}}catch(I){console.error("Error searching patients:",I)}finally{x(!1)}},300),[]),T=P=>{const I=P.target.value;a(I),l&&c(null),I.length>=2?(x(!0),_(I)):o([])},C=P=>{c(P),a(P.name),o([])},O=async()=>{if(r.trim()){y(!0);try{const P=await ce("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.trim(),age:null,gender:null,phone:null})});if(!P.ok){const $=await P.json();throw new Error($.message||"Failed to create patient")}const I=await P.json(),F={id:I.id,name:I.name,phone:I.phone,age:I.age,gender:I.gender,token:I.token};C(F)}catch(P){console.error("Failed to create patient:",P),w(P.message||"Failed to create patient")}finally{y(!1)}}},E=async()=>{if(!l){w("Please select a patient.");return}if(!u){w("Please select a date and time.");return}y(!0),w(null);try{if(!(await ce("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id,date:new Date(u).toISOString(),description:"Appointment"})})).ok)throw new Error("Failed to book appointment");n(),t()}catch(P){console.error("Error booking appointment:",P),w(P.message||"Failed to book appointment.")}finally{y(!1)}};return e?i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content appointment-modal",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:"Book Appointment"}),i.jsx("button",{onClick:t,className:"close-button",children:i.jsx(zt,{size:20})})]}),i.jsxs("div",{className:"modal-body",children:[b&&i.jsx("div",{className:"error-message",children:b}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Search Patient"}),i.jsxs("div",{className:"search-input-wrapper",children:[i.jsx(Un,{className:"search-icon-input",size:18}),i.jsx("input",{type:"text",placeholder:"Search by name, phone, or ID...",value:r,onChange:T,className:"modal-input"}),v&&i.jsx("div",{className:"spinner-sm"})]}),(s.length>0||r.length>0&&!v)&&!l&&i.jsxs("div",{className:"search-results-dropdown",children:[r.trim().length>0&&!v&&i.jsx("div",{className:"search-result-item create-patient-item",onClick:O,children:i.jsxs("div",{className:"patient-info",style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx("div",{className:"create-icon-wrapper",children:i.jsx(aN,{size:16,color:"white"})}),i.jsxs("div",{children:[i.jsxs("span",{className:"name",style:{color:"#7c3aed"},children:['Create "',r,'"']}),i.jsx("span",{className:"details",style:{color:"#7c3aed"},children:"Add new patient"})]})]})}),s.map(P=>i.jsxs("div",{className:"search-result-item",onClick:()=>C(P),children:[i.jsxs("div",{className:"patient-info",children:[i.jsx("span",{className:"name",children:P.name}),i.jsxs("span",{className:"details",children:[P.age?`${P.age} yrs`:""," ",P.gender?`/ ${P.gender}`:""]})]}),P.phone&&i.jsx("span",{className:"phone",children:P.phone})]},P.id))]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Appointment Date & Time"}),i.jsx("div",{className:"date-input-wrapper",children:i.jsx("input",{type:"datetime-local",className:"modal-input",value:u,onChange:P=>f(P.target.value)})})]}),l&&i.jsxs("div",{className:"selected-patient-preview",children:[i.jsx("div",{className:"preview-label",children:"Selected Patient:"}),i.jsxs("div",{className:"preview-card",children:[i.jsx(mr,{size:20}),i.jsxs("div",{children:[i.jsx("strong",{children:l.name}),i.jsxs("div",{children:[l.age?`${l.age} yrs`:"-"," / ",l.gender||"-"]})]})]})]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{onClick:t,className:"cancel-button",children:"Cancel"}),i.jsx("button",{onClick:E,className:"submit-button",disabled:p||!l||!u,children:p?"Booking...":"Book Appointment"})]})]})}):null},WIe=async e=>{const t=e?`/api/queue?date=${e}`:"/api/queue",n=await ce(t);if(!n.ok)throw new Error("Failed to fetch queue");return n.json()};function mW(e){return JS({queryKey:["queue",e||"today"],queryFn:()=>WIe(e),staleTime:5e3,refetchInterval:7e3,placeholderData:t=>t,refetchOnMount:"always",refetchOnWindowFocus:!0})}function KIe(){const e=ns();return nY({mutationFn:async({queueId:t,status:n,doctorId:r})=>{const a=await ce(`/api/queue/${t}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,doctorId:r})});if(!a.ok)throw new Error("Failed to update queue status");return a.json()},onSuccess:(t,{queueId:n})=>{e.invalidateQueries({queryKey:Vt.queue.today}),e.invalidateQueries({queryKey:Vt.queue.entry(n)})}})}const aw=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},YIe=e=>{if(!e)return"Unknown Date";try{return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},uk=({title:e,icon:t,items:n,renderItemContent:r,isLoading:a,noDataText:s})=>{const o=j.useMemo(()=>{const l={};n.forEach(u=>{if(isNaN(u.date.getTime())){l["Unknown Date"]||(l["Unknown Date"]=[]),l["Unknown Date"].push(u);return}const f=YIe(u.originalDateString);l[f]||(l[f]=[]),l[f].push(u)});const c=Object.keys(l);return c.sort((u,f)=>{if(u==="Unknown Date")return 1;if(f==="Unknown Date")return-1;try{const p=x=>{const b=x.split(" ");if(b.length===3){const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(b[1]);if(_!==-1)return new Date(parseInt(b[2]),_,parseInt(b[0]))}return new Date(x)},y=p(u),v=p(f);if(!isNaN(y.getTime())&&!isNaN(v.getTime()))return v.getTime()-y.getTime()}catch(p){console.error("Error parsing date for sorting:",p)}return f.localeCompare(u)}),c.map(u=>({date:u,items:l[u]}))},[n]);return i.jsxs("div",{className:"dcp-group-card",children:[i.jsxs("h4",{className:"dcp-group-header",children:[t&&i.jsx(t,{size:14,className:"dcp-group-icon"}),e]}),i.jsxs("div",{className:"dcp-group-content",children:[a&&i.jsx("div",{className:"dcp-history-items",children:[1,2].map(l=>i.jsxs("div",{className:"dcp-history-item",style:{border:"none"},children:[i.jsx(ee,{width:"60%",height:16,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"30%",height:12})]},l))}),!a&&n.length===0&&i.jsx("p",{className:"dcp-history-empty",children:s}),!a&&n.length>0&&i.jsx("div",{children:o.map(({date:l,items:c})=>i.jsxs("div",{className:"dcp-date-group",children:[i.jsx("h5",{className:"dcp-date-label",children:l}),i.jsx("div",{className:"dcp-date-items",children:c.map((u,f)=>i.jsx("div",{className:"dcp-history-item",children:r(u)},`${u.type}-${u.originalDateString}-${f}`))})]},l))})]})]})},sw=()=>{var oe,re;const{openCommandBar:e}=Pc(),[t,n]=j.useState(new Date),[r,a]=j.useState("list"),[s,o]=j.useState(!1),l=t.toISOString().split("T")[0],{data:c,isLoading:u,refetch:f,isError:p}=mW(l),y=(c==null?void 0:c.list)||[],v=(c==null?void 0:c.summary)||{currentPatient:null,nextPatient:null,waitingCount:0},x=u,[b,w]=j.useState(!1),[_,T]=j.useState(null),C=()=>{f()},[O,E]=j.useState(null),[P,I]=j.useState(null),[F,$]=j.useState(null),[z,L]=j.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[H,V]=j.useState(!1),[ne,Z]=j.useState(null),{patientId:q}=Ai(),K=Mt(),se=ns(),G=ae=>{ae&&(se.prefetchQuery({queryKey:Vt.patients.context(ae),queryFn:async()=>{const X=await ce(`/api/patients/${ae}/context`);if(!X.ok)throw new Error("Failed to fetch patient context");return X.json()},staleTime:5*60*1e3}),se.prefetchQuery({queryKey:Vt.patientDebts.balance(ae),queryFn:async()=>{const X=await ce(`/api/patient-debts/${ae}/balance`);return X.ok?X.json():{netDebt:0}},staleTime:1*60*1e3}),se.prefetchQuery({queryKey:Vt.queue.latest(ae),queryFn:async()=>{const X=await ce(`/api/queue/patient/${ae}/latest`);if(!X.ok)throw new Error("Failed to fetch latest queue status");const W=await X.json();return W!=null&&W._id&&se.prefetchQuery({queryKey:Vt.queue.entry(W._id),queryFn:async()=>{const ie=await ce(`/api/queue/doctor/complaint/${W._id}`);if(!ie.ok)throw new Error("Failed to fetch complaint record");return ie.json()},staleTime:1*60*1e3}),W},staleTime:5e3}),se.prefetchQuery({queryKey:Vt.dental.records(ae),queryFn:async()=>{const X=await ce(`/api/dental/patient/${ae}`);if(!X.ok)throw new Error("Failed to fetch dental records");return X.json()},staleTime:5*60*1e3}))},B=j.useCallback(async ae=>{$(null),E(null),I(null),V(!0),Z(null),L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const X=await ce(`/api/patients/${ae}`);if(!X.ok)throw new Error(`Patient details fetch failed (${X.status})`);const W=await X.json();E(W);const ie=await ce(`/api/queue/patient/${ae}/latest`);if(!ie.ok&&ie.status!==404)throw new Error(`Queue entry fetch failed (${ie.status})`);if(ie.ok){const pe=await ie.json();I(pe)}await fe(ae)}catch(X){console.error("Error fetching specific patient data:",X),$(X.message||"Failed to load patient data."),Z(X.message||"Failed to load patient history.")}finally{V(!1)}},[]),fe=j.useCallback(async ae=>{V(!0),Z(null);try{const[X,W,ie,pe]=await Promise.all([ce(`/api/queue/patient/${ae}/complaints`),ce(`/api/lab/patient/${ae}`),ce(`/api/lab/orders/patient/${ae}?status=pending`),ce(`/api/pharmacy-orders/patient/${ae}`)]),le=X.ok?await X.json():[],je=W.ok?await W.json():[],Ge=ie.ok?await ie.json():[],et=pe.ok?await pe.json():[];L({pastComplaints:le||[],labReports:je||[],pendingLabOrders:Ge||[],pharmacyOrders:et||[]})}catch(X){console.error("Error fetching patient history:",X),Z(X.message||"Failed to load patient history."),L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{V(!1)}},[]);j.useEffect(()=>{q?B(q):(E(null),I(null),f())},[q,B,f]),j.useEffect(()=>{var ae;if(!q&&((ae=v.currentPatient)==null?void 0:ae.status)==="consulting"){const X=v.currentPatient._id;X&&K(`/dashboard/edit-complaint/${X}`)}},[q,v.currentPatient,K]),j.useEffect(()=>{var ae;!q&&((ae=v.currentPatient)!=null&&ae.patientId)?fe(v.currentPatient.patientId):!q&&!v.currentPatient&&(L({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),V(!1),Z(null))},[q,(oe=v.currentPatient)==null?void 0:oe.patientId,fe]);const me=((re=v.currentPatient)==null?void 0:re.patientId)||(q?parseInt(q,10):null),Y=j.useMemo(()=>{if(!me||!z.pastComplaints)return[];const ae=z.pastComplaints.map(X=>({date:new Date(X.createdAt),type:"Complaint",data:X,originalDateString:X.createdAt})).filter(X=>!isNaN(X.date.getTime()));return ae.sort((X,W)=>W.date.getTime()-X.date.getTime()),ae},[me,z.pastComplaints]),xe=j.useMemo(()=>{if(!me)return[];const ae=[];return(z.pendingLabOrders??[]).forEach(X=>{const W=new Date(X.createdAt);isNaN(W.getTime())||ae.push({date:W,type:"Lab Order (Pending)",data:X,originalDateString:X.createdAt})}),(z.labReports??[]).forEach(X=>{const W=X.reportCreatedAt?new Date(X.reportCreatedAt):null;W&&!isNaN(W.getTime())&&ae.push({date:W,type:"Lab Report",data:X,originalDateString:X.reportCreatedAt})}),ae.sort((X,W)=>W.date.getTime()-X.date.getTime()),ae},[me,z.pendingLabOrders,z.labReports]),Ie=j.useMemo(()=>{if(!me||!z.pharmacyOrders)return[];const ae=z.pharmacyOrders.map(X=>({date:new Date(X.date),type:"Pharmacy Order",data:X,originalDateString:X.date})).filter(X=>!isNaN(X.date.getTime()));return ae.sort((X,W)=>W.date.getTime()-X.date.getTime()),ae},[me,z.pharmacyOrders]),Ne=async()=>{w(!0),T(null);try{await ce("/api/queue/doctor/next",{method:"POST"}),await f()}catch(ae){console.error("Error calling next patient:",ae),T(ae.message||"Failed to call next patient.")}finally{w(!1)}},ke=ae=>{switch(ae){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return ae}},[de,Q]=j.useState("info");return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"dcp-container",children:[i.jsxs("div",{className:"dcp-header-row",children:[i.jsx("button",{onClick:()=>K(-1),className:"dcp-back-btn",children:i.jsx(rn,{size:20})}),i.jsx("h1",{className:"dcp-title",children:"Doctor Consultation Panel"})]}),q?i.jsxs(i.Fragment,{children:[F&&i.jsx("div",{className:"dcp-error",children:F}),O&&i.jsx("div",{className:"dcp-card dcp-card-violet",children:i.jsxs("div",{className:"dcp-card-content",children:[i.jsxs("div",{className:"dcp-mobile-tabs",children:[i.jsx("button",{className:`dcp-mobile-tab ${de==="info"?"active":""}`,onClick:()=>Q("info"),children:"Patient Record"}),i.jsx("button",{className:`dcp-mobile-tab ${de==="history"?"active":""}`,onClick:()=>Q("history"),children:"History"})]}),i.jsxs("div",{className:"dcp-flex-split",children:[i.jsxs("div",{className:`dcp-flex-half dcp-tab-info ${de==="info"?"":"hidden"}`,children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[i.jsx("div",{className:"dcp-section-header dcp-section-header-violet",children:"Patient Record"}),i.jsxs("button",{onClick:()=>K("/dashboard/doctor"),className:"dcp-btn dcp-btn-outline",style:{padding:"4px 10px",fontSize:"0.75rem"},children:[i.jsx(rn,{size:12})," Back to Queue"]})]}),i.jsx("div",{className:"dcp-patient-name dcp-patient-name-gradient",children:O.name}),i.jsxs("div",{className:"dcp-patient-meta",style:{marginBottom:"12px"},children:[i.jsxs("span",{className:"dcp-patient-badge",children:[O.age||"N/A"," Yrs"]}),i.jsx("span",{className:"dcp-patient-badge",children:O.gender||"N/A"})]}),i.jsxs("div",{className:"dcp-activity-box",children:[i.jsx("div",{className:"dcp-activity-label",children:"Latest Activity"}),P?i.jsxs("div",{children:[i.jsxs("div",{className:"dcp-activity-content",children:[i.jsx("strong",{children:"Complaint:"})," ",P.complaint||i.jsx("span",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"None"})]}),i.jsxs("div",{style:{marginTop:"8px"},children:[i.jsx("span",{className:`dcp-status ${P.status==="consulting"?"dcp-status-consulting":P.status==="seen"?"dcp-status-seen":P.status==="waiting"?"dcp-status-waiting":""}`,children:ke(P.status)}),P.status==="consulting"&&P._id&&i.jsx("button",{onClick:()=>K(`/dashboard/edit-complaint/${P._id}`),onMouseEnter:()=>G(String(O.id)),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px",padding:"4px 12px"},children:"Resume"})]}),_&&i.jsx("div",{className:"dcp-error-card",style:{marginBottom:"16px"},children:_}),P.case_summary&&i.jsxs("div",{className:"dcp-ai-summary",style:{marginTop:"10px"},children:[i.jsx("div",{className:"dcp-ai-label",children:" AI Summary"}),i.jsx("p",{className:"dcp-ai-text",children:P.case_summary})]})]}):i.jsx("p",{style:{color:"var(--dcp-text-muted)",fontStyle:"italic"},children:"No queue entry found for this patient today."})]})]}),i.jsxs("div",{className:`dcp-flex-half dcp-history-section dcp-tab-history ${de==="history"?"":"hidden"} dcp-desktop-only`,children:[i.jsxs("div",{className:"dcp-history-header",children:[i.jsx("span",{className:"dcp-history-title",children:"Patient History"}),H&&i.jsx(ee,{width:60,height:14})]}),ne&&i.jsx("div",{className:"dcp-error",children:ne}),i.jsxs("div",{className:"dcp-history-scroll dcp-scrollbar",children:[i.jsx(uk,{title:"Past Complaints",icon:aa,items:Y,isLoading:H,noDataText:"No past complaints.",renderItemContent:ae=>i.jsxs("div",{children:[ae.data.complaint,i.jsx("div",{className:"dcp-history-timestamp",children:aw(ae.originalDateString)})]})}),i.jsx(uk,{title:"Lab Reports",icon:Za,items:xe,isLoading:H,noDataText:"No lab history.",renderItemContent:ae=>ae.type==="Lab Order (Pending)"?i.jsxs("div",{children:[i.jsx("span",{className:"dcp-type-pending",children:"Pending Order"}),i.jsx("div",{children:ae.data.tests.map(X=>X.name).join(", ")}),i.jsx("div",{className:"dcp-history-timestamp",children:aw(ae.originalDateString)})]}):i.jsxs("div",{children:[i.jsxs("span",{className:"dcp-type-report",children:["Report: ",ae.data.testName]}),i.jsxs("div",{style:{fontStyle:"italic"},children:['"',ae.data.reportFindings.substring(0,50),ae.data.reportFindings.length>50?"...":"",'"']}),i.jsx("div",{className:"dcp-history-timestamp",children:aw(ae.originalDateString)})]})}),i.jsx(uk,{title:"Medications",icon:jf,items:Ie,isLoading:H,noDataText:"No pharmacy history.",renderItemContent:ae=>i.jsxs("div",{children:[ae.data.medications.map(X=>`${X.name} (${X.pack_quantity||0}p ${X.loose_quantity||0}l)`).join(", "),i.jsxs("div",{className:"dcp-history-timestamp",children:[aw(ae.originalDateString),"  ",i.jsx("span",{style:{textTransform:"capitalize"},children:ae.data.status})]})]})}),Y.length===0&&xe.length===0&&Ie.length===0&&!H&&i.jsx("div",{className:"dcp-empty-state",children:"No history records found."})]})]})]})]})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{marginBottom:"16px"},children:[p&&i.jsx("div",{className:"dcp-error",children:"Failed to fetch queue data."}),x&&!v.currentPatient?i.jsxs("div",{className:"dcp-card",style:{padding:"2rem"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx(ee,{width:"40%",height:32}),i.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})]}),i.jsxs("div",{style:{marginTop:"1rem"},children:[i.jsx(ee,{width:"60%",height:24}),i.jsx(ee,{width:"40%",height:16,style:{marginTop:"8px"}})]}),i.jsx("div",{style:{marginTop:"2rem"},children:i.jsx(ee,{width:"100%",height:80,style:{borderRadius:"12px"}})}),i.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[i.jsx(ee,{width:180,height:40}),i.jsx(ee,{width:120,height:40})]})]}):i.jsx("div",{className:"dcp-empty-state",children:v.currentPatient?"Redirecting to consultation...":"No patient currently being seen. Use 'Call Next' or search for a patient record."})]}),i.jsxs("div",{className:"dcp-scheduler-section",children:[i.jsx("div",{className:"queue-header",children:i.jsx("div",{className:"queue-actions",children:i.jsxs("div",{className:"controls-row",children:[i.jsxs("div",{className:"view-toggle-container",children:[i.jsx("button",{className:`view-toggle-btn ${r==="list"?"active":""}`,onClick:()=>a("list"),title:"List View",children:i.jsx(Mq,{size:16})}),i.jsx("button",{className:`view-toggle-btn ${r==="timeline"?"active":""}`,onClick:()=>a("timeline"),title:"Timeline View",children:i.jsx(jD,{size:16})})]}),i.jsxs("div",{className:"date-picker-container",children:[i.jsx(pi,{size:16,className:"text-gray-500"}),i.jsx("input",{type:"date",className:"date-input",value:t.toISOString().split("T")[0],onChange:ae=>n(new Date(ae.target.value))})]}),i.jsxs("button",{onClick:()=>o(!0),className:"appointment-button",children:[i.jsx(Fb,{size:16}),i.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),i.jsx("span",{className:"sm:hidden",children:"Book"})]}),i.jsx("button",{onClick:()=>e(),className:"dcp-btn dcp-btn-primary",style:{marginLeft:"10px"},children:"Search Patient"})]})})}),i.jsx(pW,{isOpen:s,onClose:()=>{o(!1),f()},onAppointmentBooked:C}),u&&y.length===0?i.jsx("div",{style:{padding:"20px"},children:i.jsx(ee,{width:"100%",height:200})}):r==="timeline"?i.jsx(fW,{queueList:y,onPatientClick:ae=>K(`/dashboard/edit-complaint/${ae.id}`)}):i.jsx("div",{className:"queue-table-wrapper",children:i.jsxs("table",{className:"queue-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Token"}),i.jsx("th",{children:"Patient"}),i.jsx("th",{className:"hidden-mobile",children:"Details"}),i.jsx("th",{children:"Status"}),i.jsx("th",{children:"Action"})]})}),i.jsx("tbody",{children:y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"20px"},children:"No appointments for this date."})}):y.map(ae=>{var X,W,ie;return i.jsxs("tr",{onClick:()=>K(`/dashboard/edit-complaint/${ae.id}`),className:"queue-row-clickable",children:[i.jsxs("td",{children:["#",ae.token_no]}),i.jsx("td",{children:i.jsx("div",{className:"patient-info",children:i.jsx("span",{className:"name",children:(X=ae.Patient)==null?void 0:X.name})})}),i.jsxs("td",{className:"hidden-mobile",children:[(W=ae.Patient)==null?void 0:W.age,"y, ",(ie=ae.Patient)==null?void 0:ie.gender,"  ",ae.complaint||"-"]}),i.jsx("td",{children:i.jsx("span",{className:`dcp-status ${ae.status==="waiting"?"dcp-status-waiting":ae.status==="consulting"?"dcp-status-consulting":ae.status==="seen"?"dcp-status-seen":""}`,children:ke(ae.status)})}),i.jsx("td",{children:i.jsx("button",{className:"dcp-btn dcp-btn-outline",style:{padding:"4px 8px",fontSize:"0.75rem"},children:"View"})})]},ae.id)})})]})})]}),i.jsxs("div",{className:"dcp-bottom-bar",children:[i.jsx("button",{onClick:Ne,disabled:b||x||!v.nextPatient||!!v.currentPatient,className:"dcp-btn dcp-btn-teal",children:"Call Next Patient"}),i.jsxs("div",{className:"dcp-waiting-count",children:[v.waitingCount," patients waiting"]})]})]})]})})},QIe="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",XIe={apiKey:QIe},_x=()=>{const[e,t]=j.useState(""),[n,r]=j.useState([]),[a,s]=j.useState(!1),[o,l]=j.useState(null),[c,u]=j.useState(!1),[f,p]=j.useState(null),y=j.useRef(null),[v,x]=j.useState(!1),[b,w]=j.useState(!1),[_,T]=j.useState(null),[C,O]=j.useState(null),[E,P]=j.useState([]),[I,F]=j.useState(!0),[$,z]=j.useState(!1);Hc();const L=Mt(),H=$r(),V=HD({settings:{},staffList:[]}),ne=ns(),Z=re=>{re&&(ne.prefetchQuery({queryKey:Vt.patients.context(re),queryFn:async()=>{const ae=await ce(`/api/patients/${re}/context`);if(!ae.ok)throw new Error("Failed to fetch patient context");return ae.json()},staleTime:5*60*1e3}),ne.prefetchQuery({queryKey:Vt.patientDebts.balance(re),queryFn:async()=>{const ae=await ce(`/api/patient-debts/${re}/balance`);return ae.ok?ae.json():{netDebt:0}},staleTime:1*60*1e3}),ne.prefetchQuery({queryKey:Vt.queue.latest(re),queryFn:async()=>{const ae=await ce(`/api/queue/patient/${re}/latest`);if(!ae.ok)throw new Error("Failed to fetch latest queue status");const X=await ae.json();return X!=null&&X._id&&ne.prefetchQuery({queryKey:Vt.queue.entry(X._id),queryFn:async()=>{const W=await ce(`/api/queue/doctor/complaint/${X._id}`);if(!W.ok)throw new Error("Failed to fetch complaint record");return W.json()},staleTime:1*60*1e3}),X},staleTime:5e3}),ne.prefetchQuery({queryKey:Vt.dental.records(re),queryFn:async()=>{const ae=await ce(`/api/dental/patient/${re}`);if(!ae.ok)throw new Error("Failed to fetch dental records");return ae.json()},staleTime:5*60*1e3}))},{selectedImage:q,handleImageSelect:K,clearImage:se}=V,G=j.useRef(null),B=re=>{var X;const ae=(X=re.target.files)==null?void 0:X[0];ae&&K(ae)};j.useEffect(()=>{V.chatHistory.length>0&&$&&V.isProcessing},[V.chatHistory.length]),j.useEffect(()=>{(async()=>{F(!0);try{const ae=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),X=await ce(`/api/patients?${ae.toString()}`);if(X.ok){const W=await X.json();P(W.patients||[])}}catch(ae){console.error("Error fetching recent patients:",ae)}finally{F(!1)}})()},[]),j.useEffect(()=>{V.setChatQuery(e)},[e]);const fe=j.useCallback(async re=>{if(!(re||e).trim()){p("Please enter complaint details.");return}u(!0),p(null),re&&re!==V.chatQuery&&V.setChatQuery(re);try{V.handleSendMessage(),t("")}catch(X){console.error("AI Error:",X),p("AI failed to process. Try again."),u(!1)}},[e,V]);j.useEffect(()=>{!V.isProcessing&&c&&u(!1)},[V.isProcessing,c]),j.useEffect(()=>{const re=y.current;re&&(re.style.height="auto",re.style.height=`${re.scrollHeight}px`);const X=new URLSearchParams(H.search).get("caseDetails");if(X){const W=decodeURIComponent(X);W!==e&&(t(W),x(!0))}},[H.search,e]),j.useEffect(()=>{v&&e.trim()&&(L(H.pathname,{replace:!0}),fe(e),x(!1))},[v,e,fe,L,H.pathname]),j.useEffect(()=>{const re=y.current;re&&(re.style.height="auto",re.style.height=`${re.scrollHeight}px`)},[e]),j.useEffect(()=>{_&&(t(_),w(!1),V.setChatQuery(_),setTimeout(()=>V.handleSendMessage(),0),T(null))},[_,V]);const me=()=>{O({id:null,token:null,name:"New Case",age:null,gender:null}),w(!0)},Y=j.useMemo(()=>pd(async re=>{const ae=re.trim(),X=/^\d+$/.test(ae),W=ae.split(/\s+/).length;if(ae.length<2||X&&ae.length>10||!X&&W>2){r([]),s(!1),l(null);return}s(!0),l(null);try{const ie=new URLSearchParams({search:encodeURIComponent(re),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),pe=await ce(`/api/patients?${ie.toString()}`);if(!pe.ok){const je=await pe.text();throw new Error(`API Error (${pe.status}): ${je||pe.statusText}`)}const le=await pe.json();r(le.patients)}catch(ie){console.error("Error searching patients:",ie),l(ie.message||"Failed to search patients."),r([])}finally{s(!1)}},300),[]),xe=re=>{const ae=re.target.value;t(ae);const X=ae.trim(),W=/^\d+$/.test(X),ie=X.split(/\s+/).length;X.length>=2&&!(W&&X.length>10||!W&&ie>2)?s(!0):(s(!1),r([])),Y(ae)},Ie=re=>{re.key==="Enter"&&!re.shiftKey&&(re.preventDefault(),e.trim()&&!a&&oe())},Ne=async re=>{re&&re.id&&L(`/dashboard/edit-complaint/patient/${re.id}`)},ke=[{icon:"",title:"Example: Fever & Cold",description:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough",text:"Rajesh Kumar, 35 year old male, fever since 2 days, cold, body pain, no cough"},{icon:"",title:"Example: Stomach Ache",description:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days",text:"Priya Sharma, 28 year old female, stomach pain after eating, acidity, bloating since 3 days"}],de=re=>{t(re),setTimeout(()=>{V.handleSendMessage(re),t(""),r([])},50)},Q=()=>{t(""),r([]),V.refreshChat()},oe=()=>{!e.trim()&&!q||(Y.cancel(),V.handleSendMessage(e),t(""),r([]))};return i.jsxs("div",{className:"patient-search-page-container",children:[i.jsxs("div",{className:"patient-search-header",children:[i.jsx("button",{onClick:()=>L("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"}),i.jsx("button",{onClick:()=>L(-1),className:"patient-search-button patient-search-button-back",children:i.jsx(rn,{size:16})})]}),i.jsxs("div",{className:"patient-search-content-box",children:[o&&i.jsx("p",{className:"patient-search-error",children:o}),f&&i.jsx("p",{className:"patient-search-error",children:f}),I?i.jsxs("div",{className:"newly-registered-section",children:[i.jsx("div",{className:"recent-list",children:[1,2,3,4,5].map(re=>i.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[i.jsxs("div",{className:"recent-name-container",children:[i.jsx(ee,{width:100,height:18}),i.jsx(ee,{width:30,height:14})]}),i.jsx("div",{className:"recent-info",children:i.jsx(ee,{width:60,height:12})})]},re))}),i.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}):E.length>0&&i.jsxs("div",{className:"newly-registered-section",children:[i.jsx("div",{className:"recent-list",children:E.map(re=>i.jsxs("div",{className:"recent-patient-pill",onClick:()=>Ne(re),onMouseEnter:()=>re.id&&Z(re.id),children:[i.jsxs("div",{className:"recent-name-container",children:[i.jsx("span",{className:"recent-name",children:re.name||"New Patient"}),i.jsxs("span",{className:"recent-token",children:["#",re.token]})]}),i.jsxs("div",{className:"recent-info",children:[re.age," yrs / ",re.gender]})]},re.id))}),i.jsx("div",{className:"newly-registered-label",children:"NEWLY REGISTERED"})]}),V.chatHistory.length===0&&n.length===0&&i.jsxs("div",{className:"example-cases-section",children:[i.jsxs("div",{className:"example-cases-header",children:[i.jsx("span",{className:"sparkles-icon",children:""}),i.jsx("h3",{children:"Try AI with Example Cases"})]}),i.jsx("div",{className:"example-cards-container",children:ke.map((re,ae)=>i.jsxs("div",{className:"example-case-card",onClick:()=>de(re.text),children:[i.jsx("div",{className:"example-icon",children:re.icon}),i.jsxs("div",{className:"example-content",children:[i.jsx("div",{className:"example-title",children:re.title}),i.jsx("div",{className:"example-description",children:re.description})]})]},ae))})]})]}),V.chatHistory.length>0&&!c&&i.jsxs("div",{className:`ai-chat-overlay ${$?"minimized":""}`,children:[i.jsxs("div",{className:"ai-chat-header",children:[i.jsx("span",{children:"AI Assistant"}),i.jsx("div",{className:"ai-chat-controls",children:i.jsx("button",{className:"icon-btn",onClick:()=>Q(),title:"Clear Chat",children:i.jsx(zt,{size:16})})})]}),i.jsxs("div",{className:"ai-chat-messages",children:[V.chatHistory.map((re,ae)=>i.jsx("div",{className:`chat-bubble ${re.role==="model"?"model":"user"}`,children:re.role==="system"?i.jsx("i",{children:re.text}):re.text},ae)),V.isProcessing&&i.jsx("div",{className:"chat-bubble model",children:"Typing..."})]})]}),n.length>0&&!c&&i.jsxs("div",{className:"patient-search-results-overlay",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"0.5rem"},children:[i.jsx("div",{style:{fontWeight:600,color:"#64748b"},children:"Found Patients"}),i.jsx("button",{onClick:()=>r([]),style:{border:"none",background:"transparent",color:"#94a3b8",cursor:"pointer"},children:i.jsx(zt,{size:14})})]}),n.map(re=>i.jsxs("div",{onClick:()=>Ne(re),onMouseEnter:()=>re.id&&Z(re.id),className:"patient-search-result-item",children:[i.jsxs("div",{className:"patient-search-result-item-name-container",children:[i.jsxs("span",{className:"patient-search-result-item-token",children:["[#",re.token,"]"]}),i.jsx("span",{className:"patient-search-result-item-name",children:re.name})]}),i.jsxs("div",{className:"patient-search-result-item-details",children:[re.age?`${re.age} yrs`:"",re.age&&re.gender?" / ":"",re.gender||"N/A"]})]},re.id))]}),i.jsxs("div",{className:"sticky-chat-input-box",children:[i.jsxs("div",{className:"cmd-input-container",children:[q&&i.jsxs("div",{className:"cmd-image-preview",children:[i.jsx("img",{src:q,alt:"Selected"}),i.jsx("button",{className:"cmd-image-delete",onClick:se,children:i.jsx(zt,{size:12})})]}),i.jsx("textarea",{ref:y,placeholder:"Search (Name/Token/Phone), Ask AI, or Enter New Case...",value:e,onChange:xe,onKeyDown:Ie,className:"cmd-input",disabled:c||V.isProcessing,rows:1}),i.jsxs("div",{className:"cmd-controls-group",children:[i.jsx("input",{type:"file",ref:G,onChange:B,accept:"image/*",style:{display:"none"}}),i.jsx("button",{className:"cmd-icon-btn",onClick:()=>{var re;return(re=G.current)==null?void 0:re.click()},title:"Attach Image",children:i.jsx(SD,{})}),i.jsx("button",{className:"cmd-icon-btn",onClick:me,title:"Voice Input",children:i.jsx(rN,{})}),(e.length>0||q)&&i.jsx("button",{className:"cmd-icon-btn send-btn",onClick:oe,title:"Send",children:i.jsx(iN,{})})]})]}),b&&i.jsx(CN,{options:XIe,children:i.jsx(TN,{onClose:()=>w(!1),patientData:C,tokenNumber:null,onAiSummaryChange:T})})]})]})},hI=()=>{const[e,t]=j.useState(""),[n,r]=j.useState([]),[a,s]=j.useState(!1),[o,l]=j.useState(!1),c=Mt(),u=j.useRef(null);j.useEffect(()=>{const C=O=>{u.current&&!u.current.contains(O.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const f=j.useCallback(l7.debounce(async C=>{if(C.trim().length<2){r([]),s(!1);return}s(!0);try{const O=new URLSearchParams({search:encodeURIComponent(C),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),E=await ce(`/api/patients?${O.toString()}`);if(!E.ok)throw new Error("Failed to fetch patients");const P=await E.json();r(P.patients)}catch{r([])}finally{s(!1)}},400),[]);j.useEffect(()=>(e?(s(!0),f(e)):(r([]),f.cancel(),s(!1)),()=>f.cancel()),[e,f]);const p=C=>{c(`/patient/${encodeURIComponent(C.id)}/admission-billing`)},y=()=>{t(""),r([]),l(!1)},v=C=>C.slice(0,1).toUpperCase(),[x,b]=j.useState(!1),[w,_]=j.useState(!1),T=async()=>{_(!0);try{const C=await ce("/api/patients/discharge-all",{method:"POST"}),O=await C.json();C.ok?(alert(O.message),r([]),t("")):alert(O.message||"Failed to discharge patients")}catch(C){console.error("Bulk discharge error:",C),alert("An error occurred while processing bulk discharge.")}finally{_(!1),b(!1)}};return i.jsxs("div",{className:"ma-container",children:[i.jsxs("div",{className:"ma-header-section",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"ma-title",children:"Manage Admission"}),i.jsx("p",{className:"ma-subtitle",children:"Search for a patient to admit, discharge, or view billing details"})]}),i.jsx("button",{className:"ma-discharge-all-btn",onClick:()=>b(!0),children:"Discharge Everyone"})]}),x&&i.jsx("div",{className:"ma-modal-overlay",children:i.jsxs("div",{className:"ma-modal-content",children:[i.jsx("h3",{children:"Confirm Bulk Discharge"}),i.jsxs("p",{children:["Are you sure you want to discharge ",i.jsx("strong",{children:"ALL"})," currently admitted patients?"]}),i.jsx("div",{className:"ma-modal-warning",children:i.jsx("p",{children:" This will finalize bills for all admitted patients."})}),i.jsxs("div",{className:"ma-modal-actions",children:[i.jsx("button",{className:"ma-modal-cancel",onClick:()=>b(!1),disabled:w,children:"Cancel"}),i.jsx("button",{className:"ma-modal-confirm",onClick:T,disabled:w,children:w?"Processing...":"Yes, Discharge All"})]})]})}),i.jsxs("div",{className:"ma-search-wrapper",ref:u,children:[a?i.jsxs("div",{className:"ma-loading-spinner",children:[i.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #e2e8f0",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),i.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]}):i.jsx(Un,{className:"ma-search-icon",size:20}),i.jsx("input",{type:"text",value:e,onChange:C=>{t(C.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search by Name, Phone, or Token...",className:"ma-search-input",autoFocus:!0}),e&&i.jsx("div",{className:"ma-clear-icon",onClick:y,children:i.jsx(zt,{size:18})}),i.jsxs("div",{className:`ma-results-dropdown ${o&&(n.length>0||a)?"open":""}`,children:[n.map(C=>{const O=C.admission_date&&!C.discharge_date;return i.jsxs("div",{onClick:()=>p(C),className:"ma-result-item",children:[i.jsxs("div",{className:"ma-patient-info",children:[i.jsx("div",{className:"ma-avatar",children:v(C.name)}),i.jsxs("div",{className:"ma-patient-text",children:[i.jsxs("h4",{children:[C.name,i.jsxs("span",{className:"ma-patient-token",children:["#",C.token]})]}),i.jsxs("p",{className:"ma-patient-subtext",children:[C.phone||"No phone","  ",C.age?`${C.age} Y`:"","  ",C.gender||""]})]})]}),i.jsx("div",{className:`ma-badge ${O?"ma-badge-admitted":"ma-badge-discharged"}`,children:O?"ADMITTED":"NOT ADMITTED"})]},C.id)}),e.length>2&&!a&&n.length===0&&i.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:['No patients found matching "',e,'"']})]})]})]})},hz=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"},{value:"boolean",label:"Yes/No"},{value:"computed",label:"Computed (Formula)"}],fI=({isOpen:e,onClose:t,entityType:n,entityLabel:r,currentConfig:a,onConfigUpdated:s})=>{const[o,l]=j.useState([]),[c,u]=j.useState(!1),[f,p]=j.useState(null),[y,v]=j.useState({key:"",label:"",type:"text",required:!1,formula:""});j.useEffect(()=>{e&&(l(a[n]||[]),p(null),v({key:"",label:"",type:"text",required:!1,formula:""}))},[e,a,n]);const x=T=>T.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_"),b=()=>{var C;if(!y.label.trim()){p("Column label is required");return}if(y.type==="computed"&&!((C=y.formula)!=null&&C.trim())){p("Formula is required for computed columns");return}const T=x(y.label);if(o.some(O=>O.key===T)){p("A column with this name already exists");return}l([...o,{...y,key:T}]),v({key:"",label:"",type:"text",required:!1,formula:""}),p(null)},w=T=>{l(o.filter(C=>C.key!==T))},_=async()=>{u(!0),p(null);try{const T={...a,[n]:o};if(!(await ce("/api/clinics/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_columns_config:T})})).ok)throw new Error("Failed to save custom columns");s(T),t()}catch(T){p(T.message||"Failed to save")}finally{u(!1)}};return e?i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content manage-columns-modal",children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h2",{children:["Manage Custom Columns - ",r]}),i.jsx("button",{onClick:t,className:"close-button",title:"Close",children:i.jsx(zt,{size:24})})]}),f&&i.jsx("div",{className:"error-message",children:f}),i.jsxs("div",{className:"columns-list",children:[i.jsx("h4",{children:"Current Custom Columns"}),o.length===0?i.jsx("p",{className:"no-columns",children:"No custom columns defined yet."}):i.jsxs("table",{className:"columns-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Label"}),i.jsx("th",{children:"Type"}),i.jsx("th",{children:"Details"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:o.map(T=>{var C;return i.jsxs("tr",{children:[i.jsx("td",{children:T.label}),i.jsx("td",{children:((C=hz.find(O=>O.value===T.type))==null?void 0:C.label)||T.type}),i.jsx("td",{children:T.type==="computed"?i.jsx("code",{className:"computed-formula",children:T.formula}):T.required?"Required":"Optional"}),i.jsx("td",{children:i.jsx("button",{onClick:()=>w(T.key),className:"remove-column-btn",title:"Remove Column",children:i.jsx(zr,{size:16})})})]},T.key)})})]})]}),i.jsxs("div",{className:"add-column-section",children:[i.jsx("h4",{children:"Add New Column"}),i.jsxs("div",{className:"add-column-form",children:[i.jsx("input",{type:"text",placeholder:"Column Label (e.g., BMI)",value:y.label,onChange:T=>v({...y,label:T.target.value}),className:"column-input"}),i.jsx("select",{value:y.type,onChange:T=>v({...y,type:T.target.value}),className:"column-select",children:hz.map(T=>i.jsx("option",{value:T.value,children:T.label},T.value))}),y.type==="computed"?i.jsx("input",{type:"text",placeholder:"Formula (e.g. weight / (height * height))",value:y.formula||"",onChange:T=>v({...y,formula:T.target.value}),className:"column-input",style:{flex:2}}):i.jsxs("label",{className:"required-checkbox",children:[i.jsx("input",{type:"checkbox",checked:y.required,onChange:T=>v({...y,required:T.target.checked})}),"Required"]}),i.jsxs("button",{onClick:b,className:"add-column-btn",children:[i.jsx(Yr,{size:16})," Add"]})]})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{onClick:t,className:"cancel-btn",disabled:c,children:"Cancel"}),i.jsxs("button",{onClick:_,className:"save-btn",disabled:c,children:[i.jsx(Xs,{size:16})," ",c?"Saving...":"Save Changes"]})]})]})}):null},dk=15,eD=()=>{const e=Mt(),{customColumnsConfig:t,refetch:n}=EN(),[r,a]=j.useState(!1),[s,o]=j.useState([]),[l,c]=j.useState(!0),[u,f]=j.useState(null),[p,y]=j.useState(""),[v,x]=j.useState(1),[b,w]=j.useState(1),[_,T]=j.useState(0),[C,O]=j.useState("created_at"),E=ns(),P=le=>{le&&(E.prefetchQuery({queryKey:Vt.patients.context(le),queryFn:async()=>{const je=await ce(`/api/patients/${le}/context`);if(!je.ok)throw new Error("Failed to fetch patient context");return je.json()},staleTime:5*60*1e3}),E.prefetchQuery({queryKey:Vt.patientDebts.balance(le),queryFn:async()=>{const je=await ce(`/api/patient-debts/${le}/balance`);return je.ok?je.json():{netDebt:0}},staleTime:1*60*1e3}),E.prefetchQuery({queryKey:Vt.queue.latest(le),queryFn:async()=>{const je=await ce(`/api/queue/patient/${le}/latest`);if(!je.ok)throw new Error("Failed to fetch latest queue status");const Ge=await je.json();return Ge!=null&&Ge._id&&E.prefetchQuery({queryKey:Vt.queue.entry(Ge._id),queryFn:async()=>{const et=await ce(`/api/queue/doctor/complaint/${Ge._id}`);if(!et.ok)throw new Error("Failed to fetch complaint record");return et.json()},staleTime:1*60*1e3}),Ge},staleTime:5e3}),E.prefetchQuery({queryKey:Vt.dental.records(le),queryFn:async()=>{const je=await ce(`/api/dental/patient/${le}`);if(!je.ok)throw new Error("Failed to fetch dental records");return je.json()},staleTime:5*60*1e3}))},[I,F]=j.useState("desc"),[$,z]=j.useState(""),[L,H]=j.useState(!1),[V,ne]=j.useState(null),[Z,q]=j.useState([]),[K,se]=j.useState(""),[G,B]=j.useState(!1),[fe,me]=j.useState(null),[Y,xe]=j.useState(!0),[Ie,Ne]=j.useState(null),[ke,de]=j.useState(p);Hc(),j.useEffect(()=>{const le=setTimeout(()=>{de(p),x(1)},500);return()=>{clearTimeout(le)}},[p]);const Q=j.useCallback(async()=>{xe(!0),Ne(null);try{const le=await ce("/api/subscriptions");if(!le.ok){let Ge=`Failed to fetch subscription plans (${le.status})`;try{Ge=(await le.json()).message||Ge}catch{}throw new Error(Ge)}const je=await le.json();q(je)}catch(le){console.error("Error fetching subscription plans:",le),Ne(le.message||"An unknown error occurred while fetching plans."),q([])}finally{xe(!1)}},[]),oe=j.useCallback(async(le,je,Ge,et,ht)=>{c(!0),f(null);try{const _e=new URLSearchParams({page:le.toString(),limit:dk.toString(),sortBy:Ge,sortOrder:et});je&&_e.append("search",je),ht&&_e.append("gender",ht);const Fe=await ce(`/api/patients?${_e.toString()}`);if(!Fe.ok){const Ke=await Fe.json();throw new Error(Ke.message||"Failed to fetch patients")}const Ye=await Fe.json();o(Ye.patients),T(Ye.totalCount),x(Ye.currentPage),w(Ye.totalPages)}catch(_e){console.error("Error fetching patients:",_e),f(`Failed to load patients: ${_e.message}`),o([]),T(0),x(1),w(1)}finally{c(!1)}},[]);j.useEffect(()=>{oe(v,ke,C,I,$),Q()},[v,ke,C,I,$,oe,Q]);const re=le=>{const je=C===le&&I==="asc"?"desc":"asc";O(le),F(je),x(1)},ae=le=>{try{return new Date(le).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},X=()=>{H(!1),ne(null),se(""),me(null),B(!1)},W=async(le,je)=>{o(Ge=>Ge.map(et=>et.id===le?{...et,insurance_type:je}:et));try{const Ge=await ce(`/api/patients/${le}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:je})});if(!Ge.ok){const et=await Ge.json();throw new Error(et.message||"Failed to update insurance type")}}catch(Ge){console.error("Error updating insurance type:",Ge),oe(v,ke,C,I,$)}},ie=(le,je)=>{const Ge=new Date(le),et=je.interval||1;switch(je.period){case"daily":Ge.setDate(le.getDate()+et);break;case"weekly":Ge.setDate(le.getDate()+et*7);break;case"monthly":Ge.setMonth(le.getMonth()+et);break;case"yearly":Ge.setFullYear(le.getFullYear()+et);break;default:console.warn(`Unknown subscription period: ${je.period}. Defaulting to 1 month.`),Ge.setMonth(le.getMonth()+1)}return Ge},pe=async()=>{if(!V||!K){me("Please select a subscription plan.");return}const le=Z.find(je=>je.id===K);if(!le){me("Selected plan details not found.");return}B(!0),me(null);try{const je=new Date,Ge=ie(je,le),et={subscription_plan_id:K,subscription_status:"active",subscription_start_date:je.toISOString(),subscription_end_date:Ge.toISOString(),subscription_payment_method:"manual"},ht=await ce(`/api/patients/${V.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(et)});if(!ht.ok){const _e=await ht.json();throw new Error(_e.message||"Failed to update patient subscription")}X(),oe(v,ke,C,I,$)}catch(je){console.error("Error starting subscription:",je),me(`Failed to start subscription: ${je.message}`)}finally{B(!1)}};return i.jsxs("div",{className:"all-patients-container",children:[i.jsxs("div",{className:"all-patients-header-section",children:[i.jsxs("div",{className:"header-left",children:[i.jsx("button",{onClick:()=>e(-1),className:"back-button",children:i.jsx(rn,{size:16})}),i.jsxs("h1",{className:"all-patients-title",children:[i.jsx(mr,{size:28}),"All Patients"]})]}),i.jsxs("div",{className:"controls-container",children:[!Y&&!Ie&&Z.length>0&&i.jsx("div",{className:"compact-subscriptions",children:Z.map(le=>i.jsxs("span",{className:"plan-chip",title:`${le.name}: ${le.price} / ${le.interval} ${le.period}${le.description?" - "+le.description:""}`,children:[le.name,": ",le.price]},le.id))}),i.jsxs("div",{className:"search-input-wrapper",children:[i.jsx("input",{type:"text",placeholder:"Search...",className:"search-input",value:p,onChange:le=>y(le.target.value)}),i.jsx(Un,{className:"search-input-icon",size:16})]}),i.jsx("div",{className:"filter-dropdown-wrapper",children:i.jsxs("div",{className:"filter-select-container",children:[i.jsx(LJ,{size:14,className:"filter-select-icon"}),i.jsxs("select",{id:"genderFilter",value:$,onChange:le=>z(le.target.value),className:"filter-select",children:[i.jsx("option",{value:"",children:"Gender"}),i.jsx("option",{value:"M",children:"M"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"O",children:"O"})]})]})}),i.jsxs("button",{onClick:()=>a(!0),className:"action-button",title:"Manage Custom Columns",children:[i.jsx(dd,{size:14})," Columns"]})]})]}),u&&i.jsxs("div",{className:"error-alert",role:"alert",children:[i.jsx("strong",{children:"Error: "}),i.jsx("span",{children:u})]}),l?i.jsx("div",{className:"patients-table-wrapper",children:i.jsxs("table",{className:"patients-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(ee,{width:50,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:40,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:60,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:120,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:80,height:20})})]})}),i.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(le=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:40,height:20})}),i.jsx("td",{className:"patient-name",children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(ee,{variant:"circular",width:24,height:24}),i.jsx(ee,{width:120,height:20})]})}),i.jsx("td",{children:i.jsx(ee,{width:30,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:30,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:32})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:32,style:{borderRadius:"4px"}})})]},le))})]})}):s.length===0?i.jsx("div",{className:"empty-state",children:ke?"No patients found matching your search.":"No patients registered yet."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"patients-table-wrapper",children:i.jsxs("table",{className:"patients-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Token"}),i.jsxs("th",{className:"sortable-header",onClick:()=>re("name"),children:["Name",C==="name"&&(I==="asc"?i.jsx(tR,{size:14,className:"sort-icon"}):i.jsx(eR,{size:14,className:"sort-icon"}))]}),i.jsx("th",{children:"Age"}),i.jsx("th",{children:"Gender"}),i.jsx("th",{children:"Phone"}),i.jsx("th",{children:"Address"}),i.jsxs("th",{className:"sortable-header",onClick:()=>re("created_at"),children:["Registered On",C==="created_at"&&(I==="asc"?i.jsx(tR,{size:14,className:"sort-icon"}):i.jsx(eR,{size:14,className:"sort-icon"}))]}),i.jsx("th",{children:"Subscription Status"}),i.jsx("th",{children:"Insurance Type"})," ",i.jsx("th",{children:"Action"})," "]})}),i.jsx("tbody",{children:s.map(le=>i.jsxs(ye.Fragment,{children:[i.jsxs("tr",{className:"patient-row clickable-row",onClick:()=>e(`/dashboard/edit-complaint/patient/${le.id}`),onMouseEnter:()=>P(le.id),children:[i.jsx("td",{children:le.token??"-"}),i.jsx("td",{className:"patient-name",children:le.name}),i.jsx("td",{children:le.age??"-"}),i.jsx("td",{children:le.gender??"-"}),i.jsx("td",{children:le.phone??"-"}),i.jsx("td",{children:le.address??"-"}),i.jsx("td",{children:ae(le.created_at)}),i.jsx("td",{children:i.jsx("span",{className:`status-badge ${le.subscription_status==="active"?"active":le.subscription_status==="cancelled"||le.subscription_status==="expired"?"inactive":"none"}`,children:le.subscription_status??"None"})}),i.jsx("td",{children:i.jsxs("select",{value:le.insurance_type,onClick:je=>je.stopPropagation(),onChange:je=>W(le.id,je.target.value),className:"form-select insurance-select",children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"insurance",children:"Insurance"}),i.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),i.jsx("td",{children:i.jsx("button",{onClick:je=>{je.stopPropagation(),e(`/start-subscription/${le.id}`)},className:"action-button",children:"Start Sub"})})]}),t.patients&&t.patients.length>0&&i.jsx("tr",{children:i.jsx("td",{colSpan:10,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:i.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:t.patients.map(je=>{var Ge;return i.jsxs("div",{style:{fontSize:"0.9em"},children:[i.jsxs("strong",{style:{color:"#555"},children:[je.label,":"]})," ",(Ge=le.custom_fields)!=null&&Ge[je.key]?String(le.custom_fields[je.key]):"-"]},je.key)})})})})]},le.id))})]})}),b>1&&i.jsxs("div",{className:"pagination-controls",children:[i.jsxs("div",{className:"pagination-info",children:["Showing"," ",i.jsx("span",{className:"font-medium",children:(v-1)*dk+1})," ","to"," ",i.jsx("span",{className:"font-medium",children:Math.min(v*dk,_)})," ","of"," ",i.jsx("span",{className:"font-medium",children:_})," results"]}),i.jsxs("div",{className:"pagination-buttons",children:[i.jsxs("button",{onClick:()=>x(le=>Math.max(le-1,1)),disabled:v===1||l,className:"pagination-button",children:[i.jsx(Lb,{size:16,className:"prev-icon"}),"Previous"]}),i.jsxs("span",{className:"pagination-current-page",children:["Page ",i.jsx("span",{className:"font-medium",children:v})," of ",i.jsx("span",{className:"font-medium",children:b})]}),i.jsxs("button",{onClick:()=>x(le=>Math.min(le+1,b)),disabled:v===b||l,className:"pagination-button",children:["Next",i.jsx(md,{size:16,className:"next-icon"})]})]})]})]}),L&&V&&i.jsx("div",{className:"subscription-modal-overlay",children:i.jsxs("div",{className:"subscription-modal-content",children:[i.jsxs("div",{className:"subscription-modal-header",children:[i.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",V.name]}),i.jsx("button",{onClick:X,className:"subscription-modal-close-button",children:i.jsx(zt,{size:24})})]}),fe&&i.jsx("div",{className:"error-alert",role:"alert",children:i.jsx("span",{children:fe})}),i.jsxs("div",{className:"subscription-modal-body",children:[i.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),i.jsxs("select",{id:"subscriptionPlan",value:K,onChange:le=>se(le.target.value),className:"form-select",disabled:G||Y||Ie!==null||Z.length===0,children:[i.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),Y?i.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):Ie?i.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):Z.length>0?Z.map(le=>i.jsxs("option",{value:le.id,children:[le.name," - ",le.price," (",le.interval," ",le.period,le.interval>1?"s":"",")"]},le.id)):i.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),Ie&&i.jsx("p",{className:"error-message",children:Ie}),Z.length===0&&!Y&&!Ie&&i.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),i.jsxs("div",{className:"subscription-modal-footer",children:[i.jsx("button",{onClick:X,disabled:G,className:"subscription-modal-button cancel",children:"Cancel"}),i.jsx("button",{onClick:pe,disabled:!K||G,className:"subscription-modal-button submit",children:G?"Starting...":"Start Subscription"})]})]})}),i.jsx(fI,{isOpen:r,onClose:()=>a(!1),entityType:"patients",entityLabel:"Patients",currentConfig:t,onConfigUpdated:()=>{n()}})]})},gW=()=>{const e=Mt(),[t,n]=j.useState(""),[r,a]=j.useState([]),[s,o]=j.useState(!1),[l,c]=j.useState(!1),[u,f]=j.useState(!1),p=/^\+?[0-9\s\-().]{7,20}$/,y=j.useMemo(()=>pd(async _=>{if(_.trim().length<2){a([]),o(!1);return}o(!0);try{const T=new URLSearchParams({search:encodeURIComponent(_),page:"1",limit:"8",sortBy:"name",sortOrder:"asc"}),C=await ce(`/api/patients?${T.toString()}`);if(!C.ok)throw new Error("Failed to search");const O=await C.json();a(O.patients)}catch{a([])}finally{o(!1)}},300),[]),v=_=>{const T=_.target.value;n(T),c(p.test(T)),o(!0),f(!0),y(T)},x=j.useCallback(_=>{e("/billing",{state:{patientId:_.id,patientName:_.name}})},[e]),b=j.useCallback(async()=>{if(!(!t||!l)){o(!0);try{const T=await ce("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Direct Patient",phone:t,age:null,gender:null,token:null})});if(!T.ok)throw new Error("Failed to create patient");const C=await T.json();x(C)}catch(_){alert(`Error: ${_.message}`)}finally{o(!1)}}},[t,l,x]),w=_=>_.slice(0,1).toUpperCase();return i.jsxs("div",{className:"ccb-container",children:[i.jsxs("div",{className:"ccb-header-section",children:[i.jsx("button",{onClick:()=>e(-1),className:"ccb-back-button",title:"Go Back",children:i.jsx(rn,{size:24})}),i.jsx("h1",{className:"ccb-title",children:"Create Custom Bill"}),i.jsx("p",{className:"ccb-subtitle",children:"Search for a patient to bill manually, or create a new one instantly."})]}),i.jsxs("div",{className:"ccb-search-wrapper",children:[i.jsx(Un,{className:"ccb-search-icon",size:20}),i.jsx("input",{type:"text",placeholder:"Search by Name, Phone, or Token...",value:t,onChange:v,onFocus:()=>f(!0),className:"ccb-search-input",autoFocus:!0}),t&&i.jsx("div",{className:"ccb-clear-icon",onClick:()=>{n(""),a([]),f(!1)},children:i.jsx(zt,{size:18})}),i.jsxs("div",{className:`ccb-results-dropdown ${u&&(r.length>0||s||t.length>2&&r.length===0)?"open":""}`,children:[s&&i.jsx("div",{className:"p-4 flex justify-center items-center",children:i.jsx("div",{className:"ccb-spinner"})}),!s&&r.map(_=>i.jsxs("div",{onClick:()=>x(_),className:"ccb-result-item",children:[i.jsxs("div",{className:"ccb-patient-info",children:[i.jsx("div",{className:"ccb-avatar",children:w(_.name)}),i.jsxs("div",{className:"ccb-patient-details",children:[i.jsx("h4",{children:_.name}),i.jsxs("p",{className:"ccb-patient-meta",children:[_.phone||"No phone","  ",_.gender||"-","  ",_.age?`${_.age}y`:"-"]})]})]}),i.jsxs("span",{className:"ccb-token-badge",children:["#",_.token]})]},_.id)),!s&&r.length===0&&t.length>2&&i.jsxs("div",{className:"ccb-create-action",children:[i.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No patients found."}),l&&i.jsxs("button",{onClick:b,className:"ccb-create-btn w-full",children:["Create Patient with Phone ",t]})]})]})]})]})},yW=({currentUser:e})=>{const t=Mt(),n=ns(),[r,a]=j.useState("select_patient"),[s,o]=j.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,c]=j.useState(null),[u,f]=j.useState([]),[p,y]=j.useState([]),[v,x]=j.useState(""),[b,w]=j.useState([]),[_,T]=j.useState(""),[C,O]=j.useState([]),[E,P]=j.useState(!1),[I,F]=j.useState(null),[$,z]=j.useState(null),[L,H]=j.useState(null),[V,ne]=j.useState(!1),[Z,q]=j.useState(!1),[K,se]=j.useState(!1),G=/^\+?[0-9\s\-().]{7,20}$/,B=/^[a-zA-Z\s'-]{2,}$/,fe=j.useCallback(async()=>{if(!(u.length>0)){ne(!0),H(null);try{const W=await ce("/api/lab-tests");if(!W.ok)throw new Error("Failed to fetch lab tests");const ie=await W.json();f(ie)}catch(W){console.error("Failed to fetch available lab tests:",W),H("Could not load lab test list: "+W.message),f([])}finally{ne(!1)}}},[u.length]),me=W=>{W&&(n.prefetchQuery({queryKey:Vt.patients.context(W),queryFn:async()=>{const ie=await ce(`/api/patients/${W}/context`);if(!ie.ok)throw new Error("Failed to fetch patient context");return ie.json()},staleTime:1e3*60*5}),n.prefetchQuery({queryKey:Vt.patientDebts.balance(W),queryFn:async()=>{const ie=await ce(`/api/patient-debts/${W}/balance`);if(!ie.ok)throw new Error("Failed to fetch patient debt");return ie.json()},staleTime:1e3*60}),n.prefetchQuery({queryKey:Vt.queue.latest(W),queryFn:async()=>{const ie=await ce(`/api/queue/patient/${W}/latest`);if(!ie.ok){if(ie.status===404)return null;throw new Error("Failed to fetch queue status")}return ie.json()},staleTime:1e3*5}))},Y=j.useMemo(()=>new Zs(u,{keys:["name","description"],threshold:.3,ignoreLocation:!0}),[u]);j.useEffect(()=>{if(!v){w([]);return}const W=Y.search(v).map(ie=>ie.item);w(W.slice(0,10))},[v,Y]);const xe=j.useCallback(W=>{const ie={id:W.id,name:W.name,token:W.token,age:W.age,gender:W.gender,phone:W.phone};c(ie),a("create_order"),y([]),x(""),w([]),H(null),fe()},[fe]),Ie=j.useMemo(()=>pd(async W=>{if(W.trim().length<2){O([]),P(!1),F(null);return}P(!0),F(null);try{const ie=new URLSearchParams({search:encodeURIComponent(W),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),pe=await ce(`/api/patients?${ie.toString()}`);if(!pe.ok){const je=await pe.text();throw new Error(`API Error (${pe.status}): ${je||pe.statusText}`)}const le=await pe.json();O(le.patients)}catch(ie){console.error("Error searching lab patients:",ie),F(ie.message||"Failed to search lab patients."),O([])}finally{P(!1)}},300),[G,B]),Ne=W=>{const ie=W.target.value;T(ie),q(G.test(ie)),se(B.test(ie)&&!G.test(ie)),P(!0),Ie(ie)},ke=j.useCallback(async W=>{if(!_||W==="phone"&&!Z||W==="name"&&!K){F(`Invalid ${W} to create a new patient.`);return}P(!0),F(null);try{const pe=await ce("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:W==="name"?_:"direct lab",phone:W==="phone"?_:null,age:null,gender:null,token:null})});if(!pe.ok){const je=await pe.json();throw new Error(je.message||`Failed to create patient: ${pe.statusText}`)}const le=await pe.json();alert(`New patient "${le.name}" created with ${W==="phone"?`phone ${le.phone}`:`name ${le.name}`}.`),xe({id:le.id,name:le.name,token:le.token??null,age:le.age??null,gender:le.gender??null,phone:le.phone})}catch(ie){console.error("Error creating new patient:",ie),F(ie.message||"Failed to create new patient.")}finally{P(!1)}},[_,Z,K,xe]),de=()=>{a("select_patient"),c(null),T(""),O([]),F(null)},Q=W=>{const{name:ie,value:pe}=W.target;o(le=>({...le,[ie]:ie==="age"?pe?parseInt(pe,10):void 0:pe}))},oe=async W=>{if(W.preventDefault(),z(null),!s.name){z("Patient Name is required.");return}const ie={name:s.name,age:s.age,gender:s.gender,phone:s.phone,address:s.address};try{const pe=await ce("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!pe.ok){const je=await pe.json();throw new Error(je.message||`Failed to create patient: ${pe.statusText}`)}const le=await pe.json();xe({id:le.id,name:le.name,token:le.token??null,age:le.age??null,gender:le.gender??null,phone:le.phone})}catch(pe){console.error("Failed to create patient:",pe),z(pe.message||"Failed to create patient. Please try again.")}},re=W=>{if(p.some(ie=>ie.id===W.id)){H(`${W.name} is already in the order.`),setTimeout(()=>H(null),3e3),x(""),w([]);return}y(ie=>[...ie,{...W}]),x(""),w([])},ae=W=>{y(ie=>ie.filter(pe=>pe.id!==W))},X=async W=>{if(W.preventDefault(),H(null),!l){H("No patient selected.");return}if(p.length===0){H("No lab tests selected.");return}const ie={patient_id:l.id,tests:p.map(pe=>({id:pe.id,name:pe.name,price:pe.price}))};console.log("Submitting Lab Order:",ie);try{const pe=await ce("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!pe.ok){const Ge=await pe.json();throw console.error("API Error Data:",Ge),new Error(Ge.message||`Failed to create lab order: ${pe.statusText}`)}const le=await pe.json();console.log("Lab Order Creation Result:",le);let je=l.queueId;if(!je){const Ge=await ce(`/api/queue/patient/${l.id}/latest`);if(Ge.ok){const et=await Ge.json();et!=null&&et._id&&(je=et._id)}}if(!je){const Ge=await ce("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:l.id})});if(!Ge.ok){const ht=await Ge.text();throw new Error(`Failed to create queue entry for redirection: ${ht||Ge.statusText}`)}const et=await Ge.json();if(et!=null&&et.id)je=et.id;else throw new Error("Failed to get ID from new queue entry for redirection.")}(e==null?void 0:e.role)==="lab"?t("/dashboard"):t(`/dashboard/edit-complaint/${je}`)}catch(pe){console.error("Failed to create lab order:",pe),H(pe.message||"Failed to create lab order.")}};return j.useEffect(()=>{fe()},[fe]),i.jsxs("div",{className:"create-lab-order-container",children:[i.jsxs("div",{className:"create-lab-order-header",children:[i.jsx("button",{onClick:()=>t(-1),className:"back-button","aria-label":"Go back",children:i.jsx(rn,{size:20})}),i.jsx("h1",{className:"create-lab-order-title",children:"Create New Lab Order"}),i.jsx("div",{style:{width:"64px"}})," "]}),(r==="select_patient"||r==="create_patient")&&i.jsxs("div",{className:"glass-card",children:[r==="select_patient"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"header-with-action",children:i.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Select Patient"})}),i.jsxs("div",{className:"search-container",children:[i.jsx(Un,{className:"search-icon",size:20}),i.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No...",value:_,onChange:Ne,className:"modern-input",autoFocus:!0,autoComplete:"off"}),E&&i.jsx("div",{style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)"},children:i.jsx(ee,{width:80,height:14})})]}),E&&i.jsx("ul",{className:"patient-list",children:[1,2,3].map(W=>i.jsxs("li",{className:"patient-list-item",children:[i.jsxs("div",{className:"patient-info",children:[i.jsx(ee,{width:120,height:20}),i.jsx(ee,{width:50,height:24,style:{borderRadius:"12px"}})]}),i.jsx("div",{className:"patient-details",children:i.jsx(ee,{width:200,height:16})})]},W))}),I&&i.jsxs("div",{className:"error-message",children:[i.jsx(Wr,{size:18}),I]}),C.length>0&&i.jsx("ul",{className:"patient-list",children:C.map(W=>i.jsxs("li",{onClick:()=>xe(W),onMouseEnter:()=>me(W.id),className:"patient-list-item",children:[i.jsxs("div",{className:"patient-info",children:[i.jsx("strong",{children:W.name}),i.jsxs("span",{className:"token-badge",children:["#",W.token||"N/A"]})]}),i.jsxs("div",{className:"patient-details",children:[W.age?`${W.age} yrs`:"",W.gender?` / ${W.gender}`:"",W.phone?`  ${W.phone}`:""]})]},W.id))}),_.length>=2&&!E&&C.length===0&&!I&&i.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[i.jsxs("p",{className:"no-data-message",style:{background:"none",border:"none",padding:0},children:['No patients found matching "',_,'".']}),i.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px",marginTop:"15px"},children:[Z&&i.jsxs("button",{type:"button",onClick:()=>ke("phone"),className:"secondary-button",children:['Create "Direct Lab" Patient (Phone: ',_,")"]}),K&&i.jsxs("button",{type:"button",onClick:()=>ke("name"),className:"secondary-button",children:["Create Patient (Name: ",_,")"]})]})]}),_.length<2&&!E&&i.jsx("div",{className:"info-message",children:"Start typing to search for a patient..."})]}),r==="create_patient"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"header-with-action",children:[i.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"New Patient Registration"}),i.jsx("button",{onClick:de,className:"text-button",children:" Back to Search "})]}),$&&i.jsxs("div",{className:"error-message",children:[i.jsx(Wr,{size:18}),$]}),i.jsxs("form",{onSubmit:oe,children:[i.jsxs("div",{className:"form-grid",children:[i.jsxs("div",{className:"form-group full-width",children:[i.jsx("label",{htmlFor:"lab-patient-name",className:"form-label",children:"Patient Name *"}),i.jsxs("div",{className:"search-container",style:{margin:0},children:[i.jsx(mr,{className:"search-icon",size:18}),i.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:s.name,onChange:Q,className:"modern-input",placeholder:"Enter full name"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"lab-patient-age",className:"form-label",children:"Age"}),i.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:s.age??"",onChange:Q,className:"modern-input",style:{paddingLeft:"16px"},placeholder:"e.g. 30"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"lab-patient-gender",className:"form-label",children:"Gender"}),i.jsxs("select",{name:"gender",id:"lab-patient-gender",value:s.gender??"",onChange:Q,className:"modern-input",style:{paddingLeft:"16px"},children:[i.jsx("option",{value:"",children:"Select Gender..."}),i.jsx("option",{value:"M",children:"Male"}),i.jsx("option",{value:"F",children:"Female"}),i.jsx("option",{value:"O",children:"Other"})]})]}),i.jsxs("div",{className:"form-group full-width",children:[i.jsx("label",{htmlFor:"lab-patient-phone",className:"form-label",children:"Phone Number"}),i.jsxs("div",{className:"search-container",style:{margin:0},children:[i.jsx(ig,{className:"search-icon",size:18}),i.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:s.phone||"",onChange:Q,className:"modern-input",placeholder:"e.g. 9876543210"})]})]}),i.jsxs("div",{className:"form-group full-width",children:[i.jsx("label",{htmlFor:"lab-patient-address",className:"form-label",children:"Address"}),i.jsxs("div",{className:"search-container",style:{margin:0},children:[i.jsx(Bq,{className:"search-icon",size:18,style:{top:"20px"}}),i.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:s.address||"",onChange:Q,className:"modern-input",style:{resize:"none"},placeholder:"Enter address (optional)"})]})]})]}),i.jsxs("div",{className:"flex-end",children:[i.jsx("button",{type:"button",onClick:de,className:"secondary-button",children:" Cancel "}),i.jsxs("button",{type:"submit",className:"primary-button",children:[i.jsx(Yr,{size:18}),"Create & Proceed"]})]})]})]})]}),r==="create_order"&&l&&i.jsxs("div",{className:"glass-card",children:[i.jsxs("div",{className:"header-with-action",children:[i.jsx("h2",{className:"card-title",style:{borderBottom:"none",marginBottom:0},children:"Create Lab Order"}),i.jsx("button",{onClick:de,className:"text-button",children:" Change Patient "})]}),i.jsxs("div",{className:"patient-summary",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(mr,{size:20,className:"highlight-primary"}),i.jsx("span",{style:{fontSize:"1.1rem",fontWeight:"600"},children:l.name})]}),i.jsxs("div",{className:"patient-details",style:{marginLeft:"30px",marginTop:"4px"},children:[l.age?`${l.age} yrs`:"Age N/A",l.gender&&`  ${l.gender}`,l.phone&&`  ${l.phone}`]})]}),L&&i.jsxs("div",{className:"error-message",children:[i.jsx(Wr,{size:18}),L]}),i.jsxs("form",{onSubmit:X,children:[i.jsxs("div",{className:"form-group",style:{position:"relative"},children:[i.jsx("label",{htmlFor:"lab-test-search",className:"form-label",children:"Add Lab Test"}),i.jsxs("div",{className:"search-container",style:{margin:0},children:[V?i.jsx("div",{style:{position:"absolute",right:"45px",top:"50%",transform:"translateY(-50%)"},children:i.jsx(ee,{width:24,height:24,variant:"circular"})}):i.jsx(Un,{className:"search-icon",size:18}),i.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search tests (e.g. CBC, Lipid Profile)...",value:v,onChange:W=>x(W.target.value),className:"modern-input",disabled:V,autoComplete:"off"})]}),V&&v&&i.jsx("div",{className:"search-results-dropdown",children:[1,2,3].map(W=>i.jsxs("div",{className:"search-result-item",children:[i.jsx(ee,{width:"60%",height:20}),i.jsx(ee,{width:"20%",height:20})]},W))}),v&&b.length>0&&i.jsx("div",{className:"search-results-dropdown",children:b.map(W=>i.jsxs("div",{onClick:()=>re(W),className:"search-result-item",children:[i.jsx("span",{style:{fontWeight:500},children:W.name}),i.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(W.price).toFixed(2)]})]},W.id))}),v&&b.length===0&&!V&&i.jsxs("div",{className:"no-data-message",style:{marginTop:"5px",padding:"10px",fontSize:"0.9rem"},children:['No tests found matching "',v,'".']})]}),i.jsxs("div",{style:{marginTop:"30px"},children:[i.jsxs("h4",{className:"card-title",style:{fontSize:"1.1rem"},children:["Selected Tests (",p.length,")"]}),p.length===0?i.jsx("div",{className:"info-message",children:"No tests added yet. Search above to add tests."}):i.jsx("div",{className:"selected-tests-list",children:p.map(W=>i.jsxs("div",{className:"selected-test-item",children:[i.jsx("div",{style:{flex:1},children:i.jsx("div",{style:{fontWeight:500},children:W.name})}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[i.jsxs("span",{className:"highlight-primary",style:{fontWeight:600},children:["",parseFloat(W.price).toFixed(2)]}),i.jsx("button",{type:"button",onClick:()=>ae(W.id),className:"remove-button",title:"Remove Test",children:i.jsx(zr,{size:18})})]})]},W.id))})]}),p.length>0&&i.jsxs("div",{className:"total-price",children:["Total: ",p.reduce((W,ie)=>W+parseFloat(ie.price),0).toFixed(2)]}),i.jsxs("div",{className:"flex-end",children:[i.jsx("button",{type:"button",onClick:de,className:"secondary-button",children:" Cancel Order "}),i.jsxs("button",{type:"submit",disabled:p.length===0,className:"primary-button",children:[i.jsx(Yk,{size:18}),"Create Lab Order"]})]})]})]})]})},JIe=()=>{const e=j.useRef(null),t=j.useRef(null),[n,r]=j.useState(!1),[a,s]=j.useState(0),[o,l]=j.useState(!1),[c,u]=j.useState(!1),[f,p]=j.useState(null),y=30,v=100,x=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:!0});e.current&&(e.current.srcObject=_,u(!0),p(null))}catch(_){console.error("Error accessing camera:",_),p("Camera access denied. Please allow camera permissions to use motion detection."),u(!1)}},b=()=>{var T;const _=(T=e.current)==null?void 0:T.srcObject;_&&_.getTracks().forEach(C=>C.stop()),u(!1)};j.useEffect(()=>(x(),()=>b()),[]),j.useEffect(()=>{if(!c)return;let _;const T=t.current,C=e.current;if(!T||!C)return;const O=T.getContext("2d",{willReadFrequently:!0});if(!O)return;const E=320,P=240;T.width=E,T.height=P;let I=null;const F=()=>{if(C.readyState===C.HAVE_ENOUGH_DATA){O.drawImage(C,0,0,E,P);const z=O.getImageData(0,0,E,P).data;if(I){let L=0;for(let H=0;H<z.length;H+=4*4){const V=Math.abs(z[H]-I[H]),ne=Math.abs(z[H+1]-I[H+1]),Z=Math.abs(z[H+2]-I[H+2]);V+ne+Z>y&&L++}if(L>v){const H=Date.now();s(H),r(!0),o||l(!0)}else r(!1)}I=z}_=requestAnimationFrame(F)};return F(),()=>{cancelAnimationFrame(_)}},[c,o]);const w=()=>{l(!1)};return i.jsxs("div",{className:"motion-detect-container",style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",gap:"20px"},children:[i.jsxs("div",{className:"status-header bg-white p-4 rounded-lg shadow-sm flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-full ${c?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:i.jsx(Vk,{size:24})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Motion Detection Status"}),i.jsx("p",{className:"text-sm text-gray-500",children:c?"Camera Active - Monitoring":"Camera Inactive"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${n?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx(vc,{size:16}),i.jsx("span",{className:"font-medium",children:n?"Motion Detected!":"No Motion"})]}),i.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${o?"bg-blue-50 border-blue-200 text-blue-600":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[i.jsx(Gk,{size:16}),i.jsx("span",{className:"font-medium",children:o?"AI Assistant Active":"AI Assistant Idle"})]})]})]}),f&&i.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-200",children:f}),i.jsxs("div",{className:"video-feed-container bg-black rounded-lg overflow-hidden relative shadow-lg",style:{maxWidth:"640px",margin:"0 auto"},children:[i.jsx("video",{ref:e,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",display:c?"block":"none"}}),i.jsx("canvas",{ref:t,style:{display:"none"}}),!c&&!f&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Vk,{size:48,className:"mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"Connecting to camera..."})]})})]}),o&&i.jsx(TN,{onClose:w,patientData:null,tokenNumber:null,onAiSummaryChange:()=>{},lastMotionTimestamp:a,backgroundMode:!0})]})},ZIe=async()=>{const e=await ce("/api/staff");if(!e.ok)throw new Error("Failed to fetch staff");const t=await e.json();return t.staff||t||[]};function eRe(){return JS({queryKey:[...Vt.staff.list,"doctors"],queryFn:ZIe,staleTime:5*60*1e3,select:e=>e.filter(t=>t.role==="doctor"||t.role==="admin")})}const fz=({currentUser:e})=>{const[t,n]=j.useState("queue"),[r,a]=j.useState(""),[s,o]=j.useState(new Date),l=s.toISOString().split("T")[0],[c,u]=j.useState(!1),[f,p]=j.useState("list"),{data:y,isLoading:v,refetch:x}=mW(l),b=(y==null?void 0:y.list)||[],{data:w=[],isLoading:_}=eRe(),T=KIe(),C=ns(),[O,E]=j.useState(null),[P,I]=j.useState(null),F=Mt(),$=$r(),z=()=>{x()};j.useEffect(()=>{const B=new URLSearchParams($.search).get("tab");B&&Z.find(me=>me.id===B)&&n(B)},[$.search]),j.useEffect(()=>{t==="queue"&&x()},[t,x]);const L=j.useCallback(async(G,B)=>{if(console.log(`Attempting to assign doctor ${B} to queue ${G}`),I(null),E(null),!B){console.log("No doctor ID provided, skipping assignment.");return}const fe=b.find(xe=>xe.id===G);if(!fe){console.error(`Queue entry ${G} not found in local state.`),I("Queue entry not found.");return}if(fe.doctor_id===B){console.log(`Queue ${G} already assigned to doctor ${B}. Skipping.`);return}const me=async xe=>{if(!xe||!xe.id||!xe.name){I("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",xe);return}const Ie=async()=>{try{await T.mutateAsync({queueId:G,status:"waiting",doctorId:B});const Ne=w.find(ke=>ke.id===B);return console.log(`Successfully assigned doctor ${Ne==null?void 0:Ne.name} to queue ${G}.`),!0}catch(Ne){return console.error(`Error assigning doctor for queue ${G}:`,Ne),I(`Failed to assign doctor: ${Ne.message}`),!1}};xe.subscription_status==="active"?(console.log(`Patient ${xe.name} (ID: ${xe.id}) has active subscription. Assigning doctor directly.`),await Ie()):(console.log(`Patient ${xe.name} (ID: ${xe.id}) does not have active subscription. Navigating to billing WITHOUT assigning doctor yet.`),F(`/dashboard/doctor-billing/${G}?doctorId=${B}`))},Y=fe.Patient;if(Y&&Y.id&&Y.name)console.log("Patient details found in state. Proceeding with assignment."),await me(Y);else{console.warn(`Patient details missing for queue entry ${G}. Fetching patient ${fe.patient_id}...`);try{const xe=await ce(`/api/patients/${fe.patient_id}`);if(!xe.ok){const Ne=await xe.json().catch(()=>({}));throw new Error(Ne.message||`Failed to fetch patient details (status ${xe.status})`)}const Ie=await xe.json();console.log("Successfully fetched patient details:",Ie),await me(Ie)}catch(xe){console.error(`Failed to fetch patient details for patient ID ${fe.patient_id}:`,xe),I(`Failed to fetch required patient details: ${xe.message}`)}}},[w,b,F,T]),H=G=>{G&&(C.prefetchQuery({queryKey:Vt.patients.context(G),queryFn:async()=>{const B=await ce(`/api/patients/${G}/context`);if(!B.ok)throw new Error("Failed to fetch patient context");return B.json()},staleTime:5*60*1e3}),C.prefetchQuery({queryKey:Vt.patientDebts.balance(G),queryFn:async()=>{const B=await ce(`/api/patient-debts/${G}/balance`);return B.ok?B.json():{netDebt:0}},staleTime:1*60*1e3}),C.prefetchQuery({queryKey:Vt.queue.latest(G),queryFn:async()=>{const B=await ce(`/api/queue/patient/${G}/latest`);if(!B.ok)throw new Error("Failed to fetch latest queue status");const fe=await B.json();return fe!=null&&fe._id&&C.prefetchQuery({queryKey:Vt.queue.entry(fe._id),queryFn:async()=>{const me=await ce(`/api/queue/doctor/complaint/${fe._id}`);if(!me.ok)throw new Error("Failed to fetch complaint record");return me.json()},staleTime:1*60*1e3}),fe},staleTime:5e3}),C.prefetchQuery({queryKey:Vt.dental.records(G),queryFn:async()=>{const B=await ce(`/api/dental/patient/${G}`);if(!B.ok)throw new Error("Failed to fetch dental records");return B.json()},staleTime:5*60*1e3}))},V=async(G,B)=>{var me;I(null);const fe=B==="consulting"?"start consultation":"complete visit";try{await T.mutateAsync({queueId:G,status:B,doctorId:B==="consulting"&&((me=b.find(Y=>Y.id===G))==null?void 0:me.doctor_id)||void 0})}catch(Y){console.error(`Error trying to ${fe}:`,Y),I(`Failed to ${fe}: ${Y.message}`)}},ne=async(G,B)=>{let fe="red";B==="red"?fe="green":B==="green"?fe="blue":B==="blue"?fe=null:fe="red";try{if(!(await ce(`/api/patients/${G}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_code:fe})})).ok)throw new Error("Failed to update patient color");x()}catch(me){console.error("Error updating patient color:",me)}},Z=[{id:"queue",label:"Appointment Queue",icon:i.jsx(ko,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:i.jsx(Un,{size:20})},{id:"manage-admission",label:"Manage Admission",icon:i.jsx(BX,{size:20})},{id:"all-patients",label:"All Patients",icon:i.jsx($b,{size:20})},{id:"lab",label:"Lab Tests",icon:i.jsx(hw,{size:20})},{id:"custom-bill",label:"Custom Bill",icon:i.jsx(ws,{size:20})},{id:"motion-detect",label:"Motion Detect",icon:i.jsx(Vk,{size:20})}],q=G=>{try{return new Date(G).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},K=b.filter(G=>{var B,fe;return(fe=(B=G.Patient)==null?void 0:B.name)==null?void 0:fe.toLowerCase().includes(r.toLowerCase())}),{openCommandBar:se}=Pc();return i.jsxs("div",{className:"admin-panel-container",children:[P&&i.jsxs("div",{className:"error-message-reception",role:"alert",children:[i.jsx("strong",{children:"Error: "}),i.jsx("span",{children:P})]}),i.jsx("div",{className:"admin-nav-bar",children:Z.map(G=>i.jsxs("button",{className:`admin-nav-button ${t===G.id?"active":""}`,onClick:()=>{G.id==="newtons-ai"?se():n(G.id)},children:[i.jsx("span",{children:G.icon}),G.label]},G.id))}),i.jsx("div",{className:"admin-content-section",children:i.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[t==="queue"&&i.jsxs("div",{className:"space-y-6",children:[" ",i.jsxs("div",{className:"queue-header",children:[i.jsxs("div",{className:"queue-actions",children:[i.jsxs("div",{className:"search-bar-container",children:[i.jsx("input",{type:"text",placeholder:"Search patients...",className:"search-input",value:r,onChange:G=>a(G.target.value)}),i.jsx(Un,{className:"search-icon",size:18})]}),i.jsxs("div",{className:"controls-row",children:[i.jsxs("div",{className:"view-toggle-container",children:[i.jsx("button",{className:`view-toggle-btn ${f==="list"?"active":""}`,onClick:()=>p("list"),title:"List View",children:i.jsx(Mq,{size:16})}),i.jsx("button",{className:`view-toggle-btn ${f==="timeline"?"active":""}`,onClick:()=>p("timeline"),title:"Timeline View",children:i.jsx(jD,{size:16})})]}),i.jsxs("div",{className:"date-picker-container",children:[i.jsx(pi,{size:16,className:"text-gray-500"}),i.jsx("input",{type:"date",className:"date-input",value:s.toISOString().split("T")[0],onChange:G=>o(new Date(G.target.value))})]}),i.jsxs("button",{onClick:()=>u(!0),className:"appointment-button",children:[i.jsx(Fb,{size:16}),i.jsx("span",{className:"hidden sm:inline",children:"Book Appointment"}),i.jsx("span",{className:"sm:hidden",children:"Book"})]})]})]}),i.jsxs("div",{className:"summary-cards-grid",children:[i.jsxs("div",{className:"summary-card card-waiting",children:[i.jsx("div",{className:"summary-card-title",children:"Waiting"}),i.jsx("div",{className:"summary-card-value",children:b.filter(G=>G.status==="waiting").length})]}),i.jsxs("div",{className:"summary-card card-consulting",children:[i.jsx("div",{className:"summary-card-title",children:"Consulting"}),i.jsx("div",{className:"summary-card-value",children:b.filter(G=>G.status==="consulting").length})]}),i.jsxs("div",{className:"summary-card card-completed",children:[i.jsx("div",{className:"summary-card-title",children:"Completed"}),i.jsx("div",{className:"summary-card-value",children:b.filter(G=>G.status==="seen").length})]})]})]}),i.jsx(pW,{isOpen:c,onClose:()=>{u(!1),x()},onAppointmentBooked:z}),v&&b.length===0?i.jsx("div",{className:"queue-table-wrapper",children:i.jsxs("table",{className:"queue-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(ee,{width:50,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{className:"hidden md:table-cell",children:i.jsx(ee,{width:80,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:120,height:20})})]})}),i.jsx("tbody",{children:[1,2,3,4,5].map(G=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:40,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:120,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:24,style:{borderRadius:"12px"}})}),i.jsx("td",{className:"hidden md:table-cell",children:i.jsx(ee,{width:60,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:120,height:32})})]},G))})]})}):K.length===0?i.jsx("div",{className:"empty-queue-message",children:r?"No patients found matching your search.":"Queue is empty."}):f==="timeline"?i.jsx(fW,{queueList:K,onPatientClick:G=>F(`/dashboard/edit-complaint/${G.id}`)}):i.jsx("div",{className:"queue-table-wrapper",children:i.jsxs("table",{className:"queue-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"hidden-mobile",children:"Token"}),i.jsx("th",{children:"Patient"}),i.jsx("th",{className:"hidden-mobile",children:"Phone"}),i.jsx("th",{className:"hidden-mobile",children:"Complaint"}),i.jsx("th",{className:"hidden-mobile",children:"Subscription"}),i.jsx("th",{className:"hidden-mobile",children:"Time"}),i.jsx("th",{className:"text-center",children:"Action"})]})}),i.jsx("tbody",{children:K.map(G=>{var B,fe,me,Y,xe,Ie,Ne,ke,de,Q,oe,re;return i.jsxs("tr",{onClick:()=>F(`/dashboard/edit-complaint/${G.id}`),onMouseEnter:()=>G.patient_id&&H(G.patient_id),className:"queue-row-clickable",children:[i.jsxs("td",{className:"hidden-mobile",children:[" ",i.jsxs("span",{className:"queue-token",children:["#",G.token_no]})," "]}),i.jsx("td",{children:i.jsxs("div",{className:"patient-cell-content",children:[i.jsx("span",{className:`color-dot color-${((B=G.Patient)==null?void 0:B.color_code)||"none"}`,onClick:ae=>{var X;ae.stopPropagation(),(X=G.Patient)!=null&&X.id&&ne(G.Patient.id,G.Patient.color_code)},title:"Click to change color"}),i.jsxs("div",{className:"patient-info",children:[i.jsx("span",{className:"name",children:((fe=G.Patient)==null?void 0:fe.name)||"N/A"}),i.jsxs("span",{className:"details",children:[(me=G.Patient)!=null&&me.age?`${G.Patient.age}y`:"",(Y=G.Patient)!=null&&Y.gender?`, ${G.Patient.gender}`:""]})]})]})}),i.jsxs("td",{className:"hidden-mobile",children:[" ",i.jsx("div",{className:"text-sm text-gray-500",children:((xe=G.Patient)==null?void 0:xe.phone)||"-"})," "]}),i.jsx("td",{className:"hidden-mobile",children:i.jsx("span",{className:"complaint-badge",children:G.complaint||"-"})}),i.jsxs("td",{className:"hidden-mobile",children:[i.jsx("span",{className:`status-badge ${((Ie=G.Patient)==null?void 0:Ie.subscription_status)==="active"?"status-active":((Ne=G.Patient)==null?void 0:Ne.subscription_status)==="cancelled"||((ke=G.Patient)==null?void 0:ke.subscription_status)==="expired"?"status-inactive":"status-none"}`,children:((de=G.Patient)==null?void 0:de.subscription_status)??"None"}),G.Patient&&G.Patient.id&&G.Patient.subscription_status!=="active"&&i.jsx("button",{onClick:ae=>{ae.stopPropagation(),G.Patient&&F(`/start-subscription/${G.Patient.id}`)},className:"btn-start-sub ml-2",children:"Start Sub"})]}),i.jsx("td",{className:"hidden-mobile text-sm text-gray-500",children:q(G.createdAt)}),i.jsx("td",{className:"action-doctor-cell",children:O===G.id?i.jsx("div",{className:"relative inline-block text-left w-full",onClick:ae=>ae.stopPropagation(),children:i.jsxs("select",{value:"",onChange:ae=>L(G.id,ae.target.value),onBlur:()=>E(null),className:"doctor-select",autoFocus:!0,children:[i.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),_?i.jsx("option",{disabled:!0,children:"Loading..."}):w.length>0?w.map(ae=>i.jsx("option",{value:ae.id,children:ae.name},ae.id)):i.jsx("option",{disabled:!0,children:"No doctors available"})]})}):i.jsxs("div",{className:"action-doctor-content",onClick:ae=>ae.stopPropagation(),children:[G.status==="waiting"&&i.jsx(i.Fragment,{children:(Q=G.User)!=null&&Q.name?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"doctor-name-display",children:G.User.name}),i.jsx("button",{onClick:()=>V(G.id,"consulting"),className:"btn-action btn-start",children:"Start"})]}):_?i.jsx(ee,{width:80,height:20}):w.length===0?i.jsx("span",{className:"text-red-500 text-xs",children:"No docs"}):w.length===1?i.jsxs("button",{onClick:()=>L(G.id,w[0].id),className:"btn-action btn-assign",children:["Assign ",w[0].name.split(" ")[0]]}):i.jsx("button",{onClick:()=>E(G.id),className:"btn-action btn-assign",children:"Assign"})}),G.status==="consulting"&&i.jsxs(i.Fragment,{children:[((oe=G.User)==null?void 0:oe.name)&&i.jsx("span",{className:"doctor-name-display",children:G.User.name}),i.jsx("button",{onClick:()=>V(G.id,"seen"),className:"btn-action btn-complete",children:"Complete"})]}),G.status==="seen"&&i.jsxs(i.Fragment,{children:[((re=G.User)==null?void 0:re.name)&&i.jsx("span",{className:"doctor-name-display",children:G.User.name}),i.jsx("span",{className:"text-gray-400 italic text-xs",children:"Done"})]}),G.status==="cancelled"&&i.jsx("span",{className:"text-red-500 italic text-xs",children:"Cancelled"})]})})]},G.id)})})]})})]}),t==="lab"&&i.jsxs("div",{className:"lab-tab-content",children:[" ",i.jsx(yW,{currentUser:e}),i.jsxs("button",{onClick:()=>F("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[i.jsx(Un,{size:16}),"Search Lab Reports"]})]}),t==="newtons-ai"&&i.jsx("div",{className:"newtons-ai-tab-content",children:i.jsx(_x,{})}),t==="manage-admission"&&i.jsx("div",{className:"manage-admission-tab-content",children:i.jsx(hI,{})}),t==="all-patients"&&i.jsx("div",{className:"all-patients-tab-content",children:i.jsx(eD,{})}),t==="custom-bill"&&i.jsx("div",{className:"custom-bill-tab-content",children:i.jsx(gW,{})}),t==="motion-detect"&&i.jsx("div",{className:"motion-detect-tab-content",style:{height:"100%"},children:i.jsx(JIe,{})})]})})," "]})},vW=6048e5,tRe=864e5,xW=6e4,bW=36e5,pz=Symbol.for("constructDateFrom");function Mo(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&pz in e?e[pz](t):e instanceof Date?new e.constructor(t):new Date(t)}function sa(e,t){return Mo(t||e,e)}function nRe(e,t,n){const r=sa(e,n==null?void 0:n.in);if(isNaN(t))return Mo(e,NaN);const a=r.getDate(),s=Mo(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);const o=s.getDate();return a>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),a),r)}let rRe={};function u_(){return rRe}function Eb(e,t){var l,c,u,f;const n=u_(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=sa(e,t==null?void 0:t.in),s=a.getDay(),o=(s<r?7:0)+s-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function QS(e,t){return Eb(e,{...t,weekStartsOn:1})}function jW(e,t){const n=sa(e,t==null?void 0:t.in),r=n.getFullYear(),a=Mo(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const s=QS(a),o=Mo(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=QS(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function mz(e){const t=sa(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function iRe(e,...t){const n=Mo.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function gz(e,t){const n=sa(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function aRe(e,t,n){const[r,a]=iRe(n==null?void 0:n.in,e,t),s=gz(r),o=gz(a),l=+s-mz(s),c=+o-mz(o);return Math.round((l-c)/tRe)}function sRe(e,t){const n=jW(e,t),r=Mo(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),QS(r)}function oRe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function tD(e){return!(!oRe(e)&&typeof e!="number"||isNaN(+sa(e)))}function lRe(e,t){const n=sa(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const cRe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uRe=(e,t,n)=>{let r;const a=cRe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function hk(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const dRe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hRe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fRe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pRe={date:hk({formats:dRe,defaultWidth:"full"}),time:hk({formats:hRe,defaultWidth:"full"}),dateTime:hk({formats:fRe,defaultWidth:"full"})},mRe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gRe=(e,t,n,r)=>mRe[e];function mx(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const yRe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vRe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xRe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bRe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},SRe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},NRe={ordinalNumber:SRe,era:mx({values:yRe,defaultWidth:"wide"}),quarter:mx({values:vRe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:mx({values:xRe,defaultWidth:"wide"}),day:mx({values:bRe,defaultWidth:"wide"}),dayPeriod:mx({values:jRe,defaultWidth:"wide",formattingValues:wRe,defaultFormattingWidth:"wide"})};function gx(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?CRe(l,p=>p.test(o)):_Re(l,p=>p.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function _Re(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function CRe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function TRe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const ERe=/^(\d+)(th|st|nd|rd)?/i,ARe=/\d+/i,kRe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},PRe={any:[/^b/i,/^(a|c)/i]},ORe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},DRe={any:[/1/i,/2/i,/3/i,/4/i]},MRe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},IRe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RRe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},LRe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},FRe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$Re={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BRe={ordinalNumber:TRe({matchPattern:ERe,parsePattern:ARe,valueCallback:e=>parseInt(e,10)}),era:gx({matchPatterns:kRe,defaultMatchWidth:"wide",parsePatterns:PRe,defaultParseWidth:"any"}),quarter:gx({matchPatterns:ORe,defaultMatchWidth:"wide",parsePatterns:DRe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:gx({matchPatterns:MRe,defaultMatchWidth:"wide",parsePatterns:IRe,defaultParseWidth:"any"}),day:gx({matchPatterns:RRe,defaultMatchWidth:"wide",parsePatterns:LRe,defaultParseWidth:"any"}),dayPeriod:gx({matchPatterns:FRe,defaultMatchWidth:"any",parsePatterns:$Re,defaultParseWidth:"any"})},zRe={code:"en-US",formatDistance:uRe,formatLong:pRe,formatRelative:gRe,localize:NRe,match:BRe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qRe(e,t){const n=sa(e,t==null?void 0:t.in);return aRe(n,lRe(n))+1}function URe(e,t){const n=sa(e,t==null?void 0:t.in),r=+QS(n)-+sRe(n);return Math.round(r/vW)+1}function wW(e,t){var f,p,y,v;const n=sa(e,t==null?void 0:t.in),r=n.getFullYear(),a=u_(),s=(t==null?void 0:t.firstWeekContainsDate)??((p=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??a.firstWeekContainsDate??((v=(y=a.locale)==null?void 0:y.options)==null?void 0:v.firstWeekContainsDate)??1,o=Mo((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=Eb(o,t),c=Mo((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=Eb(c,t);return+n>=+l?r+1:+n>=+u?r:r-1}function VRe(e,t){var l,c,u,f;const n=u_(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,a=wW(e,t),s=Mo((t==null?void 0:t.in)||e,0);return s.setFullYear(a,0,r),s.setHours(0,0,0,0),Eb(s,t)}function HRe(e,t){const n=sa(e,t==null?void 0:t.in),r=+Eb(n,t)-+VRe(n,t);return Math.round(r/vW)+1}function cr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Hu={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return cr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):cr(n+1,2)},d(e,t){return cr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return cr(e.getHours()%12||12,t.length)},H(e,t){return cr(e.getHours(),t.length)},m(e,t){return cr(e.getMinutes(),t.length)},s(e,t){return cr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return cr(a,t.length)}},Em={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yz={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Hu.y(e,t)},Y:function(e,t,n,r){const a=wW(e,r),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return cr(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):cr(s,t.length)},R:function(e,t){const n=jW(e);return cr(n,t.length)},u:function(e,t){const n=e.getFullYear();return cr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return cr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return cr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Hu.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return cr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=HRe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):cr(a,t.length)},I:function(e,t,n){const r=URe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):cr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Hu.d(e,t)},D:function(e,t,n){const r=qRe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):cr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return cr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return cr(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return cr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Em.noon:r===0?a=Em.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Em.evening:r>=12?a=Em.afternoon:r>=4?a=Em.morning:a=Em.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Hu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Hu.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Hu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Hu.s(e,t)},S:function(e,t){return Hu.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return xz(r);case"XXXX":case"XX":return Gh(r);case"XXXXX":case"XXX":default:return Gh(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return xz(r);case"xxxx":case"xx":return Gh(r);case"xxxxx":case"xxx":default:return Gh(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+vz(r,":");case"OOOO":default:return"GMT"+Gh(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+vz(r,":");case"zzzz":default:return"GMT"+Gh(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return cr(r,t.length)},T:function(e,t,n){return cr(+e,t.length)}};function vz(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return s===0?n+String(a):n+String(a)+t+cr(s,2)}function xz(e,t){return e%60===0?(e>0?"-":"+")+cr(Math.abs(e)/60,2):Gh(e,t)}function Gh(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=cr(Math.trunc(r/60),2),s=cr(r%60,2);return n+a+t+s}const bz=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},SW=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},GRe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return bz(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",bz(r,t)).replace("{{time}}",SW(a,t))},WRe={p:SW,P:GRe},KRe=/^D+$/,YRe=/^Y+$/,QRe=["D","DD","YY","YYYY"];function XRe(e){return KRe.test(e)}function JRe(e){return YRe.test(e)}function ZRe(e,t,n){const r=e4e(e,t,n);if(console.warn(r),QRe.includes(e))throw new RangeError(r)}function e4e(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const t4e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,n4e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,r4e=/^'([^]*?)'?$/,i4e=/''/g,a4e=/[a-zA-Z]/;function gf(e,t,n){var f,p,y,v;const r=u_(),a=r.locale??zRe,s=r.firstWeekContainsDate??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=r.weekStartsOn??((v=(y=r.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,l=sa(e,n==null?void 0:n.in);if(!tD(l))throw new RangeError("Invalid time value");let c=t.match(n4e).map(x=>{const b=x[0];if(b==="p"||b==="P"){const w=WRe[b];return w(x,a.formatLong)}return x}).join("").match(t4e).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:s4e(x)};if(yz[b])return{isToken:!0,value:x};if(b.match(a4e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(x=>{if(!x.isToken)return x.value;const b=x.value;(JRe(b)||XRe(b))&&ZRe(b,t,String(e));const w=yz[b[0]];return w(l,b,a.localize,u)}).join("")}function s4e(e){const t=e.match(r4e);return t?t[1].replace(i4e,"'"):e}function fk(e,t){return+sa(e)<+sa(t)}function jz(e,t){const n=()=>Mo(t==null?void 0:t.in,NaN),a=u4e(e);let s;if(a.date){const u=d4e(a.date,2);s=h4e(u.restDateString,u.year)}if(!s||isNaN(+s))return n();const o=+s;let l=0,c;if(a.time&&(l=f4e(a.time),isNaN(l)))return n();if(a.timezone){if(c=p4e(a.timezone),isNaN(c))return n()}else{const u=new Date(o+l),f=sa(0,t==null?void 0:t.in);return f.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),f.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),f}return sa(o+l+c,t==null?void 0:t.in)}const ow={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o4e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,l4e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c4e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u4e(e){const t={},n=e.split(ow.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],ow.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ow.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const a=ow.timezone.exec(r);a?(t.time=r.replace(a[1],""),t.timezone=a[1]):t.time=r}return t}function d4e(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?a:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function h4e(e,t){if(t===null)return new Date(NaN);const n=e.match(o4e);if(!n)return new Date(NaN);const r=!!n[4],a=yx(n[1]),s=yx(n[2])-1,o=yx(n[3]),l=yx(n[4]),c=yx(n[5])-1;if(r)return x4e(t,l,c)?m4e(t,l,c):new Date(NaN);{const u=new Date(0);return!y4e(t,s,o)||!v4e(t,a)?new Date(NaN):(u.setUTCFullYear(t,s,Math.max(a,o)),u)}}function yx(e){return e?parseInt(e):1}function f4e(e){const t=e.match(l4e);if(!t)return NaN;const n=pk(t[1]),r=pk(t[2]),a=pk(t[3]);return b4e(n,r,a)?n*bW+r*xW+a*1e3:NaN}function pk(e){return e&&parseFloat(e.replace(",","."))||0}function p4e(e){if(e==="Z")return 0;const t=e.match(c4e);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return j4e(r,a)?n*(r*bW+a*xW):NaN}function m4e(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const a=r.getUTCDay()||7,s=(t-1)*7+n+1-a;return r.setUTCDate(r.getUTCDate()+s),r}const g4e=[31,null,31,30,31,30,31,31,30,31,30,31];function NW(e){return e%400===0||e%4===0&&e%100!==0}function y4e(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(g4e[t]||(NW(e)?29:28))}function v4e(e,t){return t>=1&&t<=(NW(e)?366:365)}function x4e(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function b4e(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function j4e(e,t){return t>=0&&t<=59}const pI=({isEmbedded:e=!1})=>{const{customColumnsConfig:t,refetch:n}=EN(),r=t.lab_tests||[],[a,s]=j.useState(!1),[o,l]=j.useState(!1),[c,u]=j.useState([]),[f,p]=j.useState(""),[y,v]=j.useState(!1),[x,b]=j.useState(null),[w,_]=j.useState(!1),[T,C]=j.useState(null),O=j.useRef(null),[E,P]=j.useState(!1),[I,F]=j.useState(null),[$,z]=j.useState(!1),[L,H]=j.useState(!1),[V,ne]=j.useState(null),[Z,q]=j.useState({name:"",description:"",price:"",default_parameters:[]}),K=j.useCallback(async()=>{v(!0),b(null),C(null),F(null);try{const W=await ce("/api/lab-tests");if(!W.ok)throw new Error(`HTTP error! status: ${W.status}`);const ie=await W.json();u(ie)}catch(W){console.error("Error fetching lab tests:",W),b(W.message||"Failed to fetch lab tests.")}finally{v(!1)}},[]);j.useEffect(()=>{K()},[K]);const se=W=>{const{name:ie,value:pe}=W.target;q(le=>({...le,[ie]:pe}))},G=(W,ie,pe)=>{const le=[...Z.default_parameters],je=le[W];if(ie==="type")switch(je.type=pe,pe){case"number":je.defaultValue=0,je.lower_limit=null,je.upper_limit=null,je.unit="";break;case"boolean":je.defaultValue=!1,je.lower_limit=void 0,je.upper_limit=void 0,je.unit=void 0;break;case"string":default:je.defaultValue="",je.lower_limit=void 0,je.upper_limit=void 0,je.unit=void 0;break}else ie==="defaultValue"?je.type==="number"?je.defaultValue=parseFloat(pe)||0:(je.type,je.defaultValue=pe):ie==="lower_limit"||ie==="upper_limit"?je[ie]=pe===""?null:parseFloat(pe):je[ie]=pe;q(Ge=>({...Ge,default_parameters:le}))},B=()=>{q(W=>({...W,default_parameters:[...W.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},fe=W=>{q(ie=>({...ie,default_parameters:ie.default_parameters.filter((pe,le)=>le!==W)}))},me=async W=>{W.preventDefault(),v(!0),b(null);const ie=V!==null,pe=ie?`/api/lab-tests/${V}`:"/api/lab-tests",le=ie?"PUT":"POST";try{const je=await ce(pe,{method:le,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Z.name,description:Z.description,price:parseFloat(Z.price),default_parameters:Z.default_parameters})});if(!je.ok){const Ge=await je.json();throw new Error(Ge.message||`HTTP error! status: ${je.status}`)}H(!1),ne(null),q({name:"",description:"",price:"",default_parameters:[]}),K()}catch(je){console.error(`Error ${ie?"updating":"adding"} lab test:`,je),b(je.message||`Failed to ${ie?"update":"add"} lab test.`)}finally{v(!1)}},Y=()=>{ne(null),q({name:"",description:"",price:"",default_parameters:[]}),H(!0)},xe=W=>{if(V===W.id)ne(null);else{ne(W.id);const ie=(W.default_parameters||[]).map(pe=>({...pe,unit:pe.unit||"",lower_limit:pe.lower_limit===void 0?null:pe.lower_limit,upper_limit:pe.upper_limit===void 0?null:pe.upper_limit}));q({name:W.name,description:W.description||"",price:W.price,default_parameters:ie}),H(!1)}},Ie=async W=>{if(window.confirm("Are you sure you want to delete this lab test?")){v(!0),b(null);try{const ie=await ce(`/api/lab-tests/${W}`,{method:"DELETE"});if(!ie.ok){const pe=await ie.json();throw new Error(pe.message||`HTTP error! status: ${ie.status}`)}K()}catch(ie){console.error("Error deleting lab test:",ie),b(ie.message||"Failed to delete lab test.")}finally{v(!1)}}},Ne=()=>{H(!1),ne(null),b(null),q({name:"",description:"",price:"",default_parameters:[]})},ke=async W=>{if(!W){C("No file selected.");return}_(!0),C(null),b(null);const ie=new FormData;ie.append("file",W);try{const pe=await ce("/api/lab-tests/import",{method:"POST",body:ie});if(!pe.ok){const le=await pe.json();throw new Error(le.message||`Import failed: ${pe.statusText}`)}K()}catch(pe){console.error("Error importing lab tests from Excel:",pe),C(pe.message||"Failed to import lab tests from Excel.")}finally{_(!1)}},de=async W=>{if(W.target.files&&W.target.files[0]){const ie=W.target.files[0];await ke(ie),W.target&&(W.target.value="")}},Q=async()=>{if(window.confirm("Are you sure you want to import default biochemistry and pathology tests? This will add new tests and may duplicate existing ones if names match.")){P(!0),F(null),b(null);try{const W=await ce("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"}});if(!W.ok){const ie=await W.json();throw new Error(ie.message||`Default import failed: ${W.statusText}`)}K()}catch(W){console.error("Error importing default lab tests:",W),F(W.message||"Failed to import default lab tests.")}finally{P(!1)}}},oe=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){z(!0),b(null),C(null),F(null);try{const W=await ce("/api/lab-tests/all",{method:"DELETE"});if(!W.ok){const ie=await W.json();throw new Error(ie.message||`Delete all failed: ${W.statusText}`)}K()}catch(W){console.error("Error deleting all lab tests:",W),b(W.message||"Failed to delete all lab tests.")}finally{z(!1)}}},re=y||w||E||$,ae=j.useMemo(()=>new Zs(c,{keys:["name","description","default_parameters.name"],threshold:.3,ignoreLocation:!0}),[c]),X=j.useMemo(()=>f?ae.search(f).map(W=>W.item):c,[c,f,ae]);return i.jsxs("div",{className:`lab-inventory-card ${e?"embedded":""}`,style:e?{border:"none",boxShadow:"none",padding:0}:{},children:[!e&&i.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),i.jsx("div",{className:"mb-4",style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:i.jsx("input",{type:"text",placeholder:"Search by test name...",value:f,onChange:W=>p(W.target.value),className:"lab-inventory-input",style:{maxWidth:"300px",marginRight:"10px"}})}),i.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[i.jsx("button",{onClick:Y,className:"lab-inventory-button",disabled:re,children:"Add New Test"}),i.jsx("button",{onClick:()=>{var W;return(W=O.current)==null?void 0:W.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:re,children:w?"Importing...":"Import from Excel"}),i.jsx("input",{type:"file",ref:O,onChange:de,accept:".xlsx, .xls",style:{display:"none"},disabled:w}),i.jsx("button",{onClick:Q,className:"lab-inventory-button lab-inventory-button-secondary",disabled:re,children:E?"Importing Defaults...":"Import Default Tests"}),i.jsx("button",{onClick:oe,className:"lab-inventory-button lab-inventory-button-danger",disabled:re,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:$?"Deleting All...":"Delete All Tests"}),i.jsxs("button",{onClick:()=>s(!0),className:"lab-inventory-button lab-inventory-button-secondary",disabled:re,title:"Manage Custom Columns",children:[i.jsx(dd,{size:16,style:{marginRight:"4px"}})," Columns"]}),i.jsxs("div",{className:"view-mode-toggle",style:{marginLeft:"auto"},children:[i.jsxs("button",{onClick:()=>l(!1),className:`view-mode-btn ${o?"":"active"}`,title:"List View",children:[i.jsx($b,{size:18})," List"]}),i.jsxs("button",{onClick:()=>l(!0),className:`view-mode-btn ${o?"active":""}`,title:"Excel Mode (Edit)",children:[i.jsx(bf,{size:18})," Excel"]})]})]}),x&&i.jsx("div",{className:"error-text mb-4",children:x}),T&&i.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",T]}),I&&i.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",I]}),L&&i.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",i.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),i.jsxs("form",{onSubmit:me,children:[i.jsxs("div",{className:"lab-inventory-form-group",children:[i.jsxs("label",{htmlFor:"name",children:["Test Name ",i.jsx("span",{style:{color:"red"},children:"*"})]}),i.jsx("input",{type:"text",id:"name",name:"name",value:Z.name,onChange:se,className:"lab-inventory-input",required:!0,disabled:re})]}),i.jsxs("div",{className:"lab-inventory-form-group",children:[i.jsx("label",{htmlFor:"description",children:"Description"}),i.jsx("textarea",{id:"description",name:"description",value:Z.description,onChange:se,rows:3,className:"lab-inventory-input",disabled:re})]}),i.jsxs("div",{className:"lab-inventory-form-group",children:[i.jsxs("label",{htmlFor:"price",children:["Price ",i.jsx("span",{style:{color:"red"},children:"*"})]}),i.jsx("input",{type:"number",id:"price",name:"price",value:Z.price,onChange:se,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:re})]}),i.jsxs("div",{className:"lab-inventory-form-group",children:[i.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),Z.default_parameters.map((W,ie)=>{var pe,le;return i.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[i.jsx("input",{type:"text",placeholder:"Parameter Name",value:W.name,onChange:je=>G(ie,"name",je.target.value),className:"lab-inventory-input"}),i.jsxs("select",{value:W.type,onChange:je=>G(ie,"type",je.target.value),className:"lab-inventory-input",children:[i.jsx("option",{value:"string",children:"Text"}),i.jsx("option",{value:"number",children:"Number"}),i.jsx("option",{value:"boolean",children:"Yes/No"})]}),W.type==="boolean"?i.jsxs("select",{value:W.defaultValue.toString(),onChange:je=>G(ie,"defaultValue",je.target.value==="true"),className:"lab-inventory-input",children:[i.jsx("option",{value:"true",children:"Reactive"}),i.jsx("option",{value:"false",children:"Non-reactive"})]}):i.jsx("input",{type:W.type==="number"?"number":"text",placeholder:"Default Value",value:W.defaultValue.toString(),onChange:je=>G(ie,"defaultValue",je.target.value),className:"lab-inventory-input"}),W.type==="number"&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"number",placeholder:"Lower Limit",value:W.lower_limit===null?"":((pe=W.lower_limit)==null?void 0:pe.toString())??"",onChange:je=>G(ie,"lower_limit",je.target.value),className:"lab-inventory-input"}),i.jsx("input",{type:"number",placeholder:"Upper Limit",value:W.upper_limit===null?"":((le=W.upper_limit)==null?void 0:le.toString())??"",onChange:je=>G(ie,"upper_limit",je.target.value),className:"lab-inventory-input"}),i.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:W.unit||"",onChange:je=>G(ie,"unit",je.target.value),className:"lab-inventory-input"})]}),i.jsx("button",{type:"button",onClick:()=>fe(ie),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},ie)}),i.jsx("button",{type:"button",onClick:B,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[i.jsx("button",{type:"button",onClick:Ne,className:"lab-inventory-button lab-inventory-button-secondary",disabled:re,children:"Cancel"}),i.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:re,children:y?"Saving...":"Add Test"})]})]})]}),re&&!L?i.jsxs("div",{className:"overflow-x-auto",children:[i.jsx("div",{className:"mb-4 flex gap-2",children:[1,2,3,4,5].map(W=>i.jsx(ee,{width:100,height:36},W))}),i.jsxs("table",{className:"lab-inventory-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{className:"hidden md:table-cell",children:"Description"}),i.jsx("th",{children:"Price"}),i.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),i.jsx("tbody",{children:[1,2,3,4,5].map(W=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:"60%",height:20})}),i.jsx("td",{className:"hidden md:table-cell",children:i.jsx(ee,{width:"90%",height:20})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("td",{style:{textAlign:"right"},children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(ee,{width:40,height:20}),i.jsx(ee,{width:50,height:20})]})})]},W))})]}),i.jsx("p",{className:"loading-text mt-2 text-sm italic text-gray-500",children:w?"Importing Excel data...":E?"Importing default data...":"Loading tests..."})]}):null,!re&&X.length===0&&!x&&!T&&!I&&i.jsx("p",{className:"no-data-message",children:f?`No lab tests found matching "${f}".`:"No lab tests found. Add one or import from Excel to get started."}),o&&X.length>0?i.jsx(Kb,{columns:[{key:"name",label:"Test Name",editable:!0,type:"text"},{key:"description",label:"Description",editable:!0,type:"text"},{key:"price",label:"Price",editable:!0,type:"number"}],data:X,editable:!0,showRowNumbers:!0,title:"Lab Test Inventory",onSave:async W=>{const ie=W.map(async pe=>{const le=c.find(je=>je.id===pe.id);if(le&&(le.name!==pe.name||le.price!==pe.price||le.description!==pe.description))return ce(`/api/lab-tests/${pe.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)})});try{await Promise.all(ie),K()}catch(pe){alert("Error saving changes"),console.error(pe)}}}):!re&&X.length>0&&i.jsxs("div",{className:"overflow-x-auto",children:[" ",i.jsxs("table",{className:"lab-inventory-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",i.jsx("th",{children:"Price"}),i.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),i.jsx("tbody",{children:X.map(W=>{const ie=V===W.id,pe=W.price&&typeof W.price=="string"?parseFloat(W.price):NaN,le=isNaN(pe)?"0.00":pe.toFixed(2);return i.jsxs(ye.Fragment,{children:[i.jsxs("tr",{onClick:()=>xe(W),style:{cursor:"pointer"},children:[i.jsx("td",{children:W.name}),i.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:W.description||"-"}),i.jsxs("td",{children:["",le]}),i.jsx("td",{style:{textAlign:"right"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[i.jsx("button",{onClick:je=>{je.stopPropagation(),xe(W)},className:"lab-inventory-link",disabled:re,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),i.jsx("button",{onClick:je=>{je.stopPropagation(),Ie(W.id)},className:"lab-inventory-link",disabled:re,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),r.length>0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,style:{padding:"0 15px 15px 15px",borderTop:"none"},children:i.jsx("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",borderRadius:"4px",display:"flex",flexWrap:"wrap",gap:"15px"},children:r.map(je=>{var Ge;return i.jsxs("div",{style:{fontSize:"0.9em"},children:[i.jsxs("strong",{style:{color:"#555"},children:[je.label,":"]})," ",(Ge=W.custom_fields)!=null&&Ge[je.key]?String(W.custom_fields[je.key]):"-"]},je.key)})})})}),ie&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,children:i.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[i.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),i.jsxs("form",{onSubmit:me,children:[i.jsxs("div",{className:"lab-inventory-form-group",children:[i.jsxs("label",{htmlFor:"name",children:["Test Name ",i.jsx("span",{style:{color:"red"},children:"*"})]}),i.jsx("input",{type:"text",id:"name",name:"name",value:Z.name,onChange:se,className:"lab-inventory-input",required:!0,disabled:re})]}),i.jsxs("div",{className:"lab-inventory-form-group",children:[i.jsx("label",{htmlFor:"description",children:"Description"}),i.jsx("textarea",{id:"description",name:"description",value:Z.description,onChange:se,rows:3,className:"lab-inventory-input",disabled:re})]}),i.jsxs("div",{className:"lab-inventory-form-group",children:[i.jsxs("label",{htmlFor:"price",children:["Price ",i.jsx("span",{style:{color:"red"},children:"*"})]}),i.jsx("input",{type:"number",id:"price",name:"price",value:Z.price,onChange:se,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:re})]}),i.jsxs("div",{className:"lab-inventory-form-group",children:[i.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),Z.default_parameters.map((je,Ge)=>{var et,ht;return i.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[i.jsx("input",{type:"text",placeholder:"Parameter Name",value:je.name,onChange:_e=>G(Ge,"name",_e.target.value),className:"lab-inventory-input"}),i.jsxs("select",{value:je.type,onChange:_e=>G(Ge,"type",_e.target.value),className:"lab-inventory-input",children:[i.jsx("option",{value:"string",children:"Text"}),i.jsx("option",{value:"number",children:"Number"}),i.jsx("option",{value:"boolean",children:"Yes/No"})]}),je.type==="boolean"?i.jsxs("select",{value:je.defaultValue.toString(),onChange:_e=>G(Ge,"defaultValue",_e.target.value==="true"),className:"lab-inventory-input",children:[i.jsx("option",{value:"true",children:"Reactive"}),i.jsx("option",{value:"false",children:"Non-reactive"})]}):i.jsx("input",{type:je.type==="number"?"number":"text",placeholder:"Default Value",value:je.defaultValue.toString(),onChange:_e=>G(Ge,"defaultValue",_e.target.value),className:"lab-inventory-input"}),je.type==="number"&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"number",placeholder:"Lower Limit",value:je.lower_limit===null?"":((et=je.lower_limit)==null?void 0:et.toString())??"",onChange:_e=>G(Ge,"lower_limit",_e.target.value),className:"lab-inventory-input"}),i.jsx("input",{type:"number",placeholder:"Upper Limit",value:je.upper_limit===null?"":((ht=je.upper_limit)==null?void 0:ht.toString())??"",onChange:_e=>G(Ge,"upper_limit",_e.target.value),className:"lab-inventory-input"}),i.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:je.unit||"",onChange:_e=>G(Ge,"unit",_e.target.value),className:"lab-inventory-input"})]}),i.jsx("button",{type:"button",onClick:()=>fe(Ge),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},Ge)}),i.jsx("button",{type:"button",onClick:B,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[i.jsx("button",{type:"button",onClick:Ne,className:"lab-inventory-button lab-inventory-button-secondary",disabled:re,children:"Cancel"}),i.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:re,children:y?"Saving...":"Update Test"})]})]})]})})})]},W.id)})})]})]}),i.jsx(fI,{isOpen:a,onClose:()=>s(!1),entityType:"lab_tests",entityLabel:"Lab Tests",currentConfig:t,onConfigUpdated:()=>{n()}})]})},w4e=e=>{let t="";if(!e.report_content)return"No report content available.";t+=`*Report Date:* ${e.report_date?new Date(e.report_date).toLocaleDateString():"N/A"}

`;try{const n=JSON.parse(e.report_content);typeof n=="object"&&n!==null&&e.tests?e.tests.forEach((r,a)=>{t+=`*Test: ${r.name}*
`,n[r.id]?Object.entries(n[r.id]).forEach(([s,o])=>{var f;const l=(f=r.default_parameters)==null?void 0:f.find(p=>p.name===s);let c=String(o),u="";if(l){const p=l.unit?` _${l.unit}_`:"";if(l.type==="boolean"){const y=o===!0||o==="true";c=y?"*Reactive*":"Non-Reactive",y||(u="`Normal: Non-Reactive`")}else if(l.type==="number"){const y=typeof o=="string"?parseFloat(o):typeof o=="number"?o:NaN;if(l.lower_limit!=null||l.upper_limit!=null){let v=[];l.lower_limit!=null&&v.push(`${l.lower_limit}`),l.upper_limit!=null&&v.push(`${l.upper_limit}`),u=`\`Normal: ${v.join(" - ")}\`${p}`,!isNaN(y)&&(l.lower_limit!=null&&y<l.lower_limit||l.upper_limit!=null&&y>l.upper_limit)&&(c=`*${c}*`)}}l.unit&&(c+=p)}t+=`${s}: ${c}
`,u&&((l==null?void 0:l.type)==="boolean"&&(o===!0||o==="true")||(t+=`${u}
`))}):t+=`_No parameters reported for this test._
`,a<e.tests.length-1&&(t+=`
`)}):t+=e.report_content}catch{t+=e.report_content}return t},mI=e=>{var o;if(!((o=e==null?void 0:e.Patient)!=null&&o.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(e!=null&&e.report_content)){alert("Cannot share report: No report content is available to share.");return}const t=e.Patient.name||"Patient",n=w4e(e),r=`Hello ${t},

Your lab report is ready.

${n}`,s=`https://wa.me/${S4e(e.Patient.phone)}?text=${encodeURIComponent(r)}`;window.open(s,"_blank")},S4e=e=>{let t=e.replace(/\D/g,"");const n=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,r=t.match(n);return r?t="91"+r[1]:t.startsWith("91")||(t="91"+t),t},wz=()=>{const[e,t]=j.useState([]),[n,r]=j.useState(""),[a,s]=j.useState(!0),[o,l]=j.useState(!0),[c,u]=j.useState(null),[f,p]=j.useState("orders"),[y,v]=j.useState(1),[x]=j.useState(20),[b,w]=j.useState(0),_=j.useMemo(()=>Math.ceil(b/x),[b,x]),T=j.useCallback(async(L=1,H="")=>{s(!0),u(null);try{const V=new URLSearchParams({page:String(L),limit:String(x)});H&&V.append("search",H);const ne=await ce(`/api/lab?${V.toString()}`);if(!ne.ok)throw new Error(`HTTP error! status: ${ne.status}`);const Z=await ne.json(),q=Z.orders.map(K=>{var se,G;return{id:K.id,labTokenNumber:String(K.lab_token_number??"N/A"),patientName:((se=K.Patient)==null?void 0:se.name)||"N/A",patientId:K.patient_id,patientTokenNumber:String(((G=K.Patient)==null?void 0:G.patient_token_number)??"N/A"),tests:(K.tests||[]).map(B=>B.name||"Unknown Test"),date:gf(new Date(K.createdAt),"yyyy-MM-dd"),status:K.status,reportId:K.reportId,billId:K.billId}});t(q),w(Z.totalCount),v(L)}catch(V){console.error("Failed to fetch lab orders:",V),u(V instanceof Error?V.message:"An unknown error occurred"),t([]),w(0)}finally{s(!1),l(!1)}},[x]);j.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${y}, Search term: "${n}"`),n.length===0||n.length>=2?(console.log(`Condition met (length ${n.length}). Fetching orders...`),T(y,n)):console.log(`Condition not met (length ${n.length}). Not fetching.`)},[T,y,n]),j.useEffect(()=>{const L=setTimeout(()=>{n.length>=2?y!==1&&v(1):n.length<2&&y!==1&&v(1)},1e3);return()=>{clearTimeout(L)}},[n]);const C=async(L,H)=>{console.log(`Updating order ${L} to status ${H}`);try{const V=await ce(`/api/lab/${L}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:H})});if(!V.ok){const ne=await V.json();throw new Error(ne.message||`Failed to update status: ${V.status}`)}if(H==="completed"){const ne=await ce(`/api/lab/orders/${L}/report`);if(ne.ok){const Z=await ne.json();mI(Z)}}await T(y,n),console.log(`Order ${L} status updated to ${H}, refetching page ${y}`)}catch(V){console.error("Error updating status:",V),alert(`Failed to update status: ${V instanceof Error?V.message:"Unknown error"}`)}},{openCommandBar:O}=Pc(),E=Mt(),P=L=>{if(!L){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}L.billId?(console.log(`Navigating to existing bill for Bill ID: ${L.billId}, Patient: ${L.patientName}`),E("/billing",{state:{billId:L.billId,patientId:L.patientId,patientName:L.patientName,billType:"lab"}})):(console.log(`Navigating to LabBillingPage for Order ID: ${L.id}`),E(`/dashboard/lab-billing/${L.id}`))},I=L=>{L&&L.id?E(`/lab/report/${L.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},F=L=>{switch(L){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:L,className:"status-badge"}}};if(a&&o)return i.jsxs("div",{className:"admin-panel-container",children:[i.jsx("div",{className:"admin-nav-bar",children:[1,2,3,4].map(L=>i.jsx(ee,{width:100,height:40,style:{borderRadius:"8px",margin:"0 8px"}},L))}),i.jsxs("div",{className:"admin-content-section",style:{padding:"20px"},children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx(ee,{width:200,height:32}),i.jsx(ee,{width:300,height:40})]}),i.jsx("div",{className:"lab-orders-table-container",children:i.jsxs("table",{className:"lab-inventory-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:150,height:20})})]})}),i.jsx("tbody",{children:[1,2,3,4,5].map(L=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:120,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:180,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})}),i.jsx("td",{children:i.jsx(ee,{width:150,height:32})})]},L))})]})})]})]});if(c)return i.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[i.jsx(Wr,{size:48,className:"mb-4"}),i.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),i.jsx("p",{className:"mb-4",children:c}),i.jsx("button",{onClick:()=>T(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const $=()=>{y>1&&v(L=>L-1)},z=()=>{y<_&&v(L=>L+1)};return i.jsxs("div",{className:"admin-panel-container",children:[i.jsxs("div",{className:"admin-nav-bar",children:[i.jsxs("button",{onClick:()=>E(-1),className:"admin-nav-button",title:"Back",children:[i.jsx(rn,{})," Back"]}),i.jsxs("button",{onClick:()=>p("orders"),className:`admin-nav-button ${f==="orders"?"active":""}`,children:[i.jsx(Wk,{})," Orders"]}),i.jsx("button",{onClick:()=>E("/create-lab-order"),className:"admin-nav-button",children:"Create New Lab Order"}),i.jsxs("button",{onClick:()=>p("inventory"),className:`admin-nav-button ${f==="inventory"?"active":""}`,children:[i.jsx(FX,{})," Inventory"]}),i.jsxs("button",{onClick:()=>O(),className:"admin-nav-button",children:[i.jsx(bD,{})," Newton's AI"]})]}),i.jsx("div",{className:"admin-content-section",children:i.jsxs("main",{className:"flex-1 overflow-y-auto",style:{padding:"15px"},children:[f==="orders"&&i.jsxs("div",{className:"lab-orders-view",children:[" ",i.jsxs("div",{className:"lab-orders-header-controls",children:[i.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),i.jsxs("div",{className:"lab-orders-search-container",children:[i.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:n,onChange:L=>r(L.target.value),className:"lab-inventory-input lab-orders-search-input"}),i.jsx(Un,{size:18,className:"lab-orders-search-icon"})]})]}),i.jsx("div",{className:"lab-orders-table-container",children:i.jsxs("table",{className:"lab-inventory-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Patient (Token)"}),i.jsx("th",{children:"Tests"}),i.jsx("th",{className:"hidden md:table-cell",children:"Date"}),i.jsx("th",{children:"Status"}),i.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),i.jsxs("tbody",{children:[a&&!c&&e.length===0&&[1,2,3,4,5].map(L=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:120,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:180,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})}),i.jsx("td",{children:i.jsx(ee,{width:150,height:32})})]},L)),!a&&!c&&e.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."})}),!a&&!c&&e.map(L=>{const H=F(L.status);return i.jsxs("tr",{children:[i.jsxs("td",{children:[i.jsx("div",{children:L.patientName}),i.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",L.patientTokenNumber]})]}),i.jsx("td",{children:L.tests.map((V,ne)=>i.jsx("div",{children:V},ne))}),i.jsx("td",{className:"hidden md:table-cell",children:L.date}),i.jsx("td",{children:i.jsx("span",{className:H.className,children:H.text})}),i.jsx("td",{children:i.jsxs("div",{className:"lab-table-actions",children:[L.status==="pending"&&i.jsx("button",{onClick:()=>P(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&i.jsx("button",{onClick:()=>C(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&i.jsx("button",{onClick:()=>C(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&i.jsx("button",{onClick:()=>I(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&i.jsx("button",{onClick:()=>C(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&i.jsx("button",{onClick:()=>{L.id?E(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},L.id)})]})]})}),i.jsxs("div",{className:"lab-orders-card-container",children:[a&&!c&&e.length===0&&i.jsx("div",{className:"space-y-4",children:[1,2,3].map(L=>i.jsx("div",{className:"lab-order-card",children:i.jsx(ee,{width:"100%",height:150})},L))}),!a&&!c&&e.length===0&&i.jsx("div",{className:"text-center py-10",children:n?`No lab orders found matching "${n}".`:"No lab orders available."}),!a&&!c&&e.map(L=>{const H=F(L.status);return i.jsxs("div",{className:"lab-order-card",children:[i.jsxs("div",{className:"lab-card-header",children:[i.jsxs("div",{children:[i.jsx("div",{className:"lab-card-patient-name",children:L.patientName}),i.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",L.patientTokenNumber]}),i.jsx("div",{className:"lab-card-date",children:L.date})]}),i.jsx("span",{className:`${H.className} lab-card-status-pill`,children:H.text})]}),i.jsxs("div",{className:"lab-card-section",children:[i.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),L.tests.map((V,ne)=>i.jsx("div",{className:"lab-card-test-item",children:V},ne)),L.tests.length===0&&i.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),i.jsxs("div",{className:"lab-card-actions",children:[L.status==="pending"&&i.jsx("button",{onClick:()=>P(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&i.jsx("button",{onClick:()=>C(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&i.jsx("button",{onClick:()=>C(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&i.jsx("button",{onClick:()=>I(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&i.jsx("button",{onClick:()=>C(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&i.jsx("button",{onClick:()=>{L.id?E(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},L.id)})]}),!a&&b>0&&i.jsxs("div",{className:"lab-pagination-controls",children:[i.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",i.jsx("strong",{children:(y-1)*x+1})," ","to"," ",i.jsx("strong",{children:Math.min(y*x,b)})," ","of"," ",i.jsx("strong",{children:b})," ","results"]}),i.jsxs("div",{className:"lab-pagination-buttons",children:[i.jsx("button",{onClick:$,disabled:y===1,className:"lab-pagination-button","aria-label":"Previous page",children:i.jsx(Lb,{size:18})}),i.jsxs("span",{children:["Page ",y," of ",_]}),i.jsx("button",{onClick:z,disabled:y===_,className:"lab-pagination-button","aria-label":"Next page",children:i.jsx(md,{size:18})})]})]})]}),f==="inventory"&&i.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",i.jsx(pI,{})]})]})})," "]})},Sz=()=>{const[e,t]=j.useState([]),[n,r]=j.useState(""),[a,s]=j.useState(!0),[o,l]=j.useState(null),c=Mt(),u=j.useRef(null),{openCommandBar:f}=Pc(),p=ns(),y=F=>{F&&(p.prefetchQuery({queryKey:Vt.patients.context(F),queryFn:async()=>{const $=await ce(`/api/patients/${F}/context`);if(!$.ok)throw new Error("Failed to fetch patient context");return $.json()},staleTime:5*60*1e3}),p.prefetchQuery({queryKey:Vt.patientDebts.balance(F),queryFn:async()=>{const $=await ce(`/api/patient-debts/${F}/balance`);return $.ok?$.json():{netDebt:0}},staleTime:1*60*1e3}),p.prefetchQuery({queryKey:Vt.queue.latest(F),queryFn:async()=>{const $=await ce(`/api/queue/patient/${F}/latest`);if(!$.ok)throw new Error("Failed to fetch latest queue status");const z=await $.json();return z!=null&&z._id&&p.prefetchQuery({queryKey:Vt.queue.entry(z._id),queryFn:async()=>{const L=await ce(`/api/queue/doctor/complaint/${z._id}`);if(!L.ok)throw new Error("Failed to fetch complaint record");return L.json()},staleTime:1*60*1e3}),z},staleTime:5e3}),p.prefetchQuery({queryKey:Vt.dental.records(F),queryFn:async()=>{const $=await ce(`/api/dental/patient/${F}`);if(!$.ok)throw new Error("Failed to fetch dental records");return $.json()},staleTime:5*60*1e3}))},[v,x]=j.useState(1),[b,w]=j.useState(1),_=10,T=j.useCallback(async(F,$,z)=>{s(!0),l(null);try{let L=`/api/pharmacy-orders?page=${F}&limit=${$}`;z&&z.trim()!==""&&(L+=`&search=${encodeURIComponent(z.trim())}`);const H=await ce(L);if(!H.ok)throw new Error(`Failed to fetch orders: ${H.statusText} (${H.status})`);const V=await H.json();V&&Array.isArray(V.orders)?(t(V.orders),w(V.totalPages||1),x(V.currentPage||F)):t([])}catch(L){console.error("Failed to fetch pharmacy orders:",L),l(L.message||"Failed to fetch orders."),t([])}finally{s(!1)}},[]);j.useEffect(()=>(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{T(n?1:v,_,n)},500),()=>{u.current&&clearTimeout(u.current)}),[n,v,T]);const C=F=>c(`/dashboard/edit-pharmacy-order/${F}`),O=F=>c(`/dashboard/edit-complaint/patient/${F.patientId}`),E=F=>{const $=e.find(z=>z.id===F);if($){const z=$.medications.map(L=>({name:L.name,pack_quantity:L.pack_quantity,loose_quantity:L.loose_quantity,price:L.price??0,pack_price:L.pack_price,loose_price:L.loose_price,total_price:L.total_price,isLoose:L.isLoose,unit:L.unit,drug_id:L.drug_id?String(L.drug_id):null,tabletsPerDay:L.tabletsPerDay,numberOfDays:L.numberOfDays,directions_to_use:L.directions_to_use,discount_percentage:0,batch:L.batch,expiry_date:L.expiry_date}));c(`/dashboard/pharmacy-billing/${F}`,{state:{initialItems:z}})}},P=async(F,$)=>{const z=e.find(L=>L.id===F);if(z)try{const L=await ce(`/api/pharmacy-orders/${F}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:$,medications:z.medications})});if(L.ok){const H=await L.json();t(V=>V.map(ne=>ne.id===H.id?{...ne,status:H.status}:ne))}}catch(L){console.error("Status update failed",L),alert("Failed to update status")}},I=F=>`pq-pill ${F}`;return i.jsxs("div",{className:"pq-container",children:[i.jsxs("div",{className:"pq-header",children:[i.jsxs("div",{className:"pq-nav-actions",children:[i.jsxs("button",{onClick:()=>c("/dashboard/add-order"),className:"pq-btn",children:[i.jsx(ws,{})," Add Order"]}),i.jsxs("button",{onClick:()=>c("/dashboard/inventory"),className:"pq-btn",children:[i.jsx(jf,{})," Inventory"]}),i.jsxs("button",{onClick:()=>f(),className:"pq-btn",children:[i.jsx(bD,{})," Newton's AI"]}),i.jsxs("button",{onClick:()=>c("/dashboard/distributors"),className:"pq-btn",children:[i.jsx(jf,{})," Distributors"]})]}),i.jsxs("div",{className:"pq-search-wrap",children:[i.jsx(Un,{className:"pq-search-icon"}),i.jsx("input",{className:"pq-search-input",placeholder:"Search orders...",value:n,onChange:F=>r(F.target.value)})]})]}),i.jsxs("div",{className:"pq-card",children:[i.jsxs("div",{className:"pq-card-content",children:[a&&e.length===0&&i.jsx("div",{className:"p-4 space-y-2",children:[1,2,3].map(F=>i.jsx(ee,{height:40,className:"mb-2"},F))}),o&&i.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]}),!a&&!o&&e.length===0&&i.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."}),!a&&e.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"pq-table-wrapper",children:i.jsxs("table",{className:"pq-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Patient"}),i.jsx("th",{children:"Medications"}),i.jsx("th",{children:"Date"}),i.jsx("th",{children:"Total"}),i.jsx("th",{children:"Status"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:e.map(F=>i.jsxs("tr",{className:"pq-row",onClick:()=>O(F),onMouseEnter:()=>y(F.patientId),children:[i.jsxs("td",{children:[i.jsx("div",{className:"pq-text-bold",children:F.patientName}),i.jsxs("div",{className:"pq-text-sm",children:["#",F.patientTokenNumber]})]}),i.jsx("td",{children:i.jsxs("div",{className:"pq-nested-table-wrap",children:[i.jsx("table",{className:"pq-nested-table",children:i.jsx("tbody",{children:F.medications.map(($,z)=>i.jsxs("tr",{children:[i.jsx("td",{className:"pq-text-bold",children:$.name}),i.jsxs("td",{children:[$.pack_quantity>0&&`Pack: ${$.pack_quantity} `,$.loose_quantity>0&&`Loose: ${$.loose_quantity}`]}),i.jsx("td",{className:"pq-text-sm",children:$.directions_to_use})]},z))})}),F.prescriptionForUnavailableDrugs&&i.jsxs("div",{className:"mt-1 text-xs opacity-75 pq-markdown",children:[i.jsx("strong",{children:"Note:"})," ",i.jsx(Sf,{remarkPlugins:[Nf],children:F.prescriptionForUnavailableDrugs})]})]})}),i.jsx("td",{className:"pq-text-sm",children:new Date(F.date).toLocaleDateString()}),i.jsxs("td",{className:"pq-text-mono pq-text-bold",children:["",Number(F.order_total||0).toFixed(2)]}),i.jsx("td",{children:i.jsx("span",{className:I(F.status),children:F.status})}),i.jsx("td",{children:i.jsxs("div",{className:"pq-actions",children:[F.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:$=>{$.stopPropagation(),C(F.id)},className:"pq-action-btn pq-btn-edit",children:[i.jsx(Pa,{size:12})," Edit"]}),i.jsxs("button",{onClick:$=>{$.stopPropagation(),E(F.id)},className:"pq-action-btn pq-btn-bill",children:[i.jsx(xf,{size:12})," Bill"]})]}),F.status==="billed"&&i.jsxs("button",{onClick:$=>{$.stopPropagation(),P(F.id,"dispensed")},className:"pq-action-btn pq-btn-dispense",children:[i.jsx(Dl,{size:12})," Dispense"]}),(F.status==="pending"||F.status==="billed")&&i.jsx("button",{onClick:$=>{$.stopPropagation(),P(F.id,"cancelled")},className:"pq-action-btn pq-btn-cancel",children:"Cancel"}),i.jsx("button",{onClick:$=>{$.stopPropagation(),O(F)},onMouseEnter:()=>y(F.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})]})})]},F.id))})]})}),i.jsx("div",{className:"pq-card-list",children:e.map(F=>i.jsxs("div",{className:"pq-mobile-card",onClick:()=>O(F),onMouseEnter:()=>y(F.patientId),children:[i.jsxs("div",{className:"pq-card-header",children:[i.jsxs("div",{children:[i.jsx("div",{className:"pq-text-bold",children:F.patientName}),i.jsxs("div",{className:"pq-text-sm",children:["#",F.patientTokenNumber]})]}),i.jsx("span",{className:I(F.status),children:F.status})]}),i.jsx("div",{className:"mb-2",children:F.medications.slice(0,3).map(($,z)=>i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[$.name," (",$.pack_quantity>0?`${$.pack_quantity}p`:""," ",$.loose_quantity>0?`${$.loose_quantity}l`:"",")"]},z))}),i.jsxs("div",{className:"flex justify-between items-center mt-2",children:[i.jsxs("div",{className:"pq-text-mono pq-text-bold",children:["",Number(F.order_total||0).toFixed(2)]}),i.jsx("div",{className:"pq-actions",children:i.jsx("button",{onClick:$=>{$.stopPropagation(),O(F)},onMouseEnter:()=>y(F.patientId),className:"pq-action-btn pq-btn-details",children:"Details"})})]})]},F.id))})]})]}),!a&&b>1&&i.jsxs("div",{className:"pq-footer px-4 pb-4",children:[i.jsxs("div",{className:"pq-page-info",children:["Page ",v," of ",b]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"pq-pagination-btn",disabled:v===1,onClick:()=>x(F=>Math.max(1,F-1)),children:i.jsx(Lb,{size:16})}),i.jsx("button",{className:"pq-pagination-btn",disabled:v===b,onClick:()=>x(F=>Math.min(b,F+1)),children:i.jsx(md,{size:16})})]})]})]})]})},mk=10,N4e=3,_W=({isEmbedded:e=!1,initialSearch:t=""})=>{const n=Mt(),{customColumnsConfig:r,refetch:a}=EN(),s=r.drugs||[],[o,l]=j.useState(!1),[c,u]=j.useState(!1),[f,p]=j.useState([]),[y,v]=j.useState([]),[x,b]=j.useState(t),[w,_]=j.useState(!0),[T,C]=j.useState(null),[O,E]=j.useState(new Set),[P,I]=j.useState("all"),F=async()=>{try{const Ee=await ce("/api/inventory/download-csv");if(!Ee.ok)throw new Error(`Failed to download CSV: ${Ee.statusText}`);const at=await Ee.blob(),Tt=window.URL.createObjectURL(at),Re=document.createElement("a");Re.href=Tt,Re.download="pharmacy_inventory.csv",document.body.appendChild(Re),Re.click(),Re.remove(),window.URL.revokeObjectURL(Tt)}catch(Ee){console.error("Failed to download CSV:",Ee),C(Ee.message||"Failed to download inventory CSV. Please try again.")}},[$,z]=j.useState(!1),[L,H]=j.useState(!1),[V,ne]=j.useState(null),[Z,q]=j.useState(!1),[K,se]=j.useState(new Set),[G,B]=j.useState(1),fe=8,[me,Y]=j.useState(null),[xe,Ie]=j.useState(0),[Ne,ke]=j.useState(!1),[de,Q]=j.useState(null),[oe,re]=j.useState(1),[ae,X]=j.useState(!1),W=G*fe,ie=W-fe,pe=y.slice(ie,W),le=Math.ceil(y.length/fe);j.useEffect(()=>{B(1)},[x,P]);const je=j.useCallback(async()=>{_(!0),C(null);try{const Ee=await ce("/api/drugs");if(!Ee.ok)throw new Error(`Failed to fetch drugs: ${Ee.statusText} (${Ee.status})`);const at=await Ee.json();let Tt=Array.isArray(at)?at:at.drugs||[];Tt=Tt.map(Re=>({...Re,mrp:parseFloat(String(Re.mrp))||0,rate:Re.rate!==null&&Re.rate!==void 0?parseFloat(String(Re.rate)):null,stock:parseInt(String(Re.stock),10)||0,gst:Re.gst!==null&&Re.gst!==void 0?parseFloat(String(Re.gst)):null,margin:Re.margin!==null&&Re.margin!==void 0?parseFloat(String(Re.margin)):null,discount:Re.discount!==null&&Re.discount!==void 0?parseFloat(String(Re.discount)):null})),p(Tt),v(Tt)}catch(Ee){console.error("Failed to fetch drugs:",Ee),C(Ee.message||"Failed to load inventory. Please try again.")}finally{_(!1)}},[]);j.useEffect(()=>{je()},[je]),j.useEffect(()=>{t&&b(t)},[t]);const Ge=j.useMemo(()=>new Zs(f,{keys:["name","brand_name","description","supplier","box_number"],threshold:.3,ignoreLocation:!0}),[f]);j.useEffect(()=>{let Ee=f;x&&(Ee=Ge.search(x).map(Re=>Re.item));const at=new Date,Tt=nRe(at,N4e);P==="low-stock"?Ee=Ee.filter(Re=>Re.stock<=mk):P==="near-expiry"?Ee=Ee.filter(Re=>{if(!Re.expiry_date)return!1;const vt=jz(Re.expiry_date);return tD(vt)&&fk(vt,Tt)&&!fk(vt,at)}):P==="expired"&&(Ee=Ee.filter(Re=>{if(!Re.expiry_date)return!1;const vt=jz(Re.expiry_date);return tD(vt)&&fk(vt,at)})),v(Ee)},[x,f,P,Ge]);const et=()=>{z(!1),Y(null)},ht=Ee=>{Ie(parseInt(Ee.target.value,10)||0)},_e=async Ee=>{if(Ee.preventDefault(),C(null),!me||!me.id||xe===0){C("No drug selected or adjustment amount is zero.");return}try{const at=await ce(`/api/drugs/${me.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:xe})});if(!at.ok){const Re=await at.json();throw new Error(Re.message||`Failed to adjust stock: ${at.statusText}`)}const Tt=await at.json();p(Re=>Re.map(vt=>vt.id===Tt.id?Tt:vt)),et()}catch(at){console.error("Failed to adjust stock:",at),C(at.message||"Failed to adjust stock. Please try again.")}},Fe=Ee=>{ne(Ee),H(!0)},Ye=()=>{H(!1),ne(null)},Ke=async()=>{if(!V||!V.id){C("No drug selected for deletion.");return}_(!0),C(null);try{const Ee=await ce(`/api/drugs/${V.id}`,{method:"DELETE"});if(!Ee.ok){const at=await Ee.json();throw new Error(at.message||`Failed to delete drug: ${Ee.statusText}`)}je(),Ye()}catch(Ee){console.error("Failed to delete drug:",Ee),C(Ee.message||"Failed to delete drug. Please try again.")}finally{_(!1)}},be=()=>{q(!0)},De=()=>{q(!1)},[we,ve]=j.useState(!1),Ce=()=>{K.size>0&&ve(!0)},nt=()=>{ve(!1)},Ve=async()=>{if(K.size===0){C("No drugs selected for deletion.");return}_(!0),C(null);try{const Ee=await ce("/api/drugs/batch-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({drugIds:Array.from(K)})});if(!Ee.ok){const at=await Ee.json();throw new Error(at.message||`Failed to delete selected drugs: ${Ee.statusText}`)}je(),se(new Set),nt()}catch(Ee){console.error("Failed to delete selected drugs:",Ee),C(Ee.message||"Failed to delete selected drugs. Please try again.")}finally{_(!1)}},dt=async()=>{_(!0),C(null);try{const Ee=await ce("/api/drugs/all",{method:"DELETE"});if(!Ee.ok){const at=await Ee.json();throw new Error(at.message||`Failed to delete all drugs: ${Ee.statusText}`)}je(),De()}catch(Ee){console.error("Failed to delete all drugs:",Ee),C(Ee.message||"Failed to delete all drugs. Please try again.")}finally{_(!1)}},Ct=Ee=>{if(!Ee)return null;const at=Ee.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return at?parseInt(at[1],10):null},kt=Ee=>{Q(Ee),re(1),ke(!0)},ze=()=>{ke(!1),Q(null),re(1)},Xe=Ee=>{re(parseInt(Ee.target.value,10)||0)},Je=async Ee=>{if(Ee.preventDefault(),C(null),!de||!de.id||oe<=0){C("No drug selected or invalid number of packs to convert.");return}const at=Ct(de.pack);if(!at||at<=0){C(`Cannot convert "${de.name}" to loose. Invalid pack unit: ${de.pack||"N/A"}.`);return}if(oe>(de.stock??0)){C(`Cannot convert ${oe} packs. Only ${de.stock??0} packs are in stock.`);return}try{const Tt=await ce(`/api/drugs/${de.id}/convert-to-loose`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({packsToConvert:oe,packSize:at})});if(!Tt.ok){const vt=await Tt.json();throw new Error(vt.message||`Failed to convert to loose: ${Tt.statusText}`)}const Re=await Tt.json();p(vt=>vt.map(It=>It.id===Re.id?Re:It)),ze()}catch(Tt){console.error("Failed to convert to loose:",Tt),C(Tt.message||"Failed to convert to loose. Please try again.")}finally{_(!1)}},wt=()=>{X(!0)},Pt=()=>{X(!1)},dn=async()=>{_(!0),C(null);try{const Ee=await ce("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!Ee.ok){const at=await Ee.json();throw new Error(at.message||`Failed to add default medications: ${Ee.statusText}`)}je(),Pt()}catch(Ee){console.error("Failed to add default medications:",Ee),C(Ee.message||"Failed to add default medications. Please try again.")}finally{_(!1)}};return w?i.jsxs("div",{className:`pharmacy-inventory-page ${e?"embedded":""}`,style:e?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[i.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:i.jsxs("div",{className:"inventory-actions-group",children:[i.jsx("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[1,2,3,4].map(Ee=>i.jsx(ee,{width:120,height:36},Ee))}),i.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[i.jsx(ee,{width:100,height:36}),[1,2,3,4].map(Ee=>i.jsx(ee,{width:120,height:36},Ee))]})]})}),i.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[i.jsx(ee,{width:"100%",height:40,style:{maxWidth:"600px"}}),i.jsx(ee,{width:150,height:40})]}),i.jsx("div",{className:"inventory-table-container",children:i.jsxs("table",{className:"inventory-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"checkbox-column",children:i.jsx(ee,{width:20,height:20})}),i.jsx("th",{children:"DRUG DETAILS"}),i.jsx("th",{children:"PACK"}),i.jsx("th",{children:"EXPIRY"}),i.jsx("th",{className:"qty-header",children:"STOCK"}),i.jsx("th",{className:"mrp-header",children:"MRP"}),i.jsx("th",{className:"rate-header",children:"RATE"}),i.jsx("th",{children:"BOX"}),i.jsx("th",{children:"DISC %"}),i.jsx("th",{children:"MARGIN"}),i.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),i.jsx("tbody",{children:[1,2,3,4,5,6,7,8].map(Ee=>i.jsxs("tr",{children:[i.jsx("td",{className:"checkbox-cell",children:i.jsx(ee,{width:20,height:20})}),i.jsxs("td",{children:[i.jsx(ee,{width:"80%",height:20}),i.jsx(ee,{width:"40%",height:14,style:{marginTop:"4px"}})]}),i.jsx("td",{children:i.jsx(ee,{width:60,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsxs("td",{children:[i.jsx(ee,{width:40,height:20}),i.jsx(ee,{width:60,height:14,style:{marginTop:"4px"}})]}),i.jsx("td",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:40,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:60,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:60,height:20})}),i.jsx("td",{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{width:20,height:20}),i.jsx(ee,{width:20,height:20}),i.jsx(ee,{width:20,height:20})]})})]},Ee))})]})})]}):T?i.jsxs("div",{className:"error-indicator",children:["Error: ",T]}):i.jsxs("div",{className:`pharmacy-inventory-page ${e?"embedded":""}`,style:e?{minHeight:"auto",padding:"0",background:"transparent"}:{},children:[i.jsx("div",{className:"inventory-header-controls",style:{padding:"20px 20px 0 20px"},children:i.jsxs("div",{className:"inventory-actions-group",children:[i.jsxs("div",{className:"action-group-left",style:{display:"flex",gap:"12px"},children:[i.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline add-drug-button",children:[i.jsx(ws,{size:18}),"Add New Drug"]}),i.jsxs("button",{onClick:()=>n("/dashboard/purchase"),className:"action-button-outline",children:[i.jsx(ws,{size:18}),"Purchase Page"]}),i.jsxs("button",{onClick:()=>n("/dashboard/distributors"),className:"action-button-outline",children:[i.jsx(ws,{size:18}),"Distributors"]}),i.jsxs("button",{onClick:()=>l(!0),className:"action-button-outline",title:"Manage Custom Columns",children:[i.jsx(dd,{size:18}),"Columns"]})]}),i.jsxs("div",{className:"action-group-right",style:{display:"flex",gap:"12px"},children:[i.jsxs("div",{className:"view-mode-toggle",children:[i.jsxs("button",{onClick:()=>u(!1),className:`view-mode-btn ${c?"":"active"}`,title:"List View",children:[i.jsx($b,{size:18})," List"]}),i.jsxs("button",{onClick:()=>u(!0),className:`view-mode-btn ${c?"active":""}`,title:"Excel Mode (Edit)",children:[i.jsx(bf,{size:18})," Excel"]})]}),i.jsx("button",{onClick:F,className:"action-button-outline",children:"Download CSV"}),i.jsxs("button",{onClick:wt,className:"action-button-outline",children:[i.jsx(ws,{size:18}),"Import Defaults"]}),i.jsxs("button",{onClick:Ce,className:"action-button-outline delete-button-outline",disabled:K.size===0,children:[i.jsx(zr,{size:18}),"Delete (",K.size,")"]}),i.jsxs("button",{onClick:be,className:"action-button-outline delete-all-button-outline",children:[i.jsx(zr,{size:18}),"Delete All"]})]})]})}),i.jsxs("div",{className:"search-bar-container",style:{padding:"0 20px 20px 20px",borderBottom:"1px solid var(--border-color)",marginBottom:"0"},children:[i.jsxs("div",{className:"search-input-wrapper",style:{maxWidth:"600px"},children:[i.jsx(Un,{size:20,className:"search-input-icon"}),i.jsx("input",{type:"text",placeholder:"Search drugs...",value:x,onChange:Ee=>b(Ee.target.value),className:"inventory-search-input"})]}),i.jsx("div",{className:"filter-dropdown-wrapper",children:i.jsxs("select",{value:P,onChange:Ee=>I(Ee.target.value),className:"inventory-filter-select",children:[i.jsx("option",{value:"all",children:"All Drugs"}),i.jsx("option",{value:"low-stock",children:"Low Stock"}),i.jsx("option",{value:"near-expiry",children:"Near Expiry"}),i.jsx("option",{value:"expired",children:"Expired"})]})})]}),c?i.jsx("div",{className:"inventory-table-container",style:{padding:"1rem"},children:i.jsx(Kb,{title:"Pharmacy Inventory",columns:[{key:"name",label:"Drug Name",type:"text",editable:!0},{key:"brand_name",label:"Brand Name",type:"text",editable:!0},{key:"pack",label:"Pack",type:"text",editable:!0},{key:"expiry_date",label:"Expiry",type:"date",editable:!0},{key:"stock",label:"Stock",type:"number",editable:!0},{key:"mrp",label:"MRP",type:"number",editable:!0},{key:"rate",label:"Rate",type:"number",editable:!0},{key:"box_number",label:"Box",type:"text",editable:!0},{key:"discount",label:"Discount %",type:"number",editable:!0},{key:"gst",label:"GST %",type:"number",editable:!0},{key:"supplier",label:"Supplier",type:"text",editable:!0}],data:y,onSave:async Ee=>{try{for(const at of Ee)at.id&&await ce(`/api/drugs/${at.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(at)});je()}catch(at){console.error("Failed to save:",at),C(at.message||"Failed to save changes")}},editable:!0,showRowNumbers:!0})}):i.jsx("div",{className:"inventory-table-container",children:i.jsxs("table",{className:"inventory-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"checkbox-column",children:i.jsx("input",{type:"checkbox",onChange:Ee=>{if(Ee.target.checked){const at=new Set(y.map(Tt=>Tt.id));se(at)}else se(new Set)},checked:K.size===y.length&&y.length>0,disabled:y.length===0})}),i.jsx("th",{className:"drug-name-header",children:"DRUG DETAILS"}),i.jsx("th",{className:"pack-header",children:"PACK"}),i.jsx("th",{className:"expiry-header",children:"EXPIRY"}),i.jsx("th",{className:"text-stock qty-header",children:"STOCK"}),i.jsx("th",{className:"text-price mrp-header",children:"MRP"}),i.jsx("th",{className:"text-cost rate-header",children:"RATE"}),i.jsx("th",{className:"box-number-header",children:"BOX"}),i.jsx("th",{className:"discount-header",children:"DISC %"}),i.jsx("th",{className:"margin-header",children:"MARGIN"}),i.jsx("th",{className:"actions-cell",children:"ACTIONS"})]})}),i.jsxs("tbody",{children:[y.length===0&&i.jsx("tr",{className:"no-results-message",children:i.jsx("td",{colSpan:11,children:"No drugs found matching your search."})}),pe.map(Ee=>i.jsxs(ye.Fragment,{children:[i.jsxs("tr",{className:"drug-row",onClick:()=>{const at=new Set(O);at.has(Ee.id)&&Ee.id!==void 0?at.delete(Ee.id):Ee.id!==void 0&&at.add(Ee.id),E(at)},children:[i.jsx("td",{className:"checkbox-cell",children:i.jsx("input",{type:"checkbox",onClick:at=>at.stopPropagation(),checked:K.has(Ee.id),onChange:()=>{const at=new Set(K);at.has(Ee.id)?at.delete(Ee.id):at.add(Ee.id),se(at)}})}),i.jsx("td",{className:"drug-name-cell",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:Ee.brand_name||Ee.name||"-"}),Ee.brand_name&&Ee.name&&Ee.brand_name!==Ee.name&&i.jsx("span",{className:"text-xs text-muted-foreground",style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:Ee.name})]})}),i.jsx("td",{className:"text-muted pack-cell",children:Ee.pack||"-"}),i.jsx("td",{className:"text-muted",children:Ee.expiry_date?new Date(Ee.expiry_date).toLocaleDateString("en-GB"):"-"}),i.jsxs("td",{className:`text-stock ${Ee.stock<=mk?"low-stock":""}`,children:[i.jsx("div",{style:{fontWeight:"bold"},children:Ee.stock}),i.jsx("div",{className:"loose-quantity",children:Ee.loose!==null&&Ee.loose!==void 0?`${Ee.loose} loose`:"0 loose"})]}),i.jsxs("td",{className:"text-muted text-price",children:["",typeof Ee.mrp=="number"?Ee.mrp.toFixed(2):"N/A"]}),i.jsx("td",{className:"text-muted text-cost",children:Ee.rate!==null&&Ee.rate!==void 0?`${Ee.rate.toFixed(2)}`:"-"}),i.jsx("td",{className:"text-muted",children:Ee.box_number||"-"}),i.jsx("td",{className:"text-muted",children:Ee.discount!==null&&Ee.discount!==void 0?`${Ee.discount.toFixed(2)}%`:"0.00%"}),i.jsx("td",{className:"text-muted",children:(()=>{const at=Ee.mrp||0,Tt=Ee.rate||0,Re=Ee.discount||0,vt=Ee.gst||0,ur=Tt*(1-Re/100)*(1+vt/100),pt=at-ur;return`${(at>0?pt/at*100:0).toFixed(2)}%`})()}),i.jsx("td",{className:"actions-cell",children:i.jsxs("div",{className:"actions-buttons-group",children:[i.jsx("button",{onClick:at=>{at.stopPropagation(),n(`/dashboard/inventory/edit/${Ee.id}`)},className:"action-icon-button",title:"Edit Drug",children:i.jsx(Pa,{size:16})}),i.jsx("button",{onClick:at=>{at.stopPropagation(),Fe(Ee)},className:"action-icon-button delete-button",title:"Delete Drug",children:i.jsx(zr,{size:16})}),i.jsx("button",{onClick:at=>{at.stopPropagation(),Y(Ee),z(!0)},className:"action-icon-button adjust-stock-button",title:"Adjust Stock",children:i.jsx(iR,{size:16})}),i.jsx("button",{onClick:at=>{at.stopPropagation(),kt(Ee)},className:"action-icon-button convert-to-loose-button",title:"Convert to Loose",disabled:!Ee.pack||Ct(Ee.pack)===null,children:i.jsx(cR,{size:16})})]})})]}),O.has(Ee.id)&&i.jsx("tr",{className:"collapsible-row",children:i.jsx("td",{colSpan:11,children:i.jsxs("div",{className:"collapsible-content",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Description:"})," ",Ee.description||"-"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Supplier:"})," ",Ee.supplier||"-"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Batch:"})," ",Ee.batch||"-"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"HSN Code:"})," ",Ee.hsn_code||"-"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"MFG:"})," ",Ee.mfg||"-"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Loose Price:"}),(()=>{const at=Ct(Ee.pack);return at&&at>0&&typeof Ee.mrp=="number"?`${(Ee.mrp/at).toFixed(2)}`:"N/A"})()]}),i.jsxs("p",{children:[i.jsx("strong",{children:"GST:"})," ",Ee.gst!==null&&Ee.gst!==void 0?`${Ee.gst.toFixed(2)}%`:"-"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Last Updated:"})," ",new Date(Ee.last_updated).toLocaleString()]}),s.length>0&&i.jsx("div",{className:"custom-fields-display",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px dashed var(--border-color)"},children:s.map(at=>{var Tt;return i.jsxs("p",{children:[i.jsxs("strong",{children:[at.label,":"]})," ",(Tt=Ee.custom_fields)!=null&&Tt[at.key]?String(Ee.custom_fields[at.key]):"-"]},at.key)})})]})})})]},Ee.id))]})]})}),i.jsx("div",{className:`inventory-grid-mobile ${e?"embedded":""}`,style:{display:c?"none":void 0},children:y.length===0?i.jsx("div",{className:"inventory-card-empty",children:"No drugs found matching your search."}):pe.map(Ee=>i.jsxs("div",{className:"inventory-card",onClick:()=>{const at=new Set(O);at.has(Ee.id)&&Ee.id!==void 0?at.delete(Ee.id):Ee.id!==void 0&&at.add(Ee.id),E(at)},children:[i.jsxs("div",{className:"inventory-card-header",children:[i.jsxs("div",{className:"inventory-card-drug-info",children:[i.jsx("h4",{className:"inventory-card-drug-name",children:Ee.brand_name||Ee.name||"-"}),Ee.brand_name&&Ee.name&&Ee.brand_name!==Ee.name&&i.jsx("div",{className:"inventory-card-brand-name",children:Ee.name})]}),i.jsx("div",{className:"inventory-card-checkbox",onClick:at=>at.stopPropagation(),children:i.jsx("input",{type:"checkbox",checked:K.has(Ee.id),onChange:()=>{const at=new Set(K);at.has(Ee.id)?at.delete(Ee.id):at.add(Ee.id),se(at)}})})]}),i.jsxs("div",{className:"inventory-card-body",children:[i.jsxs("div",{className:"inventory-card-field",children:[i.jsx("span",{className:"inventory-card-field-label",children:"Stock"}),i.jsxs("span",{className:`inventory-card-field-value stock-value ${Ee.stock<=mk?"stock-low":""}`,children:[Ee.stock,i.jsxs("span",{className:"inventory-card-loose",children:[" (",Ee.loose??0," loose)"]})]})]}),i.jsxs("div",{className:"inventory-card-field",children:[i.jsx("span",{className:"inventory-card-field-label",children:"MRP"}),i.jsxs("span",{className:"inventory-card-field-value price-value",children:["",typeof Ee.mrp=="number"?Ee.mrp.toFixed(2):"N/A"]})]}),i.jsxs("div",{className:"inventory-card-field",children:[i.jsx("span",{className:"inventory-card-field-label",children:"Pack"}),i.jsx("span",{className:"inventory-card-field-value",children:Ee.pack||"-"})]}),i.jsxs("div",{className:"inventory-card-field",children:[i.jsx("span",{className:"inventory-card-field-label",children:"Expiry"}),i.jsx("span",{className:"inventory-card-field-value",children:Ee.expiry_date?new Date(Ee.expiry_date).toLocaleDateString("en-GB"):"-"})]})]}),O.has(Ee.id)&&i.jsxs("div",{className:"inventory-card-expanded",children:[i.jsxs("div",{className:"inventory-card-expanded-row",children:[i.jsx("span",{className:"inventory-card-expanded-label",children:"Rate"}),i.jsx("span",{className:"inventory-card-expanded-value",children:Ee.rate!==null&&Ee.rate!==void 0?`${Ee.rate.toFixed(2)}`:"-"})]}),i.jsxs("div",{className:"inventory-card-expanded-row",children:[i.jsx("span",{className:"inventory-card-expanded-label",children:"Box"}),i.jsx("span",{className:"inventory-card-expanded-value",children:Ee.box_number||"-"})]}),i.jsxs("div",{className:"inventory-card-expanded-row",children:[i.jsx("span",{className:"inventory-card-expanded-label",children:"Supplier"}),i.jsx("span",{className:"inventory-card-expanded-value",children:Ee.supplier||"-"})]}),i.jsxs("div",{className:"inventory-card-expanded-row",children:[i.jsx("span",{className:"inventory-card-expanded-label",children:"Batch"}),i.jsx("span",{className:"inventory-card-expanded-value",children:Ee.batch||"-"})]}),i.jsxs("div",{className:"inventory-card-expanded-row",children:[i.jsx("span",{className:"inventory-card-expanded-label",children:"HSN Code"}),i.jsx("span",{className:"inventory-card-expanded-value",children:Ee.hsn_code||"-"})]}),i.jsxs("div",{className:"inventory-card-expanded-row",children:[i.jsx("span",{className:"inventory-card-expanded-label",children:"Discount"}),i.jsx("span",{className:"inventory-card-expanded-value",children:Ee.discount!==null&&Ee.discount!==void 0?`${Ee.discount.toFixed(2)}%`:"0.00%"})]}),i.jsxs("div",{className:"inventory-card-expanded-row",children:[i.jsx("span",{className:"inventory-card-expanded-label",children:"GST"}),i.jsx("span",{className:"inventory-card-expanded-value",children:Ee.gst!==null&&Ee.gst!==void 0?`${Ee.gst.toFixed(2)}%`:"-"})]}),s.length>0&&s.map(at=>{var Tt;return i.jsxs("div",{className:"inventory-card-expanded-row",children:[i.jsx("span",{className:"inventory-card-expanded-label",children:at.label}),i.jsx("span",{className:"inventory-card-expanded-value",children:(Tt=Ee.custom_fields)!=null&&Tt[at.key]?String(Ee.custom_fields[at.key]):"-"})]},at.key)})]}),i.jsxs("div",{className:"inventory-card-actions",onClick:at=>at.stopPropagation(),children:[i.jsxs("button",{className:"inventory-card-action-btn btn-edit",onClick:()=>n(`/dashboard/inventory/edit/${Ee.id}`),title:"Edit Drug",children:[i.jsx(Pa,{size:14}),"Edit"]}),i.jsxs("button",{className:"inventory-card-action-btn btn-delete",onClick:()=>Fe(Ee),title:"Delete Drug",children:[i.jsx(zr,{size:14}),"Delete"]}),i.jsxs("button",{className:"inventory-card-action-btn btn-adjust",onClick:()=>{Y(Ee),z(!0)},title:"Adjust Stock",children:[i.jsx(iR,{size:14}),"Adjust"]}),i.jsxs("button",{className:"inventory-card-action-btn btn-convert",onClick:()=>kt(Ee),title:"Convert to Loose",disabled:!Ee.pack||Ct(Ee.pack)===null,children:[i.jsx(cR,{size:14}),"Loose"]})]})]},Ee.id))}),le>1&&i.jsxs("div",{className:"pagination-controls",style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",backgroundColor:"var(--card-bg, #fff)",borderTop:"1px solid var(--border-color)"},children:[i.jsx("button",{onClick:()=>B(Ee=>Math.max(Ee-1,1)),disabled:G===1,className:"pagination-button",children:"Previous"}),i.jsxs("span",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Page ",G," of ",le]}),i.jsx("button",{onClick:()=>B(Ee=>Math.min(Ee+1,le)),disabled:G===le,className:"pagination-button",children:"Next"})]}),L&&V&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("button",{onClick:Ye,className:"modal-close-button",children:i.jsx(zt,{size:20})}),i.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),i.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',i.jsx("span",{className:"drug-name",children:V.name||"Unnamed Drug"}),'"? This action cannot be undone.']}),T&&i.jsx("div",{className:"modal-error-message",children:T}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{type:"button",onClick:Ye,className:"button-cancel",children:"Cancel"}),i.jsx("button",{type:"button",onClick:Ke,className:"button-delete",children:"Delete"})]})]})}),$&&me&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("button",{onClick:et,className:"modal-close-button",children:i.jsx(zt,{size:20})}),i.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),i.jsxs("p",{className:"modal-description",children:["Drug: ",i.jsx("span",{className:"drug-name",children:me.name||"Unnamed Drug"}),i.jsx("br",{}),"Current Stock: ",me.stock]}),T&&i.jsx("div",{className:"modal-error-message",children:T}),i.jsxs("form",{onSubmit:_e,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),i.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:xe===0?"":xe,onChange:ht,placeholder:"e.g., 10 or -5",className:"form-input"}),i.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{type:"button",onClick:et,className:"button-cancel",children:"Cancel"}),i.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),Z&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("button",{onClick:De,className:"modal-close-button",children:i.jsx(zt,{size:20})}),i.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),i.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",i.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),T&&i.jsx("div",{className:"modal-error-message",children:T}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{type:"button",onClick:De,className:"button-cancel",children:"Cancel"}),i.jsx("button",{type:"button",onClick:dt,className:"button-delete",children:"Delete All"})]})]})}),we&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("button",{onClick:nt,className:"modal-close-button",children:i.jsx(zt,{size:20})}),i.jsx("h3",{className:"modal-title",children:"Confirm Deletion of Selected Drugs"}),i.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",i.jsx("span",{className:"drug-name",children:K.size})," selected drug(s)? This action cannot be undone."]}),T&&i.jsx("div",{className:"modal-error-message",children:T}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{type:"button",onClick:nt,className:"button-cancel",children:"Cancel"}),i.jsx("button",{type:"button",onClick:Ve,className:"button-delete",children:"Delete Selected"})]})]})}),Ne&&de&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("button",{onClick:ze,className:"modal-close-button",children:i.jsx(zt,{size:20})}),i.jsx("h3",{className:"modal-title",children:"Convert to Loose"}),i.jsxs("p",{className:"modal-description",children:["Drug: ",i.jsx("span",{className:"drug-name",children:de.name||"Unnamed Drug"}),i.jsx("br",{}),"Pack Size: ",de.pack,i.jsx("br",{}),"Current Stock: ",de.stock," packs, ",de.loose??0," loose units."]}),T&&i.jsx("div",{className:"modal-error-message",children:T}),i.jsxs("form",{onSubmit:Je,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"packsToConvert",className:"form-label",children:"Packs to Convert"}),i.jsx("input",{type:"number",name:"packsToConvert",id:"packsToConvert",required:!0,step:"1",min:"1",max:de.stock,value:oe===0?"":oe,onChange:Xe,className:"form-input"}),i.jsxs("p",{className:"form-help-text",children:["Converting ",oe," pack(s) will add ",oe*(Ct(de.pack)||0)," loose units."]})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{type:"button",onClick:ze,className:"button-cancel",children:"Cancel"}),i.jsx("button",{type:"submit",className:"button-submit",children:"Convert"})]})]})]})}),ae&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("button",{onClick:Pt,className:"modal-close-button",children:i.jsx(zt,{size:20})}),i.jsx("h3",{className:"modal-title",children:"Confirm Add Default Medications"}),i.jsx("p",{className:"modal-description",children:"Are you sure you want to add default medications to the inventory? This will add a predefined set of common medications."}),T&&i.jsx("div",{className:"modal-error-message",children:T}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{type:"button",onClick:Pt,className:"button-cancel",children:"Cancel"}),i.jsx("button",{type:"button",onClick:dn,className:"button-submit",children:"Add Defaults"})]})]})}),i.jsx(fI,{isOpen:o,onClose:()=>l(!1),entityType:"drugs",entityLabel:"Pharmacy Drugs",currentConfig:r,onConfigUpdated:()=>{a()}})]})},_4e=()=>{const e=Mt();return i.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[i.jsx("button",{onClick:()=>e(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),i.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},CW=()=>{const{id:e}=Ai(),t=Mt(),[n,r]=j.useState(null),[a,s]=j.useState(!0),[o,l]=j.useState(null),[c,u]=j.useState(!1),[f,p]=j.useState(!1),y=j.useRef(null),v=j.useRef(null),x=j.useRef(null),b=j.useCallback(async()=>{if(!e){l("Drug ID is missing."),s(!1);return}s(!0),l(null);try{const C=await ce(`/api/drugs/${e}`);if(!C.ok){const E=await C.json();throw new Error(E.message||`Failed to fetch drug: ${C.statusText}`)}let O=await C.json();O={...O,name:O.name||"",brand_name:O.brand_name||"",mrp:parseFloat(String(O.mrp))||0,rate:O.rate!==null&&O.rate!==void 0?parseFloat(String(O.rate)):null,stock:parseInt(String(O.stock),10)||0,gst:O.gst!==null&&O.gst!==void 0?parseFloat(String(O.gst)):null,margin:O.margin!==null&&O.margin!==void 0?parseFloat(String(O.margin)):null,discount:O.discount!==null&&O.discount!==void 0?parseFloat(String(O.discount)):null,batch:O.batch||"",hsn_code:O.hsn_code||"",mfg:O.mfg||"",loose:O.loose!==null&&O.loose!==void 0?parseInt(String(O.loose),10):null},r(O)}catch(C){console.error("Failed to fetch drug:",C),l(C.message||"Failed to load drug data. Please try again.")}finally{s(!1)}},[e]);j.useEffect(()=>{b()},[b]),j.useEffect(()=>{const C=E=>{E.key==="Tab"&&v.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var P;(P=x.current)==null||P.focus()},0),E.preventDefault()))},O=E=>{y.current&&!y.current.contains(E.target)&&p(!1)};return document.addEventListener("keydown",C),document.addEventListener("mousedown",O),()=>{document.removeEventListener("keydown",C),document.removeEventListener("mousedown",O)}},[f]);const w=C=>{const{name:O,value:E,type:P}=C.target;r(I=>I?{...I,[O]:P==="number"?parseFloat(E)||null:E}:null)},_=()=>{t(-1)},T=async C=>{if(C.preventDefault(),l(null),u(!0),!n||!n.id){l("Cannot edit drug: No drug data available."),u(!1);return}if(n.mrp===void 0||n.stock===void 0){l("MRP and Stock Quantity are required."),u(!1);return}const O={...n,name:n.name===""?null:n.name,brand_name:n.brand_name===""?null:n.brand_name,rate:n.rate===0?null:n.rate,expiry_date:n.expiry_date===""?null:n.expiry_date,gst:n.gst===0?null:n.gst,margin:n.margin===0?null:n.margin,discount:n.discount===0?null:n.discount,batch:n.batch===""?null:n.batch,hsn_code:n.hsn_code===""?null:n.hsn_code,mfg:n.mfg===""?null:n.mfg,loose:n.loose===0?null:n.loose};try{const E=await ce(`/api/drugs/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!E.ok){const P=await E.json();throw new Error(P.message||`Failed to update drug: ${E.statusText}`)}await E.json(),t(-1)}catch(E){console.error("Failed to update drug:",E),l(E.message||"Failed to update drug. Please try again.")}finally{u(!1)}};return a?i.jsx("div",{className:"edit-drug-form-page",children:i.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):o&&!n?i.jsx("div",{className:"edit-drug-form-page",children:i.jsxs("div",{className:"error-message-load",children:["Error: ",o]})}):n?i.jsx("div",{className:"edit-drug-form-page",children:i.jsxs("div",{className:"edit-drug-form-container",children:[i.jsxs("div",{className:"edit-drug-form-header",children:[i.jsxs("h2",{children:["Edit Drug: ",n.name]}),i.jsx("button",{onClick:_,className:"cancel-button",title:"Go Back",children:i.jsx(zt,{size:24})})]}),o&&i.jsx("div",{className:"error-message-submit",children:o}),i.jsxs("form",{onSubmit:T,className:"edit-drug-form",children:[i.jsxs("div",{className:"form-grid",children:[i.jsxs("div",{className:"sm-col-span-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Composition Name"})," ",i.jsxs("div",{className:"relative ml-2 group",children:[i.jsx(Nl,{size:16,className:"text-gray-400"}),i.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),i.jsx("input",{type:"text",name:"name",id:"edit-name",value:n.name||"",onChange:w,className:"custom-text-input",placeholder:"e.g., Paracetamol",tabIndex:1})," "]}),i.jsxs("div",{className:"sm-col-span-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"edit-brand_name",className:"form-label",children:"Brand Name"})," ",i.jsxs("div",{className:"relative ml-2 group",children:[i.jsx(Nl,{size:16,className:"text-gray-400"}),i.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),i.jsx("input",{type:"text",name:"brand_name",id:"edit-brand_name",value:n.brand_name||"",onChange:w,className:"custom-text-input",placeholder:"e.g., Calpol",tabIndex:2})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"edit-mrp",className:"form-label",children:"MRP () *"}),i.jsxs("div",{className:"relative ml-2 group",children:[i.jsx(Nl,{size:16,className:"text-gray-400"}),i.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),i.jsx("input",{type:"number",name:"mrp",id:"edit-mrp",required:!0,step:"0.01",min:"0",value:n.mrp||"",onChange:w,className:"custom-text-input",placeholder:"e.g., 500",tabIndex:3})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"edit-stock",className:"form-label",children:"Stock Quantity *"}),i.jsxs("div",{className:"relative ml-2 group",children:[i.jsx(Nl,{size:16,className:"text-gray-400"}),i.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),i.jsx("input",{type:"number",name:"stock",id:"edit-stock",required:!0,step:"1",min:"0",value:n.stock||"",onChange:w,className:"custom-text-input",placeholder:"e.g., 5",tabIndex:4})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),i.jsx("input",{type:"text",name:"pack",id:"edit-pack",value:n.pack||"",onChange:w,className:"custom-text-input",placeholder:"e.g., strip, bottle",tabIndex:5})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),i.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:n.expiry_date||"",onChange:w,className:"custom-text-input",tabIndex:6})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),i.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:n.box_number||"",onChange:w,className:"custom-text-input",tabIndex:7})]}),i.jsxs("div",{className:"relative sm-col-span-2",ref:y,children:[i.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:v,children:"Others"}),f&&i.jsxs("div",{className:"others-fields-grid",children:[" ",i.jsxs("div",{className:"sm-col-span-2",children:[i.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),i.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:n.description||"",onChange:w,className:"custom-text-input",tabIndex:9})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),i.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:n.supplier||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:10})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-rate",className:"form-label",children:"Rate ()"}),i.jsx("input",{type:"number",name:"rate",id:"edit-rate",step:"0.01",min:"0",value:n.rate??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:11,ref:x})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-gst",className:"form-label",children:"GST (%)"}),i.jsx("input",{type:"number",name:"gst",id:"edit-gst",step:"0.01",min:"0",max:"100",value:n.gst??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:12})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-margin",className:"form-label",children:"Margin (%)"}),i.jsx("input",{type:"number",name:"margin",id:"edit-margin",step:"0.01",min:"0",max:"100",value:n.margin??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:13})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-discount",className:"form-label",children:"Discount (%)"}),i.jsx("input",{type:"number",name:"discount",id:"edit-discount",step:"0.01",min:"0",max:"100",value:n.discount??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:14})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-batch",className:"form-label",children:"Batch"}),i.jsx("input",{type:"text",name:"batch",id:"edit-batch",value:n.batch||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:15})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-hsn_code",className:"form-label",children:"HSN Code"}),i.jsx("input",{type:"text",name:"hsn_code",id:"edit-hsn_code",value:n.hsn_code||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:16})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-mfg",className:"form-label",children:"MFG"}),i.jsx("input",{type:"text",name:"mfg",id:"edit-mfg",value:n.mfg||"",onChange:w,className:"custom-text-input",placeholder:"Optional",tabIndex:17})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"edit-loose",className:"form-label",children:"Loose"}),i.jsx("input",{type:"number",name:"loose",id:"edit-loose",step:"1",min:"0",value:n.loose??"",onChange:w,placeholder:"Optional",className:"custom-text-input",tabIndex:18})]})]})]})]}),i.jsxs("div",{className:"form-actions",children:[i.jsx("button",{type:"button",onClick:_,disabled:c,className:"form-button cancel-form-button",tabIndex:19,children:"Back"}),i.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button",tabIndex:20,children:c?"Saving...":"Save Changes"})]})]})]})}):i.jsx("div",{className:"edit-drug-form-page",children:i.jsx("div",{className:"not-found-message",children:"Drug not found."})})},C4e=({clinicId:e})=>{const t=Mt(),[n,r]=j.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[a,s]=j.useState(null),[o,l]=j.useState(!1),[c,u]=j.useState([]),[f,p]=j.useState(!0),y=async()=>{try{const w=await ce("/api/clinic-roles");if(w.ok){const _=await w.json();u(_)}}catch(w){console.error("Failed to fetch roles:",w)}finally{p(!1)}};j.useEffect(()=>{s(e?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly."),y()},[e]);const v=w=>{const{name:_,value:T}=w.target;r(C=>{const O={...C,[_]:T};return _==="role"&&T!=="doctor"&&(O.opd_fee=""),O})},x=async w=>{if(w.preventDefault(),s(null),!n.name||!n.email||!n.role||!n.password){s("Name, Email, Role, and Password are required.");return}if(!e){s("Clinic information is missing. Cannot add staff.");return}const _={...n,clinic_id:e,opd_fee:n.role==="doctor"&&n.opd_fee?parseFloat(String(n.opd_fee)):null};if(_.role==="doctor"&&n.opd_fee&&isNaN(_.opd_fee)){s("Invalid OPD Fee format. Please enter a number.");return}l(!0);try{const T=await ce("/api/staff",{method:"POST",body:JSON.stringify(_)});if(!T.ok){const C=await T.json();throw new Error(C.message||"Server responded with an error")}t(-1)}catch(T){s(`Failed to add staff: ${T.message}`)}finally{l(!1)}},b=()=>{t(-1)};return i.jsxs("div",{className:"staff-page-container",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:b,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[i.jsx(rn,{size:18,className:"mr-2"}),"Back"]}),i.jsx("h1",{children:"Add New Staff Member"}),i.jsx("div",{className:"w-16"})," "]}),a&&i.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[i.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),a]}),i.jsxs("form",{onSubmit:x,className:`staff-form ${e?"":"opacity-50 pointer-events-none"}`,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"name",children:"Full Name"}),i.jsx("input",{id:"name",type:"text",name:"name",value:n.name||"",onChange:v,required:!0,disabled:o||!e,placeholder:"Enter full name"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",children:"Email Address"}),i.jsx("input",{id:"email",type:"email",name:"email",value:n.email||"",onChange:v,required:!0,disabled:o||!e,placeholder:"Enter email address"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"role",children:"Assign Role"}),i.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:v,required:!0,disabled:o||!e||f,children:f?i.jsx("option",{value:"",children:"Loading roles..."}):c.length===0?i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"receptionist",children:"Receptionist"}),i.jsx("option",{value:"doctor",children:"Doctor"}),i.jsx("option",{value:"pharmacy",children:"Pharmacist"}),i.jsx("option",{value:"lab",children:"Lab Technician"})]}):c.map(w=>i.jsx("option",{value:w.key,children:w.name},w.key))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),i.jsx("input",{id:"password",type:"password",name:"password",value:n.password||"",onChange:v,required:!0,disabled:o||!e,placeholder:"Create a password"})]}),n.role==="doctor"&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee () (Optional)"}),i.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:n.opd_fee||"",onChange:v,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:o||!e}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),i.jsxs("button",{type:"submit",disabled:o||!e,children:[o?i.jsx(Dc,{size:18,className:"animate-spin mr-2"}):i.jsx(Yr,{size:18,className:"mr-2"}),o?"Adding...":"Add Staff Member"]})]})]})},T4e=()=>{const{id:e}=Ai(),t=Mt(),[n,r]=j.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[a,s]=j.useState(""),[o,l]=j.useState(!0),[c,u]=j.useState(!1),[f,p]=j.useState(null),[y,v]=j.useState(null),[x,b]=j.useState([]),[w,_]=j.useState(!0),T=async()=>{try{const I=await ce("/api/clinic-roles");if(I.ok){const F=await I.json();b(F)}}catch(I){console.error("Failed to fetch roles:",I)}finally{_(!1)}},C=j.useCallback(async()=>{if(!e){p("Staff ID is missing."),l(!1);return}l(!0),p(null),v(null);try{const I=await ce(`/staff/${e}`);if(!I.ok){const $=await I.json();throw new Error($.message||`HTTP error! status: ${I.status}`)}const F=await I.json();r({name:F.name,email:F.email,role:F.role,opd_fee:F.opd_fee??"",active:F.active})}catch(I){p(`Failed to load staff details: ${I.message}`)}finally{l(!1)}},[e]);j.useEffect(()=>{C(),T()},[C]);const O=I=>{const{name:F,value:$,type:z}=I.target;if(z==="checkbox"){const{checked:L}=I.target;r(H=>({...H,[F]:L}))}else r(L=>({...L,[F]:$}))},E=I=>{s(I.target.value)},P=async I=>{if(I.preventDefault(),!e){p("Staff ID is missing.");return}u(!0),p(null),v(null);const F={name:n.name,email:n.email,role:n.role,active:n.active};if(n.role==="doctor"){const $=n.opd_fee?parseFloat(String(n.opd_fee)):null;if($!==null&&isNaN($)){p("OPD Fee must be a valid number."),u(!1);return}F.opd_fee=$}else F.opd_fee=null;a.trim()!==""&&(F.password=a.trim());try{const $=await ce(`/staff/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!$.ok){const z=await $.json();throw new Error(z.message||`HTTP error! status: ${$.status}`)}v("Staff details updated successfully!"),s(""),setTimeout(()=>t(-1),1500)}catch($){p(`Failed to update staff: ${$.message}`)}finally{u(!1)}};return o?i.jsxs("div",{className:"flex justify-center items-center h-screen",children:[i.jsx(Dc,{className:"h-12 w-12 animate-spin text-teal-600"}),i.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):i.jsxs("div",{className:"staff-page-container",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[i.jsx(rn,{size:18,className:"mr-2"}),"Back"]}),i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),i.jsx("div",{className:"w-16"})," "]}),f&&i.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[i.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),f,i.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),y&&i.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[i.jsx(Dl,{size:18,className:"mr-2 text-green-500"}),y,i.jsx("button",{onClick:()=>v(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:""})]}),i.jsxs("form",{onSubmit:P,className:"staff-form",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"name",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:O,required:!0,placeholder:"Enter full name"})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",id:"email",name:"email",value:n.email||"",onChange:O,required:!0,placeholder:"Enter email address"})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"role",children:["Role ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("select",{id:"role",name:"role",value:n.role||"receptionist",onChange:O,required:!0,disabled:w,children:w?i.jsx("option",{value:"",children:"Loading roles..."}):x.length===0?i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"doctor",children:"Doctor"}),i.jsx("option",{value:"receptionist",children:"Receptionist"}),i.jsx("option",{value:"lab",children:"Lab Technician"}),i.jsx("option",{value:"pharmacy",children:"Pharmacist"})]}):x.map(I=>i.jsx("option",{value:I.key,children:I.name},I.key))})]}),n.role==="doctor"&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee ()"}),i.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:n.opd_fee||"",onChange:O,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),i.jsxs("div",{className:"form-group checkbox-group",children:[i.jsx("input",{id:"active",name:"active",type:"checkbox",checked:n.active??!0,onChange:O}),i.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),i.jsx("input",{type:"password",id:"password",name:"password",value:a,onChange:E,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),i.jsx("button",{type:"submit",disabled:c,children:c?i.jsxs(i.Fragment,{children:[i.jsx(Dc,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Xs,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})},E4e=()=>{const{patientId:e}=Ai(),t=Mt(),[n,r]=j.useState([]),[a,s]=j.useState(null),[o,l]=j.useState(!1),[c,u]=j.useState(null);j.useEffect(()=>{(async()=>{if(!e){u("Patient ID not provided.");return}l(!0),u(null);try{const y=await ce(`/api/patients/${e}`);if(!y.ok)throw new Error(`Failed to fetch patient details: ${y.status}`);const v=await y.json();s({name:v.name,age:v.age,gender:v.gender});const x=await ce(`/api/patients/${e}/complaints`);if(x.ok){const w=(await x.json()).sort((_,T)=>new Date(T.createdAt).getTime()-new Date(_.createdAt).getTime());r(w)}else if(x.status===404)r([]);else throw new Error(`Failed to fetch complaints: ${x.status}`)}catch(y){console.error("Error fetching past complaints or patient info:",y),u(`Failed to load data. ${y.message}`),r([]),s(null)}finally{l(!1)}})()},[e]);const f=p=>{navigator.clipboard.writeText(p).then(()=>console.log("Complaint copied to clipboard")).catch(y=>console.error("Failed to copy complaint: ",y))};return i.jsxs("div",{className:"container mx-auto p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("button",{onClick:()=>t(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),i.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),i.jsx("div",{className:"w-16"})," "]}),a&&i.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",i.jsx("strong",{children:a.name})," (",a.age??"N/A"," / ",a.gender??"N/A",")"]}),c&&i.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",c]}),o&&i.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!o&&n.length===0&&!c&&i.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!o&&n.length>0&&i.jsx("div",{className:"space-y-4",children:n.map(p=>i.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(p.createdAt).toLocaleString()}),i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.complaint}),i.jsx("button",{onClick:()=>f(p.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:""})]},p.id))})]})};var A4e=Object.defineProperty,XS=Object.getOwnPropertySymbols,TW=Object.prototype.hasOwnProperty,EW=Object.prototype.propertyIsEnumerable,Nz=(e,t,n)=>t in e?A4e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nD=(e,t)=>{for(var n in t||(t={}))TW.call(t,n)&&Nz(e,n,t[n]);if(XS)for(var n of XS(t))EW.call(t,n)&&Nz(e,n,t[n]);return e},rD=(e,t)=>{var n={};for(var r in e)TW.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XS)for(var r of XS(e))t.indexOf(r)<0&&EW.call(e,r)&&(n[r]=e[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Mf;(e=>{const t=class kn{constructor(c,u,f,p){if(this.version=c,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],c<kn.MIN_VERSION||c>kn.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let y=[];for(let x=0;x<this.size;x++)y.push(!1);for(let x=0;x<this.size;x++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(f);if(this.drawCodewords(v),p==-1){let x=1e9;for(let b=0;b<8;b++){this.applyMask(b),this.drawFormatBits(b);const w=this.getPenaltyScore();w<x&&(p=b,x=w),this.applyMask(b)}}a(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,u){const f=e.QrSegment.makeSegments(c);return kn.encodeSegments(f,u)}static encodeBinary(c,u){const f=e.QrSegment.makeBytes(c);return kn.encodeSegments([f],u)}static encodeSegments(c,u,f=1,p=40,y=-1,v=!0){if(!(kn.MIN_VERSION<=f&&f<=p&&p<=kn.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let x,b;for(x=f;;x++){const C=kn.getNumDataCodewords(x,u)*8,O=o.getTotalBits(c,x);if(O<=C){b=O;break}if(x>=p)throw new RangeError("Data too long")}for(const C of[kn.Ecc.MEDIUM,kn.Ecc.QUARTILE,kn.Ecc.HIGH])v&&b<=kn.getNumDataCodewords(x,C)*8&&(u=C);let w=[];for(const C of c){n(C.mode.modeBits,4,w),n(C.numChars,C.mode.numCharCountBits(x),w);for(const O of C.getData())w.push(O)}a(w.length==b);const _=kn.getNumDataCodewords(x,u)*8;a(w.length<=_),n(0,Math.min(4,_-w.length),w),n(0,(8-w.length%8)%8,w),a(w.length%8==0);for(let C=236;w.length<_;C^=253)n(C,8,w);let T=[];for(;T.length*8<w.length;)T.push(0);return w.forEach((C,O)=>T[O>>>3]|=C<<7-(O&7)),new kn(x,u,T,y)}getModule(c,u){return 0<=c&&c<this.size&&0<=u&&u<this.size&&this.modules[u][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),u=c.length;for(let f=0;f<u;f++)for(let p=0;p<u;p++)f==0&&p==0||f==0&&p==u-1||f==u-1&&p==0||this.drawAlignmentPattern(c[f],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const u=this.errorCorrectionLevel.formatBits<<3|c;let f=u;for(let y=0;y<10;y++)f=f<<1^(f>>>9)*1335;const p=(u<<10|f)^21522;a(p>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,r(p,y));this.setFunctionModule(8,7,r(p,6)),this.setFunctionModule(8,8,r(p,7)),this.setFunctionModule(7,8,r(p,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,r(p,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,r(p,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,r(p,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let f=0;f<12;f++)c=c<<1^(c>>>11)*7973;const u=this.version<<12|c;a(u>>>18==0);for(let f=0;f<18;f++){const p=r(u,f),y=this.size-11+f%3,v=Math.floor(f/3);this.setFunctionModule(y,v,p),this.setFunctionModule(v,y,p)}}drawFinderPattern(c,u){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const y=Math.max(Math.abs(p),Math.abs(f)),v=c+p,x=u+f;0<=v&&v<this.size&&0<=x&&x<this.size&&this.setFunctionModule(v,x,y!=2&&y!=4)}}drawAlignmentPattern(c,u){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,u+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(c,u,f){this.modules[u][c]=f,this.isFunction[u][c]=!0}addEccAndInterleave(c){const u=this.version,f=this.errorCorrectionLevel;if(c.length!=kn.getNumDataCodewords(u,f))throw new RangeError("Invalid argument");const p=kn.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][u],y=kn.ECC_CODEWORDS_PER_BLOCK[f.ordinal][u],v=Math.floor(kn.getNumRawDataModules(u)/8),x=p-v%p,b=Math.floor(v/p);let w=[];const _=kn.reedSolomonComputeDivisor(y);for(let C=0,O=0;C<p;C++){let E=c.slice(O,O+b-y+(C<x?0:1));O+=E.length;const P=kn.reedSolomonComputeRemainder(E,_);C<x&&E.push(0),w.push(E.concat(P))}let T=[];for(let C=0;C<w[0].length;C++)w.forEach((O,E)=>{(C!=b-y||E>=x)&&T.push(O[C])});return a(T.length==v),T}drawCodewords(c){if(c.length!=Math.floor(kn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let y=0;y<2;y++){const v=f-y,b=(f+1&2)==0?this.size-1-p:p;!this.isFunction[b][v]&&u<c.length*8&&(this.modules[b][v]=r(c[u>>>3],7-(u&7)),u++)}}a(u==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let f=0;f<this.size;f++){let p;switch(c){case 0:p=(f+u)%2==0;break;case 1:p=u%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+u)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(u/2))%2==0;break;case 5:p=f*u%2+f*u%3==0;break;case 6:p=(f*u%2+f*u%3)%2==0;break;case 7:p=((f+u)%2+f*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][f]&&p&&(this.modules[u][f]=!this.modules[u][f])}}getPenaltyScore(){let c=0;for(let y=0;y<this.size;y++){let v=!1,x=0,b=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[y][w]==v?(x++,x==5?c+=kn.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,b),v||(c+=this.finderPenaltyCountPatterns(b)*kn.PENALTY_N3),v=this.modules[y][w],x=1);c+=this.finderPenaltyTerminateAndCount(v,x,b)*kn.PENALTY_N3}for(let y=0;y<this.size;y++){let v=!1,x=0,b=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][y]==v?(x++,x==5?c+=kn.PENALTY_N1:x>5&&c++):(this.finderPenaltyAddHistory(x,b),v||(c+=this.finderPenaltyCountPatterns(b)*kn.PENALTY_N3),v=this.modules[w][y],x=1);c+=this.finderPenaltyTerminateAndCount(v,x,b)*kn.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let v=0;v<this.size-1;v++){const x=this.modules[y][v];x==this.modules[y][v+1]&&x==this.modules[y+1][v]&&x==this.modules[y+1][v+1]&&(c+=kn.PENALTY_N2)}let u=0;for(const y of this.modules)u=y.reduce((v,x)=>v+(x?1:0),u);const f=this.size*this.size,p=Math.ceil(Math.abs(u*20-f*10)/f)-1;return a(0<=p&&p<=9),c+=p*kn.PENALTY_N4,a(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let f=[6];for(let p=this.size-7;f.length<c;p-=u)f.splice(1,0,p);return f}}static getNumRawDataModules(c){if(c<kn.MIN_VERSION||c>kn.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*c+128)*c+64;if(c>=2){const f=Math.floor(c/7)+2;u-=(25*f-10)*f-55,c>=7&&(u-=36)}return a(208<=u&&u<=29648),u}static getNumDataCodewords(c,u){return Math.floor(kn.getNumRawDataModules(c)/8)-kn.ECC_CODEWORDS_PER_BLOCK[u.ordinal][c]*kn.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let u=[];for(let p=0;p<c-1;p++)u.push(0);u.push(1);let f=1;for(let p=0;p<c;p++){for(let y=0;y<u.length;y++)u[y]=kn.reedSolomonMultiply(u[y],f),y+1<u.length&&(u[y]^=u[y+1]);f=kn.reedSolomonMultiply(f,2)}return u}static reedSolomonComputeRemainder(c,u){let f=u.map(p=>0);for(const p of c){const y=p^f.shift();f.push(0),u.forEach((v,x)=>f[x]^=kn.reedSolomonMultiply(v,y))}return f}static reedSolomonMultiply(c,u){if(c>>>8||u>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(u>>>p&1)*c;return a(f>>>8==0),f}finderPenaltyCountPatterns(c){const u=c[1];a(u<=this.size*3);const f=u>0&&c[2]==u&&c[3]==u*3&&c[4]==u&&c[5]==u;return(f&&c[0]>=u*4&&c[6]>=u?1:0)+(f&&c[6]>=u*4&&c[0]>=u?1:0)}finderPenaltyTerminateAndCount(c,u,f){return c&&(this.finderPenaltyAddHistory(u,f),u=0),u+=this.size,this.finderPenaltyAddHistory(u,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(c,u){u[0]==0&&(c+=this.size),u.pop(),u.unshift(c)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(l,c,u){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let f=c-1;f>=0;f--)u.push(l>>>f&1)}function r(l,c){return(l>>>c&1)!=0}function a(l){if(!l)throw new Error("Assertion error")}const s=class Vr{constructor(c,u,f){if(this.mode=c,this.numChars=u,this.bitData=f,u<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(c){let u=[];for(const f of c)n(f,8,u);return new Vr(Vr.Mode.BYTE,c.length,u)}static makeNumeric(c){if(!Vr.isNumeric(c))throw new RangeError("String contains non-numeric characters");let u=[];for(let f=0;f<c.length;){const p=Math.min(c.length-f,3);n(parseInt(c.substring(f,f+p),10),p*3+1,u),f+=p}return new Vr(Vr.Mode.NUMERIC,c.length,u)}static makeAlphanumeric(c){if(!Vr.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],f;for(f=0;f+2<=c.length;f+=2){let p=Vr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f))*45;p+=Vr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f+1)),n(p,11,u)}return f<c.length&&n(Vr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(f)),6,u),new Vr(Vr.Mode.ALPHANUMERIC,c.length,u)}static makeSegments(c){return c==""?[]:Vr.isNumeric(c)?[Vr.makeNumeric(c)]:Vr.isAlphanumeric(c)?[Vr.makeAlphanumeric(c)]:[Vr.makeBytes(Vr.toUtf8ByteArray(c))]}static makeEci(c){let u=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,u);else if(c<16384)n(2,2,u),n(c,14,u);else if(c<1e6)n(6,3,u),n(c,21,u);else throw new RangeError("ECI assignment value out of range");return new Vr(Vr.Mode.ECI,0,u)}static isNumeric(c){return Vr.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Vr.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,u){let f=0;for(const p of c){const y=p.mode.numCharCountBits(u);if(p.numChars>=1<<y)return 1/0;f+=4+y+p.bitData.length}return f}static toUtf8ByteArray(c){c=encodeURI(c);let u=[];for(let f=0;f<c.length;f++)c.charAt(f)!="%"?u.push(c.charCodeAt(f)):(u.push(parseInt(c.substring(f+1,f+3),16)),f+=2);return u}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;e.QrSegment=s})(Mf||(Mf={}));(e=>{(t=>{const n=class{constructor(a,s){this.ordinal=a,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Mf||(Mf={}));(e=>{(t=>{const n=class{constructor(a,s){this.modeBits=a,this.numBitsCharCount=s}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Mf||(Mf={}));var Fm=Mf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var k4e={L:Fm.QrCode.Ecc.LOW,M:Fm.QrCode.Ecc.MEDIUM,Q:Fm.QrCode.Ecc.QUARTILE,H:Fm.QrCode.Ecc.HIGH},AW=128,kW="L",PW="#FFFFFF",OW="#000000",DW=!1,MW=1,P4e=4,O4e=0,D4e=.1;function IW(e,t=0){const n=[];return e.forEach(function(r,a){let s=null;r.forEach(function(o,l){if(!o&&s!==null){n.push(`M${s+t} ${a+t}h${l-s}v1H${s+t}z`),s=null;return}if(l===r.length-1){if(!o)return;s===null?n.push(`M${l+t},${a+t} h1v1H${l+t}z`):n.push(`M${s+t},${a+t} h${l+1-s}v1H${s+t}z`);return}o&&s===null&&(s=l)})}),n.join("")}function RW(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((a,s)=>s<t.x||s>=t.x+t.w?a:!1))}function M4e(e,t,n,r){if(r==null)return null;const a=e.length+n*2,s=Math.floor(t*D4e),o=a/t,l=(r.width||s)*o,c=(r.height||s)*o,u=r.x==null?e.length/2-l/2:r.x*o,f=r.y==null?e.length/2-c/2:r.y*o,p=r.opacity==null?1:r.opacity;let y=null;if(r.excavate){let x=Math.floor(u),b=Math.floor(f),w=Math.ceil(l+u-x),_=Math.ceil(c+f-b);y={x,y:b,w,h:_}}const v=r.crossOrigin;return{x:u,y:f,h:c,w:l,excavation:y,opacity:p,crossOrigin:v}}function I4e(e,t){return t!=null?Math.max(Math.floor(t),0):e?P4e:O4e}function LW({value:e,level:t,minVersion:n,includeMargin:r,marginSize:a,imageSettings:s,size:o,boostLevel:l}){let c=ye.useMemo(()=>{const x=(Array.isArray(e)?e:[e]).reduce((b,w)=>(b.push(...Fm.QrSegment.makeSegments(w)),b),[]);return Fm.QrCode.encodeSegments(x,k4e[t],n,void 0,void 0,l)},[e,t,n,l]);const{cells:u,margin:f,numCells:p,calculatedImageSettings:y}=ye.useMemo(()=>{let v=c.getModules();const x=I4e(r,a),b=v.length+x*2,w=M4e(v,o,x,s);return{cells:v,margin:x,numCells:b,calculatedImageSettings:w}},[c,o,s,r,a]);return{qrcode:c,margin:f,cells:u,numCells:p,calculatedImageSettings:y}}var R4e=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),oa=ye.forwardRef(function(t,n){const r=t,{value:a,size:s=AW,level:o=kW,bgColor:l=PW,fgColor:c=OW,includeMargin:u=DW,minVersion:f=MW,boostLevel:p,marginSize:y,imageSettings:v}=r,b=rD(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=b,_=rD(b,["style"]),T=v==null?void 0:v.src,C=ye.useRef(null),O=ye.useRef(null),E=ye.useCallback(ne=>{C.current=ne,typeof n=="function"?n(ne):n&&(n.current=ne)},[n]),[P,I]=ye.useState(!1),{margin:F,cells:$,numCells:z,calculatedImageSettings:L}=LW({value:a,level:o,minVersion:f,boostLevel:p,includeMargin:u,marginSize:y,imageSettings:v,size:s});ye.useEffect(()=>{if(C.current!=null){const ne=C.current,Z=ne.getContext("2d");if(!Z)return;let q=$;const K=O.current,se=L!=null&&K!==null&&K.complete&&K.naturalHeight!==0&&K.naturalWidth!==0;se&&L.excavation!=null&&(q=RW($,L.excavation));const G=window.devicePixelRatio||1;ne.height=ne.width=s*G;const B=s/z*G;Z.scale(B,B),Z.fillStyle=l,Z.fillRect(0,0,z,z),Z.fillStyle=c,R4e?Z.fill(new Path2D(IW(q,F))):$.forEach(function(fe,me){fe.forEach(function(Y,xe){Y&&Z.fillRect(xe+F,me+F,1,1)})}),L&&(Z.globalAlpha=L.opacity),se&&Z.drawImage(K,L.x+F,L.y+F,L.w,L.h)}}),ye.useEffect(()=>{I(!1)},[T]);const H=nD({height:s,width:s},w);let V=null;return T!=null&&(V=ye.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{I(!0)},ref:O,crossOrigin:L==null?void 0:L.crossOrigin})),ye.createElement(ye.Fragment,null,ye.createElement("canvas",nD({style:H,height:s,width:s,ref:E,role:"img"},_)),V)});oa.displayName="QRCodeCanvas";var L4e=ye.forwardRef(function(t,n){const r=t,{value:a,size:s=AW,level:o=kW,bgColor:l=PW,fgColor:c=OW,includeMargin:u=DW,minVersion:f=MW,boostLevel:p,title:y,marginSize:v,imageSettings:x}=r,b=rD(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:_,numCells:T,calculatedImageSettings:C}=LW({value:a,level:o,minVersion:f,boostLevel:p,includeMargin:u,marginSize:v,imageSettings:x,size:s});let O=_,E=null;x!=null&&C!=null&&(C.excavation!=null&&(O=RW(_,C.excavation)),E=ye.createElement("image",{href:x.src,height:C.h,width:C.w,x:C.x+w,y:C.y+w,preserveAspectRatio:"none",opacity:C.opacity,crossOrigin:C.crossOrigin}));const P=IW(O,w);return ye.createElement("svg",nD({height:s,width:s,viewBox:`0 0 ${T} ${T}`,ref:n,role:"img"},b),!!y&&ye.createElement("title",null,y),ye.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),ye.createElement("path",{fill:c,d:P,shapeRendering:"crispEdges"}),E)});L4e.displayName="QRCodeSVG";const F4e=e=>{if(e===0)return"Zero";const t=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],r=l=>l===0?"":l<20?t[l]:l<100?n[Math.floor(l/10)]+(l%10?" "+t[l%10]:""):t[Math.floor(l/100)]+" Hundred"+(l%100?" and "+r(l%100):""),a=Math.floor(e),s=Math.round((e-a)*100);let o="";return a>=1e7&&(o+=r(Math.floor(a/1e7))+" Crore "),a>=1e5&&(o+=r(Math.floor(a%1e7/1e5))+" Lakh "),a>=1e3&&(o+=r(Math.floor(a%1e5/1e3))+" Thousand "),a>=100&&(o+=r(Math.floor(a%1e3/100))+" Hundred "),a%100&&(o+=(o?"and ":"")+r(a%100)),o=o.trim()+" Rupees",s>0&&(o+=" and "+r(s)+" Paise"),o+" Only"},$4e=e=>{const t=typeof e=="string"?parseInt(e,10):e;return`INV-${String(t).padStart(6,"0")}`},gk=500,_z="defaultConsultationFee",B4e=({patientId:e,billId:t,queueId:n,onBillCreated:r,onBillUpdated:a,initialItems:s=[],billType:o="other",relatedId:l,initialStatus:c="pending",initialDiscountPercentage:u=0,readOnlyMode:f=!1,doctorId:p,labOrderId:y,patientInsuranceType:v})=>{const[x,b]=j.useState(null),[w,_]=j.useState([]),T=j.useRef([]),[C,O]=j.useState(""),[E,P]=j.useState(""),[I,F]=j.useState(1),[$,z]=j.useState(u),[L,H]=j.useState("cash"),[V,ne]=j.useState(!1),[Z,q]=j.useState(null),[K,se]=j.useState(!1),[G,B]=j.useState(!1),[fe,me]=j.useState(!1),[Y,xe]=j.useState(null),[,Ie]=j.useState([]),[Ne,ke]=j.useState(null),[de,Q]=j.useState(""),[oe,re]=j.useState("cash"),[ae,X]=j.useState(!1),[W,ie]=j.useState(null),[pe,le]=j.useState(!1),[je,Ge]=j.useState(gk),[et,ht]=j.useState(gk.toString()),[_e,Fe]=j.useState(""),[Ye,Ke]=j.useState(""),[be,De]=j.useState(""),[we,ve]=j.useState(""),[Ce,nt]=j.useState(""),Ve=t?"view_pay":"create";j.useEffect(()=>{const pt=localStorage.getItem(_z),jt=pt?parseFloat(pt):gk;isNaN(jt)||(Ge(jt),ht(jt.toString()))},[]);const dt=s.length===0;j.useEffect(()=>{e?(async()=>{ne(!0),q(null);try{const jt=await ce(`/api/patients/${e}`);if(!jt.ok){const Dt=await jt.json().catch(()=>({}));throw new Error(Dt.message||"Failed to fetch patient details")}const bt=await jt.json();b(bt)}catch(jt){q(`Failed to load patient details: ${jt.message}`),b(null)}finally{ne(!1)}})():b(null)},[e]),j.useEffect(()=>{t?(async()=>{me(!0),q(null),xe(null),Ie([]),ke(null);try{const jt=await ce(`/api/bills/${t}`);if(!jt.ok){const Dt=await jt.json().catch(()=>({}));throw new Error(Dt.message||"Failed to fetch bill details")}const bt=await jt.json();if(!bt.bill||!bt.payments||!bt.calculated)throw new Error("Invalid bill details structure.");xe(bt.bill),Ie(bt.payments),ke(bt.calculated),z(bt.bill.discount_percentage!==void 0&&bt.bill.discount_percentage!==null?parseFloat(bt.bill.discount_percentage.toString()):0),bt.bill.payment_mode&&H(bt.bill.payment_mode),!x&&bt.bill.patient_id&&Ct(bt.bill.patient_id.toString())}catch(jt){q(`Failed to load bill details: ${jt.message}`),xe(null),Ie([]),ke(null)}finally{me(!1)}})():(xe(null),Ie([]),ke(null))},[t]),j.useEffect(()=>{(async()=>{try{const jt=await ce("/api/clinics/settings");if(!jt.ok)throw new Error("Failed to fetch clinic settings");const bt=await jt.json();Fe(bt.upi_id||""),Ke(bt.name||""),De(bt.address||""),ve(bt.notes||"")}catch(jt){console.error("Error fetching clinic settings:",jt)}})()},[]);const Ct=async pt=>{ne(!0);try{const jt=await ce(`/api/patients/${pt}`);if(!jt.ok)throw new Error("Failed to fetch patient");const bt=await jt.json();b(bt)}catch(jt){console.error("Error fetching patient details:",jt),b(null)}finally{ne(!1)}},kt=j.useCallback(async pt=>{B(!0),q(null);const jt=pt.filter(bt=>bt.drug_id!=null).map(async bt=>{try{const Dt=await ce(`/api/drugs/${bt.drug_id}`);if(!Dt.ok)throw new Error(`Drug ${bt.drug_id} not found.`);const un=await Dt.json();return{...bt,price:un.price,total:un.price*bt.quantity}}catch{return q(un=>`${un?un+"; ":""}Failed to fetch price for ${bt.name}`),bt}});try{const bt=await Promise.all(jt);_(Dt=>{const un=new Map(bt.map(Ut=>[Ut.id,Ut]));return Dt.map(Ut=>un.get(Ut.id)||Ut)})}catch{}finally{B(!1)}},[ce]);j.useEffect(()=>{if(t){_([]),T.current=[];return}JSON.stringify(s)===JSON.stringify(T.current)||(async()=>{let bt=[];if(s&&s.length>0)bt=s.map((Dt,un)=>({...Dt,id:`initial-${un}-${Date.now()}`})),H(c==="paid"?"cash":v==="no_cash_insurance"?"no_cash_insurance":"cash"),z(u),o==="pharmacy"&&!f&&await kt(bt);else if(e&&dt&&o==="consultation"){let Dt=je;if(p)try{const un=await ce(`/api/staff/${p}`);if(!un.ok){const to=await un.json().catch(()=>({}));throw new Error(to.message||"Doctor not found or error fetching fee")}const Ut=await un.json();Ut.opd_fee!=null&&!isNaN(parseFloat(String(Ut.opd_fee)))&&parseFloat(String(Ut.opd_fee))>=0&&(Dt=parseFloat(String(Ut.opd_fee)))}catch(un){q(Ut=>`${Ut?Ut+"; ":""}Could not fetch doctor's fee, using default. (${un.message})`)}bt=[{id:Date.now(),name:"Consultation Fee",price:Dt,quantity:1,total:Dt*1,drug_id:null}],H(v==="no_cash_insurance"?"no_cash_insurance":"cash")}else bt=[],H(v==="no_cash_insurance"?"no_cash_insurance":"cash");_(bt),T.current=s})()},[t,e,p,s,o,je,dt,c,f,kt,u,v]);const ze=()=>{const pt=parseFloat(E);if(!f)if(C&&!isNaN(pt)&&pt>=0&&I>0){if(C.trim().toLowerCase()==="consultation fee"&&w.some(bt=>bt.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const jt={id:Date.now(),name:C.trim(),price:pt,quantity:I,total:pt*I,drug_id:null};_([...w,jt]),O(""),P(""),F(1)}else alert("Invalid item details.")},Xe=pt=>{f||_(w.filter(jt=>jt.id!==pt))},Je=j.useMemo(()=>{let pt=w.reduce((jt,bt)=>jt+bt.total,0);return Ve==="create"&&$>0&&(pt=pt*(1-$/100)),(Ne==null?void 0:Ne.totalDue)!==void 0&&(Ne==null?void 0:Ne.totalDue)!==null?Ne.totalDue:pt},[w,Ne,$,Ve]),wt=j.useMemo(()=>w.reduce((pt,jt)=>pt+jt.total,0),[w]),Pt=j.useMemo(()=>wt*($/100),[wt,$]),dn=j.useMemo(()=>(Ne==null?void 0:Ne.totalPaid)??0,[Ne]),Ee=j.useMemo(()=>(Ne==null?void 0:Ne.balance)!==void 0&&(Ne==null?void 0:Ne.balance)!==null?Ne.balance:Je-dn,[Ne,Je,dn]);j.useEffect(()=>{if(Je>0&&_e){const pt=`upi://pay?pa=${_e}&pn=${encodeURIComponent(Ye)}&am=${Je.toFixed(2)}&cu=INR`;nt(pt)}else nt("")},[Je,_e,Ye]),j.useEffect(()=>{(async()=>{if(L==="credit"&&e){le(!0);try{const jt=await ce(`/api/patient-debts/${e}/balance`);if(jt.ok){const bt=await jt.json();ie(bt.netDebt||0)}else ie(0)}catch(jt){console.error("Error fetching patient debt:",jt),ie(0)}finally{le(!1)}}})()},[L,e]);const at=()=>{const pt=parseFloat(et);!isNaN(pt)&&pt>=0?(Ge(pt),localStorage.setItem(_z,pt.toString())):alert("Invalid fee amount.")},Tt=async(pt,jt)=>{se(!0),q(null);try{const bt=await ce("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:jt,billId:pt})}),Dt=await bt.json();if(!bt.ok||!Dt.order)throw new Error(Dt.message||"Failed to create Razorpay order.");const{key_id:un,order:Ut}=Dt,to={key:un,amount:Ut.amount,currency:Ut.currency,name:"Newtons Ai HMS Clinic",description:`Bill Payment for Patient ID: ${e}`,order_id:Ut.id,handler:async function(no){try{const Es=await ce("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:no.razorpay_payment_id,razorpay_order_id:no.razorpay_order_id,razorpay_signature:no.razorpay_signature,billId:pt})}),$o=await Es.json();if(Es.ok&&$o.success)r&&r(pt),a&&a(),setTimeout(()=>window.print(),200);else throw new Error($o.message||"Payment verification failed.")}catch(Es){q(`Payment verification failed: ${Es.message}. Contact support.`)}finally{se(!1)}},prefill:{name:(x==null?void 0:x.name)||""},notes:{bill_id:pt,patient_id:e},theme:{color:"#3399cc"},modal:{ondismiss:function(){q("Payment cancelled."),se(!1)}}};if(window.Razorpay)new window.Razorpay(to).open();else throw new Error("Razorpay SDK not loaded.")}catch(bt){q(`Failed to initiate online payment: ${bt.message}`),se(!1)}},Re=async()=>{if(!t){q("Bill ID is missing.");return}if(!de||isNaN(parseFloat(de))||parseFloat(de)<=0){q("Please enter a valid positive payment amount.");return}X(!0),q(null);const pt={amount_paid:parseFloat(de),payment_mode:oe};try{const jt=await ce(`/api/bills/${t}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pt)}),bt=await jt.json();if(!jt.ok)throw new Error(bt.message||`Failed to record payment (Status: ${jt.status})`);Q(""),a?a():console.log("Payment recorded.")}catch(jt){q(`Failed to record payment: ${jt.message}`)}finally{X(!1)}},vt=async()=>{if(Ve==="view_pay")return;if(!e){q("Patient ID is missing for creating a bill.");return}if(w.length===0){q("Cannot finalize an empty bill.");return}se(!0),q(null);const pt=Je,jt=w.map(({id:bt,...Dt})=>Dt);if(L==="online"){const bt={patientId:e,queueId:n||null,items:jt,amount:pt,paymentMode:"online",type:o,related_id:l||y||null,status:"pending",discountPercentage:$,labOrderId:y||null};try{const Dt=await ce("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(bt)}),un=await Dt.json();if(!Dt.ok)throw new Error(un.message||"Failed to create pending bill.");Tt(un.id,Math.round(pt*100))}catch(Dt){q(`Failed to create pending bill: ${Dt.message}`),se(!1)}}else{const bt="paid";if(!L){q("Payment mode required."),se(!1);return}const Dt={patientId:e,queueId:n||null,items:jt,amount:pt,paymentMode:L,type:o,related_id:l||y||null,status:bt,discountPercentage:$,labOrderId:y||null};setTimeout(()=>window.print(),200);try{const un=await ce("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Dt)}),Ut=await un.json();if(!un.ok)throw new Error(Ut.message||"Failed to create bill.");if(L==="credit"&&e)try{await ce(`/api/patient-debts/${e}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:pt,related_bill_id:Ut.id,notes:`Bill #${Ut.id}`})})}catch(to){console.error("Failed to create debt entry:",to)}r&&r(Ut.id),se(!1)}catch(un){q(`Failed to process bill: ${un.message}`),se(!1)}}},It=(Y==null?void 0:Y.status)??c,ur=Ve==="view_pay"&&Y&&It==="pending";return!e&&!t?i.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):V||Ve==="view_pay"&&fe?i.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):Ve==="view_pay"&&!Y&&!fe&&Z?i.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",Z]}):Ve==="create"&&!x&&!V&&Z?i.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",Z]}):i.jsxs("div",{className:"pharmacy-billing-page",children:[" ",i.jsxs("div",{className:"billing-container printable-section",children:[i.jsxs("div",{className:"billing-header print-only",children:[i.jsx("div",{className:"clinic-header-left",children:i.jsx("div",{className:"clinic-info-print",children:i.jsxs("div",{className:"clinic-name-and-details-print",children:[i.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),i.jsx("h2",{className:"clinic-name-print",children:Ye?`${Ye}`:"Bill"}),(be||we)&&i.jsxs("div",{className:"clinic-details-print",children:[be&&i.jsx("span",{className:"small-text clinic-address",children:be}),we&&i.jsx("span",{className:"small-text clinic-notes",children:we})]})]})})}),i.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient"]})," ",(x==null?void 0:x.name)||"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Date"]})," ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})]}),Y&&i.jsxs("div",{className:"info-item",children:[i.jsx("strong",{children:"# Invoice"})," ",$4e(Y.id)]})]})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("section",{className:"order-details-card no-print",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Patient Information"})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",x==null?void 0:x.name]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," ID"]})," ",x==null?void 0:x.id]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Age/Gender"]})," ",(x==null?void 0:x.age)??"N/A"," / ",(x==null?void 0:x.gender)??"N/A"]}),Ve==="view_pay"&&Y&&i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(Nc,{size:16})," Bill ID"]})," ",Y.id]})]})]}),i.jsxs("section",{className:"medications-card",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("h2",{children:"Bill Items"}),Ve==="create"&&o==="pharmacy"&&!f&&w.some(pt=>pt.drug_id!=null)&&i.jsxs("button",{onClick:()=>kt(w),disabled:G,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[i.jsx(Kk,{size:14,className:`lucide ${G?"animate-spin":""}`}),G?"Refreshing...":"Refresh"]})]}),i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"S.No."}),i.jsx("th",{children:"Description"}),i.jsx("th",{children:"Qty"}),i.jsx("th",{children:"Price"}),i.jsx("th",{children:"Total"}),Ve==="create"&&!f&&i.jsx("th",{className:"no-print",children:"Action"})]})}),i.jsxs("tbody",{children:[Ve==="create"&&w.map((pt,jt)=>i.jsxs("tr",{children:[i.jsx("td",{children:jt+1}),i.jsx("td",{children:pt.name}),i.jsx("td",{children:pt.quantity}),i.jsxs("td",{children:["",pt.price.toFixed(2)]}),i.jsxs("td",{children:["",pt.total.toFixed(2)]}),!f&&i.jsx("td",{className:"no-print",children:typeof pt.id=="number"&&pt.name!=="Consultation Fee"?i.jsxs("button",{onClick:()=>Xe(pt.id),className:"remove-item-button",title:"Remove",children:[" ",i.jsx(zt,{size:16})," "]}):i.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",i.jsx(nZ,{size:14})," "]})})]},pt.id)),Ve==="view_pay"&&Y&&Y.items.map((pt,jt)=>i.jsxs("tr",{children:[i.jsx("td",{children:jt+1}),i.jsx("td",{children:pt.name}),i.jsx("td",{children:pt.quantity}),i.jsxs("td",{children:["",pt.price.toFixed(2)]}),i.jsxs("td",{children:["",(pt.total??pt.price*pt.quantity).toFixed(2)]})]},jt)),(Ve==="create"&&w.length===0||Ve==="view_pay"&&(Y==null?void 0:Y.items.length)===0)&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"20px"},children:"No items added."})})]})]}),Ve==="create"&&!f&&i.jsxs("div",{className:"add-item-form no-print",style:{padding:"15px",borderTop:"1px solid #eee"},children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Item Description"}),i.jsx("input",{type:"text",value:C,onChange:pt=>O(pt.target.value),placeholder:"Service Name",className:"custom-text-input"})]}),i.jsxs("div",{className:"form-group",style:{maxWidth:"80px"},children:[i.jsx("label",{children:"Qty"}),i.jsx("input",{type:"number",min:"1",value:I,onChange:pt=>F(parseInt(pt.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),i.jsxs("div",{className:"form-group",style:{maxWidth:"100px"},children:[i.jsx("label",{children:"Price ()"}),i.jsx("input",{type:"number",value:E,onChange:pt=>P(pt.target.value),placeholder:"0.00",className:"custom-text-input"})]}),i.jsx("button",{onClick:ze,className:"add-item-button",children:"Add Item"}),o==="consultation"&&i.jsxs("div",{className:"default-fee-section",style:{marginLeft:"auto",display:"flex",alignItems:"flex-end",gap:"5px"},children:[i.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[i.jsx("label",{children:"Default Fee"}),i.jsx("input",{type:"number",value:et,onChange:pt=>ht(pt.target.value),style:{width:"80px",padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}})]}),i.jsx("button",{onClick:at,className:"secondary-button",style:{padding:"10px"},children:i.jsx(Xs,{size:16})})]})]})]}),i.jsxs("div",{className:"bill-summary-print print-only",children:[i.jsxs("div",{className:"bill-summary-details",children:[i.jsxs("div",{className:"summary-row-print",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",wt.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row-print",children:[i.jsxs("span",{children:["Discount (",$,"%)"]}),i.jsxs("span",{children:["- ",Pt.toFixed(2)]})]}),i.jsx("div",{className:"print-only-total",children:i.jsxs("strong",{children:["Grand Total: ",Je.toFixed(2)]})})]}),Ce&&i.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[i.jsx(oa,{value:Ce,size:100}),i.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),i.jsx("aside",{className:"billing-sidebar no-print",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Billing Summary"})}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",wt.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Discount"}),Ve==="create"&&!f?i.jsxs("div",{className:"discount-input-wrapper",children:[i.jsx("input",{type:"number",value:$,onChange:pt=>z(parseFloat(pt.target.value)||0),min:"0",max:"100",className:"discount-input-total"}),"%"]}):i.jsxs("span",{children:[$,"%"]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Discount Amount"}),i.jsxs("span",{children:["- ",Pt.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row grand-total-row",children:[i.jsx("strong",{children:"Grand Total"}),i.jsxs("strong",{children:["",Je.toFixed(2)]})]}),Ve==="view_pay"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"summary-row",style:{color:"green"},children:[i.jsx("span",{children:"Total Paid"}),i.jsxs("span",{children:["",dn.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",style:{color:"red",fontWeight:"bold"},children:[i.jsx("span",{children:"Balance Due"}),i.jsxs("span",{children:["",Ee.toFixed(2)]})]})]}),i.jsx("div",{className:"qr-code-container",children:Ce?i.jsxs(i.Fragment,{children:[i.jsx(oa,{value:Ce,size:128}),i.jsx("p",{children:"Scan to pay using UPI"})]}):i.jsx("p",{children:"UPI QR code not available."})}),Ve==="create"&&i.jsxs("div",{className:"payment-mode-section",children:[i.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:i.jsx("strong",{children:"Payment Mode"})}),i.jsxs("select",{id:"paymentMode",value:L,onChange:pt=>H(pt.target.value),className:"payment-mode-select",disabled:f||K,children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),i.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),i.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"}),i.jsx("option",{value:"online",children:"Online (Razorpay)"})]})]}),Ve==="create"&&L==="credit"&&i.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[i.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),pe?i.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"Current Debt:"}),i.jsxs("strong",{style:{color:W&&W>0?"#dc3545":"#28a745"},children:["",(W||0).toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"This Bill:"}),i.jsxs("strong",{children:["+ ",Je.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[i.jsx("span",{children:i.jsx("strong",{children:"New Total Debt:"})}),i.jsxs("strong",{style:{color:"#dc3545"},children:["",((W||0)+Je).toFixed(2)]})]})]})]}),Ve==="create"&&!f&&i.jsx("div",{className:"bill-actions",children:i.jsx("button",{onClick:vt,className:"primary-button",disabled:K||w.length===0,children:K?"Processing...":"Finalise and Bill"})}),Ve==="view_pay"&&i.jsxs("div",{className:"bill-actions",children:[i.jsx("button",{onClick:()=>window.print(),className:"secondary-button",children:"Print Bill"}),ur&&Ee>0&&i.jsxs("div",{className:"payment-recording-section",style:{marginTop:"20px",borderTop:"1px dashed #ccc",paddingTop:"15px"},children:[i.jsx("h3",{style:{fontSize:"1em",marginBottom:"10px"},children:"Record Payment"}),i.jsxs("div",{style:{display:"flex",gap:"5px",marginBottom:"10px"},children:[i.jsx("input",{type:"number",value:de,onChange:pt=>Q(pt.target.value),placeholder:"Amount",className:"custom-text-input",style:{flex:1}}),i.jsxs("select",{value:oe,onChange:pt=>re(pt.target.value),className:"custom-select-input",style:{width:"auto"},children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),i.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),i.jsx("option",{value:"credit",children:"Credit"})]})]}),i.jsx("button",{onClick:Re,disabled:ae,className:"primary-button",style:{width:"100%",fontSize:"0.9em"},children:ae?"Recording...":"Record Payment"})]})]})]})})]}),i.jsxs("div",{className:"amount-in-words-print print-only",children:[i.jsx("strong",{children:"Amount in Words:"})," ",F4e(Ve==="view_pay"&&Y?Y.amount:Je)]}),i.jsxs("div",{className:"terms-conditions-print print-only",children:[i.jsx("h4",{children:"Terms & Conditions"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Goods once sold will not be taken back or exchanged."}),i.jsx("li",{children:"All disputes are subject to local jurisdiction."}),i.jsx("li",{children:"Please retain this bill for future reference."})]})]}),i.jsxs("div",{className:"signature-section-print print-only",children:[i.jsx("div",{className:"receiver-sign",children:i.jsx("div",{className:"sign-line",children:"Receiver's Signature"})}),i.jsxs("div",{className:"authorized-sign",children:[i.jsxs("div",{className:"for-clinic",children:["For ",Ye||"Clinic"]}),i.jsx("div",{className:"sign-line",children:"Authorised Signatory"})]})]}),i.jsxs("footer",{className:"billing-footer print-only",children:[i.jsx("p",{className:"thank-you",children:"Thank you for your visit!"}),i.jsx("p",{className:"computer-generated",children:"This is a computer generated invoice and does not require a physical signature."})]})]})]})},z4e=()=>{const e=Mt(),t=$r(),{patientId:n,queueId:r,patientName:a,initialItems:s,billType:o,relatedId:l,initialStatus:c,initialDiscountPercentage:u,doctorId:f,billId:p,labOrderId:y}=t.state||{},[v,x]=j.useState(null),[b,w]=j.useState(null),[_,T]=j.useState(null),[C,O]=j.useState(null),[E,P]=j.useState(null),[I,F]=j.useState(null),[$,z]=j.useState(null),[L,H]=j.useState(null),[V,ne]=j.useState(!0),[Z,q]=j.useState(null),[K,se]=j.useState(a||"");j.useEffect(()=>{if(!n){console.error("BillingPage loaded without required patientId in location state."),e("/");return}(async()=>{ne(!0),q(null);try{let xe=n,Ie=s||null,Ne=c||null,ke=o||null,de=l||null,Q=u!==void 0?parseFloat(u):null,oe=a||null,re=null;if(p){console.log(`Fetching details for Bill ID: ${p}`);const ae=await ce(`/api/bills/${p}`);if(!ae.ok){const W=await ae.json().catch(()=>({message:`Failed to fetch bill details for ID ${p}`}));throw new Error(W.message||`Failed to fetch bill details (Status: ${ae.status})`)}const X=await ae.json();if(console.log("Fetched Bill Data:",X),Ie=X.bill.items||[],Ne=X.bill.status||"pending",ke=X.bill.type||null,de=X.bill.related_id||null,Q=X.bill.discount_percentage!==void 0&&X.bill.discount_percentage!==null?parseFloat(X.bill.discount_percentage):0,xe=X.bill.patient_id,O(Ie),P(Ne),F(ke),z(de),H(Q),xe){const W=await ce(`/api/patients/${xe}`);if(W.ok){const ie=await W.json();oe=ie.name,re=ie.phone??null,T(ie.insurance_type??null),se(oe),w(re)}else console.warn(`Could not fetch patient details for ID ${xe} from bill.`),se("Patient (Not Found)")}else console.warn(`Bill ${p} does not have an associated patient_id.`),se("Patient (Unknown)")}else if(y){console.log(`Fetching details for Lab Order ID: ${y}`);const ae=await ce(`/api/lab/${y}`);if(!ae.ok){let W=`Failed to fetch lab order details (Status: ${ae.status} ${ae.statusText})`;try{W=(await ae.json()).message||W}catch{console.error("Response was not valid JSON:",await ae.text())}throw new Error(W)}const X=await ae.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(X,null,2)),Ie=(X.tests||[]).filter(W=>W&&typeof W.name=="string"&&W.price!==void 0&&W.id!==void 0).map(W=>{const ie=parseFloat(W.price||"0"),pe=!isNaN(ie)&&isFinite(ie)?ie:0;return{item_id:W.id,name:W.name,price:pe,quantity:1,total:pe*1,type:"lab_test"}}),Ie&&Ie.length===0&&(X.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",X.tests),q(W=>`${W?W+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),Ne="pending",ke="lab",de=y,xe=X.patient_id,O(Ie),P(Ne),F(ke),z(de),xe){const W=await ce(`/api/patients/${xe}`);if(W.ok){const ie=await W.json();oe=ie.name,re=ie.phone??null,T(ie.insurance_type??null),se(oe),w(re)}else console.warn(`Could not fetch patient details for ID ${xe} from lab order.`),se("Patient (Not Found)")}else console.warn(`Lab Order ${y} does not have an associated patient_id.`),se("Patient (Unknown)")}else if(O(s||null),P(c||null),F(o||null),z(l||null),H(u!==void 0?parseFloat(u):null),se(a||`ID ${n}`),xe){const ae=await ce(`/api/patients/${xe}`);if(ae.ok){const X=await ae.json();w(X.phone??null),T(X.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${xe}.`)}if(r){const ae=await ce(`/api/queue/${r}`);if(ae.ok){const X=await ae.json();x(X.token_number)}else console.warn(`Could not fetch queue details for ID ${r}.`)}}catch(xe){console.error("Error fetching billing page details:",xe),q(`Failed to load details: ${xe.message}`),O(null),P(null),F(null),z(null),se(a||""),w(null),x(null)}finally{ne(!1)}})()},[n,p,y,r,e]);const G=Y=>{console.log(`Billing process completed for patient ID ${n}. New Bill ID: ${Y}`),e(-1)},B=()=>{console.log(`Bill updated for patient ID ${n}.`),e(-1)};if(!n)return i.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[i.jsx(hR,{size:48,className:"mb-4 text-red-500"}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),i.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),i.jsx("button",{onClick:()=>e("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(V)return i.jsxs("div",{className:"billing-page-container",children:[i.jsx("div",{className:"back-button-container",children:i.jsx(ee,{width:80,height:32})}),i.jsxs("div",{className:"billing-content-wrapper",children:[i.jsx("div",{className:"flex items-center gap-4 mb-4",children:i.jsx(ee,{width:300,height:32})}),i.jsxs("div",{className:"patient-info-bar mb-6",style:{display:"flex",gap:"1rem",padding:"10px",background:"#f9fafb",borderRadius:"8px"},children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:120,height:20}),i.jsx(ee,{width:140,height:20})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-2 space-y-4",children:[i.jsx(ee,{width:"100%",height:200,className:"rounded-lg"}),i.jsx(ee,{width:"100%",height:150,className:"rounded-lg"})]}),i.jsx("div",{className:"space-y-4",children:i.jsx(ee,{width:"100%",height:300,className:"rounded-lg"})})]})]})]});if(Z)return i.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[i.jsx(hR,{size:48,className:"mb-4"}),i.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),i.jsx("p",{className:"text-sm text-center mb-4",children:Z}),i.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),i.jsx("button",{onClick:()=>e(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const me=(E??c)==="paid";return i.jsxs("div",{className:"billing-page-container",children:[i.jsx("div",{className:"back-button-container",children:i.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:i.jsx(rn,{size:20,className:"lucide"})})}),i.jsxs("div",{className:"billing-content-wrapper",children:[i.jsxs("h3",{className:"billing-page-title",children:[p?"Bill Details":y?"Create Lab Bill":"Create Bill"," for Patient: ",K||`ID ${n}`]}),i.jsxs("div",{className:"patient-info-bar",children:[v!==null&&i.jsxs("span",{children:[i.jsx(ka,{size:14,className:"lucide"})," Token: ",v]}),b&&i.jsxs("span",{children:[i.jsx(ig,{size:14,className:"lucide"})," Phone: ",b]}),y&&i.jsxs("span",{className:"lab-order-info",children:[i.jsx(Za,{size:14,className:"lucide"})," Lab Order: ",y.substring(0,8),"..."]}),!b&&v===null&&!y&&i.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),_&&i.jsxs("span",{className:"insurance-info",children:[i.jsx(VZ,{size:14,className:"lucide"})," Insurance: ",_.replace(/_/g," ").replace(/\b\w/g,Y=>Y.toUpperCase())]}),!b&&v===null&&!y&&!_&&i.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),i.jsx(B4e,{patientId:n,labOrderId:y,queueId:r,onBillCreated:G,onBillUpdated:B,initialItems:C??s,billType:I??o,relatedId:$??l,initialStatus:E??c,initialDiscountPercentage:L??u,readOnlyMode:me,doctorId:f,patientInsuranceType:_??void 0})]})]})},q4e=()=>{const{patientId:e}=Ai(),t=Mt(),[n,r]=j.useState([]),[a,s]=j.useState(!1),[o,l]=j.useState(null),[c,u]=j.useState("");return j.useEffect(()=>{(async()=>{if(!e){l("Patient ID not provided in URL.");return}s(!0),l(null),r([]);try{try{const v=await ce(`/api/patients/${e}`);if(v.ok){const x=await v.json();u(x.name)}}catch(v){console.warn("Could not fetch patient name:",v)}console.log(`Fetching pharmacy orders for patient ID: ${e}`);const p=await ce(`/api/pharmacy-orders/patient/${e}`);if(!p.ok){const v=await p.json().catch(()=>({}));throw new Error(v.message||`HTTP error! status: ${p.status}`)}const y=await p.json();console.log("Fetched Pharmacy Orders:",y),r(y||[])}catch(p){console.error("Error fetching pharmacy orders:",p),l(`Failed to load pharmacy orders: ${p.message}`)}finally{s(!1)}})()},[e]),i.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[i.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[i.jsx(rn,{size:16,className:"mr-1"}),"Back"]}),i.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[i.jsx(jf,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",c&&`for ${c}`]}),i.jsx("div",{})," "]}),a&&i.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>i.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx(ee,{width:150,height:20}),i.jsx(ee,{width:100,height:20})]}),i.jsx(ee,{width:200,height:20,className:"mb-2"}),i.jsx(ee,{width:180,height:20,className:"mb-3"}),i.jsx(ee,{width:120,height:24,className:"mb-2"}),i.jsxs("div",{className:"space-y-1 ml-4",children:[i.jsx(ee,{width:"80%",height:16}),i.jsx(ee,{width:"70%",height:16}),i.jsx(ee,{width:"60%",height:16})]})]},f))}),o&&i.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:o}),!a&&n.length===0&&!o&&i.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!a&&n.length>0&&i.jsx("div",{className:"space-y-4",children:n.map(f=>i.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:"Date:"})," ",new Date(f.date).toLocaleDateString()]}),i.jsxs("p",{className:"text-sm font-medium capitalize",children:[i.jsx("strong",{children:"Status:"})," ",f.status]})]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:"Prescribed By:"})," ",f.prescribedBy||"N/A"]}),f.dispensedBy&&i.jsxs("p",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:"Dispensed By:"})," ",f.dispensedBy]}),i.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),i.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:f.medications.map((p,y)=>i.jsxs("li",{children:[p.name," - Qty: ",p.quantity,p.tabletsPerDay&&` (${p.tabletsPerDay} per day`,p.numberOfDays&&` for ${p.numberOfDays} days)`,!p.tabletsPerDay&&p.numberOfDays&&` (for ${p.numberOfDays} days)`,p.tabletsPerDay&&!p.numberOfDays&&")"]},y))})]},f.id))})]})},U4e=()=>{const e=Mt(),t=$r(),[n,r]=j.useState(null),[a,s]=j.useState([]),[o,l]=j.useState([]),[c,u]=j.useState(""),[f,p]=j.useState([]),[y,v]=j.useState(null),[x,b]=j.useState(!1),[w,_]=j.useState(null),[T,C]=j.useState(!0),[O,E]=j.useState(""),[P,I]=j.useState([]),[F,$]=j.useState(!1),[z,L]=j.useState(null),[H,V]=j.useState(!1),[ne,Z]=j.useState(!1),[q,K]=j.useState([]),[se,G]=j.useState(!1),[B,fe]=j.useState(null),me=/^\+?[0-9\s\-().]{7,20}$/,Y=/^[a-zA-Z\s'-]{2,}$/,xe=j.useCallback(async()=>{try{const _e=await ce("/api/drugs");if(!_e.ok)throw new Error("Failed to fetch drugs");const Fe=await _e.json(),Ye=Fe.drugs||Fe||[];s(Ye)}catch(_e){console.error("Failed to fetch available drugs:",_e),v("Could not load drug list. "+_e.message)}},[]),Ie=j.useCallback(async _e=>{G(!0),fe(null);try{const Fe=await ce(`/api/pharmacy-orders/patient/${_e}`);if(!Fe.ok){const Ke=await Fe.json().catch(()=>({}));throw new Error(Ke.message||`HTTP error! status: ${Fe.status}`)}const Ye=await Fe.json();K(Ye||[])}catch(Fe){console.error("Failed to fetch previous pharmacy orders:",Fe),fe(`Could not load previous orders: ${Fe.message}`)}finally{G(!1)}},[]);j.useEffect(()=>{var _e;xe(),(_e=t.state)!=null&&_e.patient?Q(t.state.patient):C(!0)},[xe,t.state]),j.useEffect(()=>{n!=null&&n.id?Ie(n.id):K([])},[n,Ie]);const Ne=j.useMemo(()=>new Zs(a,{keys:["name","brand_name"],threshold:.3}),[a]);j.useEffect(()=>{if(!c){p([]);return}const _e=Ne.search(c).map(Fe=>Fe.item);p(_e.slice(0,10))},[c,Ne]);const ke=j.useMemo(()=>pd(async _e=>{if(_e.trim().length<2){I([]),$(!1),L(null);return}$(!0),L(null);try{const Fe=new URLSearchParams({search:encodeURIComponent(_e),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),Ye=await ce(`/api/patients?${Fe.toString()}`);if(!Ye.ok){const be=await Ye.text();throw new Error(`API Error (${Ye.status}): ${be||Ye.statusText}`)}const Ke=await Ye.json();I(Ke.patients)}catch(Fe){console.error("Error searching patients:",Fe),L(Fe.message||"Failed to search patients."),I([])}finally{$(!1)}},300),[me]),de=_e=>{const Fe=_e.target.value;E(Fe),V(me.test(Fe)),Z(Y.test(Fe)&&!me.test(Fe)),$(!0),ke(Fe)},Q=j.useCallback(_e=>{r(_e),C(!1),E(""),I([]),L(null)},[]),oe=j.useCallback(async _e=>{if(!O||_e==="phone"&&!H||_e==="name"&&!ne){L(`Invalid ${_e} to create a new patient.`);return}$(!0),L(null);try{const Ye=await ce("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:_e==="name"?O:"direct pharmacy",phone:_e==="phone"?O:null,age:null,gender:null,token:null})});if(!Ye.ok){const be=await Ye.json();throw new Error(be.message||`Failed to create patient: ${Ye.statusText}`)}const Ke=await Ye.json();alert(`New patient "${Ke.name}" created with ${_e==="phone"?`phone ${Ke.phone}`:`name ${Ke.name}`}.`),Q(Ke)}catch(Fe){console.error("Error creating new patient:",Fe),L(Fe.message||"Failed to create new patient.")}finally{$(!1)}},[O,H,ne,Q]),re=()=>{r(null),C(!0),l([]),v(null),K([])},ae=_e=>{if(o.some(Fe=>Fe.drug_id===_e.id)){const Fe=_e.name||_e.brand_name||"This drug";v(`${Fe} is already in the order.`),setTimeout(()=>v(null),3e3),u(""),p([]);return}l(Fe=>[...Fe,{drug_id:_e.id,name:_e.name||_e.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,tabletsPerDay:1,numberOfDays:1,mrp:Number(_e.mrp)||0,originalMrp:Number(_e.mrp)||0,stock:_e.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(_e.mrp)||0)/(W(_e.pack)||1),pack:_e.pack}]),u(""),p([])},X=()=>{const _e=c.trim();if(!_e){v("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>v(null),3e3);return}e("/dashboard/inventory/add",{state:{initialDrugName:_e}}),u(""),p([])},W=_e=>{if(!_e)return null;const Fe=_e.match(/(?:\d+x)?(\d+)/);return Fe?parseInt(Fe[1],10):null},ie=_e=>{l(Fe=>Fe.filter(Ye=>(Ye.drug_id??Ye.name)!==_e))},pe=(_e,Fe)=>{l(Ye=>Ye.map(Ke=>{if((Ke.drug_id??Ke.name)===_e&&Ke.isLoose){const De=W(Ke.pack),we=Math.max(0,Fe),ve=we*(De??1)+(Ke.looseUnits??0);return{...Ke,loosePacks:we,looseQuantity:ve,pack_quantity:we}}return Ke}))},le=(_e,Fe)=>{l(Ye=>Ye.map(Ke=>{if((Ke.drug_id??Ke.name)===_e&&Ke.isLoose){const De=W(Ke.pack),we=Math.max(0,Fe),ve=(Ke.loosePacks??0)*(De??1)+we;return{...Ke,looseUnits:we,looseQuantity:ve}}return Ke}))},je=_e=>{const Fe=[];_e.medications.forEach(Ye=>{if(o.find(be=>be.drug_id&&Ye.drug_id&&be.drug_id===Ye.drug_id||be.name.toLowerCase()===Ye.name.toLowerCase()))l(be=>be.map(De=>{if(De.drug_id&&Ye.drug_id&&De.drug_id===Ye.drug_id||De.name.toLowerCase()===Ye.name.toLowerCase()){const we=(De.pack_quantity??0)+(Ye.pack_quantity??0),ve=(De.loose_quantity??0)+(Ye.loose_quantity??0),Ce=Ye.tabletsPerDay??De.tabletsPerDay,nt=Ye.numberOfDays??De.numberOfDays,Ve=W(De.pack),dt=we*(Ve??1)+ve;return{...De,pack_quantity:we,loose_quantity:ve,directions_to_use:Ye.directions_to_use??De.directions_to_use,tabletsPerDay:Ce,numberOfDays:nt,looseQuantity:dt,loosePacks:Math.floor(dt/(Ve??1)),looseUnits:dt%(Ve??1)}}return De}));else{let be=Ye.drug_id,De=Ye.drug_id?a.find(we=>we.id===Ye.drug_id):void 0;if(!be&&Ye.name){const we=a.find(ve=>ve.name&&ve.name.toLowerCase()===Ye.name.toLowerCase());we&&(be=we.id,De=we)}Fe.push({drug_id:be,name:Ye.name,pack_quantity:Ye.pack_quantity??0,loose_quantity:Ye.loose_quantity??0,directions_to_use:Ye.directions_to_use,tabletsPerDay:Ye.tabletsPerDay??1,numberOfDays:Ye.numberOfDays??1,mrp:De?De.mrp:Ye.pack_price,originalMrp:De?De.mrp:Ye.pack_price,stock:De?De.stock:Ye.stock,isLoose:!0,loosePacks:0,looseUnits:(Ye.pack_quantity??0)*(W((De==null?void 0:De.pack)||Ye.pack)??1)+(Ye.loose_quantity??0),looseQuantity:(Ye.pack_quantity??0)*(W((De==null?void 0:De.pack)||Ye.pack)??1)+(Ye.loose_quantity??0),pricePerLooseUnit:(De?Number(De.mrp):Number(Ye.pack_price)||0)/(W((De==null?void 0:De.pack)||Ye.pack)||1),pack:(De==null?void 0:De.pack)||Ye.pack})}}),l(Ye=>[...Ye,...Fe]),_e.prescriptionForUnavailableDrugs&&(!w||!w.includes(_e.prescriptionForUnavailableDrugs))&&_(Ye=>Ye?`${Ye}

-- From Order ${_e.id.substring(0,8)} --
${_e.prescriptionForUnavailableDrugs}`:_e.prescriptionForUnavailableDrugs),v("Medications from previous order added to current order."),setTimeout(()=>v(null),3e3)},Ge=async _e=>{if(_e.preventDefault(),v(null),b(!0),!n){v("No patient selected for the order."),b(!1);return}if(o.length===0&&!(w!=null&&w.trim())){v("Please add at least one medication or provide a prescription for unavailable drugs."),b(!1);return}const Fe=o.filter(Ke=>{const be=Ke.looseQuantity??0;return be<=0||Ke.stock!==void 0&&be>Ke.stock});if(Fe.length>0){v(`Invalid quantity or insufficient stock for: ${Fe.map(Ke=>Ke.name).join(", ")}`),b(!1);return}const Ye={patient_id:n.id,items:o.map(Ke=>{const be=Ke.mrp??0,De=Ke.pricePerLooseUnit??0,we=De*(Ke.looseQuantity??0);return{drug_id:Ke.drug_id===void 0?null:Ke.drug_id,name:Ke.name,pack_quantity:Ke.loosePacks??0,loose_quantity:Ke.looseUnits??0,pack_price:be,loose_price:De,total_price:we,price:Ke.originalMrp??0,directions_to_use:Ke.directions_to_use===void 0?null:Ke.directions_to_use,tabletsPerDay:Ke.tabletsPerDay??1,numberOfDays:Ke.numberOfDays??1}}),order_total:et,prescription_for_unavailable_drugs:w};try{const Ke=await ce("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ye)});if(!Ke.ok){const be=await Ke.json();throw new Error(be.message||`Failed to create order: ${Ke.statusText}`)}e(-1)}catch(Ke){console.error("Failed to create pharmacy order:",Ke),v(Ke.message||"Failed to create order. Please try again.")}finally{b(!1)}},et=j.useMemo(()=>o.reduce((_e,Fe)=>{const Ye=Fe.isLoose?Fe.pricePerLooseUnit??0:Fe.mrp??0,Ke=Fe.isLoose?Fe.looseQuantity??0:Fe.quantity??0;return _e+Ye*Ke},0),[o]),ht=(Number(et)||0).toFixed(2);return i.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",i.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",i.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[i.jsxs("button",{onClick:()=>e(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[i.jsx(rn,{size:20})," "]}),i.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),T&&i.jsxs("div",{className:"content-section",children:[" ",i.jsx("h3",{className:"section-title",children:"Select Patient"})," ",i.jsxs("div",{className:"mb-3 relative",children:[i.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",i.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:O,onChange:de,className:"custom-text-input mt-1",autoFocus:!0})]}),z&&i.jsx("div",{className:"ai-function-status error mb-3 p-3",children:z})," ",F?i.jsx("div",{className:"patient-search-results items-loading mt-1",children:[1,2,3].map(_e=>i.jsx("div",{className:"px-4 py-3 border-b border-gray-100 last:border-0",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(ee,{width:40,height:20}),i.jsx(ee,{width:120,height:20})]}),i.jsx("div",{className:"mt-1 sm:mt-0",children:i.jsx(ee,{width:150,height:16})})]})},_e))}):P.length>0&&i.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",i.jsxs("ul",{children:[" ",P.map(_e=>i.jsxs("li",{onClick:()=>Q({id:_e.id,name:_e.name,token:_e.token,age:_e.age,gender:_e.gender,phone:_e.phone}),children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[i.jsxs("div",{className:"font-medium",children:[i.jsxs("span",{className:"patient-token mr-2",children:["#",_e.token]}),_e.name]}),i.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[_e.age?`${_e.age} yrs`:"Age N/A",_e.gender?` / ${_e.gender}`:" / Gender N/A",_e.phone&&i.jsxs("span",{className:"hidden sm:inline",children:[" / ",_e.phone]})]})]}),_e.phone&&i.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",_e.phone]})]},_e.id))]})]}),O.length>=2&&!F&&P.length===0&&!z&&i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',O,'".']}),H&&i.jsx("button",{type:"button",onClick:()=>oe("phone"),className:"create-patient-button mt-3 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:F,children:'Create "direct pharmacy" Patient with this Phone'}),ne&&i.jsx("button",{type:"button",onClick:()=>oe("name"),className:"create-patient-button mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-2",disabled:F,children:"Create Patient with this Name"})]}),O.length<2&&!F&&i.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),n&&!T&&i.jsxs("form",{onSubmit:Ge,children:[i.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",i.jsxs("div",{children:[i.jsxs("h3",{className:"section-title",children:[" ","Patient: ",i.jsx("span",{className:"font-normal",children:n.name})]}),i.jsxs("p",{className:"text-sm mt-1",children:["Token: ",i.jsx("span",{className:"font-medium",children:n.token??"N/A"}),n.age&&`    Age: ${n.age}`,n.gender&&`    Gender: ${n.gender}`,n.phone&&`    Phone: ${n.phone}`]}),i.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${n.id}`,children:["ID: ",n.id.substring(0,12),"..."]})]}),i.jsx("button",{type:"button",onClick:re,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),y&&i.jsx("div",{className:"ai-function-status error mb-4 p-3",children:y})," ",se?i.jsxs("div",{className:"content-section mt-4",children:[i.jsx("h3",{className:"section-title",children:"Previous Orders"}),i.jsx("div",{className:"space-y-4",children:[1,2].map(_e=>i.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx(ee,{width:180,height:20}),i.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsx(ee,{width:"90%",height:16}),i.jsx(ee,{width:"70%",height:16})]}),i.jsx(ee,{width:"100%",height:36,style:{borderRadius:"6px"}})]},_e))})]}):B?i.jsx("div",{className:"ai-function-status error mb-4 p-3",children:B}):q.length>0?i.jsxs("div",{className:"content-section mt-4",children:[i.jsx("h3",{className:"section-title",children:"Previous Orders"}),i.jsx("div",{className:"space-y-4",children:q.map(_e=>i.jsxs("div",{className:"previous-order-card p-4 border rounded-lg shadow-sm bg-gray-50",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("p",{className:"font-semibold text-gray-800",children:["Order Date: ",new Date(_e.date).toLocaleDateString()]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_e.status==="dispensed"?"bg-green-100 text-green-800":_e.status==="pending"?"bg-yellow-100 text-yellow-800":_e.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:_e.status.charAt(0).toUpperCase()+_e.status.slice(1)})]}),i.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-3",children:_e.medications.map((Fe,Ye)=>i.jsxs("li",{children:[i.jsx("strong",{children:Fe.name}),": ",Fe.quantity," Qty",Fe.directions_to_use&&` - Directions: ${Fe.directions_to_use}`]},Ye))}),_e.prescriptionForUnavailableDrugs&&i.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[i.jsx("span",{className:"font-semibold",children:"Prescription for Unavailable:"}),i.jsxs("div",{className:"prose prose-sm max-w-none",children:[" ",i.jsx(Sf,{remarkPlugins:[Nf],children:_e.prescriptionForUnavailableDrugs})]})]}),i.jsxs("button",{type:"button",onClick:()=>je(_e),className:"add-previous-meds-button mt-3 px-3 py-1.5 text-sm font-medium rounded-md flex items-center justify-center",children:[i.jsx(Yr,{size:16,className:"mr-1"})," Add Medications to Current Order"]})]},_e.id))})]}):n&&i.jsx("div",{className:"content-section text-center py-4 mt-4",children:i.jsx("p",{className:"text-gray-500",children:"No previous orders found for this patient."})}),i.jsxs("div",{className:"mb-4 content-section",children:[i.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),i.jsx("textarea",{id:"prescription-unavailable",rows:3,value:w??"",onChange:_e=>_(_e.target.value||null),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),i.jsxs("div",{className:"mb-4 relative content-section",children:[" ",i.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",i.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:c,onChange:_e=>u(_e.target.value),className:"custom-text-input mt-1"}),c&&i.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",f.length>0&&i.jsxs("ul",{children:[" ",f.map(_e=>i.jsxs("li",{onClick:()=>ae(_e),className:"cursor-pointer select-none relative",children:[i.jsx("span",{className:"font-medium block truncate",children:_e.name||_e.brand_name}),i.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",_e.stock??"N/A",", MRP: ",Number(_e.mrp||0).toFixed(2),")"]})]},_e.id))]}),c.trim()&&!a.some(_e=>_e.name&&_e.name.toLowerCase()===c.trim().toLowerCase()||_e.brand_name&&_e.brand_name.toLowerCase()===c.trim().toLowerCase())&&i.jsxs("div",{onClick:X,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',c.trim(),'" as new item']}),c.trim()&&f.length===0&&a.some(_e=>_e.name&&_e.name.toLowerCase()===c.trim().toLowerCase()||_e.brand_name&&_e.brand_name.toLowerCase()===c.trim().toLowerCase())&&i.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),i.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",i.jsx("h4",{className:"section-title",children:"Order Items"})," ",o.length===0&&i.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),o.length>0&&i.jsx("ul",{className:"space-y-4",children:o.map(_e=>{const Fe=_e.drug_id??_e.name,Ye=!_e.drug_id;return i.jsxs("li",{className:"order-item-card text-sm",children:[" ",i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[i.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[i.jsxs("span",{className:`item-name block text-base ${Ye?"custom":""}`,children:[" ",_e.name,Ye?" (custom)":""]}),!Ye&&_e.pricePerLooseUnit!==void 0&&i.jsxs("span",{className:"item-details text-xs",children:[" ","@ ",(Number(_e.pricePerLooseUnit)||0).toFixed(2)," per loose unit"]}),_e.stock!==void 0&&i.jsxs("span",{className:`item-details text-xs ml-2 ${_e.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",_e.stock,")"]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[i.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[i.jsx("label",{htmlFor:`loose-packs-${Fe}`,className:"dosage-label",children:"Packs:"}),i.jsxs("div",{className:"quantity-control",children:[i.jsx("button",{type:"button",onClick:()=>pe(Fe,(_e.loosePacks??0)-1),className:"quantity-btn",children:"-"}),i.jsx("input",{type:"number",id:`loose-packs-${Fe}`,min:"0",value:_e.loosePacks||"",onChange:Ke=>{const be=parseInt(Ke.target.value,10);pe(Fe,isNaN(be)?0:be)},onFocus:Ke=>Ke.target.select(),className:"dosage-input text-sm text-right"}),i.jsx("button",{type:"button",onClick:()=>pe(Fe,(_e.loosePacks??0)+1),className:"quantity-btn",children:"+"})]})]}),i.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[i.jsx("label",{htmlFor:`loose-units-${Fe}`,className:"dosage-label",children:"Loose:"}),i.jsxs("div",{className:"quantity-control",children:[i.jsx("button",{type:"button",onClick:()=>le(Fe,(_e.looseUnits??0)-1),className:"quantity-btn",children:"-"}),i.jsx("input",{type:"number",id:`loose-units-${Fe}`,min:"0",value:_e.looseUnits||"",onChange:Ke=>{const be=parseInt(Ke.target.value,10);le(Fe,isNaN(be)?0:be)},onFocus:Ke=>Ke.target.select(),className:"dosage-input text-sm text-right"}),i.jsx("button",{type:"button",onClick:()=>le(Fe,(_e.looseUnits??0)+1),className:"quantity-btn",children:"+"})]}),_e.pack&&i.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",_e.pack.split("x")[1]||_e.pack," per pack)"]})]})]}),i.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[i.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","",(Number((_e.pricePerLooseUnit??0)*(_e.looseQuantity??0))||0).toFixed(2)]}),i.jsx("button",{type:"button",onClick:()=>ie(Fe),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:i.jsx(zr,{size:18})})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2 mt-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:`tablets-per-day-${Fe}`,className:"dosage-label",children:"Per Day:"}),i.jsxs("div",{className:"quantity-control",children:[i.jsx("button",{type:"button",onClick:()=>l(Ke=>Ke.map(be=>be.drug_id===Fe?{...be,tabletsPerDay:Math.max(1,(be.tabletsPerDay??1)-1)}:be)),className:"quantity-btn",children:"-"}),i.jsx("input",{type:"number",id:`tablets-per-day-${Fe}`,min:"1",value:_e.tabletsPerDay??1,onChange:Ke=>{const be=parseInt(Ke.target.value,10);l(De=>De.map(we=>we.drug_id===Fe?{...we,tabletsPerDay:isNaN(be)?1:Math.max(1,be)}:we))},onFocus:Ke=>Ke.target.select(),className:"dosage-input text-sm text-right"}),i.jsx("button",{type:"button",onClick:()=>l(Ke=>Ke.map(be=>be.drug_id===Fe?{...be,tabletsPerDay:(be.tabletsPerDay??1)+1}:be)),className:"quantity-btn",children:"+"})]})]}),i.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[i.jsx("label",{htmlFor:`number-of-days-${Fe}`,className:"dosage-label",children:"No. Days:"}),i.jsxs("div",{className:"quantity-control",children:[i.jsx("button",{type:"button",onClick:()=>l(Ke=>Ke.map(be=>be.drug_id===Fe?{...be,numberOfDays:Math.max(1,(be.numberOfDays??1)-1)}:be)),className:"quantity-btn",children:"-"}),i.jsx("input",{type:"number",id:`number-of-days-${Fe}`,min:"1",value:_e.numberOfDays??1,onChange:Ke=>{const be=parseInt(Ke.target.value,10);l(De=>De.map(we=>we.drug_id===Fe?{...we,numberOfDays:isNaN(be)?1:Math.max(1,be)}:we))},onFocus:Ke=>Ke.target.select(),className:"dosage-input text-sm text-right"}),i.jsx("button",{type:"button",onClick:()=>l(Ke=>Ke.map(be=>be.drug_id===Fe?{...be,numberOfDays:(be.numberOfDays??1)+1}:be)),className:"quantity-btn",children:"+"})]})]})]}),i.jsx("div",{className:"flex items-center mt-2",children:_e.pack&&W(_e.pack)&&i.jsx("span",{className:"ml-4 text-sm text-gray-400",children:(()=>{const Ke=W(_e.pack),be=_e.looseQuantity??0;if(Ke&&Ke>0){const De=Math.floor(be/Ke),we=be%Ke;return`(Subtract: ${De} packs, ${we} loose)`}return""})()})}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{htmlFor:`directions-${Fe}`,className:"dosage-label",children:"Directions:"}),i.jsx("input",{type:"text",id:`directions-${Fe}`,placeholder:"e.g., 'After food', 'Twice a day'",value:_e.directions_to_use??"",onChange:Ke=>{const be=Ke.target.value;l(De=>De.map(we=>(we.drug_id??we.name)===Fe?{...we,directions_to_use:be}:we))},className:"dosage-input text-sm w-full mt-1"})]})]},Fe)})})]}),o.length>0&&i.jsx("div",{className:"mt-6 text-right pr-4",children:i.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ",ht]})}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx("button",{type:"submit",disabled:x||o.length===0&&!(w!=null&&w.trim()),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${x||o.length===0&&!(w!=null&&w.trim())?"":"hover:opacity-90"}`,children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},FW=()=>{const{orderId:e}=Ai(),t=Mt(),[n,r]=j.useState(null),[a,s]=j.useState(null),[o,l]=j.useState([]),[c,u]=j.useState([]),[f,p]=j.useState(""),[y,v]=j.useState([]),[x,b]=j.useState(null),[w,_]=j.useState(!1),[T,C]=j.useState(null),[O,E]=j.useState(!0);Hc();const P=j.useCallback(async()=>{E(!0);try{const q=await ce(`/api/pharmacy-orders/${e}`);if(!q.ok)throw new Error("Failed to fetch order details");const K=await q.json();r(K),s({id:K.patientId,name:K.patientName||"N/A",token:K.patientTokenNumber}),C(K.prescriptionForUnavailableDrugs);const se=K.medications.map(G=>{const B=$(G.pack),fe=G.pack_quantity*(B??1)+G.loose_quantity;return{...G,isLoose:!0,loosePacks:G.pack_quantity,looseUnits:G.loose_quantity,looseQuantity:fe,pack_price:G.pack_price,loose_price:G.loose_price,total_price:G.total_price,pricePerLooseUnit:G.loose_price,originalPrice:G.pack_price,box_number:G.box_number,pack:G.pack,batch:G.batch,expiry_date:G.expiry_date,discount_percentage:G.discount_percentage}});u(se)}catch(q){b("Could not load order details. "+q.message)}finally{E(!1)}},[e]),I=j.useCallback(async()=>{try{const q=await ce("/api/drugs");if(!q.ok)throw new Error("Failed to fetch drugs");const K=await q.json(),se=K.drugs||K||[];l(se)}catch(q){b("Could not load drug list. "+q.message)}},[]);j.useEffect(()=>{P(),I()},[P,I]);const F=j.useMemo(()=>new Zs(o,{keys:["name","brand_name"],threshold:.3}),[o]);j.useEffect(()=>{if(!f){v([]);return}const q=F.search(f).map(K=>K.item);v(q.slice(0,10))},[f,F]);const $=q=>{if(!q)return null;const K=q.match(/(?:\d+x)?(\d+)/);return K?parseInt(K[1],10):null},z=q=>{if(c.some(K=>K.drug_id===q.id)){b(`${q.name||q.brand_name} is already in the order.`),setTimeout(()=>b(null),3e3),p(""),v([]);return}u(K=>[...K,{drug_id:q.id,name:q.name||q.brand_name||"Unnamed Drug",pack_quantity:0,loose_quantity:1,pack_price:Number(q.mrp)||0,loose_price:(Number(q.mrp)||0)/($(q.pack)||1),total_price:(Number(q.mrp)||0)/($(q.pack)||1),discount_percentage:0,directions_to_use:"",tabletsPerDay:1,numberOfDays:1,stock:q.stock,isLoose:!0,looseQuantity:1,loosePacks:0,looseUnits:1,pricePerLooseUnit:(Number(q.mrp)||0)/($(q.pack)||1),originalPrice:Number(q.mrp)||0,pack:q.pack}]),p(""),v([])},L=q=>{u(K=>K.filter(se=>(se.drug_id??se.name)!==q))},H=(q,K)=>{u(se=>se.map(G=>{if((G.drug_id??G.name)===q&&G.isLoose){const B=$(G.pack),fe=Math.max(0,K),me=fe*(B??1)+(G.looseUnits??0);return{...G,loosePacks:fe,looseQuantity:me,pack_quantity:fe}}return G}))},V=(q,K)=>{u(se=>se.map(G=>{if((G.drug_id??G.name)===q&&G.isLoose){const B=$(G.pack),fe=Math.max(0,K),me=(G.loosePacks??0)*(B??1)+fe;return{...G,looseUnits:fe,looseQuantity:me,loose_quantity:fe}}return G}))},ne=async q=>{if(q.preventDefault(),b(null),_(!0),c.length===0&&!(T!=null&&T.trim())){b("Please add at least one medication or provide a prescription."),_(!1);return}const K=c.filter(G=>{const B=G.looseQuantity??0;return B<=0||G.stock!==void 0&&B>G.stock});if(K.length>0){b(`Invalid quantity or insufficient stock for: ${K.map(G=>G.name).join(", ")}`),_(!1);return}const se={items:c.map(G=>({drug_id:G.drug_id??null,name:G.name,pack_quantity:G.loosePacks??0,loose_quantity:G.looseUnits??0,pack_price:G.pack_price??0,loose_price:G.loose_price??0,total_price:(G.loose_price??0)*(G.looseQuantity??0),discount_percentage:G.discount_percentage??0,directions_to_use:G.directions_to_use??null,tabletsPerDay:G.tabletsPerDay??1,numberOfDays:G.numberOfDays??1})),prescription_for_unavailable_drugs:T,order_total:Z};try{const G=await ce(`/api/pharmacy-orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!G.ok){const B=await G.json();throw new Error(B.message||"Failed to update order")}t(-1)}catch(G){b(G.message||"Failed to update order. Please try again.")}finally{_(!1)}},Z=j.useMemo(()=>c.reduce((q,K)=>{const se=K.loose_price??0,G=K.looseQuantity??0;return q+se*G},0),[c]);return O?i.jsxs("div",{className:"edit-pharmacy-order-container",children:[i.jsxs("div",{className:"page-header",children:[i.jsxs("div",{className:"header-left",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx(ee,{variant:"circular",width:40,height:40}),i.jsx(ee,{width:300,height:32})]}),i.jsx("div",{className:"header-right",children:i.jsx(ee,{width:100,height:32,style:{borderRadius:"16px"}})})]}),i.jsx("div",{className:"order-meta",style:{display:"flex",gap:"1rem",margin:"1rem 0"},children:i.jsx(ee,{width:200,height:24})}),i.jsxs("div",{className:"main-layout",children:[i.jsxs("div",{className:"left-column",children:[i.jsxs("div",{className:"card search-section",children:[i.jsx("div",{className:"card-header",children:i.jsx(ee,{width:200,height:24})}),i.jsx("div",{style:{padding:"1.5rem"},children:i.jsx(ee,{height:42})})]}),i.jsxs("div",{className:"card medications-list-section",children:[i.jsx("div",{className:"card-header",children:i.jsx(ee,{width:250,height:24})}),i.jsxs("div",{className:"table-container",style:{padding:"0 1rem 1rem"},children:[i.jsxs("div",{className:"table-header-row",style:{display:"flex",gap:"1rem",padding:"1rem"},children:[i.jsx(ee,{width:"30%",height:20}),i.jsx(ee,{width:"20%",height:20}),i.jsx(ee,{width:"20%",height:20}),i.jsx(ee,{width:"15%",height:20}),i.jsx(ee,{width:"5%",height:20})]}),i.jsx("div",{className:"table-body",children:[1,2,3].map(q=>i.jsxs("div",{className:"table-row",style:{display:"flex",gap:"1rem",padding:"1rem",borderBottom:"1px solid #eee"},children:[i.jsxs("div",{style:{width:"30%"},children:[i.jsx(ee,{width:"80%",height:20,className:"mb-2"}),i.jsx(ee,{width:"40%",height:14})]}),i.jsx(ee,{width:"20%",height:36}),i.jsx(ee,{width:"20%",height:36}),i.jsx(ee,{width:"15%",height:20,style:{alignSelf:"center"}}),i.jsx(ee,{width:"5%",height:24,style:{alignSelf:"center"}})]},q))})]})]})]}),i.jsxs("div",{className:"right-column",children:[i.jsxs("div",{className:"card notes-card",children:[i.jsx("div",{className:"card-header border-b-0 pb-2",children:i.jsx(ee,{width:180,height:24})}),i.jsx("div",{style:{padding:"1rem"},children:i.jsx(ee,{height:80})})]}),i.jsx("div",{style:{marginTop:"20px"},children:i.jsx(ee,{height:48,width:"100%"})})]})]})]}):n?i.jsxs("div",{className:"edit-pharmacy-order-container",children:[i.jsxs("div",{className:"page-header",children:[i.jsxs("div",{className:"header-left",children:[i.jsx("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:i.jsx(rn,{size:20})}),i.jsxs("h2",{className:"page-title",children:["EDIT ORDER ",i.jsxs("span",{className:"text-gray-500 text-lg font-normal ml-2",children:[a==null?void 0:a.name," #",n.id.substring(0,4)]})]})]}),i.jsx("div",{className:"header-right",children:i.jsx("span",{className:"status-badge",children:n.status.toUpperCase()})})]}),i.jsx("div",{className:"order-meta",children:i.jsxs("span",{className:"order-date",children:[" Order Date: ",new Date(n.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})}),i.jsxs("form",{onSubmit:ne,className:"main-layout",children:[i.jsxs("div",{className:"left-column",children:[i.jsxs("div",{className:"card search-section",children:[i.jsx("div",{className:"card-header",children:i.jsx("h3",{children:" Find & Add Medication"})}),i.jsxs("div",{className:"search-wrapper",children:[i.jsx("input",{type:"text",placeholder:"Search by name or brand...",value:f,onChange:q=>p(q.target.value),className:"search-input"}),f&&i.jsx("div",{className:"dropdown-results",children:y.length>0?i.jsx("ul",{children:y.map(q=>i.jsxs("li",{onClick:()=>z(q),className:"dropdown-item",children:[i.jsx("span",{className:"drug-name",children:q.name||q.brand_name}),i.jsxs("span",{className:"drug-meta",children:["(Stock: ",q.stock??"N/A",", MRP: ",Number(q.mrp||0).toFixed(2),")"]})]},q.id))}):i.jsxs("div",{className:"p-3 text-gray-500 text-sm",children:['No drugs found matching "',f,'"']})})]})]}),i.jsxs("div",{className:"card medications-list-section",children:[i.jsx("div",{className:"card-header",children:i.jsxs("h3",{children:[" Medications in Order ",i.jsxs("span",{className:"item-count",children:[c.length," items"]})]})}),c.length>0?i.jsxs("div",{className:"table-container",children:[i.jsxs("div",{className:"table-header-row",children:[i.jsx("div",{className:"col-medication",children:"MEDICATION"}),i.jsx("div",{className:"col-directions",children:"DIRECTIONS"}),i.jsx("div",{className:"col-quantity",children:"QUANTITY"}),i.jsx("div",{className:"col-subtotal",children:"SUBTOTAL"}),i.jsx("div",{className:"col-action"})]}),i.jsx("div",{className:"table-body",children:c.map(q=>{const K=q.drug_id??q.name;return i.jsxs("div",{className:"table-row",children:[i.jsxs("div",{className:"col-medication",children:[i.jsx("span",{className:"med-name",children:q.name}),q.pack&&i.jsx("span",{className:"med-unit text-xs text-gray-500 block",children:q.pack}),i.jsxs("div",{className:"stock-info",children:[" Stock: ",i.jsxs("span",{className:"stock-value",children:[" ",q.stock!==void 0?q.pack?`BOX OF ${$(q.pack)}`:q.stock:"N/A"]})]})]}),i.jsx("div",{className:"col-directions",children:i.jsx("input",{type:"text",placeholder:"1 tablet twice daily...",value:q.directions_to_use??"",onChange:se=>{const G=se.target.value;u(B=>B.map(fe=>(fe.drug_id??fe.name)===K?{...fe,directions_to_use:G}:fe))},className:"directions-input"})}),i.jsx("div",{className:"col-quantity",children:i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"PACKS"}),i.jsx("input",{type:"number",min:"0",value:q.loosePacks||"",onChange:se=>H(K,se.target.value===""?0:parseInt(se.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]}),i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{fontSize:"10px",fontWeight:"bold",color:"#9ca3af",display:"block",marginBottom:"2px"},children:"LOOSE"}),i.jsx("input",{type:"number",min:"0",value:q.looseUnits||"",onChange:se=>V(K,se.target.value===""?0:parseInt(se.target.value)),className:"qty-input",style:{width:"100%",textAlign:"center"}})]})]})}),i.jsxs("div",{className:"col-subtotal",children:["",(Number((q.pricePerLooseUnit??0)*(q.looseQuantity??0))||0).toFixed(2)]}),i.jsx("div",{className:"col-action",children:i.jsx("button",{type:"button",onClick:()=>L(K),className:"delete-btn",title:"Remove Item",children:i.jsx(zr,{size:18,strokeWidth:2.5})})})]},K)})})]}):i.jsx("div",{className:"empty-state",children:"No medications added. Search above to add."})]})]}),i.jsxs("div",{className:"right-column",children:[i.jsxs("div",{className:"card notes-card",children:[i.jsx("div",{className:"card-header border-b-0 pb-2",children:i.jsx("h3",{children:" Prescription Notes"})}),i.jsx("textarea",{rows:3,value:T??"",onChange:q=>C(q.target.value||null),placeholder:"Add notes about unavailable drugs...",className:"notes-input"})]}),i.jsxs("button",{type:"submit",disabled:w,className:"confirm-btn",style:{width:"100%",margin:"20px 0 0 0"},children:[i.jsx("span",{className:"check-icon",children:""})," ",w?"Updating...":"Confirm Changes"]}),x&&i.jsx("div",{className:"error-alert mt-4",children:x})]})]})]}):i.jsx("div",{className:"p-6 text-red-500 flex justify-center items-center h-screen",children:"Order not found or failed to load."})},V4e=(e,t,n,r="non-black")=>{if(isNaN(e)||isNaN(t)||e<=0||t<=0)return null;let a;return n==="female"?e<=.7?a=141*Math.pow(e/.7,-.329)*Math.pow(.993,t):a=141*Math.pow(e/.7,-1.209)*Math.pow(.993,t):e<=.9?a=141*Math.pow(e/.9,-.411)*Math.pow(.993,t):a=141*Math.pow(e/.9,-1.209)*Math.pow(.993,t),r==="black"&&(a*=1.018),parseFloat(a.toFixed(2))},H4e=(e,t,n)=>{if(isNaN(e)||isNaN(t)||isNaN(n)||e<0||t<0||n<0||n>=400)return null;const r=e-t-n/5;return parseFloat(r.toFixed(2))},G4e=(e,t)=>{if(isNaN(e)||isNaN(t)||e<0||t<0)return null;const n=e-t;return parseFloat(n.toFixed(2))},W4e=(e,t)=>{if(isNaN(e)||isNaN(t)||e<0||t<0)return null;const n=e-t;return parseFloat(n.toFixed(2))},K4e=(e,t,n)=>{if(isNaN(e)||isNaN(t)||isNaN(n)||e<0||t<0||n<0)return null;const r=e-(t+n);return parseFloat(r.toFixed(2))},Y4e=(e,t,n)=>{if(isNaN(e)||isNaN(t)||isNaN(n)||e<0||t<0||n<0)return null;const r=2*e+t/18+n/2.8;return parseFloat(r.toFixed(2))},Q4e=e=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(e),Cz=()=>{var re,ae;const{orderId:e}=Ai(),t=Mt(),[n,r]=j.useState(null),[a,s]=j.useState({}),[o,l]=j.useState(!0),[c,u]=j.useState(!1),[f,p]=j.useState(null),[y,v]=j.useState(null),[x,b]=j.useState(null),[w,_]=j.useState({}),[T,C]=j.useState(null),[O,E]=j.useState(!1),[P,I]=j.useState(""),[F,$]=j.useState(!1),[z,L]=j.useState(""),[H,V]=j.useState(""),[ne,Z]=j.useState(!1),[q,K]=j.useState(""),se=j.useCallback(async X=>{var W;try{const ie=await ce(`/api/patients/${X}`);if(!ie.ok)throw new Error(`Failed to fetch patient details: ${ie.status}`);const pe=await ie.json();v(pe.age),b(((W=pe.sex)==null?void 0:W.toLowerCase())==="female"?"female":"male"),pe.phone&&r(le=>le?{...le,Patient:{...le.Patient,phone:pe.phone}}:null)}catch(ie){console.error("Error fetching patient details:",ie),v(null),b(null)}},[]),G=j.useCallback(async()=>{if(e){l(!0),p(null);try{const X=await ce(`/api/lab/${e}`);if(!X.ok){const pe=await X.json().catch(()=>({message:`HTTP error! status: ${X.status}`}));throw new Error(pe.message||`HTTP error! status: ${X.status}`)}const W=await X.json();if(r(W),W.createdAt)try{const pe=new Date(W.createdAt),le=new Date(pe.getTime()-pe.getTimezoneOffset()*6e4).toISOString().slice(0,16);I(le)}catch(pe){console.error("Error formatting date for edit:",pe)}if(W.report_date)try{const pe=new Date(W.report_date),le=new Date(pe.getTime()-pe.getTimezoneOffset()*6e4).toISOString().slice(0,16);L(le)}catch(pe){console.error("Error formatting report date for edit:",pe)}else{const pe=new Date,le=new Date(pe.getTime()-pe.getTimezoneOffset()*6e4).toISOString().slice(0,16);L(le)}W.referral_doctor&&K(W.referral_doctor),W.patient_id&&se(W.patient_id);const ie={};if(W.tests&&W.tests.forEach(pe=>{ie[pe.id]={},pe.default_parameters&&pe.default_parameters.length>0?pe.default_parameters.forEach(le=>{ie[pe.id][le.name]=le.defaultValue}):ie[pe.id].report_content=""}),W.report_content)try{const pe=JSON.parse(W.report_content);typeof pe=="object"&&pe!==null&&!Array.isArray(pe)?s(pe):(console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),s(ie))}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),s(ie)}else s({})}catch(X){console.error("Failed to fetch lab order details:",X),p(X instanceof Error?X.message:"An unknown error occurred while fetching order details.")}finally{l(!1)}}},[e,se]);j.useEffect(()=>{e?G():(p("No Order ID provided in the URL."),l(!1))},[e,G]),j.useEffect(()=>{(async()=>{try{const W=await ce("/api/clinics/settings");if(W.ok){const ie=await W.json();V(ie.labLetterheadUrl||"")}}catch(W){console.error("Error fetching clinic settings:",W)}})()},[]);const B=(X,W,ie)=>{s(pe=>{var dt,Ct,kt,ze,Xe,Je,wt,Pt,dn,Ee,at,Tt,Re,vt,It,ur,pt,jt,bt;const le={...pe,[X]:{...pe[X],[W]:ie}},je=parseFloat((dt=le[X])==null?void 0:dt.Creatinine),Ge=y,et=x;if(W==="Creatinine"&&!isNaN(je)&&Ge!==null&&et!==null){const Dt=V4e(je,Ge,et);Dt!==null&&((Ct=n==null?void 0:n.tests.find(Ut=>Ut.id===X))!=null&&Ct.default_parameters.find(Ut=>Ut.name==="eGFR"))&&(le[X].eGFR=Dt)}const ht=parseFloat((kt=le[X])==null?void 0:kt["Total Cholesterol"]),_e=parseFloat((ze=le[X])==null?void 0:ze["HDL Cholesterol"]),Fe=parseFloat((Xe=le[X])==null?void 0:Xe.Triglycerides);if((W==="Total Cholesterol"||W==="HDL Cholesterol"||W==="Triglycerides")&&!isNaN(ht)&&!isNaN(_e)&&!isNaN(Fe)){const Dt=H4e(ht,_e,Fe);Dt!==null&&((Je=n==null?void 0:n.tests.find(Ut=>Ut.id===X))!=null&&Je.default_parameters.find(Ut=>Ut.name==="LDL Cholesterol"))&&(le[X]["LDL Cholesterol"]=Dt)}const Ye=parseFloat((wt=le[X])==null?void 0:wt["Total Bilirubin"]),Ke=parseFloat((Pt=le[X])==null?void 0:Pt["Direct Bilirubin"]);if((W==="Total Bilirubin"||W==="Direct Bilirubin")&&!isNaN(Ye)&&!isNaN(Ke)){const Dt=G4e(Ye,Ke);Dt!==null&&((dn=n==null?void 0:n.tests.find(Ut=>Ut.id===X))!=null&&dn.default_parameters.find(Ut=>Ut.name==="Indirect Bilirubin"))&&(le[X]["Indirect Bilirubin"]=Dt)}const be=parseFloat((Ee=le[X])==null?void 0:Ee["Total Protein"]),De=parseFloat((at=le[X])==null?void 0:at.Albumin);if((W==="Total Protein"||W==="Albumin")&&!isNaN(be)&&!isNaN(De)){const Dt=W4e(be,De);Dt!==null&&((Tt=n==null?void 0:n.tests.find(Ut=>Ut.id===X))!=null&&Tt.default_parameters.find(Ut=>Ut.name==="Globulin"))&&(le[X].Globulin=Dt)}const we=parseFloat((Re=le[X])==null?void 0:Re.Sodium),ve=parseFloat((vt=le[X])==null?void 0:vt.Chloride),Ce=parseFloat((It=le[X])==null?void 0:It.Bicarbonate);if((W==="Sodium"||W==="Chloride"||W==="Bicarbonate")&&!isNaN(we)&&!isNaN(ve)&&!isNaN(Ce)){const Dt=K4e(we,ve,Ce);Dt!==null&&((ur=n==null?void 0:n.tests.find(Ut=>Ut.id===X))!=null&&ur.default_parameters.find(Ut=>Ut.name==="Anion Gap"))&&(le[X]["Anion Gap"]=Dt)}const nt=parseFloat((pt=le[X])==null?void 0:pt.Glucose),Ve=parseFloat((jt=le[X])==null?void 0:jt.BUN);if((W==="Sodium"||W==="Glucose"||W==="BUN")&&!isNaN(we)&&!isNaN(nt)&&!isNaN(Ve)){const Dt=Y4e(we,nt,Ve);Dt!==null&&((bt=n==null?void 0:n.tests.find(Ut=>Ut.id===X))!=null&&bt.default_parameters.find(Ut=>Ut.name==="Osmolality"))&&(le[X].Osmolality=Dt)}return le})},fe=async X=>{const W=a[X]||{},ie=n==null?void 0:n.tests.find(Ge=>Ge.id===X);if(!ie)return;const pe={};ie.default_parameters&&ie.default_parameters.forEach(Ge=>{pe[Ge.name]=Ge.defaultValue});const le={...pe,...W},je={...a,[X]:le};s(je),u(!0),p(null);try{const Ge=await ce(`/api/lab/${e}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(je),isPartial:!0})});if(!Ge.ok)throw new Error(`Save failed: ${Ge.status}`)}catch(Ge){console.error("Error saving test report:",Ge),alert("Failed to save test report.")}finally{u(!1)}},me=async(X=null)=>{if(!n||!n.tests||!e){alert("Order details not loaded.");return}u(!0),p(null);try{let W;if(X===null){const pe={};n.tests.forEach(le=>{const je=a[le.id]||{},Ge={};le.default_parameters&&le.default_parameters.forEach(et=>{et.defaultValue!==void 0&&et.defaultValue!==null&&(Ge[et.name]=et.defaultValue)}),pe[le.id]={...Ge,...je},(!le.default_parameters||le.default_parameters.length===0)&&!pe[le.id].report_content&&(pe[le.id].report_content="")}),W=pe,s(pe)}else{const pe=a[X]||{},le=n.tests.find(et=>et.id===X);if(!le){u(!1);return}const je={};le.default_parameters&&le.default_parameters.forEach(et=>{je[et.name]=et.defaultValue});const Ge={...je,...pe};W={...a,[X]:Ge},s(W)}const ie=await ce(`/api/lab/${e}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(W),isPartial:X!==null})});if(!ie.ok)throw new Error(`Save failed: ${ie.status}`);C(X),setTimeout(()=>{window.print()},100)}catch(W){console.error("Error saving before print:",W),alert("Failed to save report before printing.")}finally{u(!1)}},Y=()=>{n&&mI(n)},xe=async()=>{if(!n||!n.tests){alert("Order details not loaded.");return}if(!e){alert("Cannot submit report without an Order ID.");return}const X={};if(n.tests.forEach(W=>{const ie=a[W.id]||{},pe={};W.default_parameters&&W.default_parameters.forEach(le=>{le.defaultValue!==void 0&&le.defaultValue!==null&&(pe[le.name]=le.defaultValue)}),X[W.id]={...pe,...ie},(!W.default_parameters||W.default_parameters.length===0)&&!X[W.id].report_content&&(X[W.id].report_content="")}),Object.keys(X).length===0){alert("Report content cannot be empty.");return}s(X),u(!0),p(null);try{const W=await ce(`/api/lab/${e}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(X)})});if(!W.ok){const ie=await W.json().catch(()=>({message:`Submission failed: ${W.status}`}));throw new Error(ie.message||`Submission failed: ${W.status}`)}t(-1)}catch(W){console.error("Error submitting report:",W),p(W instanceof Error?W.message:"An unknown error occurred during submission.")}finally{u(!1)}},Ie=async()=>{if(!(!e||!P))try{const X=await ce(`/api/lab/orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:new Date(P).toISOString()})});if(!X.ok)throw new Error("Failed to update date");const W=await X.json();W.order&&r(ie=>ie?{...ie,createdAt:W.order.createdAt}:null),E(!1)}catch(X){console.error("Failed to update date:",X),alert("Failed to update date")}},Ne=async()=>{if(!(!e||!z))try{const X=await ce(`/api/lab/orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportDate:new Date(z).toISOString()})});if(!X.ok)throw new Error("Failed to update report date");const W=await X.json();W.order&&r(ie=>ie?{...ie,report_date:W.order.report_date}:null),$(!1)}catch(X){console.error("Failed to update report date:",X),alert("Failed to update report date")}},ke=async()=>{if(e)try{const X=await ce(`/api/lab/orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralDoctor:q})});if(!X.ok)throw new Error("Failed to update referral doctor");const W=await X.json();W.order&&(K(W.order.referral_doctor||""),r(ie=>ie?{...ie,referral_doctor:W.order.referral_doctor}:null)),Z(!1)}catch(X){console.error("Failed to update referral doctor:",X),alert("Failed to update referral doctor")}};if(o)return i.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:i.jsxs("div",{className:"lab-inventory-card",children:[i.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem"},children:[i.jsx(ee,{width:200,height:28}),i.jsxs("div",{className:"header-actions",style:{display:"flex",gap:"8px"},children:[i.jsx(ee,{width:80,height:32}),i.jsx(ee,{width:80,height:32}),i.jsx(ee,{width:80,height:32})]})]}),i.jsxs("div",{className:"lab-inventory-card no-print summary-card",style:{margin:"1rem",padding:"0"},children:[i.jsx("div",{className:"lab-inventory-header summary-header",style:{padding:"0.75rem 1rem",borderBottom:"1px solid #eee"},children:i.jsx(ee,{width:120,height:20})}),i.jsxs("div",{className:"summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",padding:"1rem"},children:[i.jsx(ee,{height:24}),i.jsx(ee,{height:24}),i.jsx(ee,{height:24}),i.jsx(ee,{height:24})]})]}),i.jsx("div",{className:"lab-tests-container no-print",style:{padding:"1rem"},children:[1,2].map(X=>i.jsxs("div",{className:"test-card",style:{marginBottom:"1.5rem",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",background:"white"},children:[i.jsxs("div",{className:"test-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[i.jsx(ee,{width:250,height:24}),i.jsxs("div",{style:{display:"flex",gap:"6px"},children:[i.jsx(ee,{width:70,height:30}),i.jsx(ee,{width:36,height:30})]})]}),i.jsx("div",{className:"parameter-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[1,2,3,4].map(W=>i.jsxs("div",{className:"parameter-item",children:[i.jsx(ee,{width:"30%",height:16,style:{marginBottom:"0.5rem"}}),i.jsx(ee,{height:40})]},W))})]},X))})]})});if(f&&!n)return i.jsx("div",{className:"lab-inventory-container",children:i.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[i.jsx(Wr,{size:48,className:"mb-3",style:{margin:"0 auto"}}),i.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),i.jsx("p",{className:"error-text",children:f}),i.jsx("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:i.jsx(rn,{size:16})})]})});if(!n)return i.jsx("div",{className:"lab-inventory-container",children:i.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[i.jsx(Nl,{size:48,className:"mb-3",style:{margin:"0 auto"}}),i.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${e}.`}),i.jsx("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:i.jsx(rn,{size:16})})]})});const de=(re=n==null?void 0:n.Patient)==null?void 0:re.name,Q=(ae=n==null?void 0:n.Patient)==null?void 0:ae.patient_token_number;return i.jsx("div",{className:"lab-inventory-container enter-lab-report-page",children:i.jsxs("div",{className:"lab-inventory-card",children:[i.jsxs("div",{className:"lab-inventory-header no-print",children:[i.jsx("h2",{children:"Enter Lab Report"}),i.jsxs("div",{className:"header-actions",children:[i.jsx("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:i.jsx(rn,{size:16})}),i.jsxs("button",{onClick:()=>me(null),className:"lab-inventory-button compact-btn",title:"Print Full Report",children:[i.jsx($x,{size:16}),i.jsx("span",{className:"btn-text",children:"Print"})]}),i.jsxs("button",{onClick:Y,className:"lab-inventory-button whatsapp-btn compact-btn",title:"Share via WhatsApp",children:[i.jsx(Vq,{size:16}),i.jsx("span",{className:"btn-text",children:"Share"})]})]})]}),n&&i.jsxs("div",{className:"lab-inventory-card no-print summary-card",children:[i.jsxs("h3",{className:"lab-inventory-header summary-header",children:[i.jsx(Nl,{size:14})," Summary"]}),i.jsxs("div",{className:"summary-grid",children:[i.jsxs("div",{className:"summary-item",children:[i.jsx(mr,{size:13,className:"icon"}),i.jsx("strong",{children:"Patient:"})," ",de??"N/A"," (",Q??"N/A",")"]}),i.jsxs("div",{className:"summary-item",children:[i.jsx(rR,{size:13,className:"icon"}),i.jsx("strong",{children:"Ordered:"})," ",O?i.jsxs("span",{className:"date-edit-wrapper",children:[i.jsx("input",{type:"datetime-local",value:P,onChange:X=>I(X.target.value),className:"lab-inventory-input date-input"}),i.jsx("button",{onClick:Ie,className:"icon-btn save",children:i.jsx(Tl,{size:12})}),i.jsx("button",{onClick:()=>E(!1),className:"icon-btn cancel",children:i.jsx(zt,{size:12})})]}):i.jsxs(i.Fragment,{children:[gf(new Date(n.createdAt),"dd MMM, HH:mm"),i.jsx("button",{onClick:()=>E(!0),className:"icon-btn edit",title:"Edit",children:i.jsx(xc,{size:11})})]})]}),i.jsxs("div",{className:"summary-item",children:[i.jsx(rR,{size:13,className:"icon"}),i.jsx("strong",{children:"Reported:"})," ",F?i.jsxs("span",{className:"date-edit-wrapper",children:[i.jsx("input",{type:"datetime-local",value:z,onChange:X=>L(X.target.value),className:"lab-inventory-input date-input"}),i.jsx("button",{onClick:Ne,className:"icon-btn save",children:i.jsx(Tl,{size:12})}),i.jsx("button",{onClick:()=>$(!1),className:"icon-btn cancel",children:i.jsx(zt,{size:12})})]}):i.jsxs(i.Fragment,{children:[n.report_date?gf(new Date(n.report_date),"dd MMM, HH:mm"):"Not Set",i.jsx("button",{onClick:()=>$(!0),className:"icon-btn edit",title:"Edit",children:i.jsx(xc,{size:11})})]})]}),i.jsxs("div",{className:"summary-item",children:[i.jsx(mr,{size:13,className:"icon"}),i.jsx("strong",{children:"Ref. Doctor:"})," ",ne?i.jsxs("span",{className:"date-edit-wrapper",children:[i.jsx("input",{type:"text",value:q,onChange:X=>K(X.target.value),className:"lab-inventory-input date-input",placeholder:"Enter referral doctor name"}),i.jsx("button",{onClick:ke,className:"icon-btn save",children:i.jsx(Tl,{size:12})}),i.jsx("button",{onClick:()=>Z(!1),className:"icon-btn cancel",children:i.jsx(zt,{size:12})})]}):i.jsxs(i.Fragment,{children:[q||"Not Set",i.jsx("button",{onClick:()=>Z(!0),className:"icon-btn edit",title:"Edit",children:i.jsx(xc,{size:11})})]})]})]})]}),i.jsxs("div",{className:"lab-tests-container no-print",children:[n==null?void 0:n.tests.map(X=>{var W;return i.jsxs("div",{className:"test-card",children:[i.jsxs("div",{className:"test-header",children:[i.jsx("h4",{children:X.name}),i.jsxs("div",{style:{display:"flex",gap:"6px"},children:[i.jsxs("button",{type:"button",onClick:ie=>{ie.stopPropagation(),fe(X.id)},className:"lab-inventory-button lab-inventory-button-secondary compact-btn",disabled:c,children:[i.jsx(Xs,{size:14}),i.jsx("span",{className:"btn-text",children:"Save"})]}),i.jsx("button",{type:"button",onClick:ie=>{ie.stopPropagation(),me(X.id)},className:"lab-inventory-button compact-btn",title:"Print",children:i.jsx($x,{size:14})})]})]}),i.jsx("div",{className:"test-parameters-body",children:X.default_parameters&&X.default_parameters.length>0?i.jsx("div",{className:"parameter-grid",children:X.default_parameters.map(ie=>{var ht,_e;const pe=(ht=a[X.id])==null?void 0:ht[ie.name],le=pe!==void 0?pe:ie.defaultValue??"",je=ie.type==="number"&&le!==""&&(ie.lower_limit!=null&&parseFloat(String(le))<ie.lower_limit||ie.upper_limit!=null&&parseFloat(String(le))>ie.upper_limit),Ge=Q4e(ie.name),et=(_e=w[X.id])==null?void 0:_e[ie.name];return i.jsxs("div",{className:"parameter-item",children:[i.jsxs("label",{className:"parameter-label",htmlFor:`${X.id}-${ie.name}`,children:[ie.name," ",ie.unit&&i.jsxs("span",{className:"parameter-unit",children:["(",ie.unit,")"]})]}),i.jsxs("div",{className:"input-wrapper",children:[ie.type==="boolean"?i.jsxs("select",{id:`${X.id}-${ie.name}`,value:(le==null?void 0:le.toString())??"false",onChange:Fe=>B(X.id,ie.name,Fe.target.value==="true"),className:"lab-inventory-input parameter-input",disabled:c,children:[i.jsx("option",{value:"true",children:"Reactive"}),i.jsx("option",{value:"false",children:"Non-Reactive"})]}):i.jsx("input",{id:`${X.id}-${ie.name}`,type:ie.type==="number"?"number":"text",value:le,onChange:Fe=>B(X.id,ie.name,Fe.target.value),className:`lab-inventory-input parameter-input ${je?"abnormal-result":""} ${Ge?"calculated-input":""}`,disabled:c||Ge&&!et,placeholder:ie.lower_limit!=null&&ie.upper_limit!=null?`${ie.lower_limit}-${ie.upper_limit}`:""}),Ge&&i.jsx("button",{type:"button",onClick:()=>_(Fe=>({...Fe,[X.id]:{...Fe[X.id]||{},[ie.name]:!et}})),className:"edit-calculated-btn",title:et?"Lock":"Edit",children:i.jsx(xc,{size:11})})]})]},ie.name)})}):i.jsxs("div",{className:"parameter-item",style:{width:"100%"},children:[i.jsx("label",{className:"parameter-label",htmlFor:`${X.id}-report_content`,children:"Results / Observations"}),i.jsx("textarea",{id:`${X.id}-report_content`,value:((W=a[X.id])==null?void 0:W.report_content)??"",onChange:ie=>B(X.id,"report_content",ie.target.value),className:"lab-inventory-input parameter-textarea",rows:3,placeholder:`Enter results for ${X.name}...`,disabled:c})]})})]},X.id)}),f&&i.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[i.jsx(Wr,{size:15,className:"inline mr-1"}),f]})]}),i.jsx("div",{className:"form-actions-footer no-print",children:i.jsx("button",{type:"button",onClick:xe,disabled:c,className:"lab-inventory-button lab-inventory-button-primary submit-btn",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Dc,{className:"animate-spin",size:16})," Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Xs,{size:16})," Save All"]})})}),i.jsxs("div",{className:"printable-only",children:[H&&i.jsx("div",{className:"print-letterhead-container",children:i.jsx("img",{src:H,alt:"Lab Letterhead",className:"print-letterhead-image"})}),n&&n.Patient&&i.jsxs("div",{style:{marginBottom:"20px",borderBottom:"1px solid #ccc",paddingBottom:"10px"},children:[i.jsx("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Lab Report"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"12px"},children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Patient Name:"})," ",n.Patient.name]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Age/Sex:"})," ",y??"N/A"," / ",x??"N/A"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Ref. Doctor:"})," ",q||"N/A"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Date:"})," ",gf(new Date(n.createdAt),"PPpp")]})]})]}),n==null?void 0:n.tests.filter(X=>T===null||X.id===T).map(X=>{var W;return i.jsxs("div",{style:{marginBottom:"20px",pageBreakInside:"avoid"},children:[i.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"5px"},children:X.name}),X.default_parameters&&X.default_parameters.length>0?i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f9f9f9"},children:[i.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Parameter"}),i.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Result"}),i.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Units"}),i.jsx("th",{style:{textAlign:"left",padding:"5px",borderBottom:"1px solid #ddd"},children:"Normal Range"})]})}),i.jsx("tbody",{children:X.default_parameters.map(ie=>{var ht;const pe=(ht=a[X.id])==null?void 0:ht[ie.name],le=typeof pe=="string"?parseFloat(pe):typeof pe=="number"?pe:NaN,je=ie.type==="number"&&!isNaN(le)&&pe!==""&&(ie.lower_limit!=null&&le<ie.lower_limit||ie.upper_limit!=null&&le>ie.upper_limit),Ge=ie.type==="boolean"&&(pe===!0||pe==="true"),et=ie.type==="boolean"?pe===!0||pe==="true"?"Reactive":"Non-Reactive":pe??"";return i.jsxs("tr",{children:[i.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ie.name}),i.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee",fontWeight:je||Ge?"bold":"normal",color:je?"red":Ge?"green":"inherit"},children:et}),i.jsx("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:ie.unit??""}),i.jsxs("td",{style:{padding:"5px",borderBottom:"1px solid #eee"},children:[ie.lower_limit!==null&&ie.lower_limit!==void 0&&`> ${ie.lower_limit}`,ie.lower_limit!==null&&ie.lower_limit!==void 0&&ie.upper_limit!==null&&ie.upper_limit!==void 0&&" - ",ie.upper_limit!==null&&ie.upper_limit!==void 0&&`< ${ie.upper_limit}`]})]},ie.name)})})]}):i.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"12px",padding:"10px"},children:((W=a[X.id])==null?void 0:W.report_content)||"No report content entered."})]},X.id)})]})]})})},X4e=()=>{const{orderId:e}=Ai(),t=Mt(),[n,r]=j.useState(null),[a,s]=j.useState(!0),[o,l]=j.useState(null),[c,u]=j.useState(""),f=j.useCallback(async y=>{if(!y){l("No Order ID specified in the URL."),s(!1),r(null);return}s(!0),l(null),r(null);try{console.log(`Fetching order details for ID: ${y}`);const v=await ce(`/api/lab/orders/${y}/report`);if(!v.ok){let b;try{b=await v.json()}catch{b={message:`Server returned status ${v.status}`}}throw console.error("Fetch order details error response:",b),new Error(b.message||`Failed to fetch order details: ${v.status}`)}const x=await v.json();if(console.log("Received order data:",x),!x)throw console.error("Invalid order data structure:",x),new Error("Invalid order data received from server.");r(x)}catch(v){console.error("Error fetching order details:",v),l(v instanceof Error?v.message:"An unknown error occurred while fetching the order details")}finally{s(!1)}},[ce]);j.useEffect(()=>{f(e)},[e,f]),j.useEffect(()=>{(async()=>{try{const v=await ce("/api/clinics/settings");if(v.ok){const x=await v.json();u(x.labLetterheadUrl||"")}}catch(v){console.error("Error fetching clinic settings:",v)}})()},[]);const p=()=>{n&&mI(n)};return i.jsx("div",{className:"lab-inventory-container",children:i.jsxs("div",{className:"lab-inventory-card",children:[i.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[i.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",i.jsxs("div",{style:{display:"flex",gap:"10px"},children:[i.jsxs(vr,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[i.jsx(Un,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),i.jsx("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:i.jsx(rn,{size:16})}),i.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[i.jsx($x,{size:16,style:{marginRight:"5px"}}),"Print"]}),i.jsxs("button",{onClick:p,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[i.jsx(Vq,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),i.jsxs("div",{style:{marginTop:"20px"},children:[i.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",e||"None Specified",")"]}),a&&i.jsx("div",{className:"loading-text",children:"Loading report..."}),o&&!a&&i.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[i.jsx(Wr,{size:48}),i.jsx("h3",{className:"error-title",children:"Error Loading Report"}),i.jsx("p",{children:o}),e&&i.jsx("button",{onClick:()=>f(e),className:"retry-button",children:"Retry"})]}),i.jsxs("div",{className:"printable-section",children:[c&&i.jsx("div",{className:"print-only print-letterhead-container",children:i.jsx("img",{src:c,alt:"Lab Letterhead",className:"print-letterhead-image"})}),!a&&!o&&(n==null?void 0:n.Patient)&&i.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[i.jsxs("h3",{className:"lab-inventory-header",children:[i.jsx(mr,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Name:"})," ",n.Patient.name||"N/A"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Age:"})," ",n.Patient.age??"N/A"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Gender:"})," ",n.Patient.gender||"N/A"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Token No:"})," ",n.Patient.patient_token_number||"N/A"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Patient ID:"})," ",n.Patient.id]}),n.Patient.phone&&i.jsxs("div",{children:[i.jsx("strong",{children:"Phone:"})," ",n.Patient.phone]})]})]}),!a&&!o&&(n==null?void 0:n.report_content)&&i.jsxs("div",{className:"lab-inventory-card",children:[i.jsxs("h3",{className:"lab-inventory-header",children:[i.jsx(aa,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),i.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const y=JSON.parse(n.report_content||"{}");return typeof y=="object"&&y!==null&&n.tests?n.tests.map(v=>i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em"},children:v.name}),y[v.id]?i.jsxs("table",{className:"lab-inventory-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Parameter"}),i.jsx("th",{children:"Value"}),i.jsx("th",{children:"Normal Range"})]})}),i.jsx("tbody",{children:Object.entries(y[v.id]).map(([x,b])=>{var E;const w=(E=v.default_parameters)==null?void 0:E.find(P=>P.name===x),_=typeof b=="string"?parseFloat(b):typeof b=="number"?b:NaN,T=(w==null?void 0:w.type)==="number"&&!isNaN(_)&&(w.lower_limit!=null&&_<w.lower_limit||w.upper_limit!=null&&_>w.upper_limit),C=(w==null?void 0:w.type)==="boolean"?b===!0||b==="true"?"Reactive":"Non-Reactive":String(b),O=(w==null?void 0:w.type)==="boolean"&&(b===!0||b==="true");return i.jsxs("tr",{children:[i.jsx("td",{children:x}),i.jsxs("td",{className:`${T?"abnormal-result":""} ${O?"reactive-result":""}`,children:[C," ",w==null?void 0:w.unit]}),i.jsx("td",{children:w&&w.type==="number"&&(w.lower_limit!==null||w.upper_limit!==null)?i.jsxs(i.Fragment,{children:[w.lower_limit!=null&&` > ${w.lower_limit}`,w.lower_limit!=null&&w.upper_limit!=null&&" - ",w.upper_limit!=null&&` < ${w.upper_limit}`,w.unit&&` ${w.unit}`]}):((w==null?void 0:w.type)==="boolean","N/A")})]},x)})})]}):i.jsx("p",{children:"No parameters reported for this test."})]},v.id)):i.jsx(Sf,{remarkPlugins:[Nf],children:n.report_content})}catch{return i.jsx(Sf,{remarkPlugins:[Nf],children:n.report_content||"*No findings recorded.*"})}})()})]})]}),!a&&!o&&!(n!=null&&n.report_content)&&!(n!=null&&n.Patient)&&e&&i.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",e,". The order might be processing, does not exist, or the ID is incorrect."]}),!e&&!a&&!o&&i.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",i.jsx(vr,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},J4e=()=>{const e=Mt(),[t,n]=j.useState(""),[r,a]=j.useState(!1),[s,o]=j.useState([]),[l,c]=j.useState(null),[u,f]=j.useState(t);Hc(),j.useEffect(()=>{const b=setTimeout(()=>{f(t)},500);return()=>{clearTimeout(b)}},[t]),j.useEffect(()=>{p()},[u]);const p=async()=>{const b=t.trim();if(!b){o([]),c(null);return}a(!0),c(null),o([]),console.log(`Searching for: ${b}`);try{const w=await ce("/api/lab");if(!w.ok){let P;try{P=await w.json()}catch{P={message:`Server returned status ${w.status}`}}throw console.error("Search fetch error response:",P),new Error(P.message||`HTTP error! status: ${w.status}`)}const{orders:_}=await w.json();console.log("Received lab orders for search:",_);const C=_.filter(P=>!!P.report_content).map(P=>{var I,F;return{id:P.id,labTokenNumber:String(P.lab_token_number??"N/A"),patientName:((I=P.Patient)==null?void 0:I.name)||"N/A",patientId:P.patient_id,patientTokenNumber:String(((F=P.Patient)==null?void 0:F.patient_token_number)??"N/A"),tests:(P.tests||[]).map($=>$.name||"Unknown Test"),date:gf(new Date(P.createdAt),"yyyy-MM-dd"),status:P.status}}),O=new Zs(C,{keys:["patientName","labTokenNumber","patientTokenNumber","tests","id","patientId"],threshold:.3,ignoreLocation:!0}),E=t.trim()?O.search(t).map(P=>P.item):C;console.log("Filtered search results:",E),o(E),E.length===0&&b?c(`No matching reports found for "${b}".`):c(null)}catch(w){console.error("Failed to search lab reports:",w),c(w instanceof Error?w.message:"An unknown error occurred during search")}finally{a(!1)}},y=b=>{console.log(`Result clicked, navigating to view report for order ID: ${b}`),e(`/lab/view-report/${b}`)},v=b=>{switch(b){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:b,color:"text-gray-600 bg-gray-100"}}},x=b=>{switch(b){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return i.jsx("div",{className:"lab-inventory-container",children:i.jsxs("div",{className:"lab-inventory-card",children:[i.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),i.jsxs("button",{onClick:()=>e(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[i.jsx(rn,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),i.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[i.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[i.jsx(Un,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),i.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:t,onChange:b=>n(b.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),i.jsxs("div",{style:{marginTop:"20px"},children:[r&&i.jsx("div",{className:"loading-text",children:"Searching..."}),l&&!r&&i.jsxs("div",{className:"error-text",children:[i.jsx(Wr,{size:20,className:"inline mr-2"})," ",l]}),s.length>0&&!r&&i.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:s.map(b=>i.jsxs("li",{className:"lab-inventory-card",onClick:()=>y(b.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[i.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[i.jsx(vJ,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),b.patientName," (Token: ",b.patientTokenNumber,")"]}),i.jsx("span",{className:x(b.status),children:v(b.status).text})]}),i.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[i.jsxs("div",{style:{marginBottom:"5px"},children:[i.jsx(aa,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",b.id]}),i.jsxs("div",{style:{marginBottom:"5px"},children:[i.jsx(ree,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",b.tests.join(", ")]}),i.jsxs("div",{children:[i.jsx(jD,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",b.date]})]})]},b.id))}),!r&&s.length===0&&!l&&t.trim()&&i.jsxs("div",{className:"no-data-message",children:['No results found for "',t,'".']}),!r&&s.length===0&&!l&&!t.trim()&&i.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},Z4e=()=>{const{patientId:e}=Ai(),t=Mt(),[n,r]=j.useState([]),[a,s]=j.useState(!0),[o,l]=j.useState(null),[c,u]=j.useState(null),[f,p]=j.useState(null);j.useEffect(()=>{(async()=>{if(!e){l("Patient ID is missing from the URL."),s(!1);return}s(!0),l(null),r([]),p(null);try{const x=await ce(`/api/patients/${e}`);if(x.ok){const _=await x.json();p(_.name||`Patient ID: ${e}`)}else console.warn(`Failed to fetch patient name for ID ${e}`),p(`Patient ID: ${e}`);const b=await ce(`/api/lab/patient/${e}`);if(!b.ok){const _=await b.json().catch(()=>({}));throw new Error(_.message||`HTTP error! status: ${b.status}`)}const w=await b.json();r(w||[])}catch(x){console.error("Error fetching data:",x),l(`Failed to load data: ${x.message}`)}finally{s(!1)}})()},[e]);const y=v=>{v.report_content?t(`/lab/view-report/${v.id}`):t(`/lab/enter-report/${v.id}`)};return i.jsx("div",{className:"lab-inventory-container",children:i.jsxs("div",{className:"lab-inventory-card",children:[i.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("h2",{style:{margin:0},children:["Lab Reports ",f?`for ${f}`:`for Patient ID: ${e}`]}),i.jsxs("div",{style:{display:"flex",gap:"10px"},children:[i.jsxs("button",{onClick:async()=>{if(!e){alert("Patient ID is missing. Cannot create a new report.");return}try{const v=await ce("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:e})});if(!v.ok){const b=await v.json().catch(()=>({message:`Failed to create new lab order: ${v.status}`}));throw new Error(b.message||`Failed to create new lab order: ${v.status}`)}const x=await v.json();t(`/lab/enter-report/${x.newOrderId}`)}catch(v){console.error("Error creating new lab order:",v),alert(`Error creating new lab order: ${v.message}`)}},className:"lab-inventory-button",disabled:!e,title:e?"Enter a new lab report for this patient":"Patient ID missing",children:[i.jsx(ws,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),i.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[i.jsx(rn,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),i.jsx("div",{style:{marginTop:"20px"},children:a?i.jsx("div",{className:"skeleton-reports-list",children:[1,2,3].map(v=>i.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[i.jsx(ee,{variant:"circular",width:24,height:24,style:{marginRight:"15px"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx(ee,{width:"40%",height:20,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"60%",height:16})]})]}),i.jsx("div",{style:{marginLeft:"10px"},children:i.jsx(ee,{width:80,height:24,style:{borderRadius:"12px"}})})]},v))}):o?i.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[i.jsx(uee,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),i.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),i.jsx("p",{children:o})]}):n.length===0?i.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[i.jsx(aa,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),i.jsx("p",{children:"No lab reports found for this patient."}),i.jsxs("p",{children:["You can ",i.jsx(vr,{to:`/lab/create-order/${e}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):c?i.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[i.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",c.report_date?gf(new Date(c.report_date),"PPP p"):"N/A"]}),i.jsxs("button",{onClick:()=>u(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[i.jsx(rn,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),i.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[i.jsx("strong",{children:"Tests Ordered:"})," ",(c.tests||[]).map(v=>v.name).join(", ")]}),i.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:i.jsx(Sf,{remarkPlugins:[Nf],children:c.report_content||"*No findings recorded.*"})})]}):i.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:n.map(v=>i.jsxs("li",{className:"lab-inventory-card",onClick:()=>y(v),tabIndex:0,onKeyPress:x=>x.key==="Enter"&&y(v),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx(aa,{size:24,style:{marginRight:"15px",color:"#007bff"}}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",gf(new Date(v.createdAt),"PPP")]}),i.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",v.tests&&v.tests.length>0?v.tests.map(x=>x.name).join(", "):"N/A"]})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[v.status&&i.jsx("span",{className:t3e(v.status),children:e3e(v.status)}),i.jsx(md,{size:20,style:{color:"#6c757d"}})]})]},v.id))})})]})})},e3e=e=>{if(!e)return"Unknown";switch(e.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return e.charAt(0).toUpperCase()+e.slice(1)}},t3e=e=>{if(!e)return"status-badge";switch(e.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},$W=()=>{const e=Mt(),[t]=xq(),n=t.get("search")||"",[r,a]=j.useState("pharmacy");return Hc(void 0,300),i.jsxs("div",{className:"inventory-management-container",style:{padding:"10px 15px",backgroundColor:"var(--background-color)",minHeight:"100vh"},children:[i.jsxs("div",{className:"inventory-header",style:{marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{onClick:()=>e(-1),className:"action-icon-button",title:"Go Back",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-primary)"},children:i.jsx(rn,{size:20})}),i.jsx("h1",{style:{margin:0,fontSize:"1.4rem",fontWeight:"700",color:"var(--text-primary)"},children:"Inventory Management"})]}),i.jsxs("div",{className:"inventory-tabs",style:{display:"flex",gap:"4px",backgroundColor:"var(--card-bg, #f3f4f6)",padding:"3px",borderRadius:"8px",border:"1px solid var(--border-color, #e5e7eb)"},children:[i.jsxs("button",{onClick:()=>a("pharmacy"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:r==="pharmacy"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:r==="pharmacy"?"var(--card-bg-active, #fff)":"transparent",boxShadow:r==="pharmacy"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:r==="pharmacy"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:r==="pharmacy"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[i.jsx(Nc,{size:16}),"Pharmacy Stock"]}),i.jsxs("button",{onClick:()=>a("lab"),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 16px",border:"1px solid",borderColor:r==="lab"?"var(--primary-color-20, #e0e7ff)":"transparent",borderRadius:"6px",backgroundColor:r==="lab"?"var(--card-bg-active, #fff)":"transparent",boxShadow:r==="lab"?"0 1px 2px rgba(0,0,0,0.05)":"none",color:r==="lab"?"var(--primary-color)":"var(--text-secondary, #6b7280)",fontWeight:r==="lab"?"600":"500",cursor:"pointer",transition:"all 0.2s ease",fontSize:"0.85rem"},children:[i.jsx(Za,{size:16}),"Lab Stock"]})]})]}),i.jsx("div",{className:"inventory-content",style:{backgroundColor:"var(--card-bg, #fff)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:r==="pharmacy"?i.jsx(_W,{isEmbedded:!0,initialSearch:n}):i.jsx(pI,{isEmbedded:!0})})]})},n3e=({fetchWithAuth:e})=>{const t=Mt(),[n,r]=j.useState(!0),[a,s]=j.useState([]),[o,l]=j.useState(null),[c,u]=j.useState(null),f=j.useCallback(async()=>{r(!0),l(null);try{const x=await(await e("/staff")).json();s(x.map(b=>({...b,id:b._id||b.id})))}catch(v){l(`Failed to load staff data: ${v.message}`),s([])}finally{r(!1)}},[e]);j.useEffect(()=>{f()},[f]),j.useEffect(()=>{if(c){const v=setTimeout(()=>u(null),5e3);return()=>clearTimeout(v)}},[c]);const p=v=>{switch(v){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},y=v=>{switch(v){case"doctor":return i.jsx(sg,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return i.jsx(Hq,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return i.jsx(Nc,{size:16,className:"mr-2 text-purple-600"});case"lab":return i.jsx(Za,{size:16,className:"mr-2 text-yellow-600"});case"admin":return i.jsx(dd,{size:16,className:"mr-2 text-teal-600"});default:return i.jsx(ko,{size:16,className:"mr-2 text-gray-500"})}};return n?i.jsxs("div",{className:"staff-page-container",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ee,{width:40,height:40,variant:"circular"}),i.jsx(ee,{width:200,height:32})]}),i.jsx(ee,{width:150,height:40})]}),i.jsx("div",{className:"staff-table-container",children:i.jsxs("table",{className:"staff-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{className:"hidden md:table-cell",children:"Email"}),i.jsx("th",{children:"Role"}),i.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),i.jsx("th",{className:"hidden md:table-cell",children:"Status"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:[1,2,3,4,5].map(v=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:120,height:20})}),i.jsx("td",{className:"hidden md:table-cell",children:i.jsx(ee,{width:180,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:24,style:{borderRadius:"16px"}})}),i.jsx("td",{className:"hidden md:table-cell",children:i.jsx(ee,{width:60,height:20})}),i.jsx("td",{className:"hidden md:table-cell",children:i.jsx(ee,{width:60,height:24,style:{borderRadius:"16px"}})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:32})})]},v))})]})})]}):i.jsxs("div",{className:"staff-page-container",children:[c&&i.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[c.type==="success"?i.jsx(Dl,{size:18,className:"mr-2"}):i.jsx(Wr,{size:18,className:"mr-2"}),i.jsx("span",{children:c.message}),i.jsx("button",{onClick:()=>u(null),className:"ml-auto text-xl font-bold",children:""})]}),o&&i.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[i.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),o,i.jsx("button",{onClick:()=>l(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:""})]}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-md hover:bg-gray-200",children:i.jsx(rn,{size:20})}),i.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),i.jsxs("button",{onClick:()=>t("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[i.jsx(Yr,{size:16,className:"mr-2"})," Add New Staff"]})]}),i.jsx("div",{className:"staff-table-container",children:i.jsxs("table",{className:"staff-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{className:"hidden md:table-cell",children:"Email"}),i.jsx("th",{children:"Role"}),i.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee ()"}),i.jsx("th",{className:"hidden md:table-cell",children:"Status"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:a.length===0&&!n?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):a.map(v=>i.jsxs("tr",{children:[i.jsx("td",{children:v.name}),i.jsx("td",{className:"hidden md:table-cell",children:v.email}),i.jsx("td",{children:i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(v.role)}`,children:[y(v.role),v.role.charAt(0).toUpperCase()+v.role.slice(1)]})}),i.jsx("td",{className:"hidden md:table-cell",children:v.role==="doctor"?v.opd_fee?parseFloat(String(v.opd_fee)).toFixed(2):"Not Set":"N/A"}),i.jsx("td",{className:"hidden md:table-cell",children:i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.status==="active"?"Active":"Inactive"})}),i.jsx("td",{className:"actions",children:i.jsxs("button",{onClick:()=>t(`/dashboard/staff/edit/${v.id}`),className:"edit-link",disabled:v.role==="admin",title:"Edit Staff",children:[i.jsx(Pa,{size:16})," Edit"]})})]},v.id))})]})})]})},Tz=()=>{var xe,Ie,Ne,ke,de,Q,oe,re,ae,X,W,ie,pe,le,je,Ge,et,ht,_e;const{patientId:e,billId:t}=Ai(),n=Mt(),[r,a]=j.useState(null),[s,o]=j.useState(!0),[l,c]=j.useState(null),[u,f]=j.useState(""),[p,y]=j.useState("cash"),[v,x]=j.useState(!1),[b,w]=j.useState(""),[_,T]=j.useState(""),[C,O]=j.useState(""),[E,P]=j.useState(""),[I,F]=j.useState([]),[$,z]=j.useState(""),[L,H]=j.useState([]),[V,ne]=j.useState(0),Z=((xe=r==null?void 0:r.patient)==null?void 0:xe.insurance_type)==="no_cash_insurance";j.useEffect(()=>{y(Z?"no_cash_insurance":"cash")},[Z]),j.useEffect(()=>{t&&(async()=>{o(!0),c(null);try{const[Ye,Ke,be]=await Promise.all([ce(`/api/bills/${t}`),ce("/api/clinics/settings").catch(()=>null),ce(`/api/bills?patientId=${e}`).catch(()=>null)]);if(!Ye.ok)throw new Error(`HTTP error! status: ${Ye.status}`);const De=await Ye.json();if(!De||!De.bill||!De.calculated)throw new Error("Incomplete data structure received from backend.");if(De.bill.type!=="admission")throw new Error(`Unexpected bill type: ${De.bill.type}. Expected 'admission'.`);const we=Array.isArray(De.admissionPayments)?De.admissionPayments:[];if(a({...De.bill,amount:De.bill.amount,created_at:De.bill.createdAt||De.bill.created_at,items:(De.bill.items||[]).map(ve=>({...ve,price:parseFloat(ve.price)||0,quantity:parseInt(ve.quantity)||1})),AdmissionPayments:we,calculated:De.calculated,admissionRecord:De.admissionRecord,patient:De.bill.Patient?{id:De.bill.Patient.id,name:De.bill.Patient.name,admission_date:De.bill.Patient.admission_date,discharge_date:De.bill.Patient.discharge_date,token:De.bill.Patient.patient_token_number||De.bill.Patient.token,insurance_type:De.bill.Patient.insurance_type}:void 0}),Ke&&Ke.ok){const ve=await Ke.json();w(ve.name||""),T(ve.address||""),O(ve.notes||""),P(ve.upi_id||"")}try{const ve=await ce(`/api/patients/${e}/admission-payments`);if(ve.ok){const Ce=await ve.json();F(Ce)}}catch(ve){console.error("Failed to fetch payment history:",ve)}if(be&&be.ok){const Ce=((await be.json()).bills||[]).filter(Ve=>Ve.type==="admission"&&Ve.id!==t).map(Ve=>{var Ct,kt;const dt=Ve.AdmissionRecord;return{id:Ve.id,amount:dt?parseFloat(dt.total_amount):parseFloat(Ve.amount)||0,status:dt?dt.balance<=0||dt.status==="discharged"&&dt.balance<=0?"paid":"pending":Ve.status,created_at:Ve.createdAt||Ve.created_at,admission_date:dt?dt.admission_date:((Ct=Ve.Patient)==null?void 0:Ct.admission_date)||Ve.admission_date,discharge_date:dt?dt.discharge_date:((kt=Ve.Patient)==null?void 0:kt.discharge_date)||Ve.discharge_date,admissionRecord:dt}});H(Ce);const nt=Ce.filter(Ve=>Ve.admissionRecord?Ve.admissionRecord.balance>0:Ve.status!=="paid").reduce((Ve,dt)=>dt.admissionRecord?Ve+(typeof dt.admissionRecord.balance=="string"?parseFloat(dt.admissionRecord.balance):dt.admissionRecord.balance):Ve+dt.amount,0);ne(nt)}}catch(Ye){console.error("Failed to fetch admission bill details:",Ye),c(Ye instanceof Error?Ye.message:"An unknown error occurred")}finally{o(!1)}})()},[t,e]),j.useEffect(()=>{(async()=>{if(!t){if(!e){c("Patient ID is missing."),o(!1);return}try{o(!0);const Ye=await ce(`/api/patients/${e}`);if(Ye.ok){const Ke=await Ye.json();if(Ke){if(Ke.admission_date&&!Ke.discharge_date){const De=await ce(`/api/patients/${e}/active-bill?type=admission`);if(De.ok){const we=await De.json();if(we&&we.id){n(`/patient/${e}/admission-bill/${we.id}`,{replace:!0});return}}}a({id:0,patient_id:Ke.id,type:"admission",amount:"0",status:"pending",created_at:new Date().toISOString(),AdmissionPayments:[],calculated:{totalPaid:0,totalDue:0,balance:0,daysStayed:0,perDayCharge:0},patient:{id:Ke.id,name:Ke.name,admission_date:Ke.admission_date,discharge_date:Ke.discharge_date,token:Ke.token,insurance_type:Ke.insurance_type}});const be=await ce(`/api/bills?patientId=${e}`);if(be.ok){const we=((await be.json()).bills||[]).filter(ve=>ve.type==="admission").map(ve=>{var nt,Ve;const Ce=ve.AdmissionRecord;return{id:ve.id,amount:Ce?parseFloat(Ce.total_amount):parseFloat(ve.amount)||0,status:Ce?Ce.balance<=0||Ce.status==="discharged"&&Ce.balance<=0?"paid":"pending":ve.status,created_at:ve.createdAt||ve.created_at,admission_date:Ce?Ce.admission_date:((nt=ve.Patient)==null?void 0:nt.admission_date)||ve.admission_date,discharge_date:Ce?Ce.discharge_date:((Ve=ve.Patient)==null?void 0:Ve.discharge_date)||ve.discharge_date,admissionRecord:Ce}});H(we)}}else c("Patient not found")}}catch(Ye){console.error("Error fetching patient status:",Ye),c("Failed to load patient details")}finally{o(!1)}}})()},[e,t,n]);const q=async()=>{if(e){x(!0);try{const Fe=await ce(`/api/patients/${e}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Fe.ok){const Ke=await Fe.json();throw new Error(Ke.message||"Failed to admit patient")}const Ye=await Fe.json();Ye.bill&&Ye.bill.id?n(`/patient/${e}/admission-bill/${Ye.bill.id}`):window.location.reload()}catch(Fe){c(Fe instanceof Error?Fe.message:"Failed to admit patient"),x(!1)}}},K=async()=>{if(e&&window.confirm("Are you sure you want to discharge this patient? This will finalize the bill.")){x(!0);try{const Fe=await ce(`/api/patients/${e}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!Fe.ok){const Ye=await Fe.json();throw new Error(Ye.message||"Failed to discharge patient")}window.location.reload()}catch(Fe){c(Fe instanceof Error?Fe.message:"Failed to discharge patient"),x(!1)}}},se=((Ie=r==null?void 0:r.patient)==null?void 0:Ie.admission_date)&&!((Ne=r==null?void 0:r.patient)!=null&&Ne.discharge_date),G=!!((ke=r==null?void 0:r.patient)!=null&&ke.discharge_date);j.useEffect(()=>{var Ke,be;const Ye=Number(((Ke=r==null?void 0:r.calculated)==null?void 0:Ke.balance)??((be=r==null?void 0:r.admissionRecord)==null?void 0:be.balance)??0)+V;if(Ye>0&&E){const De=`upi://pay?pa=${E}&pn=${encodeURIComponent(b||"Clinic")}&am=${Ye.toFixed(2)}&cu=INR`;z(De)}else z("")},[r,V,E,b]);const B=async Fe=>{var be,De;Fe.preventDefault();const Ke=Number(((be=r==null?void 0:r.calculated)==null?void 0:be.balance)??((De=r==null?void 0:r.admissionRecord)==null?void 0:De.balance)??0)+V;if(!e||!u||isNaN(parseFloat(u))||parseFloat(u)<=0||parseFloat(u)>Ke){c("Please enter a valid payment amount within the total outstanding.");return}c(null),x(!0);try{const we=await ce(`/api/patients/${e}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(u),payment_mode:p})});if(!we.ok){const nt=await we.json();throw new Error(nt.message||`HTTP error! status: ${we.status}`)}const Ce=await(await ce(`/api/bills/${t}`)).json();if(Ce&&Ce.bill&&Ce.calculated&&Ce.admissionPayments)a({...Ce.bill,amount:parseFloat(Ce.bill.amount),AdmissionPayments:Ce.admissionPayments,calculated:Ce.calculated,patient:Ce.bill.Patient?{id:Ce.bill.Patient.id,name:Ce.bill.Patient.name,admission_date:Ce.bill.Patient.admission_date,discharge_date:Ce.bill.Patient.discharge_date,token:Ce.bill.Patient.token,insurance_type:Ce.bill.Patient.insurance_type}:void 0});else throw new Error("Invalid data structure received after payment submission.");f(""),setTimeout(()=>{window.print()},100)}catch(we){console.error("Failed to submit payment:",we),c(we instanceof Error?we.message:"Failed to record payment")}finally{x(!1)}},fe=()=>{window.print()};if(s)return i.jsx("div",{className:"pharmacy-billing-page",children:i.jsxs("div",{className:"billing-container",children:[i.jsxs("div",{className:"billing-header no-print",children:[i.jsx("div",{className:"back-button",children:i.jsx(ee,{width:100,height:40,style:{borderRadius:"8px"}})}),i.jsx(ee,{width:300,height:40})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsx("main",{className:"order-content",children:i.jsxs("div",{className:"order-details-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:150,height:24})})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:200,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:150,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:180,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:150,height:20})})]})]})}),i.jsx("aside",{className:"billing-sidebar",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:160,height:24})})}),i.jsxs("div",{className:"space-y-4 p-5",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]})]})]})})]})]})});if(l)return i.jsx("div",{className:"pharmacy-billing-page",children:i.jsxs("div",{className:"billing-container",children:[i.jsxs("header",{className:"billing-header no-print",children:[i.jsx("button",{onClick:()=>n(-1),className:"back-button",children:i.jsx(rn,{size:20})}),i.jsx("h1",{children:"Admission Bill"})]}),i.jsxs("div",{className:"error-message-box",children:["Error: ",l]})]})});if(!r||!r.calculated)return i.jsx("div",{className:"pharmacy-billing-page",children:i.jsx("div",{className:"error-message-box",children:"No bill details found or data is incomplete."})});const me=Number(r.calculated&&r.calculated.balance!==void 0?r.calculated.balance:r.admissionRecord?r.admissionRecord.balance:0),Y=r.status==="paid"||me<=0;return i.jsx("div",{className:"pharmacy-billing-page",children:i.jsxs("div",{className:"billing-container printable-section",children:[i.jsxs("div",{className:"billing-header print-only",children:[i.jsx("div",{className:"clinic-header-left",children:i.jsx("div",{className:"clinic-info-print",children:i.jsxs("div",{className:"clinic-name-and-details-print",children:[i.jsx("h1",{className:"bill-title",children:"ADMISSION BILL"}),i.jsx("h2",{className:"clinic-name-print",children:b||"Hospital"}),(_||C)&&i.jsxs("div",{className:"clinic-details-print",children:[_&&i.jsx("span",{className:"small-text clinic-address",children:_}),C&&i.jsx("span",{className:"small-text clinic-notes",children:C})]})]})})}),i.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient"]})," ",((de=r.patient)==null?void 0:de.name)??"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",((Q=r.patient)==null?void 0:Q.token)??"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Date"]})," ",new Date(r.created_at).toLocaleDateString()]})]})]}),i.jsxs("header",{className:"billing-header no-print",children:[i.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[i.jsx(rn,{size:20}),i.jsx("span",{children:"Back"})]}),i.jsx("h1",{children:"Admission Bill"})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("section",{className:"order-details-card no-print",children:[i.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("h2",{children:"Patient Information"}),i.jsxs("div",{style:{display:"flex",gap:"10px"},children:[!se&&!G&&i.jsxs("button",{onClick:q,disabled:v,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[i.jsx(aN,{size:16})," Admit Patient"]}),se&&i.jsxs("button",{onClick:K,disabled:v,className:"secondary-button",style:{fontSize:"0.85em",padding:"6px 12px",background:"#dc3545",color:"white"},children:[i.jsx(iZ,{size:16})," Discharge"]}),G&&i.jsxs("button",{onClick:q,disabled:v,className:"primary-button",style:{fontSize:"0.85em",padding:"6px 12px"},children:[i.jsx(IZ,{size:16})," Re-Admit"]})]})]}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",((oe=r.patient)==null?void 0:oe.name)??"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",((re=r.patient)==null?void 0:re.token)??"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(qX,{size:16})," Bill ID"]})," ",r.id]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Created"]})," ",new Date(r.created_at).toLocaleDateString()]})]})]}),i.jsxs("section",{className:"medications-card",children:[i.jsx("div",{className:"card-header no-print",children:i.jsx("h2",{children:"Admission Charges Breakdown"})}),i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"S.No."}),i.jsx("th",{children:"DESCRIPTION"}),i.jsx("th",{children:"QTY"}),i.jsx("th",{children:"RATE"}),i.jsx("th",{children:"AMOUNT"})]})}),i.jsxs("tbody",{children:[r.admissionRecord?i.jsxs(i.Fragment,{children:[i.jsxs("tr",{children:[i.jsx("td",{children:"1"}),i.jsx("td",{children:"Admission Charge"}),i.jsx("td",{children:"1"}),i.jsxs("td",{children:["",Number(r.admissionRecord.admission_charge).toFixed(2)]}),i.jsxs("td",{children:["",Number(r.admissionRecord.admission_charge).toFixed(2)]})]}),r.admissionRecord.days_stayed?i.jsxs("tr",{children:[i.jsx("td",{children:"2"}),i.jsxs("td",{children:["Per Day Charges",i.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(r.admissionRecord.admission_date).toLocaleDateString(),r.admissionRecord.discharge_date?` - ${new Date(r.admissionRecord.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),i.jsxs("td",{children:[r.admissionRecord.days_stayed," days"]}),i.jsxs("td",{children:["",Number(r.admissionRecord.per_day_charge).toFixed(2)]}),i.jsxs("td",{children:["",(Number(r.admissionRecord.days_stayed)*Number(r.admissionRecord.per_day_charge)).toFixed(2)]})]}):r.calculated.daysStayed&&r.calculated.perDayCharge&&r.calculated.perDayCharge>0?i.jsxs("tr",{children:[i.jsx("td",{children:"2"}),i.jsxs("td",{children:["Per Day Charges (Ongoing)",i.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",new Date(r.admissionRecord.admission_date).toLocaleDateString()," - Today)"]})]}),i.jsxs("td",{children:[r.calculated.daysStayed," days"]}),i.jsxs("td",{children:["",r.calculated.perDayCharge.toFixed(2)]}),i.jsxs("td",{children:["",(r.calculated.daysStayed*r.calculated.perDayCharge).toFixed(2)]})]}):null]}):i.jsxs(i.Fragment,{children:[r.items&&r.items.length>0?r.items.map((Fe,Ye)=>i.jsxs("tr",{children:[i.jsx("td",{children:Ye+1}),i.jsx("td",{children:Fe.name}),i.jsx("td",{children:Fe.quantity}),i.jsxs("td",{children:["",Fe.price.toFixed(2)]}),i.jsxs("td",{children:["",(Fe.price*Fe.quantity).toFixed(2)]})]},`item-${Ye}`)):i.jsxs("tr",{children:[i.jsx("td",{children:"1"}),i.jsx("td",{children:"Initial Admission Charge"}),i.jsx("td",{children:"1"}),i.jsxs("td",{children:["",parseFloat(r.amount).toFixed(2)]}),i.jsxs("td",{children:["",parseFloat(r.amount).toFixed(2)]})]}),r.calculated.daysStayed&&r.calculated.perDayCharge&&r.calculated.perDayCharge>0&&i.jsxs("tr",{children:[i.jsx("td",{children:(((ae=r.items)==null?void 0:ae.length)||1)+1}),i.jsxs("td",{children:["Per Day Charges",i.jsxs("small",{style:{display:"block",color:"#6b7280",fontSize:"0.75em"},children:["(",(X=r.patient)!=null&&X.admission_date?new Date(r.patient.admission_date).toLocaleDateString():"",(W=r.patient)!=null&&W.discharge_date?` - ${new Date(r.patient.discharge_date).toLocaleDateString()}`:" - Ongoing",")"]})]}),i.jsxs("td",{children:[r.calculated.daysStayed," days"]}),i.jsxs("td",{children:["",r.calculated.perDayCharge.toFixed(2)]}),i.jsxs("td",{children:["",(r.calculated.daysStayed*r.calculated.perDayCharge).toFixed(2)]})]})]}),i.jsxs("tr",{className:"subtotal-row current-admission-row",children:[i.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Current Admission Total"}),i.jsxs("td",{children:["",Number(((ie=r.calculated)==null?void 0:ie.totalDue)??((pe=r.admissionRecord)==null?void 0:pe.total_amount)??0).toFixed(2)]})]}),L.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("tr",{className:"section-header-row previous-admissions-header",children:i.jsx("td",{colSpan:5,style:{fontWeight:600,textAlign:"center"},children:"Previous Admissions"})}),L.map((Fe,Ye)=>i.jsxs("tr",{className:Fe.status!=="paid"?"bill-row-unpaid":"bill-row-paid",children:[i.jsx("td",{children:Ye+1}),i.jsxs("td",{children:["Admission - ",Fe.admission_date?new Date(Fe.admission_date).toLocaleDateString():"N/A",Fe.discharge_date&&i.jsxs("small",{style:{display:"block",color:"inherit",opacity:.8,fontSize:"0.75em"},children:["Discharged: ",new Date(Fe.discharge_date).toLocaleDateString()]})]}),i.jsx("td",{children:"1"}),i.jsxs("td",{children:["",Fe.amount.toFixed(2)]}),i.jsxs("td",{className:Fe.status!=="paid"?"text-danger":"text-success",children:["",Fe.amount.toFixed(2),Fe.status==="paid"&&i.jsx("small",{style:{marginLeft:"4px"},children:"(Paid)"})]})]},Fe.id)),V>0&&i.jsxs("tr",{className:"subtotal-row unpaid-balance-row",children:[i.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"Previous Unpaid Balance"}),i.jsxs("td",{children:["",V.toFixed(2)]})]})]}),i.jsxs("tr",{className:`grand-total-row-dynamic ${V>0?"grand-total-unpaid":"grand-total-paid"}`,children:[i.jsx("td",{colSpan:4,style:{textAlign:"right"},children:"GRAND TOTAL"}),i.jsxs("td",{style:{fontSize:"1.1em"},children:["",(Number(((le=r.calculated)==null?void 0:le.totalDue)??((je=r.admissionRecord)==null?void 0:je.total_amount)??0)+V).toFixed(2)]})]})]})]})]}),I.length>0&&i.jsxs("section",{className:"medications-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Payment History"})}),i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"S.No."}),i.jsx("th",{children:"DATE"}),i.jsx("th",{children:"MODE"}),i.jsx("th",{children:"AMOUNT"})]})}),i.jsx("tbody",{children:I.map((Fe,Ye)=>{var Ke;return i.jsxs("tr",{children:[i.jsx("td",{children:Ye+1}),i.jsx("td",{children:Fe.payment_date?new Date(Fe.payment_date).toLocaleDateString():"N/A"}),i.jsx("td",{style:{textTransform:"capitalize"},children:((Ke=Fe.payment_mode)==null?void 0:Ke.replace(/_/g," "))||"N/A"}),i.jsxs("td",{children:["",(Number(Fe.amount_paid)||0).toFixed(2)]})]},Fe.id)})})]})]}),i.jsxs("div",{className:"bill-summary-print print-only",children:[i.jsxs("div",{className:"bill-summary-details",children:[i.jsxs("div",{className:"summary-row-print",children:[i.jsx("span",{children:"Total Due"}),i.jsxs("span",{children:["",Number(((Ge=r.calculated)==null?void 0:Ge.totalDue)??((et=r.admissionRecord)==null?void 0:et.total_amount)??0).toFixed(2)]})]}),i.jsxs("div",{className:"summary-row-print",children:[i.jsx("span",{children:"Total Paid"}),i.jsxs("span",{children:["",Number(((ht=r.calculated)==null?void 0:ht.totalPaid)??((_e=r.admissionRecord)==null?void 0:_e.total_paid)??0).toFixed(2)]})]}),i.jsx("div",{className:"print-only-total",children:i.jsxs("strong",{children:["Balance Due: ",me.toFixed(2)]})})]}),$&&me>0&&i.jsxs("div",{className:"qr-code-container qr-code-printable-section",children:[i.jsx(oa,{value:$,size:100}),i.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),i.jsx("aside",{className:"billing-sidebar no-print",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Billing Summary"})}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Total Due"}),i.jsxs("span",{children:["",(r.calculated.totalDue||0).toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Days Stayed"}),i.jsx("span",{children:r.calculated.daysStayed??0})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Total Paid"}),i.jsxs("span",{style:{color:"#28a745"},children:["",(r.calculated.totalPaid||0).toFixed(2)]})]}),i.jsxs("div",{className:"summary-row grand-total-row",children:[i.jsx("strong",{children:"Balance Due"}),i.jsxs("strong",{style:{color:me>0?"#dc3545":"#28a745"},children:["",me.toFixed(2)]})]}),L.length>0&&i.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #dee2e6"},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem",color:"#495057"},children:"Previous Admissions"}),L.map(Fe=>i.jsxs("div",{className:"summary-row",style:{fontSize:"0.8rem"},children:[i.jsxs("span",{style:{color:"#6c757d"},children:[Fe.admission_date?new Date(Fe.admission_date).toLocaleDateString():"N/A",Fe.status!=="paid"&&i.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"(Unpaid)"})]}),i.jsxs("span",{style:{color:Fe.status!=="paid"?"#dc3545":"#28a745"},children:["",Fe.amount.toFixed(2)]})]},Fe.id)),V>0&&i.jsxs("div",{className:"summary-row",style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e9ecef"},children:[i.jsx("strong",{style:{color:"#dc3545",fontSize:"0.875rem"},children:"Previous Balance"}),i.jsxs("strong",{style:{color:"#dc3545"},children:["",V.toFixed(2)]})]})]}),V>0&&i.jsxs("div",{className:"summary-row grand-total-row",style:{marginTop:"0.75rem",background:"#fff3cd"},children:[i.jsx("strong",{style:{color:"#856404"},children:"Total Outstanding"}),i.jsxs("strong",{style:{color:"#856404"},children:["",(me+V).toFixed(2)]})]}),i.jsx("div",{className:"qr-code-container",children:$&&me>0?i.jsxs(i.Fragment,{children:[i.jsx(oa,{value:$,size:128}),i.jsx("p",{children:"Scan to pay using UPI"})]}):me<=0?i.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#28a745"},children:[i.jsx(xx,{size:48}),i.jsx("p",{style:{marginTop:"10px",fontWeight:600},children:"Fully Paid"})]}):i.jsx("p",{children:"UPI QR code not available."})}),!Y&&i.jsxs("form",{onSubmit:B,children:[i.jsxs("div",{className:"payment-mode-section",children:[i.jsx("label",{htmlFor:"paymentAmount",className:"info-item",children:i.jsx("strong",{children:"Payment Amount ()"})}),i.jsx("input",{type:"number",id:"paymentAmount",value:u,onChange:Fe=>f(Fe.target.value),placeholder:`Max ${me.toFixed(2)}`,min:"0.01",step:"0.01",max:me,className:"payment-mode-select",required:!0})]}),i.jsxs("div",{className:"payment-mode-section",children:[i.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:i.jsx("strong",{children:"Payment Mode"})}),i.jsxs("select",{id:"paymentMode",value:p,onChange:Fe=>y(Fe.target.value),className:"payment-mode-select",children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),Z&&i.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})]}),i.jsxs("div",{className:"bill-actions",children:[i.jsx("button",{type:"button",onClick:fe,className:"secondary-button print-preview-button",children:"Print Preview"}),i.jsx("button",{type:"submit",className:"primary-button",disabled:v||!u||parseFloat(u)<=0||parseFloat(u)>me+V,children:v?"Processing...":"Record Payment & Print"})]})]}),Y&&i.jsx("div",{className:"bill-actions",children:i.jsx("button",{onClick:fe,className:"secondary-button",children:"Print Bill"})})]})})]}),i.jsxs("footer",{className:"billing-footer print-only",children:[i.jsx("p",{children:"Thank you for choosing our hospital!"}),i.jsx("p",{children:"This is a computer-generated bill and does not require a signature."})]})]})})},r3e=e=>{switch(e){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},i3e=()=>{const{orderId:e}=Ai(),t=Mt(),[n,r]=j.useState(null),[a,s]=j.useState(!0),[o,l]=j.useState(null),[c,u]=j.useState(!1),[f,p]=j.useState({}),[y,v]=j.useState(""),[x,b]=j.useState(""),[w,_]=j.useState("cash"),T=j.useMemo(()=>(n==null?void 0:n.medications.reduce((L,H)=>{const V=H.total_price??0,ne=V*(H.discount_percentage??0)/100;return L+V-ne},0))??0,[n==null?void 0:n.medications]),C=5,O=j.useMemo(()=>!n||!n.medications?0:n.medications.reduce((L,H,V)=>{var G,B;const ne=H.drug_id??`index-${V}`,Z=((G=f[ne])==null?void 0:G.pack)||0,q=((B=f[ne])==null?void 0:B.loose)||0,K=H.pack_price??0,se=H.loose_price??0;return L+Z*K+q*se},0),[n,f]),E=j.useCallback(async()=>{if(!e){l("Order ID is missing."),s(!1);return}s(!0),l(null);try{const L=await ce(`/api/pharmacy-orders/${e}`);if(!L.ok)throw L.status===404?new Error(`Order with ID ${e} not found.`):new Error(`Failed to fetch order details: ${L.statusText} (${L.status})`);const H=await L.json();console.log("Fetched order data after return:",H);const ne=H.medications.map(q=>q.pack_price&&q.loose_price&&q.loose_price>0?{...q,unitsPerPack:Math.round(q.pack_price/q.loose_price)}:{...q,unitsPerPack:0}).map(q=>({...q,discount_percentage:q.discount_percentage??0}));r({...H,medications:ne});const Z={};ne.forEach((q,K)=>{const se=q.drug_id??`index-${K}`;Z[se]={pack:0,loose:0}}),p(Z)}catch(L){console.error("Failed to fetch order details:",L),l(L.message||"Failed to load order details.")}finally{s(!1)}},[e]);j.useEffect(()=>{E()},[E]),j.useEffect(()=>{(async()=>{try{const H=await ce("/api/clinics/settings");if(!H.ok)throw new Error("Failed to fetch clinic settings");const V=await H.json();console.log("Fetched clinic settings:",V),v(V.upi_id||"")}catch(H){console.error("Error fetching clinic settings:",H)}})()},[]),j.useEffect(()=>{if((n==null?void 0:n.order_total)!==void 0&&n.order_total>0&&y){const L=`upi://pay?pa=${y}&pn=ClinicName&am=${n.order_total.toFixed(2)}&cu=INR`;b(L)}else b("")},[n==null?void 0:n.order_total,y]);const P=(L,H)=>{r(V=>{if(!V)return null;const ne=V.medications.map((q,K)=>(q.drug_id??`index-${K}`)===L?{...q,discount_percentage:isNaN(H)?0:H}:q),Z=ne.reduce((q,K)=>{const se=K.total_price??0,G=se*(K.discount_percentage??0)/100;return q+se-G},0);return{...V,medications:ne,order_total:Z}})},I=(L,H,V)=>{p(ne=>{const Z=V.unitsPerPack||0,K=V.pack_quantity*Z+V.loose_quantity,se=Math.max(0,Math.min(H,K));let G=0,B=se;return Z>0&&(G=Math.floor(se/Z),B=se%Z),{...ne,[L]:{pack:G,loose:B}}})},F=async()=>{const L=n==null?void 0:n.medications.map((H,V)=>{var K,se;const ne=H.drug_id??`index-${V}`,Z=((K=f[ne])==null?void 0:K.pack)||0,q=((se=f[ne])==null?void 0:se.loose)||0;return Z>0||q>0?{drug_id:H.drug_id,name:H.name,pack_quantity:H.pack_quantity,loose_quantity:H.loose_quantity,returnPackQuantity:Z,returnLooseQuantity:q}:null}).filter(H=>H!==null);if(!L||L.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!e){alert("Order ID is missing. Cannot process return.");return}if(!L){alert("Could not prepare items for return.");return}u(!0),l(null);try{const H=await ce(`/api/pharmacy-orders/${e}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:L})}),V=await H.json();if(!H.ok)throw new Error(V.message||`Failed to process return: ${H.statusText}`);const ne={};n==null||n.medications.forEach((Z,q)=>{const K=Z.drug_id??`index-${q}`;ne[K]={pack:0,loose:0}}),p(ne),E()}catch(H){console.error("Failed to process return:",H),l(H.message||"An error occurred while processing the return."),alert(`Error processing return: ${H.message||"Unknown error"}`)}finally{u(!1)}};if(a)return i.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(o)return i.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[i.jsxs("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[i.jsx(rn,{size:14,className:"mr-1.5"})," Back"]}),i.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",o]})]});if(!n)return i.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[i.jsxs("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[i.jsx(rn,{size:14,className:"mr-1.5"})," Back"]}),i.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const $=()=>{window.print()},z=r3e(n.status);return i.jsx("div",{className:"pharmacy-order-details-page",children:i.jsxs("div",{className:"order-details-container printable-section",children:[i.jsxs("div",{className:"order-details-header no-print",children:[i.jsx("h1",{children:"Pharmacy Order Details"}),i.jsxs("div",{className:"actions",children:[i.jsx("button",{onClick:()=>t(-1),className:"back-button",children:i.jsx(rn,{size:20})}),i.jsxs("button",{onClick:$,className:"print-button",children:[i.jsx($x,{size:18})," Print Bill"]})]})]}),i.jsxs("div",{className:"billing-header print-only",children:[i.jsx("div",{className:"clinic-header-left",children:i.jsx("div",{className:"clinic-info-print",children:i.jsxs("div",{className:"clinic-name-and-details-print",children:[i.jsx("h1",{children:"Mahajan Pharmacy"}),i.jsxs("div",{className:"clinic-details-print",children:[i.jsx("span",{className:"small-text clinic-address",children:"D.No: 3-1-289, Plot No. 101, Kabela Center, RR Nagar, Vijayawada  520012."}),i.jsx("span",{className:"small-text clinic-notes",children:"Phone: 93919 44733"}),i.jsx("span",{className:"small-text clinic-license",children:"Licence No:RLF20AP2025003328"})]})]})})}),i.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[i.jsxs("div",{className:"info-item",children:[i.jsx("strong",{children:"Patient Name:"})," RESHMA"]}),i.jsxs("div",{className:"info-item",children:[i.jsx("strong",{children:"Token:"})," 12"]}),i.jsxs("div",{className:"info-item",children:[i.jsx("strong",{children:"Order Date:"})," 31/10/2025"]})]})]}),i.jsxs("div",{className:"order-info-section no-print",children:[i.jsxs("div",{className:"order-info-item",children:[i.jsx("strong",{children:"Order ID:"})," ",n.id]}),i.jsxs("div",{className:"order-info-item",children:[i.jsx("strong",{children:"Patient:"})," ",n.patientName||"N/A"," (",n.patientTokenNumber||"N/A",")"]}),i.jsxs("div",{className:"order-info-item",children:[i.jsx("strong",{children:"Date:"})," ",new Date(n.date).toLocaleString()]}),i.jsxs("div",{className:"order-info-item",children:[i.jsx("strong",{children:"Prescribed By:"})," ",n.prescribedBy||"N/A"]}),i.jsxs("div",{className:"order-info-item",children:[i.jsx("strong",{children:"Status:"})," ",i.jsx("span",{className:`status-pill ${z.text} ${z.bg}`,children:n.status})]})]}),i.jsxs("div",{className:"medications-section",children:[i.jsx("h2",{children:"Medications Ordered"}),n.medications.length>0?i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"DESCRIPTION"}),i.jsx("th",{children:"PACK QTY"}),i.jsx("th",{children:"PACK PRICE"}),i.jsx("th",{children:"LOOSE QTY"}),i.jsx("th",{children:"LOOSE PRICE"}),i.jsx("th",{children:"MRP"}),i.jsx("th",{children:"RATE"}),i.jsx("th",{children:"DIS %"}),i.jsx("th",{children:"GST%"}),i.jsx("th",{children:"AMT"}),(n.status==="dispensed"||n.status==="billed")&&i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"no-print",children:"RETURN PACK QTY"}),i.jsx("th",{className:"no-print",children:"RETURN LOOSE QTY"})]})]})}),i.jsx("tbody",{children:n.medications.map((L,H)=>{var G,B;const V=L.drug_id??`index-${H}`,ne=L.total_price??0,Z=ne*(L.discount_percentage??0)/100,q=ne-Z,K=((G=f[V])==null?void 0:G.pack)||0,se=((B=f[V])==null?void 0:B.loose)||0;return i.jsxs("tr",{children:[i.jsx("td",{children:L.name}),i.jsx("td",{children:L.pack_quantity??0}),i.jsx("td",{children:L.pack_price!=null?Number(L.pack_price).toFixed(2):"N/A"}),i.jsx("td",{children:L.loose_quantity??0}),i.jsx("td",{children:L.loose_price!=null?Number(L.loose_price).toFixed(2):"N/A"}),i.jsx("td",{children:L.price!=null?Number(L.price).toFixed(2):"N/A"})," ",i.jsx("td",{children:L.price!=null?Number(L.price).toFixed(2):"N/A"})," ",i.jsxs("td",{children:[i.jsx("input",{type:"number",value:L.discount_percentage??0,onChange:fe=>P(V,parseFloat(fe.target.value)),min:"0",max:"100",className:"discount-input-table no-print"}),i.jsxs("span",{className:"print-only",children:[L.discount_percentage??0,"%"]})]}),i.jsxs("td",{children:[C.toFixed(1),"%"]}),i.jsx("td",{children:q.toFixed(2)}),(n.status==="dispensed"||n.status==="billed")&&i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"no-print",children:i.jsx("input",{type:"number",min:"0",max:L.pack_quantity,value:K,onChange:fe=>{const Y=(parseInt(fe.target.value,10)||0)*(L.unitsPerPack||0)+se;I(V,Y,L)},className:"return-quantity-input"})}),i.jsx("td",{className:"no-print",children:i.jsx("input",{type:"number",min:"0",max:L.loose_quantity+L.pack_quantity*(L.unitsPerPack||0)-K*(L.unitsPerPack||0),value:se,onChange:fe=>{const me=parseInt(fe.target.value,10)||0,Y=K*(L.unitsPerPack||0)+me;I(V,Y,L)},className:"return-quantity-input"})})]})]},V)})})]}):i.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),i.jsx("div",{className:"print-only-total",children:i.jsxs("strong",{children:["Grand Total: ",T.toFixed(2)]})}),i.jsxs("div",{className:"order-total-section no-print",children:[i.jsx("span",{className:"total-label",children:"Order Total:"}),i.jsxs("span",{className:"total-amount",children:["",T.toFixed(2)]})]}),i.jsxs("div",{className:"payment-section no-print",children:[i.jsxs("div",{className:"payment-mode-group",children:[i.jsx("label",{htmlFor:"paymentMode",children:"Payment Mode:"}),i.jsxs("select",{id:"paymentMode",value:w,onChange:L=>_(L.target.value),className:"payment-mode-select",children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),i.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),i.jsx("option",{value:"credit",children:"Credit"})]})]}),x&&i.jsxs("div",{className:"qr-code-container",children:[i.jsx(oa,{value:x,size:128}),i.jsx("p",{children:"Scan to pay using UPI"})]})]}),(n.status==="dispensed"||n.status==="billed")&&n.medications.length>0&&i.jsxs("div",{className:"return-action-section no-print",children:[O>0&&i.jsxs("div",{className:"total-refund-display",children:["Total Refund: ",O.toFixed(2)]}),i.jsx("button",{onClick:F,disabled:Object.values(f).every(L=>L.pack===0&&L.loose===0)||c,className:"process-return-button",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Kk,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Kk,{size:16,className:"mr-2"})," Process Return"]})})]})]})})},a3e=async()=>{const e=await ce("/subscriptions");if(!e.ok)throw new Error("Failed to fetch subscription plans");return await e.json()},s3e=async e=>{const t=await ce(`/subscriptions/${e}`);if(!t.ok){const n=await t.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(n.message||"Failed to fetch subscription plan details")}return await t.json()},o3e=async e=>{const t=await ce("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(n.message||"Failed to create subscription plan")}return await t.json()},l3e=async(e,t)=>{const n=await ce(`/subscriptions/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(r.message||"Failed to update subscription plan")}return await n.json()},c3e=async e=>{const t=await ce(`/subscriptions/${e}`,{method:"DELETE"});if(!t.ok){const n=await t.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(n.message||"Failed to deactivate subscription plan")}return await t.json()},u3e=async(e,t)=>{const n=await ce("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:e,planId:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(r.message||"Failed to initiate Razorpay subscription")}return await n.json()},d3e=()=>{const e=Mt(),[t,n]=j.useState([]),[r,a]=j.useState(!1),[s,o]=j.useState(null),[l,c]=j.useState(null),u=j.useCallback(async()=>{a(!0),o(null);try{const p=await a3e();n(p)}catch(p){o(p.message||"Failed to fetch subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{a(!1)}},[]);j.useEffect(()=>{u()},[u]),j.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){a(!0),o(null),c(null);try{await c3e(p),c({type:"success",message:"Plan deactivated successfully!"}),u()}catch(y){o(y.message||"Failed to deactivate plan."),c({type:"error",message:y.message||"Failed to deactivate plan."})}finally{a(!1)}}};return i.jsxs("div",{className:"subscription-page-container",children:[l&&i.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[i.jsxs("div",{className:"flex items-center",children:[l.type==="success"?i.jsx(Dl,{size:18,className:"mr-2 text-green-500"}):i.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),i.jsx("span",{children:l.message})]}),i.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:i.jsx(zt,{size:16})})]}),i.jsxs("div",{children:[" ",i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[i.jsx("button",{onClick:()=>e(-1),className:"back-button",children:i.jsx(rn,{size:16})}),i.jsx("h1",{children:"Manage Subscription Plans"}),i.jsxs("button",{onClick:()=>e("/dashboard/subscriptions/add"),className:"subscription-btn",children:[i.jsx(Yr,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),r&&t.length===0&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"subscription-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{children:"Price"}),i.jsx("th",{children:"Billing Cycle"}),i.jsx("th",{children:"Status"}),i.jsx("th",{className:"text-right",children:"Actions"})]})}),i.jsx("tbody",{children:[1,2,3].map(p=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:120,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:60,height:24,style:{borderRadius:"16px"}})}),i.jsx("td",{className:"text-right",children:i.jsx(ee,{width:80,height:32})})]},p))})]})}),!r&&s&&t.length===0&&i.jsx("p",{className:"text-center text-red-500",children:s}),t.length>0&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"subscription-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{children:"Price"}),i.jsx("th",{children:"Billing Cycle"}),i.jsx("th",{children:"Status"}),i.jsx("th",{className:"text-right",children:"Actions"})]})}),i.jsx("tbody",{children:t.map(p=>i.jsxs("tr",{children:[i.jsx("td",{children:p.name}),i.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),i.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),i.jsx("td",{children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),i.jsxs("td",{className:"actions-cell text-right",children:[i.jsx("button",{onClick:()=>e(`/dashboard/subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:i.jsx(Pa,{size:16,className:"inline-block"})}),p.status==="active"&&i.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:r,children:i.jsx(zr,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!r&&t.length===0&&!s&&i.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},h3e=()=>{const e=Mt(),[t,n]=j.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[r,a]=j.useState(!1),[s,o]=j.useState(null),[l,c]=j.useState(null);j.useEffect(()=>{if(l){const y=setTimeout(()=>c(null),5e3);return()=>clearTimeout(y)}},[l]);const u=y=>{const{name:v,value:x}=y.target;n(b=>({...b,[v]:x}))},f=async y=>{if(y.preventDefault(),a(!0),o(null),c(null),!t.name||!t.price||!t.period||t.interval===void 0||t.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),a(!1);return}try{await o3e(t),c({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{e("/dashboard/subscriptions")},2e3)}catch(v){const x=v.message||"Failed to create plan.";o(x),c({type:"error",message:x})}finally{a(!1)}},p=()=>{e(-1)};return i.jsxs("div",{className:"subscription-page-container",children:[l&&i.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[i.jsxs("div",{className:"flex items-center",children:[l.type==="success"?i.jsx(Dl,{size:18,className:"mr-2 text-green-500"}):i.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),i.jsx("span",{children:l.message})]}),i.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:i.jsx(zt,{size:16})})]}),i.jsxs("div",{className:"subscription-form",children:[i.jsx("h1",{children:"Add New Subscription Plan"}),s&&i.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),i.jsxs("form",{onSubmit:f,children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"name",children:["Plan Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"name",name:"name",value:t.name||"",onChange:u,required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"description",children:"Description"}),i.jsx("textarea",{id:"description",name:"description",rows:3,value:t.description||"",onChange:u})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"price",children:["Price (INR) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:t.price!==void 0?t.price:"",onChange:u,required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"period",children:["Billing Period ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{id:"period",name:"period",value:t.period||"monthly",onChange:u,required:!0,children:[i.jsx("option",{value:"daily",children:"Daily"}),i.jsx("option",{value:"weekly",children:"Weekly"}),i.jsx("option",{value:"monthly",children:"Monthly"}),i.jsx("option",{value:"yearly",children:"Yearly"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"interval",children:["Interval ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:t.interval||1,onChange:u,required:!0})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),i.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:t.razorpay_plan_id||"",onChange:u})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:i.jsx(rn,{size:16})}),i.jsxs("button",{type:"submit",disabled:r,className:"subscription-btn",children:[r?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,r?"Creating...":"Create Plan"]})]})]})]})]})},f3e=()=>{const{id:e}=Ai(),t=Mt(),[n,r]=j.useState(null),[a,s]=j.useState({}),[o,l]=j.useState(!1),[c,u]=j.useState(!0),[f,p]=j.useState(null),[y,v]=j.useState(null),x=j.useCallback(async()=>{if(!e){p("Plan ID is missing."),u(!1);return}u(!0),p(null);try{const T=await s3e(e);r(T),s({name:T.name,description:T.description||"",price:T.price,period:T.period,interval:T.interval,razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch plan details."),v({type:"error",message:T.message||"Failed to fetch plan details."})}finally{u(!1)}},[e]);j.useEffect(()=>{x()},[x]),j.useEffect(()=>{if(y){const T=setTimeout(()=>v(null),5e3);return()=>clearTimeout(T)}},[y]);const b=T=>{const{name:C,value:O}=T.target;s(E=>({...E,[C]:O}))},w=async T=>{if(T.preventDefault(),!e){p("Plan ID is missing.");return}if(l(!0),p(null),v(null),!a.name||!a.price||!a.period||a.interval===void 0||a.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await l3e(e,a),v({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{t(-1)},2e3)}catch(C){const O=C.message||"Failed to update plan.";p(O),v({type:"error",message:O})}finally{l(!1)}},_=()=>{t(-1)};return c?i.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):f&&!n?i.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?i.jsxs("div",{className:"subscription-page-container",children:[y&&i.jsxs("div",{className:`${y.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[i.jsxs("div",{className:"flex items-center",children:[y.type==="success"?i.jsx(Dl,{size:18,className:"mr-2"}):i.jsx(Wr,{size:18,className:"mr-2"}),i.jsx("span",{children:y.message})]}),i.jsx("button",{onClick:()=>v(null),className:"ml-4",children:i.jsx(zt,{size:16})})]}),i.jsxs("div",{className:"subscription-form",children:[i.jsx("h1",{children:"Edit Subscription Plan"}),f&&i.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),i.jsxs("form",{onSubmit:w,children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"name",children:["Plan Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"name",name:"name",value:a.name||"",onChange:b,required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"description",children:"Description"}),i.jsx("textarea",{id:"description",name:"description",rows:3,value:a.description||"",onChange:b})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"price",children:["Price (INR) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:a.price!==void 0?a.price:"",onChange:b,required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"period",children:["Billing Period ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{id:"period",name:"period",value:a.period||"monthly",onChange:b,required:!0,children:[i.jsx("option",{value:"daily",children:"Daily"}),i.jsx("option",{value:"weekly",children:"Weekly"}),i.jsx("option",{value:"monthly",children:"Monthly"}),i.jsx("option",{value:"yearly",children:"Yearly"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"interval",children:["Interval ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:a.interval||1,onChange:b,required:!0})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),i.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:a.razorpay_plan_id||"",onChange:b})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"status",children:"Status"}),i.jsxs("select",{id:"status",name:"status",value:a.status||"active",onChange:b,children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:i.jsx(rn,{size:16})}),i.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):i.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},p3e=()=>{const{patientId:e}=Ai(),t=Mt(),[n,r]=j.useState(null),[a,s]=j.useState([]),[o,l]=j.useState(""),[c,u]=j.useState(!0),[f,p]=j.useState(null),[y,v]=j.useState("manual"),[x,b]=j.useState(!1),[w,_]=j.useState(null),T=j.useCallback(async()=>{u(!0),p(null);try{const E=await ce(`/api/patients/${e}`);if(!E.ok){const $=await E.json();throw new Error($.message||"Failed to fetch patient details")}const P=await E.json();r(P);const I=await ce("/api/subscriptions");if(!I.ok){const $=await I.json();throw new Error($.message||"Failed to fetch subscription plans")}const F=await I.json();s(F.filter($=>$.status==="active"))}catch(E){console.error("Error fetching data:",E),p(`Failed to load data: ${E.message}`)}finally{u(!1)}},[e]);j.useEffect(()=>{e?T():(p("Patient ID is missing."),u(!1))},[e,T]);const C=(E,P)=>{const I=new Date(E),F=P.interval||1;switch(P.period){case"daily":I.setDate(E.getDate()+F);break;case"weekly":I.setDate(E.getDate()+F*7);break;case"monthly":I.setMonth(E.getMonth()+F);break;case"yearly":I.setFullYear(E.getFullYear()+F);break;default:console.warn(`Unknown subscription period: ${P.period}. Defaulting to 1 month.`),I.setMonth(E.getMonth()+1)}return I},O=async()=>{if(!e||!o){_("Please select a subscription plan.");return}const E=a.find(P=>P.id===o);if(!E){_("Selected plan details not found.");return}b(!0),_(null);try{const P=new Date,I=C(P,E);if(y==="manual"){const F={subscription_plan_id:o,subscription_status:"active",subscription_start_date:P.toISOString(),subscription_end_date:I.toISOString(),subscription_payment_method:"manual"},$=await ce(`/api/patients/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!$.ok){const z=await $.json();throw new Error(z.message||"Failed to start subscription manually")}t("/all-patients")}else if(y==="razorpay"){console.log("Initiating Razorpay subscription for plan:",E);const F=await u3e(e,o);if(F&&F.short_url)window.location.href=F.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch(P){console.error("Error starting subscription:",P),_(`Failed to start subscription: ${P.message}`),b(!1)}};return c?i.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):f?i.jsxs("div",{className:"subscription-page-container",children:[i.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[i.jsx("strong",{children:"Error: "}),i.jsx("span",{children:f})]}),i.jsx("button",{onClick:()=>t(-1),className:"back-button",children:i.jsx(rn,{size:16})})]}):n?i.jsxs("div",{className:"subscription-page-container",children:[i.jsx("button",{onClick:()=>t(-1),className:"back-button",children:i.jsx(rn,{size:16})}),i.jsxs("h1",{children:[i.jsx(mr,{size:28})," ","Start Subscription for ",n.name]}),w&&i.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",i.jsx("span",{children:w})]}),i.jsxs("div",{className:"subscription-form",children:[" ",i.jsx("h2",{children:"Available Subscription Plans"}),a.length===0?i.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):i.jsx("div",{className:"subscription-plan-list",children:a.map(E=>i.jsxs("div",{className:`subscription-plan-card ${o===E.id?"selected-plan":""}`,onClick:()=>l(E.id),children:[i.jsx("h3",{children:E.name}),i.jsxs("p",{className:"price",children:["",E.price]}),i.jsxs("p",{className:"duration",children:["Every ",E.interval," ",E.period,E.interval>1?"s":""]}),E.description&&i.jsx("p",{children:E.description})]},E.id))})]}),i.jsxs("div",{className:"subscription-form mb-6",children:[" ",i.jsx("h2",{children:"Select Payment Method"}),i.jsx("div",{className:"form-group",children:i.jsxs("label",{className:"inline-flex items-center",children:[i.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:y==="manual",onChange:()=>v("manual"),className:"mr-2"}),i.jsx("span",{children:"Cash (Manual)"})]})}),i.jsx("div",{className:"form-group",children:i.jsxs("label",{className:"inline-flex items-center",children:[i.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:y==="razorpay",onChange:()=>v("razorpay"),className:"mr-2"}),i.jsx("span",{children:"Razorpay"})]})})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:O,disabled:!o||x||a.length===0,className:"subscription-btn",children:[x&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),x?"Starting...":"Start Subscription"]})})]}):i.jsxs("div",{className:"subscription-page-container",children:[i.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[i.jsx("strong",{children:"Warning: "}),i.jsx("span",{children:"Patient not found."})]}),i.jsx("button",{onClick:()=>t(-1),className:"back-button",children:i.jsx(rn,{size:16})})]})},m3e=()=>{const e=Mt(),[t,n]=j.useState([]),[r,a]=j.useState(!1),[s,o]=j.useState(null),[l,c]=j.useState(null),u=j.useCallback(async()=>{a(!0),o(null);try{const p=await dI();n(p)}catch(p){o(p.message||"Failed to fetch clinic subscription plans."),c({type:"error",message:p.message||"Failed to fetch plans."})}finally{a(!1)}},[]);j.useEffect(()=>{u()},[u]),j.useEffect(()=>{if(l){const p=setTimeout(()=>c(null),5e3);return()=>clearTimeout(p)}},[l]);const f=async p=>{if(c(null),o(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){a(!0),o(null),c(null);try{await FMe(p),c({type:"success",message:"Clinic plan deactivated successfully!"}),u()}catch(y){o(y.message||"Failed to deactivate clinic plan."),c({type:"error",message:y.message||"Failed to deactivate plan."})}finally{a(!1)}}};return i.jsxs("div",{className:"subscription-page-container",children:[l&&i.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[i.jsxs("div",{className:"flex items-center",children:[l.type==="success"?i.jsx(Dl,{size:18,className:"mr-2 text-green-500"}):i.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),i.jsx("span",{children:l.message})]}),i.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:i.jsx(zt,{size:16})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-md hover:bg-gray-200",children:i.jsx(rn,{size:20})}),i.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),i.jsxs("button",{onClick:()=>e("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[i.jsx(Yr,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),r&&t.length===0&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"subscription-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{children:"Price"}),i.jsx("th",{children:"Billing Cycle"}),i.jsx("th",{children:"Status"}),i.jsx("th",{className:"text-right",children:"Actions"})]})}),i.jsx("tbody",{children:[1,2,3].map(p=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:120,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:60,height:24,style:{borderRadius:"16px"}})}),i.jsx("td",{className:"text-right",children:i.jsx(ee,{width:80,height:32})})]},p))})]})}),!r&&s&&t.length===0&&i.jsx("p",{className:"text-center text-red-500",children:s}),t.length>0&&i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"subscription-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{children:"Price"}),i.jsx("th",{children:"Billing Cycle"}),i.jsx("th",{children:"Status"}),i.jsx("th",{className:"text-right",children:"Actions"})]})}),i.jsx("tbody",{children:t.map(p=>i.jsxs("tr",{children:[i.jsx("td",{children:p.name}),i.jsxs("td",{children:["",Number(p.price).toFixed(2)]}),i.jsxs("td",{children:["Every ",p.interval>1?p.interval:""," ",p.period,p.interval>1?"s":""]}),i.jsx("td",{children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.status})}),i.jsxs("td",{className:"actions-cell text-right",children:[i.jsx("button",{onClick:()=>e(`/dashboard/clinic-subscriptions/edit/${p.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:i.jsx(Pa,{size:16,className:"inline-block"})}),p.status==="active"&&i.jsx("button",{onClick:()=>f(p.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:r,children:i.jsx(zr,{size:16,className:"inline-block"})})]})]},p.id))})]})}),!r&&t.length===0&&!s&&i.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},g3e=()=>{const e=Mt(),[t,n]=j.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[r,a]=j.useState(!1),[s,o]=j.useState(null),[l,c]=j.useState(null);j.useEffect(()=>{if(l){const y=setTimeout(()=>c(null),5e3);return()=>clearTimeout(y)}},[l]);const u=y=>{const{name:v,value:x,type:b}=y.target;n(w=>({...w,[v]:b==="number"?parseFloat(x):x}))},f=async y=>{if(y.preventDefault(),a(!0),o(null),c(null),!t.name||!t.price||!t.period||t.interval===void 0||t.interval<=0){o("Please fill in all required fields (Name, Price, Period, Interval > 0)."),a(!1);return}try{await RMe(t),c({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{e("/dashboard/clinic-subscriptions")},2e3)}catch(v){const x=v.message||"Failed to create clinic plan.";o(x),c({type:"error",message:x})}finally{a(!1)}},p=()=>{e(-1)};return i.jsxs("div",{className:"subscription-page-container",children:[l&&i.jsxs("div",{className:`${l.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[i.jsxs("div",{className:"flex items-center",children:[l.type==="success"?i.jsx(Dl,{size:18,className:"mr-2 text-green-500"}):i.jsx(Wr,{size:18,className:"mr-2 text-red-500"}),i.jsx("span",{children:l.message})]}),i.jsx("button",{onClick:()=>c(null),className:`${l.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:i.jsx(zt,{size:16})})]}),i.jsxs("div",{className:"subscription-form",children:[i.jsx("h1",{children:"Add New Clinic Subscription Plan"}),s&&i.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:s}),i.jsxs("form",{onSubmit:f,children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"name",children:["Plan Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"name",name:"name",value:t.name||"",onChange:u,required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"description",children:"Description"}),i.jsx("textarea",{id:"description",name:"description",rows:3,value:t.description||"",onChange:u})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"price",children:["Price (INR) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:t.price!==void 0?t.price:"",onChange:u,required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"period",children:["Billing Period ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{id:"period",name:"period",value:t.period||"monthly",onChange:u,required:!0,children:[i.jsx("option",{value:"daily",children:"Daily"}),i.jsx("option",{value:"weekly",children:"Weekly"}),i.jsx("option",{value:"monthly",children:"Monthly"}),i.jsx("option",{value:"yearly",children:"Yearly"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"interval",children:["Interval ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:t.interval||1,onChange:u,required:!0})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),i.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:t.razorpay_plan_id||"",onChange:u})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:p,className:"subscription-btn subscription-btn-secondary",children:"Back"}),i.jsxs("button",{type:"submit",disabled:r,className:"subscription-btn",children:[r?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,r?"Creating...":"Create Plan"]})]})]})]})]})},y3e=()=>{const{id:e}=Ai(),t=Mt(),[n,r]=j.useState(null),[a,s]=j.useState({}),[o,l]=j.useState(!1),[c,u]=j.useState(!0),[f,p]=j.useState(null),[y,v]=j.useState(null),x=j.useCallback(async()=>{if(!e){p("Plan ID is missing."),u(!1);return}u(!0),p(null);try{const T=await IMe(e);r(T),s({name:T.name,description:T.description||"",price:Number(T.price),period:T.period,interval:Number(T.interval),razorpay_plan_id:T.razorpay_plan_id||"",status:T.status})}catch(T){p(T.message||"Failed to fetch clinic plan details."),v({type:"error",message:T.message||"Failed to fetch plan details."})}finally{u(!1)}},[e]);j.useEffect(()=>{x()},[x]),j.useEffect(()=>{if(y){const T=setTimeout(()=>v(null),5e3);return()=>clearTimeout(T)}},[y]);const b=T=>{const{name:C,value:O,type:E}=T.target;s(P=>({...P,[C]:E==="number"?parseFloat(O):O}))},w=async T=>{if(T.preventDefault(),!e){p("Plan ID is missing.");return}if(l(!0),p(null),v(null),!a.name||!a.price||!a.period||a.interval===void 0||a.interval<=0){p("Please fill in all required fields (Name, Price, Period, Interval > 0)."),l(!1);return}try{await LMe(e,a),v({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{t(-1)},2e3)}catch(C){const O=C.message||"Failed to update clinic plan.";p(O),v({type:"error",message:O})}finally{l(!1)}},_=()=>{t(-1)};return c?i.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):f&&!n?i.jsx("div",{className:"p-6 text-center text-red-500",children:f}):n?i.jsxs("div",{className:"subscription-page-container",children:[y&&i.jsxs("div",{className:`${y.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[i.jsxs("div",{className:"flex items-center",children:[y.type==="success"?i.jsx(Dl,{size:18,className:"mr-2"}):i.jsx(Wr,{size:18,className:"mr-2"}),i.jsx("span",{children:y.message})]}),i.jsx("button",{onClick:()=>v(null),className:"ml-4",children:i.jsx(zt,{size:16})})]}),i.jsxs("div",{className:"subscription-form",children:[i.jsx("h1",{children:"Edit Clinic Subscription Plan"}),f&&i.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:f}),i.jsxs("form",{onSubmit:w,children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"name",children:["Plan Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"name",name:"name",value:a.name||"",onChange:b,required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"description",children:"Description"}),i.jsx("textarea",{id:"description",name:"description",rows:3,value:a.description||"",onChange:b})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"price",children:["Price (INR) ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:a.price!==void 0?a.price:"",onChange:b,required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"period",children:["Billing Period ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{id:"period",name:"period",value:a.period||"monthly",onChange:b,required:!0,children:[i.jsx("option",{value:"daily",children:"Daily"}),i.jsx("option",{value:"weekly",children:"Weekly"}),i.jsx("option",{value:"monthly",children:"Monthly"}),i.jsx("option",{value:"yearly",children:"Yearly"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"interval",children:["Interval ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:a.interval!==void 0?a.interval:"",onChange:b,required:!0})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),i.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:a.razorpay_plan_id||"",onChange:b})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"status",children:"Status"}),i.jsxs("select",{id:"status",name:"status",value:a.status||"active",onChange:b,children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:_,className:"subscription-btn subscription-btn-secondary",children:"Back"}),i.jsxs("button",{type:"submit",disabled:o,className:"subscription-btn",children:[o?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,o?"Saving...":"Save Changes"]})]})]})]})]}):i.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},v3e=()=>{const e=Mt(),[t,n]=j.useState([]),[r,a]=j.useState(""),[s,o]=j.useState(!0),[l,c]=j.useState(null),[u,f]=j.useState(!1),[p,y]=j.useState(null),v=j.useCallback(async()=>{c(null);try{const w=(await dI()).filter(_=>_.status==="active");n(w),w.length>0&&!r&&a(w[0].id)}catch(b){console.error("Error fetching plans:",b),c(`Failed to load subscription plans: ${b.message}`)}},[]);j.useEffect(()=>{(async()=>{o(!0);try{const w=await BMe();if(w&&w.short_url){window.location.href=w.short_url,c("You have a pending subscription. Redirecting to payment...");return}await v()}catch(w){console.error("Error during initial page load:",w),c(`An unexpected error occurred: ${w.message}`)}finally{o(!1)}})()},[v]);const x=async()=>{if(!r){y("Please select a clinic subscription plan.");return}const b=t.find(w=>w.id===r);if(!b){y("Selected plan details not found.");return}f(!0),y(null);try{console.log("Initiating Razorpay clinic subscription for plan:",b);const w=await $Me(r);if(w&&w.short_url)window.location.href=w.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(w){console.error("Error starting clinic subscription:",w),y(`Failed to start clinic subscription: ${w.message}`),f(!1)}};return s?i.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):l?i.jsxs("div",{className:"subscription-page-container",children:[i.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[i.jsx("strong",{children:"Error: "}),i.jsx("span",{children:l})]}),i.jsx("button",{onClick:()=>e(-1),className:"back-button",children:i.jsx(rn,{size:16})})]}):i.jsxs("div",{className:"subscription-page-container",children:[i.jsx("button",{onClick:()=>e(-1),className:"back-button",children:i.jsx(rn,{size:16})}),i.jsxs("h1",{children:[i.jsx(ZX,{size:28}),"Buy Pro Plan for Clinic"]}),p&&i.jsx("div",{className:"error-alert-subscription",role:"alert",children:i.jsx("span",{children:p})}),i.jsxs("div",{className:"subscription-form",children:[i.jsx("h2",{children:"Available Pro Plans"}),t.length===0?i.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):i.jsx("div",{className:"subscription-plan-list",children:t.map(b=>i.jsxs("div",{className:`subscription-plan-card ${r===b.id?"selected-plan":""}`,onClick:()=>a(b.id),children:[i.jsx("h3",{children:b.name}),i.jsxs("p",{className:"price",children:["",Number(b.price).toFixed(2)]}),i.jsxs("p",{className:"duration",children:["Every ",b.interval," ",b.period,b.interval>1?"s":""]}),b.description&&i.jsx("p",{children:b.description})]},b.id))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:x,disabled:!r||u||t.length===0,className:"subscription-btn",children:[u&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),u?"Initiating Payment...":"Buy Pro Plan"]})})]})},x3e=()=>{const e=Mt(),[t,n]=j.useState([]),[r,a]=j.useState(!0),[s,o]=j.useState(!0),[l,c]=j.useState(null),[u,f]=j.useState(!1),[p,y]=j.useState(!1),[v,x]=j.useState(null),[b,w]=j.useState({name:"",email:"",password:"",role:"user"}),[_,T]=j.useState({name:"",email:"",role:"",password:"",confirmPassword:""}),[C,O]=j.useState(""),[E,P]=j.useState(""),[I,F]=j.useState({}),[$,z]=j.useState(!1),[L,H]=j.useState(null),[V,ne]=j.useState([]),[Z,q]=j.useState(""),[K,se]=j.useState(!1),[G,B]=j.useState(null);j.useEffect(()=>{const oe=setTimeout(()=>{P(C)},500);return()=>{clearTimeout(oe)}},[C]),j.useEffect(()=>{fe(E)},[E]);const fe=async(oe="")=>{a(!0);try{const re=oe?`/api/users?search=${encodeURIComponent(oe)}`:"/api/users",X=await(await ce(re)).json();if(n(X),X.length>0){const W=[...new Set(X.map(pe=>pe.clinic_id).filter(pe=>!!pe))],ie={};await Promise.all(W.map(async pe=>{try{const le=await MMe(pe);ie[pe]=le}catch(le){console.error(`Failed to fetch subscription status for clinic ${pe}`,le),ie[pe]={hasProPlan:!1}}})),F(ie)}c(null)}catch(re){c("Failed to fetch users."),console.error(re)}finally{a(!1),o(!1)}},me=async oe=>{oe.preventDefault();try{await ce("/users",{method:"POST",body:JSON.stringify(b)}),f(!1),w({name:"",email:"",password:"",role:"user"}),fe()}catch(re){c("Failed to add user."),console.error(re)}},Y=async oe=>{if(oe.preventDefault(),!v)return;const{password:re,confirmPassword:ae,...X}=_,W={...X};if(re){if(re.length<6){c("Password must be at least 6 characters long.");return}if(re!==ae){c("Passwords do not match.");return}W.password=re}try{await ce(`/users/${v.id}`,{method:"PUT",body:JSON.stringify(W)}),y(!1),x(null),T({..._,password:"",confirmPassword:""}),fe()}catch(ie){c("Failed to update user."),console.error(ie)}},xe=async oe=>{if(window.confirm("Are you sure you want to delete this user?"))try{await ce(`/users/${oe}`,{method:"DELETE"}),fe()}catch(re){c("Failed to delete user."),console.error(re)}},Ie=oe=>{x(oe),T({name:oe.name,email:oe.email,role:oe.role,password:"",confirmPassword:""}),y(!0)},Ne=async()=>{se(!0);try{const oe=await dI();ne(oe),oe.length>0&&q(oe[0].id),B(null)}catch(oe){B("Failed to fetch subscription plans."),console.error(oe)}finally{se(!1)}},ke=oe=>{H(oe),z(!0),Ne()},de=async oe=>{if(oe.preventDefault(),!L||!Z){c("Please select a clinic and a plan.");return}try{await ce("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:L,planId:Z})}),z(!1),H(null),q(""),fe(),c(null)}catch(re){c("Failed to manually activate clinic subscription."),console.error(re)}},Q=async oe=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await DMe(oe),fe(),c(null)}catch(re){c("Failed to cancel subscription."),console.error(re)}};return r&&s?i.jsxs("div",{className:"user-management-page",children:[i.jsxs("div",{className:"user-management-header",children:[i.jsx("div",{className:"back-button",style:{width:80,height:32},children:i.jsx(ee,{width:80,height:32})}),i.jsx("h1",{children:i.jsx(ee,{width:200,height:32})})]}),i.jsxs("div",{className:"controls-container",children:[i.jsx(ee,{width:"100%",height:40,style:{maxWidth:"300px"}}),i.jsx(ee,{width:150,height:40})]}),i.jsxs("table",{className:"user-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{children:"Email"}),i.jsx("th",{children:"Role"}),i.jsx("th",{children:"Clinic ID"}),i.jsx("th",{children:"Subscription Status"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:[1,2,3,4,5].map(oe=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:120,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:180,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:24,style:{borderRadius:"16px"}})}),i.jsx("td",{children:i.jsx(ee,{width:150,height:32})})]},oe))})]})]}):l&&s?i.jsx("div",{className:"error-message",children:l}):i.jsxs("div",{className:"user-management-page",children:[i.jsxs("div",{className:"user-management-header",children:[i.jsx("button",{onClick:()=>e(-1),className:"back-button",children:i.jsx(rn,{className:"w-4 h-4"})}),i.jsx("h1",{children:"User Management"})]}),i.jsxs("div",{className:"controls-container",children:[i.jsx("input",{type:"text",placeholder:"Search by name or email...",value:C,onChange:oe=>O(oe.target.value),className:"search-input"}),i.jsx("button",{onClick:()=>f(!0),className:"add-user-button",children:"Add New User"})]}),u&&i.jsx("div",{className:"modal",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("span",{className:"close-button",onClick:()=>f(!1),children:""}),i.jsx("h2",{children:"Add New User"}),i.jsxs("form",{onSubmit:me,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Name:"}),i.jsx("input",{type:"text",value:b.name,onChange:oe=>w({...b,name:oe.target.value}),required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Email:"}),i.jsx("input",{type:"email",value:b.email,onChange:oe=>w({...b,email:oe.target.value}),required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Password:"}),i.jsx("input",{type:"password",value:b.password,onChange:oe=>w({...b,password:oe.target.value}),required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Role:"}),i.jsxs("select",{value:b.role,onChange:oe=>w({...b,role:oe.target.value}),children:[i.jsx("option",{value:"user",children:"User"}),i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),i.jsx("button",{type:"submit",children:"Add User"})]})]})}),p&&v&&i.jsx("div",{className:"modal",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("span",{className:"close-button",onClick:()=>y(!1),children:""}),i.jsx("h2",{children:"Edit User"}),i.jsxs("form",{onSubmit:Y,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Name:"}),i.jsx("input",{type:"text",value:_.name,onChange:oe=>T({..._,name:oe.target.value}),required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Email:"}),i.jsx("input",{type:"email",value:_.email,onChange:oe=>T({..._,email:oe.target.value}),required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Role:"}),i.jsxs("select",{value:_.role,onChange:oe=>T({..._,role:oe.target.value}),children:[i.jsx("option",{value:"user",children:"User"}),i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"New Password (optional):"}),i.jsx("input",{type:"password",value:_.password,onChange:oe=>T({..._,password:oe.target.value})})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Confirm New Password:"}),i.jsx("input",{type:"password",value:_.confirmPassword,onChange:oe=>T({..._,confirmPassword:oe.target.value})})]}),i.jsx("button",{type:"submit",children:"Update User"})]})]})}),$&&i.jsx("div",{className:"modal",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("span",{className:"close-button",onClick:()=>z(!1),children:""}),i.jsx("h2",{children:"Select Subscription Plan for Clinic"}),K&&i.jsx("div",{children:"Loading plans..."}),G&&i.jsx("div",{className:"error-message",children:G}),!K&&!G&&V.length===0&&i.jsx("div",{children:"No active subscription plans available."}),!K&&!G&&V.length>0&&i.jsxs("form",{onSubmit:de,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Select Plan:"}),i.jsx("select",{value:Z,onChange:oe=>q(oe.target.value),required:!0,children:V.map(oe=>i.jsxs("option",{value:oe.id,children:[oe.name," - $",oe.price,"/",oe.interval," ",oe.period]},oe.id))})]}),i.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),i.jsxs("table",{className:"user-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{children:"Email"}),i.jsx("th",{children:"Role"}),i.jsx("th",{children:"Clinic ID"}),i.jsx("th",{children:"Subscription Status"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:t.map(oe=>{const re=oe.clinic_id||"N/A",ae=re!=="N/A"?I[re]:null,X=(ae==null?void 0:ae.hasProPlan)??!1,W=X?"PRO":"Standard";return i.jsxs("tr",{children:[i.jsx("td",{children:oe.name}),i.jsx("td",{children:oe.email}),i.jsx("td",{children:oe.role}),i.jsx("td",{children:re}),i.jsx("td",{children:re!=="N/A"?i.jsx("span",{className:X?"pro-badge":"standard-badge",children:W}):"N/A"}),i.jsxs("td",{children:[i.jsx("button",{onClick:()=>Ie(oe),className:"edit-button",children:"Edit"}),i.jsx("button",{onClick:()=>xe(oe.id),className:"delete-button",children:"Delete"}),oe.clinic_id&&!X&&i.jsx("button",{onClick:()=>ke(oe.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),oe.clinic_id&&X&&i.jsx("button",{onClick:()=>Q(oe.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},oe.id)})})]})]})},b3e="_modalOverlay_1spz3_3",j3e="_modalContent_1spz3_29",w3e="_modalHeader_1spz3_53",S3e="_modalTitle_1spz3_71",N3e="_modalCloseButton_1spz3_83",_3e="_modalBody_1spz3_111",C3e="_formGroup_1spz3_119",T3e="_inputField_1spz3_141",E3e="_errorText_1spz3_175",A3e="_successText_1spz3_193",k3e="_modalFooter_1spz3_211",P3e="_button_1spz3_227",O3e="_buttonPrimary_1spz3_247",D3e="_buttonSecondary_1spz3_265",ja={modalOverlay:b3e,modalContent:j3e,modalHeader:w3e,modalTitle:S3e,modalCloseButton:N3e,modalBody:_3e,formGroup:C3e,inputField:T3e,errorText:E3e,successText:A3e,modalFooter:k3e,button:P3e,buttonPrimary:O3e,buttonSecondary:D3e},M3e=({isOpen:e,onClose:t})=>{const[n,r]=j.useState(""),[a,s]=j.useState(!1),[o,l]=j.useState(!1),[c,u]=j.useState(null),[f,p]=j.useState(null);Hc(void 0,e?200:99999),j.useEffect(()=>{e&&y()},[e]);const y=async()=>{s(!0),u(null);try{const x=await ce("/api/global-settings/app_gemini_api_key");if(x.ok){const b=await x.json();r(b.value||"")}else x.status}catch(x){console.warn("Could not fetch existing key:",x)}finally{s(!1)}},v=async()=>{l(!0),u(null),p(null);try{if(!(await ce("/api/global-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"app_gemini_api_key",value:n})})).ok)throw new Error("Failed to save API Key");p("API Key updated successfully!"),setTimeout(()=>{t(),p(null)},1500)}catch(x){u(x.message||"Error saving key")}finally{l(!1)}};return e?i.jsx("div",{className:ja.modalOverlay,children:i.jsxs("div",{className:ja.modalContent,children:[i.jsxs("div",{className:ja.modalHeader,children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(Lq,{size:24}),i.jsx("h3",{className:ja.modalTitle,children:"App Gemini API Key"})]}),i.jsx("button",{onClick:t,className:ja.modalCloseButton,children:i.jsx(zt,{size:20})})]}),i.jsxs("div",{className:ja.modalBody,children:[c&&i.jsx("div",{className:ja.errorText,children:c}),f&&i.jsx("div",{className:ja.successText,children:f}),i.jsxs("div",{className:ja.formGroup,children:[i.jsx("label",{htmlFor:"gemini-key",children:"Gemini API Key"}),a?i.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}}):i.jsx("input",{type:"text",id:"gemini-key",value:n,onChange:x=>r(x.target.value),className:ja.inputField,placeholder:"Enter Gemini API Key (AIza...)",disabled:o})]}),i.jsx("p",{style:{fontSize:"0.9em",color:"var(--secondary-text-color, #666)"},children:"This key will be used as a fallback for all clinics if their specific Gemini API key is not configured."})]}),i.jsxs("div",{className:ja.modalFooter,children:[i.jsx("button",{onClick:t,className:`${ja.button} ${ja.buttonSecondary}`,disabled:o,children:"Cancel"}),i.jsx("button",{onClick:v,className:`${ja.button} ${ja.buttonPrimary}`,disabled:o,children:o?"Saving...":"Save Key"})]})]})}):null},I3e=()=>{const[e,t]=j.useState(!1);return i.jsxs("div",{className:"admin-panel-container",children:[i.jsxs("h1",{className:"admin-panel-title",children:[i.jsx(dd,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),i.jsxs("div",{className:"admin-panel-grid",children:[i.jsxs(vr,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[i.jsx(xf,{size:48,className:"card-icon"}),i.jsx("h2",{children:"Manage Clinic Subscription Plans"}),i.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),i.jsxs(vr,{to:"/dashboard/users",className:"admin-panel-card",children:[i.jsx(ko,{size:48,className:"card-icon"}),i.jsx("h2",{children:"User Management"}),i.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]}),i.jsxs("div",{className:"admin-panel-card",onClick:()=>t(!0),style:{cursor:"pointer"},children:[i.jsx(Lq,{size:48,className:"card-icon"}),i.jsx("h2",{children:"Manage App Gemini API Key"}),i.jsx("p",{children:"Update the fallback Gemini API key used by the application."})]})]}),i.jsx(M3e,{isOpen:e,onClose:()=>t(!1)})]})},yk="tutorialCurrentStep",R3e=({onActionComplete:e})=>{const[t,n]=j.useState(!1),[r,a]=j.useState(!1),[s,o]=j.useState(null),l=async()=>{var c,u;n(!0);try{const f=await ce("/api/drugs/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){a(!0);const y=((c=p.details)==null?void 0:c.added)||0,v=((u=p.details)==null?void 0:u.updated)||0,x=`Added: ${y}, Updated: ${v}`;o(x),e(!0,"Default medications imported successfully!","pharmacyImport")}else e(!1,"Failed to import medications.")}catch{e(!1,"Error importing medications.")}finally{n(!1)}};return i.jsxs("div",{className:"tutorial-interactive-component center-content",children:[i.jsx("p",{className:"action-hint",children:"One click to populate your inventory."}),r?i.jsxs("div",{className:"success-badge flex-col",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tl,{size:16})," Imported"]}),s&&i.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):i.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:t,children:t?i.jsxs(i.Fragment,{children:[i.jsx(Dc,{size:18,className:"animate-spin"})," Importing ~80 items..."]}):i.jsxs(i.Fragment,{children:[i.jsx(kw,{size:18})," Import Drugs"]})})]})},L3e=({onActionComplete:e})=>{const[t,n]=j.useState(!1),[r,a]=j.useState(!1),[s,o]=j.useState(null),l=async()=>{var c,u;n(!0);try{const f=await ce("/api/lab-tests/import-defaults",{method:"POST"}),p=await f.json();if(f.ok){a(!0);const y=((c=p.details)==null?void 0:c.added)||0,v=((u=p.details)==null?void 0:u.updated)||0,x=`Added: ${y}, Updated: ${v}`;o(x),e(!0,"Default lab tests imported successfully!","labImport")}else e(!1,"Failed to import lab tests.")}catch{e(!1,"Error importing lab tests.")}finally{n(!1)}};return i.jsxs("div",{className:"tutorial-interactive-component center-content",children:[i.jsx("p",{className:"action-hint",children:"Setup your lab with common tests."}),r?i.jsxs("div",{className:"success-badge flex-col",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tl,{size:16})," Imported"]}),s&&i.jsx("span",{className:"text-xs opacity-80 mt-1",children:s})]}):i.jsx("button",{onClick:l,className:"tutorial-button primary",disabled:t,children:t?i.jsxs(i.Fragment,{children:[i.jsx(Dc,{size:18,className:"animate-spin"})," Importing ~25 items..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Za,{size:18})," Import Tests"]})})]})},F3e=({onOpenCommandBar:e})=>i.jsxs("div",{className:"tutorial-interactive-component center-content",children:[i.jsx("p",{className:"action-hint",children:"Ready to experience the power? Open the command bar to start."}),i.jsx("button",{onClick:e,className:"tutorial-button primary large-button",children:i.jsxs("div",{className:"flex items-center gap-2",children:["Open Command Bar ",i.jsx("span",{className:"shortcut-hint-badge",children:"Ctrl+K"})]})})]}),vk=[{title:"Welcome to Newtons Ai HMS",description:"Your all-in-one clinic management solution. Let's get your clinic ready in less than 2 minutes.",icon:i.jsx(Pw,{size:48,className:"step-icon welcome"}),component:null,actionText:"Get Started"},{title:"Pharmacy Setup",description:"Start by populating your pharmacy. We can import a standard list of medicines for you.",icon:i.jsx(kw,{size:48,className:"step-icon pharmacy"}),component:R3e,actionText:"Next",showSkip:!0},{title:"Lab Configuration",description:"Next, let's set up your lab. Import common lab tests to start generating reports immediately.",icon:i.jsx(Za,{size:48,className:"step-icon lab"}),component:L3e,actionText:"Next",showSkip:!0},{title:"Power at Your Fingertips",description:"The Command Bar is your central hub for everything. Search patients, add orders, or use AI tools instantly.",icon:i.jsx(KX,{size:48,className:"step-icon ai"}),component:F3e,actionText:null,isLast:!0}],$3e=({onClose:e,onMarkAsSeen:t})=>{const{openCommandBar:n}=Pc(),[r,a]=j.useState(()=>{const w=localStorage.getItem(yk);return w?parseInt(w,10):0}),[s,o]=j.useState(!1),[l,c]=j.useState(null),[u,f]=j.useState(null);j.useEffect(()=>{localStorage.setItem(yk,r.toString()),c(null)},[r]);const p=()=>{o(!0),setTimeout(()=>{a(w=>Math.min(w+1,vk.length-1)),o(!1)},300)},y=(w,_,T)=>{f(w),c(_),w&&(T==="pharmacyImport"||T==="labImport")&&setTimeout(p,1e3)},v=()=>{t(),e(),localStorage.removeItem(yk)},x=()=>{v(),setTimeout(()=>{n()},100)},b=vk[r];return i.jsx("div",{className:"tutorial-overlay",children:i.jsxs("div",{className:`tutorial-card ${s?"fade-out":"fade-in"}`,children:[i.jsxs("div",{className:"tutorial-visual",children:[i.jsx("div",{className:"icon-circle",children:b.icon}),i.jsx("div",{className:"step-indicators",children:vk.map((w,_)=>i.jsx("div",{className:`step-dot ${_===r?"active":""} ${_<r?"completed":""}`},_))})]}),i.jsxs("div",{className:"tutorial-content",children:[i.jsx("button",{className:"close-button",onClick:v,title:"Close Tutorial",children:i.jsx(zt,{size:20})}),i.jsxs("div",{className:"text-content",children:[i.jsx("h2",{children:b.title}),i.jsx("p",{className:"description",children:b.description})]}),i.jsxs("div",{className:"interactive-area",children:[b.component?i.jsx(b.component,{onActionComplete:y,onOpenCommandBar:x}):null,l&&i.jsx("div",{className:`status-message ${u?"success":"error"}`,children:l})]}),i.jsxs("div",{className:"action-footer",children:[b.showSkip&&i.jsx("button",{onClick:p,className:"tutorial-button text-only",children:"Skip for now"}),b.actionText&&i.jsxs("button",{onClick:p,className:"tutorial-button primary",children:[b.actionText," ",i.jsx(md,{size:16})]})]})]})]})})},B3e=({isOpen:e,onClose:t,onSuccess:n,medication:r,initialPatient:a,initialItems:s})=>{const[o,l]=j.useState(""),[c,u]=j.useState([]),[f,p]=j.useState(null),[y,v]=j.useState(!1);Hc(void 0,e?200:99999),j.useEffect(()=>{if(e&&r){b([{id:Date.now(),medication_name:r.medicationName,drug_id:null,quantity:r.quantity,tablets_per_day:r.tabletsPerDay||1,number_of_days:r.numberOfDays||30,directions:r.directions||"",notes:r.notes||""}]),_(r.frequencyDays);try{const ke=new Date(r.nextDeliveryDate);isNaN(ke.getTime())||C(ke.toISOString().split("T")[0])}catch(ke){console.error("Error parsing date",ke)}p({id:r.patientId,name:r.patientName,phone:r.patientPhone,patient_token_number:r.patientToken})}else e&&(a||s)?(s&&s.length>0&&b(s),a&&p(a)):e&&!r&&!s&&(b([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30),C(""),p(null),l(""))},[e,r,a,s]);const[x,b]=j.useState([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),[w,_]=j.useState(30),[T,C]=j.useState(""),[O,E]=j.useState(null),[P,I]=j.useState(""),[F,$]=j.useState([]),[z,L]=j.useState(!1),[H,V]=j.useState(!1),[ne,Z]=j.useState(null),q=j.useRef(null),K=j.useRef(null);j.useEffect(()=>{if(e){const ke=new Date;ke.setDate(ke.getDate()+30),C(ke.toISOString().split("T")[0])}},[e]);const se=j.useCallback(async ke=>{if(!ke.trim()){u([]);return}v(!0);try{const de=await ce(`/api/patients?search=${encodeURIComponent(ke)}&limit=10`);if(de.ok){const Q=await de.json();u(Q.patients||[])}}catch(de){console.error("Error searching patients:",de)}finally{v(!1)}},[]);j.useEffect(()=>{q.current&&clearTimeout(q.current),o&&!f?q.current=setTimeout(()=>se(o),300):u([])},[o,f,se]);const G=j.useCallback(async ke=>{if(!ke.trim()){$([]);return}L(!0);try{const de=await ce(`/api/drugs?search=${encodeURIComponent(ke)}&limit=10`);if(de.ok){const Q=await de.json();$(Q.drugs||[])}}catch(de){console.error("Error searching drugs:",de)}finally{L(!1)}},[]);j.useEffect(()=>{K.current&&clearTimeout(K.current),P&&O!==null?K.current=setTimeout(()=>G(P),300):$([])},[P,O,G]);const B=ke=>{if(!ke)return 1;const de=ke.match(/(?:\d+x)?(\d+)(?:s|tabs)?/i);return de?parseInt(de[1],10):1},fe=ke=>{p(ke),l(`${ke.name} (${ke.patient_token_number})`),u([])},me=(ke,de)=>{const Q=[...x];Q[de]={...Q[de],medication_name:ke.name,drug_id:ke.id,pack_size:B(ke.pack),packs:0,loose:0,quantity:0},b(Q),E(null),I(""),$([])},Y=(ke,de,Q)=>{const oe=[...x],re={...oe[ke]},ae=re.pack_size||1;if(de==="packs"||de==="loose"){const X=parseInt(Q)||0;de==="packs"&&(re.packs=X),de==="loose"&&(re.loose=X);const W=re.packs||0,ie=re.loose||0;re.quantity=W*ae+ie}else if(de==="tablets_per_day"||de==="number_of_days"){de==="tablets_per_day"&&(re.tablets_per_day=Q),de==="number_of_days"&&(re.number_of_days=Q);const X=parseFloat(re.tablets_per_day.toString())||0,W=parseInt(re.number_of_days.toString())||0,ie=Math.ceil(X*W);re.quantity=ie,re.packs=Math.floor(ie/ae),re.loose=ie%ae}else re[de]=Q;oe[ke]=re,b(oe)},xe=()=>{b([...x,{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:w,directions:"",notes:"",packs:0,loose:0,pack_size:1}])},Ie=ke=>{x.length>1&&b(x.filter((de,Q)=>Q!==ke))},Ne=async ke=>{if(ke.preventDefault(),Z(null),!f){Z("Please select a patient.");return}if(x.some(Q=>!Q.medication_name||Q.quantity<=0)){Z("Please ensure all items have a medication name and valid quantity.");return}V(!0);try{const Q={patient_id:f.id,items:x.map(re=>({medication_name:re.medication_name,drug_id:re.drug_id,quantity:re.quantity,tablets_per_day:re.tablets_per_day,number_of_days:re.number_of_days,directions:re.directions,notes:re.notes,frequency_days:w,next_delivery_date:T}))},oe=await ce("/api/recurring-medications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!oe.ok){const re=await oe.json();throw new Error(re.message+(re.error?": "+re.error:"")||"Failed to create recurring medication.")}n(),t(),p(null),l(""),b([{id:Date.now(),medication_name:"",drug_id:null,quantity:1,tablets_per_day:1,number_of_days:30,directions:"",notes:""}]),_(30)}catch(Q){Z(Q.message)}finally{V(!1)}};return e?i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"add-recurring-modal",style:{maxWidth:"800px",width:"95%"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:"Add Recurring Medication Order"}),i.jsx("button",{className:"close-btn",onClick:t,children:i.jsx(zt,{size:20})})]}),i.jsxs("div",{className:"modal-body",children:[ne&&i.jsx("div",{className:"error-message",children:ne}),i.jsxs("form",{onSubmit:Ne,className:"recurring-form",children:[i.jsxs("div",{className:"order-settings-row",children:[i.jsxs("div",{className:"form-group",style:{flex:2},children:[i.jsxs("label",{children:[i.jsx(mr,{size:16})," Patient"]}),i.jsxs("div",{className:"search-wrapper",children:[i.jsx("input",{type:"text",placeholder:"Search patient...",value:o,onChange:ke=>{l(ke.target.value),p(null)},className:f?"selected":"unselected"}),y&&i.jsx("span",{className:"spinner",children:"..."}),o&&!f&&c.length>0&&i.jsx("ul",{className:"suggestions-list",children:c.map(ke=>i.jsxs("li",{onClick:()=>fe(ke),children:[i.jsx("div",{className:"suggestion-name",children:ke.name}),i.jsxs("div",{className:"suggestion-details",children:[ke.phone,"  ",ke.patient_token_number]})]},ke.id))})]})]}),i.jsxs("div",{className:"form-group",style:{flex:1},children:[i.jsxs("label",{children:[i.jsx(Fb,{size:16})," Frequency"]}),i.jsxs("select",{value:w,onChange:ke=>{const de=parseInt(ke.target.value);_(de);const Q=new Date;Q.setDate(Q.getDate()+de),C(Q.toISOString().split("T")[0]);const oe=x.map(re=>({...re,number_of_days:de}));b(oe)},children:[i.jsx("option",{value:15,children:"Every 15 Days"}),i.jsx("option",{value:30,children:"Every 30 Days"}),i.jsx("option",{value:60,children:"Every 60 Days"}),i.jsx("option",{value:90,children:"Every 90 Days"})]})]}),i.jsxs("div",{className:"form-group",style:{flex:1},children:[i.jsxs("label",{children:[i.jsx(pi,{size:16})," Next Delivery"]}),i.jsx("input",{type:"date",value:T,onChange:ke=>C(ke.target.value)})]})]}),i.jsx("hr",{className:"divider"}),i.jsxs("div",{className:"items-header",children:[i.jsx("h4",{children:"Medications"}),i.jsxs("button",{type:"button",className:"add-item-btn",onClick:xe,children:[i.jsx(Yr,{size:14})," Add Drug"]})]}),i.jsx("div",{className:"items-list",children:x.map((ke,de)=>i.jsxs("div",{className:"medication-item-row",children:[i.jsxs("div",{className:"row-top",children:[i.jsxs("div",{className:"form-group med-search-group",children:[i.jsx("label",{children:"Drug Name"}),i.jsxs("div",{className:"search-wrapper",children:[i.jsx("input",{type:"text",placeholder:"Search drug...",value:O===de?P:ke.medication_name,onFocus:()=>{E(de),I(ke.medication_name)},onChange:Q=>{I(Q.target.value),Y(de,"medication_name",Q.target.value)}}),O===de&&z&&i.jsx("span",{className:"spinner",children:"..."}),O===de&&P&&F.length>0&&i.jsx("ul",{className:"suggestions-list",children:F.map(Q=>i.jsxs("li",{onClick:()=>me(Q,de),children:[i.jsx("div",{className:"suggestion-name",children:Q.name}),i.jsxs("div",{className:"suggestion-details",children:["Stock: ",Q.stock]})]},Q.id))})]})]}),i.jsxs("div",{className:"form-group small-input",children:[i.jsx("label",{children:"Tabs/Day"}),i.jsx("input",{type:"number",min:"0.5",step:"0.5",value:ke.tablets_per_day,onChange:Q=>Y(de,"tablets_per_day",Q.target.value)})]}),i.jsxs("div",{className:"form-group small-input",children:[i.jsx("label",{children:"Days"}),i.jsx("input",{type:"number",min:"1",value:ke.number_of_days,onChange:Q=>Y(de,"number_of_days",Q.target.value)})]}),i.jsxs("div",{className:"form-group small-input",children:[i.jsx("label",{children:"Packs"}),i.jsx("input",{type:"number",min:"0",value:ke.packs||"",onChange:Q=>Y(de,"packs",Q.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"form-group small-input",children:[i.jsx("label",{children:"Loose"}),i.jsx("input",{type:"number",min:"0",value:ke.loose||"",onChange:Q=>Y(de,"loose",Q.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"form-group small-input",children:[i.jsx("label",{children:"Total"}),i.jsx("input",{type:"number",value:ke.quantity,disabled:!0,style:{backgroundColor:"#f5f5f5",cursor:"not-allowed"}})]}),i.jsx("button",{type:"button",className:"remove-btn",onClick:()=>Ie(de),disabled:x.length===1,children:i.jsx(zr,{size:16})})]}),i.jsxs("div",{className:"row-bottom",children:[i.jsx("div",{className:"form-group",style:{flex:1},children:i.jsx("input",{type:"text",placeholder:"Directions (e.g. 1-0-1 after food)",value:ke.directions,onChange:Q=>Y(de,"directions",Q.target.value)})}),i.jsx("div",{className:"form-group",style:{flex:1},children:i.jsx("input",{type:"text",placeholder:"Notes",value:ke.notes,onChange:Q=>Y(de,"notes",Q.target.value)})})]})]},ke.id))}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{type:"button",className:"btn-cancel",onClick:t,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn-submit",disabled:H,children:H?"Creating...":"Create Recurring Order"})]})]})]})]})}):null},z3e=()=>{const[e,t]=j.useState([]),[n,r]=j.useState(!0),[a,s]=j.useState(null),[o,l]=j.useState(""),[c,u]=j.useState(1),[f,p]=j.useState(1),[y,v]=j.useState(0),[x,b]=j.useState(!1),[w,_]=j.useState(void 0),T=10,C=j.useRef(null);Hc();const O=j.useCallback(async(L,H)=>{r(!0),s(null);try{let V=`/api/recurring-medications?page=${L}&limit=${T}`;H&&(V+=`&search=${encodeURIComponent(H)}`);const ne=await ce(V);if(!ne.ok)throw new Error("Failed to fetch recurring medications.");const Z=await ne.json();t(Z.medications),p(Z.totalPages),v(Z.total),u(Z.page)}catch(V){console.error(V),s(V.message||"An error occurred while fetching data.")}finally{r(!1)}},[]);j.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{O(c,o)},500),()=>{C.current&&clearTimeout(C.current)}),[o,c,O]);const E=L=>{l(L.target.value),u(1)},P=L=>{L>=1&&L<=f&&u(L)},I=L=>{_(L),b(!0)},F=()=>{O(c,o),b(!1),_(void 0)},$=L=>L===30?"Every 30 Days (Monthly)":L===15?"Every 15 Days":`Every ${L} Days`,z=L=>{switch(L){case"active":return"status-pill status-pill-active";case"paused":return"status-pill status-pill-paused";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill"}};return i.jsxs("div",{className:"refill-reminders-container",children:[i.jsxs("div",{className:"refill-header",children:[i.jsx("h3",{className:"refill-title",children:"Recurring Medications"}),i.jsxs("div",{className:"refill-actions",children:[i.jsxs("button",{className:"refill-action-button btn-add",onClick:()=>{_(void 0),b(!0)},children:[i.jsx(ws,{size:16})," Add New"]}),i.jsxs("div",{className:"search-box",children:[i.jsx("input",{type:"text",placeholder:"Search patient, phone, medication...",value:o,onChange:E}),i.jsx(Un,{size:18,className:"search-icon"})]})]})]}),a&&i.jsx("div",{className:"error-message-box",children:a}),i.jsx("div",{className:"refill-table-container",children:n?i.jsx("div",{className:"loading-pulse",children:"Loading..."}):e.length===0?i.jsx("div",{className:"empty-state",children:"No recurring medications found."}):i.jsx("div",{className:"refill-grouped-list",children:Object.values(e.reduce((L,H)=>{const V=H.patientId;return L[V]||(L[V]={patientId:H.patientId,patientName:H.patientName,patientPhone:H.patientPhone,patientToken:H.patientToken,medications:[]}),L[V].medications.push(H),L},{})).map(L=>i.jsxs("div",{className:"patient-medication-group-card",children:[i.jsxs("div",{className:"group-header",children:[i.jsxs("div",{className:"patient-info",children:[i.jsx("h4",{className:"patient-name",children:L.patientName}),i.jsxs("span",{className:"patient-meta",children:["Token: ",L.patientToken,"  Phone: ",L.patientPhone]})]}),i.jsx("div",{className:"group-actions"})]}),i.jsxs("table",{className:"refill-table group-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Medication"}),i.jsx("th",{children:"Qty"}),i.jsx("th",{children:"Frequency"}),i.jsx("th",{children:"Next Delivery"}),i.jsx("th",{children:"Status"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:L.medications.map(H=>i.jsxs("tr",{children:[i.jsxs("td",{children:[i.jsx("div",{className:"med-name",children:H.medicationName}),(H.tabletsPerDay||H.numberOfDays||H.directions)&&i.jsxs("div",{className:"med-usage-details",style:{fontSize:"0.8em",color:"#666"},children:[H.tabletsPerDay&&i.jsxs("span",{children:[H.tabletsPerDay," tabs/day  "]}),H.numberOfDays&&i.jsxs("span",{children:[H.numberOfDays," days "]})]}),H.notes&&i.jsxs("div",{className:"med-notes",children:["Note: ",H.notes]})]}),i.jsx("td",{children:H.quantity}),i.jsx("td",{children:i.jsx("span",{className:"frequency-badge",children:$(H.frequencyDays)})}),i.jsx("td",{children:i.jsx("div",{className:"date-display",children:new Date(H.nextDeliveryDate).toLocaleDateString()})}),i.jsx("td",{children:i.jsx("span",{className:z(H.status),children:H.status})}),i.jsx("td",{children:i.jsxs("div",{className:"action-buttons",children:[i.jsx("button",{className:"action-btn edit",title:"Edit",onClick:()=>I(H),children:i.jsx(Pa,{size:16})}),i.jsx("button",{className:"action-btn delete",title:"Delete/Cancel",children:i.jsx(zr,{size:16})})]})})]},H.id))})]})]},L.patientId))})}),!n&&f>1&&i.jsxs("div",{className:"pagination-container",children:[i.jsxs("span",{className:"pagination-info",children:["Page ",c," of ",f," (Total ",y,")"]}),i.jsxs("div",{className:"pagination-controls",children:[i.jsxs("button",{onClick:()=>P(c-1),disabled:c===1,className:"page-btn",children:[i.jsx(Lb,{size:16})," Prev"]}),i.jsxs("button",{onClick:()=>P(c+1),disabled:c===f,className:"page-btn",children:["Next ",i.jsx(md,{size:16})]})]})]}),i.jsx(B3e,{isOpen:x,onClose:()=>{b(!1),_(void 0)},onSuccess:F,medication:w})]})},q3e=()=>{const e=Mt(),t=$r();return j.useEffect(()=>{const n=new URLSearchParams(t.search),r=n.get("token"),a=n.get("caseDetails");r?(async()=>{try{const o=await ce(`/api/patients?search=${r}&limit=1`);if(!o.ok)throw new Error("Failed to fetch patient by token");const c=(await o.json()).patients[0];if(!c)throw new Error("Patient with the given token not found");const u=await ce(`/api/queue/patient/${c.id}/latest`);if(u.ok){const y=await u.json();if(y!=null&&y._id){e(`/dashboard/edit-complaint/${y._id}`,{state:{initialComplaint:a}});return}}const f=await ce("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:c.id,complaint:a})});if(!f.ok)throw new Error("Failed to create queue entry");const p=await f.json();if(p!=null&&p.id)e(`/dashboard/edit-complaint/${p.id}`,{state:{initialComplaint:a}});else throw new Error("Failed to get ID from new queue entry.")}catch(o){console.error("Error handling complaint URL:",o),e("/dashboard/search-patient")}})():e("/dashboard/search-patient")},[t,e]),i.jsx("div",{children:"Loading..."})},Ez=()=>{const e=Mt(),[t,n]=j.useState([]),[r,a]=j.useState(!0),[s,o]=j.useState(null),[l,c]=j.useState(!1),[u,f]=j.useState(!1),[p,y]=j.useState(!1),[v,x]=j.useState(!1),[b,w]=j.useState(!1),[_,T]=j.useState(!1),[C,O]=j.useState(null),[E,P]=j.useState([]),[I,F]=j.useState(null),[$,z]=j.useState(""),[L,H]=j.useState(""),[V,ne]=j.useState(""),[Z,q]=j.useState(""),[K,se]=j.useState(""),[G,B]=j.useState(""),[fe,me]=j.useState(""),[Y,xe]=j.useState(""),[Ie,Ne]=j.useState(""),[ke,de]=j.useState(""),[Q,oe]=j.useState(""),[re,ae]=j.useState("cash"),X=j.useCallback(async()=>{a(!0),o(null);try{const ve=await ce("/api/distributors");if(!ve.ok)throw new Error(`Failed to fetch distributors: ${ve.statusText}`);const Ce=await ve.json();n(Ce)}catch(ve){console.error("Failed to fetch distributors:",ve),o(ve.message||"Failed to load distributors.")}finally{a(!1)}},[]);j.useEffect(()=>{X()},[X]);const W=async ve=>{ve.preventDefault(),o(null);try{const Ce=await ce("/api/distributors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:$,contact_person:L,phone:V,email:Z,address:K,gst_number:G,drug_license_number:fe})});if(!Ce.ok){const nt=await Ce.json();throw new Error(nt.message||"Failed to add distributor.")}et(),X()}catch(Ce){console.error("Error adding distributor:",Ce),o(Ce.message||"Failed to add distributor.")}},ie=async ve=>{if(ve.preventDefault(),o(null),!!C)try{const Ce=await ce(`/api/distributors/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:$,contact_person:L,phone:V,email:Z,address:K,gst_number:G,drug_license_number:fe})});if(!Ce.ok){const nt=await Ce.json();throw new Error(nt.message||"Failed to update distributor.")}_e(),X()}catch(Ce){console.error("Error updating distributor:",Ce),o(Ce.message||"Failed to update distributor.")}},pe=async()=>{if(o(null),!!C)try{const ve=await ce(`/api/distributors/${C.id}`,{method:"DELETE"});if(!ve.ok){const Ce=await ve.json();throw new Error(Ce.message||"Failed to delete distributor.")}Ye(),X()}catch(ve){console.error("Error deleting distributor:",ve),o(ve.message||"Failed to delete distributor.")}},le=j.useCallback(async ve=>{o(null);try{const Ce=await ce(`/api/distributors/${ve}/payments`);if(!Ce.ok)throw new Error(`Failed to fetch payments: ${Ce.statusText}`);const Ve=(await Ce.json()).map(kt=>({...kt,order_value:parseFloat(kt.order_value),amount_paid:parseFloat(kt.amount_paid),balance_remaining:parseFloat(kt.balance_remaining)}));P(Ve);const dt=await ce(`/api/distributors/${ve}/balance`);if(!dt.ok)throw new Error(`Failed to fetch balance: ${dt.statusText}`);const Ct=await dt.json();F({totalOrderValue:parseFloat(Ct.totalOrderValue),totalAmountPaid:parseFloat(Ct.totalAmountPaid),remainingBalance:parseFloat(Ct.remainingBalance)})}catch(Ce){console.error("Error fetching payments/balance:",Ce),o(Ce.message||"Failed to load payments or balance.")}},[]),je=async ve=>{if(ve.preventDefault(),o(null),!!C)try{const Ce=await ce(`/api/distributors/${C.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:Y,order_value:parseFloat(Ie||"0"),amount_paid:parseFloat(ke||"0"),notes:Q,payment_mode:re})});if(!Ce.ok){const nt=await Ce.json();throw new Error(nt.message||"Failed to add payment.")}we(),le(C.id)}catch(Ce){console.error("Error adding payment:",Ce),o(Ce.message||"Failed to add payment.")}},Ge=()=>{z(""),H(""),ne(""),q(""),se(""),B(""),me(""),o(null),f(!0)},et=()=>{f(!1)},ht=ve=>{O(ve),z(ve.name),H(ve.contact_person||""),ne(ve.phone||""),q(ve.email||""),se(ve.address||""),B(ve.gst_number||""),me(ve.drug_license_number||""),o(null),y(!0)},_e=()=>{y(!1),O(null)},Fe=ve=>{O(ve),o(null),x(!0)},Ye=()=>{x(!1),O(null)},Ke=ve=>{O(ve),le(ve.id),o(null),w(!0)},be=()=>{w(!1),O(null),P([]),F(null)},De=ve=>{O(ve),xe(new Date().toISOString().split("T")[0]),Ne("0"),de("0"),oe(""),ae("cash"),o(null),T(!0)},we=()=>{T(!1),O(null)};return r?i.jsxs("div",{id:"distributor-page-container",children:[i.jsxs("div",{className:"distributor-header",style:{marginBottom:"20px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx(ee,{width:80,height:36}),i.jsx(ee,{width:200,height:32})]}),i.jsxs("div",{className:"header-actions",children:[i.jsx(ee,{width:150,height:36}),i.jsx(ee,{width:150,height:36}),i.jsx(ee,{width:180,height:36})]})]}),i.jsx("div",{className:"table-wrapper",children:i.jsxs("table",{className:"dmp-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name"}),i.jsx("th",{children:"Contact Person"}),i.jsx("th",{children:"Phone"}),i.jsx("th",{children:"Email"}),i.jsx("th",{children:"Balance"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:[1,2,3,4,5].map(ve=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:120,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:180,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:30})})]},ve))})]})})]}):s?i.jsxs("div",{className:"error-indicator",children:["Error: ",s]}):i.jsxs("div",{id:"distributor-page-container",children:[i.jsxs("div",{className:"distributor-header",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsxs("button",{onClick:()=>e(-1),className:"dmp-button dmp-button-secondary",title:"Go Back",children:[i.jsx(rn,{size:20})," Back"]}),i.jsx("h2",{children:"Distributor Management"})]}),i.jsxs("div",{className:"header-actions",children:[i.jsxs("div",{className:"view-mode-toggle",style:{display:"flex",gap:"8px"},children:[i.jsxs("button",{onClick:()=>c(!1),className:`dmp-button ${l?"dmp-button-secondary":"dmp-button-primary"}`,title:"List View",children:[i.jsx($b,{size:18})," List"]}),i.jsxs("button",{onClick:()=>c(!0),className:`dmp-button ${l?"dmp-button-primary":"dmp-button-secondary"}`,title:"Excel Mode (Edit)",children:[i.jsx(bf,{size:18})," Excel"]})]}),i.jsxs("button",{onClick:Ge,className:"dmp-button dmp-button-primary",children:[i.jsx(ws,{size:18}),"Add Distributor"]})]})]}),(()=>{const ve=t.reduce((nt,Ve)=>nt+parseFloat(Ve.remainingBalance||"0"),0),Ce=ve>=0;return i.jsxs("div",{className:"stats-container",children:[i.jsxs("div",{className:`stat-card ${Ce?"positive":"negative"}`,children:[i.jsx("span",{className:"label",children:"Total Balance"}),i.jsxs("span",{className:"value",children:["",ve.toFixed(2)]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsx("span",{className:"label",children:"Total Distributors"}),i.jsx("span",{className:"value",children:t.length})]})]})})(),i.jsx("div",{className:"table-wrapper",children:l?i.jsx(Kb,{columns:[{key:"name",label:"Name",editable:!0,type:"text"},{key:"contact_person",label:"Contact Person",editable:!0,type:"text"},{key:"phone",label:"Phone",editable:!0,type:"text"},{key:"email",label:"Email",editable:!0,type:"text"},{key:"address",label:"Address",editable:!0,type:"text"},{key:"gst_number",label:"GST Number",editable:!0,type:"text"},{key:"drug_license_number",label:"Drug License",editable:!0,type:"text"}],data:t,editable:!0,showRowNumbers:!0,title:"Distributors",onSave:async ve=>{const Ce=ve.map(async nt=>{const Ve=t.find(dt=>dt.id===nt.id);if(Ve&&JSON.stringify(Ve)!==JSON.stringify(nt))return ce(`/api/distributors/${nt.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)})});try{await Promise.all(Ce),X()}catch(nt){alert("Error saving changes"),console.error(nt)}}}):i.jsxs("table",{className:"dmp-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Name / Contact"}),i.jsx("th",{children:"Details"}),i.jsx("th",{children:"Tax / License"}),i.jsx("th",{children:"Balance"}),i.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),i.jsx("tbody",{children:t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,style:{textAlign:"center",padding:"2rem",color:"var(--dmp-text-secondary)"},children:"No distributors found."})}):t.map(ve=>i.jsxs("tr",{children:[i.jsxs("td",{children:[i.jsx("div",{className:"primary-text",children:ve.name}),i.jsx("div",{className:"secondary-text",children:ve.contact_person})]}),i.jsxs("td",{children:[i.jsx("div",{className:"secondary-text",children:ve.phone||"-"}),i.jsx("div",{className:"secondary-text",children:ve.email||"-"}),i.jsx("div",{className:"secondary-text",children:ve.address||"-"})]}),i.jsxs("td",{children:[i.jsxs("div",{className:"secondary-text",children:["GST: ",ve.gst_number||"-"]}),i.jsxs("div",{className:"secondary-text",children:["DL: ",ve.drug_license_number||"-"]})]}),i.jsx("td",{children:i.jsxs("span",{className:`status-badge ${parseFloat(ve.remainingBalance||"0")>0?"balance-ok":"balance-owed"}`,children:["",ve.remainingBalance||"0.00"]})}),i.jsx("td",{style:{textAlign:"right"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[i.jsx("button",{onClick:()=>Ke(ve),className:"dmp-button-icon",title:"View Payments & Balance",children:i.jsx($m,{size:18})}),i.jsx("button",{onClick:()=>De(ve),className:"dmp-button-icon",title:"Add Payment",children:i.jsx(Ow,{size:18})}),i.jsx("button",{onClick:()=>ht(ve),className:"dmp-button-icon edit",title:"Edit Distributor",children:i.jsx(Pa,{size:18})}),i.jsx("button",{onClick:()=>Fe(ve),className:"dmp-button-icon delete",title:"Delete Distributor",children:i.jsx(zr,{size:18})})]})})]},ve.id))})]})}),u&&i.jsx("div",{className:"dmp-modal-overlay",children:i.jsxs("div",{className:"dmp-modal",children:[i.jsx("button",{onClick:et,className:"dmp-modal-close",children:""}),i.jsx("h3",{className:"dmp-modal-title",children:"Add New Distributor"}),s&&i.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),i.jsxs("form",{onSubmit:W,children:[i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"name",children:"Name:"}),i.jsx("input",{type:"text",id:"name",className:"dmp-input",value:$,onChange:ve=>z(ve.target.value),required:!0})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"contact_person",children:"Contact Person:"}),i.jsx("input",{type:"text",id:"contact_person",className:"dmp-input",value:L,onChange:ve=>H(ve.target.value)})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"phone",children:"Phone:"}),i.jsx("input",{type:"text",id:"phone",className:"dmp-input",value:V,onChange:ve=>ne(ve.target.value)})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"email",children:"Email:"}),i.jsx("input",{type:"email",id:"email",className:"dmp-input",value:Z,onChange:ve=>q(ve.target.value)})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"address",children:"Address:"}),i.jsx("textarea",{id:"address",className:"dmp-textarea",value:K,onChange:ve=>se(ve.target.value)})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"gst_number",children:"GST Number:"}),i.jsx("input",{type:"text",id:"gst_number",className:"dmp-input",value:G,onChange:ve=>B(ve.target.value)})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"drug_license_number",children:"Drug License Number:"}),i.jsx("input",{type:"text",id:"drug_license_number",className:"dmp-input",value:fe,onChange:ve=>me(ve.target.value)})]}),i.jsxs("div",{className:"dmp-modal-actions",children:[i.jsx("button",{type:"button",onClick:et,className:"dmp-button dmp-button-secondary",children:"Cancel"}),i.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Add Distributor"})]})]})]})}),p&&C&&i.jsx("div",{className:"dmp-modal-overlay",children:i.jsxs("div",{className:"dmp-modal",children:[i.jsx("button",{onClick:_e,className:"dmp-modal-close",children:""}),i.jsx("h3",{className:"dmp-modal-title",children:"Edit Distributor"}),s&&i.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),i.jsxs("form",{onSubmit:ie,children:[i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"edit-name",children:"Name:"}),i.jsx("input",{type:"text",id:"edit-name",className:"dmp-input",value:$,onChange:ve=>z(ve.target.value),required:!0})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"edit-contact_person",children:"Contact Person:"}),i.jsx("input",{type:"text",id:"edit-contact_person",className:"dmp-input",value:L,onChange:ve=>H(ve.target.value)})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"edit-phone",children:"Phone:"}),i.jsx("input",{type:"text",id:"edit-phone",className:"dmp-input",value:V,onChange:ve=>ne(ve.target.value)})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"edit-email",children:"Email:"}),i.jsx("input",{type:"email",id:"edit-email",className:"dmp-input",value:Z,onChange:ve=>q(ve.target.value)})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"edit-address",children:"Address:"}),i.jsx("textarea",{id:"edit-address",className:"dmp-textarea",value:K,onChange:ve=>se(ve.target.value)})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"edit-gst_number",children:"GST Number:"}),i.jsx("input",{type:"text",id:"edit-gst_number",className:"dmp-input",value:G,onChange:ve=>B(ve.target.value)})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"edit-drug_license_number",children:"Drug License Number:"}),i.jsx("input",{type:"text",id:"edit-drug_license_number",className:"dmp-input",value:fe,onChange:ve=>me(ve.target.value)})]}),i.jsxs("div",{className:"dmp-modal-actions",children:[i.jsx("button",{type:"button",onClick:_e,className:"dmp-button dmp-button-secondary",children:"Cancel"}),i.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Save Changes"})]})]})]})}),v&&C&&i.jsx("div",{className:"dmp-modal-overlay",children:i.jsxs("div",{className:"dmp-modal",children:[i.jsx("button",{onClick:Ye,className:"dmp-modal-close",children:""}),i.jsx("h3",{className:"dmp-modal-title",children:"Confirm Delete"}),i.jsxs("p",{children:['Are you sure you want to delete distributor "',C.name,'"?']}),s&&i.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),i.jsxs("div",{className:"dmp-modal-actions",children:[i.jsx("button",{type:"button",onClick:Ye,className:"dmp-button dmp-button-secondary",children:"Cancel"}),i.jsx("button",{type:"button",onClick:pe,className:"dmp-button dmp-button-primary",style:{backgroundColor:"var(--dmp-danger-color)"},children:"Delete"})]})]})}),b&&C&&i.jsx("div",{className:"dmp-modal-overlay",children:i.jsxs("div",{className:"dmp-modal",style:{maxWidth:"900px"},children:[i.jsx("button",{onClick:be,className:"dmp-modal-close",children:""}),i.jsxs("h3",{className:"dmp-modal-title",children:["Payments & Balance for ",C.name]}),s&&i.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),I&&i.jsxs("div",{className:"stats-container",style:{marginBottom:"2rem"},children:[i.jsxs("div",{className:"stat-card",children:[i.jsx("span",{className:"label",children:"Total Order Value"}),i.jsxs("span",{className:"value",children:["",I.totalOrderValue.toFixed(2)]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsx("span",{className:"label",children:"Total Amount Paid"}),i.jsxs("span",{className:"value",children:["",I.totalAmountPaid.toFixed(2)]})]}),i.jsxs("div",{className:`stat-card ${I.remainingBalance>0?"positive":"negative"}`,children:[i.jsx("span",{className:"label",children:"Remaining Balance"}),i.jsxs("span",{className:"value",children:["",I.remainingBalance.toFixed(2)]})]})]}),i.jsx("h4",{children:"Payment History"}),E.length===0?i.jsx("p",{children:"No payments recorded for this distributor."}):i.jsx("div",{className:"table-wrapper",children:i.jsxs("table",{className:"dmp-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Date"}),i.jsx("th",{children:"Order Value"}),i.jsx("th",{children:"Amount Paid"}),i.jsx("th",{children:"Balance Remaining"}),i.jsx("th",{children:"Payment Mode"}),i.jsx("th",{children:"Notes"})]})}),i.jsx("tbody",{children:E.map(ve=>i.jsxs("tr",{children:[i.jsx("td",{"data-label":"Date",children:new Date(ve.payment_date).toLocaleDateString()}),i.jsxs("td",{"data-label":"Order Value",children:["",ve.order_value.toFixed(2)]}),i.jsxs("td",{"data-label":"Amount Paid",children:["",ve.amount_paid.toFixed(2)]}),i.jsxs("td",{"data-label":"Balance Remaining",children:["",ve.balance_remaining.toFixed(2)]}),i.jsx("td",{"data-label":"Payment Mode",children:ve.payment_mode?ve.payment_mode.charAt(0).toUpperCase()+ve.payment_mode.slice(1):"-"}),i.jsx("td",{"data-label":"Notes",children:ve.notes||"-"})]},ve.id))})]})}),i.jsx("div",{className:"dmp-modal-actions",children:i.jsx("button",{type:"button",onClick:be,className:"dmp-button dmp-button-secondary",children:"Close"})})]})}),_&&C&&i.jsx("div",{className:"dmp-modal-overlay",children:i.jsxs("div",{className:"dmp-modal",style:{maxWidth:"420px"},children:[i.jsx("button",{onClick:we,className:"dmp-modal-close",children:""}),i.jsx("h3",{className:"dmp-modal-title",children:"Add Payment"}),s&&i.jsx("div",{className:"error-indicator",style:{marginBottom:"1rem"},children:s}),i.jsxs("form",{onSubmit:je,children:[i.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"payment_date",children:"Date:"}),i.jsx("input",{type:"date",id:"payment_date",className:"dmp-input",value:Y,onChange:ve=>xe(ve.target.value),required:!0})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"payment_mode",children:"Mode:"}),i.jsxs("select",{id:"payment_mode",className:"dmp-select",value:re,onChange:ve=>ae(ve.target.value),children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),i.jsx("option",{value:"online",children:"Online"}),i.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),i.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"order_value",children:"Order Value:"}),i.jsx("input",{type:"number",id:"order_value",className:"dmp-input",value:Ie,onChange:ve=>Ne(ve.target.value),step:"0.01"})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"amount_paid",children:"Amount Paid:"}),i.jsx("input",{type:"number",id:"amount_paid",className:"dmp-input",value:ke,onChange:ve=>de(ve.target.value),step:"0.01"})]})]}),i.jsxs("div",{className:"dmp-form-group",children:[i.jsx("label",{className:"dmp-label",htmlFor:"payment_notes",children:"Notes:"}),i.jsx("textarea",{id:"payment_notes",className:"dmp-textarea",value:Q,onChange:ve=>oe(ve.target.value),rows:2,style:{resize:"none"}})]}),i.jsxs("div",{className:"dmp-modal-actions",children:[i.jsx("button",{type:"button",onClick:we,className:"dmp-button dmp-button-secondary",children:"Cancel"}),i.jsx("button",{type:"submit",className:"dmp-button dmp-button-primary",children:"Add Payment"})]})]})]})})]})},lw=e=>{if(!e)return"";let t=e.toLowerCase();return t=t.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),t=t.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),t=t.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),t},U3e=(e,t)=>{if(!e||!t||t.length===0)return;const n=lw(e);let r=t.find(o=>lw(o.name)===n);if(r)return r;let a=t.find(o=>lw(o.name).includes(n));if(a)return a;let s=t.find(o=>n.includes(lw(o.name)));if(s)return s},V3e=({isOpen:e,onClose:t,excelHeaders:n,onConfirm:r,availableFields:a})=>{const[s,o]=j.useState({});if(j.useEffect(()=>{e&&c()},[e,n,a]),!e)return null;const l=(f,p)=>{o(y=>({...y,[f]:p}))},c=()=>{const f={};n.forEach(p=>{const y=a.map(x=>({name:x})),v=U3e(p,y);v&&(f[p]=v.name)}),o(f)},u=()=>{const f={};for(const p in s)s[p]&&s[p]!=="none"&&(f[p]=s[p]);r(f),t()};return i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("button",{onClick:t,className:"modal-close-button",children:i.jsx(zt,{size:20})}),i.jsx("h3",{className:"modal-title",children:"Match File Columns"}),i.jsx("p",{className:"modal-description",children:'Please match the columns from your uploaded file to the corresponding fields in the drug inventory. You can use the "Auto Match" button for suggestions.'}),i.jsx("div",{className:"modal-actions-top",children:i.jsx("button",{type:"button",onClick:c,className:"button-auto-match",children:"Auto Match"})}),i.jsxs("div",{className:"column-mapping-grid",children:[i.jsx("div",{className:"grid-header",children:"Excel Column"}),i.jsx("div",{className:"grid-header",children:"App Field"}),n.map((f,p)=>i.jsxs(ye.Fragment,{children:[i.jsx("div",{className:"excel-header-cell",children:f}),i.jsx("div",{className:"app-field-cell",children:i.jsxs("select",{value:s[f]||"",onChange:y=>l(f,y.target.value),className:"app-field-select",children:[i.jsx("option",{value:"",children:"-- Select Field --"}),i.jsx("option",{value:"none",children:"None (Ignore Column)"}),a.map((y,v)=>i.jsxs("option",{value:y,children:[y==="name"?"Composition Name":y==="brand_name"?"Brand Name":y==="price"?"MRP":y==="buying_price"?"Rate":y==="unit"?"Pack":y==="batch"?"Batch":y==="hsn_code"?"HSN Code":y==="mfg"?"MFG":y==="loose_quantity"?"Loose":y.replace(/_/g," ").replace(/\b\w/g,x=>x.toUpperCase())," "]},v))]})})]},p))]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{type:"button",onClick:t,className:"button-cancel",children:"Cancel"}),i.jsx("button",{type:"button",onClick:u,className:"button-submit",children:"Confirm Mapping"})]})]})})},H3e=({entityType:e,config:t,values:n,onChange:r,className:a=""})=>{const o=(t[e]||[]).filter(c=>c.type!=="computed");if(o.length===0)return null;const l=c=>{const u=n[c.key]??"";switch(c.type){case"number":return i.jsx("input",{type:"number",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:f=>r(c.key,f.target.value===""?null:parseFloat(f.target.value)),className:"custom-text-input mt-1",placeholder:c.label,required:c.required});case"date":return i.jsx("input",{type:"date",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:f=>r(c.key,f.target.value||null),className:"custom-text-input mt-1",required:c.required});case"boolean":return i.jsx("input",{type:"checkbox",id:`custom_${c.key}`,name:`custom_${c.key}`,checked:!!u,onChange:f=>r(c.key,f.target.checked),className:"custom-checkbox mt-1"});case"text":default:return i.jsx("input",{type:"text",id:`custom_${c.key}`,name:`custom_${c.key}`,value:u,onChange:f=>r(c.key,f.target.value||null),className:"custom-text-input mt-1",placeholder:c.label,required:c.required})}};return i.jsxs("div",{className:`custom-fields-section ${a}`,children:[i.jsx("h4",{className:"custom-fields-title",children:"Custom Fields"}),i.jsx("div",{className:"custom-fields-grid",children:o.map(c=>i.jsxs("div",{className:"custom-field-item",children:[i.jsxs("label",{htmlFor:`custom_${c.key}`,className:"form-label",children:[c.label,c.required&&i.jsx("span",{className:"required-star",children:"*"})]}),l(c)]},c.key))})]})},G3e=({isOpen:e,onClose:t,onDrugAddedToPurchase:n,customColumnsConfig:r={}})=>{const[a,s]=j.useState({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),[o,l]=j.useState(null),[c,u]=j.useState(!1),[f,p]=j.useState(!1),y=j.useRef(null),v=j.useRef(null),x=j.useRef(null);j.useEffect(()=>{e&&(s({name:"",composition:"",description:"",mrp:0,stock:0,pack:"",expiry_date:"",rate:null,box_number:"",gst:5,margin:null,discount:null,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:null,custom_fields:{}}),l(null),u(!1),p(!1))},[e]),j.useEffect(()=>{const T=O=>{O.key==="Tab"&&v.current===document.activeElement&&(f||(p(!0),setTimeout(()=>{var E;(E=x.current)==null||E.focus()},0),O.preventDefault()))},C=O=>{y.current&&!y.current.contains(O.target)&&p(!1)};return document.addEventListener("keydown",T),document.addEventListener("mousedown",C),()=>{document.removeEventListener("keydown",T),document.removeEventListener("mousedown",C)}},[f]);const b=T=>{const{name:C,value:O,type:E}=T.target;s(P=>({...P,[C]:E==="number"?parseFloat(O)||null:O}))},w=(T,C)=>{s(O=>({...O,custom_fields:{...O.custom_fields,[T]:C}}))},_=T=>{if(T.preventDefault(),l(null),u(!0),a.mrp===void 0||a.stock===void 0){l("MRP and Stock Quantity are required."),u(!1);return}const C={...a,name:a.name===""?null:a.name,composition:a.composition===""?null:a.composition,rate:a.rate===0?null:a.rate,expiry_date:a.expiry_date===""?null:a.expiry_date,gst:a.gst===0?null:a.gst,margin:a.margin===0?null:a.margin,discount:a.discount===0?null:a.discount,brand_name:a.brand_name===""?null:a.brand_name,batch:a.batch===""?null:a.batch,hsn_code:a.hsn_code===""?null:a.hsn_code,mfg:a.mfg===""?null:a.mfg,loose:a.loose===0?null:a.loose,custom_fields:a.custom_fields||{}};n(C),u(!1),t()};return e?i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content add-drug-form-container max-w-2xl mx-auto",children:[i.jsxs("div",{className:"add-drug-form-header",children:[i.jsx("h2",{children:"Add New Drug"}),i.jsx("button",{onClick:t,className:"cancel-button",title:"Close",children:i.jsx(zt,{size:24})})]}),o&&i.jsx("div",{className:"error-message",children:o}),i.jsxs("form",{onSubmit:_,className:"add-drug-form",children:[i.jsxs("div",{className:"form-grid",children:[i.jsxs("div",{className:"sm-col-span-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"name",className:"form-label",children:"Composition Name"}),i.jsxs("div",{className:"relative ml-2 group",children:[i.jsx(Nl,{size:16,className:"text-gray-400"}),i.jsx("div",{className:"tooltip",children:"Enter the drug's composition. This field is optional."})]})]}),i.jsx("input",{type:"text",name:"name",id:"name",value:a.name||"",onChange:b,className:"custom-text-input mt-1",placeholder:"e.g., Paracetamol",tabIndex:1})]}),i.jsxs("div",{className:"sm-col-span-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"brand_name",className:"form-label",children:"Brand Name"}),i.jsxs("div",{className:"relative ml-2 group",children:[i.jsx(Nl,{size:16,className:"text-gray-400"}),i.jsx("div",{className:"tooltip",children:"Enter the drug's brand name. This field is optional."})]})]}),i.jsx("input",{type:"text",name:"brand_name",id:"brand_name",value:a.brand_name||"",onChange:b,className:"custom-text-input mt-1",placeholder:"e.g., Calpol",tabIndex:2})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"mrp",className:"form-label",children:"MRP () *"}),i.jsxs("div",{className:"relative ml-2 group",children:[i.jsx(Nl,{size:16,className:"text-gray-400"}),i.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),i.jsx("input",{type:"number",name:"mrp",id:"mrp",required:!0,step:"0.01",min:"0",value:a.mrp||"",onChange:b,className:"custom-text-input mt-1",placeholder:"e.g., 500",tabIndex:3})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("label",{htmlFor:"stock",className:"form-label",children:"Stock Quantity *"}),i.jsxs("div",{className:"relative ml-2 group",children:[i.jsx(Nl,{size:16,className:"text-gray-400"}),i.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),i.jsx("input",{type:"number",name:"stock",id:"stock",required:!0,step:"1",min:"0",value:a.stock||"",onChange:b,className:"custom-text-input mt-1",placeholder:"e.g., 5",tabIndex:4})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"pack",className:"form-label",children:"Pack (e.g., strip, bottle)"}),i.jsx("input",{type:"text",name:"pack",id:"pack",value:a.pack||"",onChange:b,className:"custom-text-input mt-1",placeholder:"e.g., strip, bottle",tabIndex:5})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),i.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:a.expiry_date||"",onChange:b,className:"custom-text-input mt-1",tabIndex:6})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),i.jsx("input",{type:"text",name:"box_number",id:"box_number",value:a.box_number||"",onChange:b,className:"custom-text-input mt-1",tabIndex:7})]}),i.jsxs("div",{className:"relative sm-col-span-2",ref:y,children:[i.jsx("button",{type:"button",onClick:()=>p(!f),className:"form-button w-full text-left",tabIndex:8,ref:v,children:"Others"}),f&&i.jsxs("div",{className:"others-fields-grid",children:[" ",i.jsxs("div",{className:"sm-col-span-2",children:[i.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),i.jsx("textarea",{name:"description",id:"description",rows:3,value:a.description||"",onChange:b,className:"custom-text-input mt-1",tabIndex:9})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"rate",className:"form-label",children:"Rate ()"}),i.jsx("input",{type:"number",name:"rate",id:"rate",step:"0.01",min:"0",value:a.rate??"",onChange:b,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:10,ref:x})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"gst",className:"form-label",children:"GST (%)"}),i.jsx("input",{type:"number",name:"gst",id:"gst",step:"0.01",min:"0",max:"100",value:a.gst??"",onChange:b,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:11})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"margin",className:"form-label",children:"Margin (%)"}),i.jsx("input",{type:"number",name:"margin",id:"margin",step:"0.01",min:"0",max:"100",value:a.margin??"",onChange:b,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:12})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"discount",className:"form-label",children:"Discount (%)"}),i.jsx("input",{type:"number",name:"discount",id:"discount",step:"0.01",min:"0",max:"100",value:a.discount??"",onChange:b,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:13})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"batch",className:"form-label",children:"Batch"}),i.jsx("input",{type:"text",name:"batch",id:"batch",value:a.batch||"",onChange:b,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:14})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"hsn_code",className:"form-label",children:"HSN Code"}),i.jsx("input",{type:"text",name:"hsn_code",id:"hsn_code",value:a.hsn_code||"",onChange:b,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:15})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"mfg",className:"form-label",children:"MFG"}),i.jsx("input",{type:"text",name:"mfg",id:"mfg",value:a.mfg||"",onChange:b,className:"custom-text-input mt-1",placeholder:"Optional",tabIndex:16})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"loose",className:"form-label",children:"Loose Quantity"}),i.jsx("input",{type:"number",name:"loose",id:"loose",step:"1",min:"0",value:a.loose??"",onChange:b,placeholder:"Optional",className:"custom-text-input mt-1",tabIndex:17})]})]})]})]}),i.jsx(H3e,{entityType:"drugs",config:r,values:a.custom_fields||{},onChange:w}),i.jsxs("div",{className:"form-actions",children:[i.jsx("button",{type:"button",onClick:t,disabled:c,className:"form-button cancel-form-button",tabIndex:18,children:"Cancel"}),i.jsx("button",{type:"submit",disabled:c,className:"form-button submit-form-button inline-flex justify-center",tabIndex:19,children:c?"Adding...":"Add Drug"})]})]})]})}):null},W3e=({purchaseRows:e,onCellChange:t,onRemoveDrug:n,onAddEmptyRow:r})=>{const a=j.useRef(new Map),s=["name","mrp","stock","pack","expiry_date","rate","brand_name","box_number","gst","discount","batch","hsn_code","mfg","loose"],o=(l,c,u)=>{if(l.key==="Tab"){l.preventDefault();const f=s.indexOf(u);if(f!==-1){const p=(f+1)%s.length,y=s[p],v=a.current.get(`${c}-${y}`);v==null||v.focus()}}};return e.length===0?i.jsxs("div",{className:"no-drugs-message",children:[i.jsx("p",{children:"No drugs added to the purchase list yet."}),i.jsxs("button",{onClick:r,className:"action-button add-drug-to-table-button",children:[i.jsx(ws,{size:18,className:"button-icon"}),"Add the first drug"]})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"purchase-drugs-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Composition Name"}),i.jsx("th",{children:"MRP ()"}),i.jsx("th",{children:"Qty"}),i.jsx("th",{children:"Pack"}),i.jsx("th",{children:"Supplier"}),i.jsx("th",{children:"Expiry Date"}),i.jsx("th",{children:"Rate ()"}),i.jsx("th",{children:"Brand Name"}),i.jsx("th",{children:"Box Number"}),i.jsx("th",{children:"GST (%)"}),i.jsx("th",{children:"Discount (%)"}),i.jsx("th",{children:"Margin (%)"}),i.jsx("th",{children:"Batch"}),i.jsx("th",{children:"HSN Code"}),i.jsx("th",{children:"MFG"}),i.jsx("th",{children:"Loose"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:e.map((l,c)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx("input",{type:"text",value:l.name||"",onChange:u=>t(u,l.id,"name"),onKeyDown:u=>o(u,l.id,"name"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-name`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"number",value:l.mrp||"",onChange:u=>t(u,l.id,"mrp"),onKeyDown:u=>o(u,l.id,"mrp"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-mrp`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"number",value:l.stock||"",onChange:u=>t(u,l.id,"stock"),onKeyDown:u=>o(u,l.id,"stock"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-stock`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"text",value:l.pack||"",onChange:u=>t(u,l.id,"pack"),onKeyDown:u=>o(u,l.id,"pack"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-pack`,u)}})}),i.jsx("td",{children:l.supplier||"N/A"}),i.jsx("td",{children:i.jsx("input",{type:"date",value:l.expiry_date||"",onChange:u=>t(u,l.id,"expiry_date"),onKeyDown:u=>o(u,l.id,"expiry_date"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-expiry_date`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"number",value:l.rate||"",onChange:u=>t(u,l.id,"rate"),onKeyDown:u=>o(u,l.id,"rate"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-rate`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"text",value:l.brand_name||"",onChange:u=>t(u,l.id,"brand_name"),onKeyDown:u=>o(u,l.id,"brand_name"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-brand_name`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"text",value:l.box_number||"",onChange:u=>t(u,l.id,"box_number"),onKeyDown:u=>o(u,l.id,"box_number"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-box_number`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"number",value:l.gst||"",onChange:u=>t(u,l.id,"gst"),onKeyDown:u=>o(u,l.id,"gst"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-gst`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"number",value:l.discount||"",onChange:u=>t(u,l.id,"discount"),onKeyDown:u=>o(u,l.id,"discount"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-discount`,u)}})}),i.jsx("td",{children:(()=>{const u=l.mrp||0,f=l.rate||0,p=l.gst!==null&&l.gst!==void 0?l.gst/100*f:0,y=l.discount!==null&&l.discount!==void 0?l.discount/100*u:0,v=u-(f+p)-y;return`${(u>0?v/u*100:0).toFixed(2)}%`})()}),i.jsx("td",{children:i.jsx("input",{type:"text",value:l.batch||"",onChange:u=>t(u,l.id,"batch"),onKeyDown:u=>o(u,l.id,"batch"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-batch`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"text",value:l.hsn_code||"",onChange:u=>t(u,l.id,"hsn_code"),onKeyDown:u=>o(u,l.id,"hsn_code"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-hsn_code`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"text",value:l.mfg||"",onChange:u=>t(u,l.id,"mfg"),onKeyDown:u=>o(u,l.id,"mfg"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-mfg`,u)}})}),i.jsx("td",{children:i.jsx("input",{type:"number",value:l.loose||"",onChange:u=>t(u,l.id,"loose"),onKeyDown:u=>o(u,l.id,"loose"),className:"editable-cell-input",ref:u=>{l.id&&a.current.set(`${l.id}-loose`,u)}})}),i.jsx("td",{children:i.jsx("button",{onClick:()=>n(l.id),className:"delete-button",title:"Remove Item",children:i.jsx(zr,{size:16})})})]},l.id||c))})]})})},K3e="_container_7ak2k_7",Y3e="_header_7ak2k_207",Q3e="_backButton_7ak2k_221",X3e="_title_7ak2k_265",J3e="_stickyActionBar_7ak2k_287",Z3e="_actionRow_7ak2k_317",eLe="_inputWrapper_7ak2k_335",tLe="_inputIcon_7ak2k_345",nLe="_input_7ak2k_335",rLe="_quickDistributors_7ak2k_401",iLe="_distributorChip_7ak2k_417",aLe="_distributorChipIcon_7ak2k_463",sLe="_selectedInfo_7ak2k_473",oLe="_resultsDropdown_7ak2k_503",lLe="_resultItem_7ak2k_537",cLe="_buttonGroup_7ak2k_565",uLe="_button_7ak2k_565",dLe="_buttonPrimary_7ak2k_609",hLe="_buttonSecondary_7ak2k_631",fLe="_buttonAccent_7ak2k_653",pLe="_buttonDisabled_7ak2k_675",mLe="_tableSection_7ak2k_691",gLe="_cardTitle_7ak2k_707",yLe="_cardIcon_7ak2k_727",vLe="_footer_7ak2k_947",xLe="_totalValue_7ak2k_981",bLe="_footerControls_7ak2k_1005",jLe="_paidInputGroup_7ak2k_1017",wLe="_paidLabel_7ak2k_1029",SLe="_paidInput_7ak2k_1017",NLe="_errorMsg_7ak2k_1075",hn={container:K3e,header:Y3e,backButton:Q3e,title:X3e,stickyActionBar:J3e,actionRow:Z3e,inputWrapper:eLe,inputIcon:tLe,input:nLe,quickDistributors:rLe,distributorChip:iLe,distributorChipIcon:aLe,selectedInfo:sLe,resultsDropdown:oLe,resultItem:lLe,buttonGroup:cLe,button:uLe,buttonPrimary:dLe,buttonSecondary:hLe,buttonAccent:fLe,buttonDisabled:pLe,tableSection:mLe,cardTitle:gLe,cardIcon:yLe,footer:vLe,totalValue:xLe,footerControls:bLe,paidInputGroup:jLe,paidLabel:wLe,paidInput:SLe,errorMsg:NLe},Az=()=>{const e=Mt(),{purchaseRows:t,setPurchaseRows:n,selectedDistributor:r,setSelectedDistributor:a,searchTerm:s,setSearchTerm:o,amountPaidToDistributor:l,setAmountPaidToDistributor:c,distributors:u,setDistributors:f}=wq(),[p,y]=j.useState(!1),[v,x]=j.useState(!0),b=j.useRef(null),w=j.useRef(null),[_,T]=j.useState(!1),C=j.useRef(null),[O,E]=j.useState(!1),[P,I]=j.useState([]),[F,$]=j.useState(null),[z,L]=j.useState(null),[H,V]=j.useState(!1),[ne,Z]=j.useState([]),q=["name","description","mrp","stock","pack","supplier","expiry_date","rate","box_number","gst","margin","discount","brand_name","batch","hsn_code","mfg","loose"];j.useEffect(()=>{(async()=>{x(!0);try{const pe=await ce("/api/distributors?limit=4");if(pe.ok){const le=await pe.json();Z(Array.isArray(le)?le.slice(0,4):[])}}catch(pe){console.error("Failed to fetch initial distributors",pe)}finally{x(!1)}})()},[]);const K=()=>{const pe={id:Date.now().toString()+Math.random().toString(36).substring(2,9),name:"",composition:"",description:"",mrp:0,stock:0,pack:"",supplier:r?r.name:"",expiry_date:"",rate:0,box_number:"",gst:0,margin:0,discount:0,brand_name:"",batch:"",hsn_code:"",mfg:"",loose:0,last_updated:"",created_at:""};n(le=>[...le,pe])},se=async(ie,pe)=>{if(!ie){L("No file provided for import.");return}if(!r){L("Please select a distributor before importing.");return}y(!0),L(null);const le=new FormData;le.append("inventoryFile",ie),le.append("columnMapping",JSON.stringify(pe));try{const je=await ce("/api/drugs/parse-excel",{method:"POST",body:le});if(!je.ok){const et=await je.json();throw new Error(et.message||`Failed to parse Excel file: ${je.statusText}`)}const Ge=await je.json();n(et=>[...et,...Ge.map(ht=>({...ht,id:Date.now().toString()+Math.random().toString(36).substring(2,9),supplier:r?r.name:ht.supplier}))])}catch(je){console.error("Failed to parse Excel file:",je),L(je.message||"Failed to parse Excel file. Please check the file format and try again.")}finally{b.current&&(b.current.value=""),y(!1),$(null)}},G=async ie=>{if(ie.target.files&&ie.target.files[0]){const pe=ie.target.files[0];$(pe),L(null),y(!0);const le=new FormData;le.append("inventoryFile",pe);try{const je=await ce("/api/drugs/get-file-headers",{method:"POST",body:le});if(!je.ok){const et=await je.json();throw new Error(et.message||`Failed to get file headers: ${je.statusText}`)}const{headers:Ge}=await je.json();I(Ge),E(!0)}catch(je){console.error("Failed to get file headers:",je),L(je.message||"Failed to read file headers. Please check the file format and try again."),$(null)}finally{y(!1)}}else $(null)},B=ie=>{F?se(F,ie):L("No file selected for import after mapping."),E(!1)},fe=()=>{E(!1),I([]),$(null),b.current&&(b.current.value="")},me=()=>{var ie;(ie=b.current)==null||ie.click()},Y=async ie=>{if(ie.target.files&&ie.target.files[0]){const pe=ie.target.files[0];L(null),y(!0);const le=new FormData;le.append("file",pe),le.append("output_type","csv");const Ge={Authorization:"Bearer 00841ac4-b279-11f0-ab55-0a3a41e3fad1"};try{const et=await fetch("https://extraction-api.nanonets.com/extract",{method:"POST",headers:Ge,body:le});if(!et.ok){const we=await et.json();throw new Error(we.message||`Failed to extract data from image/PDF: ${et.statusText}`)}const ht=await et.json();if(!ht.success||!ht.content)throw new Error(ht.detail||"Nanonets API did not return expected content.");let _e=ht.content;_e=_e.split(`
`).filter(we=>!we.startsWith("#")&&we.trim()!=="").join(`
`);const Ye=new File([_e],"extracted_data.csv",{type:"text/csv"}),Ke=new FormData;Ke.append("inventoryFile",Ye);const be=await ce("/api/drugs/get-file-headers",{method:"POST",body:Ke});if(!be.ok){const we=await be.json();throw new Error(we.message||`Failed to get headers from extracted CSV: ${be.statusText}`)}const{headers:De}=await be.json();I(De),$(Ye),E(!0)}catch(et){console.error("Failed to extract data from image/PDF:",et),L(et.message||"Failed to extract data from image/PDF. Please check the file and try again.")}finally{w.current&&(w.current.value=""),y(!1)}}},xe=()=>{var ie;(ie=w.current)==null||ie.click()},Ie=()=>{if(!r){L("Please select a distributor before adding a drug manually.");return}V(!0)},Ne=()=>{V(!1),L(null)},ke=ie=>{n(pe=>[...pe,{...ie,id:Date.now().toString(),supplier:r?r.name:ie.supplier}]),Ne()},de=ie=>{n(pe=>pe.filter(le=>le.id!==ie))},Q=(ie,pe,le)=>{const{value:je}=ie.target;n(Ge=>Ge.map(et=>{if(et.id===pe){let ht=je;le==="expiry_date"?ht=je.trim()===""?null:je:["mrp","stock","rate","gst","margin","discount","loose"].includes(le)&&(ht=parseFloat(je),isNaN(ht)&&(ht=null));const _e={...et,[le]:ht};return le==="name"&&r&&!_e.supplier&&(_e.supplier=r.name),_e}return et}))},oe=j.useCallback(()=>t.reduce((ie,pe)=>{const le=pe.stock||0,je=pe.rate||0,Ge=pe.gst||0,et=pe.discount||0;let ht=je*(1-et/100),_e=le*ht;return _e+=_e*(Ge/100),ie+_e},0),[t]),re=async()=>{if(!r){L("Please select a distributor before submitting the purchase.");return}const ie=t.filter(pe=>Object.values(pe).some(le=>typeof le=="string"&&le.trim()!==""||typeof le=="number"&&le!==0||le!=null&&typeof le!="string"&&typeof le!="number"));if(ie.length===0){L("No valid drugs to submit. Please fill in at least one field for a row, or remove empty rows."),y(!1);return}y(!0),L(null);try{for(const Ge of ie){const et={...Ge,expiry_date:Ge.expiry_date===""?null:Ge.expiry_date,distributorId:r.id},ht=await ce("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(et)});if(!ht.ok){const _e=await ht.json();throw new Error(_e.message||`Failed to add drug ${Ge.name}: ${ht.statusText}`)}}const pe=oe(),le=new Date().toISOString().split("T")[0],je=await ce(`/api/distributors/${r.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_date:le,order_value:pe,amount_paid:l,notes:"Payment from purchase page."})});if(!je.ok){const Ge=await je.json();throw new Error(Ge.message||`Failed to record distributor payment: ${je.statusText}`)}n([]),a(null),o(""),c(0),e("/dashboard/inventory")}catch(pe){console.error("Failed to submit purchase:",pe),L(pe.message||"Failed to submit purchase. Please try again.")}finally{y(!1)}},ae=j.useCallback(async ie=>{if(ie.trim()===""){f([]);return}try{const pe=await ce(`/api/distributors?search=${encodeURIComponent(ie)}`);if(!pe.ok)throw new Error(`Failed to fetch distributors: ${pe.statusText}`);const le=await pe.json();f(le)}catch(pe){console.error("Failed to fetch distributors:",pe),L(pe.message||"Failed to load distributors.")}},[]),X=ie=>{const pe=ie.target.value;o(pe),a(null),C.current&&clearTimeout(C.current),pe.trim()!==""?C.current=setTimeout(()=>{ae(pe),T(!0)},300):(f([]),T(!1))},W=ie=>{a(ie),o(ie.name),T(!1),f([])};return j.useEffect(()=>{const ie=pe=>{pe.target instanceof HTMLElement&&!pe.target.closest(`.${hn.inputWrapper}`)&&T(!1)};return document.addEventListener("mousedown",ie),()=>{document.removeEventListener("mousedown",ie),C.current&&clearTimeout(C.current)}},[]),i.jsxs("div",{className:hn.container,children:[i.jsxs("div",{className:hn.header,children:[i.jsx("button",{onClick:()=>e(-1),className:hn.backButton,title:"Go Back",children:i.jsx(rn,{size:24})}),i.jsx("h2",{className:hn.title,children:"Purchase Inventory"})]}),z&&i.jsxs("div",{className:hn.errorMsg,children:[i.jsx(Wr,{size:20}),z]}),i.jsx("div",{className:hn.stickyActionBar,children:i.jsxs("div",{className:hn.actionRow,children:[i.jsxs("div",{style:{flex:1,minWidth:"300px",position:"relative"},children:[i.jsxs("div",{className:hn.inputWrapper,children:[i.jsx(Un,{className:hn.inputIcon,size:20}),i.jsx("input",{type:"text",placeholder:"Search distributor...",value:s,onChange:X,onFocus:()=>s.trim()!==""&&T(!0),className:hn.input}),_&&u.length>0&&i.jsx("ul",{className:hn.resultsDropdown,children:u.map(ie=>i.jsx("li",{onClick:()=>W(ie),className:hn.resultItem,children:ie.name},ie.id))})]}),v?i.jsx("div",{className:hn.quickDistributors,children:[1,2,3,4].map(ie=>i.jsx(ee,{width:100,height:32,style:{borderRadius:"16px"}},ie))}):ne.length>0&&!r&&i.jsx("div",{className:hn.quickDistributors,children:ne.map(ie=>i.jsxs("button",{className:hn.distributorChip,onClick:()=>W(ie),children:[i.jsx(mr,{className:hn.distributorChipIcon}),ie.name]},ie.id))}),r&&i.jsxs("div",{className:hn.selectedInfo,style:{marginTop:"0.5rem",marginBottom:0},children:[i.jsx(Dl,{size:18}),i.jsxs("span",{children:["Selected: ",i.jsx("strong",{children:r.name})]})]})]}),i.jsxs("div",{className:hn.buttonGroup,children:[i.jsx("input",{ref:b,type:"file",className:"sr-only",style:{display:"none"},accept:".xlsx, .xls, .csv",onChange:G}),i.jsx("input",{ref:w,type:"file",className:"sr-only",style:{display:"none"},accept:".pdf, .png, .jpg, .jpeg",onChange:Y}),i.jsxs("button",{onClick:me,disabled:p||!r,className:`${hn.button} ${hn.buttonPrimary} ${p||!r?hn.buttonDisabled:""}`,title:r?"":"Select a distributor to import",children:[i.jsx(Qk,{size:18}),p?"Processing...":"Import Excel/CSV"]}),i.jsxs("button",{onClick:xe,disabled:p||!r,className:`${hn.button} ${hn.buttonSecondary} ${p||!r?hn.buttonDisabled:""}`,title:r?"":"Select a distributor",children:[i.jsx(aa,{size:18}),"Scan Image/PDF"]}),i.jsxs("button",{onClick:Ie,disabled:!r,className:`${hn.button} ${hn.buttonAccent} ${r?"":hn.buttonDisabled}`,title:r?"":"Select a distributor",children:[i.jsx(ws,{size:18}),"Add Manually"]})]})]})}),i.jsx(V3e,{isOpen:O,onClose:fe,excelHeaders:P,onConfirm:B,availableFields:q}),H&&i.jsx(G3e,{isOpen:H,onClose:Ne,onDrugAddedToPurchase:ke}),i.jsxs("div",{className:hn.tableSection,children:[i.jsxs("div",{className:hn.cardTitle,children:[i.jsx(Bb,{className:hn.cardIcon,size:24}),"Purchase Items (",t.length,")"]}),i.jsx(W3e,{purchaseRows:t,onCellChange:Q,onRemoveDrug:de,onAddEmptyRow:K})]}),i.jsxs("div",{className:hn.footer,children:[i.jsxs("button",{onClick:K,className:`${hn.button} ${hn.buttonSecondary}`,children:[i.jsx(ws,{size:18}),"Add New Row"]}),i.jsxs("div",{className:hn.footerControls,children:[i.jsxs("div",{className:hn.paidInputGroup,children:[i.jsx("label",{htmlFor:"amount-paid",className:hn.paidLabel,children:"Amount Paid:"}),i.jsx("input",{type:"number",id:"amount-paid",value:l,onChange:ie=>c(parseFloat(ie.target.value)||0),placeholder:"0.00",className:hn.paidInput,step:"0.01",disabled:!r})]}),i.jsxs("div",{className:hn.totalValue,children:["Total: ",i.jsxs("span",{children:["",oe().toFixed(2)]})]}),i.jsx("button",{onClick:re,disabled:p||t.length===0||!r,className:`${hn.button} ${hn.buttonPrimary} ${hn.submitButton} ${p||!r||t.length===0?hn.buttonDisabled:""}`,style:{padding:"0.8rem 1.5rem",fontSize:"1rem"},children:p?"Submitting...":"Complete Purchase"})]})]})]})},_Le=e=>{if(!e)return 1;const t=e.match(/(?:\d+x)?(\d+)/);return t&&t[1]?parseInt(t[1],10):1},CLe=()=>{const e=Mt(),t=$r(),[n,r]=j.useState(null),[a,s]=j.useState([]),[o,l]=j.useState(!0),[c,u]=j.useState(null),[f,p]=j.useState(!1),[y,v]=j.useState("cash"),[x,b]=j.useState(""),[w,_]=j.useState(""),[T,C]=j.useState(""),[O,E]=j.useState(""),[P,I]=j.useState(""),[F,$]=j.useState(0),z=j.useRef(!1),[L,H]=j.useState(null),[V,ne]=j.useState(!1),Z=xe=>{const Ie=Math.max(0,Math.min(100,isNaN(xe)?0:xe));z.current=!0,$(Ie);const Ne=a.map(ke=>({...ke,discount_percentage:Ie}));s(Ne)},q=(xe,Ie)=>{const Ne=[...a];Ne[xe].discount_percentage=isNaN(Ie)?0:Ie,s(Ne)};j.useEffect(()=>{if(z.current){z.current=!1;return}const xe=a.reduce((ke,de)=>ke+(de.total_price??0),0);if(xe===0){$(0);return}const Ne=a.reduce((ke,de)=>{const oe=(de.total_price??0)*((de.discount_percentage??0)/100);return ke+oe},0)/xe*100;$(ke=>Math.abs(ke-Ne)>.01?Ne:ke)},[a]);const K=async()=>{if(!n)return u("No order data available to bill."),null;if(a.length===0)return u("Cannot bill an empty order."),null;p(!0),u(null);try{const xe=a.map(Q=>{const oe=(Q.pricePerLooseUnit??0)*(Q.looseQuantity??0),re=oe*((Q.discount_percentage??0)/100),ae=oe-re;return{name:Q.name,pack_quantity:Q.loosePacks??0,loose_quantity:Q.looseUnits??0,price:Q.originalPrice??0,pack_price:Q.originalPrice??0,loose_price:Q.pricePerLooseUnit??0,total:ae,drug_id:Q.drug_id,discount_percentage:Q.discount_percentage??0,batch:Q.batch,expiry_date:Q.expiry_date}}),Ie={patientId:n.patientId,queueId:n.id,items:xe,amount:Y,paymentMode:y,type:"pharmacy",related_id:n.id,status:"paid",discountPercentage:F},Ne=await ce("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ie)}),ke=await Ne.json();if(!Ne.ok||!ke.id)throw new Error(ke.message||"Failed to create bill.");const de=await ce(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:ke.id,medications:a})});if(!de.ok){const Q=await de.text();throw new Error(`Failed to update pharmacy order status: ${de.statusText} - ${Q}`)}if(r(Q=>Q?{...Q,status:"billed",bill_id:ke.id}:null),y==="credit")try{await ce(`/api/patient-debts/${n.patientId}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:Y,related_bill_id:ke.id,notes:`Pharmacy Bill #${ke.id}`})})}catch(Q){console.error("Failed to create debt entry:",Q)}return e(`/dashboard/pharmacy-billing/${n.id}`,{replace:!0,state:{order:{...n,status:"billed",bill_id:ke.id},initialItems:a}}),ke.id}catch(xe){return console.error("Billing process failed:",xe),u(xe.message||"Failed to mark order as billed. Please try again."),null}finally{p(!1)}},se=async()=>{if(n)try{const xe=await ce(`/api/pharmacy-orders/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"dispensed",medications:a})});if(!xe.ok){const Ie=await xe.text();console.error("Failed to dispense order:",Ie)}}catch(xe){console.error("Error dispensing order:",xe)}},G=()=>{window.print()},B=async()=>{await K()&&(window.print(),await se(),e(-1))};j.useEffect(()=>{const xe=t.pathname.split("/"),Ie=xe[xe.length-1];Ie?(async()=>{try{l(!0);const[ke,de,Q]=await Promise.all([ce(`/api/pharmacy-orders/${Ie}`),ce("/api/drugs").then(X=>X.ok?X.json():null).catch(()=>null),ce("/api/clinics/settings").then(X=>X.ok?X.json():null).catch(()=>null)]);if(!ke.ok)throw new Error("Failed to fetch pharmacy order details");const oe=await ke.json();r(oe);let re=[];de&&(re=de.drugs||de||[]),Q&&(_(Q.upi_id||""),C(Q.name||""),E(Q.address||""),I(Q.notes||""));const ae=oe.medications.map(X=>{const W=_Le(X.unit),ie=(X.pack_quantity??0)*W+(X.loose_quantity??0),pe=re.find(_e=>X.drug_id&&String(_e.id)===String(X.drug_id)||_e.name.toLowerCase()===X.name.toLowerCase()),le=X.batch||(pe==null?void 0:pe.batch)||(pe==null?void 0:pe.batch_number),je=X.expiry_date||(pe==null?void 0:pe.expiry_date),Ge=Number(X.pack_price)||Number(pe==null?void 0:pe.mrp)||0,et=Number(pe==null?void 0:pe.rate)||0;let ht=Number(X.loose_price)||0;return ht===0&&(Ge>0&&W>0?ht=Ge/W:et>0&&(ht=et)),{...X,isLoose:!0,loosePacks:X.pack_quantity??0,looseUnits:X.loose_quantity??0,looseQuantity:ie,pack_price:Ge,loose_price:ht,total_price:Number(X.total_price)||ht*ie,pricePerLooseUnit:ht,originalPrice:Ge,discount_percentage:Number(X.discount_percentage)??0,directions_to_use:X.directions_to_use,tabletsPerDay:X.tabletsPerDay,numberOfDays:X.numberOfDays,batch:le,expiry_date:je}});s(ae)}catch(ke){console.error("Failed to fetch data:",ke),u(ke.message||"Failed to load order details.")}finally{l(!1)}})():(u("No pharmacy order ID provided."),l(!1))},[t.pathname]);const fe=j.useMemo(()=>a.reduce((xe,Ie)=>xe+(Ie.total_price??0),0),[a]),me=j.useMemo(()=>a.reduce((xe,Ie)=>{const ke=(Ie.total_price??0)*(Ie.discount_percentage??0)/100;return xe+ke},0),[a]),Y=j.useMemo(()=>fe-me,[fe,me]);return j.useEffect(()=>{if(Y>0&&w){const xe=`upi://pay?pa=${w}&pn=ClinicName&am=${Y.toFixed(2)}&cu=INR`;b(xe)}else b("")},[Y,w]),j.useEffect(()=>{(async()=>{if(y==="credit"&&(n!=null&&n.patientId)){ne(!0);try{const Ie=await ce(`/api/patient-debts/${n.patientId}/balance`);if(Ie.ok){const Ne=await Ie.json();H(Ne.netDebt||0)}else H(0)}catch(Ie){console.error("Error fetching patient debt:",Ie),H(0)}finally{ne(!1)}}})()},[y,n==null?void 0:n.patientId]),o?i.jsx("div",{className:"pharmacy-billing-page",children:i.jsxs("div",{className:"billing-container",children:[i.jsxs("div",{className:"billing-header no-print",children:[i.jsx("div",{className:"back-button",children:i.jsx(ee,{width:100,height:40,style:{borderRadius:"8px"}})}),i.jsx(ee,{width:300,height:40})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("div",{className:"order-details-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:150,height:24})})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:200,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:150,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:180,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:150,height:20})})]})]}),i.jsxs("div",{className:"medications-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:120,height:24})})}),i.jsx("div",{className:"p-4",children:i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(ee,{width:30,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:60,height:20})})]})}),i.jsx("tbody",{children:[1,2,3,4].map(xe=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:20,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:180,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:70,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:70,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:90,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:60,height:20})})]},xe))})]})})]})]}),i.jsx("aside",{className:"billing-sidebar",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:160,height:24})})}),i.jsxs("div",{className:"space-y-4 p-5",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsx("hr",{}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:120,height:28}),i.jsx(ee,{width:100,height:28})]}),i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:i.jsx(ee,{width:150,height:150})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(ee,{width:"100%",height:45,style:{borderRadius:"8px"}}),i.jsx(ee,{width:"100%",height:45,style:{borderRadius:"8px"}}),i.jsx(ee,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?i.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?i.jsx("div",{className:"pharmacy-billing-page",children:i.jsxs("div",{className:"billing-container printable-section",children:[i.jsxs("div",{className:"billing-header print-only",children:[i.jsx("div",{className:"clinic-header-left",children:i.jsx("div",{className:"clinic-info-print",children:i.jsxs("div",{className:"clinic-name-and-details-print",children:[i.jsx("h1",{className:"bill-title",children:"INVOICE"}),i.jsx("h2",{className:"clinic-name-print",children:T?`${T} Pharmacy`:"Pharmacy Bill"}),(O||P)&&i.jsxs("div",{className:"clinic-details-print",children:[O&&i.jsx("span",{className:"small-text clinic-address",children:O}),P&&i.jsx("span",{className:"small-text clinic-notes",children:P})]})]})})}),i.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",n.patientName]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),i.jsxs("header",{className:"billing-header no-print",children:[i.jsx("button",{onClick:()=>e(-1),className:"back-button",children:i.jsx(rn,{className:"w-4 h-4"})}),i.jsx("h1",{children:"Pharmacy Bill"})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("section",{className:"order-details-card no-print",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Patient Information"})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",n.patientName]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",n.patientTokenNumber??"N/A"]}),i.jsxs("div",{className:"info-item no-print",children:[i.jsxs("strong",{children:[i.jsx(Nc,{size:16})," Order ID"]})," ",n.id]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Order Date"]})," ",new Date(n.date).toLocaleDateString()]})]})]}),i.jsxs("section",{className:"medications-card",children:[i.jsx("div",{className:"card-header no-print",children:i.jsx("h2",{children:"Medications"})}),a.length>0?i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"S.No."}),i.jsx("th",{children:"DESCRIPTION"}),i.jsx("th",{children:"BATCH"}),i.jsx("th",{children:"EXPIRY"}),i.jsx("th",{children:"QUANTITY"}),i.jsx("th",{children:"MRP"}),i.jsx("th",{children:"RATE"}),i.jsx("th",{children:"DIS %"}),i.jsx("th",{children:"GST%"}),i.jsx("th",{children:"AMT"})]})}),i.jsx("tbody",{children:a.map((xe,Ie)=>{var oe;const Ne=xe.total_price??0,ke=Ne*(xe.discount_percentage??0)/100,de=Ne-ke;return i.jsxs("tr",{children:[i.jsx("td",{children:Ie+1}),i.jsx("td",{children:xe.name}),i.jsx("td",{children:xe.batch||"N/A"}),i.jsx("td",{children:xe.expiry_date?new Date(xe.expiry_date).toLocaleDateString():"N/A"}),i.jsxs("td",{children:[i.jsxs("div",{children:["Packs: ",xe.loosePacks??0]}),i.jsxs("div",{children:["Loose: ",xe.looseUnits??0]})]}),i.jsx("td",{children:((oe=xe.originalPrice)==null?void 0:oe.toFixed(2))??"N/A"}),i.jsx("td",{children:((xe.pricePerLooseUnit??0)*(1-(xe.discount_percentage??0)/100)).toFixed(2)}),i.jsxs("td",{children:[i.jsx("input",{type:"number",value:xe.discount_percentage===0?"":xe.discount_percentage,onChange:re=>q(Ie,parseFloat(re.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),i.jsxs("td",{children:[5 .toFixed(1),"%"]}),i.jsx("td",{children:de.toFixed(2)})]},Ie)})})]}):i.jsx("p",{children:"No medications in this order."})]}),i.jsxs("div",{className:"bill-summary-print print-only",children:[i.jsxs("div",{className:"bill-summary-details",children:[i.jsxs("div",{className:"summary-row-print",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",fe.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row-print",children:[i.jsxs("span",{children:["Total Discount (",F.toFixed(2),"%)"]}),i.jsxs("span",{children:["- ",me.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row-print",children:[i.jsx("span",{children:"GST (Included)"}),i.jsxs("span",{children:["",(Y*.05).toFixed(2)]})]}),i.jsx("div",{className:"print-only-total",children:i.jsxs("strong",{children:["Grand Total: ",Y.toFixed(2)]})})]}),x&&i.jsxs("div",{className:`qr-code-container qr-code-printable-section ${y!=="upi"?"hide-on-screen":""}`,children:[i.jsx(oa,{value:x,size:100}),i.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),i.jsx("aside",{className:"billing-sidebar no-print",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Billing Summary"})}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",fe.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Total Discount"}),i.jsxs("span",{children:["- ",me.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Discount Percentage"}),i.jsxs("div",{className:"discount-input-wrapper",children:[i.jsx("input",{type:"number",value:F===0?"":F,onChange:xe=>Z(parseFloat(xe.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),i.jsxs("div",{className:"summary-row grand-total-row",children:[i.jsx("strong",{children:"Grand Total"}),i.jsxs("strong",{children:["",Y.toFixed(2)]})]}),i.jsx("div",{className:"qr-code-container",children:x?i.jsxs(i.Fragment,{children:[i.jsx(oa,{value:x,size:128}),i.jsx("p",{children:"Scan to pay using UPI"})]}):i.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),i.jsxs("div",{className:"payment-mode-section",children:[i.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:i.jsx("strong",{children:"Payment Mode"})}),i.jsxs("select",{id:"paymentMode",value:y,onChange:xe=>v(xe.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),i.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),i.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"})]})]}),y==="credit"&&i.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[i.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),V?i.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"Current Debt:"}),i.jsxs("strong",{style:{color:L&&L>0?"#dc3545":"#28a745"},children:["",(L||0).toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"This Bill:"}),i.jsxs("strong",{children:["+ ",Y.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[i.jsx("span",{children:i.jsx("strong",{children:"New Total Debt:"})}),i.jsxs("strong",{style:{color:"#dc3545"},children:["",((L||0)+Y).toFixed(2)]})]})]})]}),i.jsxs("div",{className:"bill-actions",children:[n.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:G,className:"secondary-button print-preview-button no-print",disabled:f||a.length===0,children:"Print Preview"}),i.jsx("button",{onClick:B,className:"primary-button",disabled:f||a.length===0,children:f?"Processing...":"Finalise and Bill"})]}),n.status==="billed"&&i.jsx("button",{onClick:()=>e(`/dashboard/bills/${n.bill_id}`),className:"secondary-button",children:"View Bill"})]})]})})]}),i.jsxs("footer",{className:"billing-footer print-only",children:[i.jsx("p",{children:"Thank you for your business!"}),i.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):i.jsx("div",{className:"error-message-box",children:"No order data available."})},TLe=()=>{const e=Mt(),t=$r(),[n,r]=j.useState(null),[a,s]=j.useState(""),[o,l]=j.useState(""),[c,u]=j.useState([]),[f,p]=j.useState(!0),[y,v]=j.useState(null),[x,b]=j.useState(!1),[w,_]=j.useState("cash"),[T,C]=j.useState(""),[O,E]=j.useState(""),[P,I]=j.useState(""),[F,$]=j.useState(""),[z,L]=j.useState(""),[H,V]=j.useState(""),[ne,Z]=j.useState(0),q=j.useRef(!1),[K,se]=j.useState(null),[G,B]=j.useState(!1),fe=Q=>{const oe=Math.max(0,Math.min(100,isNaN(Q)?0:Q));q.current=!0,Z(oe);const re=c.map(ae=>({...ae,discount_percentage:oe}));u(re)},me=(Q,oe)=>{const re=[...c];re[Q].discount_percentage=isNaN(oe)?0:oe,u(re)};j.useEffect(()=>{if(q.current){q.current=!1;return}const Q=c.reduce((ae,X)=>ae+(X.price??0),0);if(Q===0){Z(0);return}const re=c.reduce((ae,X)=>{const ie=(X.price??0)*((X.discount_percentage??0)/100);return ae+ie},0)/Q*100;Z(ae=>Math.abs(ae-re)>.01?re:ae)},[c]);const Y=async()=>{if(!n)return v("No order data available to bill."),null;if(c.length===0)return v("Cannot bill an empty order."),null;b(!0),v(null);try{const Q=c.map(W=>{const ie=W.price,pe=ie*((W.discount_percentage??0)/100),le=ie-pe;return{name:W.name,price:W.price,quantity:1,total:le,item_id:W.id,type:"lab_test",discount_percentage:W.discount_percentage??0}}),oe={patientId:n.patient_id,items:Q,amount:de,paymentMode:w,type:"lab",related_id:n.id,status:"paid",discountPercentage:ne},re=await ce("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)}),ae=await re.json();if(!re.ok||!ae.id)throw new Error(ae.message||"Failed to create bill.");const X=await ce(`/api/lab/${n.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",bill_id:ae.id})});if(!X.ok){const W=await X.text();throw new Error(`Failed to update lab order status: ${X.statusText} - ${W}`)}if(r(W=>W?{...W,status:"billed",bill_id:ae.id}:null),w==="credit")try{await ce(`/api/patient-debts/${n.patient_id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:de,related_bill_id:ae.id,notes:`Lab Bill #${ae.id}`})})}catch(W){console.error("Failed to create debt entry:",W)}return e(`/dashboard/lab-billing/${n.id}`,{replace:!0,state:{...t.state,order:{...n,status:"billed",bill_id:ae.id}}}),ae.id}catch(Q){return console.error("Billing process failed:",Q),v(Q.message||"Failed to mark order as billed. Please try again."),null}finally{b(!1)}},xe=()=>{window.print()},Ie=async()=>{await Y()&&(window.print(),e(-1))};j.useEffect(()=>{const Q=t.pathname.split("/"),oe=Q[Q.length-1];oe?(async()=>{try{const[ae,X]=await Promise.all([ce(`/api/lab/${oe}`),ce("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!ae.ok)throw new Error("Failed to fetch lab order details");const W=await ae.json();r(W);const ie=W.patient_id?ce(`/api/patients/${W.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1});if(X.ok&&"json"in X){const je=await X.json();E(je.upi_id||""),I(je.name||""),$(je.address||""),L(je.notes||""),V(je.labLetterheadUrl||"")}const pe=await ie;if(pe.ok&&"json"in pe){const je=await pe.json();s(je.name),l(je.patient_token_number)}const le=W.tests.map(je=>({...je,price:typeof je.price=="string"?parseFloat(je.price):Number(je.price)||0,discount_percentage:0,total_price:typeof je.price=="string"?parseFloat(je.price):Number(je.price)||0}));u(le)}catch(ae){console.error("Failed to fetch data:",ae),v(ae.message||"Failed to load order details.")}finally{p(!1)}})():(v("No lab order ID provided."),p(!1))},[t.pathname]);const Ne=j.useMemo(()=>c.reduce((Q,oe)=>Q+(oe.price??0),0),[c]),ke=j.useMemo(()=>c.reduce((Q,oe)=>{const ae=(oe.price??0)*(oe.discount_percentage??0)/100;return Q+ae},0),[c]),de=j.useMemo(()=>Ne-ke,[Ne,ke]);return j.useEffect(()=>{if(de>0&&O){const Q=`upi://pay?pa=${O}&pn=ClinicName&am=${de.toFixed(2)}&cu=INR`;C(Q)}else C("")},[de,O]),j.useEffect(()=>{(async()=>{if(w==="credit"&&(n!=null&&n.patient_id)){B(!0);try{const oe=await ce(`/api/patient-debts/${n.patient_id}/balance`);if(oe.ok){const re=await oe.json();se(re.netDebt||0)}else se(0)}catch(oe){console.error("Error fetching patient debt:",oe),se(0)}finally{B(!1)}}})()},[w,n==null?void 0:n.patient_id]),f?i.jsx("div",{className:"pharmacy-billing-page",children:i.jsxs("div",{className:"billing-container",children:[i.jsxs("div",{className:"billing-header no-print",children:[i.jsx("div",{className:"back-button",children:i.jsx(ee,{width:80,height:32})}),i.jsx("h1",{children:i.jsx(ee,{width:200,height:32})})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("div",{className:"order-details-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:150,height:24})})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsx(ee,{width:200,height:20}),i.jsx(ee,{width:150,height:20}),i.jsx(ee,{width:180,height:20}),i.jsx(ee,{width:150,height:20})]})]}),i.jsxs("div",{className:"medications-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:100,height:24})})}),i.jsxs("div",{className:"p-4 space-y-2",children:[i.jsx(ee,{width:"100%",height:40}),i.jsx(ee,{width:"100%",height:40}),i.jsx(ee,{width:"100%",height:40})]})]})]}),i.jsx("aside",{className:"billing-sidebar",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:150,height:24})})}),i.jsxs("div",{className:"space-y-4 p-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:120,height:24}),i.jsx(ee,{width:100,height:24})]}),i.jsx(ee,{width:"100%",height:150})," ",i.jsx(ee,{width:"100%",height:40}),i.jsx(ee,{width:"100%",height:40})]})]})})]})]})}):y?i.jsxs("div",{className:"error-message-box",children:["Error: ",y]}):n?i.jsxs("div",{className:"pharmacy-billing-page",children:[" ",i.jsxs("div",{className:"billing-container printable-section",children:[H&&i.jsx("div",{className:"print-only print-letterhead-container",children:i.jsx("img",{src:H,alt:"Lab Letterhead",className:"print-letterhead-image"})}),i.jsxs("div",{className:"billing-header print-only",children:[i.jsx("div",{className:"clinic-header-left",children:i.jsx("div",{className:"clinic-info-print",children:i.jsxs("div",{className:"clinic-name-and-details-print",children:[i.jsx("h1",{className:"bill-title",children:"INVOICE"}),i.jsx("h2",{className:"clinic-name-print",children:P?`${P} Lab`:"Lab Bill"}),(F||z)&&i.jsxs("div",{className:"clinic-details-print",children:[F&&i.jsx("span",{className:"small-text clinic-address",children:F}),z&&i.jsx("span",{className:"small-text clinic-notes",children:z})]})]})})}),i.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",a]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",o??"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),i.jsxs("header",{className:"billing-header no-print",children:[i.jsx("button",{onClick:()=>e(-1),className:"back-button",children:i.jsx(rn,{size:20})}),i.jsx("h1",{children:"Lab Bill"})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("section",{className:"order-details-card no-print",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Patient Information"})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",a]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",o??"N/A"]}),i.jsxs("div",{className:"info-item no-print",children:[i.jsxs("strong",{children:[i.jsx(Za,{size:16})," Order ID"]})," ",n.id]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Order Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),i.jsxs("section",{className:"medications-card",children:[i.jsx("div",{className:"card-header no-print",children:i.jsx("h2",{children:"Lab Tests"})}),c.length>0?i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"S.No."}),i.jsx("th",{children:"TEST DESCRIPTION"}),i.jsx("th",{children:"PRICE"}),i.jsx("th",{children:"DIS %"}),i.jsx("th",{children:"AMT"})]})}),i.jsx("tbody",{children:c.map((Q,oe)=>{const re=Q.price??0,ae=re*(Q.discount_percentage??0)/100,X=re-ae;return i.jsxs("tr",{children:[i.jsx("td",{children:oe+1}),i.jsx("td",{children:Q.name}),i.jsx("td",{children:typeof Q.price=="number"?Q.price.toFixed(2):Number(Q.price||0).toFixed(2)}),i.jsxs("td",{children:[i.jsx("input",{type:"number",value:Q.discount_percentage||"",onChange:W=>me(oe,parseFloat(W.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),i.jsx("td",{children:X.toFixed(2)})]},oe)})})]}):i.jsx("p",{children:"No tests in this order."})]}),i.jsxs("div",{className:"bill-summary-print print-only",children:[i.jsxs("div",{className:"bill-summary-details",children:[i.jsxs("div",{className:"summary-row-print",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",Ne.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row-print",children:[i.jsxs("span",{children:["Total Discount (",ne.toFixed(2),"%)"]}),i.jsxs("span",{children:["- ",ke.toFixed(2)]})]}),i.jsx("div",{className:"print-only-total",children:i.jsxs("strong",{children:["Grand Total: ",de.toFixed(2)]})})]}),T&&i.jsxs("div",{className:`qr-code-container qr-code-printable-section ${w!=="upi"?"hide-on-screen":""}`,children:[i.jsx(oa,{value:T,size:100}),i.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),i.jsx("aside",{className:"billing-sidebar no-print",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Billing Summary"})}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",Ne.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Total Discount"}),i.jsxs("span",{children:["- ",ke.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Discount Percentage"}),i.jsxs("div",{className:"discount-input-wrapper",children:[i.jsx("input",{type:"number",value:ne===0?"":ne,onChange:Q=>fe(parseFloat(Q.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:x||n.status==="billed"}),"%"]})]}),i.jsxs("div",{className:"summary-row grand-total-row",children:[i.jsx("strong",{children:"Grand Total"}),i.jsxs("strong",{children:["",de.toFixed(2)]})]}),i.jsx("div",{className:"qr-code-container",children:T?i.jsxs(i.Fragment,{children:[i.jsx(oa,{value:T,size:128}),i.jsx("p",{children:"Scan to pay using UPI"})]}):i.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),i.jsxs("div",{className:"payment-mode-section",children:[i.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:i.jsx("strong",{children:"Payment Mode"})}),i.jsxs("select",{id:"paymentMode",value:w,onChange:Q=>_(Q.target.value),className:"payment-mode-select",disabled:x||n.status==="billed",children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),i.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),i.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"})]})]}),w==="credit"&&i.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[i.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),G?i.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"Current Debt:"}),i.jsxs("strong",{style:{color:K&&K>0?"#dc3545":"#28a745"},children:["",(K||0).toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"This Bill:"}),i.jsxs("strong",{children:["+ ",de.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[i.jsx("span",{children:i.jsx("strong",{children:"New Total Debt:"})}),i.jsxs("strong",{style:{color:"#dc3545"},children:["",((K||0)+de).toFixed(2)]})]})]})]}),i.jsxs("div",{className:"bill-actions",children:[i.jsx("button",{onClick:xe,className:"secondary-button print-preview-button no-print",disabled:x||c.length===0,children:"Print Preview"}),n.status!=="billed"&&i.jsx("button",{onClick:Ie,className:"primary-button",disabled:x||c.length===0,children:x?"Processing...":"Finalise and Bill"}),n.status==="billed"&&n.bill_id&&i.jsx("button",{onClick:()=>e("/billing",{state:{billId:n.bill_id}}),className:"secondary-button",children:"View Bill"})]})]})})]}),i.jsxs("footer",{className:"billing-footer print-only",children:[i.jsx("p",{children:"Thank you for your business!"}),i.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})]}):i.jsx("div",{className:"error-message-box",children:"No order data available."})},ELe=500,ALe=()=>{const e=Mt(),{queueId:t}=Ai(),[n]=xq(),r=n.get("doctorId"),[a,s]=j.useState(null),[o,l]=j.useState(null),[c,u]=j.useState(null),[f,p]=j.useState(null),[y,v]=j.useState([]),[x,b]=j.useState(!0),[w,_]=j.useState(null),[T,C]=j.useState(!1),[O,E]=j.useState(!1),[P,I]=j.useState(null),[F,$]=j.useState("cash"),[z,L]=j.useState(""),[H,V]=j.useState(""),[ne,Z]=j.useState(""),[q,K]=j.useState(""),[se,G]=j.useState(""),[B,fe]=j.useState(0),[me,Y]=j.useState(null),[xe,Ie]=j.useState(!1);j.useEffect(()=>{(async()=>{if(!t){_("No queue ID provided."),b(!1);return}try{b(!0),_(null);const[W,ie]=await Promise.all([ce(`/api/queue/${t}`),ce("/api/clinics/settings").catch(()=>({ok:!1}))]);if(!W.ok)throw new Error("Failed to fetch queue entry");const pe=await W.json();if(s(pe),ie.ok&&"json"in ie){const ht=await ie.json();V(ht.upi_id||""),Z(ht.name||""),K(ht.address||""),G(ht.notes||"")}const le=r||pe.doctor_id,[je,Ge]=await Promise.all([pe.patient_id?ce(`/api/patients/${pe.patient_id}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1}),le?ce(`/api/staff/${le}`).catch(()=>({ok:!1})):Promise.resolve({ok:!1})]);if(je.ok&&"json"in je){const ht=await je.json();l(ht)}let et=ELe;if(le&&(p(le),Ge.ok&&"json"in Ge)){const ht=await Ge.json();u(ht),ht.opd_fee!=null&&!isNaN(parseFloat(String(ht.opd_fee)))&&(et=parseFloat(String(ht.opd_fee)))}v([{name:"Consultation Fee",quantity:1,price:et,total:et,discount_percentage:0}])}catch(W){console.error("Failed to fetch data:",W),_(W.message||"Failed to load billing details.")}finally{b(!1)}})()},[t,r]);const Ne=j.useMemo(()=>y.reduce((X,W)=>X+W.total,0),[y]),ke=j.useMemo(()=>Ne*(B/100),[Ne,B]),de=j.useMemo(()=>Ne-ke,[Ne,ke]);j.useEffect(()=>{if(de>0&&H){const X=`upi://pay?pa=${H}&pn=${encodeURIComponent(ne)}&am=${de.toFixed(2)}&cu=INR`;L(X)}else L("")},[de,H,ne]),j.useEffect(()=>{(async()=>{if(F==="credit"&&(o!=null&&o.id)){Ie(!0);try{const W=await ce(`/api/patient-debts/${o.id}/balance`);if(W.ok){const ie=await W.json();Y(ie.netDebt||0)}else Y(0)}catch(W){console.error("Error fetching patient debt:",W),Y(0)}finally{Ie(!1)}}})()},[F,o==null?void 0:o.id]);const Q=X=>{const W=Math.max(0,Math.min(100,isNaN(X)?0:X));fe(W)},oe=async()=>{if(!a||!o)return _("Missing queue or patient data."),null;if(y.length===0)return _("Cannot create an empty bill."),null;C(!0),_(null);try{const X=y.map(le=>({name:le.name,quantity:le.quantity,price:le.price,total:le.total*(1-B/100)})),W={patientId:o.id,queueId:a.id,items:X,amount:de,paymentMode:F,type:"consultation",related_id:a.id,status:"paid",discountPercentage:B},ie=await ce("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}),pe=await ie.json();if(!ie.ok||!pe.id)throw new Error(pe.message||"Failed to create bill.");if(F==="credit")try{await ce(`/api/patient-debts/${o.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:de,related_bill_id:pe.id,notes:`Consultation Bill #${pe.id}`})})}catch(le){console.error("Failed to create debt entry:",le)}if(f&&a.id)try{const le={status:"waiting",doctorId:f},je=await ce(`/api/queue/${a.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)});if(je.ok)console.log(`Doctor ${f} assigned to queue ${a.id} after billing.`);else{const Ge=await je.json();console.error("Failed to assign doctor to queue:",Ge.message)}}catch(le){console.error("Error assigning doctor to queue:",le)}return E(!0),I(pe.id),pe.id}catch(X){return console.error("Billing process failed:",X),_(X.message||"Failed to create bill. Please try again."),null}finally{C(!1)}},re=()=>{window.print()},ae=async()=>{await oe()&&(window.print(),e(-1))};return x?i.jsx("div",{className:"pharmacy-billing-page",children:i.jsxs("div",{className:"billing-container",children:[i.jsxs("div",{className:"billing-header no-print",children:[i.jsx("div",{className:"back-button",children:i.jsx(ee,{width:80,height:32})}),i.jsx("h1",{children:i.jsx(ee,{width:200,height:32})})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("div",{className:"order-details-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:150,height:24})})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsx(ee,{width:200,height:20}),i.jsx(ee,{width:150,height:20}),i.jsx(ee,{width:180,height:20}),i.jsx(ee,{width:150,height:20})]})]}),i.jsxs("div",{className:"medications-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:100,height:24})})}),i.jsxs("div",{className:"p-4 space-y-2",children:[i.jsx(ee,{width:"100%",height:40}),i.jsx(ee,{width:"100%",height:40}),i.jsx(ee,{width:"100%",height:40})]})]})]}),i.jsx("aside",{className:"billing-sidebar",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:150,height:24})})}),i.jsxs("div",{className:"space-y-4 p-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:120,height:24}),i.jsx(ee,{width:100,height:24})]}),i.jsx(ee,{width:"100%",height:150})," ",i.jsx(ee,{width:"100%",height:40}),i.jsx(ee,{width:"100%",height:40})]})]})})]})]})}):w?i.jsxs("div",{className:"error-message-box",children:["Error: ",w]}):a?i.jsx("div",{className:"pharmacy-billing-page",children:i.jsxs("div",{className:"billing-container printable-section",children:[i.jsxs("div",{className:"billing-header print-only",children:[i.jsx("div",{className:"clinic-header-left",children:i.jsx("div",{className:"clinic-info-print",children:i.jsxs("div",{className:"clinic-name-and-details-print",children:[i.jsx("h1",{className:"bill-title",children:"TAX INVOICE"}),i.jsx("h2",{className:"clinic-name-print",children:ne||"Clinic Bill"}),(q||se)&&i.jsxs("div",{className:"clinic-details-print",children:[q&&i.jsx("span",{className:"small-text clinic-address",children:q}),se&&i.jsx("span",{className:"small-text clinic-notes",children:se})]})]})})}),i.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",a.token_no]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Date"]})," ",new Date().toLocaleDateString()]})]})]}),i.jsxs("header",{className:"billing-header no-print",children:[i.jsx("button",{onClick:()=>e(-1),className:"back-button",children:i.jsx(rn,{size:20})}),i.jsx("h1",{children:"Consultation Bill"})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("section",{className:"order-details-card no-print",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Patient Information"})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",(o==null?void 0:o.name)||"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",a.token_no]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Patient ID"]})," ",(o==null?void 0:o.id)||"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Date"]})," ",new Date().toLocaleDateString()]}),c&&i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(sg,{size:16})," Doctor"]})," ",c.name]}),a.complaint&&i.jsxs("div",{className:"info-item",children:[i.jsx("strong",{children:"Complaint"})," ",a.complaint]})]})]}),i.jsxs("section",{className:"medications-card",children:[i.jsx("div",{className:"card-header no-print",children:i.jsx("h2",{children:"Bill Items"})}),y.length>0?i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"S.No."}),i.jsx("th",{children:"DESCRIPTION"}),i.jsx("th",{children:"QTY"}),i.jsx("th",{children:"RATE"}),i.jsx("th",{children:"AMT"})]})}),i.jsx("tbody",{children:y.map((X,W)=>{const ie=X.total*(B/100),pe=X.total-ie;return i.jsxs("tr",{children:[i.jsx("td",{children:W+1}),i.jsx("td",{children:X.name}),i.jsx("td",{children:X.quantity}),i.jsxs("td",{children:["",X.price.toFixed(2)]}),i.jsxs("td",{children:["",pe.toFixed(2)]})]},W)})})]}):i.jsx("p",{children:"No items in this bill."})]}),i.jsxs("div",{className:"bill-summary-print print-only",children:[i.jsxs("div",{className:"bill-summary-details",children:[i.jsxs("div",{className:"summary-row-print",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",Ne.toFixed(2)]})]}),B>0&&i.jsxs("div",{className:"summary-row-print",children:[i.jsxs("span",{children:["Discount (",B.toFixed(2),"%)"]}),i.jsxs("span",{children:["- ",ke.toFixed(2)]})]}),i.jsx("div",{className:"print-only-total",children:i.jsxs("strong",{children:["Grand Total: ",de.toFixed(2)]})})]}),z&&i.jsxs("div",{className:`qr-code-container qr-code-printable-section ${F!=="upi"?"hide-on-screen":""}`,children:[i.jsx(oa,{value:z,size:100}),i.jsx("p",{className:"print-only-upi-text",children:"Scan to pay using UPI"})]})]})]}),i.jsx("aside",{className:"billing-sidebar no-print",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Billing Summary"})}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",Ne.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Discount"}),i.jsxs("span",{children:["- ",ke.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Discount Percentage"}),i.jsxs("div",{className:"discount-input-wrapper",children:[i.jsx("input",{type:"number",value:B===0?"":B,onChange:X=>Q(parseFloat(X.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:T||O}),"%"]})]}),i.jsxs("div",{className:"summary-row grand-total-row",children:[i.jsx("strong",{children:"Grand Total"}),i.jsxs("strong",{children:["",de.toFixed(2)]})]}),i.jsx("div",{className:"qr-code-container",children:z?i.jsxs(i.Fragment,{children:[i.jsx(oa,{value:z,size:128}),i.jsx("p",{children:"Scan to pay using UPI"})]}):i.jsx("p",{children:"UPI QR code not available. Please ensure UPI ID is configured."})}),i.jsxs("div",{className:"payment-mode-section",children:[i.jsx("label",{htmlFor:"paymentMode",className:"info-item",children:i.jsx("strong",{children:"Payment Mode"})}),i.jsxs("select",{id:"paymentMode",value:F,onChange:X=>$(X.target.value),className:"payment-mode-select",disabled:T||O,children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),i.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"}),i.jsx("option",{value:"credit",children:"Credit (Debt to Patient)"})]})]}),F==="credit"&&i.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[i.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),xe?i.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"Current Debt:"}),i.jsxs("strong",{style:{color:me&&me>0?"#dc3545":"#28a745"},children:["",(me||0).toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"This Bill:"}),i.jsxs("strong",{children:["+ ",de.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[i.jsx("span",{children:i.jsx("strong",{children:"New Total Debt:"})}),i.jsxs("strong",{style:{color:"#dc3545"},children:["",((me||0)+de).toFixed(2)]})]})]})]}),i.jsxs("div",{className:"bill-actions",children:[!O&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:re,className:"secondary-button print-preview-button no-print",disabled:T||y.length===0,children:"Print Preview"}),i.jsx("button",{onClick:ae,className:"primary-button",disabled:T||y.length===0,children:T?"Processing...":"Finalise and Bill"})]}),O&&P&&i.jsx("button",{onClick:()=>e(`/dashboard/bills/${P}`),className:"secondary-button",children:"View Bill"})]})]})})]}),i.jsxs("footer",{className:"billing-footer print-only",children:[i.jsx("p",{children:"Thank you for your visit!"}),i.jsx("p",{children:"This is a computer generated bill and does not require a signature."})]})]})}):i.jsx("div",{className:"error-message-box",children:"No queue data available."})},kLe=()=>{const e=Mt(),[t,n]=j.useState(!0),[r,a]=j.useState([]),[s,o]=j.useState(""),[l,c]=j.useState(!0),[u,f]=j.useState(!1),[p,y]=j.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",gemini_api_key:"",low_stock_threshold:"10",name:"",logoUrl:"",labLetterheadUrl:"",upi_id:"",address:"",notes:"",voice_ai_language:"en-US"}),[v,x]=j.useState(null),[b,w]=j.useState(!1),_=(z,L)=>{x({type:z,message:L}),setTimeout(()=>x(null),3e3)},T=z=>{switch(z){case"doctor":return i.jsx(sg,{size:14,className:"text-blue-600"});case"receptionist":return i.jsx(Hq,{size:14,className:"text-green-600"});case"pharmacy":return i.jsx(Nc,{size:14,className:"text-purple-600"});case"lab":return i.jsx(Za,{size:14,className:"text-yellow-600"});default:return i.jsx(dd,{size:14,className:"text-gray-500"})}},C=z=>{switch(z){case"doctor":return"avatar-blue";case"receptionist":return"avatar-green";case"pharmacy":return"avatar-purple";case"lab":return"avatar-yellow";default:return"avatar-gray"}},O=j.useCallback(async()=>{n(!0);try{const z=await ce("/staff");if(z.ok){const L=await z.json();a(L.map(H=>({...H,id:H._id||H.id})))}}catch(z){console.error("Error fetching staff:",z),_("error","Failed to load staff list")}finally{n(!1)}},[]),E=j.useCallback(async()=>{c(!0);try{const z=await ce("/api/clinics/settings");if(z.ok){const L=await z.json();y({admissionCharge:parseFloat(L.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(L.perDayCharge||0).toFixed(2),otherCharges:parseFloat(L.otherCharges||0).toFixed(2),aiMemory:L.aiMemory||"",clinicWideSystemPrompt:L.clinicWideSystemPrompt||"",gemini_api_key:L.gemini_api_key||"",low_stock_threshold:L.low_stock_threshold!==void 0&&L.low_stock_threshold!==null?String(L.low_stock_threshold):"10",name:L.name||"",logoUrl:L.logoUrl||"",labLetterheadUrl:L.labLetterheadUrl||"",upi_id:L.upi_id||"",address:L.address||"",notes:L.notes||"",clinic_id:L.clinic_id,voice_ai_language:L.voice_ai_language||"en-US"})}}catch(z){console.error("Error fetching settings:",z),_("error","Failed to load settings")}finally{c(!1)}},[]);j.useEffect(()=>{O(),E()},[O,E]);const P=z=>{const{name:L,value:H}=z.target;y(V=>({...V,[L]:H}))},I=async()=>{f(!0);try{const z=parseFloat(p.admissionCharge),L=parseFloat(p.perDayCharge),H=parseFloat(p.otherCharges),V=parseInt(p.low_stock_threshold);if((await ce("/api/clinics/settings",{method:"PUT",body:JSON.stringify({name:p.name,admissionCharge:z,perDayCharge:L,otherCharges:H,aiMemory:p.aiMemory,clinicWideSystemPrompt:p.clinicWideSystemPrompt,gemini_api_key:p.gemini_api_key,low_stock_threshold:V,logoUrl:p.logoUrl,labLetterheadUrl:p.labLetterheadUrl,upi_id:p.upi_id,address:p.address,notes:p.notes,voice_ai_language:p.voice_ai_language})})).ok)_("success","Changes saved successfully");else throw new Error("Failed to save")}catch(z){console.error("Error saving settings:",z),_("error","Failed to save settings")}finally{f(!1)}},F=r.filter(z=>z.name.toLowerCase().includes(s.toLowerCase())||z.role.toLowerCase().includes(s.toLowerCase())),$=async z=>{for(const L of z){const H=document.getElementById(L);H&&(H.scrollIntoView({behavior:"smooth",block:"center"}),H.classList.add("ai-feedback-glow"),await new Promise(V=>setTimeout(V,1500)),H.classList.remove("ai-feedback-glow"))}};return i.jsxs("div",{className:"clinic-hub-container",children:[i.jsxs("header",{className:"clinic-hub-header",children:[i.jsxs("div",{className:"clinic-hub-title",children:[i.jsx("h1",{children:"Clinic Hub"}),i.jsx("p",{className:"clinic-hub-subtitle",children:"Manage your ecosystem"})]}),i.jsxs("div",{className:"clinic-hub-actions",children:[v&&i.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium ${v.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.message}),i.jsxs("button",{className:"btn-add-staff",onClick:()=>e("/dashboard/staff/add"),children:[i.jsx(Yr,{size:16})," Add Staff"]}),i.jsxs("button",{className:"btn-save-changes",onClick:I,disabled:u,children:[i.jsx(Xs,{size:16})," ",u?"Saving...":"Save Changes"]})]})]}),i.jsxs("main",{className:"clinic-hub-content",children:[i.jsxs("div",{className:"team-directory-panel",children:[i.jsxs("div",{className:"panel-header",children:[i.jsx(ko,{size:18,className:"text-gray-500"}),i.jsxs("span",{className:"panel-title",children:["Team Directory (",r.length,")"]})]}),i.jsx("div",{className:"search-container",children:i.jsxs("div",{className:"search-input-wrapper",children:[i.jsx(Un,{size:16,className:"search-icon"}),i.jsx("input",{type:"text",placeholder:"Find member...",className:"search-input",value:s,onChange:z=>o(z.target.value)})]})}),i.jsx("div",{className:"team-list",children:t?i.jsx("div",{className:"p-4 space-y-4",children:[1,2,3,4].map(z=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ee,{variant:"circular",width:40,height:40}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ee,{width:120,height:16,className:"mb-1"}),i.jsx(ee,{width:80,height:12})]})]},z))}):F.length===0?i.jsx("div",{className:"empty-state",children:"No staff found."}):F.map(z=>i.jsxs("div",{id:`staff-member-${z.id}`,className:"team-member-item",children:[i.jsx("div",{className:`member-avatar ${C(z.role)}`,children:z.name.charAt(0).toUpperCase()}),i.jsxs("div",{className:"member-info",children:[i.jsx("div",{className:"member-name",children:z.name}),i.jsxs("div",{className:"member-role",children:[T(z.role),z.role]})]}),i.jsx("span",{className:`member-status ${z.active?"status-active":"status-inactive"}`,children:z.active?"Active":"Inactive"}),i.jsx("button",{className:"btn-edit-member",onClick:()=>e(`/dashboard/staff/edit/${z.id}`),children:i.jsx(Pa,{size:16})})]},z.id))})]}),i.jsxs("div",{className:"config-console-panel",children:[i.jsxs("div",{className:"panel-header",children:[i.jsx(Fq,{size:18,className:"text-gray-500"}),i.jsx("span",{className:"panel-title",children:"Configuration Console"})]}),l?i.jsxs("div",{className:"p-6 space-y-8",children:[i.jsxs("div",{className:"config-section",children:[i.jsxs("div",{className:"section-header",children:[i.jsx(ee,{variant:"circular",width:24,height:24}),i.jsx(ee,{width:200,height:20})]}),i.jsxs("div",{className:"form-grid",children:[i.jsxs("div",{className:"form-group",children:[i.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),i.jsxs("div",{className:"form-group full-width",children:[i.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"100%",height:80,style:{borderRadius:"8px"}})]})]})]}),i.jsxs("div",{className:"config-section",children:[i.jsxs("div",{className:"section-header",children:[i.jsx(ee,{variant:"circular",width:24,height:24}),i.jsx(ee,{width:200,height:20})]}),i.jsxs("div",{className:"form-grid",children:[i.jsxs("div",{className:"form-group",children:[i.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(ee,{width:120,height:14,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"100%",height:40,style:{borderRadius:"8px"}})]})]})]})]}):i.jsxs("div",{className:"config-content",children:[i.jsxs("div",{className:"config-section",children:[i.jsxs("div",{className:"section-header",children:[i.jsx(Bq,{size:16})," CLINIC IDENTITY & LOCATION"]}),i.jsxs("div",{className:"form-grid",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"Clinic Name"}),i.jsx("input",{type:"text",className:"form-input",name:"name",id:"setting-name",value:p.name,onChange:P})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"Logo URL"}),i.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"logoUrl",id:"setting-logoUrl",value:p.logoUrl,onChange:P})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"Lab Letterhead URL"}),i.jsx("input",{type:"url",className:"form-input",placeholder:"https://",name:"labLetterheadUrl",id:"setting-labLetterheadUrl",value:p.labLetterheadUrl,onChange:P})]}),i.jsxs("div",{className:"form-group full-width",children:[i.jsx("label",{className:"form-label",children:"Address"}),i.jsx("textarea",{className:"form-textarea",placeholder:"Full physical address",name:"address",id:"setting-address",value:p.address,onChange:P})]})]})]}),i.jsxs("div",{className:"config-section",children:[i.jsxs("div",{className:"section-header",children:[i.jsx(xf,{size:16})," FINANCIAL OPERATIONS"]}),i.jsxs("div",{className:"form-grid",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"Admission Charge ()"}),i.jsx("input",{type:"number",className:"form-input",name:"admissionCharge",id:"setting-admissionCharge",value:p.admissionCharge,onChange:P})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"Per Day Charge ()"}),i.jsx("input",{type:"number",className:"form-input",name:"perDayCharge",id:"setting-perDayCharge",value:p.perDayCharge,onChange:P})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"Other Charges ()"}),i.jsx("input",{type:"number",className:"form-input",name:"otherCharges",id:"setting-otherCharges",value:p.otherCharges,onChange:P})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"UPI ID"}),i.jsx("input",{type:"text",className:"form-input",name:"upi_id",id:"setting-upi_id",value:p.upi_id,onChange:P})]})]})]}),i.jsxs("div",{className:"config-section",children:[i.jsxs("div",{className:"section-header",children:[i.jsx(bD,{size:16})," INVENTORY & AI"]}),i.jsxs("div",{className:"form-grid",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"Low Stock Threshold"}),i.jsx("input",{type:"number",className:"form-input",name:"low_stock_threshold",id:"setting-low_stock_threshold",value:p.low_stock_threshold,onChange:P})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"Voice AI Language"}),i.jsxs("select",{className:"form-input",name:"voice_ai_language",id:"setting-voice_ai_language",value:p.voice_ai_language,onChange:z=>y(L=>({...L,voice_ai_language:z.target.value})),children:[i.jsx("option",{value:"en-US",children:"English"}),i.jsx("option",{value:"hi-IN",children:"Hindi"}),i.jsx("option",{value:"te-IN",children:"Telugu"}),i.jsx("option",{value:"bn-IN",children:"Bengali"}),i.jsx("option",{value:"mr-IN",children:"Marathi"}),i.jsx("option",{value:"ta-IN",children:"Tamil"}),i.jsx("option",{value:"gu-IN",children:"Gujarati"}),i.jsx("option",{value:"kn-IN",children:"Kannada"}),i.jsx("option",{value:"ml-IN",children:"Malayalam"}),i.jsx("option",{value:"pa-IN",children:"Punjabi"}),i.jsx("option",{value:"es-ES",children:"Spanish"}),i.jsx("option",{value:"fr-FR",children:"French"}),i.jsx("option",{value:"de-DE",children:"German"}),i.jsx("option",{value:"it-IT",children:"Italian"}),i.jsx("option",{value:"pt-PT",children:"Portuguese"}),i.jsx("option",{value:"ru-RU",children:"Russian"}),i.jsx("option",{value:"ja-JP",children:"Japanese"}),i.jsx("option",{value:"ko-KR",children:"Korean"}),i.jsx("option",{value:"zh-CN",children:"Chinese (Simplified)"}),i.jsx("option",{value:"ar-SA",children:"Arabic"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"Gemini API Key"}),i.jsx("input",{type:"password",className:"form-input",name:"gemini_api_key",id:"setting-gemini_api_key",value:p.gemini_api_key,onChange:P,placeholder:"******************"})]}),i.jsxs("div",{className:"form-group full-width",children:[i.jsx("label",{className:"form-label",children:"Clinic-Wide System Prompt"}),i.jsx("textarea",{className:"form-textarea",name:"clinicWideSystemPrompt",id:"setting-clinicWideSystemPrompt",value:p.clinicWideSystemPrompt,onChange:P,placeholder:"Instructions for the AI..."})]}),i.jsxs("div",{className:"form-group full-width",children:[i.jsx("label",{className:"form-label",children:"AI Memory (Context)"}),i.jsx("textarea",{className:"form-textarea",name:"aiMemory",id:"setting-aiMemory",value:p.aiMemory,onChange:P,placeholder:"Shared context for the AI..."})]})]})]})]})]})]}),b&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:i.jsx("div",{className:"w-96 bg-white h-full shadow-2xl animate-slide-in-right",children:i.jsx(dW,{onClose:()=>w(!1),settings:p,staffList:r,onSettingsUpdate:E,onStaffUpdate:O,onHighlight:$})})})]})},PLe="_container_13uqm_121",OLe="_header_13uqm_141",DLe="_title_13uqm_187",MLe="_controls_13uqm_203",ILe="_dateInputGroup_13uqm_231",RLe="_dateInputLabel_13uqm_255",LLe="_dateInput_13uqm_231",FLe="_section_13uqm_297",$Le="_sectionTitle_13uqm_325",BLe="_statsGrid_13uqm_351",zLe="_statCard_13uqm_365",qLe="_statTitle_13uqm_397",ULe="_statValue_13uqm_415",VLe="_statSubtitle_13uqm_431",HLe="_revenueGrid_13uqm_443",GLe="_revenueCard_13uqm_469",WLe="_revenueCardTitle_13uqm_485",KLe="_revenueCardList_13uqm_505",YLe="_revenueCardListItem_13uqm_517",QLe="_tableContainer_13uqm_557",XLe="_table_13uqm_557",JLe="_textRight_13uqm_639",ZLe="_textGreen_13uqm_647",e6e="_textRed_13uqm_655",t6e="_loadingContainer_13uqm_673",n6e="_errorAlert_13uqm_693",r6e="_backButton_13uqm_759",i6e="_chartsGrid_13uqm_797",a6e="_chartCard_13uqm_823",s6e="_chartWrapper_13uqm_873",mt={container:PLe,header:OLe,title:DLe,controls:MLe,dateInputGroup:ILe,dateInputLabel:RLe,dateInput:LLe,section:FLe,sectionTitle:$Le,statsGrid:BLe,statCard:zLe,statTitle:qLe,statValue:ULe,statSubtitle:VLe,revenueGrid:HLe,revenueCard:GLe,revenueCardTitle:WLe,revenueCardList:KLe,revenueCardListItem:YLe,tableContainer:QLe,table:XLe,textRight:JLe,textGreen:ZLe,textRed:e6e,loadingContainer:t6e,errorAlert:n6e,backButton:r6e,chartsGrid:i6e,chartCard:a6e,chartWrapper:s6e},kz=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],xk=({active:e,payload:t,label:n})=>e&&t&&t.length?i.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[i.jsx("p",{className:"font-semibold text-gray-800",children:n}),t.map((r,a)=>i.jsxs("p",{style:{color:r.color},className:"text-sm",children:[r.name,": ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r.value)]},a))]}):null,o6e=()=>{const e=Mt(),t=$r(),n=new URLSearchParams(t.search),r=n.get("startDate"),a=n.get("endDate"),s=new Date().toISOString().split("T")[0],[o,l]=j.useState(r||s),[c,u]=j.useState(a||s),[f,p]=j.useState(!1),[y,v]=j.useState(null),{setAnalysisDateRange:x,analysisDateRange:b,setAnalysisData:w,registerAnalysisNavigator:_,registerAnalysisRefresher:T}=nN(),[C,O]=j.useState(0),[E,P]=j.useState(0),[I,F]=j.useState(0),[$,z]=j.useState(null),[L,H]=j.useState(null),[V,ne]=j.useState(null),[Z,q]=j.useState({reception:{},pharmacy:{},lab:{},dental:{}}),[K,se]=j.useState(0),[G,B]=j.useState(null),[fe,me]=j.useState([]),[Y,xe]=j.useState(null),Ie=j.useCallback(async(Q,oe)=>{p(!0),v(null);const re=Q||o,ae=oe||c;if(O(0),P(0),F(0),z(null),H(null),ne(null),q({reception:{},pharmacy:{},lab:{},dental:{}}),xe(null),xe(null),se(0),B(null),me([]),!re||!ae){v("Please select both start and end dates."),p(!1);return}try{const X=Fhe(),[W,ie,pe,le,je,Ge]=await Promise.all([ce(`/api/bills?startDate=${o}&endDate=${c}&limit=10000`),ce(`/api/payment/admission?startDate=${o}&endDate=${c}`),ce(`/api/subscriptions/transactions/manual?startDate=${o}&endDate=${c}`),ce(`/api/patient-debts/collections/analysis?startDate=${o}&endDate=${c}`),X?ce(`/api/inventory/comprehensive-analysis?startDate=${o}&endDate=${c}&clinicId=${X}`):Promise.resolve(null),ce(`/api/distributors/payments/analysis?startDate=${o}&endDate=${c}`)]);if(W.ok&&ie.ok&&pe.ok){const et=await W.json(),ht=await ie.json(),_e=await pe.json(),Fe=et.bills||[],Ye=ht.admissionPayments||[],Ke=_e||[];let be={totalRevenue:0,totalCashCollected:0,revenueByType:{consultation:0,pharmacy:0,lab:0,dental:0,other:0},cashByMode:{},revenueByMode:{},detailedRevenue:{reception:{},pharmacy:{},lab:{},dental:{}},dailyRevenue:new Map,pharmacyReturns:0};const De=(Ce,nt)=>{const Ve=Ce.split("T")[0];be.dailyRevenue.set(Ve,(be.dailyRevenue.get(Ve)||0)+nt)},we=(Ce,nt,Ve,dt,Ct=!0)=>{const kt=nt.toLowerCase()==="credit";Ct&&(be.totalRevenue+=Ce,be.revenueByType.hasOwnProperty(Ve)?be.revenueByType[Ve]+=Ce:be.revenueByType.other=(be.revenueByType.other||0)+Ce,De(dt,Ce),be.revenueByMode[nt]=(be.revenueByMode[nt]||0)+Ce),kt||(be.totalCashCollected+=Ce,be.cashByMode[nt]=(be.cashByMode[nt]||0)+Ce),Ct&&(Ve==="pharmacy"?be.detailedRevenue.pharmacy[nt]=(be.detailedRevenue.pharmacy[nt]||0)+Ce:Ve==="lab"?be.detailedRevenue.lab[nt]=(be.detailedRevenue.lab[nt]||0)+Ce:Ve==="dental"?be.detailedRevenue.dental[nt]=(be.detailedRevenue.dental[nt]||0)+Ce:Ve!=="debt"&&(be.detailedRevenue.reception[nt]=(be.detailedRevenue.reception[nt]||0)+Ce)),Ve==="debt"&&(be.detailedRevenue.debt=be.detailedRevenue.debt||{},be.detailedRevenue.debt[nt]=(be.detailedRevenue.debt[nt]||0)+Ce)};if(Fe.forEach(Ce=>{if(Ce.status==="paid"||Ce.type==="pharmacy_return"){let nt=parseFloat(Ce.amount.toString()),Ve=Ce.type||"other";const dt=Ce.payment_mode||"Unknown";Ve==="pharmacy_return"&&(be.pharmacyReturns+=nt,Ve="pharmacy"),we(nt,dt,Ve,Ce.createdAt,!0)}}),Ye.forEach(Ce=>{we(parseFloat(Ce.amount_paid.toString()),Ce.payment_mode||"Unknown","consultation",Ce.payment_date,!0)}),Ke.forEach(Ce=>{var dt,Ct;const nt=parseFloat(((Ct=(dt=Ce.subscriptionPlan)==null?void 0:dt.price)==null?void 0:Ct.toString())??"0"),Ve=Ce.subscription_payment_method||"manual";we(nt,Ve,"consultation",Ce.subscription_start_date,!0)}),le.ok){const nt=(await le.json()).paymentModeBreakdown||{};Object.entries(nt).forEach(([Ve,dt])=>{const Ct=Number(dt);we(Ct,Ve,"debt","",!1)})}if(P(be.totalCashCollected),O(be.totalRevenue),F(be.pharmacyReturns),z(be.cashByMode),H(be.revenueByMode),ne(be.revenueByType),q(be.detailedRevenue),Ge&&Ge.ok){const Ce=await Ge.json();se(Ce.totalPaid||0),B(Ce.paymentModeBreakdown||{})}const ve=Array.from(be.dailyRevenue.entries()).sort((Ce,nt)=>new Date(Ce[0]).getTime()-new Date(nt[0]).getTime()).map(([Ce,nt])=>({date:Ce,amount:nt}));me(ve)}if(je&&je.ok){const et=await je.json();xe(et)}}catch(X){console.error("Analysis Fetch Error:",X),v("Failed to fetch analysis data. Please try again.")}finally{p(!1)}},[o,c]);j.useEffect(()=>{_(Q=>{const oe=`analysis-${Q}`,re=document.getElementById(oe);re&&(re.scrollIntoView({behavior:"smooth",block:"center"}),re.classList.add("ai-highlight-glow"),setTimeout(()=>re.classList.remove("ai-highlight-glow"),2e3))})},[_]),j.useEffect(()=>{T(async()=>(await Ie(),null))},[T,Ie]),j.useEffect(()=>{if(b.startDate&&b.endDate){const Q=b.startDate.toISOString().split("T")[0],oe=b.endDate.toISOString().split("T")[0];(Q!==o||oe!==c)&&(l(Q),u(oe))}},[b]),j.useEffect(()=>{const Q=new URLSearchParams(t.search),oe=Q.get("section"),re=Q.get("startDate"),ae=Q.get("endDate");if(re&&ae){l(re),u(ae);const X=b.startDate?b.startDate.toISOString().split("T")[0]:null,W=b.endDate?b.endDate.toISOString().split("T")[0]:null;(X!==re||W!==ae)&&x({startDate:new Date(re),endDate:new Date(ae)})}if(oe){const X=`analysis-${oe}`;setTimeout(()=>{const W=document.getElementById(X);W&&(W.scrollIntoView({behavior:"smooth",block:"center"}),W.classList.add("ai-highlight-glow"),setTimeout(()=>W.classList.remove("ai-highlight-glow"),2e3))},500)}},[t.search]),j.useEffect(()=>{Ie()},[o,c,Ie]),j.useEffect(()=>{!f&&(E>0||Y)&&w({totalRevenue:C,totalCashFlow:E,totalExpenses:K,netCashFlow:E-K,collectionsBreakdown:$,revenueBreakdown:L,inventoryValue:0,pharmacyRevenue:(V==null?void 0:V.pharmacy)||0,labRevenue:(V==null?void 0:V.lab)||0,dentalRevenue:(V==null?void 0:V.dental)||0,receptionRevenue:((V==null?void 0:V.consultation)||0)+((V==null?void 0:V.other)||0),inventorySummary:Y?{totalItemsAnalyzed:Y.pharmacyAnalysis.length,netPositiveItems:Y.pharmacyAnalysis.filter(Q=>Q.net_change>0).length}:null})},[C,E,K,$,L,Y,V,f,w]);const Ne=Q=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Q),ke=j.useMemo(()=>L?Object.entries(L).map(([Q,oe])=>({name:Q,value:oe})):[],[L]),de=j.useMemo(()=>V?[{name:"Consultation",value:V.consultation},{name:"Pharmacy",value:V.pharmacy},{name:"Lab",value:V.lab},{name:"Dental",value:V.dental},{name:"Debt Collections",value:V.debt||0},{name:"Other",value:V.other||0}].filter(Q=>Q.value>0):[],[V]);return i.jsxs("div",{className:mt.container,children:[i.jsxs("div",{className:mt.header,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>e(-1),className:mt.backButton,title:"Go Back",children:[i.jsx(rn,{size:20})," Back"]}),i.jsx("h1",{className:mt.title,children:"Analysis Dashboard"})]}),i.jsxs("div",{className:mt.controls,children:[i.jsxs("div",{className:mt.dateInputGroup,children:[i.jsx("label",{className:mt.dateInputLabel,children:"From:"}),i.jsx("input",{type:"date",className:mt.dateInput,value:o,onChange:Q=>{l(Q.target.value),c&&x({startDate:new Date(Q.target.value),endDate:new Date(c)})}})]}),i.jsxs("div",{className:mt.dateInputGroup,children:[i.jsx("label",{className:mt.dateInputLabel,children:"To:"}),i.jsx("input",{type:"date",className:mt.dateInput,value:c,onChange:Q=>{u(Q.target.value),o&&x({startDate:new Date(o),endDate:new Date(Q.target.value)})}})]})]})]}),y&&i.jsxs("div",{className:mt.errorAlert,children:[i.jsx(Wr,{size:20}),i.jsx("span",{children:y})]}),!f&&i.jsxs("div",{children:[i.jsxs("section",{className:mt.section,id:"analysis-expenses",children:[i.jsxs("div",{className:mt.sectionTitle,children:[i.jsx(Ow,{style:{color:"var(--accent-primary)"},size:24}),i.jsx("h2",{children:"Cash Flow Analysis"})]}),i.jsxs("div",{className:mt.statsGrid,children:[i.jsxs("div",{className:mt.statCard,children:[i.jsx("div",{className:mt.statTitle,children:"Total Cash Inflow"}),i.jsx("div",{className:mt.statValue,style:{color:"var(--accent-success)"},children:Ne(E)}),i.jsx("div",{className:mt.statSubtitle,children:"Collections (Cash, UPI, etc.)"})]}),i.jsxs("div",{className:mt.statCard,children:[i.jsx("div",{className:mt.statTitle,children:"Total Expenses"}),i.jsx("div",{className:mt.statValue,style:{color:"var(--accent-danger)"},children:Ne(K)}),i.jsx("div",{className:mt.statSubtitle,children:"Distributor Payments"})]}),i.jsxs("div",{className:mt.statCard,children:[i.jsx("div",{className:mt.statTitle,children:"Net Cash Flow"}),i.jsx("div",{className:mt.statValue,style:{color:E-K>=0?"var(--accent-success)":"var(--accent-danger)"},children:Ne(E-K)}),i.jsx("div",{className:mt.statSubtitle,children:"Inflow - Outflow"})]})]}),i.jsxs("div",{className:mt.revenueGrid,style:{marginTop:"1rem"},children:[$&&Object.keys($).length>0&&i.jsxs("div",{className:mt.revenueCard,children:[i.jsx("h3",{className:mt.revenueCardTitle,children:"Collections Breakdown"}),i.jsx("ul",{className:mt.revenueCardList,children:Object.entries($).map(([Q,oe])=>i.jsxs("li",{className:mt.revenueCardListItem,children:[i.jsx("span",{children:Q}),i.jsx("span",{children:Ne(oe)})]},Q))})]}),G&&Object.keys(G).length>0&&i.jsxs("div",{className:mt.revenueCard,children:[i.jsx("h3",{className:mt.revenueCardTitle,children:"Expense Breakdown"}),i.jsx("ul",{className:mt.revenueCardList,children:Object.entries(G).map(([Q,oe])=>i.jsxs("li",{className:mt.revenueCardListItem,children:[i.jsx("span",{children:Q}),i.jsx("span",{children:Ne(oe)})]},Q))})]})]})]}),i.jsxs("section",{className:mt.section,id:"analysis-financial",children:[i.jsxs("div",{className:mt.sectionTitle,children:[i.jsx(xf,{style:{color:"var(--accent-primary)"},size:24}),i.jsx("h2",{children:"Financial Performance"})]}),i.jsx("div",{className:mt.statsGrid,children:i.jsxs("div",{className:mt.statCard,children:[i.jsx("div",{className:mt.statTitle,children:"Total Revenue Generated"}),i.jsx("div",{className:mt.statValue,style:{color:"var(--accent-primary)"},children:Ne(C)}),i.jsx("div",{className:mt.statSubtitle,children:"Billings & Services (Accrual)"})]})}),i.jsxs("div",{className:mt.chartsGrid,children:[i.jsxs("div",{className:mt.chartCard,style:{gridColumn:"1 / -1"},children:[i.jsx("h3",{children:"Revenue Trend (Daily)"}),i.jsx("div",{className:mt.chartWrapper,children:i.jsx(Sw,{width:"100%",height:300,children:i.jsxs(bMe,{data:fe,children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"var(--accent-primary)",stopOpacity:.8}),i.jsx("stop",{offset:"95%",stopColor:"var(--accent-primary)",stopOpacity:.05})]})}),i.jsx(_b,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),i.jsx(Fc,{dataKey:"date",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),i.jsx($c,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:Q=>`${Q/1e3}k`}),i.jsx(_a,{content:i.jsx(xk,{})}),i.jsx(Td,{type:"monotone",dataKey:"amount",stroke:"var(--accent-primary)",fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),i.jsxs("div",{className:mt.chartCard,children:[i.jsx("h3",{children:"Payment Method Distribution"}),i.jsx("div",{className:mt.chartWrapper,children:i.jsx(Sw,{width:"100%",height:300,children:i.jsxs(sW,{children:[i.jsx(Ll,{data:ke,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:ke.map((Q,oe)=>i.jsx(Xb,{fill:kz[oe%kz.length]},`cell-${oe}`))}),i.jsx(_a,{content:i.jsx(xk,{})}),i.jsx(Tc,{verticalAlign:"bottom",height:36,formatter:Q=>i.jsx("span",{style:{color:"var(--text-primary)"},children:Q})})]})})})]}),i.jsxs("div",{className:mt.chartCard,children:[i.jsx("h3",{children:"Revenue by Source"}),i.jsx("div",{className:mt.chartWrapper,children:i.jsx(Sw,{width:"100%",height:300,children:i.jsxs(aW,{data:de,children:[i.jsx(_b,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-subtle)"}),i.jsx(Fc,{dataKey:"name",tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1}),i.jsx($c,{tick:{fill:"var(--text-secondary)",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:Q=>`${Q/1e3}k`}),i.jsx(_a,{content:i.jsx(xk,{}),cursor:{fill:"var(--bg-primary)"}}),i.jsx(Cd,{dataKey:"value",fill:"var(--accent-success)",radius:[4,4,0,0]})]})})})]})]}),Z&&i.jsxs("div",{className:mt.sectionTitle,style:{marginTop:"2rem"},children:[i.jsx(Hk,{style:{color:"var(--text-secondary)"},size:20}),i.jsx("h3",{children:"Detailed Breakdown"})]}),Z&&i.jsxs("div",{className:mt.revenueGrid,children:[i.jsxs("div",{className:mt.revenueCard,children:[i.jsx("h3",{className:mt.revenueCardTitle,children:"Reception / Clinic"}),i.jsx("div",{className:mt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Ne(((V==null?void 0:V.consultation)||0)+((V==null?void 0:V.other)||0))}),i.jsx("ul",{className:mt.revenueCardList,children:Object.entries(Z.reception).map(([Q,oe])=>i.jsxs("li",{className:mt.revenueCardListItem,children:[i.jsx("span",{children:Q}),i.jsx("span",{children:Ne(oe)})]},Q))})]}),i.jsxs("div",{className:mt.revenueCard,children:[i.jsx("h3",{className:mt.revenueCardTitle,children:"Pharmacy"}),i.jsx("div",{className:mt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Ne((V==null?void 0:V.pharmacy)||0)}),I<0&&i.jsxs("div",{className:`${mt.textRed} text-sm mb-2`,children:["Returns: ",Ne(I)]}),i.jsx("ul",{className:mt.revenueCardList,children:Object.entries(Z.pharmacy).map(([Q,oe])=>i.jsxs("li",{className:mt.revenueCardListItem,children:[i.jsx("span",{children:Q}),i.jsx("span",{children:Ne(oe)})]},Q))})]}),i.jsxs("div",{className:mt.revenueCard,children:[i.jsx("h3",{className:mt.revenueCardTitle,children:"Laboratory"}),i.jsx("div",{className:mt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Ne((V==null?void 0:V.lab)||0)}),i.jsx("ul",{className:mt.revenueCardList,children:Object.entries(Z.lab).map(([Q,oe])=>i.jsxs("li",{className:mt.revenueCardListItem,children:[i.jsx("span",{children:Q}),i.jsx("span",{children:Ne(oe)})]},Q))})]}),i.jsxs("div",{className:mt.revenueCard,children:[i.jsx("h3",{className:mt.revenueCardTitle,children:"Dental"}),i.jsx("div",{className:mt.statValue,style:{fontSize:"1.5rem",marginBottom:"1rem"},children:Ne((V==null?void 0:V.dental)||0)}),i.jsx("ul",{className:mt.revenueCardList,children:Object.entries(Z.dental).map(([Q,oe])=>i.jsxs("li",{className:mt.revenueCardListItem,children:[i.jsx("span",{children:Q}),i.jsx("span",{children:Ne(oe)})]},Q))})]})]})]}),i.jsxs("section",{className:mt.section,id:"analysis-inventory",children:[i.jsxs("div",{className:mt.sectionTitle,children:[i.jsx(jf,{style:{color:"var(--accent-success)"},size:24}),i.jsx("h2",{children:"Inventory Movement"})]}),Y&&Y.pharmacyAnalysis.length>0?i.jsx("div",{className:mt.tableContainer,children:i.jsxs("table",{className:mt.table,children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Item Name"}),i.jsx("th",{children:"Stock In"}),i.jsx("th",{children:"Stock Out"}),i.jsx("th",{children:"Net Change"}),i.jsx("th",{className:mt.textRight,children:"Est. Revenue"}),i.jsx("th",{className:mt.textRight,children:"Est. Profit"})]})}),i.jsx("tbody",{children:Y.pharmacyAnalysis.map(Q=>i.jsxs("tr",{children:[i.jsxs("td",{children:[i.jsx("div",{style:{fontWeight:600},children:Q.name}),i.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:Q.supplier})]}),i.jsxs("td",{className:mt.textGreen,children:["+",Q.quantity_in,Object.entries(Q.quantity_in_by_reason).map(([oe,re])=>i.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[oe,": ",re]},oe))]}),i.jsxs("td",{className:mt.textRed,children:["-",Q.quantity_out,Object.entries(Q.quantity_out_by_reason).map(([oe,re])=>i.jsxs("div",{style:{fontSize:"0.75rem",opacity:.8},children:[oe,": ",re]},oe))]}),i.jsx("td",{children:i.jsxs("span",{style:{fontWeight:600},className:Q.net_change>=0?mt.textGreen:mt.textRed,children:[Q.net_change>0?"+":"",Q.net_change]})}),i.jsx("td",{className:mt.textRight,children:Ne(Q.revenue)}),i.jsx("td",{className:`${mt.textRight} ${Q.profit>=0?mt.textGreen:mt.textRed}`,children:Ne(Q.profit)})]},Q.drug_id))})]})}):i.jsx("div",{className:"text-center py-8 opacity-50 mb-4 bg-transparent rounded-lg border border-dashed border-gray-300",children:"No inventory movement recorded for this period."})]})]}),f&&i.jsxs("div",{className:mt.loadingContainer,style:{display:"block"},children:[i.jsxs("div",{className:mt.sectionTitle,children:[i.jsx(ee,{variant:"circular",width:24,height:24}),i.jsx(ee,{width:200,height:24})]}),i.jsxs("div",{className:mt.statsGrid,children:[i.jsxs("div",{className:mt.statCard,children:[i.jsx(ee,{width:"60%",height:20}),i.jsx(ee,{width:"80%",height:32}),i.jsx(ee,{width:"40%",height:16})]}),i.jsxs("div",{className:mt.statCard,children:[i.jsx(ee,{width:"60%",height:20}),i.jsx(ee,{width:"80%",height:32}),i.jsx(ee,{width:"40%",height:16})]}),i.jsxs("div",{className:mt.statCard,children:[i.jsx(ee,{width:"60%",height:20}),i.jsx(ee,{width:"80%",height:32}),i.jsx(ee,{width:"40%",height:16})]})]}),i.jsx("div",{style:{marginTop:"2rem"},children:i.jsxs("div",{className:mt.chartsGrid,children:[i.jsxs("div",{className:mt.chartCard,style:{gridColumn:"1 / -1"},children:[i.jsx(ee,{width:180,height:24,className:"mb-4"}),i.jsx(ee,{width:"100%",height:250})]}),i.jsxs("div",{className:mt.chartCard,children:[i.jsx(ee,{width:180,height:24,className:"mb-4"}),i.jsx(ee,{width:"100%",height:200,variant:"circular",style:{margin:"0 auto"}})]}),i.jsxs("div",{className:mt.chartCard,children:[i.jsx(ee,{width:180,height:24,className:"mb-4"}),i.jsx(ee,{width:"100%",height:250})]})]})})]})]})},Pz=()=>{const e=Mt(),t=ns(),[n,r]=j.useState([]),[a,s]=j.useState(!0),[o,l]=j.useState(null),[c,u]=j.useState(""),[f,p]=j.useState("debtHighToLow"),[y,v]=j.useState(!0),[x,b]=j.useState(""),[w,_]=j.useState(!1),[T,C]=j.useState(!1),[O,E]=j.useState(null),[P,I]=j.useState([]),[F,$]=j.useState(null),[z,L]=j.useState(""),[H,V]=j.useState(""),[ne,Z]=j.useState(""),[q,K]=j.useState("cash"),[se,G]=j.useState(0),B=j.useMemo(()=>{let Q=[...n];y&&(Q=Q.filter(re=>parseFloat(re.netDebt)>0));const oe=parseFloat(x);switch(!isNaN(oe)&&oe>0&&(Q=Q.filter(re=>parseFloat(re.netDebt)>=oe)),f){case"name":Q.sort((re,ae)=>re.name.localeCompare(ae.name));break;case"debtHighToLow":Q.sort((re,ae)=>parseFloat(ae.netDebt)-parseFloat(re.netDebt));break;case"debtLowToHigh":Q.sort((re,ae)=>parseFloat(re.netDebt)-parseFloat(ae.netDebt));break}return Q},[n,y,x,f]),fe=j.useCallback(async()=>{s(!0),l(null);try{const Q=c?`/api/patient-debts?search=${encodeURIComponent(c)}`:"/api/patient-debts",oe=await ce(Q);if(!oe.ok)throw new Error(`Failed to fetch patients with debt: ${oe.statusText}`);const re=await oe.json();r(re);const ae=re.reduce((X,W)=>X+parseFloat(W.netDebt||"0"),0);G(ae)}catch(Q){console.error("Failed to fetch patients with debt:",Q),l(Q.message||"Failed to load patients with debt.")}finally{s(!1)}},[c]);j.useEffect(()=>{fe()},[fe]);const me=j.useCallback(async Q=>{l(null);try{const oe=await ce(`/api/patient-debts/${Q}/transactions`);if(!oe.ok)throw new Error(`Failed to fetch transactions: ${oe.statusText}`);const ae=(await oe.json()).map(ie=>({...ie,debt_value:parseFloat(ie.debt_value),amount_paid:parseFloat(ie.amount_paid),balance_remaining:parseFloat(ie.balance_remaining)}));I(ae);const X=await ce(`/api/patient-debts/${Q}/balance`);if(!X.ok)throw new Error(`Failed to fetch balance: ${X.statusText}`);const W=await X.json();$({patientId:W.patientId,patientName:W.patientName,totalDebtValue:parseFloat(W.totalDebtValue),totalAmountPaid:parseFloat(W.totalAmountPaid),netDebt:parseFloat(W.netDebt)})}catch(oe){console.error("Error fetching transactions/balance:",oe),l(oe.message||"Failed to load transactions or balance.")}},[]),Y=Q=>{Q&&(t.prefetchQuery({queryKey:Vt.patients.context(Q),queryFn:async()=>{const oe=await ce(`/api/patients/${Q}/context`);if(!oe.ok)throw new Error("Failed to fetch patient context");return oe.json()},staleTime:1e3*60*5}),t.prefetchQuery({queryKey:Vt.patientDebts.balance(Q),queryFn:async()=>{const oe=await ce(`/api/patient-debts/${Q}/balance`);if(!oe.ok)throw new Error("Failed to fetch patient debt");return oe.json()},staleTime:1e3*60}),t.prefetchQuery({queryKey:Vt.queue.latest(Q),queryFn:async()=>{const oe=await ce(`/api/queue/patient/${Q}/latest`);if(!oe.ok){if(oe.status===404)return null;throw new Error("Failed to fetch queue status")}return oe.json()},staleTime:1e3*5}))},xe=async Q=>{if(Q.preventDefault(),l(null),!O)return;const oe=parseFloat(H||"0");if(oe<=0){l("Payment amount must be greater than 0");return}try{const re=await ce(`/api/patient-debts/${O.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:z,amount_paid:oe,notes:ne,payment_mode:q})});if(!re.ok){const ae=await re.json();throw new Error(ae.message||"Failed to add payment.")}de(),me(O.id),fe()}catch(re){console.error("Error adding payment:",re),l(re.message||"Failed to add payment.")}},Ie=Q=>{E(Q),me(Q.id),l(null),_(!0)},Ne=()=>{_(!1),E(null),I([]),$(null)},ke=Q=>{E(Q),L(new Date().toISOString().split("T")[0]),V(""),Z(""),K("cash"),l(null),C(!0)},de=()=>{C(!1),E(null)};return a?i.jsxs("div",{className:"patient-debt-management-page",children:[i.jsxs("div",{className:"patient-debt-header",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx(ee,{width:80,height:36}),i.jsx(ee,{width:200,height:32})]}),i.jsx(ee,{width:250,height:36})]}),i.jsxs("div",{className:"filter-container",children:[i.jsx(ee,{width:200,height:40}),i.jsx(ee,{width:120,height:40}),i.jsx(ee,{width:100,height:40}),i.jsx(ee,{width:150,height:40})]}),i.jsx("div",{className:"debt-table-container",children:i.jsxs("table",{className:"debt-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Patient Name"}),i.jsx("th",{children:"Phone"}),i.jsx("th",{children:"Total Debt Value"}),i.jsx("th",{children:"Total Paid"}),i.jsx("th",{children:"Net Debt (Outstanding)"}),i.jsx("th",{children:"Actions"})]})}),i.jsx("tbody",{children:[1,2,3,4,5,6].map(Q=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:100,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:180,height:32})})]},Q))})]})})]}):i.jsxs("div",{className:"patient-debt-management-page",children:[i.jsxs("div",{className:"patient-debt-header",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("button",{onClick:()=>e(-1),className:"back-button",title:"Go Back",children:i.jsx(rn,{size:20})}),i.jsx("h2",{children:"Patient Debt Management"})]}),i.jsxs("div",{className:`total-debt-display ${se>0?"debt-positive":"debt-zero"}`,children:[i.jsx(xf,{size:20}),i.jsx("strong",{children:"Total Outstanding Debt:"})," ",se.toFixed(2)]})]}),o&&i.jsx("div",{className:"error-message",children:o}),i.jsxs("div",{className:"filter-container",children:[i.jsx("input",{type:"text",placeholder:"Search by name or phone...",value:c,onChange:Q=>u(Q.target.value),className:"filter-search-input"}),i.jsxs("select",{id:"sortBy",value:f,onChange:Q=>p(Q.target.value),className:"filter-select",title:"Sort by",children:[i.jsx("option",{value:"debtHighToLow",children:"Debt "}),i.jsx("option",{value:"debtLowToHigh",children:"Debt "}),i.jsx("option",{value:"name",children:"Name A-Z"})]}),i.jsx("input",{type:"number",id:"minDebt",value:x,onChange:Q=>b(Q.target.value),placeholder:"Min ",min:"0",className:"filter-number-input",title:"Minimum debt amount"}),i.jsxs("label",{className:"filter-checkbox-label",children:[i.jsx("input",{type:"checkbox",checked:y,onChange:Q=>v(Q.target.checked)}),"Outstanding only"]}),i.jsxs("span",{className:"filter-count",children:[B.length,"/",n.length]})]}),i.jsx("div",{className:"debt-table-container",children:i.jsxs("table",{className:"debt-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsxs("th",{children:[i.jsx(mr,{size:14})," Patient Name"]}),i.jsxs("th",{children:[i.jsx(ig,{size:14})," Phone"]}),i.jsxs("th",{children:[i.jsx(wD,{size:14})," Total Debt Value"]}),i.jsx("th",{children:"Total Paid"}),i.jsx("th",{children:"Net Debt (Outstanding)"}),i.jsx("th",{className:"actions-cell",children:"Actions"})]})}),i.jsx("tbody",{children:B.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"no-results-message",children:c?"No patients found matching your search.":"No patients with outstanding debt."})}):B.map(Q=>i.jsxs("tr",{onClick:()=>e(`/dashboard/edit-complaint/patient/${Q.id}`),onMouseEnter:()=>Y(Q.id),style:{cursor:"pointer"},title:"Click to view patient details",children:[i.jsx("td",{"data-label":"Patient Name",children:i.jsxs("div",{className:"patient-name-cell",children:[i.jsx("strong",{children:Q.name}),Q.age&&Q.gender&&i.jsxs("span",{className:"patient-meta",children:[Q.age,"y / ",Q.gender]})]})}),i.jsx("td",{"data-label":"Phone",children:Q.phone||"-"}),i.jsxs("td",{"data-label":"Total Debt Value",children:["",Q.totalDebtValue]}),i.jsxs("td",{"data-label":"Total Paid",className:"amount-paid",children:["",Q.totalAmountPaid]}),i.jsxs("td",{"data-label":"Net Debt",className:parseFloat(Q.netDebt)>0?"debt-outstanding":"debt-clear",children:["",Q.netDebt]}),i.jsx("td",{className:"actions-cell",onClick:oe=>oe.stopPropagation(),children:i.jsxs("div",{className:"actions-buttons-group",children:[i.jsxs("button",{onClick:()=>Ie(Q),className:"action-text-button view-button",title:"View Transactions",children:[i.jsx($m,{size:16})," View History"]}),i.jsxs("button",{onClick:()=>ke(Q),className:"action-text-button add-payment-button",title:"Record Payment",children:[i.jsx(ws,{size:16})," Record Payment"]})]})})]},Q.id))})]})}),w&&O&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content large-modal",children:[i.jsx("button",{onClick:Ne,className:"modal-close-button",children:""}),i.jsxs("h3",{className:"modal-title",children:["Debt History for ",O.name]}),o&&i.jsx("div",{className:"modal-error-message",children:o}),F&&i.jsxs("div",{className:"balance-summary",children:[i.jsxs("div",{className:"balance-row",children:[i.jsx("span",{children:"Total Debt Value:"}),i.jsxs("strong",{children:["",F.totalDebtValue.toFixed(2)]})]}),i.jsxs("div",{className:"balance-row",children:[i.jsx("span",{children:"Total Amount Paid:"}),i.jsxs("strong",{className:"amount-paid",children:["",F.totalAmountPaid.toFixed(2)]})]}),i.jsxs("div",{className:"balance-row net-debt-row",children:[i.jsx("span",{children:i.jsx("strong",{children:"Net Outstanding Debt:"})}),i.jsxs("strong",{className:F.netDebt>0?"debt-outstanding":"debt-clear",children:["",F.netDebt.toFixed(2)]})]})]}),i.jsx("h4",{children:"Transaction History"}),P.length===0?i.jsx("p",{children:"No transactions recorded for this patient."}):i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"debt-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Date"}),i.jsx("th",{children:"Debt Added"}),i.jsx("th",{children:"Payment Received"}),i.jsx("th",{children:"Balance After"}),i.jsx("th",{children:"Due Date"}),i.jsx("th",{children:"Payment Mode"}),i.jsx("th",{children:"Notes"})]})}),i.jsx("tbody",{children:P.map(Q=>i.jsxs("tr",{children:[i.jsx("td",{"data-label":"Date",children:new Date(Q.transaction_date).toLocaleDateString()}),i.jsx("td",{"data-label":"Debt Added",className:Q.debt_value>0?"debt-added":"",children:Q.debt_value>0?`+ ${Q.debt_value.toFixed(2)}`:"-"}),i.jsx("td",{"data-label":"Payment Received",className:Q.amount_paid>0?"payment-received":"",children:Q.amount_paid>0?`- ${Q.amount_paid.toFixed(2)}`:"-"}),i.jsxs("td",{"data-label":"Balance After",children:["",Q.balance_remaining.toFixed(2)]}),i.jsx("td",{"data-label":"Due Date",children:Q.due_date?new Date(Q.due_date).toLocaleDateString():"-"}),i.jsx("td",{"data-label":"Payment Mode",children:Q.payment_mode?Q.payment_mode.charAt(0).toUpperCase()+Q.payment_mode.slice(1):"-"}),i.jsx("td",{"data-label":"Notes",children:Q.notes||"-"})]},Q.id))})]})}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{type:"button",onClick:()=>{Ne(),ke(O)},className:"button-submit",children:"Record Payment"}),i.jsx("button",{type:"button",onClick:Ne,className:"button-cancel",children:"Close"})]})]})}),T&&O&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("button",{onClick:de,className:"modal-close-button",children:""}),i.jsxs("h3",{className:"modal-title",children:["Record Payment for ",O.name]}),i.jsxs("div",{className:"current-debt-info",children:[i.jsx("span",{children:"Current Outstanding Debt:"}),i.jsxs("strong",{className:"debt-outstanding",children:["",O.netDebt]})]}),o&&i.jsx("div",{className:"modal-error-message",children:o}),i.jsxs("form",{onSubmit:xe,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"payment_date",children:"Payment Date:"}),i.jsx("input",{type:"date",id:"payment_date",value:z,onChange:Q=>L(Q.target.value),required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"amount_paid",children:"Amount Paid ():"}),i.jsx("input",{type:"number",id:"amount_paid",value:H,onChange:Q=>V(Q.target.value),step:"0.01",min:"0.01",required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"payment_mode",children:"Payment Mode:"}),i.jsxs("select",{id:"payment_mode",value:q,onChange:Q=>K(Q.target.value),children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),i.jsx("option",{value:"online",children:"Online"}),i.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"payment_notes",children:"Notes:"}),i.jsx("textarea",{id:"payment_notes",value:ne,onChange:Q=>Z(Q.target.value),placeholder:"e.g., Partial payment via cash"})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{type:"button",onClick:de,className:"button-cancel",children:"Cancel"}),i.jsx("button",{type:"submit",className:"button-submit",children:"Record Payment"})]})]})]})})]})},l6e=()=>{const e=Mt(),[t,n]=j.useState([]),[r,a]=j.useState(!0),[,s]=j.useState(null),[o,l]=j.useState(!1),[c,u]=j.useState(null),[f,p]=j.useState({name:"",description:"",columns:[]}),y=async()=>{a(!0);try{const C=await ce("/api/custom-tables");if(!C.ok)throw new Error("Failed to fetch tables");const O=await C.json();n(O)}catch(C){s(C.message)}finally{a(!1)}};j.useEffect(()=>{y()},[]);const v=C=>{C?(u(C),p({name:C.name,description:C.description,columns:[...C.columns]})):(u(null),p({name:"",description:"",columns:[]})),l(!0)},x=async()=>{try{const C=c?`/api/custom-tables/${c.id}`:"/api/custom-tables";if(!(await ce(C,{method:c?"PUT":"POST",body:JSON.stringify(f)})).ok)throw new Error("Failed to save table");l(!1),y()}catch(C){alert(C.message)}},b=async C=>{if(confirm("Are you sure? This will delete all data in this table!"))try{await ce(`/api/custom-tables/${C}`,{method:"DELETE"}),y()}catch(O){alert(O.message)}},w=()=>{p(C=>({...C,columns:[...C.columns,{key:`col_${Date.now()}`,label:"New Column",type:"text"}]}))},_=(C,O,E)=>{const P=[...f.columns];P[C]={...P[C],[O]:E},O==="label"&&(P[C].key=E.toLowerCase().replace(/[^a-z0-9]/g,"_")),p(I=>({...I,columns:P}))},T=C=>{p(O=>({...O,columns:O.columns.filter((E,P)=>P!==C)}))};return i.jsxs("div",{className:"custom-tables-container",children:[i.jsxs("div",{className:"header-section",children:[i.jsxs("h1",{children:[i.jsx(Bb,{size:24})," Custom Tables Manager"]}),i.jsxs("button",{className:"primary-button",onClick:()=>v(),children:[i.jsx(Yr,{size:16})," Create New Table"]})]}),r?i.jsx("p",{children:"Loading..."}):i.jsx("div",{className:"tables-grid",children:t.map(C=>i.jsxs("div",{className:"table-card",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("h3",{children:C.name}),i.jsxs("div",{className:"actions",children:[i.jsx("button",{onClick:()=>v(C),children:i.jsx(Pa,{size:16})}),i.jsx("button",{onClick:()=>b(C.id),className:"danger",children:i.jsx(zr,{size:16})})]})]}),i.jsx("p",{className:"description",children:C.description||"No description"}),i.jsxs("div",{className:"column-preview",children:[C.columns.length," columns defined"]}),i.jsx("button",{className:"secondary-button",onClick:()=>e(`/custom-tables/${C.id}`),children:"View Data & Records"})]},C.id))}),o&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content large-modal",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:c?"Edit Table":"Create New Table"}),i.jsx("button",{onClick:()=>l(!1),children:i.jsx(zt,{size:20})})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Table Name"}),i.jsx("input",{value:f.name,onChange:C=>p({...f,name:C.target.value}),placeholder:"e.g., Equipment Log"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Description"}),i.jsx("textarea",{value:f.description,onChange:C=>p({...f,description:C.target.value})})]}),i.jsxs("div",{className:"columns-section",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h3",{children:"Columns"}),i.jsx("button",{onClick:w,className:"icon-button",children:i.jsx(Yr,{size:16})})]}),f.columns.map((C,O)=>i.jsxs("div",{className:"column-row",children:[i.jsx("input",{value:C.label,onChange:E=>_(O,"label",E.target.value),placeholder:"Column Name"}),i.jsxs("select",{value:C.type,onChange:E=>_(O,"type",E.target.value),children:[i.jsx("option",{value:"text",children:"Text"}),i.jsx("option",{value:"number",children:"Number"}),i.jsx("option",{value:"date",children:"Date"}),i.jsx("option",{value:"boolean",children:"Yes/No"})]}),i.jsx("button",{onClick:()=>T(O),className:"danger",children:i.jsx(zr,{size:14})})]},O))]})]}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{onClick:x,className:"primary-button",children:"Save Table"})})]})})]})},c6e=()=>{const{id:e}=Ai(),t=Mt(),[n,r]=j.useState(null),[a,s]=j.useState([]),[o,l]=j.useState(!0),[c,u]=j.useState(null),[f,p]=j.useState(!1),[y,v]=j.useState(!1),[x,b]=j.useState(null),[w,_]=j.useState({});j.useEffect(()=>{e&&T()},[e]);const T=async()=>{l(!0);try{const I=await ce(`/api/custom-tables/${e}`);if(!I.ok)throw new Error("Failed to fetch table definition");const F=await I.json();r(F);const $=await ce(`/api/custom-tables/${e}/records`);if(!$.ok)throw new Error("Failed to fetch records");const z=await $.json();s(z)}catch(I){u(I.message)}finally{l(!1)}},C=I=>{I?(b(I),_({...I.data})):(b(null),_({})),v(!0)},O=async()=>{try{const I=x?`/api/custom-tables/records/${x.id}`:`/api/custom-tables/${e}/records`;if(!(await ce(I,{method:x?"PUT":"POST",body:JSON.stringify({data:w})})).ok)throw new Error("Failed to save record");v(!1),T()}catch(I){alert(I.message)}},E=async I=>{if(confirm("Delete this record?"))try{await ce(`/api/custom-tables/records/${I}`,{method:"DELETE"}),T()}catch(F){alert(F.message)}},P=I=>{const F=w[I.key]||"";switch(I.type){case"boolean":return i.jsxs("select",{value:F,onChange:$=>_({...w,[I.key]:$.target.value}),children:[i.jsx("option",{value:"",children:"Select..."}),i.jsx("option",{value:"true",children:"Yes"}),i.jsx("option",{value:"false",children:"No"})]});case"number":return i.jsx("input",{type:"number",value:F,onChange:$=>_({...w,[I.key]:$.target.value})});case"date":return i.jsx("input",{type:"date",value:F,onChange:$=>_({...w,[I.key]:$.target.value})});default:return i.jsx("input",{type:"text",value:F,onChange:$=>_({...w,[I.key]:$.target.value})})}};return o?i.jsx("div",{className:"p-4",children:"Loading..."}):c||!n?i.jsxs("div",{className:"p-4 error",children:["Error: ",c||"Table not found"]}):i.jsxs("div",{className:"custom-tables-container",children:[i.jsxs("div",{className:"header-section",children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[i.jsx("button",{onClick:()=>t("/custom-tables"),className:"icon-button",children:i.jsx(rn,{size:20})}),i.jsx("h1",{children:n.name})]}),i.jsxs("div",{className:"view-mode-toggle",children:[i.jsxs("button",{onClick:()=>p(!1),className:`view-mode-btn ${f?"":"active"}`,title:"List View",children:[i.jsx($b,{size:18})," List"]}),i.jsxs("button",{onClick:()=>p(!0),className:`view-mode-btn ${f?"active":""}`,title:"Excel Mode (Edit)",children:[i.jsx(bf,{size:18})," Excel"]})]}),i.jsxs("button",{className:"primary-button",onClick:()=>C(),children:[i.jsx(Yr,{size:16})," Add Record"]})]}),i.jsx("div",{className:"table-wrapper",style:{background:"var(--bg-card)",borderRadius:"12px",padding:"20px",overflowX:"auto"},children:f?i.jsx(Kb,{columns:n.columns.map(I=>({key:I.key,label:I.label,editable:!0,type:I.type})),data:a.map(I=>({...I.data,id:I.id})),editable:!0,showRowNumbers:!0,title:n.name,onSave:async I=>{const F=I.map(async $=>{const z=a.find(L=>L.id===$.id);if(z&&JSON.stringify(z.data)!==JSON.stringify($)){const{id:L,...H}=$;if(JSON.stringify(z.data)!==JSON.stringify(H))return ce(`/api/custom-tables/records/${$.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:H})})}});try{await Promise.all(F),T()}catch($){alert("Error saving changes"),console.error($)}}}):i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[i.jsx("thead",{children:i.jsxs("tr",{children:[n.columns.map(I=>i.jsx("th",{style:{textAlign:"left",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:I.label},I.key)),i.jsx("th",{style:{width:"100px",padding:"12px",borderBottom:"1px solid var(--border-color)"},children:"Actions"})]})}),i.jsx("tbody",{children:a.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:n.columns.length+1,style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"No records yet"})}):a.map(I=>i.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.columns.map(F=>i.jsx("td",{style:{padding:"12px"},children:F.type==="boolean"?I.data[F.key]==="true"?"Yes":"No":String(I.data[F.key]||"-")},F.key)),i.jsx("td",{style:{padding:"12px"},children:i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{onClick:()=>C(I),className:"icon-button",children:i.jsx(Pa,{size:16})}),i.jsx("button",{onClick:()=>E(I.id),className:"icon-button",style:{color:"#dc3545"},children:i.jsx(zr,{size:16})})]})})]},I.id))})]})}),y&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content large-modal",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:x?"Edit Record":"Add New Record"}),i.jsx("button",{onClick:()=>v(!1),children:i.jsx(zt,{size:20})})]}),i.jsx("div",{className:"modal-body",children:n.columns.map(I=>i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:I.label}),P(I)]},I.key))}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{onClick:O,className:"primary-button",children:"Save Record"})})]})})]})},u6e=()=>{const[e,t]=j.useState([]),[n,r]=j.useState(!0),[a,s]=j.useState(""),o=Mt();j.useEffect(()=>{l()},[]);const l=async()=>{try{const p=await ce("/api/dashboards");if(p.ok){const y=await p.json();t(y)}}catch(p){console.error("Error fetching dashboards:",p)}finally{r(!1)}},c=async(p,y)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this dashboard?"))try{await ce(`/api/dashboards/${y}`,{method:"DELETE"}),t(e.filter(v=>v.id!==y))}catch(v){console.error("Error deleting dashboard:",v)}},u=p=>{try{const y=new Date(p);return y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:y.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}catch{return""}},f=e.filter(p=>p.name.toLowerCase().includes(a.toLowerCase())||p.description&&p.description.toLowerCase().includes(a.toLowerCase()));return i.jsxs("div",{className:"custom-dashboards-container",children:[i.jsxs("div",{className:"cdp-header",children:[i.jsxs("div",{className:"cdp-title-row",children:[i.jsxs("div",{className:"cdp-title",children:[i.jsx("div",{className:"cdp-icon",children:i.jsx(bf,{size:20})}),i.jsxs("div",{children:[i.jsx("h1",{children:"Custom Dashboards"}),i.jsxs("span",{className:"cdp-subtitle",children:[e.length," dashboard",e.length!==1?"s":""]})]})]}),i.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[i.jsx(Yr,{size:16}),i.jsx("span",{className:"cdp-btn-text",children:"Create"})]})]}),e.length>0&&i.jsxs("div",{className:"cdp-search",children:[i.jsx(Un,{size:16}),i.jsx("input",{type:"text",placeholder:"Search dashboards...",value:a,onChange:p=>s(p.target.value)})]})]}),i.jsx("div",{className:"cdp-content",children:n?i.jsx("div",{className:"cdp-grid",children:[1,2,3,4,5,6].map(p=>i.jsxs("div",{className:"cdp-card",style:{cursor:"default"},children:[i.jsxs("div",{className:"cdp-card-header",children:[i.jsx(ee,{width:18,height:18,variant:"circular"}),i.jsx(ee,{width:80,height:12})]}),i.jsxs("div",{className:"cdp-card-body",children:[i.jsx(ee,{width:"70%",height:24,style:{marginBottom:"8px"}}),i.jsx(ee,{width:"90%",height:16})]}),i.jsxs("div",{className:"cdp-card-footer",style:{borderTop:"none"},children:[i.jsx(ee,{width:60,height:32}),i.jsx(ee,{width:60,height:32}),i.jsx(ee,{width:32,height:32})]})]},p))}):f.length===0?i.jsxs("div",{className:"cdp-empty",children:[i.jsx("div",{className:"cdp-empty-icon",children:i.jsx(rg,{size:48})}),a?i.jsxs(i.Fragment,{children:[i.jsx("h3",{children:"No results found"}),i.jsx("p",{children:"Try a different search term"})]}):i.jsxs(i.Fragment,{children:[i.jsx("h3",{children:"No dashboards yet"}),i.jsx("p",{children:"Create your first custom dashboard to get started"}),i.jsxs("button",{className:"cdp-create-btn",onClick:()=>o("/dashboards/new"),children:[i.jsx(Yr,{size:16})," Create Dashboard"]})]})]}):i.jsx("div",{className:"cdp-grid",children:f.map(p=>i.jsxs("div",{className:"cdp-card",onClick:()=>o(`/dashboards/${p.id}`),children:[i.jsxs("div",{className:"cdp-card-header",children:[i.jsx("div",{className:"cdp-card-icon",children:i.jsx(rg,{size:18})}),i.jsx("div",{className:"cdp-card-meta",children:p.created_at&&i.jsxs("span",{className:"cdp-card-date",children:[i.jsx(pi,{size:12}),u(p.created_at)]})})]}),i.jsxs("div",{className:"cdp-card-body",children:[i.jsx("h3",{children:p.name}),i.jsx("p",{children:p.description||"No description"})]}),i.jsxs("div",{className:"cdp-card-footer",children:[i.jsxs("button",{className:"cdp-action-btn cdp-view-btn",onClick:y=>{y.stopPropagation(),o(`/dashboards/${p.id}`)},children:[i.jsx($m,{size:14}),i.jsx("span",{children:"View"})]}),i.jsxs("button",{className:"cdp-action-btn cdp-edit-btn",onClick:y=>{y.stopPropagation(),o(`/dashboards/${p.id}/edit`)},children:[i.jsx(Pa,{size:14}),i.jsx("span",{children:"Edit"})]}),i.jsx("button",{className:"cdp-action-btn cdp-delete-btn",onClick:y=>c(y,p.id),children:i.jsx(zr,{size:14})})]})]},p.id))})})]})},d6e=({isOpen:e,onClose:t,onConfirm:n})=>{const[r,a]=j.useState({}),[s,o]=j.useState(""),[l,c]=j.useState(""),[u,f]=j.useState([]),[p,y]=j.useState([]),[v,x]=j.useState(!1);j.useEffect(()=>{e&&b()},[e]);const b=async()=>{x(!0);try{const I=await ce("/api/dashboards/table-relations");if(I.ok){const F=await I.json();a(F);const $=Object.keys(F);$.length>0&&o($[0])}}catch(I){console.error("Error fetching table relations:",I)}finally{x(!1)}},w=I=>{o(I),c(""),f([]),y([])},_=I=>{c(I),y([])},T=(I,F,$)=>{I.includes($)?F(I.filter(z=>z!==$)):F([...I,$])},C=()=>{var I,F;if(!s||!l){alert("Please select both primary and related tables");return}if(u.length===0&&p.length===0){alert("Please select at least one column");return}n({primary:s,related:l,primaryColumns:u,relatedColumns:p,primaryLabel:((I=r[s])==null?void 0:I.label)||s,relatedLabel:((F=r[l])==null?void 0:F.label)||l}),t()};if(!e)return null;const O=r[s],E=(O==null?void 0:O.relations)||{},P=r[l];return i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h3",{children:[i.jsx($q,{size:18})," Join Tables Builder"]}),i.jsx("button",{onClick:t,className:"close-button",children:i.jsx(zt,{size:20})})]}),v?i.jsx("div",{children:"Loading tables..."}):i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",padding:"20px"},children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx("strong",{children:"Step 1:"})," Select Primary Table"]}),i.jsx("select",{value:s,onChange:I=>w(I.target.value),style:{width:"100%",padding:"8px"},children:Object.entries(r).filter(([I,F])=>Object.keys(F.relations).length>0).map(([I,F])=>i.jsx("option",{value:I,children:F.label},I))})]}),s&&Object.keys(E).length>0&&i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx("strong",{children:"Step 2:"})," Select Related Table"]}),i.jsxs("select",{value:l,onChange:I=>_(I.target.value),style:{width:"100%",padding:"8px"},children:[i.jsx("option",{value:"",children:"-- Select --"}),Object.entries(E).map(([I,F])=>i.jsxs("option",{value:I,children:[F.label," (via ",F.foreignKey,")"]},I))]})]}),s&&O&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:i.jsxs("strong",{children:["Columns from ",O.label,":"]})}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px"},children:O.columns.map(I=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",background:u.includes(I)?"#e0f0ff":"#f0f0f0",padding:"4px 8px",borderRadius:"4px"},children:[i.jsx("input",{type:"checkbox",checked:u.includes(I),onChange:()=>T(u,f,I)}),I]},I))})]}),l&&P&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:i.jsxs("strong",{children:["Columns from ",P.label,":"]})}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px"},children:P.columns.map(I=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",background:p.includes(I)?"#e0ffe0":"#f0f0f0",padding:"4px 8px",borderRadius:"4px"},children:[i.jsx("input",{type:"checkbox",checked:p.includes(I),onChange:()=>T(p,y,I)}),I]},I))})]}),u.length>0||p.length>0?i.jsxs("div",{style:{background:"#f8f9fa",padding:"10px",borderRadius:"4px"},children:[i.jsx("strong",{children:"Preview Columns:"}),i.jsxs("div",{style:{marginTop:"5px",fontSize:"0.9em"},children:[u.map(I=>i.jsxs("span",{style:{marginRight:"8px",color:"#0066cc"},children:[O==null?void 0:O.label,".",I]},I)),p.map(I=>i.jsxs("span",{style:{marginRight:"8px",color:"#009900"},children:[P==null?void 0:P.label,".",I]},I))]})]}):null]}),i.jsxs("div",{className:"modal-actions",style:{padding:"15px",borderTop:"1px solid #eee"},children:[i.jsx("button",{onClick:t,children:"Cancel"}),i.jsx("button",{className:"primary-button",onClick:C,disabled:!l,children:"Create Joined Widget"})]})]})})},h6e=({isOpen:e,onClose:t,onCreated:n})=>{const[r,a]=j.useState(""),[s,o]=j.useState(""),[l,c]=j.useState([{key:"name",label:"Name",type:"text"}]),[u,f]=j.useState(!1),p=()=>{c([...l,{key:"",label:"",type:"text"}])},y=b=>{c(l.filter((w,_)=>_!==b))},v=(b,w,_)=>{const T=[...l];T[b]={...T[b],[w]:_},w==="label"&&!T[b].key&&(T[b].key=_.toLowerCase().replace(/\s+/g,"_")),c(T)},x=async()=>{if(!r.trim()){alert("Table name is required");return}if(l.length===0||l.some(b=>!b.key||!b.label)){alert("All columns must have a key and label");return}f(!0);try{(await ce("/api/custom-tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,description:s,columns:l})})).ok?(n(),t(),a(""),o(""),c([{key:"name",label:"Name",type:"text"}])):alert("Failed to create table")}catch(b){console.error("Error creating table:",b),alert("Error creating table")}finally{f(!1)}};return e?i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content create-table-modal-content",children:[i.jsxs("div",{className:"create-table-header",children:[i.jsxs("h3",{children:[i.jsx(Bb,{size:20})," Create Custom Table"]}),i.jsx("button",{onClick:t,className:"close-btn",children:i.jsx(zt,{size:20})})]}),i.jsxs("div",{className:"form-content",children:[i.jsxs("div",{className:"form-field-group",children:[i.jsx("label",{children:"Table Name *"}),i.jsx("input",{type:"text",value:r,onChange:b=>a(b.target.value),placeholder:"e.g., Patient Notes, Appointments",className:"modal-input"})]}),i.jsxs("div",{className:"form-field-group",children:[i.jsx("label",{children:"Description"}),i.jsx("input",{type:"text",value:s,onChange:b=>o(b.target.value),placeholder:"Optional description",className:"modal-input"})]}),i.jsxs("div",{className:"form-field-group",children:[i.jsx("label",{children:"Columns"}),i.jsx("div",{className:"columns-container",children:l.map((b,w)=>i.jsxs("div",{className:"column-row",children:[i.jsx("input",{type:"text",value:b.label,onChange:_=>v(w,"label",_.target.value),placeholder:"Column label",className:"modal-input column-label-input"}),i.jsx("input",{type:"text",value:b.key,onChange:_=>v(w,"key",_.target.value),placeholder:"key",className:"modal-input column-key-input"}),i.jsxs("select",{value:b.type,onChange:_=>v(w,"type",_.target.value),className:"column-type-select",children:[i.jsx("option",{value:"text",children:"Text"}),i.jsx("option",{value:"number",children:"Number"}),i.jsx("option",{value:"date",children:"Date"}),i.jsx("option",{value:"boolean",children:"Yes/No"})]}),i.jsx("button",{onClick:()=>y(w),className:"remove-col-btn",disabled:l.length<=1,children:i.jsx(zr,{size:16})})]},w))}),i.jsxs("button",{onClick:p,className:"add-col-btn",children:[i.jsx(Yr,{size:14})," Add Column"]})]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{onClick:t,className:"cancel-button",children:"Cancel"}),i.jsx("button",{onClick:x,disabled:u,className:"create-button",children:u?"Creating...":"Create Table"})]})]})}):null},Oz=()=>{const{id:e}=Ai(),t=Mt(),n=!!e,[r,a]=j.useState(""),[s,o]=j.useState(""),[l,c]=j.useState([]),[u,f]=j.useState(!1),[p,y]=j.useState([]),[v,x]=j.useState(!1),[b,w]=j.useState("stat"),[_,T]=j.useState(""),[C,O]=j.useState("api:patients"),[E,P]=j.useState([]),[I,F]=j.useState(!1),[$,z]=j.useState(!1);j.useEffect(()=>{L(),n&&H()},[e]);const L=async()=>{try{const G=await ce("/api/dashboards/data-sources");if(G.ok){const B=await G.json();y(B),B.length>0&&O(B[0].key)}}catch(G){console.error("Error fetching data sources:",G)}},H=async()=>{try{const G=await ce(`/api/dashboards/${e}`);if(G.ok){const B=await G.json();a(B.name),o(B.description),c(B.widgets||[])}}catch(G){console.error("Error fetching dashboard:",G)}},V=async()=>{if(!r.trim())return alert("Name is required");f(!0);try{const G={name:r,description:s,widgets:l},B=n?`/api/dashboards/${e}`:"/api/dashboards";(await ce(B,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)})).ok?t("/dashboards"):alert("Failed to save dashboard")}catch(G){console.error("Error saving dashboard:",G)}finally{f(!1)}},ne=()=>{var fe;const G=p.find(me=>me.key===C),B={id:Date.now().toString(),type:b,title:_||(G==null?void 0:G.label)||"New Widget",dataSource:C,config:{columns:E.length>0?E:((fe=G==null?void 0:G.columns)==null?void 0:fe.slice(0,3))||[]}};c([...l,B]),x(!1),T(""),P([])},Z=G=>{c(l.filter(B=>B.id!==G))},q=G=>{O(G),P([])},K=p.find(G=>G.key===C),se=G=>{const B={id:Date.now().toString(),type:"table",title:`${G.primaryLabel} + ${G.relatedLabel}`,dataSource:`dynamic:${G.primary}:${G.related}`,config:{primaryColumns:G.primaryColumns,relatedColumns:G.relatedColumns}};c([...l,B])};return i.jsxs("div",{className:"dashboard-builder-container",children:[i.jsxs("div",{className:"builder-header",children:[i.jsxs("button",{className:"back-btn",onClick:()=>t("/dashboards"),children:[i.jsx(rn,{size:16})," Back"]}),i.jsxs("div",{className:"title-inputs",children:[i.jsx("input",{type:"text",placeholder:"Dashboard Name",value:r,onChange:G=>a(G.target.value),className:"dashboard-name-input"}),i.jsx("input",{type:"text",placeholder:"Description (Optional)",value:s,onChange:G=>o(G.target.value),className:"dashboard-desc-input"})]}),i.jsxs("button",{className:"primary-button",onClick:V,disabled:u,children:[i.jsx(Xs,{size:16})," ",u?"Saving...":"Save Dashboard"]})]}),i.jsx("div",{className:"widgets-area",children:l.length===0?i.jsxs("div",{className:"empty-canvas",children:[i.jsx("p",{children:"Canvas is empty. Add a widget to start."}),i.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",justifyContent:"center"},children:[i.jsxs("button",{onClick:()=>x(!0),className:"add-widget-btn",children:[i.jsx(Yr,{size:16})," Add Widget"]}),i.jsxs("button",{onClick:()=>F(!0),className:"add-widget-btn",style:{background:"#2196F3"},children:[i.jsx($q,{size:16})," Create Joined Widget"]}),i.jsxs("button",{onClick:()=>z(!0),className:"add-widget-btn",style:{background:"#4CAF50"},children:[i.jsx(Bb,{size:16})," Create Custom Table"]})]})]}):i.jsxs("div",{className:"widgets-grid",children:[l.map(G=>i.jsxs("div",{className:"widget-wrapper",children:[i.jsx("div",{className:"widget-actions-overlay",children:i.jsx("button",{onClick:()=>Z(G.id),className:"remove-widget-btn",children:i.jsx(zr,{size:14})})}),i.jsx(uI,{widget:G})]},G.id)),i.jsxs("div",{className:"add-more-card",onClick:()=>x(!0),children:[i.jsx(Yr,{size:24}),i.jsx("span",{children:"Add Widget"})]})]})}),v&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",children:[i.jsx("h3",{children:"Add Widget"}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Title (Optional)"}),i.jsx("input",{type:"text",placeholder:"Leave blank for auto-title",value:_,onChange:G=>T(G.target.value)})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Type"}),i.jsxs("select",{value:b,onChange:G=>w(G.target.value),children:[i.jsx("option",{value:"stat",children:"Statistic (Count)"}),i.jsx("option",{value:"table",children:"Table (List)"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Data Source"}),i.jsxs("select",{value:C,onChange:G=>q(G.target.value),children:[i.jsx("optgroup",{label:"Single Tables",children:p.filter(G=>!G.isCustom&&!G.isJoin).map(G=>i.jsx("option",{value:G.key,children:G.label},G.key))}),p.some(G=>G.isJoin)&&i.jsx("optgroup",{label:"Joined Tables (Multi-Table)",children:p.filter(G=>G.isJoin).map(G=>i.jsx("option",{value:G.key,children:G.label},G.key))}),p.some(G=>G.isCustom)&&i.jsx("optgroup",{label:"Custom Tables",children:p.filter(G=>G.isCustom).map(G=>i.jsx("option",{value:G.key,children:G.label},G.key))})]}),K&&i.jsx("small",{style:{color:"#666"},children:K.description})]}),b==="table"&&(K==null?void 0:K.columns)&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Columns to Display (select multiple)"}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:K.columns.map(G=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:E.includes(G),onChange:B=>{B.target.checked?P([...E,G]):P(E.filter(fe=>fe!==G))}}),G]},G))})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{onClick:()=>x(!1),children:"Cancel"}),i.jsx("button",{className:"primary-button",onClick:ne,children:"Add"})]})]})}),i.jsx(d6e,{isOpen:I,onClose:()=>F(!1),onConfirm:se}),i.jsx(h6e,{isOpen:$,onClose:()=>z(!1),onCreated:()=>L()})]})},f6e=()=>{const{id:e}=Ai(),t=Mt(),[n,r]=j.useState(null);if(j.useEffect(()=>{(async()=>{try{const o=await ce(`/api/dashboards/${e}`);if(o.ok){const l=await o.json();r(l)}}catch(o){console.error("Error fetching dashboard:",o)}})()},[e]),!n)return i.jsx("div",{className:"temp-dash-empty",children:"Loading..."});const a=n.widgets||[];return i.jsxs("div",{className:"saved-dash-container",children:[i.jsxs("div",{className:"saved-dash-header",children:[i.jsxs("div",{className:"saved-dash-title-group",children:[i.jsx("button",{className:"saved-dash-back-btn",onClick:()=>t("/dashboards"),children:i.jsx(rn,{size:16})}),i.jsx("div",{className:"saved-dash-icon",children:i.jsx(rg,{size:16})}),i.jsxs("div",{className:"saved-dash-title-text",children:[i.jsx("h2",{children:n.name}),n.description&&i.jsx("span",{className:"saved-dash-description",children:n.description})]})]}),i.jsx("div",{className:"saved-dash-actions",children:i.jsxs("button",{className:"saved-dash-edit-btn",onClick:()=>t(`/dashboards/${e}/edit`),children:[i.jsx(Pa,{size:12})," Edit"]})})]}),i.jsx("div",{className:"saved-dash-body",children:a.length===0?i.jsx("div",{className:"temp-dash-empty",children:"No widgets in this dashboard. Click Edit to add some!"}):i.jsx("div",{className:"temp-dash-grid",children:a.map((s,o)=>i.jsx(uI,{widget:s,autoHideEmptyColumns:!0},s.id||`view-widget-${o}`))})})]})},bk=["#8b5cf6","#3b82f6","#06b6d4","#10b981","#22c55e","#f59e0b","#f97316","#ef4444","#ec4899","#a855f7"],p6e=()=>{const[e,t]=j.useState([]),[n,r]=j.useState(!0),[a,s]=j.useState(null),[o,l]=j.useState(null),[c,u]=j.useState(!1),[f,p]=j.useState({name:"",key:"",color:"#6b7280",description:""}),[y,v]=j.useState(!1),x=async()=>{r(!0),s(null);try{const $=await ce("/api/clinic-roles");if($.ok){const z=await $.json();t(z)}else s("Failed to load roles")}catch{s("Failed to connect to server")}finally{r(!1)}};j.useEffect(()=>{x()},[]);const b=$=>$.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),w=$=>{p(z=>({...z,name:$,key:o?z.key:b($)}))},_=async()=>{if(f.name.trim()){v(!0);try{const $=await ce("/api/clinic-roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),key:f.key||b(f.name),color:f.color,description:f.description.trim()||null})});if($.ok)await x(),u(!1),p({name:"",key:"",color:"#6b7280",description:""});else{const z=await $.json();s(z.message||"Failed to create role")}}catch{s("Failed to create role")}finally{v(!1)}}},T=async()=>{if(!(!o||!f.name.trim())){v(!0);try{const $=await ce(`/api/clinic-roles/${o.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),color:f.color,description:f.description.trim()||null})});if($.ok)await x(),l(null),p({name:"",key:"",color:"#6b7280",description:""});else{const z=await $.json();s(z.message||"Failed to update role")}}catch{s("Failed to update role")}finally{v(!1)}}},C=async $=>{if(!$.isSystem&&window.confirm(`Delete role "${$.name}"? This cannot be undone.`))try{const z=await ce(`/api/clinic-roles/${$.id}`,{method:"DELETE"});if(z.ok)await x();else{const L=await z.json();s(L.message||"Failed to delete role")}}catch{s("Failed to delete role")}},O=$=>{l($),p({name:$.name,key:$.key,color:$.color,description:$.description||""}),u(!1)},E=()=>{u(!0),l(null),p({name:"",key:"",color:bk[Math.floor(Math.random()*bk.length)],description:""})},P=()=>{u(!1),l(null),p({name:"",key:"",color:"#6b7280",description:""})},I=e.filter($=>$.isSystem),F=e.filter($=>!$.isSystem);return i.jsxs("div",{className:"role-management-page",children:[i.jsxs("div",{className:"role-management-header",children:[i.jsxs("div",{className:"header-title",children:[i.jsx(ag,{size:28}),i.jsxs("div",{children:[i.jsx("h1",{children:"Role Management"}),i.jsx("p",{children:"Manage custom roles for your clinic staff"})]})]}),i.jsxs("button",{className:"create-role-btn",onClick:E,disabled:c,children:[i.jsx(Yr,{size:18}),"Create Custom Role"]})]}),a&&i.jsxs("div",{className:"role-error-banner",children:[i.jsx(Wr,{size:18}),a,i.jsx("button",{onClick:()=>s(null),children:i.jsx(zt,{size:16})})]}),(c||o)&&i.jsxs("div",{className:"role-form-card",children:[i.jsx("h3",{children:o?"Edit Role":"Create New Role"}),i.jsxs("div",{className:"role-form",children:[i.jsxs("div",{className:"form-row",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Role Name *"}),i.jsx("input",{type:"text",value:f.name,onChange:$=>w($.target.value),placeholder:"e.g., Senior Doctor, Ward Nurse"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Role Key"}),i.jsx("input",{type:"text",value:f.key,onChange:$=>p(z=>({...z,key:$.target.value})),placeholder:"auto-generated",disabled:!!o})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{children:"Description"}),i.jsx("input",{type:"text",value:f.description,onChange:$=>p(z=>({...z,description:$.target.value})),placeholder:"Brief description of role responsibilities"})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{children:[i.jsx(jZ,{size:14}),"Color"]}),i.jsxs("div",{className:"color-picker",children:[bk.map($=>i.jsx("button",{className:`color-option ${f.color===$?"selected":""}`,style:{background:$},onClick:()=>p(z=>({...z,color:$}))},$)),i.jsx("input",{type:"color",value:f.color,onChange:$=>p(z=>({...z,color:$.target.value})),className:"custom-color-input"})]})]}),i.jsxs("div",{className:"form-actions",children:[i.jsx("button",{className:"cancel-btn",onClick:P,children:"Cancel"}),i.jsxs("button",{className:"save-btn",onClick:o?T:_,disabled:y||!f.name.trim(),children:[i.jsx(Tl,{size:16}),y?"Saving...":o?"Update Role":"Create Role"]})]})]})]}),i.jsxs("div",{className:"roles-container",children:[i.jsxs("div",{className:"roles-section",children:[i.jsx("h3",{children:"System Roles"}),i.jsx("p",{className:"section-desc",children:"Default roles - can be customized but not deleted"}),n?i.jsx("div",{className:"roles-grid",children:[1,2,3].map($=>i.jsxs("div",{className:"role-card system",children:[i.jsxs("div",{className:"role-header",style:{marginBottom:"10px"},children:[i.jsx(ee,{variant:"circular",width:12,height:12,style:{marginRight:"8px"}}),i.jsx(ee,{width:100,height:20})]}),i.jsx(ee,{width:80,height:16,style:{marginBottom:"10px"}}),i.jsx(ee,{width:"100%",height:20}),i.jsx("div",{className:"role-actions",style:{marginTop:"15px"},children:i.jsx(ee,{width:60,height:24})})]},$))}):i.jsx("div",{className:"roles-grid",children:I.map($=>i.jsxs("div",{className:"role-card system",children:[i.jsxs("div",{className:"role-header",children:[i.jsx("span",{className:"role-color-dot",style:{background:$.color}}),i.jsx("span",{className:"role-name",children:$.name}),i.jsx("span",{className:"system-badge",children:"System"})]}),i.jsx("div",{className:"role-key",children:$.key}),$.description&&i.jsx("div",{className:"role-description",children:$.description}),i.jsx("div",{className:"role-actions",children:i.jsxs("button",{className:"edit-role-btn",onClick:()=>O($),children:[i.jsx(xc,{size:14}),"Edit"]})})]},$.id))})]}),i.jsxs("div",{className:"roles-section",children:[i.jsx("h3",{children:"Custom Roles"}),i.jsx("p",{className:"section-desc",children:"Roles created for your clinic"}),F.length===0?i.jsxs("div",{className:"no-roles",children:[i.jsx(ag,{size:32}),i.jsx("p",{children:"No custom roles created yet"}),i.jsxs("button",{onClick:E,children:[i.jsx(Yr,{size:16}),"Create your first custom role"]})]}):i.jsx("div",{className:"roles-grid",children:F.map($=>i.jsxs("div",{className:"role-card custom",children:[i.jsxs("div",{className:"role-header",children:[i.jsx("span",{className:"role-color-dot",style:{background:$.color}}),i.jsx("span",{className:"role-name",children:$.name})]}),i.jsx("div",{className:"role-key",children:$.key}),$.description&&i.jsx("div",{className:"role-description",children:$.description}),i.jsxs("div",{className:"role-actions",children:[i.jsxs("button",{className:"edit-role-btn",onClick:()=>O($),children:[i.jsx(xc,{size:14}),"Edit"]}),i.jsxs("button",{className:"delete-role-btn",onClick:()=>C($),children:[i.jsx(zr,{size:14}),"Delete"]})]})]},$.id))})]})]})]})},m6e="_container_16815_47",g6e="_progressBar_16815_67",y6e="_sidebar_16815_97",v6e="_sidebarTitle_16815_161",x6e="_searchBox_16815_193",b6e="_searchInput_16815_203",j6e="_searchIcon_16815_237",w6e="_navSection_16815_255",S6e="_navSectionTitle_16815_263",N6e="_navLink_16815_287",_6e="_activeNavLink_16815_367",C6e="_navLinkIcon_16815_387",T6e="_content_16815_409",E6e="_header_16815_425",A6e="_headerContent_16815_493",k6e="_title_16815_503",P6e="_subtitle_16815_563",O6e="_headerBadges_16815_575",D6e="_headerBadge_16815_575",M6e="_section_16815_625",I6e="_sectionTitle_16815_665",R6e="_sectionTitleIcon_16815_689",L6e="_sectionContent_16815_713",F6e="_featureList_16815_751",$6e="_featureItem_16815_767",B6e="_featureIcon_16815_799",z6e="_featureText_16815_813",q6e="_infoBox_16815_839",U6e="_infoBoxTitle_16815_881",V6e="_infoBoxContent_16815_903",H6e="_workflowList_16815_917",G6e="_kbd_16815_959",W6e="_moduleLinkBtn_16815_1179",K6e="_uiGrid_16815_1231",Y6e="_uiCard_16815_1245",Q6e="_uiLabel_16815_1277",X6e="_demoBtn_16815_1301",J6e="_demoBtnPrimary_16815_1323",Z6e="_demoBtnSecondary_16815_1335",eFe="_demoBtnDanger_16815_1347",tFe="_demoBadge_16815_1361",nFe="_demoBadgeSuccess_16815_1385",rFe="_demoBadgeWarning_16815_1397",iFe="_demoBadgeError_16815_1409",aFe="_iconRow_16815_1421",sFe="_faqList_16815_1455",oFe="_faqItem_16815_1469",lFe="_faqQuestion_16815_1493",cFe="_faqIcon_16815_1523",uFe="_faqIconOpen_16815_1533",dFe="_faqAnswer_16815_1541",hFe="_footer_16815_1587",fFe="_footerText_16815_1605",pFe="_footerBrand_16815_1617",mFe="_floatingParticles_16815_1641",gFe="_particle_16815_1663",yFe="_headerLabel_16815_1817",vFe="_waveEmoji_16815_1845",xFe="_headerActions_16815_1857",bFe="_headerBtn_16815_1871",jFe="_headerBtnSecondary_16815_1913",wFe="_statsSection_16815_1963",SFe="_statCard_16815_1977",NFe="_statIcon_16815_2009",_Fe="_statValue_16815_2039",CFe="_statLabel_16815_2053",TFe="_quickTipsSection_16815_2073",EFe="_quickTipsHeader_16815_2089",AFe="_tipNav_16815_2123",kFe="_tipCard_16815_2185",PFe="_tipIcon_16815_2231",OFe="_tipContent_16815_2251",DFe="_tipIndicators_16815_2279",MFe="_tipIndicator_16815_2279",IFe="_tipIndicatorActive_16815_2323",RFe="_shortcutsGrid_16815_2343",LFe="_shortcutCard_16815_2357",FFe="_shortcutCardActive_16815_2383",$Fe="_shortcutKeys_16815_2397",BFe="_kbdPlus_16815_2411",zFe="_kbdActive_16815_2423",qFe="_shortcutInfo_16815_2437",UFe="_shortcutAction_16815_2445",VFe="_shortcutDesc_16815_2459",HFe="_fabContainer_16815_3077",GFe="_fabButton_16815_3099",WFe="_fabContent_16815_3141",KFe="_contactRow_16815_3195",YFe="_contactIcon_16815_3213",QFe="_copyBtn_16815_3223",Ae={container:m6e,progressBar:g6e,sidebar:y6e,sidebarTitle:v6e,searchBox:x6e,searchInput:b6e,searchIcon:j6e,navSection:w6e,navSectionTitle:S6e,navLink:N6e,activeNavLink:_6e,navLinkIcon:C6e,content:T6e,header:E6e,headerContent:A6e,title:k6e,subtitle:P6e,headerBadges:O6e,headerBadge:D6e,section:M6e,sectionTitle:I6e,sectionTitleIcon:R6e,sectionContent:L6e,featureList:F6e,featureItem:$6e,featureIcon:B6e,featureText:z6e,infoBox:q6e,infoBoxTitle:U6e,infoBoxContent:V6e,workflowList:H6e,kbd:G6e,moduleLinkBtn:W6e,uiGrid:K6e,uiCard:Y6e,uiLabel:Q6e,demoBtn:X6e,demoBtnPrimary:J6e,demoBtnSecondary:Z6e,demoBtnDanger:eFe,demoBadge:tFe,demoBadgeSuccess:nFe,demoBadgeWarning:rFe,demoBadgeError:iFe,iconRow:aFe,faqList:sFe,faqItem:oFe,faqQuestion:lFe,faqIcon:cFe,faqIconOpen:uFe,faqAnswer:dFe,footer:hFe,footerText:fFe,footerBrand:pFe,floatingParticles:mFe,particle:gFe,headerLabel:yFe,waveEmoji:vFe,headerActions:xFe,headerBtn:bFe,headerBtnSecondary:jFe,statsSection:wFe,statCard:SFe,statIcon:NFe,statValue:_Fe,statLabel:CFe,quickTipsSection:TFe,quickTipsHeader:EFe,tipNav:AFe,tipCard:kFe,tipIcon:PFe,tipContent:OFe,tipIndicators:DFe,tipIndicator:MFe,tipIndicatorActive:IFe,shortcutsGrid:RFe,shortcutCard:LFe,shortcutCardActive:FFe,shortcutKeys:$Fe,kbdPlus:BFe,kbdActive:zFe,shortcutInfo:qFe,shortcutAction:UFe,shortcutDesc:VFe,fabContainer:HFe,fabButton:GFe,fabContent:WFe,contactRow:KFe,contactIcon:YFe,copyBtn:QFe},XFe=(e,t=2e3)=>{const[n,r]=j.useState(0),[a,s]=j.useState(!1),o=j.useRef(null);return j.useEffect(()=>{const l=new IntersectionObserver(([c])=>{c.isIntersecting&&s(!0)},{threshold:.3});return o.current&&l.observe(o.current),()=>l.disconnect()},[]),j.useEffect(()=>{if(!a)return;let l=null;const c=u=>{l||(l=u);const f=Math.min((u-l)/t,1);r(Math.floor(f*e)),f<1&&requestAnimationFrame(c)};requestAnimationFrame(c)},[a,e,t]),{count:n,ref:o}},JFe=()=>{const[e,t]=j.useState("getting-started"),[n,r]=j.useState(""),[a,s]=j.useState(0),[o,l]=j.useState(null),[c,u]=j.useState(!1),[f,p]=j.useState(0),[y,v]=j.useState(null),x=j.useRef(null),b=j.useCallback(()=>{const F=document.documentElement.scrollHeight-window.innerHeight,$=window.scrollY/F*100;s(Math.min($,100))},[]);j.useEffect(()=>{const F=()=>{const $=document.querySelectorAll("section[id]");let z="";$.forEach(L=>{const H=L.offsetTop;window.scrollY>=H-120&&(z=L.getAttribute("id")||"")}),z&&t(z),b()};return window.addEventListener("scroll",F),()=>window.removeEventListener("scroll",F)},[b]);const w=F=>{const $=document.getElementById(F);$&&window.scrollTo({top:$.offsetTop-80,behavior:"smooth"})},_={navigation:[{id:"getting-started",label:"Getting Started",icon:dR},{id:"clinical-workflow",label:"Doctor Workflow",icon:kw},{id:"financial-mgmt",label:"Financial Control",icon:xf},{id:"analytics",label:"Analytics & Insights",icon:Hk},{id:"pharmacy-inventory",label:"Pharmacy & Stock",icon:jf},{id:"advanced-lab",label:"Advanced Lab Mgmt",icon:Za},{id:"ipd-admission",label:"IPD & Admission",icon:sg},{id:"custom-data",label:"System Customization",icon:bf},{id:"admin",label:"Administration",icon:dd}],reference:[{id:"ui-reference",label:"Interface & UI",icon:$m},{id:"troubleshooting",label:"Troubleshooting",icon:Aj}]},T=F=>n?F.filter($=>$.label.toLowerCase().includes(n.toLowerCase())):F,C=({id:F,label:$,Icon:z})=>i.jsxs("a",{className:`${Ae.navLink} ${e===F?Ae.activeNavLink:""}`,onClick:()=>w(F),children:[i.jsx(z,{className:Ae.navLinkIcon,size:18}),$]}),O=[{question:"Bill not printing correctly?",answer:"Ensure pop-ups are not blocked in your browser. Also, check if your printer is properly configured in system settings. For thermal printers, verify the paper size matches the bill format."},{question:"Sync issues with data?",answer:"Make sure your internet connection is stable. The system auto-syncs when online. You can also manually trigger sync from the settings menu. If issues persist, try clearing browser cache."},{question:"How to reset my password?",answer:"Contact your clinic administrator who can reset your password from the Staff Management section. For security reasons, passwords cannot be self-reset without admin approval."},{question:"AI suggestions not appearing?",answer:'AI features require an active internet connection. Also ensure AI features are enabled in Clinic Settings under the "AI & Automation" tab.'},{question:"How do I record a partial payment for patient debt?",answer:"Navigate to Financial Control -> Patient Debts. Click on a patient's name to view their full transaction history. Use the payment recording form at the bottom to enter the amount paid and save."},{question:"How can I set up normal ranges for Lab tests?",answer:"Go to Advanced Lab Management -> Test Master. Click 'Edit' on a test, then go to the 'Parameters' tab. Here you can define min/max values, units, and default results."}],E=[{icon:oR,title:"Pro Tip: Voice Commands",description:'Use the AI Command Bar to speak naturally. Say "Create prescription for John" to get started instantly!',color:"#f59e0b"},{icon:pR,title:"Speed Boost",description:"Double-click any patient name in the queue to instantly open their full history.",color:"#8b5cf6"},{icon:aee,title:"Smart Billing",description:"The system auto-suggests medicine quantities based on prescription duration!",color:"#10b981"},{icon:fR,title:"Favorites",description:"Star frequently prescribed medicines to access them from your quick-add panel.",color:"#ef4444"}];j.useEffect(()=>{const F=setInterval(()=>{p($=>($+1)%E.length)},5e3);return()=>clearInterval(F)},[E.length]);const P=[{icon:ko,value:1e4,suffix:"+",label:"Patients Managed",color:"#6366f1"},{icon:Fb,value:75,suffix:"%",label:"Time Saved",color:"#10b981"},{icon:lee,value:99,suffix:".9%",label:"Uptime",color:"#f59e0b"},{icon:qJ,value:50,suffix:"+",label:"Happy Clinics",color:"#ef4444"}],I=[{keys:["Ctrl","K"],action:"Open Command Bar",description:"Quick access to AI assistant and navigation"},{keys:["Ctrl","P"],action:"Quick Print",description:"Print current document or bill"},{keys:["Ctrl","S"],action:"Save Record",description:"Save current form or entry"},{keys:["Esc"],action:"Close Modal",description:"Close any open dialog or panel"}];return i.jsxs("div",{className:Ae.container,children:[i.jsx("div",{className:Ae.progressBar,style:{width:`${a}%`}}),i.jsxs("aside",{className:Ae.sidebar,children:[i.jsxs("h2",{className:Ae.sidebarTitle,children:[i.jsx(nR,{size:22}),"User Guide"]}),i.jsxs("div",{className:Ae.searchBox,children:[i.jsx(Un,{className:Ae.searchIcon,size:16}),i.jsx("input",{type:"text",className:Ae.searchInput,placeholder:"Search topics...",value:n,onChange:F=>r(F.target.value)})]}),i.jsxs("div",{className:Ae.navSection,children:[i.jsxs("span",{className:Ae.navSectionTitle,children:[i.jsx(aa,{size:12}),"Navigation"]}),T(_.navigation).map(F=>i.jsx(C,{id:F.id,label:F.label,Icon:F.icon},F.id))]}),i.jsxs("div",{className:Ae.navSection,children:[i.jsxs("span",{className:Ae.navSectionTitle,children:[i.jsx(fR,{size:12}),"Reference"]}),T(_.reference).map(F=>i.jsx(C,{id:F.id,label:F.label,Icon:F.icon},F.id))]})]}),i.jsxs("main",{className:Ae.content,ref:x,children:[i.jsxs("header",{className:Ae.header,children:[i.jsxs("div",{className:Ae.floatingParticles,children:[i.jsx("div",{className:Ae.particle}),i.jsx("div",{className:Ae.particle}),i.jsx("div",{className:Ae.particle}),i.jsx("div",{className:Ae.particle}),i.jsx("div",{className:Ae.particle})]}),i.jsxs("div",{className:Ae.headerContent,children:[i.jsxs("div",{className:Ae.headerLabel,children:[i.jsx(nR,{size:16}),"Complete Documentation"]}),i.jsxs("h1",{className:Ae.title,children:["Master Newtons Ai HMS ",i.jsx("span",{className:Ae.waveEmoji,children:""})]}),i.jsx("p",{className:Ae.subtitle,children:"Your comprehensive guide to maximizing efficiency with the AI-Powered Health Management System. Master every feature and transform your clinical workflow."}),i.jsxs("div",{className:Ae.headerBadges,children:[i.jsxs("span",{className:Ae.headerBadge,children:[i.jsx(ag,{size:14}),"HIPAA Compliant"]}),i.jsxs("span",{className:Ae.headerBadge,children:[i.jsx(Pw,{size:14}),"AI Powered"]}),i.jsxs("span",{className:Ae.headerBadge,children:[i.jsx(Gk,{size:14}),"Multi-Language"]})]}),i.jsxs("div",{className:Ae.headerActions,children:[i.jsxs("button",{className:Ae.headerBtn,onClick:()=>w("getting-started"),children:[i.jsx(qq,{size:16}),"Get Started"]}),i.jsxs("button",{className:Ae.headerBtnSecondary,onClick:()=>w("troubleshooting"),children:[i.jsx(Aj,{size:16}),"Need Help?"]})]})]})]}),i.jsx("section",{className:Ae.statsSection,children:P.map((F,$)=>{const{count:z,ref:L}=XFe(F.value);return i.jsxs("div",{className:Ae.statCard,ref:L,children:[i.jsx("div",{className:Ae.statIcon,style:{backgroundColor:`${F.color}15`,color:F.color},children:i.jsx(F.icon,{size:24})}),i.jsxs("div",{className:Ae.statValue,style:{color:F.color},children:[z,F.suffix]}),i.jsx("div",{className:Ae.statLabel,children:F.label})]},$)})}),i.jsxs("section",{className:Ae.quickTipsSection,children:[i.jsxs("div",{className:Ae.quickTipsHeader,children:[i.jsxs("h3",{children:[i.jsx(oR,{size:20})," Quick Tips"]}),i.jsxs("div",{className:Ae.tipNav,children:[i.jsx("button",{onClick:()=>p(F=>(F-1+E.length)%E.length),children:i.jsx(Lb,{size:18})}),i.jsxs("span",{children:[f+1," / ",E.length]}),i.jsx("button",{onClick:()=>p(F=>(F+1)%E.length),children:i.jsx(md,{size:18})})]})]}),i.jsxs("div",{className:Ae.tipCard,children:[i.jsx("div",{className:Ae.tipIcon,style:{backgroundColor:`${E[f].color}15`,color:E[f].color},children:ye.createElement(E[f].icon,{size:28})}),i.jsxs("div",{className:Ae.tipContent,children:[i.jsx("h4",{children:E[f].title}),i.jsx("p",{children:E[f].description})]})]},f),i.jsx("div",{className:Ae.tipIndicators,children:E.map((F,$)=>i.jsx("button",{className:`${Ae.tipIndicator} ${f===$?Ae.tipIndicatorActive:""}`,onClick:()=>p($)},$))})]}),i.jsxs("section",{id:"getting-started",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx(dR,{size:18})}),"Getting Started"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsx("p",{children:"Welcome to the Newtons Ai HMS. This guide will help you navigate and master the system's features, from clinical workflows to advanced financial analytics."}),i.jsxs("div",{className:Ae.infoBox,children:[i.jsxs("span",{className:Ae.infoBoxTitle,children:[i.jsx(Pw,{size:18}),"Multi-Platform Accessibility"]}),i.jsx("div",{className:Ae.infoBoxContent,children:"Newtons Ai is a PWA (Progressive Web App). You can install it on your Desktop, Android, or iOS device for a native-like experience with faster performance and offline support."})]}),i.jsx("div",{className:Ae.shortcutsGrid,children:I.map((F,$)=>i.jsxs("div",{className:`${Ae.shortcutCard} ${y===F.action?Ae.shortcutCardActive:""}`,onMouseEnter:()=>v(F.action),onMouseLeave:()=>v(null),children:[i.jsx("div",{className:Ae.shortcutKeys,children:F.keys.map((z,L)=>i.jsxs(ye.Fragment,{children:[i.jsx("kbd",{className:`${Ae.kbd} ${y===F.action?Ae.kbdActive:""}`,children:z}),L<F.keys.length-1&&i.jsx("span",{className:Ae.kbdPlus,children:"+"})]},L))}),i.jsxs("div",{className:Ae.shortcutInfo,children:[i.jsx("div",{className:Ae.shortcutAction,children:F.action}),i.jsx("div",{className:Ae.shortcutDesc,children:F.description})]})]},$))}),i.jsxs("div",{className:Ae.uiGrid,children:[i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(SJ,{size:14})," Smart Navigation"]}),i.jsxs("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:["Press ",i.jsx("kbd",{className:Ae.kbd,children:"Ctrl"})," + ",i.jsx("kbd",{className:Ae.kbd,children:"K"})," anywhere to open the Command Bar. Instantly jump to patients, bills, or settings."]})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(ko,{size:14})," Multi-Role Access"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"The system adapts to your role: Doctor, Receptionist, Pharmacist, or Lab Technician."})]})]})]})]}),i.jsxs("section",{id:"clinical-workflow",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx(kw,{size:18})}),"Doctor Workflow & Live Queue"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsx("p",{children:"The Doctor Consultation Panel is optimized for speed and clarity, providing all necessary patient context at a single glance."}),i.jsxs("div",{className:Ae.uiGrid,children:[i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(vc,{size:14})," Live Queue Control"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:'Use the "Call Next" buttons to manage the patient flow. The system automatically marks seen patients and updates the waiting list.'}),i.jsx(vr,{to:"/dashboard/doctor",className:Ae.moduleLinkBtn,children:"Consultation Panel"})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(Fx,{size:14})," AI Patient Briefs"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:`" AI Brief" provides a summarized snapshot of the patient's current complaint and relevant history saving valuable consultation time.`})]})]}),i.jsx("h3",{children:"Comprehensive History"}),i.jsxs("ul",{className:Ae.featureList,children:[i.jsxs("li",{className:Ae.featureItem,children:[i.jsx(xx,{size:16,className:Ae.featureIcon}),i.jsxs("div",{className:Ae.featureText,children:[i.jsx("strong",{children:"Unified Timeline:"})," View past complaints, lab reports, and medications in a single, chronologically grouped view."]})]}),i.jsxs("li",{className:Ae.featureItem,children:[i.jsx(kJ,{size:16,className:Ae.featureIcon,style:{color:"var(--guide-primary)"}}),i.jsxs("div",{className:Ae.featureText,children:[i.jsx("strong",{children:"One-Click Action:"})," From the history view, copy past medications to new prescriptions or quickly re-order tests."]})]})]})]})]}),i.jsxs("section",{id:"financial-mgmt",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx(xf,{size:18})}),"Financial Control & Debt Management"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsx("p",{children:"Keep your clinic's finances healthy with precise billing and proactive debt management."}),i.jsxs("div",{className:Ae.uiGrid,children:[i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(Ow,{size:14})," Debt Tracking"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Monitor all outstanding balances in the Patent Debt module. View individual transaction histories and record settlements."}),i.jsx(vr,{to:"/dashboard/admin/patient-debts",className:Ae.moduleLinkBtn,children:"Manage Debt"})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(aa,{size:14})," Custom Billing"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Need to bill for something non-standard? Use the Custom Bill tool to create items on-the-fly."}),i.jsx(vr,{to:"/create-custom-bill",className:Ae.moduleLinkBtn,children:"Custom Bill"})]})]}),i.jsxs("div",{className:Ae.infoBox,children:[i.jsxs("span",{className:Ae.infoBoxTitle,children:[i.jsx(ag,{size:18}),"Payment Verification"]}),i.jsx("div",{className:Ae.infoBoxContent,children:'The system tracks payment modes (Cash, UPI, Card, Credit). "Credit" sales are automatically added to the Patient Debt list for later follow-up.'})]})]})]}),i.jsxs("section",{id:"analytics",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx(Hk,{size:18})}),"Analytics & Insights"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsx("p",{children:"Transition from simply managing data to understanding it. The Analysis Dashboard provides deep insights into your operations."}),i.jsxs("div",{className:Ae.uiGrid,children:[i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(vc,{size:14})," Revenue vs Cash Flow"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Compare Sales (Accrual) against actual Cash Collected (Cash Basis) to understand your true liquidity."}),i.jsx(vr,{to:"/dashboard/analysis",className:Ae.moduleLinkBtn,children:"Open Analysis"})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(uR,{size:14})," Dept. Analysis"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"See exactly which departments (Pharmacy, Lab, OPD) are driving your clinic's growth."})]})]}),i.jsx("h3",{children:"Advanced Metrics"}),i.jsxs("ul",{className:Ae.featureList,children:[i.jsxs("li",{className:Ae.featureItem,children:[i.jsx(xx,{size:16,className:Ae.featureIcon}),i.jsxs("div",{className:Ae.featureText,children:[i.jsx("strong",{children:"Inventory Movement:"})," Analyze stock inflow vs outflow to predict future procurement needs."]})]}),i.jsxs("li",{className:Ae.featureItem,children:[i.jsx(xx,{size:16,className:Ae.featureIcon}),i.jsxs("div",{className:Ae.featureText,children:[i.jsx("strong",{children:"Profit Estimation:"})," View estimated profits based on cost of goods sold (COGS) vs revenue generated."]})]})]})]})]}),i.jsxs("section",{id:"pharmacy-inventory",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx(jf,{size:18})}),"Pharmacy & Inventory Tracking"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsx("p",{children:"Maintain optimal stock levels and manage supplier relationships effortlessly."}),i.jsxs("div",{className:Ae.uiGrid,children:[i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(ND,{size:14})," Distributor Mgmt"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep a directory of suppliers, track payments made to them, and manage purchase entries."}),i.jsx(vr,{to:"/dashboard/distributors",className:Ae.moduleLinkBtn,children:"Distributors"})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(VX,{size:14})," Refill Reminders"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automatically notify patients when their chronic medication stock is about to run out."}),i.jsx(vr,{to:"/refill-reminders",className:Ae.moduleLinkBtn,children:"Refill Alerts"})]})]}),i.jsxs("div",{className:Ae.infoBox,children:[i.jsxs("span",{className:Ae.infoBoxTitle,children:[i.jsx(vc,{size:18}),"Stock-Out Alerts"]}),i.jsx("div",{className:Ae.infoBoxContent,children:"High-demand items are highlighted when stock falls below your defined threshold, ensuring you never run out of critical medicines."})]})]})]}),i.jsxs("section",{id:"advanced-lab",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx(Za,{size:18})}),"Advanced Lab Management"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsx("p",{children:"Go beyond simple test lists. Configure complex diagnostic parameters with automated clinical validation."}),i.jsxs("div",{className:Ae.uiGrid,children:[i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(Un,{size:14})," Multi-Parameter Search"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Find reports by Patient Name, ID, Token, or even specific Test Name. The intelligent search uses fuzzy matching."}),i.jsx(vr,{to:"/lab/search-report",className:Ae.moduleLinkBtn,children:"Find Reports"})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(Za,{size:14})," Test Master"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define parametric data, normal ranges, and automated formatting for your reports."}),i.jsx(vr,{to:"/lab-inventory",className:Ae.moduleLinkBtn,children:"Configure Tests"})]})]})]})]}),i.jsxs("section",{id:"ipd-admission",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx(sg,{size:18})}),"IPD & Admission Management"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsx("p",{children:"Manage the full lifecycle of in-patient care, from the moment of admission to final discharge and billing."}),i.jsxs("div",{className:Ae.uiGrid,children:[i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(mr,{size:14})," In-Patient Tracking"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Keep track of all currently admitted patients, their ward assignments, and duration of stay."}),i.jsx(vr,{to:"/manage-admission",className:Ae.moduleLinkBtn,children:"Admission Mgmt"})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(Ow,{size:14})," Cumulative Billing"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Automated daily room charges combined with services and medications consumed during the stay."})]})]}),i.jsx("h3",{children:"Workflow Steps"}),i.jsxs("ol",{className:Ae.workflowList,children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Admit:"})," Register the patient and set the admission date and bed details."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Manage:"})," Record observations and clinical notes throughout the stay."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Discharge:"})," Finalize all pending charges and generate the discharge summary."]})]})]})]}),i.jsxs("section",{id:"custom-data",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx(bf,{size:18})}),"System Customization"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsx("p",{children:"Newtons Ai HMS is designed to be extensible. Create your own data structures and visualization tools."}),i.jsxs("div",{className:Ae.uiGrid,children:[i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(Bb,{size:14})," Custom Tables"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Define new data types (e.g., Equipment Logs, Consent Forms). Support for text, number, date, and boolean."}),i.jsx(vr,{to:"/custom-tables",className:Ae.moduleLinkBtn,children:"Data Tables"})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(uR,{size:14})," Custom Dashboards"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Build your own reporting views. Drag and drop widgets to visualize your performance."}),i.jsx(vr,{to:"/dashboards",className:Ae.moduleLinkBtn,children:"Manage Dashboards"})]})]})]})]}),i.jsxs("section",{id:"admin",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx(dd,{size:18})}),"Administration"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsx("p",{children:"Central command for clinic owners. Access critical functions and manage staff permissions."}),i.jsxs("div",{className:Ae.uiGrid,children:[i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(ko,{size:14})," Staff & Permissions"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Add/edit staff and define exactly what each role can see and do in the system."}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[i.jsx(vr,{to:"/dashboard/staff",className:Ae.moduleLinkBtn,children:"Staff"}),i.jsx(vr,{to:"/dashboard/roles",className:Ae.moduleLinkBtn,children:"Roles"})]})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsxs("div",{className:Ae.uiLabel,children:[i.jsx(pi,{size:14})," Subscription Plans"]}),i.jsx("p",{className:"text-sm",style:{color:"#64748b",margin:"0.5rem 0"},children:"Manage your patients' subscription plans, billing cycles, and membership statuses."}),i.jsx(vr,{to:"/dashboard/subscriptions",className:Ae.moduleLinkBtn,children:"Subscriptions"})]})]})]})]}),i.jsxs("section",{id:"ui-reference",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx($m,{size:18})}),"Interface & UI Reference"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsx("p",{children:"Familiarize yourself with the common UI elements used throughout the application."}),i.jsxs("div",{className:Ae.uiGrid,children:[i.jsxs("div",{className:Ae.uiCard,children:[i.jsx("div",{className:Ae.uiLabel,children:"Action Buttons"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[i.jsx("button",{className:`${Ae.demoBtn} ${Ae.demoBtnPrimary}`,children:"Primary / Save"}),i.jsx("button",{className:`${Ae.demoBtn} ${Ae.demoBtnSecondary}`,children:"Secondary"}),i.jsx("button",{className:`${Ae.demoBtn} ${Ae.demoBtnDanger}`,children:"Danger / Delete"})]})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsx("div",{className:Ae.uiLabel,children:"Status Indicators"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[i.jsxs("div",{className:`${Ae.demoBadge} ${Ae.demoBadgeSuccess}`,children:[i.jsx(xx,{size:12}),"Paid / Completed"]}),i.jsxs("div",{className:`${Ae.demoBadge} ${Ae.demoBadgeWarning}`,children:[i.jsx(pR,{size:12}),"Pending / Due"]}),i.jsxs("div",{className:`${Ae.demoBadge} ${Ae.demoBadgeError}`,children:[i.jsx(Aj,{size:12}),"Overdue / Failed"]})]})]}),i.jsxs("div",{className:Ae.uiCard,children:[i.jsx("div",{className:Ae.uiLabel,children:"Common Icons"}),i.jsxs("div",{className:Ae.iconRow,children:[i.jsx(Pa,{size:16})," ",i.jsx("span",{children:"Edit Record"})]}),i.jsxs("div",{className:Ae.iconRow,children:[i.jsx(zr,{size:16})," ",i.jsx("span",{children:"Delete Item"})]}),i.jsxs("div",{className:Ae.iconRow,children:[i.jsx($m,{size:16})," ",i.jsx("span",{children:"View Details"})]})]})]})]})]}),i.jsxs("section",{id:"troubleshooting",className:Ae.section,children:[i.jsxs("h2",{className:Ae.sectionTitle,children:[i.jsx("span",{className:Ae.sectionTitleIcon,children:i.jsx(Aj,{size:18})}),"Troubleshooting & Support"]}),i.jsxs("div",{className:Ae.sectionContent,children:[i.jsxs("div",{className:Ae.infoBox,children:[i.jsxs("span",{className:Ae.infoBoxTitle,children:[i.jsx(Gk,{size:18}),"Offline Support (PWA)"]}),i.jsxs("div",{className:Ae.infoBoxContent,children:["Newtons Ai HMS is a ",i.jsx("strong",{children:"Progressive Web App (PWA)"}),'. Install it on your desktop or mobile home screen using the "Install" button in the header for faster loading and offline syncing of critical data.']})]}),i.jsxs("div",{className:Ae.infoBox,style:{borderLeftColor:"var(--guide-accent)"},children:[i.jsxs("span",{className:Ae.infoBoxTitle,style:{color:"var(--guide-accent)"},children:[i.jsx(EC,{size:18}),"Need Direct Support?"]}),i.jsx("div",{className:Ae.infoBoxContent,children:i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(ig,{size:16,color:"var(--guide-accent)"}),i.jsx("strong",{children:"+91 63631 11328"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx(lR,{size:16,color:"var(--guide-accent)"}),i.jsx("strong",{children:"shiva@newtons.in"})]})]})})]}),i.jsx("h3",{children:"Frequently Asked Questions"}),i.jsx("div",{className:Ae.faqList,children:O.map((F,$)=>i.jsxs("div",{className:Ae.faqItem,children:[i.jsxs("div",{className:Ae.faqQuestion,onClick:()=>l(o===$?null:$),children:[i.jsx("span",{children:F.question}),i.jsx(Iq,{size:18,className:`${Ae.faqIcon} ${o===$?Ae.faqIconOpen:""}`})]}),o===$&&i.jsx("div",{className:Ae.faqAnswer,children:F.answer})]},$))})]})]}),i.jsx("footer",{className:Ae.footer,children:i.jsxs("p",{className:Ae.footerText,children:[" ",new Date().getFullYear()," ",i.jsx("span",{className:Ae.footerBrand,children:"Newtons Ai"}),". Empowering Healthcare through Intelligence."]})})]}),i.jsxs("div",{className:Ae.fabContainer,children:[c&&i.jsxs("div",{className:Ae.fabContent,children:[i.jsxs("h4",{children:[i.jsx(EC,{size:18}),"Customer Care"]}),i.jsxs("div",{className:Ae.contactRow,children:[i.jsx(ig,{size:16,className:Ae.contactIcon}),i.jsx("span",{children:"+91 63631 11328"}),i.jsx("button",{className:Ae.copyBtn,onClick:()=>navigator.clipboard.writeText("+916363111328"),title:"Copy Phone",children:i.jsx(aR,{size:14})})]}),i.jsxs("div",{className:Ae.contactRow,children:[i.jsx(lR,{size:16,className:Ae.contactIcon}),i.jsx("span",{children:"shiva@newtons.in"}),i.jsx("button",{className:Ae.copyBtn,onClick:()=>navigator.clipboard.writeText("shiva@newtons.in"),title:"Copy Email",children:i.jsx(aR,{size:14})})]})]}),i.jsx("button",{className:Ae.fabButton,onClick:()=>u(!c),title:"Customer Support",children:c?i.jsx(zt,{size:24}):i.jsx(EC,{size:24})})]})]})},ZFe=({patient:e,onClose:t,onSave:n})=>{const[r,a]=j.useState({name:e.name,age:e.age,gender:e.gender,phone:e.phone||""}),[s,o]=j.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{await n({...r,phone:r.phone||void 0}),t()}catch(u){console.error(u),alert("Failed to update patient")}finally{o(!1)}};return i.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:i.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",width:"400px",maxWidth:"90%",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"1.2rem",color:"#333"},children:"Edit Patient Details"}),i.jsx("button",{onClick:t,style:{border:"none",background:"none",cursor:"pointer",color:"#666"},children:i.jsx(zt,{size:20})})]}),i.jsxs("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Name"}),i.jsx("input",{type:"text",value:r.name,onChange:c=>a({...r,name:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"},required:!0})]}),i.jsxs("div",{style:{display:"flex",gap:"16px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Age"}),i.jsx("input",{type:"number",value:r.age||"",onChange:c=>a({...r,age:parseInt(c.target.value)||0}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"}})]}),i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Gender"}),i.jsxs("select",{value:r.gender||"",onChange:c=>a({...r,gender:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem",width:"100%"},children:[i.jsx("option",{value:"M",children:"Male"}),i.jsx("option",{value:"F",children:"Female"}),i.jsx("option",{value:"O",children:"Other"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"0.9rem",color:"#555"},children:"Phone"}),i.jsx("input",{type:"tel",value:r.phone,onChange:c=>a({...r,phone:c.target.value}),className:"dental-search-input",style:{padding:"10px",fontSize:"0.95rem"},placeholder:"Optional"})]}),i.jsx("button",{type:"submit",className:"save-btn",style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:s,children:s?"Saving...":i.jsxs(i.Fragment,{children:[i.jsx(Xs,{size:18})," Save Changes"]})})]})]})})},e5e=e=>[1,2,3,14,15,16,17,18,19,30,31,32].includes(e)?{type:"molar",roots:2}:[4,5,12,13,20,21,28,29].includes(e)?{type:"premolar",roots:1}:[6,11,22,27].includes(e)?{type:"canine",roots:1}:e>=1&&e<=32?{type:"incisor",roots:1}:[41,42,49,50,51,52,59,60].includes(e)?{type:"molar",roots:2}:[43,48,53,58].includes(e)?{type:"canine",roots:1}:[44,45,46,47,54,55,56,57].includes(e)?{type:"incisor",roots:1}:{type:"incisor",roots:1},Gu=({toothNumber:e,conditions:t=[],className:n,style:r,isSelected:a,bridgeConnectPrevious:s})=>{const{type:o}=e5e(e),l=e<=16||e>=41&&e<=50,c="M5,20 Q5,5 18,5 Q31,5 31,20 L29,25 Q18,28 7,25 Z",u="M7,25 Q5,40 10,44 Q14,40 14,26",f="M29,25 Q31,40 26,44 Q22,40 22,26",p="M8,20 Q8,8 18,8 Q28,8 28,20 L26,24 Q18,27 10,24 Z",y="M10,24 Q16,44 18,45 Q20,44 26,24",v="M8,22 Q18,2 28,22 L26,25 Q18,28 10,25 Z",x="M10,25 Q18,48 26,25",b="M10,22 L10,12 Q18,12 26,12 L26,22 L24,25 Q18,27 12,25 Z",w="M12,25 Q18,46 24,25";let _=c,T=[u,f];o==="incisor"?(_=b,T=[w]):o==="canine"?(_=v,T=[x]):o==="premolar"&&(_=p,T=[y]);const C=t.includes("condition-rct"),O=t.includes("condition-filling"),E=t.includes("condition-crown"),P=t.includes("condition-bridge"),I=t.includes("condition-extraction"),F=t.includes("condition-implant"),$=C?"#e9d5ff":"#f3f4f6",z=I?"#fee2e2":"#ffffff",L=I?"#ef4444":P?"#0891b2":F?"#475569":E?"#b45309":a?"#3b82f6":"#6b7280",H=a||P||E||F?2:1.5,V=l?"M20,15 L56,15 L56,22 L20,22 Z":"M16,15 L-20,15 L-20,22 L16,22 Z";return i.jsxs("svg",{viewBox:"0 0 36 50",className:n,style:{width:"100%",height:"100%",overflow:"visible",...r},children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"goldGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),i.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),i.jsxs("linearGradient",{id:"bridgeGradient",x1:"0",x2:"1",y1:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),i.jsx("stop",{offset:"100%",stopColor:"#0891b2"})]}),i.jsxs("linearGradient",{id:"titaniumGradient",x1:"0",x2:"1",y1:"0",y2:"0",children:[i.jsx("stop",{offset:"0%",stopColor:"#475569"}),i.jsx("stop",{offset:"30%",stopColor:"#94a3b8"}),i.jsx("stop",{offset:"50%",stopColor:"#f8fafc"}),i.jsx("stop",{offset:"70%",stopColor:"#94a3b8"}),i.jsx("stop",{offset:"100%",stopColor:"#475569"})]})]}),s&&i.jsx("path",{d:V,fill:"url(#bridgeGradient)",stroke:"#0891b2",strokeWidth:"1.5"}),F?i.jsxs("g",{children:[i.jsx("path",{d:"M13,25 L23,25 L22,28 L23,29 L22,30 L22,33 L23,34 L22,35 L22,38 L23,39 L22,40 L19,46 Q18,48 17,46 L14,40 L13,39 L14,38 L14,35 L13,34 L14,33 L14,30 L13,29 L14,28 Z",fill:"url(#titaniumGradient)",stroke:L,strokeWidth:"1"}),i.jsxs("g",{stroke:"rgba(255,255,255,0.4)",strokeWidth:"0.5",children:[i.jsx("line",{x1:"14",y1:"29",x2:"22",y2:"29"}),i.jsx("line",{x1:"14",y1:"34",x2:"22",y2:"34"}),i.jsx("line",{x1:"14",y1:"39",x2:"22",y2:"39"})]}),i.jsx("rect",{x:"15",y:"22",width:"6",height:"4",fill:"#64748b",stroke:L,strokeWidth:"1",rx:"1"})]}):i.jsx("g",{fill:$,stroke:L,strokeWidth:H,strokeLinejoin:"round",children:T.map((ne,Z)=>i.jsx("path",{d:ne},Z))}),C&&!F&&i.jsx("g",{fill:"none",stroke:"#9333ea",strokeWidth:"2.5",strokeLinecap:"round",children:o==="molar"?i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M12,28 L11,42"}),i.jsx("path",{d:"M24,28 L25,42"})]}):i.jsx("path",{d:"M18,25 L18,44"})}),i.jsx("path",{d:_,fill:P?"url(#bridgeGradient)":E?"url(#goldGradient)":z,stroke:L,strokeWidth:H,strokeLinejoin:"round"}),O&&!E&&!P&&!F&&i.jsx("circle",{cx:"18",cy:"16",r:"4",fill:"#3b82f6",stroke:"#1d4ed8",strokeWidth:"1"}),I&&i.jsxs("g",{stroke:"#ef4444",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"8",y1:"8",x2:"28",y2:"42"}),i.jsx("line",{x1:"28",y1:"8",x2:"8",y2:"42"})]})]})},Ab=(e,t="universal")=>t==="universal"?e<=32?e.toString():e>=41&&e<=50?String.fromCharCode(65+(e-41)):e>=51&&e<=60?String.fromCharCode(75+(e-51)):e.toString():t==="fdi"?e>=1&&e<=8?(18-(e-1)).toString():e>=9&&e<=16?(21+(e-9)).toString():e>=17&&e<=24?(38-(e-17)).toString():e>=25&&e<=32?(41+(e-25)).toString():e>=41&&e<=45?(55-(e-41)).toString():e>=46&&e<=50?(61+(e-46)).toString():e>=51&&e<=55?(75-(e-51)).toString():e>=56&&e<=60?(81+(e-56)).toString():e.toString():e.toString(),t5e=({selectedTeeth:e,toothConditions:t={},toothDetails:n={},onToothClick:r,onEditPastRecord:a,onPrint:s,numberingSystem:o="universal"})=>{const[l,c]=ye.useState("permanent"),u=Array.from({length:16},(_,T)=>T+1),f=Array.from({length:16},(_,T)=>32-T),p=Array.from({length:10},(_,T)=>41+T),y=Array.from({length:10},(_,T)=>60-T),[v,x]=ye.useState(null),b=_=>{const T=t[_]||[],C=e.includes(_);let O=[],E="#9ca3af",P;const I=T.includes("condition-extraction");return C&&(E="#3b82f6"),T.includes("condition-filling")&&O.push("#60a5fa"),T.includes("condition-rct")&&O.push("#c084fc"),T.includes("condition-crown")&&(O.push("#fcd34d"),E="#d97706"),T.includes("condition-bridge")&&(O.push("#22d3ee"),E="#0891b2"),T.includes("condition-implant")&&(O.push("#94a3b8"),E="#475569"),T.includes("condition-extraction")&&(O.push("#fee2e2"),E="#ef4444"),O.length===0&&C&&O.push("#eff6ff"),O.length===0&&O.push("#ffffff"),{fillColors:O,borderColor:E,overlayColor:P,isSelected:C,hasExtraction:I}},w=_=>{const{isSelected:T}=b(_),C=t[_]||[],O=n[_],E=_<=16||_>=41&&_<=50,P=C.includes("condition-bridge");let I=!1;if(P){let $=null;E?(_>1&&_<=16&&($=_-1),_>41&&_<=50&&($=_-1)):(_<32&&_>=17&&($=_+1),_<60&&_>=51&&($=_+1)),$!==null&&(t[$]||[]).includes("condition-bridge")&&(I=!0)}const F=Ab(_,o);return i.jsxs("div",{onClick:()=>r(_),onMouseEnter:()=>x(_),onMouseLeave:()=>x(null),className:`tooth-item-container ${T?"selected":""}`,title:"",children:[i.jsx("div",{className:"tooth-number-label",children:F}),i.jsx("div",{className:"tooth-svg-wrapper",style:{transform:E?"rotate(180deg)":"none"},children:i.jsx(Gu,{toothNumber:_,conditions:C,isSelected:T,bridgeConnectPrevious:I})}),v===_&&O&&O.length>0&&i.jsxs("div",{className:"tooth-tooltip-window",children:[i.jsxs("div",{className:"tooltip-header",children:["Tooth ",F]}),i.jsx("ul",{className:"tooltip-list",children:O.map(($,z)=>i.jsxs("li",{className:"tooltip-detail-item",children:[i.jsxs("span",{className:"detail-text",children:[$.name," ",i.jsxs("small",{children:["(",$.date,")"]})]}),$.isPast&&a&&i.jsx("button",{className:"tooltip-edit-btn",onClick:L=>{L.stopPropagation(),a($.recordId)},title:"Edit this record",children:i.jsx(xc,{size:12})})]},z))})]})]},_)};return i.jsxs("div",{className:"chart-container-inner",style:{position:"relative"},children:[i.jsxs("div",{className:"chart-header-controls",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[i.jsxs("div",{className:"view-toggle-container",style:{display:"flex",gap:4,background:"#f3f4f6",padding:4,borderRadius:8},children:[i.jsx("button",{className:`view-toggle-btn ${l==="permanent"?"active":""}`,onClick:()=>c("permanent"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="permanent"?"#fff":"transparent",boxShadow:l==="permanent"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="permanent"?"#111827":"#6b7280"},children:"Permanent"}),i.jsx("button",{className:`view-toggle-btn ${l==="primary"?"active":""}`,onClick:()=>c("primary"),style:{padding:"4px 12px",borderRadius:6,border:"none",background:l==="primary"?"#fff":"transparent",boxShadow:l==="primary"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,color:l==="primary"?"#111827":"#6b7280"},children:"Primary"})]}),s&&i.jsxs("button",{onClick:_=>{_.stopPropagation(),s()},className:"chart-print-btn no-print",title:"Print Report",children:[i.jsx($x,{size:16}),i.jsx("span",{children:"Print Report"})]})]}),i.jsx("div",{className:"arch-label",children:"Maxillary (Upper)"}),i.jsxs("div",{className:"arch-row",children:[i.jsx("div",{className:"quadrant",children:l==="permanent"?u.slice(0,8).map(_=>w(_)):p.slice(0,5).map(_=>w(_))}),i.jsx("div",{className:"quadrant",children:l==="permanent"?u.slice(8).map(_=>w(_)):p.slice(5).map(_=>w(_))})]}),i.jsxs("div",{className:"midline-divider",children:[i.jsx("div",{className:"divider-line"}),i.jsx("span",{className:"chart-label",children:"Midline"}),i.jsx("div",{className:"divider-line"})]}),i.jsxs("div",{className:"arch-row",children:[i.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(0,8).map(_=>w(_)):y.slice(0,5).map(_=>w(_))}),i.jsx("div",{className:"quadrant",children:l==="permanent"?f.slice(8).map(_=>w(_)):y.slice(5).map(_=>w(_))})]}),i.jsx("div",{className:"arch-label",children:"Mandibular (Lower)"}),i.jsxs("div",{className:"chart-legend",children:[i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-preview-mini",children:i.jsx(Gu,{toothNumber:1,conditions:[],style:{width:16,height:22}})}),i.jsx("span",{children:"Healthy"})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-preview-mini",children:i.jsx(Gu,{toothNumber:1,conditions:["condition-filling"],style:{width:16,height:22}})}),i.jsx("span",{children:"Filling (Dot)"})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-preview-mini",children:i.jsx(Gu,{toothNumber:1,conditions:["condition-rct"],style:{width:16,height:22}})}),i.jsx("span",{children:"RCT (Root Lines)"})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-preview-mini",children:i.jsx(Gu,{toothNumber:1,conditions:["condition-crown"],style:{width:16,height:22}})}),i.jsx("span",{children:"Crown"})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-preview-mini",children:i.jsx(Gu,{toothNumber:1,conditions:["condition-bridge"],style:{width:16,height:22}})}),i.jsx("span",{children:"Bridge"})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-preview-mini",children:i.jsx(Gu,{toothNumber:1,conditions:["condition-implant"],style:{width:16,height:22}})}),i.jsx("span",{children:"Implant"})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-preview-mini",children:i.jsx(Gu,{toothNumber:1,conditions:["condition-extraction"],style:{width:16,height:22}})}),i.jsx("span",{children:"Extraction (X)"})]})]}),i.jsxs("div",{className:"print-only-details-summary print-only",children:[i.jsx("h3",{children:"Tooth Procedure Details"}),Object.keys(n).length===0?i.jsx("p",{className:"no-details",children:"No specific tooth procedures recorded."}):i.jsxs("table",{className:"print-details-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Tooth"}),i.jsx("th",{children:"Procedure"}),i.jsx("th",{children:"Date"})]})}),i.jsx("tbody",{children:Object.entries(n).sort(([_],[T])=>parseInt(_)-parseInt(T)).map(([_,T])=>i.jsx(ye.Fragment,{children:T.map((C,O)=>i.jsxs("tr",{children:[O===0?i.jsxs("td",{rowSpan:T.length,className:"tooth-cell",children:["Tooth ",Ab(parseInt(_),o)]}):null,i.jsx("td",{children:C.name}),i.jsx("td",{children:C.date})]},`${_}-${O}`))},_))})]})]})]})},n5e=({onClose:e,onUpdate:t})=>{const[n,r]=j.useState([]),[a,s]=j.useState(!0),[o,l]=j.useState(null),[c,u]=j.useState({}),[f,p]=j.useState(!1),[y,v]=j.useState({name:"",cost:0,type:"general"});j.useEffect(()=>{x()},[]);const x=async()=>{s(!0);try{const C=await ce("/api/dental/procedures");if(C.ok){const O=await C.json();r(O)}}catch(C){console.error(C)}finally{s(!1)}},b=async()=>{if(!(!y.name||!y.cost))try{(await ce("/api/dental/procedures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).ok&&(p(!1),v({name:"",cost:0,type:"general"}),x(),t())}catch(C){console.error(C)}},w=async C=>{try{(await ce(`/api/dental/procedures/${C}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(l(null),u({}),x(),t())}catch(O){console.error(O)}},_=async C=>{if(window.confirm("Are you sure you want to delete this procedure?"))try{(await ce(`/api/dental/procedures/${C}`,{method:"DELETE"})).ok&&(x(),t())}catch(O){console.error(O)}},T=C=>{l(C.id),u({name:C.name,cost:C.cost,type:C.type})};return i.jsx("div",{className:"manage-procedures-modal-overlay",children:i.jsxs("div",{className:"manage-procedures-modal-content",children:[i.jsxs("div",{className:"manage-procedures-modal-header",children:[i.jsx("h2",{className:"manage-procedures-modal-title",children:"Manage Procedures"}),i.jsxs("div",{style:{display:"flex",gap:"10px"},children:[i.jsx("button",{onClick:async()=>{if(window.confirm("Import missing default procedures?"))try{await ce("/api/dental/procedures/import-defaults",{method:"POST"}),x(),t()}catch(C){console.error(C)}},className:"btn-secondary",style:{padding:"6px 12px",fontSize:"0.8rem"},children:"Import Defaults"}),i.jsx("button",{onClick:e,className:"manage-procedures-close-btn",children:i.jsx(zt,{size:20})})]})]}),i.jsx("div",{className:"manage-procedures-list-container",children:a?i.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading procedures..."}):i.jsxs("table",{className:"manage-procedures-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{style:{width:"40%"},children:"Name"}),i.jsx("th",{style:{width:"20%"},children:"Type"}),i.jsx("th",{style:{width:"20%"},children:"Cost ()"}),i.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),i.jsx("tbody",{children:n.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px",color:"#888"},children:"No procedures found. Add one below."})}):n.map(C=>i.jsx("tr",{children:o===C.id?i.jsxs(i.Fragment,{children:[i.jsx("td",{children:i.jsx("input",{type:"text",className:"edit-input",value:c.name||"",onChange:O=>u({...c,name:O.target.value}),placeholder:"Procedure Name"})}),i.jsx("td",{children:i.jsxs("select",{className:"edit-select",value:c.type||"general",onChange:O=>u({...c,type:O.target.value}),children:[i.jsx("option",{value:"general",children:"General"}),i.jsx("option",{value:"filling",children:"Filling"}),i.jsx("option",{value:"rct",children:"RCT"}),i.jsx("option",{value:"extraction",children:"Extraction"}),i.jsx("option",{value:"crown",children:"Crown"}),i.jsx("option",{value:"bridge",children:"Bridge"}),i.jsx("option",{value:"implant",children:"Implant"})]})}),i.jsx("td",{children:i.jsx("input",{type:"number",className:"edit-input",value:c.cost||0,onChange:O=>u({...c,cost:parseFloat(O.target.value)}),placeholder:"Cost"})}),i.jsxs("td",{children:[i.jsx("button",{onClick:()=>w(C.id),className:"action-btn btn-save",title:"Save",children:i.jsx(Xs,{size:18})}),i.jsx("button",{onClick:()=>l(null),className:"action-btn btn-cancel",title:"Cancel",children:i.jsx(zt,{size:18})})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("td",{children:C.name}),i.jsx("td",{children:i.jsx("span",{className:`procedure-badge badge-${C.type}`,children:C.type})}),i.jsxs("td",{style:{fontWeight:500},children:["",C.cost]}),i.jsxs("td",{children:[i.jsx("button",{onClick:()=>T(C),className:"action-btn btn-edit",title:"Edit",children:i.jsx(xc,{size:18})}),i.jsx("button",{onClick:()=>_(C.id),className:"action-btn btn-delete",title:"Delete",children:i.jsx(zr,{size:18})})]})]})},C.id))})]})}),i.jsx("div",{className:"add-procedure-section",children:f?i.jsxs("div",{className:"add-procedure-card",children:[i.jsx("h4",{className:"add-procedure-title",children:"Add New Procedure"}),i.jsxs("div",{className:"add-form-grid",children:[i.jsx("input",{type:"text",className:"form-input",placeholder:"Procedure Name",value:y.name||"",onChange:C=>v({...y,name:C.target.value})}),i.jsxs("select",{className:"form-select",value:y.type||"general",onChange:C=>v({...y,type:C.target.value}),children:[i.jsx("option",{value:"general",children:"General"}),i.jsx("option",{value:"filling",children:"Filling"}),i.jsx("option",{value:"rct",children:"RCT"}),i.jsx("option",{value:"extraction",children:"Extraction"}),i.jsx("option",{value:"crown",children:"Crown"}),i.jsx("option",{value:"bridge",children:"Bridge"}),i.jsx("option",{value:"implant",children:"Implant"})]}),i.jsx("input",{type:"number",className:"form-input",placeholder:"Cost",value:y.cost||"",onChange:C=>v({...y,cost:parseFloat(C.target.value)})}),i.jsxs("div",{className:"btn-group",children:[i.jsx("button",{onClick:b,className:"btn-primary",children:"Save"}),i.jsx("button",{onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"})]})]})]}):i.jsxs("button",{onClick:()=>p(!0),className:"add-trigger-btn",children:[i.jsx(Yr,{size:18})," Add New Procedure"]})})]})})},r5e=({toothNumber:e,procedures:t,history:n=[],onSelect:r,onClose:a,numberingSystem:s="universal"})=>{const[o,l]=j.useState(""),[c,u]=j.useState(n.length>0?"history":"add"),f=Ab(e,s),p=j.useMemo(()=>t.filter(y=>y.name.toLowerCase().includes(o.toLowerCase())),[t,o]);return i.jsxs("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(2px)"},children:[i.jsxs("div",{className:"modal-content",style:{backgroundColor:"var(--dp-card-bg)",borderRadius:"12px",width:"100%",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",overflow:"hidden",animation:"scaleUp 0.2s ease-out"},children:[i.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid var(--dp-border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"var(--dp-bg)"},children:[i.jsxs("h3",{style:{margin:0,color:"var(--dp-text)",fontSize:"1.1rem"},children:["Tooth ",f]}),i.jsx("button",{onClick:a,style:{background:"none",border:"none",color:"var(--dp-text-sec)",cursor:"pointer",padding:"4px"},children:i.jsx(zt,{size:20})})]}),n.length>0&&i.jsxs("div",{className:"sidebar-tabs",style:{padding:"0 16px",paddingTop:"8px",background:"var(--dp-bg)"},children:[i.jsx("button",{className:c==="add"?"active":"",onClick:()=>u("add"),style:{padding:"8px 12px",borderBottomWidth:"2px"},children:"Add Procedure"}),i.jsxs("button",{className:c==="history"?"active":"",onClick:()=>u("history"),style:{padding:"8px 12px",borderBottomWidth:"2px"},children:["History (",n.length,")"]})]}),c==="add"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--dp-border)"},children:i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx(Un,{size:16,style:{position:"absolute",left:"12px",color:"var(--dp-text-sec)"}}),i.jsx("input",{type:"text",placeholder:"Search procedures...",value:o,onChange:y=>l(y.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",borderRadius:"8px",border:"1px solid var(--dp-border)",backgroundColor:"var(--dp-bg)",color:"var(--dp-text)",fontSize:"0.9rem",outline:"none"},autoFocus:!0})]})}),i.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:p.length===0?i.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.9rem"},children:"No procedures found."}):i.jsx("div",{style:{display:"flex",flexDirection:"column"},children:p.map(y=>i.jsxs("button",{onClick:()=>r(y),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",border:"none",background:"transparent",borderBottom:"1px solid var(--dp-border)",cursor:"pointer",textAlign:"left",transition:"background-color 0.1s"},className:"procedure-modal-item",onMouseOver:v=>v.currentTarget.style.backgroundColor="var(--dp-bg)",onMouseOut:v=>v.currentTarget.style.backgroundColor="transparent",children:[i.jsxs("div",{children:[i.jsx("div",{style:{color:"var(--dp-text)",fontWeight:500,fontSize:"0.95rem"},children:y.name}),i.jsx("div",{style:{color:"var(--dp-text-sec)",fontSize:"0.8rem",textTransform:"capitalize"},children:y.type})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--dp-primary)",fontWeight:600,fontSize:"0.9rem"},children:[i.jsxs("span",{children:["",y.cost]}),i.jsx(Yr,{size:16})]})]},y.id))})})]}),c==="history"&&i.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",padding:"0"},children:n.map((y,v)=>i.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--dp-border)"},children:[i.jsx("div",{style:{fontWeight:500,fontSize:"0.9rem"},children:y.name}),i.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)"},children:[y.date," ",y.isPast?"(Past)":"(Current)"]})]},v))})]}),i.jsx("style",{children:`
                @keyframes scaleUp {
                    from { transform: scale(0.95); opacity: 0; }
                    to { transform: scale(1); opacity: 1; }
                }
            `})]})},i5e=({isOpen:e,onClose:t,recordId:n,onBillingComplete:r})=>{var Ie,Ne,ke,de,Q;const[a,s]=j.useState(null),[o,l]=j.useState([]),[c,u]=j.useState(!0),[f,p]=j.useState(null),[y,v]=j.useState(!1),[x,b]=j.useState("cash"),[w,_]=j.useState(""),[T,C]=j.useState(""),[O,E]=j.useState(""),[P,I]=j.useState(""),[F,$]=j.useState(""),[z,L]=j.useState(0),H=j.useRef(!1),[V,ne]=j.useState(null),[Z,q]=j.useState(!1),K=oe=>{const re=Math.max(0,Math.min(100,isNaN(oe)?0:oe));H.current=!0,L(re);const ae=o.map(X=>({...X,discount_percentage:re}));l(ae)},se=(oe,re)=>{const ae=[...o];ae[oe].discount_percentage=isNaN(re)?0:re,l(ae)};j.useEffect(()=>{if(H.current){H.current=!1;return}const oe=o.reduce((X,W)=>X+(W.price??0),0);if(oe===0){L(0);return}const ae=o.reduce((X,W)=>{const pe=(W.price??0)*((W.discount_percentage??0)/100);return X+pe},0)/oe*100;L(X=>Math.abs(X-ae)>.01?ae:X)},[o]);const G=async()=>{if(!a)return p("No record data available to bill."),null;if(o.length===0)return p("Cannot bill an empty procedure list."),null;v(!0),p(null);try{const oe=o.map(ie=>{const pe=ie.price,le=pe*((ie.discount_percentage??0)/100),je=pe-le;return{name:ie.name,price:ie.price,quantity:1,total:je,item_id:ie.id||`proc_${Date.now()}`,type:"service",discount_percentage:ie.discount_percentage??0}}),re={patientId:a.patientId.id,items:oe,amount:xe,paymentMode:x,type:"dental",related_id:a.id,status:"paid",discountPercentage:z},ae=await ce("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(re)}),X=await ae.json();if(!ae.ok||!X.id)throw new Error(X.message||"Failed to create bill.");if((await ce(`/api/dental/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:X.id})})).ok||console.error("Failed to update dental record status"),s(ie=>ie?{...ie,status:"billed",billId:X.id}:null),x==="credit")try{await ce(`/api/patient-debts/${a.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:xe,related_bill_id:X.id,notes:`Dental Bill #${X.id}`})})}catch(ie){console.error("Failed to create debt entry:",ie)}return r&&r(),X.id}catch(oe){return console.error("Billing process failed:",oe),p(oe.message||"Failed to create bill."),null}finally{v(!1)}},B=()=>{window.print()},fe=async()=>{await G()&&setTimeout(()=>window.print(),800)};j.useEffect(()=>{e&&n&&(async()=>{u(!0);try{const[re,ae]=await Promise.all([ce(`/api/dental/${n}`),ce("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!re.ok)throw new Error("Failed to fetch dental record");const X=await re.json(),W={...X,patientId:X.Patient||X.patientId};if(s(W),ae.ok){const le=await ae.json();C(le.upi_id||""),E(le.name||""),I(le.address||""),$(le.notes||"")}const pe=(W.selected_procedures||W.selectedProcedures||[]).map(le=>({...le,price:le.cost,discount_percentage:0}));l(pe)}catch(re){console.error("Failed to fetch data:",re),p(re.message)}finally{u(!1)}})()},[e,n]);const me=j.useMemo(()=>o.reduce((oe,re)=>oe+(re.price??0),0),[o]),Y=j.useMemo(()=>o.reduce((oe,re)=>{const X=(re.price??0)*(re.discount_percentage??0)/100;return oe+X},0),[o]),xe=j.useMemo(()=>me-Y,[me,Y]);return j.useEffect(()=>{if(xe>0&&T){const oe=`upi://pay?pa=${T}&pn=${encodeURIComponent(O)}&am=${xe.toFixed(2)}&cu=INR`;_(oe)}else _("")},[xe,T,O]),j.useEffect(()=>{(async()=>{var re;if(x==="credit"&&((re=a==null?void 0:a.patientId)!=null&&re.id)){q(!0);try{const ae=await ce(`/api/patient-debts/${a.patientId.id}/balance`);if(ae.ok){const X=await ae.json();ne(X.netDebt||0)}else ne(0)}catch{ne(0)}finally{q(!1)}}})()},[x,(Ie=a==null?void 0:a.patientId)==null?void 0:Ie.id]),e?i.jsx("div",{className:"dental-billing-modal-overlay",children:i.jsxs("div",{className:"dental-billing-modal-content",children:[i.jsxs("header",{className:"dental-billing-modal-header no-print",children:[i.jsx("h2",{children:"Dental Invoice"}),i.jsx("button",{onClick:t,className:"close-modal-btn",children:i.jsx(zt,{size:20})})]}),i.jsx("div",{className:"dental-billing-modal-body",children:c?i.jsx("div",{className:"pharmacy-billing-page",children:i.jsx("div",{className:"billing-container",children:i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("div",{className:"order-details-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:150,height:24})})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:200,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:150,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:180,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:150,height:20})})]})]}),i.jsxs("div",{className:"medications-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:120,height:24})})}),i.jsx("div",{className:"p-4",children:i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(ee,{width:30,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})})]})}),i.jsx("tbody",{children:[1,2,3].map(oe=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:20,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:180,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:70,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:70,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:90,height:20})})]},oe))})]})})]})]}),i.jsx("aside",{className:"billing-sidebar",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:160,height:24})})}),i.jsxs("div",{className:"space-y-4 p-5",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsx("hr",{}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:120,height:28}),i.jsx(ee,{width:100,height:28})]})]})]})})]})})}):f?i.jsxs("div",{className:"error-message-box",children:["Error: ",f]}):a?i.jsx("div",{className:"pharmacy-billing-page",children:i.jsxs("div",{className:"billing-container printable-section",children:[i.jsxs("div",{className:"billing-header print-only",children:[i.jsx("div",{className:"clinic-header-left",children:i.jsx("div",{className:"clinic-info-print",children:i.jsxs("div",{className:"clinic-name-and-details-print",children:[i.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),i.jsx("h2",{className:"clinic-name-print",children:O||"Clinic Name"}),(P||F)&&i.jsxs("div",{className:"clinic-details-print",children:[P&&i.jsx("span",{className:"small-text clinic-address",children:P}),F&&i.jsx("span",{className:"small-text clinic-notes",children:F})]})]})})}),i.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",((Ne=a.patientId)==null?void 0:Ne.name)||"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",((ke=a.patientId)==null?void 0:ke.patient_token_number)??"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Date"]})," ",new Date(a.date||a.createdAt).toLocaleDateString()]})]})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("section",{className:"order-details-card no-print",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Patient Information"})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",((de=a.patientId)==null?void 0:de.name)||"N/A"," "]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",((Q=a.patientId)==null?void 0:Q.patient_token_number)??"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(aa,{size:16})," Record ID"]})," ",a.id.substring(a.id.length-6)]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Date"]})," ",new Date(a.createdAt).toLocaleDateString()]})]})]}),i.jsxs("section",{className:"medications-card",children:[i.jsx("div",{className:"card-header no-print",children:i.jsx("h2",{children:"Procedures"})}),o.length>0?i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"S.No."}),i.jsx("th",{children:"PROCEDURE"}),i.jsx("th",{children:"PRICE"}),i.jsx("th",{children:"DIS %"}),i.jsx("th",{children:"AMT"})]})}),i.jsx("tbody",{children:o.map((oe,re)=>{const ae=oe.price??0,X=ae*(oe.discount_percentage??0)/100,W=ae-X;return i.jsxs("tr",{children:[i.jsx("td",{children:re+1}),i.jsx("td",{children:oe.name}),i.jsx("td",{children:oe.price.toFixed(2)}),i.jsxs("td",{children:[i.jsx("input",{type:"number",value:oe.discount_percentage===0?"":oe.discount_percentage,onChange:ie=>se(re,parseFloat(ie.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),i.jsx("td",{children:W.toFixed(2)})]},re)})})]}):i.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),i.jsxs("div",{className:"bill-summary-print print-only",children:[i.jsxs("div",{className:"bill-summary-details",children:[i.jsxs("div",{className:"summary-row-print",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",me.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row-print",children:[i.jsxs("span",{children:["Discount (",z.toFixed(2),"%)"]}),i.jsxs("span",{children:["- ",Y.toFixed(2)]})]}),i.jsx("div",{className:"print-only-total",children:i.jsxs("strong",{children:["Grand Total: ",xe.toFixed(2)]})})]}),w&&i.jsxs("div",{className:`qr-code-container qr-code-printable-section ${x!=="upi"?"hide-on-screen":""}`,children:[i.jsx(oa,{value:w,size:80}),i.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),i.jsx("aside",{className:"billing-sidebar no-print",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Billing Summary"})}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",me.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Total Discount"}),i.jsxs("span",{children:["- ",Y.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Discount Percentage"}),i.jsxs("div",{className:"discount-input-wrapper",children:[i.jsx("input",{type:"number",value:z===0?"":z,onChange:oe=>K(parseFloat(oe.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:y||a.status==="billed"}),"%"]})]}),i.jsxs("div",{className:"summary-row grand-total-row",children:[i.jsx("strong",{children:"Grand Total"}),i.jsxs("strong",{children:["",xe.toFixed(2)]})]}),i.jsx("div",{className:"qr-code-container",children:w?i.jsxs(i.Fragment,{children:[i.jsx(oa,{value:w,size:128}),i.jsx("p",{children:"Scan to pay using UPI"})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),i.jsxs("div",{className:"payment-mode-section",children:[i.jsx("label",{className:"info-item",children:i.jsx("strong",{children:"Payment Mode"})}),i.jsxs("select",{value:x,onChange:oe=>b(oe.target.value),className:"payment-mode-select",disabled:y||a.status==="billed",children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),i.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),i.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),x==="credit"&&i.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[i.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),Z?i.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"Current Debt:"}),i.jsxs("strong",{style:{color:V&&V>0?"#dc3545":"#28a745"},children:["",(V||0).toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"This Bill:"}),i.jsxs("strong",{children:["+ ",xe.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[i.jsx("span",{children:i.jsx("strong",{children:"New Total Debt:"})}),i.jsxs("strong",{style:{color:"#dc3545"},children:["",((V||0)+xe).toFixed(2)]})]})]})]}),i.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:a.status!=="billed"?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:B,className:"secondary-button print-preview-button no-print",disabled:y,children:"Print Preview"}),i.jsx("button",{onClick:fe,className:"primary-button",disabled:y,children:y?"Processing...":"Finalise and Bill"})]}):i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[i.jsx(Tl,{size:20})," Bill Generated"]}),i.jsx("button",{onClick:B,className:"secondary-button print-preview-button no-print",children:"Print Preview"})]})})]})})]}),i.jsx("footer",{className:"billing-footer print-only",children:i.jsx("p",{children:"Computer generated invoice."})})]})}):i.jsx("div",{className:"error-message-box",children:"No record found."})})]})}):null},Dz=/^\+?[0-9\s\-().]{7,20}$/,a5e=/^[a-zA-Z\s'-]{2,}$/,s5e=()=>{const e=Mt(),[t,n]=j.useState(""),[r,a]=j.useState([]),[s,o]=j.useState(!1),[l,c]=j.useState(null),[u,f]=j.useState(!1),[p,y]=j.useState(!1),[v,x]=j.useState(!1),[b,w]=j.useState([]),[_,T]=j.useState(!0),[C,O]=j.useState(()=>{const we=localStorage.getItem("dentalNumberingSystem");return we==="fdi"||we==="universal"?we:"universal"});j.useEffect(()=>{localStorage.setItem("dentalNumberingSystem",C)},[C]);const E=$r();j.useEffect(()=>{E.state&&E.state.patient&&X(E.state.patient)},[E.state]);const[P,I]=j.useState([]),[F,$]=j.useState([]),[z,L]=j.useState({}),[H,V]=j.useState(""),[ne,Z]=j.useState(!1),[q,K]=j.useState("plan"),[se,G]=j.useState([]),[B,fe]=j.useState([]),[me,Y]=j.useState(!1),[xe,Ie]=j.useState(!1),[Ne,ke]=j.useState(null);j.useEffect(()=>{Q(),de()},[]);const de=async()=>{try{const we=new URLSearchParams({page:"1",limit:"5",sortBy:"createdAt",sortOrder:"desc"}),ve=await ce(`/api/patients?${we.toString()}`);if(ve.ok){const Ce=await ve.json();w(Ce.patients||[])}}catch(we){console.error("Error fetching recent patients",we)}finally{T(!1)}},Q=async()=>{try{const we=await ce("/api/dental/procedures");if(we.ok){const ve=await we.json();fe(ve)}}catch(we){console.error("Error fetching procedures",we)}};j.useEffect(()=>{(async()=>{if(!l){G([]),ke(null),V(""),$([]),L({}),I([]);return}try{const ve=await ce(`/api/dental/patient/${l.id}`);if(ve.ok){const Ce=await ve.json();G(Ce);const nt=new Date().toDateString(),Ve=Ce.find(dt=>dt.status==="draft"&&new Date(dt.date||dt.createdAt||Date.now()).toDateString()===nt);if(Ve){ke(Ve.id),V(Ve.notes||"");const dt=Ve.selected_procedures.filter(ze=>!Ve.teeth.some(Xe=>Xe.procedures.includes(ze.id)));$(dt.map(ze=>({instanceId:crypto.randomUUID(),procedureId:ze.id,name:ze.name,price:ze.cost,type:ze.type})));const Ct={},kt=[];Ve.teeth.forEach(ze=>{const Xe=ze.procedures.map(Je=>{const wt=Ve.selected_procedures.find(Pt=>Pt.id===Je)||B.find(Pt=>Pt.id===Je);return{instanceId:crypto.randomUUID(),procedureId:Je,name:wt?wt.name:Je,price:wt?wt.cost:0,type:wt?wt.type:"general"}});Xe.length>0&&(Ct[ze.toothNumber]=Xe,kt.push(ze.toothNumber))}),L(Ct),I(kt)}else ke(null),V(""),$([]),L({}),I([])}}catch(ve){console.error("Error fetching history",ve)}})()},[l,B]);const oe=j.useMemo(()=>pd(async we=>{if(!we.trim()||we.length<2){a([]),o(!1);return}o(!0);try{const ve=await ce(`/api/patients?search=${encodeURIComponent(we)}&limit=10`);if(ve.ok){const Ce=await ve.json();a(Ce.patients||[])}}catch(ve){console.error("Search error:",ve)}finally{o(!1)}},300),[]);j.useEffect(()=>{oe(t)},[t,oe]);const re=we=>{const ve=we.target.value;n(ve),y(Dz.test(ve)),x(a5e.test(ve)&&!Dz.test(ve))},ae=async we=>{if(!(!t||we==="phone"&&!p||we==="name"&&!v)){o(!0);try{const Ce=await ce("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:we==="name"?t:"direct dental",phone:we==="phone"?t:null,age:null,gender:null,token:null})});if(Ce.ok){const nt=await Ce.json();X({id:nt.id,name:nt.name,token:nt.token??null,age:nt.age??null,gender:nt.gender??null,phone:nt.phone})}else alert("Failed to create patient")}catch(ve){console.error("Error creating patient:",ve),alert("Error creating patient")}finally{o(!1)}}},X=we=>{c(we),n(""),a([])},W=()=>{c(null),I([]),$([]),L({}),V("")},ie=async we=>{if(!l)return;const ve=await ce(`/api/patients/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(we)});if(ve.ok)await ve.json(),c(Ce=>Ce?{...Ce,...we}:null);else throw new Error("Failed to update")},[pe,le]=j.useState(null),je=we=>{le(we)},Ge=we=>{if(!pe)return;const ve={instanceId:crypto.randomUUID(),procedureId:we.id,name:we.name,price:we.cost,type:we.type};L(Ce=>{const nt=Ce[pe]||[];return{...Ce,[pe]:[...nt,ve]}}),I(Ce=>Ce.includes(pe)?Ce:[...Ce,pe]),le(null)},et=()=>{const we={},ve={},Ce=(dt,Ct)=>{we[dt]||(we[dt]=[]);const kt=`condition-${Ct}`;we[dt].includes(kt)||we[dt].push(kt)},nt=(dt,Ct)=>{ve[dt]||(ve[dt]=[]),ve[dt].push(Ct)};return[...se].sort((dt,Ct)=>new Date(dt.date).getTime()-new Date(Ct.date).getTime()).forEach(dt=>{dt.teeth&&Array.isArray(dt.teeth)&&dt.teeth.forEach(Ct=>{Ct.procedures.forEach(kt=>{var Xe;let ze=(Xe=dt.selected_procedures)==null?void 0:Xe.find(Je=>Je.id===kt);ze||(ze=B.find(Je=>Je.id===kt)),ze&&ze.type!=="general"?(Ce(Ct.toothNumber,ze.type),nt(Ct.toothNumber,{name:ze.name,date:new Date(dt.date||dt.createdAt||0).toLocaleDateString(),recordId:dt.id,isPast:!0})):kt&&nt(Ct.toothNumber,{name:`Procedure: ${kt}`,date:new Date(dt.date||dt.createdAt||0).toLocaleDateString(),recordId:dt.id,isPast:!0})})})}),Object.keys(z).forEach(dt=>{const Ct=parseInt(dt),kt=z[Ct];kt&&kt.length>0&&kt.forEach(ze=>{ze.type!=="general"&&(Ce(Ct,ze.type),nt(Ct,{name:ze.name,date:"Current",isPast:!1}))})}),{conditions:we,details:ve}},{conditions:ht,details:_e}=j.useMemo(()=>et(),[se,z,B]),Fe=we=>{const ve=se.find(dt=>dt.id===we);if(!ve)return;V(ve.notes||"");const Ce=ve.selected_procedures.filter(dt=>!ve.teeth.some(Ct=>Ct.procedures.includes(dt.id)));$(Ce.map(dt=>({instanceId:crypto.randomUUID(),procedureId:dt.id,name:dt.name,price:dt.cost,type:dt.type})));const nt={},Ve=[];ve.teeth.forEach(dt=>{const Ct=dt.procedures.map(kt=>{const ze=ve.selected_procedures.find(Xe=>Xe.id===kt)||B.find(Xe=>Xe.id===kt);return{instanceId:crypto.randomUUID(),procedureId:kt,name:ze?ze.name:kt,price:ze?ze.cost:0,type:ze?ze.type:"general"}});Ct.length>0&&(nt[dt.toothNumber]=Ct,Ve.push(dt.toothNumber))}),L(nt),I(Ve),K("plan")},Ye=(we,ve)=>{ve?(L(Ce=>{const nt={...Ce};return nt[ve]=(Ce[ve]||[]).filter(Ve=>Ve.instanceId!==we),nt[ve].length===0&&delete nt[ve],nt}),I(Ce=>Ce)):$(Ce=>Ce.filter(nt=>nt.instanceId!==we))},Ke=(we,ve,Ce)=>{Ce?L(nt=>({...nt,[Ce]:(nt[Ce]||[]).map(Ve=>Ve.instanceId===we?{...Ve,price:ve}:Ve)})):$(nt=>nt.map(Ve=>Ve.instanceId===we?{...Ve,price:ve}:Ve))},be=()=>{window.print()},De=async(we=!0)=>{var ve;if(l){Z(!0);try{const nt=[...F,...Object.values(z).flat()].map(ze=>({id:ze.procedureId,name:ze.name,cost:ze.price,type:ze.type})),dt=Object.keys(z).map(Number).map(ze=>({toothNumber:ze,procedures:(z[ze]||[]).map(Xe=>Xe.procedureId),notes:H})),Ct={patientId:l.id,teeth:dt,selectedProcedures:nt,notes:H};let kt;if(Ne?((ve=se.find(Xe=>Xe.id===Ne))==null?void 0:ve.status)==="draft"?kt=await ce(`/api/dental/${Ne}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ct)}):kt=await ce("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ct)}):kt=await ce("/api/dental",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ct)}),kt.ok){const ze=await kt.json();ke(ze.id);const Xe=await ce(`/api/dental/patient/${l.id}`);if(Xe.ok){const Je=await Xe.json();G(Je)}we?Ie(!0):setTimeout(()=>alert("Notes and procedures saved successfully."),100)}else alert("Failed to save dental record.")}catch(Ce){console.error(Ce),alert("Error saving record.")}finally{Z(!1)}}};return i.jsxs("div",{className:"dental-page-container printable-section",children:[i.jsxs("header",{className:"dental-header",children:[i.jsxs("div",{className:"dental-title-group",children:[i.jsx(aa,{className:"dental-title-icon"}),i.jsxs("div",{children:[i.jsx("h1",{className:"dental-title",children:"Dental Report"}),i.jsx("p",{className:"dental-subtitle",children:"Create new dental records and bills"})]}),i.jsxs("div",{className:"numbering-toggle",style:{marginLeft:"auto",marginRight:"16px",display:"flex",gap:"4px",background:"var(--dp-bg-sec)",padding:"4px",borderRadius:"8px"},children:[i.jsx("button",{onClick:()=>O("universal"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="universal"?"var(--dp-card-bg)":"transparent",boxShadow:C==="universal"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="universal"?"var(--dp-text)":"var(--dp-text-sec)"},children:"Universal"}),i.jsx("button",{onClick:()=>O("fdi"),style:{padding:"4px 8px",borderRadius:"6px",border:"none",background:C==="fdi"?"var(--dp-card-bg)":"transparent",boxShadow:C==="fdi"?"0 1px 2px rgba(0,0,0,0.1)":"none",cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:C==="fdi"?"var(--dp-text)":"var(--dp-text-sec)"},children:"FDI"})]})]}),l&&i.jsxs("div",{className:"selected-patient-header-group",children:[i.jsxs("div",{className:"header-patient-info",children:[i.jsx("div",{className:"patient-avatar small",children:l.name.charAt(0).toUpperCase()}),i.jsxs("div",{className:"header-patient-text",children:[i.jsxs("div",{className:"header-patient-name-row",children:[i.jsx("span",{className:"header-patient-name",children:l.name}),i.jsx("button",{onClick:()=>f(!0),className:"icon-button-sm text-gray-500 hover:text-blue-600 no-print",title:"Edit Patient",children:i.jsx(xc,{size:12})})]}),i.jsxs("span",{className:"header-patient-meta",children:[l.gender," / ",l.age,"y  ",l.phone]})]}),i.jsx("button",{onClick:W,className:"header-close-patient-btn no-print",title:"Change Patient",children:i.jsx(zt,{size:16})})]}),i.jsx("div",{className:"header-search-wrapper no-print",children:i.jsxs("div",{className:"search-input-wrapper header-variant",children:[i.jsx(Un,{className:"search-icon-overlay",size:16}),i.jsx("input",{type:"text",placeholder:"Search patient...",className:"dental-search-input header-input",value:t,onChange:re}),s&&i.jsx("div",{className:"search-spinner small"}),r.length>0&&i.jsx("div",{className:"search-results-dropdown header-dropdown",children:r.map(we=>i.jsxs("div",{onClick:()=>X(we),className:"search-result-item",children:[i.jsxs("div",{children:[i.jsx("span",{className:"patient-name-highlight",children:we.name}),i.jsxs("div",{className:"patient-meta",children:[we.age," yrs / ",we.gender,"  ",we.phone]})]}),i.jsx(mr,{size:16,color:"var(--dp-text-sec)"})]},we.id))}),t.length>=2&&!s&&r.length===0&&i.jsxs("div",{className:"search-results-dropdown header-dropdown",style:{padding:"12px",textAlign:"center"},children:[i.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--dp-text-sec)",marginBottom:"8px"},children:['No match for "',t,'"']}),i.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:(p||v)&&i.jsx("button",{type:"button",onClick:()=>ae(p?"phone":"name"),className:"register-new-btn-sm",children:"Create"})})]})]})})]}),i.jsx("div",{className:"flex gap-2",children:i.jsx("button",{onClick:()=>e(-1),className:"dental-back-btn no-print",children:"Back"})})]}),!l&&i.jsxs("div",{className:"patient-search-container",children:[!l&&i.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"24px",color:"var(--dp-text)"},children:"Who is this for?"}),i.jsxs("div",{className:"search-input-wrapper",children:[i.jsx(Un,{className:"search-icon-overlay",size:20}),i.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"dental-search-input",value:t,onChange:re,autoFocus:!0}),s&&i.jsx("div",{className:"search-spinner"})]}),r.length>0&&i.jsx("div",{className:"search-results-dropdown",children:r.map(we=>i.jsxs("div",{onClick:()=>X(we),className:"search-result-item",children:[i.jsxs("div",{children:[i.jsx("span",{className:"patient-name-highlight",children:we.name}),i.jsxs("div",{className:"patient-meta",children:[we.age," yrs / ",we.gender,"  ",we.phone]})]}),i.jsx(mr,{size:18,color:"var(--dp-text-sec)"})]},we.id))}),t.length>=2&&!s&&r.length===0&&i.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[i.jsxs("p",{style:{color:"var(--dp-text-sec)",marginBottom:"15px"},children:['No patients found matching "',t,'".']}),i.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:(p||v)&&i.jsxs("button",{type:"button",onClick:()=>ae(p?"phone":"name"),className:"register-new-btn",style:{backgroundColor:"var(--dp-card-bg)",border:"1px solid var(--dp-primary)",padding:"8px 16px",borderRadius:"8px"},children:['Create "',t,'"']})})]}),!l&&i.jsx("div",{style:{marginTop:"32px"},children:i.jsx("button",{onClick:()=>Y(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Manage Procedures"})}),!l&&(_||b.length>0)&&i.jsxs("div",{className:"recent-registered-section",children:[i.jsx("div",{className:"recent-registered-label",children:"Recent Patients"}),i.jsx("div",{className:"recent-list",children:_?[1,2,3].map(we=>i.jsxs("div",{className:"recent-patient-pill",style:{cursor:"default"},children:[i.jsxs("div",{className:"recent-name-container",children:[i.jsx(ee,{width:100,height:18}),i.jsx(ee,{width:30,height:20})]}),i.jsx("div",{className:"recent-info",children:i.jsx(ee,{width:80,height:14})})]},we)):b.map(we=>i.jsxs("div",{className:"recent-patient-pill",onClick:()=>X(we),children:[i.jsxs("div",{className:"recent-name-container",children:[i.jsx("span",{className:"recent-name",children:we.name||"New Patient"}),we.token&&i.jsxs("span",{className:"recent-token",children:["#",we.token]})]}),i.jsxs("div",{className:"recent-info",children:[we.age?`${we.age} yrs`:"",we.age&&we.gender?" / ":"",we.gender||""]})]},we.id))})]})]}),l&&i.jsx("div",{className:"dental-workspace",children:i.jsxs("div",{className:"dental-grid",children:[i.jsxs("div",{className:"chart-section",children:[i.jsx("div",{className:"dental-card chart-card-scroll",children:i.jsx(t5e,{selectedTeeth:P,toothConditions:ht,toothDetails:_e,onToothClick:je,onEditPastRecord:Fe,onPrint:be,numberingSystem:C})}),i.jsxs("div",{className:"dental-card notes-container",children:[i.jsxs("div",{className:"notes-header",children:[i.jsx("h4",{className:"section-title-sm",children:"Clinical Notes"}),i.jsxs("button",{className:"notes-save-btn no-print",onClick:()=>De(!1),disabled:ne,title:"Save notes and procedures without billing",children:[i.jsx(Xs,{size:12})," Save"]})]}),i.jsx("textarea",{className:"notes-area",placeholder:"Enter clinical findings...",value:H,onChange:we=>V(we.target.value)})]})]}),i.jsx("div",{className:"dental-card procedures-section",children:i.jsxs("div",{className:"treatment-plan-container",style:{borderTop:"none"},children:[i.jsxs("div",{className:"sidebar-tabs",children:[i.jsx("button",{onClick:()=>K("plan"),className:q==="plan"?"active":"",children:"Treatment Plan"}),i.jsx("button",{onClick:()=>K("history"),className:q==="history"?"active":"",children:"Visit History"})]}),i.jsx("div",{className:"treatment-plan-list custom-scrollbar",children:q==="plan"?i.jsx(i.Fragment,{children:F.length===0&&Object.keys(z).length===0?i.jsx("div",{className:"no-print",style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"Select a tooth to add procedures."}):i.jsxs(i.Fragment,{children:[F.length>0&&i.jsxs("div",{className:"plan-group",children:[i.jsx("h4",{children:"General"}),F.map(we=>i.jsxs("div",{className:"plan-item",children:[i.jsx("span",{className:"plan-item-name",title:we.name,children:we.name}),i.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[i.jsx("input",{type:"number",value:we.price,onChange:ve=>Ke(we.instanceId,parseFloat(ve.target.value)||0),className:"cost-input"}),i.jsx("button",{onClick:()=>Ye(we.instanceId),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:i.jsx(zt,{size:14})})]})]},we.instanceId))]}),Object.entries(z).map(([we,ve])=>ve.length===0?null:i.jsxs("div",{className:"plan-group",children:[i.jsxs("h4",{children:["Tooth ",Ab(parseInt(we),C)]}),ve.map(Ce=>i.jsxs("div",{className:"plan-item",children:[i.jsx("span",{className:"plan-item-name",title:Ce.name,children:Ce.name}),i.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[i.jsx("input",{type:"number",value:Ce.price,onChange:nt=>Ke(Ce.instanceId,parseFloat(nt.target.value)||0,parseInt(we)),className:"cost-input"}),i.jsx("button",{onClick:()=>Ye(Ce.instanceId,parseInt(we)),style:{background:"none",border:"none",color:"var(--dp-danger)",cursor:"pointer",padding:0},children:i.jsx(zt,{size:14})})]})]},Ce.instanceId))]},we))]})}):i.jsx("div",{className:"history-list",children:se.length===0?i.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--dp-text-sec)",fontSize:"0.85rem"},children:"No past visits found."}):se.map(we=>i.jsxs("div",{className:"history-record-card",children:[i.jsxs("div",{className:"history-record-header",children:[i.jsx("span",{className:"record-date",children:new Date(we.date).toLocaleDateString()}),i.jsx("span",{className:"record-status",children:we.status})]}),i.jsxs("div",{className:"history-record-body",children:[we.teeth.map(ve=>i.jsxs("div",{className:"history-tooth-group",children:[i.jsxs("strong",{children:["Tooth ",Ab(ve.toothNumber,C),":"]})," ",ve.procedures.map(Ce=>{const nt=we.selected_procedures.find(Ve=>Ve.id===Ce)||B.find(Ve=>Ve.id===Ce);return nt?nt.name:Ce}).join(", ")]},ve.toothNumber)),we.notes&&i.jsx("p",{className:"history-notes",children:i.jsxs("em",{children:["Notes: ",we.notes]})}),we.status==="billed"&&i.jsx("div",{className:"history-record-actions mt-3",children:i.jsxs("button",{onClick:()=>{ke(we.id),Ie(!0)},className:"view-bill-btn",children:[i.jsx(aa,{size:14})," View Bill"]})})]})]},we.id))})}),i.jsx("div",{className:"action-footer",children:i.jsx("button",{onClick:()=>De(!0),className:"save-btn",disabled:ne||F.length===0&&Object.keys(z).length===0,children:ne?"Saving...":"Save & Bill"})})]})})]})}),u&&l&&i.jsx(ZFe,{patient:l,onClose:()=>f(!1),onSave:ie}),me&&i.jsx(n5e,{onClose:()=>Y(!1),onUpdate:Q}),pe!==null&&i.jsx(r5e,{toothNumber:pe,procedures:B.map(we=>({id:we.id,name:we.name,cost:we.cost,type:we.type})),history:_e[pe]||[],onSelect:Ge,onClose:()=>le(null),numberingSystem:C}),i.jsx(i5e,{isOpen:xe,recordId:Ne,onClose:()=>{Ie(!1),W()},onBillingComplete:()=>{}})]})},o5e=()=>{var Y,xe,Ie,Ne,ke;const e=Mt(),t=$r(),[n,r]=j.useState(null),[a,s]=j.useState([]),[o,l]=j.useState(!0),[c,u]=j.useState(null),[f,p]=j.useState(!1),[y,v]=j.useState("cash"),[x,b]=j.useState(""),[w,_]=j.useState(""),[T,C]=j.useState(""),[O,E]=j.useState(""),[P,I]=j.useState(""),[F,$]=j.useState(0),z=j.useRef(!1),[L,H]=j.useState(null),[V,ne]=j.useState(!1),Z=de=>{const Q=Math.max(0,Math.min(100,isNaN(de)?0:de));z.current=!0,$(Q);const oe=a.map(re=>({...re,discount_percentage:Q}));s(oe)},q=(de,Q)=>{const oe=[...a];oe[de].discount_percentage=isNaN(Q)?0:Q,s(oe)};j.useEffect(()=>{if(z.current){z.current=!1;return}const de=a.reduce((re,ae)=>re+(ae.price??0),0);if(de===0){$(0);return}const oe=a.reduce((re,ae)=>{const W=(ae.price??0)*((ae.discount_percentage??0)/100);return re+W},0)/de*100;$(re=>Math.abs(re-oe)>.01?oe:re)},[a]);const K=async()=>{if(!n)return u("No record data available to bill."),null;if(a.length===0)return u("Cannot bill an empty procedure list."),null;p(!0),u(null);try{const de=a.map(X=>{const W=X.price,ie=W*((X.discount_percentage??0)/100),pe=W-ie;return{name:X.name,price:X.price,quantity:1,total:pe,item_id:X.id||`proc_${Date.now()}`,type:"service",discount_percentage:X.discount_percentage??0}}),Q={patientId:n.patientId.id,items:de,amount:me,paymentMode:y,type:"dental",related_id:n.id,status:"paid",discountPercentage:F},oe=await ce("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}),re=await oe.json();if(!oe.ok||!re.id)throw new Error(re.message||"Failed to create bill.");if((await ce(`/api/dental/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"billed",billId:re.id})})).ok||console.error("Failed to update dental record status"),r(X=>X?{...X,status:"billed",billId:re.id}:null),y==="credit")try{await ce(`/api/patient-debts/${n.patientId.id}/debts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transaction_date:new Date().toISOString().split("T")[0],debt_value:me,related_bill_id:re.id,notes:`Dental Bill #${re.id}`})})}catch(X){console.error("Failed to create debt entry:",X)}return re.id}catch(de){return console.error("Billing process failed:",de),u(de.message||"Failed to create bill."),null}finally{p(!1)}},se=()=>{window.print()},G=async()=>{await K()&&setTimeout(()=>window.print(),500)};j.useEffect(()=>{const de=t.pathname.split("/"),Q=de[de.length-1];Q?(async()=>{l(!0);try{const[re,ae]=await Promise.all([ce(`/api/dental/${Q}`),ce("/api/clinics/settings").catch(()=>({ok:!1,json:async()=>({})}))]);if(!re.ok)throw new Error("Failed to fetch dental record");const X=await re.json(),W={...X,patientId:X.Patient||X.patientId};if(r(W),ae.ok){const le=await ae.json();_(le.upi_id||""),C(le.name||""),E(le.address||""),I(le.notes||"")}const pe=(W.selected_procedures||W.selectedProcedures||[]).map(le=>({...le,price:le.cost,discount_percentage:0}));s(pe)}catch(re){console.error("Failed to fetch data:",re),u(re.message)}finally{l(!1)}})():(u("No record ID provided."),l(!1))},[t.pathname]);const B=j.useMemo(()=>a.reduce((de,Q)=>de+(Q.price??0),0),[a]),fe=j.useMemo(()=>a.reduce((de,Q)=>{const re=(Q.price??0)*(Q.discount_percentage??0)/100;return de+re},0),[a]),me=j.useMemo(()=>B-fe,[B,fe]);return j.useEffect(()=>{if(me>0&&w){const de=`upi://pay?pa=${w}&pn=${encodeURIComponent(T)}&am=${me.toFixed(2)}&cu=INR`;b(de)}else b("")},[me,w,T]),j.useEffect(()=>{(async()=>{var Q;if(y==="credit"&&((Q=n==null?void 0:n.patientId)!=null&&Q.id)){ne(!0);try{const oe=await ce(`/api/patient-debts/${n.patientId.id}/balance`);if(oe.ok){const re=await oe.json();H(re.netDebt||0)}else H(0)}catch{H(0)}finally{ne(!1)}}})()},[y,(Y=n==null?void 0:n.patientId)==null?void 0:Y.id]),o?i.jsx("div",{className:"pharmacy-billing-page",children:i.jsxs("div",{className:"billing-container",children:[i.jsxs("div",{className:"billing-header no-print",children:[i.jsx("div",{className:"back-button",children:i.jsx(ee,{width:100,height:40,style:{borderRadius:"8px"}})}),i.jsx(ee,{width:300,height:40})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("div",{className:"order-details-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:150,height:24})})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:200,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:150,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:180,height:20})}),i.jsx("div",{className:"info-item",children:i.jsx(ee,{width:150,height:20})})]})]}),i.jsxs("div",{className:"medications-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:120,height:24})})}),i.jsx("div",{className:"p-4",children:i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(ee,{width:30,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:150,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:80,height:20})}),i.jsx("th",{children:i.jsx(ee,{width:100,height:20})})]})}),i.jsx("tbody",{children:[1,2,3,4].map(de=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(ee,{width:20,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:180,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:70,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:70,height:20})}),i.jsx("td",{children:i.jsx(ee,{width:90,height:20})})]},de))})]})})]})]}),i.jsx("aside",{className:"billing-sidebar",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:i.jsx(ee,{width:160,height:24})})}),i.jsxs("div",{className:"space-y-4 p-5",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:100,height:20}),i.jsx(ee,{width:80,height:20})]}),i.jsx("hr",{}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{width:120,height:28}),i.jsx(ee,{width:100,height:28})]}),i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"20px 0"},children:i.jsx(ee,{width:150,height:150})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(ee,{width:"100%",height:45,style:{borderRadius:"8px"}}),i.jsx(ee,{width:"100%",height:45,style:{borderRadius:"8px"}})]})]})]})})]})]})}):c?i.jsxs("div",{className:"error-message-box",children:["Error: ",c]}):n?i.jsxs("div",{className:"pharmacy-billing-page",children:[" ",i.jsxs("div",{className:"billing-container printable-section",children:[i.jsxs("div",{className:"billing-header print-only",children:[i.jsx("div",{className:"clinic-header-left",children:i.jsx("div",{className:"clinic-info-print",children:i.jsxs("div",{className:"clinic-name-and-details-print",children:[i.jsx("h1",{className:"bill-title",children:"DENTAL INVOICE"}),i.jsx("h2",{className:"clinic-name-print",children:T||"Clinic Name"}),(O||P)&&i.jsxs("div",{className:"clinic-details-print",children:[O&&i.jsx("span",{className:"small-text clinic-address",children:O}),P&&i.jsx("span",{className:"small-text clinic-notes",children:P})]})]})})}),i.jsxs("div",{className:"patient-info-grid print-only-patient-details",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",((xe=n.patientId)==null?void 0:xe.name)||"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",((Ie=n.patientId)==null?void 0:Ie.patient_token_number)??"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Date"]})," ",new Date(n.date||n.createdAt).toLocaleDateString()]})]})]}),i.jsxs("header",{className:"billing-header no-print",children:[i.jsx("button",{onClick:()=>e(-1),className:"back-button",children:i.jsx(rn,{className:"w-4 h-4"})}),i.jsx("h1",{children:"Dental Bill"})]}),i.jsxs("div",{className:"billing-layout",children:[i.jsxs("main",{className:"order-content",children:[i.jsxs("section",{className:"order-details-card no-print",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Patient Information"})}),i.jsxs("div",{className:"patient-info-grid",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(mr,{size:16})," Patient Name"]})," ",((Ne=n.patientId)==null?void 0:Ne.name)||"N/A"," "]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(ka,{size:16})," Token"]})," ",((ke=n.patientId)==null?void 0:ke.patient_token_number)??"N/A"]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(aa,{size:16})," Record ID"]})," ",n.id.substring(n.id.length-6)]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("strong",{children:[i.jsx(pi,{size:16})," Date"]})," ",new Date(n.createdAt).toLocaleDateString()]})]})]}),i.jsxs("section",{className:"medications-card",children:[i.jsx("div",{className:"card-header no-print",children:i.jsx("h2",{children:"Procedures"})}),a.length>0?i.jsxs("table",{className:"medications-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"S.No."}),i.jsx("th",{children:"PROCEDURE"}),i.jsx("th",{children:"PRICE"}),i.jsx("th",{children:"DIS %"}),i.jsx("th",{children:"AMT"})]})}),i.jsx("tbody",{children:a.map((de,Q)=>{const oe=de.price??0,re=oe*(de.discount_percentage??0)/100,ae=oe-re;return i.jsxs("tr",{children:[i.jsx("td",{children:Q+1}),i.jsx("td",{children:de.name}),i.jsx("td",{children:de.price.toFixed(2)}),i.jsxs("td",{children:[i.jsx("input",{type:"number",value:de.discount_percentage===0?"":de.discount_percentage,onChange:X=>q(Q,parseFloat(X.target.value)),min:"0",max:"100",className:"discount-input-table"}),"%"]}),i.jsx("td",{children:ae.toFixed(2)})]},Q)})})]}):i.jsx("p",{className:"p-4 text-gray-500",children:"No procedures selected."})]}),i.jsxs("div",{className:"bill-summary-print print-only",children:[i.jsxs("div",{className:"bill-summary-details",children:[i.jsxs("div",{className:"summary-row-print",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",B.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row-print",children:[i.jsxs("span",{children:["Discount (",F.toFixed(2),"%)"]}),i.jsxs("span",{children:["- ",fe.toFixed(2)]})]}),i.jsx("div",{className:"print-only-total",children:i.jsxs("strong",{children:["Grand Total: ",me.toFixed(2)]})})]}),x&&i.jsxs("div",{className:`qr-code-container qr-code-printable-section ${y!=="upi"?"hide-on-screen":""}`,children:[i.jsx(oa,{value:x,size:80}),i.jsx("p",{className:"print-only-upi-text",children:"Scan to pay"})]})]})]}),i.jsx("aside",{className:"billing-sidebar no-print",children:i.jsxs("div",{className:"billing-summary-card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h2",{children:"Billing Summary"})}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["",B.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Total Discount"}),i.jsxs("span",{children:["- ",fe.toFixed(2)]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Discount Percentage"}),i.jsxs("div",{className:"discount-input-wrapper",children:[i.jsx("input",{type:"number",value:F===0?"":F,onChange:de=>Z(parseFloat(de.target.value)),min:"0",max:"100",className:"discount-input-total",disabled:f||n.status==="billed"}),"%"]})]}),i.jsxs("div",{className:"summary-row grand-total-row",children:[i.jsx("strong",{children:"Grand Total"}),i.jsxs("strong",{children:["",me.toFixed(2)]})]}),i.jsx("div",{className:"qr-code-container",children:x?i.jsxs(i.Fragment,{children:[i.jsx(oa,{value:x,size:128}),i.jsx("p",{children:"Scan to pay using UPI"})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"UPI QR code not available."})}),i.jsxs("div",{className:"payment-mode-section",children:[i.jsx("label",{className:"info-item",children:i.jsx("strong",{children:"Payment Mode"})}),i.jsxs("select",{value:y,onChange:de=>v(de.target.value),className:"payment-mode-select",disabled:f||n.status==="billed",children:[i.jsx("option",{value:"cash",children:"Cash"}),i.jsx("option",{value:"upi",children:"UPI"}),i.jsx("option",{value:"card",children:"Card"}),i.jsx("option",{value:"no_cash_insurance",children:"Insurance"}),i.jsx("option",{value:"credit",children:"Credit (Debt)"})]})]}),y==="credit"&&i.jsxs("div",{className:"debt-info-section",style:{marginTop:"10px",padding:"12px",backgroundColor:"rgba(220, 53, 69, 0.1)",borderRadius:"8px",border:"1px solid rgba(220, 53, 69, 0.3)"},children:[i.jsx("div",{style:{fontWeight:"bold",color:"#dc3545",marginBottom:"8px"},children:" Debt to Patient"}),V?i.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"Loading debt info..."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"Current Debt:"}),i.jsxs("strong",{style:{color:L&&L>0?"#dc3545":"#28a745"},children:["",(L||0).toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsx("span",{children:"This Bill:"}),i.jsxs("strong",{children:["+ ",me.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"1px solid rgba(220, 53, 69, 0.3)",paddingTop:"8px",marginTop:"8px"},children:[i.jsx("span",{children:i.jsx("strong",{children:"New Total Debt:"})}),i.jsxs("strong",{style:{color:"#dc3545"},children:["",((L||0)+me).toFixed(2)]})]})]})]}),i.jsx("div",{className:"bill-actions mt-6 flex flex-col gap-3",children:n.status!=="billed"?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:se,className:"secondary-button print-preview-button no-print",disabled:f,children:"Print Preview"}),i.jsx("button",{onClick:G,className:"primary-button",disabled:f,children:f?"Processing...":"Finalise and Bill"})]}):i.jsxs("div",{className:"p-3 bg-green-50 text-green-700 text-center rounded-lg font-medium border border-green-100 flex items-center justify-center gap-2",children:[i.jsx(Tl,{size:20})," Bill Generated"]})})]})})]}),i.jsx("footer",{className:"billing-footer print-only",children:i.jsx("p",{children:"Computer generated invoice."})})]})]}):i.jsx("div",{className:"error-message-box",children:"No record found."})},l5e=()=>{const e=Mt(),t=$r(),[n,r]=j.useState(""),[a,s]=j.useState([]),[o,l]=j.useState(!1),[c,u]=j.useState(null),[f,p]=j.useState([]),[y,v]=j.useState([]),[x,b]=j.useState(!1),[w,_]=j.useState(!1),[T,C]=j.useState("idle"),[O,E]=j.useState(null),[P,I]=j.useState(""),F=j.useMemo(()=>pd(async de=>{if(de.trim().length<2){s([]),l(!1);return}l(!0);try{const Q=new URLSearchParams({search:encodeURIComponent(de),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),oe=await ce(`/api/patients?${Q.toString()}`);if(oe.ok){const re=await oe.json();s(re.patients||[])}}catch(Q){console.error("Search failed",Q)}finally{l(!1)}},300),[]),$=de=>{const Q=de.target.value;r(Q),Q.length>=2?(l(!0),F(Q)):(s([]),l(!1))},z=j.useCallback(async de=>{_(!0);try{const Q=await ce(`/api/patient-files/${de}`);if(Q.ok){const oe=await Q.json();v(oe)}}catch(Q){console.error("Failed to fetch files",Q)}finally{_(!1)}},[]),L=de=>{u({id:de.id,name:de.name,age:de.age,gender:de.gender,phone:de.phone,token:de.token}),r(""),I(""),s([]),E(null),C("idle"),p([]),z(de.id)},H=()=>{u(null),p([]),v([]),C("idle")};ye.useEffect(()=>{if(t.state&&t.state.patient){const de=t.state.patient;L(de)}},[t.state]);const V=de=>{if(de.target.files){const Q=Array.from(de.target.files);p(oe=>[...oe,...Q]),C("idle")}},ne=de=>{p(Q=>Q.filter((oe,re)=>re!==de))},Z=async de=>{if(confirm("Are you sure you want to delete this file?"))try{(await ce(`/api/patient-files/${de}`,{method:"DELETE"})).ok?v(oe=>oe.filter(re=>re.id!==de)):alert("Failed to delete file.")}catch(Q){console.error("Delete error",Q),alert("Error deleting file.")}},q=de=>de.startsWith("image/")?i.jsx(sR,{size:20}):de==="application/pdf"?i.jsx(aa,{size:20}):de.startsWith("video/")?i.jsx(MJ,{size:20}):de.startsWith("audio/")?i.jsx(yZ,{size:20}):i.jsx(TC,{size:20}),K=de=>{if(de===0)return"0 Bytes";const Q=1024,oe=["Bytes","KB","MB","GB"],re=Math.floor(Math.log(de)/Math.log(Q));return parseFloat((de/Math.pow(Q,re)).toFixed(2))+" "+oe[re]},se=async()=>{if(!(!c||f.length===0)){b(!0),E(null),C("idle");try{const de=new FormData;f.forEach(re=>{de.append("files",re)});const Q=localStorage.getItem("authToken"),oe=await fetch(`/api/patient-files/${c.id}`,{method:"POST",headers:{Authorization:`Bearer ${Q}`},body:de});if(oe.ok){C("success");const re=await oe.json();re.files&&v(ae=>[...re.files,...ae]),setTimeout(()=>{p([]),C("idle")},1500)}else throw new Error("Upload failed")}catch(de){console.error("Upload error",de),E("Failed to upload files. Please try again."),C("error")}finally{b(!1)}}},[G,B]=j.useState(null),[fe,me]=j.useState(""),Y=j.useRef(null),xe=()=>{Y.current&&(Y.current.value="",Y.current.click())},Ie=de=>{B(de.id),me(de.original_name)},Ne=()=>{B(null),me("")},ke=async de=>{if(fe.trim())try{(await ce(`/api/patient-files/${de}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newName:fe})})).ok?(v(oe=>oe.map(re=>re.id===de?{...re,original_name:fe}:re)),B(null)):alert("Failed to rename file.")}catch(Q){console.error("Rename error",Q),alert("Error renaming file.")}};return i.jsxs("div",{className:"files-page-container",children:[i.jsx("div",{className:"files-page-header",children:i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>e(-1),className:"back-button",children:[i.jsx(rn,{size:18})," Back"]}),i.jsx("h1",{className:"files-page-title",children:"Patient Files"})]})}),c?i.jsxs("div",{className:"glass-card fade-in",children:[i.jsxs("div",{className:"selected-patient-header",children:[i.jsx("div",{className:"patient-avatar",children:c.name.charAt(0).toUpperCase()}),i.jsxs("div",{className:"selected-patient-info",children:[i.jsx("h2",{className:"selected-patient-name",children:c.name}),i.jsxs("div",{className:"selected-patient-details",children:[i.jsxs("span",{children:["Token: #",c.token||"NA"]}),c.gender&&i.jsxs("span",{children:[" ",c.gender]}),c.age&&i.jsxs("span",{children:[" ",c.age," yrs"]}),c.phone&&i.jsxs("span",{children:[" ",c.phone]})]}),i.jsx("input",{ref:Y,type:"file",multiple:!0,onChange:V,style:{display:"none"}})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:xe,className:"primary-btn",style:{padding:"8px 16px"},children:[i.jsx(Qk,{size:18}),i.jsx("span",{children:"Upload"})]}),i.jsx("button",{onClick:H,className:"secondary-btn change-patient-btn",children:"Change Patient"})]})]}),(y.length>0||w)&&i.jsxs("div",{className:"existing-files-section mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-700 flex items-center gap-2 m-0",children:[i.jsx(TC,{className:"text-indigo-500",size:20}),"Uploaded Files (",y.length,")"]}),i.jsxs("div",{className:"relative",style:{width:"300px"},children:[i.jsx(Un,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),i.jsx("input",{type:"text",placeholder:"Search in Drive...",value:P,onChange:de=>I(de.target.value),className:"w-full pl-11 pr-4 py-2.5 rounded-full border-none bg-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 transition-all shadow-sm",style:{color:"var(--files-text-primary)",background:"var(--files-bg-hover)"}})]})]}),w?i.jsx("div",{className:"flex justify-center p-8",children:i.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[i.jsx(ee,{width:300,height:20}),i.jsx(ee,{width:300,height:20}),i.jsx(ee,{width:300,height:20})]})}):i.jsxs("div",{className:"file-grid",children:[y.filter(de=>de.original_name.toLowerCase().includes(P.toLowerCase())).map(de=>{const Q=de.mime_type.startsWith("image/");return i.jsxs("div",{className:"file-card-item fade-in",children:[i.jsxs("div",{className:"file-preview-container",children:[Q?i.jsx("img",{src:de.url,alt:de.original_name,className:"file-thumbnail-img",loading:"lazy"}):i.jsx("div",{className:"file-thumbnail-icon",children:q(de.mime_type)}),i.jsxs("div",{className:"file-actions-overlay",children:[i.jsx("a",{href:de.url,download:!0,target:"_blank",rel:"noopener noreferrer",className:"action-icon-btn download",title:"Download",children:i.jsx(Rq,{size:18})}),i.jsx("button",{onClick:()=>Ie(de),className:"action-icon-btn rename",title:"Rename",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})})}),i.jsx("button",{onClick:()=>Z(de.id),className:"action-icon-btn delete",title:"Delete",children:i.jsx(zt,{size:18})})]})]}),i.jsx("div",{className:"file-card-meta",children:G===de.id?i.jsxs("div",{className:"rename-input-group compact",children:[i.jsx("input",{type:"text",value:fe,onChange:oe=>me(oe.target.value),className:"rename-input",autoFocus:!0,onKeyDown:oe=>{oe.key==="Enter"&&ke(de.id),oe.key==="Escape"&&Ne()}}),i.jsxs("div",{className:"rename-actions",children:[i.jsx("button",{onClick:()=>ke(de.id),className:"icon-btn text-green-600",children:i.jsx(Tl,{size:14})}),i.jsx("button",{onClick:Ne,className:"icon-btn text-red-500",children:i.jsx(zt,{size:14})})]})]}):i.jsxs("div",{className:"file-name-row",children:[i.jsx("div",{className:"file-icon-small",children:Q?i.jsx(sR,{size:16,className:"text-purple-500"}):q(de.mime_type)}),i.jsx("a",{href:de.url,target:"_blank",rel:"noopener noreferrer",className:"file-name-link truncate",title:de.original_name,children:de.original_name})]})})]},de.id)}),y.filter(de=>de.original_name.toLowerCase().includes(P.toLowerCase())).length===0&&P&&i.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx(Un,{size:48,className:"text-slate-200"}),i.jsxs("p",{children:['No files found matching "',P,'"']})]})})]})]}),(f.length>0||T==="success"||O)&&i.jsxs("div",{className:"upload-section mt-8 pt-8 border-t border-slate-200",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-slate-700",children:f.length>0?"Pending Uploads":"Upload Status"}),O&&i.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-red-100",children:[i.jsx(Wr,{size:20}),O]}),T==="success"&&i.jsxs("div",{className:"bg-green-50 text-green-600 p-4 rounded-xl mb-6 flex items-center gap-3 border border-green-100",children:[i.jsx(Tl,{size:20}),"Files uploaded successfully!"]}),f.length>0&&i.jsx("div",{className:"file-list",children:f.map((de,Q)=>i.jsxs("div",{className:"file-item fade-in",children:[i.jsx("div",{className:"file-icon",children:i.jsx(TC,{size:20})}),i.jsxs("div",{className:"file-info",children:[i.jsx("div",{className:"file-name",title:de.name,children:de.name}),i.jsx("div",{className:"file-size",children:K(de.size)})]}),i.jsx("button",{onClick:()=>ne(Q),className:"remove-file-btn",title:"Remove file",children:i.jsx(zt,{size:16})})]},Q))}),f.length>0&&i.jsxs("div",{className:"action-buttons",children:[i.jsx("button",{onClick:()=>p([]),className:"secondary-btn",disabled:x,children:"Clear"}),i.jsx("button",{onClick:se,className:"primary-btn",disabled:x,children:x?i.jsx(i.Fragment,{children:"Uploading..."}):i.jsxs(i.Fragment,{children:[i.jsx(Qk,{size:18}),"Upload ",f.length," File",f.length!==1?"s":""]})})]})]})]}):i.jsxs("div",{className:"glass-card fade-in",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2 text-slate-700",children:[i.jsx(Un,{className:"text-indigo-500"}),"Search Patient"]}),i.jsxs("div",{className:"search-input-wrapper",children:[i.jsx(Un,{className:"search-icon-files",size:20}),i.jsx("input",{type:"text",placeholder:"Enter patient name, phone, or token...",value:n,onChange:$,className:"search-input",autoFocus:!0})]}),o?i.jsx("div",{className:"patient-results-list",children:[1,2,3].map(de=>i.jsxs("div",{className:"patient-result-item",style:{cursor:"default"},children:[i.jsx(ee,{width:150,height:20}),i.jsx(ee,{width:100,height:16})]},de))}):a.length>0&&i.jsx("ul",{className:"patient-results-list",children:a.map(de=>i.jsxs("li",{className:"patient-result-item",onClick:()=>L(de),children:[i.jsxs("div",{children:[i.jsx("div",{className:"patient-name-text",children:de.name}),i.jsxs("div",{className:"patient-meta",children:[i.jsxs("span",{children:["#",de.token||"N/A"]}),de.gender&&i.jsx("span",{children:de.gender}),de.age&&i.jsxs("span",{children:[de.age," yrs"]})]})]}),i.jsx("div",{className:"patient-phone",children:de.phone})]},de.id))}),n.length>=2&&!o&&a.length===0&&i.jsxs("div",{style:{textAlign:"center",padding:"30px",color:"#94a3b8"},children:['No patients found matching "',n,'"']})]})]})},iD=j.lazy(()=>ZS(()=>import("./AddPatientPage-2oZE-H5p.js"),__vite__mapDeps([2,3]))),Mz=j.lazy(()=>ZS(()=>import("./EditComplaintPage-nT_jXBjx.js"),__vite__mapDeps([0,1])));function c5e(){const[e,t]=j.useState(!1),[n,r]=j.useState(null),[a,s]=j.useState(!0),[o,l]=j.useState(null),[c,u]=j.useState(!1),f=O=>{r(O),t(!0),O.role==="admin"&&!O.has_seen_tutorial&&u(!0)},p=()=>{t(!1),r(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};j.useEffect(()=>{const O=localStorage.getItem("authToken"),E=localStorage.getItem("currentUser");if(O&&E)try{const P=JSON.parse(E);r(P),t(!0),P.role==="admin"&&!P.has_seen_tutorial&&u(!0)}catch(P){console.error("Error parsing stored user data:",P),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}s(!1)},[]);const{data:y}=qMe(e&&!!n);j.useEffect(()=>{y?l(y):e||l(null)},[y,e]);const[v,x]=j.useState(null),[b,w]=j.useState(!1);j.useEffect(()=>{const O=E=>{E.preventDefault(),x(E),w(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",O),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),w(!1)),()=>{window.removeEventListener("beforeinstallprompt",O)}},[]),j.useEffect(()=>{const O=window.matchMedia("(prefers-color-scheme: dark)"),E=()=>{O.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return E(),O.addEventListener("change",E),()=>{O.removeEventListener("change",E),document.body.classList.remove("dark-mode")}},[]);const _=j.useCallback(async()=>{if(!v){console.log("Install prompt event not available.");return}const O=v;O.prompt();const{outcome:E}=await O.userChoice;console.log(`User response to the install prompt: ${E}`),x(null),w(!1)},[v]),T=async()=>{if(n)try{(await ce(`/api/users/${n.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(r(E=>E?{...E,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...n,has_seen_tutorial:!0})),u(!1)):console.error("Failed to update tutorial status on backend.")}catch(O){console.error("Error marking tutorial as seen:",O)}};return a?i.jsx(Om,{}):i.jsx(oY,{clientId:"277898779560-33obduhn8r758rini4qagetdrupvisri.apps.googleusercontent.com",children:i.jsx(BQ,{children:i.jsx(FQ,{children:i.jsx($Q,{children:i.jsxs(CQ,{children:[i.jsx(LQ,{children:i.jsxs(Am,{children:[i.jsx(gt,{path:"/login",element:e?i.jsx(an,{to:"/dashboard"}):i.jsx(pIe,{onLoginSuccess:f})}),i.jsx(gt,{path:"/register",element:e?i.jsx(an,{to:"/dashboard"}):i.jsx(mIe,{})}),i.jsx(gt,{path:"/handle-complaint-url",element:e?i.jsx(q3e,{}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/live-api",element:e?i.jsx(Mve,{}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/create-lab-order",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(yW,{currentUser:n})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/manage-admission",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(hI,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/lab/report/:orderId",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(Cz,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/lab/enter-report/:orderId",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(Cz,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/add-patient",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(j.Suspense,{fallback:i.jsx(Om,{}),children:i.jsx(iD,{})})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/billing",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(z4e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/edit-complaint/:recordId",element:e&&n?i.jsx(j.Suspense,{fallback:i.jsx(Om,{}),children:i.jsx(Mz,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/edit-complaint/patient/:patientId",element:e&&n?i.jsx(j.Suspense,{fallback:i.jsx(Om,{}),children:i.jsx(Mz,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/edit-pharmacy-order/:orderId",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(FW,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/guide",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(JFe,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/*",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:u5e(n.role,n,ce)}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/lab/view-report/:orderId",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(X4e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/lab/search-report",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(J4e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/patient/:patientId/lab-reports",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(Z4e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/patient/:patientId/pharmacy-orders",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(q4e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/inventory",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx($W,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/inventory/add",element:e&&n?i.jsx(an,{to:"/dashboard/purchase",replace:!0}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/dental",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(s5e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/dental-billing/:id",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(o5e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/inventory/edit/:id",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(CW,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/lab-inventory",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(pI,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/patient/:patientId/complaints",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(E4e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/patient/:patientId/admission-bill/:billId",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(Tz,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/patient/:patientId/admission-billing",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(Tz,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/start-subscription/:patientId",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(p3e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/start-clinic-subscription",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(v3e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/refill-reminders",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(z3e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/create-custom-bill",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(gW,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/pharmacy-billing/:orderId",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(CLe,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/lab-billing/:orderId",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(TLe,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/doctor-billing/:queueId",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(ALe,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/custom-tables",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(l6e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/custom-tables/:id",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(c6e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboards",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(u6e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboards/new",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(Oz,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboards/:id",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(f6e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboards/:id/edit",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(Oz,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/analysis",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(o6e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/clinic-hub",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(kLe,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"/dashboard/files",element:e&&n?i.jsx(An,{user:n,onLogout:p,showInstallPrompt:b,onInstallClick:_,clinicProPlanStatus:o,children:i.jsx(l5e,{})}):i.jsx(an,{to:"/login"})}),i.jsx(gt,{path:"*",element:i.jsx(an,{to:e?"/dashboard":"/login"})})]})}),c&&(n==null?void 0:n.role)==="admin"&&i.jsx($3e,{onClose:()=>u(!1),onMarkAsSeen:T}),e&&n&&i.jsx(d5e,{user:n}),e&&n&&i.jsx(SMe,{user:n})]})})})})})}const u5e=(e,t,n)=>{switch(e){case"superadmin":return i.jsxs(Am,{children:[i.jsx(gt,{index:!0,element:i.jsx(I3e,{})}),i.jsx(gt,{path:"clinic-subscriptions",element:i.jsx(m3e,{})}),i.jsx(gt,{path:"clinic-subscriptions/add",element:i.jsx(g3e,{})}),i.jsx(gt,{path:"clinic-subscriptions/edit/:id",element:i.jsx(y3e,{})}),i.jsx(gt,{path:"users",element:i.jsx(x3e,{})})," ",i.jsx(gt,{path:"*",element:i.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return i.jsxs(Am,{children:[i.jsx(gt,{index:!0,element:i.jsx(GIe,{})}),i.jsx(gt,{path:"search-patient",element:i.jsx(_x,{})}),i.jsx(gt,{path:"patients",element:i.jsx(eD,{})}),i.jsx(gt,{path:"doctor",element:i.jsx(sw,{})}),i.jsx(gt,{path:"staff",element:i.jsx(n3e,{fetchWithAuth:n})}),i.jsx(gt,{path:"staff/add",element:i.jsx(C4e,{clinicId:t==null?void 0:t.clinic_id})}),i.jsx(gt,{path:"staff/edit/:id",element:i.jsx(T4e,{})}),i.jsx(gt,{path:"roles",element:i.jsx(p6e,{})}),i.jsx(gt,{path:"patients/add",element:i.jsx(j.Suspense,{fallback:i.jsx(Om,{}),children:i.jsx(iD,{})})}),i.jsx(gt,{path:"inventory",element:i.jsx(_W,{})}),i.jsx(gt,{path:"inventory/edit/:id",element:i.jsx(CW,{})}),i.jsx(gt,{path:"distributors",element:i.jsx(Ez,{})}),i.jsx(gt,{path:"patient-debts",element:i.jsx(Pz,{})})," ",i.jsx(gt,{path:"purchase",element:i.jsx(Az,{})})," ",i.jsx(gt,{path:"queue",element:i.jsx(sw,{})}),i.jsx(gt,{path:"subscriptions",element:i.jsx(d3e,{})}),i.jsx(gt,{path:"subscriptions/add",element:i.jsx(h3e,{})}),i.jsx(gt,{path:"subscriptions/edit/:id",element:i.jsx(f3e,{})}),i.jsx(gt,{path:"manage-admission",element:i.jsx(hI,{})}),i.jsx(gt,{path:"reception",element:i.jsx(fz,{currentUser:t})}),i.jsx(gt,{path:"lab",element:i.jsx(wz,{})}),i.jsx(gt,{path:"pharmacy-queue",element:i.jsx(Sz,{})}),i.jsx(gt,{path:"*",element:i.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return i.jsxs(Am,{children:[i.jsx(gt,{index:!0,element:i.jsx(an,{to:"search-patient",replace:!0})}),i.jsx(gt,{path:"search-patient",element:i.jsx(_x,{})}),i.jsx(gt,{path:"queue",element:i.jsx(sw,{})}),i.jsx(gt,{path:":patientId",element:i.jsx(sw,{})}),i.jsx(gt,{path:"add-patient",element:i.jsx(j.Suspense,{fallback:i.jsx(Om,{}),children:i.jsx(iD,{})})}),i.jsx(gt,{path:"*",element:i.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return i.jsxs(Am,{children:[i.jsx(gt,{index:!0,element:i.jsx(fz,{currentUser:t})}),i.jsx(gt,{path:"all-patients",element:i.jsx(eD,{})}),i.jsx(gt,{path:"search-patient",element:i.jsx(_x,{})}),i.jsx(gt,{path:"*",element:i.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return i.jsx(wz,{});case"pharmacy":return i.jsxs(Am,{children:[i.jsx(gt,{index:!0,element:i.jsx(Sz,{})}),i.jsx(gt,{path:"inventory",element:i.jsx($W,{})}),i.jsx(gt,{path:"settings",element:i.jsx(_4e,{})}),i.jsx(gt,{path:"add-order",element:i.jsx(U4e,{})}),i.jsx(gt,{path:"edit-pharmacy-order/:orderId",element:i.jsx(FW,{})}),i.jsx(gt,{path:"orders/:orderId",element:i.jsx(i3e,{})}),i.jsx(gt,{path:"search-patient-records",element:i.jsx(_x,{})}),i.jsx(gt,{path:"distributors",element:i.jsx(Ez,{})}),i.jsx(gt,{path:"patient-debts",element:i.jsx(Pz,{})})," ",i.jsx(gt,{path:"purchase",element:i.jsx(Az,{})})," ",i.jsx(gt,{path:"*",element:i.jsx(an,{to:"/dashboard",replace:!0})})]});default:return i.jsxs("div",{children:["Unknown role (",e,") or dashboard not implemented."]},e)}},An=({user:e,onLogout:t,children:n,showInstallPrompt:r,onInstallClick:a,clinicProPlanStatus:s})=>{const o=Mt(),[l,c]=j.useState(!1),[u,f]=j.useState(window.innerWidth<=768),[p,y]=j.useState(null),[v,x]=j.useState(!1);j.useEffect(()=>gP.subscribe(T=>{x(T)}),[]),j.useEffect(()=>{const T=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),j.useEffect(()=>{(async()=>{if(e!=null&&e.clinic_id)try{const C=await ce("/api/clinics/settings");if(C.ok){const O=await C.json();y(O.logoUrl)}else console.error("Failed to fetch clinic details for display:",C.statusText),y(null)}catch(C){console.error("Error fetching clinic details for display:",C),y(null)}else y(null)})()},[e==null?void 0:e.clinic_id]);const b=()=>{c(!l)},{toggleCommandBar:w,isOpen:_}=Pc();return i.jsxs("div",{className:"dashboard-layout",children:[" ",i.jsxs("nav",{className:"app-header no-print",children:[i.jsxs("div",{className:"header-left",children:[i.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),o("/dashboard")},className:"logo-container",children:i.jsx("img",{src:p||"/logo.png",alt:"App Logo",className:"logo-image"})}),i.jsxs("div",{className:"title-section",children:[i.jsx("span",{className:"app-title-link",children:"Newtons Ai"}),i.jsxs("span",{className:"user-role-panel",children:["(",e.role.charAt(0).toUpperCase()+e.role.slice(1)," Panel)"]})]})]}),i.jsxs("div",{className:"header-right",children:[r&&i.jsxs("button",{onClick:a,className:"install-button",title:"Install App",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),i.jsx("span",{children:"Install"})]}),i.jsxs("a",{href:"https://store.newtons.in",target:"_blank",rel:"noopener noreferrer",className:"shop-button",title:"Visit Store",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),i.jsx("span",{children:"Shop"})]}),!u&&i.jsxs("button",{onClick:()=>o("/dashboard/guide"),className:"guide-button",title:"User Guide",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),i.jsx("span",{children:"Guide"})]}),s&&(s.hasProPlan?i.jsx("span",{className:"pro-badge",children:"PRO"}):i.jsx("button",{onClick:()=>o("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),!_&&i.jsx("button",{onClick:w,className:"command-bar-button",title:"Search & Commands (Ctrl+K)",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("path",{d:"m21 21-4.3-4.3"})]})}),i.jsx("button",{className:"hamburger-icon",onClick:b,"aria-label":"Open navigation",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),v&&i.jsx("div",{className:"global-loading-bar"})]}),i.jsxs("main",{className:"main-content",children:[i.jsx(xIe,{}),n]}),u?i.jsx(yIe,{user:e,onLogout:t,userRole:e.role,isOpen:l,onClose:b,roleNavigation:uW}):i.jsx(gIe,{user:e,onLogout:t,userRole:e.role,isOpen:l,onClose:b}),!u&&l&&i.jsx("div",{className:"side-panel-overlay",onClick:b}),!u&&l&&i.jsx("div",{className:"side-panel-overlay",onClick:b})]})},d5e=({user:e})=>{const{isOpen:t,closeAssistant:n}=nN(),r=Mt(),[a,s]=j.useState(null),[o,l]=j.useState([]);return j.useEffect(()=>{(async()=>{if(e!=null&&e.clinic_id)try{const[u,f]=await Promise.all([ce("/api/clinics/settings"),ce("/api/staff")]);u.ok&&s(await u.json()),f.ok&&l(await f.json())}catch(u){console.error("Failed to fetch initial AI context",u)}})()},[e.clinic_id]),t?i.jsx("div",{className:"ai-assistant-wrapper",children:i.jsx(dW,{onClose:n,settings:a,staffList:o,onSettingsUpdate:()=>{},onStaffUpdate:()=>{},onHighlight:c=>{c.forEach(u=>{if(u.startsWith("navigate_")){const f=u.replace("navigate_","");r(`/dashboard/analysis?section=${f}`)}else{const f=document.getElementById(u);f&&(f.scrollIntoView({behavior:"smooth",block:"center"}),f.classList.add("ai-highlight-glow"),setTimeout(()=>f.classList.remove("ai-highlight-glow"),2e3))}})}})}):null};xK.createRoot(document.getElementById("root")).render(i.jsx(j.StrictMode,{children:i.jsx(VK,{client:rY,children:i.jsx(c5e,{})})}));export{rn as A,Gu as B,Fb as C,xf as D,$m as E,Zs as F,f9 as G,ka as H,Un as I,aR as J,t5e as K,TN as L,Sf as M,dd as N,SD as O,$x as P,oa as Q,ye as R,ee as S,zr as T,aN as U,rN as V,tR as W,zt as X,B3e as Y,Hc as a,Hq as b,st as c,Xs as d,p9 as e,ce as f,Bn as g,U3e as h,pi as i,i as j,Yr as k,mr as l,RQ as m,Nf as n,JS as o,Pc as p,Vt as q,j as r,Ai as s,ns as t,Mt as u,$r as v,aa as w,Dl as x,uJ as y,Iq as z};

import{z as b,j as e,S as c,A as g}from"./index-B0SGsixC.js";import{u as p,r as n}from"./react-vendor-Cc0P4_ZX.js";/* empty css                           */import{z as f,E as N,X as y,W as v,e as w,m as C,ab as P}from"./ui-vendor-CZgqa0n4.js";import"./utils-vendor-azd6ta8e.js";import"./ai-vendor-CB5T-uN5.js";import"./chart-vendor-BcjzKorn.js";const $=()=>{const o=p(),[r,m]=n.useState([]),[a,d]=n.useState(!1),[h,l]=n.useState(null),[t,i]=n.useState(null),x=n.useCallback(async()=>{d(!0),l(null);try{const s=await b();m(s)}catch(s){l(s.message||"Failed to fetch clinic subscription plans."),i({type:"error",message:s.message||"Failed to fetch plans."})}finally{d(!1)}},[]);n.useEffect(()=>{x()},[x]),n.useEffect(()=>{if(t){const s=setTimeout(()=>i(null),5e3);return()=>clearTimeout(s)}},[t]);const j=async s=>{if(i(null),l(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){d(!0),l(null),i(null);try{await g(s),i({type:"success",message:"Clinic plan deactivated successfully!"}),x()}catch(u){l(u.message||"Failed to deactivate clinic plan."),i({type:"error",message:u.message||"Failed to deactivate plan."})}finally{d(!1)}}};return e.jsxs("div",{className:"subscription-page-container",children:[t&&e.jsxs("div",{className:`${t.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[e.jsxs("div",{className:"flex items-center",children:[t.type==="success"?e.jsx(f,{size:18,className:"mr-2 text-green-500"}):e.jsx(N,{size:18,className:"mr-2 text-red-500"}),e.jsx("span",{children:t.message})]}),e.jsx("button",{onClick:()=>i(null),className:`${t.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:e.jsx(y,{size:16})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>o(-1),className:"p-2 rounded-md hover:bg-gray-200",children:e.jsx(v,{size:20})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),e.jsxs("button",{onClick:()=>o("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[e.jsx(w,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),a&&r.length===0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"subscription-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Billing Cycle"}),e.jsx("th",{children:"Status"}),e.jsx("th",{className:"text-right",children:"Actions"})]})}),e.jsx("tbody",{children:[1,2,3].map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(c,{width:120,height:20})}),e.jsx("td",{children:e.jsx(c,{width:80,height:20})}),e.jsx("td",{children:e.jsx(c,{width:150,height:20})}),e.jsx("td",{children:e.jsx(c,{width:60,height:24,style:{borderRadius:"16px"}})}),e.jsx("td",{className:"text-right",children:e.jsx(c,{width:80,height:32})})]},s))})]})}),!a&&h&&r.length===0&&e.jsx("p",{className:"text-center text-red-500",children:h}),r.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"subscription-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Billing Cycle"}),e.jsx("th",{children:"Status"}),e.jsx("th",{className:"text-right",children:"Actions"})]})}),e.jsx("tbody",{children:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsxs("td",{children:["â‚¹",Number(s.price).toFixed(2)]}),e.jsxs("td",{children:["Every ",s.interval>1?s.interval:""," ",s.period,s.interval>1?"s":""]}),e.jsx("td",{children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.status})}),e.jsxs("td",{className:"actions-cell text-right",children:[e.jsx("button",{onClick:()=>o(`/dashboard/clinic-subscriptions/edit/${s.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:e.jsx(C,{size:16,className:"inline-block"})}),s.status==="active"&&e.jsx("button",{onClick:()=>j(s.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:a,children:e.jsx(P,{size:16,className:"inline-block"})})]})]},s.id))})]})}),!a&&r.length===0&&!h&&e.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})};export{$ as default};
